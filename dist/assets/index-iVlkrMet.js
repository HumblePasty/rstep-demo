const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MapView-CmUlEZ03.js","./ColorBackground-r4rnu2aW.js","./Basemap-BTOnfB6q.js","./editableLayers-BUxD9Rs8.js","./catalogUtils-J1X8hQ-e.js","./basemapUtils-CV5TcQzY.js","./TileInfo-C_JVarU6.js","./TileKey-DZd6gJy7.js","./ReactiveMap-BBqjIwDS.js","./IViewEvents-Bci6PjlS.js","./a11yUtils-B8bCuohp.js","./heightModelInfoUtils-BWeWnrL-.js","./normalizeUtils-DQsVP1km.js","./normalizeUtilsCommon-Che8FPCx.js","./utils-oO-C4Iyn.js","./utils-DiRmdl4x.js","./mat2df32-orApM5a3.js","./vec2f32-BbH2jxlN.js","./unitBezier-BX6NeAEr.js","./Tile-BmZ8lmVE.js","./TileKey-dQAx_7Fk.js","./QueueProcessor-VIg_xa4w.js","./quickselect-QQC62dOK.js","./definitions-DyYHcW4a.js","./HighlightDefaults-_3Lw8Xdr.js","./enums-D9v74xTE.js","./Texture-BPY80ch1.js","./imageUtils-BOESpqtI.js","./capabilities-DWNhET5Y.js","./accessibleHandler-BoVgh6NQ.js","./GoTo-COuiYkgM.js","./WebMap-D2uMPYG2.js","./jsonContext-BfCSCIrT.js","./project-I-D7vmlY.js","./NetworkElement-BoQvwHI4.js","./AreaMeasurement2D-Drl29pUh.js","./defaultUnit-Be6aEJeK.js","./getDefaultUnitForView-DBBBfQEa.js","./unitFormatUtils-gz8TeJ-M.js","./ByteSizeUnit-BsxeN7wM.js","./SnappingVisualizer2D-DvZwmvEe.js","./SnappingVisualizer-DrjptG4J.js","./PointSnappingHint-d77_5gT0.js","./MeasurementWidgetContent-CBPQaCWS.js","./GraphicManipulator-DXu7aKzu.js","./BasemapGallery-e5cXOMtD.js","./Heading-Mlbc0x-v.js","./DistanceMeasurement2D-Br8wF9if.js","./Editor-B_S23SkV.js","./Spinner-KOyMW7Mu.js","./AttachmentInfo-CgmglbBo.js","./featureUtils-BIHh5tzD.js","./utils-kssYlF8w.js","./legacyIcon-DkTFV6vi.js","./arcade-LEV6hsfX.js","./TimeOnly-XonUScM-.js","./ImmutableArray-BPVd6ESQ.js","./symbolUtils-Bde16Pq_.js","./utils-DR3vdJv9.js","./cimSymbolUtils-Bvoj63EK.js","./webStyleSymbolUtils-gw6AhO1k.js","./devEnvironmentUtils-CnNDiFMM.js","./helpMessageUtils-M95XMmyR.js","./GraphicState-DJlTJP7L.js","./HighlightHelper-CPICMoZI.js","./infoFor3D-BU6V8avP.js","./uploadAssetErrors-BJ0vX4cG.js","./LayerList-3It43YGN.js","./actionUtils-D65qOIxf.js","./Legend-CZSo0KCY.js","./featureReductionUtils-Caulfaw_.js","./EffectView-D_eanp_g.js","./ExportImageParameters-auON8RL9.js","./scaleUtils-BnhKwXnB.js","./floorFilterUtils-DZ5C6FQv.js","./sublayerUtils-D46LitG8.js","./pixelRangeUtils-Ba7Ehdiw.js","./rendererConversion-BKRTUHS1.js","./heatmapRampUtils-CEF6kpKA.js","./Search-Daruwa-k.js","./geometryUtils-C1KOj9C5.js","./commonProperties-DHiB1uzW.js","./ElevationLayer-DkqNcQDF.js","./ArcGISCachedService-fM_fhwDu.js","./TileInfoTilemapCache-OTMFp-Bs.js","./TilemapCache-BSnw1As8.js","./WorkerHandle-DmFaIYox.js","./calcite-input-C4Pqrztb.js","./input2-BhfhZKGN.js","./Validation-CuhM_4_G.js","./input-j1u1wOBY.js","./input-message-BOY1F8ba.js","./progress-aXRgJX-G.js","./portalLayers-BCCsDF3K.js","./associatedFeatureServiceUtils-D55m8-As.js","./fetchService-YVBM7d72.js","./arcgisLayers-JEVUzCbq.js","./WhereClause-CnhNRiNK.js","./arcadeUtils-BCNWKMpC.js","./languageUtils-DXjOYpmB.js","./shared-sR7TNFDe.js","./number-CpY7nVfi.js","./featureConversionUtils-OHAPdSRR.js","./OptimizedFeature-6cJ-QFG5.js","./OptimizedGeometry-BF8iz5FO.js","./OptimizedFeatureSet-Blu9Ckm7.js","./layersLoader-DdRu1e7J.js","./layersCreator-BPFuDFce.js","./BingMapsLayer-D2dtsJ2f.js","./imageBitmapUtils-uuYCyfuM.js","./BuildingSceneLayer-Csvqm0ZA.js","./capabilities-D6exRNM4.js","./SceneService-Du8nQnl8.js","./originUtils-D69mHv66.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./resourceUtils-eJYsmUFn.js","./resourceUtils-B22qdTF8.js","./I3SLayerDefinitions-DTrhJjB4.js","./I3SUtil-CwGmLSWi.js","./I3SBinaryReader-v0iNGCyu.js","./VertexAttribute-Cq4MnHjR.js","./edgeUtils-DYXw-0b0.js","./floatRGBA-DpUYmhbT.js","./symbolColorUtils-Cn12JGu0.js","./interfaces-DDtDqZYj.js","./NormalAttribute.glsl-DIDVm_tk.js","./BindType-BmZEZMMh.js","./orientedBoundingBox-C_quNnZx.js","./spatialReferenceEllipsoidUtils-npYofZNY.js","./computeTranslationToOriginAndRotation-CjUgTcXw.js","./popupUtils-CCR84YDf.js","./CSVLayer-D4MC3ksb.js","./clientSideDefaults-BsxPyOE4.js","./QueryEngineCapabilities-DjYb9CEb.js","./CatalogLayer-xZmj_-JO.js","./utils-B-SYjl6m.js","./ClassBreaksDefinition-Bm3XCWNl.js","./FeatureLayerSource-BlNKCNlU.js","./External-CaVFbphd.js","./MeshTransform-BHkPKup6.js","./axisAngleDegrees-CfXkCHiQ.js","./editingSupport-BipxZ0Ut.js","./QueryTask-CBMS9fpA.js","./executeForIds-BFg9MULW.js","./query-pdd4a6ky.js","./pbfQueryUtils-bEkgy7lL.js","./pbf-BVq5Yof2.js","./executeQueryJSON-Cv-rI2y4.js","./DimensionLayer-BxHonJeX.js","./Analysis-CJQKAwZ8.js","./GeoJSONLayer-DFDdyr8p.js","./ImageryLayer-EFYQFUbn.js","./RasterPresetRendererMixin-D7BX7cQR.js","./multidimensionalUtils-BFhUgwxe.js","./dataUtils-D0PZvdZH.js","./RasterSymbolizer-D4M69Swk.js","./ImageryTileLayer-thnCIBiD.js","./RawBlockCache-DbAScXZO.js","./rasterProjectionHelper-CtPC9RFa.js","./GCSShiftTransform-M-gjGhtF.js","./IntegratedMeshLayer-TuSsq4jL.js","./persistable-C80R3k-O.js","./resourceExtension-BKy_pwLi.js","./KMLLayer-D3S_psDX.js","./kmlUtils-DZJq2SB8.js","./KnowledgeGraphLayer-DPePf_mc.js","./KnowledgeGraphSublayer-nN5O30Q8.js","./knowledgeGraphService-Ck6K0jtg.js","./GraphQueryStreaming-BEcRbSrb.js","./FeatureStore-Dsr_kT5C.js","./BoundsStore-C3kYMxgm.js","./PooledRBush-BuBmBPCR.js","./timeSupport-DVDrhK3l.js","./queryUtils-ClLXYizt.js","./json-Wa8cmqdu.js","./optimizedFeatureQueryEngineAdapter-BOPMFOve.js","./centroid-DdLmOD72.js","./QueryEngine-CeDEPD8Q.js","./utils-CxjEKrdy.js","./SnappingCandidate-DGkpYqI6.js","./LineOfSightLayer-A5g-Gf6b.js","./featureReferenceUtils-Dadgokzs.js","./IntersectorInterfaces-CmNINbyF.js","./boundedPlane-CGcu6EX1.js","./lineSegment-X0hRSXXw.js","./LinkChartLayer-tDD2vAu3.js","./MapImageLayer-Df9fGMrd.js","./SublayersOwner-D-xPaAse.js","./MapNotesLayer-BD0moL5f.js","./objectIdUtils-4dd1rf9p.js","./MediaLayer-oAc1cIqv.js","./MediaElementView-BvO54HbE.js","./normalizeUtilsSync-C_H1luD3.js","./OGCFeatureLayer-DtMkbmyk.js","./ogcFeatureUtils-Chnp2D3O.js","./geojson-COKniz8f.js","./date-Ctp1FiBW.js","./sourceUtils-DHLBaQzW.js","./OpenStreetMapLayer-5qZzDuI_.js","./WebTileLayer-LdRVhnhY.js","./PointCloudLayer-9Ep09O8O.js","./PointCloudUniqueValueRenderer-BcqIdnho.js","./RouteLayer-D5QU1iA1.js","./Stop-DWm1TQQ2.js","./SceneLayer-CzIa0p5C.js","./Mesh-BjW_X3_p.js","./MeshComponent-Cj9ucbfM.js","./meshProperties-C4iW0Ukm.js","./MeshVertexAttributes-BiUaaspn.js","./triangulationUtils-pRu_k8dQ.js","./earcut-D9gy186-.js","./Indices-DSV_l4iH.js","./deduplicate-DKpBUgvf.js","./vertexSpaceConversion-DiytEBo-.js","./vec3-BkCsQdqQ.js","./BufferView-B2QeqhBe.js","./vec4-jDh3UXLb.js","./meshSpatialReferenceScaleUtils-DG0Bz6E9.js","./SubtypeGroupLayer-DsbElCvZ.js","./TileLayer-Bmrs7Hvj.js","./VectorTileLayer-CdQ7SvMn.js","./StyleRepository-DqQCJt28.js","./StyleDefinition-jNkd3dme.js","./enums-BRzLM11V.js","./GeometryUtils-B9fWQhnN.js","./VertexElementDescriptor-BLyltQyJ.js","./VideoLayer-2wo3U-5y.js","./TelemetryDisplay-NGSe9jed.js","./ViewshedLayer-u7aMmCTF.js","./VoxelLayer-CQ-PP38a.js","./WFSLayer-B6YAIUO7.js","./wfsUtils-Cob1-ZbA.js","./xmlUtils-CtUoQO7q.js","./WMSLayer-DfD7VANo.js","./crsUtils-DAndLU68.js","./ExportWMSImageParameters-DN38oDNs.js","./WMTSLayer-Ca-nfyJa.js","./groupLayerUtils-CRe-3KGg.js","./utils-CXUVA6QH.js","./geometryEngineJSON-CnmWYlDh.js","./statsWorker-C68zadxR.js","./geometryEngineWorker-DI9wdz7_.js","./CSVSourceWorker-DLWd03Si.js","./EdgeProcessingWorker-UkzEGni3.js","./workerHelper-Be7bVlvJ.js","./InterleavedLayout-qQUnblt6.js","./types-D0PSWh4d.js","./Util-B_VVMmYm.js","./edgeProcessing-BKV8_Vla.js","./glUtil-CAJRmga-.js","./Normals-BAK3WtWC.js","./ElevationSamplerWorker-Bve7N46f.js","./FeatureServiceSnappingSourceWorker-B50lDyNi.js","./symbologySnappingCandidates-DlcMGzDg.js","./GeoJSONSourceWorker-BuT5edmU.js","./MemorySourceWorker-CVcVMJ-B.js","./PBFDecoderWorker-Bv3NY0TW.js","./dehydratedFeatures-BufCUEKj.js","./FeaturePipelineWorker-DgVFxxtV.js","./AttributeStore-236XpD-R.js","./LabelMetric-MmCl6fCY.js","./Program-DmQFWlLN.js","./BufferObject-C2WaK149.js","./BoundingBox-CnpCxTZE.js","./CIMSymbolHelper-CvLlQYVV.js","./BidiEngine-QXap_35O.js","./fontUtils-ExLwdcvY.js","./Rect-CUzevAry.js","./UpdateTracking2D-BeRQQF2D.js","./MeshWriterRegistry-sJb-fw13.js","./PieChartMeshWriter-DgNbC4KI.js","./TurboLine-C3ULxvCd.js","./constants-F8oTIn7N.js","./grouping-Bq4slU3N.js","./CircularArray-CujHzHWW.js","./createConnection-B3h43lIC.js","./PointCloudWorker-DNyw0Q_9.js","./vec3f32-nZdmKIgz.js","./RasterWorker-BaS_yEw7.js","./SceneLayerSnappingSourceWorker-Cl2g4z8T.js","./Octree-CvIr6M5J.js","./SceneLayerWorker-C0bkyJVA.js","./WFSSourceWorker-BsohfPXc.js","./WorkerTileHandler-GC5b1_Eb.js","./config-BOD8--da.js","./SourceLayerData-thDV2cFk.js","./Feature3DPipelineWorker-p3U00od9.js","./LodRenderer-BPlO3jZu.js","./Texture-BuDQEGxx.js","./renderState-5U5mGt-0.js","./basicInterfaces-CZwQPxTp.js","./triangle-Bqk1w1MQ.js","./requestImageUtils-BAhK2CGX.js","./HUDMaterial.glsl-CJsqKp_j.js","./VertexArrayObject-DsitYV1k.js","./utils-B61OnZXu.js","./doublePrecisionUtils-B0owpBza.js","./NestedMap-GuqgquCN.js","./DefaultMaterial-DrTSCs_d.js","./RealisticTree.glsl-CecXysC1.js","./deleteForwardEdits-BGRUvrMt.js","./featureLayerUtils-BsuykrNa.js","./BinsQuery-BC1Iwk-H.js","./SelfSnappingEngine-EN4Ii3gN.js","./geodesicLengthMeasurementUtils-CHen_KzJ.js","./GridSnappingEngine-CHYARLj4.js","./gridUtils-3Yt6RPUc.js","./FeatureSnappingEngine-CFCkyNQN.js","./editingTools-LXYCq8p3.js","./editPlaneUtils-wf9DbJTs.js","./automaticLengthMeasurementUtils-CkF1S02K.js","./helpMessageUtils3d-0anNs-_X.js","./automaticAreaMeasurementUtils-50pfdJ6i.js","./drawUtils-CQQohbC7.js","./ImageMaterial.glsl-CANCGWka.js","./TextOverlayItem-BhqXExEN.js","./RibbonLine.glsl-Dl4pFSgZ.js","./DefaultLayouts-DaWY8OL0.js","./SelectedVertexTooltipInfo-CMAEVXGu.js","./TranslateTooltipInfo-1_hzAuYx.js","./ExtentScaleTooltipInfo-CCtQRcha.js","./LineCallout.glsl-PNxSH6Zr.js","./highlightUtils-vR5BaM_q.js","./geometryServiceUtils-ClyVY4d-.js","./LayerView-BMeRKo2V.js","./GraphicMover-Bcb_Pk1i.js","./Box-Cdsd4X6x.js","./settings-BB5Ucnkc.js","./Reshape-B80vWw1T.js","./calcite-block-DjT8jjxP.js","./handle-BP33bdj7.js","./calcite-radio-button-group-qgfxqOZt.js","./calcite-list-Dp5vfzDW.js","./resources4-F8vB_VGv.js","./utils3-xH_9tLW3.js","./filter-DFNjemHN.js","./calcite-list-item-CCOyX-sU.js","./GridControls-Cem3R91e.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function zse(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function abe(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),i}var XD={exports:{}},Gw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CY;function lbe(){if(CY)return Gw;CY=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(n,s,r){var o=null;if(r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),"key"in s){r={};for(var l in s)l!=="key"&&(r[l]=s[l])}else r=s;return s=r.ref,{$$typeof:t,type:n,key:o,ref:s!==void 0?s:null,props:r}}return Gw.Fragment=e,Gw.jsx=i,Gw.jsxs=i,Gw}var PY;function cbe(){return PY||(PY=1,XD.exports=lbe()),XD.exports}var vt=cbe(),WD={exports:{}},Zi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TY;function ube(){if(TY)return Zi;TY=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function x(we){return we===null||typeof we!="object"?null:(we=_&&we[_]||we["@@iterator"],typeof we=="function"?we:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,A={};function D(we,Fe,it){this.props=we,this.context=Fe,this.refs=A,this.updater=it||S}D.prototype.isReactComponent={},D.prototype.setState=function(we,Fe){if(typeof we!="object"&&typeof we!="function"&&we!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,we,Fe,"setState")},D.prototype.forceUpdate=function(we){this.updater.enqueueForceUpdate(this,we,"forceUpdate")};function N(){}N.prototype=D.prototype;function F(we,Fe,it){this.props=we,this.context=Fe,this.refs=A,this.updater=it||S}var G=F.prototype=new N;G.constructor=F,P(G,D.prototype),G.isPureReactComponent=!0;var V=Array.isArray,B={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function J(we,Fe,it,_t,ot,ut){return it=ut.ref,{$$typeof:t,type:we,key:Fe,ref:it!==void 0?it:null,props:ut}}function re(we,Fe){return J(we.type,Fe,void 0,void 0,void 0,we.props)}function ne(we){return typeof we=="object"&&we!==null&&we.$$typeof===t}function oe(we){var Fe={"=":"=0",":":"=2"};return"$"+we.replace(/[=:]/g,function(it){return Fe[it]})}var pe=/\/+/g;function ce(we,Fe){return typeof we=="object"&&we!==null&&we.key!=null?oe(""+we.key):Fe.toString(36)}function ue(){}function se(we){switch(we.status){case"fulfilled":return we.value;case"rejected":throw we.reason;default:switch(typeof we.status=="string"?we.then(ue,ue):(we.status="pending",we.then(function(Fe){we.status==="pending"&&(we.status="fulfilled",we.value=Fe)},function(Fe){we.status==="pending"&&(we.status="rejected",we.reason=Fe)})),we.status){case"fulfilled":return we.value;case"rejected":throw we.reason}}throw we}function de(we,Fe,it,_t,ot){var ut=typeof we;(ut==="undefined"||ut==="boolean")&&(we=null);var Pt=!1;if(we===null)Pt=!0;else switch(ut){case"bigint":case"string":case"number":Pt=!0;break;case"object":switch(we.$$typeof){case t:case e:Pt=!0;break;case y:return Pt=we._init,de(Pt(we._payload),Fe,it,_t,ot)}}if(Pt)return ot=ot(we),Pt=_t===""?"."+ce(we,0):_t,V(ot)?(it="",Pt!=null&&(it=Pt.replace(pe,"$&/")+"/"),de(ot,Fe,it,"",function(Nt){return Nt})):ot!=null&&(ne(ot)&&(ot=re(ot,it+(ot.key==null||we&&we.key===ot.key?"":(""+ot.key).replace(pe,"$&/")+"/")+Pt)),Fe.push(ot)),1;Pt=0;var Vt=_t===""?".":_t+":";if(V(we))for(var Ft=0;Ft<we.length;Ft++)_t=we[Ft],ut=Vt+ce(_t,Ft),Pt+=de(_t,Fe,it,ut,ot);else if(Ft=x(we),typeof Ft=="function")for(we=Ft.call(we),Ft=0;!(_t=we.next()).done;)_t=_t.value,ut=Vt+ce(_t,Ft++),Pt+=de(_t,Fe,it,ut,ot);else if(ut==="object"){if(typeof we.then=="function")return de(se(we),Fe,it,_t,ot);throw Fe=String(we),Error("Objects are not valid as a React child (found: "+(Fe==="[object Object]"?"object with keys {"+Object.keys(we).join(", ")+"}":Fe)+"). If you meant to render a collection of children, use an array instead.")}return Pt}function Se(we,Fe,it){if(we==null)return we;var _t=[],ot=0;return de(we,_t,"","",function(ut){return Fe.call(it,ut,ot++)}),_t}function Pe(we){if(we._status===-1){var Fe=we._result;Fe=Fe(),Fe.then(function(it){(we._status===0||we._status===-1)&&(we._status=1,we._result=it)},function(it){(we._status===0||we._status===-1)&&(we._status=2,we._result=it)}),we._status===-1&&(we._status=0,we._result=Fe)}if(we._status===1)return we._result.default;throw we._result}var Re=typeof reportError=="function"?reportError:function(we){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof we=="object"&&we!==null&&typeof we.message=="string"?String(we.message):String(we),error:we});if(!window.dispatchEvent(Fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",we);return}console.error(we)};function $e(){}return Zi.Children={map:Se,forEach:function(we,Fe,it){Se(we,function(){Fe.apply(this,arguments)},it)},count:function(we){var Fe=0;return Se(we,function(){Fe++}),Fe},toArray:function(we){return Se(we,function(Fe){return Fe})||[]},only:function(we){if(!ne(we))throw Error("React.Children.only expected to receive a single React element child.");return we}},Zi.Component=D,Zi.Fragment=i,Zi.Profiler=s,Zi.PureComponent=F,Zi.StrictMode=n,Zi.Suspense=c,Zi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Zi.act=function(){throw Error("act(...) is not supported in production builds of React.")},Zi.cache=function(we){return function(){return we.apply(null,arguments)}},Zi.cloneElement=function(we,Fe,it){if(we==null)throw Error("The argument must be a React element, but you passed "+we+".");var _t=P({},we.props),ot=we.key,ut=void 0;if(Fe!=null)for(Pt in Fe.ref!==void 0&&(ut=void 0),Fe.key!==void 0&&(ot=""+Fe.key),Fe)!W.call(Fe,Pt)||Pt==="key"||Pt==="__self"||Pt==="__source"||Pt==="ref"&&Fe.ref===void 0||(_t[Pt]=Fe[Pt]);var Pt=arguments.length-2;if(Pt===1)_t.children=it;else if(1<Pt){for(var Vt=Array(Pt),Ft=0;Ft<Pt;Ft++)Vt[Ft]=arguments[Ft+2];_t.children=Vt}return J(we.type,ot,void 0,void 0,ut,_t)},Zi.createContext=function(we){return we={$$typeof:o,_currentValue:we,_currentValue2:we,_threadCount:0,Provider:null,Consumer:null},we.Provider=we,we.Consumer={$$typeof:r,_context:we},we},Zi.createElement=function(we,Fe,it){var _t,ot={},ut=null;if(Fe!=null)for(_t in Fe.key!==void 0&&(ut=""+Fe.key),Fe)W.call(Fe,_t)&&_t!=="key"&&_t!=="__self"&&_t!=="__source"&&(ot[_t]=Fe[_t]);var Pt=arguments.length-2;if(Pt===1)ot.children=it;else if(1<Pt){for(var Vt=Array(Pt),Ft=0;Ft<Pt;Ft++)Vt[Ft]=arguments[Ft+2];ot.children=Vt}if(we&&we.defaultProps)for(_t in Pt=we.defaultProps,Pt)ot[_t]===void 0&&(ot[_t]=Pt[_t]);return J(we,ut,void 0,void 0,null,ot)},Zi.createRef=function(){return{current:null}},Zi.forwardRef=function(we){return{$$typeof:l,render:we}},Zi.isValidElement=ne,Zi.lazy=function(we){return{$$typeof:y,_payload:{_status:-1,_result:we},_init:Pe}},Zi.memo=function(we,Fe){return{$$typeof:f,type:we,compare:Fe===void 0?null:Fe}},Zi.startTransition=function(we){var Fe=B.T,it={};B.T=it;try{var _t=we(),ot=B.S;ot!==null&&ot(it,_t),typeof _t=="object"&&_t!==null&&typeof _t.then=="function"&&_t.then($e,Re)}catch(ut){Re(ut)}finally{B.T=Fe}},Zi.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Zi.use=function(we){return B.H.use(we)},Zi.useActionState=function(we,Fe,it){return B.H.useActionState(we,Fe,it)},Zi.useCallback=function(we,Fe){return B.H.useCallback(we,Fe)},Zi.useContext=function(we){return B.H.useContext(we)},Zi.useDebugValue=function(){},Zi.useDeferredValue=function(we,Fe){return B.H.useDeferredValue(we,Fe)},Zi.useEffect=function(we,Fe){return B.H.useEffect(we,Fe)},Zi.useId=function(){return B.H.useId()},Zi.useImperativeHandle=function(we,Fe,it){return B.H.useImperativeHandle(we,Fe,it)},Zi.useInsertionEffect=function(we,Fe){return B.H.useInsertionEffect(we,Fe)},Zi.useLayoutEffect=function(we,Fe){return B.H.useLayoutEffect(we,Fe)},Zi.useMemo=function(we,Fe){return B.H.useMemo(we,Fe)},Zi.useOptimistic=function(we,Fe){return B.H.useOptimistic(we,Fe)},Zi.useReducer=function(we,Fe,it){return B.H.useReducer(we,Fe,it)},Zi.useRef=function(we){return B.H.useRef(we)},Zi.useState=function(we){return B.H.useState(we)},Zi.useSyncExternalStore=function(we,Fe,it){return B.H.useSyncExternalStore(we,Fe,it)},Zi.useTransition=function(){return B.H.useTransition()},Zi.version="19.0.0",Zi}var IY;function TM(){return IY||(IY=1,WD.exports=ube()),WD.exports}var Gh=TM();const us=zse(Gh);var ZD={exports:{}},jw={},KD={exports:{}},JD={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MY;function hbe(){return MY||(MY=1,function(t){function e(Se,Pe){var Re=Se.length;Se.push(Pe);e:for(;0<Re;){var $e=Re-1>>>1,we=Se[$e];if(0<s(we,Pe))Se[$e]=Pe,Se[Re]=we,Re=$e;else break e}}function i(Se){return Se.length===0?null:Se[0]}function n(Se){if(Se.length===0)return null;var Pe=Se[0],Re=Se.pop();if(Re!==Pe){Se[0]=Re;e:for(var $e=0,we=Se.length,Fe=we>>>1;$e<Fe;){var it=2*($e+1)-1,_t=Se[it],ot=it+1,ut=Se[ot];if(0>s(_t,Re))ot<we&&0>s(ut,_t)?(Se[$e]=ut,Se[ot]=Re,$e=ot):(Se[$e]=_t,Se[it]=Re,$e=it);else if(ot<we&&0>s(ut,Re))Se[$e]=ut,Se[ot]=Re,$e=ot;else break e}}return Pe}function s(Se,Pe){var Re=Se.sortIndex-Pe.sortIndex;return Re!==0?Re:Se.id-Pe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],f=[],y=1,_=null,x=3,S=!1,P=!1,A=!1,D=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function G(Se){for(var Pe=i(f);Pe!==null;){if(Pe.callback===null)n(f);else if(Pe.startTime<=Se)n(f),Pe.sortIndex=Pe.expirationTime,e(c,Pe);else break;Pe=i(f)}}function V(Se){if(A=!1,G(Se),!P)if(i(c)!==null)P=!0,se();else{var Pe=i(f);Pe!==null&&de(V,Pe.startTime-Se)}}var B=!1,W=-1,J=5,re=-1;function ne(){return!(t.unstable_now()-re<J)}function oe(){if(B){var Se=t.unstable_now();re=Se;var Pe=!0;try{e:{P=!1,A&&(A=!1,N(W),W=-1),S=!0;var Re=x;try{t:{for(G(Se),_=i(c);_!==null&&!(_.expirationTime>Se&&ne());){var $e=_.callback;if(typeof $e=="function"){_.callback=null,x=_.priorityLevel;var we=$e(_.expirationTime<=Se);if(Se=t.unstable_now(),typeof we=="function"){_.callback=we,G(Se),Pe=!0;break t}_===i(c)&&n(c),G(Se)}else n(c);_=i(c)}if(_!==null)Pe=!0;else{var Fe=i(f);Fe!==null&&de(V,Fe.startTime-Se),Pe=!1}}break e}finally{_=null,x=Re,S=!1}Pe=void 0}}finally{Pe?pe():B=!1}}}var pe;if(typeof F=="function")pe=function(){F(oe)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ue=ce.port2;ce.port1.onmessage=oe,pe=function(){ue.postMessage(null)}}else pe=function(){D(oe,0)};function se(){B||(B=!0,pe())}function de(Se,Pe){W=D(function(){Se(t.unstable_now())},Pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Se){Se.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,se())},t.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Se?Math.floor(1e3/Se):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(Se){switch(x){case 1:case 2:case 3:var Pe=3;break;default:Pe=x}var Re=x;x=Pe;try{return Se()}finally{x=Re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Se,Pe){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var Re=x;x=Se;try{return Pe()}finally{x=Re}},t.unstable_scheduleCallback=function(Se,Pe,Re){var $e=t.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?$e+Re:$e):Re=$e,Se){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Re+we,Se={id:y++,callback:Pe,priorityLevel:Se,startTime:Re,expirationTime:we,sortIndex:-1},Re>$e?(Se.sortIndex=Re,e(f,Se),i(c)===null&&Se===i(f)&&(A?(N(W),W=-1):A=!0,de(V,Re-$e))):(Se.sortIndex=we,e(c,Se),P||S||(P=!0,se())),Se},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(Se){var Pe=x;return function(){var Re=x;x=Pe;try{return Se.apply(this,arguments)}finally{x=Re}}}}(JD)),JD}var AY;function dbe(){return AY||(AY=1,KD.exports=hbe()),KD.exports}var QD={exports:{}},Oa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kY;function fbe(){if(kY)return Oa;kY=1;var t=TM();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(c,f,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:c,containerInfo:f,implementation:y}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Oa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Oa.createPortal=function(c,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return r(c,f,null,y)},Oa.flushSync=function(c){var f=o.T,y=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=f,n.p=y,n.d.f()}},Oa.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(c,f))},Oa.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Oa.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var y=f.as,_=l(y,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?n.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:S}):y==="script"&&n.d.X(c,{crossOrigin:_,integrity:x,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Oa.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=l(f.as,f.crossOrigin);n.d.M(c,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(c)},Oa.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,_=l(y,f.crossOrigin);n.d.L(c,y,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Oa.preloadModule=function(c,f){if(typeof c=="string")if(f){var y=l(f.as,f.crossOrigin);n.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(c)},Oa.requestFormReset=function(c){n.d.r(c)},Oa.unstable_batchedUpdates=function(c,f){return c(f)},Oa.useFormState=function(c,f,y){return o.H.useFormState(c,f,y)},Oa.useFormStatus=function(){return o.H.useHostTransitionStatus()},Oa.version="19.0.0",Oa}var DY;function qse(){if(DY)return QD.exports;DY=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),QD.exports=fbe(),QD.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NY;function pbe(){if(NY)return jw;NY=1;var t=dbe(),e=TM(),i=qse();function n(w){var E="https://react.dev/errors/"+w;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)E+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+w+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(w){return!(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)}var r=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),S=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),V=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function W(w){return w===null||typeof w!="object"?null:(w=B&&w[B]||w["@@iterator"],typeof w=="function"?w:null)}var J=Symbol.for("react.client.reference");function re(w){if(w==null)return null;if(typeof w=="function")return w.$$typeof===J?null:w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case c:return"Fragment";case l:return"Portal";case y:return"Profiler";case f:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case S:return(w.displayName||"Context")+".Provider";case x:return(w._context.displayName||"Context")+".Consumer";case P:var E=w.render;return w=w.displayName,w||(w=E.displayName||E.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case N:return E=w.displayName||null,E!==null?E:re(w.type)||"Memo";case F:E=w._payload,w=w._init;try{return re(w(E))}catch{}}return null}var ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=Object.assign,pe,ce;function ue(w){if(pe===void 0)try{throw Error()}catch(k){var E=k.stack.trim().match(/\n( *(at )?)/);pe=E&&E[1]||"",ce=-1<k.stack.indexOf(`
    at`)?" (<anonymous>)":-1<k.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+w+ce}var se=!1;function de(w,E){if(!w||se)return"";se=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(E){var At=function(){throw Error()};if(Object.defineProperty(At.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(At,[])}catch(gt){var at=gt}Reflect.construct(w,[],At)}else{try{At.call()}catch(gt){at=gt}w.call(At.prototype)}}else{try{throw Error()}catch(gt){at=gt}(At=w())&&typeof At.catch=="function"&&At.catch(function(){})}}catch(gt){if(gt&&at&&typeof gt.stack=="string")return[gt.stack,at.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Z=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");Z&&Z.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ie=z.DetermineComponentFrameRoot(),_e=ie[0],ke=ie[1];if(_e&&ke){var qe=_e.split(`
`),We=ke.split(`
`);for(Z=z=0;z<qe.length&&!qe[z].includes("DetermineComponentFrameRoot");)z++;for(;Z<We.length&&!We[Z].includes("DetermineComponentFrameRoot");)Z++;if(z===qe.length||Z===We.length)for(z=qe.length-1,Z=We.length-1;1<=z&&0<=Z&&qe[z]!==We[Z];)Z--;for(;1<=z&&0<=Z;z--,Z--)if(qe[z]!==We[Z]){if(z!==1||Z!==1)do if(z--,Z--,0>Z||qe[z]!==We[Z]){var yt=`
`+qe[z].replace(" at new "," at ");return w.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",w.displayName)),yt}while(1<=z&&0<=Z);break}}}finally{se=!1,Error.prepareStackTrace=k}return(k=w?w.displayName||w.name:"")?ue(k):""}function Se(w){switch(w.tag){case 26:case 27:case 5:return ue(w.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return w=de(w.type,!1),w;case 11:return w=de(w.type.render,!1),w;case 1:return w=de(w.type,!0),w;default:return""}}function Pe(w){try{var E="";do E+=Se(w),w=w.return;while(w);return E}catch(k){return`
Error generating stack: `+k.message+`
`+k.stack}}function Re(w){var E=w,k=w;if(w.alternate)for(;E.return;)E=E.return;else{w=E;do E=w,(E.flags&4098)!==0&&(k=E.return),w=E.return;while(w)}return E.tag===3?k:null}function $e(w){if(w.tag===13){var E=w.memoizedState;if(E===null&&(w=w.alternate,w!==null&&(E=w.memoizedState)),E!==null)return E.dehydrated}return null}function we(w){if(Re(w)!==w)throw Error(n(188))}function Fe(w){var E=w.alternate;if(!E){if(E=Re(w),E===null)throw Error(n(188));return E!==w?null:w}for(var k=w,z=E;;){var Z=k.return;if(Z===null)break;var ie=Z.alternate;if(ie===null){if(z=Z.return,z!==null){k=z;continue}break}if(Z.child===ie.child){for(ie=Z.child;ie;){if(ie===k)return we(Z),w;if(ie===z)return we(Z),E;ie=ie.sibling}throw Error(n(188))}if(k.return!==z.return)k=Z,z=ie;else{for(var _e=!1,ke=Z.child;ke;){if(ke===k){_e=!0,k=Z,z=ie;break}if(ke===z){_e=!0,z=Z,k=ie;break}ke=ke.sibling}if(!_e){for(ke=ie.child;ke;){if(ke===k){_e=!0,k=ie,z=Z;break}if(ke===z){_e=!0,z=ie,k=Z;break}ke=ke.sibling}if(!_e)throw Error(n(189))}}if(k.alternate!==z)throw Error(n(190))}if(k.tag!==3)throw Error(n(188));return k.stateNode.current===k?w:E}function it(w){var E=w.tag;if(E===5||E===26||E===27||E===6)return w;for(w=w.child;w!==null;){if(E=it(w),E!==null)return E;w=w.sibling}return null}var _t=Array.isArray,ot=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},Pt=[],Vt=-1;function Ft(w){return{current:w}}function Nt(w){0>Vt||(w.current=Pt[Vt],Pt[Vt]=null,Vt--)}function Wi(w,E){Vt++,Pt[Vt]=w.current,w.current=E}var hn=Ft(null),ps=Ft(null),Yn=Ft(null),fr=Ft(null);function fo(w,E){switch(Wi(Yn,E),Wi(ps,w),Wi(hn,null),w=E.nodeType,w){case 9:case 11:E=(E=E.documentElement)&&(E=E.namespaceURI)?eY(E):0;break;default:if(w=w===8?E.parentNode:E,E=w.tagName,w=w.namespaceURI)w=eY(w),E=tY(w,E);else switch(E){case"svg":E=1;break;case"math":E=2;break;default:E=0}}Nt(hn),Wi(hn,E)}function sn(){Nt(hn),Nt(ps),Nt(Yn)}function ye(w){w.memoizedState!==null&&Wi(fr,w);var E=hn.current,k=tY(E,w.type);E!==k&&(Wi(ps,w),Wi(hn,k))}function qi(w){ps.current===w&&(Nt(hn),Nt(ps)),fr.current===w&&(Nt(fr),Lw._currentValue=ut)}var Ir=Object.prototype.hasOwnProperty,ri=t.unstable_scheduleCallback,Ai=t.unstable_cancelCallback,ms=t.unstable_shouldYield,gn=t.unstable_requestPaint,Ji=t.unstable_now,is=t.unstable_getCurrentPriorityLevel,gs=t.unstable_ImmediatePriority,Wr=t.unstable_UserBlockingPriority,Tn=t.unstable_NormalPriority,wt=t.unstable_LowPriority,Xn=t.unstable_IdlePriority,m=t.log,j=t.unstable_setDisableYieldValue,T=null,p=null;function h(w){if(p&&typeof p.onCommitFiberRoot=="function")try{p.onCommitFiberRoot(T,w,void 0,(w.current.flags&128)===128)}catch{}}function a(w){if(typeof m=="function"&&j(w),p&&typeof p.setStrictMode=="function")try{p.setStrictMode(T,w)}catch{}}var u=Math.clz32?Math.clz32:v,d=Math.log,g=Math.LN2;function v(w){return w>>>=0,w===0?32:31-(d(w)/g|0)|0}var b=128,C=4194304;function M(w){var E=w&42;if(E!==0)return E;switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return w&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return w}}function $(w,E){var k=w.pendingLanes;if(k===0)return 0;var z=0,Z=w.suspendedLanes,ie=w.pingedLanes,_e=w.warmLanes;w=w.finishedLanes!==0;var ke=k&134217727;return ke!==0?(k=ke&~Z,k!==0?z=M(k):(ie&=ke,ie!==0?z=M(ie):w||(_e=ke&~_e,_e!==0&&(z=M(_e))))):(ke=k&~Z,ke!==0?z=M(ke):ie!==0?z=M(ie):w||(_e=k&~_e,_e!==0&&(z=M(_e)))),z===0?0:E!==0&&E!==z&&(E&Z)===0&&(Z=z&-z,_e=E&-E,Z>=_e||Z===32&&(_e&4194176)!==0)?E:z}function L(w,E){return(w.pendingLanes&~(w.suspendedLanes&~w.pingedLanes)&E)===0}function q(w,E){switch(w){case 1:case 2:case 4:case 8:return E+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var w=b;return b<<=1,(b&4194176)===0&&(b=128),w}function ee(){var w=C;return C<<=1,(C&62914560)===0&&(C=4194304),w}function Q(w){for(var E=[],k=0;31>k;k++)E.push(w);return E}function ge(w,E){w.pendingLanes|=E,E!==268435456&&(w.suspendedLanes=0,w.pingedLanes=0,w.warmLanes=0)}function ve(w,E,k,z,Z,ie){var _e=w.pendingLanes;w.pendingLanes=k,w.suspendedLanes=0,w.pingedLanes=0,w.warmLanes=0,w.expiredLanes&=k,w.entangledLanes&=k,w.errorRecoveryDisabledLanes&=k,w.shellSuspendCounter=0;var ke=w.entanglements,qe=w.expirationTimes,We=w.hiddenUpdates;for(k=_e&~k;0<k;){var yt=31-u(k),At=1<<yt;ke[yt]=0,qe[yt]=-1;var at=We[yt];if(at!==null)for(We[yt]=null,yt=0;yt<at.length;yt++){var gt=at[yt];gt!==null&&(gt.lane&=-536870913)}k&=~At}z!==0&&fe(w,z,0),ie!==0&&Z===0&&w.tag!==0&&(w.suspendedLanes|=ie&~(_e&~E))}function fe(w,E,k){w.pendingLanes|=E,w.suspendedLanes&=~E;var z=31-u(E);w.entangledLanes|=E,w.entanglements[z]=w.entanglements[z]|1073741824|k&4194218}function Ce(w,E){var k=w.entangledLanes|=E;for(w=w.entanglements;k;){var z=31-u(k),Z=1<<z;Z&E|w[z]&E&&(w[z]|=E),k&=~Z}}function Ie(w){return w&=-w,2<w?8<w?(w&134217727)!==0?32:268435456:8:2}function Ne(){var w=ot.p;return w!==0?w:(w=window.event,w===void 0?32:_Y(w.type))}function Ve(w,E){var k=ot.p;try{return ot.p=w,E()}finally{ot.p=k}}var Xe=Math.random().toString(36).slice(2),et="__reactFiber$"+Xe,dt="__reactProps$"+Xe,ct="__reactContainer$"+Xe,mt="__reactEvents$"+Xe,lt="__reactListeners$"+Xe,gi="__reactHandles$"+Xe,oi="__reactResources$"+Xe,Ni="__reactMarker$"+Xe;function Qi(w){delete w[et],delete w[dt],delete w[mt],delete w[lt],delete w[gi]}function xn(w){var E=w[et];if(E)return E;for(var k=w.parentNode;k;){if(E=k[ct]||k[et]){if(k=E.alternate,E.child!==null||k!==null&&k.child!==null)for(w=sY(w);w!==null;){if(k=w[et])return k;w=sY(w)}return E}w=k,k=w.parentNode}return null}function ln(w){if(w=w[et]||w[ct]){var E=w.tag;if(E===5||E===6||E===13||E===26||E===27||E===3)return w}return null}function Oi(w){var E=w.tag;if(E===5||E===26||E===27||E===6)return w.stateNode;throw Error(n(33))}function ui(w){var E=w[oi];return E||(E=w[oi]={hoistableStyles:new Map,hoistableScripts:new Map}),E}function Kt(w){w[Ni]=!0}var Wn=new Set,In={};function tr(w,E){wi(w,E),wi(w+"Capture",E)}function wi(w,E){for(In[w]=E,w=0;w<E.length;w++)Wn.add(E[w])}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pr={},ah={};function Jc(w){return Ir.call(ah,w)?!0:Ir.call(pr,w)?!1:rn.test(w)?ah[w]=!0:(pr[w]=!0,!1)}function ze(w,E,k){if(Jc(E))if(k===null)w.removeAttribute(E);else{switch(typeof k){case"undefined":case"function":case"symbol":w.removeAttribute(E);return;case"boolean":var z=E.toLowerCase().slice(0,5);if(z!=="data-"&&z!=="aria-"){w.removeAttribute(E);return}}w.setAttribute(E,""+k)}}function pt(w,E,k){if(k===null)w.removeAttribute(E);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":w.removeAttribute(E);return}w.setAttribute(E,""+k)}}function Tt(w,E,k,z){if(z===null)w.removeAttribute(k);else{switch(typeof z){case"undefined":case"function":case"symbol":case"boolean":w.removeAttribute(k);return}w.setAttributeNS(E,k,""+z)}}function ei(w){switch(typeof w){case"bigint":case"boolean":case"number":case"string":case"undefined":return w;case"object":return w;default:return""}}function Rn(w){var E=w.type;return(w=w.nodeName)&&w.toLowerCase()==="input"&&(E==="checkbox"||E==="radio")}function Ns(w){var E=Rn(w)?"checked":"value",k=Object.getOwnPropertyDescriptor(w.constructor.prototype,E),z=""+w[E];if(!w.hasOwnProperty(E)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var Z=k.get,ie=k.set;return Object.defineProperty(w,E,{configurable:!0,get:function(){return Z.call(this)},set:function(_e){z=""+_e,ie.call(this,_e)}}),Object.defineProperty(w,E,{enumerable:k.enumerable}),{getValue:function(){return z},setValue:function(_e){z=""+_e},stopTracking:function(){w._valueTracker=null,delete w[E]}}}}function Os(w){w._valueTracker||(w._valueTracker=Ns(w))}function Zr(w){if(!w)return!1;var E=w._valueTracker;if(!E)return!0;var k=E.getValue(),z="";return w&&(z=Rn(w)?w.checked?"true":"false":w.value),w=z,w!==k?(E.setValue(w),!0):!1}function qf(w){if(w=w||(typeof document<"u"?document:void 0),typeof w>"u")return null;try{return w.activeElement||w.body}catch{return w.body}}var Mm=/[\n"\\]/g;function ka(w){return w.replace(Mm,function(E){return"\\"+E.charCodeAt(0).toString(16)+" "})}function Am(w,E,k,z,Z,ie,_e,ke){w.name="",_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?w.type=_e:w.removeAttribute("type"),E!=null?_e==="number"?(E===0&&w.value===""||w.value!=E)&&(w.value=""+ei(E)):w.value!==""+ei(E)&&(w.value=""+ei(E)):_e!=="submit"&&_e!=="reset"||w.removeAttribute("value"),E!=null?Vf(w,_e,ei(E)):k!=null?Vf(w,_e,ei(k)):z!=null&&w.removeAttribute("value"),Z==null&&ie!=null&&(w.defaultChecked=!!ie),Z!=null&&(w.checked=Z&&typeof Z!="function"&&typeof Z!="symbol"),ke!=null&&typeof ke!="function"&&typeof ke!="symbol"&&typeof ke!="boolean"?w.name=""+ei(ke):w.removeAttribute("name")}function lh(w,E,k,z,Z,ie,_e,ke){if(ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(w.type=ie),E!=null||k!=null){if(!(ie!=="submit"&&ie!=="reset"||E!=null))return;k=k!=null?""+ei(k):"",E=E!=null?""+ei(E):k,ke||E===w.value||(w.value=E),w.defaultValue=E}z=z??Z,z=typeof z!="function"&&typeof z!="symbol"&&!!z,w.checked=ke?w.checked:!!z,w.defaultChecked=!!z,_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"&&(w.name=_e)}function Vf(w,E,k){E==="number"&&qf(w.ownerDocument)===w||w.defaultValue===""+k||(w.defaultValue=""+k)}function km(w,E,k,z){if(w=w.options,E){E={};for(var Z=0;Z<k.length;Z++)E["$"+k[Z]]=!0;for(k=0;k<w.length;k++)Z=E.hasOwnProperty("$"+w[k].value),w[k].selected!==Z&&(w[k].selected=Z),Z&&z&&(w[k].defaultSelected=!0)}else{for(k=""+ei(k),E=null,Z=0;Z<w.length;Z++){if(w[Z].value===k){w[Z].selected=!0,z&&(w[Z].defaultSelected=!0);return}E!==null||w[Z].disabled||(E=w[Z])}E!==null&&(E.selected=!0)}}function Wx(w,E,k){if(E!=null&&(E=""+ei(E),E!==w.value&&(w.value=E),k==null)){w.defaultValue!==E&&(w.defaultValue=E);return}w.defaultValue=k!=null?""+ei(k):""}function Zx(w,E,k,z){if(E==null){if(z!=null){if(k!=null)throw Error(n(92));if(_t(z)){if(1<z.length)throw Error(n(93));z=z[0]}k=z}k==null&&(k=""),E=k}k=ei(E),w.defaultValue=k,z=w.textContent,z===k&&z!==""&&z!==null&&(w.value=z)}function bd(w,E){if(E){var k=w.firstChild;if(k&&k===w.lastChild&&k.nodeType===3){k.nodeValue=E;return}}w.textContent=E}var U7=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function L5(w,E,k){var z=E.indexOf("--")===0;k==null||typeof k=="boolean"||k===""?z?w.setProperty(E,""):E==="float"?w.cssFloat="":w[E]="":z?w.setProperty(E,k):typeof k!="number"||k===0||U7.has(E)?E==="float"?w.cssFloat=k:w[E]=(""+k).trim():w[E]=k+"px"}function Kx(w,E,k){if(E!=null&&typeof E!="object")throw Error(n(62));if(w=w.style,k!=null){for(var z in k)!k.hasOwnProperty(z)||E!=null&&E.hasOwnProperty(z)||(z.indexOf("--")===0?w.setProperty(z,""):z==="float"?w.cssFloat="":w[z]="");for(var Z in E)z=E[Z],E.hasOwnProperty(Z)&&k[Z]!==z&&L5(w,Z,z)}else for(var ie in E)E.hasOwnProperty(ie)&&L5(w,ie,E[ie])}function Jx(w){if(w.indexOf("-")===-1)return!1;switch(w){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y7=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),F5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function o1(w){return F5.test(""+w)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":w}var Qx=null;function a1(w){return w=w.target||w.srcElement||window,w.correspondingUseElement&&(w=w.correspondingUseElement),w.nodeType===3?w.parentNode:w}var Dm=null,Gf=null;function z5(w){var E=ln(w);if(E&&(w=E.stateNode)){var k=w[dt]||null;e:switch(w=E.stateNode,E.type){case"input":if(Am(w,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name),E=k.name,k.type==="radio"&&E!=null){for(k=w;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll('input[name="'+ka(""+E)+'"][type="radio"]'),E=0;E<k.length;E++){var z=k[E];if(z!==w&&z.form===w.form){var Z=z[dt]||null;if(!Z)throw Error(n(90));Am(z,Z.value,Z.defaultValue,Z.defaultValue,Z.checked,Z.defaultChecked,Z.type,Z.name)}}for(E=0;E<k.length;E++)z=k[E],z.form===w.form&&Zr(z)}break e;case"textarea":Wx(w,k.value,k.defaultValue);break e;case"select":E=k.value,E!=null&&km(w,!!k.multiple,E,!1)}}}var Nm=!1;function q5(w,E,k){if(Nm)return w(E,k);Nm=!0;try{var z=w(E);return z}finally{if(Nm=!1,(Dm!==null||Gf!==null)&&(DP(),Dm&&(E=Dm,w=Gf,Gf=Dm=null,z5(E),w)))for(E=0;E<w.length;E++)z5(w[E])}}function Om(w,E){var k=w.stateNode;if(k===null)return null;var z=k[dt]||null;if(z===null)return null;k=z[E];e:switch(E){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(w=w.type,z=!(w==="button"||w==="input"||w==="select"||w==="textarea")),w=!z;break e;default:w=!1}if(w)return null;if(k&&typeof k!="function")throw Error(n(231,E,typeof k));return k}var e_=!1;if(ns)try{var l1={};Object.defineProperty(l1,"passive",{get:function(){e_=!0}}),window.addEventListener("test",l1,l1),window.removeEventListener("test",l1,l1)}catch{e_=!1}var ch=null,t_=null,i_=null;function $m(){if(i_)return i_;var w,E=t_,k=E.length,z,Z="value"in ch?ch.value:ch.textContent,ie=Z.length;for(w=0;w<k&&E[w]===Z[w];w++);var _e=k-w;for(z=1;z<=_e&&E[k-z]===Z[ie-z];z++);return i_=Z.slice(w,1<z?1-z:void 0)}function jf(w){var E=w.keyCode;return"charCode"in w?(w=w.charCode,w===0&&E===13&&(w=13)):w=E,w===10&&(w=13),32<=w||w===13?w:0}function n_(){return!0}function s_(){return!1}function ia(w){function E(k,z,Z,ie,_e){this._reactName=k,this._targetInst=Z,this.type=z,this.nativeEvent=ie,this.target=_e,this.currentTarget=null;for(var ke in w)w.hasOwnProperty(ke)&&(k=w[ke],this[ke]=k?k(ie):ie[ke]);return this.isDefaultPrevented=(ie.defaultPrevented!=null?ie.defaultPrevented:ie.returnValue===!1)?n_:s_,this.isPropagationStopped=s_,this}return oe(E.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=n_)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=n_)},persist:function(){},isPersistent:n_}),E}var Bf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(w){return w.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rm=ia(Bf),Lm=oe({},Bf,{view:0,detail:0}),V5=ia(Lm),c1,ew,u1,hc=oe({},Lm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fm,button:0,buttons:0,relatedTarget:function(w){return w.relatedTarget===void 0?w.fromElement===w.srcElement?w.toElement:w.fromElement:w.relatedTarget},movementX:function(w){return"movementX"in w?w.movementX:(w!==u1&&(u1&&w.type==="mousemove"?(c1=w.screenX-u1.screenX,ew=w.screenY-u1.screenY):ew=c1=0,u1=w),c1)},movementY:function(w){return"movementY"in w?w.movementY:ew}}),G5=ia(hc),X7=oe({},hc,{dataTransfer:0}),W7=ia(X7),j5=oe({},Lm,{relatedTarget:0}),r_=ia(j5),na=oe({},Bf,{animationName:0,elapsedTime:0,pseudoElement:0}),Z7=ia(na),K7=oe({},Bf,{clipboardData:function(w){return"clipboardData"in w?w.clipboardData:window.clipboardData}}),J7=ia(K7),Q7=oe({},Bf,{data:0}),B5=ia(Q7),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H5(w){var E=this.nativeEvent;return E.getModifierState?E.getModifierState(w):(w=ik[w])?!!E[w]:!1}function Fm(){return H5}var Hf=oe({},Lm,{key:function(w){if(w.key){var E=ek[w.key]||w.key;if(E!=="Unidentified")return E}return w.type==="keypress"?(w=jf(w),w===13?"Enter":String.fromCharCode(w)):w.type==="keydown"||w.type==="keyup"?tk[w.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fm,charCode:function(w){return w.type==="keypress"?jf(w):0},keyCode:function(w){return w.type==="keydown"||w.type==="keyup"?w.keyCode:0},which:function(w){return w.type==="keypress"?jf(w):w.type==="keydown"||w.type==="keyup"?w.keyCode:0}}),o_=ia(Hf),nk=oe({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tw=ia(nk),U5=oe({},Lm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fm}),Y5=ia(U5),h1=oe({},Bf,{propertyName:0,elapsedTime:0,pseudoElement:0}),sk=ia(h1),rk=oe({},hc,{deltaX:function(w){return"deltaX"in w?w.deltaX:"wheelDeltaX"in w?-w.wheelDeltaX:0},deltaY:function(w){return"deltaY"in w?w.deltaY:"wheelDeltaY"in w?-w.wheelDeltaY:"wheelDelta"in w?-w.wheelDelta:0},deltaZ:0,deltaMode:0}),ok=ia(rk),ak=oe({},Bf,{newState:0,oldState:0}),lk=ia(ak),ck=[9,13,27,32],d1=ns&&"CompositionEvent"in window,f1=null;ns&&"documentMode"in document&&(f1=document.documentMode);var a_=ns&&"TextEvent"in window&&!f1,X5=ns&&(!d1||f1&&8<f1&&11>=f1),l_=" ",W5=!1;function Z5(w,E){switch(w){case"keyup":return ck.indexOf(E.keyCode)!==-1;case"keydown":return E.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iw(w){return w=w.detail,typeof w=="object"&&"data"in w?w.data:null}var Qc=!1;function xd(w,E){switch(w){case"compositionend":return iw(E);case"keypress":return E.which!==32?null:(W5=!0,l_);case"textInput":return w=E.data,w===l_&&W5?null:w;default:return null}}function K5(w,E){if(Qc)return w==="compositionend"||!d1&&Z5(w,E)?(w=$m(),i_=t_=ch=null,Qc=!1,w):null;switch(w){case"paste":return null;case"keypress":if(!(E.ctrlKey||E.altKey||E.metaKey)||E.ctrlKey&&E.altKey){if(E.char&&1<E.char.length)return E.char;if(E.which)return String.fromCharCode(E.which)}return null;case"compositionend":return X5&&E.locale!=="ko"?null:E.data;default:return null}}var nw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J5(w){var E=w&&w.nodeName&&w.nodeName.toLowerCase();return E==="input"?!!nw[w.type]:E==="textarea"}function Q5(w,E,k,z){Dm?Gf?Gf.push(z):Gf=[z]:Dm=z,E=LP(E,"onChange"),0<E.length&&(k=new Rm("onChange","change",null,k,z),w.push({event:k,listeners:E}))}var p1=null,m1=null;function uk(w){WU(w,0)}function c_(w){var E=Oi(w);if(Zr(E))return w}function eP(w,E){if(w==="change")return E}var tP=!1;if(ns){var sw;if(ns){var rw="oninput"in document;if(!rw){var X=document.createElement("div");X.setAttribute("oninput","return;"),rw=typeof X.oninput=="function"}sw=rw}else sw=!1;tP=sw&&(!document.documentMode||9<document.documentMode)}function H(){p1&&(p1.detachEvent("onpropertychange",te),m1=p1=null)}function te(w){if(w.propertyName==="value"&&c_(m1)){var E=[];Q5(E,m1,w,a1(w)),q5(uk,E)}}function le(w,E,k){w==="focusin"?(H(),p1=E,m1=k,p1.attachEvent("onpropertychange",te)):w==="focusout"&&H()}function he(w){if(w==="selectionchange"||w==="keyup"||w==="keydown")return c_(m1)}function be(w,E){if(w==="click")return c_(E)}function Te(w,E){if(w==="input"||w==="change")return c_(E)}function Ae(w,E){return w===E&&(w!==0||1/w===1/E)||w!==w&&E!==E}var Oe=typeof Object.is=="function"?Object.is:Ae;function je(w,E){if(Oe(w,E))return!0;if(typeof w!="object"||w===null||typeof E!="object"||E===null)return!1;var k=Object.keys(w),z=Object.keys(E);if(k.length!==z.length)return!1;for(z=0;z<k.length;z++){var Z=k[z];if(!Ir.call(E,Z)||!Oe(w[Z],E[Z]))return!1}return!0}function Le(w){for(;w&&w.firstChild;)w=w.firstChild;return w}function Ke(w,E){var k=Le(w);w=0;for(var z;k;){if(k.nodeType===3){if(z=w+k.textContent.length,w<=E&&z>=E)return{node:k,offset:E-w};w=z}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=Le(k)}}function ft(w,E){return w&&E?w===E?!0:w&&w.nodeType===3?!1:E&&E.nodeType===3?ft(w,E.parentNode):"contains"in w?w.contains(E):w.compareDocumentPosition?!!(w.compareDocumentPosition(E)&16):!1:!1}function kt(w){w=w!=null&&w.ownerDocument!=null&&w.ownerDocument.defaultView!=null?w.ownerDocument.defaultView:window;for(var E=qf(w.document);E instanceof w.HTMLIFrameElement;){try{var k=typeof E.contentWindow.location.href=="string"}catch{k=!1}if(k)w=E.contentWindow;else break;E=qf(w.document)}return E}function It(w){var E=w&&w.nodeName&&w.nodeName.toLowerCase();return E&&(E==="input"&&(w.type==="text"||w.type==="search"||w.type==="tel"||w.type==="url"||w.type==="password")||E==="textarea"||w.contentEditable==="true")}function Lt(w,E){var k=kt(E);E=w.focusedElem;var z=w.selectionRange;if(k!==E&&E&&E.ownerDocument&&ft(E.ownerDocument.documentElement,E)){if(z!==null&&It(E)){if(w=z.start,k=z.end,k===void 0&&(k=w),"selectionStart"in E)E.selectionStart=w,E.selectionEnd=Math.min(k,E.value.length);else if(k=(w=E.ownerDocument||document)&&w.defaultView||window,k.getSelection){k=k.getSelection();var Z=E.textContent.length,ie=Math.min(z.start,Z);z=z.end===void 0?ie:Math.min(z.end,Z),!k.extend&&ie>z&&(Z=z,z=ie,ie=Z),Z=Ke(E,ie);var _e=Ke(E,z);Z&&_e&&(k.rangeCount!==1||k.anchorNode!==Z.node||k.anchorOffset!==Z.offset||k.focusNode!==_e.node||k.focusOffset!==_e.offset)&&(w=w.createRange(),w.setStart(Z.node,Z.offset),k.removeAllRanges(),ie>z?(k.addRange(w),k.extend(_e.node,_e.offset)):(w.setEnd(_e.node,_e.offset),k.addRange(w)))}}for(w=[],k=E;k=k.parentNode;)k.nodeType===1&&w.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<w.length;E++)k=w[E],k.element.scrollLeft=k.left,k.element.scrollTop=k.top}}var Xt=ns&&"documentMode"in document&&11>=document.documentMode,Gt=null,ai=null,Ii=null,en=!1;function Si(w,E,k){var z=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;en||Gt==null||Gt!==qf(z)||(z=Gt,"selectionStart"in z&&It(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),Ii&&je(Ii,z)||(Ii=z,z=LP(ai,"onSelect"),0<z.length&&(E=new Rm("onSelect","select",null,E,k),w.push({event:E,listeners:z}),E.target=Gt)))}function Pi(w,E){var k={};return k[w.toLowerCase()]=E.toLowerCase(),k["Webkit"+w]="webkit"+E,k["Moz"+w]="moz"+E,k}var Mr={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionrun:Pi("Transition","TransitionRun"),transitionstart:Pi("Transition","TransitionStart"),transitioncancel:Pi("Transition","TransitionCancel"),transitionend:Pi("Transition","TransitionEnd")},ys={},Da={};ns&&(Da=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function po(w){if(ys[w])return ys[w];if(!Mr[w])return w;var E=Mr[w],k;for(k in E)if(E.hasOwnProperty(k)&&k in Da)return ys[w]=E[k];return w}var eu=po("animationend"),g1=po("animationiteration"),zm=po("animationstart"),Bve=po("transitionrun"),Hve=po("transitionstart"),Uve=po("transitioncancel"),FB=po("transitionend"),zB=new Map,qB="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function uh(w,E){zB.set(w,E),tr(E,[w])}var tu=[],u_=0,hk=0;function iP(){for(var w=u_,E=hk=u_=0;E<w;){var k=tu[E];tu[E++]=null;var z=tu[E];tu[E++]=null;var Z=tu[E];tu[E++]=null;var ie=tu[E];if(tu[E++]=null,z!==null&&Z!==null){var _e=z.pending;_e===null?Z.next=Z:(Z.next=_e.next,_e.next=Z),z.pending=Z}ie!==0&&VB(k,Z,ie)}}function nP(w,E,k,z){tu[u_++]=w,tu[u_++]=E,tu[u_++]=k,tu[u_++]=z,hk|=z,w.lanes|=z,w=w.alternate,w!==null&&(w.lanes|=z)}function dk(w,E,k,z){return nP(w,E,k,z),sP(w)}function qm(w,E){return nP(w,null,null,E),sP(w)}function VB(w,E,k){w.lanes|=k;var z=w.alternate;z!==null&&(z.lanes|=k);for(var Z=!1,ie=w.return;ie!==null;)ie.childLanes|=k,z=ie.alternate,z!==null&&(z.childLanes|=k),ie.tag===22&&(w=ie.stateNode,w===null||w._visibility&1||(Z=!0)),w=ie,ie=ie.return;Z&&E!==null&&w.tag===3&&(ie=w.stateNode,Z=31-u(k),ie=ie.hiddenUpdates,w=ie[Z],w===null?ie[Z]=[E]:w.push(E),E.lane=k|536870912)}function sP(w){if(50<Aw)throw Aw=0,vD=null,Error(n(185));for(var E=w.return;E!==null;)w=E,E=w.return;return w.tag===3?w.stateNode:null}var h_={},GB=new WeakMap;function iu(w,E){if(typeof w=="object"&&w!==null){var k=GB.get(w);return k!==void 0?k:(E={value:w,source:E,stack:Pe(E)},GB.set(w,E),E)}return{value:w,source:E,stack:Pe(E)}}var d_=[],f_=0,rP=null,oP=0,nu=[],su=0,y1=null,Uf=1,Yf="";function v1(w,E){d_[f_++]=oP,d_[f_++]=rP,rP=w,oP=E}function jB(w,E,k){nu[su++]=Uf,nu[su++]=Yf,nu[su++]=y1,y1=w;var z=Uf;w=Yf;var Z=32-u(z)-1;z&=~(1<<Z),k+=1;var ie=32-u(E)+Z;if(30<ie){var _e=Z-Z%5;ie=(z&(1<<_e)-1).toString(32),z>>=_e,Z-=_e,Uf=1<<32-u(E)+Z|k<<Z|z,Yf=ie+w}else Uf=1<<ie|k<<Z|z,Yf=w}function fk(w){w.return!==null&&(v1(w,1),jB(w,1,0))}function pk(w){for(;w===rP;)rP=d_[--f_],d_[f_]=null,oP=d_[--f_],d_[f_]=null;for(;w===y1;)y1=nu[--su],nu[su]=null,Yf=nu[--su],nu[su]=null,Uf=nu[--su],nu[su]=null}var al=null,sa=null,Ln=!1,hh=null,wd=!1,mk=Error(n(519));function _1(w){var E=Error(n(418,""));throw lw(iu(E,w)),mk}function BB(w){var E=w.stateNode,k=w.type,z=w.memoizedProps;switch(E[et]=w,E[dt]=z,k){case"dialog":wn("cancel",E),wn("close",E);break;case"iframe":case"object":case"embed":wn("load",E);break;case"video":case"audio":for(k=0;k<Dw.length;k++)wn(Dw[k],E);break;case"source":wn("error",E);break;case"img":case"image":case"link":wn("error",E),wn("load",E);break;case"details":wn("toggle",E);break;case"input":wn("invalid",E),lh(E,z.value,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name,!0),Os(E);break;case"select":wn("invalid",E);break;case"textarea":wn("invalid",E),Zx(E,z.value,z.defaultValue,z.children),Os(E)}k=z.children,typeof k!="string"&&typeof k!="number"&&typeof k!="bigint"||E.textContent===""+k||z.suppressHydrationWarning===!0||QU(E.textContent,k)?(z.popover!=null&&(wn("beforetoggle",E),wn("toggle",E)),z.onScroll!=null&&wn("scroll",E),z.onScrollEnd!=null&&wn("scrollend",E),z.onClick!=null&&(E.onclick=FP),E=!0):E=!1,E||_1(w)}function HB(w){for(al=w.return;al;)switch(al.tag){case 3:case 27:wd=!0;return;case 5:case 13:wd=!1;return;default:al=al.return}}function ow(w){if(w!==al)return!1;if(!Ln)return HB(w),Ln=!0,!1;var E=!1,k;if((k=w.tag!==3&&w.tag!==27)&&((k=w.tag===5)&&(k=w.type,k=!(k!=="form"&&k!=="button")||$D(w.type,w.memoizedProps)),k=!k),k&&(E=!0),E&&sa&&_1(w),HB(w),w.tag===13){if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));e:{for(w=w.nextSibling,E=0;w;){if(w.nodeType===8)if(k=w.data,k==="/$"){if(E===0){sa=fh(w.nextSibling);break e}E--}else k!=="$"&&k!=="$!"&&k!=="$?"||E++;w=w.nextSibling}sa=null}}else sa=al?fh(w.stateNode.nextSibling):null;return!0}function aw(){sa=al=null,Ln=!1}function lw(w){hh===null?hh=[w]:hh.push(w)}var cw=Error(n(460)),UB=Error(n(474)),gk={then:function(){}};function YB(w){return w=w.status,w==="fulfilled"||w==="rejected"}function aP(){}function XB(w,E,k){switch(k=w[k],k===void 0?w.push(E):k!==E&&(E.then(aP,aP),E=k),E.status){case"fulfilled":return E.value;case"rejected":throw w=E.reason,w===cw?Error(n(483)):w;default:if(typeof E.status=="string")E.then(aP,aP);else{if(w=$s,w!==null&&100<w.shellSuspendCounter)throw Error(n(482));w=E,w.status="pending",w.then(function(z){if(E.status==="pending"){var Z=E;Z.status="fulfilled",Z.value=z}},function(z){if(E.status==="pending"){var Z=E;Z.status="rejected",Z.reason=z}})}switch(E.status){case"fulfilled":return E.value;case"rejected":throw w=E.reason,w===cw?Error(n(483)):w}throw uw=E,cw}}var uw=null;function WB(){if(uw===null)throw Error(n(459));var w=uw;return uw=null,w}var p_=null,hw=0;function lP(w){var E=hw;return hw+=1,p_===null&&(p_=[]),XB(p_,w,E)}function dw(w,E){E=E.props.ref,w.ref=E!==void 0?E:null}function cP(w,E){throw E.$$typeof===r?Error(n(525)):(w=Object.prototype.toString.call(E),Error(n(31,w==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":w)))}function ZB(w){var E=w._init;return E(w._payload)}function KB(w){function E(tt,Ye){if(w){var nt=tt.deletions;nt===null?(tt.deletions=[Ye],tt.flags|=16):nt.push(Ye)}}function k(tt,Ye){if(!w)return null;for(;Ye!==null;)E(tt,Ye),Ye=Ye.sibling;return null}function z(tt){for(var Ye=new Map;tt!==null;)tt.key!==null?Ye.set(tt.key,tt):Ye.set(tt.index,tt),tt=tt.sibling;return Ye}function Z(tt,Ye){return tt=Jm(tt,Ye),tt.index=0,tt.sibling=null,tt}function ie(tt,Ye,nt){return tt.index=nt,w?(nt=tt.alternate,nt!==null?(nt=nt.index,nt<Ye?(tt.flags|=33554434,Ye):nt):(tt.flags|=33554434,Ye)):(tt.flags|=1048576,Ye)}function _e(tt){return w&&tt.alternate===null&&(tt.flags|=33554434),tt}function ke(tt,Ye,nt,Ct){return Ye===null||Ye.tag!==6?(Ye=uD(nt,tt.mode,Ct),Ye.return=tt,Ye):(Ye=Z(Ye,nt),Ye.return=tt,Ye)}function qe(tt,Ye,nt,Ct){var ti=nt.type;return ti===c?yt(tt,Ye,nt.props.children,Ct,nt.key):Ye!==null&&(Ye.elementType===ti||typeof ti=="object"&&ti!==null&&ti.$$typeof===F&&ZB(ti)===Ye.type)?(Ye=Z(Ye,nt.props),dw(Ye,nt),Ye.return=tt,Ye):(Ye=TP(nt.type,nt.key,nt.props,null,tt.mode,Ct),dw(Ye,nt),Ye.return=tt,Ye)}function We(tt,Ye,nt,Ct){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==nt.containerInfo||Ye.stateNode.implementation!==nt.implementation?(Ye=hD(nt,tt.mode,Ct),Ye.return=tt,Ye):(Ye=Z(Ye,nt.children||[]),Ye.return=tt,Ye)}function yt(tt,Ye,nt,Ct,ti){return Ye===null||Ye.tag!==7?(Ye=M1(nt,tt.mode,Ct,ti),Ye.return=tt,Ye):(Ye=Z(Ye,nt),Ye.return=tt,Ye)}function At(tt,Ye,nt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=uD(""+Ye,tt.mode,nt),Ye.return=tt,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case o:return nt=TP(Ye.type,Ye.key,Ye.props,null,tt.mode,nt),dw(nt,Ye),nt.return=tt,nt;case l:return Ye=hD(Ye,tt.mode,nt),Ye.return=tt,Ye;case F:var Ct=Ye._init;return Ye=Ct(Ye._payload),At(tt,Ye,nt)}if(_t(Ye)||W(Ye))return Ye=M1(Ye,tt.mode,nt,null),Ye.return=tt,Ye;if(typeof Ye.then=="function")return At(tt,lP(Ye),nt);if(Ye.$$typeof===S)return At(tt,EP(tt,Ye),nt);cP(tt,Ye)}return null}function at(tt,Ye,nt,Ct){var ti=Ye!==null?Ye.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return ti!==null?null:ke(tt,Ye,""+nt,Ct);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case o:return nt.key===ti?qe(tt,Ye,nt,Ct):null;case l:return nt.key===ti?We(tt,Ye,nt,Ct):null;case F:return ti=nt._init,nt=ti(nt._payload),at(tt,Ye,nt,Ct)}if(_t(nt)||W(nt))return ti!==null?null:yt(tt,Ye,nt,Ct,null);if(typeof nt.then=="function")return at(tt,Ye,lP(nt),Ct);if(nt.$$typeof===S)return at(tt,Ye,EP(tt,nt),Ct);cP(tt,nt)}return null}function gt(tt,Ye,nt,Ct,ti){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return tt=tt.get(nt)||null,ke(Ye,tt,""+Ct,ti);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case o:return tt=tt.get(Ct.key===null?nt:Ct.key)||null,qe(Ye,tt,Ct,ti);case l:return tt=tt.get(Ct.key===null?nt:Ct.key)||null,We(Ye,tt,Ct,ti);case F:var cn=Ct._init;return Ct=cn(Ct._payload),gt(tt,Ye,nt,Ct,ti)}if(_t(Ct)||W(Ct))return tt=tt.get(nt)||null,yt(Ye,tt,Ct,ti,null);if(typeof Ct.then=="function")return gt(tt,Ye,nt,lP(Ct),ti);if(Ct.$$typeof===S)return gt(tt,Ye,nt,EP(Ye,Ct),ti);cP(Ye,Ct)}return null}function di(tt,Ye,nt,Ct){for(var ti=null,cn=null,yi=Ye,Ci=Ye=0,Do=null;yi!==null&&Ci<nt.length;Ci++){yi.index>Ci?(Do=yi,yi=null):Do=yi.sibling;var Fn=at(tt,yi,nt[Ci],Ct);if(Fn===null){yi===null&&(yi=Do);break}w&&yi&&Fn.alternate===null&&E(tt,yi),Ye=ie(Fn,Ye,Ci),cn===null?ti=Fn:cn.sibling=Fn,cn=Fn,yi=Do}if(Ci===nt.length)return k(tt,yi),Ln&&v1(tt,Ci),ti;if(yi===null){for(;Ci<nt.length;Ci++)yi=At(tt,nt[Ci],Ct),yi!==null&&(Ye=ie(yi,Ye,Ci),cn===null?ti=yi:cn.sibling=yi,cn=yi);return Ln&&v1(tt,Ci),ti}for(yi=z(yi);Ci<nt.length;Ci++)Do=gt(yi,tt,Ci,nt[Ci],Ct),Do!==null&&(w&&Do.alternate!==null&&yi.delete(Do.key===null?Ci:Do.key),Ye=ie(Do,Ye,Ci),cn===null?ti=Do:cn.sibling=Do,cn=Do);return w&&yi.forEach(function(rg){return E(tt,rg)}),Ln&&v1(tt,Ci),ti}function Bi(tt,Ye,nt,Ct){if(nt==null)throw Error(n(151));for(var ti=null,cn=null,yi=Ye,Ci=Ye=0,Do=null,Fn=nt.next();yi!==null&&!Fn.done;Ci++,Fn=nt.next()){yi.index>Ci?(Do=yi,yi=null):Do=yi.sibling;var rg=at(tt,yi,Fn.value,Ct);if(rg===null){yi===null&&(yi=Do);break}w&&yi&&rg.alternate===null&&E(tt,yi),Ye=ie(rg,Ye,Ci),cn===null?ti=rg:cn.sibling=rg,cn=rg,yi=Do}if(Fn.done)return k(tt,yi),Ln&&v1(tt,Ci),ti;if(yi===null){for(;!Fn.done;Ci++,Fn=nt.next())Fn=At(tt,Fn.value,Ct),Fn!==null&&(Ye=ie(Fn,Ye,Ci),cn===null?ti=Fn:cn.sibling=Fn,cn=Fn);return Ln&&v1(tt,Ci),ti}for(yi=z(yi);!Fn.done;Ci++,Fn=nt.next())Fn=gt(yi,tt,Ci,Fn.value,Ct),Fn!==null&&(w&&Fn.alternate!==null&&yi.delete(Fn.key===null?Ci:Fn.key),Ye=ie(Fn,Ye,Ci),cn===null?ti=Fn:cn.sibling=Fn,cn=Fn);return w&&yi.forEach(function(obe){return E(tt,obe)}),Ln&&v1(tt,Ci),ti}function Dr(tt,Ye,nt,Ct){if(typeof nt=="object"&&nt!==null&&nt.type===c&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case o:e:{for(var ti=nt.key;Ye!==null;){if(Ye.key===ti){if(ti=nt.type,ti===c){if(Ye.tag===7){k(tt,Ye.sibling),Ct=Z(Ye,nt.props.children),Ct.return=tt,tt=Ct;break e}}else if(Ye.elementType===ti||typeof ti=="object"&&ti!==null&&ti.$$typeof===F&&ZB(ti)===Ye.type){k(tt,Ye.sibling),Ct=Z(Ye,nt.props),dw(Ct,nt),Ct.return=tt,tt=Ct;break e}k(tt,Ye);break}else E(tt,Ye);Ye=Ye.sibling}nt.type===c?(Ct=M1(nt.props.children,tt.mode,Ct,nt.key),Ct.return=tt,tt=Ct):(Ct=TP(nt.type,nt.key,nt.props,null,tt.mode,Ct),dw(Ct,nt),Ct.return=tt,tt=Ct)}return _e(tt);case l:e:{for(ti=nt.key;Ye!==null;){if(Ye.key===ti)if(Ye.tag===4&&Ye.stateNode.containerInfo===nt.containerInfo&&Ye.stateNode.implementation===nt.implementation){k(tt,Ye.sibling),Ct=Z(Ye,nt.children||[]),Ct.return=tt,tt=Ct;break e}else{k(tt,Ye);break}else E(tt,Ye);Ye=Ye.sibling}Ct=hD(nt,tt.mode,Ct),Ct.return=tt,tt=Ct}return _e(tt);case F:return ti=nt._init,nt=ti(nt._payload),Dr(tt,Ye,nt,Ct)}if(_t(nt))return di(tt,Ye,nt,Ct);if(W(nt)){if(ti=W(nt),typeof ti!="function")throw Error(n(150));return nt=ti.call(nt),Bi(tt,Ye,nt,Ct)}if(typeof nt.then=="function")return Dr(tt,Ye,lP(nt),Ct);if(nt.$$typeof===S)return Dr(tt,Ye,EP(tt,nt),Ct);cP(tt,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,Ye!==null&&Ye.tag===6?(k(tt,Ye.sibling),Ct=Z(Ye,nt),Ct.return=tt,tt=Ct):(k(tt,Ye),Ct=uD(nt,tt.mode,Ct),Ct.return=tt,tt=Ct),_e(tt)):k(tt,Ye)}return function(tt,Ye,nt,Ct){try{hw=0;var ti=Dr(tt,Ye,nt,Ct);return p_=null,ti}catch(yi){if(yi===cw)throw yi;var cn=lu(29,yi,null,tt.mode);return cn.lanes=Ct,cn.return=tt,cn}finally{}}}var b1=KB(!0),JB=KB(!1),m_=Ft(null),uP=Ft(0);function QB(w,E){w=sp,Wi(uP,w),Wi(m_,E),sp=w|E.baseLanes}function yk(){Wi(uP,sp),Wi(m_,m_.current)}function vk(){sp=uP.current,Nt(m_),Nt(uP)}var ru=Ft(null),Sd=null;function Vm(w){var E=w.alternate;Wi(mo,mo.current&1),Wi(ru,w),Sd===null&&(E===null||m_.current!==null||E.memoizedState!==null)&&(Sd=w)}function eH(w){if(w.tag===22){if(Wi(mo,mo.current),Wi(ru,w),Sd===null){var E=w.alternate;E!==null&&E.memoizedState!==null&&(Sd=w)}}else Gm()}function Gm(){Wi(mo,mo.current),Wi(ru,ru.current)}function Xf(w){Nt(ru),Sd===w&&(Sd=null),Nt(mo)}var mo=Ft(0);function hP(w){for(var E=w;E!==null;){if(E.tag===13){var k=E.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if((E.flags&128)!==0)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===w)break;for(;E.sibling===null;){if(E.return===null||E.return===w)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var Yve=typeof AbortController<"u"?AbortController:function(){var w=[],E=this.signal={aborted:!1,addEventListener:function(k,z){w.push(z)}};this.abort=function(){E.aborted=!0,w.forEach(function(k){return k()})}},Xve=t.unstable_scheduleCallback,Wve=t.unstable_NormalPriority,go={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _k(){return{controller:new Yve,data:new Map,refCount:0}}function fw(w){w.refCount--,w.refCount===0&&Xve(Wve,function(){w.controller.abort()})}var pw=null,bk=0,g_=0,y_=null;function Zve(w,E){if(pw===null){var k=pw=[];bk=0,g_=PD(),y_={status:"pending",value:void 0,then:function(z){k.push(z)}}}return bk++,E.then(tH,tH),E}function tH(){if(--bk===0&&pw!==null){y_!==null&&(y_.status="fulfilled");var w=pw;pw=null,g_=0,y_=null;for(var E=0;E<w.length;E++)(0,w[E])()}}function Kve(w,E){var k=[],z={status:"pending",value:null,reason:null,then:function(Z){k.push(Z)}};return w.then(function(){z.status="fulfilled",z.value=E;for(var Z=0;Z<k.length;Z++)(0,k[Z])(E)},function(Z){for(z.status="rejected",z.reason=Z,Z=0;Z<k.length;Z++)(0,k[Z])(void 0)}),z}var iH=ne.S;ne.S=function(w,E){typeof E=="object"&&E!==null&&typeof E.then=="function"&&Zve(w,E),iH!==null&&iH(w,E)};var x1=Ft(null);function xk(){var w=x1.current;return w!==null?w:$s.pooledCache}function dP(w,E){E===null?Wi(x1,x1.current):Wi(x1,E.pool)}function nH(){var w=xk();return w===null?null:{parent:go._currentValue,pool:w}}var jm=0,on=null,vs=null,Kr=null,fP=!1,v_=!1,w1=!1,pP=0,mw=0,__=null,Jve=0;function qr(){throw Error(n(321))}function wk(w,E){if(E===null)return!1;for(var k=0;k<E.length&&k<w.length;k++)if(!Oe(w[k],E[k]))return!1;return!0}function Sk(w,E,k,z,Z,ie){return jm=ie,on=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,ne.H=w===null||w.memoizedState===null?S1:Bm,w1=!1,ie=k(z,Z),w1=!1,v_&&(ie=rH(E,k,z,Z)),sH(w),ie}function sH(w){ne.H=Ed;var E=vs!==null&&vs.next!==null;if(jm=0,Kr=vs=on=null,fP=!1,mw=0,__=null,E)throw Error(n(300));w===null||Ao||(w=w.dependencies,w!==null&&SP(w)&&(Ao=!0))}function rH(w,E,k,z){on=w;var Z=0;do{if(v_&&(__=null),mw=0,v_=!1,25<=Z)throw Error(n(301));if(Z+=1,Kr=vs=null,w.updateQueue!=null){var ie=w.updateQueue;ie.lastEffect=null,ie.events=null,ie.stores=null,ie.memoCache!=null&&(ie.memoCache.index=0)}ne.H=E1,ie=E(k,z)}while(v_);return ie}function Qve(){var w=ne.H,E=w.useState()[0];return E=typeof E.then=="function"?gw(E):E,w=w.useState()[0],(vs!==null?vs.memoizedState:null)!==w&&(on.flags|=1024),E}function Ek(){var w=pP!==0;return pP=0,w}function Ck(w,E,k){E.updateQueue=w.updateQueue,E.flags&=-2053,w.lanes&=~k}function Pk(w){if(fP){for(w=w.memoizedState;w!==null;){var E=w.queue;E!==null&&(E.pending=null),w=w.next}fP=!1}jm=0,Kr=vs=on=null,v_=!1,mw=pP=0,__=null}function Fl(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?on.memoizedState=Kr=w:Kr=Kr.next=w,Kr}function Jr(){if(vs===null){var w=on.alternate;w=w!==null?w.memoizedState:null}else w=vs.next;var E=Kr===null?on.memoizedState:Kr.next;if(E!==null)Kr=E,vs=w;else{if(w===null)throw on.alternate===null?Error(n(467)):Error(n(310));vs=w,w={memoizedState:vs.memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},Kr===null?on.memoizedState=Kr=w:Kr=Kr.next=w}return Kr}var mP;mP=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function gw(w){var E=mw;return mw+=1,__===null&&(__=[]),w=XB(__,w,E),E=on,(Kr===null?E.memoizedState:Kr.next)===null&&(E=E.alternate,ne.H=E===null||E.memoizedState===null?S1:Bm),w}function gP(w){if(w!==null&&typeof w=="object"){if(typeof w.then=="function")return gw(w);if(w.$$typeof===S)return Na(w)}throw Error(n(438,String(w)))}function Tk(w){var E=null,k=on.updateQueue;if(k!==null&&(E=k.memoCache),E==null){var z=on.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(E={data:z.data.map(function(Z){return Z.slice()}),index:0})))}if(E==null&&(E={data:[],index:0}),k===null&&(k=mP(),on.updateQueue=k),k.memoCache=E,k=E.data[E.index],k===void 0)for(k=E.data[E.index]=Array(w),z=0;z<w;z++)k[z]=V;return E.index++,k}function Wf(w,E){return typeof E=="function"?E(w):E}function yP(w){var E=Jr();return Ik(E,vs,w)}function Ik(w,E,k){var z=w.queue;if(z===null)throw Error(n(311));z.lastRenderedReducer=k;var Z=w.baseQueue,ie=z.pending;if(ie!==null){if(Z!==null){var _e=Z.next;Z.next=ie.next,ie.next=_e}E.baseQueue=Z=ie,z.pending=null}if(ie=w.baseState,Z===null)w.memoizedState=ie;else{E=Z.next;var ke=_e=null,qe=null,We=E,yt=!1;do{var At=We.lane&-536870913;if(At!==We.lane?(Mn&At)===At:(jm&At)===At){var at=We.revertLane;if(at===0)qe!==null&&(qe=qe.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),At===g_&&(yt=!0);else if((jm&at)===at){We=We.next,at===g_&&(yt=!0);continue}else At={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},qe===null?(ke=qe=At,_e=ie):qe=qe.next=At,on.lanes|=at,Qm|=at;At=We.action,w1&&k(ie,At),ie=We.hasEagerState?We.eagerState:k(ie,At)}else at={lane:At,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},qe===null?(ke=qe=at,_e=ie):qe=qe.next=at,on.lanes|=At,Qm|=At;We=We.next}while(We!==null&&We!==E);if(qe===null?_e=ie:qe.next=ke,!Oe(ie,w.memoizedState)&&(Ao=!0,yt&&(k=y_,k!==null)))throw k;w.memoizedState=ie,w.baseState=_e,w.baseQueue=qe,z.lastRenderedState=ie}return Z===null&&(z.lanes=0),[w.memoizedState,z.dispatch]}function Mk(w){var E=Jr(),k=E.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=w;var z=k.dispatch,Z=k.pending,ie=E.memoizedState;if(Z!==null){k.pending=null;var _e=Z=Z.next;do ie=w(ie,_e.action),_e=_e.next;while(_e!==Z);Oe(ie,E.memoizedState)||(Ao=!0),E.memoizedState=ie,E.baseQueue===null&&(E.baseState=ie),k.lastRenderedState=ie}return[ie,z]}function oH(w,E,k){var z=on,Z=Jr(),ie=Ln;if(ie){if(k===void 0)throw Error(n(407));k=k()}else k=E();var _e=!Oe((vs||Z).memoizedState,k);if(_e&&(Z.memoizedState=k,Ao=!0),Z=Z.queue,Dk(cH.bind(null,z,Z,w),[w]),Z.getSnapshot!==E||_e||Kr!==null&&Kr.memoizedState.tag&1){if(z.flags|=2048,b_(9,lH.bind(null,z,Z,k,E),{destroy:void 0},null),$s===null)throw Error(n(349));ie||(jm&60)!==0||aH(z,E,k)}return k}function aH(w,E,k){w.flags|=16384,w={getSnapshot:E,value:k},E=on.updateQueue,E===null?(E=mP(),on.updateQueue=E,E.stores=[w]):(k=E.stores,k===null?E.stores=[w]:k.push(w))}function lH(w,E,k,z){E.value=k,E.getSnapshot=z,uH(E)&&hH(w)}function cH(w,E,k){return k(function(){uH(E)&&hH(w)})}function uH(w){var E=w.getSnapshot;w=w.value;try{var k=E();return!Oe(w,k)}catch{return!0}}function hH(w){var E=qm(w,2);E!==null&&ll(E,w,2)}function Ak(w){var E=Fl();if(typeof w=="function"){var k=w;if(w=k(),w1){a(!0);try{k()}finally{a(!1)}}}return E.memoizedState=E.baseState=w,E.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:w},E}function dH(w,E,k,z){return w.baseState=k,Ik(w,vs,typeof z=="function"?z:Wf)}function e_e(w,E,k,z,Z){if(bP(w))throw Error(n(485));if(w=E.action,w!==null){var ie={payload:Z,action:w,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_e){ie.listeners.push(_e)}};ne.T!==null?k(!0):ie.isTransition=!1,z(ie),k=E.pending,k===null?(ie.next=E.pending=ie,fH(E,ie)):(ie.next=k.next,E.pending=k.next=ie)}}function fH(w,E){var k=E.action,z=E.payload,Z=w.state;if(E.isTransition){var ie=ne.T,_e={};ne.T=_e;try{var ke=k(Z,z),qe=ne.S;qe!==null&&qe(_e,ke),pH(w,E,ke)}catch(We){kk(w,E,We)}finally{ne.T=ie}}else try{ie=k(Z,z),pH(w,E,ie)}catch(We){kk(w,E,We)}}function pH(w,E,k){k!==null&&typeof k=="object"&&typeof k.then=="function"?k.then(function(z){mH(w,E,z)},function(z){return kk(w,E,z)}):mH(w,E,k)}function mH(w,E,k){E.status="fulfilled",E.value=k,gH(E),w.state=k,E=w.pending,E!==null&&(k=E.next,k===E?w.pending=null:(k=k.next,E.next=k,fH(w,k)))}function kk(w,E,k){var z=w.pending;if(w.pending=null,z!==null){z=z.next;do E.status="rejected",E.reason=k,gH(E),E=E.next;while(E!==z)}w.action=null}function gH(w){w=w.listeners;for(var E=0;E<w.length;E++)(0,w[E])()}function yH(w,E){return E}function vH(w,E){if(Ln){var k=$s.formState;if(k!==null){e:{var z=on;if(Ln){if(sa){t:{for(var Z=sa,ie=wd;Z.nodeType!==8;){if(!ie){Z=null;break t}if(Z=fh(Z.nextSibling),Z===null){Z=null;break t}}ie=Z.data,Z=ie==="F!"||ie==="F"?Z:null}if(Z){sa=fh(Z.nextSibling),z=Z.data==="F!";break e}}_1(z)}z=!1}z&&(E=k[0])}}return k=Fl(),k.memoizedState=k.baseState=E,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yH,lastRenderedState:E},k.queue=z,k=RH.bind(null,on,z),z.dispatch=k,z=Ak(!1),ie=Lk.bind(null,on,!1,z.queue),z=Fl(),Z={state:E,dispatch:null,action:w,pending:null},z.queue=Z,k=e_e.bind(null,on,Z,ie,k),Z.dispatch=k,z.memoizedState=w,[E,k,!1]}function _H(w){var E=Jr();return bH(E,vs,w)}function bH(w,E,k){E=Ik(w,E,yH)[0],w=yP(Wf)[0],E=typeof E=="object"&&E!==null&&typeof E.then=="function"?gw(E):E;var z=Jr(),Z=z.queue,ie=Z.dispatch;return k!==z.memoizedState&&(on.flags|=2048,b_(9,t_e.bind(null,Z,k),{destroy:void 0},null)),[E,ie,w]}function t_e(w,E){w.action=E}function xH(w){var E=Jr(),k=vs;if(k!==null)return bH(E,k,w);Jr(),E=E.memoizedState,k=Jr();var z=k.queue.dispatch;return k.memoizedState=w,[E,z,!1]}function b_(w,E,k,z){return w={tag:w,create:E,inst:k,deps:z,next:null},E=on.updateQueue,E===null&&(E=mP(),on.updateQueue=E),k=E.lastEffect,k===null?E.lastEffect=w.next=w:(z=k.next,k.next=w,w.next=z,E.lastEffect=w),w}function wH(){return Jr().memoizedState}function vP(w,E,k,z){var Z=Fl();on.flags|=w,Z.memoizedState=b_(1|E,k,{destroy:void 0},z===void 0?null:z)}function _P(w,E,k,z){var Z=Jr();z=z===void 0?null:z;var ie=Z.memoizedState.inst;vs!==null&&z!==null&&wk(z,vs.memoizedState.deps)?Z.memoizedState=b_(E,k,ie,z):(on.flags|=w,Z.memoizedState=b_(1|E,k,ie,z))}function SH(w,E){vP(8390656,8,w,E)}function Dk(w,E){_P(2048,8,w,E)}function EH(w,E){return _P(4,2,w,E)}function CH(w,E){return _P(4,4,w,E)}function PH(w,E){if(typeof E=="function"){w=w();var k=E(w);return function(){typeof k=="function"?k():E(null)}}if(E!=null)return w=w(),E.current=w,function(){E.current=null}}function TH(w,E,k){k=k!=null?k.concat([w]):null,_P(4,4,PH.bind(null,E,w),k)}function Nk(){}function IH(w,E){var k=Jr();E=E===void 0?null:E;var z=k.memoizedState;return E!==null&&wk(E,z[1])?z[0]:(k.memoizedState=[w,E],w)}function MH(w,E){var k=Jr();E=E===void 0?null:E;var z=k.memoizedState;if(E!==null&&wk(E,z[1]))return z[0];if(z=w(),w1){a(!0);try{w()}finally{a(!1)}}return k.memoizedState=[z,E],z}function Ok(w,E,k){return k===void 0||(jm&1073741824)!==0?w.memoizedState=E:(w.memoizedState=k,w=kU(),on.lanes|=w,Qm|=w,k)}function AH(w,E,k,z){return Oe(k,E)?k:m_.current!==null?(w=Ok(w,k,z),Oe(w,E)||(Ao=!0),w):(jm&42)===0?(Ao=!0,w.memoizedState=k):(w=kU(),on.lanes|=w,Qm|=w,E)}function kH(w,E,k,z,Z){var ie=ot.p;ot.p=ie!==0&&8>ie?ie:8;var _e=ne.T,ke={};ne.T=ke,Lk(w,!1,E,k);try{var qe=Z(),We=ne.S;if(We!==null&&We(ke,qe),qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var yt=Kve(qe,z);yw(w,E,yt,mc(w))}else yw(w,E,z,mc(w))}catch(At){yw(w,E,{then:function(){},status:"rejected",reason:At},mc())}finally{ot.p=ie,ne.T=_e}}function i_e(){}function $k(w,E,k,z){if(w.tag!==5)throw Error(n(476));var Z=DH(w).queue;kH(w,Z,E,ut,k===null?i_e:function(){return NH(w),k(z)})}function DH(w){var E=w.memoizedState;if(E!==null)return E;E={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:ut},next:null};var k={};return E.next={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:k},next:null},w.memoizedState=E,w=w.alternate,w!==null&&(w.memoizedState=E),E}function NH(w){var E=DH(w).next.queue;yw(w,E,{},mc())}function Rk(){return Na(Lw)}function OH(){return Jr().memoizedState}function $H(){return Jr().memoizedState}function n_e(w){for(var E=w.return;E!==null;){switch(E.tag){case 24:case 3:var k=mc();w=Ym(k);var z=Xm(E,w,k);z!==null&&(ll(z,E,k),bw(z,E,k)),E={cache:_k()},w.payload=E;return}E=E.return}}function s_e(w,E,k){var z=mc();k={lane:z,revertLane:0,action:k,hasEagerState:!1,eagerState:null,next:null},bP(w)?LH(E,k):(k=dk(w,E,k,z),k!==null&&(ll(k,w,z),FH(k,E,z)))}function RH(w,E,k){var z=mc();yw(w,E,k,z)}function yw(w,E,k,z){var Z={lane:z,revertLane:0,action:k,hasEagerState:!1,eagerState:null,next:null};if(bP(w))LH(E,Z);else{var ie=w.alternate;if(w.lanes===0&&(ie===null||ie.lanes===0)&&(ie=E.lastRenderedReducer,ie!==null))try{var _e=E.lastRenderedState,ke=ie(_e,k);if(Z.hasEagerState=!0,Z.eagerState=ke,Oe(ke,_e))return nP(w,E,Z,0),$s===null&&iP(),!1}catch{}finally{}if(k=dk(w,E,Z,z),k!==null)return ll(k,w,z),FH(k,E,z),!0}return!1}function Lk(w,E,k,z){if(z={lane:2,revertLane:PD(),action:z,hasEagerState:!1,eagerState:null,next:null},bP(w)){if(E)throw Error(n(479))}else E=dk(w,k,z,2),E!==null&&ll(E,w,2)}function bP(w){var E=w.alternate;return w===on||E!==null&&E===on}function LH(w,E){v_=fP=!0;var k=w.pending;k===null?E.next=E:(E.next=k.next,k.next=E),w.pending=E}function FH(w,E,k){if((k&4194176)!==0){var z=E.lanes;z&=w.pendingLanes,k|=z,E.lanes=k,Ce(w,k)}}var Ed={readContext:Na,use:gP,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useLayoutEffect:qr,useInsertionEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useSyncExternalStore:qr,useId:qr};Ed.useCacheRefresh=qr,Ed.useMemoCache=qr,Ed.useHostTransitionStatus=qr,Ed.useFormState=qr,Ed.useActionState=qr,Ed.useOptimistic=qr;var S1={readContext:Na,use:gP,useCallback:function(w,E){return Fl().memoizedState=[w,E===void 0?null:E],w},useContext:Na,useEffect:SH,useImperativeHandle:function(w,E,k){k=k!=null?k.concat([w]):null,vP(4194308,4,PH.bind(null,E,w),k)},useLayoutEffect:function(w,E){return vP(4194308,4,w,E)},useInsertionEffect:function(w,E){vP(4,2,w,E)},useMemo:function(w,E){var k=Fl();E=E===void 0?null:E;var z=w();if(w1){a(!0);try{w()}finally{a(!1)}}return k.memoizedState=[z,E],z},useReducer:function(w,E,k){var z=Fl();if(k!==void 0){var Z=k(E);if(w1){a(!0);try{k(E)}finally{a(!1)}}}else Z=E;return z.memoizedState=z.baseState=Z,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:Z},z.queue=w,w=w.dispatch=s_e.bind(null,on,w),[z.memoizedState,w]},useRef:function(w){var E=Fl();return w={current:w},E.memoizedState=w},useState:function(w){w=Ak(w);var E=w.queue,k=RH.bind(null,on,E);return E.dispatch=k,[w.memoizedState,k]},useDebugValue:Nk,useDeferredValue:function(w,E){var k=Fl();return Ok(k,w,E)},useTransition:function(){var w=Ak(!1);return w=kH.bind(null,on,w.queue,!0,!1),Fl().memoizedState=w,[!1,w]},useSyncExternalStore:function(w,E,k){var z=on,Z=Fl();if(Ln){if(k===void 0)throw Error(n(407));k=k()}else{if(k=E(),$s===null)throw Error(n(349));(Mn&60)!==0||aH(z,E,k)}Z.memoizedState=k;var ie={value:k,getSnapshot:E};return Z.queue=ie,SH(cH.bind(null,z,ie,w),[w]),z.flags|=2048,b_(9,lH.bind(null,z,ie,k,E),{destroy:void 0},null),k},useId:function(){var w=Fl(),E=$s.identifierPrefix;if(Ln){var k=Yf,z=Uf;k=(z&~(1<<32-u(z)-1)).toString(32)+k,E=":"+E+"R"+k,k=pP++,0<k&&(E+="H"+k.toString(32)),E+=":"}else k=Jve++,E=":"+E+"r"+k.toString(32)+":";return w.memoizedState=E},useCacheRefresh:function(){return Fl().memoizedState=n_e.bind(null,on)}};S1.useMemoCache=Tk,S1.useHostTransitionStatus=Rk,S1.useFormState=vH,S1.useActionState=vH,S1.useOptimistic=function(w){var E=Fl();E.memoizedState=E.baseState=w;var k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return E.queue=k,E=Lk.bind(null,on,!0,k),k.dispatch=E,[w,E]};var Bm={readContext:Na,use:gP,useCallback:IH,useContext:Na,useEffect:Dk,useImperativeHandle:TH,useInsertionEffect:EH,useLayoutEffect:CH,useMemo:MH,useReducer:yP,useRef:wH,useState:function(){return yP(Wf)},useDebugValue:Nk,useDeferredValue:function(w,E){var k=Jr();return AH(k,vs.memoizedState,w,E)},useTransition:function(){var w=yP(Wf)[0],E=Jr().memoizedState;return[typeof w=="boolean"?w:gw(w),E]},useSyncExternalStore:oH,useId:OH};Bm.useCacheRefresh=$H,Bm.useMemoCache=Tk,Bm.useHostTransitionStatus=Rk,Bm.useFormState=_H,Bm.useActionState=_H,Bm.useOptimistic=function(w,E){var k=Jr();return dH(k,vs,w,E)};var E1={readContext:Na,use:gP,useCallback:IH,useContext:Na,useEffect:Dk,useImperativeHandle:TH,useInsertionEffect:EH,useLayoutEffect:CH,useMemo:MH,useReducer:Mk,useRef:wH,useState:function(){return Mk(Wf)},useDebugValue:Nk,useDeferredValue:function(w,E){var k=Jr();return vs===null?Ok(k,w,E):AH(k,vs.memoizedState,w,E)},useTransition:function(){var w=Mk(Wf)[0],E=Jr().memoizedState;return[typeof w=="boolean"?w:gw(w),E]},useSyncExternalStore:oH,useId:OH};E1.useCacheRefresh=$H,E1.useMemoCache=Tk,E1.useHostTransitionStatus=Rk,E1.useFormState=xH,E1.useActionState=xH,E1.useOptimistic=function(w,E){var k=Jr();return vs!==null?dH(k,vs,w,E):(k.baseState=w,[w,k.queue.dispatch])};function Fk(w,E,k,z){E=w.memoizedState,k=k(z,E),k=k==null?E:oe({},E,k),w.memoizedState=k,w.lanes===0&&(w.updateQueue.baseState=k)}var zk={isMounted:function(w){return(w=w._reactInternals)?Re(w)===w:!1},enqueueSetState:function(w,E,k){w=w._reactInternals;var z=mc(),Z=Ym(z);Z.payload=E,k!=null&&(Z.callback=k),E=Xm(w,Z,z),E!==null&&(ll(E,w,z),bw(E,w,z))},enqueueReplaceState:function(w,E,k){w=w._reactInternals;var z=mc(),Z=Ym(z);Z.tag=1,Z.payload=E,k!=null&&(Z.callback=k),E=Xm(w,Z,z),E!==null&&(ll(E,w,z),bw(E,w,z))},enqueueForceUpdate:function(w,E){w=w._reactInternals;var k=mc(),z=Ym(k);z.tag=2,E!=null&&(z.callback=E),E=Xm(w,z,k),E!==null&&(ll(E,w,k),bw(E,w,k))}};function zH(w,E,k,z,Z,ie,_e){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(z,ie,_e):E.prototype&&E.prototype.isPureReactComponent?!je(k,z)||!je(Z,ie):!0}function qH(w,E,k,z){w=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(k,z),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(k,z),E.state!==w&&zk.enqueueReplaceState(E,E.state,null)}function C1(w,E){var k=E;if("ref"in E){k={};for(var z in E)z!=="ref"&&(k[z]=E[z])}if(w=w.defaultProps){k===E&&(k=oe({},k));for(var Z in w)k[Z]===void 0&&(k[Z]=w[Z])}return k}var xP=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function VH(w){xP(w)}function GH(w){console.error(w)}function jH(w){xP(w)}function wP(w,E){try{var k=w.onUncaughtError;k(E.value,{componentStack:E.stack})}catch(z){setTimeout(function(){throw z})}}function BH(w,E,k){try{var z=w.onCaughtError;z(k.value,{componentStack:k.stack,errorBoundary:E.tag===1?E.stateNode:null})}catch(Z){setTimeout(function(){throw Z})}}function qk(w,E,k){return k=Ym(k),k.tag=3,k.payload={element:null},k.callback=function(){wP(w,E)},k}function HH(w){return w=Ym(w),w.tag=3,w}function UH(w,E,k,z){var Z=k.type.getDerivedStateFromError;if(typeof Z=="function"){var ie=z.value;w.payload=function(){return Z(ie)},w.callback=function(){BH(E,k,z)}}var _e=k.stateNode;_e!==null&&typeof _e.componentDidCatch=="function"&&(w.callback=function(){BH(E,k,z),typeof Z!="function"&&(eg===null?eg=new Set([this]):eg.add(this));var ke=z.stack;this.componentDidCatch(z.value,{componentStack:ke!==null?ke:""})})}function r_e(w,E,k,z,Z){if(k.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(E=k.alternate,E!==null&&_w(E,k,Z,!0),k=ru.current,k!==null){switch(k.tag){case 13:return Sd===null?xD():k.alternate===null&&kr===0&&(kr=3),k.flags&=-257,k.flags|=65536,k.lanes=Z,z===gk?k.flags|=16384:(E=k.updateQueue,E===null?k.updateQueue=new Set([z]):E.add(z),SD(w,z,Z)),!1;case 22:return k.flags|=65536,z===gk?k.flags|=16384:(E=k.updateQueue,E===null?(E={transitions:null,markerInstances:null,retryQueue:new Set([z])},k.updateQueue=E):(k=E.retryQueue,k===null?E.retryQueue=new Set([z]):k.add(z)),SD(w,z,Z)),!1}throw Error(n(435,k.tag))}return SD(w,z,Z),xD(),!1}if(Ln)return E=ru.current,E!==null?((E.flags&65536)===0&&(E.flags|=256),E.flags|=65536,E.lanes=Z,z!==mk&&(w=Error(n(422),{cause:z}),lw(iu(w,k)))):(z!==mk&&(E=Error(n(423),{cause:z}),lw(iu(E,k))),w=w.current.alternate,w.flags|=65536,Z&=-Z,w.lanes|=Z,z=iu(z,k),Z=qk(w.stateNode,z,Z),tD(w,Z),kr!==4&&(kr=2)),!1;var ie=Error(n(520),{cause:z});if(ie=iu(ie,k),Iw===null?Iw=[ie]:Iw.push(ie),kr!==4&&(kr=2),E===null)return!0;z=iu(z,k),k=E;do{switch(k.tag){case 3:return k.flags|=65536,w=Z&-Z,k.lanes|=w,w=qk(k.stateNode,z,w),tD(k,w),!1;case 1:if(E=k.type,ie=k.stateNode,(k.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(eg===null||!eg.has(ie))))return k.flags|=65536,Z&=-Z,k.lanes|=Z,Z=HH(Z),UH(Z,w,k,z),tD(k,Z),!1}k=k.return}while(k!==null);return!1}var YH=Error(n(461)),Ao=!1;function ra(w,E,k,z){E.child=w===null?JB(E,null,k,z):b1(E,w.child,k,z)}function XH(w,E,k,z,Z){k=k.render;var ie=E.ref;if("ref"in z){var _e={};for(var ke in z)ke!=="ref"&&(_e[ke]=z[ke])}else _e=z;return T1(E),z=Sk(w,E,k,_e,ie,Z),ke=Ek(),w!==null&&!Ao?(Ck(w,E,Z),Zf(w,E,Z)):(Ln&&ke&&fk(E),E.flags|=1,ra(w,E,z,Z),E.child)}function WH(w,E,k,z,Z){if(w===null){var ie=k.type;return typeof ie=="function"&&!cD(ie)&&ie.defaultProps===void 0&&k.compare===null?(E.tag=15,E.type=ie,ZH(w,E,ie,z,Z)):(w=TP(k.type,null,z,E,E.mode,Z),w.ref=E.ref,w.return=E,E.child=w)}if(ie=w.child,!Wk(w,Z)){var _e=ie.memoizedProps;if(k=k.compare,k=k!==null?k:je,k(_e,z)&&w.ref===E.ref)return Zf(w,E,Z)}return E.flags|=1,w=Jm(ie,z),w.ref=E.ref,w.return=E,E.child=w}function ZH(w,E,k,z,Z){if(w!==null){var ie=w.memoizedProps;if(je(ie,z)&&w.ref===E.ref)if(Ao=!1,E.pendingProps=z=ie,Wk(w,Z))(w.flags&131072)!==0&&(Ao=!0);else return E.lanes=w.lanes,Zf(w,E,Z)}return Vk(w,E,k,z,Z)}function KH(w,E,k){var z=E.pendingProps,Z=z.children,ie=(E.stateNode._pendingVisibility&2)!==0,_e=w!==null?w.memoizedState:null;if(vw(w,E),z.mode==="hidden"||ie){if((E.flags&128)!==0){if(z=_e!==null?_e.baseLanes|k:k,w!==null){for(Z=E.child=w.child,ie=0;Z!==null;)ie=ie|Z.lanes|Z.childLanes,Z=Z.sibling;E.childLanes=ie&~z}else E.childLanes=0,E.child=null;return JH(w,E,z,k)}if((k&536870912)!==0)E.memoizedState={baseLanes:0,cachePool:null},w!==null&&dP(E,_e!==null?_e.cachePool:null),_e!==null?QB(E,_e):yk(),eH(E);else return E.lanes=E.childLanes=536870912,JH(w,E,_e!==null?_e.baseLanes|k:k,k)}else _e!==null?(dP(E,_e.cachePool),QB(E,_e),Gm(),E.memoizedState=null):(w!==null&&dP(E,null),yk(),Gm());return ra(w,E,Z,k),E.child}function JH(w,E,k,z){var Z=xk();return Z=Z===null?null:{parent:go._currentValue,pool:Z},E.memoizedState={baseLanes:k,cachePool:Z},w!==null&&dP(E,null),yk(),eH(E),w!==null&&_w(w,E,z,!0),null}function vw(w,E){var k=E.ref;if(k===null)w!==null&&w.ref!==null&&(E.flags|=2097664);else{if(typeof k!="function"&&typeof k!="object")throw Error(n(284));(w===null||w.ref!==k)&&(E.flags|=2097664)}}function Vk(w,E,k,z,Z){return T1(E),k=Sk(w,E,k,z,void 0,Z),z=Ek(),w!==null&&!Ao?(Ck(w,E,Z),Zf(w,E,Z)):(Ln&&z&&fk(E),E.flags|=1,ra(w,E,k,Z),E.child)}function QH(w,E,k,z,Z,ie){return T1(E),E.updateQueue=null,k=rH(E,z,k,Z),sH(w),z=Ek(),w!==null&&!Ao?(Ck(w,E,ie),Zf(w,E,ie)):(Ln&&z&&fk(E),E.flags|=1,ra(w,E,k,ie),E.child)}function eU(w,E,k,z,Z){if(T1(E),E.stateNode===null){var ie=h_,_e=k.contextType;typeof _e=="object"&&_e!==null&&(ie=Na(_e)),ie=new k(z,ie),E.memoizedState=ie.state!==null&&ie.state!==void 0?ie.state:null,ie.updater=zk,E.stateNode=ie,ie._reactInternals=E,ie=E.stateNode,ie.props=z,ie.state=E.memoizedState,ie.refs={},Qk(E),_e=k.contextType,ie.context=typeof _e=="object"&&_e!==null?Na(_e):h_,ie.state=E.memoizedState,_e=k.getDerivedStateFromProps,typeof _e=="function"&&(Fk(E,k,_e,z),ie.state=E.memoizedState),typeof k.getDerivedStateFromProps=="function"||typeof ie.getSnapshotBeforeUpdate=="function"||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(_e=ie.state,typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount(),_e!==ie.state&&zk.enqueueReplaceState(ie,ie.state,null),ww(E,z,ie,Z),xw(),ie.state=E.memoizedState),typeof ie.componentDidMount=="function"&&(E.flags|=4194308),z=!0}else if(w===null){ie=E.stateNode;var ke=E.memoizedProps,qe=C1(k,ke);ie.props=qe;var We=ie.context,yt=k.contextType;_e=h_,typeof yt=="object"&&yt!==null&&(_e=Na(yt));var At=k.getDerivedStateFromProps;yt=typeof At=="function"||typeof ie.getSnapshotBeforeUpdate=="function",ke=E.pendingProps!==ke,yt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(ke||We!==_e)&&qH(E,ie,z,_e),Um=!1;var at=E.memoizedState;ie.state=at,ww(E,z,ie,Z),xw(),We=E.memoizedState,ke||at!==We||Um?(typeof At=="function"&&(Fk(E,k,At,z),We=E.memoizedState),(qe=Um||zH(E,k,qe,z,at,We,_e))?(yt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(E.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=z,E.memoizedState=We),ie.props=z,ie.state=We,ie.context=_e,z=qe):(typeof ie.componentDidMount=="function"&&(E.flags|=4194308),z=!1)}else{ie=E.stateNode,eD(w,E),_e=E.memoizedProps,yt=C1(k,_e),ie.props=yt,At=E.pendingProps,at=ie.context,We=k.contextType,qe=h_,typeof We=="object"&&We!==null&&(qe=Na(We)),ke=k.getDerivedStateFromProps,(We=typeof ke=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(_e!==At||at!==qe)&&qH(E,ie,z,qe),Um=!1,at=E.memoizedState,ie.state=at,ww(E,z,ie,Z),xw();var gt=E.memoizedState;_e!==At||at!==gt||Um||w!==null&&w.dependencies!==null&&SP(w.dependencies)?(typeof ke=="function"&&(Fk(E,k,ke,z),gt=E.memoizedState),(yt=Um||zH(E,k,yt,z,at,gt,qe)||w!==null&&w.dependencies!==null&&SP(w.dependencies))?(We||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(z,gt,qe),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(z,gt,qe)),typeof ie.componentDidUpdate=="function"&&(E.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof ie.componentDidUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=1024),E.memoizedProps=z,E.memoizedState=gt),ie.props=z,ie.state=gt,ie.context=qe,z=yt):(typeof ie.componentDidUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=1024),z=!1)}return ie=z,vw(w,E),z=(E.flags&128)!==0,ie||z?(ie=E.stateNode,k=z&&typeof k.getDerivedStateFromError!="function"?null:ie.render(),E.flags|=1,w!==null&&z?(E.child=b1(E,w.child,null,Z),E.child=b1(E,null,k,Z)):ra(w,E,k,Z),E.memoizedState=ie.state,w=E.child):w=Zf(w,E,Z),w}function tU(w,E,k,z){return aw(),E.flags|=256,ra(w,E,k,z),E.child}var Gk={dehydrated:null,treeContext:null,retryLane:0};function jk(w){return{baseLanes:w,cachePool:nH()}}function Bk(w,E,k){return w=w!==null?w.childLanes&~k:0,E&&(w|=cu),w}function iU(w,E,k){var z=E.pendingProps,Z=!1,ie=(E.flags&128)!==0,_e;if((_e=ie)||(_e=w!==null&&w.memoizedState===null?!1:(mo.current&2)!==0),_e&&(Z=!0,E.flags&=-129),_e=(E.flags&32)!==0,E.flags&=-33,w===null){if(Ln){if(Z?Vm(E):Gm(),Ln){var ke=sa,qe;if(qe=ke){e:{for(qe=ke,ke=wd;qe.nodeType!==8;){if(!ke){ke=null;break e}if(qe=fh(qe.nextSibling),qe===null){ke=null;break e}}ke=qe}ke!==null?(E.memoizedState={dehydrated:ke,treeContext:y1!==null?{id:Uf,overflow:Yf}:null,retryLane:536870912},qe=lu(18,null,null,0),qe.stateNode=ke,qe.return=E,E.child=qe,al=E,sa=null,qe=!0):qe=!1}qe||_1(E)}if(ke=E.memoizedState,ke!==null&&(ke=ke.dehydrated,ke!==null))return ke.data==="$!"?E.lanes=16:E.lanes=536870912,null;Xf(E)}return ke=z.children,z=z.fallback,Z?(Gm(),Z=E.mode,ke=Uk({mode:"hidden",children:ke},Z),z=M1(z,Z,k,null),ke.return=E,z.return=E,ke.sibling=z,E.child=ke,Z=E.child,Z.memoizedState=jk(k),Z.childLanes=Bk(w,_e,k),E.memoizedState=Gk,z):(Vm(E),Hk(E,ke))}if(qe=w.memoizedState,qe!==null&&(ke=qe.dehydrated,ke!==null)){if(ie)E.flags&256?(Vm(E),E.flags&=-257,E=Yk(w,E,k)):E.memoizedState!==null?(Gm(),E.child=w.child,E.flags|=128,E=null):(Gm(),Z=z.fallback,ke=E.mode,z=Uk({mode:"visible",children:z.children},ke),Z=M1(Z,ke,k,null),Z.flags|=2,z.return=E,Z.return=E,z.sibling=Z,E.child=z,b1(E,w.child,null,k),z=E.child,z.memoizedState=jk(k),z.childLanes=Bk(w,_e,k),E.memoizedState=Gk,E=Z);else if(Vm(E),ke.data==="$!"){if(_e=ke.nextSibling&&ke.nextSibling.dataset,_e)var We=_e.dgst;_e=We,z=Error(n(419)),z.stack="",z.digest=_e,lw({value:z,source:null,stack:null}),E=Yk(w,E,k)}else if(Ao||_w(w,E,k,!1),_e=(k&w.childLanes)!==0,Ao||_e){if(_e=$s,_e!==null){if(z=k&-k,(z&42)!==0)z=1;else switch(z){case 2:z=1;break;case 8:z=4;break;case 32:z=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:z=64;break;case 268435456:z=134217728;break;default:z=0}if(z=(z&(_e.suspendedLanes|k))!==0?0:z,z!==0&&z!==qe.retryLane)throw qe.retryLane=z,qm(w,z),ll(_e,w,z),YH}ke.data==="$?"||xD(),E=Yk(w,E,k)}else ke.data==="$?"?(E.flags|=128,E.child=w.child,E=b_e.bind(null,w),ke._reactRetry=E,E=null):(w=qe.treeContext,sa=fh(ke.nextSibling),al=E,Ln=!0,hh=null,wd=!1,w!==null&&(nu[su++]=Uf,nu[su++]=Yf,nu[su++]=y1,Uf=w.id,Yf=w.overflow,y1=E),E=Hk(E,z.children),E.flags|=4096);return E}return Z?(Gm(),Z=z.fallback,ke=E.mode,qe=w.child,We=qe.sibling,z=Jm(qe,{mode:"hidden",children:z.children}),z.subtreeFlags=qe.subtreeFlags&31457280,We!==null?Z=Jm(We,Z):(Z=M1(Z,ke,k,null),Z.flags|=2),Z.return=E,z.return=E,z.sibling=Z,E.child=z,z=Z,Z=E.child,ke=w.child.memoizedState,ke===null?ke=jk(k):(qe=ke.cachePool,qe!==null?(We=go._currentValue,qe=qe.parent!==We?{parent:We,pool:We}:qe):qe=nH(),ke={baseLanes:ke.baseLanes|k,cachePool:qe}),Z.memoizedState=ke,Z.childLanes=Bk(w,_e,k),E.memoizedState=Gk,z):(Vm(E),k=w.child,w=k.sibling,k=Jm(k,{mode:"visible",children:z.children}),k.return=E,k.sibling=null,w!==null&&(_e=E.deletions,_e===null?(E.deletions=[w],E.flags|=16):_e.push(w)),E.child=k,E.memoizedState=null,k)}function Hk(w,E){return E=Uk({mode:"visible",children:E},w.mode),E.return=w,w.child=E}function Uk(w,E){return IU(w,E,0,null)}function Yk(w,E,k){return b1(E,w.child,null,k),w=Hk(E,E.pendingProps.children),w.flags|=2,E.memoizedState=null,w}function nU(w,E,k){w.lanes|=E;var z=w.alternate;z!==null&&(z.lanes|=E),Kk(w.return,E,k)}function Xk(w,E,k,z,Z){var ie=w.memoizedState;ie===null?w.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:z,tail:k,tailMode:Z}:(ie.isBackwards=E,ie.rendering=null,ie.renderingStartTime=0,ie.last=z,ie.tail=k,ie.tailMode=Z)}function sU(w,E,k){var z=E.pendingProps,Z=z.revealOrder,ie=z.tail;if(ra(w,E,z.children,k),z=mo.current,(z&2)!==0)z=z&1|2,E.flags|=128;else{if(w!==null&&(w.flags&128)!==0)e:for(w=E.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&nU(w,k,E);else if(w.tag===19)nU(w,k,E);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===E)break e;for(;w.sibling===null;){if(w.return===null||w.return===E)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}z&=1}switch(Wi(mo,z),Z){case"forwards":for(k=E.child,Z=null;k!==null;)w=k.alternate,w!==null&&hP(w)===null&&(Z=k),k=k.sibling;k=Z,k===null?(Z=E.child,E.child=null):(Z=k.sibling,k.sibling=null),Xk(E,!1,Z,k,ie);break;case"backwards":for(k=null,Z=E.child,E.child=null;Z!==null;){if(w=Z.alternate,w!==null&&hP(w)===null){E.child=Z;break}w=Z.sibling,Z.sibling=k,k=Z,Z=w}Xk(E,!0,k,null,ie);break;case"together":Xk(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function Zf(w,E,k){if(w!==null&&(E.dependencies=w.dependencies),Qm|=E.lanes,(k&E.childLanes)===0)if(w!==null){if(_w(w,E,k,!1),(k&E.childLanes)===0)return null}else return null;if(w!==null&&E.child!==w.child)throw Error(n(153));if(E.child!==null){for(w=E.child,k=Jm(w,w.pendingProps),E.child=k,k.return=E;w.sibling!==null;)w=w.sibling,k=k.sibling=Jm(w,w.pendingProps),k.return=E;k.sibling=null}return E.child}function Wk(w,E){return(w.lanes&E)!==0?!0:(w=w.dependencies,!!(w!==null&&SP(w)))}function o_e(w,E,k){switch(E.tag){case 3:fo(E,E.stateNode.containerInfo),Hm(E,go,w.memoizedState.cache),aw();break;case 27:case 5:ye(E);break;case 4:fo(E,E.stateNode.containerInfo);break;case 10:Hm(E,E.type,E.memoizedProps.value);break;case 13:var z=E.memoizedState;if(z!==null)return z.dehydrated!==null?(Vm(E),E.flags|=128,null):(k&E.child.childLanes)!==0?iU(w,E,k):(Vm(E),w=Zf(w,E,k),w!==null?w.sibling:null);Vm(E);break;case 19:var Z=(w.flags&128)!==0;if(z=(k&E.childLanes)!==0,z||(_w(w,E,k,!1),z=(k&E.childLanes)!==0),Z){if(z)return sU(w,E,k);E.flags|=128}if(Z=E.memoizedState,Z!==null&&(Z.rendering=null,Z.tail=null,Z.lastEffect=null),Wi(mo,mo.current),z)break;return null;case 22:case 23:return E.lanes=0,KH(w,E,k);case 24:Hm(E,go,w.memoizedState.cache)}return Zf(w,E,k)}function rU(w,E,k){if(w!==null)if(w.memoizedProps!==E.pendingProps)Ao=!0;else{if(!Wk(w,k)&&(E.flags&128)===0)return Ao=!1,o_e(w,E,k);Ao=(w.flags&131072)!==0}else Ao=!1,Ln&&(E.flags&1048576)!==0&&jB(E,oP,E.index);switch(E.lanes=0,E.tag){case 16:e:{w=E.pendingProps;var z=E.elementType,Z=z._init;if(z=Z(z._payload),E.type=z,typeof z=="function")cD(z)?(w=C1(z,w),E.tag=1,E=eU(null,E,z,w,k)):(E.tag=0,E=Vk(null,E,z,w,k));else{if(z!=null){if(Z=z.$$typeof,Z===P){E.tag=11,E=XH(null,E,z,w,k);break e}else if(Z===N){E.tag=14,E=WH(null,E,z,w,k);break e}}throw E=re(z)||z,Error(n(306,E,""))}}return E;case 0:return Vk(w,E,E.type,E.pendingProps,k);case 1:return z=E.type,Z=C1(z,E.pendingProps),eU(w,E,z,Z,k);case 3:e:{if(fo(E,E.stateNode.containerInfo),w===null)throw Error(n(387));var ie=E.pendingProps;Z=E.memoizedState,z=Z.element,eD(w,E),ww(E,ie,null,k);var _e=E.memoizedState;if(ie=_e.cache,Hm(E,go,ie),ie!==Z.cache&&Jk(E,[go],k,!0),xw(),ie=_e.element,Z.isDehydrated)if(Z={element:ie,isDehydrated:!1,cache:_e.cache},E.updateQueue.baseState=Z,E.memoizedState=Z,E.flags&256){E=tU(w,E,ie,k);break e}else if(ie!==z){z=iu(Error(n(424)),E),lw(z),E=tU(w,E,ie,k);break e}else for(sa=fh(E.stateNode.containerInfo.firstChild),al=E,Ln=!0,hh=null,wd=!0,k=JB(E,null,ie,k),E.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(aw(),ie===z){E=Zf(w,E,k);break e}ra(w,E,ie,k)}E=E.child}return E;case 26:return vw(w,E),w===null?(k=lY(E.type,null,E.pendingProps,null))?E.memoizedState=k:Ln||(k=E.type,w=E.pendingProps,z=zP(Yn.current).createElement(k),z[et]=E,z[dt]=w,oa(z,k,w),Kt(z),E.stateNode=z):E.memoizedState=lY(E.type,w.memoizedProps,E.pendingProps,w.memoizedState),null;case 27:return ye(E),w===null&&Ln&&(z=E.stateNode=rY(E.type,E.pendingProps,Yn.current),al=E,wd=!0,sa=fh(z.firstChild)),z=E.pendingProps.children,w!==null||Ln?ra(w,E,z,k):E.child=b1(E,null,z,k),vw(w,E),E.child;case 5:return w===null&&Ln&&((Z=z=sa)&&(z=R_e(z,E.type,E.pendingProps,wd),z!==null?(E.stateNode=z,al=E,sa=fh(z.firstChild),wd=!1,Z=!0):Z=!1),Z||_1(E)),ye(E),Z=E.type,ie=E.pendingProps,_e=w!==null?w.memoizedProps:null,z=ie.children,$D(Z,ie)?z=null:_e!==null&&$D(Z,_e)&&(E.flags|=32),E.memoizedState!==null&&(Z=Sk(w,E,Qve,null,null,k),Lw._currentValue=Z),vw(w,E),ra(w,E,z,k),E.child;case 6:return w===null&&Ln&&((w=k=sa)&&(k=L_e(k,E.pendingProps,wd),k!==null?(E.stateNode=k,al=E,sa=null,w=!0):w=!1),w||_1(E)),null;case 13:return iU(w,E,k);case 4:return fo(E,E.stateNode.containerInfo),z=E.pendingProps,w===null?E.child=b1(E,null,z,k):ra(w,E,z,k),E.child;case 11:return XH(w,E,E.type,E.pendingProps,k);case 7:return ra(w,E,E.pendingProps,k),E.child;case 8:return ra(w,E,E.pendingProps.children,k),E.child;case 12:return ra(w,E,E.pendingProps.children,k),E.child;case 10:return z=E.pendingProps,Hm(E,E.type,z.value),ra(w,E,z.children,k),E.child;case 9:return Z=E.type._context,z=E.pendingProps.children,T1(E),Z=Na(Z),z=z(Z),E.flags|=1,ra(w,E,z,k),E.child;case 14:return WH(w,E,E.type,E.pendingProps,k);case 15:return ZH(w,E,E.type,E.pendingProps,k);case 19:return sU(w,E,k);case 22:return KH(w,E,k);case 24:return T1(E),z=Na(go),w===null?(Z=xk(),Z===null&&(Z=$s,ie=_k(),Z.pooledCache=ie,ie.refCount++,ie!==null&&(Z.pooledCacheLanes|=k),Z=ie),E.memoizedState={parent:z,cache:Z},Qk(E),Hm(E,go,Z)):((w.lanes&k)!==0&&(eD(w,E),ww(E,null,null,k),xw()),Z=w.memoizedState,ie=E.memoizedState,Z.parent!==z?(Z={parent:z,cache:z},E.memoizedState=Z,E.lanes===0&&(E.memoizedState=E.updateQueue.baseState=Z),Hm(E,go,z)):(z=ie.cache,Hm(E,go,z),z!==Z.cache&&Jk(E,[go],k,!0))),ra(w,E,E.pendingProps.children,k),E.child;case 29:throw E.pendingProps}throw Error(n(156,E.tag))}var Zk=Ft(null),P1=null,Kf=null;function Hm(w,E,k){Wi(Zk,E._currentValue),E._currentValue=k}function Jf(w){w._currentValue=Zk.current,Nt(Zk)}function Kk(w,E,k){for(;w!==null;){var z=w.alternate;if((w.childLanes&E)!==E?(w.childLanes|=E,z!==null&&(z.childLanes|=E)):z!==null&&(z.childLanes&E)!==E&&(z.childLanes|=E),w===k)break;w=w.return}}function Jk(w,E,k,z){var Z=w.child;for(Z!==null&&(Z.return=w);Z!==null;){var ie=Z.dependencies;if(ie!==null){var _e=Z.child;ie=ie.firstContext;e:for(;ie!==null;){var ke=ie;ie=Z;for(var qe=0;qe<E.length;qe++)if(ke.context===E[qe]){ie.lanes|=k,ke=ie.alternate,ke!==null&&(ke.lanes|=k),Kk(ie.return,k,w),z||(_e=null);break e}ie=ke.next}}else if(Z.tag===18){if(_e=Z.return,_e===null)throw Error(n(341));_e.lanes|=k,ie=_e.alternate,ie!==null&&(ie.lanes|=k),Kk(_e,k,w),_e=null}else _e=Z.child;if(_e!==null)_e.return=Z;else for(_e=Z;_e!==null;){if(_e===w){_e=null;break}if(Z=_e.sibling,Z!==null){Z.return=_e.return,_e=Z;break}_e=_e.return}Z=_e}}function _w(w,E,k,z){w=null;for(var Z=E,ie=!1;Z!==null;){if(!ie){if((Z.flags&524288)!==0)ie=!0;else if((Z.flags&262144)!==0)break}if(Z.tag===10){var _e=Z.alternate;if(_e===null)throw Error(n(387));if(_e=_e.memoizedProps,_e!==null){var ke=Z.type;Oe(Z.pendingProps.value,_e.value)||(w!==null?w.push(ke):w=[ke])}}else if(Z===fr.current){if(_e=Z.alternate,_e===null)throw Error(n(387));_e.memoizedState.memoizedState!==Z.memoizedState.memoizedState&&(w!==null?w.push(Lw):w=[Lw])}Z=Z.return}w!==null&&Jk(E,w,k,z),E.flags|=262144}function SP(w){for(w=w.firstContext;w!==null;){if(!Oe(w.context._currentValue,w.memoizedValue))return!0;w=w.next}return!1}function T1(w){P1=w,Kf=null,w=w.dependencies,w!==null&&(w.firstContext=null)}function Na(w){return oU(P1,w)}function EP(w,E){return P1===null&&T1(w),oU(w,E)}function oU(w,E){var k=E._currentValue;if(E={context:E,memoizedValue:k,next:null},Kf===null){if(w===null)throw Error(n(308));Kf=E,w.dependencies={lanes:0,firstContext:E},w.flags|=524288}else Kf=Kf.next=E;return k}var Um=!1;function Qk(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eD(w,E){w=w.updateQueue,E.updateQueue===w&&(E.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,callbacks:null})}function Ym(w){return{lane:w,tag:0,payload:null,callback:null,next:null}}function Xm(w,E,k){var z=w.updateQueue;if(z===null)return null;if(z=z.shared,(gr&2)!==0){var Z=z.pending;return Z===null?E.next=E:(E.next=Z.next,Z.next=E),z.pending=E,E=sP(w),VB(w,null,k),E}return nP(w,z,E,k),sP(w)}function bw(w,E,k){if(E=E.updateQueue,E!==null&&(E=E.shared,(k&4194176)!==0)){var z=E.lanes;z&=w.pendingLanes,k|=z,E.lanes=k,Ce(w,k)}}function tD(w,E){var k=w.updateQueue,z=w.alternate;if(z!==null&&(z=z.updateQueue,k===z)){var Z=null,ie=null;if(k=k.firstBaseUpdate,k!==null){do{var _e={lane:k.lane,tag:k.tag,payload:k.payload,callback:null,next:null};ie===null?Z=ie=_e:ie=ie.next=_e,k=k.next}while(k!==null);ie===null?Z=ie=E:ie=ie.next=E}else Z=ie=E;k={baseState:z.baseState,firstBaseUpdate:Z,lastBaseUpdate:ie,shared:z.shared,callbacks:z.callbacks},w.updateQueue=k;return}w=k.lastBaseUpdate,w===null?k.firstBaseUpdate=E:w.next=E,k.lastBaseUpdate=E}var iD=!1;function xw(){if(iD){var w=y_;if(w!==null)throw w}}function ww(w,E,k,z){iD=!1;var Z=w.updateQueue;Um=!1;var ie=Z.firstBaseUpdate,_e=Z.lastBaseUpdate,ke=Z.shared.pending;if(ke!==null){Z.shared.pending=null;var qe=ke,We=qe.next;qe.next=null,_e===null?ie=We:_e.next=We,_e=qe;var yt=w.alternate;yt!==null&&(yt=yt.updateQueue,ke=yt.lastBaseUpdate,ke!==_e&&(ke===null?yt.firstBaseUpdate=We:ke.next=We,yt.lastBaseUpdate=qe))}if(ie!==null){var At=Z.baseState;_e=0,yt=We=qe=null,ke=ie;do{var at=ke.lane&-536870913,gt=at!==ke.lane;if(gt?(Mn&at)===at:(z&at)===at){at!==0&&at===g_&&(iD=!0),yt!==null&&(yt=yt.next={lane:0,tag:ke.tag,payload:ke.payload,callback:null,next:null});e:{var di=w,Bi=ke;at=E;var Dr=k;switch(Bi.tag){case 1:if(di=Bi.payload,typeof di=="function"){At=di.call(Dr,At,at);break e}At=di;break e;case 3:di.flags=di.flags&-65537|128;case 0:if(di=Bi.payload,at=typeof di=="function"?di.call(Dr,At,at):di,at==null)break e;At=oe({},At,at);break e;case 2:Um=!0}}at=ke.callback,at!==null&&(w.flags|=64,gt&&(w.flags|=8192),gt=Z.callbacks,gt===null?Z.callbacks=[at]:gt.push(at))}else gt={lane:at,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},yt===null?(We=yt=gt,qe=At):yt=yt.next=gt,_e|=at;if(ke=ke.next,ke===null){if(ke=Z.shared.pending,ke===null)break;gt=ke,ke=gt.next,gt.next=null,Z.lastBaseUpdate=gt,Z.shared.pending=null}}while(!0);yt===null&&(qe=At),Z.baseState=qe,Z.firstBaseUpdate=We,Z.lastBaseUpdate=yt,ie===null&&(Z.shared.lanes=0),Qm|=_e,w.lanes=_e,w.memoizedState=At}}function aU(w,E){if(typeof w!="function")throw Error(n(191,w));w.call(E)}function lU(w,E){var k=w.callbacks;if(k!==null)for(w.callbacks=null,w=0;w<k.length;w++)aU(k[w],E)}function Sw(w,E){try{var k=E.updateQueue,z=k!==null?k.lastEffect:null;if(z!==null){var Z=z.next;k=Z;do{if((k.tag&w)===w){z=void 0;var ie=k.create,_e=k.inst;z=ie(),_e.destroy=z}k=k.next}while(k!==Z)}}catch(ke){Cs(E,E.return,ke)}}function Wm(w,E,k){try{var z=E.updateQueue,Z=z!==null?z.lastEffect:null;if(Z!==null){var ie=Z.next;z=ie;do{if((z.tag&w)===w){var _e=z.inst,ke=_e.destroy;if(ke!==void 0){_e.destroy=void 0,Z=E;var qe=k;try{ke()}catch(We){Cs(Z,qe,We)}}}z=z.next}while(z!==ie)}}catch(We){Cs(E,E.return,We)}}function cU(w){var E=w.updateQueue;if(E!==null){var k=w.stateNode;try{lU(E,k)}catch(z){Cs(w,w.return,z)}}}function uU(w,E,k){k.props=C1(w.type,w.memoizedProps),k.state=w.memoizedState;try{k.componentWillUnmount()}catch(z){Cs(w,E,z)}}function I1(w,E){try{var k=w.ref;if(k!==null){var z=w.stateNode;switch(w.tag){case 26:case 27:case 5:var Z=z;break;default:Z=z}typeof k=="function"?w.refCleanup=k(Z):k.current=Z}}catch(ie){Cs(w,E,ie)}}function dc(w,E){var k=w.ref,z=w.refCleanup;if(k!==null)if(typeof z=="function")try{z()}catch(Z){Cs(w,E,Z)}finally{w.refCleanup=null,w=w.alternate,w!=null&&(w.refCleanup=null)}else if(typeof k=="function")try{k(null)}catch(Z){Cs(w,E,Z)}else k.current=null}function hU(w){var E=w.type,k=w.memoizedProps,z=w.stateNode;try{e:switch(E){case"button":case"input":case"select":case"textarea":k.autoFocus&&z.focus();break e;case"img":k.src?z.src=k.src:k.srcSet&&(z.srcset=k.srcSet)}}catch(Z){Cs(w,w.return,Z)}}function dU(w,E,k){try{var z=w.stateNode;k_e(z,w.type,k,E),z[dt]=E}catch(Z){Cs(w,w.return,Z)}}function fU(w){return w.tag===5||w.tag===3||w.tag===26||w.tag===27||w.tag===4}function nD(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||fU(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==27&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function sD(w,E,k){var z=w.tag;if(z===5||z===6)w=w.stateNode,E?k.nodeType===8?k.parentNode.insertBefore(w,E):k.insertBefore(w,E):(k.nodeType===8?(E=k.parentNode,E.insertBefore(w,k)):(E=k,E.appendChild(w)),k=k._reactRootContainer,k!=null||E.onclick!==null||(E.onclick=FP));else if(z!==4&&z!==27&&(w=w.child,w!==null))for(sD(w,E,k),w=w.sibling;w!==null;)sD(w,E,k),w=w.sibling}function CP(w,E,k){var z=w.tag;if(z===5||z===6)w=w.stateNode,E?k.insertBefore(w,E):k.appendChild(w);else if(z!==4&&z!==27&&(w=w.child,w!==null))for(CP(w,E,k),w=w.sibling;w!==null;)CP(w,E,k),w=w.sibling}var Qf=!1,Ar=!1,rD=!1,pU=typeof WeakSet=="function"?WeakSet:Set,ko=null,mU=!1;function a_e(w,E){if(w=w.containerInfo,ND=HP,w=kt(w),It(w)){if("selectionStart"in w)var k={start:w.selectionStart,end:w.selectionEnd};else e:{k=(k=w.ownerDocument)&&k.defaultView||window;var z=k.getSelection&&k.getSelection();if(z&&z.rangeCount!==0){k=z.anchorNode;var Z=z.anchorOffset,ie=z.focusNode;z=z.focusOffset;try{k.nodeType,ie.nodeType}catch{k=null;break e}var _e=0,ke=-1,qe=-1,We=0,yt=0,At=w,at=null;t:for(;;){for(var gt;At!==k||Z!==0&&At.nodeType!==3||(ke=_e+Z),At!==ie||z!==0&&At.nodeType!==3||(qe=_e+z),At.nodeType===3&&(_e+=At.nodeValue.length),(gt=At.firstChild)!==null;)at=At,At=gt;for(;;){if(At===w)break t;if(at===k&&++We===Z&&(ke=_e),at===ie&&++yt===z&&(qe=_e),(gt=At.nextSibling)!==null)break;At=at,at=At.parentNode}At=gt}k=ke===-1||qe===-1?null:{start:ke,end:qe}}else k=null}k=k||{start:0,end:0}}else k=null;for(OD={focusedElem:w,selectionRange:k},HP=!1,ko=E;ko!==null;)if(E=ko,w=E.child,(E.subtreeFlags&1028)!==0&&w!==null)w.return=E,ko=w;else for(;ko!==null;){switch(E=ko,ie=E.alternate,w=E.flags,E.tag){case 0:break;case 11:case 15:break;case 1:if((w&1024)!==0&&ie!==null){w=void 0,k=E,Z=ie.memoizedProps,ie=ie.memoizedState,z=k.stateNode;try{var di=C1(k.type,Z,k.elementType===k.type);w=z.getSnapshotBeforeUpdate(di,ie),z.__reactInternalSnapshotBeforeUpdate=w}catch(Bi){Cs(k,k.return,Bi)}}break;case 3:if((w&1024)!==0){if(w=E.stateNode.containerInfo,k=w.nodeType,k===9)FD(w);else if(k===1)switch(w.nodeName){case"HEAD":case"HTML":case"BODY":FD(w);break;default:w.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((w&1024)!==0)throw Error(n(163))}if(w=E.sibling,w!==null){w.return=E.return,ko=w;break}ko=E.return}return di=mU,mU=!1,di}function gU(w,E,k){var z=k.flags;switch(k.tag){case 0:case 11:case 15:tp(w,k),z&4&&Sw(5,k);break;case 1:if(tp(w,k),z&4)if(w=k.stateNode,E===null)try{w.componentDidMount()}catch(ke){Cs(k,k.return,ke)}else{var Z=C1(k.type,E.memoizedProps);E=E.memoizedState;try{w.componentDidUpdate(Z,E,w.__reactInternalSnapshotBeforeUpdate)}catch(ke){Cs(k,k.return,ke)}}z&64&&cU(k),z&512&&I1(k,k.return);break;case 3:if(tp(w,k),z&64&&(z=k.updateQueue,z!==null)){if(w=null,k.child!==null)switch(k.child.tag){case 27:case 5:w=k.child.stateNode;break;case 1:w=k.child.stateNode}try{lU(z,w)}catch(ke){Cs(k,k.return,ke)}}break;case 26:tp(w,k),z&512&&I1(k,k.return);break;case 27:case 5:tp(w,k),E===null&&z&4&&hU(k),z&512&&I1(k,k.return);break;case 12:tp(w,k);break;case 13:tp(w,k),z&4&&_U(w,k);break;case 22:if(Z=k.memoizedState!==null||Qf,!Z){E=E!==null&&E.memoizedState!==null||Ar;var ie=Qf,_e=Ar;Qf=Z,(Ar=E)&&!_e?Zm(w,k,(k.subtreeFlags&8772)!==0):tp(w,k),Qf=ie,Ar=_e}z&512&&(k.memoizedProps.mode==="manual"?I1(k,k.return):dc(k,k.return));break;default:tp(w,k)}}function yU(w){var E=w.alternate;E!==null&&(w.alternate=null,yU(E)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(E=w.stateNode,E!==null&&Qi(E)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}var Qr=null,fc=!1;function ep(w,E,k){for(k=k.child;k!==null;)vU(w,E,k),k=k.sibling}function vU(w,E,k){if(p&&typeof p.onCommitFiberUnmount=="function")try{p.onCommitFiberUnmount(T,k)}catch{}switch(k.tag){case 26:Ar||dc(k,E),ep(w,E,k),k.memoizedState?k.memoizedState.count--:k.stateNode&&(k=k.stateNode,k.parentNode.removeChild(k));break;case 27:Ar||dc(k,E);var z=Qr,Z=fc;for(Qr=k.stateNode,ep(w,E,k),k=k.stateNode,E=k.attributes;E.length;)k.removeAttributeNode(E[0]);Qi(k),Qr=z,fc=Z;break;case 5:Ar||dc(k,E);case 6:Z=Qr;var ie=fc;if(Qr=null,ep(w,E,k),Qr=Z,fc=ie,Qr!==null)if(fc)try{w=Qr,z=k.stateNode,w.nodeType===8?w.parentNode.removeChild(z):w.removeChild(z)}catch(_e){Cs(k,E,_e)}else try{Qr.removeChild(k.stateNode)}catch(_e){Cs(k,E,_e)}break;case 18:Qr!==null&&(fc?(E=Qr,k=k.stateNode,E.nodeType===8?LD(E.parentNode,k):E.nodeType===1&&LD(E,k),Vw(E)):LD(Qr,k.stateNode));break;case 4:z=Qr,Z=fc,Qr=k.stateNode.containerInfo,fc=!0,ep(w,E,k),Qr=z,fc=Z;break;case 0:case 11:case 14:case 15:Ar||Wm(2,k,E),Ar||Wm(4,k,E),ep(w,E,k);break;case 1:Ar||(dc(k,E),z=k.stateNode,typeof z.componentWillUnmount=="function"&&uU(k,E,z)),ep(w,E,k);break;case 21:ep(w,E,k);break;case 22:Ar||dc(k,E),Ar=(z=Ar)||k.memoizedState!==null,ep(w,E,k),Ar=z;break;default:ep(w,E,k)}}function _U(w,E){if(E.memoizedState===null&&(w=E.alternate,w!==null&&(w=w.memoizedState,w!==null&&(w=w.dehydrated,w!==null))))try{Vw(w)}catch(k){Cs(E,E.return,k)}}function l_e(w){switch(w.tag){case 13:case 19:var E=w.stateNode;return E===null&&(E=w.stateNode=new pU),E;case 22:return w=w.stateNode,E=w._retryCache,E===null&&(E=w._retryCache=new pU),E;default:throw Error(n(435,w.tag))}}function oD(w,E){var k=l_e(w);E.forEach(function(z){var Z=x_e.bind(null,w,z);k.has(z)||(k.add(z),z.then(Z,Z))})}function ou(w,E){var k=E.deletions;if(k!==null)for(var z=0;z<k.length;z++){var Z=k[z],ie=w,_e=E,ke=_e;e:for(;ke!==null;){switch(ke.tag){case 27:case 5:Qr=ke.stateNode,fc=!1;break e;case 3:Qr=ke.stateNode.containerInfo,fc=!0;break e;case 4:Qr=ke.stateNode.containerInfo,fc=!0;break e}ke=ke.return}if(Qr===null)throw Error(n(160));vU(ie,_e,Z),Qr=null,fc=!1,ie=Z.alternate,ie!==null&&(ie.return=null),Z.return=null}if(E.subtreeFlags&13878)for(E=E.child;E!==null;)bU(E,w),E=E.sibling}var dh=null;function bU(w,E){var k=w.alternate,z=w.flags;switch(w.tag){case 0:case 11:case 14:case 15:ou(E,w),au(w),z&4&&(Wm(3,w,w.return),Sw(3,w),Wm(5,w,w.return));break;case 1:ou(E,w),au(w),z&512&&(Ar||k===null||dc(k,k.return)),z&64&&Qf&&(w=w.updateQueue,w!==null&&(z=w.callbacks,z!==null&&(k=w.shared.hiddenCallbacks,w.shared.hiddenCallbacks=k===null?z:k.concat(z))));break;case 26:var Z=dh;if(ou(E,w),au(w),z&512&&(Ar||k===null||dc(k,k.return)),z&4){var ie=k!==null?k.memoizedState:null;if(z=w.memoizedState,k===null)if(z===null)if(w.stateNode===null){e:{z=w.type,k=w.memoizedProps,Z=Z.ownerDocument||Z;t:switch(z){case"title":ie=Z.getElementsByTagName("title")[0],(!ie||ie[Ni]||ie[et]||ie.namespaceURI==="http://www.w3.org/2000/svg"||ie.hasAttribute("itemprop"))&&(ie=Z.createElement(z),Z.head.insertBefore(ie,Z.querySelector("head > title"))),oa(ie,z,k),ie[et]=w,Kt(ie),z=ie;break e;case"link":var _e=hY("link","href",Z).get(z+(k.href||""));if(_e){for(var ke=0;ke<_e.length;ke++)if(ie=_e[ke],ie.getAttribute("href")===(k.href==null?null:k.href)&&ie.getAttribute("rel")===(k.rel==null?null:k.rel)&&ie.getAttribute("title")===(k.title==null?null:k.title)&&ie.getAttribute("crossorigin")===(k.crossOrigin==null?null:k.crossOrigin)){_e.splice(ke,1);break t}}ie=Z.createElement(z),oa(ie,z,k),Z.head.appendChild(ie);break;case"meta":if(_e=hY("meta","content",Z).get(z+(k.content||""))){for(ke=0;ke<_e.length;ke++)if(ie=_e[ke],ie.getAttribute("content")===(k.content==null?null:""+k.content)&&ie.getAttribute("name")===(k.name==null?null:k.name)&&ie.getAttribute("property")===(k.property==null?null:k.property)&&ie.getAttribute("http-equiv")===(k.httpEquiv==null?null:k.httpEquiv)&&ie.getAttribute("charset")===(k.charSet==null?null:k.charSet)){_e.splice(ke,1);break t}}ie=Z.createElement(z),oa(ie,z,k),Z.head.appendChild(ie);break;default:throw Error(n(468,z))}ie[et]=w,Kt(ie),z=ie}w.stateNode=z}else dY(Z,w.type,w.stateNode);else w.stateNode=uY(Z,z,w.memoizedProps);else ie!==z?(ie===null?k.stateNode!==null&&(k=k.stateNode,k.parentNode.removeChild(k)):ie.count--,z===null?dY(Z,w.type,w.stateNode):uY(Z,z,w.memoizedProps)):z===null&&w.stateNode!==null&&dU(w,w.memoizedProps,k.memoizedProps)}break;case 27:if(z&4&&w.alternate===null){Z=w.stateNode,ie=w.memoizedProps;try{for(var qe=Z.firstChild;qe;){var We=qe.nextSibling,yt=qe.nodeName;qe[Ni]||yt==="HEAD"||yt==="BODY"||yt==="SCRIPT"||yt==="STYLE"||yt==="LINK"&&qe.rel.toLowerCase()==="stylesheet"||Z.removeChild(qe),qe=We}for(var At=w.type,at=Z.attributes;at.length;)Z.removeAttributeNode(at[0]);oa(Z,At,ie),Z[et]=w,Z[dt]=ie}catch(di){Cs(w,w.return,di)}}case 5:if(ou(E,w),au(w),z&512&&(Ar||k===null||dc(k,k.return)),w.flags&32){Z=w.stateNode;try{bd(Z,"")}catch(di){Cs(w,w.return,di)}}z&4&&w.stateNode!=null&&(Z=w.memoizedProps,dU(w,Z,k!==null?k.memoizedProps:Z)),z&1024&&(rD=!0);break;case 6:if(ou(E,w),au(w),z&4){if(w.stateNode===null)throw Error(n(162));z=w.memoizedProps,k=w.stateNode;try{k.nodeValue=z}catch(di){Cs(w,w.return,di)}}break;case 3:if(GP=null,Z=dh,dh=qP(E.containerInfo),ou(E,w),dh=Z,au(w),z&4&&k!==null&&k.memoizedState.isDehydrated)try{Vw(E.containerInfo)}catch(di){Cs(w,w.return,di)}rD&&(rD=!1,xU(w));break;case 4:z=dh,dh=qP(w.stateNode.containerInfo),ou(E,w),au(w),dh=z;break;case 12:ou(E,w),au(w);break;case 13:ou(E,w),au(w),w.child.flags&8192&&w.memoizedState!==null!=(k!==null&&k.memoizedState!==null)&&(mD=Ji()),z&4&&(z=w.updateQueue,z!==null&&(w.updateQueue=null,oD(w,z)));break;case 22:if(z&512&&(Ar||k===null||dc(k,k.return)),qe=w.memoizedState!==null,We=k!==null&&k.memoizedState!==null,yt=Qf,At=Ar,Qf=yt||qe,Ar=At||We,ou(E,w),Ar=At,Qf=yt,au(w),E=w.stateNode,E._current=w,E._visibility&=-3,E._visibility|=E._pendingVisibility&2,z&8192&&(E._visibility=qe?E._visibility&-2:E._visibility|1,qe&&(E=Qf||Ar,k===null||We||E||x_(w)),w.memoizedProps===null||w.memoizedProps.mode!=="manual"))e:for(k=null,E=w;;){if(E.tag===5||E.tag===26||E.tag===27){if(k===null){We=k=E;try{if(Z=We.stateNode,qe)ie=Z.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{_e=We.stateNode,ke=We.memoizedProps.style;var gt=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;_e.style.display=gt==null||typeof gt=="boolean"?"":(""+gt).trim()}}catch(di){Cs(We,We.return,di)}}}else if(E.tag===6){if(k===null){We=E;try{We.stateNode.nodeValue=qe?"":We.memoizedProps}catch(di){Cs(We,We.return,di)}}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===w)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===w)break e;for(;E.sibling===null;){if(E.return===null||E.return===w)break e;k===E&&(k=null),E=E.return}k===E&&(k=null),E.sibling.return=E.return,E=E.sibling}z&4&&(z=w.updateQueue,z!==null&&(k=z.retryQueue,k!==null&&(z.retryQueue=null,oD(w,k))));break;case 19:ou(E,w),au(w),z&4&&(z=w.updateQueue,z!==null&&(w.updateQueue=null,oD(w,z)));break;case 21:break;default:ou(E,w),au(w)}}function au(w){var E=w.flags;if(E&2){try{if(w.tag!==27){e:{for(var k=w.return;k!==null;){if(fU(k)){var z=k;break e}k=k.return}throw Error(n(160))}switch(z.tag){case 27:var Z=z.stateNode,ie=nD(w);CP(w,ie,Z);break;case 5:var _e=z.stateNode;z.flags&32&&(bd(_e,""),z.flags&=-33);var ke=nD(w);CP(w,ke,_e);break;case 3:case 4:var qe=z.stateNode.containerInfo,We=nD(w);sD(w,We,qe);break;default:throw Error(n(161))}}}catch(yt){Cs(w,w.return,yt)}w.flags&=-3}E&4096&&(w.flags&=-4097)}function xU(w){if(w.subtreeFlags&1024)for(w=w.child;w!==null;){var E=w;xU(E),E.tag===5&&E.flags&1024&&E.stateNode.reset(),w=w.sibling}}function tp(w,E){if(E.subtreeFlags&8772)for(E=E.child;E!==null;)gU(w,E.alternate,E),E=E.sibling}function x_(w){for(w=w.child;w!==null;){var E=w;switch(E.tag){case 0:case 11:case 14:case 15:Wm(4,E,E.return),x_(E);break;case 1:dc(E,E.return);var k=E.stateNode;typeof k.componentWillUnmount=="function"&&uU(E,E.return,k),x_(E);break;case 26:case 27:case 5:dc(E,E.return),x_(E);break;case 22:dc(E,E.return),E.memoizedState===null&&x_(E);break;default:x_(E)}w=w.sibling}}function Zm(w,E,k){for(k=k&&(E.subtreeFlags&8772)!==0,E=E.child;E!==null;){var z=E.alternate,Z=w,ie=E,_e=ie.flags;switch(ie.tag){case 0:case 11:case 15:Zm(Z,ie,k),Sw(4,ie);break;case 1:if(Zm(Z,ie,k),z=ie,Z=z.stateNode,typeof Z.componentDidMount=="function")try{Z.componentDidMount()}catch(We){Cs(z,z.return,We)}if(z=ie,Z=z.updateQueue,Z!==null){var ke=z.stateNode;try{var qe=Z.shared.hiddenCallbacks;if(qe!==null)for(Z.shared.hiddenCallbacks=null,Z=0;Z<qe.length;Z++)aU(qe[Z],ke)}catch(We){Cs(z,z.return,We)}}k&&_e&64&&cU(ie),I1(ie,ie.return);break;case 26:case 27:case 5:Zm(Z,ie,k),k&&z===null&&_e&4&&hU(ie),I1(ie,ie.return);break;case 12:Zm(Z,ie,k);break;case 13:Zm(Z,ie,k),k&&_e&4&&_U(Z,ie);break;case 22:ie.memoizedState===null&&Zm(Z,ie,k),I1(ie,ie.return);break;default:Zm(Z,ie,k)}E=E.sibling}}function aD(w,E){var k=null;w!==null&&w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(k=w.memoizedState.cachePool.pool),w=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(w=E.memoizedState.cachePool.pool),w!==k&&(w!=null&&w.refCount++,k!=null&&fw(k))}function lD(w,E){w=null,E.alternate!==null&&(w=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==w&&(E.refCount++,w!=null&&fw(w))}function Km(w,E,k,z){if(E.subtreeFlags&10256)for(E=E.child;E!==null;)wU(w,E,k,z),E=E.sibling}function wU(w,E,k,z){var Z=E.flags;switch(E.tag){case 0:case 11:case 15:Km(w,E,k,z),Z&2048&&Sw(9,E);break;case 3:Km(w,E,k,z),Z&2048&&(w=null,E.alternate!==null&&(w=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==w&&(E.refCount++,w!=null&&fw(w)));break;case 12:if(Z&2048){Km(w,E,k,z),w=E.stateNode;try{var ie=E.memoizedProps,_e=ie.id,ke=ie.onPostCommit;typeof ke=="function"&&ke(_e,E.alternate===null?"mount":"update",w.passiveEffectDuration,-0)}catch(qe){Cs(E,E.return,qe)}}else Km(w,E,k,z);break;case 23:break;case 22:ie=E.stateNode,E.memoizedState!==null?ie._visibility&4?Km(w,E,k,z):Ew(w,E):ie._visibility&4?Km(w,E,k,z):(ie._visibility|=4,w_(w,E,k,z,(E.subtreeFlags&10256)!==0)),Z&2048&&aD(E.alternate,E);break;case 24:Km(w,E,k,z),Z&2048&&lD(E.alternate,E);break;default:Km(w,E,k,z)}}function w_(w,E,k,z,Z){for(Z=Z&&(E.subtreeFlags&10256)!==0,E=E.child;E!==null;){var ie=w,_e=E,ke=k,qe=z,We=_e.flags;switch(_e.tag){case 0:case 11:case 15:w_(ie,_e,ke,qe,Z),Sw(8,_e);break;case 23:break;case 22:var yt=_e.stateNode;_e.memoizedState!==null?yt._visibility&4?w_(ie,_e,ke,qe,Z):Ew(ie,_e):(yt._visibility|=4,w_(ie,_e,ke,qe,Z)),Z&&We&2048&&aD(_e.alternate,_e);break;case 24:w_(ie,_e,ke,qe,Z),Z&&We&2048&&lD(_e.alternate,_e);break;default:w_(ie,_e,ke,qe,Z)}E=E.sibling}}function Ew(w,E){if(E.subtreeFlags&10256)for(E=E.child;E!==null;){var k=w,z=E,Z=z.flags;switch(z.tag){case 22:Ew(k,z),Z&2048&&aD(z.alternate,z);break;case 24:Ew(k,z),Z&2048&&lD(z.alternate,z);break;default:Ew(k,z)}E=E.sibling}}var Cw=8192;function S_(w){if(w.subtreeFlags&Cw)for(w=w.child;w!==null;)SU(w),w=w.sibling}function SU(w){switch(w.tag){case 26:S_(w),w.flags&Cw&&w.memoizedState!==null&&Z_e(dh,w.memoizedState,w.memoizedProps);break;case 5:S_(w);break;case 3:case 4:var E=dh;dh=qP(w.stateNode.containerInfo),S_(w),dh=E;break;case 22:w.memoizedState===null&&(E=w.alternate,E!==null&&E.memoizedState!==null?(E=Cw,Cw=16777216,S_(w),Cw=E):S_(w));break;default:S_(w)}}function EU(w){var E=w.alternate;if(E!==null&&(w=E.child,w!==null)){E.child=null;do E=w.sibling,w.sibling=null,w=E;while(w!==null)}}function Pw(w){var E=w.deletions;if((w.flags&16)!==0){if(E!==null)for(var k=0;k<E.length;k++){var z=E[k];ko=z,PU(z,w)}EU(w)}if(w.subtreeFlags&10256)for(w=w.child;w!==null;)CU(w),w=w.sibling}function CU(w){switch(w.tag){case 0:case 11:case 15:Pw(w),w.flags&2048&&Wm(9,w,w.return);break;case 3:Pw(w);break;case 12:Pw(w);break;case 22:var E=w.stateNode;w.memoizedState!==null&&E._visibility&4&&(w.return===null||w.return.tag!==13)?(E._visibility&=-5,PP(w)):Pw(w);break;default:Pw(w)}}function PP(w){var E=w.deletions;if((w.flags&16)!==0){if(E!==null)for(var k=0;k<E.length;k++){var z=E[k];ko=z,PU(z,w)}EU(w)}for(w=w.child;w!==null;){switch(E=w,E.tag){case 0:case 11:case 15:Wm(8,E,E.return),PP(E);break;case 22:k=E.stateNode,k._visibility&4&&(k._visibility&=-5,PP(E));break;default:PP(E)}w=w.sibling}}function PU(w,E){for(;ko!==null;){var k=ko;switch(k.tag){case 0:case 11:case 15:Wm(8,k,E);break;case 23:case 22:if(k.memoizedState!==null&&k.memoizedState.cachePool!==null){var z=k.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:fw(k.memoizedState.cache)}if(z=k.child,z!==null)z.return=k,ko=z;else e:for(k=w;ko!==null;){z=ko;var Z=z.sibling,ie=z.return;if(yU(z),z===k){ko=null;break e}if(Z!==null){Z.return=ie,ko=Z;break e}ko=ie}}}function c_e(w,E,k,z){this.tag=w,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lu(w,E,k,z){return new c_e(w,E,k,z)}function cD(w){return w=w.prototype,!(!w||!w.isReactComponent)}function Jm(w,E){var k=w.alternate;return k===null?(k=lu(w.tag,E,w.key,w.mode),k.elementType=w.elementType,k.type=w.type,k.stateNode=w.stateNode,k.alternate=w,w.alternate=k):(k.pendingProps=E,k.type=w.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=w.flags&31457280,k.childLanes=w.childLanes,k.lanes=w.lanes,k.child=w.child,k.memoizedProps=w.memoizedProps,k.memoizedState=w.memoizedState,k.updateQueue=w.updateQueue,E=w.dependencies,k.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},k.sibling=w.sibling,k.index=w.index,k.ref=w.ref,k.refCleanup=w.refCleanup,k}function TU(w,E){w.flags&=31457282;var k=w.alternate;return k===null?(w.childLanes=0,w.lanes=E,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=k.childLanes,w.lanes=k.lanes,w.child=k.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=k.memoizedProps,w.memoizedState=k.memoizedState,w.updateQueue=k.updateQueue,w.type=k.type,E=k.dependencies,w.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),w}function TP(w,E,k,z,Z,ie){var _e=0;if(z=w,typeof w=="function")cD(w)&&(_e=1);else if(typeof w=="string")_e=X_e(w,k,hn.current)?26:w==="html"||w==="head"||w==="body"?27:5;else e:switch(w){case c:return M1(k.children,Z,ie,E);case f:_e=8,Z|=24;break;case y:return w=lu(12,k,E,Z|2),w.elementType=y,w.lanes=ie,w;case A:return w=lu(13,k,E,Z),w.elementType=A,w.lanes=ie,w;case D:return w=lu(19,k,E,Z),w.elementType=D,w.lanes=ie,w;case G:return IU(k,Z,ie,E);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case _:case S:_e=10;break e;case x:_e=9;break e;case P:_e=11;break e;case N:_e=14;break e;case F:_e=16,z=null;break e}_e=29,k=Error(n(130,w===null?"null":typeof w,"")),z=null}return E=lu(_e,k,E,Z),E.elementType=w,E.type=z,E.lanes=ie,E}function M1(w,E,k,z){return w=lu(7,w,z,E),w.lanes=k,w}function IU(w,E,k,z){w=lu(22,w,z,E),w.elementType=G,w.lanes=k;var Z={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var ie=Z._current;if(ie===null)throw Error(n(456));if((Z._pendingVisibility&2)===0){var _e=qm(ie,2);_e!==null&&(Z._pendingVisibility|=2,ll(_e,ie,2))}},attach:function(){var ie=Z._current;if(ie===null)throw Error(n(456));if((Z._pendingVisibility&2)!==0){var _e=qm(ie,2);_e!==null&&(Z._pendingVisibility&=-3,ll(_e,ie,2))}}};return w.stateNode=Z,w}function uD(w,E,k){return w=lu(6,w,null,E),w.lanes=k,w}function hD(w,E,k){return E=lu(4,w.children!==null?w.children:[],w.key,E),E.lanes=k,E.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},E}function ip(w){w.flags|=4}function MU(w,E){if(E.type!=="stylesheet"||(E.state.loading&4)!==0)w.flags&=-16777217;else if(w.flags|=16777216,!fY(E)){if(E=ru.current,E!==null&&((Mn&4194176)===Mn?Sd!==null:(Mn&62914560)!==Mn&&(Mn&536870912)===0||E!==Sd))throw uw=gk,UB;w.flags|=8192}}function IP(w,E){E!==null&&(w.flags|=4),w.flags&16384&&(E=w.tag!==22?ee():536870912,w.lanes|=E,C_|=E)}function Tw(w,E){if(!Ln)switch(w.tailMode){case"hidden":E=w.tail;for(var k=null;E!==null;)E.alternate!==null&&(k=E),E=E.sibling;k===null?w.tail=null:k.sibling=null;break;case"collapsed":k=w.tail;for(var z=null;k!==null;)k.alternate!==null&&(z=k),k=k.sibling;z===null?E||w.tail===null?w.tail=null:w.tail.sibling=null:z.sibling=null}}function mr(w){var E=w.alternate!==null&&w.alternate.child===w.child,k=0,z=0;if(E)for(var Z=w.child;Z!==null;)k|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags&31457280,z|=Z.flags&31457280,Z.return=w,Z=Z.sibling;else for(Z=w.child;Z!==null;)k|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags,z|=Z.flags,Z.return=w,Z=Z.sibling;return w.subtreeFlags|=z,w.childLanes=k,E}function u_e(w,E,k){var z=E.pendingProps;switch(pk(E),E.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(E),null;case 1:return mr(E),null;case 3:return k=E.stateNode,z=null,w!==null&&(z=w.memoizedState.cache),E.memoizedState.cache!==z&&(E.flags|=2048),Jf(go),sn(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(w===null||w.child===null)&&(ow(E)?ip(E):w===null||w.memoizedState.isDehydrated&&(E.flags&256)===0||(E.flags|=1024,hh!==null&&(_D(hh),hh=null))),mr(E),null;case 26:return k=E.memoizedState,w===null?(ip(E),k!==null?(mr(E),MU(E,k)):(mr(E),E.flags&=-16777217)):k?k!==w.memoizedState?(ip(E),mr(E),MU(E,k)):(mr(E),E.flags&=-16777217):(w.memoizedProps!==z&&ip(E),mr(E),E.flags&=-16777217),null;case 27:qi(E),k=Yn.current;var Z=E.type;if(w!==null&&E.stateNode!=null)w.memoizedProps!==z&&ip(E);else{if(!z){if(E.stateNode===null)throw Error(n(166));return mr(E),null}w=hn.current,ow(E)?BB(E):(w=rY(Z,z,k),E.stateNode=w,ip(E))}return mr(E),null;case 5:if(qi(E),k=E.type,w!==null&&E.stateNode!=null)w.memoizedProps!==z&&ip(E);else{if(!z){if(E.stateNode===null)throw Error(n(166));return mr(E),null}if(w=hn.current,ow(E))BB(E);else{switch(Z=zP(Yn.current),w){case 1:w=Z.createElementNS("http://www.w3.org/2000/svg",k);break;case 2:w=Z.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;default:switch(k){case"svg":w=Z.createElementNS("http://www.w3.org/2000/svg",k);break;case"math":w=Z.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;case"script":w=Z.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof z.is=="string"?Z.createElement("select",{is:z.is}):Z.createElement("select"),z.multiple?w.multiple=!0:z.size&&(w.size=z.size);break;default:w=typeof z.is=="string"?Z.createElement(k,{is:z.is}):Z.createElement(k)}}w[et]=E,w[dt]=z;e:for(Z=E.child;Z!==null;){if(Z.tag===5||Z.tag===6)w.appendChild(Z.stateNode);else if(Z.tag!==4&&Z.tag!==27&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===E)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===E)break e;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}E.stateNode=w;e:switch(oa(w,k,z),k){case"button":case"input":case"select":case"textarea":w=!!z.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&ip(E)}}return mr(E),E.flags&=-16777217,null;case 6:if(w&&E.stateNode!=null)w.memoizedProps!==z&&ip(E);else{if(typeof z!="string"&&E.stateNode===null)throw Error(n(166));if(w=Yn.current,ow(E)){if(w=E.stateNode,k=E.memoizedProps,z=null,Z=al,Z!==null)switch(Z.tag){case 27:case 5:z=Z.memoizedProps}w[et]=E,w=!!(w.nodeValue===k||z!==null&&z.suppressHydrationWarning===!0||QU(w.nodeValue,k)),w||_1(E)}else w=zP(w).createTextNode(z),w[et]=E,E.stateNode=w}return mr(E),null;case 13:if(z=E.memoizedState,w===null||w.memoizedState!==null&&w.memoizedState.dehydrated!==null){if(Z=ow(E),z!==null&&z.dehydrated!==null){if(w===null){if(!Z)throw Error(n(318));if(Z=E.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(n(317));Z[et]=E}else aw(),(E.flags&128)===0&&(E.memoizedState=null),E.flags|=4;mr(E),Z=!1}else hh!==null&&(_D(hh),hh=null),Z=!0;if(!Z)return E.flags&256?(Xf(E),E):(Xf(E),null)}if(Xf(E),(E.flags&128)!==0)return E.lanes=k,E;if(k=z!==null,w=w!==null&&w.memoizedState!==null,k){z=E.child,Z=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(Z=z.alternate.memoizedState.cachePool.pool);var ie=null;z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(ie=z.memoizedState.cachePool.pool),ie!==Z&&(z.flags|=2048)}return k!==w&&k&&(E.child.flags|=8192),IP(E,E.updateQueue),mr(E),null;case 4:return sn(),w===null&&AD(E.stateNode.containerInfo),mr(E),null;case 10:return Jf(E.type),mr(E),null;case 19:if(Nt(mo),Z=E.memoizedState,Z===null)return mr(E),null;if(z=(E.flags&128)!==0,ie=Z.rendering,ie===null)if(z)Tw(Z,!1);else{if(kr!==0||w!==null&&(w.flags&128)!==0)for(w=E.child;w!==null;){if(ie=hP(w),ie!==null){for(E.flags|=128,Tw(Z,!1),w=ie.updateQueue,E.updateQueue=w,IP(E,w),E.subtreeFlags=0,w=k,k=E.child;k!==null;)TU(k,w),k=k.sibling;return Wi(mo,mo.current&1|2),E.child}w=w.sibling}Z.tail!==null&&Ji()>MP&&(E.flags|=128,z=!0,Tw(Z,!1),E.lanes=4194304)}else{if(!z)if(w=hP(ie),w!==null){if(E.flags|=128,z=!0,w=w.updateQueue,E.updateQueue=w,IP(E,w),Tw(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ie.alternate&&!Ln)return mr(E),null}else 2*Ji()-Z.renderingStartTime>MP&&k!==536870912&&(E.flags|=128,z=!0,Tw(Z,!1),E.lanes=4194304);Z.isBackwards?(ie.sibling=E.child,E.child=ie):(w=Z.last,w!==null?w.sibling=ie:E.child=ie,Z.last=ie)}return Z.tail!==null?(E=Z.tail,Z.rendering=E,Z.tail=E.sibling,Z.renderingStartTime=Ji(),E.sibling=null,w=mo.current,Wi(mo,z?w&1|2:w&1),E):(mr(E),null);case 22:case 23:return Xf(E),vk(),z=E.memoizedState!==null,w!==null?w.memoizedState!==null!==z&&(E.flags|=8192):z&&(E.flags|=8192),z?(k&536870912)!==0&&(E.flags&128)===0&&(mr(E),E.subtreeFlags&6&&(E.flags|=8192)):mr(E),k=E.updateQueue,k!==null&&IP(E,k.retryQueue),k=null,w!==null&&w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(k=w.memoizedState.cachePool.pool),z=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(z=E.memoizedState.cachePool.pool),z!==k&&(E.flags|=2048),w!==null&&Nt(x1),null;case 24:return k=null,w!==null&&(k=w.memoizedState.cache),E.memoizedState.cache!==k&&(E.flags|=2048),Jf(go),mr(E),null;case 25:return null}throw Error(n(156,E.tag))}function h_e(w,E){switch(pk(E),E.tag){case 1:return w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 3:return Jf(go),sn(),w=E.flags,(w&65536)!==0&&(w&128)===0?(E.flags=w&-65537|128,E):null;case 26:case 27:case 5:return qi(E),null;case 13:if(Xf(E),w=E.memoizedState,w!==null&&w.dehydrated!==null){if(E.alternate===null)throw Error(n(340));aw()}return w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 19:return Nt(mo),null;case 4:return sn(),null;case 10:return Jf(E.type),null;case 22:case 23:return Xf(E),vk(),w!==null&&Nt(x1),w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 24:return Jf(go),null;case 25:return null;default:return null}}function AU(w,E){switch(pk(E),E.tag){case 3:Jf(go),sn();break;case 26:case 27:case 5:qi(E);break;case 4:sn();break;case 13:Xf(E);break;case 19:Nt(mo);break;case 10:Jf(E.type);break;case 22:case 23:Xf(E),vk(),w!==null&&Nt(x1);break;case 24:Jf(go)}}var d_e={getCacheForType:function(w){var E=Na(go),k=E.data.get(w);return k===void 0&&(k=w(),E.data.set(w,k)),k}},f_e=typeof WeakMap=="function"?WeakMap:Map,gr=0,$s=null,dn=null,Mn=0,Rs=0,pc=null,np=!1,E_=!1,dD=!1,sp=0,kr=0,Qm=0,A1=0,fD=0,cu=0,C_=0,Iw=null,Cd=null,pD=!1,mD=0,MP=1/0,AP=null,eg=null,kP=!1,k1=null,Mw=0,gD=0,yD=null,Aw=0,vD=null;function mc(){if((gr&2)!==0&&Mn!==0)return Mn&-Mn;if(ne.T!==null){var w=g_;return w!==0?w:PD()}return Ne()}function kU(){cu===0&&(cu=(Mn&536870912)===0||Ln?U():536870912);var w=ru.current;return w!==null&&(w.flags|=32),cu}function ll(w,E,k){(w===$s&&Rs===2||w.cancelPendingCommit!==null)&&(P_(w,0),rp(w,Mn,cu,!1)),ge(w,k),((gr&2)===0||w!==$s)&&(w===$s&&((gr&2)===0&&(A1|=k),kr===4&&rp(w,Mn,cu,!1)),Pd(w))}function DU(w,E,k){if((gr&6)!==0)throw Error(n(327));var z=!k&&(E&60)===0&&(E&w.expiredLanes)===0||L(w,E),Z=z?g_e(w,E):wD(w,E,!0),ie=z;do{if(Z===0){E_&&!z&&rp(w,E,0,!1);break}else if(Z===6)rp(w,E,0,!np);else{if(k=w.current.alternate,ie&&!p_e(k)){Z=wD(w,E,!1),ie=!1;continue}if(Z===2){if(ie=E,w.errorRecoveryDisabledLanes&ie)var _e=0;else _e=w.pendingLanes&-536870913,_e=_e!==0?_e:_e&536870912?536870912:0;if(_e!==0){E=_e;e:{var ke=w;Z=Iw;var qe=ke.current.memoizedState.isDehydrated;if(qe&&(P_(ke,_e).flags|=256),_e=wD(ke,_e,!1),_e!==2){if(dD&&!qe){ke.errorRecoveryDisabledLanes|=ie,A1|=ie,Z=4;break e}ie=Cd,Cd=Z,ie!==null&&_D(ie)}Z=_e}if(ie=!1,Z!==2)continue}}if(Z===1){P_(w,0),rp(w,E,0,!0);break}e:{switch(z=w,Z){case 0:case 1:throw Error(n(345));case 4:if((E&4194176)===E){rp(z,E,cu,!np);break e}break;case 2:Cd=null;break;case 3:case 5:break;default:throw Error(n(329))}if(z.finishedWork=k,z.finishedLanes=E,(E&62914560)===E&&(ie=mD+300-Ji(),10<ie)){if(rp(z,E,cu,!np),$(z,0)!==0)break e;z.timeoutHandle=iY(NU.bind(null,z,k,Cd,AP,pD,E,cu,A1,C_,np,2,-0,0),ie);break e}NU(z,k,Cd,AP,pD,E,cu,A1,C_,np,0,-0,0)}}break}while(!0);Pd(w)}function _D(w){Cd===null?Cd=w:Cd.push.apply(Cd,w)}function NU(w,E,k,z,Z,ie,_e,ke,qe,We,yt,At,at){var gt=E.subtreeFlags;if((gt&8192||(gt&16785408)===16785408)&&(Rw={stylesheets:null,count:0,unsuspend:W_e},SU(E),E=K_e(),E!==null)){w.cancelPendingCommit=E(qU.bind(null,w,k,z,Z,_e,ke,qe,1,At,at)),rp(w,ie,_e,!We);return}qU(w,k,z,Z,_e,ke,qe,yt,At,at)}function p_e(w){for(var E=w;;){var k=E.tag;if((k===0||k===11||k===15)&&E.flags&16384&&(k=E.updateQueue,k!==null&&(k=k.stores,k!==null)))for(var z=0;z<k.length;z++){var Z=k[z],ie=Z.getSnapshot;Z=Z.value;try{if(!Oe(ie(),Z))return!1}catch{return!1}}if(k=E.child,E.subtreeFlags&16384&&k!==null)k.return=E,E=k;else{if(E===w)break;for(;E.sibling===null;){if(E.return===null||E.return===w)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function rp(w,E,k,z){E&=~fD,E&=~A1,w.suspendedLanes|=E,w.pingedLanes&=~E,z&&(w.warmLanes|=E),z=w.expirationTimes;for(var Z=E;0<Z;){var ie=31-u(Z),_e=1<<ie;z[ie]=-1,Z&=~_e}k!==0&&fe(w,k,E)}function DP(){return(gr&6)===0?(kw(0),!1):!0}function bD(){if(dn!==null){if(Rs===0)var w=dn.return;else w=dn,Kf=P1=null,Pk(w),p_=null,hw=0,w=dn;for(;w!==null;)AU(w.alternate,w),w=w.return;dn=null}}function P_(w,E){w.finishedWork=null,w.finishedLanes=0;var k=w.timeoutHandle;k!==-1&&(w.timeoutHandle=-1,N_e(k)),k=w.cancelPendingCommit,k!==null&&(w.cancelPendingCommit=null,k()),bD(),$s=w,dn=k=Jm(w.current,null),Mn=E,Rs=0,pc=null,np=!1,E_=L(w,E),dD=!1,C_=cu=fD=A1=Qm=kr=0,Cd=Iw=null,pD=!1,(E&8)!==0&&(E|=E&32);var z=w.entangledLanes;if(z!==0)for(w=w.entanglements,z&=E;0<z;){var Z=31-u(z),ie=1<<Z;E|=w[Z],z&=~ie}return sp=E,iP(),k}function OU(w,E){on=null,ne.H=Ed,E===cw?(E=WB(),Rs=3):E===UB?(E=WB(),Rs=4):Rs=E===YH?8:E!==null&&typeof E=="object"&&typeof E.then=="function"?6:1,pc=E,dn===null&&(kr=1,wP(w,iu(E,w.current)))}function $U(){var w=ne.H;return ne.H=Ed,w===null?Ed:w}function RU(){var w=ne.A;return ne.A=d_e,w}function xD(){kr=4,np||(Mn&4194176)!==Mn&&ru.current!==null||(E_=!0),(Qm&134217727)===0&&(A1&134217727)===0||$s===null||rp($s,Mn,cu,!1)}function wD(w,E,k){var z=gr;gr|=2;var Z=$U(),ie=RU();($s!==w||Mn!==E)&&(AP=null,P_(w,E)),E=!1;var _e=kr;e:do try{if(Rs!==0&&dn!==null){var ke=dn,qe=pc;switch(Rs){case 8:bD(),_e=6;break e;case 3:case 2:case 6:ru.current===null&&(E=!0);var We=Rs;if(Rs=0,pc=null,T_(w,ke,qe,We),k&&E_){_e=0;break e}break;default:We=Rs,Rs=0,pc=null,T_(w,ke,qe,We)}}m_e(),_e=kr;break}catch(yt){OU(w,yt)}while(!0);return E&&w.shellSuspendCounter++,Kf=P1=null,gr=z,ne.H=Z,ne.A=ie,dn===null&&($s=null,Mn=0,iP()),_e}function m_e(){for(;dn!==null;)LU(dn)}function g_e(w,E){var k=gr;gr|=2;var z=$U(),Z=RU();$s!==w||Mn!==E?(AP=null,MP=Ji()+500,P_(w,E)):E_=L(w,E);e:do try{if(Rs!==0&&dn!==null){E=dn;var ie=pc;t:switch(Rs){case 1:Rs=0,pc=null,T_(w,E,ie,1);break;case 2:if(YB(ie)){Rs=0,pc=null,FU(E);break}E=function(){Rs===2&&$s===w&&(Rs=7),Pd(w)},ie.then(E,E);break e;case 3:Rs=7;break e;case 4:Rs=5;break e;case 7:YB(ie)?(Rs=0,pc=null,FU(E)):(Rs=0,pc=null,T_(w,E,ie,7));break;case 5:var _e=null;switch(dn.tag){case 26:_e=dn.memoizedState;case 5:case 27:var ke=dn;if(!_e||fY(_e)){Rs=0,pc=null;var qe=ke.sibling;if(qe!==null)dn=qe;else{var We=ke.return;We!==null?(dn=We,NP(We)):dn=null}break t}}Rs=0,pc=null,T_(w,E,ie,5);break;case 6:Rs=0,pc=null,T_(w,E,ie,6);break;case 8:bD(),kr=6;break e;default:throw Error(n(462))}}y_e();break}catch(yt){OU(w,yt)}while(!0);return Kf=P1=null,ne.H=z,ne.A=Z,gr=k,dn!==null?0:($s=null,Mn=0,iP(),kr)}function y_e(){for(;dn!==null&&!ms();)LU(dn)}function LU(w){var E=rU(w.alternate,w,sp);w.memoizedProps=w.pendingProps,E===null?NP(w):dn=E}function FU(w){var E=w,k=E.alternate;switch(E.tag){case 15:case 0:E=QH(k,E,E.pendingProps,E.type,void 0,Mn);break;case 11:E=QH(k,E,E.pendingProps,E.type.render,E.ref,Mn);break;case 5:Pk(E);default:AU(k,E),E=dn=TU(E,sp),E=rU(k,E,sp)}w.memoizedProps=w.pendingProps,E===null?NP(w):dn=E}function T_(w,E,k,z){Kf=P1=null,Pk(E),p_=null,hw=0;var Z=E.return;try{if(r_e(w,Z,E,k,Mn)){kr=1,wP(w,iu(k,w.current)),dn=null;return}}catch(ie){if(Z!==null)throw dn=Z,ie;kr=1,wP(w,iu(k,w.current)),dn=null;return}E.flags&32768?(Ln||z===1?w=!0:E_||(Mn&536870912)!==0?w=!1:(np=w=!0,(z===2||z===3||z===6)&&(z=ru.current,z!==null&&z.tag===13&&(z.flags|=16384))),zU(E,w)):NP(E)}function NP(w){var E=w;do{if((E.flags&32768)!==0){zU(E,np);return}w=E.return;var k=u_e(E.alternate,E,sp);if(k!==null){dn=k;return}if(E=E.sibling,E!==null){dn=E;return}dn=E=w}while(E!==null);kr===0&&(kr=5)}function zU(w,E){do{var k=h_e(w.alternate,w);if(k!==null){k.flags&=32767,dn=k;return}if(k=w.return,k!==null&&(k.flags|=32768,k.subtreeFlags=0,k.deletions=null),!E&&(w=w.sibling,w!==null)){dn=w;return}dn=w=k}while(w!==null);kr=6,dn=null}function qU(w,E,k,z,Z,ie,_e,ke,qe,We){var yt=ne.T,At=ot.p;try{ot.p=2,ne.T=null,v_e(w,E,k,z,At,Z,ie,_e,ke,qe,We)}finally{ne.T=yt,ot.p=At}}function v_e(w,E,k,z,Z,ie,_e,ke){do I_();while(k1!==null);if((gr&6)!==0)throw Error(n(327));var qe=w.finishedWork;if(z=w.finishedLanes,qe===null)return null;if(w.finishedWork=null,w.finishedLanes=0,qe===w.current)throw Error(n(177));w.callbackNode=null,w.callbackPriority=0,w.cancelPendingCommit=null;var We=qe.lanes|qe.childLanes;if(We|=hk,ve(w,z,We,ie,_e,ke),w===$s&&(dn=$s=null,Mn=0),(qe.subtreeFlags&10256)===0&&(qe.flags&10256)===0||kP||(kP=!0,gD=We,yD=k,w_e(Tn,function(){return I_(),null})),k=(qe.flags&15990)!==0,(qe.subtreeFlags&15990)!==0||k?(k=ne.T,ne.T=null,ie=ot.p,ot.p=2,_e=gr,gr|=4,a_e(w,qe),bU(qe,w),Lt(OD,w.containerInfo),HP=!!ND,OD=ND=null,w.current=qe,gU(w,qe.alternate,qe),gn(),gr=_e,ot.p=ie,ne.T=k):w.current=qe,kP?(kP=!1,k1=w,Mw=z):VU(w,We),We=w.pendingLanes,We===0&&(eg=null),h(qe.stateNode),Pd(w),E!==null)for(Z=w.onRecoverableError,qe=0;qe<E.length;qe++)We=E[qe],Z(We.value,{componentStack:We.stack});return(Mw&3)!==0&&I_(),We=w.pendingLanes,(z&4194218)!==0&&(We&42)!==0?w===vD?Aw++:(Aw=0,vD=w):Aw=0,kw(0),null}function VU(w,E){(w.pooledCacheLanes&=E)===0&&(E=w.pooledCache,E!=null&&(w.pooledCache=null,fw(E)))}function I_(){if(k1!==null){var w=k1,E=gD;gD=0;var k=Ie(Mw),z=ne.T,Z=ot.p;try{if(ot.p=32>k?32:k,ne.T=null,k1===null)var ie=!1;else{k=yD,yD=null;var _e=k1,ke=Mw;if(k1=null,Mw=0,(gr&6)!==0)throw Error(n(331));var qe=gr;if(gr|=4,CU(_e.current),wU(_e,_e.current,ke,k),gr=qe,kw(0,!1),p&&typeof p.onPostCommitFiberRoot=="function")try{p.onPostCommitFiberRoot(T,_e)}catch{}ie=!0}return ie}finally{ot.p=Z,ne.T=z,VU(w,E)}}return!1}function GU(w,E,k){E=iu(k,E),E=qk(w.stateNode,E,2),w=Xm(w,E,2),w!==null&&(ge(w,2),Pd(w))}function Cs(w,E,k){if(w.tag===3)GU(w,w,k);else for(;E!==null;){if(E.tag===3){GU(E,w,k);break}else if(E.tag===1){var z=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(eg===null||!eg.has(z))){w=iu(k,w),k=HH(2),z=Xm(E,k,2),z!==null&&(UH(k,z,E,w),ge(z,2),Pd(z));break}}E=E.return}}function SD(w,E,k){var z=w.pingCache;if(z===null){z=w.pingCache=new f_e;var Z=new Set;z.set(E,Z)}else Z=z.get(E),Z===void 0&&(Z=new Set,z.set(E,Z));Z.has(k)||(dD=!0,Z.add(k),w=__e.bind(null,w,E,k),E.then(w,w))}function __e(w,E,k){var z=w.pingCache;z!==null&&z.delete(E),w.pingedLanes|=w.suspendedLanes&k,w.warmLanes&=~k,$s===w&&(Mn&k)===k&&(kr===4||kr===3&&(Mn&62914560)===Mn&&300>Ji()-mD?(gr&2)===0&&P_(w,0):fD|=k,C_===Mn&&(C_=0)),Pd(w)}function jU(w,E){E===0&&(E=ee()),w=qm(w,E),w!==null&&(ge(w,E),Pd(w))}function b_e(w){var E=w.memoizedState,k=0;E!==null&&(k=E.retryLane),jU(w,k)}function x_e(w,E){var k=0;switch(w.tag){case 13:var z=w.stateNode,Z=w.memoizedState;Z!==null&&(k=Z.retryLane);break;case 19:z=w.stateNode;break;case 22:z=w.stateNode._retryCache;break;default:throw Error(n(314))}z!==null&&z.delete(E),jU(w,k)}function w_e(w,E){return ri(w,E)}var OP=null,M_=null,ED=!1,$P=!1,CD=!1,D1=0;function Pd(w){w!==M_&&w.next===null&&(M_===null?OP=M_=w:M_=M_.next=w),$P=!0,ED||(ED=!0,E_e(S_e))}function kw(w,E){if(!CD&&$P){CD=!0;do for(var k=!1,z=OP;z!==null;){if(w!==0){var Z=z.pendingLanes;if(Z===0)var ie=0;else{var _e=z.suspendedLanes,ke=z.pingedLanes;ie=(1<<31-u(42|w)+1)-1,ie&=Z&~(_e&~ke),ie=ie&201326677?ie&201326677|1:ie?ie|2:0}ie!==0&&(k=!0,UU(z,ie))}else ie=Mn,ie=$(z,z===$s?ie:0),(ie&3)===0||L(z,ie)||(k=!0,UU(z,ie));z=z.next}while(k);CD=!1}}function S_e(){$P=ED=!1;var w=0;D1!==0&&(D_e()&&(w=D1),D1=0);for(var E=Ji(),k=null,z=OP;z!==null;){var Z=z.next,ie=BU(z,E);ie===0?(z.next=null,k===null?OP=Z:k.next=Z,Z===null&&(M_=k)):(k=z,(w!==0||(ie&3)!==0)&&($P=!0)),z=Z}kw(w)}function BU(w,E){for(var k=w.suspendedLanes,z=w.pingedLanes,Z=w.expirationTimes,ie=w.pendingLanes&-62914561;0<ie;){var _e=31-u(ie),ke=1<<_e,qe=Z[_e];qe===-1?((ke&k)===0||(ke&z)!==0)&&(Z[_e]=q(ke,E)):qe<=E&&(w.expiredLanes|=ke),ie&=~ke}if(E=$s,k=Mn,k=$(w,w===E?k:0),z=w.callbackNode,k===0||w===E&&Rs===2||w.cancelPendingCommit!==null)return z!==null&&z!==null&&Ai(z),w.callbackNode=null,w.callbackPriority=0;if((k&3)===0||L(w,k)){if(E=k&-k,E===w.callbackPriority)return E;switch(z!==null&&Ai(z),Ie(k)){case 2:case 8:k=Wr;break;case 32:k=Tn;break;case 268435456:k=Xn;break;default:k=Tn}return z=HU.bind(null,w),k=ri(k,z),w.callbackPriority=E,w.callbackNode=k,E}return z!==null&&z!==null&&Ai(z),w.callbackPriority=2,w.callbackNode=null,2}function HU(w,E){var k=w.callbackNode;if(I_()&&w.callbackNode!==k)return null;var z=Mn;return z=$(w,w===$s?z:0),z===0?null:(DU(w,z,E),BU(w,Ji()),w.callbackNode!=null&&w.callbackNode===k?HU.bind(null,w):null)}function UU(w,E){if(I_())return null;DU(w,E,!0)}function E_e(w){O_e(function(){(gr&6)!==0?ri(gs,w):w()})}function PD(){return D1===0&&(D1=U()),D1}function YU(w){return w==null||typeof w=="symbol"||typeof w=="boolean"?null:typeof w=="function"?w:o1(""+w)}function XU(w,E){var k=E.ownerDocument.createElement("input");return k.name=E.name,k.value=E.value,w.id&&k.setAttribute("form",w.id),E.parentNode.insertBefore(k,E),w=new FormData(w),k.parentNode.removeChild(k),w}function C_e(w,E,k,z,Z){if(E==="submit"&&k&&k.stateNode===Z){var ie=YU((Z[dt]||null).action),_e=z.submitter;_e&&(E=(E=_e[dt]||null)?YU(E.formAction):_e.getAttribute("formAction"),E!==null&&(ie=E,_e=null));var ke=new Rm("action","action",null,z,Z);w.push({event:ke,listeners:[{instance:null,listener:function(){if(z.defaultPrevented){if(D1!==0){var qe=_e?XU(Z,_e):new FormData(Z);$k(k,{pending:!0,data:qe,method:Z.method,action:ie},null,qe)}}else typeof ie=="function"&&(ke.preventDefault(),qe=_e?XU(Z,_e):new FormData(Z),$k(k,{pending:!0,data:qe,method:Z.method,action:ie},ie,qe))},currentTarget:Z}]})}}for(var TD=0;TD<qB.length;TD++){var ID=qB[TD],P_e=ID.toLowerCase(),T_e=ID[0].toUpperCase()+ID.slice(1);uh(P_e,"on"+T_e)}uh(eu,"onAnimationEnd"),uh(g1,"onAnimationIteration"),uh(zm,"onAnimationStart"),uh("dblclick","onDoubleClick"),uh("focusin","onFocus"),uh("focusout","onBlur"),uh(Bve,"onTransitionRun"),uh(Hve,"onTransitionStart"),uh(Uve,"onTransitionCancel"),uh(FB,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I_e=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dw));function WU(w,E){E=(E&4)!==0;for(var k=0;k<w.length;k++){var z=w[k],Z=z.event;z=z.listeners;e:{var ie=void 0;if(E)for(var _e=z.length-1;0<=_e;_e--){var ke=z[_e],qe=ke.instance,We=ke.currentTarget;if(ke=ke.listener,qe!==ie&&Z.isPropagationStopped())break e;ie=ke,Z.currentTarget=We;try{ie(Z)}catch(yt){xP(yt)}Z.currentTarget=null,ie=qe}else for(_e=0;_e<z.length;_e++){if(ke=z[_e],qe=ke.instance,We=ke.currentTarget,ke=ke.listener,qe!==ie&&Z.isPropagationStopped())break e;ie=ke,Z.currentTarget=We;try{ie(Z)}catch(yt){xP(yt)}Z.currentTarget=null,ie=qe}}}}function wn(w,E){var k=E[mt];k===void 0&&(k=E[mt]=new Set);var z=w+"__bubble";k.has(z)||(ZU(E,w,2,!1),k.add(z))}function MD(w,E,k){var z=0;E&&(z|=4),ZU(k,w,z,E)}var RP="_reactListening"+Math.random().toString(36).slice(2);function AD(w){if(!w[RP]){w[RP]=!0,Wn.forEach(function(k){k!=="selectionchange"&&(I_e.has(k)||MD(k,!1,w),MD(k,!0,w))});var E=w.nodeType===9?w:w.ownerDocument;E===null||E[RP]||(E[RP]=!0,MD("selectionchange",!1,E))}}function ZU(w,E,k,z){switch(_Y(E)){case 2:var Z=ebe;break;case 8:Z=tbe;break;default:Z=jD}k=Z.bind(null,E,k,w),Z=void 0,!e_||E!=="touchstart"&&E!=="touchmove"&&E!=="wheel"||(Z=!0),z?Z!==void 0?w.addEventListener(E,k,{capture:!0,passive:Z}):w.addEventListener(E,k,!0):Z!==void 0?w.addEventListener(E,k,{passive:Z}):w.addEventListener(E,k,!1)}function kD(w,E,k,z,Z){var ie=z;if((E&1)===0&&(E&2)===0&&z!==null)e:for(;;){if(z===null)return;var _e=z.tag;if(_e===3||_e===4){var ke=z.stateNode.containerInfo;if(ke===Z||ke.nodeType===8&&ke.parentNode===Z)break;if(_e===4)for(_e=z.return;_e!==null;){var qe=_e.tag;if((qe===3||qe===4)&&(qe=_e.stateNode.containerInfo,qe===Z||qe.nodeType===8&&qe.parentNode===Z))return;_e=_e.return}for(;ke!==null;){if(_e=xn(ke),_e===null)return;if(qe=_e.tag,qe===5||qe===6||qe===26||qe===27){z=ie=_e;continue e}ke=ke.parentNode}}z=z.return}q5(function(){var We=ie,yt=a1(k),At=[];e:{var at=zB.get(w);if(at!==void 0){var gt=Rm,di=w;switch(w){case"keypress":if(jf(k)===0)break e;case"keydown":case"keyup":gt=o_;break;case"focusin":di="focus",gt=r_;break;case"focusout":di="blur",gt=r_;break;case"beforeblur":case"afterblur":gt=r_;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=G5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=W7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Y5;break;case eu:case g1:case zm:gt=Z7;break;case FB:gt=sk;break;case"scroll":case"scrollend":gt=V5;break;case"wheel":gt=ok;break;case"copy":case"cut":case"paste":gt=J7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=tw;break;case"toggle":case"beforetoggle":gt=lk}var Bi=(E&4)!==0,Dr=!Bi&&(w==="scroll"||w==="scrollend"),tt=Bi?at!==null?at+"Capture":null:at;Bi=[];for(var Ye=We,nt;Ye!==null;){var Ct=Ye;if(nt=Ct.stateNode,Ct=Ct.tag,Ct!==5&&Ct!==26&&Ct!==27||nt===null||tt===null||(Ct=Om(Ye,tt),Ct!=null&&Bi.push(Nw(Ye,Ct,nt))),Dr)break;Ye=Ye.return}0<Bi.length&&(at=new gt(at,di,null,k,yt),At.push({event:at,listeners:Bi}))}}if((E&7)===0){e:{if(at=w==="mouseover"||w==="pointerover",gt=w==="mouseout"||w==="pointerout",at&&k!==Qx&&(di=k.relatedTarget||k.fromElement)&&(xn(di)||di[ct]))break e;if((gt||at)&&(at=yt.window===yt?yt:(at=yt.ownerDocument)?at.defaultView||at.parentWindow:window,gt?(di=k.relatedTarget||k.toElement,gt=We,di=di?xn(di):null,di!==null&&(Dr=Re(di),Bi=di.tag,di!==Dr||Bi!==5&&Bi!==27&&Bi!==6)&&(di=null)):(gt=null,di=We),gt!==di)){if(Bi=G5,Ct="onMouseLeave",tt="onMouseEnter",Ye="mouse",(w==="pointerout"||w==="pointerover")&&(Bi=tw,Ct="onPointerLeave",tt="onPointerEnter",Ye="pointer"),Dr=gt==null?at:Oi(gt),nt=di==null?at:Oi(di),at=new Bi(Ct,Ye+"leave",gt,k,yt),at.target=Dr,at.relatedTarget=nt,Ct=null,xn(yt)===We&&(Bi=new Bi(tt,Ye+"enter",di,k,yt),Bi.target=nt,Bi.relatedTarget=Dr,Ct=Bi),Dr=Ct,gt&&di)t:{for(Bi=gt,tt=di,Ye=0,nt=Bi;nt;nt=A_(nt))Ye++;for(nt=0,Ct=tt;Ct;Ct=A_(Ct))nt++;for(;0<Ye-nt;)Bi=A_(Bi),Ye--;for(;0<nt-Ye;)tt=A_(tt),nt--;for(;Ye--;){if(Bi===tt||tt!==null&&Bi===tt.alternate)break t;Bi=A_(Bi),tt=A_(tt)}Bi=null}else Bi=null;gt!==null&&KU(At,at,gt,Bi,!1),di!==null&&Dr!==null&&KU(At,Dr,di,Bi,!0)}}e:{if(at=We?Oi(We):window,gt=at.nodeName&&at.nodeName.toLowerCase(),gt==="select"||gt==="input"&&at.type==="file")var ti=eP;else if(J5(at))if(tP)ti=Te;else{ti=he;var cn=le}else gt=at.nodeName,!gt||gt.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?We&&Jx(We.elementType)&&(ti=eP):ti=be;if(ti&&(ti=ti(w,We))){Q5(At,ti,k,yt);break e}cn&&cn(w,at,We),w==="focusout"&&We&&at.type==="number"&&We.memoizedProps.value!=null&&Vf(at,"number",at.value)}switch(cn=We?Oi(We):window,w){case"focusin":(J5(cn)||cn.contentEditable==="true")&&(Gt=cn,ai=We,Ii=null);break;case"focusout":Ii=ai=Gt=null;break;case"mousedown":en=!0;break;case"contextmenu":case"mouseup":case"dragend":en=!1,Si(At,k,yt);break;case"selectionchange":if(Xt)break;case"keydown":case"keyup":Si(At,k,yt)}var yi;if(d1)e:{switch(w){case"compositionstart":var Ci="onCompositionStart";break e;case"compositionend":Ci="onCompositionEnd";break e;case"compositionupdate":Ci="onCompositionUpdate";break e}Ci=void 0}else Qc?Z5(w,k)&&(Ci="onCompositionEnd"):w==="keydown"&&k.keyCode===229&&(Ci="onCompositionStart");Ci&&(X5&&k.locale!=="ko"&&(Qc||Ci!=="onCompositionStart"?Ci==="onCompositionEnd"&&Qc&&(yi=$m()):(ch=yt,t_="value"in ch?ch.value:ch.textContent,Qc=!0)),cn=LP(We,Ci),0<cn.length&&(Ci=new B5(Ci,w,null,k,yt),At.push({event:Ci,listeners:cn}),yi?Ci.data=yi:(yi=iw(k),yi!==null&&(Ci.data=yi)))),(yi=a_?xd(w,k):K5(w,k))&&(Ci=LP(We,"onBeforeInput"),0<Ci.length&&(cn=new B5("onBeforeInput","beforeinput",null,k,yt),At.push({event:cn,listeners:Ci}),cn.data=yi)),C_e(At,w,We,k,yt)}WU(At,E)})}function Nw(w,E,k){return{instance:w,listener:E,currentTarget:k}}function LP(w,E){for(var k=E+"Capture",z=[];w!==null;){var Z=w,ie=Z.stateNode;Z=Z.tag,Z!==5&&Z!==26&&Z!==27||ie===null||(Z=Om(w,k),Z!=null&&z.unshift(Nw(w,Z,ie)),Z=Om(w,E),Z!=null&&z.push(Nw(w,Z,ie))),w=w.return}return z}function A_(w){if(w===null)return null;do w=w.return;while(w&&w.tag!==5&&w.tag!==27);return w||null}function KU(w,E,k,z,Z){for(var ie=E._reactName,_e=[];k!==null&&k!==z;){var ke=k,qe=ke.alternate,We=ke.stateNode;if(ke=ke.tag,qe!==null&&qe===z)break;ke!==5&&ke!==26&&ke!==27||We===null||(qe=We,Z?(We=Om(k,ie),We!=null&&_e.unshift(Nw(k,We,qe))):Z||(We=Om(k,ie),We!=null&&_e.push(Nw(k,We,qe)))),k=k.return}_e.length!==0&&w.push({event:E,listeners:_e})}var M_e=/\r\n?/g,A_e=/\u0000|\uFFFD/g;function JU(w){return(typeof w=="string"?w:""+w).replace(M_e,`
`).replace(A_e,"")}function QU(w,E){return E=JU(E),JU(w)===E}function FP(){}function _s(w,E,k,z,Z,ie){switch(k){case"children":typeof z=="string"?E==="body"||E==="textarea"&&z===""||bd(w,z):(typeof z=="number"||typeof z=="bigint")&&E!=="body"&&bd(w,""+z);break;case"className":pt(w,"class",z);break;case"tabIndex":pt(w,"tabindex",z);break;case"dir":case"role":case"viewBox":case"width":case"height":pt(w,k,z);break;case"style":Kx(w,z,ie);break;case"data":if(E!=="object"){pt(w,"data",z);break}case"src":case"href":if(z===""&&(E!=="a"||k!=="href")){w.removeAttribute(k);break}if(z==null||typeof z=="function"||typeof z=="symbol"||typeof z=="boolean"){w.removeAttribute(k);break}z=o1(""+z),w.setAttribute(k,z);break;case"action":case"formAction":if(typeof z=="function"){w.setAttribute(k,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ie=="function"&&(k==="formAction"?(E!=="input"&&_s(w,E,"name",Z.name,Z,null),_s(w,E,"formEncType",Z.formEncType,Z,null),_s(w,E,"formMethod",Z.formMethod,Z,null),_s(w,E,"formTarget",Z.formTarget,Z,null)):(_s(w,E,"encType",Z.encType,Z,null),_s(w,E,"method",Z.method,Z,null),_s(w,E,"target",Z.target,Z,null)));if(z==null||typeof z=="symbol"||typeof z=="boolean"){w.removeAttribute(k);break}z=o1(""+z),w.setAttribute(k,z);break;case"onClick":z!=null&&(w.onclick=FP);break;case"onScroll":z!=null&&wn("scroll",w);break;case"onScrollEnd":z!=null&&wn("scrollend",w);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(n(61));if(k=z.__html,k!=null){if(Z.children!=null)throw Error(n(60));w.innerHTML=k}}break;case"multiple":w.multiple=z&&typeof z!="function"&&typeof z!="symbol";break;case"muted":w.muted=z&&typeof z!="function"&&typeof z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(z==null||typeof z=="function"||typeof z=="boolean"||typeof z=="symbol"){w.removeAttribute("xlink:href");break}k=o1(""+z),w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",k);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":z!=null&&typeof z!="function"&&typeof z!="symbol"?w.setAttribute(k,""+z):w.removeAttribute(k);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":z&&typeof z!="function"&&typeof z!="symbol"?w.setAttribute(k,""):w.removeAttribute(k);break;case"capture":case"download":z===!0?w.setAttribute(k,""):z!==!1&&z!=null&&typeof z!="function"&&typeof z!="symbol"?w.setAttribute(k,z):w.removeAttribute(k);break;case"cols":case"rows":case"size":case"span":z!=null&&typeof z!="function"&&typeof z!="symbol"&&!isNaN(z)&&1<=z?w.setAttribute(k,z):w.removeAttribute(k);break;case"rowSpan":case"start":z==null||typeof z=="function"||typeof z=="symbol"||isNaN(z)?w.removeAttribute(k):w.setAttribute(k,z);break;case"popover":wn("beforetoggle",w),wn("toggle",w),ze(w,"popover",z);break;case"xlinkActuate":Tt(w,"http://www.w3.org/1999/xlink","xlink:actuate",z);break;case"xlinkArcrole":Tt(w,"http://www.w3.org/1999/xlink","xlink:arcrole",z);break;case"xlinkRole":Tt(w,"http://www.w3.org/1999/xlink","xlink:role",z);break;case"xlinkShow":Tt(w,"http://www.w3.org/1999/xlink","xlink:show",z);break;case"xlinkTitle":Tt(w,"http://www.w3.org/1999/xlink","xlink:title",z);break;case"xlinkType":Tt(w,"http://www.w3.org/1999/xlink","xlink:type",z);break;case"xmlBase":Tt(w,"http://www.w3.org/XML/1998/namespace","xml:base",z);break;case"xmlLang":Tt(w,"http://www.w3.org/XML/1998/namespace","xml:lang",z);break;case"xmlSpace":Tt(w,"http://www.w3.org/XML/1998/namespace","xml:space",z);break;case"is":ze(w,"is",z);break;case"innerText":case"textContent":break;default:(!(2<k.length)||k[0]!=="o"&&k[0]!=="O"||k[1]!=="n"&&k[1]!=="N")&&(k=Y7.get(k)||k,ze(w,k,z))}}function DD(w,E,k,z,Z,ie){switch(k){case"style":Kx(w,z,ie);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(n(61));if(k=z.__html,k!=null){if(Z.children!=null)throw Error(n(60));w.innerHTML=k}}break;case"children":typeof z=="string"?bd(w,z):(typeof z=="number"||typeof z=="bigint")&&bd(w,""+z);break;case"onScroll":z!=null&&wn("scroll",w);break;case"onScrollEnd":z!=null&&wn("scrollend",w);break;case"onClick":z!=null&&(w.onclick=FP);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!In.hasOwnProperty(k))e:{if(k[0]==="o"&&k[1]==="n"&&(Z=k.endsWith("Capture"),E=k.slice(2,Z?k.length-7:void 0),ie=w[dt]||null,ie=ie!=null?ie[k]:null,typeof ie=="function"&&w.removeEventListener(E,ie,Z),typeof z=="function")){typeof ie!="function"&&ie!==null&&(k in w?w[k]=null:w.hasAttribute(k)&&w.removeAttribute(k)),w.addEventListener(E,z,Z);break e}k in w?w[k]=z:z===!0?w.setAttribute(k,""):ze(w,k,z)}}}function oa(w,E,k){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",w),wn("load",w);var z=!1,Z=!1,ie;for(ie in k)if(k.hasOwnProperty(ie)){var _e=k[ie];if(_e!=null)switch(ie){case"src":z=!0;break;case"srcSet":Z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,E));default:_s(w,E,ie,_e,k,null)}}Z&&_s(w,E,"srcSet",k.srcSet,k,null),z&&_s(w,E,"src",k.src,k,null);return;case"input":wn("invalid",w);var ke=ie=_e=Z=null,qe=null,We=null;for(z in k)if(k.hasOwnProperty(z)){var yt=k[z];if(yt!=null)switch(z){case"name":Z=yt;break;case"type":_e=yt;break;case"checked":qe=yt;break;case"defaultChecked":We=yt;break;case"value":ie=yt;break;case"defaultValue":ke=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(n(137,E));break;default:_s(w,E,z,yt,k,null)}}lh(w,ie,ke,qe,We,_e,Z,!1),Os(w);return;case"select":wn("invalid",w),z=_e=ie=null;for(Z in k)if(k.hasOwnProperty(Z)&&(ke=k[Z],ke!=null))switch(Z){case"value":ie=ke;break;case"defaultValue":_e=ke;break;case"multiple":z=ke;default:_s(w,E,Z,ke,k,null)}E=ie,k=_e,w.multiple=!!z,E!=null?km(w,!!z,E,!1):k!=null&&km(w,!!z,k,!0);return;case"textarea":wn("invalid",w),ie=Z=z=null;for(_e in k)if(k.hasOwnProperty(_e)&&(ke=k[_e],ke!=null))switch(_e){case"value":z=ke;break;case"defaultValue":Z=ke;break;case"children":ie=ke;break;case"dangerouslySetInnerHTML":if(ke!=null)throw Error(n(91));break;default:_s(w,E,_e,ke,k,null)}Zx(w,z,Z,ie),Os(w);return;case"option":for(qe in k)if(k.hasOwnProperty(qe)&&(z=k[qe],z!=null))switch(qe){case"selected":w.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:_s(w,E,qe,z,k,null)}return;case"dialog":wn("cancel",w),wn("close",w);break;case"iframe":case"object":wn("load",w);break;case"video":case"audio":for(z=0;z<Dw.length;z++)wn(Dw[z],w);break;case"image":wn("error",w),wn("load",w);break;case"details":wn("toggle",w);break;case"embed":case"source":case"link":wn("error",w),wn("load",w);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in k)if(k.hasOwnProperty(We)&&(z=k[We],z!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,E));default:_s(w,E,We,z,k,null)}return;default:if(Jx(E)){for(yt in k)k.hasOwnProperty(yt)&&(z=k[yt],z!==void 0&&DD(w,E,yt,z,k,void 0));return}}for(ke in k)k.hasOwnProperty(ke)&&(z=k[ke],z!=null&&_s(w,E,ke,z,k,null))}function k_e(w,E,k,z){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Z=null,ie=null,_e=null,ke=null,qe=null,We=null,yt=null;for(gt in k){var At=k[gt];if(k.hasOwnProperty(gt)&&At!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":qe=At;default:z.hasOwnProperty(gt)||_s(w,E,gt,null,z,At)}}for(var at in z){var gt=z[at];if(At=k[at],z.hasOwnProperty(at)&&(gt!=null||At!=null))switch(at){case"type":ie=gt;break;case"name":Z=gt;break;case"checked":We=gt;break;case"defaultChecked":yt=gt;break;case"value":_e=gt;break;case"defaultValue":ke=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(n(137,E));break;default:gt!==At&&_s(w,E,at,gt,z,At)}}Am(w,_e,ke,qe,We,yt,ie,Z);return;case"select":gt=_e=ke=at=null;for(ie in k)if(qe=k[ie],k.hasOwnProperty(ie)&&qe!=null)switch(ie){case"value":break;case"multiple":gt=qe;default:z.hasOwnProperty(ie)||_s(w,E,ie,null,z,qe)}for(Z in z)if(ie=z[Z],qe=k[Z],z.hasOwnProperty(Z)&&(ie!=null||qe!=null))switch(Z){case"value":at=ie;break;case"defaultValue":ke=ie;break;case"multiple":_e=ie;default:ie!==qe&&_s(w,E,Z,ie,z,qe)}E=ke,k=_e,z=gt,at!=null?km(w,!!k,at,!1):!!z!=!!k&&(E!=null?km(w,!!k,E,!0):km(w,!!k,k?[]:"",!1));return;case"textarea":gt=at=null;for(ke in k)if(Z=k[ke],k.hasOwnProperty(ke)&&Z!=null&&!z.hasOwnProperty(ke))switch(ke){case"value":break;case"children":break;default:_s(w,E,ke,null,z,Z)}for(_e in z)if(Z=z[_e],ie=k[_e],z.hasOwnProperty(_e)&&(Z!=null||ie!=null))switch(_e){case"value":at=Z;break;case"defaultValue":gt=Z;break;case"children":break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(91));break;default:Z!==ie&&_s(w,E,_e,Z,z,ie)}Wx(w,at,gt);return;case"option":for(var di in k)if(at=k[di],k.hasOwnProperty(di)&&at!=null&&!z.hasOwnProperty(di))switch(di){case"selected":w.selected=!1;break;default:_s(w,E,di,null,z,at)}for(qe in z)if(at=z[qe],gt=k[qe],z.hasOwnProperty(qe)&&at!==gt&&(at!=null||gt!=null))switch(qe){case"selected":w.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:_s(w,E,qe,at,z,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bi in k)at=k[Bi],k.hasOwnProperty(Bi)&&at!=null&&!z.hasOwnProperty(Bi)&&_s(w,E,Bi,null,z,at);for(We in z)if(at=z[We],gt=k[We],z.hasOwnProperty(We)&&at!==gt&&(at!=null||gt!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,E));break;default:_s(w,E,We,at,z,gt)}return;default:if(Jx(E)){for(var Dr in k)at=k[Dr],k.hasOwnProperty(Dr)&&at!==void 0&&!z.hasOwnProperty(Dr)&&DD(w,E,Dr,void 0,z,at);for(yt in z)at=z[yt],gt=k[yt],!z.hasOwnProperty(yt)||at===gt||at===void 0&&gt===void 0||DD(w,E,yt,at,z,gt);return}}for(var tt in k)at=k[tt],k.hasOwnProperty(tt)&&at!=null&&!z.hasOwnProperty(tt)&&_s(w,E,tt,null,z,at);for(At in z)at=z[At],gt=k[At],!z.hasOwnProperty(At)||at===gt||at==null&&gt==null||_s(w,E,At,at,z,gt)}var ND=null,OD=null;function zP(w){return w.nodeType===9?w:w.ownerDocument}function eY(w){switch(w){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tY(w,E){if(w===0)switch(E){case"svg":return 1;case"math":return 2;default:return 0}return w===1&&E==="foreignObject"?0:w}function $D(w,E){return w==="textarea"||w==="noscript"||typeof E.children=="string"||typeof E.children=="number"||typeof E.children=="bigint"||typeof E.dangerouslySetInnerHTML=="object"&&E.dangerouslySetInnerHTML!==null&&E.dangerouslySetInnerHTML.__html!=null}var RD=null;function D_e(){var w=window.event;return w&&w.type==="popstate"?w===RD?!1:(RD=w,!0):(RD=null,!1)}var iY=typeof setTimeout=="function"?setTimeout:void 0,N_e=typeof clearTimeout=="function"?clearTimeout:void 0,nY=typeof Promise=="function"?Promise:void 0,O_e=typeof queueMicrotask=="function"?queueMicrotask:typeof nY<"u"?function(w){return nY.resolve(null).then(w).catch($_e)}:iY;function $_e(w){setTimeout(function(){throw w})}function LD(w,E){var k=E,z=0;do{var Z=k.nextSibling;if(w.removeChild(k),Z&&Z.nodeType===8)if(k=Z.data,k==="/$"){if(z===0){w.removeChild(Z),Vw(E);return}z--}else k!=="$"&&k!=="$?"&&k!=="$!"||z++;k=Z}while(k);Vw(E)}function FD(w){var E=w.firstChild;for(E&&E.nodeType===10&&(E=E.nextSibling);E;){var k=E;switch(E=E.nextSibling,k.nodeName){case"HTML":case"HEAD":case"BODY":FD(k),Qi(k);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(k.rel.toLowerCase()==="stylesheet")continue}w.removeChild(k)}}function R_e(w,E,k,z){for(;w.nodeType===1;){var Z=k;if(w.nodeName.toLowerCase()!==E.toLowerCase()){if(!z&&(w.nodeName!=="INPUT"||w.type!=="hidden"))break}else if(z){if(!w[Ni])switch(E){case"meta":if(!w.hasAttribute("itemprop"))break;return w;case"link":if(ie=w.getAttribute("rel"),ie==="stylesheet"&&w.hasAttribute("data-precedence"))break;if(ie!==Z.rel||w.getAttribute("href")!==(Z.href==null?null:Z.href)||w.getAttribute("crossorigin")!==(Z.crossOrigin==null?null:Z.crossOrigin)||w.getAttribute("title")!==(Z.title==null?null:Z.title))break;return w;case"style":if(w.hasAttribute("data-precedence"))break;return w;case"script":if(ie=w.getAttribute("src"),(ie!==(Z.src==null?null:Z.src)||w.getAttribute("type")!==(Z.type==null?null:Z.type)||w.getAttribute("crossorigin")!==(Z.crossOrigin==null?null:Z.crossOrigin))&&ie&&w.hasAttribute("async")&&!w.hasAttribute("itemprop"))break;return w;default:return w}}else if(E==="input"&&w.type==="hidden"){var ie=Z.name==null?null:""+Z.name;if(Z.type==="hidden"&&w.getAttribute("name")===ie)return w}else return w;if(w=fh(w.nextSibling),w===null)break}return null}function L_e(w,E,k){if(E==="")return null;for(;w.nodeType!==3;)if((w.nodeType!==1||w.nodeName!=="INPUT"||w.type!=="hidden")&&!k||(w=fh(w.nextSibling),w===null))return null;return w}function fh(w){for(;w!=null;w=w.nextSibling){var E=w.nodeType;if(E===1||E===3)break;if(E===8){if(E=w.data,E==="$"||E==="$!"||E==="$?"||E==="F!"||E==="F")break;if(E==="/$")return null}}return w}function sY(w){w=w.previousSibling;for(var E=0;w;){if(w.nodeType===8){var k=w.data;if(k==="$"||k==="$!"||k==="$?"){if(E===0)return w;E--}else k==="/$"&&E++}w=w.previousSibling}return null}function rY(w,E,k){switch(E=zP(k),w){case"html":if(w=E.documentElement,!w)throw Error(n(452));return w;case"head":if(w=E.head,!w)throw Error(n(453));return w;case"body":if(w=E.body,!w)throw Error(n(454));return w;default:throw Error(n(451))}}var uu=new Map,oY=new Set;function qP(w){return typeof w.getRootNode=="function"?w.getRootNode():w.ownerDocument}var op=ot.d;ot.d={f:F_e,r:z_e,D:q_e,C:V_e,L:G_e,m:j_e,X:H_e,S:B_e,M:U_e};function F_e(){var w=op.f(),E=DP();return w||E}function z_e(w){var E=ln(w);E!==null&&E.tag===5&&E.type==="form"?NH(E):op.r(w)}var k_=typeof document>"u"?null:document;function aY(w,E,k){var z=k_;if(z&&typeof E=="string"&&E){var Z=ka(E);Z='link[rel="'+w+'"][href="'+Z+'"]',typeof k=="string"&&(Z+='[crossorigin="'+k+'"]'),oY.has(Z)||(oY.add(Z),w={rel:w,crossOrigin:k,href:E},z.querySelector(Z)===null&&(E=z.createElement("link"),oa(E,"link",w),Kt(E),z.head.appendChild(E)))}}function q_e(w){op.D(w),aY("dns-prefetch",w,null)}function V_e(w,E){op.C(w,E),aY("preconnect",w,E)}function G_e(w,E,k){op.L(w,E,k);var z=k_;if(z&&w&&E){var Z='link[rel="preload"][as="'+ka(E)+'"]';E==="image"&&k&&k.imageSrcSet?(Z+='[imagesrcset="'+ka(k.imageSrcSet)+'"]',typeof k.imageSizes=="string"&&(Z+='[imagesizes="'+ka(k.imageSizes)+'"]')):Z+='[href="'+ka(w)+'"]';var ie=Z;switch(E){case"style":ie=D_(w);break;case"script":ie=N_(w)}uu.has(ie)||(w=oe({rel:"preload",href:E==="image"&&k&&k.imageSrcSet?void 0:w,as:E},k),uu.set(ie,w),z.querySelector(Z)!==null||E==="style"&&z.querySelector(Ow(ie))||E==="script"&&z.querySelector($w(ie))||(E=z.createElement("link"),oa(E,"link",w),Kt(E),z.head.appendChild(E)))}}function j_e(w,E){op.m(w,E);var k=k_;if(k&&w){var z=E&&typeof E.as=="string"?E.as:"script",Z='link[rel="modulepreload"][as="'+ka(z)+'"][href="'+ka(w)+'"]',ie=Z;switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ie=N_(w)}if(!uu.has(ie)&&(w=oe({rel:"modulepreload",href:w},E),uu.set(ie,w),k.querySelector(Z)===null)){switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(k.querySelector($w(ie)))return}z=k.createElement("link"),oa(z,"link",w),Kt(z),k.head.appendChild(z)}}}function B_e(w,E,k){op.S(w,E,k);var z=k_;if(z&&w){var Z=ui(z).hoistableStyles,ie=D_(w);E=E||"default";var _e=Z.get(ie);if(!_e){var ke={loading:0,preload:null};if(_e=z.querySelector(Ow(ie)))ke.loading=5;else{w=oe({rel:"stylesheet",href:w,"data-precedence":E},k),(k=uu.get(ie))&&zD(w,k);var qe=_e=z.createElement("link");Kt(qe),oa(qe,"link",w),qe._p=new Promise(function(We,yt){qe.onload=We,qe.onerror=yt}),qe.addEventListener("load",function(){ke.loading|=1}),qe.addEventListener("error",function(){ke.loading|=2}),ke.loading|=4,VP(_e,E,z)}_e={type:"stylesheet",instance:_e,count:1,state:ke},Z.set(ie,_e)}}}function H_e(w,E){op.X(w,E);var k=k_;if(k&&w){var z=ui(k).hoistableScripts,Z=N_(w),ie=z.get(Z);ie||(ie=k.querySelector($w(Z)),ie||(w=oe({src:w,async:!0},E),(E=uu.get(Z))&&qD(w,E),ie=k.createElement("script"),Kt(ie),oa(ie,"link",w),k.head.appendChild(ie)),ie={type:"script",instance:ie,count:1,state:null},z.set(Z,ie))}}function U_e(w,E){op.M(w,E);var k=k_;if(k&&w){var z=ui(k).hoistableScripts,Z=N_(w),ie=z.get(Z);ie||(ie=k.querySelector($w(Z)),ie||(w=oe({src:w,async:!0,type:"module"},E),(E=uu.get(Z))&&qD(w,E),ie=k.createElement("script"),Kt(ie),oa(ie,"link",w),k.head.appendChild(ie)),ie={type:"script",instance:ie,count:1,state:null},z.set(Z,ie))}}function lY(w,E,k,z){var Z=(Z=Yn.current)?qP(Z):null;if(!Z)throw Error(n(446));switch(w){case"meta":case"title":return null;case"style":return typeof k.precedence=="string"&&typeof k.href=="string"?(E=D_(k.href),k=ui(Z).hoistableStyles,z=k.get(E),z||(z={type:"style",instance:null,count:0,state:null},k.set(E,z)),z):{type:"void",instance:null,count:0,state:null};case"link":if(k.rel==="stylesheet"&&typeof k.href=="string"&&typeof k.precedence=="string"){w=D_(k.href);var ie=ui(Z).hoistableStyles,_e=ie.get(w);if(_e||(Z=Z.ownerDocument||Z,_e={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ie.set(w,_e),(ie=Z.querySelector(Ow(w)))&&!ie._p&&(_e.instance=ie,_e.state.loading=5),uu.has(w)||(k={rel:"preload",as:"style",href:k.href,crossOrigin:k.crossOrigin,integrity:k.integrity,media:k.media,hrefLang:k.hrefLang,referrerPolicy:k.referrerPolicy},uu.set(w,k),ie||Y_e(Z,w,k,_e.state))),E&&z===null)throw Error(n(528,""));return _e}if(E&&z!==null)throw Error(n(529,""));return null;case"script":return E=k.async,k=k.src,typeof k=="string"&&E&&typeof E!="function"&&typeof E!="symbol"?(E=N_(k),k=ui(Z).hoistableScripts,z=k.get(E),z||(z={type:"script",instance:null,count:0,state:null},k.set(E,z)),z):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,w))}}function D_(w){return'href="'+ka(w)+'"'}function Ow(w){return'link[rel="stylesheet"]['+w+"]"}function cY(w){return oe({},w,{"data-precedence":w.precedence,precedence:null})}function Y_e(w,E,k,z){w.querySelector('link[rel="preload"][as="style"]['+E+"]")?z.loading=1:(E=w.createElement("link"),z.preload=E,E.addEventListener("load",function(){return z.loading|=1}),E.addEventListener("error",function(){return z.loading|=2}),oa(E,"link",k),Kt(E),w.head.appendChild(E))}function N_(w){return'[src="'+ka(w)+'"]'}function $w(w){return"script[async]"+w}function uY(w,E,k){if(E.count++,E.instance===null)switch(E.type){case"style":var z=w.querySelector('style[data-href~="'+ka(k.href)+'"]');if(z)return E.instance=z,Kt(z),z;var Z=oe({},k,{"data-href":k.href,"data-precedence":k.precedence,href:null,precedence:null});return z=(w.ownerDocument||w).createElement("style"),Kt(z),oa(z,"style",Z),VP(z,k.precedence,w),E.instance=z;case"stylesheet":Z=D_(k.href);var ie=w.querySelector(Ow(Z));if(ie)return E.state.loading|=4,E.instance=ie,Kt(ie),ie;z=cY(k),(Z=uu.get(Z))&&zD(z,Z),ie=(w.ownerDocument||w).createElement("link"),Kt(ie);var _e=ie;return _e._p=new Promise(function(ke,qe){_e.onload=ke,_e.onerror=qe}),oa(ie,"link",z),E.state.loading|=4,VP(ie,k.precedence,w),E.instance=ie;case"script":return ie=N_(k.src),(Z=w.querySelector($w(ie)))?(E.instance=Z,Kt(Z),Z):(z=k,(Z=uu.get(ie))&&(z=oe({},k),qD(z,Z)),w=w.ownerDocument||w,Z=w.createElement("script"),Kt(Z),oa(Z,"link",z),w.head.appendChild(Z),E.instance=Z);case"void":return null;default:throw Error(n(443,E.type))}else E.type==="stylesheet"&&(E.state.loading&4)===0&&(z=E.instance,E.state.loading|=4,VP(z,k.precedence,w));return E.instance}function VP(w,E,k){for(var z=k.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Z=z.length?z[z.length-1]:null,ie=Z,_e=0;_e<z.length;_e++){var ke=z[_e];if(ke.dataset.precedence===E)ie=ke;else if(ie!==Z)break}ie?ie.parentNode.insertBefore(w,ie.nextSibling):(E=k.nodeType===9?k.head:k,E.insertBefore(w,E.firstChild))}function zD(w,E){w.crossOrigin==null&&(w.crossOrigin=E.crossOrigin),w.referrerPolicy==null&&(w.referrerPolicy=E.referrerPolicy),w.title==null&&(w.title=E.title)}function qD(w,E){w.crossOrigin==null&&(w.crossOrigin=E.crossOrigin),w.referrerPolicy==null&&(w.referrerPolicy=E.referrerPolicy),w.integrity==null&&(w.integrity=E.integrity)}var GP=null;function hY(w,E,k){if(GP===null){var z=new Map,Z=GP=new Map;Z.set(k,z)}else Z=GP,z=Z.get(k),z||(z=new Map,Z.set(k,z));if(z.has(w))return z;for(z.set(w,null),k=k.getElementsByTagName(w),Z=0;Z<k.length;Z++){var ie=k[Z];if(!(ie[Ni]||ie[et]||w==="link"&&ie.getAttribute("rel")==="stylesheet")&&ie.namespaceURI!=="http://www.w3.org/2000/svg"){var _e=ie.getAttribute(E)||"";_e=w+_e;var ke=z.get(_e);ke?ke.push(ie):z.set(_e,[ie])}}return z}function dY(w,E,k){w=w.ownerDocument||w,w.head.insertBefore(k,E==="title"?w.querySelector("head > title"):null)}function X_e(w,E,k){if(k===1||E.itemProp!=null)return!1;switch(w){case"meta":case"title":return!0;case"style":if(typeof E.precedence!="string"||typeof E.href!="string"||E.href==="")break;return!0;case"link":if(typeof E.rel!="string"||typeof E.href!="string"||E.href===""||E.onLoad||E.onError)break;switch(E.rel){case"stylesheet":return w=E.disabled,typeof E.precedence=="string"&&w==null;default:return!0}case"script":if(E.async&&typeof E.async!="function"&&typeof E.async!="symbol"&&!E.onLoad&&!E.onError&&E.src&&typeof E.src=="string")return!0}return!1}function fY(w){return!(w.type==="stylesheet"&&(w.state.loading&3)===0)}var Rw=null;function W_e(){}function Z_e(w,E,k){if(Rw===null)throw Error(n(475));var z=Rw;if(E.type==="stylesheet"&&(typeof k.media!="string"||matchMedia(k.media).matches!==!1)&&(E.state.loading&4)===0){if(E.instance===null){var Z=D_(k.href),ie=w.querySelector(Ow(Z));if(ie){w=ie._p,w!==null&&typeof w=="object"&&typeof w.then=="function"&&(z.count++,z=jP.bind(z),w.then(z,z)),E.state.loading|=4,E.instance=ie,Kt(ie);return}ie=w.ownerDocument||w,k=cY(k),(Z=uu.get(Z))&&zD(k,Z),ie=ie.createElement("link"),Kt(ie);var _e=ie;_e._p=new Promise(function(ke,qe){_e.onload=ke,_e.onerror=qe}),oa(ie,"link",k),E.instance=ie}z.stylesheets===null&&(z.stylesheets=new Map),z.stylesheets.set(E,w),(w=E.state.preload)&&(E.state.loading&3)===0&&(z.count++,E=jP.bind(z),w.addEventListener("load",E),w.addEventListener("error",E))}}function K_e(){if(Rw===null)throw Error(n(475));var w=Rw;return w.stylesheets&&w.count===0&&VD(w,w.stylesheets),0<w.count?function(E){var k=setTimeout(function(){if(w.stylesheets&&VD(w,w.stylesheets),w.unsuspend){var z=w.unsuspend;w.unsuspend=null,z()}},6e4);return w.unsuspend=E,function(){w.unsuspend=null,clearTimeout(k)}}:null}function jP(){if(this.count--,this.count===0){if(this.stylesheets)VD(this,this.stylesheets);else if(this.unsuspend){var w=this.unsuspend;this.unsuspend=null,w()}}}var BP=null;function VD(w,E){w.stylesheets=null,w.unsuspend!==null&&(w.count++,BP=new Map,E.forEach(J_e,w),BP=null,jP.call(w))}function J_e(w,E){if(!(E.state.loading&4)){var k=BP.get(w);if(k)var z=k.get(null);else{k=new Map,BP.set(w,k);for(var Z=w.querySelectorAll("link[data-precedence],style[data-precedence]"),ie=0;ie<Z.length;ie++){var _e=Z[ie];(_e.nodeName==="LINK"||_e.getAttribute("media")!=="not all")&&(k.set(_e.dataset.precedence,_e),z=_e)}z&&k.set(null,z)}Z=E.instance,_e=Z.getAttribute("data-precedence"),ie=k.get(_e)||z,ie===z&&k.set(null,Z),k.set(_e,Z),this.count++,z=jP.bind(this),Z.addEventListener("load",z),Z.addEventListener("error",z),ie?ie.parentNode.insertBefore(Z,ie.nextSibling):(w=w.nodeType===9?w.head:w,w.insertBefore(Z,w.firstChild)),E.state.loading|=4}}var Lw={$$typeof:S,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function Q_e(w,E,k,z,Z,ie,_e,ke){this.tag=1,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Q(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q(0),this.hiddenUpdates=Q(null),this.identifierPrefix=z,this.onUncaughtError=Z,this.onCaughtError=ie,this.onRecoverableError=_e,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ke,this.incompleteTransitions=new Map}function pY(w,E,k,z,Z,ie,_e,ke,qe,We,yt,At){return w=new Q_e(w,E,k,_e,ke,qe,We,At),E=1,ie===!0&&(E|=24),ie=lu(3,null,null,E),w.current=ie,ie.stateNode=w,E=_k(),E.refCount++,w.pooledCache=E,E.refCount++,ie.memoizedState={element:z,isDehydrated:k,cache:E},Qk(ie),w}function mY(w){return w?(w=h_,w):h_}function gY(w,E,k,z,Z,ie){Z=mY(Z),z.context===null?z.context=Z:z.pendingContext=Z,z=Ym(E),z.payload={element:k},ie=ie===void 0?null:ie,ie!==null&&(z.callback=ie),k=Xm(w,z,E),k!==null&&(ll(k,w,E),bw(k,w,E))}function yY(w,E){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var k=w.retryLane;w.retryLane=k!==0&&k<E?k:E}}function GD(w,E){yY(w,E),(w=w.alternate)&&yY(w,E)}function vY(w){if(w.tag===13){var E=qm(w,67108864);E!==null&&ll(E,w,67108864),GD(w,67108864)}}var HP=!0;function ebe(w,E,k,z){var Z=ne.T;ne.T=null;var ie=ot.p;try{ot.p=2,jD(w,E,k,z)}finally{ot.p=ie,ne.T=Z}}function tbe(w,E,k,z){var Z=ne.T;ne.T=null;var ie=ot.p;try{ot.p=8,jD(w,E,k,z)}finally{ot.p=ie,ne.T=Z}}function jD(w,E,k,z){if(HP){var Z=BD(z);if(Z===null)kD(w,E,z,UP,k),bY(w,z);else if(nbe(Z,w,E,k,z))z.stopPropagation();else if(bY(w,z),E&4&&-1<ibe.indexOf(w)){for(;Z!==null;){var ie=ln(Z);if(ie!==null)switch(ie.tag){case 3:if(ie=ie.stateNode,ie.current.memoizedState.isDehydrated){var _e=M(ie.pendingLanes);if(_e!==0){var ke=ie;for(ke.pendingLanes|=2,ke.entangledLanes|=2;_e;){var qe=1<<31-u(_e);ke.entanglements[1]|=qe,_e&=~qe}Pd(ie),(gr&6)===0&&(MP=Ji()+500,kw(0))}}break;case 13:ke=qm(ie,2),ke!==null&&ll(ke,ie,2),DP(),GD(ie,2)}if(ie=BD(z),ie===null&&kD(w,E,z,UP,k),ie===Z)break;Z=ie}Z!==null&&z.stopPropagation()}else kD(w,E,z,null,k)}}function BD(w){return w=a1(w),HD(w)}var UP=null;function HD(w){if(UP=null,w=xn(w),w!==null){var E=Re(w);if(E===null)w=null;else{var k=E.tag;if(k===13){if(w=$e(E),w!==null)return w;w=null}else if(k===3){if(E.stateNode.current.memoizedState.isDehydrated)return E.tag===3?E.stateNode.containerInfo:null;w=null}else E!==w&&(w=null)}}return UP=w,null}function _Y(w){switch(w){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(is()){case gs:return 2;case Wr:return 8;case Tn:case wt:return 32;case Xn:return 268435456;default:return 32}default:return 32}}var UD=!1,tg=null,ig=null,ng=null,Fw=new Map,zw=new Map,sg=[],ibe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bY(w,E){switch(w){case"focusin":case"focusout":tg=null;break;case"dragenter":case"dragleave":ig=null;break;case"mouseover":case"mouseout":ng=null;break;case"pointerover":case"pointerout":Fw.delete(E.pointerId);break;case"gotpointercapture":case"lostpointercapture":zw.delete(E.pointerId)}}function qw(w,E,k,z,Z,ie){return w===null||w.nativeEvent!==ie?(w={blockedOn:E,domEventName:k,eventSystemFlags:z,nativeEvent:ie,targetContainers:[Z]},E!==null&&(E=ln(E),E!==null&&vY(E)),w):(w.eventSystemFlags|=z,E=w.targetContainers,Z!==null&&E.indexOf(Z)===-1&&E.push(Z),w)}function nbe(w,E,k,z,Z){switch(E){case"focusin":return tg=qw(tg,w,E,k,z,Z),!0;case"dragenter":return ig=qw(ig,w,E,k,z,Z),!0;case"mouseover":return ng=qw(ng,w,E,k,z,Z),!0;case"pointerover":var ie=Z.pointerId;return Fw.set(ie,qw(Fw.get(ie)||null,w,E,k,z,Z)),!0;case"gotpointercapture":return ie=Z.pointerId,zw.set(ie,qw(zw.get(ie)||null,w,E,k,z,Z)),!0}return!1}function xY(w){var E=xn(w.target);if(E!==null){var k=Re(E);if(k!==null){if(E=k.tag,E===13){if(E=$e(k),E!==null){w.blockedOn=E,Ve(w.priority,function(){if(k.tag===13){var z=mc(),Z=qm(k,z);Z!==null&&ll(Z,k,z),GD(k,z)}});return}}else if(E===3&&k.stateNode.current.memoizedState.isDehydrated){w.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}w.blockedOn=null}function YP(w){if(w.blockedOn!==null)return!1;for(var E=w.targetContainers;0<E.length;){var k=BD(w.nativeEvent);if(k===null){k=w.nativeEvent;var z=new k.constructor(k.type,k);Qx=z,k.target.dispatchEvent(z),Qx=null}else return E=ln(k),E!==null&&vY(E),w.blockedOn=k,!1;E.shift()}return!0}function wY(w,E,k){YP(w)&&k.delete(E)}function sbe(){UD=!1,tg!==null&&YP(tg)&&(tg=null),ig!==null&&YP(ig)&&(ig=null),ng!==null&&YP(ng)&&(ng=null),Fw.forEach(wY),zw.forEach(wY)}function XP(w,E){w.blockedOn===E&&(w.blockedOn=null,UD||(UD=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sbe)))}var WP=null;function SY(w){WP!==w&&(WP=w,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){WP===w&&(WP=null);for(var E=0;E<w.length;E+=3){var k=w[E],z=w[E+1],Z=w[E+2];if(typeof z!="function"){if(HD(z||k)===null)continue;break}var ie=ln(k);ie!==null&&(w.splice(E,3),E-=3,$k(ie,{pending:!0,data:Z,method:k.method,action:z},z,Z))}}))}function Vw(w){function E(qe){return XP(qe,w)}tg!==null&&XP(tg,w),ig!==null&&XP(ig,w),ng!==null&&XP(ng,w),Fw.forEach(E),zw.forEach(E);for(var k=0;k<sg.length;k++){var z=sg[k];z.blockedOn===w&&(z.blockedOn=null)}for(;0<sg.length&&(k=sg[0],k.blockedOn===null);)xY(k),k.blockedOn===null&&sg.shift();if(k=(w.ownerDocument||w).$$reactFormReplay,k!=null)for(z=0;z<k.length;z+=3){var Z=k[z],ie=k[z+1],_e=Z[dt]||null;if(typeof ie=="function")_e||SY(k);else if(_e){var ke=null;if(ie&&ie.hasAttribute("formAction")){if(Z=ie,_e=ie[dt]||null)ke=_e.formAction;else if(HD(Z)!==null)continue}else ke=_e.action;typeof ke=="function"?k[z+1]=ke:(k.splice(z,3),z-=3),SY(k)}}}function YD(w){this._internalRoot=w}ZP.prototype.render=YD.prototype.render=function(w){var E=this._internalRoot;if(E===null)throw Error(n(409));var k=E.current,z=mc();gY(k,z,w,E,null,null)},ZP.prototype.unmount=YD.prototype.unmount=function(){var w=this._internalRoot;if(w!==null){this._internalRoot=null;var E=w.containerInfo;w.tag===0&&I_(),gY(w.current,2,null,w,null,null),DP(),E[ct]=null}};function ZP(w){this._internalRoot=w}ZP.prototype.unstable_scheduleHydration=function(w){if(w){var E=Ne();w={blockedOn:null,target:w,priority:E};for(var k=0;k<sg.length&&E!==0&&E<sg[k].priority;k++);sg.splice(k,0,w),k===0&&xY(w)}};var EY=e.version;if(EY!=="19.0.0")throw Error(n(527,EY,"19.0.0"));ot.findDOMNode=function(w){var E=w._reactInternals;if(E===void 0)throw typeof w.render=="function"?Error(n(188)):(w=Object.keys(w).join(","),Error(n(268,w)));return w=Fe(E),w=w!==null?it(w):null,w=w===null?null:w.stateNode,w};var rbe={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,findFiberByHostInstance:xn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var KP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!KP.isDisabled&&KP.supportsFiber)try{T=KP.inject(rbe),p=KP}catch{}}return jw.createRoot=function(w,E){if(!s(w))throw Error(n(299));var k=!1,z="",Z=VH,ie=GH,_e=jH,ke=null;return E!=null&&(E.unstable_strictMode===!0&&(k=!0),E.identifierPrefix!==void 0&&(z=E.identifierPrefix),E.onUncaughtError!==void 0&&(Z=E.onUncaughtError),E.onCaughtError!==void 0&&(ie=E.onCaughtError),E.onRecoverableError!==void 0&&(_e=E.onRecoverableError),E.unstable_transitionCallbacks!==void 0&&(ke=E.unstable_transitionCallbacks)),E=pY(w,1,!1,null,null,k,z,Z,ie,_e,ke,null),w[ct]=E.current,AD(w.nodeType===8?w.parentNode:w),new YD(E)},jw.hydrateRoot=function(w,E,k){if(!s(w))throw Error(n(299));var z=!1,Z="",ie=VH,_e=GH,ke=jH,qe=null,We=null;return k!=null&&(k.unstable_strictMode===!0&&(z=!0),k.identifierPrefix!==void 0&&(Z=k.identifierPrefix),k.onUncaughtError!==void 0&&(ie=k.onUncaughtError),k.onCaughtError!==void 0&&(_e=k.onCaughtError),k.onRecoverableError!==void 0&&(ke=k.onRecoverableError),k.unstable_transitionCallbacks!==void 0&&(qe=k.unstable_transitionCallbacks),k.formState!==void 0&&(We=k.formState)),E=pY(w,1,!0,E,k??null,z,Z,ie,_e,ke,qe,We),E.context=mY(null),k=E.current,z=mc(),Z=Ym(z),Z.callback=null,Xm(k,Z,z),E.current.lanes=z,ge(E,z),Pd(E),w[ct]=E.current,AD(w),new ZP(E)},jw.version="19.0.0",jw}var OY;function mbe(){if(OY)return ZD.exports;OY=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ZD.exports=pbe(),ZD.exports}var gbe=mbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const ybe="calcite-mode-auto",Vse="calcite-mode-dark",vbe="calcite-mode-light",Zl={darkMode:Vse,lightMode:vbe,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},kO={filter:250,resize:150,reposition:100},_be="modulepreload",bbe=function(t,e){return new URL(t,e).href},$Y={},st=function(e,i,n){let s=Promise.resolve();if(i&&i.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(i.map(f=>{if(f=bbe(f,n),f in $Y)return;$Y[f]=!0;const y=f.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(!!n)for(let P=o.length-1;P>=0;P--){const A=o[P];if(A.href===f&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${_}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":_be,y||(S.as="script"),S.crossOrigin="",S.href=f,c&&S.setAttribute("nonce",c),document.head.appendChild(S),y)return new Promise((P,A)=>{S.addEventListener("load",P),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};var Hh={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},xbe=Object.defineProperty,wbe=(t,e)=>{for(var i in e)xbe(t,i,{get:e[i],enumerable:!0})},Gse=new WeakMap,Ov=t=>Gse.get(t),Sbe=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return Gse.set(t,i)},RY=(t,e)=>e in t,CC=(t,e)=>(0,console.error)(t,e),m9=new Map,Ebe=[],Cbe="slot-fb{display:contents}slot-fb[hidden]{display:none}",LY="http://www.w3.org/1999/xlink",PC=typeof window<"u"?window:{},ed=PC.document||{head:{}},Fi=PC.HTMLElement||class{},Jo={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,n)=>t.addEventListener(e,i,n),rel:(t,e,i,n)=>t.removeEventListener(e,i,n),ce:(t,e)=>new CustomEvent(t,e)},Pbe=(()=>{let t=!1;try{ed.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Tbe=t=>Promise.resolve(t),Ibe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),DO=!1,NO=[],jse=[],Bse=(t,e)=>i=>{t.push(i),DO||(DO=!0,e&&Jo.$flags$&4?Mbe(OO):Jo.raf(OO))},FY=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){CC(i)}t.length=0},OO=()=>{FY(NO),FY(jse),(DO=NO.length>0)&&Jo.raf(OO)},Mbe=t=>Tbe().then(t),Abe=Bse(NO,!1),kbe=Bse(jse,!0),Eq=t=>{const e=new URL(t,Jo.$resourcesUrl$);return e.origin!==PC.location.origin?e.href:e.pathname},Hse=t=>Jo.$resourcesUrl$=t,zY={},Dbe="http://www.w3.org/2000/svg",Nbe="http://www.w3.org/1999/xhtml",Obe=t=>t!=null,Cq=t=>(t=typeof t,t==="object"||t==="function");function $be(t){var e,i,n;return(n=(i=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:i.getAttribute("content"))!=null?n:void 0}var Rbe={};wbe(Rbe,{err:()=>Use,map:()=>Lbe,ok:()=>$O,unwrap:()=>Fbe,unwrapErr:()=>zbe});var $O=t=>({isOk:!0,isErr:!1,value:t}),Use=t=>({isOk:!1,isErr:!0,value:t});function Lbe(t,e){if(t.isOk){const i=e(t.value);return i instanceof Promise?i.then(n=>$O(n)):$O(i)}if(t.isErr){const i=t.value;return Use(i)}throw"should never get here"}var Fbe=t=>{if(t.isOk)return t.value;throw t.value},zbe=t=>{if(t.isErr)return t.value;throw t.value},nv=(t,e="")=>()=>{},Me=(t,e,...i)=>{let n=null,s=null,r=null,o=!1,l=!1;const c=[],f=_=>{for(let x=0;x<_.length;x++)n=_[x],Array.isArray(n)?f(n):n!=null&&typeof n!="boolean"&&((o=typeof t!="function"&&!Cq(n))&&(n=String(n)),o&&l?c[c.length-1].$text$+=n:c.push(o?g9(null,n):n),l=o)};if(f(i),e){e.key&&(s=e.key),e.name&&(r=e.name);{const _=e.className||e.class;_&&(e.class=typeof _!="object"?_:Object.keys(_).filter(x=>_[x]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,c,Vbe);const y=g9(t,null);return y.$attrs$=e,c.length>0&&(y.$children$=c),y.$key$=s,y.$name$=r,y},g9=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},er={},qbe=t=>t&&t.$tag$===er,Vbe={forEach:(t,e)=>t.map(qY).forEach(e),map:(t,e)=>t.map(qY).map(e).map(Gbe)},qY=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Gbe=t=>{if(typeof t.vtag=="function"){const i={...t.vattrs};return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),Me(t.vtag,i,...t.vchildren||[])}const e=g9(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},jbe=t=>Ebe.map(e=>e(t)).find(e=>!!e),Bbe=(t,e)=>t!=null&&!Cq(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,Hbe=t=>t,Mt=(t,e,i)=>{const n=Hbe(t);return{emit:s=>Ube(n,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s})}},Ube=(t,e,i)=>{const n=Jo.ce(e,i);return t.dispatchEvent(n),n},VY=new WeakMap,Ybe=(t,e,i)=>{let n=m9.get(t);Ibe&&i?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,m9.set(t,n)},Xbe=(t,e,i)=>{var n;const s=Yse(e,i),r=m9.get(s);if(t=t.nodeType===11?t:ed,r)if(typeof r=="string"){t=t.head||t;let o=VY.get(t),l;if(o||VY.set(t,o=new Set),!o.has(s)){{l=ed.createElement("style"),l.innerHTML=r;const c=(n=Jo.$nonce$)!=null?n:$be(ed);c!=null&&l.setAttribute("nonce",c),(!(e.$flags$&1)||e.$flags$&1&&t.nodeName!=="HEAD")&&t.insertBefore(l,t.querySelector("link"))}e.$flags$&4&&(l.innerHTML+=Cbe),o&&o.add(s)}}else t.adoptedStyleSheets.includes(r)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,r]);return s},Wbe=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,n=e.$flags$,s=nv("attachStyles",e.$tagName$),r=Xbe(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);n&10&&n&2&&(i["s-sc"]=r,i.classList.add(r+"-h"),n&2&&i.classList.add(r+"-s")),s()},Yse=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),GY=(t,e,i,n,s,r)=>{if(i!==n){let o=RY(t,e),l=e.toLowerCase();if(e==="class"){const c=t.classList,f=jY(i),y=jY(n);c.remove(...f.filter(_=>_&&!y.includes(_))),c.add(...y.filter(_=>_&&!f.includes(_)))}else if(e==="style"){for(const c in i)(!n||n[c]==null)&&(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in n)(!i||n[c]!==i[c])&&(c.includes("-")?t.style.setProperty(c,n[c]):t.style[c]=n[c])}else if(e!=="key")if(e==="ref")n&&n(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):RY(PC,l)?e=l.slice(2):e=l[2]+e.slice(3),i||n){const c=e.endsWith(Xse);e=e.replace(Kbe,""),i&&Jo.rel(t,e,i,c),n&&Jo.ael(t,e,n,c)}}else{const c=Cq(n);if((o||c&&n!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=n;else{const y=n??"";e==="list"?o=!1:(i==null||t[e]!=y)&&(t[e]=y)}}catch{}let f=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(e=l,f=!0),n==null||n===!1?(n!==!1||t.getAttribute(e)==="")&&(f?t.removeAttributeNS(LY,e):t.removeAttribute(e)):(!o||r&4||s)&&!c&&(n=n===!0?"":n,f?t.setAttributeNS(LY,e,n):t.setAttribute(e,n))}}},Zbe=/\s/,jY=t=>t?t.split(Zbe):[],Xse="Capture",Kbe=new RegExp(Xse+"$"),Wse=(t,e,i)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||zY,r=e.$attrs$||zY;for(const o of BY(Object.keys(s)))o in r||GY(n,o,s[o],void 0,i,e.$flags$);for(const o of BY(Object.keys(r)))GY(n,o,s[o],r[o],i,e.$flags$)};function BY(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var eb,RO,mE,y9=!1,v9=!1,Pq=!1,kc=!1,_9=(t,e,i,n)=>{var s;const r=e.$children$[i];let o=0,l,c,f;if(y9||(Pq=!0,r.$tag$==="slot"&&(eb&&n.classList.add(eb+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)l=r.$elm$=ed.createTextNode(r.$text$);else if(r.$flags$&1)l=r.$elm$=ed.createTextNode("");else{if(kc||(kc=r.$tag$==="svg"),l=r.$elm$=ed.createElementNS(kc?Dbe:Nbe,!y9&&Hh.slotRelocation&&r.$flags$&2?"slot-fb":r.$tag$),kc&&r.$tag$==="foreignObject"&&(kc=!1),Wse(null,r,kc),!!l.getRootNode().querySelector("body")&&Hh.scoped&&Obe(eb)&&l["s-si"]!==eb&&l.classList.add(l["s-si"]=eb),Iq(l,n),r.$children$)for(o=0;o<r.$children$.length;++o)c=_9(t,r,o,l),c&&l.appendChild(c);r.$tag$==="svg"?kc=!1:l.tagName==="foreignObject"&&(kc=!0)}return l["s-hn"]=mE,r.$flags$&3&&(l["s-sr"]=!0,l["s-cr"]=RO,l["s-sn"]=r.$name$||"",l["s-rf"]=(s=r.$attrs$)==null?void 0:s.ref,f=t&&t.$children$&&t.$children$[i],f&&f.$tag$===r.$tag$&&t.$elm$&&gE(t.$elm$,!1)),l},gE=(t,e)=>{Jo.$flags$|=1;const i=Array.from(t.childNodes);t["s-sr"]&&Hh.experimentalSlotFixes;for(let n=i.length-1;n>=0;n--){const s=i[n];s["s-hn"]!==mE&&s["s-ol"]&&(y0(Jse(s),s,Tq(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,Pq=!0),e&&gE(s,e)}Jo.$flags$&=-2},Zse=(t,e,i,n,s,r)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,l;for(o.shadowRoot&&o.tagName===mE&&(o=o.shadowRoot);s<=r;++s)n[s]&&(l=_9(null,i,s,t),l&&(n[s].$elm$=l,y0(o,l,Tq(e))))},Kse=(t,e,i)=>{for(let n=e;n<=i;++n){const s=t[n];if(s){const r=s.$elm$;tre(s),r&&(v9=!0,r["s-ol"]?r["s-ol"].remove():gE(r,!0),r.remove())}}},Jbe=(t,e,i,n,s=!1)=>{let r=0,o=0,l=0,c=0,f=e.length-1,y=e[0],_=e[f],x=n.length-1,S=n[0],P=n[x],A,D;for(;r<=f&&o<=x;)if(y==null)y=e[++r];else if(_==null)_=e[--f];else if(S==null)S=n[++o];else if(P==null)P=n[--x];else if(JP(y,S,s))tb(y,S,s),y=e[++r],S=n[++o];else if(JP(_,P,s))tb(_,P,s),_=e[--f],P=n[--x];else if(JP(y,P,s))(y.$tag$==="slot"||P.$tag$==="slot")&&gE(y.$elm$.parentNode,!1),tb(y,P,s),y0(t,y.$elm$,_.$elm$.nextSibling),y=e[++r],P=n[--x];else if(JP(_,S,s))(y.$tag$==="slot"||P.$tag$==="slot")&&gE(_.$elm$.parentNode,!1),tb(_,S,s),y0(t,_.$elm$,y.$elm$),_=e[--f],S=n[++o];else{for(l=-1,c=r;c<=f;++c)if(e[c]&&e[c].$key$!==null&&e[c].$key$===S.$key$){l=c;break}l>=0?(D=e[l],D.$tag$!==S.$tag$?A=_9(e&&e[o],i,l,t):(tb(D,S,s),e[l]=void 0,A=D.$elm$),S=n[++o]):(A=_9(e&&e[o],i,o,t),S=n[++o]),A&&y0(Jse(y.$elm$),A,Tq(y.$elm$))}r>f?Zse(t,n[x+1]==null?null:n[x+1].$elm$,i,n,o,x):o>x&&Kse(e,r,f)},JP=(t,e,i=!1)=>t.$tag$===e.$tag$?t.$tag$==="slot"?"$nodeId$"in t&&i&&t.$elm$.nodeType!==8?!1:t.$name$===e.$name$:i?!0:t.$key$===e.$key$:!1,Tq=t=>t&&t["s-ol"]||t,Jse=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,tb=(t,e,i=!1)=>{const n=e.$elm$=t.$elm$,s=t.$children$,r=e.$children$,o=e.$tag$,l=e.$text$;let c;l===null?(kc=o==="svg"?!0:o==="foreignObject"?!1:kc,o==="slot"&&!y9||Wse(t,e,kc),s!==null&&r!==null?Jbe(n,s,e,r,i):r!==null?(t.$text$!==null&&(n.textContent=""),Zse(n,null,e,r,0,r.length-1)):!i&&Hh.updatable&&s!==null&&Kse(s,0,s.length-1),kc&&o==="svg"&&(kc=!1)):(c=n["s-cr"])?c.parentNode.textContent=l:t.$text$!==l&&(n.data=l)},Qse=t=>{const e=t.childNodes;for(const i of e)if(i.nodeType===1){if(i["s-sr"]){const n=i["s-sn"];i.hidden=!1;for(const s of e)if(s!==i){if(s["s-hn"]!==i["s-hn"]||n!==""){if(s.nodeType===1&&(n===s.getAttribute("slot")||n===s["s-sn"])||s.nodeType===3&&n===s["s-sn"]){i.hidden=!0;break}}else if(s.nodeType===1||s.nodeType===3&&s.textContent.trim()!==""){i.hidden=!0;break}}}Qse(i)}},qp=[],ere=t=>{let e,i,n;for(const s of t.childNodes){if(s["s-sr"]&&(e=s["s-cr"])&&e.parentNode){i=e.parentNode.childNodes;const r=s["s-sn"];for(n=i.length-1;n>=0;n--)if(e=i[n],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==s["s-hn"])if(HY(e,r)){let o=qp.find(l=>l.$nodeToRelocate$===e);v9=!0,e["s-sn"]=e["s-sn"]||r,o?(o.$nodeToRelocate$["s-sh"]=s["s-hn"],o.$slotRefNode$=s):(e["s-sh"]=s["s-hn"],qp.push({$slotRefNode$:s,$nodeToRelocate$:e})),e["s-sr"]&&qp.map(l=>{HY(l.$nodeToRelocate$,e["s-sn"])&&(o=qp.find(c=>c.$nodeToRelocate$===e),o&&!l.$slotRefNode$&&(l.$slotRefNode$=o.$slotRefNode$))})}else qp.some(o=>o.$nodeToRelocate$===e)||qp.push({$nodeToRelocate$:e})}s.nodeType===1&&ere(s)}},HY=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",tre=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(tre)},y0=(t,e,i)=>{const n=t==null?void 0:t.insertBefore(e,i);return Iq(e,t),n},ire=t=>{const e=[];return t&&e.push(...t["s-scs"]||[],t["s-si"],t["s-sc"],...ire(t.parentElement)),e},Iq=(t,e,i=!1)=>{var n;if(t&&e&&t.nodeType===1){const s=new Set(ire(e).filter(Boolean));if(s.size&&((n=t.classList)==null||n.add(...t["s-scs"]=[...s]),t["s-ol"]||i))for(const r of Array.from(t.childNodes))Iq(r,t,!0)}},Qbe=(t,e,i=!1)=>{var n,s,r,o,l;const c=t.$hostElement$,f=t.$cmpMeta$,y=t.$vnode$||g9(null,null),_=qbe(e)?e:Me(null,null,e);if(mE=c.tagName,f.$attrsToReflect$&&(_.$attrs$=_.$attrs$||{},f.$attrsToReflect$.map(([x,S])=>_.$attrs$[S]=c[x])),i&&_.$attrs$)for(const x of Object.keys(_.$attrs$))c.hasAttribute(x)&&!["key","ref","style","class"].includes(x)&&(_.$attrs$[x]=c[x]);_.$tag$=null,_.$flags$|=4,t.$vnode$=_,_.$elm$=y.$elm$=c.shadowRoot||c,eb=c["s-sc"],y9=(f.$flags$&1)!==0,RO=c["s-cr"],v9=!1,tb(y,_,i);{if(Jo.$flags$|=1,Pq){ere(_.$elm$);for(const x of qp){const S=x.$nodeToRelocate$;if(!S["s-ol"]){const P=ed.createTextNode("");P["s-nr"]=S,y0(S.parentNode,S["s-ol"]=P,S)}}for(const x of qp){const S=x.$nodeToRelocate$,P=x.$slotRefNode$;if(P){const A=P.parentNode;let D=P.nextSibling;{let N=(n=S["s-ol"])==null?void 0:n.previousSibling;for(;N;){let F=(s=N["s-nr"])!=null?s:null;if(F&&F["s-sn"]===S["s-sn"]&&A===F.parentNode){for(F=F.nextSibling;F===S||F!=null&&F["s-sr"];)F=F==null?void 0:F.nextSibling;if(!F||!F["s-nr"]){D=F;break}}N=N.previousSibling}}(!D&&A!==S.parentNode||S.nextSibling!==D)&&S!==D&&(!S["s-hn"]&&S["s-ol"]&&(S["s-hn"]=S["s-ol"].parentNode.nodeName),y0(A,S,D),S.nodeType===1&&(S.hidden=(r=S["s-ih"])!=null?r:!1)),S&&typeof P["s-rf"]=="function"&&P["s-rf"](S)}else S.nodeType===1&&(i&&(S["s-ih"]=(o=S.hidden)!=null?o:!1),S.hidden=!0)}}v9&&Qse(_.$elm$),Jo.$flags$&=-2,qp.length=0}if(Hh.experimentalScopedSlotChanges&&f.$flags$&2)for(const x of _.$elm$.childNodes)x["s-hn"]!==mE&&!x["s-sh"]&&(i&&x["s-ih"]==null&&(x["s-ih"]=(l=x.hidden)!=null?l:!1),x.hidden=!0);RO=void 0},e2e=(t,e)=>{},Mq=(t,e)=>(t.$flags$|=16,e2e(t,t.$ancestorComponent$),kbe(()=>t2e(t,e))),t2e=(t,e)=>{const i=t.$hostElement$,n=nv("scheduleUpdate",t.$cmpMeta$.$tagName$),s=i;if(!s)throw new Error(`Can't render component <${i.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return e?r=Qb(s,"componentWillLoad"):r=Qb(s,"componentWillUpdate"),r=UY(r,()=>Qb(s,"componentWillRender")),n(),UY(r,()=>n2e(t,s,e))},UY=(t,e)=>i2e(t)?t.then(e).catch(i=>{console.error(i),e()}):e(),i2e=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",n2e=async(t,e,i)=>{const n=t.$hostElement$,s=nv("update",t.$cmpMeta$.$tagName$);n["s-rc"],i&&Wbe(t);const r=nv("render",t.$cmpMeta$.$tagName$);s2e(t,e,n,i),r(),s(),r2e(t)},YY=null,s2e=(t,e,i,n)=>{try{YY=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Hh.hasRenderFn||Hh.reflect)&&(Hh.vdomRender||Hh.reflect)&&(Hh.hydrateServerSide||Qbe(t,e,n))}catch(c){CC(c,t.$hostElement$)}return YY=null,null},r2e=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,n=nv("postUpdate",e),s=i;t.$ancestorComponent$,Qb(s,"componentDidRender"),t.$flags$&64?(Qb(s,"componentDidUpdate"),n()):(t.$flags$|=64,Qb(s,"componentDidLoad"),n())},Mo=t=>{{const e=Ov(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&Mq(e,!1),i}},Qb=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(n){CC(n)}},o2e=(t,e)=>Ov(t).$instanceValues$.get(e),a2e=(t,e,i,n)=>{const s=Ov(t),r=t,o=s.$instanceValues$.get(e),l=s.$flags$,c=r;i=Bbe(i,n.$members$[e][0]);const f=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!f){s.$instanceValues$.set(e,i);{if(n.$watchers$&&l&128){const _=n.$watchers$[e];_&&_.map(x=>{try{c[x](i,o,e)}catch(S){CC(S,r)}})}if((l&18)===2){if(c.componentShouldUpdate&&c.componentShouldUpdate(i,o,e)===!1)return;Mq(s,!1)}}}},l2e=(t,e,i)=>{var n,s;const r=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const o=Object.entries((n=e.$members$)!=null?n:{});o.map(([l,[c]])=>{(c&31||c&32)&&Object.defineProperty(r,l,{get(){return o2e(this,l)},set(f){a2e(this,l,f,e)},configurable:!0,enumerable:!0})});{const l=new Map;r.attributeChangedCallback=function(c,f,y){Jo.jmp(()=>{var _;const x=l.get(c);if(this.hasOwnProperty(x))y=this[x],delete this[x];else{if(r.hasOwnProperty(x)&&typeof this[x]=="number"&&this[x]==y)return;if(x==null){const S=Ov(this),P=S==null?void 0:S.$flags$;if(P&&!(P&8)&&P&128&&y!==f){const D=this,N=(_=e.$watchers$)==null?void 0:_[c];N==null||N.forEach(F=>{D[F]!=null&&D[F].call(D,y,f,c)})}return}}this[x]=y===null&&typeof this[x]=="boolean"?!1:y})},t.observedAttributes=Array.from(new Set([...Object.keys((s=e.$watchers$)!=null?s:{}),...o.filter(([c,f])=>f[0]&15).map(([c,f])=>{var y;const _=f[1]||c;return l.set(_,c),f[0]&512&&((y=e.$attrsToReflect$)==null||y.push([c,_])),_})]))}}return t},c2e=async(t,e,i,n)=>{let s;if((e.$flags$&32)===0){e.$flags$|=32,i.$lazyBundleId$;{s=t.constructor;const o=t.localName;customElements.whenDefined(o).then(()=>e.$flags$|=128)}if(s&&s.style){let o;typeof s.style=="string"?o=s.style:typeof s.style!="string"&&(e.$modeName$=jbe(t),e.$modeName$&&(o=s.style[e.$modeName$]));const l=Yse(i,e.$modeName$);if(!m9.has(l)){const c=nv("registerStyles",i.$tagName$);Ybe(l,o,!!(i.$flags$&1)),c()}}}e.$ancestorComponent$,Mq(e,!0)},XY=t=>{},u2e=t=>{if((Jo.$flags$&1)===0){const e=Ov(t),i=e.$cmpMeta$,n=nv("connectedCallback",i.$tagName$);e.$flags$&1?(nre(t,e,i.$listeners$),e!=null&&e.$lazyInstance$?XY(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>XY(e.$lazyInstance$))):(e.$flags$|=1,i.$flags$&12&&h2e(t),i.$members$&&Object.entries(i.$members$).map(([s,[r]])=>{if(r&31&&t.hasOwnProperty(s)){const o=t[s];delete t[s],t[s]=o}}),c2e(t,e,i)),n()}},h2e=t=>{const e=t["s-cr"]=ed.createComment("");e["s-cn"]=!0,y0(t,e,t.firstChild)},d2e=async t=>{if((Jo.$flags$&1)===0){const e=Ov(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},zi=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const n=t.prototype.connectedCallback,s=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){Sbe(this,i)},connectedCallback(){const r=Ov(this);nre(this,r,i.$listeners$),u2e(this),n&&n.call(this)},disconnectedCallback(){d2e(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${i.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),t.is=i.$tagName$,l2e(t,i)},IM=(t,e)=>e,nre=(t,e,i,n)=>{i&&i.map(([s,r,o])=>{const l=p2e(t,s),c=f2e(e,o),f=m2e(s);Jo.ael(l,r,c,f),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Jo.rel(l,r,c,f))})},f2e=(t,e)=>i=>{var n;try{Hh.lazyLoad||t.$hostElement$[e](i)}catch(s){CC(s)}},p2e=(t,e)=>e&4?ed:e&8?PC:e&16?ed.body:t,m2e=t=>Pbe?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Wp=globalThis.calciteConfig,g2e=(Wp==null?void 0:Wp.focusTrapStack)||[];Wp!=null&&Wp.logLevel;const WY="2.13.2",y2e="2024-10-24",v2e="e38e2977d";function _2e(){if(Wp&&Wp.version)return;console.info(`Using Calcite Components ${WY} [Date: ${y2e}, Revision: ${v2e}]`);const t=Wp||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:WY,writable:!1}),globalThis.calciteConfig=t}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Df=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function ZY(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(Vse)||t.contains(ybe)&&e?"dark":"light",n=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{r!==o&&n(o),r=o};let r=i();n(r),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function b2e(){Df()&&(document.readyState==="interactive"?ZY():document.addEventListener("DOMContentLoaded",()=>ZY(),{once:!0})),_2e()}const x2e=b2e;x2e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Ea(t,e,i){if(!Df())return;const n=w2e(t);return new n(e,i)}function w2e(t){class e extends window.MutationObserver{constructor(n){super(n),this.observedEntry=[],this.callback=n}observe(n,s){return this.observedEntry.push({target:n,options:s}),super.observe(n,s)}unobserve(n){const s=this.observedEntry.filter(r=>r.target!==n);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),s.forEach(r=>this.observe(r.target,r.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */let RT;const S2e={childList:!0};function $v(t){RT||(RT=Ea("mutation",E2e)),RT.observe(t.el,S2e)}function Rv(t){RT.unobserve(t.el)}function E2e(t){t.forEach(({target:e})=>{Mo(e)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function C2e(t){return t.map(e=>{let i="";for(let n=0;n<e;n++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const mm=()=>C2e([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var sre=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],b9=sre.join(","),rre=typeof Element>"u",sv=rre?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,x9=!rre&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},w9=function t(e,i){var n;i===void 0&&(i=!0);var s=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),r=s===""||s==="true",o=r||i&&e&&t(e.parentNode);return o},P2e=function(e){var i,n=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return n===""||n==="true"},ore=function(e,i,n){if(w9(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(b9));return i&&sv.call(e,b9)&&s.unshift(e),s=s.filter(n),s},are=function t(e,i,n){for(var s=[],r=Array.from(e);r.length;){var o=r.shift();if(!w9(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),c=l.length?l:o.children,f=t(c,!0,n);n.flatten?s.push.apply(s,f):s.push({scopeParent:o,candidates:f})}else{var y=sv.call(o,b9);y&&n.filter(o)&&(i||!e.includes(o))&&s.push(o);var _=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),x=!w9(_,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(_&&x){var S=t(_===!0?o.children:_.children,!0,n);n.flatten?s.push.apply(s,S):s.push({scopeParent:o,candidates:S})}else r.unshift.apply(r,o.children)}}return s},lre=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Py=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||P2e(e))&&!lre(e)?0:e.tabIndex},T2e=function(e,i){var n=Py(e);return n<0&&i&&!lre(e)?0:n},I2e=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},cre=function(e){return e.tagName==="INPUT"},M2e=function(e){return cre(e)&&e.type==="hidden"},A2e=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return i},k2e=function(e,i){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===i)return e[n]},D2e=function(e){if(!e.name)return!0;var i=e.form||x9(e),n=function(l){return i.querySelectorAll('input[type="radio"][name="'+l+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=n(window.CSS.escape(e.name));else try{s=n(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var r=k2e(s,e.form);return!r||r===e},N2e=function(e){return cre(e)&&e.type==="radio"},O2e=function(e){return N2e(e)&&!D2e(e)},$2e=function(e){var i,n=e&&x9(e),s=(i=n)===null||i===void 0?void 0:i.host,r=!1;if(n&&n!==e){var o,l,c;for(r=!!((o=s)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(s)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!r&&s;){var f,y,_;n=x9(s),s=(f=n)===null||f===void 0?void 0:f.host,r=!!((y=s)!==null&&y!==void 0&&(_=y.ownerDocument)!==null&&_!==void 0&&_.contains(s))}}return r},KY=function(e){var i=e.getBoundingClientRect(),n=i.width,s=i.height;return n===0&&s===0},R2e=function(e,i){var n=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var r=sv.call(e,"details>summary:first-of-type"),o=r?e.parentElement:e;if(sv.call(o,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof s=="function"){for(var l=e;e;){var c=e.parentElement,f=x9(e);if(c&&!c.shadowRoot&&s(c)===!0)return KY(e);e.assignedSlot?e=e.assignedSlot:!c&&f!==e.ownerDocument?e=f.host:e=c}e=l}if($2e(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return KY(e);return!1},L2e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var n=0;n<i.children.length;n++){var s=i.children.item(n);if(s.tagName==="LEGEND")return sv.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},S9=function(e,i){return!(i.disabled||w9(i)||M2e(i)||R2e(i,e)||A2e(i)||L2e(i))},LO=function(e,i){return!(O2e(i)||Py(i)<0||!S9(e,i))},F2e=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},z2e=function t(e){var i=[],n=[];return e.forEach(function(s,r){var o=!!s.scopeParent,l=o?s.scopeParent:s,c=T2e(l,o),f=o?t(s.candidates):l;c===0?o?i.push.apply(i,f):i.push(l):n.push({documentOrder:r,tabIndex:c,item:s,isScope:o,content:f})}),n.sort(I2e).reduce(function(s,r){return r.isScope?s.push.apply(s,r.content):s.push(r.content),s},[]).concat(i)},ure=function(e,i){i=i||{};var n;return i.getShadowRoot?n=are([e],i.includeContainer,{filter:LO.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:F2e}):n=ore(e,i.includeContainer,LO.bind(null,i)),z2e(n)},q2e=function(e,i){i=i||{};var n;return i.getShadowRoot?n=are([e],i.includeContainer,{filter:S9.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):n=ore(e,i.includeContainer,S9.bind(null,i)),n},O_=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return sv.call(e,b9)===!1?!1:LO(i,e)},V2e=sre.concat("iframe").join(","),e8=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return sv.call(e,V2e)===!1?!1:S9(i,e)};const hre={getShadowRoot:!0};function Ect(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${mm()}`:""}function Bw(t){return Array.isArray(t)?t:Array.from(t)}function G2e(t){const e=gm(t,`.${Zl.darkMode}, .${Zl.lightMode}`);return e!=null&&e.classList.contains("calcite-mode-dark")?"dark":"light"}function Zp(t){const e="dir",i=`[${e}]`,n=gm(t,i);return n?n.getAttribute(e):"ltr"}function Cct(t){return t?parseFloat(getComputedStyle(t).inlineSize):0}function Aq(t){return t.getRootNode()}function j2e(t){const e=Aq(t);return"host"in e?e:null}function Pct(t,e){if(!t)return 0;const n=document.createElement("canvas").getContext("2d");return n.font=e,n.measureText(t).width}function dre(t){return t.host||null}function TC(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const n=Aq(t);return(i?"getElementById"in n?n.getElementById(i):null:e?n.querySelector(e):null)||TC(dre(n),{selector:e,id:i})}function gm(t,e){return t?t.closest(e)||gm(dre(Aq(t)),e):null}function B2e(t,e){return fre(t,e)}function fre(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:n}=t;return fre(n instanceof ShadowRoot?n.host:n,e)}function H2e(t,e){return!!B2e(e,i=>i===t?!0:void 0)}function U2e(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function tm(t){if(t)return U2e(t)?t.setFocus():t.focus()}function Y2e(t){if(t)return ure(t,hre)[0]??t}function IC(t){var e;(e=Y2e(t))==null||e.focus()}const yE=":not([slot])";function kq(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const n=e?Array.isArray(e)?e.map(s=>`[slot="${s}"]`).join(","):`[slot="${e}"]`:yE;return i!=null&&i.all?X2e(t,n,i):W2e(t,n,i)}function pre(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function X2e(t,e,i){let n=e===yE?pre(t,yE):Array.from(t.querySelectorAll(e));n=i&&i.direct===!1?n:n.filter(r=>r.parentElement===t),n=i!=null&&i.matches?n.filter(r=>r==null?void 0:r.matches(i.matches)):n;const s=i==null?void 0:i.selector;return s?n.map(r=>Array.from(r.querySelectorAll(s))).reduce((r,o)=>[...r,...o],[]).filter(r=>!!r):n}function W2e(t,e,i){let n=e===yE?pre(t,yE)[0]||null:t.querySelector(e);n=i&&i.direct===!1||(n==null?void 0:n.parentElement)===t?n:null,n=i!=null&&i.matches?n!=null&&n.matches(i.matches)?n:null:n;const s=i==null?void 0:i.selector;return s?n==null?void 0:n.querySelector(s):n}function Z2e(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function K2e(t,e){return t.filter(i=>i.matches(e))}function FO(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function JY(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function xr(t){return(!!t).toString()}function J2e(t){return yn(t)||exe(t)}function Q2e(t){return txe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function exe(t){return!!Q2e(t)}function txe(t){return t.currentTarget.assignedNodes({flatten:!0})}function yn(t){return!!nc(t).length}function nc(t,e){return ixe(t.target,e)}function ixe(t,e){const i=t.assignedElements({flatten:!0});return e?K2e(i,e):i}function DS(t){return!!(t.isPrimary&&t.button===0)}function nxe(t){return t.detail===0}const s0=(t,e,i,n=!0)=>{const s=t.indexOf(e),r=s===0,o=s===t.length-1;n&&(i=i==="previous"&&r?"last":i==="next"&&o?"first":i);let l;return i==="previous"?l=t[s-1]||t[n?t.length-1:s]:i==="next"?l=t[s+1]||t[n?0:s]:i==="last"?l=t[t.length-1]:l=t[0],tm(l),l};function sxe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function rxe(t,e,i,n){return oxe(t,e,"transition",i,n)}async function oxe(t,e,i,n,s){const r=window.getComputedStyle(t),o=r.transitionDuration,l=r.transitionProperty,c=o.split(","),y=l.split(",").map(D=>D.trim()).indexOf(e),_=c[y]??c[0];function x(){requestAnimationFrame(()=>{n==null||n(),requestAnimationFrame(()=>s==null?void 0:s())})}if(_==="0s"){x();return}const S="transitionstart",P="transitionend",A="transitioncancel";return new Promise(D=>{const N=window.setTimeout(()=>{t.removeEventListener(S,F),t.removeEventListener(P,G),t.removeEventListener(A,G),x(),D()},parseFloat(_)*1e3);t.addEventListener(S,F),t.addEventListener(P,G),t.addEventListener(A,G);function F(V){V.target===t&&QY(V)===e&&(window.clearTimeout(N),t.removeEventListener(S,F),n==null||n())}function G(V){V.target===t&&QY(V)===e&&(t.removeEventListener(P,G),t.removeEventListener(A,G),s==null||s(),D())}})}function axe(t){return"propertyName"in t}function QY(t){return axe(t)?t.propertyName:t.animationName}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Td={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",contentBehindCenterContent:"center-content"},ph={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},lxe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",cxe=lxe,uxe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=e=>{this.hasHeader=!!yn(e)},this.handleFooterSlotChange=e=>{this.hasFooter=!!yn(e)},this.handleAlertsSlotChange=e=>{var i;this.hasAlerts=!!yn(e),(i=nc(e))==null||i.map(n=>{n.tagName==="CALCITE-ALERT"&&(n.embedded=!0)})},this.handleSheetsSlotChange=e=>{var i;this.hasSheets=!!yn(e),(i=nc(e))==null||i.map(n=>{n.tagName==="CALCITE-SHEET"&&(n.embedded=!0)})},this.handleModalsSlotChange=e=>{var i;this.hasModals=!!yn(e),(i=nc(e))==null||i.map(n=>{n.tagName==="CALCITE-MODAL"&&(n.embedded=!0)})},this.handlePanelTopChange=e=>{this.hasPanelTop=yn(e)},this.handlePanelBottomChange=e=>{this.hasPanelBottom=yn(e)},this.handleDialogsSlotChange=e=>{var i;this.hasDialogs=!!yn(e),(i=nc(e))==null||i.map(n=>{n.tagName==="CALCITE-DIALOG"&&(n.embedded=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasDialogs=!1,this.hasSheets=!1,this.hasPanelTop=!1,this.hasPanelBottom=!1,this.hasOnlyPanelBottom=!1,this.panelIsResizing=!1}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}updateHasOnlyPanelBottom(){this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom}connectedCallback(){$v(this)}disconnectedCallback(){Rv(this)}renderHeader(){return Me("div",{hidden:!this.hasHeader},Me("slot",{key:"header",name:ph.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return Me("div",{class:Td.footer,hidden:!this.hasFooter,key:"footer"},Me("slot",{name:ph.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return Me("div",{hidden:!this.hasAlerts},Me("slot",{key:"alerts",name:ph.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return Me("div",{hidden:!this.hasSheets},Me("slot",{key:"sheets",name:ph.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return Me("div",{hidden:!this.hasModals},Me("slot",{key:"modals",name:ph.modals,onSlotchange:this.handleModalsSlotChange}))}renderDialogs(){return Me("div",{hidden:!this.hasDialogs},Me("slot",{key:"dialogs",name:ph.dialogs,onSlotchange:this.handleDialogsSlotChange}))}renderContent(){const{panelIsResizing:e}=this,i=Me("slot",{key:"default-slot"}),n=e?Me("div",{class:Td.contentNonInteractive},i):i,s=Me("slot",{key:"center-row-slot",name:ph.centerRow}),r=Me("slot",{key:"panel-bottom-slot",name:ph.panelBottom,onSlotchange:this.handlePanelBottomChange}),o=Me("slot",{key:"panel-top-slot",name:ph.panelTop,onSlotchange:this.handlePanelTopChange}),l="content-container";return this.contentBehind?[Me("div",{class:{[Td.content]:!0,[Td.contentBehind]:!0},key:l},n),Me("div",{class:{[Td.contentBehindCenterContent]:!0,[Td.contentBottom]:this.hasOnlyPanelBottom}},o,r,s)]:[Me("div",{class:{[Td.content]:!0,[Td.contentBottom]:this.hasOnlyPanelBottom},key:l},o,n,r,s)]}renderMain(){return Me("div",{class:Td.main},Me("slot",{name:ph.panelStart}),this.renderContent(),Me("slot",{name:ph.panelEnd}))}renderPositionedSlots(){return Me("div",{class:Td.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderDialogs(),this.renderSheets())}render(){return Me(IM,{key:"6864b8b95b6edd871ad622b0d49a3f4a42a0a8a8"},this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get watchers(){return{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}}static get style(){return cxe}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasDialogs:[32],hasSheets:[32],hasPanelTop:[32],hasPanelBottom:[32],hasOnlyPanelBottom:[32],panelIsResizing:[32]},[[0,"calciteInternalShellPanelResizeStart","handleCalciteInternalShellPanelResizeStart"],[0,"calciteInternalShellPanelResizeEnd","handleCalciteInternalShellPanelResizeEnd"]],{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}]);function hxe(){if(typeof customElements>"u")return;["calcite-shell"].forEach(e=>{switch(e){case"calcite-shell":customElements.get(e)||customElements.define(e,uxe);break}})}hxe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function MC(t){return t==="Enter"||t===" "}const mre=["0","1","2","3","4","5","6","7","8","9"];/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const dxe=new RegExp("\\.(0+)?$"),fxe=new RegExp("0+$");class Gn{constructor(e){if(e instanceof Gn)return e;const[i,n]=_xe(e).split(".").concat("");this.value=BigInt(i+n.padEnd(Gn.DECIMALS,"0").slice(0,Gn.DECIMALS))+BigInt(Gn.ROUNDED&&n[Gn.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(Gn.DECIMALS+1,"0"),i=e.slice(0,-Gn.DECIMALS),n=e.slice(-Gn.DECIMALS).replace(fxe,"");return{integers:i,decimals:n}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),s=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&s.unshift({type:"minusSign",value:e.minusSign}),n.length&&(s.push({type:"decimal",value:e.decimal}),n.split("").forEach(r=>s.push({type:"fraction",value:r}))),s}format(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),s=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,r=n.length?`${e.decimal}${n.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${s}${r}`}add(e){return Gn.fromBigInt(this.value+new Gn(e).value)}subtract(e){return Gn.fromBigInt(this.value-new Gn(e).value)}multiply(e){return Gn._divRound(this.value*new Gn(e).value,Gn.SHIFT)}divide(e){return Gn._divRound(this.value*Gn.SHIFT,new Gn(e).value)}}Gn.DECIMALS=100;Gn.ROUNDED=!0;Gn.SHIFT=BigInt("1"+"0".repeat(Gn.DECIMALS));Gn._divRound=(t,e)=>Gn.fromBigInt(t/e+(Gn.ROUNDED?t*BigInt(2)/e%BigInt(2):BigInt(0)));Gn.fromBigInt=t=>Object.assign(Object.create(Gn.prototype),{value:t,isNegative:t<BigInt(0)});function Dq(t){return!(!t||isNaN(Number(t)))}function Ict(t){return!t||!bxe(t)?"":E9(t,e=>{let i=!1;const n=e.split("").filter((s,r)=>s.match(/\./g)&&!i?(i=!0,!0):s.match(/-/g)&&r===0?!0:mre.includes(s)).join("");return Dq(n)?new Gn(n).toString():""})}const gre=/^([-0])0+(?=\d)/,pxe=/(?!^\.)\.$/,mxe=/(?!^-)-/g,gxe=/^-\b0\b\.?0*$/,yxe=/0*$/,Mct=t=>E9(t,e=>{const i=e.replace(mxe,"").replace(pxe,"").replace(gre,"$1");return Dq(i)?gxe.test(i)?i:vxe(i):e});function vxe(t){const e=t.split(".")[1],i=new Gn(t).toString(),[n,s]=i.split(".");return e&&s!==e?`${n}.${e}`:i}function E9(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((n,s)=>e(s===1?n.replace(/\./g,""):n)).join("e").replace(/^e/,"1e"):e(t)}function _xe(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const n=t.charAt(0)==="-",s=+e[1],r=e[0].split("."),o=(n?r[0].substring(1):r[0])||"",l=r[1]||"",c=(_,x)=>{const S=Math.abs(x)-_.length,P=S>0?`${"0".repeat(S)}${_}`:_;return`${P.slice(0,x)}.${P.slice(x)}`},f=(_,x)=>{const S=x>_.length?`${_}${"0".repeat(x-_.length)}`:_;return`${S.slice(0,x)}.${S.slice(x)}`},y=s>0?`${o}${f(l,s)}`:`${c(o,s)}${l}`;return`${n?"-":""}${y.charAt(0)==="."?"0":""}${y.replace(dxe,"").replace(gre,"")}`}function bxe(t){return mre.some(e=>t.includes(e))}function Act(t,e,i){const n=e.split(".")[1];if(n){const s=n.match(yxe)[0];if(s&&i.delocalize(t).length!==e.length&&n.indexOf("e")===-1){const r=i.decimal;return t=t.includes(r)?t:`${t}${r}`,t.padEnd(t.length+s.length,i.localize("0"))}}return t}const P0="en",xxe=["ar","bg","bs","ca","cs","da","de","el",P0,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],wxe=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",P0,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],Sxe=["arab","arabext","latn"],yre=t=>Sxe.includes(t),t8=new Intl.NumberFormat().resolvedOptions().numberingSystem,vre=t8==="arab"||!yre(t8)?"latn":t8,Exe=t=>yre(t)?t:vre;function Nq(t,e="cldr"){const i=e==="cldr"?wxe:xxe;return t?i.includes(t)?t:(t=t.toLowerCase(),t==="nb"?"no":e==="t9n"&&t==="pt"?"pt-BR":(t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(n,s,r)=>`${s}-${r.toUpperCase()}`),i.includes(t)||(t=t.split("-")[0])),t==="zh"?"zh-CN":i.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),P0))):P0}function kct(t){switch(t){case"it-CH":return"de-CH";case"bs":return"bs-Cyrl";default:return t}}const vE=new Set;function Ca(t){Cxe(t),vE.size===0&&(LT==null||LT.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),vE.add(t)}function Cxe(t){t.effectiveLocale=Pxe(t)}function Pa(t){vE.delete(t),vE.size===0&&LT.disconnect()}const LT=Ea("mutation",t=>{t.forEach(e=>{const i=e.target;vE.forEach(n=>{if(!H2e(i,n.el))return;const r=gm(n.el,"[lang]");if(!r){n.effectiveLocale=P0;return}const o=r.lang;n.effectiveLocale=r.hasAttribute("lang")&&o===""?P0:o})})});function Pxe(t){var e;return t.el.lang||((e=gm(t.el,"[lang]"))==null?void 0:e.lang)||document.documentElement.lang||P0}class _re{constructor(){this.delocalize=e=>this._numberFormatOptions?E9(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?E9(e,i=>Dq(i.trim())?new Gn(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=Nq(e==null?void 0:e.locale),e.numberingSystem=Exe(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===P0&&e.numberingSystem===vre&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((s,r)=>[s,r])),n=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=n.find(s=>s.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?" ":this._actualGroup,this._decimal=n.find(s=>s.type==="decimal").value,this._minusSign=n.find(s=>s.type==="minusSign").value,this._getDigitIndex=s=>i.get(s)}}const eX=new _re;let Hw,tX;function Txe(t={}){return Object.entries(t).sort(([e],[i])=>e.localeCompare(i)).map(e=>`${e[0]}-${e[1]}`).flat().join(":")}function Dct(t,e){t=Nq(t),Hw||(Hw=new Map),tX!==t&&(Hw.clear(),tX=t);const i=Txe(e),n=Hw.get(i);if(n)return n;const s=new Intl.DateTimeFormat(t,e);return Hw.set(i,s),s}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const zO=(t,e,i)=>Math.max(e,Math.min(t,i)),Ixe=new RegExp(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),qO=t=>{const e=(""+t).match(Ixe);return!e||parseInt(e[1])===0?0:Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0))};function Nct(t){return qO(t)>0&&t>0?parseFloat(`0.${t.toString().split(".")[1]}`):t}function Oct(t,e,i,n,s){return(t-e)*(s-n)/(i-e)+n}function $ct(t,e,i){return t<i?-1:t>e-i?1:0}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const QP={};async function Mxe(t,e){const i=`${e}_${t}`;return QP[i]||(QP[i]=fetch(Eq(`./assets/${e}/t9n/messages_${t}.json`)).then(n=>(n.ok||iX(),n.json())).catch(()=>iX())),QP[i]}function iX(){throw new Error("could not fetch component message bundle")}function Oq(t){t.messages={...t.defaultMessages,...t.messageOverrides}}function Axe(){}async function Ml(t){t.defaultMessages=await bre(t,t.effectiveLocale),Oq(t)}async function bre(t,e){if(!Df())return{};const{el:i}=t,s=i.tagName.toLowerCase().replace("calcite-","");return Mxe(Nq(e,"t9n"),s)}async function Al(t,e){t.defaultMessages=await bre(t,e),Oq(t)}function kl(t){t.onMessagesChange=kxe}function Dl(t){t.onMessagesChange=Axe}function kxe(){Oq(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const og={container:"container",content:"content",contentHeader:"content__header",contentBody:"content__body",floatContent:"float--content",contentOverlay:"content--overlay",separator:"separator",floatAll:"float-all"},nX={actionBar:"action-bar",header:"header"},Dxe=`:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-detached-max-height:unset;--calcite-shell-panel-max-height:unset;--calcite-internal-shell-panel-shadow-block-start:0 4px 8px -1px rgba(0, 0, 0, 0.08),
    0 2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-block-end:0 -4px 8px -1px rgba(0, 0, 0, 0.08),
    0 -2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-start:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-end:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04)}.calcite--rtl.content--overlay{--calcite-internal-shell-panel-shadow-inline-start:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-end:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][display-mode=float-all]) .content{flex:2}:host([layout=vertical][width-scale=s]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 300px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=s][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=m]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 420px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=m][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=l]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 680px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 340px)}:host([layout=vertical][width-scale=l][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal][height-scale=s]) .content{--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 20vh)
  )}:host([layout=horizontal]) .content{--calcite-internal-shell-panel-min-height:var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 30vh)
  )}:host([layout=horizontal][height-scale=l]) .content{--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 40vh)
  )}.container{pointer-events:none;box-sizing:border-box;display:flex;block-size:100%;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-color-text-2)}.container *{box-sizing:border-box}.container.float-all{margin-block:0.5rem;margin-inline:0.5rem}:host([layout=horizontal]) .container{block-size:auto;inline-size:100%;flex-direction:column}:host(:hover) .separator:not(:hover):not(:focus),:host(:focus-within) .separator:not(:hover):not(:focus){opacity:1;background-color:var(--calcite-color-border-3)}.separator{pointer-events:auto;position:absolute;display:flex;background-color:transparent;opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;cursor:col-resize;outline:none}.separator:hover{opacity:1;background-color:var(--calcite-color-border-2)}.separator:focus{background-color:var(--calcite-color-brand);opacity:1}:host([layout=vertical]) .separator{inset-block:0px;block-size:100%;inline-size:0.125rem;cursor:col-resize}:host([layout=horizontal][position=start]) .separator{inset-block-end:0px}:host([layout=horizontal][position=end]) .separator{inset-block-start:0px}:host([layout=horizontal]) .separator{inset-inline-end:0px;block-size:0.125rem;inline-size:100%;cursor:row-resize}:host([layout=vertical][position=start]) .separator{inset-inline-end:-2px}:host([layout=horizontal][position=start]) .separator{inset-block-end:-2px}:host([layout=vertical][position=end]) .separator{inset-inline-start:-2px}:host([layout=horizontal][position=end]) .separator{inset-block-start:-2px}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.content{pointer-events:auto;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]:not([display-mode=float-all])) .content{inline-size:var(--calcite-internal-shell-panel-width);max-inline-size:var(--calcite-internal-shell-panel-max-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=vertical][display-mode=float-all]) .content{inline-size:var(--calcite-internal-shell-panel-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=horizontal]) .content{block-size:var(--calcite-internal-shell-panel-height);max-block-size:var(--calcite-internal-shell-panel-max-height);min-block-size:var(--calcite-internal-shell-panel-min-height)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-start)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-end)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-start)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-end)}.float--content{margin-inline:0.5rem;margin-block:0.5rem auto;block-size:auto;overflow:hidden;border-radius:0.25rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem))}.float--content ::slotted(calcite-panel),.float--content ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .float--content{margin-block:0.5rem}:host([position=start]) .float--content ::slotted(calcite-panel),:host([position=start]) .float--content ::slotted(calcite-flow),:host([position=end]) .float--content ::slotted(calcite-panel),:host([position=end]) .float--content ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]:not([display-mode=float-all])) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]:not([display-mode=float-all])) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]:not([display-mode=float-all])) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,Nxe=Dxe,Oxe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalShellPanelResizeStart=Mt(this,"calciteInternalShellPanelResizeStart",6),this.calciteInternalShellPanelResizeEnd=Mt(this,"calciteInternalShellPanelResizeEnd",6),this.initialContentWidth=null,this.initialContentHeight=null,this.initialClientX=null,this.initialClientY=null,this.contentWidthMax=null,this.contentWidthMin=null,this.contentHeightMax=null,this.contentHeightMin=null,this.step=1,this.stepMultiplier=10,this.actionBars=[],this.storeContentEl=e=>{this.contentEl=e},this.getKeyAdjustedSize=e=>{const{key:i}=e,{el:n,step:s,stepMultiplier:r,layout:o,contentWidthMin:l,contentWidthMax:c,initialContentWidth:f,initialContentHeight:y,contentHeightMin:_,contentHeightMax:x,position:S}=this,P=s*r;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(i)>-1&&e.preventDefault();const D=Zp(n),N=["ArrowLeft","ArrowRight"],F=["ArrowDown","ArrowUp"],G=D==="rtl"&&N.includes(i)?-1:1;if(o==="horizontal"?S==="end"?i===F[1]||i===N[0]:i===F[0]||i===N[1]:i===F[1]||(S==="end"?i===N[0]:i===N[1])){const W=e.shiftKey?P:s;return o==="horizontal"?y+G*W:f+G*W}if(o==="horizontal"?S==="end"?i===F[0]||i===N[0]:i===F[1]||i===N[1]:i===F[0]||(S==="end"?i===N[1]:i===N[0])){const W=e.shiftKey?P:s;return o==="horizontal"?y-G*W:f-G*W}return i==="Home"&&o==="horizontal"&&typeof _=="number"?_:i==="Home"&&o==="vertical"&&typeof l=="number"?l:i==="End"&&o==="horizontal"&&typeof x=="number"?x:i==="End"&&o==="vertical"&&typeof c=="number"?c:i==="PageDown"?o==="horizontal"?y-P:f-P:i==="PageUp"?o==="horizontal"?y+P:f+P:null},this.initialKeydownWidth=e=>{this.setInitialContentWidth();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentWidth(i)},this.initialKeydownHeight=e=>{this.setInitialContentHeight();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentHeight(i)},this.separatorKeyDown=e=>{this.layout==="horizontal"?this.initialKeydownHeight(e):this.initialKeydownWidth(e)},this.separatorPointerMove=e=>{e.preventDefault();const{el:i,layout:n,initialContentWidth:s,initialContentHeight:r,position:o,initialClientX:l,initialClientY:c}=this,f=n==="horizontal"?e.clientY-c:e.clientX-l,y=n==="vertical"&&Zp(i)==="rtl"?-1:1,_=o==="end"?-y*f:y*f;n==="horizontal"?this.setContentHeight(r+_):this.setContentWidth(s+_)},this.separatorPointerUp=e=>{DS(e)&&(this.calciteInternalShellPanelResizeEnd.emit(),e.preventDefault(),window.removeEventListener("pointerup",this.separatorPointerUp),window.removeEventListener("pointermove",this.separatorPointerMove))},this.setInitialContentHeight=()=>{var e;this.initialContentHeight=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().height},this.setInitialContentWidth=()=>{var e;this.initialContentWidth=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().width},this.separatorPointerDown=e=>{if(!DS(e))return;this.calciteInternalShellPanelResizeStart.emit(),e.preventDefault();const{separatorEl:i}=this;i&&document.activeElement!==i&&i.focus(),this.layout==="horizontal"?(this.setInitialContentHeight(),this.initialClientY=e.clientY):(this.setInitialContentWidth(),this.initialClientX=e.clientX),window.addEventListener("pointerup",this.separatorPointerUp),window.addEventListener("pointermove",this.separatorPointerMove)},this.connectSeparator=e=>{this.disconnectSeparator(),this.separatorEl=e,e==null||e.addEventListener("pointerdown",this.separatorPointerDown)},this.disconnectSeparator=()=>{var e;(e=this.separatorEl)==null||e.removeEventListener("pointerdown",this.separatorPointerDown)},this.setActionBarsLayout=e=>{e.forEach(i=>i.layout=this.layout)},this.handleActionBarSlotChange=e=>{const i=nc(e).filter(n=>n==null?void 0:n.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)},this.handleHeaderSlotChange=e=>{this.hasHeader=yn(e)},this.collapsed=!1,this.detached=!1,this.displayMode="dock",this.detachedHeightScale=void 0,this.heightScale=void 0,this.widthScale="m",this.layout="vertical",this.position="start",this.resizable=!1,this.messages=void 0,this.messageOverrides=void 0,this.contentWidth=null,this.contentHeight=null,this.defaultMessages=void 0,this.effectiveLocale="",this.hasHeader=!1}handleDetached(e){e?this.displayMode="float-content":(this.displayMode==="float-content"||this.displayMode==="float")&&(this.displayMode="dock")}handleDisplayMode(e){this.detached=e==="float-content"||e==="float"}handleDetachedHeightScale(e){this.heightScale=e}handleHeightScale(e){this.detachedHeightScale=e}layoutHandler(){this.setActionBarsLayout(this.actionBars)}onMessagesChange(){}connectedCallback(){$v(this),Ca(this),kl(this)}async componentWillLoad(){await Ml(this)}disconnectedCallback(){Rv(this),this.disconnectSeparator(),Pa(this),Dl(this)}componentDidLoad(){this.updateAriaValues()}effectiveLocaleChange(){Al(this,this.effectiveLocale)}renderHeader(){return Me("div",{class:og.contentHeader,hidden:!this.hasHeader,key:"header"},Me("slot",{name:nX.header,onSlotchange:this.handleHeaderSlotChange}))}render(){const{collapsed:e,position:i,initialContentWidth:n,initialContentHeight:s,contentWidth:r,contentWidthMax:o,contentWidthMin:l,contentHeight:c,contentHeightMax:f,contentHeightMin:y,resizable:_,layout:x,displayMode:S}=this,P=Zp(this.el),A=S!=="float-content"&&S!=="float"&&_,D=A?x==="horizontal"?c?{height:`${c}px`}:null:r?{width:`${r}px`}:null:null,N=!e&&A?Me("div",{"aria-label":this.messages.resize,"aria-orientation":x==="horizontal"?"vertical":"horizontal","aria-valuemax":x=="horizontal"?f:o,"aria-valuemin":x=="horizontal"?y:l,"aria-valuenow":x=="horizontal"?c??s:r??n,class:og.separator,key:"separator",onKeyDown:this.separatorKeyDown,ref:this.connectSeparator,role:"separator",tabIndex:0,"touch-action":"none"}):null,F=()=>x==="horizontal"?i==="start"?Zl.calciteAnimateInDown:Zl.calciteAnimateInUp:P==="ltr"&&i==="end"||P==="rtl"&&i==="start"?Zl.calciteAnimateInLeft:Zl.calciteAnimateInRight,G=Me("div",{class:{[Zl.rtl]:P==="rtl",[og.content]:!0,[og.contentOverlay]:S==="overlay",[og.floatContent]:S==="float-content"||S==="float",[Zl.calciteAnimate]:S==="overlay",[F()]:S==="overlay"},hidden:e,key:"content",ref:this.storeContentEl,style:D},this.renderHeader(),Me("div",{class:og.contentBody},Me("slot",null)),N),B=[Me("slot",{key:"action-bar",name:nX.actionBar,onSlotchange:this.handleActionBarSlotChange}),G];return i==="end"&&B.reverse(),Me("div",{class:{[og.container]:!0,[og.floatAll]:S==="float-all"}},B)}setContentWidth(e){const{contentWidthMax:i,contentWidthMin:n}=this,s=Math.round(e);this.contentWidth=typeof i=="number"&&typeof n=="number"?zO(s,n,i):s}updateAriaValues(){const{contentEl:e}=this,i=e&&getComputedStyle(e);i&&(this.layout==="horizontal"?this.updateHeights(i):this.updateWidths(i),Mo(this))}setContentHeight(e){const{contentHeightMax:i,contentHeightMin:n}=this,s=Math.round(e);this.contentHeight=typeof i=="number"&&typeof n=="number"?zO(s,n,i):s}updateWidths(e){const i=parseInt(e.getPropertyValue("max-width"),10),n=parseInt(e.getPropertyValue("min-width"),10),s=parseInt(e.getPropertyValue("width"),10);typeof s=="number"&&!isNaN(s)&&(this.initialContentWidth=s),typeof i=="number"&&!isNaN(i)&&(this.contentWidthMax=i),typeof n=="number"&&!isNaN(n)&&(this.contentWidthMin=n)}updateHeights(e){const i=parseInt(e.getPropertyValue("max-height"),10),n=parseInt(e.getPropertyValue("min-height"),10),s=parseInt(e.getPropertyValue("height"),10);typeof s=="number"&&!isNaN(s)&&(this.initialContentHeight=s),typeof i=="number"&&!isNaN(i)&&(this.contentHeightMax=i),typeof n=="number"&&!isNaN(n)&&(this.contentHeightMin=n)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Nxe}},[1,"calcite-shell-panel",{collapsed:[516],detached:[516],displayMode:[513,"display-mode"],detachedHeightScale:[513,"detached-height-scale"],heightScale:[513,"height-scale"],widthScale:[513,"width-scale"],layout:[513],position:[513],resizable:[516],messages:[1040],messageOverrides:[1040],contentWidth:[32],contentHeight:[32],defaultMessages:[32],effectiveLocale:[32],hasHeader:[32]},void 0,{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function $xe(){if(typeof customElements>"u")return;["calcite-shell-panel"].forEach(e=>{switch(e){case"calcite-shell-panel":customElements.get(e)||customElements.define(e,Oxe);break}})}$xe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Rxe=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function Lxe(t){return`${t.split("-").map((n,s)=>s===0?n:`${n[0].toUpperCase()}${n.slice(1)}`).join("")}${Rxe.includes(t)?"Input":"Change"}`}const VO="hidden-form-input";function $q(t){return"checked"in t}const GO=new WeakMap,Rq=new WeakSet;function Fxe(t,e){if(gm(e.parentElement,"[form]"))return!0;const n="calciteInternalFormComponentRegister";let s=!1;return t.addEventListener(n,r=>{s=r.composedPath().some(o=>Rq.has(o)),r.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(n,{bubbles:!0,composed:!0})),s}function zxe(t,{status:e,message:i,icon:n}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=n),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function xre(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?gm(t,"calcite-radio-button-group"):t}const qxe=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function sX(t){var l;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,n=xre(e==null?void 0:e.parentElement);if(!n)return;const s=(l=n==null?void 0:n.nodeName)==null?void 0:l.toLowerCase(),r=s==null?void 0:s.split("-");if(r.length<2||r[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in n&&(n.validity=e==null?void 0:e.validity),n.dispatchEvent(qxe),zxe(n,{message:i,icon:!0,status:"invalid"});const o=Lxe(s);n.addEventListener(o,()=>{"status"in n&&(n.status="idle"),"validationIcon"in n&&!n.validationIcon&&(n.validationIcon=!1),"validationMessage"in n&&n.validationMessage===i&&(n.validationMessage=""),"validity"in n&&(n.validity=e==null?void 0:e.validity)},{once:!0})}function Vxe(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",sX,!0),e.requestSubmit(),e.removeEventListener("invalid",sX,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const n of i)if(n!=null&&n.validationMessage){n==null||n.setFocus();break}}),!0):!1}function Gxe(t){var e;(e=t.formEl)==null||e.reset()}function jxe(t){const{el:e,value:i}=t,n=wre(t);if(!n||Fxe(n,e))return;t.formEl=n,t.defaultValue=i,$q(t)&&(t.defaultChecked=t.checked);const s=(t.onFormReset||Bxe).bind(t);n.addEventListener("reset",s),GO.set(t.el,s),Rq.add(e)}function wre(t){const{el:e,form:i}=t;return i?TC(e,{id:i}):gm(e,"form")}function Bxe(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),$q(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue}function Hxe(t){const{el:e,formEl:i}=t;if(!i)return;const n=GO.get(e);i.removeEventListener("reset",n),GO.delete(e),t.formEl=null,Rq.delete(e)}function Uxe(t,e){t.defaultValue=e}const Yxe="calciteInternalHiddenInputInput",Sre=t=>{t.target.dispatchEvent(new CustomEvent(Yxe,{bubbles:!0}))},rX=t=>t.removeEventListener("input",Sre);function Xxe(t){const{el:e,formEl:i,name:n,value:s}=t,{ownerDocument:r}=e,o=e.querySelectorAll(`input[slot="${VO}"]`);if(!i||!n){o.forEach(_=>{rX(_),_.remove()});return}const l=Array.isArray(s)?s:[s],c=[],f=new Set;o.forEach(_=>{const x=l.find(S=>S==_.value);x!=null?(f.add(x),oX(t,_,x)):c.push(_)});let y;l.forEach(_=>{if(f.has(_))return;let x=c.pop();x||(x=r.createElement("input"),x.slot=VO),y||(y=r.createDocumentFragment()),y.append(x),x.addEventListener("input",Sre),oX(t,x,_)}),y&&e.append(y),c.forEach(_=>{rX(_),_.remove()})}function oX(t,e,i){var f;const{defaultValue:n,disabled:s,form:r,name:o,required:l}=t;e.defaultValue=n,e.disabled=s,e.name=o,e.required=l,e.tabIndex=-1,r?e.setAttribute("form",r):e.removeAttribute("form"),$q(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(f=t.syncHiddenFormInput)==null||f.call(t,e);const c=xre(t.el);if(c&&"validity"in c)for(const y in{...e==null?void 0:e.validity})c.validity[y]=e.validity[y]}const Wxe=({component:t})=>(Xxe(t),Me("slot",{name:VO}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Zxe(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function Ere(t){t.target.disabled&&t.preventDefault()}const Cre=["mousedown","mouseup","click"];function Pre(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const C9={capture:!0};function gd(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),Kxe(t);return}Qxe(t),t.el.removeAttribute("aria-disabled")}function Kxe(t){t.el.click=Zxe,Jxe(t.el)}function Jxe(t){t.addEventListener("pointerdown",Ere,C9),Cre.forEach(e=>t.addEventListener(e,Pre,C9))}function Qxe(t){delete t.el.click,ewe(t.el)}function ewe(t){t.removeEventListener("pointerdown",Ere,C9),Cre.forEach(e=>t.removeEventListener(e,Pre,C9))}const twe={container:"interaction-container"},yd=({disabled:t},e)=>Me("div",{class:twe.container,inert:t},...e);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Yo(t){return t==="l"?"m":"s"}async function Tre(t){await(iwe(t)?t.componentOnReady():new Promise(e=>requestAnimationFrame(()=>e())))}function iwe(t){return typeof t.componentOnReady=="function"}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Ire="calciteInternalLabelClick",MM="calciteInternalLabelConnected",P9="calciteInternalLabelDisconnected",aX="calcite-label",C2=new WeakMap,NS=new WeakMap,_E=new WeakMap,T9=new WeakMap,Hy=new Set,nwe=t=>{const{id:e}=t,i=e&&TC(t,{selector:`${aX}[for="${e}"]`});if(i)return i;const n=gm(t,aX);return!n||swe(n,t)?null:n};function swe(t,e){let i;const n="custom-element-ancestor-check",s=o=>{o.stopImmediatePropagation();const l=o.composedPath();i=l.slice(l.indexOf(e),l.indexOf(t))};return t.addEventListener(n,s,{once:!0}),e.dispatchEvent(new CustomEvent(n,{composed:!0,bubbles:!0})),t.removeEventListener(n,s),i.filter(o=>o!==e&&o!==t).filter(o=>{var l;return(l=o.tagName)==null?void 0:l.includes("-")}).length>0}function AM(t){if(!t)return;const e=nwe(t.el);if(NS.has(e)&&e===t.labelEl||!e&&Hy.has(t))return;const i=owe.bind(t);if(e){t.labelEl=e;const n=C2.get(e)||[];n.push(t),C2.set(e,n.sort(Are)),NS.has(t.labelEl)||(NS.set(t.labelEl,lX),t.labelEl.addEventListener(Ire,lX)),Hy.delete(t),document.removeEventListener(MM,_E.get(t)),T9.set(t,i),document.addEventListener(P9,i)}else Hy.has(t)||(i(),document.removeEventListener(P9,T9.get(t)))}function Mre(t){if(!t||(Hy.delete(t),document.removeEventListener(MM,_E.get(t)),document.removeEventListener(P9,T9.get(t)),_E.delete(t),T9.delete(t),!t.labelEl))return;const e=C2.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(Ire,NS.get(t.labelEl)),NS.delete(t.labelEl)),C2.set(t.labelEl,e.filter(i=>i!==t).sort(Are)),t.labelEl=null}function Are(t,e){return sxe(t.el,e.el)?-1:1}function kre(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function lX(t){const e=t.detail.sourceEvent.target,i=C2.get(this),n=i.find(o=>o.el===e);if(i.includes(n))return;const r=i[0];r.disabled||r.onLabelClick(t)}function rwe(){Hy.has(this)&&AM(this)}function owe(){Hy.add(this);const t=_E.get(this)||rwe.bind(this);_E.set(this,t),document.addEventListener(MM,t)}async function awe(t){var n;if(await Tre(t),C2.has(t))return;const i=(n=t.ownerDocument)==null?void 0:n.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const s of Hy)if(s.el===i){AM(s);break}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Dre=new WeakMap,Nre=new WeakMap;function Sr(t){Nre.set(t,new Promise(e=>Dre.set(t,e)))}function Er(t){Dre.get(t)()}function lwe(t){return Nre.get(t)}async function Cr(t){if(await lwe(t),!!Df())return Mo(t),new Promise(e=>requestAnimationFrame(()=>e()))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const cwe={flipRtl:"flip-rtl"},Ore={},i8={},$re={s:16,m:24,l:32};function Rre({icon:t,scale:e}){const i=$re[e],n=dwe(t),s=n.charAt(n.length-1)==="F";return`${s?n.substring(0,n.length-1):n}${i}${s?"F":""}`}async function uwe(t){const e=Rre(t),i=Lre(e);if(i)return i;i8[e]||(i8[e]=fetch(Eq(`./assets/icon/${e}.json`)).then(s=>s.json()).catch(()=>(console.error(`"${e}" is not a valid calcite-ui-icon name`),"")));const n=await i8[e];return Ore[e]=n,n}function hwe(t){return Lre(Rre(t))}function Lre(t){return Ore[t]}function dwe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const s=/[a-z]/i;t=i.map((r,o)=>r.replace(s,function(c,f){return o===0&&f===0?c:c.toUpperCase()})).join("")}return e?`i${t}`:t}const fwe=":host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",pwe=fwe,mwe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var e;(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}render(){const{el:e,flipRtl:i,pathData:n,scale:s,textLabel:r}=this,o=Zp(e),l=$re[s],c=!!r,f=[].concat(n||"");return Me(er,{key:"724265acdc6fb528bf7b25d7ec445c73a63f4c8e","aria-hidden":xr(!c),"aria-label":c?r:null,role:c?"img":null},Me("svg",{key:"864ee2d80bebd282543ba5d94c57f84b48a6204d","aria-hidden":"true",class:{[cwe.flipRtl]:o==="rtl"&&i,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${l} ${l}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},f.map(y=>typeof y=="string"?Me("path",{d:y}):Me("path",{d:y.d,opacity:"opacity"in y?y.opacity:1}))))}async loadIconPathData(){const{icon:e,scale:i,visible:n}=this;if(!Df()||!e||!n)return;const s={icon:e,scale:i},r=hwe(s)||await uwe(s);e===this.icon&&(this.pathData=r)}waitUntilVisible(e){if(this.intersectionObserver=Ea("intersection",i=>{i.forEach(n=>{n.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return pwe}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function Pr(){if(typeof customElements>"u")return;["calcite-icon"].forEach(e=>{switch(e){case"calcite-icon":customElements.get(e)||customElements.define(e,mwe);break}})}Pr();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const ib={loader:"loader",loaderParts:"loader__svgs",loaderPart:"loader__svg",loaderPartId:t=>`${ib.loaderPart}--${t}`,loaderText:"loader__text",loaderPercentage:"loader__percentage"},gwe='@charset "UTF-8";@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{position:relative;margin-inline:auto;display:none;align-items:center;justify-content:center;opacity:1;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke:var(--calcite-color-brand);stroke-width:3;fill:none;transform:scale(1, 1);animation:loader-color-shift calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) alternate-reverse infinite linear;padding-block:var(--calcite-loader-padding, 4rem);will-change:contents}:host([scale=s]){--calcite-loader-font-size:var(--calcite-font-size--3);--calcite-loader-size:2rem;--calcite-loader-size-inline:0.75rem;--calcite-internal-loader-value-line-height:0.625rem}:host([scale=m]){--calcite-loader-font-size:var(--calcite-font-size-0);--calcite-loader-size:4rem;--calcite-loader-size-inline:1rem;--calcite-internal-loader-value-line-height:1.375rem}:host([scale=l]){--calcite-loader-font-size:var(--calcite-font-size-2);--calcite-loader-size:6rem;--calcite-loader-size-inline:1.5rem;--calcite-internal-loader-value-line-height:1.71875rem}:host([no-padding]){padding-block:0px}:host{display:flex}.loader__text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);margin-block-start:calc(var(--calcite-loader-size) + 1.5rem)}.loader__percentage{display:block;text-align:center;color:var(--calcite-color-text-1);font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size);line-height:var(--calcite-internal-loader-value-line-height);align-self:center}.loader__svgs{position:absolute;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.66 / var(--calcite-internal-duration-factor));animation-name:loader-clockwise;display:flex}.loader__svg{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);animation-iteration-count:infinite;animation-timing-function:linear}.loader__svg--1{animation-name:loader-offset-1}.loader__svg--2{animation-name:loader-offset-2}.loader__svg--3{animation-name:loader-offset-3}:host([type=determinate]),:host([type=determinate-value]){animation:none;stroke:var(--calcite-color-border-3)}:host([type=determinate]) .loader__svgs,:host([type=determinate-value]) .loader__svgs{animation:none}:host([type=determinate]) .loader__svg--3,:host([type=determinate-value]) .loader__svg--3{animation:none;stroke:var(--calcite-color-brand);stroke-dasharray:150.79632;transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([inline]){position:relative;margin:0px;animation:none;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size-inline);min-block-size:var(--calcite-loader-size-inline);inline-size:var(--calcite-loader-size-inline);margin-inline-end:calc(var(--calcite-loader-size-inline) * 0.5);vertical-align:calc(var(--calcite-loader-size-inline) * -1 * 0.2)}:host([inline]) .loader__svgs{inset-block-start:0px;margin:0px;inset-inline-start:0;inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([inline]) .loader__svg{inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([complete]){opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1000ms, transform var(--calcite-internal-animation-timing-medium) linear 1000ms}:host([complete]) .loader__svgs{opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms, transform calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms}:host([complete]) .loader__percentage{color:var(--calcite-color-brand);transform:scale(1.05, 1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear, transform var(--calcite-internal-animation-timing-medium) linear}.loader__svg--1{stroke-dasharray:27.9252444444 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 4.8 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-1{0%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-83.7757333333}100%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:-279.2524444444}}.loader__svg--2{stroke-dasharray:55.8504888889 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.4 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-2{0%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-97.7383555556}100%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:-279.2524444444}}.loader__svg--3{stroke-dasharray:13.9626222222 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 7.734 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-3{0%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-76.7944222222}100%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:-279.2524444444}}@keyframes loader-color-shift{0%{stroke:var(--calcite-color-brand)}33%{stroke:var(--calcite-color-brand-press)}66%{stroke:var(--calcite-color-brand-hover)}100%{stroke:var(--calcite-color-brand)}}@keyframes loader-clockwise{100%{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}',ywe=gwe,vwe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.formatValue=()=>this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100),this.complete=!1,this.inline=!1,this.label=void 0,this.scale="m",this.type="indeterminate",this.value=0,this.text="",this.effectiveLocale=""}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}connectedCallback(){Ca(this),this.updateFormatter()}disconnectedCallback(){Pa(this)}componentWillLoad(){requestAnimationFrame(()=>this.valueChangeHandler())}render(){const{el:e,inline:i,label:n,scale:s,text:r,type:o,value:l}=this,c=e.id||mm(),f=.45,y=i?this.getInlineSize(s):this.getSize(s),_=y*f,x=`0 0 ${y} ${y}`,S=o.startsWith("determinate"),P=2*_*Math.PI,A=l/100*P,D=P-A,N=Math.floor(l),F={"stroke-dasharray":`${A} ${D}`};return Me(er,{key:"8272bdfae9fff51b19ed8fa66197eb93b53feb4c","aria-label":n,"aria-valuemax":S?"100":void 0,"aria-valuemin":S?"0":void 0,"aria-valuenow":S?N.toString():void 0,id:c,role:"progressbar"},Me("div",{key:"3d410c178af39bb57cc478bdd06c0392f6ba71a3",class:ib.loaderParts},[1,2,3].map(G=>Me("svg",{"aria-hidden":"true",class:{[ib.loaderPart]:!0,[ib.loaderPartId(G)]:!0},key:G,style:S&&G===3?F:void 0,viewBox:x},Me("circle",{cx:y/2,cy:y/2,r:_}))),S&&Me("div",{key:"4ccc633930dee031bf769908d712df39e0677bbb",class:ib.loaderPercentage},this.formatValue())),r&&Me("div",{key:"6d0d51988bdfafee2a19faed9e14d3bda06d79b5",class:ib.loaderText},r))}formatterPropsChange(){this.updateFormatter()}getSize(e){return{s:32,m:56,l:80}[e]}getInlineSize(e){return{s:12,m:16,l:20}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.effectiveLocale||(this.formatter=new Intl.NumberFormat(this.effectiveLocale,{style:"percent"}))}get el(){return this}static get watchers(){return{value:["valueChangeHandler"],effectiveLocale:["formatterPropsChange"],type:["formatterPropsChange"]}}static get style(){return ywe}},[1,"calcite-loader",{complete:[1540],inline:[516],label:[1],scale:[513],type:[513],value:[2],text:[1],effectiveLocale:[32]},void 0,{value:["valueChangeHandler"],effectiveLocale:["formatterPropsChange"],type:["formatterPropsChange"]}]);function Nl(){if(typeof customElements>"u")return;["calcite-loader"].forEach(e=>{switch(e){case"calcite-loader":customElements.get(e)||customElements.define(e,vwe);break}})}Nl();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const gc={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},_we=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle}:host([round]){border-radius:50px}:host([round]) a,:host([round]) button{border-radius:50px}:host button,:host a{outline-color:transparent}:host button:focus,:host a:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host button,:host a{--calcite-button-content-margin-internal:0.5rem;--calcite-button-padding-x-internal:7px;--calcite-button-padding-y-internal:3px;padding-block:var(--calcite-button-padding-y-internal);padding-inline:var(--calcite-button-padding-x-internal);position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-radius:0px;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, box-shadow var(--calcite-animation-timing) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host button:hover,:host a:hover{text-decoration-line:none}:host button span,:host a span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content{margin-inline:var(--calcite-button-content-margin-internal)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-content-margin-internal:0.75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-button-content-margin-internal:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-button-content-margin-internal)}.icon{position:relative;margin:0px;display:inline-flex;font-weight:var(--calcite-font-weight-normal);line-height:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(0.5)}100%{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}100%{inline-size:0;opacity:0;transform:scale(0.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0px}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-button-content-margin-internal)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{border-width:1px;border-style:solid;border-color:transparent}:host([kind=brand]) button,:host([kind=brand]) a{background-color:var(--calcite-color-brand);color:var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) button:focus,:host([kind=brand]) a:hover,:host([kind=brand]) a:focus{background-color:var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{background-color:var(--calcite-color-brand-press)}:host([kind=brand]) button calcite-loader,:host([kind=brand]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=danger]) button,:host([kind=danger]) a{background-color:var(--calcite-color-status-danger);color:var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) button:focus,:host([kind=danger]) a:hover,:host([kind=danger]) a:focus{background-color:var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{background-color:var(--calcite-color-status-danger-press)}:host([kind=danger]) button calcite-loader,:host([kind=danger]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=neutral]) button,:host([kind=neutral]) a{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) button:focus,:host([kind=neutral]) a:hover,:host([kind=neutral]) a:focus{background-color:var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{background-color:var(--calcite-color-foreground-1)}:host([kind=neutral]) button calcite-loader,:host([kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) button:focus,:host([kind=inverse]) a:hover,:host([kind=inverse]) a:focus{background-color:var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{background-color:var(--calcite-color-inverse-press)}:host([kind=inverse]) button calcite-loader,:host([kind=inverse]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button calcite-loader,:host([appearance=outline-fill][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline-fill][kind=inverse]) button calcite-loader,:host([appearance=outline-fill][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline]) button,:host([appearance=outline]) a{border-width:1px;border-style:solid;background-color:transparent;box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:transparent;color:var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:transparent;color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button calcite-loader,:host([appearance=outline][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline][kind=inverse]) button calcite-loader,:host([appearance=outline][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:transparent}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) button:focus,:host([appearance=transparent]:not(.enable-editing-button)) a:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{color:var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{color:var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{color:var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{color:var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{border-block-start-width:1px;border-block-end-width:1px;color:var(--calcite-color-text-3);border-block-start-color:var(--calcite-color-border-input);border-block-end-color:var(--calcite-color-border-input);border-block-style:solid}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:not(.content--slotted){--calcite-button-padding-y-internal:0}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].enable-editing-button) button{background-color:transparent}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button,:host([appearance=transparent][kind=inverse]) a,:host([appearance=transparent][kind=inverse]) calcite-loader{color:var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-button-padding-y-internal:3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-button-padding-x-internal:11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-padding-y-internal:7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-button-padding-x-internal:15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-button-padding-x-internal:1rem;--calcite-button-padding-y-internal:11px}:host([scale=l]) .button-padding--shrunk{--calcite-button-padding-y-internal:9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y-internal:0.625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,bwe=_we,xwe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=Ea("mutation",()=>this.updateHasContent()),this.resizeObserver=Ea("resize",()=>this.setTooltipText()),this.handleClick=()=>{const{type:e}=this;this.href||(e==="submit"?Vxe(this):e==="reset"&&Gxe(this))},this.setTooltipText=()=>{const{contentEl:e}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)},this.setChildEl=e=>{var i;this.childEl=e,e&&((i=this.resizeObserver)==null||i.observe(e))},this.alignment="center",this.appearance="solid",this.label=void 0,this.kind="brand",this.disabled=!1,this.form=void 0,this.download=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.loading=!1,this.name=void 0,this.rel=void 0,this.round=!1,this.scale="m",this.splitChild=!1,this.target=void 0,this.type="button",this.width="auto",this.messages=void 0,this.messageOverrides=void 0,this.hasContent=!1,this.effectiveLocale="",this.defaultMessages=void 0,this.tooltipText=void 0}handleGlobalAttributesChanged(){Mo(this)}onMessagesChange(){}async connectedCallback(){Ca(this),kl(this),this.setupTextContentObserver(),AM(this),this.formEl=wre(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),Mre(this),Pa(this),Dl(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}async componentWillLoad(){Sr(this),Df()&&(this.updateHasContent(),await Ml(this))}componentDidLoad(){Er(this),this.setTooltipText()}componentDidRender(){gd(this)}render(){const e=this.href?"a":"button",i=e,n=this.loading?Me("div",{class:gc.buttonLoader},Me("calcite-loader",{class:this.loading?gc.loadingIn:gc.loadingOut,inline:!0,label:this.messages.loading,scale:this.scale==="l"?"m":"s"})):null,s=!this.iconStart&&!this.iconEnd,r=Me("calcite-icon",{key:"f1036c0a1bf5740fe63806e3559ea66fac29b726",class:{[gc.icon]:!0,[gc.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:Yo(this.scale)}),o=Me("calcite-icon",{key:"d2c22ecf9ca23426b4c4a3b42d623f35ee988a44",class:{[gc.icon]:!0,[gc.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:Yo(this.scale)}),l=Me("span",{key:"d1803021f5fa106c9e296402ec0a1498ecdf36c7",class:gc.content,ref:c=>this.contentEl=c},Me("slot",{key:"d2f729c16f9c803ffa109b68d58a22a4383dd426"}));return Me(yd,{key:"2757c795d29f812cf11def4df108837b9971dcdb",disabled:this.disabled},Me(i,{key:"e67a4882c8a0c13d6b5f98bc8c5b53c10ba36e3e","aria-busy":xr(this.loading),"aria-expanded":this.el.ariaExpanded?this.el.ariaExpanded:null,"aria-label":this.loading?this.messages.loading:kre(this),"aria-live":"polite",class:{[gc.buttonPadding]:s,[gc.buttonPaddingShrunk]:!s,[gc.contentSlotted]:this.hasContent,[gc.iconStartEmpty]:!this.iconStart,[gc.iconEndEmpty]:!this.iconEnd},disabled:e==="button"?this.disabled:null,download:e==="a"?this.download===!0||this.download===""?"":this.download||null:null,href:e==="a"&&this.href,name:e==="button"&&this.name,onClick:this.handleClick,ref:this.setChildEl,rel:e==="a"&&this.rel,tabIndex:this.disabled?-1:null,target:e==="a"&&this.target,title:this.tooltipText,type:e==="button"&&this.type},n,this.iconStart?r:null,this.hasContent?l:null,this.iconEnd?o:null))}async setFocus(){var e;await Cr(this),(e=this.childEl)==null||e.focus()}effectiveLocaleChange(){Al(this,this.effectiveLocale)}updateHasContent(){var i,n;const e=this.el.textContent.trim().length>0||this.el.childNodes.length>0;this.hasContent=this.el.childNodes.length===1&&((i=this.el.childNodes[0])==null?void 0:i.nodeName)==="#text"?((n=this.el.textContent)==null?void 0:n.trim().length)>0:e}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{"aria-expanded":["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return bwe}},[1,"calcite-button",{alignment:[513],appearance:[513],label:[1],kind:[513],disabled:[516],form:[513],download:[520],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],loading:[516],name:[513],rel:[513],round:[516],scale:[513],splitChild:[520,"split-child"],target:[513],type:[513],width:[513],messages:[1040],messageOverrides:[1040],hasContent:[32],effectiveLocale:[32],defaultMessages:[32],tooltipText:[32],setFocus:[64]},void 0,{"aria-expanded":["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Lq(){if(typeof customElements>"u")return;["calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-button":customElements.get(e)||customElements.define(e,xwe);break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break}})}Lq();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function wwe(t,e,i){const n=e[0]-t[0],s=i[0]-e[0],r=e[1]-t[1],o=i[1]-e[1],l=r/(n||s<0&&0),c=o/(s||n<0&&0),f=(l*s+c*n)/(n+s);return(Math.sign(l)+Math.sign(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(f))||0}function cX(t,e,i){const n=e[0]-t[0],s=e[1]-t[1];return n?(3*s/n-i)/2:i}function uX(t,e,i,n,s){const[r,o]=t,[l,c]=e,f=(l-r)/3,y=s([r+f,o+f*i]).join(","),_=s([l-f,c-f*n]).join(","),x=s([l,c]).join(",");return`C ${y} ${_} ${x}`}function Swe({width:t,height:e,min:i,max:n}){const s=n[0]-i[0],r=n[1]-i[1];return o=>{const l=(o[0]-i[0])/s*t,c=e-o[1]/r*e;return[l,c]}}function Ewe(t){const[e,i]=t[0],n=[e,i],s=[e,i];return t.reduce(({min:r,max:o},[l,c])=>({min:[Math.min(r[0],l),Math.min(r[1],c)],max:[Math.max(o[0],l),Math.max(o[1],c)]}),{min:n,max:s})}function Cwe({data:t,min:e,max:i,t:n}){if(t.length===0)return"";const[s,r]=n(t[0]),[o,l]=n(e),[c]=n(i);let f,y,_;const x=t.reduce((A,D,N)=>{if(y=t[N-2],_=t[N-1],N>1){const F=wwe(y,_,D),G=f===void 0?cX(y,_,F):f,V=uX(y,_,G,F,n);return f=F,`${A} ${V}`}return A},`M ${o},${l} L ${o},${r} L ${s},${r}`),S=t[t.length-1],P=uX(_,S,f,cX(_,S,f),n);return`${x} ${P} L ${c},${l} Z`}const Pwe=":host{display:block;block-size:100%}.svg{fill:currentColor;stroke:transparent;margin:0px;display:block;block-size:100%;inline-size:100%;padding:0px}.svg .graph-path--highlight{fill:var(--calcite-color-brand);opacity:0.5}:host([hidden]){display:none}[hidden]{display:none}",Twe=Pwe,Iwe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.graphId=`calcite-graph-${mm()}`,this.resizeObserver=Ea("resize",()=>Mo(this)),this.data=[],this.colorStops=void 0,this.highlightMin=void 0,this.highlightMax=void 0,this.min=void 0,this.max=void 0}connectedCallback(){var e;(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;(e=this.resizeObserver)==null||e.disconnect()}render(){const{data:e,colorStops:i,el:n,highlightMax:s,highlightMin:r,min:o,max:l}=this,c=this.graphId,{clientHeight:f,clientWidth:y}=n;if(!e||e.length===0)return Me("svg",{"aria-hidden":"true",class:"svg",height:f,preserveAspectRatio:"none",viewBox:`0 0 ${y} ${f}`,width:y});const{min:_,max:x}=Ewe(e);let S=_,P=x;(o<_[0]||o>_[0])&&(S=[o,0]),(l>x[0]||l<x[0])&&(P=[l,x[1]]);const A=Swe({min:S,max:P,width:y,height:f}),[D]=A([r,P[1]]),[N]=A([s,P[1]]),F=Cwe({data:e,min:_,max:x,t:A}),G=i?`url(#linear-gradient-${c})`:void 0;return Me("svg",{"aria-hidden":"true",class:"svg",height:f,preserveAspectRatio:"none",viewBox:`0 0 ${y} ${f}`,width:y},i?Me("defs",null,Me("linearGradient",{id:`linear-gradient-${c}`,x1:"0",x2:"1",y1:"0",y2:"0"},i.map(({offset:V,color:B,opacity:W})=>Me("stop",{offset:`${V*100}%`,"stop-color":B,"stop-opacity":W})))):null,r!==void 0?[Me("mask",{height:"100%",id:`${c}1`,width:"100%",x:"0%",y:"0%"},Me("path",{d:`
            M 0,0
            L ${D-1},0
            L ${D-1},${f}
            L 0,${f}
            Z
          `,fill:"white"})),Me("mask",{height:"100%",id:`${c}2`,width:"100%",x:"0%",y:"0%"},Me("path",{d:`
            M ${D+1},0
            L ${N-1},0
            L ${N-1},${f}
            L ${D+1}, ${f}
            Z
          `,fill:"white"})),Me("mask",{height:"100%",id:`${c}3`,width:"100%",x:"0%",y:"0%"},Me("path",{d:`
                M ${N+1},0
                L ${y},0
                L ${y},${f}
                L ${N+1}, ${f}
                Z
              `,fill:"white"})),Me("path",{class:"graph-path",d:F,fill:G,mask:`url(#${c}1)`}),Me("path",{class:"graph-path--highlight",d:F,fill:G,mask:`url(#${c}2)`}),Me("path",{class:"graph-path",d:F,fill:G,mask:`url(#${c}3)`})]:Me("path",{class:"graph-path",d:F,fill:G}))}get el(){return this}static get style(){return Twe}},[1,"calcite-graph",{data:[16],colorStops:[16],highlightMin:[2,"highlight-min"],highlightMax:[2,"highlight-max"],min:[514],max:[514]}]);function Fre(){if(typeof customElements>"u")return;["calcite-graph"].forEach(e=>{switch(e){case"calcite-graph":customElements.get(e)||customElements.define(e,Iwe);break}})}Fre();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Dn={container:"container",containerRange:"container--range",graph:"graph",handle:"handle",handleExtension:"handle-extension",handleLabel:"handle__label",handleLabelMinValue:"handle__label--minValue",handleLabelValue:"handle__label--value",hyphen:"hyphen",hyphenWrap:"hyphen--wrap",static:"static",thumb:"thumb",thumbActive:"thumb--active",thumbContainer:"thumb-container",thumbMinValue:"thumb--minValue",thumbPrecise:"thumb--precise",thumbValue:"thumb--value",tick:"tick",tickActive:"tick--active",tickLabel:"tick__label",tickMax:"tick__label--max",tickMin:"tick__label--min",ticks:"ticks",track:"track",trackRange:"track__range",transformed:"transformed"},Mwe=250,Awe=`@charset "UTF-8";:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{--calcite-slider-handle-size:0.625rem;--calcite-slider-handle-extension-height:0.4rem;--calcite-slider-container-font-size:var(--calcite-font-size--3)}.scale--s .handle__label,.scale--s .tick__label{line-height:.75rem}.scale--m{--calcite-slider-handle-size:0.875rem;--calcite-slider-handle-extension-height:0.5rem;--calcite-slider-container-font-size:var(--calcite-font-size--2)}.scale--m .handle__label,.scale--m .tick__label{line-height:1rem}.scale--l{--calcite-slider-handle-size:1rem;--calcite-slider-handle-extension-height:0.65rem;--calcite-slider-container-font-size:var(--calcite-font-size--1)}.scale--l .handle__label,.scale--l .tick__label{line-height:1rem}.handle__label,.tick__label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);font-size:var(--calcite-slider-container-font-size)}:host{display:block}.container{position:relative;display:block;overflow-wrap:normal;word-break:normal;padding-inline:calc(var(--calcite-slider-handle-size) * 0.5);padding-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-inline:0;--calcite-slider-full-handle-height:calc(
    var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height)
  );touch-action:none;-webkit-user-select:none;user-select:none}:host([disabled]) .track__range,:host([disabled]) .tick--active{background-color:var(--calcite-color-text-3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.375rem}.scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.5rem}.scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.55rem}:host([precise]:not([has-histogram])) .container .thumb--value{--calcite-slider-thumb-y-offset:calc(var(--calcite-slider-full-handle-height) * -1)}.thumb-container{position:relative;max-inline-size:100%}.thumb{--calcite-slider-thumb-x-offset:calc(var(--calcite-slider-handle-size) * 0.5);position:absolute;margin:0px;display:flex;cursor:pointer;flex-direction:column;align-items:center;border-style:none;background-color:transparent;padding:0px;font-family:inherit;outline:2px solid transparent;outline-offset:2px;transform:translate(var(--calcite-slider-thumb-x-offset), var(--calcite-slider-thumb-y-offset))}.thumb .handle__label.static,.thumb .handle__label.transformed{position:absolute;inset-block:0px;opacity:0}.thumb .handle__label.hyphen::after{content:"—";display:inline-block;inline-size:1em}.thumb .handle__label.hyphen--wrap{display:flex}.thumb .handle{box-sizing:border-box;border-radius:9999px;background-color:var(--calcite-color-foreground-1);outline-color:transparent;block-size:var(--calcite-slider-handle-size);inline-size:var(--calcite-slider-handle-size);box-shadow:0 0 0 2px var(--calcite-color-text-3) inset;transition:border var(--calcite-internal-animation-timing-medium) ease, background-color var(--calcite-internal-animation-timing-medium) ease, box-shadow var(--calcite-animation-timing) ease}.thumb .handle-extension{inline-size:0.125rem;block-size:var(--calcite-slider-handle-extension-height);background-color:var(--calcite-color-text-3)}.thumb:hover .handle{box-shadow:0 0 0 3px var(--calcite-color-brand) inset}.thumb:hover .handle-extension{background-color:var(--calcite-color-brand)}.thumb:focus .handle{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.thumb:focus .handle-extension{background-color:var(--calcite-color-brand)}.thumb.thumb--minValue{transform:translate(calc(var(--calcite-slider-thumb-x-offset) * -1), var(--calcite-slider-thumb-y-offset))}.thumb.thumb--precise{--calcite-slider-thumb-y-offset:-0.125rem}:host([label-handles]) .thumb{--calcite-slider-thumb-x-offset:50%}:host([label-handles]):host(:not([has-histogram])) .scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-1.4375rem}:host([label-handles]):host(:not([has-histogram])) .scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-1.875rem}:host([label-handles]):host(:not([has-histogram])) .scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-2rem}:host([has-histogram][label-handles]) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--minValue.thumb--precise .handle__label{margin-block-start:0.5em}:host(:not([has-histogram]):not([precise])) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--value .handle__label{margin-block-end:0.5em}:host([label-handles][precise]):host(:not([has-histogram])) .scale--s .thumb--value{--calcite-slider-thumb-y-offset:-2.075rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--m .thumb--value{--calcite-slider-thumb-y-offset:-2.75rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--l .thumb--value{--calcite-slider-thumb-y-offset:-3.0625rem}.thumb:focus .handle,.thumb--active .handle{background-color:var(--calcite-color-brand);box-shadow:0 0 8px 0 rgba(0, 0, 0, 0.16)}.thumb:hover.thumb--precise::after,.thumb:focus.thumb--precise::after,.thumb--active.thumb--precise::after{background-color:var(--calcite-color-brand)}.track{position:relative;block-size:0.125rem;border-radius:0px;background-color:var(--calcite-color-border-2);transition:all var(--calcite-internal-animation-timing-medium) ease-in}.track__range{position:absolute;inset-block-start:0px;block-size:0.125rem;background-color:var(--calcite-color-brand)}.container--range .track__range:hover{cursor:ew-resize}.container--range .track__range::after{position:absolute;inline-size:100%;content:"";inset-block-start:calc(var(--calcite-slider-full-handle-height) * 0.5 * -1);block-size:calc(var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height))}@media (forced-colors: active){.thumb{outline-width:0;outline-offset:0}.handle{outline:2px solid transparent;outline-offset:2px}.thumb:focus .handle,.thumb .handle-extension,.thumb:hover .handle-extension,.thumb:focus .handle-extension,.thumb:active .handle-extension{background-color:canvasText}.track{background-color:canvasText}.track__range{background-color:highlight}}.tick{position:absolute;block-size:0.25rem;inline-size:0.125rem;border-width:1px;border-style:solid;background-color:var(--calcite-color-border-input);border-color:var(--calcite-color-foreground-1);inset-block-start:-2px;pointer-events:none;margin-inline-start:calc(-1 * 0.125rem)}.tick--active{background-color:var(--calcite-color-brand)}.tick__label{pointer-events:none;margin-block-start:0.875rem;display:flex;justify-content:center}.tick__label--min{transition:opacity var(--calcite-animation-timing)}.tick__label--max{transition:opacity var(--calcite-internal-animation-timing-fast)}:host([has-histogram][label-handles]) .tick__label--min,:host([has-histogram][label-handles]) .tick__label--max,:host([has-histogram][precise]) .tick__label--min,:host([has-histogram][precise]) .tick__label--max{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-3)}.graph{color:var(--calcite-color-foreground-3);block-size:48px}:host([label-ticks][ticks]) .container{padding-block-end:calc(0.875rem + var(--calcite-slider-container-font-size))}:host([has-histogram]):host([precise][label-handles]) .container{padding-block-end:calc(var(--calcite-slider-full-handle-height) + 1em)}:host([has-histogram]):host([label-handles]:not([precise])) .container{padding-block-end:calc(var(--calcite-slider-handle-size) * 0.5 + 1em)}:host([has-histogram]):host([precise]:not([label-handles])) .container{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container{padding-block-start:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container--range{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([label-handles]:not([precise])) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container--range{padding-block-end:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,kwe=Awe;function yc(t){return Array.isArray(t)}const Dwe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSliderInput=Mt(this,"calciteSliderInput",6),this.calciteSliderChange=Mt(this,"calciteSliderChange",6),this.handleKeyDown=e=>{const i=this.shouldMirror(),{activeProp:n,max:s,min:r,pageStep:o,step:l}=this,c=this[n],{key:f}=e;if(MC(f)){e.preventDefault();return}let y;if(f==="ArrowUp"||f==="ArrowRight"?y=c+l*(i&&f==="ArrowRight"?-1:1):f==="ArrowDown"||f==="ArrowLeft"?y=c-l*(i&&f==="ArrowLeft"?-1:1):f==="PageUp"?o&&(y=c+o):f==="PageDown"?o&&(y=c-o):f==="Home"?y=r:f==="End"&&(y=s),isNaN(y))return;e.preventDefault();const _=Number(y.toFixed(qO(l)));this.setValue({[n]:this.clamp(_,n)})},this.activeProp="value",this.guid=`calcite-slider-${mm()}`,this.onThumbBlur=()=>{this.activeProp=null},this.onThumbFocus=e=>{const i=e.currentTarget;this.activeProp=i.getAttribute("data-value-prop")},this.onThumbPointerDown=e=>{const i=e.currentTarget;this.pointerDownDragStart(e,i.getAttribute("data-value-prop"))},this.onTrackPointerDown=e=>{this.pointerDownDragStart(e,"minMaxValue")},this.dragUpdate=e=>{if(!this.disabled&&(e.preventDefault(),this.dragProp)){const i=this.mapToRange(e.clientX||e.pageX);if(yc(this.value)&&this.dragProp==="minMaxValue")if(this.minValueDragRange&&this.maxValueDragRange&&this.minMaxValueRange){const n=i-this.minValueDragRange,s=i+this.maxValueDragRange;s<=this.max&&n>=this.min&&s-n===this.minMaxValueRange&&this.setValue({minValue:this.clamp(n,"minValue"),maxValue:this.clamp(s,"maxValue")})}else this.minValueDragRange=i-this.minValue,this.maxValueDragRange=this.maxValue-i,this.minMaxValueRange=this.maxValue-this.minValue;else this.setValue({[this.dragProp]:this.clamp(i,this.dragProp)})}},this.pointerUpDragEnd=e=>{this.disabled||!DS(e)||this.dragEnd(e)},this.dragEnd=e=>{this.disabled||(this.removeDragListeners(),this.focusActiveHandle(e.clientX),this.lastDragPropValue!=this[this.dragProp]&&this.emitChange(),this.dragProp=null,this.lastDragPropValue=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.minMaxValueRange=null)},this.storeTrackRef=e=>{this.trackEl=e},this.storeThumbRef=e=>{if(!e)return;e.getAttribute("data-value-prop")==="minValue"?this.minHandle=e:this.maxHandle=e},this.formatValue=e=>(eX.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},eX.localize(e.toString())),this.disabled=!1,this.fillPlacement="start",this.form=void 0,this.groupSeparator=!1,this.hasHistogram=!1,this.histogram=void 0,this.histogramStops=void 0,this.labelHandles=!1,this.labelFormatter=void 0,this.labelTicks=!1,this.max=100,this.maxLabel=void 0,this.maxValue=void 0,this.min=0,this.minLabel=void 0,this.minValue=void 0,this.mirrored=!1,this.name=void 0,this.numberingSystem=void 0,this.pageStep=void 0,this.precise=!1,this.required=!1,this.snap=!1,this.step=1,this.ticks=void 0,this.value=0,this.scale="m",this.effectiveLocale="",this.minMaxValueRange=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.tickValues=[]}histogramWatcher(e){this.hasHistogram=!!e}ticksWatcher(){this.tickValues=this.generateTickValues()}valueHandler(){this.setMinMaxFromValue()}minMaxValueHandler(){this.setValueFromMinMax()}connectedCallback(){Ca(this),this.setMinMaxFromValue(),this.setValueFromMinMax(),AM(this),jxe(this)}disconnectedCallback(){Mre(this),Hxe(this),Pa(this),this.removeDragListeners()}componentWillLoad(){Sr(this),yc(this.value)||(this.value=this.snap?this.getClosestStep(this.value):this.clamp(this.value)),this.ticksWatcher(),this.histogramWatcher(this.histogram),Uxe(this,this.value)}componentDidLoad(){Er(this)}componentDidRender(){this.labelHandles&&(this.adjustHostObscuredHandleLabel("value"),yc(this.value)&&(this.adjustHostObscuredHandleLabel("minValue"),this.precise&&!this.hasHistogram||this.hyphenateCollidingRangeHandleLabels())),this.hideObscuredBoundingTickLabels(),gd(this)}render(){const e=this.el.id||this.guid,i=yc(this.value)?this.maxValue:this.value,n=this.minValue||this.min,s=this.shouldUseMinValue(),r=this.getUnitInterval(s?this.minValue:n)*100,o=this.getUnitInterval(i)*100,l=this.shouldMirror(),c=yc(this.value),f=this.buildThumbType("max"),y=this.renderThumb({type:f,thumbPlacement:f.includes("histogram")?"below":"above",maxInterval:o,minInterval:r,mirror:l}),_=this.buildThumbType("min"),x=c&&this.renderThumb({type:_,thumbPlacement:_.includes("histogram")||_.includes("precise")?"below":"above",maxInterval:o,minInterval:r,mirror:l}),S=c?"start":this.fillPlacement,P=S==="none"?{left:"unset",right:"unset"}:S==="end"?{left:`${l?r:o}%`,right:`${l?o:r}%`}:{left:`${l?100-o:r}%`,right:`${l?r:100-o}%`};return Me(er,{key:"dee9376120224b51dfa12f3e87fbdce4a481a1ed",id:e,onKeyDown:this.handleKeyDown,onTouchStart:this.handleTouchStart},Me(yd,{key:"65bca4d477d57ced846ef97b466917b6d7fc2f21",disabled:this.disabled},Me("div",{key:"99dd57b50ded2302ca1d255708d9e4bd90de3ecb","aria-label":kre(this),class:{[Dn.container]:!0,[Dn.containerRange]:c,[`scale--${this.scale}`]:!0}},this.renderGraph(),Me("div",{key:"47647c0d347232a0ddb384333b15860a0264aefa",class:Dn.track,ref:this.storeTrackRef},Me("div",{key:"3dc176871f6245f2dde77a016ddc747ad9571d3d",class:Dn.trackRange,onPointerDown:this.onTrackPointerDown,style:P}),Me("div",{key:"0c08b977678d6ac7e8b9944157e51948969a5dc5",class:Dn.ticks},this.tickValues.map(A=>{const D=`${this.getUnitInterval(A)*100}%`;let N=!1;if(S==="start"||S==="end")if(s)N=A>=this.minValue&&A<=this.maxValue;else{const F=S==="start"?n:i,G=S==="start"?i:this.max;N=A>=F&&A<=G}return Me("span",{class:{[Dn.tick]:!0,[Dn.tickActive]:N},style:{left:l?"":D,right:l?D:""}},this.renderTickLabel(A))}))),Me("div",{key:"51996cb05142dbeec20093ca12b017adee23f293",class:Dn.thumbContainer},x,y,Me(Wxe,{key:"6fd5c00374205d47e226a417674264417323a5c3",component:this})))))}renderThumb({type:e,mirror:i,thumbPlacement:n,minInterval:s,maxInterval:r}){const o=e.includes("labeled"),l=e.includes("precise"),c=e.includes("min"),f=yc(this.value),y=c?this.minValue:f?this.maxValue:this.value,_=c?"minValue":f?"maxValue":"value",x=c?this.minLabel:f?this.maxLabel:this.minLabel,S=c?this.minValue:y,P=_==="minValue"?this.internalLabelFormatter(this.minValue,"min"):_==="maxValue"?this.internalLabelFormatter(this.maxValue,"max"):this.internalLabelFormatter(y,"value"),A=c?{left:`${i?100-s:s}%`}:{right:`${i?r:100-r}%`},D=`${Dn.handleLabel} ${c?Dn.handleLabelMinValue:Dn.handleLabelValue}`,F=[...o?[Me("span",{"aria-hidden":"true",class:D},P),Me("span",{"aria-hidden":"true",class:`${D} ${Dn.static}`},P),Me("span",{"aria-hidden":"true",class:`${D} ${Dn.transformed}`},P)]:[],Me("div",{class:Dn.handle}),l&&Me("div",{class:Dn.handleExtension})];return n==="below"&&F.reverse(),Me("div",{"aria-label":x,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":S,class:{[Dn.thumb]:!0,[Dn.thumbValue]:!c,[Dn.thumbActive]:this.lastDragProp!=="minMaxValue"&&this.dragProp===_,[Dn.thumbPrecise]:l,[Dn.thumbMinValue]:c},"data-value-prop":_,key:e,onBlur:this.onThumbBlur,onFocus:this.onThumbFocus,onPointerDown:this.onThumbPointerDown,ref:this.storeThumbRef,role:"slider",style:A,tabIndex:0},F)}renderGraph(){return this.histogram?Me("calcite-graph",{class:Dn.graph,colorStops:this.histogramStops,data:this.histogram,highlightMax:yc(this.value)?this.maxValue:this.value,highlightMin:yc(this.value)?this.minValue:this.min,max:this.max,min:this.min}):null}renderTickLabel(e){const{hasHistogram:i,labelHandles:n,labelTicks:s,max:r,min:o,precise:l,value:c}=this,f=yc(c),y=e===o,_=e===r,x=y||_;return s&&(!i&&(x||!l||!f)||i&&(x||!l&&!n))?Me("span",{class:{[Dn.tickLabel]:!0,[Dn.tickMin]:y,[Dn.tickMax]:_}},this.internalLabelFormatter(e,"tick")):null}pointerDownHandler(e){if(this.disabled||!DS(e))return;const i=e.clientX||e.pageX,n=this.mapToRange(i);let s="value";yc(this.value)&&(n>=this.minValue&&n<=this.maxValue&&this.lastDragProp==="minMaxValue"?s="minMaxValue":s=Math.abs(this.maxValue-n)<Math.abs(this.minValue-n)||n>=this.maxValue?"maxValue":"minValue"),this.lastDragPropValue=this[s],this.dragStart(s),this.el.shadowRoot.querySelector(`.${Dn.thumb}:active`)||this.setValue({[s]:this.clamp(n,s)}),this.focusActiveHandle(i)}handleTouchStart(e){e.preventDefault()}async setFocus(){await Cr(this);const e=this.minHandle?this.minHandle:this.maxHandle;e==null||e.focus()}buildThumbType(e){const i=[e];return this.labelHandles&&i.push("labeled"),this.precise&&i.push("precise"),this.hasHistogram&&i.push("histogram"),i.join("-")}setValueFromMinMax(){const{minValue:e,maxValue:i}=this;typeof e=="number"&&typeof i=="number"&&(this.value=[e,i])}setMinMaxFromValue(){const{value:e}=this;yc(e)&&(this.minValue=e[0],this.maxValue=e[1])}onLabelClick(){this.setFocus()}shouldMirror(){return this.mirrored&&!this.hasHistogram}shouldUseMinValue(){return yc(this.value)?this.hasHistogram&&this.maxValue===0||!this.hasHistogram&&this.minValue===0:!1}getTickDensity(){const e=(this.max-this.min)/this.ticks/Mwe;return e<1?1:e}generateTickValues(){const e=this.ticks??0;if(e<=0)return[];const i=[this.min],n=this.getTickDensity(),s=e*n;let r=this.min;for(;r<this.max;)r+=s,i.push(Math.min(r,this.max));return i.includes(this.max)||i.push(this.max),i}pointerDownDragStart(e,i){DS(e)&&this.dragStart(i)}dragStart(e){this.dragProp=e,this.lastDragProp=this.dragProp,this.activeProp=e,window.addEventListener("pointermove",this.dragUpdate),window.addEventListener("pointerup",this.pointerUpDragEnd),window.addEventListener("pointercancel",this.dragEnd)}focusActiveHandle(e){this.dragProp==="minValue"?this.minHandle.focus():this.dragProp==="maxValue"||this.dragProp==="value"?this.maxHandle.focus():this.dragProp==="minMaxValue"&&this.getClosestHandle(e).focus()}emitInput(){this.calciteSliderInput.emit()}emitChange(){this.calciteSliderChange.emit()}removeDragListeners(){window.removeEventListener("pointermove",this.dragUpdate),window.removeEventListener("pointerup",this.pointerUpDragEnd),window.removeEventListener("pointercancel",this.dragEnd)}setValue(e){let i;if(Object.keys(e).forEach(s=>{const r=e[s];i||(i=this[s]!==r),this[s]=r}),!i)return;this.dragProp||this.emitChange(),this.emitInput()}clamp(e,i){return e=zO(e,this.min,this.max),i==="maxValue"&&(e=Math.max(e,this.minValue)),i==="minValue"&&(e=Math.min(e,this.maxValue)),e}mapToRange(e){const i=this.max-this.min,{left:n,width:s}=this.trackEl.getBoundingClientRect(),r=(e-n)/s,o=this.shouldMirror(),l=this.clamp(this.min+i*(o?1-r:r)),c=Number(l.toFixed(qO(this.step)));return this.snap&&this.step?this.getClosestStep(c):c}getClosestStep(e){const{max:i,min:n,step:s}=this,r=new Gn(`${Math.floor((e-n)/s)}`).multiply(`${s}`).add(`${n}`).toString();let o=this.clamp(Number(r));return o>i&&(o-=s),o}getClosestHandle(e){return this.getDistanceX(this.maxHandle,e)>this.getDistanceX(this.minHandle,e)?this.minHandle:this.maxHandle}getDistanceX(e,i){return Math.abs(e.getBoundingClientRect().left-i)}getFontSizeForElement(e){return Number(window.getComputedStyle(e).getPropertyValue("font-size").match(/\d+/)[0])}getUnitInterval(e){e=this.clamp(e);const i=this.max-this.min;return(e-this.min)/i}adjustHostObscuredHandleLabel(e){const i=this.el.shadowRoot.querySelector(`.handle__label--${e}`),n=this.el.shadowRoot.querySelector(`.handle__label--${e}.static`),s=this.el.shadowRoot.querySelector(`.handle__label--${e}.transformed`),r=n.getBoundingClientRect(),o=this.getHostOffset(r.left,r.right);i.style.transform=`translateX(${o}px)`,s.style.transform=`translateX(${o}px)`}hyphenateCollidingRangeHandleLabels(){const{shadowRoot:e}=this.el,i=this.shouldMirror(),n=i?"value":"minValue",s=i?"minValue":"value",r=e.querySelector(`.handle__label--${n}`),o=e.querySelector(`.handle__label--${n}.static`),l=e.querySelector(`.handle__label--${n}.transformed`),c=this.getHostOffset(o.getBoundingClientRect().left,o.getBoundingClientRect().right),f=e.querySelector(`.handle__label--${s}`),y=e.querySelector(`.handle__label--${s}.static`),_=e.querySelector(`.handle__label--${s}.transformed`),x=this.getHostOffset(y.getBoundingClientRect().left,y.getBoundingClientRect().right),S=this.getFontSizeForElement(r),P=this.getRangeLabelOverlap(l,_),A=r,D=S/2;if(P>0){if(A.classList.add(Dn.hyphen,Dn.hyphenWrap),x===0&&c===0){let N=P/2-D;N=Math.sign(N)===-1?Math.abs(N):-N;const F=this.getHostOffset(l.getBoundingClientRect().left+N-D,l.getBoundingClientRect().right+N-D);let G=P/2;const V=this.getHostOffset(_.getBoundingClientRect().left+G,_.getBoundingClientRect().right+G);F!==0&&(N+=F,G+=F),V!==0&&(N+=V,G+=V),r.style.transform=`translateX(${N}px)`,l.style.transform=`translateX(${N-D}px)`,f.style.transform=`translateX(${G}px)`,_.style.transform=`translateX(${G}px)`}else if(c>0||x>0)r.style.transform=`translateX(${c+D}px)`,f.style.transform=`translateX(${P+x}px)`,_.style.transform=`translateX(${P+x}px)`;else if(c<0||x<0){let N=Math.abs(c)+P-D;N=Math.sign(N)===-1?Math.abs(N):-N,r.style.transform=`translateX(${N}px)`,l.style.transform=`translateX(${N-D}px)`}}else A.classList.remove(Dn.hyphen,Dn.hyphenWrap),r.style.transform=`translateX(${c}px)`,l.style.transform=`translateX(${c}px)`,f.style.transform=`translateX(${x}px)`,_.style.transform=`translateX(${x}px)`}hideObscuredBoundingTickLabels(){const e=yc(this.value);if(!this.hasHistogram&&!e&&!this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&!this.labelHandles&&this.precise||!this.hasHistogram&&!e&&this.labelHandles&&this.precise||!this.hasHistogram&&e&&!this.precise||this.hasHistogram&&!this.precise&&!this.labelHandles)return;const i=this.el.shadowRoot.querySelector(`.${Dn.thumbMinValue}`),n=this.el.shadowRoot.querySelector(`.${Dn.thumbValue}`),s=this.el.shadowRoot.querySelector(`.${Dn.tickMin}`),r=this.el.shadowRoot.querySelector(`.${Dn.tickMax}`);!i&&n&&s&&r&&(s.style.opacity=this.isMinTickLabelObscured(s,n)?"0":"1",r.style.opacity=this.isMaxTickLabelObscured(r,n)?"0":"1"),i&&n&&s&&r&&(s.style.opacity=this.isMinTickLabelObscured(s,i)||this.isMinTickLabelObscured(s,n)?"0":"1",r.style.opacity=this.isMaxTickLabelObscured(r,i)||this.isMaxTickLabelObscured(r,n)&&this.hasHistogram?"0":"1")}getHostOffset(e,i){const n=this.el.getBoundingClientRect(),s=7;return e+s<n.left?n.left-e-s:i-s>n.right?-(i-n.right)+s:0}getRangeLabelOverlap(e,i){const n=e.getBoundingClientRect(),s=i.getBoundingClientRect(),r=this.getFontSizeForElement(e),o=n.right+r-s.left;return Math.max(o,0)}isMinTickLabelObscured(e,i){const n=e.getBoundingClientRect(),s=i.getBoundingClientRect();return JY(n,s)}isMaxTickLabelObscured(e,i){const n=e.getBoundingClientRect(),s=i.getBoundingClientRect();return JY(n,s)}internalLabelFormatter(e,i){const n=this.labelFormatter;if(!n)return this.formatValue(e);const s=n(e,i,this.formatValue);return s??this.formatValue(e)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{histogram:["histogramWatcher"],ticks:["ticksWatcher"],value:["valueHandler"],minValue:["minMaxValueHandler"],maxValue:["minMaxValueHandler"]}}static get style(){return kwe}},[17,"calcite-slider",{disabled:[516],fillPlacement:[513,"fill-placement"],form:[513],groupSeparator:[516,"group-separator"],hasHistogram:[1540,"has-histogram"],histogram:[16],histogramStops:[16],labelHandles:[516,"label-handles"],labelFormatter:[16],labelTicks:[516,"label-ticks"],max:[514],maxLabel:[1,"max-label"],maxValue:[1026,"max-value"],min:[514],minLabel:[1,"min-label"],minValue:[1026,"min-value"],mirrored:[516],name:[513],numberingSystem:[1,"numbering-system"],pageStep:[514,"page-step"],precise:[516],required:[516],snap:[516],step:[514],ticks:[514],value:[1538],scale:[513],effectiveLocale:[32],minMaxValueRange:[32],minValueDragRange:[32],maxValueDragRange:[32],tickValues:[32],setFocus:[64]},[[1,"pointerdown","pointerDownHandler"]],{histogram:["histogramWatcher"],ticks:["ticksWatcher"],value:["valueHandler"],minValue:["minMaxValueHandler"],maxValue:["minMaxValueHandler"]}]);function Nwe(){if(typeof customElements>"u")return;["calcite-slider","calcite-graph"].forEach(e=>{switch(e){case"calcite-slider":customElements.get(e)||customElements.define(e,Dwe);break;case"calcite-graph":customElements.get(e)||Fre();break}})}Nwe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const mh={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},Owe={tooltip:"tooltip"},$we=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;background-color:transparent}:host,button{border-end-end-radius:var(--calcite-action-corner-radius-end-end, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-end-start-radius:var(--calcite-action-corner-radius-end-start, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-start-end-radius:var(--calcite-action-corner-radius-start-end, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-start-start-radius:var(--calcite-action-corner-radius-start-start, var(--calcite-action-corner-radius, var(--calcite-corner-radius)))}.button{position:relative;margin:0px;display:flex;inline-size:auto;cursor:pointer;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-color-text-3));text-align:unset;flex:1 0 auto}.button:hover,.button:focus{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-pressed, var(--calcite-color-text-1))}.button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.button:active{background-color:var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))}.icon-container{pointer-events:none;margin:0px;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0px;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-property:margin;transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus{color:var(--calcite-action-text-color-pressed, var(--calcite-color-text-1));background-color:var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host([appearance=transparent]) .button:hover,:host([appearance=transparent]) .button:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([data-active]) .button{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .button{padding-inline:0.5rem;padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:0.5rem}:host([scale=m]) .button{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:0.75rem}:host([scale=l]) .button{padding:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:0.25rem;inline-size:1rem;position:relative}.indicator-without-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;background-color:var(--calcite-color-foreground-1);opacity:var(--calcite-opacity-disabled)}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{background-color:var(--calcite-color-foreground-3);opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,Rwe=$we,Lwe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=Ea("mutation",()=>Mo(this)),this.guid=`calcite-action-${mm()}`,this.indicatorId=`${this.guid}-indicator`,this.buttonId=`${this.guid}-button`,this.handleTooltipSlotChange=e=>{const n=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-tooltip"))[0];n&&(n.referenceElement=this.buttonEl)},this.active=!1,this.alignment=void 0,this.appearance="solid",this.compact=!1,this.disabled=!1,this.icon=void 0,this.iconFlipRtl=!1,this.indicator=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0}onMessagesChange(){}effectiveLocaleChange(){Al(this,this.effectiveLocale)}connectedCallback(){var e;Ca(this),kl(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}async componentWillLoad(){Sr(this),Df()&&await Ml(this)}componentDidLoad(){Er(this)}disconnectedCallback(){var e;Pa(this),Dl(this),(e=this.mutationObserver)==null||e.disconnect()}componentDidRender(){gd(this)}async setFocus(){var e;await Cr(this),(e=this.buttonEl)==null||e.focus()}renderTextContainer(){const{text:e,textEnabled:i}=this,n={[mh.textContainer]:!0,[mh.textContainerVisible]:i};return e?Me("div",{class:n,key:"text-container"},e):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:n,buttonId:s}=this;return Me("div",{"aria-labelledby":s,"aria-live":"polite",class:mh.indicatorText,id:n,role:"region"},e?i.indicator:null)}renderIconContainer(){var S;const{loading:e,icon:i,scale:n,el:s,iconFlipRtl:r,indicator:o}=this,l=n==="l"?"l":"m",c=e?Me("calcite-loader",{inline:!0,label:this.messages.loading,scale:l}):null,f=i?Me("calcite-icon",{class:{[mh.indicatorWithIcon]:o},flipRtl:r,icon:i,scale:Yo(this.scale)}):null,y=c||f,_=y||((S=s.children)==null?void 0:S.length),x=Me("div",{class:{[mh.slotContainer]:!0,[mh.slotContainerHidden]:e}},Me("slot",null));return _?Me("div",{"aria-hidden":"true",class:mh.iconContainer,key:"icon-container"},y,x):null}render(){const{active:e,compact:i,disabled:n,icon:s,loading:r,textEnabled:o,label:l,text:c,indicator:f,indicatorId:y,buttonId:_,messages:x}=this,S=l||c,P=S?`${S}${f?` (${x.indicator})`:""}`:"",A={[mh.button]:!0,[mh.buttonTextVisible]:o,[mh.buttonCompact]:i};return Me(er,{key:"3b459307dcb6f8d373e70cd5c7a45d122565a70e"},Me(yd,{key:"3a81f1fb62a66f1dbd608f095ed90f2d47a9daf6",disabled:n},Me("button",{key:"bb5249babc116d462becd6b9a056ca0d368c6e09","aria-busy":xr(r),"aria-controls":f?y:null,"aria-label":P,"aria-pressed":xr(e),class:A,disabled:n,id:_,ref:D=>this.buttonEl=D},this.renderIconContainer(),this.renderTextContainer(),!s&&f&&Me("div",{class:mh.indicatorWithoutIcon,key:"indicator-no-icon"})),Me("slot",{key:"983989711d64076eca866c1928f9c777331fcba4",name:Owe.tooltip,onSlotchange:this.handleTooltipSlotChange}),this.renderIndicatorText()))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Rwe}},[1,"calcite-action",{active:[516],alignment:[513],appearance:[513],compact:[516],disabled:[516],icon:[1],iconFlipRtl:[516,"icon-flip-rtl"],indicator:[516],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Nf(){if(typeof customElements>"u")return;["calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-action":customElements.get(e)||customElements.define(e,Lwe);break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break}})}Nf();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const ap={container:"container",containerContent:"container-content",hasProgress:"progress-bar",hide:"hide",primary:"primary",secondary:"secondary",tertiary:"tertiary"},$a={logo:"logo",user:"user",progress:"progress",navigationAction:"navigation-action",contentStart:"content-start",contentEnd:"content-end",contentCenter:"content-center",navSecondary:"navigation-secondary",navTertiary:"navigation-tertiary"},Fwe={hamburger:"hamburger"},zwe=":host([hidden]){display:none}[hidden]{display:none}.container{margin-inline:auto;display:flex;inline-size:100%;flex-direction:column;margin-block:0;margin-inline:auto;background-color:var(--calcite-navigation-background, var(--calcite-color-foreground-1))}.container.primary,.container.secondary,.container.tertiary{border-block-end:1px solid;border-block-end-color:var(--calcite-navigation-border-color, var(--calcite-color-border-3))}.user,.logo{display:flex}.hide{display:none}.primary{block-size:4rem}.secondary{block-size:3rem}.tertiary{block-size:3rem}.container-content{margin-inline:auto;display:flex;block-size:100%;inline-size:100%;margin-block:0;inline-size:var(--calcite-navigation-width, 100%);max-inline-size:100%}.container-content.progress-bar{margin-block-start:0.125rem}slot[name]{display:flex;flex-direction:row}slot[name=navigation-secondary]::slotted(calcite-navigation),slot[name=navigation-tertiary]::slotted(calcite-navigation){inline-size:100%}slot[name=content-start]::slotted(*),slot[name=content-center]::slotted(*),slot[name=content-end]::slotted(*){display:flex;flex-direction:row;align-items:center}slot[name=progress],slot[name=progress] calcite-progress{inset-block-start:0;inset-inline:0}slot[name=content-end]{margin-inline-start:auto}slot[name=content-start]{margin-inline-end:auto}slot[name=content-end],slot[name=logo]~slot[name=user],slot[name=user]:only-child{margin-inline-start:auto}slot[name=content-center]{margin-inline-start:auto;margin-inline-end:auto}slot[name=content-start]~slot[name=content-center]{margin-inline-start:0px}slot[name=content-start]~slot[name=content-end],slot[name=content-center]~slot[name=content-end],slot[name=content-center]~slot[name=user],slot[name=content-end]~slot[name=user]{margin:0px}",qwe=zwe,Vwe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteNavigationActionSelect=Mt(this,"calciteNavigationActionSelect",6),this.actionClickHandler=()=>{this.calciteNavigationActionSelect.emit()},this.handleUserSlotChange=e=>{this.isPrimaryLevel()&&(this.userSlotHasElements=yn(e))},this.handleLogoSlotChange=e=>{this.isPrimaryLevel()&&(this.logoSlotHasElements=yn(e))},this.handleContentStartSlotChange=e=>{this.isPrimaryLevel()&&(this.primaryContentStartSlotHasElements=yn(e))},this.handleContentEndSlotChange=e=>{this.isPrimaryLevel()&&(this.primaryContentEndSlotHasElements=yn(e))},this.handleContentCenterSlotChange=e=>{this.isPrimaryLevel()&&(this.primaryContentCenterSlotHasElements=yn(e))},this.handleSecondarySlotChange=e=>{this.secondarySlotHasElements=yn(e)},this.handleTertiarySlotChange=e=>{this.tertiarySlotHasElements=yn(e)},this.handleMenuActionSlotChange=e=>{this.isPrimaryLevel()&&(this.navigationActionSlotHasElements=yn(e),this.navigationActionSlotHasElements&&(this.navigationAction=!1))},this.handleProgressSlotChange=e=>{this.isPrimaryLevel()&&(this.progressSlotHasElement=yn(e))},this.label=void 0,this.navigationAction=!1,this.logoSlotHasElements=void 0,this.navigationActionSlotHasElements=void 0,this.primaryContentCenterSlotHasElements=void 0,this.primaryContentEndSlotHasElements=void 0,this.primaryContentStartSlotHasElements=void 0,this.progressSlotHasElement=void 0,this.secondarySlotHasElements=void 0,this.tertiarySlotHasElements=void 0,this.userSlotHasElements=void 0}async setFocus(){var e;return await Cr(this),(e=this.navigationActionEl)==null?void 0:e.setFocus()}componentWillLoad(){Sr(this)}componentDidLoad(){Er(this)}isPrimaryLevel(){return this.el.slot!==$a.navSecondary&&this.el.slot!==$a.navTertiary}renderMenuAction(){return Me("slot",{name:$a.navigationAction,onSlotchange:this.handleMenuActionSlotChange},this.navigationAction&&Me("calcite-action",{icon:Fwe.hamburger,onClick:this.actionClickHandler,ref:e=>this.navigationActionEl=e,text:this.label}))}render(){const e=this.logoSlotHasElements||this.userSlotHasElements||this.navigationActionSlotHasElements||this.primaryContentCenterSlotHasElements||this.primaryContentEndSlotHasElements||this.primaryContentStartSlotHasElements||this.navigationAction,i=this.el.slot;return Me(er,{key:"bf64aa6c6c41bfad6413b58f7897527bb62e1d96"},Me("div",{key:"8c30501a94d5c41e60291c1f0d1cb2856afa5d62",class:{[ap.container]:!0,[ap.secondary]:i===$a.navSecondary,[ap.tertiary]:i===$a.navTertiary,[ap.primary]:e}},Me("div",{key:"ef4c088fc24566ca24da9abe6a30903fedcad4d9",class:{[ap.hide]:!this.progressSlotHasElement,[$a.progress]:!0}},Me("slot",{key:"0abc91e366b542e11ee76f13f099ee8b64a55ee0",name:$a.progress,onSlotchange:this.handleProgressSlotChange})),Me("div",{key:"689dc16c2ab71944a78f3bfc16c1c16c9159f073",class:{[ap.containerContent]:!0,[ap.hasProgress]:this.progressSlotHasElement}},this.renderMenuAction(),Me("div",{key:"122f9d2d278a0a87dc1774f4933a4bb120410e48",class:{[ap.hide]:!this.logoSlotHasElements,[$a.logo]:!0}},Me("slot",{key:"38f2a0106cb2b3a844b60406c629c0cff4c1b64e",name:$a.logo,onSlotchange:this.handleLogoSlotChange})),Me("slot",{key:"af8aa2c6ed65c95c51ebe31314cd1e684beef657",name:$a.contentStart,onSlotchange:this.handleContentStartSlotChange}),Me("slot",{key:"989ba0f344ce973ea32b07ee02b04d62068cefb8",name:$a.contentCenter,onSlotchange:this.handleContentCenterSlotChange}),Me("slot",{key:"e0fd2d40efb52e8735ca426c1374a3da4882a77d",name:$a.contentEnd,onSlotchange:this.handleContentEndSlotChange}),Me("div",{key:"56e905fef7a76fd14be7085f367d6abf8b44a80b",class:{[ap.hide]:!this.userSlotHasElements,[$a.user]:!0}},Me("slot",{key:"e038f1510da60abbb05c1fd8541563334f86f6d5",name:$a.user,onSlotchange:this.handleUserSlotChange})))),Me(IM,{key:"3a65439c3774cfb42fa6bc5f12c234a66f8bb314"},Me("slot",{key:"52e0b810e42911da6dc1ea448026f5756df0206f",name:$a.navSecondary,onSlotchange:this.handleSecondarySlotChange}),Me("slot",{key:"97c2666bcd896fa763cb84d6b53285e2e26b51d1",name:$a.navTertiary,onSlotchange:this.handleTertiarySlotChange})))}get el(){return this}static get style(){return qwe}},[1,"calcite-navigation",{label:[1],navigationAction:[516,"navigation-action"],logoSlotHasElements:[32],navigationActionSlotHasElements:[32],primaryContentCenterSlotHasElements:[32],primaryContentEndSlotHasElements:[32],primaryContentStartSlotHasElements:[32],progressSlotHasElement:[32],secondarySlotHasElements:[32],tertiarySlotHasElements:[32],userSlotHasElements:[32],setFocus:[64]}]);function Gwe(){if(typeof customElements>"u")return;["calcite-navigation","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-navigation":customElements.get(e)||customElements.define(e,Vwe);break;case"calcite-action":customElements.get(e)||Nf();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break}})}Gwe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Fq=(t,e)=>{const i=t.level?`h${t.level}`:"div";return delete t.level,Me(i,{class:t.class,key:t.key},e)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Id={container:"container",heading:"heading",description:"description",anchor:"anchor",image:"image",standalone:"standalone",icon:"icon"},jwe=`:host{display:inline-flex;outline:2px solid transparent;outline-offset:2px}.anchor{margin:0px;display:flex;cursor:pointer;align-items:center;justify-content:center;font-size:var(--calcite-font-size-0);line-height:1.25rem;text-decoration-line:none;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;color:inherit;border-block-end:2px solid transparent}.anchor:hover,.anchor:focus{background-color:var(--calcite-color-foreground-2)}.anchor:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.anchor:active{background-color:var(--calcite-color-foreground-3)}.image,.icon{margin:0px;display:flex;block-size:1.75rem;padding-inline:1rem}.image~.icon{padding-inline-start:0px}.image~.container,.icon~.container{padding-inline-start:0px}:host(:active) .anchor{color:var(--calcite-color-text-1)}:host([active]) .anchor{color:var(--calcite-color-text-1);border-color:var(--calcite-color-brand);--calcite-icon-color:var(--calcite-color-brand)}.container{margin-block-start:0.125rem;display:flex;flex-direction:column;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-inline:1rem;text-align:start}.heading{margin-inline-start:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.standalone{font-size:var(--calcite-font-size-1)}.description{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host([hidden]){display:none}[hidden]{display:none}`,Bwe=jwe,Hwe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.active=void 0,this.href=void 0,this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.rel=void 0,this.description=void 0,this.target=void 0,this.heading=void 0,this.thumbnail=void 0,this.headingLevel=void 0}async setFocus(){await Cr(this),this.href&&this.el.focus()}componentWillLoad(){Sr(this)}componentDidLoad(){Er(this)}renderIcon(){return Me("calcite-icon",{class:Id.icon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:"l"})}renderHeaderContent(){const{heading:e,headingLevel:i,description:n}=this,s=e?Me(Fq,{class:{[Id.heading]:!0,[Id.standalone]:!this.description},key:Id.heading,level:i},e):null,r=n?Me("span",{class:Id.description,key:Id.description},n):null;return s||r?Me("div",{class:Id.container,key:Id.container},s,r):null}render(){const{thumbnail:e}=this;return Me(er,{key:"40dcb76c1c7919fd1a8b6929616d1d507c1e3301"},Me("a",{key:"7b457d99add3c3d4edbd4478711f9b9c9fb12caf",class:Id.anchor,href:this.href,rel:this.rel,target:this.target},e&&Me("img",{key:"592aa3cfc2dfa47f9aa603f7edce4521dbaa27ae",alt:this.label||"",class:Id.image,src:e}),this.icon&&this.renderIcon(),this.renderHeaderContent()))}static get delegatesFocus(){return!0}get el(){return this}static get style(){return Bwe}},[17,"calcite-navigation-logo",{active:[516],href:[513],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],rel:[513],description:[1],target:[513],heading:[1],thumbnail:[1],headingLevel:[514,"heading-level"],setFocus:[64]}]);function Uwe(){if(typeof customElements>"u")return;["calcite-navigation-logo","calcite-icon"].forEach(e=>{switch(e){case"calcite-navigation-logo":customElements.get(e)||customElements.define(e,Hwe);break;case"calcite-icon":customElements.get(e)||Pr();break}})}Uwe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var zre={exports:{}},qre={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Vre={exports:{}},Ywe=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},Xwe=Ywe,Wwe=Array.prototype.concat,Zwe=Array.prototype.slice,hX=Vre.exports=function(e){for(var i=[],n=0,s=e.length;n<s;n++){var r=e[n];Xwe(r)?i=Wwe.call(i,Zwe.call(r)):i.push(r)}return i};hX.wrap=function(t){return function(){return t(hX(arguments))}};var OS=qre,AC=Vre.exports,Gre=Object.hasOwnProperty,jre=Object.create(null);for(var n8 in OS)Gre.call(OS,n8)&&(jre[OS[n8]]=n8);var Nc=zre.exports={to:{},get:{}};Nc.get=function(t){var e=t.substring(0,3).toLowerCase(),i,n;switch(e){case"hsl":i=Nc.get.hsl(t),n="hsl";break;case"hwb":i=Nc.get.hwb(t),n="hwb";break;default:i=Nc.get.rgb(t),n="rgb";break}return i?{model:n,value:i}:null};Nc.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,i=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,r=/^(\w+)$/,o=[0,0,0,1],l,c,f;if(l=t.match(i)){for(f=l[2],l=l[1],c=0;c<3;c++){var y=c*2;o[c]=parseInt(l.slice(y,y+2),16)}f&&(o[3]=parseInt(f,16)/255)}else if(l=t.match(e)){for(l=l[1],f=l[3],c=0;c<3;c++)o[c]=parseInt(l[c]+l[c],16);f&&(o[3]=parseInt(f+f,16)/255)}else if(l=t.match(n)){for(c=0;c<3;c++)o[c]=parseInt(l[c+1],0);l[4]&&(l[5]?o[3]=parseFloat(l[4])*.01:o[3]=parseFloat(l[4]))}else if(l=t.match(s)){for(c=0;c<3;c++)o[c]=Math.round(parseFloat(l[c+1])*2.55);l[4]&&(l[5]?o[3]=parseFloat(l[4])*.01:o[3]=parseFloat(l[4]))}else return(l=t.match(r))?l[1]==="transparent"?[0,0,0,0]:Gre.call(OS,l[1])?(o=OS[l[1]],o[3]=1,o):null:null;for(c=0;c<3;c++)o[c]=v0(o[c],0,255);return o[3]=v0(o[3],0,1),o};Nc.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(e);if(i){var n=parseFloat(i[4]),s=(parseFloat(i[1])%360+360)%360,r=v0(parseFloat(i[2]),0,100),o=v0(parseFloat(i[3]),0,100),l=v0(isNaN(n)?1:n,0,1);return[s,r,o,l]}return null};Nc.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(e);if(i){var n=parseFloat(i[4]),s=(parseFloat(i[1])%360+360)%360,r=v0(parseFloat(i[2]),0,100),o=v0(parseFloat(i[3]),0,100),l=v0(isNaN(n)?1:n,0,1);return[s,r,o,l]}return null};Nc.to.hex=function(){var t=AC(arguments);return"#"+e4(t[0])+e4(t[1])+e4(t[2])+(t[3]<1?e4(Math.round(t[3]*255)):"")};Nc.to.rgb=function(){var t=AC(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Nc.to.rgb.percent=function(){var t=AC(arguments),e=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+i+"%, "+n+"%)":"rgba("+e+"%, "+i+"%, "+n+"%, "+t[3]+")"};Nc.to.hsl=function(){var t=AC(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Nc.to.hwb=function(){var t=AC(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Nc.to.keyword=function(t){return jre[t.slice(0,3)]};function v0(t,e,i){return Math.min(Math.max(e,t),i)}function e4(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const bE=qre,Bre={};for(const t of Object.keys(bE))Bre[bE[t]]=t;const li={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Hre=li;for(const t of Object.keys(li)){if(!("channels"in li[t]))throw new Error("missing channels property: "+t);if(!("labels"in li[t]))throw new Error("missing channel labels property: "+t);if(li[t].labels.length!==li[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:i}=li[t];delete li[t].channels,delete li[t].labels,Object.defineProperty(li[t],"channels",{value:e}),Object.defineProperty(li[t],"labels",{value:i})}li.rgb.hsl=function(t){const e=t[0]/255,i=t[1]/255,n=t[2]/255,s=Math.min(e,i,n),r=Math.max(e,i,n),o=r-s;let l,c;r===s?l=0:e===r?l=(i-n)/o:i===r?l=2+(n-e)/o:n===r&&(l=4+(e-i)/o),l=Math.min(l*60,360),l<0&&(l+=360);const f=(s+r)/2;return r===s?c=0:f<=.5?c=o/(r+s):c=o/(2-r-s),[l,c*100,f*100]};li.rgb.hsv=function(t){let e,i,n,s,r;const o=t[0]/255,l=t[1]/255,c=t[2]/255,f=Math.max(o,l,c),y=f-Math.min(o,l,c),_=function(x){return(f-x)/6/y+1/2};return y===0?(s=0,r=0):(r=y/f,e=_(o),i=_(l),n=_(c),o===f?s=n-i:l===f?s=1/3+e-n:c===f&&(s=2/3+i-e),s<0?s+=1:s>1&&(s-=1)),[s*360,r*100,f*100]};li.rgb.hwb=function(t){const e=t[0],i=t[1];let n=t[2];const s=li.rgb.hsl(t)[0],r=1/255*Math.min(e,Math.min(i,n));return n=1-1/255*Math.max(e,Math.max(i,n)),[s,r*100,n*100]};li.rgb.cmyk=function(t){const e=t[0]/255,i=t[1]/255,n=t[2]/255,s=Math.min(1-e,1-i,1-n),r=(1-e-s)/(1-s)||0,o=(1-i-s)/(1-s)||0,l=(1-n-s)/(1-s)||0;return[r*100,o*100,l*100,s*100]};function Kwe(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}li.rgb.keyword=function(t){const e=Bre[t];if(e)return e;let i=1/0,n;for(const s of Object.keys(bE)){const r=bE[s],o=Kwe(t,r);o<i&&(i=o,n=s)}return n};li.keyword.rgb=function(t){return bE[t]};li.rgb.xyz=function(t){let e=t[0]/255,i=t[1]/255,n=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const s=e*.4124+i*.3576+n*.1805,r=e*.2126+i*.7152+n*.0722,o=e*.0193+i*.1192+n*.9505;return[s*100,r*100,o*100]};li.rgb.lab=function(t){const e=li.rgb.xyz(t);let i=e[0],n=e[1],s=e[2];i/=95.047,n/=100,s/=108.883,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const r=116*n-16,o=500*(i-n),l=200*(n-s);return[r,o,l]};li.hsl.rgb=function(t){const e=t[0]/360,i=t[1]/100,n=t[2]/100;let s,r,o;if(i===0)return o=n*255,[o,o,o];n<.5?s=n*(1+i):s=n+i-n*i;const l=2*n-s,c=[0,0,0];for(let f=0;f<3;f++)r=e+1/3*-(f-1),r<0&&r++,r>1&&r--,6*r<1?o=l+(s-l)*6*r:2*r<1?o=s:3*r<2?o=l+(s-l)*(2/3-r)*6:o=l,c[f]=o*255;return c};li.hsl.hsv=function(t){const e=t[0];let i=t[1]/100,n=t[2]/100,s=i;const r=Math.max(n,.01);n*=2,i*=n<=1?n:2-n,s*=r<=1?r:2-r;const o=(n+i)/2,l=n===0?2*s/(r+s):2*i/(n+i);return[e,l*100,o*100]};li.hsv.rgb=function(t){const e=t[0]/60,i=t[1]/100;let n=t[2]/100;const s=Math.floor(e)%6,r=e-Math.floor(e),o=255*n*(1-i),l=255*n*(1-i*r),c=255*n*(1-i*(1-r));switch(n*=255,s){case 0:return[n,c,o];case 1:return[l,n,o];case 2:return[o,n,c];case 3:return[o,l,n];case 4:return[c,o,n];case 5:return[n,o,l]}};li.hsv.hsl=function(t){const e=t[0],i=t[1]/100,n=t[2]/100,s=Math.max(n,.01);let r,o;o=(2-i)*n;const l=(2-i)*s;return r=i*s,r/=l<=1?l:2-l,r=r||0,o/=2,[e,r*100,o*100]};li.hwb.rgb=function(t){const e=t[0]/360;let i=t[1]/100,n=t[2]/100;const s=i+n;let r;s>1&&(i/=s,n/=s);const o=Math.floor(6*e),l=1-n;r=6*e-o,(o&1)!==0&&(r=1-r);const c=i+r*(l-i);let f,y,_;switch(o){default:case 6:case 0:f=l,y=c,_=i;break;case 1:f=c,y=l,_=i;break;case 2:f=i,y=l,_=c;break;case 3:f=i,y=c,_=l;break;case 4:f=c,y=i,_=l;break;case 5:f=l,y=i,_=c;break}return[f*255,y*255,_*255]};li.cmyk.rgb=function(t){const e=t[0]/100,i=t[1]/100,n=t[2]/100,s=t[3]/100,r=1-Math.min(1,e*(1-s)+s),o=1-Math.min(1,i*(1-s)+s),l=1-Math.min(1,n*(1-s)+s);return[r*255,o*255,l*255]};li.xyz.rgb=function(t){const e=t[0]/100,i=t[1]/100,n=t[2]/100;let s,r,o;return s=e*3.2406+i*-1.5372+n*-.4986,r=e*-.9689+i*1.8758+n*.0415,o=e*.0557+i*-.204+n*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=Math.min(Math.max(0,s),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[s*255,r*255,o*255]};li.xyz.lab=function(t){let e=t[0],i=t[1],n=t[2];e/=95.047,i/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const s=116*i-16,r=500*(e-i),o=200*(i-n);return[s,r,o]};li.lab.xyz=function(t){const e=t[0],i=t[1],n=t[2];let s,r,o;r=(e+16)/116,s=i/500+r,o=r-n/200;const l=r**3,c=s**3,f=o**3;return r=l>.008856?l:(r-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,o=f>.008856?f:(o-16/116)/7.787,s*=95.047,r*=100,o*=108.883,[s,r,o]};li.lab.lch=function(t){const e=t[0],i=t[1],n=t[2];let s;s=Math.atan2(n,i)*360/2/Math.PI,s<0&&(s+=360);const o=Math.sqrt(i*i+n*n);return[e,o,s]};li.lch.lab=function(t){const e=t[0],i=t[1],s=t[2]/360*2*Math.PI,r=i*Math.cos(s),o=i*Math.sin(s);return[e,r,o]};li.rgb.ansi16=function(t,e=null){const[i,n,s]=t;let r=e===null?li.rgb.hsv(t)[2]:e;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(s/255)<<2|Math.round(n/255)<<1|Math.round(i/255));return r===2&&(o+=60),o};li.hsv.ansi16=function(t){return li.rgb.ansi16(li.hsv.rgb(t),t[2])};li.rgb.ansi256=function(t){const e=t[0],i=t[1],n=t[2];return e===i&&i===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)};li.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const i=(~~(t>50)+1)*.5,n=(e&1)*i*255,s=(e>>1&1)*i*255,r=(e>>2&1)*i*255;return[n,s,r]};li.ansi256.rgb=function(t){if(t>=232){const r=(t-232)*10+8;return[r,r,r]}t-=16;let e;const i=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,s=e%6/5*255;return[i,n,s]};li.rgb.hex=function(t){const i=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(i.length)+i};li.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let i=e[0];e[0].length===3&&(i=i.split("").map(l=>l+l).join(""));const n=parseInt(i,16),s=n>>16&255,r=n>>8&255,o=n&255;return[s,r,o]};li.rgb.hcg=function(t){const e=t[0]/255,i=t[1]/255,n=t[2]/255,s=Math.max(Math.max(e,i),n),r=Math.min(Math.min(e,i),n),o=s-r;let l,c;return o<1?l=r/(1-o):l=0,o<=0?c=0:s===e?c=(i-n)/o%6:s===i?c=2+(n-e)/o:c=4+(e-i)/o,c/=6,c%=1,[c*360,o*100,l*100]};li.hsl.hcg=function(t){const e=t[1]/100,i=t[2]/100,n=i<.5?2*e*i:2*e*(1-i);let s=0;return n<1&&(s=(i-.5*n)/(1-n)),[t[0],n*100,s*100]};li.hsv.hcg=function(t){const e=t[1]/100,i=t[2]/100,n=e*i;let s=0;return n<1&&(s=(i-n)/(1-n)),[t[0],n*100,s*100]};li.hcg.rgb=function(t){const e=t[0]/360,i=t[1]/100,n=t[2]/100;if(i===0)return[n*255,n*255,n*255];const s=[0,0,0],r=e%1*6,o=r%1,l=1-o;let c=0;switch(Math.floor(r)){case 0:s[0]=1,s[1]=o,s[2]=0;break;case 1:s[0]=l,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=o;break;case 3:s[0]=0,s[1]=l,s[2]=1;break;case 4:s[0]=o,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=l}return c=(1-i)*n,[(i*s[0]+c)*255,(i*s[1]+c)*255,(i*s[2]+c)*255]};li.hcg.hsv=function(t){const e=t[1]/100,i=t[2]/100,n=e+i*(1-e);let s=0;return n>0&&(s=e/n),[t[0],s*100,n*100]};li.hcg.hsl=function(t){const e=t[1]/100,n=t[2]/100*(1-e)+.5*e;let s=0;return n>0&&n<.5?s=e/(2*n):n>=.5&&n<1&&(s=e/(2*(1-n))),[t[0],s*100,n*100]};li.hcg.hwb=function(t){const e=t[1]/100,i=t[2]/100,n=e+i*(1-e);return[t[0],(n-e)*100,(1-n)*100]};li.hwb.hcg=function(t){const e=t[1]/100,n=1-t[2]/100,s=n-e;let r=0;return s<1&&(r=(n-s)/(1-s)),[t[0],s*100,r*100]};li.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};li.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};li.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};li.gray.hsl=function(t){return[0,0,t[0]]};li.gray.hsv=li.gray.hsl;li.gray.hwb=function(t){return[0,100,t[0]]};li.gray.cmyk=function(t){return[0,0,0,t[0]]};li.gray.lab=function(t){return[t[0],0,0]};li.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};li.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const I9=Hre;function Jwe(){const t={},e=Object.keys(I9);for(let i=e.length,n=0;n<i;n++)t[e[n]]={distance:-1,parent:null};return t}function Qwe(t){const e=Jwe(),i=[t];for(e[t].distance=0;i.length;){const n=i.pop(),s=Object.keys(I9[n]);for(let r=s.length,o=0;o<r;o++){const l=s[o],c=e[l];c.distance===-1&&(c.distance=e[n].distance+1,c.parent=n,i.unshift(l))}}return e}function e3e(t,e){return function(i){return e(t(i))}}function t3e(t,e){const i=[e[t].parent,t];let n=I9[e[t].parent][t],s=e[t].parent;for(;e[s].parent;)i.unshift(e[s].parent),n=e3e(I9[e[s].parent][s],n),s=e[s].parent;return n.conversion=i,n}var i3e=function(t){const e=Qwe(t),i={},n=Object.keys(e);for(let s=n.length,r=0;r<s;r++){const o=n[r];e[o].parent!==null&&(i[o]=t3e(o,e))}return i};const jO=Hre,n3e=i3e,nb={},s3e=Object.keys(jO);function r3e(t){const e=function(...i){const n=i[0];return n==null?n:(n.length>1&&(i=n),t(i))};return"conversion"in t&&(e.conversion=t.conversion),e}function o3e(t){const e=function(...i){const n=i[0];if(n==null)return n;n.length>1&&(i=n);const s=t(i);if(typeof s=="object")for(let r=s.length,o=0;o<r;o++)s[o]=Math.round(s[o]);return s};return"conversion"in t&&(e.conversion=t.conversion),e}s3e.forEach(t=>{nb[t]={},Object.defineProperty(nb[t],"channels",{value:jO[t].channels}),Object.defineProperty(nb[t],"labels",{value:jO[t].labels});const e=n3e(t);Object.keys(e).forEach(n=>{const s=e[n];nb[t][n]=o3e(s),nb[t][n].raw=r3e(s)})});var a3e=nb;const sb=zre.exports,Dc=a3e,Ure=["keyword","gray","hex"],BO={};for(const t of Object.keys(Dc))BO[[...Dc[t].labels].sort().join("")]=t;const M9={};function Vo(t,e){if(!(this instanceof Vo))return new Vo(t,e);if(e&&e in Ure&&(e=null),e&&!(e in Dc))throw new Error("Unknown model: "+e);let i,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Vo)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const s=sb.get(t);if(s===null)throw new Error("Unable to parse color from string: "+t);this.model=s.model,n=Dc[this.model].channels,this.color=s.value.slice(0,n),this.valpha=typeof s.value[n]=="number"?s.value[n]:1}else if(t.length>0){this.model=e||"rgb",n=Dc[this.model].channels;const s=Array.prototype.slice.call(t,0,n);this.color=HO(s,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const s=Object.keys(t);"alpha"in t&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const r=s.sort().join("");if(!(r in BO))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=BO[r];const{labels:o}=Dc[this.model],l=[];for(i=0;i<o.length;i++)l.push(t[o[i]]);this.color=HO(l)}if(M9[this.model])for(n=Dc[this.model].channels,i=0;i<n;i++){const s=M9[this.model][i];s&&(this.color[i]=s(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Vo.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in sb.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const i=e.valpha===1?e.color:[...e.color,this.valpha];return sb.to[e.model](i)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),i=e.valpha===1?e.color:[...e.color,this.valpha];return sb.to.rgb.percent(i)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=Dc[this.model],{labels:i}=Dc[this.model];for(let n=0;n<e;n++)t[i[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Vo([...this.color.map(c3e(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new Vo([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Nr("rgb",0,yo(255)),green:Nr("rgb",1,yo(255)),blue:Nr("rgb",2,yo(255)),hue:Nr(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Nr("hsl",1,yo(100)),lightness:Nr("hsl",2,yo(100)),saturationv:Nr("hsv",1,yo(100)),value:Nr("hsv",2,yo(100)),chroma:Nr("hcg",1,yo(100)),gray:Nr("hcg",2,yo(100)),white:Nr("hwb",1,yo(100)),wblack:Nr("hwb",2,yo(100)),cyan:Nr("cmyk",0,yo(100)),magenta:Nr("cmyk",1,yo(100)),yellow:Nr("cmyk",2,yo(100)),black:Nr("cmyk",3,yo(100)),x:Nr("xyz",0,yo(95.047)),y:Nr("xyz",1,yo(100)),z:Nr("xyz",2,yo(108.833)),l:Nr("lab",0,yo(100)),a:Nr("lab",1),b:Nr("lab",2),keyword(t){return t!==void 0?new Vo(t):Dc[this.model].keyword(this.color)},hex(t){return t!==void 0?new Vo(t):sb.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new Vo(t);const e=this.rgb().round().color;let i=Math.round(this.valpha*255).toString(16).toUpperCase();return i.length===1&&(i="0"+i),sb.to.hex(e)+i},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[i,n]of t.entries()){const s=n/255;e[i]=s<=.04045?s/12.92:((s+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Vo.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let i=e.color[0];return i=(i+t)%360,i=i<0?360+i:i,e.color[0]=i,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const i=t.rgb(),n=this.rgb(),s=e===void 0?.5:e,r=2*s-1,o=i.alpha()-n.alpha(),l=((r*o===-1?r:(r+o)/(1+r*o))+1)/2,c=1-l;return Vo.rgb(l*i.red()+c*n.red(),l*i.green()+c*n.green(),l*i.blue()+c*n.blue(),i.alpha()*s+n.alpha()*(1-s))}};for(const t of Object.keys(Dc)){if(Ure.includes(t))continue;const{channels:e}=Dc[t];Vo.prototype[t]=function(...i){return this.model===t?new Vo(this):i.length>0?new Vo(i,t):new Vo([...u3e(Dc[this.model][t].raw(this.color)),this.valpha],t)},Vo[t]=function(...i){let n=i[0];return typeof n=="number"&&(n=HO(i,e)),new Vo(n,t)}}function l3e(t,e){return Number(t.toFixed(e))}function c3e(t){return function(e){return l3e(e,t)}}function Nr(t,e,i){t=Array.isArray(t)?t:[t];for(const n of t)(M9[n]||(M9[n]=[]))[e]=i;return t=t[0],function(n){let s;return n!==void 0?(i&&(n=i(n)),s=this[t](),s.color[e]=n,s):(s=this[t]().color[e],i&&(s=i(s)),s)}}function yo(t){return function(e){return Math.max(0,Math.min(t,e))}}function u3e(t){return Array.isArray(t)?t:[t]}function HO(t,e){for(let i=0;i<e;i++)typeof t[i]!="number"&&(t[i]=0);return t}var h3e=Vo;const d3e=h3e,Hct={channel:"channel",channels:"channels",colorField:"color-field",colorFieldScope:"scope--color-field",colorMode:"color-mode",colorModeContainer:"color-mode-container",container:"container",control:"control",controlAndScope:"control-and-scope",controlSection:"control-section",deleteColor:"delete-color",header:"header",hexAndChannelsGroup:"hex-and-channels-group",hexOptions:"color-hex-options",hueScope:"scope--hue",hueSlider:"hue-slider",opacityScope:"scope--opacity",opacitySlider:"opacity-slider",preview:"preview",previewAndSliders:"preview-and-sliders",saveColor:"save-color",savedColor:"saved-color",savedColors:"saved-colors",savedColorsButtons:"saved-colors-buttons",savedColorsSection:"saved-colors-section",scope:"scope",section:"section",slider:"slider",sliders:"sliders",splitSection:"section--split"},Uct=d3e("#007AC2"),Yct="calcite-color-",Xct={r:255,g:255,b:255},f3e={h:360,s:100,v:100},Wct=f3e.h-1,Zct={min:0,max:100},p3e={s:{slider:{height:12,width:104},colorField:{height:80,width:160},thumb:{radius:7},preview:{size:20}},m:{slider:{height:12,width:204},colorField:{height:150,width:272},thumb:{radius:7},preview:{size:24}},l:{slider:{height:12,width:384},colorField:{height:200,width:464},thumb:{radius:7},preview:{size:32}}},Kct=1,Jct=/^[0-9A-F]$/i,m3e=/^#[0-9A-F]{3}$/i,g3e=/^#[0-9A-F]{6}$/i,y3e=/^#[0-9A-F]{4}$/i,v3e=/^#[0-9A-F]{8}$/i,Qct=t=>Number((t*100).toFixed()),eut=t=>Number((t/100).toFixed(2));function A9(t,e=!1){return UO(t,e)||_3e(t,e)}function Yre(t,e,i){return t?t.length===e&&i.test(t):!1}function UO(t,e=!1){return Yre(t,e?5:4,e?y3e:m3e)}function _3e(t,e=!1){return Yre(t,e?9:7,e?v3e:g3e)}function tut(t,e=!1,i=!1){if(t=t.toLowerCase(),t.startsWith("#")||(t=`#${t}`),UO(t,e))return dX(YO(t,e));if(e&&i&&A9(t,!1)){const n=UO(t,!1);return dX(YO(`${t}${n?"f":"ff"}`,!0))}return t}function iut(t,e=!1){return e?t.hexa():t.hex()}function dX(t){const{r:e,g:i,b:n}=t,s=t4(e),r=t4(i),o=t4(n),l="a"in t?t4(t.a*255):"";return`#${s}${r}${o}${l}`.toLowerCase()}function t4(t){return t.toString(16).padStart(2,"0")}function nut(t){const e={...t,a:t.alpha??1};return delete e.alpha,e}function sut(t){const e={...t,alpha:t.a??1};return delete e.a,e}function YO(t,e=!1){if(!A9(t,e))return null;t=t.replace("#","");let i,n,s,r;if(t.length===3||t.length===4){const[l,c,f,y]=t.split("");i=parseInt(`${l}${l}`,16),n=parseInt(`${c}${c}`,16),s=parseInt(`${f}${f}`,16),r=parseInt(`${y}${y}`,16)/255}else i=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),s=parseInt(t.slice(4,6),16),r=parseInt(t.slice(6,8),16)/255;return isNaN(r)?{r:i,g:n,b:s}:{r:i,g:n,b:s,a:r}}const Xre=t=>t,Hr=Xre({HEX:"hex",HEXA:"hexa",RGB_CSS:"rgb-css",RGBA_CSS:"rgba-css",HSL_CSS:"hsl-css",HSLA_CSS:"hsla-css"}),Ur=Xre({RGB:"rgb",RGBA:"rgba",HSL:"hsl",HSLA:"hsla",HSV:"hsv",HSVA:"hsva"});function rut(t){if(typeof t=="string"){if(t.startsWith("#")){const{length:e}=t;if(e===4||e===7)return Hr.HEX;if(e===5||e===9)return Hr.HEXA}if(t.startsWith("rgba("))return Hr.RGBA_CSS;if(t.startsWith("rgb("))return Hr.RGB_CSS;if(t.startsWith("hsl("))return Hr.HSL_CSS;if(t.startsWith("hsla("))return Hr.HSLA_CSS}if(typeof t=="object"){if($_(t,"r","g","b"))return $_(t,"a")?Ur.RGBA:Ur.RGB;if($_(t,"h","s","l"))return $_(t,"a")?Ur.HSLA:Ur.HSL;if($_(t,"h","s","v"))return $_(t,"a")?Ur.HSVA:Ur.HSV}return null}function $_(t,...e){return e.every(i=>i&&t&&`${i}`in t)}function out(t,e){return(t==null?void 0:t.rgb().array().toString())===(e==null?void 0:e.rgb().array().toString())}function aut(t){return t===Hr.HEXA||t===Hr.RGBA_CSS||t===Hr.HSLA_CSS||t===Ur.RGBA||t===Ur.HSLA||t===Ur.HSVA}function lut(t){return t===Hr.HEX?Hr.HEXA:t===Hr.RGB_CSS?Hr.RGBA_CSS:t===Hr.HSL_CSS?Hr.HSLA_CSS:t===Ur.RGB?Ur.RGBA:t===Ur.HSL?Ur.HSLA:t===Ur.HSV?Ur.HSVA:t}function cut(t){return t===Hr.HEXA?Hr.HEX:t===Hr.RGBA_CSS?Hr.RGB_CSS:t===Hr.HSLA_CSS?Hr.HSL_CSS:t===Ur.RGBA?Ur.RGB:t===Ur.HSLA?Ur.HSL:t===Ur.HSVA?Ur.HSV:t}function uut(t,e){const{slider:{width:i},preview:n}=t;if(e)return i;const s=p3e.l.preview.size-n.size;return i+s}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const i4={thumbnail:"thumbnail",background:"background",initials:"initials",icon:"icon"};function b3e(t){t=x3e(t);let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);let i="#";for(let n=0;n<3;n++){const s=e>>n*8&255;i+=("00"+s.toString(16)).substr(-2)}return i}function x3e(t){const e=Math.floor(t.length/2),i=t.split("").reverse().join("");return i.substring(e)+i.slice(0,e)}function w3e(t){let{r:e,g:i,b:n}=t;e/=255,i/=255,n/=255;const s=Math.max(e,i,n),r=Math.min(e,i,n),o=s-r;if(s===r)return 0;let l=(s+r)/2;switch(s){case e:l=(i-n)/o+(i<n?6:0);break;case i:l=(n-e)/o+2;break;case n:l=(e-i)/o+4;break}return Math.round(l*60)}function S3e(t){return w3e(YO(t))}const E3e=":host{display:inline-block;overflow:hidden;border-radius:var(--calcite-avatar-corner-radius, 50%);color:var(--calcite-avatar-color, var(--calcite-color-text-2))}:host([scale=s]){block-size:1.5rem;inline-size:1.5rem;font-size:var(--calcite-font-size--3)}:host([scale=m]){block-size:2rem;inline-size:2rem;font-size:var(--calcite-font-size--2)}:host([scale=l]){block-size:2.75rem;inline-size:2.75rem;font-size:var(--calcite-font-size-0)}.icon{display:flex}.background{display:flex;block-size:100%;inline-size:100%;align-items:center;justify-content:center;border-radius:var(--calcite-avatar-corner-radius, 50%)}.initials{font-weight:var(--calcite-font-weight-bold);text-transform:uppercase}.thumbnail{block-size:100%;inline-size:100%;border-radius:var(--calcite-avatar-corner-radius, 50%)}:host([hidden]){display:none}[hidden]{display:none}",C3e=E3e,P3e=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.scale="m",this.thumbnail=void 0,this.fullName=void 0,this.username=void 0,this.userId=void 0,this.label=void 0,this.thumbnailFailedToLoad=!1}render(){return this.determineContent()}determineContent(){if(this.thumbnail&&!this.thumbnailFailedToLoad)return Me("img",{alt:this.label||"",class:i4.thumbnail,onError:()=>this.thumbnailFailedToLoad=!0,src:this.thumbnail});const e=this.generateInitials(),i=this.generateFillColor();return Me("span",{"aria-label":this.label||this.fullName,class:i4.background,role:"figure",style:{backgroundColor:i}},e?Me("span",{"aria-hidden":"true",class:i4.initials},e):Me("calcite-icon",{class:i4.icon,icon:"user",scale:this.scale}))}generateFillColor(){const{userId:e,username:i,fullName:n,el:s}=this,r=G2e(s),o=e&&`#${e.substr(e.length-6)}`,l=i||n||"",c=o&&A9(o)?o:b3e(l);return!e&&!l||!A9(c)?"var(--calcite-avatar-background-color, var(--calcite-color-foreground-2))":`var(--calcite-avatar-background-color, hsl(${S3e(c)}, 60%, ${r==="dark"?20:90}%))`}generateInitials(){const{fullName:e,username:i}=this;return e?e.trim().split(" ").map(n=>n.substring(0,1)).join(""):i?i.substring(0,2):!1}get el(){return this}static get style(){return C3e}},[1,"calcite-avatar",{scale:[513],thumbnail:[513],fullName:[513,"full-name"],username:[513],userId:[513,"user-id"],label:[1],thumbnailFailedToLoad:[32]}]);function Wre(){if(typeof customElements>"u")return;["calcite-avatar","calcite-icon"].forEach(e=>{switch(e){case"calcite-avatar":customElements.get(e)||customElements.define(e,P3e);break;case"calcite-icon":customElements.get(e)||Pr();break}})}Wre();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const R_={textContainer:"text-container",fullName:"full-name",username:"username",button:"button"},T3e=`:host{display:inline-flex;outline:2px solid transparent;outline-offset:2px}:host .button{background-color:transparent;border:none;margin:0px;display:flex;cursor:pointer;align-items:center;justify-content:center;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size-0);line-height:1.25rem;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-block-end:2px solid transparent}:host(:hover) .button,:host(:focus) .button{background-color:var(--calcite-color-foreground-2)}:host(:focus) .button{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:active) .button{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}:host([active]) .button{border-color:var(--calcite-color-brand);color:var(--calcite-color-text-1);--calcite-icon-color:var(--calcite-color-brand)}.text-container{margin-block-start:0.125rem;display:flex;flex-direction:column;padding-inline:1rem;text-align:start}calcite-avatar{padding-inline:1rem}calcite-avatar~.text-container{padding-inline-start:0px}.full-name{margin-inline-start:0px;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.username{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host([hidden]){display:none}[hidden]{display:none}`,I3e=T3e,M3e=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.active=void 0,this.fullName=void 0,this.label=void 0,this.textDisabled=!1,this.thumbnail=void 0,this.userId=void 0,this.username=void 0}async setFocus(){await Cr(this),this.el.focus()}componentWillLoad(){Sr(this)}componentDidLoad(){Er(this)}render(){return Me(er,{key:"d848f4b0ee430fdbf74ce63be874afc055b1a48a"},Me("button",{key:"d8187d1795407a9d12e4f2c6c3d75dba47cdf028","aria-label":this.label,class:R_.button},Me("calcite-avatar",{key:"3a8526feb870ed33d7eae888c71f9489d90df26f","full-name":this.fullName,label:this.label,thumbnail:this.thumbnail,"user-id":this.userId,username:this.username}),(this.fullName||this.username)&&!this.textDisabled&&Me("div",{key:"111bc54b8e187a95849ed325aca22880c00d1191",class:R_.textContainer},this.fullName&&Me("span",{class:R_.fullName,key:R_.fullName},this.fullName),this.username&&Me("span",{class:R_.username,key:R_.username},this.username))))}static get delegatesFocus(){return!0}get el(){return this}static get style(){return I3e}},[17,"calcite-navigation-user",{active:[516],fullName:[1,"full-name"],label:[1],textDisabled:[516,"text-disabled"],thumbnail:[1],userId:[1,"user-id"],username:[1],setFocus:[64]}]);function A3e(){if(typeof customElements>"u")return;["calcite-navigation-user","calcite-avatar","calcite-icon"].forEach(e=>{switch(e){case"calcite-navigation-user":customElements.get(e)||customElements.define(e,M3e);break;case"calcite-avatar":customElements.get(e)||Wre();break;case"calcite-icon":customElements.get(e)||Pr();break}})}A3e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function fX(t,e){return(t+e)%e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var k3e=typeof global=="object"&&global&&global.Object===Object&&global;const D3e=k3e;var N3e=typeof self=="object"&&self&&self.Object===Object&&self,O3e=D3e||N3e||Function("return this")();const Zre=O3e;var $3e=Zre.Symbol;const k9=$3e;var Kre=Object.prototype,R3e=Kre.hasOwnProperty,L3e=Kre.toString,Uw=k9?k9.toStringTag:void 0;function F3e(t){var e=R3e.call(t,Uw),i=t[Uw];try{t[Uw]=void 0;var n=!0}catch{}var s=L3e.call(t);return n&&(e?t[Uw]=i:delete t[Uw]),s}var z3e=Object.prototype,q3e=z3e.toString;function V3e(t){return q3e.call(t)}var G3e="[object Null]",j3e="[object Undefined]",pX=k9?k9.toStringTag:void 0;function B3e(t){return t==null?t===void 0?j3e:G3e:pX&&pX in Object(t)?F3e(t):V3e(t)}function H3e(t){return t!=null&&typeof t=="object"}var U3e="[object Symbol]";function Y3e(t){return typeof t=="symbol"||H3e(t)&&B3e(t)==U3e}var X3e=/\s/;function W3e(t){for(var e=t.length;e--&&X3e.test(t.charAt(e)););return e}var Z3e=/^\s+/;function K3e(t){return t&&t.slice(0,W3e(t)+1).replace(Z3e,"")}function XO(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var mX=NaN,J3e=/^[-+]0x[0-9a-f]+$/i,Q3e=/^0b[01]+$/i,eSe=/^0o[0-7]+$/i,tSe=parseInt;function gX(t){if(typeof t=="number")return t;if(Y3e(t))return mX;if(XO(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=XO(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=K3e(t);var i=Q3e.test(t);return i||eSe.test(t)?tSe(t.slice(2),i?2:8):J3e.test(t)?mX:+t}var iSe=function(){return Zre.Date.now()};const s8=iSe;var nSe="Expected a function",sSe=Math.max,rSe=Math.min;function Jre(t,e,i){var n,s,r,o,l,c,f=0,y=!1,_=!1,x=!0;if(typeof t!="function")throw new TypeError(nSe);e=gX(e)||0,XO(i)&&(y=!!i.leading,_="maxWait"in i,r=_?sSe(gX(i.maxWait)||0,e):r,x="trailing"in i?!!i.trailing:x);function S(W){var J=n,re=s;return n=s=void 0,f=W,o=t.apply(re,J),o}function P(W){return f=W,l=setTimeout(N,e),y?S(W):o}function A(W){var J=W-c,re=W-f,ne=e-J;return _?rSe(ne,r-re):ne}function D(W){var J=W-c,re=W-f;return c===void 0||J>=e||J<0||_&&re>=r}function N(){var W=s8();if(D(W))return F(W);l=setTimeout(N,A(W))}function F(W){return l=void 0,x&&n?S(W):(n=s=void 0,o)}function G(){l!==void 0&&clearTimeout(l),f=0,n=c=s=l=void 0}function V(){return l===void 0?o:F(s8())}function B(){var W=s8(),J=D(W);if(n=arguments,s=this,c=W,J){if(l===void 0)return P(c);if(_)return clearTimeout(l),l=setTimeout(N,e),S(c)}return l===void 0&&(l=setTimeout(N,e)),o}return B.cancel=G,B.flush=V,B}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Qre=["top","right","bottom","left"],yX=["start","end"],vX=Qre.reduce((t,e)=>t.concat(e,e+"-"+yX[0],e+"-"+yX[1]),[]),P2=Math.min,Uy=Math.max,D9=Math.round,n4=Math.floor,T0=t=>({x:t,y:t}),oSe={left:"right",right:"left",bottom:"top",top:"bottom"},aSe={start:"end",end:"start"};function WO(t,e,i){return Uy(t,P2(e,i))}function Lv(t,e){return typeof t=="function"?t(e):t}function im(t){return t.split("-")[0]}function yf(t){return t.split("-")[1]}function eoe(t){return t==="x"?"y":"x"}function zq(t){return t==="y"?"height":"width"}function kM(t){return["top","bottom"].includes(im(t))?"y":"x"}function qq(t){return eoe(kM(t))}function toe(t,e,i){i===void 0&&(i=!1);const n=yf(t),s=qq(t),r=zq(s);let o=s==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=O9(o)),[o,O9(o)]}function lSe(t){const e=O9(t);return[N9(t),e,N9(e)]}function N9(t){return t.replace(/start|end/g,e=>aSe[e])}function cSe(t,e,i){const n=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?s:n:e?n:s;case"left":case"right":return e?r:o;default:return[]}}function uSe(t,e,i,n){const s=yf(t);let r=cSe(im(t),i==="start",n);return s&&(r=r.map(o=>o+"-"+s),e&&(r=r.concat(r.map(N9)))),r}function O9(t){return t.replace(/left|right|bottom|top/g,e=>oSe[e])}function hSe(t){return{top:0,right:0,bottom:0,left:0,...t}}function ioe(t){return typeof t!="number"?hSe(t):{top:t,right:t,bottom:t,left:t}}function $9(t){const{x:e,y:i,width:n,height:s}=t;return{width:n,height:s,top:i,left:e,right:e+n,bottom:i+s,x:e,y:i}}function _X(t,e,i){let{reference:n,floating:s}=t;const r=kM(e),o=qq(e),l=zq(o),c=im(e),f=r==="y",y=n.x+n.width/2-s.width/2,_=n.y+n.height/2-s.height/2,x=n[l]/2-s[l]/2;let S;switch(c){case"top":S={x:y,y:n.y-s.height};break;case"bottom":S={x:y,y:n.y+n.height};break;case"right":S={x:n.x+n.width,y:_};break;case"left":S={x:n.x-s.width,y:_};break;default:S={x:n.x,y:n.y}}switch(yf(e)){case"start":S[o]-=x*(i&&f?-1:1);break;case"end":S[o]+=x*(i&&f?-1:1);break}return S}const dSe=async(t,e,i)=>{const{placement:n="bottom",strategy:s="absolute",middleware:r=[],platform:o}=i,l=r.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:y,y:_}=_X(f,n,c),x=n,S={},P=0;for(let A=0;A<l.length;A++){const{name:D,fn:N}=l[A],{x:F,y:G,data:V,reset:B}=await N({x:y,y:_,initialPlacement:n,placement:x,strategy:s,middlewareData:S,rects:f,platform:o,elements:{reference:t,floating:e}});y=F??y,_=G??_,S={...S,[D]:{...S[D],...V}},B&&P<=50&&(P++,typeof B=="object"&&(B.placement&&(x=B.placement),B.rects&&(f=B.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):B.rects),{x:y,y:_}=_X(f,x,c)),A=-1)}return{x:y,y:_,placement:x,strategy:s,middlewareData:S}};async function xE(t,e){var i;e===void 0&&(e={});const{x:n,y:s,platform:r,rects:o,elements:l,strategy:c}=t,{boundary:f="clippingAncestors",rootBoundary:y="viewport",elementContext:_="floating",altBoundary:x=!1,padding:S=0}=Lv(e,t),P=ioe(S),D=l[x?_==="floating"?"reference":"floating":_],N=$9(await r.getClippingRect({element:(i=await(r.isElement==null?void 0:r.isElement(D)))==null||i?D:D.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:f,rootBoundary:y,strategy:c})),F=_==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,G=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),V=await(r.isElement==null?void 0:r.isElement(G))?await(r.getScale==null?void 0:r.getScale(G))||{x:1,y:1}:{x:1,y:1},B=$9(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:F,offsetParent:G,strategy:c}):F);return{top:(N.top-B.top+P.top)/V.y,bottom:(B.bottom-N.bottom+P.bottom)/V.y,left:(N.left-B.left+P.left)/V.x,right:(B.right-N.right+P.right)/V.x}}const fSe=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:n,placement:s,rects:r,platform:o,elements:l,middlewareData:c}=e,{element:f,padding:y=0}=Lv(t,e)||{};if(f==null)return{};const _=ioe(y),x={x:i,y:n},S=qq(s),P=zq(S),A=await o.getDimensions(f),D=S==="y",N=D?"top":"left",F=D?"bottom":"right",G=D?"clientHeight":"clientWidth",V=r.reference[P]+r.reference[S]-x[S]-r.floating[P],B=x[S]-r.reference[S],W=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let J=W?W[G]:0;(!J||!await(o.isElement==null?void 0:o.isElement(W)))&&(J=l.floating[G]||r.floating[P]);const re=V/2-B/2,ne=J/2-A[P]/2-1,oe=P2(_[N],ne),pe=P2(_[F],ne),ce=oe,ue=J-A[P]-pe,se=J/2-A[P]/2+re,de=WO(ce,se,ue),Se=!c.arrow&&yf(s)!=null&&se!==de&&r.reference[P]/2-(se<ce?oe:pe)-A[P]/2<0,Pe=Se?se<ce?se-ce:se-ue:0;return{[S]:x[S]+Pe,data:{[S]:de,centerOffset:se-de-Pe,...Se&&{alignmentOffset:Pe}},reset:Se}}});function pSe(t,e,i){return(t?[...i.filter(s=>yf(s)===t),...i.filter(s=>yf(s)!==t)]:i.filter(s=>im(s)===s)).filter(s=>t?yf(s)===t||(e?N9(s)!==s:!1):!0)}const mSe=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,n,s;const{rects:r,middlewareData:o,placement:l,platform:c,elements:f}=e,{crossAxis:y=!1,alignment:_,allowedPlacements:x=vX,autoAlignment:S=!0,...P}=Lv(t,e),A=_!==void 0||x===vX?pSe(_||null,S,x):x,D=await xE(e,P),N=((i=o.autoPlacement)==null?void 0:i.index)||0,F=A[N];if(F==null)return{};const G=toe(F,r,await(c.isRTL==null?void 0:c.isRTL(f.floating)));if(l!==F)return{reset:{placement:A[0]}};const V=[D[im(F)],D[G[0]],D[G[1]]],B=[...((n=o.autoPlacement)==null?void 0:n.overflows)||[],{placement:F,overflows:V}],W=A[N+1];if(W)return{data:{index:N+1,overflows:B},reset:{placement:W}};const J=B.map(oe=>{const pe=yf(oe.placement);return[oe.placement,pe&&y?oe.overflows.slice(0,2).reduce((ce,ue)=>ce+ue,0):oe.overflows[0],oe.overflows]}).sort((oe,pe)=>oe[1]-pe[1]),ne=((s=J.filter(oe=>oe[2].slice(0,yf(oe[0])?2:3).every(pe=>pe<=0))[0])==null?void 0:s[0])||J[0][0];return ne!==l?{data:{index:N+1,overflows:B},reset:{placement:ne}}:{}}}},gSe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,n;const{placement:s,middlewareData:r,rects:o,initialPlacement:l,platform:c,elements:f}=e,{mainAxis:y=!0,crossAxis:_=!0,fallbackPlacements:x,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:P="none",flipAlignment:A=!0,...D}=Lv(t,e);if((i=r.arrow)!=null&&i.alignmentOffset)return{};const N=im(s),F=im(l)===l,G=await(c.isRTL==null?void 0:c.isRTL(f.floating)),V=x||(F||!A?[O9(l)]:lSe(l));!x&&P!=="none"&&V.push(...uSe(l,A,P,G));const B=[l,...V],W=await xE(e,D),J=[];let re=((n=r.flip)==null?void 0:n.overflows)||[];if(y&&J.push(W[N]),_){const ce=toe(s,o,G);J.push(W[ce[0]],W[ce[1]])}if(re=[...re,{placement:s,overflows:J}],!J.every(ce=>ce<=0)){var ne,oe;const ce=(((ne=r.flip)==null?void 0:ne.index)||0)+1,ue=B[ce];if(ue)return{data:{index:ce,overflows:re},reset:{placement:ue}};let se=(oe=re.filter(de=>de.overflows[0]<=0).sort((de,Se)=>de.overflows[1]-Se.overflows[1])[0])==null?void 0:oe.placement;if(!se)switch(S){case"bestFit":{var pe;const de=(pe=re.map(Se=>[Se.placement,Se.overflows.filter(Pe=>Pe>0).reduce((Pe,Re)=>Pe+Re,0)]).sort((Se,Pe)=>Se[1]-Pe[1])[0])==null?void 0:pe[0];de&&(se=de);break}case"initialPlacement":se=l;break}if(s!==se)return{reset:{placement:se}}}return{}}}};function bX(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function xX(t){return Qre.some(e=>t[e]>=0)}const ySe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:n="referenceHidden",...s}=Lv(t,e);switch(n){case"referenceHidden":{const r=await xE(e,{...s,elementContext:"reference"}),o=bX(r,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:xX(o)}}}case"escaped":{const r=await xE(e,{...s,altBoundary:!0}),o=bX(r,i.floating);return{data:{escapedOffsets:o,escaped:xX(o)}}}default:return{}}}}};async function vSe(t,e){const{placement:i,platform:n,elements:s}=t,r=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=im(i),l=yf(i),c=kM(i)==="y",f=["left","top"].includes(o)?-1:1,y=r&&c?-1:1,_=Lv(e,t);let{mainAxis:x,crossAxis:S,alignmentAxis:P}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,..._};return l&&typeof P=="number"&&(S=l==="end"?P*-1:P),c?{x:S*y,y:x*f}:{x:x*f,y:S*y}}const _Se=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,n;const{x:s,y:r,placement:o,middlewareData:l}=e,c=await vSe(e,t);return o===((i=l.offset)==null?void 0:i.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:r+c.y,data:{...c,placement:o}}}}},bSe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:n,placement:s}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:l={fn:D=>{let{x:N,y:F}=D;return{x:N,y:F}}},...c}=Lv(t,e),f={x:i,y:n},y=await xE(e,c),_=kM(im(s)),x=eoe(_);let S=f[x],P=f[_];if(r){const D=x==="y"?"top":"left",N=x==="y"?"bottom":"right",F=S+y[D],G=S-y[N];S=WO(F,S,G)}if(o){const D=_==="y"?"top":"left",N=_==="y"?"bottom":"right",F=P+y[D],G=P-y[N];P=WO(F,P,G)}const A=l.fn({...e,[x]:S,[_]:P});return{...A,data:{x:A.x-i,y:A.y-n}}}}};function DM(){return typeof window<"u"}function mx(t){return noe(t)?(t.nodeName||"").toLowerCase():"#document"}function Lc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ym(t){var e;return(e=(noe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function noe(t){return DM()?t instanceof Node||t instanceof Lc(t).Node:!1}function rd(t){return DM()?t instanceof Element||t instanceof Lc(t).Element:!1}function xf(t){return DM()?t instanceof HTMLElement||t instanceof Lc(t).HTMLElement:!1}function wX(t){return!DM()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Lc(t).ShadowRoot}function kC(t){const{overflow:e,overflowX:i,overflowY:n,display:s}=od(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!["inline","contents"].includes(s)}function xSe(t){return["table","td","th"].includes(mx(t))}function NM(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function OM(t){const e=Vq(),i=rd(t)?od(t):t;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(i.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(i.contain||"").includes(n))}function wSe(t){let e=I0(t);for(;xf(e)&&!T2(e);){if(OM(e))return e;if(NM(e))return null;e=I0(e)}return null}function Vq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function T2(t){return["html","body","#document"].includes(mx(t))}function od(t){return Lc(t).getComputedStyle(t)}function $M(t){return rd(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function I0(t){if(mx(t)==="html")return t;const e=t.assignedSlot||t.parentNode||wX(t)&&t.host||ym(t);return wX(e)?e.host:e}function soe(t){const e=I0(t);return T2(e)?t.ownerDocument?t.ownerDocument.body:t.body:xf(e)&&kC(e)?e:soe(e)}function wE(t,e,i){var n;e===void 0&&(e=[]),i===void 0&&(i=!0);const s=soe(t),r=s===((n=t.ownerDocument)==null?void 0:n.body),o=Lc(s);if(r){const l=SSe(o);return e.concat(o,o.visualViewport||[],kC(s)?s:[],l&&i?wE(l):[])}return e.concat(s,wE(s,[],i))}function SSe(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function roe(t){const e=od(t);let i=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=xf(t),r=s?t.offsetWidth:i,o=s?t.offsetHeight:n,l=D9(i)!==r||D9(n)!==o;return l&&(i=r,n=o),{width:i,height:n,$:l}}function Gq(t){return rd(t)?t:t.contextElement}function e2(t){const e=Gq(t);if(!xf(e))return T0(1);const i=e.getBoundingClientRect(),{width:n,height:s,$:r}=roe(e);let o=(r?D9(i.width):i.width)/n,l=(r?D9(i.height):i.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const ESe=T0(0);function ooe(t){const e=Lc(t);return!Vq()||!e.visualViewport?ESe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CSe(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==Lc(t)?!1:e}function rv(t,e,i,n){e===void 0&&(e=!1),i===void 0&&(i=!1);const s=t.getBoundingClientRect(),r=Gq(t);let o=T0(1);e&&(n?rd(n)&&(o=e2(n)):o=e2(t));const l=CSe(r,i,n)?ooe(r):T0(0);let c=(s.left+l.x)/o.x,f=(s.top+l.y)/o.y,y=s.width/o.x,_=s.height/o.y;if(r){const x=Lc(r),S=n&&rd(n)?Lc(n):n;let P=x,A=P.frameElement;for(;A&&n&&S!==P;){const D=e2(A),N=A.getBoundingClientRect(),F=od(A),G=N.left+(A.clientLeft+parseFloat(F.paddingLeft))*D.x,V=N.top+(A.clientTop+parseFloat(F.paddingTop))*D.y;c*=D.x,f*=D.y,y*=D.x,_*=D.y,c+=G,f+=V,P=Lc(A),A=P.frameElement}}return $9({width:y,height:_,x:c,y:f})}function PSe(t){let{elements:e,rect:i,offsetParent:n,strategy:s}=t;const r=s==="fixed",o=ym(n),l=e?NM(e.floating):!1;if(n===o||l&&r)return i;let c={scrollLeft:0,scrollTop:0},f=T0(1);const y=T0(0),_=xf(n);if((_||!_&&!r)&&((mx(n)!=="body"||kC(o))&&(c=$M(n)),xf(n))){const x=rv(n);f=e2(n),y.x=x.x+n.clientLeft,y.y=x.y+n.clientTop}return{width:i.width*f.x,height:i.height*f.y,x:i.x*f.x-c.scrollLeft*f.x+y.x,y:i.y*f.y-c.scrollTop*f.y+y.y}}function TSe(t){return Array.from(t.getClientRects())}function aoe(t){return rv(ym(t)).left+$M(t).scrollLeft}function ISe(t){const e=ym(t),i=$M(t),n=t.ownerDocument.body,s=Uy(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),r=Uy(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-i.scrollLeft+aoe(t);const l=-i.scrollTop;return od(n).direction==="rtl"&&(o+=Uy(e.clientWidth,n.clientWidth)-s),{width:s,height:r,x:o,y:l}}function MSe(t,e){const i=Lc(t),n=ym(t),s=i.visualViewport;let r=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){r=s.width,o=s.height;const f=Vq();(!f||f&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:r,height:o,x:l,y:c}}function ASe(t,e){const i=rv(t,!0,e==="fixed"),n=i.top+t.clientTop,s=i.left+t.clientLeft,r=xf(t)?e2(t):T0(1),o=t.clientWidth*r.x,l=t.clientHeight*r.y,c=s*r.x,f=n*r.y;return{width:o,height:l,x:c,y:f}}function SX(t,e,i){let n;if(e==="viewport")n=MSe(t,i);else if(e==="document")n=ISe(ym(t));else if(rd(e))n=ASe(e,i);else{const s=ooe(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return $9(n)}function loe(t,e){const i=I0(t);return i===e||!rd(i)||T2(i)?!1:od(i).position==="fixed"||loe(i,e)}function kSe(t,e){const i=e.get(t);if(i)return i;let n=wE(t,[],!1).filter(l=>rd(l)&&mx(l)!=="body"),s=null;const r=od(t).position==="fixed";let o=r?I0(t):t;for(;rd(o)&&!T2(o);){const l=od(o),c=OM(o);!c&&l.position==="fixed"&&(s=null),(r?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||kC(o)&&!c&&loe(t,o))?n=n.filter(y=>y!==o):s=l,o=I0(o)}return e.set(t,n),n}function DSe(t){let{element:e,boundary:i,rootBoundary:n,strategy:s}=t;const o=[...i==="clippingAncestors"?NM(e)?[]:kSe(e,this._c):[].concat(i),n],l=o[0],c=o.reduce((f,y)=>{const _=SX(e,y,s);return f.top=Uy(_.top,f.top),f.right=P2(_.right,f.right),f.bottom=P2(_.bottom,f.bottom),f.left=Uy(_.left,f.left),f},SX(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function NSe(t){const{width:e,height:i}=roe(t);return{width:e,height:i}}function OSe(t,e,i){const n=xf(e),s=ym(e),r=i==="fixed",o=rv(t,!0,r,e);let l={scrollLeft:0,scrollTop:0};const c=T0(0);if(n||!n&&!r)if((mx(e)!=="body"||kC(s))&&(l=$M(e)),n){const _=rv(e,!0,r,e);c.x=_.x+e.clientLeft,c.y=_.y+e.clientTop}else s&&(c.x=aoe(s));const f=o.left+l.scrollLeft-c.x,y=o.top+l.scrollTop-c.y;return{x:f,y,width:o.width,height:o.height}}function r8(t){return od(t).position==="static"}function EX(t,e){return!xf(t)||od(t).position==="fixed"?null:e?e(t):t.offsetParent}function coe(t,e){const i=Lc(t);if(NM(t))return i;if(!xf(t)){let s=I0(t);for(;s&&!T2(s);){if(rd(s)&&!r8(s))return s;s=I0(s)}return i}let n=EX(t,e);for(;n&&xSe(n)&&r8(n);)n=EX(n,e);return n&&T2(n)&&r8(n)&&!OM(n)?i:n||wSe(t)||i}const $Se=async function(t){const e=this.getOffsetParent||coe,i=this.getDimensions,n=await i(t.floating);return{reference:OSe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function RSe(t){return od(t).direction==="rtl"}const ZO={convertOffsetParentRelativeRectToViewportRelativeRect:PSe,getDocumentElement:ym,getClippingRect:DSe,getOffsetParent:coe,getElementRects:$Se,getClientRects:TSe,getDimensions:NSe,getScale:e2,isElement:rd,isRTL:RSe};function LSe(t,e){let i=null,n;const s=ym(t);function r(){var l;clearTimeout(n),(l=i)==null||l.disconnect(),i=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),r();const{left:f,top:y,width:_,height:x}=t.getBoundingClientRect();if(l||e(),!_||!x)return;const S=n4(y),P=n4(s.clientWidth-(f+_)),A=n4(s.clientHeight-(y+x)),D=n4(f),F={rootMargin:-S+"px "+-P+"px "+-A+"px "+-D+"px",threshold:Uy(0,P2(1,c))||1};let G=!0;function V(B){const W=B[0].intersectionRatio;if(W!==c){if(!G)return o();W?o(!1,W):n=setTimeout(()=>{o(!1,1e-7)},1e3)}G=!1}try{i=new IntersectionObserver(V,{...F,root:s.ownerDocument})}catch{i=new IntersectionObserver(V,F)}i.observe(t)}return o(!0),r}function FSe(t,e,i,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,f=Gq(t),y=s||r?[...f?wE(f):[],...wE(e)]:[];y.forEach(N=>{s&&N.addEventListener("scroll",i,{passive:!0}),r&&N.addEventListener("resize",i)});const _=f&&l?LSe(f,i):null;let x=-1,S=null;o&&(S=new ResizeObserver(N=>{let[F]=N;F&&F.target===f&&S&&(S.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var G;(G=S)==null||G.observe(e)})),i()}),f&&!c&&S.observe(f),S.observe(e));let P,A=c?rv(t):null;c&&D();function D(){const N=rv(t);A&&(N.x!==A.x||N.y!==A.y||N.width!==A.width||N.height!==A.height)&&i(),A=N,P=requestAnimationFrame(D)}return i(),()=>{var N;y.forEach(F=>{s&&F.removeEventListener("scroll",i),r&&F.removeEventListener("resize",i)}),_==null||_(),(N=S)==null||N.disconnect(),S=null,c&&cancelAnimationFrame(P)}}const zSe=_Se,qSe=mSe,VSe=bSe,CX=gSe,GSe=ySe,jSe=fSe,BSe=(t,e,i)=>{const n=new Map,s={platform:ZO,...i},r={...s.platform,_c:n};return dSe(t,e,{...s,platform:r})};function HSe(t){return USe(t)}function o8(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function USe(t){for(let e=t;e;e=o8(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=o8(t);e;e=o8(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||OM(i)||e.tagName==="BODY"))return e}return null}(function(){if(Df()){const e=ZO.getOffsetParent;ZO.getOffsetParent=i=>e(i,HSe)}})();function PX(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const uoe=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:n="absolute",placement:s,flipDisabled:r,flipPlacements:o,offsetDistance:l,offsetSkidding:c,arrowEl:f,type:y})=>{var B;if(!e||!i)return null;const _=Zp(i)==="rtl",{x,y:S,placement:P,strategy:A,middlewareData:D}=await BSe(e,i,{strategy:n,placement:s==="auto"||s==="auto-start"||s==="auto-end"?void 0:IX(s,_),middleware:ZSe({placement:s,flipDisabled:r,flipPlacements:o==null?void 0:o.map(W=>IX(W,_)),offsetDistance:l,offsetSkidding:c,arrowEl:f,type:y})});if(f&&D.arrow){const{x:W,y:J}=D.arrow,re=P.split("-")[0],ne=W!=null?"left":"top",oe=JSe[re],pe={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=re==="left"||re==="right"?"horizontal":"vertical"),Object.assign(f.style,{...pe,[ne]:`${ne=="left"?W:J}px`,[re]:"100%",transform:oe})}const F=((B=D.hide)==null?void 0:B.referenceHidden)?"hidden":null,G=F?"none":null;i.setAttribute(YSe,P);const{open:V}=t;Object.assign(i.style,{visibility:F,pointerEvents:G,position:A,transform:V?`translate(${PX(x)}px,${PX(S)}px)`:"",top:0,left:0})},YSe="data-placement",TX=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],XSe="bottom-start",WSe="bottom-end",I2={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function ZSe({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:n,offsetSkidding:s,arrowEl:r,type:o}){const l=[VSe(),GSe()];if(o==="menu")return[...l,CX({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if(o==="popover"||o==="tooltip"){const c=[...l,zSe({mainAxis:typeof n=="number"?n:0,crossAxis:typeof s=="number"?s:0})];return t==="auto"||t==="auto-start"||t==="auto-end"?c.push(qSe({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||c.push(CX(i?{fallbackPlacements:i}:{})),r&&c.push(jSe({element:r})),c}return[]}function hoe(t,e){const i=t.filter(n=>TX.includes(n));return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${TX.map(n=>`"${n}"`).join(", ").trim()}`,{el:e}),i}function IX(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function jq(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(!SE.get(t))return doe(t,e.referenceEl,e.floatingEl);await(i?KSe(t):uoe)(t,e)}function KSe(t){let e=R9.get(t);return e||(e=Jre(uoe,kO.reposition,{leading:!0,maxWait:kO.reposition}),R9.set(t,e),e)}const JSe={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},SE=new WeakMap,R9=new WeakMap;async function doe(t,e,i){if(!i.isConnected)return;const n=Df()?FSe:(o,l,c)=>(c(),()=>{});SE.set(t,{state:"pending"});let s;const r=n(e,i,()=>{const o=t.reposition();s||(s=o)});return SE.set(t,{state:"active",cleanUp:r}),s}async function Fb(t,e,i){if(!(!i||!e)&&(RM(t,e,i),Object.assign(i.style,{visibility:"hidden",pointerEvents:"none",position:t.overlayPositioning}),!!t.open))return doe(t,e,i)}function RM(t,e,i){var s;if(!i||!e)return;const n=SE.get(t);(n==null?void 0:n.state)==="active"&&n.cleanUp(),SE.delete(t),(s=R9.get(t))==null||s.cancel(),R9.delete(t)}const MX=4,foe=Math.ceil(Math.hypot(MX,MX));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* focus-trap 7.6.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function QSe(t,e,i){return(e=tEe(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function AX(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function kX(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?AX(Object(i),!0).forEach(function(n){QSe(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):AX(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function eEe(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tEe(t){var e=eEe(t,"string");return typeof e=="symbol"?e:e+""}var DX={activateTrap:function(e,i){if(e.length>0){var n=e[e.length-1];n!==i&&n.pause()}var s=e.indexOf(i);s===-1||e.splice(s,1),e.push(i)},deactivateTrap:function(e,i){var n=e.indexOf(i);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},iEe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},nEe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},$S=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},sEe=function(e){return $S(e)&&!e.shiftKey},rEe=function(e){return $S(e)&&e.shiftKey},NX=function(e){return setTimeout(e,0)},OX=function(e,i){var n=-1;return e.every(function(s,r){return i(s)?(n=r,!1):!0}),n},Yw=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,n):e},s4=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},oEe=[],aEe=function(e,i){var n=(i==null?void 0:i.document)||document,s=(i==null?void 0:i.trapStack)||oEe,r=kX({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:sEe,isKeyBackward:rEe},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,c=function(ue,se,de){return ue&&ue[se]!==void 0?ue[se]:r[de||se]},f=function(ue,se){var de=typeof(se==null?void 0:se.composedPath)=="function"?se.composedPath():void 0;return o.containerGroups.findIndex(function(Se){var Pe=Se.container,Re=Se.tabbableNodes;return Pe.contains(ue)||(de==null?void 0:de.includes(Pe))||Re.find(function($e){return $e===ue})})},y=function(ue){var se=r[ue];if(typeof se=="function"){for(var de=arguments.length,Se=new Array(de>1?de-1:0),Pe=1;Pe<de;Pe++)Se[Pe-1]=arguments[Pe];se=se.apply(void 0,Se)}if(se===!0&&(se=void 0),!se){if(se===void 0||se===!1)return se;throw new Error("`".concat(ue,"` was specified but was not a node, or did not return a node"))}var Re=se;if(typeof se=="string"&&(Re=n.querySelector(se),!Re))throw new Error("`".concat(ue,"` as selector refers to no known node"));return Re},_=function(){var ue=y("initialFocus");if(ue===!1)return!1;if(ue===void 0||!e8(ue,r.tabbableOptions))if(f(n.activeElement)>=0)ue=n.activeElement;else{var se=o.tabbableGroups[0],de=se&&se.firstTabbableNode;ue=de||y("fallbackFocus")}if(!ue)throw new Error("Your focus-trap needs to have at least one focusable element");return ue},x=function(){if(o.containerGroups=o.containers.map(function(ue){var se=ure(ue,r.tabbableOptions),de=q2e(ue,r.tabbableOptions),Se=se.length>0?se[0]:void 0,Pe=se.length>0?se[se.length-1]:void 0,Re=de.find(function(Fe){return O_(Fe)}),$e=de.slice().reverse().find(function(Fe){return O_(Fe)}),we=!!se.find(function(Fe){return Py(Fe)>0});return{container:ue,tabbableNodes:se,focusableNodes:de,posTabIndexesFound:we,firstTabbableNode:Se,lastTabbableNode:Pe,firstDomTabbableNode:Re,lastDomTabbableNode:$e,nextTabbableNode:function(it){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ot=se.indexOf(it);return ot<0?_t?de.slice(de.indexOf(it)+1).find(function(ut){return O_(ut)}):de.slice(0,de.indexOf(it)).reverse().find(function(ut){return O_(ut)}):se[ot+(_t?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(ue){return ue.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!y("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(ue){return ue.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},S=function(ue){var se=ue.activeElement;if(se)return se.shadowRoot&&se.shadowRoot.activeElement!==null?S(se.shadowRoot):se},P=function(ue){if(ue!==!1&&ue!==S(document)){if(!ue||!ue.focus){P(_());return}ue.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=ue,iEe(ue)&&ue.select()}},A=function(ue){var se=y("setReturnFocus",ue);return se||(se===!1?!1:ue)},D=function(ue){var se=ue.target,de=ue.event,Se=ue.isBackward,Pe=Se===void 0?!1:Se;se=se||s4(de),x();var Re=null;if(o.tabbableGroups.length>0){var $e=f(se,de),we=$e>=0?o.containerGroups[$e]:void 0;if($e<0)Pe?Re=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:Re=o.tabbableGroups[0].firstTabbableNode;else if(Pe){var Fe=OX(o.tabbableGroups,function(Vt){var Ft=Vt.firstTabbableNode;return se===Ft});if(Fe<0&&(we.container===se||e8(se,r.tabbableOptions)&&!O_(se,r.tabbableOptions)&&!we.nextTabbableNode(se,!1))&&(Fe=$e),Fe>=0){var it=Fe===0?o.tabbableGroups.length-1:Fe-1,_t=o.tabbableGroups[it];Re=Py(se)>=0?_t.lastTabbableNode:_t.lastDomTabbableNode}else $S(de)||(Re=we.nextTabbableNode(se,!1))}else{var ot=OX(o.tabbableGroups,function(Vt){var Ft=Vt.lastTabbableNode;return se===Ft});if(ot<0&&(we.container===se||e8(se,r.tabbableOptions)&&!O_(se,r.tabbableOptions)&&!we.nextTabbableNode(se))&&(ot=$e),ot>=0){var ut=ot===o.tabbableGroups.length-1?0:ot+1,Pt=o.tabbableGroups[ut];Re=Py(se)>=0?Pt.firstTabbableNode:Pt.firstDomTabbableNode}else $S(de)||(Re=we.nextTabbableNode(se))}}else Re=y("fallbackFocus");return Re},N=function(ue){var se=s4(ue);if(!(f(se,ue)>=0)){if(Yw(r.clickOutsideDeactivates,ue)){l.deactivate({returnFocus:r.returnFocusOnDeactivate});return}Yw(r.allowOutsideClick,ue)||ue.preventDefault()}},F=function(ue){var se=s4(ue),de=f(se,ue)>=0;if(de||se instanceof Document)de&&(o.mostRecentlyFocusedNode=se);else{ue.stopImmediatePropagation();var Se,Pe=!0;if(o.mostRecentlyFocusedNode)if(Py(o.mostRecentlyFocusedNode)>0){var Re=f(o.mostRecentlyFocusedNode),$e=o.containerGroups[Re].tabbableNodes;if($e.length>0){var we=$e.findIndex(function(Fe){return Fe===o.mostRecentlyFocusedNode});we>=0&&(r.isKeyForward(o.recentNavEvent)?we+1<$e.length&&(Se=$e[we+1],Pe=!1):we-1>=0&&(Se=$e[we-1],Pe=!1))}}else o.containerGroups.some(function(Fe){return Fe.tabbableNodes.some(function(it){return Py(it)>0})})||(Pe=!1);else Pe=!1;Pe&&(Se=D({target:o.mostRecentlyFocusedNode,isBackward:r.isKeyBackward(o.recentNavEvent)})),P(Se||o.mostRecentlyFocusedNode||_())}o.recentNavEvent=void 0},G=function(ue){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=ue;var de=D({event:ue,isBackward:se});de&&($S(ue)&&ue.preventDefault(),P(de))},V=function(ue){(r.isKeyForward(ue)||r.isKeyBackward(ue))&&G(ue,r.isKeyBackward(ue))},B=function(ue){nEe(ue)&&Yw(r.escapeDeactivates,ue)!==!1&&(ue.preventDefault(),l.deactivate())},W=function(ue){var se=s4(ue);f(se,ue)>=0||Yw(r.clickOutsideDeactivates,ue)||Yw(r.allowOutsideClick,ue)||(ue.preventDefault(),ue.stopImmediatePropagation())},J=function(){if(o.active)return DX.activateTrap(s,l),o.delayInitialFocusTimer=r.delayInitialFocus?NX(function(){P(_())}):P(_()),n.addEventListener("focusin",F,!0),n.addEventListener("mousedown",N,{capture:!0,passive:!1}),n.addEventListener("touchstart",N,{capture:!0,passive:!1}),n.addEventListener("click",W,{capture:!0,passive:!1}),n.addEventListener("keydown",V,{capture:!0,passive:!1}),n.addEventListener("keydown",B),l},re=function(){if(o.active)return n.removeEventListener("focusin",F,!0),n.removeEventListener("mousedown",N,!0),n.removeEventListener("touchstart",N,!0),n.removeEventListener("click",W,!0),n.removeEventListener("keydown",V,!0),n.removeEventListener("keydown",B),l},ne=function(ue){var se=ue.some(function(de){var Se=Array.from(de.removedNodes);return Se.some(function(Pe){return Pe===o.mostRecentlyFocusedNode})});se&&P(_())},oe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ne):void 0,pe=function(){oe&&(oe.disconnect(),o.active&&!o.paused&&o.containers.map(function(ue){oe.observe(ue,{subtree:!0,childList:!0})}))};return l={get active(){return o.active},get paused(){return o.paused},activate:function(ue){if(o.active)return this;var se=c(ue,"onActivate"),de=c(ue,"onPostActivate"),Se=c(ue,"checkCanFocusTrap");Se||x(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,se==null||se();var Pe=function(){Se&&x(),J(),pe(),de==null||de()};return Se?(Se(o.containers.concat()).then(Pe,Pe),this):(Pe(),this)},deactivate:function(ue){if(!o.active)return this;var se=kX({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},ue);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,re(),o.active=!1,o.paused=!1,pe(),DX.deactivateTrap(s,l);var de=c(se,"onDeactivate"),Se=c(se,"onPostDeactivate"),Pe=c(se,"checkCanReturnFocus"),Re=c(se,"returnFocus","returnFocusOnDeactivate");de==null||de();var $e=function(){NX(function(){Re&&P(A(o.nodeFocusedBeforeActivation)),Se==null||Se()})};return Re&&Pe?(Pe(A(o.nodeFocusedBeforeActivation)).then($e,$e),this):($e(),this)},pause:function(ue){if(o.paused||!o.active)return this;var se=c(ue,"onPause"),de=c(ue,"onPostPause");return o.paused=!0,se==null||se(),re(),pe(),de==null||de(),this},unpause:function(ue){if(!o.paused||!o.active)return this;var se=c(ue,"onUnpause"),de=c(ue,"onPostUnpause");return o.paused=!1,se==null||se(),x(),J(),pe(),de==null||de(),this},updateContainerElements:function(ue){var se=[].concat(ue).filter(Boolean);return o.containers=se.map(function(de){return typeof de=="string"?n.querySelector(de):de}),o.active&&x(),pe(),this}},l.updateContainerElements(e),l};function poe(t,e){const{el:i}=t,n=(e==null?void 0:e.focusTrapEl)||i;if(!n)return;const s={clickOutsideDeactivates:!0,escapeDeactivates:!1,fallbackFocus:n,setReturnFocus:r=>(tm(r),!1),...e==null?void 0:e.focusTrapOptions,document:i.ownerDocument,tabbableOptions:hre,trapStack:g2e};t.focusTrap=aEe(n,s)}function KO(t,e){var i;t.focusTrapDisabled||(i=t.focusTrap)==null||i.activate(e)}function RS(t,e){var i;(i=t.focusTrap)==null||i.deactivate(e)}function moe(t){var e;(e=t.focusTrap)==null||e.updateContainerElements(t.el)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const lEe=Abe;function $X(t){return"opened"in t?t.opened:t.open}function Bu(t){lEe(()=>{t.transitionEl&&rxe(t.transitionEl,t.openTransitionProp,()=>{$X(t)?t.onBeforeOpen():t.onBeforeClose()},()=>{$X(t)?t.onOpen():t.onClose()})})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const RX={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},cEe={width:12,height:6,strokeWidth:1},goe=({floatingLayout:t,key:e,ref:i})=>{const{width:n,height:s,strokeWidth:r}=cEe,o=n/2,l=t==="vertical",c=`M0,0 H${n} L${n-o},${s} Q${o},${s} ${o},${s} Z`;return Me("svg",{"aria-hidden":"true",class:RX.arrow,height:n,key:e,ref:i,viewBox:`0 0 ${n} ${n+(l?0:r)}`,width:n+(l?r:0)},Me("path",{class:RX.arrowStroke,d:c,fill:"none","stroke-width":r+1}),Me("path",{d:c,stroke:"none"}))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */class uEe{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,n=e.find(s=>i.has(s));return i.get(n)},this.togglePopovers=e=>{const i=e.composedPath(),n=this.queryPopover(i);n&&!n.triggerDisabled&&(n.open=!n.open),Array.from(this.registeredElements.values()).filter(s=>s!==n&&s.autoClose&&s.open&&!i.includes(s)).forEach(s=>s.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():MC(e.key)&&this.togglePopovers(e))},this.clickHandler=e=>{nxe(e)||this.togglePopovers(e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const Md={container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"headerContainer",heading:"heading"},hEe="auto",LX="aria-controls",FX="aria-expanded",dEe=":host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, var(--calcite-z-index-popup));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{inset-block-start:-5px}:host([data-placement^=top]) .calcite-floating-ui-anim{inset-block-start:5px}:host([data-placement^=left]) .calcite-floating-ui-anim{left:5px}:host([data-placement^=right]) .calcite-floating-ui-anim{left:-5px}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}:host([hidden]){display:none}[hidden]{display:none}",fEe=dEe,zX=new uEe,pEe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePopoverBeforeClose=Mt(this,"calcitePopoverBeforeClose",6),this.calcitePopoverClose=Mt(this,"calcitePopoverClose",6),this.calcitePopoverBeforeOpen=Mt(this,"calcitePopoverBeforeOpen",6),this.calcitePopoverOpen=Mt(this,"calcitePopoverOpen",6),this.mutationObserver=Ea("mutation",()=>this.updateFocusTrapElements()),this.guid=`calcite-popover-${mm()}`,this.openTransitionProp="opacity",this.hasLoaded=!1,this.setTransitionEl=e=>{this.transitionEl=e},this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?hoe(i,e):null},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement(),Fb(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:n,effectiveReferenceElement:s}=this;e&&n&&!s&&console.warn(`${i.tagName}: reference-element id "${n}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(FX,xr(i))},this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(LX,i),zX.registerElement(e,this.el),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(LX),e.removeAttribute(FX)),zX.unregisterElement(e))},this.hide=()=>{this.open=!1},this.storeArrowEl=e=>{this.arrowEl=e,this.reposition(!0)},this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.pointerDisabled=!1,this.flipPlacements=void 0,this.heading=void 0,this.headingLevel=void 0,this.label=void 0,this.messageOverrides=void 0,this.messages=void 0,this.offsetDistance=foe,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=hEe,this.referenceElement=void 0,this.scale="m",this.triggerDisabled=!1,this.effectiveLocale="",this.floatingLayout="vertical",this.effectiveReferenceElement=void 0,this.defaultMessages=void 0}handleFocusTrapDisabled(e){this.open&&(e?RS(this):KO(this))}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){Bu(this),this.reposition(!0),this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}effectiveLocaleChange(){Al(this,this.effectiveLocale)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),Ca(this),kl(this),poe(this),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}async componentWillLoad(){await Ml(this),Sr(this)}componentDidLoad(){Er(this),this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.open&&Bu(this),this.hasLoaded=!0}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),Pa(this),Dl(this),RM(this,this.effectiveReferenceElement,this.el),RS(this)}async reposition(e=!1){const{el:i,effectiveReferenceElement:n,placement:s,overlayPositioning:r,flipDisabled:o,filteredFlipPlacements:l,offsetDistance:c,offsetSkidding:f,arrowEl:y}=this;return jq(this,{floatingEl:i,referenceEl:n,overlayPositioning:r,placement:s,flipDisabled:o,flipPlacements:l,offsetDistance:c,offsetSkidding:f,arrowEl:y,type:"popover"},e)}async setFocus(){await Cr(this),Mo(this.el),IC(this.el)}async updateFocusTrapElements(){moe(this)}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?TC(i,{id:e}):e)||null}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),KO(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),RS(this)}renderCloseButton(){const{messages:e,closable:i}=this;return i?Me("div",{class:Md.closeButtonContainer,key:Md.closeButtonContainer},Me("calcite-action",{appearance:"transparent",class:Md.closeButton,onClick:this.hide,ref:n=>this.closeButtonEl=n,scale:this.scale,text:e.close},Me("calcite-icon",{icon:"x",scale:Yo(this.scale)}))):null}renderHeader(){const{heading:e,headingLevel:i}=this,n=e?Me(Fq,{class:Md.heading,level:i},e):null;return n?Me("div",{class:Md.header,key:Md.header},n,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:e,heading:i,label:n,open:s,pointerDisabled:r,floatingLayout:o}=this,l=e&&s,c=!l,f=r?null:Me(goe,{floatingLayout:o,key:"floating-arrow",ref:this.storeArrowEl});return Me(er,{key:"a563d48090d6e6c0c138023e169667834f657c4c","aria-hidden":xr(c),"aria-label":n,"aria-live":"polite","calcite-hydrated-hidden":c,id:this.getId(),role:"dialog"},Me("div",{key:"73053dbdce2cfc68fcd42667089d611e81010955",class:{[Md.container]:!0,[I2.animation]:!0,[I2.animationActive]:l},ref:this.setTransitionEl},f,Me("div",{key:"1fbcd45ee42b10a67881ced74db2db051231c94d",class:{[Md.hasHeader]:!!i,[Md.headerContainer]:!0}},this.renderHeader(),Me("div",{key:"522abe801b98787863aac14d990b948d2d286156",class:Md.content},Me("slot",{key:"022a8f690288acdbac4ec1b3eccf807ffe382d5d"})),i?null:this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return fEe}},[1,"calcite-popover",{autoClose:[516,"auto-close"],closable:[516],flipDisabled:[516,"flip-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],pointerDisabled:[516,"pointer-disabled"],flipPlacements:[16],heading:[1],headingLevel:[514,"heading-level"],label:[1],messageOverrides:[1040],messages:[1040],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],scale:[513],triggerDisabled:[516,"trigger-disabled"],effectiveLocale:[32],floatingLayout:[32],effectiveReferenceElement:[32],defaultMessages:[32],reposition:[64],setFocus:[64],updateFocusTrapElements:[64]},void 0,{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function Fv(){if(typeof customElements>"u")return;["calcite-popover","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-popover":customElements.get(e)||customElements.define(e,pEe);break;case"calcite-action":customElements.get(e)||Nf();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break}})}Fv();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const qX={menu:"menu",defaultTrigger:"default-trigger"},M2={tooltip:"tooltip",trigger:"trigger"},mEe={menu:"ellipsis"},gEe="data-active",yEe=":host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}",vEe=yEe,_Ee=["ArrowUp","ArrowDown","End","Home"],bEe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionMenuOpen=Mt(this,"calciteActionMenuOpen",6),this.actionElements=[],this.guid=`calcite-action-menu-${mm()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.connectMenuButtonEl=()=>{const{menuButtonId:e,menuId:i,open:n,label:s}=this,r=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==r&&(this.disconnectMenuButtonEl(),this.menuButtonEl=r,this.setTooltipReferenceElement(),r&&(r.active=n,r.setAttribute("aria-controls",i),r.setAttribute("aria-expanded",xr(n)),r.setAttribute("aria-haspopup","true"),r.id||(r.id=e),r.label||(r.label=s),r.text||(r.text=s),r.addEventListener("click",this.menuButtonClick),r.addEventListener("keydown",this.menuButtonKeyDown)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown))},this.setMenuButtonEl=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()},this.setDefaultMenuButtonEl=e=>{this.defaultMenuButtonEl=e,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=()=>{this.toggleOpen()},this.updateTooltip=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()},this.setTooltipReferenceElement=()=>{const{tooltipEl:e,expanded:i,menuButtonEl:n,open:s}=this;e&&(e.referenceElement=!i&&!s?n:null)},this.updateAction=(e,i)=>{const{guid:n,activeMenuItemIndex:s}=this,r=`${n}-action-${i}`;e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=r),e.toggleAttribute(gEe,i===s)},this.updateActions=e=>{e==null||e.forEach(this.updateAction)},this.handleDefaultSlotChange=e=>{const i=e.target.assignedElements({flatten:!0}).reduce((n,s)=>s!=null&&s.matches("calcite-action")?(n.push(s),n):s!=null&&s.matches("calcite-action-group")?n.concat(Array.from(s.querySelectorAll("calcite-action"))):n,[]);this.actionElements=i.filter(n=>!n.disabled&&!n.hidden)},this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:n,activeMenuItemIndex:s,open:r}=this;if(n.length){if(MC(i)){if(e.preventDefault(),!r){this.toggleOpen();return}const o=n[s];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,n)}},this.handleActionNavigation=(e,i,n)=>{if(!this.isValidKey(i,_Ee))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=n.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=n.length-1);const s=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=fX(Math.max(s-1,-1),n.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=fX(s+1,n.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(e=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=e},this.handlePopoverOpen=()=>{this.open=!0},this.handlePopoverClose=()=>{this.open=!1},this.appearance="solid",this.expanded=!1,this.flipPlacements=void 0,this.label=void 0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale=void 0,this.menuButtonEl=void 0,this.activeMenuItemIndex=-1}connectedCallback(){this.connectMenuButtonEl()}componentWillLoad(){Sr(this)}componentDidLoad(){Er(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=e),this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){return await Cr(this),tm(this.menuButtonEl)}renderMenuButton(){const{appearance:e,label:i,scale:n,expanded:s}=this;return Me("slot",{name:M2.trigger,onSlotchange:this.setMenuButtonEl},Me("calcite-action",{appearance:e,class:qX.defaultTrigger,icon:mEe.menu,ref:this.setDefaultMenuButtonEl,scale:n,text:i,textEnabled:s}))}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,open:n,menuId:s,menuButtonEl:r,label:o,placement:l,overlayPositioning:c,flipPlacements:f}=this,y=e[i],_=(y==null?void 0:y.id)||null;return Me("calcite-popover",{autoClose:!0,flipPlacements:f,focusTrapDisabled:!0,label:o,offsetDistance:0,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,open:n,overlayPositioning:c,placement:l,pointerDisabled:!0,referenceElement:r},Me("div",{"aria-activedescendant":_,"aria-labelledby":r==null?void 0:r.id,class:qX.menu,id:s,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},Me("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return Me(IM,{key:"d13aa4f3d43fb5651c0487ccfa456813f69955d2"},this.renderMenuButton(),this.renderMenuItems(),Me("slot",{key:"b63d187516c766db6a1b1db3df34050fdec9e6ce",name:M2.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(e,i){return!!i.find(n=>n===e)}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}static get style(){return vEe}},[1,"calcite-action-menu",{appearance:[513],expanded:[516],flipPlacements:[16],label:[1],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],menuButtonEl:[32],activeMenuItemIndex:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}]);function gx(){if(typeof customElements>"u")return;["calcite-action-menu","calcite-action","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-menu":customElements.get(e)||customElements.define(e,bEe);break;case"calcite-action":customElements.get(e)||Nf();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break;case"calcite-popover":customElements.get(e)||Fv();break}})}gx();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const VX={scrim:"scrim",content:"content"},GX={s:72,l:480},xEe=":host{--calcite-scrim-background:var(--calcite-color-transparent-scrim);position:absolute;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",wEe=xEe,SEe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=Ea("resize",()=>this.handleResize()),this.handleDefaultSlotChange=e=>{this.hasContent=J2e(e)},this.storeLoaderEl=e=>{this.loaderEl=e,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){Al(this,this.effectiveLocale)}connectedCallback(){var e;Ca(this),kl(this),(e=this.resizeObserver)==null||e.observe(this.el)}async componentWillLoad(){await Ml(this)}disconnectedCallback(){var e;Pa(this),Dl(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const{hasContent:e,loading:i,messages:n}=this;return Me("div",{key:"286b03bb4a18b45f1b6914684a5178e952a44127",class:VX.scrim},i?Me("calcite-loader",{label:n.loading,ref:this.storeLoaderEl,scale:this.loaderScale}):null,Me("div",{key:"0f8cd111720239b204d0d201610c4145d5616753",class:VX.content,hidden:!e},Me("slot",{key:"fe7bbced9871c9179971da0ef7ca07ea1c9ac33e",onSlotchange:this.handleDefaultSlotChange})))}getScale(e){return e<GX.s?"s":e>=GX.l?"l":"m"}handleResize(){const{loaderEl:e,el:i}=this;e&&(this.loaderScale=this.getScale(Math.min(i.clientHeight,i.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return wEe}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Bq(){if(typeof customElements>"u")return;["calcite-scrim","calcite-loader"].forEach(e=>{switch(e){case"calcite-scrim":customElements.get(e)||customElements.define(e,SEe);break;case"calcite-loader":customElements.get(e)||Nl();break}})}Bq();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Or={actionBarContainer:"action-bar-container",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",heading:"heading",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end"},jX={close:"close",collapse:"collapse"},r4={close:"x",menu:"ellipsis",expand:"chevron-down",collapse:"chevron-up"},Xs={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"},EEe=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height:calc(var(--calcite-icon-size) * 3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}:host([scale=s]){--calcite-internal-panel-default-padding:var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding:10px}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-internal-panel-default-padding:var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding:var(--calcite-spacing-lg)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-internal-panel-default-padding:var(--calcite-spacing-xl);--calcite-internal-panel-header-vertical-padding:var(--calcite-spacing-xxl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1);line-height:1.5rem}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0);line-height:1.25rem}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;border-block-start:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.container{position:relative;margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), inline-size var(--calcite-animation-timing)}.container[hidden]{display:none}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1);border-block-end:var(--calcite-panel-header-border-block-end, 1px solid var(--calcite-color-border-3))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-color-border-3)}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:0.75rem;padding-block:0.875rem;margin-inline-end:auto}.header-content .heading,.header-content .description{display:block;overflow-wrap:break-word;padding:0px}.header-content .heading{margin-inline:0px;margin-block:0px 0.25rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-color-text-2)}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-color-border-3);border-inline-end-width:1px}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;outline-color:transparent;padding:var(--calcite-panel-content-space, 0);background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.content-top,.content-bottom{padding:var(--calcite-internal-panel-default-padding)}.header-content{flex:1 1 auto;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-padding)}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-color-border-3);padding:var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-padding))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-padding)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-padding)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-padding)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:0.5rem;inset-inline:0;inline-size:-moz-fit-content;inline-size:fit-content}:host([hidden]){display:none}[hidden]{display:none}`,CEe=EEe,PEe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePanelClose=Mt(this,"calcitePanelClose",6),this.calcitePanelToggle=Mt(this,"calcitePanelToggle",6),this.calcitePanelScroll=Mt(this,"calcitePanelScroll",6),this.resizeObserver=Ea("resize",()=>this.resizeHandler()),this.resizeHandler=()=>{const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")},this.setContainerRef=e=>{this.containerEl=e},this.panelKeyDownHandler=e=>{this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.handleUserClose(),e.preventDefault())},this.handleUserClose=()=>{this.closed=!0,this.calcitePanelClose.emit()},this.open=()=>{this.isClosed=!1},this.close=async()=>{const e=this.beforeClose??(()=>Promise.resolve());try{await e()}catch{requestAnimationFrame(()=>{this.closed=!1});return}this.isClosed=!0},this.collapse=()=>{this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()},this.panelScrollHandler=()=>{this.calcitePanelScroll.emit()},this.handleHeaderActionsStartSlotChange=e=>{this.hasStartActions=yn(e)},this.handleHeaderActionsEndSlotChange=e=>{this.hasEndActions=yn(e)},this.handleHeaderMenuActionsSlotChange=e=>{this.hasMenuItems=yn(e)},this.handleActionBarSlotChange=e=>{const i=nc(e).filter(n=>n==null?void 0:n.matches("calcite-action-bar"));i.forEach(n=>n.layout="horizontal"),this.hasActionBar=!!i.length},this.handleHeaderContentSlotChange=e=>{this.hasHeaderContent=yn(e)},this.handleFabSlotChange=e=>{this.hasFab=yn(e)},this.handleFooterActionsSlotChange=e=>{this.hasFooterActions=yn(e)},this.handleFooterEndSlotChange=e=>{this.hasFooterEndContent=yn(e)},this.handleFooterStartSlotChange=e=>{this.hasFooterStartContent=yn(e)},this.handleFooterSlotChange=e=>{this.hasFooterContent=yn(e)},this.contentBottomSlotChangeHandler=e=>{this.hasContentBottom=yn(e)},this.contentTopSlotChangeHandler=e=>{this.hasContentTop=yn(e)},this.setPanelScrollEl=e=>{var i,n;this.panelScrollEl=e,(i=this.resizeObserver)==null||i.disconnect(),e&&((n=this.resizeObserver)==null||n.observe(e),this.resizeHandler())},this.handleAlertsSlotChange=e=>{var i;(i=nc(e))==null||i.map(n=>{n.nodeName==="CALCITE-ALERT"&&(n.embedded=!0)})},this.beforeClose=void 0,this.closed=!1,this.disabled=!1,this.closable=!1,this.collapsed=!1,this.collapseDirection="down",this.collapsible=!1,this.headingLevel=void 0,this.loading=!1,this.heading=void 0,this.description=void 0,this.menuFlipPlacements=void 0,this.menuOpen=!1,this.menuPlacement=WSe,this.messageOverrides=void 0,this.messages=void 0,this.overlayPositioning="absolute",this.scale="m",this.isClosed=!1,this.hasStartActions=!1,this.hasEndActions=!1,this.hasMenuItems=!1,this.hasHeaderContent=!1,this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.defaultMessages=void 0,this.effectiveLocale="",this.showHeaderContent=!1}toggleDialog(e){e?this.close():this.open()}onMessagesChange(){}connectedCallback(){Ca(this),kl(this)}async componentWillLoad(){Sr(this),this.isClosed=this.closed,await Ml(this)}componentDidLoad(){Er(this)}componentDidRender(){gd(this)}disconnectedCallback(){var e;Pa(this),Dl(this),(e=this.resizeObserver)==null||e.disconnect()}effectiveLocaleChange(){Al(this,this.effectiveLocale)}async setFocus(){await Cr(this),IC(this.containerEl)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}renderHeaderContent(){const{heading:e,headingLevel:i,description:n,hasHeaderContent:s}=this,r=e?Me(Fq,{class:Or.heading,level:i},e):null,o=n?Me("span",{class:Or.description},n):null;return!s&&(r||o)?Me("div",{class:Or.headerContent,key:"header-content"},r,o):null}renderActionBar(){return Me("div",{class:Or.actionBarContainer,hidden:!this.hasActionBar},Me("slot",{name:Xs.actionBar,onSlotchange:this.handleActionBarSlotChange}))}renderHeaderSlottedContent(){return Me("div",{class:Or.headerContent,hidden:!this.hasHeaderContent,key:"slotted-header-content"},Me("slot",{name:Xs.headerContent,onSlotchange:this.handleHeaderContentSlotChange}))}renderHeaderStartActions(){const{hasStartActions:e}=this;return Me("div",{class:{[Or.headerActionsStart]:!0,[Or.headerActions]:!0},hidden:!e,key:"header-actions-start"},Me("slot",{name:Xs.headerActionsStart,onSlotchange:this.handleHeaderActionsStartSlotChange}))}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:n,collapsed:s,collapseDirection:r,collapsible:o,hasMenuItems:l}=this,{collapse:c,expand:f,close:y}=i,_=[r4.expand,r4.collapse];r==="up"&&_.reverse();const x=o?Me("calcite-action",{"aria-expanded":xr(!s),"aria-label":c,icon:s?_[0]:_[1],id:jX.collapse,onClick:this.collapse,scale:this.scale,text:c,title:s?f:c}):null,S=n?Me("calcite-action",{"aria-label":y,icon:r4.close,id:jX.close,onClick:this.handleUserClose,scale:this.scale,text:y,title:y}):null,P=Me("slot",{name:Xs.headerActionsEnd,onSlotchange:this.handleHeaderActionsEndSlotChange}),A=e||x||S||l;return Me("div",{class:{[Or.headerActionsEnd]:!0,[Or.headerActions]:!0},hidden:!A,key:"header-actions-end"},P,this.renderMenu(),x,S)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:n,menuFlipPlacements:s,menuPlacement:r}=this;return Me("calcite-action-menu",{flipPlacements:s??["top","bottom"],hidden:!e,key:"menu",label:i.options,open:n,overlayPositioning:this.overlayPositioning,placement:r},Me("calcite-action",{icon:r4.menu,scale:this.scale,slot:M2.trigger,text:i.options}),Me("slot",{name:Xs.headerMenuActions,onSlotchange:this.handleHeaderMenuActionsSlotChange}))}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:n,closable:s,collapsible:r,hasMenuItems:o,hasActionBar:l}=this,c=this.renderHeaderContent(),f=e||!!c||i||n||r||s||o;return this.showHeaderContent=f,Me("header",{class:Or.header,hidden:!(f||l)},Me("div",{class:{[Or.headerContainer]:!0,[Or.headerContainerBorderEnd]:l},hidden:!f},this.renderHeaderStartActions(),this.renderHeaderSlottedContent(),c,this.renderHeaderActionsEnd()),this.renderActionBar(),this.renderContentTop())}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:n,hasFooterActions:s}=this,r=i||e||n||s;return Me("footer",{class:Or.footer,hidden:!r},Me("div",{class:Or.footerContent,hidden:!n},Me("slot",{name:Xs.footer,onSlotchange:this.handleFooterSlotChange})),Me("div",{class:Or.footerStart,hidden:n||!i},Me("slot",{name:Xs.footerStart,onSlotchange:this.handleFooterStartSlotChange})),Me("div",{class:Or.footerEnd,hidden:n||!e},Me("slot",{name:Xs.footerEnd,onSlotchange:this.handleFooterEndSlotChange})),Me("div",{class:Or.footerActions,hidden:n||!s},Me("slot",{key:"footer-actions-slot",name:Xs.footerActions,onSlotchange:this.handleFooterActionsSlotChange})))}renderContent(){return Me("div",{class:Or.contentWrapper,hidden:this.collapsible&&this.collapsed,onScroll:this.panelScrollHandler,ref:this.setPanelScrollEl},Me("slot",null),this.renderFab())}renderContentBottom(){return Me("div",{class:Or.contentBottom,hidden:!this.hasContentBottom},Me("slot",{name:Xs.contentBottom,onSlotchange:this.contentBottomSlotChangeHandler}))}renderContentTop(){return Me("div",{class:Or.contentTop,hidden:!this.hasContentTop},Me("slot",{name:Xs.contentTop,onSlotchange:this.contentTopSlotChangeHandler}))}renderFab(){return Me("div",{class:Or.fabContainer,hidden:!this.hasFab},Me("slot",{name:Xs.fab,onSlotchange:this.handleFabSlotChange}))}render(){const{disabled:e,loading:i,isClosed:n}=this,s=Me("article",{key:"0f439dffdca536eb6973ac386b0566091249aee3","aria-busy":xr(i),class:Or.container,hidden:n,ref:this.setContainerRef},this.renderHeaderNode(),this.renderContent(),this.renderContentBottom(),this.renderFooterNode(),Me("slot",{key:"alerts",name:Xs.alerts,onSlotchange:this.handleAlertsSlotChange}));return Me(er,{key:"6e5baec07ecb356871dea038ebc2d5ee2d8ed54f",onKeyDown:this.panelKeyDownHandler},Me(yd,{key:"924cda1799b359f1bb3fb119cebfff5a7349b72d",disabled:e},i?Me("calcite-scrim",{loading:i}):null,s))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{closed:["toggleDialog"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return CEe}},[1,"calcite-panel",{beforeClose:[16],closed:[1540],disabled:[516],closable:[516],collapsed:[516],collapseDirection:[1,"collapse-direction"],collapsible:[516],headingLevel:[514,"heading-level"],loading:[516],heading:[1],description:[1],menuFlipPlacements:[16],menuOpen:[516,"menu-open"],menuPlacement:[513,"menu-placement"],messageOverrides:[1040],messages:[1040],overlayPositioning:[513,"overlay-positioning"],scale:[513],isClosed:[32],hasStartActions:[32],hasEndActions:[32],hasMenuItems:[32],hasHeaderContent:[32],hasActionBar:[32],hasContentBottom:[32],hasContentTop:[32],hasFab:[32],hasFooterActions:[32],hasFooterContent:[32],hasFooterEndContent:[32],hasFooterStartContent:[32],defaultMessages:[32],effectiveLocale:[32],showHeaderContent:[32],setFocus:[64],scrollContentTo:[64]},void 0,{closed:["toggleDialog"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function yoe(){if(typeof customElements>"u")return;["calcite-panel","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-panel":customElements.get(e)||customElements.define(e,PEe);break;case"calcite-action":customElements.get(e)||Nf();break;case"calcite-action-menu":customElements.get(e)||gx();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break;case"calcite-popover":customElements.get(e)||Fv();break;case"calcite-scrim":customElements.get(e)||Bq();break}})}yoe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const TEe=":host{display:flex}ul{margin:0px;display:inline-flex;block-size:100%;align-items:center;padding:0px}:host([layout=vertical]) ul{display:flex;inline-size:100%;flex-direction:column}:host([hidden]){display:none}[hidden]{display:none}",IEe=TEe,MEe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.menuItems=[],this.handleMenuSlotChange=e=>{this.menuItems=nc(e),this.setMenuItemLayout(this.menuItems,this.layout)},this.label=void 0,this.layout="horizontal",this.messageOverrides=void 0,this.messages=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}handleGlobalAttributesChanged(){Mo(this),this.setMenuItemLayout(this.menuItems,this.layout)}handleLayoutChange(e){this.setMenuItemLayout(this.menuItems,e)}onMessagesChange(){}effectiveLocaleChange(){Al(this,this.effectiveLocale)}connectedCallback(){Ca(this),kl(this)}async componentWillLoad(){Sr(this),await Ml(this)}componentDidLoad(){Er(this)}disconnectedCallback(){Pa(this),Dl(this)}async setFocus(){await Cr(this),this.el.focus()}calciteInternalNavMenuItemKeyEvent(e){const i=e.target,n=e.detail.children,s=e.detail.event.key;e.stopPropagation(),s==="ArrowDown"?i.layout==="vertical"?s0(this.menuItems,i,"next",!1):e.detail.isSubmenuOpen&&n[0].setFocus():s==="ArrowUp"?this.layout==="vertical"?s0(this.menuItems,i,"previous",!1):e.detail.isSubmenuOpen&&n[n.length-1].setFocus():s==="ArrowRight"?this.layout==="horizontal"?s0(this.menuItems,i,"next",!1):e.detail.isSubmenuOpen&&n[0].setFocus():s==="ArrowLeft"?this.layout==="horizontal"?s0(this.menuItems,i,"previous",!1):e.detail.isSubmenuOpen&&this.focusParentElement(e.target):s==="Escape"&&this.focusParentElement(e.target),e.preventDefault()}focusParentElement(e){const i=e.parentElement;i&&(tm(i),i.open=!1)}setMenuItemLayout(e,i){e.forEach(n=>{n.layout=i,this.getEffectiveRole()==="menubar"&&(n.isTopLevelItem=!0,n.topLevelMenuLayout=this.layout)})}getEffectiveRole(){return this.el.role||"menubar"}render(){return Me(er,{key:"75308ac4419f7116f73975ad9ff88d25817d0522"},Me("ul",{key:"ed22f7ab681c6e583b0b5aa720823898759687cb","aria-label":this.label,role:this.getEffectiveRole()},Me("slot",{key:"4296d48a1a8921802458776d02e119feeaf12b3e",onSlotchange:this.handleMenuSlotChange})))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{role:["handleGlobalAttributesChanged"],layout:["handleLayoutChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return IEe}},[17,"calcite-menu",{label:[1],layout:[513],messageOverrides:[1040],messages:[1040],defaultMessages:[32],effectiveLocale:[32],setFocus:[64]},[[0,"calciteInternalMenuItemKeyEvent","calciteInternalNavMenuItemKeyEvent"]],{role:["handleGlobalAttributesChanged"],layout:["handleLayoutChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function voe(){if(typeof customElements>"u")return;["calcite-menu"].forEach(e=>{switch(e){case"calcite-menu":customElements.get(e)||customElements.define(e,MEe);break}})}voe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Ls={container:"container",content:"content",dropdownVertical:"dropdown--vertical",dropdownMenuItems:"dropdown-menu-items",dropdownAction:"dropdown-action",layoutVertical:"layout--vertical",hoverHrefIcon:"hover-href-icon",icon:"icon",iconBreadcrumb:"icon--breadcrumb",iconDropdown:"icon--dropdown",iconEnd:"icon--end",iconStart:"icon--start",isParentVertical:"parent--vertical",itemContent:"item-content",open:"open",nested:"nested",textContainer:"text-container"},AEe=`:host{position:relative;box-sizing:border-box;display:flex;align-items:center;flex-shrink:0}:host .container,:host .item-content,:host .content{min-block-size:3rem}:host([layout=vertical]){inline-size:100%}:host(:not([layout=vertical])){block-size:100%}.container,.item-content{display:flex;block-size:100%;inline-size:100%;flex-direction:row;align-items:stretch}.content{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);padding-inline:1rem;font-size:var(--calcite-font-size-0);color:var(--calcite-color-text-2);outline:2px solid transparent;outline-offset:2px;text-decoration:none;border-block-end:0.125rem solid transparent;padding-block-start:0.125rem}.content:hover{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-2)}.content:focus{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-2);outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.content:active{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}.content span{display:inline-flex}.content.layout--vertical{display:flex;inline-size:100%;justify-content:flex-start;padding-block:1rem;border-block-end:0;border-inline-end:0.25rem solid transparent}:host([active]) .content{color:var(--calcite-color-text-1);border-color:var(--calcite-color-brand)}:host([active]) .content .icon{--calcite-icon-color:var(--calcite-color-brand)}:host([layout=vertical]) .content{padding-inline:0.75rem}.icon--start{margin-inline-end:0.75rem}.icon--end{margin-inline-start:0.75rem}:host([layout=vertical]) .icon--end{margin-inline-start:auto;padding-inline-start:0.75rem}.icon--dropdown{position:relative;margin-inline-start:auto;margin-inline-end:0px;padding-inline-start:0.5rem;--calcite-icon-color:var(--calcite-color-text-3)}:host([layout=vertical]) .icon--end~.icon--dropdown{margin-inline-start:0.75rem}:host([layout=vertical]) .hover-href-icon{padding-inline-start:0.5rem}:host([layout=vertical]) .hover-href-icon~.icon--end{margin-inline-start:0.5rem}:host([layout=vertical]) .hover-href-icon~.icon--breadcrumb{margin-inline-start:0.75rem}.icon--breadcrumb{margin-inline-end:0px;padding-inline-start:0.5rem;--calcite-icon-color:var(--calcite-color-text-3)}:host([layout=vertical]) .icon--breadcrumb{margin-inline-start:auto}:host([layout=vertical]) .icon--breadcrumb~.icon--dropdown{margin-inline-start:0.5rem}:host([layout=vertical]) .icon--end~.icon--breadcrumb{margin-inline-start:0.5rem}:host([breadcrumb]) .content{padding-inline-end:0.75rem}calcite-action{position:relative;block-size:auto;border-inline-start:1px solid var(--calcite-color-foreground-1)}calcite-action::after{position:absolute;inset-inline-start:-1px;display:block;inline-size:1px;content:"";inset-block:0.75rem;background-color:var(--calcite-color-border-3)}calcite-action:hover::after{block-size:100%;inset-block:0}.content:focus~calcite-action,.content:hover~calcite-action{color:var(--calcite-color-text-1);border-inline-start:1px solid var(--calcite-color-border-3)}.container:hover .dropdown-action{background-color:var(--calcite-color-foreground-2)}.dropdown-menu-items{position:absolute;display:none;block-size:auto;min-inline-size:100%;flex-direction:column;overflow:visible;border:1px solid var(--calcite-color-border-3);background:var(--calcite-color-foreground-1);inset-block-start:100%;z-index:var(--calcite-z-index-dropdown)}.dropdown-menu-items.open{display:block}.dropdown-menu-items.nested{position:absolute;inset-block-start:-1px;transform:translateX(calc(100% - 2px))}.parent--vertical{flex-direction:column}.dropdown--vertical.dropdown-menu-items{position:relative;border-radius:0px;box-shadow:none;inset-block-start:0;transform:none}.dropdown--vertical.dropdown-menu-items:last-of-type{border-inline:0}:host([layout=vertical]:last-of-type) .dropdown-menu-items{border-block-end:0}:host([slot=submenu-item]) .parent--vertical{padding-inline-start:1.5rem}.dropdown-menu-items.nested.calcite--rtl{transform:translateX(calc(-100% + 2px))}.dropdown--vertical.dropdown-menu-items.nested.calcite--rtl{transform:none}.hover-href-icon{position:relative;inset-inline-end:0.25rem;margin-inline-start:auto;opacity:0;transition:all var(--calcite-internal-animation-timing-medium) ease-in-out}.content:focus .hover-href-icon,.content:hover .hover-href-icon{inset-inline-end:-0.25rem;opacity:1}:host([hidden]){display:none}[hidden]{display:none}`,kEe=AEe,DEe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalMenuItemKeyEvent=Mt(this,"calciteInternalMenuItemKeyEvent",7),this.calciteMenuItemSelect=Mt(this,"calciteMenuItemSelect",7),this.clickHandler=e=>{(this.href&&e.target===this.dropdownActionEl||!this.href&&this.hasSubmenu)&&(this.open=!this.open),this.selectMenuItem(e)},this.handleMenuItemSlotChange=e=>{this.submenuItems=nc(e),this.submenuItems.forEach(i=>{i.topLevelMenuLayout||(i.topLevelMenuLayout=this.topLevelMenuLayout)}),this.hasSubmenu=this.submenuItems.length>0},this.keyDownHandler=async e=>{const{hasSubmenu:i,href:n,layout:s,open:r,submenuItems:o}=this,l=e.key,c=e.target===this.dropdownActionEl;if(!e.defaultPrevented){if(l===" "||l==="Enter")i&&(!n||n&&c)&&(this.open=!r),!(n&&c)&&l!=="Enter"&&this.selectMenuItem(e),(l===" "||n&&c)&&e.preventDefault();else if(l==="Escape"){if(r){this.open=!1;return}this.calciteInternalMenuItemKeyEvent.emit({event:e}),e.preventDefault()}else if(l==="ArrowDown"||l==="ArrowUp"){if(e.preventDefault(),(c||!n)&&i&&!r&&s==="horizontal"){this.open=!0;return}this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:r&&i})}else if(l==="ArrowLeft")e.preventDefault(),this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:!0});else if(l==="ArrowRight"){if(e.preventDefault(),(c||!n)&&i&&!r&&s==="vertical"){this.open=!0;return}this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:r&&i})}}},this.active=void 0,this.breadcrumb=void 0,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.isTopLevelItem=!1,this.label=void 0,this.layout=void 0,this.messageOverrides=void 0,this.messages=void 0,this.open=!1,this.rel=void 0,this.target=void 0,this.text=void 0,this.topLevelMenuLayout=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasSubmenu=!1,this.submenuItems=void 0}onMessagesChange(){}effectiveLocaleChange(){Al(this,this.effectiveLocale)}async setFocus(){await Cr(this),this.anchorEl.focus()}handleClickOut(e){this.topLevelMenuLayout!=="vertical"&&this.hasSubmenu&&this.open&&!e.composedPath().includes(this.el)&&(this.open=!1)}handleFocusOut(e){this.topLevelMenuLayout!=="vertical"&&!this.el.contains(e.relatedTarget)&&(this.open=!1)}connectedCallback(){Ca(this),kl(this)}async componentWillLoad(){Sr(this),await Ml(this)}componentDidLoad(){Er(this)}disconnectedCallback(){Pa(this),Dl(this)}blurHandler(){this.isFocused=!1}focusHandler(e){const i=e.target;this.isFocused=!0,i.open&&!this.open&&(i.open=!1)}selectMenuItem(e){e.target!==this.dropdownActionEl&&this.calciteMenuItemSelect.emit()}renderIconStart(){return Me("calcite-icon",{class:`${Ls.icon} ${Ls.iconStart}`,flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,key:Ls.iconStart,scale:"s"})}renderIconEnd(){return Me("calcite-icon",{class:`${Ls.icon} ${Ls.iconEnd}`,flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,key:Ls.iconEnd,scale:"s"})}renderBreadcrumbIcon(e){return Me("calcite-icon",{class:`${Ls.icon} ${Ls.iconBreadcrumb}`,icon:e==="rtl"?"chevron-left":"chevron-right",key:Ls.iconBreadcrumb,scale:"s"})}renderDropdownIcon(e){const i=e==="rtl"?"chevron-left":"chevron-right";return Me("calcite-icon",{class:`${Ls.icon} ${Ls.iconDropdown}`,icon:this.topLevelMenuLayout==="vertical"||this.isTopLevelItem?this.open?"chevron-up":"chevron-down":i,key:Ls.iconDropdown,scale:"s"})}renderDropdownAction(e){const i=e==="rtl"?"chevron-left":"chevron-right";return Me("calcite-action",{class:Ls.dropdownAction,icon:this.topLevelMenuLayout==="vertical"||this.isTopLevelItem?this.open?"chevron-up":"chevron-down":i,key:Ls.dropdownAction,onClick:this.clickHandler,onKeyDown:this.keyDownHandler,ref:n=>this.dropdownActionEl=n,text:this.messages.open})}renderSubmenuItems(e){return Me("calcite-menu",{class:{[Ls.dropdownMenuItems]:!0,[Ls.open]:this.open,[Ls.nested]:!this.isTopLevelItem,[Zl.rtl]:e==="rtl",[Ls.dropdownVertical]:this.topLevelMenuLayout==="vertical"},label:this.messages.submenu,layout:"vertical",role:"menu"},Me("slot",{name:"submenu-item",onSlotchange:this.handleMenuItemSlotChange}))}renderHrefIcon(e){return Me("calcite-icon",{class:Ls.hoverHrefIcon,icon:e==="rtl"?"arrow-left":"arrow-right",key:Ls.hoverHrefIcon,scale:"s"})}renderItemContent(e){const i=this.href&&(this.topLevelMenuLayout==="vertical"||!this.isTopLevelItem);return Me(IM,null,this.iconStart&&this.renderIconStart(),Me("div",{class:Ls.textContainer},Me("span",null,this.text)),i&&this.renderHrefIcon(e),this.iconEnd&&this.renderIconEnd(),this.breadcrumb?this.renderBreadcrumbIcon(e):null,!this.href&&this.hasSubmenu?this.renderDropdownIcon(e):null)}render(){const e=Zp(this.el);return Me(er,{key:"e57c6579d3287593d663a8586cfd25c90246b1a4",onBlur:this.blurHandler,onFocus:this.focusHandler},Me("li",{key:"954549390e447ec43ccf681949095d1393d9068a",class:{[Ls.container]:!0,[Ls.isParentVertical]:this.topLevelMenuLayout==="vertical"},role:"none"},Me("div",{key:"6130156128f303bb225007e337fae78385614cf5",class:Ls.itemContent},Me("a",{key:"9103ba8f3683feb1eb2301f05412b434c39ec3d3","aria-current":this.isFocused?"page":!1,"aria-expanded":xr(this.open),"aria-haspopup":xr(this.hasSubmenu),"aria-label":this.label,class:{[Ls.layoutVertical]:this.layout==="vertical",[Ls.content]:!0},href:this.href,onClick:this.clickHandler,onKeyDown:this.keyDownHandler,ref:i=>this.anchorEl=i,rel:this.rel,role:"menuitem",tabIndex:this.isTopLevelItem?0:-1,target:this.target},this.renderItemContent(e)),this.href&&this.hasSubmenu?this.renderDropdownAction(e):null),this.renderSubmenuItems(e)))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return kEe}},[1,"calcite-menu-item",{active:[516],breadcrumb:[516],href:[1],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],isTopLevelItem:[4,"is-top-level-item"],label:[1],layout:[513],messageOverrides:[1040],messages:[1040],open:[1540],rel:[513],target:[513],text:[1],topLevelMenuLayout:[1,"top-level-menu-layout"],defaultMessages:[32],effectiveLocale:[32],hasSubmenu:[32],submenuItems:[32],setFocus:[64]},[[8,"click","handleClickOut"],[0,"focusout","handleFocusOut"]],{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function NEe(){if(typeof customElements>"u")return;["calcite-menu-item","calcite-action","calcite-icon","calcite-loader","calcite-menu"].forEach(e=>{switch(e){case"calcite-menu-item":customElements.get(e)||customElements.define(e,DEe);break;case"calcite-action":customElements.get(e)||Nf();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break;case"calcite-menu":customElements.get(e)||voe();break}})}NEe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var OEe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_oe={exports:{}};(function(t,e){(function(i,n){t.exports=n()})(OEe,function(){function i(X,H){var te=Object.keys(X);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(X);H&&(le=le.filter(function(he){return Object.getOwnPropertyDescriptor(X,he).enumerable})),te.push.apply(te,le)}return te}function n(X){for(var H=1;H<arguments.length;H++){var te=arguments[H]!=null?arguments[H]:{};H%2?i(Object(te),!0).forEach(function(le){c(X,le,te[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(te)):i(Object(te)).forEach(function(le){Object.defineProperty(X,le,Object.getOwnPropertyDescriptor(te,le))})}return X}function s(X){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},s(X)}function r(X,H){if(!(X instanceof H))throw new TypeError("Cannot call a class as a function")}function o(X,H){for(var te=0;te<H.length;te++){var le=H[te];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(X,A(le.key),le)}}function l(X,H,te){return H&&o(X.prototype,H),Object.defineProperty(X,"prototype",{writable:!1}),X}function c(X,H,te){return(H=A(H))in X?Object.defineProperty(X,H,{value:te,enumerable:!0,configurable:!0,writable:!0}):X[H]=te,X}function f(X,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(H&&H.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),H&&_(X,H)}function y(X){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(H){return H.__proto__||Object.getPrototypeOf(H)},y(X)}function _(X,H){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,le){return te.__proto__=le,te},_(X,H)}function x(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function S(X){var H=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var te,le=y(X);if(H){var he=y(this).constructor;te=Reflect.construct(le,arguments,he)}else te=le.apply(this,arguments);return function(be,Te){if(Te&&(typeof Te=="object"||typeof Te=="function"))return Te;if(Te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(be)}(this,te)}}function P(){return P=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(X,H,te){var le=function(be,Te){for(;!Object.prototype.hasOwnProperty.call(be,Te)&&(be=y(be))!==null;);return be}(X,H);if(le){var he=Object.getOwnPropertyDescriptor(le,H);return he.get?he.get.call(arguments.length<3?X:te):he.value}},P.apply(this,arguments)}function A(X){var H=function(te,le){if(typeof te!="object"||te===null)return te;var he=te[Symbol.toPrimitive];if(he!==void 0){var be=he.call(te,le);if(typeof be!="object")return be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(te)}(X,"string");return typeof H=="symbol"?H:H+""}var D=function(X){return!(!X||!X.Window)&&X instanceof X.Window},N=void 0,F=void 0;function G(X){N=X;var H=X.document.createTextNode("");H.ownerDocument!==X.document&&typeof X.wrap=="function"&&X.wrap(H)===H&&(X=X.wrap(X)),F=X}function V(X){return D(X)?X:(X.ownerDocument||X).defaultView||F.window}typeof window<"u"&&window&&G(window);var B=function(X){return!!X&&s(X)==="object"},W=function(X){return typeof X=="function"},J={window:function(X){return X===F||D(X)},docFrag:function(X){return B(X)&&X.nodeType===11},object:B,func:W,number:function(X){return typeof X=="number"},bool:function(X){return typeof X=="boolean"},string:function(X){return typeof X=="string"},element:function(X){if(!X||s(X)!=="object")return!1;var H=V(X)||F;return/object|function/.test(typeof Element>"u"?"undefined":s(Element))?X instanceof Element||X instanceof H.Element:X.nodeType===1&&typeof X.nodeName=="string"},plainObject:function(X){return B(X)&&!!X.constructor&&/function Object\b/.test(X.constructor.toString())},array:function(X){return B(X)&&X.length!==void 0&&W(X.splice)}};function re(X){var H=X.interaction;if(H.prepared.name==="drag"){var te=H.prepared.axis;te==="x"?(H.coords.cur.page.y=H.coords.start.page.y,H.coords.cur.client.y=H.coords.start.client.y,H.coords.velocity.client.y=0,H.coords.velocity.page.y=0):te==="y"&&(H.coords.cur.page.x=H.coords.start.page.x,H.coords.cur.client.x=H.coords.start.client.x,H.coords.velocity.client.x=0,H.coords.velocity.page.x=0)}}function ne(X){var H=X.iEvent,te=X.interaction;if(te.prepared.name==="drag"){var le=te.prepared.axis;if(le==="x"||le==="y"){var he=le==="x"?"y":"x";H.page[he]=te.coords.start.page[he],H.client[he]=te.coords.start.client[he],H.delta[he]=0}}}var oe={id:"actions/drag",install:function(X){var H=X.actions,te=X.Interactable,le=X.defaults;te.prototype.draggable=oe.draggable,H.map.drag=oe,H.methodDict.drag="draggable",le.actions.drag=oe.defaults},listeners:{"interactions:before-action-move":re,"interactions:action-resume":re,"interactions:action-move":ne,"auto-start:check":function(X){var H=X.interaction,te=X.interactable,le=X.buttons,he=te.options.drag;if(he&&he.enabled&&(!H.pointerIsDown||!/mouse|pointer/.test(H.pointerType)||(le&te.options.drag.mouseButtons)!=0))return X.action={name:"drag",axis:he.lockAxis==="start"?he.startAxis:he.lockAxis},!1}},draggable:function(X){return J.object(X)?(this.options.drag.enabled=X.enabled!==!1,this.setPerAction("drag",X),this.setOnEvents("drag",X),/^(xy|x|y|start)$/.test(X.lockAxis)&&(this.options.drag.lockAxis=X.lockAxis),/^(xy|x|y)$/.test(X.startAxis)&&(this.options.drag.startAxis=X.startAxis),this):J.bool(X)?(this.options.drag.enabled=X,this):this.options.drag},beforeMove:re,move:ne,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(X){return X.search("drag")===0}},pe=oe,ce={init:function(X){var H=X;ce.document=H.document,ce.DocumentFragment=H.DocumentFragment||ue,ce.SVGElement=H.SVGElement||ue,ce.SVGSVGElement=H.SVGSVGElement||ue,ce.SVGElementInstance=H.SVGElementInstance||ue,ce.Element=H.Element||ue,ce.HTMLElement=H.HTMLElement||ce.Element,ce.Event=H.Event,ce.Touch=H.Touch||ue,ce.PointerEvent=H.PointerEvent||H.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function ue(){}var se=ce,de={init:function(X){var H=se.Element,te=X.navigator||{};de.supportsTouch="ontouchstart"in X||J.func(X.DocumentTouch)&&se.document instanceof X.DocumentTouch,de.supportsPointerEvent=te.pointerEnabled!==!1&&!!se.PointerEvent,de.isIOS=/iP(hone|od|ad)/.test(te.platform),de.isIOS7=/iP(hone|od|ad)/.test(te.platform)&&/OS 7[^\d]/.test(te.appVersion),de.isIe9=/MSIE 9/.test(te.userAgent),de.isOperaMobile=te.appName==="Opera"&&de.supportsTouch&&/Presto/.test(te.userAgent),de.prefixedMatchesSelector="matches"in H.prototype?"matches":"webkitMatchesSelector"in H.prototype?"webkitMatchesSelector":"mozMatchesSelector"in H.prototype?"mozMatchesSelector":"oMatchesSelector"in H.prototype?"oMatchesSelector":"msMatchesSelector",de.pEventTypes=de.supportsPointerEvent?se.PointerEvent===X.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,de.wheelEvent=se.document&&"onmousewheel"in se.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},Se=de;function Pe(X,H){if(X.contains)return X.contains(H);for(;H;){if(H===X)return!0;H=H.parentNode}return!1}function Re(X,H){for(;J.element(X);){if(we(X,H))return X;X=$e(X)}return null}function $e(X){var H=X.parentNode;if(J.docFrag(H)){for(;(H=H.host)&&J.docFrag(H););return H}return H}function we(X,H){return F!==N&&(H=H.replace(/\/deep\//g," ")),X[Se.prefixedMatchesSelector](H)}var Fe=function(X){return X.parentNode||X.host};function it(X,H){for(var te,le=[],he=X;(te=Fe(he))&&he!==H&&te!==he.ownerDocument;)le.unshift(he),he=te;return le}function _t(X,H,te){for(;J.element(X);){if(we(X,H))return!0;if((X=$e(X))===te)return we(X,H)}return!1}function ot(X){return X.correspondingUseElement||X}function ut(X){var H=X instanceof se.SVGElement?X.getBoundingClientRect():X.getClientRects()[0];return H&&{left:H.left,right:H.right,top:H.top,bottom:H.bottom,width:H.width||H.right-H.left,height:H.height||H.bottom-H.top}}function Pt(X){var H,te=ut(X);if(!Se.isIOS7&&te){var le={x:(H=(H=V(X))||F).scrollX||H.document.documentElement.scrollLeft,y:H.scrollY||H.document.documentElement.scrollTop};te.left+=le.x,te.right+=le.x,te.top+=le.y,te.bottom+=le.y}return te}function Vt(X){for(var H=[];X;)H.push(X),X=$e(X);return H}function Ft(X){return!!J.string(X)&&(se.document.querySelector(X),!0)}function Nt(X,H){for(var te in H)X[te]=H[te];return X}function Wi(X,H,te){return X==="parent"?$e(te):X==="self"?H.getRect(te):Re(te,X)}function hn(X,H,te,le){var he=X;return J.string(he)?he=Wi(he,H,te):J.func(he)&&(he=he.apply(void 0,le)),J.element(he)&&(he=Pt(he)),he}function ps(X){return X&&{x:"x"in X?X.x:X.left,y:"y"in X?X.y:X.top}}function Yn(X){return!X||"x"in X&&"y"in X||((X=Nt({},X)).x=X.left||0,X.y=X.top||0,X.width=X.width||(X.right||0)-X.x,X.height=X.height||(X.bottom||0)-X.y),X}function fr(X,H,te){X.left&&(H.left+=te.x),X.right&&(H.right+=te.x),X.top&&(H.top+=te.y),X.bottom&&(H.bottom+=te.y),H.width=H.right-H.left,H.height=H.bottom-H.top}function fo(X,H,te){var le=te&&X.options[te];return ps(hn(le&&le.origin||X.options.origin,X,H,[X&&H]))||{x:0,y:0}}function sn(X,H){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(Oe){return!0},le=arguments.length>3?arguments[3]:void 0;if(le=le||{},J.string(X)&&X.search(" ")!==-1&&(X=ye(X)),J.array(X))return X.forEach(function(Oe){return sn(Oe,H,te,le)}),le;if(J.object(X)&&(H=X,X=""),J.func(H)&&te(X))le[X]=le[X]||[],le[X].push(H);else if(J.array(H))for(var he=0,be=H;he<be.length;he++){var Te=be[he];sn(X,Te,te,le)}else if(J.object(H))for(var Ae in H)sn(ye(Ae).map(function(Oe){return"".concat(X).concat(Oe)}),H[Ae],te,le);return le}function ye(X){return X.trim().split(/ +/)}var qi=function(X,H){return Math.sqrt(X*X+H*H)},Ir=["webkit","moz"];function ri(X,H){X.__set||(X.__set={});var te=function(he){if(Ir.some(function(be){return he.indexOf(be)===0}))return 1;typeof X[he]!="function"&&he!=="__set"&&Object.defineProperty(X,he,{get:function(){return he in X.__set?X.__set[he]:X.__set[he]=H[he]},set:function(be){X.__set[he]=be},configurable:!0})};for(var le in H)te(le);return X}function Ai(X,H){X.page=X.page||{},X.page.x=H.page.x,X.page.y=H.page.y,X.client=X.client||{},X.client.x=H.client.x,X.client.y=H.client.y,X.timeStamp=H.timeStamp}function ms(X){X.page.x=0,X.page.y=0,X.client.x=0,X.client.y=0}function gn(X){return X instanceof se.Event||X instanceof se.Touch}function Ji(X,H,te){return X=X||"page",(te=te||{}).x=H[X+"X"],te.y=H[X+"Y"],te}function is(X,H){return H=H||{x:0,y:0},Se.isOperaMobile&&gn(X)?(Ji("screen",X,H),H.x+=window.scrollX,H.y+=window.scrollY):Ji("page",X,H),H}function gs(X){return J.number(X.pointerId)?X.pointerId:X.identifier}function Wr(X,H,te){var le=H.length>1?wt(H):H[0];is(le,X.page),function(he,be){be=be||{},Se.isOperaMobile&&gn(he)?Ji("screen",he,be):Ji("client",he,be)}(le,X.client),X.timeStamp=te}function Tn(X){var H=[];return J.array(X)?(H[0]=X[0],H[1]=X[1]):X.type==="touchend"?X.touches.length===1?(H[0]=X.touches[0],H[1]=X.changedTouches[0]):X.touches.length===0&&(H[0]=X.changedTouches[0],H[1]=X.changedTouches[1]):(H[0]=X.touches[0],H[1]=X.touches[1]),H}function wt(X){for(var H={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},te=0;te<X.length;te++){var le=X[te];for(var he in H)H[he]+=le[he]}for(var be in H)H[be]/=X.length;return H}function Xn(X){if(!X.length)return null;var H=Tn(X),te=Math.min(H[0].pageX,H[1].pageX),le=Math.min(H[0].pageY,H[1].pageY),he=Math.max(H[0].pageX,H[1].pageX),be=Math.max(H[0].pageY,H[1].pageY);return{x:te,y:le,left:te,top:le,right:he,bottom:be,width:he-te,height:be-le}}function m(X,H){var te=H+"X",le=H+"Y",he=Tn(X),be=he[0][te]-he[1][te],Te=he[0][le]-he[1][le];return qi(be,Te)}function j(X,H){var te=H+"X",le=H+"Y",he=Tn(X),be=he[1][te]-he[0][te],Te=he[1][le]-he[0][le];return 180*Math.atan2(Te,be)/Math.PI}function T(X){return J.string(X.pointerType)?X.pointerType:J.number(X.pointerType)?[void 0,void 0,"touch","pen","mouse"][X.pointerType]:/touch/.test(X.type||"")||X instanceof se.Touch?"touch":"mouse"}function p(X){var H=J.func(X.composedPath)?X.composedPath():X.path;return[ot(H?H[0]:X.target),ot(X.currentTarget)]}var h=function(){function X(H){r(this,X),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=H}return l(X,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),X}();Object.defineProperty(h.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var a=function(X,H){for(var te=0;te<H.length;te++){var le=H[te];X.push(le)}return X},u=function(X){return a([],X)},d=function(X,H){for(var te=0;te<X.length;te++)if(H(X[te],te,X))return te;return-1},g=function(X,H){return X[d(X,H)]},v=function(X){f(te,X);var H=S(te);function te(le,he,be){var Te;r(this,te),(Te=H.call(this,he._interaction)).dropzone=void 0,Te.dragEvent=void 0,Te.relatedTarget=void 0,Te.draggable=void 0,Te.propagationStopped=!1,Te.immediatePropagationStopped=!1;var Ae=be==="dragleave"?le.prev:le.cur,Oe=Ae.element,je=Ae.dropzone;return Te.type=be,Te.target=Oe,Te.currentTarget=Oe,Te.dropzone=je,Te.dragEvent=he,Te.relatedTarget=he.target,Te.draggable=he.interactable,Te.timeStamp=he.timeStamp,Te}return l(te,[{key:"reject",value:function(){var le=this,he=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&he.cur.dropzone===this.dropzone&&he.cur.element===this.target)if(he.prev.dropzone=this.dropzone,he.prev.element=this.target,he.rejected=!0,he.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var be=he.activeDrops,Te=d(be,function(Oe){var je=Oe.dropzone,Le=Oe.element;return je===le.dropzone&&Le===le.target});he.activeDrops.splice(Te,1);var Ae=new te(he,this.dragEvent,"dropdeactivate");Ae.dropzone=this.dropzone,Ae.target=this.target,this.dropzone.fire(Ae)}else this.dropzone.fire(new te(he,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),te}(h);function b(X,H){for(var te=0,le=X.slice();te<le.length;te++){var he=le[te],be=he.dropzone,Te=he.element;H.dropzone=be,H.target=Te,be.fire(H),H.propagationStopped=H.immediatePropagationStopped=!1}}function C(X,H){for(var te=function(be,Te){for(var Ae=[],Oe=0,je=be.interactables.list;Oe<je.length;Oe++){var Le=je[Oe];if(Le.options.drop.enabled){var Ke=Le.options.drop.accept;if(!(J.element(Ke)&&Ke!==Te||J.string(Ke)&&!we(Te,Ke)||J.func(Ke)&&!Ke({dropzone:Le,draggableElement:Te})))for(var ft=0,kt=Le.getAllElements();ft<kt.length;ft++){var It=kt[ft];It!==Te&&Ae.push({dropzone:Le,element:It,rect:Le.getRect(It)})}}}return Ae}(X,H),le=0;le<te.length;le++){var he=te[le];he.rect=he.dropzone.getRect(he.element)}return te}function M(X,H,te){for(var le=X.dropState,he=X.interactable,be=X.element,Te=[],Ae=0,Oe=le.activeDrops;Ae<Oe.length;Ae++){var je=Oe[Ae],Le=je.dropzone,Ke=je.element,ft=je.rect,kt=Le.dropCheck(H,te,he,be,Ke,ft);Te.push(kt?Ke:null)}var It=function(Lt){for(var Xt,Gt,ai,Ii=[],en=0;en<Lt.length;en++){var Si=Lt[en],Pi=Lt[Xt];if(Si&&en!==Xt)if(Pi){var Mr=Fe(Si),ys=Fe(Pi);if(Mr!==Si.ownerDocument)if(ys!==Si.ownerDocument)if(Mr!==ys){Ii=Ii.length?Ii:it(Pi);var Da=void 0;if(Pi instanceof se.HTMLElement&&Si instanceof se.SVGElement&&!(Si instanceof se.SVGSVGElement)){if(Si===ys)continue;Da=Si.ownerSVGElement}else Da=Si;for(var po=it(Da,Pi.ownerDocument),eu=0;po[eu]&&po[eu]===Ii[eu];)eu++;var g1=[po[eu-1],po[eu],Ii[eu]];if(g1[0])for(var zm=g1[0].lastChild;zm;){if(zm===g1[1]){Xt=en,Ii=po;break}if(zm===g1[2])break;zm=zm.previousSibling}}else ai=Pi,(parseInt(V(Gt=Si).getComputedStyle(Gt).zIndex,10)||0)>=(parseInt(V(ai).getComputedStyle(ai).zIndex,10)||0)&&(Xt=en);else Xt=en}else Xt=en}return Xt}(Te);return le.activeDrops[It]||null}function $(X,H,te){var le=X.dropState,he={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return te.type==="dragstart"&&(he.activate=new v(le,te,"dropactivate"),he.activate.target=null,he.activate.dropzone=null),te.type==="dragend"&&(he.deactivate=new v(le,te,"dropdeactivate"),he.deactivate.target=null,he.deactivate.dropzone=null),le.rejected||(le.cur.element!==le.prev.element&&(le.prev.dropzone&&(he.leave=new v(le,te,"dragleave"),te.dragLeave=he.leave.target=le.prev.element,te.prevDropzone=he.leave.dropzone=le.prev.dropzone),le.cur.dropzone&&(he.enter=new v(le,te,"dragenter"),te.dragEnter=le.cur.element,te.dropzone=le.cur.dropzone)),te.type==="dragend"&&le.cur.dropzone&&(he.drop=new v(le,te,"drop"),te.dropzone=le.cur.dropzone,te.relatedTarget=le.cur.element),te.type==="dragmove"&&le.cur.dropzone&&(he.move=new v(le,te,"dropmove"),te.dropzone=le.cur.dropzone)),he}function L(X,H){var te=X.dropState,le=te.activeDrops,he=te.cur,be=te.prev;H.leave&&be.dropzone.fire(H.leave),H.enter&&he.dropzone.fire(H.enter),H.move&&he.dropzone.fire(H.move),H.drop&&he.dropzone.fire(H.drop),H.deactivate&&b(le,H.deactivate),te.prev.dropzone=he.dropzone,te.prev.element=he.element}function q(X,H){var te=X.interaction,le=X.iEvent,he=X.event;if(le.type==="dragmove"||le.type==="dragend"){var be=te.dropState;H.dynamicDrop&&(be.activeDrops=C(H,te.element));var Te=le,Ae=M(te,Te,he);be.rejected=be.rejected&&!!Ae&&Ae.dropzone===be.cur.dropzone&&Ae.element===be.cur.element,be.cur.dropzone=Ae&&Ae.dropzone,be.cur.element=Ae&&Ae.element,be.events=$(te,0,Te)}}var U={id:"actions/drop",install:function(X){var H=X.actions,te=X.interactStatic,le=X.Interactable,he=X.defaults;X.usePlugin(pe),le.prototype.dropzone=function(be){return function(Te,Ae){if(J.object(Ae)){if(Te.options.drop.enabled=Ae.enabled!==!1,Ae.listeners){var Oe=sn(Ae.listeners),je=Object.keys(Oe).reduce(function(Ke,ft){return Ke[/^(enter|leave)/.test(ft)?"drag".concat(ft):/^(activate|deactivate|move)/.test(ft)?"drop".concat(ft):ft]=Oe[ft],Ke},{}),Le=Te.options.drop.listeners;Le&&Te.off(Le),Te.on(je),Te.options.drop.listeners=je}return J.func(Ae.ondrop)&&Te.on("drop",Ae.ondrop),J.func(Ae.ondropactivate)&&Te.on("dropactivate",Ae.ondropactivate),J.func(Ae.ondropdeactivate)&&Te.on("dropdeactivate",Ae.ondropdeactivate),J.func(Ae.ondragenter)&&Te.on("dragenter",Ae.ondragenter),J.func(Ae.ondragleave)&&Te.on("dragleave",Ae.ondragleave),J.func(Ae.ondropmove)&&Te.on("dropmove",Ae.ondropmove),/^(pointer|center)$/.test(Ae.overlap)?Te.options.drop.overlap=Ae.overlap:J.number(Ae.overlap)&&(Te.options.drop.overlap=Math.max(Math.min(1,Ae.overlap),0)),"accept"in Ae&&(Te.options.drop.accept=Ae.accept),"checker"in Ae&&(Te.options.drop.checker=Ae.checker),Te}return J.bool(Ae)?(Te.options.drop.enabled=Ae,Te):Te.options.drop}(this,be)},le.prototype.dropCheck=function(be,Te,Ae,Oe,je,Le){return function(Ke,ft,kt,It,Lt,Xt,Gt){var ai=!1;if(!(Gt=Gt||Ke.getRect(Xt)))return!!Ke.options.drop.checker&&Ke.options.drop.checker(ft,kt,ai,Ke,Xt,It,Lt);var Ii=Ke.options.drop.overlap;if(Ii==="pointer"){var en=fo(It,Lt,"drag"),Si=is(ft);Si.x+=en.x,Si.y+=en.y;var Pi=Si.x>Gt.left&&Si.x<Gt.right,Mr=Si.y>Gt.top&&Si.y<Gt.bottom;ai=Pi&&Mr}var ys=It.getRect(Lt);if(ys&&Ii==="center"){var Da=ys.left+ys.width/2,po=ys.top+ys.height/2;ai=Da>=Gt.left&&Da<=Gt.right&&po>=Gt.top&&po<=Gt.bottom}return ys&&J.number(Ii)&&(ai=Math.max(0,Math.min(Gt.right,ys.right)-Math.max(Gt.left,ys.left))*Math.max(0,Math.min(Gt.bottom,ys.bottom)-Math.max(Gt.top,ys.top))/(ys.width*ys.height)>=Ii),Ke.options.drop.checker&&(ai=Ke.options.drop.checker(ft,kt,ai,Ke,Xt,It,Lt)),ai}(this,be,Te,Ae,Oe,je,Le)},te.dynamicDrop=function(be){return J.bool(be)?(X.dynamicDrop=be,te):X.dynamicDrop},Nt(H.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),H.methodDict.drop="dropzone",X.dynamicDrop=!1,he.actions.drop=U.defaults},listeners:{"interactions:before-action-start":function(X){var H=X.interaction;H.prepared.name==="drag"&&(H.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(X,H){var te=X.interaction,le=X.iEvent;if(te.prepared.name==="drag"){var he=te.dropState;he.activeDrops=[],he.events={},he.activeDrops=C(H,te.element),he.events=$(te,0,le),he.events.activate&&(b(he.activeDrops,he.events.activate),H.fire("actions/drop:start",{interaction:te,dragEvent:le}))}},"interactions:action-move":q,"interactions:after-action-move":function(X,H){var te=X.interaction,le=X.iEvent;if(te.prepared.name==="drag"){var he=te.dropState;L(te,he.events),H.fire("actions/drop:move",{interaction:te,dragEvent:le}),he.events={}}},"interactions:action-end":function(X,H){if(X.interaction.prepared.name==="drag"){var te=X.interaction,le=X.iEvent;q(X,H),L(te,te.dropState.events),H.fire("actions/drop:end",{interaction:te,dragEvent:le})}},"interactions:stop":function(X){var H=X.interaction;if(H.prepared.name==="drag"){var te=H.dropState;te&&(te.activeDrops=null,te.events=null,te.cur.dropzone=null,te.cur.element=null,te.prev.dropzone=null,te.prev.element=null,te.rejected=!1)}}},getActiveDrops:C,getDrop:M,getDropEvents:$,fireDropEvents:L,filterEventType:function(X){return X.search("drag")===0||X.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},ee=U;function Q(X){var H=X.interaction,te=X.iEvent,le=X.phase;if(H.prepared.name==="gesture"){var he=H.pointers.map(function(je){return je.pointer}),be=le==="start",Te=le==="end",Ae=H.interactable.options.deltaSource;if(te.touches=[he[0],he[1]],be)te.distance=m(he,Ae),te.box=Xn(he),te.scale=1,te.ds=0,te.angle=j(he,Ae),te.da=0,H.gesture.startDistance=te.distance,H.gesture.startAngle=te.angle;else if(Te||H.pointers.length<2){var Oe=H.prevEvent;te.distance=Oe.distance,te.box=Oe.box,te.scale=Oe.scale,te.ds=0,te.angle=Oe.angle,te.da=0}else te.distance=m(he,Ae),te.box=Xn(he),te.scale=te.distance/H.gesture.startDistance,te.angle=j(he,Ae),te.ds=te.scale-H.gesture.scale,te.da=te.angle-H.gesture.angle;H.gesture.distance=te.distance,H.gesture.angle=te.angle,J.number(te.scale)&&te.scale!==1/0&&!isNaN(te.scale)&&(H.gesture.scale=te.scale)}}var ge={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(X){var H=X.actions,te=X.Interactable,le=X.defaults;te.prototype.gesturable=function(he){return J.object(he)?(this.options.gesture.enabled=he.enabled!==!1,this.setPerAction("gesture",he),this.setOnEvents("gesture",he),this):J.bool(he)?(this.options.gesture.enabled=he,this):this.options.gesture},H.map.gesture=ge,H.methodDict.gesture="gesturable",le.actions.gesture=ge.defaults},listeners:{"interactions:action-start":Q,"interactions:action-move":Q,"interactions:action-end":Q,"interactions:new":function(X){X.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(X){if(!(X.interaction.pointers.length<2)){var H=X.interactable.options.gesture;if(H&&H.enabled)return X.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(X){return X.search("gesture")===0}},ve=ge;function fe(X,H,te,le,he,be,Te){if(!H)return!1;if(H===!0){var Ae=J.number(be.width)?be.width:be.right-be.left,Oe=J.number(be.height)?be.height:be.bottom-be.top;if(Te=Math.min(Te,Math.abs((X==="left"||X==="right"?Ae:Oe)/2)),Ae<0&&(X==="left"?X="right":X==="right"&&(X="left")),Oe<0&&(X==="top"?X="bottom":X==="bottom"&&(X="top")),X==="left"){var je=Ae>=0?be.left:be.right;return te.x<je+Te}if(X==="top"){var Le=Oe>=0?be.top:be.bottom;return te.y<Le+Te}if(X==="right")return te.x>(Ae>=0?be.right:be.left)-Te;if(X==="bottom")return te.y>(Oe>=0?be.bottom:be.top)-Te}return!!J.element(le)&&(J.element(H)?H===le:_t(le,H,he))}function Ce(X){var H=X.iEvent,te=X.interaction;if(te.prepared.name==="resize"&&te.resizeAxes){var le=H;te.interactable.options.resize.square?(te.resizeAxes==="y"?le.delta.x=le.delta.y:le.delta.y=le.delta.x,le.axes="xy"):(le.axes=te.resizeAxes,te.resizeAxes==="x"?le.delta.y=0:te.resizeAxes==="y"&&(le.delta.x=0))}}var Ie,Ne,Ve={id:"actions/resize",before:["actions/drag"],install:function(X){var H=X.actions,te=X.browser,le=X.Interactable,he=X.defaults;Ve.cursors=function(be){return be.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(te),Ve.defaultMargin=te.supportsTouch||te.supportsPointerEvent?20:10,le.prototype.resizable=function(be){return function(Te,Ae,Oe){return J.object(Ae)?(Te.options.resize.enabled=Ae.enabled!==!1,Te.setPerAction("resize",Ae),Te.setOnEvents("resize",Ae),J.string(Ae.axis)&&/^x$|^y$|^xy$/.test(Ae.axis)?Te.options.resize.axis=Ae.axis:Ae.axis===null&&(Te.options.resize.axis=Oe.defaults.actions.resize.axis),J.bool(Ae.preserveAspectRatio)?Te.options.resize.preserveAspectRatio=Ae.preserveAspectRatio:J.bool(Ae.square)&&(Te.options.resize.square=Ae.square),Te):J.bool(Ae)?(Te.options.resize.enabled=Ae,Te):Te.options.resize}(this,be,X)},H.map.resize=Ve,H.methodDict.resize="resizable",he.actions.resize=Ve.defaults},listeners:{"interactions:new":function(X){X.interaction.resizeAxes="xy"},"interactions:action-start":function(X){(function(H){var te=H.iEvent,le=H.interaction;if(le.prepared.name==="resize"&&le.prepared.edges){var he=te,be=le.rect;le._rects={start:Nt({},be),corrected:Nt({},be),previous:Nt({},be),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},he.edges=le.prepared.edges,he.rect=le._rects.corrected,he.deltaRect=le._rects.delta}})(X),Ce(X)},"interactions:action-move":function(X){(function(H){var te=H.iEvent,le=H.interaction;if(le.prepared.name==="resize"&&le.prepared.edges){var he=te,be=le.interactable.options.resize.invert,Te=be==="reposition"||be==="negate",Ae=le.rect,Oe=le._rects,je=Oe.start,Le=Oe.corrected,Ke=Oe.delta,ft=Oe.previous;if(Nt(ft,Le),Te){if(Nt(Le,Ae),be==="reposition"){if(Le.top>Le.bottom){var kt=Le.top;Le.top=Le.bottom,Le.bottom=kt}if(Le.left>Le.right){var It=Le.left;Le.left=Le.right,Le.right=It}}}else Le.top=Math.min(Ae.top,je.bottom),Le.bottom=Math.max(Ae.bottom,je.top),Le.left=Math.min(Ae.left,je.right),Le.right=Math.max(Ae.right,je.left);for(var Lt in Le.width=Le.right-Le.left,Le.height=Le.bottom-Le.top,Le)Ke[Lt]=Le[Lt]-ft[Lt];he.edges=le.prepared.edges,he.rect=Le,he.deltaRect=Ke}})(X),Ce(X)},"interactions:action-end":function(X){var H=X.iEvent,te=X.interaction;if(te.prepared.name==="resize"&&te.prepared.edges){var le=H;le.edges=te.prepared.edges,le.rect=te._rects.corrected,le.deltaRect=te._rects.delta}},"auto-start:check":function(X){var H=X.interaction,te=X.interactable,le=X.element,he=X.rect,be=X.buttons;if(he){var Te=Nt({},H.coords.cur.page),Ae=te.options.resize;if(Ae&&Ae.enabled&&(!H.pointerIsDown||!/mouse|pointer/.test(H.pointerType)||(be&Ae.mouseButtons)!=0)){if(J.object(Ae.edges)){var Oe={left:!1,right:!1,top:!1,bottom:!1};for(var je in Oe)Oe[je]=fe(je,Ae.edges[je],Te,H._latestPointer.eventTarget,le,he,Ae.margin||Ve.defaultMargin);Oe.left=Oe.left&&!Oe.right,Oe.top=Oe.top&&!Oe.bottom,(Oe.left||Oe.right||Oe.top||Oe.bottom)&&(X.action={name:"resize",edges:Oe})}else{var Le=Ae.axis!=="y"&&Te.x>he.right-Ve.defaultMargin,Ke=Ae.axis!=="x"&&Te.y>he.bottom-Ve.defaultMargin;(Le||Ke)&&(X.action={name:"resize",axes:(Le?"x":"")+(Ke?"y":"")})}return!X.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(X){var H=X.edges,te=X.axis,le=X.name,he=Ve.cursors,be=null;if(te)be=he[le+te];else if(H){for(var Te="",Ae=0,Oe=["top","bottom","left","right"];Ae<Oe.length;Ae++){var je=Oe[Ae];H[je]&&(Te+=je)}be=he[Te]}return be},filterEventType:function(X){return X.search("resize")===0},defaultMargin:null},Xe=Ve,et={id:"actions",install:function(X){X.usePlugin(ve),X.usePlugin(Xe),X.usePlugin(pe),X.usePlugin(ee)}},dt=0,ct={request:function(X){return Ie(X)},cancel:function(X){return Ne(X)},init:function(X){if(Ie=X.requestAnimationFrame,Ne=X.cancelAnimationFrame,!Ie)for(var H=["ms","moz","webkit","o"],te=0;te<H.length;te++){var le=H[te];Ie=X["".concat(le,"RequestAnimationFrame")],Ne=X["".concat(le,"CancelAnimationFrame")]||X["".concat(le,"CancelRequestAnimationFrame")]}Ie=Ie&&Ie.bind(X),Ne=Ne&&Ne.bind(X),Ie||(Ie=function(he){var be=Date.now(),Te=Math.max(0,16-(be-dt)),Ae=X.setTimeout(function(){he(be+Te)},Te);return dt=be+Te,Ae},Ne=function(he){return clearTimeout(he)})}},mt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(X){mt.isScrolling=!0,ct.cancel(mt.i),X.autoScroll=mt,mt.interaction=X,mt.prevTime=mt.now(),mt.i=ct.request(mt.scroll)},stop:function(){mt.isScrolling=!1,mt.interaction&&(mt.interaction.autoScroll=null),ct.cancel(mt.i)},scroll:function(){var X=mt.interaction,H=X.interactable,te=X.element,le=X.prepared.name,he=H.options[le].autoScroll,be=lt(he.container,H,te),Te=mt.now(),Ae=(Te-mt.prevTime)/1e3,Oe=he.speed*Ae;if(Oe>=1){var je={x:mt.x*Oe,y:mt.y*Oe};if(je.x||je.y){var Le=gi(be);J.window(be)?be.scrollBy(je.x,je.y):be&&(be.scrollLeft+=je.x,be.scrollTop+=je.y);var Ke=gi(be),ft={x:Ke.x-Le.x,y:Ke.y-Le.y};(ft.x||ft.y)&&H.fire({type:"autoscroll",target:te,interactable:H,delta:ft,interaction:X,container:be})}mt.prevTime=Te}mt.isScrolling&&(ct.cancel(mt.i),mt.i=ct.request(mt.scroll))},check:function(X,H){var te;return(te=X.options[H].autoScroll)==null?void 0:te.enabled},onInteractionMove:function(X){var H=X.interaction,te=X.pointer;if(H.interacting()&&mt.check(H.interactable,H.prepared.name))if(H.simulation)mt.x=mt.y=0;else{var le,he,be,Te,Ae=H.interactable,Oe=H.element,je=H.prepared.name,Le=Ae.options[je].autoScroll,Ke=lt(Le.container,Ae,Oe);if(J.window(Ke))Te=te.clientX<mt.margin,le=te.clientY<mt.margin,he=te.clientX>Ke.innerWidth-mt.margin,be=te.clientY>Ke.innerHeight-mt.margin;else{var ft=ut(Ke);Te=te.clientX<ft.left+mt.margin,le=te.clientY<ft.top+mt.margin,he=te.clientX>ft.right-mt.margin,be=te.clientY>ft.bottom-mt.margin}mt.x=he?1:Te?-1:0,mt.y=be?1:le?-1:0,mt.isScrolling||(mt.margin=Le.margin,mt.speed=Le.speed,mt.start(H))}}};function lt(X,H,te){return(J.string(X)?Wi(X,H,te):X)||V(te)}function gi(X){return J.window(X)&&(X=window.document.body),{x:X.scrollLeft,y:X.scrollTop}}var oi={id:"auto-scroll",install:function(X){var H=X.defaults,te=X.actions;X.autoScroll=mt,mt.now=function(){return X.now()},te.phaselessTypes.autoscroll=!0,H.perAction.autoScroll=mt.defaults},listeners:{"interactions:new":function(X){X.interaction.autoScroll=null},"interactions:destroy":function(X){X.interaction.autoScroll=null,mt.stop(),mt.interaction&&(mt.interaction=null)},"interactions:stop":mt.stop,"interactions:action-move":function(X){return mt.onInteractionMove(X)}}},Ni=oi;function Qi(X,H){var te=!1;return function(){return te||(F.console.warn(H),te=!0),X.apply(this,arguments)}}function xn(X,H){return X.name=H.name,X.axis=H.axis,X.edges=H.edges,X}function ln(X){return J.bool(X)?(this.options.styleCursor=X,this):X===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Oi(X){return J.func(X)?(this.options.actionChecker=X,this):X===null?(delete this.options.actionChecker,this):this.options.actionChecker}var ui={id:"auto-start/interactableMethods",install:function(X){var H=X.Interactable;H.prototype.getAction=function(te,le,he,be){var Te=function(Ae,Oe,je,Le,Ke){var ft=Ae.getRect(Le),kt=Oe.buttons||{0:1,1:4,3:8,4:16}[Oe.button],It={action:null,interactable:Ae,interaction:je,element:Le,rect:ft,buttons:kt};return Ke.fire("auto-start:check",It),It.action}(this,le,he,be,X);return this.options.actionChecker?this.options.actionChecker(te,le,Te,this,be,he):Te},H.prototype.ignoreFrom=Qi(function(te){return this._backCompatOption("ignoreFrom",te)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),H.prototype.allowFrom=Qi(function(te){return this._backCompatOption("allowFrom",te)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),H.prototype.actionChecker=Oi,H.prototype.styleCursor=ln}};function Kt(X,H,te,le,he){return H.testIgnoreAllow(H.options[X.name],te,le)&&H.options[X.name].enabled&&wi(H,te,X,he)?X:null}function Wn(X,H,te,le,he,be,Te){for(var Ae=0,Oe=le.length;Ae<Oe;Ae++){var je=le[Ae],Le=he[Ae],Ke=je.getAction(H,te,X,Le);if(Ke){var ft=Kt(Ke,je,Le,be,Te);if(ft)return{action:ft,interactable:je,element:Le}}}return{action:null,interactable:null,element:null}}function In(X,H,te,le,he){var be=[],Te=[],Ae=le;function Oe(Le){be.push(Le),Te.push(Ae)}for(;J.element(Ae);){be=[],Te=[],he.interactables.forEachMatch(Ae,Oe);var je=Wn(X,H,te,be,Te,le,he);if(je.action&&!je.interactable.options[je.action.name].manualStart)return je;Ae=$e(Ae)}return{action:null,interactable:null,element:null}}function tr(X,H,te){var le=H.action,he=H.interactable,be=H.element;le=le||{name:null},X.interactable=he,X.element=be,xn(X.prepared,le),X.rect=he&&le.name?he.getRect(be):null,pr(X,te),te.fire("autoStart:prepared",{interaction:X})}function wi(X,H,te,le){var he=X.options,be=he[te.name].max,Te=he[te.name].maxPerElement,Ae=le.autoStart.maxInteractions,Oe=0,je=0,Le=0;if(!(be&&Te&&Ae))return!1;for(var Ke=0,ft=le.interactions.list;Ke<ft.length;Ke++){var kt=ft[Ke],It=kt.prepared.name;if(kt.interacting()&&(++Oe>=Ae||kt.interactable===X&&((je+=It===te.name?1:0)>=be||kt.element===H&&(Le++,It===te.name&&Le>=Te))))return!1}return Ae>0}function ns(X,H){return J.number(X)?(H.autoStart.maxInteractions=X,this):H.autoStart.maxInteractions}function rn(X,H,te){var le=te.autoStart.cursorElement;le&&le!==X&&(le.style.cursor=""),X.ownerDocument.documentElement.style.cursor=H,X.style.cursor=H,te.autoStart.cursorElement=H?X:null}function pr(X,H){var te=X.interactable,le=X.element,he=X.prepared;if(X.pointerType==="mouse"&&te&&te.options.styleCursor){var be="";if(he.name){var Te=te.options[he.name].cursorChecker;be=J.func(Te)?Te(he,te,le,X._interacting):H.actions.map[he.name].getCursor(he)}rn(X.element,be||"",H)}else H.autoStart.cursorElement&&rn(H.autoStart.cursorElement,"",H)}var ah={id:"auto-start/base",before:["actions"],install:function(X){var H=X.interactStatic,te=X.defaults;X.usePlugin(ui),te.base.actionChecker=null,te.base.styleCursor=!0,Nt(te.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),H.maxInteractions=function(le){return ns(le,X)},X.autoStart={maxInteractions:1/0,withinInteractionLimit:wi,cursorElement:null}},listeners:{"interactions:down":function(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget;te.interacting()||tr(te,In(te,le,he,be,H),H)},"interactions:move":function(X,H){(function(te,le){var he=te.interaction,be=te.pointer,Te=te.event,Ae=te.eventTarget;he.pointerType!=="mouse"||he.pointerIsDown||he.interacting()||tr(he,In(he,be,Te,Ae,le),le)})(X,H),function(te,le){var he=te.interaction;if(he.pointerIsDown&&!he.interacting()&&he.pointerWasMoved&&he.prepared.name){le.fire("autoStart:before-start",te);var be=he.interactable,Te=he.prepared.name;Te&&be&&(be.options[Te].manualStart||!wi(be,he.element,he.prepared,le)?he.stop():(he.start(he.prepared,be,he.element),pr(he,le)))}}(X,H)},"interactions:stop":function(X,H){var te=X.interaction,le=te.interactable;le&&le.options.styleCursor&&rn(te.element,"",H)}},maxInteractions:ns,withinInteractionLimit:wi,validateAction:Kt},Jc=ah,ze={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(X,H){var te=X.interaction,le=X.eventTarget,he=X.dx,be=X.dy;if(te.prepared.name==="drag"){var Te=Math.abs(he),Ae=Math.abs(be),Oe=te.interactable.options.drag,je=Oe.startAxis,Le=Te>Ae?"x":Te<Ae?"y":"xy";if(te.prepared.axis=Oe.lockAxis==="start"?Le[0]:Oe.lockAxis,Le!=="xy"&&je!=="xy"&&je!==Le){te.prepared.name=null;for(var Ke=le,ft=function(It){if(It!==te.interactable){var Lt=te.interactable.options.drag;if(!Lt.manualStart&&It.testIgnoreAllow(Lt,Ke,le)){var Xt=It.getAction(te.downPointer,te.downEvent,te,Ke);if(Xt&&Xt.name==="drag"&&function(Gt,ai){if(!ai)return!1;var Ii=ai.options.drag.startAxis;return Gt==="xy"||Ii==="xy"||Ii===Gt}(Le,It)&&Jc.validateAction(Xt,It,Ke,le,H))return It}}};J.element(Ke);){var kt=H.interactables.forEachMatch(Ke,ft);if(kt){te.prepared.name="drag",te.interactable=kt,te.element=Ke;break}Ke=$e(Ke)}}}}}};function pt(X){var H=X.prepared&&X.prepared.name;if(!H)return null;var te=X.interactable.options;return te[H].hold||te[H].delay}var Tt={id:"auto-start/hold",install:function(X){var H=X.defaults;X.usePlugin(Jc),H.perAction.hold=0,H.perAction.delay=0},listeners:{"interactions:new":function(X){X.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(X){var H=X.interaction,te=pt(H);te>0&&(H.autoStartHoldTimer=setTimeout(function(){H.start(H.prepared,H.interactable,H.element)},te))},"interactions:move":function(X){var H=X.interaction,te=X.duplicate;H.autoStartHoldTimer&&H.pointerWasMoved&&!te&&(clearTimeout(H.autoStartHoldTimer),H.autoStartHoldTimer=null)},"autoStart:before-start":function(X){var H=X.interaction;pt(H)>0&&(H.prepared.name=null)}},getHoldDuration:pt},ei=Tt,Rn={id:"auto-start",install:function(X){X.usePlugin(Jc),X.usePlugin(ei),X.usePlugin(ze)}},Ns=function(X){return/^(always|never|auto)$/.test(X)?(this.options.preventDefault=X,this):J.bool(X)?(this.options.preventDefault=X?"always":"never",this):this.options.preventDefault};function Os(X){var H=X.interaction,te=X.event;H.interactable&&H.interactable.checkAndPreventDefault(te)}var Zr={id:"core/interactablePreventDefault",install:function(X){var H=X.Interactable;H.prototype.preventDefault=Ns,H.prototype.checkAndPreventDefault=function(te){return function(le,he,be){var Te=le.options.preventDefault;if(Te!=="never")if(Te!=="always"){if(he.events.supportsPassive&&/^touch(start|move)$/.test(be.type)){var Ae=V(be.target).document,Oe=he.getDocOptions(Ae);if(!Oe||!Oe.events||Oe.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(be.type)||J.element(be.target)&&we(be.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||be.preventDefault()}else be.preventDefault()}(this,X,te)},X.interactions.docEvents.push({type:"dragstart",listener:function(te){for(var le=0,he=X.interactions.list;le<he.length;le++){var be=he[le];if(be.element&&(be.element===te.target||Pe(be.element,te.target)))return void be.interactable.checkAndPreventDefault(te)}}})},listeners:["down","move","up","cancel"].reduce(function(X,H){return X["interactions:".concat(H)]=Os,X},{})};function qf(X,H){if(H.phaselessTypes[X])return!0;for(var te in H.map)if(X.indexOf(te)===0&&X.substr(te.length)in H.phases)return!0;return!1}function Mm(X){var H={};for(var te in X){var le=X[te];J.plainObject(le)?H[te]=Mm(le):J.array(le)?H[te]=u(le):H[te]=le}return H}var ka=function(){function X(H){r(this,X),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=H,this.result=Am(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return l(X,[{key:"start",value:function(H,te){var le,he,be=H.phase,Te=this.interaction,Ae=function(je){var Le=je.interactable.options[je.prepared.name],Ke=Le.modifiers;return Ke&&Ke.length?Ke:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(ft){var kt=Le[ft];return kt&&kt.enabled&&{options:kt,methods:kt._methods}}).filter(function(ft){return!!ft})}(Te);this.prepareStates(Ae),this.startEdges=Nt({},Te.edges),this.edges=Nt({},this.startEdges),this.startOffset=(le=Te.rect,he=te,le?{left:he.x-le.left,top:he.y-le.top,right:le.right-he.x,bottom:le.bottom-he.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var Oe=this.fillArg({phase:be,pageCoords:te,preEnd:!1});return this.result=Am(),this.startAll(Oe),this.result=this.setAll(Oe)}},{key:"fillArg",value:function(H){var te=this.interaction;return H.interaction=te,H.interactable=te.interactable,H.element=te.element,H.rect||(H.rect=te.rect),H.edges||(H.edges=this.startEdges),H.startOffset=this.startOffset,H}},{key:"startAll",value:function(H){for(var te=0,le=this.states;te<le.length;te++){var he=le[te];he.methods.start&&(H.state=he,he.methods.start(H))}}},{key:"setAll",value:function(H){var te=H.phase,le=H.preEnd,he=H.skipModifiers,be=H.rect,Te=H.edges;H.coords=Nt({},H.pageCoords),H.rect=Nt({},be),H.edges=Nt({},Te);for(var Ae=he?this.states.slice(he):this.states,Oe=Am(H.coords,H.rect),je=0;je<Ae.length;je++){var Le,Ke=Ae[je],ft=Ke.options,kt=Nt({},H.coords),It=null;(Le=Ke.methods)!=null&&Le.set&&this.shouldDo(ft,le,te)&&(H.state=Ke,It=Ke.methods.set(H),fr(H.edges,H.rect,{x:H.coords.x-kt.x,y:H.coords.y-kt.y})),Oe.eventProps.push(It)}Nt(this.edges,H.edges),Oe.delta.x=H.coords.x-H.pageCoords.x,Oe.delta.y=H.coords.y-H.pageCoords.y,Oe.rectDelta.left=H.rect.left-be.left,Oe.rectDelta.right=H.rect.right-be.right,Oe.rectDelta.top=H.rect.top-be.top,Oe.rectDelta.bottom=H.rect.bottom-be.bottom;var Lt=this.result.coords,Xt=this.result.rect;if(Lt&&Xt){var Gt=Oe.rect.left!==Xt.left||Oe.rect.right!==Xt.right||Oe.rect.top!==Xt.top||Oe.rect.bottom!==Xt.bottom;Oe.changed=Gt||Lt.x!==Oe.coords.x||Lt.y!==Oe.coords.y}return Oe}},{key:"applyToInteraction",value:function(H){var te=this.interaction,le=H.phase,he=te.coords.cur,be=te.coords.start,Te=this.result,Ae=this.startDelta,Oe=Te.delta;le==="start"&&Nt(this.startDelta,Te.delta);for(var je=0,Le=[[be,Ae],[he,Oe]];je<Le.length;je++){var Ke=Le[je],ft=Ke[0],kt=Ke[1];ft.page.x+=kt.x,ft.page.y+=kt.y,ft.client.x+=kt.x,ft.client.y+=kt.y}var It=this.result.rectDelta,Lt=H.rect||te.rect;Lt.left+=It.left,Lt.right+=It.right,Lt.top+=It.top,Lt.bottom+=It.bottom,Lt.width=Lt.right-Lt.left,Lt.height=Lt.bottom-Lt.top}},{key:"setAndApply",value:function(H){var te=this.interaction,le=H.phase,he=H.preEnd,be=H.skipModifiers,Te=this.setAll(this.fillArg({preEnd:he,phase:le,pageCoords:H.modifiedCoords||te.coords.cur.page}));if(this.result=Te,!Te.changed&&(!be||be<this.states.length)&&te.interacting())return!1;if(H.modifiedCoords){var Ae=te.coords.cur.page,Oe={x:H.modifiedCoords.x-Ae.x,y:H.modifiedCoords.y-Ae.y};Te.coords.x+=Oe.x,Te.coords.y+=Oe.y,Te.delta.x+=Oe.x,Te.delta.y+=Oe.y}this.applyToInteraction(H)}},{key:"beforeEnd",value:function(H){var te=H.interaction,le=H.event,he=this.states;if(he&&he.length){for(var be=!1,Te=0;Te<he.length;Te++){var Ae=he[Te];H.state=Ae;var Oe=Ae.options,je=Ae.methods,Le=je.beforeEnd&&je.beforeEnd(H);if(Le)return this.endResult=Le,!1;be=be||!be&&this.shouldDo(Oe,!0,H.phase,!0)}be&&te.move({event:le,preEnd:!0})}}},{key:"stop",value:function(H){var te=H.interaction;if(this.states&&this.states.length){var le=Nt({states:this.states,interactable:te.interactable,element:te.element,rect:null},H);this.fillArg(le);for(var he=0,be=this.states;he<be.length;he++){var Te=be[he];le.state=Te,Te.methods.stop&&Te.methods.stop(le)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(H){this.states=[];for(var te=0;te<H.length;te++){var le=H[te],he=le.options,be=le.methods,Te=le.name;this.states.push({options:he,methods:be,index:te,name:Te})}return this.states}},{key:"restoreInteractionCoords",value:function(H){var te=H.interaction,le=te.coords,he=te.rect,be=te.modification;if(be.result){for(var Te=be.startDelta,Ae=be.result,Oe=Ae.delta,je=Ae.rectDelta,Le=0,Ke=[[le.start,Te],[le.cur,Oe]];Le<Ke.length;Le++){var ft=Ke[Le],kt=ft[0],It=ft[1];kt.page.x-=It.x,kt.page.y-=It.y,kt.client.x-=It.x,kt.client.y-=It.y}he.left-=je.left,he.right-=je.right,he.top-=je.top,he.bottom-=je.bottom}}},{key:"shouldDo",value:function(H,te,le,he){return!(!H||H.enabled===!1||he&&!H.endOnly||H.endOnly&&!te||le==="start"&&!H.setStart)}},{key:"copyFrom",value:function(H){this.startOffset=H.startOffset,this.startDelta=H.startDelta,this.startEdges=H.startEdges,this.edges=H.edges,this.states=H.states.map(function(te){return Mm(te)}),this.result=Am(Nt({},H.result.coords),Nt({},H.result.rect))}},{key:"destroy",value:function(){for(var H in this)this[H]=null}}]),X}();function Am(X,H){return{rect:H,coords:X,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function lh(X,H){var te=X.defaults,le={start:X.start,set:X.set,beforeEnd:X.beforeEnd,stop:X.stop},he=function(be){var Te=be||{};for(var Ae in Te.enabled=Te.enabled!==!1,te)Ae in Te||(Te[Ae]=te[Ae]);var Oe={options:Te,methods:le,name:H,enable:function(){return Te.enabled=!0,Oe},disable:function(){return Te.enabled=!1,Oe}};return Oe};return H&&typeof H=="string"&&(he._defaults=te,he._methods=le),he}function Vf(X){var H=X.iEvent,te=X.interaction.modification.result;te&&(H.modifiers=te.eventProps)}var km={id:"modifiers/base",before:["actions"],install:function(X){X.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(X){var H=X.interaction;H.modification=new ka(H)},"interactions:before-action-start":function(X){var H=X.interaction,te=X.interaction.modification;te.start(X,H.coords.start.page),H.edges=te.edges,te.applyToInteraction(X)},"interactions:before-action-move":function(X){var H=X.interaction,te=H.modification,le=te.setAndApply(X);return H.edges=te.edges,le},"interactions:before-action-end":function(X){var H=X.interaction,te=H.modification,le=te.beforeEnd(X);return H.edges=te.startEdges,le},"interactions:action-start":Vf,"interactions:action-move":Vf,"interactions:action-end":Vf,"interactions:after-action-start":function(X){return X.interaction.modification.restoreInteractionCoords(X)},"interactions:after-action-move":function(X){return X.interaction.modification.restoreInteractionCoords(X)},"interactions:stop":function(X){return X.interaction.modification.stop(X)}}},Wx=km,Zx={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},bd=function(X){f(te,X);var H=S(te);function te(le,he,be,Te,Ae,Oe,je){var Le;r(this,te),(Le=H.call(this,le)).relatedTarget=null,Le.screenX=void 0,Le.screenY=void 0,Le.button=void 0,Le.buttons=void 0,Le.ctrlKey=void 0,Le.shiftKey=void 0,Le.altKey=void 0,Le.metaKey=void 0,Le.page=void 0,Le.client=void 0,Le.delta=void 0,Le.rect=void 0,Le.x0=void 0,Le.y0=void 0,Le.t0=void 0,Le.dt=void 0,Le.duration=void 0,Le.clientX0=void 0,Le.clientY0=void 0,Le.velocity=void 0,Le.speed=void 0,Le.swipe=void 0,Le.axes=void 0,Le.preEnd=void 0,Ae=Ae||le.element;var Ke=le.interactable,ft=(Ke&&Ke.options||Zx).deltaSource,kt=fo(Ke,Ae,be),It=Te==="start",Lt=Te==="end",Xt=It?x(Le):le.prevEvent,Gt=It?le.coords.start:Lt?{page:Xt.page,client:Xt.client,timeStamp:le.coords.cur.timeStamp}:le.coords.cur;return Le.page=Nt({},Gt.page),Le.client=Nt({},Gt.client),Le.rect=Nt({},le.rect),Le.timeStamp=Gt.timeStamp,Lt||(Le.page.x-=kt.x,Le.page.y-=kt.y,Le.client.x-=kt.x,Le.client.y-=kt.y),Le.ctrlKey=he.ctrlKey,Le.altKey=he.altKey,Le.shiftKey=he.shiftKey,Le.metaKey=he.metaKey,Le.button=he.button,Le.buttons=he.buttons,Le.target=Ae,Le.currentTarget=Ae,Le.preEnd=Oe,Le.type=je||be+(Te||""),Le.interactable=Ke,Le.t0=It?le.pointers[le.pointers.length-1].downTime:Xt.t0,Le.x0=le.coords.start.page.x-kt.x,Le.y0=le.coords.start.page.y-kt.y,Le.clientX0=le.coords.start.client.x-kt.x,Le.clientY0=le.coords.start.client.y-kt.y,Le.delta=It||Lt?{x:0,y:0}:{x:Le[ft].x-Xt[ft].x,y:Le[ft].y-Xt[ft].y},Le.dt=le.coords.delta.timeStamp,Le.duration=Le.timeStamp-Le.t0,Le.velocity=Nt({},le.coords.velocity[ft]),Le.speed=qi(Le.velocity.x,Le.velocity.y),Le.swipe=Lt||Te==="inertiastart"?Le.getSwipe():null,Le}return l(te,[{key:"getSwipe",value:function(){var le=this._interaction;if(le.prevEvent.speed<600||this.timeStamp-le.prevEvent.timeStamp>150)return null;var he=180*Math.atan2(le.prevEvent.velocityY,le.prevEvent.velocityX)/Math.PI;he<0&&(he+=360);var be=112.5<=he&&he<247.5,Te=202.5<=he&&he<337.5;return{up:Te,down:!Te&&22.5<=he&&he<157.5,left:be,right:!be&&(292.5<=he||he<67.5),angle:he,speed:le.prevEvent.speed,velocity:{x:le.prevEvent.velocityX,y:le.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),te}(h);Object.defineProperties(bd.prototype,{pageX:{get:function(){return this.page.x},set:function(X){this.page.x=X}},pageY:{get:function(){return this.page.y},set:function(X){this.page.y=X}},clientX:{get:function(){return this.client.x},set:function(X){this.client.x=X}},clientY:{get:function(){return this.client.y},set:function(X){this.client.y=X}},dx:{get:function(){return this.delta.x},set:function(X){this.delta.x=X}},dy:{get:function(){return this.delta.y},set:function(X){this.delta.y=X}},velocityX:{get:function(){return this.velocity.x},set:function(X){this.velocity.x=X}},velocityY:{get:function(){return this.velocity.y},set:function(X){this.velocity.y=X}}});var U7=l(function X(H,te,le,he,be){r(this,X),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=H,this.pointer=te,this.event=le,this.downTime=he,this.downTarget=be}),L5=function(X){return X.interactable="",X.element="",X.prepared="",X.pointerIsDown="",X.pointerWasMoved="",X._proxy="",X}({}),Kx=function(X){return X.start="",X.move="",X.end="",X.stop="",X.interacting="",X}({}),Jx=0,Y7=function(){function X(H){var te=this,le=H.pointerType,he=H.scopeFire;r(this,X),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Qi(function(Le){this.move(Le)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Jx++,this._scopeFire=he,this.pointerType=le;var be=this;this._proxy={};var Te=function(Le){Object.defineProperty(te._proxy,Le,{get:function(){return be[Le]}})};for(var Ae in L5)Te(Ae);var Oe=function(Le){Object.defineProperty(te._proxy,Le,{value:function(){return be[Le].apply(be,arguments)}})};for(var je in Kx)Oe(je);this._scopeFire("interactions:new",{interaction:this})}return l(X,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(H,te,le){var he=this.updatePointer(H,te,le,!0),be=this.pointers[he];this._scopeFire("interactions:down",{pointer:H,event:te,eventTarget:le,pointerIndex:he,pointerInfo:be,type:"down",interaction:this})}},{key:"start",value:function(H,te,le){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(H.name==="gesture"?2:1)||!te.options[H.name].enabled)&&(xn(this.prepared,H),this.interactable=te,this.element=le,this.rect=te.getRect(le),this.edges=this.prepared.edges?Nt({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(H,te,le){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(H,te,le,!1);var he,be,Te=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(he=this.coords.cur.client.x-this.coords.start.client.x,be=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=qi(he,be)>this.pointerMoveTolerance);var Ae,Oe,je,Le=this.getPointerIndex(H),Ke={pointer:H,pointerIndex:Le,pointerInfo:this.pointers[Le],event:te,type:"move",eventTarget:le,dx:he,dy:be,duplicate:Te,interaction:this};Te||(Ae=this.coords.velocity,Oe=this.coords.delta,je=Math.max(Oe.timeStamp/1e3,.001),Ae.page.x=Oe.page.x/je,Ae.page.y=Oe.page.y/je,Ae.client.x=Oe.client.x/je,Ae.client.y=Oe.client.y/je,Ae.timeStamp=je),this._scopeFire("interactions:move",Ke),Te||this.simulation||(this.interacting()&&(Ke.type=null,this.move(Ke)),this.pointerWasMoved&&Ai(this.coords.prev,this.coords.cur))}},{key:"move",value:function(H){H&&H.event||ms(this.coords.delta),(H=Nt({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},H||{})).phase="move",this._doPhase(H)}},{key:"pointerUp",value:function(H,te,le,he){var be=this.getPointerIndex(H);be===-1&&(be=this.updatePointer(H,te,le,!1));var Te=/cancel$/i.test(te.type)?"cancel":"up";this._scopeFire("interactions:".concat(Te),{pointer:H,pointerIndex:be,pointerInfo:this.pointers[be],event:te,eventTarget:le,type:Te,curEventTarget:he,interaction:this}),this.simulation||this.end(te),this.removePointer(H,te)}},{key:"documentBlur",value:function(H){this.end(H),this._scopeFire("interactions:blur",{event:H,type:"blur",interaction:this})}},{key:"end",value:function(H){var te;this._ending=!0,H=H||this._latestPointer.event,this.interacting()&&(te=this._doPhase({event:H,interaction:this,phase:"end"})),this._ending=!1,te===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(H){var te=gs(H);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:d(this.pointers,function(le){return le.id===te})}},{key:"getPointerInfo",value:function(H){return this.pointers[this.getPointerIndex(H)]}},{key:"updatePointer",value:function(H,te,le,he){var be,Te,Ae,Oe=gs(H),je=this.getPointerIndex(H),Le=this.pointers[je];return he=he!==!1&&(he||/(down|start)$/i.test(te.type)),Le?Le.pointer=H:(Le=new U7(Oe,H,te,null,null),je=this.pointers.length,this.pointers.push(Le)),Wr(this.coords.cur,this.pointers.map(function(Ke){return Ke.pointer}),this._now()),be=this.coords.delta,Te=this.coords.prev,Ae=this.coords.cur,be.page.x=Ae.page.x-Te.page.x,be.page.y=Ae.page.y-Te.page.y,be.client.x=Ae.client.x-Te.client.x,be.client.y=Ae.client.y-Te.client.y,be.timeStamp=Ae.timeStamp-Te.timeStamp,he&&(this.pointerIsDown=!0,Le.downTime=this.coords.cur.timeStamp,Le.downTarget=le,ri(this.downPointer,H),this.interacting()||(Ai(this.coords.start,this.coords.cur),Ai(this.coords.prev,this.coords.cur),this.downEvent=te,this.pointerWasMoved=!1)),this._updateLatestPointer(H,te,le),this._scopeFire("interactions:update-pointer",{pointer:H,event:te,eventTarget:le,down:he,pointerInfo:Le,pointerIndex:je,interaction:this}),je}},{key:"removePointer",value:function(H,te){var le=this.getPointerIndex(H);if(le!==-1){var he=this.pointers[le];this._scopeFire("interactions:remove-pointer",{pointer:H,event:te,eventTarget:null,pointerIndex:le,pointerInfo:he,interaction:this}),this.pointers.splice(le,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(H,te,le){this._latestPointer.pointer=H,this._latestPointer.event=te,this._latestPointer.eventTarget=le}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(H,te,le,he){return new bd(this,H,this.prepared.name,te,this.element,le,he)}},{key:"_fireEvent",value:function(H){var te;(te=this.interactable)==null||te.fire(H),(!this.prevEvent||H.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=H)}},{key:"_doPhase",value:function(H){var te=H.event,le=H.phase,he=H.preEnd,be=H.type,Te=this.rect;if(Te&&le==="move"&&(fr(this.edges,Te,this.coords.delta[this.interactable.options.deltaSource]),Te.width=Te.right-Te.left,Te.height=Te.bottom-Te.top),this._scopeFire("interactions:before-action-".concat(le),H)===!1)return!1;var Ae=H.iEvent=this._createPreparedEvent(te,le,he,be);return this._scopeFire("interactions:action-".concat(le),H),le==="start"&&(this.prevEvent=Ae),this._fireEvent(Ae),this._scopeFire("interactions:after-action-".concat(le),H),!0}},{key:"_now",value:function(){return Date.now()}}]),X}();function F5(X){o1(X.interaction)}function o1(X){if(!function(te){return!(!te.offset.pending.x&&!te.offset.pending.y)}(X))return!1;var H=X.offset.pending;return a1(X.coords.cur,H),a1(X.coords.delta,H),fr(X.edges,X.rect,H),H.x=0,H.y=0,!0}function Qx(X){var H=X.x,te=X.y;this.offset.pending.x+=H,this.offset.pending.y+=te,this.offset.total.x+=H,this.offset.total.y+=te}function a1(X,H){var te=X.page,le=X.client,he=H.x,be=H.y;te.x+=he,te.y+=be,le.x+=he,le.y+=be}Kx.offsetBy="";var Dm={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(X){X.Interaction.prototype.offsetBy=Qx},listeners:{"interactions:new":function(X){X.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(X){return function(H){H.pointerIsDown&&(a1(H.coords.cur,H.offset.total),H.offset.pending.x=0,H.offset.pending.y=0)}(X.interaction)},"interactions:before-action-start":F5,"interactions:before-action-move":F5,"interactions:before-action-end":function(X){var H=X.interaction;if(o1(H))return H.move({offset:!0}),H.end(),!1},"interactions:stop":function(X){var H=X.interaction;H.offset.total.x=0,H.offset.total.y=0,H.offset.pending.x=0,H.offset.pending.y=0}}},Gf=Dm,z5=function(){function X(H){r(this,X),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=H}return l(X,[{key:"start",value:function(H){var te=this.interaction,le=Nm(te);if(!le||!le.enabled)return!1;var he=te.coords.velocity.client,be=qi(he.x,he.y),Te=this.modification||(this.modification=new ka(te));if(Te.copyFrom(te.modification),this.t0=te._now(),this.allowResume=le.allowResume,this.v0=be,this.currentOffset={x:0,y:0},this.startCoords=te.coords.cur.page,this.modifierArg=Te.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-te.coords.cur.timeStamp<50&&be>le.minSpeed&&be>le.endSpeed)this.startInertia();else{if(Te.result=Te.setAll(this.modifierArg),!Te.result.changed)return!1;this.startSmoothEnd()}return te.modification.result.rect=null,te.offsetBy(this.targetOffset),te._doPhase({interaction:te,event:H,phase:"inertiastart"}),te.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),te.modification.result.rect=null,this.active=!0,te.simulation=this,!0}},{key:"startInertia",value:function(){var H=this,te=this.interaction.coords.velocity.client,le=Nm(this.interaction),he=le.resistance,be=-Math.log(le.endSpeed/this.v0)/he;this.targetOffset={x:(te.x-be)/he,y:(te.y-be)/he},this.te=be,this.lambda_v0=he/this.v0,this.one_ve_v0=1-le.endSpeed/this.v0;var Te=this.modification,Ae=this.modifierArg;Ae.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},Te.result=Te.setAll(Ae),Te.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+Te.result.delta.x,y:this.targetOffset.y+Te.result.delta.y}),this.onNextFrame(function(){return H.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var H=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return H.smoothEndTick()})}},{key:"onNextFrame",value:function(H){var te=this;this.timeout=ct.request(function(){te.active&&H()})}},{key:"inertiaTick",value:function(){var H,te,le,he,be,Te,Ae,Oe=this,je=this.interaction,Le=Nm(je).resistance,Ke=(je._now()-this.t0)/1e3;if(Ke<this.te){var ft,kt=1-(Math.exp(-Le*Ke)-this.lambda_v0)/this.one_ve_v0;this.isModified?(H=0,te=0,le=this.targetOffset.x,he=this.targetOffset.y,be=this.modifiedOffset.x,Te=this.modifiedOffset.y,ft={x:Om(Ae=kt,H,le,be),y:Om(Ae,te,he,Te)}):ft={x:this.targetOffset.x*kt,y:this.targetOffset.y*kt};var It={x:ft.x-this.currentOffset.x,y:ft.y-this.currentOffset.y};this.currentOffset.x+=It.x,this.currentOffset.y+=It.y,je.offsetBy(It),je.move(),this.onNextFrame(function(){return Oe.inertiaTick()})}else je.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var H=this,te=this.interaction,le=te._now()-this.t0,he=Nm(te).smoothEndDuration;if(le<he){var be={x:e_(le,0,this.targetOffset.x,he),y:e_(le,0,this.targetOffset.y,he)},Te={x:be.x-this.currentOffset.x,y:be.y-this.currentOffset.y};this.currentOffset.x+=Te.x,this.currentOffset.y+=Te.y,te.offsetBy(Te),te.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return H.smoothEndTick()})}else te.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(H){var te=H.pointer,le=H.event,he=H.eventTarget,be=this.interaction;be.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),be.updatePointer(te,le,he,!0),be._doPhase({interaction:be,event:le,phase:"resume"}),Ai(be.coords.prev,be.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,ct.cancel(this.timeout)}}]),X}();function Nm(X){var H=X.interactable,te=X.prepared;return H&&H.options&&te.name&&H.options[te.name].inertia}var q5={id:"inertia",before:["modifiers","actions"],install:function(X){var H=X.defaults;X.usePlugin(Gf),X.usePlugin(Wx),X.actions.phases.inertiastart=!0,X.actions.phases.resume=!0,H.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(X){var H=X.interaction;H.inertia=new z5(H)},"interactions:before-action-end":function(X){var H=X.interaction,te=X.event;return(!H._interacting||H.simulation||!H.inertia.start(te))&&null},"interactions:down":function(X){var H=X.interaction,te=X.eventTarget,le=H.inertia;if(le.active)for(var he=te;J.element(he);){if(he===H.element){le.resume(X);break}he=$e(he)}},"interactions:stop":function(X){var H=X.interaction.inertia;H.active&&H.stop()},"interactions:before-action-resume":function(X){var H=X.interaction.modification;H.stop(X),H.start(X,X.interaction.coords.cur.page),H.applyToInteraction(X)},"interactions:before-action-inertiastart":function(X){return X.interaction.modification.setAndApply(X)},"interactions:action-resume":Vf,"interactions:action-inertiastart":Vf,"interactions:after-action-inertiastart":function(X){return X.interaction.modification.restoreInteractionCoords(X)},"interactions:after-action-resume":function(X){return X.interaction.modification.restoreInteractionCoords(X)}}};function Om(X,H,te,le){var he=1-X;return he*he*H+2*he*X*te+X*X*le}function e_(X,H,te,le){return-te*(X/=le)*(X-2)+H}var l1=q5;function ch(X,H){for(var te=0;te<H.length;te++){var le=H[te];if(X.immediatePropagationStopped)break;le(X)}}var t_=function(){function X(H){r(this,X),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=Nt({},H||{})}return l(X,[{key:"fire",value:function(H){var te,le=this.global;(te=this.types[H.type])&&ch(H,te),!H.propagationStopped&&le&&(te=le[H.type])&&ch(H,te)}},{key:"on",value:function(H,te){var le=sn(H,te);for(H in le)this.types[H]=a(this.types[H]||[],le[H])}},{key:"off",value:function(H,te){var le=sn(H,te);for(H in le){var he=this.types[H];if(he&&he.length)for(var be=0,Te=le[H];be<Te.length;be++){var Ae=Te[be],Oe=he.indexOf(Ae);Oe!==-1&&he.splice(Oe,1)}}}},{key:"getRect",value:function(H){return null}}]),X}(),i_=function(){function X(H){r(this,X),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=H,ri(this,H)}return l(X,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),X}();function $m(X){return J.object(X)?{capture:!!X.capture,passive:!!X.passive}:{capture:!!X,passive:!1}}function jf(X,H){return X===H||(typeof X=="boolean"?!!H.capture===X&&!H.passive:!!X.capture==!!H.capture&&!!X.passive==!!H.passive)}var n_={id:"events",install:function(X){var H,te=[],le={},he=[],be={add:Te,remove:Ae,addDelegate:function(Le,Ke,ft,kt,It){var Lt=$m(It);if(!le[ft]){le[ft]=[];for(var Xt=0;Xt<he.length;Xt++){var Gt=he[Xt];Te(Gt,ft,Oe),Te(Gt,ft,je,!0)}}var ai=le[ft],Ii=g(ai,function(en){return en.selector===Le&&en.context===Ke});Ii||(Ii={selector:Le,context:Ke,listeners:[]},ai.push(Ii)),Ii.listeners.push({func:kt,options:Lt})},removeDelegate:function(Le,Ke,ft,kt,It){var Lt,Xt=$m(It),Gt=le[ft],ai=!1;if(Gt)for(Lt=Gt.length-1;Lt>=0;Lt--){var Ii=Gt[Lt];if(Ii.selector===Le&&Ii.context===Ke){for(var en=Ii.listeners,Si=en.length-1;Si>=0;Si--){var Pi=en[Si];if(Pi.func===kt&&jf(Pi.options,Xt)){en.splice(Si,1),en.length||(Gt.splice(Lt,1),Ae(Ke,ft,Oe),Ae(Ke,ft,je,!0)),ai=!0;break}}if(ai)break}}},delegateListener:Oe,delegateUseCapture:je,delegatedEvents:le,documents:he,targets:te,supportsOptions:!1,supportsPassive:!1};function Te(Le,Ke,ft,kt){if(Le.addEventListener){var It=$m(kt),Lt=g(te,function(Xt){return Xt.eventTarget===Le});Lt||(Lt={eventTarget:Le,events:{}},te.push(Lt)),Lt.events[Ke]||(Lt.events[Ke]=[]),g(Lt.events[Ke],function(Xt){return Xt.func===ft&&jf(Xt.options,It)})||(Le.addEventListener(Ke,ft,be.supportsOptions?It:It.capture),Lt.events[Ke].push({func:ft,options:It}))}}function Ae(Le,Ke,ft,kt){if(Le.addEventListener&&Le.removeEventListener){var It=d(te,function(Mr){return Mr.eventTarget===Le}),Lt=te[It];if(Lt&&Lt.events)if(Ke!=="all"){var Xt=!1,Gt=Lt.events[Ke];if(Gt){if(ft==="all"){for(var ai=Gt.length-1;ai>=0;ai--){var Ii=Gt[ai];Ae(Le,Ke,Ii.func,Ii.options)}return}for(var en=$m(kt),Si=0;Si<Gt.length;Si++){var Pi=Gt[Si];if(Pi.func===ft&&jf(Pi.options,en)){Le.removeEventListener(Ke,ft,be.supportsOptions?en:en.capture),Gt.splice(Si,1),Gt.length===0&&(delete Lt.events[Ke],Xt=!0);break}}}Xt&&!Object.keys(Lt.events).length&&te.splice(It,1)}else for(Ke in Lt.events)Lt.events.hasOwnProperty(Ke)&&Ae(Le,Ke,"all")}}function Oe(Le,Ke){for(var ft=$m(Ke),kt=new i_(Le),It=le[Le.type],Lt=p(Le)[0],Xt=Lt;J.element(Xt);){for(var Gt=0;Gt<It.length;Gt++){var ai=It[Gt],Ii=ai.selector,en=ai.context;if(we(Xt,Ii)&&Pe(en,Lt)&&Pe(en,Xt)){var Si=ai.listeners;kt.currentTarget=Xt;for(var Pi=0;Pi<Si.length;Pi++){var Mr=Si[Pi];jf(Mr.options,ft)&&Mr.func(kt)}}}Xt=$e(Xt)}}function je(Le){return Oe(Le,!0)}return(H=X.document)==null||H.createElement("div").addEventListener("test",null,{get capture(){return be.supportsOptions=!0},get passive(){return be.supportsPassive=!0}}),X.events=be,be}},s_={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(X){for(var H=0,te=s_.methodOrder;H<te.length;H++){var le=te[H],he=s_[le](X);if(he)return he}return null},simulationResume:function(X){var H=X.pointerType,te=X.eventType,le=X.eventTarget,he=X.scope;if(!/down|start/i.test(te))return null;for(var be=0,Te=he.interactions.list;be<Te.length;be++){var Ae=Te[be],Oe=le;if(Ae.simulation&&Ae.simulation.allowResume&&Ae.pointerType===H)for(;Oe;){if(Oe===Ae.element)return Ae;Oe=$e(Oe)}}return null},mouseOrPen:function(X){var H,te=X.pointerId,le=X.pointerType,he=X.eventType,be=X.scope;if(le!=="mouse"&&le!=="pen")return null;for(var Te=0,Ae=be.interactions.list;Te<Ae.length;Te++){var Oe=Ae[Te];if(Oe.pointerType===le){if(Oe.simulation&&!ia(Oe,te))continue;if(Oe.interacting())return Oe;H||(H=Oe)}}if(H)return H;for(var je=0,Le=be.interactions.list;je<Le.length;je++){var Ke=Le[je];if(!(Ke.pointerType!==le||/down/i.test(he)&&Ke.simulation))return Ke}return null},hasPointer:function(X){for(var H=X.pointerId,te=0,le=X.scope.interactions.list;te<le.length;te++){var he=le[te];if(ia(he,H))return he}return null},idle:function(X){for(var H=X.pointerType,te=0,le=X.scope.interactions.list;te<le.length;te++){var he=le[te];if(he.pointers.length===1){var be=he.interactable;if(be&&(!be.options.gesture||!be.options.gesture.enabled))continue}else if(he.pointers.length>=2)continue;if(!he.interacting()&&H===he.pointerType)return he}return null}};function ia(X,H){return X.pointers.some(function(te){return te.id===H})}var Bf=s_,Rm=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Lm(X,H){return function(te){var le=H.interactions.list,he=T(te),be=p(te),Te=be[0],Ae=be[1],Oe=[];if(/^touch/.test(te.type)){H.prevTouchTime=H.now();for(var je=0,Le=te.changedTouches;je<Le.length;je++){var Ke=Le[je],ft={pointer:Ke,pointerId:gs(Ke),pointerType:he,eventType:te.type,eventTarget:Te,curEventTarget:Ae,scope:H},kt=V5(ft);Oe.push([ft.pointer,ft.eventTarget,ft.curEventTarget,kt])}}else{var It=!1;if(!Se.supportsPointerEvent&&/mouse/.test(te.type)){for(var Lt=0;Lt<le.length&&!It;Lt++)It=le[Lt].pointerType!=="mouse"&&le[Lt].pointerIsDown;It=It||H.now()-H.prevTouchTime<500||te.timeStamp===0}if(!It){var Xt={pointer:te,pointerId:gs(te),pointerType:he,eventType:te.type,curEventTarget:Ae,eventTarget:Te,scope:H},Gt=V5(Xt);Oe.push([Xt.pointer,Xt.eventTarget,Xt.curEventTarget,Gt])}}for(var ai=0;ai<Oe.length;ai++){var Ii=Oe[ai],en=Ii[0],Si=Ii[1],Pi=Ii[2];Ii[3][X](en,te,Si,Pi)}}}function V5(X){var H=X.pointerType,te=X.scope,le={interaction:Bf.search(X),searchDetails:X};return te.fire("interactions:find",le),le.interaction||te.interactions.new({pointerType:H})}function c1(X,H){var te=X.doc,le=X.scope,he=X.options,be=le.interactions.docEvents,Te=le.events,Ae=Te[H];for(var Oe in le.browser.isIOS&&!he.events&&(he.events={passive:!1}),Te.delegatedEvents)Ae(te,Oe,Te.delegateListener),Ae(te,Oe,Te.delegateUseCapture,!0);for(var je=he&&he.events,Le=0;Le<be.length;Le++){var Ke=be[Le];Ae(te,Ke.type,Ke.listener,je)}}var ew={id:"core/interactions",install:function(X){for(var H={},te=0;te<Rm.length;te++){var le=Rm[te];H[le]=Lm(le,X)}var he,be=Se.pEventTypes;function Te(){for(var Ae=0,Oe=X.interactions.list;Ae<Oe.length;Ae++){var je=Oe[Ae];if(je.pointerIsDown&&je.pointerType==="touch"&&!je._interacting)for(var Le=function(){var kt=ft[Ke];X.documents.some(function(It){return Pe(It.doc,kt.downTarget)})||je.removePointer(kt.pointer,kt.event)},Ke=0,ft=je.pointers;Ke<ft.length;Ke++)Le()}}(he=se.PointerEvent?[{type:be.down,listener:Te},{type:be.down,listener:H.pointerDown},{type:be.move,listener:H.pointerMove},{type:be.up,listener:H.pointerUp},{type:be.cancel,listener:H.pointerUp}]:[{type:"mousedown",listener:H.pointerDown},{type:"mousemove",listener:H.pointerMove},{type:"mouseup",listener:H.pointerUp},{type:"touchstart",listener:Te},{type:"touchstart",listener:H.pointerDown},{type:"touchmove",listener:H.pointerMove},{type:"touchend",listener:H.pointerUp},{type:"touchcancel",listener:H.pointerUp}]).push({type:"blur",listener:function(Ae){for(var Oe=0,je=X.interactions.list;Oe<je.length;Oe++)je[Oe].documentBlur(Ae)}}),X.prevTouchTime=0,X.Interaction=function(Ae){f(je,Ae);var Oe=S(je);function je(){return r(this,je),Oe.apply(this,arguments)}return l(je,[{key:"pointerMoveTolerance",get:function(){return X.interactions.pointerMoveTolerance},set:function(Le){X.interactions.pointerMoveTolerance=Le}},{key:"_now",value:function(){return X.now()}}]),je}(Y7),X.interactions={list:[],new:function(Ae){Ae.scopeFire=function(je,Le){return X.fire(je,Le)};var Oe=new X.Interaction(Ae);return X.interactions.list.push(Oe),Oe},listeners:H,docEvents:he,pointerMoveTolerance:1},X.usePlugin(Zr)},listeners:{"scope:add-document":function(X){return c1(X,"add")},"scope:remove-document":function(X){return c1(X,"remove")},"interactable:unset":function(X,H){for(var te=X.interactable,le=H.interactions.list.length-1;le>=0;le--){var he=H.interactions.list[le];he.interactable===te&&(he.stop(),H.fire("interactions:destroy",{interaction:he}),he.destroy(),H.interactions.list.length>2&&H.interactions.list.splice(le,1))}}},onDocSignal:c1,doOnInteractions:Lm,methodNames:Rm},u1=ew,hc=function(X){return X[X.On=0]="On",X[X.Off=1]="Off",X}(hc||{}),G5=function(){function X(H,te,le,he){r(this,X),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new t_,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=te.actions,this.target=H,this._context=te.context||le,this._win=V(Ft(H)?this._context:H),this._doc=this._win.document,this._scopeEvents=he,this.set(te)}return l(X,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(H,te){return J.func(te.onstart)&&this.on("".concat(H,"start"),te.onstart),J.func(te.onmove)&&this.on("".concat(H,"move"),te.onmove),J.func(te.onend)&&this.on("".concat(H,"end"),te.onend),J.func(te.oninertiastart)&&this.on("".concat(H,"inertiastart"),te.oninertiastart),this}},{key:"updatePerActionListeners",value:function(H,te,le){var he,be=this,Te=(he=this._actions.map[H])==null?void 0:he.filterEventType,Ae=function(Oe){return(Te==null||Te(Oe))&&qf(Oe,be._actions)};(J.array(te)||J.object(te))&&this._onOff(hc.Off,H,te,void 0,Ae),(J.array(le)||J.object(le))&&this._onOff(hc.On,H,le,void 0,Ae)}},{key:"setPerAction",value:function(H,te){var le=this._defaults;for(var he in te){var be=he,Te=this.options[H],Ae=te[be];be==="listeners"&&this.updatePerActionListeners(H,Te.listeners,Ae),J.array(Ae)?Te[be]=u(Ae):J.plainObject(Ae)?(Te[be]=Nt(Te[be]||{},Mm(Ae)),J.object(le.perAction[be])&&"enabled"in le.perAction[be]&&(Te[be].enabled=Ae.enabled!==!1)):J.bool(Ae)&&J.object(le.perAction[be])?Te[be].enabled=Ae:Te[be]=Ae}}},{key:"getRect",value:function(H){return H=H||(J.element(this.target)?this.target:null),J.string(this.target)&&(H=H||this._context.querySelector(this.target)),Pt(H)}},{key:"rectChecker",value:function(H){var te=this;return J.func(H)?(this.getRect=function(le){var he=Nt({},H.apply(te,le));return"width"in he||(he.width=he.right-he.left,he.height=he.bottom-he.top),he},this):H===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(H,te){if(Ft(te)||J.object(te)){for(var le in this.options[H]=te,this._actions.map)this.options[le][H]=te;return this}return this.options[H]}},{key:"origin",value:function(H){return this._backCompatOption("origin",H)}},{key:"deltaSource",value:function(H){return H==="page"||H==="client"?(this.options.deltaSource=H,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var H=this.target;return J.string(H)?Array.from(this._context.querySelectorAll(H)):J.func(H)&&H.getAllElements?H.getAllElements():J.element(H)?[H]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(H){return this._context===H.ownerDocument||Pe(this._context,H)}},{key:"testIgnoreAllow",value:function(H,te,le){return!this.testIgnore(H.ignoreFrom,te,le)&&this.testAllow(H.allowFrom,te,le)}},{key:"testAllow",value:function(H,te,le){return!H||!!J.element(le)&&(J.string(H)?_t(le,H,te):!!J.element(H)&&Pe(H,le))}},{key:"testIgnore",value:function(H,te,le){return!(!H||!J.element(le))&&(J.string(H)?_t(le,H,te):!!J.element(H)&&Pe(H,le))}},{key:"fire",value:function(H){return this.events.fire(H),this}},{key:"_onOff",value:function(H,te,le,he,be){J.object(te)&&!J.array(te)&&(he=le,le=null);var Te=sn(te,le,be);for(var Ae in Te){Ae==="wheel"&&(Ae=Se.wheelEvent);for(var Oe=0,je=Te[Ae];Oe<je.length;Oe++){var Le=je[Oe];qf(Ae,this._actions)?this.events[H===hc.On?"on":"off"](Ae,Le):J.string(this.target)?this._scopeEvents[H===hc.On?"addDelegate":"removeDelegate"](this.target,this._context,Ae,Le,he):this._scopeEvents[H===hc.On?"add":"remove"](this.target,Ae,Le,he)}}return this}},{key:"on",value:function(H,te,le){return this._onOff(hc.On,H,te,le)}},{key:"off",value:function(H,te,le){return this._onOff(hc.Off,H,te,le)}},{key:"set",value:function(H){var te=this._defaults;for(var le in J.object(H)||(H={}),this.options=Mm(te.base),this._actions.methodDict){var he=le,be=this._actions.methodDict[he];this.options[he]={},this.setPerAction(he,Nt(Nt({},te.perAction),te.actions[he])),this[be](H[he])}for(var Te in H)Te!=="getRect"?J.func(this[Te])&&this[Te](H[Te]):this.rectChecker(H.getRect);return this}},{key:"unset",value:function(){if(J.string(this.target))for(var H in this._scopeEvents.delegatedEvents)for(var te=this._scopeEvents.delegatedEvents[H],le=te.length-1;le>=0;le--){var he=te[le],be=he.selector,Te=he.context,Ae=he.listeners;be===this.target&&Te===this._context&&te.splice(le,1);for(var Oe=Ae.length-1;Oe>=0;Oe--)this._scopeEvents.removeDelegate(this.target,this._context,H,Ae[Oe][0],Ae[Oe][1])}else this._scopeEvents.remove(this.target,"all")}}]),X}(),X7=function(){function X(H){var te=this;r(this,X),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=H,H.addListeners({"interactable:unset":function(le){var he=le.interactable,be=he.target,Te=J.string(be)?te.selectorMap[be]:be[te.scope.id],Ae=d(Te,function(Oe){return Oe===he});Te.splice(Ae,1)}})}return l(X,[{key:"new",value:function(H,te){te=Nt(te||{},{actions:this.scope.actions});var le=new this.scope.Interactable(H,te,this.scope.document,this.scope.events);return this.scope.addDocument(le._doc),this.list.push(le),J.string(H)?(this.selectorMap[H]||(this.selectorMap[H]=[]),this.selectorMap[H].push(le)):(le.target[this.scope.id]||Object.defineProperty(H,this.scope.id,{value:[],configurable:!0}),H[this.scope.id].push(le)),this.scope.fire("interactable:new",{target:H,options:te,interactable:le,win:this.scope._win}),le}},{key:"getExisting",value:function(H,te){var le=te&&te.context||this.scope.document,he=J.string(H),be=he?this.selectorMap[H]:H[this.scope.id];if(be)return g(be,function(Te){return Te._context===le&&(he||Te.inContext(H))})}},{key:"forEachMatch",value:function(H,te){for(var le=0,he=this.list;le<he.length;le++){var be=he[le],Te=void 0;if((J.string(be.target)?J.element(H)&&we(H,be.target):H===be.target)&&be.inContext(H)&&(Te=te(be)),Te!==void 0)return Te}}}]),X}(),W7=function(){function X(){var H=this;r(this,X),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=Se,this.defaults=Mm(Zx),this.Eventable=t_,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(le){var he=function be(Te,Ae){var Oe=le.interactables.getExisting(Te,Ae);return Oe||((Oe=le.interactables.new(Te,Ae)).events.global=be.globalEvents),Oe};return he.getPointerAverage=wt,he.getTouchBBox=Xn,he.getTouchDistance=m,he.getTouchAngle=j,he.getElementRect=Pt,he.getElementClientRect=ut,he.matchesSelector=we,he.closest=Re,he.globalEvents={},he.version="1.10.27",he.scope=le,he.use=function(be,Te){return this.scope.usePlugin(be,Te),this},he.isSet=function(be,Te){return!!this.scope.interactables.get(be,Te&&Te.context)},he.on=Qi(function(be,Te,Ae){if(J.string(be)&&be.search(" ")!==-1&&(be=be.trim().split(/ +/)),J.array(be)){for(var Oe=0,je=be;Oe<je.length;Oe++){var Le=je[Oe];this.on(Le,Te,Ae)}return this}if(J.object(be)){for(var Ke in be)this.on(Ke,be[Ke],Te);return this}return qf(be,this.scope.actions)?this.globalEvents[be]?this.globalEvents[be].push(Te):this.globalEvents[be]=[Te]:this.scope.events.add(this.scope.document,be,Te,{options:Ae}),this},"The interact.on() method is being deprecated"),he.off=Qi(function(be,Te,Ae){if(J.string(be)&&be.search(" ")!==-1&&(be=be.trim().split(/ +/)),J.array(be)){for(var Oe=0,je=be;Oe<je.length;Oe++){var Le=je[Oe];this.off(Le,Te,Ae)}return this}if(J.object(be)){for(var Ke in be)this.off(Ke,be[Ke],Te);return this}var ft;return qf(be,this.scope.actions)?be in this.globalEvents&&(ft=this.globalEvents[be].indexOf(Te))!==-1&&this.globalEvents[be].splice(ft,1):this.scope.events.remove(this.scope.document,be,Te,Ae),this},"The interact.off() method is being deprecated"),he.debug=function(){return this.scope},he.supportsTouch=function(){return Se.supportsTouch},he.supportsPointerEvent=function(){return Se.supportsPointerEvent},he.stop=function(){for(var be=0,Te=this.scope.interactions.list;be<Te.length;be++)Te[be].stop();return this},he.pointerMoveTolerance=function(be){return J.number(be)?(this.scope.interactions.pointerMoveTolerance=be,this):this.scope.interactions.pointerMoveTolerance},he.addDocument=function(be,Te){this.scope.addDocument(be,Te)},he.removeDocument=function(be){this.scope.removeDocument(be)},he}(this),this.InteractEvent=bd,this.Interactable=void 0,this.interactables=new X7(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(le){return H.removeDocument(le.target)};var te=this;this.Interactable=function(le){f(be,le);var he=S(be);function be(){return r(this,be),he.apply(this,arguments)}return l(be,[{key:"_defaults",get:function(){return te.defaults}},{key:"set",value:function(Te){return P(y(be.prototype),"set",this).call(this,Te),te.fire("interactable:set",{options:Te,interactable:this}),this}},{key:"unset",value:function(){P(y(be.prototype),"unset",this).call(this);var Te=te.interactables.list.indexOf(this);Te<0||(te.interactables.list.splice(Te,1),te.fire("interactable:unset",{interactable:this}))}}]),be}(G5)}return l(X,[{key:"addListeners",value:function(H,te){this.listenerMaps.push({id:te,map:H})}},{key:"fire",value:function(H,te){for(var le=0,he=this.listenerMaps;le<he.length;le++){var be=he[le].map[H];if(be&&be(te,this,H)===!1)return!1}}},{key:"init",value:function(H){return this.isInitialized?this:function(te,le){return te.isInitialized=!0,J.window(le)&&G(le),se.init(le),Se.init(le),ct.init(le),te.window=le,te.document=le.document,te.usePlugin(u1),te.usePlugin(n_),te}(this,H)}},{key:"pluginIsInstalled",value:function(H){var te=H.id;return te?!!this._plugins.map[te]:this._plugins.list.indexOf(H)!==-1}},{key:"usePlugin",value:function(H,te){if(!this.isInitialized)return this;if(this.pluginIsInstalled(H))return this;if(H.id&&(this._plugins.map[H.id]=H),this._plugins.list.push(H),H.install&&H.install(this,te),H.listeners&&H.before){for(var le=0,he=this.listenerMaps.length,be=H.before.reduce(function(Ae,Oe){return Ae[Oe]=!0,Ae[j5(Oe)]=!0,Ae},{});le<he;le++){var Te=this.listenerMaps[le].id;if(Te&&(be[Te]||be[j5(Te)]))break}this.listenerMaps.splice(le,0,{id:H.id,map:H.listeners})}else H.listeners&&this.listenerMaps.push({id:H.id,map:H.listeners});return this}},{key:"addDocument",value:function(H,te){if(this.getDocIndex(H)!==-1)return!1;var le=V(H);te=te?Nt({},te):{},this.documents.push({doc:H,options:te}),this.events.documents.push(H),H!==this.document&&this.events.add(le,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:H,window:le,scope:this,options:te})}},{key:"removeDocument",value:function(H){var te=this.getDocIndex(H),le=V(H),he=this.documents[te].options;this.events.remove(le,"unload",this.onWindowUnload),this.documents.splice(te,1),this.events.documents.splice(te,1),this.fire("scope:remove-document",{doc:H,window:le,scope:this,options:he})}},{key:"getDocIndex",value:function(H){for(var te=0;te<this.documents.length;te++)if(this.documents[te].doc===H)return te;return-1}},{key:"getDocOptions",value:function(H){var te=this.getDocIndex(H);return te===-1?null:this.documents[te].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),X}();function j5(X){return X&&X.replace(/\/.*$/,"")}var r_=new W7,na=r_.interactStatic,Z7=typeof globalThis<"u"?globalThis:window;r_.init(Z7);var K7=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(X){var H=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(le){var he=le[0],be=le[1];return he in X||be in X}),te=function(le,he){for(var be=X.range,Te=X.limits,Ae=Te===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:Te,Oe=X.offset,je=Oe===void 0?{x:0,y:0}:Oe,Le={range:be,grid:X,x:null,y:null},Ke=0;Ke<H.length;Ke++){var ft=H[Ke],kt=ft[0],It=ft[1],Lt=Math.round((le-je.x)/X[kt]),Xt=Math.round((he-je.y)/X[It]);Le[kt]=Math.max(Ae.left,Math.min(Ae.right,Lt*X[kt]+je.x)),Le[It]=Math.max(Ae.top,Math.min(Ae.bottom,Xt*X[It]+je.y))}return Le};return te.grid=X,te.coordFields=H,te}}),J7={id:"snappers",install:function(X){var H=X.interactStatic;H.snappers=Nt(H.snappers||{},K7),H.createSnapGrid=H.snappers.grid}},Q7=J7,B5={start:function(X){var H=X.state,te=X.rect,le=X.edges,he=X.pageCoords,be=H.options,Te=be.ratio,Ae=be.enabled,Oe=H.options,je=Oe.equalDelta,Le=Oe.modifiers;Te==="preserve"&&(Te=te.width/te.height),H.startCoords=Nt({},he),H.startRect=Nt({},te),H.ratio=Te,H.equalDelta=je;var Ke=H.linkedEdges={top:le.top||le.left&&!le.bottom,left:le.left||le.top&&!le.right,bottom:le.bottom||le.right&&!le.top,right:le.right||le.bottom&&!le.left};if(H.xIsPrimaryAxis=!(!le.left&&!le.right),H.equalDelta){var ft=(Ke.left?1:-1)*(Ke.top?1:-1);H.edgeSign={x:ft,y:ft}}else H.edgeSign={x:Ke.left?-1:1,y:Ke.top?-1:1};if(Ae!==!1&&Nt(le,Ke),Le!=null&&Le.length){var kt=new ka(X.interaction);kt.copyFrom(X.interaction.modification),kt.prepareStates(Le),H.subModification=kt,kt.startAll(n({},X))}},set:function(X){var H=X.state,te=X.rect,le=X.coords,he=H.linkedEdges,be=Nt({},le),Te=H.equalDelta?ek:tk;if(Nt(X.edges,he),Te(H,H.xIsPrimaryAxis,le,te),!H.subModification)return null;var Ae=Nt({},te);fr(he,Ae,{x:le.x-be.x,y:le.y-be.y});var Oe=H.subModification.setAll(n(n({},X),{},{rect:Ae,edges:he,pageCoords:le,prevCoords:le,prevRect:Ae})),je=Oe.delta;return Oe.changed&&(Te(H,Math.abs(je.x)>Math.abs(je.y),Oe.coords,Oe.rect),Nt(le,Oe.coords)),Oe.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function ek(X,H,te){var le=X.startCoords,he=X.edgeSign;H?te.y=le.y+(te.x-le.x)*he.y:te.x=le.x+(te.y-le.y)*he.x}function tk(X,H,te,le){var he=X.startRect,be=X.startCoords,Te=X.ratio,Ae=X.edgeSign;if(H){var Oe=le.width/Te;te.y=be.y+(Oe-he.height)*Ae.y}else{var je=le.height*Te;te.x=be.x+(je-he.width)*Ae.x}}var ik=lh(B5,"aspectRatio"),H5=function(){};H5._defaults={};var Fm=H5;function Hf(X,H,te){return J.func(X)?hn(X,H.interactable,H.element,[te.x,te.y,H]):hn(X,H.interactable,H.element)}var o_={start:function(X){var H=X.rect,te=X.startOffset,le=X.state,he=X.interaction,be=X.pageCoords,Te=le.options,Ae=Te.elementRect,Oe=Nt({left:0,top:0,right:0,bottom:0},Te.offset||{});if(H&&Ae){var je=Hf(Te.restriction,he,be);if(je){var Le=je.right-je.left-H.width,Ke=je.bottom-je.top-H.height;Le<0&&(Oe.left+=Le,Oe.right+=Le),Ke<0&&(Oe.top+=Ke,Oe.bottom+=Ke)}Oe.left+=te.left-H.width*Ae.left,Oe.top+=te.top-H.height*Ae.top,Oe.right+=te.right-H.width*(1-Ae.right),Oe.bottom+=te.bottom-H.height*(1-Ae.bottom)}le.offset=Oe},set:function(X){var H=X.coords,te=X.interaction,le=X.state,he=le.options,be=le.offset,Te=Hf(he.restriction,te,H);if(Te){var Ae=function(Oe){return!Oe||"left"in Oe&&"top"in Oe||((Oe=Nt({},Oe)).left=Oe.x||0,Oe.top=Oe.y||0,Oe.right=Oe.right||Oe.left+Oe.width,Oe.bottom=Oe.bottom||Oe.top+Oe.height),Oe}(Te);H.x=Math.max(Math.min(Ae.right-be.right,H.x),Ae.left+be.left),H.y=Math.max(Math.min(Ae.bottom-be.bottom,H.y),Ae.top+be.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},nk=lh(o_,"restrict"),tw={top:1/0,left:1/0,bottom:-1/0,right:-1/0},U5={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Y5(X,H){for(var te=0,le=["top","left","bottom","right"];te<le.length;te++){var he=le[te];he in X||(X[he]=H[he])}return X}var h1={noInner:tw,noOuter:U5,start:function(X){var H,te=X.interaction,le=X.startOffset,he=X.state,be=he.options;be&&(H=ps(Hf(be.offset,te,te.coords.start.page))),H=H||{x:0,y:0},he.offset={top:H.y+le.top,left:H.x+le.left,bottom:H.y-le.bottom,right:H.x-le.right}},set:function(X){var H=X.coords,te=X.edges,le=X.interaction,he=X.state,be=he.offset,Te=he.options;if(te){var Ae=Nt({},H),Oe=Hf(Te.inner,le,Ae)||{},je=Hf(Te.outer,le,Ae)||{};Y5(Oe,tw),Y5(je,U5),te.top?H.y=Math.min(Math.max(je.top+be.top,Ae.y),Oe.top+be.top):te.bottom&&(H.y=Math.max(Math.min(je.bottom+be.bottom,Ae.y),Oe.bottom+be.bottom)),te.left?H.x=Math.min(Math.max(je.left+be.left,Ae.x),Oe.left+be.left):te.right&&(H.x=Math.max(Math.min(je.right+be.right,Ae.x),Oe.right+be.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},sk=lh(h1,"restrictEdges"),rk=Nt({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(X){}},o_.defaults),ok=lh({start:o_.start,set:o_.set,defaults:rk},"restrictRect"),ak={width:-1/0,height:-1/0},lk={width:1/0,height:1/0},ck=lh({start:function(X){return h1.start(X)},set:function(X){var H=X.interaction,te=X.state,le=X.rect,he=X.edges,be=te.options;if(he){var Te=Yn(Hf(be.min,H,X.coords))||ak,Ae=Yn(Hf(be.max,H,X.coords))||lk;te.options={endOnly:be.endOnly,inner:Nt({},h1.noInner),outer:Nt({},h1.noOuter)},he.top?(te.options.inner.top=le.bottom-Te.height,te.options.outer.top=le.bottom-Ae.height):he.bottom&&(te.options.inner.bottom=le.top+Te.height,te.options.outer.bottom=le.top+Ae.height),he.left?(te.options.inner.left=le.right-Te.width,te.options.outer.left=le.right-Ae.width):he.right&&(te.options.inner.right=le.left+Te.width,te.options.outer.right=le.left+Ae.width),h1.set(X),te.options=be}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),d1={start:function(X){var H,te=X.interaction,le=X.interactable,he=X.element,be=X.rect,Te=X.state,Ae=X.startOffset,Oe=Te.options,je=Oe.offsetWithOrigin?function(ft){var kt=ft.interaction.element,It=ps(hn(ft.state.options.origin,null,null,[kt])),Lt=It||fo(ft.interactable,kt,ft.interaction.prepared.name);return Lt}(X):{x:0,y:0};if(Oe.offset==="startCoords")H={x:te.coords.start.page.x,y:te.coords.start.page.y};else{var Le=hn(Oe.offset,le,he,[te]);(H=ps(Le)||{x:0,y:0}).x+=je.x,H.y+=je.y}var Ke=Oe.relativePoints;Te.offsets=be&&Ke&&Ke.length?Ke.map(function(ft,kt){return{index:kt,relativePoint:ft,x:Ae.left-be.width*ft.x+H.x,y:Ae.top-be.height*ft.y+H.y}}):[{index:0,relativePoint:null,x:H.x,y:H.y}]},set:function(X){var H=X.interaction,te=X.coords,le=X.state,he=le.options,be=le.offsets,Te=fo(H.interactable,H.element,H.prepared.name),Ae=Nt({},te),Oe=[];he.offsetWithOrigin||(Ae.x-=Te.x,Ae.y-=Te.y);for(var je=0,Le=be;je<Le.length;je++)for(var Ke=Le[je],ft=Ae.x-Ke.x,kt=Ae.y-Ke.y,It=0,Lt=he.targets.length;It<Lt;It++){var Xt=he.targets[It],Gt=void 0;(Gt=J.func(Xt)?Xt(ft,kt,H._proxy,Ke,It):Xt)&&Oe.push({x:(J.number(Gt.x)?Gt.x:ft)+Ke.x,y:(J.number(Gt.y)?Gt.y:kt)+Ke.y,range:J.number(Gt.range)?Gt.range:he.range,source:Xt,index:It,offset:Ke})}for(var ai={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Ii=0;Ii<Oe.length;Ii++){var en=Oe[Ii],Si=en.range,Pi=en.x-Ae.x,Mr=en.y-Ae.y,ys=qi(Pi,Mr),Da=ys<=Si;Si===1/0&&ai.inRange&&ai.range!==1/0&&(Da=!1),ai.target&&!(Da?ai.inRange&&Si!==1/0?ys/Si<ai.distance/ai.range:Si===1/0&&ai.range!==1/0||ys<ai.distance:!ai.inRange&&ys<ai.distance)||(ai.target=en,ai.distance=ys,ai.range=Si,ai.inRange=Da,ai.delta.x=Pi,ai.delta.y=Mr)}return ai.inRange&&(te.x=ai.target.x,te.y=ai.target.y),le.closest=ai,ai},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},f1=lh(d1,"snap"),a_={start:function(X){var H=X.state,te=X.edges,le=H.options;if(!te)return null;X.state={options:{targets:null,relativePoints:[{x:te.left?0:1,y:te.top?0:1}],offset:le.offset||"self",origin:{x:0,y:0},range:le.range}},H.targetFields=H.targetFields||[["width","height"],["x","y"]],d1.start(X),H.offsets=X.state.offsets,X.state=H},set:function(X){var H=X.interaction,te=X.state,le=X.coords,he=te.options,be=te.offsets,Te={x:le.x-be[0].x,y:le.y-be[0].y};te.options=Nt({},he),te.options.targets=[];for(var Ae=0,Oe=he.targets||[];Ae<Oe.length;Ae++){var je=Oe[Ae],Le=void 0;if(Le=J.func(je)?je(Te.x,Te.y,H):je){for(var Ke=0,ft=te.targetFields;Ke<ft.length;Ke++){var kt=ft[Ke],It=kt[0],Lt=kt[1];if(It in Le||Lt in Le){Le.x=Le[It],Le.y=Le[Lt];break}}te.options.targets.push(Le)}}var Xt=d1.set(X);return te.options=he,Xt},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},X5=lh(a_,"snapSize"),l_={aspectRatio:ik,restrictEdges:sk,restrict:nk,restrictRect:ok,restrictSize:ck,snapEdges:lh({start:function(X){var H=X.edges;return H?(X.state.targetFields=X.state.targetFields||[[H.left?"left":"right",H.top?"top":"bottom"]],a_.start(X)):null},set:a_.set,defaults:Nt(Mm(a_.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:f1,snapSize:X5,spring:Fm,avoid:Fm,transform:Fm,rubberband:Fm},W5={id:"modifiers",install:function(X){var H=X.interactStatic;for(var te in X.usePlugin(Wx),X.usePlugin(Q7),H.modifiers=l_,l_){var le=l_[te],he=le._defaults,be=le._methods;he._methods=be,X.defaults.perAction[te]=he}}},Z5=W5,iw=function(X){f(te,X);var H=S(te);function te(le,he,be,Te,Ae,Oe){var je;if(r(this,te),ri(x(je=H.call(this,Ae)),be),be!==he&&ri(x(je),he),je.timeStamp=Oe,je.originalEvent=be,je.type=le,je.pointerId=gs(he),je.pointerType=T(he),je.target=Te,je.currentTarget=null,le==="tap"){var Le=Ae.getPointerIndex(he);je.dt=je.timeStamp-Ae.pointers[Le].downTime;var Ke=je.timeStamp-Ae.tapTime;je.double=!!Ae.prevTap&&Ae.prevTap.type!=="doubletap"&&Ae.prevTap.target===je.target&&Ke<500}else le==="doubletap"&&(je.dt=he.timeStamp-Ae.tapTime,je.double=!0);return je}return l(te,[{key:"_subtractOrigin",value:function(le){var he=le.x,be=le.y;return this.pageX-=he,this.pageY-=be,this.clientX-=he,this.clientY-=be,this}},{key:"_addOrigin",value:function(le){var he=le.x,be=le.y;return this.pageX+=he,this.pageY+=be,this.clientX+=he,this.clientY+=be,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),te}(h),Qc={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(X){X.pointerEvents=Qc,X.defaults.actions.pointerEvents=Qc.defaults,Nt(X.actions.phaselessTypes,Qc.types)},listeners:{"interactions:new":function(X){var H=X.interaction;H.prevTap=null,H.tapTime=0},"interactions:update-pointer":function(X){var H=X.down,te=X.pointerInfo;!H&&te.hold||(te.hold={duration:1/0,timeout:null})},"interactions:move":function(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget;X.duplicate||te.pointerIsDown&&!te.pointerWasMoved||(te.pointerIsDown&&nw(X),xd({interaction:te,pointer:le,event:he,eventTarget:be,type:"move"},H))},"interactions:down":function(X,H){(function(te,le){for(var he=te.interaction,be=te.pointer,Te=te.event,Ae=te.eventTarget,Oe=te.pointerIndex,je=he.pointers[Oe].hold,Le=Vt(Ae),Ke={interaction:he,pointer:be,event:Te,eventTarget:Ae,type:"hold",targets:[],path:Le,node:null},ft=0;ft<Le.length;ft++){var kt=Le[ft];Ke.node=kt,le.fire("pointerEvents:collect-targets",Ke)}if(Ke.targets.length){for(var It=1/0,Lt=0,Xt=Ke.targets;Lt<Xt.length;Lt++){var Gt=Xt[Lt].eventable.options.holdDuration;Gt<It&&(It=Gt)}je.duration=It,je.timeout=setTimeout(function(){xd({interaction:he,eventTarget:Ae,pointer:be,event:Te,type:"hold"},le)},It)}})(X,H),xd(X,H)},"interactions:up":function(X,H){nw(X),xd(X,H),function(te,le){var he=te.interaction,be=te.pointer,Te=te.event,Ae=te.eventTarget;he.pointerWasMoved||xd({interaction:he,eventTarget:Ae,pointer:be,event:Te,type:"tap"},le)}(X,H)},"interactions:cancel":function(X,H){nw(X),xd(X,H)}},PointerEvent:iw,fire:xd,collectEventTargets:K5,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function xd(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget,Te=X.type,Ae=X.targets,Oe=Ae===void 0?K5(X,H):Ae,je=new iw(Te,le,he,be,te,H.now());H.fire("pointerEvents:new",{pointerEvent:je});for(var Le={interaction:te,pointer:le,event:he,eventTarget:be,targets:Oe,type:Te,pointerEvent:je},Ke=0;Ke<Oe.length;Ke++){var ft=Oe[Ke];for(var kt in ft.props||{})je[kt]=ft.props[kt];var It=fo(ft.eventable,ft.node);if(je._subtractOrigin(It),je.eventable=ft.eventable,je.currentTarget=ft.node,ft.eventable.fire(je),je._addOrigin(It),je.immediatePropagationStopped||je.propagationStopped&&Ke+1<Oe.length&&Oe[Ke+1].node!==je.currentTarget)break}if(H.fire("pointerEvents:fired",Le),Te==="tap"){var Lt=je.double?xd({interaction:te,pointer:le,event:he,eventTarget:be,type:"doubletap"},H):je;te.prevTap=Lt,te.tapTime=Lt.timeStamp}return je}function K5(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget,Te=X.type,Ae=te.getPointerIndex(le),Oe=te.pointers[Ae];if(Te==="tap"&&(te.pointerWasMoved||!Oe||Oe.downTarget!==be))return[];for(var je=Vt(be),Le={interaction:te,pointer:le,event:he,eventTarget:be,type:Te,path:je,targets:[],node:null},Ke=0;Ke<je.length;Ke++){var ft=je[Ke];Le.node=ft,H.fire("pointerEvents:collect-targets",Le)}return Te==="hold"&&(Le.targets=Le.targets.filter(function(kt){var It,Lt;return kt.eventable.options.holdDuration===((It=te.pointers[Ae])==null||(Lt=It.hold)==null?void 0:Lt.duration)})),Le.targets}function nw(X){var H=X.interaction,te=X.pointerIndex,le=H.pointers[te].hold;le&&le.timeout&&(clearTimeout(le.timeout),le.timeout=null)}var J5=Object.freeze({__proto__:null,default:Qc});function Q5(X){var H=X.interaction;H.holdIntervalHandle&&(clearInterval(H.holdIntervalHandle),H.holdIntervalHandle=null)}var p1={id:"pointer-events/holdRepeat",install:function(X){X.usePlugin(Qc);var H=X.pointerEvents;H.defaults.holdRepeatInterval=0,H.types.holdrepeat=X.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(X,H){return X["pointerEvents:".concat(H)]=Q5,X},{"pointerEvents:new":function(X){var H=X.pointerEvent;H.type==="hold"&&(H.count=(H.count||0)+1)},"pointerEvents:fired":function(X,H){var te=X.interaction,le=X.pointerEvent,he=X.eventTarget,be=X.targets;if(le.type==="hold"&&be.length){var Te=be[0].eventable.options.holdRepeatInterval;Te<=0||(te.holdIntervalHandle=setTimeout(function(){H.pointerEvents.fire({interaction:te,eventTarget:he,type:"hold",pointer:le,event:le},H)},Te))}}})},m1=p1,uk={id:"pointer-events/interactableTargets",install:function(X){var H=X.Interactable;H.prototype.pointerEvents=function(le){return Nt(this.events.options,le),this};var te=H.prototype._backCompatOption;H.prototype._backCompatOption=function(le,he){var be=te.call(this,le,he);return be===this&&(this.events.options[le]=he),be}},listeners:{"pointerEvents:collect-targets":function(X,H){var te=X.targets,le=X.node,he=X.type,be=X.eventTarget;H.interactables.forEachMatch(le,function(Te){var Ae=Te.events,Oe=Ae.options;Ae.types[he]&&Ae.types[he].length&&Te.testIgnoreAllow(Oe,le,be)&&te.push({node:le,eventable:Ae,props:{interactable:Te}})})},"interactable:new":function(X){var H=X.interactable;H.events.getRect=function(te){return H.getRect(te)}},"interactable:set":function(X,H){var te=X.interactable,le=X.options;Nt(te.events.options,H.pointerEvents.defaults),Nt(te.events.options,le.pointerEvents||{})}}},c_=uk,eP={id:"pointer-events",install:function(X){X.usePlugin(J5),X.usePlugin(m1),X.usePlugin(c_)}},tP=eP,sw={id:"reflow",install:function(X){var H=X.Interactable;X.actions.phases.reflow=!0,H.prototype.reflow=function(te){return function(le,he,be){for(var Te=le.getAllElements(),Ae=be.window.Promise,Oe=Ae?[]:null,je=function(){var Ke=Te[Le],ft=le.getRect(Ke);if(!ft)return 1;var kt,It=g(be.interactions.list,function(Gt){return Gt.interacting()&&Gt.interactable===le&&Gt.element===Ke&&Gt.prepared.name===he.name});if(It)It.move(),Oe&&(kt=It._reflowPromise||new Ae(function(Gt){It._reflowResolve=Gt}));else{var Lt=Yn(ft),Xt=function(Gt){return{coords:Gt,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:Lt.x,y:Lt.y},client:{x:Lt.x,y:Lt.y},timeStamp:be.now()});kt=function(Gt,ai,Ii,en,Si){var Pi=Gt.interactions.new({pointerType:"reflow"}),Mr={interaction:Pi,event:Si,pointer:Si,eventTarget:Ii,phase:"reflow"};Pi.interactable=ai,Pi.element=Ii,Pi.prevEvent=Si,Pi.updatePointer(Si,Si,Ii,!0),ms(Pi.coords.delta),xn(Pi.prepared,en),Pi._doPhase(Mr);var ys=Gt.window,Da=ys.Promise,po=Da?new Da(function(eu){Pi._reflowResolve=eu}):void 0;return Pi._reflowPromise=po,Pi.start(en,ai,Ii),Pi._interacting?(Pi.move(Mr),Pi.end(Si)):(Pi.stop(),Pi._reflowResolve()),Pi.removePointer(Si,Si),po}(be,le,Ke,he,Xt)}Oe&&Oe.push(kt)},Le=0;Le<Te.length&&!je();Le++);return Oe&&Ae.all(Oe).then(function(){return le})}(this,te,X)}},listeners:{"interactions:stop":function(X,H){var te=X.interaction;te.pointerType==="reflow"&&(te._reflowResolve&&te._reflowResolve(),function(le,he){le.splice(le.indexOf(he),1)}(H.interactions.list,te))}}},rw=sw;if(na.use(Zr),na.use(Gf),na.use(tP),na.use(l1),na.use(Z5),na.use(Rn),na.use(et),na.use(Ni),na.use(rw),na.default=na,s(t)==="object"&&t)try{t.exports=na}catch{}return na.default=na,na})})(_oe);const o4=_oe.exports,ag={dialog:"dialog",panel:"panel",scrim:"scrim",container:"container",containerOpen:"container--open",containerEmbedded:"container--embedded",assistiveText:"assistive-text",openingActive:"dialog--opening-active"},vc={actionBar:"action-bar",alerts:"alerts",content:"content",contentTop:"content-top",contentBottom:"content-bottom",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerStart:"footer-start",footerEnd:"footer-end"},lg=25,a4=25,BX={x:0,y:0},HX={top:0,right:0,bottom:0,left:0},$Ee=`:host{--calcite-dialog-scrim-background-color:rgba(0, 0, 0, 0.85);pointer-events:none;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;--calcite-internal-dialog-animation-offset:20px}:host([modal]){position:absolute}.container{pointer-events:auto;position:fixed;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;align-items:center;justify-content:center;overflow:hidden;color:var(--calcite-color-text-2);opacity:0;visibility:hidden;transition:visibility 0ms linear var(--calcite-internal-animation-timing-slow), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88)}:host([placement=top]) .container{align-items:flex-start;justify-content:center}:host([placement=top-start]) .container{align-items:flex-start;justify-content:flex-start}:host([placement=top-end]) .container{align-items:flex-start;justify-content:flex-end}:host([placement=bottom]) .container{align-items:flex-end;justify-content:center}:host([placement=bottom-start]) .container{align-items:flex-end;justify-content:flex-start}:host([placement=bottom-end]) .container{align-items:flex-end;justify-content:flex-end}:host(:not([modal])) .container{pointer-events:none}:host([scale=s]){--calcite-internal-dialog-content-padding:var(--calcite-dialog-content-space, var(--calcite-spacing-sm));--calcite-internal-dialog-min-size-x:198px;--calcite-internal-dialog-min-size-y:140px}:host([scale=m]){--calcite-internal-dialog-content-padding:var(--calcite-dialog-content-space, var(--calcite-spacing-md));--calcite-internal-dialog-min-size-x:288px;--calcite-internal-dialog-min-size-y:180px}:host([scale=l]){--calcite-internal-dialog-content-padding:var(--calcite-dialog-content-space, var(--calcite-spacing-lg));--calcite-internal-dialog-min-size-x:388px;--calcite-internal-dialog-min-size-y:220px}.scrim{--calcite-scrim-background:var(--calcite-dialog-scrim-background-color, var(--calcite-color-transparent-scrim));--calcite-scrim-background-color:var(
    --calcite-dialog-scrim-background-color,
    var(--calcite-color-transparent-scrim)
  );position:fixed;inset:0px;display:flex;overflow-y:hidden}calcite-panel{--calcite-panel-content-space:var(--calcite-dialog-content-space, var(--calcite-internal-dialog-content-padding));--calcite-panel-footer-padding:var(--calcite-dialog-footer-space);--calcite-panel-header-border-block-end:var(--calcite-border-width-sm) solid var(--calcite-dialog-border-color);--calcite-panel-background-color:var(--calcite-dialog-background-color)}.dialog{pointer-events:none;position:relative;z-index:var(--calcite-z-index-modal);margin:1.5rem;box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;border-radius:0.25rem;opacity:0;--tw-shadow:0 2px 12px -4px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.16);--tw-shadow-colored:0 2px 12px -4px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);-webkit-overflow-scrolling:touch;visibility:hidden;transition:inset-block var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88);min-inline-size:var(--calcite-dialog-min-size-x, var(--calcite-internal-dialog-min-size-x));max-inline-size:var(--calcite-dialog-max-size-x, 100%);min-block-size:var(--calcite-dialog-min-size-y, var(--calcite-internal-dialog-min-size-y));max-block-size:var(--calcite-dialog-max-size-y, 100%);--calcite-internal-dialog-hidden-position:calc(
    var(--calcite-dialog-offset-y, 0px) + var(--calcite-internal-dialog-animation-offset)
  );--calcite-internal-dialog-shown-position:var(--calcite-dialog-offset-y, 0);inset-inline-start:var(--calcite-dialog-offset-x, 0);inset-block-start:var(--calcite-internal-dialog-hidden-position)}.dialog--opening-active{inset-block-start:var(--calcite-internal-dialog-shown-position)}:host([menu-open]) .dialog{transition:visibility 0ms linear var(--calcite-internal-animation-timing-slow), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88)}.panel{border-radius:0.25rem}.container--open{opacity:1;visibility:visible;transition-delay:0ms}.container--open .dialog{pointer-events:auto;visibility:visible;opacity:1;transition:inset-block var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88);transition-delay:0ms}:host([width=small]) .dialog{inline-size:auto}:host([width-scale=s]) .dialog{inline-size:var(--calcite-dialog-size-x, 32rem);block-size:var(--calcite-dialog-size-y, auto)}@media screen and (max-width: 35rem){:host([width-scale=s]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;inset-inline-start:0;inset-block-start:var(--calcite-internal-dialog-animation-offset)}:host([width-scale=s]) .dialog--opening-active{inset-block-start:0}}:host([width-scale=m]) .dialog{inline-size:var(--calcite-dialog-size-x, 48rem);block-size:var(--calcite-dialog-size-y, auto)}@media screen and (max-width: 51rem){:host([width-scale=m]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;inset-inline-start:0;inset-block-start:var(--calcite-internal-dialog-animation-offset)}:host([width-scale=m]) .dialog--opening-active{inset-block-start:0}}:host([width-scale=l]) .dialog{inline-size:var(--calcite-dialog-size-x, 94rem);block-size:var(--calcite-dialog-size-y, auto)}@media screen and (max-width: 97rem){:host([width-scale=l]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;inset-inline-start:0;inset-block-start:var(--calcite-internal-dialog-animation-offset)}:host([width-scale=l]) .dialog--opening-active{inset-block-start:0}}:host([placement=cover]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;border-radius:0px}:host([placement=cover]) .panel{border-radius:0px}:host([kind]) .panel{border-start-start-radius:0px;border-start-end-radius:0px}:host([kind=brand]) .dialog{border-color:var(--calcite-color-brand)}:host([kind=danger]) .dialog{border-color:var(--calcite-color-status-danger)}:host([kind=info]) .dialog{border-color:var(--calcite-color-status-info)}:host([kind=success]) .dialog{border-color:var(--calcite-color-status-success)}:host([kind=warning]) .dialog{border-color:var(--calcite-color-status-warning)}:host([kind=brand][open]) .dialog,:host([kind=danger][open]) .dialog,:host([kind=info][open]) .dialog,:host([kind=success][open]) .dialog,:host([kind=warning][open]) .dialog{border-width:0px;border-block-start-width:4px;border-style:solid}.container--embedded{position:absolute;pointer-events:auto}.container--embedded calcite-scrim{position:absolute}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,REe=$Ee;let a8=0,UX="";const boe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDialogBeforeClose=Mt(this,"calciteDialogBeforeClose",6),this.calciteDialogClose=Mt(this,"calciteDialogClose",6),this.calciteDialogBeforeOpen=Mt(this,"calciteDialogBeforeOpen",6),this.calciteDialogOpen=Mt(this,"calciteDialogOpen",6),this.calciteDialogScroll=Mt(this,"calciteDialogScroll",6),this.openTransitionProp="opacity",this.resizePosition={...HX},this.dragPosition={...BX},this.ignoreOpenChange=!1,this.mutationObserver=Ea("mutation",()=>this.handleMutationObserver()),this.handleKeyDown=e=>{const{key:i,shiftKey:n,defaultPrevented:s}=e,{dragEnabled:r,resizable:o,resizePosition:l,dragPosition:c,transitionEl:f}=this;if(!(s||!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(i)))switch(i){case"ArrowUp":n&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().height-lg,type:"blockSize"}),l.bottom-=lg,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(c.y-=a4,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break;case"ArrowDown":n&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().height+lg,type:"blockSize"}),l.bottom+=lg,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(c.y+=a4,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break;case"ArrowLeft":n&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().width-lg,type:"inlineSize"}),l.right-=lg,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(c.x-=a4,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break;case"ArrowRight":n&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().width+lg,type:"inlineSize"}),l.right+=lg,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(c.x+=a4,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break}},this.setTransitionEl=e=>{this.transitionEl=e,this.setupInteractions()},this.openEnd=()=>{this.setFocus(),this.el.removeEventListener("calciteDialogOpen",this.openEnd)},this.handleInternalPanelScroll=e=>{e.target===this.panelEl&&(e.stopPropagation(),this.calciteDialogScroll.emit())},this.handleInternalPanelCloseClick=e=>{e.target===this.panelEl&&(e.stopPropagation(),this.open=!1)},this.handlePanelKeyDown=e=>{this.escapeDisabled&&e.key==="Escape"&&e.preventDefault()},this.handleOutsideClose=()=>{this.outsideCloseDisabled||(this.open=!1)},this.closeDialog=async()=>{if(this.beforeClose)try{await this.beforeClose()}catch{requestAnimationFrame(()=>{this.ignoreOpenChange=!0,this.open=!0,this.ignoreOpenChange=!1});return}a8--,this.opened=!1,this.updateOverflowHiddenClass()},this.updateOverflowHiddenClass=()=>{this.opened&&!this.embedded&&this.modal?this.addOverflowHiddenClass():this.removeOverflowHiddenClass()},this.handleMutationObserver=()=>{this.updateFocusTrapElements()},this.beforeClose=void 0,this.description=void 0,this.dragEnabled=!1,this.closeDisabled=!1,this.embedded=!1,this.escapeDisabled=!1,this.heading=void 0,this.headingLevel=void 0,this.kind=void 0,this.loading=!1,this.menuOpen=!1,this.messages=void 0,this.messageOverrides=void 0,this.modal=!1,this.open=!1,this.outsideCloseDisabled=!1,this.overlayPositioning="absolute",this.placement="center",this.resizable=!1,this.scale="m",this.widthScale="m",this.opened=!1,this.hasFooter=!0,this.hasContentTop=!1,this.hasContentBottom=!1,this.effectiveLocale=void 0,this.defaultMessages=void 0,this.assistiveText=null}onMessagesChange(){}onModalChange(){this.updateOverflowHiddenClass()}async componentWillLoad(){await Ml(this),Sr(this),this.open&&this.openDialog()}componentDidLoad(){Er(this)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),Ca(this),kl(this),poe(this),this.setupInteractions()}disconnectedCallback(){var e;this.removeOverflowHiddenClass(),(e=this.mutationObserver)==null||e.disconnect(),RS(this),Pa(this),Dl(this),this.embedded=!1,this.cleanupInteractions()}render(){const{assistiveText:e,description:i,heading:n,opened:s}=this;return Me(er,{key:"bf406255eaa6d94c8443af185a74a2b2d58c6d59"},Me("div",{key:"de2a34b6da4a82c66e9fafdbdd2056e4e11e1315",class:{[ag.container]:!0,[ag.containerOpen]:s,[ag.containerEmbedded]:this.embedded}},this.modal?Me("calcite-scrim",{class:ag.scrim,onClick:this.handleOutsideClose}):null,Me("div",{key:"be47093e3a955ce45a71c555700143a4a1c7a166","aria-description":i,"aria-label":n,"aria-modal":xr(this.modal),class:ag.dialog,onKeyDown:this.handleKeyDown,ref:this.setTransitionEl,role:"dialog"},e?Me("div",{"aria-live":"polite",class:ag.assistiveText,key:"assistive-text"},e):null,Me("slot",{key:"6ed9f10ae7d5ecc1ec9062d6aba559001d5194e6",name:vc.content},Me("calcite-panel",{key:"cd6ebaa7d7362cbeb70e9ae623f38298d1e831e3",beforeClose:this.beforeClose,class:ag.panel,closable:!this.closeDisabled,closed:!s,description:i,heading:n,headingLevel:this.headingLevel,loading:this.loading,menuOpen:this.menuOpen,messageOverrides:this.messageOverrides,onCalcitePanelClose:this.handleInternalPanelCloseClick,onCalcitePanelScroll:this.handleInternalPanelScroll,onKeyDown:this.handlePanelKeyDown,overlayPositioning:this.overlayPositioning,ref:r=>this.panelEl=r,scale:this.scale},Me("slot",{key:"2ce955775c33b09fc849a083d0bcc1c8ce523dd8",name:vc.actionBar,slot:Xs.actionBar}),Me("slot",{key:"dd44184de251320af6225baa2e59571b881a23cd",name:vc.alerts,slot:Xs.alerts}),Me("slot",{key:"da343a1a10e015b04b37463c10592e612a576e9b",name:vc.headerActionsStart,slot:Xs.headerActionsStart}),Me("slot",{key:"6680fde2bd7ad6dc5803c78ea7250d11d4920b7c",name:vc.headerActionsEnd,slot:Xs.headerActionsEnd}),Me("slot",{key:"a17ca64188ffe6000792e67eafc838df575ebbc3",name:vc.headerContent,slot:Xs.headerContent}),Me("slot",{key:"7e048c4a9104053ca0a61ab2514b018efb4fc872",name:vc.headerMenuActions,slot:Xs.headerMenuActions}),Me("slot",{key:"6760c8a6c105a511fcb859cfd222f8c1355a82c4",name:vc.fab,slot:Xs.fab}),Me("slot",{key:"e0f2e7644281d408d8c21ce5bf16b08af0a59c3b",name:vc.contentTop,slot:Xs.contentTop}),Me("slot",{key:"01889c3b7fc13bc49521c27feb2ab35346552504",name:vc.contentBottom,slot:Xs.contentBottom}),Me("slot",{key:"593bad35110b5d7e7b44d598b397e4b87cc28e28",name:vc.footerStart,slot:Xs.footerStart}),Me("slot",{key:"5e84099e096a6afb678cce9731b189f4011dc067",name:vc.footer,slot:Xs.footer}),Me("slot",{key:"69a805bd0c1f43a6d165939e62db562428f39f11",name:vc.footerEnd,slot:Xs.footerEnd}),Me("slot",{key:"b49e14ff6d2c63caaa8fd296920618e7673eb71b"}))))))}effectiveLocaleChange(){Al(this,this.effectiveLocale)}handleInteractionChange(){this.setupInteractions()}updateAssistiveText(){const{messages:e}=this;this.assistiveText=e&&(this.dragEnabled||this.resizable)?`${this.dragEnabled?e.dragEnabled:""} ${this.resizable?e.resizeEnabled:""}`:null}handleEscape(e){this.open&&!this.escapeDisabled&&e.key==="Escape"&&!e.defaultPrevented&&(this.open=!1,e.preventDefault())}async setFocus(){var e;return await Cr(this),((e=this.panelEl)==null?void 0:e.setFocus())??IC(this.el)}async updateFocusTrapElements(){moe(this)}async scrollContentTo(e){var i;await((i=this.panelEl)==null?void 0:i.scrollContentTo(e))}onBeforeOpen(){this.calciteDialogBeforeOpen.emit()}onOpen(){this.calciteDialogOpen.emit(),KO(this)}onBeforeClose(){this.calciteDialogBeforeClose.emit()}onClose(){this.calciteDialogClose.emit(),RS(this)}toggleDialog(e){this.ignoreOpenChange||(e?this.openDialog():this.closeDialog())}handleOpenedChange(e){this.transitionEl.classList.toggle(ag.openingActive,e),Bu(this)}async triggerInteractModifiers(){const{interaction:e}=this;e&&(await e.reflow({name:"drag"}),await e.reflow({name:"resize"}))}getTransitionElDOMRect(){return this.transitionEl.getBoundingClientRect()}updateTransform(){const{dragPosition:{x:e,y:i},resizePosition:n,transitionEl:s,dragEnabled:r,resizable:o}=this;if(!s)return;if(!r&&!o){s.style.transform=null;return}const{top:l,right:c,bottom:f,left:y}=this.getAdjustedResizePosition(n),_=Math.round(e+y+c),x=Math.round(i+l+f);s.style.transform=_||x?`translate(${_}px, ${x}px)`:null}updateSize({type:e,size:i}){const{transitionEl:n}=this;n&&(n.style[e]=i!==null?`${Math.round(i)}px`:null)}cleanupInteractions(){var e;(e=this.interaction)==null||e.unset(),this.updateSize({size:null,type:"inlineSize"}),this.updateSize({size:null,type:"blockSize"}),this.dragPosition={...BX},this.resizePosition={...HX},this.updateTransform()}setupInteractions(){this.cleanupInteractions();const{el:e,transitionEl:i,resizable:n,dragEnabled:s,resizePosition:r,dragPosition:o}=this;if(!(!i||!this.open)){if((n||s)&&(this.interaction=o4(i,{context:e.ownerDocument})),n){const{minInlineSize:l,minBlockSize:c,maxInlineSize:f,maxBlockSize:y}=window.getComputedStyle(i);this.interaction.resizable({edges:{top:!0,right:!0,bottom:!0,left:!0},modifiers:[o4.modifiers.restrictSize({min:{width:this.isPixelValue(l)?parseInt(l,10):0,height:this.isPixelValue(c)?parseInt(c,10):0},max:{width:this.isPixelValue(f)?parseInt(f,10):window.innerWidth,height:this.isPixelValue(y)?parseInt(y,10):window.innerHeight}}),o4.modifiers.restrict({restriction:"parent"})],listeners:{move:({rect:_,deltaRect:x})=>{x&&(r.top+=x.top,r.right+=x.right,r.bottom+=x.bottom,r.left+=x.left),this.updateSize({size:_.width,type:"inlineSize"}),this.updateSize({size:_.height,type:"blockSize"}),this.updateTransform()}}})}s&&this.interaction.draggable({modifiers:[o4.modifiers.restrictRect({restriction:"parent"})],listeners:{move:({dx:l,dy:c})=>{o.x+=l,o.y+=c,this.updateTransform()}}})}}isPixelValue(e){return e.indexOf("px")!==-1}getAdjustedResizePosition({top:e,right:i,bottom:n,left:s}){const r=e/2,o=i/2,l=n/2,c=s/2;switch(this.placement){case"top":return{top:e,right:o,bottom:0,left:c};case"top-start":return{top:e,right:0,bottom:0,left:s};case"top-end":return{top:e,right:i,bottom:0,left:0};case"bottom":return{top:0,right:o,bottom:n,left:c};case"bottom-start":return{top:0,right:0,bottom:n,left:s};case"bottom-end":return{top:0,right:i,bottom:n,left:0};case"cover":case"center":default:return{top:r,right:o,bottom:l,left:c}}}async openDialog(){await Tre(this.el),this.el.addEventListener("calciteDialogOpen",this.openEnd),this.opened=!0,this.updateOverflowHiddenClass()}addOverflowHiddenClass(){a8===0&&(UX=document.documentElement.style.overflow),a8++,document.documentElement.style.setProperty("overflow","hidden")}removeOverflowHiddenClass(){document.documentElement.style.setProperty("overflow",UX)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],modal:["onModalChange"],effectiveLocale:["effectiveLocaleChange"],open:["handleInteractionChange","toggleDialog"],placement:["handleInteractionChange"],resizable:["handleInteractionChange","updateAssistiveText"],dragEnabled:["handleInteractionChange","updateAssistiveText"],messages:["updateAssistiveText"],opened:["handleOpenedChange"]}}static get style(){return REe}},[1,"calcite-dialog",{beforeClose:[16],description:[1],dragEnabled:[516,"drag-enabled"],closeDisabled:[516,"close-disabled"],embedded:[1028],escapeDisabled:[516,"escape-disabled"],heading:[1],headingLevel:[514,"heading-level"],kind:[513],loading:[516],menuOpen:[516,"menu-open"],messages:[1040],messageOverrides:[1040],modal:[516],open:[1540],outsideCloseDisabled:[516,"outside-close-disabled"],overlayPositioning:[513,"overlay-positioning"],placement:[513],resizable:[516],scale:[513],widthScale:[513,"width-scale"],opened:[32],hasFooter:[32],hasContentTop:[32],hasContentBottom:[32],effectiveLocale:[32],defaultMessages:[32],assistiveText:[32],setFocus:[64],updateFocusTrapElements:[64],scrollContentTo:[64]},[[8,"keydown","handleEscape"]],{messageOverrides:["onMessagesChange"],modal:["onModalChange"],effectiveLocale:["effectiveLocaleChange"],open:["handleInteractionChange","toggleDialog"],placement:["handleInteractionChange"],resizable:["handleInteractionChange","updateAssistiveText"],dragEnabled:["handleInteractionChange","updateAssistiveText"],messages:["updateAssistiveText"],opened:["handleOpenedChange"]}]);function xoe(){if(typeof customElements>"u")return;["calcite-dialog","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-panel","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-dialog":customElements.get(e)||customElements.define(e,boe);break;case"calcite-action":customElements.get(e)||Nf();break;case"calcite-action-menu":customElements.get(e)||gx();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break;case"calcite-panel":customElements.get(e)||yoe();break;case"calcite-popover":customElements.get(e)||Fv();break;case"calcite-scrim":customElements.get(e)||Bq();break}})}xoe();const LEe=boe,FEe=xoe,zEe=Object.freeze(Object.defineProperty({__proto__:null,CalciteDialog:LEe,defineCustomElement:FEe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const qEe={container:"container"},VEe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.5rem)}:host([scale=m]) .container{gap:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.75rem)}:host([scale=l]) .container{gap:0.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1)}:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:0.5rem}:host([layout=inline][scale=l]) .container{gap:0.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity:1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}",GEe=VEe,jEe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalLabelClick=Mt(this,"calciteInternalLabelClick",2),this.labelClickHandler=e=>{var i;((i=window.getSelection())==null?void 0:i.type)!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})},this.alignment="start",this.for=void 0,this.scale="m",this.layout="default"}handleForChange(){awe(this.el)}connectedCallback(){document.dispatchEvent(new CustomEvent(MM))}disconnectedCallback(){document.dispatchEvent(new CustomEvent(P9))}render(){return Me(er,{key:"c3eff09792519c9e5a76ee28e3754db83b536f99",onClick:this.labelClickHandler},Me("div",{key:"387902edd9b59be290f95ad6c2721584037d7256",class:qEe.container},Me("slot",{key:"b54d782522e95323333040e40e1a6dd06b52a575"})))}get el(){return this}static get watchers(){return{for:["handleForChange"]}}static get style(){return GEe}},[1,"calcite-label",{alignment:[513],for:[513],scale:[513],layout:[513]},void 0,{for:["handleForChange"]}]);function BEe(){if(typeof customElements>"u")return;["calcite-label"].forEach(e=>{switch(e){case"calcite-label":customElements.get(e)||customElements.define(e,jEe);break}})}BEe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const HEe={dropdownTrigger:"trigger"},UEe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:var(--calcite-z-index-dropdown);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;block-size:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width-scale=s]){--calcite-dropdown-width:12rem}:host([width-scale=m]){--calcite-dropdown-width:14rem}:host([width-scale=l]){--calcite-dropdown-width:16rem}:host([hidden]){display:none}[hidden]{display:none}",YEe=UEe,XEe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownSelect=Mt(this,"calciteDropdownSelect",6),this.calciteDropdownBeforeClose=Mt(this,"calciteDropdownBeforeClose",6),this.calciteDropdownClose=Mt(this,"calciteDropdownClose",6),this.calciteDropdownBeforeOpen=Mt(this,"calciteDropdownBeforeOpen",6),this.calciteDropdownOpen=Mt(this,"calciteDropdownOpen",6),this.items=[],this.groups=[],this.mutationObserver=Ea("mutation",()=>this.updateItems()),this.resizeObserver=Ea("resize",e=>this.resizeObserverCallback(e)),this.openTransitionProp="opacity",this.guid=`calcite-dropdown-${mm()}`,this.focusLastDropdownItem=!1,this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?hoe(i,e):null},this.updateTriggers=e=>{this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)},this.updateItems=()=>{this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)},this.updateGroups=e=>{const i=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupScale()},this.resizeObserverCallback=e=>{e.forEach(i=>{const{target:n}=i;n===this.referenceEl?this.setDropdownWidth():n===this.scrollerEl&&this.setMaxScrollerHeight()})},this.setDropdownWidth=()=>{const{referenceEl:e,scrollerEl:i}=this,n=e==null?void 0:e.clientWidth;!n||!i||(i.style.minWidth=`${n}px`)},this.setMaxScrollerHeight=()=>{const{scrollerEl:e}=this;if(!e)return;this.reposition(!0);const i=this.getMaxScrollerHeight();e.style.maxHeight=i>0?`${i}px`:"",this.reposition(!0)},this.setScrollerAndTransitionEl=e=>{this.resizeObserver.observe(e),this.scrollerEl=e,this.transitionEl=e},this.setReferenceEl=e=>{this.referenceEl=e,Fb(this,this.referenceEl,this.floatingEl),this.resizeObserver.observe(e)},this.setFloatingEl=e=>{this.floatingEl=e,Fb(this,this.referenceEl,this.floatingEl)},this.keyDownHandler=e=>{if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:n}=e;if(!i){if(n==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&n==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}MC(n)?(this.toggleDropdown(),e.preventDefault()):(n==="ArrowDown"||n==="ArrowUp")&&(this.focusLastDropdownItem=n==="ArrowUp",this.open=!0,this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd))}},this.focusOnFirstActiveOrDefaultItem=()=>{const i=this.getTraversableItems().find(n=>n.selected)||(this.focusLastDropdownItem?this.items[this.items.length-1]:this.items[0]);this.focusLastDropdownItem=!1,i&&tm(i)},this.onOpenEnd=()=>{this.focusOnFirstActiveOrDefaultItem(),this.el.removeEventListener("calciteDropdownOpen",this.onOpenEnd)},this.toggleDropdown=()=>{this.open=!this.open,this.open&&this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd)},this.open=!1,this.closeOnSelectDisabled=!1,this.disabled=!1,this.flipPlacements=void 0,this.maxItems=0,this.overlayPositioning="absolute",this.placement=XSe,this.selectedItems=[],this.type="click",this.widthScale=void 0,this.scale="m"}openHandler(){if(Bu(this),this.disabled){this.open=!1;return}this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupScale()}async setFocus(){await Cr(this),IC(this.referenceEl)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.open&&(this.openHandler(),Bu(this)),this.updateItems(),Fb(this,this.referenceEl,this.floatingEl)}componentWillLoad(){Sr(this)}componentDidLoad(){Er(this),Fb(this,this.referenceEl,this.floatingEl)}componentDidRender(){gd(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),RM(this,this.referenceEl,this.floatingEl)}render(){const{open:e,guid:i}=this;return Me(er,{key:"377c3d9687bc025f004b4efe58bfa5f0893d86d0"},Me(yd,{key:"9e2f48be045fc6db10cc7203a8b998ec2b6abafd",disabled:this.disabled},Me("div",{key:"8607de2d53a4f8c4b29206ee56aa23ad4c2cbe3d",class:"calcite-trigger-container",id:`${i}-menubutton`,onClick:this.toggleDropdown,onKeyDown:this.keyDownHandler,ref:this.setReferenceEl},Me("slot",{key:"07de8df34055ddc39301654a5ca312ddf293e6a9","aria-controls":`${i}-menu`,"aria-expanded":xr(e),"aria-haspopup":"menu",name:HEe.dropdownTrigger,onSlotchange:this.updateTriggers})),Me("div",{key:"c1469efb62eb704b021ce6479ad55deda59582d4","aria-hidden":xr(!e),class:"calcite-dropdown-wrapper",ref:this.setFloatingEl},Me("div",{key:"f875166d486a53cd393f17d9295974aa449d449f","aria-labelledby":`${i}-menubutton`,class:{"calcite-dropdown-content":!0,[I2.animation]:!0,[I2.animationActive]:e},id:`${i}-menu`,ref:this.setScrollerAndTransitionEl,role:"menu"},Me("slot",{key:"bc6e61383aaf85b3d6242a86c50da68bc8b31e27",onSlotchange:this.updateGroups})))))}async reposition(e=!1){const{floatingEl:i,referenceEl:n,placement:s,overlayPositioning:r,filteredFlipPlacements:o}=this;return jq(this,{floatingEl:i,referenceEl:n,overlayPositioning:r,placement:s,flipPlacements:o,type:"menu"},e)}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,n=i.target,s=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(n);break;case"ArrowDown":s0(s,n,"next");break;case"ArrowUp":s0(s,n,"previous");break;case"Home":s0(s,n,"first");break;case"End":s0(s,n,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}updateGroupScale(){var e;(e=this.groups)==null||e.forEach(i=>i.scale=this.scale)}onBeforeOpen(){this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit()}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getMaxScrollerHeight(){const{maxItems:e,items:i}=this;let n=0,s=0,r;return this.groups.forEach(o=>{e>0&&n<e&&Array.from(o.children).forEach((l,c)=>{c===0&&(isNaN(r)&&(r=l.offsetTop),s+=r),n<e&&(s+=l.offsetHeight,n+=1)})}),i.length>e?s:0}closeCalciteDropdown(e=!0){this.open=!1,e&&tm(this.triggers[0])}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}}static get style(){return YEe}},[17,"calcite-dropdown",{open:[1540],closeOnSelectDisabled:[516,"close-on-select-disabled"],disabled:[516],flipPlacements:[16],maxItems:[514,"max-items"],overlayPositioning:[513,"overlay-positioning"],placement:[513],selectedItems:[1040],type:[513],widthScale:[513,"width-scale"],scale:[513],setFocus:[64],reposition:[64]},[[8,"click","closeCalciteDropdownOnClick"],[0,"calciteInternalDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"pointerenter","pointerEnterHandler"],[1,"pointerleave","pointerLeaveHandler"],[0,"calciteInternalDropdownItemKeyEvent","calciteInternalDropdownItemKeyEvent"],[0,"calciteInternalDropdownItemSelect","handleItemSelect"]],{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}]);function woe(){if(typeof customElements>"u")return;["calcite-dropdown"].forEach(e=>{switch(e){case"calcite-dropdown":customElements.get(e)||customElements.define(e,XEe);break}})}woe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const bg={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const WEe=":host{position:relative;display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-color-border-3)}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:0.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:0.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",ZEe=WEe,Soe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalDropdownItemChange=Mt(this,"calciteInternalDropdownItemChange",6),this.updateItems=()=>{Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)},this.mutationObserver=Ea("mutation",()=>this.updateItems()),this.groupTitle=void 0,this.scale="m",this.selectionMode="single"}handlePropsChange(){this.updateItems()}connectedCallback(){var e;this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}componentWillLoad(){this.groupPosition=this.getGroupPosition()}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){const e=this.groupTitle?Me("span",{"aria-hidden":"true",class:"dropdown-title"},this.groupTitle):null,i=this.groupPosition>0?Me("div",{class:"dropdown-separator",role:"separator"}):null;return Me(er,{key:"f41943751aefdb17d4f5d5bd8778c219cfd01a00","aria-label":this.groupTitle,role:"group"},Me("div",{key:"87b78040b93c06081ca8282a785d466ed8fcf334",class:{[bg.container]:!0}},i,e,Me("slot",{key:"f635a5bdbe439315eba6292a4858cbd8519d23d1"})))}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}getGroupPosition(){return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-dropdown-group"),this.el)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{selectionMode:["handlePropsChange"]}}static get style(){return ZEe}},[17,"calcite-dropdown-group",{groupTitle:[513,"group-title"],scale:[513],selectionMode:[513,"selection-mode"]},[[0,"calciteInternalDropdownItemSelect","updateActiveItemOnChange"]],{selectionMode:["handlePropsChange"]}]);function Eoe(){if(typeof customElements>"u")return;["calcite-dropdown-group"].forEach(e=>{switch(e){case"calcite-dropdown-group":customElements.get(e)||customElements.define(e,Soe);break}})}Eoe();const KEe=Soe,JEe=Eoe,Sut=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownGroup:KEe,defineCustomElement:JEe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const QEe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);text-align:start}.container a{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);outline-color:transparent}.dropdown-item-content{flex:1 1 auto;padding-block:0.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:scale(0.9)}:host([scale=s]) .container{padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:0.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-xl)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-xl)}:host(:focus){outline:2px solid transparent;outline-offset:2px;outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus) .container{color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-color-text-1)}:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-3)}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-color-brand)}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-color-border-1);opacity:1}:host([selected]) .dropdown-item-icon{color:var(--calcite-color-brand);opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,eCe=QEe,Coe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownItemSelect=Mt(this,"calciteDropdownItemSelect",6),this.calciteInternalDropdownItemSelect=Mt(this,"calciteInternalDropdownItemSelect",6),this.calciteInternalDropdownItemKeyEvent=Mt(this,"calciteInternalDropdownItemKeyEvent",6),this.calciteInternalDropdownCloseRequest=Mt(this,"calciteInternalDropdownCloseRequest",6),this.disabled=!1,this.href=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.iconEnd=void 0,this.label=void 0,this.rel=void 0,this.selected=!1,this.target=void 0,this.selectionMode="single",this.scale="m"}async setFocus(){var e;await Cr(this),(e=this.el)==null||e.focus()}componentWillLoad(){Sr(this),this.initialize()}componentDidLoad(){Er(this)}connectedCallback(){this.initialize()}componentDidRender(){gd(this)}render(){const{href:e,selectionMode:i,label:n,iconFlipRtl:s}=this,r=Me("calcite-icon",{key:"1ec1c941651dda8f39fa15427592141f04180f3e",class:bg.iconStart,flipRtl:s==="start"||s==="both",icon:this.iconStart,scale:Yo(this.scale)}),o=Me("span",{key:"3ab167ed4054ca34b4e13e72b752af6cf25522ae",class:bg.itemContent},Me("slot",{key:"88cf44809fb48450c66cc8f105bbda008a78157d"})),l=Me("calcite-icon",{key:"32fb27182943a032c0037f1f878a95c194d2dff1",class:bg.iconEnd,flipRtl:s==="end"||s==="both",icon:this.iconEnd,scale:Yo(this.scale)}),c=this.iconStart&&this.iconEnd?[r,o,l]:this.iconStart?[r,o]:this.iconEnd?[o,l]:o,f=e?Me("a",{"aria-label":n,class:bg.link,href:e,ref:S=>this.childLink=S,rel:this.rel,tabIndex:-1,target:this.target},c):c,y=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",_=i!=="none"?xr(this.selected):null,{disabled:x}=this;return Me(er,{key:"beec8e51bf18bdcab1928181828b372cc70bb7ee","aria-checked":_,"aria-label":e?"":n,role:y,tabIndex:x?-1:0},Me(yd,{key:"5cbbd1074d6c571f4cac3a99e4a2c09bf113db55",disabled:x},Me("div",{key:"bff025aeb280c9d0d829e5cf4d94e9392604e607",class:{[bg.container]:!0,[bg.containerNone]:i==="none"}},i!=="none"?Me("calcite-icon",{class:bg.icon,icon:i==="multiple"?"check":"bullet-point",scale:Yo(this.scale)}):null,f)))}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}get el(){return this}static get style(){return eCe}},[1,"calcite-dropdown-item",{disabled:[516],href:[513],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],iconEnd:[513,"icon-end"],label:[1],rel:[513],selected:[1540],target:[513],selectionMode:[1,"selection-mode"],scale:[513],setFocus:[64]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"],[16,"calciteInternalDropdownItemChange","updateActiveItemOnChange"]]]);function Poe(){if(typeof customElements>"u")return;["calcite-dropdown-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-dropdown-item":customElements.get(e)||customElements.define(e,Coe);break;case"calcite-icon":customElements.get(e)||Pr();break}})}Poe();const tCe=Coe,iCe=Poe,Cut=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownItem:tCe,defineCustomElement:iCe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const A2={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},nCe={menu:"ellipsis"},sCe={container:"container"},rCe=':host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0px;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns:1}:host([columns="2"]){--calcite-internal-action-group-columns:2}:host([columns="3"]){--calcite-internal-action-group-columns:3}:host([columns="4"]){--calcite-internal-action-group-columns:4}:host([columns="5"]){--calcite-internal-action-group-columns:5}:host([columns="6"]){--calcite-internal-action-group-columns:6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)), auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([hidden]){display:none}[hidden]{display:none}',oCe=rCe,aCe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.setMenuOpen=e=>{this.menuOpen=!!e.target.open},this.handleMenuActionsSlotChange=e=>{this.hasMenuActions=yn(e)},this.expanded=!1,this.label=void 0,this.layout="vertical",this.columns=void 0,this.menuOpen=!1,this.overlayPositioning="absolute",this.scale=void 0,this.menuFlipPlacements=void 0,this.menuPlacement=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0,this.hasMenuActions=!1}expandedHandler(){this.menuOpen=!1}onMessagesChange(){}effectiveLocaleChange(){Al(this,this.effectiveLocale)}async setFocus(){await Cr(this),this.el.focus()}connectedCallback(){Ca(this),kl(this),$v(this)}disconnectedCallback(){Pa(this),Dl(this),Rv(this)}async componentWillLoad(){Sr(this),await Ml(this)}componentDidLoad(){Er(this)}renderMenu(){const{expanded:e,menuOpen:i,scale:n,layout:s,messages:r,overlayPositioning:o,hasMenuActions:l,menuFlipPlacements:c,menuPlacement:f}=this;return Me("calcite-action-menu",{expanded:e,flipPlacements:c??(s==="horizontal"?["top","bottom"]:["left","right"]),hidden:!l,label:r.more,onCalciteActionMenuOpen:this.setMenuOpen,open:i,overlayPositioning:o,placement:f??(s==="horizontal"?"bottom-start":"leading-start"),scale:n},Me("calcite-action",{icon:nCe.menu,scale:n,slot:M2.trigger,text:r.more,textEnabled:e}),Me("slot",{name:A2.menuActions,onSlotchange:this.handleMenuActionsSlotChange}),Me("slot",{name:A2.menuTooltip,slot:M2.tooltip}))}render(){return Me("div",{key:"8143606c5745053f15140f34ff5ea375a683325f","aria-label":this.label,class:sCe.container,role:"group"},Me("slot",{key:"e8c2821b9ce2e9d0293478989fc31d24f043f9c3"}),this.renderMenu())}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return oCe}},[17,"calcite-action-group",{expanded:[516],label:[1],layout:[513],columns:[514],menuOpen:[1540,"menu-open"],overlayPositioning:[513,"overlay-positioning"],scale:[513],menuFlipPlacements:[16],menuPlacement:[513,"menu-placement"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],hasMenuActions:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Hq(){if(typeof customElements>"u")return;["calcite-action-group","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-group":customElements.get(e)||customElements.define(e,aCe);break;case"calcite-action":customElements.get(e)||Nf();break;case"calcite-action-menu":customElements.get(e)||gx();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break;case"calcite-popover":customElements.get(e)||Fv();break}})}Hq();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const lCe=2,YX=t=>t.reduce((e,i)=>e+i,0)/t.length,cCe=t=>{const e=t.filter(n=>n.slot!==A2.menuActions),i=e==null?void 0:e.length;return{actionWidth:i?YX(e.map(n=>n.clientWidth||0)):0,actionHeight:i?YX(e.map(n=>n.clientHeight||0)):0}},uCe=({width:t,actionWidth:e,layout:i,height:n,actionHeight:s,groupCount:r})=>{const o=i==="horizontal"?t:n,l=i==="horizontal"?e:s;return Math.floor((o-r*lCe)/l)},hCe=({layout:t,actionCount:e,actionWidth:i,width:n,actionHeight:s,height:r,groupCount:o})=>Math.max(e-uCe({width:n,actionWidth:i,layout:t,height:r,actionHeight:s,groupCount:o}),0),Uq=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===M2.trigger:!0),dCe=({actionGroups:t,expanded:e,overflowCount:i})=>{let n=i;t.reverse().forEach(s=>{let r=0;const o=Uq(s).reverse();o.forEach(l=>{l.slot===A2.menuActions&&(l.removeAttribute("slot"),l.textEnabled=e)}),n>0&&o.some(l=>(o.filter(f=>!f.slot).length>1&&o.length>2&&!l.closest("calcite-action-menu")&&(l.textEnabled=!0,l.setAttribute("slot",A2.menuActions),r++,r>1&&n--),n<1)),Mo(s)})},XX={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function fCe(t,e){var i;return t||((i=e.closest("calcite-shell-panel"))==null?void 0:i.position)||"start"}function zb({el:t,expanded:e}){Uq(t).filter(i=>i.slot!==A2.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const pCe=({tooltip:t,referenceElement:e,expanded:i,ref:n})=>(t&&(t.referenceElement=!i&&e?e:null),n&&n(e),e),Toe=({expanded:t,expandText:e,collapseText:i,expandLabel:n,collapseLabel:s,toggle:r,el:o,position:l,tooltip:c,ref:f,scale:y})=>{const _=Zp(o)==="rtl",x=t?i:e,S=t?s:n,P=[XX.chevronsLeft,XX.chevronsRight];_&&P.reverse();const A=fCe(l,o)==="end",D=A?P[1]:P[0],N=A?P[0]:P[1];return Me("calcite-action",{icon:t?D:N,id:"expand-toggle",label:S,onClick:r,ref:G=>pCe({tooltip:c,referenceElement:G,expanded:t,ref:f}),scale:y,text:x,textEnabled:t,title:!t&&!c?x:null})};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const WX={actionGroupEnd:"action-group--end",container:"container"},mCe={expandTooltip:"expand-tooltip"},gCe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:block}@keyframes in{0%{opacity:0}100%{opacity:1}}:host{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:var(--calcite-action-pad-corner-radius, 0.125rem);background:transparent}:host([expanded][layout=vertical]) .container{max-inline-size:var(--calcite-action-pad-expanded-max-width, auto)}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:1px}.container{display:inline-flex;flex-direction:column;overflow-y:auto;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);gap:var(--calcite-action-pad-items-space, 0);border-radius:calc(var(--calcite-action-pad-corner-radius, 0.125rem) * 2);background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}.action-group--bottom{flex-grow:1;justify-content:flex-end;padding-block-end:0px}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]) .container .action-group--bottom{padding:0px}:host([layout=horizontal]) .container ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:1px}:host([hidden]){display:none}[hidden]{display:none}",yCe=gCe,vCe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionPadToggle=Mt(this,"calciteActionPadToggle",6),this.mutationObserver=Ea("mutation",()=>this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")))),this.actionMenuOpenHandler=e=>{if(e.target.menuOpen){const i=e.composedPath();Array.from(this.el.querySelectorAll("calcite-action-group")).forEach(n=>{i.includes(n)||(n.menuOpen=!1)})}},this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionPadToggle.emit()},this.handleDefaultSlotChange=e=>{const i=nc(e).filter(n=>n==null?void 0:n.matches("calcite-action-group"));this.setGroupLayout(i)},this.handleTooltipSlotChange=e=>{const i=nc(e).filter(n=>n==null?void 0:n.matches("calcite-tooltip"));this.expandTooltip=i[0]},this.actionsEndGroupLabel=void 0,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.position=void 0,this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.overlayPositioning="absolute",this.expandTooltip=void 0,this.effectiveLocale="",this.defaultMessages=void 0}expandedHandler(e){zb({el:this.el,expanded:e})}layoutHandler(){this.updateGroups()}onMessagesChange(){}effectiveLocaleChange(){Al(this,this.effectiveLocale)}connectedCallback(){var e;$v(this),Ca(this),kl(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}disconnectedCallback(){var e;Pa(this),Dl(this),Rv(this),(e=this.mutationObserver)==null||e.disconnect()}async componentWillLoad(){Sr(this);const{el:e,expanded:i}=this;zb({el:e,expanded:i}),await Ml(this)}componentDidLoad(){Er(this)}async setFocus(){var e;await Cr(this),(e=this.el)==null||e.focus()}updateGroups(){this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")))}setGroupLayout(e){e.forEach(i=>i.layout=this.layout)}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,messages:n,el:s,position:r,toggleExpand:o,scale:l,layout:c,actionsEndGroupLabel:f,overlayPositioning:y}=this,_=i?null:Me(Toe,{collapseLabel:n.collapseLabel,collapseText:n.collapse,el:s,expandLabel:n.expandLabel,expandText:n.expand,expanded:e,position:r,scale:l,toggle:o,tooltip:this.expandTooltip});return _?Me("calcite-action-group",{class:WX.actionGroupEnd,label:f,layout:c,overlayPositioning:y,scale:l},Me("slot",{name:mCe.expandTooltip,onSlotchange:this.handleTooltipSlotChange}),_):null}render(){return Me(er,{key:"ca50c5f475d78b92b5347ab912727587420ceea5",onCalciteActionMenuOpen:this.actionMenuOpenHandler},Me("div",{key:"81b26e9b6bd0a04357fe00ef55111c6bb609f4e7",class:WX.container},Me("slot",{key:"e346dc6cfab0e26cfc694b43063715d7b845ae32",onSlotchange:this.handleDefaultSlotChange}),this.renderBottomActionGroup()))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return yCe}},[17,"calcite-action-pad",{actionsEndGroupLabel:[1,"actions-end-group-label"],expandDisabled:[516,"expand-disabled"],expanded:[1540],layout:[513],position:[513],scale:[513],messages:[1040],messageOverrides:[1040],overlayPositioning:[513,"overlay-positioning"],expandTooltip:[32],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function _Ce(){if(typeof customElements>"u")return;["calcite-action-pad","calcite-action","calcite-action-group","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-pad":customElements.get(e)||customElements.define(e,vCe);break;case"calcite-action":customElements.get(e)||Nf();break;case"calcite-action-group":customElements.get(e)||Hq();break;case"calcite-action-menu":customElements.get(e)||gx();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break;case"calcite-popover":customElements.get(e)||Fv();break}})}_Ce();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const bCe={actionGroupEnd:"action-group--end"},l8={actionsEnd:"actions-end",bottomActions:"bottom-actions",expandTooltip:"expand-tooltip"},xCe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{pointer-events:auto;display:inline-flex;align-self:stretch;gap:var(--calcite-action-bar-items-space, 0)}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]):host([overflow-actions-disabled]){overflow-y:auto}:host([layout=vertical]):host([expanded]){max-inline-size:var(--calcite-action-bar-expanded-max-width, auto)}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]):host([overflow-actions-disabled]){overflow-x:auto}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=horizontal]) ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:var(--calcite-border-width-sm)}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}",wCe=xCe,Ioe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionBarToggle=Mt(this,"calciteActionBarToggle",6),this.mutationObserver=Ea("mutation",()=>{const{el:e,expanded:i}=this;zb({el:e,expanded:i}),this.overflowActions()}),this.resizeObserver=Ea("resize",e=>this.resizeHandlerEntries(e)),this.actionMenuOpenHandler=e=>{if(e.target.menuOpen){const i=e.composedPath();Array.from(this.el.querySelectorAll("calcite-action-group")).forEach(n=>{i.includes(n)||(n.menuOpen=!1)})}},this.resizeHandlerEntries=e=>{e.forEach(this.resizeHandler)},this.resizeHandler=e=>{const{width:i,height:n}=e.contentRect;this.resize({width:i,height:n})},this.resize=Jre(({width:e,height:i})=>{const{el:n,expanded:s,expandDisabled:r,layout:o,overflowActionsDisabled:l}=this;if(l||o==="vertical"&&!i||o==="horizontal"&&!e)return;const c=Uq(n),f=r?c.length:c.length+1,y=Array.from(n.querySelectorAll("calcite-action-group"));this.setGroupLayout(y);const _=this.hasActionsEnd||this.hasBottomActions||!r?y.length+1:y.length,{actionHeight:x,actionWidth:S}=cCe(c),P=hCe({layout:o,actionCount:f,actionHeight:x,actionWidth:S,height:i,width:e,groupCount:_});dCe({actionGroups:y,expanded:s,overflowCount:P})},kO.resize),this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.handleDefaultSlotChange=e=>{const i=nc(e).filter(n=>n.matches("calcite-action-group"));this.setGroupLayout(i)},this.handleActionsEndSlotChange=e=>{this.hasActionsEnd=yn(e)},this.handleBottomActionsSlotChange=e=>{this.hasBottomActions=yn(e)},this.handleTooltipSlotChange=e=>{const i=nc(e).filter(n=>n==null?void 0:n.matches("calcite-tooltip"));this.expandTooltip=i[0]},this.actionsEndGroupLabel=void 0,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.overflowActionsDisabled=!1,this.overlayPositioning="absolute",this.position=void 0,this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale=void 0,this.hasActionsEnd=!1,this.hasBottomActions=!1,this.expandTooltip=void 0,this.defaultMessages=void 0}expandHandler(){this.overflowActions()}expandedHandler(){const{el:e,expanded:i}=this;zb({el:e,expanded:i}),this.overflowActions()}layoutHandler(){this.updateGroups()}overflowDisabledHandler(e){var i,n;if(e){(i=this.resizeObserver)==null||i.disconnect();return}(n=this.resizeObserver)==null||n.observe(this.el),this.overflowActions()}onMessagesChange(){}effectiveLocaleChange(){Al(this,this.effectiveLocale)}componentDidLoad(){const{el:e,expanded:i}=this;Er(this),zb({el:e,expanded:i}),this.overflowActions()}connectedCallback(){var n,s;const{el:e,expanded:i}=this;Ca(this),kl(this),zb({el:e,expanded:i}),(n=this.mutationObserver)==null||n.observe(e,{childList:!0,subtree:!0}),this.overflowActionsDisabled||(s=this.resizeObserver)==null||s.observe(e),this.overflowActions(),$v(this)}async componentWillLoad(){Sr(this),await Ml(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),Rv(this),Pa(this),Dl(this)}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(){await Cr(this),IC(this.el)}updateGroups(){this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")))}setGroupLayout(e){e.forEach(i=>i.layout=this.layout)}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,el:n,position:s,toggleExpand:r,scale:o,layout:l,messages:c,actionsEndGroupLabel:f,overlayPositioning:y}=this,_=i?null:Me(Toe,{collapseLabel:c.collapseLabel,collapseText:c.collapse,el:n,expandLabel:c.expandLabel,expandText:c.expand,expanded:e,position:s,scale:o,toggle:r,tooltip:this.expandTooltip});return Me("calcite-action-group",{class:bCe.actionGroupEnd,hidden:this.expandDisabled&&!(this.hasActionsEnd||this.hasBottomActions),label:f,layout:l,overlayPositioning:y,scale:o},Me("slot",{name:l8.actionsEnd,onSlotchange:this.handleActionsEndSlotChange}),Me("slot",{name:l8.bottomActions,onSlotchange:this.handleBottomActionsSlotChange}),Me("slot",{name:l8.expandTooltip,onSlotchange:this.handleTooltipSlotChange}),_)}render(){return Me(er,{key:"ff6e365531a0ed2032864bb0777910c3932e9c6b",onCalciteActionMenuOpen:this.actionMenuOpenHandler},Me("slot",{key:"f12b2f455752a62ee32b65224bed385940135a49",onSlotchange:this.handleDefaultSlotChange}),this.renderBottomActionGroup())}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expandDisabled:["expandHandler"],expanded:["expandedHandler"],layout:["layoutHandler"],overflowActionsDisabled:["overflowDisabledHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return wCe}},[1,"calcite-action-bar",{actionsEndGroupLabel:[1,"actions-end-group-label"],expandDisabled:[516,"expand-disabled"],expanded:[1540],layout:[513],overflowActionsDisabled:[516,"overflow-actions-disabled"],overlayPositioning:[513,"overlay-positioning"],position:[513],scale:[513],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],hasActionsEnd:[32],hasBottomActions:[32],expandTooltip:[32],defaultMessages:[32],overflowActions:[64],setFocus:[64]},void 0,{expandDisabled:["expandHandler"],expanded:["expandedHandler"],layout:["layoutHandler"],overflowActionsDisabled:["overflowDisabledHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Moe(){if(typeof customElements>"u")return;["calcite-action-bar","calcite-action","calcite-action-group","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-bar":customElements.get(e)||customElements.define(e,Ioe);break;case"calcite-action":customElements.get(e)||Nf();break;case"calcite-action-group":customElements.get(e)||Hq();break;case"calcite-action-menu":customElements.get(e)||gx();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break;case"calcite-popover":customElements.get(e)||Fv();break}})}Moe();const SCe=Ioe,ECe=Moe,Mut=Object.freeze(Object.defineProperty({__proto__:null,CalciteActionBar:SCe,defineCustomElement:ECe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const CCe={container:"container"},PCe=300,TCe=500,ZX="aria-describedby";function Aoe(t){const{referenceElement:e}=t;return(typeof e=="string"?TC(t,{id:e}):e)||null}class ICe{constructor(){this.registeredElements=new WeakMap,this.registeredShadowRootCounts=new WeakMap,this.hoverOpenTimeout=null,this.hoverCloseTimeout=null,this.activeTooltip=null,this.registeredElementCount=0,this.clickedTooltip=null,this.queryTooltip=e=>{const{registeredElements:i}=this,n=e.find(s=>i.has(s));return i.get(n)},this.keyDownHandler=e=>{if(e.key==="Escape"&&!e.defaultPrevented){const{activeTooltip:i}=this;if(i!=null&&i.open){this.clearHoverTimeout(),this.closeActiveTooltip();const n=Aoe(i);n instanceof Element&&n.contains(e.target)&&e.preventDefault()}}},this.pointerMoveHandler=e=>{const i=e.composedPath(),{activeTooltip:n}=this,s=this.queryTooltip(i);if(this.pathHasOpenTooltip(s,i)){this.clearHoverTimeout();return}s!==this.clickedTooltip&&(s?this.openHoveredTooltip(s):n!=null&&n.open&&this.closeHoveredTooltip(),this.clickedTooltip=null)},this.clickHandler=e=>{this.clickedTooltip=null;const i=e.composedPath(),n=this.queryTooltip(i);if(this.pathHasOpenTooltip(n,i)){this.clearHoverTimeout();return}if(this.closeActiveTooltip(),!!n){if(this.clearHoverTimeout(),n.closeOnClick){this.clickedTooltip=n,this.toggleTooltip(n,!1);return}this.toggleTooltip(n,!0)}},this.blurHandler=()=>{this.closeActiveTooltip()},this.focusInHandler=e=>{const i=e.composedPath(),n=this.queryTooltip(i);if(this.pathHasOpenTooltip(n,i)){this.clearHoverTimeout();return}this.closeTooltipIfNotActive(n),n&&this.toggleFocusedTooltip(n,!0)},this.openHoveredTooltip=e=>{var i;this.hoverOpenTimeout=window.setTimeout(()=>{this.hoverOpenTimeout!==null&&(this.clearHoverCloseTimeout(),this.closeTooltipIfNotActive(e),this.toggleTooltip(e,!0))},(i=this.activeTooltip)!=null&&i.open?0:PCe)},this.closeHoveredTooltip=()=>{this.hoverCloseTimeout=window.setTimeout(()=>{this.hoverCloseTimeout!==null&&this.closeActiveTooltip()},TCe)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i);const n=this.getReferenceElShadowRootNode(e);n&&this.registerShadowRoot(n),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){const i=this.getReferenceElShadowRootNode(e);i&&this.unregisterShadowRoot(i),this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}pathHasOpenTooltip(e,i){const{activeTooltip:n}=this;return(n==null?void 0:n.open)&&i.includes(n)||(e==null?void 0:e.open)&&i.includes(e)}addShadowListeners(e){e.addEventListener("focusin",this.focusInHandler,{capture:!0})}removeShadowListeners(e){e.removeEventListener("focusin",this.focusInHandler,{capture:!0})}addListeners(){window.addEventListener("keydown",this.keyDownHandler,{capture:!0}),window.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.addEventListener("click",this.clickHandler,{capture:!0}),window.addEventListener("focusin",this.focusInHandler,{capture:!0}),window.addEventListener("blur",this.blurHandler)}removeListeners(){window.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),window.removeEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.removeEventListener("click",this.clickHandler,{capture:!0}),window.removeEventListener("focusin",this.focusInHandler,{capture:!0}),window.removeEventListener("blur",this.blurHandler)}clearHoverOpenTimeout(){window.clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null}clearHoverCloseTimeout(){window.clearTimeout(this.hoverCloseTimeout),this.hoverCloseTimeout=null}clearHoverTimeout(){this.clearHoverOpenTimeout(),this.clearHoverCloseTimeout()}closeTooltipIfNotActive(e){this.activeTooltip!==e&&this.closeActiveTooltip()}closeActiveTooltip(){const{activeTooltip:e}=this;e!=null&&e.open&&this.toggleTooltip(e,!1)}toggleFocusedTooltip(e,i){i&&this.clearHoverTimeout(),this.toggleTooltip(e,i)}toggleTooltip(e,i){e.open=i,this.activeTooltip=i?e:null}registerShadowRoot(e){const{registeredShadowRootCounts:i}=this,n=i.get(e),s=Math.min((typeof n=="number"?n:0)+1,1);s===1&&this.addShadowListeners(e),i.set(e,s)}unregisterShadowRoot(e){const{registeredShadowRootCounts:i}=this,n=i.get(e),s=Math.max((typeof n=="number"?n:1)-1,0);s===0&&this.removeShadowListeners(e),i.set(e,s)}getReferenceElShadowRootNode(e){return e instanceof Element?j2e(e):null}}const MCe=":host{--calcite-floating-ui-z-index:var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{inset-block-start:-5px}:host([data-placement^=top]) .calcite-floating-ui-anim{inset-block-start:5px}:host([data-placement^=left]) .calcite-floating-ui-anim{left:5px}:host([data-placement^=right]) .calcite-floating-ui-anim{left:-5px}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;border-radius:0.25rem;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);max-inline-size:20rem;max-block-size:20rem;text-align:start}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}:host([hidden]){display:none}[hidden]{display:none}",ACe=MCe,KX=new ICe,koe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTooltipBeforeClose=Mt(this,"calciteTooltipBeforeClose",6),this.calciteTooltipClose=Mt(this,"calciteTooltipClose",6),this.calciteTooltipBeforeOpen=Mt(this,"calciteTooltipBeforeOpen",6),this.calciteTooltipOpen=Mt(this,"calciteTooltipOpen",6),this.guid=`calcite-tooltip-${mm()}`,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=Aoe(this.el),Fb(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:n,effectiveReferenceElement:s}=this;e&&n&&!s&&console.warn(`${i.tagName}: reference-element id "${n}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(ZX,i),KX.registerElement(e,this.el)},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&e.removeAttribute(ZX),KX.unregisterElement(e))},this.closeOnClick=!1,this.label=void 0,this.offsetDistance=foe,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.referenceElement=void 0,this.effectiveReferenceElement=void 0,this.floatingLayout="vertical"}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){Bu(this),this.reposition(!0)}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement()}connectedCallback(){this.setUpReferenceElement(!0),this.open&&Bu(this)}async componentWillLoad(){this.open&&Bu(this)}componentDidLoad(){this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement()}disconnectedCallback(){this.removeReferences(),RM(this,this.effectiveReferenceElement,this.el)}async reposition(e=!1){const{el:i,effectiveReferenceElement:n,placement:s,overlayPositioning:r,offsetDistance:o,offsetSkidding:l,arrowEl:c}=this;return jq(this,{floatingEl:i,referenceEl:n,overlayPositioning:r,placement:s,offsetDistance:o,offsetSkidding:l,arrowEl:c,type:"tooltip"},e)}onBeforeOpen(){this.calciteTooltipBeforeOpen.emit()}onOpen(){this.calciteTooltipOpen.emit()}onBeforeClose(){this.calciteTooltipBeforeClose.emit()}onClose(){this.calciteTooltipClose.emit()}render(){const{effectiveReferenceElement:e,label:i,open:n,floatingLayout:s}=this,r=e&&n,o=!r;return Me(er,{key:"4f097fd8c6eda6dfcd5734e5aaea1f52092501e7","aria-hidden":xr(o),"aria-label":i,"aria-live":"polite","calcite-hydrated-hidden":o,id:this.getId(),role:"tooltip"},Me("div",{key:"6b5055ab6f95277dd4daeaaff15cb9848d85eea0",class:{[I2.animation]:!0,[I2.animationActive]:r},ref:this.setTransitionEl},Me(goe,{key:"57f68bea5a7bb369d82437f10535cab9753677ea",floatingLayout:s,ref:l=>this.arrowEl=l}),Me("div",{key:"100b8318173849508952f996acaeb5bf81b8af43",class:CCe.container},Me("slot",{key:"f89d3ae9313d9555e6a7acdc32c323de85319a3a"}))))}get el(){return this}static get watchers(){return{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}}static get style(){return ACe}},[1,"calcite-tooltip",{closeOnClick:[516,"close-on-click"],label:[1],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[516],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],effectiveReferenceElement:[32],floatingLayout:[32],reposition:[64]},void 0,{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}]);function Doe(){if(typeof customElements>"u")return;["calcite-tooltip"].forEach(e=>{switch(e){case"calcite-tooltip":customElements.get(e)||customElements.define(e,koe);break}})}Doe();const kCe=koe,DCe=Doe,NCe=Object.freeze(Object.defineProperty({__proto__:null,CalciteTooltip:kCe,defineCustomElement:DCe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const OCe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline}:host a,:host span{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0px;border-style:none;font-family:inherit;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none}:host a:hover,:host span:hover{text-decoration:none}:host a,:host span{outline-color:transparent}:host a:focus,:host span:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;margin-block-start:-0.25em}:host .calcite-link--icon.icon-start{margin-inline-end:0.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:0.5rem}:host span,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0px;color:var(--calcite-color-text-link);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor, currentColor), linear-gradient(var(--calcite-color-brand-underline), var(--calcite-color-brand-underline));background-position-x:0%, 100%;background-position-y:min(1.5em, 100%);background-repeat:no-repeat, no-repeat;background-size:0% 1px, 100% 1px}:host span:hover,:host span:focus,:host a:hover,:host a:focus{background-size:100% 1px, 100% 1px}:host span:active,:host a:active{background-size:100% 2px, 100% 2px}:host span.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%, 100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,$Ce=OCe,RCe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childElClickHandler=e=>{e.isTrusted||e.stopPropagation()},this.storeTagRef=e=>{this.childEl=e},this.disabled=!1,this.download=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.rel=void 0,this.target=void 0}componentWillLoad(){Sr(this)}componentDidLoad(){Er(this)}componentDidRender(){gd(this)}render(){const{download:e,el:i}=this,n=Zp(i),s=this.href?"a":"span",r=Me("calcite-icon",{key:"c9844033e9bd5da35333b485aad27ddb2df6b039",class:"calcite-link--icon icon-start",flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:"s"}),o=Me("calcite-icon",{key:"f1de10682fee566552253cf2ae3cb6725f5e5f11",class:"calcite-link--icon icon-end",flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:"s"}),l=s,c=s==="span"?"link":null,f=s==="span"?0:null;return Me(er,{key:"5ad440468fcccb6fe7c146ec57462e7593f96109",role:"presentation"},Me(yd,{key:"916c68cd97c31fa1ec69f408d25d3023749698e1",disabled:this.disabled},Me(l,{key:"e00cebc0c56b95c02192872ac84df996a74a5fa4",class:{[Zl.rtl]:n==="rtl"},download:s==="a"?e===!0||e===""?"":e||null:null,href:s==="a"&&this.href,onClick:this.childElClickHandler,ref:this.storeTagRef,rel:s==="a"&&this.rel,role:c,tabIndex:f,target:s==="a"&&this.target},this.iconStart?r:null,Me("slot",{key:"57b25ff3b8f7f3d048796a559c2911178d6b8ddf"}),this.iconEnd?o:null)))}clickHandler(e){this.disabled||e.isTrusted||this.childEl.click()}async setFocus(){await Cr(this),tm(this.childEl)}get el(){return this}static get style(){return $Ce}},[1,"calcite-link",{disabled:[516],download:[520],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],rel:[1],target:[1],setFocus:[64]},[[0,"click","clickHandler"]]]);function LCe(){if(typeof customElements>"u")return;["calcite-link","calcite-icon"].forEach(e=>{switch(e){case"calcite-link":customElements.get(e)||customElements.define(e,RCe);break;case"calcite-icon":customElements.get(e)||Pr();break}})}LCe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Noe(t){return(t==null?void 0:t.tagName)==="CALCITE-TREE-ITEM"}function FCe(t){return Array.from(t.querySelectorAll("calcite-tree-item:not([disabled])")).filter(e=>{let i=e;for(;i!==t&&i!==void 0;){const n=i.parentElement;if(!(!Noe(n)||!n.hasChildren||n.expanded))return!1;i=i.parentElement}return!0})}const zCe=":host{display:block}:host(:focus){outline:2px solid transparent;outline-offset:2px}:host([hidden]){display:none}[hidden]{display:none}",qCe=zCe,VCe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTreeSelect=Mt(this,"calciteTreeSelect",6),this.keyDownHandler=e=>{if(this.child)return;const i=this.el,n=e.target,s=["ArrowRight","ArrowDown","ArrowLeft","ArrowUp","Home","End","Tab"];if(!(Noe(n)&&this.el.contains(n))||!s.includes(e.key))return;const r=FCe(i);if(e.key==="Tab"){r.forEach(o=>o.tabIndex=-1);return}if(e.key==="ArrowDown"){const o=r.indexOf(n),l=r[o+1];l==null||l.focus(),e.preventDefault();return}if(e.key==="ArrowUp"){const o=r.indexOf(n),l=r[o-1];l==null||l.focus(),e.preventDefault();return}if(e.key==="ArrowLeft"){if(n.hasChildren&&n.expanded){n.expanded=!1,e.preventDefault();return}const l=r.slice(0,r.indexOf(n)).reverse().find(c=>c.depth===n.depth-1);l==null||l.focus(),e.preventDefault();return}if(e.key==="ArrowRight"){if(!n.disabled&&n.hasChildren)if(!n.expanded)n.expanded=!0,e.preventDefault();else{const o=r.indexOf(n),l=r[o+1];l==null||l.focus(),e.preventDefault()}return}if(e.key==="Home"){const o=r.shift();o&&(o.focus(),e.preventDefault());return}if(e.key==="End"){const o=r.pop();o&&(o.focus(),e.preventDefault());return}},this.lines=!1,this.child=void 0,this.scale="m",this.selectionMode="single",this.selectedItems=[]}componentWillRender(){var i;const e=(i=this.el.parentElement)==null?void 0:i.closest("calcite-tree");this.lines=e?e.lines:this.lines,this.scale=e?e.scale:this.scale,this.selectionMode=e?e.selectionMode:this.selectionMode,this.child=!!e}render(){return Me(er,{key:"5b08de1c59622b78985de9019bf4ba11d605a07f","aria-multiselectable":this.child?void 0:xr(this.selectionMode==="multiple"||this.selectionMode==="multichildren"),onKeyDown:this.keyDownHandler,role:this.child?void 0:"tree",tabIndex:this.getRootTabIndex()},Me("slot",{key:"00a037cf92cb5facadc4b2961a9369b6ae0631f5"}))}onFocus(){if(!this.child){const e=this.el.querySelector("calcite-tree-item[selected]:not([disabled])")||this.el.querySelector("calcite-tree-item:not([disabled])");tm(e)}}onFocusIn(e){(e.relatedTarget===this.el||!this.el.contains(e.relatedTarget))&&this.el.removeAttribute("tabindex")}onFocusOut(e){!this.el.contains(e.relatedTarget)&&(this.el.tabIndex=this.getRootTabIndex())}onInternalTreeItemSelect(e){if(this.child)return;const i=e.target,n=Bw(i.querySelectorAll("calcite-tree-item"));if(e.preventDefault(),e.stopPropagation(),this.selectionMode==="ancestors"){this.updateAncestorTree(e);return}const s=this.selectionMode==="none",r=this.selectionMode!==null&&(!i.hasChildren||i.hasChildren&&(this.selectionMode==="children"||this.selectionMode==="multichildren")),o=this.selectionMode==="multichildren"&&i.hasChildren,l=!s&&e.detail.modifyCurrentSelection&&(this.selectionMode==="multiple"||this.selectionMode==="multichildren"),c=!l&&((this.selectionMode==="single"||this.selectionMode==="multiple")&&n.length<=0||this.selectionMode==="children"||this.selectionMode==="multichildren"||this.selectionMode==="single-persist"&&!i.hasChildren),f=["multiple","none","single","single-persist"].includes(this.selectionMode)&&i.hasChildren,y=[];r&&y.push(i),c&&Bw(this.el.querySelectorAll("calcite-tree-item[selected]")).forEach(x=>{y.includes(x)||(x.selected=!1)}),f&&["multiple","none","single","single-persist"].includes(this.selectionMode)&&(i.expanded=!i.expanded),o&&n.forEach(_=>{_.selected=!1,_.hasChildren&&(_.expanded=!1)}),l&&window.getSelection().removeAllRanges(),l&&i.selected?y.forEach(_=>{_.disabled||(_.selected=!1)}):s||y.forEach(_=>{_.disabled||(_.selected=this.selectionMode!=="single"||!_.selected)}),this.selectedItems=s?[]:Bw(this.el.querySelectorAll("calcite-tree-item")).filter(_=>_.selected),this.calciteTreeSelect.emit(),e.stopPropagation()}updateAncestorTree(e){const i=e.target,n=e.detail.updateItem;if(i.disabled||i.indeterminate&&!n)return;const s=[];let r=i.parentElement.closest("calcite-tree-item");for(;r;)s.push(r),r=r.parentElement.closest("calcite-tree-item");const o=Array.from(i.querySelectorAll("calcite-tree-item:not([disabled])")),l=o.filter(_=>!_.hasChildren),c=o.filter(_=>_.hasChildren);let f;n?f=i.hasChildren?!(i.selected||i.indeterminate):!i.selected:f=i.selected,l.forEach(_=>{_.selected=f,_.indeterminate=!1});function y(_,x){const S=_.filter(A=>A.selected),P=_.filter(A=>!A.selected);x.selected=S.length===_.length,x.indeterminate=S.length>0&&P.length>0}c.reverse().forEach(_=>{const x=Array.from(_.querySelectorAll(":scope > calcite-tree > calcite-tree-item"));y(x,_)}),n&&(i.hasChildren?y(o,i):(i.selected=f,i.indeterminate=!1)),s.forEach(_=>{const x=Bw(_.querySelectorAll("calcite-tree-item")),S=x.filter(A=>A.selected);if(S.length===0){_.selected=!1,_.indeterminate=!1;return}const P=S.length<x.length;_.indeterminate=P,_.selected=!P}),this.selectedItems=Bw(this.el.querySelectorAll("calcite-tree-item")).filter(_=>_.selected),n&&this.calciteTreeSelect.emit()}getRootTabIndex(){return this.child?-1:0}get el(){return this}static get style(){return qCe}},[1,"calcite-tree",{lines:[1540],child:[1540],scale:[1537],selectionMode:[1537,"selection-mode"],selectedItems:[1040]},[[0,"focus","onFocus"],[0,"focusin","onFocusIn"],[0,"focusout","onFocusOut"],[0,"calciteInternalTreeItemSelect","onInternalTreeItemSelect"]]]);function GCe(){if(typeof customElements>"u")return;["calcite-tree"].forEach(e=>{switch(e){case"calcite-tree":customElements.get(e)||customElements.define(e,VCe);break}})}GCe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const hu={actionsEnd:"actions-end",bulletPointIcon:"bullet-point",checkbox:"checkbox",checkboxContainer:"checkbox-container",checkboxLabel:"checkbox-label",checkmarkIcon:"checkmark",chevron:"chevron",childrenContainer:"children-container",iconStart:"icon-start",itemExpanded:"item--expanded",nodeAndActionsContainer:"node-actions-container",nodeContainer:"node-container"},c8={actionsEnd:"actions-end",children:"children"},lp={blank:"blank",bulletPoint:"bullet-point",checkmark:"check",checkSquareF:"check-square-f",chevronRight:"chevron-right",minusSquareF:"minus-square-f",square:"square"},jCe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;max-inline-size:100%;cursor:pointer;color:var(--calcite-color-text-3)}.node-actions-container{display:flex}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .node-actions-container{min-block-size:1.5rem}:host([scale=s]) .node-actions-container .node-container .checkbox,:host([scale=s]) .node-actions-container .node-container .checkmark,:host([scale=s]) .node-actions-container .node-container .bullet-point{margin-inline:0.25rem}:host([scale=s]) .node-actions-container .node-container .icon-start{margin-inline:0.75rem}:host([scale=s]) .node-actions-container .node-container .chevron{padding:0.25rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .node-actions-container{min-block-size:2rem}:host([scale=m]) .node-actions-container .node-container .checkbox,:host([scale=m]) .node-actions-container .node-container .checkmark,:host([scale=m]) .node-actions-container .node-container .bullet-point{margin-inline:0.5rem}:host([scale=m]) .node-actions-container .node-container .icon-start{margin-inline:0.75rem}:host([scale=m]) .node-actions-container .node-container .chevron{padding:0.5rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .node-actions-container{min-block-size:2.75rem}:host([scale=l]) .node-actions-container .node-container .checkbox,:host([scale=l]) .node-actions-container .node-container .checkmark,:host([scale=l]) .node-actions-container .node-container .bullet-point{margin-inline:0.75rem}:host([scale=l]) .node-actions-container .node-container .icon-start{margin-inline:0.75rem}:host([scale=l]) .node-actions-container .node-container .chevron{padding-inline:var(--calcite-size-md);padding-block:var(--calcite-size-sm-plus)}:host([lines]) .children-container::after{position:absolute;inset-block-start:0px;z-index:var(--calcite-z-index);inline-size:1px;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;block-size:96%;content:"";background-color:var(--calcite-color-border-2)}:host(:not([lines])) .node-container::after{display:none}::slotted(*){min-inline-size:0px;max-inline-size:100%;overflow-wrap:break-word;color:inherit;text-decoration:none !important}::slotted(*):hover{text-decoration:none !important}::slotted(a){inline-size:100%;text-decoration-line:none}:host{outline:2px solid transparent;outline-offset:2px}:host .node-container{outline-color:transparent}:host:focus .node-container,:host:active .node-container{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus:not([disabled])) .node-container{outline:2px solid transparent;outline-offset:2px;outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus:not([disabled])) .checkbox{outline:2px solid transparent;outline-offset:2px}.actions-end{display:flex;flex-direction:row;align-items:center;align-self:stretch}.checkbox-container{display:flex;align-items:center}.checkbox{line-height:0;color:var(--calcite-color-border-input)}.checkbox-label{pointer-events:none;display:flex;align-items:center}.children-container{position:relative;block-size:0px;transform-origin:top;overflow:hidden;opacity:0;margin-inline-start:1.25rem;transform:scaleY(0);transition:var(--calcite-animation-timing) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-animation-timing) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out}.item--expanded>.children-container{overflow:visible;opacity:1;transform:none;block-size:auto}.node-container{position:relative;display:flex;min-inline-size:0px;flex-grow:1;align-items:center}.node-container .checkmark,.node-container .bullet-point{opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;color:var(--calcite-color-border-1)}.node-container:hover .checkmark,.node-container:hover .bullet-point,:host([selected]) .node-container:hover .checkmark,:host([selected]) .node-container:hover .bullet-point,:host(:focus:not([disabled])) .node-container .checkmark,:host(:focus:not([disabled])) .node-container .bullet-point{opacity:1}:host([selected]) .node-container,:host([selected]) .node-container:hover{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}:host([selected]) .node-container .bullet-point,:host([selected]) .node-container .checkmark,:host([selected]) .node-container:hover .bullet-point,:host([selected]) .node-container:hover .checkmark{opacity:1;color:var(--calcite-color-brand)}:host([selection-mode=none]:not([has-children])):host([scale=s]) .node-container{padding-inline-start:0.5rem}:host([selection-mode=none]:not([has-children])):host([scale=m]) .node-container{padding-inline-start:1rem}:host([selection-mode=none]:not([has-children])):host([scale=l]) .node-container{padding-inline-start:1.5rem}:host(:not([has-children])):host([scale=s]) .node-container[data-selection-mode=ancestors] .checkbox{padding-inline-start:1.25rem}:host(:not([has-children])):host([scale=m]) .node-container[data-selection-mode=ancestors] .checkbox{padding-inline-start:1.5rem}:host(:not([has-children])):host([scale=l]) .node-container[data-selection-mode=ancestors] .checkbox{padding-inline-start:1.75rem}:host([has-children]) .node-container[data-selection-mode=ancestors] .checkbox{margin-inline-start:0}:host([has-children]) .node-container .bullet-point,:host([has-children]) .node-container .checkmark{display:none}.chevron{position:relative;align-self:center;color:var(--calcite-color-text-3);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;flex:0 0 auto;transform:rotate(0deg)}.calcite--rtl .chevron{transform:rotate(180deg)}.item--expanded .node-container>.chevron{transform:rotate(90deg)}:host([selected]) .checkmark,:host([selected]) .bullet-point{color:var(--calcite-color-brand)}:host([selected]) .checkbox{color:var(--calcite-color-brand)}:host([has-children][indeterminate]) .checkbox{color:var(--calcite-color-brand)}:host([hidden]){display:none}[hidden]{display:none}`,BCe=jCe,HCe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalTreeItemSelect=Mt(this,"calciteInternalTreeItemSelect",6),this.iconClickHandler=e=>{e.stopPropagation(),this.expanded=!this.expanded},this.childrenClickHandler=e=>e.stopPropagation(),this.userChangedValue=!1,this.updateParentIsExpanded=(e,i)=>{kq(e,c8.children,{all:!0,selector:"calcite-tree-item"}).forEach(s=>s.parentExpanded=i)},this.actionsEndSlotChangeHandler=e=>{this.hasEndActions=yn(e)},this.disabled=!1,this.label=void 0,this.expanded=!1,this.iconFlipRtl=void 0,this.iconStart=void 0,this.selected=!1,this.parentExpanded=!1,this.depth=-1,this.hasChildren=null,this.lines=void 0,this.scale=void 0,this.indeterminate=!1,this.selectionMode=void 0,this.hasEndActions=!1,this.updateAfterInitialRender=!1}expandedHandler(e){this.updateParentIsExpanded(this.el,e)}handleSelectedChange(e){this.selectionMode==="ancestors"&&!this.userChangedValue&&(e&&(this.indeterminate=!1),this.calciteInternalTreeItemSelect.emit({modifyCurrentSelection:!0,updateItem:!1}))}getSelectionMode(){this.isSelectionMultiLike=this.selectionMode==="multiple"||this.selectionMode==="multichildren"}connectedCallback(){var e;if(this.parentTreeItem=(e=this.el.parentElement)==null?void 0:e.closest("calcite-tree-item"),this.parentTreeItem){const{expanded:i}=this.parentTreeItem;this.updateParentIsExpanded(this.parentTreeItem,i)}$v(this)}disconnectedCallback(){Rv(this)}componentWillRender(){var n;this.hasChildren=!!this.el.querySelector("calcite-tree"),this.depth=0;let e=this.el.closest("calcite-tree");if(!e)return;this.selectionMode=e.selectionMode,this.scale=e.scale||"m",this.lines=e.lines;let i;for(;e&&(i=(n=e.parentElement)==null?void 0:n.closest("calcite-tree"),i!==e);)e=i,this.depth=this.depth+1}componentWillLoad(){requestAnimationFrame(()=>this.updateAfterInitialRender=!0)}componentDidLoad(){this.updateAncestorTree()}componentDidRender(){gd(this)}render(){const e=Zp(this.el)==="rtl",i=this.selectionMode==="single"||this.selectionMode==="children"||this.selectionMode==="single-persist",n=this.selectionMode==="multiple"||this.selectionMode==="multichildren",s=this.selectionMode==="none"&&!this.hasChildren,r=this.hasChildren&&this.indeterminate,o=this.hasChildren?Me("calcite-icon",{class:{[hu.chevron]:!0,[Zl.rtl]:e},"data-test-id":"icon",icon:lp.chevronRight,onClick:this.iconClickHandler,scale:Yo(this.scale)}):null,l=Me("slot",{key:"default-slot"}),c=this.selectionMode==="ancestors"?Me("div",{class:hu.checkboxContainer},Me("calcite-icon",{class:hu.checkbox,icon:this.selected?lp.checkSquareF:r?lp.minusSquareF:lp.square,scale:Yo(this.scale)}),Me("label",{class:hu.checkboxLabel},l)):null,f=i?lp.bulletPoint:n?lp.checkmark:s?lp.blank:null,y=f?Me("calcite-icon",{class:{[hu.bulletPointIcon]:f===lp.bulletPoint,[hu.checkmarkIcon]:f===lp.checkmark,[Zl.rtl]:e},icon:f,scale:Yo(this.scale)}):null,_=!(this.parentExpanded||this.depth===1),x=this.updateAfterInitialRender&&this.expanded,{hasEndActions:S}=this,P=Me("slot",{key:"actionsEndSlot",name:c8.actionsEnd,onSlotchange:this.actionsEndSlotChangeHandler}),A=Me("calcite-icon",{key:"251fd8b4ef328e3575268a914b823282d5810b3b",class:hu.iconStart,flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:Yo(this.scale)});return Me(er,{key:"9ca6542ef823f536919ef45e249a51acc560e5cd","aria-checked":this.selectionMode==="multiple"||this.selectionMode==="multichildren"||this.selectionMode==="ancestors"?xr(this.selected):void 0,"aria-expanded":this.hasChildren?xr(x):void 0,"aria-hidden":xr(_),"aria-live":"polite","aria-selected":this.selectionMode==="single"||this.selectionMode==="children"||this.selectionMode==="single-persist"?xr(this.selected):void 0,"calcite-hydrated-hidden":_,role:"treeitem",tabIndex:this.disabled?-1:0},Me(yd,{key:"b87535cef45f25a3d962f2ee7a2fe23030c09626",disabled:this.disabled},Me("div",{key:"2a4f1e4a647c80ef1d027b795814a03dd933db37",class:{[hu.itemExpanded]:x}},Me("div",{key:"716fc1eac97264fe3186a0beee9e173415f93b83",class:hu.nodeAndActionsContainer},Me("div",{key:"286db32250f9978cab481314b2ea3e790248c7f2",class:{[hu.nodeContainer]:!0,[Zl.rtl]:e},"data-selection-mode":this.selectionMode},o,y,this.iconStart?A:null,c||l),Me("div",{key:"2e1eeefae879f7197b5292ecda3b1f831f673efb",class:hu.actionsEnd,hidden:!S,ref:D=>this.actionSlotWrapper=D},P)),Me("div",{key:"1cb705ab7da1422b2a956ea90e29b489909840f3",class:{[hu.childrenContainer]:!0,[Zl.rtl]:e},"data-test-id":"calcite-tree-children",onClick:this.childrenClickHandler,role:this.hasChildren?"group":void 0},Me("slot",{key:"e3c968c15f50af07cafd3c3a67746455472e6b6f",name:c8.children})))))}onClick(e){if(this.disabled||this.isActionEndEvent(e))return;const[i]=Z2e(this.el,"a");if(i&&e.composedPath()[0].tagName.toLowerCase()!=="a"){const n=i.target===""?"_self":i.target;window.open(i.href,n)}this.calciteInternalTreeItemSelect.emit({modifyCurrentSelection:this.selectionMode==="ancestors"||this.isSelectionMultiLike,updateItem:!0}),this.userChangedValue=!0}keyDownHandler(e){if(!(this.isActionEndEvent(e)||e.defaultPrevented))switch(e.key){case" ":this.userChangedValue=!0,this.calciteInternalTreeItemSelect.emit({modifyCurrentSelection:this.isSelectionMultiLike,updateItem:!0}),e.preventDefault();break;case"Enter":{const i=Array.from(this.el.children).find(n=>n.matches("a"));this.userChangedValue=!0,i?(i.click(),this.selected=!0):this.calciteInternalTreeItemSelect.emit({modifyCurrentSelection:this.isSelectionMultiLike,updateItem:!0}),e.preventDefault()}}}isActionEndEvent(e){return e.composedPath().includes(this.actionSlotWrapper)}updateAncestorTree(){const e=this.parentTreeItem;if(!(this.selectionMode!=="ancestors"||!e)){if(this.selected){const i=this.el.parentElement,n=Array.from(i==null?void 0:i.children),s=n.filter(o=>o.selected);n.length===s.length?(e.selected=!0,e.indeterminate=!1):s.length>0&&(e.indeterminate=!0),Array.from(this.el.querySelectorAll("calcite-tree-item:not([disabled])")).forEach(o=>{o.selected=!0,o.indeterminate=!1})}else if(this.indeterminate){const i=this.parentTreeItem;i.indeterminate=!0}}}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],selected:["handleSelectedChange"],selectionMode:["getSelectionMode"]}}static get style(){return BCe}},[1,"calcite-tree-item",{disabled:[516],label:[1],expanded:[1540],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],selected:[1540],parentExpanded:[4,"parent-expanded"],depth:[1538],hasChildren:[1540,"has-children"],lines:[1540],scale:[1537],indeterminate:[1540],selectionMode:[1537,"selection-mode"],hasEndActions:[32],updateAfterInitialRender:[32]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"]],{expanded:["expandedHandler"],selected:["handleSelectedChange"],selectionMode:["getSelectionMode"]}]);function UCe(){if(typeof customElements>"u")return;["calcite-tree-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-tree-item":customElements.get(e)||customElements.define(e,HCe);break;case"calcite-icon":customElements.get(e)||Pr();break}})}UCe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const YCe={button:"button"},XCe={plus:"plus"},WCe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;background-color:transparent}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}calcite-button{--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}calcite-button:hover{--tw-shadow:var(--calcite-shadow-md);--tw-shadow-colored:var(--calcite-shadow-md);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}calcite-button:active{--tw-shadow:0 2px 12px -4px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.16);--tw-shadow-colored:0 2px 12px -4px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([hidden]){display:none}[hidden]{display:none}",ZCe=WCe,KCe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.appearance="solid",this.kind="brand",this.disabled=!1,this.icon=XCe.plus,this.iconFlipRtl=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1}componentWillLoad(){Sr(this)}componentDidLoad(){Er(this)}componentDidRender(){gd(this)}async setFocus(){await Cr(this),tm(this.buttonEl)}render(){const{appearance:e,kind:i,disabled:n,loading:s,scale:r,textEnabled:o,icon:l,label:c,text:f,iconFlipRtl:y}=this,_=o?null:c||f||null;return Me(yd,{key:"7953bd06defeddfed5530500901609524f7b58fd",disabled:n},Me("calcite-button",{key:"c2bbe2be5e2ac375abab75024005f1eb5afed51c",appearance:e==="solid"?"solid":"outline-fill",class:YCe.button,disabled:n,iconFlipRtl:y?"start":null,iconStart:l,kind:i,label:c,loading:s,ref:x=>{this.buttonEl=x},round:!0,scale:r,title:_,type:"button",width:"auto"},this.textEnabled?this.text:null))}get el(){return this}static get style(){return ZCe}},[1,"calcite-fab",{appearance:[513],kind:[513],disabled:[516],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],setFocus:[64]}]);function JCe(){if(typeof customElements>"u")return;["calcite-fab","calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-fab":customElements.get(e)||customElements.define(e,KCe);break;case"calcite-button":customElements.get(e)||Lq();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break}})}JCe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const u8={container:"container",dividerContainer:"divider-container",divider:"divider"},QCe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([kind=brand]){--calcite-internal-split-button-background:var(--calcite-color-brand);--calcite-internal-split-button-divider:var(--calcite-color-foreground-1)}:host([kind=danger]){--calcite-internal-split-button-background:var(--calcite-color-status-danger);--calcite-internal-split-button-divider:var(--calcite-color-foreground-1)}:host([kind=neutral]){--calcite-internal-split-button-background:var(--calcite-color-foreground-3);--calcite-internal-split-button-divider:var(--calcite-color-text-1)}:host([kind=inverse]){--calcite-internal-split-button-background:var(--calcite-color-inverse);--calcite-internal-split-button-divider:var(--calcite-color-foreground-1)}:host([appearance=transparent]){--calcite-internal-split-button-background:transparent}:host([appearance=transparent]):host([kind=brand]){--calcite-internal-split-button-divider:var(--calcite-color-brand)}:host([appearance=transparent]):host([kind=danger]){--calcite-internal-split-button-divider:var(--calcite-color-status-danger)}:host([appearance=transparent]):host([kind=neutral]){--calcite-internal-split-button-divider:var(--calcite-color-text-1)}:host([appearance=transparent]):host([kind=inverse]){--calcite-internal-split-button-divider:var(--calcite-color-foreground-1)}:host([appearance=outline]):host([kind=brand]),:host([appearance=outline]):host([kind=danger]),:host([appearance=outline]):host([kind=neutral]),:host([appearance=outline]):host([kind=inverse]){--calcite-internal-split-button-background:transparent}:host([appearance=outline-fill]):host([kind=brand]),:host([appearance=outline-fill]):host([kind=danger]),:host([appearance=outline-fill]):host([kind=neutral]),:host([appearance=outline-fill]):host([kind=inverse]){--calcite-internal-split-button-background:var(--calcite-color-background)}:host([appearance=outline]):host([kind=brand]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-split-button-divider:var(--calcite-color-brand)}:host([appearance=outline]):host([kind=danger]),:host([appearance=outline-fill]):host([kind=danger]){--calcite-internal-split-button-divider:var(--calcite-color-status-danger)}:host([appearance=outline]):host([kind=neutral]),:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-split-button-divider:var(--calcite-color-border-1)}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=inverse]){--calcite-internal-split-button-divider:var(--calcite-color-inverse)}.container{display:flex;align-items:stretch}.container>calcite-dropdown>calcite-button{block-size:100%;vertical-align:top}.divider-container{display:flex;inline-size:1px;align-items:stretch;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:var(--calcite-internal-split-button-background)}.divider{margin-block:0.25rem;display:inline-block;inline-size:1px;background-color:var(--calcite-internal-split-button-divider)}:host([appearance=outline-fill]) .divider-container,:host([appearance=outline]) .divider-container{border-block:1px solid var(--calcite-internal-split-button-divider)}:host([appearance=outline-fill]):hover .divider-container,:host([appearance=outline]):hover .divider-container{background-color:var(--calcite-internal-split-button-divider)}:host([appearance=outline-fill]:hover) .divider-container,:host([appearance=outline]:hover) .divider-container{background-color:var(--calcite-internal-split-button-divider)}:host([appearance=outline-fill]:focus-within):host([kind=brand]),:host([appearance=outline]:focus-within):host([kind=brand]){--calcite-internal-split-button-divider:var(--calcite-color-brand-press)}:host([appearance=outline-fill]:focus-within):host([kind=danger]),:host([appearance=outline]:focus-within):host([kind=danger]){--calcite-internal-split-button-divider:var(--calcite-color-status-danger-press)}:host([appearance=outline-fill]:focus-within) .divider-container,:host([appearance=outline]:focus-within) .divider-container{background-color:var(--calcite-internal-split-button-divider)}:host([disabled]) calcite-dropdown>calcite-button{pointer-events:none}:host([disabled]):host([appearance=outline-fill]) .divider-container{background-color:var(--calcite-color-background)}:host([disabled]):host([appearance=outline]) .divider-container{background-color:transparent}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}",e5e=QCe,t5e=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSplitButtonPrimaryClick=Mt(this,"calciteSplitButtonPrimaryClick",6),this.calciteSplitButtonSecondaryClick=Mt(this,"calciteSplitButtonSecondaryClick",6),this.calciteSplitButtonPrimaryClickHandler=()=>this.calciteSplitButtonPrimaryClick.emit(),this.calciteSplitButtonSecondaryClickHandler=()=>this.calciteSplitButtonSecondaryClick.emit(),this.appearance="solid",this.kind="brand",this.disabled=!1,this.active=!1,this.dropdownIconType="chevron",this.dropdownLabel=void 0,this.flipPlacements=void 0,this.loading=!1,this.overlayPositioning="absolute",this.placement="bottom-end",this.primaryIconEnd=void 0,this.primaryIconFlipRtl=void 0,this.primaryIconStart=void 0,this.primaryLabel=void 0,this.primaryText=void 0,this.scale="m",this.width="auto"}handleDisabledChange(e){e||(this.active=!1)}activeHandler(){this.disabled&&(this.active=!1)}async setFocus(){await Cr(this),this.el.focus()}componentWillLoad(){Sr(this)}componentDidLoad(){Er(this)}componentDidRender(){gd(this)}render(){const e=this.width==="auto"?"auto":"full";return Me(yd,{key:"dacdf1583d8cb4551cb4882b8508c558d782b4d4",disabled:this.disabled},Me("div",{key:"a61c78ee84cd89d78a7d2c9479917838ed410c16",class:u8.container},Me("calcite-button",{key:"f70e6b5aa7457c7d51093be9a0033c28134b7a1f",appearance:this.appearance,disabled:this.disabled,"icon-end":this.primaryIconEnd?this.primaryIconEnd:null,"icon-start":this.primaryIconStart?this.primaryIconStart:null,iconFlipRtl:this.primaryIconFlipRtl?this.primaryIconFlipRtl:null,kind:this.kind,label:this.primaryLabel,loading:this.loading,onClick:this.calciteSplitButtonPrimaryClickHandler,scale:this.scale,splitChild:"primary",type:"button",width:e},this.primaryText),Me("div",{key:"6a666aff420b7aee2d413ac298a8cf7c743b63fe",class:u8.dividerContainer},Me("div",{key:"34e4ea2b452fb53d5503d0cc03b8d8644e08f8a3",class:u8.divider})),Me("calcite-dropdown",{key:"44dfd708df7c0e961259ffca36e181306043e64f",disabled:this.disabled,flipPlacements:this.flipPlacements,onClick:this.calciteSplitButtonSecondaryClickHandler,open:this.active,overlayPositioning:this.overlayPositioning,placement:this.placement,scale:this.scale,"width-scale":this.scale},Me("calcite-button",{key:"4f746ce80d07518b03ae4602bd2417f369aacba3",appearance:this.appearance,disabled:this.disabled,"icon-start":this.dropdownIcon,kind:this.kind,label:this.dropdownLabel,scale:this.scale,slot:"trigger",splitChild:"secondary",type:"button"}),Me("slot",{key:"80aa3fefc8d08c1a6e222a88f2e873cbcc209f1a"}))))}get dropdownIcon(){return this.dropdownIconType==="chevron"?"chevronDown":this.dropdownIconType==="caret"?"caretDown":this.dropdownIconType==="ellipsis"?"ellipsis":"handle-vertical"}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{disabled:["handleDisabledChange"],active:["activeHandler"]}}static get style(){return e5e}},[17,"calcite-split-button",{appearance:[513],kind:[513],disabled:[516],active:[1540],dropdownIconType:[513,"dropdown-icon-type"],dropdownLabel:[513,"dropdown-label"],flipPlacements:[16],loading:[516],overlayPositioning:[513,"overlay-positioning"],placement:[513],primaryIconEnd:[513,"primary-icon-end"],primaryIconFlipRtl:[513,"primary-icon-flip-rtl"],primaryIconStart:[513,"primary-icon-start"],primaryLabel:[513,"primary-label"],primaryText:[513,"primary-text"],scale:[513],width:[513],setFocus:[64]},void 0,{disabled:["handleDisabledChange"],active:["activeHandler"]}]);function i5e(){if(typeof customElements>"u")return;["calcite-split-button","calcite-button","calcite-dropdown","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-split-button":customElements.get(e)||customElements.define(e,t5e);break;case"calcite-button":customElements.get(e)||Lq();break;case"calcite-dropdown":customElements.get(e)||woe();break;case"calcite-icon":customElements.get(e)||Pr();break;case"calcite-loader":customElements.get(e)||Nl();break}})}i5e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const JO={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Xw={title:"title",message:"message",link:"link",actionsEnd:"actions-end"},Ww={actionsEnd:"actions-end",close:"notice-close",container:"container",content:"notice-content",icon:"notice-icon"},n5e=`:host([scale=s]){--calcite-notice-spacing-token-small:0.5rem;--calcite-notice-spacing-token-large:0.75rem}:host([scale=s]) .container slot[name=title]::slotted(*),:host([scale=s]) .container *::slotted([slot=title]){margin-block:0.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) .container slot[name=message]::slotted(*),:host([scale=s]) .container *::slotted([slot=message]){margin-block:0.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) ::slotted(calcite-link){margin-block:0.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .notice-close{padding:0.5rem}:host([scale=m]){--calcite-notice-spacing-token-small:0.75rem;--calcite-notice-spacing-token-large:1rem}:host([scale=m]) .container slot[name=title]::slotted(*),:host([scale=m]) .container *::slotted([slot=title]){margin-block:0.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) .container slot[name=message]::slotted(*),:host([scale=m]) .container *::slotted([slot=message]){margin-block:0.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) ::slotted(calcite-link){margin-block:0.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=l]){--calcite-notice-spacing-token-small:1rem;--calcite-notice-spacing-token-large:1.25rem}:host([scale=l]) .container slot[name=title]::slotted(*),:host([scale=l]) .container *::slotted([slot=title]){margin-block:0.125rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) .container slot[name=message]::slotted(*),:host([scale=l]) .container *::slotted([slot=message]){margin-block:0.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) ::slotted(calcite-link){margin-block:0.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([width=auto]){--calcite-notice-width:auto}:host([width=half]){--calcite-notice-width:50%}:host([width=full]){--calcite-notice-width:100%}:host{margin-inline:auto;display:none;max-inline-size:100%;align-items:center;inline-size:var(--calcite-notice-width)}.container{pointer-events:none;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;background-color:var(--calcite-color-foreground-1);opacity:0;overflow:hidden;max-block-size:0;transition-property:opacity, max-block-size;transition-duration:var(--calcite-animation-timing);text-align:start;border-inline-start:var(--calcite-border-width-md) solid;box-shadow:0 0 0 0 transparent}.notice-close{outline-color:transparent}.notice-close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host{display:flex}:host([open]) .container{pointer-events:auto;max-block-size:100%;align-items:center;opacity:1;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);overflow:visible}.container slot[name=title]::slotted(*),.container *::slotted([slot=title]){margin:0px;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.container slot[name=message]::slotted(*),.container *::slotted([slot=message]){margin:0px;display:inline;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2);margin-inline-end:var(--calcite-notice-spacing-token-small)}.notice-content{box-sizing:border-box;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;display:flex;min-inline-size:0px;flex-direction:column;overflow-wrap:break-word;flex:1 1 0;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:0 var(--calcite-notice-spacing-token-small)}.notice-content:first-of-type:not(:only-child){padding-inline-start:var(--calcite-notice-spacing-token-large)}.notice-content:only-of-type{padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large)}.notice-icon{display:flex;align-items:center;box-sizing:border-box;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto}.notice-close{display:flex;cursor:pointer;align-items:center;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;box-sizing:border-box;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;-webkit-appearance:none}.notice-close:hover,.notice-close:focus{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1)}.notice-close:active{background-color:var(--calcite-color-foreground-3)}.actions-end{display:flex;align-self:stretch}:host([kind=brand]) .container{border-color:var(--calcite-color-brand)}:host([kind=brand]) .container .notice-icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-color:var(--calcite-color-status-info)}:host([kind=info]) .container .notice-icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .notice-icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-color:var(--calcite-color-status-success)}:host([kind=success]) .container .notice-icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .notice-icon{color:var(--calcite-color-status-warning)}:host([hidden]){display:none}[hidden]{display:none}`,s5e=n5e,Ooe=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteNoticeBeforeClose=Mt(this,"calciteNoticeBeforeClose",6),this.calciteNoticeBeforeOpen=Mt(this,"calciteNoticeBeforeOpen",6),this.calciteNoticeClose=Mt(this,"calciteNoticeClose",6),this.calciteNoticeOpen=Mt(this,"calciteNoticeOpen",6),this.setTransitionEl=e=>{this.transitionEl=e},this.close=()=>{this.open=!1},this.openTransitionProp="opacity",this.open=!1,this.kind="brand",this.closable=!1,this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.width="auto",this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale=void 0,this.defaultMessages=void 0}openHandler(){Bu(this)}onMessagesChange(){}updateRequestedIcon(){this.requestedIcon=FO(JO,this.icon,this.kind)}connectedCallback(){$v(this),Ca(this),kl(this)}disconnectedCallback(){Rv(this),Pa(this),Dl(this)}async componentWillLoad(){Sr(this),this.requestedIcon=FO(JO,this.icon,this.kind),await Ml(this),this.open&&Bu(this)}componentDidLoad(){Er(this)}render(){const{el:e}=this,i=Me("button",{key:"52f9306ebe945398929f68fe66615359836ba2d8","aria-label":this.messages.close,class:Ww.close,onClick:this.close,ref:s=>this.closeButton=s},Me("calcite-icon",{key:"f3601ac9547c73219661eebc7e7470db5dee7b52",icon:"x",scale:Yo(this.scale)})),n=kq(e,Xw.actionsEnd);return Me("div",{key:"3f8117ff7cdd08c92ce804ef4ac8af83003156a4",class:Ww.container,ref:this.setTransitionEl},this.requestedIcon?Me("div",{class:Ww.icon},Me("calcite-icon",{flipRtl:this.iconFlipRtl,icon:this.requestedIcon,scale:Yo(this.scale)})):null,Me("div",{key:"1b614ee86618bd5ce6e8834b466baf7d2564b5a1",class:Ww.content},Me("slot",{key:"19467ed9718a78c7530c2a08c727028d565dee7b",name:Xw.title}),Me("slot",{key:"191e71caf2f2147c62fd6b73602e41d95dc27558",name:Xw.message}),Me("slot",{key:"d4fbf2b8aaa980cd24c5be89c6c8a36d091658f3",name:Xw.link})),n?Me("div",{class:Ww.actionsEnd},Me("slot",{name:Xw.actionsEnd})):null,this.closable?i:null)}async setFocus(){await Cr(this);const e=this.el.querySelector("calcite-link");if(!(!this.closeButton&&!e)){if(e)return e.setFocus();this.closeButton&&this.closeButton.focus()}}onBeforeClose(){this.calciteNoticeBeforeClose.emit()}onBeforeOpen(){this.calciteNoticeBeforeOpen.emit()}onClose(){this.calciteNoticeClose.emit()}onOpen(){this.calciteNoticeOpen.emit()}effectiveLocaleChange(){Al(this,this.effectiveLocale)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{open:["openHandler"],messageOverrides:["onMessagesChange"],icon:["updateRequestedIcon"],kind:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return s5e}},[1,"calcite-notice",{open:[1540],kind:[513],closable:[516],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],width:[513],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{open:["openHandler"],messageOverrides:["onMessagesChange"],icon:["updateRequestedIcon"],kind:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}]);function $oe(){if(typeof customElements>"u")return;["calcite-notice","calcite-icon"].forEach(e=>{switch(e){case"calcite-notice":customElements.get(e)||customElements.define(e,Ooe);break;case"calcite-icon":customElements.get(e)||Pr();break}})}$oe();const r5e=Ooe,o5e=$oe,a5e=Object.freeze(Object.defineProperty({__proto__:null,CalciteNotice:r5e,defineCustomElement:o5e},Symbol.toStringTag,{value:"Module"}));var Ol=typeof window<"u"&&"$arcgis"in window&&typeof window.$arcgis=="object"&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function $l(t){return t.default!==void 0}async function l5e(){if(Ol)return await window.$arcgis.import("esri/core/Accessor");const t=await st(()=>Promise.resolve().then(()=>AIe),void 0,import.meta.url);return $l(t)?t.default:t}async function c5e(){if(Ol)return await window.$arcgis.import("esri/layers/GraphicsLayer");const t=await st(()=>Promise.resolve().then(()=>OHe),void 0,import.meta.url);return $l(t)?t.default:t}async function u5e(t){const e=await c5e();return new e(t)}async function h5e(){if(Ol)return await window.$arcgis.import("esri/views/MapView");const t=await st(()=>import("./MapView-CmUlEZ03.js").then(e=>e.H),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]),import.meta.url);return $l(t)?t.default:t}async function d5e(t){const e=await h5e();return new e(t)}async function f5e(){if(Ol)return await window.$arcgis.import("esri/WebMap");const t=await st(()=>import("./WebMap-D2uMPYG2.js").then(e=>e.W),__vite__mapDeps([31,1,2,3,4,5,32,33,14,15,34]),import.meta.url);return $l(t)?t.default:t}async function p5e(t){const e=await f5e();return new e(t)}async function m5e(){if(Ol)return await window.$arcgis.import("esri/widgets/AreaMeasurement2D");const t=await st(()=>import("./AreaMeasurement2D-Drl29pUh.js"),__vite__mapDeps([35,36,37,38,39,40,41,42,43,44]),import.meta.url);return $l(t)?t.default:t}async function g5e(t){const e=await m5e();return new e(t)}async function y5e(){if(Ol)return await window.$arcgis.import("esri/widgets/BasemapGallery");const t=await st(()=>import("./BasemapGallery-e5cXOMtD.js"),__vite__mapDeps([45,5,2,6,7,46,29]),import.meta.url);return $l(t)?t.default:t}async function v5e(t){const e=await y5e();return new e(t)}async function _5e(){if(Ol)return await window.$arcgis.import("esri/widgets/DistanceMeasurement2D");const t=await st(()=>import("./DistanceMeasurement2D-Br8wF9if.js"),__vite__mapDeps([47,36,37,38,39,40,41,42,43,44]),import.meta.url);return $l(t)?t.default:t}async function b5e(t){const e=await _5e();return new e(t)}async function x5e(){if(Ol)return await window.$arcgis.import("esri/widgets/Editor");const t=await st(()=>import("./Editor-B_S23SkV.js"),__vite__mapDeps([48,49,38,39,50,51,52,2,53,46,3,4,54,55,56,8,57,58,59,16,60,61,62,63,64,65,66]),import.meta.url);return $l(t)?t.default:t}async function w5e(t){const e=await x5e();return new e(t)}async function S5e(){if(Ol)return await window.$arcgis.import("esri/widgets/Expand");const t=await st(()=>import("./Expand-BLhbVxTy.js"),[],import.meta.url);return $l(t)?t.default:t}async function E5e(t){const e=await S5e();return new e(t)}async function C5e(){if(Ol)return await window.$arcgis.import("esri/widgets/LayerList");const t=await st(()=>import("./LayerList-3It43YGN.js").then(e=>e.L),__vite__mapDeps([67,8,4,68]),import.meta.url);return $l(t)?t.default:t}async function P5e(t){const e=await C5e();return new e(t)}async function T5e(){if(Ol)return await window.$arcgis.import("esri/widgets/Legend");const t=await st(()=>import("./Legend-CZSo0KCY.js"),__vite__mapDeps([69,70,71,72,73,74,75,76,77,59,57,58,16,60,61,78,52,2,46,29]),import.meta.url);return $l(t)?t.default:t}async function I5e(t){const e=await T5e();return new e(t)}async function M5e(){if(Ol)return await window.$arcgis.import("esri/widgets/Search");const t=await st(()=>import("./Search-Daruwa-k.js"),__vite__mapDeps([79,80,73,14,81,33,15,30,29,53]),import.meta.url);return $l(t)?t.default:t}async function A5e(t){const e=await M5e();return new e(t)}async function k5e(){if(Ol)return await window.$arcgis.import("esri/widgets/Sketch");const t=await st(()=>Promise.resolve().then(()=>OJe),void 0,import.meta.url);return $l(t)?t.default:t}async function D5e(t){const e=await k5e();return new e(t)}async function N5e(){if(Ol)return await window.$arcgis.import("esri/core/accessorSupport/decorators");const t=await st(()=>import("./decorators-CDhQote8.js"),[],import.meta.url);return $l(t)?t.default:t}async function Roe(){if(Ol)return await window.$arcgis.import("esri/core/reactiveUtils");const t=await st(()=>Promise.resolve().then(()=>$7e),void 0,import.meta.url);return $l(t)?t.default:t}var QO=class{resolve(t){}reject(t){}constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};function or(t,e,...i){try{return t==null?void 0:t.call(e,...i)}catch(n){console.error(n,t)}}async function L9(t,e,...i){try{const n=t==null?void 0:t.call(e,...i);return n instanceof Promise?await n:n}catch(n){console.error(n,t)}}var O5e=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Set(O5e);var $5e=t=>t.replace(R5e,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),R5e=/[A-Z]+(?![a-z])|[A-Z]/gu;function L5e(t,e){const i=e/F5e;let n=0;const s=setInterval(()=>{n+=i,n>=e&&(clearInterval(s),t())},i);return s}var F5e=4;function Loe(t){return t!==void 0}/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */function z5e(t,e){var i;if(e){const n=t.constructor.elementProperties;t.manager.internals.members=Object.fromEntries(Array.from(n,([s,r])=>r.noAccessor?void 0:[s,[(r.readOnly?2048:0)|(r.state?32:16)]]).filter(Loe))}else{const n=t.constructor,s=((i=n.__registerControllers)==null?void 0:i.call(n,t))??void 0;if(n.__registerControllers=void 0,typeof s!="object")throw new Error("Failed to retrieve component meta");t.manager.internals.members=Object.fromEntries(Object.entries(s).filter(([r,[o]])=>(o&63)!==0))}}function q5e(t,e=8){return t==null||typeof t=="object"||typeof t=="function"?t:(e&4)!==0?t==="false"?!1:t===""||!!t:(e&2)!==0?Number.parseFloat(t):(e&1)!==0?String(t):t}var Foe=(t,e)=>{var i,n;return(n=(i=t.manager.internals.members)==null?void 0:i[e])==null?void 0:n[0]},Yq=Symbol.for("controller"),V5e=t=>typeof t=="object"&&t!==null&&(Yq in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),C3;function qb(t){C3!==t&&(C3=t,queueMicrotask(()=>{C3===t&&(C3=void 0)}))}function LM(t){return C3}var V1=[];function Xq(t){if(t===void 0){V1=[];return}const e=V1.indexOf(t);V1=e===-1?[...V1,t]:V1.slice(0,e+1),queueMicrotask(()=>{V1=[]})}function G5e(){return V1}var Vb;function j5e(t){Vb!==t&&(Vb=t,queueMicrotask(()=>{Vb===t&&(Vb=void 0)}))}function B5e(){const t=Vb;return Vb=void 0,t}var H5e=async(t,e)=>{const i=Wq(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const n=i.watchExports(s=>e(s,n))}return i.exports},U5e=async t=>{const e=Wq(t);return await e.ready,e},Wq=t=>{const e=B5e();if(e!==void 0)return e;const n=LM().manager.internals.resolveExports(t);if(n!==void 0)return n;if(V5e(t))return t},Kp={setter:!1,getter:!1,readOnly:!1},F9=new WeakMap,zoe;zoe=Yq;var Zq=class{constructor(t){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new QO,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[zoe]=!0,this.ready=this._ready.promise,this._exports=QX(this),this._exportWatchers=new Set;const e=t??LM();this.component=e,this.component.addController(this),Xq(this),this.component.manager===void 0||queueMicrotask(()=>this.catchUpLifecycle())}catchUpLifecycle(){const{manager:t}=this.component;t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),t._loadCalled&&this.triggerLoad().then(()=>{t.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(t){const e=this._exports;e!==t&&(this._exports=t,this._exportWatchers.forEach(or),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,e)),this._ready.resolve(t)}setProvisionalExports(t){this._exports=QX(t),this._exportWatchers.forEach(or)}watchExports(t){const e=()=>t(this._exports);return this._exportWatchers.add(e),()=>void this._exportWatchers.delete(e)}get use(){return qb(this.component),H5e}get useRef(){return qb(this.component),U5e}get useRefSync(){return qb(this.component),Wq}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){this._callbacks.hostConnected.push(t)}onDisconnected(t){this._callbacks.hostDisconnected.push(t)}onLoad(t){this._callbacks.hostLoad.push(t)}onLoaded(t){this._callbacks.hostLoaded.push(t)}onUpdate(t){this._callbacks.hostUpdate.push(t)}onUpdated(t){this._callbacks.hostUpdated.push(t)}onDestroy(t){this._callbacks.hostDestroy.push(t)}onLifecycle(t){this._callbacks.hostLifecycle.push(t),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(t)}triggerConnected(){const t=this;t.hostConnected&&or(t.hostConnected,t),this._callbacks.hostConnected.forEach(or),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&or(t.hostDisconnected,t),this._callbacks.hostDisconnected.forEach(or),this._lifecycleCleanups.forEach(or),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const t=this;t.hostLoad&&await L9(t.hostLoad,t),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(L9)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const t=this;t.hostLoaded&&or(t.hostLoaded,t),this._callbacks.hostLoaded.forEach(or),this.loadedCalled=!0}triggerUpdate(t){const e=this;e.hostUpdate&&or(e.hostUpdate,e,t),this._callbacks.hostUpdate.forEach(JX,t)}triggerUpdated(t){const e=this;e.hostUpdated&&or(e.hostUpdated,e,t),this._callbacks.hostUpdated.forEach(JX,t)}triggerDestroy(){const t=this;t.hostDestroy&&or(t.hostDestroy,t),this._callbacks.hostDestroy.forEach(or)}triggerLifecycle(){const t=this;t.hostLifecycle&&this._callLifecycle(()=>t.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(t){qb(this.component);const e=or(t);(Array.isArray(e)?e:[e]).forEach(n=>{typeof n=="function"?this._lifecycleCleanups.push(n):typeof n=="object"&&typeof n.remove=="function"&&this._lifecycleCleanups.push(n.remove)})}};function JX(t){or(t,void 0,this)}var qoe=Zq;function QX(t){if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e=new Proxy(t,{get(i,n,s){if(!(Y5e.has(n)&&n in i&&i[n]===e)&&(n in i||n in Promise.prototype||typeof n=="symbol"))return typeof i=="function"?i[n]:Reflect.get(i,n,s)},set:(i,n,s,r)=>Reflect.set(i,n,s,r)});return e}var Y5e=new Set(["exports","_exports"]);function X5e(t,e,i){const n=Object.keys(t),s=n.length;Hp===void 0&&queueMicrotask(Voe),Hp??(Hp=new Map);let r=Hp.get(t);return r===void 0&&(r={callbacks:[],keyCount:s},Hp.set(t,r)),r.keyCount!==s&&(r.callbacks.forEach(o=>o(n)),r.callbacks=[],r.keyCount=s),r.callbacks.push(o=>{const l=f=>or(e,null,f),c=o[s];c===void 0?l(void 0):t[c]===i?l(c):l(void 0)}),i}var Hp=void 0;function Voe(){Array.from((Hp==null?void 0:Hp.entries())??[]).forEach(([t,{callbacks:e}])=>{const i=Object.keys(t);e.forEach(n=>n(i))}),Hp=void 0}function t2(t,e,i){var n;const s=e,r=t.manager.internals;(n=r.allWatchers)[s]??(n[s]=[]);const o=r.allWatchers[s],l=i,c=(f,y,_)=>or(l,null,f,y,_);return o.push(c),()=>{const f=o.indexOf(c);f!==-1&&o.splice(f,1)}}var W5e=class{constructor(t){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const e=this.component.manager.internals;Object.entries(e.members).forEach(([i,[n]])=>{var s;n&2048&&((s=e.setters)[i]??(s[i]=[]),e.setters[i].push(e.readonlySetter))})},this.trackedValue=e$,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this.reactiveUtilsIntegrations=new Set,this._exports=new WeakMap,this.readonlySetter=(e,i,n)=>{if(Kp.readOnly)return e;throw new Error(`Cannot assign to read-only property "${n}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(e)}"`)},this.component=t}firePropTrackers(t,e){const i=this.keyTrackers;this.trackedValue=e$,this.keyTrackers=[],i.forEach(n=>n(t,e))}getSetProxy(t){const e=this.component,i=e.constructor.prototype;if(this._getSetProxy(i,t,"class"),e.manager.isLit)return;const n=e.el.constructor.prototype;i!==n&&this._getSetProxy(n,t,"html")}_getSetProxy(t,e,i){const n=this.component,s=Foe(n,e);let r;do r=Object.getOwnPropertyDescriptor(t,e);while(!r&&(t=Object.getPrototypeOf(t)));if(!r)return;const o=r.get,l=r.set,c=l4 in o,f=l4 in l;if(c&&f)return;const y=!c,_=!f,x=y?function(){let A=o.call(this);const D=F9.get(this);if(Kp.getter||D===void 0)return A;const N=D.manager.internals;A=N.accessorGetter[e](A,e);const F=N.getters[e]??h8;for(let G=0;G<F.length;G++)A=F[G](A,e);return A}:o,S=_?function(A){var V;const D=o.call(this),N=F9.get(this);if(N===void 0){l.call(this,A);return}let F=N.manager.isLit?A??void 0:q5e(A,s);const G=N.manager.internals;if(F===D)l.call(this,F);else{const B=Kp.setter?h8:G.setters[e]??h8;for(let W=0;W<B.length&&(F=B[W](F,D,e),F!==D);W++);F=G.accessorSetter[e](F,D,e),l.call(this,F),F!==D&&((V=G.enabledWatchers[e])==null||V.forEach(W=>W(F,D,e)))}G.keyTrackers.length>0&&(G==null||G.firePropTrackers(e,A))}:l;y&&(x[l4]=!0),_&&(S[l4]=!0),Object.defineProperty(t,e,{...r,get:x,set:S})}markExports(t,e){(typeof e=="object"&&e!==null||typeof e=="function")&&this._exports.set(e,t)}resolveExports(t){if(typeof t=="object"&&t!==null||typeof t=="function")return this._exports.get(t)}},h8=[],l4=Symbol(),e$=Symbol(),Of=(t,e)=>new Z5e(t,e),Z5e=class extends qoe{constructor(t,e){const i="addController"in t,n=new Set;function s(c){var f;n.add(c),!(Yq in c)&&t.renderRoot&&t.el.isConnected&&((f=c.hostConnected)==null||f.call(c))}function r(c){var f;n.delete(c),(f=c.controllerRemoved)==null||f.call(c)}const o=t;if(o.addController=s,o.removeController=r,!i){const c=e??t.constructor.__forceUpdate;o.requestUpdate=()=>c(t)}super(t),this.internals=new W5e(this.component),this.destroyed=!1,this._updatePromise=new QO,this._originalLifecycles={},this.isLit=i,this.component.manager=this,z5e(t,i),this._controllers=n,this.exports=void 0,this.hasDestroy=d8 in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const l=this.internals;Object.keys(l.members).forEach(c=>{l.accessorGetter[c]=LS,l.accessorSetter[c]=LS,l.getSetProxy(c)}),i?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(t,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(l.enableReadonly),Xq(void 0),qb(t),F9.set(t.el,t),F9.set(t,t)}_bindLifecycleMethods(){const t=this.component,e=this.isLit,i=t.el===t;this._originalLifecycles={_connectedCallback:e||i?void 0:t.connectedCallback,_disconnectedCallback:e||i?void 0:t.disconnectedCallback,_load:e?t.load:t.componentWillLoad,_loaded:e?t.loaded:t.componentDidLoad,_willUpdate:e?void 0:t.componentWillUpdate,_updated:e?void 0:t.componentDidUpdate,_destroy:t.destroy};const n=this._connectedCallback.bind(this),s=this._disconnectedCallback.bind(this),r=this._update.bind(this),o=this._updated.bind(this);e?t.constructor.prototype.addController.call(t,{hostConnected:n,hostDisconnected:s,hostUpdate:r,hostUpdated:o}):(t.connectedCallback=n,t.disconnectedCallback=s,t.componentWillLoad=this._load.bind(this),t.componentDidLoad=this._loaded.bind(this),t.componentWillUpdate=r,t.componentDidUpdate=o),this.hasDestroy&&(t.destroy=this.destroy.bind(this))}_connectedCallback(){var e,i;if(this.destroyed){const n=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${n} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${d8} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const t=this.internals;t.enabledWatchers=t.allWatchers,Voe(),(e=t.enableReadonly)==null||e.call(t),this._controllers.forEach(J5e),(i=this._originalLifecycles._connectedCallback)==null||i.call(this.component)}_disconnectedCallback(){var t;this.destroyed||(this._controllers.forEach(Q5e),(t=this._originalLifecycles._disconnectedCallback)==null||t.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;const t=this.internals.reactiveUtilsIntegrations;if(t.size>0)for(const i of t)"triggerLoad"in i?await i.triggerLoad():await L9(i.hostLoad,i);await Promise.allSettled(Array.from(this._controllers,ePe,t)),await((e=this._originalLifecycles._load)==null?void 0:e.call(this.component)),this.hasDestroy&&t2(this.component,d8,()=>this._setAutoDestroyTimeout())}_loaded(){var t;this._controllers.forEach(tPe),(t=this._originalLifecycles._loaded)==null||t.call(this.component)}_update(){var e;const t=this.component;this._controllers.forEach(iPe,t.$changes),(e=this._originalLifecycles._willUpdate)==null||e.call(this.component)}_updated(){var e;const t=this.component;if(this._controllers.forEach(nPe,t.$changes),(e=this._originalLifecycles._updated)==null||e.call(this.component),this.isLit)t.$changes=new Map;else{const i=this._updatePromise;this._updatePromise=new QO,i.resolve(!0)}}async destroy(){var t;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(sPe),this._controllers.clear(),await((t=this._originalLifecycles._destroy)==null?void 0:t.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const t=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=L5e(t,K5e)}}},d8="autoDestroyDisabled",K5e=1e3,LS=t=>t;function J5e(t){"triggerConnected"in t?t.triggerConnected():or(t.hostConnected,t)}function Q5e(t){"triggerDisconnected"in t?t.triggerDisconnected():or(t.hostDisconnected,t)}async function ePe(t){this.has(t)||("triggerLoad"in t?await t.triggerLoad():await L9(t.hostLoad,t))}function tPe(t){"triggerLoaded"in t?t.triggerLoaded():or(t.hostLoaded,t)}function iPe(t){"triggerUpdate"in t?t.triggerUpdate(this):or(t.hostUpdate,t,this)}function nPe(t){"triggerUpdated"in t?t.triggerUpdated(this):or(t.hostUpdated,t,this)}function sPe(t){"triggerDestroy"in t?t.triggerDestroy():or(t.hostDestroy,t)}function FM(t,e,i){const n=t.manager.internals;return n.trackedValue!==e$&&n.trackedValue!==i&&n.firePropTrackers(void 0,void 0),n.keyTrackers.length===0&&queueMicrotask(()=>n.firePropTrackers(void 0,void 0)),n.trackedValue=i,n.keyTrackers.push((s,r)=>or(e,void 0,i===r?s:void 0)),i}function Goe(t,e,i){const n=Array.isArray(t)?t:[t];let s=n.length+1;const r=l=>{s-=1,l!==void 0&&(s=Math.min(s,0)),s===0&&e(l)};n.forEach(l=>X5e(l,c=>r(c===void 0?void 0:{key:c,host:l,isReactive:!1}),i));const o=n.find(l=>"manager"in l&&typeof l.manager=="object"&&l.manager.component===l);return o&&FM(o,l=>r(l===void 0?void 0:{key:l,host:o,isReactive:Foe(o,l)!==void 0}),i),i}function Ha(t,e){const i=LM();return FM(i,n=>{const s=n,r=i.manager,o=i,l=o[s];if(l!=null&&l!==t&&typeof e.set=="function"){const c=e.set(l,t,s);if(c!==l)if(r.isLit)o[s]=c;else{let f=!0;r.onConnected(()=>{f&&(f=!0,joe(()=>{o[s]=c}))})}}rPe(i,s,e)},t)}function joe(t){Kp.setter=!0;try{return t()}finally{Kp.setter=!1}}function Boe(t){Kp.getter=!0;try{return t()}finally{Kp.getter=!1}}function rPe(t,e,i){var n,s;const r=i,o=t.manager.internals,l=typeof r.get=="function"?r.get:void 0;l&&((n=o.getters)[e]??(n[e]=[]),o.getters[e].unshift(l));const c=r.set==="ignore"?oPe:r.set;c&&((s=o.setters)[e]??(s[e]=[]),o.setters[e].unshift(c))}var oPe=(t,e)=>e;function f8(t){const e=LM();return Ha(t,{set:e.manager.internals.readonlySetter})}function aPe(t){Kp.readOnly=!0;try{return t()}finally{Kp.readOnly=!1}}var Kq=t=>(...e)=>{const i=G5e(),n=new t(...e),s=n.exports;Xq(i.at(-1));const r=n.component.manager.internals;r.markExports(n,s),n.watchExports(l=>r.markExports(n,l)),j5e(n);const o=[n.component,...i].reverse();return Goe(o,l=>l===void 0?void 0:lPe(n,l,s),s)};function lPe(t,{host:e,key:i,isReactive:n},s){const r=e,o=r[i]!==t.exports,l=r[i]!==s,c=s!==t.exports;if(o&&!l&&c&&(r[i]=t.exports),e===t.component){if(n){const y=t.component.manager.internals;l&&y.markExports(t,r[i]),t2(t.component,i,_=>{_!==t.exports&&y.markExports(t,_)})}t.assignedProperty=n?void 0:i}t.watchExports(()=>{var x;if(r[i]===t.exports)return;const y=t.component.manager;((x=y.internals.setters[i])==null?void 0:x.includes(y.internals.readonlySetter))?aPe(()=>{r[i]=t.exports}):r[i]=t.exports})}var p8;async function cPe(){return p8??(p8=Roe()),await p8}var uPe=Promise.all([l5e(),N5e()]),eW=class extends Zq{async hostLoad(){const[t,{subclass:e,property:i}]=await uPe;class n extends t{}const s=(_,x)=>y[x];function r(_,x,S){return y!==void 0&&(y[S]=_),_}const o=this.component,l=o.manager.internals,c=[];if(Boe(()=>Object.keys(l.members).forEach(_=>{l.accessorSetter[_]===LS&&(c.push(_),l.accessorGetter[_]=s,l.accessorSetter[_]=r,i({value:o[_]})(n.prototype,_))})),this._enabledMembers=c,c.length===0)return;const f=e(o.el.tagName)(n),y=new f;this._instance=y}controllerRemoved(){var e,i;super.controllerRemoved();const t=this.component.manager.internals;(e=this._instance)==null||e.destroy(),(i=this._enabledMembers)==null||i.forEach(n=>{t.accessorGetter[n]=LS,t.accessorSetter[n]=LS})}},Hoe=(t,e)=>(i,n)=>hPe(i,t,n),Uoe=class extends qoe{constructor(t,e,i){super(t),this._loadAccessor=e,this._options=i,this._watchedProperties=new Map,this._isBinding={value:!0},this.setProvisionalExports(cf.makeGetterProxy(t,this._watchedProperties,this._isBinding,this.constructor.allowedPropNameMismatches));const n=t.manager.internals.reactiveUtilsIntegrations;n.add(this);const s=Array.from(n).find(r=>r instanceof eW);s&&n.delete(s),n.add(s??new eW(this.component)),FM(t,r=>{r&&(this._instancePropName=r)},this.exports)}hostConnected(){this._isBinding.value=!1}async hostLoad(){var l,c;this.reactiveUtils=await cPe();const t=this.component,e=this._gatherParameters(),i=((c=(l=this._options)==null?void 0:l.editConstructorProperties)==null?void 0:c.call(t,e))??e,n=i instanceof Promise?await i:i,s=t,r=typeof this._instancePropName=="string"?s[this._instancePropName]:void 0;r!=null&&r!==this.exports?(this._instance=r,r.set(n)):this._instance=await this._createInstance(n),!t.manager.destroyed&&(cf.watchComponentUpdates(this,this._instance,this._watchedProperties),cf.watchAccessorUpdates(this,this._instance,this._watchedProperties),this.exports=this._instance)}_gatherParameters(){return Object.fromEntries(Array.from(this._watchedProperties,([i,n])=>[n,this.component[i]]).filter(([,i])=>i!==void 0))}async _createInstance(t){return this._isAccessorConstructor(this._loadAccessor)?new this._loadAccessor(t):await this._loadAccessor(t)}_isAccessorConstructor(t){return"prototype"in t&&"declaredClass"in t.prototype}hostDestroy(){this._instance&&this._instance.destroy()}async reCreate(){this.hostDestroy(),await this.hostLoad()}},hPe=Kq(Uoe),cf={makeGetterProxy:(t,e,i,n)=>new Proxy({},{has:(s,r)=>typeof r=="string"||r in s,get:(s,r)=>{const o=Reflect.get(s,r);if(typeof r=="symbol"||r in Promise.prototype)return o;const l=r in s,c=(i==null?void 0:i.value)??!0;return l||!c?o:Goe(t,f=>{f!==void 0&&e.set(f.key,r)},o)}}),watchComponentUpdates(t,e,i){function n(l,c){const f=i.get(c),y=e[f];return typeof y=="boolean"&&f!==c&&c.toLowerCase().includes("disable")?!y:y}const s=(l,c,f)=>{const y=i.get(f),_=e[y],x=typeof _=="boolean"&&y!==f&&f.toLowerCase().includes("disable");if((x?!_:r.manager.isLit?_??void 0:_)===l)return l;e[y]=x?!l:l;const P=e[y];return x?!P:P},r=t.component,o=r.manager.internals;i.forEach((l,c)=>{o.accessorGetter[c]=n,o.accessorSetter[c]=s})},watchAccessorUpdates(t,e,i){const{component:n}=t,s=n,r=e,o=dPe(e);Boe(()=>i.forEach((l,c)=>{if(o.has(l))return;const f=s[c];let y=r[l];n.manager.isLit&&(y??(y=void 0));const x=typeof f=="boolean"&&l!==c&&c.toLowerCase().includes("disable")?!f:f;x!=null&&y!==x&&(r[l]=x)})),t.onLifecycle(()=>{if(!e.destroyed)return Array.from(i,([l,c])=>t.reactiveUtils.watch(()=>r[c],()=>{const f=r[c],_=typeof f=="boolean"&&c!==l&&l.toLowerCase().includes("disable")?!f:f;joe(()=>{s[l]=_})},{initial:!0}))})},reEmitAccessorEvents(t,e,i,n){if(!("on"in e&&typeof e.on=="function"))return;const r=Object.entries(t.component).map(([c,f])=>{const y=f;if(!c.startsWith(n)||c===n||typeof y!="object"||y===null||!("emit"in y)||typeof y.emit!="function")return;const _=y.emit,x=c.slice(n.length);return[$5e(x).toLowerCase(),_]}).filter(Loe);if(r.length===0)return;const o=e,l=()=>o;t.onLifecycle(()=>{if(!e.destroyed)return r.map(([c,f])=>i.on(l,c,f))})},async reCreate(t,e){const i=e.manager.useRefSync(t);i!==void 0&&await i.reCreate()}};function dPe(t){var n;const i=Object.entries(((n=t.__accessor__)==null?void 0:n.metadata)??{});return new Set(i.filter(([s,r])=>(r==null?void 0:r.readOnly)===!0).map(([s])=>s))}/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */var Yoe=t=>pPe(void 0,t),fPe=class extends Zq{constructor(t,e){super(t);const i=this.exports;try{qb(this.component);const n=e(this.component,this),s=this.exports!==i;if(n instanceof Promise){s||this.setProvisionalExports(n);const r=n.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this._ready.reject(o),console.error(o)});this.onLoad(async()=>await r)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this._ready.reject(n),console.error(n)}}catchUpLifecycle(){}},pPe=Kq(fPe),mPe=Yoe,H0=t=>gPe,tW="arcgisPropertyChange",gPe=(...t)=>Yoe((e,i)=>{let s=e[tW];return e.manager.isLit&&(s=e.constructor.$createEvent(tW,void 0,e)),i.onLoad(()=>i.onLifecycle(()=>t.map(r=>t2(e,r,()=>s.emit({name:r}))))),s});/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */function P3(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const e=yPe(t);if(!e){const i=Zoe(t.referenceElement);if(!i){Woe(t);return}return nW(i,t,!0),i}return vPe(e,t.el.parent)||(t.el.parent=e,e.tagName.toLowerCase()==="arcgis-expand"?_Pe(e,t):e.tagName.toLowerCase()==="arcgis-placement"?bPe(e,t):nW(e,t,!1)),e}function yPe({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(iW.has(e.tagName.toLowerCase()))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&iW.has(e.ownedBy.tagName.toLowerCase()))return e.ownedBy}}const iW=new Set(["arcgis-map","arcgis-scene","arcgis-expand","arcgis-placement"]);function vPe(t,e){if(t!==e)return!1;const i=t.tagName.toLowerCase();return i==="arcgis-expand"||i==="arcgis-placement"}function zM(t,e,i="arcgisReady"){var s;const n=t;typeof((s=n.view)==null?void 0:s.ready)=="boolean"?e(n.view):t.addEventListener(i,r=>r.target===t?zM(t,e,i):void 0,{once:!0})}const _Pe=(t,e)=>zM(t,i=>{var n,s;e.el.childElem&&typeof t.content=="object"&&((n=t.content)==null||n.append(e.el.childElem)),t.expandIcon=e.icon||((s=e.widget)==null?void 0:s.icon)||t.expandIcon,e.position=t.position,e.el.view=i}),bPe=(t,e)=>zM(t,i=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=t.position,e.el.view=i}),nW=(t,e,i)=>zM(t,n=>{i?Woe(e):e.el.childElem&&xPe(t,e),e.el.view=n},"arcgisViewReadyChange");function xPe(t,e){var o;const i=e.el.childElem??e.el,n=[...t.children],s={};for(const l of n){const c=l.getAttribute("position")??"manual";s[c]??(s[c]=[]),s[c].push({child:l,position:c,index:n.indexOf(l)})}const r=(o=s[e.position??"manual"])==null?void 0:o.findIndex(({child:l})=>l===e.el);t.view.ui.remove(i),t.view.ui.add(i,{position:e.position,index:r})}function wPe(t){let e=!1,i=t.el.view;const n=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t.el),"view")??{get:()=>i,set:s=>i=s};Object.defineProperty(t.el,"view",{get:n.get.bind(t.el),set:s=>{n.set.call(t.el,s),s&&!e&&(e=!0,t.arcgisReady.emit())},configurable:!0,enumerable:!0}),i&&(t.el.view=i)}function SPe(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function sW(t,e){return Xoe(e==null?void 0:e.center,t)}function Xoe(t,e){if(typeof e=="string")return Xoe(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],n=e[1],s=e.length>2?e[2]:void 0;if(i!==t.longitude||n!==t.latitude||s!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}async function EPe(t,e){e!=null&&(typeof e=="string"?t.el.view=await CPe(e):t.widget&&(t.el.view=e.view))}async function CPe(t){const e=Zoe(t);return await new Promise(i=>{var n;typeof((n=e==null?void 0:e.view)==null?void 0:n.ready)=="boolean"?i(e.view):e&&e.addEventListener("arcgisViewReadyChange",()=>i(e.view),{once:!0})})}function Woe(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function Zoe(t){return typeof t!="string"?t??void 0:(t.includes("#")||t.includes(".")||t.includes("[")?void 0:document.querySelector(`#${t}`))??document.querySelector(t)??void 0}/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const PPe=".arcgis-map{padding:0;margin:0;height:100%;width:100%}",TPe=PPe,IPe=Hoe(p5e),MPe=Hoe(d5e),rW=[0,"arcgis-map",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],view:[1040],map:[1040],allLayerViews:[1040],background:[1040],basemapView:[1040],basemap:[1025],center:[1025],constraints:[1040],extent:[1040],fatalError:[1040],floors:[1040],gamepad:[1040],graphics:[1040],ground:[1025],highlightOptions:[1040],interacting:[1028],ipsInfo:[1040],itemId:[1537,"item-id"],layerViews:[1040],magnifier:[1040],navigating:[1028],navigation:[1040],padding:[1040],popup:[1040],popupDisabled:[1028,"popup-disabled"],ready:[1028],resizeAlign:[1025,"resize-align"],resolution:[1026],rotation:[1026],scale:[1026],spatialReference:[1040],stationary:[1028],suspended:[1540],theme:[1040],timeExtent:[1040],timeZone:[1025,"time-zone"],toMap:[1040],toScreen:[1040],updating:[1540],viewpoint:[1040],zoom:[1026],addLayer:[64],addLayers:[64],closePopup:[64],destroy:[64],goTo:[64],hitTest:[64],openPopup:[64],takeScreenshot:[64],tryFatalErrorRecovery:[64],whenLayerView:[64]}],APe=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>rW[2]??{},this.arcgisViewReadyChange=Mt(this,"arcgisViewReadyChange",7),this.arcgisViewChange=Mt(this,"arcgisViewChange",7),this.arcgisViewClick=Mt(this,"arcgisViewClick",7),this.arcgisViewDoubleClick=Mt(this,"arcgisViewDoubleClick",7),this.arcgisViewDrag=Mt(this,"arcgisViewDrag",7),this.arcgisViewHold=Mt(this,"arcgisViewHold",7),this.arcgisViewImmediateClick=Mt(this,"arcgisViewImmediateClick",7),this.arcgisViewImmediateDoubleClick=Mt(this,"arcgisViewImmediateDoubleClick",7),this.arcgisViewKeyDown=Mt(this,"arcgisViewKeyDown",7),this.arcgisViewKeyUp=Mt(this,"arcgisViewKeyUp",7),this.arcgisViewLayerviewCreate=Mt(this,"arcgisViewLayerviewCreate",7),this.arcgisViewLayerviewCreateError=Mt(this,"arcgisViewLayerviewCreateError",7),this.arcgisViewLayerviewDestroy=Mt(this,"arcgisViewLayerviewDestroy",7),this.arcgisViewMouseWheel=Mt(this,"arcgisViewMouseWheel",7),this.arcgisViewPointerDown=Mt(this,"arcgisViewPointerDown",7),this.arcgisViewPointerEnter=Mt(this,"arcgisViewPointerEnter",7),this.arcgisViewPointerLeave=Mt(this,"arcgisViewPointerLeave",7),this.arcgisViewPointerMove=Mt(this,"arcgisViewPointerMove",7),this.arcgisViewPointerUp=Mt(this,"arcgisViewPointerUp",7),this.manager=Of(this,Mo),this.reactiveUtils=mPe(Roe),this._map=IPe(this,{editConstructorProperties:this._editMapProperties}),this._setChildElement=e=>{this.el.childElem=e},this.autoDestroyDisabled=!1,this.view=f8(MPe(this,{editConstructorProperties:this._editViewProperties})),this.map=this.view.map,this.allLayerViews=this.view.allLayerViews,this.background=this.view.background,this.basemapView=this.view.basemapView,this.basemap=this._map.basemap,this.center=Ha(void 0,{get:e=>this.view.center??e,set:e=>{const i=sW(e,this.ready?this.view:void 0);return this.ready?(this.view.center=i,this.view.center):i}}),this.constraints=this.view.constraints,this.extent=Ha(void 0,{get:e=>this.view.extent??e,set:(e,i)=>this.view.ready?(e&&!(i!=null&&i.equals(e))&&(this.view.extent=e),this.view.extent):e}),this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.gamepad=Ha(void 0,{get:()=>this.ready?this.view.input.gamepad:void 0,set:"ignore"}),this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlightOptions=this.view.highlightOptions,this.interacting=Ha(!1,{get:()=>this.view.interacting,set:"ignore"}),this.ipsInfo=this._map.ipsInfo,this.itemId=Ha(void 0,{get:e=>{var i;return((i=this._map.portalItem)==null?void 0:i.id)??e},set:e=>(this.ready&&cf.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error),e)}),this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.navigating=Ha(!1,{get:()=>this.view.navigating,set:"ignore"}),this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.scale=Ha(void 0,{get:e=>this.view.scale??e,set:e=>(this.ready&&(this.view.scale=e),e)}),this.spatialReference=Ha(this.view.spatialReference,{set:(e,i)=>i!=null&&i.equals(e)?i:e}),this.stationary=Ha(!0,{get:()=>this.view.stationary,set:"ignore"}),this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.toMap=f8((...e)=>this.view.toMap(...e)),this.toScreen=f8((...e)=>this.view.toScreen(...e)),this.updating=this.view.updating,this.viewpoint=Ha(void 0,{get:()=>this.view.viewpoint,set:(e,i)=>SPe(i,e)?e:i}),this.zoom=Ha(void 0,{get:e=>this.view.zoom??e,set:e=>(this.ready&&(this.view.zoom=e),e)})}async addLayer(e,i){var n;(n=this.map)==null||n.add(e,i)}async addLayers(e,i){var n;(n=this.map)==null||n.addMany(e,i)}async closePopup(){var e;(e=this.view)==null||e.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){var n;return await((n=this.view)==null?void 0:n.goTo(e,i))}async hitTest(e,i){var n;return await((n=this.view)==null?void 0:n.hitTest(e,i))}async openPopup(e){var i;await((i=this.view)==null?void 0:i.openPopup(e))}async takeScreenshot(e){var i;return await((i=this.view)==null?void 0:i.takeScreenshot(e))}async tryFatalErrorRecovery(){var e;(e=this.view)==null||e.tryFatalErrorRecovery()}async whenLayerView(e){var i;return await((i=this.view)==null?void 0:i.whenLayerView(e))}componentDidLoad(){var i;(i=this.view).container??(i.container=this.el.childElem);const{watch:e}=this.reactiveUtils;this.manager.onLifecycle(()=>[e(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),e(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})]),cf.reEmitAccessorEvents(this.manager,this.view,this.reactiveUtils,"arcgisView")}render(){return Me("div",{key:"77569d288f8260b1aeddb513498de4b38a9dd9ae",class:"arcgis-map",ref:this._setChildElement})}_editMapProperties(e){this.map&&(this._map=this.map),this.itemId?e.portalItem={id:this.itemId}:this.basemap?this.basemap==="none"&&(e.basemap=void 0,this.basemap=null):e.basemap="topo-vector";const{basemap:i,...n}=e;i||(e=n);const{ground:s,...r}=e;return s||(e=r),e}_editViewProperties(e){this.view.ui||(e.ui={components:["attribution"]}),e.map??(e.map=this._map);const i=sW(this.center,void 0);return i&&(e.center=i),this.viewpoint&&(e.viewpoint=this.viewpoint),this.scale!==void 0&&(e.scale=this.scale),this.extent&&(e.extent=this.extent),this.zoom!==void 0&&(e.zoom=this.zoom),e}get el(){return this}static get style(){return TPe}},rW);function kPe(){if(typeof customElements>"u")return;["arcgis-map"].forEach(e=>{switch(e){case"arcgis-map":customElements.get(e)||customElements.define(e,APe);break}})}kPe();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const vm=(t,e)=>(i,n)=>NPe(i,t,n);class DPe extends Uoe{constructor(e,i,n){super(e,i,n),this._watchedViewModelProperties=new Map,this._watchedVisibleElementsProperties={},this._isBindingViewModel={value:!0},Object.defineProperty(this.exports,"viewModel",{value:cf.makeGetterProxy(e,this._watchedViewModelProperties,this._isBindingViewModel)}),Object.defineProperty(this.exports,"visibleElements",{value:this._makeVisibleElementsBinder()})}hostConnected(){super.hostConnected(),this._isBindingViewModel.value=!1,this.component.manager.loadedCalled&&P3(this.component)}async hostLoad(){if(this._watchedProperties.delete("viewModel"),await super.hostLoad(),this.component.manager.destroyed)return;this._watchMetaProperties(),cf.reEmitAccessorEvents(this,this._instance,this.reactiveUtils,"widget"),this.onLifecycle(()=>this.reactiveUtils.watch(()=>this._instance.viewModel,n=>{this.component.viewModel=n},{initial:!0}));const e=this._instance.viewModel;typeof e=="object"&&(cf.reEmitAccessorEvents(this,e,this.reactiveUtils,"viewModel"),cf.watchComponentUpdates(this,e,this._watchedViewModelProperties),cf.watchAccessorUpdates(this,e,this._watchedViewModelProperties));const i=Object.entries(this._watchedVisibleElementsProperties);i.length>0&&this.onLifecycle(()=>i.map(([n,s])=>{let r=this._instance.visibleElements??{},o;for(const y of s.slice(0,-1))if(typeof r[y]=="object"&&r[y]!==null)r=r[y];else{o=!!r[y];break}o===void 0&&(o=!!(r[s.slice(-1)[0]]??!0)),n.startsWith("hide");const c=n.startsWith("hide")||n.startsWith("show")?n.startsWith("hide"):o,f=this.component;return typeof f[n]=="boolean"?this._updateWidgetVisibleElement(s,f[n],c):f[n]=!1,t2(this.component,n,y=>this._updateWidgetVisibleElement(s,y,c))}))}_updateWidgetVisibleElement(e,i,n){let s=this._instance.visibleElements??{};for(const o of e.slice(0,-1))(typeof s[o]!="object"||s[o]===null)&&(s[o]={}),s=s[o];const r=!!(n?!i:i);s[e.at(-1)]=r}hostLoaded(){const{el:e}=this.component;e.childElem??(e.childElem=document.createElement("div")),this._instance.container=e.childElem;let i=!1;const n=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>{var s;return this._instance.view??((s=this._instance.viewModel)==null?void 0:s.view)},set:s=>{!("view"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.view=s:this._instance.view=s,!("map"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.map=s.map:this._instance.map=s.map,this._watchViewDestroy(),s&&!i&&(i=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),n&&(this._instance.view=n),this.component.el.isConnected&&(P3(this.component),this._watchViewDestroy())}hostDisconnected(){var e,i;typeof this.component.el.childElem=="object"&&((i=(e=this.component.el.view)==null?void 0:e.ui)==null||i.remove(this.component.el.childElem))}hostDestroy(){var e;super.hostDestroy(),(e=this._watchViewDestroyHandle)==null||e.remove()}_watchMetaProperties(){t2(this.component,"position",e=>{this.component.el.childElem!=null&&typeof e=="string"&&P3(this.component)}),t2(this.component,"referenceElement",()=>P3(this.component))}_makeVisibleElementsBinder(){return new Proxy({},{has:(e,i)=>typeof i=="string"||Reflect.has(e,i),get:(e,i)=>{if(typeof i=="symbol"||i in Promise.prototype)return Reflect.get(e,i);const n=[i],s=this._makeRecursiveProxy(n);return FM(this.component,r=>{const o=r;this.component[o]=!1,this._watchedVisibleElementsProperties[o]=n},s)}})}_makeRecursiveProxy(e){const i=new Proxy({},{get:(n,s)=>{const r=Reflect.get(n,s);return typeof s=="symbol"||s in Promise.prototype?r:(e.push(s),i)}});return i}_watchViewDestroy(){var e;(e=this._watchViewDestroyHandle)==null||e.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when(()=>{var i;return((i=this.component.el.view)==null?void 0:i.destroyed)===!0},()=>void this.component.destroy().catch(console.error),{sync:!0})}}const NPe=Kq(DPe);/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const OPe="",$Pe=OPe,RPe=vm(I5e),oW=[0,"arcgis-legend",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],headingLevel:[1026,"heading-level"],referenceElement:[1025,"reference-element"],activeLayerInfos:[1040],basemapLegendVisible:[1028,"basemap-legend-visible"],hideLayersNotInCurrentView:[1028,"hide-layers-not-in-current-view"],icon:[1025],label:[1025],respectLayerVisibilityDisabled:[1028,"respect-layer-visibility-disabled"],legendStyle:[1025,"legend-style"],layerInfos:[1040],position:[1025],respectLayerDefinitionExpression:[1028,"respect-layer-definition-expression"],state:[1537],destroy:[64]}],LPe=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>oW[2]??{},this.arcgisReady=Mt(this,"arcgisReady",7),this.arcgisPropertyChange=Mt(this,"arcgisPropertyChange",7),this.manager=Of(this,Mo),this.widget=RPe(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=H0()("state"),this.autoDestroyDisabled=!1,this.headingLevel=this.widget.headingLevel,this.referenceElement=void 0,this.activeLayerInfos=this.widget.activeLayerInfos,this.basemapLegendVisible=this.widget.basemapLegendVisible,this.hideLayersNotInCurrentView=this.widget.hideLayersNotInCurrentView,this.icon=this.widget.icon,this.label=this.widget.label,this.respectLayerVisibilityDisabled=this.widget.respectLayerVisibility,this.legendStyle=this.widget.style,this.layerInfos=this.widget.layerInfos,this.position="bottom-left",this.respectLayerDefinitionExpression=this.widget.respectLayerDefinitionExpression,this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return $Pe}},oW);function FPe(){if(typeof customElements>"u")return;["arcgis-legend"].forEach(e=>{switch(e){case"arcgis-legend":customElements.get(e)||customElements.define(e,LPe);break}})}FPe();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const zPe="",qPe=zPe,VPe=vm(A5e),aW=[0,"arcgis-search",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],activeMenu:[1025,"active-menu"],activeSource:[1040],activeSourceIndex:[1026,"active-source-index"],allPlaceholder:[1025,"all-placeholder"],allSources:[1040],autoSelectDisabled:[1028,"auto-select-disabled"],defaultSources:[1040],disabled:[1540],icon:[1025],label:[1025],includeDefaultSourcesDisabled:[1028,"include-default-sources-disabled"],locationDisabled:[1028,"location-disabled"],maxResults:[1026,"max-results"],maxSuggestions:[1026,"max-suggestions"],minSuggestCharacters:[1026,"min-suggest-characters"],popupDisabled:[1028,"popup-disabled"],popupTemplate:[1040],portal:[1040],resultGraphic:[1040],resultGraphicDisabled:[1028,"result-graphic-disabled"],results:[1040],searchAllDisabled:[1028,"search-all-disabled"],searchTerm:[1025,"search-term"],selectedResult:[1040],sources:[1040],suggestions:[1040],suggestionsDisabled:[1028,"suggestions-disabled"],position:[1025],state:[1537],blurSearch:[64],clearSearch:[64],focusSearch:[64],destroy:[64],search:[64],suggest:[64]}],GPe=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>aW[2]??{},this.arcgisReady=Mt(this,"arcgisReady",7),this.arcgisPropertyChange=Mt(this,"arcgisPropertyChange",7),this.widgetSearchBlur=Mt(this,"arcgisBlur",7),this.widgetSearchClear=Mt(this,"arcgisClear",7),this.widgetSearchComplete=Mt(this,"arcgisComplete",7),this.widgetSearchFocus=Mt(this,"arcgisFocus",7),this.widgetSearchStart=Mt(this,"arcgisStart",7),this.widgetSelectResult=Mt(this,"arcgisSelectResult",7),this.widgetSuggestComplete=Mt(this,"arcgisSuggestComplete",7),this.widgetSuggestStart=Mt(this,"arcgisSuggestStart",7),this.manager=Of(this,Mo),this.widget=VPe(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=H0()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeMenu=this.widget.activeMenu,this.activeSource=this.widget.activeSource,this.activeSourceIndex=this.widget.activeSourceIndex,this.allPlaceholder=this.widget.allPlaceholder,this.allSources=this.widget.allSources,this.autoSelectDisabled=this.widget.autoSelect,this.defaultSources=this.widget.defaultSources,this.disabled=this.widget.disabled,this.icon=this.widget.icon,this.label=this.widget.label,this.includeDefaultSourcesDisabled=this.widget.includeDefaultSources,this.locationDisabled=this.widget.locationEnabled,this.maxResults=this.widget.maxResults,this.maxSuggestions=this.widget.maxSuggestions,this.minSuggestCharacters=this.widget.minSuggestCharacters,this.popupDisabled=this.widget.popupEnabled,this.popupTemplate=this.widget.popupTemplate,this.portal=this.widget.portal,this.resultGraphic=this.widget.resultGraphic,this.resultGraphicDisabled=this.widget.resultGraphicEnabled,this.results=this.widget.results,this.searchAllDisabled=this.widget.searchAllEnabled,this.searchTerm=this.widget.searchTerm,this.selectedResult=this.widget.selectedResult,this.sources=this.widget.sources,this.suggestions=this.widget.suggestions,this.suggestionsDisabled=this.widget.suggestionsEnabled,this.position="top-right",this.state=this.viewModel.state}async blurSearch(){var e;(e=this.widget)==null||e.blur()}async clearSearch(){var e;(e=this.widget)==null||e.clear()}async focusSearch(){var e;(e=this.widget)==null||e.focus()}async destroy(){await this.manager.destroy()}async search(e){var i;return await((i=this.widget)==null?void 0:i.search(e))}async suggest(e){var i;return await((i=this.widget)==null?void 0:i.suggest(e))}get el(){return this}static get style(){return qPe}},aW);function jPe(){if(typeof customElements>"u")return;["arcgis-search"].forEach(e=>{switch(e){case"arcgis-search":customElements.get(e)||customElements.define(e,GPe);break}})}jPe();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const BPe="",HPe=BPe,UPe=vm(w5e),lW=[0,"arcgis-editor",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],activeWorkflow:[1040],allowedWorkflows:[1025,"allowed-workflows"],icon:[1025],label:[1025],labelOptions:[1040],layerInfos:[1040],snappingOptions:[1040],supportingWidgetDefaults:[1040],tooltipOptions:[1040],headingLevel:[1026,"heading-level"],hideCreateFeaturesSection:[1028,"hide-create-features-section"],hideEditFeaturesSection:[1028,"hide-edit-features-section"],hideLabelsToggle:[1028,"hide-labels-toggle"],hideTooltipsToggle:[1028,"hide-tooltips-toggle"],showSnappingControlsElementsHeader:[1028,"show-snapping-controls-elements-header"],hideSnappingControlsElementsEnabledToggle:[1028,"hide-snapping-controls-elements-enabled-toggle"],hideSnappingControlsElementsSelfEnabledToggle:[1028,"hide-snapping-controls-elements-self-enabled-toggle"],hideSnappingControlsElementsFeatureEnabledToggle:[1028,"hide-snapping-controls-elements-feature-enabled-toggle"],hideSnappingControlsElementsLayerList:[1028,"hide-snapping-controls-elements-layer-list"],position:[1025],state:[1537],cancelWorkflow:[64],destroy:[64],deleteFeatureFromWorkflow:[64],startCreateFeaturesWorkflowAtFeatureCreation:[64],startCreateFeaturesWorkflowAtFeatureTypeSelection:[64],startUpdateWorkflowAtFeatureEdit:[64],startUpdateWorkflowAtFeatureSelection:[64],startUpdateWorkflowAtMultipleFeatureSelection:[64]}],YPe=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>lW[2]??{},this.arcgisReady=Mt(this,"arcgisReady",7),this.arcgisPropertyChange=Mt(this,"arcgisPropertyChange",7),this.manager=Of(this,Mo),this.widget=UPe(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=H0()("activeWorkflow","state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeWorkflow=this.widget.activeWorkflow,this.allowedWorkflows=this.widget.allowedWorkflows,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layerInfos=this.widget.layerInfos,this.snappingOptions=this.widget.snappingOptions,this.supportingWidgetDefaults=this.widget.supportingWidgetDefaults,this.tooltipOptions=this.widget.tooltipOptions,this.headingLevel=this.widget.headingLevel,this.hideCreateFeaturesSection=this.widget.visibleElements.createFeaturesSection,this.hideEditFeaturesSection=this.widget.visibleElements.editFeaturesSection,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.position="bottom-left",this.state=this.viewModel.state}async cancelWorkflow(){var e;await((e=this.widget)==null?void 0:e.cancelWorkflow())}async destroy(){await this.manager.destroy()}async deleteFeatureFromWorkflow(){var e;await((e=this.widget)==null?void 0:e.deleteFeatureFromWorkflow())}async startCreateFeaturesWorkflowAtFeatureCreation(e){var i;await((i=this.widget)==null?void 0:i.startCreateFeaturesWorkflowAtFeatureCreation(e))}async startCreateFeaturesWorkflowAtFeatureTypeSelection(){var e;await((e=this.widget)==null?void 0:e.startCreateFeaturesWorkflowAtFeatureTypeSelection())}async startUpdateWorkflowAtFeatureEdit(e){var i;await((i=this.widget)==null?void 0:i.startUpdateWorkflowAtFeatureEdit(e))}async startUpdateWorkflowAtFeatureSelection(){var e;await((e=this.widget)==null?void 0:e.startUpdateWorkflowAtFeatureSelection())}async startUpdateWorkflowAtMultipleFeatureSelection(e){var i;await((i=this.widget)==null?void 0:i.startUpdateWorkflowAtMultipleFeatureSelection(e))}get el(){return this}static get style(){return HPe}},lW);function XPe(){if(typeof customElements>"u")return;["arcgis-editor"].forEach(e=>{switch(e){case"arcgis-editor":customElements.get(e)||customElements.define(e,YPe);break}})}XPe();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const WPe="arcgis-sketch{}",ZPe=WPe,KPe=vm(D5e),cW=[0,"arcgis-sketch",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],activeTool:[1537,"active-tool"],availableCreateTools:[1040],createGraphic:[1040],creationMode:[1025,"creation-mode"],defaultCreateOptions:[1040],defaultUpdateOptions:[1040],defaultGraphicsLayerDisabled:[1028,"default-graphics-layer-disabled"],icon:[1025],label:[1025],labelOptions:[1040],layer:[1040],layout:[1025],pointSymbol:[1040],polylineSymbol:[1040],polygonSymbol:[1040],snappingOptions:[1040],tooltipOptions:[1040],updateGraphics:[1040],hideCreateToolsPoint:[1028,"hide-create-tools-point"],hideCreateToolsPolyline:[1028,"hide-create-tools-polyline"],hideCreateToolsPolygon:[1028,"hide-create-tools-polygon"],hideCreateToolsRectangle:[1028,"hide-create-tools-rectangle"],hideCreateToolsCircle:[1028,"hide-create-tools-circle"],hideDuplicateButton:[1028,"hide-duplicate-button"],hideSelectionToolsRectangleSelection:[1028,"hide-selection-tools-rectangle-selection"],hideSelectionToolsLassoSelection:[1028,"hide-selection-tools-lasso-selection"],hideSettingsMenu:[1028,"hide-settings-menu"],hideLabelsToggle:[1028,"hide-labels-toggle"],hideTooltipsToggle:[1028,"hide-tooltips-toggle"],hideSnappingControls:[1028,"hide-snapping-controls"],showSnappingControlsElementsHeader:[1028,"show-snapping-controls-elements-header"],hideSnappingControlsElementsEnabledToggle:[1028,"hide-snapping-controls-elements-enabled-toggle"],hideSnappingControlsElementsSelfEnabledToggle:[1028,"hide-snapping-controls-elements-self-enabled-toggle"],hideSnappingControlsElementsFeatureEnabledToggle:[1028,"hide-snapping-controls-elements-feature-enabled-toggle"],hideSnappingControlsElementsLayerList:[1028,"hide-snapping-controls-elements-layer-list"],hideUndoRedoMenu:[1028,"hide-undo-redo-menu"],position:[1025],state:[1537],cancel:[64],complete:[64],create:[64],delete:[64],destroy:[64],duplicate:[64],redo:[64],undo:[64],update:[64]},[[0,"arcgisReady","arcgisReadyHandler"]]],JPe=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>cW[2]??{},this.arcgisReady=Mt(this,"arcgisReady",7),this.arcgisPropertyChange=Mt(this,"arcgisPropertyChange",7),this.widgetCreate=Mt(this,"arcgisCreate",7),this.widgetDelete=Mt(this,"arcgisDelete",7),this.widgetRedo=Mt(this,"arcgisRedo",7),this.widgetUndo=Mt(this,"arcgisUndo",7),this.widgetUpdate=Mt(this,"arcgisUpdate",7),this.manager=Of(this,Mo),this.widget=KPe(this,{editConstructorProperties:this._editConstructorProperties}),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=H0()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeTool=this.widget.activeTool,this.availableCreateTools=this.widget.availableCreateTools,this.createGraphic=this.widget.createGraphic,this.creationMode=this.widget.creationMode,this.defaultCreateOptions=this.widget.defaultCreateOptions,this.defaultUpdateOptions=this.widget.defaultUpdateOptions,this.defaultGraphicsLayerDisabled=!1,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layer=this.widget.layer,this.layout=this.widget.layout,this.pointSymbol=this.viewModel.pointSymbol,this.polylineSymbol=this.viewModel.polylineSymbol,this.polygonSymbol=this.viewModel.polygonSymbol,this.snappingOptions=this.widget.snappingOptions,this.tooltipOptions=this.widget.tooltipOptions,this.updateGraphics=this.widget.updateGraphics,this.hideCreateToolsPoint=this.widget.visibleElements.createTools.point,this.hideCreateToolsPolyline=this.widget.visibleElements.createTools.polyline,this.hideCreateToolsPolygon=this.widget.visibleElements.createTools.polygon,this.hideCreateToolsRectangle=this.widget.visibleElements.createTools.rectangle,this.hideCreateToolsCircle=this.widget.visibleElements.createTools.circle,this.hideDuplicateButton=this.widget.visibleElements.duplicateButton,this.hideSelectionToolsRectangleSelection=this.widget.visibleElements.selectionTools["rectangle-selection"],this.hideSelectionToolsLassoSelection=this.widget.visibleElements.selectionTools["lasso-selection"],this.hideSettingsMenu=this.widget.visibleElements.settingsMenu,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.hideSnappingControls=this.widget.visibleElements.snappingControls,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.hideUndoRedoMenu=this.widget.visibleElements.undoRedoMenu,this.position="bottom-left",this.state=this.widget.state}async _editConstructorProperties(e){return this.defaultGraphicsLayerDisabled||(e.layer??(e.layer=await u5e({title:"Sketch Layer"}))),e}arcgisReadyHandler(){var e,i;!this.defaultGraphicsLayerDisabled&&!((e=this.el.view)!=null&&e.map.layers.includes(this.widget.layer))&&((i=this.el.view)==null||i.map.add(this.widget.layer))}async cancel(){var e;(e=this.widget)==null||e.cancel()}async complete(){var e;(e=this.widget)==null||e.complete()}async create(e,i){var n;await((n=this.widget)==null?void 0:n.create(e,i))}async delete(){var e;(e=this.widget)==null||e.delete()}async destroy(){await this.manager.destroy()}async duplicate(){var e;(e=this.widget)==null||e.duplicate()}async redo(){var e;(e=this.widget)==null||e.redo()}async undo(){var e;(e=this.widget)==null||e.undo()}async update(e,i){var n;return void((n=this.widget)==null?void 0:n.update(e,i))}get el(){return this}static get style(){return ZPe}},cW);function QPe(){if(typeof customElements>"u")return;["arcgis-sketch"].forEach(e=>{switch(e){case"arcgis-sketch":customElements.get(e)||customElements.define(e,JPe);break}})}QPe();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const e4e="",t4e=e4e,i4e=vm(P5e),uW=[0,"arcgis-layer-list",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],collapsed:[1540],headingLevel:[1026,"heading-level"],catalogLayerList:[1040],catalogOptions:[1040],dragEnabled:[1028,"drag-enabled"],filterPlaceholder:[1025,"filter-placeholder"],filterText:[1025,"filter-text"],icon:[1025],knowledgeGraphOptions:[1040],tableList:[1040],label:[1025],listItemCreatedFunction:[1040],minDragEnabledItems:[1026,"min-drag-enabled-items"],minFilterItems:[1026,"min-filter-items"],openedLayers:[1040],operationalItems:[1040],selectedItems:[1040],selectionMode:[1025,"selection-mode"],visibilityAppearance:[1025,"visibility-appearance"],hideCatalogLayerList:[1028,"hide-catalog-layer-list"],showCloseButton:[1028,"show-close-button"],showCollapseButton:[1028,"show-collapse-button"],showErrors:[1028,"show-errors"],showFilter:[1028,"show-filter"],hideFlow:[1028,"hide-flow"],showHeading:[1028,"show-heading"],hideStatusIndicators:[1028,"hide-status-indicators"],showTemporaryLayerIndicators:[1028,"show-temporary-layer-indicators"],position:[1025],state:[1537],destroy:[64],triggerAction:[64]}],n4e=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>uW[2]??{},this.arcgisReady=Mt(this,"arcgisReady",7),this.widgetTriggerAction=Mt(this,"arcgisTriggerAction",7),this.arcgisPropertyChange=Mt(this,"arcgisPropertyChange",7),this.manager=Of(this,Mo),this.widget=i4e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=H0()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.collapsed=this.widget.collapsed,this.headingLevel=this.widget.headingLevel,this.catalogLayerList=Ha(void 0,{get:()=>this.widget.catalogLayerList,set:"ignore"}),this.catalogOptions=this.widget.catalogOptions,this.dragEnabled=this.widget.dragEnabled,this.filterPlaceholder=this.widget.filterPlaceholder,this.filterText=this.widget.filterText,this.icon=this.widget.icon,this.knowledgeGraphOptions=this.widget.knowledgeGraphOptions,this.tableList=Ha(void 0,{get:()=>this.widget.tableList,set:"ignore"}),this.label=this.widget.label,this.listItemCreatedFunction=this.widget.listItemCreatedFunction,this.minDragEnabledItems=this.widget.minDragEnabledItems,this.minFilterItems=this.widget.minFilterItems,this.openedLayers=Ha(void 0,{get:()=>this.widget.openedLayers,set:"ignore"}),this.operationalItems=Ha(void 0,{get:()=>this.widget.operationalItems,set:"ignore"}),this.selectedItems=this.widget.selectedItems,this.selectionMode=this.widget.selectionMode,this.visibilityAppearance=this.widget.visibilityAppearance,this.hideCatalogLayerList=this.widget.visibleElements.catalogLayerList,this.showCloseButton=this.widget.visibleElements.closeButton,this.showCollapseButton=this.widget.visibleElements.collapseButton,this.showErrors=this.widget.visibleElements.errors,this.showFilter=this.widget.visibleElements.filter,this.hideFlow=this.widget.visibleElements.flow,this.showHeading=this.widget.visibleElements.heading,this.hideStatusIndicators=this.widget.visibleElements.statusIndicators,this.showTemporaryLayerIndicators=this.widget.visibleElements.temporaryLayerIndicators,this.position="bottom-left",this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}async triggerAction(e,i){var n;(n=this.widget)==null||n.triggerAction(e,i)}get el(){return this}static get style(){return t4e}},uW);function s4e(){if(typeof customElements>"u")return;["arcgis-layer-list"].forEach(e=>{switch(e){case"arcgis-layer-list":customElements.get(e)||customElements.define(e,n4e);break}})}s4e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const r4e="arcgis-expand{pointer-events:auto}arcgis-expand>.esri-expand__content--expanded{background-color:var(--calcite-color-background)}",o4e=r4e,a4e=vm(E5e),hW=[0,"arcgis-expand",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],icon:[1025],content:[1025],label:[1025],autoCollapse:[1028,"auto-collapse"],closeOnEsc:[1028,"close-on-esc"],collapseIcon:[1025,"collapse-icon"],collapseTooltip:[1025,"collapse-tooltip"],expanded:[1540],expandIcon:[1025,"expand-icon"],expandTooltip:[1025,"expand-tooltip"],group:[1025],iconNumber:[1026,"icon-number"],mode:[1025],placement:[1025],position:[1025],referenceElement:[1025,"reference-element"],destroy:[64],collapse:[64],expand:[64],toggle:[64]}],l4e=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>hW[2]??{},this.arcgisReady=Mt(this,"arcgisReady",7),this.manager=Of(this,Mo),this.widget=a4e(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.icon=this.widget.icon,this.content=this.widget.content,this.label=this.widget.label,this.autoCollapse=this.widget.autoCollapse,this.closeOnEsc=this.widget.closeOnEsc,this.collapseIcon=this.widget.collapseIcon,this.collapseTooltip=this.widget.collapseTooltip,this.expanded=this.widget.expanded,this.expandIcon=this.widget.expandIcon,this.expandTooltip=this.widget.expandTooltip,this.group=this.widget.group,this.iconNumber=this.widget.iconNumber,this.mode=this.widget.mode,this.placement=this.widget.placement,this.position="top-right",this.referenceElement=void 0,this.content??(this.content=document.createElement("div"))}async destroy(){await this.manager.destroy()}async collapse(){var e;(e=this.widget)==null||e.collapse()}async expand(){var e;(e=this.widget)==null||e.expand()}async toggle(){this.expanded?await this.collapse():await this.expand()}get el(){return this}static get style(){return o4e}},hW);function c4e(){if(typeof customElements>"u")return;["arcgis-expand"].forEach(e=>{switch(e){case"arcgis-expand":customElements.get(e)||customElements.define(e,l4e);break}})}c4e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const u4e="",h4e=u4e,d4e=vm(v5e),dW=[0,"arcgis-basemap-gallery",{activeBasemap:[1040],autoDestroyDisabled:[1028,"auto-destroy-disabled"],disabled:[1540],icon:[1025],label:[1025],headingLevel:[1026,"heading-level"],source:[1040],position:[1025],referenceElement:[1025,"reference-element"],state:[1537],destroy:[64]}],f4e=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>dW[2]??{},this.arcgisReady=Mt(this,"arcgisReady",7),this.arcgisPropertyChange=Mt(this,"arcgisPropertyChange",7),this.manager=Of(this,Mo),this.widget=d4e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=H0()("activeBasemap","state"),this.activeBasemap=this.widget.activeBasemap,this.autoDestroyDisabled=!1,this.disabled=this.widget.disabled,this.icon=this.widget.icon,this.label=this.widget.label,this.headingLevel=this.widget.headingLevel,this.source=this.widget.source,this.position="bottom-left",this.referenceElement=void 0,this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return h4e}},dW);function p4e(){if(typeof customElements>"u")return;["arcgis-basemap-gallery"].forEach(e=>{switch(e){case"arcgis-basemap-gallery":customElements.get(e)||customElements.define(e,f4e);break}})}p4e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const m4e="arcgis-placement{display:block;pointer-events:auto;box-shadow:none}.arcgis-placement__container{display:flex}",g4e=m4e,y4e=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.arcgisReady=Mt(this,"arcgisReady",7),this._setContainer=e=>{this.el.childElem=e},this.referenceElement=void 0,this.position="bottom-left"}referenceElementWatcher(e){EPe(this,e)}positionWatcher(e){var i;this.el.childElem&&e!==void 0&&((i=this.el.view)==null||i.ui.move(this.el.childElem,e))}async componentDidLoad(){wPe(this),P3(this)}disconnectedCallback(){var e,i;this.el.childElem&&((i=(e=this.el.view)==null?void 0:e.ui)==null||i.remove(this.el.childElem))}render(){return Me("div",{key:"71b98c7f94af271e6881f46e4036085576e1fbd4",ref:this._setContainer,class:"arcgis-placement__container"},Me("slot",{key:"ac18bc6a5a4ae5a8642d73b7b692c6180a3c13ec"}))}get el(){return this}static get watchers(){return{referenceElement:["referenceElementWatcher"],position:["positionWatcher"]}}static get style(){return g4e}},[4,"arcgis-placement",{referenceElement:[1,"reference-element"],position:[1]},void 0,{referenceElement:["referenceElementWatcher"],position:["positionWatcher"]}]);function v4e(){if(typeof customElements>"u")return;["arcgis-placement"].forEach(e=>{switch(e){case"arcgis-placement":customElements.get(e)||customElements.define(e,y4e);break}})}v4e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const _4e="",b4e=_4e,x4e=vm(b5e),fW=[0,"arcgis-distance-measurement-2d",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],icon:[1025],label:[1025],unit:[1025],unitOptions:[1040],position:[1025],state:[1537],destroy:[64]}],w4e=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>fW[2]??{},this.arcgisReady=Mt(this,"arcgisReady",7),this.arcgisPropertyChange=Mt(this,"arcgisPropertyChange",7),this.manager=Of(this,Mo),this.widget=x4e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=H0()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.icon=this.widget.icon,this.label=this.widget.label,this.unit=this.widget.unit,this.unitOptions=this.widget.unitOptions,this.position="bottom-left",this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return b4e}},fW);function S4e(){if(typeof customElements>"u")return;["arcgis-distance-measurement-2d"].forEach(e=>{switch(e){case"arcgis-distance-measurement-2d":customElements.get(e)||customElements.define(e,w4e);break}})}S4e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const E4e="",C4e=E4e,P4e=vm(g5e),pW=[0,"arcgis-area-measurement-2d",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],label:[1025],icon:[1025],unit:[1025],unitOptions:[1040],position:[1025],state:[1537],destroy:[64]}],T4e=zi(class extends Fi{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>pW[2]??{},this.arcgisReady=Mt(this,"arcgisReady",7),this.arcgisPropertyChange=Mt(this,"arcgisPropertyChange",7),this.manager=Of(this,Mo),this.widget=P4e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=H0()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.label=this.widget.label,this.icon=this.widget.icon,this.unit=this.widget.unit,this.unitOptions=this.widget.unitOptions,this.position="bottom-left",this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return C4e}},pW);function I4e(){if(typeof customElements>"u")return;["arcgis-area-measurement-2d"].forEach(e=>{switch(e){case"arcgis-area-measurement-2d":customElements.get(e)||customElements.define(e,T4e);break}})}I4e();function I(t,e,i,n){var s,r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function Xut(t,e){return function(i,n){e(i,n,t)}}function Wut(t,e,i,n){function s(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function l(y){try{f(n.next(y))}catch(_){o(_)}}function c(y){try{f(n.throw(y))}catch(_){o(_)}}function f(y){y.done?r(y.value):s(y.value).then(l,c)}f((n=n.apply(t,[])).next())})}function sc(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(r){return Promise.reject(r)}}),t.stack.push({value:e,dispose:n,async:i})}return e}var M4e=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var n=new Error(i);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function _m(t){function e(r){t.error=t.hasError?new M4e(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}var i,n=0;function s(){for(;i=t.stack.pop();)try{if(!i.async&&n===1)return n=0,t.stack.push(i),Promise.resolve().then(s);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return n|=2,Promise.resolve(r).then(s,function(o){return e(o),s()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}let r0;function ht(t){return typeof r0[t]=="function"?r0[t]=r0[t](globalThis):r0[t]}var Ase,kse,Dse,Nse;r0=(Ase=globalThis.dojoConfig)!=null&&Ase.has||(kse=globalThis.esriConfig)!=null&&kse.has?{...(Dse=globalThis.dojoConfig)==null?void 0:Dse.has,...(Nse=globalThis.esriConfig)==null?void 0:Nse.has}:{},ht.add=(t,e,i,n)=>{(n||r0[t]===void 0)&&(r0[t]=e),i&&ht(t)},ht.cache=r0,ht.add("big-integer-warning-enabled",!0),ht.add("esri-deprecation-warnings",!0),ht.add("esri-tests-disable-screenshots",!1),ht.add("esri-tests-use-full-window",!1),ht.add("esri-tests-post-to-influx",!0),ht.add("esri-cim-animations-enable-status","enabled"),ht.add("esri-cim-animations-spotlight",!1),ht.add("esri-cim-animations-freeze-time",!1),ht.add("enable-feature:multiple-highlights",!1),(()=>{var e;ht.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ht.add("host-browser",t),ht.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ht.add("dom",t),ht("host-browser")){const i=navigator,n=i.userAgent,s=i.appVersion,r=parseFloat(s);if(ht.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),ht.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),ht.add("khtml",s.includes("Konqueror")?r:void 0),ht.add("edge",parseFloat(n.split("Edge/")[1])||void 0),ht.add("opr",parseFloat(n.split("OPR/")[1])||void 0),ht.add("webkit",!ht("wp")&&!ht("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),ht.add("chrome",!ht("edge")&&!ht("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),ht.add("android",!ht("wp")&&parseFloat(n.split("Android ")[1])||void 0),ht.add("safari",!s.includes("Safari")||ht("wp")||ht("chrome")||ht("android")||ht("edge")||ht("opr")?void 0:parseFloat(s.split("Version/")[1])),ht.add("mac",s.includes("Macintosh")),!ht("wp")&&/(iPhone|iPod|iPad)/.test(n)){const o=RegExp.$1.replace(/P/,"p"),l=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",c=parseFloat(l.replace(/_/,".").replaceAll("_",""));ht.add(o,c),ht.add("ios",c)}ht("webkit")||(!n.includes("Gecko")||ht("wp")||ht("khtml")||ht("edge")||ht.add("mozilla",r),ht("mozilla")&&ht.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ht.add("esri-mobile",e),i&&ht.add("esri-iPhone",i),ht.add("esri-geolocation",!!navigator.geolocation)}ht.add("esri-wasm","WebAssembly"in globalThis),ht.add("esri-performance-mode-frames-between-render",20),ht.add("esri-force-performance-mode",!1),ht.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),ht.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ht.add("esri-atomics","Atomics"in globalThis),ht.add("esri-workers","Worker"in globalThis),ht.add("web-feat:cache","caches"in globalThis),ht.add("esri-workers-arraybuffer-transfer",!ht("safari")||Number(ht("safari"))>=12),ht.add("workers-pool-size",8),ht.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ht.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ht.add("featurelayer-fast-triangulation-enabled",!0),ht.add("featurelayer-animation-enabled",!0),ht.add("featurelayer-snapshot-enabled",!0),ht.add("featurelayer-snapshot-point-min-threshold",8e4),ht.add("featurelayer-snapshot-point-max-threshold",4e5),ht.add("featurelayer-snapshot-point-coverage",.1),ht.add("featurelayer-query-max-depth",4),ht.add("featurelayer-query-pausing-enabled",!1),ht.add("featurelayer-advanced-symbols",!1),ht.add("featurelayer-pbf",!0),ht.add("featurelayer-pbf-statistics",!1),ht.add("feature-layers-workers",!0),ht.add("feature-polyline-generalization-factor",1),ht.add("mapview-transitions-duration",200),ht.add("mapview-essential-goto-duration",200),ht.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ht.add("mapserver-pbf-version-support",10.81),ht.add("mapservice-popup-identify-max-tolerance",20),ht("host-webworker")||ht("host-browser")&&(ht.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ht.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{ht.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ht.add("esri-image-decode",!1,!0,!0)})}return!1}),ht.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();let FT=class G1{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*G1._m}getInt(){return this._seed=(G1._a*this._seed+G1._c)%G1._m,this._seed}getFloat(){return this.getInt()/(G1._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const n=i-e;return e+this.getInt()/G1._m*n}};FT._m=2147483647,FT._a=48271,FT._c=0;const A4e=1.5,Zut=1/A4e,Kut=.5;function Jut(t,e){if(!e)return t;for(const i of e)t.push(i);return t}function Qut(t,e){return e?t.filter((i,n,s)=>s.findIndex(e.bind(null,i))===n):Array.from(new Set(t))}function wf(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function k4e(t,e,i){let n,s;return i?(n=e.filter(r=>!t.some(o=>i(o,r))),s=t.filter(r=>!e.some(o=>i(o,r)))):(n=e.filter(r=>!t.includes(r)),s=t.filter(r=>!e.includes(r))),{added:n,removed:s}}function eht(t){return t&&typeof t.length=="number"}let Koe=class{constructor(){this.last=0}};const Joe=new Koe;function t$(t,e,i,n){n=n||Joe;const s=Math.max(0,n.last-10);for(let o=s;o<i;++o)if(t[o]===e)return n.last=o,o;const r=Math.min(s,i);for(let o=0;o<r;++o)if(t[o]===e)return n.last=o,o;return-1}function D4e(t,e,i,n){const s=t.length,r=t$(t,e,s,n);if(r!==-1)return t[r]=t[s-1],t.pop(),e}const gh=new Set;function N4e(t,e,i=t.length,n=e.length,s,r){if(n===0||i===0)return i;gh.clear();for(let l=0;l<n;++l)gh.add(e[l]);s=s||Joe;const o=Math.max(0,s.last-10);for(let l=o;l<i;++l)if(gh.has(t[l])&&(r==null||r.push(t[l]),gh.delete(t[l]),t[l]=t[i-1],--i,--l,gh.size===0||i===0))return gh.clear(),i;for(let l=0;l<o;++l)if(gh.has(t[l])&&(r==null||r.push(t[l]),gh.delete(t[l]),t[l]=t[i-1],--i,--l,gh.size===0||i===0))return gh.clear(),i;return gh.clear(),i}function iht(t,e){let i=0;for(let n=0;n<t.length;++n){const s=t[n];e(s,n)&&(t[i]=s,i++)}t.length=i}function Qoe(t){return t?(mW.seed=t,()=>mW.getFloat()):Math.random}function eae(t,e){const i=Qoe(e);for(let n=t.length-1;n>0;n--){const s=Math.floor(i()*(n+1)),r=t[n];t[n]=t[s],t[s]=r}return t}const mW=new FT;function qM(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function xl(t,e){return t!=null}const nht=[];function tae(t){return 32+t.length}function Jq(){return 16}function sht(t){if(!t)return 0;let e=nae;for(const i in t)if(t.hasOwnProperty(i)){const n=t[i];switch(typeof n){case"string":e+=tae(n);break;case"number":e+=Jq();break;case"boolean":e+=4}}return e}function O4e(t){if(!t)return 0;if(Array.isArray(t))return $4e(t);let e=nae;for(const i in t)t.hasOwnProperty(i)&&(e+=iae(t[i]));return e}function $4e(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=sae;for(let n=0;n<e;n++)i+=iae(t[n]);return i}function iae(t){switch(typeof t){case"object":return O4e(t);case"string":return tae(t);case"number":return Jq();case"boolean":return 4;default:return 8}}function R4e(t,e){return sae+t.length*e}const nae=32,sae=16;function rht(t){return t instanceof ArrayBuffer}function Qq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function rae(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function oae(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function eV(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function aae(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function tV(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function lae(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function DC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function NC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function cae(t){return!("buffer"in t)}function oht(...t){return t.reduce((e,i)=>e+(i?cae(i)?R4e(i,Jq()):i.byteLength+L4e:0),0)}const L4e=145,uae=1024;function aht(t){return NC(t)||DC(t)||tV(t)||eV(t)||Qq(t)}function lht(t){return NC(t)||DC(t)}function cht(t){return NC(t)?179769e303:DC(t)?3402823e32:lae(t)?4294967295:aae(t)?65535:rae(t)||oae(t)?255:tV(t)?2147483647:eV(t)?32767:Qq(t)?127:256}function iV(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function Ue(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=pae(t);if(e!=null)return e;if(hae(t))return t.clone();if(dae(t))return t.map(Ue);if(fae(t))return t.clone();const i={};for(const n of Object.getOwnPropertyNames(t))i[n]=Ue(t[n]);return i}function i$(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=pae(t);if(e!=null)return e;if(dae(t)){let i=!0;const n=t.map(s=>{const r=i$(s);return s!=null&&r==null&&(i=!1),r});return i?n:null}if(hae(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!fae(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],r=i$(s);if(s!=null&&r==null)return null;i[n]=r}return i}return null}function hae(t){return typeof t.clone=="function"}function dae(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function fae(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function gW(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function pae(t){if(Qq(t)||rae(t)||oae(t)||eV(t)||aae(t)||tV(t)||lae(t)||DC(t)||NC(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,n]of t)e.set(i,Ue(n));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(Ue(i));return e}return null}function nV(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function mae(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&wf(t,e):t instanceof Set?e instanceof Set&&z4e(t,e):t instanceof Map?e instanceof Map&&q4e(t,e):!!gW(t)&&gW(e)&&F4e(t,e))}function F4e(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const n of i)if(t[n]!==e[n]||!Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function z4e(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function q4e(t,e){if(t.size!==e.size)return!1;for(const[i,n]of t){const s=e.get(i);if(s!==n||s===void 0&&!e.has(i))return!1}return!0}function sV(t,e,i=!1){return yae(t,e,i)}function Yp(t,e){if(e!=null)return e[t]||gae(t.split("."),!1,e)}function il(t,e,i){const n=t.split("."),s=n.pop(),r=gae(n,!0,i);r&&s&&(r[s]=e)}function yW(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let n=0;n<t.length;n++)if(yW(t[n],i[n]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(yW(t[i],e[i]))return!0;return!1}return t!==e}function gae(t,e,i){let n=i;for(const s of t){if(n==null)return;if(!(s in n)){if(!e)return;n[s]={}}n=n[s]}return n}function yae(t,e,i){return e?Object.keys(e).reduce((n,s)=>{let r=n[s],o=e[s];return r===o?n:r===void 0?(n[s]=Ue(o),n):(Array.isArray(o)||Array.isArray(n)?(r=r?Array.isArray(r)?n[s]=r.slice():n[s]=[r]:n[s]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(l=>{r.includes(l)||r.push(l)}):n[s]=o.slice())):o&&typeof o=="object"?n[s]=yae(r,o,i):n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[s]=o),n)},t||{}):t}var Ose;const jn={apiKey:void 0,applicationName:"",applicationUrl:(Ose=globalThis.location)==null?void 0:Ose.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(sV(jn,globalThis.esriConfig,!0),delete jn.has),!jn.assetsPath){{const t="4.31";jn.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}jn.defaultAssetsPath=jn.assetsPath}const V4e=/\{([^}]+)\}/g;function vW(t){return t??""}function VM(t,e){return e?t.replaceAll(V4e,typeof e=="object"?(i,n)=>vW(Yp(n,e)):(i,n)=>vW(e(n))):t}function uht(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e!=null&&e.includes(i)?i:`\\${i}`)}function vae(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let _W;function hht(t){return _W??(_W=new DOMParser),_W.parseFromString(t||"","text/html").body.innerText||""}function dht(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function fht(t,...e){let i=t[0];for(let n=0;n<e.length;++n)i+=e[n]+t[n+1];return i}const bW={info:0,warn:1,error:2,none:3};let qt=class _c{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,_c._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=_c.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,_c._loggers.get(e)||new _c({module:e})}_log(e,i,...n){if(this._matchLevel(e)){if(i!=="always"&&!_c._throttlingDisabled){const s=j4e(n),r=this._loggedMessages[e].get(s);if(i==="once"&&r!=null||i==="oncePerTick"&&r&&r>=_c._tickCounter)return;this._loggedMessages[e].set(s,_c._tickCounter),_c._scheduleTickCounterIncrement()}for(const s of jn.log.interceptors)if(s(e,this.module,...n))return;this._inheritedWriter()(e,this.module,...n)}}_parentWithMember(e,i){let n=this;for(;n!=null;){const s=n[e];if(s!=null)return s;n=n.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",G4e)}_matchLevel(e){const i=jn.log.level||"warn";return bW[this._parentWithMember("level",i)]<=bW[e]}static _scheduleTickCounterIncrement(){_c._tickCounterScheduled||(_c._tickCounterScheduled=!0,Promise.resolve().then(()=>{_c._tickCounter++,_c._tickCounterScheduled=!1}))}};function G4e(t,e,...i){console[t](`[${e}]`,...i)}function j4e(...t){return vae(JSON.stringify(t,(i,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}qt._loggers=new Map,qt._tickCounter=0,qt._tickCounterScheduled=!1,qt._throttlingDisabled=!1;function B4e(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,n)=>n===""?"$":(Yp(n,e)??"").toString())}let _ae=class{constructor(e,i,n=void 0){this.name=e,this.details=n,this.message=(i&&B4e(i,n))??""}toString(){return"["+this.name+"]: "+this.message}},rt=class bae extends _ae{constructor(e,i,n){super(e,i,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return Ue(i)}catch{return"[object]"}}))}}catch(e){throw qt.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new bae(e.name,e.message,e.details)}};rt.prototype.type="error";const xW=new WeakMap;function H4e(t,e,i=!1){const n=`🛑 DEPRECATED - ${e}`;if(!i)return void t.warn(n);let s=xW.get(t);s||(s=new Set,xW.set(t,s)),s.has(e)||(s.add(e),t.warn(n))}function xae(t,e,i={}){if(ht("esri-deprecation-warnings")){const{moduleName:n}=i;k2(t,`Function: ${(n?n+"::":"")+e+"()"}`,i)}}function z9(t,e,i={}){if(ht("esri-deprecation-warnings")){const{moduleName:n}=i;k2(t,`Property: ${(n?n+"::":"")+e}`,i)}}function U4e(t,e,i={}){ht("esri-deprecation-warnings")&&k2(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function k2(t,e,i={}){if(ht("esri-deprecation-warnings")){const{replacement:n,version:s,see:r,warnOnce:o}=i;let l=e;n&&(l+=`
	🛠️ Replacement: ${n}`),s&&(l+=`
	⚙️ Version: ${s}`),r&&(l+=`
	🔗 See ${r} for more details.`),H4e(t,l,o)}}function mht(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function ght(t,e){for(const i of t)if(i!=null&&e(i))return i}function wW(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let GM=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(wW(e)){const n=this._getOrCreateGroup(i);for(const s of e)EW(s)&&n.push(s)}else EW(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(n=>n.forEach(e));else{const n=this._getGroup(e);n&&i&&n.forEach(i)}}has(e){return this._groups.has(c4(e))}remove(e){if(typeof e!="string"&&wW(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(SW(this._getGroup(e)),this._groups.delete(c4(e)),this):this}removeAll(){return this._groups.forEach(SW),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(c4(e),i),i}_getGroup(e){return this._groups.get(c4(e))}};function c4(t){return t||"_default_"}function SW(t){for(const e of t)e instanceof GM?e.removeAll():e.remove()}function EW(t){return t!=null&&(!!t.remove||t instanceof GM)}function Y4e(t,e){if(t==null)throw new Error(e??"value is None")}function co(t){return t==null||t.destroy(),null}function vht(t){return t==null||t.dispose(),null}function Po(t){return t==null||t.remove(),null}function _0(t){return t==null||t.abort(),null}function _ht(t){return t==null||t.release(),null}function wae(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function X4e(t,e){let i;return t.some((n,s)=>(i=e(n,s),i!=null)),i??void 0}const Sae=Symbol("Accessor-beforeDestroy"),W4e={remove:()=>{}};function fn(t){return t?{remove(){t&&(t(),t=void 0)}}:W4e}function Eae(t){t.forEach(e=>e==null?void 0:e.remove())}function Ad(t){Eae(t),t.length=0}function bm(t){return fn(()=>Eae(t))}function bht(t){return fn(()=>{var e;return(e=t())==null?void 0:e.remove()})}function xht(t){return fn(()=>t==null?void 0:t.abort())}function Z4e(t){return fn(t!=null?()=>t.destroy():void 0)}function Pl(t){return t.__accessor__??null}function K4e(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function zT(t,e,i){return i?q9(t,e,{policy:i,path:""}):q9(t,e,null)}function q9(t,e,i){return e?Object.keys(e).reduce((n,s)=>{const r=s;let o=null,l="merge";if(i&&(o=i.path?`${i.path}.${s}`:s,l=i.policy(o)),l==="replace"||l==="replace-arrays"&&Array.isArray(n[r]))return n[r]=e[r],n;if(n[r]===void 0)return n[r]=Ue(e[r]),n;let c=n[r],f=e[r];if(c===f)return n;if(Array.isArray(f)||Array.isArray(n))c=c?Array.isArray(c)?n[r]=c.slice():n[r]=[c]:n[r]=[],f&&(Array.isArray(f)||(f=[f]),f.forEach(y=>{c.includes(y)||c.push(y)}));else if(f&&typeof f=="object")if(i){const y=i.path;i.path=o,n[r]=q9(c,f,i),i.path=y}else n[r]=q9(c,f,null);else n.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(n[r]=f);return n},t||{}):t}function Cae(t){return Array.isArray(t)?t:t.split(".")}function CW(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function J4e(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...CW(i));return e}return CW(t)}function Pae(t,e,i,n){const s=J4e(e);if(s.length!==1){const r=s.map(o=>n(t,o,i));return bm(r)}return n(t,s[0],i)}function Tae(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=Pl(e);return K4e(n,i)?n.get(i):e[i]}function Iae(t,e,i){if(t==null)return t;const n=Tae(e[i],t);return!n&&i<e.length-1?void 0:i===e.length-1?n:Iae(n,e,i+1)}function OC(t,e,i=0){return typeof e!="string"||e.includes(".")?Iae(t,Cae(e),i):Tae(e,t)}function Lu(t,e){return OC(t,e)}function PW(t,e){return OC(e,t)!==void 0}var Kl;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED",t[t.DESTROYED=3]="DESTROYED"})(Kl||(Kl={}));function $C(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const n in e)e[n]=Ue(e[n]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function jM(t,e){const i=$C(t);let n=i[e];return n||(n=i[e]={}),n}function Q4e(t,e){return zT(t,e,tTe)}const eTe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function tTe(t){return eTe.test(t)?"replace":"merge"}function iTe(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function nTe(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let RC=class n${constructor(e,i,n,s=1,r=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=n,this.allocationSize=s,this._pool=new Array(r),this._initialSize=r;for(let o=0;o<r;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(n$.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let s=0;s<n;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):nTe(i)&&i.acquire(...e),i}release(e){e&&!n$.test.disabled&&(this._releaseFunction?this._releaseFunction(e):iTe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const n=this._pool[i];this._dispose(n)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};RC.test={disabled:!1};let sTe=class{constructor(e,i){this._observers=e,this._observer=i}remove(){qM(this._observers,this._observer)}},Mae=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return rTe;this._observers==null&&(this._observers=[]);const i=this._observers;let n=!1,s=!1;const r=i.length;for(let o=0;o<r;++o){const l=i[o];if(l.destroyed)s=!0;else if(l===e){n=!0;break}}return n||(i.push(e),s&&this._removeDestroyedObservers()),new sTe(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let n=0;for(let s=0;s<i;++s){for(;s+n<i&&e[s+n].destroyed;)++n;if(n>0){if(!(s+n<i))break;e[s]=e[s+n]}}e.length=i-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const rTe=fn();var Ui;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Ui||(Ui={}));const s$=Ui.USER+1;function o0(t){switch(t){case"defaults":return Ui.DEFAULTS;case"service":return Ui.SERVICE;case"portal-item":return Ui.PORTAL_ITEM;case"web-scene":return Ui.WEB_SCENE;case"web-map":return Ui.WEB_MAP;case"link-chart":return Ui.LINK_CHART;case"user":return Ui.USER;default:return null}}function V9(t){switch(t){case Ui.DEFAULTS:return"defaults";case Ui.SERVICE:return"service";case Ui.PORTAL_ITEM:return"portal-item";case Ui.WEB_SCENE:return"web-scene";case Ui.WEB_MAP:return"web-map";case Ui.LINK_CHART:return"link-chart";case Ui.USER:return"user"}}function oTe(t){return V9(t)}var Jn;(function(t){t[t.Dirty=1]="Dirty",t[t.Overridden=2]="Overridden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Jn||(Jn={}));let BM=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const G9=new BM,T3=[];let FS=G9;function mi(t){FS.onAccessed(t)}let qT=!1,VT=!1;function nm(t,e,i){if(qT)return rV(t,e,i);let n=null;return Aae(t),n=e.call(i),kae(),n}function aTe(t,e){return nm(G9,t,e)}function rV(t,e,i){const n=qT;qT=!0,Aae(t);let s=null;try{s=e.call(i)}catch(r){VT&&qt.getLogger("esri.core.accessorSupport.tracking").error(r)}return kae(),qT=n,s}function Aae(t){FS=t,T3.push(t)}function kae(){const t=T3.length;if(t>1){const e=T3.pop();FS=T3[t-2],e.onTrackingEnd()}else if(t===1){const e=T3.pop();FS=G9,e.onTrackingEnd()}else FS=G9}function Dae(t,e){if(e.flags&Jn.DepTrackingInitialized)return;e.flags|=Jn.DepTrackingInitialized;const i=VT;VT=!1,e.flags&Jn.AutoTracked?rV(e.trackingTarget,e.metadata.get,t):Nae(t,e),VT=i}const lTe=[];function Nae(t,e){e.flags&Jn.ExplicitlyTracking||(e.flags|=Jn.ExplicitlyTracking,rV(e.trackingTarget,()=>{const i=e.metadata.dependsOn||lTe;for(const n of i)if(typeof n!="string"||n.includes(".")){const s=Cae(n);for(let r=0,o=t;r<s.length&&o!=null&&typeof o=="object";++r)o=TW(o,s[r],r!==s.length-1)}else TW(t,n,!1)}),e.flags&=~Jn.ExplicitlyTracking)}function TW(t,e,i){const n=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const r=parseInt(n,10);if(!isNaN(r))return Array.isArray(t)?t[r]:t.at(r)}const s=Pl(t);if(s){const r=s.propertiesByName.get(n);r&&(mi(r),Dae(t,r))}return i?t[n]:void 0}let IW=class extends Mae{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new BM(this),this.flags=0,this.flags=Jn.Dirty|(i.nonNullable?Jn.NonNullable:0)|(i.hasOwnProperty("value")?Jn.HasDefaultValue:0)|(i.get===void 0?Jn.DepTrackingInitialized:0)|(i.dependsOn===void 0?Jn.AutoTracked:0)}destroy(){this.flags&Jn.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&mi(this);const i=e.store,n=this.propertyName,s=this.flags,r=i.get(n);if(s&Jn.Computing||~s&Jn.Dirty&&i.has(n))return r;this.flags|=Jn.Computing;const o=e.host;let l;s&Jn.AutoTracked?l=nm(this.trackingTarget,this.metadata.get,o):(Nae(o,this),l=this.metadata.get.call(o)),this.flags|=Jn.DepTrackingInitialized,i.set(n,l,Ui.COMPUTED);const c=i.get(n);return c===r?this.flags&=~Jn.Dirty:aTe(this.commit,this),this.flags&=~Jn.Computing,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Jn.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Jn.Overridden&&(this.flags|=Jn.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onCommitted()}}},cTe=class Oae{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Oae;return this._values.forEach((n,s)=>{e&&e.has(s)||i.set(s,Ue(n))}),i}get(e){return this._values.get(e)}originOf(){return Ui.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function u4(t,e,i){return t!==void 0}function MW(t,e,i,n){return t!==void 0&&(!(i==null&&t.flags&Jn.NonNullable)||(n.lifecycle,Kl.INITIALIZING,!1))}let uTe=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Kl.INITIALIZING,this.store=new cTe,this.mutable=!0,this._origin=Ui.USER;const i=this.host.constructor.__accessorMetadata__;for(const n in i){const s=new IW(n,i[n]);this.propertiesByName.set(n,s)}this.metadata=i}initialize(){this.lifecycle=Kl.CONSTRUCTING}constructed(){this.lifecycle=Kl.CONSTRUCTED}destroy(){this.lifecycle=Kl.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==Kl.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);this.mutable&&mi(i);const n=this.store;return n.has(e)?n.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const n=this.propertiesByName.get(e);if(n!==void 0&&n.flags&Jn.HasDefaultValue)return"defaults"}return V9(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(u4(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const n=this.propertiesByName.get(e);u4(n)&&this._internalSet(n,i)}getDependsInfo(e,i,n){const s=this.propertiesByName.get(i);if(!u4(s))return"";const r=new BM,o=nm(r,()=>{var f;return(f=s.metadata.get)==null?void 0:f.call(e)});let l=`${n}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const c=r.accessed??new Set;if(c.size===0)return l;n+="  ";for(const f of c)f instanceof IW&&(l+=`${n}${f.propertyName}: undefined
`);return l}setAtOrigin(e,i,n){const s=this.propertiesByName.get(e);if(u4(s))return this._setAtOrigin(s,i,n)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Jn.Overridden)}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Jn.Overridden&&(i.flags&=~Jn.Overridden,i.notifyChange())}override(e,i){const n=this.propertiesByName.get(e);if(!MW(n,e,i,this))return;const s=n.metadata.cast;if(s){const r=this._cast(s,i),{valid:o,value:l}=r;if(m8.release(r),!o)return;i=l}n.flags|=Jn.Overridden,this._internalSet(n,i)}set(e,i){const n=this.propertiesByName.get(e);if(!MW(n,e,i,this))return;const s=n.metadata.cast;if(s){const o=this._cast(s,i),{valid:l,value:c}=o;if(m8.release(o),!l)return;i=c}const r=n.metadata.set;r?r.call(this.host,i):this._internalSet(n,i)}setDefaultOrigin(e){this._origin=o0(e)}getDefaultOrigin(){return V9(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const n=this.lifecycle!==Kl.INITIALIZING?this._origin:Ui.DEFAULTS;this._setAtOrigin(e,i,n)}_setAtOrigin(e,i,n){const s=this.store,r=e.propertyName;s.has(r,n)&&nV(i,s.get(r))&&~e.flags&Jn.Overridden&&n===s.originOf(r)||(e.invalidate(),s.set(r,i,n),e.commit(),Dae(this.host,e))}_cast(e,i){const n=m8.acquire();return n.valid=!0,n.value=i,e&&(n.value=e.call(this.host,i,n)),n}},hTe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const m8=new RC(hTe);function j9(t,e,i){if(t&&e)if(typeof e=="object")for(const n of Object.getOwnPropertyNames(e))j9(t,n,e[n]);else{if(e.includes(".")){const s=e.split("."),r=s.splice(-1,1)[0];return void j9(Lu(t,s),r,i)}const n=t.__accessor__;n!=null&&dTe(e,n),t[e]=i}}function dTe(t,e){if(ht("esri-unknown-property-errors")&&!fTe(t,e))throw new rt("set:unknown-property",pTe(t,e))}function fTe(t,e){return e.metadata[t]!=null}function pTe(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let mTe;function gTe(){return mTe}var AW;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(AW||(AW={}));function yTe(t){t.length=0}let rf=class{constructor(e=50,i=50){this._pool=new RC(Array,void 0,yTe,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return g8.acquire()}static release(e){return g8.release(e)}static prune(){g8.prune()}};const g8=new rf(100);let $ae=class extends RC{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const h4=[];function D2(t){h4.push(t),h4.length===1&&queueMicrotask(()=>{const e=h4.slice();h4.length=0;for(const i of e)i()})}let zS=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var r$;(function(t){const e=(r,o,l,c)=>{let f=o,y=o;const _=l>>>1,x=r[f-1];for(;y<=_;){y=f<<1,y<l&&c(r[y-1],r[y])<0&&++y;const S=r[y-1];if(c(S,x)<=0)break;r[f-1]=S,f=y}r[f-1]=x},i=(r,o)=>r<o?-1:r>o?1:0;function n(r,o,l,c){o===void 0&&(o=0),l===void 0&&(l=r.length),c===void 0&&(c=i);for(let y=l>>>1;y>o;y--)e(r,y,l,c);const f=o+1;for(let y=l-1;y>o;y--){const _=r[o];r[o]=r[y],r[y]=_,e(r,f,y,c)}}function*s(r,o,l,c){o===void 0&&(o=0),l===void 0&&(l=r.length),c===void 0&&(c=i);for(let y=l>>>1;y>o;y--)e(r,y,l,c),yield;const f=o+1;for(let y=l-1;y>o;y--){const _=r[o];r[o]=r[y],r[y]=_,e(r,f,y,c),yield}}t.sort=n,t.iterableSort=s})(r$||(r$={}));const kW=r$,vTe=1.5,_Te=1.1;let Yy=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Koe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>DW(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let n=0;n<this._length;n++){const s=this.data[n];e(s)&&i.push(s)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const n=this.data.indexOf(e,i);return n!==-1&&n<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let n=0;n<i;n++)this.data[this._length++]=e[n]}fill(e,i){for(let n=0;n<i;n++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,DW(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=t$(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(t$(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,n){this.length=N4e(this.data,e,this.length,i,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const n=this.data[e];this.data[e]=this.data[i],this.data[i]=n}sort(e){kW.sort(this.data,0,this.length,e)}iterableSort(e){return kW.iterableSort(this.data,0,this.length,e)}some(e,i){for(let n=0;n<this.length;++n)if(e.call(i,this.data[n],n,this.data))return!0;return!1}find(e,i){const{data:n,length:s}=this;for(let r=0;r<s;++r)if(e.call(i,n[r]))return n[r]}filterInPlace(e,i){let n=0;for(let s=0;s<this._length;++s){const r=this.data[s];e.call(i,r,s,this.data)&&(this.data[s]=this.data[n],this.data[n]=r,n++)}if(this._deallocator)for(let s=n;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=n,this._shrink(),this}forAll(e,i){const{data:n,length:s}=this;for(let r=0;r<s;++r)e.call(i,n[r],r,n)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const n=new Array(this.length);for(let s=0;s<this.length;++s)n[s]=e.call(i,this.data[s],s,this.data);return n}reduce(e,i){let n=i;for(let s=0;s<this.length;++s)n=e(n,this.data[s],s,this.data);return n}has(e){const i=this.length,n=this.data;for(let s=0;s<i;++s)if(n[s]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function DW(t){t.data.length>vTe*t.length&&(t.data.length=Math.floor(t.length*_Te))}function bTe(t){return{setTimeout:(e,i)=>{const n=t.setTimeout(e,i);return fn(()=>t.clearTimeout(n))}}}const xTe=bTe(globalThis);function HM(t){return wTe(t)||Rae(t)}function wTe(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function Rae(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function Xy(t,e,i){if(!HM(t))throw new TypeError("target is not a Evented or EventTarget object");return Rae(t)?STe(t,e,i):t.on(e,i)}function STe(t,e,i,n){if(Array.isArray(e)){const s=e.slice();for(const r of s)t.addEventListener(r,i,n);return fn(()=>{for(const r of s)t.removeEventListener(r,i,n)})}return t.addEventListener(e,i,n),fn(()=>t.removeEventListener(e,i,n))}function Lae(t,e,i){if(!HM(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const n=Xy(t,e,s=>{n.remove(),i.call(t,s)});return n}function lr(t="Aborted"){return new rt("AbortError",t)}function oc(t,e="Aborted"){if(jc(t))throw lr(e)}function LC(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function jc(t){const e=LC(t);return e!=null&&e.aborted}function jh(t){if(vd(t))throw t}function NW(t){if(!vd(t))throw t}function Jl(t,e){const i=LC(t);if(i!=null){if(!i.aborted)return Lae(i,"abort",()=>e());e()}}function Fae(t,e){const i=LC(t);if(i!=null)return oc(i),Lae(i,"abort",()=>e(lr()))}function FC(t,e){return LC(e)==null?t:new Promise((i,n)=>{let s=Jl(e,()=>n(lr()));const r=()=>{s=Po(s)};t.then(r,r),t.then(i,n)})}function vd(t){return(t==null?void 0:t.name)==="AbortError"}async function ad(t){try{return await t}catch(e){if(!vd(e))throw e;return}}async function oV(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),n=i.map(o=>t[o]),s=await oV(n),r={};return i.map((o,l)=>r[o]=s[l]),r}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(n,s)=>{const r=i[s];return r.status==="fulfilled"?{promise:n,value:r.value}:{promise:n,error:r.reason}}))}async function Dht(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function Nht(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function ETe(t,e=void 0,i){const n=new AbortController;return Jl(i,()=>n.abort()),new Promise((s,r)=>{let o=setTimeout(()=>{o=0,s(e)},t);Jl(n,()=>{o&&(clearTimeout(o),r(lr()))})})}function Oht(t,e){const i=new AbortController,n=setTimeout(()=>i.abort(),e);return Jl(t,()=>{i.abort(),clearTimeout(n)}),{...t,signal:i.signal}}function zv(t){return t&&typeof t.then=="function"}function o$(t){return zv(t)?t:Promise.resolve(t)}function qv(t,e=-1){let i,n,s,r,o=null;const l=(...c)=>{if(i){n=c,r&&r.reject(lr()),r=Oc();const x=r.promise;if(o){const S=o;o=null,S.abort()}return x}if(s=r||Oc(),r=null,e>0){const x=new AbortController;i=o$(t(...c,x.signal));const S=i;ETe(e).then(()=>{i===S&&(r?x.abort():o=x)})}else i=1,i=o$(t(...c));const f=()=>{const x=n;n=s=i=o=null,x!=null&&l(...x)},y=i,_=s;return y.then(f,f),y.then(_.resolve,_.reject),_.promise};return l}function Oc(){let t,e;const i=new Promise((s,r)=>{t=s,e=r}),n=s=>{t(s)};return n.resolve=s=>t(s),n.reject=s=>e(s),n.timeout=(s,r)=>xTe.setTimeout(()=>n.reject(r),s),n.promise=i,n}async function OW(t){await Promise.resolve(),oc(t)}function $ht(t){return t}function Rht(t){return 1e3*t}function Lht(t){return t}function Fht(t){return .001*t}let CTe=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},PTe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},a$=0;const Zw={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},l$=["prepare","preRender","render","postRender","update","finish"],c$=[],ov=new Yy;let TTe=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function ITe(){Wy!=null&&(cancelAnimationFrame(Wy),Wy=requestAnimationFrame(lV))}const B9={frameTasks:ov,willDispatch:!1,clearFrameTasks:MTe,dispatch:qae,executeFrameTasks:ATe,reschedule:ITe};function aV(t){const e=new PTe(t);return c$.push(e),B9.willDispatch||(B9.willDispatch=!0,D2(qae)),e}function Ght(t){const e=new CTe(t);return ov.push(e),Wy==null&&(a$=performance.now(),Wy=requestAnimationFrame(lV)),new TTe(e)}let Wy=null;function MTe(t=!1){ov.forAll(e=>{e.removed=!0}),t&&zae()}function lV(){const t=performance.now();Wy=null,Wy=ov.length>0?requestAnimationFrame(lV):null,B9.executeFrameTasks(t)}function ATe(t){const e=t-a$;a$=t;const i=1e3/60,n=Math.max(0,e-i);Zw.time=t,Zw.frameDuration=i-n;for(let s=0;s<l$.length;s++){const r=performance.now(),o=l$[s];ov.forAll(l=>{var c;l.paused||l.removed||(s===0&&l.ticks++,l.phases[o]&&(Zw.elapsedFrameTime=performance.now()-t,Zw.deltaTime=l.ticks===0?0:e,(c=l.phases[o])==null||c.call(l,Zw)))}),OTe[s].push(performance.now()-r)}zae(),$Te.push(performance.now()-t)}const d4=new Yy;function zae(){ov.forAll(t=>{t.removed&&d4.push(t)}),ov.removeUnorderedMany(d4.data,d4.length),d4.clear()}function qae(){for(;c$.length;){const t=c$.shift();t.isActive&&t.callback()}B9.willDispatch=!1}function kTe(t=1,e){const i=Oc(),n=()=>{jc(e)?i.reject(lr()):t===0?i():(--t,D2(()=>n()))};return n(),i.promise}function DTe(t){return kTe(1,t)}async function NTe(t){await DTe(t),await new Promise(e=>requestAnimationFrame(()=>{t!=null&&t.aborted||e()}))}const OTe=l$.map(t=>new zS(t)),$Te=new zS("total");function RTe(t,e){for(const i of t.values())if(e(i))return!0;return!1}function H9(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function $W(t,e){return e!=null&&t.add(e),t}function Vae(t,e){const i=new Set;return H9(i,t),H9(i,e),i}function Gae(t,e){const i=new Set;for(const n of e)t.has(n)&&i.add(n);return i}function jht(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function Bht(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function LTe(t,e){const i=new Set(t);for(const n of e)i.delete(n);return i}function Hht(t,e){return LTe(Vae(t,e),Gae(t,e))}function Uht(t){let e;for(e of t);return e}let FTe=0;function qS(){return++FTe}let UM=class extends BM{constructor(e){super(new zTe(e)),this._observer&&RW.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&RW.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},zTe=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=qTe}};const RW=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function qTe(){}let i2=!1;const U9=[];function jae(t,e){let i=new UM(r),n=null,s=!1;function r(){if(!i||s)return;if(i2)return void Hae(r);const l=n;i.clear(),i2=!0,s=!0,n=nm(i,t),s=!1,i2=!1,e(n,l),Uae()}function o(){i&&(i.destroy(),i=null,n=null)}return s=!0,n=nm(i,t),s=!1,fn(o)}function Bae(t,e){let i=new UM(s),n=null;function s(){e(n,o)}function r(){i&&(i.destroy(),i=null),n=null}function o(){return i?(i.clear(),n=nm(i,t),n):null}return o(),fn(r)}function cV(t,e){let i=!1,n=!1;const s=!!(e!=null&&e.sync);let r=new UM(()=>{i||n||(n=!0,s?o():queueMicrotask(o))});function o(){n=!1,r&&!i&&(i2?Hae(o):(r.clear(),i2=!0,i=!0,nm(r,t),i=!1,i2=!1,Uae()))}function l(){r&&(r.destroy(),r=null)}return i=!0,nm(r,t),i=!1,fn(l)}function Hae(t){U9.includes(t)||U9.unshift(t)}function Uae(){for(;U9.length;)U9.pop()()}var VS;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(VS||(VS={}));let EE=class{constructor(){this.uid=qS(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,n,s,r){return this.pool.acquire(VS.Untracked,e,i,n,s,r,nV)}static acquireTracked(e,i,n,s){return this.pool.acquire(VS.Tracked,e,i,n,null,null,s)}notify(e,i){this.type===VS.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,n,s,r,o,l){this.uid=qS(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=n,this.getValue=s,this.target=r,this.path=o,this.equals=l}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=qS(),this.removed=!0}};EE.pool=new $ae(EE);const GT=new rf,Jp=new Set;let Y9;function X9(t){Jp.delete(t),Jp.add(t),Y9||(Y9=aV(jTe))}function VTe(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function GTe(t){for(const e of Jp.values())e.target===t&&(e.removed=!0)}function jTe(){let t=10;for(;Y9&&t--;){Y9=null;const e=BTe(),i=GT.acquire();for(const n of e){const s=n.uid;VTe(n),s===n.uid&&n.removed&&i.push(n)}for(const n of Jp)n.removed&&(i.push(n),Jp.delete(n));for(const n of i)EE.pool.release(n);GT.release(i),GT.release(e),u$.forEach(n=>n())}}function BTe(){const t=GT.acquire();t.length=Jp.size;let e=0;for(const i of Jp)t[e]=i,++e;return Jp.clear(),t}const u$=new Set;function HTe(t){return u$.add(t),fn(()=>u$.delete(t))}function UTe(t,e,i){let n=Pae(t,e,i,(s,r,o)=>{let l,c,f=Bae(()=>OC(s,r),(y,_)=>{var x;((x=s.__accessor__)==null?void 0:x.lifecycle)===Kl.DESTROYED||l&&l.uid!==c?n.remove():(l||(l=EE.acquireUntracked(y,o,_,s,r),c=l.uid),X9(l))});return fn(()=>{f.remove(),l&&(l.uid!==c||l.removed||(l.removed=!0,X9(l)),l=null),n=f=null})});return n}function YTe(t,e,i){const n=Pae(t,e,i,(s,r,o)=>{let l=!1;return jae(()=>OC(s,r),(c,f)=>{s.__accessor__.lifecycle!==Kl.DESTROYED?l||(l=!0,nV(f,c)||o.call(s,c,f,r,s),l=!1):n.remove()})});return n}function XTe(t,e,i,n=!1){return t.__accessor__&&t.__accessor__.lifecycle!==Kl.DESTROYED?n?YTe(t,e,i):UTe(t,e,i):fn()}function WTe(t,e,i){let n,s,r=Bae(t,(o,l)=>{n&&n.uid!==s?r.remove():(n||(n=EE.acquireTracked(o,e,l,i),s=n.uid),X9(n))});return fn(()=>{r.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,X9(n)),n=null),r=null})}function ZTe(t,e,i){let n=!1;return jae(t,(s,r)=>{n||(n=!0,i(r,s)||e(s,r),n=!1)})}function KTe(t,e,i=!1,n=mae){return i?ZTe(t,e,n):WTe(t,e,n)}function LW(t){return RTe(Jp,e=>e.oldValue===t)}function Zht(t,e){for(const i of t.values())if(e(i))return!0;return!1}function Kht(t,e){for(const i of t.values())if(e(i))return i;return null}function uV(t,e,i){const n=t.get(e);if(n!==void 0)return n;const s=i();return t.set(e,s),s}function Jht(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const n2=()=>qt.getLogger("esri.core.accessorSupport.ensureTypes");function JTe(t){return t==null?t:new Date(t)}function QTe(t){return t==null?t:!!t}function zC(t){return t==null?t:t.toString()}function yx(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function hV(t){return t==null?t:Math.round(parseFloat(t))}function eIe(t){return null}function tIe(t,e){return i=>{let n=t(i);return e.step!=null&&(n=Math.round(n/e.step)*e.step),e.min!=null&&(n=Math.max(e.min,n)),e.max!=null&&(n=Math.min(e.max,n)),n}}function Yae(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function W9(t,e){return e!=null&&t&&!(e instanceof t)}function Xae(t){return t&&"isCollection"in t}function FW(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function iIe(t,e){if(!(e!=null&&e.constructor)||!Xae(e.constructor))return h$(t,e)?e:new t(e);const i=FW(t.prototype.itemType),n=FW(e.constructor.prototype.itemType);return i?n?i===n?e:i.prototype.isPrototypeOf(n.prototype)?new t(e):(h$(t,e),e):new t(e):e}function h$(t,e){return!!Yae(e)&&(n2().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+YM(t)+"'"),!0)}function qC(t,e){return e==null?e:Xae(t)?iIe(t,e):W9(t,e)?h$(t,e)?e:new t(e):e}function YM(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const nIe=new WeakMap;function sIe(t){switch(t){case Number:return e=>yx(e);case Ss:return hV;case Boolean:return QTe;case String:return zC;case Date:return JTe;case XM:return eIe;default:return uV(nIe,t,()=>qC.bind(null,t))}}function Qo(t,e){const i=sIe(t);return arguments.length===1?i:i(e)}function CE(t,e,i){return arguments.length===1?CE.bind(null,t):e&&(Array.isArray(e)?e.map(n=>t(n,i)):[t(e,i)])}function rIe(t,e){return arguments.length===1?CE(i=>Qo(t,i)):CE(i=>Qo(t,i),e)}function Wae(t,e,i){return e!==0&&Array.isArray(i)?i.map(n=>Wae(t,e-1,n)):t(i)}function Z9(t,e,i){if(arguments.length===2)return r=>Z9(t,e,r);if(!i)return i;i=Wae(t,e,i);let n=e,s=i;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(s!==void 0)for(let r=0;r<n;r++)i=[i];return i}function oIe(t,e,i){return arguments.length===2?Z9(n=>Qo(t,n),e):Z9(n=>Qo(t,n),e,i)}function Zae(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function d$(t,e){if(arguments.length===2)return d$(t).call(null,e);const i=new Set,n=t.filter(l=>typeof l!="function"),s=t.filter(l=>typeof l=="function");for(const l of t)typeof l!="string"&&typeof l!="number"||i.add(l);let r=null,o=null;return(l,c)=>{if(l==null)return l;const f=typeof l,y=f==="string"||f==="number";return y&&(i.has(l)||s.some(_=>f==="string"&&_===String||f==="number"&&_===Number))||f==="object"&&s.some(_=>!W9(l,_))?l:(y&&n.length?(r||(r=n.map(_=>typeof _=="string"?`'${_}'`:`${_}`).join(", ")),n2().error("Accessor#set",`'${l}' is not a valid value for this property, only the following values are valid: ${r}`)):typeof l=="object"&&s.length?(o||(o=s.map(_=>YM(_)).join(", ")),n2().error("Accessor#set",`'${l}' is not a valid value for this property, value must be one of ${o}`)):n2().error("Accessor#set",`'${l}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function Ku(t,e){if(arguments.length===2)return Ku(t).call(null,e);const i={},n=[],s=[];for(const c in t.typeMap){const f=t.typeMap[c];i[c]=Qo(f),n.push(YM(f)),s.push(c)}const r=()=>`'${n.join("', '")}'`,o=()=>`'${s.join("', '")}'`,l=typeof t.key=="string"?c=>c[t.key]:t.key;return c=>{if(t.base&&!W9(t.base,c)||c==null)return c;const f=l(c)||t.defaultKeyValue,y=i[f];if(!y)return n2().error("Accessor#set",`Invalid property value, value needs to be one of ${r()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!W9(t.typeMap[f],c))return c;if(typeof t.key=="string"&&!Yae(c)){const _={};for(const x in c)x!==t.key&&(_[x]=c[x]);return y(_)}return y(c)}}let Ss=class{},XM=class{};const tdt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function aIe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Kae(t){switch(t.type){case"native":return Qo(t.value);case"array":return CE(Kae(t.value));case"one-of":return lIe(t);default:return null}}function lIe(t){let e=null;return(i,n)=>p$(i,t)?i:(e==null&&(e=f$(t)),n2().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}function f$(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ss:return"integer";case Date:return"date";case XM:return"null";default:return YM(t.value)}case"array":return`array of ${f$(t.value)}`;case"one-of":{const e=t.values.map(i=>f$(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function p$(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Ss:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case XM:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!p$(i,e.value));case"one-of":return e.values.some(i=>p$(t,i))}}function O(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(e,i),s=jM(e,i);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in t&&qt.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=n.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const r=t.aliasOf;if(r){const c=typeof r=="string"?r:r.source,f=typeof r=="string"?null:r.overridable===!0;let y;s.dependsOn=[c],s.get=function(){let _=Lu(this,c);if(typeof _=="function"){y||(y=c.split(".").slice(0,-1).join("."));const x=Lu(this,y);x&&(_=_.bind(x))}return _},s.readOnly||(s.set=f?function(_){this._override(i,_)}:function(_){j9(this,c,_)})}const o=t.type,l=t.types;if(!s.cast){let c;o?c=cIe(o):l&&(c=Array.isArray(l)?CE(Ku(l[0])):Ku(l)),t.cast=uIe(t.cast,c)}Q4e(s,t),t.range&&(s.cast=tIe(s.cast,t.range))}}function Jae(t,e,i){const n=jM(t,i);n.json||(n.json={});let s=n.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function cIe(t){let e=0,i=t;if(aIe(t))return Kae(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const n=i;if(Zae(n))return e===0?d$(n):Z9(d$(n),e);if(e===1)return rIe(n);if(e>1)return oIe(n,e);const s=t;return s.from?s.from:Qo(s)}function uIe(t,e){if(t||e)return t?e?(i,n)=>e(t(i,n),n):t:e}function hIe(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const n in i)if(e[n]){const s=e[n];i[n].forEach(r=>{e[r]=s}),delete e[n]}}}let ld=class extends _ae{constructor(e,i,n){super(e,i,n)}};ld.prototype.type="warning";function Qae(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const m$=()=>qt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function zW(t,e,i){var n,s;t&&(!i&&!e.read||(n=e.read)!=null&&n.reader||((s=e.read)==null?void 0:s.enabled)===!1||pIe(t)&&il("read.reader",vx(t),e))}function vx(t){var i,n;const e=t.ndimArray??0;if(e>1)return fIe(t);if(e===1)return qW(t);if("type"in t&&tle(t.type)){const s=(n=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:n.Type,r=qW(typeof s=="function"?{type:s}:{types:s});return(o,l,c)=>{const f=r(o,l,c);return f&&new t.type(f)}}return dV(t)}function dV(t){return"type"in t?dIe(t.type):mIe(t.types)}function dIe(t){return t.prototype.read?(e,i,n)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void m$().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const r=new t;return r.read(e,n),r}:t.fromJSON}function ele(t,e,i,n){return n!==0&&Array.isArray(e)?e.map(s=>ele(t,s,i,n-1)):t(e,void 0,i)}function fIe(t){const e=dV(t),i=ele.bind(null,e),n=t.ndimArray??0;return(s,r,o)=>{if(s==null)return s;s=i(s,o,n);let l=n,c=s;for(;l>0&&Array.isArray(c);)l--,c=c[0];if(c!==void 0)for(let f=0;f<l;f++)s=[s];return s}}function qW(t){const e=dV(t);return(i,n,s)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const l of i){const c=e(l,void 0,s);c!==void 0&&o.push(c)}return o}const r=e(i,void 0,s);return r!==void 0?[r]:void 0}}function tle(t){if(!Qae(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?fV(e.Type):ile(e.Type))}function pIe(t){return"types"in t?ile(t.types):fV(t.type)}function fV(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||tle(t))}function ile(t){for(const e in t.typeMap)if(!fV(t.typeMap[e]))return!1;return!0}function mIe(t){let e=null;const i=t.errorContext??"type",n=t.validate;return(s,r,o)=>{if(s==null)return s;const l=typeof s;if(l!=="object")return void m$().error(`Expected JSON value of type 'object' to deserialize, but got '${l}'`);e||(e=gIe(t));const c=t.key;if(typeof c!="string")return;const f=s[c],y=f?e[f]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!y){const x=`Type '${f||"unknown"}' is not supported`;return o!=null&&o.messages&&s&&o.messages.push(new ld(`${i}:unsupported`,x,{definition:s,context:o})),void m$().error(x)}const _=new y;return _.read(s,o),n?n(_):_}}function gIe(t){var i,n;const e={};for(const s in t.typeMap){const r=t.typeMap[s],o=$C(r.prototype);if(typeof t.key=="function")continue;const l=o[t.key];if(!l)continue;if((i=l.json)!=null&&i.type&&Array.isArray(l.json.type)&&l.json.type.length===1&&typeof l.json.type[0]=="string"){e[l.json.type[0]]=r;continue}const c=(n=l.json)==null?void 0:n.write;if(!(c!=null&&c.writer)){e[s]=r;continue}const f=c.target,y=typeof f=="string"?f:t.key,_={};c.writer(s,_,y),_[y]&&(e[_[y]]=r)}return e}function yIe(t){if(t.json||(t.json={}),GW(t.json),jW(t.json),VW(t.json),t.json.origins)for(const e in t.json.origins)GW(t.json.origins[e]),jW(t.json.origins[e]),VW(t.json.origins[e]);return!0}function VW(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function GW(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function jW(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function BW(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&Qae(t.type))?e.write.writer=bIe:i>1?e.write.writer=xIe(i):e.types?Array.isArray(e.types)?e.write.writer=_Ie(e.types[0]):e.write.writer=vIe(e.types):e.write.writer=PE}function vIe(t){return(e,i,n,s)=>e?nle(e,t,s)?PE(e,i,n,s):void 0:PE(e,i,n,s)}function nle(t,e,i){for(const n in e.typeMap)if(t instanceof e.typeMap[n])return!0;if(i!=null&&i.messages){const n=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new rt(`${n}:unsupported`,s,{definition:t,context:i})),qt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function _Ie(t){return(e,i,n,s)=>!e||!Array.isArray(e)?PE(e,i,n,s):PE(e.filter(r=>nle(r,t,s)),i,n,s)}function PE(t,e,i,n){il(i,K9(t,n),e)}function K9(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?J9(t):t}function J9(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function bIe(t,e,i,n){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(r=>K9(r,n)),typeof s.toArray=="function"&&(s=s.toArray())):s=[K9(t,n)],il(i,s,e)}function sle(t,e,i){return i!==0&&Array.isArray(t)?t.map(n=>sle(n,e,i-1)):K9(t,e)}function xIe(t){return(e,i,n,s)=>{let r;if(e===null)r=null;else{r=sle(e,s,t);let o=t,l=r;for(;o>0&&Array.isArray(l);)o--,l=l[0];if(l!==void 0)for(let c=0;c<o;c++)r=[r]}il(n,r,i)}}function wIe(t,e){return pV(t,"any",e==null?void 0:e.origin)}function g$(t,e){return pV(t,"read",e==null?void 0:e.origin)}function rle(t,e){return pV(t,"write",e==null?void 0:e.origin)}function pV(t,e,i){let n=t==null?void 0:t.json;if(n!=null&&n.origins&&i){let s;s=i==="link-chart"?n.origins[i]&&(e==="any"||e in n.origins[i])?n.origins[i]:n.origins["web-map"]:n.origins[i],s&&(e==="any"||e in s)&&(n=s)}return n}function SIe(t){var i;const e=EIe(t);if(t.json.origins)for(const n in t.json.origins){const s=t.json.origins[n],r=s.types?CIe(s):e;zW(r,s,!1),s.types&&!s.write&&((i=t.json.write)!=null&&i.enabled)&&(s.write={...t.json.write}),BW(r,s)}zW(e,t.json,!0),BW(e,t.json)}function EIe(t){return t.json.types?y$(t.json):t.type?ole(t):y$(t)}function CIe(t){return t.type?ole(t):y$(t)}function ole(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!Zae(i);)i=i[0],e++;return{type:i,ndimArray:e}}function y$(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function PIe(t){yIe(t)&&(hIe(t),SIe(t))}const y8=new Set,v8=new Set;function De(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,IIe(e);const i=[],n=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!y8.has(s.initialize)&&(y8.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!v8.has(s.destroy)&&(v8.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);y8.clear(),v8.clear();const r=class extends e{constructor(...l){if(super(...l),this.constructor===r&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=i.length-1;c>=0;c--)i[c].call(this)}}),n.length){let c=!1;const f=this[Sae];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){c=!0,f.call(this);for(let y=0;y<n.length;y++)n[y].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};r.__accessorMetadata__=$C(e.prototype),r.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(r,"name",{value:o,configurable:!0}),r}}function TIe(t,e){return e.get==null?function(){const i=this.__accessor__,n=i.propertiesByName.get(t);if(n===void 0)return;i.mutable&&mi(n);const s=i.store;return s.has(t)?s.get(t):n.metadata.value}:function(){const i=this.__accessor__,n=i.propertiesByName.get(t);if(n!==void 0)return n.getComputed(i)}}function IIe(t){const e=t.prototype,i=$C(e),n={};for(const s of Object.getOwnPropertyNames(i)){const r=i[s];PIe(r),n[s]={enumerable:!0,configurable:!0,get:TIe(s,r),set(o){const l=this.__accessor__;if(l!==void 0){if(l.mutable)return l.initialized&&r.readOnly?HW("read-only",s):l.lifecycle===Kl.CONSTRUCTED&&r.constructOnly?HW("construct-only",s):void l.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,n)}const HW=(t,e)=>{qt.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var ale,lle;function MIe(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const $d=Symbol("Accessor-Handles"),v$=Symbol("Accessor-Initialized");let Ei=class jT{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:n,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const r=this;class o extends r{constructor(...c){super(...c),this.inherited=null,s&&s.apply(this,c)}}$C(o.prototype);for(const l in e){const c=e[l];o.prototype[l]=typeof c=="function"?function(...f){const y=this.inherited;let _;this.inherited=function(...x){if(r.prototype[l])return r.prototype[l].apply(this,x)};try{_=c.apply(this,f)}catch(x){throw this.inherited=y,x}return this.inherited=y,_}:e[l]}for(const l in i){const c=MIe(i[l]);O(c)(o.prototype,l)}return De(n)(o)}static freeze(e){return e instanceof jT?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof jT?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var n;if(this[ale]=null,this[lle]=!1,this.constructor===jT)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new uTe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((n=this.normalizeCtorArgs)==null?void 0:n.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[v$]=!0}initialize(){}[Sae](){this[$d]=co(this[$d])}destroy(){var e;this.destroyed||(GTe(this),this.__accessor__.destroy(),(e=gTe())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[v$]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===Kl.DESTROYED||!1}commitProperty(e){Lu(this,e)}get(e){return xae(qt.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Lu(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return j9(this,e,i),this}watch(e,i,n){return XTe(this,e,i,n)}addHandles(e,i){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const s of n)s.remove();return}(this[$d]??(this[$d]=new GM)).add(e,i)}removeHandles(e){var i;(i=this[$d])==null||i.remove(e)}removeAllHandles(){var e;(e=this[$d])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[$d])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[$d])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};ale=$d,lle=v$;const AIe=Object.freeze(Object.defineProperty({__proto__:null,default:Ei},Symbol.toStringTag,{value:"Module"}));let kIe=class cle{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new cle;return this._values.forEach((n,s)=>{e&&e.has(s)||i.set(s,Ue(n.value),n.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const n=this._values.get(e);return i==null||(n==null?void 0:n.origin)===i?n==null?void 0:n.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Ui.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(n=>{var s;return((s=this._values.get(n))==null?void 0:s.origin)===e})}set(e,i,n){if((n=this._normalizeOrigin(n))===Ui.DEFAULTS){const s=this._values.get(e);if((s==null?void 0:s.origin)!=null&&s.origin>n)return}this._values.set(e,new DIe(i,n))}delete(e,i){var n;(i=this._normalizeOrigin(i))!=null&&((n=this._values.get(e))==null?void 0:n.origin)!==i||this._values.delete(e)}has(e,i){var n;return(i=this._normalizeOrigin(i))!=null?((n=this._values.get(e))==null?void 0:n.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},n)=>e(i,n))}_normalizeOrigin(e){if(e!=null)return e===Ui.DEFAULTS?e:Ui.USER}},DIe=class{constructor(e,i){this.value=e,this.origin=i}};function ule(t,e,i){e.keys().forEach(s=>{i.set(s,e.get(s),Ui.DEFAULTS)});const n=t.metadata;Object.keys(n).forEach(s=>{t.internalGet(s)&&i.set(s,t.internalGet(s),Ui.DEFAULTS)})}function NIe(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const n=t.read.source;if(typeof n=="string"){if(n===e||n.includes(".")&&n.indexOf(e)===0&&PW(n,i))return!0}else for(const s of n)if(s===e||s.includes(".")&&s.indexOf(e)===0&&PW(s,i))return!0;return!1}function OIe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function $Ie(t,e,i,n,s){let r=g$(e[i],s);OIe(r)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))r=g$(e[o],s),NIe(r,i,n)&&(t[o]=!0)}function RIe(t,e,i,n){const s=i.metadata,r=wIe(s[e],n),o=r==null?void 0:r.default;if(o===void 0)return;const l=typeof o=="function"?o.call(t,e,n):o;l!==void 0&&i.set(e,l)}const hle={origin:"service"};function dle(t,e,i=hle){if(!e||typeof e!="object")return;const n=Pl(t),s=n.metadata,r={};for(const o of Object.getOwnPropertyNames(e))$Ie(r,s,o,e,i);n.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(r)){const l=g$(s[o],i).read,c=l==null?void 0:l.source;let f;f=c&&typeof c=="string"?OC(e,c):e[o],l!=null&&l.reader&&(f=l.reader.call(t,f,e,i)),f!==void 0&&n.set(o,f)}if(!i||!i.ignoreDefaults){n.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))r[o]||RIe(t,o,n,i)}n.setDefaultOrigin("user")}function LIe(t,e,i,n=hle){var r;const s={...n,messages:[]};i(s),(r=s.messages)==null||r.forEach(o=>{o.type!=="warning"||t.loaded?n!=null&&n.messages&&n.messages.push(o):t.loadWarnings.push(o)})}function FIe(t,e,i,n,s){var o,l;const r={};return(l=(o=e.write)==null?void 0:o.writer)==null||l.call(t,n,r,i,s),r}function fle(t,e,i,n,s,r){if(!(n!=null&&n.write))return!1;const o=Lu(t,i);if(!s&&n.write.overridePolicy){const l=n.write.overridePolicy.call(t,o,i,r??void 0);l!==void 0&&(s=l)}if(s||(s=n.write),!s||s.enabled===!1||s.layerContainerTypes&&(r!=null&&r.layerContainerType)&&!s.layerContainerTypes.includes(r.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const l=new rt("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return l&&(r!=null&&r.messages)?r.messages.push(l):l&&!r&&qt.getLogger("esri.core.accessorSupport.write").error(l.name,l.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Ui.DEFAULTS)&&zIe(t,i,r,n,o)||!s.ignoreOrigin&&(r!=null&&r.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<o0(r.origin))}function zIe(t,e,i,n,s){const r=n.default;if(r===void 0)return!1;if(n.defaultEquals!=null)return n.defaultEquals(s);if(typeof r=="function"){if(Array.isArray(s)){const o=r.call(t,e,i??void 0);return wf(o,s)}return!1}return r===s}function qIe(t,e,i,n){const s=Pl(t),r=s.metadata,o=rle(r[e],n);return!!o&&fle(t,s,e,o,i,n)}function ple(t,e,i){var r,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return zT(e,t.toJSON(i));const n=Pl(t),s=n.metadata;for(const l in s){const c=rle(s[l],i);if(!fle(t,n,l,c,void 0,i))continue;const f=Lu(t,l),y=FIe(t,c,c.write&&typeof c.write.target=="string"?c.write.target:l,f,i);Object.keys(y).length>0&&(e=zT(e,y),(o=(r=i==null?void 0:i.resources)==null?void 0:r.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>zT(e,y,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:l,oldOrigin:oTe(n.store.originOf(l)),newOrigin:i.origin}))}return e}const mV=t=>{let e=class extends t{constructor(...i){super(...i);const n=Pl(this),s=n.store,r=new kIe;n.store=r,ule(n,s,r)}read(i,n){dle(this,i,n)}write(i,n){return ple(this,i??{},n)}toJSON(i){return this.write({},i)}static fromJSON(i,n){return VIe.call(this,i,n)}};return e=I([De("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function VIe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}function Q9(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}let St=class extends mV(Ei){};St=I([De("esri.core.JSONSupport")],St);const GIe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,jIe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function UW(t){const e=t==null?void 0:t.match(GIe);if(!e)return null;const[,i,n,s]=e;if(!i)return null;let r=null,o=null,l=null;const{devext:c,qaext:f,www:y}=jIe;if(n)if(r=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=c);break;case"qa":({customBaseUrl:o,portalHostname:l}=f);break;default:return null}else({customBaseUrl:o,portalHostname:l}=y);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=c);break;case"qaext":({customBaseUrl:o,portalHostname:l}=f);break;case"www":({customBaseUrl:o,portalHostname:l}=y);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:l,urlKey:r}}function mle(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function e6(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,n=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):n.test(t)&&(t=t.replace(n,"https://qaext.arcgis.com")),t}function BIe(t){const e=atob(t),i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i.buffer}function HIe(t){const e=new Uint8Array(t);let i="";for(let n=0;n<e.length;n++)i+=String.fromCharCode(e[n]);return btoa(i)}const UIe=()=>qt.getLogger("esri.core.urlUtils"),_x=jn.request,YW="esri/config: esriConfig.request.proxyUrl is not set.",gle=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,yle=/^\s*http:/i,YIe=/^\s*https:/i,XIe=/^\s*file:/i,WIe=/:\d+$/,ZIe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,KIe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),JIe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Ql=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(KIe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(JIe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const f4={},QIe=new Ql(jn.applicationUrl);let Ka=QIe;const e9e=t9e();let gV=e9e;const yV=()=>Ka,odt=()=>gV;function t9e(){const t=Ka.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${Ka.scheme}://${Ka.host}${Ka.port!=null?`:${Ka.port}`:""}`}${e}`}function wl(t){if(!t)return null;const e={path:null,query:null},i=new Ql(t),n=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,n),e.query=$y(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function $y(t){const e=t.split("&"),i={};for(const n of e){if(!n)continue;const s=n.indexOf("=");let r,o;s<0?(r=decodeURIComponent(n),o=""):(r=decodeURIComponent(n.slice(0,s)),o=decodeURIComponent(n.slice(s+1)));let l=i[r];typeof l=="string"&&(l=i[r]=[l]),Array.isArray(l)?l.push(o):i[r]=o}return i}function av(t,e){return t?Object.keys(t).map(i=>{const n=t[i];if(n==null)return"";const s=encodeURIComponent(i)+"=";return Array.isArray(n)?n.map(r=>Q9(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)).join("&"):Q9(n)?s+encodeURIComponent(JSON.stringify(n)):s+encodeURIComponent(n)}).filter(i=>i).join("&"):""}function vle(t=!1){let e,i=_x.proxyUrl;if(typeof t=="string"){e=a9e(t);const n=VC(t);n&&(i=n.proxyUrl)}else e=!!t;if(!i)throw UIe().warn(YW),new rt("urlUtils:proxy-not-set",YW);return e&&b$()&&(i=wV(i)),wl(i)}function adt(t,e=!1){const i=VC(t);let n,s;if(i){const r=vV(i.proxyUrl);n=r.path,s=r.query?$y(r.query):null}else if(e){const r=vle(t);n=r.path,s=r.query}if(n){const r=wl(t);t=n+"?"+r.path;const o=av({...s,...r.query});o&&(t=`${t}?${o}`)}return t}const Kw={path:"",query:""};function vV(t){const e=t.indexOf("?");return e!==-1?(Kw.path=t.slice(0,e),Kw.query=t.slice(e+1)):(Kw.path=t,Kw.query=null),Kw}function _le(t){return t=(t=i6(t=f9e(t=vV(t).path),!0)).toLowerCase()}function i9e(t){const e={proxyUrl:t.proxyUrl,urlPrefix:_le(t.urlPrefix)},i=_x.proxyRules,n=e.urlPrefix;let s=i.length;for(let r=0;r<i.length;r++){const o=i[r].urlPrefix;if(n.indexOf(o)===0){if(n.length===o.length)return-1;s=r;break}o.indexOf(n)===0&&(s=r+1)}return i.splice(s,0,e),s}function VC(t){const e=_x.proxyRules,i=_le(t);for(let n=0;n<e.length;n++)if(i.indexOf(e[n].urlPrefix)===0)return e[n]}function n9e(t,e){if(!t||!e)return!1;t=t6(t),e=t6(e);const i=UW(t),n=UW(e);return i!=null&&n!=null?i.portalHostname===n.portalHostname:i==null&&n==null&&Yl(t,e,!0)}function ble(t,e){return t=t6(t),e=t6(e),i6(t)===i6(e)}function t6(t){const e=(t=Hu(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function _$(t,e=_x.interceptors){const i=n=>n==null||n instanceof RegExp&&n.test(t)||typeof n=="string"&&t.startsWith(n);if(e){for(const n of e)if(Array.isArray(n.urls)){if(n.urls.some(i))return n}else if(i(n.urls))return n}return null}function Yl(t,e,i=!1){if(!t||!e)return!1;const n=w$(t),s=w$(e);return!(!i&&n.scheme!==s.scheme)&&n.host!=null&&s.host!=null&&n.host.toLowerCase()===s.host.toLowerCase()&&n.port===s.port}function _V(t){if(typeof t=="string"){if(!Fc(t))return!0;t=w$(t)}if(Yl(t,Ka))return!0;const e=_x.trustedServers||[];for(let i=0;i<e.length;i++){const n=s9e(e[i]);for(let s=0;s<n.length;s++)if(Yl(t,n[s]))return!0}return!1}function s9e(t){return f4[t]||(xV(t)||U0(t)?f4[t]=[new Ql(_l(t))]:f4[t]=[new Ql(`http://${t}`),new Ql(`https://${t}`)]),f4[t]}function _l(t,e=gV,i){return U0(t)?i!=null&&i.preserveProtocolRelative?t:Ka.scheme==="http"&&Ka.authority===Uu(t).slice(2)?`http:${t}`:`https:${t}`:xV(t)?t:N2(t[0]==="/"?h9e(e):e,t)}function bV(t,e=gV,i){if(t==null||!Fc(t))return t;const n=Hu(t),s=n.toLowerCase(),r=Hu(e).toLowerCase().replace(/\/+$/,""),o=i?Hu(i).toLowerCase().replace(/\/+$/,""):null;if(o&&r.indexOf(o)!==0)return t;const l=(_,x,S)=>(S=_.indexOf(x,S))===-1?_.length:S;let c=l(s,"/",s.indexOf("//")+2),f=-1;for(;s.slice(0,c+1)===r.slice(0,c)+"/"&&(f=c+1,c!==s.length);)c=l(s,"/",c+1);if(f===-1||o&&f<o.length)return t;t=n.slice(f);const y=r.slice(f-1).replaceAll(/[^/]+/g,"").length;if(y>0)for(let _=0;_<y;_++)t=`../${t}`;else t=`./${t}`;return t}function Hu(t){return t=g9e(t=m9e(t=p9e(t=_l(t=t.trim()))))}function N2(...t){const e=t.filter(xl);if(!(e!=null&&e.length))return;const i=[];if(Fc(e[0])){const s=e[0],r=s.indexOf("//");r!==-1&&(i.push(s.slice(0,r+1)),c9e(e[0])&&(i[0]+="/"),e[0]=s.slice(r+2))}else e[0][0]==="/"&&i.push("");const n=e.reduce((s,r)=>r?s.concat(r.split("/")):s,[]);for(let s=0;s<n.length;s++){const r=n[s];r===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!r&&s===n.length-1||r&&(r!=="."||i.length===0))&&i.push(r)}return i.join("/")}function Uu(t,e=!1){if(t==null||WM(t)||Vv(t))return null;let i=t.indexOf("://");if(i===-1&&U0(t))i=2;else{if(i===-1)return null;i+=3}const n=t.indexOf("/",i);return n!==-1&&(t=t.slice(0,n)),e&&(t=i6(t,!0)),t}function Fc(t){return U0(t)||xV(t)}function WM(t){return t!=null&&t.slice(0,5)==="blob:"}function Vv(t){return t!=null&&t.slice(0,5)==="data:"}function r9e(t){const e=TE(t);return e!=null&&e.isBase64?BIe(e.data):null}function _8(t){return HIe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const o9e=/^data:(.*?)(;base64)?,(.*)$/;function TE(t){const e=t.match(o9e);if(!e)return null;const[,i,n,s]=e;return{mediaType:i,isBase64:!!n,data:s}}function xle(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function ldt(t){return(await fetch(t)).blob()}function cdt(t){const e=r9e(t);if(!e)return null;const i=TE(t);return new Blob([e],{type:i.mediaType})}function U0(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function xV(t){return t!=null&&gle.test(t)}function a9e(t){return t!=null&&YIe.test(t)||Ka.scheme==="https"&&U0(t)}function l9e(t){return t!=null&&yle.test(t)||Ka.scheme==="http"&&U0(t)}function c9e(t){return t!=null&&XIe.test(t)}function wV(t){return U0(t)?`https:${t}`:t.replace(yle,"https:")}function u9e(){return Ka.scheme==="http"}function b$(){return Ka.scheme==="https"}function i6(t,e=!1){return U0(t)?t.slice(2):(t=t.replace(gle,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function h9e(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function d9e(t){let e=0;if(Fc(t)){const n=t.indexOf("//");n!==-1&&(e=n+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function udt(t,e){if(!t)return"";const i=wl(t).path.replace(/\/+$/,""),n=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return n;const s=new RegExp(`\\.(${e.join("|")})$`,"i");return n.replace(s,"")}function f9e(t){return t.endsWith("/")?t:`${t}/`}function wle(t){return t.replace(/\/+$/,"")}function p9e(t){if(/^https?:\/\//i.test(t)){const e=vV(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function m9e(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function g9e(t){const e=_x.httpsDomains;if(!l9e(t))return t;const i=t.indexOf("/",7);let n;if(n=i===-1?t:t.slice(0,i),n=n.toLowerCase().slice(7),WIe.test(n)){if(!n.endsWith(":80"))return t;n=n.slice(0,-3),t=t.replace(":80","")}return u9e()&&n===Ka.authority&&!ZIe.test(t)||(b$()&&n===Ka.authority||e&&e.some(s=>n===s||n.endsWith(`.${s}`))||b$()&&!VC(t))&&(t=wV(t)),t}function x$(t,e,i){if(!(e&&i&&t&&Fc(t)))return t;const n=t.indexOf("//"),s=t.indexOf("/",n+2),r=t.indexOf(":",n+2),o=Math.min(s<0?t.length:s,r<0?t.length:r);return t.slice(n+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,n+2)}${i}${t.slice(o)}`}function w$(t){return typeof t=="string"?new Ql(_l(t)):(t.scheme||(t.scheme=Ka.scheme),t)}function hdt(t){return v9e.test(t)}function Sle(t,e){const i=wl(t),n=Object.keys(i.query||{});return n.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),i.path}function y9e(t,e,i){const n=wl(t),s=n.query||{};return s[e]=String(i),`${n.path}?${av(s)}`}function BT(t,e){if(!e)return t;const i=wl(t),n=i.query||{};for(const[r,o]of Object.entries(e))o!=null&&(n[r]=o);const s=av(n);return s?`${i.path}?${s}`:i.path}function ddt(t){if(t==null)return null;const e=t.match(Ele);return e?e[2]:null}function XW(t){if(t==null)return null;const e=t.match(Ele);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function fdt(t){return typeof t=="string"?TE(t)??{data:t}:new Promise((e,i)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(TE(n.result)),n.onerror=s=>i(s)})}const Ele=/([^.]*)\.([^/]*)$/,v9e=/(^data:image\/svg|\.svg$)/i,Cle="20241122",Ple="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const _9e="4.31";let Li,SV=_9e;SV="4.31.6";function b9e(t){Li=t}function pdt(t){const e=Li==null?void 0:Li.findCredential(t);return e!=null&&e.token?y9e(t,"token",e.token):t}ht("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ht("host-webworker");const x9e=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function w9e(t){const e=Uu(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!x9e.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function Tle(t,e){return!(!jn.apiKey||!w9e(t))}function S9e(t,e,i=!1,n){return new Promise((s,r)=>{if(jc(n))return void r(WW());let o=()=>{f(),r(new Error(`Unable to load ${e}`))},l=()=>{const y=t;f(),s(y)},c=()=>{if(!t)return;const y=t;f(),y.src="",r(WW())};const f=()=>{ht("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",l)),o=null,l=null,t=null,n!=null&&n.removeEventListener("abort",c),c=null,i&&URL.revokeObjectURL(e)};n!=null&&n.addEventListener("abort",c),ht("esri-image-decode")?t.decode().then(l,o):(t.addEventListener("error",o),t.addEventListener("load",l))})}function WW(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Ile="Timeout exceeded";function E9e(){return new Error(Ile)}function mdt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===Ile}function C9e(t){jn.request.crossOriginNoCorsDomains||(jn.request.crossOriginNoCorsDomains={});const e=jn.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Uu(i)??""]=0:(e[Uu("http://"+i)??""]=0,e[Uu("https://"+i)??""]=0)}function P9e(t){const e=jn.request.crossOriginNoCorsDomains;if(e){let i=Uu(t);if(i)return i=i.toLowerCase(),!Yl(i,yV())&&e[i]<Date.now()-36e5}return!1}async function T9e(t){var s;const e=wl(t);t=e.path,((s=e.query)==null?void 0:s.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=jn.request.crossOriginNoCorsDomains,n=Uu(t);i&&n&&(i[n.toLowerCase()]=Date.now())}async function es(t,e){var x;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=$y(e.query.toString().replaceAll("+"," ")));const i=Vv(t),n=WM(t);n||i||(t=Hu(t));const s={url:t,requestOptions:{...e}},r=S=>({data:S,getAllHeaders:O2,getHeader:O2,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=_$(t,Du.internalInterceptors);if(o){const S=await KW(o,s);if(S!=null)return r(S)}let l=_$(t);if(l){const S=await KW(l,s);if(S!=null)return r(S);l.after||l.error||(l=null)}if(t=s.url,(e=s.requestOptions).responseType==="image"&&(ht("host-webworker")||ht("host-node")))throw vf("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(e.method==="head"){if(e.body)throw vf("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||n)throw vf("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await D9e(),n6)return n6.execute(t,e);const c=new AbortController,f=Jl(e,()=>c.abort()),y={controller:c,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:s,redoRequest:!1,useIdentity:Du.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=await R9e(y).finally(()=>f==null?void 0:f.remove());return(x=l==null?void 0:l.after)==null||x.call(l,_),_}let n6;const Du=jn.request,Mle="FormData"in globalThis,I9e=new Set([499,498,403,401]),M9e=new Set(["COM_0056","COM_0057","SB_0008"]),A9e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],O2=()=>null,s6=Symbol();function k9e(t){const e=Uu(t);e&&!es._corsServers.includes(e)&&es._corsServers.push(e)}function ZW(t){const e=Uu(t);return!e||e.endsWith(".arcgis.com")||es._corsServers.includes(e)||_V(e)}function vf(t,e,i,n){let s="Error";const r={url:i.url,requestOptions:i.requestOptions,getAllHeaders:O2,getHeader:O2,ssl:!1};if(e instanceof rt)return e.details?(e.details=Ue(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=r,e;if(e){const o=n&&(()=>Array.from(n.headers)),l=n&&(y=>n.headers.get(y)),c=n==null?void 0:n.status,f=e.message;f&&(s=f),o&&l&&(r.getAllHeaders=o,r.getHeader=l),r.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||c||0,r.subCode=e.subcode,r.messageCode=e.messageCode,typeof e.details=="string"?r.messages=[e.details]:r.messages=e.details,r.raw=s6 in e?e[s6]:e}return vd(e)?lr():new rt(t,s,r)}async function D9e(){ht("host-webworker")&&!n6&&(n6=await st(()=>import("./request-CICRFFId.js"),[],import.meta.url))}async function S$(){Li||await st(()=>Promise.resolve().then(()=>mDe),void 0,import.meta.url)}async function N9e(t){var l;const e=t.params.url,i=t.params.requestOptions,n=t.controller.signal,s=i.body;let r=null,o=null;if(Mle&&"HTMLFormElement"in globalThis&&(s instanceof FormData?r=s:s instanceof HTMLFormElement&&(r=new FormData(s))),typeof s=="string"&&(o=s),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Du.priority,redirect:"follow",signal:n},(r||o)&&(t.fetchOptions.body=r||o),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(l=i.query)!=null&&l.token||r!=null&&r.get("token")),!t.hasToken&&Tle(e)&&(i.query||(i.query={}),i.query.token=jn.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!Ale(e)&&!jc(n)){let c;i.authMode==="immediate"?(await S$(),c=await Li.getCredential(e,{signal:n}),t.credential=c):i.authMode==="no-prompt"?(await S$(),c=await Li.getCredential(e,{prompt:!1,signal:n}).catch(()=>{}),t.credential=c):Li&&(c=Li.findCredential(e)),c&&(t.credentialToken=c.token,t.useSSL=!!c.ssl)}}function Ale(t){return A9e.some(e=>e.test(t))}async function O9e(t){let e=t.params.url;const i=t.params.requestOptions,n=t.fetchOptions??{},s=WM(e)||Vv(e),r=i.responseType||"json",o=s?0:i.timeout!=null?i.timeout:Du.timeout;let l=!1;if(!s){t.useSSL&&(e=wV(e));let x={...i.query};t.credentialToken&&(x.token=t.credentialToken);let S=av(x);ht("esri-url-encodes-apostrophe")&&(S=S.replaceAll("'","%27"));const P=e.length+1+S.length;let A;l=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||P>Du.maxUrlLength;const D=i.useProxy||!!VC(e);if(D){const N=vle(e);A=N.path,!l&&A.length+1+P>Du.maxUrlLength&&(l=!0),N.query&&(x={...N.query,...x})}if(n.method==="HEAD"&&(l||D)){if(l)throw P>Du.maxUrlLength?vf("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):vf("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(D)throw vf("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(l?(n.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=BT(e,x):(n.body=av(x),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=BT(e,x),D&&(t.useProxy=!0,e=`${A}?${e}`),x.token&&Mle&&n.body instanceof FormData&&!mle(e)&&n.body.set("token",x.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!Yl(e,yV())){if(_V(e))t.withCredentials=!0;else if(Li){const N=Li.findServerInfo(e);N!=null&&N.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",P9e(e)&&await T9e(l?BT(e,x):e))}let c,f,y=0,_=!1;o>0&&(y=setTimeout(()=>{_=!0,t.controller.abort()},o));try{if(i.responseType==="native-request-init")f=n,f.url=e,i.signal?f.signal=i.signal:delete f.signal;else if(i.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||l||$9e(i.headers)||!s&&!t.useProxy&&Du.proxyUrl&&!ZW(e)){if(es._beforeFetch&&await es._beforeFetch(e,n),c=await fetch(e,n),es._afterFetch&&await es._afterFetch(c),t.useProxy||k9e(e),i.responseType==="native")f=c;else if(n.method!=="HEAD")if(c.ok){switch(r){case"array-buffer":f=await c.arrayBuffer();break;case"blob":case"image":f=await c.blob();break;default:f=await c.text()}if(y&&(clearTimeout(y),y=0),r==="json"||r==="xml"||r==="document")if(f)switch(r){case"json":f=JSON.parse(f);break;case"xml":f=JW(f,"application/xml");break;case"document":f=JW(f,"text/html")}else f=null;if(f){if(r==="array-buffer"||r==="blob"){const x=c.headers.get("Content-Type");if(x&&/application\/json|text\/plain/i.test(x)&&f[r==="blob"?"size":"byteLength"]<=750)try{const S=await new Response(f).json();S.error&&(f=S)}catch{}}r==="image"&&f instanceof Blob&&(f=await QW(URL.createObjectURL(f),t,!0))}}else{f=await c.text();try{f=JSON.parse(f)}catch{}}}else f=await QW(e,t)}catch(x){if(x.name==="AbortError")throw _?E9e():lr("Request canceled");if(!(!c&&x instanceof TypeError&&Du.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||ZW(e))throw x;t.redoRequest=!0,i9e({proxyUrl:Du.proxyUrl,urlPrefix:Uu(e)??""})}finally{y&&clearTimeout(y)}return[c,f]}async function KW(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,n;try{n=await t.before(e)}catch(s){i=vf("request:interceptor",s,e)}if((n instanceof Error||n instanceof rt)&&(i=vf("request:interceptor",n,e)),i)throw t.error&&t.error(i),i;return n}}function $9e(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function JW(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function R9e(t){var r,o;let e,i;await N9e(t);try{do[e,i]=await O9e(t);while(!await L9e(t,e,i))}catch(l){const c=vf("request:server",l,t.params,e);throw c.details.ssl=t.useSSL,(r=t.interceptor)!=null&&r.error&&t.interceptor.error(c),c}const n=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!_V(n)){const l=Uu(n,!0);l&&Du.trustedServers.push(l)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&C9e(i.authorizedCrossOriginNoCorsDomains)}const s=t.credential;if(s&&Li){const l=Li.findServerInfo(s.server);let c=l==null?void 0:l.owningSystemUrl;if(c){c=c.replace(/\/?$/,"/sharing");const f=Li.findCredential(c,s.userId);f&&Li._getIdenticalSvcIdx(c,f)===-1&&f.resources.unshift(c)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):O2,getHeader:e?l=>e.headers.get(l):O2,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function L9e(t,e,i){var f;if(t.redoRequest)return t.redoRequest=!1,!1;const n=t.params.requestOptions;if(!e||n.responseType==="native"||n.responseType==="native-request-init")return!0;let s,r;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[s6]=i,s.details=i.messages)),!s&&!e.ok)throw s=new Error(`Unable to load ${e.url} status: ${e.status}`),s[s6]=i,s;let o,l=null;s&&(r=Number(s.code),l=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o==null?void 0:o.toUpperCase());const c=n.authMode;if(r===403&&(l===4||(f=s.message)!=null&&f.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(c!=="no-prompt"||r===498)&&r!==void 0&&I9e.has(r)&&!Ale(t.params.url)&&(r!==403||(!o||!M9e.has(o))&&(l==null||l===2&&t.credentialToken))){await S$();try{const y=await Li.getCredential(t.params.url,{error:vf("request:server",s,t.params),prompt:c!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=y,t.credentialToken=y.token,t.useSSL=t.useSSL||y.ssl,!1}catch(y){if(c==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;s=y}}if(s)throw s;return!0}function QW(t,e,i=!1){const n=e.controller.signal,s=new Image;return e.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Du.priority,s.src=t,S9e(s,t,i,n)}es._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],es._beforeFetch=void 0,es._afterFetch=void 0;var Bg;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Bg||(Bg={}));let F9e=class{constructor(){this._resolver=Oc(),this._status=Bg.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Bg.RESOLVED,this._cleanUp()},()=>{this._status=Bg.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Bg.RESOLVED}isRejected(){return this._status===Bg.REJECTED}isFulfilled(){return this._status!==Bg.PENDING}abort(){this._resolver.reject(lr())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Oc(),i=[...this._resolvingPromises,e.promise],n=this._allPromise=Promise.all(i);n.then(()=>{this.isFulfilled()||this._allPromise!==n||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==n||vd(s)||this._resolver.reject(s)}),e.resolve()}};const EV=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new F9e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,n){return this._promiseProps.promise.then(()=>this).then(i,n)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=I([De("esri.core.Promise")],e),e};let E$=class extends EV(Ei){};E$=I([De("esri.core.Promise")],E$);const z9e="not-loaded",q9e="loading",V9e="failed",eZ="loaded",kle=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const s=this.load.bind(this);this.load=r=>{const o=new Promise((l,c)=>{const f=Fae(r,c);this.destroyed&&c(new rt("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{f&&f.remove()})});if(this.loadStatus===z9e){this._set("loadStatus",q9e);const l=this._loadController=new AbortController;s({signal:l.signal})}return n(),o}})),this.when(()=>{this._set("loadStatus",eZ),this._loadController=null},n=>{this._set("loadStatus",V9e),this._set("loadError",n),this._loadController=null})}destroy(){this._loadController&&(this._loadController=_0(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===eZ}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new rt("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return I([O({readOnly:!0})],e.prototype,"loaded",null),I([O({readOnly:!0})],e.prototype,"loadError",void 0),I([O({clonable:!1})],e.prototype,"loadStatus",void 0),I([O({type:[ld],readOnly:!0})],e.prototype,"loadWarnings",null),e=I([De("esri.core.Loadable")],e),e};let I3=class extends kle(E$){};I3=I([De("esri.core.Loadable")],I3),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=kle,t.isLoadable=e}(I3||(I3={}));const GC=I3;function Dt(t,e,i){let n,s;return e===void 0||Array.isArray(e)?(s=t,i=e,n=[void 0]):(s=e,n=Array.isArray(t)?t:[t]),(r,o)=>{const l=r.constructor.prototype;n.forEach(c=>{const f=Jae(r,c,s);f.read&&typeof f.read=="object"||(f.read={}),f.read.reader=l[o],i&&(f.read.source=(f.read.source||[]).concat(i))})}}let mn=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=G9e(e),this.apiValues=tZ(this._apiToJSON),this.jsonValues=tZ(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,s,r)=>{const o=this.toJSON(n);o!==void 0&&il(r,o,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function G9e(t){const e={};for(const i in t)e[t[i]]=i;return e}function tZ(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Ta(){return function(t,e){return new mn(t,{ignoreUnknown:!0,...e})}}let CV=class{constructor(e,i,n,s,r,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=n,this.atmosphereHeight=s,this.scaleHeight=r;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const hr=new CV(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),_f=new CV(3396190,1/169.8944472236118,23e4,6e4,.111),M0=new CV(1737400,0,0,0,0);function jC(t){if(!jn.assetsPath)throw qt.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new rt("assets:path-not-set","config.assetsPath is not set");return N2(jn.assetsPath,t)}let b8,He=null;function PV(){return!!He}function j9e(){return!!ht("esri-wasm")}function TV(){return b8||(b8=st(()=>import("./pe-wasm-CnWTX6eK.js"),[],import.meta.url).then(t=>t.p).then(({default:t})=>t({locateFile:e=>jC(`esri/geometry/support/${e}`)})).then(t=>{Ole(t)}),b8)}var C$,qs;(function(t){function e(r,o,l){He.ensureCache.prepare();const c=Ty(l),f=l===c,y=He.ensureFloat64(c),_=He._pe_geog_to_proj(He.getPointer(r),o,y);return _&&Qg(l,o,y,f),_}function i(r,o,l,c){switch(c){case qs.PE_TRANSFORM_P_TO_G:return n(r,o,l);case qs.PE_TRANSFORM_G_TO_P:return e(r,o,l)}return 0}function n(r,o,l){return s(r,o,l,0)}function s(r,o,l,c){He.ensureCache.prepare();const f=Ty(l),y=l===f,_=He.ensureFloat64(f),x=He._pe_proj_to_geog_center(He.getPointer(r),o,_,c);return x&&Qg(l,o,_,y),x}t.geogToProj=e,t.projGeog=i,t.projToGeog=n,t.projToGeogCenter=s})(C$||(C$={})),function(t){function e(){t.PE_BUFFER_MAX=He.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=He.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=He.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=He.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=He.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=He.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=He.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=He.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=He.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=He.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=He.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=He.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=He.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=He.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=He.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=He.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=He.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=He.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=He.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=He.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=He.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=He.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=He.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=He.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=He.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=He.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=He.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=He.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=He.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=He.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=He.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=He.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(qs||(qs={}));let Dle=null;var IE;(function(t){const e={},i={},n=S=>{const P=S.getType();switch(P){case qs.PE_TYPE_GEOGCS:S=He.castObject(S,He.PeGeogcs);break;case qs.PE_TYPE_PROJCS:S=He.castObject(S,He.PeProjcs);break;case qs.PE_TYPE_GEOGTRAN:S=He.castObject(S,He.PeGeogtran);break;default:P&qs.PE_TYPE_UNIT&&(S=He.castObject(S,He.PeUnit))}return S};function s(){He.PeFactory.prototype.initialize(null)}function r(S){return o(qs.PE_TYPE_COORDSYS,S)}function o(S,P){let A=null,D=e[S];if(D||(D={},e[S]=D),D.hasOwnProperty(String(P))&&(A=D[P],He.compare(A,He.NULL)&&(A=null)),!A){const N=He.PeFactory.prototype.factoryByType(S,P);He.compare(N,He.NULL)||(A=n(N),D[P]=A)}return A}function l(S,P){let A=null,D=i[S];if(D||(D={},i[S]=D),D.hasOwnProperty(P)&&(A=D[P],He.compare(A,He.NULL)&&(A=null)),!A){const N=He.PeFactory.prototype.fromString(S,P);He.compare(N,He.NULL)||(A=n(N),D[P]=A)}return A}function c(S){return o(qs.PE_TYPE_GEOGCS,S)}function f(S){return o(qs.PE_TYPE_GEOGTRAN,S)}function y(S){return He.PeFactory.prototype.getCode(S)}function _(S){return o(qs.PE_TYPE_PROJCS,S)}function x(S){return o(qs.PE_TYPE_UNIT,S)}t.initialize=s,t.coordsys=r,t.factoryByType=o,t.fromString=l,t.geogcs=c,t.geogtran=f,t.getCode=y,t.projcs=_,t.unit=x})(IE||(IE={}));let Nle=null;var r6,P$,T$,I$,M$,A$,o6,k$,a6,l6,D$;function Ole(t){function e(r,o,l){r[o]=l(r[o])}He=t,qs.init(),r6.init(),o6.init(),a6.init(),l6.init(),Dle=class extends He.PeDouble{constructor(r=NaN){super(r)}destroy(){He.destroy(this)}[Symbol.dispose](){this.destroy()}},Nle=class extends He.PeGCSExtent{destroy(){He.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[He.PeAngunit,He.PeDatum,He.PeGeogcs,He.PeGeogtran,He.PeObject,He.PeParameter,He.PePrimem,He.PeProjcs,He.PeSpheroid,He.PeUnit];for(const r of i)e(r.prototype,"getName",o=>function(){return o.call(this,new Array(qs.PE_NAME_MAX))});for(const r of[He.PeGeogtran,He.PeProjcs])e(r.prototype,"getParameters",o=>function(){const l=new Array(qs.PE_PARM_MAX);let c=o.call(this);for(let f=0;f<l.length;f++){const y=He.getValue(c,"*");l[f]=y?He.wrapPointer(y,He.PeParameter):null,c+=Int32Array.BYTES_PER_ELEMENT}return l});e(He.PeHorizon.prototype,"getCoord",r=>function(o=!1){const l=this.getSize();if(!l)return null;const c=[];return Qg(c,l,r.call(this),o),c}),e(He.PeGTlistExtendedEntry.prototype,"getEntries",r=>{const o=He._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;const c=r.call(this);if(!He.compare(c,He.NULL)){l=[c];const f=this.getSteps();if(f>1){const y=He.getPointer(c);for(let _=1;_<f;_++)l.push(He.wrapPointer(y+o*_,He.PeGTlistExtendedGTs))}}return l}});const n=He._pe_getPeHorizonSize(),s=r=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(r))return o.get(r);let l=null;const c=r.call(this);if(!He.compare(c,He.NULL)){l=[c];const f=c.getNump();if(f>1){const y=He.getPointer(c);for(let _=1;_<f;_++)l.push(He.wrapPointer(y+n*_,He.PeHorizon))}}return o.set(r,l),l};e(He.PeProjcs.prototype,"horizonGcsGenerate",s),e(He.PeProjcs.prototype,"horizonPcsGenerate",s),He.PeObject.prototype.toString=function(r=qs.PE_STR_OPTS_NONE){He.ensureCache.prepare();const o=He.getPointer(this),l=He.ensureInt8(new Array(qs.PE_BUFFER_MAX));return He.UTF8ToString(He._pe_object_to_string_ext(o,r,l))},He.PeGeogcs.prototype.destroy=function(){this.Delete(),Rh(this),this.ptr=0},He.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},He.PeProjcs.prototype.destroy=function(){this.Delete(),Rh(this),this.ptr=0},He.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Rh(t){if(!t)return;const e=He.getClass(t);if(!e)return;const i=He.getCache(e);if(!i)return;const n=He.getPointer(t);n&&delete i[n]}function p4(t,e){const i=[],n=new Array(e);for(let s=0;s<t;s++)i.push(He.ensureInt8(n));return i}function Ty(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function Qg(t,e,i,n=!1){if(n)for(let s=0;s<2*e;s++)t[s]=He.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let r=0;r<e;r++)s&&(t[r]=new Array(2)),t[r][0]=He.getValue(i,"double"),t[r][1]=He.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=He.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=He._pe_getPeGTlistExtendedEntrySize()}function n(s,r,o,l,c,f){let y=null;const _=new He.PeInteger(f);try{const x=He.PeGTlistExtended.prototype.getGTlist(s,r,o,l,c,_);if((f=_.val)&&(y=[x],f>1)){const S=He.getPointer(x);for(let P=1;P<f;P++)y.push(He.wrapPointer(S+e*P,He.PeGTlistExtendedEntry))}}finally{He.destroy(_)}return y}t.init=i,t.getGTlist=n})(r6||(r6={})),function(t){function e(i){if(i!=null&&i.length){for(const n of i)Rh(n),n.getEntries().forEach(s=>{Rh(s);const r=s.getGeogtran();Rh(r),r.getParameters().forEach(Rh),[r.getGeogcs1(),r.getGeogcs2()].forEach(o=>{Rh(o);const l=o.getDatum();Rh(l),Rh(l.getSpheroid()),Rh(o.getPrimem()),Rh(o.getUnit())})});He.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(P$||(P$={})),function(t){function e(i,n,s,r,o){He.ensureCache.prepare();const l=Ty(s),c=s===l,f=He.ensureFloat64(l);let y=0;r&&(y=He.ensureFloat64(r));const _=He._pe_geog_to_geog(He.getPointer(i),n,f,y,o);return _&&Qg(s,n,f,c),_}t.geogToGeog=e}(T$||(T$={})),function(t){function e(r,o,l,c,f,y,_,x){He.PeLineType.prototype.geodesic_coordinate(r,o,l,c,f,y,_,x)}function i(r,o,l,c,f,y,_,x,S){He.PeLineType.prototype.geodetic_coordinate(r,o,l,c,f,y,_,x,S)}function n(r,o,l,c,f,y,_,x,S,P){He.PeLineType.prototype.geodetic_distance(r,o,l,c,f,y,_,x,S,P)}function s(r,o,l,c,f,y,_,x,S){He.PeLineType.prototype.great_elliptic_distance(r,o,l,c,f,y,_,x,S)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=n,t.greatEllipticDistance=s}(I$||(I$={})),function(t){function e(o,l){return He.PeMath.prototype.phi_to_eta(o,l)}function i(o,l){return He.PeMath.prototype.eta_to_phi(o,l)}function n(o,l){return He.PeMath.prototype.phi_to_phig(o,l)}function s(o,l,c){return He.PeMath.prototype.q(o,l,c)}function r(o,l){return He.PeMath.prototype.q90(o,l)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=n,t.q=s,t.q90=r}(M$||(M$={})),function(t){const e=(f,y,_,x,S,P)=>{let A,D;switch(He.ensureCache.prepare(),f){case"dd":A=He._pe_geog_to_dd,D=qs.PE_DD_MAX;break;case"ddm":A=He._pe_geog_to_ddm,D=qs.PE_DDM_MAX;break;case"dms":A=He._pe_geog_to_dms,D=qs.PE_DMS_MAX}let N=0;y&&(N=He.getPointer(y));const F=Ty(x),G=He.ensureFloat64(F),V=p4(_,D),B=A(N,_,G,S,He.ensureInt32(V));if(B)for(let W=0;W<_;W++)P[W]=He.UTF8ToString(V[W]);return B},i=(f,y,_,x,S)=>{let P;switch(He.ensureCache.prepare(),f){case"dd":P=He._pe_dd_to_geog;break;case"ddm":P=He._pe_ddm_to_geog;break;case"dms":P=He._pe_dms_to_geog}let A=0;y&&(A=He.getPointer(y));const D=x.map(V=>He.ensureString(V)),N=He.ensureInt32(D),F=He.ensureFloat64(new Array(2*_)),G=P(A,_,N,F);return G&&Qg(S,_,F),G};function n(f,y,_,x,S){return e("dms",f,y,_,x,S)}function s(f,y,_,x){return i("dms",f,y,_,x)}function r(f,y,_,x,S){return e("ddm",f,y,_,x,S)}function o(f,y,_,x){return i("ddm",f,y,_,x)}function l(f,y,_,x,S){return e("dd",f,y,_,x,S)}function c(f,y,_,x){return i("dd",f,y,_,x)}t.geogToDms=n,t.dmsToGeog=s,t.geogToDdm=r,t.ddmToGeog=o,t.geogToDd=l,t.ddToGeog=c}(A$||(A$={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=He.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=He.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=He.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=He.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=He.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,r,o,l,c,f,y){He.ensureCache.prepare();let _=0;s&&(_=He.getPointer(s));const x=Ty(o),S=He.ensureFloat64(x),P=p4(r,qs.PE_MGRS_MAX),A=He.ensureInt32(P),D=He._pe_geog_to_mgrs_extended(_,r,S,l,c,f,A);if(D)for(let N=0;N<r;N++)y[N]=He.UTF8ToString(P[N]);return D}function n(s,r,o,l,c){He.ensureCache.prepare();let f=0;s&&(f=He.getPointer(s));const y=o.map(P=>He.ensureString(P)),_=He.ensureInt32(y),x=He.ensureFloat64(new Array(2*r)),S=He._pe_mgrs_to_geog_extended(f,r,_,l,x);return S&&Qg(c,r,x),S}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=n}(o6||(o6={})),function(t){function e(n,s,r,o,l,c,f){He.ensureCache.prepare();let y=0;n&&(y=He.getPointer(n));const _=Ty(r),x=He.ensureFloat64(_),S=p4(s,qs.PE_MGRS_MAX),P=He.ensureInt32(S),A=He._pe_geog_to_usng(y,s,x,o,l,c,P);if(A)for(let D=0;D<s;D++)f[D]=He.UTF8ToString(S[D]);return A}function i(n,s,r,o){He.ensureCache.prepare();let l=0;n&&(l=He.getPointer(n));const c=r.map(x=>He.ensureString(x)),f=He.ensureInt32(c),y=He.ensureFloat64(new Array(2*s)),_=He._pe_usng_to_geog(l,s,f,y);return _&&Qg(o,s,y),_}t.geogToUsng=e,t.usngToGeog=i}(k$||(k$={})),function(t){function e(){t.PE_UTM_OPTS_NONE=He.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=He.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=He.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,r,o,l,c){He.ensureCache.prepare();let f=0;s&&(f=He.getPointer(s));const y=Ty(o),_=He.ensureFloat64(y),x=p4(r,qs.PE_UTM_MAX),S=He.ensureInt32(x),P=He._pe_geog_to_utm(f,r,_,l,S);if(P)for(let A=0;A<r;A++)c[A]=He.UTF8ToString(x[A]);return P}function n(s,r,o,l,c){He.ensureCache.prepare();let f=0;s&&(f=He.getPointer(s));const y=o.map(P=>He.ensureString(P)),_=He.ensureInt32(y),x=He.ensureFloat64(new Array(2*r)),S=He._pe_utm_to_geog(f,r,_,l,x);return S&&Qg(c,r,x),S}t.init=e,t.geogToUtm=i,t.utmToGeog=n}(a6||(a6={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=He.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=He.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=He.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=He.PePCSInfo.prototype.PE_POLE_POINT}function n(s,r=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,l=null;return e.has(s)&&(l=e.get(s),l[r]&&(o=l[r])),o||(o=He.PePCSInfo.prototype.generate(s,r),l||(l=[],e.set(s,l)),l[r]=o),o}t.init=i,t.generate=n}(l6||(l6={})),function(t){function e(){return He.PeVersion.prototype.version_string()}t.versionString=e}(D$||(D$={}));const B9e=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return C$},get PeDefs(){return qs},get PeDouble(){return Dle},get PeFactory(){return IE},get PeGCSExtent(){return Nle},get PeGTTransformations(){return T$},get PeGTlistExtended(){return r6},get PeGTlistExtendedEntry(){return P$},get PeLineType(){return I$},get PeMath(){return M$},get PeNotationDms(){return A$},get PeNotationMgrs(){return o6},get PeNotationUsng(){return k$},get PeNotationUtm(){return a6},get PePCSInfo(){return l6},get PeVersion(){return D$},_init:Ole,get _pe(){return He},isLoaded:PV,isSupported:j9e,load:TV},Symbol.toStringTag,{value:"Module"}));var lv;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(lv||(lv={}));let R;const Ee={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(R=2e3;R<=2045;R++)Ee[R]=0;for(R=2056;R<=2065;R++)Ee[R]=0;for(R=2067;R<=2135;R++)Ee[R]=0;for(R=2137;R<=2154;R++)Ee[R]=0;for(R=2161;R<=2170;R++)Ee[R]=0;for(R=2172;R<=2193;R++)Ee[R]=0;for(R=2195;R<=2198;R++)Ee[R]=0;for(R=2200;R<=2203;R++)Ee[R]=0;for(R=2205;R<=2217;R++)Ee[R]=0;for(R=2222;R<=2224;R++)Ee[R]=1;for(R=2225;R<=2250;R++)Ee[R]=2;for(R=2251;R<=2253;R++)Ee[R]=1;for(R=2257;R<=2264;R++)Ee[R]=2;for(R=2274;R<=2279;R++)Ee[R]=2;for(R=2280;R<=2282;R++)Ee[R]=1;for(R=2283;R<=2289;R++)Ee[R]=2;for(R=2290;R<=2292;R++)Ee[R]=0;for(R=2308;R<=2313;R++)Ee[R]=0;for(R=2315;R<=2491;R++)Ee[R]=0;for(R=2494;R<=2866;R++)Ee[R]=0;for(R=2867;R<=2869;R++)Ee[R]=1;for(R=2870;R<=2888;R++)Ee[R]=2;for(R=2891;R<=2895;R++)Ee[R]=2;for(R=2896;R<=2898;R++)Ee[R]=1;for(R=2902;R<=2908;R++)Ee[R]=2;for(R=2915;R<=2920;R++)Ee[R]=2;for(R=2921;R<=2923;R++)Ee[R]=1;for(R=2924;R<=2930;R++)Ee[R]=2;for(R=2931;R<=2962;R++)Ee[R]=0;for(R=2964;R<=2968;R++)Ee[R]=2;for(R=2969;R<=2973;R++)Ee[R]=0;for(R=2975;R<=2991;R++)Ee[R]=0;for(R=2995;R<=3051;R++)Ee[R]=0;for(R=3054;R<=3079;R++)Ee[R]=0;for(R=3081;R<=3088;R++)Ee[R]=0;for(R=3092;R<=3101;R++)Ee[R]=0;for(R=3106;R<=3138;R++)Ee[R]=0;for(R=3146;R<=3151;R++)Ee[R]=0;for(R=3153;R<=3166;R++)Ee[R]=0;for(R=3168;R<=3172;R++)Ee[R]=0;for(R=3174;R<=3203;R++)Ee[R]=0;for(R=3294;R<=3358;R++)Ee[R]=0;for(R=3367;R<=3403;R++)Ee[R]=0;for(R=3408;R<=3416;R++)Ee[R]=0;for(R=3417;R<=3438;R++)Ee[R]=2;for(R=3441;R<=3446;R++)Ee[R]=2;for(R=3447;R<=3450;R++)Ee[R]=0;for(R=3451;R<=3459;R++)Ee[R]=2;for(R=3460;R<=3478;R++)Ee[R]=0;for(R=3554;R<=3559;R++)Ee[R]=0;for(R=3560;R<=3570;R++)Ee[R]=2;for(R=3571;R<=3581;R++)Ee[R]=0;for(R=3594;R<=3597;R++)Ee[R]=0;for(R=3601;R<=3604;R++)Ee[R]=0;for(R=3637;R<=3639;R++)Ee[R]=0;for(R=3665;R<=3667;R++)Ee[R]=0;for(R=3693;R<=3695;R++)Ee[R]=0;for(R=3701;R<=3727;R++)Ee[R]=0;for(R=3728;R<=3739;R++)Ee[R]=2;for(R=3740;R<=3751;R++)Ee[R]=0;for(R=3753;R<=3760;R++)Ee[R]=2;for(R=3761;R<=3773;R++)Ee[R]=0;for(R=3775;R<=3777;R++)Ee[R]=0;for(R=3779;R<=3781;R++)Ee[R]=0;for(R=3783;R<=3785;R++)Ee[R]=0;for(R=3788;R<=3791;R++)Ee[R]=0;for(R=3797;R<=3802;R++)Ee[R]=0;for(R=3814;R<=3816;R++)Ee[R]=0;for(R=3825;R<=3829;R++)Ee[R]=0;for(R=3832;R<=3841;R++)Ee[R]=0;for(R=3844;R<=3852;R++)Ee[R]=0;for(R=3873;R<=3885;R++)Ee[R]=0;for(R=3890;R<=3893;R++)Ee[R]=0;for(R=3907;R<=3912;R++)Ee[R]=0;for(R=3942;R<=3950;R++)Ee[R]=0;for(R=3968;R<=3970;R++)Ee[R]=0;for(R=3973;R<=3976;R++)Ee[R]=0;for(R=3986;R<=3989;R++)Ee[R]=0;for(R=3994;R<=3997;R++)Ee[R]=0;for(R=4048;R<=4051;R++)Ee[R]=0;for(R=4056;R<=4063;R++)Ee[R]=0;for(R=4093;R<=4096;R++)Ee[R]=0;for(R=4390;R<=4398;R++)Ee[R]=0;for(R=4399;R<=4413;R++)Ee[R]=2;for(R=4418;R<=4433;R++)Ee[R]=2;for(R=4455;R<=4457;R++)Ee[R]=2;for(R=4484;R<=4489;R++)Ee[R]=0;for(R=4491;R<=4554;R++)Ee[R]=0;for(R=4568;R<=4589;R++)Ee[R]=0;for(R=4652;R<=4656;R++)Ee[R]=0;for(R=4766;R<=4800;R++)Ee[R]=0;for(R=5014;R<=5016;R++)Ee[R]=0;for(R=5069;R<=5072;R++)Ee[R]=0;for(R=5105;R<=5130;R++)Ee[R]=0;for(R=5167;R<=5188;R++)Ee[R]=0;for(R=5253;R<=5259;R++)Ee[R]=0;for(R=5269;R<=5275;R++)Ee[R]=0;for(R=5292;R<=5311;R++)Ee[R]=0;for(R=5329;R<=5331;R++)Ee[R]=0;for(R=5343;R<=5349;R++)Ee[R]=0;for(R=5355;R<=5357;R++)Ee[R]=0;for(R=5387;R<=5389;R++)Ee[R]=0;for(R=5459;R<=5463;R++)Ee[R]=0;for(R=5479;R<=5482;R++)Ee[R]=0;for(R=5518;R<=5520;R++)Ee[R]=0;for(R=5530;R<=5539;R++)Ee[R]=0;for(R=5550;R<=5552;R++)Ee[R]=0;for(R=5562;R<=5583;R++)Ee[R]=0;for(R=5623;R<=5625;R++)Ee[R]=2;for(R=5631;R<=5639;R++)Ee[R]=0;for(R=5649;R<=5653;R++)Ee[R]=0;for(R=5663;R<=5680;R++)Ee[R]=0;for(R=5682;R<=5685;R++)Ee[R]=0;for(R=5875;R<=5877;R++)Ee[R]=0;for(R=5896;R<=5899;R++)Ee[R]=0;for(R=5921;R<=5940;R++)Ee[R]=0;for(R=6050;R<=6125;R++)Ee[R]=0;for(R=6244;R<=6275;R++)Ee[R]=0;for(R=6328;R<=6348;R++)Ee[R]=0;for(R=6350;R<=6356;R++)Ee[R]=0;for(R=6366;R<=6372;R++)Ee[R]=0;for(R=6381;R<=6387;R++)Ee[R]=0;for(R=6393;R<=6404;R++)Ee[R]=0;for(R=6480;R<=6483;R++)Ee[R]=0;for(R=6511;R<=6514;R++)Ee[R]=0;for(R=6579;R<=6581;R++)Ee[R]=0;for(R=6619;R<=6624;R++)Ee[R]=0;for(R=6625;R<=6627;R++)Ee[R]=2;for(R=6628;R<=6632;R++)Ee[R]=0;for(R=6634;R<=6637;R++)Ee[R]=0;for(R=6669;R<=6692;R++)Ee[R]=0;for(R=6707;R<=6709;R++)Ee[R]=0;for(R=6720;R<=6723;R++)Ee[R]=0;for(R=6732;R<=6738;R++)Ee[R]=0;for(R=6931;R<=6933;R++)Ee[R]=0;for(R=6956;R<=6959;R++)Ee[R]=0;for(R=7005;R<=7007;R++)Ee[R]=0;for(R=7057;R<=7070;R++)Ee[R]=2;for(R=7074;R<=7082;R++)Ee[R]=0;for(R=7109;R<=7118;R++)Ee[R]=0;for(R=7119;R<=7127;R++)Ee[R]=1;for(R=7374;R<=7376;R++)Ee[R]=0;for(R=7528;R<=7586;R++)Ee[R]=0;for(R=7587;R<=7645;R++)Ee[R]=2;for(R=7692;R<=7696;R++)Ee[R]=0;for(R=7755;R<=7787;R++)Ee[R]=0;for(R=7791;R<=7795;R++)Ee[R]=0;for(R=7799;R<=7801;R++)Ee[R]=0;for(R=7803;R<=7805;R++)Ee[R]=0;for(R=7825;R<=7831;R++)Ee[R]=0;for(R=7845;R<=7859;R++)Ee[R]=0;for(R=8013;R<=8032;R++)Ee[R]=0;for(R=8065;R<=8068;R++)Ee[R]=1;for(R=8518;R<=8529;R++)Ee[R]=2;for(R=8533;R<=8536;R++)Ee[R]=2;for(R=8538;R<=8540;R++)Ee[R]=2;for(R=8677;R<=8679;R++)Ee[R]=0;for(R=8836;R<=8840;R++)Ee[R]=0;for(R=8857;R<=8859;R++)Ee[R]=0;for(R=8908;R<=8910;R++)Ee[R]=0;for(R=9154;R<=9159;R++)Ee[R]=0;for(R=9205;R<=9218;R++)Ee[R]=0;for(R=9271;R<=9273;R++)Ee[R]=0;for(R=9295;R<=9297;R++)Ee[R]=0;for(R=9356;R<=9360;R++)Ee[R]=0;for(R=9404;R<=9407;R++)Ee[R]=0;for(R=9476;R<=9482;R++)Ee[R]=0;for(R=9487;R<=9494;R++)Ee[R]=0;for(R=9697;R<=9699;R++)Ee[R]=0;for(R=9821;R<=9865;R++)Ee[R]=0;for(R=10285;R<=10291;R++)Ee[R]=0;for(R=10314;R<=10317;R++)Ee[R]=0;for(R=10448;R<=10465;R++)Ee[R]=0;for(R=10731;R<=10733;R++)Ee[R]=0;for(R=11114;R<=11118;R++)Ee[R]=0;for(R=20004;R<=20032;R++)Ee[R]=0;for(R=20047;R<=20049;R++)Ee[R]=0;for(R=20062;R<=20092;R++)Ee[R]=0;for(R=20135;R<=20138;R++)Ee[R]=0;for(R=20248;R<=20258;R++)Ee[R]=0;for(R=20348;R<=20358;R++)Ee[R]=0;for(R=20436;R<=20440;R++)Ee[R]=0;for(R=20822;R<=20824;R++)Ee[R]=0;for(R=20904;R<=20932;R++)Ee[R]=0;for(R=20934;R<=20936;R++)Ee[R]=0;for(R=21004;R<=21032;R++)Ee[R]=0;for(R=21035;R<=21037;R++)Ee[R]=0;for(R=21095;R<=21097;R++)Ee[R]=0;for(R=21148;R<=21150;R++)Ee[R]=0;for(R=21207;R<=21264;R++)Ee[R]=0;for(R=21307;R<=21364;R++)Ee[R]=0;for(R=21413;R<=21423;R++)Ee[R]=0;for(R=21453;R<=21463;R++)Ee[R]=0;for(R=21473;R<=21483;R++)Ee[R]=0;for(R=21780;R<=21782;R++)Ee[R]=0;for(R=21891;R<=21894;R++)Ee[R]=0;for(R=21896;R<=21899;R++)Ee[R]=0;for(R=22171;R<=22177;R++)Ee[R]=0;for(R=22181;R<=22187;R++)Ee[R]=0;for(R=22191;R<=22197;R++)Ee[R]=0;for(R=22207;R<=22222;R++)Ee[R]=0;for(R=22229;R<=22232;R++)Ee[R]=0;for(R=22234;R<=22236;R++)Ee[R]=0;for(R=22243;R<=22250;R++)Ee[R]=0;for(R=22262;R<=22265;R++)Ee[R]=0;for(R=22307;R<=22322;R++)Ee[R]=0;for(R=22348;R<=22357;R++)Ee[R]=0;for(R=22407;R<=22422;R++)Ee[R]=0;for(R=22462;R<=22465;R++)Ee[R]=0;for(R=22521;R<=22525;R++)Ee[R]=0;for(R=22607;R<=22622;R++)Ee[R]=0;for(R=22641;R<=22646;R++)Ee[R]=0;for(R=22648;R<=22657;R++)Ee[R]=0;for(R=22707;R<=22722;R++)Ee[R]=0;for(R=22762;R<=22765;R++)Ee[R]=0;for(R=22807;R<=22822;R++)Ee[R]=0;for(R=22991;R<=22994;R++)Ee[R]=0;for(R=23028;R<=23038;R++)Ee[R]=0;for(R=23301;R<=23333;R++)Ee[R]=2;for(R=23830;R<=23853;R++)Ee[R]=0;for(R=23866;R<=23872;R++)Ee[R]=0;for(R=23877;R<=23884;R++)Ee[R]=0;for(R=23886;R<=23894;R++)Ee[R]=0;for(R=23946;R<=23948;R++)Ee[R]=0;for(R=24311;R<=24313;R++)Ee[R]=0;for(R=24342;R<=24347;R++)Ee[R]=0;for(R=24370;R<=24374;R++)Ee[R]=10;for(R=24375;R<=24381;R++)Ee[R]=0;for(R=24718;R<=24721;R++)Ee[R]=0;for(R=24817;R<=24821;R++)Ee[R]=0;for(R=24877;R<=24882;R++)Ee[R]=0;for(R=24891;R<=24893;R++)Ee[R]=0;for(R=25391;R<=25395;R++)Ee[R]=0;for(R=25828;R<=25838;R++)Ee[R]=0;for(R=26191;R<=26195;R++)Ee[R]=0;for(R=26391;R<=26393;R++)Ee[R]=0;for(R=26701;R<=26722;R++)Ee[R]=0;for(R=26729;R<=26799;R++)Ee[R]=2;for(R=26801;R<=26803;R++)Ee[R]=2;for(R=26811;R<=26813;R++)Ee[R]=2;for(R=26847;R<=26870;R++)Ee[R]=2;for(R=26891;R<=26899;R++)Ee[R]=0;for(R=26901;R<=26923;R++)Ee[R]=0;for(R=26929;R<=26946;R++)Ee[R]=0;for(R=26948;R<=26998;R++)Ee[R]=0;for(R=27037;R<=27040;R++)Ee[R]=0;for(R=27205;R<=27232;R++)Ee[R]=0;for(R=27258;R<=27260;R++)Ee[R]=0;for(R=27391;R<=27398;R++)Ee[R]=0;for(R=27561;R<=27564;R++)Ee[R]=0;for(R=27571;R<=27574;R++)Ee[R]=0;for(R=27581;R<=27584;R++)Ee[R]=0;for(R=27591;R<=27594;R++)Ee[R]=0;for(R=27700;R<=27707;R++)Ee[R]=0;for(R=28191;R<=28193;R++)Ee[R]=0;for(R=28348;R<=28358;R++)Ee[R]=0;for(R=28402;R<=28432;R++)Ee[R]=0;for(R=28462;R<=28492;R++)Ee[R]=0;for(R=29118;R<=29122;R++)Ee[R]=0;for(R=29168;R<=29172;R++)Ee[R]=0;for(R=29177;R<=29185;R++)Ee[R]=0;for(R=29187;R<=29195;R++)Ee[R]=0;for(R=29900;R<=29903;R++)Ee[R]=0;for(R=30161;R<=30179;R++)Ee[R]=0;for(R=30491;R<=30494;R++)Ee[R]=0;for(R=30729;R<=30732;R++)Ee[R]=0;for(R=31251;R<=31259;R++)Ee[R]=0;for(R=31265;R<=31268;R++)Ee[R]=0;for(R=31275;R<=31279;R++)Ee[R]=0;for(R=31281;R<=31297;R++)Ee[R]=0;for(R=31461;R<=31469;R++)Ee[R]=0;for(R=31491;R<=31495;R++)Ee[R]=0;for(R=31917;R<=31922;R++)Ee[R]=0;for(R=31965;R<=32e3;R++)Ee[R]=0;for(R=32001;R<=32003;R++)Ee[R]=2;for(R=32005;R<=32031;R++)Ee[R]=2;for(R=32033;R<=32060;R++)Ee[R]=2;for(R=32064;R<=32067;R++)Ee[R]=2;for(R=32074;R<=32077;R++)Ee[R]=2;for(R=32081;R<=32086;R++)Ee[R]=0;for(R=32107;R<=32130;R++)Ee[R]=0;for(R=32133;R<=32159;R++)Ee[R]=0;for(R=32164;R<=32167;R++)Ee[R]=2;for(R=32180;R<=32199;R++)Ee[R]=0;for(R=32201;R<=32260;R++)Ee[R]=0;for(R=32301;R<=32360;R++)Ee[R]=0;for(R=32401;R<=32460;R++)Ee[R]=0;for(R=32501;R<=32560;R++)Ee[R]=0;for(R=32601;R<=32662;R++)Ee[R]=0;for(R=32664;R<=32667;R++)Ee[R]=2;for(R=32701;R<=32761;R++)Ee[R]=0;for(R=53001;R<=53004;R++)Ee[R]=0;for(R=53008;R<=53019;R++)Ee[R]=0;for(R=53021;R<=53032;R++)Ee[R]=0;for(R=53034;R<=53037;R++)Ee[R]=0;for(R=53042;R<=53046;R++)Ee[R]=0;for(R=53074;R<=53080;R++)Ee[R]=0;for(R=54001;R<=54004;R++)Ee[R]=0;for(R=54008;R<=54019;R++)Ee[R]=0;for(R=54021;R<=54032;R++)Ee[R]=0;for(R=54034;R<=54037;R++)Ee[R]=0;for(R=54042;R<=54046;R++)Ee[R]=0;for(R=54048;R<=54053;R++)Ee[R]=0;for(R=54074;R<=54080;R++)Ee[R]=0;for(R=54098;R<=54101;R++)Ee[R]=0;for(R=102001;R<=102040;R++)Ee[R]=0;for(R=102042;R<=102063;R++)Ee[R]=0;for(R=102065;R<=102067;R++)Ee[R]=0;for(R=102070;R<=102117;R++)Ee[R]=0;for(R=102122;R<=102216;R++)Ee[R]=0;for(R=102221;R<=102377;R++)Ee[R]=0;for(R=102382;R<=102388;R++)Ee[R]=0;for(R=102389;R<=102398;R++)Ee[R]=2;for(R=102399;R<=102444;R++)Ee[R]=0;for(R=102445;R<=102447;R++)Ee[R]=2;for(R=102448;R<=102458;R++)Ee[R]=0;for(R=102459;R<=102468;R++)Ee[R]=2;for(R=102469;R<=102499;R++)Ee[R]=0;for(R=102500;R<=102519;R++)Ee[R]=1;for(R=102520;R<=102524;R++)Ee[R]=0;for(R=102525;R<=102529;R++)Ee[R]=2;for(R=102530;R<=102588;R++)Ee[R]=0;for(R=102590;R<=102598;R++)Ee[R]=0;for(R=102601;R<=102603;R++)Ee[R]=0;for(R=102605;R<=102628;R++)Ee[R]=0;for(R=102629;R<=102646;R++)Ee[R]=2;for(R=102648;R<=102700;R++)Ee[R]=2;for(R=102701;R<=102703;R++)Ee[R]=0;for(R=102707;R<=102730;R++)Ee[R]=2;for(R=102733;R<=102758;R++)Ee[R]=2;for(R=102767;R<=102900;R++)Ee[R]=0;for(R=102901;R<=102933;R++)Ee[R]=2;for(R=102934;R<=102950;R++)Ee[R]=13;for(R=102951;R<=102963;R++)Ee[R]=0;for(R=102965;R<=102969;R++)Ee[R]=0;for(R=102971;R<=102973;R++)Ee[R]=0;for(R=102975;R<=102989;R++)Ee[R]=0;for(R=102990;R<=102992;R++)Ee[R]=1;for(R=102997;R<=103002;R++)Ee[R]=0;for(R=103003;R<=103008;R++)Ee[R]=2;for(R=103009;R<=103011;R++)Ee[R]=0;for(R=103012;R<=103014;R++)Ee[R]=2;for(R=103019;R<=103021;R++)Ee[R]=0;for(R=103022;R<=103024;R++)Ee[R]=2;for(R=103029;R<=103031;R++)Ee[R]=0;for(R=103032;R<=103034;R++)Ee[R]=2;for(R=103065;R<=103068;R++)Ee[R]=0;for(R=103074;R<=103076;R++)Ee[R]=0;for(R=103077;R<=103079;R++)Ee[R]=1;for(R=103080;R<=103082;R++)Ee[R]=0;for(R=103083;R<=103085;R++)Ee[R]=2;for(R=103090;R<=103093;R++)Ee[R]=0;for(R=103097;R<=103099;R++)Ee[R]=0;for(R=103100;R<=103102;R++)Ee[R]=2;for(R=103107;R<=103109;R++)Ee[R]=0;for(R=103110;R<=103112;R++)Ee[R]=2;for(R=103113;R<=103116;R++)Ee[R]=0;for(R=103117;R<=103120;R++)Ee[R]=2;for(R=103153;R<=103157;R++)Ee[R]=0;for(R=103158;R<=103162;R++)Ee[R]=2;for(R=103163;R<=103165;R++)Ee[R]=0;for(R=103166;R<=103168;R++)Ee[R]=1;for(R=103169;R<=103171;R++)Ee[R]=2;for(R=103186;R<=103188;R++)Ee[R]=0;for(R=103189;R<=103191;R++)Ee[R]=2;for(R=103192;R<=103195;R++)Ee[R]=0;for(R=103196;R<=103199;R++)Ee[R]=2;for(R=103200;R<=103224;R++)Ee[R]=0;for(R=103225;R<=103227;R++)Ee[R]=1;for(R=103232;R<=103237;R++)Ee[R]=0;for(R=103238;R<=103243;R++)Ee[R]=2;for(R=103244;R<=103246;R++)Ee[R]=0;for(R=103247;R<=103249;R++)Ee[R]=2;for(R=103254;R<=103256;R++)Ee[R]=0;for(R=103257;R<=103259;R++)Ee[R]=2;for(R=103264;R<=103266;R++)Ee[R]=0;for(R=103267;R<=103269;R++)Ee[R]=2;for(R=103300;R<=103375;R++)Ee[R]=0;for(R=103381;R<=103383;R++)Ee[R]=0;for(R=103384;R<=103386;R++)Ee[R]=1;for(R=103387;R<=103389;R++)Ee[R]=0;for(R=103390;R<=103392;R++)Ee[R]=2;for(R=103397;R<=103399;R++)Ee[R]=0;for(R=103400;R<=103471;R++)Ee[R]=2;for(R=103476;R<=103478;R++)Ee[R]=0;for(R=103479;R<=103481;R++)Ee[R]=2;for(R=103486;R<=103488;R++)Ee[R]=0;for(R=103489;R<=103491;R++)Ee[R]=2;for(R=103492;R<=103495;R++)Ee[R]=0;for(R=103496;R<=103499;R++)Ee[R]=2;for(R=103528;R<=103543;R++)Ee[R]=0;for(R=103544;R<=103548;R++)Ee[R]=2;for(R=103549;R<=103551;R++)Ee[R]=0;for(R=103552;R<=103554;R++)Ee[R]=1;for(R=103555;R<=103557;R++)Ee[R]=2;for(R=103558;R<=103560;R++)Ee[R]=0;for(R=103571;R<=103573;R++)Ee[R]=0;for(R=103574;R<=103576;R++)Ee[R]=2;for(R=103577;R<=103580;R++)Ee[R]=0;for(R=103581;R<=103583;R++)Ee[R]=2;for(R=103595;R<=103694;R++)Ee[R]=0;for(R=103696;R<=103699;R++)Ee[R]=0;for(R=103700;R<=103793;R++)Ee[R]=2;for(R=103794;R<=103890;R++)Ee[R]=0;for(R=103891;R<=103896;R++)Ee[R]=2;for(R=103900;R<=103971;R++)Ee[R]=2;for(R=103972;R<=103977;R++)Ee[R]=0;for(R=112e3;R<=112101;R++)Ee[R]=0;const $le=[102100,102113,3857,3785,900913],H9e=[104905,104971],U9e=[4326,...$le,...H9e],ME=[-20037508342788905e-9,20037508342788905e-9],N$=[-20037508342787e-6,20037508342787e-6],x8={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:ME,origin:N$,dx:1e-5},Rle={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ME,origin:N$,dx:1e-5},102100:x8,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:ME,origin:N$,dx:1e-5},3857:x8,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:x8};function ea(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,n=e.wkid;if(i!=null||n!=null){if(i===n||cd(t)&&cd(e))return!0;const o=t.latestWkid;if(o!=null&&n===o)return!0;const l=e.latestWkid;return l!=null&&i===l}let s,r;return t.wkt2&&e.wkt2?(s=t.wkt2,r=e.wkt2):t.wkt&&e.wkt&&(s=t.wkt,r=e.wkt),!(!s||!r)&&s.toUpperCase()===r.toUpperCase()}async function xdt(t,e){if(t===e)return!0;PV()||await TV();const i=r=>{var c;const o=r.wkt2||r.wkt;if(o){const f=IE.fromString(qs.PE_TYPE_NONE,o);return f==null?void 0:f.getCode()}const l=r.wkid??r.latestWkid;return l?(c=IE.coordsys(l))==null?void 0:c.getCode():null},n=t?i(t):null,s=e?i(e):null;return n!=null&&s!=null&&n===s}function s2(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Rle[e]||null}function wdt(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const n=t.wkt||t.wkt2;return JSON.stringify(n?i?{wkt:n,vcsWkid:i}:{wkt:n}:{})}function $2(t){if(!Fu(t))return!1;const{wkid:e}=t;if(e)return Ee[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function Y9e(t){return!(Lle(t)||Fle(t))}function cv(t){return(t==null?void 0:t.wkid)===4326}function Sdt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function iZ(t){return(t==null?void 0:t.wkid)===lv.CGCS2000}function cd(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&$le.includes(e)}function X9e(t){return(t==null?void 0:t.wkid)===32662}function ZM(t){return t===lv.GCSMARS2000||t===lv.GCSMARS2000_SPHERE}function Lle(t){return ZM(t==null?void 0:t.wkid)}function KM(t){return t===lv.GCSMOON2000}function Fle(t){return KM(t==null?void 0:t.wkid)}function W9e(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&U9e.includes(e)}function Fu(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const zle={wkid:4326,wkt:VM(Rle[4326].wkTemplate,{Central_Meridian:"0.0"})},qle={wkid:102100,latestWkid:3857},Z9e={wkid:32662};function IV(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const K9e=IV(hr),MV=IV(_f),AV=IV(M0),J9e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${hr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},Q9e=MV.wkt.toUpperCase(),e6e=AV.wkt.toUpperCase();function kV(t){if(t!=null&&Fu(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(ZM(e))return _f;const n=i==null?void 0:i.toUpperCase();if(i&&n===Q9e)return _f;if(KM(e)||n&&n===e6e)return M0}return hr}function Edt(t){return ZM(t)?_f:KM(t)?M0:hr}function c6(t){return ea(t,K9e)}function A0(t){return c6(t)||ea(t,MV)||ea(t,AV)}const Cdt=39.37,t6e=hr.radius*Math.PI/200,Vle=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Zy=Ee,Gle=/UNIT\[([^\]]+)]/i,jle=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),i6e=Ta()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),kd=t=>t*t,cg=t=>t*t*t,AE={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:kd(.001)},"square-centimeters":{inBaseUnits:kd(.01)},"square-decimeters":{inBaseUnits:kd(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:kd(1e3)},"square-inches":{inBaseUnits:kd(.0254)},"square-feet":{inBaseUnits:kd(.3048)},"square-yards":{inBaseUnits:kd(.9144)},"square-miles":{inBaseUnits:kd(1609.344)},"square-us-feet":{inBaseUnits:kd(1200/3937)},acres:{inBaseUnits:.0015625*kd(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*cg(.001)},"cubic-centimeters":{inBaseUnits:1e3*cg(.01)},"cubic-decimeters":{inBaseUnits:1e3*cg(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*cg(1e3)},"cubic-inches":{inBaseUnits:1e3*cg(.0254)},"cubic-feet":{inBaseUnits:1e3*cg(.3048)},"cubic-yards":{inBaseUnits:1e3*cg(.9144)},"cubic-miles":{inBaseUnits:1e3*cg(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},n6e=(()=>{const t={};for(const e in AE)for(const i in AE[e].units)t[i]=e;return t})();function s6e(t,e,i){return t*AE[i].units[e].inBaseUnits}function r6e(t,e,i){return t/AE[i].units[e].inBaseUnits}const Pdt=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],Ble=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],o6e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function Tdt(t){return t==="imperial"||t==="metric"}function uv(t){const e=n6e[t];if(!e)throw new Error("unknown type");return e}function nZ(t,e=null){return e=e||uv(t),AE[e].baseUnit===t}function cs(t,e,i){if(e===i)return t;const n=uv(e);if(n!==uv(i))throw new Error("incompatible units");const s=nZ(e,n)?t:s6e(t,e,n);return nZ(i,n)?s:r6e(s,i,n)}function a6e(t,e,i,n=!1){if(!n&&i.isGeographic)throw new Error("Unable to convert from a linear unit to an angular unit.");const s=bx(i);return e!==s&&(t=s?cs(t,e,s):cs(t,e,"meters")/sm(i)),t}function l6e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function Idt(t){return l6e(t)}function Mdt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function Adt(t,e){const i=cs(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function kdt(t,e){const i=cs(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function Ddt(t,e){const i=cs(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function Ndt(t,e){const i=cs(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Odt(t,e){const i=cs(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function $dt(t,e){const i=cs(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function Hle(t,e,i){return cs(t,e,"meters")/(i*Math.PI/180)}function Ule(t){return i6e.fromJSON(t.toLowerCase())||null}function u6(t){if(t!=null&&!Y9e(t))return 1;const e=sm(t);return e>1e5?1:e}function Yle(t){return sm(t)>=kV(t).metersPerDegree?"meters":bx(t)}function sm(t,e=hr.metersPerDegree){return DV(t,!0)??e}function DV(t,e=!1){const i=(t==null?void 0:t.wkid)??null,n=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let s=null;if(i){if(ZM(i))return _f.metersPerDegree;if(KM(i))return M0.metersPerDegree;s=Zy.values[Zy[i]],!s&&e&&jle.has(i)&&(s=t6e)}else n&&(JM(n)?s=sZ(Vle.exec(n),s):Zle(n)&&(s=sZ(Gle.exec(n),s)));return s}function Rdt(t){return $2(t)?1:sm(t)}function sZ(t,e){return t!=null&&t[1]?Xle(t[1]):e}function Xle(t){return parseFloat(t.split(",")[1])}function bx(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(e)n=Zy.units[Zy[e]];else if(i){const s=JM(i)?Vle:Zle(i)?Gle:null;if(s){const r=s.exec(i);r!=null&&r[1]&&(n=h6e(r[1]))}}return n!=null?Ule(n):null}function c6e(t){const e=bx(t);return e!=null&&Ble.includes(e)?e:null}function Wle(t){const e=Yle(t);return e!=null&&Ble.includes(e)?e:null}function Ldt(t){const e=bx(t);return e==null?null:o6e.get(e)}function Zle(t){return/^GEOCCS/i.test(t)}function JM(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const u6e=1e-7;function h6e(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!Zy.units.includes(i)){const n=Xle(t);i=null;const s=Zy.values;for(let r=0;r<s.length;++r)if(Math.abs(n-s[r])<u6e){i=Zy.units[r];break}}return i}function Fdt(t){const e=bx(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const d6e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},f6e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},p6e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},m6e=Ta()(d6e),g6e=Ta()(f6e),zdt=Ta()(p6e);function zt(t,e,i){let n,s;return e===void 0?(s=t,n=[void 0]):typeof e!="string"?(s=t,n=[void 0],i=e):(s=e,n=Array.isArray(t)?t:[t]),(r,o)=>{const l=r.constructor.prototype;for(const c of n){const f=Jae(r,c,s);f.write&&typeof f.write=="object"||(f.write={}),i&&(f.write.target=i),f.write.writer=l[o]}}}var Rd;let ss=Rd=class extends St{static fromJSON(t){if(!t)return null;if((t==null?void 0:t.wkid)===102100)return Rd.WebMercator;if((t==null?void 0:t.wkid)===4326)return Rd.WGS84;const e=new Rd;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return cv(this)}get isWebMercator(){return cd(this)}get isGeographic(){return $2(this)}get isWrappable(){return W9e(this)}get metersPerUnit(){return sm(this)}get unit(){return bx(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Rd.WGS84)return new Rd(zle);if(this===Rd.WebMercator)return new Rd(qle);const t=new Rd;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=Ue(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:n}=t.imageCoordinateSystem,s=this.imageCoordinateSystem;return e==null||n?JSON.stringify(s)===JSON.stringify(t.imageCoordinateSystem):i?s.id===e&&s.referenceServiceName===i:s.id===e}return ea(this,t)}toJSON(t){return this.write(void 0,t)}};ss.GCS_NAD_1927=null,ss.WGS84=null,ss.WebMercator=null,ss.PlateCarree=null,I([O({readOnly:!0})],ss.prototype,"isWGS84",null),I([O({readOnly:!0})],ss.prototype,"isWebMercator",null),I([O({readOnly:!0})],ss.prototype,"isGeographic",null),I([O({readOnly:!0})],ss.prototype,"isWrappable",null),I([O({type:Ss,json:{write:!0}})],ss.prototype,"latestWkid",void 0),I([O({readOnly:!0})],ss.prototype,"metersPerUnit",null),I([O({readOnly:!0})],ss.prototype,"unit",null),I([O({type:Ss,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],ss.prototype,"wkid",void 0),I([O({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],ss.prototype,"wkt",void 0),I([zt("wkt"),zt("web-scene","wkt")],ss.prototype,"writeWkt",null),I([O({type:String,json:{write:!1}})],ss.prototype,"wkt2",void 0),I([O({type:Ss,json:{write:!0}})],ss.prototype,"vcsWkid",void 0),I([O({type:Ss,json:{write:!0}})],ss.prototype,"latestVcsWkid",void 0),I([O()],ss.prototype,"imageCoordinateSystem",void 0),ss=Rd=I([De("esri.geometry.SpatialReference")],ss),ss.prototype.toJSON.isDefaultToJSON=!0,ss.GCS_NAD_1927=Ei.freeze(new ss({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),ss.WGS84=Ei.freeze(new ss(zle)),ss.WebMercator=Ei.freeze(new ss(qle)),ss.PlateCarree=Ei.freeze(new ss(Z9e));const Gi=ss;let Ld=class extends St{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Gi.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Gi)return e;if(e!=null){const n=new Gi;return n.read(e,i),n}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};I([O()],Ld.prototype,"type",void 0),I([O({readOnly:!0})],Ld.prototype,"cache",null),I([O({readOnly:!0})],Ld.prototype,"extent",null),I([O({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ld.prototype,"hasM",void 0),I([O({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ld.prototype,"hasZ",void 0),I([O({type:Gi,json:{write:!0},value:Gi.WGS84})],Ld.prototype,"spatialReference",void 0),I([Dt("spatialReference")],Ld.prototype,"readSpatialReference",null),Ld=I([De("esri.geometry.Geometry")],Ld);const Gv=Ld,y6e=Object.prototype.toString;function v6e(t){const e="__accessorMetadata__"in t?Qo(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return _6e.apply(this,i)}}function _6e(t,e,i,n){jM(t,e).cast=n}function b6e(t){return(e,i)=>{jM(e,t).cast=e[i]}}function Es(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&y6e.call(t[0])==="[object Function]"?v6e(t[0]):t.length===1&&typeof t[0]=="string"?b6e(t[0]):void 0}const x6e=57.29577951308232,w6e=.017453292519943;function rZ(t){return t*x6e}function oZ(t){return t*w6e}function Vdt(t){return t/hr.radius}function Gdt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/hr.radius))}function O$(t){return t.wkid!=null||t.wkt!=null}const w8=[0,0];function h6(t,e,i,n,s){const r=t,o=s;if(o.spatialReference=i,"x"in r&&"x"in o)[o.x,o.y]=e(r.x,r.y,w8,n);else if("xmin"in r&&"xmin"in o)[o.xmin,o.ymin]=e(r.xmin,r.ymin,w8,n),[o.xmax,o.ymax]=e(r.xmax,r.ymax,w8,n);else if("paths"in r&&"paths"in o||"rings"in r&&"rings"in o){const l="paths"in r?r.paths:r.rings,c=[];let f;for(let y=0;y<l.length;y++){const _=l[y];f=[],c.push(f);for(let x=0;x<_.length;x++)f.push(e(_[x][0],_[x][1],[0,0],n)),_[x].length>2&&f[x].push(_[x][2]),_[x].length>3&&f[x].push(_[x][3])}"paths"in o?o.paths=c:o.rings=c}else if("points"in r&&"points"in o){const l=r.points,c=[];for(let f=0;f<l.length;f++)c[f]=e(l[f][0],l[f][1],[0,0],n),l[f].length>2&&c[f].push(l[f][2]),l[f].length>3&&c[f].push(l[f][3]);o.points=c}return s}function HT(t,e){const i=t&&(O$(t)?t:t.spatialReference),n=e&&(O$(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!n)&&(!!ea(n,i)||cd(n)&&cv(i)||cd(i)&&cv(n))}function Kle(t,e){if(t==null)return null;const i=t.spatialReference,n=e&&(O$(e)?e:e.spatialReference);return HT(i,n)?ea(i,n)?Ue(t):cd(n)?h6(t,Gb,Gi.WebMercator,!1,Ue(t)):cv(n)?h6(t,QM,Gi.WGS84,!1,Ue(t)):null:null}function Gb(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const n=oZ(e);return i[0]=oZ(t)*hr.radius,i[1]=hr.halfSemiMajorAxis*Math.log((1+Math.sin(n))/(1-Math.sin(n))),i}function QM(t,e,i=[0,0],n=!1){if(t===ME[0])i[0]=-180;else if(t===ME[1])i[0]=180;else{const s=rZ(t/hr.radius);i[0]=n?s:s-360*Math.floor((s+180)/360)}return i[1]=rZ(Math.PI/2-2*Math.atan(Math.exp(-e/hr.radius))),i}function UT(t,e=!1,i=Ue(t)){return h6(t,Gb,Gi.WebMercator,e,i)}function jb(t,e=!1,i=Ue(t)){return h6(t,QM,Gi.WGS84,e,i)}function S6e(t,e){const i=t.x-e.x,n=t.y-e.y,s=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+n*n+s*s)}function E6e(t){var e;return((e=Jle(t,Qle))==null?void 0:e[0])??null}function C6e(t){var e;return((e=Jle(t,Qle))==null?void 0:e[1])??null}function Jle({x:t,y:e,spatialReference:i},n=[0,0]){if(i){if(cd(i))return QM(t,e,n);if($2(i))return n[0]=t,n[1]=e,n}return null}const Qle=[0,0];var YT;const S8=[0,0];function aZ(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ul=YT=class extends Gv{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Ei.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,n,s){let r;if(Array.isArray(t))r=t,s=e,t=r[0],e=r[1],i=r[2],n=r[3];else if(t&&typeof t=="object"){if(r=t,t=r.x!=null?r.x:r.longitude,e=r.y!=null?r.y:r.latitude,i=r.z,n=r.m,(s=r.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Gi(s)),r.longitude!=null||r.latitude!=null){if(r.longitude==null)qt.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(r.latitude==null)qt.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!r.declaredClass&&(s!=null&&s.isWebMercator)){const l=Gb(r.longitude,r.latitude,S8);t=l[0],e=l[1]}}}else aZ(i)?(s=i,i=null):aZ(n)&&(s=n,n=null);const o={x:t,y:e};return o.x==null&&o.y!=null?qt.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&qt.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),i!=null&&(o.z=i),n!=null&&(o.m=n),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return C6e(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Gb(i,t,S8)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return E6e(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Gb(t,e,S8)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new YT;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return YT.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:n,m:s,spatialReference:r}=this,{z:o,m:l}=t;let{x:c,y:f,spatialReference:y}=t;if(!r.equals(y))if(r.isWebMercator&&y.isWGS84)[c,f]=Gb(c,f),y=r;else{if(!r.isWGS84||!y.isWebMercator)return!1;[c,f]=QM(c,f),y=r}return e===c&&i===f&&n===o&&s===l&&r.wkid===y.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=s2(this.spatialReference);if(!t)return this;let e=this.x;const[i,n]=t.valid,s=2*n;let r;return e>n?(r=Math.ceil(Math.abs(e-n)/s),e-=r*s):e<i&&(r=Math.ceil(Math.abs(e-i)/s),e+=r*s),this._set("x",e),this}distance(t){return S6e(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};I([O({readOnly:!0})],ul.prototype,"cache",null),I([O({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ul.prototype,"hasM",null),I([O({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ul.prototype,"hasZ",null),I([O({type:Number})],ul.prototype,"latitude",null),I([O({type:Number})],ul.prototype,"longitude",null),I([O({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Es(t=>isNaN(t)?t:yx(t))],ul.prototype,"x",void 0),I([zt("x")],ul.prototype,"writeX",null),I([Dt("x")],ul.prototype,"readX",null),I([O({type:Number,json:{write:!0}})],ul.prototype,"y",void 0),I([O({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ul.prototype,"z",void 0),I([O({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ul.prototype,"m",void 0),ul=YT=I([De("esri.geometry.Point")],ul),ul.prototype.toJSON.isDefaultToJSON=!0;const Yi=ul,E8=[0,0];function ece(t,e){return e!=null&&pl(t,e.x,e.y,e.z)}function jdt(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!R2(t,i))return!1;return!0}function P6e(t,e){const{xmin:i,ymin:n,zmin:s,xmax:r,ymax:o,zmax:l}=e;return t.hasZ&&e.hasZ?pl(t,i,n,s)&&pl(t,i,o,s)&&pl(t,r,o,s)&&pl(t,r,n,s)&&pl(t,i,n,l)&&pl(t,i,o,l)&&pl(t,r,o,l)&&pl(t,r,n,l):pl(t,i,n)&&pl(t,i,o)&&pl(t,r,o)&&pl(t,r,n)}function R2(t,e){return pl(t,e[0],e[1])}function T6e(t,e){return pl(t,e[0],e[1],e[2])}function pl(t,e,i,n){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(n==null||!t.hasZ||n>=t.zmin&&n<=t.zmax)}function I6e(t,e){return E8[1]=e.y,E8[0]=e.x,M6e(t,E8)}function M6e(t,e){return tce(t.rings,e)}function tce(t,e){if(!t)return!1;if(A6e(t))return lZ(!1,t,e);let i=!1;for(let n=0,s=t.length;n<s;n++)i=lZ(i,t[n],e);return i}function A6e(t){return!Array.isArray(t[0][0])}function lZ(t,e,i){const[n,s]=i;let r=t,o=0;for(let l=0,c=e.length;l<c;l++){o++,o===c&&(o=0);const[f,y]=e[l],[_,x]=e[o];(y<s&&x>=s||x<s&&y>=s)&&f+(s-y)/(x-y)*(_-f)<n&&(r=!r)}return r}function k6e(t,e){return ece(t,e)}function D6e(t,e){const i=t.hasZ&&e.hasZ;let n,s,r;if(t.xmin<=e.xmin){if(n=e.xmin,t.xmax<n)return!1}else if(n=t.xmin,e.xmax<n)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(r=e.zmin,t.zmax<r)return!1}else if(r=t.zmin,e.zmax<r)return!1}return!0}function N6e(t,e){const{points:i,hasZ:n}=e,s=n?T6e:R2;for(const r of i)if(s(t,r))return!0;return!1}const hv=[0,0],dv=[0,0],fv=[0,0],pv=[0,0],O6e=[hv,dv,fv,pv],ice=[[fv,hv],[hv,dv],[dv,pv],[pv,fv]];function $6e(t,e){return R6e(t,e.rings)}function R6e(t,e){hv[0]=t.xmin,hv[1]=t.ymax,dv[0]=t.xmax,dv[1]=t.ymax,fv[0]=t.xmin,fv[1]=t.ymin,pv[0]=t.xmax,pv[1]=t.ymin;for(const i of O6e)if(tce(e,i))return!0;for(const i of e){if(!i.length)continue;let n=i[0];if(R2(t,n))return!0;for(let s=1;s<i.length;s++){const r=i[s];if(R2(t,r)||nce(n,r,ice))return!0;n=r}}return!1}function L6e(t,e){hv[0]=t.xmin,hv[1]=t.ymax,dv[0]=t.xmax,dv[1]=t.ymax,fv[0]=t.xmin,fv[1]=t.ymin,pv[0]=t.xmax,pv[1]=t.ymin;const i=e.paths;for(const n of i){if(!i.length)continue;let s=n[0];if(R2(t,s))return!0;for(let r=1;r<n.length;r++){const o=n[r];if(R2(t,o)||nce(s,o,ice))return!0;s=o}}return!1}const No=[0,0];function F6e(t){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.length-1;s++){const r=i[s],o=i[s+1];for(let l=e+1;l<t.length;l++)for(let c=0;c<t[l].length-1;c++){const f=t[l][c],y=t[l][c+1];if($$(r,o,f,y,No)&&!(No[0]===r[0]&&No[1]===r[1]||No[0]===f[0]&&No[1]===f[1]||No[0]===o[0]&&No[1]===o[1]||No[0]===y[0]&&No[1]===y[1]))return!0}}const n=i.length;if(!(n<=4))for(let s=0;s<n-3;s++){let r=n-1;s===0&&(r=n-2);const o=i[s],l=i[s+1];for(let c=s+2;c<r;c++){const f=i[c],y=i[c+1];if($$(o,l,f,y,No)&&!(No[0]===o[0]&&No[1]===o[1]||No[0]===f[0]&&No[1]===f[1]||No[0]===l[0]&&No[1]===l[1]||No[0]===y[0]&&No[1]===y[1]))return!0}}}return!1}function nce(t,e,i){for(let n=0;n<i.length;n++)if($$(t,e,i[n][0],i[n][1]))return!0;return!1}function $$(t,e,i,n,s){const[r,o]=t,[l,c]=e,[f,y]=i,[_,x]=n,S=_-f,P=r-f,A=l-r,D=x-y,N=o-y,F=c-o,G=D*A-S*F;if(G===0)return!1;const V=(S*N-D*P)/G,B=(A*N-F*P)/G;return V>=0&&V<=1&&B>=0&&B<=1&&(s&&(s[0]=r+V*(l-r),s[1]=o+V*(c-o)),!0)}function z6e(t){switch(t){case"esriGeometryEnvelope":case"extent":return D6e;case"esriGeometryMultipoint":case"multipoint":return N6e;case"esriGeometryPoint":case"point":return k6e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return $6e;case"esriGeometryPolyline":case"polyline":return L6e}}var yu;function q6e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function ug(t,e,i){return e==null?i:i==null?e:t(e,i)}let _o=yu=class extends Gv{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,n,s){return q6e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Gi.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:n,spatialReference:s??Gi.WGS84}}static fromBounds(t,e){return new yu({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new yu({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Yi({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new yu;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&HT(e,i)&&(t=e.isWebMercator?UT(t):jb(t,!0)),t.type==="point"?ece(this,t):t.type==="extent"&&P6e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&HT(e,i)&&(t=e.isWebMercator?UT(t):jb(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,n=this.height*e;if(this.xmin+=i,this.ymin+=n,this.xmax-=i,this.ymax-=n,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!ea(e,i)&&HT(e,i)&&(t=e.isWebMercator?UT(t):jb(t,!0)),z6e(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=ug(Math.min,this.zmin,t.zmin),this.zmax=ug(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=ug(Math.min,this.mmin,t.mmin),this.mmax=ug(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=ug(Math.max,this.zmin,t.zmin),this.zmax=ug(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=ug(Math.max,this.mmin,t.mmin),this.mmax=ug(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=s2(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const n=e.isWebMercator?jb(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(n.x=C8(n.x,t).x),this.spatialReference=new Gi(VM((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:n.x}))}return this}_getCM(t){let e=null;const[i,n]=t.valid,s=this.xmin,r=this.xmax;return s>=i&&s<=n&&r>=i&&r<=n||(e=this.center),e}_normalize(t,e,i){const n=this.spatialReference;if(!n)return this;const s=i??s2(n);if(s==null)return this;const r=this._getParts(s).map(c=>c.extent);if(r.length<2)return r[0]||this;if(r.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return r;let o=!0,l=!0;return r.forEach(c=>{c.hasZ||(o=!1),c.hasM||(l=!1)}),{rings:r.map(c=>{const f=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(o){const y=(c.zmax-c.zmin)/2;for(let _=0;_<f.length;_++)f[_].push(y)}if(l){const y=(c.mmax-c.mmin)/2;for(let _=0;_<f.length;_++)f[_].push(y)}return f}),hasZ:o,hasM:l,spatialReference:n}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:r,spatialReference:o}=this,l=this.width,c=this.xmin,f=this.xmax;let y;t=t||s2(o);const[_,x]=t.valid;y=C8(this.xmin,t);const S=y.x,P=y.frameId;y=C8(this.xmax,t);const A=y.x,D=y.frameId,N=S===A&&l>0;if(l>2*x){const F=new yu(c<f?S:A,s,x,r,o),G=new yu(_,s,c<f?A:S,r,o),V=new yu(0,s,x,r,o),B=new yu(_,s,0,r,o),W=[],J=[];F.contains(V)&&W.push(P),F.contains(B)&&J.push(P),G.contains(V)&&W.push(D),G.contains(B)&&J.push(D);for(let re=P+1;re<D;re++)W.push(re),J.push(re);e.push({extent:F,frameIds:[P]},{extent:G,frameIds:[D]},{extent:V,frameIds:W},{extent:B,frameIds:J})}else S>A||N?e.push({extent:new yu(S,s,x,r,o),frameIds:[P]},{extent:new yu(_,s,A,r,o),frameIds:[D]}):e.push({extent:new yu(S,s,A,r,o),frameIds:[P]});this.cache._parts=e}const i=this.hasZ,n=this.hasM;if(i||n){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),n&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let r=0;r<e.length;r++)e[r].extent.set(s)}return e}};function C8(t,e){const[i,n]=e.valid,s=2*n;let r,o=0;return t>n?(r=Math.ceil(Math.abs(t-n)/s),t-=r*s,o=r):t<i&&(r=Math.ceil(Math.abs(t-i)/s),t+=r*s,o=-r),{x:t,frameId:o}}I([O({readOnly:!0})],_o.prototype,"cache",null),I([O({readOnly:!0})],_o.prototype,"center",null),I([O({readOnly:!0})],_o.prototype,"extent",null),I([O({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],_o.prototype,"hasM",null),I([O({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],_o.prototype,"hasZ",null),I([O({readOnly:!0})],_o.prototype,"height",null),I([O({readOnly:!0})],_o.prototype,"width",null),I([O({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],_o.prototype,"xmin",void 0),I([O({type:Number,json:{write:!0}})],_o.prototype,"ymin",void 0),I([O({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],_o.prototype,"mmin",void 0),I([O({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],_o.prototype,"zmin",void 0),I([O({type:Number,json:{write:!0}})],_o.prototype,"xmax",void 0),I([O({type:Number,json:{write:!0}})],_o.prototype,"ymax",void 0),I([O({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],_o.prototype,"mmax",void 0),I([O({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],_o.prototype,"zmax",void 0),_o=yu=I([De("esri.geometry.Extent")],_o),_o.prototype.toJSON.isDefaultToJSON=!0;const dr=_o;let GS;var $se,Rse;const V6e=(($se=globalThis.esriConfig)==null?void 0:$se.locale)??((Rse=globalThis.dojoConfig)==null?void 0:Rse.locale);var Lse;const jS=(Lse=globalThis.document)==null?void 0:Lse.documentElement;function sce(){var i;const t=jS==null?void 0:jS.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return V6e??t??e??"en"}function zc(){return GS===void 0&&(GS=sce()),GS}function Bdt(t=zc()){const e=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(t);return e==null?void 0:e[1].toLowerCase()}const XT=[];function G6e(t){return XT.push(t),fn(()=>XT.splice(XT.indexOf(t),1))}const WT=[];function NV(t){return WT.push(t),fn(()=>WT.splice(WT.indexOf(t),1))}function cZ(){const t=sce();GS!==t&&([...WT].forEach(e=>e(t)),GS=t,[...XT].forEach(e=>e(t)))}var Fse;(Fse=globalThis.addEventListener)==null||Fse.call(globalThis,"languagechange",cZ),jS&&new MutationObserver(()=>{cZ()}).observe(jS,{attributeFilter:["lang"]});let m4;function j6e(t){return m4&&!m4.destroyed||(m4=t()),m4}var R$;const B6e=new mn({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let vu=R$=class extends Ei{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new R$({categories:this.categories?Ue(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let n="";if(this.extent){const o=Kle(this.extent,Gi.WGS84);o!=null&&(n=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const r={categories:i,bbox:n,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(r.sortField=this.sortField.split(",").map(o=>B6e.toJSON(o.trim())).join(","),r.sortOrder=this.sortOrder),{query:{...e,...r}}}};I([O()],vu.prototype,"categories",void 0),I([O()],vu.prototype,"disableExtraQuery",void 0),I([O({type:dr})],vu.prototype,"extent",void 0),I([O()],vu.prototype,"filter",void 0),I([O()],vu.prototype,"num",void 0),I([O()],vu.prototype,"query",void 0),I([O()],vu.prototype,"sortField",void 0),I([O()],vu.prototype,"sortOrder",null),I([O()],vu.prototype,"start",void 0),vu=R$=I([De("esri.portal.PortalQueryParams")],vu);const Uh=vu;var L$;let to=L$=class extends St{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(n=>n.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new rt("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new L$({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=Qo(Uh,t);const n=this.portal;return parseFloat(n.currentVersion)>5?(i=i||new Uh,n.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new Uh,i.query="group:"+this.id+(i.query?" "+i.query:""),n.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(n=>{const s=n.contentCategorySetsGroupQuery;if(s){const r=new Uh({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(r,e)}throw new rt("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const s=n.results[0],r=new Uh({num:1,query:`typekeywords:"${t}"`});return s.queryItems(r,e)}throw new rt("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",e).then(s=>{const r=s==null?void 0:s.categorySchema;return r!=null&&r.length?r:[]}):[])}};I([O()],to.prototype,"access",void 0),I([O({type:Date})],to.prototype,"created",void 0),I([O()],to.prototype,"description",void 0),I([O()],to.prototype,"id",void 0),I([O()],to.prototype,"isInvitationOnly",void 0),I([O({type:Date})],to.prototype,"modified",void 0),I([O()],to.prototype,"owner",void 0),I([O()],to.prototype,"portal",void 0),I([O()],to.prototype,"snippet",void 0),I([O()],to.prototype,"sortField",void 0),I([O()],to.prototype,"sortOrder",void 0),I([O()],to.prototype,"sourceJSON",void 0),I([O()],to.prototype,"tags",void 0),I([O()],to.prototype,"thumbnail",void 0),I([O({readOnly:!0})],to.prototype,"thumbnailUrl",null),I([O()],to.prototype,"title",void 0),I([O({readOnly:!0})],to.prototype,"url",null),to=L$=I([De("esri.portal.PortalGroup")],to);const F$=to;let j1=class extends Ei{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};I([O()],j1.prototype,"nextQueryParams",void 0),I([O()],j1.prototype,"queryParams",void 0),I([O()],j1.prototype,"results",void 0),I([O()],j1.prototype,"total",void 0),j1=I([De("esri.portal.PortalQueryResult")],j1);const H6e=j1;let hp=class extends St{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new rt("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};I([O({type:Date})],hp.prototype,"created",void 0),I([O()],hp.prototype,"id",void 0),I([O()],hp.prototype,"portal",void 0),I([O()],hp.prototype,"title",void 0),I([O({readOnly:!0})],hp.prototype,"url",null),I([O()],hp.prototype,"username",void 0),hp=I([De("esri.portal.PortalFolder")],hp);const U6e=hp;var z$;let Ps=z$=class extends St{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.username}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,n=t==null?void 0:t.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let r=this.userContentUrl;return n&&(r+="/"+(typeof n=="string"?n:n.id)),this.portal.request(r+"/addItem",s).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const n=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:n}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",n=[],s=t.map(r=>r.id);if(s.length){const r={method:"post",query:{items:s.join(","),permanentDelete:e}},o=await this.portal.request(i,r);for(const l of o.results){const c=t.find(_=>l.itemId===_.id),f=l.success;let y=null;f?(c.id=null,c.portal=null):l.error&&(y=new rt("portal:delete-item-failed",l.error.message,l.error)),n.push({item:c,success:f,error:y})}}return n}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(n=>{const s=U6e.fromJSON(n);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const n=F$.fromJSON(i);return n.portal=this.portal,n}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await st(()=>Promise.resolve().then(()=>Hde),void 0,import.meta.url),n={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},s=await this.portal.request(e,{query:n});let r;return s!=null&&s.items?(r=s.items.map(o=>{const l=i.fromJSON(o);return l.portal=this.portal,l}),await Promise.all(r.map(o=>o.load())),{items:r,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new F$({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new rt("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,n=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:n})}toJSON(){throw new rt("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new z$({sourceJSON:t});return e.read(t),e}};I([O()],Ps.prototype,"access",void 0),I([O({type:Date})],Ps.prototype,"created",void 0),I([O()],Ps.prototype,"culture",void 0),I([O()],Ps.prototype,"description",void 0),I([O()],Ps.prototype,"email",void 0),I([O()],Ps.prototype,"favGroupId",void 0),I([O()],Ps.prototype,"fullName",void 0),I([O({type:Date})],Ps.prototype,"modified",void 0),I([O()],Ps.prototype,"orgId",void 0),I([O()],Ps.prototype,"portal",void 0),I([O()],Ps.prototype,"preferredView",void 0),I([O()],Ps.prototype,"privileges",void 0),I([O()],Ps.prototype,"region",void 0),I([O()],Ps.prototype,"role",void 0),I([O()],Ps.prototype,"roleId",void 0),I([O()],Ps.prototype,"sourceJSON",void 0),I([O()],Ps.prototype,"thumbnail",void 0),I([O({readOnly:!0})],Ps.prototype,"thumbnailUrl",null),I([O()],Ps.prototype,"units",void 0),I([O({readOnly:!0})],Ps.prototype,"userContentUrl",null),I([O({readOnly:!0})],Ps.prototype,"url",null),I([O()],Ps.prototype,"username",void 0),I([O()],Ps.prototype,"userLicenseTypeId",void 0),I([O()],Ps.prototype,"userType",void 0),Ps=z$=I([De("esri.portal.PortalUser")],Ps);const OV=Ps;var bc;let Jw;const uZ={PortalGroup:()=>Promise.resolve({default:F$}),PortalItem:()=>st(()=>Promise.resolve().then(()=>Hde),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:OV})};let Rt=bc=class extends mV(GC){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=jn.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){hZ.unregister(this),this.defaultBasemap=co(this.defaultBasemap),this.defaultDevBasemap=co(this.defaultDevBasemap),this.defaultVectorBasemap=co(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Po(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)jn.request.trustedServers.includes(e)||jn.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,e=!t||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get hasAPIKey(){return Tle(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.slice(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=OV.fromJSON(t),e.portal=this),e}load(t){const e=st(()=>import("./Basemap-BTOnfB6q.js").then(i=>i.B),[],import.meta.url).then(({default:i})=>{oc(t),Jw=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var n;if(!this.hasAPIKey&&Li){const s=Li;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==bc.AUTH_MODE_AUTO&&this.authMode!==bc.AUTH_MODE_NO_PROMPT||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",Y6e(new WeakRef(this))),hZ.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await st(async()=>{const{default:i}=await import("./ElevationLayer-DkqNcQDF.js");return{default:i}},__vite__mapDeps([82,83,6,7,84,85,39,86]),import.meta.url)).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(t,e);i.unshift(...n)}return i}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const e=new Uh;e.query=this.default3DBasemapQuery,e.disableExtraQuery=!0;const i=(await this.queryItems(e,t)).results.find(n=>n.type==="Web Scene");return i?new Jw({portalItem:i}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):jc(t)?Promise.reject(lr()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Uh({num:100,sortField:"title"});if(e!=null&&e.length){const n=[];for(const s of e)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=n.join(" OR "),this.queryGroups(i,t).then(s=>s.results)}return jc(t)?Promise.reject(lr()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||zc();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||zc();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return j6e(()=>new bc)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const n=this.restUrl+"/portals/self",s={authMode:t,query:{culture:zc().toLowerCase()},withCredentials:!0,...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),e&&(s.query.default=!0),this.request(n,s)}queryPortal(t,e,i,n){const s=Qo(Uh,e),r=o=>this.request(this.restUrl+t,{...s.toRequestOptions(this),...n}).then(l=>{const c=s.clone();return c.start=l.nextStart,new H6e({nextQueryParams:c,queryParams:s,total:l.total,results:bc._resultsToTypedArray(o,{portal:this},l,n)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(jh(c),l)));return i&&uZ[i]?uZ[i]().then(({default:o})=>(oc(n),r(o))):r()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new rt("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===bc.AUTH_MODE_ANONYMOUS||this.authMode===bc.AUTH_MODE_NO_PROMPT&&!Li)return Promise.reject(new rt("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Li?Li.getCredential(this.restUrl,{prompt:this.authMode!==bc.AUTH_MODE_NO_PROMPT}).then(e=>t(e)):t(this.credential)}normalizeUrl(t){var i;const e=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(n=>{const s=bc._resultsToTypedArray(i,{portal:this},n);return Promise.all(s.map(r=>typeof r.when=="function"?r.when():n)).then(()=>s,()=>s)})}request(t,e={}){const i={f:"json",...e.query},{authMode:n=this.authMode===bc.AUTH_MODE_ANONYMOUS||this.authMode===bc.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:r=!1,method:o="auto",responseType:l="json",signal:c}=e,f={authMode:n,body:s,cacheBust:r,method:o,query:i,responseType:l,timeout:0,signal:c};return e.withCredentials&&(f.withCredentials=!0),es(this._normalizeSSL(t),f).then(y=>y.data)}toJSON(){throw new rt("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new bc({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new rt("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new Uh;i.query=t||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const n=await this.queryGroups(i,e);if(!n.total)return[];const s=n.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const r=await s.queryItems(i,e);return r.total?r.results.filter(o=>o.type==="Web Map").map(o=>new Jw({portalItem:o})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const n=new Uh({query:i,disableExtraQuery:!0}),s=await this.queryGroups(n,e);if(!s.total)return[];const r=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=r.sortField||"name",n.sortOrder=r.sortOrder||"desc";const o=await r.queryItems(n,e);return o.total?o.results.filter(l=>l.type==="Web Scene").map(l=>new Jw({portalItem:l})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=Jw.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,n){let s;if(i){const r=n!=null?n.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(s=s.map(o=>{const l=Object.assign(t?t.fromJSON(o):o,e);return typeof l.load=="function"&&l.load(r),l}))}else s=[];return s}};Rt.AUTH_MODE_ANONYMOUS="anonymous",Rt.AUTH_MODE_AUTO="auto",Rt.AUTH_MODE_IMMEDIATE="immediate",Rt.AUTH_MODE_NO_PROMPT="no-prompt",I([O()],Rt.prototype,"access",void 0),I([O()],Rt.prototype,"allSSL",void 0),I([O()],Rt.prototype,"authMode",void 0),I([O()],Rt.prototype,"authorizedCrossOriginDomains",void 0),I([Dt("authorizedCrossOriginDomains")],Rt.prototype,"readAuthorizedCrossOriginDomains",null),I([O()],Rt.prototype,"basemapGalleryGroupQuery",void 0),I([O({json:{name:"3DBasemapGalleryGroupQuery"}})],Rt.prototype,"basemapGalleryGroupQuery3D",void 0),I([O()],Rt.prototype,"bingKey",void 0),I([O()],Rt.prototype,"canListApps",void 0),I([O()],Rt.prototype,"canListData",void 0),I([O()],Rt.prototype,"canListPreProvisionedItems",void 0),I([O()],Rt.prototype,"canProvisionDirectPurchase",void 0),I([O()],Rt.prototype,"canSearchPublic",void 0),I([O()],Rt.prototype,"canShareBingPublic",void 0),I([O()],Rt.prototype,"canSharePublic",void 0),I([O()],Rt.prototype,"canSignInArcGIS",void 0),I([O()],Rt.prototype,"canSignInIDP",void 0),I([O()],Rt.prototype,"colorSetsGroupQuery",void 0),I([O()],Rt.prototype,"commentsEnabled",void 0),I([O({type:Date})],Rt.prototype,"created",void 0),I([O()],Rt.prototype,"credential",void 0),I([O()],Rt.prototype,"culture",void 0),I([O()],Rt.prototype,"currentVersion",void 0),I([O()],Rt.prototype,"customBaseUrl",void 0),I([O()],Rt.prototype,"default3DBasemapQuery",void 0),I([O()],Rt.prototype,"defaultBasemap",void 0),I([Dt("defaultBasemap")],Rt.prototype,"readDefaultBasemap",null),I([O()],Rt.prototype,"defaultDevBasemap",void 0),I([Dt("defaultDevBasemap")],Rt.prototype,"readDefaultDevBasemap",null),I([O({type:dr})],Rt.prototype,"defaultExtent",void 0),I([O()],Rt.prototype,"defaultVectorBasemap",void 0),I([Dt("defaultVectorBasemap")],Rt.prototype,"readDefaultVectorBasemap",null),I([O()],Rt.prototype,"description",void 0),I([O()],Rt.prototype,"devBasemapGalleryGroupQuery",void 0),I([O()],Rt.prototype,"eueiEnabled",void 0),I([O({readOnly:!0})],Rt.prototype,"extraQuery",null),I([O()],Rt.prototype,"featuredGroups",void 0),I([O()],Rt.prototype,"featuredItemsGroupQuery",void 0),I([O()],Rt.prototype,"galleryTemplatesGroupQuery",void 0),I([O()],Rt.prototype,"layoutGroupQuery",void 0),I([O()],Rt.prototype,"livingAtlasGroupQuery",void 0),I([O({readOnly:!0})],Rt.prototype,"hasAPIKey",null),I([O()],Rt.prototype,"hasCategorySchema",void 0),I([O()],Rt.prototype,"hasClassificationSchema",void 0),I([O()],Rt.prototype,"helpBase",void 0),I([O()],Rt.prototype,"helperServices",void 0),I([O()],Rt.prototype,"helpMap",void 0),I([O()],Rt.prototype,"homePageFeaturedContent",void 0),I([O()],Rt.prototype,"homePageFeaturedContentCount",void 0),I([O()],Rt.prototype,"httpPort",void 0),I([O()],Rt.prototype,"httpsPort",void 0),I([O()],Rt.prototype,"id",void 0),I([O()],Rt.prototype,"ipCntryCode",void 0),I([O({readOnly:!0})],Rt.prototype,"isOrganization",null),I([O()],Rt.prototype,"isPortal",void 0),I([O()],Rt.prototype,"isReadOnly",void 0),I([O({readOnly:!0})],Rt.prototype,"itemPageUrl",null),I([O()],Rt.prototype,"layerTemplatesGroupQuery",void 0),I([O()],Rt.prototype,"maxTokenExpirationMinutes",void 0),I([O({type:Date})],Rt.prototype,"modified",void 0),I([O()],Rt.prototype,"name",void 0),I([O()],Rt.prototype,"portalHostname",void 0),I([O()],Rt.prototype,"portalMode",void 0),I([O()],Rt.prototype,"portalProperties",void 0),I([O()],Rt.prototype,"region",void 0),I([O()],Rt.prototype,"recycleBinEnabled",void 0),I([O({readOnly:!0})],Rt.prototype,"restUrl",null),I([O()],Rt.prototype,"rotatorPanels",void 0),I([O()],Rt.prototype,"showHomePageDescription",void 0),I([O()],Rt.prototype,"sourceJSON",void 0),I([O()],Rt.prototype,"staticImagesUrl",void 0),I([O({json:{name:"2DStylesGroupQuery"}})],Rt.prototype,"stylesGroupQuery2d",void 0),I([O({json:{name:"stylesGroupQuery"}})],Rt.prototype,"stylesGroupQuery3d",void 0),I([O()],Rt.prototype,"supportsHostedServices",void 0),I([O()],Rt.prototype,"symbolSetsGroupQuery",void 0),I([O()],Rt.prototype,"templatesGroupQuery",void 0),I([O()],Rt.prototype,"thumbnail",void 0),I([O({readOnly:!0})],Rt.prototype,"thumbnailUrl",null),I([O()],Rt.prototype,"units",void 0),I([O()],Rt.prototype,"url",void 0),I([O()],Rt.prototype,"urlKey",void 0),I([Dt("urlKey")],Rt.prototype,"readUrlKey",null),I([O()],Rt.prototype,"user",void 0),I([Dt("user")],Rt.prototype,"readUser",null),I([O()],Rt.prototype,"use3dBasemaps",void 0),I([O()],Rt.prototype,"useDefault3dBasemap",void 0),I([O()],Rt.prototype,"useStandardizedQuery",void 0),I([O()],Rt.prototype,"useVectorBasemaps",void 0),I([O()],Rt.prototype,"vectorBasemapGalleryGroupQuery",void 0),Rt=bc=I([De("esri.portal.Portal")],Rt);const Bc=Rt,hZ=new FinalizationRegistry(t=>{t.remove()});function Y6e(t){const e=Li;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let ZT=class rce{constructor(){this._emitter=new rce.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,r){var f;let o=(f=this._listenersMap)==null?void 0:f.get(s);if(!o)return!1;const l=this._target||this;let c=!1;for(const y of o.slice()){const _="deref"in y?y.deref():y;_?_==null||_.call(l,r):c=!0}return c&&(o=o.filter(y=>!("deref"in y)||y.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,r){if(Array.isArray(s)){const l=s.map(c=>this.on(c,r));return bm(l)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(r),this._listenersMap.set(s,o),fn(()=>{var f;const l=(f=this._listenersMap)==null?void 0:f.get(s),c=(l==null?void 0:l.indexOf(r))??-1;c>=0&&l.splice(c,1)})}once(s,r){const o=this.on(s,l=>{o.remove();const c="deref"in r?r.deref():r;c==null||c.call(null,l)});return o}hasEventListener(s){var o;const r=(o=this._listenersMap)==null?void 0:o.get(s);return r!=null&&r.length>0}}t.EventEmitter=e,t.EventedMixin=n=>{let s=class extends n{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(r,o){return this._emitter.emit(r,o)}on(r,o){return this._emitter.on(r,o)}once(r,o){return this._emitter.once(r,o)}hasEventListener(r){return this._emitter.hasEventListener(r)}};return s=I([De("esri.core.Evented")],s),s};let i=class extends Ei{constructor(){super(...arguments),this._emitter=new ZT.EventEmitter(this)}destroy(){this._emitter.clear()}emit(n,s){return this._emitter.emit(n,s)}on(n,s){return this._emitter.on(n,s)}once(n,s){return this._emitter.once(n,s)}hasEventListener(n){return this._emitter.hasEventListener(n)}};i=I([De("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(ZT||(ZT={}));const Ia=ZT,dZ=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class jv extends Error{}class X6e extends jv{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class W6e extends jv{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Z6e extends jv{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Bb extends jv{}class oce extends jv{constructor(e){super(`Invalid unit ${e}`)}}class Xa extends jv{}class hg extends jv{constructor(){super("Zone is an abstract class")}}const Bt="numeric",ud="short",qc="long",d6={year:Bt,month:Bt,day:Bt},ace={year:Bt,month:ud,day:Bt},K6e={year:Bt,month:ud,day:Bt,weekday:ud},lce={year:Bt,month:qc,day:Bt},cce={year:Bt,month:qc,day:Bt,weekday:qc},uce={hour:Bt,minute:Bt},hce={hour:Bt,minute:Bt,second:Bt},dce={hour:Bt,minute:Bt,second:Bt,timeZoneName:ud},fce={hour:Bt,minute:Bt,second:Bt,timeZoneName:qc},pce={hour:Bt,minute:Bt,hourCycle:"h23"},mce={hour:Bt,minute:Bt,second:Bt,hourCycle:"h23"},gce={hour:Bt,minute:Bt,second:Bt,hourCycle:"h23",timeZoneName:ud},yce={hour:Bt,minute:Bt,second:Bt,hourCycle:"h23",timeZoneName:qc},vce={year:Bt,month:Bt,day:Bt,hour:Bt,minute:Bt},_ce={year:Bt,month:Bt,day:Bt,hour:Bt,minute:Bt,second:Bt},bce={year:Bt,month:ud,day:Bt,hour:Bt,minute:Bt},xce={year:Bt,month:ud,day:Bt,hour:Bt,minute:Bt,second:Bt},J6e={year:Bt,month:ud,day:Bt,weekday:ud,hour:Bt,minute:Bt},wce={year:Bt,month:qc,day:Bt,hour:Bt,minute:Bt,timeZoneName:ud},Sce={year:Bt,month:qc,day:Bt,hour:Bt,minute:Bt,second:Bt,timeZoneName:ud},Ece={year:Bt,month:qc,day:Bt,weekday:qc,hour:Bt,minute:Bt,timeZoneName:qc},Cce={year:Bt,month:qc,day:Bt,weekday:qc,hour:Bt,minute:Bt,second:Bt,timeZoneName:qc};class xx{get type(){throw new hg}get name(){throw new hg}get ianaName(){return this.name}get isUniversal(){throw new hg}offsetName(e,i){throw new hg}formatOffset(e,i){throw new hg}offset(e){throw new hg}equals(e){throw new hg}get isValid(){throw new hg}}let P8=null;class eA extends xx{static get instance(){return P8===null&&(P8=new eA),P8}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return Oce(e,i,n)}formatOffset(e,i){return BS(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let KT={};function Q6e(t){return KT[t]||(KT[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),KT[t]}const eMe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function tMe(t,e){const i=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,r,o,l,c,f,y]=n;return[o,s,r,l,c,f,y]}function iMe(t,e){const i=t.formatToParts(e),n=[];for(let s=0;s<i.length;s++){const{type:r,value:o}=i[s],l=eMe[r];r==="era"?n[l]=o:Ri(l)||(n[l]=parseInt(o,10))}return n}let g4={};class Hc extends xx{static create(e){return g4[e]||(g4[e]=new Hc(e)),g4[e]}static resetCache(){g4={},KT={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Hc.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return Oce(e,i,n,this.name)}formatOffset(e,i){return BS(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const n=Q6e(this.name);let[s,r,o,l,c,f,y]=n.formatToParts?iMe(n,i):tMe(n,i);l==="BC"&&(s=-Math.abs(s)+1);const x=iA({year:s,month:r,day:o,hour:c===24?0:c,minute:f,second:y,millisecond:0});let S=+i;const P=S%1e3;return S-=P>=0?P:1e3+P,(x-S)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let fZ={};function nMe(t,e={}){const i=JSON.stringify([t,e]);let n=fZ[i];return n||(n=new Intl.ListFormat(t,e),fZ[i]=n),n}let q$={};function V$(t,e={}){const i=JSON.stringify([t,e]);let n=q$[i];return n||(n=new Intl.DateTimeFormat(t,e),q$[i]=n),n}let G$={};function sMe(t,e={}){const i=JSON.stringify([t,e]);let n=G$[i];return n||(n=new Intl.NumberFormat(t,e),G$[i]=n),n}let j$={};function rMe(t,e={}){const{base:i,...n}=e,s=JSON.stringify([t,n]);let r=j$[s];return r||(r=new Intl.RelativeTimeFormat(t,e),j$[s]=r),r}let M3=null;function oMe(){return M3||(M3=new Intl.DateTimeFormat().resolvedOptions().locale,M3)}let pZ={};function aMe(t){let e=pZ[t];if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,pZ[t]=e}return e}function lMe(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let n,s;try{n=V$(t).resolvedOptions(),s=t}catch{const c=t.substring(0,i);n=V$(c).resolvedOptions(),s=c}const{numberingSystem:r,calendar:o}=n;return[s,r,o]}}function cMe(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function uMe(t){const e=[];for(let i=1;i<=12;i++){const n=hi.utc(2009,i,1);e.push(t(n))}return e}function hMe(t){const e=[];for(let i=1;i<=7;i++){const n=hi.utc(2016,11,13+i);e.push(t(n))}return e}function y4(t,e,i,n){const s=t.listingMode();return s==="error"?null:s==="en"?i(e):n(e)}function dMe(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class fMe{constructor(e,i,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:s,floor:r,...o}=n;if(!i||Object.keys(o).length>0){const l={useGrouping:!1,...n};n.padTo>0&&(l.minimumIntegerDigits=n.padTo),this.inf=sMe(e,l)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):zV(e,3);return ao(i,this.padTo)}}}class pMe{constructor(e,i,n){this.opts=n,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Hc.create(l).valid?(s=l,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const r={...this.opts};r.timeZone=r.timeZone||s,this.dtf=V$(i,r)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:n}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class mMe{constructor(e,i,n){this.opts={style:"long",...n},!i&&Dce()&&(this.rtf=rMe(e,n))}format(e,i){return this.rtf?this.rtf.format(e,i):FMe(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const gMe={firstDay:1,minimalDays:4,weekend:[6,7]};class os{static fromOpts(e){return os.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,n,s,r=!1){const o=e||Fr.defaultLocale,l=o||(r?"en-US":oMe()),c=i||Fr.defaultNumberingSystem,f=n||Fr.defaultOutputCalendar,y=B$(s)||Fr.defaultWeekSettings;return new os(l,c,f,y,o)}static resetCache(){M3=null,q$={},G$={},j$={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:n,weekSettings:s}={}){return os.create(e,i,n,s)}constructor(e,i,n,s,r){const[o,l,c]=lMe(e);this.locale=o,this.numberingSystem=i||l||null,this.outputCalendar=n||c||null,this.weekSettings=s,this.intl=cMe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=dMe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:os.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,B$(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return y4(this,e,Lce,()=>{const n=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=uMe(r=>this.extract(r,n,"month"))),this.monthsCache[s][e]})}weekdays(e,i=!1){return y4(this,e,qce,()=>{const n=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=i?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=hMe(r=>this.extract(r,n,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return y4(this,void 0,()=>Vce,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[hi.utc(2016,11,13,9),hi.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return y4(this,e,Gce,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[hi.utc(-40,1,1),hi.utc(2017,1,1)].map(n=>this.extract(n,i,"era"))),this.eraCache[e]})}extract(e,i,n){const s=this.dtFormatter(e,i),r=s.formatToParts(),o=r.find(l=>l.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new fMe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new pMe(e,this.intl,i)}relFormatter(e={}){return new mMe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return nMe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Nce()?aMe(this.locale):gMe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let T8=null;class Xo extends xx{static get utcInstance(){return T8===null&&(T8=new Xo(0)),T8}static instance(e){return e===0?Xo.utcInstance:new Xo(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Xo(nA(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${BS(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${BS(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return BS(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class yMe extends xx{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function e0(t,e){if(Ri(t)||t===null)return e;if(t instanceof xx)return t;if(SMe(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?eA.instance:i==="utc"||i==="gmt"?Xo.utcInstance:Xo.parseSpecifier(i)||Hc.create(t)}else return b0(t)?Xo.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new yMe(t)}const $V={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},mZ={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},vMe=$V.hanidec.replace(/[\[|\]]/g,"").split("");function _Me(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);if(t[i].search($V.hanidec)!==-1)e+=vMe.indexOf(t[i]);else for(const s in mZ){const[r,o]=mZ[s];n>=r&&n<=o&&(e+=n-r)}}return parseInt(e,10)}else return e}let rb={};function bMe(){rb={}}function yh({numberingSystem:t},e=""){const i=t||"latn";return rb[i]||(rb[i]={}),rb[i][e]||(rb[i][e]=new RegExp(`${$V[i]}${e}`)),rb[i][e]}let gZ=()=>Date.now(),yZ="system",vZ=null,_Z=null,bZ=null,xZ=60,wZ,SZ=null;class Fr{static get now(){return gZ}static set now(e){gZ=e}static set defaultZone(e){yZ=e}static get defaultZone(){return e0(yZ,eA.instance)}static get defaultLocale(){return vZ}static set defaultLocale(e){vZ=e}static get defaultNumberingSystem(){return _Z}static set defaultNumberingSystem(e){_Z=e}static get defaultOutputCalendar(){return bZ}static set defaultOutputCalendar(e){bZ=e}static get defaultWeekSettings(){return SZ}static set defaultWeekSettings(e){SZ=B$(e)}static get twoDigitCutoffYear(){return xZ}static set twoDigitCutoffYear(e){xZ=e%100}static get throwOnInvalid(){return wZ}static set throwOnInvalid(e){wZ=e}static resetCaches(){os.resetCache(),Hc.resetCache(),hi.resetCache(),bMe()}}class Kh{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Pce=[0,31,59,90,120,151,181,212,243,273,304,334],Tce=[0,31,60,91,121,152,182,213,244,274,305,335];function zu(t,e){return new Kh("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function RV(t,e,i){const n=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const s=n.getUTCDay();return s===0?7:s}function Ice(t,e,i){return i+(BC(t)?Tce:Pce)[e-1]}function Mce(t,e){const i=BC(t)?Tce:Pce,n=i.findIndex(r=>r<e),s=e-i[n];return{month:n+1,day:s}}function LV(t,e){return(t-e+7)%7+1}function f6(t,e=4,i=1){const{year:n,month:s,day:r}=t,o=Ice(n,s,r),l=LV(RV(n,s,r),i);let c=Math.floor((o-l+14-e)/7),f;return c<1?(f=n-1,c=kE(f,e,i)):c>kE(n,e,i)?(f=n+1,c=1):f=n,{weekYear:f,weekNumber:c,weekday:l,...sA(t)}}function EZ(t,e=4,i=1){const{weekYear:n,weekNumber:s,weekday:r}=t,o=LV(RV(n,1,e),i),l=r2(n);let c=s*7+r-o-7+e,f;c<1?(f=n-1,c+=r2(f)):c>l?(f=n+1,c-=r2(n)):f=n;const{month:y,day:_}=Mce(f,c);return{year:f,month:y,day:_,...sA(t)}}function I8(t){const{year:e,month:i,day:n}=t,s=Ice(e,i,n);return{year:e,ordinal:s,...sA(t)}}function CZ(t){const{year:e,ordinal:i}=t,{month:n,day:s}=Mce(e,i);return{year:e,month:n,day:s,...sA(t)}}function PZ(t,e){if(!Ri(t.localWeekday)||!Ri(t.localWeekNumber)||!Ri(t.localWeekYear)){if(!Ri(t.weekday)||!Ri(t.weekNumber)||!Ri(t.weekYear))throw new Bb("Cannot mix locale-based week fields with ISO-based week fields");return Ri(t.localWeekday)||(t.weekday=t.localWeekday),Ri(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Ri(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function xMe(t,e=4,i=1){const n=tA(t.weekYear),s=qu(t.weekNumber,1,kE(t.weekYear,e,i)),r=qu(t.weekday,1,7);return n?s?r?!1:zu("weekday",t.weekday):zu("week",t.weekNumber):zu("weekYear",t.weekYear)}function wMe(t){const e=tA(t.year),i=qu(t.ordinal,1,r2(t.year));return e?i?!1:zu("ordinal",t.ordinal):zu("year",t.year)}function Ace(t){const e=tA(t.year),i=qu(t.month,1,12),n=qu(t.day,1,p6(t.year,t.month));return e?i?n?!1:zu("day",t.day):zu("month",t.month):zu("year",t.year)}function kce(t){const{hour:e,minute:i,second:n,millisecond:s}=t,r=qu(e,0,23)||e===24&&i===0&&n===0&&s===0,o=qu(i,0,59),l=qu(n,0,59),c=qu(s,0,999);return r?o?l?c?!1:zu("millisecond",s):zu("second",n):zu("minute",i):zu("hour",e)}function Ri(t){return typeof t>"u"}function b0(t){return typeof t=="number"}function tA(t){return typeof t=="number"&&t%1===0}function SMe(t){return typeof t=="string"}function EMe(t){return Object.prototype.toString.call(t)==="[object Date]"}function Dce(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Nce(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function CMe(t){return Array.isArray(t)?t:[t]}function TZ(t,e,i){if(t.length!==0)return t.reduce((n,s)=>{const r=[e(s),s];return n&&i(n[0],r[0])===n[0]?n:r},null)[1]}function PMe(t,e){return e.reduce((i,n)=>(i[n]=t[n],i),{})}function L2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B$(t){if(t==null)return null;if(typeof t!="object")throw new Xa("Week settings must be an object");if(!qu(t.firstDay,1,7)||!qu(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!qu(e,1,7)))throw new Xa("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function qu(t,e,i){return tA(t)&&t>=e&&t<=i}function TMe(t,e){return t-e*Math.floor(t/e)}function ao(t,e=2){const i=t<0;let n;return i?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Hg(t){if(!(Ri(t)||t===null||t===""))return parseInt(t,10)}function N1(t){if(!(Ri(t)||t===null||t===""))return parseFloat(t)}function FV(t){if(!(Ri(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function zV(t,e,i=!1){const n=10**e;return(i?Math.trunc:Math.round)(t*n)/n}function BC(t){return t%4===0&&(t%100!==0||t%400===0)}function r2(t){return BC(t)?366:365}function p6(t,e){const i=TMe(e-1,12)+1,n=t+(e-i)/12;return i===2?BC(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function iA(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function IZ(t,e,i){return-LV(RV(t,1,e),i)+e-1}function kE(t,e=4,i=1){const n=IZ(t,e,i),s=IZ(t+1,e,i);return(r2(t)-n+s)/7}function H$(t){return t>99?t:t>Fr.twoDigitCutoffYear?1900+t:2e3+t}function Oce(t,e,i,n=null){const s=new Date(t),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(r.timeZone=n);const o={timeZoneName:e,...r},l=new Intl.DateTimeFormat(i,o).formatToParts(s).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function nA(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const n=parseInt(e,10)||0,s=i<0||Object.is(i,-0)?-n:n;return i*60+s}function $ce(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Xa(`Invalid unit value ${t}`);return e}function m6(t,e){const i={};for(const n in t)if(L2(t,n)){const s=t[n];if(s==null)continue;i[e(n)]=$ce(s)}return i}function BS(t,e){const i=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${ao(i,2)}:${ao(n,2)}`;case"narrow":return`${s}${i}${n>0?`:${n}`:""}`;case"techie":return`${s}${ao(i,2)}${ao(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function sA(t){return PMe(t,["hour","minute","second","millisecond"])}const IMe=["January","February","March","April","May","June","July","August","September","October","November","December"],Rce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MMe=["J","F","M","A","M","J","J","A","S","O","N","D"];function Lce(t){switch(t){case"narrow":return[...MMe];case"short":return[...Rce];case"long":return[...IMe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Fce=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],zce=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],AMe=["M","T","W","T","F","S","S"];function qce(t){switch(t){case"narrow":return[...AMe];case"short":return[...zce];case"long":return[...Fce];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Vce=["AM","PM"],kMe=["Before Christ","Anno Domini"],DMe=["BC","AD"],NMe=["B","A"];function Gce(t){switch(t){case"narrow":return[...NMe];case"short":return[...DMe];case"long":return[...kMe];default:return null}}function OMe(t){return Vce[t.hour<12?0:1]}function $Me(t,e){return qce(e)[t.weekday-1]}function RMe(t,e){return Lce(e)[t.month-1]}function LMe(t,e){return Gce(e)[t.year<0?0:1]}function FMe(t,e,i="always",n=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&r){const _=t==="days";switch(e){case 1:return _?"tomorrow":`next ${s[t][0]}`;case-1:return _?"yesterday":`last ${s[t][0]}`;case 0:return _?"today":`this ${s[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,f=s[t],y=n?c?f[1]:f[2]||f[1]:c?s[t][0]:t;return o?`${l} ${y} ago`:`in ${l} ${y}`}function MZ(t,e){let i="";for(const n of t)n.literal?i+=n.val:i+=e(n.val);return i}const zMe={D:d6,DD:ace,DDD:lce,DDDD:cce,t:uce,tt:hce,ttt:dce,tttt:fce,T:pce,TT:mce,TTT:gce,TTTT:yce,f:vce,ff:bce,fff:wce,ffff:Ece,F:_ce,FF:xce,FFF:Sce,FFFF:Cce};class Ja{static create(e,i={}){return new Ja(e,i)}static parseFormat(e){let i=null,n="",s=!1;const r=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(n.length>0&&r.push({literal:s||/^\s+$/.test(n),val:n}),i=null,n="",s=!s):s||l===i?n+=l:(n.length>0&&r.push({literal:/^\s+$/.test(n),val:n}),n=l,i=l)}return n.length>0&&r.push({literal:s||/^\s+$/.test(n),val:n}),r}static macroTokenToFormatOpts(e){return zMe[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return ao(e,i);const n={...this.opts};return i>0&&(n.padTo=i),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,i){const n=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(S,P)=>this.loc.extract(e,S,P),o=S=>e.isOffsetFixed&&e.offset===0&&S.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,S.format):"",l=()=>n?OMe(e):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(S,P)=>n?RMe(e,S):r(P?{month:S}:{month:S,day:"numeric"},"month"),f=(S,P)=>n?$Me(e,S):r(P?{weekday:S}:{weekday:S,month:"long",day:"numeric"},"weekday"),y=S=>{const P=Ja.macroTokenToFormatOpts(S);return P?this.formatWithSystemDefault(e,P):S},_=S=>n?LMe(e,S):r({era:S},"era"),x=S=>{switch(S){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return s?r({day:"numeric"},"day"):this.num(e.day);case"dd":return s?r({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return s?r({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?r({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return s?r({month:"numeric"},"month"):this.num(e.month);case"MM":return s?r({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return s?r({year:"numeric"},"year"):this.num(e.year);case"yy":return s?r({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?r({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?r({year:"numeric"},"year"):this.num(e.year,6);case"G":return _("short");case"GG":return _("long");case"GGGGG":return _("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return y(S)}};return MZ(Ja.parseFormat(i),x)}formatDurationFromString(e,i){const n=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=c=>f=>{const y=n(f);return y?this.num(c.get(y),f.length):f},r=Ja.parseFormat(i),o=r.reduce((c,{literal:f,val:y})=>f?c:c.concat(y),[]),l=e.shiftTo(...o.map(n).filter(c=>c));return MZ(r,s(l))}}const jce=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function wx(...t){const e=t.reduce((i,n)=>i+n.source,"");return RegExp(`^${e}$`)}function Sx(...t){return e=>t.reduce(([i,n,s],r)=>{const[o,l,c]=r(e,s);return[{...i,...o},l||n,c]},[{},null,1]).slice(0,2)}function Ex(t,...e){if(t==null)return[null,null];for(const[i,n]of e){const s=i.exec(t);if(s)return n(s)}return[null,null]}function Bce(...t){return(e,i)=>{const n={};let s;for(s=0;s<t.length;s++)n[t[s]]=Hg(e[i+s]);return[n,null,i+s]}}const Hce=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,qMe=`(?:${Hce.source}?(?:\\[(${jce.source})\\])?)?`,qV=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Uce=RegExp(`${qV.source}${qMe}`),VV=RegExp(`(?:T${Uce.source})?`),VMe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,GMe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,jMe=/(\d{4})-?(\d{3})/,BMe=Bce("weekYear","weekNumber","weekDay"),HMe=Bce("year","ordinal"),UMe=/(\d{4})-(\d\d)-(\d\d)/,Yce=RegExp(`${qV.source} ?(?:${Hce.source}|(${jce.source}))?`),YMe=RegExp(`(?: ${Yce.source})?`);function o2(t,e,i){const n=t[e];return Ri(n)?i:Hg(n)}function XMe(t,e){return[{year:o2(t,e),month:o2(t,e+1,1),day:o2(t,e+2,1)},null,e+3]}function Cx(t,e){return[{hours:o2(t,e,0),minutes:o2(t,e+1,0),seconds:o2(t,e+2,0),milliseconds:FV(t[e+3])},null,e+4]}function HC(t,e){const i=!t[e]&&!t[e+1],n=nA(t[e+1],t[e+2]),s=i?null:Xo.instance(n);return[{},s,e+3]}function UC(t,e){const i=t[e]?Hc.create(t[e]):null;return[{},i,e+1]}const WMe=RegExp(`^T?${qV.source}$`),ZMe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function KMe(t){const[e,i,n,s,r,o,l,c,f]=t,y=e[0]==="-",_=c&&c[0]==="-",x=(S,P=!1)=>S!==void 0&&(P||S&&y)?-S:S;return[{years:x(N1(i)),months:x(N1(n)),weeks:x(N1(s)),days:x(N1(r)),hours:x(N1(o)),minutes:x(N1(l)),seconds:x(N1(c),c==="-0"),milliseconds:x(FV(f),_)}]}const JMe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function GV(t,e,i,n,s,r,o){const l={year:e.length===2?H$(Hg(e)):Hg(e),month:Rce.indexOf(i)+1,day:Hg(n),hour:Hg(s),minute:Hg(r)};return o&&(l.second=Hg(o)),t&&(l.weekday=t.length>3?Fce.indexOf(t)+1:zce.indexOf(t)+1),l}const QMe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function eAe(t){const[,e,i,n,s,r,o,l,c,f,y,_]=t,x=GV(e,s,n,i,r,o,l);let S;return c?S=JMe[c]:f?S=0:S=nA(y,_),[x,new Xo(S)]}function tAe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const iAe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,nAe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,sAe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function AZ(t){const[,e,i,n,s,r,o,l]=t;return[GV(e,s,n,i,r,o,l),Xo.utcInstance]}function rAe(t){const[,e,i,n,s,r,o,l]=t;return[GV(e,l,i,n,s,r,o),Xo.utcInstance]}const oAe=wx(VMe,VV),aAe=wx(GMe,VV),lAe=wx(jMe,VV),cAe=wx(Uce),Xce=Sx(XMe,Cx,HC,UC),uAe=Sx(BMe,Cx,HC,UC),hAe=Sx(HMe,Cx,HC,UC),dAe=Sx(Cx,HC,UC);function fAe(t){return Ex(t,[oAe,Xce],[aAe,uAe],[lAe,hAe],[cAe,dAe])}function pAe(t){return Ex(tAe(t),[QMe,eAe])}function mAe(t){return Ex(t,[iAe,AZ],[nAe,AZ],[sAe,rAe])}function gAe(t){return Ex(t,[ZMe,KMe])}const yAe=Sx(Cx);function vAe(t){return Ex(t,[WMe,yAe])}const _Ae=wx(UMe,YMe),bAe=wx(Yce),xAe=Sx(Cx,HC,UC);function wAe(t){return Ex(t,[_Ae,Xce],[bAe,xAe])}const kZ="Invalid Duration",Wce={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},SAe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Wce},du=146097/400,L_=146097/4800,EAe={years:{quarters:4,months:12,weeks:du/7,days:du,hours:du*24,minutes:du*24*60,seconds:du*24*60*60,milliseconds:du*24*60*60*1e3},quarters:{months:3,weeks:du/28,days:du/4,hours:du*24/4,minutes:du*24*60/4,seconds:du*24*60*60/4,milliseconds:du*24*60*60*1e3/4},months:{weeks:L_/7,days:L_,hours:L_*24,minutes:L_*24*60,seconds:L_*24*60*60,milliseconds:L_*24*60*60*1e3},...Wce},Ry=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],CAe=Ry.slice(0).reverse();function dg(t,e,i=!1){const n={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Nn(n)}function Zce(t,e){let i=e.milliseconds??0;for(const n of CAe.slice(1))e[n]&&(i+=e[n]*t[n].milliseconds);return i}function DZ(t,e){const i=Zce(t,e)<0?-1:1;Ry.reduceRight((n,s)=>{if(Ri(e[s]))return n;if(n){const r=e[n]*i,o=t[s][n],l=Math.floor(r/o);e[s]+=l*i,e[n]-=l*o*i}return s},null),Ry.reduce((n,s)=>{if(Ri(e[s]))return n;if(n){const r=e[n]%1;e[n]-=r,e[s]+=r*t[n][s]}return s},null)}function PAe(t){const e={};for(const[i,n]of Object.entries(t))n!==0&&(e[i]=n);return e}class Nn{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let n=i?EAe:SAe;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||os.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,i){return Nn.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Xa(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Nn({values:m6(e,Nn.normalizeUnit),loc:os.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(b0(e))return Nn.fromMillis(e);if(Nn.isDuration(e))return e;if(typeof e=="object")return Nn.fromObject(e);throw new Xa(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[n]=gAe(e);return n?Nn.fromObject(n,i):Nn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[n]=vAe(e);return n?Nn.fromObject(n,i):Nn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Xa("need to specify a reason the Duration is invalid");const n=e instanceof Kh?e:new Kh(e,i);if(Fr.throwOnInvalid)throw new Z6e(n);return new Nn({invalid:n})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new oce(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const n={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Ja.create(this.loc,n).formatDurationFromString(this,e):kZ}toHuman(e={}){if(!this.isValid)return kZ;const i=Ry.map(n=>{const s=this.values[n];return Ri(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=zV(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},hi.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Zce(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Nn.fromDurationLike(e),n={};for(const s of Ry)(L2(i.values,s)||L2(this.values,s))&&(n[s]=i.get(s)+this.get(s));return dg(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const i=Nn.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const n of Object.keys(this.values))i[n]=$ce(e(this.values[n],n));return dg(this,{values:i},!0)}get(e){return this[Nn.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...m6(e,Nn.normalizeUnit)};return dg(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:n,matrix:s}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:s,conversionAccuracy:n};return dg(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return DZ(this.matrix,e),dg(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=PAe(this.normalize().shiftToAll().toObject());return dg(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Nn.normalizeUnit(o));const i={},n={},s=this.toObject();let r;for(const o of Ry)if(e.indexOf(o)>=0){r=o;let l=0;for(const f in n)l+=this.matrix[f][o]*n[f],n[f]=0;b0(s[o])&&(l+=s[o]);const c=Math.trunc(l);i[o]=c,n[o]=(l*1e3-c*1e3)/1e3}else b0(s[o])&&(n[o]=s[o]);for(const o in n)n[o]!==0&&(i[r]+=o===r?n[o]:n[o]/this.matrix[r][o]);return DZ(this.matrix,i),dg(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return dg(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(n,s){return n===void 0||n===0?s===void 0||s===0:n===s}for(const n of Ry)if(!i(this.values[n],e.values[n]))return!1;return!0}}const F_="Invalid Interval";function TAe(t,e){return!t||!t.isValid?Lr.invalid("missing or invalid start"):!e||!e.isValid?Lr.invalid("missing or invalid end"):e<t?Lr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Lr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Xa("need to specify a reason the Interval is invalid");const n=e instanceof Kh?e:new Kh(e,i);if(Fr.throwOnInvalid)throw new W6e(n);return new Lr({invalid:n})}static fromDateTimes(e,i){const n=Qw(e),s=Qw(i),r=TAe(n,s);return r??new Lr({start:n,end:s})}static after(e,i){const n=Nn.fromDurationLike(i),s=Qw(e);return Lr.fromDateTimes(s,s.plus(n))}static before(e,i){const n=Nn.fromDurationLike(i),s=Qw(e);return Lr.fromDateTimes(s.minus(n),s)}static fromISO(e,i){const[n,s]=(e||"").split("/",2);if(n&&s){let r,o;try{r=hi.fromISO(n,i),o=r.isValid}catch{o=!1}let l,c;try{l=hi.fromISO(s,i),c=l.isValid}catch{c=!1}if(o&&c)return Lr.fromDateTimes(r,l);if(o){const f=Nn.fromISO(s,i);if(f.isValid)return Lr.after(r,f)}else if(c){const f=Nn.fromISO(n,i);if(f.isValid)return Lr.before(l,f)}}return Lr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const n=this.start.startOf(e,i);let s;return i!=null&&i.useLocaleWeeks?s=this.end.reconfigure({locale:n.locale}):s=this.end,s=s.startOf(e,i),Math.floor(s.diff(n,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Lr.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(Qw).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),n=[];let{s}=this,r=0;for(;s<this.e;){const o=i[r]||this.e,l=+o>+this.e?this.e:o;n.push(Lr.fromDateTimes(s,l)),s=l,r+=1}return n}splitBy(e){const i=Nn.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:n}=this,s=1,r;const o=[];for(;n<this.e;){const l=this.start.plus(i.mapUnits(c=>c*s));r=+l>+this.e?this.e:l,o.push(Lr.fromDateTimes(n,r)),n=r,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return i>=n?null:Lr.fromDateTimes(i,n)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Lr.fromDateTimes(i,n)}static merge(e){const[i,n]=e.sort((s,r)=>s.s-r.s).reduce(([s,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[s,r.union(o)]:[s.concat([r]),o]:[s,o],[[],null]);return n&&i.push(n),i}static xor(e){let i=null,n=0;const s=[],r=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...r),l=o.sort((c,f)=>c.time-f.time);for(const c of l)n+=c.type==="s"?1:-1,n===1?i=c.time:(i&&+i!=+c.time&&s.push(Lr.fromDateTimes(i,c.time)),i=null);return Lr.merge(s)}difference(...e){return Lr.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:F_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=d6,i={}){return this.isValid?Ja.create(this.s.loc.clone(i),e).formatInterval(this):F_}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:F_}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:F_}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:F_}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:F_}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Nn.invalid(this.invalidReason)}mapEndpoints(e){return Lr.fromDateTimes(e(this.s),e(this.e))}}class v4{static hasDST(e=Fr.defaultZone){const i=hi.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Hc.isValidZone(e)}static normalizeZone(e){return e0(e,Fr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||os.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||os.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||os.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||os.create(i,n,r)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||os.create(i,n,r)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null}={}){return(s||os.create(i,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:s=null}={}){return(s||os.create(i,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return os.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return os.create(i,null,"gregory").eras(e)}static features(){return{relative:Dce(),localeWeek:Nce()}}}function NZ(t,e){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=i(e)-i(t);return Math.floor(Nn.fromMillis(n).as("days"))}function IAe(t,e,i){const n=[["years",(c,f)=>f.year-c.year],["quarters",(c,f)=>f.quarter-c.quarter+(f.year-c.year)*4],["months",(c,f)=>f.month-c.month+(f.year-c.year)*12],["weeks",(c,f)=>{const y=NZ(c,f);return(y-y%7)/7}],["days",NZ]],s={},r=t;let o,l;for(const[c,f]of n)i.indexOf(c)>=0&&(o=c,s[c]=f(t,e),l=r.plus(s),l>e?(s[c]--,t=r.plus(s),t>e&&(l=t,s[c]--,t=r.plus(s))):t=l);return[t,s,l,o]}function MAe(t,e,i,n){let[s,r,o,l]=IAe(t,e,i);const c=e-s,f=i.filter(_=>["hours","minutes","seconds","milliseconds"].indexOf(_)>=0);f.length===0&&(o<e&&(o=s.plus({[l]:1})),o!==s&&(r[l]=(r[l]||0)+c/(o-s)));const y=Nn.fromObject(r,n);return f.length>0?Nn.fromMillis(c,n).shiftTo(...f).plus(y):y}const AAe="missing Intl.DateTimeFormat.formatToParts support";function Zn(t,e=i=>i){return{regex:t,deser:([i])=>e(_Me(i))}}const kAe=" ",Kce=`[ ${kAe}]`,Jce=new RegExp(Kce,"g");function DAe(t){return t.replace(/\./g,"\\.?").replace(Jce,Kce)}function OZ(t){return t.replace(/\./g,"").replace(Jce," ").toLowerCase()}function vh(t,e){return t===null?null:{regex:RegExp(t.map(DAe).join("|")),deser:([i])=>t.findIndex(n=>OZ(i)===OZ(n))+e}}function $Z(t,e){return{regex:t,deser:([,i,n])=>nA(i,n),groups:e}}function _4(t){return{regex:t,deser:([e])=>e}}function NAe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function OAe(t,e){const i=yh(e),n=yh(e,"{2}"),s=yh(e,"{3}"),r=yh(e,"{4}"),o=yh(e,"{6}"),l=yh(e,"{1,2}"),c=yh(e,"{1,3}"),f=yh(e,"{1,6}"),y=yh(e,"{1,9}"),_=yh(e,"{2,4}"),x=yh(e,"{4,6}"),S=D=>({regex:RegExp(NAe(D.val)),deser:([N])=>N,literal:!0}),A=(D=>{if(t.literal)return S(D);switch(D.val){case"G":return vh(e.eras("short"),0);case"GG":return vh(e.eras("long"),0);case"y":return Zn(f);case"yy":return Zn(_,H$);case"yyyy":return Zn(r);case"yyyyy":return Zn(x);case"yyyyyy":return Zn(o);case"M":return Zn(l);case"MM":return Zn(n);case"MMM":return vh(e.months("short",!0),1);case"MMMM":return vh(e.months("long",!0),1);case"L":return Zn(l);case"LL":return Zn(n);case"LLL":return vh(e.months("short",!1),1);case"LLLL":return vh(e.months("long",!1),1);case"d":return Zn(l);case"dd":return Zn(n);case"o":return Zn(c);case"ooo":return Zn(s);case"HH":return Zn(n);case"H":return Zn(l);case"hh":return Zn(n);case"h":return Zn(l);case"mm":return Zn(n);case"m":return Zn(l);case"q":return Zn(l);case"qq":return Zn(n);case"s":return Zn(l);case"ss":return Zn(n);case"S":return Zn(c);case"SSS":return Zn(s);case"u":return _4(y);case"uu":return _4(l);case"uuu":return Zn(i);case"a":return vh(e.meridiems(),0);case"kkkk":return Zn(r);case"kk":return Zn(_,H$);case"W":return Zn(l);case"WW":return Zn(n);case"E":case"c":return Zn(i);case"EEE":return vh(e.weekdays("short",!1),1);case"EEEE":return vh(e.weekdays("long",!1),1);case"ccc":return vh(e.weekdays("short",!0),1);case"cccc":return vh(e.weekdays("long",!0),1);case"Z":case"ZZ":return $Z(new RegExp(`([+-]${l.source})(?::(${n.source}))?`),2);case"ZZZ":return $Z(new RegExp(`([+-]${l.source})(${n.source})?`),2);case"z":return _4(/[a-z_+-/]{1,256}?/i);case" ":return _4(/[^\S\n\r]/);default:return S(D)}})(t)||{invalidReason:AAe};return A.token=t,A}const $Ae={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function RAe(t,e,i){const{type:n,value:s}=t;if(n==="literal"){const c=/^\s+$/.test(s);return{literal:!c,val:c?" ":s}}const r=e[n];let o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let l=$Ae[o];if(typeof l=="object"&&(l=l[r]),l)return{literal:!1,val:l}}function LAe(t){return[`^${t.map(i=>i.regex).reduce((i,n)=>`${i}(${n.source})`,"")}$`,t]}function FAe(t,e,i){const n=t.match(e);if(n){const s={};let r=1;for(const o in i)if(L2(i,o)){const l=i[o],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(s[l.token.val[0]]=l.deser(n.slice(r,r+c))),r+=c}return[n,s]}else return[n,{}]}function zAe(t){const e=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,n;return Ri(t.z)||(i=Hc.create(t.z)),Ri(t.Z)||(i||(i=new Xo(t.Z)),n=t.Z),Ri(t.q)||(t.M=(t.q-1)*3+1),Ri(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Ri(t.u)||(t.S=FV(t.u)),[Object.keys(t).reduce((r,o)=>{const l=e(o);return l&&(r[l]=t[o]),r},{}),i,n]}let M8=null;function qAe(){return M8||(M8=hi.fromMillis(1555555555555)),M8}function VAe(t,e){if(t.literal)return t;const i=Ja.macroTokenToFormatOpts(t.val),n=iue(i,e);return n==null||n.includes(void 0)?t:n}function Qce(t,e){return Array.prototype.concat(...t.map(i=>VAe(i,e)))}class eue{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=Qce(Ja.parseFormat(i),e),this.units=this.tokens.map(n=>OAe(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,s]=LAe(this.units);this.regex=RegExp(n,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[i,n]=FAe(e,this.regex,this.handlers),[s,r,o]=n?zAe(n):[null,null,void 0];if(L2(n,"a")&&L2(n,"H"))throw new Bb("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:n,result:s,zone:r,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function tue(t,e,i){return new eue(t,i).explainFromTokens(e)}function GAe(t,e,i){const{result:n,zone:s,specificOffset:r,invalidReason:o}=tue(t,e,i);return[n,s,r,o]}function iue(t,e){if(!t)return null;const n=Ja.create(e,t).dtFormatter(qAe()),s=n.formatToParts(),r=n.resolvedOptions();return s.map(o=>RAe(o,t,r))}const A8="Invalid DateTime",jAe=864e13;function A3(t){return new Kh("unsupported zone",`the zone "${t.name}" is not supported`)}function k8(t){return t.weekData===null&&(t.weekData=f6(t.c)),t.weekData}function D8(t){return t.localWeekData===null&&(t.localWeekData=f6(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function O1(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new hi({...i,...e,old:i})}function nue(t,e,i){let n=t-e*60*1e3;const s=i.offset(n);if(e===s)return[n,e];n-=(s-e)*60*1e3;const r=i.offset(n);return s===r?[n,s]:[t-Math.min(s,r)*60*1e3,Math.max(s,r)]}function b4(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function JT(t,e,i){return nue(iA(t),e,i)}function RZ(t,e){const i=t.o,n=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,r={...t.c,year:n,month:s,day:Math.min(t.c.day,p6(n,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Nn.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=iA(r);let[c,f]=nue(l,i,t.zone);return o!==0&&(c+=o,f=t.zone.offset(c)),{ts:c,o:f}}function z_(t,e,i,n,s,r){const{setZone:o,zone:l}=i;if(t&&Object.keys(t).length!==0||e){const c=e||l,f=hi.fromObject(t,{...i,zone:c,specificOffset:r});return o?f:f.setZone(l)}else return hi.invalid(new Kh("unparsable",`the input "${s}" can't be parsed as ${n}`))}function x4(t,e,i=!0){return t.isValid?Ja.create(os.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function N8(t,e){const i=t.c.year>9999||t.c.year<0;let n="";return i&&t.c.year>=0&&(n+="+"),n+=ao(t.c.year,i?6:4),e?(n+="-",n+=ao(t.c.month),n+="-",n+=ao(t.c.day)):(n+=ao(t.c.month),n+=ao(t.c.day)),n}function LZ(t,e,i,n,s,r){let o=ao(t.c.hour);return e?(o+=":",o+=ao(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=ao(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=ao(t.c.second),(t.c.millisecond!==0||!n)&&(o+=".",o+=ao(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!r?o+="Z":t.o<0?(o+="-",o+=ao(Math.trunc(-t.o/60)),o+=":",o+=ao(Math.trunc(-t.o%60))):(o+="+",o+=ao(Math.trunc(t.o/60)),o+=":",o+=ao(Math.trunc(t.o%60)))),r&&(o+="["+t.zone.ianaName+"]"),o}const sue={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},BAe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},HAe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},rue=["year","month","day","hour","minute","second","millisecond"],UAe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],YAe=["year","ordinal","hour","minute","second","millisecond"];function XAe(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new oce(t);return e}function FZ(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return XAe(t)}}function WAe(t){return eI[t]||(QT===void 0&&(QT=Fr.now()),eI[t]=t.offset(QT)),eI[t]}function zZ(t,e){const i=e0(e.zone,Fr.defaultZone);if(!i.isValid)return hi.invalid(A3(i));const n=os.fromObject(e);let s,r;if(Ri(t.year))s=Fr.now();else{for(const c of rue)Ri(t[c])&&(t[c]=sue[c]);const o=Ace(t)||kce(t);if(o)return hi.invalid(o);const l=WAe(i);[s,r]=JT(t,l,i)}return new hi({ts:s,zone:i,loc:n,o:r})}function qZ(t,e,i){const n=Ri(i.round)?!0:i.round,s=(o,l)=>(o=zV(o,n||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,l)),r=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return s(r(i.unit),i.unit);for(const o of i.units){const l=r(o);if(Math.abs(l)>=1)return s(l,o)}return s(t>e?-0:0,i.units[i.units.length-1])}function VZ(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let QT,eI={};class hi{constructor(e){const i=e.zone||Fr.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new Kh("invalid input"):null)||(i.isValid?null:A3(i));this.ts=Ri(e.ts)?Fr.now():e.ts;let s=null,r=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[s,r]=[e.old.c,e.old.o];else{const l=b0(e.o)&&!e.old?e.o:i.offset(this.ts);s=b4(this.ts,l),n=Number.isNaN(s.year)?new Kh("invalid input"):null,s=n?null:s,r=n?null:l}this._zone=i,this.loc=e.loc||os.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=s,this.o=r,this.isLuxonDateTime=!0}static now(){return new hi({})}static local(){const[e,i]=VZ(arguments),[n,s,r,o,l,c,f]=i;return zZ({year:n,month:s,day:r,hour:o,minute:l,second:c,millisecond:f},e)}static utc(){const[e,i]=VZ(arguments),[n,s,r,o,l,c,f]=i;return e.zone=Xo.utcInstance,zZ({year:n,month:s,day:r,hour:o,minute:l,second:c,millisecond:f},e)}static fromJSDate(e,i={}){const n=EMe(e)?e.valueOf():NaN;if(Number.isNaN(n))return hi.invalid("invalid input");const s=e0(i.zone,Fr.defaultZone);return s.isValid?new hi({ts:n,zone:s,loc:os.fromObject(i)}):hi.invalid(A3(s))}static fromMillis(e,i={}){if(b0(e))return e<-864e13||e>jAe?hi.invalid("Timestamp out of range"):new hi({ts:e,zone:e0(i.zone,Fr.defaultZone),loc:os.fromObject(i)});throw new Xa(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(b0(e))return new hi({ts:e*1e3,zone:e0(i.zone,Fr.defaultZone),loc:os.fromObject(i)});throw new Xa("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const n=e0(i.zone,Fr.defaultZone);if(!n.isValid)return hi.invalid(A3(n));const s=os.fromObject(i),r=m6(e,FZ),{minDaysInFirstWeek:o,startOfWeek:l}=PZ(r,s),c=Fr.now(),f=Ri(i.specificOffset)?n.offset(c):i.specificOffset,y=!Ri(r.ordinal),_=!Ri(r.year),x=!Ri(r.month)||!Ri(r.day),S=_||x,P=r.weekYear||r.weekNumber;if((S||y)&&P)throw new Bb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&y)throw new Bb("Can't mix ordinal dates with month/day");const A=P||r.weekday&&!S;let D,N,F=b4(c,f);A?(D=UAe,N=BAe,F=f6(F,o,l)):y?(D=YAe,N=HAe,F=I8(F)):(D=rue,N=sue);let G=!1;for(const oe of D){const pe=r[oe];Ri(pe)?G?r[oe]=N[oe]:r[oe]=F[oe]:G=!0}const V=A?xMe(r,o,l):y?wMe(r):Ace(r),B=V||kce(r);if(B)return hi.invalid(B);const W=A?EZ(r,o,l):y?CZ(r):r,[J,re]=JT(W,f,n),ne=new hi({ts:J,zone:n,o:re,loc:s});return r.weekday&&S&&e.weekday!==ne.weekday?hi.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${ne.toISO()}`):ne.isValid?ne:hi.invalid(ne.invalid)}static fromISO(e,i={}){const[n,s]=fAe(e);return z_(n,s,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[n,s]=pAe(e);return z_(n,s,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[n,s]=mAe(e);return z_(n,s,i,"HTTP",i)}static fromFormat(e,i,n={}){if(Ri(e)||Ri(i))throw new Xa("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:r=null}=n,o=os.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0}),[l,c,f,y]=GAe(o,e,i);return y?hi.invalid(y):z_(l,c,n,`format ${i}`,e,f)}static fromString(e,i,n={}){return hi.fromFormat(e,i,n)}static fromSQL(e,i={}){const[n,s]=wAe(e);return z_(n,s,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Xa("need to specify a reason the DateTime is invalid");const n=e instanceof Kh?e:new Kh(e,i);if(Fr.throwOnInvalid)throw new X6e(n);return new hi({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const n=iue(e,os.fromObject(i));return n?n.map(s=>s?s.val:null).join(""):null}static expandFormat(e,i={}){return Qce(Ja.parseFormat(e),os.fromObject(i)).map(s=>s.val).join("")}static resetCache(){QT=void 0,eI={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?k8(this).weekYear:NaN}get weekNumber(){return this.isValid?k8(this).weekNumber:NaN}get weekday(){return this.isValid?k8(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?D8(this).weekday:NaN}get localWeekNumber(){return this.isValid?D8(this).weekNumber:NaN}get localWeekYear(){return this.isValid?D8(this).weekYear:NaN}get ordinal(){return this.isValid?I8(this.c).ordinal:NaN}get monthShort(){return this.isValid?v4.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?v4.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?v4.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?v4.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,n=iA(this.c),s=this.zone.offset(n-e),r=this.zone.offset(n+e),o=this.zone.offset(n-s*i),l=this.zone.offset(n-r*i);if(o===l)return[this];const c=n-o*i,f=n-l*i,y=b4(c,o),_=b4(f,l);return y.hour===_.hour&&y.minute===_.minute&&y.second===_.second&&y.millisecond===_.millisecond?[O1(this,{ts:c}),O1(this,{ts:f})]:[this]}get isInLeapYear(){return BC(this.year)}get daysInMonth(){return p6(this.year,this.month)}get daysInYear(){return this.isValid?r2(this.year):NaN}get weeksInWeekYear(){return this.isValid?kE(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?kE(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:n,calendar:s}=Ja.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:n,outputCalendar:s}}toUTC(e=0,i={}){return this.setZone(Xo.instance(e),i)}toLocal(){return this.setZone(Fr.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:n=!1}={}){if(e=e0(e,Fr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(i||n){const r=e.offset(this.ts),o=this.toObject();[s]=JT(o,r,e)}return O1(this,{ts:s,zone:e})}else return hi.invalid(A3(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:n}={}){const s=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:n});return O1(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=m6(e,FZ),{minDaysInFirstWeek:n,startOfWeek:s}=PZ(i,this.loc),r=!Ri(i.weekYear)||!Ri(i.weekNumber)||!Ri(i.weekday),o=!Ri(i.ordinal),l=!Ri(i.year),c=!Ri(i.month)||!Ri(i.day),f=l||c,y=i.weekYear||i.weekNumber;if((f||o)&&y)throw new Bb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Bb("Can't mix ordinal dates with month/day");let _;r?_=EZ({...f6(this.c,n,s),...i},n,s):Ri(i.ordinal)?(_={...this.toObject(),...i},Ri(i.day)&&(_.day=Math.min(p6(_.year,_.month),_.day))):_=CZ({...I8(this.c),...i});const[x,S]=JT(_,this.o,this.zone);return O1(this,{ts:x,o:S})}plus(e){if(!this.isValid)return this;const i=Nn.fromDurationLike(e);return O1(this,RZ(this,i))}minus(e){if(!this.isValid)return this;const i=Nn.fromDurationLike(e).negate();return O1(this,RZ(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const n={},s=Nn.normalizeUnit(e);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(s==="weeks")if(i){const r=this.loc.getStartOfWeek(),{weekday:o}=this;o<r&&(n.weekNumber=this.weekNumber-1),n.weekday=r}else n.weekday=1;if(s==="quarters"){const r=Math.ceil(this.month/3);n.month=(r-1)*3+1}return this.set(n)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Ja.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):A8}toLocaleString(e=d6,i={}){return this.isValid?Ja.create(this.loc.clone(i),e).formatDateTime(this):A8}toLocaleParts(e={}){return this.isValid?Ja.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=N8(this,o);return l+="T",l+=LZ(this,o,i,n,s,r),l}toISODate({format:e="extended"}={}){return this.isValid?N8(this,e==="extended"):null}toISOWeekDate(){return x4(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+LZ(this,o==="extended",i,e,n,r):null}toRFC2822(){return x4(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return x4(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?N8(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(i||e)&&(n&&(s+=" "),i?s+="z":e&&(s+="ZZ")),x4(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():A8}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",n={}){if(!this.isValid||!e.isValid)return Nn.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...n},r=CMe(i).map(Nn.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,c=o?e:this,f=MAe(l,c,r,s);return o?f.negate():f}diffNow(e="milliseconds",i={}){return this.diff(hi.now(),e,i)}until(e){return this.isValid?Lr.fromDateTimes(this,e):this}hasSame(e,i,n){if(!this.isValid)return!1;const s=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(i,n)<=s&&s<=r.endOf(i,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||hi.fromObject({},{zone:this.zone}),n=e.padding?this<i?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],r=e.unit;return Array.isArray(e.unit)&&(s=e.unit,r=void 0),qZ(i,this.plus(n),{...e,numeric:"always",units:s,unit:r})}toRelativeCalendar(e={}){return this.isValid?qZ(e.base||hi.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(hi.isDateTime))throw new Xa("min requires all arguments be DateTimes");return TZ(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(hi.isDateTime))throw new Xa("max requires all arguments be DateTimes");return TZ(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,n={}){const{locale:s=null,numberingSystem:r=null}=n,o=os.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0});return tue(o,e,i)}static fromStringExplain(e,i,n={}){return hi.fromFormatExplain(e,i,n)}static buildFormatParser(e,i={}){const{locale:n=null,numberingSystem:s=null}=i,r=os.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return new eue(r,e)}static fromFormatParser(e,i,n={}){if(Ri(e)||Ri(i))throw new Xa("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:r=null}=n,o=os.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0});if(!o.equals(i.locale))throw new Xa(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:l,zone:c,specificOffset:f,invalidReason:y}=i.explainFromTokens(e);return y?hi.invalid(y):z_(l,c,n,`format ${i.format}`,e,f)}static get DATE_SHORT(){return d6}static get DATE_MED(){return ace}static get DATE_MED_WITH_WEEKDAY(){return K6e}static get DATE_FULL(){return lce}static get DATE_HUGE(){return cce}static get TIME_SIMPLE(){return uce}static get TIME_WITH_SECONDS(){return hce}static get TIME_WITH_SHORT_OFFSET(){return dce}static get TIME_WITH_LONG_OFFSET(){return fce}static get TIME_24_SIMPLE(){return pce}static get TIME_24_WITH_SECONDS(){return mce}static get TIME_24_WITH_SHORT_OFFSET(){return gce}static get TIME_24_WITH_LONG_OFFSET(){return yce}static get DATETIME_SHORT(){return vce}static get DATETIME_SHORT_WITH_SECONDS(){return _ce}static get DATETIME_MED(){return bce}static get DATETIME_MED_WITH_SECONDS(){return xce}static get DATETIME_MED_WITH_WEEKDAY(){return J6e}static get DATETIME_FULL(){return wce}static get DATETIME_FULL_WITH_SECONDS(){return Sce}static get DATETIME_HUGE(){return Ece}static get DATETIME_HUGE_WITH_SECONDS(){return Cce}}function Qw(t){if(hi.isDateTime(t))return t;if(t&&t.valueOf&&b0(t.valueOf()))return hi.fromJSDate(t);if(t&&typeof t=="object")return hi.fromObject(t);throw new Xa(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const rm="system",mv="unknown",Sf="UTC",ZAe=Intl.DateTimeFormat().resolvedOptions().timeZone,KAe="shortOffset";function JAe(t){return"timeZoneIANA"in t}function QAe(t){return t.startsWith("UTC")}function g6(t,e=!1){return{json:{read:{source:t,reader:(i,n)=>n[t]?tI(n[t]):null},write:!!e&&{allowNull:!0,writer(i,n){n[t]=i?e7e(i):null}}}}}function tI(t,e=rm){return t?JAe(t)?t.timeZoneIANA:t7e(t,e):e}function e7e(t){return{timeZoneIANA:t}}function t7e(t,e=rm){if(!t||!dZ.has(t.timeZone))return e;const i=dZ.get(t.timeZone);return QAe(t.timeZone)||t.respectsDaylightSaving?i:i7e(i)}function i7e(t){const e=hi.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Xo.instance(-i).formatOffset(0,"narrow")}`}function Ydt(t,e,i,n,s){if(e&&s==="date")return{timeZone:Sf,timeZoneName:void 0};const r=n.timeStyle||n.hour,o=i===mv;return{timeZone:o?s==="timestamp-offset"?void 0:t??Sf:i,timeZoneName:o&&r?KAe:void 0}}function Xdt(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(n=>n.toLowerCase()));return t===rm||t===mv||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const n7e={year:void 0,month:void 0,day:void 0,weekday:void 0},s7e={hour:void 0,minute:void 0,second:void 0},oue={timeZone:Sf},Dd={year:"numeric",month:"numeric",day:"numeric"},e3={year:"numeric",month:"long",day:"numeric"},t3={year:"numeric",month:"short",day:"numeric"},i3={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ug={hour:"numeric",minute:"numeric"},B1={...Ug,second:"numeric"},aue={hourCycle:"h23"},n3={...Ug,...aue},s3={...B1,...aue},lue={"short-date":Dd,"short-date-short-time":{...Dd,...Ug},"short-date-short-time-24":{...Dd,...n3},"short-date-long-time":{...Dd,...B1},"short-date-long-time-24":{...Dd,...s3},"short-date-le":Dd,"short-date-le-short-time":{...Dd,...Ug},"short-date-le-short-time-24":{...Dd,...n3},"short-date-le-long-time":{...Dd,...B1},"short-date-le-long-time-24":{...Dd,...s3},"long-month-day-year":e3,"long-month-day-year-short-time":{...e3,...Ug},"long-month-day-year-short-time-24":{...e3,...n3},"long-month-day-year-long-time":{...e3,...B1},"long-month-day-year-long-time-24":{...e3,...s3},"day-short-month-year":t3,"day-short-month-year-short-time":{...t3,...Ug},"day-short-month-year-short-time-24":{...t3,...n3},"day-short-month-year-long-time":{...t3,...B1},"day-short-month-year-long-time-24":{...t3,...s3},"long-date":i3,"long-date-short-time":{...i3,...Ug},"long-date-short-time-24":{...i3,...n3},"long-date-long-time":{...i3,...B1},"long-date-long-time-24":{...i3,...s3},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ug,"long-time":B1},r7e=Ta()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),cue={ar:"ar-u-nu-latn-ca-gregory"};let U$=new WeakMap;const rA=lue["short-date-short-time"];function o7e(t){let e=U$.get(t);if(!e){const i=zc(),n=cue[i]||i,s=jV(t.timeZone??rm),r={...t,timeZone:s};e=new Intl.DateTimeFormat(n,r),U$.set(t,e)}return e}function w4(t){return lue[t]}function k0(t,e=rA){return o7e(e).format(t)}function a7e(t,e=rA){return k0(new Date(t),{...e,...oue,...s7e})}function l7e(t,e=rA){return k0(new Date(`1970-01-01T${t}Z`),{...e,...oue,...n7e})}function c7e(t,e=rA){if(e.timeZone)return k0(new Date(t),e);const i=hi.fromISO(t,{setZone:!0}),n=zc(),s=cue[n]??n,r=i.offset===0?Sf:e.timeZone,o={...e,timeZone:r};return i.toLocaleString(o,{locale:s})}function jV(t){switch(t){case rm:return ZAe;case mv:return Sf;default:return t}}NV(()=>{U$=new WeakMap});const u7e={ar:"ar-u-nu-latn"};let iI=new WeakMap,uue={};function Y$(t){const e=t||uue;if(!iI.has(e)){const i=zc(),n=u7e[zc()]||i;iI.set(e,new Intl.NumberFormat(n,t))}return iI.get(e)}function Wdt(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function y6(t,e){return Object.is(t,-0)&&(t=0),Y$(e).format(t)}function Zdt(t,e=zc()){var n,s;if(!t)return null;let i=GZ.get(e);if(!i){const r=Y$().formatToParts(12345.6),o=[...Y$({useGrouping:!1}).format(9876543210)].reverse(),l=new Map(o.map((S,P)=>[S,P])),c=new RegExp(`[${(n=r.find(S=>S.type==="group"))==null?void 0:n.value}]`,"g"),f=new RegExp(`[${(s=r.find(S=>S.type==="decimal"))==null?void 0:s.value}]`),y=new RegExp(`[${o.join("")}]`,"g"),_=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,x=/[-\u2212\u2013\u2014\u2015]/g;i=S=>{if((S=S.trim().replaceAll(c,"").replace(f,".").replace(y,A=>String(l.get(A))).replaceAll(_,"").replaceAll(x,"-"))==="")return null;const P=Number(S);return isNaN(P)?null:P},GZ.set(e,i)}return i(t)}NV(()=>{iI=new WeakMap,uue={}});const GZ=new Map,hue=()=>qt.getLogger("esri.intl.substitute");function due(t,e,i={}){const{format:n={}}=i;return VM(t,s=>h7e(s,e,n))}function h7e(t,e,i){let n,s;const r=t.indexOf(":");if(r===-1?n=t.trim():(n=t.slice(0,r).trim(),s=t.slice(r+1).trim()),!n)return"";const o=Yp(n,e);if(o==null)return"";const l=(s?i==null?void 0:i[s]:null)??(i==null?void 0:i[n]);return l?d7e(o,l):s?f7e(o,s):BV(o)}function d7e(t,e){switch(e.type){case"date":return k0(t,e.intlOptions);case"number":return y6(t,e.intlOptions);default:return hue().warn("missing format descriptor for key {key}"),BV(t)}}function f7e(t,e){switch(e.toLowerCase()){case"dateformat":return k0(t);case"numberformat":return y6(t);default:return hue().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?k0(t):/^numberformat/i.test(e)?y6(t):BV(t)}}function BV(t){switch(typeof t){case"string":return t;case"number":return y6(t);case"boolean":return""+t;default:return t instanceof Date?k0(t):""}}const jZ=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,p7e={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function BZ(t){return t in p7e}const k3=[],a2=new Map;function HZ(t){for(const e of a2.keys())fue(t.pattern,e)&&a2.delete(e)}function m7e(t){return k3.includes(t)||(HZ(t),k3.unshift(t)),fn(()=>{const e=k3.indexOf(t);e>-1&&(k3.splice(e,1),HZ(t))})}async function g7e(t){const e=zc();a2.has(t)||a2.set(t,v7e(t,e));const i=a2.get(t);return i&&await _7e.add(i),i}function y7e(t){if(!jZ.test(t))return null;const e=jZ.exec(t);if(e===null)return null;const[,i,n]=e,s=i+(n?"-"+n.toUpperCase():"");return BZ(s)?s:BZ(i)?i:null}async function v7e(t,e){const i=[];for(const n of k3)if(fue(n.pattern,t))try{return await n.fetchMessageBundle(t,e)}catch(s){i.push(s)}throw i.length?new rt("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new rt("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function fue(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}NV(()=>{a2.clear()});const _7e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Oc())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function b7e(t,e,i,n){const s=e.exec(i);if(!s)throw new rt("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const r=s[1]?`${s[1]}/`:"",o=s[2],l=y7e(n),c=`${r}${o}.json`,f=l?`${r}${o}_${l}.json`:c;let y;try{y=await UZ(t(f))}catch(_){if(f===c)throw new rt("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:_});try{y=await UZ(t(c))}catch(x){throw new rt("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:x})}}return y}async function UZ(t){if(YZ.fetchBundleAsset!=null)return YZ.fetchBundleAsset(t);const e=await es(t,{responseType:"text"});return JSON.parse(e.data)}let x7e=class{constructor({base:e="",pattern:i,location:n=new URL(window.location.href)}){let s;s=typeof n=="string"?r=>new URL(r,new URL(n,window.location.href)).href:n instanceof URL?r=>new URL(r,n).href:n,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return b7e(this.getAssetUrl,this.matcher,e,i)}};function w7e(t){return new x7e(t)}const YZ={};m7e(w7e({pattern:"esri/",location:jC}));function S7e(t){return typeof t=="string"?document.getElementById(t):t??null}function Jdt(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}function Qdt(t,e,i){return oV(t.map((n,s)=>e.apply(i,[n,s])))}async function E7e(t,e,i){return(await oV(t.map((n,s)=>e.apply(i,[n,s])))).map(n=>n.value)}function HV(t){return{ok:!0,value:t}}function UV(t){return{ok:!1,error:t}}function C7e(t){return t!=null&&t.ok===!0?t.value:null}function P7e(t){return t!=null&&t.ok===!1?t.error:null}async function YV(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return HV(await t)}catch(e){return UV(e)}}async function T7e(t){try{return HV(await t)}catch(e){return jh(e),UV(e)}}function oA(t,e){return new xg(t,e)}let xg=class extends Ei{get value(){return C7e(this._result)}get error(){return P7e(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=_0(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:n}=this._abortController;this.promise=e(n),this.promise.then(s=>{this._result=HV(s),this._cleanup()},s=>{this._result=UV(s),this._cleanup()}),this._abortHandle=Jl(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Po(this._abortHandle),this._abortController=null}};I([O()],xg.prototype,"value",null),I([O()],xg.prototype,"error",null),I([O()],xg.prototype,"finished",null),I([O()],xg.prototype,"promise",void 0),I([O()],xg.prototype,"_result",void 0),xg=I([De("esri.core.asyncUtils.ReactiveTask")],xg);var qn;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(qn||(qn={}));function XV(t){return(e,i)=>{e[i]=t}}let YC=class extends Mae{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onInvalidated(),n.onCommitted()}}};var Vp;let I7e=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},M7e=class{constructor(e,i,n,s,r){this.target=e,this.added=i,this.removed=n,this.start=s,this.deleteCount=r}};const fu=new RC(I7e,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function XZ(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function O8(t){return t?t instanceof Np?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function $8(t){if(t!=null&&t.length)return t[0]}function A7e(t,e,i,n){const s=Math.min(t.length-i,e.length-n);let r=0;for(;r<s&&t[i+r]===e[n+r];)r++;return r}function pue(t,e,i,n){e&&e.forEach((s,r,o)=>{t.push(s),pue(t,i.call(n,s,r,o),i,n)})}const fg=new Set,pg=new Set,mg=new Set,R8=new Map;let k7e=0,Np=Vp=class extends Ia.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Vp}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new YC,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:k7e++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Vp?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return mi(this._observable),this._items}set items(t){this._emitBeforeChanges(qn.ADD)||(this._splice(0,this.length,O8(t)),this._emitAfterChanges(qn.ADD))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t))}on(t,e){if(this.destroyed)return fn();if(t==="change"){const i=this._chgListeners,n={removed:!1,callback:e};return i.push(n),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),fn(()=>{n.removed=!0,i.splice(i.indexOf(n),1)})}return this._emitter.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,n=this.on(t,s=>{var r;(r=i())==null||r.call(null,s),n.remove()});return n}add(t,e){if(mi(this._observable),this._emitBeforeChanges(qn.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(qn.ADD),this}addMany(t,e=this._items.length){if(mi(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(qn.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,O8(t)),this._emitAfterChanges(qn.ADD),this}at(t){if(mi(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(mi(this._observable),!this.length||this._emitBeforeChanges(qn.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(qn.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return mi(this._observable),this._createNewInstance({items:this._items.map(Ue)})}concat(...t){mi(this._observable);const e=t.map(O8);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(mi(this._observable),!this.length||this._emitBeforeChanges(qn.REMOVE))return;const i=this._splice(0,this.length),n=i.length;for(let s=0;s<n;s++)t.call(e,i[s],s,i);this._emitAfterChanges(qn.REMOVE)}destroyAll(){this.drain(XZ)}destroyMany(t){const e=this.removeMany(t);return e.forEach(XZ),e}every(t,e){return mi(this._observable),this._items.every(t,e)}filter(t,e){let i;return mi(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return mi(this._observable),this._items.find(t,e)}findIndex(t,e){return mi(this._observable),this._items.findIndex(t,e)}flatten(t,e){mi(this._observable);const i=[];return pue(i,this,t,e),new Vp(i)}forEach(t,e){return mi(this._observable),this._items.forEach(t,e)}getItemAt(t){return mi(this._observable),this._items[t]}getNextIndex(t){mi(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return mi(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return mi(this._observable),this._items.indexOf(t,e)}join(t=","){return mi(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return mi(this._observable),this._items.lastIndexOf(t,e)}map(t,e){mi(this._observable);const i=this._items.map(t,e);return new Vp({items:i})}reorder(t,e=this.length-1){mi(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(qn.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(qn.MOVE)}return t}}pop(){if(mi(this._observable),!this.length||this._emitBeforeChanges(qn.REMOVE))return;const t=$8(this._splice(this.length-1,1));return this._emitAfterChanges(qn.REMOVE),t}push(...t){return mi(this._observable),this._emitBeforeChanges(qn.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(qn.ADD)),this.length}reduce(t,e){mi(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){mi(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return mi(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(mi(this._observable),t<0||t>=this.length||this._emitBeforeChanges(qn.REMOVE))return;const e=$8(this._splice(t,1));return this._emitAfterChanges(qn.REMOVE),e}removeMany(t){if(mi(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(qn.REMOVE))return[];const e=t instanceof Vp?t.toArray():t,i=this._items,n=[],s=e.length;for(let r=0;r<s;r++){const o=e[r],l=i.indexOf(o);if(l>-1){const c=1+A7e(e,i,r+1,l+1),f=this._splice(l,c);f&&f.length>0&&n.push.apply(n,f),r+=c-1}}return this._emitAfterChanges(qn.REMOVE),n}reverse(){if(mi(this._observable),this._emitBeforeChanges(qn.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(qn.MOVE),this}shift(){if(mi(this._observable),!this.length||this._emitBeforeChanges(qn.REMOVE))return;const t=$8(this._splice(0,1));return this._emitAfterChanges(qn.REMOVE),t}slice(t=0,e=this.length){return mi(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return mi(this._observable),this._items.some(t,e)}sort(t){if(mi(this._observable),!this.length||this._emitBeforeChanges(qn.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(qn.MOVE),this}splice(t,e,...i){mi(this._observable);const n=(e?qn.REMOVE:0)|(i.length?qn.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(t,e,i)||[];return this._emitAfterChanges(n),s}toArray(){return mi(this._observable),this._items.slice()}toJSON(){return mi(this._observable),this.toArray()}toLocaleString(){return mi(this._observable),this._items.toLocaleString()}toString(){return mi(this._observable),this._items.toString()}unshift(...t){return mi(this._observable),!t.length||this._emitBeforeChanges(qn.ADD)||(this._splice(0,0,t),this._emitAfterChanges(qn.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const n=this._items,s=this.itemType;let r,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=aV(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=n.splice(t,e),this.hasEventListener("before-remove")){const l=fu.acquire();l.target=this,l.cancellable=!0;for(let c=0,f=o.length;c<f;c++)r=o[c],l.reset(r),this.emit("before-remove",l),l.defaultPrevented&&(o.splice(c,1),n.splice(t,0,r),t+=1,c-=1,f-=1);fu.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=fu.acquire();l.target=this,l.cancellable=!1;const c=o.length;for(let f=0;f<c;f++)l.reset(o[f]),this.emit("after-remove",l);fu.release(l)}}if(i!=null&&i.length){if(s){const y=[];for(const _ of i){const x=s.ensureType(_);x==null&&_!=null||y.push(x)}i=y}const l=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),f=t===this.length;if(l||c){const y=fu.acquire();y.target=this,y.cancellable=!0;const _=fu.acquire();_.target=this,_.cancellable=!1;for(const x of i)l?(y.reset(x),this.emit("before-add",y),y.defaultPrevented||(f?n.push(x):n.splice(t++,0,x),this._set("length",n.length),c&&(_.reset(x),this.emit("after-add",_)))):(f?n.push(x):n.splice(t++,0,x),this._set("length",n.length),_.reset(x),this.emit("after-add",_));fu.release(_),fu.release(y)}else{if(f)for(const y of i)n.push(y);else n.splice(t,0,...i);this._set("length",n.length)}}if((i!=null&&i.length||o!=null&&o.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const l=new M7e(this,i,o,t,e);this.emit("after-splice",l)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=fu.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,fu.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=fu.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),fu.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;fg.clear(),pg.clear(),mg.clear();for(const{added:c,removed:f}of i){if(c)if(mg.size===0&&pg.size===0)for(const y of c)fg.add(y);else for(const y of c)pg.has(y)?(mg.add(y),pg.delete(y)):mg.has(y)||fg.add(y);if(f)if(mg.size===0&&fg.size===0)for(const y of f)pg.add(y);else for(const y of f)fg.has(y)?fg.delete(y):(mg.delete(y),pg.add(y))}const n=rf.acquire();fg.forEach(c=>{n.push(c)});const s=rf.acquire();pg.forEach(c=>{s.push(c)});const r=this._items,o=e.items,l=rf.acquire();if(mg.forEach(c=>{o.indexOf(c)!==r.indexOf(c)&&l.push(c)}),e.listeners&&(n.length||s.length||l.length)){const c={target:this,added:n,removed:s,moved:l},f=e.listeners.length;for(let y=0;y<f;y++){const _=e.listeners[y];_.removed||_.callback.call(this,c)}}rf.release(n),rf.release(s),rf.release(l)}fg.clear(),pg.clear(),mg.clear()}};Np.ofType=t=>{if(!t)return Vp;if(R8.has(t))return R8.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const n in t.typeMap){const s=t.typeMap[n].prototype.declaredClass;e?e+=` | ${s}`:e=s}let i=class extends Vp{};return I([XV({Type:t,ensureType:typeof t=="function"?Qo(t):Ku(t)})],i.prototype,"itemType",void 0),i=I([De(`esri.core.Collection<${e}>`)],i),R8.set(t,i),i},I([O()],Np.prototype,"_updating",void 0),I([O()],Np.prototype,"length",void 0),I([O()],Np.prototype,"items",null),I([O({readOnly:!0})],Np.prototype,"updating",null),Np=Vp=I([De("esri.core.Collection")],Np);const ci=Np;function xi(t,e,i={}){return WV(t,e,i,gue)}function D0(t,e,i={}){return WV(t,e,i,yue)}function WV(t,e,i={},n){let s=null;const r=i.once?(o,l)=>{n(o)&&(Po(s),e(o,l))}:(o,l)=>{n(o)&&e(o,l)};if(s=KTe(t,r,i.sync,i.equals),i.initial){const o=t();r(o,o)}return s}function Ju(t,e,i,n={}){let s=null,r=null,o=null;function l(){var y;s&&r&&(r.remove(),(y=n.onListenerRemove)==null||y.call(n,s),s=null,r=null)}function c(y){n.once&&n.once&&Po(o),i(y)}const f=xi(t,(y,_)=>{var x;l(),HM(y)&&(s=y,r=Xy(y,e,c),(x=n.onListenerAdd)==null||x.call(n,y))},{sync:n.sync,initial:!0});return o=fn(()=>{f.remove(),l()}),o}function D7e(t,e){return mue(t,null,e)}function X$(t,e){return mue(t,yue,e)}function mue(t,e,i){if(jc(i))return Promise.reject(lr());const n=t();if(e!=null&&e(n))return Promise.resolve(n);let s=null;function r(){s=Po(s)}return new Promise((o,l)=>{s=bm([Jl(i,()=>{r(),l(lr())}),WV(t,c=>{r(),o(c)},{sync:!1,once:!0},e??gue)])})}function gue(t){return!0}function yue(t){return!!t}function N7e(t,e,i={}){let n=!1;const s=xi(t,(r,o)=>{n||e(r,o)},i);return{remove(){s.remove()},pause(){n=!0},resume(){n=!1}}}function vue(t,e){const i=new ci,n=Ju(t,"after-splice",({added:s,start:r,deleteCount:o})=>{const l=i.splice(r,o);for(const c of l)c.remove();if(s!=null&&s.length){const c=s.map(e);i.addMany(c,r)}},{sync:!0,onListenerRemove:()=>i.drain(s=>s.remove()),onListenerAdd:s=>i.addMany(s.items.map(e))});return i.addHandles(n),i}function O7e(t,e){const i=new ci,n=vue(t,l=>oA(async c=>{const f=await e(l,c);if(jc(c))throw f.remove(),lr();return f})),s=()=>null,r=async l=>{const c=await l.promise,f=n.indexOf(l);f<0||i.splice(f,1,c)};i.addMany(n.items.map(s));for(const l of n)ad(r(l));const o=n.on("after-splice",({added:l,start:c,deleteCount:f})=>{const y=i.splice(c,f);for(const _ of y)_==null||_.remove();if(l!=null&&l.length){i.addMany(l.map(s),c);for(const _ of l)ad(r(_))}});return i.addHandles([Z4e(n),o]),i}const om={sync:!0},ec={initial:!0},ac={sync:!0,initial:!0},$7e=Object.freeze(Object.defineProperty({__proto__:null,autorun:cV,initial:ec,mapCollection:vue,mapCollectionAsync:O7e,on:Ju,once:D7e,pausable:N7e,sync:om,syncAndInitial:ac,watch:xi,when:D0,whenOnce:X$},Symbol.toStringTag,{value:"Module"})),R7e="randomUUID"in crypto;function ZV(){if(R7e)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function sft(){return`{${ZV().toUpperCase()}}`}function L7e(){return`{${ZV()}}`}function F7e(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var v6=function(){return v6=Object.assign||function(e){for(var i,n=1,s=arguments.length;n<s;n++){i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},v6.apply(this,arguments)},W$={exports:{}},Tr={},Z$={exports:{}},Bv={};function _ue(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function z7e(t,e,i){}function q7e(t,e,i){}var V7e=/javascript\s*\:/img;function G7e(t,e){return V7e.test(e)?"":e}Bv.whiteList=_ue();Bv.getDefaultWhiteList=_ue;Bv.onAttr=z7e;Bv.onIgnoreAttr=q7e;Bv.safeAttrValue=G7e;var j7e={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,s;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,s=t.length;n<s;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},r3=j7e;function B7e(t,e){t=r3.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,n=!1,s=0,r=0,o="";function l(){if(!n){var y=r3.trim(t.slice(s,r)),_=y.indexOf(":");if(_!==-1){var x=r3.trim(y.slice(0,_)),S=r3.trim(y.slice(_+1));if(x){var P=e(s,o.length,x,S,y);P&&(o+=P+"; ")}}}s=r+1}for(;r<i;r++){var c=t[r];if(c==="/"&&t[r+1]==="*"){var f=t.indexOf("*/",r+2);if(f===-1)break;r=f+1,s=r+1,n=!1}else c==="("?n=!0:c===")"?n=!1:c===";"?n||l():c===`
`&&l()}return r3.trim(o)}var H7e=B7e,S4=Bv,U7e=H7e;function WZ(t){return t==null}function Y7e(t){var e={};for(var i in t)e[i]=t[i];return e}function bue(t){t=Y7e(t||{}),t.whiteList=t.whiteList||S4.whiteList,t.onAttr=t.onAttr||S4.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||S4.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||S4.safeAttrValue,this.options=t}bue.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,s=i.onAttr,r=i.onIgnoreAttr,o=i.safeAttrValue,l=U7e(t,function(c,f,y,_,x){var S=n[y],P=!1;if(S===!0?P=S:typeof S=="function"?P=S(_):S instanceof RegExp&&(P=S.test(_)),P!==!0&&(P=!1),_=o(y,_),!!_){var A={position:f,sourcePosition:c,source:x,isWhite:P};if(P){var D=s(y,_,A);return WZ(D)?y+":"+_:D}else{var D=r(y,_,A);if(!WZ(D))return D}}});return l};var X7e=bue;(function(t,e){var i=Bv,n=X7e;function s(o,l){var c=new n(l);return c.process(o)}e=t.exports=s,e.FilterCSS=n;for(var r in i)e[r]=i[r]})(Z$,Z$.exports);var KV=Z$.exports,JV={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,s;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,s=t.length;n<s;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},W7e=KV.FilterCSS,Z7e=KV.getDefaultWhiteList,_6=JV;function xue(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var wue=new W7e;function K7e(t,e,i){}function J7e(t,e,i){}function Q7e(t,e,i){}function eke(t,e,i){}function Sue(t){return t.replace(ike,"&lt;").replace(nke,"&gt;")}function tke(t,e,i,n){if(i=Mue(i),e==="href"||e==="src"){if(i=_6.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(E4.lastIndex=0,E4.test(i))return""}else if(e==="style"){if(ZZ.lastIndex=0,ZZ.test(i)||(KZ.lastIndex=0,KZ.test(i)&&(E4.lastIndex=0,E4.test(i))))return"";n!==!1&&(n=n||wue,i=n.process(i))}return i=Aue(i),i}var ike=/</g,nke=/>/g,ske=/"/g,rke=/&quot;/g,oke=/&#([a-zA-Z0-9]*);?/gim,ake=/&colon;?/gim,lke=/&newline;?/gim,E4=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,ZZ=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,KZ=/u\s*r\s*l\s*\(.*/gi;function Eue(t){return t.replace(ske,"&quot;")}function Cue(t){return t.replace(rke,'"')}function Pue(t){return t.replace(oke,function(i,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function Tue(t){return t.replace(ake,":").replace(lke," ")}function Iue(t){for(var e="",i=0,n=t.length;i<n;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return _6.trim(e)}function Mue(t){return t=Cue(t),t=Pue(t),t=Tue(t),t=Iue(t),t}function Aue(t){return t=Eue(t),t=Sue(t),t}function cke(){return""}function uke(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function n(o){return i?!0:_6.indexOf(t,o)!==-1}var s=[],r=!1;return{onIgnoreTag:function(o,l,c){if(n(o))if(c.isClosing){var f="[/removed]",y=c.position+f.length;return s.push([r!==!1?r:c.position,y]),r=!1,f}else return r||(r=c.position),"[removed]";else return e(o,l,c)},remove:function(o){var l="",c=0;return _6.forEach(s,function(f){l+=o.slice(c,f[0]),c=f[1]}),l+=o.slice(c),l}}}function hke(t){for(var e="",i=0;i<t.length;){var n=t.indexOf("<!--",i);if(n===-1){e+=t.slice(i);break}e+=t.slice(i,n);var s=t.indexOf("-->",n);if(s===-1)break;i=s+3}return e}function dke(t){var e=t.split("");return e=e.filter(function(i){var n=i.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),e.join("")}Tr.whiteList=xue();Tr.getDefaultWhiteList=xue;Tr.onTag=K7e;Tr.onIgnoreTag=J7e;Tr.onTagAttr=Q7e;Tr.onIgnoreTagAttr=eke;Tr.safeAttrValue=tke;Tr.escapeHtml=Sue;Tr.escapeQuote=Eue;Tr.unescapeQuote=Cue;Tr.escapeHtmlEntities=Pue;Tr.escapeDangerHtml5Entities=Tue;Tr.clearNonPrintableCharacter=Iue;Tr.friendlyAttrValue=Mue;Tr.escapeAttrValue=Aue;Tr.onIgnoreTagStripAll=cke;Tr.StripTagBody=uke;Tr.stripCommentTag=hke;Tr.stripBlankChar=dke;Tr.cssFilter=wue;Tr.getDefaultCSSWhiteList=Z7e;var aA={},Yg=JV;function fke(t){var e=Yg.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Yg.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function pke(t){return t.slice(0,2)==="</"}function mke(t,e,i){var n="",s=0,r=!1,o=!1,l=0,c=t.length,f="",y="";e:for(l=0;l<c;l++){var _=t.charAt(l);if(r===!1){if(_==="<"){r=l;continue}}else if(o===!1){if(_==="<"){n+=i(t.slice(s,l)),r=l,s=l;continue}if(_===">"){n+=i(t.slice(s,r)),y=t.slice(r,l+1),f=fke(y),n+=e(r,n.length,f,y,pke(y)),s=l+1,r=!1;continue}if(_==='"'||_==="'")for(var x=1,S=t.charAt(l-x);S.trim()===""||S==="=";){if(S==="="){o=_;continue e}S=t.charAt(l-++x)}}else if(_===o){o=!1;continue}}return s<t.length&&(n+=i(t.substr(s))),n}var gke=/[^a-zA-Z0-9\\_:.-]/gim;function yke(t,e){var i=0,n=0,s=[],r=!1,o=t.length;function l(x,S){if(x=Yg.trim(x),x=x.replace(gke,"").toLowerCase(),!(x.length<1)){var P=e(x,S||"");P&&s.push(P)}}for(var c=0;c<o;c++){var f=t.charAt(c),y,_;if(r===!1&&f==="="){r=t.slice(i,c),i=c+1,n=t.charAt(i)==='"'||t.charAt(i)==="'"?i:_ke(t,c+1);continue}if(r!==!1&&c===n){if(_=t.indexOf(f,c+1),_===-1)break;y=Yg.trim(t.slice(n+1,_)),l(r,y),r=!1,c=_,i=c+1;continue}if(/\s|\n|\t/.test(f))if(t=t.replace(/\s|\n|\t/g," "),r===!1)if(_=vke(t,c),_===-1){y=Yg.trim(t.slice(i,c)),l(y),r=!1,i=c+1;continue}else{c=_-1;continue}else if(_=bke(t,c-1),_===-1){y=Yg.trim(t.slice(i,c)),y=JZ(y),l(r,y),r=!1,i=c+1;continue}else continue}return i<t.length&&(r===!1?l(t.slice(i)):l(r,JZ(Yg.trim(t.slice(i))))),Yg.trim(s.join(" "))}function vke(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function _ke(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function bke(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function xke(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function JZ(t){return xke(t)?t.substr(1,t.length-2):t}aA.parseTag=mke;aA.parseAttr=yke;var wke=KV.FilterCSS,zh=Tr,kue=aA,Ske=kue.parseTag,Eke=kue.parseAttr,nI=JV;function C4(t){return t==null}function Cke(t){var e=nI.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=nI.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=nI.trim(t.slice(0,-1))),{html:t,closing:i}}function Pke(t){var e={};for(var i in t)e[i]=t[i];return e}function Tke(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(n){return n.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Due(t){t=Pke(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=zh.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Tke(t.whiteList||t.allowList):t.whiteList=zh.whiteList,t.onTag=t.onTag||zh.onTag,t.onTagAttr=t.onTagAttr||zh.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||zh.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||zh.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||zh.safeAttrValue,t.escapeHtml=t.escapeHtml||zh.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new wke(t.css))}Due.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,s=i.onTag,r=i.onIgnoreTag,o=i.onTagAttr,l=i.onIgnoreTagAttr,c=i.safeAttrValue,f=i.escapeHtml,y=e.cssFilter;i.stripBlankChar&&(t=zh.stripBlankChar(t)),i.allowCommentTag||(t=zh.stripCommentTag(t));var _=!1;i.stripIgnoreTagBody&&(_=zh.StripTagBody(i.stripIgnoreTagBody,r),r=_.onIgnoreTag);var x=Ske(t,function(S,P,A,D,N){var F={sourcePosition:S,position:P,isClosing:N,isWhite:Object.prototype.hasOwnProperty.call(n,A)},G=s(A,D,F);if(!C4(G))return G;if(F.isWhite){if(F.isClosing)return"</"+A+">";var V=Cke(D),B=n[A],W=Eke(V.html,function(J,re){var ne=nI.indexOf(B,J)!==-1,oe=o(A,J,re,ne);return C4(oe)?ne?(re=c(A,J,re,y),re?J+'="'+re+'"':J):(oe=l(A,J,re,ne),C4(oe)?void 0:oe):oe});return D="<"+A,W&&(D+=" "+W),V.closing&&(D+=" /"),D+=">",D}else return G=r(A,D,F),C4(G)?f(D):G},f);return _&&(x=_.remove(x)),x};var Ike=Due;(function(t,e){var i=Tr,n=aA,s=Ike;function r(l,c){var f=new s(c);return f.process(l)}e=t.exports=r,e.filterXSS=r,e.FilterXSS=s,function(){for(var l in i)e[l]=i[l];for(var c in n)e[c]=n[c]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(W$,W$.exports);var q_=W$.exports,Mke=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Ake=function(){function t(e,i){var n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=v6(v6({},q_.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(r,o,l,c){return r==="a"&&o==="href"||(r==="img"||r==="source")&&o==="src"?n.sanitizeUrl(l):q_.safeAttrValue(r,o,l,c)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;e&&!i?s=e:e&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(r){if(r==="whiteList")s.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]);else if(r==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(l){return s.css.whiteList[l]=o[l]})}else s[r]=e[r]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new q_.FilterXSS(s)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var n=(i??{}).isProtocolRequired,s=n===void 0?!0:n,r=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",l=/^#/.test(e),c=r&&this.allowedProtocols.indexOf(r.toLowerCase())>-1;return o||l||c?q_.escapeAttrValue(e):!r&&!s?q_.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,n,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,n,s):q_.safeAttrValue(e,i,n,s)},t.prototype.validate=function(e,i){i===void 0&&(i={});var n=this.sanitize(e,i);return{isValid:e===n,sanitized:n}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(n){return i._entityMap[n]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(n,s){return i.test(n)?n:"&#x".concat(Number(e.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(n){Object.keys(n).forEach(function(s){Array.isArray(n[s])&&Array.isArray(i[s])?i[s]=i[s].concat(n[s]):i[s]=n[s]})}),i},t.prototype._iterateOverObject=function(e,i){var n=this;i===void 0&&(i={});try{var s=!1,r=void 0;if(Array.isArray(e))r=e.reduce(function(l,c){var f=n.validate(c,i);return f.isValid?l.concat([c]):(s=!0,l.concat([f.sanitized]))},[]);else if(Mke(e)){var o=Object.keys(e);r=o.reduce(function(l,c){var f=e[c],y=n.validate(f,i);return y.isValid?l[c]=f:(s=!0,l[c]=y.sanitized),l},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return s?r:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const lA=new Map;function Nue(){lA.clear()}function kke(t){return lA.get(t)}function Dke(t,e){lA.set(t,e)}function L8(t){lA.delete(t)}function Nke(...t){const e=rf.acquire();for(let n=0;n<t.length;n++){const s=t[n],r=typeof s;if(r==="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(r==="object")for(const o in s)s[o]&&e.push(o)}const i=e.join(" ");return rf.release(e),i}const rft=(()=>{const t=new Map,e=new ResizeObserver(n=>{var s;Nue();for(const r of n)(s=t.get(r.target))==null||s(r)}),i=(n,s,r)=>(t.set(n,s),e.observe(n,r),fn(()=>{e.unobserve(n),t.delete(n)}));return(n,s,r)=>{let o=null;return bm([xi(()=>typeof n=="function"?n():n,l=>{o==null||o.remove(),l&&(o=i(l,s,r))},ac),fn(()=>o==null?void 0:o.remove())])}})();function QZ(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function oft(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function aft(t){const e="data-node-ref";this[t.getAttribute(e)]=t}const Oke=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],$ke=Oke.reduce((t,e)=>(t[e]=[],t),{}),Rke=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Oue=new Ake({whiteList:$ke,onTagAttr:(t,e,i)=>{const n=`${e}="${i}"`;if(Rke.includes(e))return n},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function lft(t){return t==="Enter"||t===" "}async function $ue(t,e){await NTe(LC(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const Rue="http://www.w3.org/",cA=`${Rue}2000/svg`,Lue=`${Rue}1999/xlink`;let eK=[],QV=(t,e)=>{let i={};return Object.keys(t).forEach(n=>{i[n]=t[n]}),e&&Object.keys(e).forEach(n=>{i[n]=e[n]}),i},eG=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Fue=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},Lke=(t,e,i)=>{if(e.vnodeSelector!==""){for(let n=i;n<t.length;n++)if(eG(t[n],e))return n}return-1},F8=(t,e,i,n)=>{let s=t[e];if(s.vnodeSelector==="")return;let r=s.properties;if(!(r&&(r.key===void 0?r.bind:r.key))){for(let o=0;o<t.length;o++)if(o!==e){let l=t[o];if(eG(l,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${n==="added"?n:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Fke=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},K$=[],J$=!1,zue=t=>{(t.children||[]).forEach(zue),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},tK=()=>{J$=!1,K$.forEach(zue),K$.length=0},iK=t=>{K$.push(t),J$||(J$=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(tK,{timeout:16}):setTimeout(tK,16))},nK=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),iK(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),iK(t))},zke=(t,e,i)=>{if(!e)return;let n=i.eventHandlerInterceptor,s=Object.keys(e),r=s.length;for(let o=0;o<r;o++){let l=s[o],c=e[l];if(l==="className")throw new Error('Property "className" is not supported, use "class".');if(l==="class")eR(t,c,!0);else if(l==="classes"){let f=Object.keys(c),y=f.length;for(let _=0;_<y;_++){let x=f[_];c[x]&&t.classList.add(x)}}else if(l==="styles"){let f=Object.keys(c),y=f.length;for(let _=0;_<y;_++){let x=f[_],S=c[x];S&&(Fue(S),i.styleApplyer(t,x,S))}}else if(l!=="key"&&c!=null){let f=typeof c;f==="function"?(l.lastIndexOf("on",0)===0&&(n&&(c=n(l,c,t,e)),l==="oninput"&&function(){let y=c;c=function(_){y.apply(this,[_]),_.target["oninput-value"]=_.target.value}}()),t[l]=c):i.namespace===cA?l==="href"?t.setAttributeNS(Lue,l,c):t.setAttribute(l,c):f==="string"&&l!=="value"?l==="innerHTML"?t[l]=Oue.sanitize(c):Q$(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]=c}}};function Q$(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let b6,qke=(t,e,i)=>{if(e)for(let n of e)HS(n,t,void 0,i)},que=(t,e,i)=>{qke(t,e.children,i),e.text&&(t.textContent=e.text),zke(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},HS=(t,e,i,n)=>{let s,r=0,o=t.vnodeSelector,l=e.ownerDocument;if(o==="")s=t.domNode=l.createTextNode(t.text),i!==void 0?e.insertBefore(s,i):e.appendChild(s);else{for(let c=0;c<=o.length;++c){let f=o.charAt(c);if(c===o.length||f==="."||f==="#"){let y=o.charAt(r-1),_=o.slice(r,c);y==="."?s.classList.add(_):y==="#"?s.id=_:(_==="svg"&&(n=QV(n,{namespace:cA})),n.namespace!==void 0?s=t.domNode=l.createElementNS(n.namespace,_):(s=t.domNode=t.domNode||l.createElement(_),_==="input"&&t.properties&&t.properties.type!==void 0&&s.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(s,i):s.parentNode!==e&&e.appendChild(s)),r=c+1}}que(s,t,n)}},eR=(t,e,i)=>{e&&e.split(" ").forEach(n=>{n&&t.classList.toggle(n,i)})},Vke=(t,e,i,n)=>{if(!i)return;let s=!1,r=Object.keys(i),o=r.length;for(let l=0;l<o;l++){let c=r[l],f=i[c],y=e[c];if(c==="class")y!==f&&(eR(t,y,!1),eR(t,f,!0));else if(c==="classes"){let _=t.classList,x=Object.keys(f),S=x.length;for(let P=0;P<S;P++){let A=x[P],D=!!f[A];D!==!!y[A]&&(s=!0,D?_.add(A):_.remove(A))}}else if(c==="styles"){let _=Object.keys(f),x=_.length;for(let S=0;S<x;S++){let P=_[S],A=f[P];A!==y[P]&&(s=!0,A?(Fue(A),n.styleApplyer(t,P,A)):n.styleApplyer(t,P,""))}}else if(f||typeof y!="string"||(f=""),c!=="value"||Q$(t)){if(f!==y){let _=typeof f;_==="function"&&n.eventHandlerInterceptor||(n.namespace===cA?c==="href"?t.setAttributeNS(Lue,c,f):t.setAttribute(c,f):_==="string"?c==="innerHTML"?t[c]=Oue.sanitize(f):c==="role"&&f===""?t.removeAttribute(c):Q$(t)&&c in t?t[c]=f:t.setAttribute(c,f):t[c]!==f&&(t[c]=f),s=!0)}}else{let _=t[c];_!==f&&(t["oninput-value"]?_===t["oninput-value"]:f!==y)&&(t[c]=f,t["oninput-value"]=void 0),f!==y&&(s=!0)}}return s},Gke=(t,e,i,n,s)=>{if(i===n)return!1;n=n||eK;let r,o=(i=i||eK).length,l=n.length,c=0,f=0,y=!1;for(;f<l;){let _=c<o?i[c]:void 0,x=n[f];if(_!==void 0&&eG(_,x))y=b6(_,x,s)||y,c++;else{let S=Lke(i,x,c+1);if(S>=0){for(r=c;r<S;r++)nK(i[r]),F8(i,r,t,"removed");y=b6(i[S],x,s)||y,c=S+1}else HS(x,e,c<o?i[c].domNode:void 0,s),Fke(x),F8(n,f,t,"added")}f++}if(o>c)for(r=c;r<o;r++)nK(i[r]),F8(i,r,t,"removed");return y};b6=(t,e,i)=>{let n=t.domNode,s=!1;if(t===e)return!1;let r=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=n.ownerDocument.createTextNode(e.text);return n.parentNode.replaceChild(o,n),e.domNode=o,s=!0,s}e.domNode=n}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=QV(i,{namespace:cA})),t.text!==e.text&&(r=!0,e.text===void 0?n.removeChild(n.firstChild):n.textContent=e.text),e.domNode=n,r=Gke(e,n,t.children,e.children,i)||r,r=Vke(n,t.properties,e.properties,i)||r,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[n,i,e.vnodeSelector,e.properties,e.children]);return r&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(n,e.properties,t.properties),s};let P4=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let n=t;t=i,b6(n,i,e)},domNode:t.domNode});const jke={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let D3=t=>QV(jke,t),a0={append:(t,e,i)=>(i=D3(i),HS(e,t,void 0,i),P4(e,i)),insertBefore:(t,e,i)=>(i=D3(i),HS(e,t.parentNode,t,i),P4(e,i)),merge:(t,e,i)=>(i=D3(i),e.domNode=t,que(t,e,i),P4(e,i)),replace:(t,e,i)=>(i=D3(i),HS(e,t.parentNode,t,i),t.parentNode.removeChild(t),P4(e,i))},Vue,Bke=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};Vue=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let Hke=(t,e)=>{let i=t;return e.forEach(n=>{i=i&&i.children?Vue(i.children,s=>s.domNode===n):void 0}),i},Uke=(t,e,i)=>{let n=function(s){i("domEvent",s);let r=e(),o=Bke(s.currentTarget,r.domNode);o.reverse();let l,c=Hke(r.getLastRender(),o);return t.scheduleRender(),c&&(l=c.properties[`on${s.type}`].apply(c.properties.bind||this,arguments)),i("domEventProcessed",s),l};return(s,r,o,l)=>n},cft=t=>{let e,i,n=D3(t),s=n.performanceLogger,r=!0,o=!1,l=[],c=[],f=(_,x,S)=>{let P,A=()=>P;n.eventHandlerInterceptor=Uke(e,A,s),P=_(x,S(),n),l.push(P),c.push(S)},y=()=>{if(i=void 0,r){r=!1,s("renderStart",void 0);for(let _=0;_<l.length;_++){let x=c[_]();s("rendered",void 0),l[_].update(x),s("patched",void 0)}s("renderDone",void 0),r=!0}};return e={renderNow:y,scheduleRender:()=>{i||o||(i=requestAnimationFrame(y))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,r=!0,e.scheduleRender()},append:(_,x)=>{f(a0.append,_,x)},insertBefore:(_,x)=>{f(a0.insertBefore,_,x)},merge:(_,x)=>{f(a0.merge,_,x)},replace:(_,x)=>{f(a0.replace,_,x)},detach:_=>{for(let x=0;x<c.length;x++)if(c[x]===_)return c.splice(x,1),l.splice(x,1)[0];throw new Error("renderFunction was not found")}},e};const Yke={handleInterceptedEvent:(t,e,i,n)=>(t.scheduleRender(),e.properties[`on${n.type}`].apply(e.properties.bind||i,[n]))},Xke={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},Wke=t=>({...Xke,...t}),Zke=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},Kke=(t,e)=>t.find(e),sK=(t,e,i=!1)=>{let n=t;return e.forEach((s,r)=>{const o=n!=null&&n.children?Kke(n.children,l=>l.domNode===s):void 0;i&&!o&&r!==e.length-1||(n=o)}),n},Jke=t=>{let e;const i={...Yke,...t},n=Wke(i),s=n.performanceLogger;let r,o=!0,l=!1;const c=[],f=[],y=(x,S,P)=>{var N;let A;n.eventHandlerInterceptor=(F,G,V,B)=>function(W){let J;s("domEvent",W);const re=Zke(W.currentTarget,A.domNode),ne=re.some(pe=>{var ce;return customElements.get((ce=pe==null?void 0:pe.tagName)==null?void 0:ce.toLowerCase())});if(W.eventPhase===Event.CAPTURING_PHASE||!ne)re.reverse(),J=sK(A.getLastRender(),re);else{const pe=W.composedPath(),ce=pe.slice(pe.indexOf(W.currentTarget),pe.indexOf(A.domNode)).reverse();J=sK(A.getLastRender(),ce,!0)}let oe;return J&&(oe=i.handleInterceptedEvent(e,J,this,W)),s("domEventProcessed",W),oe},(N=i.postProcessProjectionOptions)==null||N.call(i,n);const D=P();A=x(S,D,n),n.eventHandlerInterceptor=void 0,c.push(A),f.push(P),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(A,D)};let _=()=>{if(r=void 0,o){o=!1,s("renderStart",void 0);for(let x=0;x<c.length;x++){const S=f[x]();s("rendered",void 0);try{c[x].update(S)}catch(P){console.error(P)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(_=i.modifyDoRenderImplementation(_,c,f)),e={renderNow:_,scheduleRender:()=>{r||l||(r=requestAnimationFrame(_))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),l=!0},resume:()=>{l=!1,o=!0,e.scheduleRender()},append:(x,S)=>{y(a0.append,x,S)},insertBefore:(x,S)=>{y(a0.insertBefore,x,S)},merge:(x,S)=>{y(a0.merge,x,S)},replace:(x,S)=>{y(a0.replace,x,S)},detach:x=>{for(let S=0;S<f.length;S++)if(f[S]===x)return f.splice(S,1),c.splice(S,1)[0];throw new Error("renderFunction was not found")}},e};let Gue;function Qke(){try{Eq(".")}catch{Hse(_l(jC(Gue)))}}function Px(t){var i;const e=[];for(const n of Object.keys(t))customElements.get(`calcite-${n}`)||e.push((i=t[n])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}Gue="components/assets";const jue=Symbol("widget"),Bue=Symbol("widget-test-data"),eDe=[],tDe={},x6=new WeakMap;function Hue(t,e){let i=e.children;if(i!=null&&i.length)for(let s=0;s<i.length;++s)i[s]=Hue(t,i[s]);else i=eDe;const n=e.vnodeSelector;if(w6(n)){const s=e.properties||tDe,r=s.key||n,o={key:r,afterCreate:iDe,afterUpdate:nDe,afterRemoved:Uue,parentWidget:t,widgetConstructor:n,widgetProperties:{...s,key:r,children:i}};return{vnodeSelector:n.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function iDe(t,e,i,{parentWidget:n,widgetConstructor:s,widgetProperties:r}){var l;const o=new s(r);o.container=t,x6.set(t,o),(l=o.afterCreate)==null||l.call(o,o,t),n.addHandles(fn(()=>Uue(t))),queueMicrotask(()=>{o[Bue].projector.renderNow()})}function nDe(t,e,i,{widgetProperties:n}){var r;const s=x6.get(t);s&&(s.set(n),(r=s.afterUpdate)==null||r.call(s,s,t))}function Uue(t){var i;const e=x6.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),x6.delete(t))}function w6(t){return typeof t=="function"&&t[jue]}const rK=new Set;function sDe(t){rK.add(t),t.finally(()=>rK.delete(t))}var Yue;const rDe="esri.widgets.Widget";let oDe=0;function Xue(t,e){const i=Object.prototype.hasOwnProperty;for(const n in e)i.call(e,n)&&i.call(t,n)&&(t[n]!=null&&e[n]!=null&&typeof t[n]=="object"&&typeof e[n]=="object"?Xue(t[n],e[n]):t[n]=e[n]);return t}const aDe=Jke({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(n,s,r,o)=>{const l=e==null?void 0:e(n,s,r,o),c=i.test(n);if(!((n=n.replace(i,"")).toLowerCase()in r)||c){const f=n[2].toLowerCase()+n.slice(3),y=S=>l==null?void 0:l.call(r,S);r.addEventListener(f,y,c);const _=()=>r.removeEventListener(f,y,c),x=o.afterRemoved;o.afterRemoved=S=>{x==null||x(S),_()}}return l}},handleInterceptedEvent(t,e,i,n){const{eventPhase:s,type:r}=n,o=s===Event.CAPTURING_PHASE;let l=`on${r}${o?"capture":""}`;const c=e.properties;(c&&l in c||(l=`on${r[0].toUpperCase()}${r.slice(1)}${o?"Capture":""}`,c&&l in c))&&(Nue(),t.scheduleRender(),c[l].call(c.bind||i,n))}});let z8=!1,io=class extends EV(Ia.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=aDe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=qv(async()=>{var c;if((c=this._messageBundleProps)!=null&&c.length){const f=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:y,propertyName:_})=>{if(this.destroyed)return;let x=await g7e(y);this.uiStrings&&Object.keys(this.uiStrings)&&(x=Xue(Ue(x),this.uiStrings)),this[_]=x}));if(this.destroyed)return;for(const y of f)y.status==="rejected"&&qt.getLogger(this).error("widget-intl:locale-error",this.declaredClass,y.reason)}await this.loadLocale()}),Qke();const n="esri-widget-uid-"+ZV(),s=this.render.bind(this);this._trackingTarget=new UM(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const r=()=>({vnodeSelector:"div",properties:{key:`${n}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var _,x;if(!this._readyForTrueRender||this.destroyed)return null;const c=s()??r(),f=c.properties??(c.properties={});if(f.key??(f.key=n),w6(c.vnodeSelector)){if(!this.visible)return r()}else this.visible?f.styles||(f.styles={}):(f.class="",f.styles={display:"none"}),(_=f.styles).display??(_.display="");let y=0;return(x=c.children)==null||x.forEach(S=>{var P;w6(S.vnodeSelector)||(S.properties??(S.properties={}),(P=S.properties).key??(P.key=`${this.id}--${y++}`))}),Hue(this,c)};this.render=()=>{if(z8)return o();let c=kke(this)??null;if(c)return c;this._trackingTarget.clear(),z8=!0;try{c=nm(this._trackingTarget,o)}catch(f){throw qt.getLogger(this).error(f),f}finally{z8=!1}return c&&Dke(this,c),c};const l=this.beforeFirstRender();l?this._resourcesFetch=l.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),sDe(this._resourcesFetch)}normalizeCtorArgs(e,i){const n={...e};return i&&(n.container=i),n}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(NW):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(co(this._trackingTarget),co(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,L8(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return S7e(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+oDe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Yue=jue,Bue)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(L8(this),this._projector.scheduleRender())}own(e){xae(qt.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return Nke.apply(this,e)}renderNow(){L8(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(xi(()=>this.viewModel,(n,s)=>{s&&this.removeHandles("delegated-events"),n&&HM(n)&&this.addHandles(this._delegatedEventNames.map(r=>Xy(n,r,o=>{this.emit(r,o)})),"delegated-events")},ac)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(NW),this.scheduleRender()};this.addHandles([G6e(e),xi(()=>this.uiStrings,e),D0(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};io[Yue]=!0,io.vnodeSelector="div",I([O()],io.prototype,"_readyForTrueRender",void 0),I([O({value:null})],io.prototype,"container",null),I([Es("container")],io.prototype,"castContainer",null),I([O()],io.prototype,"icon",null),I([O()],io.prototype,"id",null),I([O()],io.prototype,"label",null),I([O()],io.prototype,"renderable",null),I([O()],io.prototype,"uiStrings",void 0),I([O()],io.prototype,"viewModel",void 0),I([O({value:!0})],io.prototype,"visible",null),I([O()],io.prototype,"key",void 0),I([O()],io.prototype,"children",void 0),I([O()],io.prototype,"afterCreate",void 0),I([O()],io.prototype,"afterUpdate",void 0),I([O()],io.prototype,"afterRemoved",void 0),io=I([De(rDe)],io);const Tx=io;function N0(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var lDe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},Wue=function(t,e){for(var i=0,n=t.length;i<n;i++){var s=t[i];Array.isArray(s)?Wue(s,e):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=lDe(s)),e.push(s))}},cDe=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var s=[];return Wue(i,s),{vnodeSelector:t,properties:e||void 0,children:s,text:void 0,domNode:null}};function Ot(t,e,...i){return typeof t!="function"||w6(t)?cDe(t,e,...i):t(e,...i)}function uDe(...t){return t}const Zue="calcite-mode-";function hDe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function dDe(){return hDe().startsWith("dark")}function Kue(){return`${Zue}${dDe()?"dark":"light"}`}function hft(t){fDe(t),t.classList.add(Kue())}function fDe(t){Array.from(t.classList).forEach(e=>{e.startsWith(Zue)&&t.classList.remove(e)})}const q8="esri-identity-modal",V8={base:q8,info:`${q8}__info`,notice:`${q8}__notice`},pDe="ArcGIS Online";let xc=class extends Tx{constructor(e,i){super(e,i),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return Px({button:()=>st(()=>import("./calcite-button-qjzyXLWO.js"),[],import.meta.url),dialog:()=>st(()=>Promise.resolve().then(()=>zEe),void 0,import.meta.url),input:()=>st(()=>import("./calcite-input-C4Pqrztb.js"),__vite__mapDeps([87,88,89,90,91,92]),import.meta.url),label:()=>st(()=>import("./calcite-label-DC_bq_bt.js"),[],import.meta.url),notice:()=>st(()=>Promise.resolve().then(()=>a5e),void 0,import.meta.url)})}get title(){var e;return(e=this.commonMessages)==null?void 0:e.auth.signIn}render(){var G;const{open:e,title:i,messages:n,signingIn:s,oAuthPrompt:r,server:o,resource:l,error:c}=this,{info:f,oAuthInfo:y,lblItem:_,invalidUser:x,noAuthService:S,lblUser:P,lblPwd:A,lblCancel:D,lblSigning:N,lblOk:F}=n;return Ot("div",{class:this.classes(V8.base,Kue())},Ot("form",{bind:this,onsubmit:this._submit},Ot("calcite-dialog",{bind:this,heading:i,modal:!0,open:e,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteDialogClose:this._cancel,onCalciteDialogOpen:this._focusUsernameInput},Ot("div",{class:V8.info},due(r?y:f,{server:o&&/\.arcgis\.com/i.test(o)?pDe:o,resource:`(${l||_})`})),c?Ot("calcite-notice",{class:V8.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},Ot("div",{slot:"message"},(G=c.details)!=null&&G.httpStatus?x:S)):null,r?null:[Ot("calcite-label",null,P,Ot("calcite-input",{afterCreate:V=>this._usernameInputNode=V,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),Ot("calcite-label",null,A,Ot("calcite-input",{afterCreate:V=>this._passwordInputNode=V,bind:this,name:"password",required:!0,type:"password",value:""}))],Ot("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"footer-end",type:"button"},D),Ot("calcite-button",{loading:!!s,slot:"footer-end",type:"submit"},s?N:F))))}_focusUsernameInput(){return $ue(()=>this._usernameInputNode)}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){var n,s;e.preventDefault(),this._set("signingIn",!0);const i=this.oAuthPrompt?{}:{username:(n=this._usernameInputNode)==null?void 0:n.value,password:(s=this._passwordInputNode)==null?void 0:s.value};this.emit("submit",i)}};I([O({readOnly:!0})],xc.prototype,"container",void 0),I([O(),N0("esri/t9n/common")],xc.prototype,"commonMessages",void 0),I([O()],xc.prototype,"error",void 0),I([O(),N0("esri/identity/t9n/identity")],xc.prototype,"messages",void 0),I([O()],xc.prototype,"oAuthPrompt",void 0),I([O()],xc.prototype,"open",void 0),I([O()],xc.prototype,"signingIn",void 0),I([O()],xc.prototype,"server",void 0),I([O({readOnly:!0})],xc.prototype,"title",null),I([O()],xc.prototype,"resource",void 0),xc=I([De("esri.identity.IdentityModal")],xc);const oK=xc,G8="esriJSAPIOAuth";let tR=class{constructor(e,i){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=i,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token)){if(this.expires==null&&this.refreshToken)e=!0;else if(this.expires){const i=Date.now();this.expires>i&&(this.expires-i)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}}return e}save(){if(!this.storage)return!1;const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.authNamespace&&i.portalUrl){let n=e[i.authNamespace];n||(n=e[i.authNamespace]={}),this.appId||(this.appId=i.appId),n[i.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(G8,JSON.stringify(e))}catch(s){return console.warn(s),!1}return!0}return!1}destroy(){const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.appId&&(i!=null&&i.portalUrl)&&(this.expires==null||this.expires>Date.now())&&(this.refreshToken||this.token)){const n=i.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",s=new FormData;if(s.append("f","json"),s.append("auth_token",this.refreshToken||this.token),s.append("client_id",i.appId),s.append("token_type_hint",this.refreshToken?"refresh_token":"access_token"),typeof navigator.sendBeacon=="function")navigator.sendBeacon(n,s);else{const r=new XMLHttpRequest;r.open("POST",n),r.send(s)}}if(i!=null&&i.authNamespace&&i.portalUrl&&this.storage){const n=e[i.authNamespace];if(n){delete n[i.portalUrl];try{this.storage.setItem(G8,JSON.stringify(e))}catch(s){console.log(s)}}}i&&(i._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.authNamespace&&i.portalUrl){let n=e[i.authNamespace];n&&(n=n[i.portalUrl],n&&(this.appId=n.appId,this.codeVerifier=n.codeVerifier,this.expires=n.expires,this.refreshToken=n.refreshToken,this.ssl=n.ssl,this.stateUID=n.stateUID,this.token=n.token,this.userId=n.userId))}}_load(){let e={};if(this.storage){const i=this.storage.getItem(G8);if(i)try{e=JSON.parse(i)}catch(n){console.warn(n)}}return e}};tR.prototype.declaredClass="esri.identity.OAuthCredential";var iR;let ca=iR=class extends St{constructor(t){super(t),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return iR.fromJSON(this.toJSON())}};I([O({json:{write:!0}})],ca.prototype,"appId",void 0),I([O({json:{write:!0}})],ca.prototype,"authNamespace",void 0),I([O({json:{write:!0}})],ca.prototype,"expiration",void 0),I([O({json:{write:!0}})],ca.prototype,"flowType",void 0),I([O({json:{write:!0}})],ca.prototype,"forceLogin",void 0),I([O({json:{write:!0}})],ca.prototype,"forceUserId",void 0),I([O({json:{write:!0}})],ca.prototype,"locale",void 0),I([O({json:{write:!0}})],ca.prototype,"minTimeUntilExpiration",void 0),I([O({json:{write:!0}})],ca.prototype,"popup",void 0),I([O({json:{write:!0}})],ca.prototype,"popupCallbackUrl",void 0),I([O({json:{write:!0}})],ca.prototype,"popupWindowFeatures",void 0),I([O({json:{write:!0}})],ca.prototype,"portalUrl",void 0),I([O({json:{write:!0}})],ca.prototype,"preserveUrlHash",void 0),I([O({json:{write:!0}})],ca.prototype,"userId",void 0),ca=iR=I([De("esri.identity.OAuthInfo")],ca);const aK=ca;let wc=class extends St{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};I([O({json:{write:!0}})],wc.prototype,"adminTokenServiceUrl",void 0),I([O({json:{write:!0}})],wc.prototype,"currentVersion",void 0),I([O({json:{write:!0}})],wc.prototype,"hasPortal",void 0),I([O({json:{write:!0}})],wc.prototype,"hasServer",void 0),I([O({json:{write:!0}})],wc.prototype,"owningSystemUrl",void 0),I([O({json:{write:!0}})],wc.prototype,"owningTenant",void 0),I([O({json:{write:!0}})],wc.prototype,"server",void 0),I([O({json:{write:!0}})],wc.prototype,"shortLivedTokenValidity",void 0),I([O({json:{write:!0}})],wc.prototype,"tokenServiceUrl",void 0),I([O({json:{write:!0}})],wc.prototype,"webTierAuth",void 0),wc=I([De("esri.identity.ServerInfo")],wc);const j8=wc,sI={},Jue=t=>{const e=new Ql(t.owningSystemUrl).host,i=new Ql(t.server).host,n=/.+\.arcgis\.com$/i;return n.test(e)&&n.test(i)},nR=(t,e)=>!!(Jue(t)&&e&&e.some(i=>i.test(t.server)));let rI=null,oI=null;try{rI=window.localStorage,oI=window.sessionStorage}catch{}let Que=class extends Ia{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=window.origin!=="null"?window.origin:window.location.origin,this._appUrlObj=wl(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^/]+\/[^/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^/]+).*/i,this._gwItem=/http.+\/items\/([^/]+).*/i,this._gwGroup=/http.+\/groups\/([^/]+).*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getPlatformSelfError=null,this._getOAuthLocationParams(),window.addEventListener("pageshow",e=>{this._pageShowHandler(e)})}registerServers(e){const i=this.serverInfos;i?(e=e.filter(n=>!this.findServerInfo(n.server)),this.serverInfos=i.concat(e)):this.serverInfos=e,e.forEach(n=>{n.owningSystemUrl&&this._portals.push(n.owningSystemUrl),n.hasPortal&&this._portals.push(n.server)})}registerOAuthInfos(e){const i=this.oAuthInfos;if(i){for(const n of e){const s=this.findOAuthInfo(n.portalUrl);s&&i.splice(i.indexOf(s),1)}this.oAuthInfos=i.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const i=this._sanitizeUrl(e.server),n=this._isServerRsrc(i);let s,r=this.findServerInfo(i),o=!0;r||(r=new j8,r.server=this._getServerInstanceRoot(i),n?r.hasServer=!0:(r.tokenServiceUrl=this._getTokenSvcUrl(i),r.hasPortal=!0),this.registerServers([r])),s=this._findCredential(i),s?(delete e.server,Object.assign(s,e),o=!1):(s=new Ys({userId:e.userId,server:r.server??void 0,token:e.token,expires:e.expires,ssl:e.ssl,scope:n?"server":"portal"}),s.resources=[i],this.credentials.push(s)),s.emitTokenChange(!1),o||s.refreshServerTokens()}toJSON(){return iV({serverInfos:this.serverInfos.map(e=>e.toJSON()),oAuthInfos:this.oAuthInfos.map(e=>e.toJSON()),credentials:this.credentials.map(e=>e.toJSON())})}initialize(e){if(!e)return;typeof e=="string"&&(e=JSON.parse(e));const i=e.serverInfos,n=e.oAuthInfos,s=e.credentials;if(i){const r=[];i.forEach(o=>{o.server&&o.tokenServiceUrl&&r.push(o.declaredClass?o:new j8(o))}),r.length&&this.registerServers(r)}if(n){const r=[];n.forEach(o=>{o.appId&&r.push(o.declaredClass?o:new aK(o))}),r.length&&this.registerOAuthInfos(r)}s&&s.forEach(r=>{r.server&&r.token&&r.expires&&r.expires>Date.now()&&((r=r.declaredClass?r:new Ys(r)).emitTokenChange(),this.credentials.push(r))})}findServerInfo(e){let i;e=this._sanitizeUrl(e);for(const n of this.serverInfos)if(this._hasSameServerInstance(n.server,e)){i=n;break}return i}findOAuthInfo(e){let i;e=this._sanitizeUrl(e);for(const n of this.oAuthInfos)if(this._hasSameServerInstance(n.portalUrl,e)){i=n;break}return i}findCredential(e,i){if(!e)return;let n;e=this._sanitizeUrl(e);const s=this._isServerRsrc(e)?"server":"portal";if(i){for(const r of this.credentials)if(this._hasSameServerInstance(r.server,e)&&i===r.userId&&r.scope===s){n=r;break}}else for(const r of this.credentials)if(this._hasSameServerInstance(r.server,e)&&this._getIdenticalSvcIdx(e,r)!==-1&&r.scope===s){n=r;break}return n}getCredential(e,i){let n,s,r=!0;i&&(n=!!i.token,s=i.error,r=i.prompt!==!1),i={...i},e=this._sanitizeUrl(e);const o=new AbortController,l=Oc();if(i.signal&&Jl(i.signal,()=>{o.abort()}),Jl(o,()=>{l.reject(new rt("identity-manager:user-aborted","ABORTED"))}),jc(o))return l.promise;i.signal=o.signal;const c=this._isAdminResource(e),f=n?this.findCredential(e):null;let y;if(f&&s&&s.details&&s.details.httpStatus===498)f.destroy();else if(f)return y=new rt("identity-manager:not-authorized","You are currently signed in as: '"+f.userId+"'. You do not have access to this resource: "+e,{error:s}),l.reject(y),l.promise;const _=this._findCredential(e,i);if(_)return l.resolve(_),l.promise;let x=this.findServerInfo(e);if(x)!x.hasPortal&&x.server&&x.owningSystemUrl&&this._hasSameServerInstance(x.server,x.owningSystemUrl)&&(x.hasPortal=!0),!x.hasServer&&this._isServerRsrc(e)&&(x._restInfoPms=this._getTokenSvcUrl(e),x.hasServer=!0);else{const S=this._getTokenSvcUrl(e);if(!S)return y=new rt("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),l.reject(y),l.promise;x=new j8,x.server=this._getServerInstanceRoot(e),typeof S=="string"?(x.tokenServiceUrl=S,x.hasPortal=!0):(x._restInfoPms=S,x.hasServer=!0),this.registerServers([x])}return x.hasPortal&&x._selfReq===void 0&&(r||Yl(x.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(S=>S.tokenServiceUrl===x.tokenServiceUrl))&&(x._selfReq={owningTenant:i==null?void 0:i.owningTenant,selfDfd:this._getPortalSelf(x.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,x,i,l,c)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,i,n){const s=this._rePortalTokenSvc.test(e.tokenServiceUrl),r=new Ql(this._appOrigin),o=e.shortLivedTokenValidity;let l,c,f,y,_,x,S,P;i&&(P=this.tokenValidity||o||this._defaultTokenValidity,P>o&&o>0&&(P=o)),n&&(l=n.isAdmin,c=n.serverUrl,f=n.token,x=n.signal,S=n.ssl,e.customParameters=n.customParameters),l?y=e.adminTokenServiceUrl:(y=e.tokenServiceUrl,_=new Ql(y.toLowerCase()),e.webTierAuth&&(n!=null&&n.serverUrl)&&!S&&r.scheme==="http"&&(Yl(r.uri,y,!0)||_.scheme==="https"&&r.host===_.host&&r.port==="7080"&&_.port==="7443")&&(y=y.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const A={query:{request:"getToken",username:i==null?void 0:i.username,password:i==null?void 0:i.password,serverUrl:c,token:f,expiration:P,referer:l||s?this._appOrigin:null,client:l?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,n),signal:x,...n==null?void 0:n.ioArgs};return s||(A.withCredentials=!1),es(y,A).then(D=>{const N=D.data;if(!(N!=null&&N.token))return new rt("identity-manager:authentication-failed","Unable to generate token");const F=e.server;return sI[F]||(sI[F]={}),i&&(sI[F][i.username]=i.password),N.validity=P,N})}isBusy(){return!!this._busy}async checkSignInStatus(e){return(await this.checkAppAccess(e,"")).credential}checkAppAccess(e,i,n){let s=!1;return this.getCredential(e,{prompt:!1}).then(r=>{let o;const l={f:"json"};if(r.scope==="portal")if(i&&(this._doPortalSignIn(e)||n!=null&&n.force))o=r.server+"/sharing/rest/oauth2/validateAppAccess",l.client_id=i;else{if(!r.token)return{credential:r};o=r.server+"/sharing/rest"}else{if(!r.token)return{credential:r};o=r.server+"/rest/services"}return r.token&&(l.token=r.token),es(o,{query:l,authMode:"anonymous"}).then(c=>{if(c.data.valid===!1)throw new rt("identity-manager:not-authorized",`You are currently signed in as: '${r.userId}'.`,c.data);return s=!!c.data.viewOnlyUserTypeApp,{credential:r}}).catch(c=>{var y;if(c.name==="identity-manager:not-authorized")throw c;const f=(y=c.details)==null?void 0:y.httpStatus;if(f===498)throw r.destroy(),new rt("identity-manager:not-authenticated","User is not signed in.");if(f===400)throw new rt("identity-manager:invalid-request");return{credential:r}})}).then(r=>({credential:r.credential,viewOnly:s}))}setOAuthResponseHash(e){e&&(e.charAt(0)==="#"&&(e=e.slice(1)),this._processOAuthPopupParams($y(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,i,n={}){const s=Oc(),r=()=>{var y;c==null||c.remove(),f==null||f.remove(),(y=this.dialog)==null||y.destroy(),this.dialog=c=f=null},o=()=>{r(),this._oAuthDfd=null,s.reject(new rt("identity-manager:user-aborted","ABORTED"))};n.signal&&Jl(n.signal,()=>{o()});const l=new oK({open:!0,resource:this.getResourceName(e),server:i.server});this.dialog=l,this.emit("dialog-create");let c=l.on("cancel",o),f=l.on("submit",y=>{this.generateToken(i,y,{isAdmin:n.isAdmin,signal:n.signal}).then(_=>{r();const x=new Ys({userId:y.username,server:i.server??void 0,token:_.token,expires:_.expires!=null?Number(_.expires):null,ssl:!!_.ssl,isAdmin:n.isAdmin,validity:_.validity});s.resolve(x)}).catch(_=>{l.error=_,l.signingIn=!1})});return s.promise}oAuthSignIn(e,i,n,s){this._oAuthDfd=Oc();const r=this._oAuthDfd;let o;s!=null&&s.signal&&Jl(s.signal,()=>{const x=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;x&&!x.closed?x.close():this.dialog&&y()}),r.resUrl_=e,r.sinfo_=i,r.oinfo_=n;const l=n._oAuthCred;if(l.storage&&(n.flowType==="authorization-code"||n.flowType==="auto"&&i.currentVersion>=8.4)){let x=crypto.getRandomValues(new Uint8Array(32));o=_8(x),l.codeVerifier=o,x=crypto.getRandomValues(new Uint8Array(32)),l.stateUID=_8(x),l.save()||(l.codeVerifier=o=null)}else l.codeVerifier=null;let c,f;this._getCodeChallenge(o).then(x=>{const S=!s||s.oAuthPopupConfirmation!==!1;if(!n.popup||!S)return void this._doOAuthSignIn(e,i,n,x);const P=new oK({oAuthPrompt:!0,server:i.server,open:!0});this.dialog=P,this.emit("dialog-create"),c=P.on("cancel",y),f=P.on("submit",()=>{_(),this._doOAuthSignIn(e,i,n,x)})});const y=()=>{_(),this._oAuthDfd=null,r.reject(new rt("identity-manager:user-aborted","ABORTED"))},_=()=>{var x;c==null||c.remove(),f==null||f.remove(),(x=this.dialog)==null||x.destroy(),this.dialog=null};return r.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach(e=>{e.destroy()}),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=Xy(window,"message",i=>{var n;if((i.origin===this._appOrigin||i.origin.endsWith(".arcgis.com"))&&((n=i.data)==null?void 0:n.type)==="arcgis:auth:requestCredential"){const s=i.source;this.getCredential(e).then(r=>{s.postMessage({type:"arcgis:auth:credential",credential:{expires:r.expires,server:r.server,ssl:r.ssl,token:r.token,userId:r.userId}},i.origin)}).catch(r=>{s.postMessage({type:"arcgis:auth:error",error:{name:r.name,message:r.message}},i.origin)})}})}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){var n,s;let e=window.location.hash;if(e){e.charAt(0)==="#"&&(e=e.slice(1));const r=$y(e);let o=!1;if(r.access_token&&r.expires_in&&r.state&&r.hasOwnProperty("username"))try{r.state=JSON.parse(r.state),r.state.portalUrl&&(this._oAuthLocationParams=r,o=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(o=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}o&&(window.location.hash=((n=r.state)==null?void 0:n.hash)||"")}let i=window.location.search;if(i){i.charAt(0)==="?"&&(i=i.slice(1));const r=$y(i);let o=!1;if(r.code&&r.state)try{r.state=JSON.parse(r.state),r.state.portalUrl&&r.state.uid&&(this._oAuthLocationParams=r,o=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(o=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}if(o){const l={...r};["code","error","error_description","message_code","persist","state"].forEach(y=>{delete l[y]});const c=av(l),f=window.location.pathname+(c?`?${c}`:"")+(((s=r.state)==null?void 0:s.hash)||"");window.history.replaceState(window.history.state,"",f)}}}_getOAuthToken(e,i,n,s,r){return e=e.replace(/^http:/i,"https:"),es(`${e}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:s&&r?{grant_type:"authorization_code",code:i,redirect_uri:s,client_id:n,code_verifier:r}:{grant_type:"refresh_token",refresh_token:i,client_id:n}}).then(o=>o.data)}async _getCodeChallenge(e){if(e&&globalThis.isSecureContext){const i=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",i);return _8(new Uint8Array(n))}return null}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const i=new rt("identity-manager:user-aborted","ABORTED");this._errbackFunc(i)}}_findCredential(e,i){let n,s,r,o,l=-1;const c=i==null?void 0:i.token,f=i==null?void 0:i.resource,y=this._isServerRsrc(e)?"server":"portal",_=this.credentials.filter(x=>this._hasSameServerInstance(x.server,e)&&x.scope===y);if(e=f||e,_.length)if(_.length===1){if(n=_[0],r=this.findServerInfo(n.server),s=r==null?void 0:r.owningSystemUrl,o=s?this.findCredential(s,n.userId):void 0,l=this._getIdenticalSvcIdx(e,n),!c)return l===-1&&n.resources.push(e),this._addResource(e,o),n;l!==-1&&(n.resources.splice(l,1),this._removeResource(e,o))}else{let x,S;if(_.some(P=>(S=this._getIdenticalSvcIdx(e,P),S!==-1&&(x=P,r=this.findServerInfo(x.server),s=r==null?void 0:r.owningSystemUrl,o=s?this.findCredential(s,x.userId):void 0,l=S,!0))),c)x&&(x.resources.splice(l,1),this._removeResource(e,o));else if(x)return this._addResource(e,o),x}}_findOAuthInfo(e){let i=this.findOAuthInfo(e);if(!i){for(const n of this.oAuthInfos)if(this._isIdProvider(n.portalUrl,e)){i=n;break}}return i}_addResource(e,i){i&&this._getIdenticalSvcIdx(e,i)===-1&&i.resources.push(e)}_removeResource(e,i){let n=-1;i&&(n=this._getIdenticalSvcIdx(e,i),n>-1&&i.resources.splice(n,1))}_useProxy(e,i){return(i==null?void 0:i.isAdmin)&&!Yl(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&String(e.currentVersion)==="10.1"&&!Yl(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const i=new Ql(e);return i.scheme+"://"+i.host+(i.port!=null?":"+i.port:"")}_getServerInstanceRoot(e){const i=e.toLowerCase();let n=i.indexOf(this._agsRest);return n===-1&&this._isAdminResource(e)&&(n=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),n!==-1||mle(i)||(n=i.indexOf("/sharing")),n===-1&&i.endsWith("/")&&(n=i.length-1),n>-1?e.slice(0,n):e}_hasSameServerInstance(e,i){return e.endsWith("/")&&(e=e.slice(0,-1)),e=e.toLowerCase(),i=this._getServerInstanceRoot(i).toLowerCase(),e=e6(e),i=e6(i),(e=e.slice(Math.max(0,e.indexOf(":"))))===(i=i.slice(Math.max(0,i.indexOf(":"))))}_sanitizeUrl(e){const i=(jn.request.proxyUrl||"").toLowerCase(),n=i?e.toLowerCase().indexOf(i+"?"):-1;return n!==-1&&(e=e.slice(n+i.length+1)),e=Hu(e),wl(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,i){let n=!1;if(this._isRESTService(e)&&this._isRESTService(i)){const s=this._getSuffix(e).toLowerCase(),r=this._getSuffix(i).toLowerCase();if(n=s===r,!n){const o=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;n=s.replaceAll(o,"$1")===r.replaceAll(o,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(i)?n=!0:this._isServerRsrc(e)||this._isServerRsrc(i)||!this._isPortalDomain(e)||(n=!0);return n}_isPortalDomain(e){const i=new Ql(e.toLowerCase()),n=this._portalConfig;let s=this._gwDomains.some(r=>r.regex.test(i.uri));return!s&&n&&(s=this._hasSameServerInstance(this._getServerInstanceRoot(n.restBaseUrl),i.uri)),s||jn.portalUrl&&(s=Yl(i,jn.portalUrl,!0)),s||(s=this._portals.some(r=>this._hasSameServerInstance(r,i.uri))),s=s||this._agsPortal.test(i.path),s}_isIdProvider(e,i){let n=-1,s=-1;this._gwDomains.forEach((o,l)=>{n===-1&&o.regex.test(e)&&(n=l),s===-1&&o.regex.test(i)&&(s=l)});let r=!1;if(n>-1&&s>-1&&(n===0||n===4?s!==0&&s!==4||(r=!0):n===1?s!==1&&s!==2||(r=!0):n===2?s===2&&(r=!0):n===3&&s===3&&(r=!0)),!r){const o=this.findServerInfo(i),l=o==null?void 0:o.owningSystemUrl;l&&Jue(o)&&this._isPortalDomain(l)&&this._isIdProvider(e,l)&&(r=!0)}return r}_getIdenticalSvcIdx(e,i){let n=-1;for(let s=0;s<i.resources.length;s++){const r=i.resources[s];if(this._isIdenticalService(e,r)){n=s;break}}return n}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let i,n,s;if(this._isRESTService(e)||this._isAdminResource(e)){const r=this._getServerInstanceRoot(e);return i=r+"/admin/generateToken",n=es(e=r+"/rest/info",{query:{f:"json"}}).then(o=>o.data),{adminUrl:i,promise:n}}if(this._isPortalDomain(e)){let r="";if(this._gwDomains.some(o=>(o.regex.test(e)&&(r=o.tokenServiceUrl),!!r)),r||this._portals.some(o=>(this._hasSameServerInstance(o,e)&&(r=o+this._gwTokenUrl),!!r)),r||(s=e.toLowerCase().indexOf("/sharing"),s!==-1&&(r=e.slice(0,s)+this._gwTokenUrl)),r||(r=this._getOrigin(e)+this._gwTokenUrl),r){const o=new Ql(e).port;/^http:\/\//i.test(e)&&o==="7080"&&(r=r.replace(/:7080/i,":7443")),r=r.replace(/http:/i,"https:")}return r}}_processOAuthResponseParams(e,i,n){const s=i._oAuthCred;if(e.code){const o=s.codeVerifier;return s.codeVerifier=null,s.stateUID=null,s.save(),this._getOAuthToken(n.server,e.code,i.appId,this._getRedirectURI(i,!0),o).then(l=>{const c=new Ys({userId:l.username,server:n.server??void 0,token:l.access_token,expires:Date.now()+1e3*l.expires_in,ssl:l.ssl,oAuthState:e.state,_oAuthCred:s});return i.userId=c.userId,s.storage=l.persist?rI:oI,s.refreshToken=l.refresh_token,s.token=null,s.expires=l.refresh_token_expires_in?Date.now()+1e3*l.refresh_token_expires_in:null,s.userId=c.userId,s.ssl=c.ssl,s.save(),c})}const r=new Ys({userId:e.username,server:n.server??void 0,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:e.ssl==="true",oAuthState:e.state,_oAuthCred:s});return i.userId=r.userId,s.storage=e.persist?rI:oI,s.refreshToken=null,s.token=r.token,s.expires=r.expires,s.userId=r.userId,s.ssl=r.ssl,s.save(),Promise.resolve(r)}_processOAuthPopupParams(e){var n;const i=this._oAuthDfd;if(this._oAuthDfd=null,i)if(clearInterval(this._oAuthIntervalId),(n=this._oAuthOnPopupHandle)==null||n.remove(),e.error){const s=e.error==="access_denied",r=new rt(s?"identity-manager:user-aborted":"identity-manager:authentication-failed",s?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);i.reject(r)}else this._processOAuthResponseParams(e,i.oinfo_,i.sinfo_).then(s=>{i.resolve(s)}).catch(s=>{i.reject(s)})}_setOAuthResponseQueryString(e){e&&(e.charAt(0)==="?"&&(e=e.slice(1)),this._processOAuthPopupParams($y(e)))}async _exchangeToken(e,i,n){return(await es(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:i,token:n}})).data.token}async _getPlatformSelf(e,i){var n;if(this._getPlatformSelfError&&Date.now()-this._getPlatformSelfError[1]<1e3)throw this._getPlatformSelfError[0];e=e.replace(/^http:/i,"https:");try{const s=await es(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0});return this._getPlatformSelfError=null,s.data}catch(s){throw((n=s.details)==null?void 0:n.messageCode)==="OAUTH_0066"&&(this._getPlatformSelfError=[s,Date.now()]),s}}_getPortalSelf(e,i){let n;return this._gwDomains.some(s=>(s.regex.test(e)&&(n=s.customBaseUrl),!!n)),n?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:n,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(i)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),es(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(s=>s.data))}_doPortalSignIn(e){const i=this._portalConfig,n=window.location.href,s=this.findServerInfo(e);return!(!i&&!this._isPortalDomain(n)||!(s?s.hasPortal||s.owningSystemUrl&&this._isPortalDomain(s.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(n,e)||i&&(this._hasSameServerInstance(this._getServerInstanceRoot(i.restBaseUrl),e)||this._isIdProvider(i.restBaseUrl,e))||Yl(n,e,!0)))}_checkProtocol(e,i,n,s){let r=!0;const o=s?i.adminTokenServiceUrl:i.tokenServiceUrl;return o.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&VC(o)&&(r=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:i}),!r)&&n(new rt("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),r}_enqueue(e,i,n,s,r,o){return s||(s=Oc()),s.resUrl_=e,s.sinfo_=i,s.options_=n,s.admin_=r,s.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const i=f=>{var D;const y=(D=e.options_)==null?void 0:D.resource,_=e.resUrl_,x=e.refresh_;let S=!1;this.credentials.includes(f)||(x&&this.credentials.includes(x)?(x.userId=f.userId,x.token=f.token,x.expires=f.expires,x.validity=f.validity,x.ssl=f.ssl,x.creationTime=f.creationTime,S=!0,f=x):this.credentials.push(f)),f.resources||(f.resources=[]),f.resources.includes(y||_)||f.resources.push(y||_),f.scope=this._isServerRsrc(_)?"server":"portal",f.emitTokenChange();const P=this._soReqs,A={};this._soReqs=[],P.forEach(N=>{if(!this._isIdenticalService(_,N.resUrl_)){const F=this._getSuffix(N.resUrl_);A[F]||(A[F]=!0,f.resources.push(N.resUrl_))}}),e.resolve(f),P.forEach(N=>{this._hasSameServerInstance(this._getServerInstanceRoot(_),N.resUrl_)?N.resolve(f):this._soReqs.push(N)}),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,S||this.emit("credential-create",{credential:f}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},n=f=>{e.reject(f),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(f,y,_,x)=>{var F,G,V;const S=e.sinfo_,P=!e.options_||e.options_.prompt!==!1,A=S.hasPortal&&this._findOAuthInfo(e.resUrl_);let D,N;if(f)i(new Ys({userId:f,server:S.server??void 0,token:_??void 0,expires:x!=null?Number(x):null,ssl:!!y}));else if(window!==window.parent&&((F=this._appUrlObj.query)!=null&&F["arcgis-auth-origin"])&&((G=this._appUrlObj.query)!=null&&G["arcgis-auth-portal"])&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const B=Xy(window,"message",W=>{W.source===window.parent&&W.data&&(W.data.type==="arcgis:auth:credential"?(B.remove(),W.data.credential.expires<Date.now()?n(new rt("identity-manager:credential-request-failed","Parent application's token has expired.")):i(new Ys(W.data.credential))):W.data.type==="arcgis:auth:error"&&(B.remove(),W.data.error.name==="tokenExpiredError"?n(new rt("identity-manager:credential-request-failed","Parent application's token has expired.")):n(rt.fromJSON(W.data.error))))});Jl((V=e.options_)==null?void 0:V.signal,()=>{B.remove()})}else if(A){let B=A._oAuthCred;if(!B){const W=new tR(A,rI),J=new tR(A,oI);W.isValid()&&J.isValid()?W.expires>J.expires?(B=W,J.destroy()):(B=J,W.destroy()):B=W.isValid()?W:J,A._oAuthCred=B}if(B.isValid()){D=new Ys({userId:B.userId??void 0,server:S.server??void 0,token:B.token??void 0,expires:B.expires,ssl:B.ssl??void 0,_oAuthCred:B});const W=A.appId!==B.appId&&this._doPortalSignIn(e.resUrl_);W||B.refreshToken?(e._pendingDfd=B.refreshToken?this._getOAuthToken(S.server,B.refreshToken,B.appId).then(J=>(D.expires=Date.now()+1e3*J.expires_in,D.token=J.access_token,D)):Promise.resolve(D),e._pendingDfd.then(J=>W?this._exchangeToken(J.server,A.appId,J.token).then(re=>(J.token=re,J)).catch(()=>J):J).then(J=>{i(J)}).catch(J=>{var ne;const re=(ne=J.details)==null?void 0:ne.httpStatus;re>0&&re!==404?(B.destroy(),s()):n(J)})):i(D)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(A.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===B.stateUID&&B.codeVerifier)){const W=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(W,A,S).then(J=>{i(J)}).catch(n)}else{const W=()=>{P?e._pendingDfd=this.oAuthSignIn(e.resUrl_,S,A,e.options_).then(i,n):(N=new rt("identity-manager:not-authenticated","User is not signed in."),n(N))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(S.server,A.appId).then(J=>{Yl(J.portalUrl,this._appOrigin,!0)?(D=new Ys({userId:J.username,server:S.server??void 0,expires:Date.now()+1e3*J.expires_in,token:J.token}),i(D)):W()}).catch(W):W()}}else if(P){if(this._checkProtocol(e.resUrl_,S,n,e.admin_)){let B=e.options_;e.admin_&&(B=B||{},B.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,S,B).then(i,n)}}else N=new rt("identity-manager:not-authenticated","User is not signed in."),n(N)},r=()=>{const f=e.sinfo_,y=f.owningSystemUrl,_=e.options_;let x,S,P,A;if(_&&(x=_.token,S=_.error,P=_.prompt),A=this._findCredential(y,{token:x,resource:e.resUrl_}),!A){for(const D of this.credentials)if(this._isIdProvider(y,D.server)){A=D;break}}if(A){const D=this.findCredential(e.resUrl_,A.userId);if(D)i(D);else if(nR(f,this._legacyFed)){const N=A.toJSON();N.server=f.server,N.resources=null,i(new Ys(N))}else(e._pendingDfd=this.generateToken(this.findServerInfo(A.server),null,{serverUrl:e.resUrl_,token:A.token,signal:e.options_.signal,ssl:A.ssl})).then(N=>{i(new Ys({userId:A==null?void 0:A.userId,server:f.server??void 0,token:N.token,expires:N.expires!=null?Number(N.expires):null,ssl:!!N.ssl,isAdmin:e.admin_,validity:N.validity}))},n)}else this._busy=null,x&&(e.options_.token=null),(e._pendingDfd=this.getCredential(y.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:f.owningTenant,signal:e.options_.signal,token:x,error:S,prompt:P})).then(()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)},D=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(D)})};this._errbackFunc=n;const o=e.sinfo_.owningSystemUrl,l=this._isServerRsrc(e.resUrl_),c=e.sinfo_._restInfoPms;c?c.promise.then(f=>{const y=e.sinfo_;if(y._restInfoPms){y.adminTokenServiceUrl=y._restInfoPms.adminUrl,y._restInfoPms=null,y.tokenServiceUrl=(Yp("authInfo.tokenServicesUrl",f)||Yp("authInfo.tokenServiceUrl",f)||Yp("tokenServiceUrl",f))??null,y.shortLivedTokenValidity=Yp("authInfo.shortLivedTokenValidity",f)??null,y.currentVersion=f.currentVersion,y.owningTenant=f.owningTenant;const _=y.owningSystemUrl=f.owningSystemUrl;_&&this._portals.push(_)}l&&y.owningSystemUrl?r():s()},()=>{e.sinfo_._restInfoPms=null;const f=new rt("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");n(f)}):l&&o?r():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then(f=>{var A;const y={};let _,x,S,P;return f&&(_=(A=f.user)==null?void 0:A.username,y.username=_,y.allSSL=f.allSSL,x=f.supportsOAuth,P=parseFloat(f.currentVersion),f.portalMode==="multitenant"&&(S=f.customBaseUrl),e.sinfo_.currentVersion=P),e.sinfo_.webTierAuth=!!_,_&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:y.allSSL}).catch(()=>null).then(D=>(y.portalToken=D==null?void 0:D.token,y.tokenExpiration=D==null?void 0:D.expires,y)):!_&&x&&P>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:S,owningTenant:e.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>y):y}).catch(()=>null).then(f=>{e.sinfo_._selfReq=null,f?s(f.username,f.allSSL,f.portalToken,f.tokenExpiration):s()}):s()}_generateOAuthInfo(e){let i,n=null,s=e.portalUrl;const r=e.customBaseUrl,o=e.owningTenant,l=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(l){n=window.location.href;let c=n.indexOf("?");c>-1&&(n=n.slice(0,c)),c=n.search(/\/(apps|home)\//),n=c>-1?n.slice(0,c):null}return l&&n?(this._hasTestedIfAppIsOnPortal=!0,i=es(n+"/sharing/rest",{query:{f:"json"}}).then(()=>{this._defaultOAuthInfo=new aK({appId:"arcgisonline",popupCallbackUrl:n+"/home/oauth-callback.html"})})):i=Promise.resolve(),i.then(()=>{if(this._defaultOAuthInfo)return s=s.replace(/^http:/i,"https:"),es(s+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:o,client_id:this._defaultOAuthInfo.appId,redirect_uri:_l(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(c=>{if(c.data.valid){const f=this._defaultOAuthInfo.clone();c.data.urlKey&&r?f.portalUrl="https://"+c.data.urlKey.toLowerCase()+"."+r:f.portalUrl=s,f.popup=window!==window.top||!(Yl(s,this._appOrigin)||this._gwDomains.some(y=>y.regex.test(s)&&y.regex.test(this._appOrigin))),this.oAuthInfos.push(f)}})})}_doOAuthSignIn(e,i,n,s){const r=n._oAuthCred,o={portalUrl:n.portalUrl};!n.popup&&n.preserveUrlHash&&window.location.hash&&(o.hash=window.location.hash),r.stateUID&&(o.uid=r.stateUID);const l={client_id:n.appId,response_type:r.codeVerifier?"code":"token",state:JSON.stringify(o),expiration:n.expiration,locale:n.locale,redirect_uri:this._getRedirectURI(n,!!r.codeVerifier)};n.forceLogin&&(l.force_login=!0),n.forceUserId&&n.userId&&(l.prepopulatedusername=n.userId),!n.popup&&this._doPortalSignIn(e)&&(l.redirectToUserOrgUrl=!0),r.codeVerifier&&(l.code_challenge=s||r.codeVerifier,l.code_challenge_method=s?"S256":"plain");const c=n.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",f=c+"?"+av(l);if(n.popup){const y=window.open(f,"esriJSAPIOAuth",n.popupWindowFeatures);if(y)y.focus(),this._oAuthDfd.oAuthWin_=y,this._oAuthIntervalId=setInterval(()=>{if(y.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const _=this._oAuthDfd;if(_){const x=new rt("identity-manager:user-aborted","ABORTED");_.reject(x)}}},500),this._oAuthOnPopupHandle=Xy(window,["arcgis:auth:hash","arcgis:auth:location:search"],_=>{_.type==="arcgis:auth:hash"?this.setOAuthResponseHash(_.detail):this._setOAuthResponseQueryString(_.detail)});else{const _=new rt("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(_)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:l,authorizeUrl:c,resourceUrl:e,serverInfo:i,oAuthInfo:n}):window.location.href=f}_getRedirectURI(e,i){const n=window.location.href.replace(/#.*$/,"");if(e.popup)return _l(e.popupCallbackUrl);if(i){const s=wl(n);return s.query&&["code","error","error_description","message_code","persist","state"].forEach(r=>{delete s.query[r]}),BT(s.path,s.query)}return n}};Que.prototype.declaredClass="esri.identity.IdentityManagerBase";let Ys=class extends Ia.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e!=null&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],this.creationTime==null&&(this.creationTime=Date.now())}refreshToken(){const e=Li,i=e.findServerInfo(this.server),n=i==null?void 0:i.owningSystemUrl,s=!!n&&this.scope==="server",r=s&&nR(i,e._legacyFed),o=i.webTierAuth,l=o&&e.normalizeWebTierAuth,c=sI[this.server],f=c==null?void 0:c[this.userId];let y,_=this.resources&&this.resources[0],x=s?e.findServerInfo(n):null,S={username:this.userId,password:f};if(o&&!l)return;s&&!x&&e.serverInfos.some(A=>(e._isIdProvider(n,A.server)&&(x=A),!!x));const P=x?e.findCredential(x.server,this.userId):null;if(!s||P){if(!r){if(s)y={serverUrl:_,token:P==null?void 0:P.token,ssl:P==null?void 0:P.ssl};else if(l)S=null,y={ssl:this.ssl};else{if(!f){let A;return _&&(_=e._sanitizeUrl(_),this._enqueued=1,A=e._enqueue(_,i,null,null,this.isAdmin,this),A.then(()=>{this._enqueued=0,this.refreshServerTokens()}).catch(()=>{this._enqueued=0})),A}this.isAdmin&&(y={isAdmin:!0})}return e.generateToken(s?x:i,s?null:S,y).then(A=>{this.token=A.token,this.expires=A.expires!=null?Number(A.expires):null,this.creationTime=Date.now(),this.validity=A.validity,this.emitTokenChange(),this.refreshServerTokens()}).catch(()=>{})}P==null||P.refreshToken()}}refreshServerTokens(){if(this.scope==="portal"){const e=Li;e.credentials.forEach(i=>{const n=e.findServerInfo(i.server),s=n==null?void 0:n.owningSystemUrl;i!==this&&i.userId===this.userId&&s&&i.scope==="server"&&(e._hasSameServerInstance(this.server,s)||e._isIdProvider(s,this.server))&&(nR(n,e._legacyFed)?(i.token=this.token,i.expires=this.expires,i.creationTime=this.creationTime,i.validity=this.validity,i.emitTokenChange()):i.refreshToken())})}}emitTokenChange(e){clearTimeout(this._refreshTimer);const i=Li,n=this.server?i.findServerInfo(this.server):null,s=n==null?void 0:n.owningSystemUrl,r=s?i.findServerInfo(s):null;e===!1||s&&this.scope!=="portal"&&(!(r!=null&&r.webTierAuth)||i.normalizeWebTierAuth)||this.expires==null&&this.validity==null||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=Li,i=e.credentials.indexOf(this);i>-1&&e.credentials.splice(i,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=iV({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),i=this.resources;return i&&i.length>0&&(e.resources=i.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,i=2**31-1;let n=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();n<0?n=0:n>i&&(n=i),this._refreshTimer=setTimeout(this.refreshToken.bind(this),n>e?n-e:n)}};I([O()],Ys.prototype,"creationTime",void 0),I([O()],Ys.prototype,"expires",void 0),I([O()],Ys.prototype,"isAdmin",void 0),I([O()],Ys.prototype,"oAuthState",void 0),I([O()],Ys.prototype,"resources",void 0),I([O()],Ys.prototype,"scope",void 0),I([O()],Ys.prototype,"server",void 0),I([O()],Ys.prototype,"ssl",void 0),I([O()],Ys.prototype,"token",void 0),I([O()],Ys.prototype,"tokenRefreshBuffer",void 0),I([O()],Ys.prototype,"userId",void 0),I([O()],Ys.prototype,"validity",void 0),Ys=I([De("esri.identity.Credential")],Ys);let ehe=class extends Que{};ehe.prototype.declaredClass="esri.identity.IdentityManager";const tG=new ehe;b9e(tG);const mDe=Object.freeze(Object.defineProperty({__proto__:null,default:tG},Symbol.toStringTag,{value:"Module"}));let ob=class extends ci{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(cV(()=>this._refresh(),om))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const n of e)n!=null&&(i=this._processCollection(i,n));this.splice(i,this.length)}_createNewInstance(e){return new ci(e)}_processCollection(e,i){if(!i)return e;const n=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(n(s)){const r=this.indexOf(s,e);r>=0?r!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const r=this.getChildrenFunction(s);if(Array.isArray(r))for(const o of r)e=this._processCollection(e,o);else e=this._processCollection(e,r)}}return e}};I([O()],ob.prototype,"getCollections",void 0),I([O()],ob.prototype,"getChildrenFunction",void 0),I([O()],ob.prototype,"itemFilterFunction",void 0),ob=I([De("esri.core.CollectionFlattener")],ob);const the=ob;async function gDe(t,e){return await t.load(),yDe(t,e)}async function yDe(t,e){const i=[],n=(...r)=>{for(const o of r)o!=null&&(Array.isArray(o)?n(...o):ci.isCollection(o)?o.forEach(l=>n(l)):GC.isLoadable(o)&&i.push(o))};e(n);let s=null;if(await E7e(i,async r=>{const o=await YV(vDe(r)?r.loadAll():r.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return t}function vDe(t){return"loadAll"in t&&typeof t.loadAll=="function"}let _De=class ihe{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(s$),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new ihe,n=this._originStores[Ui.DEFAULTS];n&&n.forEach((s,r)=>{i.set(r,Ue(s),Ui.DEFAULTS)});for(let s=Ui.SERVICE;s<s$;s++){const r=this._originStores[s];r&&r.forEach((o,l)=>{e&&e.has(l)||i.set(l,Ue(o),s)})}return i}get(e,i){const n=i===void 0?this._values:this._originStores[i];return n?n.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,n=Ui.USER){let s=this._originStores[n];if(s||(s=new Map,this._originStores[n]=s),s.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=n){const r=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,n),r!==i}return!1}delete(e,i=Ui.USER){const n=this._originStores[i];if(!n)return;const s=n.get(e);if(n.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let r=i-1;r>=0;r--){const o=this._originStores[r];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,r);break}}}return s}has(e,i){const n=i===void 0?this._values:this._originStores[i];return!!n&&n.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const n=this._originStores[i],s=n==null?void 0:n.get(e),r=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,i),r!==s}originOf(e){return this._propertyOriginMap.get(e)||Ui.DEFAULTS}forEach(e){this._values.forEach(e)}};const nhe=t=>{let e=class extends t{constructor(...i){super(...i);const n=Pl(this),s=n.store,r=new _De;n.store=r,ule(n,s,r)}read(i,n){dle(this,i,n)}getAtOrigin(i,n){const s=B8(this),r=o0(n);if(typeof i=="string")return s.get(i,r);const o={};return i.forEach(l=>{o[l]=s.get(l,r)}),o}originOf(i){return V9(this.originIdOf(i))}originIdOf(i){return B8(this).originOf(i)}revert(i,n){const s=B8(this),r=o0(n),o=Pl(this);let l;l=typeof i=="string"?i==="*"?s.keys(r):[i]:i,l.forEach(c=>{o.invalidate(c),s.revert(c,r),o.commit(c)})}};return e=I([De("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function B8(t){return Pl(t).store}let lK=class extends nhe(Ei){};lK=I([De("esri.core.ReadOnlyMultiOriginJSONSupport")],lK);const bDe=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,n="user"){return H8(this).delete(i,o0(n))}write(i,n){return ple(this,i=i||{},n),i}setAtOrigin(i,n,s){Pl(this).setAtOrigin(i,n,o0(s))}removeOrigin(i){const n=H8(this),s=o0(i),r=n.keys(s);for(const o of r)n.originOf(o)===s&&n.set(o,n.get(o,s),Ui.USER)}updateOrigin(i,n){const s=H8(this),r=o0(n),o=Lu(this,i);for(let l=r+1;l<s$;++l)s.delete(i,l);s.set(i,o,r)}toJSON(i){return this.write({},i)}};return e=I([De("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function H8(t){return Pl(t).store}const iG=t=>{let e=class extends bDe(nhe(t)){constructor(...i){super(...i)}};return e=I([De("esri.core.MultiOriginJSONSupport")],e),e};let cK=class extends iG(Ei){};cK=I([De("esri.core.MultiOriginJSONSupport")],cK);function F2(t,e,i=!1){let{hasM:n,hasZ:s}=t;Array.isArray(e)?e.length!==4||n||s?e.length===3&&i&&!n?(s=!0,n=!1):e.length===3&&n&&s&&(n=!1,s=!1):(n=!0,s=!0):(s=!s&&e.hasZ&&(!n||e.hasM),n=!n&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=n}var sR;function uK(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function xDe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let wg=sR=class extends Gv{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var s;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):xDe(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const n=(s=i.points)==null?void 0:s[0];return n&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=n.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=n.length>3:i.hasM===void 0&&(i.hasM=n.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new dr,i=this.hasZ,n=this.hasM,s=i?3:2,r=t[0],o=uK(Math.min),l=uK(Math.max);let c,f,y,_,[x,S]=r,[P,A]=r;for(let D=0,N=t.length;D<N;D++){const F=t[D],[G,V]=F;if(x=o(x,G),S=o(S,V),P=l(P,G),A=l(A,V),i&&F.length>2){const B=F[2];c=o(c,B),y=l(y,B)}if(n&&F.length>s){const B=F[s];f=o(f,B),_=l(_,B)}}return e.xmin=x,e.ymin=S,e.xmax=P,e.ymax=A,e.spatialReference=this.spatialReference,i?(e.zmin=c,e.zmax=y):(e.zmin=void 0,e.zmax=void 0),n?(e.mmin=f,e.mmax=_):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=Ue(this.points)}addPoint(t){return F2(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:Ue(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new sR(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(i.z=e[2],n=3),this.hasM&&(i.m=e[n]),new Yi(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Yi(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(F2(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};I([O({readOnly:!0})],wg.prototype,"cache",null),I([O()],wg.prototype,"extent",null),I([O({type:[[Number]],json:{write:{isRequired:!0}}})],wg.prototype,"points",void 0),I([zt("points")],wg.prototype,"writePoints",null),wg=sR=I([De("esri.geometry.Multipoint")],wg),wg.prototype.toJSON.isDefaultToJSON=!0;const Hv=wg;function xft(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function wDe(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var td;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(td||(td={}));function hK(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const n=t.clone().normalize();if(!n)return null;let s=!1,r=!1;return n.forEach(o=>{o.hasZ&&(s=!0),o.hasM&&(r=!0)}),n.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const c=.5*(o.zmax-o.zmin);for(let f=0;f<l.length;f++)l[f].push(c)}if(r&&o.hasM){const c=.5*(o.mmax-o.mmin);for(let f=0;f<l.length;f++)l[f].push(c)}return l})}return null}function uA(t,e){const i=e[0]-t[0],n=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(i*i+n*n+s*s)}return Math.sqrt(i*i+n*n)}function she(t,e,i){const n=t[0]+i*(e[0]-t[0]),s=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[n,s,t[2]+i*(e[2]-t[2])]:[n,s]}function wft(t,e,i,n){return SDe(t,e,i[n],i[n+1])}function SDe(t,e,i,n){const[s,r]=e,[o,l]=i,[c,f]=n,y=c-o,_=f-l,x=y*y+_*_,S=(s-o)*y+(r-l)*_,P=Math.min(1,Math.max(0,S/x));return t[0]=o+y*P,t[1]=l+_*P,t}function Sft(t,e,i,n,s,r){let o=i,l=n,c=s-o,f=r-l;if(c!==0||f!==0){const y=((t-o)*c+(e-l)*f)/(c*c+f*f);y>1?(o=s,l=r):y>0&&(o+=c*y,l+=f*y)}return c=t-o,f=e-l,c*c+f*f}function rhe(t,e){return she(t,e,.5)}function Eft(t){const e=t.length;let i=0;for(let n=0;n<e-1;++n)i+=uA(t[n],t[n+1]);return i}function Cft(t,e){if(e<=0)return t[0];const i=t.length;let n=0;for(let s=0;s<i-1;++s){const r=uA(t[s],t[s+1]);if(e-n<r){const o=(e-n)/r;return she(t[s],t[s+1],o)}n+=r}return t[i-1]}function hA(t,e=td.X,i=td.Y){let n=0;const s=t.length;let r=t[0];for(let o=1;o<s;o++){const l=t[o];n+=(l[e]-r[e])*(l[i]+r[i]),r=l}if(!ohe(t)){const o=t[0];n+=(o[e]-r[e])*(o[i]+r[i])}return n>=0}function ohe(t){const e=t.length;return e<3||wf(t[0],t[e-1])}function Pft(t){"rings"in t&&(EDe(t),CDe(t))}function EDe(t){if(!("rings"in t))return!1;let e=!1;for(const i of t.rings)ohe(i)||(i.push(i[0].slice()),e=!0);return e}function CDe(t){if(!("rings"in t)||t.rings.length===0||hA(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function ahe(t){return t.type!=="polygon"&&t.type!=="polyline"||lhe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function lhe(t,e){const i=s2(e);if(!i)return;const n=i.valid[0],s=i.valid[1],r=s-n;for(const o of t){let l=1/0,c=-1/0;for(const y of o){const _=PDe(y[0],n,s);l=Math.min(l,_),c=Math.max(c,_),y[0]=_}const f=c-l;r-f<f&&o.forEach(y=>{y[0]<0&&(y[0]+=r)})}}function PDe(t,e,i){const n=i-e;return t<e?i-(e-t)%n:t>i?e+(t-e)%n:t}function TDe(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,n]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===n.length&&i.every((s,r)=>s.length===n[r].length)}function Tft(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function IDe(t){return t?MDe(t.rings,t.hasZ??!1):null}function MDe(t,e){if(!(t!=null&&t.length))return null;const i=[],n=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let r=0,o=t.length;r<o;r++){const l=che(t[r],e,s);l&&n.push(l)}if(n.sort((r,o)=>{let l=r[2]-o[2];return l===0&&e&&(l=r[4]-o[4]),l}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],e&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const r=t[0]&&t[0].length?ADe(t[0],e):null;if(!r)return null;i[0]=r[0],i[1]=r[1],e&&r.length>2&&(i[2]=r[2])}return i}function che(t,e,i){let n=0,s=0,r=0,o=0,l=0;const c=t.length?t[0][0]:0,f=t.length?t[0][1]:0,y=t.length&&e?t[0][2]:0;for(let x=0;x<t.length;x++){const S=t[x],P=t[(x+1)%t.length],[A,D,N]=S,F=A-c,G=D-f,[V,B,W]=P,J=V-c,re=B-f,ne=F*re-J*G;if(o+=ne,n+=(F+J)*ne,s+=(G+re)*ne,e&&S.length>2&&P.length>2){const oe=N-y,pe=W-y,ce=F*pe-J*oe;r+=(oe+pe)*ce,l+=ce}A<i[0]&&(i[0]=A),A>i[1]&&(i[1]=A),D<i[2]&&(i[2]=D),D>i[3]&&(i[3]=D),e&&(N<i[4]&&(i[4]=N),N>i[5]&&(i[5]=N))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;o*=.5,l*=.5;const _=[n/(6*o)+c,s/(6*o)+f,o];return e&&(i[4]===i[5]||l===0?(_[3]=(i[4]+i[5])/2,_[4]=0):(_[3]=r/(6*l)+y,_[4]=l)),_}function Ift(t,e){let i=0,n=0,s=0;t.nextPoint();const r=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let l=0;l<t.pathSize;l++){t.seekInPath(l);const c=[t.x,t.y];t.seekInPath((l+1)%t.pathSize);const f=[t.x,t.y],[y,_]=c,x=y-r,S=_-o,[P,A]=f,D=P-r,N=A-o,F=x*N-D*S;s+=F,i+=(x+D)*F,n+=(S+N)*F,y<e[0]&&(e[0]=y),y>e[1]&&(e[1]=y),_<e[2]&&(e[2]=_),_>e[3]&&(e[3]=_)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+r,n/(6*s)+o,s]):null}function ADe(t,e){const i=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let s=0,r=0,o=0,l=0;for(let c=0,f=t.length;c<f-1;c++){const y=t[c],_=t[c+1];if(y&&_){i[0]=y[0],i[1]=y[1],n[0]=_[0],n[1]=_[1],e&&y.length>2&&_.length>2&&(i[2]=y[2],n[2]=_[2]);const x=uA(i,n);if(x){s+=x;const S=rhe(y,_);r+=x*S[0],o+=x*S[1],e&&S.length>2&&(l+=x*S[2])}}}return s>0?e?[r/s,o/s,l/s]:[r/s,o/s]:t.length?t[0]:null}function kDe(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const n=[],s=[],r=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=che(wDe(t),t.hasZ,r);o&&s.push(o)}if(s.sort((o,l)=>{let c=o[2]-l[2];return c===0&&e&&(c=o[4]-l[4]),c}),s.length&&(n[0]=s[0][0],n[1]=s[0][1],e&&(n[2]=s[0][3]),(n[0]<r[0]||n[0]>r[1]||n[1]<r[2]||n[1]>r[3]||e&&(n[2]<r[4]||n[2]>r[5]))&&(n.length=0)),!n.length){t.reset(),t.nextPath();const o=t.pathSize?DDe(t):null;if(!o)return null;n[0]=o[0],n[1]=o[1],e&&o.length>2&&(n[2]=o[2])}return n}function DDe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let s=0,r=0,o=0,l=0;if(t.nextPoint()){let c=t.x,f=t.y,y=t.z;for(;t.nextPoint();){const _=t.x,x=t.y,S=t.z;i[0]=c,i[1]=f,n[0]=_,n[1]=x,e&&(i[2]=y,n[2]=S);const P=uA(i,n);if(P){s+=P;const A=rhe(i,n);r+=P*A[0],o+=P*A[1],e&&A.length>2&&(l+=P*A[2])}c=_,f=x,y=S}}return s>0?e?[r/s,o/s,l/s]:[r/s,o/s]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const NDe=1e-6;function Mft(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<NDe){const s=kDe(t);return s?[s[0],s[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const n=[t.x,t.y];for(t.reset();t.nextPath();)$De(i,n,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=n[0],i[1]+=n[1],i}const ODe=1/3;function $De(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const n=i.x,s=i.y;i.nextPoint();let r,o=i.x-n,l=i.y-s,c=0,f=0;for(;i.nextPoint();)c=i.x-n,f=i.y-s,r=.5*ODe*(c*l-f*o),t[0]+=r*(o+c),t[1]+=r*(l+f),o=c,l=f;const y=i.getCurrentRingArea(),_=[n,s];return _[0]-=e[0],_[1]-=e[1],_[0]*=y,_[1]*=y,t[0]+=_[0],t[1]+=_[1],t}const dK=new Float32Array(1);function Aft(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Qu(t,e,i){return Math.min(Math.max(t,e),i)}function kft(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function RDe(t,e,i){return t+(e-t)*i}function Dft(t,e,i,n,s){return RDe(n,s,(t-e)/(i-e))}function uhe(t){return t*Math.PI/180}function LDe(t){return 180*t/Math.PI}function Nft(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function nG(t){return Math.acos(Qu(t,-1,1))}function sG(t){return Math.asin(Qu(t,-1,1))}function l0(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const S6=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function rR(t){return S6.setFloat64(0,t),S6.getBigInt64(0)}function FDe(t){return S6.setBigInt64(0,t),S6.getFloat64(0)}const aI=BigInt("1000000"),zDe=hhe(1);function hhe(t){const e=rR(t=Math.abs(t)),i=FDe(e<=aI?aI:e-aI);return Math.abs(t-i)}function Oft(t,e,i=zDe){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&hhe(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const n=rR(t),s=rR(e);return n<0!=s<0?!1:!((n<s?s-n:n-s)>aI)}function $ft(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const n=Math.abs(t-e),s=Math.abs(t),r=Math.abs(e);if(t===0||e===0||s<1e-12&&r<1e-12){if(n>.01*i)return!1}else if(n/(s+r)>i)return!1;return!0}function Rft(t){return dhe(Math.max(-fK,Math.min(t,fK)))}function dhe(t){return dK[0]=t,dK[0]}function Lft(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],n=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(l0(e,1)&&l0(i,1)&&l0(n,1))}function Fft(t,e){return(t%e+e)%e}const fK=dhe(34028234663852886e22);function zft(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let n=e.toString().split("e");return n=(e=Math[t](+(n[0]+"e"+(n[1]?+n[1]-i:-i)))).toString().split("e"),+(n[0]+"e"+(n[1]?+n[1]+i:i))}function Uv(t=GDe){return[t[0],t[1],t[2],t[3]]}function fhe(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function qft(t,e,i,n,s=Uv()){return s[0]=t,s[1]=e,s[2]=i,s[3]=n,s}function Vft(t,e=Uv()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function Gft(t,e){return new dr({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function jft(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Bft(t,e,i){if(e!=null)if("length"in e)oR(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else fhe(i,t)}function qDe(t,e,i=t){const n=e.length;let s=t[0],r=t[1],o=t[2],l=t[3];for(let c=0;c<n;c++){const f=e[c];s=Math.min(s,f[0]),r=Math.min(r,f[1]),o=Math.max(o,f[0]),l=Math.max(l,f[1])}return i[0]=s,i[1]=r,i[2]=o,i[3]=l,i}function Hft(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function phe(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function mhe(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function Uft(t){return phe(t)*mhe(t)}function Yft(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function Xft(t,e){return ghe(t,e[0],e[1])}function Wft(t,e){return ghe(t,e.x,e.y)}function ghe(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function Zft(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function Kft(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function Jft(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function Qft(t,e,i,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+e,n[3]=t[3]+i,n}function VDe(t,e,i=t){return i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i}function ept(t){return t?fhe(t,E6):Uv(E6)}function oR(t){return t!=null&&t.length===4}function tpt(t,e){return oR(t)&&oR(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const E6=[1/0,1/0,-1/0,-1/0],GDe=[0,0,0,0];function yhe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function vhe(t){return t.points!==void 0}function _he(t){return t.x!==void 0&&t.y!==void 0}function bhe(t){return t.paths!==void 0}function xhe(t){return t.rings!==void 0}function whe(t){function e(i,n){return i==null?n:n==null?i:t(i,n)}return e}const c0=whe(Math.min),u0=whe(Math.max);function ipt(t,e){return bhe(e)?z2(t,e.paths,!1,!1):xhe(e)?z2(t,e.rings,!1,!1):vhe(e)?rG(t,e.points,!1,!1,!1,!1):yhe(e)?She(t,e):(_he(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function npt(t){let e,i,n,s;for(t.reset(),e=n=1/0,i=s=-1/0;t.nextPath();){const r=jDe(t);e=Math.min(r[0],e),n=Math.min(r[1],n),i=Math.max(r[2],i),s=Math.max(r[3],s)}return Uv([e,n,i,s])}function jDe(t){let e,i,n,s;for(e=n=1/0,i=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),n=Math.min(t.y,n),i=Math.max(t.x,i),s=Math.max(t.y,s);return Uv([e,n,i,s])}function spt(t,e){return bhe(e)?z2(t,e.paths,!0,!1):xhe(e)?z2(t,e.rings,!0,!1):vhe(e)?rG(t,e.points,!0,!1,!0,!1):yhe(e)?She(t,e,!0,!1,!0,!1):(_he(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function z2(t,e,i,n){const s=i?3:2;if(!e.length||!e[0].length)return null;let r,o,l,c,[f,y]=e[0][0],[_,x]=e[0][0];for(let S=0;S<e.length;S++){const P=e[S];for(let A=0;A<P.length;A++){const D=P[A],[N,F]=D;if(f=c0(f,N),y=c0(y,F),_=u0(_,N),x=u0(x,F),i&&D.length>2){const G=D[2];r=c0(r,G),o=u0(o,G)}if(n&&D.length>s){const G=D[s];l=c0(r,G),c=u0(o,G)}}}return i?n?(t[0]=f,t[1]=y,t[2]=r,t[3]=l,t[4]=_,t[5]=x,t[6]=o,t[7]=c,t.length=8,t):(t[0]=f,t[1]=y,t[2]=r,t[3]=_,t[4]=x,t[5]=o,t.length=6,t):n?(t[0]=f,t[1]=y,t[2]=l,t[3]=_,t[4]=x,t[5]=c,t.length=6,t):(t[0]=f,t[1]=y,t[2]=_,t[3]=x,t.length=4,t)}function She(t,e,i,n,s,r){const o=e.xmin,l=e.xmax,c=e.ymin,f=e.ymax;let y=e.zmin,_=e.zmax,x=e.mmin,S=e.mmax;return s?(y=y||0,_=_||0,r?(x=x||0,S=S||0,t[0]=o,t[1]=c,t[2]=y,t[3]=x,t[4]=l,t[5]=f,t[6]=_,t[7]=S,t):(t[0]=o,t[1]=c,t[2]=y,t[3]=l,t[4]=f,t[5]=_,t)):r?(x=x||0,S=S||0,t[0]=o,t[1]=c,t[2]=x,t[3]=l,t[4]=f,t[5]=S,t):(t[0]=o,t[1]=c,t[2]=l,t[3]=f,t)}function rG(t,e,i,n,s,r){const o=i?3:2,l=n&&r,c=i&&s;if(!e.length||!e[0].length)return null;let f,y,_,x,[S,P]=e[0],[A,D]=e[0];for(let N=0;N<e.length;N++){const F=e[N],[G,V]=F;if(S=c0(S,G),P=c0(P,V),A=u0(A,G),D=u0(D,V),c&&F.length>2){const B=F[2];f=c0(f,B),y=u0(y,B)}if(l&&F.length>o){const B=F[o];_=c0(f,B),x=u0(y,B)}}return s?(f=f||0,y=y||0,r?(_=_||0,x=x||0,t[0]=S,t[1]=P,t[2]=f,t[3]=_,t[4]=A,t[5]=D,t[6]=y,t[7]=x,t):(t[0]=S,t[1]=P,t[2]=f,t[3]=A,t[4]=D,t[5]=y,t)):r?(_=_||0,x=x||0,t[0]=S,t[1]=P,t[2]=_,t[3]=A,t[4]=D,t[5]=x,t):(t[0]=S,t[1]=P,t[2]=A,t[3]=D,t)}function BDe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function HDe(t){return t.points!==void 0}function UDe(t){return t.x!==void 0&&t.y!==void 0}function YDe(t){return t.paths!==void 0}function XDe(t){return t.rings!==void 0}const oG=[];function Ehe(t,e,i,n){return{xmin:t,ymin:e,xmax:i,ymax:n}}function Che(t,e,i,n,s,r){return{xmin:t,ymin:e,zmin:i,xmax:n,ymax:s,zmax:r}}function Phe(t,e,i,n,s,r){return{xmin:t,ymin:e,mmin:i,xmax:n,ymax:s,mmax:r}}function The(t,e,i,n,s,r,o,l){return{xmin:t,ymin:e,zmin:i,mmin:n,xmax:s,ymax:r,zmax:o,mmax:l}}function aG(t,e=!1,i=!1){return e?i?The(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):Che(t[0],t[1],t[2],t[3],t[4],t[5]):i?Phe(t[0],t[1],t[2],t[3],t[4],t[5]):Ehe(t[0],t[1],t[2],t[3])}function rpt(t){return t?BDe(t)?t:UDe(t)?ZDe(t):XDe(t)?Ihe(t):YDe(t)?Mhe(t):HDe(t)?WDe(t):null:null}function WDe(t){const{hasZ:e,hasM:i,points:n}=t;return aG(rG(oG,n,e??!1,i??!1),e,i)}function ZDe(t){const{x:e,y:i,z:n,m:s}=t,r=s!=null;return n!=null?r?The(e,i,n,s,e,i,n,s):Che(e,i,n,e,i,n):r?Phe(e,i,s,e,i,s):Ehe(e,i,e,i)}function Ihe(t){const{hasZ:e,hasM:i,rings:n}=t,s=z2(oG,n,e??!1,i??!1);return s?aG(s,e,i):null}function Mhe(t){const{hasZ:e,hasM:i,paths:n}=t,s=z2(oG,n,e??!1,i??!1);return s?aG(s,e,i):null}var lI;function pK(t){return!Array.isArray(t[0])}function KDe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function JDe(t){var r,o;if(!t)return;let{rings:e,hasM:i,hasZ:n,spatialReference:s}=t;switch(e??(e=[]),KDe(e)&&(e=[e]),(o=(r=e[0])==null?void 0:r[0])==null?void 0:o.length){case 4:n??(n=!0),i??(i=!0);break;case 3:n??(n=i!==!0),i??(i=!n);break;default:n??(n=!1),i??(i=!1)}return s??(s=Gi.WGS84),{...t,hasM:i,hasZ:n,rings:e,spatialReference:s}}let Wd=lI=class extends Gv{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let n=!1,s=!1;for(const o of e)o.hasZ&&(n=!0),o.hasM&&(s=!0);const r={rings:e.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const c=o.zmin+.5*(o.zmax-o.zmin);for(let f=0;f<l.length;f++)l[f].push(c)}if(s&&o.hasM){const c=o.mmin+.5*(o.mmax-o.mmin);for(let f=0;f<l.length;f++)l[f].push(c)}return l}),spatialReference:i};return n&&(r.hasZ=!0),s&&(r.hasM=!0),new lI(r)}constructor(t){super(JDe(t)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=IDe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Yi;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=Ihe(this);if(!e)return null;const i=new dr(e);return i.spatialReference=t,i}get isSelfIntersecting(){return F6e(this.rings)}writeRings(t,e){e.rings=Ue(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(pK(t)){const n=[];for(let s=0,r=t.length;s<r;s++)n[s]=t[s].toArray();e[i]=n}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new lI;return t.spatialReference=this.spatialReference,t.rings=Ue(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const n=([s,r,o,l],[c,f,y,_])=>s===c&&r===f&&(o==null&&y==null||o===y)&&(l==null&&_==null||l===_);for(let s=0;s<this.rings.length;s++){const r=this.rings[s],o=t.rings[s];if(!wf(r,o,n))return!1}return!0}contains(t){if(!t)return!1;const e=Kle(t,this.spatialReference);return I6e(this,e??t)}isClockwise(t){const e=pK(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return hA(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],n=this.hasZ,s=this.hasM;return n&&!s?new Yi(i[0],i[1],i[2],void 0,this.spatialReference):s&&!n?new Yi(i[0],i[1],void 0,i[2],this.spatialReference):n&&s?new Yi(i[0],i[1],i[2],i[3],this.spatialReference):new Yi(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(F2(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Yi(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,n=e.map(s=>new Yi(s,i));return this.notifyChange("rings"),n}setPoint(t,e,i){return this._validateInputs(t,e)?(F2(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const n=this.rings[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};I([O({readOnly:!0})],Wd.prototype,"cache",null),I([O({readOnly:!0})],Wd.prototype,"centroid",null),I([O({readOnly:!0})],Wd.prototype,"extent",null),I([O({readOnly:!0})],Wd.prototype,"isSelfIntersecting",null),I([O({type:[[[Number]]],json:{write:{isRequired:!0}}})],Wd.prototype,"rings",void 0),I([zt("rings")],Wd.prototype,"writeRings",null),Wd=lI=I([De("esri.geometry.Polygon")],Wd);const el=Wd;Wd.prototype.toJSON.isDefaultToJSON=!0;var aR;function QDe(t){return!Array.isArray(t[0])}function e8e(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function t8e(t){var r,o;if(!t)return;let{paths:e,hasM:i,hasZ:n,spatialReference:s}=t;switch(e??(e=[]),e8e(e)&&(e=[e]),(o=(r=e[0])==null?void 0:r[0])==null?void 0:o.length){case 4:n??(n=!0),i??(i=!0);break;case 3:n??(n=i!==!0),i??(i=!n);break;default:n??(n=!1),i??(i=!1)}return s??(s=Gi.WGS84),{...t,hasM:i,hasZ:n,paths:e,spatialReference:s}}let Xg=aR=class extends Gv{constructor(t){super(t8e(t)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=Mhe(this);if(!e)return null;const i=new dr(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=Ue(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(QDe(t)){const n=[];for(let s=0,r=t.length;s<r;s++)n[s]=t[s].toArray();e[i]=n}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new aR;return t.spatialReference=this.spatialReference,t.paths=Ue(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],n=this.hasZ,s=this.hasM;return n&&!s?new Yi(i[0],i[1],i[2],void 0,this.spatialReference):s&&!n?new Yi(i[0],i[1],void 0,i[2],this.spatialReference):n&&s?new Yi(i[0],i[1],i[2],i[3],this.spatialReference):new Yi(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(F2(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,n=e.map(s=>new Yi(s,i));return this.notifyChange("paths"),n}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Yi(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(F2(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const n=this.paths[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};I([O({readOnly:!0})],Xg.prototype,"cache",null),I([O({readOnly:!0})],Xg.prototype,"extent",null),I([O({type:[[[Number]]],json:{write:{isRequired:!0}}})],Xg.prototype,"paths",void 0),I([zt("paths")],Xg.prototype,"writePaths",null),Xg=aR=I([De("esri.geometry.Polyline")],Xg);const $f=Xg;Xg.prototype.toJSON.isDefaultToJSON=!0;const i8e=Ta()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),mK=Ta()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function Ahe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function khe(t){return t.points!==void 0}function Dhe(t){return t.x!==void 0&&t.y!==void 0}function lG(t){return t.paths!==void 0}function l2(t){return t.rings!==void 0}function XC(t){return t==null?null:t instanceof Gv?t:Dhe(t)?Yi.fromJSON(t):lG(t)?$f.fromJSON(t):l2(t)?el.fromJSON(t):khe(t)?Hv.fromJSON(t):Ahe(t)?dr.fromJSON(t):null}function opt(t){return t?Dhe(t)?"esriGeometryPoint":lG(t)?"esriGeometryPolyline":l2(t)?"esriGeometryPolygon":Ahe(t)?"esriGeometryEnvelope":khe(t)?"esriGeometryMultipoint":null:null}const n8e={esriGeometryPoint:Yi,esriGeometryPolyline:$f,esriGeometryPolygon:el,esriGeometryEnvelope:dr,esriGeometryMultipoint:Hv,esriGeometryMultiPatch:el};function apt(t){return t&&n8e[t]||null}const WC={base:Gv,key:"type",typeMap:{extent:dr,multipoint:Hv,point:Yi,polyline:$f,polygon:el}};Ku(WC);let Nhe=0;const ZC=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Nhe++})}};return e=I([De("esri.core.Identifiable")],e),e},lpt=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Nhe++})}};return e=I([De("esri.core.Identifiable.NumericIdentifiable")],e),e};let gK=class extends ZC(class{}){};gK=I([De("esri.core.Identifiable")],gK);async function s8e(t){var n;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await st(async()=>{const{fromItem:s}=await import("./portalLayers-BCCsDF3K.js").then(r=>r.p);return{fromItem:s}},__vite__mapDeps([93,94,95]),import.meta.url);try{return await i(e)}catch(s){const r=e==null?void 0:e.portalItem,o=(r==null?void 0:r.id)||"unset",l=((n=r==null?void 0:r.portal)==null?void 0:n.url)||jn.portalUrl;throw qt.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",s),s}}const yK={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function U8(t,e,i,n=rm){const s=new Hc(jV(n)),r=hi.fromJSDate(t,{zone:s}),o=i==="decades"||i==="centuries"?"year":$he(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),r.plus({[o]:e}).toJSDate()}function upt(t,e,i="milliseconds"){const n=t.getTime(),s=Ohe(e,i,"milliseconds");return new Date(n+s)}function vK(t,e,i=rm){const n=new Hc(jV(i)),s=hi.fromJSDate(t,{zone:n});if(e==="decades"||e==="centuries"){const o=s.startOf("year"),{year:l}=o,c=l-l%(e==="decades"?10:100);return o.set({year:c}).toJSDate()}const r=$he(e);return s.startOf(r).toJSDate()}function Ohe(t,e,i){return t===0?0:t*yK[e]/yK[i]}function r8e(t,e){return t&&e?t.intersection(e):t||e}function $he(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var _u;let Mc=_u=class extends St{static get allTime(){return _K}static get empty(){return o8e}static fromArray(t){return new _u({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(_u.allTime)}get isEmpty(){return this.equals(_u.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=(t==null?void 0:t.getTime())??null}clone(){return new _u({end:this.end,start:this.start})}equals(t){var r,o,l,c;if(!t)return!1;const e=((r=this.start)==null?void 0:r.getTime())??this.start,i=((o=this.end)==null?void 0:o.getTime())??this.end,n=((l=t.start)==null?void 0:l.getTime())??t.start,s=((c=t.end)==null?void 0:c.getTime())??t.end;return e===n&&i===s}expandTo(t,e=rm){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=vK(i,t,e));let n=this.end;if(n){const s=vK(n,t,e);n=n.getTime()===s.getTime()?s:U8(s,1,t,e)}return new _u({start:i,end:n})}intersection(t){var l,c,f,y;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return _u.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((l=this.start)==null?void 0:l.getTime())??-1/0,i=((c=this.end)==null?void 0:c.getTime())??1/0,n=((f=t.start)==null?void 0:f.getTime())??-1/0,s=((y=t.end)==null?void 0:y.getTime())??1/0;let r,o;return n>=e&&n<=i?r=n:e>=n&&e<=s&&(r=e),i>=n&&i<=s?o=i:s>=e&&s<=i&&(o=s),r==null||o==null||isNaN(r)||isNaN(o)?_u.empty:new _u({start:r===-1/0?null:new Date(r),end:o===1/0?null:new Date(o)})}offset(t,e,i=rm){if(this.isEmpty||this.isAllTime)return this.clone();const n=new _u,{start:s,end:r}=this;return s!=null&&(n.start=U8(s,t,e,i)),r!=null&&(n.end=U8(r,t,e,i)),n}toArray(){var t,e;return this.isEmpty?[void 0,void 0]:[((t=this.start)==null?void 0:t.getTime())??null,((e=this.end)==null?void 0:e.getTime())??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return _K.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new _u({start:e,end:i})}};I([O({type:Date,json:{write:{allowNull:!0}}})],Mc.prototype,"end",void 0),I([Dt("end")],Mc.prototype,"readEnd",null),I([zt("end")],Mc.prototype,"writeEnd",null),I([O({readOnly:!0,json:{read:!1}})],Mc.prototype,"isAllTime",null),I([O({readOnly:!0,json:{read:!1}})],Mc.prototype,"isEmpty",null),I([O({type:Date,json:{write:{allowNull:!0}}})],Mc.prototype,"start",void 0),I([Dt("start")],Mc.prototype,"readStart",null),I([zt("start")],Mc.prototype,"writeStart",null),Mc=_u=I([De("esri.time.TimeExtent")],Mc);const O0=Mc,_K=new Mc,o8e=new Mc({start:void 0,end:void 0});let a8e=0,$r=class extends Ia.EventedMixin(ZC(GC)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new dr(-180,-90,180,90,Gi.WGS84),this.id=Date.now().toString(16)+"-layer-"+a8e++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Gi.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await st(async()=>{const{fromUrl:n}=await import("./arcgisLayers-JEVUzCbq.js");return{fromUrl:n}},__vite__mapDeps([96,94,95]),import.meta.url)).fromUrl(i)}static fromPortalItem(e){return s8e(e)}initialize(){this.when().catch(e=>{vd(e)||qt.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&e&&(e=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return wl(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await es(e,{query:{f:"json"},responseType:"json"})).data;throw new rt("layer:no-attribution-data","Layer does not have attribution data")}};I([O({type:String})],$r.prototype,"attributionDataUrl",void 0),I([O({readOnly:!0})],$r.prototype,"effectiveVisible",null),I([O({type:dr})],$r.prototype,"fullExtent",void 0),I([O({readOnly:!0})],$r.prototype,"hasAttributionData",null),I([O({type:String,clonable:!1})],$r.prototype,"id",void 0),I([O({type:Boolean,nonNullable:!0})],$r.prototype,"legendEnabled",void 0),I([O({type:["show","hide","hide-children"]})],$r.prototype,"listMode",void 0),I([O({type:Number,range:{min:0,max:1},nonNullable:!0})],$r.prototype,"opacity",void 0),I([O({clonable:!1})],$r.prototype,"parent",void 0),I([O({readOnly:!0})],$r.prototype,"parsedUrl",null),I([O({type:Boolean,readOnly:!0})],$r.prototype,"persistenceEnabled",void 0),I([O({type:Boolean})],$r.prototype,"popupEnabled",void 0),I([O({type:Boolean})],$r.prototype,"attributionVisible",void 0),I([O({type:Gi})],$r.prototype,"spatialReference",void 0),I([O({type:String})],$r.prototype,"title",void 0),I([O({readOnly:!0,json:{read:!1}})],$r.prototype,"type",void 0),I([O()],$r.prototype,"url",void 0),I([O({type:O0})],$r.prototype,"visibilityTimeExtent",void 0),I([O({type:Boolean,nonNullable:!0})],$r.prototype,"visible",void 0),$r=I([De("esri.layers.Layer")],$r);const dA=$r,C6={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Rhe(t){return!!C6[t]||!!C6[t.toLowerCase()]}function cG(t){return C6[t]??C6[t.toLowerCase()]}function l8e(t){return[...cG(t)]}function Y8(t,e,i){i<0&&++i,i>1&&--i;const n=6*i;return n<1?t+(e-t)*n:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function Lhe(t,e,i,n=1){const s=(t%360+360)%360/360,r=i<=.5?i*(e+1):i+e-i*e,o=2*i-r;return[Math.round(255*Y8(o,r,s+1/3)),Math.round(255*Y8(o,r,s)),Math.round(255*Y8(o,r,s-1/3)),n]}function c8e(t){const e=t.length>5,i=e?8:4,n=(1<<i)-1,s=e?1:17,r=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const l=[0,0,0,1];let c;return r&&(c=o&n,o>>=i,l[3]=s*c/255),c=o&n,o>>=i,l[2]=s*c,c=o&n,o>>=i,l[1]=s*c,c=o&n,o>>=i,l[0]=s*c,l}const u8e=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,h8e="screenUtils.toPt: input not recognized!",Fhe=96;function d8e(t){return t?t/72*Fhe:0}function eh(t){return t?72*t/Fhe:0}function pn(t){if(typeof t=="string"){const e=t.match(u8e);if(e){const i=Number(e[1]),n=e[3]&&e[3].toLowerCase(),s=t.charAt(0)==="-",r=n==="px"?eh(i):i;return s?-r:r}return console.warn(h8e),null}return t}function am(t=0,e=0){return{x:t,y:e}}function dpt(t){return t?am(t.x,t.y):null}function zhe(t=0,e=0){return[t,e]}function fpt(t=0,e=0,i=0){return[t,e,i]}function ppt(t){return t}function mpt(t){return t}function gpt(t){return t}function ypt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function fA(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function f8e(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p8e(t,e,i,n,s,r,o,l,c,f,y,_,x,S,P,A){const D=new Float32Array(16);return D[0]=t,D[1]=e,D[2]=i,D[3]=n,D[4]=s,D[5]=r,D[6]=o,D[7]=l,D[8]=c,D[9]=f,D[10]=y,D[11]=_,D[12]=x,D[13]=S,D[14]=P,D[15]=A,D}function m8e(t,e){return new Float32Array(t,e,16)}const g8e=fA();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:g8e,clone:f8e,create:fA,createView:m8e,fromValues:p8e},Symbol.toStringTag,{value:"Module"}));function $t(){return[0,0,0]}function cc(t){return[t[0],t[1],t[2]]}function Sl(t,e,i){return[t,e,i]}function y8e(t,e,i){return[t,e,i]}function qhe(t,e=$t()){const i=Math.min(3,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function v8e(t,e){return new Float64Array(t,e,3)}function Vhe(){return $t()}function Ghe(){return Sl(1,1,1)}function jhe(){return Sl(1,0,0)}function Bhe(){return Sl(0,1,0)}function Hhe(){return Sl(0,0,1)}const _8e=Vhe(),b8e=Ghe(),x8e=jhe(),w8e=Bhe(),Uhe=Hhe();Object.freeze(Object.defineProperty({__proto__:null,ONES:b8e,UNIT_X:x8e,UNIT_Y:w8e,UNIT_Z:Uhe,ZEROS:_8e,clone:cc,create:$t,createView:v8e,freeze:y8e,fromArray:qhe,fromValues:Sl,ones:Ghe,unitX:jhe,unitY:Bhe,unitZ:Hhe,zeros:Vhe},Symbol.toStringTag,{value:"Module"}));let uG=1e-6;function ho(){return uG}function S8e(t){uG=t}const KC=Math.random,E8e=Math.PI/180,C8e=180/Math.PI;function P8e(t){return t*E8e}function T8e(t){return t*C8e}function I8e(t,e){return Math.abs(t-e)<=uG*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:KC,equals:I8e,getEpsilon:ho,setEpsilon:S8e,toDegree:T8e,toRadian:P8e},Symbol.toStringTag,{value:"Module"}));function Yhe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Y0(t,e,i,n,s,r,o,l,c,f,y,_,x,S,P,A,D){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=r,t[5]=o,t[6]=l,t[7]=c,t[8]=f,t[9]=y,t[10]=_,t[11]=x,t[12]=S,t[13]=P,t[14]=A,t[15]=D,t}function pA(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function X0(t,e){if(t===e){const i=e[1],n=e[2],s=e[3],r=e[6],o=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=r,t[11]=e[14],t[12]=s,t[13]=o,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function M8e(t,e){return Xhe(t,e)||pA(t),t}function Xhe(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8],_=e[9],x=e[10],S=e[11],P=e[12],A=e[13],D=e[14],N=e[15],F=i*l-n*o,G=i*c-s*o,V=i*f-r*o,B=n*c-s*l,W=n*f-r*l,J=s*f-r*c,re=y*A-_*P,ne=y*D-x*P,oe=y*N-S*P,pe=_*D-x*A,ce=_*N-S*A,ue=x*N-S*D;let se=F*ue-G*ce+V*pe+B*oe-W*ne+J*re;return se?(se=1/se,t[0]=(l*ue-c*ce+f*pe)*se,t[1]=(s*ce-n*ue-r*pe)*se,t[2]=(A*J-D*W+N*B)*se,t[3]=(x*W-_*J-S*B)*se,t[4]=(c*oe-o*ue-f*ne)*se,t[5]=(i*ue-s*oe+r*ne)*se,t[6]=(D*V-P*J-N*G)*se,t[7]=(y*J-x*V+S*G)*se,t[8]=(o*ce-l*oe+f*re)*se,t[9]=(n*oe-i*ce-r*re)*se,t[10]=(P*W-A*V+N*F)*se,t[11]=(_*V-y*W-S*F)*se,t[12]=(l*ne-o*pe-c*re)*se,t[13]=(i*pe-n*ne+s*re)*se,t[14]=(A*G-P*B-D*F)*se,t[15]=(y*B-_*G+x*F)*se,t):null}function A8e(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8],_=e[9],x=e[10],S=e[11],P=e[12],A=e[13],D=e[14],N=e[15];return t[0]=l*(x*N-S*D)-_*(c*N-f*D)+A*(c*S-f*x),t[1]=-(n*(x*N-S*D)-_*(s*N-r*D)+A*(s*S-r*x)),t[2]=n*(c*N-f*D)-l*(s*N-r*D)+A*(s*f-r*c),t[3]=-(n*(c*S-f*x)-l*(s*S-r*x)+_*(s*f-r*c)),t[4]=-(o*(x*N-S*D)-y*(c*N-f*D)+P*(c*S-f*x)),t[5]=i*(x*N-S*D)-y*(s*N-r*D)+P*(s*S-r*x),t[6]=-(i*(c*N-f*D)-o*(s*N-r*D)+P*(s*f-r*c)),t[7]=i*(c*S-f*x)-o*(s*S-r*x)+y*(s*f-r*c),t[8]=o*(_*N-S*A)-y*(l*N-f*A)+P*(l*S-f*_),t[9]=-(i*(_*N-S*A)-y*(n*N-r*A)+P*(n*S-r*_)),t[10]=i*(l*N-f*A)-o*(n*N-r*A)+P*(n*f-r*l),t[11]=-(i*(l*S-f*_)-o*(n*S-r*_)+y*(n*f-r*l)),t[12]=-(o*(_*D-x*A)-y*(l*D-c*A)+P*(l*x-c*_)),t[13]=i*(_*D-x*A)-y*(n*D-s*A)+P*(n*x-s*_),t[14]=-(i*(l*D-c*A)-o*(n*D-s*A)+P*(n*c-s*l)),t[15]=i*(l*x-c*_)-o*(n*x-s*_)+y*(n*c-s*l),t}function k8e(t){const e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],l=t[6],c=t[7],f=t[8],y=t[9],_=t[10],x=t[11],S=t[12],P=t[13],A=t[14],D=t[15];return(e*o-i*r)*(_*D-x*A)-(e*l-n*r)*(y*D-x*P)+(e*c-s*r)*(y*A-_*P)+(i*l-n*o)*(f*D-x*S)-(i*c-s*o)*(f*A-_*S)+(n*c-s*l)*(f*P-y*S)}function Whe(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=e[8],x=e[9],S=e[10],P=e[11],A=e[12],D=e[13],N=e[14],F=e[15];let G=i[0],V=i[1],B=i[2],W=i[3];return t[0]=G*n+V*l+B*_+W*A,t[1]=G*s+V*c+B*x+W*D,t[2]=G*r+V*f+B*S+W*N,t[3]=G*o+V*y+B*P+W*F,G=i[4],V=i[5],B=i[6],W=i[7],t[4]=G*n+V*l+B*_+W*A,t[5]=G*s+V*c+B*x+W*D,t[6]=G*r+V*f+B*S+W*N,t[7]=G*o+V*y+B*P+W*F,G=i[8],V=i[9],B=i[10],W=i[11],t[8]=G*n+V*l+B*_+W*A,t[9]=G*s+V*c+B*x+W*D,t[10]=G*r+V*f+B*S+W*N,t[11]=G*o+V*y+B*P+W*F,G=i[12],V=i[13],B=i[14],W=i[15],t[12]=G*n+V*l+B*_+W*A,t[13]=G*s+V*c+B*x+W*D,t[14]=G*r+V*f+B*S+W*N,t[15]=G*o+V*y+B*P+W*F,t}function D8e(t,e,i){const n=i[0],s=i[1],r=i[2];if(e===t)t[12]=e[0]*n+e[4]*s+e[8]*r+e[12],t[13]=e[1]*n+e[5]*s+e[9]*r+e[13],t[14]=e[2]*n+e[6]*s+e[10]*r+e[14],t[15]=e[3]*n+e[7]*s+e[11]*r+e[15];else{const o=e[0],l=e[1],c=e[2],f=e[3],y=e[4],_=e[5],x=e[6],S=e[7],P=e[8],A=e[9],D=e[10],N=e[11];t[0]=o,t[1]=l,t[2]=c,t[3]=f,t[4]=y,t[5]=_,t[6]=x,t[7]=S,t[8]=P,t[9]=A,t[10]=D,t[11]=N,t[12]=o*n+y*s+P*r+e[12],t[13]=l*n+_*s+A*r+e[13],t[14]=c*n+x*s+D*r+e[14],t[15]=f*n+S*s+N*r+e[15]}return t}function N8e(t,e,i){const n=i[0],s=i[1],r=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function O8e(t,e,i,n){let s=n[0],r=n[1],o=n[2],l=Math.sqrt(s*s+r*r+o*o);if(l<=ho())return void Yhe(t,e);l=1/l,s*=l,r*=l,o*=l;const c=Math.sin(i),f=Math.cos(i),y=1-f,_=e[0],x=e[1],S=e[2],P=e[3],A=e[4],D=e[5],N=e[6],F=e[7],G=e[8],V=e[9],B=e[10],W=e[11],J=s*s*y+f,re=r*s*y+o*c,ne=o*s*y-r*c,oe=s*r*y-o*c,pe=r*r*y+f,ce=o*r*y+s*c,ue=s*o*y+r*c,se=r*o*y-s*c,de=o*o*y+f;t[0]=_*J+A*re+G*ne,t[1]=x*J+D*re+V*ne,t[2]=S*J+N*re+B*ne,t[3]=P*J+F*re+W*ne,t[4]=_*oe+A*pe+G*ce,t[5]=x*oe+D*pe+V*ce,t[6]=S*oe+N*pe+B*ce,t[7]=P*oe+F*pe+W*ce,t[8]=_*ue+A*se+G*de,t[9]=x*ue+D*se+V*de,t[10]=S*ue+N*se+B*de,t[11]=P*ue+F*se+W*de,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function $8e(t,e,i){const n=Math.sin(i),s=Math.cos(i),r=e[4],o=e[5],l=e[6],c=e[7],f=e[8],y=e[9],_=e[10],x=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*s+f*n,t[5]=o*s+y*n,t[6]=l*s+_*n,t[7]=c*s+x*n,t[8]=f*s-r*n,t[9]=y*s-o*n,t[10]=_*s-l*n,t[11]=x*s-c*n,t}function R8e(t,e,i){const n=Math.sin(i),s=Math.cos(i),r=e[0],o=e[1],l=e[2],c=e[3],f=e[8],y=e[9],_=e[10],x=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*s-f*n,t[1]=o*s-y*n,t[2]=l*s-_*n,t[3]=c*s-x*n,t[8]=r*n+f*s,t[9]=o*n+y*s,t[10]=l*n+_*s,t[11]=c*n+x*s,t}function L8e(t,e,i){const n=Math.sin(i),s=Math.cos(i),r=e[0],o=e[1],l=e[2],c=e[3],f=e[4],y=e[5],_=e[6],x=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*s+f*n,t[1]=o*s+y*n,t[2]=l*s+_*n,t[3]=c*s+x*n,t[4]=f*s-r*n,t[5]=y*s-o*n,t[6]=_*s-l*n,t[7]=x*s-c*n,t}function F8e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function z8e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Zhe(t,e,i){if(e===0)return pA(t);let n=i[0],s=i[1],r=i[2],o=Math.sqrt(n*n+s*s+r*r);if(o<=ho())return null;o=1/o,n*=o,s*=o,r*=o;const l=Math.sin(e),c=Math.cos(e),f=1-c;return t[0]=n*n*f+c,t[1]=s*n*f+r*l,t[2]=r*n*f-s*l,t[3]=0,t[4]=n*s*f-r*l,t[5]=s*s*f+c,t[6]=r*s*f+n*l,t[7]=0,t[8]=n*r*f+s*l,t[9]=s*r*f-n*l,t[10]=r*r*f+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function q8e(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function V8e(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function G8e(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Khe(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=n+n,c=s+s,f=r+r,y=n*l,_=n*c,x=n*f,S=s*c,P=s*f,A=r*f,D=o*l,N=o*c,F=o*f;return t[0]=1-(S+A),t[1]=_+F,t[2]=x-N,t[3]=0,t[4]=_-F,t[5]=1-(y+A),t[6]=P+D,t[7]=0,t[8]=x+N,t[9]=P-D,t[10]=1-(y+S),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function j8e(t,e){const i=B8e,n=-e[0],s=-e[1],r=-e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=n*n+s*s+r*r+o*o;return _>0?(i[0]=2*(l*o+y*n+c*r-f*s)/_,i[1]=2*(c*o+y*s+f*n-l*r)/_,i[2]=2*(f*o+y*r+l*s-c*n)/_):(i[0]=2*(l*o+y*n+c*r-f*s),i[1]=2*(c*o+y*s+f*n-l*r),i[2]=2*(f*o+y*r+l*s-c*n)),Khe(t,e,i),t}const B8e=$t();function H8e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function U8e(t,e){const i=e[0],n=e[1],s=e[2],r=e[4],o=e[5],l=e[6],c=e[8],f=e[9],y=e[10];return t[0]=Math.sqrt(i*i+n*n+s*s),t[1]=Math.sqrt(r*r+o*o+l*l),t[2]=Math.sqrt(c*c+f*f+y*y),t}function Y8e(t,e){const i=e[0]+e[5]+e[10];let n=0;return i>0?(n=2*Math.sqrt(i+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function X8e(t,e,i,n){const s=e[0],r=e[1],o=e[2],l=e[3],c=s+s,f=r+r,y=o+o,_=s*c,x=s*f,S=s*y,P=r*f,A=r*y,D=o*y,N=l*c,F=l*f,G=l*y,V=n[0],B=n[1],W=n[2];return t[0]=(1-(P+D))*V,t[1]=(x+G)*V,t[2]=(S-F)*V,t[3]=0,t[4]=(x-G)*B,t[5]=(1-(_+D))*B,t[6]=(A+N)*B,t[7]=0,t[8]=(S+F)*W,t[9]=(A-N)*W,t[10]=(1-(_+P))*W,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function W8e(t,e,i,n,s){const r=e[0],o=e[1],l=e[2],c=e[3],f=r+r,y=o+o,_=l+l,x=r*f,S=r*y,P=r*_,A=o*y,D=o*_,N=l*_,F=c*f,G=c*y,V=c*_,B=n[0],W=n[1],J=n[2],re=s[0],ne=s[1],oe=s[2],pe=(1-(A+N))*B,ce=(S+V)*B,ue=(P-G)*B,se=(S-V)*W,de=(1-(x+N))*W,Se=(D+F)*W,Pe=(P+G)*J,Re=(D-F)*J,$e=(1-(x+A))*J;return t[0]=pe,t[1]=ce,t[2]=ue,t[3]=0,t[4]=se,t[5]=de,t[6]=Se,t[7]=0,t[8]=Pe,t[9]=Re,t[10]=$e,t[11]=0,t[12]=i[0]+re-(pe*re+se*ne+Pe*oe),t[13]=i[1]+ne-(ce*re+de*ne+Re*oe),t[14]=i[2]+oe-(ue*re+Se*ne+$e*oe),t[15]=1,t}function Z8e(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],o=i+i,l=n+n,c=s+s,f=i*o,y=n*o,_=n*l,x=s*o,S=s*l,P=s*c,A=r*o,D=r*l,N=r*c;return t[0]=1-_-P,t[1]=y+N,t[2]=x-D,t[3]=0,t[4]=y-N,t[5]=1-f-P,t[6]=S+A,t[7]=0,t[8]=x+D,t[9]=S-A,t[10]=1-f-_,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function K8e(t,e,i,n,s,r,o){const l=1/(i-e),c=1/(s-n),f=1/(r-o);return t[0]=2*r*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*c,t[6]=0,t[7]=0,t[8]=(i+e)*l,t[9]=(s+n)*c,t[10]=(o+r)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*r*2*f,t[15]=0,t}function J8e(t,e,i,n,s){const r=1/Math.tan(e/2);let o;return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(n-s),t[10]=(s+n)*o,t[14]=2*s*n*o):(t[10]=-1,t[14]=-2*n),t}function Q8e(t,e,i,n){const s=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+l),f=2/(s+r);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(o-l)*c*.5,t[9]=(s-r)*f*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t}function eNe(t,e,i,n,s,r,o){const l=1/(e-i),c=1/(n-s),f=1/(r-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+i)*l,t[13]=(s+n)*c,t[14]=(o+r)*f,t[15]=1,t}function tNe(t,e,i,n){const s=e[0],r=e[1],o=e[2];let l=s-i[0],c=r-i[1],f=o-i[2];const y=ho();if(Math.abs(l)<y&&Math.abs(c)<y&&Math.abs(f)<y)return void pA(t);let _=1/Math.sqrt(l*l+c*c+f*f);l*=_,c*=_,f*=_;const x=n[0],S=n[1],P=n[2];let A=S*f-P*c,D=P*l-x*f,N=x*c-S*l;_=Math.sqrt(A*A+D*D+N*N),_?(_=1/_,A*=_,D*=_,N*=_):(A=0,D=0,N=0);let F=c*N-f*D,G=f*A-l*N,V=l*D-c*A;_=Math.sqrt(F*F+G*G+V*V),_?(_=1/_,F*=_,G*=_,V*=_):(F=0,G=0,V=0),t[0]=A,t[1]=F,t[2]=l,t[3]=0,t[4]=D,t[5]=G,t[6]=c,t[7]=0,t[8]=N,t[9]=V,t[10]=f,t[11]=0,t[12]=-(A*s+D*r+N*o),t[13]=-(F*s+G*r+V*o),t[14]=-(l*s+c*r+f*o),t[15]=1}function iNe(t,e,i,n){const s=e[0],r=e[1],o=e[2],l=n[0],c=n[1],f=n[2];let y=s-i[0],_=r-i[1],x=o-i[2],S=y*y+_*_+x*x;S>0&&(S=1/Math.sqrt(S),y*=S,_*=S,x*=S);let P=c*x-f*_,A=f*y-l*x,D=l*_-c*y;return S=P*P+A*A+D*D,S>0&&(S=1/Math.sqrt(S),P*=S,A*=S,D*=S),t[0]=P,t[1]=A,t[2]=D,t[3]=0,t[4]=_*D-x*A,t[5]=x*P-y*D,t[6]=y*A-_*P,t[7]=0,t[8]=y,t[9]=_,t[10]=x,t[11]=0,t[12]=s,t[13]=r,t[14]=o,t[15]=1,t}function nNe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function sNe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function rNe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function Jhe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function oNe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function aNe(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t[9]=e[9]+i[9]*n,t[10]=e[10]+i[10]*n,t[11]=e[11]+i[11]*n,t[12]=e[12]+i[12]*n,t[13]=e[13]+i[13]*n,t[14]=e[14]+i[14]*n,t[15]=e[15]+i[15]*n,t}function lNe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function cNe(t,e){if(t===e)return!0;const i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],l=t[5],c=t[6],f=t[7],y=t[8],_=t[9],x=t[10],S=t[11],P=t[12],A=t[13],D=t[14],N=t[15],F=e[0],G=e[1],V=e[2],B=e[3],W=e[4],J=e[5],re=e[6],ne=e[7],oe=e[8],pe=e[9],ce=e[10],ue=e[11],se=e[12],de=e[13],Se=e[14],Pe=e[15],Re=ho();return Math.abs(i-F)<=Re*Math.max(1,Math.abs(i),Math.abs(F))&&Math.abs(n-G)<=Re*Math.max(1,Math.abs(n),Math.abs(G))&&Math.abs(s-V)<=Re*Math.max(1,Math.abs(s),Math.abs(V))&&Math.abs(r-B)<=Re*Math.max(1,Math.abs(r),Math.abs(B))&&Math.abs(o-W)<=Re*Math.max(1,Math.abs(o),Math.abs(W))&&Math.abs(l-J)<=Re*Math.max(1,Math.abs(l),Math.abs(J))&&Math.abs(c-re)<=Re*Math.max(1,Math.abs(c),Math.abs(re))&&Math.abs(f-ne)<=Re*Math.max(1,Math.abs(f),Math.abs(ne))&&Math.abs(y-oe)<=Re*Math.max(1,Math.abs(y),Math.abs(oe))&&Math.abs(_-pe)<=Re*Math.max(1,Math.abs(_),Math.abs(pe))&&Math.abs(x-ce)<=Re*Math.max(1,Math.abs(x),Math.abs(ce))&&Math.abs(S-ue)<=Re*Math.max(1,Math.abs(S),Math.abs(ue))&&Math.abs(P-se)<=Re*Math.max(1,Math.abs(P),Math.abs(se))&&Math.abs(A-de)<=Re*Math.max(1,Math.abs(A),Math.abs(de))&&Math.abs(D-Se)<=Re*Math.max(1,Math.abs(D),Math.abs(Se))&&Math.abs(N-Pe)<=Re*Math.max(1,Math.abs(N),Math.abs(Pe))}function uNe(t){const e=ho(),i=t[0],n=t[1],s=t[2],r=t[4],o=t[5],l=t[6],c=t[8],f=t[9],y=t[10];return Math.abs(1-(i*i+r*r+c*c))<=e&&Math.abs(1-(n*n+o*o+f*f))<=e&&Math.abs(1-(s*s+l*l+y*y))<=e}function hNe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const dNe=Whe,fNe=Jhe;Object.freeze(Object.defineProperty({__proto__:null,add:rNe,adjoint:A8e,copy:Yhe,determinant:k8e,equals:cNe,exactEquals:lNe,frob:sNe,fromQuat:Z8e,fromQuat2:j8e,fromRotation:Zhe,fromRotationTranslation:Khe,fromRotationTranslationScale:X8e,fromRotationTranslationScaleOrigin:W8e,fromScaling:z8e,fromTranslation:F8e,fromXRotation:q8e,fromYRotation:V8e,fromZRotation:G8e,frustum:K8e,getRotation:Y8e,getScaling:U8e,getTranslation:H8e,hasIdentityRotation:hNe,identity:pA,invert:Xhe,invertOrIdentity:M8e,isOrthoNormal:uNe,lookAt:tNe,mul:dNe,multiply:Whe,multiplyScalar:oNe,multiplyScalarAndAdd:aNe,ortho:eNe,perspective:J8e,perspectiveFromFieldOfView:Q8e,rotate:O8e,rotateX:$8e,rotateY:R8e,rotateZ:L8e,scale:N8e,set:Y0,str:nNe,sub:fNe,subtract:Jhe,targetTo:iNe,translate:D8e,transpose:X0},Symbol.toStringTag,{value:"Module"}));const pNe=(t,e)=>{const i=Y0(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return X0(i,i)},mNe=(t,e)=>{const i=Y0(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return X0(i,i)},gNe=(t,e)=>{const i=1-e,n=Y0(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return X0(n,n)},yNe=(t,e)=>{const i=Math.sin(e*Math.PI/180),n=Math.cos(e*Math.PI/180),s=Y0(t,.213+.787*n-.213*i,.715-.715*n-.715*i,.072-.072*n+.928*i,0,.213-.213*n+.143*i,.715+.285*n+.14*i,.072-.072*n-.283*i,0,.213-.213*n-.787*i,.715-.715*n+.715*i,.072+.928*n+.072*i,0,0,0,0,1);return X0(s,s)},vNe=(t,e)=>{const i=1-2*e,n=Y0(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return X0(n,n)},_Ne=(t,e)=>{const i=Y0(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return X0(i,i)},bNe=(t,e)=>{const i=1-e,n=Y0(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return X0(n,n)};let Qhe=class ede{constructor(e,i,n){this.strength=e,this.radius=i,this.threshold=n,this.type="bloom"}interpolate(e,i,n){this.strength=Xl(e.strength,i.strength,n),this.radius=Xl(e.radius,i.radius,n),this.threshold=Xl(e.threshold,i.threshold,n)}clone(){return new ede(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:US(this.radius),strength:this.strength,threshold:this.threshold}}},tde=class ide{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,n){this.radius=Math.round(Xl(e.radius,i.radius,n))}clone(){return new ide(this.radius)}toJSON(){return{type:"blur",radius:US(this.radius)}}},lR=class nde{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.amount=Xl(e.amount,i.amount,n),this._updateMatrix()}clone(){return new nde(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||fA();switch(this.type){case"brightness":this._colorMatrix=pNe(e,this.amount);break;case"contrast":this._colorMatrix=mNe(e,this.amount);break;case"grayscale":this._colorMatrix=gNe(e,this.amount);break;case"invert":this._colorMatrix=vNe(e,this.amount);break;case"saturate":this._colorMatrix=_Ne(e,this.amount);break;case"sepia":this._colorMatrix=bNe(e,this.amount)}}},sde=class rde{constructor(e,i,n,s){this.offsetX=e,this.offsetY=i,this.blurRadius=n,this.color=s,this.type="drop-shadow"}interpolate(e,i,n){this.offsetX=Xl(e.offsetX,i.offsetX,n),this.offsetY=Xl(e.offsetY,i.offsetY,n),this.blurRadius=Xl(e.blurRadius,i.blurRadius,n),this.color[0]=Math.round(Xl(e.color[0],i.color[0],n)),this.color[1]=Math.round(Xl(e.color[1],i.color[1],n)),this.color[2]=Math.round(Xl(e.color[2],i.color[2],n)),this.color[3]=Xl(e.color[3],i.color[3],n)}clone(){return new rde(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:US(this.offsetX),yoffset:US(this.offsetY),blurRadius:US(this.blurRadius),color:e}}},ode=class ade{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.angle=Xl(e.angle,i.angle,n),this._updateMatrix()}clone(){return new ade(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||fA();this._colorMatrix=yNe(e,this.angle)}},lde=class cde{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,n){this.amount=Xl(e.amount,i.amount,n)}clone(){return new cde(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Xl(t,e,i){return t+(e-t)*i}function US(t){return Math.round(1e3*eh(t))/1e3}function xNe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new lR(t.type,0);case"saturate":case"brightness":case"contrast":return new lR(t.type,1);case"opacity":return new lde(1);case"hue-rotate":return new ode(0);case"blur":return new tde(0);case"drop-shadow":return new sde(0,0,0,[...cG("transparent")]);case"bloom":return new Qhe(0,0,1)}}function wNe(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((n,s)=>n.type===i[s].type)}function SNe(t,e){const i=t.length>e.length?t:e,n=t.length>e.length?e:t;for(let s=n.length;s<i.length;s++)n.push(xNe(i[s]))}function ENe(t){const e=t[0];return!!e&&"type"in e}function vpt(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}function CNe(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}function c2(t,e,i,n){var s=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(s,c2.prototype),s.expected=e,s.found=i,s.location=n,s.name="SyntaxError",s}function X8(t,e,i){return i=i||" ",t.length>e?t:(e-=t.length,t+(i+=i.repeat(e)).slice(0,e))}function PNe(t,e){var i,n={},s=(e=e!==void 0?e:{}).grammarSource,r={start:oi},o=oi,l="none",c=")",f=",",y="(",_="%",x="px",S="cm",P="mm",A="in",D="pt",N="pc",F="deg",G="rad",V="grad",B="turn",W="#",J=".",re="e",ne=/^[ \t\n\r]/,oe=/^[a-z\-]/,pe=/^[0-9a-fA-F]/,ce=/^[+\-]/,ue=/^[0-9]/,se=dt("none"),de=Ve("none",!1),Se=Ve(")",!1),Pe=Ve(",",!1),Re=dt("whitespace"),$e=Xe([" ","	",`
`,"\r"],!1,!1),we=dt("function"),Fe=Ve("(",!1),it=dt("identifier"),_t=Xe([["a","z"],"-"],!1,!1),ot=dt("percentage"),ut=Ve("%",!1),Pt=dt("length"),Vt=Ve("px",!1),Ft=Ve("cm",!1),Nt=Ve("mm",!1),Wi=Ve("in",!1),hn=Ve("pt",!1),ps=Ve("pc",!1),Yn=dt("angle"),fr=Ve("deg",!1),fo=Ve("rad",!1),sn=Ve("grad",!1),ye=Ve("turn",!1),qi=dt("number"),Ir=dt("color"),ri=Ve("#",!1),Ai=Xe([["0","9"],["a","f"],["A","F"]],!1,!1),ms=Xe(["+","-"],!1,!1),gn=Xe([["0","9"]],!1,!1),Ji=Ve(".",!1),is=Ve("e",!1),gs=function(){return[]},Wr=function(ze,pt){return{type:"function",name:ze,parameters:pt||[]}},Tn=function(ze,pt){return pt.length>0?Jc(ze,pt,3):[ze]},wt=function(ze){return{type:"quantity",value:ze.value,unit:ze.unit}},Xn=function(ze){return{type:"color",colorType:ze.type,value:ze.value}},m=function(ze){return ze},j=function(){return Ne()},T=function(ze){return{value:ze,unit:"%"}},p=function(ze){return{value:ze,unit:"px"}},h=function(ze){return{value:ze,unit:"cm"}},a=function(ze){return{value:ze,unit:"mm"}},u=function(ze){return{value:ze,unit:"in"}},d=function(ze){return{value:ze,unit:"pt"}},g=function(ze){return{value:ze,unit:"pc"}},v=function(ze){return{value:ze,unit:"deg"}},b=function(ze){return{value:ze,unit:"rad"}},C=function(ze){return{value:ze,unit:"grad"}},M=function(ze){return{value:ze,unit:"turn"}},$=function(ze){return{value:ze,unit:null}},L=function(){return{type:"hex",value:Ne()}},q=function(ze){return{type:"function",value:ze}},U=function(){return{type:"named",value:Ne()}},ee=function(){return parseFloat(Ne())},Q=0|e.peg$currPos,ge=Q,ve=[{line:1,column:1}],fe=Q,Ce=e.peg$maxFailExpected||[],Ie=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in r))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');o=r[e.startRule]}function Ne(){return t.substring(ge,Q)}function Ve(ze,pt){return{type:"literal",text:ze,ignoreCase:pt}}function Xe(ze,pt,Tt){return{type:"class",parts:ze,inverted:pt,ignoreCase:Tt}}function et(){return{type:"end"}}function dt(ze){return{type:"other",description:ze}}function ct(ze){var pt,Tt=ve[ze];if(Tt)return Tt;if(ze>=ve.length)pt=ve.length-1;else for(pt=ze;!ve[--pt];);for(Tt={line:(Tt=ve[pt]).line,column:Tt.column};pt<ze;)t.charCodeAt(pt)===10?(Tt.line++,Tt.column=1):Tt.column++,pt++;return ve[ze]=Tt,Tt}function mt(ze,pt,Tt){var ei=ct(ze),Rn=ct(pt);return{source:s,start:{offset:ze,line:ei.line,column:ei.column},end:{offset:pt,line:Rn.line,column:Rn.column}}}function lt(ze){Q<fe||(Q>fe&&(fe=Q,Ce=[]),Ce.push(ze))}function gi(ze,pt,Tt){return new c2(c2.buildMessage(ze,pt),ze,pt,Tt)}function oi(){var ze;return(ze=Ni())===n&&(ze=Qi()),ze}function Ni(){var ze,pt;return Ie++,ze=Q,ui(),t.substr(Q,4)===l?(pt=l,Q+=4):(pt=n,Ie===0&&lt(de)),pt!==n?(ui(),ge=ze,ze=gs()):(Q=ze,ze=n),Ie--,ze===n&&Ie===0&&lt(se),ze}function Qi(){var ze,pt;if(ze=[],(pt=xn())!==n)for(;pt!==n;)ze.push(pt),pt=xn();else ze=n;return ze}function xn(){var ze,pt,Tt,ei;return ze=Q,ui(),(pt=Kt())!==n?(ui(),(Tt=ln())===n&&(Tt=null),ui(),t.charCodeAt(Q)===41?(ei=c,Q++):(ei=n,Ie===0&&lt(Se)),ei!==n?(ui(),ge=ze,ze=Wr(pt,Tt)):(Q=ze,ze=n)):(Q=ze,ze=n),ze}function ln(){var ze,pt,Tt,ei,Rn,Ns,Os,Zr;if(ze=Q,(pt=Oi())!==n){for(Tt=[],ei=Q,Rn=ui(),t.charCodeAt(Q)===44?(Ns=f,Q++):(Ns=n,Ie===0&&lt(Pe)),Ns===n&&(Ns=null),Os=ui(),(Zr=Oi())!==n?ei=Rn=[Rn,Ns,Os,Zr]:(Q=ei,ei=n);ei!==n;)Tt.push(ei),ei=Q,Rn=ui(),t.charCodeAt(Q)===44?(Ns=f,Q++):(Ns=n,Ie===0&&lt(Pe)),Ns===n&&(Ns=null),Os=ui(),(Zr=Oi())!==n?ei=Rn=[Rn,Ns,Os,Zr]:(Q=ei,ei=n);ge=ze,ze=Tn(pt,Tt)}else Q=ze,ze=n;return ze}function Oi(){var ze,pt;return ze=Q,(pt=In())===n&&(pt=tr())===n&&(pt=wi())===n&&(pt=ns()),pt!==n&&(ge=ze,pt=wt(pt)),(ze=pt)===n&&(ze=Q,(pt=rn())!==n&&(ge=ze,pt=Xn(pt)),ze=pt),ze}function ui(){var ze,pt;for(Ie++,ze=[],pt=t.charAt(Q),ne.test(pt)?Q++:(pt=n,Ie===0&&lt($e));pt!==n;)ze.push(pt),pt=t.charAt(Q),ne.test(pt)?Q++:(pt=n,Ie===0&&lt($e));return Ie--,pt=n,Ie===0&&lt(Re),ze}function Kt(){var ze,pt,Tt;return Ie++,ze=Q,(pt=Wn())!==n?(t.charCodeAt(Q)===40?(Tt=y,Q++):(Tt=n,Ie===0&&lt(Fe)),Tt!==n?(ge=ze,ze=m(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),Ie--,ze===n&&(pt=n,Ie===0&&lt(we)),ze}function Wn(){var ze,pt,Tt;if(Ie++,ze=Q,pt=[],Tt=t.charAt(Q),oe.test(Tt)?Q++:(Tt=n,Ie===0&&lt(_t)),Tt!==n)for(;Tt!==n;)pt.push(Tt),Tt=t.charAt(Q),oe.test(Tt)?Q++:(Tt=n,Ie===0&&lt(_t));else pt=n;return pt!==n&&(ge=ze,pt=j()),Ie--,(ze=pt)===n&&(pt=n,Ie===0&&lt(it)),ze}function In(){var ze,pt,Tt;return Ie++,ze=Q,ui(),(pt=pr())!==n?(t.charCodeAt(Q)===37?(Tt=_,Q++):(Tt=n,Ie===0&&lt(ut)),Tt!==n?(ge=ze,ze=T(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),Ie--,ze===n&&Ie===0&&lt(ot),ze}function tr(){var ze,pt,Tt;return Ie++,ze=Q,ui(),(pt=pr())!==n?(t.substr(Q,2)===x?(Tt=x,Q+=2):(Tt=n,Ie===0&&lt(Vt)),Tt!==n?(ge=ze,ze=p(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),ze===n&&(ze=Q,ui(),(pt=pr())!==n?(t.substr(Q,2)===S?(Tt=S,Q+=2):(Tt=n,Ie===0&&lt(Ft)),Tt!==n?(ge=ze,ze=h(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),ze===n&&(ze=Q,ui(),(pt=pr())!==n?(t.substr(Q,2)===P?(Tt=P,Q+=2):(Tt=n,Ie===0&&lt(Nt)),Tt!==n?(ge=ze,ze=a(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),ze===n&&(ze=Q,ui(),(pt=pr())!==n?(t.substr(Q,2)===A?(Tt=A,Q+=2):(Tt=n,Ie===0&&lt(Wi)),Tt!==n?(ge=ze,ze=u(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),ze===n&&(ze=Q,ui(),(pt=pr())!==n?(t.substr(Q,2)===D?(Tt=D,Q+=2):(Tt=n,Ie===0&&lt(hn)),Tt!==n?(ge=ze,ze=d(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),ze===n&&(ze=Q,ui(),(pt=pr())!==n?(t.substr(Q,2)===N?(Tt=N,Q+=2):(Tt=n,Ie===0&&lt(ps)),Tt!==n?(ge=ze,ze=g(pt)):(Q=ze,ze=n)):(Q=ze,ze=n)))))),Ie--,ze===n&&Ie===0&&lt(Pt),ze}function wi(){var ze,pt,Tt;return Ie++,ze=Q,(pt=pr())!==n?(t.substr(Q,3)===F?(Tt=F,Q+=3):(Tt=n,Ie===0&&lt(fr)),Tt!==n?(ge=ze,ze=v(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),ze===n&&(ze=Q,(pt=pr())!==n?(t.substr(Q,3)===G?(Tt=G,Q+=3):(Tt=n,Ie===0&&lt(fo)),Tt!==n?(ge=ze,ze=b(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),ze===n&&(ze=Q,(pt=pr())!==n?(t.substr(Q,4)===V?(Tt=V,Q+=4):(Tt=n,Ie===0&&lt(sn)),Tt!==n?(ge=ze,ze=C(pt)):(Q=ze,ze=n)):(Q=ze,ze=n),ze===n&&(ze=Q,(pt=pr())!==n?(t.substr(Q,4)===B?(Tt=B,Q+=4):(Tt=n,Ie===0&&lt(ye)),Tt!==n?(ge=ze,ze=M(pt)):(Q=ze,ze=n)):(Q=ze,ze=n)))),Ie--,ze===n&&(pt=n,Ie===0&&lt(Yn)),ze}function ns(){var ze,pt;return Ie++,ze=Q,ui(),(pt=pr())!==n?(ge=ze,ze=$(pt)):(Q=ze,ze=n),Ie--,ze===n&&Ie===0&&lt(qi),ze}function rn(){var ze,pt,Tt,ei;if(Ie++,ze=Q,t.charCodeAt(Q)===35?(pt=W,Q++):(pt=n,Ie===0&&lt(ri)),pt!==n){if(Tt=[],ei=t.charAt(Q),pe.test(ei)?Q++:(ei=n,Ie===0&&lt(Ai)),ei!==n)for(;ei!==n;)Tt.push(ei),ei=t.charAt(Q),pe.test(ei)?Q++:(ei=n,Ie===0&&lt(Ai));else Tt=n;Tt!==n?(ge=ze,ze=L()):(Q=ze,ze=n)}else Q=ze,ze=n;return ze===n&&(ze=Q,(pt=xn())!==n&&(ge=ze,pt=q(pt)),(ze=pt)===n&&(ze=Q,(pt=Wn())!==n&&(ge=ze,pt=U()),ze=pt)),Ie--,ze===n&&(pt=n,Ie===0&&lt(Ir)),ze}function pr(){var ze,pt,Tt,ei,Rn,Ns,Os,Zr;for(ze=Q,pt=t.charAt(Q),ce.test(pt)?Q++:(pt=n,Ie===0&&lt(ms)),pt===n&&(pt=null),Tt=Q,ei=[],Rn=t.charAt(Q),ue.test(Rn)?Q++:(Rn=n,Ie===0&&lt(gn));Rn!==n;)ei.push(Rn),Rn=t.charAt(Q),ue.test(Rn)?Q++:(Rn=n,Ie===0&&lt(gn));if(t.charCodeAt(Q)===46?(Rn=J,Q++):(Rn=n,Ie===0&&lt(Ji)),Rn!==n){if(Ns=[],Os=t.charAt(Q),ue.test(Os)?Q++:(Os=n,Ie===0&&lt(gn)),Os!==n)for(;Os!==n;)Ns.push(Os),Os=t.charAt(Q),ue.test(Os)?Q++:(Os=n,Ie===0&&lt(gn));else Ns=n;Ns!==n?Tt=ei=[ei,Rn,Ns]:(Q=Tt,Tt=n)}else Q=Tt,Tt=n;if(Tt===n)if(Tt=[],ei=t.charAt(Q),ue.test(ei)?Q++:(ei=n,Ie===0&&lt(gn)),ei!==n)for(;ei!==n;)Tt.push(ei),ei=t.charAt(Q),ue.test(ei)?Q++:(ei=n,Ie===0&&lt(gn));else Tt=n;if(Tt!==n){if(ei=Q,t.charCodeAt(Q)===101?(Rn=re,Q++):(Rn=n,Ie===0&&lt(is)),Rn!==n){if(Ns=t.charAt(Q),ce.test(Ns)?Q++:(Ns=n,Ie===0&&lt(ms)),Ns===n&&(Ns=null),Os=[],Zr=t.charAt(Q),ue.test(Zr)?Q++:(Zr=n,Ie===0&&lt(gn)),Zr!==n)for(;Zr!==n;)Os.push(Zr),Zr=t.charAt(Q),ue.test(Zr)?Q++:(Zr=n,Ie===0&&lt(gn));else Os=n;Os!==n?ei=Rn=[Rn,Ns,Os]:(Q=ei,ei=n)}else Q=ei,ei=n;ei===n&&(ei=null),ge=ze,ze=ee()}else Q=ze,ze=n;return ze}function ah(ze,pt){return ze.map(function(Tt){return Tt[pt]})}function Jc(ze,pt,Tt){return[ze].concat(ah(pt,Tt))}if(i=o(),e.peg$library)return{peg$result:i,peg$currPos:Q,peg$FAILED:n,peg$maxFailExpected:Ce,peg$maxFailPos:fe};if(i!==n&&Q===t.length)return i;throw i!==n&&Q<t.length&&lt(et()),gi(Ce,fe<t.length?t.charAt(fe):null,fe<t.length?mt(fe,fe+1):mt(fe,fe))}function ude(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=bK(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new rt("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:bK(i.value)}});e.sort((i,n)=>n.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!wNe(e[i].effects,e[i+1].effects))throw new rt("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});SNe(e[i].effects,e[i+1].effects)}return e.sort((i,n)=>n.scale-i.scale),e}function bK(t){let e;if(!t)return[];try{e=PNe(t)}catch(i){throw new rt("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>TNe(i))}function TNe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return INe(t);case"opacity":return MNe(t);case"hue-rotate":return ANe(t);case"blur":return kNe(t);case"drop-shadow":return DNe(t);case"bloom":return NNe(t)}}catch(e){throw e.details.filter=t,e}throw new rt("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function INe(t){let e=1;return Ix(t.parameters,1),t.parameters.length===1&&(e=qh(t.parameters[0])),new lR(t.name,e)}function MNe(t){let e=1;return Ix(t.parameters,1),t.parameters.length===1&&(e=qh(t.parameters[0])),new lde(e)}function ANe(t){let e=0;return Ix(t.parameters,1),t.parameters.length===1&&(e=zNe(t.parameters[0])),new ode(e)}function kNe(t){let e=0;return Ix(t.parameters,1),t.parameters.length===1&&(e=fG(t.parameters[0]),JC(e,t.parameters[0])),new tde(e)}function DNe(t){const e=[];let i=null;for(const n of t.parameters)if(n.type==="color"){if(e.length&&Object.freeze(e),i)throw new rt("effect:type-error","Accepts only one color",{});i=qNe(n)}else{const s=fG(n);if(Object.isFrozen(e))throw new rt("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&JC(s,n)}if(e.length<2||e.length>3)throw new rt("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new sde(e[0],e[1],e[2]||0,i||hde("black"))}function NNe(t){let e=1,i=0,n=0;return Ix(t.parameters,3),t.parameters[0]&&(e=qh(t.parameters[0])),t.parameters[1]&&(i=fG(t.parameters[1]),JC(i,t.parameters[1])),t.parameters[2]&&(n=qh(t.parameters[2])),new Qhe(e,i,n)}function Ix(t,e){if(t.length>e)throw new rt("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function mA(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in dG)return"<length>";if(t.unit in hG)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function JC(t,e){if(t<0)throw new rt("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function ONe(t){if(t.type!=="quantity"||t.unit!==null)throw new rt("effect:type-error",`Expected <double>, Actual: ${mA(t)}`,{term:t})}function $Ne(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new rt("effect:type-error",`Expected <double> or <percentage>, Actual: ${mA(t)}`,{term:t})}CNe(c2,Error),c2.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var i,n=null;for(i=0;i<t.length;i++)if(t[i].source===this.location.source){n=t[i].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,r=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+r.line+":"+r.column;if(n){var l=this.location.end,c=X8("",r.line.toString().length," "),f=n[s.line-1],y=(s.line===l.line?l.column:f.length+1)-s.column||1;e+=`
 --> `+o+`
`+c+` |
`+r.line+" | "+f+`
`+c+" | "+X8("",s.column-1," ")+X8("",y,"^")}else e+=`
 at `+o}return e},c2.buildMessage=function(t,e){var i={literal:function(f){return'"'+s(f.text)+'"'},class:function(f){var y=f.parts.map(function(_){return Array.isArray(_)?r(_[0])+"-"+r(_[1]):r(_)});return"["+(f.inverted?"^":"")+y.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(f){return f.description}};function n(f){return f.charCodeAt(0).toString(16).toUpperCase()}function s(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+n(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+n(y)})}function r(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+n(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+n(y)})}function o(f){return i[f.type](f)}function l(f){var y,_,x=f.map(o);if(x.sort(),x.length>0){for(y=1,_=1;y<x.length;y++)x[y-1]!==x[y]&&(x[_]=x[y],_++);x.length=_}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}function c(f){return f?'"'+s(f)+'"':"end of input"}return"Expected "+l(t)+" but "+c(e)+" found."};const hG={deg:1,grad:.9,rad:180/Math.PI,turn:360};function RNe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&hG[t.unit]!=null))throw new rt("effect:type-error",`Expected <angle>, Actual: ${mA(t)}`,{term:t})}const dG={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function LNe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&dG[t.unit]!=null))throw new rt("effect:type-error",`Expected <length>, Actual: ${mA(t)}`,{term:t})}function qh(t){$Ne(t);const e=t.value;return JC(e,t),t.unit==="%"?.01*e:e}function FNe(t){return ONe(t),JC(t.value,t),t.value}function zNe(t){return RNe(t),t.value*hG[t.unit]||0}function fG(t){return LNe(t),t.value*dG[t.unit]||0}function qNe(t){switch(t.colorType){case"hex":return c8e(t.value);case"named":return hde(t.value);case"function":return jNe(t.value)}}function hde(t){if(!Rhe(t))throw new rt("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return l8e(t)}const VNe=/^rgba?/i,GNe=/^hsla?/i;function jNe(t){if(Ix(t.parameters,4),VNe.test(t.name))return[qh(t.parameters[0]),qh(t.parameters[1]),qh(t.parameters[2]),t.parameters[3]?qh(t.parameters[3]):1];if(GNe.test(t.name))return Lhe(FNe(t.parameters[0]),qh(t.parameters[1]),qh(t.parameters[2]),t.parameters[3]?qh(t.parameters[3]):1);throw new rt("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function DE(t,e,i){var n;try{return HNe(t)}catch(s){(n=i==null?void 0:i.messages)==null||n.push(s)}return null}function NE(t,e,i,n){try{const s=BNe(t);il(i,s,e)}catch(s){n.messages&&n.messages.push(s)}}function BNe(t){const e=ude(t);return e?ENe(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:n})=>({scale:i,value:n.map(s=>s.toJSON())})):null}function HNe(t){if(!t||t.length===0)return null;if(UNe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:xK(i.value)});return e}return xK(t)}function UNe(t){const e=t[0];return!!e&&"scale"in e}function xK(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let n=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":n=[cp(i,"amount")];break;case"blur":n=[cp(i,"radius","pt")];break;case"hue-rotate":n=[cp(i,"angle","deg")];break;case"drop-shadow":n=[cp(i,"xoffset","pt"),cp(i,"yoffset","pt"),cp(i,"blurRadius","pt"),YNe(i,"color")];break;case"bloom":n=[cp(i,"strength"),cp(i,"radius","pt"),cp(i,"threshold")]}const s=`${i.type}(${n.filter(Boolean).join(" ")})`;ude(s),e.push(s)}return e.join(" ")}function cp(t,e,i){if(t[e]==null)throw new rt("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function YNe(t,e){if(t[e]==null)throw new rt("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const XNe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},wK={read:{reader:DE},write:{allowNull:!0,writer:NE}},WNe={json:{read:!1,write:!1,origins:{"web-map":wK,"portal-item":wK}}},pG=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return I([O(XNe)],e.prototype,"blendMode",void 0),I([O(WNe)],e.prototype,"effect",void 0),e=I([De("esri.layers.mixins.BlendLayer")],e),e},Zo=(t=>t)(["operational-layers","basemap","ground"]),SK={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},EK={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},CK={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},ZNe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":SK,"web-map/basemap":EK,"web-map/tables":CK,"link-chart/operational-layers":{...SK,LinkChartLayer:!0},"link-chart/basemap":EK,"link-chart/tables":CK,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};function Mx(t,e){var n;const i=(n=e==null?void 0:e.url)==null?void 0:n.path;if(t&&i&&(t=_l(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const s=bV(t,e.portalItem.itemUrl);s!=null&&KNe.test(s)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(s).path)}return(t=cR(t,e==null?void 0:e.portal))&&gA.test(t)?gG(t):t}function QC(t,e,i=OE.YES){var s,r;if((t=t&&gA.test(t)?fde(t):t)==null)return t;!Fc(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let n=_l(t);if(e){const o=((s=e.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((r=e.url)==null?void 0:r.path);if(o){const l=cR(o,e.portal),c=cR(n,e.portal);n=bV(c,l,l),n!=null&&n!==c&&n!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=dde(n,e==null?void 0:e.portal),Fc(n)&&(n=Hu(n)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Fc(n)&&!Vv(n)&&i===OE.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(n),compress:!1}),n}function mG(t,e,i){return Mx(t,i)}function gv(t,e,i,n){const s=QC(t,n);s!==void 0&&(e[i]=s)}const gA=/\/items\/([^/]+)\/resources\/(.*)/,KNe=/^\.\/resources\//;function JNe(t){const e=(t==null?void 0:t.match(gA))??null;return(e==null?void 0:e[1])??null}function QNe(t){const e=(t==null?void 0:t.match(gA))??null;if(e==null)return null;const i=e[2],n=i.lastIndexOf("/");if(n===-1){const{path:o,extension:l}=XW(i);return{prefix:null,filename:o,extension:l}}const{path:s,extension:r}=XW(i.slice(n+1));return{prefix:i.slice(0,n),filename:s,extension:r}}function dde(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?x$(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function cR(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,n=yV();return Yl(n,`${n.scheme}://${i}`)?x$(t,e.portalHostname,i):x$(t,i,e.portalHostname)}function gG(t){if(!t)return t||null;let e=t;return e&&Li&&!Li.findCredential(e)&&(e=e6(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function fde(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Li&&!Li.findCredential(e)&&(e=e6(e)),e}var OE;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(OE||(OE={}));const _pt=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return OE},ensureMainOnlineDomain:dde,fromCDNUrl:fde,fromJSON:Mx,itemIdFromResourceUrl:JNe,prefixAndFilenameFromResourceUrl:QNe,read:mG,toCDNUrl:gG,toJSON:QC,write:gv},Symbol.toStringTag,{value:"Module"}));async function pde(t,e){const{WhereClause:i}=await st(()=>import("./WhereClause-CnhNRiNK.js").then(n=>n.W),__vite__mapDeps([97,55]),import.meta.url);return i.create(t,{fieldsIndex:e})}function mde(t,e){return t==="1=1"?e??t:e==="1=1"?t??e:t!=null&&t!==""?e!=null&&e!==""?`(${t}) AND (${e})`:t:e}function eOe(t){return typeof t=="number"}function yA(t){return typeof t=="string"||t instanceof String}const tOe=Sf,uR={date:null,time:null,timeZoneOffset:null},bpt=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]);var Ky;(function(t){t.HM="HH:mm",t.HMS="HH:mm:ss",t.HMS_MS="HH:mm:ss.SSS"})(Ky||(Ky={}));const iOe=[Ky.HMS_MS,Ky.HMS,Ky.HM,"TT"],e5="yyyy-MM-dd",nOe=Ky.HMS,sOe="latn",rOe=t=>"valueAsDate"in t;function yv(t){return{locale:zc(),numberingSystem:sOe,zone:t??tOe}}function gde(t,e){return t===null?null:hi.fromMillis(t,yv(e))}function oOe(t,e){if(t==null||!yA(t)||t===""){if(e){const n=hi.local({zone:e});return{date:null,time:null,timeZoneOffset:n.isValid?n.offset.toString():null}}return uR}const i=hi.fromISO(t,{setZone:!0});return{date:i.toFormat(e5,yv()),time:i.toFormat(Ky.HMS_MS,yv()),timeZoneOffset:i.offset.toString()}}function xpt(t,e){if(t==null||!eOe(t)||isNaN(t))return uR;const i=gde(t,e);return i?{date:i.toFormat(e5,yv(e)),time:i.toFormat(nOe,yv(e))}:uR}function wpt(t){switch(t.type){case"date":default:return w4("short-date-short-time");case"date-only":return w4("short-date");case"time-only":return w4("short-time");case"timestamp-offset":return{...w4("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function Spt(t,e,i){if(!t||e==null)return null;switch(t.type){case"date":return k0(e,i);case"date-only":return a7e(e,i);case"time-only":return l7e(e,i);case"timestamp-offset":return c7e(e,i);default:return null}}function Ept(t){const{dateComponent:e,defaultTimeZone:i,timeComponent:n,timeZoneComponent:s,oldValue:r}=t;if(!(e!=null&&e.value))return null;const{year:o,month:l,day:c}=hi.fromFormat(e.value,e5),{hour:f,minute:y,second:_,millisecond:x}=hR(n,Sf)??hi.now(),S=oOe(r,i),P=s!=null&&s.value?parseInt(s.value,10):S.timeZoneOffset!=null?parseInt(S.timeZoneOffset,10):new Date().getTimezoneOffset(),A=Xo.instance(P),D=hi.fromObject({year:o,month:l,day:c,hour:f,minute:y,second:_,millisecond:x},{zone:A});return D.isValid?D.toISO({includeOffset:!0}):null}function Cpt(t){const{dateComponent:e,timeComponent:i,timeZone:n,max:s,min:r,oldValue:o}=t,l=hR(e,n);let c=!!t.applyRange;if(!l)return null;let f=null;if((i==null?void 0:i.value)!=null){const _=hR(i,n),x=Date.now(),S=s!=null&&s<x?s:x,P=hi.fromMillis(S,yv(n)),A=l||P,{year:D,month:N,day:F}=A,{hour:G,minute:V,second:B,millisecond:W}=_||P;f=A.set({year:D,month:N,day:F,hour:G,minute:V,second:B,millisecond:W})}else{const _=gde(TK({value:o??Date.now(),max:s,min:r}),n),{year:x,month:S,day:P}=l,{hour:A,minute:D,second:N,millisecond:F}=_;c=!0,f=l.set({year:x,month:S,day:P,hour:A,minute:D,second:N,millisecond:F})}if(!f.isValid)return null;const y=f.toMillis();return c?TK({value:y,max:s,min:r}):y}function hR(t,e){if((t==null?void 0:t.value)==null||Array.isArray(t.value))return null;let i=null;return i=rOe(t)?hi.fromFormat(t.value,e5,yv(e)):u2(t.value),i!=null&&i.isValid?i:null}function PK(t){const{max:e,min:i,value:n}=t;return!isNaN(n)&&!(e!=null&&n>e)&&!(i!=null&&n<i)}function TK(t){const{max:e,min:i,value:n}=t;return e!=null&&i!=null?Qu(n,i,e):e!=null&&n>e?e:i!=null&&n<i?i:n}function aOe(t){if(!t)return"";const e=t.split(".").at(0);if(!e||e.length<1)throw new rt("invalid time-only field",`Cannot parse valid time-only field value from ${t}`);const i=e.split(":"),n=new Array(3);for(let s=0;s<3;s++){const r=i.at(s)??"";n[s]=r.padStart(2,"0")}return n.join(":")}function Ppt(t,e){switch(e){case"date":return t.getTime();case"date-only":return t.toISODate();case"time-only":return aOe(t.toISOTime(!0,!1));case"timestamp-offset":return t.toISOString(!1);default:return null}}function Tpt(t){return!!t&&typeof t=="object"&&"getTime"in t&&"toISOString"in t&&"timeZone"in t}function YS(t){if(!t||!yA(t))return null;const e=hi.fromFormat(t,e5);return e.isValid?e:null}function u2(t){return t&&yA(t)?X4e(iOe,e=>{const i=hi.fromFormat(t,e);return i.isValid?i:null})??null:null}function XS(t){if(!t||!yA(t))return null;const e=hi.fromISO(t);return e.isValid?e:null}function Ipt(t){const{type:e,range:i,value:n}=t;if(n==null||!i||n===i.min||n===i.max)return!0;if(e==="date")return PK({value:n,min:i.min,max:i.max});const{rawMax:s,rawMin:r}=i;let o=null,l=null,c=null;switch(e){case"date-only":o=YS(s),l=YS(r),c=YS(n);break;case"time-only":o=u2(s),l=u2(r),c=u2(n);break;case"timestamp-offset":o=XS(s),l=XS(r),c=XS(n)}return!c||PK({value:c.valueOf(),min:l==null?void 0:l.valueOf(),max:o==null?void 0:o.valueOf()})}var q2;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(q2||(q2={}));const lOe=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function cOe(t){return t!=null&&lOe.has(t.type)}function yde(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function vde(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function _de(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function uOe(t,e,i){const n=i??(t==null?void 0:t.domain);if(!n)return null;switch(n.type){case"range":{const{min:s,max:r}=bde(t,i);if(s!=null&&+e<s||r!=null&&+e>r)return q2.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(n.codedValues==null||n.codedValues.every(s=>s==null||s.code!==e))return q2.INVALID_CODED_VALUE}return null}function bde(t,e){const i=e??(t==null?void 0:t.domain);if(!i||i.type!=="range")return;const n="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,r=cOe(t);return yde(t)||_de(t)||vde(t)?{...hOe(t,s,n),isInteger:r}:{min:n!=null&&typeof n=="number"?n:null,max:s!=null&&typeof s=="number"?s:null,rawMin:n,rawMax:s,isInteger:r}}function hOe(t,e,i){var n,s,r,o,l,c;return yde(t)?{min:(n=YS(i))==null?void 0:n.toMillis(),max:(s=YS(e))==null?void 0:s.toMillis(),rawMin:i,rawMax:e}:_de(t)?{min:(r=u2(i))==null?void 0:r.toMillis(),max:(o=u2(e))==null?void 0:o.toMillis(),rawMin:i,rawMax:e}:vde(t)?{min:(l=XS(i))==null?void 0:l.toMillis(),max:(c=XS(e))==null?void 0:c.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}const dOe=()=>qt.getLogger("esri.support.arcadeOnDemand");let W8;function vv(){return W8||(W8=(async()=>{const t=await st(()=>import("./arcadeUtils-BCNWKMpC.js").then(e=>e.i),__vite__mapDeps([98,99,55,56,100,101,102,103,104,105]),import.meta.url);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),W8}const fOe=(t,e,i)=>xde.create(t,e,i,null,["$feature","$view"],[]),pOe=(t,e,i,n)=>xde.create(t,e,i,n,["$feature","$view"],[]);let xde=class wde{constructor(e,i,n,s,r,o,l){this.services=null,this.script=e,this.evaluate=s;const c=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=c??[],this._syntaxTree=n,this._arcade=i,this._arcadeFeature=r,this._spatialReference=l,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,n,s,r,o){const{arcade:l,Feature:c,Dictionary:f}=await vv(),y=i instanceof Gi?i:Gi.fromJSON(i);let _;try{_=l.parseScript(e,o)}catch(re){return dOe().error(new rt("arcade-bad-expression","Failed to parse arcade script",{script:e,error:re})),null}const x=r.reduce((re,ne)=>({...re,[ne]:null}),{});let S=null;s!=null&&(S=new f(s),S.immutable=!0,x.$config=null);const P=l.scriptUsesGeometryEngine(_),A=P&&l.enableGeometrySupport(),D=l.scriptUsesFeatureSet(_)&&l.enableFeatureSetSupport(),N=l.scriptIsAsync(_),F=N&&l.enableAsyncSupport(),G={vars:x,spatialReference:y,useAsync:!!F};await Promise.all([A,D,F]);const V=new Set;await l.loadDependentModules(V,_,null,N,P);const B=new f;B.immutable=!1,B.setField("scale",0);const W=l.compileScript(_,G),J=(re,ne)=>{var pe;const oe=(pe=re.$view)==null?void 0:pe.timeZone;return"$view"in re&&re.$view&&(B.setField("scale",typeof re.$view=="object"&&"scale"in re.$view?re.$view.scale:void 0),re.$view=B),S&&(re.$config=S),W({vars:re,spatialReference:y,services:ne,timeZone:oe})};return new wde(e,l,_,J,new c,n,y)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const mOe=/^([0-9_])/,gOe=/[^a-z0-9_\u0080-\uffff]+/gi;function yOe(t){return t==null?null:t.trim().replaceAll(gOe,"_").replace(mOe,"F$1")||null}const vOe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],_Oe=["field","normalizationField"];function IK(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(MK(vOe,i,e),"visualVariables"in i&&i.visualVariables)for(const n of i.visualVariables)MK(_Oe,n,e)}}function MK(t,e,i){if(t)for(const n of t){const s=Yp(n,e),r=s&&typeof s!="function"&&i.get(s);r&&il(n,r.name,e)}}function Sde(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const n=e.get(t.startField),s=e.get(t.endField);t.startField=(n==null?void 0:n.name)??null,t.endField=(s==null?void 0:s.name)??null}else{const n=e.get(t.startTimeField),s=e.get(t.endTimeField);t.startTimeField=(n==null?void 0:n.name)??null,t.endTimeField=(s==null?void 0:s.name)??null}}const Z8=new Set;function vA(t,e){return t&&e?(Z8.clear(),_v(Z8,t,e),Array.from(Z8).sort()):[]}function _v(t,e,i){var n;if(i)if((n=e==null?void 0:e.fields)!=null&&n.length)if(i.includes("*"))for(const{name:s}of e.fields)t.add(s);else for(const s of i)El(t,e,s);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const s of i)s!=null&&t.add(s)}}function El(t,e,i){if(typeof i=="string")if(e){const n=e.get(i);n&&t.add(n.name)}else t.add(i)}function Mpt(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function Apt(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const n=vA(t,e);return n.length/t.fields.length>=i?["*"]:n}async function nl(t,e,i){var r;if(!i)return;const{arcadeUtils:n}=await vv(),s=n.extractFieldNames(i,(r=e==null?void 0:e.fields)==null?void 0:r.map(o=>o.name));for(const o of s)El(t,e,o)}async function Ede(t,e,i){if(i&&i!=="1=1"){const n=await pde(i,e);if(!n.isStandardized)throw new rt("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});_v(t,e,n.fieldNames)}}function Cde({displayField:t,fields:e}){return t||(e!=null&&e.length?K8(e,"name-or-title")||K8(e,"unique-identifier")||K8(e,"type-or-category")||bOe(e):null)}function bOe(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function K8(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function kpt(t,e){var n;if(!e)return;const i=(n=e.elevationInfo)==null?void 0:n.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function xOe(t,e,i){i.onStatisticExpression?nl(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function Dpt(t,e,i){if(!e||!i||!("fields"in i))return;const n=[],s=i.popupTemplate;n.push(wOe(t,e,s)),i.fields&&n.push(...i.fields.map(async r=>xOe(t,e.fieldsIndex,r))),await Promise.all(n)}async function wOe(t,e,i){const n=[];i!=null&&i.expressionInfos&&n.push(...i.expressionInfos.map(r=>nl(t,e.fieldsIndex,r.expression)));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const r of s)r.type==="expression"&&r.expressionInfo&&n.push(nl(t,e.fieldsIndex,r.expressionInfo.expression));await Promise.all(n)}async function Npt(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&_v(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&_v(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await Ede(t,e.fieldsIndex,i.where))}async function Opt(t,e,i){e&&i&&await Promise.all(i.map(n=>SOe(t,e,n)))}async function SOe(t,e,i){e&&i&&(i.valueExpression?await nl(t,e.fieldsIndex,i.valueExpression):i.field&&El(t,e.fieldsIndex,i.field))}function $pt(t){return t?vA(t.fieldsIndex,Pde(t)):[]}function EOe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?vA(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const COe=new Set(["oid","global-id","guid"]),POe=new Set(["oid","global-id"]),TOe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function IOe(t){const e=new Set;Tde(t).forEach(n=>e.add(n)),EOe(t).forEach(n=>e.add(n.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(n=>e.add(n.toLowerCase())),Object.values(i.transformFieldRoles).forEach(n=>e.add(n.toLowerCase()))),Array.from(e)}function Pde(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:n,editDateField:s,editorField:r}=e;return[i,n,s,r].filter(Boolean)}function Tde(t){return Pde(t).map(e=>e.toLowerCase())}function MOe(t,e){var i;return t.editable&&!COe.has(t.type)&&!Tde(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function AOe(t,e){var n;const i=((n=t.name)==null?void 0:n.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||IOe(e).includes(i)||POe.has(t.type)||TOe.some(s=>s.test(i)))}async function Rpt(t,e){const{labelingInfo:i,fieldsIndex:n}=e;i!=null&&i.length&&await Promise.all(i.map(s=>kOe(t,n,s)))}async function kOe(t,e,i){if(!i)return;const n=i.getLabelExpression(),s=i.where;if(n.type==="arcade")await nl(t,e,n.expression);else{const r=n.expression.match(/{[^}]*}/g);r&&r.forEach(o=>{El(t,e,o.slice(1,-1))})}await Ede(t,e,s)}function DOe(t){const e=t.defaultValue;return e!==void 0&&Ade(t,e)?e:t.nullable?null:void 0}function Lpt(t){const e=typeof t=="string"?{type:t}:t;return Dde(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function Ide(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function NOe(t){return t===null||Ide(t)}function OOe(t){return t===null||Number.isInteger(t)}function Mde(t){return t!=null&&typeof t=="string"}function $Oe(t){return t===null||Mde(t)}function ROe(){return!0}function Ade(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?OOe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?NOe:Ide;break;case"string":case"esriFieldTypeString":i=t.nullable?$Oe:Mde;break;default:i=ROe}return arguments.length===1?i:i(e)}const LOe=["integer","small-integer","big-integer"],FOe=["single","double"],zOe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],qOe=["esriFieldTypeSingle","esriFieldTypeDouble"],kde=new Set([...LOe,...zOe]),VOe=new Set([...FOe,...qOe]),GOe=Vae(kde,VOe);function jOe(t){return t!=null&&kde.has(t.type)}function yG(t){return t!=null&&GOe.has(t.type)}function Dde(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function BOe(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function Fpt(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function zpt(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function HOe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function AK(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function kK(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function qpt(t,e){return UOe(t,e)===null}var P6,T6;function Vpt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function UOe(t,e){return t==null||t.nullable&&e===null?null:yG(t)&&!YOe(t.type,Number(e))?P6.OUT_OF_RANGE:Ade(t,e)?t.domain?uOe(t,e):null:T6.INVALID_TYPE}function YOe(t,e){const i=typeof t=="string"?vG(t):t;if(!i)return!1;const n=i.min,s=i.max;return i.isInteger?Number.isInteger(e)&&e>=n&&e<=s:e>=n&&e<=s}function Gpt(t,e){return bde(t,e)||(yG(t)?vG(t.type):void 0)}function vG(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return XOe;case"esriFieldTypeInteger":case"integer":return WOe;case"esriFieldTypeBigInteger":case"big-integer":return ZOe;case"esriFieldTypeSingle":case"single":return KOe;case"esriFieldTypeDouble":case"double":return JOe}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(P6||(P6={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(T6||(T6={}));const XOe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},WOe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},ZOe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},KOe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},JOe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function jpt(t,e,i){switch(t){case q2.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case q2.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case T6.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case P6.OUT_OF_RANGE:{const{min:n,max:s}=vG(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${n} to ${s}`}}}function Bpt(t,e){return!QOe(t,e,null)}function QOe(t,e,i){if(!(e!=null&&e.attributes)||!t)return!0;const n=new Set(Object.keys(e.attributes));let s=!1;for(const r of t)if(!n.has(r)&&(s=!0,i==null))break;return s}function e$e(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}async function Hpt(t,e){const i=new Set;return t!=null&&t.collectRequiredFields&&await t.collectRequiredFields(i,e),Array.from(i).sort()}function Nde(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}var dR;let N3=dR=class extends St{constructor(t){super(t)}async collectRequiredFields(t,e){return nl(t,e,this.expression)}clone(){return new dR({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};I([O({type:String,json:{write:!0}})],N3.prototype,"expression",void 0),I([O({type:String,json:{write:!0}})],N3.prototype,"title",void 0),N3=dR=I([De("esri.symbols.support.FeatureExpressionInfo")],N3);const DK=N3,_A={unknown:1,inches:cs(1,"meters","inches"),feet:cs(1,"meters","feet"),"us-feet":cs(1,"meters","us-feet"),yards:cs(1,"meters","yards"),miles:cs(1,"meters","miles"),"nautical-miles":cs(1,"meters","nautical-miles"),millimeters:cs(1,"meters","millimeters"),centimeters:cs(1,"meters","centimeters"),decimeters:cs(1,"meters","decimeters"),meters:cs(1,"meters","meters"),kilometers:cs(1,"meters","kilometers"),"decimal-degrees":1/Hle(1,"meters",hr.radius)};function Upt(t){return!!t&&_A[t]!=null}function t$e(t){return 1/(_A[t]||1)}function i$e(){const t=Object.keys(_A);return qM(t,"decimal-degrees"),t.sort(),t}const n$e=i$e();var fR;const T4=Ta()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),NK=new mn({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let dp=fR=class extends St{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,n){e[i]=t.write({},n),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new fR({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&wae(this.featureExpressionInfo,t.featureExpressionInfo)}};I([O({type:DK,json:{write:!0}})],dp.prototype,"featureExpressionInfo",void 0),I([Dt("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],dp.prototype,"readFeatureExpressionInfo",null),I([zt("featureExpressionInfo",{featureExpressionInfo:{type:DK},"featureExpression.value":{type:[0]}})],dp.prototype,"writeFeatureExpressionInfo",null),I([O({type:T4.apiValues,nonNullable:!0,json:{type:T4.jsonValues,read:T4.read,write:{writer:T4.write,isRequired:!0}}})],dp.prototype,"mode",null),I([O({type:Number,json:{write:!0}})],dp.prototype,"offset",void 0),I([O({type:n$e,json:{type:String,read:NK.read,write:NK.write}})],dp.prototype,"unit",null),dp=fR=I([De("esri.symbols.support.ElevationInfo")],dp);const Ode=dp;let ab=class extends St{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};I([O({type:String,json:{write:!0}})],ab.prototype,"description",void 0),I([O({type:String,json:{write:!0}})],ab.prototype,"label",void 0),I([O()],ab.prototype,"type",void 0),ab=I([De("esri.tables.elements.AttributeTableElement")],ab);const V2=ab;var pR;let O3=pR=class extends V2{constructor(t){super(t),this.displayType="auto",this.type="attachment"}clone(){return new pR({description:this.description,displayType:this.displayType,label:this.label})}};I([O({type:["auto"],json:{write:!0}})],O3.prototype,"displayType",void 0),I([O({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],O3.prototype,"type",void 0),O3=pR=I([De("esri.tables.elements.AttributeTableAttachmentElement")],O3);const OK=O3;var mR;let $3=mR=class extends V2{constructor(t){super(t),this.fieldName=null,this.type="field"}clone(){return new mR({description:this.description,fieldName:this.fieldName,label:this.label})}};I([O({type:String,json:{write:!0}})],$3.prototype,"fieldName",void 0),I([O({type:String,json:{read:!1,write:!0}})],$3.prototype,"type",void 0),$3=mR=I([De("esri.tables.elements.AttributeTableFieldElement")],$3);const $K=$3;var gR;let R3=gR=class extends V2{constructor(t){super(t),this.relationshipId=null,this.type="relationship"}clone(){return new gR({description:this.description,label:this.label,relationshipId:this.relationshipId})}};I([O({type:Number,json:{write:!0}})],R3.prototype,"relationshipId",void 0),I([O({type:["relationship"],json:{read:!1,write:!0}})],R3.prototype,"type",void 0),R3=gR=I([De("esri.tables.elements.AttributeTableRelationshipElement")],R3);const RK=R3;function $de(t){return{typesWithGroup:{base:V2,key:"type",typeMap:{attachment:OK,field:$K,group:t,relationship:RK}},typesWithoutGroup:{base:V2,key:"type",typeMap:{attachment:OK,field:$K,relationship:RK}}}}function Rde(t,e,i=!0){if(!t)return null;const n=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>n[s.type]).map(s=>n[s.type].fromJSON(s))}function Lde(t,e,i=!0){if(!t)return null;const n=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>n[s.type]).map(s=>s.toJSON())}function Fde(t,e,i=!0){return t?t.map(n=>Ku(i?e.typesWithGroup:e.typesWithoutGroup,n)):null}var yR;let Op=yR=class extends V2{constructor(t){super(t),this.elements=null,this.type="group"}castElements(t){return Fde(t,J8,!1)}readElements(t,e){return Rde(e.attributeTableElements,J8,!1)}writeElements(t,e){e.attributeTableElements=Lde(t,J8,!1)}clone(){return new yR({description:this.description,elements:Ue(this.elements),label:this.label})}};I([O({json:{write:!0}})],Op.prototype,"elements",void 0),I([Es("elements")],Op.prototype,"castElements",null),I([Dt("elements",["attributeTableElements"])],Op.prototype,"readElements",null),I([zt("elements")],Op.prototype,"writeElements",null),I([O({type:String,json:{read:!1,write:!0}})],Op.prototype,"type",void 0),Op=yR=I([De("esri.tables.elements.AttributeTableGroupElement")],Op);const J8=$de(Op),s$e=Op;var vR;const Q8=$de(s$e);let Sg=vR=class extends St{constructor(t){super(t),this.elements=null,this.orderByFields=null}castElements(t){return Fde(t,Q8)}readElements(t,e){return Rde(e.attributeTableElements,Q8)}writeElements(t,e){e.attributeTableElements=Lde(t,Q8)}clone(){return new vR({elements:Ue(this.elements),orderByFields:this.orderByFields})}};I([O({json:{write:!0}})],Sg.prototype,"elements",void 0),I([Es("elements")],Sg.prototype,"castElements",null),I([Dt("elements",["attributeTableElements"])],Sg.prototype,"readElements",null),I([zt("elements")],Sg.prototype,"writeElements",null),I([O({type:[Object],json:{write:!0}})],Sg.prototype,"orderByFields",void 0),Sg=vR=I([De("esri.tables.AttributeTableTemplate")],Sg);const r$e=Sg;function _G(t){const e=hV(100*(1-t));return Math.max(0,Math.min(e,100))}function I6(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}const o$e={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Zo}}},bG={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},xG={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Zo}}},a$e={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:gv}}},l$e={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Zo}}},c$e={value:null,type:Ode,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Zo}}};function Xpt(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const zde={write:{enabled:!0,layerContainerTypes:Zo},read:!0},_R={type:Number,json:{origins:{"web-document":zde,"portal-item":{write:!0}}}},u$e={..._R,json:{..._R.json,origins:{"web-document":{...zde,write:{enabled:!0,layerContainerTypes:Zo,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var n;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(n=e.layerDefinition)!=null&&n.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?I6(e.layerDefinition.drawingInfo.transparency):void 0:I6(e.drawingInfo.transparency)}}}},Wpt={type:dr,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=dr.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Gi.fromJSON(e.spatialReference)),i}}}},read:!1}},h$e={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},d$e={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:Zo}}},name:"layerDefinition.minScale",write:!0}},f$e={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:Zo}}},name:"layerDefinition.maxScale",write:!0}},qde={json:{write:{ignoreOrigin:!0,layerContainerTypes:Zo},origins:{"web-map":{read:!1,write:!1}}}},p$e={type:r$e,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}},Vde=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,n,s){var r;return((r=s==null?void 0:s.portalItem)==null?void 0:r.type)==="Group Layer"?void 0:i}writeListMode(i,n,s,r){(r&&r.layerContainerType==="ground"||i&&qIe(this,s,{},r))&&(n[s]=i)}writeOperationalLayerType(i,n,s,r){i&&(r==null?void 0:r.layerContainerType)!=="tables"&&(n.layerType=i)}writeTitle(i,n){n.title=i??"Layer"}readTimeExtent(i){return i?O0.fromArray(i):null}writeTimeExtent(i,n,s,r){i&&r.layerContainerType!=="tables"&&(i.isEmpty?r!=null&&r.messages&&r.messages.push(new rt("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):n[s]=i.toArray())}read(i,n){n&&(n.layer=this),LIe(this,i,s=>super.read(i,s),n)}write(i,n){var o,l;if(!this.persistenceEnabled&&!(n!=null&&n.ignorePersistenceEnabled))return null;if(n!=null&&n.origin){const c=`${n.origin}/${n.layerContainerType||"operational-layers"}`,f=ZNe[c];let y=!!(f!=null&&f[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&c==="web-scene/operational-layers"&&(y=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&c==="web-map/operational-layers"&&(y=!1),!y)return(o=n.messages)==null||o.push(new rt("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${c}'`,{layer:this})),null}const s=super.write(i,{...n,layer:this}),r=!!n&&!!n.messages&&!!n.messages.filter(c=>c instanceof rt&&c.name==="web-document-write:property-required").length;return WM(s==null?void 0:s.url)?((l=n==null?void 0:n.messages)==null||l.push(new rt("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&r?null:s}beforeSave(){}};return I([O({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),I([Dt("id",["id"])],e.prototype,"readId",null),I([O(qde)],e.prototype,"listMode",void 0),I([zt("listMode")],e.prototype,"writeListMode",null),I([O({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Zo}}}}})],e.prototype,"operationalLayerType",void 0),I([zt("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),I([O(_R)],e.prototype,"opacity",void 0),I([O({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),I([O({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),I([zt("title"),zt(["web-scene"],"title")],e.prototype,"writeTitle",null),I([O({type:O0,json:{origins:{"web-scene":{write:{layerContainerTypes:Zo}}}}})],e.prototype,"visibilityTimeExtent",void 0),I([Dt("visibilityTimeExtent")],e.prototype,"readTimeExtent",null),I([zt(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Ss,XM]]}})],e.prototype,"writeTimeExtent",null),I([O({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:Zo}}},name:"visibility",write:!0}})],e.prototype,"visible",void 0),e=I([De("esri.layers.mixins.OperationalLayer")],e),e};function Zpt(t){return b$e(t)||v$e(t)}function m$e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function g$e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function y$e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-notes"&&"sublayers"in t}function Gde(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function jde(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="link-chart"&&"layers"in t}function v$e(t){return(t==null?void 0:t.type)==="scene"}function _$e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Kpt(t){return(t==null?void 0:t.type)==="subtype-sublayer"}function b$e(t){const e=t==null?void 0:t.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function Jpt(t){const e=t==null?void 0:t.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const Qpt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function bR(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function x$e(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function bA(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function emt(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t.source)==null?void 0:i.type)==="feature-layer"}function tmt(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function Bde(t,e){const i=Li==null?void 0:Li.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const n=t.toLowerCase().indexOf("/rest/services");if(n===-1)return null;const s=`${t.slice(0,n)}/rest/info`,r=e!=null?e.signal:null,{data:o}=await es(s,{query:{f:"json"},responseType:"json",signal:r});return(o==null?void 0:o.owningSystemUrl)||null}function w$e(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function imt(t){return t!=null&&typeof t=="object"&&"isTable"in t&&!!t.isTable}function nmt(t){return w$e(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function S$e(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function smt(t){return!!S$e(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function rmt(t){return t?("subtypes"in t?t.subtypes:_$e(t.parent)?t.parent.subtypes:[])??[]:[]}let fp=class extends Ei{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:LK(e.path,e.portalItem)}:e}set path(e){e!=null&&Fc(e)?qt.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return LK(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const n=this.cdnUrl;if(n==null)throw new rt("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(n,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:n}=await st(()=>import("./resourceUtils-B22qdTF8.js"),[],import.meta.url);return await n(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function LK(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&Fc(t)&&(t=bV(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}I([O()],fp.prototype,"portalItem",void 0),I([O({type:String,value:null})],fp.prototype,"path",null),I([Es("path")],fp.prototype,"_castPath",null),I([O({type:String,readOnly:!0})],fp.prototype,"url",null),I([O({type:String,readOnly:!0})],fp.prototype,"cdnUrl",null),I([O({type:String,readOnly:!0})],fp.prototype,"itemRelativeUrl",null),fp=I([De("esri.portal.PortalItemResource")],fp);const E$e=fp;let L3=class extends Ei{constructor(e){super(e),this.created=null,this.rating=null}};I([O()],L3.prototype,"created",void 0),I([O()],L3.prototype,"rating",void 0),L3=I([De("esri.portal.PortalRating")],L3);const eN=L3;var H1;const C$e=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),P$e=new Set(["KML","GeoJson","CSV"]);let ki=H1=class extends mV(GC){static from(t){return qC(H1,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new dr(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var S;const t=((S=this.type)==null?void 0:S.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",n="16";let s,r=!1,o=!1,l=!1,c=!1,f=!1,y=!1,_=!1,x=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(r=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),l=e.includes("Route Layer"),c=e.includes("Markup"),f=e.includes("Spatiotemporal"),y=e.includes("UtilityNetwork"),s=f&&o?"spatiotemporaltable":o?"table":l?"routelayer":c?"markup":f?"spatiotemporal":y?"utilitynetwork":r?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(f=e.includes("Spatiotemporal"),_=e.includes("Relational"),s=f||_?"mapimages":r||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):s=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?s="maps":t==="web scene"?s=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?s="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?s="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?s="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?s="datafiles":t==="360 vr experience"?s="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?s="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?s="addindesktop":t==="pdf"?s="pdf":t==="microsoft word"?s="word":t==="microsoft excel"?s="excel":t==="microsoft powerpoint"?s="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?s="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?s="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?s="layersgray":t==="analysis model"?s="analysismodel":t==="scene package"?s="scenepackage":t==="3dtiles package"?s="3dtileslayerpackage":t==="3dtiles service"?s="3dtileslayer":t==="mobile scene package"?s="mobilescenepackage":t==="tile package"||t==="compact tile package"?s="tilepackage":t==="task file"?s="taskfile":t==="report template"?s="report-template":t==="statistical data collection"?s="statisticaldatacollection":t==="insights workbook"?s="workbook":t==="insights model"?s="insightsmodel":t==="insights page"?s="insightspage":t==="insights theme"?s="insightstheme":t==="hub initiative"?s="hubinitiative":t==="hub page"?s="hubpage":t==="hub site application"?s="hubsite":t==="hub event"?s="hubevent":t==="hub project"?s="hubproject":t==="relational database connection"?s="relationaldatabaseconnection":t==="big data file share"?s="datastorecollection":t==="image collection"?s="imagecollection":t==="desktop style"?s="desktopstyle":t==="style"?s=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?s="dashboard":t==="raster function template"?s="rasterprocessingtemplate":t==="vector tile package"?s="vectortilepackage":t==="ortho mapping project"?s="orthomappingproject":t==="ortho mapping template"?s="orthomappingtemplate":t==="solution"?s="solutions":t==="geopackage"?s="geopackage":t==="deep learning package"?s="deeplearningpackage":t==="real time analytic"?s="realtimeanalytics":t==="reality mapping project"?s="realitymappingproject":t==="big data analytic"?s="bigdataanalytics":t==="feed"?s="feed":t==="excalibur imagery project"?s="excaliburimageryproject":t==="notebook"?s="notebook":t==="storymap"?s="storymap":t==="survey123 add in"?s="survey123addin":t==="mission"?s="mission":t==="mission report"?s="missionreport":t==="mission template"?s="missiontemplate":t==="quickcapture project"?s="quickcaptureproject":t==="pro report"?s="proreport":t==="pro report template"?s="proreporttemplate":t==="urban model"?s="urbanmodel":t==="urban project"?s="urbanproject":t==="web experience"?s="experiencebuilder":t==="web experience template"?s="webexperiencetemplate":t==="experience builder widget"?s="experiencebuilderwidget":t==="experience builder widget package"?s="experiencebuilderwidgetpackage":t==="workflow"?s="workflow":t==="kernel gateway connection"?s="kernelgatewayconnection":t==="insights script"?s="insightsscript":t==="hub initiative template"?s="hubinitiativetemplate":t==="storymap theme"?s="storymaptheme":t==="knowledge graph"?s="knowledgegraph":t==="knowledge graph layer"?s="knowledgegraphlayer":t==="knowledge studio project"?s="knowledgestudio":t==="native application"?s="nativeapp":t==="native application installer"?s="nativeappinstaller":t==="web link chart"?s="linkchart":t==="knowledge graph web investigation"?s="investigation":t==="ogcfeatureserver"?s="features":t==="pro presentation"?s="propresentation":t==="pro project"?s="proproject":t==="insights workbook package"?s="insightsworkbookpackage":t==="apache parquet"?s="apacheparquet":t==="notebook code snippet library"?s="notebookcodesnippets":t==="suitability model"?s="suitabilitymodel":t==="esri classifier definition"?s="classifierdefinition":t==="esri classification schema"?s="classificationschema":t==="insights data engineering workbook"?s="dataengineeringworkbook":t==="insights data engineering model"?s="dataengineeringmodel":t==="deep learning studio project"?s="deeplearningproject":t==="discussion"?s="discussion":t==="allsource project"?s="allsourceproject":t==="api key"?s="apikey":t==="data pipeline"?s="datapipelines":t==="group layer"?(x=e.includes("Map"),s=x?"layergroup2d":"layergroup"):s=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",s?jC(i+s+n+".png"):null}get isLayer(){return this.type!=null&&C$e.has(this.type)}get itemCdnUrl(){return gG(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,n,s;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((s=(n=this.portal)==null?void 0:n.user)==null?void 0:s.username);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Bc.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(n=>{this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof eN&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new eN({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:Ue(this.applicationProxies),avgRating:this.avgRating,categories:Ue(this.categories),classification:Ue(this.classification),created:Ue(this.created),culture:this.culture,description:this.description,extent:Ue(this.extent),groupCategories:Ue(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Ue(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Ue(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ue(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ue(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new H1({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const n=t[i];n&&(t[i]=JSON.stringify(n))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new eN(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},H1)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const n in i.query)i.query[n]===null&&(i.query[n]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new rt("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new rt("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:n,folder:s,tags:r,title:o}=t||{},l={method:"post",query:{copyPrivateResources:n==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!n,tags:r==null?void 0:r.join(","),title:o}},{itemId:c}=await e.request(`${i}/copy`,l);return new H1({id:c,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,n={method:"post"};if(typeof e=="string")Vv(e)?n.query={data:e}:n.query={url:_l(e)},i!=null&&(n.query.filename=i);else{const s=new FormData;i!=null?s.append("file",e,i):s.append("file",e),n.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,n).then(()=>this.reload())}):Promise.reject(new rt("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await st(()=>import("./resourceUtils-B22qdTF8.js"),[],import.meta.url);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:n}=await st(()=>import("./resourceUtils-B22qdTF8.js"),[],import.meta.url);return t.portalItem=this,await n(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await st(()=>import("./resourceUtils-B22qdTF8.js"),[],import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new rt("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await st(()=>import("./resourceUtils-B22qdTF8.js"),[],import.meta.url);return e(this,t)}resourceFromPath(t){return new E$e({portalItem:this,path:t})}toJSON(){var i,n;const t=this.extent,e={accessInformation:this.accessInformation,categories:Ue(this.categories),classification:Ue(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(n=this.modified)==null?void 0:n.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ue(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ue(this.typeKeywords),url:this.url};return iV(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new H1({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};I([O({type:["private","shared","org","public"]})],ki.prototype,"access",void 0),I([O()],ki.prototype,"accessInformation",void 0),I([O({type:String})],ki.prototype,"apiKey",void 0),I([O({json:{read:{source:"appProxies"}}})],ki.prototype,"applicationProxies",void 0),I([O()],ki.prototype,"avgRating",void 0),I([O()],ki.prototype,"categories",void 0),I([O()],ki.prototype,"classification",void 0),I([O({type:Date})],ki.prototype,"created",void 0),I([O()],ki.prototype,"culture",void 0),I([O()],ki.prototype,"description",void 0),I([O({readOnly:!0})],ki.prototype,"displayName",null),I([O({type:dr})],ki.prototype,"extent",void 0),I([Dt("extent")],ki.prototype,"readExtent",null),I([O()],ki.prototype,"groupCategories",void 0),I([O({readOnly:!0})],ki.prototype,"iconUrl",null),I([O()],ki.prototype,"id",void 0),I([O({readOnly:!0})],ki.prototype,"isLayer",null),I([O({type:Boolean,readOnly:!0})],ki.prototype,"isOrgItem",void 0),I([O()],ki.prototype,"itemControl",void 0),I([O({readOnly:!0})],ki.prototype,"itemPageUrl",null),I([O({readOnly:!0})],ki.prototype,"itemUrl",null),I([O()],ki.prototype,"licenseInfo",void 0),I([O({type:Date})],ki.prototype,"modified",void 0),I([O()],ki.prototype,"name",void 0),I([O()],ki.prototype,"numComments",void 0),I([O()],ki.prototype,"numRatings",void 0),I([O()],ki.prototype,"numViews",void 0),I([O()],ki.prototype,"owner",void 0),I([O()],ki.prototype,"ownerFolder",void 0),I([O({type:Bc})],ki.prototype,"portal",void 0),I([O()],ki.prototype,"screenshots",void 0),I([O()],ki.prototype,"size",void 0),I([O()],ki.prototype,"snippet",void 0),I([O()],ki.prototype,"sourceJSON",void 0),I([O({type:String})],ki.prototype,"sourceUrl",void 0),I([O({type:String})],ki.prototype,"spatialReference",void 0),I([O()],ki.prototype,"tags",void 0),I([O()],ki.prototype,"thumbnail",void 0),I([O({readOnly:!0})],ki.prototype,"thumbnailUrl",null),I([O()],ki.prototype,"title",void 0),I([O()],ki.prototype,"type",void 0),I([O()],ki.prototype,"typeKeywords",void 0),I([O({type:String,json:{read(t,e){var i;if(P$e.has(e.type)){const n=(i=this.portal)==null?void 0:i.restUrl;t||(t=n&&this.id?`${n}/content/items/${this.id}/data`:null)}return t}}})],ki.prototype,"url",void 0),I([O({readOnly:!0})],ki.prototype,"userItemUrl",null),ki=H1=I([De("esri.portal.PortalItem")],ki);const WS=ki,Hde=Object.freeze(Object.defineProperty({__proto__:null,default:WS},Symbol.toStringTag,{value:"Module"})),gl=Math.PI/180,T$e=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,gg=hr.radius,_h=hr.eccentricitySquared,I$e={a1:gg*_h,a2:gg*_h*gg*_h,a3:gg*_h*_h/2,a4:gg*_h*gg*_h*2.5,a5:gg*_h+gg*_h*_h/2,a6:1-_h},M$e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:hr.radius,f:hr.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:M0.radius,f:M0.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:_f.radius,f:_f.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:_f.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var Qe;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(Qe||(Qe={}));const A$e={[Qe.WGS84]:{[Qe.CGCS2000]:Us,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Us,[Qe.SPHERICAL_ECEF]:KS,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:h2,[Qe.PLATE_CARREE]:d2,[Qe.WGS84]:Us,[Qe.WGS84_ECEF]:m2},[Qe.CGCS2000]:{[Qe.CGCS2000]:Us,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Us,[Qe.SPHERICAL_ECEF]:KS,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:h2,[Qe.PLATE_CARREE]:d2,[Qe.WGS84]:Us,[Qe.WGS84_ECEF]:m2},[Qe.GCSMARS2000]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:Us,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Us,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:qK,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.GCSMOON2000]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:Us,[Qe.LON_LAT]:Us,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:zK,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.WEB_MERCATOR]:{[Qe.CGCS2000]:ZS,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:ZS,[Qe.SPHERICAL_ECEF]:k$e,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:Us,[Qe.PLATE_CARREE]:O$e,[Qe.WGS84]:ZS,[Qe.WGS84_ECEF]:D$e},[Qe.WGS84_ECEF]:{[Qe.CGCS2000]:g2,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:g2,[Qe.SPHERICAL_ECEF]:j$e,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:B$e,[Qe.PLATE_CARREE]:$$e,[Qe.WGS84]:g2,[Qe.WGS84_ECEF]:Us},[Qe.SPHERICAL_ECEF]:{[Qe.CGCS2000]:p2,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:p2,[Qe.SPHERICAL_ECEF]:Us,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:q$e,[Qe.PLATE_CARREE]:R$e,[Qe.WGS84]:p2,[Qe.WGS84_ECEF]:V$e},[Qe.SPHERICAL_MARS_PCPF]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:GK,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:GK,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:Us,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.SPHERICAL_MOON_PCPF]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:VK,[Qe.LON_LAT]:VK,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:Us,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.UNKNOWN]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:null,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:Us,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.LON_LAT]:{[Qe.CGCS2000]:Us,[Qe.GCSMARS2000]:Us,[Qe.GCSMOON2000]:Us,[Qe.LON_LAT]:Us,[Qe.SPHERICAL_ECEF]:KS,[Qe.SPHERICAL_MARS_PCPF]:qK,[Qe.SPHERICAL_MOON_PCPF]:zK,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:h2,[Qe.PLATE_CARREE]:d2,[Qe.WGS84]:Us,[Qe.WGS84_ECEF]:m2},[Qe.PLATE_CARREE]:{[Qe.CGCS2000]:f2,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:f2,[Qe.SPHERICAL_ECEF]:L$e,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:F$e,[Qe.PLATE_CARREE]:Us,[Qe.WGS84]:f2,[Qe.WGS84_ECEF]:z$e}};function Ude(t,e,i=Yde()){return t==null||e==null?null:H$e(t,e,i).projector}function FK(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=sm(t,1)),c6(t)?e.spatialReferenceId=Qe.SPHERICAL_ECEF:cv(t)?e.spatialReferenceId=Qe.WGS84:cd(t)?e.spatialReferenceId=Qe.WEB_MERCATOR:X9e(t)?e.spatialReferenceId=Qe.PLATE_CARREE:t.wkt===J9e.wkt?e.spatialReferenceId=Qe.WGS84_ECEF:t.wkid===lv.CGCS2000?e.spatialReferenceId=Qe.CGCS2000:t.wkt===MV.wkt?e.spatialReferenceId=Qe.SPHERICAL_MARS_PCPF:t.wkt===AV.wkt?e.spatialReferenceId=Qe.SPHERICAL_MOON_PCPF:Lle(t)?e.spatialReferenceId=Qe.GCSMARS2000:Fle(t)?e.spatialReferenceId=Qe.GCSMOON2000:e.spatialReferenceId=Qe.UNKNOWN):Qe.UNKNOWN}function Us(t,e,i,n){t!==i&&(i[n++]=t[e++],i[n++]=t[e++],i[n]=t[e])}function ZS(t,e,i,n){i[n]=j2*(t[e]/Jy),i[n+1]=j2*(Wde-2*Math.atan(Math.exp(-t[e+1]/Jy))),i[n+2]=t[e+2]}function k$e(t,e,i,n){const s=t[e]/Jy,r=Wde-2*Math.atan(Math.exp(-t[e+1]/Jy)),o=Jy+t[e+2],l=Math.cos(r)*o;i[n]=Math.cos(s)*l,i[n+1]=Math.sin(s)*l,i[n+2]=Math.sin(r)*o}function D$e(t,e,i,n){ZS(t,e,i,n),m2(i,n,i,n)}function N$e(t,e,i,n,s){const r=.4999999*xA,o=Qu(G2*t[e+1],-r,r),l=Math.sin(o);i[n++]=G2*t[e]*s.radius,i[n++]=s.halfSemiMajorAxis*Math.log((1+l)/(1-l)),i[n]=t[e+2]}function h2(t,e,i,n){N$e(t,e,i,n,hr)}function d2(t,e,i,n){i[n]=t[e]*jK,i[n+1]=t[e+1]*jK,i[n+2]=t[e+2]}function f2(t,e,i,n){i[n]=t[e]*BK,i[n+1]=t[e+1]*BK,i[n+2]=t[e+2]}function O$e(t,e,i,n){ZS(t,e,i,n),d2(i,n,i,n)}function $$e(t,e,i,n){g2(t,e,i,n),d2(i,n,i,n)}function R$e(t,e,i,n){p2(t,e,i,n),d2(i,n,i,n)}function L$e(t,e,i,n){f2(t,e,i,n),KS(i,n,i,n)}function F$e(t,e,i,n){f2(t,e,i,n),h2(i,n,i,n)}function z$e(t,e,i,n){f2(t,e,i,n),m2(i,n,i,n)}function wG(t,e,i,n,s){const r=s+t[e+2],o=G2*t[e+1],l=G2*t[e],c=Math.cos(o)*r;i[n]=Math.cos(l)*c,i[n+1]=Math.sin(l)*c,i[n+2]=Math.sin(o)*r}function zK(t,e,i,n){wG(t,e,i,n,M0.radius)}function qK(t,e,i,n){wG(t,e,i,n,_f.radius)}function KS(t,e,i,n){wG(t,e,i,n,hr.radius)}function SG(t,e,i,n,s){const r=t[e],o=t[e+1],l=t[e+2],c=Math.sqrt(r*r+o*o+l*l),f=sG(l/(c===0?1:c)),y=Math.atan2(o,r);i[n++]=j2*y,i[n++]=j2*f,i[n]=c-s}function VK(t,e,i,n){SG(t,e,i,n,M0.radius)}function GK(t,e,i,n){SG(t,e,i,n,_f.radius)}function p2(t,e,i,n){SG(t,e,i,n,hr.radius)}function q$e(t,e,i,n){p2(t,e,i,n),h2(i,n,i,n)}function V$e(t,e,i,n){p2(t,e,i,n),m2(i,n,i,n)}function G$e(t,e,i,n,s){const r=G2*t[e],o=G2*t[e+1],l=t[e+2],c=Math.sin(o),f=Math.cos(o),y=s.radius/Math.sqrt(1-s.eccentricitySquared*c*c);i[n++]=(y+l)*f*Math.cos(r),i[n++]=(y+l)*f*Math.sin(r),i[n++]=(y*(1-s.eccentricitySquared)+l)*c}function m2(t,e,i,n){G$e(t,e,i,n,hr)}function g2(t,e,i,n){const s=I$e,r=t[e],o=t[e+1],l=t[e+2];let c,f,y,_,x,S,P,A,D,N,F,G,V,B,W,J,re,ne,oe,pe,ce;c=Math.abs(l),f=r*r+o*o,y=Math.sqrt(f),_=f+l*l,x=Math.sqrt(_),pe=Math.atan2(o,r),S=l*l/_,P=f/_,B=s.a2/x,W=s.a3-s.a4/x,P>.3?(A=c/x*(1+P*(s.a1+B+S*W)/x),oe=Math.asin(A),N=A*A,D=Math.sqrt(1-N)):(D=y/x*(1-S*(s.a5-B-P*W)/x),oe=Math.acos(D),N=1-D*D,A=Math.sqrt(N)),F=1-hr.eccentricitySquared*N,G=hr.radius/Math.sqrt(F),V=s.a6*G,B=y-G*D,W=c-V*A,re=D*B+A*W,J=D*W-A*B,ne=J/(V/F+re),oe+=ne,ce=re+J*ne/2,l<0&&(oe=-oe),i[n++]=j2*pe,i[n++]=j2*oe,i[n]=ce}function j$e(t,e,i,n){g2(t,e,i,n),KS(i,n,i,n)}function B$e(t,e,i,n){g2(t,e,i,n),h2(i,n,i,n)}function H$e(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const n=FK(t,i.source),s=FK(e,i.dest);return n===Qe.UNKNOWN&&s===Qe.UNKNOWN?ea(t,e)?i.projector=Us:i.projector=null:i.projector=A$e[n][s],i}function Yde(){return{source:{spatialReference:null,spatialReferenceId:Qe.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Qe.UNKNOWN,metersPerUnit:1},projector:Us}}const lmt={spatialReference:null,spatialReferenceId:Qe.UNKNOWN},cmt={spatialReference:null,spatialReferenceId:Qe.UNKNOWN},Xde=Yde(),G2=uhe(1),j2=LDe(1),xA=Math.PI,Wde=.5*xA,Jy=hr.radius,jK=Jy*xA/180,BK=180/(Jy*xA);function Ax(t,e,i,n,s,r,o=Math.floor(t.length/3)){const l=Ude(e,s,Xde);if(l==null)return!1;if(l===Us){if(t===n&&i===r)return!0;const f=i+3*o;for(let y=i,_=r;y<f;y++,_++)n[_]=t[y];return!0}const c=i+3*o;for(let f=i,y=r;f<c;f+=3,y+=3)l(t,f,n,y);return!0}const umt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Ax},Symbol.toStringTag,{value:"Module"}));function HK(t,e,i,n,s,r){return I4[0]=t,I4[1]=e,I4[2]=i,Ax(I4,n,0,s,r,0)}const I4=$t();let M4=0,tN=class xR{static fromGE(e){const i=new xR;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=M4++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=M4++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=M4++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=M4++}getInverse(){const e=new xR;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},M6=class F3{static cacheKey(e,i){var n,s,r,o,l,c;return[((n=e.wkid)==null?void 0:n.toString())??"-1",((s=e.wkt)==null?void 0:s.toString())??"",((r=e.wkt2)==null?void 0:r.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((l=i.wkt)==null?void 0:l.toString())??"",((c=i.wkt2)==null?void 0:c.toString())??""].join()}static fromGE(e){const i=new F3;let n="";for(const s of e.steps){const r=tN.fromGE(s);i.steps.push(r),n+=r.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=n,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof tN?this.steps.push(i):this.steps.push(new tN({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new F3;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const n=this.steps[i];e.steps.push(n.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,n){this._cachedProjection[F3.cacheKey(e,i)]=n}getCachedGeTransformation(e,i){let n="";for(const r of this.steps)n+=r.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const s=this._cachedProjection[F3.cacheKey(e,i)];return s===void 0?null:s}};function Zde(t,e,i){if(e==null||i==null||i.vcsWkid||ea(e,i)||A0(e)||A0(i))return null;const n=u6(e)/u6(i);if(n===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>U$e(s,n);case"polyline":case"esriGeometryPolyline":return s=>X$e(s,n);case"polygon":case"esriGeometryPolygon":return s=>Y$e(s,n);case"multipoint":case"esriGeometryMultipoint":return s=>W$e(s,n);case"extent":case"esriGeometryEnvelope":return s=>Z$e(s,n);default:return null}}function U$e(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function Y$e(t,e){if(t)for(const i of t.rings)for(const n of i)n.length>2&&(n[2]*=e)}function X$e(t,e){if(t)for(const i of t.paths)for(const n of i)n.length>2&&(n[2]*=e)}function W$e(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function Z$e(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let id=null,$0=null,JS=null,cI={};const EG=new YC;function kx(){return!!id&&PV()}function Kde(){return!!kx()||(mi(EG),B2(),!1)}function K$e(t,e){return!t||!e||lm(t,e)||Kde()}function J$e(t,e){return!lm(t,e)&&!kx()}function B2(t){return JS==null&&(JS=Promise.all([TV(),st(()=>Promise.resolve().then(()=>nZe),void 0,import.meta.url).then(e=>e.g),st(()=>Promise.resolve().then(()=>uZe),void 0,import.meta.url)])),JS.then(([,e,{hydratedAdapter:i}])=>{oc(t),$0=i,id=e.default,id._enableProjection(B9e),EG.notify()})}function Ef(t,e,i=null,n=null){return Array.isArray(t)?t.length===0?[]:wR($0,t,t[0].spatialReference,e,i,n):wR($0,[t],t.spatialReference,e,i,n)[0]}function wR(t,e,i,n,s=null,r=null){if(i==null||n==null)return e;if(lm(i,n,s))return e.map(o=>uI(o,i,n));if(s==null&&c6(i))return e.map(o=>uI(o,i,Gi.WGS84)).map(o=>H2(o,n));if(s==null&&c6(n))return e.map(o=>H2(o,Gi.WGS84)).map(o=>uI(o,Gi.WGS84,n));if(s==null){const o=M6.cacheKey(i,n);cI[o]!==void 0?s=cI[o]:((s=Qde(i,n,void 0))==null&&(s=new M6),cI[o]=s)}if(id==null||t==null)throw new wA;return r!=null?id._project(t,e,i,n,s,r):id._project(t,e,i,n,s)}function Q$e(t,e){const i=Jde([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Jde(t,e){if(!kx()){for(const i of t)if(i!=null&&!ea(i.spatialReference,e)&&Fu(i.spatialReference)&&Fu(e)&&!lm(i.spatialReference,e))return mi(EG),{pending:B2(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:ea(i.spatialReference,e)?i:Fu(i.spatialReference)&&Fu(e)?H2(i,e):null)}}function Qde(t,e,i=null){if(t==null||e==null)return null;if(id==null||$0==null)throw new wA;const n=id._getTransformation($0,t,e,i,i==null?void 0:i.spatialReference);return n!==null?M6.fromGE(n):null}function eRe(t,e,i=null){if(id==null||$0==null)throw new wA;const n=id._getTransformationBySuitability($0,t,e,i,i==null?void 0:i.spatialReference);if(n!==null){const s=[];for(const r of n)s.push(M6.fromGE(r));return s}return[]}let wA=class extends rt{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function tRe(){id=null,$0=null,JS=null,cI={}}const iRe={get loadPromise(){return JS}};function H2(t,e){try{const i=Ef(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const n=Zde(i.type,t.spatialReference,e);return n!=null&&n(i),i}catch(i){if(!(i instanceof wA))throw i;return null}}async function nRe(t,e,i){const n=t.spatialReference;return n!=null&&e!=null&&await t5(n,e,null,i),H2(t,e)}function lm(t,e,i){return!i&&(!!ea(t,e)||Fu(t)&&Fu(e)&&!!Ude(t,e,Xde))}function sRe(t,e){if(ea(t,e))return!0;if(!Fu(t)||!Fu(e))return!1;const i=cv(t)||cd(t)||iZ(t),n=cv(e)||cd(e)||iZ(e);return i&&n}async function t5(t,e,i,n){if(kx())return OW(n);if(Array.isArray(t)){for(const{source:s,dest:r,geographicTransformation:o}of t)if(s&&r&&!lm(s,r,o))return B2(n)}else if(t&&e&&!lm(t,e,i))return B2(n);return OW(n)}function uI(t,e,i){return t?"x"in t?efe(t,e,new Yi,i,0):"xmin"in t?sfe(t,e,new dr,i,0):"rings"in t?nfe(t,e,new el,i,0):"paths"in t?ife(t,e,new $f,i,0):"points"in t?tfe(t,e,new Hv,i,0):null:null}function rRe(t,e,i=e.spatialReference,n=0){return i!=null&&t.spatialReference!=null&&efe(t,t.spatialReference,e,i,n)!=null}function efe(t,e,i,n,s){Wa[0]=t.x,Wa[1]=t.y;const r=t.z;return Wa[2]=r!==void 0?r:s,Ax(Wa,e,0,Wa,n,0)?(i.x=Wa[0],i.y=Wa[1],i.spatialReference=n,r!==void 0||A0(n)?(i.z=Wa[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function oRe(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&tfe(t,t.spatialReference,e,i,n)!=null}function tfe(t,e,i,n,s){const{points:r,hasZ:o,hasM:l}=t,c=[],f=r.length,y=[];for(const x of r)y.push(x[0],x[1],o?x[2]:s);if(!Ax(y,e,0,y,n,0,f))return null;const _=o||A0(n);for(let x=0;x<f;++x){const S=3*x,P=y[S],A=y[S+1];_&&l?c.push([P,A,y[S+2],r[x][3]]):_?c.push([P,A,y[S+2]]):l?c.push([P,A,r[x][2]]):c.push([P,A])}return i.points=c,i.spatialReference=n,i.hasZ=o,i.hasM=l,i}function aRe(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&ife(t,t.spatialReference,e,i,n)!=null}function ife(t,e,i,n,s){const{paths:r,hasZ:o,hasM:l}=t,c=[];if(!rfe(r,o??!1,l??!1,e,c,n,s))return null;const f=o||A0(n);return i.paths=c,i.spatialReference=n,i.hasZ=f,i.hasM=l,i}function lRe(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&nfe(t,t.spatialReference,e,i,n)!=null}function nfe(t,e,i,n,s){const{rings:r,hasZ:o,hasM:l}=t,c=[];if(!rfe(r,o??!1,l??!1,e,c,n,s))return null;const f=o||A0(n);return i.rings=c,i.spatialReference=n,i.hasZ=f,i.hasM=l,i}function cRe(t,e,i=e.spatialReference,n=0){return t.spatialReference!=null&&i!=null&&sfe(t,t.spatialReference,e,i,n)!=null}function sfe(t,e,i,n,s){const{xmin:r,ymin:o,xmax:l,ymax:c,hasZ:f,hasM:y}=t,_=f?t.zmin:s;if(!HK(r,o,_,e,Wa,n))return null;const x=f||A0(n);i.xmin=Wa[0],i.ymin=Wa[1],x&&(i.zmin=Wa[2]);const S=f?t.zmax:s;return HK(l,c,S,e,Wa,n)?(i.xmax=Wa[0],i.ymax=Wa[1],x&&(i.zmax=Wa[2]),y&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=n,i):null}function rfe(t,e,i,n,s,r,o=0){const l=new Array;for(const y of t)for(const _ of y)l.push(_[0],_[1],e?_[2]:o);if(!Ax(l,n,0,l,r,0))return!1;let c=0;s.length=0;const f=e||A0(r);for(const y of t){const _=new Array;for(const x of y)f&&i?_.push([l[c++],l[c++],l[c++],x[3]]):f?_.push([l[c++],l[c++],l[c++]]):i?(_.push([l[c++],l[c++],x[2]]),c++):(_.push([l[c++],l[c++]]),c++);s.push(_)}return!0}const Wa=$t(),dmt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:lm,getTransformation:Qde,getTransformations:eRe,initializeProjection:t5,isEqualBaseGCS:sRe,isLoaded:kx,isLoadedOrLoad:Kde,isLoadedOrLoadFor:K$e,load:B2,project:Ef,projectExtent:cRe,projectMany:wR,projectMultipoint:oRe,projectOrLoad:Q$e,projectOrLoadMany:Jde,projectPoint:rRe,projectPolygon:lRe,projectPolyline:aRe,projectWithZConversion:nRe,projectWithoutEngine:uI,requiresLoad:J$e,test:iRe,tryProjectWithZConversion:H2,unload:tRe},Symbol.toStringTag,{value:"Module"}));async function uRe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return jb(t);const i=Gi.WGS84;return await t5(e,i),Ef(t,i)}function hRe(t,e){if(!ofe(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function ofe(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function fmt(t){return ofe(t,fRe.HOSTED_SERVICE)}function dRe(t,e){const i=t.typeKeywords;if(i){const n=i.indexOf(e);n>-1&&i.splice(n,1)}}function pmt(t,e,i){i?hRe(t,e):dRe(t,e)}async function mmt(t){const e=t.clone().normalize();let i;if(e.length>1)for(const n of e)i?n.width>i.width&&(i=n):i=n;else i=e[0];return uRe(i)}const fRe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function UK(t){var c;const{portal:e,isOrgItem:i,itemControl:n}=t,s=(c=e.user)==null?void 0:c.privileges;let r=!s||s.includes("features:user:edit"),o=!!i&&!!(s!=null&&s.includes("features:user:fullEdit"));const l=n==="update"||n==="admin";return l?o=r=!0:o&&(r=!0),{features:{edit:r,fullEdit:o},content:{updateItem:l}}}const afe=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=co(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,n,s){if(n.itemId)return new WS({id:n.itemId,portal:s==null?void 0:s.portal})}writePortalItem(i,n){i!=null&&i.id&&(n.itemId=i.id)}async loadFromPortal(i,n){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:r}=await st(()=>import("./layersLoader-DdRu1e7J.js"),__vite__mapDeps([106,95,93,94,107,32]),import.meta.url);return oc(n),await r({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},n)}catch(r){throw vd(r)||qt.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${r}`),r}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(n=>(jh(n),!0)))}async setUserPrivileges(i,n){if(!jn.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(n);if(this.url)try{const{features:{edit:s,fullEdit:r},content:{updateItem:o}}=await this._fetchUserPrivileges(i,n);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",r),this._set("userHasUpdateItemPrivileges",o)}catch(s){jh(s)}}async _fetchUserPrivileges(i,n){let s=this.portalItem;if(!i||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(n);const r=i===s.id;if(r&&s.portal.user)return UK(s);let o,l;if(r)o=s.portal.url;else try{o=await Bde(this.url,n)}catch(_){jh(_)}if(!o||!n9e(o,s.portal.url))return this._fetchFallbackUserPrivileges(n);try{const _=n!=null?n.signal:null;l=await(Li==null?void 0:Li.getCredential(`${o}/sharing`,{prompt:!1,signal:_}))}catch(_){jh(_)}const c=!0,f=!1,y=!1;if(!l)return{features:{edit:c,fullEdit:f},content:{updateItem:y}};try{if(r?await s.reload():(s=new WS({id:i,portal:{url:o}}),await s.load(n)),s.portal.user)return UK(s)}catch(_){jh(_)}return{features:{edit:c,fullEdit:f},content:{updateItem:y}}}async _fetchFallbackUserPrivileges(i){let n=!0;try{n=await this._fetchUserHasEditingPrivileges(i)}catch(s){jh(s)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const n=this.url?Li==null?void 0:Li.findCredential(this.url):null;if(!n)return!0;const s=A4.credential===n?A4.user:await this._fetchEditingUser(i);return A4.credential=n,A4.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var y,_;const n=(_=(y=this.portalItem)==null?void 0:y.portal)==null?void 0:_.user;if(n)return n;const s=Li==null?void 0:Li.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const r=`${s.owningSystemUrl}/sharing/rest`,o=Bc.getDefault();if(o&&o.loaded&&Hu(o.restUrl)===Hu(r))return o.user;const l=`${r}/community/self`,c=i!=null?i.signal:null,f=await YV(es(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return f.ok?OV.fromJSON(f.value.data):null}read(i,n){n&&(n.layer=this),super.read(i,n)}write(i,n){var o;const s=n==null?void 0:n.portal,r=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Bc.getDefault());return s&&r&&!ble(r.restUrl,s.restUrl)?(n.messages&&n.messages.push(new rt("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...n,layer:this})}};return I([O({type:WS})],e.prototype,"portalItem",null),I([Dt("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),I([zt("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),I([O({clonable:!1})],e.prototype,"resourceReferences",void 0),I([O({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),I([O({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),I([O({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=I([De("esri.layers.mixins.PortalLayer")],e),e},A4={credential:null,user:null},CG=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n&&"effectiveScaleRange"in n&&pRe(i,n.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return I([O({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),I([O({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),I([O({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=I([De("esri.layers.mixins.ScaleRangeLayer")],e),e};function pRe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const mRe={BingMapsLayer:async()=>(await st(async()=>{const{default:t}=await import("./BingMapsLayer-D2dtsJ2f.js");return{default:t}},__vite__mapDeps([108,109,6,7]),import.meta.url)).default,BuildingSceneLayer:async()=>(await st(async()=>{const{default:t}=await import("./BuildingSceneLayer-Csvqm0ZA.js");return{default:t}},__vite__mapDeps([110,111,112,113,114,32,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,94]),import.meta.url)).default,CSVLayer:async()=>(await st(async()=>{const{default:t}=await import("./CSVLayer-D4MC3ksb.js");return{default:t}},__vite__mapDeps([131,132,133,111]),import.meta.url)).default,CatalogLayer:async()=>(await st(async()=>{const{default:t}=await import("./CatalogLayer-xZmj_-JO.js");return{default:t}},__vite__mapDeps([134,8,135,136,137,138,65,139,140,141,12,13,14,15,132,133,111,142,143,144,145,146,104,103,105,147,102]),import.meta.url)).default,DimensionLayer:async()=>(await st(async()=>{const{default:t}=await import("./DimensionLayer-BxHonJeX.js");return{default:t}},__vite__mapDeps([148,149]),import.meta.url)).default,ElevationLayer:async()=>(await st(async()=>{const{default:t}=await import("./ElevationLayer-DkqNcQDF.js");return{default:t}},__vite__mapDeps([82,83,6,7,84,85,39,86]),import.meta.url)).default,FeatureLayer:async()=>(await st(async()=>{const{default:t}=await Promise.resolve().then(()=>TBe);return{default:t}},void 0,import.meta.url)).default,GeoJSONLayer:async()=>(await st(async()=>{const{default:t}=await import("./GeoJSONLayer-DFDdyr8p.js");return{default:t}},__vite__mapDeps([150,132,133,111]),import.meta.url)).default,GeoRSSLayer:async()=>(await st(async()=>{const{default:t}=await import("./GeoRSSLayer-CvDgIKkv.js");return{default:t}},[],import.meta.url)).default,GroupLayer:async()=>(await st(async()=>{const{default:t}=await Promise.resolve().then(()=>ARe);return{default:t}},void 0,import.meta.url)).default,ImageryLayer:async()=>(await st(async()=>{const{default:t}=await import("./ImageryLayer-EFYQFUbn.js");return{default:t}},__vite__mapDeps([151,152,153,154,76,155,136,14,12,13,15,58,59,109,143,144,145,146,104,103,105,147]),import.meta.url)).default,ImageryTileLayer:async()=>(await st(async()=>{const{default:t}=await import("./ImageryTileLayer-thnCIBiD.js");return{default:t}},__vite__mapDeps([156,152,153,154,76,155,136,14,12,13,15,58,59,6,7,157,158,21,8,159,85,39]),import.meta.url)).default,IntegratedMesh3DTilesLayer:async()=>(await st(async()=>{const{default:t}=await import("./IntegratedMesh3DTilesLayer-Wrqsne8n.js");return{default:t}},[],import.meta.url)).default,IntegratedMeshLayer:async()=>(await st(async()=>{const{default:t}=await import("./IntegratedMeshLayer-TuSsq4jL.js");return{default:t}},__vite__mapDeps([160,161,114,162,112,113,32,115,116,117]),import.meta.url)).default,KMLLayer:async()=>(await st(async()=>{const{default:t}=await import("./KMLLayer-D3S_psDX.js");return{default:t}},__vite__mapDeps([163,164]),import.meta.url)).default,KnowledgeGraphLayer:async()=>(await st(async()=>{const{default:t}=await import("./KnowledgeGraphLayer-DPePf_mc.js");return{default:t}},__vite__mapDeps([165,166,102,103,104,105,167,168,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,132,111]),import.meta.url)).default,LineOfSightLayer:async()=>(await st(async()=>{const{default:t}=await import("./LineOfSightLayer-A5g-Gf6b.js");return{default:t}},__vite__mapDeps([180,149,181,182,183,184,161,114,162]),import.meta.url)).default,LinkChartLayer:async()=>(await st(async()=>{const{default:t}=await import("./LinkChartLayer-tDD2vAu3.js");return{default:t}},__vite__mapDeps([185,102,103,104,105,166,167,168,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,132,111]),import.meta.url)).default,MapImageLayer:async()=>(await st(async()=>{const{default:t}=await import("./MapImageLayer-Df9fGMrd.js");return{default:t}},__vite__mapDeps([186,73,187,142,65,14,143,144,12,13,15,145,146,104,103,105,147,102,75,72,74,109]),import.meta.url)).default,MapNotesLayer:async()=>(await st(async()=>{const{default:t}=await import("./MapNotesLayer-BD0moL5f.js");return{default:t}},__vite__mapDeps([188,12,13,14,15,189]),import.meta.url)).default,MediaLayer:async()=>(await st(async()=>{const{default:t}=await import("./MediaLayer-oAc1cIqv.js");return{default:t}},__vite__mapDeps([190,191,192,13,27,162,170,171,22]),import.meta.url)).default,OGCFeatureLayer:async()=>(await st(async()=>{const{default:t}=await import("./OGCFeatureLayer-DtMkbmyk.js");return{default:t}},__vite__mapDeps([193,194,102,103,104,105,195,196,132,133,111,197]),import.meta.url)).default,OpenStreetMapLayer:async()=>(await st(async()=>{const{default:t}=await import("./OpenStreetMapLayer-5qZzDuI_.js");return{default:t}},__vite__mapDeps([198,199,109,6,7]),import.meta.url)).default,OrientedImageryLayer:async()=>(await st(async()=>{const{default:t}=await import("./OrientedImageryLayer-hbvgWthz.js");return{default:t}},[],import.meta.url)).default,PointCloudLayer:async()=>(await st(async()=>{const{default:t}=await import("./PointCloudLayer-9Ep09O8O.js");return{default:t}},__vite__mapDeps([200,112,113,114,32,115,116,201]),import.meta.url)).default,RouteLayer:async()=>(await st(async()=>{const{default:t}=await import("./RouteLayer-D5QU1iA1.js");return{default:t}},__vite__mapDeps([202,113,114,14,203,12,13,15,81]),import.meta.url)).default,SceneLayer:async()=>(await st(async()=>{const{default:t}=await import("./SceneLayer-CzIa0p5C.js");return{default:t}},__vite__mapDeps([204,205,140,206,27,207,139,208,209,210,211,212,213,128,129,214,215,216,138,65,66,112,113,114,32,115,116,94,111,117,217,161,162,118,119,120,121,122,123,124,125,126,127,130]),import.meta.url)).default,StreamLayer:async()=>(await st(async()=>{const{default:t}=await import("./StreamLayer-BSGtwGLd.js");return{default:t}},[],import.meta.url)).default,SubtypeGroupLayer:async()=>(await st(async()=>{const{default:t}=await import("./SubtypeGroupLayer-DsbElCvZ.js");return{default:t}},__vite__mapDeps([218,59,58]),import.meta.url)).default,TileLayer:async()=>(await st(async()=>{const{default:t}=await import("./TileLayer-Bmrs7Hvj.js");return{default:t}},__vite__mapDeps([219,83,6,7,84,85,39,187,142,65,14,143,144,12,13,15,145,146,104,103,105,147,102,75,109]),import.meta.url)).default,UnknownLayer:async()=>(await st(async()=>{const{default:t}=await import("./UnknownLayer-CO-ZST_j.js");return{default:t}},[],import.meta.url)).default,UnsupportedLayer:async()=>(await st(async()=>{const{default:t}=await import("./UnsupportedLayer-BLCVLdbc.js");return{default:t}},[],import.meta.url)).default,VectorTileLayer:async()=>(await st(async()=>{const{default:t}=await import("./VectorTileLayer-CdQ7SvMn.js");return{default:t}},__vite__mapDeps([220,83,6,7,84,85,39,20,32,221,222,223,224,25,225,18,23,28]),import.meta.url)).default,VideoLayer:async()=>(await st(async()=>{const{default:t}=await import("./VideoLayer-2wo3U-5y.js");return{default:t}},__vite__mapDeps([226,227,128]),import.meta.url)).default,ViewshedLayer:async()=>(await st(async()=>{const{default:t}=await import("./ViewshedLayer-u7aMmCTF.js");return{default:t}},__vite__mapDeps([228,181,182,183,184,149]),import.meta.url)).default,VoxelLayer:async()=>(await st(async()=>{const{default:t}=await import("./VoxelLayer-CQ-PP38a.js");return{default:t}},__vite__mapDeps([229,112,113,114,32,115,116,161,162]),import.meta.url)).default,WFSLayer:async()=>(await st(async()=>{const{default:t}=await import("./WFSLayer-B6YAIUO7.js");return{default:t}},__vite__mapDeps([230,132,133,111,231,195,196,103,104,232]),import.meta.url)).default,WMSLayer:async()=>(await st(async()=>{const{default:t}=await import("./WMSLayer-DfD7VANo.js");return{default:t}},__vite__mapDeps([233,73,234,235,109]),import.meta.url)).default,WMTSLayer:async()=>(await st(async()=>{const{default:t}=await import("./WMTSLayer-Ca-nfyJa.js");return{default:t}},__vite__mapDeps([236,199,109,6,7,84,234,232]),import.meta.url)).default,WebTileLayer:async()=>(await st(async()=>{const{default:t}=await import("./WebTileLayer-LdRVhnhY.js").then(e=>e.W);return{default:t}},__vite__mapDeps([199,109,6,7]),import.meta.url)).default};function gRe(t){return new the({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function gmt(t){for(const e of t.values())e==null||e.destroy();t.clear()}function SA(t,e,i=ci){return e||(e=new i),e===t||(e.removeAll(),yRe(t)?e.addMany(t):t&&e.add(t)),e}function lfe(t){return t}function yRe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}function SR(t,e,i){let n,s;if(t)for(let r=0,o=t.length;r<o;r++){if(n=t.at(r),(n==null?void 0:n[e])===i)return n;if((n==null?void 0:n.type)==="group"&&(s=SR(n.layers,e,i),s))return s}}const vRe=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new ci;const n=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||qt.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},r=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void qt.getLogger(this).error("#add()","Cannot add layer to itself.");n(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>r(o.item))])}destroy(){const i=this.layers.toArray();for(const n of i)n.destroy();this.layers.destroy()}set layers(i){this._set("layers",SA(i,this._get("layers")))}add(i,n){const s=this.layers;if(n=s.getNextIndex(n),i instanceof dA){const r=i;r.parent===this?this.reorder(r,n):s.add(r,n)}else zv(i)?i.then(r=>{this.destroyed||this.add(r,n)}):qt.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,n){const s=this.layers;let r=s.getNextIndex(n);i.slice().forEach(o=>{o.parent!==this?(s.add(o,r),r+=1):this.reorder(o,r)})}findLayerById(i){return SR(this.layers,"id",i)}findLayerByUid(i){return SR(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,n){return this.layers.reorder(i,n)}layerAdded(i){}layerRemoved(i){}};return I([O()],e.prototype,"layers",null),e=I([De("esri.support.LayersMixin")],e),e};function ER(t,e,i){if(t)for(let n=0,s=t.length;n<s;n++){const r=t.at(n);if(r[e]===i)return r;if((r==null?void 0:r.type)==="group"){const o=ER(r.tables,e,i);if(o)return o}}}const _Re=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new ci,this.addHandles([this.tables.on("after-add",n=>{const s=n.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&qt.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const n of i)n.destroy();this.tables.destroy()}set tables(i){this._set("tables",SA(i,this._get("tables")))}findTableById(i){return ER(this.tables,"id",i)}findTableByUid(i){return ER(this.tables,"uid",i)}};return I([O()],e.prototype,"tables",null),e=I([De("esri.support.TablesMixin")],e),e},bRe=Symbol("WebScene");var pf;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(pf||(pf={}));async function xRe(t){const e=[];for(const i of t.allLayers)if("beforeSave"in i&&typeof i.beforeSave=="function"){const n=i.beforeSave();n&&e.push(n)}await Promise.allSettled(e)}const wRe=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function ymt(t,e,i){let n=(t.messages??[]).filter(({type:s})=>s==="error").map(({name:s,message:r,details:o})=>new rt(s,r,o));if(t.blockedRelativeUrls&&(n=n.concat(t.blockedRelativeUrls.map(s=>new rt("url:unsupported",`Relative url '${s}' is not supported`)))),i){const{ignoreUnsupported:s,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:o}=i;s&&(n=n.filter(({name:l})=>!(wRe.has(l)||r.includes(l)))),o&&(n=n.filter(l=>l.name!=="web-document-write:property-required"))}if(n.length>0)throw new rt(e.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:n})}const SRe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),ERe=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function CRe(t){return t.layerContainerType==="basemap"?SRe:t.layerContainerType==="operational-layers"?ERe:null}function PRe(t,e){if(e.restrictedWebMapWriting){const i=CRe(e);return i==null||i.has(t.type)&&!bA(t)}return!0}function TRe(t,e){var i;if(e)if(bA(t)){const n=Yp("featureCollection.layers",e),s=(i=n==null?void 0:n[0])==null?void 0:i.layerDefinition;s&&YK(t,s)}else t.type!=="group"&&YK(t,e)}function YK(t,e){"maxScale"in t&&(e.maxScale=J9(t.maxScale)??void 0),"minScale"in t&&(e.minScale=J9(t.minScale)??void 0)}function IRe(t,e){if(TRe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=J9(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(bA(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function MRe(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new rt("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(bA(t)&&!t.isTable)e=t.resourceInfo;else if(PRe(t,i)){const n={};return t.write(n,i)?n:null}return e!=null&&IRe(t,e=Ue(e)),e}let ua=class extends pG(CG(Vde(afe(_Re(vRe(iG(dA))))))){constructor(e){super(e),this.allLayers=new the({getCollections:()=>[this.layers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=gRe(this),this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._debouncedSaveOperations=qv(async(i,n,s)=>{const{save:r,saveAs:o}=await st(()=>import("./groupLayerUtils-CRe-3KGg.js"),__vite__mapDeps([237,238,113,114,32,115,116]),import.meta.url);switch(i){case pf.SAVE:return r(this,n);case pf.SAVE_AS:return o(this,s,n)}})}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([xi(()=>{let e=this.parent;for(;e&&"parent"in e&&e.parent;)e=e.parent;return e&&bRe in e},e=>{const i="prevent-adding-tables";this.removeHandles(i),e&&(this.tables.removeAll(),this.addHandles(Ju(()=>this.tables,"before-add",n=>{n.preventDefault(),qt.getLogger(this).errorOnce("tables","tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.")}),i))},ac),xi(()=>this.visible,this._onVisibilityChange.bind(this),om)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf("portalItem")===Ui.USER}_writeLayers(e,i,n,s){const r=[];if(!e)return r;e.forEach(o=>{const l=MRe(o,s.webmap?s.webmap.getLayerJSONFromResourceInfo(o):null,s);l!=null&&l.layerType&&r.push(l)}),i.layers=r}set portalItem(e){this._set("portalItem",e)}readPortalItem(e,i,n){const{itemId:s,layerType:r}=i;if(r==="GroupLayer"&&s)return new WS({id:s,portal:n==null?void 0:n.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}set visibilityMode(e){const i=this._get("visibilityMode")!==e;this._set("visibilityMode",e),i&&this._enforceVisibility(e,this.visible)}async beforeSave(){return xRe(this)}load(e){const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Group Layer","Scene Service"],layerModuleTypeMap:mRe},e).catch(n=>{if(jh(n),this.sourceIsPortalItem)throw n});return this.addResolvingPromise(i),Promise.resolve(this)}async loadAll(){return gDe(this,e=>{e(this.layers,this.tables)})}async save(e){return this._debouncedSaveOperations(pf.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(pf.SAVE_AS,i,e)}layerAdded(e){e.visible&&this.visibilityMode==="exclusive"?this._turnOffOtherLayers(e):this.visibilityMode==="inherited"&&(e.visible=this.visible),this.hasHandles(e.uid)?console.error(`Layer read to Grouplayer: uid=${e.uid}`):this.addHandles(xi(()=>e.visible,i=>this._onChildVisibilityChange(e,i),om),e.uid)}layerRemoved(e){this.removeHandles(e.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach(i=>{i!==e&&(i.visible=!1)})}_enforceVisibility(e,i){if(!Pl(this).initialized)return;const n=this.layers;let s=n.find(r=>r.visible);switch(e){case"exclusive":n.length&&!s&&(s=n.at(0),s.visible=!0),this._turnOffOtherLayers(s);break;case"inherited":n.forEach(r=>{r.visible=i})}}_onVisibilityChange(e){this.visibilityMode==="inherited"&&this.layers.forEach(i=>{i.visible=e})}_onChildVisibilityChange(e,i){switch(this.visibilityMode){case"exclusive":i?this._turnOffOtherLayers(e):this._isAnyLayerVisible()||(e.visible=!0);break;case"inherited":e.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some(e=>e.visible)}};I([O({readOnly:!0,dependsOn:[]})],ua.prototype,"allLayers",void 0),I([O({readOnly:!0})],ua.prototype,"allTables",void 0),I([O({json:{read:!0,write:!0}})],ua.prototype,"blendMode",void 0),I([O()],ua.prototype,"fullExtent",void 0),I([O({readOnly:!0})],ua.prototype,"sourceIsPortalItem",null),I([O({json:{read:!1,write:{ignoreOrigin:!0}}})],ua.prototype,"layers",void 0),I([zt("layers")],ua.prototype,"_writeLayers",null),I([O({type:["GroupLayer"]})],ua.prototype,"operationalLayerType",void 0),I([O({json:{origins:{"web-map":{read:!1,write:{overridePolicy(t,e,i){return{enabled:(t==null?void 0:t.type)==="Group Layer"&&(i==null?void 0:i.initiator)!==this}}}},"web-scene":{read:!1,write:!1}}}})],ua.prototype,"portalItem",null),I([Dt("web-map","portalItem",["itemId"])],ua.prototype,"readPortalItem",null),I([zt("web-map","portalItem",{itemId:{type:String}})],ua.prototype,"writePortalItem",null),I([O()],ua.prototype,"spatialReference",void 0),I([O({json:{read:!1},readOnly:!0,value:"group"})],ua.prototype,"type",void 0),I([O({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{type:["independent","exclusive"],write:(t,e,i)=>{t!=="inherited"&&(e[i]=t)}}}}})],ua.prototype,"visibilityMode",null),ua=I([De("esri.layers.GroupLayer")],ua);const CR=ua,ARe=Object.freeze(Object.defineProperty({__proto__:null,default:CR},Symbol.toStringTag,{value:"Module"}));var pu={};function A6(){return A6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},A6.apply(null,arguments)}function EA(t,e){if(t==null)return{};var i={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;i[n]=t[n]}return i}function PR(t,e){return PR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},PR(t,e)}function i5(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,PR(t,e)}function kRe(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function DRe(t,e){t.classList?t.classList.add(e):kRe(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function XK(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function NRe(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=XK(t.className,e):t.setAttribute("class",XK(t.className&&t.className.baseVal||"",e))}var ORe=qse();const z3=zse(ORe),TR={disabled:!1},$E=us.createContext(null);var cfe=function(e){return e.scrollTop},q3="unmounted",U1="exited",Ou="entering",uf="entered",RE="exiting",Rf=function(t){i5(e,t);function e(n,s){var r;r=t.call(this,n,s)||this;var o=s,l=o&&!o.isMounting?n.enter:n.appear,c;return r.appearStatus=null,n.in?l?(c=U1,r.appearStatus=Ou):c=uf:n.unmountOnExit||n.mountOnEnter?c=q3:c=U1,r.state={status:c},r.nextCallback=null,r}e.getDerivedStateFromProps=function(s,r){var o=s.in;return o&&r.status===q3?{status:U1}:null};var i=e.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(s){var r=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==Ou&&o!==uf&&(r=Ou):(o===Ou||o===uf)&&(r=RE)}this.updateStatus(!1,r)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var s=this.props.timeout,r,o,l;return r=o=l=s,s!=null&&typeof s!="number"&&(r=s.exit,o=s.enter,l=s.appear!==void 0?s.appear:o),{exit:r,enter:o,appear:l}},i.updateStatus=function(s,r){if(s===void 0&&(s=!1),r!==null)if(this.cancelNextCallback(),r===Ou){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:z3.findDOMNode(this);o&&cfe(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===U1&&this.setState({status:q3})},i.performEnter=function(s){var r=this,o=this.props.enter,l=this.context?this.context.isMounting:s,c=this.props.nodeRef?[l]:[z3.findDOMNode(this),l],f=c[0],y=c[1],_=this.getTimeouts(),x=l?_.appear:_.enter;if(!s&&!o||TR.disabled){this.safeSetState({status:uf},function(){r.props.onEntered(f)});return}this.props.onEnter(f,y),this.safeSetState({status:Ou},function(){r.props.onEntering(f,y),r.onTransitionEnd(x,function(){r.safeSetState({status:uf},function(){r.props.onEntered(f,y)})})})},i.performExit=function(){var s=this,r=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:z3.findDOMNode(this);if(!r||TR.disabled){this.safeSetState({status:U1},function(){s.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:RE},function(){s.props.onExiting(l),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:U1},function(){s.props.onExited(l)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(s,r){r=this.setNextCallback(r),this.setState(s,r)},i.setNextCallback=function(s){var r=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,r.nextCallback=null,s(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},i.onTransitionEnd=function(s,r){this.setNextCallback(r);var o=this.props.nodeRef?this.props.nodeRef.current:z3.findDOMNode(this),l=s==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],f=c[0],y=c[1];this.props.addEndListener(f,y)}s!=null&&setTimeout(this.nextCallback,s)},i.render=function(){var s=this.state.status;if(s===q3)return null;var r=this.props,o=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var l=EA(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return us.createElement($E.Provider,{value:null},typeof o=="function"?o(s,l):us.cloneElement(us.Children.only(o),l))},e}(us.Component);Rf.contextType=$E;Rf.propTypes={};function V_(){}Rf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:V_,onEntering:V_,onEntered:V_,onExit:V_,onExiting:V_,onExited:V_};Rf.UNMOUNTED=q3;Rf.EXITED=U1;Rf.ENTERING=Ou;Rf.ENTERED=uf;Rf.EXITING=RE;var $Re=function(e,i){return e&&i&&i.split(" ").forEach(function(n){return DRe(e,n)})},iN=function(e,i){return e&&i&&i.split(" ").forEach(function(n){return NRe(e,n)})},PG=function(t){i5(e,t);function e(){for(var n,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return n=t.call.apply(t,[this].concat(r))||this,n.appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(l,c){var f=n.resolveArguments(l,c),y=f[0],_=f[1];n.removeClasses(y,"exit"),n.addClass(y,_?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(l,c)},n.onEntering=function(l,c){var f=n.resolveArguments(l,c),y=f[0],_=f[1],x=_?"appear":"enter";n.addClass(y,x,"active"),n.props.onEntering&&n.props.onEntering(l,c)},n.onEntered=function(l,c){var f=n.resolveArguments(l,c),y=f[0],_=f[1],x=_?"appear":"enter";n.removeClasses(y,x),n.addClass(y,x,"done"),n.props.onEntered&&n.props.onEntered(l,c)},n.onExit=function(l){var c=n.resolveArguments(l),f=c[0];n.removeClasses(f,"appear"),n.removeClasses(f,"enter"),n.addClass(f,"exit","base"),n.props.onExit&&n.props.onExit(l)},n.onExiting=function(l){var c=n.resolveArguments(l),f=c[0];n.addClass(f,"exit","active"),n.props.onExiting&&n.props.onExiting(l)},n.onExited=function(l){var c=n.resolveArguments(l),f=c[0];n.removeClasses(f,"exit"),n.addClass(f,"exit","done"),n.props.onExited&&n.props.onExited(l)},n.resolveArguments=function(l,c){return n.props.nodeRef?[n.props.nodeRef.current,l]:[l,c]},n.getClassNames=function(l){var c=n.props.classNames,f=typeof c=="string",y=f&&c?c+"-":"",_=f?""+y+l:c[l],x=f?_+"-active":c[l+"Active"],S=f?_+"-done":c[l+"Done"];return{baseClassName:_,activeClassName:x,doneClassName:S}},n}var i=e.prototype;return i.addClass=function(s,r,o){var l=this.getClassNames(r)[o+"ClassName"],c=this.getClassNames("enter"),f=c.doneClassName;r==="appear"&&o==="done"&&f&&(l+=" "+f),o==="active"&&s&&cfe(s),l&&(this.appliedClasses[r][o]=l,$Re(s,l))},i.removeClasses=function(s,r){var o=this.appliedClasses[r],l=o.base,c=o.active,f=o.done;this.appliedClasses[r]={},l&&iN(s,l),c&&iN(s,c),f&&iN(s,f)},i.render=function(){var s=this.props;s.classNames;var r=EA(s,["classNames"]);return us.createElement(Rf,A6({},r,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(us.Component);PG.defaultProps={classNames:""};PG.propTypes={};function RRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TG(t,e){var i=function(r){return e&&Gh.isValidElement(r)?e(r):r},n=Object.create(null);return t&&Gh.Children.map(t,function(s){return s}).forEach(function(s){n[s.key]=i(s)}),n}function LRe(t,e){t=t||{},e=e||{};function i(y){return y in e?e[y]:t[y]}var n=Object.create(null),s=[];for(var r in t)r in e?s.length&&(n[r]=s,s=[]):s.push(r);var o,l={};for(var c in e){if(n[c])for(o=0;o<n[c].length;o++){var f=n[c][o];l[n[c][o]]=i(f)}l[c]=i(c)}for(o=0;o<s.length;o++)l[s[o]]=i(s[o]);return l}function Ly(t,e,i){return i[e]!=null?i[e]:t.props[e]}function FRe(t,e){return TG(t.children,function(i){return Gh.cloneElement(i,{onExited:e.bind(null,i),in:!0,appear:Ly(i,"appear",t),enter:Ly(i,"enter",t),exit:Ly(i,"exit",t)})})}function zRe(t,e,i){var n=TG(t.children),s=LRe(e,n);return Object.keys(s).forEach(function(r){var o=s[r];if(Gh.isValidElement(o)){var l=r in e,c=r in n,f=e[r],y=Gh.isValidElement(f)&&!f.props.in;c&&(!l||y)?s[r]=Gh.cloneElement(o,{onExited:i.bind(null,o),in:!0,exit:Ly(o,"exit",t),enter:Ly(o,"enter",t)}):!c&&l&&!y?s[r]=Gh.cloneElement(o,{in:!1}):c&&l&&Gh.isValidElement(f)&&(s[r]=Gh.cloneElement(o,{onExited:i.bind(null,o),in:f.props.in,exit:Ly(o,"exit",t),enter:Ly(o,"enter",t)}))}}),s}var qRe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},VRe={component:"div",childFactory:function(e){return e}},CA=function(t){i5(e,t);function e(n,s){var r;r=t.call(this,n,s)||this;var o=r.handleExited.bind(RRe(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}var i=e.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,r){var o=r.children,l=r.handleExited,c=r.firstRender;return{children:c?FRe(s,l):zRe(s,o,l),firstRender:!1}},i.handleExited=function(s,r){var o=TG(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(r),this.mounted&&this.setState(function(l){var c=A6({},l.children);return delete c[s.key],{children:c}}))},i.render=function(){var s=this.props,r=s.component,o=s.childFactory,l=EA(s,["component","childFactory"]),c=this.state.contextValue,f=qRe(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,r===null?us.createElement($E.Provider,{value:c},f):us.createElement($E.Provider,{value:c},us.createElement(r,l,f))},e}(us.Component);CA.propTypes={};CA.defaultProps=VRe;var ufe=function(t){i5(e,t);function e(){for(var n,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return n=t.call.apply(t,[this].concat(r))||this,n.handleEnter=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return n.handleLifecycle("onEnter",0,c)},n.handleEntering=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return n.handleLifecycle("onEntering",0,c)},n.handleEntered=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return n.handleLifecycle("onEntered",0,c)},n.handleExit=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return n.handleLifecycle("onExit",1,c)},n.handleExiting=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return n.handleLifecycle("onExiting",1,c)},n.handleExited=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return n.handleLifecycle("onExited",1,c)},n}var i=e.prototype;return i.handleLifecycle=function(s,r,o){var l,c=this.props.children,f=us.Children.toArray(c)[r];if(f.props[s]&&(l=f.props)[s].apply(l,o),this.props[s]){var y=f.props.nodeRef?void 0:z3.findDOMNode(this);this.props[s](y)}},i.render=function(){var s=this.props,r=s.children,o=s.in,l=EA(s,["children","in"]),c=us.Children.toArray(r),f=c[0],y=c[1];return delete l.onEnter,delete l.onEntering,delete l.onEntered,delete l.onExit,delete l.onExiting,delete l.onExited,us.createElement(CA,l,o?us.cloneElement(f,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):us.cloneElement(y,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},e}(us.Component);ufe.propTypes={};var k4,D4;function GRe(t,e){return!(t===e||us.isValidElement(t)&&us.isValidElement(e)&&t.key!=null&&t.key===e.key)}var U2={out:"out-in",in:"in-out"},k6=function(e,i,n){return function(){var s;e.props[i]&&(s=e.props)[i].apply(s,arguments),n()}},jRe=(k4={},k4[U2.out]=function(t){var e=t.current,i=t.changeState;return us.cloneElement(e,{in:!1,onExited:k6(e,"onExited",function(){i(Ou,null)})})},k4[U2.in]=function(t){var e=t.current,i=t.changeState,n=t.children;return[e,us.cloneElement(n,{in:!0,onEntered:k6(n,"onEntered",function(){i(Ou)})})]},k4),BRe=(D4={},D4[U2.out]=function(t){var e=t.children,i=t.changeState;return us.cloneElement(e,{in:!0,onEntered:k6(e,"onEntered",function(){i(uf,us.cloneElement(e,{in:!0}))})})},D4[U2.in]=function(t){var e=t.current,i=t.children,n=t.changeState;return[us.cloneElement(e,{in:!1,onExited:k6(e,"onExited",function(){n(uf,us.cloneElement(i,{in:!0}))})}),us.cloneElement(i,{in:!0})]},D4),IG=function(t){i5(e,t);function e(){for(var n,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return n=t.call.apply(t,[this].concat(r))||this,n.state={status:uf,current:null},n.appeared=!1,n.changeState=function(l,c){c===void 0&&(c=n.state.current),n.setState({status:l,current:c})},n}var i=e.prototype;return i.componentDidMount=function(){this.appeared=!0},e.getDerivedStateFromProps=function(s,r){return s.children==null?{current:null}:r.status===Ou&&s.mode===U2.in?{status:Ou}:r.current&&GRe(r.current,s.children)?{status:RE}:{current:us.cloneElement(s.children,{in:!0})}},i.render=function(){var s=this.props,r=s.children,o=s.mode,l=this.state,c=l.status,f=l.current,y={children:r,current:f,changeState:this.changeState,status:c},_;switch(c){case Ou:_=BRe[o](y);break;case RE:_=jRe[o](y);break;case uf:_=f}return us.createElement($E.Provider,{value:{isMounting:!this.appeared}},_)},e}(us.Component);IG.propTypes={};IG.defaultProps={mode:U2.out};const HRe=Object.freeze(Object.defineProperty({__proto__:null,CSSTransition:PG,ReplaceTransition:ufe,SwitchTransition:IG,Transition:Rf,TransitionGroup:CA,config:TR},Symbol.toStringTag,{value:"Module"})),URe=abe(HRe);var WK;function YRe(){if(WK)return pu;WK=1;var t=pu&&pu.__assign||function(){return t=Object.assign||function(f){for(var y,_=1,x=arguments.length;_<x;_++){y=arguments[_];for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(f[S]=y[S])}return f},t.apply(this,arguments)},e=pu&&pu.__createBinding||(Object.create?function(f,y,_,x){x===void 0&&(x=_),Object.defineProperty(f,x,{enumerable:!0,get:function(){return y[_]}})}:function(f,y,_,x){x===void 0&&(x=_),f[x]=y[_]}),i=pu&&pu.__setModuleDefault||(Object.create?function(f,y){Object.defineProperty(f,"default",{enumerable:!0,value:y})}:function(f,y){f.default=y}),n=pu&&pu.__importStar||function(f){if(f&&f.__esModule)return f;var y={};if(f!=null)for(var _ in f)_!=="default"&&Object.prototype.hasOwnProperty.call(f,_)&&e(y,f,_);return i(y,f),y};Object.defineProperty(pu,"__esModule",{value:!0});var s=n(TM()),r=URe,o=function(f,y,_){var x=f==="bottom"||f==="top";return t(t(t({width:x?(_?"0":"100")+"vw":100-y+"vw",height:x?100-y+"vh":(_?"0":"100")+"vh"},f==="right"&&{left:0}),f==="top"&&{bottom:0}),{position:"inherit"})},l=function(f,y){var _=f==="bottom"||f==="top";return t(t(t({width:_?"100vw":y+"vw",height:_?y+"vh":"100vh"},f==="right"&&{right:0}),f==="bottom"&&{bottom:0}),{position:"inherit",overflow:"auto"})},c=function(f){var y=f.type,_=f.size,x=f.panelContainerClassName,S=f.panelClassName,P=f.isOpen,A=f.onOpen,D=f.onOpening,N=f.onOpened,F=f.onClose,G=f.onClosing,V=f.onClosed,B=f.backdropClicked,W=f.noBackdrop,J=f.children,re=y==="right"||y==="bottom",ne=y==="bottom"||y==="top";return s.createElement("div",null,s.createElement("div",{className:"sliding-panel-container "+(P?"active":"")+" "+(W?"click-through":"")},s.createElement(r.CSSTransition,{in:P,timeout:500,classNames:"panel-container-"+y,unmountOnExit:!0,onEnter:A,onEntering:D,onEntered:N,onExit:F,onExiting:G,onExited:V,style:{display:ne?"block":"flex"}},s.createElement("div",null,re&&s.createElement("div",{className:"glass",style:o(y,_,!!W),onClick:function(oe){!W&&B&&B(oe)}}),s.createElement("div",{className:"panel "+(x||""),style:l(y,_)},s.createElement("div",{className:"panel-content "+(S||"")},J)),!re&&s.createElement("div",{className:"glass",style:o(y,_,!!W),onClick:function(oe){!W&&B&&B(oe)}})))))};return c.defaultProps={type:"left",size:50,panelClassName:"",panelContainerClassName:"",noBackdrop:!1,children:null},pu.default=c,pu}YRe();function N4(t){return Qu(hV(t),0,255)}function O4(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}function $4(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let hI=class bo{static blendColors(e,i,n,s=new bo){return s.r=Math.round(e.r+(i.r-e.r)*n),s.g=Math.round(e.g+(i.g-e.g)*n),s.b=Math.round(e.b+(i.b-e.b)*n),s.a=e.a+(i.a-e.a)*n,s._sanitize()}static fromRgb(e,i){const n=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(n){const s=n[2].split(/\s*,\s*/),r=n[1];if(r==="rgb"&&s.length===3||r==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const l=s.map(c=>2.56*parseFloat(c));return s.length===4&&(l[3]=parseFloat(s[3])),bo.fromArray(l,i)}return bo.fromArray(s.map(l=>parseFloat(l)),i)}if(r==="hsl"&&s.length===3||r==="hsla"&&s.length===4)return bo.fromArray(Lhe(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(e,i=new bo){if(e[0]!=="#"||isNaN(+`0x${e.slice(1)}`))return null;switch(e.length){case 4:case 5:{const n=parseInt(e.slice(1,2),16),s=parseInt(e.slice(2,3),16),r=parseInt(e.slice(3,4),16),o=e.length===5?15:parseInt(e.slice(4),16);return bo.fromArray([n+16*n,s+16*s,r+16*r,(o+16*o)/255],i)}case 7:case 9:{const n=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16),o=e.length===7?255:parseInt(e.slice(7),16);return bo.fromArray([n,s,r,o/255],i)}default:return null}}static fromArray(e,i=new bo){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const n=Rhe(e)?cG(e):null;return n&&bo.fromArray(n,i)||bo.fromRgb(e,i)||bo.fromHex(e,i)}static fromJSON(e){return e!=null?new bo([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?bo.fromString(e,this):Array.isArray(e)?bo.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof bo||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,n=(e==null?void 0:e.digits)??6,s=n===3||n===4,r=n===4||n===8,o=`#${$4(this.r,s)}${$4(this.g,s)}${$4(this.b,s)}${r?$4(Math.round(255*this.a),s):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=bo.AlphaMode.ALWAYS){const i=N4(this.r),n=N4(this.g),s=N4(this.b);return e===bo.AlphaMode.ALWAYS||this.a!==1?[i,n,s,N4(255*this.a)]:[i,n,s]}clone(){return new bo(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(O4(this.r,0,255)),this.g=Math.round(O4(this.g,0,255)),this.b=Math.round(O4(this.b,0,255)),this.a=O4(this.a,0,1),this}_set(e,i,n,s){this.r=e,this.g=i,this.b=n,this.a=s}};hI.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(hI||(hI={}));const fi=hI;function si(t,e={}){const i=t instanceof mn?t:new mn(t,e),{alwaysWriteDefaults:n,default:s,ignoreUnknown:r=!0,name:o,nonNullable:l,readOnly:c=!1}=e;return O({type:r?i.apiValues:String,json:{type:i.jsonValues,default:s,name:o,read:!c&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:n}},nonNullable:l,readOnly:c})}const ZK=new mn({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let XRe=0,lb=class extends St{constructor(e){super(e),this.id="sym"+XRe++,this.type=null,this.color=new fi([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};I([O({type:ZK.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:ZK.write}}})],lb.prototype,"type",void 0),I([O({type:fi,json:{write:{allowNull:!0}}})],lb.prototype,"color",void 0),I([Dt("color")],lb.prototype,"readColor",null),lb=I([De("esri.symbols.Symbol")],lb);const Ma=lb;let V3=class extends Ma{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};I([si({esriSLS:"simple-line"},{readOnly:!0})],V3.prototype,"type",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],V3.prototype,"width",void 0),V3=I([De("esri.symbols.LineSymbol")],V3);const WRe=V3,ZRe=["begin","end","begin-end"],hfe=["arrow","circle","square","diamond","cross","x"];var IR;let Fd=IR=class extends St{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,n){e[i]=(n==null?void 0:n.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,n){(n==null?void 0:n.origin)==="web-map"||(e[i]=t)}clone(){return new IR({color:Ue(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};I([O({type:["begin","end","begin-end"],json:{write:!0}})],Fd.prototype,"placement",void 0),I([si({"line-marker":"line-marker"},{readOnly:!0}),O({json:{origins:{"web-map":{write:!1}}}})],Fd.prototype,"type",void 0),I([O({type:hfe})],Fd.prototype,"style",void 0),I([zt("style")],Fd.prototype,"writeStyle",null),I([O({type:fi,value:null,json:{write:{allowNull:!0}}})],Fd.prototype,"color",null),I([Dt("color")],Fd.prototype,"readColor",null),I([zt("color")],Fd.prototype,"writeColor",null),Fd=IR=I([De("esri.symbols.LineSymbolMarker")],Fd);const KRe=Fd;var MR;const nN=new mn({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let pp=MR=class extends WRe{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,n,s,r){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=pn(i)),n!=null&&(o.cap=n),s!=null&&(o.join=s),r!=null&&(o.miterLimit=pn(r)),o}clone(){var t;return new MR({color:Ue(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};I([si({esriSLS:"simple-line"},{readOnly:!0})],pp.prototype,"type",void 0),I([O({type:nN.apiValues,json:{read:nN.read,write:nN.write}})],pp.prototype,"style",void 0),I([O({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],pp.prototype,"cap",void 0),I([O({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],pp.prototype,"join",void 0),I([O({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":KRe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],pp.prototype,"marker",void 0),I([O({type:Number,json:{read:!1,write:!1}})],pp.prototype,"miterLimit",void 0),pp=MR=I([De("esri.symbols.SimpleLineSymbol")],pp);const Rl=pp,xmt=Object.freeze(Object.defineProperty({__proto__:null,default:Rl},Symbol.toStringTag,{value:"Module"}));let G3=class extends Ma{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};I([O({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Rl}},json:{default:null,write:!0}})],G3.prototype,"outline",void 0),I([O({type:["simple-fill","picture-fill"],readOnly:!0})],G3.prototype,"type",void 0),G3=I([De("esri.symbols.FillSymbol")],G3);const dfe=G3;var AR;const sN=new mn({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Y1=AR=class extends dfe{constructor(...t){super(...t),this.color=new fi([0,0,0,.25]),this.outline=new Rl,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e&&(n.outline=e),i&&(n.color=i),n}clone(){return new AR({color:Ue(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};I([O()],Y1.prototype,"color",void 0),I([O()],Y1.prototype,"outline",void 0),I([si({esriSFS:"simple-fill"},{readOnly:!0})],Y1.prototype,"type",void 0),I([O({type:sN.apiValues,json:{read:sN.read,write:sN.write}})],Y1.prototype,"style",void 0),Y1=AR=I([De("esri.symbols.SimpleFillSymbol")],Y1);const xm=Y1,Smt=Object.freeze(Object.defineProperty({__proto__:null,default:xm},Symbol.toStringTag,{value:"Module"}));var kR;let j3=kR=class extends St{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new kR({minValue:this.minValue,maxValue:this.maxValue})}};I([O({type:Number,json:{write:!0}})],j3.prototype,"minValue",void 0),I([O({type:Number,json:{write:!0}})],j3.prototype,"maxValue",void 0),j3=kR=I([De("esri.renderers.support.AuthoringInfoClassBreakInfo")],j3);var DR;let Wg=DR=class extends St{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new DR({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Ue(this.classBreakInfos)})}};I([O({type:String,json:{write:!0}})],Wg.prototype,"field",void 0),I([O({type:String,json:{write:!0}})],Wg.prototype,"normalizationField",void 0),I([O({type:String,json:{write:!0}})],Wg.prototype,"label",void 0),I([O({type:[j3],json:{write:!0}})],Wg.prototype,"classBreakInfos",void 0),Wg=DR=I([De("esri.renderers.support.AuthoringInfoFieldInfo")],Wg);var NR;let cb=NR=class extends St{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new NR({label:this.label,value:this.value,size:this.size})}};I([O({type:String,json:{write:!0}})],cb.prototype,"label",void 0),I([O({type:Number,json:{write:!0}})],cb.prototype,"size",void 0),I([O({type:Number,json:{write:!0}})],cb.prototype,"value",void 0),cb=NR=I([De("esri.renderers.support.AuthoringInfoSizeStop")],cb);const JRe=cb;var OR;const R4=new mn({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),L4=new mn({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),KK={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},JK=["high-to-low","above-and-below","centered-on","extremes"],QK=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],eJ=["seconds","minutes","hours","days","months","years"],QRe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let Oo=OR=class extends St{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new OR({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:Ue(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};I([O({types:KK,json:{write:!0}})],Oo.prototype,"endTime",void 0),I([Es("endTime")],Oo.prototype,"castEndTime",null),I([O({type:String,json:{write:!0}})],Oo.prototype,"field",void 0),I([O({type:Number,json:{write:!0}})],Oo.prototype,"maxSliderValue",void 0),I([O({type:Number,json:{write:!0}})],Oo.prototype,"minSliderValue",void 0),I([O({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Oo.prototype,"normalizationField",null),I([O({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Oo.prototype,"referenceSizeScale",null),I([O({type:QRe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Oo.prototype,"referenceSizeSymbolStyle",null),I([O({types:KK,json:{write:!0}})],Oo.prototype,"startTime",void 0),I([Es("startTime")],Oo.prototype,"castStartTime",null),I([O({type:[JRe],json:{origins:{"web-scene":{write:!1}},write:!0}})],Oo.prototype,"sizeStops",null),I([O({type:R4.apiValues,value:null,json:{type:R4.jsonValues,read:R4.read,write:R4.write}})],Oo.prototype,"style",null),I([O({type:QK,value:null,json:{type:QK,origins:{"web-scene":{type:JK,write:{writer:(t,e)=>{JK.includes(t)&&(e.theme=t)}}}},write:!0}})],Oo.prototype,"theme",null),I([O({type:L4.apiValues,json:{type:L4.jsonValues,read:L4.read,write:L4.write}})],Oo.prototype,"type",void 0),I([O({type:eJ,json:{type:eJ,write:!0}})],Oo.prototype,"units",void 0),Oo=OR=I([De("esri.renderers.support.AuthoringInfoVisualVariable")],Oo);const eLe=Oo;let dI=class extends St{constructor(e){super(e),this.type=null}};I([O({readOnly:!0,json:{read:!1,write:!0}})],dI.prototype,"type",void 0),dI=I([De("esri.rest.support.ColorRamp")],dI);const MG=dI;var $R;let X1=$R=class extends MG{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new $R({fromColor:Ue(this.fromColor),toColor:Ue(this.toColor),algorithm:this.algorithm})}};I([si({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],X1.prototype,"algorithm",void 0),I([O({type:fi,json:{type:[Ss],write:!0}})],X1.prototype,"fromColor",void 0),I([O({type:fi,json:{type:[Ss],write:!0}})],X1.prototype,"toColor",void 0),I([O({type:["algorithmic"]})],X1.prototype,"type",void 0),X1=$R=I([De("esri.rest.support.AlgorithmicColorRamp")],X1);const AG=X1;var RR;let B3=RR=class extends MG{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new RR({colorRamps:Ue(this.colorRamps)})}};I([O({type:[AG],json:{write:!0}})],B3.prototype,"colorRamps",void 0),I([O({type:["multipart"]})],B3.prototype,"type",void 0),B3=RR=I([De("esri.rest.support.MultipartColorRamp")],B3);const ffe=B3,tLe={key:"type",base:MG,typeMap:{algorithmic:AG,multipart:ffe}};function iLe(t){return t!=null&&t.type?t.type==="algorithmic"?AG.fromJSON(t):t.type==="multipart"?ffe.fromJSON(t):null:null}var LR;const $1=new mn({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),F4=new mn({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),tJ=new mn({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),iJ=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],nLe=["high-to-low","above-and-below","above","below"],sLe=["flow-line","wave-front"],rLe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let yr=LR=class extends St{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?iLe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new LR({classificationMethod:this.classificationMethod,colorRamp:Ue(this.colorRamp),fadeRatio:Ue(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:Ue(this.field1),field2:Ue(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};I([O({type:$1.apiValues,value:null,json:{type:$1.jsonValues,read:$1.read,write:$1.write,origins:{"web-document":{default:"manual",type:$1.jsonValues,read:$1.read,write:$1.write}}}})],yr.prototype,"classificationMethod",null),I([O({types:tLe,json:{write:!0}})],yr.prototype,"colorRamp",void 0),I([Dt("colorRamp")],yr.prototype,"readColorRamp",null),I([O({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"fadeRatio",void 0),I([O({type:[String],value:null,json:{write:!0}})],yr.prototype,"fields",null),I([O({type:Wg,value:null,json:{write:!0}})],yr.prototype,"field1",null),I([O({type:Wg,value:null,json:{write:!0}})],yr.prototype,"field2",null),I([O({type:sLe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],yr.prototype,"flowTheme",null),I([O({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],yr.prototype,"focus",null),I([O({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],yr.prototype,"isAutoGenerated",void 0),I([O({type:Number,value:null,json:{type:Ss,write:!0}})],yr.prototype,"numClasses",null),I([O({type:iJ,json:{type:iJ,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],yr.prototype,"lengthUnit",void 0),I([O({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"maxSliderValue",void 0),I([O({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"minSliderValue",void 0),I([O({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"statistics",null),I([O({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],yr.prototype,"standardDeviationInterval",null),I([O({type:F4.apiValues,value:null,json:{type:F4.jsonValues,read:F4.read,write:F4.write,origins:{"web-scene":{type:tJ.jsonValues,write:{writer:tJ.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],yr.prototype,"type",null),I([O({type:[eLe],json:{write:!0}})],yr.prototype,"visualVariables",void 0),I([O({type:rLe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],yr.prototype,"univariateSymbolStyle",null),I([O({type:nLe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],yr.prototype,"univariateTheme",null),yr=LR=I([De("esri.renderers.support.AuthoringInfo")],yr);const kG=yr,rN=new mn({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let H3=class extends St{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};I([O({type:kG,json:{write:!0}})],H3.prototype,"authoringInfo",void 0),I([O({type:rN.apiValues,readOnly:!0,json:{type:rN.jsonValues,read:!1,write:{writer:rN.write,ignoreOrigin:!0}}})],H3.prototype,"type",void 0),H3=I([De("esri.renderers.Renderer")],H3);const wm=H3;function oLe(t){var e,i;return((i=(e=t.match(aLe))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const aLe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/,Un=t=>{let e=class extends t{clone(){var c;const i=Pl(this);Y4e(i,"unable to clone instance of non-accessor class");const n=i.metadata,s=i.store,r={},o=new Map;for(const f in n){const y=n[f],_=s==null?void 0:s.originOf(f),x=y.clonable;if(y.readOnly||x===!1||_!==Ui.USER&&_!==Ui.DEFAULTS&&_!==Ui.WEB_MAP&&_!==Ui.WEB_SCENE)continue;const S=this[f];let P=null;P=typeof x=="function"?x(S):x==="reference"?S:i$(S),S!=null&&P==null||(_===Ui.DEFAULTS?o.set(f,P):r[f]=P)}const l=new(Object.getPrototypeOf(this)).constructor(r);if(o.size){const f=(c=Pl(l))==null?void 0:c.store;if(f)for(const[y,_]of o)f.set(y,_,Ui.DEFAULTS)}return l}};return e=I([De("esri.core.Clonable")],e),e};let nJ=class extends Un(Ei){};nJ=I([De("esri.core.Clonable")],nJ);let U3=class extends Un(St){constructor(){super(...arguments),this.showLegend=null,this.title=null}};I([O({type:Boolean,json:{write:!0}})],U3.prototype,"showLegend",void 0),I([O({type:String,json:{write:!0}})],U3.prototype,"title",void 0),U3=I([De("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],U3);const pfe=U3,oN=new mn({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Ch=class extends St{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(qt.getLogger(this).error(".field: field must be a string value"),null):zC(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};I([O()],Ch.prototype,"index",void 0),I([O({type:oN.apiValues,readOnly:!0,json:{read:oN.read,write:oN.write}})],Ch.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],Ch.prototype,"field",void 0),I([Es("field")],Ch.prototype,"castField",null),I([O({type:String,json:{write:!0}})],Ch.prototype,"valueExpression",void 0),I([O({type:String,json:{write:!0}})],Ch.prototype,"valueExpressionTitle",void 0),I([O({readOnly:!0})],Ch.prototype,"arcadeRequired",null),I([O({type:pfe,json:{write:!0}})],Ch.prototype,"legendOptions",void 0),Ch=I([De("esri.renderers.visualVariables.VisualVariable")],Ch);const Dx=Ch;var FR;let W1=FR=class extends St{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new FR({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};I([O({type:fi,json:{type:[Ss],write:!0}})],W1.prototype,"color",void 0),I([O({type:String,json:{write:!0}})],W1.prototype,"label",void 0),I([O({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],W1.prototype,"value",void 0),I([zt("value")],W1.prototype,"writeValue",null),W1=FR=I([De("esri.renderers.visualVariables.support.ColorStop")],W1);const lLe=W1;var zR;let Z1=zR=class extends Dx{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new zR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};I([O({readOnly:!0})],Z1.prototype,"cache",null),I([O({type:["color"],json:{type:["colorInfo"]}})],Z1.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],Z1.prototype,"normalizationField",void 0),I([O({type:[lLe],json:{write:!0}})],Z1.prototype,"stops",null),Z1=zR=I([De("esri.renderers.visualVariables.ColorVariable")],Z1);const mfe=Z1;var qR;let Eg=qR=class extends St{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return I6(e.transparency)}writeOpacity(t,e,i){e[i]=_G(t)}clone(){return new qR({label:this.label,opacity:this.opacity,value:this.value})}};I([O({type:String,json:{write:!0}})],Eg.prototype,"label",void 0),I([O({type:Number,json:{type:Ss,write:{target:"transparency"}}})],Eg.prototype,"opacity",void 0),I([Dt("opacity",["transparency"])],Eg.prototype,"readOpacity",null),I([zt("opacity")],Eg.prototype,"writeOpacity",null),I([O({type:Number,json:{write:!0}})],Eg.prototype,"value",void 0),Eg=qR=I([De("esri.renderers.visualVariables.support.OpacityStop")],Eg);const cLe=Eg;var VR;let K1=VR=class extends Dx{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new VR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};I([O({readOnly:!0})],K1.prototype,"cache",null),I([O({type:["opacity"],json:{type:["transparencyInfo"]}})],K1.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],K1.prototype,"normalizationField",void 0),I([O({type:[cLe],json:{write:!0}})],K1.prototype,"stops",null),K1=VR=I([De("esri.renderers.visualVariables.OpacityVariable")],K1);const DG=K1;var GR;let J1=GR=class extends Dx{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new GR({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};I([O({readOnly:!0})],J1.prototype,"cache",null),I([O({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],J1.prototype,"axis",void 0),I([O({type:["rotation"],json:{type:["rotationInfo"]}})],J1.prototype,"type",void 0),I([O({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],J1.prototype,"rotationType",void 0),J1=GR=I([De("esri.renderers.visualVariables.RotationVariable")],J1);const gfe=J1;function uLe(t){return pn(t)}var jR;let Cg=jR=class extends St{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new jR({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};I([O({type:String,json:{write:!0}})],Cg.prototype,"label",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],Cg.prototype,"size",void 0),I([O({type:Number,json:{write:!0}})],Cg.prototype,"value",void 0),I([O({type:Boolean,json:{write:!1}})],Cg.prototype,"useMinValue",void 0),I([O({type:Boolean,json:{write:!1}})],Cg.prototype,"useMaxValue",void 0),Cg=jR=I([De("esri.renderers.visualVariables.support.SizeStop")],Cg);const fI=Cg;let pI=class extends pfe{constructor(){super(...arguments),this.customValues=null}};I([O({type:[Number],json:{write:!0}})],pI.prototype,"customValues",void 0),pI=I([De("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],pI);const hLe=pI;var Qp,wo;function Hb(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function LE(t){return t!=null&&!isNaN(t)&&isFinite(t)}function yfe(t){return t.valueExpression?Qp.Expression:t.field&&typeof t.field=="string"?Qp.Field:Qp.Unknown}function dLe(t,e){const i=e||yfe(t),n=t.valueUnit||"unknown";return i===Qp.Unknown?wo.Constant:t.stops?wo.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?wo.ClampedLinear:n==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?wo.Proportional:wo.Additive:wo.Identity:wo.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(Qp||(Qp={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(wo||(wo={}));let mI=class extends St{constructor(e){super(e),this.type=null}};I([O({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],mI.prototype,"type",void 0),mI=I([De("esri.popup.content.Content")],mI);const Sm=mI;var BR;let Q1=BR=class extends Sm{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new BR({description:this.description,displayType:this.displayType,title:this.title})}};I([O({type:String,json:{write:!0}})],Q1.prototype,"description",void 0),I([O({type:["auto","preview","list"],json:{write:!0}})],Q1.prototype,"displayType",void 0),I([O({type:String,json:{write:!0}})],Q1.prototype,"title",void 0),I([O({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Q1.prototype,"type",void 0),Q1=BR=I([De("esri.popup.content.AttachmentsContent")],Q1);const Y2=Q1;var HR;let ey=HR=class extends Sm{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new HR({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Ue(this.outFields):null})}};I([O()],ey.prototype,"creator",void 0),I([O()],ey.prototype,"destroyer",void 0),I([O()],ey.prototype,"outFields",void 0),I([O({type:["custom"],readOnly:!0})],ey.prototype,"type",void 0),ey=HR=I([De("esri.popup.content.CustomContent")],ey);const fLe=ey;var UR;let ub=UR=class extends St{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new UR({title:this.title,expression:this.expression})}};I([O({type:String,json:{write:!0}})],ub.prototype,"title",void 0),I([O({type:String,json:{write:!0}})],ub.prototype,"expression",void 0),I([O({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],ub.prototype,"returnType",void 0),ub=UR=I([De("esri.popup.ElementExpressionInfo")],ub);const pLe=ub;var YR;let Y3=YR=class extends Sm{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new YR({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};I([O({type:pLe,json:{write:!0}})],Y3.prototype,"expressionInfo",void 0),I([O({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Y3.prototype,"type",void 0),Y3=YR=I([De("esri.popup.content.ExpressionContent")],Y3);const PA=Y3;let hb=class extends Un(St){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};I([si(r7e)],hb.prototype,"dateFormat",void 0),I([O({type:Boolean,json:{write:!0}})],hb.prototype,"digitSeparator",void 0),I([O({type:Ss,json:{write:!0}})],hb.prototype,"places",void 0),hb=I([De("esri.popup.support.FieldInfoFormat")],hb);const gI=hb;var XR;let Ph=XR=class extends St{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new XR({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};I([O({type:String,json:{write:!0}})],Ph.prototype,"fieldName",void 0),I([O({type:gI,json:{write:!0}})],Ph.prototype,"format",void 0),I([O({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Ph.prototype,"isEditable",void 0),I([O({type:String,json:{write:!0}})],Ph.prototype,"label",void 0),I([si(new mn({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Ph.prototype,"stringFieldOption",void 0),I([O({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Ph.prototype,"statisticType",void 0),I([O({type:String,json:{write:!0}})],Ph.prototype,"tooltip",void 0),I([O({type:Boolean,json:{write:!0}})],Ph.prototype,"visible",void 0),Ph=XR=I([De("esri.popup.FieldInfo")],Ph);const NG=Ph;var WR;let mp=WR=class extends Sm{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new WR(Ue({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};I([O({type:Object,json:{write:!0}})],mp.prototype,"attributes",void 0),I([O({type:String,json:{write:!0}})],mp.prototype,"description",void 0),I([O({type:[NG]})],mp.prototype,"fieldInfos",void 0),I([zt("fieldInfos")],mp.prototype,"writeFieldInfos",null),I([O({type:String,json:{write:!0}})],mp.prototype,"title",void 0),I([O({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],mp.prototype,"type",void 0),mp=WR=I([De("esri.popup.content.FieldsContent")],mp);const X2=mp;let ty=class extends St{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};I([O({type:String,json:{write:!0}})],ty.prototype,"altText",void 0),I([O({type:String,json:{write:!0}})],ty.prototype,"caption",void 0),I([O({type:String,json:{write:!0}})],ty.prototype,"title",void 0),I([O({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],ty.prototype,"type",void 0),ty=I([De("esri.popup.content.mixins.MediaInfo")],ty);const OG=ty;var ZR;let iy=ZR=class extends Ei{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new ZR({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};I([O()],iy.prototype,"color",void 0),I([O()],iy.prototype,"fieldName",void 0),I([O()],iy.prototype,"tooltip",void 0),I([O()],iy.prototype,"value",void 0),iy=ZR=I([De("esri.popup.content.support.ChartMediaInfoValueSeries")],iy);const mLe=iy;var KR;let Pg=KR=class extends St{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new KR({colors:Ue(this.colors),fields:Ue(this.fields),normalizeField:this.normalizeField,series:Ue(this.series),tooltipField:this.tooltipField})}};I([O({type:[fi],json:{type:[[Ss]],write:!0}})],Pg.prototype,"colors",void 0),I([O({type:[String],json:{write:!0}})],Pg.prototype,"fields",void 0),I([O({type:String,json:{write:!0}})],Pg.prototype,"normalizeField",void 0),I([O({type:[mLe],json:{read:!1}})],Pg.prototype,"series",void 0),I([O({type:String,json:{write:!0}})],Pg.prototype,"tooltipField",void 0),Pg=KR=I([De("esri.popup.content.support.ChartMediaInfoValue")],Pg);const gLe=Pg;let X3=class extends OG{constructor(e){super(e),this.type=null,this.value=void 0}};I([O({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],X3.prototype,"type",void 0),I([O({type:gLe,json:{write:!0}})],X3.prototype,"value",void 0),X3=I([De("esri.popup.content.mixins.ChartMediaInfo")],X3);const TA=X3,IA=Ta()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var JR;let yI=JR=class extends TA{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new JR({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([O({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:IA.write}})],yI.prototype,"type",void 0),yI=JR=I([De("esri.popup.content.BarChartMediaInfo")],yI);const vfe=yI;var QR;let vI=QR=class extends TA{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new QR({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([O({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:IA.write}})],vI.prototype,"type",void 0),vI=QR=I([De("esri.popup.content.ColumnChartMediaInfo")],vI);const _fe=vI;var eL;let W3=eL=class extends St{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new eL({linkURL:this.linkURL,sourceURL:this.sourceURL})}};I([O({type:String,json:{write:!0}})],W3.prototype,"linkURL",void 0),I([O({type:String,json:{write:!0}})],W3.prototype,"sourceURL",void 0),W3=eL=I([De("esri.popup.content.support.ImageMediaInfoValue")],W3);const yLe=W3;var tL;let db=tL=class extends OG{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new tL({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};I([O({type:Number,json:{write:!0}})],db.prototype,"refreshInterval",void 0),I([O({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],db.prototype,"type",void 0),I([O({type:yLe,json:{write:!0}})],db.prototype,"value",void 0),db=tL=I([De("esri.popup.content.ImageMediaInfo")],db);const bfe=db;var iL;let _I=iL=class extends TA{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new iL({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([O({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:IA.write}})],_I.prototype,"type",void 0),_I=iL=I([De("esri.popup.content.LineChartMediaInfo")],_I);const xfe=_I;var nL;let bI=nL=class extends TA{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new nL({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([O({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:IA.write}})],bI.prototype,"type",void 0),bI=nL=I([De("esri.popup.content.PieChartMediaInfo")],bI);const wfe=bI,sL={base:OG,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":vfe,"column-chart":_fe,"line-chart":xfe,"pie-chart":wfe,image:bfe}};var rL;let Th=rL=class extends Sm{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?bfe.fromJSON(e):e.type==="barchart"?vfe.fromJSON(e):e.type==="columnchart"?_fe.fromJSON(e):e.type==="linechart"?xfe.fromJSON(e):e.type==="piechart"?wfe.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new rL(Ue({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};I([O()],Th.prototype,"activeMediaInfoIndex",void 0),I([O({type:Object,json:{write:!0}})],Th.prototype,"attributes",void 0),I([O({type:String,json:{write:!0}})],Th.prototype,"description",void 0),I([O({types:[sL]})],Th.prototype,"mediaInfos",void 0),I([Dt("mediaInfos")],Th.prototype,"readMediaInfos",null),I([zt("mediaInfos")],Th.prototype,"writeMediaInfos",null),I([O({type:String,json:{write:!0}})],Th.prototype,"title",void 0),I([O({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Th.prototype,"type",void 0),Th=rL=I([De("esri.popup.content.MediaContent")],Th);const FE=Th;var oL;let Z3=oL=class extends St{constructor(t){super(t),this.field=null,this.order=null}clone(){return new oL({field:this.field,order:this.order})}};I([O({type:String,json:{write:!0}})],Z3.prototype,"field",void 0),I([O({type:["asc","desc"],json:{write:!0}})],Z3.prototype,"order",void 0),Z3=oL=I([De("esri.popup.support.RelatedRecordsInfoFieldOrder")],Z3);const $G=Z3;let zd=class extends Un(Sm){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};I([O({type:String,json:{write:!0}})],zd.prototype,"description",void 0),I([O({type:Number,json:{type:Ss,write:!0}})],zd.prototype,"displayCount",void 0),I([O({type:["list"],json:{write:!0}})],zd.prototype,"displayType",void 0),I([O({type:[$G],json:{write:!0}})],zd.prototype,"orderByFields",void 0),I([O({type:Number,json:{type:Ss,write:!0}})],zd.prototype,"relationshipId",void 0),I([O({type:String,json:{write:!0}})],zd.prototype,"title",void 0),I([O({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],zd.prototype,"type",void 0),zd=I([De("esri.popup.content.RelationshipContent")],zd);const zE=zd;var aL;let K3=aL=class extends Sm{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new aL({text:this.text})}};I([O({type:String,json:{write:!0}})],K3.prototype,"text",void 0),I([O({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],K3.prototype,"type",void 0),K3=aL=I([De("esri.popup.content.TextContent")],K3);const qE=K3;let qd=class extends Un(St){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};I([O({type:String,json:{write:!0}})],qd.prototype,"title",void 0),I([O({type:String,json:{write:!0}})],qd.prototype,"description",void 0),I([O({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],qd.prototype,"type",void 0),I([O({type:Boolean,json:{read:!1}})],qd.prototype,"open",void 0),I([O({type:Number,json:{type:Ss,write:!0}})],qd.prototype,"associatedNetworkSourceId",void 0),I([O({type:Number,json:{type:Ss,write:!0}})],qd.prototype,"associatedAssetGroup",void 0),I([O({type:Number,json:{type:Ss,write:!0}})],qd.prototype,"associatedAssetType",void 0),qd=I([De("esri.popup.support.UtilityNetworkAssociationType")],qd);const vLe=qd;let ny=class extends Un(Sm){constructor(e){super(e),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};I([O({type:String,json:{write:!0}})],ny.prototype,"description",void 0),I([O({type:String,json:{write:!0}})],ny.prototype,"title",void 0),I([O({type:[vLe],json:{write:!0}})],ny.prototype,"associationTypes",void 0),I([si({utilityNetworkAssociations:"utility-network-associations"})],ny.prototype,"type",void 0),ny=I([De("esri.popup.content.UtilityNetworkAssociationsContent")],ny);const RG=ny,_Le={base:null,key:"type",typeMap:{attachment:Y2,media:FE,text:qE,expression:PA,field:X2,relationship:zE,utilityNetworkAssociations:RG}},bLe={base:null,key:"type",typeMap:{attachment:Y2,media:FE,text:qE,expression:PA,field:X2,relationship:zE}};var lL;let sy=lL=class extends St{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new lL({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};I([O({type:String,json:{write:!0}})],sy.prototype,"name",void 0),I([O({type:String,json:{write:!0}})],sy.prototype,"title",void 0),I([O({type:String,json:{write:!0}})],sy.prototype,"expression",void 0),I([O({type:["string","number"],json:{write:!0}})],sy.prototype,"returnType",void 0),sy=lL=I([De("esri.popup.ExpressionInfo")],sy);const xLe=sy;var cL;let J3=cL=class extends St{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new cL({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};I([O({type:Boolean,json:{write:!0}})],J3.prototype,"returnTopmostRaster",void 0),I([O({type:Boolean,json:{write:!0}})],J3.prototype,"showNoDataRecords",void 0),J3=cL=I([De("esri.popup.LayerOptions")],J3);const wLe=J3;var uL;let Q3=uL=class extends St{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new uL({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Ue(this.orderByFields):null})}};I([O({type:Boolean,json:{write:!0}})],Q3.prototype,"showRelatedRecords",void 0),I([O({type:[$G],json:{write:!0}})],Q3.prototype,"orderByFields",void 0),Q3=uL=I([De("esri.popup.RelatedRecordsInfo")],Q3);const sJ=Q3;var hL;let bu=hL=class extends ZC(Ei){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new hL({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};I([O()],bu.prototype,"active",void 0),I([O()],bu.prototype,"className",void 0),I([O()],bu.prototype,"disabled",void 0),I([O()],bu.prototype,"icon",void 0),I([O()],bu.prototype,"id",void 0),I([O()],bu.prototype,"indicator",void 0),I([O()],bu.prototype,"title",void 0),I([O()],bu.prototype,"type",void 0),I([O()],bu.prototype,"visible",void 0),bu=hL=I([De("esri.support.actions.ActionBase")],bu);const n5=bu;var dL;let xI=dL=class extends n5{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new dL({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};I([O()],xI.prototype,"image",void 0),xI=dL=I([De("esri.support.actions.ActionButton")],xI);const Sfe=xI;var fL;let eS=fL=class extends n5{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new fL({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};I([O()],eS.prototype,"image",void 0),I([O()],eS.prototype,"value",void 0),eS=fL=I([De("esri.support.actions.ActionToggle")],eS);const Efe=eS,o3="relationships/",rJ="expression/",SLe=ci.ofType({key:"type",defaultKeyValue:"button",base:n5,typeMap:{button:Sfe,toggle:Efe}}),ELe={base:Sm,key:"type",typeMap:{media:FE,custom:fLe,text:qE,attachments:Y2,fields:X2,expression:PA,relationship:zE,utilityNetworkAssociations:RG}},Cfe=new Set(["attachments","fields","media","text","expression","relationship"]),CLe=new Set([...Cfe,"utility-network-associations"]);let no=class extends Un(St){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Ku(ELe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||zv(e)?e:(qt.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:n}=i;return Array.isArray(n)&&n.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,n):this._readPopupInfo(i)}writeWebSceneContent(e,i,n,s){this._writePopupTemplateContent(e,i,s)}writeWebMapContent(e,i,n,s){this._writePopupTemplateContent(e,i,s)}writeFieldInfos(e,i,n,s){const{content:r}=this,o=Array.isArray(r)?r:null;if(e){const l=o?o.filter(f=>f.type==="fields"):[],c=l.length&&l.every(f=>{var y;return(y=f.fieldInfos)==null?void 0:y.length});i.fieldInfos=e.filter(Boolean).map(f=>{const y=f.toJSON(s);return c&&(y.visible=!1),y})}if(o)for(const l of o)l.type==="fields"&&this._writeFieldsContent(l,i)}writeLayerOptions(e,i,n,s){i[n]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...n,...this._getContentExpressionInfos(this.content,n)]),_v(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,n){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(s=>(n==null?void 0:n.origin)==="web-scene"?Cfe.has(s.type):CLe.has(s.type)).map(s=>s==null?void 0:s.toJSON(n)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const n=Ue(e.fieldInfos);Array.isArray(i.fieldInfos)?n.forEach(s=>{const r=i.fieldInfos.find(o=>{var l,c;return((l=o.fieldName)==null?void 0:l.toLowerCase())===((c=s.fieldName)==null?void 0:c.toLowerCase())});r?r.visible=!0:i.fieldInfos.push(s)}):i.fieldInfos=n}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var r,o;const n=((r=e.orderByFields)==null?void 0:r.map(l=>this._toFieldOrderJSON(l,e.relationshipId)))||[],s=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...n];i.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const n=Ue(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...n]:i.mediaInfos=n}_readPopupInfoElements(e,i,n){const s={description:!1,mediaInfos:!1};return n.map(r=>r.type==="media"?(r.mediaInfos||!i||s.mediaInfos||(r.mediaInfos=i,s.mediaInfos=!0),FE.fromJSON(r)):r.type==="text"?(r.text||!e||s.description||(r.text=e,s.description=!0),qE.fromJSON(r)):r.type==="attachments"?Y2.fromJSON(r):r.type==="fields"?X2.fromJSON(r):r.type==="expression"?PA.fromJSON(r):r.type==="relationship"?zE.fromJSON(r):r.type==="utilityNetworkAssociations"?RG.fromJSON(r):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:n}=e;if(!(i!=null&&i.startsWith(o3)))return null;const s=i.replace(o3,"").split("/");if(s.length!==2)return null;const r=parseInt(s[0],10),o=s[1];return typeof r=="number"&&o?zE.fromJSON({relationshipId:r,orderByFields:[{field:o,order:n}]}):null}_toFieldOrderJSON(e,i){const{order:n,field:s}=e;return{field:`${o3}${i}/${s}`,order:n}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:n,relatedRecordsInfo:s={showRelatedRecords:!1}}){const r=[];e?r.push(new qE({text:e})):r.push(new X2),Array.isArray(i)&&i.length&&r.push(FE.fromJSON({mediaInfos:i})),n&&r.push(Y2.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:l}=s;return o&&(l!=null&&l.length)&&l.forEach(c=>{const f=this._toRelationshipContent(c);f&&r.push(f)}),r.length?r:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const n=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...n.reduce((s,r)=>[...s,...this._getMediaInfoFields(r)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:n,value:s}=e,r=s||{},{fields:o,normalizeField:l,tooltipField:c,sourceURL:f,linkURL:y}=r,_=[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(f),...this._extractFieldNames(y),...o??[]];return l&&_.push(l),c&&_.push(c),_}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((n,s)=>[...n,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,n)=>[...i,...this._getContentElementFields(n)],[]):[]}async _collectExpressionInfoFields(e,i,n){n&&await Promise.all(n.map(s=>nl(e,i,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:n})=>!(n!==void 0&&!n||!i||i.startsWith(o3)||i.startsWith(rJ))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,n)=>[...i,...this._getActionFields(n)],[]):[]}_getActionFields(e){const{className:i,title:n,type:s}=e,r=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(r)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Nde(e).filter(i=>!(i.indexOf(o3)===0||i.indexOf(rJ)===0))}};I([O({type:SLe})],no.prototype,"actions",void 0),I([O()],no.prototype,"content",void 0),I([Es("content")],no.prototype,"castContent",null),I([Dt("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],no.prototype,"readContent",null),I([zt("web-scene","content",{popupElements:{type:ci.ofType(bLe)},showAttachments:{type:Boolean},mediaInfos:{type:ci.ofType(sL)},description:{type:String},relatedRecordsInfo:{type:sJ}})],no.prototype,"writeWebSceneContent",null),I([zt("content",{popupElements:{type:ci.ofType(_Le)},showAttachments:{type:Boolean},mediaInfos:{type:ci.ofType(sL)},description:{type:String},relatedRecordsInfo:{type:sJ}})],no.prototype,"writeWebMapContent",null),I([O({type:[xLe],json:{write:!0}})],no.prototype,"expressionInfos",void 0),I([O({type:[NG]})],no.prototype,"fieldInfos",void 0),I([zt("fieldInfos")],no.prototype,"writeFieldInfos",null),I([O({type:wLe})],no.prototype,"layerOptions",void 0),I([zt("layerOptions")],no.prototype,"writeLayerOptions",null),I([O({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],no.prototype,"lastEditInfoEnabled",void 0),I([O()],no.prototype,"outFields",void 0),I([O()],no.prototype,"overwriteActions",void 0),I([O()],no.prototype,"returnGeometry",void 0),I([O({json:{type:String}})],no.prototype,"title",void 0),I([zt("title")],no.prototype,"writeTitle",null),no=I([De("esri.PopupTemplate")],no);const s5=no;var pL;let Tg=pL=class extends Ma{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const s=n.map(r=>{const o=r.valueExpressionInfo;return o?nl(t,e,o.expression):null});await Promise.all(s)}}}clone(){return new pL({data:Ue(this.data)})}hash(){return vae(JSON.stringify(this.data)).toString()}};I([O({json:{write:!1}})],Tg.prototype,"color",void 0),I([O({json:{write:!0}})],Tg.prototype,"data",void 0),I([Dt("data",["symbol"])],Tg.prototype,"readData",null),I([zt("data",{})],Tg.prototype,"writeData",null),I([si({CIMSymbolReference:"cim"},{readOnly:!0})],Tg.prototype,"type",void 0),Tg=pL=I([De("esri.symbols.CIMSymbol")],Tg);const W0=Tg;let fb=class extends St{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,n){e||(i[n]=e)}};I([O({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],fb.prototype,"enabled",void 0),I([zt("enabled")],fb.prototype,"writeEnabled",null),I([O({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],fb.prototype,"type",void 0),fb=I([De("esri.symbols.Symbol3DLayer")],fb);const Lf=fb;function PLe(t,e){const i=e.transparency!=null?I6(e.transparency):1,n=e.color;return n&&Array.isArray(n)?new fi([n[0]||0,n[1]||0,n[2]||0,i]):null}function TLe(t,e){e.color=t.toJSON().slice(0,3);const i=_G(t.a);i!==0&&(e.transparency=i)}const Z0={type:fi,json:{type:[Ss],default:null,read:{source:["color","transparency"],reader:PLe},write:{target:{color:{type:[Ss]},transparency:{type:Ss}},writer:TLe}}},Cf={type:Number,cast:pn,json:{write:!0}};let ry=class extends St{constructor(e){super(e),this.color=new fi([0,0,0,1]),this.extensionLength=0,this.size=eh(1)}clone(){}cloneProperties(){return{color:Ue(this.color),size:this.size,extensionLength:this.extensionLength}}};I([O({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ry.prototype,"type",void 0),I([O(Z0)],ry.prototype,"color",void 0),I([O({...Cf,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],ry.prototype,"extensionLength",void 0),I([O(Cf)],ry.prototype,"size",void 0),ry=I([De("esri.symbols.edges.Edges3D")],ry);const LG=ry;var mL;let wI=mL=class extends LG{constructor(t){super(t),this.type="sketch"}clone(){return new mL(this.cloneProperties())}};I([si({sketch:"sketch"},{readOnly:!0})],wI.prototype,"type",void 0),wI=mL=I([De("esri.symbols.edges.SketchEdges3D")],wI);const ILe=wI;var gL;let SI=gL=class extends LG{constructor(t){super(t),this.type="solid"}clone(){return new gL(this.cloneProperties())}};I([si({solid:"solid"},{readOnly:!0})],SI.prototype,"type",void 0),SI=gL=I([De("esri.symbols.edges.SolidEdges3D")],SI);const Pfe=SI,Tfe={types:{key:"type",base:LG,typeMap:{solid:Pfe,sketch:ILe}},json:{write:!0}};var yL;let $c=yL=class extends St{constructor(t){super(t),this.color=null,this.emissiveFactor=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?cc(this.emissiveFactor):null};return new yL(t)}};I([O(Z0)],$c.prototype,"color",void 0),I([O({type:[Number],json:{write:!1}})],$c.prototype,"emissiveFactor",void 0),$c=yL=I([De("esri.symbols.support.Symbol3DMaterial")],$c);var vL;let Ig=vL=class extends Lf{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var t,e;return new vL({edges:(t=this.edges)==null?void 0:t.clone(),enabled:this.enabled,material:(e=this.material)==null?void 0:e.clone(),castShadows:this.castShadows,size:this.size})}};I([si({Extrude:"extrude"},{readOnly:!0})],Ig.prototype,"type",void 0),I([O({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ig.prototype,"size",void 0),I([O({type:$c,json:{write:!0}})],Ig.prototype,"material",void 0),I([O({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ig.prototype,"castShadows",void 0),I([O(Tfe)],Ig.prototype,"edges",void 0),Ig=vL=I([De("esri.symbols.ExtrudeSymbol3DLayer")],Ig);const Ife=Ig;let EI=class extends St{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};I([O({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],EI.prototype,"type",void 0),EI=I([De("esri.symbols.patterns.LinePattern3D")],EI);const Mfe=EI,MLe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var _L;const ALe=Ta()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let tS=_L=class extends Mfe{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new _L(t)}};I([O({type:["style"]})],tS.prototype,"type",void 0),I([si(ALe),O({type:MLe})],tS.prototype,"style",void 0),tS=_L=I([De("esri.symbols.patterns.LineStylePattern3D")],tS);const FG=tS;let CI=class extends St{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};I([O({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],CI.prototype,"type",void 0),CI=I([De("esri.symbols.patterns.Pattern3D")],CI);const Afe=CI,kLe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var bL;let iS=bL=class extends Afe{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new bL({style:this.style})}};I([O({type:["style"]})],iS.prototype,"type",void 0),I([O({type:kLe,json:{read:!0,write:!0}})],iS.prototype,"style",void 0),iS=bL=I([De("esri.symbols.patterns.StylePattern3D")],iS);const kfe=iS,DLe={types:{key:"type",base:Afe,typeMap:{style:kfe}},json:{write:!0}},Dfe={types:{key:"type",base:Mfe,typeMap:{style:FG}},json:{write:!0}},QS=new fi("white");new fi("black");const NLe=new fi([255,255,255,0]);function OLe(t){return t.r===0&&t.g===0&&t.b===0}var xL;let eE=xL=class extends $c{constructor(t){super(t),this.colorMixMode=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?cc(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new xL(t)}};I([si({multiply:"multiply",replace:"replace",tint:"tint"})],eE.prototype,"colorMixMode",void 0),eE=xL=I([De("esri.symbols.support.Symbol3DFillMaterial")],eE);function $Le(t,e=!1){return t<=uae?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function Gmt(t){return(cae(t)?t.length:t.byteLength/8)<=uae?Array.from(t):new Float64Array(t)}function jmt(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function r5(t=zLe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function zG(t,e,i,n,s,r,o=r5()){return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=s,o[5]=r,o}function Bmt(t,e=r5()){return RLe(t,0,t.length/3,e)}function RLe(t,e,i,n=r5()){return Nfe(n,wL),LLe(n,t,e,i),n}function Hmt(t,e=$Le(24)){const[i,n,s,r,o,l]=t;return e[0]=i,e[1]=n,e[2]=s,e[3]=i,e[4]=n,e[5]=l,e[6]=i,e[7]=o,e[8]=s,e[9]=i,e[10]=o,e[11]=l,e[12]=r,e[13]=n,e[14]=s,e[15]=r,e[16]=n,e[17]=l,e[18]=r,e[19]=o,e[20]=s,e[21]=r,e[22]=o,e[23]=l,e}function Umt(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new dr(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Ymt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Xmt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function Wmt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function LLe(t,e,i=0,n=e.length/3){let s=t[0],r=t[1],o=t[2],l=t[3],c=t[4],f=t[5];for(let y=0;y<n;y++)s=Math.min(s,e[i+3*y]),r=Math.min(r,e[i+3*y+1]),o=Math.min(o,e[i+3*y+2]),l=Math.max(l,e[i+3*y]),c=Math.max(c,e[i+3*y+1]),f=Math.max(f,e[i+3*y+2]);t[0]=s,t[1]=r,t[2]=o,t[3]=l,t[4]=c,t[5]=f}function Zmt(t,e,i){const n=e.length;let s=t[0],r=t[1],o=t[2],l=t[3],c=t[4],f=t[5];if(i)for(let y=0;y<n;y++){const _=e[y];s=Math.min(s,_[0]),r=Math.min(r,_[1]),o=Math.min(o,_[2]),l=Math.max(l,_[0]),c=Math.max(c,_[1]),f=Math.max(f,_[2])}else for(let y=0;y<n;y++){const _=e[y];s=Math.min(s,_[0]),r=Math.min(r,_[1]),l=Math.max(l,_[0]),c=Math.max(c,_[1])}t[0]=s,t[1]=r,t[2]=o,t[3]=l,t[4]=c,t[5]=f}function Kmt(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function o5(t){return t[0]>=t[3]?0:t[3]-t[0]}function a5(t){return t[1]>=t[4]?0:t[4]-t[1]}function l5(t){return t[2]>=t[5]?0:t[5]-t[2]}function Jmt(t){const e=o5(t),i=l5(t),n=a5(t);return Math.sqrt(e*e+i*i+n*n)}function Qmt(t,e=[0,0,0]){return e[0]=t[0]+o5(t)/2,e[1]=t[1]+a5(t)/2,e[2]=t[2]+l5(t)/2,e}function egt(t,e=[0,0,0]){return e[0]=o5(t),e[1]=a5(t),e[2]=l5(t),e}function tgt(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function FLe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function igt(t,e){return e==null||FLe(t,e)}function ngt(t,e,i,n,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+n,s[3]=t[3]+e,s[4]=t[4]+i,s[5]=t[5]+n,s}function sgt(t,e,i=t){const n=t[0]+o5(t)/2,s=t[1]+a5(t)/2,r=t[2]+l5(t)/2;return i[0]=n+(t[0]-n)*e,i[1]=s+(t[1]-s)*e,i[2]=r+(t[2]-r)*e,i[3]=n+(t[3]-n)*e,i[4]=s+(t[4]-s)*e,i[5]=r+(t[5]-r)*e,i}function rgt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ogt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function agt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function Nfe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function lgt(t){return t?Nfe(t,wL):r5(wL)}function cgt(t,e){return e||(e=Uv()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function ugt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function hgt(t,e,i,n,s){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=n,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function oJ(t){return t.length===6}function dgt(t){return o5(t)===0&&a5(t)===0&&l5(t)===0}function fgt(t,e,i){if(t==null||e==null)return t===e;if(!oJ(t)||!oJ(e))return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const wL=[1/0,1/0,1/0,-1/0,-1/0,-1/0],zLe=[0,0,0,0,0,0];r5();function pgt(t,{isPrimitive:e,width:i,depth:n,height:s}){const r=e?10:1;if(i==null&&s==null&&n==null)return[r*t[0],r*t[1],r*t[2]];const o=Sl(i,n,s);let l;for(let c=0;c<3;c++){const f=o[c];if(f!=null){l=f/t[c];break}}for(let c=0;c<3;c++)o[c]==null&&(o[c]=t[c]*l);return o}const qLe=zG(-.5,-.5,-.5,.5,.5,.5),VLe=zG(-.5,-.5,0,.5,.5,1),GLe=zG(-.5,-.5,0,.5,.5,.5);function mgt(t){switch(t){case"sphere":case"cube":case"diamond":return qLe;case"cylinder":case"cone":case"inverted-cone":return VLe;case"tetrahedron":return GLe;default:return}}const qG=["butt","square","round"],jLe=[...qG,"none"],Ofe=["miter","bevel","round"];var SL;let oy=SL=class extends St{constructor(t){super(t),this.color=new fi([0,0,0,1]),this.size=eh(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new SL(t)}};I([O(Z0)],oy.prototype,"color",void 0),I([O(Cf)],oy.prototype,"size",void 0),I([O(Dfe)],oy.prototype,"pattern",void 0),I([O({type:qG,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],oy.prototype,"patternCap",void 0),oy=SL=I([De("esri.symbols.support.Symbol3DOutline")],oy);var PI;let gp=PI=class extends Lf{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new PI(t)}static fromSimpleFillSymbol(t){var n,s,r;const e=t.outline&&t.outline.style&&t.outline.style!=="solid"?new FG({style:t.outline.style}):null,i={size:((n=t.outline)==null?void 0:n.width)??0,color:(((s=t.outline)==null?void 0:s.color)??QS).clone(),pattern:e};return e&&((r=t.outline)!=null&&r.cap)&&(i.patternCap=t.outline.cap),new PI({material:new eE({color:(t.color??NLe).clone()}),pattern:t.style&&t.style!=="solid"?new kfe({style:t.style}):null,outline:i})}};I([si({Fill:"fill"},{readOnly:!0})],gp.prototype,"type",void 0),I([O({type:eE,json:{write:!0}})],gp.prototype,"material",void 0),I([O(DLe)],gp.prototype,"pattern",void 0),I([O({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],gp.prototype,"castShadows",void 0),I([O({type:oy,json:{write:!0}})],gp.prototype,"outline",void 0),I([O(Tfe)],gp.prototype,"edges",void 0),gp=PI=I([De("esri.symbols.FillSymbol3DLayer")],gp);const K0=gp,BLe=["none","underline","line-through"],HLe=["normal","italic","oblique"],ULe=["normal","lighter","bold","bolder"],$fe={type:Number,cast:t=>{const e=yx(t);return e===0?1:Qu(e,.1,4)},nonNullable:!0},YLe=["left","right","center"],XLe=["baseline","top","middle","bottom"],Rfe={type:YLe,nonNullable:!0},Lfe={type:XLe,nonNullable:!0},ggt=8;var EL;let yp=EL=class extends St{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return pn(t)}clone(){return new EL({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};I([O({type:BLe,json:{default:"none",write:!0}})],yp.prototype,"decoration",void 0),I([O({type:String,json:{write:!0}})],yp.prototype,"family",void 0),I([O({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],yp.prototype,"size",void 0),I([Es("size")],yp.prototype,"castSize",null),I([O({type:HLe,json:{default:"normal",write:!0}})],yp.prototype,"style",void 0),I([O({type:ULe,json:{default:"normal",write:!0}})],yp.prototype,"weight",void 0),yp=EL=I([De("esri.symbols.Font")],yp);const MA=yp;var CL;const WLe=Ta()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let ay=CL=class extends St{constructor(t){super(t)}readHref(t,e,i){return t?Mx(t,i):e.dataURI}writeHref(t,e,i,n){t&&(Vv(t)?e.dataURI=t:(e.href=QC(t,n),Fc(e.href)&&(e.href=Hu(e.href))))}clone(){return new CL({href:this.href,primitive:this.primitive})}};I([O({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],ay.prototype,"href",void 0),I([Dt("href")],ay.prototype,"readHref",null),I([zt("href",{href:{type:String},dataURI:{type:String}})],ay.prototype,"writeHref",null),I([si(WLe)],ay.prototype,"primitive",void 0),ay=CL=I([De("esri.symbols.support.IconSymbol3DLayerResource")],ay);const ygt="circle";var PL;let Ub=PL=class extends Ei{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new PL({x:this.x,y:this.y})}};I([O({type:Number})],Ub.prototype,"x",void 0),I([O({type:Number})],Ub.prototype,"y",void 0),Ub=PL=I([De("esri.symbols.support.Symbol3DAnchorPosition2D")],Ub);var TL;let nS=TL=class extends St{constructor(t){super(t),this.color=new fi([0,0,0,1]),this.size=eh(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new TL(t)}};I([O(Z0)],nS.prototype,"color",void 0),I([O(Cf)],nS.prototype,"size",void 0),nS=TL=I([De("esri.symbols.support.Symbol3DIconOutline")],nS);var pb;const Ffe="esri.symbols.IconSymbol3DLayer";let Ih=pb=class extends Lf{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new pb({anchor:this.anchor,anchorPosition:Ue(this.anchorPosition),enabled:this.enabled,material:Ue(this.material),outline:Ue(this.outline),resource:Ue(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||QS,i=aJ(t),n=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||QS).clone()}:null;return new pb({size:t.size,angle:t.angle,resource:{primitive:KLe(t.style)},material:{color:e},outline:n,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||OLe(t.color)?QS:t.color,i=aJ(t);return new pb({size:t.width<=t.height?t.height:t.width,angle:t.angle,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new pb({resource:{href:xle({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};I([O({type:$c,json:{write:!0}})],Ih.prototype,"material",void 0),I([O({type:ay,json:{write:!0}})],Ih.prototype,"resource",void 0),I([si({Icon:"icon"},{readOnly:!0})],Ih.prototype,"type",void 0),I([O(Cf)],Ih.prototype,"size",void 0),I([si({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Ih.prototype,"anchor",void 0),I([O({type:Ub,json:{type:[Number],read:{reader:t=>new Ub({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ih.prototype,"anchorPosition",void 0),I([O({type:nS,json:{write:!0}})],Ih.prototype,"outline",void 0),I([O({type:Number,json:{write:!0,default:0}})],Ih.prototype,"angle",void 0),Ih=pb=I([De(Ffe)],Ih);const Fy=Ih;function aJ(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,n=lJ(t.xoffset),s=lJ(t.yoffset);return(n||s)&&e&&i?{x:-n/e,y:s/i}:null}function lJ(t){return isFinite(t)?t:0}const ZLe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function KLe(t){return ZLe[t]||(qt.getLogger(Ffe).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let ly=class extends Un(St){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};I([O({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ly.prototype,"type",void 0),I([O({type:ZRe,json:{default:"begin-end",write:!0}})],ly.prototype,"placement",void 0),I([O({type:hfe,json:{default:"arrow",write:!0}})],ly.prototype,"style",void 0),I([O({type:fi,json:{type:[Ss],default:null,write:!0}})],ly.prototype,"color",void 0),ly=I([De("esri.symbols.LineStyleMarker3D")],ly);const IL=ly;var TI;let Vd=TI=class extends Lf{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=eh(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new TI(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??eh(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new FG({style:t.style}):null,material:new $c({color:(t.color||QS).clone()}),marker:t.marker?new IL({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new TI(e)}};I([O({type:$c,json:{write:!0}})],Vd.prototype,"material",void 0),I([si({Line:"line"},{readOnly:!0})],Vd.prototype,"type",void 0),I([O({type:Ofe,json:{write:!0,default:"miter"}})],Vd.prototype,"join",void 0),I([O({type:qG,json:{write:!0,default:"butt"}})],Vd.prototype,"cap",void 0),I([O(Cf)],Vd.prototype,"size",void 0),I([O(Dfe)],Vd.prototype,"pattern",void 0),I([O({types:{key:"type",base:IL,typeMap:{style:IL}},json:{write:!0}})],Vd.prototype,"marker",void 0),Vd=TI=I([De("esri.symbols.LineSymbol3DLayer")],Vd);const Nx=Vd;var ML;const JLe=Ta()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let sS=ML=class extends St{clone(){return new ML({href:this.href,primitive:this.primitive})}};I([O({type:String,json:{read:mG,write:gv}})],sS.prototype,"href",void 0),I([si(JLe)],sS.prototype,"primitive",void 0),sS=ML=I([De("esri.symbols.support.ObjectSymbol3DLayerResource")],sS);const _gt="sphere";var AL;let Iy=AL=class extends Ei{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new AL({x:this.x,y:this.y,z:this.z})}};I([O({type:Number})],Iy.prototype,"x",void 0),I([O({type:Number})],Iy.prototype,"y",void 0),I([O({type:Number})],Iy.prototype,"z",void 0),Iy=AL=I([De("esri.symbols.support.Symbol3DAnchorPosition3D")],Iy);var kL;let Va=kL=class extends Lf{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,e,i;return new kL({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((e=this.material)==null?void 0:e.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};I([O({type:$c,json:{write:!0}})],Va.prototype,"material",void 0),I([O({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Va.prototype,"castShadows",void 0),I([O({type:sS,json:{write:!0}})],Va.prototype,"resource",void 0),I([si({Object:"object"},{readOnly:!0})],Va.prototype,"type",void 0),I([O({type:Number,json:{write:!0}})],Va.prototype,"width",void 0),I([O({type:Number,json:{write:!0}})],Va.prototype,"height",void 0),I([O({type:Number,json:{write:!0}})],Va.prototype,"depth",void 0),I([si({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Va.prototype,"anchor",void 0),I([O({type:Iy,json:{type:[Number],read:{reader:t=>new Iy({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Va.prototype,"anchorPosition",void 0),I([O({type:Number,json:{write:!0}})],Va.prototype,"heading",void 0),I([O({type:Number,json:{write:!0}})],Va.prototype,"tilt",void 0),I([O({type:Number,json:{write:!0}})],Va.prototype,"roll",void 0),I([O({readOnly:!0})],Va.prototype,"isPrimitive",null),Va=kL=I([De("esri.symbols.ObjectSymbol3DLayer")],Va);const VG=Va;var DL;let hl=DL=class extends Lf{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new DL({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};I([O({type:$c,json:{write:!0}})],hl.prototype,"material",void 0),I([O({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],hl.prototype,"castShadows",void 0),I([si({Path:"path"},{readOnly:!0})],hl.prototype,"type",void 0),I([O({type:["circle","quad"],json:{write:!0,default:"circle"}})],hl.prototype,"profile",void 0),I([O({type:Ofe,json:{write:!0,default:"miter"}})],hl.prototype,"join",void 0),I([O({type:jLe,json:{write:!0,default:"butt"}})],hl.prototype,"cap",void 0),I([O({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],hl.prototype,"width",void 0),I([Dt("width",["width","size","height"])],hl.prototype,"readWidth",null),I([O({type:Number,json:{write:!0}})],hl.prototype,"height",void 0),I([Dt("height",["height","size","width"])],hl.prototype,"readHeight",null),I([O({type:["center","bottom","top"],json:{write:!0,default:"center"}})],hl.prototype,"anchor",void 0),I([O({type:["heading","all"],json:{write:!0,default:"all"}})],hl.prototype,"profileRotation",void 0),hl=DL=I([De("esri.symbols.PathSymbol3DLayer")],hl);const GG=hl;var NL;let Yb=NL=class extends St{constructor(){super(...arguments),this.color=new fi([0,0,0,1]),this.size=0}clone(){const t={color:Ue(this.color),size:this.size};return new NL(t)}};I([O(Z0)],Yb.prototype,"color",void 0),I([O(Cf)],Yb.prototype,"size",void 0),Yb=NL=I([De("esri.symbols.support.Symbol3DHalo")],Yb);let tE=class extends Un(St){constructor(e){super(e),this.color=null}};I([O(Z0)],tE.prototype,"color",void 0),tE=I([De("esri.symbols.support.Symbol3DTextBackground")],tE);var II;let ql=II=class extends Lf{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,n){const s={...n,textSymbol3D:!0};e.font=t.write({},s),delete e.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new II({enabled:this.enabled,font:this.font&&Ue(this.font),halo:this.halo&&Ue(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Ue(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new II({font:t.font!=null?t.font.clone():new MA,halo:QLe(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new $c({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new tE({color:t.backgroundColor.clone()}):null})}};function QLe(t,e){return t&&e!=null&&e>0?new Yb({color:Ue(t),size:e}):null}I([O({type:MA,json:{write:!0}})],ql.prototype,"font",null),I([zt("font")],ql.prototype,"writeFont",null),I([O({type:Yb,json:{write:!0}})],ql.prototype,"halo",void 0),I([O({...Rfe,json:{default:"center",write:!0}})],ql.prototype,"horizontalAlignment",void 0),I([O({...$fe,json:{default:1,write:!0}})],ql.prototype,"lineHeight",void 0),I([O({type:$c,json:{write:!0}})],ql.prototype,"material",void 0),I([O({type:tE,json:{write:!0}})],ql.prototype,"background",void 0),I([O(Cf)],ql.prototype,"size",null),I([O({type:String,json:{write:!0}})],ql.prototype,"text",void 0),I([si({Text:"text"},{readOnly:!0})],ql.prototype,"type",void 0),I([O({...Lfe,json:{default:"baseline",write:!0}})],ql.prototype,"verticalAlignment",void 0),ql=II=I([De("esri.symbols.TextSymbol3DLayer")],ql);const Ox=ql;var OL;let Mg=OL=class extends Lf{constructor(t){super(t),this.color=$L.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new OL({color:Ue(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};I([O({type:fi,nonNullable:!0,json:{type:[Ss],write:(t,e,i)=>e[i]=t.toArray(fi.AlphaMode.UNLESS_OPAQUE),default:()=>$L.clone(),defaultEquals:t=>t.toCss(!0)===$L.toCss(!0)}})],Mg.prototype,"color",void 0),I([si({Water:"water"},{readOnly:!0})],Mg.prototype,"type",void 0),I([O({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Mg.prototype,"waterbodySize",void 0),I([O({type:Number,json:{write:!0,default:null}})],Mg.prototype,"waveDirection",void 0),I([O({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Mg.prototype,"waveStrength",void 0),Mg=OL=I([De("esri.symbols.WaterSymbol3DLayer")],Mg);const zfe=Mg,$L=new fi([0,119,190]);var RL;let cy=RL=class extends Ei{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new RL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};I([O({type:String})],cy.prototype,"name",void 0),I([O({type:String})],cy.prototype,"styleUrl",void 0),I([O({type:String})],cy.prototype,"styleName",void 0),I([O({type:Bc})],cy.prototype,"portal",void 0),cy=RL=I([De("esri.symbols.support.StyleOrigin")],cy);const LL=cy;var FL;let iE=FL=class extends Ei{constructor(){super(...arguments),this.url=""}clone(){return new FL({url:this.url})}};I([O({type:String})],iE.prototype,"url",void 0),iE=FL=I([De("esri.symbols.support.Thumbnail")],iE);const qfe={icon:Fy,object:VG,line:Nx,path:GG,fill:K0,extrude:Ife,text:Ox,water:zfe},eFe=ci.ofType({base:Lf,key:"type",typeMap:qfe,errorContext:"symbol-layer"});let Gd=class extends Ma{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,n=i==null?void 0:i.type,s=n||ci;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&qt.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){SA(e,this._get("symbolLayers"))}readStyleOrigin(e,i,n){if(e.styleUrl&&e.name){const s=Mx(e.styleUrl,n);return new LL({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new LL({portal:(n==null?void 0:n.portal)||Bc.getDefault(),styleName:e.styleName,name:e.name});n!=null&&n.messages&&n.messages.push(new ld("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:n,definition:e}))}writeStyleOrigin(e,i,n,s){if(e.styleUrl&&e.name){let r=QC(e.styleUrl,s);Fc(r)&&(r=Hu(r)),i.styleOrigin={styleUrl:r,name:e.name}}else e.styleName&&e.name&&(e.portal&&(s!=null&&s.portal)&&!ble(e.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new ld("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Lf||e&&qfe[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};I([O({json:{read:!1,write:!1}})],Gd.prototype,"color",null),I([O({type:eFe,nonNullable:!0,json:{write:!0}}),Es(lfe)],Gd.prototype,"symbolLayers",null),I([O({type:LL})],Gd.prototype,"styleOrigin",void 0),I([Dt("styleOrigin")],Gd.prototype,"readStyleOrigin",null),I([zt("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Gd.prototype,"writeStyleOrigin",null),I([O({type:iE,json:{read:!1}})],Gd.prototype,"thumbnail",void 0),I([O({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Gd.prototype,"type",void 0),Gd=I([De("esri.symbols.Symbol3D")],Gd);const Yv=Gd;let rS=class extends St{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};I([O({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],rS.prototype,"type",void 0),I([O({readOnly:!0})],rS.prototype,"visible",void 0),rS=I([De("esri.symbols.callouts.Callout3D")],rS);const Vfe=rS;var zL;let MI=zL=class extends St{constructor(t){super(t),this.color=new fi("white")}clone(){return new zL({color:Ue(this.color)})}};I([O(Z0)],MI.prototype,"color",void 0),MI=zL=I([De("esri.symbols.callouts.LineCallout3DBorder")],MI);const tFe=MI;var qL;let Ag=qL=class extends Vfe{constructor(t){super(t),this.type="line",this.color=new fi([0,0,0,1]),this.size=eh(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new qL({color:Ue(this.color),size:this.size,border:Ue(this.border)})}};I([si({line:"line"})],Ag.prototype,"type",void 0),I([O(Z0)],Ag.prototype,"color",void 0),I([O(Cf)],Ag.prototype,"size",void 0),I([O({type:tFe,json:{write:!0}})],Ag.prototype,"border",void 0),I([O({readOnly:!0})],Ag.prototype,"visible",null),Ag=qL=I([De("esri.symbols.callouts.LineCallout3D")],Ag);const Gfe=Ag;function jG(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function jfe(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!jG(t)}function Sgt(t){return t.type==="point-3d"||t.type==="label-3d"}function Egt(t){return t.horizontalAlignment==="center"}const Bfe={types:{key:"type",base:Vfe,typeMap:{line:Gfe}},json:{write:!0}};var VL;let mb=VL=class extends St{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new VL({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};I([O(Cf)],mb.prototype,"screenLength",void 0),I([O({type:Number,nonNullable:!0,json:{write:!0,default:0}})],mb.prototype,"minWorldLength",void 0),I([O({type:Number,json:{write:!0}})],mb.prototype,"maxWorldLength",void 0),mb=VL=I([De("esri.symbols.support.Symbol3DVerticalOffset")],mb);const BG=mb;var AI;const Hfe=ci.ofType({base:null,key:"type",typeMap:{text:Ox}});let kg=AI=class extends Yv{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Hfe,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return jfe(this)}hasVisibleVerticalOffset(){return jG(this)}clone(){return new AI({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail),callout:Ue(this.callout),verticalOffset:Ue(this.verticalOffset)})}static fromTextSymbol(t){return new AI({symbolLayers:new ci([Ox.fromTextSymbol(t)])})}};I([O({type:BG,json:{write:!0}})],kg.prototype,"verticalOffset",void 0),I([O(Bfe)],kg.prototype,"callout",void 0),I([O({json:{read:!1,write:!1}})],kg.prototype,"styleOrigin",void 0),I([O({type:Hfe})],kg.prototype,"symbolLayers",void 0),I([si({LabelSymbol3D:"label-3d"},{readOnly:!0})],kg.prototype,"type",void 0),kg=AI=I([De("esri.symbols.LabelSymbol3D")],kg);const AA=kg;var kI;const Ufe=ci.ofType({base:null,key:"type",typeMap:{line:Nx,path:GG}}),iFe=ci.ofType({base:null,key:"type",typeMap:{line:Nx,path:GG}});let oS=kI=class extends Yv{constructor(t){super(t),this.symbolLayers=new Ufe,this.type="line-3d"}clone(){return new kI({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromSimpleLineSymbol(t){return new kI({symbolLayers:new ci([Nx.fromSimpleLineSymbol(t)])})}};I([O({type:Ufe,json:{type:iFe}})],oS.prototype,"symbolLayers",void 0),I([si({LineSymbol3D:"line-3d"},{readOnly:!0})],oS.prototype,"type",void 0),oS=kI=I([De("esri.symbols.LineSymbol3D")],oS);const Xv=oS;let Dg=class extends Ma{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};I([O({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Dg.prototype,"angle",void 0),I([O({type:["simple-marker","picture-marker"],readOnly:!0})],Dg.prototype,"type",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],Dg.prototype,"xoffset",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],Dg.prototype,"yoffset",void 0),I([O({cast:t=>t==="auto"?t:yx(pn(t)),json:{write:!0}})],Dg.prototype,"size",void 0),Dg=I([De("esri.symbols.MarkerSymbol")],Dg);const Yfe=Dg;var DI;const Xfe=ci.ofType({base:null,key:"type",typeMap:{fill:K0}});let aS=DI=class extends Yv{constructor(t){super(t),this.symbolLayers=new Xfe,this.type="mesh-3d"}clone(){return new DI({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromSimpleFillSymbol(t){return new DI({symbolLayers:new ci([K0.fromSimpleFillSymbol(t)])})}};I([O({type:Xfe})],aS.prototype,"symbolLayers",void 0),I([si({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],aS.prototype,"type",void 0),aS=DI=I([De("esri.symbols.MeshSymbol3D")],aS);const $x=aS;function nFe(t,e,i){return e.imageData?xle({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Wfe(e.url,i)}function Wfe(t,e){if(!Fc(t)){const i=rFe(e);if(i)return N2(i,"images",t)}return Mx(t,e)}function sFe(t,e,i,n){if(Vv(t)){const s=TE(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,i&&i.imageData===e.imageData&&i.url&&gv(i.url,e,"url",n)}else gv(t,e,"url",n)}const Zfe={json:{read:{source:["imageData","url"],reader:nFe},write:{writer(t,e,i,n){sFe(t,e,this.source,n)}}}},Kfe={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const n={};return e.imageData&&(n.imageData=e.imageData),e.contentType&&(n.contentType=e.contentType),e.url&&(n.url=Wfe(e.url,i)),n}}}};function rFe(t){var s,r;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const n=i==null?void 0:i.type;return n==="feature"||n==="stream"?(s=i.parsedUrl)==null?void 0:s.path:n==="map-image"||n==="tile"?(r=t.url)==null?void 0:r.path:null}var GL;let xu=GL=class extends dfe{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),i!=null&&(s.width=pn(i)),n!=null&&(s.height=pn(n)),s}clone(){const t=new GL({color:Ue(this.color),height:this.height,outline:Ue(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",Ue(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};I([si({esriPFS:"picture-fill"},{readOnly:!0})],xu.prototype,"type",void 0),I([O(Zfe)],xu.prototype,"url",void 0),I([O({type:Number,json:{write:!0}})],xu.prototype,"xscale",void 0),I([O({type:Number,json:{write:!0}})],xu.prototype,"yscale",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],xu.prototype,"width",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],xu.prototype,"height",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],xu.prototype,"xoffset",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],xu.prototype,"yoffset",void 0),I([O(Kfe)],xu.prototype,"source",void 0),xu=GL=I([De("esri.symbols.PictureFillSymbol")],xu);const HG=xu;var jL;let Mh=jL=class extends Yfe{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e!=null&&(n.width=pn(e)),i!=null&&(n.height=pn(i)),n}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new jL({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",Ue(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};I([O({json:{write:!1}})],Mh.prototype,"color",void 0),I([si({esriPMS:"picture-marker"},{readOnly:!0})],Mh.prototype,"type",void 0),I([O(Zfe)],Mh.prototype,"url",void 0),I([O(Kfe)],Mh.prototype,"source",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],Mh.prototype,"height",void 0),I([Dt("height",["height","size"])],Mh.prototype,"readHeight",null),I([O({type:Number,cast:pn,json:{write:!0}})],Mh.prototype,"width",void 0),I([O({json:{write:!1}})],Mh.prototype,"size",void 0),Mh=jL=I([De("esri.symbols.PictureMarkerSymbol")],Mh);const c5=Mh;var uy;const Jfe=ci.ofType({base:null,key:"type",typeMap:{icon:Fy,object:VG,text:Ox}});let hy=uy=class extends Yv{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Jfe,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return jfe(this)}hasVisibleVerticalOffset(){return jG(this)}clone(){return new uy({verticalOffset:Ue(this.verticalOffset),callout:Ue(this.callout),styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new uy({symbolLayers:new ci([Fy.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new uy({symbolLayers:new ci([Fy.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var n,s;if(((s=(n=t.data)==null?void 0:n.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new uy(i!=null&&i.callout?{symbolLayers:new ci([Fy.fromCIMSymbol(t)]),callout:new Gfe({size:.5,color:new fi([0,0,0])}),verticalOffset:new BG({screenLength:40})}:{symbolLayers:new ci([Fy.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new uy({symbolLayers:new ci([Ox.fromTextSymbol(t)])})}};I([O({type:BG,json:{write:!0}})],hy.prototype,"verticalOffset",void 0),I([O(Bfe)],hy.prototype,"callout",void 0),I([O({type:Jfe,json:{origins:{"web-scene":{write:!0}}}})],hy.prototype,"symbolLayers",void 0),I([si({PointSymbol3D:"point-3d"},{readOnly:!0})],hy.prototype,"type",void 0),hy=uy=I([De("esri.symbols.PointSymbol3D")],hy);const Xp=hy;var lS;const Qfe=ci.ofType({base:null,key:"type",typeMap:{extrude:Ife,fill:K0,icon:Fy,line:Nx,object:VG,text:Ox,water:zfe}});let cS=lS=class extends Yv{constructor(t){super(t),this.symbolLayers=new Qfe,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&k2(qt.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&k2(qt.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Ju(()=>this.symbolLayers,"after-add",({item:e})=>t(e),om))}clone(){return new lS({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromJSON(t){var i;const e=new lS;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const n=e.symbolLayers.at(0),s=e.symbolLayers.at(1);!s.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(n.outline={size:s.size,color:s.material!=null?s.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new lS({symbolLayers:new ci([K0.fromSimpleFillSymbol(t)])})}};I([O({type:Qfe,json:{write:!0}})],cS.prototype,"symbolLayers",void 0),I([si({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],cS.prototype,"type",void 0),cS=lS=I([De("esri.symbols.PolygonSymbol3D")],cS);const J0=cS;var BL;const aN=new mn({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let jd=BL=class extends Yfe{constructor(...t){super(...t),this.color=new fi([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Rl}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=pn(e)),i&&(s.outline=i),n&&(s.color=n),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new BL({angle:this.angle,color:Ue(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};I([O()],jd.prototype,"color",void 0),I([zt("color")],jd.prototype,"writeColor",null),I([si({esriSMS:"simple-marker"},{readOnly:!0})],jd.prototype,"type",void 0),I([O()],jd.prototype,"size",void 0),I([O({type:aN.apiValues,json:{read:aN.read,write:aN.write}})],jd.prototype,"style",void 0),I([O({type:String,json:{write:!0}})],jd.prototype,"path",null),I([O({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Rl}},json:{default:null,write:!0}})],jd.prototype,"outline",void 0),jd=BL=I([De("esri.symbols.SimpleMarkerSymbol")],jd);const Uc=jd,Pgt=Object.freeze(Object.defineProperty({__proto__:null,default:Uc},Symbol.toStringTag,{value:"Module"}));var HL;let Bs=HL=class extends Ma{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new MA,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.text=t),e&&(n.font=e),i&&(n.color=i),n}writeLineWidth(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}castLineWidth(t){return pn(t)}writeLineHeight(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}clone(){return new HL({angle:this.angle,backgroundColor:Ue(this.backgroundColor),borderLineColor:Ue(this.borderLineColor),borderLineSize:this.borderLineSize,color:Ue(this.color),font:this.font&&this.font.clone(),haloColor:Ue(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};I([O({type:fi,json:{write:!0}})],Bs.prototype,"backgroundColor",void 0),I([O({type:fi,json:{write:!0}})],Bs.prototype,"borderLineColor",void 0),I([O({type:Number,json:{write:!0},cast:pn})],Bs.prototype,"borderLineSize",void 0),I([O({type:MA,json:{write:!0}})],Bs.prototype,"font",void 0),I([O({...Rfe,json:{write:!0}})],Bs.prototype,"horizontalAlignment",void 0),I([O({type:Boolean,json:{write:!0}})],Bs.prototype,"kerning",void 0),I([O({type:fi,json:{write:!0}})],Bs.prototype,"haloColor",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],Bs.prototype,"haloSize",void 0),I([O({type:Boolean,json:{write:!0}})],Bs.prototype,"rightToLeft",void 0),I([O({type:Boolean,json:{write:!0}})],Bs.prototype,"rotated",void 0),I([O({type:String,json:{write:!0}})],Bs.prototype,"text",void 0),I([si({esriTS:"text"},{readOnly:!0})],Bs.prototype,"type",void 0),I([O({...Lfe,json:{write:!0}})],Bs.prototype,"verticalAlignment",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],Bs.prototype,"xoffset",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],Bs.prototype,"yoffset",void 0),I([O({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Bs.prototype,"angle",void 0),I([O({type:Number,json:{write:!0}})],Bs.prototype,"width",void 0),I([O({type:Number})],Bs.prototype,"lineWidth",void 0),I([zt("lineWidth")],Bs.prototype,"writeLineWidth",null),I([Es("lineWidth")],Bs.prototype,"castLineWidth",null),I([O($fe)],Bs.prototype,"lineHeight",void 0),I([zt("lineHeight")],Bs.prototype,"writeLineHeight",null),Bs=HL=I([De("esri.symbols.TextSymbol")],Bs);const Rx=Bs;var UL;let Ah=UL=class extends Ma{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:Bc.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new UL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,n=i?this._fetchCacheKey:null;if(i!=null){const l=n&&i.get(n);if(l)return l.clone()}const{resolveWebStyleSymbol:s}=await st(()=>import("./webStyleSymbolUtils-gw6AhO1k.js"),__vite__mapDeps([60,61]),import.meta.url);oc(e);const r=s(this,{portal:this.portal},t,e);r.catch(l=>{qt.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",l)});const o=await r;return t==="webRef"&&o.type==="point-3d"||t==="cimRef"&&o.type==="cim"?(i!=null&&i.set(n,o.clone()),o):null}};I([O({json:{write:!1}})],Ah.prototype,"color",void 0),I([O({type:String,json:{write:!0}})],Ah.prototype,"styleName",void 0),I([O({type:Bc,json:{write:!1}})],Ah.prototype,"portal",void 0),I([O({type:String,json:{read:mG,write:gv}})],Ah.prototype,"styleUrl",void 0),I([O({type:iE,json:{read:!1}})],Ah.prototype,"thumbnail",void 0),I([O({type:String,json:{write:!0}})],Ah.prototype,"name",void 0),I([si({styleSymbolReference:"web-style"},{readOnly:!0})],Ah.prototype,"type",void 0),I([O()],Ah.prototype,"_fetchCacheKey",null),Ah=UL=I([De("esri.symbols.WebStyleSymbol")],Ah);const Wv=Ah;function Tgt(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function cJ(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Vu={base:Ma,key:"type",typeMap:{"simple-fill":xm,"picture-fill":HG,"picture-marker":c5,"simple-line":Rl,"simple-marker":Uc,text:Rx,"label-3d":AA,"line-3d":Xv,"mesh-3d":$x,"point-3d":Xp,"polygon-3d":J0,"web-style":Wv,cim:W0},errorContext:"symbol"},Igt={base:Ma,key:"type",typeMap:{"picture-marker":c5,"simple-marker":Uc,"point-3d":Xp,cim:W0},errorContext:"symbol"},Mgt={base:Ma,key:"type",typeMap:{"simple-line":Rl,"line-3d":Xv,cim:W0},errorContext:"symbol"},Agt={base:Ma,key:"type",typeMap:{"simple-fill":xm,"picture-fill":HG,"polygon-3d":J0,cim:W0},errorContext:"symbol"},oFe={base:Ma,key:"type",typeMap:{"picture-marker":c5,"simple-marker":Uc,text:Rx,"web-style":Wv,cim:W0},errorContext:"symbol"},aFe=vx({types:Vu}),epe={base:Ma,key:"type",typeMap:{"simple-fill":xm,"picture-fill":HG,"picture-marker":c5,"simple-line":Rl,"simple-marker":Uc,text:Rx,"line-3d":Xv,"mesh-3d":$x,"point-3d":Xp,"polygon-3d":J0,"web-style":Wv,cim:W0},errorContext:"symbol"},lFe={base:Ma,key:"type",typeMap:{text:Rx,"label-3d":AA},errorContext:"symbol"},uJ={base:Ma,key:"type",typeMap:{"line-3d":Xv,"mesh-3d":$x,"point-3d":Xp,"polygon-3d":J0,"web-style":Wv,cim:W0},errorContext:"symbol"},cFe={base:Ma,key:"type",typeMap:{"label-3d":AA},errorContext:"symbol"},tpe=Ku(Vu);var YL;function uFe(t){if(!t)return null;const e={};for(const i in t){const n=XC(t[i]);n&&(e[i]=n)}return Object.keys(e).length!==0?e:null}function hFe(t){if(t==null)return null;const e={};for(const i in t){const n=t[i];n&&(e[i]=n.toJSON())}return Object.keys(e).length!==0?e:null}let Vl=YL=class extends Un(St){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:qS(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&U4e(qt.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),(t==null?void 0:t.type)!=="mesh"&&this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}get version(){return this._version}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new YL({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const e=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[e,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var t;return{aggregateGeometries:hFe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Q9(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(s.action=n),t==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([D0(()=>{var t,e;return((t=this.geometry)==null?void 0:t.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(e=this.geometry.transform)==null?void 0:e.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:t,origin:e})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===e||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=e,this.notifyMeshTransformChanged())}),D0(()=>{var t;return((t=this.geometry)==null?void 0:t.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var e;const t=this.geometry;(t==null?void 0:t.type)==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(e=t.transform)==null?void 0:e.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(t,e)=>t===e,sync:!0})])}};I([O({value:null,json:{read:uFe}})],Vl.prototype,"aggregateGeometries",null),I([O({value:null})],Vl.prototype,"attributes",null),I([O({value:null,types:WC,json:{read:XC}})],Vl.prototype,"geometry",null),I([O({type:Boolean})],Vl.prototype,"isAggregate",void 0),I([O({clonable:"reference"})],Vl.prototype,"layer",void 0),I([O({clonable:"reference"})],Vl.prototype,"origin",void 0),I([O({type:s5})],Vl.prototype,"popupTemplate",void 0),I([O({clonable:"reference"})],Vl.prototype,"sourceLayer",void 0),I([O({value:null,types:Vu})],Vl.prototype,"symbol",null),I([O({clonable:!1,json:{read:!1,write:!1}})],Vl.prototype,"_version",void 0),I([O({type:Boolean,value:!0})],Vl.prototype,"visible",null),Vl=YL=I([De("esri.Graphic")],Vl);const th=Vl;function kgt(t){}function Dgt(t){return()=>t}const ipe=()=>qt.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),kA=t=>ipe().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),DA=()=>ipe().error("Use of arcade expressions requires an arcade context"),hJ=new th,NI=Math.PI,npe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function spe(t,e,i){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.find(P=>P.type==="color"):t;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void kA("ColorVariable");const s=typeof e=="number",r=s?null:e,o=r==null?void 0:r.attributes;let l=s?e:null;const c=n.field,{ipData:f,hasExpression:y}=n.cache;let _=n.cache.compiledFunc;if(!c&&!y){const P=n.stops;return P&&P[0]&&P[0].color}if(typeof l!="number")if(y){if((i==null?void 0:i.arcade)==null)return void DA();const P={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,D=A.getViewInfo(P),N=A.createExecContext(r,D,i.timeZone);if(!_){const F=A.createSyntaxTree(n.valueExpression);_=A.createFunction(F),n.cache.compiledFunc=_}l=A.executeFunction(_,N)}else o&&(l=o[c]);const x=n.normalizationField,S=o!=null&&x!=null?parseFloat(o[x]):void 0;if(l!=null&&(!x||s||!isNaN(S)&&S!==0)){isNaN(S)||s||(l/=S);const P=UG(l,f);if(P){const A=P[0],D=P[1],N=A===D?n.stops[A].color:fi.blendColors(n.stops[A].color,n.stops[D].color,P[2],i!=null?i.color:void 0);return new fi(N)}}}function rpe(t,e,i){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.find(P=>P.type==="opacity"):t;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void kA("OpacityVariable");const s=typeof e=="number",r=s?null:e,o=r==null?void 0:r.attributes;let l=s?e:null;const c=n.field,{ipData:f,hasExpression:y}=n.cache;let _=n.cache.compiledFunc;if(!c&&!y){const P=n.stops;return P&&P[0]&&P[0].opacity}if(typeof l!="number")if(y){if((i==null?void 0:i.arcade)==null)return void DA();const P={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,D=A.getViewInfo(P),N=A.createExecContext(r,D,i.timeZone);if(!_){const F=A.createSyntaxTree(n.valueExpression);_=A.createFunction(F),n.cache.compiledFunc=_}l=A.executeFunction(_,N)}else o&&(l=o[c]);const x=n.normalizationField,S=o!=null&&x!=null?parseFloat(o[x]):void 0;if(l!=null&&(!x||s||!isNaN(S)&&S!==0)){isNaN(S)||s||(l/=S);const P=UG(l,f);if(P){const A=P[0],D=P[1];if(A===D)return n.stops[A].opacity;{const N=n.stops[A].opacity;return N+(n.stops[D].opacity-N)*P[2]}}}}function ope(t,e,i){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.find(S=>S.type==="rotation"):t;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void kA("RotationVariable");const s=n.axis||"heading",r=s==="heading"&&n.rotationType==="arithmetic"?90:0,o=s==="heading"&&n.rotationType==="arithmetic"?-1:1,l=typeof e=="number"?null:e,c=l==null?void 0:l.attributes,f=n.field,{hasExpression:y}=n.cache;let _=n.cache.compiledFunc,x=0;if(!f&&!y)return x;if(y){if((i==null?void 0:i.arcade)==null)return void DA();const S={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},P=i.arcade.arcadeUtils,A=P.getViewInfo(S),D=P.createExecContext(l,A,i.timeZone);if(!_){const N=P.createSyntaxTree(n.valueExpression);_=P.createFunction(N),n.cache.compiledFunc=_}x=P.executeFunction(_,D)}else c&&(x=c[f]||0);return x=typeof x!="number"||isNaN(x)?null:r+o*x,x}function dFe(t,e,i){const n=typeof e=="number",s=n?null:e,r=s==null?void 0:s.attributes;let o=n?e:null;const{isScaleDriven:l}=t.cache;let c=t.cache.compiledFunc;if(l){const y=i!=null?i.scale:void 0,_=i!=null?i.view:void 0;o=y==null||_==="3d"?fFe(t):y}else if(!n)switch(t.inputValueType){case Qp.Expression:{if((i==null?void 0:i.arcade)==null)return void DA();const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,x=_.getViewInfo(y),S=_.createExecContext(s,x,i.timeZone);if(!c){const P=_.createSyntaxTree(t.valueExpression);c=_.createFunction(P),t.cache.compiledFunc=c}o=_.executeFunction(c,S);break}case Qp.Field:r&&(o=r[t.field]);break;case Qp.Unknown:o=null}if(!LE(o))return null;if(n||!t.normalizationField)return o;const f=r?parseFloat(r[t.normalizationField]):null;return LE(f)&&f!==0?o/f:null}function fFe(t){let e=null,i=null;const n=t.stops;return n?(e=n[0].value,i=n[n.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function NA(t,e,i){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.find(r=>r.type==="size"):t;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void kA("SizeVariable");const s=lpe(dFe(n,e,i),n,e,i,n.cache.ipData);return s==null||isNaN(s)?0:s}function lc(t,e,i){return t==null?null:Hb(t)?NA(t,e,i):LE(t)?t:null}function ape(t,e,i){return LE(i)&&t>i?i:LE(e)&&t<e?e:t}function pFe(t,e,i,n){return t+((lc(e.minSize,i,n)||e.minDataValue)??0)}function mFe(t,e,i){const n=t.stops;let s=(n==null?void 0:n.length)&&n[0].size;return s==null&&(s=t.minSize),lc(s,e,i)}function gFe(t,e,i,n){const s=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),r=lc(e.minSize,i,n),o=lc(e.maxSize,i,n),l=n!=null?n.shape:void 0;if(t<=e.minDataValue)return r;if(t>=e.maxDataValue)return o;if(r==null||o==null)return null;if(e.scaleBy==="area"&&l){const c=l==="circle",f=c?NI*(r/2)**2:r*r,y=f+s*((c?NI*(o/2)**2:o*o)-f);return c?2*Math.sqrt(y/NI):Math.sqrt(y)}return r+s*(o-r)}function yFe(t,e,i,n){const s=n!=null?n.shape:void 0,r=t/e.minDataValue,o=lc(e.minSize,i,n),l=lc(e.maxSize,i,n);let c=null;return c=s==="circle"?2*Math.sqrt(r*(o/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(r*o**2):r*o,ape(c,o,l)}function vFe(t,e,i,n,s){var c,f,y;const[r,o,l]=UG(t,s);if(r===o)return lc((c=e.stops)==null?void 0:c[r].size,i,n);{const _=lc((f=e.stops)==null?void 0:f[r].size,i,n);return _+(lc((y=e.stops)==null?void 0:y[o].size,i,n)-_)*l}}function _Fe(t,e,i,n){const s=((n==null?void 0:n.resolution)??1)*_A[e.valueUnit],r=lc(e.minSize,i,n),o=lc(e.maxSize,i,n),{valueRepresentation:l}=e;let c=null;return c=l==="area"?2*Math.sqrt(t/NI)/s:l==="radius"||l==="distance"?2*t/s:t/s,ape(c,r,o)}function lpe(t,e,i,n,s){switch(e.transformationType){case wo.Additive:return pFe(t,e,i,n);case wo.Constant:return mFe(e,i,n);case wo.ClampedLinear:return gFe(t,e,i,n);case wo.Proportional:return yFe(t,e,i,n);case wo.Stops:return vFe(t,e,i,n,s);case wo.RealWorldSize:return _Fe(t,e,i,n);case wo.Identity:return t;case wo.Unknown:return null}}function bFe(t,e,i){const{isScaleDriven:n}=t.cache;if(!(n&&i==="3d"||e))return null;const s={scale:e,view:i};let r=lc(t.minSize,hJ,s),o=lc(t.maxSize,hJ,s);if(r!=null||o!=null){if(r>o){const l=o;o=r,r=l}return{minSize:r,maxSize:o}}}function xFe(t,e,i){if(!t.visualVariables)return;const n=[],s=[],r=[],o=[],l=[];for(const c of t.visualVariables)switch(c.type){case"color":s.push(c);break;case"opacity":r.push(c);break;case"rotation":l.push(c);break;case"size":o.push(c)}return s.forEach(c=>{const f=spe(c,e,i);n.push({variable:c,value:f})}),r.forEach(c=>{const f=rpe(c,e,i);n.push({variable:c,value:f})}),l.forEach(c=>{const f=ope(c,e,i);n.push({variable:c,value:f})}),o.forEach(c=>{const f=NA(c,e,i);n.push({variable:c,value:f})}),n.filter(c=>c.value!=null)}function UG(t,e){if(!e)return;let i=0,n=e.length-1;return e.some((s,r)=>t<s?(n=r,!0):(i=r,!1)),[i,n,(t-e[i])/(e[n]-e[i])]}function wFe(t,e,i){const n=["proportional","proportional","proportional"];for(const s of t){const r=s.useSymbolValue?"symbol-value":NA(s,e,i);switch(s.axis){case"width":n[0]=r;break;case"depth":n[1]=r;break;case"height":n[2]=r;break;case"width-and-depth":n[0]=r,n[1]=r;break;case"all":case void 0:case null:n[0]=r,n[1]=r,n[2]=r;break;default:s.axis}}return n}const Ngt=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:wFe,getColor:spe,getOpacity:rpe,getRotationAngle:ope,getSize:NA,getSizeForValue:lpe,getSizeFromNumberOrVariable:lc,getSizeRangeAtScale:bFe,getVisualVariableValues:xFe,viewScaleRE:npe},Symbol.toStringTag,{value:"Module"}));var XL;const z4=new mn({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),WL=new mn({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function dJ(t){if(t!=null)return typeof t=="string"||typeof t=="number"?uLe(t):t.type==="size"?Hb(t)?t:(delete(t={...t}).type,new Vn(t)):void 0}function fJ(t,e,i){if(typeof t!="object")return t;const n=new Vn;return n.read(t,i),n}let Vn=XL=class extends Dx{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&npe.test(this.valueExpression)}}set index(t){Hb(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),Hb(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return yfe(this)}set maxDataValue(t){t&&this.stops&&(qt.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(qt.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return dJ(t)}readMaxSize(t,e,i){return fJ(t,e,i)}set minDataValue(t){t&&this.stops&&(qt.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(qt.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return dJ(t)}readMinSize(t,e,i){return fJ(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(qt.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return dLe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,n){if(t==="$view.scale"){if(n!=null&&n.messages){const s=this.index,r=typeof s=="string"?s:`visualVariables[${s}]`;n.messages.push(new rt("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpression",context:n}))}}else e[i]=t}readValueUnit(t){return t?WL.read(t):null}clone(){var t,e;return new XL({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Hb(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Hb(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType===wo.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===wo.Stops){const t=this.stops;if(!t)return this;const e=t.map(n=>n.size).reverse(),i=t.length;for(let n=0;n<i;n++)t[n].size=e[n];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map(e=>e.value||0)}};I([O({readOnly:!0})],Vn.prototype,"cache",null),I([O({type:z4.apiValues,json:{type:z4.jsonValues,origins:{"web-map":{read:!1}},read:z4.read,write:z4.write}})],Vn.prototype,"axis",void 0),I([O()],Vn.prototype,"index",null),I([O({type:String,readOnly:!0})],Vn.prototype,"inputValueType",null),I([O({type:hLe,json:{write:!0}})],Vn.prototype,"legendOptions",void 0),I([O({type:Number,value:null,json:{write:!0}})],Vn.prototype,"maxDataValue",null),I([O({type:Number,value:null,json:{write:!0}})],Vn.prototype,"maxSize",null),I([Es("maxSize")],Vn.prototype,"castMaxSize",null),I([Dt("maxSize")],Vn.prototype,"readMaxSize",null),I([O({type:Number,value:null,json:{write:!0}})],Vn.prototype,"minDataValue",null),I([O({type:Number,value:null,json:{write:!0}})],Vn.prototype,"minSize",null),I([Es("minSize")],Vn.prototype,"castMinSize",null),I([Dt("minSize")],Vn.prototype,"readMinSize",null),I([O({type:String,json:{write:!0}})],Vn.prototype,"normalizationField",void 0),I([O({readOnly:!0})],Vn.prototype,"arcadeRequired",null),I([O({type:String})],Vn.prototype,"scaleBy",void 0),I([O({type:[fI],value:null,json:{write:!0}})],Vn.prototype,"stops",null),I([O({type:["outline"],json:{write:!0}})],Vn.prototype,"target",void 0),I([O({type:String,readOnly:!0})],Vn.prototype,"transformationType",null),I([O({type:["size"],json:{type:["sizeInfo"]}})],Vn.prototype,"type",void 0),I([O({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Vn.prototype,"useSymbolValue",void 0),I([O({type:String,json:{write:!0}})],Vn.prototype,"valueExpression",void 0),I([Dt("valueExpression",["valueExpression","expression"])],Vn.prototype,"readValueExpression",null),I([zt("web-scene","valueExpression")],Vn.prototype,"writeValueExpressionWebScene",null),I([O({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Vn.prototype,"valueRepresentation",void 0),I([O({type:WL.apiValues,json:{write:WL.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Vn.prototype,"valueUnit",void 0),I([Dt("valueUnit")],Vn.prototype,"readValueUnit",null),Vn=XL=I([De("esri.renderers.visualVariables.SizeVariable")],Vn);const OA=Vn,SFe={color:mfe,size:OA,opacity:DG,rotation:gfe},EFe=new mn({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),CFe=/^\[([^\]]+)\]$/i;let OI=class extends Ei{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter(i=>!!i),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,n)=>{let s=null;return s=i.target===n.target?0:i.target?1:-1,s});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,n){const{rotationExpression:s,rotationType:r}=i,o=s==null?void 0:s.match(CFe),l=o==null?void 0:o[1];if(l&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:r,field:l})),e)return e.map(c=>{const f=EFe.read(c.type),y=SFe[f];y||(qt.getLogger(this).warn(`Unknown variable type: ${f}`),n!=null&&n.messages&&n.messages.push(new ld("visual-variable:unsupported",`visualVariable of type '${f}' is not supported`,{definition:c,context:n})));const _=new y;return _.read(c,n),_})}writeVariables(e,i){const n=[];for(const s of e){const r=s.toJSON(i);r&&n.push(r)}return n}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};I([O()],OI.prototype,"visualVariables",null),OI=I([De("esri.renderers.visualVariables.VisualVariableFactory")],OI);const PFe=OI,TFe={base:Dx,key:"type",typeMap:{opacity:DG,color:mfe,rotation:gfe,size:OA}},Lx=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new PFe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,n,s){return this._vvFactory.readVariables(i,n,s)}writeVisualVariables(i,n,s,r){n[s]=this._vvFactory.writeVariables(i,r)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,n){return i?this.getVisualVariablesForType(i,n).length>0:this.getVisualVariablesForType("size",n).length>0||this.getVisualVariablesForType("color",n).length>0||this.getVisualVariablesForType("opacity",n).length>0||this.getVisualVariablesForType("rotation",n).length>0}getVisualVariablesForType(i,n){const s=this.visualVariables;return s?s.filter(r=>r.type===i&&(typeof n=="string"?r.target===n:n!==!1||!r.target)):[]}async collectVVRequiredFields(i,n){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const r of s)r&&(r.field&&El(i,n,r.field),r.normalizationField&&El(i,n,r.normalizationField),r.valueExpression&&(IFe(r.valueExpression,i,n)||await nl(i,n,r.valueExpression)))}};return I([O({types:[TFe],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),I([Dt("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),I([zt("visualVariables")],e.prototype,"writeVisualVariables",null),e=I([De("esri.renderers.mixins.VisualVariablesMixin")],e),e};function IFe(t,e,i){const n=oLe(t);return n!=null&&(El(e,i,n),!0)}const YG=[252,146,31,255],MFe=[153,153,153,255],AFe={type:"esriSMS",style:"esriSMSCircle",size:6,color:YG,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},kFe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:YG},DFe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},NFe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},OFe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},$Fe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},RFe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},cpe=Uc.fromJSON(AFe),upe=Rl.fromJSON(kFe),hpe=xm.fromJSON(DFe),LFe=Rx.fromJSON(NFe);function $gt(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return cpe;case"polyline":return upe;case"polygon":case"extent":return hpe}return null}const Rgt=Uc.fromJSON(OFe),Lgt=Rl.fromJSON($Fe),Fgt=xm.fromJSON(RFe),FFe=Xp.fromSimpleMarkerSymbol(cpe),zFe=Xv.fromSimpleLineSymbol(upe),qFe=J0.fromSimpleFillSymbol(hpe),VFe=new $x({symbolLayers:new ci([new K0({material:{color:YG},edges:new Pfe({size:eh(1),color:new fi(MFe)})})])}),GFe=new Xv({symbolLayers:new ci([new Nx({material:{color:new fi([0,0,0])},size:eh(1)})])}),jFe=new J0({symbolLayers:new ci([new K0({outline:{color:new fi([0,0,0]),size:eh(1)}})])});function zgt(t){if(t==null)return null;switch(t.type){case"mesh":return VFe;case"point":case"multipoint":return FFe;case"polyline":return zFe;case"polygon":case"extent":return qFe}return null}const pJ="#useCIMFallbackSymbology()",G_={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function BFe(t,e=G_){var c,f,y,_;if(!t)return{symbol:null};const{retainId:i=G_.retainId,ignoreDrivers:n=G_.ignoreDrivers,hasLabelingContext:s=G_.hasLabelingContext,retainCIM:r=G_.retainCIM,cimFallbackEnabled:o=G_.cimFallbackEnabled}=e;let l=null;if(cJ(t)||t instanceof Wv)l=t.clone();else if(t.type==="cim"){const x=(f=(c=t.data)==null?void 0:c.symbol)==null?void 0:f.type;switch(x){case"CIMPointSymbol":l=r?t.clone():Xp.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(l=GFe.clone(),(y=e==null?void 0:e.logWarning)==null||y.call(e,pJ,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(l=jFe.clone(),(_=e==null?void 0:e.logWarning)==null||_.call(e,pJ,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!l)return{error:new rt("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${x||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof Rl)l=Xv.fromSimpleLineSymbol(t);else if(t instanceof Uc)l=Xp.fromSimpleMarkerSymbol(t);else if(t instanceof c5)l=Xp.fromPictureMarkerSymbol(t);else if(t instanceof xm)l=e.geometryType&&e.geometryType==="mesh"?$x.fromSimpleFillSymbol(t):J0.fromSimpleFillSymbol(t);else{if(!(t instanceof Rx))return{error:new rt("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};l=s?AA.fromTextSymbol(t):Xp.fromTextSymbol(t)}return i&&l&&l.type!=="cim"&&(l.id=t.id),n&&cJ(l)&&l.symbolLayers.forEach(x=>x.ignoreDrivers=!0),{symbol:l}}function D6(t,e,i,n){const s=dpe(t,{},{context:n,isLabelSymbol:!1});s!=null&&(e[i]=s)}function mJ(t,e,i,n){const s=dpe(t,{},{context:n,isLabelSymbol:!0});s!=null&&(e[i]=s)}function gJ(t){return t instanceof Yv||t instanceof Wv}function HFe(t){return t instanceof Yv&&(t.type==="polygon-3d"||t.type==="line-3d")}function dpe(t,e,i){var l;if(t==null)return null;const{context:n,isLabelSymbol:s}=i,r=n==null?void 0:n.origin,o=n==null?void 0:n.messages;if(r==="web-scene"&&!gJ(t)){const c=BFe(t,{retainCIM:!0,hasLabelingContext:s});return c.symbol!=null?c.symbol.write(e,n):(o==null||o.push(new rt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:n,error:c.error})),null)}return bR(n==null?void 0:n.layer)&&HFe(t)?(o==null||o.push(new rt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(l=n==null?void 0:n.layer)==null?void 0:l.declaredClass}'.`,{symbol:t,context:n})),null):(r==="web-map"||r==="portal-item"&&!bR(n==null?void 0:n.layer))&&gJ(t)?(o==null||o.push(new rt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:n})),null):t.write(e,n)}function qgt(t,e){return aFe(t,null,e)}const $A={types:epe,json:{write:{writer:D6},origins:{"web-scene":{types:uJ,write:{writer:D6},read:{reader:vx({types:uJ})}}}}},XG=sV({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},$A),WG={types:{base:Ma,key:"type",typeMap:{"simple-fill":Vu.typeMap["simple-fill"],"picture-fill":Vu.typeMap["picture-fill"],"polygon-3d":Vu.typeMap["polygon-3d"],cim:Vu.typeMap.cim}},json:{write:{writer:D6},origins:{"web-scene":{type:J0,write:{writer:D6}}}}},$I={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var ZL;let dy=ZL=class extends Lx(wm){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new ZL({description:this.description,label:this.label,symbol:Ue(this.symbol),visualVariables:Ue(this.visualVariables),authoringInfo:Ue(this.authoringInfo)})}};I([O({type:String,json:{write:!0}})],dy.prototype,"description",void 0),I([O({type:String,json:{write:!0}})],dy.prototype,"label",void 0),I([O(XG)],dy.prototype,"symbol",void 0),I([si({simple:"simple"})],dy.prototype,"type",void 0),dy=ZL=I([De("esri.renderers.SimpleRenderer")],dy);const Fx=dy;var KL;let zy=KL=class extends St{constructor(t){super(t),this.name=null,this.code=null}clone(){return new KL({name:this.name,code:this.code})}};I([O({type:String,json:{write:!0}})],zy.prototype,"name",void 0),I([O({type:[String,Number],json:{write:!0}})],zy.prototype,"code",void 0),zy=KL=I([De("esri.layers.support.CodedValue")],zy);const UFe=new mn({inherited:"inherited",codedValue:"coded-value",range:"range"});let uS=class extends St{constructor(e){super(e),this.name=null,this.type=null}};I([O({type:String,json:{write:!0}})],uS.prototype,"name",void 0),I([si(UFe)],uS.prototype,"type",void 0),uS=I([De("esri.layers.support.Domain")],uS);const RA=uS;var JL;let hS=JL=class extends RA{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(n=>(String(n.code)===i&&(e=n.name),!!e))}return e}clone(){return new JL({codedValues:Ue(this.codedValues),name:this.name})}};I([O({type:[zy],json:{write:!0}})],hS.prototype,"codedValues",void 0),I([si({codedValue:"coded-value"})],hS.prototype,"type",void 0),hS=JL=I([De("esri.layers.support.CodedValueDomain")],hS);const LA=hS;var QL;let RI=QL=class extends RA{constructor(t){super(t),this.type="inherited"}clone(){return new QL}};I([si({inherited:"inherited"})],RI.prototype,"type",void 0),RI=QL=I([De("esri.layers.support.InheritedDomain")],RI);const fpe=RI;var eF;let gb=eF=class extends RA{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new eF({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};I([O({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],gb.prototype,"maxValue",void 0),I([O({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],gb.prototype,"minValue",void 0),I([si({range:"range"})],gb.prototype,"type",void 0),gb=eF=I([De("esri.layers.support.RangeDomain")],gb);const ppe=gb,mpe={key:"type",base:RA,typeMap:{range:ppe,"coded-value":LA,inherited:fpe}};function FA(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return ppe.fromJSON(t);case"codedValue":return LA.fromJSON(t);case"inherited":return fpe.fromJSON(t)}return null}const YFe=new mn({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var tF;const XFe=new mn({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Ga=tF=class extends St{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?XFe.fromJSON(i.fieldValueType):null}clone(){var t;return new tF({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((t=this.domain)==null?void 0:t.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};I([O({type:String,json:{write:!0}})],Ga.prototype,"alias",void 0),I([O({type:[String,Number],json:{write:{allowNull:!0}}})],Ga.prototype,"defaultValue",void 0),I([O()],Ga.prototype,"description",void 0),I([Dt("description")],Ga.prototype,"readDescription",null),I([O({types:mpe,json:{read:{reader:FA},write:!0}})],Ga.prototype,"domain",void 0),I([O({type:Boolean,json:{write:!0}})],Ga.prototype,"editable",void 0),I([O({type:Ss,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Ga.prototype,"length",void 0),I([O({type:String,json:{write:!0}})],Ga.prototype,"name",void 0),I([O({type:Boolean,json:{write:!0}})],Ga.prototype,"nullable",void 0),I([si(YFe)],Ga.prototype,"type",void 0),I([O()],Ga.prototype,"valueType",void 0),I([Dt("valueType",["description"])],Ga.prototype,"readValueType",null),I([O({type:Boolean,json:{read:!1}})],Ga.prototype,"visible",void 0),Ga=tF=I([De("esri.layers.support.Field")],Ga);const ZG=Ga;var iF;let yb=iF=class extends St{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new iF({mapLayerId:t,gdbVersion:e})}};I([si({mapLayer:"map-layer"})],yb.prototype,"type",void 0),I([O({type:Ss,json:{write:!0}})],yb.prototype,"mapLayerId",void 0),I([O({type:String,json:{write:!0}})],yb.prototype,"gdbVersion",void 0),yb=iF=I([De("esri.layers.support.source.MapLayerSource")],yb);var nF;let vp=nF=class extends St{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:n,geometryType:s}=this,r={workspaceId:t,query:e,oidFields:i,spatialReference:(n==null?void 0:n.clone())??void 0,geometryType:s};return new nF(r)}};I([si({queryTable:"query-table"})],vp.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],vp.prototype,"workspaceId",void 0),I([O({type:String,json:{write:!0}})],vp.prototype,"query",void 0),I([O({type:String,json:{write:!0}})],vp.prototype,"oidFields",void 0),I([O({type:Gi,json:{write:!0}})],vp.prototype,"spatialReference",void 0),I([si(i8e)],vp.prototype,"geometryType",void 0),vp=nF=I([De("esri.layers.support.source.QueryTableDataSource")],vp);var sF;let vb=sF=class extends St{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new sF({workspaceId:t,dataSourceName:e})}};I([si({raster:"raster"})],vb.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],vb.prototype,"dataSourceName",void 0),I([O({type:String,json:{write:!0}})],vb.prototype,"workspaceId",void 0),vb=sF=I([De("esri.layers.support.source.RasterDataSource")],vb);var rF;let fy=rF=class extends St{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new rF({workspaceId:t,gdbVersion:e,dataSourceName:i})}};I([si({table:"table"})],fy.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],fy.prototype,"workspaceId",void 0),I([O({type:String,json:{write:!0}})],fy.prototype,"gdbVersion",void 0),I([O({type:String,json:{write:!0}})],fy.prototype,"dataSourceName",void 0),fy=rF=I([De("esri.layers.support.source.TableDataSource")],fy);var oF,aF;const WFe=Ta()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Sc=oF=class extends St{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return yJ()(t,e,i)}castLeftTableSource(t){return Ku(lF(),t)}readRightTableSource(t,e,i){return yJ()(t,e,i)}castRightTableSource(t){return Ku(lF(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:n,joinType:s}=this,r={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(n==null?void 0:n.clone())??void 0,joinType:s};return new oF(r)}};I([si({joinTable:"join-table"})],Sc.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],Sc.prototype,"leftTableKey",void 0),I([O({type:String,json:{write:!0}})],Sc.prototype,"rightTableKey",void 0),I([O({json:{write:!0}})],Sc.prototype,"leftTableSource",void 0),I([Dt("leftTableSource")],Sc.prototype,"readLeftTableSource",null),I([Es("leftTableSource")],Sc.prototype,"castLeftTableSource",null),I([O({json:{write:!0}})],Sc.prototype,"rightTableSource",void 0),I([Dt("rightTableSource")],Sc.prototype,"readRightTableSource",null),I([Es("rightTableSource")],Sc.prototype,"castRightTableSource",null),I([si(WFe)],Sc.prototype,"joinType",void 0),Sc=oF=I([De("esri.layers.support.source.JoinTableDataSource")],Sc);let lN=null;function yJ(){return lN||(lN=vx({types:lF()})),lN}let cN=null;function lF(){return cN||(cN={key:"type",base:null,typeMap:{"data-layer":Vh,"map-layer":yb}}),cN}const ZFe={key:"type",base:null,typeMap:{"join-table":Sc,"query-table":vp,raster:vb,table:fy}};let Vh=aF=class extends St{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new aF({fields:t,dataSource:e})}};I([si({dataLayer:"data-layer"})],Vh.prototype,"type",void 0),I([O({type:[ZG],json:{write:!0}})],Vh.prototype,"fields",void 0),I([O({types:ZFe,json:{write:!0}})],Vh.prototype,"dataSource",void 0),Vh=aF=I([De("esri.layers.support.source.DataLayerSource")],Vh),Vh.from=Qo(Vh);let py=class extends Un(St){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};I([O({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],py.prototype,"onFields",void 0),I([O({type:String,json:{write:!0}})],py.prototype,"operator",void 0),I([O({type:String,json:{write:!0}})],py.prototype,"searchTerm",void 0),I([O({type:String,json:{write:!0}})],py.prototype,"searchType",void 0),py=I([De("esri.rest.support.FullTextSearch")],py);const KFe=py;var cF;const vJ=new mn({upperLeft:"upper-left",lowerLeft:"lower-left"});let my=cF=class extends St{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new cF(Ue({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};I([O({type:dr,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],my.prototype,"extent",void 0),I([O({type:["view","edit"],json:{write:!0}})],my.prototype,"mode",void 0),I([O({type:String,json:{read:vJ.read,write:vJ.write}})],my.prototype,"originPosition",void 0),I([O({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],my.prototype,"tolerance",void 0),my=cF=I([De("esri.rest.support.QuantizationParameters")],my);const JFe=my,QFe=new mn({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var uF;const _J=new mn({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let kh=uF=class extends St{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=Ue(t))}clone(){return new uF({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Ue(this.statisticParameters)})}};I([O({type:Number,json:{write:!0}})],kh.prototype,"maxPointCount",void 0),I([O({type:Number,json:{write:!0}})],kh.prototype,"maxRecordCount",void 0),I([O({type:Number,json:{write:!0}})],kh.prototype,"maxVertexCount",void 0),I([O({type:String,json:{write:!0}})],kh.prototype,"onStatisticField",void 0),I([O({type:String,json:{write:!0}})],kh.prototype,"outStatisticFieldName",void 0),I([O({type:String,json:{read:{source:"statisticType",reader:_J.read},write:{target:"statisticType",writer:_J.write}}})],kh.prototype,"statisticType",void 0),I([O({type:Object})],kh.prototype,"statisticParameters",void 0),I([zt("statisticParameters")],kh.prototype,"writeStatisticParameters",null),kh=uF=I([De("esri.rest.support.StatisticDefinition")],kh);const eze=kh;var LI;const tze=new mn({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let pi=LI=class extends St{static from(t){return qC(LI,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const n in t){const s=t[n];Array.isArray(s)?i[n]=s.map(r=>r instanceof Date?r.getTime():r):s instanceof Date?i[n]=s.getTime():i[n]=s}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new LI(Ue({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};pi.MAX_MAX_RECORD_COUNT_FACTOR=5,I([O({json:{write:!0}})],pi.prototype,"aggregateIds",void 0),I([O({type:Boolean,json:{write:!0}})],pi.prototype,"cacheHint",void 0),I([O({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"compactGeometryEnabled",void 0),I([O({json:{write:!0}})],pi.prototype,"datumTransformation",void 0),I([Es("datumTransformation")],pi.prototype,"castDatumTransformation",null),I([O({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"defaultSpatialReferenceEnabled",void 0),I([O({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],pi.prototype,"distance",void 0),I([O({type:Vh,json:{write:!0}})],pi.prototype,"dynamicDataSource",void 0),I([O({type:String,json:{write:!0}})],pi.prototype,"formatOf3DObjects",void 0),I([O({type:[KFe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],pi.prototype,"fullText",void 0),I([O({type:String,json:{write:!0}})],pi.prototype,"gdbVersion",void 0),I([O({types:WC,json:{read:XC,write:!0}})],pi.prototype,"geometry",void 0),I([O({type:Number,json:{write:!0}})],pi.prototype,"geometryPrecision",void 0),I([O({type:[String],json:{write:!0}})],pi.prototype,"groupByFieldsForStatistics",void 0),I([O({type:String,json:{write:!0}})],pi.prototype,"having",void 0),I([O({type:Date})],pi.prototype,"historicMoment",void 0),I([zt("historicMoment")],pi.prototype,"writeHistoricMoment",null),I([O({type:Number,json:{write:!0}})],pi.prototype,"maxAllowableOffset",void 0),I([O({type:Number,cast:t=>t<1?1:t>pi.MAX_MAX_RECORD_COUNT_FACTOR?pi.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],pi.prototype,"maxRecordCountFactor",void 0),I([O({type:["xyFootprint"],json:{write:!0}})],pi.prototype,"multipatchOption",void 0),I([O({type:Number,json:{read:{source:"resultRecordCount"}}})],pi.prototype,"num",void 0),I([O({json:{write:!0}})],pi.prototype,"objectIds",void 0),I([O({type:[String],json:{write:!0}})],pi.prototype,"orderByFields",void 0),I([O({type:[String],json:{write:!0}})],pi.prototype,"outFields",void 0),I([O({type:Gi,json:{name:"outSR",write:!0}})],pi.prototype,"outSpatialReference",void 0),I([O({type:[eze],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],pi.prototype,"outStatistics",void 0),I([O({json:{write:!0}})],pi.prototype,"parameterValues",void 0),I([zt("parameterValues")],pi.prototype,"writeParameterValues",null),I([O({type:Yi,json:{write:!0}})],pi.prototype,"pixelSize",void 0),I([O({type:JFe,json:{write:!0}})],pi.prototype,"quantizationParameters",void 0),I([O({type:[Object],json:{write:!0}})],pi.prototype,"rangeValues",void 0),I([O({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],pi.prototype,"relationParameter",void 0),I([O({type:String,json:{write:!0}})],pi.prototype,"resultType",void 0),I([O({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnCentroid",void 0),I([O({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnDistinctValues",void 0),I([O({type:Boolean,json:{default:!0,write:!0}})],pi.prototype,"returnExceededLimitFeatures",void 0),I([O({type:Boolean,json:{write:!0}})],pi.prototype,"returnGeometry",void 0),I([O({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnQueryGeometry",void 0),I([O({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnM",void 0),I([O({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pi.prototype,"returnZ",void 0),I([O({type:Gi,json:{write:!0}})],pi.prototype,"sourceSpatialReference",void 0),I([si(QFe,{ignoreUnknown:!1,name:"spatialRel"})],pi.prototype,"spatialRelationship",void 0),I([O({type:Number,json:{read:{source:"resultOffset"}}})],pi.prototype,"start",void 0),I([zt("start"),zt("num")],pi.prototype,"writeStart",null),I([O({type:String,json:{write:!0}})],pi.prototype,"sqlFormat",void 0),I([O({type:String,json:{write:!0}})],pi.prototype,"text",void 0),I([O({type:O0,json:{write:!0}})],pi.prototype,"timeExtent",void 0),I([O({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"timeReferenceUnknownClient",void 0),I([si(tze,{ignoreUnknown:!1}),O({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],pi.prototype,"units",void 0),I([O({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],pi.prototype,"where",void 0),I([zt("where")],pi.prototype,"writeWhere",null),pi=LI=I([De("esri.rest.support.Query")],pi);const Q0=pi;var hF;let Ng=hF=class extends St{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new hF({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};I([O({type:String,json:{write:!0}})],Ng.prototype,"description",void 0),I([O({type:String,json:{write:!0}})],Ng.prototype,"label",void 0),I([O({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Ng.prototype,"minValue",void 0),I([O({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Ng.prototype,"maxValue",void 0),I([O(XG)],Ng.prototype,"symbol",void 0),Ng=hF=I([De("esri.renderers.support.ClassBreakInfo")],Ng);const N6=Ng,ize=Ta()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let dS=class extends Un(St){constructor(e){super(e),this.title=null,this.order=null}};I([O({type:String,json:{write:!0}})],dS.prototype,"title",void 0),I([si(ize)],dS.prototype,"order",void 0),dS=I([De("esri.renderers.support.RendererLegendOptions")],dS);const KG=dS;var dF;const gpe="log",FI="percent-of-total",zI="field",q4=new mn({esriNormalizeByLog:gpe,esriNormalizeByPercentOfTotal:FI,esriNormalizeByField:zI}),nze=Qo(N6);let so=dF=class extends Lx(wm){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let n=e.minValue;return t.map(s=>{const r=new N6;return r.read(s,i),r.minValue==null&&(r.minValue=n),r.maxValue==null&&(r.maxValue=r.minValue),n=r.maxValue,r})}writeClassBreakInfos(t,e,i,n){const s=t.map(r=>r.write({},n));this._areClassBreaksConsecutive()&&s.forEach(r=>delete r.classMinValue),e[i]=s}castField(t){return t==null?t:typeof t=="function"?(qt.getLogger(this).error(".field: field must be a string value"),null):zC(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&zI||i&&FI||null,e&&i&&qt.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==zI&&t!==FI||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let n=null;n=typeof t=="number"?new N6({minValue:t,maxValue:e,symbol:tpe(i)}):nze(Ue(t)),this.classBreakInfos.push(n),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let n=0;n<i;n++){const s=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(s[0]===t&&s[1]===e){this.classBreakInfos.splice(n,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&qt.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await vv()});const n=this.getBreakIndex(t,i);return n!==-1?this.classBreakInfos[n]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void qt.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const s=await vv(),{arcadeUtils:r}=s;r.hasGeometryOperations(this.valueExpression)&&await r.enableGeometryOperations(),i={...i,arcade:s}}const n=this.getBreakIndex(t,i);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((n,s)=>n+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new dF({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Ue(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Ue(this.visualVariables),legendOptions:Ue(this.legendOptions),authoringInfo:Ue(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(n=>n.collectRequiredFields(t,e)),nl(t,e,this.valueExpression)];El(t,e,this.field),El(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:n,spatialReference:s,arcade:r,timeZone:o}=e??{},{valueExpression:l}=this;let c=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const f=r.arcadeUtils;if(!c){const _=f.createSyntaxTree(l);c=f.createFunction(_),this._compiledValueExpression.compiledFunction=c}this._compiledValueExpression.valueExpression=l;const y=f.executeFunction(c,f.createExecContext(t,f.getViewInfo({viewingMode:i,scale:n,spatialReference:s}),o));return this._getBreakIndexfromInfos(y)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,n=this.normalizationType;let s=parseFloat(i[e]);if(n){const r=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(n===gpe)s=Math.log(s)*Math.LOG10E;else if(n!==FI||r==null||isNaN(r)){if(n===zI&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/r*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]<=t&&(e?t<=n[1]:t<n[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};I([O(WG)],so.prototype,"backgroundFillSymbol",void 0),I([O({type:[N6]})],so.prototype,"classBreakInfos",void 0),I([Dt("classBreakInfos")],so.prototype,"readClassBreakInfos",null),I([zt("classBreakInfos")],so.prototype,"writeClassBreakInfos",null),I([O({type:String,json:{write:!0}})],so.prototype,"defaultLabel",void 0),I([O($A)],so.prototype,"defaultSymbol",void 0),I([O({type:String,json:{write:!0}})],so.prototype,"field",void 0),I([Es("field")],so.prototype,"castField",null),I([O({type:Boolean})],so.prototype,"isMaxInclusive",void 0),I([O({type:KG,json:{write:!0}})],so.prototype,"legendOptions",void 0),I([O({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],so.prototype,"minValue",null),I([O({type:String,json:{write:!0}})],so.prototype,"normalizationField",void 0),I([O({type:Number,json:{write:!0}})],so.prototype,"normalizationTotal",void 0),I([O({type:q4.apiValues,value:null,json:{type:q4.jsonValues,read:q4.read,write:q4.write}})],so.prototype,"normalizationType",null),I([si({classBreaks:"class-breaks"})],so.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],so.prototype,"valueExpression",void 0),I([O({type:String,json:{write:!0}})],so.prototype,"valueExpressionTitle",void 0),so=dF=I([De("esri.renderers.ClassBreaksRenderer")],so);const ype=so,fF=-3,sze=fF-1;var $p;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})($p||($p={}));let rze=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Yy,this._users=new Yy}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const n=this._db.get(e.id+i);return(n==null?void 0:n.size)??0}put(e,i,n,s,r){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==n&&this._notifyRemove(i,o.entry,o.size,$p.ALL)),s>this._maxSize)return void this._notifyRemove(i,n,s,$p.ALL);if(n===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${i}`),void this._notifyRemove(i,n,0,$p.ALL);const l=1+Math.max(r,sze)-fF;this._db.set(i,new oze(n,s,l)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,i,n,s){i=e.id+i;const r=this._db.get(i);if(r&&r.entry===n){for(this._size-=r.size,e.size-=r.size;s>this._maxSize;){const o=this._notifyRemove(i,n,s,$p.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);s=o}r.size=s,this._size+=s,e.size+=s,this._checkSize()}}pop(e,i){i=e.id+i;const n=this._db.get(i);if(n)return this._size-=n.size,e.size-=n.size,this._db.delete(i),++this._hit,n.entry;++this._miss}get(e,i){i=e.id+i;const n=this._db.get(i);if(n!==void 0)return this._db.delete(i),n.lives=n.lifetime,this._db.set(i,n),++this._hit,n.entry;++this._miss}peek(e,i){const n=this._db.get(e.id+i);return n?++this._hit:++this._miss,n==null?void 0:n.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},n=new Array;this._db.forEach((o,l)=>{const c=o.lifetime;n[c]=(n[c]||0)+o.size,this._users.forAll(f=>{const{id:y,name:_}=f;if(l.startsWith(y)){const x=i[_]||0;i[_]=x+o.size}})});const s={};this._users.forAll(o=>{const l=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const c=i[l]||0;i[l]=c,s[l]=Math.round(100*o.hitRate)+"%"}else s[l]="0%"});const r=Object.keys(i);r.sort((o,l)=>i[l]-i[o]),r.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+s[o]);for(let o=n.length-1;o>=0;--o){const l=n[o];l&&(e["Priority "+(o+fF-1)]=Math.round(l/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((n,s)=>{s.startsWith(i)&&(this._size-=n.size,this._db.delete(s),this._notifyRemove(s,n.entry,n.size,$p.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,$p.ALL)),this._users.forAll(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,n,s){let r;return this._removeFuncs.some(o=>{if(e.startsWith(o[0])){const l=o[1](i,s,n);return typeof l=="number"&&(r=l),!0}return!1}),r}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e)),this._checkSizeLimits()}_checkSizeLimits(e){const i=e??this;if(i.maxSize<0||i.size<=i.maxSize)return;const n=e==null?void 0:e.id;let s=!0;for(;s;){s=!1;for(const[r,o]of this._db)if(o.lifetime===0&&(!n||r.startsWith(n))){if(this._purgeItem(r,o,e),i.size<=.9*i.maxSize)return;s||(s=this._db.has(r))}}for(const[r,o]of this._db)if((!n||r.startsWith(n))&&(this._purgeItem(r,o,e),i.size<=.9*i.maxSize))return}_purgeItem(e,i,n=this._users.find(s=>e.startsWith(s.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,n&&(n.size-=i.size);const s=this._notifyRemove(e,i.entry,i.size,$p.SOME);s!=null&&s>0&&(this._size+=s,n&&(n.size+=s),i.lives=i.lifetime,i.size=s,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},oze=class{constructor(e,i,n){this.entry=e,this.size=i,this.lifetime=n,this.lives=n}},aze=class{constructor(e,i){this._storage=new rze,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,n=1){this._storage.put(this,e,i,n,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},vpe=class pF{constructor(e,i,n=""){this.major=e,this.minor=i,this._context=n}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",n=this._context&&this._context+" ";throw new rt(i+"unsupported-version",`Required major ${n}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new pF(this.major,this.minor,this._context)}static parse(e,i=""){const[n,s]=e.split("."),r=/^\s*\d+\s*$/;if(!(n!=null&&n.match)||!r.test(n))throw new rt((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(s!=null&&s.match)||!r.test(s))throw new rt((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(n,10),l=parseInt(s,10);return new pF(o,l,i)}},zA=class{};function lze(t){return t instanceof xx?t===zA.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function Xgt(t){return lze(t)?zA.instance:t}zA.instance=new Hc("Etc/UTC");function cze(t){return"timeZone"in t}function uze(t){return"timeZone"in t}function hze(t){return"dateFieldsTimeZone"in t}const dze=new Map;let _pe=class qI{static fromJSON(e){return new qI(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new qI(e.fields??[],xJ(e))}static fromLayerJSON(e){return new qI(e.fields??[],xJ(e))}constructor(e=[],i){var s;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const n=[];for(const r of this.fields){const o=r==null?void 0:r.name,l=bJ(o);if(o&&l){const c=My(o);this._fieldsMap.set(o,r),this._fieldsMap.set(c,r),this._normalizedFieldsMap.set(l,r),n.push(`${c}:${r.type}:${(s=this._timeZoneByFieldName)==null?void 0:s.get(o)}`),BOe(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):yG(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),AK(r)||kK(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}n.sort(),this.uid=n.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)AK(e)||kK(e)||e.nullable||DOe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(My(e))??this._normalizedFieldsMap.get(bJ(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(qt.getLogger("esri.layers.support.FieldsIndex").error(new rt("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Sf):bpe.has(i.type)?mv:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===mv?zA.instance:i===Sf?Xo.utcInstance:uV(dze,i,()=>Hc.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return HOe(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(e=>Q9(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function My(t){return t.trim().toLowerCase()}function bJ(t){var e;return((e=yOe(t))==null?void 0:e.toLowerCase())??""}const bpe=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function xJ(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:n,editFieldsInfo:s}=t,r=(n?"startField"in n?n.startField:n.startTimeField:"")??"",o=(n?"endField"in n?n.endField:n.endTimeField:"")??"",l=hze(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?tI(t.dateFieldsTimeReference):null,c=s?cze(s)?s.timeZone??l:s.dateFieldsTimeReference?tI(s.dateFieldsTimeReference):l??Sf:null,f=n?uze(n)?n.timeZone??l:n.timeReference?tI(n.timeReference):l:null,y=new Map([[My((s==null?void 0:s.creationDateField)??""),c],[My((s==null?void 0:s.editDateField)??""),c],[My(r),f],[My(o),f]]);for(const{name:_,type:x}of t.fields)if(bpe.has(x))e.set(_,mv);else if(x!=="date"&&x!=="esriFieldTypeDate")e.set(_,null);else if(i)e.set(_,mv);else{const S=y.get(My(_??""))??l;e.set(_,S)}return e}function W2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function fze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function JG(t,e,i,n,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t}function xpe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function wpe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function Spe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function Epe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function pze(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function mze(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function gze(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function yze(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function vze(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Cpe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function _ze(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t}function Ppe(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(i*i+n*n+s*s+r*r)}function Tpe(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2],r=e[3]-t[3];return i*i+n*n+s*s+r*r}function QG(t){const e=t[0],i=t[1],n=t[2],s=t[3];return Math.sqrt(e*e+i*i+n*n+s*s)}function ej(t){const e=t[0],i=t[1],n=t[2],s=t[3];return e*e+i*i+n*n+s*s}function bze(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function xze(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Ipe(t,e){const i=e[0],n=e[1],s=e[2],r=e[3];let o=i*i+n*n+s*s+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=n*o,t[2]=s*o,t[3]=r*o),t}function tj(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function qA(t,e,i,n){const s=e[0],r=e[1],o=e[2],l=e[3];return t[0]=s+n*(i[0]-s),t[1]=r+n*(i[1]-r),t[2]=o+n*(i[2]-o),t[3]=l+n*(i[3]-l),t}function wze(t,e=1){const i=KC;let n,s,r,o,l,c;do n=2*i()-1,s=2*i()-1,l=n*n+s*s;while(l>=1);do r=2*i()-1,o=2*i()-1,c=r*r+o*o;while(c>=1);const f=Math.sqrt((1-l)/c);return t[0]=e*n,t[1]=e*s,t[2]=e*r*f,t[3]=e*o*f,t}function Sze(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3];return t[0]=i[0]*n+i[4]*s+i[8]*r+i[12]*o,t[1]=i[1]*n+i[5]*s+i[9]*r+i[13]*o,t[2]=i[2]*n+i[6]*s+i[10]*r+i[14]*o,t[3]=i[3]*n+i[7]*s+i[11]*r+i[15]*o,t}function Eze(t,e,i){const n=e[0],s=e[1],r=e[2],o=i[0],l=i[1],c=i[2],f=i[3],y=f*n+l*r-c*s,_=f*s+c*n-o*r,x=f*r+o*s-l*n,S=-o*n-l*s-c*r;return t[0]=y*f+S*-o+_*-c-x*-l,t[1]=_*f+S*-l+x*-o-y*-c,t[2]=x*f+S*-c+y*-l-_*-o,t[3]=e[3],t}function Cze(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Mpe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function u5(t,e){const i=t[0],n=t[1],s=t[2],r=t[3],o=e[0],l=e[1],c=e[2],f=e[3],y=ho();return Math.abs(i-o)<=y*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-l)<=y*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=y*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(r-f)<=y*Math.max(1,Math.abs(r),Math.abs(f))}const Pze=wpe,Tze=Spe,Ize=Epe,Mze=Ppe,Aze=Tpe,kze=QG,Dze=ej;Object.freeze(Object.defineProperty({__proto__:null,add:xpe,ceil:pze,copy:W2,copyVec3:fze,dist:Mze,distance:Ppe,div:Ize,divide:Epe,dot:tj,equals:u5,exactEquals:Mpe,floor:mze,inverse:xze,len:kze,length:QG,lerp:qA,max:yze,min:gze,mul:Tze,multiply:Spe,negate:bze,normalize:Ipe,random:wze,round:vze,scale:Cpe,scaleAndAdd:_ze,set:JG,sqrDist:Aze,sqrLen:Dze,squaredDistance:Tpe,squaredLength:ej,str:Cze,sub:Pze,subtract:wpe,transformMat4:Sze,transformQuat:Eze},Symbol.toStringTag,{value:"Module"}));function Em(){return[0,0,0,0]}function Nze(t){return[t[0],t[1],t[2],t[3]]}function Yu(t,e,i,n){return[t,e,i,n]}function Oze(t,e,i,n){return[t,e,i,n]}function Ape(t,e=Em()){const i=Math.min(4,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function $ze(t,e){return new Float64Array(t,e,4)}function kpe(){return Em()}function Dpe(){return Yu(1,1,1,1)}function Npe(){return Yu(1,0,0,0)}function Ope(){return Yu(0,1,0,0)}function $pe(){return Yu(0,0,1,0)}function Rpe(){return Yu(0,0,0,1)}const Rze=kpe(),Lze=Dpe(),Fze=Npe(),zze=Ope(),qze=$pe(),Vze=Rpe();Object.freeze(Object.defineProperty({__proto__:null,ONES:Lze,UNIT_W:Vze,UNIT_X:Fze,UNIT_Y:zze,UNIT_Z:qze,ZEROS:Rze,clone:Nze,create:Em,createView:$ze,freeze:Oze,fromArray:Ape,fromValues:Yu,ones:Dpe,unitW:Rpe,unitX:Npe,unitY:Ope,unitZ:$pe,zeros:kpe},Symbol.toStringTag,{value:"Module"}));function Lpe(t){return"r"in t&&"g"in t&&"b"in t}function Fpe(t){return"h"in t&&"s"in t&&"v"in t}function zpe(t){return"l"in t&&"a"in t&&"b"in t}function qpe(t){return"l"in t&&"c"in t&&"h"in t}function Gze(t){return"x"in t&&"y"in t&&"z"in t}const jze=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Bze=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Vpe(t,e){const i=[];let n,s;if(t[0].length!==e.length)throw new Error("dimensions do not match");const r=t.length,o=t[0].length;let l=0;for(n=0;n<r;n++){for(l=0,s=0;s<o;s++)l+=t[n][s]*e[s];i.push(l)}return i}function Gpe(t){const e=[t.r/255,t.g/255,t.b/255].map(n=>n<=.04045?n/12.92:((n+.055)/1.055)**2.4),i=Vpe(jze,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function ij(t){const e=Vpe(Bze,[t.x/100,t.y/100,t.z/100]).map(i=>{const n=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(n,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function jpe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function Bpe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(n=>n>6/29?n**3:3*(6/29)**2*(n-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function Hze(t){const e=t.l,i=t.a,n=t.b,s=Math.sqrt(i*i+n*n);let r=Math.atan2(n,i);return r=r>0?r:r+2*Math.PI,{l:e,c:s,h:r}}function Uze(t){const e=t.l,i=t.c,n=t.h;return{l:e,a:i*Math.cos(n),b:i*Math.sin(n)}}function Yze(t){return jpe(Gpe(t))}function Xze(t){return ij(Bpe(t))}function Wze(t){return Hze(jpe(Gpe(t)))}function Zze(t){return ij(Bpe(Uze(t)))}function Kze(t){const e=t.r,i=t.g,n=t.b,s=Math.max(e,i,n),r=s-Math.min(e,i,n);let o=s,l=r===0?0:s===e?(i-n)/r%6:s===i?(n-e)/r+2:(e-i)/r+4,c=r===0?0:r/o;return l<0&&(l+=6),l*=60,c*=100,o*=100/255,{h:l,s:c,v:o}}function Jze(t){const e=(t.h+360)%360/60,i=t.s/100,n=t.v/100*255,s=n*i,r=s*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:s,g:r,b:0};break;case 1:o={r,g:s,b:0};break;case 2:o={r:0,g:s,b:r};break;case 3:o={r:0,g:r,b:s};break;case 4:o={r,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:r};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+n-s),o.g=Math.round(o.g+n-s),o.b=Math.round(o.b+n-s),o}function h5(t){return Lpe(t)?t:qpe(t)?Zze(t):zpe(t)?Xze(t):Gze(t)?ij(t):Fpe(t)?Jze(t):t}function Qze(t){return Fpe(t)?t:Kze(h5(t))}function eqe(t){return zpe(t)?t:Yze(h5(t))}function Wgt(t){return qpe(t)?t:Wze(h5(t))}function tqe(t){let{r:e,g:i,b:n,a:s}=t;return s<1&&(e=Math.round(s*e+255*(1-s)),i=Math.round(s*i+255*(1-s)),n=Math.round(s*n+255*(1-s))),new fi({r:e,g:i,b:n})}function iqe(t,e){const{r:i,g:n,b:s}=e!=null&&e.ignoreAlpha?t:tqe(t);return .2126*i+.7152*n+.0722*s}var mF;function Zgt(t,e=mF.High){return iqe(t,{ignoreAlpha:!0})>e?new fi([0,0,0,t.a]):new fi([255,255,255,t.a])}function Kgt(t,e){const i=eqe(t);i.l*=1-e;const n=h5(i),s=t.clone();return s.setColor(n),s.a=t.a,s}function Jgt(t,e){const i=t.clone();return i.a*=e,i}function Qgt(t,e){const i=Qze(t);i.s*=e;const n=h5(i),s=t.clone();return s.setColor(n),s.a=t.a,s}function e0t(t){return fi.toUnitRGBA(t)}function t0t(t){return Yu(t[0],t[1],t[2],t.length>3?t[3]:1)}function i0t(t,e){const i=fi.toUnitRGBA(t);return i[3]*=e,i}function n0t(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map(n=>typeof n=="string"?new fi(n):n)).length===1||e===1){const n=[],s=t[0];for(let r=0;r<e;r++)n.push(s.clone());return n}if(i.shuffle&&(t=eae(Ue(t),i.seed)),t.length>=e){const n=[],s=(t.length-1)/(e-1);for(let r=0;r<e;r++){const o=Math.round(r*s);n.push(t[o].clone())}return n}return nqe(t,e,i)}function nqe(t,e,i={}){const n=[],s=t.length-1,r=Math.ceil((e-t.length)/s);e:for(let o=0;o<s;o++){const l=t[o],c=t[o+1];for(let f=1;f<=r;f++){const y=f/(r+1);if(n.push(sqe(l,c,y,i)),n.length+t.length===e)break e}}return[...t.map(o=>o.clone()),...eae(n,i.seed??1)]}(function(t){t[t.Low=160]="Low",t[t.High=225]="High"})(mF||(mF={}));const uN=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function sqe(t,e,i,n={}){const s=t.r,r=t.g,o=t.b,l=e.r,c=e.g,f=e.b,y=Math.round(s+(l-s)*i),_=Math.round(r+(c-r)*i),x=Math.round(o+(f-o)*i);if(!n.offset)return new fi([y,_,x]);const S=Qoe(n.seed);return new fi([uN(y,S),uN(_,S),uN(x,S)])}var wJ,SJ,EJ,CJ,PJ,TJ,IJ,MJ,AJ,kJ,gF,yF,DJ,NJ,OJ,$J,RJ,LJ,FJ,zJ,qJ,VJ,GJ,jJ,BJ,HJ,UJ,YJ,XJ,WJ,ZJ,KJ,JJ,QJ,eQ,tQ,iQ,nQ,sQ,rQ,oQ,aQ,lQ,cQ,uQ,hQ,dQ,fQ,pQ,mQ,gQ,yQ,vQ,_Q,bQ,xQ,wQ,SQ,EQ,CQ,PQ,TQ;(function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"})(wJ||(wJ={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(SJ||(SJ={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}(EJ||(EJ={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}(CJ||(CJ={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(PJ||(PJ={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(TJ||(TJ={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(IJ||(IJ={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(MJ||(MJ={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}(AJ||(AJ={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(kJ||(kJ={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(gF||(gF={})),function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"}(yF||(yF={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(DJ||(DJ={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(NJ||(NJ={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(OJ||(OJ={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}($J||($J={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(RJ||(RJ={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(LJ||(LJ={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(FJ||(FJ={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(zJ||(zJ={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}(qJ||(qJ={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(VJ||(VJ={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(GJ||(GJ={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(jJ||(jJ={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(BJ||(BJ={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(HJ||(HJ={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}(UJ||(UJ={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(YJ||(YJ={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(XJ||(XJ={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(WJ||(WJ={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(ZJ||(ZJ={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(KJ||(KJ={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(JJ||(JJ={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AloneLine=1]="AloneLine"}(QJ||(QJ={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(eQ||(eQ={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(tQ||(tQ={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}(iQ||(iQ={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(nQ||(nQ={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(sQ||(sQ={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(rQ||(rQ={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(oQ||(oQ={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}(aQ||(aQ={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(lQ||(lQ={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(cQ||(cQ={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(uQ||(uQ={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(hQ||(hQ={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(dQ||(dQ={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(fQ||(fQ={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(pQ||(pQ={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(mQ||(mQ={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(gQ||(gQ={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(yQ||(yQ={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(vQ||(vQ={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(_Q||(_Q={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(bQ||(bQ={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(xQ||(xQ={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(wQ||(wQ={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(SQ||(SQ={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(EQ||(EQ={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}(CQ||(CQ={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(PQ||(PQ={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(TQ||(TQ={}));const rqe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},vF={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:gF.Loop,repeatdelay:0,easing:yF.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function oqe(t){return typeof t=="function"}function s0t(t,e,i,n){return oqe(t)?t(e,i,n):t}function r0t(t){return[t.r,t.g,t.b,t.a]}const aqe=` /-,
`;function IQ(t){let e=t.length;for(;e--;)if(!aqe.includes(t.charAt(e)))return!1;return!0}function lqe(t,e){const i=[];let n=0,s=-1;do if(s=t.indexOf("[",n),s>=n){if(s>n){const r=t.slice(n,s);i.push([r,null,IQ(r)])}if(n=s+1,s=t.indexOf("]",n),s>=n){if(s>n){const r=e[t.slice(n,s)];r&&i.push([null,r,!1])}n=s+1}}while(s!==-1);if(n<t.length){const r=t.slice(n);i.push([r,null,IQ(r)])}return i}function cqe(t,e,i,n){let s="",r=null;for(const o of e){const[l,c,f]=o;if(l)f?r=l:(r&&(s+=r,r=null),s+=l);else{let y=c;i!=null&&(y=Hpe(c,i));const _=t.attributes[y];_&&(r&&(s+=r,r=null),s+=_)}}return uqe(s,n)}function uqe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function o0t(t,e,i,n,s,r,o=!0){const l=e/s,c=i/r,f=Math.ceil(l/2),y=Math.ceil(c/2);for(let _=0;_<r;_++)for(let x=0;x<s;x++){const S=4*(x+(o?r-_-1:_)*s);let P=0,A=0,D=0,N=0,F=0,G=0,V=0;const B=(_+.5)*c;for(let W=Math.floor(_*c);W<(_+1)*c;W++){const J=Math.abs(B-(W+.5))/y,re=(x+.5)*l,ne=J*J;for(let oe=Math.floor(x*l);oe<(x+1)*l;oe++){let pe=Math.abs(re-(oe+.5))/f;const ce=Math.sqrt(ne+pe*pe);ce>=-1&&ce<=1&&(P=2*ce*ce*ce-3*ce*ce+1,P>0&&(pe=4*(oe+W*e),V+=P*t[pe+3],D+=P,t[pe+3]<255&&(P=P*t[pe+3]/250),N+=P*t[pe],F+=P*t[pe+1],G+=P*t[pe+2],A+=P))}}n[S]=N/A,n[S+1]=F/A,n[S+2]=G/A,n[S+3]=V/D}}function hqe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function a0t(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function l0t(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function c0t(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function u0t(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function dqe(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const h0t=(t,e=0)=>t==null||isNaN(t)?e:t,d0t=(t,e)=>t??e,f0t=(t,e)=>t??e,p0t=t=>t.tintColor?hqe(t.tintColor):[255,255,255,1],m0t=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function g0t(){return st(()=>import("./geometryEngineJSON-CnmWYlDh.js").then(t=>t.g),__vite__mapDeps([239,174]),import.meta.url)}function y0t(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function v0t(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function _0t(t){let e="normal",i="normal";if(t){const n=t.toLowerCase();n.includes("italic")?e="italic":n.includes("oblique")&&(e="oblique"),n.includes("bold")?i="bold":n.includes("light")&&(i="lighter")}return{style:e,weight:i}}function b0t(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function MQ(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=MQ(e);if(i!=null)return i}break;case"CIMTextSymbol":return MQ(t.symbol);case"CIMSolidFill":return t.color}return null}function AQ(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const n=AQ(i);if(n!=null)return n}break}case"CIMTextSymbol":return AQ(t.symbol);case"CIMSolidStroke":return t.color}}function kQ(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=kQ(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return kQ(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function x0t(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function w0t(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function fqe(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const S0t=t=>t.includes("data:image/svg+xml");function E0t(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function VA(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function C0t(t,e,i,n,s,r,o=!0){const{infos:l}=r;let c=1,f=0,y=0,_=0,x=1;for(const{absoluteAnchorPoint:A,offsetX:D,offsetY:N,rotation:F,size:G,frameHeight:V,rotateClockWise:B,scaleSymbolsProportionally:W}of l)x=A?1:c,y=OQ(D,N,f,x,y),_=NQ(D,N,f,x,_),V&&(W||o)&&(c*=G/V),f=$Q(F,B,f);const S=OQ(n,s,f,x,y),P=NQ(n,s,f,x,_);return{size:t*c,rotation:$Q(e,i,f),offsetX:S,offsetY:P}}function pqe(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>pqe(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function mqe(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...rqe[e]];const i=vF[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function gqe(t){return t.split(" ").map(e=>Number(e))}function yqe(t){return typeof t=="string"?gqe(t):t}function vqe(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=yqe(t.dashTemplate)),t}function _F(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return _F(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return _F(i.symbol)}}return"Normal"}function P0t(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const n=i.size??vF.CIMVectorMarker.size;n>e&&(e=n);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const n=i.width;n!=null&&n>e&&(e=n);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&dqe(i.markerPlacement)){const n=i.size??vF.CIMVectorMarker.size;n>e&&(e=n)}break;case"CIMPictureFill":{const n=i.height;n!=null&&n>e&&(e=n)}}}return e}}}function Hpe(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function _qe(t){return t.map(e=>({...e,propertyName:VA(e.propertyName)}))}function DQ(t){const e={};for(const i in t){const n=t[i];e[VA(i)]=n}return e}function NQ(t,e,i,n,s){const r=i*Math.PI/180;if(r){const o=Math.cos(r);return(Math.sin(r)*t+o*e)*n+s}return e*n+s}function OQ(t,e,i,n,s){const r=i*Math.PI/180;return r?(Math.cos(r)*t-Math.sin(r)*e)*n+s:t*n+s}function $Q(t,e,i){return e?i-t:i+t}function T0t(t,e,i){const n=i==="Color"||i==="TintColor"||i==="ToColor",s=i==="Rotation"||i==="Angle"||i==="ToRotation";let r=e[VA(i)];if(r!=null&&(n?r=[r[0]/255,r[1]/255,r[2]/255,r[3]/255]:s&&(r*=Math.PI/180)),r==null&&(r=mqe(e.type,i.toLowerCase()),r!=null&&(n?r=[r[0]/255,r[1]/255,r[2]/255,r[3]]:s&&(r*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const l=o[i];l==null||(typeof l=="string"||typeof l=="number"||Array.isArray(l)?(r=l,r!=null&&(n?r=[r[0]/255,r[1]/255,r[2]/255,r[3]/255]:s&&(r*=Math.PI/180))):(r={valueExpressionInfo:l,defaultValue:r},r!=null&&(n?r={type:"Process",op:"ArcadeColor",value:r}:s&&(r={type:"Process",op:"Divide",left:r,right:180/Math.PI}))))}}if(r==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return r}function I0t(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function bqe(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function d5(t){if(bqe(t))return t;const{originPosition:e,scale:i,translate:n}=t,s=i[0]??1,r=i[1]??1;return{originPosition:"lowerLeft",scale:[s,e==="lowerLeft"?r:-r,i[2]??1,i[3]??1],translate:[n[0]??0,n[1]??0,n[2]??0,n[3]??0]}}function xqe({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function wqe({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function Sqe({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function Eqe({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function f5({scale:t,translate:e},i){return i*t[0]+e[0]}function p5({scale:t,translate:e},i){return i*t[1]+e[1]}function VE({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function GE({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function nj(t,e){return t&&e?Iqe:t&&!e?Pqe:!t&&e?Tqe:Cqe}const Cqe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const n=e[0];let s=f5(t,n[0]),r=p5(t,n[1]);i[0]=[s,r];const{scale:o,originPosition:l}=t,c=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x]=e[y];s+=c*_,r+=f*x,i[y]=[s,r]}return i},Pqe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const n=e[0];let s=f5(t,n[0]),r=p5(t,n[1]);i[0]=[s,r,VE(t,n[2])];const{scale:o,originPosition:l}=t,c=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x,S]=e[y];s+=c*_,r+=f*x,i[y]=[s,r,VE(t,S)]}return i},Tqe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const n=e[0];let s=f5(t,n[0]),r=p5(t,n[1]);i[0]=[s,r,GE(t,n[2])];const{scale:o,originPosition:l}=t,c=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x,S]=e[y];s+=c*_,r+=f*x,i[y]=[s,r,GE(t,S)]}return i},Iqe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const n=e[0];let s=f5(t,n[0]),r=p5(t,n[1]);i[0]=[s,r,VE(t,n[2]),GE(t,n[3])];const{scale:o,originPosition:l}=t,c=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x,S,P]=e[y];s+=c*_,r+=f*x,i[y]=[s,r,VE(t,S),GE(t,P)]}return i};function Upe(t,e,i){const n=new Array(i.length);for(let s=0;s<i.length;s++)n[s]=e(t,i[s]);return n}function M0t(t,e,i){const n=d5(t);return e.x=xqe(n,i.x),e.y=wqe(n,i.y),i.z!=null&&(e.z=Sqe(n,i.z)),i.m!=null&&(e.m=Eqe(n,i.m)),e}function Mqe(t,e,i,n=(i==null?void 0:i.hasZ)??!1,s=(i==null?void 0:i.hasM)??!1){if(i!=null){const r=d5(t);e.points=nj(n,s)(r,i.points),e.hasZ=n,e.hasM=s}return e}function Aqe(t,e,i,n=(i==null?void 0:i.z)!=null,s=(i==null?void 0:i.m)!=null){if(i==null)return e;const r=d5(t);return e.x=f5(r,i.x),e.y=p5(r,i.y),n&&(e.z=VE(r,i.z)),s&&(e.m=GE(r,i.m)),e}function kqe(t,e,i,n=(i==null?void 0:i.hasZ)??!1,s=(i==null?void 0:i.hasM)??!1){if(i!=null){const r=d5(t);e.rings=Upe(r,nj(n,s),i.rings),e.hasZ=n,e.hasM=s}return e}function Dqe(t,e,i,n=(i==null?void 0:i.hasZ)??!1,s=(i==null?void 0:i.hasM)??!1){if(i!=null){const r=d5(t);e.paths=Upe(r,nj(n,s),i.paths),e.hasZ=n,e.hasM=s}return e}function Nqe(t,e,i,n,s){if(t==null)return null;const r=t.referencesGeometry()&&s?Oqe(e,n,s):e,o=t.repurposeFeature(r);try{return t.evaluate({...i,$feature:o},t.services)}catch(l){return qt.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const hN=new Map;function Oqe(t,e,i){const{transform:n,hasZ:s,hasM:r}=i;hN.has(e)||hN.set(e,$qe(e));const o=hN.get(e)(t.geometry,n,s,r);return{...t,geometry:o}}function $qe(t){const e={};switch(t){case"esriGeometryPoint":return(i,n,s,r)=>Aqe(n,e,i,s,r);case"esriGeometryPolygon":return(i,n,s,r)=>kqe(n,e,i,s,r);case"esriGeometryPolyline":return(i,n,s,r)=>Dqe(n,e,i,s,r);case"esriGeometryMultipoint":return(i,n,s,r)=>Mqe(n,e,i,s,r);default:return qt.getLogger("esri.views.2d.support.arcadeOnDemand").error(new rt("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const Rqe=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:n,a:s}=t;return[e,i,n,255*s]};let Ype=class ir{static findApplicableOverrides(e,i,n){if(e&&i){if(e.primitiveName){let s=!1;for(const r of n)if(r.primitiveName===e.primitiveName){s=!0;break}if(!s)for(const r of i)r.primitiveName===e.primitiveName&&n.push(r)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)ir.findApplicableOverrides(s,i,n);if(e.symbolLayers)for(const s of e.symbolLayers)ir.findApplicableOverrides(s,i,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const s of e.effects)ir.findApplicableOverrides(s,i,n);if(e.markerPlacement&&ir.findApplicableOverrides(e.markerPlacement,i,n),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const s of e.markerGraphics)ir.findApplicableOverrides(s,i,n),ir.findApplicableOverrides(s.symbol,i,n)}else e.type==="CIMCharacterMarker"?ir.findApplicableOverrides(e.symbol,i,n):e.type==="CIMHatchFill"?ir.findApplicableOverrides(e.lineSymbol,i,n):e.type==="CIMPictureMarker"&&ir.findApplicableOverrides(e.animatedSymbolProperties,i,n)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&vqe(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const n=DQ(e),s=e.primitiveName,r=[];for(const o of i)o.primitiveName===s&&r.push(DQ(o));return{type:"cim-effect-param",effect:n,overrides:_qe(r)}}static async resolveSymbolOverrides(e,i,n,s,r,o,l){if(!(e!=null&&e.symbol))return null;let{symbol:c,primitiveOverrides:f}=e;const y=!!f;if(!y&&!s)return c;c=Ue(c),f=Ue(f);let _=!0;if(i||(i={attributes:{}},_=!1),y){if(_||(f=f.filter(x=>{var S;return!((S=x.valueExpressionInfo)!=null&&S.expression.includes("$feature"))})),l||(f=f.filter(x=>{var S;return!((S=x.valueExpressionInfo)!=null&&S.expression.includes("$view"))})),f.length>0){const x={spatialReference:n,fields:fqe(i.attributes),geometryType:r};await ir.createRenderExpressions(f,x),ir.evaluateOverrides(f,i,r??"esriGeometryPoint",o,l)}ir.applyOverrides(c,f)}return s&&ir.applyDictionaryTextOverrides(c,i,s,null),c}static async createRenderExpressions(e,i){const n=[];for(const s of e){const r=s.valueExpressionInfo;if(!r||ir._expressionToRenderExpression.has(r.expression))continue;const o=fOe(r.expression,i.spatialReference,i.fields);n.push(o),o.then(l=>ir._expressionToRenderExpression.set(r.expression,l))}n.length>0&&await Promise.all(n)}static evaluateOverrides(e,i,n,s,r){const o={$view:{scale:r==null?void 0:r.scale}};for(const l of e){l.value&&typeof l.value=="object"&&Lpe(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=Rqe(l.value));const c=l.valueExpressionInfo;if(!c)continue;const f=ir._expressionToRenderExpression.get(c.expression);f&&(l.value=Nqe(f,i,o,n,s))}}static applyDictionaryTextOverrides(e,i,n,s,r="Normal"){if(e!=null&&e.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const l of o)l&&l.type==="CIMVectorMarker"&&ir.applyDictionaryTextOverrides(l,i,n,s,e.type==="CIMTextSymbol"?e.textCase:r)}break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)return;for(const l of o)l&&ir.applyDictionaryTextOverrides(l,i,n,s)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const l=lqe(o,n);e.textString=cqe(i,l,s,r)}}}}static applyOverrides(e,i,n,s){if(e.primitiveName){for(const r of i)if(r.primitiveName===e.primitiveName){const o=VA(r.propertyName);if(s&&s.push({cim:e,nocapPropertyName:o,value:e[o]}),n){let l=!1;for(const c of n)c.primitiveName===e.primitiveName&&(l=!0);l||n.push(r)}r.value!=null&&(e[o]=r.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const r of e.effects)ir.applyOverrides(r,i,n,s);if(e.symbolLayers)for(const r of e.symbolLayers)ir.applyOverrides(r,i,n,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const r of e.effects)ir.applyOverrides(r,i,n,s);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const r of e.markerGraphics)ir.applyOverrides(r,i,n,s),ir.applyOverrides(r.symbol,i,n,s)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const n of e)n.value!==void 0&&(i+=`${n.primitiveName}${n.propertyName}${JSON.stringify(n.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map(n=>Number(n));if(e==="Color"){const n=new fi(i).toRgba();return n[3]*=255,n}return i}};Ype._expressionToRenderExpression=new Map;const RQ="esri.renderers.support.DictionaryLoader",Lqe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Xpe=class{constructor(e,i,n){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new aze(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=n}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){var _;let n;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{n=await this._dictionaryPromise}catch(x){if(vd(x))return this._dictionaryPromise=null,null}const s=(_=this._dictionaryVersion)==null?void 0:_.greaterEqual(4,0),r={};if(this.fieldMap)for(const x of this._symbolFields){const S=Hpe(this.fieldMap[x],this._fieldIndex);if(S){const P=e.attributes[S];r[x]=s?P:P!=null?""+e.attributes[S]:""}else r[x]=""}let o=null;try{o=n==null?void 0:n(r,i)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const l=o.split(";"),c=[],f=[];for(let x=0;x<l.length;x++){const S=l[x];if(S){if(S.includes("po:")){const P=S.slice(3).split("|");if(P.length===3){const A=P[0],D=P[1];let N=P[2];const F="countrylabel";if(A===F&&D==="TextString"){if(this.fieldMap!=null){let G=this.fieldMap[F];G==null&&(G=F,this.fieldMap[G]=G),e.attributes[G]=N}continue}if(D==="DashTemplate")N=N.split(" ").map(G=>Number(G));else if(D==="Color"){const G=new fi(N).toRgba();N=[G[0],G[1],G[2],255*G[3]]}else N=Number(N);f.push({primitiveName:A,propertyName:D,value:N,defaultValue:null})}}else if(S.includes("|")){for(const P of S.split("|"))if(this._itemNames.has(P)){c.push(P);break}}else if(this._itemNames.has(S))c.push(S);else if(x===0){c.length=0;let P="Invalid_P";e.geometry!=null&&(l2(e.geometry)?P="Invalid_A":lG(e.geometry)&&(P="Invalid_L")),c.push(P);break}}}const y=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point";return this._cimPartsToCIMSymbol(e,c,f,y,i)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void qt.getLogger(RQ).error("no valid URL!");const i=es(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:n}]=await Promise.all([i,vv()]);if(!n)throw this._dictionaryPromise=null,new rt("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:s,dictionary_version:r,expression:o,itemsNames:l}=n,c=o;let f=!1;r&&(this._dictionaryVersion=vpe.parse(r),f=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+n.cimRefTemplateUrl,this._itemNames=new Set(l),this._symbolFields=s.symbol;const y={};if(this.config){const S=this.config;for(const P in S)y[P]=S[P]}if(s.configuration)for(const S of s.configuration)y.hasOwnProperty(S.name)||(y[S.name]=S.value);const _=[];if(e!=null&&e.fields&&this.fieldMap)for(const S in this.fieldMap){const P=this.fieldMap[S],A=e.fields.filter(D=>D.name.toLowerCase()===(P==null?void 0:P.toLowerCase()));A.length>0&&_.push({...A[0],type:f?A[0].type:"esriFieldTypeString"})}_.length>0&&(this._fieldIndex=new _pe(_));const x=pOe(c,e!=null?e.spatialReference:null,_,y).then(S=>{const P={scale:0};return(A,D)=>{if(S==null)return null;const N=S.repurposeFeature({geometry:null,attributes:A});return P.scale=D!=null?D.scale??void 0:void 0,S.evaluate({$feature:N,$view:P},S.services)}}).catch(S=>(qt.getLogger(RQ).error("Creating dictionary expression failed:",S),null));return this._dictionaryPromise=x,x}async _cimPartsToCIMSymbol(e,i,n,s,r){const o=new Array(i.length);for(let f=0;f<i.length;f++)o[f]=this._getSymbolPart(i[f],r);let l=await Promise.all(o);const c=this.fieldMap;if(c){l=Ue(l);for(const f of l)Ype.applyDictionaryTextOverrides(f,e,c,this._fieldIndex,_F(f))}return new W0({data:Fqe(l,n,s)})}async _getSymbolPart(e,i){const n=this._symbolCache.get(e);if(n)return n;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(o=>o.data);const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),r=es(s,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,r),r.finally(()=>this._ongoingRequests.delete(e));try{const o=await r;return this._symbolCache.put(e,o.data),o.data}catch(o){throw o}}};function Fqe(t,e,i){if(!t||t.length===0)return null;const n={...t[0]};if(t.length>1){n.effects=null,n.symbolLayers=[];for(const s of t){const r=s;if(r.effects!=null)for(const o of r.symbolLayers)o.effects==null?o.effects=r.effects:o.effects.unshift(...r.effects);n.symbolLayers.unshift(...r.symbolLayers)}}return i&&(n.callout=Lqe),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:e}}var bF;let Dh=bF=class extends Lx(wm){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Xpe(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,n){n!=null&&n.origin||super.writeVisualVariables(t,e,i,n)}clone(){return new bF({config:Ue(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Ue(this.fieldMap),url:Ue(this.url),visualVariables:Ue(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await nl(t,e,this.scaleExpression);for(const i in this.fieldMap){const n=this.fieldMap[i];e.has(n)&&t.add(n)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};I([O({type:Xpe})],Dh.prototype,"_loader",null),I([O({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Dh.prototype,"config",void 0),I([O({type:Object,json:{write:!0}})],Dh.prototype,"fieldMap",void 0),I([O({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Dh.prototype,"scaleExpression",void 0),I([zt("scaleExpression")],Dh.prototype,"writeData",null),I([O({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Dh.prototype,"scaleExpressionTitle",void 0),I([O({type:String,json:{write:!0}})],Dh.prototype,"url",void 0),I([zt("visualVariables")],Dh.prototype,"writeVisualVariables",null),Dh=bF=I([De("esri.renderers.DictionaryRenderer")],Dh);const zqe=Dh;var xF;let _p=xF=class extends St{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(qt.getLogger(this).error(".field: field must be a string value"),null):zC(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new xF({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};I([O({type:fi,json:{type:[Number],write:!0}})],_p.prototype,"color",void 0),I([O({type:String,json:{write:!0}})],_p.prototype,"field",void 0),I([Es("field")],_p.prototype,"castField",null),I([O({type:String,json:{write:!0}})],_p.prototype,"label",void 0),I([O({type:String,json:{write:!0}})],_p.prototype,"valueExpression",void 0),I([O({type:String,json:{write:!0}})],_p.prototype,"valueExpressionTitle",void 0),_p=xF=I([De("esri.renderers.support.AttributeColorInfo")],_p);const Wpe=_p;var wF;let VI=wF=class extends St{constructor(){super(...arguments),this.unit=null}clone(){return new wF({unit:this.unit})}};I([O({type:String,json:{write:!0}})],VI.prototype,"unit",void 0),VI=wF=I([De("esri.renderers.support.DotDensityLegendOptions")],VI);const qqe=VI;var SF;let Gl=SF=class extends Lx(wm){constructor(t){super(t),this.attributes=null,this.backgroundColor=new fi([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Rl,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new xm({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new SF({attributes:Ue(this.attributes),backgroundColor:Ue(this.backgroundColor),dotBlendingEnabled:Ue(this.dotBlendingEnabled),dotShape:Ue(this.dotShape),dotSize:Ue(this.dotSize),dotValue:Ue(this.dotValue),legendOptions:Ue(this.legendOptions),outline:Ue(this.outline),referenceScale:Ue(this.referenceScale),seed:Ue(this.seed),visualVariables:Ue(this.visualVariables),authoringInfo:Ue(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await nl(t,e,i.valueExpression),i.field&&t.add(i.field)}};I([O({type:[Wpe],json:{write:!0}})],Gl.prototype,"attributes",void 0),I([O({type:fi,json:{write:!0}})],Gl.prototype,"backgroundColor",void 0),I([O({type:Boolean,json:{write:!0}})],Gl.prototype,"dotBlendingEnabled",void 0),I([O({type:String,json:{write:!1}})],Gl.prototype,"dotShape",void 0),I([O({type:Number,json:{write:!0}})],Gl.prototype,"dotSize",void 0),I([O({type:qqe,json:{write:!0}})],Gl.prototype,"legendOptions",void 0),I([O({type:Rl,json:{default:null,write:!0}})],Gl.prototype,"outline",void 0),I([O({type:Number,json:{write:!0}})],Gl.prototype,"dotValue",void 0),I([O({type:Number,json:{write:!0}})],Gl.prototype,"referenceScale",void 0),I([O({type:Number,json:{write:!0}})],Gl.prototype,"seed",void 0),I([si({dotDensity:"dot-density"})],Gl.prototype,"type",void 0),Gl=SF=I([De("esri.renderers.DotDensityRenderer")],Gl);const Vqe=Gl;var EF;let fS=EF=class extends St{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new EF({color:this.color&&this.color.clone(),ratio:this.ratio})}};I([O({type:fi,json:{type:[Ss],default:null,write:!0}})],fS.prototype,"color",void 0),I([O({type:Number,json:{write:!0}})],fS.prototype,"ratio",void 0),fS=EF=I([De("esri.renderers.support.HeatmapColorStop")],fS);const GI=fS;let _b=class extends Un(St){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};I([O({type:String,json:{write:!0}})],_b.prototype,"minLabel",void 0),I([O({type:String,json:{write:!0}})],_b.prototype,"maxLabel",void 0),I([O({type:String,json:{write:!0}})],_b.prototype,"title",void 0),_b=I([De("esri.renderers.support.HeatmapLegendOptions")],_b);const sj=2.4;function Gqe(t){return eh(t*sj)}function jqe(t){return d8e(t)/sj}function Bqe(t,e,i,n){let{color:s,ratio:r}=e,{color:o,ratio:l}=i;l===r&&(l===1?r-=1e-6:l+=1e-6);const c=Qu((n-r)/(l-r),0,1);qA(t,s.toArray(),o.toArray(),c)}function D0t(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:l})=>l>=0&&l<=1).sort((l,c)=>l.ratio-c.ratio).map(({color:l,ratio:c})=>({color:l,ratio:Math.max(c,.001)})),t.length<1)return i;let n=t[0],s=t[0],r=1;const o=Em();for(let l=0;l<512;l++){const c=(l+.5)/512;for(;c>s.ratio&&r<t.length;)n=s,s=t[r++];Bqe(o,n,s,c),i.set(o,4*l)}return i}function N0t(t,e,i){const n=Math.sqrt(t**2+e**2)/i;return n>1?0:3/(Math.PI*i**2)*(1-n**2)**2}function O0t(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var CF;function LQ(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:n}=t;if(e!=null||i!=null||n!=null){const{blurRadius:s,maxPixelIntensity:r,minPixelIntensity:o,...l}=t;return l}}return t}let $o=CF=class extends wm{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new GI({ratio:0,color:new fi("rgba(255, 140, 0, 0)")}),new GI({ratio:.75,color:new fi("rgba(255, 140, 0, 1)")}),new GI({ratio:.9,color:new fi("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return LQ(t)}get blurRadius(){return jqe(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Gqe(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(sj**2*this.blurRadius**4)}read(t,e){t=LQ(t),super.read(t,e)}getSymbol(){return new Uc}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,n=this.valueExpression;i&&typeof i=="string"&&El(t,e,i),n&&typeof n=="string"&&await nl(t,e,n)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new CF({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:Ue(this.colorStops),field:this.field,legendOptions:Ue(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};I([O({type:kG,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],$o.prototype,"authoringInfo",void 0),I([O({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$o.prototype,"blurRadius",null),I([O({type:[GI],json:{write:!0}})],$o.prototype,"colorStops",void 0),I([O({type:String,json:{write:!0}})],$o.prototype,"field",void 0),I([O({type:_b,json:{write:!0}})],$o.prototype,"legendOptions",void 0),I([O({type:Number,json:{write:!0}})],$o.prototype,"maxDensity",void 0),I([O({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$o.prototype,"maxPixelIntensity",null),I([O({type:Number,json:{write:!0}})],$o.prototype,"minDensity",void 0),I([O({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],$o.prototype,"minPixelIntensity",null),I([O({type:Number,cast:pn,json:{write:!0}})],$o.prototype,"radius",void 0),I([O({type:Number,range:{min:0},json:{default:0,write:!0}})],$o.prototype,"referenceScale",void 0),I([si({heatmap:"heatmap"})],$o.prototype,"type",void 0),I([O({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],$o.prototype,"valueExpression",void 0),I([O({type:String})],$o.prototype,"valueExpressionTitle",void 0),I([O({readOnly:!0})],$o.prototype,"_pixelIntensityToDensity",null),$o=CF=I([De("esri.renderers.HeatmapRenderer")],$o);const Zpe=$o;let Ay=class extends Un(St){constructor(){super(...arguments),this.color=new fi([0,0,0,0]),this.label=null,this.threshold=0}};I([O({type:fi,json:{write:!0}})],Ay.prototype,"color",void 0),I([O({type:String,json:{write:!0}})],Ay.prototype,"label",void 0),I([O({type:Number,range:{min:0,max:1},json:{write:!0}})],Ay.prototype,"threshold",void 0),Ay=I([De("esri.renderers.support.OthersCategory")],Ay);const Hqe={base:Dx,key:"type",typeMap:{size:OA,opacity:DG}};let jl=class extends Lx(Un(wm)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new fi([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Ay,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var e;return new Uc({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(xl)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((i,n)=>i+n.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const n of this.attributes)n.valueExpression&&await nl(e,i,n.valueExpression),n.field&&e.add(n.field)}};I([O({type:[Wpe],json:{write:!0}})],jl.prototype,"attributes",void 0),I([O(WG)],jl.prototype,"backgroundFillSymbol",void 0),I([O({type:fi,json:{write:!0}})],jl.prototype,"defaultColor",void 0),I([O({type:String,json:{write:!0}})],jl.prototype,"defaultLabel",void 0),I([O({type:Number,range:{min:0,max:1},json:{write:!0}})],jl.prototype,"holePercentage",void 0),I([O({type:Ay,json:{write:!0}})],jl.prototype,"othersCategory",void 0),I([O({type:KG,json:{write:!0}})],jl.prototype,"legendOptions",void 0),I([O({type:Rl,json:{default:null,write:!0}})],jl.prototype,"outline",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],jl.prototype,"size",void 0),I([si({pieChart:"pie-chart"})],jl.prototype,"type",void 0),I([O({types:[Hqe]})],jl.prototype,"visualVariables",void 0),jl=I([De("esri.renderers.PieChartRenderer")],jl);const Uqe=jl,Yqe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function PF(t){return t instanceof Ei}function FQ(t){return t instanceof ci?Object.keys(t.items):PF(t)?Pl(t).keys():t?Object.keys(t):[]}function V4(t,e){return t instanceof ci?t.items[e]:t[e]}function Xqe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function nE(t){return t?t.declaredClass:null}function Kpe(t,e){var _;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const n=FQ(t),s=FQ(e);if(n.length===0&&s.length===0)return;if(!n.length||!s.length||Xqe(t,e))return{type:"complete",oldValue:t,newValue:e};const r=s.filter(x=>!n.includes(x)),o=n.filter(x=>!s.includes(x)),l=n.filter(x=>s.includes(x)&&V4(t,x)!==V4(e,x)).concat(r,o).sort(),c=nE(t);if(c&&Yqe.has(c)&&l.length)return{type:"complete",oldValue:t,newValue:e};let f;const y=PF(t)&&PF(e);for(const x of l){const S=V4(t,x),P=V4(e,x);let A;if((y||typeof S!="function"&&typeof P!="function")&&S!==P&&(S!=null||P!=null)){if(i&&i[x]&&typeof i[x]=="function")A=(_=i[x])==null?void 0:_.call(i,S,P);else if(S instanceof Date&&P instanceof Date){if(S.getTime()===P.getTime())continue;A={type:"complete",oldValue:S,newValue:P}}else A=typeof S=="object"&&typeof P=="object"&&nE(S)===nE(P)?Kpe(S,P):{type:"complete",oldValue:S,newValue:P};A!=null&&(f!=null?f.diff[x]=A:f={type:"partial",diff:{[x]:A}})}}return f}function L0t(t,e){return Wqe(t,e)}function Wqe(t,e){if(t==null)return!1;const i=e.split(".");let n=t;for(const s of i){if(n.type==="complete")return!0;if(n.type!=="partial")return!1;{const r=n.diff[s];if(!r)return!1;n=r}}return!0}function F0t(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function Jpe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&nE(t)!==nE(e)?{type:"complete",oldValue:t,newValue:e}:Kpe(t,e)}function G4(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!G4(i))return!1;for(const i of e.removed)if(!G4(i))return!1;for(const i of e.changed)if(!G4(i))return!1;return!0}case"partial":for(const e in t.diff)if(!G4(t.diff[e]))return!1;return!0}}let bb=class extends Un(St){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};I([O($I)],bb.prototype,"value",void 0),I([O($I)],bb.prototype,"value2",void 0),I([O($I)],bb.prototype,"value3",void 0),bb=I([De("esri.renderers.support.UniqueValue")],bb);const y2=bb;let Og=class extends Un(St){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(n=>new y2({value:n})):i==="object"?e[0]instanceof y2?e:e.map(n=>new y2(n)):null}};I([O({type:String,json:{write:!0}})],Og.prototype,"description",void 0),I([O({type:String,json:{write:!0}})],Og.prototype,"label",void 0),I([O($A)],Og.prototype,"symbol",void 0),I([O({type:[y2],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new y2({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const n of t){const s=[n.value,n.value2,n.value3].filter(xl).map(r=>r.toString());i.push(s)}e.values=i}}}})],Og.prototype,"values",void 0),I([Es("values")],Og.prototype,"castValues",null),Og=I([De("esri.renderers.support.UniqueValueClass")],Og);const Qpe=Og;let pS=class extends Un(St){constructor(e){super(e),this.heading=null,this.classes=null}};I([O({type:String,json:{write:!0}})],pS.prototype,"heading",void 0),I([O({type:[Qpe],json:{write:!0}})],pS.prototype,"classes",void 0),pS=I([De("esri.renderers.support.UniqueValueGroup")],pS);const TF=pS;var IF;let gy=IF=class extends St{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new IF({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};I([O({type:String,json:{write:!0}})],gy.prototype,"description",void 0),I([O({type:String,json:{write:!0}})],gy.prototype,"label",void 0),I([O(XG)],gy.prototype,"symbol",void 0),I([O($I)],gy.prototype,"value",void 0),gy=IF=I([De("esri.renderers.support.UniqueValueInfo")],gy);const sE=gy,zQ=new Map;async function Zqe(t,e){try{return{data:(await eVe(t,e)).data,baseUrl:d9e(t),styleUrl:t}}catch(i){return jh(i),null}}function Kqe(t,e,i){var c;const n=e.portal!=null?e.portal:Bc.getDefault();let s;const r=`${n.url} - ${(c=n.user)==null?void 0:c.username} - ${t}`,o=zQ.get(r);if(o)return o;const l=Jqe(t,n,i).then(f=>(s=f,f.fetchData())).then(f=>({data:f,baseUrl:s.itemUrl??"",styleName:t}));return zQ.set(r,l),l}function Jqe(t,e,i){return e.load(i).then(()=>{const n=new Uh({disableExtraQuery:!0,query:`owner:${qQ} AND type:${VQ} AND typekeywords:"${t}"`});return e.queryItems(n,i)}).then(({results:n})=>{var o;let s=null;const r=t.toLowerCase();if(n&&Array.isArray(n)){for(const l of n)if(((o=l.typeKeywords)==null?void 0:o.some(f=>f.toLowerCase()===r))&&l.type===VQ&&l.owner===qQ){s=l;break}}if(!s)throw new rt("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(i)})}function Qqe(t,e,i){return(t==null?void 0:t.styleUrl)!=null?Zqe(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?Kqe(t.styleName,e,i):Promise.reject(new rt("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function G0t(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function j0t(t,e,i=["gltf"]){if(e==="cimRef")return encodeURI(t.cimRef);if(t.formatInfos&&!ht("enable-feature:force-wosr"))for(const n of i){const s=t.formatInfos.find(r=>r.type===n);if(s)return s.href}return encodeURI(t.webRef)}function eVe(t,e){const i={responseType:"json",query:{f:"json"},...e};return es(Hu(t),i)}const qQ="esri_en",VQ="Style",B0t="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var mS;const eme="esri.renderers.UniqueValueRenderer",yg=()=>qt.getLogger(eme),GQ="uvInfos-watcher",jQ="uvGroups-watcher",tVe=",",iVe=Qo(sE);function nVe(t){const{field1:e,field2:i,field3:n,fieldDelimiter:s,uniqueValueInfos:r,valueExpression:o}=t,l=!(!e||!i);return[{classes:(r??[]).map(c=>{var N;const{symbol:f,label:y,value:_,description:x}=c,[S,P,A]=l?((N=_==null?void 0:_.toString())==null?void 0:N.split(s||""))||[]:[_],D=[];return(e||o)&&D.push(S),i&&D.push(P),n&&D.push(A),{symbol:f,label:y,values:[D],description:x}})}]}function j_(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let Hs=mS=class extends Lx(wm){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let n=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let r=0;r<i.length;r++){const o=e.find(l=>l.value===i[r].value);o?Jpe(o,i[r])?(s.changed.push({type:"complete",oldValue:o,newValue:i[r]}),n=!0):s.unchanged.push({oldValue:o,newValue:i[r]}):(s.added.push(i[r]),n=!0)}for(let r=0;r<e.length;r++)i.find(o=>o.value===e[r].value)||(s.removed.push(e[r]),n=!0);return n?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:zC(t)}writeField(t,e,i,n){typeof t=="string"?e[i]=t:n!=null&&n.messages?n.messages.push(new rt("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):yg().error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Bc.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const n=Mx(e.styleUrl,i);return Object.freeze({styleUrl:n})}}writeStyleOrigin(t,e,i,n){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=QC(t.styleUrl,n))}set uniqueValueGroups(t){this.styleOrigin?yg().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?yg().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var n;if(this.styleOrigin)return void yg().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?iVe(t):new sE({value:t,symbol:tpe(e)}),(n=this.uniqueValueInfos)==null||n.push(i),this._valueInfoMap[j_(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void yg().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const n=e[i];if(String(n.value)===String(t)){delete this._valueInfoMap[j_(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await vv()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void yg().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const s=await vv(),{arcadeUtils:r}=s;r.hasGeometryOperations(this.valueExpression)&&await r.enableGeometryOperations(),i={...i,arcade:s}}const n=this._getUniqueValueInfo(t,i);return(n==null?void 0:n.symbol)||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){var n;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(n=this.uniqueValueInfos)==null?void 0:n.reduce((s,r)=>s+r.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new mS({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Ue(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Ue(this.visualVariables),legendOptions:Ue(this.legendOptions),authoringInfo:Ue(this.authoringInfo),backgroundFillSymbol:Ue(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=Ue(this.uniqueValueInfos),i=Ue(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(Ue(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(n=>n.collectRequiredFields(t,e)),nl(t,e,this.valueExpression)];El(t,e,this.field),El(t,e,this.field2),El(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return Qqe(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(n=>{const s=new Wv({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:n.name});this.defaultSymbol||n.name!==t.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const r=new sE({value:n.name,symbol:s});e.push(r),this._valueInfoMap[j_(n.name)]=r}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",tVe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[j_(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(GQ);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(xi(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(n,s)=>{n!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,GQ)}}_watchUniqueValueGroups(){this.removeHandles(jQ);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(xi(()=>({classes:i.classes}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const n of i.classes??[])e.push(xi(()=>({symbol:n.symbol,values:n.values,label:n.label,description:n.description}),(s,r)=>{s!==r&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,jQ)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:n,fieldDelimiter:s,uniqueValueGroups:r,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!e||!i);for(const c of r)for(const f of c.classes??[]){const{symbol:y,label:_,values:x,description:S}=f;for(const P of x??[]){const{value:A,value2:D,value3:N}=P,F=[A];i&&F.push(D),n&&F.push(N);const G=l?F.join(s||""):F[0]??void 0;t.push(new sE({symbol:y,label:_,value:G,description:S}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:n,fieldDelimiter:s,uniqueValueInfos:r}=this;if(!e&&!n||!r.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),l=r.map(f=>{var N;const{symbol:y,label:_,value:x,description:S}=f,[P,A,D]=o?((N=x==null?void 0:x.toString())==null?void 0:N.split(s||""))||[]:[x];return new Qpe({symbol:y,label:_,description:S,values:[new y2({value:P,value2:A,value3:D})]})}),c=[new TF({classes:l})];t&&Object.freeze(c),this._set("uniqueValueGroups",c),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:n,spatialReference:s,arcade:r,timeZone:o}=e??{};let l=this._cache.compiledFunc;const c=r.arcadeUtils;if(!l){const y=c.createSyntaxTree(this.valueExpression);l=c.createFunction(y),this._cache.compiledFunc=l}const f=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:n,spatialReference:s}),o));return this._valueInfoMap[j_(f)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let n;if(this.field2){const s=this.field2,r=this.field3,o=[];e&&o.push(i[e]),s&&o.push(i[s]),r&&o.push(i[r]),n=o.join(this.fieldDelimiter||"")}else e&&(n=i[e]);return this._valueInfoMap[j_(n)]}static fromPortalStyle(t,e){const i=new mS(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||Bc.getDefault());const n=i.populateFromStyle();return n.catch(s=>{yg().error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",s)}),n}static fromStyleUrl(t,e){const i=new mS(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const n=i.populateFromStyle();return n.catch(s=>{yg().error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),n}};I([O({readOnly:!0})],Hs.prototype,"_cache",null),I([si({uniqueValue:"unique-value"})],Hs.prototype,"type",void 0),I([O(WG)],Hs.prototype,"backgroundFillSymbol",void 0),I([O({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Hs.prototype,"field",null),I([Es("field")],Hs.prototype,"castField",null),I([zt("field")],Hs.prototype,"writeField",null),I([O({type:String,value:null,json:{write:!0}})],Hs.prototype,"field2",null),I([O({type:String,value:null,json:{write:!0}})],Hs.prototype,"field3",null),I([O({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Hs.prototype,"orderByClassesEnabled",void 0),I([O({type:String,value:null,json:{write:!0}})],Hs.prototype,"valueExpression",null),I([O({type:String,json:{write:!0}})],Hs.prototype,"valueExpressionTitle",void 0),I([O({type:KG,json:{write:!0}})],Hs.prototype,"legendOptions",void 0),I([O({type:String,json:{write:!0}})],Hs.prototype,"defaultLabel",void 0),I([O(sV({...$A},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Hs.prototype,"defaultSymbol",null),I([O({type:String,value:null,json:{write:!0}})],Hs.prototype,"fieldDelimiter",null),I([O({type:Bc,readOnly:!0})],Hs.prototype,"portal",void 0),I([Dt("portal",["styleName"])],Hs.prototype,"readPortal",null),I([O({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Hs.prototype,"styleOrigin",void 0),I([Dt("styleOrigin",["styleName","styleUrl"])],Hs.prototype,"readStyleOrigin",null),I([zt("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Hs.prototype,"writeStyleOrigin",null),I([O({type:[TF],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||nVe(e)).map(n=>TF.fromJSON(n,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Hs.prototype,"uniqueValueGroups",null),I([O({type:[sE],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Hs.prototype,"uniqueValueInfos",null),Hs=mS=I([De(eme)],Hs);const rj=Hs,GA={key:"type",base:wm,typeMap:{heatmap:Zpe,simple:Fx,"unique-value":rj,"class-breaks":ype,"dot-density":Vqe,dictionary:zqe,"pie-chart":Uqe},errorContext:"renderer"},sVe={key:"type",base:wm,typeMap:{simple:Fx,"unique-value":rj,"class-breaks":ype,heatmap:Zpe},errorContext:"renderer",validate:rVe};function rVe(t){switch(t.type){case"simple":return oVe(t);case"unique-value":return aVe(t);case"class-breaks":return lVe(t);case"heatmap":return t}}function oVe(t){if(t.symbol)return t;qt.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function aVe(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter(({symbol:n,label:s},r)=>(n||qt.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${r}] ${s}) without a symbol from web scene.`),!!n));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function lVe(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter(({symbol:n,label:s},r)=>(n||qt.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${r}] ${s}) without a symbol from web scene.`),!!n));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function H0t(t,e){return jE(t,null,e)}const cVe=vx({types:GA});function jE(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new ld("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):cVe(t,e,i):null}var MF;let yy=MF=class extends St{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new MF({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};I([O({type:String,json:{write:!0}})],yy.prototype,"expression",void 0),I([O({type:String,json:{write:!0}})],yy.prototype,"name",void 0),I([O({type:["boolean","date","number","string"],json:{write:!0}})],yy.prototype,"returnType",void 0),I([O({type:String,json:{write:!0}})],yy.prototype,"title",void 0),yy=MF=I([De("esri.form.ExpressionInfo")],yy);const uVe=yy;let vy=class extends St{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};I([O({type:String,json:{write:!0}})],vy.prototype,"description",void 0),I([O({type:String,json:{write:!0}})],vy.prototype,"label",void 0),I([O()],vy.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],vy.prototype,"visibilityExpression",void 0),vy=I([De("esri.form.elements.Element")],vy);const bv=vy;let jI=class extends Un(St){constructor(e){super(e),this.type=null}};I([O()],jI.prototype,"type",void 0),jI=I([De("esri.form.elements.inputs.attachments.Input")],jI);const R0=jI,jA=["any","capture","upload"];let xb=class extends R0{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};I([O({type:["audio"],readOnly:!0,json:{write:!0}})],xb.prototype,"type",void 0),I([O({type:jA,json:{write:!0}})],xb.prototype,"inputMethod",void 0),I([O({type:Number,json:{write:!0}})],xb.prototype,"maxDuration",void 0),xb=I([De("esri.form.elements.inputs.attachments.AudioInput")],xb);const BQ=xb;let gS=class extends R0{constructor(e){super(e),this.type="document",this.maxFileSize=null}};I([O({type:["document"],readOnly:!0,json:{write:!0}})],gS.prototype,"type",void 0),I([O({type:Number,json:{write:!0}})],gS.prototype,"maxFileSize",void 0),gS=I([De("esri.form.elements.inputs.attachments.DocumentInput")],gS);const HQ=gS;let wb=class extends R0{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};I([O({type:["image"],readOnly:!0,json:{write:!0}})],wb.prototype,"type",void 0),I([O({type:jA,json:{write:!0}})],wb.prototype,"inputMethod",void 0),I([O({type:Number,json:{write:!0}})],wb.prototype,"maxImageSize",void 0),wb=I([De("esri.form.elements.inputs.attachments.ImageInput")],wb);const UQ=wb;let yS=class extends R0{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};I([O({type:["signature"],readOnly:!0,json:{write:!0}})],yS.prototype,"type",void 0),I([O({type:jA,json:{write:!0}})],yS.prototype,"inputMethod",void 0),yS=I([De("esri.form.elements.inputs.attachments.SignatureInput")],yS);const YQ=yS;let Sb=class extends R0{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};I([O({type:["video"],readOnly:!0,json:{write:!0}})],Sb.prototype,"type",void 0),I([O({type:jA,json:{write:!0}})],Sb.prototype,"inputMethod",void 0),I([O({type:Number,json:{write:!0}})],Sb.prototype,"maxDuration",void 0),Sb=I([De("esri.form.elements.inputs.attachments.VideoInput")],Sb);const XQ=Sb;function tme(t){return{nestableTypes:{base:R0,key:"type",typeMap:{audio:BQ,document:HQ,image:UQ,signature:YQ,video:XQ}},allTypes:{base:R0,key:"type",typeMap:{attachment:t,audio:BQ,document:HQ,image:UQ,signature:YQ,video:XQ}}}}function hVe(t,e,i){return t?t.map(n=>Ku(e.nestableTypes,n)):null}function dVe(t,e,i){if(!t)return null;const n=e.nestableTypes.typeMap;return t.filter(s=>n[s.type]).map(s=>n[s.type].fromJSON(s))}function fVe(t,e,i){if(!t)return null;const n=e.nestableTypes.typeMap;return t.filter(s=>n[s.type]).map(s=>s.toJSON())}let Zd=class extends R0{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return hVe(e,dN)}readInputs(e,i){return dVe(i.inputTypes,dN)}writeInputs(e,i){i.inputTypes=fVe(e,dN)}};I([O({type:["attachment"],readOnly:!0,json:{write:!0}})],Zd.prototype,"type",void 0),I([O({type:["any","exact","exactOrNone"],json:{write:!0}})],Zd.prototype,"attachmentAssociationType",void 0),I([O({json:{write:{isRequired:!0}}})],Zd.prototype,"inputTypes",void 0),I([Es("inputTypes")],Zd.prototype,"castInputs",null),I([Dt("inputTypes")],Zd.prototype,"readInputs",null),I([zt("inputTypes")],Zd.prototype,"writeInputs",null),Zd=I([De("esri.form.elements.inputs.attachments.AttachmentInput")],Zd);const dN=tme(Zd),pVe=Zd;var AF;const mVe=tme(pVe);let Ec=AF=class extends bv{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new AF({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};I([O({type:Boolean,json:{write:!0}})],Ec.prototype,"allowUserRename",void 0),I([O({type:String,json:{write:{isRequired:!0}}})],Ec.prototype,"attachmentKeyword",void 0),I([O({type:Boolean,json:{write:!0}})],Ec.prototype,"displayFilename",void 0),I([O({type:String,json:{write:!0}})],Ec.prototype,"editableExpression",void 0),I([O({type:String,json:{write:!0}})],Ec.prototype,"filenameExpression",void 0),I([O({types:mVe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Ec.prototype,"input",void 0),I([O({type:Number,json:{write:!0}})],Ec.prototype,"maxAttachmentCount",void 0),I([O({type:Number,json:{write:!0}})],Ec.prototype,"minAttachmentCount",void 0),I([O({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Ec.prototype,"type",void 0),I([O({type:Boolean,json:{write:!0}})],Ec.prototype,"useOriginalFilename",void 0),Ec=AF=I([De("esri.form.elements.AttachmentElement")],Ec);const WQ=Ec;let BI=class extends St{constructor(e){super(e),this.type=null}};I([O()],BI.prototype,"type",void 0),BI=I([De("esri.form.elements.inputs.Input")],BI);const Cm=BI;let vS=class extends Cm{constructor(e){super(e),this.maxLength=null,this.minLength=0}};I([O({type:Number,json:{write:!0}})],vS.prototype,"maxLength",void 0),I([O({type:Number,json:{write:!0}})],vS.prototype,"minLength",void 0),vS=I([De("esri.form.elements.inputs.TextInput")],vS);const oj=vS;var kF;let HI=kF=class extends oj{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new kF({maxLength:this.maxLength,minLength:this.minLength})}};I([O({type:["barcode-scanner"],json:{read:!1,write:!0}})],HI.prototype,"type",void 0),HI=kF=I([De("esri.form.elements.inputs.BarcodeScannerInput")],HI);const gVe=HI;var DF;let Eb=DF=class extends Cm{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new DF({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};I([O({type:String,json:{write:!0}})],Eb.prototype,"noValueOptionLabel",void 0),I([O({type:Boolean,json:{write:!0}})],Eb.prototype,"showNoValueOption",void 0),I([O({type:["combo-box"],json:{read:!1,write:!0}})],Eb.prototype,"type",void 0),Eb=DF=I([De("esri.form.elements.inputs.ComboBoxInput")],Eb);const yVe=Eb;var NF;function ZQ(t){return t??null}function KQ(t){return t??null}let Bd=NF=class extends Cm{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return ZQ(e.max)}writeMax(t,e){e.max=KQ(t)}readMin(t,e){return ZQ(e.min)}writeMin(t,e){e.min=KQ(t)}clone(){return new NF({max:this.max,min:this.min})}};I([O({type:String,json:{type:String,write:!0}})],Bd.prototype,"max",void 0),I([Dt("max")],Bd.prototype,"readMax",null),I([zt("max")],Bd.prototype,"writeMax",null),I([O({type:String,json:{type:String,write:!0}})],Bd.prototype,"min",void 0),I([Dt("min")],Bd.prototype,"readMin",null),I([zt("min")],Bd.prototype,"writeMin",null),I([O({type:["date-picker"],json:{read:!1,write:!0}})],Bd.prototype,"type",void 0),Bd=NF=I([De("esri.form.elements.inputs.DatePickerInput")],Bd);const vVe=Bd;var OF;function fN(t){return t??null}function pN(t){return t??null}let Bl=OF=class extends Cm{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return fN(e.max)}writeMax(t,e){e.max=pN(t)}readMin(t,e){return fN(e.min)}writeMin(t,e){e.min=pN(t)}readTimeResolution(t,e){return fN(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=pN(t)}clone(){return new OF({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};I([O({type:Boolean,json:{write:!0}})],Bl.prototype,"includeTimeOffset",void 0),I([O({type:String,json:{type:String,write:!0}})],Bl.prototype,"max",void 0),I([Dt("max")],Bl.prototype,"readMax",null),I([zt("max")],Bl.prototype,"writeMax",null),I([O({type:String,json:{type:String,write:!0}})],Bl.prototype,"min",void 0),I([Dt("min")],Bl.prototype,"readMin",null),I([zt("min")],Bl.prototype,"writeMin",null),I([O({type:String,json:{type:String,write:!0}})],Bl.prototype,"timeResolution",void 0),I([Dt("timeResolution")],Bl.prototype,"readTimeResolution",null),I([zt("timeResolution")],Bl.prototype,"writeTimeResolution",null),I([O({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Bl.prototype,"type",void 0),Bl=OF=I([De("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Bl);const _Ve=Bl;var $F;function JQ(t){return t!=null?new Date(t):null}function QQ(t){return t?t.getTime():null}let Nh=$F=class extends Cm{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return JQ(e.max)}writeMax(t,e){e.max=QQ(t)}readMin(t,e){return JQ(e.min)}writeMin(t,e){e.min=QQ(t)}clone(){return new $F({includeTime:this.includeTime,max:this.max,min:this.min})}};I([O({type:Boolean,json:{write:!0}})],Nh.prototype,"includeTime",void 0),I([O({type:Date,json:{type:Number,write:!0}})],Nh.prototype,"max",void 0),I([Dt("max")],Nh.prototype,"readMax",null),I([zt("max")],Nh.prototype,"writeMax",null),I([O({type:Date,json:{type:Number,write:!0}})],Nh.prototype,"min",void 0),I([Dt("min")],Nh.prototype,"readMin",null),I([zt("min")],Nh.prototype,"writeMin",null),I([O({type:["datetime-picker"],json:{read:!1,write:!0}})],Nh.prototype,"type",void 0),Nh=$F=I([De("esri.form.elements.inputs.DateTimePickerInput")],Nh);const bVe=Nh;var RF;let Cb=RF=class extends Cm{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new RF({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};I([O({type:String,json:{write:!0}})],Cb.prototype,"noValueOptionLabel",void 0),I([O({type:Boolean,json:{write:!0}})],Cb.prototype,"showNoValueOption",void 0),I([O({type:["radio-buttons"],json:{read:!1,write:!0}})],Cb.prototype,"type",void 0),Cb=RF=I([De("esri.form.elements.inputs.RadioButtonsInput")],Cb);const xVe=Cb;var LF;let Pb=LF=class extends Cm{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new LF({offValue:this.offValue,onValue:this.onValue})}};I([O({type:[String,Number],json:{write:!0}})],Pb.prototype,"offValue",void 0),I([O({type:[String,Number],json:{write:!0}})],Pb.prototype,"onValue",void 0),I([O({type:["switch"],json:{read:!1,write:!0}})],Pb.prototype,"type",void 0),Pb=LF=I([De("esri.form.elements.inputs.SwitchInput")],Pb);const wVe=Pb;var FF;let UI=FF=class extends oj{constructor(t){super(t),this.type="text-area"}clone(){return new FF({maxLength:this.maxLength,minLength:this.minLength})}};I([O({type:["text-area"],json:{read:!1,write:!0}})],UI.prototype,"type",void 0),UI=FF=I([De("esri.form.elements.inputs.TextAreaInput")],UI);const SVe=UI;var zF;let YI=zF=class extends oj{constructor(t){super(t),this.type="text-box"}clone(){return new zF({maxLength:this.maxLength,minLength:this.minLength})}};I([O({type:["text-box"],json:{read:!1,write:!0}})],YI.prototype,"type",void 0),YI=zF=I([De("esri.form.elements.inputs.TextBoxInput")],YI);const EVe=YI;var qF;function mN(t){return t??null}function gN(t){return t??null}let Cc=qF=class extends Cm{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return mN(e.max)}writeMax(t,e){e.max=gN(t)}readMin(t,e){return mN(e.min)}writeMin(t,e){e.min=gN(t)}readTimeResolution(t,e){return mN(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=gN(t)}clone(){return new qF({max:this.max,min:this.min,timeResolution:this.timeResolution})}};I([O({type:String,json:{type:String,write:!0}})],Cc.prototype,"max",void 0),I([Dt("max")],Cc.prototype,"readMax",null),I([zt("max")],Cc.prototype,"writeMax",null),I([O({type:String,json:{type:String,write:!0}})],Cc.prototype,"min",void 0),I([Dt("min")],Cc.prototype,"readMin",null),I([zt("min")],Cc.prototype,"writeMin",null),I([O({type:String,json:{type:String,write:!0}})],Cc.prototype,"timeResolution",void 0),I([Dt("timeResolution")],Cc.prototype,"readTimeResolution",null),I([zt("timeResolution")],Cc.prototype,"writeTimeResolution",null),I([O({type:["time-picker"],json:{read:!1,write:!0}})],Cc.prototype,"type",void 0),Cc=qF=I([De("esri.form.elements.inputs.TimePickerInput")],Cc);const CVe=Cc,PVe={base:Cm,key:"type",typeMap:{"barcode-scanner":gVe,"combo-box":yVe,"date-picker":vVe,"datetime-picker":bVe,"datetimeoffset-picker":_Ve,"radio-buttons":xVe,switch:wVe,"text-area":SVe,"text-box":EVe,"time-picker":CVe}};var VF;let wu=VF=class extends bv{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new VF({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};I([O({types:mpe,json:{read:{reader:FA},write:!0}})],wu.prototype,"domain",void 0),I([O({type:Boolean,json:{write:!0}})],wu.prototype,"editable",void 0),I([O({type:String,json:{write:!0}})],wu.prototype,"editableExpression",void 0),I([O({type:String,json:{write:!0}})],wu.prototype,"fieldName",void 0),I([O({type:String,json:{write:!0}})],wu.prototype,"hint",void 0),I([O({types:PVe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],wu.prototype,"input",void 0),I([O({type:String,json:{write:!0}})],wu.prototype,"requiredExpression",void 0),I([O({type:String,json:{read:!1,write:!0}})],wu.prototype,"type",void 0),I([O({type:String,json:{write:!0}})],wu.prototype,"valueExpression",void 0),wu=VF=I([De("esri.form.elements.FieldElement")],wu);const eee=wu;var GF;let bp=GF=class extends bv{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new GF({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:Ue(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};I([O({type:Number,json:{write:!0}})],bp.prototype,"displayCount",void 0),I([O({type:["list"],json:{write:!0}})],bp.prototype,"displayType",void 0),I([O({type:String,json:{write:!0}})],bp.prototype,"editableExpression",void 0),I([O({type:[$G],json:{write:!0}})],bp.prototype,"orderByFields",void 0),I([O({type:Number,json:{write:!0}})],bp.prototype,"relationshipId",void 0),I([O({type:["relationship"],json:{read:!1,write:!0}})],bp.prototype,"type",void 0),bp=GF=I([De("esri.form.elements.RelationshipElement")],bp);const tee=bp;var jF;let Tb=jF=class extends bv{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new jF({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};I([O({type:String,json:{write:!0}})],Tb.prototype,"text",void 0),I([O({type:String,json:{write:!0}})],Tb.prototype,"textFormat",void 0),I([O({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Tb.prototype,"type",void 0),Tb=jF=I([De("esri.form.elements.TextElement")],Tb);const iee=Tb;function ime(t){return{typesWithGroup:{base:bv,key:"type",typeMap:{attachment:WQ,field:eee,group:t,relationship:tee,text:iee}},typesWithoutGroup:{base:bv,key:"type",typeMap:{attachment:WQ,field:eee,relationship:tee,text:iee}}}}function nme(t,e,i=!0){if(!t)return null;const n=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>n[s.type]).map(s=>n[s.type].fromJSON(s))}function sme(t,e,i=!0){if(!t)return null;const n=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>n[s.type]).map(s=>s.toJSON())}function rme(t,e,i=!0){return t?t.map(n=>Ku(i?e.typesWithGroup:e.typesWithoutGroup,n)):null}var BF;let Kd=BF=class extends bv{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return rme(t,yN,!1)}readElements(t,e){return nme(e.formElements,yN,!1)}writeElements(t,e){e.formElements=sme(t,yN,!1)}clone(){return new BF({description:this.description,elements:Ue(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};I([O({json:{write:!0}})],Kd.prototype,"elements",void 0),I([Es("elements")],Kd.prototype,"castElements",null),I([Dt("elements",["formElements"])],Kd.prototype,"readElements",null),I([zt("elements")],Kd.prototype,"writeElements",null),I([O({type:["collapsed","expanded"],json:{write:!0}})],Kd.prototype,"initialState",void 0),I([O({type:String,json:{read:!1,write:!0}})],Kd.prototype,"type",void 0),Kd=BF=I([De("esri.form.elements.GroupElement")],Kd);const yN=ime(Kd),TVe=Kd,IVe=t=>t.type==="field",MVe=t=>t.type==="group",AVe=t=>t.type==="text",i1t=t=>t.type==="relationship";var HF;const vN=ime(TVe);let Oh=HF=class extends St{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return rme(t,vN)}readElements(t,e){return nme(e.formElements,vN)}writeElements(t,e){e.formElements=sme(t,vN)}clone(){return new HF({description:this.description,expressionInfos:Ue(this.expressionInfos),elements:Ue(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:n,elements:s,expressionInfos:r,title:o}=this;if(rE(i,t,n),rE(i,t,o),!s)return[];const l=kVe(s,r).map(c=>nl(i,t,c));await Promise.all(l);for(const c of s)ome(i,{fieldsIndex:t,relationships:e},c);return Array.from(i).sort()}};function ome(t,e,i){var s;const{fieldsIndex:n}=e;if(!n||n.fields.length!==t.size)switch(rE(t,n,i.label),rE(t,n,i.description),i.type){case"field":El(t,n,i.fieldName);break;case"group":i.elements.forEach(r=>ome(t,e,r));break;case"relationship":if(e.relationships){const r=e.relationships.find(o=>o.id===i.relationshipId);r&&El(t,n,r.keyField)}_v(t,n,(s=i.orderByFields)==null?void 0:s.map(r=>r.field));break;case"text":rE(t,n,i.text)}}function kVe(t,e){if(!e||e.length===0)return[];const i=ame(t),n=[];for(const s of e)i.has(s.name)&&n.push(s.expression);return n}function ame(t){const e=new Set;for(const i of t)if($W(e,i.visibilityExpression),!AVe(i)){if(MVe(i))H9(e,ame(i.elements));else if($W(e,i.editableExpression),IVe(i)){const{requiredExpression:n,valueExpression:s}=i;H9(e,[n,s])}}return e}function rE(t,e,i){_v(t,e,Nde(i))}I([O({type:String,json:{write:!0}})],Oh.prototype,"description",void 0),I([O({json:{write:!0}})],Oh.prototype,"elements",void 0),I([Es("elements")],Oh.prototype,"castElements",null),I([Dt("elements",["formElements"])],Oh.prototype,"readElements",null),I([zt("elements")],Oh.prototype,"writeElements",null),I([O({type:[uVe],json:{write:!0}})],Oh.prototype,"expressionInfos",void 0),I([O({type:Boolean,json:{default:!1,write:!0}})],Oh.prototype,"preserveFieldValuesWhenHidden",void 0),I([O({type:String,json:{write:!0}})],Oh.prototype,"title",void 0),Oh=HF=I([De("esri.form.FormTemplate")],Oh);const DVe=Oh;let UF=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new YC,this._items=new Set}get length(){return mi(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return mi(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(n=>{e(n)||this._items.delete(n)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){mi(this._observable),yield*this._items}};const lme=new FinalizationRegistry(t=>{t.close()});function NVe(t,e){lme.register(t,e,e)}function OVe(t){lme.unregister(t)}function cme(t,e){return new Proxy({},{get:(i,n,s)=>(...r)=>{let o,l;const c=r[r.length-1];return $Ve(c)&&(o=c.signal,l=c.transferList,r.pop()),t.apply(e?`${e}.${n.toString()}`:n.toString(),r,{transferList:l,signal:o})}})}function $Ve(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const RVe={statsWorker:()=>st(()=>import("./statsWorker-C68zadxR.js"),__vite__mapDeps([240,178,52,2,135,136]),import.meta.url),geometryEngineWorker:()=>st(()=>import("./geometryEngineWorker-DI9wdz7_.js"),__vite__mapDeps([241,239,174]),import.meta.url),CSVSourceWorker:()=>st(()=>import("./CSVSourceWorker-DLWd03Si.js"),__vite__mapDeps([242,196,174,103,104,169,102,105,170,171,22,172,173,12,13,14,15,175,176,177,97,55,133,178,52,2,135,136,179,101,132,111]),import.meta.url),EdgeProcessingWorker:()=>st(()=>import("./EdgeProcessingWorker-UkzEGni3.js"),__vite__mapDeps([243,244,245,215,246,247,248,212,211,120,249,25,225,250]),import.meta.url),ElevationSamplerWorker:()=>st(()=>import("./ElevationSamplerWorker-Bve7N46f.js"),__vite__mapDeps([251,171,22,213,128,129,214,215,216]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>st(()=>import("./FeatureServiceSnappingSourceWorker-B50lDyNi.js"),__vite__mapDeps([252,169,102,103,104,105,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,6,7,253,145,146,144,39]),import.meta.url),GeoJSONSourceWorker:()=>st(()=>import("./GeoJSONSourceWorker-BuT5edmU.js"),__vite__mapDeps([254,102,103,104,105,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,195,196,132,111,197]),import.meta.url),LercWorker:()=>st(()=>import("./LercWorker-bwbctsCk.js"),[],import.meta.url),MemorySourceWorker:()=>st(()=>import("./MemorySourceWorker-CVcVMJ-B.js"),__vite__mapDeps([255,102,103,104,105,189,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,132,111,197,196]),import.meta.url),PBFDecoderWorker:()=>st(()=>import("./PBFDecoderWorker-Bv3NY0TW.js"),__vite__mapDeps([256,257,102,103,104,105,145,146]),import.meta.url),FeaturePipelineWorker:()=>st(()=>import("./FeaturePipelineWorker-DgVFxxtV.js"),__vite__mapDeps([258,6,7,19,20,21,8,22,23,259,260,26,25,261,262,225,263,17,55,264,265,266,104,224,16,267,176,102,103,105,268,126,247,173,12,13,14,15,174,172,269,270,271,210,272,273,175,177,97,133,178,52,2,135,136,179,144,145,146,194,195,196,132,111,197,274,275]),import.meta.url),PointCloudWorker:()=>st(()=>import("./PointCloudWorker-DNyw0Q_9.js"),__vite__mapDeps([276,277,201,119,120,127,128,129]),import.meta.url),RasterWorker:()=>st(()=>import("./RasterWorker-BaS_yEw7.js"),__vite__mapDeps([278,154,76,155,159,158]),import.meta.url),SceneLayerSnappingSourceWorker:()=>st(()=>import("./SceneLayerSnappingSourceWorker-Cl2g4z8T.js"),__vite__mapDeps([279,184,280,247,248,212,211,245,215,246,120,249,25,225,250]),import.meta.url),SceneLayerWorker:()=>st(()=>import("./SceneLayerWorker-C0bkyJVA.js"),__vite__mapDeps([281,214,118,119,120,121,122,123,124,125,126,127,128,129]),import.meta.url),WFSSourceWorker:()=>st(()=>import("./WFSSourceWorker-BsohfPXc.js"),__vite__mapDeps([282,102,103,104,105,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,195,196,197,231,232]),import.meta.url),WorkerTileHandler:()=>st(()=>import("./WorkerTileHandler-GC5b1_Eb.js"),__vite__mapDeps([283,223,224,267,284,222,146,271,23,285,221,25,225,18,210,265]),import.meta.url),Lyr3DWorker:()=>st(()=>import("./Lyr3DWorker-r9_yQHvO.js"),[],import.meta.url),Feature3DPipelineWorker:()=>st(()=>import("./Feature3DPipelineWorker-p3U00od9.js"),__vite__mapDeps([286,177,12,13,14,15,102,103,104,105,97,55,172,173,174,133,178,52,2,135,136,179,8,171,22,176,144,145,146,211,287,288,127,128,129,124,120,126,247,26,25,289,290,125,183,184,291,215,292,249,225,245,246,293,294,280,295,182,277,296,297,122,262,298,123,299]),import.meta.url)},ume="worker:port-closed";var Go;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Go||(Go={}));let LVe=0;function hme(){return LVe++}function FVe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function BE(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function aj(t,e,i,n){if(e.type===Go.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Go.INVOKE&&e.type!==Go.RESPONSE)return void t.postMessage(e);let s;if(FVe(i)?(s=nee(i.transferList),e.data=i.result):(s=nee(n),e.data=i),s){if(ht("ff")){for(const r of s)if("byteLength"in r&&r.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Go.INVOKE:throw o;case Go.RESPONSE:return void aj(t,{type:Go.RESPONSE,jobId:e.jobId,error:BE(o)})}}}t.postMessage(e,s)}else t.postMessage(e)}function HE(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function nee(t){if(!(t!=null&&t.length))return null;if(ht("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!zVe(i));return e.length?e:null}function zVe(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function s1t(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===ume;if(!(vd(e)||i))throw e;return}}const{CLOSE:see,ABORT:ree,INVOKE:oee,RESPONSE:a3,OPEN_PORT:aee,ON:qVe}=Go,VVe=2;let GVe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Go.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},L0=class Ib{static connect(e,i){const n=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const r=new Ib(n.port1,{channel:n,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=r),Ib.clients.set(r,s),n.port2}static loadWorker(e){const i=RVe[e];return i?i():Promise.resolve(null)}constructor(e,i,n){this._port=e,this._jobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new GVe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:see}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,n){return this.apply(e,[i],n)}apply(e,i,n){const s=n==null?void 0:n.signal,r=n==null?void 0:n.transferList;if(!this._port)return Promise.reject(new rt(ume,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=hme();return new Promise((l,c)=>{if(jc(s))return this._processWork(),void c(lr());const f=Jl(s,()=>{const _=this._outJobs.get(o);_&&(this._outJobs.delete(o),this._processWork(),Po(_.abortHandle),this._post({type:ree,jobId:o}),c(lr()))}),y={resolve:l,reject:c,abortHandle:f,debugInfo:e};this._outJobs.set(o,y),this._post({type:oee,jobId:o,methodName:e,abortable:s!=null},i,r)})}createInvokeProxy(e){return cme(this,e)}on(e,i){const n=new MessageChannel;function s(r){i(r.data)}return this._port.postMessage({type:Go.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",s),n.port1.start(),fn(()=>{n.port1.postMessage({type:Go.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:aee,port:e.port2}),e.port1}_processWork(){var o;if(this._outJobs.size>=VVe)return;const e=(o=this._jobQueue)==null?void 0:o.pop();if(!e)return;const{methodName:i,data:n,invokeOptions:s,resolver:r}=e;this.apply(i,n,s).then(l=>r.resolve(l)).catch(l=>r.reject(l))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Po(e.abortHandle),e.reject(lr(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const n=HE(e);if(n)switch(n.type){case a3:this._onResponseMessage(n);break;case oee:i?this._onInvokeMessage(n):this._invokeQueue.push(n);break;case ree:this._onAbortMessage(n);break;case see:this._onCloseMessage();break;case aee:this._onOpenPortMessage(n);break;case qVe:this._onOnMessage(n)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,s=i.get(n);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),i.delete(n))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Ib.clients.get(this)===e&&e.destroy(),Ib.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:n,data:s=[],abortable:r}=e,o=r?new AbortController:null,l=this._inJobs;let c,f=this._client,y=f[i];try{if(!y&&i&&i.includes(".")){const _=i.split(".");for(let x=0;x<_.length-1;x++)f=f[_[x]],y=f[_[x+1]]}if(typeof y!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:o?o.signal:null}),c=y.apply(f,s)}catch(_){return void this._post({type:a3,jobId:n,error:BE(_)})}zv(c)?(l.set(n,{controller:o,promise:c}),c.then(_=>{l.has(n)&&(l.delete(n),this._post({type:a3,jobId:n},_))},_=>{l.has(n)&&(l.delete(n),vd(_)||this._post({type:a3,jobId:n,error:BE(_||{message:`Error encountered at method ${i}`})}))})):this._post({type:a3,jobId:n},c)}_onOpenPortMessage(e){new Ib(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,n=this._client.on(e.eventType,r=>{i.postMessage(r)}),s=Xy(e.port,"message",r=>{const o=HE(r);(o==null?void 0:o.type)===Go.CLOSE&&(s.remove(),n.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:n,data:s}=e,r=this._outJobs;if(!r.has(i))return;const o=r.get(i);r.delete(i),this._processWork(),Po(o.abortHandle),n?o.reject(rt.fromJSON(JSON.parse(n))):o.resolve(s)}_post(e,i,n){return aj(this._port,e,i,n)}};L0.kernelInfo={buildDate:Cle,fullVersion:SV,revision:Ple},L0.clients=new Map;let jVe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new UF}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((n,s)=>{let r=!0;const o=l=>{oc(i.signal),r&&(r=!1,l())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let l=0;l<e.length;++l){const c=e[l];zv(c)?this._clientPromises[l]=c.then(f=>(this._clients[l]=new L0(f,i,this._ongoingJobsQueue),o(n),this._clients[l]),()=>(o(s),null)):(this._clients[l]=new L0(c,i,this._ongoingJobsQueue),this._clientPromises[l]=Promise.resolve(this._clients[l]),o(n))}})}broadcast(e,i,n){const s=new Array(this._clientPromises.length);for(let r=0;r<this._clientPromises.length;++r){const o=this._clientPromises[r];s[r]=o.then(l=>l==null?void 0:l.invoke(e,i,n))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(lr(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(n=>n==null?void 0:n.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,OVe(this)}invoke(e,i,n){return this.apply(e,[i],n)}apply(e,i,n){const s=Oc();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:n,resolver:s});for(let r=0;r<this._clientPromises.length;r++){const o=this._clients[r];o?o.jobAdded():this._clientPromises[r].then(l=>l==null?void 0:l.jobAdded())}return s.promise}createInvokeProxy(e){return cme(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>bm(this._clients.map(n=>n.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let n=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(r=>{r&&(i[s]=r.openPort()),--n==0&&e(i)})})}get test(){}};const BVe={async request(t,e){var o,l;const i=t.options,n=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&((o=_$(t.url))!=null&&o.after)?n:"array-buffer";const s=await es(t.url,i),r={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((l=s.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete r.data.signal,r;case"blob":r.data=await r.data.arrayBuffer();break;case"json":r.data=new TextEncoder().encode(JSON.stringify(r.data)).buffer;break;case"text":r.data=new TextEncoder().encode(r.data).buffer}return{result:r,transferList:[r.data]}}},lee={};function HVe(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...lee.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=lee.baseUrl),e}let UVe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...n)=>e[i](...n)})}},XI=class{constructor(){this._dispatcher=new UVe,this._workerPostMessage({type:Go.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){D2(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,n){this._dispatcher.addEventListener(e,i,n)}removeEventListener(e,i,n){this._dispatcher.removeEventListener(e,i,n)}_workerPostMessage(e){D2(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=HE(e);if(i&&i.type===Go.OPEN){const{modulePath:n,jobId:s}=i;let r=await L0.loadWorker(n);r||(r=await import(n));const o=L0.connect(r);this._workerPostMessage({type:Go.OPENED,jobId:s,data:o})}}};const YF=()=>qt.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:YVe}=Go,XVe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let j4,B4;const cee="Failed to create Worker. Fallback to execute module in main thread";async function WVe(){if(!ht("esri-workers"))return uee(new XI);if(!j4&&!B4)try{const e=XVe.split("{CONFIGURATION}").join(ZVe());j4=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){B4=e||{}}let t;if(j4)try{t=new Worker(j4,{name:"esri-worker-"+KVe++})}catch{YF().warn(cee,B4),t=new XI}else YF().warn(cee,B4),t=new XI;return uee(t)}async function uee(t){return new Promise(e=>{function i(s){const r=HE(s);r&&r.type===YVe&&(t.removeEventListener("message",i),t.removeEventListener("error",n),e(t))}function n(s){s.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",n),YF().warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new XI).addEventListener("message",i),t.addEventListener("error",n)}t.addEventListener("message",i),t.addEventListener("error",n)})}function ZVe(){let t;if(jn.default!=null){const s={...jn};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(jn));t.assetsPath=_l(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?_l(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=zc(),t.has={"esri-csp-restrictions":ht("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ht("esri-2d-update-debug"),"esri-2d-log-updating":ht("esri-2d-log-updating"),"featurelayer-pbf":ht("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ht("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ht("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ht("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ht("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ht("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":ht("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":ht("featurelayer-snapshot-enabled"),"esri-atomics":ht("esri-atomics"),"esri-shared-array-buffer":ht("esri-shared-array-buffer"),"esri-tiles-debug":ht("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ht("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ht("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=_l(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=_l(t.workers.workerPath):t.workers.workerPath=_l(jC("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=jn.workers.loaderConfig,i=HVe({baseUrl:e==null?void 0:e.baseUrl,locale:zc(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:Cle,fullVersion:SV,revision:Ple}})}let KVe=0;const{ABORT:hee,INVOKE:JVe,OPEN:QVe,OPENED:eGe,RESPONSE:l3}=Go;let tGe=class dme{static async create(e){const i=await WVe();return new dme(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",n=>{n.preventDefault(),qt.getLogger("esri.core.workers.WorkerOwner").error(n)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:n}=i,s=hme();return new Promise((r,o)=>{const l={resolve:r,reject:o,abortHandle:Fae(n,()=>{this._outJobs.delete(s),this._post({type:hee,jobId:s})})};this._outJobs.set(s,l),this._post({type:QVe,jobId:s,modulePath:e})})}_onMessage(e){const i=HE(e);if(i)switch(i.type){case eGe:this._onOpenedMessage(i);break;case l3:this._onResponseMessage(i);break;case hee:this._onAbortMessage(i);break;case JVe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,s=i.get(n);s&&(s.controller&&s.controller.abort(),i.delete(n))}_onInvokeMessage(e){const{methodName:i,jobId:n,data:s,abortable:r}=e,o=r?new AbortController:null,l=this._inJobs,c=BVe[i];let f;try{if(typeof c!="function")throw new TypeError(`${i} is not a function`);f=c.call(null,s,{signal:o?o.signal:null})}catch(y){return void this._post({type:l3,jobId:n,error:BE(y)})}zv(f)?(l.set(n,{controller:o,promise:f}),f.then(y=>{l.has(n)&&(l.delete(n),this._post({type:l3,jobId:n},y))},y=>{l.has(n)&&(l.delete(n),y||(y={message:"Error encountered at method"+i}),vd(y)||this._post({type:l3,jobId:n,error:BE(y||{message:`Error encountered at method ${i}`})}))})):this._post({type:l3,jobId:n},f)}_onOpenedMessage(e){const{jobId:i,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Po(s.abortHandle),s.resolve(n))}_onResponseMessage(e){const{jobId:i,error:n,data:s}=e,r=this._outJobs.get(i);r&&(this._outJobs.delete(i),Po(r.abortHandle),n?r.reject(rt.fromJSON(JSON.parse(n))):r.resolve(s))}_post(e,i,n){return aj(this.worker,e,i,n)}};const dee=ht("host-browser")?Math.min(navigator.hardwareConcurrency-1,ht("workers-pool-size")??8):0;let qy=ht("esri-mobile")?Math.min(dee,3):dee;qy||(qy=ht("safari")&&ht("mac")?7:2);let fee=0;const WI=[];function c1t(){fme()}async function H4(t,e){const i=new jVe,{registryTarget:n,...s}=e;return await i.open(t,s),n&&NVe(n,i),i}async function iGe(t,e={}){if(typeof t!="string")throw new rt("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ht("host-webworker")&&!ht("esri-workers")&&(i="local"),i==="local"){let n=await L0.loadWorker(t);n||(n=await import(t)),oc(e.signal);const s=e.client||n;return H4([L0.connect(n,e.schedule)],{...e,client:s})}if(await fme(),oc(e.signal),i==="dedicated"){const n=fee++%qy;return H4([await WI[n].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const n=Math.min(e.maxNumWorkers,qy);if(n<qy){const s=new Array(n);for(let r=0;r<n;++r){const o=fee++%qy;s[r]=WI[o].open(t,e)}return H4(s,e)}}return H4(WI.map(n=>n.open(t,e)),e)}let U4=null;async function fme(){if(U4)return U4;new AbortController;const t=[];for(let e=0;e<qy;e++){const i=tGe.create(e).then(n=>(WI[e]=n,n));t.push(i)}return U4=Promise.all(t),U4}function pee(t,e,i){if(t.hasM==null||t.hasZ)for(const n of e)for(const s of n)s.length>2&&(s[2]*=i)}function nGe(t,e,i){if(!t&&!e||!i)return;const n=u6(i);mee(t,i,n),mee(e,i,n)}function mee(t,e,i){if(t)for(const n of t)sGe(n.geometry,e,i)}function sGe(t,e,i){if(!(t!=null&&t.spatialReference)||ea(t.spatialReference,e))return;const n=u6(t.spatialReference)/i;if(n!==1){if("x"in t)t.z!=null&&(t.z*=n);else if("rings"in t)pee(t,t.rings,n);else if("paths"in t)pee(t,t.paths,n);else if("points"in t&&(t.hasM==null||t.hasZ))for(const s of t.points)s.length>2&&(s[2]*=n)}}function gee(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const n=Zde(i.geometryType,e,t.outSpatialReference);if(n!=null)for(const s of i.features)n(s.geometry)}var XF;const WF=new mn({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ro=XF=class extends St{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){var s;const i=Gi.fromJSON(e.spatialReference),n=[];for(let r=0;r<t.length;r++){const o=t[r],l=th.fromJSON(o),c=(s=o.geometry)==null?void 0:s.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=i);const f=o.aggregateGeometries,y=l.aggregateGeometries;if(f&&y!=null)for(const _ in y){const x=y[_],S=f[_],P=S==null?void 0:S.spatialReference;x==null||P||(x.spatialReference=i)}n.push(l)}return n}writeGeometryType(t,e,i,n){if(t)return void WF.write(t,e,i,n);const{features:s}=this;if(s){for(const r of s)if((r==null?void 0:r.geometry)!=null)return void WF.write(r.geometry.type,e,i,n)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,n=XC(t);return n&&!i&&e.spatialReference&&(n.spatialReference=Gi.fromJSON(e.spatialReference)),n}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const n of i)if(n&&n.geometry!=null&&n.geometry.spatialReference)return void(e.spatialReference=n.geometry.spatialReference.toJSON())}}clone(){return new XF(this.cloneProperties())}cloneProperties(){return Ue({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const n=e.features[i];if(n.geometry){const s=t==null?void 0:t[i];n.geometry=(s==null?void 0:s.toJSON())||n.geometry}}return e}quantize(t){const{scale:[e,i],translate:[n,s]}=t,r=f=>Math.round((f-n)/e),o=f=>Math.round((s-f)/i),l=this.features,c=this._getQuantizationFunction(this.geometryType,r,o);for(let f=0,y=l.length;f<y;f++)c!=null&&c(l[f].geometry)||(l.splice(f,1),f--,y--);return this.transform=t,this}unquantize(){var x,S;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[n,s],scale:[r,o]}=i,l=P=>P*r+n,c=P=>s-P*o;let f=null,y=null;if(this.hasZ&&((x=i==null?void 0:i.scale)==null?void 0:x[2])!=null){const{translate:[,,P],scale:[,,A]}=i;f=D=>D*A+P}if(this.hasM&&((S=i==null?void 0:i.scale)==null?void 0:S[3])!=null){const{translate:[,,,P],scale:[,,,A]}=i;y=D=>D==null?D:D*A+P}const _=this._getHydrationFunction(t,l,c,f,y);for(const{geometry:P}of e)P!=null&&_&&_(P);return this.transform=null,this}_quantizePoints(t,e,i){let n,s;const r=[];for(let o=0,l=t.length;o<l;o++){const c=t[o];if(o>0){const f=e(c[0]),y=i(c[1]);f===n&&y===s||(r.push([f-n,y-s]),n=f,s=y)}else n=e(c[0]),s=i(c[1]),r.push([n,s])}return r.length>0?r:null}_getQuantizationFunction(t,e,i){return t==="point"?n=>(n.x=e(n.x),n.y=i(n.y),n):t==="polyline"||t==="polygon"?n=>{const s=l2(n)?n.rings:n.paths,r=[];for(let o=0,l=s.length;o<l;o++){const c=s[o],f=this._quantizePoints(c,e,i);f&&r.push(f)}return r.length>0?(l2(n)?n.rings=r:n.paths=r,n):null}:t==="multipoint"?n=>{const s=this._quantizePoints(n.points,e,i);return s&&s.length>0?(n.points=s,n):null}:t==="extent"?n=>n:null}_getHydrationFunction(t,e,i,n,s){return t==="point"?r=>{r.x=e(r.x),r.y=i(r.y),n&&(r.z=n(r.z))}:t==="polyline"||t==="polygon"?r=>{const o=l2(r)?r.rings:r.paths;let l,c;for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];x>0?(l+=P[0],c+=P[1]):(l=P[0],c=P[1]),P[0]=e(l),P[1]=i(c)}}if(n&&s)for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];P[2]=n(P[2]),P[3]=s(P[3])}}else if(n)for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];P[2]=n(P[2])}}else if(s)for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];P[2]=s(P[2])}}}:t==="extent"?r=>{r.xmin=e(r.xmin),r.ymin=i(r.ymin),r.xmax=e(r.xmax),r.ymax=i(r.ymax),n&&r.zmax!=null&&r.zmin!=null&&(r.zmax=n(r.zmax),r.zmin=n(r.zmin)),s&&r.mmax!=null&&r.mmin!=null&&(r.mmax=s(r.mmax),r.mmin=s(r.mmin))}:t==="multipoint"?r=>{const o=r.points;let l,c;for(let f=0,y=o.length;f<y;f++){const _=o[f];f>0?(l+=_[0],c+=_[1]):(l=_[0],c=_[1]),_[0]=e(l),_[1]=i(c)}if(n&&s)for(let f=0,y=o.length;f<y;f++){const _=o[f];_[2]=n(_[2]),_[3]=s(_[3])}else if(n)for(let f=0,y=o.length;f<y;f++){const _=o[f];_[2]=n(_[2])}else if(s)for(let f=0,y=o.length;f<y;f++){const _=o[f];_[2]=s(_[2])}}:null}};I([O({type:String,json:{write:!0}})],Ro.prototype,"displayFieldName",void 0),I([O({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ro.prototype,"exceededTransferLimit",void 0),I([O({type:[th],json:{write:!0}})],Ro.prototype,"features",void 0),I([Dt("features")],Ro.prototype,"readFeatures",null),I([O({type:[ZG],json:{write:!0}})],Ro.prototype,"fields",void 0),I([O({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:WF.read}}})],Ro.prototype,"geometryType",void 0),I([zt("geometryType")],Ro.prototype,"writeGeometryType",null),I([O({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ro.prototype,"hasM",void 0),I([O({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ro.prototype,"hasZ",void 0),I([O({types:WC,json:{write:!0}})],Ro.prototype,"queryGeometry",void 0),I([Dt("queryGeometry")],Ro.prototype,"readQueryGeometry",null),I([O({type:Gi,json:{write:!0}})],Ro.prototype,"spatialReference",void 0),I([zt("spatialReference")],Ro.prototype,"writeSpatialReference",null),I([O({json:{write:!0}})],Ro.prototype,"transform",void 0),Ro=XF=I([De("esri.rest.support.FeatureSet")],Ro),Ro.prototype.toJSON.isDefaultToJSON=!0;const pme=Ro;let rGe=0,Rp=class extends GC.LoadableMixin(EV(ci)){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const n=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);gee(e,this.layer.spatialReference,n);const s=pme.fromJSON(n);if(!this._requiresClientGraphicMapping())return s;const r=this.layer.objectIdField;for(const o of s.features){const l=o.attributes[r],c=this._idToClientGraphic.get(l);c&&(o.geometry=c.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new rt("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const n=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return gee(e,this.layer.spatialReference,n),n}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(n=>({count:n.count,extent:dr.fromJSON(n.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new rt("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let n=null;const s=[],r=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=y=>"objectId"in y&&y.objectId!=null?y.objectId:"attributes"in y&&y.attributes[i]!=null?y.attributes[i]:null;if(e.addFeatures&&(n=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const y of e.deleteFeatures){const _=o(y);_!=null&&s.push(_)}const l=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const y of e.updateFeatures)if(r.push(this._serializeFeature(y)),l){const _=o(y);_!=null&&l.set(_,y)}}nGe(n?n.features:null,r,this.layer.spatialReference);const{fullExtent:c,featureEditResults:f}=await this._connection.invoke("applyEdits",{adds:n?n.features:[],updates:r,deletes:s});return this.fullExtent=c,n&&n.finish(f.uidToObjectId),this._updateClientGraphicIds(l,f),this._createEditsResult(f)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const n=[];for(const{geometry:s}of e)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||n.push(s.load({signal:i}));n.length&&await Promise.all(n)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const n of i.updateResults){if(!n.success)continue;const s=e.get(n.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const n of i.deleteResults)n.success&&this._idToClientGraphic.delete(n.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new rt("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,n=new Array(e.length);let s=null;for(let o=0;o<e.length;o++){const l=e[o],c=this._serializeFeature(l);s||l.geometry==null||(s=l.geometry.type),n[o]=c,i.set(`${c.uid}`,l)}const r=this;return{features:n,inferredGeometryType:s,finish(o){const l=r.sourceJSON.objectIdField;for(const c in o){const f=o[c],y=i.get(c);y&&(y.attributes||(y.attributes={}),f===-1?delete y.attributes[l]:y.attributes[l]=f,r._addIdToClientGraphic(y))}}}}_addIdToClientGraphic(e){var s;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,n=(s=e.attributes)==null?void 0:s[i];n!=null&&this._idToClientGraphic.set(n,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,n=this._geometryForSerialization(e),s=(rGe++).toString();return n?{uid:s,geometry:n.toJSON(),attributes:i}:{uid:s,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?el.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await iGe("MemorySourceWorker",{strategy:ht("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:n,objectIdField:s,hasM:r,hasZ:o,timeInfo:l,dateFieldsTimeZone:c}=this.layer,f=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const y=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",P=>{qt.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),P.preventDefault()}));const _={features:y.features,fields:i==null?void 0:i.map(P=>P.toJSON()),geometryType:mK.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&r,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:f?null:n&&n.toJSON(),timeInfo:(l==null?void 0:l.toJSON())??null,dateFieldsTimeZone:c},x=await this._connection.invoke("load",_,{signal:e});for(const P of x.warnings)qt.getLogger(this.layer).warn("#load()",`${P.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:P});x.featureErrors.length&&qt.getLogger(this.layer).warn("#load()",`Encountered ${x.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:x.featureErrors});const S=x.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(y.inferredGeometryType)&&(S.geometryType=mK.toJSON(y.inferredGeometryType)),this.sourceJSON=S,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),y.finish(x.assignedObjectIds)}};I([XV({Type:th,ensureType:Qo(th)})],Rp.prototype,"itemType",void 0),I([O()],Rp.prototype,"type",void 0),I([O({constructOnly:!0})],Rp.prototype,"layer",void 0),I([O({readOnly:!0})],Rp.prototype,"_workerGeometryType",null),I([O()],Rp.prototype,"sourceJSON",void 0),Rp=I([De("esri.layers.graphics.sources.MemorySource")],Rp);function oGe(t){return"portalItem"in t}const aGe=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):oGe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return I([O({type:String})],e.prototype,"apiKey",null),e=I([De("esri.layers.mixins.APIKeyMixin")],e),e},mme={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},gme=Object.values(mme),yme=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${gme.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),lGe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${gme.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),cGe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function h1t(t){return yme.test(t)}function m5(t){if(t==null)return null;const e=wl(t),i=(e==null?void 0:e.path.match(yme))||(e==null?void 0:e.path.match(lGe));if(!i)return null;const[,n,s,r,o]=i,l=s.indexOf("/");return{title:lj(l!==-1?s.slice(l+1):s),serverType:mme[r.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:n}}}function uGe(t){const e=wl(t).path.match(cGe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function lj(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function hGe(t,e){const i=[];if(t){const n=m5(t);n!=null&&n.title&&i.push(n.title)}if(e){const n=lj(e);i.push(n)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function vme(t){let e=Uu(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")))}function dGe(t,e){return t&&wle(Sle(t,e))}function fGe(t){let{url:e}=t;if(!e)return{url:e};e=Sle(e,t.logger);const i=wl(e),n=m5(i.path);let s;if(n!=null)n.sublayer!=null&&t.layer.layerId==null&&(s=n.sublayer),e=n.url.path;else if(t.nonStandardUrlAllowed){const r=uGe(i.path);r!=null&&(e=r.serviceUrl,s=r.sublayerId)}return{url:wle(e),layerId:s}}function pGe(t,e,i,n,s){gv(e,n,"url",s),n.url&&t.layerId!=null&&(n.url=N2(n.url,i,t.layerId.toString()))}function d1t(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),n=e.includes("/mapserver/wmsserver"),s=e.includes("/imageserver/wmsserver"),r=e.includes("/wmsserver");return i&&(n||s||r)}function f1t(t){var n;if(!t)return!1;const e=new Ql(_l(t)),i=(n=e.authority)==null?void 0:n.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const mGe=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=m5(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",dGe(i,qt.getLogger(this)))}};return I([O()],e.prototype,"title",null),I([O({type:String})],e.prototype,"url",null),e=I([De("esri.layers.mixins.ArcGISService")],e),e},gGe=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return I([O({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=I([De("esri.layers.mixins.CustomParametersMixin")],e),e},yGe=L7e(),_me=new Map,bme=new Map;async function p1t(t,e,i){if(!t||!i)return!1;if(!e)return!0;const n=new URL(t).host;let s=_me.get(n);if(!s){const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await es(r,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===e}async function m1t(t,e,i=!1){var r,o,l;if(!t||!e)return!0;const n=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(r=bme.get(n))==null?void 0:r.entries();if(s){for(const[c,f]of s)if(f.name===e){const y=!((o=f.stack)!=null&&o.hasForwardEdits());if(!y&&i){const[{deleteForwardEdits:_},{default:x}]=await Promise.all([st(()=>import("./deleteForwardEdits-BGRUvrMt.js"),__vite__mapDeps([300,14]),import.meta.url),st(()=>import("./DeleteForwardEditsParameters-Cl-AECmc.js"),[],import.meta.url)]),S=await _(n,c,new x({sessionId:yGe,moment:f.moment}));return S.success&&((l=f.stack)==null||l.clearForwardEdits()),S.success}return y}}return!0}function vGe(t,e){var s;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=bme.get(i))==null?void 0:s.entries();if(n){for(const[r,o]of n)if(o.name===e)return o.lockType==="edit"}return!1}const cj=new Ia.EventEmitter;function _Ge(t){return cj.on("apply-edits",new WeakRef(t))}function bGe(t){return cj.on("update-moment",new WeakRef(t))}function g1t(t,e,i=null,n=!1){const s=Oc();return n=e==null||n,cj.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:n,result:s.promise}),s}const xme=Symbol();function y1t(t){return t!=null&&typeof t=="object"&&xme in t}function c3(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function _N(t,e,i){const n=new URL(t).host,s=_me.get(n),r=o=>!o||o===s;return r(e)&&r(i)||e===i}const xGe=t=>{var e;let i=class extends t{constructor(...n){super(...n),this[e]=!0,this._applyEditsHandler=s=>{const{serviceUrl:r,layerId:o,gdbVersion:l,mayReceiveServiceEdits:c,result:f}=s,y=r===this.url,_=o!=null&&this.layerId!=null&&o===this.layerId,x=c3(this),S=c3(this)&&_N(r,l,this.gdbVersion);if(!y||x&&!S||!_&&!c)return;const P=f.then(A=>{var F;if(this.lastEditsEventDate=new Date,_&&(A.addedFeatures.length||A.updatedFeatures.length||A.deletedFeatures.length||A.addedAttachments.length||A.updatedAttachments.length||A.deletedAttachments.length))return this.emit("edits",Ue(A)),A;const D=(F=A.editedFeatures)==null?void 0:F.find(({layerId:G})=>G===this.layerId);if(D){const{adds:G,updates:V,deletes:B}=D.editedFeatures,W={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:G?G.map(({attributes:J})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],deletedFeatures:B?B.map(({attributes:J})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],updatedFeatures:V?V.map(({current:{attributes:J}})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],editedFeatures:Ue(A.editedFeatures),exceededTransferLimit:!1,historicMoment:Ue(A.historicMoment)};return this.emit("edits",W),W}const N={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:Ue(A.editedFeatures),exceededTransferLimit:!1,historicMoment:Ue(A.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(r,l,N.historicMoment)&&this.emit("edits",N),N}).then(A=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(r,l,A.historicMoment)&&(this.historicMoment=A.historicMoment),A));this.emit("apply-edits",{result:P})},this._updateMomentHandler=s=>{const{serviceUrl:r,gdbVersion:o,moment:l}=s,c=r===this.url,f=c3(this),y=c3(this)&&_N(r,o,this.gdbVersion),_=c3(this)&&!_N(r,this.gdbVersion,null);c&&f&&y&&_&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then(()=>{this.addHandles(_Ge(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(bGe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(n,s,r){return"historicMoment"in this&&this.historicMoment!==r&&vGe(n,s)}};return e=xme,I([O()],i.prototype,"lastEditsEventDate",void 0),i=I([De("esri.layers.mixins.EditBusLayer")],i),i};var ZF;const bN=new mn({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),xN=new mn({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Hd=ZF=class extends St{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:n,timeExtent:s,objectIds:r,units:o,distance:l}=this;return new Q0({geometry:Ue(i),objectIds:Ue(r),spatialRelationship:n,timeExtent:Ue(s),where:e,units:o,distance:l,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:n,objectIds:s,units:r,distance:o}=this;return new ZF({geometry:Ue(e),objectIds:Ue(s),spatialRelationship:i,timeExtent:Ue(n),where:t,units:r,distance:o})}};I([O({type:String,json:{write:!0}})],Hd.prototype,"where",void 0),I([O({types:WC,json:{write:!0}})],Hd.prototype,"geometry",void 0),I([O({type:bN.apiValues,json:{name:"spatialRel",read:{reader:bN.read},write:{allowNull:!1,writer:bN.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Hd.prototype,"spatialRelationship",void 0),I([O({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Hd.prototype,"distance",void 0),I([O({type:[Number],json:{write:!0}})],Hd.prototype,"objectIds",void 0),I([O({type:xN.apiValues,json:{read:xN.read,write:{writer:xN.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Hd.prototype,"units",void 0),I([O({type:O0,json:{write:!0}})],Hd.prototype,"timeExtent",void 0),Hd=ZF=I([De("esri.layers.support.FeatureFilter")],Hd);const wGe=Hd;var KF;const yee={read:{reader:DE},write:{writer:NE,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},vee={read:{reader:DE},write:{writer:NE,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},_ee={name:"showExcludedLabels",default:!0};let _y=KF=class extends St{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var n,s;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return(n=e.messages)==null||n.push(new rt("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=e.messages)==null||s.push(new rt("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new KF({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};I([O({type:wGe,json:{write:{allowNull:!0,writer(t,e,i,n){const s=t==null?void 0:t.write({},n);s&&Object.keys(s).length!==0?il(i,s,e):il(i,null,e)}}}})],_y.prototype,"filter",void 0),I([O({json:{read:DE,write:{writer:NE,allowNull:!0},origins:{"web-map":yee,"portal-item":yee}}})],_y.prototype,"includedEffect",void 0),I([O({json:{read:DE,write:{writer:NE,allowNull:!0},origins:{"web-map":vee,"portal-item":vee}}})],_y.prototype,"excludedEffect",void 0),I([O({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":_ee,"portal-item":_ee}}})],_y.prototype,"excludedLabelsVisible",void 0),_y=KF=I([De("esri.layers.support.FeatureEffect")],_y);const SGe=_y,bee={write:{allowNull:!0}},EGe={type:SGe,json:{origins:{"web-map":bee,"portal-item":bee}}},CGe=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return I([O(EGe)],e.prototype,"featureEffect",void 0),e=I([De("esri.layers.mixins.FeatureEffectLayer")],e),e};var _S;const O6=Ta()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),wme=O6.jsonValues.slice();D4e(wme,"orthometric");const oE=Ta()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let $h=_S=class extends St{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return O6.write(t,e,i)}readHeightModel(t,e,i){return O6.read(t)||(i!=null&&i.messages&&i.messages.push(PGe(t,{context:i})),null)}readHeightUnit(t,e,i){return oE.read(t)||(i!=null&&i.messages&&i.messages.push(xee(t,{context:i})),null)}readHeightUnitService(t,e,i){return Ule(t)||oE.read(t)||(i!=null&&i.messages&&i.messages.push(xee(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new _S({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=Yle(e);return new _S({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new _S;return e.read(t,{origin:"web-scene"}),e}};function xee(t,e){return new ld("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function PGe(t,e){return new ld("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}I([O({type:O6.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:wme,default:"ellipsoidal"}}}})],$h.prototype,"heightModel",void 0),I([zt("web-scene","heightModel")],$h.prototype,"writeHeightModel",null),I([Dt(["web-scene","service"],"heightModel")],$h.prototype,"readHeightModel",null),I([O({type:oE.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:oE.jsonValues,write:oE.write}}}})],$h.prototype,"heightUnit",void 0),I([Dt("web-scene","heightUnit")],$h.prototype,"readHeightUnit",null),I([Dt("service","heightUnit")],$h.prototype,"readHeightUnitService",null),I([O({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],$h.prototype,"vertCRS",void 0),I([Dt("service","vertCRS",["vertCRS","ellipsoid","geoid"])],$h.prototype,"readVertCRS",null),$h=_S=I([De("esri.geometry.HeightModelInfo")],$h);const TGe=$h;let xp=class extends Un(St){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};I([O()],xp.prototype,"creatorField",void 0),I([O()],xp.prototype,"creationDateField",void 0),I([O()],xp.prototype,"editorField",void 0),I([O()],xp.prototype,"editDateField",void 0),I([O()],xp.prototype,"realm",void 0),I([O(g6("dateFieldsTimeReference",!0))],xp.prototype,"timeZone",void 0),xp=I([De("esri.layers.support.EditFieldsInfo")],xp);const IGe=xp;let Jd=class extends Un(St){constructor(e){super(e)}};I([O({constructOnly:!0,json:{write:!0}})],Jd.prototype,"name",void 0),I([O({constructOnly:!0,json:{write:!0}})],Jd.prototype,"fields",void 0),I([O({constructOnly:!0,json:{write:!0}})],Jd.prototype,"isAscending",void 0),I([O({constructOnly:!0,json:{write:!0}})],Jd.prototype,"indexType",void 0),I([O({constructOnly:!0,json:{write:!0}})],Jd.prototype,"isUnique",void 0),I([O({constructOnly:!0,json:{write:!0}})],Jd.prototype,"description",void 0),Jd=I([De("esri.layers.support.FeatureIndex")],Jd);async function MGe(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=Sme(t));const n=AGe(t),s=t.capabilities.query.supportsPagination;e.start=0,e.num=n;let r=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(r==null?r=o:r.features=r.features.concat(o.features),r.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;e.start+=n}return r}function AGe(t){return Sme(t)*kGe(t)}function kGe(t){return t.capabilities.query.maxRecordCount||2e3}function Sme(t){return t.capabilities.query.supportsMaxRecordCountFactor?Q0.MAX_MAX_RECORD_COUNT_FACTOR:1}var JF;let Lo=JF=class extends St{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new JF(Ue({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};I([O({type:[String],json:{write:!0}})],Lo.prototype,"attachmentTypes",void 0),I([O({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Lo.prototype,"attachmentsWhere",void 0),I([O({type:Boolean,json:{write:!0}})],Lo.prototype,"cacheHint",void 0),I([O({type:[String],json:{write:!0}})],Lo.prototype,"keywords",void 0),I([O({type:[String],json:{write:!0}})],Lo.prototype,"globalIds",void 0),I([O({json:{write:!0}})],Lo.prototype,"name",void 0),I([O({type:Number,json:{read:{source:"resultRecordCount"}}})],Lo.prototype,"num",void 0),I([O({type:[Number],json:{write:!0}})],Lo.prototype,"objectIds",void 0),I([O({type:Boolean,json:{default:!1,write:!0}})],Lo.prototype,"returnMetadata",void 0),I([O({type:[Number],json:{write:!0}})],Lo.prototype,"size",void 0),I([O({type:Number,json:{read:{source:"resultOffset"}}})],Lo.prototype,"start",void 0),I([zt("start"),zt("num")],Lo.prototype,"writeStart",null),I([O({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Lo.prototype,"where",void 0),Lo=JF=I([De("esri.rest.support.AttachmentQuery")],Lo),Lo.from=Qo(Lo);const DGe=Lo;var QF;let nr=QF=class extends St{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new QF(Ue({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};I([O({type:Boolean,json:{write:!0}})],nr.prototype,"cacheHint",void 0),I([O({type:Vh,json:{write:!0}})],nr.prototype,"dynamicDataSource",void 0),I([O({type:String,json:{write:!0}})],nr.prototype,"gdbVersion",void 0),I([O({type:Number,json:{write:!0}})],nr.prototype,"geometryPrecision",void 0),I([O({type:Date})],nr.prototype,"historicMoment",void 0),I([zt("historicMoment")],nr.prototype,"_writeHistoricMoment",null),I([O({type:Number,json:{write:!0}})],nr.prototype,"maxAllowableOffset",void 0),I([O({json:{write:!0}})],nr.prototype,"objectIds",void 0),I([O({type:[String],json:{write:!0}})],nr.prototype,"orderByFields",void 0),I([O({type:[String],json:{write:!0}})],nr.prototype,"outFields",void 0),I([O({type:Gi,json:{read:{source:"outSR"},write:{target:"outSR"}}})],nr.prototype,"outSpatialReference",void 0),I([O({json:{write:!0}})],nr.prototype,"relationshipId",void 0),I([O({type:Number,json:{read:{source:"resultOffset"}}})],nr.prototype,"start",void 0),I([zt("start"),zt("num")],nr.prototype,"writeStart",null),I([O({type:Number,json:{read:{source:"resultRecordCount"}}})],nr.prototype,"num",void 0),I([O({json:{write:!0}})],nr.prototype,"returnGeometry",void 0),I([O({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],nr.prototype,"returnM",void 0),I([O({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],nr.prototype,"returnZ",void 0),I([O({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],nr.prototype,"where",void 0),nr=QF=I([De("esri.rest.support.RelationshipQuery")],nr),nr.from=Qo(nr);const uj=nr,b1t=Object.freeze(Object.defineProperty({__proto__:null,default:uj},Symbol.toStringTag,{value:"Module"})),ez=new mn({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function NGe(t,e,i,n){const s=await e1(t);if(await hj(t,e,n),!s.addAttachment)throw new rt(n,"Layer source does not support addAttachment capability");return s.addAttachment(e,i)}function hj(t,e,i){var r,o;const{attributes:n}=e,{objectIdField:s}=t;return(o=(r=t.capabilities)==null?void 0:r.data)!=null&&o.supportsAttachment?e?n?s&&n[s]?Promise.resolve():Promise.reject(new rt(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new rt(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new rt(i,"A feature is required to add/delete/update attachments")):Promise.reject(new rt(i,"this layer doesn't support attachments"))}async function OGe(t,e,i,n,s){const r=await e1(t);if(await hj(t,e,s),!r.updateAttachment)throw new rt(s,"Layer source does not support updateAttachment capability");return r.updateAttachment(e,i,n)}async function $Ge(t,e,i){const{applyEdits:n}=await st(()=>import("./editingSupport-BipxZ0Ut.js"),__vite__mapDeps([141,12,13,14,15,65]),import.meta.url),s=await t.load();let r=i;return s.type==="feature"&&s.infoFor3D&&e.deleteFeatures!=null&&s.globalIdField!=null&&(r={...r,globalIdToObjectId:await tje(s,e.deleteFeatures,s.globalIdField)}),n(s,s.source,e,i)}async function RGe(t,e,i){const{uploadAssets:n}=await st(()=>import("./editingSupport-BipxZ0Ut.js"),__vite__mapDeps([141,12,13,14,15,65]),import.meta.url),s=await t.load();return n(s,s.source,e,i)}async function LGe(t,e,i,n){const s=await e1(t);if(await hj(t,e,n),!s.deleteAttachments)throw new rt(n,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(e,i)}async function FGe(t,e,i){const n=(await t.load({signal:e==null?void 0:e.signal})).source;if(!n.fetchRecomputedExtents)throw new rt(i,"Layer source does not support fetchUpdates capability");return n.fetchRecomputedExtents(e)}async function zGe(t,e,i,n){var S,P;e=DGe.from(e),await t.load();const s=t.source,r=t.capabilities;if(!((S=r==null?void 0:r.data)!=null&&S.supportsAttachment))throw new rt(n,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:l,globalIds:c,num:f,size:y,start:_,where:x}=e;if(!((P=r==null?void 0:r.operations)!=null&&P.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(c==null?void 0:c.length)>0||(y==null?void 0:y.length)>0||f||_||x))throw new rt(n,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(l!=null&&l.length||c!=null&&c.length||x))throw new rt(n,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!s.queryAttachments)throw new rt(n,"Layer source does not support queryAttachments capability",e);return s.queryAttachments(e)}async function qGe(t,e,i,n){const s=await e1(t);if(!s.queryObjectIds)throw new rt(n,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(Q0.from(e)??t.createQuery(),i)}async function VGe(t,e,i,n){const s=await e1(t);if(!s.queryFeatureCount)throw new rt(n,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(Q0.from(e)??t.createQuery(),i)}async function GGe(t,e,i,n){const s=await e1(t);if(!s.queryExtent)throw new rt(n,"Layer source does not support queryExtent capability");return s.queryExtent(Q0.from(e)??t.createQuery(),i)}async function jGe(t,e,i,n){const s=await e1(t);if(!s.queryRelatedFeatures)throw new rt(n,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(uj.from(e),i)}async function BGe(t,e,i,n){const s=await e1(t);if(!s.queryRelatedFeaturesCount)throw new rt(n,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(uj.from(e),i)}async function HGe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:n}=await e.refresh();if(n!=null&&(t.sourceJSON={...t.sourceJSON,...n},t.read(n,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await pde(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function UGe(t){var o,l;const e=new Q0,i=(o=t.capabilities)==null?void 0:o.data,n=(l=t.capabilities)==null?void 0:l.query;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,n&&(e.compactGeometryEnabled=n.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=n.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:s,timeExtent:r}=t;return e.timeExtent=s!=null&&r!=null?r.offset(-s.value,s.unit):r||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function Eme(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const n of i)if(n.type==="esriFieldTypeGlobalID")return n.name}}function Cme(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const n of i)if(n.type==="esriFieldTypeOID")return n.name}}function YGe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function XGe(t,e){const{subtypes:i,subtypeField:n}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!n)return null;const s=e.attributes[n];return s==null?null:i.find(r=>r.code===s)}function WGe(t,e){var o,l;const{fieldsIndex:i,subtypeField:n}=t,{name:s,type:r}=i.get(e)??{};if(!s)return null;if((n&&((o=i.get(n))==null?void 0:o.name))===s&&((l=t.subtypes)!=null&&l.length)){const c=t.subtypes.map(f=>new zy({code:Pme(f.code,r),name:f.name}));if(c!=null&&c.length)return new LA({codedValues:c})}return null}function ZGe(t,e){var r,o;const{fieldsIndex:i}=t,{name:n,type:s}=i.get(e)??{};if(!n)return null;if(("typeIdField"in t?(r=i.get(t.typeIdField))==null?void 0:r.name:null)===n&&"types"in t&&((o=t.types)!=null&&o.length)){const l=t.types.map(c=>new zy({code:Pme(c.id,s),name:c.name}));return new LA({codedValues:l})}return null}function Pme(t,e){return e?Dde({type:e})&&typeof t=="number"?`${t}`:jOe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function e1(t){return(await t.load()).source}async function KGe(t,e){if(!Li||Li.findCredential(t))return;let i;try{const n=await Bde(t,e);n&&(i=await Li.checkSignInStatus(`${n}/sharing`))}catch{}if(i)try{const n=e!=null?e.signal:null;await Li.getCredential(t,{signal:n})}catch{}}async function JGe(t,e,i){var s;const n=(s=t.parsedUrl)==null?void 0:s.path;n&&t.authenticationTriggerEvent===e&&await KGe(n,i)}function QGe(t){return!ZI(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const wN=vx({types:epe});function dj(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new rj({defaultSymbol:wN(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:wN(n.symbol,n,e)}))}):new Fx({symbol:wN(t.defaultSymbol,t,e)})}function eje(t){var n,s,r;let e=(n=t.sourceJSON)==null?void 0:n.cacheMaxAge;if(!e)return!1;const i=(r=(s=t.editingInfo)==null?void 0:s.lastEditDate)==null?void 0:r.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function tje(t,e,i){if(e==null)return null;const n=[],{objectIdField:s}=t;if(e.forEach(f=>{let y=null;if("attributes"in f){const{attributes:_}=f;y={globalId:_[i],objectId:_[s]!=null&&_[s]!==-1?_[s]:null}}else y={globalId:f.globalId,objectId:f.objectId!=null&&f.objectId!==-1?f.objectId:null};y.globalId!=null&&(y.objectId!=null&&y.objectId!==-1||n.push(y.globalId))}),n.length===0)return null;const r=t.createQuery();r.where=n.map(f=>`${i}='${f}'`).join(" OR "),r.returnGeometry=!1,r.outFields=[s,i],r.cacheHint=!1;const o=await T7e(MGe(t,r));if(!o.ok)return null;const l=new Map,c=o.value.features;for(const f of c){const y=f.attributes[i],_=f.attributes[s];y!=null&&_!=null&&_!==-1&&l.set(F7e(y),_)}return l}function ije(t,e,i){if(!e||!i||!t)return null;const n=i.getAttribute(e);return n==null?null:t.find(s=>{const{id:r}=s;return r!=null&&r.toString()===n.toString()})??null}function ZI(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||nje(t)}function nje(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map(n=>n.trim()).includes("map"))}function sje(t,e,i){const n=e==null?void 0:e.queryBins;if(!n)throw new rt(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!n.supportsAutoInterval)throw new rt(i,"Layer source does not support auto-interval binning");break;case"date":if(!n.supportsDate)throw new rt(i,"Layer source does not support date binning");break;case"fixed-boundaries":if(!n.supportsFixedBoundaries)throw new rt(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!n.supportsFixedInterval)throw new rt(i,"Layer source does not support fixed-interval binning")}const s=n==null?void 0:n.supportedStatistics;if(t.outStatistics&&s){const r=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const l=r.get(o);if(l&&!s[l])throw new rt(i,`Layer source does not support ${o} statistic type`)}}}let Mb=class extends Un(St){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};I([O({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Mb.prototype,"shapeAreaField",void 0),I([O({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Mb.prototype,"shapeLengthField",void 0),I([O({type:String,json:{read:t=>m6e.read(t)||g6e.read(t)}})],Mb.prototype,"units",void 0),Mb=I([De("esri.layers.support.GeometryFieldsInfo")],Mb);const rje=Mb;var tz;let Ab=tz=class extends St{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ci}clone(){return new tz({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};I([O({type:String,json:{write:!0}})],Ab.prototype,"floorField",void 0),I([O({json:{read:!1,write:!1}})],Ab.prototype,"viewAllMode",void 0),I([O({json:{read:!1,write:!1}})],Ab.prototype,"viewAllLevelIds",void 0),Ab=tz=I([De("esri.layers.support.LayerFloorInfo")],Ab);const oje=Ab,wee=new mn({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),See=new mn({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Su=class extends Un(St){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};I([O({json:{read:wee.read,write:wee.write}})],Su.prototype,"cardinality",void 0),I([O({json:{read:!0,write:!0}})],Su.prototype,"composite",void 0),I([O({json:{read:!0,write:!0}})],Su.prototype,"id",void 0),I([O({json:{read:!0,write:!0}})],Su.prototype,"keyField",void 0),I([O({json:{read:!0,write:!0}})],Su.prototype,"keyFieldInRelationshipTable",void 0),I([O({json:{read:!0,write:!0}})],Su.prototype,"name",void 0),I([O({json:{read:!0,write:!0}})],Su.prototype,"relatedTableId",void 0),I([O({json:{read:!0,write:!0}})],Su.prototype,"relationshipTableId",void 0),I([O({json:{read:See.read,write:See.write}})],Su.prototype,"role",void 0),Su=I([De("esri.layers.support.Relationship")],Su);const aje=Su;function Jt(t,e,i){return!!Tme(t,e,i)}function bS(t,e,i){return Tme(t,e,i)}function Tme(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const lje={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function cje(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(n=>n.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function g5(t,e){var n;const i=(n=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:n.map(s=>s.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function uje(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map(n=>n.toLowerCase());return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_continuous")),percentileDiscrete:!!(e!=null&&e.includes("percentile_discrete")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function Ime(t,e){return{analytics:hje(t),attachment:dje(t),data:fje(t),metadata:pje(t),operations:mje(t.capabilities,t,e),query:gje(t,e),queryBins:_je(t),queryRelated:yje(t),queryTopFeatures:vje(t),editing:bje(t)}}function hje(t){return{supportsCacheHint:g5(t.advancedQueryCapabilities,"queryAnalytics")}}function dje(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:g5(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Jt(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(n=>{const s=lje[n.name];s&&(i[s]=!!n.isEnabled)}),i}function fje(t){return{isVersioned:Jt(t,"isDataVersioned",!1),isBranchVersioned:Jt(t,"isDataBranchVersioned",!1),supportsAttachment:Jt(t,"hasAttachments",!1),supportsM:Jt(t,"hasM",!1),supportsZ:Jt(t,"hasZ",!1)}}function pje(t){return{supportsAdvancedFieldProperties:Jt(t,"supportsFieldDescriptionProperty",!1)}}function mje(t,e,i){const n=t?t.toLowerCase().split(",").map(x=>x.trim()):[],s=i?m5(i):null,r=n.includes(s!=null&&s.serverType==="MapServer"?"data":"query"),o=n.includes("editing")&&!e.datesInUnknownTimezone;let l=o&&n.includes("create"),c=o&&n.includes("delete"),f=o&&n.includes("update");const y=n.includes("changetracking"),_=e.advancedQueryCapabilities;return o&&!(l||c||f)&&(l=c=f=!0),{supportsCalculate:Jt(e,"supportsCalculate",!1),supportsTruncate:Jt(e,"supportsTruncate",!1),supportsValidateSql:Jt(e,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:c,supportsEditing:o,supportsChangeTracking:y,supportsQuery:r,supportsQueryAnalytics:Jt(_,"supportsQueryAnalytic",!1),supportsQueryAttachments:Jt(_,"supportsQueryAttachments",!1),supportsQueryBins:Jt(_,"supportsQueryBins",!1),supportsQueryTopFeatures:Jt(_,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Jt(e,"supportsAttachmentsResizing",!1),supportsSync:n.includes("sync"),supportsUpdate:f,supportsExceedsLimitStatistics:Jt(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Jt(e,"supportsAsyncConvert3D",!1)}}function gje(t,e){const i=t.advancedQueryCapabilities,n=t.ownershipBasedAccessControlForFeatures,s=t.archivingInfo,r=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),l=!o||r>=ht("mapserver-pbf-version-support"),c=vme(e),f=new Set((t.supportedQueryFormats??"").split(",").map(y=>y.toLowerCase().trim()));return{maxRecordCount:bS(t,"maxRecordCount",void 0),maxRecordCountFactor:bS(t,"maxRecordCountFactor",void 0),standardMaxRecordCount:bS(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:cje(i),supportsCacheHint:Jt(i,"supportsQueryWithCacheHint",!1)||g5(i,"query"),supportsCentroid:Jt(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:c,supportsDefaultSpatialReference:Jt(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Jt(i,"supportsDisjointSpatialRel",!1),supportsDistance:Jt(i,"supportsQueryWithDistance",!1),supportsDistinct:Jt(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Jt(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:l&&f.has("pbf"),supportsFullTextSearch:Jt(i,"supportsFullTextSearch",!1),supportsGeometryProperties:Jt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Jt(i,"supportsHavingClause",!1),supportsHistoricMoment:Jt(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Jt(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Jt(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Jt(i,"supportsPagination",!1),supportsPercentileStatistics:Jt(i,"supportsPercentileStatistics",!1),supportsQuantization:Jt(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Jt(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Jt(n,"allowAnonymousToQuery",!0),supportsQueryByOthers:Jt(n,"allowOthersToQuery",!0),supportsQueryGeometry:Jt(t,"supportsReturningQueryGeometry",!1),supportsResultType:Jt(i,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:Jt(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Jt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Jt(t,"useStandardizedQueries",!1),supportsStatistics:Jt(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:Jt(i,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:bS(t,"tileMaxRecordCount",void 0)}}function yje(t){const e=t.advancedQueryCapabilities,i=Jt(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Jt(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:g5(e,"queryRelated")}}function vje(t){return{supportsCacheHint:g5(t.advancedQueryCapabilities,"queryTopFilter")}}function _je(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:Jt(e,"supportsDateBin",!1),supportsFixedInterval:Jt(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:Jt(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Jt(e,"supportsFixedBoundariesBin",!1),supportedStatistics:uje(e)}}function bje(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Jt(t,"allowGeometryUpdates",!0),supportsGlobalId:Jt(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Jt(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Jt(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Jt(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Jt(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Jt(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Jt(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Jt(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Jt(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Jt(i,"supportsAsyncApplyEdits",!1),zDefault:bS(t,"zDefault",void 0)}}function S1t(t){var e;return{operations:{supportsAppend:Jt(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:Jt(t,"supportsExportClip",!1),supportsExportFrameset:Jt(t,"supportsExportFrameset",!1),supportsMensuration:Jt(t,"supportsMensuration",!1),supportsUpdate:Jt(t,"supportsUpdate",!1)}}}let wp=class extends Un(St){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const n of Object.keys(e))i[n]=FA(e[n]);return i}writeDomains(e,i){var s;if(!e)return;const n={};for(const r of Object.keys(e))e[r]&&(n[r]=(s=e[r])==null?void 0:s.toJSON());i.domains=n}};I([O({type:Number,json:{write:!0}})],wp.prototype,"code",void 0),I([O({type:Object,json:{write:!0}})],wp.prototype,"defaultValues",void 0),I([O({json:{write:!0}})],wp.prototype,"domains",void 0),I([Dt("domains")],wp.prototype,"readDomains",null),I([zt("domains")],wp.prototype,"writeDomains",null),I([O({type:String,json:{write:!0}})],wp.prototype,"name",void 0),wp=I([De("esri.layers.support.Subtype")],wp);const xje=wp,wje=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ci.ofType(Jd)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Gi.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){var s;if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:r,operations:o,editing:l}=i;if(!r.supportsQueryByOthers||!r.supportsQueryByAnonymous||o.supportsEditing&&!(l.supportsUpdateByOthers&&l.supportsUpdateByAnonymous&&l.supportsDeleteByOthers&&l.supportsDeleteByAnonymous))return"load"}if((s=this.serviceDefinitionExpression)!=null&&s.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(eje(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const n=this.editFieldsInfo;return(n!=null&&n.creatorField||n!=null&&n.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,n){return Ime(n,this.url)}readEditingInfo(i,n){const{editingInfo:s}=n;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const n=Ue(i),{operations:s,editing:r}=n;return ZI(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),n):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=r.supportsDeleteByOthers=r.supportsGeometryUpdate=r.supportsUpdateByOthers=!0,n):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=r.supportsGeometryUpdate=!0),n)}readGlobalIdFieldFromService(i,n){return Eme(n)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||ZI(this))return!1;const{operations:n,editing:s}=i;return n.supportsEditing&&!(n.supportsAdd&&n.supportsDelete&&n.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:n,editing:s}=i;return ZI(this)?!n.supportsQuery:!(n.supportsAdd&&n.supportsDelete&&n.supportsEditing&&n.supportsQuery&&n.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(i,n){return n.type==="Table"}readMaxScale(i,n){return n.effectiveMaxScale||i||0}readMinScale(i,n){return n.effectiveMinScale||i||0}readObjectIdFieldFromService(i,n){return Cme(n)}readServiceDefinitionExpression(i,n){return n.definitionQuery||n.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const n=fGe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:qt.getLogger(this)});this._set("url",n.url),n.layerId!=null&&this._set("layerId",n.layerId)}writeUrl(i,n,s,r){pGe(this,i,null,n,r)}readVersion(i,n){return YGe(n)}};return I([O({readOnly:!0})],e.prototype,"authenticationTriggerEvent",null),I([O({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),I([O({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),I([Dt("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),I([O(g6("dateFieldsTimeReference"))],e.prototype,"dateFieldsTimeZone",void 0),I([O({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),I([O({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),I([O({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),I([O({readOnly:!0,type:IGe})],e.prototype,"editFieldsInfo",void 0),I([O({readOnly:!0})],e.prototype,"editingInfo",void 0),I([Dt("editingInfo")],e.prototype,"readEditingInfo",null),I([O({readOnly:!0})],e.prototype,"effectiveCapabilities",null),I([O((()=>{const i=Ue(c$e),n=i.json.origins;return n["web-map"]={read:!1,write:!1},n["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),I([O({type:oje,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:Zo}}}}})],e.prototype,"floorInfo",void 0),I([O({type:dr,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),I([O()],e.prototype,"gdbVersion",void 0),I([O({readOnly:!0,type:rje,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),I([O({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:ez.read}}}})],e.prototype,"geometryType",void 0),I([O({type:String})],e.prototype,"globalIdField",void 0),I([Dt("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),I([O({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),I([O({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),I([O({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),I([O({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),I([O({readOnly:!0,type:TGe})],e.prototype,"heightModelInfo",void 0),I([O({type:Date})],e.prototype,"historicMoment",void 0),I([O({type:ci.ofType(Jd),readOnly:!0})],e.prototype,"indexes",void 0),I([O({readOnly:!0})],e.prototype,"isTable",void 0),I([Dt("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),I([O({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),I([O(f$e)],e.prototype,"maxScale",void 0),I([Dt("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),I([O(d$e)],e.prototype,"minScale",void 0),I([Dt("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),I([O({type:String})],e.prototype,"objectIdField",void 0),I([Dt("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),I([O(g6("preferredTimeReference"))],e.prototype,"preferredTimeZone",void 0),I([O({type:[aje],readOnly:!0})],e.prototype,"relationships",void 0),I([O({type:Boolean})],e.prototype,"returnM",void 0),I([O({type:Boolean})],e.prototype,"returnZ",void 0),I([O({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),I([O({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),I([Dt("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),I([O({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),I([O()],e.prototype,"sourceJSON",void 0),I([O({type:Gi,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),I([O({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),I([O({type:[xje],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"subtypes",void 0),I([O({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),I([O(a$e)],e.prototype,"url",null),I([zt("url")],e.prototype,"writeUrl",null),I([O({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),I([Dt("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=I([De("esri.layers.mixins.FeatureLayerBase")],e),e};let kb=class extends Un(St){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};I([O({type:String,json:{write:!0}})],kb.prototype,"expression",void 0),I([O({type:String,json:{write:!0}})],kb.prototype,"title",void 0),I([O({type:String,json:{write:!0}})],kb.prototype,"returnType",void 0),kb=I([De("esri.layers.support.ExpressionInfo")],kb);const fj=kb;var iz;let Sp=iz=class extends St{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new iz({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:Ue(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};I([O({type:Boolean,json:{write:!0}})],Sp.prototype,"isAutoGenerated",void 0),I([O({type:String,json:{write:!0}})],Sp.prototype,"name",void 0),I([O({type:String,json:{write:!0}})],Sp.prototype,"alias",void 0),I([O({type:String,json:{write:!0}})],Sp.prototype,"onStatisticField",void 0),I([O({type:fj,json:{write:!0}})],Sp.prototype,"onStatisticExpression",void 0),I([O({type:String,json:{write:!0}})],Sp.prototype,"statisticType",void 0),Sp=iz=I([De("esri.layers.support.AggregateField")],Sp);const xv=Sp;let x0=class extends St{constructor(){super(...arguments),this.type=null}};I([O({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],x0.prototype,"type",void 0),x0=I([De("esri.layers.support.FeatureReduction")],x0);const pj="__begin__",mj="__end__",Sje=new RegExp(pj,"ig"),Eje=new RegExp(mj,"ig"),Eee=new RegExp("^"+pj,"i"),Cee=new RegExp(mj+"$","i"),$6='"',Cje=$6+" + ",Pje=" + "+$6;function Tje(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Ije(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function gj(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=Tje(t.labelExpression),e.type="conventional"),e}function Mje(t){const e=gj(t);if(!e)return null;switch(e.type){case"conventional":return nz(e.expression);case"arcade":return e.expression}return null}function Aje(t){const e=gj(t);if(!e)return null;switch(e.type){case"conventional":return Dje(e.expression);case"arcade":return Mme(e.expression)}return null}function nz(t){let e;return t?(e=VM(t,i=>pj+'$feature["'+i+'"]'+mj),e=Eee.test(e)?e.replace(Eee,""):$6+e,e=Cee.test(e)?e.replace(Cee,""):e+$6,e=e.replaceAll(Sje,Cje).replaceAll(Eje,Pje)):e='""',e}const kje=/^\s*\{([^}]+)\}\s*$/i;function Dje(t){const e=t==null?void 0:t.match(kje);return(e==null?void 0:e[1].trim())||null}const Nje=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,Oje=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,$je=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Mme(t){if(!t)return null;let e=Nje.exec(t)||Oje.exec(t);return e?e[1]||e[3]:(e=$je.exec(t),e?e[2]:null)}var sz;let $g=sz=class extends St{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?nz(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=nz(this.value)),t!=null&&(e[i]=t)}clone(){return new sz({expression:this.expression,title:this.title,value:this.value})}};I([O({type:String,json:{write:{writerEnsuresNonNull:!0}}})],$g.prototype,"expression",void 0),I([Dt("expression",["expression","value"])],$g.prototype,"readExpression",null),I([zt("expression")],$g.prototype,"writeExpression",null),I([O({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],$g.prototype,"title",void 0),I([O({json:{read:!1,write:!1}})],$g.prototype,"value",void 0),$g=sz=I([De("esri.layers.support.LabelExpressionInfo")],$g);const Ame=$g;var rz;const Y4=new mn({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function X4(t,e,i){return{enabled:!bR(i==null?void 0:i.layer)}}function kme(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function Rje(t){return(t==null?void 0:t.type)==="map-image"}function Dme(t){var e,i;return!!Rje(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function Lje(t){return kme(t)||Dme(t==null?void 0:t.layer)}let Rr=rz=class extends St{static evaluateWhere(t,e){const i=(n,s,r)=>{switch(s){case"=":return n==r;case"<>":return n!=r;case">":return n>r;case">=":return n>=r;case"<":return n<r;case"<=":return n<=r}return!1};try{if(t==null)return!0;const n=t.split(" ");if(n.length===3)return i(e[n[0]],n[1],n[2]);if(n.length===7){const s=i(e[n[0]],n[1],n[2]),r=n[3],o=i(e[n[4]],n[5],n[6]);switch(r){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=LFe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=Ije(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=Mme(this.labelExpressionInfo.expression);n&&(t="["+n+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,n){if(t==null&&this.labelExpression!=null&&kme(n))t=new Ame({expression:this.getLabelExpressionArcade()});else if(!t)return;const s=t.toJSON(n);s.expression&&(e[i]=s)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return gj(this)}getLabelExpressionArcade(){return Mje(this)}getLabelExpressionSingleField(){return Aje(this)}hash(){return JSON.stringify(this)}clone(){return new rz({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Ue(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:Ue(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};I([O({type:String,json:{write:!0}})],Rr.prototype,"name",void 0),I([O({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:X4}}}}})],Rr.prototype,"allowOverrun",void 0),I([O({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:X4}}}}})],Rr.prototype,"deconflictionStrategy",void 0),I([O({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&Dme(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Rr.prototype,"labelExpression",void 0),I([Dt("labelExpression")],Rr.prototype,"readLabelExpression",null),I([zt("labelExpression")],Rr.prototype,"writeLabelExpression",null),I([O({type:Ame,json:{write:{overridePolicy:(t,e,i)=>Lje(i)?{allowNull:!0}:{enabled:!1}}}})],Rr.prototype,"labelExpressionInfo",void 0),I([zt("labelExpressionInfo")],Rr.prototype,"writeLabelExpressionInfo",null),I([O({type:Y4.apiValues,json:{type:Y4.jsonValues,read:Y4.read,write:Y4.write}})],Rr.prototype,"labelPlacement",void 0),I([O({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Rr.prototype,"labelPosition",void 0),I([O({type:Number})],Rr.prototype,"maxScale",void 0),I([zt("maxScale")],Rr.prototype,"writeMaxScale",null),I([O({type:Number})],Rr.prototype,"minScale",void 0),I([zt("minScale")],Rr.prototype,"writeMinScale",null),I([O({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:X4}}}}})],Rr.prototype,"repeatLabel",void 0),I([O({type:Number,cast:pn,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:X4}}}}})],Rr.prototype,"repeatLabelDistance",void 0),I([O({types:lFe,json:{origins:{"web-scene":{types:cFe,write:mJ,default:null}},write:mJ,default:null}})],Rr.prototype,"symbol",void 0),I([O({type:Boolean,json:{write:!0}})],Rr.prototype,"useCodedValues",void 0),I([O({type:String,json:{write:!0}})],Rr.prototype,"where",void 0),Rr=rz=I([De("esri.layers.support.LabelClass")],Rr);const BA=Rr;var oz;let ja=oz=class extends x0{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=pn("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const n=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());il(i,n,e)}readRenderer(t,e,i){var s;const n=(s=e.drawingInfo)==null?void 0:s.renderer;return n?jE(n,e,i)??void 0:dj(e,i)}clone(){return new oz({fields:Ue(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:Ue(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:Ue(this.popupTemplate),renderer:Ue(this.renderer),binType:Ue(this.binType),size:this.size})}};I([si({binning:"binning"})],ja.prototype,"type",void 0),I([si({geohash:"geohash",square:"square"}),O({type:["geohash","square"]})],ja.prototype,"binType",void 0),I([O({type:Number,json:{write:!0}})],ja.prototype,"fixedBinLevel",void 0),I([O({type:[BA],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ja.prototype,"labelingInfo",void 0),I([O(xG)],ja.prototype,"labelsVisible",void 0),I([O({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ja.prototype,"maxScale",void 0),I([O(bG)],ja.prototype,"popupEnabled",void 0),I([O({type:s5,json:{name:"popupInfo",write:!0}})],ja.prototype,"popupTemplate",void 0),I([O({cast:t=>t==="auto"?t:yx(pn(t))})],ja.prototype,"size",void 0),I([O({type:[xv],json:{write:!0}})],ja.prototype,"fields",void 0),I([zt("fields")],ja.prototype,"writeFields",null),I([O({types:GA,json:{write:{target:"drawingInfo.renderer"}}})],ja.prototype,"renderer",void 0),I([Dt("renderer",["drawingInfo.renderer"])],ja.prototype,"readRenderer",null),ja=oz=I([De("esri.layers.support.FeatureReductionBinning")],ja);const Nme=ja;var az;function Pee(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let ro=az=class extends St{constructor(t){super(t),this.type="cluster",this.clusterRadius=pn("80px"),this.clusterMinSize=pn("12px"),this.clusterMaxSize=pn("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){var s,r;const n=(s=e.drawingInfo)==null?void 0:s.renderer;return(r=n==null?void 0:n.authoringInfo)!=null&&r.isAutoGenerated?null:n?Pee(n)?null:jE(n,e,i)??void 0:dj(e,i)}readSymbol(t,e,i){var s,r;const n=(s=e.drawingInfo)==null?void 0:s.renderer;if((r=n==null?void 0:n.authoringInfo)!=null&&r.isAutoGenerated)return null;if(n&&Pee(n)){const o=jE(n,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,n){var r,o;const s=(o=(r=this.renderer)==null?void 0:r.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||s){const l=new Fx({symbol:t});e.drawingInfo={renderer:l.write({},n)}}}writeFields(t,e,i){const n=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());il(i,n,e)}readFields(t,e,i){return t.filter(n=>!n.isAutoGenerated).map(n=>xv.fromJSON(n))}clone(){return new az({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Ue(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Ue(this.fields),maxScale:this.maxScale,renderer:Ue(this.renderer),symbol:Ue(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:Ue(this.popupTemplate)})}};I([O({type:["cluster"],readOnly:!0,json:{write:!0}})],ro.prototype,"type",void 0),I([O({cast:t=>t==="auto"?t:yx(pn(t)),json:{write:!0}})],ro.prototype,"clusterRadius",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],ro.prototype,"clusterMinSize",void 0),I([O({type:Number,cast:pn,json:{write:!0}})],ro.prototype,"clusterMaxSize",void 0),I([O({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ro.prototype,"maxScale",void 0),I([O(bG)],ro.prototype,"popupEnabled",void 0),I([O({type:s5,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ro.prototype,"popupTemplate",void 0),I([O({types:GA,json:{write:{target:"drawingInfo.renderer"}}})],ro.prototype,"renderer",void 0),I([Dt("renderer",["drawingInfo.renderer"])],ro.prototype,"readRenderer",null),I([O({types:oFe})],ro.prototype,"symbol",void 0),I([Dt("symbol",["drawingInfo.renderer"])],ro.prototype,"readSymbol",null),I([zt("symbol")],ro.prototype,"writeSymbol",null),I([O({type:[BA],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ro.prototype,"labelingInfo",void 0),I([O(xG)],ro.prototype,"labelsVisible",void 0),I([O({type:[xv],json:{write:!0}})],ro.prototype,"fields",void 0),I([zt("fields")],ro.prototype,"writeFields",null),I([Dt("fields")],ro.prototype,"readFields",null),ro=az=I([De("esri.layers.support.FeatureReductionCluster")],ro);const Ome=ro;var lz;let KI=lz=class extends x0{constructor(t){super(t),this.type="selection"}clone(){return new lz}};I([O({type:["selection"]})],KI.prototype,"type",void 0),KI=lz=I([De("esri.layers.support.FeatureReductionSelection")],KI);const Tee=KI,Iee={key:"type",base:x0,typeMap:{cluster:Ome,binning:Nme}},Fje={types:{key:"type",base:x0,typeMap:{selection:Tee,cluster:Ome,binning:Nme}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:Iee},"portal-item":{types:Iee},"web-scene":{types:{key:"type",base:x0,typeMap:{selection:Tee}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Zo}}}}},B_={Base64:0,Hex:1,String:2,Raw:3},v2=8,$me=(1<<v2)-1;function h0(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function zje(t){const e=[];for(let i=0,n=t.length*v2;i<n;i+=v2)e[i>>5]|=(t.charCodeAt(i/v2)&$me)<<i%32;return e}function qje(t){const e=[];for(let i=0,n=32*t.length;i<n;i+=v2)e.push(String.fromCharCode(t[i>>5]>>>i%32&$me));return e.join("")}function Vje(t){const e="0123456789abcdef",i=[];for(let n=0,s=4*t.length;n<s;n++)i.push(e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15));return i.join("")}function Gje(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=[];for(let s=0,r=4*t.length;s<r;s+=3){const o=(t[s>>2]>>s%4*8&255)<<16|(t[s+1>>2]>>(s+1)%4*8&255)<<8|t[s+2>>2]>>(s+2)%4*8&255;for(let l=0;l<4;l++)8*s+6*l>32*t.length?n.push(e):n.push(i.charAt(o>>6*(3-l)&63))}return n.join("")}function jje(t,e){return t<<e|t>>>32-e}function HA(t,e,i,n,s,r){return h0(jje(h0(h0(e,t),h0(n,r)),s),i)}function Ra(t,e,i,n,s,r,o){return HA(e&i|~e&n,t,e,s,r,o)}function La(t,e,i,n,s,r,o){return HA(e&n|i&~n,t,e,s,r,o)}function Fa(t,e,i,n,s,r,o){return HA(e^i^n,t,e,s,r,o)}function za(t,e,i,n,s,r,o){return HA(i^(e|~n),t,e,s,r,o)}function Bje(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,n=-271733879,s=-1732584194,r=271733878;for(let o=0;o<t.length;o+=16){const l=i,c=n,f=s,y=r;i=Ra(i,n,s,r,t[o],7,-680876936),r=Ra(r,i,n,s,t[o+1],12,-389564586),s=Ra(s,r,i,n,t[o+2],17,606105819),n=Ra(n,s,r,i,t[o+3],22,-1044525330),i=Ra(i,n,s,r,t[o+4],7,-176418897),r=Ra(r,i,n,s,t[o+5],12,1200080426),s=Ra(s,r,i,n,t[o+6],17,-1473231341),n=Ra(n,s,r,i,t[o+7],22,-45705983),i=Ra(i,n,s,r,t[o+8],7,1770035416),r=Ra(r,i,n,s,t[o+9],12,-1958414417),s=Ra(s,r,i,n,t[o+10],17,-42063),n=Ra(n,s,r,i,t[o+11],22,-1990404162),i=Ra(i,n,s,r,t[o+12],7,1804603682),r=Ra(r,i,n,s,t[o+13],12,-40341101),s=Ra(s,r,i,n,t[o+14],17,-1502002290),n=Ra(n,s,r,i,t[o+15],22,1236535329),i=La(i,n,s,r,t[o+1],5,-165796510),r=La(r,i,n,s,t[o+6],9,-1069501632),s=La(s,r,i,n,t[o+11],14,643717713),n=La(n,s,r,i,t[o],20,-373897302),i=La(i,n,s,r,t[o+5],5,-701558691),r=La(r,i,n,s,t[o+10],9,38016083),s=La(s,r,i,n,t[o+15],14,-660478335),n=La(n,s,r,i,t[o+4],20,-405537848),i=La(i,n,s,r,t[o+9],5,568446438),r=La(r,i,n,s,t[o+14],9,-1019803690),s=La(s,r,i,n,t[o+3],14,-187363961),n=La(n,s,r,i,t[o+8],20,1163531501),i=La(i,n,s,r,t[o+13],5,-1444681467),r=La(r,i,n,s,t[o+2],9,-51403784),s=La(s,r,i,n,t[o+7],14,1735328473),n=La(n,s,r,i,t[o+12],20,-1926607734),i=Fa(i,n,s,r,t[o+5],4,-378558),r=Fa(r,i,n,s,t[o+8],11,-2022574463),s=Fa(s,r,i,n,t[o+11],16,1839030562),n=Fa(n,s,r,i,t[o+14],23,-35309556),i=Fa(i,n,s,r,t[o+1],4,-1530992060),r=Fa(r,i,n,s,t[o+4],11,1272893353),s=Fa(s,r,i,n,t[o+7],16,-155497632),n=Fa(n,s,r,i,t[o+10],23,-1094730640),i=Fa(i,n,s,r,t[o+13],4,681279174),r=Fa(r,i,n,s,t[o],11,-358537222),s=Fa(s,r,i,n,t[o+3],16,-722521979),n=Fa(n,s,r,i,t[o+6],23,76029189),i=Fa(i,n,s,r,t[o+9],4,-640364487),r=Fa(r,i,n,s,t[o+12],11,-421815835),s=Fa(s,r,i,n,t[o+15],16,530742520),n=Fa(n,s,r,i,t[o+2],23,-995338651),i=za(i,n,s,r,t[o],6,-198630844),r=za(r,i,n,s,t[o+7],10,1126891415),s=za(s,r,i,n,t[o+14],15,-1416354905),n=za(n,s,r,i,t[o+5],21,-57434055),i=za(i,n,s,r,t[o+12],6,1700485571),r=za(r,i,n,s,t[o+3],10,-1894986606),s=za(s,r,i,n,t[o+10],15,-1051523),n=za(n,s,r,i,t[o+1],21,-2054922799),i=za(i,n,s,r,t[o+8],6,1873313359),r=za(r,i,n,s,t[o+15],10,-30611744),s=za(s,r,i,n,t[o+6],15,-1560198380),n=za(n,s,r,i,t[o+13],21,1309151649),i=za(i,n,s,r,t[o+4],6,-145523070),r=za(r,i,n,s,t[o+11],10,-1120210379),s=za(s,r,i,n,t[o+2],15,718787259),n=za(n,s,r,i,t[o+9],21,-343485551),i=h0(i,l),n=h0(n,c),s=h0(s,f),r=h0(r,y)}return[i,n,s,r]}function Rme(t,e=B_.Hex){const i=e||B_.Base64,n=Bje(zje(t),t.length*v2);switch(i){case B_.Raw:return n;case B_.Hex:return Vje(n);case B_.String:return qje(n);case B_.Base64:return Gje(n)}}const Hje=()=>qt.getLogger("esri.views.2d.layers.support.clusterUtils");ht.add("esri-cluster-arcade-enabled",!0);const Uje=ht("esri-cluster-arcade-enabled"),Yje=new Set(["simple-line","simple-fill","picture-fill"]);function Mee(t,e){let i=e.clone();if(!Xje(i))return i;if(e.getSymbols().some(n=>Yje.has(n.type))&&(i=new Fx({symbol:new Uc})),i.authoringInfo||(i.authoringInfo=new kG),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const n=(i.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");n.forEach(s=>{s.type==="rotation"?s.field?s.field=R1(t,s.field,"avg_angle","number"):s.valueExpression&&(s.field=u3(t,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=R1(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=R1(t,s.field,"avg","number"):s.valueExpression&&(s.field=u3(t,s.valueExpression,"avg","number"),s.valueExpression=null)}),i.visualVariables=n}switch(i.type){case"simple":break;case"pie-chart":for(const n of i.attributes)n.field?n.field=R1(t,n.field,"sum","number"):n.valueExpression&&(n.field=u3(t,n.valueExpression,"sum","number"),n.valueExpression=null);break;case"unique-value":i.field?i.field=R1(t,i.field,"mode","string"):i.valueExpression&&(i.field=u3(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=R1(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=R1(t,i.field,"avg","number"):i.valueExpression&&(i.field=u3(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const Xje=t=>{const e=i=>Hje().error(new rt("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!Uje){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Wje(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const n=i,s="field",r=e.toLowerCase()+",norm:"+s+","+n.toLowerCase();return"cluster_avg_"+Rme(r)}}}function u3(t,e,i,n){const s=Rme(e),r=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return t.some(o=>o.name===r)||t.push(new xv({name:r,isAutoGenerated:!0,onStatisticExpression:new fj({expression:e,returnType:n}),statisticType:i})),r}function R1(t,e,i,n,s){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const r=Wje(i,e,s);return t.some(o=>o.name===r)||(i==="avg_norm"?t.push(new xv({name:r,isAutoGenerated:!0,onStatisticExpression:new fj({expression:`$feature.${e} / $feature.${s}`,returnType:n}),statisticType:"avg"})):t.push(new xv({name:r,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),r}const Zje=t=>{let e=class extends t{constructor(...i){super(...i),this.addHandles(xi(()=>this.renderer,()=>{if(this.featureReduction){const n=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",n)}},om))}set featureReduction(i){const n=this._normalizeFeatureReduction(i);this._set("featureReduction",n)}set renderer(i){}_withClusterVariable(i,n,s){const r=i.clone();return"visualVariables"in r&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.some(o=>o.type==="size")||r.visualVariables.push(new OA({field:"cluster_count",stops:[new fI({value:1}),new fI({useMinValue:!0,size:n}),new fI({useMaxValue:!0,size:s})]}))),r}_normalizeFeatureReduction(i){var _;if((i==null?void 0:i.type)!=="cluster")return i;const n=i.clone(),s=[new xv({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],r=(n.fields??[]).filter(x=>!x.isAutoGenerated),o=i.renderer&&!((_=i.renderer.authoringInfo)!=null&&_.isAutoGenerated),{clusterMinSize:l,clusterMaxSize:c}=n;if(o){n.fields=[...s,...r];const x=this._withClusterVariable(n.renderer,l,c);return n.effectiveFeatureRenderer=x,n.effectiveClusterRenderer=x,n}if(i.symbol){if(n.fields=[...s,...r],n.renderer=null,!this.renderer)return n.effectiveFeatureRenderer=null,n.effectiveClusterRenderer=null,n;const x=Mee(s,this.renderer),S=this._withClusterVariable(x,l,c),P="visualVariables"in S&&S.visualVariables?S.visualVariables:[],A=new Fx({symbol:i.symbol,visualVariables:P});return n.fields=[...s,...r],n.effectiveFeatureRenderer=S,n.effectiveClusterRenderer=A,n}if(!this.renderer)return i;const f=Mee(s,this.renderer);n.fields=[...s,...r],n.renderer=f;const y=this._withClusterVariable(f,l,c);return n.effectiveFeatureRenderer=y,n.effectiveClusterRenderer=y,n}};return I([O(Fje)],e.prototype,"featureReduction",null),e=I([De("esri.layers.mixins.FeatureReductionLayer")],e),e};var cz;const W4=new mn({asc:"ascending",desc:"descending"});let Db=cz=class extends St{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new cz({field:this.field,valueExpression:this.valueExpression,order:this.order})}};I([O({type:String,json:{write:!0}})],Db.prototype,"field",void 0),I([O({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Db.prototype,"valueExpression",void 0),I([O({type:W4.apiValues,json:{type:W4.jsonValues,read:W4.read,write:W4.write}})],Db.prototype,"order",void 0),Db=cz=I([De("esri.layers.support.OrderByInfo")],Db);const Lme=Db;function Kje(t,e,i){if(!t)return null;const n=t.find(r=>!!r.field);if(!n)return null;const s=new Lme;return s.read(n,i),[s]}function Jje(t,e,i,n){const s=t.find(r=>!!r.field);s&&il(i,[s.toJSON()],e)}const Qje={type:[Lme],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:Kje},write:{writer:Jje}}},eBe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return I([O(Qje)],e.prototype,"orderBy",void 0),e=I([De("esri.layers.mixins.OrderedLayer")],e),e};let xS=class extends Ei{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};I([O()],xS.prototype,"updating",void 0),I([O()],xS.prototype,"status",void 0),xS=I([De("esri.layers.support.PublishingInfo")],xS);const tBe=xS,iBe=Symbol(),nBe=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const n=this._get("publishingInfo");if(n)return n;const s=new tBe;return this._checkPublishingStatus(s),s}_checkPublishingStatus(n){let o=0;const l=async f=>{let y;n.updating=!0;try{y=await this.fetchPublishingStatus()}catch{y="unavailable"}y!=="published"&&y!=="unavailable"||(n.status==="publishing"&&this.refresh(),c.remove()),n.status=y,n.updating=!1,c.removed||(o=setTimeout(l,f,f+125))},c={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>c.remove()),l(250),this.addHandles(c)}};return e=iBe,I([O({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=I([De("esri.layers.mixins.PublishableLayer")],i),i},d0=new ci,aE=new WeakMap;function sBe(t){oBe(t)&&d0.push(new WeakRef(t))}function rBe(t){const e=d0.find(i=>i.deref()===t);e&&d0.remove(e)}function oBe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function Fme(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:Fme(e,t%e):0}let SN=0,Z4=0;function aBe(){const t=Date.now();let e=!1;for(const i of d0){const n=i.deref();n?n.refreshInterval&&t-(aE.get(n)??0)+5>=6e4*n.refreshInterval&&(aE.set(n,t),n.refresh(t)):e=!0}if(e)for(let i=d0.length-1;i>=0;i--)d0.at(i).deref()||d0.removeAt(i)}cV(()=>{const t=Date.now();let e=0;for(const i of d0){const n=i.deref();n&&(e=Fme(Math.round(6e4*n.refreshInterval),e),n.refreshInterval?aE.get(n)||aE.set(n,t):aE.delete(n))}if(e!==Z4){if(Z4=e,clearInterval(SN),Z4===0)return void(SN=0);SN=setInterval(aBe,Z4)}},om);const Aee=.1,lBe=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=qv(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||sBe(this)},()=>{})}destroy(){rBe(this)}castRefreshInterval(i){return i>=Aee?i:i<=0?0:Aee}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){ad(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:n})},n=>{qt.getLogger(this).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}async hasDataChanged(){return!0}get test(){}};return I([O({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Zo}}}}})],e.prototype,"refreshInterval",void 0),I([Es("refreshInterval")],e.prototype,"castRefreshInterval",null),I([O({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),I([O({readOnly:!0})],e.prototype,"refreshParameters",null),e=I([De("esri.layers.mixins.RefreshableLayer")],e),e},zme=Ta()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let wS=class extends Un(St){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Ohe(this.value,this.unit,"milliseconds")}};I([si(zme,{nonNullable:!0})],wS.prototype,"unit",void 0),I([O({type:Number,json:{write:!0},nonNullable:!0})],wS.prototype,"value",void 0),wS=I([De("esri.time.TimeInterval")],wS);const R6=wS;function kee(t,e){return R6.fromJSON({value:t,unit:e})}let ha=class extends Un(St){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?O0.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?kee(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?kee(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};I([O({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ha.prototype,"cumulative",void 0),I([O({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ha.prototype,"endField",void 0),I([O({type:O0,json:{write:{enabled:!0,allowNull:!0}}})],ha.prototype,"fullTimeExtent",void 0),I([Dt("fullTimeExtent",["timeExtent"])],ha.prototype,"readFullTimeExtent",null),I([zt("fullTimeExtent")],ha.prototype,"writeFullTimeExtent",null),I([O({type:Boolean,json:{write:!0}})],ha.prototype,"hasLiveData",void 0),I([O({type:R6,json:{write:{enabled:!0,allowNull:!0}}})],ha.prototype,"interval",void 0),I([Dt("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ha.prototype,"readInterval",null),I([zt("interval")],ha.prototype,"writeInterval",null),I([O({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ha.prototype,"startField",void 0),I([O(g6("timeReference",!0))],ha.prototype,"timeZone",void 0),I([O({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ha.prototype,"trackIdField",void 0),I([O({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ha.prototype,"useTime",void 0),I([O({type:[Date],json:{read:!1}})],ha.prototype,"stops",void 0),ha=I([De("esri.layers.support.TimeInfo")],ha);const qme=ha,cBe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Zo}}},uBe=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,n){const s=n.timeInfo.exportOptions;if(!s)return null;const r=s.timeOffset,o=zme.fromJSON(s.timeOffsetUnits);return r&&o?new R6({value:r,unit:o}):null}set timeInfo(i){Sde(i,this.fieldsIndex),this._set("timeInfo",i)}};return I([O({type:O0,json:{write:!1}})],e.prototype,"timeExtent",void 0),I([O({type:R6})],e.prototype,"timeOffset",void 0),I([Dt("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),I([O({value:null,type:qme,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),I([O(cBe)],e.prototype,"useViewTime",void 0),e=I([De("esri.layers.mixins.TemporalLayer")],e),e},Dee=new mn({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Rg=class extends Un(St){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};I([O({json:{write:!0}})],Rg.prototype,"name",void 0),I([O({json:{write:!0}})],Rg.prototype,"description",void 0),I([O({json:{read:Dee.read,write:Dee.write}})],Rg.prototype,"drawingTool",void 0),I([O({json:{write:!0}})],Rg.prototype,"prototype",void 0),I([O({json:{write:!0}})],Rg.prototype,"thumbnail",void 0),Rg=I([De("esri.layers.support.FeatureTemplate")],Rg);const yj=Rg;let Ep=class extends Un(St){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const n of Object.keys(e))i[n]=FA(e[n]);return i}writeDomains(e,i){var s;const n={};for(const r of Object.keys(e))e[r]&&(n[r]=(s=e[r])==null?void 0:s.toJSON());i.domains=n}};I([O({json:{write:!0}})],Ep.prototype,"id",void 0),I([O({json:{write:!0}})],Ep.prototype,"name",void 0),I([O({json:{write:!0}})],Ep.prototype,"domains",void 0),I([Dt("domains")],Ep.prototype,"readDomains",null),I([zt("domains")],Ep.prototype,"writeDomains",null),I([O({type:[yj],json:{write:!0}})],Ep.prototype,"templates",void 0),Ep=I([De("esri.layers.support.FeatureType")],Ep);const Vme=Ep;function hBe(){return{fields:{type:[ZG],value:null,set:function(t){if(t&&ht("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(n=>`'${n.name}'`).join(", ");qt.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return _pe.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||qt.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return vA(this.fieldsIndex,t)}}}}const EN=()=>qt.getLogger("esri.layers.support.labelingInfo"),dBe=/\[([^[\]]+)\]/gi;function CN(t,e,i){return t?t.map(n=>{var r;const s=new BA;if(s.read(n,i),s.labelExpression){const o=e.fields||((r=e.layerDefinition)==null?void 0:r.fields)||this.fields;s.labelExpression=s.labelExpression.replaceAll(dBe,(l,c)=>`[${fBe(c,o)}]`)}return s}):null}function fBe(t,e){if(!e)return t;const i=t.toLowerCase();for(let n=0;n<e.length;n++){const s=e[n].name;if(s.toLowerCase()===i)return s}return t}const pBe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function D1t(t,e){const i=[];for(const n of t){const s=n.labelPlacement,r=pBe[e];if(!n.symbol)return EN().warn("No ILabelClass symbol specified."),[];if(!r)return EN().error(new rt("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(r.includes(s))i.push(n);else{const o=r[0];s&&EN().warn(`Found invalid label placement type ${s} for ${e}. Defaulting to ${o}`);const l=n.clone();l.labelPlacement=o,i.push(l)}}return i}const Nb=[];function mBe(t,e){if(vme(t.url??""))return!0;const{wkid:i}=e;for(const n of Nb){if((t.version??0)>=n[0])return!0;if(typeof n[1]=="function"&&(n[1]=n[1]()),n[1].has(i))return!1}return!0}Nb.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),Nb.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Nb.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Nb.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Nb.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function gBe(t,e,i){const n=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(n&&n.type==="unique-value"&&n.styleOrigin){const s=await YV(n.populateFromStyle());if(oc(i),s.ok===!1){const r=s.error;e!=null&&e.messages&&e.messages.push(new ld("renderer:style-reference",`Failed to create unique value renderer from style reference: ${r.message}`,{error:r,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function yBe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:n,title:s},r){if(!i)return null;const o=xBe({editFieldsInfo:e,fields:i,objectIdField:n},r);if(!o.length)return null;const l=EBe({titleBase:s,fields:i,displayField:t}),c=SBe();return new s5({title:l,content:c,fieldInfos:o})}function N1t(t){var c;const{title:e,graphic:i}=t??{},{attributes:n,sourceLayer:s}=i??{},r=s&&"displayField"in s?s.displayField:null,o=r?n==null?void 0:n[r]:null,l=(c=i==null?void 0:i.getObjectId())==null?void 0:c.toString();return e||o||l||""}const vBe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):AOe(t,e);function _Be({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const n=t;return e&&(t=t.filter(s=>!e.includes(s.type))),t===n&&(t=t.slice()),i!==!0&&t.sort(bBe),t}function bBe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:Nee(t)?-1:Nee(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function xBe(t,e){const i=e==null?void 0:e.visibleFieldNames;return _Be({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||CBe,sortDisabled:e==null?void 0:e.sortDisabled}).map(n=>new NG({fieldName:n.name,isEditable:MOe(n,t),label:n.alias,format:wBe(n),visible:vBe(n,{...t,visibleFieldNames:i})}))}function wBe(t){switch(t.type){case"small-integer":case"integer":case"single":return new gI({digitSeparator:!0,places:0});case"double":return new gI({digitSeparator:!0,places:2});case"string":return e$e(t.name)?new gI({digitSeparator:!0,places:0}):void 0;default:return}}function SBe(){return[new X2,new Y2]}function EBe(t){const e=Cde(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function Nee(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const CBe=["geometry","blob","raster","guid","xml"],PBe=1/255.5,aa="FeatureLayer";function K4(t,e){return new rt("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function Oee(t){return t&&t instanceof ci}const PN=hBe();function TN(t,e,i){const n=!!(i!=null&&i.writeLayerSchema);return{enabled:n,ignoreOrigin:n}}let Zt=class extends wje(Zje(CGe(nBe(xGe(pG(eBe(uBe(CG(lBe(mGe(Vde(afe(iG(gGe(aGe(Un(dA))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Gi.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=qv(async(i,n,s)=>{const{save:r,saveAs:o}=await st(()=>import("./featureLayerUtils-BsuykrNa.js"),__vite__mapDeps([301,113,114,238,32,95]),import.meta.url);switch(i){case pf.SAVE:return r(this,n);case pf.SAVE_AS:return o(this,s,n)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var s;const i=e!=null?e.signal:null;if((s=this.portalItem)!=null&&s.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(r=>this.initLayerProperties(r))),Promise.resolve(this);const n=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(jh).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstValidLayerId(i);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new rt("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>JGe(this,"load",e));return this.addResolvingPromise(n),Promise.resolve(this)}warnInvisibleDrapedSymbols(){var e,i,n;((e=this.elevationInfo)==null?void 0:e.mode)==="on-the-ground"&&((i=this.renderer)==null?void 0:i.type)==="simple"&&((n=this.renderer.symbol)==null?void 0:n.type)==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(s=>s.type==="fill"&&s.material!=null&&(!s.material.color||s.material.color.a*this.opacity<PBe)&&(this.loadWarnings.push(new ld("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(e,i){return i=i.layerDefinition||i,Ime(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,n){return this._readEditingEnabled(i,!0,n)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,n,s){this._writeEditingEnabled(e,i,!0,s)}get effectiveEditingEnabled(){return QGe(this)}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,n,s){s!=null&&s.writeLayerSchema&&il(n,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return Eme(i.layerDefinition||i)}readObjectIdField(e,i){return Cme(i.layerDefinition||i)}get parsedUrl(){const e=wl(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=N2(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=N2(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){IK(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,n){var r;i=i.layerDefinition||i;const s=(r=i.drawingInfo)==null?void 0:r.renderer;if(s){const o=jE(s,i,n)??void 0;return o||qt.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:n}),o}return dj(i,n)}set source(e){const i=this._get("source");i!==e&&(Oee(i)&&this._resetMemorySource(i),Oee(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ci?new Rp({layer:this,items:e}):e:null}readSource(e,i){const n=pme.fromJSON(i.featureSet);return new Rp({layer:this,items:(n==null?void 0:n.features)??[]})}readTemplates(e,i){const n=i.editFieldsInfo,s=n==null?void 0:n.creatorField,r=n==null?void 0:n.editorField;return e=e==null?void 0:e.map(o=>yj.fromJSON(o)),this._fixTemplates(e,s),this._fixTemplates(e,r),e}readTitle(e,i){var r,o,l;const n=((r=i.layerDefinition)==null?void 0:r.name)??i.name,s=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(n){const c=(l=this.portalItem)==null?void 0:l.title;if(this.sublayerTitleMode==="item-title")return this.url?hGe(this.url,n):n;let f=n;if(!f&&this.url){const y=m5(this.url);y!=null&&(f=y.title)}return f?(this.sublayerTitleMode==="item-title-and-service-name"&&c&&c!==f&&(f=c+" - "+f),lj(f)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,i){var n;return i.title||((n=i.layerDefinition)==null?void 0:n.name)}readTypeIdField(e,i){let n=(i=i.layerDefinition||i).typeIdField;if(n&&i.fields){n=n.toLowerCase();const s=i.fields.find(r=>r.name.toLowerCase()===n);s&&(n=s.name)}return n}readTypes(e,i){e=(i=i.layerDefinition||i).types;const n=i.editFieldsInfo,s=n==null?void 0:n.creatorField,r=n==null?void 0:n.editorField;return e==null?void 0:e.map(o=>(o=Vme.fromJSON(o),this._fixTemplates(o.templates,s),this._fixTemplates(o.templates,r),o))}readVisible(e,i){var n;return((n=i.layerDefinition)==null?void 0:n.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const n=await NGe(this,e,i,aa);return this.lastEditsEventDate=new Date,n}async updateAttachment(e,i,n){const s=await OGe(this,e,i,n,aa);return this.lastEditsEventDate=new Date,s}async applyEdits(e,i){return $Ge(this,e,i)}async uploadAssets(e,i){return RGe(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return yBe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await FC(st(()=>import("./FeatureLayerSource-BlNKCNlU.js"),__vite__mapDeps([137,138,65,139,140,141,12,13,14,15,132,133,111,142,143,144,145,146,104,103,105,147,102]),import.meta.url),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=UGe(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,n=mde(this.definitionExpression,i);return e.where=n||"1=1",e}async deleteAttachments(e,i){const n=await LGe(this,e,i,aa);return this.lastEditsEventDate=new Date,n}async fetchRecomputedExtents(e){return FGe(this,e,aa)}getFeatureType(e){return ije(this.types,this.typeIdField,e)}getFieldDomain(e,i){var c,f;const n=i==null?void 0:i.feature,s=!!((c=this.subtypes)!=null&&c.length);if(s&&!(i!=null&&i.excludeImpliedDomains)){const y=WGe(this,e);if(y)return y}const r=s&&XGe(this,n);if(r){const y=(f=r==null?void 0:r.domains)==null?void 0:f[e];return(y==null?void 0:y.type)==="inherited"?this._getLayerDomain(e):y}const o=this.getFeatureType(n),l=this._getLayerDomain(e);if(o){const y=o.domains&&o.domains[e];if(y&&(y==null?void 0:y.type)!=="inherited")return y}if(l)return l;if(!(i!=null&&i.excludeImpliedDomains)){const y=ZGe(this,e);if(y)return y}return null}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,i){return zGe(this,e,i,aa)}async queryFeatures(e,i){const n=await this.load(),s=await n.source.queryFeatures(Q0.from(e)??n.createQuery(),i);if(s!=null&&s.features)for(const r of s.features)r.layer=r.sourceLayer=n;return s}async queryObjectIds(e,i){return qGe(this,e,i,aa)}async queryFeatureCount(e,i){return VGe(this,e,i,aa)}async queryExtent(e,i){return GGe(this,e,i,aa)}async queryRelatedFeatures(e,i){return jGe(this,e,i,aa)}async queryRelatedFeaturesCount(e,i){return BGe(this,e,i,aa)}async queryTopFeatures(e,i){var l;const{source:n,capabilities:s}=await this.load();if(!n.queryTopFeatures||!((l=s==null?void 0:s.query)!=null&&l.supportsTopFeaturesQuery))throw new rt(aa,"Layer source does not support queryTopFeatures capability");const r=await st(()=>import("./TopFeaturesQuery-CY_Apo-E.js"),[],import.meta.url),o=await n.queryTopFeatures(r.default.from(e),i);if(o!=null&&o.features)for(const c of o.features)c.layer=c.sourceLayer=this;return o}async queryBins(e,i){var l;const{source:n,capabilities:s}=await this.load();if(!n.queryBins||!((l=s==null?void 0:s.operations)!=null&&l.supportsQueryBins))throw new rt(aa,"Layer source does not support queryBins capability");sje(e,s,aa);const r=await st(()=>import("./BinsQuery-BC1Iwk-H.js"),__vite__mapDeps([302,173,12,13,14,15,174]),import.meta.url),o=await n.queryBins(r.default.from(e),i);if(o.features)for(const c of o.features)c.layer=c.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:n,capabilities:s}=await this.load();if(!n.queryTopObjectIds||!(s!=null&&s.query.supportsTopFeaturesQuery))throw new rt(aa,"Layer source does not support queryTopObjectIds capability");const r=await st(()=>import("./TopFeaturesQuery-CY_Apo-E.js"),[],import.meta.url);return n.queryTopObjectIds(r.default.from(e),i)}async queryTopFeaturesExtent(e,i){var o;const{source:n,capabilities:s}=await this.load();if(!n.queryTopExtents||!((o=s==null?void 0:s.query)!=null&&o.supportsTopFeaturesQuery))throw new rt(aa,"Layer source does not support queryTopExtents capability");const r=await st(()=>import("./TopFeaturesQuery-CY_Apo-E.js"),[],import.meta.url);return n.queryTopExtents(r.default.from(e),i)}async queryTopFeatureCount(e,i){var o;const{source:n,capabilities:s}=await this.load();if(!n.queryTopCount||!((o=s==null?void 0:s.query)!=null&&o.supportsTopFeaturesQuery))throw new rt(aa,"Layer source does not support queryFeatureCount capability");const r=await st(()=>import("./TopFeaturesQuery-CY_Apo-E.js"),[],import.meta.url);return n.queryTopCount(r.default.from(e),i)}read(e,i){const n=e.featureCollection;if((n||e.type==="Feature Collection")&&(this.resourceInfo=e),n){const s=n.layers;s&&s.length===1&&(super.read(s[0],i),n.showLegend!=null&&super.read({showLegend:n.showLegend},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:n,layerContainerType:s,messages:r}=i;if(this.dynamicDataSource)return r==null||r.push(K4(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((n==="web-map"||n==="web-scene")&&s!=="tables")return r==null||r.push(K4(this,`a table source can only be written to tables, not ${s}`)),null;if(this._hasMemorySource())return r==null||r.push(K4(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(n==="web-map"||n==="web-scene")&&s==="tables")return r==null||r.push(K4(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new rt(aa,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||mBe(this,e))}async save(e){return this._debouncedSaveOperations(pf.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(pf.SAVE_AS,i,e)}_readEditingEnabled(e,i,n){var r;let s=(r=e.layerDefinition)==null?void 0:r.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,i&&(n==null?void 0:n.origin)==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,n,s){var r,o;if(!e){const l=(o=(r=this.capabilities)==null?void 0:r.operations)!=null&&o.supportsSync?"Query,Sync":"Query";il("layerDefinition.capabilities",l,i),n&&!(s!=null&&s.writeLayerSchema)&&(i.capabilities=l)}}_getLayerDomain(e){const i=this.fieldsIndex.get(e);return i?i.domain:null}_fetchFirstValidLayerId(e){return es(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const n=i.data;if(n)return this.findFirstValidLayerId(n)})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),IK(this.renderer,this.fieldsIndex),Sde(this.timeInfo,this.fieldsIndex),gBe(this,{origin:"service"})}async hasDataChanged(){return HGe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,n;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(n=this.fields)!=null&&n.some(s=>s.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(n=>{var r;const s=(r=n.prototype)==null?void 0:r.attributes;s&&i&&delete s[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new rt("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new rt("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};I([O(p$e)],Zt.prototype,"attributeTableTemplate",void 0),I([Dt("service","capabilities")],Zt.prototype,"readCapabilities",null),I([O({json:{origins:{"web-scene":{write:!1}},write:!0}})],Zt.prototype,"charts",void 0),I([O({readOnly:!0})],Zt.prototype,"createQueryVersion",null),I([O({json:{read:{source:"layerDefinition.copyrightText"}}})],Zt.prototype,"copyright",void 0),I([O({json:{read:{source:"layerDefinition.displayField"}}})],Zt.prototype,"displayField",void 0),I([O({types:Vu,readOnly:!0})],Zt.prototype,"defaultSymbol",void 0),I([O({type:Vh})],Zt.prototype,"dynamicDataSource",void 0),I([O({type:Boolean})],Zt.prototype,"editingEnabled",null),I([Dt(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Zt.prototype,"readEditingEnabled",null),I([Dt("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Zt.prototype,"readEditingEnabledFromWebMap",null),I([zt(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Zt.prototype,"writeEditingEnabled",null),I([zt("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Zt.prototype,"writeEditingEnabledToWebMap",null),I([O({readOnly:!0})],Zt.prototype,"effectiveEditingEnabled",null),I([O({...PN.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:TN}}}}})],Zt.prototype,"fields",void 0),I([O(PN.fieldsIndex)],Zt.prototype,"fieldsIndex",void 0),I([O({type:DVe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Zt.prototype,"formTemplate",void 0),I([O({json:{read:{source:"layerDefinition.extent"}}})],Zt.prototype,"fullExtent",void 0),I([O({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:TN,writer(t,e,i){const n=t?ez.toJSON(t):null;n&&il(i,n,e)}}}},read:{source:"layerDefinition.geometryType",reader:ez.read}}})],Zt.prototype,"geometryType",void 0),I([O({json:{read:{source:"layerDefinition.hasM"}}})],Zt.prototype,"hasM",void 0),I([O({json:{read:{source:"layerDefinition.hasZ"}}})],Zt.prototype,"hasZ",void 0),I([O(h$e)],Zt.prototype,"id",void 0),I([O({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Zt.prototype,"infoFor3D",void 0),I([O({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Zt.prototype,"isTable",void 0),I([Dt("service","isTable",["type","geometryType"]),Dt("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Zt.prototype,"readIsTable",null),I([zt("web-map","isTable")],Zt.prototype,"writeIsTable",null),I([O(xG)],Zt.prototype,"labelsVisible",void 0),I([O({type:[BA],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:CN,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:CN,write:{enabled:!0,layerContainerTypes:Zo}}},name:"layerDefinition.drawingInfo.labelingInfo",read:CN,write:!0}})],Zt.prototype,"labelingInfo",void 0),I([O((()=>{const t=Ue(u$e);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,n){il(n,_G(e),i)}}},t})())],Zt.prototype,"opacity",void 0),I([O(l$e)],Zt.prototype,"legendEnabled",void 0),I([O({type:["show","hide"],json:(()=>{const t=Ue(qde.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Zt.prototype,"listMode",void 0),I([Dt("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Zt.prototype,"readGlobalIdField",null),I([O({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:TN}}}}})],Zt.prototype,"objectIdField",void 0),I([Dt("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Zt.prototype,"readObjectIdField",null),I([O({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Zt.prototype,"operationalLayerType",void 0),I([O(PN.outFields)],Zt.prototype,"outFields",void 0),I([O({readOnly:!0})],Zt.prototype,"parsedUrl",null),I([O({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Zt.prototype,"path",void 0),I([O(bG)],Zt.prototype,"popupEnabled",void 0),I([O({type:s5,json:{name:"popupInfo",write:!0}})],Zt.prototype,"popupTemplate",void 0),I([O({readOnly:!0})],Zt.prototype,"defaultPopupTemplate",null),I([O({types:GA,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:sVe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Zo,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Zt.prototype,"renderer",null),I([Dt("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Dt("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Zt.prototype,"readRenderer",null),I([O()],Zt.prototype,"resourceInfo",void 0),I([O((()=>{const t=Ue(o$e);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Zt.prototype,"screenSizePerspectiveEnabled",void 0),I([O({clonable:!1})],Zt.prototype,"source",null),I([Es("source")],Zt.prototype,"castSource",null),I([Dt("portal-item","source",["featureSet"]),Dt("web-map","source",["featureSet"])],Zt.prototype,"readSource",null),I([O({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Zt.prototype,"spatialReference",void 0),I([O({type:Number})],Zt.prototype,"subtypeCode",void 0),I([O({type:[yj]})],Zt.prototype,"templates",void 0),I([Dt("templates",["editFieldsInfo","creatorField","editorField","templates"])],Zt.prototype,"readTemplates",null),I([O({type:qme})],Zt.prototype,"timeInfo",void 0),I([O()],Zt.prototype,"title",void 0),I([Dt("service","title",["name"]),Dt("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Zt.prototype,"readTitle",null),I([Dt("web-map","title",["layerDefinition.name","title"])],Zt.prototype,"readTitleFromWebMap",null),I([O({type:String})],Zt.prototype,"sublayerTitleMode",void 0),I([O({json:{read:!1}})],Zt.prototype,"type",void 0),I([O({type:String})],Zt.prototype,"typeIdField",void 0),I([Dt("service","typeIdField"),Dt("typeIdField",["layerDefinition.typeIdField"])],Zt.prototype,"readTypeIdField",null),I([O({type:[Vme]})],Zt.prototype,"types",void 0),I([Dt("service","types",["types"]),Dt("types",["layerDefinition.types"])],Zt.prototype,"readTypes",null),I([O({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Zt.prototype,"visible",void 0),I([Dt("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Zt.prototype,"readVisible",null),Zt=I([De("esri.layers.FeatureLayer")],Zt);const zx=Zt,TBe=Object.freeze(Object.defineProperty({__proto__:null,default:zx},Symbol.toStringTag,{value:"Module"}));let Ob=class extends Ei{constructor(e){super(e),this.length=null,this.verticalLength=null,this.area=null}};I([O()],Ob.prototype,"length",void 0),I([O()],Ob.prototype,"verticalLength",void 0),I([O()],Ob.prototype,"area",void 0),Ob=I([De("esri.views.interactive.sketch.Units")],Ob);const L6=Ob;let UA=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,n=!1){return $ee(this.range,this.min,this.max,e,i,n)}clamp(e,i=0){return Qu(e-i,this.min,this.max)+i}monotonic(e,i,n){return e<i?i:i+uz(this.range,e-i,n)}minimalMonotonic(e,i,n){return $ee(this.range,e,e+this.range,i,n)}center(e,i,n){return i=this.monotonic(e,i,n),this.normalize((e+i)/2,n)}diff(e,i,n){return this.monotonic(e,i,n)-e}shortestSignedDiff(e,i){e=this.normalize(e);const n=(i=this.normalize(i))-e,s=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(n)<Math.abs(s)?n:s}contains(e,i,n){return i=this.minimalMonotonic(e,i),(n=this.minimalMonotonic(e,n))>e&&n<i}};function $ee(t,e,i,n,s=0,r=!1){return(n-=s)<e?n+=uz(t,e-n):n>i&&(n-=uz(t,n-i)),r&&n===i&&(n=e),n+s}function uz(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const L1t=new UA(0,2*Math.PI),F1t=new UA(-Math.PI,Math.PI),IBe=new UA(0,360);function MBe(t,e){return{type:uv(e),value:t,unit:e}}function z1t(t){return{value:t}}function Gme(t,e){return{type:uv(e),value:t,unit:e}}function ABe(t,e){return{type:uv(e),value:t,unit:e}}function Pf(t,e,i="arithmetic"){return{type:uv(e),value:t,unit:e,rotationType:i}}function q1t(t,e){const i=YA(t,e);return t.type==="angle"?Pf(i,e,t.rotationType):MBe(i,e)}function YA(t,e){return cs(t.value,t.unit,e)}function V1t(t,e){return t==null?e:e==null||t.value>cs(e.value,e.unit,t.unit)?t:e}function G1t(t,e){return t==null?null:{...t,value:t.value*e}}function vj(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const j1t=Gme(0,"meters"),B1t=ABe(0,"square-meters");Pf(0,"radians");const H1t=Pf(0,"degrees"),U1t=Pf(0,"degrees","geographic");function jme(t,e){return t[0]=e[0],t[1]=e[1],t}function _j(t,e,i){return t[0]=e,t[1]=i,t}function Bme(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function To(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function Hme(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function Ume(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function kBe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function DBe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function NBe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function OBe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function $Be(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Yme(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function nd(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function y5(t,e){const i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)}function XA(t,e){const i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function WA(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function cm(t){const e=t[0],i=t[1];return e*e+i*i}function RBe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function LBe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Xme(t,e){const i=e[0],n=e[1];let s=i*i+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function t1(t,e){return t[0]*e[0]+t[1]*e[1]}function FBe(t,e,i){const n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t}function bj(t,e,i,n){const s=e[0],r=e[1];return t[0]=s+n*(i[0]-s),t[1]=r+n*(i[1]-r),t}function zBe(t,e=1){const i=2*KC()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function qBe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s,t[1]=i[1]*n+i[3]*s,t}function VBe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s+i[4],t[1]=i[1]*n+i[3]*s+i[5],t}function GBe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[3]*s+i[6],t[1]=i[1]*n+i[4]*s+i[7],t}function jBe(t,e,i){const n=e[0],s=e[1];return t[0]=i[0]*n+i[4]*s+i[12],t[1]=i[1]*n+i[5]*s+i[13],t}function Wme(t,e,i,n){const s=e[0]-i[0],r=e[1]-i[1],o=Math.sin(n),l=Math.cos(n);return t[0]=s*l-r*o+i[0],t[1]=s*o+r*l+i[1],t}function Zme(t,e){const i=t[0],n=t[1],s=e[0],r=e[1];let o=i*i+n*n;o>0&&(o=1/Math.sqrt(o));let l=s*s+r*r;l>0&&(l=1/Math.sqrt(l));const c=(i*s+n*r)*o*l;return c>1?0:c<-1?Math.PI:Math.acos(c)}function BBe(t){return"vec2("+t[0]+", "+t[1]+")"}function hz(t,e){return t[0]===e[0]&&t[1]===e[1]}function Kme(t,e){const i=t[0],n=t[1],s=e[0],r=e[1],o=ho();return Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-r)<=o*Math.max(1,Math.abs(n),Math.abs(r))}function dz(t,e,i,n,s){let r=e[0]-i[0],o=e[1]-i[1];const l=(n[0]*r+n[1]*o)*(s-1);return r=n[0]*l,o=n[1]*l,t[0]=e[0]+r,t[1]=e[1]+o,t}const HBe=WA,Jme=To,UBe=Hme,YBe=Ume,XBe=y5,WBe=XA,ZBe=cm;Object.freeze(Object.defineProperty({__proto__:null,add:Bme,angle:Zme,ceil:kBe,copy:jme,cross:FBe,dist:XBe,distance:y5,div:YBe,divide:Ume,dot:t1,equals:Kme,exactEquals:hz,floor:DBe,inverse:LBe,len:HBe,length:WA,lerp:bj,max:OBe,min:NBe,mul:UBe,multiply:Hme,negate:RBe,normalize:Xme,projectAndScale:dz,random:zBe,rotate:Wme,round:$Be,scale:Yme,scaleAndAdd:nd,set:_j,sqrDist:WBe,sqrLen:ZBe,squaredDistance:XA,squaredLength:cm,str:BBe,sub:Jme,subtract:To,transformMat2:qBe,transformMat2d:VBe,transformMat3:GBe,transformMat4:jBe},Symbol.toStringTag,{value:"Module"}));function _r(){return[0,0]}function KBe(t){return[t[0],t[1]]}function Xu(t,e){return[t,e]}function Qme(t,e=_r()){const i=Math.min(2,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function JBe(t,e){return new Float64Array(t,e,2)}function ege(){return _r()}function tge(){return Xu(1,1)}function ige(){return Xu(1,0)}function nge(){return Xu(0,1)}const sge=ege(),QBe=tge(),eHe=ige(),rge=nge();Object.freeze(Object.defineProperty({__proto__:null,ONES:QBe,UNIT_X:eHe,UNIT_Y:rge,ZEROS:sge,clone:KBe,create:_r,createView:JBe,fromArray:Qme,fromValues:Xu,ones:tge,unitX:ige,unitY:nge,zeros:ege},Symbol.toStringTag,{value:"Module"}));function hd(t){const e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)}function rc(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Gs(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t}function tc(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function zr(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function oge(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function age(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function tHe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function iHe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function nHe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function sHe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function rHe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function oHe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function aHe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function lHe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Yc(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function jo(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function i1(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(i*i+n*n+s*s)}function Z2(t,e){const i=e[0]-t[0],n=e[1]-t[1],s=e[2]-t[2];return i*i+n*n+s*s}function ZA(t){const e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n}function fz(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function cHe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Co(t,e){const i=e[0],n=e[1],s=e[2];let r=i*i+n*n+s*s;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t}function Pn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Yr(t,e,i){const n=e[0],s=e[1],r=e[2],o=i[0],l=i[1],c=i[2];return t[0]=s*c-r*l,t[1]=r*o-n*c,t[2]=n*l-s*o,t}function uHe(t,e,i){const n=e[0],s=e[1],r=e[2],o=i[0],l=i[1],c=i[2],f=s*c-r*l,y=r*o-n*c,_=n*l-s*o,x=Math.sqrt(f*f+y*y+_*_);return t[0]=f/x,t[1]=y/x,t[2]=_/x,t}function qx(t,e,i,n){const s=e[0],r=e[1],o=e[2];return t[0]=s+n*(i[0]-s),t[1]=r+n*(i[1]-r),t[2]=o+n*(i[2]-o),t}function hHe(t,e,i,n,s,r){const o=r*r,l=o*(2*r-3)+1,c=o*(r-2)+r,f=o*(r-1),y=o*(3-2*r);return t[0]=e[0]*l+i[0]*c+n[0]*f+s[0]*y,t[1]=e[1]*l+i[1]*c+n[1]*f+s[1]*y,t[2]=e[2]*l+i[2]*c+n[2]*f+s[2]*y,t}function dHe(t,e,i,n,s,r){const o=1-r,l=o*o,c=r*r,f=l*o,y=3*r*l,_=3*c*o,x=c*r;return t[0]=e[0]*f+i[0]*y+n[0]*_+s[0]*x,t[1]=e[1]*f+i[1]*y+n[1]*_+s[1]*x,t[2]=e[2]*f+i[2]*y+n[2]*_+s[2]*x,t}function fHe(t,e=1){const i=KC,n=2*i()*Math.PI,s=2*i()-1,r=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=s*e,t}function lge(t,e,i){const n=e[0],s=e[1],r=e[2];return t[0]=i[0]*n+i[4]*s+i[8]*r+i[12],t[1]=i[1]*n+i[5]*s+i[9]*r+i[13],t[2]=i[2]*n+i[6]*s+i[10]*r+i[14],t}function pHe(t,e,i){const n=e[0],s=e[1],r=e[2];return t[0]=n*i[0]+s*i[3]+r*i[6],t[1]=n*i[1]+s*i[4]+r*i[7],t[2]=n*i[2]+s*i[5]+r*i[8],t}function pz(t,e,i){const n=i[0],s=i[1],r=i[2],o=i[3],l=e[0],c=e[1],f=e[2],y=s*f-r*c,_=r*l-n*f,x=n*c-s*l,S=s*x-r*_,P=r*y-n*x,A=n*_-s*y,D=2*o;return t[0]=l+y*D+2*S,t[1]=c+_*D+2*P,t[2]=f+x*D+2*A,t}function mHe(t,e,i,n){const s=[],r=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],r[0]=s[0],r[1]=s[1]*Math.cos(n)-s[2]*Math.sin(n),r[2]=s[1]*Math.sin(n)+s[2]*Math.cos(n),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function gHe(t,e,i,n){const s=[],r=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],r[0]=s[2]*Math.sin(n)+s[0]*Math.cos(n),r[1]=s[1],r[2]=s[2]*Math.cos(n)-s[0]*Math.sin(n),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function yHe(t,e,i,n){const s=[],r=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],r[0]=s[0]*Math.cos(n)-s[1]*Math.sin(n),r[1]=s[0]*Math.sin(n)+s[1]*Math.cos(n),r[2]=s[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function vHe(t,e){Co(Ree,t),Co(Lee,e);const i=Pn(Ree,Lee);return i>1?0:i<-1?Math.PI:Math.acos(i)}const Ree=$t(),Lee=$t();function _He(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function ds(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function UE(t,e){if(t===e)return!0;const i=t[0],n=t[1],s=t[2],r=e[0],o=e[1],l=e[2],c=ho();return Math.abs(i-r)<=c*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(n-o)<=c*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(s-l)<=c*Math.max(1,Math.abs(s),Math.abs(l))}function mz(t,e,i){const n=i[0]-e[0],s=i[1]-e[1],r=i[2]-e[2];let o=n*n+s*s+r*r;return o>0?(o=1/Math.sqrt(o),t[0]=n*o,t[1]=s*o,t[2]=r*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const ic=zr,bHe=oge,xHe=age,wHe=i1,SHe=Z2,cge=hd,F6=ZA;Object.freeze(Object.defineProperty({__proto__:null,abs:nHe,add:tc,angle:vHe,bezier:dHe,ceil:tHe,clamp:aHe,copy:rc,cross:Yr,crossAndNormalize:uHe,direction:mz,dist:wHe,distance:i1,div:xHe,divide:age,dot:Pn,equals:UE,exactEquals:ds,floor:iHe,hermite:hHe,inverse:cHe,len:cge,length:hd,lerp:qx,max:oHe,min:rHe,mul:bHe,multiply:oge,negate:fz,normalize:Co,random:fHe,rotateX:mHe,rotateY:gHe,rotateZ:yHe,round:lHe,scale:Yc,scaleAndAdd:jo,set:Gs,sign:sHe,sqrDist:SHe,sqrLen:F6,squaredDistance:Z2,squaredLength:ZA,str:_He,sub:ic,subtract:zr,transformMat3:pHe,transformMat4:lge,transformQuat:pz},Symbol.toStringTag,{value:"Module"}));function uge(t,e,i,n){if(lm(t.spatialReference,i)){J4[0]=t.x,J4[1]=t.y;const r=t.z;return J4[2]=r??n??0,Ax(J4,t.spatialReference,0,e,i,0)}const s=H2(t,i);return!!s&&(e[0]=s==null?void 0:s.x,e[1]=s==null?void 0:s.y,e[2]=(s==null?void 0:s.z)??n??0,!0)}async function Y1t(t,e,i,n,s){return await t5(t.spatialReference,i,null,s),uge(t,e,i,n)}const J4=$t();function Ff(t,e,i,n){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:n,type:"point"}}function hge(t,e,i,n,s){t.x=e,t.y=i,t.z=n,t.hasZ=n!=null,t.spatialReference=s}function F0(t,e,i,n,s){return!(e==null||n==null||t.length<2)&&(h3.x=t[0],h3.y=t[1],h3.z=t[2],h3.spatialReference=e,uge(h3,i,n,s))}const h3=Ff(0,0,0,Gi.WGS84);function dge(t){if(!t)return null;const e=t.wkid;if(e)return M$e[e];const i=t.wkt2??t.wkt;return i?EHe(i):null}function EHe(t){const e=T$e.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const n=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(n)||isNaN(s)?null:{a:n,f:s===0?0:1/s}}function KA(t){const e=dge(t);if(CHe(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function CHe(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function Q4(t,e,i){const{a:n,eSq:s}=KA(i),r=Math.sqrt(s),o=Math.sin(e[1]*gl),l=n*e[0]*gl;let c;return s>0?c=n*((1-s)*(o/(1-s*(o*o))-1/(2*r)*Math.log((1-r*o)/(1+r*o))))*.5:c=n*o,t[0]=l,t[1]=c,t}function JA(t){return $2(t)&&!!dge(t)}function X1t(t,e="square-meters"){if(t.some(o=>!JA(o.spatialReference)))throw new rt("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let o=0;o<t.length;o++){const l=t[o],c=l.spatialReference,{radius:f,densificationRatio:y}=KA(c),_=f*y;i.push(PHe(l,_))}const n=[],s=[0,0],r=[0,0];for(let o=0;o<i.length;o++){const{rings:l,spatialReference:c}=i[o];let f=0;for(let y=0;y<l.length;y++){const _=l[y];Q4(s,_[0],c),Q4(r,_[_.length-1],c);let x=r[0]*s[1]-s[0]*r[1];for(let S=0;S<_.length-1;S++)Q4(s,_[S+1],c),Q4(r,_[S],c),x+=r[0]*s[1]-s[0]*r[1];f+=x}f=cs(f,"square-meters",e),n.push(f/-2)}return n}function W1t(t,e="meters"){if(!t)throw new rt("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(n=>!JA(n.spatialReference)))throw new rt("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let n=0;n<t.length;n++){const s=t[n],{spatialReference:r}=s,o=s.type==="polyline"?s.paths:s.rings;let l=0;for(let c=0;c<o.length;c++){const f=o[c];let y=0;for(let _=1;_<f.length;_++){const x=f[_-1][0],S=f[_][0],P=f[_-1][1],A=f[_][1];if(P!==A||x!==S){const D=new v5;_5(D,[x,P],[S,A],r),y+=D.distance}}l+=y}l=cs(l,"meters",e),i.push(l)}return i}function PHe(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new rt("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!JA(i))throw new rt("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const n=t.type==="polyline"?t.paths:t.rings,s=[],r=[0,0],o=new v5;for(const c of n){const f=[];s.push(f),f.push([c[0][0],c[0][1]]);let y,_,x=c[0][0],S=c[0][1];for(let P=0;P<c.length-1;P++){if(y=c[P+1][0],_=c[P+1][1],x===y&&S===_)continue;const A=[x,S];_5(o,[x,S],[y,_],i);const{azimuth:D,distance:N}=o,F=N/e;if(F>1){for(let G=1;G<=F-1;G++)w0(r,A,D,G*e,i),f.push(r.slice());w0(r,A,D,(N+Math.floor(F-1)*e)/2,i),f.push(r.slice())}w0(r,A,D,N,i),f.push(r.slice()),x=r[0],S=r[1]}}const l=qC(Gi,i);return t.type==="polyline"?new $f({paths:s,spatialReference:l}):new el({rings:s,spatialReference:l})}let v5=class{constructor(e=0,i=void 0,n=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=n}};function w0(t,e,i,n,s){const r=e[0],o=e[1],l=r*gl,c=o*gl,f=(i??0)*gl,{a:y,b:_,f:x}=KA(s),S=Math.sin(f),P=Math.cos(f),A=(1-x)*Math.tan(c),D=1/Math.sqrt(1+A*A),N=A*D,F=Math.atan2(A,P),G=D*S,V=G*G,B=1-V,W=B*(y*y-_*_)/(_*_),J=1+W/16384*(4096+W*(W*(320-175*W)-768)),re=W/1024*(256+W*(W*(74-47*W)-128));let ne,oe,pe,ce,ue=n/(_*J),se=2*Math.PI;for(;Math.abs(ue-se)>1e-12;)pe=Math.cos(2*F+ue),ne=Math.sin(ue),oe=Math.cos(ue),ce=re*ne*(pe+re/4*(oe*(2*pe*pe-1)-re/6*pe*(4*ne*ne-3)*(4*pe*pe-3))),se=ue,ue=n/(_*J)+ce;const de=N*ne-D*oe*P,Se=Math.atan2(N*oe+D*ne*P,(1-x)*Math.sqrt(V+de*de)),Pe=Math.atan2(ne*S,D*oe-N*ne*P),Re=x/16*B*(4+x*(4-3*B)),$e=Se/gl,we=(l+(Pe-(1-Re)*x*G*(ue+Re*ne*(pe+Re*oe*(2*pe*pe-1)))))/gl;return t[0]=we,t[1]=$e,t}function _5(t,e,i,n){const s=e[0]*gl,r=e[1]*gl,o=i[0]*gl,l=i[1]*gl,{a:c,b:f,f:y,radius:_}=KA(n),x=o-s,S=Math.atan((1-y)*Math.tan(r)),P=Math.atan((1-y)*Math.tan(l)),A=Math.sin(S),D=Math.cos(S),N=Math.sin(P),F=Math.cos(P);let G,V,B,W,J,re,ne,oe,pe,ce,ue=1e3,se=x;do{if(ne=Math.sin(se),oe=Math.cos(se),B=Math.sqrt(F*ne*(F*ne)+(D*N-A*F*oe)*(D*N-A*F*oe)),B===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;J=A*N+D*F*oe,re=Math.atan2(B,J),pe=D*F*ne/B,V=1-pe*pe,W=J-2*A*N/V,isNaN(W)&&(W=0),ce=y/16*V*(4+y*(4-3*V)),G=se,se=x+(1-ce)*y*pe*(re+ce*B*(W+ce*J*(2*W*W-1)))}while(Math.abs(se-G)>1e-12&&--ue>0);if(ue===0){const we=_,Fe=Math.acos(Math.sin(r)*Math.sin(l)+Math.cos(r)*Math.cos(l)*Math.cos(o-s))*we,it=o-s,_t=Math.sin(it)*Math.cos(l),ot=Math.cos(r)*Math.sin(l)-Math.sin(r)*Math.cos(l)*Math.cos(it),ut=Math.atan2(_t,ot);return t.azimuth=ut/gl,t.distance=Fe,t.reverseAzimuth=void 0,t}const de=V*(c*c-f*f)/(f*f),Se=de/1024*(256+de*(de*(74-47*de)-128)),Pe=f*(1+de/16384*(4096+de*(de*(320-175*de)-768)))*(re-Se*B*(W+Se/4*(J*(2*W*W-1)-Se/6*W*(4*B*B-3)*(4*W*W-3)))),Re=Math.atan2(F*Math.sin(se),D*N-A*F*Math.cos(se)),$e=Math.atan2(D*Math.sin(se),D*N*Math.cos(se)-A*F);return t.azimuth=Re/gl,t.distance=Pe,t.reverseAzimuth=$e/gl,t}function z6(t){return JA(t)?t:cd(t)?Gi.WGS84:null}var lo;function xj(t,e){if(t==null||e==null)return;const i=gz(t,e);return i!=null?Pf(i,"radians","geographic"):void 0}(function(t){t.Absolute="absolute",t.Relative="relative",t.RelativeBilateral="relative-bilateral"})(lo||(lo={}));const gz=(()=>{const t=$t(),e=$t();return(i,n)=>(Gs(t,i.x,i.y,i.z??0),Gs(e,n.x,n.y,n.z??0),THe(t,e,i.spatialReference,n.spatialReference))})(),THe=(()=>{const t=_r(),e=$t(),i=$t();return(n,s,r,o)=>{if(ds(n,s))return;const l=z6(r),c=z6(o);if(l&&c&&ea(l,c)&&F0(n,r,e,l)&&F0(s,o,i,c)){const{azimuth:y}=_5(AHe,e,i,l);return y!=null?cs(y,"degrees","radians"):void 0}t[0]=s[0]-n[0],t[1]=s[1]-n[1];let f=Zme(rge,t);return t[0]<0&&(f=kHe-f),f}})();function K1t(t,e,i,n=lo.Absolute){if(e&&i)switch(n){case lo.Absolute:return xj(e,i);case lo.Relative:return zee(Fee(t,e,i),lo.Relative);case lo.RelativeBilateral:return zee(Fee(t,e,i),lo.RelativeBilateral)}}function Fee(t,e,i){if(!t||!e||!i)return;const n=gz(t,e),s=gz(e,i);return n!=null&&s!=null?Pf(s-n,"radians","geographic"):void 0}function zee(t,e){if(t!=null)switch(e){case lo.Absolute:return IHe(t);case lo.Relative:{const i=Tf(t);let n=qee.normalize(i,0,!0);return n===-180&&(n=180),Pf(n,"degrees","geographic")}case lo.RelativeBilateral:{const i=Tf(t),n=Math.abs(qee.normalize(i,0,!0));return Pf(n,"degrees","geographic")}}}function IHe(t){const e=Tf(t),i=DHe.normalize(e,0,!0);return Pf(i,"degrees","geographic")}const MHe=(()=>{const t=$t();return(e,i,n,s,r,o="geodesic")=>{rc(t,i);const l=Tf(r);if(o==="geodesic"){const S=z6(n);if(S&&F0(t,n,t,S))return w0(e,t,l,s,S),e[2]=i[2],!!F0(e,S,e,n)}const c=vj(l,"geographic","arithmetic"),f=cs(c,"degrees","radians"),y=i[0]+s*Math.cos(f),_=i[1]+s*Math.sin(f),x=i[2];return Gs(e,y,_,x),!0}})();function Tf(t){if(t!=null)return vj(fge(t),t.rotationType,"geographic")}function J1t(t){if(t!=null)return vj(fge(t),t.rotationType,"arithmetic")}function fge(t){return cs(t.value,t.unit,"degrees")}const AHe=new v5,kHe=2*Math.PI,DHe=IBe,qee=new UA(-180,180);let Lg=class extends Ei{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?lo.RelativeBilateral:lo.Relative;case"absolute":return lo.Absolute}}get displayUnits(){return this._get("displayUnits")??new L6}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new L6}set inputUnits(e){this._set("inputUnits",e)}};I([O({type:String,nonNullable:!0})],Lg.prototype,"directionMode",void 0),I([O({type:Boolean,nonNullable:!0})],Lg.prototype,"relativeDirectionIsBilateral",void 0),I([O()],Lg.prototype,"effectiveDirectionMode",null),I([O({type:L6,nonNullable:!0})],Lg.prototype,"displayUnits",null),I([O({type:L6,nonNullable:!0})],Lg.prototype,"inputUnits",null),Lg=I([De("esri.views.interactive.sketch.SketchValueOptions")],Lg);const QA=Lg;let JI=class extends ci{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ci.ofType(this.itemType.Type))(e):new ci(e)}};function NHe(t,e){return{type:t,cast:lfe,set(i){const n=SA(i,this._get(e),t);n.owner=this,this._set(e,n)}}}I([O()],JI.prototype,"owner",null),JI=I([De("esri.core.support.OwningCollection")],JI);let lE=class extends JI{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};I([XV({Type:th,ensureType:Qo(th)})],lE.prototype,"itemType",void 0),lE=I([De("esri.support.GraphicsCollection")],lE);let Cp=class extends pG(CG(dA)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new lE,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};I([O({type:Ode})],Cp.prototype,"elevationInfo",void 0),I([O(NHe(lE,"graphics"))],Cp.prototype,"graphics",void 0),I([O({type:["show","hide"]})],Cp.prototype,"listMode",void 0),I([O()],Cp.prototype,"screenSizePerspectiveEnabled",void 0),I([O({readOnly:!0})],Cp.prototype,"type",void 0),I([O({constructOnly:!0})],Cp.prototype,"internal",void 0),Cp=I([De("esri.layers.GraphicsLayer")],Cp);const Pm=Cp,OHe=Object.freeze(Object.defineProperty({__proto__:null,default:Pm},Symbol.toStringTag,{value:"Module"}));function Vee(t){switch(t){case bs.SUPPORTED:break;case bs.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case bs.GEOMETRY_MISSING:return"no geometry";case bs.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case bs.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case bs.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var bs;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(bs||(bs={}));function pge(t){return t?z0:jHe}function $He(t,e){return e!=null&&e.mode?e.mode:pge(t).mode}function mge(t,e){return e??pge(t)}function gge(t,e){return $He(t==null||(t.hasZ??!1),e)}function nyt(t,e){return mge(t==null||(t.hasZ??!1),e)}function RHe(t){const e=yge(t);return gge(t.geometry,e)}function LHe(t){const e=yge(t),i=gge(t.geometry,e),n=e!=null&&i!=="on-the-ground"?GHe(e):0,s=e==null?void 0:e.featureExpressionInfo;return{mode:i,offset:n,featureExpressionInfo:s}}function FHe(t){return e7(LHe(t))}function syt(t){return e7(t)||zHe(t)}function zHe(t){var e;return((e=t==null?void 0:t.featureExpressionInfo)==null?void 0:e.expression)==="0"}function e7(t){if(!t||t.mode==="on-the-ground")return!1;const e=t!=null&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||e==="0")}function yge(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function wj(t,e){if(!(t!=null&&t.offset))return 0;const{offset:i,unit:n}=t;if(n==="decimal-degrees")return 0;const s=n!=="unknown"&&n?n:"meters",r=Wle(e);return r?cs(i,s,r):0}function q6(t,e,i){if(!(i!=null&&i.mode))return;const n=t.hasZ?t.z:0,s=wj(i,t.spatialReference);switch(i.mode){case"absolute-height":return n-s;case"on-the-ground":return 0;case"relative-to-ground":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"ground")??0)+s);case"relative-to-scene":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"scene")??0)+s)}}function Sj(t,e,i,n=null){return t7(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,n)}function vge(t,e,i,n,s=null){return t7(t,e[0],e[1],e.length>2?e[2]:0,i,n,s)}function t7(t,e,i,n,s,r,o=null){if(r==null)return;const l=o!=null?o.mode:"absolute-height";if(l==="on-the-ground")return 0;const{absoluteZ:c}=qHe(e,i,n,s,t,r);return VHe(c,e,i,n,s,t,o,l)}function qHe(t,e,i,n,s,r){const o=wj(r,n);switch(r.mode){case"absolute-height":return{absoluteZ:i+o,elevation:0};case"on-the-ground":{const l=s.elevationProvider.getElevation(t,e,0,n,"ground")??0;return{absoluteZ:l,elevation:l}}case"relative-to-ground":{const l=s.elevationProvider.getElevation(t,e,i,n,"ground")??0;return{absoluteZ:i+l+o,elevation:l}}case"relative-to-scene":{const l=s.elevationProvider.getElevation(t,e,i,n,"scene")??0;return{absoluteZ:i+l+o,elevation:l}}}}function VHe(t,e,i,n,s,r,o,l){const c=wj(o,s);switch(l){case"absolute-height":return t-c;case"relative-to-ground":return t-((r.elevationProvider.getElevation(e,i,n,s,"ground")??0)+c);case"relative-to-scene":return t-((r.elevationProvider.getElevation(e,i,n,s,"scene")??0)+c)}}function ryt(t,e){if(e==null)return!1;const{mode:i}=e;return i!=null&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}function oyt(t,e,i){return i&&i.mode!==e?`${t} only support ${e} elevation mode`:null}function ayt(t,e,i){return(i==null?void 0:i.mode)===e?`${t} do not support ${e} elevation mode`:null}function lyt(t,e){return(e==null?void 0:e.featureExpressionInfo)!=null&&e.featureExpressionInfo.expression!=="0"?`${t} do not support featureExpressionInfo`:null}function cyt(t,e){e&&t.warn(".elevationInfo=",e)}function GHe(t){return((t==null?void 0:t.offset)??0)*t$e(t==null?void 0:t.unit)}const z0={mode:"absolute-height",offset:0},jHe={mode:"on-the-ground",offset:null};function BHe(t){var n,s;if(t.graphic&&((n=t.graphic.layer)==null?void 0:n.type)!=="graphics")return bs.GRAPHICS_LAYER_MISSING;const e=(s=t.operations)==null?void 0:s.data.type;if(!e)return bs.GEOMETRY_TYPE_UNSUPPORTED;switch(e){case"polygon":case"point":case"polyline":case"mesh":break;default:return bs.GEOMETRY_TYPE_UNSUPPORTED}const i=t.elevationInfo;return e7(i)?bs.ELEVATION_MODE_UNSUPPORTED:bs.SUPPORTED}function HHe(t){return UHe(t).result}function UHe(t){var n;if(t.graphic&&((n=t.graphic.layer)==null?void 0:n.type)!=="graphics")return{result:bs.GRAPHICS_LAYER_MISSING};if(!t.operations)return{result:bs.GEOMETRY_MISSING};if(e7(t.elevationInfo))return{result:bs.ELEVATION_MODE_UNSUPPORTED};const e=t.operations.data.type,i=t.operations.data.geometry;return e==="point"||e==="mesh"||e==="polyline"||e==="polygon"?{result:bs.SUPPORTED,geometry:i}:{result:bs.GEOMETRY_TYPE_UNSUPPORTED}}function YHe(t){var i;if(((i=t.layer)==null?void 0:i.type)!=="graphics")return bs.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return bs.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return bs.SUPPORTED;default:return bs.GEOMETRY_TYPE_UNSUPPORTED}const e=t.symbol!=null&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return!e||!e.some(n=>n.type==="object")?bs.SYMBOL_TYPE_UNSUPPORTED:RHe(t)!=="on-the-ground"&&FHe(t)?bs.ELEVATION_MODE_UNSUPPORTED:bs.SUPPORTED}function Gee(t,e,i){if(!e||!(t!=null&&t.map))return;const{map:n}=t;n.layers.find(r=>r===e)||n.add(e,i)}function jee(t,e){const i=(e==null?void 0:e.type)==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(n=>{const s=n.layer;return s===i||"sublayers"in s&&s.sublayers!=null&&s.sublayers.includes(i)})}const _ge=ht("mac")?"Meta":"Control",XHe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),WHe=t=>XHe.has(t);let ZHe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const n of this.keyModifiers)if(!i.has(n))return!1;return!0}},bge=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const n of i)this._incomingEventMatches.push(n.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,n){let s;typeof i=="function"?(n=i,s=[]):s=i||[];const r=typeof e=="string"?new ZHe(e,s):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=y=>{const _=this._incoming[y.match.eventType];if(_){const x=_.indexOf(y);_.splice(x,1),o(),this._manager&&this._manager.updateDependencies()}},c=new KHe(r,n,{onPause:l,onRemove:l,onResume:y=>{const _=this._incoming[y.match.eventType];_&&!_.includes(y)&&(_.push(y),o(),this._manager&&this._manager.updateDependencies())}});let f=this._incoming[r.eventType];return f||(f=[],this._incoming[r.eventType]=f),f.push(c),o(),this._manager&&this._manager.updateDependencies(),c}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new JHe(e,{onEmit:(n,s,r,o)=>{var l;(l=this._manager)==null||l.emit(n.eventType,s,r,o)},onRemove:n=>{var s;delete this._outgoing[n.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var n;const i=this._incoming[e.type];if(i){for(const s of i)if(s.match.matches(e)&&((n=s.callback)==null||n.call(s,e),e.shouldStopPropagation()))break}}},KHe=class{constructor(e,i,n){this.match=e,this._callback=i,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},JHe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,n){this._removed||this._handler.onEmit(this,e,i,n)}remove(){this._removed=!0,this._handler.onRemove(this)}},QHe=class extends bge{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:n,y:s}=e;i===this._value&&this._x===n&&this._y===s||(this._value=i,this._x=n,this._y=s,this._onChange(i,n,s))}},eUe=class{constructor(e,i){this._observable=new YC,this._value=e,this._equalityFunction=i}get value(){return mi(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function V6(t,e=mae){return new eUe(t,e)}let tUe=class extends bge{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=V6(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},iUe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const n in e){const s=e[n],r=new $ae(s,void 0,void 0,2,2);this._properties[n]={pool:r,acquired:[]}}this._afterDispatchHandle=HTe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const n of i.acquired)LW(n)||i.pool.release(n);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),n=this._properties[e];let s=n.pool.acquire();for(n.acquired.push(s);s===i;)n.acquired.push(s),s=n.pool.acquire();return s}_release(){for(const e in this._properties){const i=this._properties[e];let n=0;for(const s of i.acquired)LW(s)?i.acquired[n++]=s:i.pool.release(s);i.acquired.length=n}}},bh=class extends Ei{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=_ge,this._latestPointerType="mouse",this._propertiesPool=new iUe({latestPointerLocation:rUe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,n=rr.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const s={name:e,handlers:i.map(r=>({handler:r,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let r=s.handlers.length-1;r>=0;r--){const o=s.handlers[r];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,c,f,y,_)=>{this._emitInputEvent(o.priorityIndex+1,l,c,f,_,y)},setPointerCapture:(l,c)=>{this._setPointerCapture(s,o,l,c)},setEventCallback:l=>{o.eventCallback=l},setUninstallCallback:l=>{o.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(n=>{var s;n.removed=!0,(s=n.uninstallCallback)==null||s.call(n)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):qt.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let n=this._handlers.length-1;n>=0;n--){const s=this._handlers[n];s.priorityIndex=n,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let n=this._handlersPriority.length-1;n>=0;n--){const s=this._handlersPriority[n];s.priorityIndex=n;let r=s.handler.hasSideEffects;if(!r){for(const o of s.handler.outgoingEventTypes)if(e.has(o)){r=!0;break}}if(r)for(const o of s.handler.incomingEventMatches){e.add(o.eventType);for(const l of o.keyModifiers)WHe(l)||i.add(l)}s.active=r}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,n){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(s==null||s.x!==i||s.y!==n){const r=this._propertiesPool.get("latestPointerLocation");r.x=i,r.y=n,this._set("latestPointerLocation",r)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const r=i;this._pointerCaptures.delete(r.native.pointerId)}this._updateKeyModifiers(e,i);const n=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,n,s)}_updateKeyModifiers(e,i){if(!i)return;let n=!1;const s=()=>{n||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),n=!0)},r=(l,c)=>{c&&!this._activeKeyModifiers.has(l)?(s(),this._activeKeyModifiers.add(l)):!c&&this._activeKeyModifiers.has(l)&&(s(),this._activeKeyModifiers.delete(l))};if(e==="key-down"||e==="key-up"){const l=i.key;this._keyModifiers.has(l)&&r(l,e==="key-down")}const o=i.native;r("Alt",!!(o!=null&&o.altKey)),r("Control",!!(o!=null&&o.ctrlKey)),r("Ctrl",!!(o!=null&&o.ctrlKey)),r("Shift",!!(o!=null&&o.shiftKey)),r("Meta",!!(o!=null&&o.metaKey)),r("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new QHe((e,i,n)=>this._setLatestPointer(e,i,n)),this._multiTouchHandler=new tUe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],rr.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,rr.INTERNAL)}_setPointerCapture(e,i,n,s){const r=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,o),s?(o.add(r),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):o.has(r)&&(o.delete(r),o.size===0&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,n,s){this._emitInputEvent(0,e,i,n,s)}_emitInputEvent(e,i,n,s,r,o){const l=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),c=r!==void 0&&r,f={event:new nUe(i,n,l,o||this._activeKeyModifiers,c),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(f):this._doNewPropagation(f)}_doNewPropagation(e){this._currentPropagation={events:new UF,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,n,s;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:r,priorityIndex:o}=e.events.pop(),l=(i=r.data)==null?void 0:i.eventId;if(!(l!=null&&this._stoppedPropagationEventIds.has(l)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!r.shouldStopPropagation()&&((s=(n=e.currentHandler).eventCallback)==null||s.call(n,r)),r.shouldStopPropagation()){l!=null&&this._stoppedPropagationEventIds.add(l);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new UF;i.push(e);const n=this._currentPropagation;if(n){for(;n.events.length;)i.push(n.events.pop());n.events=i,n.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const n of e.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(n.eventType!==s.eventType)continue;const r=n.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(r.length===n.keyModifiers.length!=(r.length===s.keyModifiers.length))return n.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const n of e){let s=0;for(;s<i.length&&this._compareHandlerPriority(n,i[s])>=0;)s++;i.splice(s,0,n)}return i}get debug(){const e=i=>{const n=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=n};return{injectEvent:(i,n)=>{e(()=>this._onEventReceived(i,n))},disablePointerCapture:e}}};I([O({readOnly:!0})],bh.prototype,"hasPendingInputs",null),I([O({constructOnly:!0})],bh.prototype,"eventSource",void 0),I([O({constructOnly:!0})],bh.prototype,"recognizers",void 0),I([O()],bh.prototype,"_latestPointerType",void 0),I([O()],bh.prototype,"latestPointerType",null),I([O()],bh.prototype,"multiTouchActive",null),I([O({readOnly:!0})],bh.prototype,"latestPointerLocation",void 0),I([O()],bh.prototype,"_paused",void 0),I([O({readOnly:!0})],bh.prototype,"updating",null),bh=I([De("esri.views.input.InputManager")],bh);let nUe=class{constructor(e,i,n,s,r){this.type=e,this.data=i,this.timestamp=n,this.modifiers=s,this.cancelable=r,this._propagationState=Zg.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Zg.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Zg.STOPPED)}async(e){this._propagationState|=Zg.PAUSED;const i=(n,s)=>{this._propagationState&=~Zg.PAUSED;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),s)throw n;return n};return(typeof e=="function"?e():e).then(n=>i(n,!1),n=>i(n,!0))}shouldPausePropagation(e){return!!(this._propagationState&Zg.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Zg;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Zg||(Zg={}));const rr={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let sUe=class{};const rUe=sUe,oUe="z",aUe="r",zs={redo:aUe,undo:oUe,center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},Bee={toggle:"Control"},xyt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},wyt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:_ge,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let Syt=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,n=>{n.type==="key-down"&&i(n)})}addToggle(e,i){const n=lUe.fromDefinition(e,i),s=uV(this._bindings,n.key,()=>[]);return s.push(n),fn(()=>qM(s,n))}register(e,i=rr.WIDGET){return bm([e.on("key-down",n=>this.dispatch(e.inputManager,n),i),e.on("key-up",n=>this.dispatch(e.inputManager,n),i)])}dispatch(e,i){const n=i.key,s=this._bindings.get(n);if(s)for(const r of s)r.process(e,i)}},lUe=class yz{constructor(e,i,n,s,r){this.key=e,this.modifiers=i,this.repeats=n,this.continuePropagation=s,this.callback=r}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const n of this.modifiers)if(!e.isModifierKeyDown(n))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new yz(e,[],!1,!1,i);const{key:n,modifier:s,repeats:r,continuePropagation:o}=e;return new yz(n,s?Array.isArray(s)?s:[s]:[],!!r,!!o,i)}},QI=class extends Ei{constructor(e){super(e),this.enabled=!1}};I([O({type:Boolean,nonNullable:!0})],QI.prototype,"enabled",void 0),QI=I([De("esri.views.interactive.sketch.SketchLabelOptions")],QI);const b5=QI;let cE=class extends Ei{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};I([O({type:String,nonNullable:!0})],cE.prototype,"mode",void 0),cE=I([De("esri.views.interactive.sketch.SketchTooltipElevationOptions")],cE);let Ba=class extends Ei{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"area",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"coordinates",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"direction",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"distance",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"elevation",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"header",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"helpMessage",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"orientation",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"radius",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"rotation",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"scale",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"size",void 0),I([O({type:Boolean,nonNullable:!0})],Ba.prototype,"totalLength",void 0),Ba=I([De("esri.views.interactive.sketch.SketchTooltipVisibleElements")],Ba);const xge=Ba;let dl=class extends Ei{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new cE,this.placement="auto",this.offset=null,this.visibleElements=new xge,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};I([O({type:Boolean,nonNullable:!0})],dl.prototype,"enabled",void 0),I([O()],dl.prototype,"forceEnabled",void 0),I([O()],dl.prototype,"effectiveEnabled",null),I([O()],dl.prototype,"helpMessage",void 0),I([O()],dl.prototype,"helpMessageIcon",void 0),I([O({type:Boolean,nonNullable:!0})],dl.prototype,"inputEnabled",void 0),I([O({type:cE,nonNullable:!0})],dl.prototype,"elevation",void 0),I([O()],dl.prototype,"placement",void 0),I([O()],dl.prototype,"offset",void 0),I([O({type:xge,nonNullable:!0})],dl.prototype,"visibleElements",void 0),I([O()],dl.prototype,"visualVariables",void 0),I([O()],dl.prototype,"xyMode",void 0),dl=I([De("esri.views.interactive.sketch.SketchTooltipOptions")],dl);const Ej=dl;let $b=class extends Ei{constructor(e){super(e),this.labels=new b5,this.tooltips=new Ej,this.values=new QA}};I([O({nonNullable:!0,type:b5})],$b.prototype,"labels",void 0),I([O({nonNullable:!0,type:Ej})],$b.prototype,"tooltips",void 0),I([O({nonNullable:!0,type:QA})],$b.prototype,"values",void 0),$b=I([De("esri.views.interactive.sketch.SketchOptions")],$b);const i7=$b;var wv;function wge(t,e,i){return Io(t,e,i)}function Io(t=0,e=0,i=0){return Sl(t,e,i)}function Ayt(t){return t}function kyt(t){return t}function q0(t,e,i){return Sl(t,e,i)}function K2(t){const[e,i,n]=t;return t.length>3?[e,i,n,t[3]]:[e,i,n]}function IN(t){return t[3]=((t.length>3?t[3]:void 0)??wv.NONE)|wv.TARGET,t}function Dyt(t){return!!(((t.length>3?t[3]:void 0)??wv.NONE)&wv.TARGET)}function Hee(t,e,{coordinateHelper:i,elevationInfo:n},s){return t?f0(i.vectorToDehydratedPoint(t,cUe),e,n,s):null}function f0(t,e,i,n=Io()){return n[0]=t.x,n[1]=t.y,n[2]=t.z??0,e==null||(e.type==="2d"?n[2]=0:n[2]=Sj(e,t,i,z0)??0),n}function Nyt(t,e,i){return i?(hge(i,t[0],t[1],t[2],e),i):Ff(t[0],t[1],t[2],e)}function vz(t,e,{z:i,m:n},s,r){const{spatialReference:o,elevationInfo:l}=s;let c;i==null&&n==null?c=void 0:e==null||e.type==="2d"?c=i??void 0:c=vge(e,t,o,z0,l)??0;const[f,y]=t;return r?hge(r,f,y,c,o):r=Ff(f,y,c,o),n!=null&&(r.m=n,r.hasM=!0),r}function Oyt(t,e,i,n,s=Io()){const[r,o]=t;return s[0]=r,s[1]=o,t.length>3&&(s[3]=t[3]??wv.NONE),(i==null?void 0:i.type)!=="3d"?(s[2]=e.value,s):(s[2]=t7(i,r,o,e.value,n,e.elevationInfo,z0)??0,s)}(function(t){t[t.NONE=0]="NONE",t[t.TARGET=1]="TARGET"})(wv||(wv={}));const cUe=Ff(0,0,0,null);let Jh=class extends St{constructor(){super(...arguments),this.enabled=!0}};I([O({type:Boolean})],Jh.prototype,"enabled",void 0),Jh=I([De("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],Jh);let Fs=class extends St{constructor(e){super(e),this.lineSnapper=new Jh,this.parallelLineSnapper=new Jh,this.rightAngleSnapper=new Jh,this.rightAngleTriangleSnapper=new Jh,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new fi([255,127,0]),this.orangeTransparent=new fi([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};I([O({type:Jh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Fs.prototype,"lineSnapper",void 0),I([O({type:Jh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Fs.prototype,"parallelLineSnapper",void 0),I([O({type:Jh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Fs.prototype,"rightAngleSnapper",void 0),I([O({type:Jh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Fs.prototype,"rightAngleTriangleSnapper",void 0),I([O({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Fs.prototype,"shortLineThreshold",void 0),I([O({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Fs.prototype,"distance",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Fs.prototype,"pointThreshold",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Fs.prototype,"intersectionParallelLineThreshold",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Fs.prototype,"parallelLineThreshold",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Fs.prototype,"verticalLineThresholdMeters",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Fs.prototype,"touchSensitivityMultiplier",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Fs.prototype,"pointOnLineThreshold",void 0),I([O({type:fi,nonNullable:!0})],Fs.prototype,"orange",void 0),I([O({type:fi,nonNullable:!0})],Fs.prototype,"orangeTransparent",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Fs.prototype,"lineHintWidthReference",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Fs.prototype,"lineHintWidthTarget",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Fs.prototype,"lineHintFadedExtensions",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Fs.prototype,"parallelLineHintWidth",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],Fs.prototype,"parallelLineHintLength",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Fs.prototype,"parallelLineHintOffset",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],Fs.prototype,"rightAngleHintSize",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],Fs.prototype,"rightAngleHintOutlineSize",void 0),I([O({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Fs.prototype,"satisfiesConstraintScreenThreshold",void 0),Fs=I([De("esri.views.interactive.snapping.Settings.Defaults")],Fs);const G6=new Fs;var Qa;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(Qa||(Qa={}));let Fg=class extends Ei{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new ci}};I([O({constructOnly:!0})],Fg.prototype,"layer",void 0),I([O()],Fg.prototype,"enabled",void 0),I([O()],Fg.prototype,"updating",void 0),I([O()],Fg.prototype,"availability",void 0),I([O()],Fg.prototype,"sublayerSources",void 0),Fg=I([De("esri.views.interactive.snapping.FeatureSnappingLayerSource")],Fg);const Cj=Fg;let Fo=class extends Ei{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new ci,this.distance=G6.distance,this.touchSensitivityMultiplier=G6.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){var c;const e=this.featureSources;e.some(Uee)&&qt.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const i=e.filter(hUe),n=((c=this._get("_effectiveFeatureSources"))==null?void 0:c.filter(Uee))??new ci;for(const f of i){const y=n.find(_=>_.layer===f.layer.parent);if(y)y.sublayerSources.includes(f)||y.sublayerSources.add(f);else if(f.layer.parent){const _=new Cj({layer:f.layer.parent});_.sublayerSources.add(f),n.add(_)}}for(const f of n){const y=f.sublayerSources.filter(_=>!i.includes(_));f.sublayerSources.removeMany(y)}n.removeMany(n.filter(f=>f.sublayerSources.length===0));const s=e.filter(uUe),r=this._get("_effectiveFeatureSources")??new ci,{added:o,removed:l}=k4e(r.toArray(),[...s,...n]);return r.removeMany(l),r.addMany(o),r}};I([O()],Fo.prototype,"enabled",void 0),I([O()],Fo.prototype,"enabledToggled",void 0),I([O()],Fo.prototype,"forceDisabled",void 0),I([O()],Fo.prototype,"selfEnabled",void 0),I([O()],Fo.prototype,"featureEnabled",void 0),I([O()],Fo.prototype,"gridEnabled",void 0),I([O()],Fo.prototype,"attributeRulesEnabled",void 0),I([O({type:ci.ofType(Cj)})],Fo.prototype,"featureSources",void 0),I([O()],Fo.prototype,"distance",void 0),I([O()],Fo.prototype,"touchSensitivityMultiplier",void 0),I([O({readOnly:!0})],Fo.prototype,"effectiveEnabled",null),I([O({readOnly:!0})],Fo.prototype,"effectiveGridEnabled",null),I([O({readOnly:!0})],Fo.prototype,"effectiveSelfEnabled",null),I([O({readOnly:!0})],Fo.prototype,"effectiveFeatureEnabled",null),I([O({readOnly:!0})],Fo.prototype,"_effectiveFeatureSources",null),Fo=I([De("esri.views.interactive.snapping.SnappingOptions")],Fo);const x5=Fo;function Uee(t){return t.layer.type==="subtype-group"}function uUe(t){return t.layer.type!=="subtype-group"}function hUe(t){return t.layer.type==="subtype-sublayer"}let dUe=class extends vpe{constructor(e,i){super(e,i,"webmap")}};function fUe(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const qyt=new dUe(2,32),Vyt=Symbol("grid-placement-graphic");function Sge(t,e){const i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function Gyt(t,e){return Math.sqrt(Sge(t,e))}function pUe(t,e){e.sort((i,n)=>Z2(i.targetPoint,t)-Z2(n.targetPoint,t))}var ih;function jyt({point:t,distance:e,returnEdge:i,vertexMode:n,coordinateHelper:{spatialReference:s},filter:r},o,l){return l=l!=null?l.clone():new Q0({where:"1=1"}),r&&(l.geometry=r.geometry,l.distance=r.distance,l.spatialRelationship=r.spatialRelationship,l.where=mde(l.where,r.where),l.timeExtent=r8e(l.timeExtent,r.timeExtent),l.objectIds=mUe(l.objectIds,r.objectIds)),{point:Ff(t[0],t[1],t[2],s.toJSON()),mode:o,distance:e,returnEdge:i,vertexMode:n,query:l.toJSON()}}function mUe(t,e){return t||e?e?t?Array.from(Gae(new Set(t),new Set(e))):e:t:null}function Byt(t,e,i){return{left:Hee(t.leftVertex.pos,e,i),right:Hee(t.rightVertex.pos,e,i)}}function Hyt(t){return t.createQuery()}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(ih||(ih={}));const Yee=Symbol("snapping-toggle");function Ege(t,e=()=>{}){const i=xi(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:n,snappingOptions:s})=>{if(t.removeHandles(Yee),!n||!s)return;const r=rr.TOOL,o=[n.on("key-down",l=>{l.key!==Bee.toggle||l.repeat||(s.enabledToggled=!0,e())},r),n.on("key-up",l=>{l.key===Bee.toggle&&(s.enabledToggled=!1,e())},r),n.on("pointer-move",l=>{const c=l.native.ctrlKey;s.enabledToggled!==c&&(s.enabledToggled=c,e())},r)];t.addHandles(o,Yee)},ac);t.addHandles(i)}function Uyt(t){var e;return fUe(t)&&"utilityNetworks"in t&&!!((e=t.utilityNetworks)!=null&&e.length)}function Yyt(t,e,i){const n=Pn(t,e)/Pn(t,t);return Yc(i,t,n)}function uE(t,e){return Pn(t,e)/hd(t)}function Cge(t,e){const i=Pn(t,e)/(hd(t)*hd(e));return-nG(i)}function Xyt(t,e,i){Co(eT,t),Co(MN,e);const n=Pn(eT,MN),s=nG(n),r=Yr(eT,eT,MN);return Pn(r,i)<0?2*Math.PI-s:s}const eT=$t(),MN=$t();function n7(){return[1,0,0,0,1,0,0,0,1]}function gUe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function yUe(t,e,i,n,s,r,o,l,c){return[t,e,i,n,s,r,o,l,c]}function vUe(t,e){return new Float64Array(t,e,9)}const _Ue=n7();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:_Ue,clone:gUe,create:n7,createView:vUe,fromValues:yUe},Symbol.toStringTag,{value:"Module"}));function Pj(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function bUe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function xUe(t,e,i,n,s,r,o,l,c,f,y,_,x,S,P,A){return[t,e,i,n,s,r,o,l,c,f,y,_,x,S,P,A]}function wUe(t,e){return new Float64Array(t,e,16)}const SUe=Pj();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:SUe,clone:bUe,create:Pj,createView:wUe,fromValues:xUe},Symbol.toStringTag,{value:"Module"}));function Sv(){return[0,0,0,1]}function EUe(t){return[t[0],t[1],t[2],t[3]]}function CUe(t,e,i,n){return[t,e,i,n]}const PUe=Sv();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:PUe,clone:EUe,create:Sv,fromValues:CUe},Symbol.toStringTag,{value:"Module"}));let Vx=class by{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&D2(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new by(_r)}static createVec3f64(){return new by($t)}static createVec4f64(){return new by(Em)}static createMat3f64(){return new by(n7)}static createMat4f64(){return new by(Pj)}static createQuatf64(){return new by(Sv)}get test(){}};const Wyt=Vx.createVec2f64(),Ko=Vx.createVec3f64(),TUe=Vx.createVec4f64();Vx.createMat3f64();const IUe=Vx.createMat4f64(),Zyt=Vx.createQuatf64();function Kyt(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],n=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}function Jyt(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),n=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),s=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return Gs(t,i,n,s),t}function Tj(t,e,i){Math.abs(t[0])>Math.abs(t[1])?Gs(e,0,1,0):Gs(e,1,0,0),Yr(i,t,e),Yr(e,i,t),Co(i,i),Co(e,e)}function sl(t=SS){return[t[0],t[1],t[2],t[3]]}function Qyt(t=SS[0],e=SS[1],i=SS[2],n=SS[3]){return Pge(t,e,i,n,TUe.get())}function e9(t,e){return Pge(e[0],e[1],e[2],e[3],t)}function evt(t){return t}function Pge(t,e,i,n,s=sl()){return s[0]=t,s[1]=e,s[2]=i,s[3]=n,s}function Gx(t,e,i){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],s=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return i[0]=e[0]*s,i[1]=e[1]*s,i[2]=e[2]*s,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function Tge(t,e,i,n=sl()){const s=i[0]-e[0],r=i[1]-e[1],o=i[2]-e[2],l=t[0]-e[0],c=t[1]-e[1],f=t[2]-e[2],y=r*f-o*c,_=o*l-s*f,x=s*c-r*l,S=y*y+_*_+x*x,P=Math.abs(S-1)>1e-5&&S>1e-12?1/Math.sqrt(S):1;return n[0]=y*P,n[1]=_*P,n[2]=x*P,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function Ige(t,e,i,n=0,s=Math.floor(i*(1/3)),r=Math.floor(i*(2/3))){if(i<3)return!1;e(d3,n);let o=s,l=!1;for(;o<i-1&&!l;)e(H_,o),o++,l=!ds(d3,H_);if(!l)return!1;for(o=Math.max(o,r),l=!1;o<i&&!l;)e(ky,o),o++,zr(tT,d3,H_),Co(tT,tT),zr(iT,H_,ky),Co(iT,iT),l=!ds(d3,ky)&&!ds(H_,ky)&&Math.abs(Pn(tT,iT))<MUe;return l?(Tge(d3,H_,ky,t),!0):(n!==0||s!==1||r!==2)&&Ige(t,e,i,0,1,2)}function tvt(t,e,i=!0){const n=e.length/3;return Ige(t,(s,r)=>Gs(s,e[3*r+0],e[3*r+1],e[3*r+2]),i?n-1:n)}const MUe=.99619469809,d3=$t(),H_=$t(),ky=$t(),tT=$t(),iT=$t();function ivt(t,e,i){return e!==t&&e9(t,e),t[3]=-Pn(t,i),t}function nvt(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function svt(t,e,i,n){return Yr(ky,e,t),Gx(i,ky,n)}function Ij(t,e,i,n){return s7(r7(t,e,zr(Ko.get(),i,e),kUe,n))}function rvt(t,e,i){return e!=null&&s7(r7(t,e.origin,e.direction,DUe,i))}function ovt(t,e,i){return s7(r7(t,e.origin,e.vector,bf.NONE,i))}function avt(t,e,i){return s7(r7(t,e.origin,e.vector,bf.CLAMP,i))}function Mge(t,e){return hf(t,e)>=0}function lvt(t,e){const i=Pn(t,e.ray.direction),n=-hf(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return n>0;const s=n/i;return i>0?s<e.c1&&(e.c1=s):s>e.c0&&(e.c0=s),e.c0<=e.c1}function Mj(t,e,i){const n=Yc(Ko.get(),t,-t[3]),s=AUe(t,zr(Ko.get(),e,n),Ko.get());return tc(i,s,n),i}function cvt(t,e,i,n){const s=t,r=Ko.get(),o=Ko.get();Tj(s,r,o);const l=zr(Ko.get(),i,e),c=uE(r,l),f=uE(o,l),y=uE(s,l);return Gs(n,c,f,y)}function AUe(t,e,i){const n=Yc(Ko.get(),t,Pn(t,e));return zr(i,e,n),i}function _z(t,e){return Math.abs(hf(t,e))}function hf(t,e){return Pn(t,e)+t[3]}var of;function s7(t){return t===of.INTERSECTS_INSIDE_OUT||t===of.INTERSECTS_OUTSIDE_IN}function r7(t,e,i,n,s){const r=Pn(t,i),o=hf(t,e);if(r===0)return o>=0?of.INSIDE:of.OUTSIDE;let l=-o/r;return n&bf.CLAMP&&(l=Qu(l,0,1)),!(n&bf.INFINITE_MIN)&&l<0||!(n&bf.INFINITE_MAX)&&l>1?o>=0?of.INSIDE:of.OUTSIDE:(tc(s,e,Yc(s,i,l)),o>=0?of.INTERSECTS_INSIDE_OUT:of.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(of||(of={}));const SS=[0,0,1,0];var bf;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(bf||(bf={}));const kUe=bf.INFINITE_MIN|bf.INFINITE_MAX,DUe=bf.INFINITE_MAX;let NUe=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&D2(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*Xee);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,Xee));e++)this._items.push(this._allocator())}};const Xee=1024;function OUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function $Ue(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function RUe(t,e,i,n,s,r,o,l,c,f){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=r,t[5]=o,t[6]=l,t[7]=c,t[8]=f,t}function LUe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function FUe(t,e){if(t===e){const i=e[1],n=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function zUe(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8],_=y*o-l*f,x=-y*r+l*c,S=f*r-o*c;let P=i*_+n*x+s*S;return P?(P=1/P,t[0]=_*P,t[1]=(-y*n+s*f)*P,t[2]=(l*n-s*o)*P,t[3]=x*P,t[4]=(y*i-s*c)*P,t[5]=(-l*i+s*r)*P,t[6]=S*P,t[7]=(-f*i+n*c)*P,t[8]=(o*i-n*r)*P,t):null}function qUe(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8];return t[0]=o*y-l*f,t[1]=s*f-n*y,t[2]=n*l-s*o,t[3]=l*c-r*y,t[4]=i*y-s*c,t[5]=s*r-i*l,t[6]=r*f-o*c,t[7]=n*c-i*f,t[8]=i*o-n*r,t}function VUe(t){const e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],l=t[6],c=t[7],f=t[8];return e*(f*r-o*c)+i*(-f*s+o*l)+n*(c*s-r*l)}function Age(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=e[8],x=i[0],S=i[1],P=i[2],A=i[3],D=i[4],N=i[5],F=i[6],G=i[7],V=i[8];return t[0]=x*n+S*o+P*f,t[1]=x*s+S*l+P*y,t[2]=x*r+S*c+P*_,t[3]=A*n+D*o+N*f,t[4]=A*s+D*l+N*y,t[5]=A*r+D*c+N*_,t[6]=F*n+G*o+V*f,t[7]=F*s+G*l+V*y,t[8]=F*r+G*c+V*_,t}function GUe(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=e[8],x=i[0],S=i[1];return t[0]=n,t[1]=s,t[2]=r,t[3]=o,t[4]=l,t[5]=c,t[6]=x*n+S*o+f,t[7]=x*s+S*l+y,t[8]=x*r+S*c+_,t}function jUe(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=e[8],x=Math.sin(i),S=Math.cos(i);return t[0]=S*n+x*o,t[1]=S*s+x*l,t[2]=S*r+x*c,t[3]=S*o-x*n,t[4]=S*l-x*s,t[5]=S*c-x*r,t[6]=f,t[7]=y,t[8]=_,t}function BUe(t,e,i){const n=i[0],s=i[1],r=i[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=r*e[6],t[7]=r*e[7],t[8]=r*e[8],t}function HUe(t,e,i){const n=i[0],s=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function UUe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function YUe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function XUe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function WUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function ZUe(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],o=i+i,l=n+n,c=s+s,f=i*o,y=n*o,_=n*l,x=s*o,S=s*l,P=s*c,A=r*o,D=r*l,N=r*c;return t[0]=1-_-P,t[3]=y-N,t[6]=x+D,t[1]=y+N,t[4]=1-f-P,t[7]=S-A,t[2]=x-D,t[5]=S+A,t[8]=1-f-_,t}function KUe(t,e){const i=e[0],n=e[1],s=e[2],r=e[4],o=e[5],l=e[6],c=e[8],f=e[9],y=e[10],_=y*o-l*f,x=-y*r+l*c,S=f*r-o*c,P=i*_+n*x+s*S;if(!P)return null;const A=1/P;return t[0]=_*A,t[1]=(-y*n+s*f)*A,t[2]=(l*n-s*o)*A,t[3]=x*A,t[4]=(y*i-s*c)*A,t[5]=(-l*i+s*r)*A,t[6]=S*A,t[7]=(-f*i+n*c)*A,t[8]=(o*i-n*r)*A,t}function JUe(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8],_=e[9],x=e[10],S=e[11],P=e[12],A=e[13],D=e[14],N=e[15],F=i*l-n*o,G=i*c-s*o,V=i*f-r*o,B=n*c-s*l,W=n*f-r*l,J=s*f-r*c,re=y*A-_*P,ne=y*D-x*P,oe=y*N-S*P,pe=_*D-x*A,ce=_*N-S*A,ue=x*N-S*D;let se=F*ue-G*ce+V*pe+B*oe-W*ne+J*re;return se?(se=1/se,t[0]=(l*ue-c*ce+f*pe)*se,t[1]=(c*oe-o*ue-f*ne)*se,t[2]=(o*ce-l*oe+f*re)*se,t[3]=(s*ce-n*ue-r*pe)*se,t[4]=(i*ue-s*oe+r*ne)*se,t[5]=(n*oe-i*ce-r*re)*se,t[6]=(A*J-D*W+N*B)*se,t[7]=(D*V-P*J-N*G)*se,t[8]=(P*W-A*V+N*F)*se,t):null}function QUe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function eYe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function tYe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function iYe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function kge(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function nYe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function sYe(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t}function rYe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function oYe(t,e){const i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],l=t[5],c=t[6],f=t[7],y=t[8],_=e[0],x=e[1],S=e[2],P=e[3],A=e[4],D=e[5],N=e[6],F=e[7],G=e[8],V=ho();return Math.abs(i-_)<=V*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(n-x)<=V*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(s-S)<=V*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(r-P)<=V*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(o-A)<=V*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(l-D)<=V*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(c-N)<=V*Math.max(1,Math.abs(c),Math.abs(N))&&Math.abs(f-F)<=V*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(y-G)<=V*Math.max(1,Math.abs(y),Math.abs(G))}function aYe(t){const e=ho(),i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],l=t[5],c=t[6],f=t[7],y=t[8];return Math.abs(1-(i*i+r*r+c*c))<=e&&Math.abs(1-(n*n+o*o+f*f))<=e&&Math.abs(1-(s*s+l*l+y*y))<=e}const lYe=Age,cYe=kge;Object.freeze(Object.defineProperty({__proto__:null,add:iYe,adjoint:qUe,copy:$Ue,determinant:VUe,equals:oYe,exactEquals:rYe,frob:tYe,fromMat2d:WUe,fromMat4:OUe,fromQuat:ZUe,fromRotation:YUe,fromScaling:XUe,fromTranslation:UUe,identity:LUe,invert:zUe,isOrthoNormal:aYe,mul:lYe,multiply:Age,multiplyScalar:nYe,multiplyScalarAndAdd:sYe,normalFromMat4:JUe,normalFromMat4Legacy:KUe,projection:QUe,rotate:jUe,scale:BUe,scaleByVec2:HUe,set:RUe,str:eYe,sub:cYe,subtract:kge,translate:GUe,transpose:FUe},Symbol.toStringTag,{value:"Module"}));function o7(t){return t?Wee(cc(t.origin),cc(t.direction)):Wee($t(),$t())}function Wee(t,e){return{origin:t,direction:e}}function hvt(t,e){const i=fYe.get();return i.origin=t,i.direction=e,i}function dvt(t,e=o7()){return hYe(t.origin,t.direction,e)}function uYe(t,e,i=o7()){return rc(i.origin,t),zr(i.direction,e,t),i}function hYe(t,e,i=o7()){return rc(i.origin,t),rc(i.direction,e),i}function fvt(t,e){const i=Yr(Ko.get(),Co(Ko.get(),t.direction),zr(Ko.get(),e,t.origin));return Pn(i,i)}function dYe(t,e,i){const n=Pn(t.direction,zr(i,e,t.origin));return tc(i,t.origin,Yc(i,t.direction,n)),i}const fYe=new NUe(()=>o7());function Zee(t,e){const i=hd(t),n=sG(t[2]/i),s=Math.atan2(t[1]/i,t[0]/i);return Gs(e,i,n,s),e}const pYe=Aj();function Aj(){return Em()}const Dge=u5,mYe=u5;function Nge(t,e){return W2(e,t)}function Oge(t,e){return Yu(t[0],t[1],t[2],e)}function gYe(t){return t}function yYe(t){t[0]=t[1]=t[2]=t[3]=0}function vYe(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function w5(t){return t[3]}function _Ye(t){return t}function bYe(t,e,i,n){return Yu(t,e,i,n)}function xYe(t,e,i){return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=t[3]+e,i}function wYe(t,e,i){return t!==i&&Nge(t,i),i}function SYe(t,e){return e}function a7(t,e,i){if(e==null||!Rge(t,e,j6))return!1;let{t0:n,t1:s}=j6;if((n<0||s<n&&s>0)&&(n=s),n<0)return!1;if(i){const{origin:r,direction:o}=e;i[0]=r[0]+o[0]*n,i[1]=r[1]+o[1]*n,i[2]=r[2]+o[2]*n}return!0}function $ge(t,e,i){const n=uYe(e,i);if(!Rge(t,n,j6))return[];const{origin:s,direction:r}=n,{t0:o,t1:l}=j6,c=f=>{const y=$t();return jo(y,s,r,f),l7(t,y,y)};return Math.abs(o-l)<ho()?[c(o)]:[c(o),c(l)]}const j6={t0:0,t1:0};function Rge(t,e,i){const{origin:n,direction:s}=e,r=EYe;r[0]=n[0]-t[0],r[1]=n[1]-t[1],r[2]=n[2]-t[2];const o=s[0]*s[0]+s[1]*s[1]+s[2]*s[2];if(o===0)return!1;const l=2*(s[0]*r[0]+s[1]*r[1]+s[2]*r[2]),c=l*l-4*o*(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]-t[3]*t[3]);if(c<0)return!1;const f=Math.sqrt(c);return i.t0=(-l-f)/(2*o),i.t1=(-l+f)/(2*o),!0}const EYe=$t();function CYe(t,e){return a7(t,e,null)}function PYe(t,e,i){if(a7(t,e,i))return i;const n=Lge(t,e,Ko.get());return tc(i,e.origin,Yc(Ko.get(),e.direction,i1(e.origin,n)/hd(e.direction))),i}function Lge(t,e,i){const n=Ko.get(),s=IUe.get();Yr(n,e.origin,e.direction);const r=w5(t);Yr(i,n,e.origin),Yc(i,i,1/hd(i)*r);const o=Fge(t,e.origin),l=Cge(e.origin,i);return Zhe(s,l+o,n),lge(i,i,s),i}function TYe(t,e,i,n){const s=w5(t),r=s*s,o=e+.5*Math.PI,l=i*i+r-2*Math.cos(o)*i*s,c=Math.sqrt(l),f=l-r;if(f<=0)return .5;const y=Math.sqrt(f),_=Math.acos(y/c)-Math.asin(s/(c/Math.sin(o)));return Math.min(1,(_+.5*n)/n)}function IYe(t,e,i){return a7(t,e,i)?i:(dYe(e,t,i),l7(t,i,i))}function l7(t,e,i){const n=zr(Ko.get(),e,t),s=Yc(Ko.get(),n,t[3]/hd(n));return tc(i,s,t)}function MYe(t,e){const i=zr(Ko.get(),e,t),n=ZA(i),s=t[3]*t[3];return Math.sqrt(Math.abs(n-s))}function Fge(t,e){const i=zr(Ko.get(),e,t),n=hd(i),s=w5(t),r=s+Math.abs(s-n);return nG(s/r)}const AN=$t();function zge(t,e,i,n){const s=zr(AN,e,t);switch(i){case td.X:{const r=Zee(s,AN)[2];return Gs(n,-Math.sin(r),Math.cos(r),0)}case td.Y:{const r=Zee(s,AN),o=r[1],l=r[2],c=Math.sin(o);return Gs(n,-c*Math.cos(l),-c*Math.sin(l),Math.cos(o))}case td.Z:return Co(n,s);default:return}}function qge(t,e){const i=zr(bz,e,t);return hd(i)-t[3]}function AYe(t,e,i,n){const s=qge(t,e),r=zge(t,e,td.Z,bz),o=Yc(bz,r,i-s);return tc(n,e,o)}function kYe(t,e){const i=Z2(t,e),n=w5(t);return i<=n*n}function DYe(t,e,i=Em()){const n=i1(t,e),s=t[3],r=e[3];return n+r<s?(W2(i,t),i):n+s<r?(W2(i,e),i):(qx(i,t,e,(n+r-s)/(2*n)),i[3]=(n+s+r)/2,i)}const bz=$t(),NYe=Aj(),pvt=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:pYe,altitudeAt:qge,angleToSilhouette:Fge,axisAt:zge,cameraFrustumCoverage:TYe,clear:yYe,closestPoint:IYe,closestPointOnSilhouette:Lge,containsPoint:kYe,copy:Nge,create:Aj,distanceToSilhouette:MYe,elevate:xYe,equals:mYe,exactEquals:Dge,fromCenterAndRadius:Oge,fromRadius:vYe,fromValues:bYe,getCenter:_Ye,getExtent:SYe,getRadius:w5,intersectLine:$ge,intersectRay:a7,intersectRayClosestSilhouette:PYe,intersectsRay:CYe,projectPoint:l7,setAltitudeAt:AYe,setExtent:wYe,tmpSphere:NYe,union:DYe,wrap:gYe},Symbol.toStringTag,{value:"Module"}));function kN(t,e){return t[0]*e[1]-t[1]*e[0]}function OYe(t,e,i){const n=t1(i,e)/cm(i);return Yme(t,i,n)}function mvt(t,e,i,n,s=i){return To(Qy,n,i),To(B6,e,s),OYe(J2,B6,Qy),Bme(t,s,J2)}function gvt(t,e,i,n){To(Qy,e,i);const s=n/WA(Qy);return nd(t,i,Qy,s)}function $Ye(t,e){const i=t.start,n=t.end,s=e.start,r=e.end,o=To(Qy,n,i),l=To(Vge,r,s),c=kN(o,l);if(Math.abs(c)<=LYe)return[];const f=To(B6,i,s),y=kN(l,f)/c,_=kN(o,f)/c;if(y>=0){if(_>=0||e.type===Vs.LINE)return[nd(J2,i,o,y)]}else if(t.type===Vs.LINE&&(_>=0||e.type===Vs.LINE))return[nd(J2,i,o,y)];return[]}function RYe(t,e,i){const n=[],s=To(Qy,t.end,t.start),r=To(Vge,t.start,e),o=cm(s),l=2*t1(s,r),c=l*l-4*o*(cm(r)-i*i);if(c===0){const f=-l/(2*o);(t.type===Vs.LINE||f>=0)&&n.push(nd(J2,t.start,s,f))}else if(c>0){const f=Math.sqrt(c),y=(-l+f)/(2*o);(t.type===Vs.LINE||y>=0)&&n.push(nd(J2,t.start,s,y));const _=(-l-f)/(2*o);(t.type===Vs.LINE||_>=0)&&n.push(nd(B6,t.start,s,_))}return n}var Vs;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(Vs||(Vs={}));const LYe=1e-6,Qy=_r(),Vge=_r(),B6=_r(),J2=_r();function kj({start:t,end:e,type:i},n,s){const r=[],o=To(S5,e,t),l=To(c7,t,n),c=cm(o),f=2*t1(o,l),y=f*f-4*c*(cm(l)-s*s);if(y===0){const _=-f/(2*c);(i===Vc.PLANE||_>=0)&&r.push(nd(_r(),t,o,_))}else if(y>0){const _=Math.sqrt(y),x=(-f+_)/(2*c);(i===Vc.PLANE||x>=0)&&r.push(nd(_r(),t,o,x));const S=(-f-_)/(2*c);(i===Vc.PLANE||S>=0)&&r.push(nd(_r(),t,o,S))}return r}function Gge(t,e){const i=t.start,n=t.end,s=To(S5,n,i),r=Gs(h7,-s[1],s[0],0),o=e.start,l=e.end,c=ic(Nj,l,o),f=Pn(c,r),y=Gs(Zge,i[0],i[1],0),_=ic(Kge,y,o),x=Pn(_,r),S=ho();if(Math.abs(f)<S)return[];const P=jo(Jge,o,c,x/f);if(e.type===Vs.RAY){const A=ic(xz,P,o);if(Pn(A,c)<-S)return[]}if(t.type===Vc.HALF_PLANE){const A=Jme(c7,P,i);if(t1(A,s)<-S)return[]}return[cc(P)]}function FYe(t,e){return qYe(H6(Oj,e[2],t),e)}function jge(t,e){return Xge(H6(Oj,0,t),H6(BYe,0,e)).map(([n,s])=>Xu(n,s))}function Bge(t,e,i){return Uge(t,H6(Oj,t[2],e),i)}function Hge(t,e,i,n=$t()){const s=To(S5,t,e),r=WA(s);return nd(n,e,s,r===0?1:i/r),n[2]=t[2],n}function Uge(t,{start:e,end:i,type:n},s=$t()){const r=ic(u7,t,e),o=ic(h7,i,e),l=Pn(r,o)/Pn(o,o);return jo(s,e,o,n===Vs.RAY?Math.max(l,0):l)}const zYe=(()=>{const t=$t(),e=$t(),i=$t();return({start:n,end:s},{center:r,radius:o,normal:l,slicePlane:c})=>{const f=Gx(r,l,jYe);if(ks(_z(f,n),0)&&ks(_z(f,s),0)){Tj(l,t,e);const _=(P,A)=>(zr(i,A,r),_j(P,Pn(i,t),Pn(i,e)),P),x=RYe({start:_(S5,n),end:_(c7,s),type:Vs.LINE},sge,o),S=[];for(const[P,A]of x){const D=rc($t(),r);jo(D,D,t,P),jo(D,D,e,A),c&&!S0(c,D)||S.push(D)}return S}const y=$t();return Ij(f,n,s,y)?!ks(i1(y,r),o)||c&&!S0(c,y)?[]:[y]:[]}})();function Yge({start:t,end:e,type:i},n,s){const r=[],o=zr(u7,e,t),l=To(c7,t,n),c=cm(o),f=2*t1(o,l),y=f*f-4*c*(cm(l)-s*s);if(y===0){const _=-f/(2*c);(i===Vs.LINE||_>=0)&&r.push(jo($t(),t,o,_))}else if(y>0){const _=Math.sqrt(y),x=(-f+_)/(2*c);(i===Vs.LINE||x>=0)&&r.push(jo($t(),t,o,x));const S=(-f-_)/(2*c);(i===Vs.LINE||S>=0)&&r.push(jo($t(),t,o,S))}return r}function Xge(t,e){const i=t.start,n=t.end,s=e.start,r=e.end,o=ic(u7,n,i),l=ic(h7,r,s),c=ic(Nj,s,i),f=Yr(Zge,o,l);if(!ks(Pn(c,f),0))return[];const y=F6(f);if(ks(y,0))return[];const _=Yr(Kge,c,l),x=Pn(_,f)/y,S=jo(Jge,i,o,x);if(t.type===Vs.RAY){const P=ic(xz,S,i);if(Pn(o,P)<-ho())return[]}if(e.type===Vs.RAY){const P=ic(xz,S,s);if(Pn(l,P)<-ho())return[]}return[cc(S)]}function qYe({start:t,end:e,type:i},n){const s=ic(u7,n,t),r=ic(h7,e,t),o=Yr(Nj,r,s),l=F6(o)/F6(r),c=ho();if(l<c)switch(i){case Vs.LINE:return[cc(n)];case Vs.RAY:return Pn(r,s)<-c?[]:[cc(n)]}return[]}function Dj(t,e,i,n){const[s,r]=t,[o,l]=i,c=o-s,f=l-r,y=c*c+f*f,_=Math.sqrt(y);if(_>e+n)return[];if(_<Math.abs(e-n))return[];if(ks(_,0)&&ks(e,n))return[];const x=(e*e-n*n+y)/(2*_),S=Math.sqrt(e*e-x*x),P=S*f/_,A=S*c/_,[D,N]=bj(S5,t,i,x/_);return ks(P,A)?[Xu(D,N)]:[Xu(D+P,N-A),Xu(D-P,N+A)]}function H6(t,e,{start:i,end:n,type:s}){return Gs(t.start,i[0],i[1],e),Gs(t.end,n[0],n[1],e),t.type=GYe[s],t}function Wge(t,e){return ks(t[2],e[2])}function ks(t,e){return l0(Math.abs(t-e),0,ho())}function VYe(t,e){return e.filter(i=>S0(t,i))}function S0(t,e){return Mge(t,e)}var Vc;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})(Vc||(Vc={}));const GYe={[Vc.PLANE]:Vs.LINE,[Vc.HALF_PLANE]:Vs.RAY},S5=_r(),c7=_r(),u7=$t(),h7=$t(),Nj=$t(),Zge=$t(),Kge=$t(),Jge=$t(),xz=$t(),jYe=sl(),Oj={start:$t(),end:$t(),type:Vs.LINE},BYe={start:$t(),end:$t(),type:Vs.LINE};let oh=class{intersect(e){return Pp(this,e)}closestPoints(e){return[this.closestTo(e)]}},Zv=class extends oh{constructor(e){super(),this.point=e}equals(e){return this===e||Tu(e)&&ds(this.point,e.point)}closestTo(){return K2(this.point)}},$j=class extends oh{constructor(e,i,n){super(),this.start=e,this.end=i,this.lineLike={start:e,end:i,type:n}}equals(e){return this===e||Qd(e)&&this.lineLike.type===e.lineLike.type&&ds(this.start,e.start)&&ds(this.end,e.end)}closestTo(e){const i=Io();return Uge(e,this.lineLike,i),i}},Rj=class extends $j{constructor(e,i){super(e,i,Vs.LINE)}},HYe=class extends $j{constructor(e,i){super(e,i,Vs.RAY)}},Qge=class extends oh{constructor(e){super(),this.constraints=e}equals(e){return this===e||wz(e)&&wf(this.constraints,e.constraints,(i,n)=>i.equals(n))}closestTo(e){let i,n=1/0;for(const s of this.constraints){const r=s.closestTo(e),o=Z2(e,r);o<n&&(n=o,i=r)}return K2(i??e)}closestPoints(e){return this.constraints.flatMap(i=>i===this?[]:i.closestPoints(e))}},Lj=class extends oh{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||tf(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=Io();return Hge(e,this.center,this.radius,i),i}},Fj=class extends oh{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||Ip(e)&&ds(this.center,e.center)&&this.radius===e.radius}closestTo(e){const i=Io();return Hge(e,this.center,this.radius,i),i[2]=this.center[2],i}asCircle(){return new zj(K2(this.center),this.radius,q0(0,0,1))}},zj=class extends oh{constructor(e,i,n,s=void 0){super(),this.center=e,this.radius=i,this.normal=n,this.slicePlane=s}equals(e){return this===e||zg(e)&&ds(this.center,e.center)&&ds(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:i,radius:n}=this;Mj(this.getPlane(UYe),e,DN);const s=ic(DN,DN,i),r=ZA(s);if(ks(r,0))return K2(e);const o=n/Math.sqrt(r),l=Io();jo(l,i,s,o);const{slicePlane:c}=this;if(c&&!S0(c,l)){const f=Gj(c,this);return(f==null?void 0:f.closestTo(e))??K2(e)}return l}getPlane(e=sl()){return Gx(this.center,this.normal,e)}};const DN=$t(),UYe=sl();let e0e=class extends oh{constructor(e){super(),this.z=e}equals(e){return this===e||Tp(e)&&this.z===e.z}closestTo(e){return q0(e[0],e[1],this.z)}getPlane(e=sl()){return Gs(Kee,0,0,this.z),Gx(Kee,Uhe,e)}};const Kee=$t();let qj=class extends oh{constructor(e,i,n){super(),this.start=e,this.end=i,this.planeLike={start:e,end:i,type:n}}equals(e){return this===e||ef(e)&&this.planeLike.type===e.planeLike.type&&ds(this.start,e.start)&&ds(this.end,e.end)}closestTo(e){const i=Io();return Bge(e,this.planeLike,i),i}closestEndTo(e){const{start:i,end:n}=this.planeLike;return Math.sign(t1(To(YYe,n,i),To(XYe,e,i)))>0?this.end:this.start}getPlane(e=sl()){const i=rc(Jee,this.end);return i[2]+=1,Tge(this.start,this.end,i,e)}getSlicePlane(e=sl()){const{start:i,end:n,type:s}=this.planeLike;if(s===Vc.PLANE)return;const r=Gs(Jee,i[0],i[1],0),o=Gs(Qee,n[0],n[1],0),l=zr(Qee,o,r);return Gx(r,l,e),e}};const YYe=_r(),XYe=_r(),Jee=$t(),Qee=$t();let WYe=class extends qj{constructor(e,i){super(e,i,Vc.HALF_PLANE)}},t0e=class extends qj{constructor(e,i){super(e,i,Vc.PLANE)}},ZYe=class extends oh{constructor(e,i){super(),this.sphere=Oge(e,i)}equals(e){return this===e||Mp(e)&&Dge(this.sphere,e.sphere)}closestTo(e){const i=Io();return l7(this.sphere,e,i),i}get center(){return this.sphere}get radius(){return this.sphere[3]}};class i0e extends oh{constructor(e,i,n){super(),this.start=e,this.end=i,this.getZ=n,this.planeLike={start:e,end:i,type:Vc.PLANE}}equals(e){return this===e||U6(e)&&ds(this.start,e.start)&&ds(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return eXe(this,e)}addIfOnTheGround(e,i){for(const n of i){const s=this.getZ(n[0],n[1])??0;ks(n[2],s)&&(n[2]=s,e.push(n))}}}let Vj=class extends oh{constructor(e,i,n){super(),this._x=e,this._y=i,this._z=n}equals(e){return this===e||gXe(e)&&this._x===e._x&&this._y===e._y&&this._z===e._z}closestTo([e,i,n]){return wge(this._x??e,this._y??i,this._z??n)}},n0e=class extends oh{constructor(e,i,n,s,r){super(),this._origin=e,this._spatialReference=i,this._distanceMeters=n,this._z=s,this._directionDegrees=r}equals(e){return this===e||mXe(e)&&hz(this._origin,e._origin)&&this._spatialReference===e._spatialReference&&this._distanceMeters===e._distanceMeters&&this._z===e._z&&this._directionDegrees===e._directionDegrees}closestTo([e,i,n]){return _j(f3,e,i),hz(f3,this._origin)||this._applyDirectionAndDistance(f3),wge(f3[0],f3[1],this._z??n)}_applyDirectionAndDistance(e){if(this._directionDegrees!=null&&this._distanceMeters!=null)w0(e,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)JYe(e,this._origin,this._directionDegrees,e,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:i}=_5(KYe,this._origin,e,this._spatialReference);w0(e,this._origin,i??0,this._distanceMeters,this._spatialReference)}}};const f3=[0,0],KYe=new v5;function JYe(t,e,i,n,s){let{azimuth:r,distance:o}=_5(QYe,e,n,s);r??(r=0);let l=o*Math.cos((r-i)*gl);l=Math.max(0,l),w0(t,e,i,l,s)}const QYe=new v5;function eXe(t,e){const i=Io();return Bge(e,t.planeLike,i),i[2]=t.getZ(i[0],i[1])??r0e,i}function Pp(t,e){if(wz(t)){const i=[];for(const n of t.constraints){const s=n.intersect(e);s&&i.push(s)}return E5(i)}if(wz(e))return Pp(e,t);if(U6(t))return ete(t,e);if(U6(e))return ete(e,t);if(Tu(t)){const{point:i}=t;if(Tu(e))return ds(i,e.point)?t:void 0;const n=e.closestTo(i);return UE(n,i)?t:void 0}if(Qd(t)){if(Tu(e))return Pp(e,t);if(Qd(e))return Qh(Xge(t.lineLike,e.lineLike));if(Tp(e))return tXe(t,e);if(ef(e))return Qh(Gge(e.planeLike,t.lineLike));if(tf(e))return Qh(Yge(t.lineLike,e.center,e.radius));if(zg(e))return Qh(zYe(t.lineLike,e));if(Ip(e))return iXe(t,e);if(Mp(e))return nXe(t,e)}else if(Tp(t)){if(Tu(e)||Qd(e))return Pp(e,t);if(Tp(e))return sXe(t,e);if(ef(e))return rXe(t,e);if(tf(e))return oXe(t,e);if(zg(e))return lXe(t,e);if(Ip(e))return aXe(t,e);if(Mp(e))return cXe(t,e)}else if(ef(t)){if(Tu(e)||Qd(e)||Tp(e))return Pp(e,t);if(ef(e))return NN(jge(t.planeLike,e.planeLike));if(tf(e))return NN(kj(t.planeLike,e.center,e.radius));if(zg(e))return hXe(t,e);if(Ip(e))return uXe(t,e);if(Mp(e))return dXe(t,e)}else if(tf(t)){if(Tu(e)||Qd(e)||Tp(e)||ef(e))return Pp(e,t);if(tf(e))return NN(Dj(t.center,t.radius,e.center,e.radius));if(zg(e))return void 0;if(Ip(e))return fXe(t,e);if(Mp(e))return void 0}else if(zg(t)){if(Tu(e)||Qd(e)||Tp(e)||ef(e)||tf(e))return Pp(e,t);if(zg(e))return void 0;if(Ip(e))return e.asCircle(),void 0;if(Mp(e))return void 0}else if(Ip(t)){if(Tu(e)||Qd(e)||Tp(e)||ef(e)||tf(e)||zg(e))return Pp(e,t);if(Ip(e))return pXe(e,t);if(Mp(e))return void 0}else if(Mp(t)){if(Tu(e)||Qd(e)||Tp(e)||ef(e)||tf(e)||Ip(e))return Pp(e,t);if(Mp(e))return void 0}}const tXe=(()=>{const t=sl();return(e,i)=>{const{start:n,end:s}=e;if(Wge(n,s)&&ks(n[2],i.z))return e;const r=Io();return Ij(i.getPlane(t),n,s,r)?new Zv(r):void 0}})();function iXe({lineLike:t},{center:e,radius:i}){const n=e[2];return Qh(Yge(t,e,i).filter(s=>ks(s[2],n)))}function nXe({lineLike:t},{sphere:e}){return Qh($ge(e,t.start,t.end))}const Gj=(()=>{const t=Em(),e=$t(),i=$t();return(n,s,r)=>{const{normal:o,center:l,radius:c}=s;Tj(o,e,i);const f=n,y=c*Pn(f,e),_=c*Pn(f,i);JG(t,l[0],l[1],l[2],1);const x=tj(n,t),S=Math.hypot(y,_),P=ks(S,0);if(ks(_z(n,l),0)){if(P)return s;if(ks(c,0))return!r||S0(r,l)?new Zv(K2(l)):void 0;Yr(e,f,o),Co(e,e);const W=new Array,J=cc(l);jo(J,J,e,c),r&&!S0(r,J)||W.push(J);const re=cc(l);return jo(re,re,e,-c),r&&!S0(r,re)||W.push(re),Qh(W)}if(P)return;const A=-x/S;if(Math.abs(A)>1||ks(A,1))return;const D=Math.atan(y/_),N=sG(A)-D,F=Math.PI-N,G=new Array,V=$t();jo(V,l,e,c*Math.cos(N)),jo(V,V,i,c*Math.sin(N)),G.push(V);const B=$t();return jo(B,l,e,c*Math.cos(F)),jo(B,B,i,c*Math.sin(F)),G.push(B),Qh(r?VYe(r,G):G)}})();function sXe(t,e){return ks(t.z,e.z)?t:void 0}function rXe({z:t},{planeLike:e}){const[i,n]=e.start,[s,r]=e.end,o=q0(i,n,t),l=q0(s,r,t);return e.type===Vc.PLANE?new Rj(o,l):new HYe(o,l)}function oXe(t,e){const[i,n]=e.center;return new Fj(q0(i,n,t.z),e.radius)}function aXe(t,e){return ks(e.center[2],t.z)?e:void 0}const lXe=(()=>{const t=sl();return(e,i)=>Gj(e.getPlane(t),i,i.slicePlane)})();function cXe(t,{center:e,radius:i}){const n=Math.abs(e[2]-t.z);if(n>i&&!ks(n,i))return;const s=q0(e[0],e[1],t.z),r=Math.sqrt(i**2-n**2);return ks(r,0)?void 0:new Fj(s,r)}const uXe=(()=>{const t=sl();return(e,{center:i,radius:n})=>{const s=kj(e.planeLike,i,n),r=i[2];e.getSlicePlane(t);const o=new Array;for(const[l,c]of s){const f=[l,c,r];S0(t,f)&&o.push(f)}return Qh(o)}})(),hXe=(()=>{const t=sl(),e=sl();return(i,n)=>Gj(i.getPlane(t),n,i.getSlicePlane(e))})(),dXe=(()=>{const t=sl();return(e,{center:i,radius:n})=>{const s=e.getPlane(t),r=hf(s,i),o=Math.abs(r);if(o>n&&!ks(o,n))return;const l=Math.sqrt(n**2-r**2);if(ks(l,0)){const y=Io();return Mj(s,i,y),new Zv(y)}const c=Io(),f=cc(s);return jo(c,i,f,r),new zj(c,l,f,e.getSlicePlane())}})();function fXe(t,e){const i=XA(t.center,e.center);return ks(i,0)&&ks(t.radius,e.radius)?e:s0e(Dj(t.center,t.radius,e.center,e.radius),e.center[2])}function pXe(t,e){if(!Wge(t.center,e.center))return;const i=XA(t.center,e.center);return ks(i,0)&&ks(t.radius,e.radius)?t:s0e(Dj(t.center,t.radius,e.center,e.radius),t.center[2])}function ete(t,e){const{planeLike:i,getZ:n}=t,s=new Array;if(Tu(e))t.addIfOnTheGround(s,FYe(i,e.point));else if(Qd(e))t.addIfOnTheGround(s,Gge(i,e.lineLike));else if(tf(e))for(const[r,o]of kj(i,e.center,e.radius)){const l=n(r,o);l!=null&&s.push(Sl(r,o,l))}else if(ef(e)||U6(e))for(const[r,o]of jge(i,e.planeLike)){const l=n(r,o)??r0e;s.push(Sl(r,o,l))}return Qh(s)}function NN(t){return E5(t.map(([e,i])=>{const n=q0(e,i,0),s=q0(e,i,1);return new Rj(n,s)}))}function Qh(t){return E5(t.map(e=>e?new Zv(e):void 0))}function s0e(t,e){return Qh(t.map(([i,n])=>[i,n,e]))}function E5(t){if(t.length!==0)return t.length===1?t[0]??void 0:new Qge(t.filter(xl))}function wz(t){return t instanceof Qge}function Tu(t){return t instanceof Zv}function Qd(t){return t instanceof $j}function Tp(t){return t instanceof e0e}function ef(t){return t instanceof qj}function tf(t){return t instanceof Lj}function Ip(t){return t instanceof Fj}function zg(t){return t instanceof zj}function Mp(t){return t instanceof ZYe}function U6(t){return t instanceof i0e}function mXe(t){return t instanceof n0e}function gXe(t){return t instanceof Vj}const r0e=0;let jx=class{constructor(e,i,n,s){this.targetPoint=e,this.constraint=i,this.isDraped=n,this.domain=s}},o0e=class extends jx{constructor({targetPoint:e,objectId:i,constraint:n,isDraped:s}){super(e,n,s,Qa.FEATURE),this.objectId=i}},d7=class{constructor(e,i){this.isDraped=e,this.domain=i}},If=class a0e extends d7{constructor(e,i,n,s,r=Qa.ALL,o=!0,l=!0){super(s,r),this.type=e,this.lineStart=i,this.lineEnd=n,this.fadeLeft=o,this.fadeRight=l}equals(e){return e instanceof a0e&&this.type===e.type&&ds(this.lineStart,e.lineStart)&&ds(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return i1(this.lineStart,this.lineEnd)}},yXe=class extends o0e{constructor(e){super({...e,isDraped:!0,constraint:new i0e(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new If(ih.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},vXe=class extends o0e{constructor(e){super({...e,constraint:new Rj(e.edgeStart,e.edgeEnd)})}get hints(){return[new If(ih.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},_Xe=class l0e extends d7{constructor(e,i,n=Qa.ALL){super(i,n),this.intersectionPoint=e}equals(e){return e instanceof l0e&&ds(this.intersectionPoint,e.intersectionPoint)}},t9=class extends jx{constructor(e,i,n,s){super(e,new Zv(e),s,Qa.ALL),this.first=i,this.second=n}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new _Xe(this.targetPoint,this.isDraped,this.domain)]}},bXe=class extends jx{constructor({lineStart:e,lineEnd:i,targetPoint:n,isDraped:s}){super(n,new t0e(e,i),s,Qa.SELF),this._referenceLineHint=new If(ih.REFERENCE_EXTENSION,e,i,s,this.domain)}get hints(){return[this._referenceLineHint,new If(ih.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},xXe=class c0e extends d7{constructor(e,i,n,s=Qa.ALL){super(n,s),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof c0e&&ds(this.lineStart,e.lineStart)&&ds(this.lineEnd,e.lineEnd)}},wXe=class extends jx{constructor({referenceLine:e,lineStart:i,targetPoint:n,isDraped:s}){const r=cc(i),{left:o,right:l}=e;zr(r,tc(r,r,l),o),super(n,new t0e(i,r),s,Qa.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new If(ih.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new xXe(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new If(ih.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(n=>{ds(e.right,n.edge.left)&&(n.fadeLeft=!1,i.fadeRight=!1),ds(e.right,n.edge.right)&&(n.fadeRight=!1,i.fadeRight=!1),ds(e.left,n.edge.right)&&(n.fadeRight=!1,i.fadeLeft=!1),ds(e.left,n.edge.left)&&(n.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}},u0e=class h0e extends d7{constructor(e,i,n,s,r=Qa.ALL){super(s,r),this.previousVertex=e,this.centerVertex=i,this.nextVertex=n}equals(e){return e instanceof h0e&&ds(this.previousVertex,e.previousVertex)&&ds(this.centerVertex,e.centerVertex)&&ds(this.nextVertex,e.nextVertex)}},SXe=class extends jx{constructor({targetPoint:e,constraint:i,previousVertex:n,otherVertex:s,otherVertexType:r,isDraped:o,selfSnappingType:l,objectId:c,domain:f}){super(e,i,o,f??Qa.SELF),this.previousVertex=n,this.otherVertex=s,this.otherVertexType=r,this.selfSnappingType=l??X6.None,this.objectId=c??null}get hints(){const e=this.previousVertex,i=this.otherVertexType===Y6.CENTER?this.otherVertex:this.targetPoint,n=this.otherVertexType===Y6.CENTER?this.targetPoint:this.otherVertex;return[new If(ih.TARGET,i,n,this.isDraped,this.domain),new If(ih.REFERENCE,e,i,this.isDraped,this.domain),new u0e(this.previousVertex,i,n,this.isDraped,this.domain)]}};var Y6,X6;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})(Y6||(Y6={})),function(t){t[t.None=0]="None",t[t.LastVertex=1]="LastVertex",t[t.FirstVertex=2]="FirstVertex",t[t.ExistingEdge=3]="ExistingEdge"}(X6||(X6={}));let EXe=class extends jx{constructor({targetPoint:e,point1:i,point2:n,isDraped:s}){super(e,new Lj(qx($t(),i,n,.5),.5*y5(i,n)),s,Qa.SELF),this._p1=i,this._p2=n}get hints(){return[new If(ih.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new If(ih.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new u0e(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}};function CXe(t,e,i,n,s=$t()){const r=rc(PXe,t);return r[2]=vge(n,r,e,i)||0,n.renderCoordsHelper.toRenderCoords(r,e,s),s}const PXe=$t();function TXe(t,e,i,n){return n.type==="2d"?(nT.x=t[0],nT.y=t[1],nT.spatialReference=e,n.toScreen(nT)):(CXe(t,e,i,n,tte),n.state.camera.projectToScreen(tte,ON),am(ON[0],ON[1]))}const nT=Ff(0,0,0,null),tte=$t(),ON=zhe();let Lh=class extends Ia.EventedMixin(Ei){constructor(e){super(e),this.options=new x5,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Lp.MAIN}initialize(){this.addHandles([xi(()=>{const{distance:e,touchSensitivityMultiplier:i,effectiveSelfEnabled:n,effectiveFeatureEnabled:s,effectiveGridEnabled:r}=this.options;return{selfEnabled:n,featureEnabled:s,gridEnabled:this.view.type==="2d"&&r,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:e,touchSensitivityMultiplier:i}},(e,i)=>{var n;i&&(this.doneSnapping(),this.emit("changed")),(n=this._loadTask)==null||n.abort(),this._loadTask=oA(s=>this._updateEngines(e,i,s))},ac),xi(()=>this.options,e=>{for(const i of this._engines)i.options=e},om)])}destroy(){this._destroyEngines()}get updating(){var e;return this._engines.some(i=>i.updating)||!((e=this._loadTask)!=null&&e.finished)}_destroyEngines(){this._engineCache.forEach(e=>e.destroy()),this._engineCache.clear(),this._engines=[]}async _updateEngines(e,i,n){if(!e.viewReady)return void this._destroyEngines();(i==null?void 0:i.viewSpatialReference)!==e.viewSpatialReference&&this._destroyEngines();const{_engineCache:s}=this,r=[];e.featureEnabled&&!s.has("feature")&&r.push(this._setupFeatureSnappingEngine(n)),e.selfEnabled&&!s.has("self")&&r.push(this._setupSelfSnappingEngine(n)),e.gridEnabled&&!s.has("grid")&&this.view.type==="2d"&&r.push(this._setupGridSnappingEngine(n)),await Promise.allSettled(r),n.aborted||(this._engines=Array.from(s.values()))}async _setupSelfSnappingEngine(e){const{SelfSnappingEngine:i}=await st(()=>import("./SelfSnappingEngine-EN4Ii3gN.js"),__vite__mapDeps([303,304]),import.meta.url);oc(e);const n=new i({view:this.view,options:this.options});this._engineCache.set("self",n)}async _setupGridSnappingEngine(e){const{view:i}=this,{GridSnappingEngine:n}=await st(async()=>{const{GridSnappingEngine:s}=await import("./GridSnappingEngine-CHYARLj4.js");return{GridSnappingEngine:s}},__vite__mapDeps([305,12,13,14,15,73,306]),import.meta.url);if(oc(e),i.type==="2d"){const s=new n({view:i,options:this.options});this._engineCache.set("grid",s)}}async _setupFeatureSnappingEngine(e){const{FeatureSnappingEngine:i}=await st(()=>import("./FeatureSnappingEngine-CFCkyNQN.js"),__vite__mapDeps([307,74]),import.meta.url);oc(e);const{view:n,options:s,_engineCache:r}=this,o=new i({view:n,options:s,spatialReference:n.spatialReference});r.set("feature",o)}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,n=e*i;return n*n}snap(e){return AXe(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:i,context:n}=e;this._removeVisualization();const s=this._currentMainCandidate;if(s==null)return i;const r=this._selectUpdateInput(e);if(r==null)return i;const{spatialReference:o}=n,l=Ef(r,o);if(l==null)return i;const{view:c}=this,{elevationInfo:f,visualizer:y}=n,_=[],x=f0(l,c,f),S=s.constraint.closestTo(x);if(!this._arePointsWithinScreenThreshold(x,S,n)||!RN(s,n.drawConstraints))return this._resetSnappingState(),i;s.targetPoint=IN(S),_.push(...s.hints);for(const P of this._currentOtherActiveCandidates)RN(P,n.drawConstraints)&&(P.targetPoint=IN(S),_.push(...P.hints));return y!=null&&this.addHandles(y.draw(_,{spatialReference:o,elevationInfo:kXe(n),view:c,selfSnappingZ:n.selfSnappingZ}),$N),vz(S,c,i,n)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:i}){switch(this._currentSnappedType){case Lp.MAIN:return e;case Lp.SCENE:return i}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Lp.MAIN}_removeVisualization(){this.removeHandles($N)}async _snapSinglePoint({point:e,context:i,signal:n}){const{view:s}=this,{elevationInfo:r}=i,o=f0(e,s,r),l=await this._fetchCandidates(o,Qa.ALL,i,n);return this._createSnapResult(o,Lp.MAIN,l,s,e,i,n)}async _snapMultiPoint({point:e,scenePoint:i,context:n,signal:s}){const{view:r}=this,{coordinateHelper:o,elevationInfo:l,spatialReference:c}=n;await t5(i.spatialReference,c);const f=Ef(i,c),y=f0(f,r,l),_=await this._fetchCandidates(y,Qa.FEATURE,n,s);if(_.length>0){const P=await this._fetchCandidates(y,Qa.SELF,n,s);return this._createSnapResult(y,Lp.SCENE,[..._,...P],r,f,n,s)}const x=f0(e,r,l),S=await this._fetchCandidates(x,Qa.SELF,n,s);return this._createSnapResult(x,Lp.MAIN,S,r,{z:o.hasZ()&&e.hasZ?e.z??0:void 0,m:o.hasM()&&e.hasM?e.m??0:void 0},n,s)}async _fetchCandidates(e,i,n,s){return(await Promise.all(this._engines.map(r=>r.fetchCandidates(e,i,n,s)))).flat()}_createSnapResult(e,i,n,s,r,o,l){return{get valid(){return!jc(l)},apply:()=>{const{spatialReference:c}=o,{snappedPoint:f,hints:y}=this._processCandidates(e,i,n,o);return this._removeVisualization(),o.visualizer!=null&&this.addHandles(o.visualizer.draw(y,{spatialReference:c,elevationInfo:z0,view:s,selfSnappingZ:o.selfSnappingZ}),$N),vz(f,s,r,o)}}}_processCandidates(e,i,n,s){if(n.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==i&&this._resetSnappingState(),pUe(e,n);const r=this._currentMainCandidate;if(r!=null){const o=MXe(r,n);if(o>=0){if(!(n[o]instanceof t9))return this._intersectWithOtherCandidates(o,n,e,i,s);if(this._arePointsWithinScreenThreshold(e,r.targetPoint,s))return this._updateSnappingCandidate(r,i,n,s)}}return this._intersectWithOtherCandidates(0,n,e,i,s)}_intersectWithOtherCandidates(e,i,n,s,r){const{coordinateHelper:o}=r,l=i[e],c=[];for(let f=0;f<i.length;++f){if(f===e)continue;const y=i[f],_=l.constraint.intersect(y.constraint);if(_)for(const x of _.closestPoints(l.targetPoint))c.push([new t9(IN(x),l,y,y.isDraped),this._squaredScreenDistance(n,x,o)])}return c.length>0&&(c.sort((f,y)=>f[1]-y[1]),c[0][1]<this._squaredPointProximityThreshold(r.pointer))?this._updateSnappingCandidate(c[0][0],s,i,r):RN(l,r.drawConstraints)?this._updateSnappingCandidate(l,s,i,r):{snappedPoint:n,hints:[]}}_updateSnappingCandidate(e,i,n,s){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=i;const r=this._currentMainCandidate.targetPoint,o=[];o.push(...e.hints);for(const l of n){if(e instanceof t9){if(l.constraint.equals(e.first.constraint)||l.constraint.equals(e.second.constraint))continue}else if(l.constraint.equals(e.constraint))continue;const c=l.constraint.closestTo(r);this._squaredScreenDistance(c,r,s.coordinateHelper)<IXe()&&(l.targetPoint=r,this._currentOtherActiveCandidates.push(l),o.push(...l.hints))}return{snappedPoint:r,hints:o}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,i,n){return this._squaredScreenDistance(e,i,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(e,i,n){return Sge(this._toScreen(e,n),this._toScreen(i,n))}_toScreen(e,i){return TXe(e,i.spatialReference,z0,this.view)}get test(){}};var Lp;I([O({constructOnly:!0})],Lh.prototype,"view",void 0),I([O()],Lh.prototype,"options",void 0),I([O({readOnly:!0})],Lh.prototype,"updating",null),I([O()],Lh.prototype,"_loadTask",void 0),I([O()],Lh.prototype,"_engines",void 0),I([O()],Lh.prototype,"_squaredMouseProximityThreshold",null),I([O()],Lh.prototype,"_squaredTouchProximityThreshold",null),Lh=I([De("esri.views.interactive.snapping.SnappingManager")],Lh),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(Lp||(Lp={}));const $N="visualization-handle";function IXe(){return G6.satisfiesConstraintScreenThreshold*G6.satisfiesConstraintScreenThreshold}function RN(t,e){return!e||e.direction==null&&e.distance==null||!(t instanceof yXe||t instanceof vXe||t instanceof bXe||t instanceof wXe||t instanceof EXe)&&(!(t instanceof SXe)||e.direction==null&&t.selfSnappingType===X6.LastVertex)}function MXe(t,e){return t instanceof t9?LN(e,t.first)>=0&&LN(e,t.second)>=0?0:-1:LN(e,t)}function LN(t,e){let i=-1;for(let n=0;n<t.length;++n)if(e.constraint.equals(t[n].constraint)){i=n;break}return i}function AXe(t){return t.scenePoint!=null}function kXe({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?z0:e}async function Bvt(t,e){if(t.type==="2d")return t.hitTest(e);const i=await t.hitTest(e);if(i.results.length===0)return i;const n=i.results[0],s=(n.distance??0)*(1+DXe),r=i.results.findIndex(o=>(o.distance??0)>s);return r!==-1&&(i.results=i.results.slice(0,r)),n&&i.ground.distance>s&&(i.ground.mapPoint=null),i}const DXe=.05;function d0e(t){return(t==null?void 0:t.type)==="graphic"}function NXe(t){return t.find(d0e)??null}function Hvt(t){return t.filter(d0e)}function Sz(t){return am(t.x,t.y)}function OXe(t,e){var n;const i=(n=t instanceof HTMLElement?t:t.surface)==null?void 0:n.getBoundingClientRect();return i?am(e.clientX-i.left,e.clientY-i.top):am(0,0)}function Uvt(t,e){return e instanceof Event?OXe(t,e):Sz(e)}function Yvt(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let pa=class extends Ia.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;(e=this.activeComponent)==null||e.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};I([O()],pa.prototype,"activeComponent",void 0),I([O()],pa.prototype,"cancelled",void 0),I([O()],pa.prototype,"history",void 0),I([O()],pa.prototype,"tool",null),I([O()],pa.prototype,"type",void 0),I([O()],pa.prototype,"canUndo",null),I([O()],pa.prototype,"canRedo",null),I([O()],pa.prototype,"onEnd",void 0),I([O()],pa.prototype,"undo",null),I([O()],pa.prototype,"redo",null),I([O()],pa.prototype,"toggleTool",void 0),I([O()],pa.prototype,"addToSelection",void 0),I([O()],pa.prototype,"removeFromSelection",void 0),pa=I([De("esri.widgets.Sketch.support.OperationHandle")],pa);let i9=class extends pa{};I([O()],i9.prototype,"activeComponent",void 0),i9=I([De("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],i9);let Gp=class extends pa{};I([O()],Gp.prototype,"activeComponent",void 0),Gp=I([De("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],Gp);const ite={defaultZ:0},p3={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let Kn=class extends Ia.EventedAccessor{constructor(e){var i;super(e),this._numUpdating=0,this._defaultSnappingManager=null,this._internalGraphicsLayer=new Pm({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new Uc({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new xm({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Rl({color:[130,130,130,1],width:2}),this.meshSymbol=new $x({symbolLayers:new ci([new K0])}),this.updateGraphics=new ci,this.updateOnGraphicClick=!0,this.vertexSymbol=new Uc({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new i7,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=ite,this.defaultUpdateOptions=p3,this.snappingOptions=((i=e==null?void 0:e.snappingManager)==null?void 0:i.options)??(e==null?void 0:e.snappingOptions)??new x5}initialize(){this.addHandles([Ju(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),Ju(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(this._operationHandle!=null)for(const i of e.removed)this.updateGraphics.includes(i)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(i):this._operationHandle.cancel())}),xi(()=>{var e;return((e=this.layer)==null?void 0:e.elevationInfo)??null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},ac),xi(()=>this.view,e=>{this._defaultSnappingManager=co(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new Lh({view:e,options:this.snappingOptions})),e.type==="2d"?st(()=>import("./editingTools-LXYCq8p3.js"),__vite__mapDeps([308,40,41,42,309,310,139,140,10,38,39,37,128,304,62,311,312,210,291,184,183,59,44,313]),import.meta.url):e.type==="3d"&&(st(()=>import("./ImageMaterial.glsl-CANCGWka.js").then(i=>i.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url),st(()=>import("./LineCallout.glsl-PNxSH6Zr.js").then(i=>i.G),__vite__mapDeps([321,11,316,129,295,182,183,184,288,127,128,124,120,126,247,26,25,289,290,125,211,291,215,292,277,296,280,245,246,122,257,77,5,2,299,298,123,121,103,104,175,176,17,102,105,171,22,130,322,99,55,56,100,101,323,33,14,15,324,24]),import.meta.url)))},ac),xi(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,i)=>{e&&i&&!e.equals(i)&&this.cancel()})]),Ege(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=co(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}get updating(){return this._numUpdating>0||this.snappingManager!=null&&this.snappingManager.updating}get activeTool(){var e;return((e=this._operationHandle)==null?void 0:e.tool)??null}get activeTooltip(){const{activeComponent:e,destroyed:i}=this,n=!i&&e&&"tooltip"in e?e.tooltip:null;return n!=null&&n.visible?n:null}get activeComponent(){var e;return((e=this._operationHandle)==null?void 0:e.activeComponent)??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...ite,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...p3,...e,reshapeOptions:{...p3.reshapeOptions,...e==null?void 0:e.reshapeOptions},highlightOptions:{...p3.highlightOptions,...e==null?void 0:e.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){var e;return((e=this.snappingManager)==null?void 0:e.options)??this._get("snappingOptions")}set snappingOptions(e){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=co(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:i}=this;!this._defaultSnappingManager&&i&&(this._defaultSnappingManager=new Lh({options:this.snappingOptions,view:i})),this._clearOverride("snappingManager")}}get state(){var n;const e=!(!((n=this.view)!=null&&n.ready)||!this.layer),i=this._operationHandle;return e&&i?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const i=this._get("view");if(i){const{container:s,map:r}=i;s&&(i.cursor=null),r==null||r.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const n="view-ready";this.removeHandles(n),e&&this.addHandles(D0(()=>e.ready,s=>{this.removeHandles(this._viewHandlesKey),s&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)},ac),n),this._set("view",e)}cancel(){this._moduleLoaderAbortController=_0(this._moduleLoaderAbortController),this._viewReadyAbortController=_0(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:i}=this;if(e==="active"&&i.length){const{activeTool:n,layer:s}=this,r=i.toArray();s.removeMany(r),this.cancel(),this._emitDeleteEvent({graphics:r,tool:n})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const e=this.updateGraphics.map(i=>i.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,i){this.cancel(),await this._waitViewReady();const{view:n,layer:s}=this;if(!n||this.state==="disabled")throw s||this._logMissingLayer(),lr();if(n.activeTool!=null&&(n.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");Gee(n,this._internalGraphicsLayer);const r=await this._setupCreateOperation(e,i);if(r==null||this.destroyed)return void n.map.remove(this._internalGraphicsLayer);const o=()=>{var l;if(r===this._operationHandle){const c=this.createGraphic,f=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),(l=this.view)!=null&&l.map&&this.view.map.remove(this._internalGraphicsLayer),r.cancelled||c==null||s.add(c),this.emit("create",{graphic:c,state:f?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};r.on("complete",o),this._operationHandle=r,n.ready&&n.focus()}async place(e,i){return this.create("mesh",{mode:"click",hasZ:e.hasZ,geometryToPlace:e,...i})}async update(e,i){this.cancel(),await this._waitViewReady();const{layer:n,view:s,state:r}=this;if(!s||r==="disabled")throw n||this._logMissingLayer(),lr();s.activeTool!=null&&(s.activeTool=null);const o=Array.isArray(e)?e:[e];if(e==null||!(o!=null&&o.length))return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(o.some(c=>c.layer!==n?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):c.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const l=await this._setupUpdateOperation(o,i);this.destroyed||l==null||eo(l)||(Gee(s,this._internalGraphicsLayer),this._setUpdateOperationHandle(l,i),this.emit("update",{graphics:o,state:"start",aborted:!1,tool:l.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const i=this.view;if(i){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const n of e)n.geometry==null||n.geometry.type==="mesh"||ea(n.geometry.spatialReference,i.spatialReference)||(lm(n.geometry.spatialReference,i.spatialReference)||kx()||await B2(),n.geometry=Ef(n.geometry,i.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var e;this.canUndo()&&((e=this._operationHandle)==null||e.undo())}redo(){var e;this.canRedo()&&((e=this._operationHandle)==null||e.redo())}canUndo(){var e;return!!((e=this._operationHandle)!=null&&e.canUndo())}canRedo(){var e;return!!((e=this._operationHandle)!=null&&e.canRedo())}toggleUpdateTool(){var e;(e=this._operationHandle)==null||e.toggleTool()}async _getFirstHit(e){const i=this.view;if(!i)return this._logMissingView(),null;if(i.type==="2d"){const r=[];i.map.allLayers.forEach(l=>{l.type!=="vector-tile"&&l.type!=="imagery"||r.push(l)});const o=await i.hitTest(e,{exclude:r});return NXe(o.results)}const n=[i.map.ground];i.map.allLayers.forEach(r=>{x$e(r.type)&&n.push(r)});const s=await i.hitTest(e,{exclude:n});if(s.results.length>0){const r=s.results[0];if(r!=null&&r.type==="graphic"&&r.graphic&&(!s.ground.mapPoint||i.map.ground.opacity<1||s.ground.distance-(r.distance??0)>-Math.min(3*s.ground.distance,i.viewingMode==="global"?kV(i.renderCoordsHelper.spatialReference).radius/i.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return r}return null}_generateViewHandles(e){return[e.on("immediate-click",async i=>{var o;const n=this.state==="active"&&((o=this._operationHandle)==null?void 0:o.type)==="create";if(this.state==="disabled"||n||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const s=await i.async(()=>this._getFirstHit(Sz(i)));let r=null;if(s!=null){const l=s.graphic;this.updateGraphics.includes(l)||l.layer===this.layer?(i.stopPropagation(),r=l):e.type!=="2d"||this._isComponentGraphic(l)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();r==null||this.updateGraphics.includes(r)||await this.update([r],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},rr.WIDGET)]}async _setupCreateOperation(e,i){const n=this.view;if(!n)return this._logMissingView(),null;const s={hasZ:n.type==="3d",...this.defaultCreateOptions,...i},r=await this._setupDrawGraphicTool(e,n,s);return r==null?null:(n.tools.add(r),n.activeTool=r,this._setupCreateOperationHandle(r))}async _setupDrawGraphicTool(e,i,n){if(e==="multipoint"&&i.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!i)return this._logMissingView(),null;const{cursor:s,defaultZ:r,hasZ:o,geometryToPlace:l,graphicProperties:c,mode:f,preserveAspectRatio:y}=n,_=e==="rectangle"||e==="circle"?"hybrid":"click",x=y??e!=="rectangle",S={centered:e!=="rectangle"&&!(e==="circle"&&!x),cursor:s,defaultZ:r,forceUniformSize:x,graphicProperties:c,geometryToPlace:l,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:o,mode:f??_,snappingManager:this.snappingManager,snapToScene:!1,view:i};return i.type==="2d"?this._makeDrawGraphicTool2D(S):this._makeDrawGraphicTool3D(S)}async _makeDrawGraphicTool2D(e){const i=await this._requireModule(st(()=>import("./editingTools-LXYCq8p3.js"),__vite__mapDeps([308,40,41,42,309,310,139,140,10,38,39,37,128,304,62,311,312,210,291,184,183,59,44,313]),import.meta.url));return eo(i)||this.destroyed?null:new i.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:RXe(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})}async _makeDrawGraphicTool3D(e){const i=await this._requireModule(st(()=>import("./ImageMaterial.glsl-CANCGWka.js").then(s=>s.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(eo(i)||this.destroyed)return null;const{elevationInfo:n}=this.layer;return new i.module.DrawGraphicTool3D({...e,elevationInfo:n,snapToScene:!0,sketchOptions:this.sketchOptions})}_setupCreateOperationHandle(e){const i=this.view;if(!i)return this._logMissingView(),null;let n=null;const s=e.forceUniformSize,r=e.centered,o=[i.on("key-down",c=>{if(c.key===zs.pan)c.stopPropagation(),c.repeat||(e.enabled=!1);else if(c.key===zs.complete)c.stopPropagation(),e.completeCreateOperation();else if(c.key!==zs.vertexAdd||c.repeat)c.key===zs.undo?(c.stopPropagation(),l.undo()):c.key===zs.redo?(c.stopPropagation(),l.redo()):c.key!==zs.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||c.repeat?c.key===zs.center&&(c.repeat||(e.centered=!r,c.stopPropagation())):(e.forceUniformSize=!s,c.stopPropagation());else{const f=e.drawOperation.geometryType;f!=="polyline"&&f!=="polygon"&&f!=="multipoint"||(c.stopPropagation(),e.drawOperation.commitStagedVertex())}},rr.WIDGET),i.on("key-up",c=>{c.key===zs.pan?e.enabled=!0:c.key!==zs.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?c.key===zs.center&&(e.centered=r,c.stopPropagation()):(e.forceUniformSize=s,c.stopPropagation())},rr.WIDGET),e.on("vertex-add",c=>{switch(n=n==null?"start":"active",c.operation){case"apply":this.emit("create",{graphic:e.graphic,state:n,tool:this.activeTool,toolEventInfo:c,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",c=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:c.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",c=>{switch(c.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:c,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",c=>{this._set("createGraphic",c.graphic),n="complete",c.aborted?l&&l.cancel():l&&l.complete()}),xi(()=>this._getGraphicSymbolFromTool(e.geometryType),c=>{e.graphicSymbol=c})],l=new i9({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var c;Ad(o),(c=i.tools)==null||c.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return l}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,i){var l;const{layer:n,view:s}=this;if(!s)return this._logMissingView(),null;const r={...this.defaultUpdateOptions,...i,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...i==null?void 0:i.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...i==null?void 0:i.highlightOptions}};let o=r.tool??p3.tool;for(const c of e)n.remove(c),n.add(c);if(s.type==="3d"){if(e.length===0)return null;switch(o){case"move":return this._setupMove3DOperation(e,r,s,o);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],r,s);case"transform":return this._setupGraphicTransform3DOperation(e,r,s)}}switch(o){case"move":return this._setupMove2DOperation(e,r,s);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,o,r,s);case"transform":if(e.length===1){const c=(l=e[0].geometry)==null?void 0:l.type;c!=="point"&&c!=="multipoint"||(o="reshape")}return this._setupTransformOrReshape2DOperation(e,o,r,s)}}async _setupMove3DOperation(e,i,n,s,r=!1){const o=await this._requireModule(st(()=>import("./ImageMaterial.glsl-CANCGWka.js").then(P=>P.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(eo(o))return o;const{ManipulatedObject3DGraphic:l,MoveTool3D:c}=o.module,f=new Map,y=()=>{f.forEach(P=>P.destroy()),f.clear()};for(const P of e){const A=new l({view:n,graphic:P}),D=BHe(A);if(D!==bs.SUPPORTED)return y(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${Vee(D)}).`),null;f.set(P,A)}const _=new c({view:n,enableZ:i.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(_),_.objects.addMany(Array.from(f.values())),r||this.updateGraphics.addMany(e);const x=[],S=new Gp({activeComponent:_,tool:s,type:"update",onEnd:()=>{Ad(x),oT(n,_),y()},undo:()=>{ste(this.view,_),sT(S,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{rT(S,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:P=>{this.updateGraphics.push(P);const A=new l({view:n,graphic:P});f.set(P,A),_.objects.push(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[P],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:P=>{const A=this.updateGraphics.indexOf(P);if(S.history.undo.forEach(N=>N.updates.splice(A,1)),S.history.redo.forEach(N=>N.updates.splice(A,1)),this.updateGraphics.remove(P),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[P],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void S.complete();const D=f.get(P);D&&(_.objects.remove(D),D.destroy(),f.delete(P))},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1||s!=="transform")return;const P=this.updateGraphics.at(0),A=await this._setupReshape3DOperation(P,i,n,!0);A&&!eo(A)&&(S.onEnd(),S.destroy(),this._setUpdateOperationHandle(A,i))}});return x.push(...this._getHandlesForComponent(S,i),n.on("immediate-click",P=>this._getCommonUpdateOperationClickHandlers(S,P,i),rr.WIDGET),n.on("key-down",P=>{this._getCommonUpdateOperationKeyDownHandlers(S,P)},rr.WIDGET)),S}_setupGraphicTransform3DOperation(e,i,n,s=!1){if(e.length===1&&YHe(e[0])===bs.SUPPORTED){const r=e[0],o=r.geometry;if(o!=null&&(o.type==="point"||o.type==="mesh"))return this._setupPointTransform3DOperation(r,i,n);if(o!=null&&(o.type==="polygon"||o.type==="polyline"))return this._setupPolyTransform3DOperation(r,i,n,s)}return this._setupMove3DOperation(e,i,n,"transform",s)}async _setupPointTransform3DOperation(e,i,n){const s="transform",{enableRotation:r,enableScaling:o,enableZ:l}=i,c=await this._requireModule(st(()=>import("./ImageMaterial.glsl-CANCGWka.js").then(A=>A.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(eo(c))return c;const{TransformTool3D:f,ManipulatedObject3DGraphic:y}=c.module,_=new y({graphic:e,view:n}),x=new f({object:_,view:n,enableRotation:r,enableScaling:o,enableZ:l,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(x),this.updateGraphics.add(e);const S=[],P=new Gp({activeComponent:x,tool:s,type:"update",onEnd:()=>{Ad(S),oT(n,x),_.destroy()},undo:()=>{ste(this.view,x),sT(P,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},redo:()=>{rT(P,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async A=>{this.updateGraphics.add(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[A],removed:[],type:"selection-change"},type:"update"}),P.onEnd(),P.destroy();const D=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,n,"transform",!0);eo(D)||this._setUpdateOperationHandle(D,i)},removeFromSelection:A=>{this.updateGraphics.remove(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[A],type:"selection-change"},type:"update"}),P.complete()},toggleTool:()=>{}});return S.push(...this._getHandlesForComponent(P,i),n.on("immediate-click",A=>this._getCommonUpdateOperationClickHandlers(P,A,i),rr.WIDGET),n.on("key-down",A=>{this._getCommonUpdateOperationKeyDownHandlers(P,A)},rr.WIDGET)),P}async _setupPolyTransform3DOperation(e,i,n,s=!1){var F,G;const r="transform",{enableRotation:o,enableScaling:l,enableZ:c,preserveAspectRatio:f}=i,y=await this._requireModule(st(()=>import("./ImageMaterial.glsl-CANCGWka.js").then(V=>V.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(eo(y))return y;const{ManipulatedObject3DGraphic:_,ExtentTransformTool:x}=y.module,S=(G=(F=this.view)==null?void 0:F.inputManager)==null?void 0:G.isModifierKeyDown(zs.constraint),P=new _({view:n,graphic:e}),A=new x({object:P,view:n,enableRotation:o,enableScaling:l,enableZ:c,preserveAspectRatio:!!f!=!!S,sketchOptions:this.sketchOptions});n.tools.add(A),s||this.updateGraphics.add(e);const D=[],N=new Gp({activeComponent:A,tool:r,type:"update",onEnd:()=>{Ad(D),oT(n,A),P.destroy()},canUndo:()=>!A.destroyed&&A.canUndo,undo:()=>{A.destroyed||(A.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!A.destroyed&&A.canRedo,redo:()=>{A.destroyed||(A.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async V=>{this.updateGraphics.add(V),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[V],removed:[],type:"selection-change"},type:"update"}),N.onEnd(),N.destroy();const B=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,n,"transform",!0);eo(B)||this._setUpdateOperationHandle(B,i)},removeFromSelection:V=>{this.updateGraphics.remove(V),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[V],type:"selection-change"},type:"update"}),N.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1)return;const V=await this._setupReshape3DOperation(e,i,n,!0);V&&!eo(V)&&(N.onEnd(),N.destroy(),this._setUpdateOperationHandle(V,i))}});return D.push(...this._getHandlesForComponent(N,i),n.on("immediate-click",V=>this._getCommonUpdateOperationClickHandlers(N,V,i),rr.WIDGET),n.on("key-down",V=>this._getCommonUpdateOperationKeyDownHandlers(N,V),rr.WIDGET),n.on("key-down",V=>{V.key!==zs.constraint||V.repeat||(A.preserveAspectRatio=!A.preserveAspectRatio,V.stopPropagation())},rr.WIDGET),n.on("key-up",V=>{V.key===zs.constraint&&(A.preserveAspectRatio=!A.preserveAspectRatio,V.stopPropagation())},rr.WIDGET)),N}async _setupMove2DOperation(e,i,n){const s="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const r=await this._getGraphicMover(e,i,n);if(eo(r))return r;const o=new Gp({activeComponent:r,tool:s,type:"update",onEnd:()=>{var y;this._displayDefaultCursor(),Ad(f),Ad(c),r.destroy(),(y=this._internalGraphicsLayer)==null||y.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const y=this.updateGraphics.toArray();sT(o,y),o.refreshComponent(),this._emitUndoEvent({graphics:y,tool:s})},redo:()=>{const y=this.updateGraphics.toArray();rT(o,y),o.refreshComponent(),this._emitRedoEvent({graphics:y,tool:s})},addToSelection:async y=>{await this._updateSpatialReference(y),this.updateGraphics.push(y),r.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[y],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:y=>{const _=this.updateGraphics.indexOf(y);o.history.undo.forEach(S=>S.updates.splice(_,1)),o.history.redo.forEach(S=>S.updates.splice(_,1)),this.updateGraphics.remove(y);const x=this.updateGraphics.toArray();this.emit("update",{graphics:x,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[y],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?r.graphics=x:o.complete()}});let l=!1;const c=[n.on("immediate-click",y=>this._getCommonUpdateOperationClickHandlers(o,y,i),rr.WIDGET),n.on("key-down",y=>{this._getCommonUpdateOperationKeyDownHandlers(o,y),y.key!==zs.constraint||y.repeat||(l=!0,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},rr.WIDGET),n.on("key-up",y=>{y.key===zs.constraint&&l&&(l=!1,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},rr.WIDGET)],f=this._getHandlesForComponent(o,i);return o}async _setupReshape3DOperation(e,i,n,s=!1){const r="reshape",o=await this._requireModule(st(()=>import("./ImageMaterial.glsl-CANCGWka.js").then(A=>A.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(eo(o))return o;const{ManipulatedObject3DGraphic:l,ReshapeTool3D:c}=o.module,f=new l({view:n,graphic:e}),y=HHe(f);if(y!==bs.SUPPORTED)return f.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${Vee(y)}).`),null;const _=i.reshapeOptions,x=new c({view:n,object:f,enableZVertex:i.enableZ&&(_==null?void 0:_.vertexOperation)==="move",enableZShape:i.enableZ&&(_==null?void 0:_.shapeOperation)==="move",enableMoveObject:(_==null?void 0:_.shapeOperation)==="move"||(_==null?void 0:_.shapeOperation)==="move-xy",enableMidpoints:(_==null?void 0:_.edgeOperation)==="split",enableEdgeOffset:(_==null?void 0:_.edgeOperation)==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(x),s||this.updateGraphics.add(f.graphic);const S=[],P=new Gp({activeComponent:x,tool:r,type:"update",onEnd:()=>{Ad(S),oT(n,x),f.destroy()},canUndo:()=>!x.destroyed&&x.canUndo,undo:()=>{x.destroyed||(x.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!x.destroyed&&x.canRedo,redo:()=>{x.destroyed||(x.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async A=>{this.updateGraphics.add(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[A],removed:[],type:"selection-change"},type:"update"}),P.onEnd(),P.destroy();const D=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,n,"transform",!0);eo(D)||this._setUpdateOperationHandle(D,i)},removeFromSelection:A=>{this.updateGraphics.remove(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[A],type:"selection-change"},type:"update"}),P.complete()},toggleTool:async()=>{if(i.toggleToolOnClick===!1)return;P.onEnd(),P.destroy();const A=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),i,n,!0);eo(A)||this._setUpdateOperationHandle(A,i)}});return S.push(...this._getHandlesForComponent(P,i),n.on("immediate-click",A=>this._getCommonUpdateOperationClickHandlers(P,A,i),rr.WIDGET),n.on("key-down",A=>{this._getCommonUpdateOperationKeyDownHandlers(P,A)},rr.WIDGET)),P}async _setupTransformOrReshape2DOperation(e,i,n,s){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const r=i==="transform"?await this._getBox(e,n,s):await this._getReshape(e,n,s);if(eo(r))return r;const o=new Gp({activeComponent:r,type:"update",onEnd:()=>{Ad(c),Ad(l),o.activeComponent&&!o.activeComponent.destroyed&&o.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{sT(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},redo:()=>{rT(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},addToSelection:async f=>{let y=o.activeComponent;if((y==null?void 0:y.type)==="reshape"){const _=[...this.updateGraphics,f];this.updateGraphics.removeAll(),o.onEnd(),o.destroy();const x=await this._setupTransformOrReshape2DOperation(_,"transform",n,s);if(eo(x))return;this._setUpdateOperationHandle(x,n)}else this.updateGraphics.add(f),y.graphics=this.updateGraphics.toArray(),y.refresh(),o.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[f],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async f=>{const y=this.updateGraphics.indexOf(f);o.history.undo.forEach(x=>x.updates.splice(y,1)),o.history.redo.forEach(x=>x.updates.splice(y,1)),this.updateGraphics.remove(f);const _=this.updateGraphics.toArray();if(_.length===0)o.complete();else{const x=_[0].geometry;_.length!==1||x==null||x.type!=="point"&&x.type!=="multipoint"?o.activeComponent.graphics=_:o.toggleTool()}this.emit("update",{graphics:_,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[f],type:"selection-change"},type:"update"})},toggleTool:async()=>{var x;if(this.updateGraphics.length>1)return;const f=this.updateGraphics.at(0),y=f.geometry;if(y!=null&&(o.tool==="reshape"&&(y.type==="point"||y.type==="multipoint")||o.tool==="transform"&&y.type==="extent"))return;let _=null;o.tool==="transform"?_=await this._getReshape([f],n,s):o.tool==="reshape"&&(_=await this._getBox([f],n,s)),eo(_)||((x=o.activeComponent)==null||x.destroy(),o.activeComponent=_,o.activeComponent&&(Ad(c),c=this._getHandlesForComponent(o,n)))}}),l=[s.on("immediate-click",f=>this._getCommonUpdateOperationClickHandlers(o,f,n),rr.WIDGET),s.on("key-down",f=>{if(this._getCommonUpdateOperationKeyDownHandlers(o,f),f.key===zs.constraint&&!f.repeat&&o){const y=o.activeComponent;y&&y.type==="box"&&(y.preserveAspectRatio=!y.preserveAspectRatio)}},rr.WIDGET),s.on("key-up",f=>{if(f.key===zs.constraint&&o){const y=o.activeComponent;y&&y.type==="box"&&(y.preserveAspectRatio=!y.preserveAspectRatio)}},rr.WIDGET)];let c=this._getHandlesForComponent(o,n);return o}async _getGraphicMover(e,i,n){const{enableMoveAllGraphics:s,highlightOptions:r}=i,o=await this._requireModule(st(()=>import("./GraphicMover-Bcb_Pk1i.js"),__vite__mapDeps([325,313,64,51,52,2,44]),import.meta.url));return eo(o)?o:new o.module.default({enableMoveAllGraphics:s,highlightsEnabled:!!(r!=null&&r.enabled),indicatorsEnabled:!1,graphics:e,view:n,callbacks:{onGraphicMoveStart:({dx:l,dy:c,graphic:f})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:c,mover:f,type:"move-start"},type:"update"})},onGraphicMove:({dx:l,dy:c,graphic:f})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:c,mover:f,type:"move"},type:"update"}),onGraphicMoveStop:({dx:l,dy:c,graphic:f})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:c,mover:f,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,i,n){var y,_;const{enableRotation:s,enableScaling:r,highlightOptions:o,preserveAspectRatio:l}=i,c=await this._requireModule(st(()=>import("./Box-Cdsd4X6x.js"),__vite__mapDeps([326,313,325,64,51,52,2,44,327,310,139,140,10,38,39,37,128,304,320,319]),import.meta.url));if(eo(c))return c;const f=(_=(y=this.view)==null?void 0:y.inputManager)==null?void 0:_.isModifierKeyDown(zs.constraint);return new c.module.default({graphics:e,enableRotation:s,enableScaling:r,highlightsEnabled:!!(o!=null&&o.enabled),preserveAspectRatio:!!l!=!!f,layer:this._internalGraphicsLayer,view:n,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onMove:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onMoveStop:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onScaleStart:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onScale:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onScaleStop:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onRotateStart:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onRotate:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onRotateStop:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"})}})}async _getReshape(e,i,n){var c,f,y;const s=((c=i.reshapeOptions)==null?void 0:c.edgeOperation)==="split",r=((f=i.reshapeOptions)==null?void 0:f.shapeOperation)==="move",o=!!((y=i.highlightOptions)!=null&&y.enabled),l=await this._requireModule(st(()=>import("./Reshape-B80vWw1T.js"),__vite__mapDeps([328,40,41,42,313,325,64,51,52,2,44,310,139,140,10,38,39,37,128,304,318,312,210,291,184,319,327]),import.meta.url));return eo(l)?l:new l.module.default({enableMidpoints:s,enableMovement:r,graphic:e[0],highlightsEnabled:o,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:n,callbacks:{onReshapeStart:_=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{..._},type:"update"}),onReshape:_=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{..._},type:"update"}),onReshapeStop:({mover:_,type:x})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:_,type:x},type:"update"}),onMoveStart:({dx:_,dy:x,mover:S,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:_,dy:x,mover:S,type:P},type:"update"}),onMove:({dx:_,dy:x,mover:S,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:_,dy:x,mover:S,type:P},type:"update"}),onMoveStop:({dx:_,dy:x,mover:S,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:_,dy:x,mover:S,type:P},type:"update"}),onVertexAdd:({added:_,type:x,vertices:S})=>{const P=_.map(A=>hK(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:P,vertices:S,type:x},type:"update"})},onVertexRemove:({removed:_,type:x,vertices:S})=>{const P=_.map(A=>hK(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:P,vertices:S,type:x},type:"update"})}}})}_getHandlesForComponent(e,i){const n=e.activeComponent;if(!n)return[];switch(n.type){case"graphic-mover":return[n.on("graphic-click",({graphic:s,viewEvent:r})=>{var o;(o=r.native)!=null&&o.shiftKey&&(r.stopPropagation(),e.removeFromSelection(s))}),n.on("graphic-move-start",s=>e.addToHistory(vg(s.allGraphics)))];case"box":return[n.on("graphic-click",s=>this._onTransformOrReshape2DGraphicClick(e,i,s)),n.on("move-start",s=>e.addToHistory(vg(s.graphics))),n.on("rotate-start",s=>e.addToHistory(vg(s.graphics))),n.on("scale-start",s=>e.addToHistory(vg(s.graphics)))];case"reshape":return[n.on("graphic-click",s=>this._onTransformOrReshape2DGraphicClick(e,i,s)),n.on("move-start",s=>e.addToHistory(vg([s.mover]))),n.on("reshape-start",s=>e.addToHistory(vg([s.graphic]))),n.on("vertex-add",s=>e.addToHistory(vg([s.oldGraphic]))),n.on("vertex-remove",s=>e.addToHistory(vg([s.oldGraphic])))];case"move-3d":return[n.events.on("record-undo",({updates:s})=>{e.addToHistory({updates:s})}),n.events.on("move-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move-start"},type:"update"})}),n.events.on("move",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s.dx,dy:s.dy,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move"},type:"update"})}),n.events.on("move-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:s.objects.length>0?s.objects[0].graphic:null,type:"move-stop"},type:"update"})}),n.events.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.object.graphic],e,i):e.toggleTool()})];case"transform-3d":return[n.events.on("record-undo",({updates:s})=>{e.addToHistory({updates:s})}),n.events.on("translate-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-start"},type:"update"})}),n.events.on("translate-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move-stop"},type:"update"})}),n.events.on("rotate-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate-start"},type:"update"})}),n.events.on("rotate-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate-stop"},type:"update"})}),n.events.on("scale-start",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-start"},type:"update"})}),n.events.on("scale-stop",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale-stop"},type:"update"})}),n.events.on("translate",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,dx:s.dxScreen,dy:s.dyScreen,type:"move"},type:"update"})}),n.events.on("rotate",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,angle:s.angle,type:"rotate"},type:"update"})}),n.events.on("scale",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:s.object.graphic,xScale:s.xScale,yScale:s.yScale,type:"scale"},type:"update"})}),n.events.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.object.graphic],e,i):e.toggleTool()})];case"reshape-3d":return[n.events.on("reshape",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...s,mover:s.object.graphic},type:"update"})}),n.events.on("move",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...s,mover:s.object.graphic},type:"update"})}),n.events.on("vertex-add",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),n.events.on("vertex-remove",s=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:s,type:"update"})}),n.events.on("immediate-click",s=>{s.shiftKey?this._toggleSelection([s.object.graphic],e,i):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,i,n){var o;const{graphic:s,viewEvent:r}=n;return(o=r.native)!=null&&o.shiftKey&&s.layer===this.layer?(r.stopPropagation(),e.removeFromSelection(s)):i.toggleToolOnClick?(r.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,i){var r;this._operationHandle=e;const n=(r=this.view)==null?void 0:r.map;this._disablePopup(i);const s=()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),l=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),n&&n.remove(this._internalGraphicsLayer),this._restorePopup(i),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:l,toolEventInfo:null,type:"update"})}};e.on("complete",s)}async _getCommonUpdateOperationClickHandlers(e,i,n){const s=Sz(i),r=await i.async(()=>this._getFirstHit(s));if(r==null)return void e.complete();if(i.native.shiftKey&&this._toggleSelection([r.graphic],e,n))return void i.stopPropagation();this.updateGraphics.includes(r.graphic)?i.stopPropagation():e.complete()}_toggleSelection(e,i,n){const s=!!n.multipleSelectionEnabled;return e.some(r=>r!=null&&!(!s||r.layer!==this.layer)&&(this.updateGraphics.includes(r)?i.removeFromSelection(r):i.addToSelection(r),!0))}_getCommonUpdateOperationKeyDownHandlers(e,i){if(!e)return;const n=i.key;n===zs.undo&&e.canUndo()?(i.stopPropagation(),e.undo()):n===zs.redo&&e.canRedo()?(i.stopPropagation(),e.redo()):n===zs.cancel?(i.stopPropagation(),e.cancel()):this.allowDeleteKey&&zs.delete.includes(n)&&this._onDeleteKey(i)}_onDeleteKey(e){var s;if(!this._operationHandle||this._operationHandle.type!=="update")return;const i=this.activeComponent,n=this.updateGraphics.toArray();i!=null&&(i.type!=="reshape"||n.length===1&&((s=n[0].geometry)==null?void 0:s.type)==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){var e,i;this._internalGraphicsLayer&&((i=(e=this.view)==null?void 0:e.map)==null||i.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=co(this._internalGraphicsLayer))}_isComponentGraphic(e){var n;const{activeComponent:i}=this;return!(!e||i==null)&&(((n=e.attributes)==null?void 0:n.esriSketchTool)||i.type==="draw-2d"&&i.graphic===e||(i.type==="box"||i.type==="reshape")&&i.isUIGraphic(e))}_displayPointerCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,i,n){qt.getLogger(this).error(new rt(e,i,n))}async _requireModule(e){const i=new AbortController;this._moduleLoaderAbortController=i;const n=await e;return this._moduleLoaderAbortController!==i||i.signal.aborted?{requireError:"aborted"}:{module:n}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){}wait(){return X$(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var i;return((i=this.view)==null?void 0:i.type)!=="3d"||this.updateOnGraphicClick||((e==null?void 0:e.toggleToolOnClick)??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?(_0(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await FC(X$(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",nte("view"))}_logMissingLayer(){this._logError($Xe,nte("layer"))}};I([O()],Kn.prototype,"_defaultSnappingManager",void 0),I([O()],Kn.prototype,"updating",null),I([O()],Kn.prototype,"_operationHandle",void 0),I([O({readOnly:!0})],Kn.prototype,"activeTool",null),I([O()],Kn.prototype,"activeTooltip",null),I([O()],Kn.prototype,"activeFillSymbol",void 0),I([O()],Kn.prototype,"activeLineSymbol",void 0),I([O()],Kn.prototype,"activeVertexSymbol",void 0),I([O()],Kn.prototype,"allowDeleteKey",void 0),I([O({readOnly:!0})],Kn.prototype,"createGraphic",null),I([O()],Kn.prototype,"defaultCreateOptions",null),I([O()],Kn.prototype,"defaultUpdateOptions",null),I([O({type:b5,nonNullable:!0})],Kn.prototype,"labelOptions",null),I([O()],Kn.prototype,"layer",void 0),I([O({types:Vu})],Kn.prototype,"pointSymbol",void 0),I([O({types:Vu})],Kn.prototype,"polygonSymbol",void 0),I([O({types:Vu})],Kn.prototype,"polylineSymbol",void 0),I([O()],Kn.prototype,"meshSymbol",void 0),I([O({type:x5,nonNullable:!0})],Kn.prototype,"snappingOptions",null),I([O()],Kn.prototype,"snappingManager",null),I([O({readOnly:!0})],Kn.prototype,"state",null),I([O({type:Ej,nonNullable:!0})],Kn.prototype,"tooltipOptions",null),I([O({readOnly:!0})],Kn.prototype,"updateGraphics",void 0),I([O()],Kn.prototype,"updateOnGraphicClick",void 0),I([O({type:QA,nonNullable:!0})],Kn.prototype,"valueOptions",null),I([O({types:Vu})],Kn.prototype,"vertexSymbol",void 0),I([O({value:null})],Kn.prototype,"view",null),I([O({constructOnly:!0,type:i7})],Kn.prototype,"sketchOptions",void 0),Kn=I([De("esri.widgets.Sketch.SketchViewModel")],Kn);const $Xe="sketch:missing-property",nte=t=>`Property '${t}' is missing on SketchViewModel.`;function RXe(t){return t==="polygon"||t==="rectangle"||t==="circle"}function sT(t,e){f0e("undo",t.history.undo,t.history.redo,e)}function rT(t,e){f0e("redo",t.history.redo,t.history.undo,e)}function f0e(t,e,i,n){const s=e.pop();if(!s)return;const r=s.updates,o=[];n.forEach((l,c)=>{const f=r[c];f!=null&&("geometry"in f&&f.geometry!=null&&(o.push({geometry:l.geometry}),l.geometry=f.geometry),"symbol"in f&&f.symbol!=null&&(o.push({symbol:l.symbol}),l.symbol=f.symbol),"undo"in f&&(o.push(f),f[t](l)))}),i.push({updates:o})}function ste(t,e){t!=null&&e.hasGrabbedManipulators&&(t.activeTool=null)}function vg(t){return{updates:t.map(({geometry:e})=>(e==null?void 0:e.type)==="mesh"?{geometry:e.cloneShallow()}:{geometry:e})}}function oT(t,e){var i;(i=t.tools)==null||i.remove(e),e.destroyed||e.destroy()}function eo(t){return"requireError"in t&&t.requireError==="aborted"}const LXe=Kn;let Eu=class extends Ei{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};I([O({type:Boolean,nonNullable:!0})],Eu.prototype,"colorSelection",void 0),I([O({type:Boolean,nonNullable:!0})],Eu.prototype,"dynamicScaleToggle",void 0),I([O({type:Boolean,nonNullable:!0})],Eu.prototype,"gridEnabledToggle",void 0),I([O({type:Boolean,nonNullable:!0})],Eu.prototype,"numericInputs",void 0),I([O({type:Boolean,nonNullable:!0})],Eu.prototype,"gridSnapEnabledToggle",void 0),I([O({type:Boolean,nonNullable:!0})],Eu.prototype,"lineIntervalInput",void 0),I([O({type:Boolean,nonNullable:!0})],Eu.prototype,"outOfScaleWarning",void 0),I([O({type:Boolean,nonNullable:!0})],Eu.prototype,"placementButtons",void 0),I([O({type:Boolean,nonNullable:!0})],Eu.prototype,"rotateWithMapToggle",void 0),Eu=I([De("esri.widgets.support.GridControls.VisibleElements")],Eu);const p0e=Eu;let Cu=class extends Ei{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new p0e({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};I([O({type:Boolean,nonNullable:!0})],Cu.prototype,"enabledToggle",void 0),I([O({type:Boolean,nonNullable:!0})],Cu.prototype,"featureEnabledToggle",void 0),I([O({type:Boolean,nonNullable:!0})],Cu.prototype,"gridEnabledToggle",void 0),I([O({type:Boolean,nonNullable:!0})],Cu.prototype,"header",void 0),I([O({type:Boolean,nonNullable:!0})],Cu.prototype,"layerList",void 0),I([O({type:Boolean,nonNullable:!0})],Cu.prototype,"gridControls",void 0),I([O({type:p0e,nonNullable:!0})],Cu.prototype,"gridControlsElements",void 0),I([O({type:Boolean,nonNullable:!0})],Cu.prototype,"layerListToggleLayersButton",void 0),I([O({type:Boolean,nonNullable:!0})],Cu.prototype,"selfEnabledToggle",void 0),Cu=I([De("esri.widgets.support.SnappingControls.VisibleElements")],Cu);const f7=Cu;let Fh=class extends Ei{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};I([O({type:Boolean,nonNullable:!0})],Fh.prototype,"point",void 0),I([O({type:Boolean,nonNullable:!0})],Fh.prototype,"polyline",void 0),I([O({type:Boolean,nonNullable:!0})],Fh.prototype,"polygon",void 0),I([O({type:Boolean,nonNullable:!0})],Fh.prototype,"rectangle",void 0),I([O({type:Boolean,nonNullable:!0})],Fh.prototype,"circle",void 0),I([O({type:Boolean,nonNullable:!0})],Fh.prototype,"multipoint",void 0),I([O({type:Boolean,nonNullable:!0})],Fh.prototype,"mesh",void 0),Fh=I([De("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],Fh);let Dy=class extends Ei{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};I([O({nonNullable:!0})],Dy.prototype,"rectangle-selection",void 0),I([O({nonNullable:!0})],Dy.prototype,"lasso-selection",void 0),I([O({nonNullable:!0})],Dy.prototype,"custom-selection",void 0),Dy=I([De("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],Dy);let Pc=class extends Ei{constructor(e){super(e),this.createTools=new Fh,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new Dy,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new f7,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};I([O({type:Fh,nonNullable:!0})],Pc.prototype,"createTools",void 0),I([O({type:Boolean,nonNullable:!0})],Pc.prototype,"directionModePicker",void 0),I([O({type:Boolean,nonNullable:!0})],Pc.prototype,"duplicateButton",void 0),I([O({type:Boolean,nonNullable:!0})],Pc.prototype,"labelsToggle",void 0),I([O({type:Dy,nonNullable:!0})],Pc.prototype,"selectionTools",void 0),I([O({type:Boolean,nonNullable:!0})],Pc.prototype,"settingsMenu",void 0),I([O({type:Boolean,nonNullable:!0})],Pc.prototype,"snappingControls",void 0),I([O({type:f7,nonNullable:!0})],Pc.prototype,"snappingControlsElements",void 0),I([O({type:Boolean,nonNullable:!0})],Pc.prototype,"tooltipsToggle",void 0),I([O({type:Boolean,nonNullable:!0})],Pc.prototype,"undoRedoMenu",void 0),Pc=I([De("esri.widgets.Sketch.VisibleElements")],Pc);const m0e=Pc,YE={anchor:"esri-widget__anchor",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetDisabled:"esri-widget--disabled"};function n_t(t){return t&&typeof t.highlight=="function"}function FXe(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function s_t(t,e){if(e&&t){const{minScale:i,maxScale:n}=t;if(zXe(i,n))return FXe(e,i,n)}return!0}function zXe(t,e){return t!=null&&t>0||e!=null&&e>0}function r_t(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}function n9(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatures"in t&&"layer"in t&&"view"in t}function W6(){return[1,0,0,1,0,0]}function g0e(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function qXe(t,e,i,n,s,r){return[t,e,i,n,s,r]}function VXe(t,e){return new Float64Array(t,e,6)}const y0e=W6();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:y0e,clone:g0e,create:W6,createView:VXe,fromValues:qXe},Symbol.toStringTag,{value:"Module"}));function rte(t){let e,i,n=[],s=!1;function r(...o){return s&&e===this&&GXe(o,n)||(i=t.apply(this,o),e=this,n=o,s=!0),i}return r}function GXe(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}let jXe=class{constructor(e){this._observable=new YC,this._set=new Set(e)}get size(){return mi(this._observable),this._set.size}add(e){const i=this._set.size;return this._set.add(e),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const i=this._set.delete(e);return i&&this._observable.notify(),i}entries(){return mi(this._observable),this._set.entries()}forEach(e,i){mi(this._observable),this._set.forEach((n,s)=>e.call(i,n,s,this),i)}has(e){return mi(this._observable),this._set.has(e)}keys(){return mi(this._observable),this._set.keys()}values(){return mi(this._observable),this._set.values()}[Symbol.iterator](){return mi(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}},s9=class extends Ei{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,n={}){return this._installWatch(e,i,n,xi)}addWhen(e,i,n={}){return this._installWatch(e,i,n,D0)}addOnCollectionChange(e,i,{initial:n=!1,final:s=!1}={}){const r=++this._handleId;return this.addHandles([Ju(e,"after-changes",this._createSyncUpdatingCallback(),om),Ju(e,"change",i,{onListenerAdd:n?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>i({added:[],removed:o.toArray()}):void 0})],r),fn(()=>this.removeHandles(r))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(fn(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(aT)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const n=()=>this.removeHandles(i);return e.then(n,n),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,n={},s){const r=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,r);const o=s(e,i,n);return this.addHandles(o,r),fn(()=>this.removeHandles(r))}_installSyncUpdatingWatch(e,i){const n=this._createSyncUpdatingCallback(),s=xi(e,n,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(aT),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(aV(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(aT))}),aT)}}};I([O({readOnly:!0})],s9.prototype,"updating",void 0),s9=I([De("esri.core.support.UpdatingHandles")],s9);const aT=-42;function r9(t,e){return t===e||t!=null&&e!=null&&ea(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}function FN(t,e,i){return t===e||t!=null&&e!=null&&ea(t.spatialReference,e.spatialReference)&&l0(t.x,e.x,i)&&l0(t.y,e.y,i)&&l0(t.z??0,e.z??0,i)&&l0(t.m??0,e.m??0,i)}var XE;function l_t(t){return t===XE.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(XE||(XE={}));const c_t=["freehand","hybrid","click"],v0e="click";let BXe=class{constructor({consumesClicks:e,grabbableForEvent:i}){this.events=new Ia,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=e,this.grabbableForEvent=i}destroy(){}intersectionDistance(e,i){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}};var Gr;(function(t){t[t.Z=0]="Z",t[t.M=1]="M"})(Gr||(Gr={}));let HXe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(_r())}pointToVector(e){return this._tag(Xu(e.x,e.y))}arrayToVector(e){return this._tag(Xu(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.hasZ=!1,i.hasM=!1,i.spatialReference=this.spatialReference,i}lerp(e,i,n,s){return bj(s,e,i,n)}addDelta(e,i,n){e[0]+=i,e[1]+=n}distance(e,i){return y5(e,i)}getZ(e,i=void 0){return i}hasZ(){return!1}getM(e,i=void 0){return i}hasM(){return!1}clone(e){return this._tag(Qme(e))}copy(e,i){return jme(i,e)}fromXYZ(e){return this._tag(Xu(e[0],e[1]))}toXYZ(e,i=$t()){return Gs(i,e[0],e[1],0)}pointToXYZ(e,i=$t()){return Gs(i,e.x,e.y,0)}equals(e,i){return Kme(e,i)}_tag(e){return e}},ote=class{constructor(e,i){this._valueType=e,this.spatialReference=i}createVector(){return this._tag($t())}pointToVector(e){return this._tag(Sl(e.x,e.y,this._valueType===Gr.Z?e.z:e.m))}arrayToVector(e){return this._tag(Sl(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===Gr.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=this._valueType===Gr.Z?e[2]:void 0,i.m=this._valueType===Gr.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=this._valueType===Gr.Z?e[2]:void 0,i.m=this._valueType===Gr.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(!e)return;i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"});const n=this._valueType===Gr.Z,s=this._valueType===Gr.M;return i.x=e[0],i.y=e[1],i.z=n?e[2]:void 0,i.m=s?e[2]:void 0,i.hasZ=n,i.hasM=s,i.spatialReference=this.spatialReference,i}lerp(e,i,n,s){return qx(s,e,i,n)}addDelta(e,i,n,s){e[0]+=i,e[1]+=n,this._valueType===Gr.Z&&(e[2]+=s)}distance(e,i){return this._valueType===Gr.Z?i1(e,i):y5(e,i)}getZ(e,i=void 0){return this._valueType===Gr.Z?e[2]:i}hasZ(){return this._valueType===Gr.Z}getM(e,i=void 0){return this._valueType===Gr.M?e[2]:i}hasM(){return this._valueType===Gr.M}clone(e){return this._tag(qhe(e))}copy(e,i){return rc(i,e)}fromXYZ(e,i=0,n=0){return this._tag(Sl(e[0],e[1],this._valueType===Gr.Z?e.length>2?e[2]:i:n))}toXYZ(e,i=$t()){return Gs(i,e[0],e[1],this._valueType===Gr.Z?e[2]:0)}pointToXYZ(e,i=$t()){return Gs(i,e.x,e.y,this._valueType===Gr.Z?e.z??0:0)}equals(e,i){return UE(e,i)}_tag(e){return e}},UXe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(Em())}pointToVector(e){return this._tag(Yu(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag(Yu(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Yi){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.hasZ=!0,i.hasM=!0,i.spatialReference=this.spatialReference,i}lerp(e,i,n,s){return qA(s,e,i,n)}addDelta(e,i,n,s){e[0]+=i,e[1]+=n,e[2]+=s}distance(e,i){return i1(e,i)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag(Ape(e))}copy(e,i){return W2(i,e)}fromXYZ(e,i=0,n=0){return this._tag(Yu(e[0],e[1],e.length>2?e[2]:i,n))}toXYZ(e,i=$t()){return Gs(i,e[0],e[1],e[2])}pointToXYZ(e,i=$t()){return Gs(i,e.x,e.y,e.z??0)}equals(e,i){return u5(e,i)}_tag(e){return e}};function _0e(t,e,i){return t&&e?new UXe(i):e?new ote(Gr.M,i):t?new ote(Gr.Z,i):new HXe(i)}var Ez;let Rb=Ez=class extends Un(St){constructor(t){super(t),this.type="georeferenced",this.origin=null}};Rb.absolute=new Ez,I([si({georeferenced:"georeferenced"},{readOnly:!0})],Rb.prototype,"type",void 0),I([O({type:[Number],nonNullable:!1,json:{write:!0}})],Rb.prototype,"origin",void 0),Rb=Ez=I([De("esri.geometry.support.MeshGeoreferencedVertexSpace")],Rb);const YXe=Rb;let ES=class extends Un(St){constructor(e){super(e),this.type="local",this.origin=$t()}};I([si({local:"local"},{readOnly:!0})],ES.prototype,"type",void 0),I([O({type:[Number],nonNullable:!0,json:{write:!0}})],ES.prototype,"origin",void 0),ES=I([De("esri.geometry.support.MeshLocalVertexSpace")],ES);const XXe=ES;function ate(){return qt.getLogger("esri.geometry.Mesh")}function m_t(t){return!jj(t)}function jj(t){return t.origin!=null}function WXe(t){return jj(t.vertexSpace)}function g_t(t,e){if(!jj(t))return null;const[i,n,s]=t.origin;return new Yi({x:i,y:n,z:s,spatialReference:e})}function y_t(t,e){const{x:i,y:n,z:s,spatialReference:r}=t,o=[i,n,s??0];return(e==null?void 0:e.geographic)!==void 0&&(k2(ate(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),e.vertexSpace&&ate().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),((e==null?void 0:e.vertexSpace)??KXe(e==null?void 0:e.geographic)??ZXe(r))==="local"?new XXe({origin:o}):new YXe({origin:o})}function ZXe(t){return t.isGeographic||t.isWebMercator?"local":"georeferenced"}function KXe(t){return t==null?void 0:t?"local":"georeferenced"}function v_t(t,e){return t.type===e.type&&(t.origin===e.origin||t.origin!=null&&e.origin!=null&&ds(t.origin,e.origin))}function JXe(t){return"declaredClass"in t}function lte(t){return"declaredClass"in t}function QXe(t){return"declaredClass"in t}function __t(t,e){return t?QXe(t)?t:new th({layer:e,sourceLayer:e,visible:t.visible,symbol:Ue(t.symbol),attributes:Ue(t.attributes),geometry:eWe(t.geometry)}):null}function eWe(t){return t==null?null:JXe(t)?t:XC(tWe(t))}function tWe(t){const{wkid:e,wkt:i,wkt2:n,latestWkid:s}=t.spatialReference,r={wkid:e,wkt:i,wkt2:n,latestWkid:s};switch(t.type){case"point":{const{x:o,y:l,z:c,m:f}=t;return{x:o,y:l,z:c,m:f,spatialReference:r}}case"polygon":{const{rings:o,hasZ:l,hasM:c}=t;return{rings:cte(o),hasZ:l,hasM:c,spatialReference:r}}case"polyline":{const{paths:o,hasZ:l,hasM:c}=t;return{paths:cte(o),hasZ:l,hasM:c,spatialReference:r}}case"extent":{const{xmin:o,xmax:l,ymin:c,ymax:f,zmin:y,zmax:_,mmin:x,mmax:S,hasZ:P,hasM:A}=t;return{xmin:o,xmax:l,ymin:c,ymax:f,zmin:y,zmax:_,mmin:x,mmax:S,hasZ:P,hasM:A,spatialReference:r}}case"multipoint":{const{points:o,hasZ:l,hasM:c}=t;return{points:x0e(o)?b0e(o):o,hasZ:l,hasM:c,spatialReference:r}}default:return}}function cte(t){return iWe(t)?t.map(e=>b0e(e)):t}function b0e(t){return t.map(e=>Array.from(e))}function iWe(t){for(const e of t)if(e.length!==0)return x0e(e);return!1}function x0e(t){return t.length>0&&(DC(t[0])||NC(t[0]))}function p7(t,e){if(!t)return null;let i;if(lte(t)){if(e==null)return t.clone();if(lte(e))return e.copy(t)}return e!=null?(i=e,i.x=t.x,i.y=t.y,i.spatialReference=t.spatialReference,t.hasZ?(i.z=t.z,i.hasZ=t.hasZ):(i.z=void 0,i.hasZ=!1),t.hasM?(i.m=t.m,i.hasM=!0):(i.m=void 0,i.hasM=!1)):(i=Ff(t.x,t.y,t.z,t.spatialReference),t.hasM&&(i.m=t.m,i.hasM=!0)),i}function nWe(t){const{wkid:e,wkt:i,wkt2:n,latestWkid:s}=t,r={wkid:e,wkt:i,wkt2:n,latestWkid:s};return Gi.fromJSON(r)}function sWe(t,e){if(!e.supported)return;let i=1/0,n=-1/0;const s=e.upperBoundX-e.lowerBoundX;t.forEach(o=>{let l=o.pos[0];for(;l<e.lowerBoundX;)l+=s;for(;l>e.upperBoundX;)l-=s;i=Math.min(i,l),n=Math.max(n,l),o.pos[0]=l});const r=n-i;s-r<r&&t.forEach(o=>{o.pos[0]<0&&(o.pos[0]+=s)})}function rWe(t,e){const i=s2(t);return e===XE.Global&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}let C5=class{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}},um=class{constructor(e,i,n){this.component=e,this.leftVertex=i,this.rightVertex=n,this.type="edge",i.rightEdge=this,n.leftEdge=this}},m7=class{constructor(e,i){this._spatialReference=e,this._viewingMode=i,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||sWe(this.vertices,rWe(this._spatialReference,this._viewingMode))}updateVertexIndex(e,i){if(this.vertices.length===0)return;const n=this.vertices[0];let s=null,r=e,o=i;do s=r,s.index=o++,r=s.rightEdge?s.rightEdge.rightVertex:null;while(r!=null&&r!==n);s.leftEdge&&s!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(s),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(e,i){const n=this.vertices[e];this.vertices[e]=this.vertices[i],this.vertices[i]=n}iterateVertices(e){if(this.vertices.length===0)return;const i=this.vertices[0];let n=i;do e(n,n.index),n=n.rightEdge!=null?n.rightEdge.rightVertex:null;while(n!==i&&n!=null)}},Cz=class w0e extends Ia{constructor(e,i){super(),this.type=e,this.coordinateHelper=i,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:this.type}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const e of this.components)for(const i of e.vertices)yield i}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],i=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const s=[];let r=n.vertices.find(l=>l.leftEdge==null);const o=r;do s.push(i(r.pos)),r=r.rightEdge?r.rightEdge.rightVertex:null;while(r&&r!==o);e.push(s)}return new $f({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],i=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const s=[],r=n.vertices[0];let o=r;const l=o;do s.push(i(o.pos)),o=o.rightEdge!=null?o.rightEdge.rightVertex:null;while(o&&o!==l);n.isClosed()&&s.push(i(r.pos)),e.push(s)}return new el({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,i){const n=e.spatialReference,s=_0e(e.hasZ,e.hasM,n),r=new w0e(e.type,s);switch(e.type){case"polygon":oWe(r,e,i);break;case"polyline":aWe(r,e,i);break;case"point":ute(r,e,i);break;case"mesh":ute(r,e.origin,i),r._geometry=e,r._dirty=!1}return r}};function oWe(t,e,i){const n=e.spatialReference,s=t.coordinateHelper,r=e.rings;for(let o=0;o<r.length;++o){const l=r[o],c=new m7(n,i);c.index=o;const f=l.length>2&&wf(l[0],l[l.length-1]),y=f?l.length-1:l.length;for(let x=0;x<y;++x){const S=s.arrayToVector(l[x]),P=new C5(c);c.vertices.push(P),P.pos=S,P.index=x}const _=c.vertices.length-1;for(let x=0;x<_;++x){const S=c.vertices[x],P=c.vertices[x+1],A=new um(c,S,P);c.edges.push(A)}if(f){const x=new um(c,c.vertices[c.vertices.length-1],c.vertices[0]);c.edges.push(x)}t.components.push(c)}}function aWe(t,e,i){const n=e.spatialReference,s=t.coordinateHelper,r=e.paths;for(let o=0;o<r.length;++o){const l=r[o],c=new m7(n,i);c.index=o;const f=l.length;for(let _=0;_<f;++_){const x=s.arrayToVector(l[_]),S=new C5(c);c.vertices.push(S),S.pos=x,S.index=_}const y=c.vertices.length-1;for(let _=0;_<y;++_){const x=c.vertices[_],S=c.vertices[_+1],P=new um(c,x,S);c.edges.push(P)}t.components.push(c)}}function ute(t,e,i){const n=e.spatialReference,s=t.coordinateHelper,r=new m7(n,i);r.index=0;const o=new C5(r);o.index=0,o.pos=s.pointToVector(e),r.vertices.push(o),t.components.push(r)}function m3(t){return t.type==="mesh"}var Ul;(function(t){t[t.NEW_STEP=0]="NEW_STEP",t[t.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(Ul||(Ul={}));let lWe=class{constructor(e,i,n){this._editGeometry=e,this._component=i,this._pos=n,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";this._addedVertex==null&&(e="apply",this._addedVertex=new C5(this._component));const i=this._component.getLastVertex();if(i==null)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let n=null;i.rightEdge&&(this._originalEdge=i.rightEdge,n=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._left==null&&(this._left=new um(this._component,i,this._addedVertex)),this._component.edges.push(this._left),i.rightEdge=this._left,this._originalEdge!=null&&n!=null&&(this._right==null&&(this._right=new um(this._component,this._addedVertex,n)),this._component.edges.push(this._right),n.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,i.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){this._addedVertex!=null&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),this._left!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),this._right!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),this._originalEdge!=null&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),this._left!=null?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}},cWe=class S0e{constructor(e,i,n){this._editGeometry=e,this._vertices=i,this.operation=n,this._undone=!1}apply(){this._vertices.forEach(e=>this.operation.apply(e)),this._editGeometry.components.forEach(e=>e.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach(e=>this.operation.undo(e)),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let i=0;i<e._vertices.length;++i)if(e._vertices[i]!==this._vertices[i])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof S0e&&this.canAccumulate(e))&&(this._vertices.forEach(i=>this.operation.accumulate(i,e.operation)),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}};var Gu;(function(t){t[t.CUMULATIVE=0]="CUMULATIVE",t[t.REPLACE=1]="REPLACE"})(Gu||(Gu={}));let uWe=class{constructor(e,i,n=0){this._editGeometry=e,this._vertices=i,this._minNumberOfVertices=n,this.removedVertices=null}apply(){let e="redo";if(this.removedVertices==null){const i=this.removedVertices=[];this._vertices.forEach(n=>{const s=this._removeVertex(n);s!=null&&i.push(s)}),e="apply"}else this.removedVertices.forEach(i=>{this._removeVertex(i.removedVertex)});this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){var e;(e=this.removedVertices)==null||e.forEach(i=>{this._undoRemoveVertex(i)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const i=e.component;if(i.vertices.length<=this._minNumberOfVertices)return null;const n={removedVertex:e,createdEdge:null},s=e.leftEdge,r=e.rightEdge;return i.vertices.splice(i.vertices.indexOf(e),1),s&&(i.edges.splice(i.edges.indexOf(s),1),s.leftVertex.rightEdge=null),r&&(i.edges.splice(i.edges.indexOf(r),1),r.rightVertex.leftEdge=null),e.index===0&&r&&this._vertices.length>0&&i.swapVertices(i.vertices.indexOf(r.rightVertex),0),s&&r&&(n.createdEdge=new um(i,s.leftVertex,r.rightVertex),i.edges.push(n.createdEdge)),r&&i.updateVertexIndex(r.rightVertex,r.rightVertex.index-1),n}_undoRemoveVertex(e){const i=e.removedVertex,n=e.removedVertex.component,s=i.leftEdge,r=i.rightEdge;e.createdEdge&&n.edges.splice(n.edges.indexOf(e.createdEdge),1),n.vertices.push(i),s&&(n.edges.push(s),s.leftVertex.rightEdge=s),r&&(n.edges.push(r),r.rightVertex.leftEdge=r),n.updateVertexIndex(i,i.index)}},hWe=class{constructor(e,i,n){this._editGeometry=e,this._edge=i,this._t=n,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const i=this._edge,n=i.component,s=i.leftVertex,r=i.rightVertex;n.edges.splice(n.edges.indexOf(i),1),this.createdVertex==null&&(e="apply",this.createdVertex=new C5(i.component)),n.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(i.leftVertex.pos,i.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),this._left==null&&(this._left=new um(n,s,this.createdVertex)),this._left.leftVertex.leftEdge?n.edges.push(this._left):n.edges.unshift(this._left),s.rightEdge=this._left,this._right==null&&(this._right=new um(n,this.createdVertex,r)),n.edges.push(this._right),r.leftEdge=this._right,n.updateVertexIndex(this.createdVertex,s.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(this.createdVertex==null||this._left==null||this._right==null)return null;const e=this._edge,i=e.component,n=this.createdVertex.leftEdge,s=this.createdVertex.rightEdge,r=n==null?void 0:n.leftVertex,o=s==null?void 0:s.rightVertex;i.vertices.splice(i.vertices.indexOf(this.createdVertex),1),i.edges.splice(i.edges.indexOf(this._left),1),i.edges.splice(i.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?i.edges.push(this._edge):i.edges.unshift(this._edge),r&&(r.rightEdge=e),o&&(o.leftEdge=e),r&&i.updateVertexIndex(r,r.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}},dWe=class E0e{constructor(e,i,n){this._editGeometry=e,this._vertex=i,this._pos=n}apply(){const e=this._originalPosition==null;e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof E0e&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}},fWe=class{constructor(e,i){this._editGeometry=e,this._component=i,this._createdEdge=null}apply(){let e="redo";if(this._createdEdge==null){e="apply";const i=this._component.getFirstVertex(),n=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||i==null||n==null)return;this._createdEdge=new um(this._component,n,i)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){this._createdEdge!=null&&(qM(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}},hte=class C0e{constructor(e,i,n,s){this._editGeometry=e,this.dx=i,this.dy=n,this.dz=s,this._firstTime=!0}apply(){const e=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(e,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(e){const i=this._editGeometry.geometry;return e instanceof C0e&&e._editGeometry.geometry===i&&(this._apply("apply",e.dx,e.dy,e.dz),this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz,!0)}_apply(e,i,n,s){const r=this._editGeometry.geometry;r.offset(i,n,s);const o=this._editGeometry.components[0].getFirstVertex();if(!o)return;const l=this._editGeometry.coordinateHelper;o.pos=l.pointToVector(r.origin),this._editGeometry.notifyChanges({operation:e,updatedVertices:[o]})}},pWe=class P0e{constructor(e,i,n,s){this._helper=e,this.dx=i,this.dy=n,this.dz=s}_move(e,i,n,s){this._helper.addDelta(e.pos,i,n,s)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof P0e}accumulate(e,i){this._move(e,i.dx,i.dy,i.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}},mWe=class Pz{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(e,i,n,s=0,r=hE.IMMEDIATE){this._helper=e,this._planeType=i,this._edge=n,this.distance=s,this._plane=sl(),this._offsetPlane=sl(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,r===hE.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var r,o,l,c;const e=this._toXYZ(this._edge.leftVertex.pos),i=this._toXYZ((o=(r=this._edge.leftVertex.leftEdge)==null?void 0:r.leftVertex)==null?void 0:o.pos),n=this._toXYZ(this._edge.rightVertex.pos),s=this._toXYZ((c=(l=this._edge.rightVertex.rightEdge)==null?void 0:l.rightVertex)==null?void 0:c.pos);this._edgeDirection=mz($t(),e,n),i?(this._left=this._computeNeighbor(e,i,this._edgeDirection),this._right=this._computeNeighbor(n,s,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(n,s,this._edgeDirection),this._left=this._computeNeighbor(e,i,this._edgeDirection,this._right))}_toXYZ(e){return e!=null?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,i,n,s){const r=$t();if(i){mz(r,e,i);const o=!this._passesBisectingAngleThreshold(r,n);return{start:e,end:i,direction:o?this._bisectVectorsPerpendicular(n,r):r,isOriginalDirection:!o}}return this._helper.hasZ()?s&&(Yr(r,n,s.direction),Yr(r,r,n),Co(r,r),Math.sign(r[1])!==Math.sign(n[0])&&Yc(r,r,-1)):Gs(r,-n[1],n[0],0),{start:e,end:i,direction:r,isOriginalDirection:!0}}_passesBisectingAngleThreshold(e,i){const n=Math.abs(Cge(i,e));return n>=dte&&n<=Math.PI-dte}_bisectVectorsPerpendicular(e,i){const n=Pn(e,i)<0?e:fz($t(),e),s=Math.abs(Pn(n,i));if(!(s<fte||s>1-fte))return this._bisectDirection(n,i);const r=Yr($t(),n,[0,0,1]);return Co(r,r)}_bisectDirection(e,i){const n=tc($t(),e,i);return Co(n,n)}_initializePlane(){const e=this._computeNormalDirection(this._left),i=this._computeNormalDirection(this._right);Pn(e,i)<0&&fz(i,i),Gx(this._left.start,this._bisectDirection(e,i),this._plane)}_computeNormalDirection(e){const i=Yr($t(),e.direction,this._edgeDirection);Co(i,i);const n=Yr($t(),this._edgeDirection,i);return this._planeType===Tz.XY&&(n[2]=0),Co(n,n)}_initializeDistanceConstraints(){this._left.end==null||this.requiresSplitEdgeLeft||this._updateDistanceConstraint(hf(this._plane,this._left.end)),this._right.end==null||this.requiresSplitEdgeRight||this._updateDistanceConstraint(hf(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const i=e,n=this._edgeDirection,s=tc($t(),this._left.start,this._left.direction),r=tc($t(),this._right.start,this._right.direction),o=this._pointInBasis2D(_r(),i,n,this._left.start),l=this._pointInBasis2D(_r(),i,n,s),c=this._pointInBasis2D(_r(),i,n,this._right.start),f=this._pointInBasis2D(_r(),i,n,r),[y]=$Ye({start:l,end:o,type:Vs.LINE},{start:f,end:c,type:Vs.LINE});if(!y)return;const _=To(_r(),o,l);Xme(_,_);const x=To(_r(),y,l),S=t1(_,x),P=tc($t(),s,Yc($t(),this._left.direction,-S)),A=hf(e,P);this._updateDistanceConstraint(A)}_pointInBasis2D(e,i,n,s){return e[0]=uE(i,s),e[1]=uE(n,s),e}_offset(e,i){Number.isFinite(this._minDistance)&&(i=Math.max(this._minDistance,i)),Number.isFinite(this._maxDistance)&&(i=Math.min(this._maxDistance,i)),e9(this._offsetPlane,this._plane),this._offsetPlane[3]-=i;const n=(r,o,l)=>o!=null&&Ij(this._offsetPlane,r,tc($t(),r,o),l),s=$t();(e===this._edge.leftVertex?n(this._left.start,this._left.direction,s):n(this._right.start,this._right.direction,s))&&this._helper.copy(this._helper.fromXYZ(s,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=Mge(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return hf(this.plane,this._pointToXYZ(e))}clampedStartAndEnd(e){const i=this._helper.toXYZ(this._helper.pointToVector(e)),n=Mj(this._plane,i,$t()),s=hf(this._plane,i),r=Qu(s,this._minDistance,this._maxDistance);return qx(i,n,i,r/s),{start:n,end:i}}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof Pz&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&UE(this._plane,e._plane)}accumulate(e,i){const n=this._plane[3]-i._plane[3]+i.distance;this._offset(e,n)}accumulateParams(e){const i=e.distance-e._plane[3];this.distance=i+this._plane[3]}clone(){const e=new Pz(this._helper,this._planeType,this._edge,this.distance,hE.DEFERRED);return e9(e._plane,this._plane),e9(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=rc($t(),this._edgeDirection),e}_maybeEqualsVec3(e,i){return e==null&&i==null||e!=null&&i!=null&&UE(e,i)}_cloneNeighbor({start:e,end:i,direction:n,isOriginalDirection:s}){return{start:rc($t(),e),end:i!=null?rc($t(),i):null,direction:rc($t(),n),isOriginalDirection:s}}};const dte=uhe(15),fte=.001;var Tz,hE;(function(t){t[t.XYZ=0]="XYZ",t[t.XY=1]="XY"})(Tz||(Tz={})),function(t){t[t.IMMEDIATE=0]="IMMEDIATE",t[t.DEFERRED=1]="DEFERRED"}(hE||(hE={}));let gWe=class T0e{constructor(e,i,n=Gu.CUMULATIVE){this.origin=e,this.angle=i,this._accumulationType=n}_rotate(e,i){Wme(e.pos,e.pos,this.origin,i)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof T0e&&wf(this.origin,e.origin)}accumulate(e,i){const n=i._accumulationType===Gu.REPLACE;this._rotate(e,n?i.angle-this.angle:i.angle)}accumulateParams(e){const i=e._accumulationType===Gu.REPLACE;this.angle=i?e.angle:this.angle+e.angle}},yWe=class I0e{constructor(e,i,n,s,r=Gu.CUMULATIVE){this.origin=e,this.axis1=i,this.factor1=n,this.factor2=s,this._accumulationType=r,this.axis2=Xu(i[1],-i[0])}_scale(e,i,n){dz(e.pos,e.pos,this.origin,this.axis1,i),dz(e.pos,e.pos,this.origin,this.axis2,n)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof I0e&&wf(this.origin,e.origin)&&wf(this.axis1,e.axis1)}accumulate(e,i){i._accumulationType===Gu.REPLACE?this._scale(e,i.factor1/this.factor1,i.factor2/this.factor2):this._scale(e,i.factor1,i.factor2)}accumulateParams(e){const i=e._accumulationType===Gu.REPLACE;this.factor1=i?e.factor1:this.factor1*e.factor1,this.factor2=i?e.factor2:this.factor2*e.factor2}},vWe=class M0e{constructor(e,i){this._editGeometry=e,this._newPositions=i}apply(){const e=this._originalPositions==null?"apply":"redo";if(!this._originalPositions){const i=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map(n=>i.clone(n.pos))}this._apply(e,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(e){return e instanceof M0e&&(this._newPositions=e._newPositions,this._apply("apply",this._newPositions),!0)}_apply(e,i){const n=this._editGeometry.coordinateHelper,s=this._editGeometry.allVertices;for(let r=0;r<s.length;r++)n.copy(i[r],s[r].pos);this._editGeometry.components.forEach(r=>r.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:s})}};var A0e;const _We=Symbol();let bWe=class{constructor(e){this._operations=[],this._closed=!1,this[A0e]=!0,e&&(this._operations=e,this._closed=!0)}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const i=this._operations.length?this._operations[this._operations.length-1]:null;return i&&i.accumulate(e)||(this._operations.push(e),e.apply()),!0}};A0e=_We;let Iz=class k0e extends Ia{constructor(e,i){super(),this.data=e,this.viewingMode=i,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",n=>{n.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:n.addedVertices,operation:n.operation}),n.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:n.removedVertices,operation:n.operation}),n.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:n.updatedVertices,operation:n.operation})})}destroy(){this._listener.remove()}splitEdge(e,i){return this._apply(new hWe(this.data,e,i))}updateVertices(e,i,n=Ul.ACCUMULATE_STEPS){return this._apply(new cWe(this.data,e,i),n)}move(e,i,n,s=Ul.ACCUMULATE_STEPS){return m3(this.data)?this._apply(new hte(this.data,e,i,n),s):this.moveVertices(this.data.allVertices,e,i,n,s)}moveVertices(e,i,n,s,r=Ul.ACCUMULATE_STEPS){return m3(this.data)?this._apply(new hte(this.data,i,n,s),r):this.updateVertices(e,new pWe(this.data.coordinateHelper,i,n,s),r)}scale(e,i,n,s,r=Ul.ACCUMULATE_STEPS,o=Gu.CUMULATIVE){return this.scaleVertices(this.data.allVertices,e,i,n,s,r,o)}scaleVertices(e,i,n,s,r,o=Ul.ACCUMULATE_STEPS,l=Gu.CUMULATIVE){return this.updateVertices(e,new yWe(i,n,s,r,l),o)}rotate(e,i,n=Ul.ACCUMULATE_STEPS,s=Gu.CUMULATIVE){return this.rotateVertices(this.data.allVertices,e,i,n,s)}rotateVertices(e,i,n,s=Ul.ACCUMULATE_STEPS,r=Gu.CUMULATIVE){return this.updateVertices(e,new gWe(i,n,r),s)}removeVertices(e){return this._apply(new uWe(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return this.data.components.length===0?null:this._apply(new lWe(this.data,this.data.components[0],e))}setVertexPosition(e,i){return this._apply(new dWe(this.data,e,i))}offsetEdge(e,i,n,s=Ul.ACCUMULATE_STEPS){return this.updateVertices([i.leftVertex,i.rightVertex],new mWe(this.data.coordinateHelper,e,i,n),s)}trySetGeometry(e,i=Ul.ACCUMULATE_STEPS){const{data:n}=this,{coordinateHelper:s}=n;if(n.type!==e.type||!n.spatialReference.equals(e.spatialReference)||s.hasZ()!==e.hasZ||s.hasM()!==e.hasM||!TDe(n.geometry,e)||m3(n))return;const r=Array.from(Cz.fromGeometry(e,this.viewingMode).iterateVertices(),o=>o.pos);return this.setVertexPositions(r,i)}setVertexPositions(e,i=Ul.ACCUMULATE_STEPS){return this._apply(new vWe(this.data,e),i)}createResetState(){if(m3(this.data))return this._createResetStateMesh();const e=this.data.geometry.clone();return fn(()=>this.trySetGeometry(e))}closeComponent(e){return this.data.components.includes(e)?this._apply(new fWe(this.data,e)):null}canRemoveVertex(e){return e.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new bWe;return this._apply(e),fn(()=>e.close())}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,i=Ul.ACCUMULATE_STEPS){return i!==Ul.NEW_STEP&&this.lastOperation!=null&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}_createResetStateMesh(){if(!m3(this.data))return fn();const e=this.data.geometry,{vertexSpace:i}=e;if(i.origin){const s=cc(i.origin);return fn(()=>{e.vertexSpace.origin=s})}const n=e.vertexAttributes.clonePositional();return fn(()=>{e.vertexAttributes=n,e.vertexAttributesChanged()})}static fromGeometry(e,i){return new k0e(Cz.fromGeometry(e,i),i)}};function xWe(t,e){let i=null,n=null;return s=>{if(s.action==="cancel")return void(n!=null&&(n.execute({action:"cancel"}),i=null,n=null));const r={action:s.action,screenStart:s.start,screenEnd:s.screenPoint};s.action==="start"&&i==null&&(i=new Mz,n=new Mz,e(t,i,n,s.pointerType,r)),i!=null&&i.execute(r),s.action==="end"&&i!=null&&(i=null,n=null)}}function zN(t,e){return t.events.on("drag",xWe(t,e))}function I_t(t,e){const i=[t.x,t.y,t.z??0],n=e,s=[Math.cos(n),Math.sin(n)],r=Math.sqrt(s[0]*s[0]+s[1]*s[1]);if(r===0)return null;s[0]/=r,s[1]/=r;const o=l=>{const c=(l.x-i[0])*s[0]+(l.y-i[1])*s[1];l.x=i[0]+c*s[0],l.y=i[1]+c*s[1]};return l=>(o(l.mapStart),o(l.mapEnd),{...l,axis:s})}function wWe(t){let e=null;return i=>{if(i.action==="start"&&(e=SWe(t,i.mapStart.spatialReference)),e==null)return null;const n=i.mapEnd.x-i.mapStart.x,s=i.mapEnd.y-i.mapStart.y,r=(i.mapEnd.z??0)-(i.mapStart.z??0);return e.move(n,s,r,i.action),{...i,translationX:n,translationY:s,translationZ:r}}}function pte(t,e){return t==null?null:t.spatialReference.equals(e)?t.clone():Ef(t,e)}function SWe(t,e){const i=t.operations;if(!i)return null;const n=i.data.geometry,s=nWe(e);if(n.spatialReference.equals(s))return qN(t,i,()=>{});if(n.type!=="mesh"){const r=pte(n,s);if(r==null)return null;const o=n.spatialReference;return qN(t,Iz.fromGeometry(r,i.viewingMode),()=>{const l=Ef(n,o);i.trySetGeometry(l)})}if(WXe(n)){const r=pte(n.origin,s);if(!r)return null;const o=n.spatialReference,l=Iz.fromGeometry(r,i.viewingMode);return qN(t,i,()=>{const c=Ef(l.data.geometry,o),f=c.x-n.origin.x,y=c.y-n.origin.y,_=(c.z??0)-(n.origin.z??0);i.move(f,y,_)})}return null}function qN(t,e,i){let n=0,s=0,r=0;return{move:(o,l,c,f)=>{var S;f==="start"&&(n=0,s=0,r=0);const y=o-n,_=l-s,x=c-r;e.move(y,_,x),n+=y,s+=_,r+=x,i(),f==="end"&&((S=t.endInteraction)==null||S.call(t))}}}function M_t(t,e=null,i){var o;let n=null;const s=e==null||(o=t.spatialReference)!=null&&o.equals(e)?l=>l:l=>l!=null?Ef(l,e):l,r={exclude:[],...i};return l=>{if(l.action==="start"&&(n=s(t.toMap(l.screenStart,r))),n==null)return null;const c=s(t.toMap(l.screenEnd,r));return c!=null?{...l,mapStart:n,mapEnd:c}:null}}function A_t(t){const e=t.map(i=>wWe(i)).filter(xl);return i=>{const n=i.mapEnd.x-i.mapStart.x,s=i.mapEnd.y-i.mapStart.y,r=i.mapEnd.z-i.mapStart.z;return e.forEach(o=>o(i)),{...i,translationX:n,translationY:s,translationZ:r}}}function EWe(t){var i;const e=(i=t.operations)==null?void 0:i.createResetState();return n=>(e==null||e.remove(),n)}function k_t(t){const e=t.map(i=>EWe(i)).filter(i=>i!=null);return i=>(e.forEach(n=>n(i)),i)}function D_t(){let t=0,e=0,i=0;return n=>{n.action==="start"&&(t=n.mapStart.x,e=n.mapStart.y,i=n.mapStart.z);const s=n.mapEnd.x-t,r=n.mapEnd.y-e,o=n.mapEnd.z-i;return t=n.mapEnd.x,e=n.mapEnd.y,i=n.mapEnd.z,{...n,mapDeltaX:s,mapDeltaY:r,mapDeltaZ:o,mapDeltaSpatialReference:n.mapStart.spatialReference}}}function N_t(){let t=0,e=0;return i=>{i.action==="start"&&(t=i.screenStart.x,e=i.screenStart.y);const n=i.screenEnd.x-t,s=i.screenEnd.y-e;return t=i.screenEnd.x,e=i.screenEnd.y,{...i,screenDeltaX:n,screenDeltaY:s}}}function O_t(t,e){let i=null,n=0,s=0;return r=>{var f;if(r.action==="start"&&(i=(f=t.toScreen)==null?void 0:f.call(t,e),i!=null&&(i.x<0||i.x>t.width||i.y<0||i.y>t.height?i=null:(n=r.screenStart.x-i.x,s=r.screenStart.y-i.y))),i==null)return null;const o=Qu(r.screenEnd.x-n,0,t.width),l=Qu(r.screenEnd.y-s,0,t.height),c=am(o,l);return r.screenStart=i,r.screenEnd=c,r}}const CWe=()=>{};let Mz=class D0e{constructor(){this.execute=CWe}next(e,i=new D0e){return e!=null&&(this.execute=n=>{const s=e(n);s!=null&&i.execute(s)}),i}};function PWe(t,e,i=[]){if(t.type==="2d")return s=>s;let n=null;return s=>{s.action==="start"&&(n=t.toMap(s.screenStart,{exclude:i}),n!=null&&(n.z=q6(n,t,e)));const r=t.toMap(s.screenEnd,{exclude:i});r!=null&&(r.z=q6(r,t,e));const o=n!=null&&r!=null?{sceneStart:n,sceneEnd:r}:null;return{...s,scenePoints:o}}}function mte(t,e,i){const n=e.elevationProvider.getElevation(t.x,t.y,t.z??0,t.spatialReference,"scene")??0,s=p7(t);return s.z=n,s.hasZ=!0,s.z=q6(s,e,i),s}function $_t(t,e){if(t.type==="2d")return n=>n;let i=null;return n=>{n.action==="start"&&(i=mte(n.mapStart,t,e));const s=mte(n.mapEnd,t,e),r=i!=null&&s!=null?{sceneStart:i,sceneEnd:s}:null;return{...n,scenePoints:r}}}function R_t(t,e,i,n,s,r){let o="geodesic",l=z6(i);const c=Io();return f0(t,e,n,c),c[2]=0,l&&F0(c,i,c,l)||(o="euclidean",l=i),{mode:o,view:e,elevationInfo:n,hasZ:s,directionMode:r,spatialReference:t.spatialReference,measurementSR:l,origin:c}}function TWe(t,e,i){if(e==null||t==null)return;const n=c6e(i.measurementSR);if(n==null)return;const s=g7(t,i);if(s==null)return;const r=YA(e,n);return new Lj(s,r)}function IWe(t,e,i,n){if(i==null||t==null)return;const s=g7(t,n);if(s==null)return;const r=Tf(i),o=10,l=f=>{if(f==null)return;const y=Io(),_=Pf(f,"degrees","geographic");return MHe(y,s,n.measurementSR,o,_,n.mode)?new WYe(s,y):void 0},c=()=>{if(e!=null&&t!=null)return Tf(xj(e,t))};switch(n.directionMode){case lo.Absolute:return l(r);case lo.Relative:{const f=c();return f==null?void 0:l(f+r)}case lo.RelativeBilateral:{const f=c();return f==null?void 0:E5([l(f+r),l(f-r)])}}}function N0e(t,e){const i=y7(t,e);return i!=null?new e0e(i):void 0}function O0e(t,e,i){const{context:n,longitude:s,latitude:r,direction:o,distance:l,elevation:c}=i;if(s!=null||r!=null||l!=null||c!=null||o!=null){if(s!=null||r!=null){const f=Tf(s),y=Tf(r),_=y7(c,n);return new Vj(f,y,_)}return MWe(t,e,i)}}function MWe(t,e,{context:i,direction:n,distance:s,elevation:r}){if(e==null)return N0e(r,i);const{view:o,elevationInfo:l,measurementSR:c}=i,f=f0(e,o,l);if(!c||!F0(f,e.spatialReference,gte,c))return;const[y,_]=gte,x=s!=null?YA(s,"meters"):void 0,S=Tf(n),P=y7(r,i),A=N=>{const F=new n0e([y,_],c,x,P,N);return x==null||N==null||P==null&&i.hasZ?F:new Zv(F.closestTo(f))};if(S==null)return A(void 0);const D=()=>{if(t!=null&&e!=null)return Tf(xj(t,e))};switch(i.directionMode){case lo.Absolute:return A(S);case lo.Relative:{const N=D();return N==null?void 0:A(N+S)}case lo.RelativeBilateral:{const N=D();return N==null?void 0:E5([A(N+S),A(N-S)])}}}function AWe(t){return t.context.mode==="geodesic"?O0e(null,null,t):$0e(t)}function kWe(t,e,i){const{context:n,x:s,y:r,distance:o,direction:l,elevation:c}=i;return n.mode==="geodesic"?O0e(e,t,i):s!=null||r!=null?$0e(i):DWe([TWe(t,o,n),IWe(t,e,l,n),N0e(c,n)])}function $0e({x:t,y:e,elevation:i,context:n}){lT.x=(t==null?void 0:t.value)??0,lT.y=(e==null?void 0:e.value)??0,lT.spatialReference=n.spatialReference;const s=g7(lT,n,$We);return new Vj(t!=null&&s!=null?s[0]:void 0,e!=null&&s!=null?s[1]:void 0,y7(i,n))}function DWe(t){let e;for(const i of t)i&&(e=(e==null?void 0:e.intersect(i))??i);return e}function g7(t,e,i=Io()){const{view:n,elevationInfo:s,measurementSR:r,origin:o,mode:l}=e;if(f0(t,n,s,i),F0(i,t.spatialReference,i,r))return l!=="geodesic"&&zr(i,i,o),i}function NWe(t,e,i,n){const{view:s,measurementSR:r,spatialReference:o,origin:l,mode:c}=i;if(c==="geodesic"?rc(g3,t):tc(g3,t,l),F0(g3,r,g3,o))return vz(g3,s,e,i,n)}function y7(t,e){var i;return((i=OWe(t,e))==null?void 0:i.value)??void 0}function OWe(t,{view:e,origin:i,elevationInfo:n,hasZ:s,measurementSR:r}){if(t==null||!s)return;const o=Wle(r);if(o==null)return;const[l,c]=i,f=YA(t,o),y=(e==null?void 0:e.type)==="3d"?t7(e,l,c,f,r,n):f;return y!=null?Gme(y,o):void 0}const gte=Io(),$We=Io(),g3=Io(),lT=Ff(0,0,0,Gi.WGS84);let Az=class{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ,this.drawConstraints=e.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}};const R0e=Symbol("Yield");let RWe=class{constructor(){this._tasks=new Array,this._runningTasks=V6(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return R0e;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,n){return++this._runningTasks.value,new Promise((s,r)=>this._tasks.push(new yte(s,r,e,i,n))).finally(()=>--this._runningTasks.value)}unshift(e,i,n){return++this._runningTasks.value,new Promise((s,r)=>this._tasks.unshift(new yte(s,r,e,i,n))).finally(()=>--this._runningTasks.value)}_process(e){var n;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const s=jc(i.signal);if(s&&!i.abortCallback)i.reject(lr());else{const r=s?(n=i.abortCallback)==null?void 0:n.call(i,lr()):i.callback(e);zv(r)?r.then(i.resolve,i.reject):i.resolve(r)}}catch(s){i.reject(s)}return!0}cancelAll(){const e=lr();for(const i of this._tasks)if(i.abortCallback){const n=i.abortCallback(e);i.resolve(n)}else i.reject(e);this._tasks.length=0}},yte=class{constructor(e,i,n,s=void 0,r=void 0){this.resolve=e,this.reject=i,this.callback=n,this.signal=s,this.abortCallback=r}},CS=class extends Ei{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};I([O()],CS.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),I([O()],CS.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),CS=I([De("esri.views.support.debugFlags")],CS);const LWe=new CS;var Ic;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(Ic||(Ic={}));function V_t(){return new Z6.Scheduler}var $i;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})($i||($i={}));const Iu=0,vte=new Map([[$i.RESOURCE_CONTROLLER_IMMEDIATE,Iu],[$i.RESOURCE_CONTROLLER,4],[$i.SLIDE,Iu],[$i.STREAM_DATA_LOADER,Iu],[$i.ELEVATION_QUERY,Iu],[$i.TERRAIN_SURFACE,1],[$i.SURFACE_GEOMETRY_UPDATES,1],[$i.LOD_RENDERER,2],[$i.GRAPHICS_CORE,2],[$i.I3S_CONTROLLER,2],[$i.POINT_CLOUD_LAYER,2],[$i.FEATURE_TILE_FETCHER,2],[$i.CLOUDS_GENERATOR,2],[$i.OVERLAY,4],[$i.STAGE,4],[$i.GRAPHICS_DECONFLICTOR,4],[$i.FILTER_VISIBILITY,4],[$i.SCALE_VISIBILITY,4],[$i.FRUSTUM_VISIBILITY,4],[$i.POINT_OF_INTEREST_FREQUENT,6],[$i.POINT_OF_INTEREST_INFREQUENT,30],[$i.LABELER,8],[$i.FEATURE_QUERY_ENGINE,8],[$i.FEATURE_TILE_TREE,16],[$i.FEATURE_TILE_TREE_ACTIVE,Iu],[$i.ELEVATION_ALIGNMENT,12],[$i.ELEVATION_ALIGNMENT_SCENE,14],[$i.TEXT_TEXTURE_ATLAS,12],[$i.TEXTURE_UNLOAD,12],[$i.LINE_OF_SIGHT_TOOL,16],[$i.LINE_OF_SIGHT_TOOL_INTERACTIVE,Iu],[$i.SNAPPING,Iu],[$i.SHADOW_ACCUMULATOR,30],[$i.MAPVIEW_FETCH_QUEUE,Iu],[$i.MAPVIEW_LAYERVIEW_UPDATE,2],[$i.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Iu]]);function _te(t){return vte.has(t)?vte.get(t):typeof t=="number"?t:1}const FWe=6.5,bte=1,zWe=30,qWe=1e3/30,VWe=100,xte=.9;var Z6,L1;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(r=>r.needsUpdate)}constructor(){this._updating=V6(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new zS("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=Ic.INTERACTING,this._tasks=new Yy,this._runQueue=new Yy,this._load=0,this._idleStateCallbacks=new Yy,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=xi(()=>LWe.SCHEDULER_LOG_SLOW_TASKS,r=>this._debug=r,ec);for(const r of Object.keys($i))this.performanceInfo.tasks.set($i[r],new zS($i[r]))}destroy(){this._tasks.toArray().forEach(r=>r.remove()),this._tasks.clear(),Po(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(r){this._updatingChanged(),r&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(r,o){const l=new i(this,r,o);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(r)||this.performanceInfo.tasks.set(r,new zS(r)),l}registerIdleStateCallbacks(r,o){const l={idleBegin:r,idleEnd:o};this._idleStateCallbacks.push(l),this.state===Ic.IDLE&&this._idleUpdatesStartFired&&l.idleBegin();const c=this;return{remove:()=>this._removeIdleStateCallbacks(l),set idleBegin(f){c._idleUpdatesStartFired&&(l.idleEnd(),c._state===Ic.IDLE&&f()),l.idleBegin=f},set idleEnd(f){l.idleEnd=f}}}get load(){return this._load}set state(r){this._state!==r&&(this._state=r,this.state!==Ic.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(r){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=FWe,l=r.frameDuration,c=bte;switch(this.state){case Ic.IDLE:o=0,l=Math.max(VWe,r.frameDuration),c=zWe;break;case Ic.INTERACTING:l=Math.max(qWe,r.frameDuration);case Ic.ANIMATING:}return l=l-r.elapsedFrameTime-o,this.state!==Ic.IDLE&&l<bte&&!this._forceTask?(this._forceTask=!0,!1):(l=Math.max(l,c),this._budget.reset(l,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Ic.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(r=>r.idleBegin())),this._runIdle();break;case Ic.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(r){this._idleUpdatesStartFired&&r.idleEnd(),this._idleStateCallbacks.removeUnordered(r)}removeTask(r){this._tasks.removeUnordered(r),this._runQueue.removeUnordered(r),this._updatingChanged()}_updateTask(r){this._tasks.forAll(o=>{o.name===r&&o.setPriority(r)})}_getState(r){if(this._runQueue.some(l=>l.name===r))return L1.SCHEDULED;let o=L1.IDLE;return this._tasks.forAll(l=>{l.name===r&&l.needsUpdate&&(l.schedulePriority<=1?o=L1.READY:o!==L1.READY&&(o=L1.WAITING))}),o}_getRuntime(r){let o=0;return this._tasks.forAll(l=>{l.name===r&&(o+=l.runtime)}),o}_resetRuntimes(){this._tasks.forAll(r=>r.runtime=0)}_getRunning(){const r=new Map;if(this._tasks.forAll(l=>{l.needsUpdate&&r.set(l.name,(r.get(l.name)||0)+1)}),r.size===0)return null;let o="";return r.forEach((l,c)=>{o+=l>1?` ${l}x ${c}`:` ${c}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const r=this._tasks.reduce((o,l)=>l.needsUpdate?++o:o,0);this._load=this._load*xte+r*(1-xte)}_schedule(){for(this._runQueue.filterInPlace(r=>!!r.needsUpdate||(r.schedulePriority=r.basePriority,!1)),this._tasks.forAll(r=>{r.basePriority===Iu&&r.needsUpdate&&!this._runQueue.includes(r)&&r.blockFrame!==this._frameNumber&&this._runQueue.unshift(r)});this._runQueue.length===0;){let r=!1,o=0;if(this._tasks.forAll(l=>{l.needsUpdate&&l.schedulePriority!==0&&l.basePriority!==Iu&&l.blockFrame!==this._frameNumber&&(r=!0,o=Math.max(o,l.basePriority),l.schedulePriority===1?(l.schedulePriority=0,this._runQueue.push(l)):--l.schedulePriority)}),!r)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const r=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),l=this._runQueue.pop();this._budget.resetProgress();try{l.task.runTask(this._budget)===R0e&&(l.blockFrame=this._frameNumber)}catch(f){qt.getLogger("esri.views.support.Scheduler").error(`Exception in task "${l.name}"`,f),l.blockFrame=this._frameNumber}!this._budget.hasProgressed&&l.blockFrame!==this._frameNumber&&l.needsUpdate&&(l.name,$i.I3S_CONTROLLER,l.blockFrame=this._frameNumber),l.schedulePriority=l.basePriority;const c=this._budget.now()-o;if(l.runtime+=c,this._frameTaskTimes.set(l.priority,this._frameTaskTimes.get(l.priority)+c),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-r)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-r)}_startFrameTaskTimes(){for(const r of Object.keys($i))this._frameTaskTimes.set($i[r],0)}_recordFrameTaskTimes(r){this._frameTaskTimes.forEach((o,l)=>this.performanceInfo.tasks.get(l).push(o)),this.performanceInfo.total.push(r)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(r,o,l){this._scheduler=r,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new RWe,this._handles=new GM,this._basePriority=_te(o),this.schedulePriority=this._basePriority,this._task=V6(l??this._queue),this._handles.add(D0(()=>this.task.running,c=>r.taskRunningChanged(c)))}remove(){this.processQueue(L0e),this._scheduler.removeTask(this),this.schedule=K6.schedule,this.reschedule=K6.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(r){if(this.name===r)return;this.name=r;const o=_te(r);this._basePriority!==Iu&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(r){this.setPriority(r)}get needsUpdate(){return this.updating||this.task.running}schedule(r,o,l){return this._queue.push(r,o,l)}reschedule(r,o,l){return this._queue.unshift(r,o,l)}processQueue(r){return this._queue.runTask(r)}}class n{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Ic.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(r){return!this.done&&(r()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(r){this._enabled=r}reset(r,o){this._begin=this.now(),this._budget=r,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=n})(Z6||(Z6={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(L1||(L1={}));const L0e=(()=>{const t=new Z6.Budget;return t.enabled=!1,t})();let GWe=class{remove(){}processQueue(){}schedule(e,i,n){try{if(jc(i)){const s=lr();return n?Promise.resolve(n(s)):Promise.reject(s)}return o$(e(L0e))}catch(s){return Promise.reject(s)}}reschedule(e,i,n){return this.schedule(e,i,n)}};const K6=new GWe;function jWe({predicate:t=()=>!0,snappingManager:e,snappingContext:i,updatingHandles:n,useZ:s=!0}){const r=new Mz;if(e==null)return{snappingStep:[wte,r],cancelSnapping:wte};let o,l=null,c=null,f=null;const y=()=>{l=_0(l),e.doneSnapping(),c==null||c.frameTask.remove(),c=null,o=Po(o),f=null},_=BWe(e,s,r);let x=null,S=null,P=null;return{snappingStep:[A=>{if(!t(A))return A;const{action:D}=A;if(D==="start"){const{info:N}=A,F=HWe(e.view);if(c=UWe(i,A,F),c.context.selfSnappingZ=null,!s&&N!=null){const G=XWe(i.coordinateHelper,N.handle.component);G!=null&&(c.context.selfSnappingZ={value:G,elevationInfo:i.elevationInfo??z0})}}if(c!=null){const{context:N,originalScenePos:F,originalPos:G}=c,{mapEnd:V,mapStart:B,scenePoints:W}=A,J=F0e(G,kz(V,B)),re=kz(B,G),ne={...A,action:"update"},oe=c.context,pe=YWe(F,W),ce=e.update({point:J,scenePoint:pe,context:N});if(P=ce,z0e(V,ce,re,s),x=J,S=pe,D!=="end"){const{frameTask:ue}=c;l==null&&(l=new AbortController),f=se=>{n.addPromise(ad(_({frameTask:ue,event:ne,context:oe,point:J,scenePoint:pe,delta:re,getLastState:()=>({point:x,scenePoint:S,updatePoint:se.forceUpdate?null:P})},l.signal)))},f({forceUpdate:!1}),o==null&&(o=xi(()=>e.options.effectiveEnabled,()=>f==null?void 0:f({forceUpdate:!0})))}}return D==="end"&&y(),A},r],cancelSnapping:A=>(y(),A)}}function BWe(t,e,i){return qv(async({frameTask:n,point:s,scenePoint:r,context:o,event:l,delta:c,getLastState:f},y)=>{const _=await n.schedule(()=>t.snap({point:s,scenePoint:r,context:o,signal:y}),y);if(_.valid){let x=await n.schedule(()=>_.apply(),y);const S=f();S.point!=null&&s!==S.point&&(x=t.update({point:S.point,scenePoint:S.scenePoint,context:o})),S.updatePoint!=null&&r9(x,S.updatePoint)||(z0e(l.mapEnd,x,c,e),i.execute(l))}})}function HWe(t){return t.type==="3d"?t.resourceController.scheduler.registerTask($i.SNAPPING):K6}function UWe(t,e,i){return{context:new Az({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:e.info!=null?e.info.handle:null,excludeFeature:t.excludeFeature,feature:t.feature,visualizer:t.visualizer}),originalPos:e.snapOrigin!=null?t.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:e.scenePoints!=null?e.scenePoints.sceneStart:null,frameTask:i}}function F0e(t,[e,i,n]){const s=p7(t);return s.x+=e,s.y+=i,s.hasZ&&(s.z+=n),s}function YWe(t,e){return t==null||e==null?null:F0e(t,kz(e.sceneEnd,e.sceneStart))}function kz(t,e){const i=t.hasZ&&e.hasZ?t.z-e.z:0;return[t.x-e.x,t.y-e.y,i]}function z0e(t,e,[i,n,s],r){t.x=e.x+i,t.y=e.y+n,r&&t.hasZ&&e.hasZ&&(t.z=e.z+s)}function XWe(t,e){if(!t.hasZ())return null;const i=e.vertices;let n=null;for(const s of i){const r=t.getZ(s.pos);if(n!=null&&r!=null&&Math.abs(r-n)>1e-6)return null;n==null&&(n=r)}return n}function wte(t){return t}let xy=class extends Ei{constructor(e){super(e),this.constrainResult=i=>i,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=qv(async(i,n,s,r)=>{const o=this._frameTask;if(o==null)return;const l=await o.schedule(()=>n.snap({...i,context:s,signal:r}),r);l.valid&&await o.schedule(()=>{this.stagedPoint=l.apply(),i!==this._snapPoints&&this._snapPoints!=null&&(this.stagedPoint=n.update({...this._snapPoints,context:s}))},r)})}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){var i,n;const e=this.view.type==="3d"?(n=(i=this.view)==null?void 0:i.resourceController)==null?void 0:n.scheduler:null;this._frameTask=e!=null?e.registerTask($i.SNAPPING):K6}destroy(){this._abortController=_0(this._abortController),this._frameTask=Po(this._frameTask)}update(e,i,n){this._snapPoints=e;const{point:s,scenePoint:r}=e,o=i.update({point:s,scenePoint:r,context:n});return this.stagedPoint=o,o}async snap(e,i,n){const{point:s,scenePoint:r}=e;return this.stagedPoint=i.update({point:s,scenePoint:r,context:n}),this._snapPoints=e,this._abortController==null&&(this._abortController=new AbortController),this._snap(e,i,n,this._abortController.signal)}async snapAgainNearPreviousMapPoint(e,i){this._snapPoints!=null&&await this.snap(this._snapPoints,e,i)}abort(){this._abortController=_0(this._abortController),this._snapPoints=null}};I([O({constructOnly:!0})],xy.prototype,"view",void 0),I([O()],xy.prototype,"stagedPoint",null),I([O()],xy.prototype,"constrainResult",void 0),I([O()],xy.prototype,"_stagedPoint",void 0),xy=I([De("esri.views.interactive.snapping.SnappingOperation")],xy);const WWe="crosshair",ZWe="progress",Ste=Symbol(),Ete=Symbol();let an=class extends Ia.EventedMixin(Ei){constructor(e){super(e),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new jXe,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new s9,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=rte(AWe),this._getPolylineOrPolygonConstraint=rte(kWe),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new b5,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,e.elevationInfo==null&&(this.elevationInfo=mge(!!e.hasZ))}initialize(){const{geometryType:e,view:i}=this,n=i.spatialReference,s="viewingMode"in i.state?i.state.viewingMode:XE.Local,r=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=_0e(this.hasZ,this.hasM,n),this._editGeometryOperations=new Iz(new Cz(r,this.coordinateHelper),s),this._snappingOperation=new xy({view:i}),this.addHandles([xi(()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint}),({stagedPoint:c,constraint:f},y)=>{const{snappingOptions:_}=this;if(_&&(_.forceDisabled=f!=null&&Tu(f)),y!=null&&c===y.stagedPoint&&f!==y.constraint)return this._onKeyboardBasedChange();this._processCursor(c??this._screenToMap(this._stagedScreenPoint))},{equals:(c,f)=>c.stagedPoint===f.stagedPoint&&wae(c.constraint,f.constraint)}),xi(()=>this.view.viewpoint,(c,f)=>{c&&f&&Jpe(c,f)&&this._onKeyboardBasedChange()})]),this._activeComponent=new m7(n,s),this._editGeometryOperations.data.components.push(this._activeComponent);const o=this.segmentLabels;o!=null&&(o.context={view:i,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles(xi(()=>this.labelOptions.enabled,c=>{o.visible=c},ac))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],c=>{var P,A,D,N;const f=c.vertices.map(F=>({componentIndex:0,vertexIndex:F.index,coordinates:this.coordinateHelper.vectorToArray(F.pos)})),y=f.map(F=>F.coordinates),_=this.coordinateHelper.vectorToDehydratedPoint((P=this._activeComponent.getFirstVertex())==null?void 0:P.pos)??null;r9(_,this.firstVertex)||(this.firstVertex=_);const x=this.coordinateHelper.vectorToDehydratedPoint((A=this._activeComponent.getLastVertex())==null?void 0:A.pos)??null;r9(x,this.lastVertex)||(this.lastVertex=x);const S=this.coordinateHelper.vectorToDehydratedPoint((N=(D=this._activeComponent.edges.at(-1))==null?void 0:D.leftVertex)==null?void 0:N.pos)??null;switch(r9(S,this.secondToLastVertex)||(this.secondToLastVertex=S),this._processCursor(this.cursorVertex),c.type){case"vertex-add":this.emit(c.type,{...c,added:y,vertices:f});break;case"vertex-update":this.emit(c.type,{...c,updated:y,vertices:f});break;case"vertex-remove":this.emit(c.type,{...c,removed:y,vertices:f})}}));const l=this._manipulator=new BXe({consumesClicks:!1,grabbableForEvent:c=>this.drawingMode!=="click"||c.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1});this.manipulators.add(l),l.grabbable=e!=="point",this.addHandles([l.events.on("immediate-click",c=>this._onImmediateClick(c)),l.events.on("immediate-double-click",c=>this._onImmediateDoubleClick(c)),xi(()=>this.drawingMode,()=>{this.removeHandles(Ste),this.addHandles(this._createManipulatorDragPipeline(l),Ste)},ac),xi(()=>({effectiveCursor:this.effectiveCursor}),({effectiveCursor:c})=>{l.cursor=c},ac)]),Ege(this,()=>{const c=this.view.inputManager.latestPointerType??"mouse",f=this._getSnappingContext(c);if(this.snappingManager!=null){const y=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,f);this._updatingHandles.addPromise(ad(y))}})}destroy(){co(this.segmentLabels),co(this._snappingOperation),this._editGeometryOperations=co(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:e,_manipulator:i}=this;return e!=null&&this._pointerDownStates.has(e)||i.grabbing||!i.interactive}get _snappingEnabled(){return this.snappingManager!=null&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._updateAndGetEffectiveDrawSurface();return this.view.type==="3d"&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}get _constraint(){const{constraints:e,constraintsEnabled:i}=this;if(e&&i)switch(this.geometryType){case"point":return this._getPointConstraint(e);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,e)}}set drawingMode(e){this._set("drawingMode",e??v0e)}get effectiveCursor(){return this.loading?ZWe:this._hideDefaultCursor?null:this.cursor||WWe}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return this.snappingManager!=null?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return this._stagedPointerType==="mouse"?this.cursorVertex:null}get committableVertex(){const{cursorVertex:e,lastVertex:i,firstVertex:n,geometryType:s}=this;return s==="polygon"&&FN(e,n)||FN(e,i)?null:e}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:e,committableVertex:i,coordinateHelper:n}=this,s=e.slice();return i!=null&&s.push(n.pointToArray(i)),s}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:e}=this;e!=null&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}complete(e){var o;const i=(e==null?void 0:e.aborted)||!1;this._snappingOperation.abort(),(o=this.snappingManager)==null||o.doneSnapping();const{geometryType:n,numCommittedVertices:s}=this,r=n==="multipoint"&&s===0||n==="polyline"&&s<2||n==="polygon"&&s<3;n!=="segment"&&n!=="point"||this.commitStagedVertex(),this._createOperationCompleted=!r,(this.isCompleted||i)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map((l,c)=>({componentIndex:0,vertexIndex:c,coordinates:l})),aborted:i,type:"complete"}))}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){this.snappingManager!=null&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(e){var l,c;const i=Ue(this.cursorVertex),n=Ue(e),s=n&&(((l=this._updateAndGetEffectiveDrawSurface())==null?void 0:l.constrainZ(n))??n),r=this._snapToClosingVertex(s),o=this._applyConstraints(r);FN(i,o)||(this._set("cursorVertex",o),(c=this.segmentLabels)==null||c.set("stagedVertex",o!=null?this.coordinateHelper.pointToVector(o):null),o==null||this._stagedPointerType!=="mouse"?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(o)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(e){if(e==null||this._isDragging||this.geometryType!=="polygon"||this.numCommittedVertices<=2)return e;const i=this._mapToScreen(e);if(!i)return e;const n=this._activeComponent;return this._vertexWithinPointerDistance(n.vertices[0].pos,i)?this.firstVertex:this._vertexWithinPointerDistance(n.vertices.at(-1).pos,i)?this.lastVertex:e}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return zN(e,(i,n,s,r)=>{const o=r==="touch"&&this._snappingEnabled;if(this.isCompleted||!o)return;const{snappingStep:l,cancelSnapping:c}=jWe({predicate:()=>o,snappingManager:this.snappingManager,snappingContext:new Az({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:r,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});s=s.next(f=>(o&&this.snappingManager!=null&&this.snappingManager.doneSnapping(),f)).next(c),n.next(this._screenToMapDragEventStep()).next(f=>(f.action==="start"&&(this._processCursor(f.mapStart),(this.geometryType==="segment"||o&&!this.numCommittedVertices)&&this.commitStagedVertex()),f)).next(PWe(this.view,this.elevationInfo)).next(...l).next(f=>(o&&(this._processCursor(f.mapEnd),f.action==="end"&&this.commitStagedVertex()),f)).next(f=>(f.action==="end"&&(this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),f))})}_createManipulatorDragPipelineFreehand(e){return zN(e,(i,n)=>{this.isCompleted||n.next(this._screenToMapDragEventStep()).next(s=>(s.action==="start"&&(this._snappingOperation.abort(),this.committableVertex==null&&this._processCursor(s.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),s)).next(s=>{switch(s.action){case"start":case"update":this._processCursor(s.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return s})})}_createManipulatorDragPipelineHybrid(e){return zN(e,(i,n)=>{this.isCompleted||n.next(this._screenToMapDragEventStep()).next(s=>(s.action==="start"&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),Ete),this._processCursor(s.mapStart),this.commitStagedVertex()),s)).next(s=>{switch(s.action){case"start":case"update":this._processCursor(s.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.removeHandles(Ete),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return s})})}get _drawAtFixedElevation(){const{constraintsEnabled:e,constraintZ:i,geometryType:n,numCommittedVertices:s}=this;return e?i!=null||n==="segment"&&s>0:(n==="segment"||n==="polygon")&&s>0}_updateAndGetEffectiveDrawSurface(){var f;const{constraintsEnabled:e,coordinateHelper:i,drawSurface:n,elevationDrawSurface:s,snapToSceneEnabled:r}=this;if(s==null)return n;if(!this.hasZ)return s.defaultZ=null,s;const o=(f=this.elevationInfo)==null?void 0:f.mode;let l=this.defaultZ,c=e||o==="absolute-height";return r!=null&&(c=r),o==="on-the-ground"&&(c=!1),this._drawAtFixedElevation&&(l=(e?this.constraintZ:null)??i.getZ(this._activeComponent.vertices[0].pos),c=!1),c?n:(s.defaultZ=l,s)}_mapToScreen(e){var i;return(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&this._processCursor(e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(!(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging))try{const{drawingMode:i,geometryType:n}=this;this._stagedPointerType=e.pointerType,this._stagedScreenPoint=e.screenPoint;const s=this._screenToMap(e.screenPoint);if(s==null||s==null||i==="freehand"&&n!=="point")return;if(this._snappingEnabled&&this.cursorVertex!=null||this._processCursor(s),this.committableVertex==null)return void this.complete();this.commitStagedVertex(),e.pointerType!=="mouse"&&this._processCursor(null),(i==="freehand"||n==="point"||n==="segment"&&this.numCommittedVertices===2||n==="segment"&&i==="hybrid"&&this.numCommittedVertices===1)&&this.complete()}finally{e.stopPropagation()}}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const i=am(e.x,e.y);this._stagedScreenPoint=i,this._stagedPointerType=e.pointerType,this._stagedPointerId=e.pointerId,this._isDragging?this._snappingOperation.abort():(e.stopPropagation(),this._processCursorMovementRelativeToSurface(i,e.pointerType))}_onKeyboardBasedChange(){this._stagedPointerType==="mouse"&&this._stagedScreenPoint&&this._stagedPointerId!=null&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(e,i){var c;const n=this._snappingOperation,s=this._screenToMap(e),r=this._requiresScenePoint?(c=this.drawSurface)==null?void 0:c.screenToMap(e):null;if(s==null)return this._hideDefaultCursor=!0,this._processCursor(null),void n.abort();this._hideDefaultCursor=!1;const o=this.snappingManager;if(o==null)return this._processCursor(s),void n.abort();const l=this._getSnappingContext(i);this._updatingHandles.addPromise(ad(n.snap({point:s,scenePoint:r},o,l)))}_applyConstraints(e){const{_constraint:i,constraints:n}=this;if(!e||!n||!i)return e;const{context:s}=n,r=g7(e,s),o=r?i.closestTo(r):void 0;if(!o)return e;const l=NWe(o,e,s),c=this.view.type==="2d"||s.elevationInfo.mode!=="absolute-height";return l!=null&&c&&this.constraintZ!=null&&this.hasZ&&(l.z=this.constraintZ),l}_screenToMap(e){var i;return e?(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.screenToMap(e):null}_screenToMapDragEventStep(){let e=null;return i=>{if(i.action==="start"&&(e=this._screenToMap(i.screenStart)),e==null)return null;const n=this._screenToMap(i.screenEnd);return n!=null?{...i,mapStart:e,mapEnd:n}:null}}_vertexWithinPointerDistance(e,i){const s=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return s!=null&&KWe(s,i,25)}_getSnappingContext(e){var n;const i=this._drawAtFixedElevation?(n=this.elevationDrawSurface)==null?void 0:n.defaultZ:null;return new Az({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:i!=null?{value:i,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};function KWe(t,e,i){const n=t.x-e.x,s=t.y-e.y;return n*n+s*s<=i}I([O()],an.prototype,"_hideDefaultCursor",void 0),I([O()],an.prototype,"_stagedPointerId",void 0),I([O()],an.prototype,"_isDragging",null),I([O()],an.prototype,"_snappingOperation",void 0),I([O()],an.prototype,"_snappingEnabled",null),I([O({constructOnly:!0})],an.prototype,"graphic",void 0),I([O()],an.prototype,"constraintsEnabled",void 0),I([O()],an.prototype,"constraints",void 0),I([O()],an.prototype,"_constraint",null),I([O()],an.prototype,"constraintZ",void 0),I([O()],an.prototype,"defaultZ",void 0),I([O()],an.prototype,"isDraped",void 0),I([O({value:v0e})],an.prototype,"drawingMode",null),I([O({constructOnly:!0})],an.prototype,"elevationDrawSurface",void 0),I([O({constructOnly:!0})],an.prototype,"elevationInfo",void 0),I([O({constructOnly:!0,type:b5})],an.prototype,"labelOptions",void 0),I([O({constructOnly:!0})],an.prototype,"geometryType",void 0),I([O({constructOnly:!0})],an.prototype,"hasM",void 0),I([O({constructOnly:!0})],an.prototype,"hasZ",void 0),I([O()],an.prototype,"cursor",void 0),I([O()],an.prototype,"effectiveCursor",null),I([O()],an.prototype,"loading",void 0),I([O({constructOnly:!0})],an.prototype,"manipulators",void 0),I([O({constructOnly:!0})],an.prototype,"drawSurface",void 0),I([O({constructOnly:!0})],an.prototype,"segmentLabels",void 0),I([O({constructOnly:!0})],an.prototype,"snappingManager",void 0),I([O({constructOnly:!0})],an.prototype,"snappingVisualizer",void 0),I([O()],an.prototype,"snapToSceneEnabled",void 0),I([O({readOnly:!0})],an.prototype,"cursorVertex",null),I([O({readOnly:!0})],an.prototype,"visualizationCursorVertex",null),I([O()],an.prototype,"committableVertex",null),I([O()],an.prototype,"firstVertex",void 0),I([O()],an.prototype,"lastVertex",void 0),I([O()],an.prototype,"secondToLastVertex",void 0),I([O()],an.prototype,"updating",null),I([O({constructOnly:!0})],an.prototype,"view",void 0),an=I([De("esri.views.draw.DrawOperation")],an);let H_t=class{constructor(e,i,n,s=null){this._elevationInfo=e,this.defaultZ=i,this._view=n,this._excludeGraphics=s}screenToMap(e){const{defaultZ:i,_view:n}=this,s=n.sceneIntersectionHelper.intersectElevationFromScreen(zhe(e.x,e.y),this._elevationInfo,i??0,this._excludeGraphics);return i==null&&s!=null&&(s.z=void 0),s}mapToScreen(e){const i=Ff(e.x,e.y,Sj(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(i)}constrainZ(e){const{defaultZ:i}=this;return i!=null&&e.z!==i&&((e=p7(e)).z=i),e}},Y_t=class{constructor(e,i,n=[]){this.view=e,this.elevationInfo=i,this.exclude=n}screenToMap(e){const i=this.view.toMap(e,{exclude:this.exclude,excludeLabels:!0});return i!=null&&(i.z=q6(i,this.view,this.elevationInfo)),i}mapToScreen(e){let i=e;return this.elevationInfo!=null&&(i=Ff(e.x,e.y,Sj(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(i)}constrainZ(e){return e}},W_t=class{constructor(e,i=!1,n=0){this.view=e,this.hasZ=i,this.defaultZ=n,this.mapToScreen=s=>e.toScreen(s),this.screenToMap=i?s=>{const r=e.toMap(s);return r.z=n,r}:s=>e.toMap(s)}constrainZ(e){const{defaultZ:i}=this;return this.hasZ&&e.z!==i&&((e=p7(e)).z=i),e}},Dz=class q0e{screenToMap(e){const{x:i,y:n}=e;return new Yi({x:i,y:n,spatialReference:q0e.spatialReference})}mapToScreen(e){return am(e.x,e.y)}constrainZ(e){return e}};Dz.spatialReference=new Gi;var Nz;let qg=Nz=class extends el{constructor(t){super(t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=(t==null?void 0:t.hasZ)??!1,this.rings.length!==0||!t)return;const i=cs(this.radius,this.radiusUnit,"meters"),n=t.spatialReference;let s,r="geographic";if(n.isWebMercator?r="webMercator":((n.wkid&&Ee[n.wkid])!=null||(n.wkt2||n.wkt)&&JM(n.wkt2||n.wkt))&&(r="projected"),this.geodesic){let o;switch(r){case"webMercator":o=jb(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=t}s=this._createGeodesicCircle(o,i,e),r==="webMercator"&&(s=UT(s))}else{let o;r==="webMercator"||r==="projected"?o=i/DV(t.spatialReference):r==="geographic"&&(o=Hle(i,"meters",kV(t.spatialReference).radius)),s=this._createPlanarCircle(t,o,e)}this.spatialReference=s.spatialReference,this.addRing(s.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:n,geodesic:s}=this;return new Nz({center:t==null?void 0:t.clone(),numberOfPoints:e,radius:i,radiusUnit:n,geodesic:s})}_createGeodesicCircle(t,e,i){let n=0;const s=[];for(;n<360;){const r=[0,0],o=[t.x,t.y];w0(r,o,n,e,Gi.WGS84),this.hasZ&&r.push(t.z),s.push(r),n+=360/i}return s.push(s[0]),new el({rings:[s]})}_createPlanarCircle(t,e,i){const n=[],s=2*Math.PI/i;for(let r=0;r<i;++r){const o=s*r,l=[t.x+Math.cos(-o)*e,t.y+Math.sin(-o)*e];this.hasZ&&l.push(t.z),n.push(l)}return n.push(n[0]),new el({spatialReference:t.spatialReference,rings:[n]})}};I([O({type:Yi})],qg.prototype,"center",void 0),I([O()],qg.prototype,"geodesic",void 0),I([O()],qg.prototype,"numberOfPoints",void 0),I([O()],qg.prototype,"radius",void 0),I([O()],qg.prototype,"radiusUnit",void 0),qg=Nz=I([De("esri.geometry.Circle")],qg);const JWe=qg;var K_t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function QWe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function eZe(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Cte,Pte={exports:{}};function tZe(){return Cte||(Cte=1,function(t){function e(){function n(m){if(typeof m=="number")return ye.Tc.Zg(m);if(m==null)return null;if(gs[m]!=null)return ye.Tc.Zg(gs[m]);throw Error("Unrecognised Unit Type")}function s(m){if(typeof m=="number")return ye.Tc.Zg(m);if(m==null)return null;if(Wr[m]!=null)return ye.Tc.Zg(Wr[m]);throw Error("Unrecognised Unit Type")}function r(m){if(m)switch(m){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function o(m,j,T,p){if(T==null||T.B())return null;switch(T.getType()){case ye.qn.Point:return m.exportPoint(j,T,p);case ye.qn.Polygon:return m.exportPolygon(j,T,p);case ye.qn.Polyline:return m.exportPolyline(j,T,p);case ye.qn.MultiPoint:return m.exportMultipoint(j,T,p);case ye.qn.Envelope:return m.exportExtent(j,T,p)}return null}function l(m,j,T,p){if(T.getType()!==ye.qn.Point)throw Error("Geometry not Point");return m.exportPoint(j,T,p)}function c(m,j,T){return m.convertToGEGeometry(j,T)}function f(m){var j=m.wkid;m=m.wkt2||m.wkt;var T=Tn.get(j||m);return T==null&&(j!==-1&&j!=null?(T=ye.Eg.create(j),Tn.set(j,T)):m&&(T=ye.Eg.qP(m),Tn.set(m,T)),Xn.has(j||m)&&T.VW(Xn.get(j||m))),T}function y(m){var j,T,p;if(m==null)return null;var h=f(m);return m=h.Hd(),h=h.Kn(),(j={}).tolerance=h,j.unitType=m==null?-1:m.od,j.unitID=m==null?-1:m.Ec(),j.unitBaseFactor=m==null?0:m.ai,j.unitSquareDerivative=m==null?0:(p=(T=ye.Tc.aG(m))===null||T===void 0?void 0:T.Ec())!==null&&p!==void 0?p:0,j}function _(m,j,T,p){return T==null?null:(T=ye.$b.clip(c(m,wt,T),c(m,wt,p),f(j)),o(m,wt,T,j))}function x(m,j,T,p){T=ye.$b.dl(c(m,wt,T),c(m,wt,p),f(j)),p=[];for(var h=0;h<T.length;h++)p.push(o(m,wt,T[h],j));return p}function S(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.contains(c(m,wt,T),c(m,wt,p),f(j))}function P(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.BP(c(m,wt,T),c(m,wt,p),f(j))}function A(m,j,T,p,h){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.tb(c(m,wt,T),c(m,wt,p),f(j),n(h))}function D(m,j,T,p){return!(T==null&&p!=null||p==null&&T!=null)&&ye.$b.Nb(c(m,wt,T),c(m,wt,p),f(j))}function N(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.TS(c(m,wt,T),c(m,wt,p),f(j))}function F(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.touches(c(m,wt,T),c(m,wt,p),f(j))}function G(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.qY(c(m,wt,T),c(m,wt,p),f(j))}function V(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.TP(c(m,wt,T),c(m,wt,p),f(j))}function B(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.DU(c(m,wt,T),c(m,wt,p),f(j))}function W(m,j,T,p,h){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.yB(c(m,wt,T),c(m,wt,p),f(j),h)}function J(m,j,T){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.dT(c(m,wt,T),f(j))}function re(m,j,T){if(T==null)throw Error("Illegal Argument Exception");return T=ye.$b.eC(c(m,wt,T),f(j)),o(m,wt,T,j)}function ne(m,j,T,p){if(p===void 0&&(p=!1),T==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){var h=p,a=[];for(p=0;p<T.length;p++)a.push(c(m,wt,T[p]));for(T=ye.$b.jP(a,h),h=Array(T.length),p=0;p<T.length;p++)h[p]=o(m,wt,T[p],j);return h}return p=ye.$b.iP(c(m,wt,T),f(j)),o(m,wt,p,j)}function oe(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){for(var h=[],a=0;a<T.length;a++)h.push(c(m,wt,T[a]));for(T=ye.$b.QP(h,c(m,wt,p),f(j)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,wt,T[a],j);return p}return a=ye.$b.im(c(m,wt,T),c(m,wt,p),f(j)),o(m,wt,a,j)}function pe(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){for(var h=[],a=0;a<T.length;a++)h.push(c(m,wt,T[a]));for(T=ye.$b.VX(h,c(m,wt,p),f(j)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,wt,T[a],j);return p}return a=ye.$b.ep(c(m,wt,T),c(m,wt,p),f(j)),o(m,wt,a,j)}function ce(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){for(var h=[],a=0;a<T.length;a++)h.push(c(m,wt,T[a]));for(T=ye.$b.RS(h,c(m,wt,p),f(j)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,wt,T[a],j);return p}return a=ye.$b.Ea(c(m,wt,T),c(m,wt,p),f(j)),o(m,wt,a,j)}function ue(m,j,T,p){if(T==null)return null;var h=[];if(Array.isArray(T)){if(T.length===0)return null;for(p=0;p<T.length;p++)h.push(c(m,wt,T[p]))}else h.push(c(m,wt,T)),p!=null&&h.push(c(m,wt,p));return o(m,wt,ye.$b.jY(h,f(j)),j)}function se(m,j,T,p,h,a,u,d){var g=0;if(a!=null)switch(a){case"round":g=0;break;case"bevel":g=1;break;case"miter":g=2;break;case"square":g=3}if(Array.isArray(T)){if(T==null)m=null;else if(T.length===0)m=[];else{var v=[];for(a=0;a<T.length;a++)v.push(c(m,wt,T[a]));for(T=ye.$b.BU(v,f(j),p,g,u,d,n(h)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,wt,T[a],j);m=p}return m}return T=ye.$b.offset(c(m,wt,T),f(j),p,g,u,d,n(h)),o(m,wt,T,j)}function de(m,j,T,p,h,a){if(a===void 0&&(a=!1),Array.isArray(T)){if(!Array.isArray(p)){for(var u=[],d=0;d<T.length;d++)u.push(p);p=u}if(p.length!=T.length){if(p.length==0)throw Error("Illegal Argument Exception");u=[];var g=0;for(d=0;d<T.length;d++)p[d]===void 0?u.push(g):(u.push(p[d]),g=p[d]);p=u}return Pe(m,j,T,p,h,!1,a,"geodesic",NaN)}return T=ye.$b.buffer(c(m,wt,T),f(j),p,n(h),!1,0,NaN),o(m,wt,T,j)}function Se(m,j,T,p,h,a,u,d){if(Array.isArray(T)){if(!Array.isArray(p)){for(var g=[],v=0;v<T.length;v++)g.push(p);p=g}if(p.length!==T.length){if(p.length===0)throw Error("Illegal Argument Exception");g=[];var b=0;for(v=0;v<T.length;v++)p[v]===void 0?g.push(b):(g.push(p[v]),b=p[v]);p=g}return Pe(m,j,T,p,h,!0,a,u,d)}return u===void 0&&(u=NaN),T=ye.$b.buffer(c(m,wt,T),f(j),p,n(h),!0,r(a),u),o(m,wt,T,j)}function Pe(m,j,T,p,h,a,u,d,g){if(g===void 0&&(g=NaN),T==null)return null;if(T.length===0)return[];for(var v=[],b=0;b<T.length;b++)v.push(c(m,wt,T[b]));for(T=ye.$b.MN(v,f(j),p,n(h),a,u,r(d),g),p=Array(T.length),b=0;b<T.length;b++)p[b]=o(m,wt,T[b],j);return p}function Re(m,j,T,p,h){var a;return h===void 0&&(h=!0),T=ye.$b.nz(c(m,wt,T),c(m,wt,p),h),(a={}).coordinate=l(m,wt,T.fz(),j),a.distance=T.hz(),a.isRightSide=T.Sz(),a.vertexIndex=T.Ua(),a.isEmpty=T.B(),a}function $e(m,j,T,p){var h;return T=ye.$b.oz(c(m,wt,T),c(m,wt,p)),(h={}).coordinate=l(m,wt,T.fz(),j),h.distance=T.hz(),h.isRightSide=T.Sz(),h.vertexIndex=T.Ua(),h.isEmpty=T.B(),h}function we(m,j,T,p,h,a){var u;for(T=ye.$b.pz(c(m,wt,T),c(m,wt,p),h,a),p=[],h=0;h<T.length;h++)T[h].B()===!1&&p.push(((u={}).coordinate=l(m,wt,T[h].fz(),j),u.distance=T[h].hz(),u.isRightSide=T[h].Sz(),u.vertexIndex=T[h].Ua(),u.isEmpty=T[h].B(),u));return p}function Fe(m,j,T,p,h,a){return T=ye.$b.QQ(c(m,wt,T),f(j),p,h,n(a)),o(m,wt,T,j)}function it(m,j,T,p,h){return T=ye.$b.Qr(c(m,wt,T),f(j),p,n(h)),o(m,wt,T,j)}function _t(m,j,T,p,h,a){return a===void 0&&(a=0),T=ye.$b.Wy(c(m,wt,T),f(j),p,n(h),a),o(m,wt,T,j)}function ot(m,j,T,p){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.JU(c(m,wt,T),f(j),s(p))}function ut(m,j,T,p){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.KU(c(m,wt,T),f(j),n(p))}function Pt(m,j,T,p,h){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.WQ(c(m,wt,T),f(j),s(p),r(h))}function Vt(m,j,T,p,h){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.ZQ(c(m,wt,T),f(j),n(p),r(h))}function Ft(m){ye.NL.bind(m)}function Nt(m,j,T,p,h){var a=null,u=null;if(p){if(!h)throw ye.i.N("AOI missing Spatial Reference");a=c(m,wt,p),u=f(h).fh()}return(m=ye.gu.XR(f(j).fh(),f(T).fh(),a,u))!==null?m:null}function Wi(m,j,T,p,h){var a=null,u=null;if(p){if(!h)throw ye.i.N("AOI missing Spatial Reference");a=c(m,wt,p),u=f(h).fh()}return ye.gu.YR(f(j).fh(),f(T).fh(),a,u)}function hn(m,j,T,p,h,a){if(h===void 0&&(h=null),a===void 0&&(a=null),a){var u=new ye.yC;u.Vu=a.densificationStep,u.Jr=a.centralMeridianOfOutputGCS,a.clipWithInputHorizon&&u.PW(a.clipWithInputHorizon),a.clipWithOutputHorizon&&u.QW(a.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(j.length===0)return[];if(h){if(!(a=h.getCachedGeTransformation(T,p)))e:{if(a=h,h=null,a){var d=a.getGTListEntry();if(d!==null){h=new ye.wC(null);for(var g=0,v=d.steps;g<v.length;g++){d=v[g];var b=new ye.Dx(d.geogtran);d.isInverse&&b.Qz(),h.add(b)}u=ye.vr.Nr(f(T).fh(),f(p).fh(),h,u),a.assignCachedGe(T,p,u),a=u;break e}}if(h===null&&a&&a.steps&&0<a.steps.length){for(h=new ye.wC(null),g=0,v=a.steps;g<v.length;g++)(d=v[g]).wkid!=-1&&d.wkid!=null?h.add(ye.Dx.create(d.wkid,d.isInverse)):h.add(ye.Dx.uP(d.wkt,d.isInverse));u=ye.vr.Nr(f(T).fh(),f(p).fh(),h,u),a.assignCachedGe(T,p,u),a=u}else a=ye.vr.Nr(f(T).fh(),f(p).fh(),h,u)}for(T=[],h=0;h<j.length;h++)u=j[h],T.push(ps(m,u,p,a))}else for(a=ye.vr.Nr(f(T).fh(),f(p).fh(),null),T=[],h=0;h<j.length;h++)u=j[h],T.push(ps(m,u,p,a));return T}function ps(m,j,T,p){return j=ye.$b.zh(c(m,wt,j),p),o(m,wt,j,T)}function Yn(m,j){m!=null&&(m=m.wkid||m.wkt2||m.wkt,Xn.has(m),Xn.set(m,j),Tn.has(m)&&Tn.delete(m))}function fr(m){m!=null&&(m=m.wkid||m.wkt2||m.wkt,Xn.has(m)&&(Xn.delete(m),Tn.has(m)&&Tn.delete(m)))}function fo(m,j,T,p){if(T==null||p==null)return[];var h=[],a=0;for(T=ye.$b.QS(c(m,wt,T),c(m,wt,p),f(j))||[];a<T.length;a++)h.push(o(m,wt,T[a],j));return h}var sn,ye,qi,Ir,ri=this&&this.__extends||function(){function m(j,T){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var a in h)h.hasOwnProperty(a)&&(p[a]=h[a])})(j,T)}return function(j,T){function p(){this.constructor=j}m(j,T),j.prototype=T===null?Object.create(T):(p.prototype=T.prototype,new p)}}();(function(m){var j;(j=m.qn||(m.qn={}))[j.Unknown=0]="Unknown",j[j.Point=33]="Point",j[j.Line=322]="Line",j[j.Envelope=197]="Envelope",j[j.MultiPoint=550]="MultiPoint",j[j.Polyline=1607]="Polyline",j[j.Polygon=1736]="Polygon",function(p){p[p.enumMild=0]="enumMild",p[p.enumMedium=1]="enumMedium",p[p.enumHot=2]="enumHot"}(m.YK||(m.YK={}));var T=function(){function p(){this.description=null,this.VA=0}return p.prototype.getType=function(){return 0},p.prototype.Db=function(){return-1},p.prototype.Nf=function(h){this.vc(),h!=this.description&&this.sn(h)},p.prototype.sn=function(){},p.prototype.Jl=function(h){this.vc(),h!=this.description&&(h=m.ee.CR(this.description,h))!=this.description&&this.sn(h)},p.prototype.hasAttribute=function(h){return this.description.hasAttribute(h)},p.prototype.re=function(h){this.vc(),this.description.hasAttribute(h)||(h=m.ee.BR(this.description,h),this.sn(h))},p.prototype.Tg=function(){return null},p.prototype.bn=function(){},p.prototype.A=function(){},p.prototype.Qo=function(){},p.prototype.xc=function(h){this.A(h)},p.prototype.B=function(){return!0},p.prototype.Oa=function(){},p.prototype.Oc=function(){},p.prototype.Ia=function(){return null},p.prototype.copyTo=function(){},p.prototype.Ke=function(){return 0},p.prototype.Qb=function(){return 0},p.prototype.iG=function(){return this.hasAttribute(1)},p.tf=function(h){return 1+((192&h)>>6)>>1},p.Rn=function(h){return!!(32&h)},p.US=function(h){return!!(128&h)},p.yd=function(h){return!!(256&h)},p.xj=function(h){return!!(512&h)},p.Hc=function(h){return!!(1024&h)},p.prototype.Of=function(){var h=this.Ia();return this.copyTo(h),h},p.prototype.mg=function(){return null},p.jg=function(h){var a=h.Ia();return h.copyTo(a),a},p.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},p.Ax=function(h){var a=h.getType();if(p.xj(a))return h.I();if(h.B())return 0;if(a==197)return 4;if(a==33)return 1;if(p.yd(a))return 2;throw m.i.fa("missing type")},p}();m.aa=T})(ye||(ye={})),qi=ye||(ye={}),Ir=function(){function m(){this.y=this.x=0}return m.construct=function(j,T){var p=new m;return p.x=j,p.y=T,p},m.al=function(j){var T=new m;return T.x=j.x,T.y=j.y,T},m.prototype.ma=function(j,T){this.x=j,this.y=T},m.prototype.L=function(j){this.x=j.x,this.y=j.y},m.prototype.fq=function(j,T){return this.x===j&&this.y===T},m.prototype.Rz=function(j){return 2220446049250313e-31>=Math.abs(this.x-j.x)&&2220446049250313e-31>=Math.abs(this.y-j.y)},m.prototype.qb=function(j){return this.x===j.x&&this.y===j.y},m.prototype.Nb=function(j){return j==this||j instanceof m&&this.x==j.x&&this.y==j.y},m.prototype.sub=function(j){this.x-=j.x,this.y-=j.y},m.prototype.uc=function(j,T){this.x=j.x-T.x,this.y=j.y-T.y},m.prototype.add=function(j,T){T!==void 0?(this.x=j.x+T.x,this.y=j.y+T.y):(this.x+=j.x,this.y+=j.y)},m.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},m.prototype.mt=function(j){this.x=-j.x,this.y=-j.y},m.prototype.NS=function(j,T,p){this.x=j.x*(1-p)+T.x*p,this.y=j.y*(1-p)+T.y*p},m.prototype.Ct=function(j,T){this.x=this.x*j+T.x,this.y=this.y*j+T.y},m.prototype.HW=function(j,T,p){this.x=T.x*j+p.x,this.y=T.y*j+p.y},m.prototype.scale=function(j){this.x*=j,this.y*=j},m.prototype.compare=function(j){return this.y<j.y?-1:this.y>j.y?1:this.x<j.x?-1:this.x>j.x?1:0},m.prototype.normalize=function(){var j=this.length();j==0&&(this.x=1,this.y=0),this.x/=j,this.y/=j},m.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},m.prototype.Sk=function(){return this.x*this.x+this.y*this.y},m.tb=function(j,T){return Math.sqrt(this.yc(j,T))},m.Oy=function(j,T,p,h){return j-=p,T-=h,Math.sqrt(j*j+T*T)},m.prototype.Qh=function(j){return this.x*j.x+this.y*j.y},m.prototype.fD=function(j){return Math.abs(this.x*j.x)+Math.abs(this.y*j.y)},m.prototype.wi=function(j){return this.x*j.y-this.y*j.x},m.prototype.Bt=function(j,T){var p=-this.x*T+this.y*j;this.x=this.x*j+this.y*T,this.y=p},m.prototype.Hv=function(){var j=this.x;this.x=-this.y,this.y=j},m.prototype.MG=function(j){this.x=-j.y,this.y=j.x},m.prototype.ar=function(){var j=this.x;this.x=this.y,this.y=-j},m.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},m.nu=function(j,T){var p=j.qu(),h=T.qu();return h==p?0>(j=j.wi(T))?1:0<j?-1:0:p<h?-1:1},m.yc=function(j,T){var p=j.x-T.x;return p*p+(j=j.y-T.y)*j},m.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},m.prototype.Rc=function(){this.y=this.x=NaN},m.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},m.prototype.offset=function(j,T){var p=m.tb(j,T),h=m.construct(this.x,this.y);if(p==0)return m.tb(h,j);var a=new m;return a.L(T),a.sub(j),h.sub(j),h.wi(a)/p},m.Uq=function(j,T,p){var h=new qi.Wb;h.set(T.x),h.sub(j.x);var a=new qi.Wb;a.set(p.y),a.sub(j.y);var u=new qi.Wb;u.set(T.y),u.sub(j.y);var d=new qi.Wb;return d.set(p.x),d.sub(j.x),h.Ag(a),u.Ag(d),h.sub(u),h.ps()?(h=new qi.hp(T.x),a=new qi.hp(j.x),u=new qi.hp(j.y),h=h.jt(a),j=(j=new qi.hp(p.y)).jt(u),T=(T=new qi.hp(T.y)).jt(u),p=(p=new qi.hp(p.x)).jt(a),h=h.lr(j),T=T.lr(p),(h=h.lr(T)).nT()?-1:h.fS()?1:0):0>(p=h.value())?-1:0<p?1:0},m.prototype.cc=function(){return qi.O.uj(qi.O.uj())},m}(),qi.h=Ir,function(m){var j=function(){function T(p){this.Fy=this.Mt=0,this.OX=p}return T.prototype.reset=function(){this.Fy=this.Mt=0},T.prototype.add=function(p){p-=this.Fy;var h=this.Mt+p;this.Fy=h-this.Mt-p,this.Mt=h},T.prototype.sub=function(p){this.add(-p)},T.prototype.rm=function(){return this.OX+this.Mt},T}();m.Fx=j,m.lc=function(){function T(){}return T.Cn=function(p,h){return 0<=h?Math.abs(p):-Math.abs(p)},T.sign=function(p){return 0>p?-1:0<p?1:0},T.RK=function(p){return p-360*Math.floor(p/360)},T.round=function(p){return Math.floor(p+.5)},T.ox=function(p){return p*p},T.hq=function(p,h,a){return .5>=a?p+(h-p)*a:h-(h-p)*(1-a)},T.OG=function(p,h,a,u){.5>=a?(u.x=p.x+(h.x-p.x)*a,u.y=p.y+(h.y-p.y)*a):(u.x=h.x-(h.x-p.x)*(1-a),u.y=h.y-(h.y-p.y)*(1-a))},T.lT=function(p,h,a,u,d,g){.5>=d?(g.x=p+(a-p)*d,g.y=h+(u-h)*d):(g.x=a-(a-p)*(1-d),g.y=u-(u-h)*(1-d))},T}()}(ye||(ye={})),function(m){var j=function(T){function p(){var h=T.call(this)||this;return h.sa=0,h.na=0,h.pa=0,h.la=0,h.ka=null,h}return ri(p,T),p.prototype.ac=function(){return m.h.construct(this.sa,this.na)},p.prototype.Yp=function(h){h.x=this.sa,h.y=this.na},p.prototype.Dc=function(h){this.em(0,h)},p.prototype.ZB=function(h,a){this.em(0,m.h.construct(h,a))},p.prototype.To=function(h){this.hD(0,h)},p.prototype.setStart=function(h){this.uD(0,h)},p.prototype.wv=function(h,a){return this.Od(0,h,a)},p.prototype.YB=function(h,a,u){this.tn(0,h,a,u)},p.prototype.wc=function(){return m.h.construct(this.pa,this.la)},p.prototype.Tr=function(h){h.x=this.pa,h.y=this.la},p.prototype.Qc=function(h){this.em(1,h)},p.prototype.Ql=function(h,a){this.em(1,m.h.construct(h,a))},p.prototype.Po=function(h){this.hD(1,h)},p.prototype.setEnd=function(h){this.uD(1,h)},p.prototype.gv=function(h,a){return this.Od(1,h,a)},p.prototype.OB=function(h,a,u){this.tn(1,h,a,u)},p.prototype.Db=function(){return 1},p.prototype.B=function(){return this.Ac()},p.prototype.Oa=function(){},p.prototype.Ke=function(){return 0},p.prototype.Ea=function(h,a,u,d,g){return this.KM(h,a,u,d,g)},p.prototype.isIntersecting=function(h,a){return this.zr(h,a,!1)!=0},p.prototype.qs=function(h,a){return this.ru(h,a,!1)},p.prototype.ru=function(){return null},p.prototype.Ac=function(){return!1},p.prototype.ay=function(h){if(this.vc(),this.ka==null&&0<h)this.ka=m.O.lg(2*h);else if(this.ka!=null&&this.ka.length<2*h){for(var a=this.ka.slice(0),u=this.ka.length;u<2*h;u++)a[u]=0;this.ka=a}},p.gM=function(h,a,u){if(0<u)var d=0;for(var g=0;g<u;g++)a[0+d]=h[0],d++},p.prototype.em=function(h,a){h!=0?(this.pa=a.x,this.la=a.y):(this.sa=a.x,this.na=a.y)},p.prototype.sn=function(h){if(this.ka!=null){for(var a=m.ee.Iw(h,this.description),u=[],d=p.Gg(this.description,0),g=p.Gg(this.description,1),v=p.Gg(h,0),b=p.Gg(h,1),C=0,M=1,$=h.Aa;M<$;M++){var L=h.kd(M),q=m.ra.Va(L);if(a[M]==-1){var U=m.ra.se(L);for(L=0;L<q;L++)u[v+C]=U,u[b+C]=U,C++}else for(U=this.description.$j(a[M])-2,L=0;L<q;L++)u[v+C]=this.ka[d+U],u[b+C]=this.ka[g+U],C++,U++}this.ka=u}this.description=h},p.prototype.hD=function(h,a){if(this.Ac())throw m.i.fa("empty geometry");a.Nf(this.description),a.Ac()&&a.un();for(var u=0;u<this.description.Aa;u++)for(var d=this.description.Ed(u),g=0,v=m.ra.Va(d);g<v;g++){var b=this.Od(h,d,g);a.setAttribute(d,g,b)}},p.prototype.uD=function(h,a){if(this.vc(),a.Ac())throw m.i.fa("empty geometry");for(var u=a.description,d=0,g=u.Aa;d<g;d++)for(var v=u.Ed(d),b=m.ra.Va(v),C=0;C<b;C++){var M=a.Uc(v,C);this.tn(h,v,C,M)}},p.prototype.Od=function(h,a,u){if(this.Ac())throw m.i.fa("This operation was performed on an Empty Geometry.");if(a==0)return h!=0?u!=0?this.la:this.pa:u!=0?this.na:this.sa;if(u>=m.ra.Va(a))throw m.i.ce();var d=this.description.Pf(a);return 0<=d?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[p.Gg(this.description,h)+this.description.$j(d)-2+u]):m.ra.se(a)},p.prototype.tn=function(h,a,u,d){if(this.vc(),u>=m.ra.Va(a))throw m.i.ce();var g=this.description.Pf(a);0>g&&(this.re(a),g=this.description.Pf(a)),a==0?h!=0?u!=0?this.la=d:this.pa=d:u!=0?this.na=d:this.sa=d:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[p.Gg(this.description,h)+this.description.$j(g)-2+u]=d)},p.prototype.copyTo=function(h){if(h.getType()!=this.getType())throw m.i.N();h.description=this.description,h.ay(this.description.Ae.length-2),p.gM(this.ka,h.ka,2*(this.description.Ae.length-2)),h.sa=this.sa,h.na=this.na,h.pa=this.pa,h.la=this.la,h.vc(),this.op(h)},p.prototype.Tg=function(h,a){var u=new m.Nc;return this.Ac()?(u.Oa(),u):(u.oa=this.Od(0,h,a),u.va=u.oa,u.Lk(this.Od(1,h,a)),u)},p.prototype.ZI=function(h){this.Ac()?h.Oa():(h.oa=this.Od(0,0,0),h.va=h.oa,h.Lk(this.Od(1,0,0)))},p.prototype.Tw=function(h,a){a.Nf(this.description),a.Cb(this.hc(h));for(var u=1,d=this.description.Aa;u<d;u++)for(var g=this.description.Ed(u),v=m.ra.Va(g),b=0;b<v;b++){var C=this.Uc(h,g,b);a.setAttribute(g,b,C)}},p.prototype.FM=function(h){if(this.description!=h.description||this.sa!=h.sa||this.pa!=h.pa||this.na!=h.na||this.la!=h.la)return!1;for(var a=0;a<2*(this.description.Ae.length-2);a++)if(this.ka[a]!=h.ka[a])return!1;return!0},p.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},p.prototype.reverse=function(){var h=this.sa;this.sa=this.pa,this.pa=h,h=this.na,this.na=this.la,this.la=h,h=1;for(var a=this.description.Aa;h<a;h++)for(var u=this.description.kd(h),d=0,g=m.ra.Va(u);d<g;d++){var v=this.Od(0,u,d),b=this.Od(1,u,d);this.tn(0,u,d,b),this.tn(1,u,d,v)}},p.prototype.zr=function(h,a,u){var d=this.getType(),g=h.getType();if(d===322){if(g==322)return m.yb.OM(this,h,a,u);throw m.i.Qa()}throw m.i.Qa()},p.prototype.KM=function(h,a,u,d,g){var v=this.getType(),b=h.getType();if(v===322){if(b==322)return m.yb.Zx(this,h,a,u,d,g);throw m.i.Qa()}throw m.i.Qa()},p.prototype.Tx=function(){return null},p.Gg=function(h,a){return a*(h.Ae.length-2)},p.prototype.hc=function(h,a){if(a===void 0)return a=new m.h,this.hc(h,a),a;m.lc.lT(this.sa,this.na,this.pa,this.la,h,a)},p.prototype.fe=function(){return null},p.prototype.eG=function(){return null},p.prototype.cq=function(){return null},p.prototype.Bi=function(){return null},p.prototype.Pn=function(){return null},p.prototype.kg=function(){return null},p.prototype.Ux=function(h,a){return a!==void 0?this.vx(a)-this.vx(h):this.vx(h)},p.prototype.op=function(){},p.prototype.dl=function(){return null},p.prototype.ah=function(){},p.prototype.Uc=function(){return null},p.prototype.Pe=function(){return null},p.prototype.vx=function(){return null},p.prototype.NG=function(){return null},p.prototype.tb=function(h,a){if(!a&&this.zr(h,0,!1)!=0)return 0;a=17976931348623157e292;var u=this.ac(),d=h.fe(u,!1);return u.sub(h.hc(d)),(u=u.length())<a&&(a=u),u=this.wc(),d=h.fe(u,!1),u.sub(h.hc(d)),(u=u.length())<a&&(a=u),u=h.ac(),d=this.fe(u,!1),u.sub(this.hc(d)),(u=u.length())<a&&(a=u),u=h.wc(),d=this.fe(u,!1),u.sub(this.hc(d)),(u=u.length())<a&&(a=u),a},p.prototype.mg=function(){return m.pi.gm(this,null)},p}(m.aa);m.SC=j}(ye||(ye={})),new ye.h,function(m){var j;(j=m.$K||(m.$K={}))[j.Unknown=-1]="Unknown",j[j.Not=0]="Not",j[j.Weak=1]="Weak",j[j.Strong=2]="Strong",function(p){p[p.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",p[p.IsWeakSimple=2]="IsWeakSimple",p[p.IsStrongSimple=4]="IsStrongSimple",p[p.DirtyOGCFlags=8]="DirtyOGCFlags",p[p.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",p[p.DirtyExactIntervals=64]="DirtyExactIntervals",p[p.DirtyLooseIntervals=128]="DirtyLooseIntervals",p[p.DirtyIntervals=192]="DirtyIntervals",p[p.DirtyIsEnvelope=256]="DirtyIsEnvelope",p[p.DirtyLength2D=512]="DirtyLength2D",p[p.DirtyRingAreas2D=1024]="DirtyRingAreas2D",p[p.DirtyCoordinates=1993]="DirtyCoordinates",p[p.DirtyAllInternal=65535]="DirtyAllInternal",p[p.DirtyAll=16777215]="DirtyAll"}(m.MK||(m.MK={}));var T=function(p){function h(){var a=p.call(this)||this;return a.Hm=65535,a.wa=0,a.Pg=-1,a.Bb=null,a}return ri(h,p),h.prototype.op=function(){},h.prototype.$x=function(){},h.prototype.iy=function(){},h.prototype.I=function(){return this.wa},h.prototype.B=function(){return this.Ac()},h.prototype.Ac=function(){return this.wa==0},h.prototype.ak=function(a){return!!(this.Hm&a)},h.prototype.Lf=function(a,u){this.Hm=u?this.Hm|a:this.Hm&~a},h.prototype.mc=function(){this.ak(32)&&this.bN()},h.prototype.wx=function(){if(this.Ac())throw m.i.fa("This operation was performed on an Empty Geometry.")},h.prototype.ve=function(a,u){if(0>a||a>=this.wa)throw m.i.fa("index out of bounds");this.mc(),u.Nf(this.description),u.B()&&u.un();for(var d=0;d<this.description.Aa;d++)for(var g=this.description.Ed(d),v=0,b=m.ra.Va(g);v<b;v++){var C=this.za[d].eg(b*a+v);u.setAttribute(g,v,C)}},h.prototype.Ht=function(a,u){this.mc();for(var d=u.description,g=0;g<d.Aa;g++)for(var v=d.Ed(g),b=m.ra.Va(v),C=0;C<b;C++){var M=u.Uc(v,C);this.setAttribute(v,a,C,M)}},h.prototype.D=function(a,u){if(0>a||a>=this.I())throw m.i.ce();this.mc(),this.za[0].tc(2*a,u)},h.prototype.Na=function(a){var u=new m.h;return this.D(a,u),u},h.prototype.Gc=function(a,u){this.za[0].tc(2*a,u)},h.prototype.Cb=function(a,u,d){if(0>a||a>=this.wa)throw m.i.ce();this.mc();var g=this.za[0];d!==void 0?(g.write(2*a,u),g.write(2*a+1,d)):g.Tt(2*a,u),this.Pc(1993)},h.prototype.Cz=function(){if(void 0>=this.I())throw m.i.ce();this.mc();var a=this.za[0],u=new m.Nd;return u.x=a.read(NaN),u.y=a.read(NaN),u.z=this.hasAttribute(1)?this.za[1].eg():m.ra.se(1),u},h.prototype.dC=function(a){if(0>a||a>=this.I())throw m.i.ce();this.re(1),this.mc(),this.Pc(1993);var u=this.za[0];u.write(2*a,(void 0).x),u.write(2*a+1,(void 0).y),this.za[1].pr(a,(void 0).z)},h.prototype.Uc=function(a,u,d){if(0>u||u>=this.wa)throw m.i.ce();var g=m.ra.Va(a);if(d>=g)throw m.i.ce();this.mc();var v=this.description.Pf(a);return 0<=v?this.za[v].eg(u*g+d):m.ra.se(a)},h.prototype.yF=function(a,u){return this.Uc(a,u)},h.prototype.setAttribute=function(a,u,d,g){if(0>u||u>=this.wa)throw m.i.ce();var v=m.ra.Va(a);if(d>=v)throw m.i.ce();this.re(a),this.mc(),a=this.description.Pf(a),this.Pc(1993),this.za[a].pr(u*v+d,g)},h.prototype.ub=function(a){return this.wx(),this.re(a),this.mc(),this.za[this.description.Pf(a)]},h.prototype.hn=function(a,u){if(u!=null&&m.ra.Tp(a)!=u.Tp())throw m.i.N();this.re(a),a=this.description.Pf(a),this.za==null&&(this.za=m.Yc.qI(this.description.Aa)),this.za[a]=u,this.Pc(16777215)},h.prototype.sn=function(a){var u=null;if(this.za!=null){var d=m.ee.Iw(a,this.description);u=[];for(var g=0,v=a.Aa;g<v;g++)d[g]!=-1&&(u[g]=this.za[d[g]])}this.description=a,this.za=u,this.Pg=-1,this.Pc(16777215)},h.prototype.AD=function(a){this.wu(!0),a instanceof m.l?this.$.A(a):this.$.Qo(a)},h.prototype.aN=function(a){this.wu(!1),a instanceof m.l?this.$.A(a):this.$.Qo(a)},h.prototype.bn=function(a){this.wu(!0),this.$.copyTo(a)},h.prototype.A=function(a){this.AD(a)},h.prototype.Qo=function(a){this.AD(a)},h.prototype.xc=function(a){this.aN(a)},h.prototype.Tg=function(a,u){var d=new m.Nc;return this.Ac()?(d.Oa(),d):(this.wu(!0),this.$.Tg(a,u))},h.prototype.cc=function(){var a=this.description.cc();if(!this.Ac())for(var u=this.I(),d=0,g=this.description.Aa;d<g;d++)a=this.za[d].An(a,0,u*m.ra.Va(this.description.Ed(d)));return a},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h&&this.description.Nb(a.description))||this.Ac()!=a.Ac())return!1;if(this.Ac())return!0;var u=this.I();if(u!=a.I())return!1;for(var d=0;d<this.description.Aa;d++){var g=this.description.kd(d),v=this.ub(g),b=a.ub(g);if(!v.Nb(b,0,u*m.ra.Va(g)))return!1}return!0},h.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw m.i.N();this.dD(a)},h.prototype.dD=function(a){this.mc(),a.description=this.description,a.za=null;var u=this.description.Aa,d=null;if(this.za!=null){d=[];for(var g=0;g<u;g++)this.za[g]!=null&&(d[g]=this.za[g].GB(this.I()*m.ra.Va(this.description.Ed(g))))}this.$!=null?(a.$=this.$.Ia(),this.$.copyTo(a.$)):a.$=null,a.wa=this.wa,a.Hm=this.Hm,a.za=d;try{this.op(a)}catch{throw a.Oa(),m.i.fu()}},h.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},h.prototype.Pc=function(a){a==16777215&&(this.Pg=-1,this.$x()),this.Hm|=a,this.lM(),this.vc()},h.prototype.wu=function(a){if(this.mc(),this.ak(192))if(this.$==null?this.$=new m.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(a);for(var u=1;u<this.description.Aa;u++)for(var d=this.description.Ed(u),g=m.ra.Va(d),v=this.za[u],b=0;b<g;b++){var C=new m.Nc;C.Oa();for(var M=0;M<this.wa;M++){var $=v.eg(M*g+b);C.Zb($)}this.$.setInterval(d,b,C)}a&&this.Lf(192,!1)}},h.prototype.hy=function(){this.$.Oa();for(var a=this.za[0],u=new m.h,d=0;d<this.wa;d++)a.tc(2*d,u),this.$.Zb(u)},h.prototype.yp=function(a){a.Oa();for(var u=this.za[0],d=new m.h,g=0;g<this.wa;g++)u.tc(2*g,d),a.Zb(d)},h.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=m.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var a=0;a<this.description.Aa;a++){var u=this.description.Ed(a);if(this.za[a]!=null){var d=m.ra.Va(u),g=m.O.truncate(this.za[a].size/d);g<this.wa&&(g=m.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[a].resize(g*d,m.ra.se(u))),g<this.Pg&&(this.Pg=g)}else this.za[a]=m.Yc.YE(u,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},h.prototype.dm=function(a){if(0>a)throw m.i.N();a!=this.wa&&(this.wa=a,this.Pc(65535))},h.prototype.om=function(a){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=a)return this.ak(8)?1:2}return-1},h.prototype.Ch=function(a,u){if(this.QT=u,a==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),a==0)this.Lf(2,!1),this.Lf(4,!1);else if(a==1)this.Lf(2,!0),this.Lf(4,!1);else{if(a!=2)throw m.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},h.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},h.prototype.kD=function(a,u,d,g){if(0>a||a>=this.wa||0>u||u>=this.wa)throw m.i.fa("index out of bounds");this.mc(),g.Nf(this.description),g.B()&&g.un();for(var v=0;v<this.description.Aa;v++)for(var b=this.description.Ed(v),C=0,M=m.ra.Va(b);C<M;C++){var $=this.za[v].eg(M*a+C),L=this.za[v].eg(M*u+C);g.setAttribute(b,C,m.lc.hq($,L,d))}},h.prototype.yr=function(a,u){var d=this.za[0].o,g=d[2*a]-d[2*u];return a=d[2*a+1]-d[2*u+1],Math.sqrt(g*g+a*a)},h.prototype.KR=function(a){if(0>a||a>=this.wa)throw m.i.ce();this.mc();var u=new m.Sa;u.Nf(this.description),u.B()&&u.un();for(var d=0;d<this.description.Aa;d++)for(var g=this.description.kd(d),v=0,b=m.ra.Va(g);v<b;v++){var C=this.za[d].eg(b*a+v);u.setAttribute(g,v,C)}return u},h.prototype.Dh=function(a,u){if(0>a||a>=this.wa)throw m.i.ce();if(u.B())throw m.i.N();this.mc();for(var d=u.description,g=0;g<d.Aa;g++)for(var v=d.kd(g),b=m.ra.Va(v),C=0;C<b;C++){var M=u.Uc(v,C);this.setAttribute(v,a,C,M)}},h.prototype.lu=function(){return null},h.prototype.fj=function(){return null},h}(m.aa);m.Gx=T}(ye||(ye={})),function(m){var j=function(){function T(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new m.$c(7),this.Zn=null}return T.prototype.Vo=function(p){this.Zn=p},T.prototype.RP=function(){this.Rv=!1},T.prototype.De=function(p){this.ob.De(p)},T.prototype.Pr=function(p){var h=this.ob.Ce();return this.rX(h),this.uX(p,h),h},T.prototype.MP=function(p){this.ob.jd(p)},T.prototype.addElement=function(p,h){return h==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),h=this.Qe),this.FD(p,0,h)},T.prototype.KD=function(p){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(p,1,this.Qe)},T.prototype.xn=function(p){this.Qe==-1&&(this.Qe=this.Pr(-1));var h=this.Qe,a=this.ob.o;if(h==-1||a[7*h]==-1)return p=this.ob.Ll([-1,-1,-1,p,this.gl(),-1,-1]),(a=this.ob.o)[7*h]=p,this.vp(-1,p,h,a),p;var u=h==-1?-1:a[7*h+2];return p=this.ob.Ll([-1,-1,u,p,this.gl(),-1,-1]),(a=this.ob.o)[7*u+1]=p,this.oy(p,a),a[7*p+2]===-1&&(a[7*h]=p),this.vp(-1,p,h,a),p},T.prototype.zu=function(p,h,a,u){var d=-1;d==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),d=this.Qe);var g=this.ob.o;if(d==-1||g[7*d]==-1)return a=this.ob.Ll([-1,-1,-1,a,this.gl(),-1,-1]),(g=this.ob.o)[7*d]=a,this.vp(-1,a,d,g),a;if(u){u=h!=-1?this.Zn.compare(this,a,h):-1;var v=p!=-1?this.Zn.compare(this,a,p):1}else u=-1,v=1;if(u==0||v==0)return g[7*d+3]=u==0?h:p,-1;for((h!=-1&&p!=-1?this.Tm>m.O.bB(this.Tm)>>1:h!=-1)?p=h:u=v,h=!0;;){if(0>u){if((v=g[7*p])==-1){u=p,a=this.ob.Ll([-1,-1,p,a,this.gl(),-1,-1]),(g=this.ob.o)[7*p]=a;break}p=v}else{if((v=g[7*p+1])==-1){u=g[7*p+6],a=this.ob.Ll([-1,-1,p,a,this.gl(),-1,-1]),(g=this.ob.o)[7*p+1]=a;break}p=v}h&&(u*=-1,h=!1)}return this.oy(a,g),g[7*a+2]===-1&&(g[7*d]=a),this.vp(u,a,d,g),a},T.prototype.FF=function(){return this.iR(this.Qe)},T.prototype.vd=function(p,h){h=h==-1?this.Qe:h,this.Rv?this.LP(p,h):this.iY(p,h)},T.prototype.search=function(p,h){for(h=this.sv(h);h!=-1;){var a=this.Zn.compare(this,p,h);if(a==0)return h;h=0>a?this.ll(h):this.Xp(h)}return-1},T.prototype.IW=function(p){for(var h=this.sv(-1),a=-1;h!=-1;){var u=p.compare(this,h);if(u==0)return h;0>u?h=this.ll(h):(a=h,h=this.Xp(h))}return a},T.prototype.uJ=function(p){for(var h=this.sv(-1),a=-1;h!=-1;){var u=p.compare(this,h);if(u==0)return h;0>u?(a=h,h=this.ll(h)):h=this.Xp(h)}return a},T.prototype.ja=function(p){return this.ob.T(p,3)},T.prototype.ll=function(p){return this.ob.T(p,0)},T.prototype.Xp=function(p){return this.ob.T(p,1)},T.prototype.getParent=function(p){return this.ob.T(p,2)},T.prototype.lb=function(p){return this.ob.T(p,6)},T.prototype.we=function(p){return this.ob.T(p,5)},T.prototype.rc=function(p){return p==-1?this.kl(this.Qe):this.kl(p)},T.prototype.Fc=function(p){return p==-1?this.Zr(this.Qe):this.Zr(p)},T.prototype.ZR=function(p){return p==-1?this.bG(this.Qe):this.bG(p)},T.prototype.Sj=function(p,h){this.NB(p,h)},T.prototype.sv=function(p){return p==-1?this.YF(this.Qe):this.YF(p)},T.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},T.prototype.size=function(p){return p==-1?this.$F(this.Qe):this.$F(p)},T.prototype.KN=function(p,h){for(var a=h[7*p],u=h[7*p+1],d=h[7*p+4];a!=-1||u!=-1;){var g=a!=-1?h[7*a+4]:2147483647;if(u=u!=-1?h[7*u+4]:2147483647,d<=Math.min(g,u))break;g<=u?this.sJ(a,h):this.rJ(p,h),a=h[7*p],u=h[7*p+1]}},T.prototype.oy=function(p,h){if(this.Rv)for(var a=h[7*p+4],u=h[7*p+2];u!=-1&&h[7*u+4]>a;)h[7*u]==p?this.sJ(p,h):this.rJ(u,h),u=h[7*p+2]},T.prototype.rJ=function(p,h){var a=h[7*p+1];h[7*a+2]=h[7*p+2],h[7*p+2]=a;var u=h[7*a];h[7*p+1]=u,u!=-1&&(h[7*u+2]=p),h[7*a]=p,(u=h[7*a+2])!=-1&&(h[7*u]==p?h[7*u]=a:h[7*u+1]=a)},T.prototype.sJ=function(p,h){var a=h[7*p+2];h[7*p+2]=h[7*a+2],h[7*a+2]=p;var u=h[7*p+1];h[7*a]=u,u!=-1&&(h[7*u+2]=a),h[7*p+1]=a,(u=h[7*p+2])!=-1&&(h[7*u]===a?h[7*u]=p:h[7*u+1]=p)},T.prototype.Pk=function(p,h){this.ob.S(p,2,h)},T.prototype.TB=function(p,h){this.ob.S(p,0,h)},T.prototype.XB=function(p,h){this.ob.S(p,1,h)},T.prototype.WB=function(p,h){this.ob.S(p,5,h)},T.prototype.ex=function(p,h){this.ob.S(p,6,h)},T.prototype.XJ=function(p,h){this.ob.S(h,0,p)},T.prototype.rX=function(p){this.ob.S(p,4,0)},T.prototype.uX=function(p,h){this.ob.S(h,5,p)},T.prototype.YF=function(p){return p==-1?-1:this.ob.T(p,0)},T.prototype.kl=function(p){return p==-1?-1:this.ob.T(p,1)},T.prototype.Zr=function(p){return p==-1?-1:this.ob.T(p,2)},T.prototype.iR=function(p){return p==-1?-1:this.ob.T(p,3)},T.prototype.$F=function(p){return p==-1?0:this.ob.T(p,4)},T.prototype.bG=function(p){return this.ob.T(p,5)},T.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},T.prototype.fl=function(p){p!=-1&&this.ob.jd(p)},T.prototype.gl=function(){return this.Tm=m.O.bB(this.Tm),1073741823&this.Tm},T.prototype.FD=function(p,h,a){var u=this.ob.o;if(a==-1||u[7*a]==-1)return p=this.ob.Ll([-1,-1,-1,p,this.gl(),-1,-1]),(u=this.ob.o)[7*a]=p,this.vp(-1,p,a,u),p;for(var d=a==-1?-1:u[7*a];;){var g=h==-1?1:this.Zn.compare(this,p,d);if(0>g){if((g=this.ll(d))==-1){h=d,p=this.ob.Ll([-1,-1,d,p,this.gl(),-1,-1]),(u=this.ob.o)[7*d]=p;break}d=g}else{if(h==1&&g==0)return u[7*a+3]=d,-1;if((g=u[7*d+1])==-1){h=u[7*d+6],p=this.ob.Ll([-1,-1,d,p,this.gl(),-1,-1]),(u=this.ob.o)[7*d+1]=p;break}d=g}}return this.oy(p,u),u[7*p+2]===-1&&(u[7*a]=p),this.vp(h,p,a,u),p},T.prototype.vp=function(p,h,a,u){if(p!=-1){var d=u[7*p+5];u[7*p+5]=h}else d=a==-1?-1:u[7*a+2];u[7*h+5]=d,d!=-1&&(u[7*d+6]=h),u[7*h+6]=p,p==(a==-1?-1:u[7*a+1])&&(u[7*a+1]=h),p==-1&&(u[7*a+2]=h),u[7*a+4]=(a==-1?0:u[7*a+4])+1},T.prototype.AB=function(p,h){var a=this.ob.o,u=a[7*p+5];p=a[7*p+6],u!=-1?a[7*u+6]=p:a[7*h+1]=p,p!=-1?a[7*p+5]=u:a[7*h+2]=u,a[7*h+4]=h===-1?-1:a[7*h+4]-1},T.prototype.iY=function(p,h){this.AB(p,h);var a=this.ll(p),u=this.Xp(p),d=this.getParent(p),g=p;if(a!=-1&&u!=-1){this.Tm=m.O.bB(this.Tm);var v=1073741823<this.Tm?this.lb(p):this.we(p),b=this.getParent(v)==p;this.ob.gC(p,v,0),this.ob.gC(p,v,1),this.ob.gC(p,v,2),d!=-1?this.ll(d)==p?this.TB(d,v):this.XB(d,v):this.XJ(v,h),b?(a==v?(this.TB(v,p),this.Pk(u,v)):u==v&&(this.XB(v,p),this.Pk(a,v)),this.Pk(p,v),d=v):(this.Pk(a,v),this.Pk(u,v),d=this.getParent(p),g=v),a=this.ll(p),u=this.Xp(p),a!=-1&&this.Pk(a,p),u!=-1&&this.Pk(u,p)}a=a!=-1?a:u,d==-1?this.XJ(a,h):this.ll(d)==g?this.TB(d,a):this.XB(d,a),a!=-1&&this.Pk(a,d),this.fl(p)},T.prototype.LP=function(p,h){var a=this.ob.o;a[7*p+4]=2147483647;var u=-1,d=-1,g=h===-1?-1:a[7*h],v=g==p;if(v&&(u=a[7*g],d=a[7*g+1],u==-1&&d==-1))return this.AB(g,h),this.fl(g),void(a[7*h]=-1);this.KN(p,a),(g=a[7*p+2])!=-1&&(a[7*g]==p?a[7*g]=-1:a[7*g+1]=-1),this.AB(p,h),this.fl(p),v&&(a[7*h]=u==-1||a[7*u+2]!=-1?d:u)},T.prototype.NB=function(p,h){this.ob.S(p,3,h)},T}();m.Yj=j}(ye||(ye={})),function(m){var j=function(){function T(p,h){p!==void 0&&this.K(p,h)}return T.prototype.K=function(p,h){this.oa=p,this.va=h,this.normalize()},T.prototype.isIntersecting=function(p){return this.oa<=p.oa?this.va>=p.oa:p.va>=this.oa},T.prototype.move=function(p){this.B()||(this.oa+=p,this.va+=p)},T.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var p=this.oa;this.oa=this.va,this.va=p}isNaN(this.va)&&this.Oa()}},T.prototype.Oa=function(){this.va=this.oa=NaN},T.prototype.B=function(){return isNaN(this.oa)},T.prototype.Zb=function(p){typeof p=="number"?this.B()?this.va=this.oa=p:this.Lk(p):p.B()||(this.B()?(this.oa=p.oa,this.va=p.va):(this.oa>p.oa&&(this.oa=p.oa),this.va<p.va&&(this.va=p.va),this.oa>this.va&&this.Oa()))},T.prototype.Lk=function(p){p<this.oa?this.oa=p:p>this.va&&(this.va=p)},T.prototype.contains=function(p){return typeof p=="number"?p>=this.oa&&p<=this.va:p.oa>=this.oa&&p.va<=this.va},T.prototype.Ea=function(p){this.B()||p.B()?this.Oa():(this.oa<p.oa&&(this.oa=p.oa),this.va>p.va&&(this.va=p.va),this.oa>this.va&&this.Oa())},T.prototype.W=function(p){this.B()||(this.oa-=p,this.va+=p,this.va<this.oa&&this.Oa())},T.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},T.prototype.KB=function(p,h){p>h?(this.oa=h,this.va=p):(this.oa=p,this.va=h)},T.prototype.It=function(p){return m.O.Rk(p,this.oa,this.va)},T.prototype.R=function(){return this.va-this.oa},T.prototype.sf=function(){return .5*(this.oa+this.va)},T.prototype.Nb=function(p){return p==this||p instanceof T&&(!(!this.B()||!p.B())||this.oa==p.oa&&this.va==p.va)},T.prototype.cc=function(){return m.O.uj(m.O.uj())},T}();m.Nc=j}(ye||(ye={})),function(m){var j=new m.Nc,T=new m.Nc,p=function(){this.ne=null,this.pb=-1,this.sb=new m.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new m.Nc,this.Uf.KB(0,0)};m.IY=p;var h=function(){function a(u,d,g){this.g=u,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=d,this.Nq=10*d,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=g,this.TA=new p,this.YH=new p,m.O.truncate(3*u.fd/2)}return a.prototype.mG=function(u,d,g,v){u.ne=v===null?null:v[g[5*d]],u.Tv=u.ne!=null,u.Tv||((v=g[5*d+2])!==-1&&this.g.mW(g[5*d],g[5*v],u.sb),u.ne=u.sb,u.Uf.KB(u.sb.sa,u.sb.pa),u.Uf.va+=this.qa,u.sb.rI(),u.Vv=u.sb.la==u.sb.na,u.Vv||(u.qA=(u.sb.pa-u.sb.sa)/(u.sb.la-u.sb.na)))},a.prototype.OO=function(u,d){var g=u.zr(d,this.qa,!0);return g!=0?g==2?this.Qy():this.xi():(u.Yp(ms),u.Tr(gn),d.Yp(Ji),d.Tr(is),Ai.ma(this.Kq,this.Hk),ms.qb(Ji)&&this.Hk==ms.y?0>gn.compare(is)?Ai.L(gn):Ai.L(is):ms.qb(is)&&this.Hk==ms.y?0>gn.compare(Ji)?Ai.L(gn):Ai.L(Ji):Ji.qb(gn)&&this.Hk==Ji.y?0>ms.compare(is)?Ai.L(ms):Ai.L(is):gn.qb(is)&&this.Hk==gn.y&&(0>ms.compare(Ji)?Ai.L(ms):Ai.L(Ji)),u.Pe(Ai.y,Ai.x)<d.Pe(Ai.y,Ai.x)?-1:1)},a.prototype.MO=function(u,d){if(u.sb.na==d.sb.na&&u.sb.sa==d.sb.sa)return u.sb.la==d.sb.la&&u.sb.pa==d.sb.pa?this.gA?this.Qy():0:this.PE(u,d);if(u.sb.la==d.sb.la&&u.sb.pa==d.sb.pa)return this.OE(u,d);var g=this.OE(u,d);return u=this.PE(u,d),0>g&&0>u?-1:0<g&&0<u?1:this.xi()},a.prototype.IO=function(u,d){if(u.pa>d.pa){if(d.pa>d.sa&&d.la-d.na<2*this.qa&&u.vi(d.pa,d.la,this.qa))return this.xi()}else if((d.la-d.na)/(d.pa-d.sa)*(u.pa-u.sa)<this.Nq&&d.vi(u.pa,u.la,this.qa))return this.xi();return 1},a.prototype.JO=function(u,d){if(u.sa<d.sa){if(d.pa>d.sa&&d.la-d.na<2*this.qa&&u.vi(d.pa,d.la,this.qa))return this.xi()}else if((d.la-d.na)/(d.pa-d.sa)*(u.sa-u.pa)<this.Nq&&d.vi(u.sa,u.na,this.qa))return this.xi();return-1},a.prototype.KO=function(u,d){var g=new m.h;g.uc(d.wc(),d.ac()),g.ar(),g.normalize();var v=new m.h;v.uc(u.ac(),d.ac());var b=new m.h;b.uc(u.wc(),d.ac()),v=v.Qh(g),g=b.Qh(g),b=Math.abs(v);var C=Math.abs(g);if(b<C){if(b<this.Nq&&d.vi(u.sa,u.na,this.qa))return this.xi()}else if(C<this.Nq&&d.vi(u.pa,u.la,this.qa))return this.xi();return 0>v&&0>g?-1:0<v&&0<g?1:this.xi()},a.prototype.NE=function(u,d){return u.na==d.na&&u.sa==d.sa?this.IO(u,d):u.la==d.la&&u.pa==d.pa?this.JO(u,d):this.KO(u,d)},a.prototype.LO=function(u,d){return u.la==d.la&&u.pa==d.pa&&u.na==d.na&&u.sa==d.sa?this.gA?this.Qy():0:this.xi()},a.prototype.OE=function(u,d){var g=1;if(u.sb.na<d.sb.na){g=-1;var v=u;u=d,d=v}u=u.sb,v=d.sb;var b=u.sa-v.sa;d=d.qA*(u.na-v.na);var C=this.Nq;return b<d-C?-g:b>d+C?g:v.vi(u.sa,u.na,this.qa)?this.xi():b<d?-g:g},a.prototype.PE=function(u,d){var g=1;if(d.sb.la<u.sb.la){g=-1;var v=u;u=d,d=v}u=u.sb,v=d.sb;var b=u.pa-v.sa;d=d.qA*(u.la-v.na);var C=this.Nq;return b<d-C?-g:b>d+C?g:v.vi(u.pa,u.la,this.qa)?this.xi():b<d?-g:g},a.prototype.Qy=function(){return this.rg=!0,this.Ni=new m.Md(5,this.Lo,this.gt),-1},a.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new m.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},a.prototype.NO=function(u,d,g,v){if(this.rg)return-1;var b=this.OH==this.Hk&&this.NH==this.Kq;if(b&&u==this.Ws)var C=this.PH;else C=NaN,this.Ws=-1;return b&&d==this.Xs?b=this.QH:(b=NaN,this.Xs=-1),g.ne.ZI(j),v.ne.ZI(T),j.va<T.oa?-1:T.va<j.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(C)&&(this.Ws=u,this.PH=C=u=g.ne.Pe(this.Hk,this.Kq)),isNaN(b)&&(this.Xs=d,this.QH=b=u=v.ne.Pe(this.Hk,this.Kq)),Math.abs(C-b)<=this.qa?this.OO(g.ne,v.ne):C<b?-1:C>b?1:0)},a.prototype.Kr=function(){this.rg=!1},a.prototype.rm=function(){return this.Ni},a.prototype.$J=function(u,d){this.Hk=u,this.Kq=d,this.gt=this.Lo=this.Xs=this.Ws=-1},a.prototype.compare=function(u,d,g){return this.rg?-1:(u=u.ja(g),this.Dm=g,this.RE(d,d,u,u))},a.prototype.RE=function(u,d,g,v){if(this.Lo==d)var b=this.TA;else this.Lo=d,b=this.TA,this.TA.pb=u,this.mG(b,d,this.g.td.o,this.g.We);if(C==null){this.gt=v;var C=this.YH;this.YH.pb=g,this.mG(C,v,this.g.td.o,this.g.We)}return b.Tv||C.Tv?this.NO(d,v,b,C):b.Uf.va<C.Uf.oa?-1:C.Uf.va<b.Uf.oa?1:(u=b.Vv?1:0,(u|=C.Vv?2:0)==0?this.MO(b,C):u==1?this.NE(b.sb,C.sb):u==2?-1*this.NE(C.sb,b.sb):this.LO(b.sb,C.sb))},a}();m.UC=h}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.g=p,this.qa=h,this.rg=!1,this.Lo=-1,this.Uf=new m.Nc,this.Gq=new m.h,this.Gq.Rc(),this.ie=new m.yb,this.Dm=-1,this.BA=17976931348623157e292}return T.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},T.prototype.Dh=function(p){this.Gq.L(p)},T.prototype.compare=function(p,h){return this.SE(h,p.ja(h))},T.prototype.SE=function(p,h){var a=this.g.bc(h)!=null;if(a||(this.g.ed(h,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),a)throw m.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=p,this.rg=!0,0;this.ie.rI(),a=this.ie.ac(),(h=new m.h).uc(this.ie.wc(),a),h.ar();var u=new m.h;return u.uc(this.Gq,a),a=h.Qh(u),(a/=h.length())<10*-this.qa?-1:a>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((h=Math.abs(a))<this.BA&&(this.Dm=p,this.BA=h),this.rg=!0,h<.25*this.qa)?0:0>a?-1:1},T}();m.aM=j}(ye||(ye={})),function(m){function j(p,h,a,u){a=new Float64Array(p.subarray(a,u)),p.set(a,h)}var T=function(){function p(h){this.Pb=this.pk=!1,this.o=null;var a=h;2>a&&(a=2),this.o=new Float64Array(a),this.size=h}return p.prototype.rotate=function(h,a,u){if(this.Pb)throw m.i.fa("invalid_call");if(a<h||a>u||h>u)throw m.i.N();h!=a&&u!=a&&(this.ni(h,a-h,1),this.ni(a,u-a,1),this.ni(h,u-h,1))},p.qf=function(h,a){var u=new p(h),d=u.o;if(2>h&&(h=2),a!==0)for(var g=0;g<h;g++)d[g]=a;return u},p.Bn=function(h){var a=new p(0);return a.o=new Float64Array(h.o),a.size=h.size,a},p.Lr=function(h,a){var u=new p(0);return u.size=h.size,u.size>a&&(u.size=a),2>(a=u.size)&&(a=2),u.o=new Float64Array(a),u.o.set(h.o.length<=a?h.o:h.o.subarray(0,a),0),u},p.prototype.Jb=function(h){0>=h||(this.o==null?this.o=new Float64Array(h):h<=this.o.length||(0<this.o.length?((h=new Float64Array(h)).set(this.o),this.o=h):this.o=new Float64Array(h)))},p.prototype.read=function(h){return this.o[h]},p.prototype.tc=function(h,a){a.x=this.o[h],a.y=this.o[h+1]},p.prototype.get=function(h){return this.o[h]},p.prototype.write=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.set=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.Tt=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.add=function(h){this.resize(this.size+1),this.o[this.size-1]=h},p.prototype.GB=function(h){return p.Lr(this,h)},p.prototype.eg=function(h){return this.read(h)},p.prototype.resize=function(h,a){if(a===void 0&&(a=0),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(h<=this.size){if(30<this.o.length&&5*h/4<this.o.length){var u=new Float64Array(this.o,0,h);this.o=u}}else{h>this.o.length&&(u=m.O.truncate(64>h?Math.max(2*h,4):5*h/4),(u=new Float64Array(u)).set(this.o),this.o=u),u=this.o;for(var d=this.size;d<h;d++)u[d]=a}this.size=h},p.prototype.Bh=function(h){if((this.o==null||h>this.o.length)&&this.resize(h),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=h},p.prototype.pr=function(h,a){this.write(h,a)},p.prototype.An=function(h,a,u){for(var d=this.size;a<d&&a<u;a++)h=m.O.uj(this.read(a));return h},p.prototype.Nb=function(h,a,u){if(h==null||!(h instanceof p))return!1;var d=this.size,g=h.size;if(u>d||u>g&&d!=g)return!1;for(u>d&&(u=d);a<u;a++)if(this.read(a)!=h.read(a))return!1;return!0},p.prototype.addRange=function(h,a,u,d,g){if(this.Pb)throw m.i.Hb();if(!d&&(1>g||u%g!=0))throw m.i.N();var v=this.size;if(this.resize(v+u),d)this.o.set(h.o.subarray(a,a+u),v);else{d=u;for(var b=0;b<u;b+=g){d-=g;for(var C=0;C<g;C++)this.o[v+b+C]=h.o[a+d+C]}}},p.prototype.Mn=function(h,a,u,d,g,v,b){if(this.Pb)throw m.i.Hb();if(!g&&(1>v||d%v!=0))throw m.i.N();var C=this.size-b;if(C<d&&this.resize(this.size+d-C),j(this.o,h+d,h,h+(b-h)),this.o==a.o&&h<u&&(u+=d),g)this.o.set(a.o.subarray(u,u+d),h);else for(g=d,b=0;b<d;b+=v)for(g-=v,C=0;C<v;C++)this.o[h+b+C]=a.o[u+g+C]},p.prototype.Iz=function(h,a,u,d,g,v){if(this.Pb)throw m.i.Hb();if(0>v&&(v=this.size),this.size+2*d>this.o.length?this.resize(this.size+2*d):this.size+=2*d,j(this.o,h+2*d,h,h+(v-h)),g)for(g=0;g<d;g++)v=a[u++],this.o[h++]=v.x,this.o[h++]=v.y;else{g=0;for(var b=d-1;g<d;++g)v=a[u+b],this.o[h++]=v.x,this.o[h++]=v.y,b--}},p.prototype.Ln=function(h,a,u,d){if(this.Pb)throw m.i.Hb();for(d-=h,j(this.o,h+d,h,h+d),d=0;d<u;d++)this.o[h+d]=a},p.prototype.vj=function(h,a,u){if(this.Pb)throw m.i.Hb();j(this.o,h+2,h,h+(u-h)),this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.Ut=function(h,a,u,d,g,v){if(0>h||0>a||0>d||!g&&(0>=v||a%v!=0)||u.size<d+a)throw m.i.N();if(a!=0)if(this.size<a+h&&this.resize(a+h),u==this)this.Ar(h,a,d,g,v);else if(g)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d++;else if(d=d+a-v,v==1)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d--;else for(g=0,a=m.O.truncate(a/v);g<a;g++){for(var b=0;b<v;b++)this.o[h+b]=u.o[d+b];h+=v,d-=v}},p.prototype.En=function(h,a,u){if(this.Pb||h+a>this.size)throw m.i.Hb();0<u-(h+a)&&j(this.o,h,h+a,h+(u-(h+a))+a),this.size-=a},p.prototype.ni=function(h,a,u){if(this.Pb||1>u||a%u!=0)throw m.i.Hb();for(var d=a>>1,g=0;g<d;g+=u){a-=u;for(var v=0;v<u;v++){var b=this.o[h+g+v];this.o[h+g+v]=this.o[h+a+v],this.o[h+a+v]=b}}},p.prototype.Wj=function(h,a,u){if(0>a||0>u||0>a||u+a>this.size)throw m.i.N();for(var d=a;d<a+u;d++)this.o[d]=h},p.prototype.Ar=function(h,a,u,d,g){if(!(d&&h==u||(this.o.set(this.o.subarray(u,u+a),h),d)))for(u=h,h=h+a-g,d=0,a=m.O.truncate(a/2);d<a;d++){for(var v=0;v<g;v++){var b=this.o[u+v];this.o[u+v]=this.o[h+v],this.o[h+v]=b}u+=g,h-=g}},p.prototype.vC=function(h,a,u,d,g){if(0>h||0>a||0>d)throw m.i.N();if(a!=0)for(this.size<(a<<1)+h&&this.resize((a<<1)+h),g||(h+=a-1<<1),g=g?2:-2,a+=d;d<a;d++)this.o[h]=u[d].x,this.o[h+1]=u[d].y,h+=g},p.prototype.uC=function(h,a,u){if(0>h||0>a)throw m.i.N();if(a!=0){this.size<(a<<1)+h&&this.resize((a<<1)+h),a+=0;for(var d=0;d<a;d++)this.o[h]=u[d][0],this.o[h+1]=u[d][1],h+=2}},p.prototype.Vw=function(h,a,u,d,g){if(0>h||0>a||0>d||this.size<a+h)throw m.i.N();if(g)for(g=0;g<a;g++)u[d+g]=this.o[h+g];else for(d=d+a-1;h<a;h++)u[d]=this.o[h],d--},p.prototype.uB=function(h,a,u){if(0>h||0>a||this.size<(a>>1)+h)throw m.i.N();if(a!=0){a=0+a;for(var d=0;d<a;d++)u[d][0]=this.o[h],u[d][1]=this.o[h+1],h+=2}},p.prototype.clear=function(h){h?this.resize(0):this.Bh(0)},p.prototype.ix=function(){this.pk=this.Pb=!0},p.prototype.Vd=function(h,a,u){Array.prototype.sort.call(this.o.subarray(h,a),u)},p.prototype.Tp=function(){return 1},p}();m.be=T}(ye||(ye={})),function(m){function j(p,h,a,u){a=new Int32Array(p.subarray(a,u)),p.set(a,h)}m.rY=function(){this.random=1973};var T=function(){function p(h){this.Pb=this.pk=!1,this.o=null;var a=h;2>a&&(a=2),this.o=new Int32Array(a),this.size=h}return p.prototype.rotate=function(h,a,u){if(this.Pb)throw m.i.fa("invalid_call");if(a<h||a>u||h>u)throw m.i.N();h!=a&&u!=a&&(this.ni(h,a-h,1),this.ni(a,u-a,1),this.ni(h,u-h,1))},p.qf=function(h,a){var u=new p(h),d=u.o;if(2>h&&(h=2),a!==0)for(var g=0;g<h;g++)d[g]=a;return u},p.Bn=function(h){var a=new p(0);return a.o=new Int32Array(h.o),a.size=h.size,a},p.Lr=function(h,a){var u=new p(0);return u.size=h.size,u.size>a&&(u.size=a),2>(a=u.size)&&(a=2),u.o=new Int32Array(a),u.o.set(h.o.length<=a?h.o:h.o.subarray(0,a),0),u},p.prototype.Jb=function(h){0>=h||(this.o==null?this.o=new Int32Array(h):h<=this.o.length||(0<this.o.length?((h=new Int32Array(h)).set(this.o),this.o=h):this.o=new Int32Array(h)))},p.prototype.read=function(h){return this.o[h]},p.prototype.tc=function(h,a){a.x=this.o[h],a.y=this.o[h+1]},p.prototype.get=function(h){return this.o[h]},p.prototype.write=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.set=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.Tt=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.add=function(h){this.resize(this.size+1),this.o[this.size-1]=h},p.prototype.GB=function(h){return p.Lr(this,h)},p.prototype.eg=function(h){return this.read(h)},p.prototype.resize=function(h,a){if(a===void 0&&(a=0),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(h<=this.size){if(30<this.o.length&&5*h/4<this.o.length){var u=new Int32Array(this.o,0,h);this.o=u}}else{h>this.o.length&&(u=m.O.truncate(64>h?Math.max(2*h,4):5*h/4),(u=new Int32Array(u)).set(this.o),this.o=u),u=this.o;for(var d=this.size;d<h;d++)u[d]=a}this.size=h},p.prototype.Bh=function(h){if((this.o==null||h>this.o.length)&&this.resize(h),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=h},p.prototype.pr=function(h,a){this.write(h,a)},p.prototype.An=function(h,a,u){for(var d=this.size;a<d&&a<u;a++)h=m.O.Th(this.read(a),h);return h},p.prototype.Nb=function(h,a,u){if(h==null||!(h instanceof p))return!1;var d=this.size,g=h.size;if(u>d||u>g&&d!=g)return!1;for(u>d&&(u=d);a<u;a++)if(this.read(a)!=h.read(a))return!1;return!0},p.prototype.addRange=function(h,a,u,d,g){if(this.Pb)throw m.i.Hb();if(!d&&(1>g||u%g!=0))throw m.i.N();var v=this.size;if(this.resize(v+u),d)this.o.set(h.o.subarray(a,a+u),v);else{d=u;for(var b=0;b<u;b+=g){d-=g;for(var C=0;C<g;C++)this.o[v+b+C]=h.o[a+d+C]}}},p.prototype.Mn=function(h,a,u,d,g,v,b){if(this.Pb)throw m.i.Hb();if(!g&&(1>v||d%v!=0))throw m.i.N();if(j(this.o,h+d,h,h+(b-h)),this.o==a.o&&h<u&&(u+=d),g)this.o.set(a.o.subarray(u,u+d),h);else for(g=d,b=0;b<d;b+=v){g-=v;for(var C=0;C<v;C++)this.o[h+b+C]=a.o[u+g+C]}},p.prototype.Iz=function(h,a,u,d,g,v){if(this.Pb)throw m.i.Hb();if(0>v&&(v=this.size),this.size+2*d>this.o.length?this.resize(this.size+2*d):this.size+=2*d,j(this.o,h+2*d,h,h+(v-h)),g)for(g=0;g<d;g++)v=a[u++],this.o[h++]=v.x,this.o[h++]=v.y;else{g=0;for(var b=d-1;g<d;++g)v=a[u+b],this.o[h++]=v.x,this.o[h++]=v.y,b--}},p.prototype.Ln=function(h,a,u,d){if(this.Pb)throw m.i.Hb();for(d-=h,j(this.o,h+d,h,h+d),d=0;d<u;d++)this.o[h+d]=a},p.prototype.vj=function(h,a,u){if(this.Pb)throw m.i.Hb();j(this.o,h+2,h,h+(u-h)),this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.Ut=function(h,a,u,d,g,v){if(0>h||0>a||0>d||!g&&(0>=v||a%v!=0)||u.size<d+a)throw m.i.N();if(a!=0)if(this.size<a+h&&this.resize(a+h),u==this)this.Ar(h,a,d,g,v);else if(g)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d++;else if(d=d+a-v,v==1)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d--;else for(g=0,a=m.O.truncate(a/v);g<a;g++){for(var b=0;b<v;b++)this.o[h+b]=u.o[d+b];h+=v,d-=v}},p.prototype.En=function(h,a,u){if(this.Pb||h+a>this.size)throw m.i.Hb();0<u-(h+a)&&j(this.o,h,h+a,h+(u-(h+a))+a),this.size-=a},p.prototype.ni=function(h,a,u){if(this.Pb||1>u||a%u!=0)throw m.i.Hb();for(var d=a>>1,g=0;g<d;g+=u){a-=u;for(var v=0;v<u;v++){var b=this.o[h+g+v];this.o[h+g+v]=this.o[h+a+v],this.o[h+a+v]=b}}},p.prototype.Wj=function(h,a,u){if(0>a||0>u||0>a||u+a>this.size)throw m.i.N();for(var d=a;d<a+u;d++)this.o[d]=h},p.prototype.Ar=function(h,a,u,d,g){if(!(d&&h==u||(this.o.set(this.o.subarray(u,u+a),h),d)))for(u=h,h=h+a-g,d=0,a=m.O.truncate(a/2);d<a;d++){for(var v=0;v<g;v++){var b=this.o[u+v];this.o[u+v]=this.o[h+v],this.o[h+v]=b}u+=g,h-=g}},p.prototype.vC=function(h,a,u,d,g){if(0>h||0>a||0>d)throw m.i.N();if(a!=0)for(this.size<(a<<1)+h&&this.resize((a<<1)+h),g||(h+=a-1<<1),g=g?2:-2,a+=d;d<a;d++)this.o[h]=u[d].x,this.o[h+1]=u[d].y,h+=g},p.prototype.Vw=function(h,a,u,d,g){if(0>h||0>a||0>d||this.size<a+h)throw m.i.N();if(g)for(g=0;g<a;g++)u[d+g]=this.o[h+g];else for(d=d+a-1;h<a;h++)u[d]=this.o[h],d--},p.prototype.clear=function(h){h?this.resize(0):this.Bh(0)},p.prototype.ix=function(){this.pk=this.Pb=!0},p.prototype.Vd=function(h,a,u){10>a-h?p.rG(this.o,h,a,u):p.qB(this.o,h,a-1,u)},p.prototype.Tp=function(){return 2},p.prototype.Fc=function(){return this.o[this.size-1]},p.prototype.If=function(){this.resize(this.size-1)},p.prototype.bX=function(h){this.o[this.size-1]=h},p.prototype.SV=function(h){h<this.size-1&&(this.o[h]=this.o[this.size-1]),this.resize(this.size-1)},p.prototype.lF=function(h){for(var a=0,u=this.size;a<u;a++)if(this.o[a]==h)return a;return-1},p.prototype.hG=function(h){return 0<=this.lF(h)},p.rG=function(h,a,u,d){for(var g=a;g<u;g++){for(var v=h[g],b=g-1;b>=a&&0<d(h[b],v);)h[b+1]=h[b],b--;h[b+1]=v}},p.tx=function(h,a,u){var d=h[u];h[u]=h[a],h[a]=d},p.qB=function(h,a,u,d){if(!(a>=u))for(;;){if(9>u-a){p.rG(h,a,u+1,d);break}var g=h[a];p.tx(h,a,u);for(var v=a,b=a;b<u;b++)0>=d(h[b],g)&&(p.tx(h,v,b),v+=1);p.tx(h,v,u),v-a<u-v?(p.qB(h,a,v-1,d),a=v+1):(p.qB(h,v+1,u,d),u=v-1)}},p}();m.ia=T}(ye||(ye={})),function(m){function j(p,h,a,u){a=new Int8Array(p.subarray(a,u)),p.set(a,h)}var T=function(){function p(h){this.o=null;var a=h;2>a&&(a=2),this.o=new Int8Array(a),this.size=h}return p.prototype.rotate=function(h,a,u){if(this.Pb)throw m.i.fa("invalid_call");if(a<h||a>u||h>u)throw m.i.N();h!=a&&u!=a&&(this.ni(h,a-h,1),this.ni(a,u-a,1),this.ni(h,u-h,1))},p.qf=function(h,a){var u=new p(h),d=u.o;if(2>h&&(h=2),a!==0)for(var g=0;g<h;g++)d[g]=a;return u},p.Bn=function(h){var a=new p(0);return a.o=new Int8Array(h.o),a.size=h.size,a},p.Lr=function(h,a){var u=new p(0);return u.size=h.size,u.size>a&&(u.size=a),2>(a=u.size)&&(a=2),u.o=new Int8Array(a),u.o.set(h.o.length<=a?h.o:h.o.subarray(0,a),0),u},p.prototype.Jb=function(h){0>=h||(this.o==null?this.o=new Int8Array(h):h<=this.o.length||(0<this.o.length?((h=new Int8Array(h)).set(this.o),this.o=h):this.o=new Int8Array(h)))},p.prototype.read=function(h){return this.o[h]},p.prototype.tc=function(h,a){a.x=this.o[h],a.y=this.o[h+1]},p.prototype.get=function(h){return this.o[h]},p.prototype.write=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.set=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.Tt=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.add=function(h){this.resize(this.size+1),this.o[this.size-1]=h},p.prototype.GB=function(h){return p.Lr(this,h)},p.prototype.eg=function(h){return this.read(h)},p.prototype.resize=function(h,a){if(a===void 0&&(a=0),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(h<=this.size){if(30<this.o.length&&5*h/4<this.o.length){var u=new Int8Array(this.o,0,h);this.o=u}}else{h>this.o.length&&(u=m.O.truncate(64>h?Math.max(2*h,4):5*h/4),(u=new Int8Array(u)).set(this.o),this.o=u),u=this.o;for(var d=this.size;d<h;d++)u[d]=a}this.size=h},p.prototype.Bh=function(h){if((this.o==null||h>this.o.length)&&this.resize(h),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=h},p.prototype.pr=function(h,a){this.write(h,a)},p.prototype.An=function(h,a,u){for(var d=this.size;a<d&&a<u;a++)h=m.O.Th(this.read(a),h);return h},p.prototype.Nb=function(h,a,u){if(h==null||!(h instanceof p))return!1;var d=this.size,g=h.size;if(u>d||u>g&&d!=g)return!1;for(u>d&&(u=d);a<u;a++)if(this.read(a)!=h.read(a))return!1;return!0},p.prototype.addRange=function(h,a,u,d,g){if(this.Pb)throw m.i.Hb();if(!d&&(1>g||u%g!=0))throw m.i.N();var v=this.size;if(this.resize(v+u),d)this.o.set(h.o.subarray(a,a+u),v);else{d=u;for(var b=0;b<u;b+=g){d-=g;for(var C=0;C<g;C++)this.o[v+b+C]=h.o[a+d+C]}}},p.prototype.Mn=function(h,a,u,d,g,v,b){if(this.Pb)throw m.i.Hb();if(!g&&(1>v||d%v!=0))throw m.i.N();if(j(this.o,h+d,h,h+(b-h)),this.o==a.o&&h<u&&(u+=d),g)this.o.set(a.o.subarray(u,u+d),h);else for(g=d,b=0;b<d;b+=v){g-=v;for(var C=0;C<v;C++)this.o[h+b+C]=a.o[u+g+C]}},p.prototype.Ln=function(h,a,u,d){if(this.Pb)throw m.i.Hb();for(d-=h,j(this.o,h+d,h,h+d),d=0;d<u;d++)this.o[h+d]=a},p.prototype.Iz=function(h,a,u,d,g,v){if(this.Pb)throw m.i.Hb();if(0>v&&(v=this.size),this.size+2*d>this.o.length?this.resize(this.size+2*d):this.size+=2*d,j(this.o,h+2*d,h,h+(v-h)),g)for(g=0;g<d;g++)v=a[u++],this.o[h++]=v.x,this.o[h++]=v.y;else{g=0;for(var b=d-1;g<d;++g)v=a[u+b],this.o[h++]=v.x,this.o[h++]=v.y,b--}},p.prototype.vj=function(h,a,u){if(this.Pb)throw m.i.Hb();j(this.o,h+2,h,h+(u-h)),this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.Ut=function(h,a,u,d,g,v){if(0>h||0>a||0>d||!g&&(0>=v||a%v!=0)||u.size<d+a)throw m.i.N();if(a!=0)if(this.size<a+h&&this.resize(a+h),u==this)this.Ar(h,a,d,g,v);else if(g)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d++;else if(d=d+a-v,v==1)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d--;else for(g=0,a=m.O.truncate(a/v);g<a;g++){for(var b=0;b<v;b++)this.o[h+b]=u.o[d+b];h+=v,d-=v}},p.prototype.En=function(h,a,u){if(this.Pb||h+a>this.size)throw m.i.Hb();0<u-(h+a)&&j(this.o,h,h+a,h+(u-(h+a))+a),this.size-=a},p.prototype.ni=function(h,a,u){if(this.Pb||1>u||a%u!=0)throw m.i.Hb();for(var d=a>>1,g=0;g<d;g+=u){a-=u;for(var v=0;v<u;v++){var b=this.o[h+g+v];this.o[h+g+v]=this.o[h+a+v],this.o[h+a+v]=b}}},p.prototype.Wj=function(h,a,u){if(0>a||0>u||0>a||u+a>this.size)throw m.i.N();for(var d=a;d<a+u;d++)this.o[d]=h},p.prototype.Ar=function(h,a,u,d,g){if(!(d&&h==u||(this.o.set(this.o.subarray(u,u+a),h),d)))for(u=h,h=h+a-g,d=0,a=m.O.truncate(a/2);d<a;d++){for(var v=0;v<g;v++){var b=this.o[u+v];this.o[u+v]=this.o[h+v],this.o[h+v]=b}u+=g,h-=g}},p.prototype.vC=function(h,a,u,d,g){if(0>h||0>a||0>d)throw m.i.N();if(a!=0)for(this.size<(a<<1)+h&&this.resize((a<<1)+h),g||(h+=a-1<<1),g=g?2:-2,a+=d;d<a;d++)this.o[h]=u[d].x,this.o[h+1]=u[d].y,h+=g},p.prototype.Vw=function(h,a,u,d,g){if(0>h||0>a||0>d||this.size<a+h)throw m.i.N();if(g)for(g=0;g<a;g++)u[d+g]=this.o[h+g];else for(d=d+a-1;h<a;h++)u[d]=this.o[h],d--},p.prototype.clear=function(h){h?this.resize(0):this.Bh(0)},p.prototype.ix=function(){this.pk=this.Pb=!0},p.prototype.Vd=function(h,a,u){a=this.o.subarray(h,a),Array.prototype.sort.call(a,u),this.o.set(a,h)},p.prototype.zJ=function(h,a){if(this.Pb)throw m.i.fa("invalid call. Attribute Stream is read only.");this.o[h]|=a},p.prototype.KE=function(h,a){if(this.Pb)throw m.i.fa("invalid call. Attribute Stream is read only.");this.o[h]&=~a},p.prototype.Tp=function(){return 1},p}();m.pn=T}(ye||(ye={})),function(m){m.Yc=function(){function j(){}return j.Mr=function(T,p){return m.pn.qf(T,p)},j.Dn=function(T,p){return m.be.qf(T,p)},j.pP=function(T,p,h){switch(T){case 1:T=m.be.qf(p,h);break;case 2:T=m.ia.qf(p,h);break;case 4:T=m.pn.qf(p,h);break;default:throw m.i.Qa()}return T},j.YE=function(T,p){return j.pP(m.ra.Tp(T),p*m.ra.Va(T),m.ra.se(T))},j.Oh=function(T,p){return m.ia.qf(T,p)},j.qI=function(T){var p,h=[];for(p=0;p<T;p++)h.push(null);return h},j}()}(ye||(ye={})),function(m){m.ga=function(j){j===void 0&&(j=0),this.u=j}}(ye||(ye={})),function(m){m.NL=function(){function j(){}return j.bind=function(T){m.Sc=T.PeDefs,m.pf=T.PeFactory,m.NC=T.PeVertcs,m.ej=T.PeCSTransformations,m.MC=T.PeGTTransformations,m.LL=T.PeGeogtran,m.KL=T.PeFactoryCodechange,m.LC=T.PeGCSExtent,m.Cg=T.PePCSInfo,m.ML=T.PeHorizon,m.JL=T.PeCoordsys,m.lp=T.PeGTlistExtended,m.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,m.pf.initialize(null),m.Mx=T.PeGTlistExtendedEntry,m.pf.fromString(m.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},j}(),m.pf=null,m.NC=null,m.JL=null,m.ML=null,m.Cg=null,m.lp=null,m.Mx=null,m.LC=null,m.KL=null,m.LL=null,m.Sc=null,m.MC=null,m.ej=null}(ye||(ye={})),function(m){var j=function(){function T(){}return T.Mb=function(p,h){return 0<=h?T.P(p):-T.P(p)},T.P=function(p){return 0>p?-p:p},T.ti=function(p){return 3552713678800501e-30>p},T.KC=function(p,h,a){return T.P(p-h)<=a*(1+(T.P(p)+T.P(h))/2)},T.Y=function(p,h){return T.KC(p,h,3552713678800501e-30)},T.FL=function(p){return 3552713678800501e-30>=T.P(p)},T.Cd=function(p){return T.FL(p)},T}();m.s=j,m.F=function(){function T(){}return T.gp=function(p,h){var a=0;return(p=j.P(p))+(h=j.P(h))!=0&&(p>h?(a=h/p,a=p*Math.sqrt(1+a*a)):(a=p/h,a=h*Math.sqrt(1+a*a))),a},T.Wq=function(p,h,a,u,d){for(var g=[0,0,0],v=[0,0,0],b=0;2>=b;b++)h[b]-=p[b],a[b]-=h[b];a=g[1]*v[2]-g[2]*v[1],h=g[2]*v[0]-g[0]*v[2],g=g[0]*v[1]-g[1]*v[0],p=-1*(a*p[0]+h*p[1]+g*p[2]),u[0]=a,u[1]=h,u[2]=g,u[3]=p,v=T.on(u),u[0]/=v,u[1]/=v,u[2]/=v,u[3]/=v,d!=0&&(v=j.Cd(g)?j.Cd(p)?j.Mb(1,h):-j.Mb(1,p):j.Mb(1,g),v*=j.Mb(1,d),u[0]*=v,u[1]*=v,u[2]*=v,u[3]*=v)},T.zx=function(p,h,a){a[0]=p[1]*h[2]-h[1]*p[2],a[1]=p[2]*h[0]-h[2]*p[0],a[2]=p[0]*h[1]-h[0]*p[1]},T.St=function(p,h){return p[0]*h[0]+p[1]*h[1]+p[2]*h[2]},T.on=function(p){return T.gp(T.gp(p[0],p[1]),p[2])},T.cl=function(p,h,a,u,d,g,v,b){p=T.n(p,h,a);var C=Math.cos(a);g.u=(p+d)*C*Math.cos(u),v.u=(p+d)*C*Math.sin(u),b.u=(p*(1-h)+d)*Math.sin(a)},T.jO=function(p,h,a,u,d,g,v){var b=T.gp(h,a),C=1*Math.sqrt(1-p),M=C/1;if(j.Y(b,0))g.u=0,d.u=j.Mb(1.570796326794897,u),v.u=j.P(u)-C;else{g.u=Math.atan2(a,h),a=Math.atan2(1*u,C*b),g=Math.cos(a);var $=Math.sin(a);h=C*p/(1-p),p*=1,a=Math.atan2(u+h*$*$*$,b-p*g*g*g),3.141592653589793<j.P(a)&&(a=j.Mb(3.141592653589793,a)-a),a=Math.atan(M*Math.tan(a)),$=Math.sin(a),g=Math.cos(a),d.u=Math.atan2(u+h*$*$*$,b-p*g*g*g),1.570796326794897<j.P(d.u)&&(d.u=j.Mb(3.141592653589793,d.u)-d.u),a=Math.atan(M*Math.tan(d.u)),$=Math.sin(a),g=Math.cos(a),v.u=(u-C*$)*Math.sin(d.u)+(b-1*g)*Math.cos(d.u)}},T.n=function(p,h,a){return a=Math.sin(a),p/Math.sqrt(1-h*a*a)},T.ot=function(p,h){return Math.atan2(Math.sin(h)*(1-p),Math.cos(h))},T.Qj=function(p,h){return Math.atan2(Math.sin(h),Math.cos(h)*(1-p))},T.Rq=function(p,h){if(j.ti(p)||h==0||j.Y(j.P(h),1.570796326794897))return h;if(.006884661117170036>p){var a=Math.sqrt(1-p),u=(1-a)/(1+a),d=u*u,g=u*d,v=u*g,b=u*v,C=u*b,M=u*C,$=1.572916666666667*g-3.2578125*b+4.295068359375*M;p=2.142578125*v-6.071484375*C,a=3.129296875*b-11.249837239583334*M;var L=4.775276692708333*C,q=7.958636765252976*M,U=Math.cos(2*h);return h+Math.sin(2*h)*(1.5*u-.84375*g+.525390625*b-.2688395182291667*M-$+a-q+U*(2*(1.3125*d-1.71875*v+1.650146484375*C)-4*p+6*L+U*(4*$-12*a+24*q+U*(8*p-32*L+U*(16*a-80*q+U*(32*L+64*U*q))))))}for(a=1-p,u=p/2,g=(d=j.P(h))*T.Zu(p)/(1.570796326794897*a),v=9999,C=d,d=0;1e-16<v&&50>d;d++)M=T.w(p,C),b=C-($=(b=(T.kG(C,p)-u*Math.sin(2*C)/M)/a-g)/(M=1/(M*M*M))),v=j.P($),C=b;return 0<=h?C:-C},T.qW=function(p,h){return j.ti(h)?p:p*T.Zu(h)/1.570796326794897},T.ba=function(p){return 0>(p=T.pF(p,6.283185307179586))?p+6.283185307179586:3.141592653589793>j.P(p)||j.Y(j.P(p),3.141592653589793)?p:p-6.283185307179586},T.pF=function(p,h){return p-Math.floor(p/h)*h},T.Ah=function(p,h){if(.006884661117170036>h){var a=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h,u=a*a;return p/(1+h)*(1+.25*a+.015625*u+.00390625*a*u)*1.570796326794897}return p*T.Zu(h)},T.Vq=function(p,h){var a=j.Mb(1,Math.sin(h));return h=1.570796326794897>=(h=j.P(T.pF(h,3.141592653589793)))?h:3.141592653589793-h,(j.Y(h,1.570796326794897)?h:Math.atan(Math.sqrt(1-p)*Math.tan(h)))*a},T.q=function(p,h,a){if(.006884661117170036>h){var u=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h,d=h*u,g=h*d,v=h*g,b=h*v,C=h*b,M=-.7291666666666666*d+.2278645833333333*v+.03987630208333334*C,$=.615234375*g-.21533203125*b,L=-.54140625*v+.20302734375*C,q=.48876953125*b,U=-.4488699776785715*C,ee=Math.cos(2*a);return p/(1+h)*((1+.25*u+.015625*g+.00390625*b)*a+Math.sin(2*a)*(-1.5*h+.1875*d+.0234375*v+.00732421875*C-M+L-U+ee*(2*(.9375*u-.234375*g-.03662109375*b)-4*$+6*q+ee*(4*M-12*L+24*U+ee*(8*$-32*q+ee*(16*L-80*U+ee*(32*q+64*ee*U)))))))}return p*(T.kG(a,h)-.5*h*Math.sin(2*a)/T.w(h,a))},T.w=function(p,h){return h=Math.sin(h),Math.sqrt(1-p*h*h)},T.Zu=function(p){return j.KC(p,1,2220446049250313e-31)?1:1>p?T.Xw(0,1-p)-p/3*T.Uw(0,1-p):NaN},T.kG=function(p,h){var a=j.Mb(1,p);p=j.P(p);var u=Math.floor(p/1.570796326794897);if(1<h)h=p==0?0:NaN;else if(j.Cd(u))h=(p=T.sin(p))*T.Xw(1-p*p,1-h*p*p)-h/3*p*p*p*T.Uw(1-p*p,1-h*p*p);else{var d=m.O.truncate(u%2),g=T.Zu(h);0<d?(p=1.570796326794897*(u+1)-p,h=g*(u+1)-(h=(p=Math.sin(p))*T.Xw(1-p*p,1-h*p*p)-h/3*p*p*p*T.Uw(1-p*p,1-h*p*p))):(p-=1.570796326794897*u,h=g*u+(h=(p=Math.sin(p))*T.Xw(1-p*p,1-h*p*p)-h/3*p*p*p*T.Uw(1-p*p,1-h*p*p)))}return h*a},T.sin=function(p){p=T.ba(p);var h=j.Mb(1,p);return p=j.P(p),j.Y(p,3.141592653589793)?0:j.Y(p,1.570796326794897)?1*h:Math.sin(p)*h},T.Uw=function(p,h){var a,u,d,g,v=p,b=h,C=1;for(h=0,p=1;u=((a=.2*(v+b+3*C))-v)/a,d=(a-b)/a,g=(a-C)/a,!(1e-4>j.P(u)&&1e-4>j.P(d)&&1e-4>j.P(g));)g=Math.sqrt(b),h+=p/((a=Math.sqrt(C))*(C+(g=Math.sqrt(v)*(g+a)+g*a))),p*=.25,v=.25*(v+g),b=.25*(b+g),C=.25*(C+g);return b=(v=u*d)-(C=g*g),3*h+p*(1+(C=v-6*C)*(.10227272727272728*C-.2142857142857143-.1730769230769231*g*(u=C+b+b))+g*(.1666666666666667*u+g*(-.4090909090909091*b+.1153846153846154*g*v)))/(a*Math.sqrt(a))},T.Xw=function(p,h){for(var a,u,d,g,v=1;u=2-((a=(p+h+v)/3)+p)/a,d=2-(a+h)/a,g=2-(a+v)/a,!(1e-4>j.P(u)&&1e-4>j.P(d)&&1e-4>j.P(g));v=.25*(v+a))a=Math.sqrt(h),u=Math.sqrt(v),p=.25*(p+(a=Math.sqrt(p)*(a+u)+a*u)),h=.25*(h+a);return(1+(.04166666666666666*(p=u*d-g*g)-.1-.06818181818181818*(h=u*d*g))*p+.07142857142857142*h)/Math.sqrt(a)},T.Qw=function(p,h){if(j.ti(p)||h==0||j.Y(j.P(h),1.570796326794897))return h;if(.006884661117170036>p){var a=p*p,u=p*a,d=p*u,g=p*d,v=p*g,b=p*v,C=-(.02708333333333333*u+.03430059523809524*d+.03149181547619048*g+.02634359154541446*v+.02156896735835538*b),M=.007669890873015873*d+.01299603174603175*g+.0148051353064374*v+.01454454953803912*b,$=-(.002275545634920635*g+.004830845032667949*v+.006558395368616723*b),L=.0006957236677288761*v+.001775193002406544*b,q=-.000217324089394402*b,U=Math.cos(2*h);return h+Math.sin(2*h)*(-(.5*p+.2083333333333333*a+.09375*u+.04878472222222222*d+.02916666666666667*g+.01938905423280423*v+.01388255931712963*b)-C+$-q+U*(2*(.1041666666666667*a+.0875*u+.06050347222222222*d+.04151785714285714*g+.02958958540013228*v+.02203667534722222*b)-4*M+6*L+U*(4*C-12*$+24*q+U*(8*M-32*L+U*(16*$-80*q+U*(32*L+64*U*q))))))}return h==0||j.Y(j.P(h),1.570796326794897)?a=h:(d=(u=Math.sqrt(p))*Math.sin(h),a=Math.tan(.7853981633974483+h/2)*Math.pow((1-d)/(1+d),u/2),a=2*Math.atan(a)-1.570796326794897),a},T.yO=function(p,h){if(j.ti(p)||h==0||j.Y(j.P(h),1.570796326794897))return h;if(.006884661117170036>p){var a=p*(L=p*($=p*(U=p*p))),u=p*(q=p*a),d=.05833333333333333*$+.07232142857142858*L+.05634300595238095*a+.0355325796406526*q+.020235546186067*u,g=.02653149801587302*L+.04379960317460317*a+.0429211791776896*q+.03255384637546096*u,v=.01294022817460318*a+.02668104344536636*q+.03155651254609588*u,b=.00659454790965208*q+.0163075268674227*u,C=.003463473736911237*u,M=Math.cos(2*h);return h+Math.sin(2*h)*(.5*p+.2083333333333333*U+.08333333333333333*$+.03611111111111111*L+.01875*a+.01195601851851852*q+.008863673941798942*u-d+v-C+M*(2*(.1458333333333333*U+.1208333333333333*$+.07039930555555556*L+.03616071428571429*a+.01839451058201058*q+.01017113095238095*u)-4*g+6*b+M*(4*d-12*v+24*C+M*(8*g-32*b+M*(16*v-80*C+M*(32*b+64*M*C))))))}var $=Math.sqrt(p),L=$/2,q=Math.tan(.7853981633974483+h/2);p=0,d=1;for(var U=h;d!=0;U=u)a=$*Math.sin(U),u=q*Math.pow((1+a)/(1-a),L),u=2*Math.atan(u)-1.570796326794897,p++,(j.Y(u,U)||3e4<p)&&(d=0);return U},T}()}(ye||(ye={})),function(m){var j=function(){function T(p){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new m.h,this.XH=new m.h,this.KA=!1,this.vq=new m.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=p,this.As=m.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var h=p.getCode();0<h?(this.Kk=h,m.pf.getCode(p)):this.Kk=m.pf.getCode(p),0>this.Kk&&(this.Kk=0);var a=this.Ue.getType();if(this.jH=a==m.Sc.PE_TYPE_PROJCS?2:1,a==m.Sc.PE_TYPE_PROJCS&&!p.loadConstants())throw m.i.N("PeProjcs.loadConstants failed");h=a==m.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),a!=m.Sc.PE_TYPE_GEOGCS&&m.pf.getCode(h),this.Eo=p.getUnit(),this.RH=h.getPrimem().getLongitude(),this.wH=p=h.getUnit().getUnitFactor(),p=Math.PI/(180*p),1e-10>Math.abs(p-1)&&(p=1),this.GA=p,a&m.Sc.PE_TYPE_PROJCS?(h=this.Ue,this.HA=1/h.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=m.Cg.generate(h,m.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=m.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,a=1/h.getUnit().getUnitFactor(),this.sw=.001/h.getDatum().getSpheroid().getAxis()*a,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return T.prototype.$r=function(){return this.Kk},T.prototype.kk=function(){return this.tw},T.Py=function(p,h){return p==h||p!=null&&h!=null&&p.Kk==0&&h.Kk==0&&p.As===h.As},T.prototype.Wc=function(){return this.zl},T.prototype.gh=function(p){p.K(this.so)},T.prototype.pv=function(){return this.so.v},T.prototype.ov=function(){return this.so.C},T.prototype.GR=function(p){p.K(this.uw)},T.prototype.lY=function(){var p=this.Ue.getType();if(p==m.Sc.PE_TYPE_PROJCS){p=this.Ue;var h=this.kk().getCentralMeridian(),a=p.getGeogcs();if(a==null)throw m.i.fa("internal error");h=[[h+(a=1/a.getUnit().getUnitFactor()*Math.PI),0]],m.ej.geogToProj(p,1,h),h=h[0][0],a=p.getParameters()[m.Sc.PE_PARM_X0].getValue();var u=this.ml();p=new m.l,u.A(p),h=(u=Math.abs(h-a))+a,a=-1*u+a,u=p.H,p=p.G;var d=new m.l;d.K(a,p,h,u),this.so==null&&(this.so=d)}else{if(p!=m.Sc.PE_TYPE_GEOGCS)throw m.i.fa("internal error");a=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(p=new m.l).K(-a,-a/2,a,a/2),this.so==null&&(this.so=p)}},T.prototype.mY=function(){var p=this.Ue.getType();if(p==m.Sc.PE_TYPE_PROJCS){var h=this.Ue;if(p=this.kk().getCentralMeridian(),(h=h.getGeogcs())==null)throw m.i.fa("internal error");h=1/h.getUnit().getUnitFactor()*Math.PI;var a=this.Vr(),u=new m.l;a.A(u),(a=new m.l).K(p-h,u.G,p+h,u.H),this.uw==null&&(this.uw=a)}else{if(p!=m.Sc.PE_TYPE_GEOGCS)throw m.i.fa("internal error");h=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(p=new m.l).K(-h,-h/2,h,h/2),this.uw==null&&(this.uw=p)}},T.prototype.bf=function(){return this.GA},T.prototype.pm=function(){return this.HA},T.prototype.Vr=function(){if(this.zl)return this.ul;var p=this.ul;return p??(this.xx(),this.ul)},T.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},T.prototype.xx=function(){if(this.Ue.getType()==m.Sc.PE_TYPE_PROJCS){var p=this.Ue,h=p.getGeogcs(),a=p.horizonGcsGenerate();if(a!=null){var u=a[0].getNump(),d=a[0].getKind();p=0<a[0].getInclusive();var g=this.bf(),v=90*g,b=360*g,C=370*g,M=180*g*m.Sc.PE_HORIZON_DELTA/Math.PI,$=new m.l,L=null;if(1<u){for(var q=1;q<u;q++)if(a[q].getKind()==m.Sc.PE_HORIZON_LINE){L==null&&(L=new m.Ta);var U=a[q].getCoord();L.sx(U[0][0],U[0][1]),L.yj(U[1][0],U[1][1])}}if(d==m.Sc.PE_HORIZON_RECT)a=a[0].getCoord(),$.K(a[0][0],a[0][1]),$.Zb(a[1][0],a[1][1]),Math.abs($.H-v)<1e-7*M&&($.H=v),Math.abs($.G+v)<1e-7*M&&($.G=-v),$.R()>C&&(a=-400*g,$.K(a,$.G,a+5*b,$.H)),a=new m.Fh($),this.ul==null&&(this.ul=a,this.Iv=p);else{if(C=new m.Da,b=this.kk().isGcsHorizonMultiOverlap(),$=m.gu.bF(h,m.hu.Integer64),b){for(C=new m.gL,M=m.Gh.local().V(C,$,null),q=0;q<u;q++)if(a[q].getKind()==m.Sc.PE_HORIZON_POLY){for(h=a[q].getSize(),g=a[q].getCoord(),d=[],v=0;v<h;v++)d[v]=m.h.construct(g[v][0],g[v][1]);a[q].getInclusive(),b&&((g=new m.Da).Yk(d,h-1),C.ZX(g),M.qe())}C=M.next()}else for(q=0;q<u;q++)if(a[q].getKind()==m.Sc.PE_HORIZON_POLY){for(h=a[q].getSize(),g=a[q].getCoord(),b=[],v=0;v<h;v++)b[v]=m.h.construct(g[v][0],g[v][1]);a[q].getInclusive(),C.Yk(b,h-1)}p?m.Xj.local().wn(C,$,1):m.kp.local().wn(C,$,1),m.dj.local().wn(C,$,1),this.ul==null&&(this.ul=C,this.Iv=p,this.YG=L)}}}},T.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},T.prototype.DK=function(){if(this.jH==2){var p=this.Ue.horizonPcsGenerate();if(p!=null){var h=p[0].getKind();p[0].getInclusive();var a=p[0].getNump(),u=!1;if(h==m.Sc.PE_HORIZON_RECT)p=p[0].getCoord(),(a=new m.l).K(p[0][0],p[0][1]),a.Zb(p[1][0],p[1][1]),p=new m.Fh(a);else{for(h=-1,u=0;u<a;u++)p[u].getKind()==m.Sc.PE_HORIZON_POLY&&(h=u);for(u=p[h].getSize()-1,p=p[h].getCoord(),a=[],h=0;h<u;h++)a[h]=m.h.construct(p[h][0],p[h][1]);p=h=new m.Da,h.Yk(a,u),u=!0}this.kk().isDensificationNeeded()&&(a=1e5*this.pm(),p=m.Xl.local().V(p,a,null)),u&&(u=new m.Fh,p.bn(u),p.Ke(),p.Qb(),p.qR(),m.Xj.local().wn(p,null,1)),this.Us==null&&(this.Us=p)}}},T.prototype.ml=function(){if(this.zl)return this.Us;var p=this.Us;return p??(this.DK(),this.Us)},T.prototype.nY=function(){if(this.Ue.getType()==m.Sc.PE_TYPE_PROJCS){var p=90*this.bf();p=[[0,p],[0,-p]],m.ej.geogToProj(this.Ue,2,p);var h=this.kk(),a=h.getNorthPoleLocation()!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY;h=h.getSouthPoleLocation()!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(a&&this.HH.ma(p[0][0],p[0][1]),h&&this.XH.ma(p[1][0],p[1][1]))}this.KA=!0},T.prototype.CK=function(){if(this.jH==1){var p=400*this.bf();this.vq.K(-p,-p,p,p)}else p=m.Cg.generate(this.Ue,m.Cg.PE_PCSINFO_OPTION_DOMAIN),p=m.l.construct(p.getDomainMinx(),p.getDomainMiny(),p.getDomainMaxx(),p.getDomainMaxy()),this.vq.B()&&this.vq.K(p)},T.prototype.hR=function(p){this.zl&&p.K(this.vq),this.vq.B()&&this.CK(),p.K(this.vq)},T.prototype.Up=function(){return this.RH},T.prototype.zi=function(){return this.bA},T.prototype.Hd=function(){return this.Eo},T.prototype.Xr=function(){return this.wH},T}();m.OC=j}(ye||(ye={})),function(m){var j=function(){function T(p){this.KT=p,this.As=m.zb.xv(p,0,!0);var h=p.getCode();this.ss=0<h?h:m.pf.getCode(p),0>this.ss&&(this.ss=0),this.Eo=h=this.KT.getUnit(),this.IH=1/h.getUnitFactor(),m.pf.getCode(p)}return T.Py=function(p,h){return p==h||p!=null&&h!=null&&p.ss==0&&h.ss==0&&p.As===h.As},T.prototype.$r=function(){return this.ss},T}();m.PL=j}(ye||(ye={})),function(m){m.Yg=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v){if(d!=null||g!=null||v!=null){a=m.F.ba(a),p=m.F.ba(p),h=m.F.ba(h),u=m.F.ba(u),1.570796326794897<m.s.P(h)&&(h=m.s.Mb(3.141592653589793,h)-h,p=m.F.ba(p+3.141592653589793)),1.570796326794897<m.s.P(u)&&(u=m.s.Mb(3.141592653589793,u)-u,a=m.F.ba(a+3.141592653589793));var b=m.F.ba(a-p);if(m.s.Y(h,u)&&(m.s.Y(p,a)||m.s.Y(m.s.P(h),1.570796326794897)))d!=null&&(d.u=0),g!=null&&(g.u=0),v!=null&&(v.u=0);else{if(m.s.Y(h,-u)){if(m.s.Y(m.s.P(h),1.570796326794897))return d!=null&&(d.u=3.141592653589793*T),g!=null&&(g.u=0<h?m.F.ba(3.141592653589793-m.F.ba(a)):m.F.ba(a)),void(v!=null&&(v.u=0<h?m.F.ba(a):m.F.ba(3.141592653589793-m.F.ba(a))));if(m.s.Y(m.s.P(b),3.141592653589793))return d!=null&&(d.u=3.141592653589793*T),g!=null&&(g.u=0),void(v!=null&&(v.u=0))}var C=m.s.P(h)==1.570796326794897?0:Math.cos(h),M=Math.sin(h),$=m.s.P(u)==1.570796326794897?0:Math.cos(u),L=Math.sin(u),q=m.s.P(b)==1.570796326794897?0:Math.cos(b),U=m.s.P(b)==3.141592653589793?0:Math.sin(b);if(d!=null){var ee=Math.sin((u-h)/2);b=Math.sin(b/2),d.u=2*Math.asin(Math.sqrt(ee*ee+C*$*b*b))*T}g!=null&&(g.u=m.s.Y(m.s.P(h),1.570796326794897)?0>h?a:m.F.ba(3.141592653589793-a):Math.atan2($*U,C*L-M*$*q)),v!=null&&(m.s.Y(m.s.P(u),1.570796326794897)?v.u=0>u?p:m.F.ba(3.141592653589793-p):(v.u=Math.atan2(C*U,L*C*q-$*M),v.u=m.F.ba(v.u+3.141592653589793)))}}},j.rf=function(T,p,h,a,u,d,g){if(d!=null||g!=null){p=m.F.ba(p),h=m.F.ba(h),1.570796326794897<m.s.P(h)&&(h=m.s.Mb(3.141592653589793,h)-h,p=m.F.ba(p+3.141592653589793)),m.s.Y(m.s.P(h),1.570796326794897)&&(p=0),u=m.F.ba(u);var v=m.s.Y(m.s.P(u),1.570796326794897)?0:Math.cos(u),b=m.s.Y(m.s.P(u),3.141592653589793)?0:Math.sin(u),C=m.s.Y(m.s.P(h),1.570796326794897)?0:Math.cos(h),M=Math.sin(h);T=a/T,a=m.s.Y(m.s.P(T),1.570796326794897)?0:Math.cos(T);var $=m.s.Y(m.s.P(T),3.141592653589793)?0:Math.sin(T),L=Math.asin(M*a+C*$*v);g!=null&&(g.u=L),d!=null&&(d.u=m.s.Y(m.s.P(L),1.570796326794897)?m.s.Y(h,-L)?0>L?u:m.F.ba(3.141592653589793-u):p:m.s.Y(m.s.P(h),1.570796326794897)&&m.s.Y(T,3.141592653589793)?0>h?u:m.F.ba(3.141592653589793-u):m.F.ba(p+Math.atan2($*b,C*a-M*$*v)))}},j}()}(ye||(ye={})),function(m){m.Wk=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v,b){var C=new m.ga(0),M=new m.ga(0),$=[0,0,0],L=[0,0,0],q=[0,0,0],U=new m.ga(0),ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0),ve=new m.ga(0);if(g!=null||v!=null||b!=null)if(m.s.ti(p))m.Yg.tb(T,h,a,u,d,g,v,b);else{u=m.F.ba(u),h=m.F.ba(h);var fe=m.F.ba(u-h);if(m.s.Y(a,d)&&(m.s.Y(h,u)||m.s.Y(m.s.P(a),1.570796326794897)))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.Y(a,-d)){if(m.s.Y(m.s.P(a),1.570796326794897))return g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0<a?m.F.ba(3.141592653589793-m.F.ba(u)):m.F.ba(u)),void(b!=null&&(b.u=0<a?m.F.ba(u):m.F.ba(3.141592653589793-m.F.ba(u))));m.s.Y(m.s.P(fe),3.141592653589793)&&(g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0),b!=null&&(b.u=0))}else(m.s.Y(m.s.P(a),1.570796326794897)||m.s.Y(m.s.P(d),1.570796326794897))&&(m.s.Y(m.s.P(a),1.570796326794897)?h=u:u=h);var Ce=0;if(0>fe){Ce=1;var Ie=h;h=u,u=Ie,Ie=a,a=d,d=Ie}fe=m.F.ot(p,a);var Ne=m.F.ot(p,d);v==null&&b==null||(m.Yg.tb(T,h,fe,u,Ne,null,C,M),C=Math.atan2(Math.sin(C.u)*Math.cos(a-fe),Math.cos(C.u)),M=Math.atan2(Math.sin(M.u)*Math.cos(d-Ne),Math.cos(M.u)),Ce!=0&&(Ie=C,C=M,M=Ie),v!=null&&(v.u=C),b!=null&&(b.u=M)),g!=null&&(m.F.cl(1,p,a,h,0,Q,ge,ve),$[0]=Q.u,$[1]=ge.u,$[2]=ve.u,m.F.cl(1,p,d,u,0,Q,ge,ve),L[0]=Q.u,L[1]=ge.u,L[2]=ve.u,q[0]=$[1]*L[2]-L[1]*$[2],q[1]=-($[0]*L[2]-L[0]*$[2]),q[2]=$[0]*L[1]-L[0]*$[1],p=1-m.F.w(p,m.F.Vq(p,m.F.Qj(p,Math.acos(q[2]/Math.sqrt(q[0]*q[0]+q[1]*q[1]+q[2]*q[2]))))),p*=2-p,v=Math.atan2(-q[1],-q[0]),q=m.F.ba(v-1.570796326794897),v=m.F.ba(v+1.570796326794897),q=m.s.P(m.F.ba(h-q))<=m.s.P(m.F.ba(h-v))?q:v,m.Yg.tb(1,q,0,h,fe,U,null,null),m.Yg.tb(1,q,0,u,Ne,ee,null,null),3.141592653589793<U.u+ee.u&&(q=m.F.ba(q+3.141592653589793),m.Yg.tb(1,q,0,h,fe,U,null,null),m.Yg.tb(1,q,0,u,Ne,ee,null,null)),U.u*=m.s.Mb(1,a),ee.u*=m.s.Mb(1,d),U.u=m.F.Qj(p,U.u),ee.u=m.F.Qj(p,ee.u),h=m.F.q(T,p,U.u),T=m.F.q(T,p,ee.u),g.u=m.s.P(T-h))}}},j.rf=function(T,p,h,a,u,d,g,v){var b=0,C=new m.ga(0),M=new m.ga(0),$=[0,0,0],L=[0,0,0],q=new m.ga(0),U=new m.ga(0),ee=new m.ga(0);if(g!=null||v!=null)if(m.s.ti(p))m.Yg.rf(T,h,a,u,d,g,v);else if(m.s.Cd(u))g!=null&&(g.u=h),v!=null&&(v.u=a);else if(d=m.F.ba(d),0>u&&(u=m.s.P(u),d=m.F.ba(d+3.141592653589793)),h=m.F.ba(h),a=m.F.ba(a),1.570796326794897<m.s.P(a)&&(h=m.F.ba(h+3.141592653589793),a=m.s.Mb(3.141592653589793,a)-a),m.s.Y(m.s.P(a),1.570796326794897)&&(h=0),m.s.Cd(a)){var Q=m.s.P(1.570796326794897-m.s.P(d));Q=m.F.Qj(p,Q),Q=1-m.F.w(p,m.F.Vq(p,Q)),Q*=2-Q,T=u/m.F.Ah(T,Q)*1.570796326794897,T=m.F.Rq(Q,T),T=m.F.ot(Q,T),m.Yg.rf(1,h,a,T,d,g,C),v!=null&&(b=C.u),v!=null&&(v.u=m.F.Qj(p,b))}else if(m.s.Y(m.s.P(a),1.570796326794897))C=2*(b=m.F.Ah(T,p)),d=0<(T=m.s.Mb(1.570796326794897,a))?m.F.ba(3.141592653589793-d):d,a=b-u,m.s.P(a)<=b?g!=null&&(g.u=d):(a=Math.floor(u/C),m.O.truncate(a%2)==0?(g!=null&&(g.u=d),u-=a*C):(g!=null&&(g.u=m.F.ba(d+3.141592653589793)),u=(a+1)*C-u),a=b-u),v!=null&&(v.u=m.F.Rq(p,a/b*T));else{Q=m.F.ot(p,a),d=Math.atan2(Math.sin(d),Math.cos(d)*Math.cos(a-Q));var ge=m.O.truncate(m.s.Mb(1,Q))*(1.570796326794897>=m.s.P(d)?1:-1);d=m.F.ba(h+Math.atan(Math.tan(d)*-Math.sin(Q))),m.Yg.tb(T,d,0,h,Q,null,M,null),Q=m.s.P(1.570796326794897-m.s.P(M.u)),Q=m.F.Qj(p,Q),Q=1-m.F.w(p,m.F.Vq(p,Q)),Q*=2-Q,m.F.cl(1,p,0,d,0,q,U,ee),$[0]=q.u,$[1]=U.u,$[2]=ee.u,m.F.cl(1,p,a,h,0,q,U,ee),L[0]=q.u,L[1]=U.u,L[2]=ee.u,a=Math.acos(($[0]*L[0]+$[1]*L[1]+$[2]*L[2])/Math.sqrt(L[0]*L[0]+L[1]*L[1]+L[2]*L[2])),a=m.F.Qj(Q,a),u=0<(a=m.F.q(T,Q,a)+u*ge)?M.u:m.F.ba(M.u+3.141592653589793),T=m.s.P(a)/m.F.Ah(T,Q)*1.570796326794897,T=m.F.Rq(Q,T),T=m.F.ot(Q,T),m.Yg.rf(1,d,0,T,u,g,C),v!=null&&(b=C.u),v!=null&&(v.u=m.F.Qj(p,b))}},j}()}(ye||(ye={})),function(m){m.cu=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v,b){var C=0,M=0,$=0;if(g!=null||v!=null||b!=null)if(m.s.ti(p))m.Yg.tb(T,h,a,u,d,g,v,b);else{var L=m.F.ba(u-h);if(m.s.Y(a,d)&&(m.s.Cd(L)||m.s.Y(m.s.P(a),1.570796326794897)))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.Y(a,-d)){if(m.s.Y(m.s.P(a),1.570796326794897))return g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0<a?m.F.ba(3.141592653589793-m.F.ba(u)):m.F.ba(u)),void(b!=null&&(b.u=0<a?m.F.ba(u):m.F.ba(3.141592653589793-m.F.ba(u))));m.s.Y(m.s.P(L),3.141592653589793)&&(g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0),b!=null&&(b.u=0))}else if(m.s.Y(m.s.P(a),1.570796326794897)||m.s.Y(m.s.P(d),1.570796326794897)||m.s.Cd(L)||m.s.Y(m.s.P(L),3.141592653589793))return void m.Wk.tb(T,p,h,a,u,d,g,v,b);var q=1-Math.sqrt(1-p),U=p/(1-p),ee=T*(1-q);T=m.F.Vq(p,a);var Q=m.F.Vq(p,d);p=m.s.P(T)==1.570796326794897?0:Math.cos(T);var ge=Math.sin(T),ve=m.s.P(Q)==1.570796326794897?0:Math.cos(Q),fe=Math.sin(Q),Ce=L,Ie=Math.cos(Ce),Ne=Math.sin(Ce),Ve=1,Xe=0;do{var et=Ce,dt=Math.sqrt(Math.pow(ve*Ne,2)+Math.pow(p*fe-ge*ve*Ie,2)),ct=ge*fe+p*ve*Ie,mt=Math.atan2(dt,ct);if(dt==0){Ve=0;break}var lt=p*ve*Ne/dt;if(C=Math.cos(Math.asin(lt)),M=ct-2*ge*fe/(C*=C),1<m.s.P(M)&&(M=m.s.Mb(1,M)),Ce=L+(1-(Ce=q/16*C*(4+q*(4-3*C))))*q*lt*(mt+Ce*dt*(M+Ce*ct*(2*($=M*M)-1))),Ie=Math.cos(Ce),Ne=Math.sin(Ce),Xe++,3.141592653589793<m.s.P(Ce)&&30<Xe){Ve=0;break}}while(5e3>=Xe&&!m.s.Y(et,Ce));if(Ve!=0)q=(U*=C)*(256+U*(U*(74-47*U)-128))/1024,g!=null&&(g.u=ee*(1+U*(4096+U*(U*(320-175*U)-768))/16384)*(mt-q*dt*(M+q/4*(ct*(2*$-1)-q/6*M*(4*dt*dt-3)*(4*$-3))))),v!=null&&(v.u=m.s.Y(m.s.P(a),1.570796326794897)?0>a?u:m.F.ba(3.141592653589793-u):Math.atan2(ve*Ne,p*fe-ge*ve*Ie)),b!=null&&(m.s.Y(m.s.P(d),1.570796326794897)?b.u=0>d?h:m.F.ba(3.141592653589793-h):(b.u=Math.atan2(p*Ne,p*fe*Ie-ge*ve),b.u=m.F.ba(b.u+3.141592653589793)));else{Ce=m.s.Mb(3.141592653589793,L),ct=ge*fe-p*ve,mt=Math.acos(ct),dt=Math.sin(mt),C=1,Xe=lt=0;do $=lt,Ie=1-.25*(lt=q*(C*=C)*(1+q+q*q))+.1875*(M=q*q*(Ie=C*C)*(1+2.25*q))-.1953125*(Ve=q*q*q*Ie*C),lt=.25*lt-.25*M+.29296875*Ve,Ne=.03125*M-.05859375*Ve,Ve*=.00651041666666667,M=ct-2*ge*fe/C,1<m.s.P(M)&&(M=m.s.Mb(1,M)),C=Math.acos(M),ct=Math.cos(2*C),et=Math.cos(3*C),Ne=(lt=m.s.Y(a,-d)?m.F.ba(3.141592653589793-L)/(3.141592653589793*q*Ie):m.F.ba(Ce-L)/(q*(Ie*mt+lt*dt*M+Ne*Math.sin(2*mt)*ct+Ve*Math.sin(3*mt)*et)))*dt/(p*ve),Ce=1.570796326794897<m.s.P(L)?m.s.Mb(3.141592653589793,Ne)-Math.asin(Ne):Math.asin(Ne),Ie=Math.cos(Ce),dt=Math.sqrt(Math.pow(ve*Ne,2)+Math.pow(p*fe-ge*ve*Ie,2)),mt=3.141592653589793-Math.asin(m.s.P(dt)),ct=Math.cos(mt),C=Math.cos(Math.asin(lt)),Xe++;while(70>=Xe&&!m.s.Y($,lt));g!=null&&(Ie=1+(U*=C*=C)*(4096+U*(U*(320-175*U)-768))/16384,m.s.Y(a,-d)?g.u=3.141592653589793*ee*Ie:(M=ct-2*ge*fe/C,C=Math.acos(M),ct=Math.cos(2*C),et=Math.cos(3*C),g.u=ee*(Ie*mt+U*(U*(128+U*(35*U-60))-512)/2048*dt*M+U*(5*U-4)/6144*U*U*Math.sin(2*mt)*ct+Ve*Math.sin(3*mt)*et+-762939453125e-16*U*U*U*U*Math.sin(4*mt)*Math.cos(4*C)))),v!=null&&(m.s.Cd(a)&&m.s.Cd(d)?(C=Math.sqrt(1-lt*lt),v.u=Math.acos(C),0>L&&(v.u*=-1)):m.s.Y(m.s.P(a),1.570796326794897)?v.u=0>a?u:m.F.ba(3.141592653589793-u):(g=lt/p,ee=Math.sqrt(1-g*g),0>p*fe-ge*ve*Math.cos(Ce)&&(ee*=-1),v.u=Math.atan2(g,ee),m.s.Y(a,-d)&&m.s.P(m.F.ba(h-u))>3.141592653589793*(1-q*Math.cos(a))&&(0<a&&1.570796326794897>m.s.P(v.u)||0>a&&1.570796326794897<m.s.P(v.u))&&(v.u=m.s.Mb(3.141592653589793,v.u)-v.u))),b!=null&&(m.s.Cd(a)&&m.s.Cd(d)?(C=Math.sqrt(1-lt*lt),b.u=Math.acos(C),0<=L&&(b.u*=-1)):m.s.Y(m.s.P(d),1.570796326794897)?b.u=0>d?h:m.F.ba(3.141592653589793-h):(L=lt/ve,g=Math.sqrt(1-L*L),ee=Math.sin(Ce/2),0>Math.sin(Q-T)-2*p*fe*ee*ee&&(g*=-1),b.u=Math.atan2(L,g),b.u=m.F.ba(b.u+3.141592653589793),m.s.Y(a,-d)&&!m.s.Cd(a)&&!m.s.Y(m.s.P(a),1.570796326794897)&&m.s.P(m.F.ba(h-u))>3.141592653589793*(1-q*Math.cos(a))&&(v!=null?ee=v.u:(g=lt/p,ee=Math.sqrt(1-g*g),0>p*fe-ge*ve*Math.cos(Ce)&&(ee*=-1),ee=Math.atan2(g,ee),m.s.Y(a,-d)&&m.s.P(m.F.ba(h-u))>3.141592653589793*(1-q*Math.cos(a))&&(0<a&&1.570796326794897>m.s.P(ee)||0>a&&1.570796326794897<m.s.P(ee))&&(ee=m.s.Mb(3.141592653589793,ee)-ee)),1.570796326794897>=m.s.P(ee)&&1.570796326794897<m.s.P(b.u)||1.570796326794897<=m.s.P(ee)&&1.570796326794897>m.s.P(b.u))&&(b.u=-1*m.F.ba(b.u+3.141592653589793))))}}}},j.rf=function(T,p,h,a,u,d,g,v){if(g!=null||v!=null)if(m.s.ti(p))m.Yg.rf(T,h,a,u,d,g,v);else if(d=m.F.ba(d),m.s.Y(m.s.P(a),1.570796326794897)||m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))m.Wk.rf(T,p,h,a,u,d,g,v);else{var b=m.s.P(d)==1.570796326794897?0:Math.cos(d),C=m.s.P(d)==3.141592653589793?0:Math.sin(d);m.s.Y(m.s.P(a),1.570796326794897)&&(h=0),d=1-Math.sqrt(1-p);var M=m.F.Vq(p,a);a=m.s.P(M)==1.570796326794897?0:Math.cos(M);var $=Math.sin(M);M=Math.atan2(Math.tan(M),b);var L=a*C,q=L*L,U=1-q,ee=p/(1-p)*U,Q=(p=ee*(256+ee*(ee*(74-47*ee)-128))/1024)/4,ge=p/6,ve=u/(T*(1-d)*(1+ee*(4096+ee*(ee*(320-175*ee)-768))/16384)),fe=ve;do{var Ce=fe;u=m.s.P(fe)==1.570796326794897?0:Math.cos(fe);var Ie=(ee=m.s.P(fe)==3.141592653589793?0:Math.sin(fe))*ee;fe=p*ee*((T=Math.cos(2*M+fe))+Q*(u*(2*(fe=T*T)-1)-ge*T*(4*Ie-3)*(4*fe-3)))+ve}while(!m.s.Y(Ce,fe));u=m.s.P(fe)==1.570796326794897?0:Math.cos(fe),ee=m.s.P(fe)==3.141592653589793?0:Math.sin(fe),g!=null&&(C=Math.atan2(ee*C,a*u-$*ee*b),U=d/16*U*(4+d*(4-3*U)),T=Math.cos(2*M+fe),g.u=m.F.ba(h+(C-(1-U)*d*L*(fe+U*ee*(T+U*u*(2*T*T-1)))))),v!=null&&(U=$*ee-a*u*b,U=(1-d)*Math.sqrt(q+U*U),v.u=Math.atan2($*u+a*ee*b,U))}},j}()}(ye||(ye={})),function(m){m.PC=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v,b){var C=m.F.ba(u-h),M=m.s.Y(m.s.P(a),1.570796326794897),$=m.s.Y(m.s.P(d),1.570796326794897);if(m.s.Y(a,d)&&(m.s.Cd(C)||M))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.ti(p)){var L=Math.sin(a),q=Math.sin(d);L=Math.sqrt((1+L)/(1-L)),q=Math.sqrt((1+q)/(1-q)),L=Math.log(q)-Math.log(L),L=Math.atan2(C,L),g!=null&&(g.u=m.s.Y(a,d)?m.s.P(T*Math.cos(a)*C):m.s.P((T*d-T*a)/Math.cos(L)))}else q=m.F.Qw(p,d),L=Math.sin(m.F.Qw(p,a)),q=Math.sin(q),L=Math.sqrt((1+L)/(1-L)),q=Math.sqrt((1+q)/(1-q)),L=Math.log(q)-Math.log(L),L=Math.atan2(C,L),g!=null&&(m.s.Y(a,d)?g.u=m.s.P(T*C*Math.cos(a)/m.F.w(p,a)):(C=m.F.q(T,p,a),T=m.F.q(T,p,d),g.u=m.s.P((T-C)/Math.cos(L))));v==null&&b==null||(g=m.F.ba(L+3.141592653589793),M&&$||!M&&!$||(M?L=0>a?u:m.F.ba(3.141592653589793-u):$&&(g=0>d?h:m.F.ba(3.141592653589793-h))),v!=null&&(v.u=L),b!=null&&(b.u=g))}},j.rf=function(T,p,h,a,u,d,g,v){d=m.F.ba(d),0>u&&(u=m.s.P(u),d=m.F.ba(d+3.141592653589793)),m.s.ti(p)?m.s.Y(m.s.P(a),1.570796326794897)?(h=0>a?d:m.F.ba(3.141592653589793-d),3.141592653589793>=(d=u/T%6.283185307179586)?T=a-m.s.Mb(d,a):(h=m.F.ba(h+3.141592653589793),T=-a+m.s.Mb(d-3.141592653589793,a))):m.s.Y(m.s.P(d),1.570796326794897)?(h=m.F.ba(h+m.s.Mb(u,d)/(T*Math.cos(a))),T=a):(T=a+u*Math.cos(d)/T,1.570796326794897<m.s.P(T)&&(T=1.570796326794897),m.s.Y(m.s.P(T),1.570796326794897)&&(m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))||(1.570796316258184<m.s.P(T)&&(T=m.s.Mb(1.570796316258184,T)),p=Math.sin(a),a=Math.sin(T),p=Math.sqrt((1+p)/(1-p)),a=Math.sqrt((1+a)/(1-a)),p=Math.log(a)-Math.log(p),h=m.F.ba(h+Math.tan(d)*p))):m.s.Y(m.s.P(a),1.570796326794897)?(h=0>a?d:m.F.ba(3.141592653589793-d),d=u/m.F.qW(T,p),3.141592653589793>=(d%=6.283185307179586)?T=a-m.s.Mb(d,a):(h=m.F.ba(h+3.141592653589793),T=-a+m.s.Mb(d-3.141592653589793,a)),T=m.F.Rq(p,T)):m.s.Y(m.s.P(d),1.570796326794897)?(h=m.F.ba(h+m.s.Mb(u,d)*m.F.w(p,a)/(T*Math.cos(a))),T=a):(T=1.570796326794897*(u*Math.cos(d)+m.F.q(T,p,a))/m.F.Ah(T,p),1.570796326794897<m.s.P(T)&&(T=m.s.Mb(1.570796326794897,T)),T=m.F.Rq(p,T),m.s.Y(m.s.P(T),1.570796326794897)&&(m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))||(u=m.F.Qw(p,a),a=m.F.Qw(p,T),1.570796316258184<m.s.P(a)&&(a=m.s.Mb(1.570796316258184,T),T=m.F.yO(p,a)),p=Math.sin(u),a=Math.sin(a),p=Math.sqrt((1+p)/(1-p)),a=Math.sqrt((1+a)/(1-a)),p=Math.log(a)-Math.log(p),h=m.F.ba(h+Math.tan(d)*p))),g!=null&&(g.u=h),v!=null&&(v.u=T)},j}()}(ye||(ye={})),function(m){m.kb=function(){function j(){}return j.Xy=function(T,p,h,a,u,d,g){m.cu.tb(T,p,h,a,u,d,null,g,null)},j.yi=function(T,p,h,a,u,d,g,v){m.cu.rf(T,p,h,a,u,d,g,v)},j.wd=function(T,p,h,a,u,d,g,v,b,C){switch(C){case 2:m.Wk.tb(T,p,h,a,u,d,g,v,b);break;case 3:m.QC.tb(T,p,h,a,u,d,g,v,b);break;case 1:m.PC.tb(T,p,h,a,u,d,g,v,b);break;default:m.cu.tb(T,p,h,a,u,d,g,v,b)}},j.oj=function(T,p,h,a,u,d,g,v,b){switch(b){case 2:m.Wk.rf(T,p,h,a,u,d,g,v);break;case 3:m.QC.rf(T,p,h,a,u,d,g,v);break;case 1:m.PC.rf(T,p,h,a,u,d,g,v);break;default:m.cu.rf(T,p,h,a,u,d,g,v)}},j}()}(ye||(ye={})),function(m){var j=function(){function p(){this.y=this.x=null}return p.construct=function(h){var a=new p;return a.x=new m.Wb,a.x.set(h.x),a.y=new m.Wb,a.y.set(h.y),a},p.VE=function(h,a){var u=new p;return u.x=new m.Wb,u.x.set(h),u.y=new m.Wb,u.y.set(a),u},p.prototype.qg=function(){return this.x.qg()&&this.y.qg()},p.prototype.value=function(){return m.h.construct(this.x.value(),this.y.value())},p}();m.vY=j;var T=function(){function p(){this.z=this.y=this.x=null}return p.construct=function(h){var a=new p;return a.x=new m.Wb,a.x.set(h.x),a.y=new m.Wb,a.y.set(h.y),a.z=new m.Wb,a.z.set(h.z),a},p.VE=function(h,a,u){var d=new p;return d.x=new m.Wb,d.x.set(h),d.y=new m.Wb,d.y.set(a),d.z=new m.Wb,d.z.set(u),d},p.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},p.prototype.value=function(){return new m.Nd(this.x.value(),this.y.value(),this.z.value())},p.prototype.Qh=function(h){var a=new m.Wb,u=new m.Wb,d=new m.Wb;return a.Kl(this.x,h.x),u.Kl(this.y,h.y),d.Kl(this.z,h.z),(h=new m.Wb).dN(a,u),h.add(d),h},p.prototype.cF=function(h){var a=new p;a.x.Kl(this.y,h.z),a.y.Kl(this.z,h.x),a.z.Kl(this.x,h.y);var u=new m.Wb,d=new m.Wb,g=new m.Wb;return u.Kl(this.z,h.y),d.Kl(this.x,h.z),g.Kl(this.y,h.x),a.x.sub(u),a.y.sub(d),a.z.sub(g),a},p}();m.wY=T,m.Ox=function(){function p(){}return p.EP=function(h,a,u){var d=a.x;a=a.y,p.cl(1,h,Math.cos(d),Math.sin(d),Math.cos(a),Math.sin(a),u)},p.DP=function(h,a){var u=new m.Nd;return p.EP(h,a,u),u},p.cl=function(h,a,u,d,g,v,b){h/=Math.sqrt(1-a*v*v),b.K(h*g*u,h*g*d,h*(1-a)*v)},p.Yu=function(h,a){var u=new m.Wb,d=new m.Wb,g=new m.Wb,v=new m.Wb;u.cos(a.x),d.sin(a.x),g.cos(a.y),v.sin(a.y);var b=new m.Wb;return b.set(v),b.Ag(v),b.No(h),b.No(-1),b.kN(),b.sqrt(),(a=new m.Wb).set(1),a.jm(b),(b=new m.Wb).set(a),b.Ag(g),b.Ag(u),(u=new m.Wb).set(a),u.Ag(g),u.Ag(d),(d=new m.Wb).set(a),d.No(1-h),d.Ag(v),T.VE(b,u,d)},p.SS=function(h,a,u,d){if(Math.abs(a.x-u.x)>Math.PI||Math.abs(a.y)>.5*Math.PI||Math.abs(u.y)>.5*Math.PI||(Math.abs(a.y)==.5*Math.PI||Math.abs(u.y)==.5*Math.PI)&&a.x!=u.x)return NaN;if(d=p.cB(d,Math.min(a.x,u.x),Math.max(a.x,u.x)),!new m.Nc(a.x,u.x).contains(d))return NaN;var g=j.construct(a);if(u=j.construct(u),g=p.Yu(h,g),u=p.Yu(h,u),(u=g.cF(u)).z.qg())return a.y;var v=new m.Wb;v.set(u.x),v.jm(u.z),v.No(-1);var b=new m.Wb;b.set(u.y),b.jm(u.z),b.No(-1);var C=new m.Wb;return C.set(b),C.Ag(b),(g=new m.Wb).set(v),g.Ag(v),g.add(C),g.sqrt(),g.qg()||v.qg()&&b.qg()?a.y:(a=Math.atan2(b.value(),v.value()),a=Math.atan2(g.value()*Math.cos(a-d),1-h),d=p.DP(h,m.h.construct(d,a)),h=new m.Nd(d.x,d.y,-d.z),d=u.value().Qh(d),h=u.value().Qh(h),Math.abs(h)<Math.abs(d)&&(a=-a),a)},p.Oz=function(h,a,u,d,g){if(g[0]=NaN,g[1]=NaN,Math.abs(a.x-u.x)>Math.PI||Math.abs(a.y)>.5*Math.PI||Math.abs(u.y)>.5*Math.PI||(Math.abs(a.y)==.5*Math.PI||Math.abs(u.y)==.5*Math.PI)&&a.x!=u.x||Math.abs(d)>=.5*Math.PI||0<a.y&&0<u.y&&a.y>d&&u.y>d||0>a.y&&0>u.y&&a.y<d&&u.y<d)return 0;var v=j.construct(a),b=j.construct(u);v=p.Yu(h,v),b=p.Yu(h,b);var C=v.cF(b);if(C.z.qg())return new m.Nc(a.y,u.y).contains(d)?(g[0]=a.x,1):0;(b=new m.Wb).set(C.x),b.jm(C.z),b.No(-1),(v=new m.Wb).set(C.y),v.jm(C.z),v.No(-1),(C=new m.Wb).set(v),C.Ag(v);var M=new m.Wb;return M.set(b),M.Ag(b),M.add(C),M.sqrt(),M.qg()||b.qg()&&v.qg()?d==0?(g[0]=a.x,g[1]=u.x,2):0:(h=(1-h)*Math.tan(d)/M.value(),1<Math.abs(h)?0:(h=Math.acos(h),C=Math.atan2(v.value(),b.value()),b=Math.min(a.x,u.x),v=Math.max(a.x,u.x),u=p.cB(C-h,b,v),h=d!=0?p.cB(C+h,b,v):u,d=0,b<=u&&u<=v&&(g[d]=u,d++),h!=u&&b<=h&&h<=v&&(g[d]=h,++d==2&&Math.abs(g[0]-a.x)>Math.abs(g[1]-a.x)&&(a=g[0],g[0]=g[1],g[1]=a)),d))},p.cB=function(h,a,u){return h>u?h-=2*(a=Math.ceil((h-u)/(2*Math.PI)))*Math.PI:h<a&&(h+=2*(a=Math.ceil((a-h)/(2*Math.PI)))*Math.PI),h},p}()}(ye||(ye={})),function(m){m.XK=function(){function j(){}return j.$X=function(T,p){var h=8,a=[0,0,0,0],u=new m.h;u.L(p),u.scale(m.cb.sc(T).Hd().Ec()==9102?1:m.cb.sc(T).Hd().ai/3.141592653589793*180),-180>u.x?(u.x-=u.x%360,-180>u.x&&(u.x+=360)):180<u.x&&(u.x-=u.x%360,180<u.x&&(u.x-=360)),90<u.y&&(u.y=90),-90>u.y&&(u.y=-90);for(var d=-180,g=180,v=(T=5*h)-1,b=(p=(T+31)/32)-1;0<=b;b--)for(var C=v-32*b,M=Math.min(32,T-32*b),$=1;$<M;$+=2){var L=.5*(g+d);u.x>=L?(a[b]|=1<<C,d=L):g=L,C-=2,v-=2}for(d=-90,g=90,v=T-2,b=p-1;0<=b;b--)for(C=v-32*b,M=Math.min(32,T-32*b),$=0;$<M;$+=2)L=.5*(g+d),u.y>=L?(a[b]|=1<<C,d=L):g=L,C-=2,v-=2;return j.$P(a,h,h)},j.$P=function(T,p,h){for(var a=[],u=0;u<p;u++)a[u]="";for(var d=u=0,g=0;g<p;g++){var v=T[u]>>d&31;if(31<(d+=5)){var b=37-d;v&=(1<<b)-1,d-=32,v|=(T[++u]&(1<<d)-1)<<b}a[p-1-g]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[v]}if(h>p)for(g=0;g<h-p;g++)a.push("0");else h<p&&(a.length=h);return a.join("")},j}()}(ye||(ye={})),function(m){var j={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},T={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};m.wr=function(){function p(){}return p.Sy=function(h){p.xp===!1&&p.yt();var a=p.FQ(h);if(a==-1){var u=p.Bx(h);u!=h&&(a=p.Sy(u))}return a==-1&&(u=p.FK(h))!=h&&(a=p.Sy(u)),a},p.FQ=function(h){return p.Fw[h]!==void 0?p.Fw[h]:-1},p.CQ=function(h){p.xp===!1&&p.yt();var a=p.nF(h);if(a==1e38){var u=p.Bx(h);if(u!=h&&(a=p.nF(u)),a==1e38)return 1e-10}return a},p.ZS=function(h){if(p.Is[h]!==void 0)return!0;var a=p.Bx(h);return a!=h&&p.Is[a]!==void 0},p.aT=function(h){if(p.xo[h]!==void 0)return!0;var a=p.Bx(h);return a!=h&&p.xo[a]!==void 0},p.nF=function(h){return p.xp===!1&&p.yt(),p.Is[h]!==void 0?p.Is[h]:p.xo[h]!==void 0?p.xo[h]:1e38},p.FK=function(h){return p.xp===!1&&p.yt(),p.WA[h]!==void 0?p.WA[h]:h},p.Bx=function(h){return p.xp===!1&&p.yt(),p.XA[h]!==void 0?p.XA[h]:h},p.yt=function(){for(var h,a=j,u=0;u<a.pcsid.length;u+=2)p.xo[a.pcsid[u]]=a.pcstol[2*a.pcsid[u+1]+1];for(u=0;u<a.pcsidc.length;u+=1)for(var d=(h=a.pcsidc[u])[0];d<=h[1];d++)p.xo[d]=a.pcstol[2*h[2]+1];for(u=0;u<a.gcsid.length;u+=2)p.Is[a.gcsid[u]]=a.gcstol[2*a.gcsid[u+1]+1];for(u=0;u<a.gcsidc.length;u+=1)for(d=(h=a.gcsidc[u])[0];d<=h[1];d++)p.xo[d]=a.gcstol[2*h[2]+1];for(u=0;u<T.c.length;u+=1)for(d=(h=T.c[u])[0];d<=h[1];d++)p.Fw[d]=h[2];for(u=0;u<T.nc.length;u+=2)p.Fw[T.nc[u]]=T.nc[u+1];for(T=null,u=0;u<a.newtoold.length;u+=2)p.WA[a.newtoold[u+1]]=a.newtoold[u],p.XA[a.newtoold[u]]=a.newtoold[u+1];j=null,p.xp=!0},p.xp=!1,p.Is=[],p.xo=[],p.WA=[],p.XA=[],p.Fw=[],p}()}(ye||(ye={})),function(m){function j(p){return p.length===0?'""':p[0]=='"'||p[0]=="."||"0"<=p[0]&&"9">=p[0]?p:'"'+p.trim()+'"'}var T=[];m.XC=function(){function p(){}return p.EQ=function(h){try{for(var a=0;a<T.length;a++)if(T[a].wkttext===h)return T[a].unit;for(var u,d=a="",g=!1,v=0;v<h.length;v++){var b=h[v];g===!0?b=='"'?h[v+1]=='"'?a+=b:g=g=!1:a+=b:/[\s]/.test(b)||(b==","?(d=a!==""?d+(j(a)+","):d+",",a=""):b==")"||b=="]"?(d=a!==""?d+(j(a)+"]}"):d+"]}",a=""):b=="("||b=="["?(d+='{ "entity": "'+a.toUpperCase().trim()+'", "values":[',a=""):b=='"'?(g=!0,a=""):a+=b)}u=JSON.parse(d);var C=p.mF(u);if(C===null)return null;for(u=null,b=0;b<C.values.length;b++)if(typeof C.values[b]=="object"&&(C.values[b].entity==="UNIT"||C.values[b].entity==="ANGLEUNIT"||C.values[b].entity==="LENGTHUNIT")){u=C.values[b];break}if(u===null)return null;var M=m.Tc.ZO(C.entity==="GEOGCS"||C.entity==="GEOGCRS"?1:0,u.values[1],u.values[2]);return T.push({wkttext:h,unit:M}),10<T.length&&T.shift(),M}catch{return null}},p.mF=function(h){if(h===null)return null;switch(h.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return h}for(var a=[],u=0;u<h.values.length;u++)if(typeof h.values[u]=="object"&&h.values[u].entity!==void 0)switch(h.values[u].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return h.values[u];default:a.push(h.values[u])}for(h=0;h<a.length;h++)if((u=p.mF(a[h]))!==null)return u;return null},p.DQ=function(h){var a=-1;if(h!=null&&0<h.length){var u=h.search(/PROJCR?S/);if(0<=u){var d=0;if(0<=(u=h.lastIndexOf("UNIT"))&&0<(u=h.indexOf(",",u+4))){u++;var g=h.indexOf("]",u+1);if(0<g)try{d=parseFloat(h.substring(u,g))}catch{d=0}}0<d&&(a=.001/d)}else if(0<=(u=h.search(/GEOGCR?S/))){var v=0;if(d=0,(u=h.indexOf("SPHEROID",u+6))===-1&&(u=h.indexOf("ELLIPSOID",u+7)),0<u&&0<(u=h.indexOf(",",u+8))){if(u++,0<(g=h.indexOf(",",u+1)))try{v=parseFloat(h.substring(u,g))}catch{v=0}if(0<v&&((u=h.lastIndexOf("ANGLEUNIT",g+1))===-1&&(u=h.lastIndexOf("UNIT",g+1)),0<=u&&0<(u=h.indexOf(",",u+4))&&(u++,0<(g=h.indexOf("]",u+1)))))try{d=parseFloat(h.substring(u,g))}catch{d=0}}0<v&&0<d&&(a=.001/(v*d))}}return a},p}()}(ye||(ye={})),function(m){var j;(j=m.eL||(m.eL={}))[j.NONE=0]="NONE",j[j.LINEAR=1]="LINEAR",j[j.ANGULAR=2]="ANGULAR",function(p){p[p.enumFloat=0]="enumFloat",p[p.enumDouble=1]="enumDouble",p[p.enumInt32=2]="enumInt32",p[p.enumInt64=3]="enumInt64",p[p.enumInt8=4]="enumInt8",p[p.enumInt16=5]="enumInt16"}(m.QL||(m.QL={})),function(p){p[p.POSITION=0]="POSITION",p[p.Z=1]="Z",p[p.M=2]="M",p[p.ID=3]="ID",p[p.NORMAL=4]="NORMAL",p[p.TEXTURE1D=5]="TEXTURE1D",p[p.TEXTURE2D=6]="TEXTURE2D",p[p.TEXTURE3D=7]="TEXTURE3D",p[p.ID2=8]="ID2",p[p.MAXSEMANTICS=10]="MAXSEMANTICS"}(m.Ih||(m.Ih={}));var T=function(){function p(h,a){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,a!==void 0){for(this.Aa=a.Aa,this.Oq=a.Oq,this.bg=a.bg.slice(0),this.uh=a.uh.slice(0),this.wl=a.wl,this.Vs=[],h=a=0;h<this.Aa;h++)this.Vs[h]=a,a+=p.Va(this.bg[h]);for(this.Oq=a,this.Ae=[],h=0;h<this.Aa;h++){a=p.Va(this.kd(h));for(var u=p.se(this.kd(h)),d=0;d<a;d++)this.Ae[this.Vs[h]+d]=u}}else this.Oq=this.Aa=0}return p.prototype.kd=function(h){if(0>h||h>this.Aa)throw m.i.N();return this.bg[h]},p.prototype.Pf=function(h){return this.uh[h]},p.lz=function(h){return p.JM[h]},p.Tp=function(h){return p.SM[h]},p.Va=function(h){return p.rM[h]},p.prototype.hasAttribute=function(h){return 0<=this.uh[h]},p.prototype.iG=function(){return this.hasAttribute(1)},p.se=function(h){return p.eD[h]},p.prototype.LR=function(h){return this.Vs[h]},p.DG=function(h,a){return p.eD[h]===a},p.prototype.Nb=function(h){return this===h},p.prototype.An=function(){for(var h=m.O.Th(this.bg[0]),a=1;a<this.Aa;a++)h=m.O.Th(this.bg[a],h);return h},p.prototype.$j=function(h){return this.Vs[h]},p.prototype.cc=function(){return this.wl},p.prototype.Ed=function(h){return this.bg[h]},p.eD=[0,0,NaN,0,0,0,0,0,0],p.JM=[1,1,1,0,2,1,1,1,0],p.SM=[1,1,1,2,0,0,0,0,2],p.rM=[2,1,1,1,3,1,2,3,2],p}();m.ra=T}(ye||(ye={})),function(m){function j(g,v,b){var C=v-(g=new d(g)).e,M=g.c;for(M.length>++v&&T(g,C,d.eu),M[0]?b?C=v:(M=g.c,C=g.e+C+1):++C;M.length<C;M.push(0));return C=g.e,b===1||b&&(v<=C||C<=h)?(0>g.Bd&&M[0]?"-":"")+(1<M.length?M[0]+"."+M.join("").slice(1):M[0])+(0>C?"e":"e+")+C:g.toString()}function T(g,v,b,C){var M=g.c,$=g.e+v+1;if(b===1?C=5<=M[$]:b===2?C=5<M[$]||M[$]==5&&(C||0>$||M[$+1]!==void 0||1&M[$-1]):b===3?C=C||M[$]!==void 0||0>$:(C=!1,b!==0&&p("!Big.RM!")),1>$||!M[0])C?(g.e=-v,g.c=[1]):g.c=[g.e=0];else{if(M.length=$--,C)for(;9<++M[$];)M[$]=0,$--||(++g.e,M.unshift(1));for($=M.length;!M[--$];M.pop());}return g}function p(g){throw(g=Error(g)).name="BigError",g}var h=-7,a=21,u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,d=function(){function g(v){if(v instanceof g)this.Bd=v.Bd,this.e=v.e,this.c=v.c.slice();else{var b,C,M;for(v===0&&0>1/v?v="-0":u.test(v+="")||p(NaN),this.Bd=v.charAt(0)=="-"?(v=v.slice(1),-1):1,-1<(b=v.indexOf("."))&&(v=v.replace(".","")),0<(C=v.search(/e/i))?(0>b&&(b=C),b+=+v.slice(C+1),v=v.substring(0,C)):0>b&&(b=v.length),C=0;v.charAt(C)=="0";C++);if(C==(M=v.length))this.c=[this.e=0];else{for(;v.charAt(--M)=="0";);for(this.e=b-C-1,this.c=[],b=0;C<=M;this.c[b++]=+v.charAt(C++));}}}return g.prototype.abs=function(){var v=new g(this);return v.Bd=1,v},g.prototype.cmp=function(v){var b=this.c,C=(v=new g(v)).c,M=this.Bd,$=v.Bd,L=this.e,q=v.e;if(!b[0]||!C[0])return b[0]?M:C[0]?-$:0;if(M!=$)return M;if(v=0>M,L!=q)return L>(q^v)?1:-1;for(M=-1,$=(L=b.length)<(q=C.length)?L:q;++M<$;)if(b[M]!=C[M])return b[M]>(C[M]^v)?1:-1;return L==q?0:L>(q^v)?1:-1},g.prototype.jm=function(v){var b=this.c,C=(v=new g(v)).c,M=this.Bd==v.Bd?1:-1,$=g.rr;if(($!==~~$||0>$||1e6<$)&&p("!Big.DP!"),!b[0]||!C[0])return b[0]==C[0]&&p(NaN),C[0]||p(M/0),new g(0*M);var L,q,U=C.slice(),ee=L=C.length,Q=b.length,ge=b.slice(0,L),ve=ge.length,fe=v,Ce=fe.c=[],Ie=0,Ne=$+(fe.e=this.e-v.e)+1;for(fe.Bd=M,M=0>Ne?0:Ne,U.unshift(0);ve++<L;ge.push(0));do{for(q=0;10>q;q++){if(L!=(ve=ge.length))var Ve=L>ve?1:-1;else{var Xe=-1;for(Ve=0;++Xe<L;)if(C[Xe]!=ge[Xe]){Ve=C[Xe]>ge[Xe]?1:-1;break}}if(!(0>Ve))break;for(v=ve==L?C:U;ve;){if(ge[--ve]<v[ve]){for(Xe=ve;Xe&&!ge[--Xe];ge[Xe]=9);--ge[Xe],ge[ve]+=10}ge[ve]-=v[ve]}for(;!ge[0];ge.shift());}Ce[Ie++]=Ve?q:++q,ge[0]&&Ve?ge[ve]=b[ee]||0:ge=[b[ee]]}while((ee++<Q||ge[0]!==void 0)&&M--);return Ce[0]||Ie==1||(Ce.shift(),fe.e--),Ie>Ne&&T(fe,$,g.eu,ge[0]!==void 0),fe},g.prototype.fS=function(){return 0<this.cmp(0)},g.prototype.nT=function(){return 0>this.cmp(0)},g.prototype.jt=function(v){var b,C=this.Bd,M=(v=new g(v)).Bd;if(C!=M)return v.Bd=-M,this.tI(v);var $=this.c.slice(),L=this.e,q=v.c,U=v.e;if(!$[0]||!q[0])return q[0]?(v.Bd=-M,v):new g($[0]?this:0);if(C=L-U){for((b=0>C)?(C=-C,L=$):(U=L,L=q),L.reverse(),M=C;M--;L.push(0));L.reverse()}else for(L=((b=$.length<q.length)?$:q).length,C=M=0;M<L;M++)if($[M]!=q[M]){b=$[M]<q[M];break}if(b&&(L=$,$=q,q=L,v.Bd=-v.Bd),0<(M=(L=q.length)-(b=$.length)))for(;M--;$[b++]=0);for(M=b;L>C;){if($[--L]<q[L]){for(b=L;b&&!$[--b];$[b]=9);--$[b],$[L]+=10}$[L]-=q[L]}for(;$[--M]==0;$.pop());for(;$[0]==0;)$.shift(),--U;return $[0]||(v.Bd=1,$=[U=0]),v.c=$,v.e=U,v},g.prototype.tI=function(v){var b=this.Bd,C=(v=new g(v)).Bd;if(b!=C)return v.Bd=-C,this.jt(v);C=this.e;var M=this.c,$=v.e,L=v.c;if(!M[0]||!L[0])return L[0]?v:new g(M[0]?this:0*b);if(M=M.slice(),b=C-$){for(0<b?($=C,C=L):(b=-b,C=M),C.reverse();b--;C.push(0));C.reverse()}for(0>M.length-L.length&&(C=L,L=M,M=C),b=L.length,C=0;b;)C=(M[--b]=M[b]+L[b]+C)/10|0,M[b]%=10;for(C&&(M.unshift(C),++$),b=M.length;M[--b]==0;M.pop());return v.c=M,v.e=$,v},g.prototype.pow=function(v){var b=this,C=new g(1),M=C,$=0>v;for((v!==~~v||-1e6>v||1e6<v)&&p("!pow!"),v=$?-v:v;1&v&&(M=M.lr(b)),v>>=1;)b=b.lr(b);return $?C.jm(M):M},g.prototype.round=function(v,b){var C=this;return v==null?v=0:(v!==~~v||0>v||1e6<v)&&p("!round!"),T(C=new g(C),v,b??g.eu),C},g.prototype.sqrt=function(){var v=this.c,b=this.Bd,C=this.e,M=new g("0.5");if(!v[0])return new g(this);0>b&&p(NaN),(b=Math.sqrt(this.toString()))==0||b==1/0?((b=v.join("")).length+C&1||(b+="0"),(v=new g(Math.sqrt(b).toString())).e=((C+1)/2|0)-(0>C||1&C)):v=new g(b.toString()),b=v.e+(g.rr+=4);do C=v,v=M.lr(C.tI(this.jm(C)));while(C.c.slice(0,b).join("")!==v.c.slice(0,b).join(""));return T(v,g.rr-=4,g.eu),v},g.prototype.lr=function(v){var b=this.c,C=(v=new g(v)).c,M=b.length,$=C.length,L=this.e,q=v.e;if(v.Bd=this.Bd==v.Bd?1:-1,!b[0]||!C[0])return new g(0*v.Bd);if(v.e=L+q,M<$){var U=b;b=C,C=U,q=M,M=$,$=q}for(U=Array(q=M+$);q--;U[q]=0);for(L=$;L--;){for($=0,q=M+L;q>L;)$=U[q]+C[L]*b[q-L-1]+$,U[q--]=$%10,$=$/10|0;U[q]=(U[q]+$)%10}for($&&++v.e,U[0]||U.shift(),L=U.length;!U[--L];U.pop());return v.c=U,v},g.prototype.toString=function(){var v=this.e,b=this.c.join(""),C=b.length;if(v<=h||v>=a)b=b.charAt(0)+(1<C?"."+b.slice(1):"")+(0>v?"e":"e+")+v;else if(0>v){for(;++v;b="0"+b);b="0."+b}else if(0<v)if(++v>C)for(v-=C;v--;b+="0");else v<C&&(b=b.slice(0,v)+"."+b.slice(v));else 1<C&&(b=b.charAt(0)+"."+b.slice(1));return 0>this.Bd&&this.c[0]?"-"+b:b},g.prototype.toExponential=function(v){return v==null?v=this.c.length-1:(v!==~~v||0>v||1e6<v)&&p("!toExp!"),j(this,v,1)},g.prototype.toFixed=function(v){var b=h,C=a;if(h=-(a=1/0),v==null)var M=this.toString();else v===~~v&&0<=v&&1e6>=v&&(M=j(this,this.e+v),0>this.Bd&&this.c[0]&&0>M.indexOf("-")&&(M="-"+M));return h=b,a=C,M||p("!toFix!"),M},g.prototype.toPrecision=function(v){return v==null?this.toString():((v!==~~v||1>v||1e6<v)&&p("!toPre!"),j(this,v-1,2))},g.rr=20,g.eu=1,g}();m.hp=d}(ye||(ye={})),function(m){var j=function(){function T(p){this.lf=p}return T.prototype.nr=function(p,h,a){var u=new m.h,d=new m.h,g=this.lf;a.Vd(p,h,function(v,b){return g.tc(2*v,u),g.tc(2*b,d),u.compare(d)})},T.prototype.$p=function(p){return this.lf.read(2*p+1)},T}();m.pi=function(){function T(){}return T.aq=function(p){if(p.B())return!1;var h=p.getType();return h==1736?p.Ke()!=0:h==1607?(h=[!1],T.sE(p,!0,h),h[0]):!(h!=197&&(!m.aa.yd(h)||p.BG()))},T.gm=function(p){var h=p.getType();if(h==1736)return h=new m.Ta(p.description),p.B()||p.dD(h),h;if(h==1607)return T.sE(p,!1,null);if(h==197)return h=new m.Ta(p.description),p.B()||h.ad(p,!1),h;if(m.aa.yd(h)){if(h=new m.de(p.description),!p.B()&&!p.BG()){var a=new m.Sa;p.To(a),h.add(a),p.Po(a),h.add(a)}return h}if(m.aa.Rn(h))return null;throw m.i.N()},T.sE=function(p,h,a){a!=null&&(a[0]=!1);var u=null;if(h||(u=new m.de(p.description)),!p.B()){var d=new m.ia(0);d.Jb(2*p.da());for(var g=0,v=p.da();g<v;g++)if(0<p.Ja(g)&&!p.Nn(g)){var b=p.Ba(g);d.add(b),b=p.Vc(g)-1,d.add(b)}if(0<d.size){v=new m.Xt,g=p.ub(0),v.sort(d,0,d.size,new j(g)),v=new m.h,g.tc(2*d.get(0),v),b=0;for(var C=1,M=new m.Sa,$=new m.h,L=1,q=d.size;L<q;L++)if(g.tc(2*d.get(L),$),$.qb(v))d.get(b)>d.get(L)?(d.set(b,2147483647),b=L):d.set(L,2147483647),C++;else{if(1&C){if(h)return a!=null&&(a[0]=!0),null}else d.set(b,2147483647);v.L($),b=L,C=1}if(1&C){if(h)return a!=null&&(a[0]=!0),null}else d.set(b,2147483647);if(!h)for(d.Vd(0,d.size,function(U,ee){return U-ee}),L=0,q=d.size;L<q&&d.get(L)!=2147483647;L++)p.ve(d.get(L),M),u.add(M)}}return h?null:u},T}()}(ye||(ye={})),function(m){var j=function(){function T(){this.yf=new m.ia(0),this.ys=new m.ia(0),this.EH=1,this.Es=NaN}return T.prototype.sort=function(p,h,a,u){if(32>a-h)u.nr(h,a,p);else{var d=!0;try{for(var g=1/0,v=-1/0,b=h;b<a;b++){var C=u.$p(p.get(b));C<g&&(g=C),C>v&&(v=C)}if(this.reset(a-h,g,v,a-h)){for(b=h;b<a;b++){var M=p.get(b);C=u.$p(M);var $=this.zF(C);this.yf.set($,this.yf.get($)+1),this.ys.write(b-h,M)}var L=this.yf.get(0);this.yf.set(0,0),b=1;for(var q=this.yf.size;b<q;b++){var U=this.yf.get(b);this.yf.set(b,L),L+=U}for(b=h;b<a;b++){M=this.ys.read(b-h),C=u.$p(M),$=this.zF(C);var ee=this.yf.get($);p.set(ee+h,M),this.yf.set($,ee+1)}d=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(d)u.nr(h,a,p);else{for(b=a=0,q=this.yf.size;b<q;b++)d=a,(a=this.yf.get(b))>d&&u.nr(h+d,h+a,p);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},T.prototype.reset=function(p,h,a,u){return!(2>p||a==h)&&(p=Math.min(T.hL,p),this.yf.Jb(p),this.yf.resize(p),this.yf.Wj(0,0,this.yf.size),this.EH=h,this.ys.resize(u),this.Es=(a-h)/(p-1),!0)},T.prototype.zF=function(p){return m.O.truncate((p-this.EH)/this.Es)},T.hL=65536,T}();m.Xt=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.enum_line=1]="enum_line",T[T.enum_arc=2]="enum_arc",T[T.enum_dummy=4]="enum_dummy",T[T.enum_concave_dip=8]="enum_concave_dip",T[T.enum_connection=3]="enum_connection";var p=function(){function g(){}return g.Qu=function(v,b,C,M,$,L){var q=new g;return q.Im=new m.h,q.Vm=new m.h,q.aw=new m.h,q.Im.L(v),q.Vm.L(b),q.aw.L(C),q.Co=M,q.qh=$,q.sh=L,q},g.construct=function(v,b,C,M){var $=new g;return $.Im=new m.h,$.Vm=new m.h,$.aw=new m.h,$.Im.L(v),$.Vm.L(b),$.aw.Rc(),$.Co=4,$.qh=C,$.sh=M,$},g}(),h=function(){function g(v,b,C,M,$,L){this.Yv=null,this.ya=0,this.EA=v,this.bI=this.$H=0,this.Ka=b,this.Mj=C,this.vk=M,this.Dq=$,this.Ub=L}return g.prototype.next=function(){for(var v=new m.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,v),this.ya++,!v.B())break}var b=!1;if(this.Yv==null&&(this.$H=v.Lg(),this.bI=v.ih(),this.Yv=d.buffer(v,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),b=!0),this.ya<this.EA.I()){var C=new m.Da;this.Yv.copyTo(C)}else C=this.Yv;if(!b){b=new m.Dd;var M=v.Lg()-this.$H;v=v.ih()-this.bI,b.gg(M,v),C.Oc(b)}return C},g.prototype.La=function(){return 0},g.prototype.qe=function(){},g}(),a=function(){function g(v,b){this.Wa=v,this.ya=0,this.oq=b}return g.prototype.next=function(){var v=this.Wa.X;if(this.ya<v.da()){var b=this.ya;if(this.ya++,!v.Nn(b))for(var C=v.Na(v.Vc(b)-1);this.ya<v.da();){var M=v.Na(v.Ba(this.ya));if(v.Nn(this.ya)||M!=C)break;C=v.Na(v.Vc(this.ya)-1),this.ya++}if(this.ya-b==1)return this.Wa.kE(this.Wa.X,b,this.oq);for((C=new m.Ta(this.Wa.X.description)).addPath(this.Wa.X,b,!0),b+=1;b<this.ya;b++)C.Dr(this.Wa.X,b,0,v.rv(b),!1);return this.Wa.kE(C,0,this.oq)}return null},g.prototype.La=function(){return 0},g.prototype.qe=function(){},g}(),u=function(){function g(v){this.Wa=v,this.ya=0}return g.prototype.next=function(){var v=this.Wa.X;if(this.ya<v.da()){var b=this.ya;for(v.Ir(this.ya),this.ya++;this.ya<v.da()&&!(0<v.Ir(this.ya));)this.ya++;return b==0&&this.ya==v.da()?this.Wa.py(v,0,v.da()):this.Wa.py(v,b,this.ya)}return null},g.prototype.La=function(){return 0},g.prototype.qe=function(){},g}(),d=function(){function g(v){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=v,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return g.buffer=function(v,b,C,M,$,L){if(v==null||0>M)throw m.i.N();if(v.B())return new m.Da(v.description);var q=new m.l;return v.xc(q),0<b&&q.W(b,b),(L=new g(L)).Mj=C,L.X=v,L.qa=m.ta.Wd(C,q,!0),L.ct=m.ta.Wd(null,q,!0),L.Ka=b,L.JT=v.getType(),0>=$&&($=96),L.rb=Math.abs(L.Ka),L.Kv=L.rb!=0?1/L.rb:0,isNaN(M)||M==0?M=1e-5*L.rb:M>.5*L.rb&&(M=.5*L.rb),12>$&&($=12),(v=Math.abs(b)*(1-Math.cos(Math.PI/$)))>M?M=v:(v=Math.PI/Math.acos(1-M/Math.abs(b)))<$-1&&12>($=m.O.truncate(v))&&($=12,M=Math.abs(b)*(1-Math.cos(Math.PI/$))),L.vk=M,L.Dq=$,L.tA=Math.min(L.ct,.25*M),L.lE()},g.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var v=this.qE();v=m.O.truncate((v+3)/4);var b=.5*Math.PI/v;this.oA=b;for(var C=0;C<4*v;C++)this.Id.push(null);var M=Math.cos(b);b=Math.sin(b);var $=m.h.construct(0,1);for(C=0;C<v;C++)this.Id[C+0*v]=m.h.construct($.y,-$.x),this.Id[C+1*v]=m.h.construct(-$.x,-$.y),this.Id[C+2*v]=m.h.construct(-$.y,$.x),this.Id[C+3*v]=$,($=m.h.construct($.x,$.y)).Bt(M,b)},g.prototype.lE=function(){var v=this.X.getType();if(m.aa.yd(v))return(v=new m.Ta(this.X.description)).oc(this.X,!0),this.X=v,this.lE();if(this.Ka<=this.qa){if(!m.aa.US(v))return new m.Da(this.X.description);if(0>=this.Ka&&(v=new m.l,this.X.A(v),v.R()<=2*-this.Ka||v.ca()<=2*this.Ka))return new m.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw m.i.Qa()}},g.prototype.RN=function(){if(this.EG(this.X)){var v=new m.Sa;this.X.ve(0,v);var b=new m.l;return this.X.A(b),v.Cb(b.sf()),this.Gu(v)}return this.X=this.WV(this.X),v=new a(this,this.oq),m.Gh.local().V(v,this.Mj,this.Ub).next()},g.prototype.QN=function(){if(this.Ka==0)return this.X;var v=m.Yl.local();if(this.cv(),this.X=v.V(this.X,null,!1,this.Ub),0>this.Ka){var b=this.X;return b=this.py(b,0,b.da()),v.V(b,this.Mj,!1,this.Ub)}return this.EG(this.X)?(v=new m.Sa,this.X.ve(0,v),b=new m.l,this.X.A(b),v.Cb(b.sf()),this.Gu(v)):(v=new u(this),m.Gh.local().V(v,this.Mj,this.Ub).next())},g.prototype.py=function(v,b,C){for(var M=new m.Da(v.description);b<C;b++)if(!(1>v.Ja(b))){var $=v.Ir(b),L=new m.l;if(v.Rj(b,L),0<this.Ka){if(0<$)if(this.FG(v,b))$=new m.Sa,v.ve(v.Ba(b),$),$.Cb(L.sf()),this.yu(M,$);else{var q=$=new m.Ta(v.description);q=m.Zt.JG(this.X,b)||this.zn(this.X,b,q,!0,1)==2?this.jE(v,b):this.yn($),M.add(q,!1)}else if(!(L.R()+this.qa<=2*this.rb||L.ca()+this.qa<=2*this.rb||(q=$=new m.Ta(v.description),this.zn(this.X,b,q,!0,1),$.B()))){var U=new m.l;for(U.K(L),U.W(this.rb,this.rb),q.tp(U),L=1,$=(q=this.yn($)).da();L<$;L++)M.addPath(q,L,!0)}}else if(0<$){if(!(L.R()+this.qa<=2*this.rb||L.ca()+this.qa<=2*this.rb||(q=$=new m.Ta(v.description),this.zn(this.X,b,q,!0,-1),$.B())))for(U=new m.l,q.xc(U),U.W(this.rb,this.rb),q.tp(U),L=1,$=(q=this.yn($)).da();L<$;L++)M.addPath(q,L,!0)}else for(q=$=new m.Ta(v.description),this.zn(this.X,b,q,!0,-1),L=0,$=(q=this.yn($)).da();L<$;L++)M.addPath(q,L,!0)}if(0<this.Ka)return 1<M.da()?M=this.yn(M):g.kx(M);if(v=new m.l,M.xc(v),M.B())return g.kx(M);for(v.W(this.rb,this.rb),M.tp(v),M=this.yn(M),v=new m.Da(M.description),L=1,$=M.da();L<$;L++)v.addPath(M,L,!1);return g.kx(v)},g.prototype.PN=function(){return this.Gu(this.X)},g.prototype.Gu=function(v){var b=new m.Da(this.X.description);return this.yu(b,v),this.sX(b)},g.prototype.ON=function(){var v=new h(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return m.Gh.local().V(v,this.Mj,this.Ub).next()},g.prototype.LN=function(){var v=new m.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)v.ad(this.X,!1);else{var b=new m.Fh;this.X.bn(b),b.W(this.Ka,this.Ka),v.ad(b,!1)}return v}return v.ad(this.X,!1),this.X=v,this.jE(v,0)},g.prototype.jE=function(v,b){this.cv();var C=new m.Da(v.description),M=new m.h,$=new m.h,L=new m.h,q=new m.h,U=new m.h,ee=new m.h,Q=new m.h,ge=new m.h,ve=v.Ja(b),fe=v.Ba(b),Ce=0;for(b=v.Ja(b);Ce<b;Ce++){if(v.D(fe+Ce,$),v.D(fe+(Ce+1)%ve,q),v.D(fe+(Ce+2)%ve,ee),Q.uc(q,$),Q.length()==0||(Q.Hv(),Q.normalize(),Q.scale(this.rb),M.add(Q,$),L.add(Q,q),Ce==0?C.Lt(M):C.Ci(M),C.Ci(L),ge.uc(ee,q),ge.length()==0))throw m.i.Qa();ge.Hv(),ge.normalize(),ge.scale(this.rb),U.add(ge,q),this.GD(C,q,L,U,!1)}return g.kx(C)},g.prototype.kE=function(v,b,C){if(this.cv(),1>v.Ja(b))return null;if(this.FG(v,b)&&0<this.Ka){C=new m.Sa,v.ve(v.Ba(b),C);var M=new m.l;return v.Rj(b,M),C.Cb(M.sf()),this.Gu(C)}if(M=new m.Ta(v.description),v.Nn(b))this.zn(v,b,M,C,1),this.zn(v,b,M,C,-1);else{var $=new m.Ta(v.description);$.addPath(v,b,!1),$.Dr(v,b,0,v.rv(b),!1),this.zn($,0,M,C,1)}return this.yn(M)},g.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw m.i.fu("user_canceled")},g.prototype.yn=function(v){return m.Fg.Mk(v,this.ct,!0,!0,this.Ub)},g.prototype.qE=function(){if(this.vk==0)return this.Dq;var v=1-this.vk*Math.abs(this.Kv);return 4>(v=-1>v?4:2*Math.PI/Math.acos(v)+.5)?v=4:v>this.Dq&&(v=this.Dq),m.O.truncate(v)},g.prototype.GD=function(v,b,C,M,$){this.cv();var L=new m.h;L.uc(C,b),L.scale(this.Kv);var q=new m.h;q.uc(M,b),q.scale(this.Kv),0>(L=Math.atan2(L.y,L.x)/this.oA)&&(L=this.Id.length+L),L=this.Id.length-L,0>(q=Math.atan2(q.y,q.x)/this.oA)&&(q=this.Id.length+q),(q=this.Id.length-q)<L&&(q+=this.Id.length);var U=m.O.truncate(q);q=m.O.truncate(Math.ceil(L)),(L=new m.h).L(this.Id[q%this.Id.length]),L.Ct(this.rb,b);var ee=10*this.qa;for(L.sub(C),L.length()<ee&&(q+=1),L.L(this.Id[U%this.Id.length]),L.Ct(this.rb,b),L.sub(M),L.length()<ee&&--U,C=U-q,C++,U=0,q%=this.Id.length;U<C;U++,q=(q+1)%this.Id.length)L.L(this.Id[q]),L.Ct(this.rb,b),v.Ci(L),this.Xq();$&&v.Ci(M)},g.prototype.zn=function(v,b,C,M,$){var L=new m.gd,q=L.mN(v,b);if(L.Gp(this.tA,!1,!1),2>L.I(q))return 0>$||($=v,L=new m.Sa,$.ve($.Ba(b),L),this.yu(C,L)),1;var U=L.Na(L.Xa(L.Ob(q))),ee=new m.Dd;if(ee.gg(-U.x,-U.y),L.Oc(ee),M&&(this.tQ(L,q,$),2>L.I(q)))return 0>$||($=v,L=new m.Sa,$.ve($.Ba(b),L),this.yu(C,L)),1;this.Zd.length=0;var Q=L.Ob(q);b=L.Xa(Q);var ge=$==1?L.Ma(b):L.U(b);v=$==1?L.U(b):L.Ma(b);var ve=!0;M=new m.h,q=new m.h;var fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=new m.h,Ve=new m.h,Xe=new m.h,et=new m.h,dt=new m.h,ct=this.rb;Q=L.Ja(Q);for(var mt=0;mt<Q;mt++)L.D(v,q),ve&&(L.D(b,M),L.D(ge,fe),Xe.uc(M,fe),Xe.normalize(),dt.MG(Xe),dt.scale(ct),Ce.add(dt,M)),Ve.uc(q,M),Ve.normalize(),et.MG(Ve),et.scale(ct),Ie.add(M,et),ge=Xe.wi(Ve),ve=Xe.Qh(Ve),0>ge||0>ve&&ge==0?this.Zd.push(p.Qu(Ce,Ie,M,2,this.Zd.length+1,this.Zd.length-1)):Ce.qb(Ie)||(this.Zd.push(p.construct(Ce,M,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(p.construct(M,Ie,this.Zd.length+1,this.Zd.length-1,"dummy"))),Ne.add(q,et),this.Zd.push(p.Qu(Ie,Ne,M,1,this.Zd.length+1,this.Zd.length-1)),Ce.L(Ne),dt.L(et),fe.L(M),M.L(q),Xe.L(Ve),ge=b,b=v,ve=!1,v=$==1?L.U(b):L.Ma(b);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(C),ee.gg(U.x,U.y),C.YD(ee,C.da()-1),1},g.prototype.YV=function(v){for(var b=this.zO(),C=!0,M=b+1,$=b;M!=b;$=M){var L=this.Zd[$];M=L.qh!=-1?L.qh:($+1)%this.Zd.length,L.Co!=0&&(C&&v.Lt(L.Im),L.Co==2?this.GD(v,L.aw,L.Im,L.Vm,!0):v.Ci(L.Vm),C=!1)}},g.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var v=0,b=0,C=this.Zd.length;b<C;){var M=this.Zd[b];if(3&M.Co){v=b;break}b=M.qh}for(C=v+1,b=v;C!=v;b=C){C=(M=this.Zd[b]).qh;for(var $=1,L=null;C!=b&&!(3&(L=this.Zd[C]).Co);)C=L.qh,$++;$!=1&&(M.Co&L.Co)==1&&(this.Ls==null&&(this.Ls=new m.yb,this.lw=new m.yb),this.Ls.Dc(M.Im),this.Ls.Qc(M.Vm),this.lw.Dc(L.Im),this.lw.Qc(L.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(M.Vm.L(this.Ks[0]),L.Im.L(this.Ks[0]),M.qh=C,L.sh=b))}return v},g.prototype.Fv=function(v,b,C){var M=new m.h;if(M.uc(C,v),C=M.length(),0<(C=this.rb*this.rb-C*C*.25)){C=Math.sqrt(C),M.normalize(),M.ar();var $=new m.h;if($.uc(b,v),$.Qh(M)+C>=this.rb)return!0}return!1},g.prototype.tQ=function(v,b,C){for(var M=0;1>M;M++){var $=!1,L=v.Ob(b),q=v.Ja(L);if(q==0)break;var U=q;if(3>q)break;!v.dc(L)&&(U=q-1),L=v.Xa(L),q=0<C?v.Ma(L):v.U(L);for(var ee=0<C?v.U(L):v.Ma(L),Q=q,ge=!0,ve=new m.h,fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=new m.h,Ve=m.h.construct(0,0),Xe=new m.h,et=new m.h,dt=new m.h,ct=new m.h,mt=this.rb,lt=0,gi=0;gi<U&&(v.D(ee,fe),ge&&(v.D(L,ve),v.D(q,Ce),Q=q),et.uc(ve,Ce),et.normalize(),Xe.uc(fe,ve),Xe.normalize(),Q!=ee);){var oi=et.wi(Xe),Ni=et.Qh(Xe),Qi=!0;if(0>oi||0>Ni&&oi==0||!this.Fv(Ce,ve,fe)||(Ve.L(fe),Qi=!1,++lt,$=!0),Qi){if(0<lt)for(;(oi=0<C?v.Ma(Q):v.U(Q))!=L;){if(v.D(oi,Ie),!this.Fv(Ie,Ce,Ve)){oi!=ee&&this.Fv(Ie,Ce,fe)&&this.Fv(Ie,ve,fe)&&(Ce.L(Ie),Q=oi,Qi=!1,++lt);break}Ce.L(Ie),Q=oi,Qi=!1,++lt}if(!Qi)continue;if(0<lt){for(Q=0<C?v.Ma(q):v.U(q),ge=1;ge<lt;ge++)Qi=0<C?v.Ma(Q):v.U(Q),v.pd(Q,!0),Q=Qi;dt.uc(ve,Ce),lt=mt*mt-(lt=dt.length())*lt*.25,mt-(lt=Math.sqrt(lt))>.5*this.vk?(Ne.add(Ce,ve),Ne.scale(.5),dt.normalize(),dt.ar(),ct.L(dt),ct.scale(mt-lt),Ne.add(ct),v.mf(q,Ne)):v.pd(q,!0),lt=0}Ce.L(ve),Q=L}ve.L(fe),q=L,L=ee,ee=0<C?v.U(L):v.Ma(L),gi++,ge=!1}if(0<lt){for(Q=0<C?v.Ma(q):v.U(q),ge=1;ge<lt;ge++)Qi=0<C?v.Ma(Q):v.U(Q),v.pd(Q,!0),Q=Qi;Ne.add(Ce,ve),Ne.scale(.5),dt.uc(ve,Ce),lt=mt*mt-(lt=dt.length())*lt*.25,lt=Math.sqrt(lt),dt.normalize(),dt.ar(),ct.L(dt),ct.scale(mt-lt),Ne.add(ct),v.mf(q,Ne)}if(v.Gp(this.tA,!1,!1),!$)break}},g.prototype.FG=function(v,b){if(v.Ja(b)==1)return!0;var C=new m.l;return v.Rj(b,C),Math.max(C.R(),C.ca())<.5*this.vk},g.prototype.EG=function(v){var b=new m.l;return v.A(b),Math.max(b.R(),b.ca())<.5*this.vk},g.prototype.WV=function(v){for(var b=0,C=0,M=(v=m.EC.local().V(v,.25*this.vk,!1,this.Ub)).da();C<M;C++)b=Math.max(v.Ja(C),b);return 32>b?(this.oq=!1,v):(this.oq=!0,m.Fg.Mk(v,this.ct,!1,!0,this.Ub))},g.prototype.yu=function(v,b){if(b=b.D(),this.Id!=null&&this.Id.length!==0){var C=new m.h;C.L(this.Id[0]),C.Ct(this.rb,b),v.Lt(C);for(var M=1,$=this.Id.length;M<$;M++)C.L(this.Id[M]),C.Ct(this.rb,b),v.Ci(C)}else{M=this.qE(),C=m.O.truncate((M+3)/4),M=.5*Math.PI/C,$=Math.cos(M);for(var L=Math.sin(M),q=new m.h,U=3;0<=U;U--){switch(q.ma(0,this.rb),U){case 0:for(M=0;M<C;M++)v.yj(q.x+b.x,q.y+b.y),q.Bt($,L);break;case 1:for(M=0;M<C;M++)v.yj(-q.y+b.x,q.x+b.y),q.Bt($,L);break;case 2:for(M=0;M<C;M++)v.yj(-q.x+b.x,-q.y+b.y),q.Bt($,L);break;default:for(v.sx(q.y+b.x,-q.x+b.y),M=1;M<C;M++)q.Bt($,L),v.yj(q.y+b.x,-q.x+b.y)}this.Xq()}}},g.kx=function(v){return v.Ch(1,0),v},g.prototype.sX=function(v){return v.Ch(2,this.qa),v.fm(),v},g}();m.HK=d}(ye||(ye={})),function(m){var j=function(){function T(p){this.Ca=p,this.g=new m.gd,this.dd=new m.ia(0)}return T.prototype.Lh=function(p,h,a){switch(h){case 0:if(p.v<a&&p.C<=a)break;return p.v>=a?1:-1;case 1:if(p.G<a&&p.H<=a)break;return p.G>=a?1:-1;case 2:if(p.v>=a&&p.C>a)break;return p.C<=a?1:-1;case 3:if(!(p.G>=a&&p.H>a))return p.H<=a?1:-1}return 0},T.prototype.Ay=function(p,h){return p.getType()==1736?this.Cy(p,h):this.Dy(p)},T.prototype.Cy=function(p,h){if(this.Ca.R()==0||this.Ca.ca()==0)return p.Ia();var a=new m.l;p.xc(a),this.X=this.g.Ib(p);var u=new m.l,d=new m.l,g=new m.h,v=new m.h,b=[0,0,0,0,0,0,0,0,0],C=[0,0,0,0,0,0,0,0,0];new m.ig;var M=new m.yb,$=new m.ia(0);$.Jb(Math.min(100,p.I()));for(var L=!1,q=0;!L&&4>q;q++){var U=!1,ee=!!(1&q),Q=0;switch(q){case 0:Q=this.Ca.v,U=a.v<=Q&&a.C>=Q;break;case 1:Q=this.Ca.G,U=a.G<=Q&&a.H>=Q;break;case 2:Q=this.Ca.C,U=a.v<=Q&&a.C>=Q;break;case 3:Q=this.Ca.H,U=a.G<=Q&&a.H>=Q}if(U)for(L=!0,U=this.g.Ob(this.X);U!=-1;){var ge=-1,ve=-1,fe=this.g.Xa(U),Ce=fe;do{var Ie=this.g.bc(Ce);Ie==null&&(Ie=M,this.g.D(Ce,g),Ie.Dc(g),this.g.D(this.g.U(Ce),v),Ie.Qc(v)),Ie.A(u);var Ne=this.Lh(u,q,Q),Ve=0,Xe=-1;if(Ne==-1){Ve=0<(Ie=Ie.cq(ee,Q,b,C))?this.g.Ul(Ce,C,Ie):0,Ve+=1;var et=Ce,dt=this.g.U(et);for(Ie=0;Ie<Ve;Ie++){if(this.g.D(et,g),this.g.D(dt,v),(Xe=this.g.bc(et))==null&&((Xe=M).Dc(g),Xe.Qc(v)),Xe.A(d),(Xe=this.Lh(d,q,Q))==-1){if(ee)(Xe=Math.abs(g.y-Q))<(ct=Math.abs(v.y-Q))?(g.y=Q,this.g.mf(et,g)):(v.y=Q,this.g.mf(dt,v));else{Xe=Math.abs(g.x-Q);var ct=Math.abs(v.x-Q);Xe<ct?(g.x=Q,this.g.mf(et,g)):(v.x=Q,this.g.mf(dt,v))}(Xe=this.g.bc(et))==null&&((Xe=M).Dc(g),Xe.Qc(v)),Xe.A(d),Xe=this.Lh(d,q,Q)}ct=ge,ge=Xe,ve==-1&&(ve=ge),ct==0&&ge==1||ct==1&&ge==0||ct!=0||ge!=0||$.add(et),ge==1&&(L=!1),Xe=et=dt,dt=this.g.U(dt)}}Ve==0&&(ct=ge,ge=Ne,ve==-1&&(ve=ge),ct==0&&ge==1||ct==1&&ge==0||ct!=0||ge!=0||$.add(Ce),ge==1&&(L=!1),Xe=this.g.U(Ce)),Ce=Xe}while(Ce!=fe);for(ve==0&&ge==0&&$.add(fe),Ie=0,ge=$.size;Ie<ge;Ie++)ve=$.get(Ie),this.g.pd(ve,!1);$.clear(!1),U=3>this.g.Ja(U)?this.g.Zq(U):this.g.Rb(U)}}return L?p.Ia():(this.FB(),0<h&&this.My(h),this.g.Ne(this.X))},T.prototype.Dy=function(p){var h=new m.l,a=new m.l,u=[0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0],g=new m.ig,v=p,b=new m.l;p.xc(b);for(var C=0;4>C;C++){var M=!1,$=!!(1&C),L=0;switch(C){case 0:L=this.Ca.v,M=b.v<=L&&b.C>=L;break;case 1:L=this.Ca.G,M=b.G<=L&&b.H>=L;break;case 2:L=this.Ca.C,M=b.v<=L&&b.C>=L;break;case 3:L=this.Ca.H,M=b.G<=L&&b.H>=L}if(M){M=v,v=p.Ia(),(M=M.Ga()).Zi();for(var q,U=new m.h;M.$a();)for(var ee,Q=!0;M.Ha();){var ge=M.ha();ge.A(h);var ve=this.Lh(h,C,L);if(ve==-1){if(0<(ve=ge.cq($,L,u,d))){var fe=0;q=ge.ac();for(var Ce=0;Ce<=ve;Ce++)if(fe!=(ee=Ce<ve?d[Ce]:1)){ge.ah(fe,ee,g);var Ie=g.get();Ie.Dc(q),Ce<ve&&($?(U.x=u[Ce],U.y=L):(U.x=L,U.y=u[Ce]),Ie.Qc(U)),Ie.A(a);var Ne=this.Lh(a,C,L);if(Ne==-1){if(q=Ie.ac(),fe=Ie.wc(),$)(Ne=Math.abs(q.y-L))<(Ve=Math.abs(fe.y-L))?(q.y=L,Ie.Dc(q)):(fe.y=L,Ie.Qc(fe));else{Ne=Math.abs(q.x-L);var Ve=Math.abs(fe.x-L);Ne<Ve?(q.x=L,Ie.Dc(q)):(fe.x=L,Ie.Qc(fe))}Ie.A(a),Ne=this.Lh(a,C,L)}q=Ie.wc(),fe=ee,(ee=Ne)==1?(v.oc(Ie,Q),Q=!1):Q=!0}}}else(ee=ve)==1?(v.oc(ge,Q),Q=!1):Q=!0}}}return v},T.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var p=new m.h,h=this.g.Ob(this.X);h!=-1;h=this.g.Rb(h))for(var a=this.g.Xa(h),u=0,d=this.g.Ja(h);u<d;u++,a=this.g.U(a))this.g.D(a,p),(this.Ca.v==p.x||this.Ca.C==p.x||this.Ca.G==p.y||this.Ca.H==p.y)&&(this.g.Ra(a,this.ji,this.dd.size),this.dd.add(a));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},T.prototype.My=function(p){for(var h=new m.h,a=new m.h,u=m.O.lg(2048,0),d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d)){var g=this.g.Xa(d),v=g;do{var b=this.g.U(v);this.g.D(v,h);var C=-1;if(h.x==this.Ca.v?(this.g.D(b,a),a.x==this.Ca.v&&(C=1)):h.x==this.Ca.C&&(this.g.D(b,a),a.x==this.Ca.C&&(C=1)),h.y==this.Ca.G?(this.g.D(b,a),a.y==this.Ca.G&&(C=0)):h.y==this.Ca.H&&(this.g.D(b,a),a.y==this.Ca.H&&(C=0)),C!=-1&&(C=m.h.tb(h,a),!(1>=(C=m.O.truncate(Math.min(Math.ceil(C/p),2048)))))){for(var M=1;M<C;M++)u[M-1]=1*M/C;this.g.Ul(v,u,C-1)}v=b}while(v!=g)}},T.prototype.Vl=function(p,h){var a=this.g.Gd(),u=new m.h,d=new m.ia(0);d.Jb(100);for(var g=this.g.Ob(this.X);g!=-1;g=this.g.Rb(g))for(var v=this.g.Xa(g),b=0,C=this.g.Ja(g);b<C;b++){var M=this.g.U(v);this.g.D(v,u),(p?u.y==h:u.x==h)&&(this.g.D(M,u),(p?u.y==h:u.x==h)&&(this.g.Pa(v,a)!=1&&(d.add(v),this.g.Ra(v,a,1)),this.g.Pa(M,a)!=1&&(d.add(M),this.g.Ra(M,a,1)))),v=M}if(this.g.Td(a),!(3>d.size)){var $=this;d.Vd(0,d.size,function(Ne,Ve){return $.Mh(Ne,Ve)}),a=new m.h,g=new m.h,v=new m.h,g.Rc();var L=-1;b=new m.ia(0),C=new m.ia(0),M=this.g.Gd();for(var q=this.g.Gd(),U=0,ee=d.size;U<ee;U++){var Q=d.get(U);if(this.g.D(Q,u),!u.qb(g)){if(L!=-1){for(var ge=L;ge<U;ge++){L=d.get(ge);var ve=this.g.U(L);Q=this.g.Ma(L);var fe=!1;0>this.Mh(L,ve)&&(this.g.D(ve,a),p?a.y==h:a.x==h)&&(b.add(L),fe=!0,this.g.Ra(L,q,1)),0>this.Mh(L,Q)&&(this.g.D(Q,a),p?a.y==h:a.x==h)&&(fe||b.add(L),this.g.Ra(L,M,1))}for(ge=0,fe=b.size;ge<fe;ge++){if(L=b.get(ge),Q=this.g.Pa(L,M),ve=this.g.Pa(L,q),Q==1){Q=this.g.Ma(L),this.g.D(Q,v);var Ce=[0];if(Ce[0]=0,!v.qb(u)){var Ie=m.h.tb(g,v);Ce[0]=m.h.tb(v,u)/Ie,Ce[0]==0?Ce[0]=2220446049250313e-31:Ce[0]==1&&(Ce[0]=.9999999999999998),this.g.Ul(Q,Ce,1),Q=this.g.Ma(L),this.g.mf(Q,u),C.add(Q),this.g.Ra(Q,M,1),this.g.Ra(Q,q,-1)}}ve==1&&(ve=this.g.U(L),this.g.D(ve,v),(Ce=[0])[0]=0,v.qb(u)||(Ie=m.h.tb(g,v),Ce[0]=m.h.tb(g,u)/Ie,Ce[0]==0?Ce[0]=2220446049250313e-31:Ce[0]==1&&(Ce[0]=.9999999999999998),this.g.Ul(L,Ce,1),Q=this.g.U(L),this.g.mf(Q,u),C.add(Q),this.g.Ra(Q,M,-1),this.g.Ra(Q,q,1)))}L=b,b=C,(C=L).clear(!1)}L=U,g.L(u)}}this.g.Td(M),this.g.Td(q)}},T.prototype.Nl=function(p,h){var a=new m.h,u=new m.ia(0);u.Jb(100);for(var d=this.g.Gd(),g=0,v=this.dd.size;g<v;g++){var b=this.dd.get(g);if(b!=-1){var C=this.g.U(b);this.g.D(b,a),(p?a.y==h:a.x==h)&&(this.g.D(C,a),(p?a.y==h:a.x==h)&&(this.g.Pa(b,d)!=-2&&(u.add(b),this.g.Ra(b,d,-2)),this.g.Pa(C,d)!=-2&&(u.add(C),this.g.Ra(C,d,-2))))}}if(u.size!=0){var M=this;for(u.Vd(0,u.size,function(Ve,Xe){return M.Mh(Ve,Xe)}),g=0,v=u.size;g<v;g++){var $=u.get(g);this.g.Ra($,d,g)}b=new m.h,(C=new m.h).Rc();var L=-1;for(g=0,v=u.size;g<v;g++)if(($=u.get(g))!=-1&&(this.g.D($,a),!a.qb(C))){if(L!=-1)for(;;){$=!1;for(var q=1<g-L?g-1:g,U=L;U<q;U++){var ee=u.get(U);if(ee!=-1){var Q=-1,ge=this.g.U(ee);0>this.Mh(ee,ge)&&(this.g.D(ge,b),p?b.y==h:b.x==h)&&(Q=ge),ge=-1;var ve=this.g.Ma(ee);if(0>this.Mh(ee,ve)&&(this.g.D(ve,b),p?b.y==h:b.x==h)&&(ge=ve),Q!=-1&&ge!=-1)this.Kh(ee,u,d),this.g.pd(ee,!1),this.Kh(Q,u,d),this.g.pd(Q,!1),$=!0;else if(Q!=-1||ge!=-1){for(ve=U+1;ve<g;ve++){var fe=u.get(ve);if(fe!=-1){var Ce=this.g.U(fe),Ie=-1;0>this.Mh(fe,Ce)&&(this.g.D(Ce,b),p?b.y==h:b.x==h)&&(Ie=Ce),Ce=this.g.Ma(fe);var Ne=-1;if(0>this.Mh(fe,Ce)&&(this.g.D(Ce,b),p?b.y==h:b.x==h)&&(Ne=Ce),Ie!=-1&&Ne!=-1){this.Kh(fe,u,d),this.g.pd(fe,!1),this.Kh(Ie,u,d),this.g.pd(Ie,!1),$=!0;break}if(Q!=-1&&Ne!=-1){this.zt(u,ee,Q,fe,Ne,d),$=!0;break}if(ge!=-1&&Ie!=-1){this.zt(u,fe,Ie,ee,ge,d),$=!0;break}}}if($)break}}}if(!$)break}L=g,C.L(a)}}this.g.Td(d)},T.prototype.Kh=function(p,h,a){a=this.g.Pa(p,a),h.set(a,-1),a=this.g.Pa(p,this.ji),this.dd.set(a,-1),(h=this.g.bd(p))!=-1&&this.g.Xa(h)==p&&(this.g.Jf(h,-1),this.g.Wg(h,-1))},T.prototype.zt=function(p,h,a,u,d,g){this.g.Bc(h,u),this.g.Cc(u,h),this.g.Cc(a,d),this.g.Bc(d,a),this.Kh(u,p,g),this.g.mi(u,!1),this.Kh(d,p,g),this.g.mi(d,!0)},T.prototype.Ty=function(){for(var p=0,h=this.dd.size;p<h;p++){var a=this.dd.get(p);a!=-1&&this.g.aj(a,-1)}for(var u=0,d=0,g=this.g.Ob(this.X);g!=-1;){var v=this.g.Xa(g);if(v==-1||g!=this.g.bd(v)){var b=g;g=this.g.Rb(g),this.g.Jf(b,-1),this.g.$q(b)}else{a=v,b=0;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);2>=b?(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),v=this.g.pd(v,!1),b==2&&(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),this.g.pd(v,!1)),b=g,g=this.g.Rb(g),this.g.Jf(b,-1),this.g.$q(b)):(this.g.cp(g,!1),this.g.Wg(g,this.g.Ma(v)),this.g.Vj(g,b),d+=b,u++,g=this.g.Rb(g))}}for(p=0,h=this.dd.size;p<h;p++)if((a=this.dd.get(p))!=-1&&(g=this.g.bd(a))==-1){g=this.g.vf(this.X,-1),b=0,v=a;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);2>=b?(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),v=this.g.pd(v,!1),b==2&&(0<=(a=this.g.Pa(v,this.ji))&&this.dd.set(a,-1),this.g.pd(v,!1)),b=g,this.g.Jf(b,-1),this.g.$q(b)):(this.g.kn(g,!0),this.g.Vj(g,b),this.g.Jf(g,v),this.g.Wg(g,this.g.Ma(v)),this.g.cp(g,!1),d+=b,u++)}for(this.g.Rl(this.X,u),this.g.Tj(this.X,d),p=0,h=this.g.ld;h!=-1;h=this.g.ue(h))p+=this.g.I(h);this.g.bC(p)},T.By=function(p,h,a){return new T(h).Ay(p,a)},T.clip=function(p,h,a,u){if(p.B())return p;if(h.B())return p.Ia();if((a=p.getType())==33)return u=p.D(),h.contains(u)?p:p.Ia();if(a==197)return u=new m.l,p.A(u),u.Ea(h)?(h=new m.Fh,p.copyTo(h),h.Xo(u),h):p.Ia();var d=new m.l;if(p.xc(d),h.contains(d))return p;if(!h.isIntersecting(d))return p.Ia();if((d=p.Bb)!=null&&(d=d.Fk)!=null){if((d=d.Ro(h))==1){if(a!=1736)throw m.i.Qa();return(p=new m.Da(p.description)).tp(h),p}if(d==0)return p.Ia()}switch(a){case 550:a=null,d=p.I();for(var g=p.ub(0),v=0,b=0;b<d;b++)u=new m.h,g.tc(2*b,u),h.contains(u)||(v==0&&(a=p.Ia()),v<b&&a.Fd(p,v,b),v=b+1);return 0<v&&a.Fd(p,v,d),v==0?p:a;case 1736:case 1607:return T.By(p,h,u);default:throw m.i.Qa()}},T.prototype.Mh=function(p,h){var a=new m.h;return this.g.D(p,a),p=new m.h,this.g.D(h,p),a.compare(p)},T}();m.Ud=j}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.Ca=p,this.g=new m.gd,this.dd=new m.ia(0),this.nd=h}return T.prototype.Lh=function(p,h,a){switch(h){case 0:if(p.v<a&&p.C<=a)break;return p.v>=a?1:-1;case 1:if(p.G<a&&p.H<=a)break;return p.G>=a?1:-1;case 2:if(p.v>=a&&p.C>a)break;return p.C<=a?1:-1;case 3:if(!(p.G>=a&&p.H>a))return p.H<=a?1:-1}return 0},T.prototype.Ay=function(p,h){return p.getType()==1736?this.Cy(p,h):this.Dy(p)},T.prototype.Cy=function(p,h){if(this.Ca.R()==0||this.Ca.ca()==0)return p.Ia();var a=new m.l;p.xc(a),this.X=this.g.Ib(p);var u=new m.l,d=new m.l,g=new m.h,v=new m.h,b=[0,0,0,0,0,0,0,0,0],C=[0,0,0,0,0,0,0,0,0],M=new m.yb,$=new m.ia(0);$.Jb(256);for(var L=!1,q=0;!L&&4>q;q++){var U=!1,ee=!!(1&q),Q=0;switch(q){case 0:Q=this.Ca.v,U=a.v<=Q&&a.C>=Q;break;case 1:Q=this.Ca.G,U=a.G<=Q&&a.H>=Q;break;case 2:Q=this.Ca.C,U=a.v<=Q&&a.C>=Q;break;case 3:Q=this.Ca.H,U=a.G<=Q&&a.H>=Q}if(U)for(L=!0,U=this.g.Ob(this.X);U!=-1;){var ge=!0,ve=-1,fe=-1,Ce=this.g.Xa(U),Ie=Ce;do{var Ne=this.g.bc(Ie);Ne==null&&(Ne=M,this.g.D(Ie,g),Ne.Dc(g),this.g.D(this.g.U(Ie),v),Ne.Qc(v)),Ne.A(u);var Ve=this.Lh(u,q,Q),Xe=0,et=-1;if(Ve==-1){Xe=0<(Ne=Ne.cq(ee,Q,b,C))?this.g.LX(Ie,C,Ne):0,Xe+=1;var dt=Ie,ct=this.g.U(dt);for(Ne=0;Ne<Xe;Ne++){if(this.g.D(dt,g),this.g.D(ct,v),(et=this.g.bc(dt))==null&&((et=M).Dc(g),et.Qc(v)),et.A(d),(et=this.Lh(d,q,Q))==-1){if(ee)(et=Math.abs(g.y-Q))<(mt=Math.abs(v.y-Q))?(g.y=Q,this.g.mf(dt,g)):(v.y=Q,this.g.mf(ct,v));else{et=Math.abs(g.x-Q);var mt=Math.abs(v.x-Q);et<mt?(g.x=Q,this.g.mf(dt,g)):(v.x=Q,this.g.mf(ct,v))}(et=this.g.bc(dt))==null&&((et=M).Dc(g),et.Qc(v)),et.A(d),et=this.Lh(d,q,Q)}mt=ve,ve=et,fe==-1&&(fe=ve),mt==0&&ve==1||mt==1&&ve==0||mt!=0||ve!=0||$.add(dt),ve==1&&(ge=L=!1),et=dt=ct,ct=this.g.U(ct)}}if(Xe==0&&(mt=ve,ve=Ve,fe==-1&&(fe=ve),mt==0&&ve==1||mt==1&&ve==0||mt!=0||ve!=0||$.add(Ie),ve==1&&(ge=L=!1),et=this.g.U(Ie)),Ie=et,256<=$.size){for(Ne=1,Ve=$.size-1;Ne<Ve;Ne++)Xe=$.get(Ne),this.g.pd(Xe,!1);$.set(1,$.Fc()),$.Bh(2)}}while(Ie!=Ce);if(!ge)for(fe==0&&ve==0&&$.add(Ce),Ne=0,Ve=$.size;Ne<Ve;Ne++)Xe=$.get(Ne),this.g.pd(Xe,!1);$.clear(!1),U=ge||this.g.Ja(U)==0?this.g.Zq(U):this.g.Rb(U)}}return L?p.Ia():(this.FB(),0<h&&this.My(h),this.g.Ne(this.X))},T.prototype.Dy=function(p){var h=new m.l,a=new m.l,u=[0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0],g=new m.ig,v=p,b=new m.l;p.xc(b);for(var C=new m.h,M=new m.h,$=null,L=null,q=0;4>q;q++){var U=!1,ee=!!(1&q),Q=0;switch(q){case 0:Q=this.Ca.v,U=b.v<=Q&&b.C>=Q;break;case 1:Q=this.Ca.G,U=b.G<=Q&&b.H>=Q;break;case 2:Q=this.Ca.C,U=b.v<=Q&&b.C>=Q;break;case 3:Q=this.Ca.H,U=b.G<=Q&&b.H>=Q}if(U)for(U=v,v=p.Ia(),(U=U.Ga()).Zi();U.$a();)for(var ge,ve=!0;U.Ha();){var fe=U.ha();fe.A(h);var Ce=this.Lh(h,q,Q);if(Ce==-1){if(0<(Ce=fe.cq(ee,Q,u,d))){var Ie=0;fe.Yp(C);for(var Ne=0;Ne<=Ce;Ne++)if(Ie!=(ge=Ne<Ce?d[Ne]:1)){fe.ah(Ie,ge,g);var Ve=g.get();Ve.Dc(C),Ne<Ce&&(ee?(M.x=u[Ne],M.y=Q):(M.x=Q,M.y=u[Ne]),Ve.Qc(M)),Ve.A(a);var Xe=this.Lh(a,q,Q);Xe==-1&&($==null&&($=new m.h),L==null&&(L=new m.h),Ve.Yp($),Ve.Tr(L),ee?(Ie=Math.abs($.y-Q))<(Xe=Math.abs(L.y-Q))?($.y=Q,Ve.Dc($)):(L.y=Q,Ve.Qc(L)):(Ie=Math.abs($.x-Q))<(Xe=Math.abs(L.x-Q))?($.x=Q,Ve.Dc($)):(L.x=Q,Ve.Qc(L)),Ve.A(a),Xe=this.Lh(a,q,Q)),Ve.Tr(C),Ie=ge,(ge=Xe)==1?(v.oc(Ve,ve),ve=!1):ve=!0}}}else(ge=Ce)==1?(v.oc(fe,ve),ve=!1):ve=!0}}return v},T.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var p=new m.h,h=this.g.Ob(this.X);h!=-1;h=this.g.Rb(h))for(var a=this.g.Xa(h),u=0,d=this.g.Ja(h);u<d;u++,a=this.g.U(a))this.g.D(a,p),(this.Ca.v==p.x||this.Ca.C==p.x||this.Ca.G==p.y||this.Ca.H==p.y)&&(this.g.Ra(a,this.ji,this.dd.size),this.dd.add(a));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},T.prototype.My=function(p){for(var h=new m.h,a=new m.h,u=null,d=null,g=m.O.lg(2048,0),v=this.g.Ob(this.X);v!=-1;v=this.g.Rb(v)){var b=this.g.Xa(v),C=b;do{var M=this.g.U(C);this.g.D(C,h);var $=-1;if(h.x==this.Ca.v?(this.g.D(M,a),a.x==this.Ca.v&&($=1)):h.x==this.Ca.C&&(this.g.D(M,a),a.x==this.Ca.C&&($=1)),h.y==this.Ca.G?(this.g.D(M,a),a.y==this.Ca.G&&($=0)):h.y==this.Ca.H&&(this.g.D(M,a),a.y==this.Ca.H&&($=0)),$!=-1){if(u==null&&(u=new m.h),d==null&&(d=new m.h),u.L(h),d.ma(0,0),$==0){var L=h.x-this.Ca.v;d.x=m.lc.sign(a.x-h.x),u.x=p*m.lc.Cn(Math.floor(Math.abs(L/p)),L)+this.Ca.v,0>u.x&&(u.x+=p)}else L=h.y-this.Ca.G,d.y=m.lc.sign(a.y-h.y),u.y=p*m.lc.Cn(Math.floor(Math.abs(L/p)),L)+this.Ca.G,0>u.y&&(u.y+=p);L=$!=0?a.y-h.y:a.x-h.x;var q=Math.abs(L);if(65536<q/p)throw m.i.fa("internal error");if(0<q){q=m.O.truncate(q/p)+2,g.length<q&&(g=m.O.lg(q));for(var U=q=0;;U++){var ee=new m.h;if(ee.x=u.x+d.x*U*p,ee.y=u.y+d.y*U*p,1<=(ee=($!=0?ee.y-h.y:ee.x-h.x)/L))break;0>=ee||(g[q]=ee,q++)}q!=0&&this.g.Ul(C,g,q)}}C=M}while(C!=b)}},T.prototype.Vl=function(p,h){for(var a=-1,u=new m.h,d=null,g=this.g.Ob(this.X);g!=-1;g=this.g.Rb(g))for(var v=this.g.Xa(g),b=0,C=this.g.Ja(g);b<C;b++){var M=this.g.U(v);this.g.D(v,u),(p?u.y==h:u.x==h)&&(this.g.D(M,u),(p?u.y==h:u.x==h)&&(a==-1&&(a=this.g.Gd()),d==null&&(d=new m.ia(0)).Jb(100),this.g.Pa(v,a)!=1&&(d.add(v),this.g.Ra(v,a,1)),this.g.Pa(M,a)!=1&&(d.add(M),this.g.Ra(M,a,1)))),v=M}if(a!=-1&&this.g.Td(a),!(d==null||3>d.size)){var $=this;d.Vd(0,d.size,function(Ne,Ve){return $.Mh(Ne,Ve)}),a=new m.h,g=new m.h,v=new m.h,g.Rc();var L=-1;b=new m.ia(0),C=new m.ia(0),M=null;for(var q=this.g.Gd(),U=this.g.Gd(),ee=0,Q=d.size;ee<Q;ee++){var ge=d.get(ee);if(this.g.D(ge,u),!u.qb(g)){if(L!=-1){for(var ve=L;ve<ee;ve++){L=d.get(ve);var fe=this.g.U(L);ge=this.g.Ma(L);var Ce=!1;this.g.D(fe,a),0>g.compare(a)&&(p?a.y==h:a.x==h)&&(b.add(L),Ce=!0,this.g.Ra(L,U,1)),this.g.D(ge,a),0>g.compare(a)&&(p?a.y==h:a.x==h)&&(Ce||b.add(L),this.g.Ra(L,q,1))}for(ve=0,Ce=b.size;ve<Ce;ve++){if(L=b.get(ve),ge=this.g.Pa(L,q),fe=this.g.Pa(L,U),ge==1&&(ge=this.g.Ma(L),this.g.D(ge,v),!v.qb(u))){M==null&&(M=[]);var Ie=m.h.tb(g,v);M[0]=m.h.tb(v,u)/Ie,M[0]==0?M[0]=2220446049250313e-31:M[0]==1&&(M[0]=.9999999999999998),this.g.Ul(ge,M,1),ge=this.g.Ma(L),this.g.mf(ge,u),C.add(ge),this.g.Ra(ge,q,1),this.g.Ra(ge,U,-1)}fe==1&&(fe=this.g.U(L),this.g.D(fe,v),v.qb(u)||(M==null&&(M=[]),Ie=m.h.tb(g,v),M[0]=m.h.tb(g,u)/Ie,M[0]==0?M[0]=2220446049250313e-31:M[0]==1&&(M[0]=.9999999999999998),this.g.Ul(L,M,1),ge=this.g.U(L),this.g.mf(ge,u),C.add(ge),this.g.Ra(ge,q,-1),this.g.Ra(ge,U,1)))}L=b,b=C,(C=L).clear(!1)}L=ee,g.L(u)}}this.g.Td(q),this.g.Td(U)}},T.prototype.Nl=function(p,h){for(var a=new m.h,u=null,d=-1,g=0,v=this.dd.size;g<v;g++){var b=this.dd.get(g);if(b!=-1){var C=this.g.U(b);this.g.D(b,a),(p?a.y==h:a.x==h)&&(this.g.D(C,a),(p?a.y==h:a.x==h)&&(d==-1&&(d=this.g.Gd()),u==null&&(u=new m.ia(0)).Jb(100),this.g.Pa(b,d)!=-2&&(u.add(b),this.g.Ra(b,d,-2)),this.g.Pa(C,d)!=-2&&(u.add(C),this.g.Ra(C,d,-2))))}}if(u==null)d!=-1&&this.g.Td(d);else{var M=this;for(u.Vd(0,u.size,function(Ve,Xe){return M.Mh(Ve,Xe)}),g=0,v=u.size;g<v;g++){var $=u.get(g);this.g.Ra($,d,g)}b=new m.h,(C=new m.h).Rc();var L=-1;for(g=0,v=u.size;g<v;g++)if(($=u.get(g))!=-1&&(this.g.D($,a),!a.qb(C))){if(L!=-1)for(;;){$=!1;for(var q=1<g-L?g-1:g,U=L;U<q;U++){var ee=u.get(U);if(ee!=-1){var Q=-1,ge=this.g.U(ee);this.g.D(ge,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(Q=ge),ge=-1;var ve=this.g.Ma(ee);if(this.g.D(ve,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(ge=ve),Q!=-1&&ge!=-1)this.Kh(ee,u,d),this.g.pd(ee,!1),this.Kh(Q,u,d),this.g.pd(Q,!1),$=!0;else if(Q!=-1||ge!=-1){for(ve=U+1;ve<g;ve++){var fe=u.get(ve);if(fe!=-1){var Ce=this.g.U(fe),Ie=-1;this.g.D(Ce,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(Ie=Ce),Ce=this.g.Ma(fe);var Ne=-1;if(this.g.D(Ce,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(Ne=Ce),Ie!=-1&&Ne!=-1){this.Kh(fe,u,d),this.g.pd(fe,!1),this.Kh(Ie,u,d),this.g.pd(Ie,!1),$=!0;break}if(Q!=-1&&Ne!=-1){this.zt(u,ee,Q,fe,Ne,d),$=!0;break}if(ge!=-1&&Ie!=-1){this.zt(u,fe,Ie,ee,ge,d),$=!0;break}}}if($)break}}}if(!$)break}L=g,C.L(a)}this.g.Td(d)}},T.prototype.Kh=function(p,h,a){a=this.g.Pa(p,a),h.set(a,-1),a=this.g.Pa(p,this.ji),this.dd.set(a,-1),(h=this.g.bd(p))!=-1&&this.g.Xa(h)==p&&(this.g.Jf(h,-1),this.g.Wg(h,-1))},T.prototype.zt=function(p,h,a,u,d,g){this.g.Bc(h,u),this.g.Cc(u,h),this.g.Cc(a,d),this.g.Bc(d,a),this.Kh(u,p,g),this.g.mi(u,!1),this.Kh(d,p,g),this.g.mi(d,!0)},T.prototype.Ty=function(){for(var p=0,h=this.dd.size;p<h;p++){var a=this.dd.get(p);a!=-1&&this.g.aj(a,-1)}for(var u=0,d=0,g=this.g.Ob(this.X);g!=-1;){var v=this.g.Xa(g);if(v==-1||g!=this.g.bd(v)){var b=g;g=this.g.Rb(g),this.g.Jf(b,-1),this.g.$q(b)}else{a=v,b=0;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);this.g.cp(g,!1),this.g.Wg(g,this.g.Ma(v)),this.g.Vj(g,b),d+=b,u++,g=this.g.Rb(g)}}for(p=0,h=this.dd.size;p<h;p++)if((a=this.dd.get(p))!=-1&&(g=this.g.bd(a))==-1){g=this.g.vf(this.X,-1),b=0,v=a;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);2>=b?(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),v=this.g.pd(v,!1),b==2&&(0<=(a=this.g.Pa(v,this.ji))&&this.dd.set(a,-1),this.g.pd(v,!1)),b=g,this.g.Jf(b,-1),this.g.$q(b)):(this.g.kn(g,!0),this.g.Vj(g,b),this.g.Jf(g,v),this.g.Wg(g,this.g.Ma(v)),this.g.cp(g,!1),d+=b,u++)}for(this.g.Rl(this.X,u),this.g.Tj(this.X,d),p=0,h=this.g.ld;h!=-1;h=this.g.ue(h))p+=this.g.I(h);this.g.bC(p)},T.By=function(p,h,a,u){return new T(h,u).Ay(p,a)},T.clip=function(p,h,a,u,d){return T.Nu(p,h,null,a,u,d)},T.Nu=function(p,h,a,u,d,g){var v=p.getType();if(v==33)return d=p.D(),h.contains(d)?p:p.Ia();if(v==197)return d=new m.l,p.A(d),d.Ea(h)?(h=new m.Fh,p.copyTo(h),h.Xo(d),h):p.Ia();if(p.B())return p;if(h.B())return p.Ia();var b=new m.l;if(p.xc(b),h.contains(b))return p;if(!h.isIntersecting(b))return p.Ia();if((a!=null||isNaN(u))&&m.ta.ty(a,h,!1),!m.aa.xj(v))throw m.i.N();if((a=p.Bb)!=null&&(a=a.Fk)!=null){if((a=a.Ro(h))==1){if(v!=1736)throw m.i.fa("internal error");return(p=new m.Da(p.description)).tp(h),p}if(a==0)return p.Ia()}switch(v){case 550:for(g=null,v=p.I(),a=p.ub(0),u=0,d=new m.h,b=0;b<v;b++)a.tc(2*b,d),h.contains(d)||(u==0&&(g=p.Ia()),u<b&&g.Fd(p,u,b),u=b+1);return 0<u&&g.Fd(p,u,v),u==0?p:g;case 1736:case 1607:return T.By(p,h,d,g);default:throw m.i.fa("internal error")}},T.prototype.Mh=function(p,h){var a=new m.h;return this.g.D(p,a),p=new m.h,this.g.D(h,p),a.compare(p)},T}();m.ri=j}(ye||(ye={})),function(m){var j=new m.h,T=function(){function h(a,u,d,g,v){this.Pm=new m.h,this.Dk=new m.h,this.Pi=new m.h,this.g=a,this.Aw=d,this.no=g,this.Pm=u,this.yl=v,this.Dk.Rc(),this.Pi.Rc()}return h.prototype.xE=function(a){this.g.D(a,this.Dk),a=m.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var u=m.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return p.jG(a,u)},h.prototype.jz=function(a){return this.g.Pa(a,this.yl)},h.prototype.Py=function(a,u){return this.g.D(a,this.Dk),this.g.D(u,this.Pi),p.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},h}();m.sY=function(){};var p=function(){function h(){this.Pm=new m.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return h.iQ=function(a,u){var d=new h;return d.g=a,d.qa=u,d.Aw=u*u,d.$v=2*u,d.no=1/d.$v,d.BO()},h.Cv=function(a,u,d,g,v){return(a-=d)*a+(u-=g)*u<=v},h.jG=function(a,u){return m.O.Th(u,m.O.Th(a))},h.prototype.DO=function(a,u){this.g.Gc(a,j);for(var d=(j.y-this.Pm.y)*this.no,g=m.O.truncate((j.x-this.Pm.x)*this.no),v=m.O.truncate(d),b=d=0;1>=b;b+=1)for(var C=0;1>=C;C+=1){var M=h.jG(g+b,v+C),$=this.xl.rR(M);$!=-1&&(this.pq[d]=$,this.xs[d]=M,d++)}for(g=d-1;1<=g;g--)for($=this.pq[g],v=g-1;0<=v;v--)if($==this.pq[v]){this.xs[v]=-1,g!=--d&&(this.xs[g]=this.xs[d],this.pq[g]=this.pq[d]);break}for(v=0;v<d;v++)this.EO(a,this.xs[v],j,this.pq[v],u)},h.prototype.EO=function(a,u,d,g,v){for(var b=new m.h;g!=-1;g=this.xl.ER(g)){var C=this.xl.ja(g);a==C||u!=-1&&this.g.Pa(C,this.yl)!=u||(this.g.Gc(C,b),h.Cv(d.x,d.y,b.x,b.y,this.Aw)&&v.add(g))}},h.prototype.Xm=function(a,u,d){var g=this.g.Pa(a,this.qo),v=this.g.Pa(u,this.qo);return g==-1&&(g=this.zd.Ph(),this.zd.addElement(g,a),this.g.Ra(a,this.qo,g)),v==-1?this.zd.addElement(g,u):this.zd.Hy(g,v),this.g.Ra(u,this.qo,-2),u=this.YT(a,u),d&&(d=this.kw.xE(a),this.g.Ra(a,this.yl,d)),u},h.WT=function(a,u,d){a.Nb(u),d=a;var g=new m.h;h.XT(a.D(),u.D(),g),d.Cb(g)},h.XT=function(a,u,d){var g=a.x;a.x!=u.x&&(g=(1*a.x+1*u.x)/2);var v=a.y;a.y!=u.y&&(v=(1*a.y+1*u.y)/2),d.ma(g,v)},h.prototype.YT=function(a,u){var d=new m.h;this.g.D(a,d);var g=new m.h;this.g.D(u,g);var v=this.g.cG(a),b=v+(u=this.g.cG(u)),C=0,M=d.x;d.x!=g.x&&(M=(d.x*v+g.x*u)/b,C++);var $=d.y;return d.y!=g.y&&($=(d.y*v+g.y*u)/b,C++),0<C&&this.g.Cb(a,M,$),this.g.vX(a,b),C!=0},h.prototype.BO=function(){var a=this.g.fd,u=this.g.IF();for(this.Pm=u.mz(),u=Math.max(u.ca(),u.R())/2147483646,this.$v<u&&(this.$v=u,this.no=1/this.$v),this.zd=new m.au,this.zd.At(m.O.truncate(this.g.fd/3+1)),this.zd.fn(m.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new T(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new m.dL(m.O.truncate(4*a/3),this.kw),this.xl.AW(this.g.fd),a=!1,u=this.g.ld;u!=-1;u=this.g.ue(u))for(var d=this.g.Ob(u);d!=-1;d=this.g.Rb(d))for(var g=this.g.Xa(d),v=0,b=this.g.Ja(d);v<b;v++){var C=this.kw.xE(g);this.g.Ra(g,this.yl,C),this.xl.addElement(g,C),g=this.g.U(g)}var M=new m.ia(0);for(M.Jb(10),u=this.g.ld;u!=-1;u=this.g.ue(u))for(d=this.g.Ob(u);d!=-1;d=this.g.Rb(d))for(g=this.g.Xa(d),v=0,b=this.g.Ja(d);v<b;v++){if(this.g.Pa(g,this.qo)!=-2)for(C=this.g.Pa(g,this.yl),this.xl.jd(g,C);this.DO(g,M),M.size!=0;){C=!1;for(var $=0,L=M.size;$<L;$++){var q=M.get($),U=this.xl.ja(q);this.xl.vd(q),C=this.Xm(g,U,$+1==L)||C}if(a=a||C,M.clear(!1),!C)break}g=this.g.U(g)}return a&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),a},h.prototype.vN=function(){for(var a=new m.h,u=this.zd.je;u!=-1;u=this.zd.qz(u)){var d=this.zd.rc(u);for(this.g.D(this.zd.ja(d),a),d=this.zd.lb(d);d!=-1;d=this.zd.lb(d))this.g.mf(this.zd.ja(d),a)}},h}();m.Yt=p}(ye||(ye={})),function(m){var j=function(){function T(p){p===void 0&&(p=null),this.yg=null,this.Pb=!1,this.yg=p===null?[]:p}return T.prototype.copyTo=function(p){if(p.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");for(var h=0;h<this.yg.length;h++)p.yg.push(this.yg[h].Of())},T.prototype.count=function(){return this.yg.length},T.prototype.add=function(p){if(this.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(p.Of())},T.prototype.clear=function(){if(this.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},T.prototype.remove=function(p){if(this.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(p,1)},T.prototype.jg=function(){var p=new T;return this.copyTo(p),p},T.prototype.Of=function(){return this.jg()},T.prototype.transform=function(p,h,a,u){if(p.length<h)throw m.i.fa("invalid Argument");var d=a;for(a=0;a<this.yg.length;a++){var g=this.yg[a];if(g.qm()!=null){var v=g.Un,b=v?1:0,C=v?g.qm().getGeogcs2():g.qm().getGeogcs1();if(C=d/(C=C.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(C-1))for(d=0;d<h;d++)p[d][0]*=C,p[d][1]*=C;m.MC.geogToGeog(g.qm(),h,p,null,b),d=(v?g.qm().getGeogcs1():g.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(C=d/u,3552713678800501e-30<Math.abs(C-1))for(d=0;d<h;d++)p[d][0]*=C,p[d][1]*=C;return h},T.prototype.Nb=function(p){if(p==this)return!0;if(!(p instanceof T)||this.yg.length!=p.yg.length)return!1;for(var h=0;h<this.yg.length;h++)if(!this.yg[h].Nb(p.yg[h]))return!1;return!0},T.prototype.ix=function(){this.Pb=!0},T.prototype.toString=function(){for(var p="CGT ("+this.count()+") ",h=0,a=this.count();h<a;++h)p+=this.yg[h].toString()+", ";return 200<p.length?p.substring(0,197)+"... ("+p.length.toString()+" characters)":p},T.create=function(){return new T},T}();m.wC=j}(ye||(ye={})),function(m){var j,T=Math.PI,p=2*Math.PI,h=Math.PI/2,a=function(){function g(){}return g.TO=function(v,b){var C=new g;return C.x=v,C.y=b,C.type=0,C.Uh=0,C},g.al=function(v){var b=new g;return b.x=v.x,b.y=v.y,b.type=0,b.Uh=0,b},g.SO=function(v){var b=new g;return b.x=v.x,b.y=v.y,b.type=v.type,b.Uh=v.Uh,b},g.Pd=function(v,b,C){var M=new g;return M.x=v.x+b*Math.cos(C),M.y=v.y+b*Math.sin(C),M.type=v.type,M.Uh=v.Uh,M},g.Pu=function(v,b){var C=new g;return C.x=.5*(v.x+b.x),C.y=.5*(v.y+b.y),C.type=v.type,C.Uh=v.Uh,C},g.TE=function(v,b){var C=new g;return C.x=v.x+.001*(b.x-v.x),C.y=v.y+.001*(b.y-v.y),C.type=v.type,C.Uh=v.Uh,C},g}(),u=function(){};(j=m.fL||(m.fL={}))[j.Round=0]="Round",j[j.Bevel=1]="Bevel",j[j.Miter=2]="Miter",j[j.Square=3]="Square";var d=function(){function g(v){this.NA=this.Yb=this.wg=null,this.nd=v}return g.V=function(v,b,C,M,$,L){if(v==null||1>v.Db())throw m.i.N();return b==0||v.B()?v:((L=new g(L)).ko=v,L.Ka=b,L.qa=$,L.Ki=C,L.CA=M,L.Rx())},g.prototype.eM=function(){var v=this.ko,b=v.ac(),C=v.wc(),M=new m.h;return M.uc(C,b),M.normalize(),M.Hv(),M.scale(this.Ka),b.add(M),C.add(M),M=v.Ia(),v.Dc(b),v.Qc(C),M},g.prototype.dM=function(){var v=this.ko;if(0<this.Ka&&this.Ki!=2){var b=new m.Da;return b.ad(v,!1),this.ko=b,this.Rx()}return(v=new m.Fh(v.$)).W(this.Ka,this.Ka),v},g.prototype.tJ=function(v,b,C,M){return(b.x-v.x)*(M.x-C.x)+(b.y-v.y)*(M.y-C.y)},g.prototype.fc=function(v,b){if(b===void 0)this.Yb.push(v),this.gf++;else if(this.gf==0)this.fc(v);else{var C=this.Bw,M=this.wg[b==0?C-1:b-1],$=this.wg[b],L=this.tJ(M,$,this.Yb[this.gf-1],v);0<L?this.fc(v):0>L&&(0<this.tJ(M,$,$,this.Yb[this.gf-1])?($=this.wg[b==0?C-2:b==1?C-1:b-2],C=a.Pd(M,this.Ka,Math.atan2(M.y-$.y,M.x-$.x)-h),this.Yb[this.gf-1]=C,this.Ki==1||this.Ki==2?(C=a.Pu(C,M),this.fc(C),C=a.Pd(M,this.Ka,this.Jv+h),(M=a.Pu(C,M)).type|=256,this.fc(M)):(C=a.Pd(M,this.Ka,this.Jv+h)).type|=256,this.fc(C),this.fc(v,b)):(C=a.Pd($,this.Ka,this.Jv+h),this.fc(C),this.Ki==1||this.Ki==2?(C=a.Pu(C,$),this.fc(C),C=a.Pd($,this.Ka,this.aA-h),(M=a.Pu(C,$)).type|=256,this.fc(M)):(C=a.Pd($,this.Ka,this.aA-h)).type|=256,this.fc(C)))}},g.prototype.mE=function(){var v,b=this.Bw;this.gf=0;var C=.5*this.qa,M=0,$=0;for(v=0;v<b;v++){var L=this.wg[v],q=v==0?this.wg[b-1]:this.wg[v-1],U=v==b-1?this.wg[0]:this.wg[v+1],ee=q.x-L.x,Q=q.y-L.y,ge=U.x-L.x,ve=U.y-L.y,fe=Math.atan2(Q,ee),Ce=Math.atan2(ve,ge);if(this.Jv=fe,this.aA=Ce,v==0&&(M=fe,$=Ce),ee=ee*ve-ge*Q,Q=Ce,Ce<fe&&(Ce+=p),0<ee*this.Ka)this.Ki==1||this.Ki==2?(fe=a.Pd(L,this.Ka,fe+h),this.fc(fe),fe=a.TE(L,fe),this.fc(fe),fe=a.Pd(L,this.Ka,Ce-h),(L=a.TE(L,fe)).type|=256,this.fc(L),this.fc(fe)):(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),fe=a.Pd(L,ee,.5*(fe+Ce)),this.fc(fe,v));else if(512&L.type){for(ee=1-C/Math.abs(this.Ka),q=1,U=0>this.Ka?-T:T,-1<ee&&1>ee&&(.017453292519943295>(Q=2*Math.acos(ee))&&(Q=.017453292519943295),1<(q=m.O.truncate(T/Q+1.5))&&(U/=q)),Q=fe+h,fe=a.Pd(L,this.Ka,Q),v==0&&(fe.type|=1024),this.fc(fe,v),ee=this.Ka/Math.cos(U/2),Q+=U/2,(fe=a.Pd(L,ee,Q)).type|=1024,this.fc(fe);0<--q;)Q+=U,(fe=a.Pd(L,ee,Q)).type|=1024,this.fc(fe);(fe=a.Pd(L,this.Ka,Ce-h)).type|=1024,this.fc(fe)}else if(this.Ki==1)fe=a.Pd(L,this.Ka,fe+h),this.fc(fe,v),fe=a.Pd(L,this.Ka,Ce-h),this.fc(fe);else if(this.Ki==0)for(ee=1-C/Math.abs(this.Ka),q=1,U=Ce-h-(fe+h),-1<ee&&1>ee&&(.017453292519943295>(Q=2*Math.acos(ee))&&(Q=.017453292519943295),1<(q=m.O.truncate(Math.abs(U)/Q+1.5))&&(U/=q)),ee=this.Ka/Math.cos(.5*U),Q=fe+h+.5*U,fe=a.Pd(L,ee,Q),this.fc(fe,v);0<--q;)Q+=U,fe=a.Pd(L,ee,Q),this.fc(fe);else this.Ki==2?(ee=q.x-L.x,Q=q.y-L.y,.99999999<(q=(ee*(ge=U.x-L.x)+Q*(ve=U.y-L.y))/Math.sqrt(ee*ee+Q*Q)/Math.sqrt(ge*ge+ve*ve))?(fe=a.Pd(L,1.4142135623730951*this.Ka,Ce-.25*T),this.fc(fe,v),fe=a.Pd(L,1.4142135623730951*this.Ka,Ce+.25*T),this.fc(fe)):(q=Math.abs(this.Ka/Math.sin(.5*Math.acos(q))))>(U=Math.abs(this.CA*this.Ka))?(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),fe=a.Pd(L,ee,.5*(fe+Ce)),Ce=m.h.construct(fe.x,fe.y),fe=m.h.construct(L.x,L.y),(L=new m.h).uc(Ce,fe),(Ce=new m.h).HW(U/L.length(),L,fe),fe=(q-U)*Math.abs(this.Ka)/Math.sqrt(q*q-this.Ka*this.Ka),0<this.Ka?L.Hv():L.ar(),L.scale(fe/L.length()),(fe=new m.h).add(Ce,L),(q=new m.h).uc(Ce,L),fe=a.al(fe),this.fc(fe,v),fe=a.al(q),this.fc(fe)):(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),fe=a.Pd(L,ee,.5*(fe+Ce)),this.fc(fe,v))):(Ce=Q,0<this.Ka?(Ce>fe&&(Ce-=p),q=fe-Ce<h):(Ce<fe&&(Ce+=p),q=Ce-fe<h),q?(Q=0>(ee=1.4142135623730951*this.Ka)?fe+.25*T:fe+.75*T,fe=a.Pd(L,ee,Q),this.fc(fe,v),Q=0>ee?Ce-.25*T:Ce-.75*T,fe=a.Pd(L,ee,Q),this.fc(fe)):(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),Ce<fe&&(Ce+=p),fe=a.Pd(L,ee,(fe+Ce)/2),this.fc(fe,v)))}return this.Jv=M,this.aA=$,this.fc(this.Yb[0],0),L=a.SO(this.Yb[this.gf-1]),this.Yb[0]=L,this.wW()},g.prototype.Au=function(v,b){if(!(2>b))for(var C=0;C<b;C++){var M=this.Yb[v+C];C!=0?this.NA.Ci(m.h.construct(M.x,M.y)):this.NA.Lt(m.h.construct(M.x,M.y))}},g.prototype.fM=function(v,b,C){var M=v.Ba(b),$=v.Vc(b);if(this.Yb=[],this.NA=C,v.dc(b)){for(b=v.Na(M);v.Na($-1).qb(b);)$--;if(2<=$-M){for(this.Bw=$-M,this.wg=[],b=M;b<$;b++)this.wg.push(a.al(v.Na(b)));this.mE()&&this.Au(0,this.gf-1)}}else{for(b=v.Na(M);M<$&&v.Na(M+1).qb(b);)M++;for(b=v.Na($-1);M<$&&v.Na($-2).qb(b);)$--;if(2<=$-M){for(this.Bw=2*($-M)-2,this.wg=[],(C=a.al(v.Na(M))).type|=1536,this.wg.push(C),b=M+1;b<$-1;b++)C=a.al(v.Na(b)),this.wg.push(C);for((C=a.al(v.Na($-1))).type|=512,this.wg.push(C),b=$-2;b>=M+1;b--)(C=a.al(v.Na(b))).type|=1024,this.wg.push(C);if(this.mE())if(2<=this.Yb.length){for(v=-1,($=!!(1024&this.Yb[this.gf-1].type))||(v=0),b=1;b<this.gf;b++)(M=!!(1024&this.Yb[b].type))?$||1<($=b-1)-v+1&&this.Au(v,$-v+1):$&&(v=b-1),$=M;$||1<($=this.gf-1)-v+1&&this.Au(v,$-v+1)}else v=0,$=this.gf-1,0<=v&&1<=$-v&&this.Au(v,$-v+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},g.prototype.wW=function(){for(var v=!1,b=0;b<this.gf;b++){var C=this.Yb[b];C.qh=b+1,C.sh=b-1,this.Yb[b]=C}for((C=this.Yb[0]).sh=this.gf-2,this.Yb[0]=C,(C=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=C,b=C=0;b<this.gf;b++)if(256&this.Yb[C].type){var M=this.GP(C);if(M==-1){v=!0;break}C=M}else C=this.Yb[C].qh;return!v&&(this.QO(C),!0)},g.prototype.GP=function(v){for(var b,C,M=this.gf-1,$=v,L=1;L<=M-2;L++){b=$=this.Yb[$].qh,C=v;for(var q=1;q<=L;q++){if(C=this.Yb[C].sh,!(256&this.Yb[C].type||256&this.Yb[b].type)){var U=this.gS(C,b);if(U!=-1)return U}b=this.Yb[b].sh}}return-1},g.prototype.gS=function(v,b){var C=this.Yb[this.Yb[v].sh],M=this.Yb[v],$=this.Yb[this.Yb[b].sh],L=this.Yb[b];if(!this.JW(C,M,$,L))return-1;var q=new u;return this.xQ(C,M,$,L,q)&&!q.bE&&m.O.bK((M.x-C.x)*(L.y-$.y)-(M.y-C.y)*(L.x-$.x))!=m.O.bK(this.Ka)?(C=this.Yb[v].sh,q.an.type=M.type,q.an.qh=b,q.an.sh=C,this.Yb[v]=q.an,q.an=this.Yb[b],q.an.sh=v,this.Yb[b]=q.an,b):-1},g.prototype.JW=function(v,b,C,M){return Math.max(v.x,b.x)>=Math.min(C.x,M.x)&&Math.max(C.x,M.x)>=Math.min(v.x,b.x)&&Math.max(v.y,b.y)>=Math.min(C.y,M.y)&&Math.max(C.y,M.y)>=Math.min(v.y,b.y)},g.prototype.xQ=function(v,b,C,M,$){$.bE=!1;var L=(b.y-v.y)*(M.x-C.x)-(b.x-v.x)*(M.y-C.y),q=(C.y-v.y)*(b.x-v.x)-(C.x-v.x)*(b.y-v.y);if(0<=(L=L==0?2:q/L)&&1>=L){var U=L;if(L=(M.y-C.y)*(b.x-v.x)-(M.x-C.x)*(b.y-v.y),q=(v.y-C.y)*(M.x-C.x)-(v.x-C.x)*(M.y-C.y),0<=(L=L==0?2:q/L)&&1>=L)return $.an=a.TO(v.x+L*(b.x-v.x),v.y+L*(b.y-v.y)),$.an.Uh=C.Uh+U*(M.Uh-C.Uh),U!=0&&U!=1||L!=0&&L!=1||($.bE=!0),$.VY=L,$.WY=U,!((U==0||U==1)&&0<L&&1>L||(L==0||L==1)&&0<U&&1>U)}return!1},g.prototype.QO=function(v){for(;this.Yb[v].sh<v;)v=this.Yb[v].sh;var b=0,C=v;do C=this.Yb[C],this.Yb[b]=C,C=C.qh,b++;while(C!=v);this.Yb[b]=this.Yb[0],this.gf=b+1},g.prototype.$C=function(v){var b=this.ko,C=b.Ga();if(C!=null){C.Zi();for(var M=-1;C.$a();)M++,this.fM(b,M,v)}},g.prototype.Rx=function(){var v=this.ko.getType();return v==322?this.eM():v==197?this.dM():m.aa.yd(v)?((v=new m.Ta).oc(this.ko,!0),this.ko=v,this.Rx()):v==1607?(v=new m.Ta,this.$C(v),v):v==1736?(v=new m.Da,this.$C(v),v):null},g}();m.IK=d}(ye||(ye={})),function(m){var j=function(){function a(u){this.qk=u}return a.prototype.D=function(u,d){this.qk.g.D(u,d)},a.prototype.vd=function(u){var d=this.qk.Fa.ja(u);this.qk.Fa.vd(u,-1),this.qk.g.pd(d,!1)},a}(),T=function(){function a(u){this.qk=u}return a.prototype.D=function(u,d){this.qk.IT.D(u,d)},a.prototype.vd=function(u){this.qk.Fa.vd(u,-1)},a}(),p=function(){function a(u){this.qk=u}return a.prototype.D=function(u,d){d.L(this.qk.LT[u])},a.prototype.vd=function(u){this.qk.Fa.vd(u,-1)},a}(),h=function(){function a(u){u===void 0?(this.Fa=new m.Yj,this.Fa.De(20),this.g=new m.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new j(this)):u instanceof Array?(this.Fa=new m.Yj,this.Fa.De(20),this.LT=u,this.Xh=new p(this)):(this.Fa=new m.Yj,this.Fa.De(20),this.IT=u,this.Xh=new T(this))}return a.prototype.Ib=function(u){var d=u.getType();if(m.Gx.xj(d))this.jN(u);else if(m.Vk.yd(d))this.oN(u);else if(d==197)this.gN(u);else{if(d!=33)throw m.i.N("invalid shape type");this.nN(u)}},a.prototype.cR=function(){var u=new m.Sa,d=this.Fa.rc(-1),g=new m.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(d),u),g.nf(u),d=this.Fa.lb(d);d!=-1;d=this.Fa.lb(d))this.g.Vi(this.Fa.ja(d),u),g.lineTo(u);return g},a.RO=function(u){var d=new a(u),g=u.I(),v=1,b=new m.h,C=new m.h,M=new m.h;for(u.D(0,b);u.D(v,C),C.Rz(b)&&v<g-1;)v++;for(d.Fa.addElement(0,-1),d.Fa.xn(v),g=v+1;g<u.I();g++)u.D(g,M),(v=d.pC(M))!=-1&&d.Fa.Sj(v,g);for(M=new m.Sa,v=d.Fa.rc(-1),g=new m.Da(u.description),u.ve(d.Fa.ja(v),M),g.nf(M),v=d.Fa.lb(v);v!=-1;v=d.Fa.lb(v))u.ve(d.Fa.ja(v),M),g.lineTo(M);return g},a.construct=function(u,d,g){for(var v=new a(u),b=1,C=u[0];u[b].Rz(C)&&b<d-1;)b++;for(v.Fa.addElement(0,-1),v.Fa.xn(b),b+=1;b<d;b++)(C=v.pC(u[b]))!=-1&&v.Fa.Sj(C,b);for(u=0,d=v.Fa.rc(-1);d!=-1;d=v.Fa.lb(d))g[u++]=v.Fa.ja(d);return u},a.JG=function(u,d){var g=u.Ba(d),v=u.Vc(d);if(d=!u.dc(d)&&u.Nn(d),u=u.ub(0),v*=2,d&&(v-=2),6>v-(g*=2))return!0;d=new m.h;var b=new m.h,C=new m.h;u.tc(g,d),u.tc(g+2,b),u.tc(g+4,C);var M=a.Wu(b,C,d);if(M.ps()||!a.um(M.value()))return!1;var $=m.h.construct(b.x,b.y),L=new m.h;for(g+=6;g<v;g+=2)if(L.L(b),b.L(C),u.tc(g,C),(M=a.Wu(b,C,d)).ps()||!a.um(M.value())||(M=a.Wu($,C,d)).ps()||!a.um(M.value())||(M=a.Wu(b,C,L)).ps()||!a.um(M.value()))return!1;return!0},a.prototype.jN=function(u){for(var d=new m.Sa,g=new m.h,v=0;v<u.I();v++){u.D(v,g);var b=this.Cr(g);if(b!=-1){u.ve(v,d);var C=this.g.fc(this.Ss,d);this.Fa.Sj(b,C)}}},a.prototype.gN=function(u){for(var d=new m.Sa,g=new m.h,v=0;4>v;v++){u.mB(v,g);var b=this.Cr(g);if(b!=-1){u.Hf(v,d);var C=this.g.fc(this.Ss,d);this.Fa.Sj(b,C)}}},a.prototype.oN=function(u){var d=new m.Sa,g=u.ac();if((g=this.Cr(g))!=-1){u.To(d);var v=this.g.fc(this.Ss,d);this.Fa.Sj(g,v)}g=u.wc(),(g=this.Cr(g))!=-1&&(u.Po(d),u=this.g.fc(this.Ss,d),this.Fa.Sj(g,u))},a.prototype.nN=function(u){var d=u.D();(d=this.Cr(d))!=-1&&(u=this.g.fc(this.Ss,u),this.Fa.Sj(d,u))},a.prototype.Cr=function(u){var d=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var g=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return u.Rz(g)||(d=this.Fa.xn(-5)),d}return this.pC(u)},a.prototype.pC=function(u){var d=-1;do{var g=this.Fa.rc(-1),v=this.Fa.Fc(-1),b=this.Fa.ja(g),C=this.Fa.ja(v),M=new m.h,$=new m.h;if(this.Xh.D(b,M),this.Xh.D(C,$),b=m.h.Uq($,u,M),a.um(b))d=this.Fa.xn(-1),(M=this.nC(u,v,g))!=g&&this.oC(u,g,this.Fa.we(M));else if(a.CG(b)){$=this.Fa.sv(-1);var L=this.Fa.rc(-1),q=this.Fa.Fc(-1);for(b=new m.h,C=new m.h;L!=this.Fa.we(q);){var U=this.Fa.ja($);this.Xh.D(U,b),U=m.h.Uq(b,u,M),a.CG(U)?(q=$,$=this.Fa.ll($)):(L=$,$=this.Fa.Xp($))}if($=q,M=L,U=this.Fa.ja($),L=this.Fa.ja(M),this.Xh.D(U,b),this.Xh.D(L,C),M!=g&&(b=m.h.Uq(C,u,b),!a.um(b)))continue;d=this.Fa.zu(M,$,-2,!1),this.oC(u,$,v),this.nC(u,M,g)}else this.sb==null&&(this.sb=new m.yb),this.sb.Dc($),this.sb.Qc(M),0>(M=this.sb.fe(u,!0))?(M=this.Fa.we(v),this.Fa.vd(v,-1),d=this.Fa.xn(-3),this.nC(u,M,g)):1<M&&(M=this.Fa.lb(g),this.Fa.vd(g,-1),d=this.Fa.zu(-1,M,-3,!1),this.oC(u,M,v))}while(!1);return d},a.prototype.oC=function(u,d,g){if(d!=g){var v=this.Fa.ja(d),b=this.Fa.lb(d),C=new m.h,M=new m.h;for(this.Xh.D(v,C);d!=g&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(b),M),v=m.h.Uq(M,u,C),!a.um(v));)v=d,d=b,C.L(M),b=this.Fa.lb(d),this.Xh.vd(v)}},a.prototype.nC=function(u,d,g){if(d==g)return g;var v=this.Fa.ja(d),b=this.Fa.we(d),C=new m.h,M=new m.h;for(this.Xh.D(v,C);d!=g&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(b),M),v=m.h.Uq(C,u,M),!a.um(v));)v=d,d=b,C.L(M),b=this.Fa.we(d),this.Xh.vd(v);return d},a.Wu=function(u,d,g){var v=new m.Wb;v.set(d.x),v.sub(u.x);var b=new m.Wb;b.set(g.y),b.sub(u.y);var C=new m.Wb;return C.set(d.y),C.sub(u.y),(d=new m.Wb).set(g.x),d.sub(u.x),v.Ag(b),C.Ag(d),v.sub(C),v},a.um=function(u){return 0>u},a.CG=function(u){return 0<u},a}();m.Zt=h}(ye||(ye={})),function(m){var j=function(){function T(p){this.g=null,this.tH=!0,this.nd=p}return T.zU=function(p,h,a){return p=m.ta.Er(p),m.Yt.Cv(h.Lg(),h.ih(),a.Lg(),a.ih(),m.lc.ox(p))},T.CO=function(p,h){var a=new m.Sa;return m.Yt.WT(p,h,a),a},T.V=function(p,h,a,u){return(a=new T(a)).g=p,a.qa=h,a.tH=u,a.EM()},T.prototype.nM=function(p){return m.Yt.iQ(this.g,p)},T.prototype.sM=function(p){return m.$t.V(this.g,p,this.nd)},T.prototype.EM=function(){var p=this.qa,h=m.ta.Er(p),a=1.00001*(p=m.ta.rN(p));p*=1.000001;for(var u=!1,d=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),g=0,v=this.g.jS();;g++){if(g>d)throw m.i.fa("Internal Error: max number of iterations exceeded");var b=this.nM(h);if(u=u||b,this.tH&&(b=this.g.Gp(h,!0,!1)!=0,u=u||b),b=!1,(g==0||v||m.$t.kI(!0,this.g,p,null,this.nd))&&(b=this.sM(a),u=u||b),!b)break;m.mp.zp(this.nd)}return u},T}();m.Tk=j}(ye||(ye={})),function(m){var j=function(){function p(h){this.$d=this.Mc=null,this.Ys=0,this.Ub=h,this.cA=!0}return p.prototype.uv=function(h,a){var u=this.g.bc(h);if(u==null){if(!this.g.ed(h,a))return null;u=a}return u},p.prototype.Xq=function(){var h;h===void 0&&(h=!1),this.Ys++,!h&&4095&this.Ys||(this.Ys=0,m.mp.zp(this.Ub))},p.prototype.nP=function(){var h=this.g.Yq(!1),a=!1,u=new m.yb,d=new m.yb,g=new m.l;g.Oa();var v=new m.l;v.Oa();for(var b=new m.Sa,C=new m.TC,M=h.next();M!=-1;M=h.next()){m.mp.zp(this.Ub);var $=null,L=!1;if(!m.aa.Rn(this.g.ic(h.ck))){if(($=this.uv(M,u))==null)continue;if($.A(g),g.W(this.qa,this.qa),$.Bi(this.qa)){if(!$.Bi(0))continue;L=!0,$=null}}var q=this.g.Yq(h),U=q.next();for(U!=-1&&(U=q.next());U!=-1;U=q.next()){var ee=null,Q=!1;if(!m.aa.Rn(this.g.ic(q.ck))){if((ee=this.uv(U,d))==null)continue;if(ee.A(v),ee.Bi(this.qa)){if(!ee.Bi(0))continue;Q=!0,ee=null}}var ge=0,ve=0;if($!=null&&ee!=null)g.HG(v)&&(C.Oo($),C.Oo(ee),C.Ea(this.qa,!1),0<(ge=C.ol(0))+(ve=C.ol(1))&&(this.g.jr(M,C,0,!0),this.g.jr(U,C,1,!0)),C.clear());else if($!=null){var fe=new m.h;if(this.g.D(U,fe),g.contains(fe)){if(C.Oo($),this.g.Vi(U,b),C.Kz(this.qa,b,!1),0<(ge=C.ol(0)))if(this.g.jr(M,C,0,!0),Q){for(Q=-1,fe=this.g.U(U);fe!=-1&&fe!=U&&(Q=fe,(ee=this.uv(fe,d))!=null&&ee.Bi(0));fe=this.g.U(fe));for(fe=U;fe!=-1&&(this.g.Dh(fe,C.Bf),fe!=Q);fe=this.g.U(fe));}else this.g.Dh(U,C.Bf);C.clear()}}else{if(ee==null)continue;if(fe=new m.h,this.g.D(M,fe),v.W(this.qa,this.qa),v.contains(fe)){if(C.Oo(ee),this.g.Vi(M,b),C.Kz(this.qa,b,!1),0<(ve=C.ol(0)))if(this.g.jr(U,C,0,!0),L){for(Q=-1,fe=this.g.U(M);fe!=-1&&fe!=M&&(Q=fe,(ee=this.uv(fe,d))!=null&&ee.Bi(0));fe=this.g.U(fe));for(fe=M;fe!=-1&&(this.g.Dh(fe,C.Bf),fe!=Q);fe=this.g.U(fe));}else this.g.Dh(M,C.Bf);C.clear()}}if(ge+ve!=0){if(ge!=0){if(($=this.g.bc(M))==null){if(!this.g.ed(M,u))continue;$=u,u.A(g)}else $.A(g);if($.Bi(this.qa))break}a=!0}}}return a},p.prototype.oP=function(){return this.QU()},p.prototype.QU=function(){return new m.RC().PX(this.g,this.qa)},p.prototype.lI=function(){var h=!1;this.Mc==null&&(this.Mc=new m.Yj);var a=new m.ia(0);a.Jb(this.g.fd+1);for(var u=this.g.Yq(),d=u.next();d!=-1;d=u.next())a.add(d);this.g.nx(a,a.size),a.add(-1),u=this.g.Gd(),d=this.g.Gd(),this.$d=new m.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var g=new m.ia(0),v=new m.ia(0),b=0;new m.h;var C=this.g.td;this.g.vb.mc();for(var M,$,L=this.g.vb.za[0].o,q=a.get(b++);q!=-1;){var U=M=L[2*($=C.T(q,0))],ee=$=L[2*$+1];do{var Q=C.T(q,2),ge=C.T(q,1);if(Q!=-1){var ve=C.T(Q,0),fe=L[2*ve];0>(ee<(ve=L[2*ve+1])?-1:ee>ve?1:U<fe?-1:U>fe?1:0)&&(v.add(q),v.add(Q))}ge!=-1&&(fe=L[2*(ve=C.T(ge,0))],0>(ee<(ve=L[2*ve+1])?-1:ee>ve?1:U<fe?-1:U>fe?1:0)&&(v.add(ge),v.add(ge))),(fe=this.g.Pa(q,u))!=-1&&(g.add(fe),this.g.Ra(q,u,-1)),(fe=this.g.Pa(q,d))!=-1&&(g.add(fe),this.g.Ra(q,d,-1)),(q=a.get(b++))!==-1&&(U=L[2*(ee=C.T(q,0))],ee=L[2*ee+1])}while(q!=-1&&U===M&&ee===$);for(U=g.size==1&&v.size==2,fe=ee=-1,Q=0,ge=g.size;Q<ge;Q++){ve=g.get(Q);var Ce=this.Mc.we(ve);if(Ce==-1||g.hG(Ce)||(ee=Ce),(ve=this.Mc.lb(ve))==-1||g.hG(ve)||(fe=ve),ee!=-1&&fe!=-1)break}for(this.$d.$J($,M),Q=0,ge=g.size;Q<ge;Q++)ve=g.get(Q),this.Mc.vd(ve,-1);if(g.clear(!1),!U&&ee!=-1&&fe!=-1&&this.qO(ee,fe)){h=!0,this.Ni=this.$d.rm();break}for(Q=0,ge=v.size;Q<ge;Q+=2){if($=v.get(Q),M=v.get(Q+1),U?($=this.Mc.zu(ee,fe,$,!0),U=!1):$=this.Mc.addElement($,-1),this.$d.rg){this.Ni=this.$d.rm(),h=!0;break}this.g.Pa(M,u)==-1?this.g.Ra(M,u,$):this.g.Ra(M,d,$)}if(h)break;v.Bh(0)}return this.g.Td(u),this.g.Td(d),h},p.prototype.qO=function(h,a){return this.$d.compare(this.Mc,this.Mc.ja(h),a),h=this.$d.rg,this.$d.Kr(),h},p.yE=function(h){for(var a=h.ld;a!=-1;a=h.ue(a))if(m.aa.Hc(h.ic(a)))return!0;return!1},p.fQ=function(h,a,u,d){return!!p.yE(h)&&((a=new p(d)).g=h,a.qa=u,15>h.fd?h=a.nP():a.oP())},p.V=function(h,a,u){return p.fQ(h,h.IF(),a,u)},p.kI=function(h,a,u,d,g){if(!p.yE(a))return!1;var v=new p(g);if(v.g=a,v.qa=u,v.cA=h,v.lI())return d!=null&&d.Wt(v.Ni),!0;var b=new m.Dd;return b.$B(),a.Oc(b),(v=new p(g)).g=a,v.qa=u,v.cA=h,h=v.lI(),b.$B(),a.Oc(b),!!h&&(d!=null&&d.Wt(v.Ni),!0)},p.Ml=function(h,a){return!(16>(h=h.I()))&&2*h+Math.log(h)*Math.LOG10E/Math.log(2)*a<1*h*a},p.lP=function(h,a,u,d){var g=a.getType();if(m.aa.Hc(g))return new p(d).mP(h,a,u);throw m.i.fa("crack_A_with_B")},p.prototype.mP=function(h,a,u){var d=new m.l;h.xc(d);var g=new m.l;if(a.xc(g),g.W(u,u),!g.isIntersecting(d))return h;var v=h.Bb,b=null;v!=null&&(b=v.Fb),p.Ml(h,h.I())&&(b=m.ta.jj(h,g));var C=b!=null?b.getIterator():null,M=a.Ga();a=h.Ga();var $=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(g=[];M.$a();)for(;M.Ha();){var L=M.ha();if(b!=null){for(C.Uo(L,u),v=C.next();v!=-1;v=C.next())if(this.Xq(),a.Vb(b.ja(v),-1),a.Ha()){var q=(v=a.ha()).Ea(L,null,$,null,u);for(v=0;v<q;++v){var U=$[v];if(U!=0&&U!=1){var ee=a.wb(),Q=new T;Q.t=U,Q.index=ee,g.push(Q)}}}}else{var ge=new m.l;if(L.xc(ge),ge.W(u,u),d.isIntersecting(ge)){for(a.Zi();a.$a();)for(;a.Ha();)if(this.Xq(),v=a.ha(),U=new m.l,v.xc(U),U.isIntersecting(ge))for(q=v.Ea(L,null,$,null,u),v=0;v<q;++v)(U=$[v])!=0&&U!=1&&(ee=a.wb(),(Q=new T).t=U,Q.index=ee,g.push(Q))}}}if(g.length==0)return h;for(g=g.sort(T.Ey),h=h.Ia(),a.Zi();a.$a()&&!a.Ha(););for(u=a.ha(),d=new m.ig,b=-1,v=0,C=g.length;v<C;){for($=g[v].index,M=v+1;M<C&&g[M].index==$;)++M;for(;a.wb()<$;){if(this.Xq(),L=a.Ha(),U=a.gb,(ge=L||!a.On()||a.Pn())&&h.oc(u,b!=U),b=U,!L)for(;a.$a()&&!a.Ha(););u=a.ha()}for($=0;v<M;v++)(U=g[v].t)!=$&&(u.ah($,U,d),$=U,U=a.gb,h.oc(d.get(),b!=U),b=U);if((ge=(L=a.Ha())||!a.On()||a.Pn())&&(u.ah($,1,d),h.oc(d.get(),!1)),L)u=a.ha();else{for(;a.$a()&&!a.Ha(););u=a.Ha()?a.ha():null}v=M}for(u!=null&&(U=a.gb,(ge=(L=a.Ha())||!a.On()||a.Pn())&&h.oc(u,b!=U),b=U),L=a.Ha();;){if(!L){for(;a.$a()&&!(L=a.Ha()););if(!L)break}u=a.ha(),U=a.gb,(ge=(L=a.Ha())||!a.On()||a.Pn())&&h.oc(u,b!=U),b=U}return h},p}();m.$t=j;var T=function(){function p(){}return p.Ey=function(h,a){return h.index==a.index?h.t>a.t?1:h.t<a.t?-1:0:h.index>a.index?1:-1},p}()}(ye||(ye={})),function(m){var j;(j=m.KK||(m.KK={}))[j.Left=0]="Left",j[j.Right=1]="Right",j[j.Coincident=2]="Coincident",j[j.Undefined=3]="Undefined",j[j.Uncut=4]="Uncut";var T=function(a,u,d,g,v,b,C,M,$,L,q){this.X=a,this.bt=u,this.Ns=d,this.tg=g,this.Lm=L,this.Al=q};m.uY=T;var p=function(){function a(u,d){this.JH=u,this.Hi=d}return a.prototype.qM=function(u,d){var g=new m.h;this.Hi.D(u,g);var v=new m.h;return this.Hi.D(d,v),(g=g.compare(v))!=0?g:(u=this.Hi.Pa(u,this.JH))<(d=this.Hi.Pa(d,this.JH))?-1:u==d?0:1},a}(),h=function(a,u,d,g,v,b,C,M,$){this.tg=a,this.Ns=u,this.OA=d,this.UH=g,this.Ei=v,this.Al=b,this.Lm=C,this.VH=M,this.OT=$};m.tY=h,m.LK=function(){function a(){}return a.JK=function(u,d,g,v,b,C){if(d.B())u=new T(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),b.push(u);else if(g.B())u=new T(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),b.push(u);else{var M=new m.gd;if(M.Ib(d),M.Ib(g),m.Tk.V(M,v,C,!0),M.fd==0)u=new T(d.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),b.push(u);else{for(d=0,g=M.Gd(),v=M.ld;v!=-1;v=M.ue(v))for(C=M.Ob(v);C!=-1;C=M.Rb(C))for(var $=M.Xa(C),L=0,q=M.Ja(C);L<q;$=M.U($),L++)M.Ra($,g,d++);d=a.HM(g,M),a.cM(u,d,M,b)}}},a.HM=function(u,d){for(var g=d.fd,v=new m.ia(0),b=d.ld;b!=-1;b=d.ue(b))for(var C=d.Ob(b);C!=-1;C=d.Rb(C))for(var M=d.Xa(C),$=0,L=d.Ja(C);$<L;M=d.U(M),$++)v.add(M);var q=new p(u,d);v.Vd(0,g,function(dt,ct){return q.qM(dt,ct)}),u=[];var U=[],ee=d.Gd(),Q=d.Gd();b=d.ld,C=d.ue(b),L=new m.h;var ge=new m.h,ve=v.get(0),fe=d.bd(ve),Ce=d.Qf(fe);d.D(ve,L);var Ie=1;for(M=0;Ie<g-1;){var Ne=!1;for($=Ie;$<g;$++)if($!=M){var Ve=v.get($),Xe=d.bd(Ve),et=d.Qf(Xe);if(d.D(Ve,ge),!L.qb(ge))break;Ce==b&&et==C&&(Ne=a.uM(ee,Q,d,u,U,fe,ve,Xe,Ve))}if(Ne||M==Ie-1){if(Ne&&M==Ie-1&&Ie--,++M==g)break;ve=v.get(M),fe=d.bd(ve),Ce=d.Qf(fe),d.D(ve,L)}Ne||(Ie=M+1)}for(g=[],b=d.ld;b!=-1;b=d.ue(b))for(C=d.Ob(b);C!=-1;C=d.Rb(C))for(v=d.Xa(C),$=0,L=d.Ja(C);$<L;v=d.U(v),$++){if(0<=(M=d.Pa(v,Q)))for(;M<U.length&&U[M].tg==v;)g.push(U[M++]);if(0<=(M=d.Pa(v,ee)))for(;M<u.length&&u[M].tg==v;)g.push(u[M++])}return d.Td(ee),d.Td(Q),g},a.uM=function(u,d,g,v,b,C,M,$,L){var q=g.rj(C),U=g.rj($),ee=g.Xa(C),Q=g.Xa($),ge=g.Ma(M),ve=g.Ma(L),fe=!1,Ce=!1,Ie=!1,Ne=!1;return M!=ee&&(L!=Q&&(fe=a.vM(u,g,v,C,ge,$,ve)),L!=U&&(Ce=a.wM(u,g,v,C,ge,$,L))),M!=q&&(L!=Q&&(Ie=a.xM(d,g,b,C,M,$,ve,ee)),L!=U&&(Ne=a.yM(d,g,b,C,M,$,L,ee))),fe&&Ce&&Ie?(u=v.length-1,b[Ne?b.length-2:b.length-1].Ei==2&&(v[u-1]=v[u],--v.length)):fe&&Ce&&Ne&&b[b.length-1].Ei==2&&(b=v[v.length-1],--v.length,g.Pa(b.tg,u)==v.length&&g.Ra(b.tg,u,-1)),fe||Ce||Ie||Ne},a.vM=function(u,d,g,v,b,C,M){var $=new m.yb,L=new m.yb,q=[0,0],U=[0,0],ee=d.bc(b);return ee==null&&(d.ed(b,$),ee=$),($=d.bc(M))==null&&(d.ed(M,L),$=L),2>(ee=ee.Ea($,null,q,U,0))&&(v=new h(b,v,q[0],NaN,ee,M,C,U[0],NaN),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1)),!0},a.wM=function(u,d,g,v,b,C,M){var $=new m.yb,L=new m.yb,q=[0,0],U=[0,0],ee=d.bc(b);return ee==null&&(d.ed(b,$),ee=$),($=d.bc(M))==null&&(d.ed(M,L),$=L),2>(ee=ee.Ea($,null,q,U,0))&&(v=new h(b,v,q[0],NaN,ee,M,C,U[0],NaN),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),!0)},a.xM=function(u,d,g,v,b,C,M,$){var L=new m.yb,q=new m.yb,U=[0,0],ee=[0,0],Q=d.bc(b);return Q==null&&(d.ed(b,L),Q=L),(L=d.bc(M))==null&&(d.ed(M,q),L=q),(Q=Q.Ea(L,null,U,ee,0))==2?(v=new h(b,v,U[0],U[1],Q,M,C,ee[0],ee[1]),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),!0):(q=!1,b==$&&(v=new h(b,v,U[0],NaN,Q,M,C,ee[0],NaN),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),q=!0),q)},a.yM=function(u,d,g,v,b,C,M,$){var L=new m.yb,q=new m.yb,U=[0,0],ee=[0,0],Q=d.bc(b);return Q==null&&(d.ed(b,L),Q=L),(L=d.bc(M))==null&&(d.ed(M,q),L=q),(Q=Q.Ea(L,null,U,ee,0))==2?(v=new h(b,v,U[0],U[1],Q,M,C,ee[0],ee[1]),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),!0):(q=!1,b==$&&(v=new h(b,v,U[0],NaN,Q,M,C,ee[0],NaN),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),q=!0),q)},a.cM=function(u,d,g,v){var b=[];b[0]=new m.h,b[1]=new m.h,b[2]=new m.h,b[3]=new m.h;var C=new m.h,M=new m.h,$=new m.h,L=new m.h,q=null;v!=null&&(q=new m.ig).Or();var U=0,ee=null,Q=new m.yb;new m.yb;for(var ge=g.Ob(g.ld);ge!=-1;ge=g.Rb(ge)){for(var ve=4,fe=-1,Ce=-1,Ie=-1,Ne=-1,Ve=NaN,Xe=!0,et=!1,dt=!0,ct=!0,mt=!0,lt=0,gi=ge,oi=0,Ni=g.Xa(ge),Qi=g.Ja(ge),xn=0;xn<Qi;Ni=g.U(Ni),xn++){var ln=g.bc(Ni);if(ln==null){if(!g.ed(Ni,Q))continue;ln=Q}Ce==-1&&(Ce=Ni);for(var Oi=0;U<d.length&&Ni==d[U].tg;){fe=d[U].Ns;var ui=d[U].tg,Kt=d[U].OA,Wn=d[U].Lm,In=d[U].Al,tr=d[U].VH;if(d[U].Ei==2){if(et||(gi=fe,Ce=ui,oi=Kt,Ie=Wn,Ne=In,Ve=tr,ve=2,v!=null?ee=new m.Ta:lt=0,mt=!1,ct=!0),Kt=d[U].UH,tr=d[U].OT,v!=null?(ln.ah(Oi,d[U].UH,q),ee.oc(q.get(),ct)):lt++,Oi=Kt,et=!0,ct=Xe=!1,U+1==d.length||d[U+1].Ei!=2||d[U+1].tg==ui&&d[U+1].OA!=Oi){if(v!=null){var wi=new T(ee,2,fe,ui,Kt,ve,gi,Ce,oi,Wn,In);v.push(wi)}else null.add(lt);gi=fe,Ce=ui,oi=Kt,Ie=Wn,Ne=In,Ve=tr,ve=2,et=Xe=!1,ct=mt=!0}}else{var ns=g.U(ui);if(U<d.length-1&&d[U+1].tg==ns&&d[U+1].Al==In&&d[U+1].Ei==2)Kt!=Oi&&(mt&&(v!=null?ee=new m.Ta:lt=0),Xe=0<U&&d[U-1].Ns==fe?ve==1?0:ve==0?1:3:3,v!=null?(ln.ah(Oi,Kt,q),ee.oc(q.get(),ct),wi=new T(ee,Xe,fe,ui,Kt,ve,gi,Ce,oi,Wn,In),v.push(wi)):(lt++,null.add(lt)),Oi=Kt,gi=fe,Ce=ui,oi=Kt,Ie=Wn,Ne=In,Ve=tr,ve=Xe,Xe=dt=!1,ct=mt=!0);else if(!a.CM(u,g,d,U,C,M)){a.zM(g,d,U,ge,Ni,$,L);var rn=!1;if(ns=!1,wi=!0,!(C.qb($)||M.qb($)||C.qb(L)||M.qb(L))){b[0].L(C),b[1].L(M),b[2].L($),b[3].L(L),b.sort(m.h.nu);var pr=b[0],ah=b[1],Jc=b[2],ze=b[3];pr.qb(C)?ah.qb(M)?u?(ns=rn=!0,wi=!1):rn=!1:ze.qb(M)?u?wi=ns=rn=!0:rn=!1:(rn=!0,wi=ah.qb($)):ah.qb(C)?Jc.qb(M)?u?(ns=rn=!0,wi=!1):rn=!1:pr.qb(M)?u?wi=ns=rn=!0:rn=!1:(rn=!0,wi=Jc.qb($)):Jc.qb(C)?ze.qb(M)?u?(ns=rn=!0,wi=!1):rn=!1:ah.qb(M)?u?wi=ns=rn=!0:rn=!1:(rn=!0,wi=ze.qb($)):pr.qb(M)?u?(ns=rn=!0,wi=!1):rn=!1:Jc.qb(M)?u?wi=ns=rn=!0:rn=!1:(rn=!0,wi=pr.qb($))}rn&&(rn=Ni==ui,(Kt!=Oi||rn&&Oi==0)&&(mt&&(v!=null?ee=new m.Ta:lt=0),v!=null?(ln.ah(Oi,Kt,q),ee.oc(q.get(),ct)):lt++),wi?ve!=1?((Kt!=Oi||rn&&Oi==0)&&(v!=null?(wi=new T(ee,1,fe,ui,Kt,ve,gi,Ce,oi,Wn,In),v.push(wi)):null.add(lt)),ns?(U>=d.length-2||d[U+2].Ns!=fe)&&(ve=0):ve=1):((Kt!=Oi||rn&&Oi==0)&&(v!=null?(wi=new T(ee,3,fe,ui,Kt,ve,gi,Ce,oi,Wn,In),v.push(wi)):null.add(lt)),ve=1):ve!=0?((Kt!=Oi||rn&&Oi==0)&&(v!=null?(wi=new T(ee,0,fe,ui,Kt,ve,gi,Ce,oi,Wn,In),v.push(wi)):null.add(lt)),ns?(U>=d.length-2||d[U+2].Ns!=fe)&&(ve=1):ve=0):((Kt!=Oi||rn&&Oi==0)&&(v!=null?(wi=new T(ee,3,fe,ui,Kt,ve,gi,Ce,oi,Wn,In),v.push(wi)):null.add(lt)),ve=0),(Kt!=Oi||rn&&Oi==0)&&(Oi=Kt,gi=fe,Ce=ui,oi=Kt,Ie=Wn,Ne=In,Ve=tr,Xe=dt=!1,ct=mt=!0))}}U++}Oi!=1&&(mt&&(v!=null?ee=new m.Ta:lt=0),v!=null?(ln.ah(Oi,1,q),ee.oc(q.get(),ct)):lt++,ct=mt=!1,dt=!0)}dt&&(Kt=1,ui=g.rj(ge),ui=g.Ma(ui),In=Wn=-1,tr=NaN,Xe?v!=null?(wi=new T(ee,4,fe,ui,Kt,ve,gi,Ce,oi,Wn,In),v.push(wi)):null.add(lt):(Xe=ve==1?0:ve==0?1:3,v!=null?(wi=new T(ee,Xe,fe,ui,Kt,ve,gi,Ce,oi,Wn,In),v.push(wi)):null.add(lt)))}},a.CM=function(u,d,g,v,b,C){var M=g[v].VH;if(M==1)return a.AM(u,d,g,v,b,C);if(M==0)return a.BM(u,d,g,v,b,C);throw m.i.Qa()},a.AM=function(u,d,g,v,b,C){var M=new m.yb,$=g[v].tg,L=g[v].Lm,q=g[v].Al,U=-1,ee=-1,Q=-1,ge=-1;if(!u&&0<v){var ve=g[v-1];U=ve.tg,ee=ve.Lm,Q=ve.Al,ge=ve.Ei}var fe=-1,Ce=-1,Ie=-1,Ne=-1;v<g.length-1&&(fe=(ve=g[v+1]).tg,Ce=ve.Lm,Ie=ve.Al,Ne=ve.Ei);var Ve=d.U($);return ve=d.U(q),u?v==g.length-1||fe!=$||Ce!=L||Ie!=ve||Ne==2?((u=d.bc(q))==null&&(d.ed(q,M),u=M),C.L(u.kg()),b.mt(C),C.normalize(),b.normalize(),!1):((u=d.bc(q))==null&&(d.ed(q,M),u=M),b.L(u.kg()),(u=d.bc(ve))==null&&(d.ed(ve,M),u=M),C.L(u.kg()),b.Sq(),C.normalize(),b.normalize(),!1):0<v&&U==$&&ee==L&&Q==ve&&ge==2||v<g.length-1&&fe==Ve&&Ce==L&&Ie==ve&&Ne==2?((u=d.bc(q))==null&&(d.ed(q,M),u=M),C.L(u.kg()),b.mt(C),C.normalize(),b.normalize(),!1):!(v<g.length-1&&fe==$&&Ce==L&&Ie==ve)||((u=d.bc(q))==null&&(d.ed(q,M),u=M),b.L(u.kg()),(u=d.bc(ve))==null&&(d.ed(ve,M),u=M),C.L(u.kg()),b.Sq(),C.normalize(),b.normalize(),!1)},a.BM=function(u,d,g,v,b,C){var M=new m.yb,$=g[v].tg,L=g[v].Lm,q=g[v].Al,U=-1,ee=-1,Q=-1,ge=-1;if(!u&&v<g.length-1){var ve=g[v+1];U=ve.tg,ee=ve.Lm,Q=ve.Al,ge=ve.Ei}var fe=-1,Ce=-1,Ie=-1;ve=-1,0<v&&(fe=(ve=g[v-1]).tg,Ce=ve.Lm,Ie=ve.Al,ve=ve.Ei);var Ne=d.U($),Ve=d.Ma(q);return u?v!=0&&fe==$&&Ce==L&&Ie==Ve&&ve!=2||((u=d.bc(q))==null&&(d.ed(q,M),u=M),C.L(u.kg()),b.mt(C),C.normalize(),b.normalize(),!1):!(0<v&&fe==$&&Ce==L&&Ie==Ve&&ve==2||v<g.length-1&&U==Ne&&ee==L&&Q==Ve&&ge==2)||((u=d.bc(q))==null&&(d.ed(q,M),u=M),C.L(u.kg()),b.mt(C),C.normalize(),b.normalize(),!1)},a.zM=function(u,d,g,v,b,C,M){var $=new m.yb,L=u.bc(b);if(L==null&&(u.ed(b,$),L=$),d=(g=d[g]).tg,g=g.OA,b=u.U(d),g==1)C.L(L.kg()),b!=-1&&b!=u.rj(v)?((L=u.bc(b))==null&&(u.ed(b,$),L=$),M.L(L.kg()),(L=u.bc(d))==null&&u.ed(d,$)):M.L(C),C.Sq(),M.normalize(),C.normalize();else{if(g!=0)throw m.i.Qa();M.L(L.kg()),C.mt(M),M.normalize(),C.normalize()}},a}()}(ye||(ye={})),function(m){var j;(j=m.bM||(m.bM={}))[j.Linear=0]="Linear",j[j.Angular=1]="Angular",j[j.Area=2]="Area";var T=function(){function v(b,C,M){this.od=C,this.ai=M,this.vA=b}return v.prototype.Nb=function(b){return b instanceof v&&this.ai===b.ai},v.aG=function(b){return b.od!==0?null:b.vA===-1?new v(-1,2,b.ai*b.ai):v.Zg(d[b.vA])},v.Zg=function(b){return(b=u[b])===void 0?null:b},v.ZO=function(b,C,M){var $=null;if(M!=null)try{M.values[0]==="EPSG"&&($=v.Zg(parseInt(M.values[1])))}catch{}return $===null&&($=new v(-1,b,C)),$},v.prototype.Ec=function(){return this.vA},v.prototype.CF=function(b){if(b.od!=this.od)throw m.i.Hb();return this.ai/b.ai},v.Nh=function(b,C,M){return C.CF(M)*b},v.XE=function(b,C,M,$,L){for(M=M.CF($),$=0;$<C;$++)L[$]=b[$]*M},v}();m.Tc=T;for(var p=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],h=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],a=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],u=[],d=[],g=0;g<p.length;g+=2)u[p[g]]=new T(p[g],2,p[g+1]);for(p=null,g=0;g<h.length;g+=2)u[h[g]]=new T(h[g],1,h[g+1]);for(h=null,g=0;g<a.length;g+=3)u[a[g]]=new T(a[g],0,a[g+1]),d[a[g]]=a[g+2];a=null}(ye||(ye={})),function(m){var j=function(){function T(){this.xb=this.pb=0}return T.prototype.set=function(p,h){h!==void 0?(this.pb=p,this.xb=h):typeof p=="number"?(this.pb=p,this.xb=0):(this.pb=p.pb,this.xb=p.xb)},T.prototype.value=function(){return this.pb},T.prototype.add=function(p){var h=this.pb+p.pb;p=this.xb+p.xb+2220446049250313e-31*Math.abs(h),this.pb=h,this.xb=p},T.prototype.kN=function(){var p=this.pb+1,h=this.xb+2220446049250313e-31*Math.abs(p);this.pb=p,this.xb=h},T.prototype.dN=function(p,h){this.pb=p.pb+h.pb,this.xb=p.xb+h.xb+2220446049250313e-31*Math.abs(this.pb)},T.prototype.sub=function(p){if(typeof p=="number"){var h=this.pb-p;p=this.xb+2220446049250313e-31*Math.abs(h)}else h=this.pb-p.pb,p=this.xb+p.xb+2220446049250313e-31*Math.abs(h);this.pb=h,this.xb=p},T.prototype.Ag=function(p){var h=this.pb*p.pb;this.xb=this.xb*Math.abs(p.pb)+p.xb*Math.abs(this.pb)+this.xb*p.xb+2220446049250313e-31*Math.abs(h),this.pb=h},T.prototype.No=function(p){var h=this.pb*p;this.xb=this.xb*Math.abs(p)+2220446049250313e-31*Math.abs(h),this.pb=h},T.prototype.Kl=function(p,h){var a=Math.abs(p.pb)*Math.abs(h.pb);this.xb=p.xb*Math.abs(h.pb)+h.xb*Math.abs(p.pb)+p.xb*h.xb+2220446049250313e-31*Math.abs(a),this.pb=a},T.prototype.jm=function(p){var h=Math.abs(p.pb),a=this.pb/p.pb,u=(this.xb+Math.abs(a)*p.xb)/h;p.xb>.01*h&&(u*=1+(1+(p=p.xb/h))*p),this.pb=a,this.xb=u+2220446049250313e-31*Math.abs(a)},T.prototype.sqrt=function(){if(0<=this.pb){var p=Math.sqrt(this.pb),h=this.pb>10*this.xb?.5*this.xb/p:this.pb>this.xb?p-Math.sqrt(this.pb-this.xb):Math.max(p,Math.sqrt(this.pb+this.xb)-p);h+=2220446049250313e-31*Math.abs(p)}else this.pb<-1*this.xb?h=p=NaN:(p=0,h=Math.sqrt(this.xb));this.pb=p,this.xb=h},T.prototype.sin=function(p){var h=Math.sin(p.pb),a=Math.cos(p.pb);this.pb=h,h=Math.abs(h),this.xb=(Math.abs(a)+.5*h*p.xb)*p.xb+2220446049250313e-31*h},T.prototype.cos=function(p){var h=Math.sin(p.pb),a=Math.cos(p.pb);this.pb=a,a=Math.abs(a),this.xb=(Math.abs(h)+.5*a*p.xb)*p.xb+2220446049250313e-31*a},T.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},T.prototype.ps=function(){return this.qg()&&this.xb!=0},T}();m.Wb=j}(ye||(ye={}));var Ai=new ye.h,ms=new ye.h,gn=new ye.h,Ji=new ye.h,is=new ye.h;(function(m){var j,T;(T=j||(j={}))[T.closedPath=1]="closedPath",T[T.exteriorPath=2]="exteriorPath",T[T.ringAreaValid=4]="ringAreaValid";var p=function(){function h(a,u,d,g,v,b,C){u!==void 0?(this.ib=a,this.ck=u,this.bl=d,this.ii=g,this.ya=b,this.hA=C,this.ew=v):(this.ib=a.ib,this.ck=a.ck,this.bl=a.bl,this.ii=a.ii,this.ya=a.ya,this.hA=a.hA,this.ew=a.ew),this.bH=!0}return h.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},h.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!m.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},h.AP=function(a,u,d,g,v,b,C){return new h(a,u,d,g,v,b,C)},h}();m.zY=p,j=function(){function h(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return h.prototype.Sh=function(a){return this.We!=null?this.We[a]:null},h.prototype.Xg=function(a,u){if(this.We==null){if(u==null)return;this.We=[];for(var d=0,g=this.vb.I();d<g;d++)this.We.push(null)}this.We[a]=u},h.prototype.bp=function(a,u){this.md.S(a,1,u)},h.prototype.ap=function(a,u){this.md.S(a,2,u)},h.prototype.VB=function(a,u){this.md.S(a,6,u)},h.prototype.Sp=function(a){return this.md.T(a,6)},h.prototype.gx=function(a,u){this.md.S(a,7,u)},h.prototype.qv=function(a){return this.md.T(a,0)},h.prototype.OJ=function(a,u){this.cd.S(a,1,u)},h.prototype.SJ=function(a,u){this.cd.S(a,0,u)},h.prototype.JF=function(a){return this.cd.T(a,7)},h.prototype.Zo=function(a,u){this.cd.S(a,3,u)},h.prototype.$o=function(a,u){this.cd.S(a,4,u)},h.prototype.uU=function(a){this.cd==null&&(this.cd=new m.$c(8));var u=this.cd.Ce();return this.cd.S(u,2,a),this.cd.S(u,5,0),this.cd.S(u,6,0),this.cd.S(u,7,u),u},h.prototype.OQ=function(a){this.cd.jd(a)},h.prototype.wU=function(a){this.md==null&&(this.md=new m.$c(8),this.td=new m.$c(5),this.Oi=new m.be(0),this.vo=new m.be(0));var u=this.md.Ce();return this.md.S(u,0,u),this.md.S(u,3,0),this.md.S(u,6,0),this.gx(u,a),u>=this.Oi.size&&(a=16>u?16:m.O.truncate(3*u/2),this.Oi.resize(a),this.vo.resize(a)),this.Oi.set(u,0),this.vo.set(u,0),u},h.prototype.sF=function(a){this.md.jd(a)},h.prototype.Vy=function(a){this.td.jd(a),this.fd--},h.prototype.oI=function(a){this.md==null&&(this.md=new m.$c(8),this.td=new m.$c(5),this.Oi=new m.be(0),this.vo=new m.be(0));var u=this.td.Ce(),d=0<=a?a:u;if(this.td.S(u,0,d),0>a){if(d>=this.vb.I()){if(a=16>d?16:m.O.truncate(3*d/2),this.vb.resize(a),this.We!=null)for(var g=0;g<a;g++)this.We.push(null);this.Sg!=null&&this.Sg.resize(a),this.it=this.vb.ub(0)}this.vb.Cb(d,-1e38,-1e38),this.We!=null&&(this.We[d]=null),this.Sg!=null&&this.Sg.write(d,1)}return this.td.S(u,4,2*d),this.fd++,u},h.prototype.wj=function(a,u,d){var g=u!=-1?this.Ma(u):this.rj(a),v=g!=-1?this.U(g):-1,b=this.oI(d==null?this.fd:-1),C=this.Ua(b);return d!=null&&this.vb.Ht(C,d),this.aj(b,a),this.Bc(b,v),this.Cc(b,g),v!=-1&&this.Cc(v,b),g!=-1&&this.Bc(g,b),d=this.dc(a),g=this.Xa(a),u==-1&&this.Wg(a,b),u==g&&this.Jf(a,b),d&&v==-1&&(this.Bc(b,b),this.Cc(b,b)),this.Vj(a,this.Ja(a)+1),a=this.Qf(a),this.Tj(a,this.I(a)+1),b},h.prototype.nm=function(){return this.jo==null&&(this.jo=new m.Sa(this.vb.description)),this.jo},h.prototype.Yo=function(a,u){this.cd.S(a,2,-134217729&this.cd.T(a,2)||(u==1?134217728:0))},h.prototype.In=function(a){return 134217728&this.cd.T(a,2)?1:0},h.prototype.hN=function(a){var u=this.Ig(a.getType(),a.description);return a.getType()==1736&&this.Yo(u,a.In()),this.UD(u,a),u},h.prototype.iN=function(a){var u=this.Ig(a.getType(),a.description);return this.VD(u,a),u},h.prototype.XV=function(a,u){this.md==null&&(this.md=new m.$c(8),this.td=new m.$c(5),this.Oi=new m.be(0),this.vo=new m.be(0)),this.md.De(this.md.Hg+a),this.td.De(this.td.Hg+u),this.Oi.Jb(this.Oi.size+a),this.vo.Jb(this.vo.size+a)},h.prototype.UD=function(a,u){this.XV(u.da(),u.I()),this.Il.Fd(u,0,u.I()),this.it=this.vb.ub(0);for(var d=this.We!=null&&u.Ve!=null,g=0,v=u.da();g<v;g++)if(!(2>u.Ja(g))){var b=this.vf(a,-1);this.kn(b,u.dc(g));for(var C=u.Ba(g),M=u.Vc(g);C<M;C++){var $=this.wj(b,-1,null);if(d)if($=this.Ua($),1&u.ZF(C))this.Xg($,null);else{var L=new m.ig;u.bc(C,L,!0),this.Xg($,L.get())}}}},h.prototype.VD=function(a,u){this.Il.Fd(u,0,u.I()),this.it=this.vb.ub(0),a=this.vf(a,-1);var d=0;for(u=u.I();d<u;d++)this.wj(a,-1,null)},h.prototype.NX=function(a,u,d){var g=this.U(a);if(g==-1)throw m.i.Qa();for(var v=this.nm(),b=this.bd(a),C=0,M=u.ol(d);C<M;C++){var $=this.Ua(a),L=this.U(a),q=u.Vp(d,C);C==0&&(q.To(v),this.Dh(a,v)),q.getType()==322?this.Xg($,null):this.Xg($,m.aa.jg(q)),q.Po(v),C<M-1?a=this.wj(b,L,v):this.Dh(g,v)}},h.prototype.MX=function(a,u,d){var g=this.U(a);if(g==-1)throw m.i.Qa();for(var v=this.nm(),b=this.bd(a),C=0,M=u.ol(d);C<M;C++){var $=this.Ua(a),L=this.U(a),q=u.Vp(d,M-C-1);C==0&&(q.Po(v),this.Dh(a,v)),q.getType()==322?this.Xg($,null):this.Xg($,m.aa.jg(q)),q.To(v),C<M-1?a=this.wj(b,L,v):this.Dh(g,v)}},h.prototype.IF=function(){var a=new m.l;a.Oa();for(var u=this.Yq(),d=new m.h,g=!0,v=u.next();v!=-1;v=u.next())this.D(v,d),g?a.Zb(d.x,d.y):a.Lk(d.x,d.y),g=!1;return a},h.prototype.Ib=function(a){var u=a.getType();if(m.aa.Hc(u))return this.hN(a);if(u==550)return this.iN(a);throw m.i.Qa()},h.prototype.uN=function(a,u){var d=u.getType();if(m.aa.Hc(d))this.UD(a,u);else{if(d!=550)throw m.i.Qa();this.VD(a,u)}},h.prototype.mN=function(a,u){var d=this.Ig(1736,a.description);if(2>a.Ja(u))return d;this.Il.Fd(a,a.Ba(u),a.Vc(u)),this.it=this.vb.ub(0);var g=this.vf(d,-1);this.kn(g,a.dc(u)||!0);var v=this.We!=null&&a.Ve!=null,b=a.Ba(u);for(u=a.Vc(u);b<u;b++){var C=this.wj(g,-1,null);if(v)if(C=this.Ua(C),1&a.ZF(b))this.Xg(C,null);else{var M=new m.ig;a.bc(b,M,!0),this.Xg(C,M.get())}}return d},h.prototype.Ne=function(a){var u=this.ic(a),d=m.ZK.Ig(u,this.Il.description),g=this.I(a);if(g==0)return d;if(m.aa.Hc(u)){u=this.da(a);for(var v=m.Yc.Oh(u+1),b=m.Yc.Mr(u+1,0),C=d.description,M=0,$=C.Aa;M<$;M++){for(var L=C.kd(M),q=m.ra.Va(L),U=m.Yc.YE(L,g),ee=this.vb.ub(L),Q=0,ge=0,ve=0,fe=this.Ob(a);fe!=-1;fe=this.Rb(fe)){var Ce=0;this.dc(fe)&&(Ce|=1),this.YS(fe)&&(Ce|=4),Ce!=0&&b.zJ(ge,Ce);var Ie=this.Ja(fe);if(v.write(ge++,ve),ve+=Ie,L==0){Ie=ee;var Ne=U,Ve=new m.h;for(Ce=this.Xa(fe);Q<ve;Ce=this.U(Ce),Q++){var Xe=this.Ua(Ce);Ie.tc(2*Xe,Ve),Ne.Tt(2*Q,Ve)}}else for(Ce=this.Xa(fe);Q<ve;Ce=this.U(Ce),Q++)for(Xe=this.Ua(Ce),Ne=0;Ne<q;Ne++)Ve=ee.eg(Xe*q+Ne),U.pr(Q*q+Ne,Ve)}d.hn(L,U),v.write(u,g)}d.PJ(b),d.QJ(v),d.Pc(16777215)}else if(u==550){for(C=d.description,d.resize(g),M=0,$=C.Aa;M<$;M++){for(L=C.kd(M),q=m.ra.Va(L),U=d.ub(L),ee=this.vb.ub(L),Q=0,fe=this.Ob(a),Ie=this.Ja(fe),Ce=this.Xa(fe);Q<Ie;Ce=this.U(Ce),Q++)for(Xe=this.Ua(Ce),Ne=0;Ne<q;Ne++)Ve=ee.eg(Xe*q+Ne),U.pr(Q*q+Ne,Ve);d.hn(L,U)}d.Pc(16777215)}return d},h.prototype.BB=function(a){for(var u=this.Ob(a);u!=-1;u=this.Zq(u));u=this.PR(a);var d=this.ue(a);u!=-1?this.OJ(u,d):this.ld=d,d!=-1?this.SJ(d,u):this.qw=u,this.OQ(a)},h.prototype.Ig=function(a,u){return u===void 0?this.$E(a,m.ee.og()):this.$E(a,u)},h.prototype.$E=function(a,u){return a=this.uU(a),this.vb==null?this.vb=this.Il=new m.de(u):this.Il.Jl(u),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=a:(this.SJ(a,this.qw),this.OJ(this.qw,a)),this.qw=a},h.prototype.ue=function(a){return this.cd.T(a,1)},h.prototype.PR=function(a){return this.cd.T(a,0)},h.prototype.ic=function(a){return 2147483647&this.cd.T(a,2)},h.prototype.HJ=function(a,u,d){u=this.wk[u],(a=this.JF(a))>=u.size&&u.resize(Math.max(m.O.truncate(1.25*a),16),-1),u.write(a,d)},h.prototype.KF=function(a,u){return(a=this.JF(a))<(u=this.wk[u]).size?u.read(a):-1},h.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var a=0;a<this.wk.length;a++)if(this.wk[a]==null)return this.wk[a]=m.Yc.Oh(0),a;return this.wk.push(m.Yc.Oh(0)),this.wk.length-1},h.prototype.xW=function(a){this.wk[a]=null},h.prototype.Ob=function(a){return this.cd.T(a,3)},h.prototype.kv=function(a){return this.cd.T(a,4)},h.prototype.I=function(a){return this.cd.T(a,5)},h.prototype.da=function(a){return this.cd.T(a,6)},h.prototype.Gp=function(a,u,d){for(var g=0,v=this.ld;v!=-1;v=this.ue(v)){var b=this.ic(v);if(m.aa.Hc(b)&&(!d||b==1736)){b=this.ic(v)==1736;for(var C=this.Ob(v);C!=-1;){for(var M=0,$=this.Xa(C);M<m.O.truncate(this.Ja(C)/2);){var L=this.U($);if(L==-1)break;var q=this.Ua($),U=this.Sh(q);U!=null?q=U.Qb():(U=this.Ua(L),q=this.vb.yr(q,U)),q<=a?(q==0?g==0&&(g=-1):g=1,L!=this.rj(C)&&(this.lC(L,$),this.pd(L,!0))):$=this.U($),M++}for(M=this.Xa(C),$=this.dc(C)?M:this.rj(C);0<this.Ja(C);){if((L=this.Ma($))==-1){this.pd($,!0),g==0&&(g=-1);break}var ee=this.Ua(L);if((U=this.Sh(ee))!=null?q=U.Qb():(q=this.Ua($),q=this.vb.yr(q,ee)),q<=a)q==0?g==0&&(g=-1):g=1,this.lC(L,$),this.pd(L,!1),M==L&&(M=this.Xa(C));else if(($=this.Ma($))==M)break}$=this.Ja(C),u&&(b?3>$:2>$)?(C=this.Zq(C),g=0<$?1:g==0?-1:g):C=this.Rb(C)}}}return g},h.prototype.lC=function(a,u){var d=this.Ua(a),g=this.Ua(u);if(this.Sg!=null&&(d=this.Sg.read(d),this.Sg.write(g,d)),this.bi!=null){for(g=0,d=this.bi.length;g<d;g++)if(this.bi[g]!=null){var v=this.Pa(a,g);v!=-1&&this.Ra(u,g,v)}}},h.prototype.Ul=function(a,u,d){var g=0,v=this.U(a);if(v==-1)throw m.i.Qa();for(var b=this.Ua(a),C=this.Ua(v),M=this.Sh(b),$=M==null?this.vb.yr(b,C):M.Qb(),L=0;L<d;L++){var q=u[L];if(0<q&&1>q){var U=q;M!=null&&(U=0<$?M.Ux(q)/$:0),this.vb.kD(b,C,U,this.nm());var ee=this.wj(this.bd(a),v,this.nm());if(g++,M!=null){var Q=M.dl(0,q);U=this.Ua(this.Ma(ee)),this.Xg(U,Q),this.mf(ee,Q.wc()),L!=d-1&&u[L+1]!=1||(q=M.dl(q,1),this.Xg(U,q))}}}return g},h.prototype.LX=function(a,u,d){var g=0,v=this.U(a);if(v==-1)throw m.i.fa("internal error");var b=this.Ua(a),C=this.Ua(v),M=this.Sh(b),$=M==null?this.vb.yr(b,C):M.Qb(),L=0;a=this.bd(a);for(var q=0;q<d;q++){var U=u[q];if(L<U&&1>U){var ee=U;if(M!=null&&(ee=0<$?M.Ux(U)/$:0),this.vb.kD(b,C,ee,this.nm()),ee=this.yS(a,v,this.nm()),g++,M!=null){L=M.dl(L,U);var Q=this.Ua(this.Ma(ee));this.Xg(Q,L),this.Cb(ee,L.pa,L.la),q!=d-1&&u[q+1]!=1||(L=M.dl(U,1),ee=this.Ua(ee),this.Xg(ee,L))}}L=U}return g},h.prototype.yS=function(a,u,d){var g=u!=-1?this.Ma(u):this.rj(a),v=g!=-1?this.U(g):-1,b=this.oI(d==null?this.fd:-1),C=this.Ua(b);return d!=null&&this.vb.Ht(C,d),this.aj(b,a),this.Bc(b,v),this.Cc(b,g),v!=-1&&this.Cc(v,b),g!=-1&&this.Bc(g,b),d=this.dc(a),g=this.Xa(a),u==-1&&this.Wg(a,b),u==g&&(d&&g!=-1||this.Jf(a,b)),d&&v==-1&&(this.Bc(b,b),this.Cc(b,b)),this.Vj(a,this.Ja(a)+1),a=this.Qf(a),this.Tj(a,this.I(a)+1),b},h.prototype.uE=function(a,u,d){var g=this.Ua(u),v=this.Ua(d);if(0>g||v>this.fd-1)throw m.i.N("invalid call");if(g>v&&!this.dc(a))throw m.i.N("cannot iterate across an open path");for(a=0;u!=d;u=this.U(u))g=this.Ua(u),(v=this.Sh(g))!=null?a+=v.Qb():(v=this.Ua(this.U(u)),a+=this.vb.yr(g,v));return a},h.prototype.Dh=function(a,u){var d=this.Ua(a);this.vb.Ht(d,u),(d=this.Sh(d))!=null&&d.setStart(u),(a=this.Ma(a))!=-1&&(a=this.Ua(a),this.Sh(a)!=null&&d.setEnd(u))},h.prototype.Vi=function(a,u){a=this.Ua(a),this.vb.ve(a,u)},h.prototype.mf=function(a,u){this.Cb(a,u.x,u.y)},h.prototype.Cb=function(a,u,d){var g=this.Ua(a);this.vb.Cb(g,u,d),(g=this.Sh(g))!=null&&g.ZB(u,d),(a=this.Ma(a))!=-1&&(a=this.Ua(a),this.Sh(a)!=null&&g.Ql(u,d))},h.prototype.D=function(a,u){this.vb.D(this.td.T(a,0),u)},h.prototype.Gc=function(a,u){this.vb.za[0].tc(2*this.td.T(a,0),u)},h.prototype.Na=function(a){var u=new m.h;return this.vb.D(this.td.T(a,0),u),u},h.prototype.dG=function(a,u){this.it.tc(2*a,u)},h.prototype.Uc=function(a,u,d){return this.vb.Uc(a,this.Ua(u),d)},h.prototype.setAttribute=function(a,u,d,g){this.vb.setAttribute(a,this.Ua(u),d,g)},h.prototype.Ua=function(a){return this.td.T(a,0)},h.prototype.ih=function(){var a=new m.h;return this.D(void 0,a),a.y},h.prototype.fq=function(a,u){a=this.Ua(a),u=this.Ua(u);var d=this.vb.za[0].o;return d[2*a]===d[2*u]&&d[2*a+1]===d[2*u+1]},h.prototype.Dv=function(a,u){a=this.Ua(a);var d=this.vb.za[0].o;return d[2*a]===u.x&&d[2*a+1]===u.y},h.prototype.vX=function(a,u){if(1>u&&(u=1),this.Sg==null){if(u==1)return;this.Sg=m.Yc.Dn(this.vb.I(),1)}(a=this.Ua(a))>=this.Sg.size&&this.Sg.resize(a+1,1),this.Sg.write(a,u)},h.prototype.cG=function(a){return a=this.Ua(a),this.Sg==null||a>=this.Sg.size?1:this.Sg.read(a)},h.prototype.Ra=function(a,u,d){u=this.bi[u],a=this.Ua(a),u.size<this.vb.I()&&u.resize(this.vb.I(),-1),u.write(a,d)},h.prototype.Pa=function(a,u){return(a=this.Ua(a))<(u=this.bi[u]).size?u.read(a):-1},h.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var a=0;a<this.bi.length;a++)if(this.bi[a]==null)return this.bi[a]=m.Yc.Oh(0,-1),a;return this.bi.push(m.Yc.Oh(0,-1)),this.bi.length-1},h.prototype.Td=function(a){this.bi[a]=null},h.prototype.bc=function(a){return this.We!=null?(a=this.Ua(a),this.We[a]):null},h.prototype.ed=function(a,u){var d=this.td.T(a,2);if(d==-1)return!1;if(this.fA){var g=new m.Sa;this.Vi(a,g),u.setStart(g),this.Vi(d,g),u.setEnd(g)}else this.vb.Gc(this.td.T(a,0),Ai),u.em(0,Ai),this.vb.Gc(this.td.T(d,0),Ai),u.em(1,Ai);return!0},h.prototype.mW=function(a,u,d){if(this.fA){var g=new m.Sa;this.Vi(a,g),d.setStart(g),this.Vi(u,g),d.setEnd(g)}else this.vb.Gc(a,Ai),d.em(0,Ai),this.vb.Gc(u,Ai),d.em(1,Ai)},h.prototype.vf=function(a,u){if(u!=-1){if(a!=this.Qf(u))throw m.i.Qa();var d=this.cs(u)}else d=this.kv(a);var g=this.wU(a);return u!=-1&&this.bp(u,g),this.ap(g,u),this.bp(g,d),d!=-1?this.ap(d,g):this.Zo(a,g),u==-1&&this.$o(a,g),this.Rl(a,this.da(a)+1),g},h.prototype.nG=function(a,u,d,g){a=this.vf(a,-1);for(var v=0,b=u,C=!1;b==d&&(C=!0),this.aj(b,a),v++,(b=this.U(b))!=u;);return this.kn(a,!0),this.Vj(a,v),C&&(u=d),this.Jf(a,u),this.Wg(a,this.Ma(u)),this.cp(a,!1),g!=null&&(g[0]=C),a},h.prototype.Zq=function(a){var u=this.cs(a),d=this.Rb(a),g=this.Qf(a);return u!=-1?this.ap(u,d):this.Zo(g,d),d!=-1?this.bp(d,u):this.$o(g,u),this.AO(a),this.Rl(g,this.da(g)-1),this.sF(a),d},h.prototype.AO=function(a){var u=this.Xa(a);if(u!=-1){for(var d=0,g=this.Ja(a);d<g;d++){var v=u;u=this.U(u),this.Vy(v)}u=this.Qf(a),this.Tj(u,this.I(u)-this.Ja(a))}this.Vj(a,0)},h.prototype.Rb=function(a){return this.md.T(a,2)},h.prototype.cs=function(a){return this.md.T(a,1)},h.prototype.Ja=function(a){return this.md.T(a,3)},h.prototype.dc=function(a){return!!(1&this.Sp(a))},h.prototype.kn=function(a,u){if(this.dc(a)!=u){if(0<this.Ja(a)){var d=this.Xa(a),g=this.rj(a);u?(this.Bc(g,d),this.Cc(d,g),d=this.Ua(g)):(this.Bc(g,-1),this.Cc(d,-1),d=this.Ua(g)),this.Xg(d,null)}this.VB(a,(1|this.Sp(a))-1|(u?1:0))}},h.prototype.Qf=function(a){return this.md.T(a,7)},h.prototype.YS=function(a){return!!(2&this.Sp(a))},h.prototype.PB=function(a,u){this.VB(a,(2|this.Sp(a))-2|(u?2:0))},h.prototype.wz=function(a){if(this.cT(a))return this.Oi.get(this.qv(a));var u=new m.yb,d=this.Xa(a);if(d==-1)return 0;var g=new m.h;this.D(d,g);for(var v=0,b=0,C=this.Ja(a);b<C;b++,d=this.U(d)){var M=this.bc(d);if(M==null){if(!this.ed(d,u))continue;M=u}v+=M.Tx(g.x,g.y)}return this.cp(a,!0),this.Oi.set(this.qv(a),v),v},h.prototype.gr=function(a,u,d){u=this.Ck[u],a=this.qv(a),u.size<this.Oi.size&&u.resize(this.Oi.size,-1),u.write(a,d)},h.prototype.sj=function(a,u){return(a=this.qv(a))<(u=this.Ck[u]).size?u.read(a):-1},h.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var a=0;a<this.Ck.length;a++)if(this.Ck[a]==null)return this.Ck[a]=m.Yc.Oh(0),a;return this.Ck.push(m.Yc.Oh(0)),this.Ck.length-1},h.prototype.CB=function(a){this.Ck[a]=null},h.prototype.ZT=function(a,u,d){if(d==-1)throw m.i.N();if(u!=d){var g=this.Rb(d),v=this.cs(d),b=this.Qf(d);v==-1?this.Zo(b,g):this.ap(v,g),g==-1?this.$o(b,v):this.bp(g,v),this.Tj(b,this.I(b)-this.Ja(d)),this.Rl(b,this.da(b)-1),v=u==-1?this.kv(a):this.cs(u),this.bp(d,v),this.ap(d,u),u==-1?this.$o(a,d):this.bp(u,d),v==-1?this.Zo(a,d):this.ap(v,d),this.Tj(a,this.I(a)+this.Ja(d)),this.Rl(a,this.da(a)+1),this.gx(d,a)}},h.prototype.ij=function(a,u){this.vb.ve(this.Ua(u),this.nm()),this.wj(a,-1,this.nm())},h.prototype.pd=function(a,u){var d=this.bd(a),g=this.Ma(a),v=this.U(a);g!=-1&&this.Bc(g,v);var b=this.Ja(d);if(a==this.Xa(d)&&this.Jf(d,1<b?v:-1),v!=-1&&this.Cc(v,g),a==this.rj(d)&&this.Wg(d,1<b?g:-1),g!=-1&&v!=-1){g=this.Ua(g);var C=this.Ua(v);u?(u=this.Sh(g))!=null&&(g=new m.h,this.vb.D(C,g),u.Qc(g)):(C=this.Ua(a),u=this.Sh(C),this.Xg(g,u),u!=null&&(g=this.vb.Na(g),u.Dc(g)))}return this.Vj(d,b-1),d=this.Qf(d),this.Tj(d,this.I(d)-1),this.Vy(a),v},h.prototype.Xa=function(a){return this.md.T(a,4)},h.prototype.rj=function(a){return this.md.T(a,5)},h.prototype.U=function(a){return this.td.T(a,2)},h.prototype.Ma=function(a){return this.td.T(a,1)},h.prototype.bd=function(a){return this.td.T(a,3)},h.prototype.fc=function(a,u){return this.wj(a,-1,u)},h.prototype.Yq=function(a){if(a===void 0)return this.Yq(!1);if(a instanceof p)return new p(a);var u,d=-1,g=-1,v=-1,b=0,C=!1;for(u=this.ld;u!=-1;u=this.ue(u))if(!a||m.aa.Hc(this.ic(u))){for(d=this.Ob(u);d!=-1;d=this.Rb(d))if(v=g=this.Xa(d),b=0,g!=-1){C=!0;break}if(C)break}return p.AP(this,u,d,g,v,b,a)},h.prototype.Oc=function(a){if(this.Il.Oc(a),this.We!=null)for(var u=0,d=this.We.length;u<d;u++)this.We[u]!=null&&this.We[u].Oc(a)},h.prototype.jr=function(a,u,d,g){g?this.NX(a,u,d):this.MX(a,u,d)},h.prototype.Cc=function(a,u){this.td.S(a,1,u)},h.prototype.Bc=function(a,u){this.td.S(a,2,u)},h.prototype.aj=function(a,u){this.td.S(a,3,u)},h.prototype.Vj=function(a,u){this.md.S(a,3,u)},h.prototype.Jf=function(a,u){this.md.S(a,4,u)},h.prototype.Wg=function(a,u){this.md.S(a,5,u)},h.prototype.Rl=function(a,u){this.cd.S(a,6,u)},h.prototype.Tj=function(a,u){this.cd.S(a,5,u)},h.prototype.pJ=function(a){var u=a;do{var d=this.U(u);this.Bc(u,this.Ma(u)),this.Cc(u,d),u=d}while(u!=a)},h.prototype.bC=function(a){this.fd=a},h.prototype.$q=function(a){var u=this.cs(a),d=this.Rb(a),g=this.Qf(a);u!=-1?this.ap(u,d):this.Zo(g,d),d!=-1?this.bp(d,u):this.$o(g,u),this.Jf(a,-1),this.Wg(a,-1),this.sF(a)},h.prototype.mi=function(a,u){var d=this.Ma(a),g=this.U(a);if(d!=-1&&this.Bc(d,g),g!=-1&&this.Cc(g,d),d!=-1&&g!=-1)if(d=this.Ua(d),g=this.Ua(g),u){if((u=this.Sh(d))!=null){var v=new m.h;this.vb.D(g,v),u.Qc(v)}}else u=this.Ua(a),u=this.Sh(u),this.Xg(d,u),u!=null&&(v=new m.h,this.vb.D(d,v),u.Dc(v));this.Vy(a)},h.prototype.cT=function(a){return!!(4&this.Sp(a))},h.prototype.cp=function(a,u){this.VB(a,(4|this.Sp(a))-4|(u?4:0))},h.prototype.nx=function(a,u){var d=this.td.o;this.vb.mc();var g=this.vb.za[0].o;a.Vd(0,u,function(v,b){var C=d[5*v];v=d[5*b],b=g[2*C],C=g[2*C+1];var M=g[2*v];return C<(v=g[2*v+1])?-1:C>v?1:b<M?-1:b>M?1:0})},h.prototype.jS=function(){for(var a=this.ld;a!=-1;a=this.ue(a))if(!m.aa.Hc(this.ic(a)))return!0;return!1},h.prototype.hC=function(a,u){for(var d=this.Ob(a),g=this.Ob(u),v=this.kv(a),b=this.kv(u),C=this.Ob(a);C!=-1;C=this.Rb(C))this.gx(C,u);for(C=this.Ob(u);C!=-1;C=this.Rb(C))this.gx(C,a);this.Zo(a,g),this.Zo(u,d),this.$o(a,b),this.$o(u,v),d=this.I(a),g=this.da(a),v=this.da(u),this.Tj(a,this.I(u)),this.Tj(u,d),this.Rl(a,v),this.Rl(u,g),d=this.cd.T(a,2),this.cd.S(a,2,this.cd.T(u,2)),this.cd.S(u,2,d)},h}(),m.gd=j})(ye||(ye={})),function(m){var j=function(T){function p(h,a,u,d){var g=T.call(this)||this;return g.$=new m.l,h===void 0?g.UE():typeof h=="number"?g.VO(h,a,u,d):h instanceof m.Sa?a!==void 0?g.Qu(h,a,u):g.WO(h):h instanceof m.ra?a!==void 0?g.YO(h,a):g.XO(h):h instanceof m.l?g.UO(h):g.UE(),g}return ri(p,T),p.prototype.Qu=function(h,a,u){this.description=m.ee.og(),this.$.Oa(),h.B()||this.tu(h,a,u)},p.prototype.UO=function(h){this.description=m.ee.og(),this.$.K(h),this.$.normalize()},p.prototype.XO=function(h){if(h==null)throw m.i.N();this.description=h,this.$.Oa()},p.prototype.YO=function(h,a){if(h==null)throw m.i.N();this.description=h,this.$.K(a),this.$.normalize()},p.prototype.UE=function(){this.description=m.ee.og(),this.$.Oa()},p.prototype.WO=function(h){this.description=m.ee.og(),this.$.Oa(),h.B()||this.tu(h)},p.prototype.VO=function(h,a,u,d){this.description=m.ee.og(),this.K(h,a,u,d)},p.prototype.K=function(h,a,u,d){if(this.vc(),typeof h=="number")this.$.K(h,a,u,d);else for(this.Oa(),a=0,u=h.length;a<u;a++)this.Zb(h[a])},p.prototype.Xo=function(h){if(this.vc(),!h.fT())throw m.i.N();this.$.K(h)},p.prototype.Oa=function(){this.vc(),this.$.Oa()},p.prototype.B=function(){return this.$.B()},p.prototype.R=function(){return this.$.R()},p.prototype.ca=function(){return this.$.ca()},p.prototype.gk=function(){return this.$.gk()},p.prototype.Jp=function(){return this.$.Jp()},p.prototype.Ip=function(){return this.$.sf()},p.prototype.Zb=function(h){if(h instanceof m.h)this.vc(),this.$.Zb(h);else if(h instanceof m.l)this.vc(),this.$.Zb(h);else if(h instanceof m.Sa){if(this.vc(),!h.Ac()){var a=h.description;if(this.description!=a&&this.Jl(a),this.B())this.tu(h);else{this.$.Zb(h.D());for(var u=1,d=a.Aa;u<d;u++)for(var g=a.Ed(u),v=m.ra.Va(g),b=0;b<v;b++){var C=h.Uc(g,b),M=this.Tg(g,b);M.Zb(C),this.setInterval(g,b,M)}}}}else if(h instanceof p&&!h.B())for((a=h.description)!=this.description&&this.Jl(a),this.$.Zb(h.$),u=1,d=a.Aa;u<d;u++)for(g=a.kd(u),v=m.ra.Va(g),b=0;b<v;b++)C=h.Tg(g,b),(M=this.Tg(g,b)).Zb(C),this.setInterval(g,b,M)},p.prototype.tu=function(h,a,u){if(a!==void 0){this.$.K(h.D(),a,u),u=1;for(var d=(a=h.description).Aa;u<d;u++)for(var g=a.Ed(u),v=m.ra.Va(g),b=0;b<v;b++){var C=h.Uc(g,b);this.setInterval(g,b,C,C)}}else for(this.$.K(h.ka[0],h.ka[1]),u=1,d=(a=h.description).Aa;u<d;u++)for(g=a.Ed(u),v=m.ra.Va(g),b=0;b<v;b++)C=h.Uc(g,b),this.setInterval(g,b,C,C)},p.prototype.setInterval=function(h,a,u,d){if(u=typeof u=="number"?new m.Nc(u,d):u,this.vc(),h==0)if(a==0)this.$.v=u.oa,this.$.C=u.va;else{if(a!=1)throw m.i.ce();this.$.G=u.oa,this.$.H=u.va}else this.vD(0,h,a,u.oa),this.vD(1,h,a,u.va)},p.prototype.W=function(h,a){this.vc(),this.$.W(h,a)},p.prototype.Oc=function(h){if(h instanceof m.Dd)this.vc(),h.mC(this.$);else if(this.vc(),!this.$.B()){var a=new m.OK;this.Qo(a),a.XS()?a.Oa():h.mC(a)}},p.prototype.copyTo=function(h){if(h.getType()!=this.getType())throw m.i.N();if(h.vc(),h.description=this.description,h.$.K(this.$),h.ka=null,this.ka!=null){h.ou();for(var a=0;a<2*(this.description.Ae.length-2);a++)h.ka[a]=this.ka[a]}},p.prototype.Ia=function(){return new p(this.description)},p.prototype.Ke=function(){return this.$.wF()},p.prototype.Qb=function(){return this.$.yR()},p.prototype.getType=function(){return 197},p.prototype.Db=function(){return 2},p.prototype.bn=function(h){this.copyTo(h)},p.prototype.A=function(h){h.v=this.$.v,h.G=this.$.G,h.C=this.$.C,h.H=this.$.H},p.prototype.Qo=function(h){h.v=this.$.v,h.G=this.$.G,h.C=this.$.C,h.H=this.$.H,h.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},p.prototype.Tg=function(h,a){var u=new m.Nc;return u.K(this.Od(0,h,a),this.Od(1,h,a)),u},p.prototype.Hf=function(h,a){a.Nf(this.description);var u=this.description.Aa-1;switch(h){case 0:for(h=0;h<u;h++)for(var d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(0,d,v));a.Cb(this.$.v,this.$.G);break;case 1:for(h=0;h<u;h++)for(d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(1,d,v));a.Cb(this.$.v,this.$.H);break;case 2:for(h=0;h<u;h++)for(d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(0,d,v));a.Cb(this.$.C,this.$.H);break;case 3:for(h=0;h<u;h++)for(d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(1,d,v));a.Cb(this.$.C,this.$.G);break;default:throw m.i.ce()}},p.prototype.mB=function(h,a){h=this.$.mB(h),a.ma(h.x,h.y)},p.prototype.kR=function(h,a){return a*(h.Oq-2)},p.prototype.xF=function(h,a,u){if(this.$.B())throw m.i.fa("empty geometry");if(a==0)return h!=0?u!=0?this.$.H:this.$.C:u!=0?this.$.G:this.$.v;if(u>=m.ra.Va(a))throw m.i.N();var d=this.description.Pf(a);return this.ou(),0<=d?this.ka[this.kR(this.description,h)+this.description.LR(d)-2+u]:m.ra.se(a)},p.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var h=p.Gg(this.description,0),a=p.Gg(this.description,1),u=0,d=1,g=this.description.Aa;d<g;d++){var v=this.description.kd(d),b=m.ra.Va(v);v=m.ra.se(v);for(var C=0;C<b;C++)this.ka[h+u]=v,this.ka[a+u]=v,u++}}},p.prototype.sn=function(h){if(this.ka!=null)if(2<h.Ae.length){for(var a=m.ee.Iw(h,this.description),u=[],d=p.Gg(this.description,0),g=p.Gg(this.description,1),v=p.Gg(h,0),b=p.Gg(h,1),C=0,M=1,$=h.Aa;M<$;M++){var L=h.kd(M),q=m.ra.Va(L);if(a[M]==-1){var U=m.ra.se(L);for(L=0;L<q;L++)u[v+C]=U,u[b+C]=U,C++}else for(U=this.description.$j(a[M])-2,L=0;L<q;L++)u[v+C]=this.ka[d+U],u[b+C]=this.ka[g+U],C++,U++}this.ka=u}else this.ka=null;this.description=h},p.prototype.Od=function(h,a,u){if(this.$.B())throw m.i.fa("This operation was performed on an Empty Geometry.");if(a==0)return h!=0?u!=0?this.$.H:this.$.C:u!=0?this.$.G:this.$.v;if(u>=m.ra.Va(a))throw m.i.ce();var d=this.description.Pf(a);return 0<=d?(this.ou(),this.ka[p.Gg(this.description,h)+this.description.$j(d)-2+u]):m.ra.se(a)},p.prototype.vD=function(h,a,u,d){if(this.vc(),a==0)h!=0?u!=0?this.$.H=d:this.$.C=d:u!=0?this.$.G=d:this.$.v=d;else{if(u>=m.ra.Va(a))throw m.i.ce();if(!this.hasAttribute(a)){if(m.ra.DG(a,d))return;this.re(a)}a=this.description.Pf(a),this.ou(),this.ka[p.Gg(this.description,h)+this.description.$j(a)-2+u]=d}},p.Gg=function(h,a){return a*(h.Ae.length-2)},p.prototype.Ea=function(h){this.vc();var a=new m.l;return h.A(a),this.$.Ea(a)},p.prototype.isIntersecting=function(h){return h instanceof m.l?this.$.isIntersecting(h):this.$.isIntersecting(h.$)},p.prototype.Ju=function(h,a){this.vc(),h.B()?this.Oa():a!==void 0?this.tu(h,a):this.$.Ju(h.Lg(),h.ih())},p.prototype.offset=function(h,a){this.vc(),this.$.offset(h,a)},p.prototype.normalize=function(){this.vc(),this.$.normalize()},p.prototype.sf=function(h){if(h===void 0){if(h=new m.Sa(this.description),this.B())return h;for(a=this.description.Aa,u=1;u<a;u++)for(d=this.description.Ed(u),g=m.ra.Va(d),v=0;v<g;v++)b=.5*(this.Od(0,d,v)+this.Od(1,d,v)),h.setAttribute(d,v,b);return h.Cb(this.$.gk(),this.$.Jp()),h}if(h.Nf(this.description),this.B())h.Oa();else{for(var a=this.description.Aa,u=1;u<a;u++)for(var d=this.description.kd(u),g=m.ra.Va(d),v=0;v<g;v++){var b=.5*(this.xF(0,d,v)+this.xF(1,d,v));h.setAttribute(d,v,b)}h.Cb(this.$.sf())}},p.prototype.mz=function(){return new m.Sa(this.$.mz())},p.prototype.contains=function(h){return h instanceof m.Sa?!h.B()&&this.$.contains(h.Lg(),h.ih()):this.$.contains(h.$)},p.prototype.dP=function(h){return this.$.contains(h)},p.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof p)||this.description!=h.description)return!1;if(this.B())return!!h.B();if(!this.$.Nb(h.$))return!1;for(var a=0,u=2*(this.description.Ae.length-2);a<u;a++)if(this.ka[a]!=h.ka[a])return!1;return!0},p.prototype.cc=function(){var h=this.description.cc();if(h=m.O.Th(h,this.$.cc()),!this.B()&&this.ka!=null)for(var a=0,u=2*(this.description.Ae.length-2);a<u;a++)h=m.O.Th(h,this.ka[a]);return h},p.prototype.es=function(){return this.$.v},p.prototype.gs=function(){return this.$.G},p.prototype.ds=function(){return this.$.C},p.prototype.fs=function(){return this.$.H},p.prototype.mg=function(){return m.pi.gm(this,null)},p.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},p}(m.aa);m.Fh=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){p===void 0?this.Oa():(this.v=p,this.G=h,this.C=a,this.H=u)}return T.construct=function(p,h,a,u){var d=new T;return d.v=p,d.G=h,d.C=a,d.H=u,d},T.prototype.K=function(p,h,a,u){typeof p=="number"?a!==void 0?(this.v=p,this.G=h,this.C=a,this.H=u,this.normalize()):(this.v=p,this.G=h,this.C=p,this.H=h):p instanceof m.h?h!==void 0?(this.v=p.x-.5*h,this.C=this.v+h,this.G=p.y-.5*a,this.H=this.G+a,this.normalize()):(this.v=p.x,this.G=p.y,this.C=p.x,this.H=p.y):p instanceof T?this.K(p.v,p.G,p.C,p.H):p instanceof m.Nc&&(p.B()||h.B()?this.Oa():(this.v=p.oa,this.C=p.va,this.G=h.oa,this.H=h.va))},T.prototype.Zw=function(p,h){if(h!==void 0)if(h==0)this.Oa();else{this.v=p[0].x,this.G=p[0].y,this.C=this.v,this.H=this.G;for(var a=1;a<h;a++){var u=p[a];u.x<this.v?this.v=u.x:u.x>this.C&&(this.C=u.x),u.y<this.G?this.G=u.y:u.y>this.H&&(this.H=u.y)}}else if(p==null||p.length==0)this.Oa();else for(u=p[0],this.K(u.x,u.y),a=1;a<p.length;a++)h=p[a],this.Lk(h.x,h.y)},T.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},T.prototype.B=function(){return isNaN(this.v)},T.prototype.Zb=function(p,h){typeof p=="number"?this.B()?(this.v=p,this.G=h,this.C=p,this.H=h):(this.v>p?this.v=p:this.C<p&&(this.C=p),this.G>h?this.G=h:this.H<h&&(this.H=h)):p instanceof m.h||p instanceof m.Nd?this.Zb(p.x,p.y):p instanceof T&&!p.B()&&(this.Zb(p.v,p.G),this.Zb(p.C,p.H))},T.prototype.Lk=function(p,h){this.v>p?this.v=p:this.C<p&&(this.C=p),this.G>h?this.G=h:this.H<h&&(this.H=h)},T.prototype.W=function(p,h){this.B()||(this.v-=p,this.C+=p,this.G-=h,this.H+=h,(this.v>this.C||this.G>this.H)&&this.Oa())},T.prototype.scale=function(p){0>p&&this.Oa(),this.B()||(this.v*=p,this.C*=p,this.G*=p,this.H*=p)},T.prototype.zoom=function(p,h){this.B()||this.K(this.sf(),p*this.R(),h*this.ca())},T.prototype.isIntersecting=function(p){return!this.B()&&!p.B()&&(this.v<=p.v?this.C>=p.v:p.C>=this.v)&&(this.G<=p.G?this.H>=p.G:p.H>=this.G)},T.prototype.HG=function(p){return(this.v<=p.v?this.C>=p.v:p.C>=this.v)&&(this.G<=p.G?this.H>=p.G:p.H>=this.G)},T.prototype.Ea=function(p){return!this.B()&&!p.B()&&(p.v>this.v&&(this.v=p.v),p.C<this.C&&(this.C=p.C),p.G>this.G&&(this.G=p.G),p.H<this.H&&(this.H=p.H),(p=this.v<=this.C&&this.G<=this.H)||this.Oa(),p)},T.prototype.mB=function(p){switch(p){case 0:return m.h.construct(this.v,this.G);case 1:return m.h.construct(this.v,this.H);case 2:return m.h.construct(this.C,this.H);case 3:return m.h.construct(this.C,this.G);default:throw m.i.ce()}},T.prototype.nB=function(p){if(p==null||4>p.length)throw m.i.N();p[0]!=null?p[0].ma(this.v,this.G):p[0]=m.h.construct(this.v,this.G),p[1]!=null?p[1].ma(this.v,this.H):p[1]=m.h.construct(this.v,this.H),p[2]!=null?p[2].ma(this.C,this.H):p[2]=m.h.construct(this.C,this.H),p[3]!=null?p[3].ma(this.C,this.G):p[3]=m.h.construct(this.C,this.G)},T.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},T.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},T.prototype.gk=function(){return(this.C+this.v)/2},T.prototype.Jp=function(){return(this.H+this.G)/2},T.prototype.R=function(){return this.C-this.v},T.prototype.ca=function(){return this.H-this.G},T.prototype.move=function(p,h){this.B()||(this.v+=p,this.G+=h,this.C+=p,this.H+=h)},T.prototype.Ju=function(p,h){if(h!==void 0)this.move(p-this.gk(),h-this.Jp());else if(p instanceof m.h)this.Ju(p.x,p.y);else{if(!(p instanceof m.Sa))throw m.i.N();h=(this.C-this.v)/2;var a=(this.H-this.G)/2;this.v=p.Lg()-h,this.C=p.Lg()+h,this.G=p.ih()-a,this.H=p.ih()+a}},T.prototype.offset=function(p,h){this.v+=p,this.C+=p,this.G+=h,this.H+=h},T.prototype.normalize=function(){if(!this.B()){var p=Math.min(this.v,this.C),h=Math.max(this.v,this.C);this.v=p,this.C=h,p=Math.min(this.G,this.H),h=Math.max(this.G,this.H),this.G=p,this.H=h}},T.prototype.dn=function(p){p.ma(this.v,this.G)},T.prototype.$I=function(p){p.ma(this.C,this.G)},T.prototype.cJ=function(p){p.ma(this.v,this.H)},T.prototype.en=function(p){p.ma(this.C,this.H)},T.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},T.prototype.sf=function(){return m.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},T.prototype.mz=function(){return m.h.construct(this.v,this.G)},T.prototype.contains=function(p,h){if(h!==void 0)return p>=this.v&&p<=this.C&&h>=this.G&&h<=this.H;if(p instanceof m.Sa)return this.contains(p.Lg(),p.ih());if(p instanceof m.h)return this.contains(p.x,p.y);if(p instanceof T)return p.v>=this.v&&p.C<=this.C&&p.G>=this.G&&p.H<=this.H;throw m.i.N()},T.prototype.hm=function(p,h){if(h!==void 0)return p>this.v&&p<this.C&&h>this.G&&h<this.H;if(p instanceof m.h)return this.hm(p.x,p.y);if(p instanceof T)return p.v>this.v&&p.C<this.C&&p.G>this.G&&p.H<this.H;throw m.i.N()},T.prototype.Nb=function(p){return p==this||p instanceof T&&(!(!this.B()||!p.B())||this.v==p.v&&this.G==p.G&&this.C==p.C&&this.H==p.H)},T.prototype.cc=function(){var p=this.v;p=m.O.truncate(p^p>>>32);var h=m.O.Th(p);return p=this.C,p=m.O.truncate(p^p>>>32),h=m.O.Th(p,h),p=this.G,p=m.O.truncate(p^p>>>32),h=m.O.Th(p,h),p=this.H,p=m.O.truncate(p^p>>>32),m.O.Th(p,h)},T.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},T.prototype.zy=function(p,h){var a=this.Zj(p),u=this.Zj(h);if(a&u)return 0;if(!(a|u))return 4;var d=(a!=0?1:0)|(u!=0?2:0);do{var g=h.x-p.x,v=h.y-p.y;if(g>v?a&T.YC?(a&T.ju?(p.y+=v*(this.v-p.x)/g,p.x=this.v):(p.y+=v*(this.C-p.x)/g,p.x=this.C),a=this.Zj(p)):u&T.YC?(u&T.ju?(h.y+=v*(this.v-h.x)/g,h.x=this.v):(h.y+=v*(this.C-h.x)/g,h.x=this.C),u=this.Zj(h)):a!=0?(a&T.ku?(p.x+=g*(this.G-p.y)/v,p.y=this.G):(p.x+=g*(this.H-p.y)/v,p.y=this.H),a=this.Zj(p)):(u&T.ku?(h.x+=g*(this.G-h.y)/v,h.y=this.G):(h.x+=g*(this.H-h.y)/v,h.y=this.H),u=this.Zj(h)):a&T.ZC?(a&T.ku?(p.x+=g*(this.G-p.y)/v,p.y=this.G):(p.x+=g*(this.H-p.y)/v,p.y=this.H),a=this.Zj(p)):u&T.ZC?(u&T.ku?(h.x+=g*(this.G-h.y)/v,h.y=this.G):(h.x+=g*(this.H-h.y)/v,h.y=this.H),u=this.Zj(h)):a!=0?(a&T.ju?(p.y+=v*(this.v-p.x)/g,p.x=this.v):(p.y+=v*(this.C-p.x)/g,p.x=this.C),a=this.Zj(p)):(u&T.ju?(h.y+=v*(this.v-h.x)/g,h.x=this.v):(h.y+=v*(this.C-h.x)/g,h.x=this.C),u=this.Zj(h)),a&u)return 0}while(a|u);return d},T.prototype.Zj=function(p){return(p.x<this.v?1:0)|(p.x>this.C?1:0)<<1|(p.y<this.G?1:0)<<2|(p.y>this.H?1:0)<<3},T.prototype.Bi=function(p){return!this.B()&&(this.R()<=p||this.ca()<=p)},T.prototype.tb=function(p){return p instanceof m.h?Math.sqrt(this.iK(p)):Math.sqrt(this.px(p))},T.prototype.px=function(p){var h=0,a=0,u=this.v-p.C;return u>h&&(h=u),(u=this.G-p.H)>a&&(a=u),(u=p.v-this.C)>h&&(h=u),(u=p.G-this.H)>a&&(a=u),h*h+a*a},T.prototype.iK=function(p){var h=0,a=0,u=this.v-p.x;return u>h&&(h=u),(u=this.G-p.y)>a&&(a=u),(u=p.x-this.C)>h&&(h=u),(u=p.y-this.H)>a&&(a=u),h*h+a*a},T.prototype.cn=function(p){this.B()?p.Oa():p.K(this.v,this.C)},T.ju=1,T.ku=4,T.YC=3,T.ZC=12,T}();m.l=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.initialize=0]="initialize",T[T.initializeRed=1]="initializeRed",T[T.initializeBlue=2]="initializeBlue",T[T.initializeRedBlue=3]="initializeRedBlue",T[T.sweep=4]="sweep",T[T.sweepBruteForce=5]="sweepBruteForce",T[T.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",T[T.sweepRedBlue=7]="sweepRedBlue",T[T.sweepRed=8]="sweepRed",T[T.sweepBlue=9]="sweepBlue",T[T.iterate=10]="iterate",T[T.iterateRed=11]="iterateRed",T[T.iterateBlue=12]="iterateBlue",T[T.iterateBruteForce=13]="iterateBruteForce",T[T.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",T[T.resetRed=15]="resetRed",T[T.resetBlue=16]="resetBlue";var p=function(){function h(a,u){this.ci=a,this.dH=u}return h.prototype.nr=function(a,u,d){this.ci.JX(d,a,u,this.dH)},h.prototype.$p=function(a){return this.ci.Rr(a,this.dH)},h}();j=function(){function h(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new m.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return h.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new m.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},h.prototype.ad=function(a,u){if(!this.Pv)throw m.i.Hb();var d=new m.l;d.K(u),this.fo.add(a),this.Eb.push(d)},h.prototype.Fp=function(){if(!this.Pv)throw m.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},h.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new m.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},h.prototype.JD=function(a,u){if(!this.Ov)throw m.i.Hb();var d=new m.l;d.K(u),this.fo.add(a),this.Eb.push(d)},h.prototype.iF=function(){if(!this.Ov)throw m.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},h.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new m.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},h.prototype.ED=function(a,u){if(!this.Nv)throw m.i.Hb();var d=new m.l;d.K(u),this.cw.add(a),this.qd.push(d)},h.prototype.hF=function(){if(!this.Nv)throw m.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},h.prototype.next=function(){if(this.Ic)return!1;for(var a=!0;a;)switch(this.Xb){case 0:a=this.Gz();break;case 1:a=this.rS();break;case 2:a=this.oS();break;case 3:a=this.qS();break;case 4:a=this.UX();break;case 5:a=this.QX();break;case 6:a=this.RX();break;case 7:a=this.SX();break;case 8:a=this.ux();break;case 9:a=this.iC();break;case 10:a=this.Uz();break;case 11:a=this.jT();break;case 12:a=this.gT();break;case 13:a=this.hT();break;case 14:a=this.iT();break;case 15:a=this.kJ();break;case 16:a=this.jJ();break;default:throw m.i.Qa()}return!this.Ic},h.prototype.aC=function(a){this.qa=a},h.prototype.uz=function(a){return this.Eb[a]},h.prototype.az=function(a){return this.qd[a]},h.prototype.nl=function(a){return this.fo.read(a)},h.prototype.hl=function(a){return this.cw.read(a)},h.Tz=function(a){return!(1&~a)},h.eq=function(a){return!(1&a)},h.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},h.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new m.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new m.ia(0)),this.rd.kr();for(var a=0;a<this.Eb.length;a++){var u=this.Eb[a];this.rd.Br(u.v,u.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),a=0;a<2*this.Eb.length;a++)this.Ld.add(a);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},h.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new m.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new m.ia(0)),this.rd.kr();for(var a=0;a<this.Eb.length;a++){var u=this.Eb[a];this.rd.Br(u.v,u.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),a=0;a<2*this.Eb.length;a++)this.Ld.add(a);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},h.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new m.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new m.ia(0)),this.ff.kr();for(var a=0;a<this.qd.length;a++){var u=this.qd[a];this.ff.Br(u.v,u.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),a=0;a<2*this.qd.length;a++)this.Ef.add(a);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},h.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new m.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new m.ia(0)),this.ff==null&&(this.ff=new m.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new m.ia(0)),this.rd.kr();for(var a=0;a<this.Eb.length;a++){var u=this.Eb[a];this.rd.Br(u.v,u.C)}for(this.rd.Fp(),this.ff.kr(),a=0;a<this.qd.length;a++)u=this.qd[a],this.ff.Br(u.v,u.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),a=0;a<2*this.Eb.length;a++)this.Ld.add(a);for(a=0;a<2*this.qd.length;a++)this.Ef.add(a);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},h.prototype.UX=function(){var a=this.Ld.get(--this.pe),u=a>>1;return h.eq(a)?(this.rd.remove(u),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[u].v,this.Eb[u].C,this.qa),this.Vf=u,this.Xb=10,!0)},h.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},h.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},h.prototype.SX=function(){var a=this.Ld.get(this.pe-1),u=this.Ef.get(this.Rg-1),d=this.Rr(a,!0),g=this.Rr(u,!1);return d>g?this.ux():d<g?this.iC():h.Tz(a)?this.ux():h.Tz(u)?this.iC():this.ux()},h.prototype.ux=function(){var a=this.Ld.get(--this.pe),u=a>>1;if(h.eq(a))return this.Df!=-1&&this.Ij.get(u)!=-1?(this.Ad.jd(this.Df,this.Ij.get(u)),this.Ij.set(u,-1)):this.rd.remove(u),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(a=this.Ad.rc(this.Cf);a!=-1;){var d=this.Ad.getData(a);this.ff.vj(d),this.Hj.set(d,-1),d=this.Ad.lb(a),this.Ad.jd(this.Cf,a),a=d}return 0<this.ff.size()?(this.ow.EB(this.Eb[u].v,this.Eb[u].C,this.qa),this.Vf=u,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new m.jp),this.Ij=new m.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(u,this.Ad.addElement(this.Df,u)),this.Xb=7),!0},h.prototype.iC=function(){var a=this.Ef.get(--this.Rg),u=a>>1;if(h.eq(a))return this.Cf!=-1&&this.Hj.get(u)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(u)),this.Hj.set(u,-1)):this.ff.remove(u),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(a=this.Ad.rc(this.Df);a!=-1;){var d=this.Ad.getData(a);this.rd.vj(d),this.Ij.set(d,-1),d=this.Ad.lb(a),this.Ad.jd(this.Df,a),a=d}return 0<this.rd.size()?(this.oo.EB(this.qd[u].v,this.qd[u].C,this.qa),this.Af=u,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new m.jp),this.Hj=new m.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(u,this.Ad.addElement(this.Cf,u)),this.Xb=7),!0},h.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var a=this.Ld.get(this.pe)>>1;return this.rd.vj(a),this.Xb=4,!0},h.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var a=this.Ef.get(this.Rg)>>1;return this.ff.vj(a),this.Xb=7,!0},h.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var a=this.Ld.get(this.pe)>>1;return this.rd.vj(a),this.Xb=7,!0},h.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var a=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(a)||(this.Af=this.Rg,!1)},h.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var a=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(a)||(this.Af=this.Rg,!1)},h.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},h.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},h.prototype.Kt=function(a,u,d){this.Am==null&&(this.Am=new m.Xt),d=new p(this,d),this.Am.sort(a,0,u,d)},h.prototype.JX=function(a,u,d,g){var v=this;a.Vd(u,d,function(b,C){var M=v.Rr(b,g),$=v.Rr(C,g);return M<$||M==$&&h.eq(b)&&h.Tz(C)?-1:1})},h.prototype.Rr=function(a,u){var d=.5*this.qa;return u?(u=this.Eb[a>>1],h.eq(a)?u.G-d:u.H+d):(u=this.qd[a>>1],h.eq(a)?u.G-d:u.H+d)},h}(),m.xC=j}(ye||(ye={})),function(m){var j=function(){function T(){}return T.construct=function(p,h,a,u,d,g){var v=new T;return v.v=p,v.G=h,v.Ye=a,v.C=u,v.H=d,v.Bg=g,v},T.prototype.Oa=function(){this.Ye=this.v=NaN},T.prototype.B=function(){return isNaN(this.v)},T.prototype.XS=function(){return isNaN(this.Ye)},T.prototype.K=function(p,h,a,u,d,g){u!==void 0?typeof p=="number"?(this.v=p,this.G=h,this.Ye=a,this.C=u,this.H=d,this.Bg=g):(this.v=p.x-.5*h,this.C=this.v+h,this.G=p.y-.5*a,this.H=this.G+a,this.Ye=p.z-.5*u,this.Bg=this.Ye+u):(this.v=p,this.G=h,this.Ye=a,this.C=p,this.H=h,this.Bg=a)},T.prototype.move=function(p){this.v+=p.x,this.G+=p.y,this.Ye+=p.z,this.C+=p.x,this.H+=p.y,this.Bg+=p.z},T.prototype.copyTo=function(p){p.v=this.v,p.G=this.G,p.C=this.C,p.H=this.H},T.prototype.Lk=function(p,h,a){this.v>p?this.v=p:this.C<p&&(this.C=p),this.G>h?this.G=h:this.H<h&&(this.H=h),isNaN(this.Ye)==0?this.Ye>a?this.Ye=a:this.Bg<a&&(this.Bg=a):this.Bg=this.Ye=a},T.prototype.Zb=function(p,h,a){if(typeof p=="number")this.B()?(this.v=p,this.G=h,this.Ye=a,this.C=p,this.H=h,this.Bg=a):this.Lk(p,h,a);else if(p instanceof m.Nd)this.Zb(p.x,p.y,p.z);else{if(!(p instanceof T))throw m.i.N();p.B()||(this.Zb(p.v,p.G,p.Ye),this.Zb(p.C,p.H,p.Bg))}},T.prototype.construct=function(p,h,a){p.B()||h.B()?this.Oa():(this.v=p.oa,this.C=p.va,this.G=h.oa,this.H=h.va,this.Ye=a.oa,this.Bg=a.va)},T.prototype.nB=function(p){if(p==null||8>p.length)throw m.i.N();p[0]=new m.Nd(this.v,this.G,this.Ye),p[1]=new m.Nd(this.v,this.H,this.Ye),p[2]=new m.Nd(this.C,this.H,this.Ye),p[3]=new m.Nd(this.C,this.G,this.Ye),p[4]=new m.Nd(this.v,this.G,this.Bg),p[5]=new m.Nd(this.v,this.H,this.Bg),p[6]=new m.Nd(this.C,this.H,this.Bg),p[7]=new m.Nd(this.C,this.G,this.Bg)},T.prototype.Zw=function(p){if(p==null||p.length==0)this.Oa();else{var h=p[0];for(this.K(h.x,h.y,h.z),h=1;h<p.length;h++){var a=p[h];this.Lk(a.x,a.y,a.z)}}},T}();m.OK=j}(ye||(ye={})),function(m){(function(j){j.Qa=function(){var T=Error();return T.message="Internal Error",T},j.Ie=function(){var T=Error();return T.message="Not Implemented",T},j.Xk=function(){var T=Error();return T.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",T},j.Hb=function(){var T=Error();return T.message="Invalid Call",T},j.N=function(T){var p=Error();return p.message="Illegal Argument Exception",T!==void 0&&(p.message+=": "+T),p},j.fu=function(T){var p=Error();return p.message=T!==void 0?"Runtime Exception: "+T:"Runtime Exception.",p},j.fa=function(T){var p=Error();return p.message="Geometry Exception: "+T,p},j.GK=function(){var T=Error();return T.message="Assert Failed Exception",T},j.ce=function(){var T=Error();return T.message="IndexOutOfBoundsException",T},j.WC=function(){var T=Error();return T.message="UserCancelException",T}})(m.i||(m.i={}))}(ye||(ye={})),function(m){(m=m.bm||(m.bm={}))[m.forward=0]="forward",m[m.reverse=1]="reverse"}(ye||(ye={})),function(m){var j=function(){function h(a,u){this.Wa=a,this.FH=u,this.LH=-1,this.sl=!1}return h.prototype.qe=function(){},h.prototype.next=function(){if(++this.LH==this.FH.I())return null;var a=this.FH.Na(this.LH);a.scale(this.Wa.ec);var u=new m.Da;return this.Wa.sy(a,this.sl,u),u},h.prototype.La=function(){return 0},h}(),T=function(){function h(a,u,d){this.Wa=a,this.rw=u,this.Xn=!1,this.co=d,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new m.Da,this.uk=[]}return h.prototype.qe=function(){},h.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var a=m.aa.jg(this.qq);return m.Fg.Mk(a,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}a=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var u=this.uk.length=0,d=new m.h,g=new m.h,v=[0];this.sd.Ha()&&8>this.FA;){var b=this.sd.ha();if(d.L(b.ac()),g.L(b.wc()),d.scale(this.Wa.ec),g.scale(this.Wa.ec),m.cj.Mu(d,g)?d.x=g.x:m.cj.Ku(d,g)&&(g.x=d.x),this.uk.length=0,m.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,d,g,this.Wa.QA,this.Wa.Zs,v,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(b=this.uk.slice(0),this.co.qG(this.co.da()-1,b,b.length-1)),m.cj.Lu(d,g)?(this.qq.Oa(),this.Wa.sy(d,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(v[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}a==null&&(a=new m.Da).Yk(null,0),this.OD(a),u++}if(this.bw[0]=0,0<u){for(v=this.sd.wb();0<u;)this.sd.li(),d.L(this.rw.Na(this.sd.wb())),g.L(this.rw.Na(this.sd.ik())),d.scale(this.Wa.ec),g.scale(this.Wa.ec),this.sl&&(m.cj.Mu(d,g)?d.x=g.x:m.cj.Ku(d,g)&&(g.x=d.x)),this.uk.length=0,m.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,g,d,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(a),u--;return d.L(this.rw.Na(this.sd.wb())),d.scale(this.Wa.ec),p.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,d,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,a,NaN,NaN),this.sd.Vb(v),this.sd.ha(),u=m.ta.kj(null,a,!0),m.Fg.Mk(a,u,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),a=m.aa.jg(this.qq),m.Fg.Mk(a,this.Wa.Aq,!0,!0,this.Wa.Ub)},h.prototype.OD=function(a){var u=this.uk[0],d=this.Nj[0]-1.570796326794897,g=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var v=this.di+1.570796326794897;d=v+3.141592653589793-(this.di-this.Nj[0])}else d=(v=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var b=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),C=!1;if(Math.abs(d-v)<=.5*this.Wa.ao)if(b){var M=a.Na(a.I()-2);M.scale(this.Wa.ec);var $=new m.ga(0);for(m.kb.Xy(this.Wa.Tb,this.Wa.kc,u.x,u.y,M.x,M.y,$),M=$.u;M<=v;)M+=6.283185307179586;for(;M>v;)M-=6.283185307179586;M<d&&(C=!0)}else C=!0;C?(a.DB(0,a.I()-1),this.sl||((u=new m.h).L(a.Na(a.I()-1)),u.scale(this.Wa.ec),-3.141592653589793>u.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<u.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),b||(d=.5*(d+v))):(b?((v=new m.h).L(u),v.scale(1/this.Wa.ec),a.wf(0,-1,v)):p.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],v,d,this.Wa.ao,this.sl,this.sk,a,NaN,NaN),this.FA+=1)}p.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,d,g,this.sl,this.sk,a),this.di=this.Gs[0]},h.prototype.xy=function(a,u){return this.Wa.xy(this.uk,a,this.Nj[0],this.Gs[0],this.sl,u)},h.prototype.La=function(){return 0},h}(),p=function(){function h(){}return h.buffer=function(a,u,d,g,v,b){if(a==null)throw m.i.N("Geometry::Geodesic_bufferer::buffer");if(a.B())return new m.Da(a.description);var C=new h;C.Qg=u,C.Jc=m.cb.sc(u);var M=m.cb.vv(C.Jc);if(C.Ub=b,C.Tb=m.cb.ev(C.Jc),C.kc=M*(2-M),C.ec=C.Jc.Hd().ai,C.qa=C.Qg.Kn(),C.Aq=C.Jc.Kn(),C.Zs=C.Aq*C.ec,C.zq=1.570796326794897/C.ec,C.OY=3.141592653589793/C.ec,C.Js=6.283185307179586/C.ec,C.PY=C.Js/6,C.LA=0,C.NY=1.5707963267948966*C.Tb/C.LA,d==4?(C.ze=2,C.Wv=!0):(C.ze=d,C.Wv=!1),C.Ka=g,C.rb=Math.abs(g),isNaN(v)||.001>v?C.xX():C.$n=v,d=a.getType(),m.aa.yd(d)?((d=new m.Ta(a.description)).oc(a,!0),a=d,d=1607):d==197&&(d=new m.l,a.A(d),d.R()<=C.qa||d.ca()<=C.qa?((d=new m.Ta(a.description)).ad(a,!1),a=d,d=1607):((d=new m.Da(a.description)).ad(a,!1),a=d,d=1736)),C.yX(),m.aa.Rn(d)||C.zX(),C.rb<=.5*C.$n)return d!=1736?new m.Da(a.description):C.Wv?a:m.cj.Qr(a,C.Qg,C.ze,C.QA,-1,b);if(0>C.Ka&&d!=1736)return new m.Da(a.description);if(C.Wv&&m.aa.Hc(d)?(u=m.cj.Qr(a,u,4,NaN,C.$n,b),a=m.cb.zh(u,C.Qg,C.Jc)):a=m.cb.zh(a,C.Qg,C.Jc),(a=m.Hh.lj(a,C.Jc)).B())return new m.Da(a.description);switch(!C.Wv&&m.aa.Hc(d)&&(a=m.cj.pI(C.ec,a)),a=h.KX(a,C.Jc),d){case 1736:u=C.UN(a);break;case 1607:u=C.VN(a);break;case 550:u=C.SN(a);break;case 33:u=C.TN(a);break;default:throw m.i.fa("corrupted_geometry")}return(C=m.cb.zh(u,C.Jc,C.Qg)).Jl(a.description),C},h.prototype.UN=function(a){var u=new m.Da;a=new T(this,a,u),a=m.Gh.local().V(a,this.Jc,this.Ub).next(),a=m.ip.nj(a,this.Jc,2);var d=new m.Dd;return d.scale(1/this.ec,1/this.ec),u.Oc(d),u=m.ip.nj(u,this.Jc,2),0<=this.Ka?m.Gh.local().V(u,a,this.Jc,this.Ub):m.kp.local().V(u,a,this.Jc,this.Ub)},h.prototype.VN=function(a){return a=new T(this,a,null),a=m.Gh.local().V(a,this.Jc,this.Ub).next(),m.ip.nj(a,this.Jc,2)},h.prototype.SN=function(a){return a=new j(this,a),a=m.Gh.local().V(a,this.Jc,this.Ub).next(),m.ip.nj(a,this.Jc,2)},h.prototype.TN=function(a){(a=a.D()).scale(this.ec);var u=new m.Da;return this.sy(a,!1,u),m.ip.nj(u,this.Jc,2)},h.prototype.xy=function(a,u,d,g,v,b){var C=a[0],M=a[a.length-1],$=C.y>M.y?C.y:M.y,L=m.F.q(this.Tb,this.kc,C.y<M.y?C.y:M.y);if($=m.F.q(this.Tb,this.kc,$),.001<this.LA-(L+u+this.rb)&&.001<this.LA+($-u-this.rb))return!1;L=(u=d-1.570796326794897)-3.141592653589793,$=u+3.141592653589793;var q=(d=g+1.570796326794897)+3.141592653589793,U=[NaN],ee=[NaN],Q=[NaN],ge=[NaN];if(g=!1,h.dJ(this.Tb,this.kc,this.rb,C,u,L,M,d,U,ee),h.dJ(this.Tb,this.kc,this.rb,M,q,d,C,L,Q,ge),(d<U[0]&&U[0]<q||d<ee[0]&&ee[0]<q)&&(g=!0),g||(L<Q[0]&&Q[0]<u||L<ge[0]&&ge[0]<u)&&(g=!0),!g&&v)return!1;for(var ve=[],fe=a.length-1;0<=fe;fe--)ve.push(a[fe]);return b.Oa(),b.Yk(null,0),fe=[0],h.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,a,u,d,v,fe,b),h.Hr(this.Tb,this.kc,this.ec,this.rb,M,d,q,this.ao,v,fe,b,U[0],ee[0]),h.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,ve,q,$,v,fe,b),h.Hr(this.Tb,this.kc,this.ec,this.rb,C,L,u,this.ao,v,fe,b,Q[0],ge[0]),a=!1,v||(a=this.IE(this.ec,b)),g||a},h.prototype.sy=function(a,u,d){d.Oa(),d.Yk(null,0),h.Hr(this.Tb,this.kc,this.ec,this.rb,a,-this.ao,6.283185307179586,this.ao,u,[0],d,NaN,NaN),u||this.IE(this.ec,d)},h.prototype.IE=function(a,u){var d=this.vO(a,u);return a=this.wO(a,u),d||a},h.prototype.vO=function(a,u){var d=u.I(),g=!1,v=new m.l;if(u.A(v),!m.s.Y(v.H*a,1.570796326794897)&&!m.s.Y(v.G*a,-1.570796326794897))return!1;var b=new m.h;for(--d;0<=d;d--)u.D(d,b),(b.y==v.H&&m.s.Y(b.y*a,1.570796326794897)||b.y==v.G&&m.s.Y(b.y*a,-1.570796326794897))&&(g=!0,this.OI(b,d,u));return g},h.prototype.wO=function(a,u){var d=u.Na(0),g=u.Na(u.I()-1);return 3.141592653589793<Math.abs(d.x-g.x)*a?(this.VV(u),!0):this.uO(u)},h.prototype.uO=function(a){return 0>a.Ke()&&(this.UV(a),!0)},h.prototype.OI=function(a,u,d){var g=d.I(),v=0<u?u-1:g-1;if(g=d.Na(u<g-1?u+1:0),v=d.Na(v),!m.s.Y(g.y,a.y)&&!m.s.Y(g.x,a.x)){var b=new m.h;b.ma(g.x,a.y),d.Cb(u,b)}m.s.Y(v.y,a.y)||m.s.Y(v.x,a.x)||((g=new m.h).ma(v.x,a.y),d.wf(0,u,g))},h.prototype.VV=function(a){var u=new m.Da,d=new m.Da,g=new m.Dd,v=a.Na(0),b=a.Na(a.I()-1),C=new m.h;v.x>b.x?(b=this.zq,g.gg(-this.Js,0)):(b=-this.zq,g.gg(this.Js,0)),u.add(a,!1),a.Oa(),d.add(u,!1),d.Oc(g),v=new m.l,d.A(v),v.W((this.Js-v.R())/2,0),v.G=-this.zq,v.H=this.zq;for(var M=0;M<d.I();M++)d.D(M,C),u.wf(0,-1,C);for(d.Oc(g),M=0;M<d.I();M++)d.D(M,C),u.wf(0,-1,C);d=u.Na(0),g=u.Na(u.I()-1),C.ma(g.x,b),u.wf(0,-1,C),C.ma(.5*(g.x+d.x),b),u.wf(0,-1,C),C.ma(d.x,b),u.wf(0,-1,C),u=m.Hh.ks(u,this.Jc,2,!0,v.v),u=m.Hh.ks(u,this.Jc,2,!0,v.C),u=m.Ud.clip(u,v,this.Aq,NaN),a.add(u,!1)},h.prototype.UV=function(a){var u=new m.l;a.A(u),u.W((this.Js-u.R())/2,0),u.G=-this.zq,u.H=this.zq,a.Yk(null,0);var d=new m.h;d.ma(u.v,u.G),a.wf(1,-1,d),d.ma(u.v,u.H),a.wf(1,-1,d),d.ma(.5*(u.v+u.C),u.H),a.wf(1,-1,d),d.ma(u.C,u.H),a.wf(1,-1,d),d.ma(u.C,u.G),a.wf(1,-1,d),d.ma(.5*(u.v+u.C),u.G),a.wf(1,-1,d)},h.qy=function(a,u,d,g,v,b,C,M,$,L,q){var U=null;$||((U=new m.h).Rc(),0<q.I()&&(U.L(q.Na(q.I()-1)),U.scale(d)));var ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0),ve=new m.h,fe=new m.h,Ce=b[b.length-1];d=1/d;for(var Ie=0;Ie<b.length;Ie++){var Ne=b[Ie];if(Ie==0)var Ve=C;else Ie==b.length-1?Ve=M:(m.kb.wd(a,u,Ce.x,Ce.y,Ne.x,Ne.y,null,null,ee,v),Ve=ee.u-1.570796326794897);m.kb.yi(a,u,Ne.x,Ne.y,g,Ve,Q,ge),$?fe.ma(Q.u,ge.u):(ve.ma(Q.u,ge.u),h.gJ(Ne.x,ve.x,U.x,L),fe.ma(L[0]+ve.x,ve.y),U.L(fe)),fe.scale(d),q.wf(0,-1,fe)}},h.Hr=function(a,u,d,g,v,b,C,M,$,L,q,U,ee){if(!(C-b<M)){var Q=new m.ga(0),ge=new m.ga(0),ve=new m.h,fe=new m.h,Ce=null;$||((Ce=new m.h).Rc(),0<q.I()&&(Ce.L(q.Na(q.I()-1)),Ce.scale(d)));var Ie=m.O.truncate(Math.ceil(b/M)),Ne=Ie++*M;for(Ne==b&&(Ne=Ie++*M),d=1/d;Ne<C+M&&(b<U&&U<Ne?(Ne=U,Ie--):b<ee&&ee<Ne&&(Ne=ee,Ie--),!(Ne>=C));)m.kb.yi(a,u,v.x,v.y,g,Ne,Q,ge),$?fe.ma(Q.u,ge.u):(ve.ma(Q.u,ge.u),h.gJ(v.x,ve.x,Ce.x,L),fe.ma(L[0]+ve.x,ve.y),Ce.L(fe)),fe.scale(d),q.wf(0,-1,fe),b=Ne,Ne=Ie++*M}},h.dJ=function(a,u,d,g,v,b,C,M,$,L){var q=new m.h,U=new m.h,ee=new m.ga(0),Q=new m.ga(0);for(m.kb.yi(a,u,g.x,g.y,d,v,ee,Q),q.ma(ee.u,Q.u),m.kb.yi(a,u,g.x,g.y,d,b,ee,Q),U.ma(ee.u,Q.u),d=new m.ga(0),m.kb.Xy(a,u,C.x,C.y,q.x,q.y,d),$[0]=d.u,m.kb.Xy(a,u,C.x,C.y,U.x,U.y,d),L[0]=d.u;$[0]<=L[0];)$[0]+=6.283185307179586;for(;$[0]>L[0];)$[0]-=6.283185307179586;for(;$[0]>=M;)$[0]-=6.283185307179586,L[0]-=6.283185307179586;for(;$[0]<M;)$[0]+=6.283185307179586,L[0]+=6.283185307179586},h.gJ=function(a,u,d,g){if(isNaN(d)){for(;3.141592653589793<g[0]+u-a;)g[0]-=6.283185307179586;for(;3.141592653589793<a-(g[0]+u);)g[0]+=6.283185307179586}else 3.141592653589793<g[0]+u-d?g[0]-=6.283185307179586:3.141592653589793<d-(g[0]+u)&&(g[0]+=6.283185307179586)},h.KX=function(a,u){var d=a.getType(),g=m.aa.Hc(d)?a.da():d==550?a.I():1;if(g==1)return a;var v=new m.ia(0);v.resize(g);for(var b=[],C=new m.l,M=0;M<g;M++){if(v.write(M,M),m.aa.Hc(d)){a.Rj(M,C);var $=C.sf()}else $=a.Na(M);$=m.XK.$X(u,$),b[M]=$}for(v.Vd(0,v.size,function(L,q){return b[L]<b[q]?-1:b[L]>b[q]?1:0}),u=a.Ia(),M=0;M<g;M++)C=v.read(M),m.aa.Hc(d)?u.addPath(a,C,!0):u.Fd(a,C,C+1);return u},h.prototype.yX=function(){var a=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);a=Math.min(a,.39269908169872414*this.Tb);var u=new m.h;u.ma(0,10*this.ec);var d=45*this.ec,g=new m.ga(0),v=new m.ga(0),b=new m.ga(0),C=new m.ga(0),M=new m.ga(0),$=new m.ga(0),L=new m.ga(0),q=new m.ga(0),U=new m.h,ee=new m.h,Q=new m.h,ge=new m.h;m.kb.yi(this.Tb,this.kc,u.x,u.y,a,0,g,v),U.ma(g.u,v.u),m.kb.yi(this.Tb,this.kc,u.x,u.y,a,d,b,C),ee.ma(b.u,C.u),g=new m.ga(0),v=new m.ga(0);for(var ve=new m.ga(0);m.kb.yi(this.Tb,this.kc,u.x,u.y,a,.5*(0+d),M,$),Q.ma(M.u,$.u),m.kb.wd(this.Tb,this.kc,U.x,U.y,ee.x,ee.y,g,v,null,2),m.kb.oj(this.Tb,this.kc,U.x,U.y,.5*g.u,v.u,L,q,2),ge.ma(L.u,q.u),m.kb.wd(this.Tb,this.kc,Q.x,Q.y,ge.x,ge.y,ve,null,null,2),!(ve.u<=this.$n);)d*=.9,m.kb.yi(this.Tb,this.kc,u.x,u.y,a,d,b,C),ee.ma(b.u,C.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(d-0))},h.prototype.zX=function(){var a=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);a=Math.min(a,.39269908169872414*this.Tb);var u=new m.h,d=new m.h;u.ma(0,10*this.ec),d.ma(10*this.ec,10*this.ec);var g=new m.ga(0),v=new m.ga(0),b=new m.ga(0);m.kb.wd(this.Tb,this.kc,u.x,u.y,d.x,d.y,b,g,v,this.ze);var C=new m.ga(0),M=new m.ga(0),$=new m.ga(0),L=new m.ga(0),q=new m.h,U=new m.ga(0),ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0),ve=new m.ga(0),fe=new m.ga(0),Ce=new m.ga(0),Ie=new m.ga(0),Ne=new m.ga(0),Ve=new m.h,Xe=new m.h,et=new m.h,dt=new m.h,ct=1;g=g.u,v=v.u+1.570796326794897,b=b.u,m.kb.yi(this.Tb,this.kc,u.x,u.y,a,g-1.570796326794897,ee,Q),Ve.ma(ee.u,Q.u),m.kb.yi(this.Tb,this.kc,d.x,d.y,a,v,ge,ve),Xe.ma(ge.u,ve.u),ee=new m.ga(0),Q=new m.ga(0),v=new m.ga(0);for(var mt=new m.ga(0);m.kb.oj(this.Tb,this.kc,u.x,u.y,.5*(0+ct)*b,g,C,M,this.ze),q.ma(C.u,M.u),m.kb.wd(this.Tb,this.kc,u.x,u.y,q.x,q.y,null,null,U,this.ze),m.kb.yi(this.Tb,this.kc,q.x,q.y,a,U.u+1.570796326794897,fe,Ce),et.ma(fe.u,Ce.u),m.kb.wd(this.Tb,this.kc,Ve.x,Ve.y,Xe.x,Xe.y,ee,Q,null,2),m.kb.oj(this.Tb,this.kc,Ve.x,Ve.y,.5*ee.u,Q.u,Ie,Ne,2),dt.ma(Ie.u,Ne.u),m.kb.wd(this.Tb,this.kc,et.x,et.y,dt.x,dt.y,v,null,null,2),!(v.u<=this.$n);)ct*=.9,m.kb.oj(this.Tb,this.kc,u.x,u.y,ct*b,g,$,L,this.ze),d.ma($.u,L.u),m.kb.wd(this.Tb,this.kc,u.x,u.y,d.x,d.y,null,null,mt,this.ze),m.kb.yi(this.Tb,this.kc,d.x,d.y,a,mt.u+1.570796326794897,ge,ve),Xe.ma(ge.u,ve.u);1e5<(a=ct*b)&&(a=1e5),this.QA=a},h.prototype.xX=function(){var a=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/a&&(a=this.rb/500),.01>a&&(a=.01),this.$n=a},h}();m.VK=p}(ye||(ye={})),function(m){var j=function(){function T(){}return T.Mf=function(p,h){var a=new m.h;a.L(h),p.push(a)},T.up=function(p,h){p.add(h.x),p.add(h.y)},T.hB=function(p){p.Bh(p.size-2)},T.oB=function(p,h){h.ma(p.get(p.size-2),p.get(p.size-1))},T.Qr=function(p,h,a,u,d,g){if(p==null)throw m.i.N();var v=p.getType();if(p.B()||m.aa.Rn(v))return p;var b=new T;b.Qg=h,b.Jc=m.cb.sc(h);var C=m.cb.vv(b.Jc);if(b.Ub=g,b.Tb=m.cb.ev(b.Jc),b.kc=C*(2-C),b.ec=b.Jc.Hd().ai,b.Aq=b.Jc.Kn(),b.Zs=b.Aq*b.ec,b.AA=u,b.zA=d,b.ze=a,v==197?(a=new m.Da(p.description)).ad(p,!1):m.aa.yd(v)?(a=new m.Ta(p.description)).oc(p,!0):a=p,b.ze!=4){if((h=b.Qg.Nb(b.Jc)==0?m.cb.zh(a,b.Qg,b.Jc):m.Hh.lj(a,b.Jc)).B())return h;h=T.pI(b.ec,h),h=b.Zy(h),h=m.ip.nj(h,b.Jc,b.ze),b=m.cb.zh(h,b.Jc,b.Qg)}else{if(m.Eg.Sb(h)==2?(p=m.cb.ml(),(h=m.Xj.local().V(a,p,h,g))==p&&(h=new m.Da,p.copyTo(h))):h=m.Hh.lj(a,b.Jc),h.B())return h;b=b.CX(h)}return b},T.pI=function(p,h){var a=new m.l;if(h.xc(a),3.141592653589793>a.R()*p)return h;var u=!1;a=h.Ga();for(var d=new m.h,g=new m.h;a.$a();)for(;a.Ha();){var v=a.ha();if(d.L(v.ac()),g.L(v.wc()),d.scale(p),g.scale(p),3.141592653589793<Math.abs(d.x-g.x)){var b=T.Lu(d,g);if(!b){u=!0;break}if(6.283185307179586<Math.abs(d.x-g.x)){u=!0;break}}}if(!u)return h;u=h.Ia();var C=1<h.description.Aa,M=new m.h,$=new m.h,L=new m.h,q=new m.h,U=new m.Sa;for(a.Zi();a.$a();)for(var ee=NaN,Q=[0];a.Ha();){if(v=a.ha(),d.L(v.ac()),g.L(v.wc()),d.scale(p),g.scale(p),isNaN(ee)?(T.Wi(d.x,NaN,Q),$.L(d)):$.L(L),ee=$.x,b=T.Lu(d,g)){if(6.283185307179586<g.x-d.x)for(;6.283185307179586<g.x-d.x;)g.x-=6.283185307179586;if(-6.283185307179586>g.x-d.x)for(;-6.283185307179586>g.x-d.x;)g.x+=6.283185307179586;T.Wi(g.x,NaN,Q),L.L(g)}else M.L(g),T.AU(M),T.Wi(M.x,ee,Q),L.ma(Q[0]+M.x,M.y);.5>Math.abs(L.x-g.x)&&L.L(g),C?(v.Tw(0,U),q.L($),q.scale(1/p),U.Cb(q),(b=a.vm())?u.nf(U):u.lineTo(U),a.Qn()&&!h.dc(a.gb)&&(v.Tw(1,U),q.L(L),q.scale(1/p),U.Cb(q),u.lineTo(U))):((b=a.vm())&&u.Hz(null,0),v=u.da()-1,q.L($),q.scale(1/p),u.wf(v,-1,q),a.Qn()&&!h.dc(a.gb)&&(q.L(L),q.scale(1/p),u.wf(v,-1,q)))}return u},T.tF=function(p,h,a,u,d,g,v,b,C,M,$,L){var q=new m.h,U=new m.h,ee=0<u.compare(d);T.fJ(ee,u,d,q,U),T.uF(p,h,a,q,U,g,NaN,v,b,C,M,null,$,L),ee&&T.fC(C,M,null,$)},T.prototype.Zy=function(p){var h=p.Ia(),a=p.Ga(),u=[],d=null,g=null,v=1<p.description.Aa;v&&(d=new m.be(0),g=new m.ig);for(var b=[0],C=new m.h,M=new m.h,$=new m.h,L=new m.h;a.$a();)for(b[0]=0;a.Ha();){var q=a.ha();C.L(q.ac()),M.L(q.wc()),C.scale(this.ec),M.scale(this.ec);var U=0<C.compare(M);T.fJ(U,C,M,$,L),u.length=0,d!=null&&d.Bh(0),0<this.AA?T.uF(this.Tb,this.kc,this.ze,$,L,this.AA,this.zA,this.Zs,null,null,null,v?d:null,u,b):T.aR(this.Tb,this.kc,this.ze,$,L,this.zA,this.Zs,v?d:null,u,b),U&&T.fC(null,null,v?d:null,u),u[0].L(q.ac()),u[u.length-1].L(q.wc());for(var ee=1;ee<u.length-1;ee++)u[ee].scale(1/this.ec);v?(U=T.eJ(U,q,g),T.TD(a.vm(),a.Qn()&&!p.dc(a.gb),q,U,d,u,h)):T.SD(a.vm(),a.Qn()&&!p.dc(a.gb),u,h)}return h},T.prototype.CX=function(p){var h=p.Ia(),a=p.Ga(),u=[],d=null,g=new m.ig,v=1<p.description.Aa;for(v&&(d=new m.be(0));a.$a();)for(;a.Ha();){var b=a.ha(),C=b.ac(),M=b.wc();C=0<C.compare(M),M=T.eJ(C,b,g),u.length=0,d!=null&&d.Bh(0),T.BX(this.Tb,this.kc,this.ec,M,this.Qg,this.AA,this.zA,v?d:null,u),C&&T.fC(null,null,v?d:null,u),v?T.TD(a.vm(),a.Qn()&&!p.dc(a.gb),b,M,d,u,h):T.SD(a.vm(),a.Qn()&&!p.dc(a.gb),u,h)}return h},T.SD=function(p,h,a,u){p&&u.Hz(null,0),p=u.da()-1;var d=a.slice(0);u.qG(p,d,d.length-1),h&&u.wf(p,-1,a[a.length-1])},T.TD=function(p,h,a,u,d,g,v){var b=new m.Sa;if(a.To(b),p?v.nf(b):v.lineTo(b),2<g.length){p=u.Qb();for(var C=1;C<g.length-1;C++){var M=u.NG(d.get(C)*p);u.Tw(M,b),b.Cb(g[C]),v.lineTo(b)}}h&&(a.Po(b),v.lineTo(b))},T.uF=function(p,h,a,u,d,g,v,b,C,M,$,L,q,U){var ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0);m.kb.wd(p,h,u.x,u.y,d.x,d.y,ge,ee,Q,a),ge=ge.u;var ve=ee=ee.u;0>ve&&(ve+=6.283185307179586),0>(Q=Q.u)&&(Q+=6.283185307179586),C!=null&&(C[0]=ge),M!=null&&(M[0]=ve),$!=null&&($[0]=Q),M=C=NaN,L!=null&&(C=((M=m.F.Ah(p,h))-($=m.F.q(p,h,u.y)))/ge,M=(M+$)/ge),$=T.Mu(u,d),Q=T.Ku(u,d),ve=$||Q;var fe=T.FE(u,d,b),Ce=new m.ga(0),Ie=new m.ga(0),Ne=new m.h,Ve=new m.h,Xe=new m.h;T.Wi(u.x,NaN,U);var et=[U[0]];if(ge<=g)T.Mf(q,u),T.Wi(d.x,NaN,U),L!=null&&L.add(0),ve?($&&T.kB(u,d,L,q),Q&&T.iB(u,d,L,q)):fe?T.jB(u,d,ee,C,M,L,q):0<v&&(Ve.ma(u.x-et[0],u.y),Ne.ma(d.x-U[0],d.y),T.Yy(p,h,a,u,ge,ee,Ve,Ne,0,1,v,L,q,et)),T.Mf(q,d);else{var dt=ge/((g=1+m.O.truncate(Math.ceil(ge/g)))-1),ct=new m.h,mt=0;T.Mf(q,u),ct.L(u),Ve.ma(u.x-U[0],u.y),L!=null&&L.add(0);for(var lt=1;lt<g;lt++){if(lt<g-1){m.kb.oj(p,h,u.x,u.y,lt*dt,ee,Ce,Ie,a),Ne.ma(Ce.u,Ie.u),T.Wi(Ne.x,ct.x,U),Xe.ma(U[0]+Ne.x,Ne.y);var gi=lt/(g-1)}else T.Wi(d.x,NaN,U),Ne.ma(d.x-U[0],d.y),Xe.L(d),gi=1;ve?(lt==1&&$&&T.kB(u,Xe,L,q),lt==g-1&&Q&&T.iB(ct,d,L,q)):fe?T.EE(ct,Xe,b)&&(u.x<d.x?ct.x>Xe.x&&(U[0]+=6.283185307179586,Xe.ma(U[0]+Ne.x,Ne.y)):ct.x<Xe.x&&(U[0]-=6.283185307179586,Xe.ma(U[0]+Ne.x,Ne.y)),T.jB(ct,Xe,ee,C,M,L,q)):0<v&&T.Yy(p,h,a,u,ge,ee,Ve,Ne,mt,gi,v,L,q,et),T.Mf(q,Xe),L!=null&&L.add(gi),ct.L(Xe),Ve.L(Ne),et[0]=U[0],mt=gi}}},T.aR=function(p,h,a,u,d,g,v,b,C,M){var $=new m.ga(0),L=new m.ga(0),q=new m.ga(0);m.kb.wd(p,h,u.x,u.y,d.x,d.y,q,$,L,a),L=q.u,$=$.u;var U=q=NaN;if(b!=null){U=m.F.Ah(p,h);var ee=m.F.q(p,h,u.y);q=(U-ee)/L,U=(U+ee)/L}ee=T.Mu(u,d);var Q=T.Ku(u,d),ge=ee||Q;v=T.FE(u,d,v);var ve=T.Lu(u,d);ve=ge||v||ve,T.Wi(u.x,NaN,M);var fe=new m.h;T.Mf(C,u),fe.L(u),b!=null&&b.add(0),ve?(ge?(ee&&T.kB(u,d,b,C),Q&&T.iB(u,d,b,C)):v&&T.jB(u,d,$,q,U,b,C),T.Wi(d.x,NaN,M),T.Mf(C,d)):L<=g?(T.Wi(d.x,NaN,M),T.Mf(C,d)):(q=new m.h,v=new m.h,q.L(u),v.L(d),q.x-=M[0],v.x-=M[0],-3.141592653589793>v.x?v.x+=6.283185307179586:3.141592653589793<v.x&&(v.x-=6.283185307179586),T.Yy(p,h,a,u,L,$,q,v,0,1,g,b,C,M),T.Mf(C,d),T.Wi(d.x,NaN,M)),b!=null&&b.add(1)},T.Yy=function(p,h,a,u,d,g,v,b,C,M,$,L,q,U){var ee=new m.h,Q=new m.h;ee.ma(v.x+U[0],v.y),new m.ga(0),new m.ga(0),new m.ga(0),new m.ga(0);var ge=new m.ga(0),ve=new m.ga(0),fe=new m.ga(0),Ce=new m.h,Ie=new m.h,Ne=new m.h,Ve=new m.h;Ce.L(v),Ie.L(b),v=new m.be(0),b=new m.be(0),T.up(v,Ie),b.add(M);var Xe=new m.h,et=new m.yb,dt=[];for(T.YJ(4,dt);0<v.size;){for(var ct,mt=!1,lt=NaN,gi=0;3>gi;gi++)if(ct=dt[gi]*M+(1-dt[gi])*C,m.kb.oj(p,h,u.x,u.y,ct*d,g,ge,ve,a),Ne.ma(ge.u,ve.u),gi==0&&(lt=ct,Ve.L(Ne)),T.WW(Ce,Ne,Ie,et),et.hc(et.fe(Ne,!0),Xe),m.kb.wd(p,h,Ne.x,Ne.y,Xe.x,Xe.y,fe,null,null,2),fe.u>$){mt=!0;break}mt?(Ie.L(Ve),M=lt,T.up(v,Ie),b.add(M)):(T.hB(v),b.En(b.size-1,1,b.size-1),0<v.size&&(T.Wi(Ie.x,ee.x,U),Q.ma(U[0]+Ie.x,Ie.y),T.Mf(q,Q),ee.L(Q),L!=null&&L.add(M),Ce.L(Ie),C=M,T.oB(v,Ie),M=b.get(b.size-1)))}},T.BX=function(p,h,a,u,d,g,v,b,C){var M=new m.h,$=new m.h,L=new m.h,q=new m.h,U=new m.h,ee=new m.h,Q=new m.h,ge=new m.h,ve=new m.h,fe=new m.h,Ce=new m.ga(0),Ie=new m.ga(0),Ne=new m.h,Ve=[[],[]],Xe=m.Eg.Sb(d)==1;d=d.Xd(0);var et=u.ac(),dt=u.wc();Xe?(ee.ma(et.x*a,et.y*a),Q.ma(dt.x*a,dt.y*a)):(Ve[0][0]=et.x,Ve[0][1]=et.y,Ve[1][0]=dt.x,Ve[1][1]=dt.y,m.cb.vt(),ee.x=Ve[0][0]*a,ee.y=Ve[0][1]*a,Q.x=Ve[1][0]*a,Q.y=Ve[1][1]*a);var ct=0,mt=0,lt=1,gi=u.Pn();M.L(et),$.L(dt),dt=new m.be(0);var oi=new m.be(0),Ni=new m.be(0);T.up(dt,$),T.up(oi,Q),Ni.add(lt),T.Mf(C,M),b!=null&&b.add(mt);var Qi=[],xn=0<v?gi?5:3:gi?5:1;T.YJ(xn,Qi);for(var ln=new m.ga(0),Oi=new m.ga(0),ui=new m.ga(0),Kt=new m.ga(0),Wn=new m.ga(0),In=new m.ga(0),tr=new m.ga(0);0<oi.size;){var wi=!1,ns=NaN;for(m.kb.wd(p,h,ee.x,ee.y,Q.x,Q.y,ln,Oi,null,2),et=0;et<xn&&!(et==0&&(!gi&&0>=v&&ln.u<=g&&3.141592653589793>Math.abs(ee.x-Q.x)||u.Ux(mt,lt)<=d));et++){var rn=Qi[et]*lt+(1-Qi[et])*mt;if(u.hc(rn,L),Xe?ge.ma(L.x*a,L.y*a):(Ve[0][0]=L.x,Ve[0][1]=L.y,m.cb.vt(),ge.x=Ve[0][0]*a,ge.y=Ve[0][1]*a),et==0&&(ns=rn,U.L(L),fe.L(ge),0<g&&(ln.u>g||3.141592653589793<=Math.abs(ee.x-Q.x)))){wi=!0;break}if(gi&&0<g){if(m.kb.wd(p,h,ee.x,ee.y,ge.x,ge.y,ui,null,null,2),ui.u>g||3.141592653589793<=Math.abs(ee.x-ge.x)){wi=!0;break}}else if(0<v){if(gi?(q.NS(M,$,Qi[et]),Xe?ve.ma(q.x*a,q.y*a):(Ve[0][0]=q.x,Ve[0][1]=q.y,m.cb.vt(),ve.x=Ve[0][0]*a,ve.y=Ve[0][1]*a)):(q.L(L),ve.L(ge)),m.kb.wd(p,h,ee.x,ee.y,ve.x,ve.y,Kt,null,null,2),!(Kt.u<=ln.u)){wi=!0;break}if(m.kb.oj(p,h,ee.x,ee.y,Kt.u,Oi.u,Ce,Ie,2),Ne.ma(Ce.u,Ie.u),m.kb.wd(p,h,Ne.x,Ne.y,ge.x,ge.y,Wn,null,null,2),Wn.u>v){wi=!0;break}if(gi){if(m.kb.wd(p,h,Ne.x,Ne.y,ve.x,ve.y,In,null,null,2),In.u>v){wi=!0;break}if(m.kb.wd(p,h,ve.x,ve.y,ge.x,ge.y,tr,null,null,2),tr.u>v){wi=!0;break}}}}wi?($.L(U),Q.L(fe),lt=ns,T.up(dt,$),T.up(oi,Q),Ni.add(lt)):(T.hB(dt),T.hB(oi),Ni.En(Ni.size-1,1,Ni.size-1),T.Mf(C,$),ct+=ln.u,b!=null&&b.add(ct),0<oi.size&&(M.L($),ee.L(Q),mt=lt,T.oB(dt,$),T.oB(oi,Q),lt=Ni.get(Ni.size-1)))}if(b!=null)for(p=1/ct,et=0;et<b.size;et++)b.write(et,b.read(et)*p)},T.fC=function(p,h,a,u){u.reverse(),a!=null&&a.ni(0,a.size,1),a=p!=null?p[0]:NaN,u=h!=null?h[0]:NaN,p!=null&&(p[0]=u),h!=null&&(h[0]=a)},T.fJ=function(p,h,a,u,d){p?(u.L(a),d.L(h)):(u.L(h),d.L(a))},T.eJ=function(p,h,a){return p?(a.create(h.getType()),h.copyTo(a.get()),a.get().reverse(),a.get()):h},T.Wi=function(p,h,a){if(isNaN(h)){for(;3.141592653589793<a[0]-p;)a[0]-=6.283185307179586;for(;3.141592653589793<p-a[0];)a[0]+=6.283185307179586}else 3.141592653589793<a[0]+p-h?a[0]-=6.283185307179586:3.141592653589793<h-(a[0]+p)&&(a[0]+=6.283185307179586)},T.WW=function(p,h,a,u){3.141592653589793>Math.abs(h.x-p.x)?(u.Dc(p),3.141592653589793<=a.x-p.x?u.Ql(a.x-6.283185307179586,a.y):3.141592653589793<=p.x-a.x?u.Ql(a.x+6.283185307179586,a.y):u.Ql(a.x,a.y)):(u.Dc(a),3.141592653589793<=p.x-a.x?u.Ql(p.x-6.283185307179586,p.y):3.141592653589793<=a.x-p.x?u.Ql(p.x+6.283185307179586,p.y):u.Ql(p.x,p.y))},T.YJ=function(p,h){for(var a=0;a<p;a++){var u=Math.ceil(a/2)/(p+1);a%2!=0&&(u=-u),h[a]=.5+u}},T.Mu=function(p,h){return!!(m.s.Y(p.y,1.570796326794897)&&!m.s.Y(h.y,1.570796326794897)||m.s.Y(p.y,-1.570796326794897)&&!m.s.Y(h.y,-1.570796326794897))},T.Ku=function(p,h){return!!(m.s.Y(h.y,1.570796326794897)&&!m.s.Y(p.y,1.570796326794897)||m.s.Y(h.y,-1.570796326794897)&&!m.s.Y(p.y,-1.570796326794897))},T.FE=function(p,h,a){return!(!T.EE(p,h,a)||m.s.Y(p.y,1.570796326794897)||m.s.Y(p.y,-1.570796326794897)||m.s.Y(h.y,1.570796326794897)||m.s.Y(h.y,-1.570796326794897))},T.EE=function(p,h,a){return Math.abs(Math.abs(p.x-h.x)-3.141592653589793)<=a},T.Lu=function(p,h){return!!(m.s.Y(p.y,1.570796326794897)&&m.s.Y(h.y,1.570796326794897)||m.s.Y(p.y,-1.570796326794897)&&m.s.Y(h.y,-1.570796326794897))},T.kB=function(p,h,a,u){if(0<p.y){var d=new m.h;d.ma(h.x,1.570796326794897)}else(d=new m.h).ma(h.x,-1.570796326794897);m.s.Y(p.x,d.x)||m.s.Y(h.y,d.y)||(T.Mf(u,d),a!=null&&a.add(0))},T.iB=function(p,h,a,u){if(0<h.y){var d=new m.h;d.ma(p.x,1.570796326794897)}else(d=new m.h).ma(p.x,-1.570796326794897);m.s.Y(h.x,d.x)||m.s.Y(p.y,d.y)||(T.Mf(u,d),a!=null&&a.add(1))},T.jB=function(p,h,a,u,d,g,v){m.s.Cd(a)?(0<1.570796326794897-p.y&&((a=new m.h).ma(p.x,1.570796326794897),T.Mf(v,a),g!=null&&g.add(u)),0<1.570796326794897-h.y&&((a=new m.h).ma(h.x,1.570796326794897),T.Mf(v,a),g!=null&&g.add(u))):(0<1.570796326794897+p.y&&((a=new m.h).ma(p.x,-1.570796326794897),T.Mf(v,a),g!=null&&g.add(d)),0<1.570796326794897+h.y&&((a=new m.h).ma(h.x,-1.570796326794897),T.Mf(v,a),g!=null&&g.add(d)))},T.AU=function(p){if(-3.141592653589793>p.x)for(;-3.141592653589793>p.x;)p.x+=6.283185307179586;if(3.141592653589793<p.x)for(;3.141592653589793<p.x;)p.x-=6.283185307179586},T}();m.cj=j}(ye||(ye={})),function(m){m.ip=function(){function j(){}return j.nj=function(T,p,h){if(T==null||p==null||!m.cb.Wc(p))throw m.i.N();if(T.B())return T;var a=T,u=a.getType();if(m.aa.Hc(u)){a=m.Hh.lj(T,p),T=new m.l,a.A(T),u=m.ta.Wd(p,T,!1);for(var d=m.cb.gh(p),g=Math.floor((T.v-d.v)/d.R())*d.R()+d.v;g<T.C;)g>T.v+u&&g<T.C-u&&(a=m.Hh.ks(a,p,h,!0,g)),g+=d.R()}else{if(u==197)return(T=new m.Da(a.description)).ad(a,!1),j.nj(T,p,h);if(m.aa.yd(u))return(T=new m.Ta(a.description)).oc(a,!0),j.nj(T,p,h)}return j.Uy(a,p)},j.Uy=function(T,p){if(T==null||p==null||!m.cb.Wc(p))throw m.i.N();if(T.B())return T;var h=T.getType();return h==197?(h=new m.Da(T.description)).ad(T,!1):m.aa.yd(h)?(h=new m.Ta(T.description)).oc(T,!0):h=T,(h=m.Hh.lj(h,p)).B()?h:m.Eg.Sb(p)==1?m.Hh.Fn(h,p,0,h!=T,0):j.NQ(h,p,h!=T)},j.NQ=function(T,p,h){if(!m.cb.Wc(p))throw m.i.N();if(T.B())return T;var a=m.cb.bf(p),u=-180*a;return a*=360,m.Eg.Sb(p)==2&&(a=(u=m.cb.gh(p)).C,a-=u=u.v),m.Hh.Hp(T,u,a,p,h,0,!0)},j}()}(ye||(ye={})),function(m){m.BY=function(){function j(){}return j.P=function(T){return 0>T?-T:T},j.Mb=function(T,p){return 0<=p?j.P(T):-j.P(T)},j.Y=function(T,p){return T==p||j.P(T-p)<=j.JC*(1+(j.P(T)+j.P(p))/2)},j.Cd=function(T){return T==0||j.P(T)<=j.JC},j.Ah=function(T,p){var h=(p=(1-(p=Math.sqrt(1-p)))/(1+p))*p;return T/(1+p)*(1+h*(.25+h*(.015625+1/256*h)))*j.EL},j.EL=1.5707963267948966,j.JC=3552713678800501e-30,j}()}(ye||(ye={})),function(m){var j=function(p){this.Wf=p,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};m.DY=j;var T=function(){function p(h){h===void 0&&(h=null),this.Cj=null,this.Un=!1,h!==null&&(this.Cj=new j(h))}return p.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},p.prototype.Of=function(){var h=new p;return this.copyTo(h),h},p.prototype.copyTo=function(h){h.Cj=this.Cj,h.Un=this.Un},p.prototype.Qz=function(){this.Un=!this.Un},p.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},p.prototype.LJ=function(h){if(0>=h)throw m.i.N();if(h!=this.Ec()){if((h=m.pf.geogtran(h))==null)throw m.i.N("Geogtran not found.");this.Cj=new j(h)}},p.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},p.prototype.tX=function(h){if(h==null)throw m.i.N();var a=null;try{a=m.pf.fromString(m.Sc.PE_TYPE_GEOGTRAN,h)}catch{throw m.i.N()}this.Cj=new j(a)},p.prototype.Nb=function(h){return h==this||!(!(h instanceof p)||(0>=this.Ec()||this.Ec()!=h.Ec())&&!this.qm().isEqual(h.qm()))&&this.Un==h.Un},p.prototype.toString=function(){var h="GeographicTransformation: "+this.Bz();return 200<h.length?h.substring(0,197)+"... ("+h.length.toString()+" characters)":h},p.create=function(h,a){var u=new p;return u.LJ(h),a&&u.Qz(),u},p.uP=function(h,a){var u=new p;return u.tX(h),a&&u.Qz(),u},p}();m.Dx=T}(ye||(ye={})),function(m){var j=function(){function p(){}return p.construct=function(h,a,u,d){var g=new p;return g.hw=h,g.iw=a,g.QY=u,g.RY=d,g},p.Ey=function(h,a){return h.hw==a.hw?h.iw==a.iw?0:h.iw<a.iw?-1:1:h.hw<a.hw?-1:1},p}(),T=function(){function p(){this.yT=[],this.zT=[],this.qp()}return p.kz=function(){return p.jK==null&&(p.jK=new p),p.jK},p.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},p.prototype.iD=function(h){try{var a=[];a=a.sort(j.Ey);for(var u=0;u<a.length;u++)h.push(a[u])}catch{}},p}();m.CY=T}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.yD=function(p){this.Fk=p},T.prototype.WM=function(p){this.Fb=p},T.prototype.xD=function(p){this.zo=p},T.CE=function(p){return!(p.B()||p.getType()!=1607&&p.getType()!=1736)},T.AE=function(p){return!(p.B()||p.getType()!=1607&&p.getType()!=1736||20>p.I())},T.BE=function(p){return!(p.B()||p.getType()!=1607&&p.getType()!=1736||20>p.I())},T}();m.Uk=j}(ye||(ye={})),function(m){m.$b=function(){function j(){}return j.TT=function(T){var p=new m.Da;return p.sx(T.es(),T.gs()),p.yj(T.es(),T.fs()),p.yj(T.ds(),T.fs()),p.yj(T.ds(),T.gs()),p},j.zh=function(T,p){return T===null?null:m.Hx.local().V(T,p,null)},j.jY=function(T,p){var h=m.Gh.local();return T=new m.Zc(T),h.V(T,p,null).next()},j.im=function(T,p,h){return m.kp.local().V(T,p,h,null)},j.ep=function(T,p,h){return m.Kx.local().V(T,p,h,null)},j.VX=function(T,p,h){var a=m.Kx.local();for(T=new m.Zc(T),p=new m.Zc(p),h=a.V(T,p,h,null),a=[];(p=h.next())!=null;)a.push(p);return a},j.Nb=function(T,p,h){return m.dj.local().V(3,T,p,h,null)},j.TP=function(T,p,h){return m.dj.local().V(4,T,p,h,null)},j.RS=function(T,p,h){var a=m.Xj.local();for(T=new m.Zc(T),p=new m.Zc(p),h=a.V(T,p,h,null),a=[];(p=h.next())!=null;)a.push(p);return a},j.QP=function(T,p,h){var a=m.kp.local();for(T=new m.Zc(T),p=new m.Zc(p),h=a.V(T,p,h,null),a=[];(p=h.next())!=null;)a.push(p);return a},j.Ea=function(T,p,h){return m.Xj.local().V(T,p,h,null)},j.QS=function(T,p,h){if((T=m.Xj.local().V(T,p,h,null,1))===null)return[];if(T.getType()===550){for(p=[],h=0;h<T.wa;h++)p.push(T.KR(h));return p}return T.getType()===33?[T]:[]},j.qY=function(T,p,h){return m.dj.local().V(2,T,p,h,null)},j.contains=function(T,p,h){return m.dj.local().V(1,T,p,h,null)},j.BP=function(T,p,h){return m.dj.local().V(16,T,p,h,null)},j.touches=function(T,p,h){return m.dj.local().V(8,T,p,h,null)},j.DU=function(T,p,h){return m.dj.local().V(32,T,p,h,null)},j.TS=function(T,p,h){return m.dj.local().V(1073741824,T,p,h,null)},j.yB=function(T,p,h,a){return m.zL.local().V(T,p,h,a,null)},j.tb=function(T,p,h,a){var u=null;if(h!=null){if(u=h.Hd(),a!=null&&u.Ec()!=a.Ec()&&u.od!=a.od)throw m.i.Xk()}else if(a!=null)throw m.i.N();return T=m.rL.local().V(T,p,null),u!==null&&a!==null&&(T=m.Tc.Nh(T,u,a)),T},j.clip=function(T,p,h){return m.kL.local().V(T,m.l.construct(p.es(),p.gs(),p.ds(),p.fs()),h,null)},j.dl=function(T,p,h){if(T==null||p==null)return null;for(T=m.mL.local().V(!0,T,p,h,null),p=[];(h=T.next())!=null;)h.B()||p.push(h);return p.slice(0)},j.MN=function(T,p,h,a,u,d,g,v){if(u===!0)return j.NN(T,p,h,a,d,g,v);if(u=h,p!=null){if(g=p.Hd(),a!=null&&g.Ec()!=a.Ec()){if(g.od!=a.od)throw m.i.Xk();u=[],m.Tc.XE(h,h.length,a,g,u)}}else if(a!=null)throw m.i.N();if(h=m.AC.local(),d){for(T=new m.Zc(T),p=h.V(T,p,u,d,null),T=[];(d=p.next())!=null;)T.push(d);d=T.slice(0)}else for(d=[],a=0;a<T.length;a++)d[a]=h.V(T[a],p,u[a],null);return d},j.NN=function(T,p,h,a,u,d,g){if(p===null||(a==null&&(a=p.Ec()!==4326?p.Hd():m.Tc.Zg(9001)),a.od!==0))throw m.i.N();if(m.Tc.XE(h,h.length,a,m.Tc.Zg(9001),h),a=m.FC.local(),u){for(T=new m.Zc(T),p=a.V(T,p,d,h,g,!1,u,null),h=[];(d=p.next())!=null;)h.push(d);u=h.slice(0)}else{u=[];for(var v=0;v<T.length;v++)u[v]=a.V(T[v],p,d,h[v],g,!1,null)}return u},j.buffer=function(T,p,h,a,u,d,g){var v=h;if(u===!1){if(p!=null){if(u=p.Hd(),a!=null&&u.Ec()!=a.Ec()){if(u.od!=a.od)throw m.i.Xk();v=m.Tc.Nh(h,a,u)}}else if(a!=null)throw m.i.N();T=m.AC.local().V(T,p,v,null)}else{if(p===null||(a==null&&(a=p.Ec()!==4326?p.Hd():m.Tc.Zg(9001)),a.od!==0))throw m.i.N();v=m.Tc.Nh(h,a,m.Tc.Zg(9001)),T=m.FC.local().V(T,p,d,v,g,!1,null)}return T},j.BU=function(T,p,h,a,u,d,g){if(p!=null){var v=p.Hd();if(g!=null&&v.Ec()!=g.Ec()){if(v.od!=g.od)throw m.i.Xk();h=m.Tc.Nh(h,g,v)}}else if(g!=null)throw m.i.N();for(T=new m.Zc(T),p=m.IC.local().V(T,p,h,a,u,d,null),h=[];(a=p.next())!=null;)h.push(a);return h.slice(0)},j.offset=function(T,p,h,a,u,d,g){if(p!=null){var v=p.Hd();if(g!=null&&v.Ec()!=g.Ec()){if(v.od!=g.od)throw m.i.Xk();h=m.Tc.Nh(h,g,v)}}else if(g!=null)throw m.i.N();return m.IC.local().V(T,p,h,a,u,d,null)},j.iP=function(T){return m.CC.local().V(T,null)},j.jP=function(T,p){var h=m.CC.local();for(T=new m.Zc(T),p=h.V(T,p,null),h=[];(T=p.next())!=null;)h.push(T);return h},j.nz=function(T,p,h){return m.Ix.local().nz(T,p,h)},j.oz=function(T,p){return m.Ix.local().oz(T,p)},j.pz=function(T,p,h,a){return m.Ix.local().pz(T,p,h,a)},j.eC=function(T,p){return m.Yl.local().V(T,p,!1,null)},j.dT=function(T,p){return m.Yl.local().rs(T,p,null)},j.QQ=function(T,p,h,a,u){var d=m.EC.local();if(p!=null){if(p=p.Hd(),u!=null&&p.Ec()!=u.Ec()){if(p.od!=u.od)throw m.i.Xk();h=m.Tc.Nh(h,u,p)}}else if(u!=null)throw m.i.N();return d.V(T,h,a,null)},j.Qr=function(T,p,h,a){var u=m.Xl.local();if(p!=null){if(p=p.Hd(),a!=null&&p.Ec()!=a.Ec()){if(p.od!=a.od)throw m.i.Xk();h=m.Tc.Nh(h,a,p)}}else if(a!=null)throw m.i.N();return u.V(T,h,null)},j.Wy=function(T,p,h,a,u){u===void 0&&(u=0);var d=m.tL.local();if(u==4||u!==0)throw m.i.Ie();if(a!==null){if(a.od!==0)throw m.i.N("Unit must be a linear unit type");h=m.Tc.Nh(h,a,m.Tc.Zg(9001))}return d.V(T,h,p,u,null)},j.WQ=function(T,p,h,a){if(T===null)return 0;if(a==4||a!==0)throw m.i.Ie();if(T.getType()==197)T=j.TT(T);else if(T.getType()!=1736)return 0;if(a=m.cb.sc(p),T=m.cb.zh(T,p,a),T=m.UK.XQ([T])[0],h!==null){if(h.od!==2)throw m.i.N("Unit must be a area unit type");T=m.Tc.Nh(T,m.Tc.Zg(109404),h)}return T},j.ZQ=function(T,p,h,a){if(T=m.vL.local().V(T,p,a,null),h!==null){if(h.od!==0)throw m.i.N("Unit must be a linear unit type");T=m.Tc.Nh(T,m.Tc.Zg(9001),h)}return T},j.JU=function(T,p,h){if(T===null)return 0;var a=null;if(p!=null){if((a=p.Hd()).od==0&&(a=m.Tc.aG(a))==null&&h!==null)throw m.i.N();if(h!=null&&a.Ec()!=h.Ec()&&a.od!=h.od)throw m.i.Xk()}else if(h!=null)throw m.i.N();return T.getType()==1736||T.getType()==197?(T=T.Ke(),h!==null?m.Tc.Nh(T,a,h):T):0},j.KU=function(T,p,h){if(T===null||T.B()||1>T.Db())return 0;var a=null;if(p!=null){if(a=p.Hd(),h!=null&&a.Ec()!=h.Ec()&&a.od!=h.od)throw m.i.Xk()}else if(h!=null)throw m.i.N();T.getType()==1736||T.getType()==197?p=T.mg():m.aa.yd(T.getType())?(p=new m.Ta(T.description)).oc(T,!0):p=T,T=0,p=p.Ga();for(var u=new m.h,d=new m.h;p.$a();)for(;p.Ha();){var g=p.ha();g.Yp(u),g.Tr(d),T+=m.h.tb(u,d)}return a!==null&&h!==null&&(T=m.Tc.Nh(T,a,h)),T},j.fP=function(T){return T.points!==void 0?j.mS(T,T.hasZ!==void 0&&T.hasZ,T.hasM!==void 0&&T.hasM):T.rings!==void 0?j.lG(T.rings,T.hasZ!==void 0&&T.hasZ,T.hasM!==void 0&&T.hasM,"P"):T.paths!==void 0?j.lG(T.paths,T.hasZ!==void 0&&T.hasZ,T.hasM!==void 0&&T.hasM,"L"):T.x!==void 0?j.nS(T):T.xmin!==void 0?j.lS(T):null},j.nS=function(T){if(T.x==null||T.x=="NaN")return new m.Sa;var p=new m.Sa(T.x,T.y);return T.z!==void 0&&T.z!==null&&p.wX(T.z),T.m!==void 0&&T.m!==null&&p.hX(T.m),p},j.lS=function(T){if(T.xmin==null||T.xmin=="NaN")return new m.Fh;var p=new m.Fh(T.xmin,T.ymin,T.xmax,T.ymax);return T.zmin!==void 0&&T.zmin!==null&&p.setInterval(1,0,T.zmin,T.zmax),T.mmin!==void 0&&T.mmin!==null&&p.setInterval(2,0,T.mmin,T.mmax),p},j.mS=function(T,p,h){var a=0,u=new m.de,d=3*T.points.length;d%2!=0&&d++,2>d&&(d=2);var g=m.O.truncate(3*T.points.length/2);4>g?g=4:16>g&&(g=16),d=m.Yc.Dn(d,0);var v=m.Yc.Dn(g);g=m.Yc.Dn(g);for(var b=0;b<T.points.length;b++)d.write(2*b,T.points[b][0]),d.write(2*b+1,T.points[b][1]),v.write(b,p||h?T.points[b][2]:NaN),g.write(b,h&&p?T.points[b][3]:NaN),a++;return a!=0&&(u.resize(a),u.hn(0,d)),p&&(u.re(1),u.hn(1,v)),h&&(u.re(2),u.hn(2,p==0?v:g)),u.Pc(16777215),u},j.lG=function(T,p,h,a){var u=0,d=2;if(a=="P"){var g=new m.Da;u=1,d=3}else g=new m.Ta;for(var v=m.Yc.Oh(0),b=m.Yc.Mr(0),C=0,M=0,$=[],L=[],q=0;q<T.length;q++){var U=T[q].length;if($[q]=!1,a==="P"&&T[q][0][0]===T[q][T[q].length-1][0]&&T[q][0][1]===T[q][T[q].length-1][1]){var ee=h==0||T[q][0][3]===T[q][T[q].length-1][3]||T[q][0][3]===void 0&&T[q][T[q].length-1][3]===void 0;(p==0||T[q][0][2]===T[q][T[q].length-1][2]||T[q][0][2]===void 0&&T[q][T[q].length-1][2]===void 0)&&ee&&($[q]=!0,--U)}U>=d?(L[q]=!1,M+=1,v.add(C),b.add(u),C+=U):L[q]=!0}for((a=3*C)%2!=0&&a++,2>a&&(a=2),4>(q=m.O.truncate(3*C/2))?q=4:16>q&&(q=16),a=m.Yc.Dn(a,0),u=m.Yc.Dn(q),d=m.Yc.Dn(q),q=U=0;q<T.length;q++)if(L[q]===!1)for(ee=0;ee<T[q].length;ee++){var Q=!1;ee===T[q].length-1&&$[q]===!0&&(Q=!0),Q||(a.write(2*U,T[q][ee][0]),a.write(2*U+1,T[q][ee][1]),u.write(U,p||h?T[q][ee][2]:NaN),d.write(U,h&&p?T[q][ee][3]:NaN),U++)}return C!=0&&(T=g,v.resize(M),b.resize(M),0<C&&(v.add(C),b.add(0)),T.hn(0,a),T.PJ(b),T.QJ(v)),p&&(g.re(1),g.hn(1,u)),h&&(g.re(2),g.hn(2,p==0?u:d)),g.Pc(16777215),g},j}()}(ye||(ye={})),function(m){m.Ex=function(){function j(){}return j.br=function(T){var p,h=0,a=T.length,u=T[0];for(p=0;p<a-1;p++){var d=T[p+1];h+=(d[0]-u[0])*(d[1]+u[1]),u=d}return 0<=h},j.rotate=function(T,p,h){p=p*Math.PI/180;var a=Math.cos(p),u=Math.sin(p);if(T.paths!==void 0){p={paths:[]};for(var d=0;d<T.paths.length;d++){for(var g=T.paths[d],v=[],b=0;b<g.length;b++){var C=g[b].slice(0);v.push(C);var M=a*(g[b][0]-h.x)-u*(g[b][1]-h.y)+h.x,$=u*(g[b][0]-h.x)+a*(g[b][1]-h.y)+h.y;C[0]=M,C[1]=$}p.paths.push(v),T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM)}return p}if(T.rings!==void 0){for(p={rings:[]},d=0;d<T.rings.length;d++){g=T.rings[d],v=[];var L=j.br(g);for(b=0;b<g.length;b++)C=g[b].slice(0),v.push(C),M=a*(g[b][0]-h.x)-u*(g[b][1]-h.y)+h.x,$=u*(g[b][0]-h.x)+a*(g[b][1]-h.y)+h.y,C[0]=M,C[1]=$;j.br(v)!==L&&v.reverse(),p.rings.push(v),T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM)}return p}if(T.x!==void 0)return p={x:a*(T.x-h.x)-u*(T.y-h.y)+h.x,y:u*(T.x-h.x)+a*(T.y-h.y)+h.y},T.z!==void 0&&(p.z=T.z),T.m!==void 0&&(p.m=T.m),T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM),p;if(T.points!==void 0){for(p={points:[]},d=T.points,b=0;b<d.length;b++)(g=d[b].slice(0))[0]=a*(d[b][0]-h.x)-u*(d[b][1]-h.y)+h.x,g[1]=u*(d[b][0]-h.x)+a*(d[b][1]-h.y)+h.y,p.points.push(g);return T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM),p}return null},j.JQ=function(T,p){if(T.paths!==void 0){for(var h={paths:[]},a=0;a<T.paths.length;a++){for(var u=T.paths[a],d=[],g=0;g<u.length;g++){var v=u[g].slice(0);d.push(v);var b=p.x-u[g][0];v[0]=u[g][0]+2*b}h.paths.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.rings!==void 0){for(h={rings:[]},a=0;a<T.rings.length;a++){u=T.rings[a];var C=j.br(u);for(d=[],g=0;g<u.length;g++)v=u[g].slice(0),d.push(v),b=p.x-u[g][0],v[0]=u[g][0]+2*b;j.br(d)!==C&&d.reverse(),h.rings.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.x!==void 0)return b=p.x-T.x,h={x:T.x+2*b,y:T.y},T.z!==void 0&&(h.z=T.z),T.m!==void 0&&(h.m=T.m),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h;if(T.points!==void 0){for(h={points:[]},a=T.points,g=0;g<a.length;g++)u=a[g].slice(0),b=p.x-u[0],u[0]+=2*b,h.points.push(u);return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}return T.xmin!==void 0?(h={v:T.xmin,G:T.ymin,C:T.xmax,H:T.ymax},T.zmin!==void 0&&(h.zmin=T.zmin,h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin,h.mmax=T.mmax),b=p.x-T.xmin,h.xmax=T.xmin+2*b,b=p.x-T.xmax,h.xmin=T.xmax+2*b,T.zmin!==void 0&&(h.zmin=T.zmin),T.zmax!==void 0&&(h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin),T.mmax!==void 0&&(h.mmax=T.mmax),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h):null},j.KQ=function(T,p){if(T.paths!==void 0){for(var h={paths:[]},a=0;a<T.paths.length;a++){for(var u=T.paths[a],d=[],g=0;g<u.length;g++){var v=u[g].slice(0);d.push(v);var b=p.y-u[g][1];v[1]=u[g][1]+2*b}h.paths.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.rings!==void 0){for(h={rings:[]},a=0;a<T.rings.length;a++){u=T.rings[a];var C=j.br(u);for(d=[],g=0;g<u.length;g++)v=u[g].slice(0),d.push(v),b=p.y-u[g][1],v[1]=u[g][1]+2*b;j.br(d)!==C&&d.reverse(),h.rings.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.x!==void 0)return b=p.y-T.y,h={y:T.y+2*b,x:T.x},T.z!==void 0&&(h.z=T.z),T.m!==void 0&&(h.m=T.m),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h;if(T.points!==void 0){for(h={points:[]},a=T.points,g=0;g<a.length;g++)u=a[g].slice(0),b=p.y-u[1],u[1]+=2*b,h.points.push(u);return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}return T.xmin!==void 0?(h={v:T.xmin,G:T.ymin,C:T.xmax,H:T.ymax},T.zmin!==void 0&&(h.zmin=T.zmin,h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin,h.mmax=T.mmax),b=p.y-T.ymin,h.ymax=T.ymin+2*b,b=p.y-T.ymax,h.ymin=T.ymax+2*b,T.zmin!==void 0&&(h.zmin=T.zmin),T.zmax!==void 0&&(h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin),T.mmax!==void 0&&(h.mmax=T.mmax),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h):null},j}()}(ye||(ye={})),function(m){m.ZK=function(){function j(){}return j.Ig=function(T,p){switch(p==null&&(p=m.ee.og()),T){case 33:return new m.Sa(p);case 322:return new m.yb(p);case 197:return new m.Fh(p);case 550:return new m.de(p);case 1607:return new m.Ta(p);case 1736:return new m.Da(p);default:throw m.i.fa("invalid argument.")}},j}()}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.Te=m.ia.qf(p,-1),this.ua=new m.au,this.wl=h}return T.prototype.AW=function(p){this.ua.At(Math.min(this.Te.size,p)),this.ua.fn(p)},T.prototype.addElement=function(p,h){if(h===void 0)return this.eN(p);h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);return a==-1&&(a=this.ua.Ph(),this.Te.set(h,a)),this.ua.addElement(a,p)},T.prototype.eN=function(p){var h=this.wl.jz(p);h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);return a==-1&&(a=this.ua.Ph(),this.Te.set(h,a)),this.ua.addElement(a,p)},T.prototype.jd=function(p,h){if(h===void 0)this.KP(p);else{h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);if(a==-1)throw m.i.N();for(var u=this.ua.rc(a),d=-1;u!=-1;){var g=this.ua.lb(u);this.ua.ja(u)==p?(this.ua.jd(a,d,u),this.ua.rc(a)==-1&&(this.ua.bh(a),this.Te.set(h,-1))):d=u,u=g}}},T.prototype.KP=function(p){var h=this.wl.jz(p);h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);if(a==-1)throw m.i.N();for(var u=this.ua.rc(a),d=-1;u!=-1;){var g=this.ua.lb(u);this.ua.ja(u)==p?(this.ua.jd(a,d,u),this.ua.rc(a)==-1&&(this.ua.bh(a),this.Te.set(h,-1))):d=u,u=g}},T.prototype.rR=function(p){return p=m.O.truncate(p%this.Te.size),(p=this.Te.get(p))==-1?-1:this.ua.rc(p)},T.prototype.ER=function(p){return this.ua.lb(p)},T.prototype.vd=function(p){var h=this.wl.jz(this.ja(p));h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);if(a==-1)throw m.i.N();for(var u=this.ua.rc(a),d=-1;u!=-1;){if(u==p)return this.ua.jd(a,d,u),void(this.ua.rc(a)==-1&&(this.ua.bh(a),this.Te.set(h,-1)));d=u,u=this.ua.lb(u)}throw m.i.N()},T.prototype.ja=function(p){return this.ua.ja(p)},T.prototype.clear=function(){this.Te=m.ia.qf(this.Te.size,-1),this.ua.clear()},T.prototype.size=function(){return this.ua.TF()},T}();m.dL=j}(ye||(ye={})),function(m){var j=function(){function T(){this.Li=new m.$c(3),this.ua=new m.$c(6),this.sT=!1,this.je=-1}return T.prototype.fl=function(p){this.Li.jd(p)},T.prototype.Pw=function(){return this.Li.Ce()},T.prototype.bv=function(p){this.ua.jd(p)},T.prototype.$A=function(){return this.ua.Ce()},T.prototype.WB=function(p,h){this.Li.S(p,1,h)},T.prototype.ex=function(p,h){this.Li.S(p,2,h)},T.prototype.gX=function(p,h){this.Li.S(p,3,h)},T.prototype.UB=function(p,h){this.ua.S(p,4,h)},T.prototype.jX=function(p,h){this.ua.S(p,3,h)},T.prototype.TJ=function(p,h){this.ua.S(p,2,h)},T.prototype.Ph=function(p){var h=this.$A();return this.ua.S(h,3,this.je),this.ua.S(h,4,0),this.ua.S(h,5,p),this.je!=-1&&this.TJ(this.je,h),this.je=h},T.prototype.bh=function(p){this.LE(p);var h=this.ua.T(p,2),a=this.ua.T(p,3);return h!=-1?this.jX(h,a):this.je=a,a!=-1&&this.TJ(a,h),this.bv(p),a},T.prototype.At=function(p){this.ua.De(p)},T.prototype.PF=function(p){return this.ua.T(p,5)},T.prototype.fX=function(p,h){this.ua.S(p,5,h)},T.prototype.addElement=function(p,h){return this.tS(p,h)},T.prototype.tS=function(p,h){var a=this.Pw();this.ex(a,-1),this.ua.T(p,0)==-1&&this.ua.S(p,0,a);var u=this.ua.T(p,1);return this.WB(a,u),u!=-1&&this.ex(u,a),this.ua.S(p,1,a),this.setData(a,h),this.UB(p,this.bs(p)+1),this.sT&&this.gX(a,p),a},T.prototype.jd=function(p,h){var a=this.we(h),u=this.lb(h);return a!=-1?this.ex(a,u):this.ua.S(p,0,u),u!=-1?this.WB(u,a):this.ua.S(p,1,a),this.fl(h),this.UB(p,this.bs(p)-1),u},T.prototype.fn=function(p){this.Li.De(p)},T.prototype.getData=function(p){return this.Li.T(p,0)},T.prototype.setData=function(p,h){this.Li.S(p,0,h)},T.prototype.lb=function(p){return this.Li.T(p,2)},T.prototype.we=function(p){return this.Li.T(p,1)},T.prototype.rc=function(p){return this.ua.T(p,0)},T.prototype.Fc=function(p){return this.ua.T(p,1)},T.prototype.clear=function(){for(var p=this.je;p!=-1;)p=this.bh(p)},T.prototype.LE=function(p){for(var h=this.Fc(p);h!=-1;){var a=h;h=this.we(a),this.fl(a)}this.ua.S(p,0,-1),this.ua.S(p,1,-1),this.UB(p,0)},T.prototype.B=function(){return this.Li.size==0},T.prototype.TF=function(){return this.Li.size},T.prototype.bs=function(p){return this.ua.T(p,4)},T.prototype.qz=function(p){return this.ua.T(p,3)},T}();m.jp=j}(ye||(ye={})),function(m){var j=function(){function T(p){p===void 0?(this.ug=new m.$c(2),this.ua=new m.$c(4),this.je=-1,this.Qv=!0):(this.ug=new m.$c(2),this.ua=new m.$c(p?4:2),this.je=-1,this.Qv=p)}return T.prototype.fl=function(p){this.ug.jd(p)},T.prototype.Pw=function(){return this.ug.Ce()},T.prototype.bv=function(p){this.ua.jd(p)},T.prototype.$A=function(){return this.ua.Ce()},T.prototype.Ph=function(){var p=this.$A();return this.Qv&&(this.ua.S(p,3,this.je),this.je!=-1&&this.ua.S(this.je,2,p),this.je=p),p},T.prototype.bh=function(p){for(var h=this.rc(p);h!=-1;){var a=h;h=this.lb(h),this.fl(a)}this.Qv&&(h=this.ua.T(p,2),a=this.ua.T(p,3),h!=-1?this.ua.S(h,3,a):this.je=a,a!=-1&&this.ua.S(a,2,h)),this.bv(p)},T.prototype.At=function(p){this.ua.De(p)},T.prototype.addElement=function(p,h){var a=this.ua.T(p,1),u=this.Pw();return a!=-1?this.ug.S(a,1,u):this.ua.S(p,0,u),this.ua.S(p,1,u),this.ug.S(u,0,h),u},T.prototype.fn=function(p){this.ug.De(p)},T.prototype.jd=function(p,h,a){h!=-1?(this.ug.S(h,1,this.ug.T(a,1)),this.ua.T(p,1)==a&&this.ua.S(p,1,h)):(this.ua.S(p,0,this.ug.T(a,1)),this.ua.T(p,1)==a&&this.ua.S(p,1,-1)),this.fl(a)},T.prototype.Hy=function(p,h){var a=this.ua.T(p,1),u=this.ua.T(h,0);u!=-1&&(a!=-1?this.ug.S(a,1,u):this.ua.S(p,0,u),this.ua.S(p,1,this.ua.T(h,1))),this.Qv&&(p=this.ua.T(h,2),a=this.ua.T(h,3),p!=-1?this.ua.S(p,3,a):this.je=a,a!=-1&&this.ua.S(a,2,p)),this.bv(h)},T.prototype.ja=function(p){return this.ug.T(p,0)},T.prototype.Sj=function(p,h){this.ug.S(p,0,h)},T.prototype.lb=function(p){return this.ug.T(p,1)},T.prototype.rc=function(p){return this.ua.T(p,0)},T.prototype.Jn=function(p){return this.ja(this.rc(p))},T.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},T.prototype.B=function(){return this.ug.size==0},T.prototype.TF=function(){return this.ug.size},T.prototype.qz=function(p){return this.ua.T(p,3)},T}();m.au=j}(ye||(ye={})),function(m){m.ta=function(){function j(){}return j.Wd=function(T,p,h){return p=p.xr(),T=T!=null&&T.Xd!==void 0?T.Xd(0):0,h&&(p*=4,T*=1.1),Math.max(T,p)},j.Er=function(T){return 2*Math.sqrt(2)*T},j.rN=function(T){return Math.sqrt(2)*T},j.kj=function(T,p,h){var a=new m.l;return p.A(a),j.Wd(T,a,h)},j.wE=function(T,p,h){return p=p.Tg(1,0).xr(),T=T!=null?T.Xd(1):0,h&&(p*=4,T*=1.1),Math.max(T,p)},j.mv=function(T,p){var h=new m.l;return T.xc(h),T=new m.l,p.xc(T),h.Zb(T),h},j.YN=function(T){var p=new m.l;if(T.xc(p),p.B())return null;var h=new m.du(p,8),a=-1,u=new m.l,d=!1;do for(var g=0,v=T.da();g<v;g++){if(T.Rj(g,u),(a=h.Jz(g,u,a))==-1){if(d)throw m.i.fa("internal error");T.yp(p,!1),d=!0,h.reset(p,8);break}d=!1}while(d);return h},j.nE=function(T){var p=new m.l;T.xc(p);for(var h=new m.du(p,8),a=-1,u=T.Ga(),d=new m.l,g=!1;u.$a();)for(;u.Ha();){var v=u.ha(),b=u.wb();if(v.A(d),(a=h.Jz(b,d,a))==-1){if(g)throw m.i.Qa();T.yp(p,!1),g=!0,h.reset(p,8),u.Zi();break}}return h},j.jj=function(T,p){var h=new m.l;T.xc(h);for(var a=new m.du(h,8),u=-1,d=new m.l,g=T.Ga(),v=!1;g.$a();)for(;g.Ha();){var b=g.ha(),C=g.wb();if(b.A(d),d.isIntersecting(p)&&(u=a.Jz(C,d,u))==-1){if(v)throw m.i.fa("internal error.");T.yp(h,!1),v=!0,a.reset(h,8),g.Zi();break}}return a},j.oE=function(T,p){for(var h=new m.du(p,8),a=new m.h,u=!1,d=new m.l,g=0;g<T.I();g++)if(T.D(g,a),p.contains(a)&&(d.K(a),h.vj(g,d)==-1)){if(u)throw m.i.Qa();u=!0,g=new m.l,T.yp(g,!1),h.reset(g,8),g=-1}return h},j.lR=function(T,p,h){var a=new m.l,u=new m.l;T.xc(a),p.xc(u),a.W(h,h),u.W(h,h);var d=new m.l;d.K(a),d.Ea(u),T=T.Ga(),p=p.Ga();var g=new m.xC;g.aC(h);var v=!1;for(g.pK();T.$a();)for(;T.Ha();)T.ha().A(a),a.isIntersecting(d)&&(v=!0,(h=new m.l).K(a),g.JD(T.wb(),h));if(g.iF(),!v)return null;for(a=!1,g.oK();p.$a();)for(;p.Ha();)p.ha().A(u),u.isIntersecting(d)&&(a=!0,(h=new m.l).K(u),g.ED(p.wb(),h));return g.hF(),a?g:null},j.mR=function(T,p,h,a,u){var d=T.getType(),g=p.getType(),v=new m.l,b=new m.l;T.xc(v),p.xc(b),v.W(h,h),b.W(h,h);var C=new m.l;C.K(v),C.Ea(b);var M=new m.xC;M.aC(h);var $=!1;M.pK();var L=0;for(h=T.da();L<h;L++)a&&d==1736&&!T.Ev(L)||(T.Rj(L,v),v.isIntersecting(C)&&($=!0,M.JD(L,v)));if(M.iF(),!$)return null;for(T=!1,M.oK(),a=0,h=p.da();a<h;a++)u&&g==1736&&!p.Ev(a)||(p.Rj(a,b),b.isIntersecting(C)&&(T=!0,M.ED(a,b)));return M.hF(),T?M:null},j.Ru=function(T,p,h){if(T!=p)for(var a=0;a<h;a++)T[a]==null?T[a]=m.h.al(p[a]):T[a].L(p[a])},j.Jy=function(T,p,h,a){var u=0;for(a+=0;u<a;h++,u++)T[u]==null&&(T[u]=[0,0]),T[u][0]=p[h].x,T[u][1]=p[h].y},j.Iy=function(T,p,h,a){var u=p,d=0;for(p=a+p;u<p;d++,u++)T[u]==null?T[u]=m.h.construct(h[d][0],h[d][1]):T[u].ma(h[d][0],h[d][1])},j.kP=function(T,p,h){if(T!=p)for(var a=0;a<h;a++)T[a]==null?T[a]=new m.Sa(p[a]):p[a].copyTo(T[a])},j.vE=function(T,p,h,a){var u=0;return T!=null&&(u=T.Xd(0),a&&!h||T==null||(u+=1.01*T.vz(0))),h&&(p*=4,u*=1.01),Math.max(u,p)},j.ty=function(T,p,h){return j.vE(T,p.xr(),h,!1)},j.gO=function(T,p){var h=new m.l;return p.A(h),j.ty(T,h,!0)},j.uy=function(T,p){return j.vE(T,p.xr(),!1,!0)},j.Hu=function(T,p){var h=new m.l;return p.A(h),j.uy(T,h)},j.AG=function(T,p,h,a){a*=a;var u=new m.h;if(u.uc(T,p),(T=new m.h).uc(h,p),p=u.Sk(),h=T.Sk(),p<=a&&h<=a)return!0;var d=m.lc.ox(u.wi(T));return(d<=a*p||d<=a*h)&&0<=u.Qh(T)},j.dK=function(T,p,h,a){for(var u=0;u<p;u++){var d=T[u].y,g=m.O.Rk(d,h,a);g!=d&&(T[u].y=g)}},j}()}(ye||(ye={})),function(m){var j,T,p=function(){function d(g){this.Ya=g}return d.prototype.compare=function(g,v,b){g=g.ja(b),b=this.Ya.nk(v);var C=this.Ya.nk(g);return b<C?-1:b==C?u.gq(v)&&u.Gv(g)?-1:u.gq(g)&&u.Gv(v)?1:0:1},d}(),h=function(){function d(g){this.Ya=g}return d.prototype.nr=function(g,v,b){this.Ya.GX(b,g,v)},d.prototype.$p=function(g){return this.Ya.nk(g)},d}();(T=j||(j={}))[T.initialize=0]="initialize",T[T.pIn=1]="pIn",T[T.pL=2]="pL",T[T.pR=3]="pR",T[T.pT=4]="pT",T[T.right=5]="right",T[T.left=6]="left",T[T.all=7]="all";var a=function(){function d(){this.Ya=null,this.Qi=new m.Nc,this.hi=new m.ia(0),this.sg=[0,0]}return d.prototype.Xi=function(g,v){this.Qi.oa=g.oa-v,this.Qi.va=g.va+v,this.hi.resize(0),this.he=0,this.sg[0]=0},d.prototype.EB=function(g,v,b){if(g>v)throw m.i.N();this.Qi.oa=g-b,this.Qi.va=v+b,this.hi.resize(0),this.he=0,this.sg[0]=0},d.prototype.Uo=function(g,v){this.Qi.oa=g-v,this.Qi.va=g+v,this.hi.resize(0),this.he=0,this.sg[0]=0},d.prototype.next=function(){if(!this.Ya.lq)throw m.i.Hb();if(0>this.he)return-1;for(var g=!0;g;)switch(this.sg[this.he]){case 1:g=this.FU();break;case 2:g=this.GU();break;case 3:g=this.HU();break;case 4:g=this.IU();break;case 5:g=this.GW();break;case 6:g=this.kT();break;case 7:g=this.tN();break;case 0:g=this.Gz();break;default:throw m.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},d.construct=function(g){var v=new d;return v.Ya=g,v.hi.Jb(20),v.he=-1,v},d.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},d.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var g=this.Ya.Np(this.Lc);return this.Qi.va<g?(g=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=6),!0):g<this.Qi.oa?(g=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),g!=-1&&(this.ei=this.Ya.Zr(g),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,g=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),!0)},d.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var g=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),g!=-1&&(this.ei=this.Ya.Zr(g),this.sg[++this.he]=5),!0}return g=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),(g=this.Ya.lk(this.Lc))!=-1&&this.hi.add(g),!0},d.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var g=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=6),!0}return g=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),(g=this.Ya.qj(this.Lc))!=-1&&this.hi.add(g),!0},d.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var g=this.Ya.mk(this.Lc);return g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},d.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&u.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},d.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&u.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},d.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&u.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},d.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},d.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},d.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},d}();m.EY=a;var u=function(){function d(g){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=g,this.lq=this.Sv=!1}return d.prototype.kr=function(){this.Nk(!0)},d.prototype.Br=function(g,v){if(!this.Sv)throw m.i.Hb();this.Fj.push(new m.Nc(g,v))},d.prototype.Fp=function(){if(!this.Sv)throw m.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},d.prototype.vj=function(g){if(!this.Sf||!this.lq)throw m.i.N("invalid call");if(this.kf==-1){var v=this.Fj.length;if(this.iA){var b=new m.ia(0);b.Jb(2*v),this.bJ(b),this.$h.Jb(2*v),this.$h.resize(0),this.aJ(b),this.Km.resize(v,-1),this.Km.Wj(-1,0,v),this.iA=!1}else this.Km.Wj(-1,0,v);this.kf=this.Tu()}v=this.pG(g<<1,this.kf),b=this.$f.addElement(1+(g<<1),this.xz(v)),this.VJ(v,b),this.Km.set(g,v),this.Zv++},d.prototype.remove=function(g){if(!this.Sf||!this.lq)throw m.i.fa("invalid call");var v=this.Km.get(g);if(v==-1)throw m.i.N("the interval does not exist in the interval tree");this.Km.set(g,-1),this.Zv--;var b=this.xz(v),C=this.$f.ZR(b);this.$f.vd(this.wR(v),b),this.$f.vd(this.TR(v),b),(g=this.$f.size(b))==0&&(this.$f.MP(b),this.ZJ(C,-1)),this.Ej.jd(v),b=this.UF(C);var M=this.qj(C),$=this.lk(C);for(v=0;!(0<g||C==this.kf||M!=-1&&$!=-1);)C==this.qj(b)?M!=-1?(this.Ok(b,M),this.Uj(M,b),this.Ok(C,-1)):$!=-1?(this.Ok(b,$),this.Uj($,b),this.Qk(C,-1)):this.Ok(b,-1):M!=-1?(this.Qk(b,M),this.Uj(M,b),this.Ok(C,-1)):$!=-1?(this.Qk(b,$),this.Uj($,b),this.Qk(C,-1)):this.Qk(b,-1),this.Uj(C,-1),v++,C=b,g=(b=this.mk(C))!=-1?this.$f.size(b):0,M=this.qj(C),$=this.lk(C),b=this.UF(C)},d.prototype.reset=function(){if(!this.Sf||!this.lq)throw m.i.N("invalid call");this.Nk(!1)},d.prototype.size=function(){return this.Zv},d.prototype.getIterator=function(){return a.construct(this)},d.prototype.bJ=function(g){for(var v=this.Fj.length,b=0;b<2*v;b++)g.add(b);this.HX(g,2*v)},d.prototype.aJ=function(g){for(var v=NaN,b=0;b<g.size;b++){var C=g.get(b),M=this.nk(C);M!=v&&(this.$h.add(C),v=M)}},d.prototype.vS=function(){var g=this.Fj.length,v=new m.ia(0);v.Jb(2*g),this.bJ(v),this.$h.Jb(2*g),this.$h.resize(0),this.aJ(v),this.Ej.De(g),this.Ti.fn(2*g);var b=m.Yc.Oh(g);for(b.Wj(-1,0,g),this.kf=this.Tu(),g=0;g<v.size;g++){var C=v.get(g),M=b.get(C>>1);M!=-1?this.VJ(M,this.Ti.addElement(this.xz(M),C)):(M=this.pG(C,this.kf),b.set(C>>1,M))}},d.prototype.pG=function(g,v){var b=v,C=v,M=-1,$=0,L=this.$h.size-1,q=0,U=g>>1,ee=NaN,Q=NaN,ge=!0,ve=this.DR(U);for(U=this.AR(U);ge;){$<L?(q=$+m.O.truncate((L-$)/2),this.gz(b)==-1&&this.FJ(b,this.$h.get(q),this.$h.get(q+1))):this.gz(b)==-1&&this.FJ(b,this.$h.get($),this.$h.get($));var fe=this.Np(b);if(U<fe)v!=-1&&(v==b?(C=b,ee=fe,Q=(v=this.qj(b))!=-1?this.Np(v):NaN):Q>fe&&(fe<ee?this.Ok(C,b):this.Qk(C,b),this.Qk(b,v),this.Sf&&(this.Uj(b,C),this.Uj(v,b)),C=b,ee=fe,v=-1,Q=NaN)),(L=this.xR(b))==-1&&(L=this.Tu(),this.dX(b,L)),b=L,L=q;else if(ve>fe)v!=-1&&(v==b?(C=b,ee=fe,Q=(v=this.lk(b))!=-1?this.Np(v):NaN):Q<fe&&(fe<ee?this.Ok(C,b):this.Qk(C,b),this.Ok(b,v),this.Sf&&(this.Uj(b,C),this.Uj(v,b)),C=b,ee=fe,v=-1,Q=NaN)),($=this.UR(b))==-1&&($=this.Tu(),this.oX(b,$)),b=$,$=q+1;else{(ge=this.mk(b))==-1&&(ge=this.zP(b),this.ZJ(b,ge));var Ce=this.fN(ge,g);M=this.xP(),this.qX(M,ge),this.cX(M,Ce),b!=v&&(fe<ee?this.Ok(C,b):this.Qk(C,b),this.Sf&&this.Uj(b,C),v!=-1&&(Q<fe?this.Ok(b,v):this.Qk(b,v),this.Sf&&this.Uj(v,b))),ge=!1}}return M},d.prototype.Tu=function(){return this.me.Ce()},d.prototype.zP=function(g){return this.Sf?this.$f.Pr(g):this.Ti.Ph(g)},d.prototype.xP=function(){return this.Ej.Ce()},d.prototype.Nk=function(g){g?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=m.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=m.Yc.Oh(0),this.$f=new m.Yj,this.$f.Vo(new p(this))):this.$f.clear():this.Ti==null?this.Ti=new m.jp:this.Ti.clear(),this.me==null?(this.Ej=new m.$c(3),this.me=new m.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},d.prototype.FJ=function(g,v,b){this.XW(g,v),this.YW(g,b)},d.prototype.Np=function(g){var v=this.gz(g);return v==-1?NaN:(v=this.nk(v))==(g=this.nk(this.gR(g)))?v:.5*(v+g)},d.prototype.XW=function(g,v){this.me.S(g,0,v)},d.prototype.YW=function(g,v){this.me.S(g,1,v)},d.prototype.dX=function(g,v){this.me.S(g,3,v)},d.prototype.oX=function(g,v){this.me.S(g,4,v)},d.prototype.ZJ=function(g,v){this.me.S(g,2,v)},d.prototype.Ok=function(g,v){this.me.S(g,5,v)},d.prototype.Qk=function(g,v){this.me.S(g,6,v)},d.prototype.Uj=function(g,v){this.me.S(g,7,v)},d.prototype.qX=function(g,v){this.Ej.S(g,0,v)},d.prototype.fN=function(g,v){return this.Sf?this.$f.addElement(v,g):this.Ti.addElement(g,v)},d.prototype.cX=function(g,v){this.Ej.S(g,1,v)},d.prototype.VJ=function(g,v){this.Ej.S(g,2,v)},d.prototype.kl=function(g){return this.Sf?this.$f.rc(g):this.Ti.rc(g)},d.prototype.Zr=function(g){return this.Sf?this.$f.Fc(g):this.Ti.Fc(g)},d.gq=function(g){return!(1&g)},d.Gv=function(g){return!(1&~g)},d.prototype.gz=function(g){return this.me.T(g,0)},d.prototype.gR=function(g){return this.me.T(g,1)},d.prototype.mk=function(g){return this.me.T(g,2)},d.prototype.xR=function(g){return this.me.T(g,3)},d.prototype.UR=function(g){return this.me.T(g,4)},d.prototype.qj=function(g){return this.me.T(g,5)},d.prototype.lk=function(g){return this.me.T(g,6)},d.prototype.UF=function(g){return this.me.T(g,7)},d.prototype.xz=function(g){return this.Ej.T(g,0)},d.prototype.wR=function(g){return this.Ej.T(g,1)},d.prototype.TR=function(g){return this.Ej.T(g,2)},d.prototype.DR=function(g){return this.Fj[g].oa},d.prototype.AR=function(g){return this.Fj[g].va},d.prototype.HX=function(g,v){this.Am==null&&(this.Am=new m.Xt);var b=new h(this);this.Am.sort(g,0,v,b)},d.prototype.GX=function(g,v,b){var C=this;g.Vd(v,b,function(M,$){var L=C.nk(M),q=C.nk($);return L<q||L==q&&d.gq(M)&&d.Gv($)?-1:1})},d.prototype.nk=function(g){var v=this.Fj[g>>1];return d.gq(g)?v.oa:v.va},d}();m.sr=u}(ye||(ye={})),function(m){var j=function(){function T(p){if(p==null)throw m.i.fa("Invalid arguement");this.hf=p;var h=p.nR();h.hS()?p.ef.IG()?this.lo=m.si.PannableFold:this.lo=m.si.Clip:this.lo=m.si.DontClip,h.iS()?p.Yf.IG()?this.Qm=m.si.PannableFold:this.Qm=m.si.Clip:this.Qm=m.si.DontClip,this.Bm=h.Jr,this.mH=h.Vu,p=this.hf.sH,this.aH=p.hs(2147483648),this.Uv=p.hs(1073741824)}return T.zh=function(p,h,a){return h.ww.zh(p,a)},T.Rt=function(p,h,a,u){return p.ww.Rt(h,a,u)},T.Qt=function(p,h,a,u){if(a=0>a?h.length:a,(p=p.ww.Rt(h,a,u))==a)return p;for(var d=h=0;d<a;d++){var g=u[d];g.isNaN()||(h<d&&u[h].L(g),h++)}for(;h<a;h++)u[h].Rc();return p},T.transform=function(p,h,a,u,d){if(p.isIdentity())return m.ta.kP(u,h,a),a;for(var g=[],v=0,b=0;b<a;){for(var C=Math.min(g.length,a-b),M=b,$=0;M<C;M++,$++)g[$]==null?g[$]=h[M].D():h[M].D(g[$]);var L=d?T.Qt(p,g,C,g):T.Rt(p,g,C,g);for($=M=0;M<L;M++,$++)u[b]==null&&(u[b]=new m.Sa(h[b])),u[b].Cb(g[$]);b+=C,v+=L}return v},T.prototype.Rt=function(p,h,a){if(this.hf.isIdentity())return p!=a&&m.ta.Ru(a,p,h),h;var u=this.hf.ef,d=this.hf.Yf,g=u.Sb(),v=d.Sb();if(g==0&&g===v){var b=u.Qp();return d=b/(d=d.Qp()),(b=new m.Dd).setScale(d,d),b.eY(p,h,a),h}if(b=m.O.Fu(Math.min(h,64)),g==3){var C=u.Ji;g=(u=C.fk()).Sb(),a!=p&&m.ta.Ru(a,p,h),m.zb.$k(C,a,h,!0),C.Qt(m.bm.forward,a,h),m.zb.Zk(C,a,h,!0)}if(g==3||v===3)throw m.i.fa("image: transform_in_place_");if(g==2)this.lo==m.si.Clip?(a!=p&&m.ta.Ru(a,p,h),p=u.ml(),m.zb.OS(p,u,a,h)):(a!=p&&m.ta.Ru(a,p,h),u.Wc()&&(g=u.Xd(0),C=u.Oe(),m.zb.EX(a,h,C,g),m.zb.qF(a,h,u,0))),m.zb.IL(u,a,h,b);else for(g=u.Xd(0),C=u.Oe(),u=0;u<h;u++)m.zb.FX(p[u],C,g,a[u]);for(m.zb.GL(this.hf,a,h,b),p=0,(v=v==2)?p=d.zi():isNaN(this.Bm)||(p=this.Bm),v&&this.Qm!=m.si.Clip||m.zb.qF(a,h,d.sc(),p),v&&(m.zb.yG(a,h,d,this.Qm),m.zb.HL(d,a,h,b)),p=h,u=0;u<h;++u)a[u].isNaN()&&p--;return p},T.prototype.zh=function(p,h){if(this.hf.isIdentity()||p.B())return p;if(p.getType()==33)return this.XI(p);var a=this.hf.ef,u=this.hf.Yf,d=a.Sb(),g=u.Sb();if(d==0&&d==g)return h=a.Qp(),h/=u=u.Qp(),(u=new m.Dd).setScale(h,h),(p=m.aa.jg(p)).Oc(u),p;switch(p.getType()){case 1607:case 1736:p=this.VI(p,h);break;case 550:p=this.fW(p,h);break;case 197:p=this.eW(p,h);break;default:throw m.i.fa("")}return p},T.prototype.XI=function(p){var h=p.D(),a=[];return a[0]=h,this.Rt(a,1,a),(p=new m.Sa(p)).Cb(a[0]),p},T.prototype.VI=function(p,h){if(p.tm())throw m.i.fa("curves not supported");var a=p.getType();if(a==1736)return this.gW(p,h);if(a==1607)return this.hW(p,h);throw m.i.fa("projectMultiPath")},T.prototype.gW=function(p,h){var a=this.hf.ef,u=this.hf.Yf,d=a.Sb(),g=u.Sb(),v=m.O.Fu(Math.min(p.I(),64)),b=m.Da.jg(p);d==3&&(d=(a=(p=a.Ji).fk()).Sb(),b=p.$k(b,!0),this.wp(p,m.bm.forward,b),b=p.Zk(b,!0)),p=null,g==3&&(g=(u=(p=u.Ji).fk()).Sb());var C=d==2,M=g==2,$=M?u.sc():u,L=!M&&!this.Uv;g=!1;var q=b;if(C){if((q=m.zb.UI(q,a,this.lo,h)).B())return q}else{if(b=new m.l,q.xc(b),d=a.Oe(),b.G<d.G||b.H>d.H){var U=m.l.construct(b.v-1,d.G,b.C+1,d.H);if((q=m.ri.Nu(q,U,a,NaN,0,h)).B())return q}b.R()>2*d.R()&&(q=m.zb.Hp(q,-2*d.R(),2*d.R(),a,!0,0,!0,h))}b=this.mH,(d=!isNaN(b))&&(q=m.Xl.local().V(q,b,h)),U=M?u.kk():null;var ee=NaN;C&&(ee=a.zi());var Q=u.Wr()!=null;if(this.aH)C&&(m.zb.ur(a,ee,q,v),d&&(C=a.hh(),b*=(ee=a.sc().hh())/C)),m.zb.tr(this.hf,q,L,v),d&&(C=a.sc().hh(),b*=(ee=u.sc().hh())/C),a=q;else{var ge=new m.Ta(q.description);ge.DD(q),C&&(m.zb.ur(a,ee,ge,v),d&&(C=a.hh(),b*=(ee=a.sc().hh())/C)),m.zb.tr(this.hf,ge,L,v),d&&(C=a.sc().pm(),b*=(ee=u.sc().pm())/C),L=NaN,M?(U=u.kk(),L=u.zi()):isNaN(this.Bm)||(L=this.Bm),C=T.tv(a)|T.tv(u),ee=10*$.Xd(0),this.Uv&&(C=3,ee=0),a=m.zb.UQ(q,a,ge,$,L,h,C,ee)}return Q&&(a=m.zb.XD(a,u,h)),M&&(g||(M=$.Oe().R(),a.Tg(0,0).R()>=M-$.Xd(0)&&($=U.getNorthPoleLocation(),M=U.getSouthPoleLocation(),q=U.getNorthPoleGeometry(),U=U.getSouthPoleGeometry(),L=0,q==m.Cg.PE_POLE_POINT&&$!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(L=1),U==m.Cg.PE_POLE_POINT&&M!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(L|=2),L!==0&&(g=!0))),a=m.zb.Mz(a,u,this.Qm,h),d&&(a=m.Xl.local().V(a,b,h)),m.zb.Lx(u,a,v)),a.B()||(g&&(a=m.Yl.local().V(a,u,!1,h)),p!=null&&(a=p.Zk(a,!1),this.wp(p,m.bm.reverse,a),a=p.$k(a,!1))),a},T.tv=function(p){if(p.Sb()!=2)return 0;var h=0,a=p.kk();p=a.getNorthPoleLocation();var u=a.getSouthPoleLocation(),d=a.getNorthPoleGeometry();return a=a.getSouthPoleGeometry(),d==m.Cg.PE_POLE_POINT&&p!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(h=1),a==m.Cg.PE_POLE_POINT&&u!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(h|=2),h},T.prototype.hW=function(p,h){var a=this.hf.ef,u=this.hf.Yf,d=a.Sb(),g=u.Sb(),v=m.O.Fu(Math.min(p.I(),64)),b=m.Ta.jg(p);d==3&&(d=(a=(p=a.Ji).fk()).Sb(),b=p.$k(b,!0),this.wp(p,m.bm.forward,b),b=p.Zk(b,!0)),p=null,g==3&&(g=(u=(p=u.Ji).fk()).Sb());var C=d==2;d=(g=g==2)?u.sc():u;var M=!g&&!this.Uv;if(C){if((b=m.zb.UI(b,a,this.lo,h)).B())return b}else{var $=new m.l;b.xc($);var L=a.Oe();if(($.G<L.G||$.H>L.H)&&($=m.l.construct($.v-1,L.G,$.C+1,L.H),(b=m.ri.Nu(b,$,a,NaN,0,h)).B()))return b}var q=NaN;C&&(q=a.zi()),$=u.Wr()!=null,L=this.mH;var U=!isNaN(L);if(U&&(b=m.Xl.local().V(b,L,h)),this.aH)C&&m.zb.ur(a,q,b,v),U&&(C=a.hh(),L*=(q=a.sc().hh())/C),m.zb.tr(this.hf,b,M,v),U&&(C=a.sc().hh(),L*=(q=u.sc().hh())/C),a=b;else{var ee=new m.Ta(b.description);ee.DD(b),C&&(m.zb.ur(a,q,ee,v),U&&(C=a.hh(),L*=(q=a.sc().hh())/C)),m.zb.tr(this.hf,ee,M,v),U&&(C=a.sc().hh(),L*=(q=u.sc().hh())/C),M=NaN,g?M=u.zi():isNaN(this.Bm)||(M=this.Bm),C=T.tv(a)|T.tv(u),q=10*d.Xd(0),this.Uv&&(C=3,q=0),a=m.zb.VQ(b,a,ee,d,M,h,C,q)}return $&&(a=m.zb.XD(a,u,h)),g&&(a=m.zb.Mz(a,u,this.Qm,h),U&&(a=m.Xl.local().V(a,L,h)),m.zb.Lx(u,a,v)),a.B()||p!=null&&(a=p.Zk(a,!1),this.wp(p,m.bm.reverse,a),a=p.$k(a,!1)),a},T.prototype.eW=function(p,h){var a=(p.ca()+p.R())/400;return a!=0?(a=m.Xl.local().V(p,a,h),a=this.VI(a,h),h=p.Ia(),a.bn(h)):(h=new m.Sa(p.Ip()),a=this.XI(h),h=p.Ia(),a.B()?h.Oa():(p.copyTo(h),p=a.D(),h.K(p.x,p.y,p.x,p.y))),h},T.prototype.fW=function(p,h){p=m.aa.jg(p);var a=this.hf.ef,u=this.hf.Yf,d=a.Sb(),g=u.Sb(),v=m.O.Fu(Math.min(p.I(),64));if(d==3){var b=a.Ji;d=(a=b.fk()).Sb(),p=b.Zk(p,!0),this.wp(b,m.bm.forward,p),p=b.$k(p,!0)}if(d==2){if(this.lo==m.si.Clip?p=m.Xj.local().V(p,a.ml(),a,h):a.Wc()&&(d=new m.l,p.xc(d),a.Oe().contains(d)||(this.lo==m.si.PannableFold&&(p=m.zb.lj(p,a)),m.zb.Jt(p,a.Oe(),a.Xd(0),!0),p=m.zb.Fn(p,a,0,!0,0,h))),p.B())return p;m.zb.ur(a,0,p,v)}else m.zb.Jt(p,a.Oe(),a.Xd(0),!0);return m.zb.tr(this.hf,p,!1,v),a=0,d=!1,b=null,g==3&&(d=!0,g=(u=(b=u.Ji).fk()).Sb()),(g=g==2)?a=u.zi():isNaN(this.Bm)||(a=this.Bm),g&&this.Qm!=m.si.Clip||(p=m.zb.Fn(p,u.sc(),a,!1,0,h)),g&&(p=m.zb.Mz(p,u,this.Qm,h),m.zb.Lx(u,p,v),p.B())||d&&(p=b.Zk(p,!0),this.wp(b,m.bm.reverse,p),p=b.$k(p,!0)),p},T.prototype.wp=function(p,h,a){var u=a.I();if(u!=0){for(var d=a.ub(0),g=m.O.lg(200,0),v=[],b=0;b<u;){var C=Math.min(100,u-b);d.Vw(2*b,2*C,g,2,!0);for(var M=0;M<C;++M)v[M]=m.h.construct(g[2*b],g[2*b+1]);p.Qt(h,v,C),b+=C}a.Pc(1993)}},T.Uy=function(p,h,a){if(p==null||h==null||!h.Wc())throw m.i.fa("Invalid Arguement");if(p.B())return p;var u=p.getType();return u==197?(u=new m.Da(p.description)).ad(p,!1):m.aa.yd(u)?(u=new m.Ta(p.description)).oc(p,!0):u=p,(u=m.zb.lj(u,h)).B()?u:m.zb.Fn(u,h,0,u!=p,0,a)},T.nj=function(p,h,a,u){if(p==null||h==null||!h.Wc())throw m.i.fa("Invalid Arguement");if(p.B())return p;var d=p.getType();if(m.aa.Hc(d)){p=m.zb.lj(p,h),d=new m.l,p.A(d);for(var g=m.ta.ty(h,d,!1),v=h.gh(),b=Math.floor((d.v-v.v)/v.R())*v.R()+v.v;b<d.C;)b>d.v+g&&b<d.C-g&&(p=m.zb.uS(p,h,a,b)),b+=v.R()}else{if(d==197)return(d=new m.Da(p.description)).ad(p,!1),T.nj(d,h,a,u);if(m.aa.yd(d))return(d=new m.Ta(p.description)).oc(p,!0),T.nj(d,h,a,u)}return T.Uy(p,h,u)},T}();m.bu=j}(ye||(ye={})),function(m){var j=function(T){function p(h,a,u,d){var g=T.call(this)||this;return h===void 0?g.description=m.ee.og():u===void 0?g.description=h:(g.description=m.ee.og(),g.ZB(h,a),g.Ql(u,d)),g}return ri(p,T),p.prototype.getType=function(){return 322},p.prototype.Qb=function(){var h=this.sa-this.pa,a=this.na-this.la;return Math.sqrt(h*h+a*a)},p.prototype.Bi=function(h){var a=this.sa-this.pa,u=this.na-this.la;return Math.sqrt(a*a+u*u)<=h},p.prototype.Pn=function(){return!1},p.prototype.kg=function(){var h=new m.h;return h.uc(this.wc(),this.ac()),h},p.cP=function(h,a){return new p(h.x,h.y,a.x,a.y)},p.prototype.bn=function(h){h.Oa(),h.Nf(this.description);var a=new m.l;this.A(a),h.Xo(a),a=1;for(var u=this.description.Aa;a<u;a++)for(var d=this.description.kd(a),g=m.ra.Va(d);a<g;a++){var v=this.Tg(d,0);h.setInterval(d,0,v)}},p.prototype.A=function(h){h.K(this.sa,this.na,this.pa,this.la),h.normalize()},p.prototype.Qo=function(h){h.Oa(),h.Zb(this.sa,this.na,this.Od(0,1,0)),h.Zb(this.pa,this.la,this.Od(1,1,0))},p.prototype.Oc=function(h){if(h instanceof m.Dd){this.vc();var a=new m.h;a.x=this.sa,a.y=this.na,h.Eh(a,a),this.sa=a.x,this.na=a.y,a.x=this.pa,a.y=this.la,h.Eh(a,a),this.pa=a.x,this.la=a.y}else this.vc(),(a=new m.Nd).x=this.sa,a.y=this.na,a.z=this.Od(0,1,0),a=h.fp(a),this.sa=a.x,this.na=a.y,this.tn(0,1,0,a.z),a.x=this.pa,a.y=this.la,a.z=this.Od(1,1,0),a=h.fp(a),this.pa=a.x,this.la=a.y,this.tn(1,1,0,a.z)},p.prototype.Ia=function(){return new p(this.description)},p.prototype.Tx=function(h,a){return(this.pa-h-(this.sa-h))*(this.la-a+(this.na-a))*.5},p.prototype.vx=function(h){return h*this.Qb()},p.prototype.NG=function(h){return h/this.Qb()},p.prototype.DF=function(h){return m.lc.hq(this.sa,this.pa,h)},p.prototype.fR=function(h){return m.lc.hq(this.na,this.la,h)},p.prototype.dl=function(h,a){var u=new m.ig;return this.ah(h,a,u),u.get()},p.prototype.ah=function(h,a,u){if(u==null)throw m.i.N();u.Or(),(u=u.get()).Nf(this.description);var d=new m.h;this.hc(h,d),u.ZB(d.x,d.y),this.hc(a,d),u.Ql(d.x,d.y),d=1;for(var g=this.description.Aa;d<g;d++)for(var v=this.description.Ed(d),b=m.ra.Va(v),C=0;C<b;C++){var M=this.Uc(h,v,C);u.YB(v,C,M),M=this.Uc(a,v,C),u.OB(v,C,M)}},p.prototype.Uc=function(h,a,u){if(a==0)return u==0?this.hc(h).x:this.hc(h).y;switch(m.ra.lz(a)){case 0:return .5>h?this.wv(a,u):this.gv(a,u);case 1:var d=this.wv(a,u);return a=this.gv(a,u),m.lc.hq(d,a,h);case 2:throw m.i.fa("not implemented")}throw m.i.Qa()},p.prototype.fe=function(h,a){var u=this.pa-this.sa,d=this.la-this.na,g=u*u+d*d;return g==0?.5:(h=((h.x-this.sa)*u+(h.y-this.na)*d)/g,a||(0>h?h=0:1<h&&(h=1)),h)},p.prototype.cq=function(h,a,u,d){if(h){if((h=this.la-this.na)==0)return a==this.la?-1:0;if(0>(a=(a-this.na)/h)||1<a)return 0;u!=null&&(u[0]=this.DF(a))}else{if((h=this.pa-this.sa)==0)return a==this.pa?-1:0;if(0>(a=(a-this.sa)/h)||1<a)return 0;u!=null&&(u[0]=this.fR(a))}return d!=null&&(d[0]=a),1},p.prototype.Pe=function(h,a){var u=this.la-this.na;return u==0?h==this.la?a:NaN:(h=(h-this.na)/u,a=this.DF(h),h==1&&(a=this.pa),a)},p.prototype.ru=function(h,a,u){return 0<=this.rp(h.x,h.y,a,u)},p.prototype.vi=function(h,a,u){return 0<=this.rp(h,a,u,!0)},p.prototype.qs=function(h,a){return this.ru(h,a,!1)},p.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var h=this.sa;this.sa=this.pa,this.pa=h,h=this.na,this.na=this.la,this.la=h,h=0;for(var a=this.description.Oq-2;h<a;h++){var u=this.ka[h];this.ka[h]=this.ka[h+a],this.ka[h+a]=u}}},p.prototype.uu=function(h,a){(a=m.h.construct(h,a)).sub(this.ac());var u=new m.h;return u.uc(this.wc(),this.ac()),(h=u.wi(a))>(a=8881784197001252e-31*(Math.abs(u.x*a.y)+Math.abs(u.y*a.x)))?-1:h<-a?1:0},p.prototype.rp=function(h,a,u,d){var g=this.sa,v=this.na,b=h-g,C=a-v;if((b=Math.sqrt(b*b+C*C))<=Math.max(u,6661338147750939e-31*b))return d&&b==0?NaN:0;if(b=h-this.pa,C=a-this.la,(b=Math.sqrt(b*b+C*C))<=Math.max(u,6661338147750939e-31*b))return d&&b==0?NaN:1;if(b=this.pa-this.sa,C=this.la-this.na,0<(d=Math.sqrt(b*b+C*C))){var M=1/d,$=h-g,L=a-v,q=$*(b*=M)+L*(C*=M),U=17763568394002505e-31*(Math.abs($*b)+Math.abs(L*C)),ee=b;if(b=-C,C=ee,q<-(U=Math.max(u,U))||q>d+U)return NaN;if(Math.abs($*b+L*C)<=Math.max(u,17763568394002505e-31*(Math.abs($*b)+Math.abs(L*C)))&&(.5>=(b=m.O.Rk(q*M,0,1))?(C=this.sa+(this.pa-this.sa)*b,d=this.na+(this.la-this.na)*b):(C=this.pa-(this.pa-this.sa)*(1-b),d=this.la-(this.la-this.na)*(1-b)),m.h.Oy(C,d,h,a)<=u)){if(.5>b){if(m.h.Oy(C,d,g,v)<=u)return 0}else if(m.h.Oy(C,d,this.pa,this.la)<=u)return 1;return b}}return NaN},p.prototype.Nb=function(h){return h!=null&&(h==this||h.constructor===this.constructor&&this.FM(h))},p.prototype.rD=function(h,a,u){var d=u?this.sa:this.pa;u=u?this.na:this.la;var g=new m.h;return g.x=h.pa-d,g.y=h.la-u,!(a.Qh(g)>6661338147750939e-31*a.fD(g))||(g.x=h.sa-d,g.y=h.na-u,a.Qh(g)<=6661338147750939e-31*a.fD(g))},p.prototype.qD=function(h){var a=new m.h;return a.x=this.pa-this.sa,a.y=this.la-this.na,!!this.rD(h,a,!1)&&(a.Sq(),!!this.rD(h,a,!0))},p.NM=function(h,a){var u=h.uu(a.sa,a.na),d=h.uu(a.pa,a.la);return!(0>u&&0>d||0<u&&0<d)&&(u=a.uu(h.sa,h.na),d=a.uu(h.pa,h.la),!(0>u&&0>d||0<u&&0<d)&&((u=h.Qb())>(d=a.Qb())?h.qD(a):a.qD(h)))},p.LM=function(h,a,u){var d=m.h.construct(NaN,NaN),g=h.pa-h.sa,v=h.la-h.na,b=a.pa-a.sa,C=a.la-a.na,M=b*v-g*C;if(M==0)return d;var $=8881784197001252e-31*(Math.abs(b*v)+Math.abs(g*C)),L=a.sa-h.sa,q=a.na-h.na,U=b*q-L*C,ee=U/M,Q=Math.abs(M);return ee<-(b=(8881784197001252e-31*(Math.abs(b*q)+Math.abs(L*C))*Q+$*Math.abs(U))/(M*M)+2220446049250313e-31*Math.abs(ee))||ee>1+b||(b=(C=g*q-L*v)/M)<-(g=(8881784197001252e-31*(Math.abs(g*q)+Math.abs(L*v))*Q+$*Math.abs(C))/(M*M)+2220446049250313e-31*Math.abs(b))||b>1+g||(ee=m.O.Rk(ee,0,1),g=m.O.Rk(b,0,1),v=h.hc(ee),M=a.hc(g),($=new m.h).uc(v,M),$.length()>u&&($.add(v,M),$.scale(.5),ee=h.fe($,!1),g=a.fe($,!1),h=h.hc(ee),a=a.hc(g),h.sub(a),h.length()>u)||d.ma(ee,g)),d},p.OM=function(h,a,u,d){var g=0;if((h.sa==a.sa&&h.na==a.na||h.sa==a.pa&&h.na==a.la)&&(g++,!d))return 1;if(h.pa==a.sa&&h.la==a.na||h.pa==a.pa&&h.la==a.la){if(++g==2)return 2;if(!d)return 1}return a.vi(h.sa,h.na,u)||a.vi(h.pa,h.la,u)||h.vi(a.sa,a.na,u)||h.vi(a.pa,a.la,u)?1:d&&g!=0||p.NM(h,a)==0?0:1},p.Zx=function(h,a,u,d,g,v){var b=0,C=h.rp(a.sa,a.na,v,!1),M=h.rp(a.pa,a.la,v,!1),$=a.rp(h.sa,h.na,v,!1),L=a.rp(h.pa,h.la,v,!1);return isNaN(C)||(d!=null&&(d[b]=C),g!=null&&(g[b]=0),u!=null&&(u[b]=m.h.construct(a.sa,a.na)),b++),isNaN(M)||(d!=null&&(d[b]=M),g!=null&&(g[b]=1),u!=null&&(u[b]=m.h.construct(a.pa,a.la)),b++),b==2||isNaN($)||C==0&&$==0||M==0&&$==1||(d!=null&&(d[b]=0),g!=null&&(g[b]=$),u!=null&&(u[b]=m.h.construct(h.sa,h.na)),b++),b==2||isNaN(L)||C==1&&L==0||M==1&&L==1||(d!=null&&(d[b]=1),g!=null&&(g[b]=L),u!=null&&(u[b]=m.h.construct(a.pa,a.la)),b++),0<b?(b==2&&d!=null&&d[0]>d[1]&&(h=d[0],d[0]=d[1],d[1]=h,g!=null&&(d=g[0],g[0]=g[1],g[1]=d),u!=null&&(g=m.h.construct(u[0].x,u[0].y),u[0]=u[1],u[1]=g)),b):(b=p.LM(h,a,v),isNaN(b.x)?0:(u!=null&&(u[0]=h.hc(b.x)),d!=null&&(d[0]=b.x),g!=null&&(g[0]=b.y),1))},p.prototype.eG=function(){return 0},p.prototype.op=function(){},p.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},p}(m.SC);m.yb=j}(ye||(ye={})),function(m){var j=function(){function T(){this.Jm=[],this.ya=-1}return T.prototype.La=function(){return this.ya},T.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var p=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),p}return this.Jm=null},T.prototype.ZX=function(p){this.Jm.push(p)},T.prototype.qe=function(){},T}();m.gL=j}(ye||(ye={})),function(m){var j;(j=m.SL||(m.SL={}))[j.enumFillRuleOddEven=0]="enumFillRuleOddEven",j[j.enumFillRuleWinding=1]="enumFillRuleWinding";var T=function(p){function h(a,u){var d=p.call(this)||this;if(d.xf=!1,d.Eq=null,d.sq=0,d.rq=0,d.Aj=null,d.Mg=!1,d.nb=null,d.mb=null,d.Ve=null,d.Lj=null,d.Sd=null,d.tq=0,d.gb=0,d.xq=0,u===void 0)d.xf=a,d.Mg=!1,d.tq=0,d.sq=0,d.rq=0,d.wa=0,d.description=m.ee.og();else{if(u==null)throw m.i.N();d.xf=a,d.Mg=!1,d.tq=0,d.sq=0,d.rq=0,d.wa=0,d.description=u}return d.Aj=null,d.gb=0,d}return ri(h,p),h.prototype.tm=function(){return 0<this.tq},h.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new m.Sa(this.description):this.Eq.Nf(this.description)},h.prototype.sx=function(a,u){var d=new m.h;d.x=a,d.y=u,this.Lt(d)},h.prototype.Lt=function(a){this.Yx(),this.Eq.Cb(a),this.Mg=!0},h.prototype.nf=function(a){if(a.B())throw m.i.N();this.Jl(a.description),this.Yx(),a.copyTo(this.Eq),this.Mg=!0},h.prototype.Sx=function(){var a=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=m.Yc.Oh(2),this.nb.write(0,0),this.mb=m.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),a++);var u=this.wa;this.nb.write(this.nb.size-1,this.wa+a),this.dm(u+a),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(u,this.Eq),this.Mg=!1)},h.prototype.yj=function(a,u){this.Sx(),this.Cb(this.wa-1,a,u)},h.prototype.Ci=function(a){this.Sx(),this.Cb(this.wa-1,a)},h.prototype.lineTo=function(a){this.Sx(),this.Ht(this.wa-1,a)},h.prototype.CU=function(a){if(this.vc(),this.xf)throw m.i.Qa();var u=this.da();if(a>u)throw m.i.Qa();if(this.dc(a)){if(this.mb==null)throw m.i.Qa();var d=this.wa,g=this.Ba(a),v=this.Vc(a);this.dm(this.wa+1),this.mc();for(var b=0,C=this.description.Aa;b<C;b++)if(this.za[b]!=null){var M=m.ra.Va(this.description.Ed(b));this.za[b].Mn(M*v,this.za[b],M*g,M,!0,1,M*d)}for(;u>a;u--)d=this.nb.read(u),this.nb.write(u,d+1);this.mb.KE(a,1)}},h.prototype.Ap=function(){if(this.wx(),a===void 0){this.Mg=!1;var a=this.da()-1}var u=this.mb.read(a);this.mb.write(a,1|u),this.Ve!=null&&(a=this.Vc(a)-1,this.Ve.write(a,1),this.Lj.write(a,-1))},h.prototype.dc=function(a){return!!(1&this.mb.read(a))},h.prototype.Nn=function(a){if(this.dc(a))return!0;var u=this.Ba(a);return!(u>(a=this.Vc(a)-1))&&(u=this.Na(u),a=this.Na(a),u.qb(a))},h.prototype.yv=function(a){return!!(2&this.mb.read(a))},h.prototype.oc=function(a,u){if(this.Jl(a.description),a.getType()!=322)throw m.i.Qa();var d=new m.Sa;(u||this.B())&&(a.To(d),this.nf(d)),a.Po(d),this.lineTo(d)},h.prototype.tp=function(a){var u=this.wa==0;this.sx(a.v,a.G),this.yj(a.v,a.H),this.yj(a.C,a.H),this.yj(a.C,a.G),this.Ap(),this.Mg=!1,u&&this.Lf(256,!1)},h.prototype.ad=function(a,u){if(!a.B()){for(var d=this.wa==0,g=new m.Sa(this.description),v=0;4>v;v++)a.Hf(u?4-v-1:v,g),v==0?this.nf(g):this.lineTo(g);this.Ap(),this.Mg=!1,d&&!u&&this.Lf(256,!1)}},h.prototype.add=function(a,u){for(var d=0;d<a.da();d++)this.addPath(a,d,!u)},h.prototype.addPath=function(a,u,d){this.vf(-1,a,u,d)},h.prototype.Yk=function(a,u){this.Hz(a,u)},h.prototype.Dr=function(a,u,d,g,v){if(v||this.da()!=0||(v=!0),0>u&&(u=a.da()-1),u>=a.da()||0>d||0>g||g>a.rv(u))throw m.i.fa("index out of bounds");if(g!=0){var b=a.dc(u)&&d+g==a.rv(u);if(!b||g!=1){if(this.Mg=!1,this.Jl(a.description),d=a.Ba(u)+d+1,v&&(g++,d--),b&&g--,b=this.wa,this.dm(this.wa+g),this.mc(),v){if(g==0)return;this.nb.add(this.wa),v=a.mb.read(u),v&=-5,this.xf&&(v|=1),this.mb.write(this.mb.size-1,v),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);v=0;for(var C=this.description.Aa;v<C;v++){var M=this.description.kd(v),$=m.ra.Va(M),L=a.description.Pf(M);0>L||a.za[L]==null?this.za[v].Ln($*b,m.ra.se(M),g*$,$*b):this.za[v].Mn($*b,a.za[L],$*d,g*$,!0,$,$*b)}if(this.tm()||a.yv(u))throw m.i.Qa();this.Pc(1993)}}},h.prototype.oJ=function(){for(var a=0,u=this.da();a<u;a++)this.FW(a)},h.prototype.FW=function(a){if(this.mc(),a>=this.da())throw m.i.N();var u=this.Ba(a),d=this.Ja(a);a=this.dc(a)?1:0;for(var g=0,v=this.description.Aa;g<v;g++)if(this.za[g]!=null){var b=m.ra.Va(this.description.Ed(g));this.za[g].ni(b*(u+a),b*(d-a),b)}this.Pc(1993)},h.prototype.Zq=function(a){this.mc();var u=this.da();if(0>a&&(a=u-1),a>=u)throw m.i.N();for(var d=this.Ba(a),g=this.Ja(a),v=0,b=this.description.Aa;v<b;v++)if(this.za[v]!=null){var C=m.ra.Va(this.description.Ed(v));this.za[v].En(C*d,C*g,C*this.wa)}for(d=a+1;d<=u;d++)v=this.nb.read(d),this.nb.write(d-1,v-g);if(this.mb==null)for(d=a+1;d<=u;d++)a=this.mb.read(d),this.mb.write(d-1,a);this.nb.resize(u),this.mb.resize(u),this.wa-=g,this.Pg-=g,this.Pc(1993)},h.prototype.vf=function(a,u,d,g){if(u==this||d>=u.da())throw m.i.N();var v=this.da();if(a>v)throw m.i.N();0>a&&(a=v),0>d&&(d=u.da()-1),this.Mg=!1,this.Jl(u.description),u.mc();var b=u.Ba(d),C=u.Ja(d),M=this.wa,$=u.dc(d)&&!g?1:0;this.dm(this.wa+C),this.mc();for(var L=a<v?this.Ba(a):M,q=0,U=this.description.Aa;q<U;q++){var ee=this.description.Ed(q),Q=u.description.Pf(ee),ge=m.ra.Va(ee);0<=Q&&u.za[Q]!=null?($!=0&&this.za[q].Mn(L*ge,u.za[Q],ge*b,ge,!0,ge,ge*M),this.za[q].Mn((L+$)*ge,u.za[Q],ge*(b+$),ge*(C-$),g,ge,ge*(M+$))):this.za[q].Ln(L*ge,m.ra.se(ee),ge*C,ge*M)}for(this.nb.add(M+C),g=v;g>=a+1;g--)b=this.nb.read(g-1),this.nb.write(g,b+C);for(u.yv(d),this.mb.add(0),g=v-1;g>=a+1;g--)v=this.mb.read(g),v&=-5,this.mb.write(g+1,v);v=u.JR().read(d),v&=-5,this.xf&&(v|=1),this.mb.write(a,v)},h.prototype.Hz=function(a,u){var d=-1,g=this.da();if(d>g)throw m.i.N();0>d&&(d=g),this.Mg=!1;var v=this.wa;this.dm(this.wa+u),this.mc();var b=d<g?this.Ba(d):v;if(a!=null)this.za[0].Iz(2*b,a,0,u,!0,2*v);else{var C=m.ra.se(0);this.za[0].Ln(2*b,C,2*u,2*v)}a=1;for(var M=this.description.Aa;a<M;a++){C=this.description.kd(a);var $=m.ra.Va(C);C=m.ra.se(C),this.za[a].Ln(b*$,C,$*u,$*v)}for(this.nb.add(this.wa),v=g;v>=d+1;v--)b=this.nb.read(v-1),this.nb.write(v,b+u);for(this.mb.add(0),v=g-1;v>=d+1;v--)u=this.mb.read(v),u&=-5,this.mb.write(v+1,u);this.xf&&this.mb.write(d,1)},h.prototype.qG=function(a,u,d){var g=-1;if(0>a&&(a=this.da()),a>this.da()||g>this.Ja(a)||d>u.length)throw m.i.fa("index out of bounds");if(d!=0){a==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>g&&(g=this.Ja(a)),this.mc();var v=this.wa;this.dm(this.wa+d),this.mc();for(var b=0,C=this.description.Aa;b<C;b++){var M=this.description.Ed(b),$=m.ra.Va(M);this.za[b].Ut($*(this.Ba(a)+g+d),(v-this.Ba(a)-g)*$,this.za[b],$*(this.Ba(a)+g),!0,$),b==0?this.za[b].vC($*(this.Ba(a)+g),d,u,0,!0):this.za[b].Wj(m.ra.se(M),(this.Ba(a)+g)*$,d*$)}for(this.tm()&&(this.Ve.Ut(this.Ba(a)+g+d,v-this.Ba(a)-g,this.Ve,this.Ba(a)+g,!0,1),this.Lj.Ut(this.Ba(a)+g+d,v-this.Ba(a)-g,this.Lj,this.Ba(a)+g,!0,1),this.Ve.Wj(1,this.Ba(a)+g,d),this.Lj.Wj(-1,this.Ba(a)+g,d)),a+=1,u=this.da();a<=u;a++)this.nb.write(a,this.nb.read(a)+d)}},h.prototype.wf=function(a,u,d){var g=this.da();if(0>a&&(a=this.da()),a>=g||u>this.Ja(a))throw m.i.fa("index out of bounds");a==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>u&&(u=this.Ja(a));var v=this.wa;this.dm(this.wa+1),this.mc();var b=this.Ba(a);this.za[0].vj(2*(b+u),d,2*v),d=1;for(var C=this.description.Aa;d<C;d++){var M=this.description.Ed(d),$=m.ra.Va(M);this.za[d].Ln($*(b+u),m.ra.se(M),$,$*v)}for(a+=1;a<=g;a++)this.nb.write(a,this.nb.read(a)+1)},h.prototype.DB=function(a,u){var d=this.da();if(0>a&&(a=d-1),a>=d||u>=this.Ja(a))throw m.i.fa("index out of bounds");this.mc();var g=this.Ba(a);0>u&&(u=this.Ja(a)-1),u=g+u,g=0;for(var v=this.description.Aa;g<v;g++)if(this.za[g]!=null){var b=m.ra.Va(this.description.Ed(g));this.za[g].En(b*u,b,b*this.wa)}for(;d>=a+1;d--)u=this.nb.read(d),this.nb.write(d,u-1);this.wa--,this.Pg--,this.Pc(1993)},h.prototype.uE=function(a,u,d){var g=this.Ba(a)+u;if((d=this.Ba(d)+void 0)<g||0>g||d>this.I()-1)throw m.i.N();u=0,(a=this.Ga()).Vb(g);do{for(;a.Ha()&&(g=a.ha(),a.wb()!=d);)u+=g=g.Qb();if(a.wb()==d)break}while(a.$a());return u},h.prototype.fO=function(a,u,d){if(u=this.Ba(a)+u,d=this.Ba(a)+d,0>u||d>this.I()-1)throw m.i.N();var g=this.Ga();if(u>d){if(!this.dc(a))throw m.i.N("cannot iterate across an open path");g.JB()}var v=a=0;g.Vb(u);do v+=a,a=g.ha().Qb();while(g.wb()!=d);return v},h.prototype.mg=function(){return m.pi.gm(this,null)},h.prototype.KS=function(a,u,d){for(var g=a;g<d-1;g++)if(this.dc(g))throw m.i.N("cannot interpolate across closed paths");if((g=this.description.Aa)!=1){var v=this.uE(a,u,d);if(v!=0)for(var b=1;b<g;b++){var C=this.description.kd(b);if(m.ra.lz(C)!=2)for(var M=m.ra.Va(C),$=0;$<M;$++)this.MS(C,a,u,d,v,$)}}},h.prototype.JS=function(a,u,d){var g=this.description.Aa;if(g!=1){var v=this.fO(a,u,d);if(v!=0)for(var b=1;b<g;b++){var C=this.description.kd(b);if(m.ra.lz(C)!=2)for(var M=m.ra.Va(C),$=0;$<M;$++)this.LS(C,a,u,d,v,$)}}},h.prototype.MS=function(a,u,d,g,v,b){var C=this.Ga(),M=this.Ba(u)+d;g=this.Ba(g)+void 0,u=this.Uc(a,M,b),d=this.Uc(a,g,b);var $=u,L=0;C.Vb(M);do if(C.Ha()){if(C.ha(),C.wb()==g)break;this.setAttribute(a,C.wb(),b,$),C.li();do{if(M=C.ha(),C.ik()==g)return;L+=M=M.Qb(),$=m.lc.hq(u,d,L/v),C.On()||this.setAttribute(a,C.ik(),b,$)}while(C.Ha())}while(C.$a())},h.prototype.LS=function(a,u,d,g,v,b){var C=this.Ga(),M=this.Ba(u)+d;if((u=this.Ba(u)+g)!=M){g=this.Uc(a,M,b),d=this.Uc(a,u,b);var $=0;C.Vb(M),C.JB(),M=g;do{var L=C.ha();this.setAttribute(a,C.wb(),b,M),$+=M=L.Qb(),M=m.lc.hq(g,d,$/v)}while(C.ik()!=u)}},h.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},h.prototype.Oc=function(a){a instanceof m.Dd?this.YD(a,-1):this.wN(a)},h.prototype.YD=function(a,u){if(!this.B()&&!a.isIdentity()){this.mc();var d=this.za[0],g=new m.h,v=new m.h;if(0>u){var b=this.tm(),C=0;u=this.wa}else b=this.yv(u),C=this.Ba(u),u=this.Vc(u);for(;C<u;C++){if(g.x=d.read(2*C),g.y=d.read(2*C+1),b){var M=this.Lj.read(C);if(0<=M)switch(7&this.Ve.read(C)){case 2:v.x=this.Sd.read(M),v.y=this.Sd.read(M+1),a.Eh(v,v),this.Sd.write(M,v.x),this.Sd.write(M+1,v.y),v.x=this.Sd.read(M+3),v.y=this.Sd.read(M+4),a.Eh(v,v),this.Sd.write(M+3,v.x),this.Sd.write(M+4,v.y);break;case 4:throw m.i.Qa()}}a.Eh(g,g),d.write(2*C,g.x),d.write(2*C+1,g.y)}this.Pc(1993)}},h.prototype.wN=function(a){if(!this.B()){this.re(1),this.mc();for(var u=this.za[0],d=this.za[1],g=new m.Nd,v=new m.Nd,b=this.tm(),C=0;C<this.wa;C++){if(g.x=u.read(2*C),g.y=u.read(2*C+1),g.z=d.read(C),b){var M=this.Lj.read(C);if(0<=M)switch(7&this.Ve.read(C)){case 2:v.x=this.Sd.read(M),v.y=this.Sd.read(M+1),v.z=this.Sd.read(M+2),v=a.fp(v),this.Sd.write(M,v.x),this.Sd.write(M+1,v.y),this.Sd.write(M+1,v.z),v.x=this.Sd.read(M+3),v.y=this.Sd.read(M+4),v.z=this.Sd.read(M+5),v=a.fp(v),this.Sd.write(M+3,v.x),this.Sd.write(M+4,v.y),this.Sd.write(M+5,v.z);break;case 4:throw m.i.Qa()}}g=a.fp(g),u.write(2*C,g.x),u.write(2*C+1,g.y),d.write(C,g.z)}this.Pc(1993)}},h.prototype.iy=function(){this.nb==null&&(this.nb=m.Yc.Oh(1,0),this.mb=m.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},h.prototype.op=function(a){a.Mg=!1,a.tq=this.tq,a.xq=this.xq,a.nb=this.nb!=null?m.ia.Bn(this.nb):null,a.mb=this.mb!=null?m.pn.Bn(this.mb):null,a.Lj=this.Lj!=null?m.ia.Bn(this.Lj):null,a.Ve=this.Ve!=null?m.pn.Bn(this.Ve):null,a.Sd=this.Sd!=null?m.be.Bn(this.Sd):null,a.sq=this.sq,a.rq=this.rq,a.Aj=this.ak(1024)?null:this.Aj},h.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var a=this.Ga(),u=new m.Fx(0);a.$a();)for(;a.Ha();)u.add(a.ha().Qb());return this.sq=u.rm(),this.Lf(512,!1),u.rm()},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h&&p.prototype.Nb.call(this,a)))return!1;var u=this.da();return!(u!=a.da()||this.nb!=null&&!this.nb.Nb(a.nb,0,u+1)||this.xq!=a.xq||this.mb!=null&&!this.mb.Nb(a.mb,0,u))&&p.prototype.Nb.call(this,a)},h.prototype.Ga=function(){return new m.YL(this)},h.prototype.hy=function(a){if(p.prototype.hy.call(this,a),this.tm())for(a=this.Ga();a.$a();)a.Ha()},h.prototype.yp=function(a,u){if(p.prototype.yp.call(this,a,u),this.tm())for(a=this.Ga();a.$a();)a.Ha()},h.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},h.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},h.prototype.Ev=function(a){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(a)):!!(4&this.mb.read(a)))},h.prototype.Ir=function(a){return this.xf?(this.xu(),this.Aj.read(a)):0},h.prototype.xu=function(){if(this.ak(1024)){var a=this.da();this.Aj==null?this.Aj=new m.be(a):this.Aj.size!=a&&this.Aj.resize(a),a=new m.Fx(0);for(var u=new m.Fx(0),d=new m.h,g=0,v=this.Ga();v.$a();){for(u.reset(),this.D(this.Ba(v.gb),d);v.Ha();)u.add(v.ha().Tx(d.x,d.y));a.add(u.rm());var b=g++;this.Aj.write(b,u.rm())}this.rq=a.rm(),this.Lf(1024,!1)}},h.prototype.FR=function(){if(this.xf){this.fm();for(var a=this.da(),u=0;u<a;u++)4&this.mb.read(u)}},h.prototype.fm=function(){if(this.ak(8)){this.xu();var a=this.da();(this.mb==null||this.mb.size<a)&&(this.mb=m.Yc.Mr(a+1));for(var u=1,d=0;d<a;d++){var g=this.Aj.read(d);d==0&&(u=0<g?1:-1),0<g*u?this.mb.zJ(d,4):this.mb.KE(d,4)}this.Lf(8,!1)}},h.prototype.sz=function(a){var u=this.gb,d=this.da();if(0<=u&&u<d){if(a<this.Vc(u)){if(a>=this.Ba(u))return u;u--}else u++;if(0<=u&&u<d&&a>=this.Ba(u)&&a<this.Vc(u))return this.gb=u}if(5>d){for(u=0;u<d;u++)if(a<this.Vc(u))return this.gb=u;throw m.i.fa("corrupted geometry")}for(u=0,--d;d>u;){var g=u+(d-u>>1);if(a<this.Ba(g))d=g-1;else{if(!(a>=(u=this.Vc(g))))return this.gb=g;u=g+1}}return this.gb=u},h.prototype.yz=function(){var a=this.I();if(!this.xf){a-=this.da();for(var u=0,d=this.da();u<d;u++)this.dc(u)&&a++}return a},h.prototype.rv=function(a){var u=this.Ja(a);return this.dc(a)||u--,u},h.prototype.Ia=function(){return new h(this.xf,this.description)},h.prototype.Db=function(){return this.xf?2:1},h.prototype.getType=function(){return this.xf?1736:1607},h.prototype.QJ=function(a){this.nb=a,this.Pc(16777215)},h.prototype.VR=function(){return this.wx(),this.Ve},h.prototype.JR=function(){return this.wx(),this.mb},h.prototype.PJ=function(a){this.mb=a,this.Pc(16777215)},h.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},h.prototype.Vc=function(a){return this.nb.read(a+1)},h.prototype.Ja=function(a){return this.nb.read(a+1)-this.nb.read(a)},h.prototype.Ba=function(a){return this.nb.read(a)},h.prototype.lu=function(a,u){this.Bb==null&&(this.Bb=new m.Uk),u=m.Nx.pW(u);var d=this.Bb.Fk;if(d!=null){if(!(d.Ik<a||u>d.RR()))return!0;this.Bb.yD(null)}return d=m.Nx.create(this,a,u),this.Bb.yD(d),!0},h.prototype.cc=function(){var a=p.prototype.cc.call(this);if(!this.Ac()){var u=this.da();this.nb!=null&&this.nb.An(a,0,u+1),this.mb!=null&&this.mb.An(a,0,u)}return a},h.prototype.ZF=function(a){return this.Ve!=null?this.Ve.read(a):1},h.prototype.bc=function(a,u,d){var g=this.sz(a);if(a==this.Vc(g)-1&&!this.dc(g))throw m.i.fa("index out of bounds");this.mc();var v=this.Ve,b=1;if(v!=null&&(b=7&v.read(a)),b!==1)throw m.i.Qa();if(u.Or(),u=u.get(),d?u.Nf(m.ee.og()):u.Nf(this.description),g=a==this.Vc(g)-1&&this.dc(g)?this.Ba(g):a+1,v=new m.h,this.D(a,v),u.Dc(v),this.D(g,v),u.Qc(v),!d)for(d=1,v=this.description.Aa;d<v;d++){b=this.description.Ed(d);for(var C=m.ra.Va(b),M=0;M<C;M++){var $=this.Uc(b,a,M);u.YB(b,M,$),$=this.Uc(b,g,M),u.OB(b,M,$)}}},h.prototype.Rj=function(a,u){if(a>=this.da())throw m.i.N();if(this.B())u.Oa();else{if(this.yv(a))throw m.i.fa("not implemented");var d=this.ub(0),g=new m.h,v=new m.l;v.Oa();var b=this.Ba(a);for(a=this.Vc(a);b<a;b++)d.tc(2*b,g),v.Zb(g);u.K(v)}},h.prototype.fj=function(a){return this.Bb==null&&(this.Bb=new m.Uk),!(a==0||16>this.I())&&(a=m.ta.nE(this),this.Bb.WM(a),!0)},h.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new m.Uk),this.Bb.zo==null){this.Bb.xD(null);var a=m.ta.YN(this);this.Bb.xD(a)}},h.prototype.Yo=function(a){this.xq=a},h.prototype.In=function(){return this.xq},h.prototype.DD=function(a){if(this==a)throw m.i.fa("MultiPathImpl.add");for(var u=this.da(),d=0;d<a.da();d++)this.addPath(a,d,!0),this.CU(u),u++},h.prototype.kO=function(a){var u=this.sz(a),d=this.Ba(u);if(d!=a){if(a>=(u=this.Vc(u))||a<d)throw m.i.fa("change_ring_start_point");for(var g=0,v=this.description.Aa;g<v;g++){var b=this.description.kd(g);b=m.ra.Va(b),this.za[g].rotate(d*b,a*b,u*b)}}},h}(m.Gx);m.Vk=T}(ye||(ye={})),function(m){var j=function(T){function p(h){var a=T.call(this)||this;if(h!==void 0){if(h==null)throw m.i.N();a.description=h}else a.description=m.ee.og();return a.wa=0,a}return ri(p,T),p.prototype.Ia=function(){return new p(this.description)},p.prototype.add=function(h){this.resize(this.wa+1),this.Dh(this.wa-1,h)},p.prototype.Bu=function(h,a){this.resize(this.wa+1);var u=new m.h;u.ma(h,a),this.Cb(this.wa-1,u)},p.prototype.Fd=function(h,a,u){if(u=0>u?h.I():u,0>a||a>h.I()||u<a)throw m.i.N();if(a!=u){this.Jl(h.description),u-=a;var d=this.wa;this.resize(this.wa+u),this.mc();for(var g=0,v=h.description.Aa;g<v;g++){var b=h.description.Ed(g),C=m.ra.Va(b),M=this.ub(b);b=h.ub(b),M.Mn(d*C,b,a*C,u*C,!0,1,d*C)}}},p.prototype.HD=function(h,a){var u=h.length;if(a=0>a?u:a,0>u||0>a)throw m.i.N();if(a!=0){u=a-0,a=this.wa,this.resize(this.wa+u);for(var d=0;d<u;d++)this.Cb(a+d,h[0+d])}},p.prototype.DB=function(h){if(0>h||h>=this.I())throw m.i.fa("index out of bounds");this.mc();for(var a=0,u=this.description.Aa;a<u;a++)if(this.za[a]!=null){var d=m.ra.Va(this.description.Ed(a));this.za[a].En(d*h,d,d*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},p.prototype.resize=function(h){this.dm(h)},p.prototype.op=function(){},p.prototype.Oa=function(){T.prototype.wD.call(this)},p.prototype.Oc=function(h){if(h instanceof m.Dd){if(this.B())return;this.mc();for(var a=this.za[0],u=new m.h,d=0;d<this.wa;d++)u.x=a.read(2*d),u.y=a.read(2*d+1),h.Eh(u,u),a.write(2*d,u.x),a.write(2*d+1,u.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),a=this.za[0],u=this.za[1];var g=new m.Nd;for(d=0;d<this.wa;d++){g.x=a.read(2*d),g.y=a.read(2*d+1),g.z=u.read(d);var v=h.fp(g);a.write(2*d,v.x),a.write(2*d+1,v.y),u.write(d,v.z)}}this.Pc(1993)},p.prototype.Db=function(){return 0},p.prototype.getType=function(){return 550},p.prototype.Ke=function(){return 0},p.prototype.Qb=function(){return 0},p.prototype.Nb=function(h){return h==this||h instanceof p&&T.prototype.Nb.call(this,h)},p.prototype.lW=function(h,a){var u=this.wa;if(u=Math.min(u,a+1e3),0>a||a>=this.wa||u<a||h.length!=1e3)throw m.i.N();var d=u-a,g=[];for(this.ub(0).Vw(2*a,2*d,g,0,!0),a=0;a<d;a++)h[a]=m.h.construct(g[2*a],g[2*a+1]);return u},p.prototype.$x=function(){},p.prototype.iy=function(){},p.prototype.lu=function(){return!1},p.prototype.fj=function(){return!1},p.prototype.mg=function(){return null},p}(m.Gx);m.de=j}(ye||(ye={})),function(m){var j;(j=m.iL||(m.iL={}))[j.NotDetermined=0]="NotDetermined",j[j.Structure=1]="Structure",j[j.DegenerateSegments=2]="DegenerateSegments",j[j.Clustering=3]="Clustering",j[j.Cracking=4]="Cracking",j[j.CrossOver=5]="CrossOver",j[j.RingOrientation=6]="RingOrientation",j[j.RingOrder=7]="RingOrder",j[j.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",j[j.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",j[j.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var T=function(){function p(h,a,u){h===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=h,this.Jo=a,this.Ko=u)}return p.prototype.Wt=function(h){this.Jj=h.Jj,this.Jo=h.Jo,this.Ko=h.Ko},p}();m.Md=T}(ye||(ye={})),function(m){m.O=function(){function j(){}return j.assert=function(T){if(T===!1)throw m.i.GK()},j.bK=function(T){return isNaN(T)?NaN:T===0?T:0<T?1:-1},j.Fu=function(T){var p;p===void 0&&(p=0);for(var h=[],a=0;a<T;a++)h[a]=j.lg(2,p);return h},j.lg=function(T,p){p===void 0&&(p=0);for(var h=[],a=0;a<T;a++)h[a]=p;return h},j.$u=function(T,p){var h,a;for(h===void 0&&(h=0),a===void 0&&(a=T.length-1);h<=a;h++)T[h]=p},j.Rk=function(T,p,h){return T<p?p:T>h?h:T},j.Th=function(T,p){var h=5381;return((h=((h=((h=p!==void 0?(p<<5)+p+(255&T):(h<<5)+h+(255&T))<<5)+h+(T>>8&255))<<5)+h+(T>>16&255))<<5)+h+(T>>24&255)&2147483647},j.uj=function(){throw Error("Not Implemented")},j.bB=function(T){return j.aU(T)+12345&2147483647},j.XG=function(T){var p=32,h=T%j.Qx|0,a=T/j.Qx|0;return(p&=63)==0?T:(32>p?(T=h>>>p|a<<32-p,p=a>>p):(T=a>>p-32,p=0<=a?0:-1),p*j.Qx+(T>>>0))},j.aU=function(T){var p=1103515245,h=65535&p;return((p-h)*(T|=0)|0)+(h*T|0)|0},j.truncate=function(T){return 0>T?-1*Math.floor(Math.abs(T)):Math.floor(T)},j.MAX_SAFE_INTEGER=Math.pow(2,53)-1,j.MIN_SAFE_INTEGER=-j.MAX_SAFE_INTEGER,j.VC=65536,j.Qx=j.VC*j.VC,j}()}(ye||(ye={})),function(m){var j;(j=m.CL||(m.CL={}))[j.Project=0]="Project",j[j.Union=1]="Union",j[j.Difference=2]="Difference",j[j.Proximity2D=3]="Proximity2D",j[j.Relate=4]="Relate",j[j.Equals=5]="Equals",j[j.Disjoint=6]="Disjoint",j[j.Intersects=7]="Intersects",j[j.Within=8]="Within",j[j.Contains=9]="Contains",j[j.Crosses=10]="Crosses",j[j.Touches=11]="Touches",j[j.Overlaps=12]="Overlaps",j[j.Buffer=13]="Buffer",j[j.Distance=14]="Distance",j[j.Intersection=15]="Intersection",j[j.Clip=16]="Clip",j[j.Cut=17]="Cut",j[j.DensifyByLength=18]="DensifyByLength",j[j.DensifyByAngle=19]="DensifyByAngle",j[j.LabelPoint=20]="LabelPoint",j[j.GeodesicBuffer=21]="GeodesicBuffer",j[j.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",j[j.ShapePreservingDensify=23]="ShapePreservingDensify",j[j.GeodeticLength=24]="GeodeticLength",j[j.GeodeticArea=25]="GeodeticArea",j[j.Simplify=26]="Simplify",j[j.SimplifyOGC=27]="SimplifyOGC",j[j.Offset=28]="Offset",j[j.Generalize=29]="Generalize",j[j.SymmetricDifference=30]="SymmetricDifference",j[j.ConvexHull=31]="ConvexHull",j[j.Boundary=32]="Boundary",j[j.SimpleRelation=33]="SimpleRelation";var T=function(){function p(){}return p.prototype.getType=function(){return null},p.prototype.wn=function(){},p.prototype.Iu=function(){return!1},p}();m.Je=T}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 13},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g){return h instanceof m.aa?(g=new m.Zc(h),this.V(g,a,[u],!1,d).next()):d===!0?(u=new m.BC(h,a,u,!1,g),m.Gh.local().V(u,a,g)):new m.BC(h,a,u,!1,g)},p.instance=null,p}(m.Je);m.AC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d){this.ya=-1,this.Rd=p,this.$z=h,this.Cs=a,this.tT=new m.l,this.tT.Oa(),this.eo=-1,this.Ub=d}return T.prototype.next=function(){for(var p;(p=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(p,this.Cs[this.eo]);return null},T.prototype.La=function(){return this.ya},T.prototype.buffer=function(p,h){return m.HK.buffer(p,h,this.$z,NaN,96,this.Ub)},T.prototype.qe=function(){},T}();m.BC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 16},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d).next()):new m.lL(h,a,u,d)},p.instance=null,p}(m.Je);m.kL=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){if(this.ya=-1,p==null)throw m.i.N();this.$=h,this.yk=p,this.qa=m.ta.Wd(a,h,!1)}return T.prototype.next=function(){var p;return(p=this.yk.next())!=null?(this.ya=this.yk.La(),m.Ud.clip(p,this.$,this.qa,0)):null},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.lL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 31},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u){return h instanceof m.aa?m.DC.rE(h):new m.DC(a,h,u)},p.instance=null,p}(m.Je);m.CC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){if(this.uA=new m.Zt,this.ya=-1,h==null)throw m.i.N();this.cH=p,this.Ic=!1,this.yk=h,this.Ub=a}return T.prototype.next=function(){if(this.cH){if(!this.Ic){var p=this.dO(this.yk);return this.Ic=!0,p}return null}if(!this.Ic){if((p=this.yk.next())!=null)return this.ya=this.yk.La(),T.rE(p);this.Ic=!0}return null},T.prototype.La=function(){return this.ya},T.prototype.dO=function(p){for(var h;(h=p.next())!=null;)this.uA.Ib(h);return this.uA.cR()},T.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw m.i.fa("Invalid call for non merging convex hull.");var p=this.yk.next();if(p==null)throw m.i.fa("Expects a non-null geometry.");this.uA.Ib(p)}},T.rE=function(p){if(T.VS(p))return p;var h=p.getType();if(m.Vk.yd(h))return(h=new m.Ta(p.description)).oc(p,!0),h;if(h==550&&p.I()==2){var a=new m.Sa;return h=new m.Ta(p.description),p.ve(0,a),h.nf(a),p.ve(1,a),h.lineTo(a),h}return m.Zt.RO(p)},T.VS=function(p){if(p.B())return!0;var h=p.getType();return h==33||h==197||!m.Vk.yd(h)&&(h==550?p.I()==1:h==1607?p.da()==1&&2>=p.I():p.da()==1&&(2>=p.I()||m.Zt.JG(p,0)))},T}();m.DC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 17},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g){return new m.nL(h,a,u,d,g)},p.instance=null,p}(m.Je);m.mL=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d){if(this.Tf=null,h==null||a==null)throw m.i.fa("invalid argument");this.qT=p,this.nA=h,this.lH=a,p=m.ta.mv(h,a),this.qa=m.ta.Wd(u,p,!0),this.kH=-1,this.nd=d}return T.prototype.La=function(){return 0},T.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},T.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},T.prototype.TQ=function(){var p=new m.Ta,h=new m.Ta,a=new m.Ta;this.Tf.push(p),this.Tf.push(h);var u=[];m.LK.JK(this.qT,this.nA,this.lH,this.qa,u,this.nd);for(var d=0;d<u.length;d++){var g=u[d];if(g.bt==0)p.add(g.X,!1);else if(g.bt==1||g.bt==2)h.add(g.X,!1);else if(g.bt==3)this.Tf.push(g.X);else{if(g.bt!=4)throw m.i.fa("internal");a.add(g.X,!1)}}a.B()||p.B()&&h.B()&&!(3<=this.Tf.length)||this.Tf.push(a),p.B()&&h.B()&&3>this.Tf.length&&(this.Tf.length=0)},T.prototype.SQ=function(){var p=new m.ia(0),h=new m.gd,a=h.aF(),u=h.Ib(this.nA),d=h.Ib(this.lH),g=new m.Fg;try{g.Ft(h,this.qa,this.nd),g.dl(a,u,d,p);var v=h.Ne(u),b=new m.Da,C=new m.Da;for(this.Tf.length=0,this.Tf.push(b),this.Tf.push(C),u=0;u<p.size;u++){var M=new m.gd,$=M.Ib(v),L=M.Ib(h.Ne(p.get(u)));g.dr(M,this.nd);var q=g.Av($,L),U=M.Ne(q);if(!U.B()){var ee=h.KF(p.get(u),a);ee==2?b.add(U,!1):ee==1?C.add(U,!1):this.Tf.push(U);var Q=new m.gd;$=Q.Ib(v),L=Q.Ib(h.Ne(p.get(u))),g.dr(Q,this.nd),v=Q.Ne(g.im($,L))}}!v.B()&&0<p.size&&this.Tf.push(v),b.B()&&C.B()&&(this.Tf.length=0)}finally{g.Ug()}},T.prototype.qe=function(){},T}();m.nL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 18},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u){if(h instanceof m.aa)return h=new m.Zc(h),this.V(h,a,u).next();if(0>=a)throw m.i.N();return new m.oL(h,a,u)},p.instance=null,p}(m.Je);m.Xl=j}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.ya=-1,this.Rd=p,this.Ps=h}return T.prototype.La=function(){return this.ya},T.prototype.next=function(){var p;return(p=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(p)):null},T.prototype.NP=function(p){if(p.B()||1>p.Db())return p;var h=p.getType();if(h==1736||h==1607)return this.Ny(p);if(m.aa.yd(h))return this.PP(p);if(h==197)return this.OP(p);throw m.i.Qa()},T.prototype.PP=function(p){if(p.Qb()<=this.Ps)return p;var h=new m.Ta(p.description);return h.oc(p,!0),this.Ny(h)},T.prototype.OP=function(p){var h=new m.Da(p.description);h.ad(p,!1);var a=new m.l;return p.A(a),p=a.ca(),a.R()<=this.Ps&&p<=this.Ps?h:this.Ny(h)},T.prototype.Ny=function(p){for(var h=p.Ia(),a=p.Ga();a.$a();)for(var u=!0;a.Ha();){var d=a.ha();if(d.getType()!=322)throw m.i.fa("not implemented");var g=a.On(),v=d.Qb();if(v>this.Ps){var b=Math.ceil(v/this.Ps);v=new m.Sa(p.description),u&&(d.To(v),h.nf(v));var C=u=1/b,M=0;for(--b;M<b;M++)d.Tw(C,v),h.lineTo(v),C+=u;g?h.Ap():(d.Po(v),h.lineTo(v))}else g?h.Ap():h.oc(d,u);u=!1}return h},T.prototype.qe=function(){},T}();m.oL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.getType=function(){return 2},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),a=new m.Zc(a),this.V(h,a,u,d).next()):new m.qL(h,a,u,d)},p.im=function(h,a,u,d){if(h.B()||a.B())return h;var g=h.Db(),v=a.Db();if(g>v)return h;var b=h.getType(),C=a.getType(),M=new m.l,$=new m.l,L=new m.l;h.A(M),a.A($),L.K(M),L.Zb($);var q=(L=m.ta.Wd(u,L,!0))*Math.sqrt(2)*1.00001,U=new m.l;if(U.K(M),U.W(q,q),!U.isIntersecting($))return h;if(g==1&&v==2)return p.KV(h,a,C,u,d);if(b==33)switch(m.Vk.yd(C)?(u=new m.Ta(a.description),u.oc(a,!0)):u=a,C){case 1736:return p.XU(h,u,L);case 1607:return p.YU(h,u,L);case 550:return p.VU(h,u,L);case 197:return p.UU(h,u,L);case 33:return p.WU(h,u,L);default:throw m.i.N()}else if(b==550)switch(C){case 1736:return p.nU(h,a,L);case 197:return p.lU(h,a,L);case 33:return p.mU(h,a,L)}return m.Fg.im(h,a,u,d)},p.XU=function(h,a,u){return m.hd.KG(a,h,u)==0?h:h.Ia()},p.YU=function(h,a,u){var d=h.D();a=a.Ga();for(var g=u*Math.sqrt(2)*1.00001,v=g*g,b=new m.l;a.$a();)for(;a.Ha();){var C=a.ha();if(C.A(b),b.W(g,g),b.contains(d)){if(C.qs(d,u))return h.Ia();var M=C.ac();if(m.h.yc(d,M)<=v||(M=C.wc(),m.h.yc(d,M)<=v))return h.Ia()}}return h},p.VU=function(h,a,u){var d=a.ub(0);a=a.I();var g=h.D(),v=new m.h;u=u*Math.sqrt(2)*1.00001,u*=u;for(var b=0;b<a;b++)if(d.tc(2*b,v),m.h.yc(v,g)<=u)return h.Ia();return h},p.UU=function(h,a,u){var d=new m.l;return a.A(d),d.W(u,u),a=h.D(),d.contains(a)?h.Ia():h},p.WU=function(h,a,u){u=u*Math.sqrt(2)*1.00001,u*=u;var d=h.D();return a=a.D(),m.h.yc(d,a)<=u?h.Ia():h},p.nU=function(h,a,u){var d=new m.l;a.A(d),d.W(u,u);for(var g=h.I(),v=!1,b=[],C=0;C<g;C++)b[C]=!1;var M=new m.h;for(C=0;C<g;C++)h.D(C,M),d.contains(M)&&m.hd.Yd(a,M,u)!=0&&(v=!0,b[C]=!0);if(!v)return h;for(a=h.Ia(),C=0;C<g;C++)b[C]||a.Fd(h,C,C+1);return a},p.lU=function(h,a,u){var d=new m.l;a.A(d),d.W(u,u),a=h.I();var g=!1;u=[];for(var v=0;v<a;v++)u[v]=!1;var b=new m.h;for(v=0;v<a;v++)h.D(v,b),d.contains(b)&&(g=!0,u[v]=!0);if(!g)return h;for(d=h.Ia(),v=0;v<a;v++)u[v]||d.Fd(h,v,v+1);return d},p.mU=function(h,a,u){var d=h.ub(0),g=h.I(),v=a.D(),b=new m.h,C=!1;a=[];for(var M=0;M<g;M++)a[M]=!1;for(u=(M=u*Math.sqrt(2)*1.00001)*M,M=0;M<g;M++)d.tc(2*M,b),m.h.yc(b,v)<=u&&(C=!0,a[M]=!0);if(!C)return h;for(d=h.Ia(),M=0;M<g;M++)a[M]||d.Fd(h,M,M+1);return d},p.KV=function(h,a,u,d,g){var v=new m.Fh;h.bn(v);var b=new m.l;return a.A(b),v.Zb(b),v.W(.1*v.R(),.1*v.ca()),(b=new m.Da).ad(v,!1),u==1736?b.add(a,!0):b.ad(a,!0),m.Xj.local().V(h,b,d,g)},p.instance=null,p}(m.Je);m.kp=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){this.ts=h==null,this.ya=-1,this.Rd=p,this.$z=a,this.wT=h.next(),this.Ub=u}return T.prototype.next=function(){return this.ts?null:(p=this.Rd.next())!=null?(this.ya=this.Rd.La(),m.kp.im(p,this.wT,this.$z,this.Ub)):null;var p},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.qL=j}(ye||(ye={})),function(m){var j=function(){function p(h){this.nd=h,this.Bj=new m.l,this.Bj.Oa(),this.oh=new m.l,this.oh.Oa()}return p.prototype.Nt=function(){var h=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=h,h=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=h,h=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=h,h=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=h},p.prototype.eQ=function(h,a){if(this.nd!=null&&!this.nd.progress(-1,-1))throw m.i.fu("user_canceled");var u=!this.Bj.isIntersecting(this.oh);return m.aa.Hc(h.getType())&&m.aa.Hc(a.getType())?h.I()>a.I()?this.gE(h,a,u):(this.Nt(),h=this.gE(a,h,u),this.Nt(),h):h.getType()==550&&m.aa.Hc(a.getType())?(h=this.hE(a,h,u),this.Nt(),h):a.getType()==550&&m.aa.Hc(h.getType())?this.hE(h,a,u):h.getType()==550&&a.getType()==550?h.I()>a.I()?this.iE(h,a):(this.Nt(),h=this.iE(a,h),this.Nt(),h):0},p.prototype.gE=function(h,a,u){var d=h.Ga(),g=a.Ga(),v=new m.l,b=new m.l,C=17976931348623157e292;if(!u&&this.pY(h,a,d,g))return 0;for(;d.$a();)for(;d.Ha();)if((h=d.ha()).A(v),!(v.px(this.oh)>C)){for(;g.$a();)for(;g.Ha();)if((a=g.ha()).A(b),v.px(b)<C&&(a=h.tb(a,u),(a*=a)<C)){if(a==0)return 0;C=a}g.Zi()}return Math.sqrt(C)},p.prototype.hE=function(h,a,u){var d=h.Ga(),g=new m.l,v=17976931348623157e292,b=new m.h,C=a.I();for(u=!u&&h.getType()==1736;d.$a();)for(;d.Ha();){var M=d.ha();if(M.A(g),!(1<C&&g.px(this.oh)>v)){for(var $=0;$<C;$++){if(a.D($,b),u&&m.hd.Yd(h,b,0)!=0)return 0;var L=M.fe(b,!1);if(b.sub(M.hc(L)),(L=b.Sk())<v){if(L==0)return 0;v=L}}u=!1}}return Math.sqrt(v)},p.prototype.iE=function(h,a){for(var u,d=17976931348623157e292,g=new m.h,v=new m.h,b=h.I(),C=a.I(),M=0;M<b;M++)if(h.D(M,g),!(1<C&&this.oh.iK(g)>d)){for(var $=0;$<C;$++)if(a.D($,v),(u=m.h.yc(g,v))<d){if(u==0)return 0;d=u}}return Math.sqrt(d)},p.prototype.pY=function(h,a,u,d){if(h.getType()==1736){for(;d.$a();)if(d.Ha()){var g=d.ha();if(m.hd.Yd(h,g.wc(),0)!=0)return!0}d.Zi()}if(a.getType()==1736){for(;u.$a();)if(u.Ha()&&(h=u.ha(),m.hd.Yd(a,h.wc(),0)!=0))return!0;u.Zi()}return!1},p.prototype.gm=function(h,a){return h.B()||a.B()?NaN:(h.A(this.Bj),a.A(this.oh),this.eQ(h,a))},p}(),T=function(p){function h(){return p!==null&&p.apply(this,arguments)||this}return ri(h,p),h.prototype.V=function(a,u,d){if(a==null||u==null)throw m.i.N();if(a.B()||u.B())return NaN;var g=a.getType(),v=u.getType();if(g==33){if(v==33)return m.h.tb(a.D(),u.D());if(v==197)return d=new m.l,u.A(d),d.tb(a.D());(g=new m.de).add(a),a=g}else if(g==197){if(v==197)return v=new m.l,a.A(v),d=new m.l,u.A(d),d.tb(v);(g=new m.Da).ad(a,!1),a=g}return v==33?((v=new m.de).add(u),u=v):v==197&&((v=new m.Da).ad(u,!1),u=v),new j(d).gm(a,u)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 14},h.instance=null,h}(m.Je);m.rL=T}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){this.zH=p,this.DH=h,this.nd=u,this.$G=a}return T.prototype.next=function(){var p=this.zH.next();return p==null?null:this.zC(p)},T.prototype.La=function(){return this.zH.La()},T.prototype.zC=function(p){var h=p.getType();if(m.aa.Rn(h))return p;if(h==197)return(h=new m.Da(p.description)).ad(p,!1),this.zC(h);if(p.B())return p;if(p==null)throw m.i.Qa();h=p.Ia();for(var a=new m.yb,u=0,d=p.da();u<d;u++)this.TK(p,u,h,a);return h},T.prototype.TK=function(p,h,a,u){if(!(2>p.Ja(h))){var d=p.Ba(h),g=p.Vc(h)-1,v=p.ub(0),b=p.dc(h),C=new m.ia(0);C.Jb(p.Ja(h)+1);var M=new m.ia(0);for(M.Jb(p.Ja(h)+1),C.add(b?d:g),C.add(d),d=new m.h;1<C.size;){var $=C.Fc();C.If();var L=C.Fc();p.D($,d),u.Dc(d),p.D(L,d),u.Qc(d),0<=(L=this.SK(u,d,v,$,L,g))?(C.add(L),C.add($)):M.add($)}if(b||M.add(C.get(0)),M.size==C.size)a.addPath(p,h,!0);else if(2<=M.size&&(!this.$G||M.size!=2||!(b||m.h.tb(p.Na(M.get(0)),p.Na(M.get(1)))<=this.DH))){for(h=new m.Sa,u=0,g=M.size;u<g;u++)p.ve(M.get(u),h),u==0?a.nf(h):a.lineTo(h);b&&(this.$G||M.size!=2||a.lineTo(h),a.Ap())}}},T.prototype.SK=function(p,h,a,u,d,g){var v=d-1;for(d<=u&&(v=g),g=d=-1,u+=1;u<=v;u++){a.tc(2*u,h);var b=h.x,C=h.y;p.hc(p.fe(h,!1),h),h.x-=b,h.y-=C,(b=h.length())>this.DH&&b>g&&(d=u,g=b)}return d},T.prototype.qe=function(){},T}();m.sL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 29},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d).next()):new m.sL(h,a,u,d)},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.instance=null,p}(m.Je);m.EC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 21},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g,v,b,C){return h instanceof m.aa?(C=new m.Zc(h),this.V(C,a,u,[d],g,v,!1,b).next()):b===!0?(u=new m.GC(h,a,u,d,g,!1,!1,C),m.Gh.local().V(u,a,C)):new m.GC(h,a,u,d,g,!1,!1,C)},p.instance=null,p}(m.Je);m.FC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d,g,v,b){if(g)throw m.i.Ie();if(h==null)throw m.i.N();this.ya=-1,this.Ms=p,this.vg=h,this.ze=a,this.Cs=u,this.$n=d,this.eo=-1,this.Ub=b,this.uT=new m.l,this.uT.Oa()}return T.prototype.next=function(){for(var p;(p=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(p,this.Cs[this.eo]);return null},T.prototype.La=function(){return this.ya},T.prototype.$Q=function(p,h){return m.VK.buffer(p,this.vg,this.ze,h,this.$n,this.Ub)},T.prototype.qe=function(){},T}();m.GC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 24},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u){if(a==null)throw m.i.N();if(h.B()||1>h.Db())return 0;if(u==4)throw m.i.Ie();var d=m.cb.sc(a),g=m.cb.vv(d),v=m.cb.ev(d);g*=2-g;var b=d.Hd().ai,C=h.getType();if(C==1736||C==197)var M=h.mg();else m.aa.yd(C)?(M=new m.Ta(h.description)).oc(h,!0):M=h;if(d.Nb(a)==0){if(m.cb.Wc(a)){M=m.Hh.lj(M,a),C==1607&&M==h&&(M=m.aa.jg(h)),h=new m.Nc,m.cb.gh(a).cn(h),C=0;for(var $=M.I();C<$;C++){var L=M.Na(C);L.x=m.Hh.Zm(L.x,h),M.Cb(C,L)}}h=M.Ia(),M=m.Hh.WI(a,d,M,h)?h:m.cb.zh(M,a,d)}return this.hQ(M,u,v,g,b)},p.prototype.hQ=function(h,a,u,d,g){var v=new m.ga(0),b=0;for(h=h.Ga();h.$a();)for(;h.Ha();){var C=h.ha(),M=C.ac();C=C.wc(),M.scale(g),C.scale(g),m.kb.wd(u,d,M.x,M.y,C.x,C.y,v,null,null,a),b+=v.u}return b},p.instance=null,p}(m.Je);m.vL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 18},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d,g).next()):new m.uL(h,u,d,a,-1,-1,g)},p.instance=null,p}(m.Je);m.tL=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d,g){if(0<g||a!=4&&0<d)throw m.i.Ie();if(h==null)throw m.i.N();this.ya=-1,this.Ms=p,this.vg=h,this.ze=a,this.DT=u,this.CT=d}return T.prototype.next=function(){for(var p;(p=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(p);return null},T.prototype.La=function(){return this.ya},T.prototype.Zy=function(p){return m.cj.Qr(p,this.vg,this.ze,this.DT,this.CT,this.Ub)},T.prototype.qe=function(){},T}();m.uL=j}(ye||(ye={})),function(m){(function(j){j[j.Unknown=0]="Unknown",j[j.Contains=1]="Contains",j[j.Within=2]="Within",j[j.Equals=3]="Equals",j[j.Disjoint=4]="Disjoint",j[j.Touches=8]="Touches",j[j.Crosses=16]="Crosses",j[j.Overlaps=32]="Overlaps",j[j.NoThisRelation=64]="NoThisRelation",j[j.Intersects=1073741824]="Intersects",j[j.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(m.cL||(m.cL={})),m.wL=function(){function j(){}return j.nW=function(T,p){var h=T.getType(),a=p.getType();if(m.aa.xj(h)){var u=T.Bb;if(u!=null&&(u=u.Fk)!=null){if(a==33){var d=p.D();u=u.So(d.x,d.y)}else d=new m.l,p.A(d),u=u.Ro(d);if(u==1)return 1;if(u==0)return 4}}if(m.aa.xj(a)&&(u=p.Bb)!=null&&(u=u.Fk)!=null){if(h==33?(T=T.D(),u=u.So(T.x,T.y)):(p=new m.l,T.A(p),u=u.Ro(p)),u==1)return 2;if(u==0)return 4}return 0},j}()}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.getType=function(){return 15},p.prototype.V=function(h,a,u,d,g){return h instanceof m.aa?(h=new m.Zc(h),a=new m.Zc(a),this.V(h,a,u,d,g===void 0?-1:g).next()):g===void 0?new m.HC(h,a,u,d,-1):new m.HC(h,a,u,d,g)},p.prototype.wn=function(h,a,u){this.Iu(h)&&(a=m.ta.kj(a,h,!1),h.fj(u)||h.lu(a,u))},p.prototype.Iu=function(h){return m.Nx.zE(h)},p.instance=null,p}(m.Je);m.Xj=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d){if(this.ts=h==null,this.ya=-1,this.Rd=p,this.vg=a,this.Se=h.next(),this.Dj=this.Se.getType(),this.Ub=u,this.Fi=d,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw m.i.N("bad dimension mask")}return T.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var p=this.zw.next();if(p!=null)return p;this.zw=null}for(;(p=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?p=this.Ea(p):(this.zw=this.PS(p),p=this.zw.next()),p;return null},T.prototype.La=function(){return this.ya},T.prototype.Ea=function(p){var h=this.zK(p);if(h!=null)return h;h=m.ta.mv(this.Se,p);var a=m.ta.Wd(this.vg,h,!0);h=new m.l,this.Se.A(h);var u=new m.l;return p.A(u),h.W(2*a,2*a),h.Ea(u),h.W(100*a,100*a),a=m.Ud.clip(this.Se,h,0,0),p=m.Ud.clip(p,h,0,0),m.Fg.Av(p,a,this.vg,this.Ub)},T.prototype.QI=function(p,h,a){var u=0;if(1&h)a[0]==null&&(a[0]=new m.de(p)),u++;else for(var d=0;d<a.length-1;d++)a[d]=a[d+1];if(2&h)a[u]==null&&(a[u]=new m.Ta(p)),u++;else for(d=u;d<a.length-1;d++)a[d]=a[d+1];if(4&h)a[u]==null&&(a[u]=new m.Da(p)),u++;else for(d=u;d<a.length-1;d++)a[d]=a[d+1];if(u!=3){for(p=[],d=0;d<u;d++)p[d]=a[d];return new m.Zc(p)}return new m.Zc(a)},T.prototype.PS=function(p){var h=this.zK(p);if(h!=null){var a=[null,null,null];return a[h.Db()]=h,this.QI(p.description,this.Fi,a)}h=m.ta.mv(this.Se,p),a=m.ta.Wd(this.vg,h,!0),h=new m.l,this.Se.A(h),h.W(2*a,2*a);var u=new m.l;return p.A(u),h.Ea(u),h.W(100*a,100*a),a=m.Ud.clip(this.Se,h,0,0),h=m.Ud.clip(p,h,0,0),a=m.Fg.Pz(h,a,this.vg,this.Ub),this.QI(p.description,this.Fi,a)},T.prototype.zK=function(p){var h=m.ta.mv(p,this.Se),a=m.ta.Wd(this.vg,h,!0);h=p.getType();var u=p.B(),d=this.Se.B();if(!(d=u||d)){d=new m.l,p.A(d);var g=new m.l;this.Se.A(g),g.W(2*a,2*a),d=!d.isIntersecting(g)}if(!d)if((g=m.wL.nW(this.Se,p))==4)d=!0;else{if(2&g)return this.Se;if(1&g)return p}if(d)return(a=m.aa.tf(h))<(d=m.aa.tf(this.Dj))?T.HB(p,u):a>d||a==0&&h==550&&this.Dj==33?this.nJ():T.HB(p,u);if((this.Fi==-1||this.Fi==4)&&h==197&&this.Dj==197)return a=this.Se,h=new m.l,p.A(h),u=new m.l,a.A(u),h.Ea(u),a=new m.Fh,p.copyTo(a),a.Xo(h),a;if(h==197&&m.aa.tf(this.Dj)==0||this.Dj==197&&m.aa.tf(h)==0)return u=h==197?p:this.Se,p=h==197?this.Se:p,h=new m.l,u.A(h),m.Ud.clip(p,h,a,0);if(m.aa.tf(h)==0&&0<m.aa.tf(this.Dj)||0<m.aa.tf(h)&&m.aa.tf(this.Dj)==0){if(a=m.ta.kj(this.vg,p,!1),h==550||h==33)return m.Fg.zG(p,this.Se,a);if(this.Dj==550||this.Dj==33)return m.Fg.zG(this.Se,p,a);throw m.i.Qa()}return this.Fi!=-1&&this.Fi!=2||h!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||h!=1736||this.Dj!=1607?null:this.wK(this.Se,p):this.wK(p,this.Se)},T.prototype.wK=function(p,h){var a=p,u=h,d=m.ta.kj(this.vg,h,!1),g=new m.l;u.A(g);var v=new m.l;a.A(v),v.W(2*d,2*d),g.Ea(v),g.W(10*d,10*d),a=p=m.Ud.clip(p,g,0,0),v=new m.ia(0);var b=-1,C=u.Bb;if(C!=null){var M=C.Fk;if(M!=null){b=0,v.Jb(a.I()+a.da());for(var $=new m.l,L=a.Ga();L.$a();)for(;L.Ha();){L.ha().A($);var q=M.Ro($);q==1?v.add(1):q==0?v.add(0):(v.add(-1),b++)}}}if(5<h.I()&&(C=(u=h=m.Ud.clip(h,g,0,0)).Bb),0>b&&(b=a.yz()),g=a.I()+u.I(),b*u.I()>Math.log(g)*g*4)return null;g=null,b=u.Ga(),C!=null&&C.Fb!=null&&(g=C.Fb),g==null&&20<u.I()&&(g=m.ta.nE(u)),p=p.Ia(),u=null,C=a.Ga(),M=[0,0,0,0,0,0,0,0,0],$=new m.be(0),L=new m.ig,q=-1;for(var U=0,ee=0,Q=0<v.size,ge=-1;C.$a();){ge=C.gb;var ve=0;for(q=-1,U=0;C.Ha();){var fe=Q?m.O.truncate(v.get(ee)):-1;ee++;var Ce=C.ha();if(0>fe){if(g!=null)for(u==null?u=g.vR(Ce,d):u.Uo(Ce,d),fe=u.next();fe!=-1;fe=u.next()){b.Vb(g.ja(fe)),fe=b.ha();var Ie=Ce.Ea(fe,null,M,null,d);for(fe=0;fe<Ie;fe++)$.add(M[fe])}else for(b.Zi();b.$a();)for(;b.Ha();)for(fe=b.ha(),Ie=Ce.Ea(fe,null,M,null,d),fe=0;fe<Ie;fe++)$.add(M[fe]);if(0<$.size){$.Vd(0,$.size,function(dt,ct){return dt-ct});var Ne=0;$.add(1),Ie=-1,fe=0;for(var Ve=$.size;fe<Ve;fe++){var Xe=$.get(fe);if(Xe!=Ne){var et=!1;if(Ne!=0||Xe!=1?(Ce.ah(Ne,Xe,L),Ne=L.get()):(Ne=Ce,et=!0),2<=ve){if(p.Dr(a,ge,q,U,ve==3),this.QD(h,Ne.ac(),d)!=1&&this.RD(h,Ne,d)!=1)return null;p.oc(Ne,!1),ve=1,U=0}else switch(Ie=this.RD(h,Ne,d),Ie){case 1:et?2>ve?(q=C.wb()-a.Ba(ge),U=1,ve=ve==0?3:2):U++:(p.oc(Ne,ve==0),ve=1);break;case 0:ve=0,q=-1,U=0;break;default:return null}Ne=Xe}}}else{if(0>(fe=this.QD(h,Ce.ac(),d)))return null;fe==1?(2>ve&&(q=C.wb()-a.Ba(ge),ve=ve==0?3:2),U++):(q=-1,U=0)}$.clear(!1)}else fe!=0&&fe==1&&(ve==0?(ve=3,q=C.wb()-a.Ba(ge)):ve==1?(ve=2,q=C.wb()-a.Ba(ge)):U++)}2<=ve&&(p.Dr(a,ge,q,U,ve==3),q=-1)}return p},T.prototype.QD=function(p,h,a){return m.Dg.wm(p,h,a)},T.prototype.RD=function(p,h,a){var u=h.ac();h=h.wc();var d=m.Dg.wm(p,u,a),g=m.Dg.wm(p,h,a);return d==1&&g==0||d==0&&g==1?-1:d==0||g==0?0:d==1||g==1?1:((d=new m.h).add(u,h),d.scale(.5),(p=m.Dg.wm(p,d,a))==0?0:p==1?1:-1)},T.HB=function(p,h){return h?p:p.Ia()},T.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},T.prototype.qe=function(){},T}();m.HC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 28},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g,v,b){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d,g,v,b).next()):new m.xL(h,a,u,d,g,v,b)},p.instance=null,p}(m.Je);m.IC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d,g,v){this.ya=-1,this.Rd=p,this.Mj=h,this.Ka=a,this.Ki=u,this.CA=d,this.uH=g,this.nd=v}return T.prototype.next=function(){var p=this.Rd.next();return p!=null?(this.ya=this.Rd.La(),this.jL(p)):null},T.prototype.La=function(){return this.ya},T.prototype.jL=function(p){var h=0>=this.uH?m.ta.kj(this.Mj,p,!1):this.uH;return m.IK.V(p,this.Ka,this.Ki,this.CA,h,this.nd)},T.prototype.qe=function(){},T}();m.xL=j}(ye||(ye={})),function(m){var j;(j=m.NK||(m.NK={}))[j.clipToDomainOnly=1]="clipToDomainOnly",j[j.clipWithHorizon=2]="clipWithHorizon",j[j.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var T=function(p){function h(){return p!==null&&p.apply(this,arguments)||this}return ri(h,p),h.prototype.getType=function(){return 0},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(a,u,d){return a instanceof m.aa?(a=new m.Zc(a),this.V(a,u,d).next()):new m.yL(a,u,d)},h.prototype.transform=function(a,u,d,g){return m.bu.transform(a,u,d,g,!0)},h.prototype.Qt=function(a,u,d,g){return m.bu.Qt(a,u,d,g)},h.instance=null,h}(m.Je);m.Hx=T}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){this.ya=-1,this.Rd=p,this.MT=h,this.nd=a}return T.prototype.next=function(){var p=this.Rd.next();return p!=null?(this.ya=this.Rd.La(),m.bu.zh(p,this.MT,this.nd)):null},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.yL=j}(ye||(ye={})),function(m){var j=function(){function p(){}return p.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},p.prototype.AQ=function(h,a,u){for(h.Vb(a,u);h.Ha();){var d=h.ha();if((d=d.Qb())!=0)return h.wb()}for(h.Vb(a,u);h.Ez();)if((d=(d=h.li()).Qb())!=0)return h.wb();return-1},p.prototype.BQ=function(h,a){for(h.Vb(a,-1);h.Ez();)if(h.li().Qb()!=0)return h.wb();return-1},p.prototype.zQ=function(h,a){for(h.Vb(a,-1),h.ha();h.Ha();)if(h.ha().Qb()!=0)return h.wb();return-1},p.prototype.yQ=function(h,a,u,d){if(this.xk=this.AQ(a,u,d),this.xk!=-1){a.Vb(this.xk,-1);var g=a.ha(),v=g.hc(g.fe(h,!1));if(u=m.h.yc(v,h),(d=new m.h).L(v),d.sub(g.ac()),(v=new m.h).L(h),v.sub(g.ac()),this.kq=0>d.wi(v),this.ph=this.zQ(a,this.xk),this.ph!=-1){a.Vb(this.ph,-1);var b=(g=a.ha()).fe(h,!1);b=g.hc(b);var C=m.h.yc(b,h);C>u?this.ph=-1:(d.L(b),d.sub(g.ac()),v.L(h),v.sub(g.ac()),this.us=0>d.wi(v))}this.ph==-1&&(this.ph=this.BQ(a,this.xk),this.ph!=-1&&(a.Vb(this.ph,-1),b=(g=a.ha()).fe(h,!1),b=g.hc(b),(C=m.h.yc(b,h))>u?this.ph=-1:(d.L(b),d.sub(g.ac()),v.L(h),v.sub(g.ac()),this.us=0>d.wi(v),h=this.xk,this.xk=this.ph,this.ph=h,h=this.kq,this.kq=this.us,this.us=h)))}},p.prototype.cO=function(h,a,u,d,g){return u=u.Ga(),this.yQ(h,u,d,g),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(u.Vb(this.xk,-1),h=u.ha().kg(),u.Vb(this.ph,-1),a=u.ha().kg(),0<=h.wi(a)):a},p}(),T=function(p){function h(){return p!==null&&p.apply(this,arguments)||this}return ri(h,p),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 3},h.prototype.nz=function(a,u,d){var g;if(g===void 0&&(g=!1),a.B())return new m.$l;u=u.D();var v=a,b=a.getType();switch(b==197&&((v=new m.Da).ad(a,!1),b=1736),b){case 33:return this.xI(v,u);case 550:return this.jI(v,u);case 1607:case 1736:return this.bU(v,u,d,g);default:throw m.i.fa("not implemented")}},h.prototype.oz=function(a,u){if(a.B())return new m.$l;u=u.D();var d=a,g=a.getType();switch(g==197&&((d=new m.Da).ad(a,!1),g=1736),g){case 33:return this.xI(d,u);case 550:case 1607:case 1736:return this.jI(d,u);default:throw m.i.fa("not implemented")}},h.prototype.pz=function(a,u,d,g){if(0>g)throw m.i.N();if(a.B())return[];u=u.D();var v=a,b=a.getType();switch(b==197&&((v=new m.Da).ad(a,!1),b=1736),b){case 33:return this.TU(v,u,d,g);case 550:case 1607:case 1736:return this.tU(v,u,d,g);default:throw m.i.fa("not implemented")}},h.prototype.bU=function(a,u,d,g){if(a.getType()==1736&&d&&(d=new m.l,a.A(d),d=m.ta.Wd(null,d,!1),(g?m.hd.Yd(a,u,0):m.hd.Yd(a,u,d))!=0)){var v=new m.$l(u,0,0);return g&&v.WJ(!0),v}var b=a.Ga();v=new m.h;for(var C=d=-1,M=17976931348623157e292,$=0;b.$a();)for(;b.Ha();){var L=b.ha();L=L.hc(L.fe(u,!1));var q=m.h.yc(L,u);q<M?($=1,v=L,d=b.wb(),C=b.gb,M=q):q==M&&$++}return v=new m.$l(v,d,Math.sqrt(M)),g&&(b.Vb(d,C),L=b.ha(),g=0>m.h.Uq(u,L.ac(),L.wc()),1<$&&(($=new j).reset(),g=$.cO(u,g,a,d,C)),v.WJ(g)),v},h.prototype.xI=function(a,u){return a=a.D(),u=m.h.tb(a,u),new m.$l(a,0,u)},h.prototype.jI=function(a,u){for(var d=a.ub(0),g=a.I(),v=a=0,b=0,C=17976931348623157e292,M=0;M<g;M++){var $=new m.h;d.tc(2*M,$);var L=m.h.yc($,u);L<C&&(v=$.x,b=$.y,a=M,C=L)}return(u=new m.$l).ey(v,b,a,Math.sqrt(C)),u},h.prototype.TU=function(a,u,d,g){return g==0?[]:(d*=d,a=a.D(),(u=m.h.yc(a,u))<=d?(d=[],(g=new m.$l).ey(a.x,a.y,0,Math.sqrt(u)),d[0]=g):d=[],d)},h.prototype.tU=function(a,u,d,g){if(g==0)return[];var v=a.ub(0),b=a.I();a=[],d*=d;for(var C=0;C<b;C++){var M=v.read(2*C),$=v.read(2*C+1),L=u.x-M,q=u.y-$;(L=L*L+q*q)<=d&&((q=new m.$l).ey(M,$,C,Math.sqrt(L)),a.push(q))}return u=a.length,a.sort(function(U,ee){return U.Ka<ee.Ka?-1:U.Ka==ee.Ka?0:1}),g>=u||(a.length=g),a.slice(0)},h.instance=null,h}(m.Je);m.Ix=T}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 4},p.prototype.V=function(h,a,u,d,g){return m.am.yB(h,a,u,d,g)},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.Iu=function(h){return m.Vt.wy(h)},p.prototype.wn=function(h,a,u){m.Vt.CD(h,a,u)},p.instance=null,p}(m.Je);m.zL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 33},p.prototype.V=function(h,a,u,d,g){return h===1073741824?!m.ud.zB(a,u,d,4,g):m.ud.zB(a,u,d,h,g)},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.Iu=function(h){return m.Vt.wy(h)},p.prototype.wn=function(h,a,u){m.Vt.CD(h,a,u)},p.instance=null,p}(m.Je);m.dj=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){if(this.nd=u,this.rT=a,this.ya=-1,p==null)throw m.i.N();this.yk=p,this.Mj=h}return T.prototype.next=function(){var p;if((p=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw m.i.fu("user_canceled");return this.eC(p)}return null},T.prototype.La=function(){return this.ya},T.prototype.eC=function(p){if(p==null)throw m.i.N();return m.Jx.cK(p,this.Mj,this.rT,this.nd)},T.prototype.qe=function(){},T}();m.AL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 26},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d).next()):new m.AL(h,a,u,d)},p.prototype.rs=function(h,a,u,d,g){return 0<(d!==void 0?m.Jx.rs(h,a,u,d,g):m.Jx.rs(h,a,!1,null,u))},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.instance=null,p}(m.Je);m.Yl=j}(ye||(ye={})),function(m){var j=function(){function g(){this.yq=0}return g.prototype.nX=function(v){this.yq&=-2,this.yq|=v?1:0},g.prototype.Wp=function(){return!!(1&this.yq)},g.prototype.XF=function(){return this.Wp()?0:1},g}();m.xY=j;var T=function(){},p=function(g,v,b,C){this.x=g,this.y=v,this.Ai=b,this.xm=C},h=function(){function g(v){this.Be=v}return g.prototype.compare=function(v,b,C){return v=v.ja(C),b=this.Be.lf.read(2*b),0>(b-=v=this.Be.lf.read(2*v))?-1:0<b?1:0},g}(),a=function(){function g(v){this.Be=v}return g.prototype.compare=function(v,b,C){b=this.Be.hb[b],v=this.Be.hb[v.ja(C)];var M=b.Wp(),$=v.Wp();C=b.ne.Pe(this.Be.Mo,0);var L=v.ne.Pe(this.Be.Mo,0);return C==L&&((M=.5*((C=Math.min(M?b.ne.na:b.ne.la,$?v.ne.na:v.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(M=C),C=b.ne.Pe(M,0),L=v.ne.Pe(M,0)),C<L?-1:C>L?1:0},g}(),u=function(){function g(v,b){this.YI=new m.h,this.parent=v,this.dS=b}return g.prototype.nr=function(v,b,C){var M=this.parent,$=this.dS;C.Vd(v,b,function(L,q){return M.Mh(L,q,$)})},g.prototype.$p=function(v){return v=this.parent.gi.get(v),this.parent.lf.tc(2*(v>>1),this.YI),this.YI.y+(1&v?this.parent.Oj:-this.parent.Oj)},g}(),d=function(){function g(v,b,C,M,$){this.nH=v.description,this.X=v,this.Qg=b,this.Oj=m.ta.kj(this.Qg,v,!1),this.Bo=m.ta.kj(this.Qg,v,!0),this.xA=C,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new m.jp,this.fb=new m.Yj,this.ke=new m.Md,this.ZG=this.ql=$}return g.prototype.eT=function(){return this.ZG=!0,(!m.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?m.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},g.prototype.kC=function(v,b){var C=this.lf.read(2*v);v=this.lf.read(2*v+1);var M=this.lf.read(2*b);b=this.lf.read(2*b+1);var $=!m.Yt.Cv(C,v,M,b,this.Oj*this.Oj);return $||this.X.Db()!=0&&C==M&&v==b},g.prototype.GE=function(){for(var v=this.X,b=v.xf?3:2,C=0,M=v.da();C<M;C++)if(v.Ja(C)<b)return this.ke=new m.Md(1,C,0),!1;return!0},g.prototype.DE=function(v){var b=this.X,C=b.Ga(),M=b.hasAttribute(1);for(b=M?m.ta.wE(this.Qg,b,!1):0;C.$a();)for(;C.Ha();){var $=C.ha();if(!($.Qb()>this.Oj)){if(v&&M){var L=$.wv(1,0);if($=$.wv(1,0),Math.abs($-L)>b)continue}return this.ke=new m.Md(2,C.wb(),-1),!1}}return!0},g.prototype.mO=function(){var v=this.X,b=null;m.aa.Hc(this.X.getType())&&(b=this.X);var C=(this.ZG||this.ql)&&b!=null,M=v.I();this.lf=v.ub(0),this.gi=new m.ia(0),this.gi.Jb(2*M),this.fi=new m.ia(0),this.fi.Jb(2*M),C&&(this.Fl==null&&(this.Fl=new m.ia(0)),this.Fl.Jb(M));for(var $=v=0;$<M;$++)if(this.gi.add(2*$),this.gi.add(2*$+1),this.fi.add(2*$),this.fi.add(2*$+1),C){for(;$>=b.Vc(v);)v++;this.Fl.add(v)}for(new m.Xt().sort(this.fi,0,2*M,new u(this,C)),this.fb.clear(),this.fb.Vo(new h(this)),this.fb.De(M),b=0,M*=2;b<M;b++)if(C=this.fi.get(b),C=(v=this.gi.get(C))>>1,1&v){if(v=this.fb.search(C,-1),$=this.fb.we(v),L=this.fb.lb(v),this.fb.vd(v,-1),$!=-1&&L!=-1&&!this.kC(this.fb.ja($),this.fb.ja(L)))return this.ke=new m.Md(3,this.fb.ja($),this.fb.ja(L)),!1}else{if(v=this.fb.addElement(C,-1),($=this.fb.we(v))!=-1&&!this.kC(this.fb.ja($),C))return this.ke=new m.Md(3,C,this.fb.ja($)),!1;var L=this.fb.lb(v);if(L!=-1&&!this.kC(this.fb.ja(L),C))return this.ke=new m.Md(3,C,this.fb.ja(L)),!1}return!0},g.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},g.prototype.oO=function(){var v=new m.gd;v.Ib(this.X);var b=new m.Md;return!m.$t.kI(!1,v,this.Oj,b,this.nd)||(b.Jo=v.Ua(b.Jo),b.Ko=v.Ua(b.Ko),this.ke.Wt(b),!1)},g.prototype.nO=function(){var v=this.X,b=v.Ga();for(v=v.Ga();b.$a();)for(;b.Ha();){var C=b.ha();if(!b.Qn()||!b.$S()){v.BW(b);do for(;v.Ha();){var M=v.ha();if((M=C.zr(M,this.Oj,!0))!=0)return this.ke=new m.Md(M==2?5:4,b.wb(),v.wb()),!1}while(v.$a())}}return!0},g.prototype.sO=function(){var v=this.X;this.hb.length=0,this.po.length=0,this.Zf=v.Ga(),this.Zf.JB();var b=new m.ia(0);b.Jb(10);var C=NaN,M=0,$=0;for(v=2*v.I();$<v;$++){var L=this.fi.get($);if(!(1&(L=this.gi.get(L)))){L>>=1;var q=this.lf.read(2*L),U=this.lf.read(2*L+1);if(b.size!=0&&(q!=C||U!=M)){if(!this.RI(b))return!1;b!=null&&b.clear(!1)}b.add(L),C=q,M=U}}return!!this.RI(b)},g.prototype.rO=function(){for(var v=this.X,b=Array(v.da()),C=0,M=v.da();C<M;C++)b[C]=v.Nn(C);M=new T;var $=new m.h;C=this.fi.get(0);var L=(C=this.gi.get(C))>>1;this.lf.tc(2*L,$);var q=b[C=this.Fl.get(L)],U=v.Ba(C),ee=v.Vc(C)-1;M.el=L==U||L==ee,M.ny=this.ql?!q&&M.el:M.el,M.Ai=C,M.x=$.x,M.y=$.y,M.xm=L;for(var Q=new T,ge=1,ve=this.fi.size;ge<ve;ge++)if(C=this.fi.get(ge),!(1&(C=this.gi.get(C)))){L=C>>1,this.lf.tc(2*L,$),(C=this.Fl.get(L))!=M.Ai&&(q=b[C],U=v.Ba(C),ee=v.Vc(C)-1);var fe=L==U||L==ee,Ce=this.ql?!q&&M.el:M.el;if(Q.x=$.x,Q.y=$.y,Q.Ai=C,Q.xm=L,Q.ny=Ce,Q.el=fe,Q.x==M.x&&Q.y==M.y){if(this.ql){if(!(Q.ny&&M.ny||Q.Ai==M.Ai&&(Q.el||M.el)))return this.ke=new m.Md(8,Q.xm,M.xm),!1}else if(!Q.el||!M.el)return this.ke=new m.Md(5,Q.xm,M.xm),!1}C=M,M=Q,Q=C}return!0},g.prototype.JE=function(){for(var v=this.X,b=[],C=-1,M=!1,$=0,L=v.da();$<L;$++)v.Ev($)&&(M=!1,C++,$<L-1&&(v.Ev($+1)||(M=!0))),b[$]=M?C:-1;M=new m.h,$=this.fi.get(0);var q=($=this.gi.get($))>>1;this.lf.tc(2*q,M),$=this.Fl.get(q),C=new p(M.x,M.y,$,q,b[$]),v=[];var U=1;for(L=this.fi.size;U<L;U++)if($=this.fi.get(U),!(1&($=this.gi.get($)))){if(q=$>>1,this.lf.tc(2*q,M),$=this.Fl.get(q),($=new p(M.x,M.y,$,q,b[$])).x==C.x&&$.y==C.y){if($.Ai==C.Ai)return this.ke=new m.Md(9,$.xm,C.xm),!1;0<=b[$.Ai]&&b[$.Ai]==b[C.Ai]&&(v.length!=0&&v[v.length-1]==C||v.push(C),v.push($))}C=$}if(v.length==0)return!0;for($=new m.jp(!0),m.O.$u(b,-1),M=-1,(U=new m.h).Rc(),C=0,L=v.length;C<L;C++){(q=v[C]).x==U.x&&q.y==U.y||(M=$.Ph(0),U.x=q.x,U.y=q.y);var ee=b[q.Ai];ee==-1&&(ee=$.Ph(2),b[q.Ai]=ee),$.addElement(ee,M),$.addElement(M,ee)}for((L=new m.ia(0)).Jb(10),C=$.je;C!=-1;C=$.qz(C))if(!(1&(v=$.PF(C)))&&2&v){for(v=-1,L.add(C),L.add(-1);0<L.size;){if(M=L.Fc(),L.If(),U=L.Fc(),L.If(),1&(q=$.PF(U))){v=2&q?U:M;break}for($.fX(U,1|q),q=$.rc(U);q!=-1;q=$.lb(q))(ee=$.getData(q))!=M&&(L.add(ee),L.add(U))}if(v!=-1){for($=-1,C=0,L=b.length;C<L;C++)if(b[C]==v){$=C;break}return this.ke=new m.Md(10,$,-1),!1}}return!0},g.prototype.tO=function(){var v=this.X;if(0>=v.Ke())return this.ke=new m.Md(6,v.da()==1?1:-1,-1),0;if(v.da()==1)return this.ql&&!this.JE()?0:2;this.to=m.ia.qf(v.da(),0),this.JA=m.ia.qf(v.da(),-1);for(var b=-1,C=0,M=0,$=v.da();M<$;M++){var L=v.Ir(M);if(this.to.write(M,0>L?0:256),0<L)b=M,C=L;else{if(L==0)return this.ke=new m.Md(6,M,-1),0;if((0>b||C<Math.abs(L))&&(this.ke=new m.Md(7,M,-1),this.ql))return 0;this.JA.write(M,b)}}for(this.dt=v.da(),this.Om=new m.ia(0),this.Om.Jb(10),$=v.I(),this.Mo=NaN,(v=new m.ia(0)).Jb(10),this.Qq=m.ia.qf($,-1),this.Hw=m.ia.qf($,-1),this.zj!=null?this.zj.clear(!1):this.zj=new m.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new a(this)),b=0,$*=2;0<this.dt&&b<$;b++)if(C=this.fi.get(b),!(1&(C=this.gi.get(C)))){if(C>>=1,(M=this.lf.read(2*C+1))!=this.Mo&&v.size!=0){if(!this.ut(v))return 0;v!=null&&v.clear(!1)}v.add(C),this.Mo=M}return 0<this.dt&&!this.ut(v)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},g.prototype.RI=function(v){if(v.size==1)return!0;for(var b=0,C=v.size;b<C;b++){var M=v.get(b);this.Zf.Vb(M);var $=this.Zf.li();this.hb.push(this.Su($,M,this.Zf.gb,!0)),this.Zf.ha(),$=this.Zf.ha(),this.hb.push(this.Su($,M,this.Zf.gb,!1))}var L=this;for(this.hb.sort(function(ee,Q){return L.XP(ee,Q)}),(M=this.mh.je)==-1&&(M=this.mh.Ph(0)),this.mh.fn(this.hb.length),b=0,C=this.hb.length;b<C;b++)this.mh.addElement(M,b);b=!0;for(var q=C=-1;b&&(b=!1,($=this.mh.rc(M))!=-1);)for(var U=this.mh.lb($);U!=-1;)if(C=this.mh.getData($),q=this.mh.getData(U),(C=this.hb[C].Io)!=(q=this.hb[q].Io))$=U,U=this.mh.lb($);else if(b=!0,this.mh.jd(M,$),$=this.mh.we(U),(U=this.mh.jd(M,U))==-1||$==-1)break;if(b=this.mh.bs(M),this.mh.LE(M),0<b)return this.ke=new m.Md(5,C,q),!1;for(b=0,C=v.size;b<C;b++)this.vB(this.hb[b]);return this.hb.length=0,!0},g.prototype.ut=function(v){for(var b=0,C=v.size;b<C;b++){var M=v.get(b),$=this.Qq.read(M);if($!=-1){var L=this.fb.ja($);this.zj.add(L),this.fb.vd($,-1),this.vB(this.hb[L]),this.hb[L]=null,this.Qq.write(M,-1)}($=this.Hw.read(M))!=-1&&(L=this.fb.ja($),this.zj.add(L),this.fb.vd($,-1),this.vB(this.hb[L]),this.hb[L]=null,this.Hw.write(M,-1))}for(b=0,C=v.size;b<C;b++){if(M=v.get(b),this.Zf.Vb(M),($=this.Zf.li()).na>$.la){var q=this.Zf.wb(),U=this.Su($,M,this.Zf.gb,!0);0<this.zj.size?(L=this.zj.Fc(),this.zj.If(),this.hb[L]=U):(L=this.hb.length,this.hb.push(U)),$=this.fb.addElement(L,-1),this.Qq.read(q)==-1?this.Qq.write(q,$):this.Hw.write(q,$),!(3&this.to.read(this.Zf.gb))&&this.Om.add($)}this.Zf.ha(),($=this.Zf.ha()).na<$.la&&(q=this.Zf.ik(),U=this.Su($,M,this.Zf.gb,!1),0<this.zj.size?(L=this.zj.Fc(),this.zj.If(),this.hb[L]=U):(L=this.hb.length,this.hb.push(U)),$=this.fb.addElement(L,-1),this.Qq.read(q)==-1?this.Qq.write(q,$):this.Hw.write(q,$),!(3&this.to.read(this.Zf.gb))&&this.Om.add($))}for(b=0,C=this.Om.size;b<C&&0<this.dt;b++)if($=this.Om.get(b),!(3&this.to.read(this.hb[this.fb.ja($)].IA))){v=-1,M=this.fb.we($);var ee=$;U=null,L=-1;for(var Q=0;M!=-1&&(L=this.fb.ja(M),L=(U=this.hb[L]).IA,!(3&(Q=this.to.read(L))));)ee=M,M=this.fb.we(M);M==-1?(q=1,M=ee):(v=(3&Q)==1?L:this.JA.read(L),q=U.XF()!=0?0:1,M=this.fb.lb(M));do{if(L=this.fb.ja(M),L=(U=this.hb[L]).IA,!(3&(ee=this.to.read(L)))){if(q!=U.XF())return this.ke=new m.Md(6,L,-1),!1;if(ee=252&ee|(Q=q==0||U.Wp()?2:1),this.to.write(L,Q),Q==2&&this.ke.Jj==0&&this.JA.read(L)!=v&&(this.ke=new m.Md(7,L,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&ee)==1&&(v=L),ee=M,M=this.fb.lb(M),q=q!=0?0:1}while(ee!=$)}return this.Om!=null?this.Om.clear(!1):this.Om=new m.ia(0),!0},g.prototype.Su=function(v,b,C,M){if(v.getType()!=322)throw m.i.Qa();return(v=this.sP(v)).Io=b,v.IA=C,v.yq=0,v.nX(M),v},g.prototype.sP=function(v){if(0<this.po.length){var b=this.po[this.po.length-1];--this.po.length,v.copyTo(b.ne)}else(b=new j).ne=m.SC.jg(v);return b},g.prototype.vB=function(v){v.ne.getType()==322&&this.po.push(v)},g.prototype.kU=function(){for(var v=this.X.I(),b=new m.ia(0),C=0;C<v;C++)b.add(C);var M=this;for(b.Vd(0,v,function($,L){return M.Ou($,L)}),C=1;C<v;C++)if(this.Ou(b.get(C-1),b.get(C))==0)return this.ke=new m.Md(3,b.get(C-1),b.get(C)),0;return 2},g.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},g.prototype.oV=function(){return this.eT()},g.prototype.pU=function(){for(var v=this.X.I(),b=new m.ia(0),C=0;C<v;C++)b.add(C);var M=this;b.Vd(0,v,function(ee,Q){return M.PO(ee,Q)});var $=Array(v);for(m.O.$u($,!1),$[b.get(0)]=!0,C=1;C<v;C++){var L=b.get(C-1),q=b.get(C);this.Ou(L,q)==0?$[q]=!1:$[q]=!0}b=this.X.Ia(),L=this.X,q=0;var U=1;for(C=0;C<v;C++)$[C]?U=C+1:(q<U&&b.Fd(L,q,U),q=C+1);return q<U&&b.Fd(L,q,U),b.Ch(2,this.Bo),b},g.prototype.NV=function(){var v=this.X,b=v.Ga(),C=v.Ga(),M=this.X.Ia(),$=this.X,L=v.hasAttribute(1),q=L?m.ta.wE(this.Qg,v,!0):0,U=new m.ia(0),ee=new m.ia(0);for(U.Jb(m.O.truncate(v.I()/2+1)),ee.Jb(m.O.truncate(v.I()/2+1));b.$a();)if(C.$a(),!(2>v.Ja(b.gb))){C.EW();for(var Q,ge,ve=!0;b.Ha();){var fe=b.ha(),Ce=C.li();if(b.wb()>C.wb())break;ve&&(U.add(b.wb()),ee.add(C.ik()),ve=!1),ge=U.Fc();var Ie=b.ik();if(1<Ie-ge){var Ne=new m.h;Ne.uc(v.Na(ge),v.Na(Ie)),Q=Ne.length()}else Q=fe.Qb();ge=ee.Fc(),1<(Ie=C.wb())-ge?((Ne=new m.h).uc(v.Na(ge),v.Na(Ie)),ge=Ne.length()):ge=Ce.Qb(),Q>this.Bo?U.add(b.ik()):L&&(Q=v.Uc(1,U.Fc(),0),fe=fe.gv(1,0),Math.abs(fe-Q)>q&&U.add(b.ik())),ge>this.Bo?ee.add(C.wb()):L&&(Q=v.Uc(1,ee.Fc(),0),fe=Ce.gv(1,0),Math.abs(fe-Q)>q&&ee.add(C.wb()))}if(U.Fc()<ee.Fc()?U.size>ee.size?U.If():ee.If():(U.Fc()!=ee.Fc()&&ee.If(),ee.If()),2<=ee.size+U.size){for(ve=new m.Sa,Ce=0,fe=U.size;Ce<fe;Ce++)$.ve(U.get(Ce),ve),Ce==0?M.nf(ve):M.lineTo(ve);for(Ce=ee.size-1;0<Ce;Ce--)$.ve(ee.get(Ce),ve),M.lineTo(ve);$.dc(b.gb)?M.Ap():0<ee.size&&($.ve(ee.get(0),ve),M.lineTo(ve))}U!=null&&U.clear(!1),ee!=null&&ee.clear(!1)}return M.Ch(2,this.Bo),M},g.prototype.rV=function(){return this.DX()},g.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?m.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new m.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&m.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&m.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},g.rs=function(v,b,C,M,$){if(M!=null&&(M.Jj=0,M.Jo=-1,M.Ko=-1),v.B())return 1;var L=v.getType();if(L==33)return 1;var q=m.ta.kj(b,v,!1);if(L==197)return b=new m.l,v.A(b),b.Bi(q)?(M!=null&&(M.Jj=2,M.Jo=-1,M.Ko=-1),0):1;if(m.aa.yd(L))return(q=new m.Ta(v.description)).oc(v,!0),g.rs(q,b,C,M,$);var U=v.om(q);if((C=C?-1:U)!=-1)return C;if(b=new g(v,b,C,$,!1),L==550)C=b.kU();else if(L==1607)C=b.JV();else{if(L!=1736)throw m.i.Qa();C=b.oV()}return v.Ch(C,q),M!=null&&C==0&&M.Wt(b.ke),C},g.cK=function(v,b,C,M){if(v.B())return v;var $=v.getType();if($==33)return v;var L=m.ta.kj(b,v,!1);if($==197)return b=new m.l,v.A(b),b.Bi(L)?v.Ia():v;if(m.aa.yd($))return($=new m.Ta(v.description)).oc(v,!0),g.cK($,b,C,M);if(L=v.om(L),(C=C?-1:L)==2)return v;if(v=new g(v,b,C,M,!1),$==550)v=v.pU();else if($==1607)v=v.NV();else{if($!=1736)throw m.i.Qa();v=v.rV()}return v},g.prototype.Mh=function(v,b,C){if(v==b)return 0;v=this.gi.get(v);var M=this.gi.get(b);b=v>>1;var $=M>>1,L=new m.h,q=new m.h;return this.lf.tc(2*b,L),L.y+=1&v?this.Oj:-this.Oj,this.lf.tc(2*$,q),q.y+=1&M?this.Oj:-this.Oj,(v=L.compare(q))==0&&C?0>(C=this.Fl.get(b)-this.Fl.get($))?-1:0<C?1:0:v},g.prototype.Ou=function(v,b){if(v==b)return 0;var C=this.X,M=C.Na(v),$=C.Na(b);if(M.x<$.x)return-1;if(M.x>$.x)return 1;if(M.y<$.y)return-1;if(M.y>$.y)return 1;for(M=1;M<this.oT;M++){$=this.nH.kd(M);for(var L=m.ra.Va($),q=0;q<L;q++){var U=C.Uc($,v,q),ee=C.Uc($,b,q);if(U<ee)return-1;if(U>ee)return 1}}return 0},g.prototype.PO=function(v,b){var C=this.Ou(v,b);return C==0?v<b?-1:1:C},g.prototype.XP=function(v,b){if(v===b)return 0;var C=v.ne.kg();v.Wp()&&C.Sq(),v=b.ne.kg(),b.Wp()&&v.Sq(),b=C.qu();var M=v.qu();return M==b?(b=C.wi(v),Math.abs(b)<=8881784197001252e-31*(Math.abs(v.x*C.y)+Math.abs(v.y*C.x))&&(b--,b++),0>b?1:0<b?-1:0):b<M?-1:1},g}();m.Jx=d}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 30},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),a=new m.Zc(a),this.V(h,a,u,d).next()):new m.BL(h,a,u,d)},p.ep=function(h,a,u,d){var g=h.Db(),v=a.Db();if(h.B()&&a.B())return g>v?h:a;if(h.B())return a;if(a.B())return h;var b=new m.l,C=new m.l,M=new m.l;return h.A(b),a.A(C),M.K(b),M.Zb(C),b=m.ta.Wd(u,M,!0),C=h.getType(),M=a.getType(),C==33&&M==33?p.aV(h,a,b):C!=M?0<g||0<v?g>v?h:a:C==550?p.iI(h,a,b):p.iI(a,h,b):m.Fg.ep(h,a,u,d)},p.aV=function(h,a,u){u=u*Math.sqrt(2)*1.00001,u*=u;var d=h.D(),g=a.D(),v=new m.de(h.description);return m.h.yc(d,g)>u&&(v.add(h),v.add(a)),v},p.iI=function(h,a,u){var d=h.ub(0),g=h.I(),v=a.D(),b=h.Ia();u=u*Math.sqrt(2)*1.00001;var C=new m.l;if(h.A(C),C.W(u,u),C.contains(v)){u*=u,C=!1;for(var M=[],$=0;$<g;$++)M[$]=!1;for($=0;$<g;$++){var L=d.read(2*$),q=d.read(2*$+1);(L-=v.x)*L+(q-=v.y)*q<=u&&(C=!0,M[$]=!0)}if(C)for($=0;$<g;$++)M[$]||b.Fd(h,$,$+1);else b.Fd(h,0,g),b.add(a)}else b.Fd(h,0,g),b.add(a);return b},p.instance=null,p}(m.Je);m.Kx=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){this.ts=h==null,this.ya=-1,this.Rd=p,this.vg=a,this.NT=h.next(),this.Ub=u}return T.prototype.next=function(){return this.ts?null:(p=this.Rd.next())!=null?(this.ya=this.Rd.La(),m.Kx.ep(p,this.NT,this.vg,this.Ub)):null;var p},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.BL=j}(ye||(ye={})),function(m){var j=function(){function h(){}return h.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},h}(),T=function(){function h(){this.Gr=0,this.pj=[]}return h.prototype.pN=function(a){this.Gr+=a.Ax,this.pj.push(a)},h.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},h.prototype.my=function(){return this.pj[this.pj.length-1]},h.prototype.Nb=function(a){return a===this},h}(),p=function(){function h(a,u,d){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=a,this.vg=u,this.Ub=d}return h.dE=function(a){var u=[],d=0;for(a=Object.keys(a);d<a.length;d++)u.push(Number(a[d]));return u.sort(function(g,v){return g-v}),u},h.prototype.fG=function(a){var u=this.Do[a],d=h.dE(u)[0],g=u[d],v=g.my().$y;return g=g.my().AK,delete u[d],g&&(v=m.Yl.local().V(v,this.vg,!1,this.Ub),a==0&&v.getType()==33&&(a=new m.de(v.description),v.B()||a.add(v),v=a)),v},h.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw m.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},h.prototype.La=function(){return this.ya},h.prototype.qK=function(){if(this.Ic)return!0;var a=null;if(this.Rd!=null&&(a=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),m.mp.zp(this.Ub),a!=null){var u=a.Db();this.AH[u]=!0,u>=this.zk&&!this.jA&&(this.ND(u,!1,a),u>this.zk&&!this.jA&&this.zW(u))}if(0<this.iq)for(u=0;u<=this.zk;u++)for(;1<this.uq[u]&&(a=this.FO(u)).length!=0;)a=m.Fg.VP(a,this.vg,this.Ub),this.ND(u,!0,a);return this.Ic},h.prototype.FO=function(a){for(var u=[],d=[],g=this.Do[a],v=h.dE(g),b=0;b<v.length;b++){var C=v[b],M=g[C];if(this.Ic||1e4<M.Gr&&1<M.pj.length){for(this.uq[a]-=M.pj.length,this.iq-=M.pj.length;0<M.pj.length;)u.push(M.my().$y),M.TV();d.push(C)}}for(b=0;b<d.length;b++)delete g[d[b]];return u},h.prototype.zW=function(a){for(var u=0;u<a;u++)this.Do[u]=[],this.iq-=this.uq[u],this.uq[u]=0},h.prototype.ND=function(a,u,d){var g=new j;if(g.Fz(),g.$y=d,d=h.eS(d),g.Ax=d,d=h.cS(d),a+1>this.Do.length)for(var v=0,b=Math.max(2,a+1);v<b;v++)this.Do.push([]);(v=this.Do[a][d])===void 0&&(v=new T,this.Do[a][d]=v),g.AK=u,v.pN(g),this.uq[a]++,this.iq++,this.zk=Math.max(this.zk,a)},h.cS=function(a){return 0<a?m.O.truncate(Math.log(a)/Math.log(4)+.5):0},h.eS=function(a){var u=a.getType();if(m.aa.xj(u))return a.I();if(u==33)return 1;if(u==197)return 4;if(m.aa.yd(u))return 2;throw m.i.Qa()},h.prototype.qe=function(){this.qK()},h}();m.DL=p}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 1},p.prototype.V=function(h,a,u,d){return d===void 0?new m.DL(h,a,u):this.gQ(h,a,u,d)},p.prototype.gQ=function(h,a,u,d){return h=new m.Zc([h,a]),this.V(h,u,d).next()},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.instance=null,p}(m.Je);m.Gh=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.nextPath=0]="nextPath",T[T.nextSegment=1]="nextSegment",T[T.iterate=2]="iterate",j=function(){function p(h,a,u,d){this.Ts=new m.l,this.GT=h,this.HT=a,this.mq=d,this.uo=-1,this.rl=!1;var g=h.Bb;g!=null&&(g=d?g.zo:g.Fb)!=null&&(this.Ic=!1,this.qa=u,this.Fb=g,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,d?this.uo=a.da():this.sd=a.Ga()),this.rl||(g=a.Bb)!=null&&(g=d?g.zo:g.Fb)!=null&&(this.Ic=!1,this.qa=u,this.Fb=g,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,d?this.uo=h.da():this.sd=h.Ga()),this.rl||(this.ci=d?m.ta.mR(h,a,u,1<=h.om(0),1<=a.om(0)):m.ta.lR(h,a,u))}return p.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var h=!0;h;)switch(this.Xb){case 0:h=this.xU();break;case 1:h=this.yU();break;case 2:h=this.Uz();break;default:throw m.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},p.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},p.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},p.prototype.uz=function(){if(!this.mq)throw m.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},p.prototype.az=function(){if(!this.mq)throw m.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},p.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},p.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var h=this.sd.ha();return this.xw.Uo(h,this.qa),this.Xb=2,!0},p.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},p}(),m.Zl=j}(ye||(ye={})),function(m){(m=m.OL||(m.OL={}))[m.enumClosed=1]="enumClosed",m[m.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",m[m.enumOGCStartPolygon=4]="enumOGCStartPolygon",m[m.enumCalcMask=4]="enumCalcMask"}(ye||(ye={})),function(m){m.QC=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v,b){var C=[0,0,0],M=[0,0,0],$=[0,0,0],L=[0,0,0,0],q=new m.ga(0),U=new m.ga(0),ee=new m.ga(0);if(g!=null||v!=null||b!=null)if(m.s.ti(p))m.Yg.tb(T,h,a,u,d,g,v,b);else{u=m.F.ba(u),h=m.F.ba(h);var Q=m.F.ba(u-h);if(m.s.Y(a,d)&&(m.s.Y(h,u)||m.s.Y(m.s.P(a),1.570796326794897)))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.Y(a,-d)){if(m.s.Y(m.s.P(a),1.570796326794897))return g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0<a?m.F.ba(3.141592653589793-m.F.ba(u)):m.F.ba(u)),void(b!=null&&(b.u=0<a?m.F.ba(u):m.F.ba(3.141592653589793-m.F.ba(u))));m.s.Y(m.s.P(Q),3.141592653589793)&&(g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0),b!=null&&(b.u=0))}else if(m.s.Y(m.s.P(a),1.570796326794897)||m.s.Y(m.s.P(d),1.570796326794897)||m.s.Y(h,u)||m.s.Y(m.s.P(Q),3.141592653589793)||m.s.Cd(a))return void m.Wk.tb(T,p,h,a,u,d,g,v,b);var ge=Math.sqrt(1-p);u=m.F.ba(u-h),h=0,m.F.cl(1,p,a,h,0,q,U,ee),C[0]=q.u,C[1]=U.u,C[2]=ee.u,m.F.cl(1,p,d,u,0,q,U,ee),M[0]=q.u,M[1]=U.u,M[2]=ee.u,$[0]=0,$[1]=0,$[2]=-1*p*m.F.n(1,p,a)*Math.sin(a),0>u?m.F.Wq($,M,C,L,0):m.F.Wq($,C,M,L,0),U=[0,0,0],ee=[0,0,0];var ve=[0,0,0];C=[0,0,0],q=[0,0,0];var fe=Math.acos(L[2]/1),Ce=1-p,Ie=Math.tan(fe),Ne=1+Ie*Ie/Ce,Ve=2*$[2]*Ie/Ce;for(Ce=(-Ve+(Ie=Math.sqrt(Ve*Ve-4*Ne*($[2]*$[2]/Ce-1))))/(Ne*=2),Ve=(-Ve-Ie)/Ne,Ie=Math.tan(fe),fe=(Ce+Ve)/2,$=((Ne=Ie*Ce+$[2])+(Ie*Ve+$[2]))/2,Ie=m.F.gp(Ce-fe,Ne-$),Ce=$/ge*1.570796326794897,Ve=0;100>Ve&&(Ne=(Ne=m.F.w(p,Ce))*Ne/Math.cos(Ce)*(Math.sin(Ce)-$*Ne/(1-p)),!m.s.Cd(Ne));Ve++)Ce-=Ne;$=m.F.n(1,p,Ce)*Math.cos(Ce),Ie=1-Ie/($=Math.sqrt(($-fe)*($+fe))),Ie*=2-Ie,Ne=m.F.on(U),fe=m.F.on(ee),Ce=m.F.on(ve);var Xe=m.F.St(ve,U);Ve=m.F.St(ve,ee),m.F.zx(ve,U,C),m.F.zx(ve,ee,q),U=Math.acos(Xe/(Ce*Ne)),ee=Math.acos(Ve/(Ce*fe)),ee*=m.s.Mb(1,m.F.St(C,q)),(1.570796326794897<=m.s.P(U)&&1.570796326794897<=m.s.P(ee)||3.141592653589793<m.s.P(U-ee))&&(U=(3.141592653589793-m.s.P(U))*m.s.Mb(1,U),ee=(3.141592653589793-m.s.P(ee))*m.s.Mb(1,ee)),C=m.F.Qj(Ie,ee),q=m.F.q($,Ie,m.F.Qj(Ie,U)),C=m.F.q($,Ie,C),C=m.s.P(C-q)*T,U=new m.ga(0),ee=new m.ga(0),ve=L[1]/1,ve*=-m.s.Mb(1,Q),q=Math.acos(ve)*m.s.Mb(1,Q),j.rf(T,p,h,a,C,q,U,ee),m.s.Y(u,U.u)&&m.s.Y(d,ee.u)||(Ie=m.F.gp(m.F.ba(u-U.u),d-ee.u),j.rf(T,p,h,a,C,m.F.ba(q+3.141592653589793),U,ee),(Ne=m.F.gp(m.F.ba(u-U.u),d-ee.u))<Ie&&(q=m.F.ba(q+3.141592653589793))),U=[0,0,0,0],ee=[0,0,0,0],Ie=[0,0,0],T=[0,0,0],h=[0,0,0],a=[0,0,0],ve=[0,0,0],($=[0,0,0])[0]=0,$[1]=0,$[2]=ge,Ie[0]=0,Ie[1]=0,Ie[2]=0,m.F.Wq(Ie,$,M,U,0),m.s.Cd(d)?(T[0]=M[0],T[1]=M[1],T[2]=1,h[0]=1*Math.cos(u)-1*Math.sin(u),h[1]=1*Math.sin(u)+1*Math.cos(u)):(p=m.F.n(1,p,d)*Math.cos(d),T[0]=0,T[1]=0,M[2]+=Math.tan(1.570796326794897-m.s.P(d))*p*m.s.Mb(1,d),h[0]=p*Math.cos(u)-p*Math.sin(u),h[1]=p*Math.sin(u)+p*Math.cos(u)),h[2]=M[2],m.F.Wq(M,h,T,ee,1),m.F.zx(ee,U,a),m.F.zx(ee,L,ve),ve=m.F.St(a,ve)/(m.F.on(a)*m.F.on(ve)),ve*=m.s.Mb(1,Q),u=Math.acos(ve)*-m.s.Mb(1,Q),(0<q&&0<u||0>q&&0>u)&&(u=m.F.ba(u+3.141592653589793)),g!=null&&(g.u=C),v!=null&&(v.u=q),b!=null&&(b.u=u)}}},j.rf=function(T,p,h,a,u,d,g,v){var b=[0,0,0],C=[0,0,0],M=[0,0,0],$=[0,0,0],L=[0,0,0],q=[0,0,0],U=[0,0,0],ee=[0,0,0,0],Q=new m.ga(0),ge=new m.ga(0),ve=new m.ga(0),fe=new m.ga(0),Ce=new m.ga(0),Ie=new m.ga(0);if(g!=null&&v!=null)if(m.s.ti(p))m.Yg.rf(T,h,a,u,d,g,v);else if(m.s.Cd(u))g!=null&&(g.u=h),v!=null&&(v.u=a);else if(d=m.F.ba(d),0>u&&(u=m.s.P(u),d=m.F.ba(d+3.141592653589793)),h=m.F.ba(h),a=m.F.ba(a),1.570796326794897<m.s.P(a)&&(h=m.F.ba(h+3.141592653589793),a=m.s.Mb(3.141592653589793,a)-a),m.s.Y(m.s.P(a),1.570796326794897)||m.s.Cd(a)||m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))m.Wk.rf(T,p,h,a,u,d,g,v);else{var Ne=Math.sqrt(1-p);for(T=u/T,m.F.cl(1,p,a,0,0,fe,Ce,Ie),b[0]=fe.u,b[1]=Ce.u,b[2]=Ce.u,U[0]=0,U[1]=0,U[2]=-1*p*m.F.n(1,p,a)*Math.sin(a),fe=m.F.n(1,p,a),Ce=m.F.ba(1.570796326794897-d),Ie=Math.sin(Ce),u=Math.cos(a),a=Math.sin(a),L[0]=fe*u-a*Ie,L[1]=Math.cos(Ce),L[2]=(1-p)*fe*a+u*Ie,0>d?m.F.Wq(U,L,b,ee,0):m.F.Wq(U,b,L,ee,0),b=Math.acos(ee[2]/1),ee=Math.atan2(-ee[1],-ee[0]),a=1-p,Ce=1+(L=Math.tan(b))*L/a,a=(-(fe=2*U[2]*L/a)+(L=Math.sqrt(fe*fe-4*Ce*(U[2]*U[2]/a-1))))/(Ce*=2),fe=(-fe-L)/Ce,L=Math.tan(b),b=(a+fe)/2,U=((Ce=L*a+U[2])+(L*fe+U[2]))/2,L=m.F.gp(a-b,Ce-U),Ne=U/Ne*1.570796326794897,a=0;100>a&&(fe=(fe=m.F.w(p,Ne))*fe/Math.cos(Ne)*(Math.sin(Ne)-U*fe/(1-p)),!m.s.Cd(fe));a++)Ne-=fe;Ne=m.F.n(1,p,Ne)*Math.cos(Ne),U=1-L/(Ne=Math.sqrt((Ne-b)*(Ne+b))),U*=2-U,q=Math.acos(m.F.St(q,C)/(m.F.on(q)*m.F.on(C))),q*=m.s.Mb(1,C[0]),d=(m.F.q(Ne,U,m.F.Qj(U,q))+T*m.s.Mb(1,d))/m.F.Ah(Ne,U),d=m.F.ba(1.570796326794897*d),d=m.F.Rq(U,d),m.F.n(Ne,U,d),L=m.F.ba(ee+h),h=Math.cos(L),d=Math.sin(L),M[0]=$[0]*h+$[1]*-d,M[1]=$[0]*d+$[1]*h,M[2]=$[2],m.F.jO(p,M[0],M[1],M[2],ve,ge,Q),g!=null&&(g.u=ge.u),v!=null&&(v.u=ve.u)}},j}()}(ye||(ye={})),function(m){var j=function(){function u(d){this.Ya=null,this.wt=new m.h,this.xt=new m.h,this.g=d}return u.prototype.compare=function(d,g,v){return this.g.Gc(g,this.wt),this.g.Gc(d.ja(v),this.xt),this.wt.compare(this.xt)},u}(),T=function(){function u(d){this.Bf=new m.h,this.Dk=new m.h,this.g=d}return u.prototype.Dh=function(d){this.Bf.L(d)},u.prototype.compare=function(d,g){return this.g.Gc(d.ja(g),this.Dk),this.Bf.compare(this.Dk)},u}(),p=function(u){function d(g){var v=u.call(this,g.g,g.qa,!1)||this;return v.ib=g,v}return ri(d,u),d.prototype.compare=function(g,v,b){if(this.rg)return-1;var C=this.ib.Qd.Jn(this.ib.Rh(v));g=g.ja(b);var M=this.ib.Qd.Jn(this.ib.Rh(g));return this.Dm=b,this.RE(v,C,g,M)},d}(m.UC),h=function(u){function d(g){var v=u.call(this,g.g,g.qa)||this;return v.ib=g,v}return ri(d,u),d.prototype.compare=function(g,v){return this.rg?-1:(g=this.ib.Qd.Jn(this.ib.Rh(g.ja(v))),this.Dm=v,this.SE(v,g))},d}(m.aM),a=function(){function u(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new m.h,this.Pi=new m.h,this.hb=new m.$c(8),this.zd=new m.$c(5),this.lh=new m.au,this.Qd=new m.au,this.Ng=!1,this.vh=new m.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new m.Yj,this.Mc=new m.Yj,this.nh=new m.ia(0),this.Gk=new m.TC,this.Ff=new m.ia(0),this.Ak=new m.ia(0),this.jo=new m.Sa}return u.prototype.PX=function(d,g){var v=new m.Dd;return v.$B(),d.Oc(v),this.er(d),this.Wn=!1,this.qa=g,this.UA=g*g,g=this.jC(),d.Oc(v),g||(this.qQ(),g||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},u.prototype.TX=function(d,g){this.er(d),this.Wn=!1,this.qa=g,this.UA=g*g,this.Ng=!1,this.jC(),this.Ng||(this.Ng=d.Gp(g,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},u.prototype.pg=function(d,g){return this.hb.T(d,0+g)},u.prototype.LB=function(d,g,v){this.hb.S(d,0+g,v)},u.prototype.Rh=function(d){return this.hb.T(d,2)},u.prototype.ZW=function(d,g){this.hb.S(d,2,g)},u.prototype.RF=function(d,g){return this.hb.T(d,3+g)},u.prototype.Pp=function(d){return this.hb.T(d,7)},u.prototype.Pl=function(d,g){this.hb.S(d,7,g)},u.prototype.Rp=function(d,g){return this.hb.T(d,3+this.Op(d,g))},u.prototype.fr=function(d,g,v){this.hb.S(d,3+this.Op(d,g),v)},u.prototype.NR=function(d,g){return this.hb.T(d,5+this.Op(d,g))},u.prototype.hr=function(d,g,v){this.hb.S(d,5+this.Op(d,g),v)},u.prototype.Sr=function(d){return this.zd.T(d,0)},u.prototype.UW=function(d,g){this.zd.S(d,0,g)},u.prototype.ez=function(d){return this.zd.T(d,4)},u.prototype.cr=function(d,g){this.zd.S(d,4,g)},u.prototype.il=function(d){return this.zd.T(d,1)},u.prototype.ln=function(d,g){this.zd.S(d,1,g)},u.prototype.dz=function(d){return this.zd.T(d,3)},u.prototype.Et=function(d,g){this.zd.S(d,3,g)},u.prototype.Ym=function(d){var g=this.zd.Ce(),v=this.lh.Ph();return this.UW(g,v),d!=-1?(this.lh.addElement(v,d),this.g.Ra(d,this.xh,g),this.cr(g,this.g.Ua(d))):this.cr(g,-1),g},u.prototype.HP=function(d){this.zd.jd(d)},u.prototype.LD=function(d,g){this.lh.addElement(this.Sr(d),g),this.g.Ra(g,this.xh,d)},u.prototype.nt=function(d){var g=this.hb.Ce(),v=this.Qd.Ph();return this.ZW(g,v),d!=-1&&this.Qd.addElement(v,d),g},u.prototype.MD=function(d,g){this.Qd.addElement(this.Rh(d),g)},u.prototype.Uu=function(d){this.hb.jd(d),0<=(d=this.nh.lF(d))&&this.nh.SV(d)},u.prototype.hj=function(d,g){if(this.pg(d,0)==-1)this.LB(d,0,g);else{if(this.pg(d,1)!=-1)throw m.i.Qa();this.LB(d,1,g)}this.ky(d,g)},u.prototype.ky=function(d,g){var v=this.il(g);if(v!=-1){var b=this.Rp(v,g);this.hr(b,g,d),this.fr(d,g,b),this.fr(v,g,d),this.hr(d,g,v)}else this.hr(d,g,d),this.fr(d,g,d),this.ln(g,d)},u.prototype.Op=function(d,g){return this.pg(d,0)==g?0:1},u.prototype.Xm=function(d,g){var v,b=this.dz(g);if(b!=-1&&(this.df.vd(b,-1),this.Et(g,-1)),(b=this.il(g))!=-1){var C=v=b;do{var M=!1,$=this.Op(v,g),L=this.RF(v,$);if(this.pg(v,$+1&1)==d){if(this.Xu(v),this.Qd.bh(this.Rh(v)),this.Uu(v),v==L){b=-1;break}b==v&&(b=this.il(g),C=L,M=!0)}v=L}while(v!=C||M);if(b!=-1){do $=this.Op(v,g),L=this.RF(v,$),this.LB(v,$,d),v=L;while(v!=C);(v=this.il(d))!=-1?(C=this.Rp(v,d),M=this.Rp(b,d),C==v?(this.ln(d,b),this.ky(v,d),this.ln(d,v)):M==b&&this.ky(b,d),this.fr(b,d,C),this.hr(C,d,b),this.fr(v,d,M),this.hr(M,d,v)):this.ln(d,b)}}for(b=this.Sr(d),v=this.Sr(g),C=this.lh.rc(v);C!=-1;C=this.lh.lb(C))this.g.Ra(this.lh.ja(C),this.xh,d);this.lh.Hy(b,v),this.HP(g)},u.prototype.UT=function(d,g){var v=this.pg(d,0),b=this.pg(d,1),C=this.pg(g,0),M=this.pg(g,1);this.Qd.Hy(this.Rh(d),this.Rh(g)),g==this.il(v)&&this.ln(v,d),g==this.il(b)&&this.ln(b,d),this.Xu(g),this.Uu(g),v==C&&b==M||b==C&&v==M||(this.Hn(v,this.yo),this.Hn(C,this.Pi),this.yo.qb(this.Pi)?(v!=C&&this.Xm(v,C),b!=M&&this.Xm(b,M)):(b!=C&&this.Xm(b,C),v!=M&&this.Xm(v,M)))},u.prototype.Xu=function(d){var g=this.pg(d,1);this.dF(d,this.pg(d,0)),this.dF(d,g)},u.prototype.dF=function(d,g){var v=this.Rp(d,g),b=this.NR(d,g),C=this.il(g);v!=d?(this.fr(b,g,v),this.hr(v,g,b),C==d&&this.ln(g,v)):this.ln(g,-1)},u.prototype.WD=function(d,g,v){var b=this.Qd.rc(d),C=this.Qd.ja(b);d=this.Le(C);var M=this.Le(this.g.U(C));for(this.g.jr(C,g,v,!0),b=this.Qd.lb(b);b!=-1;b=this.Qd.lb(b)){C=this.Qd.ja(b);var $=this.Le(C)==d;this.g.jr(C,g,v,$)}b=g.Vp(v,0).ac(),g=g.Vp(v,g.ol(v)-1).wc(),this.BK(d,b),this.BK(M,g)},u.prototype.ZE=function(d,g,v){var b=this.Rh(d),C=this.pg(d,0),M=this.pg(d,1),$=this.nt(-1);for(this.nh.add($),this.Pl($,-3),this.Ff.add($),this.hj($,C),d=1,g=g.ol(v);d<g;d++)v=this.Ym(-1),this.Ak.add(v),this.Ff.add(v),this.hj($,v),$=this.nt(-1),this.nh.add($),this.Pl($,-3),this.Ff.add($),this.hj($,v);for(this.hj($,M),b=this.Qd.rc(b);b!=-1;b=this.Qd.lb(b))if(M=this.Qd.ja(b),this.Le(M)==C){d=0;do 0<d&&($=this.Ff.get(d-1),this.LD($,M),this.ez($)==-1&&this.cr($,this.g.Ua(M))),$=this.Ff.get(d),d+=2,this.MD($,M),M=this.g.U(M);while(d<this.Ff.size)}else{d=this.Ff.size-1;do d<this.Ff.size-2&&($=this.Ff.get(d+1),this.LD($,M),0>this.ez($)&&this.cr($,this.g.Ua(M))),$=this.Ff.get(d),d-=2,this.MD($,M),M=this.g.U(M);while(0<=d)}this.Ff.clear(!1)},u.prototype.Le=function(d){return this.g.Pa(d,this.xh)},u.prototype.TI=function(d,g,v){var b=this.pg(g,0),C=new m.h;this.Hn(b,C);var M=new m.h,$=this.pg(g,1);this.Hn($,M);var L=v.ol(d),q=v.Vp(d,0),U=new m.h;if(q.Yp(U),!C.qb(U)){if(!this.Ng){var ee=C.compare(this.vh);0>ee*(U=U.compare(this.vh))&&(this.Ng=!0)}this.vF(b,this.Ff),this.Ak.add(b)}for(!this.Ng&&1<L&&(ee=C.compare(M),q=q.wc(),(C.compare(q)!=ee||q.compare(M)!=ee||0>q.compare(this.vh))&&(this.Ng=!0)),d=(q=v.Vp(d,L-1)).wc(),M.qb(d)||(this.Ng||0>(ee=M.compare(this.vh))*(U=d.compare(this.vh))&&(this.Ng=!0),this.vF($,this.Ff),this.Ak.add($)),this.Ff.add(g),M=0,$=this.Ff.size;M<$;M++)d=this.Ff.get(M),v=this.Pp(d),m.$c.LG(v)&&(this.Mc.vd(v,-1),this.Pl(d,-1)),d!=g&&this.Pp(d)!=-3&&(this.nh.add(d),this.Pl(d,-3));this.Ff.clear(!1)},u.prototype.lO=function(d,g){this.$d.compare(this.Mc,this.Mc.ja(d),g),this.$d.rg&&(this.$d.Kr(),this.oF(d,g))},u.prototype.oF=function(d,g){this.Wn=!0,d=this.Mc.ja(d),g=this.Mc.ja(g);var v=this.Qd.Jn(this.Rh(d)),b=this.Qd.Jn(this.Rh(g)),C=this.g.bc(v);C==null&&(this.ie==null&&(this.ie=new m.yb),this.g.ed(v,this.ie),C=this.ie),(v=this.g.bc(b))==null&&(this.Nm==null&&(this.Nm=new m.yb),this.g.ed(b,this.Nm),v=this.Nm),this.Gk.Oo(C),this.Gk.Oo(v),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(d,g,-1,this.Gk),this.Gk.clear()},u.prototype.GQ=function(d,g){this.Wn=!0,g=this.Mc.ja(g);var v=this.Qd.Jn(this.Rh(g)),b=this.g.bc(v);b==null&&(this.ie==null&&(this.ie=new m.yb),this.g.ed(v,this.ie),b=this.ie),v=this.BF(d),this.Gk.Oo(b),this.g.Vi(v,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(g,-1,d,this.Gk),this.Gk.clear()},u.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var d=this.nh.Fc();this.nh.If(),this.Pl(d,-1),this.WS(d)!=-1&&this.wS(d),this.Vn=!1}},u.prototype.wS=function(d){if(this.Vn){var g=this.Mc.zu(this.MH,this.GH,d,!0);this.Vn=!1}else g=this.Mc.KD(d);g==-1?this.UT(this.Mc.ja(this.Mc.FF()),d):(this.Pl(d,g),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,g)))},u.prototype.WS=function(d){var g=this.pg(d,0);if(d=this.pg(d,1),this.Hn(g,this.yo),this.Hn(d,this.Pi),m.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var v=this.yo.compare(this.vh),b=this.Pi.compare(this.vh);return 0>=v&&0<b?d:0>=b&&0<v?g:-1},u.prototype.oQ=function(){var d=new m.ia(0);d.Jb(this.g.fd);for(var g=this.g.Yq(),v=g.next();v!=-1;v=g.next())this.g.Pa(v,this.xh)!=-1&&d.add(v);this.g.nx(d,d.size),this.pQ(d)},u.prototype.pQ=function(d){this.df.clear(),this.df.De(d.size),this.df.Vo(new j(this.g));var g=new m.h;g.Rc();for(var v=-1,b=new m.h,C=0,M=d.size;C<M;C++){var $=d.get(C);this.g.Gc($,b),b.qb(g)?($=this.g.Pa($,this.xh),this.Xm(v,$)):(v=this.Le($),this.g.Gc($,g),$=this.df.xn($),this.Et(v,$))}},u.prototype.qQ=function(){var d=new m.ia(0);d.Jb(this.g.fd);for(var g=this.df.rc(-1);g!=-1;g=this.df.lb(g))d.add(this.df.ja(g));this.df.clear(),this.g.nx(d,d.size),g=0;for(var v=d.size;g<v;g++){var b=d.get(g),C=this.Le(b);b=this.df.xn(b),this.Et(C,b)}},u.prototype.vF=function(d,g){var v=this.il(d);if(v!=-1){var b=v;do m.$c.LG(this.Pp(b))&&g.add(b),b=this.Rp(b,d);while(b!=v)}},u.prototype.BK=function(d,g){for(d=this.lh.rc(this.Sr(d));d!=-1;d=this.lh.lb(d))this.g.mf(this.lh.ja(d),g)},u.prototype.hK=function(d,g,v,b){this.Xu(d),g!=-1&&this.Xu(g),this.TI(0,d,b),g!=-1&&this.TI(1,g,b),v!=-1&&(b.Bf.D(this.yo),this.Hn(v,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(v)),v=0;for(var C=this.Ak.size;v<C;v++){var M=this.Ak.get(v),$=this.dz(M);$!=-1&&(this.df.vd($,-1),this.Et(M,-1))}for(v=this.Rh(d),C=g!=-1?this.Rh(g):-1,this.WD(v,b,0),g!=-1&&this.WD(C,b,1),this.ZE(d,b,0),g!=-1&&this.ZE(g,b,1),this.Qd.bh(v),this.Uu(d),g!=-1&&(this.Qd.bh(C),this.Uu(g)),v=0,C=this.Ak.size;v<C;v++)(M=this.Ak.get(v))==this.Jq&&(this.Xv=!0),($=this.dz(M))==-1&&(($=this.df.KD(this.BF(M)))==-1?(d=this.Le(this.df.ja(this.df.FF())),this.Xm(d,M)):this.Et(M,$));this.Ak.clear(!1)},u.prototype.Hn=function(d,g){this.g.dG(this.ez(d),g)},u.prototype.BF=function(d){return this.lh.Jn(this.Sr(d))},u.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new p(this),this.Mc.Zn=this.$d);var d=new m.ia(0),g=null,v=null;this.GH=this.MH=-1,this.Vn=!1;for(var b=this.df.rc(-1);b!=-1;){this.Vn=!1;var C=this.df.ja(b);this.Jq=this.Le(C),this.g.Gc(C,this.vh),this.$d.$J(this.vh.y,this.vh.x);var M=this.il(this.Jq),$=M==-1;if(!$){C=M;do{var L=this.Pp(C);L==-1?(this.nh.add(C),this.Pl(C,-3)):L!=-3&&d.add(L),C=this.Rp(C,this.Jq)}while(C!=M)}if(0<d.size){for(this.Vn=d.size==1&&this.nh.size==1,$=0,M=d.size;$<M;$++)C=this.Mc.ja(d.get($)),this.Pl(C,-2);var q=-2,U=-2;for($=0,M=d.size;$<M;$++){if(L=d.get($),q==-2){var ee=this.Mc.we(L);ee!=-1?(C=this.Mc.ja(ee),(C=this.Pp(C))!=-2&&(q=ee)):q=-1}if(U==-2&&((L=this.Mc.lb(L))!=-1?(C=this.Mc.ja(L),(C=this.Pp(C))!=-2&&(U=L)):U=-1),q!=-2&&U!=-2)break}for($=0,M=d.size;$<M;$++)L=d.get($),C=this.Mc.ja(L),this.Mc.vd(L,-1),this.Pl(C,-1);d.clear(!1),this.MH=q!=-1?q:-1,this.GH=U!=-1?U:-1,q!=-1&&U!=-1?this.Vn||this.lO(q,U):q==-1&&U==-1&&(this.Vn=!1)}else $&&(g==null&&(g=new h(this)),g.Dh(this.vh),this.Mc.uJ(g),g.rg&&(g.Kr(),this.GQ(this.Jq,g.Dm)));this.xS(),this.Xv?(this.Xv=!1,v==null&&(v=new T(this.g)),v.Dh(this.vh),b=this.df.uJ(v)):b=this.df.lb(b)}return this.Wn},u.prototype.er=function(d){for(this.g=d,this.xh=this.g.Gd(),this.hb.De(d.fd+32),this.zd.De(d.fd),this.lh.At(d.fd),this.lh.fn(d.fd),this.Qd.At(d.fd+32),this.Qd.fn(d.fd+32),d=this.g.ld;d!=-1;d=this.g.ue(d))if(m.aa.Hc(this.g.ic(d)))for(L=this.g.Ob(d);L!=-1;L=this.g.Rb(L)){var g=this.g.Ja(L),v=this.g.Xa(L),b=this.Ym(v),C=this.nt(v);for(this.hj(C,b),q=this.g.U(v),v=0,g-=2;v<g;v++){var M=this.g.U(q),$=this.Ym(q);this.hj(C,$),C=this.nt(q),this.hj(C,$),q=M}this.g.dc(L)?($=this.Ym(q),this.hj(C,$),C=this.nt(q),this.hj(C,$),this.hj(C,b)):($=this.Ym(q),this.hj(C,$))}else for(var L=this.g.Ob(d);L!=-1;L=this.g.Rb(L)){var q=this.g.Xa(L);for(b=0,g=this.g.Ja(L);b<g;b++)this.Ym(q),q=this.g.U(q)}this.oQ()},u}();m.RC=a}(ye||(ye={})),function(m){var j=function(T){function p(h,a,u){var d=T.call(this)||this;if(h!==void 0)if(u!==void 0){d.description=m.ee.og();var g=new m.Nd;g.K(h,a,u),d.dC(g)}else if(a!==void 0)d.description=m.ee.og(),d.Cb(h,a);else if(h instanceof m.ra)d.description=h;else if(h instanceof m.h)d.description=m.ee.og(),d.Cb(h);else{if(!(h instanceof p))throw m.i.N();d.description=h.description,d.Cb(h.Lg(),h.ih()),h.ka!==null&&(d.ka=h.ka.slice(0))}else d.description=m.ee.og();return d}return ri(p,T),p.prototype.D=function(h){if(h===void 0){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");return(h=new m.h).ma(this.ka[0],this.ka[1]),h}if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");h.ma(this.ka[0],this.ka[1])},p.prototype.Cb=function(h,a){typeof h=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=h,this.ka[1]=a):(this.vc(),this.Cb(h.x,h.y))},p.prototype.Cz=function(){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");var h=new m.Nd;return h.x=this.ka[0],h.y=this.ka[1],h.z=this.description.iG()?this.ka[2]:m.ra.se(1),h},p.prototype.dC=function(h){this.vc();var a=this.hasAttribute(1);a||m.ra.DG(1,h.z)||(this.re(1),a=!0),this.ka==null&&this.un(),this.ka[0]=h.x,this.ka[1]=h.y,a&&(this.ka[2]=h.z)},p.prototype.Lg=function(){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},p.prototype.cC=function(h){this.setAttribute(0,0,h)},p.prototype.ih=function(){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},p.prototype.aK=function(h){this.setAttribute(0,1,h)},p.prototype.bS=function(){return this.Uc(1,0)},p.prototype.wX=function(h){this.setAttribute(1,0,h)},p.prototype.zR=function(){return this.Uc(2,0)},p.prototype.hX=function(h){this.setAttribute(2,0,h)},p.prototype.Ec=function(){return this.yF(3,0)},p.prototype.LJ=function(h){this.setAttribute(3,0,h)},p.prototype.Uc=function(h,a){var u=this.description.Pf(h);return 0<=u?this.ka[this.description.$j(u)+a]:m.ra.se(h)},p.prototype.yF=function(h,a){var u=this.description.Pf(h);return 0<=u?this.ka[this.description.$j(u)+a]:m.ra.se(h)},p.prototype.setAttribute=function(h,a,u){this.vc();var d=this.description.Pf(h);0>d&&(this.re(h),d=this.description.Pf(h)),this.ka==null&&this.un(),this.ka[this.description.$j(d)+a]=u},p.prototype.getType=function(){return 33},p.prototype.Db=function(){return 0},p.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},p.prototype.sn=function(h){if(this.ka!=null){for(var a=m.ee.Iw(h,this.description),u=[],d=0,g=0,v=h.Aa;g<v;g++){var b=h.kd(g),C=m.ra.Va(b);if(a[g]==-1){var M=m.ra.se(b);for(b=0;b<C;b++)u[d]=M,d++}else for(M=this.description.$j(a[g]),b=0;b<C;b++)u[d]=this.ka[M],d++,M++}this.ka=u}this.description=h},p.prototype.un=function(){this.lJ(this.description.Ae.length),p.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},p.prototype.Oc=function(h){if(h instanceof m.Dd){if(!this.Ac()){var a=this.D();h.Eh(a,a),this.Cb(a)}}else this.Ac()||(this.re(1),a=this.Cz(),this.dC(h.fp(a)))},p.prototype.copyTo=function(h){if(h.getType()!=33)throw m.i.N();h.vc(),this.ka==null?(h.Oa(),h.ka=null,h.Nf(this.description)):(h.Nf(this.description),h.lJ(this.description.Ae.length),p.cE(this.ka,h.ka,this.description.Ae.length))},p.prototype.Ia=function(){return new p(this.description)},p.prototype.B=function(){return this.Ac()},p.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},p.prototype.bn=function(h){h.Oa(),this.description!=h.description&&h.Nf(this.description),h.Zb(this)},p.prototype.A=function(h){this.Ac()?h.Oa():(h.v=this.ka[0],h.G=this.ka[1],h.C=this.ka[0],h.H=this.ka[1])},p.prototype.Qo=function(h){if(this.Ac())h.Oa();else{var a=this.Cz();h.v=a.x,h.G=a.y,h.Ye=a.z,h.C=a.x,h.H=a.y,h.Bg=a.z}},p.prototype.Tg=function(h,a){var u=new m.Nc;return this.Ac()?(u.Oa(),u):(h=this.Uc(h,a),u.oa=h,u.va=h,u)},p.prototype.lJ=function(h){if(this.ka==null)this.ka=m.O.lg(h);else if(this.ka.length<h){for(var a=this.ka.slice(0),u=this.ka.length;u<h;u++)a[u]=0;this.ka=a}},p.cE=function(h,a,u){if(0<u)for(u=0;u<h.length;u++)a[u]=h[u]},p.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof p)||this.description!=h.description)return!1;if(this.Ac())return!!h.Ac();for(var a=0,u=this.description.Ae.length;a<u;a++)if(this.ka[a]!=h.ka[a])return!1;return!0},p.prototype.cc=function(){var h=this.description.cc();if(!this.Ac())for(var a=0,u=this.description.Ae.length;a<u;a++){var d=this.ka[a];d=m.O.truncate(d^d>>>32),h=m.O.Th(d,h)}return h},p.prototype.mg=function(){return null},p}(m.aa);m.Sa=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){p!==void 0&&(this.x=p,this.y=h,this.z=a)}return T.construct=function(p,h,a){var u=new T;return u.x=p,u.y=h,u.z=a,u},T.prototype.K=function(p,h,a){this.x=p,this.y=h,this.z=a},T.prototype.lx=function(){this.z=this.y=this.x=0},T.prototype.normalize=function(){var p=this.length();p==0&&(this.x/=p,this.y/=p,this.z/=p)},T.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},T.prototype.sub=function(p){return new T(this.x-p.x,this.y-p.y,this.z-p.z)},T.prototype.Ag=function(p){new T(this.x*p,this.y*p,this.z*p)},T.prototype.Qh=function(p){return this.x*p.x+this.y*p.y+this.z*p.z},T}();m.Nd=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){this.Gw=this.DA=null,this.Xf=h,this.FT=h.y-a,this.ET=h.y+a,this.Ew=0,this.dA=p,this.qa=a,this.RT=a*a,this.eA=a!=0,this.Lv=!1}return T.prototype.result=function(){return this.Ew!=0?1:0},T.prototype.ZM=function(p){return p=p.hc(p.fe(this.Xf,!1)),m.h.yc(p,this.Xf)<=this.RT},T.prototype.fF=function(p){if(!this.eA&&(this.dA&&this.Xf.qb(p.ac())||this.Xf.qb(p.wc())))this.Lv=!0;else if(p.na==this.Xf.y&&p.na==p.la){if(this.dA&&!this.eA){var h=Math.max(p.sa,p.pa);this.Xf.x>Math.min(p.sa,p.pa)&&this.Xf.x<h&&(this.Lv=!0)}}else{var a=!1;if(h=Math.max(p.sa,p.pa),this.Xf.x>h?a=!0:this.Xf.x>=Math.min(p.sa,p.pa)&&(a=0<p.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),a){if(this.Xf.y==p.ac().y){if(this.Xf.y<p.wc().y)return}else if(this.Xf.y==p.wc().y&&this.Xf.y<p.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(p.ac().y>p.wc().y?1:-1)}}},T.prototype.SI=function(p){var h=p.Tg(0,1);if(h.oa>this.ET||h.va<this.FT)return!1;if(this.eA&&this.ZM(p))return!0;if(h.oa>this.Xf.y||h.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(h=p.eG()))for(p=0;p<h;p++){var a=this.DA[p].get();if(this.fF(a),this.Lv)return!0}else if(this.fF(p),this.Lv)return!0;return!1},T.PM=function(p,h,a){for(h=new T(p.In()==0,h,a),p=p.Ga();p.$a();)for(;p.Ha();)if(a=p.ha(),h.SI(a))return-1;return h.result()},T.QM=function(p,h,a,u){var d=new m.l;p.xc(d),d.W(u,u);var g=new T(p.In()==0,a,u);p=p.Ga();var v=new m.l;for(v.K(d),v.C=a.x+u,v.G=a.y-u,v.H=a.y+u,u=(a=h.MF(v,u)).next();u!=-1;u=a.next())if(p.Vb(h.ja(u)),p.Ha()&&(u=p.ha(),g.SI(u)))return-1;return g.result()},T.wm=function(p,h,a){if(p.B())return 0;var u=new m.l;if(p.xc(u),u.W(a,a),!u.contains(h))return 0;if((u=p.Bb)!=null){var d=u.Fk;if(d!=null){if((d=d.So(h.x,h.y))==1)return 1;if(d==0)return 0}if((u=u.Fb)!=null)return T.QM(p,u,h,a)}return T.PM(p,h,a)},T.bT=function(p,h,a){return h.B()?0:T.wm(p,h.D(),a)},T.Ml=function(p,h){return!(16>(p=p.I()))&&2*p+Math.log(p)/Math.log(2)*h<1*p*h},T}();m.Dg=j}(ye||(ye={})),function(m){var j=function(T){function p(h){return T.call(this,!0,h)||this}return ri(p,T),p.prototype.Ia=function(){return new p(this.description)},p.prototype.Db=function(){return 2},p.prototype.getType=function(){return 1736},p.prototype.xG=function(h,a,u){this.JS(h,a,u)},p.prototype.qR=function(){this.FR()},p}(m.Vk);m.Da=j}(ye||(ye={})),function(m){(function(j){j[j.PiPOutside=0]="PiPOutside",j[j.PiPInside=1]="PiPInside",j[j.PiPBoundary=2]="PiPBoundary"})(m.RL||(m.RL={})),m.hd=function(){function j(){}return j.KG=function(T,p,h){return(T=m.Dg.bT(T,p,h))==0?0:T==1?1:2},j.Yd=function(T,p,h){return(T=m.Dg.wm(T,p,h))==0?0:T==1?1:2},j.WX=function(T,p,h,a,u){if(p.length<h||u.length<h)throw m.i.N();for(var d=0;d<h;d++)u[d]=j.Yd(T,p[d],a)},j.sK=function(T,p,h,a,u){if(T.getType()==1736)j.WX(T,p,h,a,u);else{if(T.getType()!=197)throw m.i.fa("invalid_call");var d=new m.l;T.A(d),j.$M(d,p,h,a,u)}},j.$M=function(T,p,h,a,u){if(p.length<h||u.length<h)throw m.i.N();if(T.B())for(a=0;a<h;a++)u[a]=0;else for(T.W(.5*-a,.5*-a),T.W(.5*a,.5*a),a=0;a<h;a++)T.contains(p[a])?u[a]=1:T.contains(p[a])?u[a]=2:u[a]=0},j.YX=function(T,p,h,a,u){for(var d=0;d<h;d++)u[d]=T.qs(p[d],a)?2:0},j.XX=function(T,p,h,a,u){var d=T.Bb,g=null;d!=null&&(g=d.Fk),d=h;for(var v=0;v<h;v++)if(u[v]=1,g!=null){var b=p[v];g.So(b.x,b.y)==0&&(u[v]=0,d--)}if(d!=0)for(T=T.Ga();T.$a()&&d!=0;)for(;T.Ha()&&d!=0;)for(g=T.ha(),v=0;v<h&&d!=0;v++)u[v]==1&&g.qs(p[v],a)&&(u[v]=2,d--);for(v=0;v<h;v++)u[v]==1&&(u[v]=0)},j.tK=function(T,p,h,a,u){var d=T.getType();if(d==1607)j.XX(T,p,h,a,u);else{if(!m.aa.yd(d))throw m.i.fa("Invalid call.");j.YX(T,p,h,a,u)}},j}()}(ye||(ye={})),function(m){var j=function(T){function p(h,a){if(arguments.length==2){var u=T.call(this,!1,h.description)||this;u.nf(h),u.lineTo(a)}else u=T.call(this,!1,h)||this;return u}return ri(p,T),p.prototype.Ia=function(){return new p(this.description)},p.prototype.Db=function(){return 1},p.prototype.getType=function(){return 1607},p.prototype.xG=function(h,a,u){this.KS(h,a,u)},p}(m.Vk);m.Ta=j}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.progress=function(){return!0},T.zp=function(p){if(p!=null&&!p.progress(-1,-1))throw m.i.WC()},T}();m.mp=j}(ye||(ye={})),function(m){var j;(j=m.PK||(m.PK={}))[j.clipWithInputHorizon=1]="clipWithInputHorizon",j[j.clipWithOutputHorizon=2]="clipWithOutputHorizon";var T=function(){function a(){this.Kg=3,this.Vu=this.Jr=NaN}return a.prototype.PW=function(u){this.QB(1,u)},a.prototype.QW=function(u){this.QB(2,u)},a.prototype.hS=function(){return this.hs(1)},a.prototype.iS=function(){return this.hs(2)},a.prototype.QB=function(u,d){this.Kg=d?this.Kg|u:this.Kg&~u},a.prototype.hs=function(u){return!!(this.Kg&u)},a.prototype.Of=function(){var u=new a;return u.Jr=this.Jr,u.Vu=this.Vu,u.Kg=this.Kg,u},a}();m.yC=T,function(a){a[a.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",a[a.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(m.QK||(m.QK={}));var p=function(){function a(){this.Kg=0}return a.prototype.QB=function(u,d){this.Kg=d?this.Kg|u:this.Kg&~u},a.prototype.hs=function(u){return!!(this.Kg&u)},a.jg=function(u){var d=new a;return d.Kg=u.Kg,d},a.prototype.mM=function(u){this.Kg=u.Kg},a}();m.AY=p;var h=function(){function a(u,d,g){this.ef=u,this.Yf=d,this.Uf=new m.l,this.Uf.K(g),this.AT=u.cc()+d.cc()+this.Uf.cc().toString()}return a.prototype.cc=function(){return this.AT},a.prototype.Nb=function(u){return this==u||this.ef.Nb(u.ef)&&this.Yf.Nb(u.Yf)&&this.Uf.Nb(u.Uf)},a}();m.FY=h,h=function(){function a(){this.Yf=this.ef=null,this.rH=new T,this.sH=new p,this.ww=this.Wf=null,this.mw=this.Tn=!0}return a.Nr=function(u,d,g,v){var b;v===void 0&&(v=null),b===void 0&&(b=null);var C=new a;return C.qp(u,d,g,v,b),C},a.prototype.qp=function(u,d,g,v,b){if(u==null||d==null)throw m.i.fa("invalidArgument");if(this.ef=u,this.Yf=d,this.mw=this.Tn=!1,v!=null&&(this.rH=v.Of()),b!=null&&this.sH.mM(b),b=!1,d.Sb()==1&&v!=null&&(v=v.Jr,isNaN(v)||v==0||(b=!0)),u==d)this.Tn=!b,this.mw=!0;else{v=u.Sb();var C=d.Sb();if(v==0||C==0){if(g!=null)throw m.i.N();u.Hd()!=null&&d.Hd()!=null&&(this.Tn=u.Hd().Nb(d.Hd()))}else v==3||C==3?this.Tn=u.Nb(d):this.ef.kS(this.Yf)?this.Tn=!b:this.Tn=!1,this.Wf=g,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},a.prototype.isIdentity=function(){return this.Tn},a.prototype.nR=function(){return this.rH.Of()},a.prototype.Nb=function(u){return u==this||!!(u instanceof a&&this.ef.Nb(u.ef)&&this.Yf.Nb(u.Yf))&&(this.Wf==u.Wf||!(this.Wf==null||u.Wf==null||!this.Wf.Nb(u.Wf)))},a.prototype.oY=function(){this.ww=new m.bu(this)},a}(),m.vr=h}(ye||(ye={})),function(m){var j=function(){function T(){}return T.Cp=function(p){return p*T.oW},T.mx=function(p,h){return T.gP(h-p)},T.hP=function(p){return-360<=p&&720>p?(0>p?p+=360:360<=p&&(p-=360),p):(0>(p=m.lc.RK(p))&&(p+=360),p)},T.gP=function(p){return 180<(p=T.hP(p))&&(p-=360),p},T.oW=57.29577951308232,T}();m.qr=j,m.Hh=function(){function T(){}return T.lj=function(p,h){var a=new m.l;p.A(a);var u=m.cb.gh(h),d=new m.l;return d.K(u),d.v=a.v,d.C=a.C,d.W(.01*d.ca(),0),h=m.ta.Wd(h,a,!1),d.contains(a)?p:m.Ud.clip(p,d,h,0)},T.ks=function(p,h,a,u,d){if(!m.cb.Wc(h))throw m.i.N();var g=m.ta.kj(h,p,!1),v=m.cb.gh(h),b=m.cb.sc(h),C=b.Hd().ai,M=m.cb.vv(b);b=m.cb.ev(b),M*=2-M;var $=new m.Nc;v.cn($);var L=[[0,0],[0,0]];if(m.Eg.Sb(h)==2?u?(L[0][0]=T.Zm(d,$),L[0][1]=v.Jp(),m.cb.vt(),v=L[0][0]*C):(L[0][0]=v.gk(),L[0][1]=d,m.cb.vt(),v=L[0][1]*C):v=d*C,!u&&v!=0)throw m.i.N();var q=new m.ga,U=new m.gd;p=U.Ib(p);for(var ee=[0],Q=new m.h,ge=new m.h,ve=new m.h,fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=U.Ob(p);Ne!=-1;Ne=U.Rb(Ne)){var Ve=U.Xa(Ne);U.D(Ve,ve);for(var Xe=!1,et=Ve=U.U(Ve);et!=-1;et=U.U(et)){if(et==Ve){if(Xe)break;Xe=!0}if(U.D(et,fe),u&&g<d-ve.x&&fe.x-d>g||g<d-fe.x&&ve.x-d>g||!u&&g<-ve.y&&fe.y>g||g<-fe.y&&ve.y>g)do if(!(Math.abs(ve.x-fe.x)>=.5*$.R())){if(m.Eg.Sb(h)==2?(L[0][0]=T.Zm(ve.x,$),L[0][1]=ve.y,L[1][0]=T.Zm(fe.x,$),L[1][1]=fe.y,m.cb.dW(),Ce.x=L[0][0]*C,Ce.y=L[0][1]*C,Ie.x=L[1][0]*C,Ie.y=L[1][1]*C):(Ce.x=ve.x*C,Ce.y=ve.y*C,Ie.x=fe.x*C,Ie.y=fe.y*C),Ie.x=6.283185307179586*(fe.x-ve.x)/$.R()+Ce.x,u){if(ge.x=v,ge.y=T.Nz(b,M,Ce,Ie,v,a),isNaN(ge.y))break}else{if(ge.x=T.Lz(b,M,Ce,Ie,a),isNaN(ge.x))break;ge.y=0}m.kb.wd(b,M,Ce.x,Ce.y,Ie.x,Ie.y,q,null,null,a);var dt=q.u;m.kb.wd(b,M,Ce.x,Ce.y,ge.x,ge.y,q,null,null,a);var ct=q.u;m.Eg.Sb(h)==2?(L[0][0]=ge.x/C,L[0][1]=ge.y/C,m.cb.bR(),u?(Q.y=L[0][1],Q.x=d):(Q.x=T.os(L[0][0],ve.x,fe.x,$),Q.y=d)):u?(Q.x=d,Q.y=ge.y/C):(Q.x=T.os(ge.x/C,ve.x,fe.x,$),Q.y=d),ee[0]=0<dt?m.O.Rk(ct/dt,0,1):.5,ee[0]!=0&&ee[0]!=1&&(dt=U.Ma(et),U.Ul(dt,ee,1),U.Cb(U.U(dt),Q.x,Q.y))}while(!1);ve.L(fe)}}return U.Ne(p)},T.Fn=function(p,h,a,u,d){if(p.B())return p;var g=m.cb.bf(h);return T.Hp(p,a-180*g,360*g,h,u,d,!0)},T.Nz=function(p,h,a,u,d,g){if(3.141592653589793<=Math.abs(a.x-u.x)||!T.Sn(a.x,u.x,d))return NaN;if(a.x>u.x)var v=u;else v=a,a=u;u=new m.ga(0);var b=new m.ga(0),C=new m.ga(0);m.kb.wd(p,h,v.x,v.y,a.x,a.y,b,u,null,g);var M=b.u,$=0,L=1,q=new m.h;for(q.L(v);M*(L-$)>1e-12*p;){var U=.5*($+L);if(m.kb.oj(p,h,v.x,v.y,M*U,u.u,b,C,g),q.x=b.u,q.y=C.u,q.x==d)break;if(T.Sn(v.x,q.x,d))L=U;else{if(!T.Sn(a.x,q.x,d))return NaN;$=U}}return q.y},T.Sn=function(p,h,a){return p=j.Cp(p),h=j.mx(p,j.Cp(h)),(a=j.mx(p,j.Cp(a)))==0||0<h&&0<a&&a<=h||0>h&&0>a&&a>=h},T.Zm=function(p,h){var a=h.va-h.oa;return h.It(p-Math.floor((p-h.oa)/a)*a)},T.os=function(p,h,a,u){var d=new m.Nc;for(d.K(h,a),a=u.R(),p=Math.floor((p-h)/a)*a+p,d=d.sf();Math.abs(p-d)>Math.abs(p+a-d);)p+=a;return p},T.Lz=function(p,h,a,u,d){if(a.y>u.y)var g=u;else g=a,a=u;if((u=new m.Nc).K(g.y,a.y),!u.contains(0)||3.141592653589793<=Math.abs(g.x-a.x))return NaN;if(g.x==a.x)return g.x;var v=new m.ga(0),b=new m.ga(0),C=new m.ga(0);m.kb.wd(p,h,g.x,g.y,a.x,a.y,b,v,null,d);var M=b.u,$=0,L=1,q=new m.h;for(q.L(g);M*(L-$)>1e-12*p;){var U=.5*($+L);if(m.kb.oj(p,h,g.x,g.y,M*U,v.u,b,C,d),q.x=b.u,q.y=C.u,u.K(g.y,q.y),q.y==0)break;if(u.contains(0))L=U;else{if(u.K(a.y,q.y),!u.contains(0))return NaN;$=U}}return q.x},T.Hp=function(p,h,a,u,d,g,v){var b=new m.l;if(p.A(b),b.B())return p;var C=new m.Nc;b.cn(C);var M=new m.Nc;if(M.K(h,h+a),M.contains(C)&&M.va!=C.va)return p;var $=new m.l;$.K(b);var L=p.getType();if(L==33)return((b=($=d?p:p.Of()).Lg())<M.oa||b>=M.va||v&&b==M.va)&&(b+=Math.ceil((M.oa-b)/a)*a,b=M.It(b),$.cC(b)),$;if(L==550){for(u=($=d?p:p.Of()).ub(0),L=2*$.I(),p=!1,d=0;d<L;d+=2)((b=u.read(d))<M.oa||b>=M.va||v&&b==M.va)&&(p=!0,b+=Math.ceil((M.oa-b)/a)*a,b=M.It(b),u.write(d,b));return p&&$.Pc(1993),$}if(M.contains(C))return p;if(L==197)return a=d?p:p.Of(),b.Ea($),a.Xo(b),a;var q=.1*Math.max(b.ca(),b.R());for($.W(0,q),v=p,M=u.Xd(0),p=m.Gh.local(),d=new m.Dd;;){var U=Math.floor((C.oa-h)/a),ee=Math.ceil((C.va-h)/a);if(!(3<ee-U))break;U=Math.floor(.5*(ee+U)),$.v=b.v-q,$.C=h+a*U;var Q=m.Ud.clip(v,$,M,g);$.v=$.C,$.C=b.C+q;var ge=m.Ud.clip(v,$,M,g);d.gg((U-ee)*a,0),ge.Oc(d),L==1736?v=p.V(Q,ge,u,null):(v=Q).add(ge,!1),v.A(b),b.cn(C)}for($.v=h,$.C=h+a,(h=new m.l).K($),h.W(M,0),(h=Math.floor((b.v-$.v)/a)*a)!=0?($.move(h,0),d.gg(-h,0)):d.RB(),h=L==1607?new m.Ta(v.description):new m.Da(v.description),g=new m.l,C=new m.l;b.C>$.v;)(q=m.Ud.clip(v,$,M,0)).A(C),(L==1607?!q.B()&&(C.R()>M||C.ca()>M):!q.B()&&(L!=1736||C.R()>M))&&(q.Oc(d),q.A(C),h.A(g),g.W(M,M),g.isIntersecting(C)&&L==1736?h=p.V(h,q,u,null):h.add(q,!1)),$.move(a,0),d.shift(-a,0);return h},T.WI=function(p,h,a,u){var d=new m.de(a.description);d.Fd(a,0,-1),d=m.cb.zh(d,p,h);var g=a.I();if(u.Oa(),!m.cb.Wc(p)||g!=d.I())return!1;var v=new m.l;a.A(v);var b=new m.l;if(d.A(b),v=v.R(),b=b.R(),v!=0&&b!=0){if(b/=v,p=m.cb.gh(h).R()/m.cb.gh(p).R(),1e-10<Math.abs(b/p-1))return!1}else if(v!=0||b!=0)return!1;for(u.add(a,!1),a=0;a<g;a++)p=d.Na(a),u.Cb(a,p);return!0},T.Oz=function(){throw m.i.Ie()},T}()}(ye||(ye={})),function(m){var j,T,p;(T=j=m.si||(m.si={}))[T.Clip=0]="Clip",T[T.DontClip=1]="DontClip",T[T.PannableFold=2]="PannableFold",function(h){h[h.Geodesic=0]="Geodesic",h[h.Loxodrome=1]="Loxodrome",h[h.GreatElliptic=2]="GreatElliptic",h[h.NormalSection=3]="NormalSection",h[h.ShapePreserving=4]="ShapePreserving"}(p=m.WK||(m.WK={})),m.zb=function(){function h(){}return h.xv=function(a,u,d){if(d||0<u){for(a=a.toString(m.Sc.PE_STR_NAME_CANON|m.Sc.PE_STR_AUTH_NONE),u=[],d=0;d<a.length;d++)u[d]="a"<=a[d]&&"z">=a[d]?u[d]=a[d].toUpperCase():a[d];return u.join()}return a.toString(m.Sc.PE_STR_AUTH_TOP)},h.ur=function(a,u,d,g){var v=g.length,b=d.I();if(b!=0){var C=d.ub(0),M=Math.min(b,v),$=0,L=a.eh();isNaN(u)&&(u=0);for(var q=a.Wc(),U=179*(a=q?a.sc().Oe().R():0)/360;0<b;){if(C.uB($<<1,M,g),m.ej.projToGeogCenter(L,M,g,u),q)for(var ee=0;ee<M;ee++){var Q=g[ee][0]-u,ge=m.lc.sign(Q),ve=C.read(2*($+ee));0>ge*m.lc.sign(ve)&&Math.abs(Q)>U&&(g[ee][0]+=-ge*a)}C.uC($<<1,M,g),$+=M,b-=M,M=Math.min(b,v)}d.Pc(1993)}},h.IL=function(a,u,d,g){var v=0,b=a.eh();isNaN(v)&&(v=0);var C=a.Wc(),M=a.bf();a=360*M,M*=179;for(var $=g.length,L=0;L<d;){for(var q=L;q<d&&u[q].isNaN();++q)L++;var U=Math.min($,d-L);if(0<U){q=1;for(var ee=L+1;q<U;++q,++ee)if(u[ee].isNaN()){U=q;break}if(m.ta.Jy(g,u,L,U),m.ej.projToGeogCenter(b,U,g,v),C)for(q=0,ee=L;q<U;++q,++ee){var Q=u[ee].x,ge=g[q][0]-v,ve=m.lc.sign(ge);0>ve*m.lc.sign(Q)&&Math.abs(ge)>M&&(g[q][0]-=ve*a)}m.ta.Iy(u,L,g,U),L+=U}}},h.Lx=function(a,u,d){var g=d.length,v=u.I();if(!(1>v)){var b=u.ub(0),C=Math.min(v,g),M=0,$=a.eh(),L=a.Wc(),q=L?a.Oe().R():0,U=179*q/360,ee=0;for(L&&(ee=a.zi());0<v;){if(b.uB(M<<1,C,d),m.ej.geogToProj($,C,d),L)for(a=0;a<C;a++){var Q=d[a][0],ge=m.lc.sign(Q),ve=b.read(2*(M+a))-ee;0>ge*m.lc.sign(ve)&&Math.abs(Q)>U&&(d[a][0]+=-ge*q)}b.uC(M<<1,C,d),M+=C,v-=C,C=Math.min(v,g)}u.Pc(1993)}},h.HL=function(a,u,d,g){if(d!=0){var v=a.eh(),b=a.Wc(),C=b?a.Oe().R():0,M=179*C/360,$=0;for(b&&($=a.zi()),a=0;a<d;){for(var L=a;L<d&&u[L].isNaN();++L)a++;var q=Math.min(g.length,d-a);if(0<q){L=1;for(var U=a+1;L<q;++L,++U)if(u[U].isNaN()){q=L;break}if(m.ta.Jy(g,u,a,q),m.ej.geogToProj(v,q,g),b)for(L=0,U=a;L<q;L++){var ee=g[L][0],Q=m.lc.sign(ee);0>Q*m.lc.sign(u[U].x-$)&&Math.abs(ee)>M&&(g[L][0]-=Q*C)}m.ta.Iy(u,a,g,q),a+=q}}}},h.tr=function(a,u,d,g){var v=u.I();if(v!=0){var b=u.ub(0),C=a.ef,M=a.Yf,$=C.sc().Qp(),L=M.sc().Qp(),q=C.bf(),U=M.bf();if((a=a.Wf)==null||a.count()==0){for(d=$/L,g=(C.Up()-M.Up())*U,L=-90*q,a=90*q,$=!1,U=1,C=2*v;U<C;)q=b.get(U),(M=m.O.Rk(q,L,a))!=q&&(b.set(U,M),$=!0),U+=2;if(g!=0||d!=1)for($=!0,L=new m.h,U=0;U<v;U++)b.tc(2*U,L),L.x*=d,L.x+=g,L.y*=d,b.Tt(2*U,L);$&&u.Pc(1993)}else{C=g.length,M=Math.min(v,C);var ee=m.O.lg(M),Q=null,ge=0,ve=NaN,fe=NaN,Ce=360*U,Ie=U/q;d&&(fe=90*U,ve=89.9*q,Q=m.O.lg(M));for(var Ne=!0,Ve=0;v!=0;){for(q=!1,b.uB(ge<<1,M,g),U=0;U<M;U++)ee[U]=g[U][0];if(d)for(U=0;U<M;U++){var Xe=Math.abs(g[U][1])-ve;0<Xe&&(q=g[U][1],g[U][1]=m.lc.Cn(ve,q),Q[U]=m.lc.Cn(Xe,q),q=!0)}for(U=g[0][0],a.transform(g,M,$,L),Ne&&(Ve=g[0][0]-Ie*U,Ne=!1),U=0;U<M;U++)Xe=g[U][0]-ee[U]*Ie-Ve,200<Math.abs(Xe)&&(g[U][0]=0<Xe?g[U][0]-Ce:g[U][0]+Ce);if(q){for(U=0;U<M;U++)Q[U]!=0&&(g[U][1]+=Ie*Q[U],g[U][1]>fe?g[U][1]=fe:g[U][1]<-fe&&(g[U][1]=-fe));for(q=0;q<M;q++)Q[q]=0}b.uC(ge<<1,M,g),ge+=M,v-=M,M=Math.min(v,C)}u.Pc(1993)}}},h.GL=function(a,u,d,g){if(a.mw)g=90*a.ef.bf(),m.ta.dK(u,d,-g,g);else{var v=a.Wf,b=a.ef,C=a.Yf;a=b.Xr();var M=C.Xr(),$=b.bf(),L=90*$,q=C.bf();if(v==null||v.count()==0){if(g=a/M,v=(b.Up()-C.Up())*q,m.ta.dK(u,d,-L,L),v!=0||g!=1)for(q=0;q<d;q++)u[q].x*=g,u[q].x+=v,u[q].y*=g}else{b=Math.min(d,g.length),L=m.O.lg(b),C=360*q,$=q/$;for(var U=!0,ee=0,Q=0;d!=0;){for(q=0;q<b;q++)L[q]=u[q+Q].x;for(q=u[0].x,m.ta.Jy(g,u,Q,b),v.transform(g,b,a,M),m.ta.Iy(u,Q,g,b),U&&(ee=u[0].x-$*q,U=!1),q=0;q<b;q++){var ge=u[Q+q].x-L[q]*$-ee;200<Math.abs(ge)&&(u[Q+q].x=0<ge?u[Q+q].x-C:u[Q+q].x+C)}Q+=b,d-=b,b=Math.min(d,g.length)}}}},h.dv=function(a,u){return a=a.gh(),isNaN(u)||a.Ju(u,0),a},h.UQ=function(a,u,d,g,v,b,C,M){for(var $=h.dv(g,v),L=$.R(),q=L/360,U=h.pE*q,ee=a.ub(0),Q=u.Wc(),ge=Q?L/u.Oe().R():0,ve=!1,fe=new m.Da(d.description),Ce=0,Ie=d.da();Ce<Ie;++Ce){var Ne=Q,Ve=new m.Ta(d.description);if(Ve.addPath(d,Ce,!0),C!=0){var Xe=h.PD(!0,Ve,$.H-M,$.H,C);(ve=ve||Xe)&&(Ne=!1)}var et=-1;Ne&&(et=a.Ba(Ce));var dt=Ve.ub(0),ct=Ve.I(),mt=0,lt=dt.read(0),gi=0;Xe=3*g.Xd(0);var oi=!1,Ni=new m.h;Ni.Rc();var Qi=new m.h;Qi.Rc();for(var xn=!1,ln=1;ln<ct;++ln){var Oi=m.h.construct(dt.eg(2*ln),dt.eg(2*ln+1)),ui=Oi.x,Kt=ui+mt,Wn=Kt-lt;if(Oi.x=Kt,Math.abs(Wn)>U){if(Ne){var In=et+(ln+1<ct?ln:0),tr=ee.read(2*(et+ln-1));In=(ee.read(2*In)-tr)*ge,Math.abs(Wn-In)>1*q&&(Ne=!1)}Ne||(Kt=ui+(mt-=m.lc.Cn(L,Kt-lt)),++gi,xn=mt!=0,Oi.x=Kt)}else oi||m.ta.AG(Qi,Ni,Oi,Xe)&&(oi=!0);xn&&dt.write(2*ln,Kt),lt=Kt,Qi.L(Ni),Ni.L(Oi)}0<gi&&Ve.Pc(1993),Ne=Ve.Na(0),ct=Ve.Na(ct-1),Ve=m.h.tb(Ne,ct)<Xe?h.uQ(Ve,g,v,b,oi):h.vQ(a,Ce,Ve,g,v),fe.add(Ve,!1)}return v=g.Xd(0),d=$.R()/180,h.Jt(fe,$,.1*v,!1),fe=fe!=(v=m.ri.clip(fe,$,v,d,b)),a=a.Ke(),C=0,0<(M=v.Ke())&&0>a?C=1:0>=M&&0<a&&(M==0?(M=NaN,u.Sb()==2?M=u.ml().Ke():u.Sb()==1&&(M=u.Oe().wF()),a>.99*M&&(C=-1)):C=-1),C!=0&&((u=new m.Da(v.description)).tp($),(u=m.Xl.local().V(u,d,b)).add(v,!1),fe=!0,v=u),fe&&(v=m.Yl.local().V(v,g,!1,b)),v},h.vQ=function(a,u,d,g,v){var b=d.I(),C=d.Na(0),M=d.Na(b-1);v=(g=h.dv(g,v)).R(),C=m.lc.sign(M.x-C.x);var $=new m.l;d.xc($);var L=g.gk();if(M=L-v,L+=v,0<=C){var q=Math.ceil((M-$.v)/v);for(q*=v;M>$.v+q;)q+=v;for(;M<$.C+q;)q-=v;var U=q;720<$.R()&&(L=M+360*Math.ceil($.R()/360))}else{for(q=Math.ceil((L-$.C)/v),q*=v;L<$.C+q;)q-=v;for(;L>$.v+q;)q+=v;U=q,720<$.R()&&(M=L-360*Math.ceil($.R()/360))}q=C*v;var ee=m.l.construct($.v,$.G,$.C,$.H);ee.move(U,0);var Q=new m.Dd;Q.gg(U,0),d.Oc(Q),($=new m.Ta(d.description)).add(d,!1),U=d.Na(b-1),v=0;for(var ge=$.Na(0).x,ve=0;0<C?ee.C<L:ee.v>M;)1024<=ve&&(ve=0),ee.move(q,0),Q.Gb=q,d.Oc(Q),ge+=q,g.v<=ge&&g.C>=ge&&(v=$.I()-1),d.Cb(0,U),U=d.Na(b-1),$.Dr(d,0,0,b-1,!1);return d=new m.Da($.description),b=0<a.Ir(u),d.add($,!1),a=$.Na(0),M=$.Na($.I()-1),u=d.da()-1,(0>C?b:!b)?(C=m.h.construct(M.x,g.H),d.Ci(C),C=m.h.construct(g.gk(),g.H),d.Ci(C),g=m.h.construct(a.x,g.H)):(C=m.h.construct(M.x,g.G),d.Ci(C),C=m.h.construct(g.gk(),g.G),d.Ci(C),g=m.h.construct(a.x,g.G)),d.Ci(g),d.xG(0,u,0),d.kO(v),d},h.uQ=function(a,u,d,g,v){var b=new m.Da(a.description);b.add(a,!1),b.DB(0,b.I()-1);var C=new m.l;b.xc(C);var M=(d=h.dv(u,d)).R(),$=Math.ceil((d.v-C.v)/M);for($*=M;d.v>C.v+$;)$+=M;for(;d.v<C.C+$;)$-=M;if(($+=M)!=0){C.move($,0);var L=new m.Dd;L.gg($,0),b.Oc(L)}if(d.v<=C.v&&d.C>C.C)return v&&(v=b.Ke(),u=(b=m.Yl.local().V(b,u,!0,g)).Ke(),(u=m.lc.sign(v)!=m.lc.sign(u))&&b.oJ()),b;for((a=new m.Da(a.description)).add(b,!1),v=v||C.R()>M-u.Xd(0);C.v<d.C;)C.move(M,0),(L=new m.Dd).gg(M,0),b.Oc(L),a.add(b,!1);return v&&(v=a.Ke(),a.Yo(1),u=(a=m.Yl.local().V(a,u,!0,g)).Ke(),(u=m.lc.sign(v)!=m.lc.sign(u))&&a.oJ()),a},h.PD=function(a,u,d,g,v){for(var b=u.ub(0),C=u.I(),M=!1,$=0;$<C;$++){var L=m.h.construct(b.eg(2*$),b.eg(2*$+1));if(1&v&&L.y>=d){M=!0;break}if(2&v&&L.y<=-d){M=!0;break}}if(!M)return!1;b=!1,a&&(b=u.Nn(0)),C=(a=new m.gd).Ib(u),M=a.Ob(C);var q=-1,U=!0,ee=new m.h;ee.Rc(),$=new m.Sa;for(var Q=-1,ge=a.Xa(M);ge!=-1;ge=a.U(ge)){L=a.Na(ge);var ve=1&v&&90<=L.y?1:0;if(ve|=2&v&&L.y<=-d?2:0,0<q&&q!=ve){if(ee.x!=L.x){ee.x=L.x,a.Vi(a.Ma(ge),$);var fe=a.wj(M,ge,$);a.mf(fe,ee)}if(b)for(Q=Q!=-1?a.U(Q):a.Xa(M),fe=a.Ma(ge);Q!=fe;)Q=a.pd(Q,!1);Q=-1}0<ve&&(L.y=m.lc.Cn(g,L.y),a.mf(ge,L),U||q==ve||(L.x!=ee.x?(a.Vi(ge,$),fe=a.wj(M,ge,$),a.Cb(fe,ee.x,L.y),Q=fe):Q=ge)),q=ve,ee=L,U=!1}if(b){if(Q!=-1)for(Q=a.U(Q);Q!=-1;)Q=a.pd(Q,!1);d=a.Xa(M),a.fq(d,a.rj(M))||(a.Vi(d,$),a.wj(M,-1,$))}return a.Ne(C).copyTo(u),!0},h.Mz=function(a,u,d,g){var v=a;if(v.B()||d==j.DontClip)return v;var b=v.getType();if(b==33)return v=[(g=v).D()],h.yG(v,1,u,d),v[0].isNaN()?g.Oa():g.Cb(v[0]),a;var C=(a=u.sc()).bf(),M=90*C,$=180*C,L=360*C,q=u.zi(),U=.5*C,ee=new m.l;v.A(ee);var Q=u.Vr(),ge=u.PQ(),ve=Q.getType()==197;if(u=new m.l,Q.A(u),d==j.PannableFold&&(d=a.Oe().R(),u.v=q-.5*d,u.C=u.v+d),ee.G<-M||ee.H>M){if(new m.l().K(ee.v-C,-M,ee.C+C,M),(v=m.ri.Nu(v,u,a,NaN,0,g)).B())return v;v.A(ee)}if(ge&&(u.H<ee.G||u.G>ee.H))return v.Ia();if(ee.R()>L&&(v=h.Hp(v,q-$,L,a,!0,0,!0,g)).A(ee),(M=h.eO(ee.v,ee.C,u.v,u.C,L))!=0&&ee.move(M,0),ee.C>u.C||ee.v<u.v){if(ee.C>u.C)for(;ee.v>=u.C;)ee.move(-L,0),M-=L;for(;ee.v<u.C-L;)ee.move(L,0),M+=L}if(d=m.ta.Hu(a,Q),M!=0&&((C=new m.Dd).gg(M,0),v.Oc(C)),ge){if(ve&&u.contains(ee))return v;for(ge=[null,null],M=0;2>M;M++){if(ve?C=m.aa.Hc(b)?m.ri.clip(v,u,d,U,g):m.ri.clip(v,u,d,0,g):(C=m.Xj.local().V(v,Q,a,g))==Q&&(C=m.aa.jg(C)),u.v<=ee.v&&u.C>=ee.C||u.v>=ee.v&&u.C<=ee.C)return C;ge[M]=C,M==0&&(ee.move(-L,0),(C=new m.Dd).gg(-L,0),v.Oc(C))}if(b==550)ge[0].Fd(ge[1],0,-1);else if(m.aa.Hc(b))ge[0].add(ge[1],!1);else{if(b!=33)throw m.i.fa("intersect_with_GCS_horizon: unexpected geometry type");ge[0].B()&&(ge[0]=ge[1])}return ge[0]}if(u.H<ee.G||u.G>ee.H)return v;for(b=0;!v.B()&&ee.C>u.v;)b!=0&&((C=new m.Dd).gg(b,0),v.Oc(C)),m.dj.local().V(4,v,Q,a,g)||Q==(v=m.kp.local().V(v,Q,a,g))&&(v=m.aa.jg(v)),b!=0&&((U=new m.Dd).gg(-b,0),v.Oc(U)),b-=L,ee.move(-L,0);return v},h.yG=function(a,u,d,g){if(u!=0&&g!=j.DontClip)if(g==j.PannableFold){g=d.HR();for(var v=u,b=0;b<u;b++)(a[b].y>g.H||a[b].y<g.G)&&(a[b].Rc(),v--);v!=0&&h.av(a,u,g.v,g.R())}else{var C=90*(g=d.bf()),M=180*g;for(g*=360,v=u,b=0;b<u;b++)(a[b].y>C||a[b].y<-C)&&(a[b].Rc(),v--);if(v!=0){(v=new m.l).Zw(a,u),C=d.Vr();var $=d.hv();b=C.getType()==197;var L=new m.l;if(C.A(L),!$||!(L.H<v.G||L.G>v.H))if($)if(h.av(a,u,L.gk()-M,g),v=u,b)for(b=0;b<u;b++)L.contains(a[b])||(a[b].Rc(),v--);else for(d=m.ta.Hu(d.sc(),C),b=0;b<u;b++)(M=m.hd.Yd(C,a[b],d)!=0)||(a[b].Rc(),v--);else for(h.av(a,u,-M,g),v=u,d=m.ta.Hu(d.sc(),C),b=0;b<u;b++)(M=a[b]).isNaN()&&v--,$=h.tE(M.x,L.v,L.C,g),M.x+=$,(M=m.hd.Yd(C,M,d)!=0)&&(a[b].Rc(),v--)}}},h.Hp=function(a,u,d,g,v,b,C,M){var $=a.getType(),L=u+d;if($===33){var q=(g=v?a:a.Of()).Lg();return(q<u||q>=L||C&&q==L)&&(q+=Math.ceil((u-q)/d)*d,q=m.O.Rk(q,u,L),g.cC(q)),g}if(a.B()||(q=new m.l,a.A(q),q.B()))return a;var U=new m.Nc;q.cn(U);var ee=new m.Nc;if(ee.K(u,L),ee.contains(U))return a;if((L=new m.l).K(q),$===550){for(M=(g=v?a:a.Of()).ub(0),$=2*g.I(),L=!1,u=0;u<$;u+=2)((q=M.read(u))<ee.oa||q>=ee.va||C&&q==ee.va)&&(L=!0,q+=Math.ceil((ee.oa-q)/d)*d,q=ee.It(q),M.write(u,q));return L&&g.Pc(1993),g}if($==197)return d=v?a:a.Of(),q.Ea(L),d.Xo(q),d;var Q=.1*Math.max(q.ca(),q.R());for(L.W(0,Q),C=a,ee=g.Xd(0),a=m.Gh.local(),v=new m.Dd;;){var ge=Math.floor((U.oa-u)/d),ve=Math.ceil((U.va-u)/d);if(!(3<ve-ge))break;ge=Math.floor(.5*(ve+ge)),L.v=q.v-Q,L.C=u+d*ge;var fe=m.ri.clip(C,L,ee,b,M);L.v=L.C,L.C=q.C+Q;var Ce=m.ri.clip(C,L,ee,b,M);v.gg((ge-ve)*d,0),Ce.Oc(v),$==1736?C=a.V(fe,Ce,g,null):(C=fe).add(Ce,!1),C.A(q),q.cn(U)}for(L.v=u,L.C=u+d,(u=new m.l).K(L),u.W(ee,0),(u=Math.floor((q.v-L.v)/d)*d)!=0?(L.move(u,0),v.gg(-u,0)):v.RB(),u=$==1607?new m.Ta(C.description):new m.Da(C.description),b=new m.l,U=new m.l;q.C>L.v;)(Q=m.ri.clip(C,L,ee,0,M)).A(U),($==1607?!Q.B()&&(U.R()>ee||U.ca()>ee):!Q.B()&&($!=1736||U.R()>ee))&&(Q.Oc(v),Q.A(U),u.A(b),b.W(ee,ee),b.isIntersecting(U)&&$==1736?u=a.V(u,Q,g,null):u.add(Q,!1)),L.move(d,0),v.shift(-d,0);return u},h.av=function(a,u,d,g){for(var v=d+g,b=0;b<u;b++){var C=a[b].x;d<=C&&C<v||!(C<d||C>v||C==v)||(C+=Math.ceil((d-C)/g)*g,C=m.O.Rk(C,d,v),a[b].x=C)}},h.Fn=function(a,u,d,g,v,b){if(!u.Wc())throw m.i.fa("fold_into_360_degree_range");if(a.B())return a;if(u.Sb()==2){d=u.pv();var C=u.ov()-d}else{var M=u.bf();C=360*M,d-=180*M}return h.Hp(a,d,C,u,g,v,!0,b)},h.qF=function(a,u,d,g){if(d.Sb()==2)g=d.pv(),d=d.ov()-g;else{var v=d.bf();d=360*v,g-=180*v}h.av(a,u,g,d)},h.lj=function(a,u){var d=u.Oe();if(a.getType()==33){var g=a.ih();return d.G<=g&&g<=d.H?a:a.Ia()}g=new m.l,a.A(g);var v=new m.l;return v.K(d),v.v=g.v,v.C=g.C,v.W(.01*v.ca(),0),d=m.ta.uy(u,g),v.contains(g)?a:m.ri.clip(a,v,d,0,null)},h.ir=function(a,u,d){return a>u.C&&a-u.C<d?u.C:a<u.v&&u.v-a<d?u.v:a},h.FX=function(a,u,d,g){g.x=h.ir(a.x,u,d),g.y=a.y},h.EX=function(a,u,d,g){for(var v=0;v<u;v++)a[v].y<d.G||a[v].y>d.H?a[v].Rc():a[v].x=h.ir(a[v].x,d,g)},h.Jt=function(a,u,d,g){if(!a.B()){var v=a.getType();if(!g||v!=1736)if(m.aa.xj(v)){g=a.ub(0),v=0;for(var b=a.I();v<b;v++){var C=g.read(2*v),M=h.ir(C,u,d);M!=C&&g.write(2*v,M)}a.Pc(1993)}else if(v==197)g=new m.l,a.A(g),g.v=h.ir(g.v,u,d),g.C=h.ir(g.C,u,d),a.Xo(g);else{if(v!=33)throw m.i.fa("internal error");a.cC(h.ir(a.Lg(),u,d))}}},h.uS=function(a,u,d,g){var v=new m.gd,b=v.Ib(a);return a=m.ta.Hu(u,a),h.ks(v,b,u,a,d,!0,g),v.Ne(b)},h.ks=function(a,u,d,g,v,b,C){if(!d.Wc())throw m.i.N("invalid call");var M=d.Oe(),$=d.sc(),L=$.eh().getDatum().getSpheroid();$=$.Hd().ai;var q=L.getFlattening();L=L.getAxis(),q*=2-q;var U=new m.Nc;M.cn(U);var ee=null,Q=[[0,0],[0,0]];if(d.Sb()==2?(ee=d.eh(),b?(Q[0][0]=h.Zm(C,U),Q[0][1]=M.Jp(),m.ej.projToGeog(ee,1,Q),M=Q[0][0]*$):(Q[0][0]=M.gk(),Q[0][1]=C,m.ej.projToGeog(ee,1,Q),M=Q[0][1]*$)):M=C*$,!b&&M!=0&&v!=p.GreatElliptic)throw m.i.fa("invalid argument");var ge=new m.ga,ve=[0],fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=[null,null],Ve=new m.h,Xe=new m.h,et=new m.h,dt=new m.h;for(u=a.Ob(u);u!=-1;u=a.Rb(u)){var ct=a.Xa(u);a.D(ct,Ve);for(var mt=!1,lt=ct=a.U(ct);lt!=-1;lt=a.U(lt)){if(lt==ct){if(mt)break;mt=!0}if(a.D(lt,Xe),b&&(g<C-Ve.x&&Xe.x-C>g||g<C-Xe.x&&Ve.x-C>g)||!b&&(C!=0||g<-Ve.y&&Xe.y>g||g<-Xe.y&&Ve.y>g))do if(!(Math.abs(Ve.x-Xe.x)>=.5*U.R())){if(d.Sb()==2?(Q[0][0]=h.Zm(Ve.x,U),Q[0][1]=Ve.y,Q[1][0]=h.Zm(Xe.x,U),Q[1][1]=Xe.y,m.ej.projToGeogCenter(ee,2,Q,0),et.x=Q[0][0]*$,et.y=Q[0][1]*$,dt.y=Q[1][1]*$):(et.x=Ve.x*$,et.y=Ve.y*$,dt.y=Xe.y*$),dt.x=2*(Xe.x-Ve.x)*Math.PI/U.R()+et.x,b){if(Ce.x=M,Ce.y=h.Nz(L,q,et,dt,M,v),isNaN(Ce.y))break;Ne[0]=Ce;var gi=1}else if(v==p.GreatElliptic){var oi=[0,0];if((gi=m.Ox.Oz(q,et,dt,M,oi))==0)break;Ce.x=oi[0],Ce.y=M,Ne[0]=Ce,gi==2&&(Ie.x=oi[1],Ie.y=M,Ne[1]=Ie)}else{if(Ce.x=h.Lz(L,q,et,dt,v),isNaN(Ce.x))break;Ce.y=0,Ne[0]=Ce,gi=1}var Ni=-1;for(oi=0;oi<gi;oi++){m.kb.wd(L,q,et.x,et.y,dt.x,dt.y,ge,null,null,v);var Qi=ge.u;m.kb.wd(L,q,et.x,et.y,Ne[oi].x,Ne[oi].y,ge,null,null,v);var xn=ge.u;if(d.Sb()==2?(Q[0][0]=Ne[oi].x/$,Q[0][1]=Ne[oi].y/$,m.ej.geogToProj(ee,1,Q),b?(fe.y=Q[0][1],fe.x=C):(fe.x=h.os(Q[0][0],Ve.x,Xe.x,U),fe.y=C)):b?(fe.x=C,fe.y=Ne[oi].y/$):(fe.x=h.os(Ne[oi].x/$,Ve.x,Xe.x,U),fe.y=C),ve[0]=0<Qi?m.O.Rk(xn/Qi,0,1):.5,ve[0]==0||ve[0]==1)break;Ni>ve[0]||(Ni=a.Ma(lt),a.Ul(Ni,ve,1),a.Cb(a.U(Ni),fe.x,fe.y),Ni=ve[0])}}while(!1);Ve.L(Xe)}}},h.Zm=function(a,u){var d=u.va-u.oa;return u.It(a-Math.floor((a-u.oa)/d)*d)},h.os=function(a,u,d,g){var v=new m.Nc;for(v.K(u,d),d=g.R(),a=Math.floor((a-u)/d)*d+a,v=v.sf();Math.abs(a-v)>Math.abs(a+d-v);)a+=d;return a},h.Sn=function(a,u,d){return a=m.qr.Cp(a),u=m.qr.mx(a,m.qr.Cp(u)),(d=m.qr.mx(a,m.qr.Cp(d)))==0||0<u&&0<d&&d<=u||0>u&&0>d&&d>=u},h.Nz=function(a,u,d,g,v,b){if(b==p.GreatElliptic)return m.Ox.SS(u,d,g,v);if(Math.abs(d.x-g.x)>=Math.PI||!h.Sn(d.x,g.x,v))return NaN;if(d.x>g.x)var C=g;else C=d,d=g;g=new m.ga;var M=new m.ga,$=new m.ga;m.kb.wd(a,u,C.x,C.y,d.x,d.y,M,g,null,b);var L=M.u,q=0,U=1,ee=new m.h;for(ee.L(C);L*(U-q)>1e-12*a;){var Q=.5*(q+U);if(m.kb.oj(a,u,C.x,C.y,L*Q,g.u,M,$,b),ee.x=M.u,ee.y=$.u,ee.x==v)break;if(h.Sn(C.x,ee.x,v))U=Q;else{if(!h.Sn(d.x,ee.x,v))return NaN;q=Q}}return ee.y},h.Lz=function(a,u,d,g,v){if(v==p.GreatElliptic)return a=[0,0],m.Ox.Oz(u,d,g,0,a),a[0];if(d.y>g.y)var b=g;else b=d,d=g;if((g=new m.Nc).K(b.y,d.y),!g.contains(0)||Math.abs(b.x-d.x)>=Math.PI)return NaN;if(b.x==d.x)return b.x;var C=new m.ga,M=new m.ga,$=new m.ga;m.kb.wd(a,u,b.x,b.y,d.x,d.y,M,C,null,v);var L=M.u,q=0,U=1,ee=new m.h;for(ee.L(b);L*(U-q)>1e-12*a;){var Q=.5*(q+U);if(m.kb.oj(a,u,b.x,b.y,L*Q,C.u,M,$,v),ee.x=M.u,ee.y=$.u,g.K(b.y,ee.y),ee.y==0)break;if(g.contains(0))U=Q;else{if(g.K(d.y,ee.y),!g.contains(0))return NaN;q=Q}}return ee.x},h.WI=function(a,u,d,g){if(!a.ef.Wc())return!1;var v=new m.de(u.description);if(v.Fd(u,0,-1),g=m.Hx.local().V(v,a,g),v=u.I(),d.Oa(),v!=g.I())return!1;var b=new m.l;u.A(b);var C=new m.l;if(g.A(C),b=b.R(),C=C.R(),b!=0&&C!=0){if(C/=b,a=a.Yf.gh().R()/a.ef.gh().R(),1e-10<Math.abs(C/a-1))return!1}else if(b!=0||C!=0)return!1;for(d.add(u,!1),u=new m.h,a=0;a<v;a++)g.D(a,u),d.Cb(a,u);return!0},h.qN=function(a,u){return(a%=360*u)>=180*u&&(a-=360*u),a},h.UI=function(a,u,d,g){if(d==j.Clip){var v=u.ml();v.getType()==197?(d=new m.l,v.A(d),v=m.ta.uy(u,d),a=m.ri.clip(a,d,v,5e4*u.pm(),g)):m.dj.local().V(1,v,a,u,g)||(a=m.Xj.local().V(a,v,u,g))==v&&(a=m.Vk.jg(a))}else u.Wc()&&(g=new m.l,a.xc(g),u.Oe().contains(g)||(h.Jt(a,u.Oe(),u.Xd(0),!0),d==j.PannableFold&&(a=h.lj(a,u)),a=h.Fn(a,u,0,!0,1e5*u.pm(),null)));return a},h.XD=function(a,u,d){var g=u.Wr();if(g==null)return a;var v=(u=u.sc()).Oe().R(),b=new m.l;a.xc(b);var C=new m.Nc;b.cn(C),b=g.Ga(),g=null;for(var M=new m.Dd;b.$a();)for(;b.Ha();){var $=b.ha(),L=$.Tg(0,0),q=new m.Nc;for(q.K(L.oa,L.va),L=0;q.va>C.oa;)q.move(-v),--L;for(;q.oa<=C.va;){if(q.isIntersecting(C)){g==null&&(g=new m.Ta);var U=m.yb.cP($.ac(),$.wc());L!=0&&(M.gg(L*v,0),U.Oc(M)),g.oc(U,!0)}q.move(v),++L}}return g!=null?(u=m.ta.gO(u,g),u=m.ta.Er(u),m.$t.lP(a,g,u,d)):a},h.eO=function(a,u,d,g,v){return a>=d&&u<=g?0:h.tE(.5*(u+a),d,g,v)},h.tE=function(a,u,d,g){return m.lc.round((.5*(d+u)-a)/g)*g},h.VQ=function(a,u,d,g,v,b,C,M){var $=h.dv(g,v),L=$.R(),q=L/360,U=h.pE*q,ee=a.ub(0),Q=u.Wc(),ge=Q?L/u.Oe().R():0;u=a.Ia();for(var ve=0,fe=d.da();ve<fe;++ve){var Ce=Q,Ie=new m.Ta(d.description);Ie.addPath(d,ve,!0);var Ne=d.dc(ve);C!=0&&(Ne=h.PD(Ne,Ie,$.H-M,$.H,C))&&(Ce=!1);var Ve=-1;Ne=Ie.I();var Xe=!1;Ce&&(Ve=a.Ba(ve),Xe=a.dc(ve));var et=Ie.ub(0),dt=0,ct=et.read(0),mt=0,lt=3*g.Xd(0),gi=!1,oi=new m.h;oi.Rc();var Ni=new m.h;Ni.Rc();for(var Qi=!1,xn=1;xn<Ne;++xn){var ln=m.h.construct(et.eg(2*xn),et.eg(2*xn+1)),Oi=ln.x,ui=Oi+dt,Kt=ui-ct;if(ln.x=ui,Math.abs(Kt)>U){if(Ce){var Wn=Ve+xn-1,In=Ve;(!Xe||xn+1<Ne)&&(In+=xn),Wn=ee.read(2*Wn),In=(ee.read(2*In)-Wn)*ge,Math.abs(Kt-In)>1*q&&(Q=!1)}Ce||(ui=Oi+(dt-=m.lc.Cn(L,ui-ct)),++mt,Qi=dt!=0,ln.x=ui)}else gi||m.ta.AG(oi,Ni,ln,lt)&&(gi=!0);Qi&&et.write(2*xn,ui),ct=ui,oi.L(Ni),Ni.L(ln)}mt!=0&&Ie.Pc(1993),Ce=Ie.Na(0),Ne=Ie.Na(Ne-1),m.h.tb(Ce,Ne),Ie=h.wQ(Ie,g,isNaN(v)?0:v,b),u.add(Ie,!1)}return a=g.Xd(0),d=$.R()/180,h.Jt(u,$,.1*a,!1),m.ri.clip(u,$,a,d,b)},h.wQ=function(a,u,d,g){return h.Fn(a,u,d,!0,0,g)},h.OS=function(a,u,d,g){var v=a.getType();if(v==1736)for(u=u!=null?u.Xd(0):0,v=0;v<g;v++)m.hd.Yd(a,d[v],u)!=1&&d[v].Rc();else{if(v!=197)throw m.i.N();for(v=0;v<g;v++)a.dP(d[v])||d[v].Rc()}},h.$k=function(a,u,d,g){if(32>d)for(var v=new m.Sa,b=0;b<d;b++)v.Cb(u[b]),a.$k(v,g).D(u[b]);else{var C=new m.de;for(C.re(3),C.HD(u,d),v=C.ub(3),b=0;b<d;b++)v.write(b,b);for(b=a.$k(C,g),a=b.ub(0),v=b.ub(3),g=m.h.construct(NaN,NaN),C=0;C<d;C++)u[C]=g;for(d=b.I(),b=0;b<d;b++)g=v.read(b),a.tc(2*b,u[g])}},h.Zk=function(a,u,d,g){if(32>d)for(var v=new m.Sa,b=0;b<d;b++)v.Cb(u[b]),a.Zk(v,g).D(u[b]);else{var C=new m.de;for(C.re(3),C.HD(u,d),v=C.ub(3),b=0;b<d;b++)v.write(b,b);for(b=a.Zk(C,g),a=b.ub(0),v=b.ub(3),g=m.h.construct(NaN,NaN),C=0;C<d;C++)u[C]=g;for(d=b.I(),b=0;b<d;b++)g=v.read(b),a.tc(2*b,u[g])}},h.pE=210,h}()}(ye||(ye={})),function(m){var j;(j=m.UL||(m.UL={}))[j.rightSide=1]="rightSide";var T=function(){function p(h,a,u){this.Bs=new m.h,h===void 0?this.Io=-1:(this.Bs.L(h),this.Io=a,this.Ka=u,this.nw=0)}return p.prototype.WJ=function(h){this.nw=h?1|this.nw:-2&this.nw},p.prototype.B=function(){return 0>this.Io},p.prototype.fz=function(){if(this.B())throw m.i.fa("invalid call");return new m.Sa(this.Bs.x,this.Bs.y)},p.prototype.Ua=function(){if(this.B())throw m.i.fa("invalid call");return this.Io},p.prototype.hz=function(){if(this.B())throw m.i.fa("invalid call");return this.Ka},p.prototype.Sz=function(){return!!(1&this.nw)},p.prototype.ey=function(h,a,u,d){this.Bs.x=h,this.Bs.y=a,this.Io=u,this.Ka=d},p}();m.$l=T}(ye||(ye={})),function(m){var j=function(){function p(){}return p.prototype.Uo=function(h,a){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,h.xc(this.Ek),this.Ek.W(a,a),this.Ek.isIntersecting(this.Fb.Ca)){var u=h.getType();(this.vs=m.aa.yd(u))?(this.TH=h.ac(),this.SH=h.wc(),this.qa=a):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},p.prototype.Xi=function(h,a){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(h),this.Ek.W(a,a),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},p.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var h=null,a=null,u=null,d=null;this.vs&&(h=new m.h,a=new m.h,u=new m.l);for(var g=!1;!g;){for(;this.tk!=-1;){var v=this.Fb.bz(this.Fb.fv(this.tk));if(v.isIntersecting(this.Ek)){if(!this.vs){g=!0;break}if(h.L(this.TH),a.L(this.SH),u.K(v),u.W(this.qa,this.qa),0<u.zy(h,a)){g=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){v=this.th.Fc();var b=this.Ii[this.Ii.length-1];for(d==null&&((d=[])[0]=new m.l,d[1]=new m.l,d[2]=new m.l,d[3]=new m.l),T.EJ(b,d),this.th.If(),--this.Ii.length,b=0;4>b;b++){var C=this.Fb.Lp(v,b);if(C!=-1&&0<this.Fb.WR(C)&&d[b].isIntersecting(this.Ek))if(this.vs){if(h.L(this.TH),a.L(this.SH),u.K(d[b]),u.W(this.qa,this.qa),0<u.zy(h,a)){var M=new m.l;M.K(d[b]),this.th.add(C),this.Ii.push(M)}}else(M=new m.l).K(d[b]),this.th.add(C),this.Ii.push(M)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},p.bP=function(h,a,u){var d=new p;return d.Fb=h,d.Ek=new m.l,d.th=new m.ia(0),d.Ii=[],d.Uo(a,u),d},p.aP=function(h,a,u){var d=new p;return d.Fb=h,d.Ek=new m.l,d.th=new m.ia(0),d.Ii=[],d.Xi(a,u),d},p.$O=function(h){var a=new p;return a.Fb=h,a.Ek=new m.l,a.th=new m.ia(0),a.Ii=[],a},p}();m.GY=j;var T=function(){function p(h,a){this.jf=new m.$c(11),this.Zh=new m.$c(5),this.ws=[],this.gw=new m.ia(0),this.Ca=new m.l,this.Nk(h,a)}return p.prototype.reset=function(h,a){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(h,a)},p.prototype.vj=function(h,a){return this.zv(h,a,0,this.Ca,this.kf,!1,-1)},p.prototype.Jz=function(h,a,u){u=u==-1?this.kf:this.WF(u);var d=this.ca(u),g=this.oR(u);return this.zv(h,a,d,g,u,!1,-1)},p.prototype.ja=function(h){return this.jR(h)},p.prototype.GF=function(h){return this.bz(this.fv(h))},p.prototype.ca=function(h){return this.jv(h)},p.prototype.oR=function(h){var a=new m.l;a.K(this.Ca);var u=this.jv(h);h=this.QF(h);for(var d=0;d<2*u;d+=2){var g=m.O.truncate(3&h>>d);g==0?(a.v=.5*(a.v+a.C),a.G=.5*(a.G+a.H)):g==1?(a.C=.5*(a.v+a.C),a.G=.5*(a.G+a.H)):(g==2?a.C=.5*(a.v+a.C):a.v=.5*(a.v+a.C),a.H=.5*(a.G+a.H))}return a},p.prototype.WR=function(h){return this.Az(h)},p.prototype.vR=function(h,a){return j.bP(this,h,a)},p.prototype.MF=function(h,a){return j.aP(this,h,a)},p.prototype.getIterator=function(){return j.$O(this)},p.prototype.Nk=function(h,a){if(0>a||32<2*a)throw m.i.N("invalid height");this.BT=a,this.Ca.K(h),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},p.prototype.zv=function(h,a,u,d,g,v,b){if(!d.contains(a))return u==0?-1:this.zv(h,a,0,this.Ca,this.kf,v,b);if(!v)for(var C=g;C!=-1;C=this.IR(C))this.jx(C,this.Az(C)+1);(C=new m.l).K(d),d=g;var M=[];for(M[0]=new m.l,M[1]=new m.l,M[2]=new m.l,M[3]=new m.l;u<this.BT&&this.iO(d);u++){p.EJ(C,M);for(var $=!1,L=0;4>L;L++)if(M[L].contains(a)){$=!0;var q=this.Lp(d,L);q==-1&&(q=this.rP(d,L)),this.jx(q,this.Az(q)+1),d=q,C.K(M[L]);break}if(!$)break}return this.sS(h,a,u,C,d,v,g,b)},p.prototype.sS=function(h,a,u,d,g,v,b,C){var M=this.NF(g);if(v){if(g==b)return C;this.SP(C),v=C}else v=this.tP(),this.NB(v,h),this.KW(this.fv(v),a);return this.mX(v,g),M!=-1?(this.hx(v,M),this.bx(M,v)):this.GJ(g,v),this.SB(g,v),this.ax(g,this.lv(g)+1),this.hO(g)&&this.MQ(u,d,g),v},p.prototype.SP=function(h){var a=this.WF(h),u=this.NF(a),d=this.OR(h),g=this.nv(h);this.Ur(a)==h?(g!=-1?this.hx(g,-1):this.SB(a,-1),this.GJ(a,g)):u==h?(this.bx(d,-1),this.SB(a,d)):(this.hx(g,d),this.bx(d,g)),this.hx(h,-1),this.bx(h,-1),this.ax(a,this.lv(a)-1)},p.EJ=function(h,a){var u=.5*(h.v+h.C),d=.5*(h.G+h.H);a[0].K(u,d,h.C,h.H),a[1].K(h.v,d,u,h.H),a[2].K(h.v,h.G,u,d),a[3].K(u,h.G,h.C,d)},p.prototype.hO=function(h){return this.lv(h)==8&&!this.gG(h)},p.prototype.MQ=function(h,a,u){var d=this.Ur(u);do{var g=this.fv(d),v=this.Zh.T(d,0);g=this.bz(g),this.zv(v,g,h,a,u,!0,d),d=v=this.nv(d)}while(d!=-1)},p.prototype.iO=function(h){return 8<=this.lv(h)||this.gG(h)},p.prototype.gG=function(h){return this.Lp(h,0)!=-1||this.Lp(h,1)!=-1||this.Lp(h,2)!=-1||this.Lp(h,3)!=-1},p.prototype.rP=function(h,a){var u=this.jf.Ce();return this.OW(h,a,u),this.jx(u,0),this.ax(u,0),this.Pk(u,h),this.KJ(u,this.jv(h)+1),this.NJ(u,a<<2*this.jv(h)|this.QF(h)),u},p.prototype.tP=function(){var h=this.Zh.Ce();if(0<this.gw.size){var a=this.gw.Fc();this.gw.If()}else a=this.ws.length,this.ws.push(new m.l);return this.LW(h,a),h},p.prototype.Lp=function(h,a){return this.jf.T(h,a)},p.prototype.OW=function(h,a,u){this.jf.S(h,a,u)},p.prototype.Ur=function(h){return this.jf.T(h,4)},p.prototype.GJ=function(h,a){this.jf.S(h,4,a)},p.prototype.NF=function(h){return this.jf.T(h,5)},p.prototype.SB=function(h,a){this.jf.S(h,5,a)},p.prototype.QF=function(h){return this.jf.T(h,6)},p.prototype.NJ=function(h,a){this.jf.S(h,6,a)},p.prototype.lv=function(h){return this.jf.T(h,7)},p.prototype.Az=function(h){return this.jf.T(h,8)},p.prototype.ax=function(h,a){this.jf.S(h,7,a)},p.prototype.jx=function(h,a){this.jf.S(h,8,a)},p.prototype.IR=function(h){return this.jf.T(h,9)},p.prototype.Pk=function(h,a){this.jf.S(h,9,a)},p.prototype.jv=function(h){return this.jf.T(h,10)},p.prototype.KJ=function(h,a){this.jf.S(h,10,a)},p.prototype.jR=function(h){return this.Zh.T(h,0)},p.prototype.NB=function(h,a){this.Zh.S(h,0,a)},p.prototype.OR=function(h){return this.Zh.T(h,1)},p.prototype.nv=function(h){return this.Zh.T(h,2)},p.prototype.hx=function(h,a){this.Zh.S(h,1,a)},p.prototype.bx=function(h,a){this.Zh.S(h,2,a)},p.prototype.WF=function(h){return this.Zh.T(h,3)},p.prototype.mX=function(h,a){this.Zh.S(h,3,a)},p.prototype.fv=function(h){return this.Zh.T(h,4)},p.prototype.LW=function(h,a){this.Zh.S(h,4,a)},p.prototype.bz=function(h){return this.ws[h]},p.prototype.KW=function(h,a){this.ws[h].K(a)},p}();m.du=T}(ye||(ye={})),function(m){var j;(j=m.aL||(m.aL={}))[j.Outside=0]="Outside",j[j.Inside=1]="Inside",j[j.Border=2]="Border";var T=function(){function h(a,u){this.PT=u,this.Vh=a}return h.prototype.setColor=function(a,u){this.iH!=u&&a.flush(),this.iH=u},h.prototype.gF=function(a,u){for(var d=0;d<u;)for(var g=a[d++],v=a[d++],b=a[d++]*this.PT;g<v;g++)this.Vh[b+(g>>4)]|=this.iH<<2*(15&g)},h}();m.HY=T;var p=function(){function h(a,u,d){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(a,u,d)}return h.create=function(a,u,d){if(!h.zE(a))throw m.i.N();return h.wP(a,u,d)},h.pW=function(a){switch(a){case 0:a=1024;break;case 1:a=16384;break;case 2:a=262144;break;default:throw m.i.fa("Internal Error")}return a},h.zE=function(a){return!(a.B()||a.getType()!=1607&&a.getType()!=1736)},h.prototype.rQ=function(a,u){u=u.Ga();for(var d=new m.h,g=new m.h;u.$a();)for(;u.Ha();){var v=u.ha();if(v.getType()!=322)throw m.i.fa("Internal Error");a.Eh(v.ac(),d),a.Eh(v.wc(),g),this.Ri.jy(d.x,d.y,g.x,g.y)}this.Ri.iJ(m.Px.Cx)},h.prototype.sQ=function(){throw m.i.fa("Internal Error")},h.prototype.Ry=function(a,u){for(var d=1;4>d;d++)a.jy(u[d-1].x,u[d-1].y,u[d].x,u[d].y);a.jy(u[3].x,u[3].y,u[0].x,u[0].y),this.Ri.iJ(m.Px.Cx)},h.prototype.rK=function(a,u,d){for(var g=[null,null,null,null],v=0;v<g.length;v++)g[v]=new m.h;u=u.Ga(),d=this.Jk.dY(d)+1.5,v=new m.h;for(var b=new m.h,C=new m.h,M=new m.h,$=new m.h,L=new m.l,q=new m.h;u.$a();){var U=!1,ee=!0;for(q.ma(0,0);u.Ha();){var Q=u.ha();if(M.x=Q.sa,M.y=Q.na,$.x=Q.pa,$.y=Q.la,L.Oa(),L.Zb(M.x,M.y),L.Lk($.x,$.y),this.vl.HG(L)){this.Jk.Eh($,$),ee?(this.Jk.Eh(M,M),q.L(M),ee=!1):M.L(q),v.uc($,M);var ge=.5>(Q=v.length());Q==0?v.ma(1,0):(ge||q.L($),v.scale(d/Q),b.ma(-v.y,v.x),C.ma(v.y,-v.x),M.sub(v),$.add(v),g[0].add(M,b),g[1].add(M,C),g[2].add($,C),g[3].add($,b),ge?U=!0:this.Ry(a,g))}else U&&(this.Ry(a,g),U=!1),ee=!0}U&&this.Ry(a,g)}},h.prototype.sC=function(a){return m.O.truncate(a*this.qH+this.aI)},h.prototype.tC=function(a){return m.O.truncate(a*this.Es+this.cI)},h.wP=function(a,u,d){return new h(a,u,d)},h.prototype.Fz=function(a,u,d){this.Gf=Math.max(m.O.truncate(2*Math.sqrt(d)+.5),64),this.Um=m.O.truncate((2*this.Gf+31)/32),this.vl=new m.l,this.Ik=u,d=0;for(var g=this.Gf,v=this.Um;8<=g;)d+=g*v,g=m.O.truncate(g/2),v=m.O.truncate((2*g+31)/32);this.Vh=m.O.lg(d,0),this.Ri=new m.Px,d=new T(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,d),a.A(this.vl),this.vl.W(u,u),g=new m.l;var b=u*(v=m.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(u*=v.ca(),g.K(this.vl.sf(),Math.max(b,this.vl.R()),Math.max(u,this.vl.ca())),this.SA=this.Ik,this.Jk=new m.Dd,this.Jk.pS(g,v),new m.Dd,a.getType()){case 550:d.setColor(this.Ri,2),this.sQ();break;case 1607:d.setColor(this.Ri,2),this.rK(this.Ri,a,this.SA);break;case 1736:d.setColor(this.Ri,1),this.rQ(this.Jk,a),d.setColor(this.Ri,2),this.rK(this.Ri,a,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},h.prototype.XN=function(){this.Ri.flush();for(var a=0,u=this.Gf*this.Um,d=this.Gf,g=m.O.truncate(this.Gf/2),v=this.Um,b=m.O.truncate((2*g+31)/32);8<d;){for(d=0;d<g;d++)for(var C=2*d,M=2*d+1,$=0;$<g;$++){var L=2*$,q=2*$+1,U=L>>4;L=2*(15&L);var ee=q>>4;q=2*(15&q);var Q=this.Vh[a+v*C+U]>>L&3;Q|=this.Vh[a+v*C+ee]>>q&3,Q|=this.Vh[a+v*M+U]>>L&3,Q|=this.Vh[a+v*M+ee]>>q&3,this.Vh[u+b*d+($>>4)]|=Q<<2*(15&$)}d=g,v=b,a=u,g=m.O.truncate(d/2),b=m.O.truncate((2*g+31)/32),u=a+v*d}},h.prototype.So=function(a,u){return this.vl.contains(a,u)?(a=this.sC(a),u=this.tC(u),0>a||a>=this.Gf||0>u||u>=this.Gf||(u=this.Vh[this.Um*u+(a>>4)]>>2*(15&a)&3)==0?0:u==1?1:2):0},h.prototype.Ro=function(a){if(!a.Ea(this.vl))return 0;var u=this.sC(a.v),d=this.sC(a.C),g=this.tC(a.G);if(a=this.tC(a.H),0>u&&(u=0),0>g&&(g=0),d>=this.Gf&&(d=this.Gf-1),a>=this.Gf&&(a=this.Gf-1),u>d||g>a)return 0;for(var v=Math.max(d-u,1)*Math.max(a-g,1),b=0,C=this.Um,M=this.Gf,$=0;;){if(32>v||16>M){for(v=g;v<=a;v++)for(var L=u;L<=d;L++)if(1<($=this.Vh[b+C*v+(L>>4)]>>2*(15&L)&3))return 2;if($==0)return 0;if($==1)return 1}b+=C*M,M=m.O.truncate(M/2),C=m.O.truncate((2*M+31)/32),u=m.O.truncate(u/2),g=m.O.truncate(g/2),d=m.O.truncate(d/2),a=m.O.truncate(a/2),v=Math.max(d-u,1)*Math.max(a-g,1)}},h.prototype.RR=function(){return this.Gf*this.Um},h}();m.Nx=p}(ye||(ye={})),function(m){var j;(j=m.VL||(m.VL={}))[j.contains=1]="contains",j[j.within=2]="within",j[j.equals=3]="equals",j[j.disjoint=4]="disjoint",j[j.touches=8]="touches",j[j.crosses=16]="crosses",j[j.overlaps=32]="overlaps",j[j.unknown=0]="unknown",j[j.intersects=1073741824]="intersects";var T=function(){function h(){}return h.construct=function(a,u,d,g,v,b,C,M){var $=new h;return $.pw=a,$.Mm=u,$.Kj=d,$.Si=g,$.BH=v,$.SY=b,$.TY=C,$.UY=M,$},h}();m.Vt=function(){function h(){}return h.CD=function(a,u,d){if(h.wy(a)){var g=m.ta.kj(u,a,!1);u=!1,m.Uk.CE(a)&&(u=u||a.lu(g,d)),(g=a.getType())!=1736&&g!=1607||!m.Uk.AE(a)||d==0||(u=u||a.fj(d)),g!=1736&&g!=1607||!m.Uk.BE(a)||d==0||u||a.hM()}},h.wy=function(a){return m.Uk.CE(a)||m.Uk.AE(a)||m.Uk.BE(a)},h}();var p=function(){function h(){this.rh=[]}return h.zB=function(a,u,d,g,v){var b=a.getType(),C=u.getType();if(b==197){if(C==197)return h.tW(a,u,d,g);if(C==33)return g==2?g=1:g==1&&(g=2),h.hJ(u,a,d,g)}else if(b==33){if(C==197)return h.hJ(a,u,d,g);if(C==33)return h.vW(a,u,d,g)}if(a.B()||u.B())return g==4;var M=new m.l;a.A(M);var $=new m.l;u.A($);var L=new m.l;if(L.K(M),L.Zb($),d=m.ta.Wd(d,L,!1),h.dk(M,$,d))return g==4;switch(M=!1,m.Vk.yd(b)&&((b=new m.Ta(a.description)).oc(a,!0),a=b,b=1607),m.Vk.yd(C)&&((C=new m.Ta(u.description)).oc(u,!0),u=C,C=1607),b!=197&&C!=197?(a.Db()<u.Db()||b==33&&C==550)&&(g==2?g=1:g==1&&(g=2)):b!=1736&&C!=197&&(g==2?g=1:g==1&&(g=2)),b){case 1736:switch(C){case 1736:M=h.rt(a,u,d,g,v);break;case 1607:M=h.$m(a,u,d,g,v);break;case 33:M=h.qt(a,u,d,g);break;case 550:M=h.pt(a,u,d,g,v);break;case 197:M=h.GI(a,u,d,g,v)}break;case 1607:switch(C){case 1736:M=h.$m(u,a,d,g,v);break;case 1607:M=h.gB(a,u,d,g,v);break;case 33:M=h.tt(a,u,d,g,v);break;case 550:M=h.st(a,u,d,g,v);break;case 197:M=h.MI(a,u,d,g)}break;case 33:switch(C){case 1736:M=h.qt(u,a,d,g);break;case 1607:M=h.tt(u,a,d,g,v);break;case 550:M=h.lt(u,a,d,g)}break;case 550:switch(C){case 1736:M=h.pt(u,a,d,g,v);break;case 1607:M=h.st(u,a,d,g,v);break;case 550:M=h.ZA(a,u,d,g,v);break;case 33:M=h.lt(a,u,d,g);break;case 197:M=h.hI(a,u,d,g)}break;case 197:switch(C){case 1736:M=h.GI(u,a,d,g,v);break;case 1607:M=h.MI(u,a,d,g);break;case 550:M=h.hI(u,a,d,g)}}return M},h.tW=function(a,u,d,g){if(a.B()||u.B())return g==4;var v=new m.l,b=new m.l,C=new m.l;switch(a.A(v),u.A(b),C.K(v),C.Zb(b),a=m.ta.Wd(d,C,!1),g){case 4:return h.dk(v,b,a);case 2:return h.jF(b,v,a);case 1:return h.jF(v,b,a);case 3:return h.ek(v,b,a);case 8:return h.cQ(v,b,a);case 32:return h.bQ(v,b,a);case 16:return h.aQ(v,b,a)}return!1},h.hJ=function(a,u,d,g){if(a.B()||u.B())return g==4;a=a.D();var v=new m.l,b=new m.l;switch(u.A(v),b.K(a),b.Zb(v),u=m.ta.Wd(d,b,!1),g){case 4:return h.Rw(a,v,u);case 2:return h.eB(a,v,u);case 1:return h.RU(a,v,u);case 3:return h.vI(a,v,u);case 8:return h.dB(a,v,u)}return!1},h.vW=function(a,u,d,g){if(a.B()||u.B())return g==4;a=a.D(),u=u.D();var v=new m.l;switch(v.K(a),v.Zb(u),d=m.ta.Wd(d,v,!1),g){case 4:return h.SU(a,u,d);case 2:return h.uI(u,a,d);case 1:return h.uI(a,u,d);case 3:return h.wI(a,u,d)}return!1},h.rt=function(a,u,d,g,v){switch(g){case 4:return h.kV(a,u,d);case 2:return h.Sw(u,a,d,v);case 1:return h.Sw(a,u,d,v);case 3:return h.nV(a,u,d);case 8:return h.vV(a,u,d);case 32:return h.qV(a,u,d,v)}return!1},h.$m=function(a,u,d,g,v){switch(g){case 4:return h.lV(a,u,d);case 1:return h.fB(a,u,d,v);case 8:return h.wV(a,u,d,v);case 16:return h.gV(a,u,d)}return!1},h.qt=function(a,u,d,g){switch(g){case 4:return h.jV(a,u,d);case 1:return h.dV(a,u,d);case 8:return h.uV(a,u,d)}return!1},h.pt=function(a,u,d,g){switch(g){case 4:return h.iV(a,u,d);case 1:return h.cV(a,u,d);case 8:return h.tV(a,u,d);case 16:return h.fV(a,u,d)}return!1},h.GI=function(a,u,d,g,v){if(h.hV(a,u,d))return g==4;if(g==4)return!1;switch(g){case 2:return h.xV(a,u,d);case 1:return h.bV(a,u,d);case 3:return h.mV(a,u,d);case 8:return h.sV(a,u,d,v);case 32:return h.pV(a,u,d,v);case 16:return h.eV(a,u,d,v)}return!1},h.gB=function(a,u,d,g){switch(g){case 4:return h.GV(a,u,d);case 2:return h.KI(u,a,d);case 1:return h.KI(a,u,d);case 3:return h.IV(a,u,d);case 8:return h.NI(a,u,d);case 32:return h.MV(a,u,d);case 16:return h.LI(a,u,d)}return!1},h.tt=function(a,u,d,g){switch(g){case 4:return h.FV(a,u,d);case 1:return h.AV(a,u,d);case 8:return h.QV(a,u,d)}return!1},h.st=function(a,u,d,g){switch(g){case 4:return h.EV(a,u,d);case 1:return h.zV(a,u,d);case 8:return h.PV(a,u,d);case 16:return h.CV(a,u,d)}return!1},h.MI=function(a,u,d,g){if(h.DV(a,u,d))return g==4;if(g==4)return!1;switch(g){case 2:return h.RV(a,u,d);case 1:return h.yV(a,u,d);case 3:return h.HV(a,u,d);case 8:return h.OV(a,u,d);case 32:return h.LV(a,u,d);case 16:return h.BV(a,u,d)}return!1},h.ZA=function(a,u,d,g){switch(g){case 4:return h.gU(a,u,d);case 2:return h.eI(u,a,d);case 1:return h.eI(a,u,d);case 3:return h.iU(a,u,d);case 32:return h.oU(a,u,d)}return!1},h.lt=function(a,u,d,g){switch(g){case 4:return h.fI(a,u,d);case 2:return h.sU(a,u,d);case 1:return h.dU(a,u,d);case 3:return h.Nw(a,u,d)}return!1},h.hI=function(a,u,d,g){switch(g){case 4:return h.fU(a,u,d);case 2:return h.rU(a,u,d);case 1:return h.cU(a,u,d);case 3:return h.hU(a,u,d);case 8:return h.qU(a,u,d);case 16:return h.eU(a,u,d)}return!1},h.nV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.ek(g,v,d)&&(g=h.qc(a,u,!1))!=4&&g!=1&&g!=2&&(!!h.dI(a,u,d)||(g=a.Qb(),v=u.Qb(),!(Math.abs(g-v)>4*Math.max(a.I(),u.I())*d)&&h.Wz(a,u,d,!0)))},h.kV=function(a,u,d){var g=h.qc(a,u,!0);return g==4||g!=1&&g!=2&&g!=1073741824&&h.EI(a,u,d)},h.vV=function(a,u,d){var g=h.qc(a,u,!1);return g!=4&&g!=1&&g!=2&&h.II(a,u,d,null)},h.qV=function(a,u,d,g){var v=h.qc(a,u,!1);return v!=4&&v!=1&&v!=2&&h.FI(a,u,d,g)},h.Sw=function(a,u,d,g){var v=new m.l,b=new m.l;return a.A(v),u.A(b),!!h.zc(v,b,d)&&(v=h.qc(a,u,!1))!=4&&v!=2&&(v==1||h.BI(a,u,d,g))},h.lV=function(a,u,d){var g=h.qc(a,u,!0);return g==4||g!=1&&g!=1073741824&&h.EI(a,u,d)},h.wV=function(a,u,d,g){var v=h.qc(a,u,!1);return v!=4&&v!=1&&h.JI(a,u,d,g)},h.gV=function(a,u,d){var g=h.qc(a,u,!1);return g!=4&&g!=1&&h.DI(a,u,d,null)},h.fB=function(a,u,d,g){var v=new m.l,b=new m.l;return a.A(v),u.A(b),!!h.zc(v,b,d)&&(v=h.qc(a,u,!1))!=4&&(v==1||h.CI(a,u,d,g))},h.jV=function(a,u,d){return m.hd.KG(a,u,d)==0},h.uV=function(a,u,d){return u=u.D(),h.HI(a,u,d)},h.dV=function(a,u,d){return u=u.D(),h.AI(a,u,d)},h.iV=function(a,u,d){var g=h.qc(a,u,!1);if(g==4)return!0;if(g==1)return!1;g=new m.l,a.A(g),g.W(d,d);for(var v=new m.h,b=0;b<u.I();b++)if(u.D(b,v),g.contains(v)){var C=m.hd.Yd(a,v,d);if(C==1||C==2)return!1}return!0},h.tV=function(a,u,d){var g=this.qc(a,u,!1);if(g==4||g==1)return!1;g=new m.l,a.A(g),g.W(d,d);for(var v=!1,b=a,C=!1,M=0;M<u.I();M++){var $=u.Na(M);if(g.contains($)){if(($=m.hd.Yd(b,$,d))==2)v=!0;else if($==1)return!1}C||(!m.Dg.Ml(a,u.I()-1)||a.Bb!=null&&a.Bb.Fb!=null?b=a:(b=new m.Da,a.copyTo(b),b.fj(1)),C=!0)}return!!v},h.fV=function(a,u,d){var g=this.qc(a,u,!1);if(g==4||g==1)return!1;var v=new m.l;g=new m.l;var b=new m.l;a.A(v),u.A(b),g.K(v),g.W(d,d),b=v=!1;for(var C=a,M=!1,$=0;$<u.I();$++){var L=u.Na($);if(g.contains(L)?(L=m.hd.Yd(C,L,d))==0?b=!0:L==1&&(v=!0):b=!0,v&&b)return!0;M||(!m.Dg.Ml(a,u.I()-1)||a.Bb!=null&&a.Bb.Fb!=null?C=a:(C=new m.Da,a.copyTo(C),C.fj(1)),M=!0)}return!1},h.cV=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),!this.zc(g,v,d)||(v=this.qc(a,u,!1))==4)return!1;if(v==1)return!0;v=!1;for(var b=a,C=!1,M=0;M<u.I();M++){var $=u.Na(M);if(!g.contains($))return!1;if(($=m.hd.Yd(b,$,d))==1)v=!0;else if($==0)return!1;C||(!m.Dg.Ml(a,u.I()-1)||a.Bb!=null&&a.Bb.Fb!=null?b=a:(b=new m.Da,a.copyTo(b),b.fj(1)),C=!0)}return v},h.mV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.ek(g,v,d)&&((g=new m.Da).ad(u,!1),h.Wz(a,g,d,!0))},h.hV=function(a,u,d){var g=h.qc(a,u,!1);if(g==4)return!0;if(g==1||g==2)return!1;var v=new m.l;if(g=new m.l,a.A(v),u.A(g),h.zc(g,v,d)||(v=new m.h,g.dn(v),(u=m.hd.Yd(a,v,d))!=0)||(g.$I(v),(u=m.hd.Yd(a,v,d))!=0)||(g.en(v),(u=m.hd.Yd(a,v,d))!=0)||(g.cJ(v),(u=m.hd.Yd(a,v,d))!=0))return!1;u=a.ub(0),(v=new m.l).K(g),v.W(d,d);for(var b=0,C=a.I();b<C;b++){var M=u.read(2*b),$=u.read(2*b+1);if(v.contains(M,$))return!1}return!h.TG(a,g,d)},h.sV=function(a,u,d,g){var v=h.qc(a,u,!1);if(v==4||v==1||v==2)return!1;v=new m.l;var b=new m.l;return a.A(v),u.A(b),!h.zc(b,v,d)&&(b.R()<=d&&b.ca()<=d?(u=u.Ip(),h.HI(a,u,d)):b.R()<=d||b.ca()<=d?(v=new m.Ta,b=new m.Sa,u.Hf(0,b),v.nf(b),u.Hf(2,b),v.lineTo(b),h.JI(a,v,d,g)):((v=new m.Da).ad(u,!1),h.II(a,v,d,g)))},h.pV=function(a,u,d,g){var v=h.qc(a,u,!1);if(v==4||v==1||v==2)return!1;v=new m.l;var b=new m.l;return a.A(v),u.A(b),!(h.zc(b,v,d)||b.R()<=d||b.ca()<=d)&&((v=new m.Da).ad(u,!1),h.FI(a,v,d,g))},h.xV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),h.zc(v,g,d)},h.bV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.zc(g,v,d)&&(g=h.qc(a,u,!1))!=4&&g!=2&&(g==1||(v.R()<=d&&v.ca()<=d?(u=u.Ip(),h.AI(a,u,d)):v.R()<=d||v.ca()<=d?(v=new m.Ta,g=new m.Sa,u.Hf(0,g),v.nf(g),u.Hf(2,g),v.lineTo(g),h.CI(a,v,d,null)):((v=new m.Da).ad(u,!1),h.BI(a,v,d,null))))},h.eV=function(a,u,d,g){var v=new m.l,b=new m.l;return a.A(v),u.A(b),!(h.zc(b,v,d)||b.ca()>d&&b.R()>d||b.ca()<=d&&b.R()<=d)&&(v=new m.Ta,b=new m.Sa,u.Hf(0,b),v.nf(b),u.Hf(2,b),v.lineTo(b),h.DI(a,v,d,g))},h.IV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(!h.ek(g,v,d)||h.qc(a,u,!1)==4)&&(!!h.dI(a,u,d)||h.Wz(a,u,d,!1))},h.GV=function(a,u,d){return this.qc(a,u,!1)==4||!!new m.Zl(a,u,d,!0).next()&&!this.UG(a,u,d)},h.NI=function(a,u,d){if(h.qc(a,u,!1)==4)return!1;var g=new m.be(0);if(h.Xz(a,u,d,g)!=0)return!1;for(var v=new m.de,b=0;b<g.size;b+=2){var C=g.read(b),M=g.read(b+1);v.Bu(C,M)}return a=a.mg(),u=u.mg(),a.Fd(u,0,u.I()),h.Mw(a,v,d)},h.LI=function(a,u,d){if(h.qc(a,u,!1)==4)return!1;var g=new m.be(0);if(h.Xz(a,u,d,g)!=0)return!1;for(var v=new m.de,b=0;b<g.size;b+=2){var C=g.read(b),M=g.read(b+1);v.Bu(C,M)}return a=a.mg(),u=u.mg(),a.Fd(u,0,u.I()),!h.Mw(a,v,d)},h.MV=function(a,u,d){return h.qc(a,u,!1)!=4&&h.WG(a,u,d)},h.KI=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(!h.zc(g,v,d)||h.qc(a,u,!1)==4)&&h.ym(u,a,d,!1)},h.FV=function(a,u,d){return h.qc(a,u,!1)==4||(u=u.D(),!h.Yz(a,u,d))},h.QV=function(a,u,d){return h.qc(a,u,!1)!=4&&(u=u.D(),h.Zz(a,u,d))},h.AV=function(a,u,d){return h.qc(a,u,!1)!=4&&(u=u.D(),h.SG(a,u,d))},h.EV=function(a,u,d){return h.qc(a,u,!1)==4||!h.VG(a,u,d,!1)},h.PV=function(a,u,d){if(this.qc(a,u,!1)==4)return!1;var g=a.Ga(),v=new m.l,b=new m.l,C=new m.l;a.A(v),u.A(b),v.W(d,d),b.W(d,d),C.K(v),C.Ea(b),v=null;var M=a.Bb;if(M!=null){var $=M.Fb;v=M.zo,$==null&&($=M=m.ta.jj(a,C))}else $=M=m.ta.jj(a,C);var L=$.getIterator(),q=null;v!=null&&(q=v.getIterator());var U=new m.h,ee=new m.h,Q=!1,ge=d*d;for(v=new m.pn(u.I()),M=0;M<u.I();M++)v.write(M,0);for(M=0;M<u.I();M++)if(u.D(M,U),C.contains(U)){if(b.K(U.x,U.y,U.x,U.y),q!=null&&(q.Xi(b,d),q.next()==-1))continue;L.Xi(b,d);for(var ve=L.next();ve!=-1;ve=L.next())if(g.Vb($.ja(ve)),(ve=g.ha()).hc(ve.fe(U,!1),ee),m.h.yc(U,ee)<=ge){v.write(M,1),Q=!0;break}}if(!Q)return!1;for(a=a.mg(),g=new m.de,b=new m.h,M=0;M<u.I();M++)v.read(M)!=0&&(u.D(M,b),g.Bu(b.x,b.y));return this.Mw(a,g,d)},h.CV=function(a,u,d){if(this.qc(a,u,!1)==4)return!1;var g=a.Ga(),v=new m.l,b=new m.l,C=new m.l;a.A(v),u.A(b),v.W(d,d),b.W(d,d),C.K(v),C.Ea(b),v=null;var M=a.Bb;if(M!=null){var $=M.Fb;v=M.zo,$==null&&($=M=m.ta.jj(a,C))}else $=M=m.ta.jj(a,C);var L=$.getIterator(),q=null;v!=null&&(q=v.getIterator());var U=new m.h,ee=new m.h,Q=!1,ge=!1,ve=d*d;for(v=new m.pn(u.I()),M=0;M<u.I();M++)v.write(M,0);for(M=0;M<u.I();M++)if(u.D(M,U),C.contains(U)){if(b.K(U.x,U.y,U.x,U.y),q!=null&&(q.Xi(b,d),q.next()==-1)){ge=!0;continue}L.Xi(b,d);for(var fe=!1,Ce=L.next();Ce!=-1;Ce=L.next())if(g.Vb($.ja(Ce)),(Ce=g.ha()).hc(Ce.fe(U,!1),ee),m.h.yc(U,ee)<=ve){v.write(M,1),fe=Q=!0;break}fe||(ge=!0)}else ge=!0;if(!Q||!ge)return!1;for(a=a.mg(),g=new m.de,b=new m.h,M=0;M<u.I();M++)v.read(M)!=0&&(u.D(M,b),g.Bu(b.x,b.y));return!this.Mw(a,g,d)},h.zV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(!h.zc(g,v,d)||h.qc(a,u,!1)==4||!h.VG(a,u,d,!0))&&(a=a.mg(),!h.gI(a,u,d))},h.HV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(v.ca()>d&&v.R()>d)&&h.ek(g,v,d)},h.DV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!h.zc(v,g,d)&&!h.TG(a,v,d)},h.OV=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),v.ca()<=d&&v.R()<=d)return v=u.Ip(),h.Zz(a,v,d);if(v.ca()<=d||v.R()<=d)return v=new m.Ta,g=new m.Sa,u.Hf(0,g),v.nf(g),u.Hf(2,g),v.lineTo(g),h.NI(a,v,d);a=a.Ga(),u=new m.l,g=new m.l,u.K(v),g.K(v),u.W(-d,-d),g.W(d,d),v=!1;for(var b=new m.l,C=new m.l;a.$a();)for(;a.Ha();){if(a.ha().A(b),C.K(u),C.Ea(b),!C.B()&&(C.ca()>d||C.R()>d))return!1;C.K(g),C.Ea(b),C.B()||(v=!0)}return v},h.LV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(h.zc(g,v,d)||h.zc(v,g,d)||h.zc(v,g,d)||v.ca()>d&&v.R()>d||v.ca()<=d&&v.R()<=d)&&(g=new m.Ta,v=new m.Sa,u.Hf(0,v),g.nf(v),u.Hf(2,v),g.lineTo(v),h.WG(a,g,d))},h.RV=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),!h.zc(v,g,d)||v.ca()<=d&&v.R()<=d)return!1;if(v.ca()<=d||v.R()<=d)return h.zc(v,g,d);a=a.Ga(),(u=new m.l).K(v),u.W(-d,-d),v=!1,g=new m.l;for(var b=new m.l;a.$a();)for(;a.Ha();)a.ha().A(g),u.hm(g)?v=!0:(b.K(u),b.Ea(g),!b.B()&&(b.ca()>d||b.R()>d)&&(v=!0));return v},h.yV=function(a,u,d){var g=new m.l,v=new m.l;return u.A(v),a.A(g),!(!h.zc(g,v,d)||v.ca()>d&&v.R()>d)&&(v.ca()<=d&&v.R()<=d?(u=u.Ip(),h.SG(a,u,d)):(g=new m.Ta,v=new m.Sa,u.Hf(0,v),g.nf(v),u.Hf(2,v),g.lineTo(v),h.ym(g,a,d,!1)))},h.BV=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),h.zc(v,g,d)||v.ca()<=d&&v.R()<=d)return!1;if(v.ca()<=d||v.R()<=d)return g=new m.Ta,v=new m.Sa,u.Hf(0,v),g.nf(v),u.Hf(2,v),g.lineTo(v),h.LI(a,g,d);a=a.Ga(),u=new m.l,(g=new m.l).K(v),u.K(v),g.W(-d,-d),u.W(d,d);for(var b=v=!1,C=new m.l,M=new m.l;a.$a();)for(;a.Ha();)if(a.ha().A(C),b||u.contains(C)||(b=!0),v||(M.K(g),M.Ea(C),!M.B()&&(M.ca()>d||M.R()>d)&&(v=!0)),v&&b)return!0;return!1},h.iU=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.ek(g,v,d)&&(!!h.jU(a,u,d)||h.YA(a,u,d,!1,!0,!1))},h.gU=function(a,u,d){return!h.gI(a,u,d)},h.oU=function(a,u,d){return h.YA(a,u,d,!1,!1,!0)},h.eI=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.zc(g,v,d)&&h.YA(u,a,d,!0,!1,!1)},h.Mw=function(a,u,d){d*=d;for(var g=new m.h,v=new m.h,b=0;b<u.I();b++){u.D(b,v);for(var C=!1,M=0;M<a.I();M++)if(a.D(M,g),m.h.yc(g,v)<=d){C=!0;break}if(!C)return!1}return!0},h.Nw=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),h.ek(g,v,d)},h.fI=function(a,u,d){return u=u.D(),h.kt(a,u,d)},h.sU=function(a,u,d){return h.Nw(a,u,d)},h.dU=function(a,u,d){return!h.fI(a,u,d)},h.hU=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(v.ca()>d||v.R()>d)&&h.ek(g,v,d)},h.fU=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),h.zc(v,g,d))return!1;for((u=new m.l).K(v),u.W(d,d),d=new m.h,v=0;v<a.I();v++)if(a.D(v,d),u.contains(d))return!1;return!0},h.qU=function(a,u,d){var g=new m.l,v=new m.l,b=new m.l;if(u.A(g),g.ca()<=d&&g.R()<=d)return!1;if(g.ca()<=d||g.R()<=d){u=new m.h;var C=!1;v.K(g),b.K(g),v.W(d,d),g.ca()>d?b.W(0,-d):b.W(-d,0);for(var M=0;M<a.I();M++)if(a.D(M,u),v.contains(u)){if(g.ca()>d){if(u.y>b.G&&u.y<b.H)return!1}else if(u.x>b.v&&u.x<b.C)return!1;C=!0}return C}for(v.K(g),b.K(g),v.W(d,d),b.W(-d,-d),u=new m.h,C=!1,M=0;M<a.I();M++)if(a.D(M,u),v.contains(u)){if(b.hm(u))return!1;C=!0}return C},h.rU=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),!h.zc(v,g,d))return!1;if(v.ca()<=d&&v.R()<=d)return h.ek(g,v,d);if(v.ca()<=d||v.R()<=d){u=!1,g=new m.l;var b=new m.l;g.K(v),b.K(v),v.ca()>d?g.W(0,-d):g.W(-d,0),b.W(d,d);for(var C=new m.h,M=0;M<a.I();M++){if(a.D(M,C),!b.contains(C))return!1;v.ca()>d?C.y>g.G&&C.y<g.H&&(u=!0):C.x>g.v&&C.x<g.C&&(u=!0)}return u}for(u=!1,g=new m.l,b=new m.l,g.K(v),b.K(v),g.W(-d,-d),b.W(d,d),C=new m.h,M=0;M<a.I();M++){if(a.D(M,C),!b.contains(C))return!1;g.hm(C)&&(u=!0)}return u},h.cU=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(!h.zc(g,v,d)||v.ca()>d||v.R()>d)&&(u=u.Ip(),!h.kt(a,u,d))},h.eU=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),h.zc(v,g,d)||v.ca()<=d&&v.R()<=d)return!1;if(v.ca()<=d||v.R()<=d){u=new m.l,g=new m.l,u.K(v),v.ca()>d?u.W(0,-d):u.W(-d,0),g.K(v),g.W(d,d);for(var b=new m.h,C=!1,M=!1,$=0;$<a.I();$++)if(a.D($,b),C||(v.ca()>d?b.y>u.G&&b.y<u.H&&(C=!0):b.x>u.v&&b.x<u.C&&(C=!0)),M||g.contains(b)||(M=!0),C&&M)return!0;return!1}for(u=new m.l,g=new m.l,u.K(v),u.W(-d,-d),g.K(v),g.W(d,d),b=new m.h,M=C=!1,$=0;$<a.I();$++)if(a.D($,b),!C&&u.hm(b)&&(C=!0),M||g.contains(b)||(M=!0),C&&M)return!0;return!1},h.wI=function(a,u,d){return m.h.yc(a,u)<=d*d},h.SU=function(a,u,d){return m.h.yc(a,u)>d*d},h.uI=function(a,u,d){return h.wI(a,u,d)},h.vI=function(a,u,d){var g=new m.l;return g.K(a),h.ek(g,u,d)},h.Rw=function(a,u,d){var g=new m.l;return g.K(u),g.W(d,d),!g.contains(a)},h.dB=function(a,u,d){if(u.ca()<=d&&u.R()<=d)return!1;var g=new m.l,v=new m.l;if(g.K(u),g.W(d,d),!g.contains(a))return!1;if(u.ca()<=d||u.R()<=d){if(v.K(u),u.ca()>d?v.W(0,-d):v.W(-d,0),u.ca()>d){if(a.y>v.G&&a.y<v.H)return!1}else if(a.x>v.v&&a.x<v.C)return!1;return!0}return v.K(u),v.W(-d,-d),!v.hm(a)},h.eB=function(a,u,d){if(u.ca()<=d&&u.R()<=d)return!0;if(u.ca()<=d||u.R()<=d){var g=new m.l;g.K(u),u.ca()>d?g.W(0,-d):g.W(-d,0);var v=!1;return u.ca()>d?a.y>g.G&&a.y<g.H&&(v=!0):a.x>g.v&&a.x<g.C&&(v=!0),v}return(g=new m.l).K(u),g.W(-d,-d),g.hm(a)},h.RU=function(a,u,d){return h.vI(a,u,d)},h.ek=function(a,u,d){return h.zc(a,u,d)&&h.zc(u,a,d)},h.dk=function(a,u,d){var g=new m.l;return g.K(u),g.W(d,d),!a.isIntersecting(g)},h.cQ=function(a,u,d){if(a.ca()<=d&&a.R()<=d){var g=a.sf();return h.dB(g,u,d)}if(u.ca()<=d&&u.R()<=d)return g=u.sf(),h.dB(g,a,d);if(a.ca()>d&&a.R()>d&&(u.ca()<=d||u.R()<=d)?g=u:(g=a,a=u),g.ca()<=d||g.R()<=d){if(a.ca()<=d||a.R()<=d){u=new m.yb;var v=new m.yb,b=[0,0],C=[0,0],M=new m.h;return g.dn(M),u.Dc(M),g.en(M),u.Qc(M),a.dn(M),v.Dc(M),a.en(M),v.Qc(M),u.Ea(v,null,b,C,d),u.Ea(v,null,null,null,d)==1&&(b[0]==0||b[1]==1||C[0]==0||C[1]==1)}return u=new m.l,v=new m.l,u.K(a),u.W(-d,-d),v.K(u),v.Ea(g),!(!v.B()&&(v.ca()>d||v.R()>d))}return a.W(d,d),(v=new m.l).K(g),v.Ea(a),!(v.B()||!v.B()&&v.ca()>d&&v.R()>d)},h.bQ=function(a,u,d){if(h.zc(a,u,d)||h.zc(u,a,d)||a.ca()<=d&&a.R()<=d||u.ca()<=d&&u.R()<=d)return!1;if(a.ca()<=d||a.R()<=d){if(u.ca()>d&&u.R()>d)return!1;var g=new m.yb,v=new m.yb,b=[0,0],C=[0,0],M=new m.h;return a.dn(M),g.Dc(M),a.en(M),g.Qc(M),u.dn(M),v.Dc(M),u.en(M),v.Qc(M),g.Ea(v,null,b,C,d),g.Ea(v,null,null,null,d)==2&&(0<b[0]||1>b[1])&&(0<C[0]||1>C[1])}return!(u.ca()<=d||u.R()<=d)&&((g=new m.l).K(a),g.Ea(u),!(g.B()||g.ca()<=d||g.R()<=d))},h.jF=function(a,u,d){if(!h.zc(a,u,d))return!1;if(a.ca()<=d&&a.R()<=d)return a=a.sf(),h.eB(a,u,d);if(u.ca()<=d&&u.R()<=d)return u=u.sf(),h.eB(u,a,d);if(a.ca()<=d||a.R()<=d)return h.zc(a,u,d);if(u.ca()<=d||u.R()<=d){var g=new m.l;return g.K(a),g.W(-d,-d),g.hm(u)?!0:((a=new m.l).K(g),a.Ea(u),!(a.B()||a.ca()<=d&&a.R()<=d))}return h.zc(a,u,d)},h.aQ=function(a,u,d){if(h.zc(a,u,d)||h.zc(u,a,d)||a.ca()<=d&&a.R()<=d||u.ca()<=d&&u.R()<=d||u.ca()>d&&u.R()>d&&a.ca()>d&&a.R()>d)return!1;if(a.ca()>d&&a.R()>d)var g=u;else g=a,a=u;if(a.ca()>d&&a.R()>d){u=new m.l;var v=new m.l;return v.K(a),v.W(-d,-d),u.K(v),u.Ea(g),!(u.B()||u.ca()<=d&&u.R()<=d)}u=new m.yb,v=new m.yb;var b=[0,0],C=[0,0],M=new m.h;return g.dn(M),u.Dc(M),g.en(M),u.Qc(M),a.dn(M),v.Dc(M),a.en(M),v.Qc(M),u.Ea(v,null,b,C,d),u.Ea(v,null,null,null,d)==1&&0<b[0]&&1>b[1]&&0<C[0]&&1>C[1]},h.EI=function(a,u,d){var g=new m.l,v=new m.l,b=new m.Zl(a,u,d,!0);if(!b.next())return!0;if(this.UG(a,u,d))return!1;var C=a,M=null;u.getType()==1736&&(M=u);var $=!1,L=!1;do{var q=b.nl(),U=b.hl();if(U=u.Na(u.Ba(U)),g.K(b.uz()),g.W(d,d),g.contains(U)&&(U=m.hd.Yd(C,U,0))!=0||u.getType()==1736&&(q=a.Na(a.Ba(q)),v.K(b.az()),v.W(d,d),v.contains(q)&&(U=m.hd.Yd(M,q,0))!=0))return!1;$||(!m.Dg.Ml(a,u.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?C=a:(C=new m.Da,a.copyTo(C),C.fj(1)),$=!0),u.getType()!=1736||L||(L=u,!m.Dg.Ml(L,a.da()-1)||u.Bb!=null&&u.Bb.Fb!=null?M=u:(M=new m.Da,L.copyTo(M),M.fj(1)),L=!0)}while(b.next());return!0},h.zc=function(a,u,d){var g=new m.l;return g.K(a),g.W(d,d),g.contains(u)},h.ls=function(a,u,d){var g=new m.l;return g.K(u),g.W(d,d),u=new m.h,a.dn(u),!g.contains(u)||(a.$I(u),!g.contains(u)||(a.cJ(u),!g.contains(u)||(a.en(u),!g.contains(u))))},h.dI=function(a,u,d){if(a.da()!=u.da()||a.I()!=u.I())return!1;var g=new m.h,v=new m.h,b=!0;d*=d;for(var C=0;C<a.da();C++){if(a.Vc(C)!=u.Vc(C)){b=!1;break}for(var M=a.Ba(C);M<u.Vc(C);M++)if(a.D(M,g),u.D(M,v),m.h.yc(g,v)>d){b=!1;break}if(!b)break}return!!b},h.jU=function(a,u,d){if(a.I()!=u.I())return!1;var g=new m.h,v=new m.h,b=!0;d*=d;for(var C=0;C<a.I();C++)if(a.D(C,g),u.D(C,v),m.h.yc(g,v)>d){b=!1;break}return!!b},h.YA=function(a,u,d,g,v,b){var C=!1;if(a.I()>u.I()){g&&(g=!1,C=!0);var M=u}else M=a,a=u;if(u=null,v||b||C){u=new m.pn(a.I());for(var $=0;$<a.I();$++)u.write($,0)}$=new m.l;var L=new m.l,q=new m.l;M.A($),a.A(L),$.W(d,d),L.W(d,d),q.K($),q.Ea(L),L=new m.h;for(var U=new m.h,ee=!0,Q=m.ta.oE(a,q),ge=Q.getIterator(),ve=d*d,fe=0;fe<M.I();fe++)if(M.D(fe,L),q.contains(L)){var Ce=!1;$.K(L.x,L.y,L.x,L.y),ge.Xi($,d);for(var Ie=ge.next();Ie!=-1&&(Ie=Q.ja(Ie),a.D(Ie,U),!(m.h.yc(L,U)<=ve&&((v||b||C)&&u.write(Ie,1),Ce=!0,g)));Ie=ge.next());if(!Ce&&(ee=!1,v||g))return!1}else{if(v||g)return!1;ee=!1}if(b&&ee)return!1;if(g)return!0;for($=0;$<a.I();$++)if(u.read($)==1){if(b)return!0}else if(v||C)return!1;return!b},h.gI=function(a,u,d){if(a.I()>u.I())var g=u;else g=a,a=u;u=new m.l;var v=new m.l,b=new m.l;g.A(u),a.A(v),u.W(d,d),v.W(d,d),b.K(u),b.Ea(v),v=new m.h;for(var C=new m.h,M=d*d,$=m.ta.oE(a,b),L=$.getIterator(),q=0;q<g.I();q++)if(g.D(q,v),b.contains(v)){u.K(v.x,v.y,v.x,v.y),L.Xi(u,d);for(var U=L.next();U!=-1;U=L.next())if(a.D($.ja(U),C),m.h.yc(v,C)<=M)return!0}return!1},h.Wz=function(a,u,d,g){return h.ym(a,u,d,g)&&h.ym(u,a,d,g)},h.ym=function(a,u,d,g){function v(mt,lt){return U.QE(mt,lt)}var b,C=!0,M=[0,0],$=[0,0],L=0,q=new m.ia(0),U=new h,ee=new m.l,Q=new m.l,ge=new m.l;a.A(ee),u.A(Q),ee.W(d,d),Q.W(d,d),ge.K(ee),ge.Ea(Q),a=a.Ga(),Q=u.Ga();var ve=null,fe=ve=null,Ce=u.Bb;for(Ce!=null?(ve=Ce.Fb,fe=Ce.zo,ve==null&&(ve=m.ta.jj(u,ge))):ve=m.ta.jj(u,ge),u=ve.getIterator(),Ce=null,fe!=null&&(Ce=fe.getIterator());a.$a();)for(;a.Ha();){var Ie=!1,Ne=a.ha();if(Ne.A(ee),!ee.isIntersecting(ge)||Ce!=null&&(Ce.Xi(ee,d),Ce.next()==-1))return!1;for(fe=Ne.Qb(),u.Uo(Ne,d),b=u.next();b!=-1;b=u.next()){Q.Vb(ve.ja(b)),b=Q.ha();var Ve=Ne.Ea(b,null,M,$,d);if(Ve==2&&(!g||$[0]<=$[1])){Ve=M[0];var Xe=M[1],et=$[0],dt=$[1];if(Ve*fe<=d&&(1-Xe)*fe<=d){Ie=!0,L=0,q.resize(0),U.rh.length=0;var ct=a.wb();for(et=!0;et;){if(a.Ha()){if(fe=(Ne=a.ha()).Qb(),(Ve=Ne.Ea(b,null,M,$,d))==2&&(!g||$[0]<=$[1])&&(Ve=M[0],Xe=M[1],Ve*fe<=d&&(1-Xe)*fe<=d)){ct=a.wb();continue}if(Q.Ha()&&(b=Q.ha(),(Ve=Ne.Ea(b,null,M,$,d))==2&&(!g||$[0]<=$[1])&&(Ve=M[0],Xe=M[1],Ve*fe<=d&&(1-Xe)*fe<=d))){ct=a.wb();continue}}et=!1}ct!=a.wb()&&(a.Vb(ct),a.ha());break}ct=a.wb(),b=T.construct(ct,a.gb,Ve,Xe,Q.wb(),Q.gb,et,dt),U.rh.push(b),q.add(q.size)}}if(!Ie){if(L==U.rh.length)return!1;for(1<q.size-L&&q.Vd(L,q.size,v),Ie=0;L<U.rh.length;L++)if(!((b=U.rh[q.get(L)]).Kj<Ie&&b.Si<Ie)){if(fe*(b.Kj-Ie)>d)return!1;if(fe*(1-(Ie=b.Si))<=d||Ie==1)break}if(fe*(1-Ie)>d)return!1;L=0,q.resize(0),U.rh.length=0}}return C},h.WG=function(a,u,d){if(1>h.Xz(a,u,d,null))return!1;var g=new m.l,v=new m.l;a.A(g),u.A(v);var b=h.ls(g,v,d);return g=h.ls(v,g,d),!(!b||!g)||(b&&!g?!h.ym(u,a,d,!1):g&&!b?!h.ym(a,u,d,!1):!h.ym(a,u,d,!1)&&!h.ym(u,a,d,!1))},h.Xz=function(a,u,d,g){function v(Ni,Qi){return ee.QE(Ni,Qi)}if(a.yz()>u.yz())var b=u,C=a;else b=a,C=u;a=b.Ga(),u=C.Ga();var M=[0,0],$=[0,0],L=-1,q=0,U=new m.ia(0),ee=new h,Q=new m.l,ge=new m.l,ve=new m.l;b.A(Q),C.A(ge),Q.W(d,d),ge.W(d,d),ve.K(Q),ve.Ea(ge),b=null,g!=null&&(b=new m.h);var fe=ge=ge=null,Ce=C.Bb;for(Ce!=null?(ge=Ce.Fb,fe=Ce.zo,ge==null&&(ge=m.ta.jj(C,ve))):ge=m.ta.jj(C,ve),C=ge.getIterator(),Ce=null,fe!=null&&(Ce=fe.getIterator());a.$a();)for(fe=0;a.Ha();){var Ie=a.ha();if(Ie.A(Q),Q.isIntersecting(ve)){if(Ce!=null&&(Ce.Xi(Q,d),Ce.next()==-1))continue;var Ne=Ie.Qb();C.Uo(Ie,d);for(var Ve=C.next();Ve!=-1;Ve=C.next()){var Xe=ge.ja(Ve);u.Vb(Xe);var et=u.ha(),dt=et.Qb(),ct=Ie.Ea(et,null,M,$,d);if(0<ct){Ve=M[0],L=$[0];var mt=ct==2?M[1]:NaN,lt=ct==2?$[1]:NaN;if(ct==2){if(Ne*(mt-Ve)>d)return 1;var gi=Ne*(mt-Ve);if(u.Ha()){if(et=u.ha(),(ct=Ie.Ea(et,null,M,null,d))==2){ct=M[0];var oi=M[1];if(gi+(ct=Ne*(oi-ct))>d)return 1}u.Vb(Xe),u.ha()}if(!u.vm()){if(u.li(),et=u.li(),(ct=Ie.Ea(et,null,M,null,d))==2&&(ct=M[0],gi+(ct=Ne*((oi=M[1])-ct))>d))return 1;u.Vb(Xe),u.ha()}if(a.Ha()){if(Xe=a.wb(),(ct=(Ie=a.ha()).Ea(et,null,M,null,d))==2&&(ct=M[0],gi+(ct=Ne*((oi=M[1])-ct))>d))return 1;a.Vb(Xe),a.ha()}if(!a.vm()){if(Xe=a.wb(),a.li(),(ct=(Ie=a.li()).Ea(et,null,M,null,d))==2&&(ct=M[0],gi+(ct=dt*((oi=M[1])-ct))>d))return 1;a.Vb(Xe),a.ha()}et=T.construct(a.wb(),a.gb,Ve,mt,u.wb(),u.gb,L,lt),ee.rh.push(et),U.add(U.size)}L=0,g!=null&&(Ie.hc(Ve,b),g.add(b.x),g.add(b.y))}}if(q<ee.rh.length){for(U.Vd(q,U.size,v),Ie=0,Ve=ee.rh[U.get(q)].Mm;q<ee.rh.length;q++)if(!((et=ee.rh[U.get(q)]).Kj<Ie&&et.Si<Ie))if(Ne*(et.Kj-Ie)>d)fe=Ne*(et.Si-et.Kj),Ie=et.Si,Ve=et.Mm;else{if(et.Mm!=Ve?(fe=Ne*(et.Si-et.Kj),Ve=et.Mm):fe+=Ne*(et.Si-et.Kj),fe>d)return 1;if((Ie=et.Si)==1)break}Ne*(1-Ie)>d&&(fe=0),q=0,U.resize(0),ee.rh.length=0}}}return L},h.UG=function(a,u,d){var g=a.Ga(),v=u.Ga();for(a=new m.Zl(a,u,d,!1);a.next();){u=a.nl();var b=a.hl();if(g.Vb(u),v.Vb(b),u=g.ha(),0<v.ha().Ea(u,null,null,null,d))return!0}return!1},h.VG=function(a,u,d,g){var v=a.Ga(),b=new m.l,C=new m.l,M=new m.l;a.A(b),u.A(C),b.W(d,d),b.contains(C),C.W(d,d),M.K(b),M.Ea(C),(b=a.Bb)!=null?(b=b.Fb)==null&&(b=m.ta.jj(a,M)):b=m.ta.jj(a,M),a=b.getIterator();for(var $=new m.h,L=new m.h,q=d*d,U=0;U<u.I();U++)if(u.D(U,$),M.contains($)){C.K($.x,$.y,$.x,$.y),a.Xi(C,d);for(var ee=!1,Q=a.next();Q!=-1;Q=a.next())if(v.Vb(b.ja(Q)),(Q=v.ha()).hc(Q.fe($,!1),L),m.h.yc(L,$)<=q){ee=!0;break}if(g){if(!ee)return!1}else if(ee)return!0}return!!g},h.Yz=function(a,u,d){var g=new m.h,v=d*d,b=a.Ga();if((a=a.Bb)!=null&&(a=a.Fb)!=null){var C=new m.l;for(C.K(u),C=(d=a.MF(C,d)).next();C!=-1;C=d.next())if(b.Vb(a.ja(C)),b.Ha()){var M=(C=b.ha()).fe(u,!1);if(C.hc(M,g),m.h.yc(u,g)<=v)return!0}return!1}for(a=new m.l;b.$a();)for(;b.Ha();)if((C=b.ha()).A(a),a.W(d,d),a.contains(u)&&(M=C.fe(u,!1),C.hc(M,g),m.h.yc(u,g)<=v))return!0;return!1},h.SG=function(a,u,d){return h.Yz(a,u,d)&&!h.Zz(a,u,d)},h.Zz=function(a,u,d){return a=a.mg(),!h.kt(a,u,d)},h.TG=function(a,u,d){if(a.tm()){var g=new m.yb(u.v,u.G,u.v,u.H),v=new m.yb(u.v,u.H,u.C,u.H),b=new m.yb(u.C,u.H,u.C,u.G);for(u=new m.yb(u.C,u.G,u.v,u.G),a=a.Ga();a.$a();)for(;a.Ha();){var C=a.ha();if(C.isIntersecting(g,d)||C.isIntersecting(v,d)||C.isIntersecting(b,d)||C.isIntersecting(u,d))return!0}}else{(g=new m.l).K(u),g.W(d,d),d=a.ub(0),v=new m.h,b=new m.h,u=new m.h,C=new m.h;for(var M=0,$=a.da();M<$;M++)for(var L=!0,q=a.Ba(M),U=a.Vc(M);q<U;q++)if(L)d.tc(2*q,b),L=!1;else{if(d.tc(2*q,v),u.L(b),C.L(v),g.zy(u,C)!=0)return!0;b.L(v)}}return!1},h.qc=function(a,u,d){var g=a.getType(),v=u.getType();if(m.aa.xj(g)){var b=a.Bb;if(b!=null&&(b=b.Fk)!=null)if(v==33){var C=u.D();if((C=b.So(C.x,C.y))==1)return 1;if(C==0)return 4}else{if(C=new m.l,u.A(C),(C=b.Ro(C))==1)return 1;if(C==0)return 4;if(d&&m.aa.xj(v)&&h.HE(u,b))return 1073741824}}if(m.aa.xj(v)&&(b=u.Bb)!=null&&(b=b.Fk)!=null)if(g==33){if(a=a.D(),(C=b.So(a.x,a.y))==1)return 2;if(C==0)return 4}else{if(u=new m.l,a.A(u),(C=b.Ro(u))==1)return 2;if(C==0)return 4;if(d&&m.aa.xj(g)&&h.HE(a,b))return 1073741824}return 0},h.HE=function(a,u){for(var d=a.I(),g=new m.h,v=0;v<d;v++)if(a.D(v,g),u.So(g.x,g.y)==1)return!0;return!1},h.II=function(a,u,d,g){for(var v=1<=a.om(0)&&1<=u.om(0),b=a.Ga(),C=u.Ga(),M=[0,0],$=[0,0],L=new m.Zl(a,u,d,!1),q=!1;L.next();){var U=L.nl(),ee=L.hl();if(b.Vb(U),C.Vb(ee),U=b.ha(),(ee=C.ha().Ea(U,null,$,M,d))==2){if(q=M[0],ee=M[1],U=U.Qb(),v&&(ee-q)*U>d)return!1;q=!0}else if(ee!=0){if(q=M[0],U=$[0],0<q&&1>q&&0<U&&1>U)return!1;q=!0}}return!!q&&(b=new m.l,C=new m.l,v=new m.l,a.A(b),u.A(C),b.W(1e3*d,1e3*d),C.W(1e3*d,1e3*d),v.K(b),v.Ea(C),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B())||10<u.I()&&(u=m.Ud.clip(u,v,d,0),u.B()))&&m.am.rt(a,u,d,"F********",g))},h.FI=function(a,u,d,g){var v=1<=a.om(0)&&1<=u.om(0),b=new m.l,C=new m.l,M=new m.l;a.A(b),u.A(C);for(var $=!1,L=h.ls(b,C,d),q=h.ls(C,b,d),U=a.Ga(),ee=u.Ga(),Q=[0,0],ge=[0,0],ve=new m.Zl(a,u,d,!1);ve.next();){var fe=ve.nl(),Ce=ve.hl();if(U.Vb(fe),ee.Vb(Ce),Ce=U.ha(),(fe=ee.ha().Ea(Ce,null,ge,Q,d))==2){fe=Q[0];var Ie=Q[1];if(Ce=Ce.Qb(),v&&(Ie-fe)*Ce>d&&($=!0,L&&q))return!0}else if(fe!=0&&(fe=Q[0],Ce=ge[0],0<fe&&1>fe&&0<Ce&&1>Ce))return!0}if(v=new m.l,U=new m.l,v.K(b),v.W(1e3*d,1e3*d),U.K(C),U.W(1e3*d,1e3*d),M.K(v),M.Ea(U),b="",b=$?b+"**":b+"T*",L){if(10<u.I()&&(u=m.Ud.clip(u,M,d,0)).B())return!1;b+="****"}else b+="T***";if(q){if(10<a.I()&&(a=m.Ud.clip(a,M,d,0)).B())return!1;b+="***"}else b+="T**";return m.am.rt(a,u,d,b.toString(),g)},h.BI=function(a,u,d,g){var v=[!1],b=h.zI(a,u,d,v);return v[0]?b:(v=new m.l,u.A(v),v.W(1e3*d,1e3*d),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B()))&&m.am.Sw(a,u,d,g))},h.zI=function(a,u,d,g){g[0]=!1;for(var v=a.Ga(),b=u.Ga(),C=[0,0],M=[0,0],$=new m.Zl(a,u,d,!1),L=!1;$.next();){var q=$.nl(),U=$.hl();if(v.Vb(q,-1),b.Vb(U,-1),q=v.ha(),(q=b.ha().Ea(q,null,M,C,d))!=0&&(L=!0,q==1&&(q=C[0],U=M[0],0<q&&1>q&&0<U&&1>U)))return g[0]=!0,!1}if(!L){for(g[0]=!0,C=new m.l,a.A(C),C.W(d,d),$=a,L=!1,M=new m.l,g=0,v=u.da();g<v;g++)if(0<u.Ja(g)){if(u.Rj(g,M),!C.isIntersecting(M)||(b=u.Na(u.Ba(g)),(b=m.Dg.wm($,b,0))==0))return!1;L||(!m.Dg.Ml(a,u.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?$=a:(b=new m.Da,a.copyTo(b),b.fj(1),$=b),L=!0)}if(a.da()==1||u.getType()==1607)return!0;for(C=new m.l,u.A(C),C.W(d,d),M=u,$=!1,d=new m.l,g=0,v=a.da();g<v;g++)if(0<a.Ja(g)){if(a.Rj(g,d),C.isIntersecting(d)&&(b=a.Na(a.Ba(g)),(b=m.Dg.wm(M,b,0))==1))return!1;$||(!m.Dg.Ml(u,a.da()-1)||u.Bb!=null&&u.Bb.Fb!=null?M=u:(b=new m.Da,u.copyTo(b),b.fj(1),M=b),$=!0)}return!0}return!1},h.JI=function(a,u,d,g){for(var v=a.Ga(),b=u.Ga(),C=[0,0],M=[0,0],$=new m.Zl(a,u,d,!1),L=!1;$.next();){var q=$.nl(),U=$.hl();if(v.Vb(q),b.Vb(U),q=v.ha(),(q=b.ha().Ea(q,null,M,C,d))==2)L=!0;else if(q!=0){if(L=C[0],q=M[0],0<L&&1>L&&0<q&&1>q)return!1;L=!0}}return!!L&&(b=new m.l,C=new m.l,v=new m.l,a.A(b),u.A(C),b.W(1e3*d,1e3*d),C.W(1e3*d,1e3*d),v.K(b),v.Ea(C),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B())||10<u.I()&&(u=m.Ud.clip(u,v,d,0),u.B()))&&m.am.$m(a,u,d,"F********",g))},h.DI=function(a,u,d,g){for(var v=a.Ga(),b=u.Ga(),C=[0,0],M=[0,0],$=new m.Zl(a,u,d,!1),L=!1;$.next();){var q=$.nl(),U=$.hl();if(v.Vb(q),b.Vb(U),q=v.ha(),(q=b.ha().Ea(q,null,M,C,d))==2)L=!0;else if(q!=0){if(L=C[0],q=M[0],0<L&&1>L&&0<q&&1>q)return!0;L=!0}}return!!L&&(b=new m.l,C=new m.l,M=new m.l,$=new m.l,v=new m.l,a.A(b),u.A(C),h.ls(C,b,d)?(M.K(b),M.W(1e3*d,1e3*d),$.K(C),$.W(1e3*d,1e3*d),v.K(M),v.Ea($),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B())||10<u.I()&&(u=m.Ud.clip(u,v,d,0),u.B()))&&(d=m.am.$m(a,u,d,"T********",g))):d=m.am.$m(a,u,d,"T*****T**",g))},h.CI=function(a,u,d,g){var v=[!1],b=h.zI(a,u,d,v);return v[0]?b:(v=new m.l,u.A(v),v.W(1e3*d,1e3*d),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B()))&&m.am.fB(a,u,d,g))},h.AI=function(a,u,d){return m.hd.Yd(a,u,d)==1},h.HI=function(a,u,d){return m.hd.Yd(a,u,d)==2},h.kt=function(a,u,d){var g=new m.h;d*=d;for(var v=0;v<a.I();v++)if(a.D(v,g),m.h.yc(g,u)<=d)return!1;return!0},h.prototype.QE=function(a,u){return a=this.rh[a],u=this.rh[u],a.Mm<u.Mm||a.Mm==u.Mm&&(a.pw<u.pw||a.pw==u.pw&&(a.Kj<u.Kj||a.Kj==u.Kj&&(a.Si<u.Si||a.Si==u.Si&&a.BH<u.BH)))?-1:1},h}();m.ud=p}(ye||(ye={})),function(m){var j,T,p;(T=j||(j={}))[T.InteriorInterior=0]="InteriorInterior",T[T.InteriorBoundary=1]="InteriorBoundary",T[T.InteriorExterior=2]="InteriorExterior",T[T.BoundaryInterior=3]="BoundaryInterior",T[T.BoundaryBoundary=4]="BoundaryBoundary",T[T.BoundaryExterior=5]="BoundaryExterior",T[T.ExteriorInterior=6]="ExteriorInterior",T[T.ExteriorBoundary=7]="ExteriorBoundary",T[T.ExteriorExterior=8]="ExteriorExterior",function(h){h[h.AreaAreaPredicates=0]="AreaAreaPredicates",h[h.AreaLinePredicates=1]="AreaLinePredicates",h[h.LineLinePredicates=2]="LineLinePredicates",h[h.AreaPointPredicates=3]="AreaPointPredicates",h[h.LinePointPredicates=4]="LinePointPredicates",h[h.PointPointPredicates=5]="PointPointPredicates"}(p||(p={})),j=function(){function h(){this.le=0,this.j=new m.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return h.yB=function(a,u,d,g,v){if(g.length!=9)throw m.i.fa("relation string length has to be 9 characters");for(var b=0;9>b;b++){var C=g.charAt(b);if(C!="*"&&C!="T"&&C!="F"&&C!="0"&&C!="1"&&C!="2")throw m.i.fa("relation string")}if((b=this.MR(g,a.Db(),u.Db()))!=0)return m.ud.zB(a,u,d,b,v);b=new m.l,a.A(b),C=new m.l,u.A(C);var M=new m.l;if(M.K(b),M.Zb(C),d=m.ta.Wd(d,M,!1),a=this.WE(a,d),u=this.WE(u,d),a.B()||u.B())return this.uW(a,u,g);switch(b=a.getType(),C=u.getType(),M=!1,b){case 1736:switch(C){case 1736:M=this.rt(a,u,d,g,v);break;case 1607:M=this.$m(a,u,d,g,v);break;case 33:M=this.qt(a,u,d,g);break;case 550:M=this.pt(a,u,d,g,v)}break;case 1607:switch(C){case 1736:M=this.$m(u,a,d,this.Zp(g),v);break;case 1607:M=this.gB(a,u,d,g,v);break;case 33:M=this.tt(a,u,d,g,v);break;case 550:M=this.st(a,u,d,g,v)}break;case 33:switch(C){case 1736:M=this.qt(u,a,d,this.Zp(g));break;case 1607:M=this.tt(u,a,d,this.Zp(g),v);break;case 33:M=this.$U(a,u,d,g);break;case 550:M=this.lt(u,a,d,this.Zp(g))}break;case 550:switch(C){case 1736:M=this.pt(u,a,d,this.Zp(g),v);break;case 1607:M=this.st(u,a,d,this.Zp(g),v);break;case 550:M=this.ZA(a,u,d,g,v);break;case 33:M=this.lt(a,u,d,g)}break;default:M=!1}return M},h.rt=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.xJ();var C=new m.l,M=new m.l;return a.A(C),u.A(M),g=!1,m.ud.dk(C,M,d)&&(b.Cu(a,u),g=!0),g||((C=m.ud.qc(a,u,!1))==4?(b.Cu(a,u),g=!0):C==1?(b.ly(u),g=!0):C==2&&(b.ZD(a),g=!0)),g||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Bp(a,u),b.j.Ug()),h.fg(b.J,b.Xc)},h.Sw=function(a,u,d,g){var v=new h;v.Yi(),v.bj("T*****F**"),v.xJ();var b=new m.l,C=new m.l;a.A(b),u.A(C);var M=!1;return m.ud.dk(b,C,d)&&(v.Cu(a,u),M=!0),M||((b=m.ud.qc(a,u,!1))==4?(v.Cu(a,u),M=!0):b==1?(v.ly(u),M=!0):b==2&&(v.ZD(a),M=!0)),M?this.fg(v.J,v.Xc):(a=(M=new m.gd).Ib(a),b=M.Ib(u),m.Tk.V(M,d,g,!1),d=M.Ne(b).mg(),M.Gp(0,!0,!0),m.rn.V(M,a,-1,!1,g),M.I(a)!=0&&(m.rn.V(M,b,-1,!1,g),v.er(M,g),(u=M.I(b)==0)||(v.Bp(a,b),v.j.Ug(),b=this.fg(v.J,v.Xc))?(a=M.Ne(a),a=(M=new m.gd).Ib(a),b=M.Ib(d),v.er(M,g),v.le=0,v.Yi(),v.bj(u?"T*****F**":"******F**"),v.IB(),v.Bp(a,b),v.j.Ug(),this.fg(v.J,v.Xc)):b))},h.$m=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.IB();var C=new m.l,M=new m.l;return a.A(C),u.A(M),g=!1,m.ud.dk(C,M,d)&&(b.Du(a,u),g=!0),g||((C=m.ud.qc(a,u,!1))==4?(b.Du(a,u),g=!0):C==1&&(b.$D(u),g=!0)),g||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.kh=b.j.Dp(),h.Jw(u,b.j,b.kh),b.Bp(a,u),b.j.Ep(b.kh),b.j.Ug()),h.fg(b.J,b.Xc)},h.fB=function(a,u,d,g){var v=new h;v.Yi(),v.bj("T*****F**"),v.IB();var b=new m.l,C=new m.l;a.A(b),u.A(C);var M=!1;return m.ud.dk(b,C,d)&&(v.Du(a,u),M=!0),M||((b=m.ud.qc(a,u,!1))==4?(v.Du(a,u),M=!0):b==1&&(v.$D(u),M=!0)),M?this.fg(v.J,v.Xc):(a=(M=new m.gd).Ib(a),u=M.Ib(u),v.Wo(M,d,g),M.I(a)!=0&&(v.Bp(a,u),v.j.Ug(),this.fg(v.J,v.Xc)))},h.pt=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.yJ();var C=new m.l,M=new m.l;return a.A(C),u.A(M),g=!1,m.ud.dk(C,M,d)&&(b.Eu(a),g=!0),g||((C=m.ud.qc(a,u,!1))==4?(b.Eu(a),g=!0):C==1&&(b.zN(),g=!0)),g||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Gy(a,u),b.j.Ug()),h.fg(b.J,b.Xc)},h.gB=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.eX(),g=new m.l;var C=new m.l;a.A(g),u.A(C);var M=!1;return m.ud.dk(g,C,d)&&(b.PG(a,u),M=!0),M||m.ud.qc(a,u,!1)!=4||(b.PG(a,u),M=!0),M||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Yh=b.j.Dp(),b.kh=b.j.Dp(),h.Jw(a,b.j,b.Yh),h.Jw(u,b.j,b.kh),b.Bp(a,u),b.j.Ep(b.Yh),b.j.Ep(b.kh),b.j.Ug()),h.fg(b.J,b.Xc)},h.st=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.MJ(),g=new m.l;var C=new m.l;a.A(g),u.A(C);var M=!1;return m.ud.dk(g,C,d)&&(b.Vz(a),M=!0),M||m.ud.qc(a,u,!1)!=4||(b.Vz(a),M=!0),M||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Yh=b.j.Dp(),h.Jw(a,b.j,b.Yh),b.Gy(a,u),b.j.Ep(b.Yh),b.j.Ug()),h.fg(b.J,b.Xc)},h.ZA=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.RJ(),g=new m.l;var C=new m.l;a.A(g),u.A(C);var M=!1;return m.ud.dk(g,C,d)&&(b.yI(),M=!0),M||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Gy(a,u),b.j.Ug()),h.fg(b.J,b.Xc)},h.qt=function(a,u,d,g){var v=new h;v.Yi(),v.bj(g),v.yJ();var b=new m.l;a.A(b),u=u.D();var C=!1;return m.ud.Rw(u,b,d)&&(v.Eu(a),C=!0),C||((d=m.hd.Yd(a,u,d))==1?(v.J[0]=0,v.J[2]=2,v.J[3]=-1,v.J[5]=1,v.J[6]=-1):d==2?(v.J[6]=-1,a.Ke()!=0?(v.J[0]=-1,v.J[3]=0,v.J[2]=2,v.J[5]=1):(v.J[0]=0,v.J[3]=-1,v.J[5]=-1,d=new m.l,a.A(d),v.J[2]=d.ca()==0&&d.R()==0?-1:1)):v.Eu(a)),this.fg(v.J,g)},h.tt=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.MJ();var C=new m.l;a.A(C),g=u.D();var M=!1;if(m.ud.Rw(g,C,d)&&(b.Vz(a),M=!0),!M){C=null;var $=M=!1;(b.ea[0]||b.ea[6])&&(m.ud.Yz(a,g,d)?(b.ea[0]&&(C=m.pi.gm(a,v),$=!m.ud.kt(C,g,d),M=!0,b.J[0]=$?-1:0),b.J[6]=-1):(b.J[0]=-1,b.J[6]=0)),b.ea[3]&&(C!=null&&C.B()?b.J[3]=-1:(M||(C==null&&(C=m.pi.gm(a,v)),$=!m.ud.kt(C,g,d),M=!0),b.J[3]=$?0:-1)),b.ea[5]&&(C!=null&&C.B()?b.J[5]=-1:M&&!$?b.J[5]=0:(C==null&&(C=m.pi.gm(a,v)),v=m.ud.Nw(C,u,d),b.J[5]=v?-1:0)),b.ea[2]&&(a.Qb()!=0?b.J[2]=1:((v=new m.de(a.description)).Fd(a,0,a.I()),a=m.ud.Nw(v,u,d),b.J[2]=a?-1:0))}return this.fg(b.J,b.Xc)},h.lt=function(a,u,d,g){var v=new h;v.Yi(),v.bj(g),v.RJ();var b=new m.l;a.A(b),u=u.D();var C=!1;if(m.ud.Rw(u,b,d)&&(v.yI(),C=!0),!C){b=!1,C=!0,d*=d;for(var M=0;M<a.I();M++){var $=a.Na(M);if(m.h.yc($,u)<=d?b=!0:C=!1,b&&!C)break}b?(v.J[0]=0,v.J[2]=C?-1:0,v.J[6]=-1):(v.J[0]=-1,v.J[2]=0,v.J[6]=0)}return h.fg(v.J,g)},h.$U=function(a,u,d,g){a=a.D(),u=u.D();for(var v=[],b=0;9>b;b++)v[b]=-1;return m.h.yc(a,u)<=d*d?v[0]=0:(v[2]=0,v[6]=0),v[8]=2,h.fg(v,g)},h.fg=function(a,u){for(var d=0;9>d;d++)switch(u.charAt(d)){case"T":if(a[d]==-1)return!1;break;case"F":if(a[d]!=-1)return!1;break;case"0":if(a[d]!=0)return!1;break;case"1":if(a[d]!=1)return!1;break;case"2":if(a[d]!=2)return!1}return!0},h.uW=function(a,u,d){var g=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(a.B()&&u.B()){for(var v=0;9>v;v++)g[v]=-1;return this.fg(g,d)}return v=!1,a.B()&&(a=u,v=!0),g[0]=-1,g[1]=-1,g[3]=-1,g[4]=-1,g[6]=-1,g[7]=-1,g[8]=2,u=a.getType(),m.aa.Hc(u)?u==1736?a.Ke()!=0?(g[2]=2,g[5]=1):(g[5]=-1,u=new m.l,a.A(u),g[2]=u.ca()==0&&u.R()==0?0:1):(u=a.Qb()!=0,g[2]=u?1:0,g[5]=m.pi.aq(a)?0:-1):(g[2]=0,g[5]=-1),v&&this.vK(g),this.fg(g,d)},h.MR=function(a,u,d){return h.dQ(a)?3:h.UP(a)?4:h.cY(a,u,d)?8:h.CP(a,u,d)?16:h.eP(a)?1:h.EU(a,u,d)?32:0},h.dQ=function(a){return a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="F"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="F"&&a.charAt(6)=="F"&&a.charAt(7)=="F"&&a.charAt(8)=="*"},h.UP=function(a){return a.charAt(0)=="F"&&a.charAt(1)=="F"&&a.charAt(2)=="*"&&a.charAt(3)=="F"&&a.charAt(4)=="F"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*"},h.cY=function(a,u,d){return(u!=0||d!=0)&&((u!=2||d!=2)&&(a.charAt(0)=="F"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="T"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*"||u==1&&d==1&&a.charAt(0)=="F"&&a.charAt(1)=="T"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*")||d!=0&&a.charAt(0)=="F"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="T"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*")},h.CP=function(a,u,d){return u>d?a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="T"&&a.charAt(7)=="*"&&a.charAt(8)=="*":u==1&&d==1&&a.charAt(0)=="0"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*"},h.eP=function(a){return a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="F"&&a.charAt(7)=="F"&&a.charAt(8)=="*"},h.EU=function(a,u,d){if(u==d){if(u!=1)return a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="T"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="T"&&a.charAt(7)=="*"&&a.charAt(8)=="*";if(a.charAt(0)=="1"&&a.charAt(1)=="*"&&a.charAt(2)=="T"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="T"&&a.charAt(7)=="*"&&a.charAt(8)=="*")return!0}return!1},h.Jw=function(a,u,d){a=u.La(a);for(var g=u.Re;g!=-1;g=u.Rf(g))if(u.xd(g)&a){var v=u.Me(g);if(v==-1)u.nn(g,d,0);else{var b=v,C=0;do u.dh(b)&a&&C++,b=u.jc(u.xa(b));while(b!=v);u.nn(g,d,C)}}},h.Zp=function(a){var u=""+a.charAt(0);return u+=a.charAt(3),u+=a.charAt(6),u+=a.charAt(1),u+=a.charAt(4),u+=a.charAt(7),u+=a.charAt(2),(u+=a.charAt(5))+a.charAt(8)},h.prototype.Yi=function(){for(var a=0;9>a;a++)this.J[a]=-2,this.Za[a]=-2},h.vK=function(a){var u=a[1],d=a[2],g=a[5];a[1]=a[3],a[2]=a[6],a[5]=a[7],a[3]=u,a[6]=d,a[7]=g},h.prototype.bj=function(a){for(this.Xc=a,a=0;9>a;a++)this.Xc.charAt(a)!="*"?(this.ea[a]=!0,this.le++):this.ea[a]=!1},h.prototype.UJ=function(){for(var a=0;9>a;a++)this.ea[a]&&this.J[a]==-2&&(this.J[a]=-1,this.ea[a]=!1)},h.prototype.pc=function(a){return this.J[a]!=-2&&(this.J[a]==-1?(this.ea[a]=!1,this.le--,!0):this.Xc.charAt(a)!="T"&&this.Xc.charAt(a)!="F"?!(this.J[a]<this.Za[a])&&(this.ea[a]=!1,this.le--,!0):(this.ea[a]=!1,this.le--,!0))},h.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.xN=function(a,u,d){var g=!0;return this.ea[0]&&(this.CS(a,u,d),g=g&&this.pc(0)),this.ea[1]&&(this.sG(a,u,1),g=g&&this.pc(1)),this.ea[2]&&(this.tG(a,u,d,2),g=g&&this.pc(2)),this.ea[3]&&(this.sG(a,d,3),g=g&&this.pc(3)),this.ea[4]&&(this.BN(a,u,d),g=g&&this.pc(4)),this.ea[5]&&(this.eE(a,d,5),g=g&&this.pc(5)),this.ea[6]&&(this.tG(a,d,u,6),g=g&&this.pc(6)),this.ea[7]&&(this.eE(a,u,7),g=g&&this.pc(7)),g},h.prototype.Cu=function(a,u){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(u,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},h.prototype.Fr=function(a,u,d,g,v){u==-1&&g==-1||((d!="T"&&d!="F"&&u!=-1||v!="T"&&v!="F"&&g!=-1)&&a.Ke()==0?(g!=-1&&(this.J[g]=-1),u!=-1&&(d=new m.l,a.A(d),this.J[u]=d.ca()==0&&d.R()==0?0:1)):(u!=-1&&(this.J[u]=2),g!=-1&&(this.J[g]=1)))},h.prototype.ly=function(a){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(a,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},h.prototype.ZD=function(a){this.ly(a),h.vK(this.J)},h.prototype.Du=function(a,u){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var d=this.Xc.charAt(6);d=d=="T"||d=="F"||u.Qb()!=0,this.J[6]=d?1:0}this.ea[7]&&(u=m.pi.aq(u),this.J[7]=u?0:-1),this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},h.prototype.$D=function(a){if(this.ea[0]){var u=this.Xc.charAt(0);u=u=="T"||u=="F"||a.Qb()!=0,this.J[0]=u?1:0}this.ea[1]&&(a=m.pi.aq(a),this.J[1]=a?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},h.prototype.Eu=function(a){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},h.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},h.prototype.PG=function(a,u){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var d=this.Xc.charAt(2);d=d=="T"||d=="F"||a.Qb()!=0,this.J[2]=d?1:0}this.ea[5]&&(a=m.pi.aq(a),this.J[5]=a?0:-1),this.ea[6]&&(d=(d=this.Xc.charAt(6))=="T"||d=="F"||u.Qb()!=0,this.J[6]=d?1:0),this.ea[7]&&(u=m.pi.aq(u),this.J[7]=u?0:-1)},h.prototype.Vz=function(a){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var u=this.Xc.charAt(2);u=u=="T"||u=="F"||a.Qb()!=0,this.J[2]=u?1:0}this.ea[5]&&(a=m.pi.aq(a),this.J[5]=a?0:-1),this.J[6]=0},h.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},h.prototype.yN=function(a,u,d){var g=!0;return this.ea[0]&&(this.DS(a,u),g=g&&this.pc(0)),this.ea[1]&&(this.zS(a,u,d,this.kh),g=g&&this.pc(1)),this.ea[2]&&(this.AS(a,u),g=g&&this.pc(2)),this.ea[3]&&(this.FN(a,u,d,this.kh),g=g&&this.pc(3)),this.ea[4]&&(this.CN(a,u,d,this.kh),g=g&&this.pc(4)),this.ea[5]&&(this.DN(a,u,d),g=g&&this.pc(5)),this.ea[6]&&(this.lQ(a,u),g=g&&this.pc(6)),this.ea[7]&&(this.kQ(a,u,d,this.kh),g=g&&this.pc(7)),g},h.prototype.mT=function(a,u,d){var g=!0;return this.ea[0]&&(this.GS(a,u,d,this.Yh,this.kh),g=g&&this.pc(0)),this.ea[1]&&(this.uG(a,u,d,this.Yh,this.kh,1),g=g&&this.pc(1)),this.ea[2]&&(this.vG(a,u,d,2),g=g&&this.pc(2)),this.ea[3]&&(this.uG(a,d,u,this.kh,this.Yh,3),g=g&&this.pc(3)),this.ea[4]&&(this.HN(a,u,d,this.Yh,this.kh),g=g&&this.pc(4)),this.ea[5]&&(this.fE(a,d,this.Yh,5),g=g&&this.pc(5)),this.ea[6]&&(this.vG(a,d,u,6),g=g&&this.pc(6)),this.ea[7]&&(this.fE(a,u,this.kh,7),g=g&&this.pc(7)),g},h.prototype.aE=function(a,u,d){var g=!0;return this.ea[0]&&(this.ES(a,u),g=g&&this.pc(0)),this.ea[2]&&(this.BS(a,u),g=g&&this.pc(2)),this.ea[3]&&(this.GN(a,u,d),g=g&&this.pc(3)),this.ea[5]&&(this.EN(a,u),g=g&&this.pc(5)),this.ea[6]&&(this.mQ(a,u),g=g&&this.pc(6)),g},h.prototype.QG=function(a,u,d){var g=!0;return this.ea[0]&&(this.HS(a,u,d,this.Yh),g=g&&this.pc(0)),this.ea[2]&&(this.FS(a,d),g=g&&this.pc(2)),this.ea[3]&&(this.JN(a,u,d,this.Yh),g=g&&this.pc(3)),this.ea[5]&&(this.IN(a,u,d,this.Yh),g=g&&this.pc(5)),this.ea[6]&&(this.nQ(a,u,d),g=g&&this.pc(6)),g},h.prototype.ZU=function(a,u,d){var g=!0;return this.ea[0]&&(this.IS(a,u,d),g=g&&this.pc(0)),this.ea[2]&&(this.wG(a,u,d,2),g=g&&this.pc(2)),this.ea[6]&&(this.wG(a,d,u,6),g=g&&this.pc(6)),g},h.prototype.CS=function(a,u,d){this.J[0]!=2&&(a=this.j.af(a))&u&&a&d&&(this.J[0]=2)},h.prototype.sG=function(a,u,d){if(this.J[d]!=1){var g=this.j.af(this.j.xa(a));this.j.af(a)&u&&g&u&&(this.J[d]=1)}},h.prototype.tG=function(a,u,d,g){this.J[g]!=2&&(a=this.j.af(a))&u&&!(a&d)&&(this.J[g]=2)},h.prototype.BN=function(a,u,d){if(this.J[4]!=1){var g=this.j.dh(a);g&u&&g&d?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(a=this.j.xd(this.j.uf(a)))&u&&a&d&&(this.J[4]=0)}},h.prototype.eE=function(a,u,d){if(this.J[d]!=1){var g=this.j.af(this.j.xa(a));!(this.j.af(a)&u)&&!(g&u)&&(this.J[d]=1)}},h.prototype.DS=function(a,u){if(this.J[0]!=1){var d=this.j.af(this.j.xa(a));this.j.af(a)&u&&d&u&&(this.J[0]=1)}},h.prototype.zS=function(a,u,d,g){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){var v=this.j.uf(a),b=this.j.xd(v);!(b&u)&&this.j.af(a)&u&&(a=this.j.ng(v,g),b&d&&a%2!=0&&(this.J[1]=0))}},h.prototype.AS=function(a,u){this.J[2]!=2&&this.j.dh(a)&u&&(this.J[2]=2)},h.prototype.FN=function(a,u,d,g){if(this.J[3]!=1){var v=this.j.dh(a);v&u&&v&d?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(v=this.j.uf(a),(a=this.j.xd(v))&u&&(u=this.j.ng(v,g),a&d&&u%2==0&&(this.J[3]=0)))}},h.prototype.CN=function(a,u,d,g){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){var v=this.j.uf(a);(a=this.j.xd(v))&u&&(u=this.j.ng(v,g),a&d&&u%2!=0&&(this.J[4]=0))}},h.prototype.DN=function(a,u,d){this.J[5]!=1&&(a=this.j.dh(a))&u&&!(a&d)&&(this.J[5]=1)},h.prototype.lQ=function(a,u){if(this.J[6]!=1){var d=this.j.af(this.j.xa(a));!(this.j.af(a)&u)&&!(d&u)&&(this.J[6]=1)}},h.prototype.kQ=function(a,u,d,g){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){var v=this.j.uf(a),b=this.j.xd(v);!(b&u)&&!(this.j.af(a)&u)&&(a=this.j.ng(v,g),b&d&&a%2!=0&&(this.J[7]=0))}},h.prototype.GS=function(a,u,d,g,v){if(this.J[0]!=1){var b=this.j.dh(a);b&u&&b&d?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(a=this.j.uf(a),(b=this.j.xd(a))&u&&b&d&&(u=this.j.ng(a,g),v=this.j.ng(a,v),u%2==0&&v%2==0&&(this.J[0]=0)))}},h.prototype.uG=function(a,u,d,g,v,b){if(this.J[b]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){a=this.j.uf(a);var C=this.j.xd(a);C&u&&C&d&&(u=this.j.ng(a,g),v=this.j.ng(a,v),u%2==0&&v%2!=0&&(this.J[b]=0))}},h.prototype.vG=function(a,u,d,g){this.J[g]!=1&&(a=this.j.dh(a))&u&&!(a&d)&&(this.J[g]=1)},h.prototype.HN=function(a,u,d,g,v){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){a=this.j.uf(a);var b=this.j.xd(a);b&u&&b&d&&(u=this.j.ng(a,g),v=this.j.ng(a,v),u%2!=0&&v%2!=0&&(this.J[4]=0))}},h.prototype.fE=function(a,u,d,g){this.J[g]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(a=this.j.uf(a),!(this.j.xd(a)&u)&&this.j.ng(a,d)%2!=0&&(this.J[g]=0))},h.prototype.ES=function(a,u){this.J[0]!=0&&!(this.j.xd(a)&u)&&this.j.hk(this.j.cz(a))&u&&(this.J[0]=0)},h.prototype.BS=function(a,u){this.J[2]!=2&&this.j.xd(a)&u&&(this.J[2]=2)},h.prototype.GN=function(a,u,d){this.J[3]!=0&&(a=this.j.xd(a))&u&&a&d&&(this.J[3]=0)},h.prototype.EN=function(a,u){this.J[5]!=1&&this.j.xd(a)&u&&(this.J[5]=1)},h.prototype.mQ=function(a,u){this.J[6]!=0&&!(this.j.xd(a)&u)&&!(this.j.hk(this.j.cz(a))&u)&&(this.J[6]=0)},h.prototype.HS=function(a,u,d,g){if(this.J[0]!=0){var v=this.j.xd(a);v&u&&v&d&&this.j.ng(a,g)%2==0&&(this.J[0]=0)}},h.prototype.FS=function(a,u){this.J[2]!=1&&(this.j.Me(a)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.xd(a)&u)&&(this.J[2]=0))},h.prototype.JN=function(a,u,d,g){if(this.J[3]!=0){var v=this.j.xd(a);v&u&&v&d&&this.j.ng(a,g)%2!=0&&(this.J[3]=0)}},h.prototype.IN=function(a,u,d,g){if(this.J[5]!=0){var v=this.j.xd(a);v&u&&!(v&d)&&this.j.ng(a,g)%2!=0&&(this.J[5]=0)}},h.prototype.nQ=function(a,u,d){this.J[6]!=0&&!((a=this.j.xd(a))&u)&&a&d&&(this.J[6]=0)},h.prototype.IS=function(a,u,d){this.J[0]!=0&&(a=this.j.xd(a))&u&&a&d&&(this.J[0]=0)},h.prototype.wG=function(a,u,d,g){this.J[g]!=0&&(a=this.j.xd(a))&u&&!(a&d)&&(this.J[g]=0)},h.prototype.Bp=function(a,u){var d=!1;a=this.j.La(a),u=this.j.La(u),this.Ui=this.j.$g();for(var g=this.j.Re;g!=-1;g=this.j.Rf(g)){var v=this.j.Me(g);if(v==-1){if(this.Sm!=-1)switch(this.Sm){case 3:d=this.aE(g,a,u);break;case 4:d=this.QG(g,a,u);break;default:throw m.i.fa("internal error")}}else{var b=v;do{var C=b;if(this.j.Ab(C,this.Ui)!=1)do{switch(this.vw){case 0:d=this.xN(C,a,u);break;case 1:d=this.yN(C,a,u);break;case 2:d=this.mT(C,a,u);break;default:throw m.i.fa("internal error")}if(d)break;this.j.Kb(C,this.Ui,1),C=this.j.jc(C)}while(C!=b&&!d);if(d)break;b=this.j.jc(this.j.xa(C))}while(b!=v);if(d)break}}d||this.UJ(),this.j.Jg(this.Ui)},h.prototype.Gy=function(a,u){var d=!1;a=this.j.La(a),u=this.j.La(u);for(var g=this.j.Re;g!=-1;g=this.j.Rf(g)){switch(this.Sm){case 3:d=this.aE(g,a,u);break;case 4:d=this.QG(g,a,u);break;case 5:d=this.ZU(g,a,u);break;default:throw m.i.Qa()}if(d)break}d||this.UJ()},h.prototype.er=function(a,u){this.j.dr(a,u)},h.prototype.Wo=function(a,u,d){this.YP(a,u,d),this.er(a,d)},h.prototype.YP=function(a,u,d){for(m.Tk.V(a,u,d,!1),a.Gp(0,!0,!0),u=a.ld;u!=-1;u=a.ue(u))a.ic(u)==1736&&m.rn.V(a,u,-1,!1,d)},h.WE=function(a,u){var d=a.getType();return m.aa.yd(d)?((u=new m.Ta(a.description)).oc(a,!0),u):d==197?(d=new m.l,a.A(d),d.ca()<=u&&d.R()<=u?(u=new m.Sa(a.description),a.sf(u),u):d.ca()<=u||d.R()<=u?(u=new m.Ta(a.description),d=new m.Sa,a.Hf(0,d),u.nf(d),a.Hf(2,d),u.lineTo(d),u):((u=new m.Da(a.description)).ad(a,!1),u)):a},h}(),m.am=j}(ye||(ye={})),function(m){var j=function(){function h(a){this.Em=new m.ia(0),this.dw=new m.ia(0),this.wt=new m.h,this.xt=new m.h,this.g=a,this.Hs=-1}return h.prototype.bc=function(a){return this.g.bc(this.zz(a))},h.prototype.Bv=function(a){var u=this.iz(a);if(a=this.HF(a),this.g.Ma(u)==a){var d=u;u=a,a=d}return this.g.Gc(u,this.wt),this.g.Gc(a,this.xt),this.wt.y<this.xt.y},h.prototype.zz=function(a){var u=this.iz(a);return a=this.HF(a),this.g.U(u)==a?u:a},h.prototype.iz=function(a){return this.Em.get(a)},h.prototype.HF=function(a){return this.dw.get(a)},h.prototype.rF=function(a){this.Em.set(a,this.Hs),this.Hs=a},h.prototype.nI=function(a){if(this.Hs!=-1){var u=this.Hs;return this.Hs=this.Em.get(u),this.Em.set(u,a),this.dw.set(u,this.g.U(a)),u}return this.Em==null&&(this.Em=new m.ia(0),this.dw=new m.ia(0)),u=this.Em.size,this.Em.add(a),this.dw.add(this.g.U(a)),u},h.prototype.rz=function(a){return this.g.bd(this.iz(a))},h}();m.yY=j;var T=function(){function h(a){this.Be=a,this.ie=new m.yb,this.Nm=new m.yb,this.CH=0,this.Ao=null,this.yA=-1}return h.prototype.compare=function(a,u,d){d=a.ja(d);var g=this.Be.hb;if(this.yA==u)var v=this.CH;else this.Ao=g.bc(u),this.Ao==null?((a=g.g).ed(g.zz(u),this.ie),this.Ao=this.ie,v=this.ie.Pe(this.Be.yh,0)):v=this.Ao.Pe(this.Be.yh,0),this.CH=v,this.yA=u;if((a=g.bc(d))==null){(a=g.g).ed(g.zz(d),this.Nm),a=this.Nm;var b=this.Nm.Pe(this.Be.yh,0)}else b=a.Pe(this.Be.yh,0);return v==b&&(u=g.Bv(u),d=g.Bv(d),(u=.5*((d=Math.min(u?this.Ao.la:this.Ao.na,d?a.la:a.na))+this.Be.yh))==this.Be.yh&&(u=d),v=this.Ao.Pe(u,0),b=a.Pe(u,0)),v<b?-1:v>b?1:0},h.prototype.reset=function(){this.yA=-1},h}(),p=function(){function h(){this.Wm=this.Gl=null,this.fb=new m.Yj,this.fb.RP(),this.$d=new T(this),this.fb.Vo(this.$d)}return h.prototype.HQ=function(){var a=!1;if(this.fw&&(a=this.IQ()),this.g.da(this.X)==1){var u=this.g.Ob(this.X);return a=this.g.wz(u),this.g.PB(u,!0),0>a&&(a=this.g.Xa(u),this.g.pJ(a),this.g.Wg(u,this.g.Ma(a)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),u=this.g.Ob(this.X);u!=-1;u=this.g.Rb(u))this.g.gr(u,this.El,0),this.g.gr(u,this.wo,-1);u=new m.ia(0),this.yh=NaN;var d=new m.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var g=this.Gl.rc(this.Gl.je);g!=-1;g=this.Gl.lb(g)){var v=this.Gl.getData(g);if(this.g.Gc(v,d),d.y!=this.yh&&u.size!=0&&(a=this.ut(u)||a,this.$d.reset(),u.clear(!1)),u.add(v),this.yh=d.y,this.et==0)break}for(0<this.et&&(a=this.ut(u)||a,u.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),u=this.g.Ob(this.X);u!=-1;)if(this.g.sj(u,this.El)==3){for(this.g.PB(u,!0),d=u,u=this.g.sj(u,this.wo);u!=-1;)g=this.g.sj(u,this.wo),this.g.ZT(this.X,this.g.Rb(d),u),d=u,u=g;u=this.g.Rb(d)}else this.g.PB(u,!1),u=this.g.Rb(u);return this.g.CB(this.El),this.g.CB(this.wo),a},h.prototype.ut=function(a){return this.$V(a)},h.prototype.$V=function(a){var u=!1;this.hb==null&&(this.hb=new j(this.g)),this.Wm==null?(this.Wm=new m.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(a);for(var d=0,g=a.size;d<g;d++){var v=a.get(d);v!=-1&&this.oG(v,-1)}for(d=0;d<this.Wm.size&&0<this.et;d++)if(a=this.Wm.get(d),v=this.hb.rz(this.fb.ja(a)),g=-1,this.g.sj(v,this.El)==0){v=this.fb.we(a);for(var b,C=a;v!=-1;){var M=this.fb.ja(v),$=this.hb.rz(M),L=this.g.sj($,this.El);if(L!=0){g=$;break}C=v,v=this.fb.we(v)}v==-1?(b=!0,v=C):(M=this.fb.ja(v),b=this.hb.Bv(M),v=this.fb.lb(v),b=!b);do{if(M=this.fb.ja(v),$=this.hb.rz(M),(L=this.g.sj($,this.El))==0&&(b!=this.hb.Bv(M)&&(u=this.g.Xa($),this.g.pJ(u),this.g.Wg($,this.g.Ma(u)),u=!0),this.g.gr($,this.El,b?3:2),b||(C=this.g.sj(g,this.wo),this.g.gr(g,this.wo,$),this.g.gr($,this.wo,C)),this.et--,this.et==0))return u;g=$,C=v,v=this.fb.lb(v),b=!b}while(C!=a)}return u},h.prototype.ZV=function(a){for(var u=0,d=a.size;u<d;u++){var g=a.get(u),v=this.g.Pa(g,this.ro),b=this.g.Pa(g,this.Rs);if(v!=-1){var C=this.fb.ja(v);this.hb.rF(C),this.g.Ra(g,this.ro,-1)}b!=-1&&(C=this.fb.ja(b),this.hb.rF(C),this.g.Ra(g,this.Rs,-1)),C=-1,v!=-1&&b!=-1?(this.fb.vd(v,-1),this.fb.vd(b,-1),a.set(u,-1)):C=v!=-1?v:b,C!=-1&&(this.oG(g,C)||this.fb.vd(C,-1),a.set(u,-1))}},h.prototype.oG=function(a,u){var d=new m.h,g=new m.h;this.g.Gc(a,d);var v=this.g.U(a);this.g.Gc(v,g);var b=!1;if(d.y<g.y){b=!0;var C=this.hb.nI(a);if(u==-1)var M=this.fb.addElement(C,-1);else M=u,this.fb.Sj(M,C);(C=this.g.Pa(v,this.ro))==-1?this.g.Ra(v,this.ro,M):this.g.Ra(v,this.Rs,M),v=this.g.bd(a),this.g.sj(v,this.El)==0&&this.Wm.add(M)}return v=this.g.Ma(a),this.g.Gc(v,g),d.y<g.y&&(b=!0,C=this.hb.nI(v),u==-1?M=this.fb.addElement(C,-1):(M=u,this.fb.Sj(M,C)),(C=this.g.Pa(v,this.ro))==-1?this.g.Ra(v,this.ro,M):this.g.Ra(v,this.Rs,M),v=this.g.bd(a),this.g.sj(v,this.El)==0&&this.Wm.add(M)),b},h.V=function(a,u,d,g){var v=new h;return v.g=a,v.X=u,v.Gl=d,v.fw=g,v.HQ()},h.prototype.IQ=function(){var a=new m.ia(0),u=new m.ia(0),d=-1,g=-1,v=new m.h;v.Rc();for(var b=-1,C=-1,M=-1,$=new m.h,L=this.Gl.rc(this.Gl.je);L!=-1;L=this.Gl.lb(L)){var q=this.Gl.getData(L);this.g.Gc(q,$);var U=this.g.bd(q);v.qb($)&&C==U?(g==-1&&(d=this.g.Ky(),g=this.g.Gd()),M==-1&&(M=u.size,this.g.Ra(b,g,M),u.add(1),this.g.sj(U,d)==-1&&(this.g.gr(U,d,b),a.add(U))),this.g.Ra(q,g,M),u.bX(u.Fc()+1)):(M=-1,v.L($)),b=q,C=U}if(a.size==0)return!1;for(v=new m.ia(0),b=new m.ia(0),C=0,M=a.size;C<M;C++){U=a.get(C);var ee=this.g.sj(U,d);for(q=this.g.Pa(ee,g),v.clear(!1),b.clear(!1),v.add(ee),b.add(q),q=this.g.U(ee);q!=ee;q=this.g.U(q)){var Q=q;if(($=this.g.Pa(Q,g))!=-1)if(b.size==0)b.add($),v.add(Q);else if(b.Fc()==$){L=v.Fc();var ge=this.g.U(L);ee=this.g.U(Q),this.g.Bc(L,ee),this.g.Cc(ee,L),this.g.Bc(Q,ge),this.g.Cc(ge,Q),Q=[!1],ge=this.g.nG(this.X,ge,this.g.Xa(U),Q),this.g.Ra(q,g,-1),Q[0]&&this.g.Jf(U,ee),q=this.g.Ja(U),q-=ee=this.g.Ja(ge),this.g.Vj(U,q),u.set($,u.get($)-1),u.get($)==1&&(u.set($,0),b.If(),v.If()),q=ee=L}else v.add(q),b.add($)}}return this.g.CB(d),this.g.Td(g),!0},h}();m.WL=p}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.ig=function(){this.PA=this.sb=null},T.prototype.get=function(){return this.PA},T.prototype.set=function(p){if(this.PA=p,p!=null)throw p.getType()==322&&(this.sb=p),m.i.Qa()},T.prototype.create=function(p){if(p!=322)throw m.i.fa("Not Implemented");this.Or()},T.prototype.Or=function(){this.sb==null&&(this.sb=new m.yb),this.PA=this.sb},T}();m.ig=j}(ye||(ye={})),function(m){(m=m.XL||(m.XL={}))[m.enumLineSeg=1]="enumLineSeg",m[m.enumBezierSeg=2]="enumBezierSeg",m[m.enumArcSeg=4]="enumArcSeg",m[m.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",m[m.enumSegmentMask=7]="enumSegmentMask",m[m.enumDensified=8]="enumDensified"}(ye||(ye={})),function(m){var j=function(p){this.$i=p,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},T=function(){function p(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new m.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return p.prototype.wB=function(h){if(h!=null){for(var a=0,u=h.length;a<u;a++)this.rW(h[a]);h.length=0}},p.prototype.rW=function(h){h.$i=null,this.Iq.push(h)},p.prototype.Ow=function(h){if(this.Iq.length===0)var a=new j(h);else(a=this.Iq[this.Iq.length-1]).$i=h,--this.Iq.length;return a},p.prototype.SR=function(h,a){return h==0?this.$s[a]:this.yw[a]},p.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new m.ig);var h=this.MA[this.Cw];return this.Cw++,h},p.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},p.prototype.Oo=function(h){this.mo.push(this.Ow(h))},p.prototype.ol=function(h){return h==0?this.$s.length:this.yw.length},p.prototype.Vp=function(h,a){return this.SR(h,a).$i},p.prototype.Ea=function(h,a){if(this.mo.length!=2)throw m.i.Qa();this.qa=h;var u=m.lc.ox(.01*h),d=!1,g=this.mo[0],v=this.mo[1];if(a||5&g.$i.zr(v.$i,h,!0)){if(g.$i.getType()==322){var b=g.$i;if(v.$i.getType()==322){a=v.$i;var C=m.yb.Zx(b,a,null,this.Fq,this.Bk,h);if(C==0)throw m.yb.Zx(b,a,null,this.Fq,this.Bk,h),m.i.Qa();h=Array(9),m.O.$u(h,null);for(var M=0;M<C;M++){var $=this.Fq[M],L=this.Bk[M],q=g.sB,U=1;$==0?(q=g.tB,U=g.rC):$==1&&(q=g.rB,U=g.qC);var ee=v.sB,Q=1;L==0?(ee=v.tB,Q=v.rC):L==1&&(ee=v.rB,Q=v.qC);var ge=new m.h;q==ee?(q=new m.h,b.hc($,q),$=new m.h,a.hc(L,$),Q/=L=U+Q,m.lc.OG(q,$,Q,ge),m.h.yc(ge,q)+m.h.yc(ge,$)>u&&(d=!0)):q>ee?(b.hc($,ge),$=new m.h,a.hc(L,$),m.h.yc(ge,$)>u&&(d=!0)):(a.hc(L,ge),q=new m.h,b.hc($,q),m.h.yc(ge,q)>u&&(d=!0)),h[M]=ge}for(g=0,v=-1,M=0;M<=C;M++)(Q=M<C?this.Fq[M]:1)!=g&&(u=this.aB(),b.ah(g,Q,u),v!=-1&&u.get().Dc(h[v]),M!=C&&u.get().Qc(h[M]),g=Q,this.$s.push(this.Ow(u.get()))),v=M;for(b=[0,0,0,0,0,0,0,0,0],M=0;M<C;M++)b[M]=M;for(1<C&&this.Bk[0]>this.Bk[1]&&(Q=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=Q,M=b[0],b[0]=b[1],b[1]=M),g=0,v=-1,M=0;M<=C;M++)(Q=M<C?this.Bk[M]:1)!=g&&(u=this.aB(),a.ah(g,Q,u),v!=-1&&(g=b[v],u.get().Dc(h[g])),M!=C&&(g=b[M],u.get().Qc(h[g])),g=Q,this.yw.push(this.Ow(u.get()))),v=M;return d}}throw m.i.Qa()}return!1},p.prototype.Kz=function(h,a,u){if(a.copyTo(this.Bf),this.mo.length!=1)throw m.i.Qa();this.qa=h;var d=this.mo[0];if(u||d.$i.ru(a.D(),h,!0)){if(d.$i.getType()!=322)throw m.i.Qa();var g=(h=d.$i).fe(a.D(),!1);this.Fq[0]=g;var v=d.sB;for(u=1,g==0?(v=d.tB,u=d.rC):g==1&&(v=d.rB,u=d.qC),d=new m.h,v==0?(v=new m.h,h.hc(g,v),a=a.D(),m.lc.OG(v,a,1/(u+1),d)):0<v?(d=new m.h,h.hc(g,d)):d=a.D(),u=0,g=-1,v=0;1>=v;v++){if((a=1>v?this.Fq[v]:1)!=u){var b=this.aB();h.ah(u,a,b),g!=-1&&b.get().Dc(d),v!=1&&b.get().Qc(d),u=a,this.$s.push(this.Ow(b.get()))}g=v}this.Bf.Cb(d)}},p}();m.TC=T}(ye||(ye={})),function(m){var j=function(){function T(p){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=p,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new m.h}return T.prototype.BW=function(p){if(this.ib!=p.ib)throw m.i.Hb();this.zf=p.zf,this.Jd=p.Jd,this.gb=p.gb,this.Cl=p.Cl,this.ag=p.ag,this.zm=p.zm,this.rk=null},T.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw m.i.ce();this.Jd++}return this.rk},T.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw m.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},T.prototype.DW=function(){this.zf=-1,this.Jd=0},T.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},T.prototype.Vb=function(p,h){if(h===void 0&&(h=-1),0<=this.gb&&this.gb<this.ib.da()){var a=this.IM();if(p>=a&&p<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=p-a)}h=0<=h&&h<this.ib.da()&&p>=this.ib.Ba(h)&&p<this.ib.Vc(h)?h:this.ib.sz(p),this.Cl=h+1,this.gb=h,this.zf=-1,this.Jd=p-this.ib.Ba(h),this.ag=this.Wx(h),this.ib.Ba(this.gb),this.ib.dc(this.gb)},T.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},T.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},T.prototype.Wx=function(p){if(this.ib.Ac())return 0;var h=1;return this.ib.dc(p)&&(h=0),this.ib.Ja(p)-h},T.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},T.prototype.JB=function(){this.zm=!0},T.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},T.prototype.IM=function(){return this.ib.Ba(this.gb)},T.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},T.prototype.vm=function(){return this.zf==0},T.prototype.Qn=function(){return this.zf==this.ag-1},T.prototype.Ha=function(){return this.Jd<this.ag},T.prototype.Ez=function(){return 0<this.Jd},T.prototype.Of=function(){var p=new T(this.ib);return p.zf=this.zf,p.Jd=this.Jd,p.ag=this.ag,p.gb=this.gb,p.Cl=this.Cl,p.ib=this.ib,p.zm=this.zm,p},T.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw m.i.ce();this.zf=this.Jd;var p=this.wb();this.ib.mc();var h=this.ib.Ve,a=1;switch(h!=null&&(a=7&h.read(p)),h=this.ib.description,a){case 1:this.sb==null&&(this.sb=new m.yb),this.rk=this.sb;break;case 2:throw m.i.fa("internal error");default:throw m.i.Qa()}this.rk.Nf(h),a=this.ik(),this.ib.Gc(p,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(a,this.Ds),this.rk.Qc(this.Ds);for(var u=1,d=h.Aa;u<d;u++)for(var g=h.kd(u),v=m.ra.Va(g),b=0;b<v;b++){var C=this.ib.Uc(g,p,b);this.rk.YB(g,b,C),C=this.ib.Uc(g,a,b),this.rk.OB(g,b,C)}},T.prototype.$S=function(){return this.gb==this.ib.da()-1},T.prototype.Pn=function(){var p=this.ib.VR();return p!=null&&(7&p.read(this.zf))!=1},T}();m.YL=j}(ye||(ye={})),function(m){var j=function(){function T(p){p instanceof m.aa?(this.xH=p,this.ya=-1,this.Ei=1):(this.vT=p.slice(0),this.ya=-1,this.Ei=p.length)}return T.prototype.La=function(){return this.ya},T.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},T.prototype.qe=function(){},T}();m.Zc=j}(ye||(ye={})),function(m){var j=function(){this.next=null},T=function(){function p(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return p.prototype.AX=function(h,a,u){this.oi=h,this.pl=a,this.Jh=this.Wl=null,this.Tq=0,this.vy=u,this.gn==null&&(this.gn=m.O.lg(384,0)),this.nK()},p.prototype.R=function(){return this.oi},p.prototype.ca=function(){return this.pl},p.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},p.prototype.nK=function(){if(0<this.Tq){for(var h=0;h<this.pl;h++){for(var a=this.Wl[h];a!=null;){var u=a;a=a.next,u.next=null}this.Wl[h]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},p.prototype.iJ=function(h){for(this.kF=h==p.Cx,h=this.Lw;h<=this.Kw;h++)this.sN(),this.lN(h),this.ZP();this.nK()},p.prototype.jy=function(h,a,u,d){if(a!=d){var g=1;if(a>d&&(g=h,h=u,u=g,g=a,a=d,d=g,g=-1),!(0>d||a>=this.pl)){0>h&&0>u?u=h=-1:h>=this.oi&&u>=this.oi&&(u=h=this.oi);var v=(u-h)/(d-a);d>this.pl&&(u=v*((d=this.pl)-a)+h),0>a&&(h=v*(0-a)+h,a=0);var b=Math.max(this.oi+1,8388607);-8388607>h?(a=(0-h)/v+a,h=0):h>b&&(a=(this.oi-h)/v+a,h=this.oi),-8388607>u?d=(0-h)/v+a:u>b&&(d=(this.oi-h)/v+a),(a=m.O.truncate(a))!=(d=m.O.truncate(d))&&((u=new j).x=m.O.truncate(4294967296*h),u.y=a,u.H=d,u.WP=m.O.truncate(4294967296*v),u.dir=g,this.Wl==null&&(this.Wl=m.O.lg(this.pl,null)),u.next=this.Wl[u.y],this.Wl[u.y]=u,u.y<this.Lw&&(this.Lw=u.y),u.H>this.Kw&&(this.Kw=u.H),this.Tq++)}}},p.prototype.sN=function(){if(this.Jh!=null){for(var h=!1,a=null,u=this.Jh;u!=null;)if(u.y++,u.y==u.H){var d=u;u=u.next,a!=null?a.next=u:this.Jh=u,d.next=null}else u.x+=u.WP,a!=null&&a.x>u.x&&(h=!0),a=u,u=u.next;h&&(this.Jh=this.fK(this.Jh))}},p.prototype.lN=function(h){if(!(h>=this.pl)){var a=this.Wl[h];if(a!=null){this.Wl[h]=null,a=this.fK(a),this.Tq-=this.gK,h=this.Jh;for(var u=!0,d=a,g=null;h!=null&&d!=null;)h.x>d.x?(u&&(this.Jh=d),u=d.next,d.next=h,g!=null&&(g.next=d),g=d,d=u):(u=h.next,h.next=d,g!=null&&(g.next=h),g=h,h=u),u=!1;this.Jh==null&&(this.Jh=a)}}},p.eK=function(h,a){return 0>h?0:h>a?a:h},p.prototype.ZP=function(){if(this.Jh!=null){for(var h=0,a=this.Jh,u=m.O.truncate(m.O.XG(a.x)),d=a.next;d!=null;d=d.next)if(h=this.kF?1^h:h+d.dir,d.x>a.x){var g=m.O.truncate(m.O.XG(d.x));h!=0&&(a=p.eK(u,this.oi),(u=p.eK(g,this.oi))>a&&a<this.oi&&(this.gn[this.Ol++]=a,this.gn[this.Ol++]=u,this.gn[this.Ol++]=d.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),a=d,u=g}}},p.prototype.fK=function(h){for(var a=0,u=h;u!=null;u=u.next)a++;if(this.gK=a,a==1)return h;this.Kf==null?this.Kf=m.O.lg(Math.max(a,16),null):this.Kf.length<a&&(this.Kf=m.O.lg(Math.max(a,2*this.Kf.length),null));var d=0;for(u=h;u!=null;u=u.next)this.Kf[d++]=u;for(a==2?this.Kf[0].x>this.Kf[1].x&&(h=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=h):p.AN(this.Kf,a,function(g,v){return g==v?0:g.x<v.x?-1:g.x>v.x?1:0}),h=this.Kf[0],this.Kf[0]=null,u=h,d=1;d<a;d++)u.next=this.Kf[d],u=this.Kf[d],this.Kf[d]=null;return u.next=null,h},p.AN=function(h,a,u){if(a==h.length)h.sort(u);else{var d=h.slice(0,0),g=h.slice(a);a=h.slice(0,a).sort(u),h.length=0,h.push.apply(h,d.concat(a).concat(g))}},p.Cx=0,p}();m.Px=T}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.ui=function(p,h){var a=this.g.Pa(p,this.Pq);if(this.Dl==a&&(this.Dl=this.oe.lb(this.Dl)),this.ho==a&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,a),this.bk(p),h&&(h=this.g.bd(p))!=-1&&this.g.Xa(h)==p){var u=this.g.U(p);if(u!=p){if((a=this.g.bd(u))==h)return void this.g.Jf(h,u);if((u=this.g.Ma(p))!=p&&(a=this.g.bd(u))==h)return void this.g.Jf(h,u)}this.g.Jf(h,-1),this.g.Wg(h,-1)}},T.prototype.pD=function(){for(var p=!1,h=new m.h;;){this.Wh==null?(this.Wh=new m.ia(0),this.zs=new m.ia(0),this.xe=new m.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var a=this.ho,u=0,d=!0;a!=this.Dl;){var g=this.oe.getData(a),v=new m.h;this.g.Gc(g,v),d&&(this.g.Gc(g,h),d=!1),v=this.g.Ma(g);var b=this.g.U(g);this.g.Pa(v,this.zg)!=-559038737&&(this.Wh.add(v),this.g.Ra(v,this.zg,-559038737),this.zs.add(g),this.xe.add(u++)),this.g.Pa(b,this.zg)!=-559038737&&(this.Wh.add(b),this.g.Ra(b,this.zg,-559038737),this.zs.add(g),this.xe.add(u++)),a=this.oe.lb(a)}if(2>this.Wh.size)break;var C=this;for(this.xe.Vd(0,this.xe.size,function(M,$){return C.pM(M,$)}),a=0,u=this.xe.size;a<u;a++)d=this.xe.get(a),d=this.Wh.get(d),this.g.Ra(d,this.zg,a),v=new m.h,this.g.Gc(d,v);for(v=this.TM(h),a=0,u=this.xe.size;a<u;a++)(d=this.xe.get(a))!=-1&&(d=this.Wh.get(d),this.g.Ra(d,this.zg,-1));if(!v)break;p=!0}return p},T.prototype.TM=function(p){for(var h=!1,a=!0;a;){a=!1;var u=0;this.xe.get(u)==-1&&(u=this.cm(u));for(var d=this.cm(u),g=0,v=this.xe.size;g<v&&u!=-1&&d!=-1&&u!=d;g++){var b=this.xe.get(u);d=this.xe.get(d),b=this.Wh.get(b),d=this.Wh.get(d);var C=this.g.U(b);this.g.Dv(C,p)||(C=this.g.Ma(b));var M=this.g.U(d);this.g.Dv(M,p)||(M=this.g.Ma(d));var $=this.pu(C,b),L=this.pu(M,d),q=$?this.g.Ma(C):this.g.U(C),U=L?this.g.Ma(M):this.g.U(M),ee=!1;(this.sp(C)||this.sp(M)||this.sp(b)||this.sp(d)||this.sp(q)||this.sp(U))&&(ee=!0),!ee&&this.g.fq(b,d)&&(ee=!0,this.tD($,L,C,b,M,d)),!ee&&this.g.fq(q,U)&&(ee=!0,this.tD(!$,!L,C,q,M,U)),ee&&(h=!0),a=a||ee,u=this.cm(u),d=this.cm(u)}}if(!h)for(u=0,this.xe.get(u)==-1&&(u=this.cm(u)),d=this.cm(u),g=0,v=this.xe.size;g<v&&u!=-1&&d!=-1&&u!=d;g++)b=this.xe.get(u),d=this.xe.get(d),b=this.Wh.get(b),d=this.Wh.get(d),C=this.g.U(b),this.g.Dv(C,p)||(C=this.g.Ma(b)),M=this.g.U(d),this.g.Dv(M,p)||(M=this.g.Ma(d)),$=this.pu(C,b),L=this.pu(M,d),q=$?this.g.Ma(C):this.g.U(C),U=L?this.g.Ma(M):this.g.U(M),this.DM($,L,b,C,q,d,M,U)&&(h=!0),u=this.cm(u),d=this.cm(u);return h},T.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new m.Fg().MU(this.fw,this.g,this.X,this.nd);var p=!1,h=!0;this.zg=this.Pq=-1;var a=this.g.I(this.X),u=new m.ia(0);u.Jb(a);for(var d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d))for(var g=this.g.Xa(d),v=0,b=this.g.Ja(d);v<b;v++)u.add(g),g=this.g.U(g);var C=this.g.td.o,M=this.g.td.stride;this.g.vb.mc();var $=this.g.vb.za[0].o;for(u.Vd(0,a,function(q,U){var ee=C[M*q],Q=C[M*U],ge=$[2*ee];ee=$[2*ee+1];var ve=$[2*Q];return(ge=ee<(Q=$[2*Q+1])?-1:ee>Q?1:ge<ve?-1:ge>ve?1:0)==0&&(ge=(q=C[M*q+3])<(U=C[M*U+3])?-1:q==U?0:1),ge}),this.Pq=this.g.Gd(),this.oe=new m.jp,this.RA=this.oe.Ph(0),this.oe.fn(a),d=0;d<a;d++)g=u.get(d),v=this.oe.addElement(this.RA,g),this.g.Ra(g,this.Pq,v);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(p=!0);h;){h=!1,a=0,u=!1;do{u=!1,this.ho=-1,b=0,d=new m.h,v=new m.h;for(var L=this.oe.rc(this.RA);L!=-1;)g=this.oe.getData(L),this.ho!=-1?(this.g.Gc(g,v),d.qb(v)?b++:(d.L(v),this.Dl=L,0<b&&(g=this.pD())&&(u=!0,this.Dl!=-1&&(g=this.oe.getData(this.Dl),this.g.Gc(g,d))),this.ho=L=this.Dl,b=0)):(this.ho=L,this.g.Gc(this.oe.getData(L),d),b=0),L!=-1&&(L=this.oe.lb(L));if(this.Dl=-1,0<b&&(g=this.pD())&&(u=!0),10<a++)throw m.i.Qa();u&&this.GM(),this.cD()&&(u=!0),h=h||u&&!1,p=p||u}while(u)}return this.g.Td(this.Pq),this.g.Td(this.zg),m.WL.V(this.g,this.X,this.oe,this.fw)||p},T.prototype.pu=function(p,h){return this.g.U(h)!=p},T.prototype.DM=function(p,h,a,u,d,g,v,b){if(u==v)return this.bk(a),this.bk(g),!1;var C=this.g.Pa(a,this.zg),M=this.g.Pa(d,this.zg),$=this.g.Pa(g,this.zg),L=this.g.Pa(b,this.zg),q=[0,0,0,0];for((a=[0,0,0,0,0,0,0,0])[0]=0,q[0]=C,a[1]=0,q[1]=M,a[2]=1,q[2]=$,a[3]=1,q[3]=L,C=1;4>C;C++){for(M=q[C],$=a[C],L=C-1;0<=L&&q[L]>M;)q[L+1]=q[L],a[L+1]=a[L],L--;q[L+1]=M,a[L+1]=$}return q=0,a[0]!=0&&(q|=1),a[1]!=0&&(q|=2),a[2]!=0&&(q|=4),a[3]!=0&&(q|=8),(q==5||q==10)&&(p==h?p?(this.g.Bc(b,u),this.g.Cc(u,b),this.g.Bc(d,v),this.g.Cc(v,d)):(this.g.Cc(b,u),this.g.Bc(u,b),this.g.Cc(d,v),this.g.Bc(v,d)):p?(this.g.Cc(u,g),this.g.Bc(g,u),this.g.Cc(v,d),this.g.Bc(d,v)):(this.g.Bc(u,g),this.g.Cc(g,u),this.g.Bc(v,d),this.g.Cc(d,v)),!0)},T.prototype.tD=function(p,h,a,u,d,g){this.MY?this.VM():this.UM(p,h,a,u,d,g)},T.prototype.VM=function(){throw m.i.fa("not implemented.")},T.prototype.UM=function(p,h,a,u,d,g){if(p!=h)p?(this.g.Bc(a,d),this.g.Cc(d,a),this.g.Bc(g,u),this.g.Cc(u,g),this.vn(d,a),this.ui(d,!0),this.g.mi(d,!0),this.bk(a),this.vn(g,u),this.ui(g,!0),this.g.mi(g,!1)):(this.g.Bc(d,a),this.g.Cc(a,d),this.g.Bc(u,g),this.g.Cc(g,u),this.vn(d,a),this.ui(d,!0),this.g.mi(d,!1),this.bk(a),this.vn(g,u),this.ui(g,!0),this.g.mi(g,!0)),this.bk(u);else{var v=p?a:u,b=h?d:g;for(p=p?u:a,h=h?g:d,d=!1,this.g.Bc(v,b),this.g.Bc(b,v),this.g.Cc(p,h),this.g.Cc(h,p),g=h;g!=b;)a=this.g.Ma(g),u=this.g.U(g),this.g.Cc(g,u),this.g.Bc(g,a),d=d||g==v,g=u;d||(a=this.g.Ma(b),u=this.g.U(b),this.g.Cc(b,u),this.g.Bc(b,a)),this.vn(b,v),this.ui(b,!0),this.g.mi(b,!1),this.bk(v),this.vn(h,p),this.ui(h,!0),this.g.mi(h,!1),this.bk(p)}},T.prototype.cD=function(){for(var p=!1,h=this.g.Ob(this.X);h!=-1;){for(var a=this.g.Xa(h),u=0,d=this.g.Ja(h);u<d&&1<d;){var g=this.g.Ma(a),v=this.g.U(a);this.g.fq(g,v)?(p=!0,this.ui(a,!1),this.g.pd(a,!0),this.ui(v,!1),this.g.pd(v,!0),a=g,u=0,d=this.g.Ja(h)):(a=v,u++)}if(2>this.g.Ja(h)){for(p=this.g.Xa(h),u=0,d=this.g.Ja(h);u<d;u++)this.ui(p,!1),p=this.g.U(p);h=this.g.Zq(h),p=!0}else h=this.g.Rb(h)}return p},T.prototype.sp=function(p){for(var h=!1;;){var a=this.g.U(p),u=this.g.Ma(p);if(a==p)return this.ui(p,!0),this.g.mi(p,!1),!0;if(!this.g.fq(a,u)||(h=!0,this.bk(u),this.bk(a),this.ui(p,!0),this.g.mi(p,!1),this.vn(a,u),this.ui(a,!0),this.g.mi(a,!0),a==u))break;p=u}return h},T.prototype.GM=function(){for(var p=0,h=this.oe.rc(this.oe.je);h!=-1;h=this.oe.lb(h)){var a=this.oe.getData(h);this.g.aj(a,-1)}for(var u=0,d=this.g.Ob(this.X);d!=-1;)if((h=this.g.Xa(d))==-1||this.g.bd(h)!=-1)a=d,d=this.g.Rb(d),this.g.$q(a);else{this.g.aj(h,d);var g=1;for(a=this.g.U(h);a!=h;a=this.g.U(a))this.g.aj(a,d),g++;this.g.cp(d,!1),this.g.Vj(d,g),this.g.Wg(d,this.g.Ma(h)),u+=g,p++,d=this.g.Rb(d)}for(h=this.oe.rc(this.oe.je);h!=-1;h=this.oe.lb(h))a=this.oe.getData(h),this.g.bd(a)==-1&&(d=this.g.nG(this.X,a,a,null),u+=this.g.Ja(d),p++);for(this.g.Rl(this.X,p),this.g.Tj(this.X,u),p=0,u=this.g.ld;u!=-1;u=this.g.ue(u))p+=this.g.I(u);this.g.bC(p)},T.prototype.cm=function(p){for(var h=0,a=this.xe.size-1;h<a;h++)if(p=(p+1)%this.xe.size,this.xe.get(p)!=-1)return p;return-1},T.prototype.vn=function(p,h){var a=this.g.Pa(h,this.Pq),u=this.g.Pa(h,this.zg);this.g.lC(p,h),this.g.Ra(h,this.Pq,a),this.g.Ra(h,this.zg,u)},T.prototype.bk=function(p){var h=this.g.Pa(p,this.zg);h!=-1&&(this.xe.set(h,-1),this.g.Ra(p,this.zg,-1))},T.V=function(p,h,a,u,d){var g=new T;return g.g=p,g.X=h,g.xA=a,g.fw=u,g.nd=d,g.XM()},T.prototype.pM=function(p,h){var a=this.Wh.get(p),u=new m.h;this.g.Gc(a,u),a=new m.h;var d=this.Wh.get(h);return this.g.Gc(d,a),u.qb(a)?0:(d=this.zs.get(p),p=new m.h,this.g.Gc(d,p),d=this.zs.get(h),h=new m.h,this.g.Gc(d,h),(d=new m.h).uc(u,p),(u=new m.h).uc(a,h),m.h.nu(d,u))},T}();m.rn=j}(ye||(ye={})),function(m){var j;(j=m.$L||(m.$L={}))[j.Local=0]="Local",j[j.Geographic=1]="Geographic",j[j.Projected=2]="Projected",j[j.Image=3]="Image",j[j.Unknown=4]="Unknown",function(p){p[p.Integer32=0]="Integer32",p[p.Integer64=1]="Integer64",p[p.FloatingPoint=2]="FloatingPoint"}(m.TL||(m.TL={}));var T=function(){function p(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return p.prototype.Ec=function(){return this.dg},p.prototype.VF=function(){return 1},p.prototype.VW=function(h){this.mA=h},p.prototype.Xd=function(){if(this.mA!==null)return this.mA;var h=.001;return this.dg!=0?h=m.wr.CQ(this.dg):this.wh!=null&&(h=m.XC.DQ(this.wh)),h},p.prototype.Bz=function(){return this.wh},p.prototype.Hd=function(){return this.dg!=0?m.Tc.Zg(m.wr.Sy(this.dg)):this.wh!=null?m.XC.EQ(this.wh):void 0},p.Sb=function(h){if(h.dg!=0){if(m.wr.ZS(h.dg)===!0)return 1;if(m.wr.aT(h.dg)===!0)return 2}return 4},p.prototype.$r=function(){var h=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=m.wr.FK(h),this.Ho!=-1?this.Ho:h)},p.create=function(h){if(0>=h)throw m.i.N("Invalid or unsupported wkid: "+h);var a=new p;return a.dg=h,a},p.qP=function(h){if(h==null||h.length==0)throw m.i.N("Cannot create SpatialReference from null or empty text.");var a=new p;return a.wh=h,a},p.prototype.Nb=function(h){return this==h||h!=null&&this.constructor==h.constructor&&this.dg==h.dg&&(this.dg!=0||this.wh===h.wh)},p.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},p.prototype.cc=function(){if(this.pp!=="")return this.pp;var h=this.toString();if(Array.prototype.reduce)return this.pp="S"+h.split("").reduce(function(d,g){return 0|(d=(d<<5)-d+g.charCodeAt(0))},0);var a=0;if(h.length===0)return"";for(var u=0;u<h.length;u++)a=(a<<5)-a+h.charCodeAt(u),a&=a;return this.pp="S"+a},p.prototype.Kn=function(){return this.Xd(0)},p.prototype.fh=function(){return this.su!==null?this.su:this.su=m.gu.yP(this)},p.ZN=2147483645,p.$N=9007199254740990,p}();m.Eg=T}(ye||(ye={})),function(m){var j=function(T){function p(){var h=T!==null&&T.apply(this,arguments)||this;return h.Ji=null,h.ST=null,h.Hq=new m.ZL,h.Eo=null,h.jw=null,h}return ri(p,T),p.yP=function(h){var a=new p;if(a.dg=h.dg,a.Ho=h.Ho,a.ZH=h.ZH,a.wh=h.wh,a.wh!==""&&a.wh!==null){h=p.kM(a.wh);var u=p.iM(a.wh);a.Hq.Xx(h,u,m.hu.Integer64),a.by(h),a.gy(u),a.dg=h.$r()}else h=p.jM(a.dg),a.by(h),a.gy(null),a.Hq.Xx(h,null,m.hu.Integer64);return a},p.prototype.Xd=function(h){return this.Hq.Kn(h)},p.iM=function(h){if(0>=h.length)throw m.i.N();var a=null;try{a=m.NC.fromString(h)}catch{a=null}return a==null?null:p.bD(a,!0)},p.prototype.by=function(h){this.Kd=h,this.Eo=this.Kd.Hd()},p.prototype.gy=function(h){this.KH=h,this.ST=this.KH!=null?this.KH.Eo:null},p.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},p.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},p.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},p.prototype.pm=function(){return this.Kd.pm()},p.prototype.bf=function(){return this.Kd.bf()},p.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},p.prototype.Up=function(){return this.Kd.Up()},p.prototype.Wr=function(){return this.Kd.Wr()},p.prototype.kk=function(){return this.Kd.kk()},p.prototype.kS=function(h){return m.OC.Py(this.Kd,h.Kd)},p.prototype.ml=function(){return this.Kd.ml()},p.prototype.Vr=function(){return this.Kd.Vr()},p.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},p.prototype.gh=function(){if(!this.Wc())throw m.i.N("!isPannable()");var h=new m.l;return this.Kd.gh(h),h},p.prototype.Oe=function(){if(!this.Wc())throw m.i.N("!isPannable()");return this.Kd.so},p.prototype.HR=function(){if(!this.Wc())throw m.i.N("!isPannable()");var h=new m.l;return this.Kd.GR(h),h},p.prototype.pv=function(){if(!this.Wc())throw m.i.N("!isPannable()");return this.Kd.pv()},p.prototype.ov=function(){if(!this.Wc())throw m.i.N("!isPannable()");return this.Kd.ov()},p.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},p.prototype.PQ=function(){return this.Kd.hv()},p.prototype.Qp=function(){return this.Eo.getUnitFactor()},p.prototype.vz=function(h){return this.Hq.vz(h)},p.prototype.sc=function(){var h=this.Sb();if(h==1)return this;if(h==3)return this.Ji.fk().sc();if(h==0||h===4)throw m.i.fa("invalid call");if(this.jw!==null)return this.jw;if((h=this.eh().getGeogcs())==null)throw m.i.Qa();return this.jw=p.bF(h,this.Hq.VF())},p.bF=function(h,a){if(h==null)throw m.i.N("null pointer.");var u=new p;return h=p.mu(h,!0),u.Hq.Xx(h,null,a),u.by(h),u.gy(null),u.dg=h.$r(),u},p.prototype.Sb=function(){var h=this.eh();if(h!=null)switch(h.getType()){case m.Sc.PE_TYPE_GEOGCS:return 1;case m.Sc.PE_TYPE_PROJCS:return 2}return 4},p.prototype.hv=function(){return this.Kd.hv()},p.mu=function(h,a){var u=h.getCode();if(0>=u&&0<(u=m.pf.getCode(h))){if((h=m.pf.coordsys(u))==null)throw m.i.N("Text to wkid mapping had failed: "+u);return p.mu(h,a)}if(a&&0<u&&(a=p.qx[u]))return a;a=m.zb.xv(h,u,!1);var d=p.lK[a];return d||(h=0>=u?h:m.pf.coordsys(u),h=new m.OC(h),p.lK[a]=h,0<u&&(p.qx[u]=h),h)},p.jM=function(h){if(0>=h)throw m.i.N("Invalid or unsupported wkid: "+h);var a=p.qx[h];if(a!=null)return a;if((a=m.pf.coordsys(h))==null)throw m.i.N("Invalid or unsupported wkid: "+h);return(a=p.mu(a,!1)).$r()!=h&&(p.qx[h]=a),a},p.kM=function(h){if(h==null||h===void 0||h.length==0)throw m.i.N("Cannot create SpatialReference from null or empty text.");var a=null;try{a=m.pf.fromString(m.Sc.PE_TYPE_COORDSYS,h)}catch(u){throw m.i.N("Cannot create SpatialReference from text. "+u.message)}if(a===null)throw m.i.N("Cannot create SpatialReference from text. ");return p.mu(a,!0)},p.bD=function(h,a){var u,d=h.getCode();if(0>=d&&0<(d=m.pf.getCode(h))){if((d=m.pf.vertcs(d))===null)throw m.i.N();return p.bD(d,a)}if(a&&0<d&&(a=p.kK[d])||(h=m.zb.xv(h,d,!1),a=p.mK[h]))return a;if(0>=d||(u=m.pf.vertcs(d)),u===null)throw m.i.N();return u=new m.PL(u),p.mK[h]=u,0<d&&(p.kK[d]=u),u},p.sI=function(h,a){if(a===null||a.B())return null;var u=new m.l;if(a!==null&&h.Sb()!=1){var d=h.sc(),g=d.eh();h=m.vr.Nr(h,d,null,null),(a=m.Hx.local().V(a,h,null)).A(u)}else g=h.eh(),a.A(u);return a=g.getPrimem().getLongitude(),g=g.getUnit().getUnitFactor(),new m.LC(u.v,u.G,u.C,u.H,a,g)},p.lD=function(h){var a={name:"",steps:[],_pt:null,_entry:null},u=0;for(h=h.getEntries();u<h.length;u++){var d=h[u],g={LY:!1,ZY:"",YY:-1,geogtran:null};d.getDirection()===0?g.isInverse=!1:g.isInverse=!0;var v=d.getGeogtran().getCode();-1<v?g.wkid=v:g.wkt=d.getGeogtran().toString(),a.steps.push(g)}return a},p.XR=function(h,a,u,d){return u===void 0&&(u=null),u=p.sI(d,u),h=m.lp.getGTlist(h.eh(),a.eh(),2,m.lp.PE_GTLIST_OPTS_COMMON,u,1),a=null,h&&0<h.length&&(a=this.lD(h[0]),m.Mx.destroy(h)),u!==null&&u.destroy(),a},p.YR=function(h,a,u,d){var g;if(u===void 0&&(u=null),d===void 0&&(d=null),g===void 0&&(g=30),u=p.sI(d,u),h=m.lp.getGTlist(h.eh(),a.eh(),2,m.lp.PE_GTLIST_OPTS_COMMON,u,g),a=[],h&&0<h.length){for(g=0;g<h.length;g++)a.push(this.lD(h[g]));m.Mx.destroy(h)}return u!==null&&u.destroy(),a},p.qx={},p.lK={},p.kK={},p.mK={},p}(m.Eg);m.gu=j}(ye||(ye={})),function(m){var j,T;(T=j=m.hu||(m.hu={}))[T.Integer32=0]="Integer32",T[T.Integer64=1]="Integer64",T[T.FloatingPoint=2]="FloatingPoint";var p=function(){function h(){this.qp()}return h.prototype.assign=function(a){this.Fm=a.Fm,this.Gm=a.Gm,this.Pj=a.Pj,this.sA=a.sA,this.Fo=a.Fo,this.rA=a.rA,this.Ik=a.Ik,this.Mq=a.Mq,this.Lq=a.Lq,this.Rm=a.Rm},h.prototype.VF=function(){return this.Rm},h.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=j.FloatingPoint},h.prototype.Xx=function(a,u,d){if(this.qp(),this.Rm=d,d!=j.FloatingPoint){var g=new m.l;a.hR(g),this.Fm=g.v,this.Gm=g.G}else this.Gm=this.Fm=-17976931348623157e292;(g=a.Ue.getType())==m.Sc.PE_TYPE_GEOGCS?(g=(d==j.Integer64?1e-9:1/18e5)*a.bf(),this.Pj=1/g):g==m.Sc.PE_TYPE_PROJCS&&(g=(d==j.Integer64?1e-4:.001)*a.pm(),this.Pj=1/g),u!=null?(g=(d==j.Integer32?.001:1e-4)*u.IH,this.Fo=1/g):this.Fo=1e4,this.YM(),this.Ik=a.sw,this.Mq=u!=null?.001*u.IH:.001,this.Lq=2220446049250313e-29},h.prototype.YM=function(){if(this.Rm!=j.FloatingPoint){var a=this.Rm==j.Integer64?m.Eg.$N:m.Eg.ZN,u=a/this.Pj,d=this.Fm+u,g=m.O.truncate((d-this.Fm)*this.Pj);g>a&&(this.Pj=a/(d-this.Fm)),u=this.Gm+u,(g=m.O.truncate((u-this.Gm)*this.Pj))>a&&(this.Pj=a/(u-this.Gm))}},h.prototype.aC=function(a){switch(a){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},h.prototype.Kn=function(a){switch(a){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},h.prototype.vz=function(a){if(this.Rm==j.FloatingPoint)return 0;switch(a){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},h.prototype.toString=function(){var a="SRPD [m_toleranceXY: "+this.Ik.toString();return(a=(a=(a=(a=(a=(a=(a=(a=(a=a+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},h}();m.ZL=p}(ye||(ye={})),function(m){function j(d,g){return 89.99999<g?g=89.99999:-89.99999>g&&(g=-89.99999),g*=.017453292519943,[111319.49079327169*d,31890685e-1*Math.log((1+Math.sin(g))/(1-Math.sin(g)))]}function T(d,g,v){return d=d/6378137*57.29577951308232,v?[d,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]:[d-360*Math.floor((d+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]}function p(d,g,v){var b=d.Of();if(d.getType()===33)g=g(b.Lg(),b.ih()),b.Cb(g[0],g[1]);else if(d.getType()===197){var C=g(d.es(),d.gs(),v);g=g(d.ds(),d.fs(),v),b.K(C[0],C[1],g[0],g[1])}else for(C=new m.h,d=0;d<b.I();d++){b.D(d,C);var M=g(C.x,C.y,v);C.ma(M[0],M[1]),b.Cb(d,C)}return b}function h(d){return p(d,T,!0)}function a(d){return p(d,j,!0)}var u=Math.PI/180;m.UK=function(){function d(){}return d.vu=function(g){var v=Math.sqrt(.006694379990197414),b=Math.sin(g.y*u);return m.h.construct(6378137*g.x*u,3.1677196636462314e6*(b/(1-.006694379990197414*b*b)-1/(2*v)*Math.log((1-v*b)/(1+v*b))))},d.Vx=function(g,v,b,C){var M=.0033528106647474805,$=Math.sin(b);b=Math.cos(b);var L=(1-M)*Math.tan(g),q=L*(g=1/Math.sqrt(1+L*L)),U=Math.atan2(L,b),ee=(L=g*$)*L,Q=1-ee,ge=27233160610754688e-5*Q/4040829998466145e-2,ve=1+ge/16384*(4096+ge*(ge*(320-175*ge)-768)),fe=ge/1024*(256+ge*(ge*(74-47*ge)-128));ge=C/(635675231424518e-8*ve);for(var Ce,Ie,Ne,Ve=2*Math.PI;1e-12<Math.abs(ge-Ve);)Ne=Math.cos(2*U+ge),Ve=ge,ge=C/(635675231424518e-8*ve)+fe*(Ce=Math.sin(ge))*(Ne+fe/4*((Ie=Math.cos(ge))*(2*Ne*Ne-1)-fe/6*Ne*(4*Ce*Ce-3)*(4*Ne*Ne-3)));return C=q*Ce-g*Ie*b,Q=M/16*Q*(4+M*(4-3*Q)),m.h.construct((v+(Math.atan2(Ce*$,g*Ie-q*Ce*b)-(1-Q)*M*L*(ge+Q*Ce*(Ne+Q*Ie*(2*Ne*Ne-1)))))/u,Math.atan2(q*Ie+g*Ce*b,(1-M)*Math.sqrt(ee+C*C))/u)},d.MM=function(g,v,b,C){var M=.0033528106647474805,$=C-v,L=Math.atan((1-M)*Math.tan(g)),q=Math.atan((1-M)*Math.tan(b)),U=Math.sin(L);L=Math.cos(L);var ee=Math.sin(q);q=Math.cos(q);var Q=$,ge=1e3;do{var ve=Math.sin(Q),fe=Math.cos(Q),Ce=Math.sqrt(q*ve*q*ve+(L*ee-U*q*fe)*(L*ee-U*q*fe));if(Ce===0)return 0;fe=U*ee+L*q*fe;var Ie=Math.atan2(Ce,fe),Ne=L*q*ve/Ce,Ve=1-Ne*Ne;ve=fe-2*U*ee/Ve,isNaN(ve)&&(ve=0);var Xe=M/16*Ve*(4+M*(4-3*Ve)),et=Q;Q=$+(1-Xe)*M*Ne*(Ie+Xe*Ce*(ve+Xe*fe*(2*ve*ve-1)))}while(1e-12<Math.abs(Q-et)&&0<--ge);return ge===0?(U=C-v,{azimuth:Math.atan2(Math.sin(U)*Math.cos(b),Math.cos(g)*Math.sin(b)-Math.sin(g)*Math.cos(b)*Math.cos(U)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(g)*Math.sin(b)+Math.cos(g)*Math.cos(b)*Math.cos(C-v))}):(v=(g=27233160610754688e-5*Ve/4040829998466145e-2)/1024*(256+g*(g*(74-47*g)-128)),{azimuth:Math.atan2(q*Math.sin(Q),L*ee-U*q*Math.cos(Q)),YQ:635675231424518e-8*(1+g/16384*(4096+g*(g*(320-175*g)-768)))*(Ie-v*Ce*(ve+v/4*(fe*(2*ve*ve-1)-v/6*ve*(4*Ce*Ce-3)*(4*ve*ve-3)))),XY:Math.atan2(L*Math.sin(Q),L*ee*Math.cos(Q)-U*q)})},d.jQ=function(g){var v=g.hasAttribute(1),b=g.hasAttribute(2),C=[],M=g.da(),$=null,L=null;v&&($=g.ub(1)),b&&(L=g.ub(2));for(var q=new m.h,U=0;U<M;U++){for(var ee=g.Ba(U),Q=g.Ja(U),ge=0,ve=0,fe=NaN,Ce=NaN,Ie=NaN,Ne=NaN,Ve=g.dc(U),Xe=[],et=ee;et<ee+Q;et++){g.D(et,q),Ne=Ie=NaN;var dt=[q.x,q.y];v&&(Ie=$.get(et),dt.push(Ie)),b&&(M=L.get(et),dt.push(Ne)),et==ee&&Ve&&(ge=q.x,ve=q.y,fe=Ie,Ce=Ne),Xe.push(dt)}!Ve||ge==q.x&&ve==q.y&&(!v||isNaN(fe)&&isNaN(Ie)||fe==Ie)&&(!b||isNaN(Ce)&&isNaN(Ne)||Ce==Ne)||Xe.push(Xe[0].slice(0)),C.push(Xe)}return C},d.Wy=function(g,v){g=d.jQ(g),637.100877141506>v&&(v=637.100877141506);for(var b,C=[],M=0;M<g.length;M++){var $,L,q=g[M];C.push(b=[]),b.push([q[0][0],q[0][1]]);var U=q[0][0]*u,ee=q[0][1]*u;for($=0;$<q.length-1;$++){var Q=q[$+1][0]*u,ge=q[$+1][1]*u;if(U!==Q||ee!==ge){Q=(ge=d.MM(ee,U,ge,Q)).azimuth;var ve=(ge=ge.YQ)/v;if(1<ve){for(L=1;L<=ve-1;L++){var fe=d.Vx(ee,U,Q,L*v);b.push([fe.x,fe.y])}L=d.Vx(ee,U,Q,(ge+Math.floor(ve-1)*v)/2),b.push([L.x,L.y])}ee=d.Vx(ee,U,Q,ge),b.push([ee.x,ee.y]),U=ee.x*u,ee=ee.y*u}}}return{qJ:C}},d.XQ=function(g){for(var v=[],b=0;b<g.length;b++){var C=g[b];C=d.Wy(C,1e4),v.push(C)}g=[];for(var M=0;M<v.length;M++){C=v[M];var $=0;for(b=0;b<C.qJ.length;b++){var L,q=C.qJ[b],U=d.vu(m.h.construct(q[0][0],q[0][1])),ee=d.vu(m.h.construct(q[q.length-1][0],q[q.length-1][1])),Q=ee.x*U.y-U.x*ee.y;for(L=0;L<q.length-1;L++)U=d.vu(m.h.construct(q[L+1][0],q[L+1][1])),Q+=(ee=d.vu(m.h.construct(q[L][0],q[L][1]))).x*U.y-U.x*ee.y;$+=Q}$/=1,g.push($/-2)}return g},d}(),m.cb=function(){function d(){}return d.xB=function(g,v,b,C,M,$,L){d.gD[g.cc()]=v,isNaN(b)==0&&(d.mD[g.cc()]=b),isNaN(C)==0&&(d.zD[g.cc()]=C),isNaN(M)==0&&(d.aD[g.cc()]=M),d.nD[g.cc()]=$,L!==null&&(d.oD[g.cc()]=L)},d.Ww=function(g,v,b){d.sD[g.cc()+"-"+v.cc()]=b},d.sc=function(g){if((g=d.gD[g.cc()])==null)throw m.i.Ie();return g},d.bf=function(g){if((g=d.mD[g.cc()])==null)throw m.i.Ie();return g},d.vv=function(g){if((g=d.zD[g.cc()])==null)throw m.i.Ie();return g},d.ev=function(g){if((g=d.aD[g.cc()])==null)throw m.i.Ie();return g},d.gh=function(g){if((g=d.oD[g.cc()])==null)throw m.i.Ie();return m.l.construct(g[0],g[1],g[2],g[3])},d.Wc=function(g){if((g=d.nD[g.cc()])==null)throw m.i.Ie();return g},d.zh=function(g,v,b){if(v.Nb(b))return g;var C=d.sD[v.cc()+"-"+b.cc()];if(C!==void 0)return C(g,v,b);throw m.i.Ie()},d.vt=function(){throw m.i.Ie()},d.bR=function(){throw m.i.Ie()},d.dW=function(){throw m.i.Ie()},d.ml=function(){throw m.i.Ie()},d.sW=function(){var g=m.Eg.create(102100),v=m.Eg.create(3857),b=m.Eg.create(4326);m.cb.xB(g,b,NaN,NaN,NaN,!1,null),m.cb.xB(b,b,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),m.cb.xB(v,b,NaN,NaN,NaN,!1,null),m.cb.Ww(g,b,h),m.cb.Ww(b,g,a),m.cb.Ww(v,b,h),m.cb.Ww(b,v,a)},d.gD=[],d.mD=[],d.zD=[],d.aD=[],d.nD=[],d.oD=[],d.sD=[],d}()}(ye||(ye={})),ye.cb.sW(),function(m){var j=function(){function T(p){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=p}return T.prototype.jd=function(p){p<this.Bl?(this.o[p*this.stride]=this.io,this.io=p):this.Bl--,this.size--},T.prototype.T=function(p,h){return this.o[p*this.stride+h]},T.prototype.S=function(p,h,a){this.o[p*this.stride+h]=a},T.prototype.Ce=function(){var p=this.io;if(p==-1){if(this.Bl==this.Hg){if(2147483647<(p=this.Hg!=0?m.O.truncate(3*(this.Hg+1)/2):1)&&(p=2147483647),p==this.Hg)throw m.i.ce();this.Dz(p)}p=this.Bl,this.Bl++}else this.io=this.o[p*this.stride];this.size++;for(var h=p*this.stride;h<p*this.stride+this.stride;h++)this.o[h]=-1;return p},T.prototype.Ll=function(p){var h=this.io;if(h==-1){if(this.Bl==this.Hg){if(2147483647<(h=this.Hg!=0?m.O.truncate(3*(this.Hg+1)/2):1)&&(h=2147483647),h==this.Hg)throw m.i.ce();this.Dz(h)}h=this.Bl,this.Bl++}else this.io=this.o[h*this.stride];this.size++;for(var a=h*this.stride,u=0;u<p.length;u++)this.o[a+u]=p[u];return h},T.prototype.mj=function(p){this.io=-1,this.size=this.Bl=0,p&&(this.o=null,this.Hg=0)},T.prototype.De=function(p){p>this.Hg&&this.Dz(p)},T.prototype.tx=function(p,h){p*=this.stride,h*=this.stride;for(var a=0;a<this.stride;a++){var u=this.o[h+a];this.o[h+a]=this.o[p+a],this.o[p+a]=u}},T.prototype.gC=function(p,h,a){var u=this.o[this.stride*h+a];this.o[this.stride*h+a]=this.o[this.stride*p+a],this.o[this.stride*p+a]=u},T.LG=function(p){return 0<=p},T.prototype.Dz=function(p){this.o==null&&(this.o=new Int32Array(0));var h=new Int32Array(this.stride*p);h.set(this.o,0),this.o=h,this.Hg=p},T}();m.$c=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",T[T.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",T[T.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",T[T.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var p=function(){function a(u){this.Be=u,this.yh=NaN,this.eH=new m.ig,this.fH=new m.ig,this.ms=new m.Nc,this.ns=new m.Nc}return a.prototype.compare=function(u,d,g){if(u=u.ja(g),this.Be.pB(d,this.eH),this.Be.pB(u,this.fH),d=this.eH.get(),u=this.fH.get(),this.ms.K(d.sa,d.pa),this.ns.K(u.sa,u.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;g=d.na==d.la;var v=u.na==u.la;if(g||v){if(g&&v)return 0;if(d.na==u.na&&d.sa==u.sa)return g?1:-1;if(d.la==u.la&&d.pa==u.pa)return g?-1:1}return(g=d.Pe(this.yh,this.ms.oa))==(v=u.Pe(this.yh,this.ns.oa))&&((v=.5*((g=Math.min(d.la,u.la))+this.yh))==this.yh&&(v=g),g=d.Pe(v,this.ms.oa),v=u.Pe(v,this.ns.oa)),g<v?-1:g>v?1:0},a.prototype.aK=function(u){this.yh=u},a}(),h=function(){function a(u){this.ib=u,this.WH=new m.ig,this.Bf=new m.h,this.wA=new m.Nc}return a.prototype.kX=function(u){this.Bf.L(u)},a.prototype.compare=function(u,d){return this.ib.pB(u.ja(d),this.WH),u=this.WH.get(),this.wA.K(u.sa,u.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(u=u.Pe(this.Bf.y,this.Bf.x),this.Bf.x<u?-1:this.Bf.x>u?1:0)},a}();j=function(){function a(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new m.Md,this.bO=2147483647,this.aO=m.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return a.prototype.yy=function(u){this.lA=u},a.prototype.Ym=function(){this.ge==null&&(this.ge=new m.$c(8));var u=this.ge.Ce();return this.ge.S(u,1,0),u},a.prototype.vU=function(){this.Kc==null&&(this.Kc=new m.$c(8));var u=this.Kc.Ce();this.Kc.S(u,2,0),this.Kc.S(u,3,0);var d=this.Kc.Ce();return this.Kc.S(d,2,0),this.Kc.S(d,3,0),this.JJ(u,d),this.JJ(d,u),u},a.prototype.mI=function(){this.ye==null&&(this.ye=new m.$c(8));var u=this.ye.Ce();return this.ye.S(u,2,0),u},a.prototype.TW=function(u,d){this.ge.S(u,7,d)},a.prototype.mn=function(u,d){this.ge.S(u,2,d)},a.prototype.SW=function(u,d){this.ge.S(u,1,d)},a.prototype.lX=function(u,d){this.ge.S(u,3,d)},a.prototype.iX=function(u,d){this.ge.S(u,4,d)},a.prototype.cr=function(u,d){this.ge.S(u,5,d)},a.prototype.eR=function(u){return this.ge.T(u,5)},a.prototype.RW=function(u,d){this.ge.S(u,6,d)},a.prototype.cN=function(u,d){this.RW(d,u)},a.prototype.IJ=function(u,d){this.Kc.S(u,1,d)},a.prototype.JJ=function(u,d){this.Kc.S(u,4,d)},a.prototype.Tl=function(u,d){this.Kc.S(u,5,d)},a.prototype.Sl=function(u,d){this.Kc.S(u,6,d)},a.prototype.$W=function(u,d){this.Kc.S(u,2,d)},a.prototype.$w=function(u,d){this.Kc.S(u,3,d)},a.prototype.LF=function(u){return this.Kc.T(u,3)},a.prototype.Gt=function(u,d){this.Kc.S(u,7,d)},a.prototype.EK=function(u,d){if(this.mm(u)!=-1)for(d=d?-1:u,u=this.mm(u);u!=-1;u=this.js(u))this.g.Ra(this.tj(u),this.Cq,d)},a.prototype.yx=function(u,d){u!=-1&&(this.EK(u,d),this.EK(this.xa(u),d))},a.prototype.Dt=function(u,d){this.ye.S(u,1,d)},a.prototype.Vg=function(u,d){this.ye.S(u,2,d)},a.prototype.jn=function(u,d){this.ye.S(u,3,d),this.NW(u,this.dR(d)),this.MW(d,u)},a.prototype.MW=function(u,d){this.ye.S(u,4,d)},a.prototype.NW=function(u,d){this.ye.S(u,5,d)},a.prototype.DJ=function(u,d){this.ye.S(u,6,d)},a.prototype.BJ=function(u,d){this.ye.S(u,7,d)},a.prototype.AJ=function(u,d){this.Yn.write(u,d)},a.prototype.CJ=function(u,d){this.kA.write(u,d)},a.prototype.kY=function(u){var d=0,g=0,v=this.AF(u),b=new m.h,C=new m.h,M=new m.h;this.Yr(v,b),C.L(b);var $=v;do this.lm($,M),g+=m.h.tb(C,M),this.$e(this.xa($))!=u&&(d+=(M.x-b.x-(C.x-b.x))*(M.y-b.y+(C.y-b.y))*.5),C.L(M),$=this.jc($);while($!=v);this.Yn.write(u,d),this.kA.write(u,g)},a.prototype.PU=function(u,d){var g=new p(this),v=new m.Yj;v.De(m.O.truncate(this.wa/2)),v.Vo(g);for(var b=new m.ia(0),C=this.$g(),M=null,$=0,L=new m.h,q=this.Re;q!=-1;q=this.Rf(q)){if(!(255&++$||d==null||d.progress(-1,-1)))throw m.i.WC();var U=this.Me(q);if(U!=-1){if(b.Bh(0),!this.gY(v,C,b,U)){this.D(q,L),g.aK(L.y);var ee=U;do{var Q=this.Ab(ee,C);Q!=-1&&(v.vd(Q,-1),this.Kb(ee,C,-2)),ee=this.jc(this.xa(ee))}while(U!=ee);ee=U;do(Q=this.Ab(ee,C))==-1&&(Q=v.addElement(ee,-1),b.add(Q)),ee=this.jc(this.xa(ee));while(U!=ee)}for(U=b.size-1;0<=U;U--)Q=b.get(U),ee=v.ja(Q),this.Kb(this.xa(ee),C,Q),this.OU(v,Q,u)}else this.cz(q)==-1&&(M==null&&(M=new h(this)),this.D(q,L),M.kX(L),ee=v.IW(M),U=this.Hl,ee!=-1&&(Q=v.ja(ee),this.$e(Q)==this.$e(this.xa(Q))&&(Q=this.OF(v,ee)),Q!=-1&&(U=this.$e(Q))),this.cN(U,q))}this.Jg(C)},a.prototype.OU=function(u,d,g){var v=u.ja(d),b=this.$e(v);if(this.Gn(b)==-1){var C=this.OF(u,d),M=this.xa(v),$=this.$e(M);this.Kp(b),this.Kp($);var L=this.Gn(b),q=this.Gn($);if(C==-1&&L==-1&&($==b?(this.jn($,this.Hl),L=q=this.Hl):(q==-1&&(this.jn($,this.Hl),q=this.Hl),this.jn(b,$),L=$)),C!=-1){var U=this.$e(C);q==-1&&(0>=this.Kp(U)?(q=this.Gn(U),this.jn($,q)):(this.jn($,U),q=U),$==b&&(L=q))}L==-1&&this.hY(b,$),g==0?this.jW(u,d,v,C,b,$):g==5?this.kW(u,d,v,M,b,$):g==4&&this.iW(v,C,b,$)}},a.prototype.jW=function(u,d,g,v,b,C){var M=this.hk(b);if(v!=-1){var $=this.hk(C),L=this.hk(this.$e(v));v=M&$&L,L^=L&this.dh(g),(L|=v)!=0&&(this.Vg(C,$|L),this.Vg(b,L|M),M=M||L)}for(d=u.lb(d);d!=-1&&(v=u.ja(d),g=this.$e(this.xa(v)),b=this.hk(g),C=this.dh(v),$=this.$e(v),v=b&(L=this.hk($))&M,M^=M&C,(M|=v)!=0);d=u.lb(d))this.Vg(g,b|M),this.Vg($,L|M)},a.prototype.kW=function(u,d,g,v,b,C){if(b!=C){g=this.Ab(g,this.cg),g+=this.Ab(v,this.cg),v=0;var M=new m.ia(0),$=new m.ia(0);$.add(0);for(var L=u.rc(-1);L!=d;L=u.lb(L)){var q=u.ja(L),U=this.xa(q),ee=this.$e(q),Q=this.$e(U);if(ee!=Q){if(q=this.Ab(q,this.cg),v+=q+=this.Ab(U,this.cg),U=!1,M.size!=0&&M.Fc()==Q&&($.If(),M.If(),U=!0),this.Gn(Q)==-1)throw m.i.Qa();U&&this.Gn(Q)==ee||($.add(v),M.add(ee))}}v+=g,M.size!=0&&M.Fc()==C&&($.If(),M.If()),v!=0?$.Fc()==0&&(u=this.g.ld,u=this.La(u),this.Vg(b,u)):$.Fc()!=0&&(u=this.g.ld,u=this.La(u),this.Vg(b,u))}},a.prototype.iW=function(u,d,g,v){var b=this.La(this.g.ld);if(d==-1)this.Vg(v,this.Go),1&(u=this.Ab(u,this.xg))?this.Vg(g,b):this.Vg(g,this.Go);else{var C=this.hk(v);C==0?(C=this.hk(this.$e(d)),this.Vg(v,C),1&(u=this.Ab(u,this.xg))?this.Vg(g,C==b?this.Go:b):this.Vg(g,C)):1&(u=this.Ab(u,this.xg))?this.Vg(g,C==b?this.Go:b):this.Vg(g,C)}},a.prototype.gY=function(u,d,g,v){var b=v,C=-1,M=-1,$=0;do{if($==2)return!1;var L=this.Ab(b,d);if(L!=-1){if(C!=-1)return!1;C=L}else{if(M!=-1)return!1;M=b}$++,b=this.jc(this.xa(b))}while(v!=b);return M!=-1&&C!=-1&&(this.Kb(u.ja(C),d,-2),u.Sj(C,M),g.add(C),!0)},a.prototype.hY=function(u,d){var g=this.Kp(u);if(g!=0){var v=this.Kp(d);0<g&&0>v||0>g&&0<v?this.jn(u,d):(d=this.Gn(d))!=-1&&this.jn(u,d)}},a.prototype.vP=function(u,d){this.Cq=this.g.Gd();for(var g=0,v=d.size;g<v;g++){var b=d.get(g),C=this.g.Pa(b,this.Cm),M=this.g.Qf(this.g.bd(b)),$=this.g.ic(M);if(m.aa.Hc($)){var L=this.g.U(b);if(L!=-1){var q=this.g.Pa(L,this.Cm);if(C!=q){var U=this.vU(),ee=this.xa(U),Q=this.jh.Ce();this.jh.S(Q,0,b),this.jh.S(Q,1,-1),this.Gt(U,Q),this.IJ(U,C),(Q=this.Me(C))==-1?(this.mn(C,U),this.Tl(U,ee),this.Sl(ee,U)):(C=this.te(Q),this.Tl(Q,ee),this.Sl(ee,Q),this.Sl(C,U),this.Tl(U,C)),this.IJ(ee,q),(C=this.Me(q))==-1?(this.mn(q,ee),this.Sl(U,ee),this.Tl(ee,U)):(q=this.te(C),this.Tl(C,U),this.Sl(U,C),this.Sl(q,ee),this.Tl(ee,q)),M=this.La(M),u==0?(this.Kb(ee,this.ae,0),this.Kb(U,this.ae,$==1736?M:0)):u==5?(q=new m.h,this.g.D(b,q),b=new m.h,this.g.D(L,b),C=L=0,0>q.compare(b)?L=1:C=-1,this.Kb(ee,this.ae,0),this.Kb(U,this.ae,0),this.Kb(U,this.cg,L),this.Kb(ee,this.cg,C)):u==7?(this.Kb(ee,this.ae,this.Go),this.Kb(U,this.ae,$==1736?M:0)):u==4&&(this.Kb(ee,this.ae,0),this.Kb(U,this.ae,0),this.Kb(U,this.xg,1),this.Kb(ee,this.xg,1)),$=$==1736?this.aO:0,this.$w(U,M|$),this.$w(ee,M|$)}}}}},a.prototype.VT=function(u,d){var g=this.mm(d);if(g!=-1){var v=this.mm(u);this.jh.S(g,1,v),this.Gt(u,g),this.Gt(d,-1)}u=this.xa(u),d=this.xa(d),(g=this.mm(d))!=-1&&(v=this.mm(u),this.jh.S(g,1,v),this.Gt(u,g),this.Gt(d,-1))},a.prototype.IX=function(u){function d(Ie,Ne){return v.HO(Ie,Ne)}var g=new m.ia(0);g.Jb(10);for(var v=this,b=this.Re;b!=-1;b=this.Rf(b)){g.clear(!1);var C=this.Me(b);if(C!=-1){var M=C;do g.add(M),M=this.jc(this.xa(M));while(M!=C);if(1<g.size){if(M=!0,2<g.size)g.Vd(0,g.size,d),g.add(g.get(0));else if(0<this.GO(g.get(0),g.get(1))){var $=g.get(0);g.set(0,g.get(1)),g.set(1,$)}else M=!1;for(var L=$=g.get(0),q=this.uf(L),U=this.xa(L),ee=-1,Q=1,ge=g.size;Q<ge;Q++){var ve=g.get(Q),fe=this.xa(ve),Ce=this.jk(fe);if(Ce==q&&ve!=L){if(u==0)ee=this.LF(L)|this.LF(ve),this.$w(L,ee),this.$w(U,ee),this.Kb(L,this.ae,this.Ab(L,this.ae)|this.Ab(ve,this.ae)),this.Kb(U,this.ae,this.Ab(U,this.ae)|this.Ab(fe,this.ae));else if(this.cg!=-1)ee=this.Ab(L,this.cg)+this.Ab(ve,this.cg),fe=this.Ab(U,this.cg)+this.Ab(fe,this.cg),this.Kb(L,this.cg,ee),this.Kb(U,this.cg,fe);else{if(u==7)return void(this.Ni=new m.Md(5,b,-1));this.xg!=-1&&(ee=this.Ab(L,this.xg)+this.Ab(ve,this.xg),fe=this.Ab(U,this.xg)+this.Ab(fe,this.xg),this.Kb(L,this.xg,ee),this.Kb(U,this.xg,fe))}this.VT(L,ve),this.Ly(ve),ee=L,g.set(Q,-1),ve==$&&(g.set(0,-1),$=-1)}else this.yx(ee,!1),ee=-1,L=ve,q=Ce,U=fe}if(this.yx(ee,!1),ee=-1,M){for($=-1,Q=0,ge=g.size;Q<ge;Q++)if((ve=g.get(Q))!=-1){if($==-1)L=$=ve,q=this.uf(L),U=this.xa(L);else if(ve!=L&&(fe=this.xa(ve),Ce=this.jk(fe),this.Sl(U,ve),this.Tl(ve,U),L=ve,q=Ce,U=fe,u==7&&(this.Ab(ve,this.ae)|this.Ab(this.te(ve),this.ae))==(1|this.Go)))return void(this.Ni=new m.Md(5,b,-1))}this.mn(b,$)}else{for($=-1,Q=0,ge=g.size;Q<ge;Q++)if((ve=g.get(Q))!=-1){$=ve;break}C!=$&&this.mn(b,$)}}}}},a.prototype.WN=function(){for(var u=-1,d=this.$g(),g=this.Re;g!=-1;g=this.Rf(g)){var v=this.Me(g);if(v!=-1){var b=v;do{if(this.Ab(b,d)!=1){var C=this.mI();this.Dt(C,b),this.BJ(C,u),u!=-1&&this.DJ(u,C),u=C;var M=0,$=b;do M|=this.Ab($,this.ae),this.$W($,C),this.Kb($,d,1),$=this.jc($);while($!=b);this.Vg(C,M)}b=this.jc(this.xa(b))}while(b!=v)}}C=this.mI(),this.Dt(C,-1),this.BJ(C,u),u!=-1&&this.DJ(u,C),this.Hl=C,this.Yn=m.be.qf(this.ye.size,NaN),this.kA=m.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(d)},a.prototype.sR=function(u,d,g){if((d=d!=-1?d:this.Me(u))==-1)return-1;for(u=d;;){if(this.Ab(d,g)!=1)return d;if((d=this.jc(this.xa(d)))==u)return-1}},a.prototype.yW=function(){for(var u=this.$g(),d=this.Re;d!=-1;d=this.Rf(d))for(var g=-1;;){var v=this.sR(d,g,u);if(v==-1)break;g=this.jc(this.xa(v));for(var b=v;;){var C=this.jc(b),M=this.te(b),$=this.xa(b);if(M==$){if(this.IP(b),g!=b&&g!=$||(g=-1),b==v||M==v){if(b==(v=C)||M==v)break;b=C;continue}}else this.Kb(b,u,1);if((b=C)==v)break}}this.Jg(u)},a.prototype.MB=function(u,d,g,v,b){this.Ug(),this.gH=b,this.g=u,this.Bq=this.g.aF(),(u=new m.ia(0)).Jb(g!=null?this.g.I(g.get(0)):this.g.fd);var C=0,M=1,$=g!=null?g.get(0):this.g.ld;for(b=1;$!=-1;){this.g.HJ($,this.Bq,M),M<<=1;for(var L=this.g.Ob($);L!=-1;L=this.g.Rb(L))for(var q=this.g.Xa(L),U=0,ee=this.g.Ja(L);U<ee;U++)u.add(q),q=this.g.U(q);m.aa.Rn(this.g.ic($))||(C+=this.g.da($)),g!=null?($=b<g.size?g.get(b):-1,b++):$=this.g.ue($)}for(this.Go=M,this.wa=u.size,this.g.nx(u,this.wa),this.jh==null&&(this.jh=new m.$c(2),this.ge=new m.$c(8),this.Kc=new m.$c(8),this.ye=new m.$c(8)),this.jh.De(this.wa),m.mp.zp(v),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,C)),this.Cm=this.g.Gd(),g=new m.h,b=0,C=new m.h,g.Rc(),M=0;M<=this.wa;M++)if(M<this.wa?(q=u.get(M),this.g.D(q,C)):C.Rc(),!g.qb(C)){if(b<M){for(q=this.Ym(),ee=U=-1;b<M;b++)ee=u.get(b),this.g.Ra(ee,this.Cm,q),$=this.jh.Ce(),this.jh.S($,0,ee),this.jh.S($,1,U),U=$,L=this.g.bd(ee),$=this.g.Qf(L),$=this.La($),this.SW(q,this.xd(q)|$);this.TW(q,U),this.cr(q,this.g.Ua(ee)),this.Os!=-1&&this.iX(this.Os,q),this.lX(q,this.Os),this.Os=q,this.Re==-1&&(this.Re=q)}b=M,g.L(C)}m.mp.zp(v),this.ae=this.$g(),d==5&&(this.cg=this.$g()),d==4&&(this.xg=this.$g()),this.vP(d,u),this.Ni.Jj==0&&(this.IX(d),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(d,v))):this.pA=!0))},a.prototype.Ly=function(u){var d=this.jc(u),g=this.te(u),v=this.xa(u),b=this.jc(v),C=this.te(v);d!=v&&(this.Sl(C,d),this.Tl(d,C)),g!=v&&(this.Sl(g,b),this.Tl(b,g)),g=this.jk(u),this.Me(g)==u&&(b!=u?this.mn(g,b):this.mn(g,-1)),b=this.jk(v),this.Me(b)==v&&(d!=v?this.mn(b,d):this.mn(b,-1)),this.Kc.jd(u),this.Kc.jd(v)},a.prototype.OF=function(u,d){for(;;){if((d=u.we(d))==-1)return-1;var g=u.ja(d);if(this.$e(g)!=this.$e(this.xa(g)))return g}},a.prototype.dr=function(u,d){var g;g===void 0&&(g=!0),this.MB(u,0,null,d,g)},a.prototype.vJ=function(u,d,g){var v=new m.ia(0);v.add(d),this.MB(u,4,v,g,u.ic(d)==1736)},a.prototype.wJ=function(u,d,g){var v=new m.ia(0);v.add(d),this.MB(u,5,v,g,!0)},a.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},a.prototype.Me=function(u){return this.ge.T(u,2)},a.prototype.D=function(u,d){this.g.dG(this.eR(u),d)},a.prototype.xd=function(u){return this.ge.T(u,1)},a.prototype.Rf=function(u){return this.ge.T(u,4)},a.prototype.cz=function(u){return this.ge.T(u,6)},a.prototype.km=function(u){return this.ge.T(u,7)},a.prototype.js=function(u){return this.jh.T(u,1)},a.prototype.tj=function(u){return this.jh.T(u,0)},a.prototype.ng=function(u,d){return(d=this.Di[d]).size<=u?-1:d.read(u)},a.prototype.nn=function(u,d,g){(d=this.Di[d]).size<=u&&d.resize(this.ge.size,-1),d.write(u,g)},a.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var u=m.ia.qf(this.ge.Hg,-1),d=0,g=this.Di.length;d<g;d++)if(this.Di[d]==null)return this.Di[d]=u,d;return this.Di.push(u),this.Di.length-1},a.prototype.Ep=function(u){this.Di[u]=null},a.prototype.jk=function(u){return this.Kc.T(u,1)},a.prototype.uf=function(u){return this.jk(this.xa(u))},a.prototype.xa=function(u){return this.Kc.T(u,4)},a.prototype.te=function(u){return this.Kc.T(u,5)},a.prototype.jc=function(u){return this.Kc.T(u,6)},a.prototype.$e=function(u){return this.Kc.T(u,2)},a.prototype.af=function(u){return this.hk(this.Kc.T(u,2))},a.prototype.mm=function(u){return this.Kc.T(u,7)},a.prototype.Yr=function(u,d){this.D(this.jk(u),d)},a.prototype.lm=function(u,d){this.D(this.uf(u),d)},a.prototype.dh=function(u){return this.Kc.T(u,3)&this.bO},a.prototype.Ab=function(u,d){return(d=this.Gi[d]).size<=u?-1:d.read(u)},a.prototype.Kb=function(u,d,g){(d=this.Gi[d]).size<=u&&d.resize(this.Kc.size,-1),d.write(u,g)},a.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var u=m.ia.qf(this.Kc.Hg,-1),d=0,g=this.Gi.length;d<g;d++)if(this.Gi[d]==null)return this.Gi[d]=u,d;return this.Gi.push(u),this.Gi.length-1},a.prototype.Jg=function(u){this.Gi[u]=null},a.prototype.IP=function(u){var d=this.$e(u),g=this.xa(u),v=this.jc(u);v==g&&(v=this.jc(v))==u&&(v=-1);var b=this.AF(d);b!==u&&b!=g||this.Dt(d,v),g=this.Yn.read(d),isNaN(g)||(this.AJ(d,NaN),this.CJ(d,NaN)),this.yx(u,!0),this.Ly(u)},a.prototype.JP=function(u){for(var d=0,g=u.size;d<g;d++){var v=u.get(d),b=this.$e(this.xa(v));this.Dt(this.$e(v),-1),this.Dt(b,-1),this.yx(v,!0),this.Ly(v)}},a.prototype.AF=function(u){return this.ye.T(u,1)},a.prototype.hk=function(u){return this.ye.T(u,2)},a.prototype.Gn=function(u){return this.ye.T(u,3)},a.prototype.dR=function(u){return this.ye.T(u,4)},a.prototype.Kp=function(u){var d=this.Yn.read(u);return isNaN(d)&&(this.kY(u),d=this.Yn.read(u)),d},a.prototype.La=function(u){return this.g.KF(u,this.Bq)},a.prototype.Le=function(u){return this.g.Pa(u,this.Cm)},a.prototype.uR=function(u){return this.g.Pa(u,this.Cq)},a.prototype.tR=function(u,d){var g=this.Me(u);if(g==-1)return-1;var v=g,b=-1,C=-1;do{if(this.uf(v)==d)return v;if(b==-1){if((b=this.Me(d))==-1)break;C=b}if(this.uf(C)==u)return this.xa(C);v=this.jc(this.xa(v)),C=this.jc(this.xa(C))}while(v!=g&&C!=b);return-1},a.prototype.pB=function(u,d){d.Or(),d=d.get();var g=new m.h;this.Yr(u,g),d.Dc(g),this.lm(u,g),d.Qc(g)},a.prototype.HO=function(u,d){if(u==d)return 0;var g=new m.h;this.lm(u,g);var v=new m.h;return this.lm(d,v),g.qb(v)?0:(d=new m.h,this.Yr(u,d),(u=new m.h).uc(g,d),(g=new m.h).uc(v,d),m.h.nu(u,g))},a.prototype.GO=function(u,d){if(u==d)return 0;var g=new m.h;this.lm(u,g);var v=new m.h;return this.lm(d,v),g.qb(v)?0:(d=new m.h,this.Yr(u,d),(u=new m.h).uc(g,d),(g=new m.h).uc(v,d),0<=g.y&&0<u.y?m.h.nu(u,g):0)},a.prototype.xO=function(){for(var u=m.lc.ox(this.lA),d=new m.h,g=new m.h,v=new m.h,b=new m.h,C=new m.h,M=this.Re;M!=-1;M=this.Rf(M)){var $=this.Me(M);if($!=-1){var L=$;this.Yr(L,d),this.lm(L,g),C.uc(g,d);var q=C.Sk();do{var U=L;if((L=this.jc(this.xa(L)))!=U){this.lm(L,v),b.uc(v,d),U=b.Sk();var ee=b.wi(C);if(ee*ee/(U*q)*Math.min(U,q)<=u)return!1;C.L(b),q=U,g.L(v)}}while(L!=$)}}return!0},a}(),m.iu=j}(ye||(ye={})),function(m){var j=function(){function T(){this.j=null,this.oH=new m.h,this.pH=new m.h,this.Gj=null,this.Mv=!1,this.tl=-1}return T.prototype.cf=function(p){return p<this.Gj.length&&this.Gj[p]},T.prototype.dl=function(p,h,a,u){var d=m.aa.tf(this.j.g.ic(a));if(m.aa.tf(this.j.g.ic(h))!=2||d!=1)throw m.i.Qa();this.FP(p,h,a,u)},T.prototype.dr=function(p,h){this.j==null&&(this.j=new m.iu),this.j.dr(p,h)},T.prototype.Ft=function(p,h,a){for(m.Tk.V(p,h,a,!0),h=p.ld;h!=-1;h=p.ue(h))p.ic(h)==1736&&m.rn.V(p,h,-1,this.Mv,a);this.dr(p,a)},T.prototype.ME=function(p,h,a,u,d){var g=this.j.g;if(g.ic(p)==1736)for(p=g.Ob(p);p!=-1;p=g.Rb(p)){var v=g.Xa(p);this.j.Le(v),this.j.Le(g.U(v));var b=this.j.uR(v);if(b!=-1){var C=this.j.Ab(b,a);if(C!=1&&C!=2)if(this.cf(this.j.af(b))){this.j.Kb(b,a,1),C=g.vf(h,-1);var M=b,$=this.j.Le(v),L=1;do{var q=this.sm(v,d);g.ij(C,q),u!=-1&&this.j.nn($,u,1),this.j.Kb(M,a,1),M=this.j.jc(M);do var U=(q=L==1?g.U(v):g.Ma(v))!=-1?this.j.Le(q):-1;while(U==$);var ee=this.j.jk(M);if(ee!=U){do U=(q=L==1?g.Ma(v):g.U(v))!=-1?this.j.Le(q):-1;while(U==$);ee!=U?(U=ee,q=this.j.tj(this.j.km(U))):L=-L}$=U,v=q}while(M!=b);g.kn(C,!0)}else this.j.Kb(b,a,2)}}},T.prototype.eF=function(){for(var p=this.j.$g(),h=new m.ia(0),a=this.j.Re;a!=-1;a=this.j.Rf(a)){var u=this.j.Me(a),d=u;if(u!=-1)do{if(this.j.Ab(d,p)!=1){var g=this.j.xa(d);this.j.Kb(g,p,1),this.j.Kb(d,p,1),this.cf(this.j.af(d))&&this.cf(this.j.af(g))&&h.add(d)}d=this.j.jc(this.j.xa(d))}while(d!=u)}this.j.Jg(p),this.j.JP(h)},T.prototype.sm=function(p,h){return h==-1?p:this.aS(p,h)},T.prototype.aS=function(p,h){var a=this.j.g,u=this.j.km(this.j.Le(p));do{var d=this.j.tj(u);if(a.Qf(a.bd(d))==h)return d;u=this.j.js(u)}while(u!=-1);return p},T.prototype.Ot=function(p,h,a){this.eF();var u=this.j.g,d=u.Ig(1736),g=this.j.$g();return this.uK(p,h,d,a,g,-1),this.j.Jg(g),m.rn.V(u,d,1,this.Mv,null),d},T.prototype.uK=function(p,h,a,u,d,g){for(this.ME(p,a,d,g,u),h!=-1&&this.ME(h,a,d,g,u),p=this.j.g,h=this.j.Re;h!=-1;h=this.j.Rf(h)){var v=this.j.Me(h);if(v!=-1){var b=v;do{var C=this.j.Ab(b,d);if(C!=1&&C!=2)if(this.cf(this.j.af(b))){C=p.vf(a,-1);var M=b;do{var $=this.j.mm(M);$!=-1?$=this.j.tj($):($=this.j.tj(this.j.mm(this.j.xa(M))),$=this.j.g.U($)),$=this.sm($,u),p.ij(C,$),this.j.Kb(M,d,1),g!=-1&&($=this.j.Le($),this.j.nn($,g,1)),M=this.j.jc(M)}while(M!=b);p.kn(C,!0)}else this.j.Kb(b,d,2);b=this.j.jc(this.j.xa(b))}while(b!=v)}}},T.prototype.aY=function(p,h,a){var u=this.j.g,d=u.Ig(1736),g=u.Ig(1607),v=u.Ig(550);this.eF();var b=-1,C=this.j.$g(),M=this.j.Dp();for(this.uK(p,h,d,a,C,M),p=this.j.Re;p!=-1;p=this.j.Rf(p))if((h=this.j.Me(p))!=-1){var $=h;do{var L=this.j.Ab($,C),q=this.j.Ab(this.j.xa($),C);if((L|=q)==2)if(L=this.j.dh($),this.cf(L)){var U=u.vf(g,-1),ee=$;L=this.Yw(p,u),L=this.sm(L,a),u.ij(U,L),this.j.nn(p,M,1);do{if(L=this.j.uf(ee),q=this.Yw(L,u),q=this.sm(q,a),u.ij(U,q),this.j.Kb(ee,C,1),this.j.Kb(this.j.xa(ee),C,1),this.j.nn(L,M,1),ee=this.j.jc(ee),L=this.j.Ab(ee,C),(L|=q=this.j.Ab(this.j.xa(ee),C))!=2)break;if(L=this.j.dh(ee),!this.cf(L)){this.j.Kb(ee,C,1),this.j.Kb(this.j.xa(ee),C,1);break}}while(ee!=$)}else this.j.Kb($,C,1),this.j.Kb(this.j.xa($),C,1);$=this.j.jc(this.j.xa($))}while($!=h)}for(p=this.j.Re;p!=-1;p=this.j.Rf(p))(L=this.j.ng(p,M))!=1&&(L=this.j.xd(p),this.cf(L)&&(b==-1&&(b=u.vf(v,-1)),(h=this.j.km(p))!=-1&&(h=this.j.tj(h),L=this.sm(h,a),u.ij(b,L))));return this.j.Ep(M),this.j.Jg(C),m.rn.V(u,d,1,this.Mv,null),(a=[])[0]=v,a[1]=g,a[2]=d,a},T.prototype.Yw=function(p,h){var a=-1;for(p=this.j.km(p);p!=-1;p=this.j.js(p)){var u=this.j.tj(p);a==-1&&(a=u);var d=this.j.La(h.Qf(h.bd(u)));if(this.cf(d)){a=u;break}}return a},T.prototype.lB=function(p,h){for(var a=this.jl(h),u=this.j.jk(h),d=this.j.uf(h),g=0,v=0,b=this.j.km(u);b!=-1;b=this.j.js(b)){var C=this.j.tj(b),M=p.bd(C),$=this.j.La(p.Qf(M));M=p.Xa(M),($=!!($&a))&&M==C&&(this.tl=h);var L=p.U(C);L!=-1&&this.j.Le(L)==d?(g++,$&&(this.tl===-1&&M==L&&(C=this.j.jc(h),this.cf(this.jl(C))&&(this.tl=C)),v++)):(C=p.Ma(C))!=-1&&this.j.Le(C)==d&&(g--,$&&(this.tl===-1&&M===C&&(C=this.j.jc(h),this.cf(this.jl(C))&&(this.tl=C)),v--))}return this.j.D(u,this.oH),this.j.D(d,this.pH),(v!=0?v:g)*(p=m.h.tb(this.oH,this.pH))},T.prototype.jl=function(p){return this.j.dh(p)|this.j.af(p)|this.j.af(this.j.xa(p))},T.prototype.xK=function(p){for(var h=this.j.xa(this.j.te(p)),a=-1;h!=p;){if(this.cf(this.jl(h))){if(a!=-1)return-1;a=h}h=this.j.xa(this.j.te(h))}return a!=-1?this.j.xa(a):-1},T.prototype.yK=function(p){for(var h=this.j.xa(this.j.jc(p)),a=-1;h!=p;){if(this.cf(this.jl(h))){if(a!=-1)return-1;a=h}h=this.j.xa(this.j.jc(h))}return a!=-1?this.j.xa(a):-1},T.prototype.mJ=function(p,h,a,u,d){var g=this.j.g,v=p,b=this.j.xa(v);this.j.Kb(v,a,1),this.j.Kb(b,a,1),this.tl=-1;for(var C=this.lB(g,v),M=v,$=-1,L=!1,q=1;;){var U=this.j.te(v);if(U==b)break;if(b=this.j.jc(b),this.j.xa(U)!=b){if((v=this.xK(v))==-1){L=!0;break}b=this.j.xa(v)}else v=U;if(v==p){$=p;break}if(U=this.jl(v),!this.cf(U))break;this.j.Kb(v,a,1),this.j.Kb(b,a,1),M=v,C+=this.lB(g,v),q++}if($==-1)for(v=p,b=this.j.xa(v),$=v;(p=this.j.jc(v))!=b;){if(b=this.j.te(b),this.j.xa(p)!=b){if((v=this.yK(v))==-1){L=!0;break}b=this.j.xa(v)}else v=p;if(U=this.jl(v),!this.cf(U))break;this.j.Kb(v,a,1),this.j.Kb(b,a,1),$=v,C+=this.lB(g,v),q++}else if(this.tl!=-1&&(M=this.tl,$=this.j.te(this.tl),this.j.xa($)!=this.j.jc(this.j.xa(M))&&($=this.xK(M))==-1))throw m.i.Qa();for(0<=C||(v=$,$=this.j.xa(M),M=this.j.xa(v)),a=g.vf(h,-1),v=M,M=this.j.jk(M),L=this.j.uf($)==M&&L,C=this.Yw(M,g),C=this.sm(C,d),g.ij(a,C),u!=-1&&this.j.nn(M,u,1),M=0,q=L?m.O.truncate((q+1)/2):-1;p=this.j.uf(v),C=this.Yw(p,g),C=this.sm(C,d),g.ij(a,C),M++,u!=-1&&this.j.nn(p,u,1),L&&M==q&&(a=g.vf(h,-1),g.ij(a,C)),v!=$;)if(p=this.j.jc(v),this.j.te(this.j.xa(v))!=this.j.xa(p)){if((v=this.yK(v))==-1)throw m.i.Qa()}else v=p},T.prototype.Pt=function(p){for(var h=this.j.g.Ig(1607),a=this.j.$g(),u=this.j.Re;u!=-1;u=this.j.Rf(u)){var d=this.j.Me(u),g=d;do this.j.Ab(g,a)!=1&&this.cf(this.jl(g))&&this.mJ(g,h,a,-1,p),g=this.j.jc(this.j.xa(g));while(g!=d)}return this.j.Jg(a),h},T.prototype.bY=function(p){for(var h=this.j.g,a=h.Ig(1607),u=h.Ig(550),d=this.j.$g(),g=this.j.Dp(),v=-1,b=this.j.Re;b!=-1;b=this.j.Rf(b)){var C=this.j.Me(b),M=C;do{var $=this.j.Ab(M,d);$!=1&&($=this.jl(M),this.cf($)&&this.mJ(M,a,d,g,p)),M=this.j.jc(this.j.xa(M))}while(M!=C)}for(b=this.j.Re;b!=-1;b=this.j.Rf(b))($=this.j.ng(b,g))!=1&&($=this.j.xd(b),this.cf($)&&(v==-1&&(v=h.vf(u,-1)),(C=this.j.km(b))!=-1&&(C=this.j.tj(C),C=this.sm(C,p),h.ij(v,C))));return this.j.Jg(d),this.j.Ep(g),(p=[])[0]=u,p[1]=a,p},T.prototype.mr=function(){for(var p=this.j.g,h=p.Ig(550),a=p.vf(h,-1),u=this.j.Re;u!=-1;u=this.j.Rf(u))if(this.cf(this.j.xd(u))){for(var d=-1,g=this.j.km(u);g!=-1;g=this.j.js(g)){var v=this.j.tj(g);d==-1&&(d=v);var b=this.j.La(p.Qf(p.bd(v)));if(this.cf(b)){d=v;break}}p.ij(a,d)}return h},T.prototype.bq=function(p){this.Gj=[];for(var h=0;h<p;h++)this.Gj[h]=!1},T.aW=function(p,h,a){var u=p.Ia(),d=Array(1e3);m.O.$u(d,null);var g=m.O.lg(1e3,0),v=p.I(),b=!0,C=h.Db()==2;if(h.Db()!=1&&h.Db()!=2)throw m.i.Qa();for(var M=0;M<v;){var $=m.O.truncate(p.lW(d,M)-M);C?m.hd.sK(h,d,$,a,g):m.hd.tK(h,d,$,a,g);for(var L=0,q=0;q<$;q++)g[q]==0&&(b&&(b=!1,u.Fd(p,0,M)),L!=q&&u.Fd(p,M+L,M+q),L=q+1);b||L==$||u.Fd(p,M+L,M+$),M+=$}return b?p:u},T.zG=function(p,h,a){return p instanceof m.de?T.aW(p,h,a):h instanceof m.Sa?p.B()||h.B()?p.Ia():m.Tk.zU(a,p,h)?m.Tk.CO(p,h):p.Ia():T.bW(p,h,a)},T.Av=function(p,h,a,u){var d=new m.l;p.A(d);var g=new m.l;h.A(g);var v=new m.l;if(v.K(d),v.Zb(g),a=m.ta.Wd(a,v,!0),(v=new m.l).K(g),g=m.ta.Er(a),v.W(g,g),!d.isIntersecting(v)){if(p.Db()<=h.Db())return T.ki(T.Xe(p.Ia()),p,"&");if(p.Db()>h.Db())return T.ki(T.Xe(h.Ia()),p,"&")}return g=new T,v=(d=new m.gd).Ib(T.Xe(p)),h=d.Ib(T.Xe(h)),g.Ft(d,a,u),u=g.Av(v,h),p=T.ki(d.Ne(u),p,"&"),m.aa.Hc(p.getType())&&(p.Ch(2,a),p.getType()==1736&&p.fm()),p},T.bW=function(p,h,a){if(p.B()||h.B())return p.Ia();var u=[null],d=[0],g=h.Db()==2;if(h.Db()!=1&&h.Db()!=2)throw m.i.Qa();return u[0]=p.D(),g?m.hd.sK(h,u,1,a,d):m.hd.tK(h,u,1,a,d),d[0]==0?p.Ia():p},T.prototype.LU=function(p,h,a,u,d){if(p.B())return p;var g=new m.gd;return p=g.Ib(p),this.Mk(g,p,h,a,u,d)},T.prototype.NU=function(p,h,a,u,d,g){if(d&&p.ic(h)!=550){var v=new m.RC;v.TX(p,a),v.Ng?(m.Tk.V(p,a,g,!0),d=!1):this.j.yy(a)}else m.Tk.V(p,a,g,!0),d=!1;if(u&&p.ic(h)!=550?this.j.wJ(p,h,g):this.j.vJ(p,h,g),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(p,h,a,u,!1,g);if(this.j.yy(NaN),g=this.j.La(h),this.bq(g+1),this.Gj[g]=!0,p.ic(h)==1736||u&&p.ic(h)!=550)return p.Yo(h,0),h=this.Ot(h,-1,-1),(p=p.Ne(h)).Yo(0),d?p.Ch(1,0):(p.Ch(2,a),p.fm()),p;if(p.ic(h)==1607)return h=this.Pt(-1),p=p.Ne(h),d||p.Ch(2,a),p;if(p.ic(h)==550)return h=this.mr(),p=p.Ne(h),d||p.Ch(2,a),p;throw m.i.Qa()},T.prototype.Mk=function(p,h,a,u,d,g){this.j=new m.iu;try{return this.NU(p,h,a,u,d,g)}finally{this.j.Ug()}},T.Mk=function(p,h,a,u,d){return new T().LU(p,h,a,u,d)},T.prototype.MU=function(p,h,a,u){this.Mv=p,this.j=new m.iu,p=h.In(a);var d=h.ic(a);if(p!=1||d==550?this.j.vJ(h,a,u):this.j.wJ(h,a,u),!this.j.pA)if(this.j.yy(NaN),u=this.j.La(a),this.bq(u+1),this.Gj[u]=!0,h.ic(a)==1736||p==1&&h.ic(a)!=550)h.Yo(a,0),u=this.Ot(a,-1,-1),h.hC(u,a),h.BB(u);else if(h.ic(a)==1607)u=this.Pt(-1),h.hC(u,a),h.BB(u);else{if(h.ic(a)!=550)throw m.i.fa("internal error");u=this.mr(),h.hC(u,a),h.BB(u)}},T.prototype.im=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),u=m.aa.tf(this.j.g.ic(h));if(a>u)return p;var d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)]=!0,a==2&&u==2)return this.Ot(p,h,-1);if(a==1&&u==2||a==1&&u==1)return this.Pt(-1);if(a==0)return this.mr();throw m.i.Qa()},T.prototype.Av=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),u=m.aa.tf(this.j.g.ic(h)),d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)|this.j.La(h)]=!0,d=-1,1<this.j.g.ht.Aa&&(d=p),a==2&&u==2)return this.Ot(p,h,d);if(a==1&&0<u||u==1&&0<a)return this.Pt(d);if(a==0||u==0)return this.mr();throw m.i.Qa()},T.prototype.Pz=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),u=m.aa.tf(this.j.g.ic(h)),d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)|this.j.La(h)]=!0,d=-1,1<this.j.g.ht.Aa&&(d=p),a==2&&u==2)return this.aY(p,h,d);if(a==1&&0<u||u==1&&0<a)return this.bY(d);if(a==0||u==0)return(p=[])[0]=this.mr(),p;throw m.i.Qa()},T.prototype.ep=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),u=m.aa.tf(this.j.g.ic(h)),d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)]=!0,this.Gj[this.j.La(h)]=!0,a==2&&u==2)return this.Ot(p,h,-1);if(a==1&&u==1)return this.Pt(-1);if(a==0&&u==0)return this.mr();throw m.i.Qa()},T.Xe=function(p){var h=p.getType();return h==197?(h=new m.Da(p.description),p.B()||h.ad(p,!1),h):h==33?(h=new m.de(p.description),p.B()||h.add(p),h):h==322?(h=new m.Ta(p.description),p.B()||h.oc(p,!0),h):p},T.ki=function(p,h,a){var u=p.getType();return u==197?(h=new m.Da(p.description),p.B()||h.ad(p,!1),h):u!=33||a!="|"&&a!="^"?u==322?(h=new m.Ta(p.description),p.B()||h.oc(p,!0),h):u==33&&a=="-"&&h.getType()==33||u==550&&a=="&"&&h.getType()==33?(h=new m.Sa(p.description),p.B()||p.ve(0,h),h):p:(h=new m.de(p.description),p.B()||h.add(p),h)},T.im=function(p,h,a,u){if(p.B()||h.B()||p.Db()>h.Db())return T.ki(T.Xe(p),p,"-");var d=new m.l;p.A(d);var g=new m.l;if(h.A(g),!d.isIntersecting(g))return T.ki(T.Xe(p),p,"-");var v=new m.l;return v.K(d),v.Zb(g),a=m.ta.Wd(a,v,!0),g=new T,v=(d=new m.gd).Ib(T.Xe(p)),h=d.Ib(T.Xe(h)),g.Ft(d,a,u),u=g.im(v,h),u=d.Ne(u),p=T.ki(u,p,"-"),m.aa.Hc(p.getType())&&(p.Ch(2,a),p.getType()==1736&&p.fm()),p},T.VP=function(p,h,a){if(2>p.length)throw m.i.N("not enough geometries to dissolve");for(var u=0,d=0,g=p.length;d<g;d++)u=Math.max(p[d].Db(),u);var v=new m.l;v.Oa();var b=new m.gd,C=-1,M=0,$=-1;for(d=0,g=p.length;d<g;d++)if(p[d].Db()==u)if(p[d].B())$==-1&&($=d);else{$=d,C==-1?C=b.Ib(T.Xe(p[d])):b.uN(C,T.Xe(p[d]));var L=new m.l;p[d].xc(L),v.Zb(L),M++}return 2>M?T.Xe(p[$]):(p=u==2,h=m.ta.Wd(u==0?h:null,v,!0),new T().Mk(b,C,h,p,!0,a))},T.Pz=function(p,h,a,u){var d=[null,null,null],g=new m.l;p.A(g);var v=new m.l;h.A(v);var b=new m.l;if(b.K(g),b.Zb(v),a=m.ta.Wd(a,b,!0),(b=new m.l).K(v),v=m.ta.Er(a),b.W(v,v),!g.isIntersecting(b)){if(p.Db()<=h.Db())return d[(p=T.ki(T.Xe(p.Ia()),p,"&")).Db()]=p,d;if(p.Db()>h.Db())return d[(p=T.ki(T.Xe(h.Ia()),p,"&")).Db()]=p,d}for(v=new T,b=(g=new m.gd).Ib(T.Xe(p)),h=g.Ib(T.Xe(h)),v.Ft(g,a,u),u=v.Pz(b,h),h=0;h<u.length;h++)v=T.ki(g.Ne(u[h]),p,"&"),m.aa.Hc(v.getType())&&(v.Ch(2,a),v.getType()==1736&&v.fm()),d[v.Db()]=v;return d},T.ep=function(p,h,a,u){if(p.Db()>h.Db())return T.ki(T.Xe(p),p,"^");if(p.Db()<h.Db()||p.B())return T.ki(T.Xe(h),p,"^");if(h.B())return T.ki(T.Xe(p),p,"^");var d=new m.l;p.A(d);var g=new m.l;h.A(g);var v=new m.l;return v.K(d),v.Zb(g),a=m.ta.Wd(a,v,!0),g=new T,v=(d=new m.gd).Ib(T.Xe(p)),h=d.Ib(T.Xe(h)),g.Ft(d,a,u),u=g.ep(v,h),p=T.ki(d.Ne(u),p,"^"),m.aa.Hc(p.getType())&&(p.Ch(2,a),p.getType()==1736&&p.fm()),p},T.prototype.LQ=function(p,h){var a=this.j.g;p=a.vf(p,-1);for(var u=h.size,d=0;d<u;d++){var g=h.get(d);a.ij(p,g)}a.kn(p,!0)},T.prototype.aX=function(p,h){for(var a=this.j.g,u=a.ld;u!=-1;u=a.ue(u))if(u==h)for(var d=a.Ob(u);d!=-1;d=a.Rb(d)){var g=a.Xa(d);if(g!=-1)for(var v=a.U(g);v!=-1;){g=this.j.Le(g);var b=this.j.Le(v);(g=this.j.tR(g,b))!=-1&&(b=this.j.xa(g),this.j.Kb(g,p,1),this.j.Kb(b,p,2)),g=v,v=a.U(g)}}},T.prototype.cW=function(p,h,a,u){a=this.j.La(a),u=this.j.La(u);var d=new m.ia(0);d.Jb(256);for(var g=this.j.g,v=this.j.$g(),b=this.j.Re;b!=-1;b=this.j.Rf(b)){var C=this.j.Me(b);if(C!=-1){var M=C;do{if(this.j.Ab(M,v)!=1){var $=M,L=M,q=!1,U=0;do{if(this.j.Kb($,v,1),!q){var ee=this.j.dh($);ee&u&&this.j.af($)&a&&(L=$,q=!0)}q&&(d.add(this.j.tj(this.j.km(this.j.jk($)))),p!=-1&&(ee=this.j.dh($))&u&&(U|=ee=this.j.Ab($,p))),$=this.j.jc($)}while($!=L);q&&0<this.j.Kp(this.j.$e(L))&&($=g.Ig(1736),this.LQ($,d),h!=-1&&g.HJ($,h,U)),d.clear(!1)}M=this.j.jc(this.j.xa(M))}while(M!=C)}}this.j.Jg(v)},T.prototype.FP=function(p,h,a,u){this.j.yW();var d=-1;p!=-1&&(d=this.j.$g(),this.aX(d,a)),this.cW(d,p,h,a),d!=-1&&(this.j.Jg(d),d=-1);var g=this.j.g;for(p=0,d=g.ld;d!=-1;d=g.ue(d))d!=h&&d!=a&&(u.add(d),p++);u.Vd(0,p,function(v,b){return(v=g.wz(g.Ob(v)))<(b=g.wz(g.Ob(b)))?-1:v==b?0:1})},T.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},T}();m.Fg=j}(ye||(ye={})),function(m){var j=function(){function T(p){p!==void 0?this.setScale(p):this.RB()}return T.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},T.prototype.Nb=function(p){return this==p||p instanceof T&&this.bb==p.bb&&this.eb==p.eb&&this.Gb==p.Gb&&this.jb==p.jb&&this.ab==p.ab&&this.Lb==p.Lb},T.prototype.cc=function(){return m.O.uj(),m.O.uj(),m.O.uj(),m.O.uj(),m.O.uj(),m.O.uj()},T.prototype.Eh=function(p,h){var a=this.jb*p.x+this.ab*p.y+this.Lb;h.x=this.bb*p.x+this.eb*p.y+this.Gb,h.y=a},T.prototype.eY=function(p,h,a){for(var u=0;u<h;u++){var d=p[u].x,g=p[u].y,v=this.bb*d+this.eb*g+this.Gb;d=this.jb*d+this.ab*g+this.Lb,a[u]!=null?a[u].ma(v,d):a[u]=m.h.construct(v,d)}},T.prototype.multiply=function(p){T.multiply(this,p,this)},T.multiply=function(p,h,a){var u=p.bb*h.bb+p.jb*h.eb,d=p.eb*h.bb+p.ab*h.eb,g=p.Gb*h.bb+p.Lb*h.eb+h.Gb,v=p.bb*h.jb+p.jb*h.ab,b=p.eb*h.jb+p.ab*h.ab;p=p.Gb*h.jb+p.Lb*h.ab+h.Lb,a.bb=u,a.eb=d,a.Gb=g,a.jb=v,a.ab=b,a.Lb=p},T.prototype.Of=function(){var p=new T;return p.bb=this.bb,p.eb=this.eb,p.Gb=this.Gb,p.jb=this.jb,p.ab=this.ab,p.Lb=this.Lb,p},T.prototype.mC=function(p){if(!p.B()){for(var h=[],a=0;4>a;a++)h[a]=new m.h;p.nB(h),this.fY(h,h),p.Zw(h,4)}},T.prototype.fY=function(p,h){for(var a=0;a<p.length;a++){var u=new m.h,d=p[a];u.x=this.bb*d.x+this.eb*d.y+this.Gb,u.y=this.jb*d.x+this.ab*d.y+this.Lb,h[a]=u}},T.prototype.pS=function(p,h){p.B()||h.B()||p.R()==0||p.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=h.R()/p.R(),this.ab=h.ca()/p.ca(),this.Gb=h.v-p.v*this.bb,this.Lb=h.G-p.G*this.ab)},T.prototype.dY=function(p){var h=new m.h,a=new m.h;h.ma(this.bb,this.jb),a.ma(this.eb,this.ab),h.sub(h);var u=.5*h.Sk();return h.ma(this.bb,this.jb),a.ma(this.eb,this.ab),h.add(a),p*(u>(h=.5*h.Sk())?Math.sqrt(u):Math.sqrt(h))},T.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},T.prototype.isIdentity=function(p){if(p!==void 0){var h=m.h.construct(0,1);return this.Eh(h,h),h.sub(m.h.construct(0,1)),h.Sk()>p*p?!1:(h.ma(0,0),this.Eh(h,h),!(h.Sk()>p*p)&&(h.ma(1,0),this.Eh(h,h),h.sub(m.h.construct(1,0)),h.Sk()<=p*p))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},T.prototype.Bi=function(p){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*p*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},T.prototype.gg=function(p,h){this.bb=1,this.eb=0,this.Gb=p,this.jb=0,this.ab=1,this.Lb=h},T.prototype.setScale=function(p,h){h!==void 0?(this.bb=p,this.jb=this.Gb=this.eb=0,this.ab=h,this.Lb=0):this.setScale(p,p)},T.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},T.prototype.setRotate=function(p){this.pX(Math.cos(p),Math.sin(p))},T.prototype.pX=function(p,h){this.bb=p,this.eb=-h,this.Gb=0,this.jb=h,this.ab=p,this.Lb=0},T.prototype.shift=function(p,h){this.Gb+=p,this.Lb+=h},T.prototype.scale=function(p,h){this.bb*=p,this.eb*=p,this.Gb*=p,this.jb*=h,this.ab*=h,this.Lb*=h},T.prototype.flipX=function(p,h){this.bb=-this.bb,this.eb=-this.eb,this.Gb=p+h-this.Gb},T.prototype.flipY=function(p,h){this.jb=-this.jb,this.ab=-this.ab,this.Lb=p+h-this.Lb},T.prototype.rotate=function(p){var h=new T;h.setRotate(p),this.multiply(h)},T.prototype.inverse=function(p){if(p!==void 0){var h=this.bb*this.ab-this.eb*this.jb;h==0?p.lx():(h=1/h,p.Gb=(this.eb*this.Lb-this.Gb*this.ab)*h,p.Lb=(this.Gb*this.jb-this.bb*this.Lb)*h,p.bb=this.ab*h,p.eb=-this.eb*h,p.jb=-this.jb*h,p.ab=this.bb*h)}else this.inverse(this)},T}();m.Dd=j}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},T.prototype.setScale=function(p,h,a){this.bb=p,this.eb=this.Ze=this.jb=0,this.ab=h,this.Fe=this.Ee=this.Ge=0,this.He=a,this.hg=this.Lb=this.Gb=0},T.prototype.setTranslate=function(p,h,a){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=p,this.Lb=h,this.hg=a},T.prototype.translate=function(p,h,a){this.Gb+=p,this.Lb+=h,this.hg+=a},T.prototype.mC=function(p){if(!p.B()){for(var h=new m.Nd[8],a=0;8>a;a++)h[a]=new m.Nd;p.nB(h),this.transform(h,8,h),p.Zw(h)}},T.prototype.transform=function(p,h,a){for(var u=0;u<h;u++){var d=new m.Nd,g=p[u];d.x=this.bb*g.x+this.eb*g.y+this.Ee*g.z+this.Gb,d.y=this.jb*g.x+this.ab*g.y+this.Fe*g.z+this.Lb,d.z=this.Ze*g.x+this.Ge*g.y+this.He*g.z+this.hg,a[u]=d}},T.prototype.fp=function(p){var h=new m.Nd;return h.x=this.bb*p.x+this.eb*p.y+this.Ee*p.z+this.Gb,h.y=this.jb*p.x+this.ab*p.y+this.Fe*p.z+this.Lb,h.z=this.Ze*p.x+this.Ge*p.y+this.He*p.z+this.hg,h},T.prototype.Ag=function(p){T.multiply(this,p,this)},T.multiply=function(p,h,a){var u=p.bb*h.bb+p.jb*h.eb+p.Ze*h.Ee,d=p.bb*h.jb+p.jb*h.ab+p.Ze*h.Fe,g=p.bb*h.Ze+p.jb*h.Ge+p.Ze*h.He,v=p.eb*h.bb+p.ab*h.eb+p.Ge*h.Ee,b=p.eb*h.jb+p.ab*h.ab+p.Ge*h.Fe,C=p.eb*h.Ze+p.ab*h.Ge+p.Ge*h.He,M=p.Ee*h.bb+p.Fe*h.eb+p.He*h.Ee,$=p.Ee*h.jb+p.Fe*h.ab+p.He*h.Fe,L=p.Ee*h.Ze+p.Fe*h.Ge+p.He*h.He,q=p.Gb*h.bb+p.Lb*h.eb+p.hg*h.Ee+h.Gb,U=p.Gb*h.jb+p.Lb*h.ab+p.hg*h.Fe+h.Lb;p=p.Gb*h.Ze+p.Lb*h.Ge+p.hg*h.He+h.hg,a.bb=u,a.jb=d,a.Ze=g,a.eb=v,a.ab=b,a.Ge=C,a.Ee=M,a.Fe=$,a.He=L,a.Gb=q,a.Lb=U,a.hg=p},T.inverse=function(p,h){var a=p.bb*(p.ab*p.He-p.Ge*p.Fe)-p.jb*(p.eb*p.He-p.Ge*p.Ee)+p.Ze*(p.eb*p.Fe-p.ab*p.Ee);if(a==0)throw m.i.fa("math singularity");var u=1/a;a=(p.ab*p.He-p.Ge*p.Fe)*u;var d=-(p.eb*p.He-p.Ge*p.Ee)*u,g=(p.eb*p.Fe-p.ab*p.Ee)*u,v=-(p.jb*p.He-p.Fe*p.Ze)*u,b=(p.bb*p.He-p.Ze*p.Ee)*u,C=-(p.bb*p.Fe-p.jb*p.Ee)*u,M=(p.jb*p.Ge-p.Ze*p.ab)*u,$=-(p.bb*p.Ge-p.Ze*p.eb)*u;u*=p.bb*p.ab-p.jb*p.eb;var L=-(p.Gb*a+p.Lb*d+p.hg*g),q=-(p.Gb*v+p.Lb*b+p.hg*C);p=-(p.Gb*M+p.Lb*$+p.hg*u),h.bb=a,h.jb=v,h.Ze=M,h.eb=d,h.ab=b,h.Ge=$,h.Ee=g,h.Fe=C,h.He=u,h.Gb=L,h.Lb=q,h.hg=p},T.prototype.Of=function(){var p=new T;return p.bb=this.bb,p.jb=this.jb,p.Ze=this.Ze,p.eb=this.eb,p.ab=this.ab,p.Ge=this.Ge,p.Ee=this.Ee,p.Fe=this.Fe,p.He=this.He,p.Gb=this.Gb,p.Lb=this.Lb,p.hg=this.hg,p},T}();m.JY=j}(ye||(ye={})),function(m){var j=function(p){function h(a){if(a!==void 0)a=p.call(this,a.cc(),a)||this;else{(a=p.call(this)||this).bg=[],a.bg[0]=0,a.Aa=1,a.uh=[];for(var u=0;10>u;u++)a.uh[u]=-1;a.uh[a.bg[0]]=0}return a.jq=!0,a}return ri(h,p),h.prototype.re=function(a){this.hasAttribute(a)||(this.uh[a]=0,this.jD())},h.prototype.removeAttribute=function(a){if(a==0)throw m.i.N("Position attribue cannot be removed");this.hasAttribute(a)&&(this.uh[a]=-1,this.jD())},h.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var a=0;a<this.uh.length;a++)this.uh[a]=-1;this.uh[this.bg[0]]=0,this.jq=!0},h.prototype.EF=function(){return T.kz().add(this)},h.og=function(){return T.kz().$R()},h.prototype.tM=function(){var a=this.cc();return new m.ra(a,this)},h.prototype.jD=function(){for(var a=this.Aa=0,u=0;10>a;a++)0<=this.uh[a]&&(this.bg[u]=a,this.uh[a]=u,u++,this.Aa++);this.jq=!0},h.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},h.prototype.Nb=function(a){if(a==null)return!1;if(a==this)return!0;if(!(a instanceof h)||a.Aa!=this.Aa)return!1;for(var u=0;u<this.Aa;u++)if(this.bg[u]!=a.bg[u])return!1;return this.jq==a.jq},h.prototype.GG=function(a){if(a.Aa!=this.Aa)return!1;for(var u=0;u<this.Aa;u++)if(this.bg[u]!=a.bg[u])return!1;return!0},h.Iw=function(a,u){for(var d=[],g=0;g<a.Aa;g++)d[g]=-1;g=0;for(var v=a.Aa;g<v;g++)d[g]=u.Pf(a.kd(g));return d},h.BR=function(a,u){return(a=new h(a)).re(u),a.EF()},h.CR=function(a,u){for(var d=null,g=0;10>g;g++)!a.hasAttribute(g)&&u.hasAttribute(g)&&(d==null&&(d=new h(a)),d.re(g));return d!=null?d.EF():a},h}(m.ra);m.ee=j;var T=function(){function p(){this.map=[];var h=new j;this.add(h),(h=new j).re(1),this.add(h)}return p.kz=function(){return p.bL},p.prototype.$R=function(){return p.ft},p.prototype.add=function(h){var a=h.cc();if(p.ft!=null&&p.ft.cc()==a&&h.GG(p.ft))return p.ft;if(p.Dw!=null&&p.Dw.cc()==a&&h.GG(p.Dw))return p.Dw;var u=null;return this.map[a]!==void 0&&(u=this.map[a]),u==null&&((u=h.tM()).Aa==1?p.ft=u:u.Aa==2&&u.kd(1)==1?p.Dw=u:this.map[a]=u),u},p.bL=new p,p}()}(ye||(ye={}));var gs={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},Wr={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Tn=new(function(){function m(){this.RM=50,this.np=new Map,this.gj=[]}return m.prototype.clear=function(){this.gj.length=0,this.np.clear()},m.prototype.delete=function(j){return!!this.np.delete(j)&&(this.gj.splice(this.gj.indexOf(j),1),!0)},m.prototype.get=function(j){var T=this.np.get(j);if(T!==void 0)return this.gj[0]!==j&&(this.gj.splice(this.gj.indexOf(j),1),this.gj.unshift(j)),T},m.prototype.has=function(j){return this.np.has(j)},m.prototype.set=function(j,T){return this.get(j)!==void 0&&this.delete(j),this.gj.unshift(j),this.np.set(j,T),this.oM(),this},m.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var j=this.gj.pop();this.np.delete(j)}},m}()),wt=((sn={}).convertJSONToGeometry=function(m){return ye.$b.fP(m)},sn.hasM=function(m){return m.hasAttribute(ye.Ih.M)},sn.hasZ=function(m){return m.hasAttribute(ye.Ih.Z)},sn.getPointX=function(m){return m.Lg()},sn.getPointY=function(m){return m.ih()},sn.getPointZ=function(m){return m.bS()},sn.getPointM=function(m){return m.zR()},sn.getXMin=function(m){return m.es()},sn.getYMin=function(m){return m.gs()},sn.getXMax=function(m){return m.ds()},sn.getYMax=function(m){return m.fs()},sn.getZExtent=function(m){return m.Tg(ye.Ih.Z,0)},sn.getMExtent=function(m){return m.Tg(ye.Ih.M,0)},sn.exportPaths=function(m){var j=[],T=m.da(),p=null,h=null,a=m.hasAttribute(ye.Ih.Z),u=m.hasAttribute(ye.Ih.M);a&&(p=m.ub(ye.Ih.Z)),u&&(h=m.ub(ye.Ih.M));for(var d=new ye.h,g=0;g<T;g++){for(var v=m.Ba(g),b=m.Ja(g),C=0,M=0,$=NaN,L=NaN,q=NaN,U=NaN,ee=m.dc(g),Q=[],ge=v;ge<v+b;ge++){m.D(ge,d),U=q=NaN;var ve=[d.x,d.y];a&&(q=p.get(ge),ve.push(q)),u&&(U=h.get(ge),ve.push(U)),ge==v&&ee&&(C=d.x,M=d.y,$=q,L=U),Q.push(ve)}!ee||C==d.x&&M==d.y&&(!a||isNaN($)&&isNaN(q)||$==q)&&(!u||isNaN(L)&&isNaN(U)||L==U)||Q.push(Q[0].slice(0)),j.push(Q)}return j},sn.exportPathsFlat=function(){},sn.exportPoints=function(m){var j=m.hasAttribute(ye.Ih.Z),T=m.hasAttribute(ye.Ih.M),p=null,h=null;j&&(p=m.ub(ye.Ih.Z)),T&&(h=m.ub(ye.Ih.M));for(var a=new ye.h,u=m.I(),d=[],g=0;g<u;g++){m.D(g,a);var v=[a.x,a.y];j&&v.push(p.get(g)),T&&v.push(h.get(g)),d.push(v)}return d},sn.exportPointsFlat=function(){},sn),Xn=new Map;return function(){function m(){}return m.buffer=de,m.clip=_,m.contains=S,m.convexHull=ne,m.crosses=P,m.cut=x,m.densify=it,m.difference=oe,m.disjoint=V,m.distance=A,m.equals=D,m.extendedSpatialReferenceInfo=y,m.generalize=Fe,m.geodesicArea=Pt,m.geodesicBuffer=Se,m.geodesicDensify=_t,m.geodesicLength=Vt,m.intersect=ce,m.intersects=N,m.isSimple=J,m.nearestCoordinate=Re,m.nearestVertex=$e,m.nearestVertices=we,m.offset=se,m.overlaps=B,m.planarArea=ot,m.planarLength=ut,m.relate=W,m.simplify=re,m.symmetricDifference=pe,m.touches=F,m.union=ue,m.within=G,m.rotate=ye.Ex.rotate,m.flipHorizontal=ye.Ex.JQ,m.flipVertical=ye.Ex.KQ,m.intersectLinesToPoints=fo,m.ExtendedParams=ye.yC,m.clearDefaultSpatialReferenceTolerance=fr,m.changeDefaultSpatialReferenceTolerance=Yn,m._enableProjection=Ft,m._project=hn,m._getTransformation=Nt,m._getTransformationBySuitability=Wi,m}()}var i=e();i!==void 0&&(t.exports=i)}(Pte)),Pte.exports}var V0e=tZe();const Ki=QWe(V0e),iZe=eZe({__proto__:null,default:Ki},[V0e]),nZe=Object.freeze(Object.defineProperty({__proto__:null,G:Ki,g:iZe},Symbol.toStringTag,{value:"Module"})),kn={convertToGEGeometry:sZe,exportPoint:rZe,exportPolygon:oZe,exportPolyline:aZe,exportMultipoint:lZe,exportExtent:cZe};function sZe(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function rZe(t,e,i){const n=t.hasZ(e),s=t.hasM(e),r=new Yi({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return n&&(r.z=t.getPointZ(e)),s&&(r.m=t.getPointM(e)),r.cache._geVersion=e,r}function oZe(t,e,i){const n=new el({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return n.cache._geVersion=e,n}function aZe(t,e,i){const n=new $f({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return n.cache._geVersion=e,n}function lZe(t,e,i){const n=new Hv({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return n.cache._geVersion=e,n}function cZe(t,e,i){const n=t.hasZ(e),s=t.hasM(e),r=new dr({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(n){const o=t.getZExtent(e);r.zmin=o.vmin,r.zmax=o.vmax}if(s){const o=t.getMExtent(e);r.mmin=o.vmin,r.mmax=o.vmax}return r.cache._geVersion=e,r}const uZe=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:kn},Symbol.toStringTag,{value:"Module"}));function $n(t){const e=Array.isArray(t)?t[0].spatialReference:t.spatialReference;return e?qC(Gi,e):Gi.WGS84}function hZe(t){return Ki.extendedSpatialReferenceInfo(t)}function dZe(t,e){return Ki.clip(kn,$n(t),t,e)}function fZe(t,e){return Ki.cut(kn,$n(t),t,e)}function pZe(t,e){return Ki.contains(kn,$n(t),t,e)}function mZe(t,e){return Ki.crosses(kn,$n(t),t,e)}function G0e(t,e,i){return Ki.distance(kn,$n(t),t,e,i)}function gZe(t,e){return Ki.equals(kn,$n(t),t,e)}function yZe(t,e){return Ki.intersects(kn,$n(t),t,e)}function vZe(t,e){return Ki.touches(kn,$n(t),t,e)}function _Ze(t,e){return Ki.within(kn,$n(t),t,e)}function bZe(t,e){return Ki.disjoint(kn,$n(t),t,e)}function xZe(t,e){return Ki.overlaps(kn,$n(t),t,e)}function wZe(t,e,i){return Ki.relate(kn,$n(t),t,e,i)}function SZe(t){return Ki.isSimple(kn,$n(t),t)}function j0e(t){return Ki.simplify(kn,$n(t),t)}function EZe(t,e=!1){return Ki.convexHull(kn,$n(t),t,e)}function CZe(t,e){return Ki.difference(kn,$n(t),t,e)}function PZe(t,e){return Ki.symmetricDifference(kn,$n(t),t,e)}function TZe(t,e){return Ki.intersect(kn,$n(t),t,e)}function IZe(t,e=null){return Ki.union(kn,$n(t),t,e)}function MZe(t,e,i,n,s,r){return Ki.offset(kn,$n(t),t,e,i,n,s,r)}function AZe(t,e,i,n=!1){return Ki.buffer(kn,$n(t),t,e,i,n)}function kZe(t,e,i,n,s,r){return Ki.geodesicBuffer(kn,$n(t),t,e,i,n,s,r)}function DZe(t,e,i=!0){return Ki.nearestCoordinate(kn,$n(t),t,e,i)}function NZe(t,e){return Ki.nearestVertex(kn,$n(t),t,e)}function OZe(t,e,i,n){return Ki.nearestVertices(kn,$n(t),t,e,i,n)}function Bj(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function $Ze(t,e,i){if(t==null)throw new Q2;const n=t.spatialReference;if((i=i??Bj(t))==null)throw new Q2;const s=t.constructor.fromJSON(Ki.rotate(t,e,i));return s.spatialReference=n,s}function RZe(t,e){if(t==null)throw new Q2;const i=t.spatialReference;if((e=e??Bj(t))==null)throw new Q2;const n=t.constructor.fromJSON(Ki.flipHorizontal(t,e));return n.spatialReference=i,n}function LZe(t,e){if(t==null)throw new Q2;const i=t.spatialReference;if((e=e??Bj(t))==null)throw new Q2;const n=t.constructor.fromJSON(Ki.flipVertical(t,e));return n.spatialReference=i,n}function FZe(t,e,i,n){return Ki.generalize(kn,$n(t),t,e,i,n)}function zZe(t,e,i){return Ki.densify(kn,$n(t),t,e,i)}function qZe(t,e,i,n=0){return Ki.geodesicDensify(kn,$n(t),t,e,i,n)}function VZe(t,e){return Ki.planarArea(kn,$n(t),t,e)}function GZe(t,e){return Ki.planarLength(kn,$n(t),t,e)}function jZe(t,e,i){return Ki.geodesicArea(kn,$n(t),t,e,i)}function BZe(t,e,i){return Ki.geodesicLength(kn,$n(t),t,e,i)}function HZe(t,e){return Ki.intersectLinesToPoints(kn,$n(t),t,e)}function UZe(t,e){Ki.changeDefaultSpatialReferenceTolerance(t,e)}function YZe(t){Ki.clearDefaultSpatialReferenceTolerance(t)}let Q2=class extends Error{constructor(){super("Illegal Argument Exception")}};const Q_t=Object.freeze(Object.defineProperty({__proto__:null,buffer:AZe,changeDefaultSpatialReferenceTolerance:UZe,clearDefaultSpatialReferenceTolerance:YZe,clip:dZe,contains:pZe,convexHull:EZe,crosses:mZe,cut:fZe,densify:zZe,difference:CZe,disjoint:bZe,distance:G0e,equals:gZe,extendedSpatialReferenceInfo:hZe,flipHorizontal:RZe,flipVertical:LZe,generalize:FZe,geodesicArea:jZe,geodesicBuffer:kZe,geodesicDensify:qZe,geodesicLength:BZe,intersect:TZe,intersectLinesToPoints:HZe,intersects:yZe,isSimple:SZe,nearestCoordinate:DZe,nearestVertex:NZe,nearestVertices:OZe,offset:MZe,overlaps:xZe,planarArea:VZe,planarLength:GZe,relate:wZe,rotate:$Ze,simplify:j0e,symmetricDifference:PZe,touches:vZe,union:IZe,within:_Ze},Symbol.toStringTag,{value:"Module"}));function XZe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function WZe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function ZZe(t,e,i,n,s,r,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=r,t[5]=o,t}function B0e(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],l=e[5];let c=i*r-n*s;return c?(c=1/c,t[0]=r*c,t[1]=-n*c,t[2]=-s*c,t[3]=i*c,t[4]=(s*l-r*o)*c,t[5]=(n*o-i*l)*c,t):null}function KZe(t){return t[0]*t[3]-t[1]*t[2]}function H0e(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=i[0],y=i[1],_=i[2],x=i[3],S=i[4],P=i[5];return t[0]=n*f+r*y,t[1]=s*f+o*y,t[2]=n*_+r*x,t[3]=s*_+o*x,t[4]=n*S+r*P+l,t[5]=s*S+o*P+c,t}function JZe(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=Math.sin(i),y=Math.cos(i);return t[0]=n*y+r*f,t[1]=s*y+o*f,t[2]=n*-f+r*y,t[3]=s*-f+o*y,t[4]=l,t[5]=c,t}function QZe(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=i[0],y=i[1];return t[0]=n*f,t[1]=s*f,t[2]=r*y,t[3]=o*y,t[4]=l,t[5]=c,t}function eKe(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=i[0],y=i[1];return t[0]=n,t[1]=s,t[2]=r,t[3]=o,t[4]=n*f+r*y+l,t[5]=s*f+o*y+c,t}function tKe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t}function iKe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function nKe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function sKe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function rKe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function oKe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function U0e(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function aKe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function lKe(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t}function cKe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function uKe(t,e){const i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],l=t[5],c=e[0],f=e[1],y=e[2],_=e[3],x=e[4],S=e[5],P=ho();return Math.abs(i-c)<=P*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-f)<=P*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(s-y)<=P*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(r-_)<=P*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(o-x)<=P*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(l-S)<=P*Math.max(1,Math.abs(l),Math.abs(S))}const hKe=H0e,dKe=U0e;Object.freeze(Object.defineProperty({__proto__:null,add:oKe,copy:XZe,determinant:KZe,equals:uKe,exactEquals:cKe,frob:rKe,fromRotation:tKe,fromScaling:iKe,fromTranslation:nKe,identity:WZe,invert:B0e,mul:hKe,multiply:H0e,multiplyScalar:aKe,multiplyScalarAndAdd:lKe,rotate:JZe,scale:QZe,set:ZZe,str:sKe,sub:dKe,subtract:U0e,translate:eKe},Symbol.toStringTag,{value:"Module"}));function fKe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Y0e(t,e,i){i*=.5;const n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t}function pKe(t,e){const i=2*Math.acos(e[3]),n=Math.sin(i/2);return n>ho()?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),i}function X0e(t,e,i){const n=e[0],s=e[1],r=e[2],o=e[3],l=i[0],c=i[1],f=i[2],y=i[3];return t[0]=n*y+o*l+s*f-r*c,t[1]=s*y+o*c+r*l-n*f,t[2]=r*y+o*f+n*c-s*l,t[3]=o*y-n*l-s*c-r*f,t}function mKe(t,e,i){i*=.5;const n=e[0],s=e[1],r=e[2],o=e[3],l=Math.sin(i),c=Math.cos(i);return t[0]=n*c+o*l,t[1]=s*c+r*l,t[2]=r*c-s*l,t[3]=o*c-n*l,t}function gKe(t,e,i){i*=.5;const n=e[0],s=e[1],r=e[2],o=e[3],l=Math.sin(i),c=Math.cos(i);return t[0]=n*c-r*l,t[1]=s*c+o*l,t[2]=r*c+n*l,t[3]=o*c-s*l,t}function yKe(t,e,i){i*=.5;const n=e[0],s=e[1],r=e[2],o=e[3],l=Math.sin(i),c=Math.cos(i);return t[0]=n*c+s*l,t[1]=s*c-n*l,t[2]=r*c+o*l,t[3]=o*c-r*l,t}function vKe(t,e){const i=e[0],n=e[1],s=e[2];return t[0]=i,t[1]=n,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-s*s)),t}function o9(t,e,i,n){const s=e[0],r=e[1],o=e[2],l=e[3];let c,f,y,_,x,S=i[0],P=i[1],A=i[2],D=i[3];return f=s*S+r*P+o*A+l*D,f<0&&(f=-f,S=-S,P=-P,A=-A,D=-D),1-f>ho()?(c=Math.acos(f),y=Math.sin(c),_=Math.sin((1-n)*c)/y,x=Math.sin(n*c)/y):(_=1-n,x=n),t[0]=_*s+x*S,t[1]=_*r+x*P,t[2]=_*o+x*A,t[3]=_*l+x*D,t}function _Ke(t){const e=KC,i=e(),n=e(),s=e(),r=Math.sqrt(1-i),o=Math.sqrt(i);return t[0]=r*Math.sin(2*Math.PI*n),t[1]=r*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*s),t[3]=o*Math.cos(2*Math.PI*s),t}function W0e(t,e){const i=e[0],n=e[1],s=e[2],r=e[3],o=i*i+n*n+s*s+r*r,l=o?1/o:0;return t[0]=-i*l,t[1]=-n*l,t[2]=-s*l,t[3]=r*l,t}function bKe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Z0e(t,e){const i=e[0]+e[4]+e[8];let n;if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let s=0;e[4]>e[0]&&(s=1),e[8]>e[3*s+s]&&(s=2);const r=(s+1)%3,o=(s+2)%3;n=Math.sqrt(e[3*s+s]-e[3*r+r]-e[3*o+o]+1),t[s]=.5*n,n=.5/n,t[3]=(e[3*r+o]-e[3*o+r])*n,t[r]=(e[3*r+s]+e[3*s+r])*n,t[o]=(e[3*o+s]+e[3*s+o])*n}return t}function xKe(t,e,i,n){const s=.5*Math.PI/180;e*=s,i*=s,n*=s;const r=Math.sin(e),o=Math.cos(e),l=Math.sin(i),c=Math.cos(i),f=Math.sin(n),y=Math.cos(n);return t[0]=r*c*y-o*l*f,t[1]=o*l*y+r*c*f,t[2]=o*c*f-r*l*y,t[3]=o*c*y+r*l*f,t}function wKe(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const SKe=W2,EKe=JG,CKe=xpe,PKe=X0e,TKe=Cpe,IKe=tj,MKe=qA,K0e=QG,AKe=K0e,J0e=ej,kKe=J0e,Hj=Ipe,DKe=Mpe,NKe=u5;function Q0e(t,e,i){const n=Pn(e,i);return n<-.999999?(Yr(Nd,OKe,e),cge(Nd)<1e-6&&Yr(Nd,$Ke,e),Co(Nd,Nd),Y0e(t,Nd,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Yr(Nd,e,i),t[0]=Nd[0],t[1]=Nd[1],t[2]=Nd[2],t[3]=1+n,Hj(t,t))}const Nd=$t(),OKe=Sl(1,0,0),$Ke=Sl(0,1,0);function RKe(t,e,i,n,s,r){return o9(Tte,e,s,r),o9(Ite,i,n,r),o9(t,Tte,Ite,2*r*(1-r)),t}const Tte=Sv(),Ite=Sv();function LKe(t,e,i,n){const s=FKe;return s[0]=i[0],s[3]=i[1],s[6]=i[2],s[1]=n[0],s[4]=n[1],s[7]=n[2],s[2]=-e[0],s[5]=-e[1],s[8]=-e[2],Hj(t,Z0e(t,s))}const FKe=n7();Object.freeze(Object.defineProperty({__proto__:null,add:CKe,calculateW:vKe,conjugate:bKe,copy:SKe,dot:IKe,equals:NKe,exactEquals:DKe,fromEuler:xKe,fromMat3:Z0e,getAxisAngle:pKe,identity:fKe,invert:W0e,len:AKe,length:K0e,lerp:MKe,mul:PKe,multiply:X0e,normalize:Hj,random:_Ke,rotateX:mKe,rotateY:gKe,rotateZ:yKe,rotationTo:Q0e,scale:TKe,set:EKe,setAxes:LKe,setAxisAngle:Y0e,slerp:o9,sqlerp:RKe,sqrLen:kKe,squaredLength:J0e,str:wKe},Symbol.toStringTag,{value:"Module"}));function J6(t,e,i=null){return i!=null?[t,e,i]:[t,e]}function Ms(t,e,i=null){return i!=null?{x:t,y:e,z:i}:{x:t,y:e}}let e1e=class{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map(i=>this.mapToLocal(i)).filter(xl)}get doUnnormalization(){return!1}},t1e=class extends e1e{constructor(e,i,n=null){super(i),this._defaultZ=n,this.transform=W6(),this.transformInv=W6(),this.transform=g0e(e),B0e(this.transformInv,this.transform)}makeMapPoint(e,i){return J6(e,i,this._defaultZ)}mapToLocal(e){return Ms(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return J6(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}},zKe=class extends e1e{constructor(e,i){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=$t(),this.tangentFrameUpWS=$t(),this.tangentFrameRightWS=$t(),this.tangentFrameForwardWS=$t(),this.localFrameRightWS=$t(),this.localFrameUpWS=$t(),this.worldToLocalTransform=Sv(),this.localToWorldTransform=Sv(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const n=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,td.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,td.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,td.Z,this.tangentFrameForwardWS);const s=$t();Yc(s,this.tangentFrameForwardWS,Pn(n,this.tangentFrameForwardWS)),zr(this.localFrameRightWS,n,s),Co(this.localFrameRightWS,this.localFrameRightWS),Yr(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Q0e(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),W0e(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(e,i){return J6(e,i,this.defaultZ)}mapToLocal(e){const i=$t();this.view.renderCoordsHelper.toRenderCoords(new Yi({x:e[0],y:e[1],spatialReference:this.spatialReference}),i),pz(i,i,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,new Yi({spatialReference:this.view.spatialReference}));return n!=null?Ms(n.x/this.scale,n.y/this.scale):null}localToMap(e){const i=$t();this.view.renderCoordsHelper.toRenderCoords(new Yi({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),i),pz(i,i,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,new Yi({spatialReference:this.view.spatialReference}));return n!=null?J6(n.x,n.y,this.defaultZ):null}};function nbt(t,e){if(t.type==="2d")return new t1e(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if(t.type==="3d"){const i=e.length>2?new Yi({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new Yi({x:e[0],y:e[1],spatialReference:t.spatialReference});return new zKe(t,i)}return null}function Vy(t,e){const i=new Yi({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(i.z=t[2]),i}function sbt(t,e){return new Hv({points:t,spatialReference:e})}function rbt(t,e,i){const n=new $f({paths:t,spatialReference:e});return i&&ahe(n),n}function v7(t,e,i,n=!0){const s=Ue(t);s.forEach(o=>{const l=o[0],c=o[o.length-1];wf(l,c)&&o.length!==1||o.push(o[0])});let r=new el({rings:s,spatialReference:e});return r.rings.forEach(o=>{hA(o)||o.reverse()}),i&&ahe(r),n&&r.isSelfIntersecting&&Fu(e)&&(r=j0e(r)),r}function qKe(t,e,i){const n=e.mapToLocalMultiple(t),s=[],r={x:n[0].x,y:n[0].y},o={x:n[1].x,y:n[1].y},l=Math.round(o.x-r.x),c=Math.round(o.y-r.y),f=Math.max(Math.abs(l),Math.abs(c));if(i){const y={x:r.x+f,y:r.y+f},_={x:r.x-f,y:r.y-f};s.push(Ms(y.x,_.y),Ms(_.x,_.y),Ms(_.x,y.y),Ms(y.x,y.y))}else{const y={x:l>0?r.x+f:r.x-f,y:c>0?r.y+f:r.y-f};s.push(Ms(r.x,r.y),Ms(y.x,r.y),Ms(y.x,y.y),Ms(r.x,y.y))}return i1e(v7([s.map(y=>e.localToMap(y)).filter(xl)],e.spatialReference,e.doUnnormalization,!0),s,e)}function VKe(t,e,i){let n=e.mapToLocalMultiple(t);if(n.length===1){const c=n[0];n=[Ms(c.x-48,c.y+48),Ms(c.x+48,c.y-48),Ms(c.x+48,c.y-48),Ms(c.x-48,c.y+48)]}const s=[],r={x:n[0].x,y:n[0].y},o={x:n[1].x,y:n[1].y};if(i){const l=Math.round(o.x-r.x),c=Math.round(o.y-r.y);s.push(Ms(r.x-l,r.y-c),Ms(o.x,r.y-c),Ms(o.x,o.y),Ms(r.x-l,o.y))}else s.push(Ms(r.x,r.y),Ms(o.x,r.y),Ms(o.x,o.y),Ms(r.x,o.y));return i1e(v7([s.map(l=>e.localToMap(l)).filter(xl)],e.spatialReference,e.doUnnormalization,!0),s,e)}function i1e(t,e,i){const n=cT(e[3],e[2],i),s=cT(e[1],e[2],i),r=cT(e[0],e[1],i),o=cT(e[0],e[3],i);return{geometry:t,midpoints:n!=null&&s!=null&&r!=null&&o!=null?{top:n,right:s,bottom:r,left:o}:null}}function cT(t,e,i){U_[0]=t.x,U_[1]=t.y,U_[2]=0,Y_[0]=e.x,Y_[1]=e.y,Y_[2]=0,qx(U_,U_,Y_,.5),uT.x=U_[0],uT.y=Y_[1],uT.z=Y_[2];const n=i.localToMap(uT);return n!=null?Vy(n,i.spatialReference):null}const uT=Ms(0,0,0),U_=$t(),Y_=$t();function GKe(t,e,i,n){const s=e.mapToLocalMultiple(t);let r=null,o=null;if(i)r=s[0],o=s[1];else{const P=s[0],A=s[1],D=Math.round(A.x-P.x),N=Math.round(A.y-P.y),F=Math.max(Math.abs(D),Math.abs(N));r=Ms(D>0?P.x+F/2:P.x-F/2,N>0?P.y+F/2:P.y-F/2),o=Ms(Math.abs(D)>Math.abs(N)?r.x-F/2:r.x,Math.abs(D)>Math.abs(N)?r.y:r.y-F/2)}const l=e.localToMap(r),c=e.localToMap(o);if(l==null||c==null)return null;e.doUnnormalization&&lhe([[l,c]],e.spatialReference);const f=Vy(l,e.spatialReference),y=Vy(c,e.spatialReference),_=sm(e.spatialReference);let x=0;if(Fu(e.spatialReference))x=_*G0e(f,y,null);else{const P=r.x-o.x,A=r.y-o.y;x=_*Math.sqrt(P*P+A*A)*(n||1)}const S=new JWe({center:f,radius:x,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:v7(S.rings,S.spatialReference,!1),center:f,edge:y}}function jKe(t,e,i){const n=e.mapToLocalMultiple(t),s=n[0],r=n[1],o=Math.round(r.x-s.x),l=Math.round(r.y-s.y),c=Ms(i?s.x:s.x+o/2,i?s.y:s.y+l/2),f=i?o:o/2,y=i?l:l/2,_=60,x=[],S=2*Math.PI/_;function P(W){const J=Math.cos(W),re=Math.sin(W);return Ms(f*J+c.x,y*re+c.y)}for(let W=0;W<_;W++)x.push(P(W*S));x.push(x[0]);const{spatialReference:A,doUnnormalization:D}=e,N=v7([x.map(W=>e.localToMap(W)).filter(xl)],A,D,!1),F=e.localToMap(P(Math.PI/2)),G=e.localToMap(P(0)),V=e.localToMap(P(-Math.PI/2)),B=e.localToMap(P(Math.PI));return{geometry:N,midpoints:F!=null&&G!=null&&V!=null&&B!=null?{top:Vy(F,A),right:Vy(G,A),bottom:Vy(V,A),left:Vy(B,A)}:null}}var Fp,Mte,Ate;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(Fp||(Fp={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(Mte||(Mte={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(Ate||(Ate={}));var Ny;(function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"})(Ny||(Ny={}));let BKe=class{constructor(){this._isToolEditable=!0,this._manipulators=new ci,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,i=Ny.WhenToolEditable){this.addMany([e],i)}addMany(e,i=Ny.WhenToolEditable){for(const n of e){const s={manipulator:n,visibilityPredicate:i,attached:!1};this._manipulators.add(s),this._attached&&this._updateManipulatorAttachment(s)}}remove(e){for(let i=0;i<this._manipulators.length;i++)if(this._manipulators.at(i).manipulator===e){const n=this._manipulators.splice(i,1)[0];this._detachManipulator(n);break}}removeAll(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(e=>{this._updateManipulatorAttachment(e)}),this._attached=!0}detach(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach(({manipulator:e})=>e.destroy()),this._manipulators.destroy(),this._resourceContexts=null}on(e,i){return this._manipulators.on(e,n=>{i(n)})}forEach(e){for(const i of this._manipulators.items)e(i)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach(i=>e.push(i.manipulator)),e}intersect(e,i){let n=null,s=Number.MAX_VALUE;return this._manipulators.forEach(({manipulator:r,attached:o})=>{if(!o||!r.interactive)return;const l=r.intersectionDistance(e,i);l!=null&&l<s&&(s=l,n=r)}),n}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const i=e.manipulator;i.grabbing=!1,i.dragging=!1,i.hovering=!1,i.selected=!1,i.detach&&i.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===Ny.Always||(this._isToolEditable?e.visibilityPredicate===Ny.WhenToolEditable:e.visibilityPredicate===Ny.WhenToolNotEditable)}},da=class extends Ei{constructor(e){super(e),this.manipulators=new BKe,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[Fp.MANAGER,!0],[Fp.USER,!0]]),this._creationFinishedResolver=Oc()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(Fp.USER)}set editable(e){this.setEditableFlag(Fp.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){this.view!=null&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,i){this._editableFlags.set(e,i),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===Fp.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)??!1}endDrag(){const e=this.view.inputManager.latestPointerLocation;if(!e)return;let i=!1;this.manipulators.forEach(({manipulator:n})=>{n.dragging&&(i=!0,n.events.emit("drag",{action:"end",start:e,screenPoint:e}))}),i&&(this.view.toolViewManager.activeTool=null)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(Fp.USER)&&this.getEditableFlag(Fp.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};I([O({constructOnly:!0})],da.prototype,"view",void 0),I([O({readOnly:!0})],da.prototype,"active",null),I([O({value:!0})],da.prototype,"visible",null),I([O({value:!0})],da.prototype,"editable",null),I([O({readOnly:!0})],da.prototype,"manipulators",void 0),I([O({readOnly:!0})],da.prototype,"updating",null),I([O()],da.prototype,"cursor",null),I([O({readOnly:!0})],da.prototype,"automaticManipulatorSelection",void 0),I([O()],da.prototype,"hasFocusedManipulators",null),I([O()],da.prototype,"hasGrabbedManipulators",void 0),I([O()],da.prototype,"hasHoveredManipulators",void 0),I([O()],da.prototype,"firstGrabbedManipulator",void 0),I([O({readOnly:!0})],da.prototype,"created",void 0),I([O({readOnly:!0})],da.prototype,"removeIncompleteOnCancel",void 0),da=I([De("esri.views.interactive.InteractiveToolBase")],da);let fl=class extends Ei{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:E6};const i=VDe(qDe(Uv(E6),this.coordinates),2*this.strokeWidth);i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]+.5),i[3]=Math.ceil(i[3]+.5);for(const n of this.coordinates)e.push([Math.floor(n[0]-i[0])+.5,Math.floor(n[1]-i[1])+.5]);return e.reverse(),{coordinates:e,rect:i}}render(){const{coordinates:e,rect:i}=this._renderCoordinates,n=phe(i),s=mhe(i);return Ot("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:i[0]+"px",top:i[1]+"px",width:n+"px",height:s+"px",visibility:this.visible?"visible":"hidden"}},Ot("svg",{height:s,styles:{display:"block"},width:n},Ot("polygon",{fill:this._fillStyle,points:e.map(([r,o])=>`${r},${o}`).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),Ot("polygon",{fill:"transparent",points:e.map(([r,o])=>`${r},${o}`).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};I([O()],fl.prototype,"coordinates",void 0),I([O()],fl.prototype,"strokeDash",void 0),I([O()],fl.prototype,"strokeWidth",void 0),I([O()],fl.prototype,"strokeColor",void 0),I([O()],fl.prototype,"strokeDashColor",void 0),I([O()],fl.prototype,"fillColor",void 0),I([O()],fl.prototype,"visible",void 0),I([O()],fl.prototype,"isDecoration",void 0),I([O({readOnly:!0})],fl.prototype,"_strokeStyle",null),I([O({readOnly:!0})],fl.prototype,"_strokeBackgroundStyle",null),I([O({readOnly:!0})],fl.prototype,"_fillStyle",null),I([O({readOnly:!0})],fl.prototype,"_renderCoordinates",null),fl=I([De("esri.views.overlay.OutlineOverlayItem")],fl);const HKe=fl;let Tc=class extends Ia.EventedMixin(da){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=i=>this.drawOperation.on(i,n=>{this._updateVisuals(),this.emit(i,n)});this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=co(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){var e;return((e=this.drawOperation)==null?void 0:e.updating)??!1}get cursor(){return this.geometryType==="point"?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new an({view:e,manipulators:this.manipulators,geometryType:UKe(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new Dz,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){var o,l,c;const{drawOperation:e}=this;if(!(e!=null&&e.geometryIncludingUncommittedVertices.length))return[];const{coordinateHelper:i}=e,n=e.committableVertex,s=e.committedVertices.slice();n!=null&&s.push(i.pointToArray(n));const r=s.length;switch(this.geometryType){case"circle":case"rectangle":{const f=new t1e(y0e,Dz.spatialReference),y=this.geometryType==="circle"?GKe:qKe,_=this.geometryType==="circle"?jKe:VKe;if(r===1&&e.isCompleted){const x=s[0],S=f.makeMapPoint(x[0]+YKe,x[1]);return((o=y([x,S],f,!0))==null?void 0:o.geometry.rings[0])??[]}if(r===2){const x=this.geometryType!=="rectangle",S=this.centeredToggled!==x,P=this.geometryType!=="rectangle";return(this.uniformSizeToggled!==P?(l=y(s,f,S))==null?void 0:l.geometry.rings[0]:(c=_(s,f,S))==null?void 0:c.geometry.rings[0])??[]}return[]}}return s}_updateVisuals(){var e;if(!this._overlayItem){const i=new HKe({strokeDash:[5],strokeDashColor:[255,255,255,255]});(e=this.view.overlay)==null||e.addItem(i),this.addHandles(fn(()=>{var n;(n=this.view.overlay)==null||n.removeItem(i),i==null||i.destroy(),this._overlayItem=void 0})),this._overlayItem=i}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function UKe(t){switch(t){case"polygon":case"point":return t;case"circle":case"rectangle":return"segment"}}I([O({value:!1})],Tc.prototype,"centeredToggled",null),I([O()],Tc.prototype,"drawOperation",void 0),I([O({value:!0})],Tc.prototype,"enabled",null),I([O({value:!1})],Tc.prototype,"uniformSizeToggled",null),I([O({constructOnly:!0})],Tc.prototype,"geometryType",void 0),I([O({constructOnly:!0})],Tc.prototype,"mode",void 0),I([O({readOnly:!0})],Tc.prototype,"type",void 0),I([O({readOnly:!0})],Tc.prototype,"updating",null),I([O({constructOnly:!0,nonNullable:!0})],Tc.prototype,"view",void 0),I([O()],Tc.prototype,"cursor",null),Tc=I([De("esri.views.draw.DrawScreenTool")],Tc);const YKe=48;function VN(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function XKe(t){let e=0,i=0;for(let n=0;n<t.length;n++){const s=t[n].size;typeof s=="number"&&(e+=s,i++)}return e/i}function kte(t,e){var i;return typeof t=="number"?t:(i=t==null?void 0:t.stops)!=null&&i.length?XKe(t.stops):e}function WKe(t,e){if(!e)return t;const i=e.filter(o=>o.type==="size").map(o=>{const{maxSize:l,minSize:c}=o;return(kte(l,t)+kte(c,t))/2});let n=0;const s=i.length;if(s===0)return t;for(let o=0;o<s;o++)n+=i[o];const r=Math.floor(n/s);return Math.max(r,t)}function n1e(t){var r;const e=t==null?void 0:t.renderer,i=t==null?void 0:t.pointerType,n=i==="touch"?9:6;if(!e)return n;const s="visualVariables"in e?WKe(n,e.visualVariables):n;if(e.type==="simple")return VN(s,e.symbol);if(e.type==="unique-value"){let o=s;return(r=e.uniqueValueInfos)==null||r.forEach(l=>{o=VN(o,l.symbol)}),o}if(e.type==="class-breaks"){let o=s;return e.classBreakInfos.forEach(l=>{o=VN(o,l.symbol)}),o}return e.type==="dot-density"||e.type,s}function s1e(t,e,i,n=new dr){let s=0;if(i.type==="2d")s=e*(i.resolution??0);else if(i.type==="3d"){const y=i.overlayPixelSizeInMapUnits(t),_=i.basemapSpatialReference;s=_==null||_.equals(i.spatialReference)?e*y:sm(_)/sm(i.spatialReference)}const r=t.x-s,o=t.y-s,l=t.x+s,c=t.y+s,{spatialReference:f}=i;return n.xmin=Math.min(r,l),n.ymin=Math.min(o,c),n.xmax=Math.max(r,l),n.ymax=Math.max(o,c),n.spatialReference=f,n}function ubt(t,e,i){const n=i.toMap(t);return n==null?!1:s1e(n,n1e(),i,ZKe).intersects(e)}const ZKe=new dr;async function KKe(){return st(()=>import("./geometryEngineJSON-CnmWYlDh.js").then(t=>t.g),__vite__mapDeps([239,174]),import.meta.url)}async function JKe(){return KKe().then(({contains:t,intersects:e,overlaps:i,simplify:n})=>({contains:t,intersects:e,overlaps:i,simplify:n}))}async function QKe(t){const{currentSelection:e,selector:i,signal:n,sources:s,view:r}=t;if(!(s!=null&&s.length))return{added:[],removed:[]};const{layers:o,layerViews:l,graphicsLayers:c}=nJe(s),f=(await FC(Promise.all([tJe(i,o,r,n),iJe(i,l,r,n),eJe(i,c,r)]),n)).flat();if(!e)return{added:f,removed:[]};const y=e.toArray(),_=f.filter(S=>!Dte(y,S)),x=y.filter(S=>!Dte(f,S));return e.removeMany(x),e.addMany(_),{added:_,removed:x}}const eJe=async(t,e,i)=>aJe({candidates:e.flatMap(n=>n.graphics.toArray())??[],selector:t,view:i}),tJe=async(t,e,i,n)=>{const s=await ad(rJe({selector:t,signal:n,layers:e,view:i}));return s?r1e(s):[]},iJe=async(t,e,i,n)=>{const s=await ad(sJe({selector:t,signal:n,layerViews:e,view:i}));return s?r1e(s):[]};function r1e(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i];n.status==="fulfilled"&&e.push(...n.value)}return e}function nJe(t){const e=[],i=[],n=[];return t.forEach(s=>{var r,o;m$e(s)?e.push(s):(Gde(s)||jde(s))&&((r=s.layers)!=null&&r.length)?e.push(...s.layers.toArray()):y$e(s)&&((o=s.sublayers)!=null&&o.length)?n.push(...s.sublayers.toArray()):g$e(s)?n.push(s):n9(s)&&i.push(s)}),{layers:e,layerViews:i,graphicsLayers:n}}function Dte(t,e){if(t.includes(e))return!0;const i=e.getObjectId(),n=i!=null,{layer:s,uid:r}=e;return n?t.some(o=>{if(s===o.layer)return i===o.getObjectId()}):t.some(o=>{if(s===o.layer)return r===o.uid})}async function sJe(t){const{layerViews:e,selector:i,signal:n,view:s}=t;return FC(Promise.allSettled(e.map(async r=>{const o=r.createQuery(),{geometry:l}=o1e(i,r.layer,s);return o.outFields=["*"],o.geometry=l,o.returnGeometry=!0,o.outSpatialReference=s.spatialReference,r.queryFeatures(o,{signal:n}).then(({features:c})=>c)})),n)}async function rJe(t){const{layers:e,selector:i,signal:n,view:s}=t;return FC(Promise.allSettled(e.map(async r=>r.queryFeatures(oJe(r.createQuery(),i,r,s),{signal:n}).then(({features:o})=>o))),n)}function o1e(t,e,i){const n="displayField"in e?e.displayField:null,s=Cde({displayField:n,fields:e.fields}),r=[e.objectIdField];s!=null&&e.fieldsIndex.has(s)&&r.push(s);const o="renderer"in e?n1e({renderer:e.renderer}):0;return{geometry:t.type==="point"?s1e(t,o,i):t,outFields:r}}function oJe(t,e,i,n){const{outFields:s,geometry:r}=o1e(e,i,n);return t.outFields=s,t.geometry=r,t.returnGeometry=!0,t.outSpatialReference=n.spatialReference,t}async function aJe(t){const{selector:e,candidates:i,view:n}=t;if(!(i!=null&&i.length)||!e)return[];const{spatialReference:s}=n,r=e,o=await JKe();return i.filter(l=>o.intersects(s,r,l.geometry))}const lJe=100;let wy=class extends Ia.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new ci,this.sources=null,this._process=qv(async(i,n)=>{const{callback:s,selector:r,completed:o}=i,l=oA(async c=>{var x;const{sources:f,selection:y,view:_}=this;if(!(!(f!=null&&f.length)&&!(_!=null&&_.selectionManager.sources.length))&&_){if(r&&f!=null){const S=await QKe({currentSelection:y,selector:r,signal:c,sources:f,view:_});o&&((x=_.selectionManager)==null||x.updateSelection({current:y.toArray(),...S}))}s&&s()}else y.removeAll()});return Jl(n,()=>l.abort()),this._processTask=l,l.promise},lJe)}initialize(){this._setup()}cancel(){var e;this.removeAllHandles(),(e=this._processTask)==null||e.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const i=this.options,n=(i==null?void 0:i.createTool)??"rectangle",s=(i==null?void 0:i.mode)??(n==="polygon"?"click":"hybrid"),r=Symbol();this._tool=new Tc({view:e,mode:s,geometryType:n}),i!=null&&i.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>ad(this._process({selector:this._selectionArea}))),r),this.addHandles([e.on("key-down",o=>{if(!o.repeat)switch(o.key){case zs.constraint:this._tool.uniformSizeToggled=!0,o.stopPropagation();break;case zs.center:this._tool.centeredToggled=!0,o.stopPropagation()}}),e.on("key-up",o=>{switch(o.key){case zs.constraint:this._tool.uniformSizeToggled=!1,o.stopPropagation();break;case zs.center:this._tool.centeredToggled=!1,o.stopPropagation()}}),this._tool.on("complete",async o=>{this.removeHandles(r);const l=()=>{this.removeAllHandles(),this.emit("complete",{aborted:o.aborted,selection:this.selection.toArray()})};o.aborted?(this.cancel(),this.selection.removeAll(),l()):await this._process({selector:this._selectionArea,callback:l,completed:!0})})],r),this.addHandles(fn(()=>e.tools.remove(this._tool))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=am(),i=this._tool.coordinates,n=this.view.spatialReference,s=o=>{e.x=o[0],e.y=o[1];const{x:l,y:c}=this.view.toMap(e);return[l,c]};if(i.length===1){const[o,l]=s(i[0]);return new Yi({x:o,y:l,spatialReference:n})}const r=this._tool.coordinates.map(s);if(r.length!==0)return hA(r)||r.reverse(),new el({spatialReference:n,rings:[r]})}};I([O()],wy.prototype,"options",void 0),I([O({readOnly:!0})],wy.prototype,"selection",void 0),I([O()],wy.prototype,"sources",void 0),I([O({constructOnly:!0})],wy.prototype,"view",void 0),wy=I([De("esri.widgets.support.Selector2D.SelectionOperation")],wy);const cJe=wy;let Ap=class extends Ia.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([xi(()=>this._sources,e=>{this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=Po(this._operationHandlesGroup)}get _sources(){const{sources:e,view:i}=this;return i&&(e!=null&&e.length)?e.flatMap(n=>{if(n9(n))return n;if(Gde(n)||jde(n)){const r=n.layers||[],o=r.map(l=>{const c=jee(i,l)||void 0;return n9(c)?c:l});return o.length?o.toArray():r.length?r.toArray():n}const s=jee(i,n)||void 0;return n9(s)?s:n}):[]}get layers(){return z9(qt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){z9(qt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:i}=this,n=!(e!=null&&e.length)&&!(i!=null&&i.selectionManager.sources.length);return this.activeOperation?"active":i!=null&&i.ready&&!n?"ready":"disabled"}cancel(){var e;this.state==="active"&&((e=this.activeOperation)==null||e.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:i,state:n,view:s}=this,r=!(i!=null&&i.length)&&!(s!=null&&s.selectionManager.sources.length);if(n==="disabled"||r||!this.view)return;n==="active"&&this.cancel();const o=new cJe({view:this.view,sources:i,options:e});return this._operationHandlesGroup=bm([o.selection.on("change",l=>this.emit("selection-change",l)),o.once("complete",l=>this._onOperationComplete(l))]),this._set("activeOperation",o),o}_onOperationComplete(e){this._operationHandlesGroup=Po(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};I([O()],Ap.prototype,"_sources",null),I([O({readOnly:!0})],Ap.prototype,"activeOperation",void 0),I([O()],Ap.prototype,"layers",null),I([O()],Ap.prototype,"sources",void 0),I([O({readOnly:!0})],Ap.prototype,"state",null),I([O()],Ap.prototype,"view",void 0),Ap=I([De("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],Ap);const uJe=Ap,Nte={lassoTool:!0,rectangleTool:!0},hJe={createTool:"polygon",mode:"freehand"},dJe={createTool:"rectangle"},GN="esri-selection-toolbar",jN={base:GN,container:`${GN}__container`,toolButton:`${GN}__tool-button`};let Hl=class extends Tx{constructor(e,i){super(e,i),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new uJe,this.visibleElements={...Nte},this._viewModelHandlesGroup=bm([this.viewModel.on("complete",n=>{this._set("activeToolInfo",null),this.emit("complete",n)})])}destroy(){this._viewModelHandlesGroup=Po(this._viewModelHandlesGroup)}loadDependencies(){return Px({action:()=>st(()=>import("./calcite-action-C3p1LNKY.js"),[],import.meta.url),icon:()=>st(()=>import("./calcite-icon-uZdnCpqZ.js"),[],import.meta.url)})}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layers(){return z9(qt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){z9(qt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...Nte,...e}}get visibleToolCount(){const{view:e,toolConfigs:i,visibleElements:n}=this;return((i==null?void 0:i.length)??0)+((e==null?void 0:e.type)==="2d"?(n.lassoTool?1:0)+(n.rectangleTool?1:0):0)}activate(e){if(this.cancel(),this.viewModel.state!=="disabled")switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return Ot("div",{"aria-label":this.label,class:this.classes(jN.base,YE.widget)},Ot("div",{class:jN.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){var e;if(((e=this.view)==null?void 0:e.type)==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){var e;if((e=this.toolConfigs)!=null&&e.length)return this.toolConfigs.map(({toolName:i,icon:n})=>{var s;return Ot("calcite-action",{active:((s=this.activeToolInfo)==null?void 0:s.toolName)===i,bind:this,class:jN.toolButton,disabled:this.viewModel.state==="disabled",onclick:()=>this._onCustomToolClick(i),scale:"s",text:i,title:i},Ot("calcite-icon",{icon:n||"selection",scale:"s"}))})}_renderLassoTool(){const{activeToolInfo:e,messages:i,visibleElements:n}=this;if(!n.lassoTool)return;const s=i.selectByLasso;return Ot("calcite-action",{active:(e==null?void 0:e.toolName)==="lasso",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onLassoToolClick,scale:"s",text:s,title:s},Ot("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){const{activeToolInfo:e,messages:i,visibleElements:n}=this;if(!n.rectangleTool)return;const s=i.selectByRectangle;return Ot("calcite-action",{active:(e==null?void 0:e.toolName)==="rectangle",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onRectangleToolClick,scale:"s",text:s,title:s},Ot("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){const i=this._getToolOptions(e);if(!i)return;const n=this.viewModel.activate(i);n&&this._set("activeToolInfo",{toolName:e,operation:n})}_toggleTool(e){if(this.activeToolInfo){const i=this.activeToolInfo.toolName;if(this.cancel(),i===e)return}this._activateTool(e)}_getToolOptions(e){return e==="lasso"?hJe:e==="rectangle"?dJe:this.toolConfigs.find(i=>i.toolName===e)}};I([O({readOnly:!0})],Hl.prototype,"activeToolInfo",void 0),I([O()],Hl.prototype,"label",null),I([O()],Hl.prototype,"layers",null),I([O(),N0("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],Hl.prototype,"messages",void 0),I([O()],Hl.prototype,"sources",null),I([O()],Hl.prototype,"toolConfigs",void 0),I([O()],Hl.prototype,"view",null),I([O()],Hl.prototype,"viewModel",void 0),I([O()],Hl.prototype,"visibleElements",void 0),I([Es("visibleElements")],Hl.prototype,"castVisibleElements",null),I([O()],Hl.prototype,"visibleToolCount",null),Hl=I([De("esri.widgets.support.SelectionToolbar")],Hl);const fJe=Hl,pJe={absolute:"absolute-direction",relative:"relative-direction"},a1e=()=>Px({icon:()=>st(()=>import("./calcite-icon-uZdnCpqZ.js"),[],import.meta.url),label:()=>st(()=>import("./calcite-label-DC_bq_bt.js"),[],import.meta.url),switch:()=>st(()=>import("./calcite-switch-zlnCT-oc.js"),[],import.meta.url),tooltip:()=>st(()=>Promise.resolve().then(()=>NCe),void 0,import.meta.url)}),y3="esri-labeled-switch",v3={label:`${y3}__label`,labelContent:`${y3}__label-content`,iconInfo:`${y3}__icon_info`,iconWarning:`${y3}__icon_warning`,tooltip:`${y3}__tooltip`};function Xb({checked:t,disabled:e,hint:i,key:n,label:s,onChange:r,hintIcon:o,hintKind:l}){return Ot("calcite-label",{class:v3.label,disabled:e,key:n,layout:"inline-space-between",scale:"s"},Ot("div",{class:v3.labelContent,key:"label-content"},i?Ot(uDe,null,Ot("div",null,s),Ot("calcite-icon",{class:l!=="warning"?v3.iconInfo:v3.iconWarning,icon:o??"information",id:n,scale:"s",tabIndex:0}),Ot("calcite-tooltip",{class:v3.tooltip,referenceElement:n},i)):s),Ot("calcite-switch",{checked:t,disabled:e,scale:"s",onCalciteSwitchChange:c=>r(c.target.checked)}))}let Sy=class extends Ei{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};I([O({type:Boolean,nonNullable:!0})],Sy.prototype,"directionModePicker",void 0),I([O({type:Boolean,nonNullable:!0})],Sy.prototype,"header",void 0),I([O({type:Boolean,nonNullable:!0})],Sy.prototype,"labelsToggle",void 0),I([O({type:Boolean,nonNullable:!0})],Sy.prototype,"tooltipsToggle",void 0),Sy=I([De("esri.widgets.support.SketchTooltipControls.VisibleElements")],Sy);const l1e=Sy,hT="esri-sketch-tooltip-controls",dT={base:hT,block:`${hT}__block`,blockContent:`${hT}__block-content`,radioButtonLabelWrapper:`${hT}__radio-button-label-wrapper`};let Vg=class extends Tx{constructor(e,i){super(e,i),this.viewModel=null,this.visibleElements=new l1e,this.sketchOptions=new i7,this.viewType=void 0,this._onTooltipsEnabledChange=n=>{this.sketchOptions.tooltips.enabled=n},this._onLabelsEnabledChange=n=>{this.sketchOptions.labels.enabled=n},this._onDirectionModeChange=n=>{this.sketchOptions.values.directionMode=n.target.selectedItem.value}}loadDependencies(){return Promise.all([Px({block:()=>st(()=>import("./calcite-block-DjT8jjxP.js"),__vite__mapDeps([329,330]),import.meta.url),label:()=>st(()=>import("./calcite-label-DC_bq_bt.js"),[],import.meta.url),icon:()=>st(()=>import("./calcite-icon-uZdnCpqZ.js"),[],import.meta.url),"radio-button":()=>st(()=>import("./calcite-radio-button-DkAijLKD.js"),[],import.meta.url),"radio-button-group":()=>st(()=>import("./calcite-radio-button-group-qgfxqOZt.js"),__vite__mapDeps([331,89,91]),import.meta.url)}),a1e()])}render(){const{label:e,visibleElements:i}=this,n=this._renderContent();return Ot("div",{"aria-label":e,class:this.classes(dT.base,YE.widget)},n?Ot("calcite-block",{class:dT.block,heading:i.header?this.label:"",key:"content-block",open:!0},Ot("div",{class:dT.blockContent,key:"content"},n)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:i}=this,n=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&i!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(xl);return n.length===0?null:n}_renderTooltipsToggle(){const{messages:e,sketchOptions:i}=this;return Ot(Xb,{checked:i.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:i}=this;return Ot(Xb,{checked:i.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:i}=this,{directionMode:n}=i.values;return Ot("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,Ot("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:n,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",n,e.directionModeRelative),this._renderDirectionModeOption("absolute",n,e.directionModeAbsolute)))}_renderDirectionModeOption(e,i,n){return Ot("calcite-label",{key:e,layout:"inline",scale:"s"},Ot("calcite-radio-button",{checked:e===i,scale:"s",value:e}),Ot("div",{class:dT.radioButtonLabelWrapper,key:"label-wrapper"},Ot("calcite-icon",{icon:pJe[e],scale:"s"}),n))}};I([O()],Vg.prototype,"label",null),I([O({type:l1e,nonNullable:!0})],Vg.prototype,"visibleElements",void 0),I([O(),N0("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],Vg.prototype,"messages",void 0),I([O({nonNullable:!0,type:i7})],Vg.prototype,"sketchOptions",void 0),I([O({type:String})],Vg.prototype,"viewType",void 0),Vg=I([De("esri.widgets.support.SketchTooltipControls")],Vg);const mJe=Vg,c1e={hide:"hide",hideChildren:"hide-children"},gbt=10,ybt=2;function vbt({exclusive:t,visible:e,visibilityAppearance:i}){const n=i==="checkbox";return e?t?"circle-f":n?"check-square-f":"view-visible":t?"circle":n?"square":"view-hide"}function _bt({connectionStatus:t,publishing:e}){return t?t==="connected"?"beacon":"offline":e?"square":"bullet-point"}function bbt(t){return(t==null?void 0:t.listMode)===c1e.hideChildren}function Q6(t){return(t==null?void 0:t.listMode)??void 0}function gJe(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function yJe(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function vJe(t){if(!t)return"inherited";const e=xJe(Xj(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function Uj(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function xbt(t){const e=(t!=null&&t.layer&&Xj(t.layer)?t.layer.layer:void 0)??(t==null?void 0:t.layer);return!!e&&e.type!=="catalog"&&(wJe(e)??!0)}function Yj(t){return Q6(t)!==c1e.hide}function _Je(t,e){if(!t||e==null||isNaN(e))return!1;const i=gJe(t),n=yJe(t),s=i!=null&&!isNaN(i)&&i>0&&e>i,r=n!=null&&!isNaN(n)&&n>0&&e<n;return s||r}function bJe(t,e){t==null||t.sort((i,n)=>{const s="uid"in i?e.indexOf(i.uid):-1,r="uid"in n?e.indexOf(n.uid):-1;return s>r?-1:s<r?1:0})}function wbt(t,e){const i=t==null?void 0:t.layer;if(!i)return;const n=Uj(i);if(!n)return;let s;n==="layers"&&"layers"in i?s=i.layers:n==="sublayers"&&"sublayers"in i&&(s=i.sublayers),bJe(s,e)}function Ote(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function Xj(t){return t!=null&&"layer"in t&&t.layer!=null}function xJe(t){const e=u1e(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function wJe(t){const e=u1e(t);return e!=null&&"supportsDynamicLayers"in e?e.supportsDynamicLayers:void 0}function u1e(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}function Sbt(t){return t==null?void 0:t["data-item"]}function Ebt(t){return t==null?void 0:t.getAttribute("data-layer-type")}function Cbt({children:t,error:e,incompatible:i}){return!!(t!=null&&t.filter(n=>!n.hidden).length)&&!e&&!i}function Pbt(t){for(const e of t)for(const i of e)if(i.type==="button"||i.type==="toggle")return i}function $te(t){return t!=null&&typeof t=="object"&&t.type==="2d"&&t.view2dType==="linkchart"}var Oz;let Gg=Oz=class extends n5{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new Oz({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};I([O()],Gg.prototype,"displayValueEnabled",void 0),I([O()],Gg.prototype,"max",void 0),I([O()],Gg.prototype,"min",void 0),I([O()],Gg.prototype,"step",void 0),I([O()],Gg.prototype,"value",void 0),Gg=Oz=I([De("esri.support.actions.ActionSlider")],Gg);const SJe=Gg;function EJe(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,n=Array.isArray(t)?t:CJe(t);i.push(...n)}}function CJe(t){return t.split(",").map(e=>e.trim())}function Rte(t){return t&&typeof t.render=="function"}function Tbt(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}let fa=class extends ZC(Tx){constructor(e,i){super(e,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([xi(()=>this._canCreateLegend,()=>this._createLegend(),ec),xi(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),ec)])}destroy(){this._legend=co(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const n="legend";return e===n||e!=null&&!!Array.isArray(e)&&e.includes(n)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,n=e==null?void 0:e.view;return i&&n?{view:n,layerInfos:[i]}:{}}get _legendLayerInfo(){var o;const e=(o=this.listItem)==null?void 0:o.layer;if(!e||e.type==="subtype-sublayer")return null;const i=Xj(e)?e:null,n=e==null?void 0:e.parent,s=n!=null&&"type"in n&&n.type==="map-image"?i==null?void 0:i.source:null,r="";return s&&n?{layer:n,title:r,sublayerIds:[s.mapLayerId]}:{layer:e,title:r}}get disabled(){var s;const{listItem:e,_legend:i,content:n}=this;return!e||!(Array.isArray(n)&&n.length>1)&&!!i&&(!((s=i.activeLayerInfos)!=null&&s.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return Ot("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:n,open:s}=this;return e&&!n&&s?e==="legend"&&i?Ot("div",{key:"legend-widget"},i.render()):typeof e=="string"?Ot("div",{innerHTML:e,key:e}):Rte(e)?Ot("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?Ot("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(n=>this._renderContent(n)):this._renderContent(e):null}async _createLegend(){if(co(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await st(()=>import("./Legend-CZSo0KCY.js"),__vite__mapDeps([69,70,71,72,73,74,75,76,77,59,57,58,16,60,61,78,52,2,46,29]),import.meta.url),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:Rte(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};I([O()],fa.prototype,"_legend",void 0),I([O()],fa.prototype,"_canCreateLegend",null),I([O()],fa.prototype,"_legendOptions",null),I([O()],fa.prototype,"_legendLayerInfo",null),I([O()],fa.prototype,"className",void 0),I([O()],fa.prototype,"content",void 0),I([O()],fa.prototype,"disabled",null),I([O()],fa.prototype,"flowEnabled",void 0),I([O()],fa.prototype,"icon",null),I([O()],fa.prototype,"image",void 0),I([O()],fa.prototype,"listItem",void 0),I([O()],fa.prototype,"open",void 0),I([O()],fa.prototype,"title",null),I([O()],fa.prototype,"visible",void 0),fa=I([De("esri.widgets.LayerList.ListItemPanel")],fa);const h1e=fa;var PS;const PJe=ci.ofType({key:"type",defaultKeyValue:"button",base:n5,typeMap:{button:Sfe,toggle:Efe,slider:SJe}}),d1e=ci.ofType(PJe),BN="layer",fT="child-list-mode",TJe="hide";let as=PS=class extends ZC(Ei){constructor(t){super(t),this.actionsSections=new d1e,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(ci.ofType(PS)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([xi(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),ec),xi(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),ec),xi(()=>this.view,t=>this._updateChildrenView(t),ec),xi(()=>this.panel,t=>this._setListItemOnPanel(t),ec)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(n=>n.layer===i)??null}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new h1e(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=Lu(this,"layer.layer");return(!t||t&&Lu(this,"layer.layer.loaded"))&&Lu(this,"layer.title")||Lu(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:n}=this;return!n&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t,e;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!_Je(this.layer,(e=this.view)==null?void 0:e.scale)}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return vJe(this.layer)}clone(){return new PS({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,n=t.filter(s=>!i.some(r=>r.layer===s));i.addMany(this._createChildItems(n,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(n=>!t.includes(n.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(fT),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(fT),this.listModeDisabled||this.addHandles(t.toArray().map(e=>xi(()=>e.listMode,()=>this._compileChildren(t))),fT)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>Q6(i)!==TJe);e!=null&&e.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),BN)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.map(i=>e||Yj(i)?new PS({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(xl).reverse()}_watchLayerProperties(t){if(this.removeHandles(BN),this.removeHandles(fT),!t)return;if((!this.listModeDisabled&&Q6(t))==="hide-children")return void this.children.destroyAll();const e=Uj(t);e&&this.addHandles(xi(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},ec),BN)}};I([O({type:d1e})],as.prototype,"actionsSections",void 0),I([O()],as.prototype,"actionsOpen",void 0),I([O()],as.prototype,"checkPublishStatusEnabled",void 0),I([O({type:ci})],as.prototype,"children",void 0),I([O()],as.prototype,"childrenSortable",void 0),I([O({readOnly:!0})],as.prototype,"connectionStatus",null),I([O({readOnly:!0})],as.prototype,"error",null),I([O()],as.prototype,"hidden",void 0),I([O({readOnly:!0})],as.prototype,"incompatible",null),I([O()],as.prototype,"layer",void 0),I([O({readOnly:!0})],as.prototype,"layerView",null),I([O()],as.prototype,"listItemCreatedFunction",void 0),I([O({nonNullable:!0})],as.prototype,"listModeDisabled",void 0),I([O()],as.prototype,"open",void 0),I([O({type:h1e})],as.prototype,"panel",void 0),I([Es("panel")],as.prototype,"castPanel",null),I([O()],as.prototype,"parent",void 0),I([O({value:!0})],as.prototype,"sortable",null),I([O()],as.prototype,"title",null),I([O({readOnly:!0})],as.prototype,"publishing",null),I([O({readOnly:!0})],as.prototype,"updating",null),I([O()],as.prototype,"view",void 0),I([O()],as.prototype,"visible",null),I([O({readOnly:!0})],as.prototype,"visibleAtCurrentScale",null),I([O({readOnly:!0})],as.prototype,"visibleAtCurrentTimeExtent",null),I([O({readOnly:!0})],as.prototype,"visibilityMode",null),as=PS=I([De("esri.widgets.LayerList.ListItem")],as);const Wj=as,xh={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},IJe="hide",f1e=ci.ofType(Wj);let Ud=class extends Ia.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new f1e,this.view=null}initialize(){this.addHandles([xi(()=>{var e;return((e=this.view)==null?void 0:e.ready)===!0},()=>this._viewHandles(),ec),xi(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),xi(()=>$te(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],xh.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,n,s){var S,P;const r=e==null?void 0:e.layer;if(!r||r.type==="subtype-sublayer"||r.type==="sublayer")return;const o=(P=(S=this.view)==null?void 0:S.map)==null?void 0:P.layers,l=i?Ote(i):o,c=n?Ote(n):o;if(!l||!c)return;const{operationalItems:f}=this,y=(i==null?void 0:i.children)||f,_=(n==null?void 0:n.children)||f,x=c.length-s;e.parent=n||null,y.remove(e),l.remove(r),_.includes(e)||_.add(e,x),c.includes(r)||c.add(r,x),this._compileList()}_createLayerViewHandles(e){this.removeHandles(xh.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),xh.layerViews)}_createMapLayerHandles(e){this.removeHandles(xh.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),xh.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:n,checkPublishStatusEnabled:s,listModeDisabled:r}=this;return new Wj({checkPublishStatusEnabled:s,listModeDisabled:r,layer:e,listItemCreatedFunction:n,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>Q6(i)!==IJe):void 0}_watchLayersListMode(e){this.removeHandles(xh.layerListMode),e&&!this.listModeDisabled&&this.addHandles(xi(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),xh.layerListMode)}_compileList(){var s,r;const e=(r=(s=this.view)==null?void 0:s.map)==null?void 0:r.layers,i=$te(this.view)&&!this.view.inGeographicLayout?e==null?void 0:e.filter(({type:o})=>o==="link-chart"):e;this._watchLayersListMode(i);const n=this._getViewableLayers(i);n!=null&&n.length?(this._createNewItems(n),this._removeItems(n),this._sortItems(n)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(n=>{i.some(s=>s.layer===n)||i.add(this._createListItem(n))})}_removeItems(e){const{operationalItems:i}=this,n=[];i.forEach(s=>{s&&e&&e.includes(s.layer)||n.push(s)}),i.destroyMany(n)}_sortItems(e){const{operationalItems:i}=this;i.sort((n,s)=>{const r=e.indexOf(n.layer),o=e.indexOf(s.layer);return r>o?-1:r<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([xh.mapLayers,xh.layerViews,xh.viewLayers]),e!=null&&e.ready?this.addHandles([xi(()=>{var i,n;return(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.allLayers},i=>this._createMapLayerHandles(i),ec),xi(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),ec)],xh.viewLayers):this._removeAllItems()}};I([O()],Ud.prototype,"checkPublishStatusEnabled",void 0),I([O()],Ud.prototype,"listItemCreatedFunction",void 0),I([O({nonNullable:!0})],Ud.prototype,"listModeDisabled",void 0),I([O({type:f1e})],Ud.prototype,"operationalItems",void 0),I([O({readOnly:!0})],Ud.prototype,"state",null),I([O()],Ud.prototype,"totalItems",null),I([O()],Ud.prototype,"view",void 0),Ud=I([De("esri.widgets.LayerList.LayerListViewModel")],Ud);const MJe=Ud,Zj=t=>AJe(t)||kJe(t),AJe=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},kJe=t=>{const e=Uj(t);if(e!=null&&t.hasOwnProperty(e)&&t[e]!=null){for(const i of t[e])if(Zj(i))return!0}return!1},a9=(t,e)=>e!=null&&t!=null&&(e.test(t.title)?"self":!!t.children.some(i=>a9(i,e)!==!1)&&"children");var $z;let kp=$z=class extends Wj{constructor(t){super(t),this.children=new ci,this.parent=null}get enabled(){const{children:t}=this;if(t.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let e=!1,i=!1;for(const n of t){if(n.enabled==="indeterminate")return n.enabled;if(n.enabled==="enabled"?e=!0:n.enabled==="disabled"&&(i=!0),i&&e)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(t=>[t.layer.id,...t.childLayerIds])}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(i=>i.layer===t)}_initializeChildLayers(t){if(!t)return;const e=t.filter(Zj);super._initializeChildLayers(e)}_createChildItems(t){return t.map(e=>Yj(e)?new $z({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(xl).reverse()}};I([O()],kp.prototype,"enabled",null),I([O()],kp.prototype,"children",void 0),I([O()],kp.prototype,"childLayerIds",null),I([O()],kp.prototype,"featureSource",null),I([O({constructOnly:!0})],kp.prototype,"getFeatureSnappingSources",void 0),I([O()],kp.prototype,"parent",void 0),kp=$z=I([De("esri.widgets.support.SnappingControls.SnappingListItem")],kp);let Ey=class extends MJe{constructor(){super(...arguments),this.featureSnappingSources=new ci}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>{var i;return!((i=e.children)!=null&&i.length)})}_compileList(){var s,r;const e=(r=(s=this.view)==null?void 0:s.map)==null?void 0:r.layers;if(!e)return;const i=e.filter(Zj);this._watchLayersListMode(i);const n=this._getViewableLayers(i);n!=null&&n.length?(this._createNewItems(n),this._removeItems(n),this._sortItems(n)):this._removeAllItems()}_createListItem(e){return new kp({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};I([O()],Ey.prototype,"featureSnappingSources",void 0),I([O()],Ey.prototype,"operationalItems",void 0),I([O()],Ey.prototype,"operationalItemsFlat",null),I([O()],Ey.prototype,"selectableItems",null),Ey=I([De("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Ey);let Yd=class extends Ei{constructor(e){super(e),this.layerListViewModel=new Ey,this.snappingOptions=new x5,this.view=null}initialize(){this.addHandles([xi(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:i})=>{e.view=i},ec),xi(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:i})=>{e.featureSnappingSources=i},ec)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>i.enabled==="enabled")}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>!i.enabled)}get layersEnabledCount(){var e,i;return((i=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:i.filter(n=>n.enabled==="enabled").length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,i){e==null||e.forEach(n=>i?this.enableSnappingForLayer(n):this.disableSnappingForLayer(n))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:{id:i}})=>{e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i)})}enableSnappingForLayer(e){const i=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);i&&(i.enabled=!0)}disableSnappingForLayer(e){const i=this._findSnappingSourceForLayer(e);i&&(i.enabled=!1)}updateEnabledFeatureSources(e){for(const i of this.snappingOptions.featureSources)Yj(i.layer)&&(i.enabled=e.includes(i.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(i=>i.layer.id===e)}_makeSnappingSourceForLayer(e){var s;const i=(s=this.layerListViewModel.operationalItemsFlat.find(r=>r.layer.id===e))==null?void 0:s.layer;if(!i)throw new rt("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(i.type==="group")return;const n=new Cj({layer:i});return this.snappingOptions.featureSources.add(n),n}};I([O()],Yd.prototype,"allLayersEnabled",null),I([O()],Yd.prototype,"allLayersDisabled",null),I([O({constructOnly:!0})],Yd.prototype,"layerListViewModel",void 0),I([O()],Yd.prototype,"layersEnabledCount",null),I([O({type:x5,nonNullable:!0})],Yd.prototype,"snappingOptions",void 0),I([O()],Yd.prototype,"state",null),I([O()],Yd.prototype,"view",void 0),Yd=I([De("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],Yd);const DJe=Yd,Od="esri-snapping-controls",wh={base:Od,container:`${Od}__container`,toggleBlock:`${Od}__toggle-block`,layerListBlock:`${Od}__layer-list-block`,layerList:`${Od}__layer-list`,layerListFilter:`${Od}__layer-list__filter`,layerListButton:`${Od}__layer-list__button`,layerListItem:`${Od}__layer-list__item`,layerListGroup:`${Od}__layer-list__group`,nestedContainer:`${Od}__nested-container`};let xo=class extends Tx{constructor(e,i){super(e,i),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new f7,this._enableSnappingSwitchChange=o=>{this.snappingOptions.enabled=o},this._featureEnabledSwitchChange=o=>{this.snappingOptions.featureEnabled=o},this._gridEnabledSwitchChange=o=>{this.snappingOptions.gridEnabled=o,o&&this._startLoadGrid()},this._selfEnabledSwitchChange=o=>{this.snappingOptions.selfEnabled=o},this._onToggleLayersButtonClick=o=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),$ue(o.target)};const{snappingOptions:n,view:s,viewModel:r}=e;this.viewModel=r??(this._defaultViewModel=new DJe({snappingOptions:n,view:s}))}normalizeCtorArgs(e){const{snappingOptions:i,view:n,viewModel:s,...r}=e;return r}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=co(this._defaultViewModel))}loadDependencies(){return Promise.all([Px({block:()=>st(()=>import("./calcite-block-DjT8jjxP.js"),__vite__mapDeps([329,330]),import.meta.url),button:()=>st(()=>import("./calcite-button-qjzyXLWO.js"),[],import.meta.url),input:()=>st(()=>import("./calcite-input-C4Pqrztb.js"),__vite__mapDeps([87,88,89,90,91,92]),import.meta.url),list:()=>st(()=>import("./calcite-list-Dp5vfzDW.js"),__vite__mapDeps([332,333,334,335,88,89,90,91,92]),import.meta.url),"list-item":()=>st(()=>import("./calcite-list-item-CCOyX-sU.js"),__vite__mapDeps([336,334,333,330]),import.meta.url),checkbox:()=>st(()=>import("./calcite-checkbox-CSkKE-iK.js"),[],import.meta.url),loader:()=>st(()=>import("./calcite-loader-CyDEG_Wv.js"),[],import.meta.url)}),a1e()])}initialize(){this.addHandles(xi(()=>{var e;return((e=this.view)==null?void 0:e.type)==="2d"&&!!this.view.grid},e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=co(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return Ot("div",{"aria-label":e,class:this.classes(wh.base,YE.widget)},Ot("div",{class:wh.container},this._renderContent()))}_renderContent(){var e;return[this._renderToggles(),this._renderLayerList(),((e=this.view)==null?void 0:e.type)==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:i}=this,n=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&(i==null?void 0:i.type)==="2d"?this._renderGridEnabledToggle():null].filter(xl),s=[e.enabledToggle?this._renderEnabledToggle():null,n.length>0?Ot("div",{class:wh.nestedContainer},n):null].filter(xl);return s.length===0?null:Ot("calcite-block",{class:wh.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",open:!0},s)}_renderEnabledToggle(){return Ot(Xb,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return Ot(Xb,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return Ot(Xb,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return Ot(Xb,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:i}=this,n=({target:{value:l}})=>{this._layerListFilter=l===""?null:new RegExp(l,"i")},s=i.layerListViewModel.operationalItems.length>9?Ot("calcite-input",{class:wh.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:n}):null,r=this._secondaryElementsDisabled,o=this.layerListOpen&&!r;return Ot("calcite-block",{class:wh.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:o,onCalciteBlockToggle:l=>this.layerListOpen=l.target.open},s,this._renderToggleLayersButton(),Ot("calcite-list",{class:wh.layerList,selectionMode:"none"},this._renderLayerListItemCollection(i.layerListViewModel.operationalItems)))}_renderGridOptions(){var y;const{view:e,visibleElements:i,snappingManager:n,snappingOptions:s,_openAndReady:r}=this,{gridEnabled:o,enabled:l}=s;(r||(e==null?void 0:e.type)==="2d"&&e.grid)&&this._startLoadGrid();const c=(y=this._gridLoadTask)==null?void 0:y.value,f=c&&(e==null?void 0:e.type)==="2d"&&Ot(c,{snappingManager:n,snappingOptions:s,view:e,visibleElements:i.gridControlsElements});return Ot("calcite-block",{class:wh.layerListBlock,collapsible:!0,disabled:!o||!l,heading:this.messages.gridOptionsHeading,key:"grid-block",open:r,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},f??Ot("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){var e;!this._gridLoadTask&&this.visibleElements.gridControls&&((e=this.view)==null?void 0:e.type)==="2d"&&(this._gridLoadTask=oA(async()=>(await st(async()=>{const{default:i}=await import("./GridControls-Cem3R91e.js");return{default:i}},__vite__mapDeps([337,38,39,73,36,37,306,12,13,14,15,308,40,41,42,309,310,139,140,10,128,304,62,311,312,210,291,184,183,59,44,313,315,101]),import.meta.url)).default))}_renderLayerListItemCollection(e){const i=this._layerListFilter;return e.map(n=>{switch(i?a9(n,i):null){case"children":{const s=n.children.filter(r=>a9(r,i)!==!1);return this._renderLayerListItemGroup(n,s)}case"self":case null:return this._renderLayerListItemOrGroup(n);case!1:return a9(n.parent,i)==="self"?this._renderLayerListItemOrGroup(n):null}}).toArray().filter(xl)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:i}=this,n=e?i.disableAllLayers:i.enableAllLayers;return Ot("calcite-button",{appearance:"transparent",class:wh.layerListButton,label:n,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},n)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:i}}=this,n=e.title||i,s=()=>{this.viewModel.toggleSnappingForLayers([e.layer.id],e.enabled!=="enabled")};return Ot("calcite-list-item",{class:wh.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:n,onCalciteListItemSelect:r=>{r.stopPropagation(),s()}},Ot("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:s}))}_renderLayerListItemGroup(e,i){const{children:n,title:s}=e,r=s||this.messages.untitledLayer,o=s&&s!==""?s:qS(),l=!!(i!=null&&i.length),c=i??n,f=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")};return Ot("calcite-list-item",{class:wh.layerListGroup,key:o,label:r,open:l,onCalciteListItemSelect:y=>{y.stopPropagation(),f()}},Ot("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:f}),Ot("calcite-list",null,this._renderLayerListItemCollection(c)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};I([O()],xo.prototype,"_defaultViewModel",void 0),I([O()],xo.prototype,"_layerListFilter",void 0),I([O()],xo.prototype,"_gridLoadTask",void 0),I([O()],xo.prototype,"_openAndReady",null),I([O()],xo.prototype,"label",null),I([O({type:Boolean,nonNullable:!0})],xo.prototype,"layerListOpen",void 0),I([O({type:Boolean,nonNullable:!0})],xo.prototype,"gridOptionsOpen",void 0),I([O(),N0("esri/widgets/support/SnappingControls/t9n/SnappingControls")],xo.prototype,"messages",void 0),I([O(),N0("esri/t9n/common")],xo.prototype,"messagesCommon",void 0),I([O()],xo.prototype,"snappingOptions",null),I([O()],xo.prototype,"snappingManager",void 0),I([O()],xo.prototype,"view",null),I([O()],xo.prototype,"viewModel",null),I([O({type:f7,nonNullable:!0})],xo.prototype,"visibleElements",void 0),I([O()],xo.prototype,"_enabledToggleDisabled",null),I([O()],xo.prototype,"_secondaryElementsDisabled",null),xo=I([De("esri.widgets.support.SnappingControls")],xo);const NJe=xo,zl="esri-sketch",vo={base:zl,verticalLayout:`${zl}--vertical`,horizontalLayout:`${zl}--horizontal`,panel:`${zl}__panel`,infoPanel:`${zl}__info-panel`,section:`${zl}__section`,toolSection:`${zl}__tool-section`,infoSection:`${zl}__info-section`,infoCountSection:`${zl}__info-count-section`,menuContainer:`${zl}__menu-container`,menuHeader:`${zl}__menu-header`,menuTitle:`${zl}__menu-title`,featureCountBadge:`${zl}__feature-count-badge`,featureCountNumber:`${zl}__feature-count-number`};let ls=class extends Tx{constructor(e,i){super(e,i),this._activeCustomToolOptions=null,this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.customToolOptions=null,this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new m0e,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=(e==null?void 0:e.viewModel)||new LXe}initialize(){const{layer:e,view:i}=this,n=new fJe({view:(i==null?void 0:i.type)==="2d"?i:null,sources:e?[e]:null});this.addHandles([xi(()=>this.viewModel,s=>{this._viewModelHandlesGroup=Po(this._viewModelHandlesGroup),s&&(this._viewModelHandlesGroup=bm([s.on("create",r=>{this.scheduleRender(),this._onCreateOperation(r)}),s.on("update",()=>this.scheduleRender()),s.on("delete",r=>this.emit("delete",r)),s.on("undo",()=>this.scheduleRender()),s.on("redo",()=>this.scheduleRender()),xi(()=>s.layer,r=>{this._selectionToolbar&&(this._selectionToolbar.sources=r?[r]:null)}),xi(()=>s.view,r=>{this._selectionToolbar&&(this._selectionToolbar.view=(r==null?void 0:r.type)==="2d"?r:null)}),xi(()=>s.state,()=>this.notifyChange("state"))]))},ac),D0(()=>n.activeToolInfo,()=>this.viewModel.cancel()),n.on("complete",s=>this._onSelectionOperationComplete(s)),xi(()=>{const{selectionTools:s}=this.visibleElements;return{lassoTool:!!(s!=null&&s["lasso-selection"]),rectangleTool:!!(s!=null&&s["rectangle-selection"])}},s=>{Object.assign(n.visibleElements,s)},ac)]),this._selectionToolbar=n}loadDependencies(){return Px({action:()=>st(()=>import("./calcite-action-C3p1LNKY.js"),[],import.meta.url),icon:()=>st(()=>import("./calcite-icon-uZdnCpqZ.js"),[],import.meta.url)})}destroy(){var e;(e=this._selectionToolbar)==null||e.destroy(),this._viewModelHandlesGroup=Po(this._viewModelHandlesGroup)}get activeTool(){var i;const e=(i=this._selectionToolbar)==null?void 0:i.activeToolInfo;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){var e;return(e=this._selectionToolbar)!=null&&e.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const i=this._get("viewModel");e!==i&&(i&&co(i),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,visibleElements:i}=this;return e==null?void 0:e.filter(n=>{var s;return!!((s=i.createTools)!=null&&s[n])})}create(e,i,n){const s=(n==null?void 0:n.createOptions)??i;return this._activeCreateOptions=s||null,this._activeCustomToolOptions=n,ad(this.viewModel.create(e,s))}update(e,i){return ad(this.viewModel.update(e,i))}complete(){this.viewModel.complete()}cancel(){var e;(e=this._selectionToolbar)==null||e.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){var e;this.viewModel.undo(),(e=this.view)==null||e.focus()}redo(){var e;this.viewModel.redo(),(e=this.view)==null||e.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){const{label:e,layout:i,viewModel:{state:n}}=this;return Ot("div",{"aria-label":e,class:this.classes(vo.base,YE.widget,{[YE.disabled]:n==="disabled",[vo.verticalLayout]:i==="vertical",[vo.horizontalLayout]:i==="horizontal"})},Ot("div",{class:vo.panel,role:"toolbar"},this._renderTopPanelContents()),Ot("div",{class:this.classes(vo.panel,vo.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){var c;const e=this.classes(vo.section,vo.toolSection),{_effectiveAvailableCreateTools:i,customToolOptions:n,visibleElements:s,viewModel:r}=this,o=r.updateOnGraphicClick||((c=this._selectionToolbar)==null?void 0:c.visibleToolCount),l=!(!(i!=null&&i.length)&&!(n!=null&&n.length));return[o?Ot("div",{class:e,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,l?Ot("div",{class:e,role:"menu"},this._renderDrawActions(),this._renderCustomToolActions()):null,s.undoRedoMenu?Ot("div",{class:e,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,s.settingsMenu?Ot("div",{class:vo.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[Ot("div",{class:this.classes(vo.section,vo.infoSection,vo.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),Ot("div",{class:this.classes(vo.section,vo.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){const{messagesCommon:e,snappingOptions:i,view:n,viewModel:s,visibleElements:r}=this,o={directionModePicker:r.directionModePicker,labelsToggle:r.labelsToggle,tooltipsToggle:r.tooltipsToggle};return Ot("div",{class:vo.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},Ot("header",{class:vo.menuHeader,key:"settings-menu-header"},Ot("span",{class:vo.menuTitle},e.settings)),Object.values(o).includes(!0)?Ot(mJe,{sketchOptions:s.sketchOptions,viewType:n==null?void 0:n.type,visibleElements:o}):void 0,r.snappingControls&&n&&i?Ot(NJe,{snappingManager:this.viewModel.snappingManager,snappingOptions:i,view:n,visibleElements:r.snappingControlsElements}):void 0)}_renderFeatureCount(){const{layout:e,messages:i,updateGraphics:{length:n}}=this,s=due(i.selectedCount,{count:n});return Ot("div",{"aria-label":s,class:vo.featureCountBadge},Ot("span",{class:vo.featureCountNumber},e==="vertical"?n:s))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;const e=this.messages,i=this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature;return Ot("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:i,title:i},Ot("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){const e=this.messages,i=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return Ot("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:i,title:i},Ot("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const{messages:e,state:i}=this,n=e.selectFeature;return Ot("calcite-action",{active:i==="ready",bind:this,disabled:i==="disabled",onclick:this._activateDefaultSelectTool,scale:"s",text:n,title:n},Ot("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){var e;if(((e=this.view)==null?void 0:e.type)==="2d"&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){var i;const{messages:e}=this;return(i=this._effectiveAvailableCreateTools)==null?void 0:i.map(n=>{switch(n){case"point":return this._renderAction(n,e.drawPoint,"pin");case"polyline":return this._renderAction(n,e.drawPolyline,"line");case"polygon":return this._renderAction(n,e.drawPolygon,"polygon");case"rectangle":return this._renderAction(n,e.drawRectangle,"rectangle");case"circle":return this._renderAction(n,e.drawCircle,"circle");default:return}})}_renderCustomToolActions(){var e;return(e=this.customToolOptions)==null?void 0:e.map(i=>this._renderCustomToolAction(i))}_renderCustomToolAction(e){var o;const{icon:i,label:n,toolKey:s,toolName:r}=e;return Ot("calcite-action",{active:((o=this._activeCustomToolOptions)==null?void 0:o.toolKey)===s,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(r,null,e),scale:"s",text:n,title:n},Ot("calcite-icon",{icon:i,scale:"s"}))}_renderAction(e,i,n){return Ot("calcite-action",{active:this.activeTool===e&&!this._activeCustomToolOptions,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(e),scale:"s",text:i,title:i},Ot("calcite-icon",{icon:n,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){const e=this.messages.undo;return Ot("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||this.state==="disabled",onclick:this.undo,scale:"s",text:e,title:e},Ot("calcite-icon",{icon:QZ(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){const e=this.messages.redo;return Ot("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||this.state==="disabled",onclick:this.redo,scale:"s",text:e,title:e},Ot("calcite-icon",{icon:QZ(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){const e=this.messagesCommon.settings;return Ot("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:this.state==="disabled",onclick:this._toggleMenu,scale:"s",text:e,title:e},Ot("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(e,i,n){var r;const s=this._activeCustomToolOptions;if(n||s){if((n==null?void 0:n.toolKey)===(s==null?void 0:s.toolKey))return void this.cancel()}else if(this.activeTool===e)return void this.cancel();(r=this._selectionToolbar)==null||r.cancel(),this.create(e,i,n)}_onCreateOperation(e){if(e.state!=="complete")return;const{creationMode:i}=this,{type:n}=e;if(n==="create"){const{tool:s,graphic:r}=e,o=this._activeCreateOptions;this._activeCreateOptions=null,i==="continuous"?this.create(s,o,this._activeCustomToolOptions):(this._activeCustomToolOptions=null,i==="update"&&this.update([r]))}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){const e=this.duplicate(),i=this.viewModel.activeTool;i!=="transform"&&i!=="reshape"||this.update(e,{tool:i})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:i}}=this,{selection:n}=e;if(!e.aborted&&n.length){const s=i.tool,r=n.length>1&&s==="reshape"?"transform":s;this.update(n,{...i,tool:r})}this.notifyChange("state")}_activateDefaultSelectTool(){var e;this.cancel(),(e=this.view)==null||e.focus()}};I([O()],ls.prototype,"_activeCustomToolOptions",void 0),I([O()],ls.prototype,"_activeCreateOptions",void 0),I([O()],ls.prototype,"activeTool",null),I([O({readOnly:!0})],ls.prototype,"activeTooltip",null),I([O({cast:t=>{if(!(t!=null&&t.length))return null;const e=new Set(["point","polyline","polygon","rectangle","circle"]);return t.filter(i=>e.has(i))}})],ls.prototype,"availableCreateTools",void 0),I([O({readOnly:!0})],ls.prototype,"createGraphic",null),I([O()],ls.prototype,"creationMode",void 0),I([O()],ls.prototype,"customToolOptions",void 0),I([O()],ls.prototype,"defaultCreateOptions",null),I([O()],ls.prototype,"defaultUpdateOptions",null),I([O()],ls.prototype,"icon",null),I([O()],ls.prototype,"label",null),I([O()],ls.prototype,"labelOptions",null),I([O()],ls.prototype,"layer",null),I([O({type:["horizontal","vertical"]})],ls.prototype,"layout",void 0),I([O(),N0("esri/widgets/Sketch/t9n/Sketch")],ls.prototype,"messages",void 0),I([O(),N0("esri/t9n/common")],ls.prototype,"messagesCommon",void 0),I([O()],ls.prototype,"snappingOptions",null),I([O()],ls.prototype,"state",null),I([O()],ls.prototype,"tooltipOptions",null),I([O({readOnly:!0})],ls.prototype,"updateGraphics",null),I([O({type:QA,nonNullable:!0})],ls.prototype,"valueOptions",null),I([O()],ls.prototype,"view",null),I([O(),EJe(["create","update","undo","redo"])],ls.prototype,"viewModel",null),I([O({type:m0e,nonNullable:!0})],ls.prototype,"visibleElements",void 0),I([O()],ls.prototype,"_effectiveAvailableCreateTools",null),ls=I([De("esri.widgets.Sketch")],ls);const P5=ls,OJe=Object.freeze(Object.defineProperty({__proto__:null,default:P5},Symbol.toStringTag,{value:"Module"}));let Aa=class{*[Symbol.iterator](){let e=this.next();for(;e;)yield e,e=this.next()}},nh=class extends Aa{constructor(e){super(),this.m_iGeom=-1,this.m_aGeoms=e?e.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const e=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,e}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}};function $Je(t){switch(t){case 1:return"Unknown error";case 2:return"Corrupted geometry";case 3:return"Empty geometry";case 4:return"Math singularity";case 5:return"Buffer is too small";case 6:return"Invalid shape type";case 7:return"Projection out of supported range";case 8:return"Non simple geometry";case 9:return"Cannot calculate geodesic";case 10:return"Notation conversion";case 11:return"Missing grid file";case 12:return"Invalid call";case 13:return"Internal error";case 14:return"Not implemented";case 15:return"IO error";case 16:return"Invalid 3D";case 17:return"An ambiguous geography edge with antipodal points";case 18:return"Geocentric coordinates require ellipsoidal height";case 19:return"Geography cannot be projected into a gnomonic plane or a result of an operation cannot fit into a gnomonic plane";case 20:return"Geometry is too large to be exported in to a given format";case 21:return"Operation is canceled by the user";default:return"unknown error"}}function K(t,e){try{if(!t)throw new Error(e)}catch(i){throw i}}class Kv extends Error{constructor(e,i){super(),this.m_AdditionalMessage=i,this.m_ErrorType=e}what(){return $Je(this.m_ErrorType)}additionalMessage(){return this.m_AdditionalMessage?this.m_AdditionalMessage:""}code(){return this.m_ErrorType}}let RJe=class extends Kv{constructor(e){super(2,e),this.name="corrupted geometry exception"}},LJe=class extends Kv{constructor(e){super(3,e),this.name="empty gemetry exception"}},FJe=class extends Kv{constructor(e){super(4,e),this.name="match singularity exception"}},zJe=class extends Kv{constructor(e){super(8,e),this.name="non simple geometry exception"}};var me;(function(t){t[t.enumUnknown=0]="enumUnknown",t[t.enumPoint=513]="enumPoint",t[t.enumLine=5122]="enumLine",t[t.enumBezier=5123]="enumBezier",t[t.enumEllipticArc=5124]="enumEllipticArc",t[t.enumEnvelope=3077]="enumEnvelope",t[t.enumMultiPoint=8710]="enumMultiPoint",t[t.enumPolyline=25607]="enumPolyline",t[t.enumPolygon=27656]="enumPolygon",t[t.enumMultipatch=40969]="enumMultipatch",t[t.enumGeometryCollection=3594]="enumGeometryCollection",t[t.enumRationalBezier2=5134]="enumRationalBezier2",t[t.enumBezier2=5135]="enumBezier2",t[t.enumRationalBezier23d=5392]="enumRationalBezier23d",t[t.enumGreatArc3d=5393]="enumGreatArc3d"})(me||(me={}));const qJe=[0,0,1,1,1,2,0,1,2,3,-1,-1,-1,-1,1,1];function ml(t){return qJe[15&t]}function V0(t){return!!(512&t)}function p1e(t){return!!(1024&t)}function Lte(t){return!!(2048&t)}function Ds(t){return!!(4096&t)}function rl(t){return!!(8192&t)}function bi(t){return!!(16384&t)}function _7(t){return!!(32768&t)}function WE(t){const e=t.getGeometryType();return rl(e)?t.getPointCount():t.isEmpty()?0:e===me.enumEnvelope?4:e===me.enumPoint?1:Ds(e)?2:void xt("missing type")}function Kj(t){const e=t.getGeometryType();if(bi(e))return t.hasNonLinearSegments();if(e===me.enumGeometryCollection){const i=t;for(let n=0,s=i.getGeometryCount();n<s;n++)if(Kj(i.getGeometry(n)))return!0;return!1}return!!Ds(e)&&e!==me.enumLine}function m1e(t){throw new RJe(t)}function Je(t){const e=new Error(t);throw e.name="invalid argument exception",e}function Rz(t){const e=new FJe(t);throw e.name="invalid argument exception",e}function VJe(){Je("Geometry type is not supported for 3D operations.")}function xs(t){throw new Kv(12,t)}function b7(t){throw new LJe(t)}function Bn(t){const e=new Kv(14,t);throw e.name="not implemented",e}function Mi(t){const e=new Error(t);throw e.name="out of range exception",e}function xt(t){const e=new Kv(13,t);throw e.name="internal error",e}function GJe(t){const e=new Error(t);throw e.name="logic error exception",e}function Lz(t){throw new zJe(t)}function jJe(){Bn("operation does not support curves yet")}function ex(t){t&&Kj(t)&&jJe()}function sh(t){t&&_7(t.getGeometryType())&&Bn("Unsupported geometry type.")}function x7(t){t===me.enumGeometryCollection&&Je("Geometry_collection instances are not supported in this operation")}function BJe(t){x7(t.getGeometryType())}function ZE(t,e){t||Je(e)}class Br{constructor(e){this.sum=e,this.compensation=0}assign(e){return this.compensation=e.compensation,this.sum=e.sum,this}reset(){this.sum=this.compensation=0}resetToStart(e){this.sum=e,this.compensation=0}normalize(){K(0)}add(e){const i=this.sum+e;let n;if(Math.abs(this.sum)>=Math.abs(e)){const s=this.sum-i+e;n=this.compensation+s}else{const s=e-i+this.sum;n=this.compensation+s}this.sum=i,this.compensation=n}sub(e){this.add(-e)}addProduct(e,i){const n=[0],s=g1e(e,i,n);this.add(s),this.add(n[0])}addKahan(e){K(0)}subKahan(e){K(0)}mulKahan(e){K(0)}mul(e){const i=new Br(0);i.addProduct(this.sum,e),i.addProduct(this.compensation,e),this.assign(i)}getResult(){return this.sum+this.compensation}pe(e){return this.add(e),this}me(e){return this.add(-e),this}meKahan(e){return this.subKahan(e),this}peKahan(e){return this.addKahan(e),this}}const HJe=0x00000000ffffffffn,UJe=0x0000ffffn,YJe=0x000000ffn,XJe=0x0fn,WJe=0xffff0000n,ZJe=0xff00n,KJe=0xf0n,JJe=[5,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1],QJe=[-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3];function Fz(t){let e=0;return t&UJe||(e+=16,t>>=16n),t&YJe||(e+=8,t>>=8n),t&XJe||(e+=4,t>>=4n),e+JJe[Number(BigInt.asUintN(4,t))]}function eQe(t){let e=0;return t&WJe&&(e+=16,t>>=16n),t&ZJe&&(e+=8,t>>=8n),t&KJe&&(e+=4,t>>=4n),e+QJe[Number(BigInt.asUintN(4,t))]+1}function Fte(t){let e=0;return t&HJe||(e=32,t>>=32n),e+Fz(BigInt.asUintN(32,t))}function tQe(t){let e=0;return 0xffffffff00000000n&t&&(e=32,t>>=32n),e+eQe(t)}class Ze{constructor(e,i){if(e!==void 0){if(e instanceof Ze)return this.vmin=e.vmin,void(this.vmax=e.vmax);this.vmin=e,this.vmax=i,this.normalize()}else this.setEmpty()}static construct(e,i){return new Ze(e,i)}static constructEmpty(){return new Ze}setCoords(e,i){this.vmin=e,this.vmax=i,this.normalize()}setCoordsFromEnvelope(e){this.vmin=e.vmin,this.vmax=e.vmax}setEmpty(){this.vmin=Number.NaN,this.vmax=Number.NaN}getCenter(){return .5*(this.vmin+this.vmax)}equalsRange(e,i){return va(this.vmin,e)&&va(this.vmax,i)}equals(e,i){return!(!this.isEmpty()||!e.isEmpty())||(i!==void 0?Math.abs(this.vmin-e.vmin)<=i&&Math.abs(this.vmax-e.vmax)<=i:this.vmin===e.vmin&&this.vmax===e.vmax)}width(){return this.vmax-this.vmin}isEmpty(){return Number.isNaN(this.vmin)||Number.isNaN(this.vmax)}isZero(){return K(0),!0}setInfinite(){this.vmin=Number.NEGATIVE_INFINITY,this.vmax=Number.POSITIVE_INFINITY}move(e){this.isEmpty()||(this.vmin+=e,this.vmax+=e)}contains(e){return e.vmin>=this.vmin&&e.vmax<=this.vmax}containsCoordinate(e){return e>=this.vmin&&e<=this.vmax}containsRightExclusive(e){return e>=this.vmin&&e<this.vmax}containsExclusiveCoordinate(e){return e>this.vmin&&e<this.vmax}containsExclusive(e){return K(0),!0}isIntersecting(e){return this.vmin<=e.vmin?this.vmax>=e.vmin:e.vmax>=this.vmin}mergeCoordinate(e){if(this.isEmpty())return this.vmin=e,void(this.vmax=e);this.mergeNeCoordinate(e)}merge(e){if(e.isEmpty())return;const i=e.vmin,n=e.vmax;this.mergeCoordinate(i),this.mergeCoordinate(n)}mergeNe(e){const i=e.vmin,n=e.vmax;this.mergeNeCoordinate(i),this.mergeNeCoordinate(n)}mergeNeCoordinate(e){e<this.vmin?this.vmin=e:e>this.vmax&&(this.vmax=e)}intersect(e){this.isEmpty()||e.isEmpty()?this.setEmpty():(this.vmin<e.vmin&&(this.vmin=e.vmin),this.vmax>e.vmax&&(this.vmax=e.vmax),this.vmin>this.vmax&&this.setEmpty())}inflate(e){K(0)}normalize(){this.vmin<=this.vmax||(this.vmin>this.vmax?this.vmax=Et(this.vmin,this.vmin=this.vmax):this.setEmpty())}isValid(){return this.isEmpty()||this.vmin<=this.vmax}snapClip(e){return hs(e,this.vmin,this.vmax)}calculateToleranceFromEnvelope(){return this.isEmpty()?Cv():(Math.abs(this.vmin)+Math.abs(this.vmax)+1)*Cv()}static unit(){return iQe}normalizeNoNAN(){this.vmin>this.vmax&&(this.vmax=Et(this.vmin,this.vmin=this.vmax))}setCoordsNoNAN(e,i){this.vmin=e,this.vmax=i,this.normalizeNoNAN()}clone(){return new Ze(this.vmin,this.vmax)}}const iQe=new Ze(0,1);let Be=class zn{static getNAN(){return new zn(Number.NaN)}constructor(e,i){this.m_value=e??0,this.m_eps=i??0}[Symbol.toPrimitive](e){return this}clone(){return new zn(this.m_value,this.m_eps)}assign(e){return this.m_value=e.m_value,this.m_eps=e.m_eps,this}scaleError(e){this.m_eps*=e}setError(e){this.m_eps=e}set(e,i){return this.m_value=e,this.m_eps=i??0,this}setWithEps(e,i){return i===void 0&&(i=1),this.m_value=e,this.m_eps=zn.ulp(e)*i,this}setE(e){return this.m_value=e.m_value,this.m_eps=e.m_eps,this}precise(){return new zn(this.m_value)}value(){return this.m_value}toDouble(){return this.m_value}eps(){return this.m_eps}resetError(){return this.m_eps=0,this}absThis(){return this.m_value=Math.abs(this.m_value),this}add(e){return this.clone().addThis(e)}addE(e){return this.clone().addThisE(e)}addThisE(e){const i=this.m_value+e.m_value,n=this.m_eps+e.m_eps+zn.ulp(i);return this.m_value=i,this.m_eps=n,this}addThis(e){const i=this.m_value+e,n=this.m_eps+zn.ulp(i);return this.m_value=i,this.m_eps=n,this}subE(e){return this.clone().subThisE(e)}sub(e){return this.clone().subThis(e)}subThisE(e){const i=this.m_value-e.m_value,n=this.m_eps+e.m_eps+zn.ulp(i);return this.m_value=i,this.m_eps=n,this}subThis(e){const i=this.m_value-e,n=this.m_eps+zn.ulp(i);return this.m_value=i,this.m_eps=n,this}setAddE(e,i){return this.m_value=e.m_value+i.m_value,this.m_eps=e.m_eps+i.m_eps+zn.ulp(this.m_value),this}setAdd(e,i){return this.m_value=e+i,this.m_eps=zn.ulp(this.m_value),this}setAddEN(e,i){return this.m_value=e.m_value+i,this.m_eps=e.m_eps+zn.ulp(this.m_value),this}setAddNE(e,i){return this.m_value=e+i.m_value,this.m_eps=i.m_eps+zn.ulp(this.m_value),this}setSubE(e,i){return this.m_value=e.m_value-i.m_value,this.m_eps=e.m_eps+i.m_eps+zn.ulp(this.m_value),this}setSub(e,i){return this.m_value=e-i,this.m_eps=zn.ulp(this.m_value),this}setSubEN(e,i){return this.m_value=e.m_value-i,this.m_eps=e.m_eps+zn.ulp(this.m_value),this}setSubNE(e,i){return this.m_value=e-i.m_value,this.m_eps=i.m_eps+zn.ulp(this.m_value),this}mulThisE(e){const i=this.m_value*e.m_value;return this.m_eps=this.m_eps*Math.abs(e.m_value)+e.m_eps*Math.abs(this.m_value)+this.m_eps*e.m_eps+zn.ulp(i),this.m_value=i,this}mulThis(e){const i=this.m_value*e;return this.m_eps=this.m_eps*Math.abs(e)+zn.ulp(i),this.m_value=i,this}mul(e){return this.clone().mulThis(e)}mulE(e){return this.clone().mulThisE(e)}setMulE(e,i){const n=e.m_value*i.m_value;return this.m_eps=e.m_eps*Math.abs(i.m_value)+i.m_eps*Math.abs(e.m_value)+e.m_eps*i.m_eps+zn.ulp(n),this.m_value=n,this}setMul(e,i){return this.m_value=e*i,this.m_eps=zn.ulp(this.m_value),this}setMulEN(e,i){return this.setE(e),this.mulThis(i)}setMulNE(e,i){return this.setE(i),this.mulThis(e)}mulThisByPower2(e){return this.m_value*=e,this.m_eps*=Math.abs(e),this}static st_mulByPower2(e,i){return new zn(e.m_value,e.m_eps).mulThisByPower2(i)}divE(e){return this.clone().divThisE(e)}divThisE(e){const i=Math.abs(e.m_value),n=this.m_value/e.m_value;let s=(this.m_eps+Math.abs(n)*e.m_eps)/i;if(e.m_eps>.01*i){const r=e.m_eps/i;s*=1+(1+r)*r}return this.m_value=n,this.m_eps=s+zn.ulp(n),this}divThis(e){const i=Math.abs(e);return this.m_value/=e,this.m_eps=this.m_eps/i+zn.ulp(this.m_value),this}setDivE(e,i){return this.setE(e),this.divThisE(i)}setDiv(e,i){return this.m_value=e/i,this.m_eps=zn.ulp(this.m_value),this}setDivEN(e,i){return this.setE(e),this.divThis(i)}setDivNE(e,i){return this.set(e),this.divThisE(i)}divThisByPower2(e){return this.m_value/=e,this.m_eps/=Math.abs(e),this}invThis(){return this.setE(hm.clone().divThisE(this)),this}sqrt(){return this.clone().sqrtThis()}sqrtThis(){let e,i;return this.m_value>=0?(e=Math.sqrt(this.m_value),i=this.m_value>10*this.m_eps?.5*this.m_eps/e:this.m_value>this.m_eps?e-Math.sqrt(this.m_value-this.m_eps):Math.max(e,Math.sqrt(this.m_value+this.m_eps)-e),i+=zn.ulp(e)):this.m_value<-this.m_eps?(e=Number.NaN,i=Number.NaN):(e=0,i=Math.sqrt(this.m_eps)),this.m_value=e,this.m_eps=i,this}sqr(){return this.clone().sqrThis()}sqrThis(){const e=this.m_value*this.m_value;return this.m_eps=2*this.m_eps*Math.abs(this.m_value)+this.m_eps*this.m_eps+zn.ulp(e),this.m_value=e,this}cubeThis(){return K(0),this}setSin(e){const i=Math.sin(e.m_value),n=Math.cos(e.m_value);this.m_value=i;const s=Math.abs(i),r=Math.abs(e.value());return this.m_eps=(Math.abs(n)+.5*s*e.m_eps)*e.m_eps+zn.ulp(s+r),this}static ulp(e){let i=C7(e);const n=((0x7ff0000000000000n&i)>>52n)-1075n;return n>-1023n?(i=n+0x3ffn<<52n,yQe(i)):e===0?0:Number.MIN_VALUE}setCos(e){const i=Math.sin(e.m_value),n=Math.cos(e.m_value);this.m_value=n;const s=Math.abs(n),r=Math.abs(e.value());return this.m_eps=(Math.abs(i)+.5*s*e.m_eps)*e.m_eps+zn.ulp(s+r),this}static st_cosAndSin(e,i,n){const s=Math.sin(e.m_value),r=Math.cos(e.m_value);n.m_value=s,i.m_value=r;const o=Math.abs(s),l=Math.abs(r),c=Math.abs(e.value());n.m_eps=(Math.abs(r)+.5*o*e.m_eps)*e.m_eps+zn.ulp(o+c),i.m_eps=(Math.abs(s)+.5*l*e.m_eps)*e.m_eps+zn.ulp(l+c)}setLog(e){return K(0),this}negate(){return this.clone().negateThis()}negateThis(){return this.m_value=-this.m_value,this}setAbs(){return this.m_value=Math.abs(this.m_value),this}static atan2(e,i){return K(0),new zn}acosThis(){return K(0),this}asinThis(){return K(0),this}isInInterval(e){return Ze.construct(this.m_value-this.m_eps,this.m_value+this.m_eps).isIntersecting(e)}eq(e){return Math.abs(this.m_value-e.m_value)<=this.m_eps+e.m_eps}ne(e){return!this.eq(e)}gt(e){return this.m_value-e.m_value>this.m_eps+e.m_eps}lt(e){return e.m_value-this.m_value>this.m_eps+e.m_eps}ge(e){return!this.lt(e)}le(e){return!this.gt(e)}tolEQ(e,i){return Math.abs(this.m_value-e.m_value)<=i||this.eq(e)}tolNE(e,i){return!this.tolEQ(e,i)}tolGT(e,i){return this.m_value-e.m_value>i&&this.gt(e)}tolLT(e,i){return e.m_value-this.m_value>i&&this.lt(e)}tolGE(e,i){return!this.tolLT(e,i)}tolLE(e,i){return!this.tolGT(e,i)}isZero(){return Math.abs(this.m_value)<=this.m_eps}isFuzzyZero(){return this.isZero()&&this.m_eps!==0}tolIsZero(e){return Math.abs(this.m_value)<=Math.max(this.m_eps,e)}setPi(){this.setE(nQe)}setEuler(){this.set(2.718281828459045,Jj())}cubicRootThis(){return K(0),this}powerThis(e){return K(0),this}setPower(e,i){return this.setE(e),this.powerThis(i)}static size(){return 1}};function la(t,e){const i=iM(t),n=iM(e),s=53-Fte(i),r=53-Fte(n);return(s>=0?s:0)+(r>=0?r:0)<=52}function pT(t,e){const i=t+e;return i-t===e&&i-e===t}function cl(t,e){const i=t-e;return t-i===e&&e+i===t}function Jj(){return ts()}Be.dimensions=1;const nQe=new Be(Math.PI,.5*Jj()),Bx=new Be(0,0),hm=new Be(1,0),sQe=new Be(4,0);function Mu(t,e,i){return t.addE(e.subE(t).mulE(i))}function Au(t,e,i){return e.subE(e.subE(t).mulE(hm.subE(i)))}function rQe(t,e){return t<e?ar(t,e):ar(e,t)}function dm(t,e){const i=Math.abs(t);return e>=0?i:-i}function Ev(t){return Math.round(t)}function Zs(t,e,i,n,s){s[0]=e[0]+(i[0]-e[0])*n,s[1]=e[1]+(i[1]-e[1])*n,t===3&&(s[2]=e[2]+(i[2]-e[2])*n)}function Ks(t,e,i,n,s){s[0]=i[0]-(i[0]-e[0])*(1-n),s[1]=i[1]-(i[1]-e[1])*(1-n),t===3&&(s[2]=i[2]-(i[2]-e[2])*(1-n))}function dE(t,e,i,n,s){n<=.5?Zs(t,e,i,n,s):Ks(t,e,i,n,s)}function af(t,e,i,n,s){s[0]=e[0].addE(i[0].subE(e[0]).mulE(n)),s[1]=e[1].addE(i[1].subE(e[1]).mulE(n))}function lf(t,e,i,n,s){s[0]=i[0].subE(i[0].subE(e[0]).mulE(hm.subE(n))),s[1]=i[1].subE(i[1].subE(e[1]).mulE(hm.subE(n)))}function Hi(t,e,i){let n;return n=i<=.5?t+(e-t)*i:e-(e-t)*(1-i),n}function So(t,e,i){return t+(e-t)*i}function jr(t,e,i){return e-(e-t)*(1-i)}function cr(t,e,i,n){i<=.5?(n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i):(n.x=e.x-(e.x-t.x)*(1-i),n.y=e.y-(e.y-t.y)*(1-i))}function oQe(t,e,i,n){i<=.5?(n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i,n.z=t.z+(e.z-t.z)*i):(n.x=e.x-(e.x-t.x)*(1-i),n.y=e.y-(e.y-t.y)*(1-i),n.z=e.z-(e.z-t.z)*(1-i))}function Xi(t){return t*t}function zte(t){return t*t*t}function aQe(t){return 1/Math.sqrt(t)}function ws(t){return t<0?-1:t>0?1:0}const qte=[0],lQe=[0];function Vte(t,e,i){return cQe(g1e(t,e,qte),i,qte[0],lQe)}const HN=[0],UN=[0],YN=[0],XN=[0];function g1e(t,e,i){const n=t*e;return Gte(t,HN,UN),Gte(e,YN,XN),i[0]=UN[0]*XN[0]-(n-HN[0]*YN[0]-UN[0]*YN[0]-HN[0]*XN[0]),n}function Gte(t,e,i){const n=134217729*t;e[0]=n-(n-t),i[0]=t-e[0]}const jte=[0],Bte=[0];function cQe(t,e,i,n){const s=WN(t,e,jte),r=WN(s,i,Bte);return WN(r,jte[0]+Bte[0],n)}function WN(t,e,i){const n=t+e;return Math.abs(t)>Math.abs(e)?i[0]=t-n+e:i[0]=e-n+t,n}function G0(t,e){return t%e}function Qj(t){const e=1-t;if(e===0)return 1;let i;if(e<=.01){const n=e,s=Math.log(n);i=1+n*(.4431471805599453-.25*s+n*(.05680519270997949-.09375*s+n*(.02183137044373718-.05859375*s+n*(.011544521417308362-.042724609375*s+n*(.00714200031339596-.0336456298828125*s+n*(.004854743337164948-.027757644653320312*s+n*(.003514687963781376-.023627042770385742*s)))))))}else{if(t<.016){const n=t;return xa()*(1-n*(.25+n*(.046875+n*(.01953125+n*(.01068115234375+n*(.0067291259765625+n*(.004626274108886719+n*(.0033752918243408203+n*.0025710230693221092))))))))}i=y1e(0,e,1)-t*v1e(0,e,1)/3}return hs(i,1,xa())}function eB(t,e,i=Number.NaN){if(K(e>=0&&e<=1),e===0)return t;let n=1,s=t;if(s<0&&(s=-s,n=-1),e===1){const y=Math.round(s/Di()),_=s-y*Di();return n*(2*y+Math.sin(_))}const r=xa(),o=Math.floor(s/r);1&o?s=(o+1)*r-s:s-=o*r;const l=Math.sin(s),c=Number.isNaN(i)?Qj(e):i;let f;if(l===1)f=c+Math.sqrt(1-e)*(s-r);else{const y=s*s;if(.01424*Math.pow(y,4)<=2*ts())f=s*(1+y*e*(-1/6+y*((4-3*e)/120-(16+(45*e-60)*e)/5040*y)));else if(e<=.01){const _=Math.sin(2*s),x=Math.sin(4*s),S=Math.sin(6*s),P=Math.sin(8*s),A=Math.sin(10*s);f=s+e*((2*-s+_)/8+e*((-3*s+2*_-.25*x)/64+e*((-20*s+15*_-3*x+S/3)/1024+e*(5*(-140*s+112*_-28*x+16/3*S-.5*P)/65536+7*e*((-63*s+52.5*_-15*x+3.75*S-.625*P+.05*A)/65536+e*(-693*s+594*_-185.625*x+1.375*S-12.375*P+1.8*A-.125*Math.sin(12*s))/1048576)))))}else{const _=l*l,x=Math.cos(s),S=x*x,P=_1e(l,x,e);f=l*(y1e(S,P,1)-e*_*v1e(S,P,1)/3)}}return 1&o?f=c*(o+1)-f:f+=c*o,n*f}function uQe(t,e,i=Number.NaN){if(t===0)return 0;let n=1,s=t;t<0&&(s=-s,n=-1);const r=Number.isNaN(i)?Qj(e):i,o=Math.floor(s/r);1&o?s=(o+1)*r-s:s-=o*r;let l=s<=0?0:s>=r?xa():hQe(s,e,r);return 1&o?l=xa()*(o+1)-l:l+=xa()*o,n*l}function y1e(t,e,i){K((t!==0?1:0)+(e!==0?1:0)+1>1);let n=t,s=e,r=i;for(;;){const o=Math.sqrt(n*s)+Math.sqrt(s*r)+Math.sqrt(r*n);n=.25*(n+o),s=.25*(s+o),r=.25*(r+o);const l=(n+s+r)/3,c=(l-n)/l,f=(l-s)/l,y=(l-r)/l;if(Math.abs(c)<=.0024&&Math.abs(f)<=.0024&&Math.abs(y)<=.0024){const _=c*f-y*y,x=c*f*y;return(1+(1/24*_-.1-3/44*x-5*_*_/208+_*x/16)*_+(1/14+3*x/104)*x)/Math.sqrt(l)}}}function v1e(t,e,i){K(t!==0||e!==0);let n=t,s=e,r=i;const o=new Br(0);let l=1;for(;;){const c=.2*(n+s+3*r),f=(c-n)/c,y=(c-s)/c,_=(c-r)/c;if(Math.abs(f)<=.0015&&Math.abs(y)<=.0015&&Math.abs(_)<=.0015){const D=f*y,N=_*_,F=D-N,G=D-6*N,V=G+F+F,B=9/22,W=3/26,J=G*(.25*B*G-3/14-1.5*W*_*V),re=_*(1/6*V+_*(-.4090909090909091*F+_*W*D));return 3*o.getResult()+l*(1+J+re)/(c*Math.sqrt(c))}const x=Math.sqrt(n),S=Math.sqrt(s),P=Math.sqrt(r),A=x*(S+P)+S*P;o.add(l/(P*(r+A))),l*=.25,n=.25*(n+A),s=.25*(s+A),r=.25*(r+A)}}function _1e(t,e,i){return t<.999?1-i*Xi(t):1-i+i*Xi(e)}function hQe(t,e,i){if(e===0)return t;if(e===1)return Math.asin(t);let n=0,s=!0;if(t<.2){const o=t*t,l=t*(1+o*e*(1/6+o*((13*e-4)/120+(16-284*e+493*e*e)/5040*o))),c=Math.abs(e*(4944*e-64-31224*e*e+37369*e*e*e)/362880*Math.pow(t,9));if(c<Math.abs(l)*ts())return l;n=l,s=c>.1*l}if(s){const o=1-e,l=1-t/i,c=Math.sqrt(l*l+o*o),f=Math.atan2(o,t+ts());n=xa()+Math.sqrt(c)*(f-xa())}let r=0;for(let o=0;o<7;o++){r=eB(n,e,i);const l=_1e(Math.sin(n),Math.cos(n),e);if(n-=(r-t)/Math.sqrt(l),o>0&&Math.abs(r-t)<=4*ts()*t)break}return n}function w7(t,e,i,n,s){return t===0?n===0?e:n===1?i:s:t===1?n===0?e:n===1?i:Hi(e,i,n):(t===2&&Bn("angular interpolation"),void Bn(""))}function zz(t,e,i,n,s,r,o,l){if(t===0)for(let c=0;c<r;++c)n[c+s]=o===0?e[c]:o===1?i[c]:l;else if(t===1)if(o===0)fs(n,e,s,0,r);else if(o===1)fs(n,i,s,0,r);else for(let c=0;c<r;++c)n[c+s]=Hi(e[c],i[c],o);else if(t===2)if(o===0)fs(n,e,s,0,r);else if(o===1)fs(n,i,s,0,r);else{let c=0;for(let f=0,y=s;f<r;++f,++y)n[y]=Hi(e[f],i[f],o),c+=n[y]*n[y];if(c>0){c=Math.sqrt(c);for(let f=s;f<s+r;++f)n[f]/=c}else{for(let f=s;f<s+r;++f)n[f]=0;n[s]=1}}else Bn("")}function fs(t,e,i,n,s){if(s===0)return;let r=0,o=i,l=n;for(;r++<s;)t[o++]=e[l++]}function Et(t,e){return t}function Hx(t){t.sort((e,i)=>e<i?-1:e>i?1:0)}function qz(t,e){const i=t.slice(0,e);Hx(i),fs(t,i,0,0,e)}function dd(t,e,i,n){const s=t.slice(e,e+i);s.sort(n),fs(t,s,e,0,i)}function Mf(t,e){return t<e?-1:t>e?1:0}function Hte(t,e,i,n){return t<i?-1:t>i?1:e<n?-1:e>n?1:0}function b1e(t,e){if(t.length<2)return t.length;let i=0;for(let n=1;n<t.length;++n)e(t[n],t[i])||(i++,t[n]=Et(t[i],t[i]=t[n]));return 1+i}function dQe(t,e){t[e]=t.at(-1),t.pop()}function S7(t,e=!1){return{[Symbol.dispose](){this.bForget||t()},bForget:e}}function Ge(t,e){return Array.from({length:e},()=>new t)}function eM(t,e,i){for(let n=0;n<i;++n)t[n].assign(e[n]);return i}function tM(t,e){const i=t.slice(0,e);for(let n=0;n<e;++n)i[n]=i[n].clone();return i}function fE(t){return Array.from({length:t},()=>null)}function Ute(t,e){return Array.from({length:e},()=>t())}function ji(t,e){return Array.from({length:t},()=>e)}function E7(t,e){return e in t&&Object.getOwnPropertyNames(t).length===1}class fQe{constructor(...e){this.m_elts=e}get length(){return this.m_elts.length}at(e){return this.m_elts[e]}[Symbol.dispose](){for(const e of this.m_elts)e[Symbol.dispose]()}}function ar(t,e){return{first:t,second:e}}const tB=Math.PI,TS=2*Math.PI,Cn=.5*Math.PI,x1e=new ArrayBuffer(8),w1e=new Float64Array(x1e),S1e=new BigUint64Array(x1e),pQe=0x0fffffffffffffn,mQe=0x7ff0000000000000n;function gQe(){return Number.EPSILON*MQe}function C7(t){return w1e[0]=t,S1e[0]}function yQe(t){return S1e[0]=t,w1e[0]}function iM(t){return C7(t)&pQe}function Yte(t){return Number((C7(t)&mQe)>>52n)}function F1(t){if(t===0n)return-1n;if(t===1n||-1n===t)return 0n;t<0n&&(t=-t);let e=0n,i=512n,n=1n<<e+i;for(;t>=n;)e+=i,i<<=1n,n<<=i;let s=e;i>>=1n;let r=s+i;for(;i>0n;)t<1n<<r||(s=r),i>>=1n,r=s+i;return s}function va(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function T5(t,e,i){return t===e||Math.abs(t-e)<=i||Number.isNaN(t)&&Number.isNaN(e)}function Qn(t,e){return t<e?-1:t>e?1:0}function vQe(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;{const i=Number.isNaN(t),n=Number.isNaN(e);return i<n?-1:i>n?1:0}}function _a(){return 2147483647}function Xte(){return 32767}function Eo(){return 2147483647}const P7=Eo(),_Qe=BigInt(P7),E1e=2166136261,IS=16777619;function bQe(t){let e=E1e,i=t;return e=(e^255&i)*IS,i>>=8,e=(e^255&i)*IS,i>>=8,e=(e^255&i)*IS,i>>=8,e=(e^255&i)*IS,e&P7}const xQe=14695981039346656037n,z1=1099511628211n;function wQe(t){let e=xQe,i=t;return e=(e^0xffn&i)*z1,i>>=8n,e=(e^0xffn&i)*z1,i>>=8n,e=(e^0xffn&i)*z1,i>>=8n,e=(e^0xffn&i)*z1,i>>=8n,e=(e^0xffn&i)*z1,i>>=8n,e=(e^0xffn&i)*z1,i>>=8n,e=(e^0xffn&i)*z1,e&_Qe}function SQe(t){return 1103515245*t+12345&2147483647}function EQe(t){let e=E1e;for(let i=0,n=t.length;i<n;++i)e=(e^t.charCodeAt(i))*IS;return e&P7}function Ua(t,e){return e+2654435769+(t<<6)+(t>>2)&P7}function CQe(t,e){return Ua(t,TQe(e))}function C1e(t){return Ua(3735928559,t)}function PQe(t,e){return Ua(t,C1e(e))}function df(t){return bQe(t)}function TQe(t){return Number(wQe(t))}function _2(t){return SQe(t)}const IQe=100,MQe=100;function Cv(){return Number.EPSILON*IQe}function Vz(){return .38196601125010515}function AQe(){return 1.4142135623730951}function ts(){return Number.EPSILON}function An(t,e,i){return t===e||t===i}function hs(t,e,i){return t>=e?t<=i?t:i:e}function Gz(t,e,i){const n=t[0];if(n>=e){if(n<=i)return!1;t[0]=i}else t[0]=e;return!0}function kQe(t,e){return t>=e?e:t<-e?-e:t}function Di(){return tB}function Bo(){return TS}function xa(){return Cn}const DQe=3*xa();function NQe(){return DQe}function OQe(t){return t+0}function Wte(t){return{v:t}}let bt=class sr{constructor(){this.m_rn=Wte(0n),this.m_rd=Wte(1n),this.m_bNaN=!1,this.m_bNormalized=!1,this.m_power=0,this.m_sign=0}static constructAssign(e,i){const n=e.clone();return i!==void 0&&n.limitPrecisionThis(i),n}static constructDouble(e){return new sr().setDouble(e)}static constructInt64(e){return new sr().setInt64(e)}static constructRational(e,i){return new sr().setRational(e,i)}static constructInt32(e){return this.constructInt64(BigInt(Math.trunc(e)))}[Symbol.toPrimitive](e){return this}compare(e){return this.lt(e)?-1:this.gt(e)?1:0}assignCopy(e){return this.setThis(e)}abs(){return this.clone().absThis()}absThis(){return this.isNAN()||(this.m_sign*=this.m_sign),this}clone(){return new sr().setThis(this)}setThis(e){return this.m_bNaN=e.m_bNaN,this.m_bNormalized=e.m_bNormalized,this.m_rn.v=e.m_rn.v,this.m_rd.v=e.m_rd.v,this.m_power=e.m_power,this.m_sign=e.m_sign,this}setZero(){return this.m_rn.v=0n,this.m_rd.v=1n,this.m_bNaN=!1,this.m_power=0,this.m_bNormalized=!0,this.m_sign=0,this}setDouble(e){if(this.setZero(),e===0)return this;if(Number.isInteger(e)&&Math.abs(e)<Eo())return this.setInt32(e);const i=C7(e),n=(i&sr.s_em)>>52n,s=!!(i&sr.s_sm),r=i&sr.s_fm;if(n===sr.s_emax)return r?(this.m_rn.v=this.m_rd.v=0n,this.m_bNaN=!0,this):(this.m_rn.v=s?-1n:1n,this.m_rd.v=0n,this);n===0n&&Bn("denormalized numbers not yet implemented");const o=n-1023n,l=o>=0n?o:0n,c=o<0n?-o:0n;return this.m_rn.v=(1n<<52n|r)<<l,this.m_rd.v=1n<<52n+c,this.m_sign=s?-1:1,this.m_bNormalized=!1,this.normalizeThis()}setInt64(e){return e===0n?this.setZero():(this.m_bNaN=!1,this.m_sign=e>0n?1:-1,this.m_rn.v=e>0n?e:-e,this.m_rd.v=1n,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setRational(e,i){return e===0n?i===0n?this.setNAN():this.setZero():i===0n?e>0n?this.setPositiveInf():this.setNegativeInf():(this.m_sign=(e>0n?1:-1)*(i>0n?1:-1),this.m_rn.v=e>0n?e:-e,this.m_rd.v=i>0n?i:-i,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setInt32(e){return this.setInt64(BigInt(Math.trunc(e)))}getDouble(){return this.convertToDouble()}toDouble(){return this.convertToDouble()}value(){return this.convertToDouble()}isNAN(){return this.m_bNaN}isPositiveInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===1}isNegativeInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===-1}isFinite(){return!this.isNAN()&&this.m_rd.v!==0n}setNAN(){return this.m_bNaN=!0,this.m_rn.v=0n,this.m_rd.v=0n,this.m_power=0,this.m_bNormalized=!0,this}setPositiveInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=1,this.m_power=0,this}setNegativeInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=-1,this.m_power=0,this}subThis(e){if(e.isNAN()&&this.setNAN(),this.isPositiveInf()&&e.isPositiveInf())this.setNAN();else{if(this.isPositiveInf()&&e.isNegativeInf())return this.setPositiveInf(),this;if(this.isNegativeInf()&&e.isNegativeInf())this.setNAN();else if(this.isNegativeInf()&&e.isPositiveInf())return this.setNegativeInf(),this}return this.isNAN()?this:this.opPlusMinus(e,!1)}thisSubAbs(e){return K(0),this}mulThis(e){return e.isNAN()&&this.setNAN(),this.isNAN()?this:(this.m_sign*=e.m_sign,this.m_sign===0?this.setZero():(this.m_rn.v*=e.m_rn.v,this.m_rd.v*=e.m_rd.v,this.m_power+=e.m_power,this.m_bNormalized=!1,this.normalizeThis(),this))}mulDoubleThis(e){return this.mulThis(sr.constructDouble(e))}thisMulInt64(e){return K(0),this}thisMulInt32(e){return K(0),this}divThis(e){return this.mulThis(e.clone().invertThis())}divDoubleThis(e){return this.divThis(sr.constructDouble(e))}addDoubleThis(e){return this.addThis(sr.constructDouble(e))}subDoubleThis(e){return this.subThis(sr.constructDouble(e))}mul(e){return this.clone().mulThis(e)}mulBigIntThis(e){return this.mulThis(sr.constructInt64(e))}mulDouble(e){return this.clone().mulThis(sr.constructDouble(e))}div(e){return this.clone().divThis(e)}divDouble(e){return this.clone().divDoubleThis(e)}add(e){return this.clone().addThis(e)}fmSubThis(e,i){return this.subThis(e.clone().mulThis(i))}fmAddThis(e,i){return this.addThis(e.clone().mulThis(i))}addThis(e){if(e.isNAN()&&this.setNAN(),this.isPositiveInf()&&e.isPositiveInf())return this.setPositiveInf(),this;if(this.isPositiveInf()&&e.isNegativeInf())this.setNAN();else{if(this.isNegativeInf()&&e.isNegativeInf())return this.setNegativeInf(),this;this.isNegativeInf()&&e.isPositiveInf()&&this.setNAN()}return this.isNAN()?this:this.opPlusMinus(e,!0)}addDouble(e){return this.clone().addThis(sr.constructDouble(e))}sub(e){return this.clone().subThis(e)}subDouble(e){return this.clone().subThis(sr.constructDouble(e))}isZero(){return this.m_sign===0}equals(e){return this.clone().subThis(e).isZero()}lt(e){return!this.isNAN()&&!e.isNAN()&&!(this.isPositiveInf()&&e.isPositiveInf()||this.isNegativeInf()&&e.isNegativeInf())&&!this.isPositiveInf()&&(!!e.isPositiveInf()||this.clone().sub(e).LZ())}absLessAbs(e){return this.abs().lt(e.abs())}gt(e){return this.clone().sub(e).GZ()}lte(e){return this.sub(e).LEZ()}gte(e){return this.sub(e).GEZ()}normalizeThis(){if(this.m_bNormalized)return this;if(this.m_rn.v===0n)return this.setZero();let e=0,i=0xffffffffn;for(;(this.m_rn.v&i)===0n&&i<=this.m_rn.v;)i<<=32n,e+=32;i&=this.m_rn.v,i>>=BigInt(e),e+=Fz(BigInt.asUintN(32,i))-1;let n=0;for(i=0xffffffffn;(this.m_rd.v&i)===0n&&i<=this.m_rd.v;)i<<=32n,n+=32;return i&=this.m_rd.v,i>>=BigInt(n),n+=Fz(BigInt.asUintN(32,i))-1,this.m_rn.v>>=BigInt(e),this.m_rd.v>>=BigInt(n),this.m_power+=e-n,this.m_rn.v>1n&&this.m_rd.v>1n&&(this.m_rn.v%this.m_rd.v===0n?(this.m_rn.v/=this.m_rd.v,this.m_rd.v=1n):this.m_rd.v%this.m_rn.v===0n&&(this.m_rd.v/=this.m_rn.v,this.m_rn.v=1n)),this.m_bNormalized=!0,this}negateThis(){return this.isNAN()||(this.m_sign*=-1),this}negate(){return this.clone().negateThis()}invertThis(){return this.isNAN()?this:this.isPositiveInf()||this.isNegativeInf()?(this.setZero(),this):this.m_rn.v===0n?(this.setPositiveInf(),this):(this.m_rd=Et(this.m_rn,this.m_rn=this.m_rd),this.m_power=-this.m_power,this)}limitPrecisionThis(e){if(e===0)return this;if(this.isZero())return this.setZero();if(!this.isFinite())return this;this.normalizeThis();let i=Number(F1(this.m_rn.v));if(i>e){const n=i-e;this.m_rn.v>>=BigInt(i-e),this.m_power+=n}if(i=Number(F1(this.m_rd.v)),i>e){const n=i-e;this.m_rd.v>>=BigInt(i-e),this.m_power-=n}return this}hiBitIndex(){return Math.max(Number(F1(this.m_rn.v)),Number(F1(this.m_rd.v)))}ldexp(e){return this.clone().ldexpThis(e)}ldexpThis(e){return e&&(this.m_bNormalized=!1,this.m_power+=e,this.normalizeThis()),this}LZ(){return!this.isNAN()&&this.m_sign===-1}GZ(){return!this.isNAN()&&this.m_sign===1}LEZ(){return!this.isNAN()&&this.m_sign<=0}GEZ(){return!this.isNAN()&&this.m_sign>=0}toString(){return this.toDouble().toString()}sqr(){return this.clone().sqrThis()}sqrThis(){return this.mulThis(this.clone())}static sqrt(e,i){if(e.m_sign<0n&&Mi("MP_value: sqrt(-1)"),e.isZero())return e.clone();let n=52,s=2220446049250313e-31;for(;n<i;)2*n<=i?(s*=s,n*=2):(s*=2220446049250313e-31,n+=52);n+=52;const r=F1(e.m_rn.v),o=F1(e.m_rd.v);let l,c=e.m_power+Number(r-o);const f=new sr;Math.abs(c)>200?(1&Math.abs(c)&&(c+=1),l=sr.constructAssign(e,53).ldexpThis(-c).value(),f.setThis(e).ldexpThis(-c),K(Number.isFinite(l))):(f.setThis(e),l=f.value(),K(Number.isFinite(l)),c=0),l=Math.sqrt(l);const y=sr.constructDouble(l),_=sr.constructDouble(s);_.mulThis(y).ldexpThis(1);const x=s*l*2,S=y.clone(),P=new sr;let A;for(let D=0;D<10;++D){S.mulThis(y),P.setThis(f).subThis(S).absThis();let N=P.value();if(A=1,N<.9)for(;N>x;)N*=N,++A;else A=4;if(P.lte(_))break;for(let F=0;F<A;F++)S.setThis(y).divThis(f).invertThis().addThis(y).ldexpThis(-1).limitPrecisionThis(n),y.setThis(S)}return y.ldexpThis(c/2)}static cubicRoot(e,i){if(e.isZero())return e.clone();let n=52,s=2220446049250313e-31;for(;n<i;)2*n<=i?(s*=s,n*=2):(s*=2220446049250313e-31,n+=52);n+=52;const r=Math.pow(Math.abs(e.value()),1/3),o=sr.constructDouble(r),l=o.clone();l.sqrThis().mulDoubleThis(3).mulDoubleThis(s),l.limitPrecisionThis(32),e.LZ()&&o.negateThis();for(let c=0;c<10;++c){const f=o.clone();f.sqrThis().mulThis(o);const y=f.clone();if(y.subThis(e),y.absThis().limitPrecisionThis(32),y.lte(l))break;y.setThis(e),y.ldexpThis(1),y.addThis(f);const _=f.clone();_.ldexpThis(1),_.addThis(e),y.divThis(_),o.mulThis(y),o.limitPrecisionThis(n)}return o}isInTheRangeOfDouble(){return K(0),!1}sign(){return this.m_sign}cosAndSin(e,i){K(0)}static nan(){return K(0),new sr}convertToDouble(){if(this.m_bNaN)return Number.NaN;if(this.isZero())return 0;if(this.m_rd.v===0n)return this.m_sign===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;const e=this.m_sign===-1,i=this.m_rn.v<<(this.m_power>=0?BigInt(this.m_power):0n);let n=this.m_rd.v<<(this.m_power<0?BigInt(-this.m_power):0n);const s=i/n;let r=Number(s);if(BigInt(r)!==s)return e?-r:r;let o=i-s*n;if(o){let l=F1(n)-1023n;l>0n&&(n>>=l,o<<=52n,o>>=l);let c=Number(o);Number.isFinite(c)||(o>>=52n,c=Number(o),l=0n),l>0n&&(c/=Math.pow(2,52)),r+=c/Number(n)}return e?-r:r}signVal(){return this.m_sign===1?1n:this.m_sign===-1?-1n:0n}opPlusMinus(e,i){const n=Math.min(this.m_power,e.m_power);let s,r;this.m_power>n?(s=BigInt(this.m_power-n),r=0n):(s=0n,r=BigInt(e.m_power-n));const o=this.signVal()*this.m_rn.v*e.m_rd.v<<s,l=e.signVal()*e.m_rn.v*this.m_rd.v<<r;return this.m_rn.v=i?o+l:o-l,this.m_rd.v*=e.m_rd.v,this.m_power=n,this.m_sign=1,this.m_rn.v<0n&&(this.m_sign=-1,this.m_rn.v=-this.m_rn.v),this.m_bNormalized=!1,this.normalizeThis(),this}};bt.s_sm=0x8000000000000000n,bt.s_em=0x7ff0000000000000n,bt.s_fm=0x000fffffffffffffn,bt.s_emax=0x7ffn;const Yh=bt.constructInt32(1),Ho=bt.constructInt32(0);function $Qe(t,e){return tQe(t^e)}function RQe(t,e){let i=Yte(t);const n=Yte(e);return i===n?(i-=53-$Qe(iM(t),iM(e)),i):i>n?i:n}function X_(t){const e=Ge(Y,t.length);for(let i=0,n=t.length;i<n;++i)e[i].setCoords(t[i][0],t[i][1]);return e}let Y=class un{static construct(e,i){return new un(e,i)}constructor(e,i){e!==void 0?(this.x=e,this.y=i):this.x=this.y=Number.NaN}clone(){return new un(this.x,this.y)}assign(e){this.setCoordsPoint2D(e)}setCoords(e,i){return this.x=e,this.y=i,this}setCoordsPoint2D(e){this.x=e.x,this.y=e.y}isEqualPoint2D(e,i){return i!==void 0?Math.abs(this.x-e.x)<=i&&Math.abs(this.y-e.y)<=i:this.x===e.x&&this.y===e.y}isEqual(e,i,n){return n!==void 0?Math.abs(this.x-e)<=n&&Math.abs(this.y-i)<=n:this.x===e&&this.y===i}equalsPoint2D(e,i){return this.isEqualPoint2D(e,i)}setSub(e,i){this.x=e.x-i.x,this.y=e.y-i.y}addThis(e){return this.x+=e.x,this.y+=e.y,this}setAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}absoluteOther(e){}absolute(){return K(0),this}setNegate(){this.x=-this.x,this.y=-this.y}setNegateOther(e){this.x=-e.x,this.y=-e.y}interpolateThis(e,i){}interpolate(e,i,n){K(0)}scaleAddThis(e,i){this.x=this.x*e+i.x,this.y=this.y*e+i.y}scaleAddOther(e,i,n){K(0)}scaleOther(e,i){K(0)}scale(e){this.x*=e,this.y*=e}compare(e){return this.y<e.y?-1:this.y>e.y?1:this.x<e.x?-1:this.x>e.x?1:0}compareX(e){return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}normalizeOther(e){K(0)}normalize(){const e=this.length();return e?(this.x/=e,this.y/=e):(this.x=1,this.y=0),this}getUnitVector(){return this.clone().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}sqrLength(){return this.x*this.x+this.y*this.y}static averageFast(e,i){return K(0),{}}static average(e,i){const n=new un;if(i===0)return n.setNAN(),n;if(i===1)return n.assign(e[0]),n;const s=new Br(e[0].x),r=new Br(e[0].y);for(let o=1;o<i;o++)s.add(e[o].x),r.add(e[o].y),255&o||(s.normalize(),r.normalize());return n.x=s.getResult()/i,n.y=r.getResult()/i,n}offset(e,i){const n=un.distance(e,i),s=un.construct(this.x,this.y);if(n===0)return un.distance(s,e);const r=i.clone();return r.subThis(e),s.subThis(e),s.crossProduct(r)/n}side(e,i){return K(0),0}static sqrDistance(e,i){const n=e.x-i.x,s=e.y-i.y;return n*n+s*s}static sqrDistanceCoords(e,i,n,s){const r=n-e,o=s-i;return r*r+o*o}static distance(e,i){return Math.sqrt(un.sqrDistance(e,i))}dotProduct(e){return this.x*e.x+this.y*e.y}dotProductAbs(e){return Math.abs(this.x*e.x)+Math.abs(this.y*e.y)}crossProduct(e){return this.x*e.y-this.y*e.x}crossProductAbs(e){return K(0),0}rotateDirect(e,i){const n=this.x*e-this.y*i,s=this.x*i+this.y*e;this.x=n,this.y=s}rotateReverse(e,i){const n=this.x*e+this.y*i,s=-this.x*i+this.y*e;this.x=n,this.y=s}leftPerpendicularThis(){const e=this.x;this.x=-this.y,this.y=e}leftPerpendicularOther(e){const i=e.x;this.x=-e.y,this.y=i}rightPerpendicularThis(){const e=this.x;this.x=this.y,this.y=-e}rightPerpendicularOther(e){const i=e.x;this.x=e.y,this.y=-i}equals(e){return this.x===e.x&&this.y===e.y}notequals(e){return this.x!==e.x||this.y!==e.y}not(){return!this.x&&!this.y}gt(e){return this.y>e.y||this.y===e.y&&this.x>e.x}gte(e){return!this.lt(e)}lt(e){return this.y<e.y||this.y===e.y&&this.x<e.x}lte(e){return!this.gt(e)}subThis(e){return this.x-=e.x,this.y-=e.y,this}divThis(e){return this.x/=e,this.y/=e,this}add(e){return new un(this.x+e.x,this.y+e.y)}sub(e){return new un(this.x-e.x,this.y-e.y)}negateThis(){return this.x=-this.x,this.y=-this.y,this}negate(){return new un(-this.x,-this.y)}mul(e){return new un(this.x*e,this.y*e)}mulThis(e){return this.x*=e,this.y*=e,this}divide(e){return new un(this.x/e,this.y/e)}setNAN(){this.x=this.y=Number.NaN}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)}static getNAN(){return new un(Number.NaN,Number.NaN)}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}isZero(){return this.x===0&&this.y===0}norm(e){switch(e){case 0:{const i=Math.abs(this.x),n=Math.abs(this.y),s=i-n;return s>=0?i:s<=0?n:Number.NaN}case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:Je("norm")}}getQuarter(){return un.getQuarterCoords(this.x,this.y)}static getQuarterCoords(e,i){return e>0?i>=0?1:4:i>0?2:e===0?4:3}static compareVectors(e,i){const n=e.getQuarter(),s=i.getQuarter();return s===n?un.orientationRobustImpl(un.construct(0,0),i,e,!0):n<s?-1:1}static compareVectorsOrigin(e,i,n){const s=i.sub(e),r=n.sub(e),o=s.getQuarter(),l=r.getQuarter();return l===o?un.orientationRobustImpl(e,n,i,!0):o<l?-1:1}static orientationRobust(e,i,n){return un.orientationRobustImpl(e,i,n,!1)}static orientationRobustEx(e,i,n,s){if(e.equals(i)||n.equals(s))return 0;const r=i.x-e.x,o=i.y-e.y,l=s.x-n.x,c=s.y-n.y;{const S=un.getQuarterCoords(r,o)-1,P=un.getQuarterCoords(l,c)-1,A=un.d[S][P];if(A!==0)return A}const f=r*c,y=o*l,_=4*ts()*(Math.abs(f)+Math.abs(y)),x=f-y;return Math.abs(x)>=_?x<0?-1:x>0?1:0:un.orientationRobustExMp(e,i,n,s)}static orientationRobustExMp(e,i,n,s){const r=bt.constructDouble(i.x),o=bt.constructDouble(s.x);r.subThis(bt.constructDouble(e.x)),o.subThis(bt.constructDouble(n.x));const l=bt.constructDouble(i.y),c=bt.constructDouble(s.y);return l.subThis(bt.constructDouble(e.y)),c.subThis(bt.constructDouble(n.y)),r.mulThis(c),l.mulThis(o),r.subThis(l),r.LZ()?-1:r.GZ()?1:0}static orientationNonRobust(e,i,n){const s=i.sub(e).crossProduct(n.sub(e));return s<0?-1:s>0?1:0}static orientationRobustImpl(e,i,n,s){if(i.isEqualPoint2D(e)||n.isEqualPoint2D(e)||i.isEqualPoint2D(n))return 0;const r=i.x-e.x,o=i.y-e.y,l=n.x-e.x,c=n.y-e.y;if(!s){const _=un.getQuarterCoords(r,o)-1,x=un.getQuarterCoords(l,c)-1,S=un.d[_][x];if(S!==0)return S}const f=(Math.abs(r)+Math.abs(o)+Math.abs(l)+Math.abs(c))*(Math.abs(i.x)+Math.abs(i.y)+Math.abs(n.x)+Math.abs(n.y))*8*Jj(),y=r*c-o*l;if(Math.abs(y)>f)return y<0?-1:1;if(cl(i.x,e.x)&&cl(n.y,e.y)&&cl(i.y,e.y)&&cl(n.x,e.x)&&la(r,c)&&la(o,l)){const _=r*c,x=o*l;if(cl(_,x)){const S=_-x;return S<0?-1:S>0?1:0}}return un.orientationRobustMp(e,i,n)}static orientationRobustMp(e,i,n){const s=bt.constructDouble(i.x),r=bt.constructDouble(n.x);{const c=bt.constructDouble(e.x);s.subThis(c),r.subThis(c)}const o=bt.constructDouble(n.y),l=bt.constructDouble(i.y);{const c=bt.constructDouble(e.y);o.subThis(c),l.subThis(c)}return s.mulThis(o),l.mulThis(r),s.subThis(l),s.LZ()?-1:s.GZ()?1:0}static inCircleRobust(e,i,n,s){const r=new Be,o=new Be;r.set(e.x),r.subThis(s.x),o.set(e.y),o.subThis(s.y);const l=new Be,c=new Be;l.set(i.x),l.subThis(s.x),c.set(i.y),c.subThis(s.y);const f=new Be,y=new Be;f.set(n.x),f.subThis(s.x),y.set(n.y),y.subThis(s.y);const _=r.mulE(c).subE(o.mulE(l)),x=l.mulE(y).subE(c.mulE(f)),S=r.mulE(y).subE(o.mulE(f)),P=r.mulE(r).addE(o.mulE(o)),A=l.mulE(l).addE(c.mulE(c)),D=f.mulE(f).addE(y.mulE(y)),N=P.mulE(x).subE(A.mulE(S)).addE(D.mulE(_));if(!N.isFuzzyZero()){const F=N.value();return F<0?-1:F>0?1:0}return un.inCircleRobustMp(e,i,n,s)}static inCircleRobustMp(e,i,n,s){do{if(!cl(e.x,s.x)||!cl(e.y,s.y)||!cl(i.x,s.x)||!cl(i.y,s.y)||!cl(n.x,s.x)||!cl(n.y,s.y))break;const V=e.x-s.x,B=e.y-s.y,W=i.x-s.x,J=i.y-s.y,re=n.x-s.x,ne=n.y-s.y;if(!la(V,J)||!la(B,W)||!la(W,ne)||!la(J,re)||!la(V,ne)||!la(B,re)||!la(V,V)||!la(B,B)||!la(W,W)||!la(J,J)||!la(re,re)||!la(ne,ne))break;const oe=V*J,pe=B*W,ce=W*ne,ue=J*re,se=V*ne,de=B*re,Se=V*V,Pe=B*B,Re=W*W,$e=J*J,we=re*re,Fe=ne*ne;if(!cl(oe,pe)||!cl(ce,ue)||!cl(se,de)||!pT(Se,Pe)||!pT(Re,$e)||!pT(we,Fe))break;const it=oe-pe,_t=ce-ue,ot=se-de,ut=Se+Pe,Pt=Re+$e,Vt=we+Fe;if(!la(ut,_t)||!la(Pt,ot)||!la(Vt,it))break;const Ft=ut*_t,Nt=Pt*ot,Wi=Vt*it;if(!cl(Ft,Nt))break;const hn=Ft-Nt;if(!pT(hn,Wi))break;const ps=hn+Wi;return ps<0?-1:ps>0?1:0}while(!1);const r=bt.constructDouble(s.x),o=bt.constructDouble(s.y),l=bt.constructDouble(e.x),c=bt.constructDouble(e.y);l.subThis(r),c.subThis(o);const f=bt.constructDouble(i.x),y=bt.constructDouble(i.y);f.subThis(r),y.subThis(o);const _=bt.constructDouble(n.x),x=bt.constructDouble(n.y);_.subThis(r),x.subThis(o);const S=l.mul(y).sub(c.mul(f)),P=f.mul(x).sub(y.mul(_)),A=l.mul(x).sub(c.mul(_)),D=l.mul(l).add(c.mul(c)),N=f.mul(f).add(y.mul(y)),F=_.mul(_).add(x.mul(x)),G=D.mul(P).sub(N.mul(A)).add(F.mul(S));return G.LZ()?-1:G.GZ()?1:0}static inCircleRobustMp3Point(e,i,n){const s=bt.constructDouble(e.x),r=bt.constructDouble(e.y),o=bt.constructDouble(i.x),l=bt.constructDouble(i.y),c=bt.constructDouble(n.x),f=bt.constructDouble(n.y),y=c.mul(c).add(f.mul(f)).sub(c.mul(s).add(f.mul(r)).add(c.mul(o)).add(f.mul(l))).add(s.mul(o).add(r.mul(l)));return y.LZ()?-1:y.GZ()?1:0}static inCircleRobust3Point(e,i,n){const s=new Be(e.x),r=new Be(e.y),o=new Be(i.x),l=new Be(i.y),c=new Be(n.x),f=new Be(n.y),y=c.mulE(c).addE(f.mulE(f)).subE(c.mulE(s).addE(f.mulE(r)).addE(c.mulE(o)).addE(f.mulE(l))).addE(s.mulE(o).addE(r.mulE(l)));if(!y.isFuzzyZero()){const _=y.value();return _<0?-1:_>0?1:0}return un.inCircleRobustMp3Point(e,i,n)}static calculateCircleCenterFromThreePoints(e,i,n){if(e.equals(n)||e.equals(i)||n.equals(i))return un.getNAN();const s=LQe(e,i,n);return s.isNAN()?FQe(e,i,n):s}static calculateAngle(e,i){return Math.atan2(e.crossProduct(i),e.dotProduct(i))}static isBisectorRobust(e,i,n){return K(0),!1}static size(){return 2}get 0(){return this.x}get 1(){return this.y}set 0(e){this.x=e}set 1(e){this.y=e}static compareZorder(e,i){const n=un.c_compare_zorder_xx[e.x<0?1:0]|un.c_compare_zorder_yy[e.y<0?1:0],s=un.c_compare_zorder_xx[i.x<0?1:0]|un.c_compare_zorder_yy[i.y<0?1:0];if(n===s){let r=0,o=0;for(let l=0;l<2;++l){const c=RQe(e[l],i[l]);c>r&&(r=c,o=l)}return e[o]<i[o]}return n<s}static lerp(e,i,n){const s=new un;return cr(e,i,n,s),s}static getClosestCoordinate(e,i,n,s=!1){const r=un.getNAN();r.setSub(i,e);const o=r.sqrLength();if(o===0)return .5;if(i.isEqualPoint2D(n))return 1;const l=un.getNAN();l.setSub(n,e);let c=l.dotProduct(r)/o;return s||(c<0?c=0:c>1&&(c=1)),c}static intersectLinesAtOnePoint(e,i,n,s){return K(0),new un(0,0)}toString(){return`[${this.x},${this.y}]`}};function LQe(t,e,i){const n=new Be(e.x);n.subThis(t.x);const s=new Be(e.y);s.subThis(t.y);const r=new Be(i.x);r.subThis(t.x);const o=new Be(i.y);o.subThis(t.y);const l=n.clone();l.mulThisE(o);let c=s.clone();if(c.mulThisE(r),l.subThisE(c),l.value()===0)return Y.getNAN();l.mulThis(2);const f=n.clone();f.mulThisE(n);const y=s.clone();y.mulThisE(s);const _=f.clone();_.addThisE(y);const x=r.clone();x.mulThisE(r);const S=o.clone();S.mulThisE(o);const P=x.clone();P.addThisE(S);const A=s.clone();A.mulThisE(P),c=o.clone(),c.mulThisE(_),A.subThisE(c),A.divThisE(l);const D=n.clone();D.mulThisE(P),c=r.clone(),c.mulThisE(_),D.subThisE(c),D.divThisE(l);const N=Y.construct(t.x-A.value(),t.y+D.value()),F=t.sub(N).length(),G=e.sub(N).length(),V=i.sub(N).length(),B=1e-15*(F+Math.abs(t.x)+Math.abs(e.x)+Math.abs(i.x)+Math.abs(t.y)+Math.abs(e.y)+Math.abs(i.y));return Math.abs(F-G)<=B&&Math.abs(F-V)<=B&&A.eps()<B&&D.eps()<B?N:Y.getNAN()}function FQe(t,e,i){const n=bt.constructDouble(e.x);n.subDoubleThis(t.x);const s=bt.constructDouble(e.y);s.subDoubleThis(t.y);const r=bt.constructDouble(i.x);r.subDoubleThis(t.x);const o=bt.constructDouble(i.y);o.subDoubleThis(t.y);const l=n.clone();l.mulThis(o);let c=s.clone();if(c.mulThis(r),l.subThis(c),l.isZero())return Y.getNAN();l.mulDouble(2);const f=n.clone();f.mulThis(n);const y=s.clone();y.mulThis(s);const _=f.clone();_.addThis(y);const x=r.clone();x.mulThis(r);const S=o.clone();S.mulThis(o);const P=x.clone();P.addThis(S);const A=s.clone();A.mulThis(P),c=o.clone(),c.mulThis(_),A.subThis(c),A.divThis(l);const D=n.clone();return D.mulThis(P),c=r.clone(),c.mulThis(_),D.subThis(c),D.divThis(l),Y.construct(t.x-A.value(),t.y+D.value())}Y.dimensions=2,Y.d=[[0,1,0,-1],[-1,0,1,0],[0,-1,0,1],[1,0,-1,0]],Y.c_compare_zorder_xx=[2,0],Y.c_compare_zorder_yy=[1,0];class vr{constructor(e,i,n){if(e instanceof vr)return this.data=e.data,this.N=e.N,this.M=e.M,e.data=null,e.N=0,void(e.M=0);this.data=e,this.N=i,this.M=n}assignMove(e){return K(0),this}assignCopy(e){return this===e||(K(this.N*this.M==e.N*e.M),this.data.set(e.data),this.N=e.N,this.M=e.M),this}setZero(){var e;return(e=this.data)==null||e.fill(0),this}setIdentity(){for(let n=0;n<this.N;n++)for(let s=0;s<this.M;s++)this.setRowCol(n,s,n===s?1:0);return this}rows(){return this.N}cols(){return this.M}row(e){return K(0),{}}set(e,i){return this.data[e]=i,this}setRowCol(e,i,n){return this.data[e*this.M+i]=n,this}at(e){return this.data[e]}atRowCol(e,i){return this.data[e*this.M+i]}mulScalar(e,i){K(0)}mul(e,i){if(K(this.M===e.rows()),K(this.N===i.rows()),K(e.cols()===i.cols()),i===this){const s=new Float64Array(this.N*this.M),r=new vr(s,this.N,this.M);return this.mul(e,r),void i.assignCopy(r)}if(i===e){const s=new Float64Array(e.N*e.M),r=new vr(s,e.N,e.M);return this.mul(e,r),void i.assignCopy(r)}const n=e.cols();for(let s=0;s<this.N;s++)for(let r=0;r<n;r++){let o=0;for(let l=0;l<this.M;l++)o+=this.atRowCol(s,l)*e.atRowCol(l,r);i.setRowCol(s,r,o)}}mulTranspose(e,i){if(K(this.M===e.cols()),K(this.N===i.rows()),K(e.rows()===i.cols()),i===this){const s=new Float64Array(this.N*this.M),r=new vr(s,this.N,this.M);return this.mulTranspose(e,r),void i.assignCopy(r)}if(i===e){const s=new Float64Array(e.N*e.M),r=new vr(s,e.N,e.M);return this.mulTranspose(e,r),void i.assignCopy(r)}const n=e.rows();for(let s=0;s<this.N;s++)for(let r=0;r<n;r++){let o=0;for(let l=0;l<this.M;l++)o+=this.atRowCol(s,l)*e.atRowCol(r,l);i.setRowCol(s,r,o)}}mulLeft(e,i){K(0)}mulLeftTranspose(e,i){K(0)}mulDiag(e,i){if(K(this.M===e.N*e.M),K(this.N===i.rows()),K(this.M===i.cols()),i===this){const s=new Float64Array(this.N*this.M),r=new vr(s,this.N,this.M);return this.mulDiag(e,r),void i.assignCopy(r)}const n=this.M;for(let s=0;s<this.N;s++)for(let r=0;r<n;r++)i.setRowCol(s,r,this.atRowCol(s,r)*e.at(r))}transposeInPlace(){if(this.N===this.M){for(let n=0;n<this.N;n++)for(let s=n+1;s<this.M;s++){const r=this.atRowCol(n,s);this.setRowCol(n,s,this.atRowCol(s,n)),this.setRowCol(s,n,r)}return this}const e=new Float64Array(this.N*this.M),i=new vr(e,this.N,this.M);return i.assignCopy(this),this.M=Et(this.N,this.N=this.M),i.transpose(this),this}transpose(e){if(this!==e){vr.checkDims(e,this.M,this.N);for(let i=0;i<this.N;i++)for(let n=0;n<this.M;n++)e.setRowCol(n,i,this.atRowCol(i,n))}else e.transposeInPlace()}add(e,i){}svd(e,i,n,s=!1){if(vr.checkDims(e,this.N,this.M),vr.checkDims(i,this.M,1),vr.checkDims(n,this.M,this.M),s){if(K(this.N===this.M),!this.symmetricEigen(i,n))return!1;for(let ce=0;ce<this.M;++ce)i.at(ce)<0&&i.set(ce,0);return e.assignCopy(n),!0}let r,o,l,c,f,y,_,x=0,S=0,P=0,A=0,D=0;const N=this.M,F=this.N;e.assignCopy(this);const G=new Float64Array(N),V=new vr(G,N,1),B=(ce,ue)=>ue>=0?Math.abs(ce):-Math.abs(ce),W=(ce,ue)=>{if((ce=Math.abs(ce))>(ue=Math.abs(ue))){const se=ue/ce;return ce*Math.sqrt(se*se+1)}if(ue>0){const se=ce/ue;return ue*Math.sqrt(se*se+1)}return 0};for(let ce=0;ce<N;ce++){if(x=ce+1,V.set(ce,A*P),P=c=A=0,ce<F){for(let se=ce;se<F;se++)A+=Math.abs(e.atRowCol(se,ce));if(A){for(let se=ce;se<F;se++)e.setRowCol(se,ce,e.atRowCol(se,ce)/A),c+=e.atRowCol(se,ce)*e.atRowCol(se,ce);o=e.atRowCol(ce,ce),P=-B(Math.sqrt(c),o),l=o*P-c,e.setRowCol(ce,ce,o-P);for(let se=x;se<N;se++){c=0;for(let de=ce;de<F;de++)c+=e.atRowCol(de,ce)*e.atRowCol(de,se);o=c/l;for(let de=ce;de<F;de++)e.setRowCol(de,se,e.atRowCol(de,se)+o*e.atRowCol(de,ce))}for(let se=ce;se<F;se++)e.setRowCol(se,ce,e.atRowCol(se,ce)*A)}}if(i.set(ce,A*P),P=c=A=0,ce<F&&ce!==N-1){for(let se=x;se<N;se++)A+=Math.abs(e.atRowCol(ce,se));if(A){for(let se=x;se<N;se++)e.setRowCol(ce,se,e.atRowCol(ce,se)/A),c+=e.atRowCol(ce,se)*e.atRowCol(ce,se);o=e.atRowCol(ce,x),P=-B(Math.sqrt(c),o),l=o*P-c,e.setRowCol(ce,x,o-P);for(let se=x;se<N;se++)V.set(se,e.atRowCol(ce,se)/l);for(let se=x;se<F;se++){c=0;for(let de=x;de<N;de++)c+=e.atRowCol(se,de)*e.atRowCol(ce,de);for(let de=x;de<N;de++)e.setRowCol(se,de,e.atRowCol(se,de)+c*V.at(de))}for(let se=x;se<N;se++)e.setRowCol(ce,se,e.atRowCol(ce,se)*A)}}const ue=Math.abs(i.at(ce))+Math.abs(V.at(ce));D=ue>D?ue:D}for(let ce=N-1;ce>=0;ce--){if(ce<N-1){if(P){for(let ue=x;ue<N;ue++)n.setRowCol(ue,ce,e.atRowCol(ce,ue)/e.atRowCol(ce,x)/P);for(let ue=x;ue<N;ue++){c=0;for(let se=x;se<N;se++)c+=e.atRowCol(ce,se)*n.atRowCol(se,ue);for(let se=x;se<N;se++)n.setRowCol(se,ue,n.atRowCol(se,ue)+c*n.atRowCol(se,ce))}}for(let ue=x;ue<N;ue++)n.setRowCol(ce,ue,0),n.setRowCol(ue,ce,0)}n.setRowCol(ce,ce,1),P=V.at(ce),x=ce}for(let ce=(F<N?F:N)-1;ce>=0;ce--){x=ce+1,P=i.at(ce);for(let ue=x;ue<N;ue++)e.setRowCol(ce,ue,0);if(P){P=1/P;for(let ue=x;ue<N;ue++){c=0;for(let se=x;se<F;se++)c+=e.atRowCol(se,ce)*e.atRowCol(se,ue);o=c/e.atRowCol(ce,ce)*P;for(let se=ce;se<F;se++)e.setRowCol(se,ue,e.atRowCol(se,ue)+o*e.atRowCol(se,ce))}for(let ue=ce;ue<F;ue++)e.setRowCol(ue,ce,e.atRowCol(ue,ce)*P)}else for(let ue=ce;ue<F;ue++)e.setRowCol(ue,ce,0);e.setRowCol(ce,ce,e.atRowCol(ce,ce)+1)}for(let ce=N-1;ce>=0;ce--)for(let ue=1;;ue++){let se=1;for(x=ce;x>=0;x--){if(S=x-1,Math.abs(V.at(x))+D===D){se=0;break}if(Math.abs(i.at(S))+D===D)break}if(se){r=0,c=1;for(let de=x;de<=ce&&(o=c*V.at(de),V.set(de,V.at(de)*r),Math.abs(o)+D!==D);de++){P=i.at(de),l=W(o,P),i.set(de,l),l=1/l,r=P*l,c=-o*l;for(let Se=0;Se<F;Se++)y=e.atRowCol(Se,S),_=e.atRowCol(Se,de),e.setRowCol(Se,S,y*r+_*c),e.setRowCol(Se,de,_*r-y*c)}}if(_=i.at(ce),x===ce){if(_<0){i.set(ce,-_);for(let de=0;de<N;de++)n.setRowCol(de,ce,-n.atRowCol(de,ce))}break}if(ue===100)return!1;f=i.at(x),S=ce-1,y=i.at(S),P=V.at(S),l=V.at(ce),o=((y-_)*(y+_)+(P-l)*(P+l))/(2*l*y),P=W(o,1),o=((f-_)*(f+_)+l*(y/(o+B(P,o))-l))/f,r=c=1;for(let de=x;de<=S;de++){const Se=de+1;P=V.at(Se),y=i.at(Se),l=c*P,P*=r,_=W(o,l),V.set(de,_),r=o/_,c=l/_,o=f*r+P*c,P=P*r-f*c,l=y*c,y*=r;for(let Pe=0;Pe<N;Pe++)f=n.atRowCol(Pe,de),_=n.atRowCol(Pe,Se),n.setRowCol(Pe,de,f*r+_*c),n.setRowCol(Pe,Se,_*r-f*c);_=W(o,l),i.set(de,_),_&&(_=1/_,r=o*_,c=l*_),o=r*P+c*y,f=r*y-c*P;for(let Pe=0;Pe<F;Pe++)y=e.atRowCol(Pe,de),_=e.atRowCol(Pe,Se),e.setRowCol(Pe,de,y*r+_*c),e.setRowCol(Pe,Se,_*r-y*c)}V.set(x,0),V.set(ce,o),i.set(ce,f)}const J=new Float64Array(this.N),re=new Float64Array(this.M),ne=new vr(J,this.N,1),oe=new vr(re,this.M,1);let pe=1;do pe*=3,pe++;while(pe<=this.M);do{pe/=3,pe=Math.trunc(pe);for(let ce=pe;ce<this.M;ce++){const ue=i.at(ce);for(let de=0;de<this.N;de++)ne.set(de,e.atRowCol(de,ce));for(let de=0;de<this.M;de++)oe.set(de,n.atRowCol(de,ce));let se=ce;for(;i.at(se-pe)<ue;){i.set(se,i.at(se-pe));for(let de=0;de<this.N;de++)e.setRowCol(de,se,e.atRowCol(de,se-pe));for(let de=0;de<this.M;de++)n.setRowCol(de,se,n.atRowCol(de,se-pe));if(se-=pe,se<pe)break}i.set(se,ue);for(let de=0;de<this.N;de++)e.setRowCol(de,se,ne.at(de));for(let de=0;de<this.M;de++)n.setRowCol(de,se,oe.at(de))}}while(pe>1);for(let ce=0;ce<this.M;ce++){let ue=0;for(let se=0;se<this.N;se++)e.atRowCol(se,ce)<0&&ue++;for(let se=0;se<this.M;se++)n.atRowCol(se,ce)<0&&ue++;if(ue>Math.trunc((this.N+this.M)/2)){for(let se=0;se<this.N;se++)e.setRowCol(se,ce,-e.atRowCol(se,ce));for(let se=0;se<this.M;se++)n.setRowCol(se,ce,-n.atRowCol(se,ce))}}return!0}isSymmetric(){if(this.N!==this.M)return!1;for(let e=0;e<this.N;e++)for(let i=e+1;i<this.M;i++)if(this.atRowCol(e,i)!==this.atRowCol(i,e))return!1;return!0}isZero(){return K(0),!1}isIdentity(){return K(0),!1}equals(e,i){if(i!==void 0&&K(0),this.N!==e.N||this.M!==e.M)return!1;for(let n=0;n<this.N*this.M;n++)if(this.data[n]!==e.data[n])return!1;return!0}maxElement(){return K(0),0}min_element(){return K(0),0}determinant(){if(K(this.N===this.M),this.N===1)return this.data[0];if(this.N===2)return this.data[0]*this.data[3]-this.data[1]*this.data[2];if(this.N===3){const r=this;return r.atRowCol(0,0)*(r.atRowCol(1,1)*r.atRowCol(2,2)-r.atRowCol(1,2)*r.atRowCol(2,1))-r.atRowCol(0,1)*(r.atRowCol(1,0)*r.atRowCol(2,2)-r.atRowCol(2,0)*r.atRowCol(1,2))+r.atRowCol(0,2)*(r.atRowCol(1,0)*r.atRowCol(2,1)-r.atRowCol(1,1)*r.atRowCol(2,0))}const e=new Float64Array(this.N*this.N),i=new vr(e,this.N,this.N),n=new Float64Array(this.N);if(!this.luDecomposition(i,n))return 0;let s=1;for(let r=0;r<this.N;r++)s*=i.atRowCol(r,r),n[r]!==r&&(s=-s);return s}submatrix(e,i,n){K(0)}inverse(e){K(0)}pseudoInverse(e,i=!1,n=2220446049250313e-31){if(e.setZero(),this.N===1&&this.M===1)return this.atRowCol(0,0)!==0?e.setRowCol(0,0,1/this.atRowCol(0,0)):e.setRowCol(0,0,0),!0;if(this.N===2&&this.M===2){const x=this.atRowCol(0,0)*this.atRowCol(1,1)-this.atRowCol(0,1)*this.atRowCol(1,0),S=1e-5*(Math.abs(this.atRowCol(0,0)*this.atRowCol(1,1))+Math.abs(this.atRowCol(0,1)*this.atRowCol(1,0)));if(Math.abs(x)>S)return e.setRowCol(0,0,this.atRowCol(1,1)/x),e.setRowCol(0,1,-this.atRowCol(0,1)/x),e.setRowCol(1,0,-this.atRowCol(1,0)/x),e.setRowCol(1,1,this.atRowCol(0,0)/x),!0}const s=new Float64Array(this.N*this.M),r=new vr(s,this.N,this.M),o=new Float64Array(this.M),l=new vr(o,this.M,1),c=new Float64Array(this.M*this.M),f=new vr(c,this.M,this.M);if(!this.svd(r,l,f,i))return!1;const y=Math.max(this.N,this.M),_=n*Math.abs(l.at(0))*y;for(let x=0;x<this.M;x++)l.at(x)>_?l.set(x,1/l.at(x)):l.set(x,0);return f.mulDiag(l,e),e.mulTranspose(r,e),!0}luDecomposition(e,i){return K(0),!1}symmetricEigen(e,i){K(this.rows()===this.cols()),K(this.rows()===e.rows()),K(i.rows()===i.cols()&&i.rows()===this.rows()),K(this.isSymmetric());const n=new Float64Array(this.N*this.M),s=new vr(n,this.N,this.M);s.assignCopy(this);const r=100/Number.EPSILON,o=this.rows(),l=new Float64Array(o),c=new Float64Array(o),f=new vr(l,o,1),y=new vr(c,o,1);for(let x=0;x<o;x++)f.set(x,s.atRowCol(x,x)),e.set(x,s.atRowCol(x,x)),y.set(x,0);i.setIdentity();const _=()=>{const x=f;i.transposeInPlace();let S=1;do S*=3,S++;while(S<=o);do{S/=3,S=Math.trunc(S);for(let P=S;P<o;P++){const A=e.at(P),D=Math.abs(A);for(let F=0;F<this.M;F++)x.set(F,i.atRowCol(F,P));let N=P;for(;Math.abs(e.at(N-S))<D;){e.set(N,e.at(N-S));for(let F=0;F<this.M;F++)i.setRowCol(F,N,i.atRowCol(F,N-S));if(N-=S,N<S)break}if(N!==P){e.set(N,A);for(let F=0;F<this.M;F++)i.setRowCol(F,N,x.at(F))}}}while(S>1)};for(let x=1;;x++){let S=0;for(let A=1;A<o;A++)for(let D=0;D<A;D++)S+=Math.abs(s.atRowCol(A,D));if(S===0)return _(),!0;const P=x<4?.2*S/(o*o):0;for(let A=0;A<o;A++)for(let D=A+1;D<o;D++){let N=r*Math.abs(s.atRowCol(D,A));if(x>4&&N<=Math.abs(e.at(A))&&N<=Math.abs(e.at(D)))s.setRowCol(D,A,0);else if(Math.abs(s.atRowCol(D,A))>P){let F,G=e.at(D)-e.at(A);if(N<Math.abs(G))F=s.atRowCol(D,A)/G;else{const re=.5*G/s.atRowCol(D,A);F=1/(Math.abs(re)+Math.sqrt(1+re*re)),re<0&&(F=-F)}const V=1/Math.sqrt(1+F*F),B=F*V,W=B/(1+V);G=F*s.atRowCol(D,A),y.set(A,y.at(A)-G),y.set(D,y.at(D)+G),e.set(A,e.at(A)-G),e.set(D,e.at(D)+G),s.setRowCol(D,A,0);let J=0;for(;J<A;J++)N=s.atRowCol(A,J),G=s.atRowCol(D,J),s.setRowCol(A,J,N-B*(G+N*W)),s.setRowCol(D,J,G+B*(N-G*W));for(J++;J<D;J++)N=s.atRowCol(J,A),G=s.atRowCol(D,J),s.setRowCol(J,A,N-B*(G+N*W)),s.setRowCol(D,J,G+B*(N-G*W));for(J++;J<o;J++)N=s.atRowCol(J,A),G=s.atRowCol(J,D),s.setRowCol(J,A,N-B*(G+N*W)),s.setRowCol(J,D,G+B*(N-G*W));for(J=0;J<o;J++)N=i.atRowCol(A,J),G=i.atRowCol(D,J),i.setRowCol(A,J,N-B*(G+N*W)),i.setRowCol(D,J,G+B*(N-G*W))}}for(let A=0;A<o;A++)f.set(A,f.at(A)+y.at(A)),e.set(A,f.at(A)),y.set(A,0)}}static checkDims(e,i,n){K(e.rows()===i&&e.cols()===n)}}let jp=class extends vr{constructor(e){if(e.copy){const n=new Float64Array(e.copy.N*e.copy.M);return super(n,e.copy.N,e.copy.M),this.buffer=n,void this.assignCopy(e.copy)}const i=new Float64Array(e.NN*e.MM);super(i,e.NN,e.MM),this.buffer=i,e.initializerList&&fs(this.buffer,e.initializerList,0,0,e.initializerList.length)}assignCopy(e){return this===e||super.assignCopy(e),this}},_i=class Lb{constructor(e){e===void 0?this.setIdentity():e instanceof Lb?this.set(e):this.setScale(e)}set(e){return this.xx=e.xx,this.xy=e.xy,this.xd=e.xd,this.yx=e.yx,this.yy=e.yy,this.yd=e.yd,this}clone(){return new Lb().set(this)}setZero(){this.xx=0,this.yy=0,this.xy=0,this.yx=0,this.xd=0,this.yd=0}isEqual(e){return this===e||this.xx===e.xx&&this.xy===e.xy&&this.xd===e.xd&&this.yx===e.yx&&this.yy===e.yy&&this.yd===e.yd}transformInPlace(e){const i=this.xx*e.x+this.xy*e.y+this.xd,n=this.yx*e.x+this.yy*e.y+this.yd;e.x=i,e.y=n}transform(e){const i=e.clone();return this.transformInPlace(i),i}queryTransform(e,i){const n=this.xx*e.x+this.xy*e.y+this.xd,s=this.yx*e.x+this.yy*e.y+this.yd;i.setCoords(n,s)}transformEnvInPlace(e){if(e.isEmpty())return;const i=Ge(Y,4);e.queryCorners(i),this.transformPoints2D(i,4,i),e.setFromPoints(i,4)}queryTransformEnv(e,i){K(0)}transformInterleaved(e,i,n){K(0)}transformPoints2D(e,i,n){for(let s=0;s<i;++s)this.queryTransform(e[s],n[s])}transformInterleavedPoints(e,i,n){i*=2;const s=Y.getNAN();for(let r=0;r<i;r+=2)s.x=e[r],s.y=e[r+1],this.transformInPlace(s),n[r]=s.x,n[r+1]=s.y}multiply(e){return Lb.st_multiply(this,e,this),this}mulLeft(e){return K(0),this}static st_multiply(e,i,n){const s=e.xx*i.xx+e.yx*i.xy,r=e.xy*i.xx+e.yy*i.xy,o=e.xd*i.xx+e.yd*i.xy+i.xd,l=e.xx*i.yx+e.yx*i.yy,c=e.xy*i.yx+e.yy*i.yy,f=e.xd*i.yx+e.yd*i.yy+i.yd;n.xx=s,n.xy=r,n.xd=o,n.yx=l,n.yy=c,n.yd=f}getCoefficients(e){K(0)}setCoefficients(e){this.xx=e[0],this.xy=e[1],this.xd=e[2],this.yx=e[3],this.yy=e[4],this.yd=e[5]}copyTo(e){K(0)}initializeFromRect(e,i){e.isEmpty()||i.isEmpty()||!e.width()||!e.height()?this.setZero():(this.xy=this.yx=0,this.xx=i.width()/e.width(),this.yy=i.height()/e.height(),this.xd=i.xmin-e.xmin*this.xx,this.yd=i.ymin-e.ymin*this.yy)}initializeFromRectIsotropic(e,i){if(e.isEmpty()||!e.width()||!e.height()||i.isEmpty())this.setZero();else{this.yx=0,this.xy=0,this.xx=i.width()/e.width(),this.yy=i.height()/e.height(),this.xx>this.yy?this.xx=this.yy:this.yy=this.xx;const n=i.getCenter(),s=e.getCenter();this.xd=n.x-s.x*this.xx,this.yd=n.y-s.y*this.yy}}initializeFromCurveParameters(e,i,n){K(0)}initializeFromTwoPointsArray(e,i){if(e[0].equals(i[0])&&e[1].equals(i[1]))return void this.setIdentity();if(e[0].equals(e[1])){if(i[0].equals(i[1]))return void this.setShift(i[0].sub(e[0]));Je("")}if(!e[0].equals(e[1])&&i[0].equals(i[1]))return this.setZero(),void this.shift(i[0]);this.setShiftCoords(-e[0].x,-e[0].y);const n=Y.distance(e[0],e[1]),s=Y.distance(i[0],i[1]),r=s/n;this.scale(r,r);const o=e[1].sub(e[0]);o.divThis(n);const l=i[1].sub(i[0]);l.divThis(s);const c=o.crossProduct(l),f=o.dotProduct(l);this.rotate(f,c),this.shiftCoords(i[0].x,i[0].y)}initializeFromTwoPoints(e,i,n,s){const r=[e,i],o=[n,s];this.initializeFromTwoPointsArray(r,o)}transformSizeInPlace(e){K(0)}transformSize(e,i){K(0)}transformTol(e){return K(0),0}transformWithoutTranslateArray(e,i,n){for(let s=0;s<i;++s)this.transformWithoutTranslate(e[s],n[s])}transformWithoutTranslateInPlace(e){const i=this.xx*e.x+this.xy*e.y,n=this.yx*e.x+this.yy*e.y;e.setCoords(i,n)}transformWithoutTranslate(e,i){const n=this.xx*e.x+this.xy*e.y,s=this.yx*e.x+this.yy*e.y;i.setCoords(n,s)}setIdentity(){this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=1,this.yd=0}isIdentity(){return!(this.xx!==1||this.yy!==1||this.xy||this.xd||this.yx||this.yd)}isIdentityTol(e){const i=e*e;return!(Xi(this.xd)+Xi(this.yd)>i)&&!(Xi(this.xy+this.xd)+Xi(this.yy+this.yd-1)>i)&&!(Xi(this.xx+this.xd-1)+Xi(this.yx+this.yd)>i)}isReflective(){return this.xx*this.yy-this.yx*this.xy<0}isUniform(e){const i=this.xx*this.xx+this.yx*this.yx,n=this.xy*this.xy+this.yy*this.yy,s=(i+n)*e;return Math.abs(i-n)<=s&&Math.abs(this.xx*this.xy+this.yx*this.yy)<=s}isUniformNoRotation(){return this.xx!==0&&Math.abs(this.xx)===Math.abs(this.yy)&&this.xy===0&&this.yx===0}isTranslate(){return K(0),!1}isTranslateTol(e){return K(0),!1}isOrthonormal(e){return K(0),!1}isDegenerate(e){return Math.abs(this.xx*this.yy-this.yx*this.xy)<=2*e*(Math.abs(this.xx*this.yy)+Math.abs(this.yx*this.xy))}isZero(){return this.xx===0&&this.yy===0&&this.xy===0&&this.yx===0&&this.xd===0&&this.yd===0}isScaleAndTranslate(e){return K(0),!1}setTranslate(e,i){return this.xx=1,this.xy=0,this.xd=e,this.yx=0,this.yy=1,this.yd=i,this}setShiftCoords(e,i){return this.xx=1,this.xy=0,this.xd=e,this.yx=0,this.yy=1,this.yd=i,this}setShift(e){return this.xx=1,this.xy=0,this.xd=e.x,this.yx=0,this.yy=1,this.yd=e.y,this}setScaleCoords(e,i){return this.xx=e,this.xy=0,this.xd=0,this.yx=0,this.yy=i,this.yd=0,this}setScale(e){return this.setScaleCoords(e,e),this}setFlipX(e,i){return this.xx=-1,this.xy=0,this.xd=e+i,this.yx=0,this.yy=1,this.yd=0,this}setFlipY(e,i){return this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=-1,this.yd=e+i,this}setShear(e,i){return K(0),this}scale(e,i){return this.xx*=e,this.xy*=e,this.xd*=e,this.yx*=i,this.yy*=i,this.yd*=i,this}setRotateAngle(e){return this.setRotate(Math.cos(e),Math.sin(e))}setRotate(e,i){return this.xx=e,this.xy=-i,this.xd=0,this.yx=i,this.yy=e,this.yd=0,this}setRotateAngleAbout(e,i){return this.setRotateAbout(Math.cos(e),Math.sin(e),i)}setRotateAbout(e,i,n){return this.setTranslate(-n.x,-n.y),this.rotate(e,i),this.translate(n.x,n.y)}setSwapCoordinates(){return this.xx=0,this.xy=1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}setRotateCw90(){return this.xx=0,this.xy=1,this.xd=0,this.yx=-1,this.yy=0,this.yd=0,this}setRotateCcw90(){return this.xx=0,this.xy=-1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}shiftCoords(e,i){return this.xd+=e,this.yd+=i,this}shift(e){return this.xd+=e.x,this.yd+=e.y,this}translate(e,i){return this.xd+=e,this.yd+=i,this}flipX(e,i){return this.xx=-this.xx,this.xy=-this.xy,this.xd=e+i-this.xd,this}flipY(e,i){return this.yx=-this.yx,this.yy=-this.yy,this.yd=e+i-this.yd,this}shear(e,i){return K(0),this}rotateAngle(e){const i=new Lb;return i.setRotateAngle(e),this.multiply(i)}rotate(e,i){const n=new Lb;return n.setRotate(e,i),this.multiply(n)}rotateAbout(e,i,n){return this.translate(-n.x,-n.y),this.rotate(e,i),this.translate(n.x,n.y)}rotateAngleAbout(e,i){return this.rotateAbout(Math.cos(e),Math.sin(e),i)}setInvert(e){return this.set(e),this.invertThis()}invertThis(){let e=this.xx*this.yy-this.xy*this.yx;if(e===0)return this.setZero(),this;e=1/e;const i=(this.xy*this.yd-this.xd*this.yy)*e,n=(this.xd*this.yx-this.xx*this.yd)*e,s=this.yy*e,r=-this.xy*e,o=-this.yx*e,l=this.xx*e;return this.xd=i,this.yd=n,this.xx=s,this.yy=l,this.xy=r,this.yx=o,this}invertPrecise(e){return this.set(e),this.invertPreciseThis()}invertPreciseThis(){const e=bt.constructDouble(this.xy),i=bt.constructDouble(this.xx),n=i.mulDouble(this.yy).sub(e.mulDouble(this.yx));if(n.isZero())return this.setZero(),this;const s=n.clone();s.invertThis();const r=bt.constructDouble(this.xd),o=e.mulDouble(this.yd).sub(r.mulDouble(this.yy)).mul(s).toDouble(),l=r.mulDouble(this.yx).sub(i.mulDouble(this.yd)).mul(s).toDouble(),c=s.mulDouble(this.yy).toDouble(),f=s.mulDouble(-this.xy).toDouble(),y=s.mulDouble(-this.yx).toDouble(),_=s.mulDouble(this.xx).toDouble();return this.xd=o,this.yd=l,this.xx=c,this.yy=_,this.xy=f,this.yx=y,this}extractScaleTransform(e,i){K(0)}setFromTwoTriangles(e,i){let n=!0;for(let y=0;y<3;++y)n=n&&e[y].equals(i[y]);if(n)return this.setIdentity(),!0;const s=new Y;s.setSub(e[0],e[1]);const r=new Y;r.setSub(e[0],e[2]);const o=new Y;o.setSub(i[0],i[1]);const l=new Y;l.setSub(i[0],i[2]);const c=4*Number.EPSILON*(Math.abs(s.x*r.y)+Math.abs(r.x*s.y));let f=s.x*r.y-s.y*r.x;return Math.abs(f)>c?(f=1/f,this.xx=(o.x*r.y-s.y*l.x)*f,this.xy=(s.x*l.x-o.x*r.x)*f,this.yx=(o.y*r.y-s.y*l.y)*f,this.yy=(s.x*l.y-o.y*r.x)*f,this.xd=i[0].x-(this.xx*e[0].x+this.xy*e[0].y),this.yd=i[0].y-(this.yx*e[0].x+this.yy*e[0].y),!0):(this.setZero(),!1)}initializeFromControlPoints(e,i,n,s,r=null){return i===0?(this.setIdentity(),void(r&&r.setIdentity())):i===1?(this.setShift(s[0].sub(n[0])),void(r&&r.setShift(n[0].sub(s[0])))):(i<3&&(e=1),void(e===4&&i>2?zQe(this,i,n,s,r):qQe(e,this,i,n,s,r)))}calculateErrors(e,i,n,s){K(e>0&&i!==null&&n!==null);let r=0;for(let o=0;o<e;++o){const l=this.transform(i[o]),c=Y.sqrDistance(n[o],l);r+=c,s&&(s[o]=Math.sqrt(c))}return Math.sqrt(r/e)}};const _3=[43,11,41,9,61];function jz(t,e){K(!(e.rows()!==2&&e.rows()!==3||e.cols()!==2&&e.rows()!==3)),t.xx=e.atRowCol(0,0),t.xy=e.atRowCol(0,1),t.yx=e.atRowCol(1,0),t.yy=e.atRowCol(1,1),e.cols()===3?(t.xd=e.atRowCol(0,2),t.yd=e.atRowCol(1,2)):(t.xd=0,t.yd=0)}function zQe(t,e,i,n,s){const r=Y.average(i,e),o=Y.average(n,e),l=new jp({NN:2,MM:2});l.setZero();const c=new jp({NN:2,MM:2});c.setZero();for(let _=0;_<e;++_)l.setRowCol(0,0,l.atRowCol(0,0)+(i[_].x-r.x)*(i[_].x-r.x)),l.setRowCol(0,1,l.atRowCol(0,1)+(i[_].x-r.x)*(i[_].y-r.y)),l.setRowCol(1,1,l.atRowCol(1,1)+(i[_].y-r.y)*(i[_].y-r.y)),c.setRowCol(0,0,c.atRowCol(0,0)+(n[_].x-o.x)*(i[_].x-r.x)),c.setRowCol(0,1,c.atRowCol(0,1)+(n[_].x-o.x)*(i[_].y-r.y)),c.setRowCol(1,0,c.atRowCol(1,0)+(n[_].y-o.y)*(i[_].x-r.x)),c.setRowCol(1,1,c.atRowCol(1,1)+(n[_].y-o.y)*(i[_].y-r.y));l.setRowCol(1,0,l.atRowCol(0,1));const f=new jp({NN:2,MM:2});l.pseudoInverse(f,!0)||Rz("Failed to compute pseudo inverse"),c.mul(f,c),jz(t,c);const y=r.clone();t.transformInPlace(y),t.xd=o.x-y.x,t.yd=o.y-y.y,s&&(c.pseudoInverse(f,!1)||Rz("Failed to compute pseudo inverse"),jz(s,f),s.transformInPlace(o),s.xd=r.x-o.x,s.yd=r.y-o.y)}function qQe(t,e,i,n,s,r){K(t===1||t===0||t===2||t===3),e.setIdentity();const o=Y.average(n,i),l=Y.average(s,i);if(K(t<_3.length&&t>0),8&_3[t]){const f=new jp({NN:2,MM:2});f.setZero();for(let D=0;D<i;++D)f.setRowCol(0,0,f.atRowCol(0,0)+(s[D].x-l.x)*(n[D].x-o.x)),f.setRowCol(1,0,f.atRowCol(1,0)+(s[D].x-l.x)*(n[D].y-o.y)),f.setRowCol(0,1,f.atRowCol(0,1)+(s[D].y-l.y)*(n[D].x-o.x)),f.setRowCol(1,1,f.atRowCol(1,1)+(s[D].y-l.y)*(n[D].y-o.y));const y=new jp({NN:2,MM:2}),_=new jp({NN:2,MM:1}),x=new jp({NN:2,MM:2});f.svd(y,_,x)||Rz("Failed to compute svd");const S=new jp({NN:2,MM:2});y.transpose(S);const P=new jp({NN:2,MM:2});x.mul(S,P),!(32&_3[t])&&P.determinant()<0&&(S.setRowCol(1,0,-S.atRowCol(1,0)),S.setRowCol(1,1,-S.atRowCol(1,1)),x.mul(S,P));const A=new _i;jz(A,P),e.set(A)}if(2&_3[t]){let f=0,y=0;for(let _=0;_<i;++_){const x=n[_].sub(o);f+=x.sqrLength(),e.transformInPlace(x),y+=x.dotProduct(s[_].sub(l))}if(f===0)y===0?e.setIdentity():e.setZero();else{const _=y/f;e.scale(_,_)}}else K(!(4&_3[t]));const c=o.clone();e.transformInPlace(c),e.xd=l.x-c.x,e.yd=l.y-c.y,r&&(r.set(e),r.invertThis(),r.isZero()&&(r.xd=o.x,r.yd=o.y))}class xe{static construct(e,i,n,s){return new xe(e,i,n,s)}constructor(e,i,n,s){e===void 0?(this.xmin=Number.NaN,this.ymin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN):typeof e=="number"?(this.xmin=e,this.ymin=i,this.xmax=n,this.ymax=s):(this.xmin=e.xmin,this.ymin=e.ymin,this.xmax=e.xmax,this.ymax=e.ymax),this.normalize()}static constructEmpty(){return new xe(Number.NaN,Number.NaN,Number.NaN,Number.NaN)}clone(){return new xe(this)}assign(e){return this.xmin=e.xmin,this.xmax=e.xmax,this.ymin=e.ymin,this.ymax=e.ymax,this}width(){return this.xmax-this.xmin}height(){return this.ymax-this.ymin}maxDimension(){return Math.max(this.width(),this.height())}minDimension(){return Math.min(this.width(),this.height())}sqrDiagonal(){return K(0),0}diagonal(){return K(0),0}getCenterX(){return .5*(this.xmin+this.xmax)}getCenterY(){return .5*(this.ymin+this.ymax)}getCenter(){return Y.construct(this.getCenterX(),this.getCenterY())}queryCenter(e){K(0)}setEmpty(){this.xmin=Number.NaN,this.ymin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN}setInfinite(){K(0)}isDegenerate(e){return!this.isEmpty()&&(this.width()<=e||this.height()<=e)}isZero(){return K(0),!1}isEmpty(){return Number.isNaN(this.xmin)||Number.isNaN(this.ymin)||Number.isNaN(this.xmax)||Number.isNaN(this.ymax)}mergeNeCoords(e,i){this.xmin>e?this.xmin=e:this.xmax<e&&(this.xmax=e),this.ymin>i?this.ymin=i:this.ymax<i&&(this.ymax=i)}mergeNe(e){this.mergeNeCoords(e.x,e.y)}mergeCoords(e,i){this.isEmpty()?(this.xmin=e,this.ymin=i,this.xmax=e,this.ymax=i):(this.xmin>e?this.xmin=e:this.xmax<e&&(this.xmax=e),this.ymin>i?this.ymin=i:this.ymax<i&&(this.ymax=i))}merge(e){this.mergeCoords(e.x,e.y)}mergeEnvelope2D(e){e.isEmpty()||(this.mergeCoords(e.xmin,e.ymin),this.mergeNeCoords(e.xmax,e.ymax))}mergePoints(e,i){for(let n=0;n<i;){if(!this.isEmpty()){for(let s=n;s<i;s++)this.mergeNe(e[s]);break}this.setCoords(e[n]),n++}}mergePointsInterleaved(e,i,n){for(let s=2*i,r=s+2*n;s<r;s+=2)this.mergeCoords(e.read(s),e.read(s+1))}inflateCoords(e,i){this.isEmpty()||(this.xmin-=e,this.xmax+=e,this.ymin-=i,this.ymax+=i,(this.xmin>this.xmax||this.ymin>this.ymax)&&this.setEmpty())}getInflatedCoords(e,i){return K(0),new xe(0,0,0,0)}inflate(e){this.inflateCoords(e,e)}getInflated(e){return K(0),new xe(0,0,0,0)}zoom(e,i){K(0)}scale(e){K(0)}equals(e,i){return!(!this.isEmpty()||!e.isEmpty())||(i?Math.abs(this.xmin-e.xmin)<=i&&Math.abs(this.ymin-e.ymin)<=i&&Math.abs(this.xmax-e.xmax)<=i&&Math.abs(this.ymax-e.ymax)<=i:this.xmin===e.xmin&&this.ymin===e.ymin&&this.xmax===e.xmax&&this.ymax===e.ymax)}setCoords(e){e.xmin!==void 0?(this.xmin=e.xmin,this.xmax=e.xmax,this.ymin=e.ymin,this.ymax=e.ymax):e.x!==void 0?(this.xmin=e.x,this.xmax=e.x,this.ymin=e.y,this.ymax=e.y):e.pt1!==void 0?(this.xmin=e.pt1.x,this.ymin=e.pt1.y,this.xmax=e.pt2.x,this.ymax=e.pt2.y,this.normalize()):e.env2D!==void 0?(this.xmin=e.env2D.xmin,this.xmax=e.env2D.xmax,this.ymin=e.env2D.ymin,this.ymax=e.env2D.ymax,this.normalize()):e.pt!==void 0?(this.xmin=e.pt.x,this.xmax=e.pt.x,this.ymin=e.pt.y,this.ymax=e.pt.y):e.center!==void 0?(this.xmin=e.center.x-.5*e.width,this.xmax=this.xmin+e.width,this.ymin=e.center.y-.5*e.height,this.ymax=this.ymin+e.height,this.normalize()):K(0),this.normalize()}queryIntervalX(e){this.isEmpty()?e.setEmpty():e.setCoords(this.xmin,this.xmax)}queryIntervalY(e){this.isEmpty()?e.setEmpty():e.setCoords(this.ymin,this.ymax)}setFromPoints(e,i){if(i===0)return void this.setEmpty();if(Array.isArray(e)){const s=e;this.setCoords(s[0]);for(let r=1;r<i;){if(!this.isEmpty()){for(let o=r;o<i;o++)this.mergeNe(s[o]);return}this.setCoords(s[r]),r++}return}const n=e;this.setCoords({x:n[0],y:n[1]});for(let s=1,r=2*i;s<r;s+=2){if(!this.isEmpty()){for(let o=s,l=2*i;o<l;o+=2)this.mergeNeCoords(n[o],n[o+1]);return}this.setCoords({x:n[s],y:n[s+1]}),s+=2}}normalize(){let e=!1;this.xmin<=this.xmax||([this.xmin,this.xmax]=[this.xmax,this.xmin],e=!0),this.ymin<=this.ymax||([this.ymin,this.ymax]=[this.ymax,this.ymin],e=!0),!e||this.xmin<=this.xmax&&this.ymin<=this.ymax||this.setEmpty()}isValid(){return this.isEmpty()||this.xmin<=this.xmax&&this.ymin<=this.ymax}getLowerLeft(){return new Y(this.xmin,this.ymin)}getLowerRight(){return new Y(this.xmax,this.ymin)}getUpperLeft(){return new Y(this.xmin,this.ymax)}getUpperRight(){return new Y(this.xmax,this.ymax)}move(e,i){this.isEmpty()||(this.xmin+=e,this.ymin+=i,this.xmax+=e,this.ymax+=i)}centerAtCoords(e,i){this.move(e-this.getCenterX(),i-this.getCenterY())}centerAt(e){this.centerAtCoords(e.x,e.y)}containsCoords(e,i){return e>=this.xmin&&e<=this.xmax&&i>=this.ymin&&i<=this.ymax}contains(e){return this.containsCoords(e.x,e.y)}containsEnvelope(e){return e.xmin>=this.xmin&&e.xmax<=this.xmax&&e.ymin>=this.ymin&&e.ymax<=this.ymax}containsExclusiveCoords(e,i){return e>this.xmin&&e<this.xmax&&i>this.ymin&&i<this.ymax}containsExclusive(e){return this.containsExclusiveCoords(e.x,e.y)}containsExclusiveEnvelope(e){return e.xmin>this.xmin&&e.xmax<this.xmax&&e.ymin>this.ymin&&e.ymax<this.ymax}isIntersecting(e){return(this.xmin<=e.xmin?this.xmax>=e.xmin:e.xmax>=this.xmin)&&(this.ymin<=e.ymin?this.ymax>=e.ymin:e.ymax>=this.ymin)}isIntersectingNe(e){return(this.xmin<=e.xmin?this.xmax>=e.xmin:e.xmax>=this.xmin)&&(this.ymin<=e.ymin?this.ymax>=e.ymin:e.ymax>=this.ymin)}intersect(e){if(this.isEmpty())return!1;if(e.isEmpty())return this.setEmpty(),!1;e.xmin>this.xmin&&(this.xmin=e.xmin),e.xmax<this.xmax&&(this.xmax=e.xmax),e.ymin>this.ymin&&(this.ymin=e.ymin),e.ymax<this.ymax&&(this.ymax=e.ymax);const i=this.xmin<=this.xmax&&this.ymin<=this.ymax;return i||this.setEmpty(),i}queryCorner(e){switch(3&e){case 0:return new Y(this.xmin,this.ymin);case 1:return new Y(this.xmin,this.ymax);case 2:return new Y(this.xmax,this.ymax);default:return new Y(this.xmax,this.ymin)}}queryCorners(e){e[0].setCoords(this.xmin,this.ymin),e[1].setCoords(this.xmin,this.ymax),e[2].setCoords(this.xmax,this.ymax),e[3].setCoords(this.xmax,this.ymin)}queryCornersReversed(e){e[0].setCoords(this.xmin,this.ymin),e[1].setCoords(this.xmax,this.ymin),e[2].setCoords(this.xmax,this.ymax),e[3].setCoords(this.xmin,this.ymax)}reaspect(e,i){K(0)}getArea(){return this.isEmpty()?0:this.width()*this.height()}getLength(){return K(0),0}clipCode(e){return(e.x<this.xmin?1:0)|(e.x>this.xmax?1:0)<<1|(e.y<this.ymin?1:0)<<2|(e.y>this.ymax?1:0)<<3}clipLine(e,i){let n=this.clipCode(e),s=this.clipCode(i);if(n&s)return 0;if(!(n|s))return 4;const r=(n?1:0)|(s?2:0);do{const o=i.x-e.x,l=i.y-e.y;if(Math.abs(o)>Math.abs(l)?n&xe.XMASK?(n&xe.XLESSXMIN?(e.y+=l*(this.xmin-e.x)/o,e.x=this.xmin):(e.y+=l*(this.xmax-e.x)/o,e.x=this.xmax),n=this.clipCode(e)):s&xe.XMASK?(s&xe.XLESSXMIN?(i.y+=l*(this.xmin-i.x)/o,i.x=this.xmin):(i.y+=l*(this.xmax-i.x)/o,i.x=this.xmax),s=this.clipCode(i)):n?(n&xe.YLESSYMIN?(e.x+=o*(this.ymin-e.y)/l,e.y=this.ymin):(e.x+=o*(this.ymax-e.y)/l,e.y=this.ymax),n=this.clipCode(e)):(s&xe.YLESSYMIN?(i.x+=o*(this.ymin-i.y)/l,i.y=this.ymin):(i.x+=o*(this.ymax-i.y)/l,i.y=this.ymax),s=this.clipCode(i)):n&xe.YMASK?(n&xe.YLESSYMIN?(e.x+=o*(this.ymin-e.y)/l,e.y=this.ymin):(e.x+=o*(this.ymax-e.y)/l,e.y=this.ymax),n=this.clipCode(e)):s&xe.YMASK?(s&xe.YLESSYMIN?(i.x+=o*(this.ymin-i.y)/l,i.y=this.ymin):(i.x+=o*(this.ymax-i.y)/l,i.y=this.ymax),s=this.clipCode(i)):n?(n&xe.XLESSXMIN?(e.y+=l*(this.xmin-e.x)/o,e.x=this.xmin):(e.y+=l*(this.xmax-e.x)/o,e.x=this.xmax),n=this.clipCode(e)):(s&xe.XLESSXMIN?(i.y+=l*(this.xmin-i.x)/o,i.x=this.xmin):(i.y+=l*(this.xmax-i.x)/o,i.x=this.xmax),s=this.clipCode(i)),n&s)return 0}while(n|s);return r}distanceFromEnvelope(e){return Math.sqrt(this.sqrDistanceEnvelope(e,null,null))}distance(e){return Math.sqrt(this.sqrDistance(e))}sqrDistanceEnvelope(e,i,n){if(!i&&!n){if(this.isEmpty()||e.isEmpty())return Number.NaN;let f,y=0,_=0;return f=this.xmin-e.xmax,f>y&&(y=f),f=this.ymin-e.ymax,f>_&&(_=f),f=e.xmin-this.xmax,f>y&&(y=f),f=e.ymin-this.ymax,f>_&&(_=f),y*y+_*_}if(this.isEmpty()||e.isEmpty())return i&&i.setNAN(),n&&n.setNAN(),Number.NaN;let s,r=0,o=0;const l=Math.max(this.xmin,e.xmin),c=Math.max(this.ymin,e.ymin);return i&&i.setCoords(l,c),n&&n.setCoords(l,c),s=this.xmin-e.xmax,s>r&&(r=s,i&&(i.x=this.xmin),n&&(n.x=e.xmax)),s=this.ymin-e.ymax,s>o&&(o=s,i&&(i.y=this.ymin),n&&(n.y=e.ymax)),s=e.xmin-this.xmax,s>r&&(r=s,i&&(i.x=this.xmax),n&&(n.x=e.xmin)),s=e.ymin-this.ymax,s>o&&(o=s,i&&(i.y=this.ymax),n&&(n.y=e.ymin)),r*r+o*o}sqrDistance(e,i){if(i===void 0){if(this.isEmpty()||e.isNAN())return Number.NaN;let o,l=0,c=0;return o=this.xmin-e.x,o>l&&(l=o),o=this.ymin-e.y,o>c&&(c=o),o=e.x-this.xmax,o>l&&(l=o),o=e.y-this.ymax,o>c&&(c=o),l*l+c*c}if(this.isEmpty()||e.isNAN())return i.setNAN(),Number.NaN;i.assign(e);let n,s=0,r=0;return n=this.xmin-e.x,n>s&&(s=n,i.x=this.xmin),n=this.ymin-e.y,n>r&&(r=n,i.y=this.ymin),n=e.x-this.xmax,n>s&&(s=n,i.x=this.xmax),n=e.y-this.ymax,n>r&&(r=n,i.y=this.ymax),s*s+r*r}sqrMaxMinDistanceEnvelope(e){if(this.isEmpty()||e.isEmpty())return Number.NaN;let i=Number.MAX_VALUE;{const n=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmax,e.ymin),s=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmax,e.ymax),r=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmax,e.ymin),o=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmax,e.ymax),l=Math.max(n,s),c=Math.max(r,o),f=Math.max(l,c);i=Math.min(f,i)}{const n=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmin,e.ymax),s=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmax,e.ymax),r=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmin,e.ymax),o=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmax,e.ymax),l=Math.max(n,s),c=Math.max(r,o),f=Math.max(l,c);i=Math.min(f,i)}{const n=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmin,e.ymin),s=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmin,e.ymax),r=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmin,e.ymin),o=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmin,e.ymax),l=Math.max(n,s),c=Math.max(r,o),f=Math.max(l,c);i=Math.min(f,i)}{const n=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmin,e.ymin),s=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmax,e.ymin),r=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmin,e.ymin),o=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmax,e.ymin),l=Math.max(n,s),c=Math.max(r,o),f=Math.max(l,c);i=Math.min(f,i)}return i}sqrMaxDistanceEnvelope(e){if(this.isEmpty()||e.isEmpty())return Number.NaN;let i=0;const n=Ge(Y,4);this.queryCorners(n);const s=Ge(Y,4);e.queryCorners(s);for(let r=0;r<4;r++)for(let o=0;o<4;o++){const l=Y.sqrDistance(n[r],s[o]);l>i&&(i=l)}return i}sqrMaxMinDistance(e){const i=Y.sqrDistance(e,this.getLowerLeft()),n=Y.sqrDistance(e,this.getUpperLeft()),s=Y.sqrDistance(e,this.getLowerRight()),r=Y.sqrDistance(e,this.getUpperRight());let o,l=Math.max(i,n);return o=Math.max(i,s),l>o&&(l=o),o=Math.max(n,r),l>o&&(l=o),o=Math.max(s,r),l>o&&(l=o),l}sqrMinDistance(e){return K(0),0}sqrMaxDistance(e){return K(0),0}snapToBoundary(e){return K(0),!1}snapClip(e){const i=hs(e.x,this.xmin,this.xmax),n=hs(e.y,this.ymin,this.ymax);return Y.construct(i,n)}boundaryDistance(e){return K(0),0}envelopeSide(e){return K(0),0}querySide(e,i){switch(e){case 0:i.constructFromCoords(this.xmin,this.ymin,this.xmin,this.ymax);break;case 1:i.constructFromCoords(this.xmin,this.ymax,this.xmax,this.ymax);break;case 2:i.constructFromCoords(this.xmax,this.ymax,this.xmax,this.ymin);break;case 3:i.constructFromCoords(this.xmax,this.ymin,this.xmin,this.ymin);break;default:Je("query_side")}return i}isPointOnBoundary(e,i){return K(0),!1}calculateToleranceFromEnvelope(){return this.isEmpty()?Cv():(Math.abs(this.xmin)+Math.abs(this.xmax)+Math.abs(this.ymin)+Math.abs(this.ymax)+1)*Cv()}notEquals(e){return K(0),!1}toString(){return`[${this.xmin}, ${this.ymin}, ${this.xmax}, ${this.ymax}]`}}xe.XLESSXMIN=1,xe.YLESSYMIN=4,xe.XMASK=3,xe.YMASK=12;class ol{static constructEmpty(){return new ol(Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN)}constructor(e,i,n,s,r,o){this.xmin=e,this.ymin=i,this.zmin=n,this.xmax=s,this.ymax=r,this.zmax=o,this.normalize()}inflate(e){this.inflateCoords(e,e,e)}inflateCoords(e,i,n){K(0)}getEnvelope2D(){return new xe(this.xmin,this.ymin,this.xmax,this.ymax)}getEnvelopeZs(){return new Ze(this.zmin,this.zmax)}setEmptyZ(){this.zmin=Number.NaN,this.zmax=Number.NaN}normalize(){let e=!1;this.xmin<=this.xmax||(this.xmax=Et(this.xmin,this.xmin=this.xmax),e=!0),this.ymin<=this.ymax||(this.ymax=Et(this.ymin,this.ymin=this.ymax),e=!0),!e||this.xmin<=this.xmax&&this.ymin<=this.ymax?this.zmin<=this.zmax||(this.zmax=Et(this.zmin,this.zmin=this.zmax),this.zmin<=this.zmax||this.setEmptyZ()):this.setEmpty()}isEmpty(){return Number.isNaN(this.xmin)||Number.isNaN(this.ymin)||Number.isNaN(this.xmax)||Number.isNaN(this.ymax)}isEmptyZ(){return Number.isNaN(this.zmin)||Number.isNaN(this.zmax)}setEmpty(){this.xmin=Number.NaN,this.ymin=Number.NaN,this.zmin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN,this.zmax=Number.NaN}mergeEnv3D(e){e.isEmpty()||(this.mergeCoords(e.xmin,e.ymin,e.zmin),this.mergeCoords(e.xmax,e.ymax,e.zmax))}mergeNe(e){this.mergeNeCoords(e.x,e.y,e.z)}mergeNeCoords(e,i,n){this.xmin>e?this.xmin=e:this.xmax<e&&(this.xmax=e),this.ymin>i?this.ymin=i:this.ymax<i&&(this.ymax=i),this.zmin>n?this.zmin=n:this.zmax<n&&(this.zmax=n)}mergeCoords(e,i,n){this.isEmpty()?(this.xmin=e,this.xmax=e,this.ymin=i,this.ymax=i,this.zmin=n,this.zmax=n):(this.isEmptyZ()&&(this.zmin=n,this.zmax=n),this.mergeNeCoords(e,i,n))}setCoords(e,i,n,s,r,o){this.xmin=e,this.ymin=i,this.zmin=n,this.xmax=s,this.ymax=r,this.zmax=o,this.normalize()}sqrDistance(e,i=1){return K(0),0}sqrDistanceAndPoint(e,i,n=1){return K(0),0}sqrDistanceEnvelope3D(e,i=1){return K(0),0}sqrDistanceEnvelope3DAndPoints(e,i,n,s=1){return K(0),0}sqrMaxDistance(e,i=1){return K(0),0}}const Zte=[0,0,Number.NaN,0,0,0,0,0,-1,-1,0,0,0,0],VQe=[2,1,1,1,3,1,2,3,2,4,1,1,2,1],GQe=[1,1,1,0,2,1,1,1,0,0,0,0,0,1],jQe=[1,1,1,2,0,0,0,0,2,2,4,2,2,1],BQe=[4,8,4,8,1],iB=25;function Cy(){return new Array(iB)}let br=class Dp{getAttributeCount(){return this.m_attributeCount}getSemantics(e){return this.m_indexToSemantics[e]}getSemanticsBitArray(){return this.m_semanticsBitArray}getAttributeIndex(e){return this.m_semanticsToIndexMap[e]}static getInterpolation(e){return GQe[e]}static getPersistence(e){return jQe[e]}static getPersistenceSize(e){return BQe[e]}static getPersistenceSizeFromSemantics(e){return Dp.getPersistenceSize(Dp.getPersistence(e))*Dp.getComponentCount(e)}static getComponentCount(e){return VQe[e]}static maxComponentCount(){return 4}static isInteger(e){return e===2||e===3||e===4}static isIntegerSemantics(e){return Dp.isInteger(Dp.getPersistence(e))}static isTexture(e){return e===5||e===6||e===7}hasAttribute(e){return!!(this.m_semanticsBitArray&1<<e)}hasAttributesFrom(e){return(this.m_semanticsBitArray&e.m_semanticsBitArray)===e.m_semanticsBitArray}hasZ(){return this.hasAttribute(1)}hasM(){return this.hasAttribute(2)}hasID(){return this.hasAttribute(3)}getTotalComponentCount(){return this.m_totalComponentCount}static getDefaultValue(e){return Zte[e]}static isDefaultValue(e,i){return va(Zte[e],i)}equals(e){return this===e}getDefaultPointAttributes(){return this.m_defaultPointAttributes}getPointAttributeOffset(e){return this.m_pointAttributeOffsets[e]}constructor(e){this.m_semanticsBitArray=e,this.m_attributeCount=0,this.m_totalComponentCount=0,this.m_semanticsToIndexMap=new Int32Array(14),this.m_indexToSemantics=new Int32Array(14),this.m_pointAttributeOffsets=new Int32Array(14),this.m_defaultPointAttributes=new Array(iB),this.m_semanticsToIndexMap.fill(-1),this.m_indexToSemantics.fill(-1);let i=0,n=1,s=14;for(;i<s;i++)e&n&&(this.m_semanticsToIndexMap[i]=this.m_attributeCount,this.m_indexToSemantics[this.m_attributeCount]=i,this.m_attributeCount++,this.m_totalComponentCount+=Dp.getComponentCount(i)),n<<=1;let r=0;for(i=0,s=this.getAttributeCount();i<s;i++){const o=this.getSemantics(i),l=Dp.getComponentCount(o),c=Dp.getDefaultValue(o);this.m_pointAttributeOffsets[i]=r;for(let f=0;f<l;f++)this.m_defaultPointAttributes[r]=c,r++}}};var ZN=br;function T7(){return new Array(14)}class Pv{static getInstance(){return Pv.s_thisInstance}constructor(){this.m_map=new Map,this.m_vd2D=new ZN(1),this.m_map.set(1,this.m_vd2D),this.m_vd3D=new ZN(3),this.m_map.set(3,this.m_vd2D)}GetVD2D(){return this.m_vd2D}GetVD3D(){return this.m_vd3D}FindOrAdd(e){if(e===1)return this.GetVD2D();if(e===3)return this.GetVD3D();const i=this.m_map.get(e);if(i)return i;const n=new ZN(e);return this.m_map.set(e,n),n}}function nB(t){return Pv.getInstance().FindOrAdd(t)}function I5(t,e){if(!t||!e)return e||t;const i=t.getSemanticsBitArray()|e.getSemanticsBitArray();return(i&t.getSemanticsBitArray())===i?t:(i&e.getSemanticsBitArray())===i?e:nB(i)}function M5(t,e){const i=t.getSemanticsBitArray()|1<<e;return(i&t.getSemanticsBitArray())===i?t:nB(i)}function sB(t,e){const i=(t.getSemanticsBitArray()|1<<e)-(1<<e);return i===t.getSemanticsBitArray()?(K(0),t):nB(i)}function Uo(){return Pv.getInstance().GetVD2D()}function KE(){return Pv.getInstance().GetVD3D()}function I7(t,e,i){if(i.fill(-1),t!==null&&e!==null)for(let n=0,s=t.getAttributeCount();n<s;n++)i[n]=e.getAttributeIndex(t.getSemantics(n))}Pv.s_thisInstance=new Pv;class ii{static construct(e,i,n){return new ii(e,i,n)}constructor(e,i,n){e!==void 0?(this.x=e,this.y=i,this.z=n):this.x=this.y=this.z=Number.NaN}get 0(){return this.x}get 1(){return this.y}get 2(){return this.z}set 0(e){this.x=e}set 1(e){this.y=e}set 2(e){this.z=e}clone(){return new ii(this.x,this.y,this.z)}assign(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}setCoords(e,i,n){return this.x=e,this.y=i,this.z=n,this}setCoordsPoint2DZ(e,i){return this.setCoords(e.x,e.y,i)}setCoordsPoint3D(e){this.x=e.x,this.y=e.y,this.z=e.z}setZero(){this.x=0,this.y=0,this.z=0}setNormalized(e){this.assign(e),this.normalizeThis()}normalizeThis(){const e=this.length();return e?(this.x/=e,this.y/=e,this.z/=e):(this.x=1,this.y=0,this.z=0),this}getUnitVector(){const e=new ii;return e.setNormalized(this),e}sqrLength(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthXY(){return K(0),0}static sqrDistance(e,i){return Xi(e.x-i.x)+Xi(e.y-i.y)+Xi(e.z-i.z)}static sqrDistanceCoords(e,i,n,s,r,o){return K(0),0}static distance(e,i){return Math.sqrt(ii.sqrDistance(e,i))}isEqual(e,i){return i===void 0&&(i=0),Math.abs(this.x-e.x)<=i&&Math.abs(this.y-e.y)<=i&&T5(this.z,e.z,i)}static compareByLength(e,i,n,s){return K(0),0}isEqualCoords(e,i,n,s){return K(0),this.x===e&&this.y===i&&this.z===n}isEqualsTols(e,i,n){return K(0),!1}isEqualCoordsTols(e,i,n,s,r){return K(0),!1}static st_isEqual(e,i,n,s){return K(0),!1}equals(e,i){return K(0),!1}equalsTols(e,i,n){return K(0),!1}divThis(e){return this.x/=e,this.y/=e,this.z/=e,this}subThis(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}setSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}sub(e){return ii.construct(this.x-e.x,this.y-e.y,this.z-e.z)}addThis(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}add(e){return this.clone().addThis(e)}setAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}mul(e){return ii.construct(this.x*e,this.y*e,this.z*e)}dotProduct(e){return this.x*e.x+this.y*e.y+this.z*e.z}crossProductVector(e){const i=this.y*e.z-e.y*this.z,n=e.x*this.z-this.x*e.z,s=this.x*e.y-e.x*this.y;return new ii(i,n,s)}setCrossProductVector(e,i){const n=e.y*i.z-i.y*e.z,s=i.x*e.z-e.x*i.z,r=e.x*i.y-i.x*e.y;return this.x=n,this.y=s,this.z=r,this}setScaled(e,i){return this.x=e*i.x,this.y=e*i.y,this.z=e*i.z,this}scaleThis(e){return this.x*=e,this.y*=e,this.z*=e,this}scaleZThis(e){return this.z*=e,this}setNAN(){return K(0),this}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)||Number.isNaN(this.z)}static getNAN(){return ii.construct(Number.NaN,Number.NaN,Number.NaN)}isFinite(){return K(0),!1}isZero(){return this.x===0&&this.y===0&&this.z===0}norm(e){return K(0),0}sqrDistanceFromCenterToSpheroidSurface(e,i){return K(0),0}distanceFromCenterToSpheroidSurface(e,i){return Math.sqrt(this.sqrDistanceFromCenterToSpheroidSurface(e,i))}static getClosestCoordinate(e,i,n,s=!1){return K(0),0}compare(e){return K(0),0}compareXYZ(e){return K(0),0}negateThis(){this.x=-this.x,this.y=-this.y,this.z=-this.z}static averageFast(e,i){return K(0),{}}static average(e,i){return K(0),{}}static size(){return ii.dimensions}static lerp(e,i,n){const s=new ii;return oQe(e,i,n,s),s}static slerp(e,i,n){return K(0),{}}static compareVectors(e,i){return K(0),0}static selectRightHandedBasisFromNormal(e,i,n){const s=e.getUnitVector(),r=s.createAPerpendicular(),o=new ii;o.setCrossProductVector(s,r),o.normalizeThis(),i.setCoordsPoint3D(r),n.setCoordsPoint3D(o)}createAPerpendicular(){const e=[this.crossProductVector(new ii(0,0,1)),this.crossProductVector(new ii(1,0,0)),this.crossProductVector(new ii(0,1,0))],i=[e[0].sqrLength(),e[1].sqrLength(),e[2].sqrLength()],n=e[i.reduce((s,r,o)=>i[s]>i[o]?s:o,0)];return n.normalizeThis(),n}calculateAngle(e){return K(0),0}static crossDotSign(e,i,n){return K(0),0}static isBisectorRobust(e,i,n){return K(0),0}static compareZOrder(e,i){return K(0),!1}}ii.dimensions=3;var q1=br;class Ut{constructor(e){if(this.m_description=null,this.x=Number.NaN,this.y=Number.NaN,this.m_attribs=null,e){if(!e.copy)return e.move?(this.m_description=e.move.m_description,e.move.m_description=null,this.m_attribs=e.move.m_attribs,e.move.m_attribs=null,this.x=e.move.x,void(this.y=e.move.y)):e.vd?(this.m_description=e.vd,void(e.attribBuffer?(this.m_attribs=e.attribBuffer,e.initDefaultValues&&this.setDefaultAttributeValues()):this.ensureAttributes())):e.pt?(this.m_description=Uo(),void this.setXY(e.pt)):void("x"in e&&("z"in e?(this.m_description=KE(),this.ensureAttributes(),this.setXYZ(new ii(e.x,e.y,e.z))):(this.m_description=Uo(),this.setXYCoords(e.x,e.y))));e.copy.copyTo(this)}else this.m_description=Uo()}assignCopy(e){return this.m_attribs=null,e.copyTo(this),this}assignMove(e){return K(0),this}vertexCount(){return K(0),1}getXY(){return new Y(this.x,this.y)}setXY(e){this.x=e.x,this.y=e.y}setXYCoords(e,i){this.x=e,this.y=i}getXYZ(){const e=new ii;return e.x=this.x,e.y=this.y,e.z=this.getZ(),e}setXYZ(e){this.addAttribute(1),this.x=e.x,this.y=e.y,this.m_attribs[0]=e.z}getX(){return this.x}setX(e){this.x=e}getY(){return this.y}setY(e){this.y=e}getZ(){return this.m_description.hasZ()?this.m_attribs[0]:q1.getDefaultValue(1)}setZ(e){this.addAttribute(1),this.m_attribs[0]=e}getM(){return this.getAttributeAsDbl(2,0)}setM(e){this.addAttribute(2),this.m_description.hasZ()?this.m_attribs[1]=e:this.m_attribs[0]=e}getID(){return this.getAttributeAsInt(3,0)}setID(e){this.setAttributeBasic(3,0,e)}isEqualXY(e,i){return K(0),!1}isEqualXYCoords(e,i,n){return n===void 0&&(n=0),Math.abs(e-this.x)<=n&&Math.abs(i-this.y)<=n}getAttributeAsDbl(e,i){if(e===0){if(i===0)return this.x;if(i===1)return this.y;Mi("")}const n=q1.getComponentCount(e);(i<0||i>=n)&&Mi("");const s=this.m_description.getAttributeIndex(e);return s>=0?this.m_attribs[this.m_description.getPointAttributeOffset(s)-2+i]:q1.getDefaultValue(e)}getAttributeAsInt(e,i){return Math.trunc(this.getAttributeAsDbl(e,i))}setAttributeBasic(e,i,n){if(e===0)return void(i===0?this.x=n:i===1?this.y=n:Mi(""));const s=q1.getComponentCount(e);(i<0||i>=s)&&Mi("");let r=this.m_description.getAttributeIndex(e);r<0&&(this.addAttribute(e),r=this.m_description.getAttributeIndex(e)),this.m_attribs[this.m_description.getPointAttributeOffset(r)-2+i]=n}copyAttributesFrom(e,i){K(0)}getAttributeArray(){return this.m_attribs}getDescription(){return this.m_description}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}mergeVertexDescription(e){K(0)}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=M5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){K(0)}dropAllAttributes(){const e=Uo();e!==this.m_description&&this.assignVertexDescription(e)}getGeometryType(){return me.enumPoint}getDimension(){return 0}queryEnvelope(e){if(e instanceof ur)return e.setEmpty(),e.assignVertexDescription(this.m_description),void e.merge(this);if(e instanceof ol){if(this.isEmpty())return void e.setEmpty();const i=this.getXYZ();return e.xmin=i.x,e.ymin=i.y,e.zmin=i.z,e.xmax=i.x,e.ymax=i.y,void(e.zmax=i.z)}this.isEmpty()?e.setEmpty():(e.xmin=this.x,e.ymin=this.y,e.xmax=this.x,e.ymax=this.y)}queryLooseEnvelope(e){this.queryEnvelope(e)}queryInterval(e,i){const n=new Ze;if(this.isEmpty())return n.setEmpty(),n;const s=this.getAttributeAsDbl(e,i);return n.vmin=s,n.vmax=s,n}applyTransformation(e){if(!this.isEmpty()){if(e instanceof _i){const i=this.getXY();return e.transformInPlace(i),void this.setXY(i)}K(0)}}transformAttribute(e,i,n,s,r){K(0)}createInstance(){return new Ut({vd:this.m_description})}copyTo(e){if(this===e)return;e.getGeometryType()!==me.enumPoint&&Je();const i=e;i.x=this.x,i.y=this.y,this.m_attribs?(i.assignVertexDescription(this.m_description),i.m_attribs=this.m_attribs.slice()):(i.releaseAttributes(),i.assignVertexDescription(this.m_description))}isEmpty(){return Number.isNaN(this.x)||Number.isNaN(this.y)}setEmpty(){this.m_description||(this.m_description=Uo(),this.releaseAttributes()),this.x=Number.NaN,this.y=Number.NaN,this.m_attribs&&fs(this.m_attribs,this.m_description.getDefaultPointAttributes(),0,2,this.m_description.getTotalComponentCount()-2)}calculateArea2D(){return 0}calculateLength2D(){return 0}calculateLength3D(e){return 0}equals(e,i){if(e===this)return!0;if(e.getGeometryType()!==me.enumPoint)return!1;const n=e;if(this.m_description!==n.m_description||this.isEmpty()!==n.isEmpty())return!1;if(this.isEmpty())return!0;if(i===void 0&&(i=0),Math.abs(this.x-n.x)>i||Math.abs(this.y-n.y)>i)return!1;for(let s=0,r=this.m_description.getTotalComponentCount()-2;s<r;s++)if(!T5(this.m_attribs[s],n.m_attribs[s],i))return!1;return!0}getBoundary(){return null}clone(){const e=new Ut({vd:this.m_description});return this.copyTo(e),e}swap(e){K(0)}replaceNaNs(e,i){K(0)}lerp(e,i,n){return K(0),new Ut({x:0,y:0})}setDefaultAttributeValues(){const e=this.m_description.getTotalComponentCount()-2;e>0&&(this.m_attribs?fs(this.m_attribs,this.m_description.getDefaultPointAttributes(),0,2,e):this.m_attribs=this.m_description.getDefaultPointAttributes().slice(2))}static sqrDistance2D(e,i){return K(0),0}getImpl(){return this}hasNonLinearSegments(){return K(0),!1}mergeVertexDescriptionImpl(e){K(0)}releaseAttributes(){this.m_attribs=null}assignVertexDescriptionImpl(e){this.m_description||(this.m_description=Uo());const i=T7();I7(e,this.m_description,i);let n=null;e.getTotalComponentCount()-2>0&&(n=e.getDefaultPointAttributes().slice(2));for(let s=1,r=e.getAttributeCount();s<r;s++){const o=i[s];if(o!==-1){const l=this.m_description.getPointAttributeOffset(o)-2,c=e.getPointAttributeOffset(s)-2,f=q1.getComponentCount(e.getSemantics(s));for(let y=0;y<f;y++)n[c+y]=this.m_attribs[l+y]}}this.m_attribs=n,this.m_description=e}ensureAttributes(){this.m_description.getTotalComponentCount()-2>0&&this.m_attribs===null&&(this.m_attribs=this.m_description.getDefaultPointAttributes().slice(2))}queryValues(e,i){}copyCommonAttributesTo(e){e.x=this.x,e.y=this.y;const i=e.getDescription();if(i===this.m_description)this.m_attribs&&fs(e.m_attribs,this.m_attribs,0,0,this.m_description.getTotalComponentCount()-2);else{let n=0;for(let s=1,r=i.getAttributeCount();s<r;s++){const o=i.getSemantics(s);let l=q1.getComponentCount(o);if(this.m_description.hasAttribute(o)){let c=this.m_description.getPointAttributeOffset(this.m_description.getAttributeIndex(o))-2;for(;l!==0;)e.m_attribs[n++]=this.m_attribs[c++],l--}else{const c=q1.getDefaultValue(o);for(;l!==0;)e.m_attribs[n++]=c,l--}}}}setValues(e,i){}dbgDefaultAttribs(){}}Ut.type=me.enumPoint;var Pu=br;function nM(t,e){return e*(t.getTotalComponentCount()-2)}class ku{constructor(e){if(this.m_attributes=null,e)if(e.xmin!==void 0)this.m_envelope2D=new xe(e.xmin,e.ymin,e.xmax,e.ymax);else if(e.env2D!==void 0)this.m_envelope2D=new xe(e.env2D);else if(e.move)this.m_envelope2D=new xe(e.move.m_envelope2D),this.m_attributes=e.move.m_attributes,e.move.m_attributes=null;else{if(!e.moveEnv)throw new Error("unrecognized EnvelopeData constructor options");{const i=e.moveEnv.accessEnvelopeData();this.m_envelope2D=new xe(i.m_envelope2D),this.m_attributes=i.m_attributes,i.m_attributes=null}}else this.m_envelope2D=xe.constructEmpty()}ensureAttributes(e){const i=e.getTotalComponentCount()-2;!this.m_attributes&&i&&(this.m_attributes=new Array(2*i),this.m_attributes.fill(Number.NaN))}copyTo(e,i){const n=i,s=e.getTotalComponentCount()-2;if(n.m_description!==e&&(n.releaseAttributes_(),n.m_description=e,s&&(n.m_data.m_attributes=new Array(2*s))),s){K(this.m_attributes&&n.m_data.m_attributes);const r=2*s;fs(n.m_data.m_attributes,this.m_attributes,0,0,r)}n.m_data.m_envelope2D=new xe(this.m_envelope2D)}copyToIfNotNull(e,i){i.m_envelope2D=new xe(this.m_envelope2D),i.releaseAttributes(),e.getTotalComponentCount()-2&&this.m_attributes&&(i.m_attributes=this.m_attributes.slice())}releaseAttributes(){this.m_attributes=null}isEmpty(){return this.m_envelope2D.isEmpty()}transformAttribute(e,i,n,s,r){K(0)}queryInterval(e,i,n,s){if(this.isEmpty())return void s.setEmpty();if(i===0)return void(n===0?this.m_envelope2D.queryIntervalX(s):n===1?this.m_envelope2D.queryIntervalY(s):Mi(""));const r=Pu.getComponentCount(i);(n<0||n>=r)&&Mi("");const o=e.getAttributeIndex(i);if(o>=0)return s.vmin=this.m_attributes[nM(e,0)+e.getPointAttributeOffset(o)-2+n],void(s.vmax=this.m_attributes[nM(e,1)+e.getPointAttributeOffset(o)-2+n]);{const l=Pu.getDefaultValue(i);return void s.setCoords(l,l)}}queryEnvelope3D(e,i){const n=new Ze;this.queryInterval(e,1,0,n),i.setCoords(this.m_envelope2D.xmin,this.m_envelope2D.ymin,n.vmin,this.m_envelope2D.xmax,this.m_envelope2D.ymax,n.vmax)}setEmpty(e){this.m_envelope2D.setEmpty();const i=e.getTotalComponentCount()-2;i&&(this.m_attributes?this.dbgAssertSize(i):this.m_attributes=new Array(2*i),this.m_attributes.fill(Number.NaN))}dbgAssertSize(e){}}class ur{constructor(e){if(this.m_description=Uo(),e===void 0)this.m_data=new ku;else if(e.vd!==void 0)this.m_description=e.vd,this.m_data=new ku,this.ensureAttributes_();else if(e!=null&&e.env2D)this.m_data=new ku({env2D:e.env2D});else if(e.xmin!==void 0)this.m_data=new ku({xmin:e.xmin,ymin:e.ymin,xmax:e.xmax,ymax:e.ymax});else if(e.copy)this.m_data=new ku,e.copy.copyTo(this);else if(e.move)this.m_description=e.move.m_description,e.move.m_description=null,this.m_data=new ku({move:e.move.m_data});else{if(!e.centerPoint)throw new Error("unrecognized Envelope constructor options");this.m_description=e.centerPoint.getDescription(),this.m_data=new ku,this.ensureAttributes_(),this.setFromPoint(e.centerPoint,e.width,e.height)}}accessEnvelopeData(){return this.m_description=null,this.m_data}assignMove(e){return this===e||(this.m_description=e.m_description,e.m_description=null,this.m_data=new ku({move:e.m_data})),this}assignCopy(e){return this===e||e.copyTo(this),this}transformAttribute(e,i,n,s,r){K(0)}vertexCount(){return K(0),0}setAttributeBasic(e,i,n){if(this.addAttribute(e),this.m_data.isEmpty())return;const s=this.queryInterval(e,i);s.vmin=n,s.vmax=n,this.setIntervalEnvelope(e,i,s)}hasNonLinearSegments(){return K(0),!0}mergeVertexDescriptionImpl(e){const i=I5(this.getDescription(),e);this.assignVertexDescription(i)}asEnvelope2D(){return new xe(this.m_data.m_envelope2D)}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}getGeometryType(){return me.enumEnvelope}getDimension(){return 2}getXMin(){return this.m_data.m_envelope2D.xmin}getYMin(){return this.m_data.m_envelope2D.ymin}getXMax(){return this.m_data.m_envelope2D.xmax}getYMax(){return this.m_data.m_envelope2D.ymax}width(){return this.m_data.isEmpty()?Number.NaN:this.m_data.m_envelope2D.width()}height(){return this.m_data.isEmpty()?Number.NaN:this.m_data.m_envelope2D.height()}getCenterX(){return K(0),0}getCenterY(){return K(0),0}getCenterXY(){return this.m_data.isEmpty()?new Y:this.m_data.m_envelope2D.getCenter()}getCenter(e){if(e.assignVertexDescription(this.m_description),this.m_data.isEmpty())return void e.setEmpty();const i=this.m_description.getAttributeCount();for(let n=1;n<i;n++){const s=this.m_description.getSemantics(n),r=Pu.getComponentCount(s);for(let o=0;o<r;o++){const l=.5*(this.getAttributeAsDblImpl(0,s,o)+this.getAttributeAsDblImpl(1,s,o));e.setAttributeBasic(s,o,l)}}e.setXY(this.m_data.m_envelope2D.getCenter())}setCoords(e,i,n,s){this.m_data.m_envelope2D.setCoords({xmin:e,ymin:i,xmax:n,ymax:s})}setEnvelope(e){if(e instanceof xe)this.m_data.m_envelope2D=new xe(e),this.m_data.m_envelope2D.normalize();else{this.addAttribute(1),this.m_data.m_envelope2D=e.getEnvelope2D(),this.m_data.m_envelope2D.normalize();const i=Ze.constructEmpty();i.setCoords(e.zmin,e.zmax),this.setInterval(1,0,i.vmin,i.vmax)}}merge(e){if(e instanceof xe)return e.isValid()||Je(""),void this.m_data.m_envelope2D.mergeEnvelope2D(e);if(e instanceof ur){if(e.m_data.isEmpty())return;const i=e.getDescription();this.mergeVertexDescription(i),this.m_data.m_envelope2D.mergeEnvelope2D(e.m_data.m_envelope2D);for(let n=1,s=i.getAttributeCount();n<s;n++){const r=i.getSemantics(n),o=Pu.getComponentCount(r);for(let l=0;l<o;l++){const c=e.queryInterval(r,l),f=this.queryInterval(r,l);f.merge(c),this.setIntervalEnvelope(r,l,f)}}}else if(e instanceof Ut){const i=e;if(i.isEmpty())return;const n=i.getDescription();if(this.mergeVertexDescription(n),this.m_data.isEmpty())return void this.setFromPoint(i);this.m_data.m_envelope2D.merge(i.getXY());for(let s=1,r=n.getAttributeCount();s<r;s++){const o=n.getSemantics(s),l=Pu.getComponentCount(o);for(let c=0;c<l;c++){const f=i.getAttributeAsDbl(o,c),y=this.queryInterval(o,c);y.mergeCoordinate(f),this.setIntervalEnvelope(o,c,y)}}}else K(0)}intersect(e){if(!this.m_data.m_envelope2D.intersect(e.m_data.m_envelope2D))return this.setEmpty(),!1;const i=e.getDescription();this.mergeVertexDescription(i);for(let n=1,s=this.m_description.getAttributeCount();n<s;n++){const r=this.m_description.getSemantics(n),o=Pu.getComponentCount(r);for(let l=0;l<o;l++){const c=e.queryInterval(r,l),f=this.queryInterval(r,l);f.intersect(c),this.setIntervalEnvelope(r,l,f)}}return!0}intersectCommonAttributes(e){if(!this.m_data.m_envelope2D.intersect(e.m_data.m_envelope2D))return this.setEmpty(),!1;const i=e.getDescription();for(let n=1,s=this.m_description.getAttributeCount();n<s;n++){const r=this.m_description.getSemantics(n);if(!i.hasAttribute(r))continue;const o=Pu.getComponentCount(r);for(let l=0;l<o;l++){const c=e.queryInterval(r,l),f=this.queryInterval(r,l);f.intersect(c),this.setIntervalEnvelope(r,l,f)}}return!0}move(e,i){K(0)}centerAt(e,i){this.m_data.m_envelope2D.centerAtCoords(e,i)}centerAtPoint(e){}reaspect(e,i){K(0)}inflateCoords(e,i){this.m_data.m_envelope2D.inflateCoords(e,i)}containsCoords(e,i){return K(0),!1}contains(e){return K(0),!1}containsPoint(e){return K(0),!1}containsEnvelope(e){return K(0),!1}setIntervalEnvelope(e,i,n){if(this.addAttribute(e),this.m_data.isEmpty())return;const s=new Ze(n);if(s.normalize(),e===0){if(s.isEmpty())return void this.setEmpty();i===0?(this.m_data.m_envelope2D.xmin=s.vmin,this.m_data.m_envelope2D.xmax=s.vmax):i===1?(this.m_data.m_envelope2D.ymin=s.vmin,this.m_data.m_envelope2D.ymax=s.vmax):Mi("")}else this.setAttributeAsDblImpl(0,e,i,s.vmin),this.setAttributeAsDblImpl(1,e,i,s.vmax)}setInterval(e,i,n,s){this.setIntervalEnvelope(e,i,new Ze(n,s))}queryInterval(e,i){const n=new Ze;return this.m_data.queryInterval(this.m_description,e,i,n),n}queryEnvelope(e){e instanceof xe?e.setCoords({env2D:this.m_data.m_envelope2D}):e instanceof ol?this.m_data.queryEnvelope3D(this.m_description,e):e instanceof ur?this.copyTo(e):K(0)}applyTransformation(e){e instanceof _i?e.transformEnvInPlace(this.m_data.m_envelope2D):K(0)}createInstance(){return K(0),this}copyTo(e){e!==this&&this.m_data.copyTo(this.m_description,e)}isEmpty(){return this.m_data.isEmpty()}setEmpty(){this.m_description||(this.m_description=Uo()),this.m_data.setEmpty(this.m_description)}calculateArea2D(){return this.m_data.m_envelope2D.getArea()}calculateLength2D(){return K(0),0}calculateLength3D(e){return K(0),0}equals(e,i){if(e===this)return!0;const n=e;if(this.m_description!==n.m_description||this.m_data.isEmpty()!==n.m_data.isEmpty())return!1;if(this.m_data.isEmpty())return!0;if(i===void 0&&(i=0),Math.abs(this.m_data.m_envelope2D.xmin-n.m_data.m_envelope2D.xmin)>i||Math.abs(this.m_data.m_envelope2D.ymin-n.m_data.m_envelope2D.ymin)>i||Math.abs(this.m_data.m_envelope2D.xmax-n.m_data.m_envelope2D.xmax)>i||Math.abs(this.m_data.m_envelope2D.ymax-n.m_data.m_envelope2D.ymax)>i)return!1;for(let s=0,r=2*(this.m_description.getTotalComponentCount()-2);s<r;s++)if(!T5(this.m_data.m_attributes[s],n.m_data.m_attributes[s],i))return!1;return!0}getBoundary(){return Bn("getBoundary not available in this context. Use the boundary operator with an envelope parameter"),null}clone(){return new ur({copy:this})}swap(e){K(0)}queryCoordinates(e){K(0)}queryCornerByVal(e,i){(e<0||e>3)&&Mi(""),i.assignVertexDescription(this.m_description);const n=this.getDescription().getAttributeCount();for(let s=1;s<n;s++){const r=this.m_description.getSemantics(s),o=Pu.getComponentCount(r);for(let l=0;l<o;l++)i.setAttributeBasic(r,l,this.getAttributeAsDblImpl(e%2,r,l))}i.setXY(this.m_data.m_envelope2D.queryCorner(e))}queryCorner(e,i){i.assign(this.m_data.m_envelope2D.queryCorner(e))}getDescription(){return this.m_description}mergeVertexDescription(e){this.m_description!==e&&(this.m_description&&this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=M5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){if(!this.m_description.hasAttribute(e))return;const i=sB(this.m_description,e);this.assignVertexDescription(i)}dropAllAttributes(){K(0)}queryLooseEnvelope(e){this.queryEnvelope(e)}replaceNaNs(e,i){K(0)}getImpl(){return this}setFromPoint(e,i,n){this.m_data.m_envelope2D.setCoords({center:e.getXY(),width:i??0,height:n??0});const s=e.getDescription();for(let r=1,o=s.getAttributeCount();r<o;r++){const l=s.getSemantics(r),c=Pu.getComponentCount(l);for(let f=0;f<c;f++){const y=e.getAttributeAsDbl(l,f);this.setInterval(l,f,y,y)}}}assignVertexDescriptionImpl(e){const i=T7();I7(e,this.m_description,i);let n=null;const s=e.getTotalComponentCount()-2,r=this.m_description?this.m_description.getTotalComponentCount()-2:0;s>0&&(n=new Array(2*s),n.fill(Number.NaN));for(let o=1;o<e.getAttributeCount();o++){const l=i[o];if(l!==-1){const c=e.getPointAttributeOffset(o)-2,f=Pu.getComponentCount(e.getSemantics(o)),y=this.m_description.getPointAttributeOffset(l)-2;fs(n,this.m_data.m_attributes,c,y,f),fs(n,this.m_data.m_attributes,s+c,r+y,f)}}this.releaseAttributes_(),this.m_data.m_attributes=n,this.m_description=e}getAttributeAsDblImpl(e,i,n){if(this.m_data.isEmpty()&&b7(""),i===0)return e?n?this.m_data.m_envelope2D.ymax:this.m_data.m_envelope2D.xmax:n?this.m_data.m_envelope2D.ymin:this.m_data.m_envelope2D.xmin;n>=Pu.getComponentCount(i)&&Mi("");const s=this.m_description.getAttributeIndex(i);return s>=0?this.m_data.m_attributes[nM(this.m_description,e)+this.m_description.getPointAttributeOffset(s)-2+n]:br.getDefaultValue(i)}setAttributeAsDblImpl(e,i,n,s){i===0&&(e?n===1?this.m_data.m_envelope2D.ymax=s:n===0?this.m_data.m_envelope2D.xmax=s:Mi(""):n===1?this.m_data.m_envelope2D.ymin=s:n===0?this.m_data.m_envelope2D.xmin=s:Mi(""));const r=Pu.getComponentCount(i);(n<0||n>=r)&&Mi(""),this.addAttribute(i);const o=this.m_description.getAttributeIndex(i);this.m_data.m_attributes[nM(this.m_description,e)+this.m_description.getPointAttributeOffset(o)-2+n]=s}releaseAttributes_(){this.m_data.releaseAttributes()}ensureAttributes_(){this.m_data.ensureAttributes(this.m_description)}}ur.type=me.enumEnvelope;const Wb=-559038737;var b2=br;function P1e(t,e,i){switch(t){case 0:return new sM(e,i);case 1:return new fd(e,i);case 2:return new On(e,i);case 3:throw new Error("64 bit int attribute stream not implemented");case 4:return new Tv(e,i);default:Je("")}}function T1e(t,e){const i=b2.getComponentCount(t);return P1e(b2.getPersistence(t),e*i,b2.getDefaultValue(t))}function l9(t,e){const i=b2.getComponentCount(t);return P1e(b2.getPersistence(t),e*i)}function Ya(t,e){return new On(t,e)}function jg(t,e){return new Tv(t,e)}function Gy(t,e){return new fd(t,e)}class fm{size(){return this.m_size}checkResize(e,i){e>this.m_size&&this.resize(e,i)}resize(e,i){if((e=Math.trunc(e))===this.m_size)return;const n=!!i||Number.isNaN(i);if(e<this.m_a.length)this.m_a.length>fm.s_resizeMin&&1.25*e<this.m_a.length&&(this.m_a=this.m_a.slice(0,e)),n&&e>this.m_size&&this.m_a.fill(i,this.m_size,e);else if(e>=this.m_a.length){const s=1.25*e,r=new this.m_a.constructor(s);r.set(this.m_a),this.m_a=r,n&&this.m_a.fill(i,this.m_size,e)}this.m_size=e}resizeRounded(e,i){return this.resize(e,i)}reserve(e){}read(e){return K(e>=0&&e<this.m_size),this.m_a[e]}readAsDbl(e){return this.read(e)}write(e,i){this.m_a[e]=i}writeAsDbl(e,i){this.write(e,i)}setRange(e,i,n){(i<0||n<0||n+i>this.size())&&Je(),this.m_a.fill(e,i,i+n)}add(e){this.resize(this.m_size+1),this.m_a[this.m_size-1]=e}addArray(e,i){const n=this.m_size;i===void 0?(this.resize(this.m_size+e.length),this.m_a.set(e,n)):(this.resize(this.m_size+i),this.m_a.set(e.slice(0,i),n))}equals(e,i,n,s){return this.getPersistence()!==e.getPersistence()?!1:HQe(this,e,i,n,s)}insertRange(e,i,n,s){n&&this.checkResize(s+n),this.m_a.copyWithin(e+n,e,s||this.m_size),this.m_a.fill(i,e,e+n)}readRange(e,i){return this.m_a.slice(e,e+i)}insertRangeFromStream(e,i,n,s,r,o,l){K(this.getPersistence()===i.getPersistence());const c=i;s&&this.checkResize(l+s),this.m_a.copyWithin(e+s,e,l||this.m_size),this.m_a.set(c.readRange(n,s),e),r||this.reverseRange(e,s,o)}writeRange(e,i,n,s,r,o){K(this.getPersistence()===n.getPersistence());const l=n;if((e<0||i<0||s<0)&&Je(),l.size()<s+i&&Je(),i===0)return;this.size()<i+e&&this.resize(i+e);const c=l.m_a.subarray(s,s+i);UQe(this.m_a,e,i,c)}insertAttributes(e,i,n,s){const r=b2.getComponentCount(n);this.m_a.copyWithin(e+r,e,s||this.m_size);for(let o=0;o<r;o++)this.m_a[e+o]=i.getAttributeAsDbl(n,o)}insertAttributesFromPoints(e,i,n,s,r){K(0)}eraseRange(e,i,n){this.m_size<e+i&&Je(),this.m_a.copyWithin(e,e+i),this.m_size-=i}reverseRange(e,i,n){if((n<1||i%n!=0)&&Je(),this.m_a.subarray(e,e+i).reverse(),n>1)for(let s=e,r=e+i;s<r;s+=n){let o=s,l=s+n-1;for(;o<l;){const c=this.m_a[o];this.m_a[o]=this.m_a[l],this.m_a[l]=c,o++,l--}}}rotate(e,i,n){(i<e||i>n||e>n)&&Mi("rotate"),i!==e&&i!==n&&(this.reverseRange(e,i-e,1),this.reverseRange(i,n-i,1),this.reverseRange(e,n-e,1))}adjacentDifference(e,i,n){return K(0),0}sort(e,i,n){this.m_a.subarray(e,i).sort(n)}constructor(e){if(e.move)this.m_a=e.move.m_a,this.m_size=e.move.m_size,e.move.m_a=e.move.m_a.slice(0,0),e.move.m_size=0;else if(e.copy)this.m_size=e.copy.m_size,e.maxSize&&(this.m_size=Math.min(e.maxSize,this.m_size)),this.m_a=e.copy.m_a.slice(0,this.m_size);else{const i=Math.max(e.size,fm.s_constructMin);this.m_a=new e.ctor(i),(e.defaultValue||Number.isNaN(e.defaultValue))&&this.m_a.fill(e.defaultValue),this.m_size=e.size}}}fm.s_constructMin=2,fm.s_resizeMin=30;class Tv extends fm{setBits(e,i){this.m_a[e]|=i}clearBits(e,i){this.m_a[e]&=~i}getPersistence(){return 4}clone(){return new Tv({ctor:Int8Array,copy:this})}restrictedClone(e){return new Tv({ctor:Int8Array,copy:this,maxSize:e})}constructor(e,i){super(typeof e=="number"?{ctor:Int8Array,size:e,defaultValue:i}:e)}}class On extends fm{getPersistence(){return 2}clone(){return new On({ctor:Int32Array,copy:this})}restrictedClone(e){return new On({ctor:Int32Array,copy:this,maxSize:e})}write(e,i){K(i<=Eo()),super.write(e,i)}constructor(e,i){super(typeof e=="number"?{ctor:Int32Array,size:e,defaultValue:i}:e)}}class sM extends fm{getPersistence(){return 0}clone(){return new sM({ctor:Float32Array,copy:this})}restrictedClone(e){return new sM({ctor:Float32Array,copy:this,maxSize:e})}constructor(e,i){super(typeof e=="number"?{ctor:Float32Array,size:e,defaultValue:i}:e)}}class fd extends fm{getPersistence(){return 1}getArray(){return this.m_a}applyTransformation(e,i,n){(1&i||i+2*n>this.size())&&Je();const s=i===0?this.m_a:this.m_a.subarray(i);e.transformInterleavedPoints(s,n,s)}readPoint2D(e){const i=this.m_a[e],n=this.m_a[e+1];return new Y(i,n)}queryPoint2D(e,i){return i.x=this.m_a[e],i.y=this.m_a[e+1],i}writePoint2D(e,i){this.write(e,i.x),this.write(e+1,i.y)}insert(e,i,n){if(n+2>=this.m_a.length)throw RangeError("AttributeStreamOfDbl::insert");this.m_a.copyWithin(e+2,e,n||this.m_size),this.m_a[e]=i.x,this.m_a[e+1]=i.y}insertRangeFromPoints(e,i,n,s,r,o){if(this.m_a.copyWithin(e+2*s,e,o||this.m_size),r)for(let l=n,c=e,f=0;f<s;++f,++l){const y=i[l];this.m_a[c++]=y.x,this.m_a[c++]=y.y}else for(let l=n+s-1,c=e,f=0;f<s;++f,--l){const y=i[l];this.m_a[c++]=y.x,this.m_a[c++]=y.y}}queryRange(e,i,n,s,r){if((e<0||i<0)&&Je(),!s&&(r<=0||i%r!=0)&&Je(),i===0)return;if(i===1)return void(n[0]=this.m_a[e]);const o=this.m_a.subarray(e,e+i);n.set(o)}writeRangeFromArray(e,i,n,s,r){if((e<0||i<0)&&Je(),i===0)return;if(i===1)return void(this.m_a[e]=n[0]);let o=n;i<n.length&&(o=n.subarray(0,i)),this.m_a.set(o,e)}clone(){return new fd({ctor:Float64Array,copy:this})}restrictedClone(e){return new fd({ctor:Float64Array,copy:this,maxSize:e})}constructor(e,i){super(typeof e=="number"?{ctor:Float64Array,size:e,defaultValue:i}:e)}}function HQe(t,e,i,n,s){if(t.getPersistence()!==e.getPersistence())return!1;const r=t.getPersistence()<=1,o=t.size(),l=e.size();if(n>o||n>l)return!1;if(s)for(let c=i;c<n;c++){let f=t.read(c)-e.read(c);if(f<0&&(f=-f),f>s)return!1}else for(let c=i;c<n;c++){const f=t.read(c),y=e.read(c);if(f!==y){if(r&&Number.isNaN(f)&&Number.isNaN(y))continue;return!1}}return!0}function UQe(t,e,i,n,s,r){if((e<0||i<0)&&Je(),i===0)return;if(i===1)return void(t[e]=n[0]);let o=n;i<n.length&&(o=n.subarray(0,i)),t.set(o,e)}class mT{constructor(e){this.posStream=null,this.streams=null,e!==void 0&&K(0)}assignMove(e){return K(0),this}get(e){return e>0?this.streams[e-1]:this.posStream}set(e,i){e>0?this.streams[e-1]=i:this.posStream=i}destroyAndSetSize(e){if(this.streams=null,e>1){this.streams=new Array(e-1);for(let i=0;i<e-1;++i)this.streams[i]=null}this.posStream=null}swap(e){[this.streams,e.streams]=[e.streams,this.streams],[this.posStream,e.posStream]=[e.posStream,this.posStream]}empty(){return this.posStream===null&&this.streams===null}}class pd{constructor(){this.m_minValue=-1,this.m_maxValue=-1,this.m_dy=Number.NaN,this.m_buckets=new On(0),this.m_bucketedIndices=new On(0)}static sortEx(e,i,n,s,r=32){if(n-i<=r)return void s.userSort(i,n,e);new pd().sort(e,i,n,s,r)}sort(e,i,n,s,r=32){if(n-i<=r)return void s.userSort(i,n,e);let o=!0,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(let y=i;y<n;y++){const _=s.getValue(e.read(y));_<l&&(l=_),_>c&&(c=_)}if(this.reset(n-i,l,c,n-i)){for(let _=i;_<n;_++){const x=e.read(_),S=s.getValue(x),P=this.getBucket(S);this.m_buckets.write(P,this.m_buckets.read(P)+1),this.m_bucketedIndices.write(_-i,x)}let y=this.m_buckets.read(0);this.m_buckets.write(0,0);for(let _=1,x=this.m_buckets.size();_<x;_++){const S=this.m_buckets.read(_);this.m_buckets.write(_,y),y+=S}for(let _=i;_<n;_++){const x=this.m_bucketedIndices.read(_-i),S=s.getValue(x),P=this.getBucket(S),A=this.m_buckets.read(P);e.write(A+i,x),this.m_buckets.write(P,A+1)}o=!1}if(o)return void s.userSort(i,n,e);let f=0;for(let y=0,_=this.m_buckets.size();y<_;y++){const x=f;f=this.m_buckets.read(y),f>x&&s.userSort(i+x,i+f,e)}this.m_buckets.size()>100&&(this.m_buckets.resize(0),this.m_bucketedIndices.resize(0))}reset(e,i,n,s){if(e<2||n===i)return!1;const r=Math.min(pd.c_maxBuckets,e);return this.m_buckets.resize(r),this.m_buckets.setRange(0,0,this.m_buckets.size()),this.m_minValue=i,this.m_maxValue=n,this.m_bucketedIndices.resize(s),this.m_dy=(n-i)/(r-1),!0}getBucket(e){return Math.trunc((e-this.m_minValue)/this.m_dy)}getBucketCount(){return this.m_buckets.size()}}pd.c_maxBuckets=65536;class Yt{constructor(e){this.m_buffer=null,this.m_firstFree=-1,this.m_last=0,this.m_size=0,this.m_capacity=0,this.m_bufferSize=0,this.m_stride=0,this.m_stride=e,this.m_realStride=e,this.m_blockSize=Math.trunc(Yt.st_realBlockSize/this.m_realStride)}dbgdelete_(e){return this.m_buffer[e>>Yt.st_blockPower][1+(e&Yt.st_blockMask)]=Yt.st_deadVertex,!0}deleteElement(e){(e>>Yt.st_blockPower)*this.m_blockSize*this.m_realStride+(e&Yt.st_blockMask)<this.m_last*this.m_realStride?(this.m_buffer[e>>Yt.st_blockPower][e&Yt.st_blockMask]=this.m_firstFree,this.m_firstFree=e):this.m_last--,this.m_size--}getField(e,i){return this.m_buffer[e>>Yt.st_blockPower][(e&Yt.st_blockMask)+i]}setField(e,i,n){this.m_buffer[e>>Yt.st_blockPower][(e&Yt.st_blockMask)+i]=n}getStride(){return this.m_stride}newElement(){let e=this.m_firstFree;if(e===-1){if(this.m_last===this.m_capacity){const s=this.m_capacity!==0?Math.trunc(2*(this.m_capacity+1)):1;this.grow(s)}e=(this.m_last/this.m_blockSize<<Yt.st_blockPower)+this.m_last%this.m_blockSize*this.m_realStride,this.m_last++}else this.m_firstFree=this.m_buffer[e>>Yt.st_blockPower][e&Yt.st_blockMask];this.m_size++;const i=this.m_buffer[e>>Yt.st_blockPower],n=e&Yt.st_blockMask;for(let s=0;s<this.m_stride;s++)i[n+s]=-1;return e}elementToIndex(e){return(e>>Yt.st_blockPower)*this.m_blockSize+(e&Yt.st_blockMask)/this.m_realStride}deleteAll(e){this.m_firstFree=-1,this.m_last=0,this.m_size=0,e&&(this.m_buffer=null,this.m_capacity=0)}size(){return this.m_size}setCapacity(e){e>this.m_capacity&&this.grow(e)}capacity(){return this.m_capacity}swap(e,i){const n=this.m_buffer[e>>Yt.st_blockPower],s=this.m_buffer[i>>Yt.st_blockPower],r=e&Yt.st_blockMask,o=i&Yt.st_blockMask;for(let l=0;l<this.m_stride;l++){const c=n[r+l];n[r+l]=s[o+l],s[o+l]=c}}swapField(e,i,n){const s=this.m_buffer[e>>Yt.st_blockPower],r=this.m_buffer[i>>Yt.st_blockPower],o=(e&Yt.st_blockMask)+n,l=(i&Yt.st_blockMask)+n,c=s[o];s[o]=r[l],r[l]=c}static impossibleIndex2(){return-2}static impossibleIndex3(){return-3}static isValidElement(e){return e>=0}ensureBufferBlocksCapacity(e){if(this.m_buffer.length<e){const i=new Array(e);for(let n=0;n<this.m_buffer.length;n++)i[n]=this.m_buffer[n];this.m_buffer=i}}grow(e){this.m_buffer===null&&(this.m_bufferSize=0,this.m_buffer=new Array(8));const i=Math.trunc((e+this.m_blockSize-1)/this.m_blockSize);if(this.ensureBufferBlocksCapacity(i),i===1){let n=0;const s=e*this.m_realStride;for(;s>Yt.st_sizes[n];)n++;const r=new Int32Array(Yt.st_sizes[n]);this.m_bufferSize===1?(r.set(this.m_buffer[0]),this.m_buffer[0]=r):(this.m_buffer[this.m_bufferSize]=r,this.m_bufferSize++),this.m_capacity=Math.trunc(r.length/this.m_realStride)}else{if(this.m_bufferSize===1&&this.m_buffer[0].length<Yt.st_realBlockSize){const n=new Int32Array(Yt.st_realBlockSize);n.set(this.m_buffer[0]),this.m_buffer[0]=n,this.m_capacity=this.m_blockSize}for(;this.m_bufferSize<i;)this.m_buffer[this.m_bufferSize++]=new Int32Array(Yt.st_realBlockSize),this.m_capacity+=this.m_blockSize}}}function YQe(t,e){return{element:t,box:e.clone()}}Yt.st_realBlockSize=16384,Yt.st_blockMask=16383,Yt.st_blockPower=14,Yt.st_sizes=[16,32,64,128,256,512,1024,2048,4096,8192,16384],Yt.st_deadVertex=-2125315821;class qo{constructor(e,i,n){this.m_extent=new xe,this.m_dataExtent=new xe,this.m_childExtents=[new xe,new xe,new xe,new xe],this.m_elementNodes=new Yt(4),this.m_data=[],this.m_freeData=[],this.m_root=-1,this.m_height=8,n===void 0&&(n=!1),this.m_quadTreeNodes=new Yt(n?11:10),this.m_bStoreDuplicates=n,this.reset_(e,i)}reset(e,i){K(0)}insert(e,i){if(this.m_root===-1&&this.createRoot_(),this.m_bStoreDuplicates){const s=this.insertDuplicates_(e,i,0,this.m_extent,this.m_root,!1,-1);return s!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),s}const n=this.insert_(e,i,0,this.m_extent,this.m_root,!1,-1);return n!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),n}insertEx(e,i,n){if(this.m_root===-1&&this.createRoot_(),this.m_bStoreDuplicates){const c=this.insertDuplicates_(e,i,0,this.m_extent,this.m_root,!1,-1);return c!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),c}let s;s=n===-1?this.m_root:this.getQuad_(n);const r=this.getHeight(s),o=this.getExtent(s),l=this.insert_(e,i,r,o,s,!1,-1);return l!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),l}removeElement(e){K(0)}getElement(e){return this.getElementValue_(this.getData_(e))}getElementAtIndex(e){return K(0),0}getElementExtent(e){const i=this.getData_(e);return this.getBoundingBoxValue_(i).clone()}getElementExtentAtIndex(e){return K(0),{}}getDataExtent(){return this.m_dataExtent.clone()}getQuadTreeExtent(){return K(0),{}}getHeight(e){return this.m_quadTreeNodes.getField(e,6)>>qo.m_heightBitShift}getMaxHeight(){return this.m_height}getExtent(e){const i=new xe;if(i.setCoords({env2D:this.m_extent}),e===this.m_root)return i;const n=[];let s=e;do n.push(this.getQuadrant_(s)),s=this.getParent_(s);while(s!==this.m_root);const r=n.length;for(let o=0;o<r;o++){const l=n.at(-1);n.pop(),l===0?(i.xmin=.5*(i.xmin+i.xmax),i.ymin=.5*(i.ymin+i.ymax)):l===1?(i.xmax=.5*(i.xmin+i.xmax),i.ymin=.5*(i.ymin+i.ymax)):l===2?(i.xmax=.5*(i.xmin+i.xmax),i.ymax=.5*(i.ymin+i.ymax)):(i.xmin=.5*(i.xmin+i.xmax),i.ymax=.5*(i.ymin+i.ymax))}return i}getQuad(e){return this.getQuad_(e)}getElementCount(){return this.m_root===-1?0:this.getSubTreeElementCount_(this.m_root)}getSubTreeElementCount(e){return this.getSubTreeElementCount_(e)}getContainedSubTreeElementCount(e){return this.m_bStoreDuplicates?this.getContainedSubTreeElementCount_(e):this.getSubTreeElementCount_(e)}getIntersectionCount(e,i,n){if(this.m_root===-1)return 0;const s=new xe;s.setCoords({env2D:e}),s.inflateCoords(i,i);const r=[],o=[];r.push(this.m_root),o.push(this.m_extent.clone());const l=Ge(xe,4);let c=0;for(;r.length>0;){let f=!1;const y=r.at(-1),_=o.at(-1);if(r.pop(),o.pop(),s.containsEnvelope(_)){if(c+=this.getSubTreeElementCount(y),n>0&&c>=n)return n}else if(s.isIntersecting(_)){for(let x=this.getFirstElement_(y);x!==-1;x=this.getNextElement_(x)){const S=this.getData_(x);if(this.getBoundingBoxValue_(S).isIntersecting(s)&&(c++,n>0&&c>=n))return n}f=this.getHeight(y)+1<=this.m_height}if(f){qo.setChildExtents_(_,l);for(let x=0;x<4;x++){const S=this.getChild_(y,x);S!==-1&&this.getSubTreeElementCount_(S)>0&&s.isIntersecting(l[x])&&(r.push(S),o.push(l[x].clone()))}}}return c}hasData(e,i){return this.getIntersectionCount(e,i,1)>=1}getIterator(e,i){return new Kte(this,e,i)}getIteratorForQT(){return new Kte(this)}getSortedIterator(e,i){return new Jte(this.getIterator(e,i))}getSortedIteratorForQT(){return new Jte(this.getIteratorForQT())}visitLeavesNearest(e,i,n,s){K(0)}reset_(e,i){(i<0||i>127)&&Je("invalid height"),this.m_height=i,this.m_extent.setCoords({env2D:e}),this.m_dataExtent.setEmpty(),this.m_root=-1}insert_(e,i,n,s,r,o,l){if(!s.containsEnvelope(i))return n===0?-1:this.insert_(e,i,0,this.m_extent,this.m_root,o,l);if(!o)for(let _=r;_!==-1;_=this.getParent_(_))this.setSubTreeElementCount_(_,this.getSubTreeElementCount_(_)+1);const c=new xe;c.setCoords({env2D:s});let f,y=r;for(f=n;f<this.m_height&&this.canPushDown_(y);f++){qo.setChildExtents_(c,this.m_childExtents);let _=!1;for(let x=0;x<4;x++)if(this.m_childExtents[x].containsEnvelope(i)){_=!0;let S=this.getChild_(y,x);S===-1&&(S=this.createChild_(y,x)),this.setSubTreeElementCount_(S,this.getSubTreeElementCount_(S)+1),y=S,c.setCoords({env2D:this.m_childExtents[x]});break}if(!_)break}return this.insertAtQuad_(e,i,f,c,y,o,r,l,-1)}insertDuplicates_(e,i,n,s,r,o,l){if(!o){if(!s.containsEnvelope(i))return-1;this.setSubTreeElementCount_(r,this.getSubTreeElementCount_(r)+1),this.setContainedSubTreeElementCount_(r,this.getContainedSubTreeElementCount_(r)+1)}const c=Math.max(i.width(),i.height());let f=-1;const y=[],_=[],x=[];y.push(r),_.push(s.clone()),x.push(n);const S=Ge(xe,4);for(;y.length>0;){let P=!1;const A=y.at(-1),D=_.at(-1),N=x.at(-1);if(y.pop(),_.pop(),x.pop(),N+1<this.m_height&&this.canPushDown_(A)&&c<=Math.max(D.width(),D.height())/2&&(P=!0),P){qo.setChildExtents_(D,S);let F=!1;for(let G=0;G<4;G++)if(F=S[G].containsEnvelope(i),F){let V=this.getChild_(A,G);V===-1&&(V=this.createChild_(A,G)),y.push(V),_.push(S[G].clone()),x.push(N+1),this.setSubTreeElementCount_(V,this.getSubTreeElementCount_(V)+1),this.setContainedSubTreeElementCount_(V,this.getContainedSubTreeElementCount_(V)+1);break}if(!F){for(let G=0;G<4;G++)if(S[G].isIntersecting(i)){let V=this.getChild_(A,G);V===-1&&(V=this.createChild_(A,G)),y.push(V),_.push(S[G].clone()),x.push(N+1),this.setSubTreeElementCount_(V,this.getSubTreeElementCount_(V)+1)}}}else f=this.insertAtQuad_(e,i,N,D,A,o,r,l,f),o=!1}return 0}insertAtQuad_(e,i,n,s,r,o,l,c,f){this.getFirstElement_(r);const y=this.getLastElement_(r);let _=-1;if(o){if(r===l)return c;this.disconnectElementHandle_(c),_=c}else f===-1?(_=this.createElement_(),this.setDataValues_(this.getData_(_),e,i)):_=this.createElementFromDuplicate_(f);return this.setQuad_(_,r),y!==-1?(this.setPrevElement_(_,y),this.setNextElement_(y,_)):this.setFirstElement_(r,_),this.setLastElement_(r,_),this.setLocalElementCount_(r,this.getLocalElementCount_(r)+1),this.canFlush_(r)&&this.flush_(n,s,r),_}static setChildExtents_(e,i){const n=.5*(e.xmin+e.xmax),s=.5*(e.ymin+e.ymax);i[0].setCoords({xmin:n,ymin:s,xmax:e.xmax,ymax:e.ymax}),i[1].setCoords({xmin:e.xmin,ymin:s,xmax:n,ymax:e.ymax}),i[2].setCoords({xmin:e.xmin,ymin:e.ymin,xmax:n,ymax:s}),i[3].setCoords({xmin:n,ymin:e.ymin,xmax:e.xmax,ymax:s})}disconnectElementHandle_(e){const i=this.getQuad_(e),n=this.getFirstElement_(i),s=this.getLastElement_(i),r=this.getPrevElement_(e),o=this.getNextElement_(e);n===e?(o!==-1?this.setPrevElement_(o,-1):this.setLastElement_(i,-1),this.setFirstElement_(i,o)):s===e?(this.setNextElement_(r,-1),this.setLastElement_(i,r)):(this.setPrevElement_(o,r),this.setNextElement_(r,o)),this.setPrevElement_(e,-1),this.setNextElement_(e,-1),this.setLocalElementCount_(i,this.getLocalElementCount_(i)-1)}canFlush_(e){return this.getLocalElementCount_(e)===qo.m_flushingCount&&!this.hasChildren_(e)}flush_(e,i,n){let s;const r=new xe;let o=this.getFirstElement_(n),l=-1,c=-1;do c=this.getData_(o),s=this.getElementValue_(c),r.setCoords({env2D:this.getBoundingBoxValue_(c)}),l=this.getNextElement_(o),this.m_bStoreDuplicates?this.insertDuplicates_(s,r,e,i,n,!0,o):this.insert_(s,r,e,i,n,!0,o),o=l;while(o!==-1)}canPushDown_(e){return this.getLocalElementCount_(e)>=qo.m_flushingCount||this.hasChildren_(e)}hasChildren_(e){return this.getChild_(e,0)!==-1||this.getChild_(e,1)!==-1||this.getChild_(e,2)!==-1||this.getChild_(e,3)!==-1}createChild_(e,i){const n=this.m_quadTreeNodes.newElement();return this.setChild_(e,i,n),this.setSubTreeElementCount_(n,0),this.setLocalElementCount_(n,0),this.setParent_(n,e),this.setHeightAndQuadrant_(n,this.getHeight_(e)+1,i),this.m_bStoreDuplicates&&this.setContainedSubTreeElementCount_(n,0),n}createRoot_(){this.m_root=this.m_quadTreeNodes.newElement(),this.setSubTreeElementCount_(this.m_root,0),this.setLocalElementCount_(this.m_root,0),this.setHeightAndQuadrant_(this.m_root,0,0),this.m_bStoreDuplicates&&this.setContainedSubTreeElementCount_(this.m_root,0)}createElement_(){const e=this.m_elementNodes.newElement();let i;return this.m_freeData.length>0?(i=this.m_freeData.at(-1),this.m_freeData.pop()):(i=this.m_data.length,this.m_data.length=i+1),this.setData_(e,i),e}createElementFromDuplicate_(e){const i=this.m_elementNodes.newElement(),n=this.getData_(e);return this.setData_(i,n),i}freeElementAndBoxNode_(e){K(0)}getChild_(e,i){return this.m_quadTreeNodes.getField(e,i)}setChild_(e,i,n){this.m_quadTreeNodes.setField(e,i,n)}getFirstElement_(e){return this.m_quadTreeNodes.getField(e,4)}setFirstElement_(e,i){this.m_quadTreeNodes.setField(e,4,i)}getLastElement_(e){return this.m_quadTreeNodes.getField(e,5)}setLastElement_(e,i){this.m_quadTreeNodes.setField(e,5,i)}getQuadrant_(e){return this.m_quadTreeNodes.getField(e,6)&qo.m_quadrantMask}getHeight_(e){return this.m_quadTreeNodes.getField(e,6)>>qo.m_heightBitShift}setHeightAndQuadrant_(e,i,n){const s=i<<qo.m_heightBitShift|n;this.m_quadTreeNodes.setField(e,6,s)}getLocalElementCount_(e){return this.m_quadTreeNodes.getField(e,7)}setLocalElementCount_(e,i){this.m_quadTreeNodes.setField(e,7,i)}getSubTreeElementCount_(e){return this.m_quadTreeNodes.getField(e,8)}setSubTreeElementCount_(e,i){this.m_quadTreeNodes.setField(e,8,i)}getParent_(e){return this.m_quadTreeNodes.getField(e,9)}setParent_(e,i){this.m_quadTreeNodes.setField(e,9,i)}getContainedSubTreeElementCount_(e){return this.m_quadTreeNodes.getField(e,10)}setContainedSubTreeElementCount_(e,i){this.m_quadTreeNodes.setField(e,10,i)}getData_(e){return this.m_elementNodes.getField(e,0)}setData_(e,i){this.m_elementNodes.setField(e,0,i)}getPrevElement_(e){return this.m_elementNodes.getField(e,1)}getNextElement_(e){return this.m_elementNodes.getField(e,2)}setPrevElement_(e,i){this.m_elementNodes.setField(e,1,i)}setNextElement_(e,i){this.m_elementNodes.setField(e,2,i)}getQuad_(e){return this.m_elementNodes.getField(e,3)}setQuad_(e,i){this.m_elementNodes.setField(e,3,i)}getElementValue_(e){return this.m_data[e].element}getBoundingBoxValue_(e){return this.m_data[e].box}setDataValues_(e,i,n){this.m_data[e]=YQe(i,n)}}qo.m_quadrantMask=3,qo.m_heightBitShift=2,qo.m_flushingCount=5;class Kte{constructor(e,i,n){this.m_bLinear=!1,this.m_queryStart=new Y,this.m_queryEnd=new Y,this.m_queryBox=new xe,this.m_tolerance=0,this.m_currentElementHandle=-1,this.m_nextElementHandle=-1,this.m_quadsStack=[],this.m_extentsStack=[],this.m_childExtents=[new xe,new xe,new xe,new xe],this.m_quadTree=e,i&&this.resetIterator(i,n)}resetIterator(e,i){if(i===void 0&&(i=0),e instanceof xe)return this.m_quadsStack.length=0,this.m_extentsStack.length=0,this.m_currentElementHandle=-1,this.m_queryBox.setCoords({env2D:e}),this.m_queryBox.inflateCoords(i,i),this.m_tolerance=Number.NaN,void(this.m_quadTree.m_root!==-1&&this.m_queryBox.isIntersecting(this.m_quadTree.m_extent)?(this.m_quadsStack.push(this.m_quadTree.m_root),this.m_extentsStack.push(this.m_quadTree.m_extent.clone()),this.m_nextElementHandle=this.m_quadTree.getFirstElement_(this.m_quadTree.m_root),this.m_bLinear=!1):this.m_nextElementHandle=-1);if(this.m_quadsStack.length=0,this.m_extentsStack.length=0,this.m_currentElementHandle=-1,e.queryLooseEnvelope(this.m_queryBox),this.m_queryBox.inflateCoords(i,i),this.m_quadTree.m_root!==-1&&this.m_queryBox.isIntersecting(this.m_quadTree.m_extent)){const n=e.getGeometryType();if(this.m_bLinear=n===me.enumLine,this.m_bLinear){const s=e;this.m_queryStart.assign(s.getStartXY()),this.m_queryEnd.assign(s.getEndXY()),this.m_tolerance=i}else this.m_tolerance=Number.NaN;this.m_quadsStack.push(this.m_quadTree.m_root),this.m_extentsStack.push(this.m_quadTree.m_extent.clone()),this.m_nextElementHandle=this.m_quadTree.getFirstElement_(this.m_quadTree.m_root)}else this.m_nextElementHandle=-1}next(){if(this.m_quadsStack.length===0)return-1;this.m_currentElementHandle=this.m_nextElementHandle;const e=new Y,i=new Y,n=new xe;let s=!1;for(;!s;){for(;this.m_currentElementHandle!==-1;){const r=this.m_quadTree.getData_(this.m_currentElementHandle);if(n.setCoords({env2D:this.m_quadTree.getBoundingBoxValue_(r)}),n.isIntersecting(this.m_queryBox)){if(!this.m_bLinear){s=!0;break}if(e.setCoordsPoint2D(this.m_queryStart),i.setCoordsPoint2D(this.m_queryEnd),n.inflateCoords(this.m_tolerance,this.m_tolerance),n.clipLine(e,i)>0){s=!0;break}}this.m_currentElementHandle=this.m_quadTree.getNextElement_(this.m_currentElementHandle)}if(this.m_currentElementHandle===-1){const r=this.m_quadsStack.at(-1),o=this.m_extentsStack.at(-1);qo.setChildExtents_(o,this.m_childExtents),this.m_quadsStack.pop(),this.m_extentsStack.pop();for(let l=0;l<4;l++){const c=this.m_quadTree.getChild_(r,l);if(c!==-1&&this.m_quadTree.getSubTreeElementCount(c)>0&&this.m_childExtents[l].isIntersecting(this.m_queryBox))if(this.m_bLinear){e.setCoordsPoint2D(this.m_queryStart),i.setCoordsPoint2D(this.m_queryEnd);const f=new xe;f.setCoords({env2D:this.m_childExtents[l]}),f.inflateCoords(this.m_tolerance,this.m_tolerance),f.clipLine(e,i)>0&&(this.m_quadsStack.push(c),this.m_extentsStack.push(this.m_childExtents[l].clone()))}else this.m_quadsStack.push(c),this.m_extentsStack.push(this.m_childExtents[l].clone())}if(this.m_quadsStack.length===0)return-1;this.m_currentElementHandle=this.m_quadTree.getFirstElement_(this.m_quadsStack.at(-1))}}return this.m_nextElementHandle=this.m_quadTree.getNextElement_(this.m_currentElementHandle),this.m_currentElementHandle}clone(){return K(0),{}}}class Jte{constructor(e){this.m_bucketSort=new pd,this.m_sortedHandles=new On(0),this.m_index=-1,this.m_quadTreeIteratorImpl=e}resetIterator(e,i){this.m_quadTreeIteratorImpl.resetIterator(e,i),this.m_sortedHandles.resize(0),this.m_index=-1}next(){if(this.m_index===-1){let e=-1;for(;(e=this.m_quadTreeIteratorImpl.next())!==-1;)this.m_sortedHandles.add(e);const i=this,n={userSort(s,r,o){o.sort(s,r,(l,c)=>i.m_quadTreeIteratorImpl.m_quadTree.getElement(l)-i.m_quadTreeIteratorImpl.m_quadTree.getElement(c))},getValue:s=>i.m_quadTreeIteratorImpl.m_quadTree.getElement(s)};this.m_bucketSort.sort(this.m_sortedHandles,0,this.m_sortedHandles.size(),n)}return this.m_index===this.m_sortedHandles.size()-1?-1:(this.m_index++,this.m_sortedHandles.read(this.m_index))}clone(){return K(0),{}}}class Jv{constructor(e=!1){this.m_bNotifyOnActions=e}onDelete(e){}onSet(e){}onEndSearch(e){}onAddUniqueElementFailed(e){}onDeleteImpl(e,i){this.m_bNotifyOnActions&&this.onDelete(e.getElement(i))}onSetImpl(e,i){this.m_bNotifyOnActions&&this.onSet(e.getElement(i))}onAddUniqueElementFailedImpl(e){this.m_bNotifyOnActions&&this.onAddUniqueElementFailed(e)}onEndSearchImpl(e){this.m_bNotifyOnActions&&this.onEndSearch(e)}}class jt{static st_nullNode(){return-1}constructor(){this.m_defaultTreap=-1,this.m_random=124234251,this.m_comparator=null,this.m_treapData=new Yt(7),this.m_treapCount=0,this.m_maxDepthEver=0,this.m_bBalancing=!0}setComparator(e){this.m_comparator=e}getComparator(){return this.m_comparator}disableBalancing(){this.m_bBalancing=!1}enableBalancing(){this.m_bBalancing||(K(this.m_treapCount<=1),this.rebalance(-1),this.m_bBalancing=!0)}isAutoBalancing(){return this.m_bBalancing}rebalance(e){if(this.m_bBalancing||(e===-1&&(e=this.m_defaultTreap),this.size(e)===0))return;const i=[];for(let n=this.getFirst(e);n!==-1;n=this.getNext(n))i.push(n),this.setParent_(n,-1),this.setRight_(n,-1),this.setLeft_(n,-1);this.setRoot_(-1,e),this.setFirst_(-1,e),this.setLast_(-1,e),this.setSize_(0,e),this.m_bBalancing=!0;for(const n of i)this.addBiggestElement_(n,e);this.m_bBalancing=!1}setCapacity(e){this.m_treapData.setCapacity(e)}createTreap(e){const i=this.m_treapData.newElement();return this.setSize_(0,i),this.setTreapData_(e,i),this.m_treapCount++,i}deleteTreap(e){this.m_treapData.deleteElement(e),this.m_treapCount--}addElement(e,i=-1){return i===-1&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),i=this.m_defaultTreap),this.addElement_(e,0,i)}addUniqueElement(e,i=-1){return i===-1&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),i=this.m_defaultTreap),this.addElement_(e,1,i)}addBiggestElement(e,i=-1){i===-1&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),i=this.m_defaultTreap);const n=this.newNode_(e);return this.addBiggestElement_(n,i),n}addElementAtPosition(e,i,n,s,r,o=-1){if(o===-1&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),o=this.m_defaultTreap),this.getRoot_(o)===jt.st_nullNode()){const A=this.newNode_(n);return this.setRoot_(A,o),this.addToList_(-1,A,o),A}let l,c,f,y,_;if(r?(l=i!==jt.st_nullNode()?this.m_comparator.compare(this,n,i):-1,c=e!==jt.st_nullNode()?this.m_comparator.compare(this,n,e):1):(l=-1,c=1),s&&(l===0||c===0)){this.m_comparator.onAddUniqueElementFailedImpl(n);const A=l===0?i:e;return this.setDuplicateElement_(A,o),-1}_=i!==jt.st_nullNode()&&e!==jt.st_nullNode()?this.m_random>_2(this.m_random)>>1:i!==jt.st_nullNode(),_?(y=l,f=i):(y=c,f=e);let x=-1,S=-1,P=!0;for(;;){if(y<0){const A=this.getLeft(f);if(A===jt.st_nullNode()){S=f,x=this.newNode_(n),this.setLeft_(f,x),this.setParent_(x,f);break}f=A}else{const A=this.getRight(f);if(A===jt.st_nullNode()){S=this.getNext(f),x=this.newNode_(n),this.setRight_(f,x),this.setParent_(x,f);break}f=A}P&&(y*=-1,P=!1)}return this.bubbleUp_(x),this.getParent(x)===jt.st_nullNode()&&this.setRoot_(x,o),this.addToList_(S,x,o),x}replaceElementAtPosition(e,i,n,s,r=-1){if(s){const o=this.getNext(e);let l=-1;o!==jt.st_nullNode()&&(l=this.m_comparator.compare(this,i,o));const c=this.getPrev(e);let f=-1;if(c!==jt.st_nullNode()&&(f=this.m_comparator.compare(this,i,c)),n&&(l===0||f===0)){this.m_comparator.onAddUniqueElementFailedImpl(i);const y=l===0?o:c;return r===jt.st_nullNode()&&(this.m_defaultTreap===jt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),r=this.m_defaultTreap),this.setDuplicateElement_(y,r),-1}}return this.setElement_(e,i),e}getDuplicateElement(e=-1){return e===-1?this.getDuplicateElement_(this.m_defaultTreap):this.getDuplicateElement_(e)}deleteNode(e,i=-1){this.m_comparator&&this.m_comparator.onDeleteImpl(this,e),i===-1&&(i=this.m_defaultTreap),this.m_bBalancing?this.deleteNode_(e,i):this.unbalancedDelete_(e,i)}search(e,i=-1){let n=this.getRoot(i);for(;n!==jt.st_nullNode();){const s=this.m_comparator.compare(this,e,n);if(!s)return n;n=s<0?this.getLeft(n):this.getRight(n)}return this.m_comparator.onEndSearchImpl(e),jt.st_nullNode()}searchLowerBound(e,i=-1){let n=this.getRoot(i),s=-1;for(;n!==jt.st_nullNode();){const r=e.compare(this,n);if(!r)return n;r<0?n=this.getLeft(n):(s=n,n=this.getRight(n))}return s}searchUpperBound(e,i=-1){let n=this.getRoot(i),s=-1;for(;n!==jt.st_nullNode();){const r=e.compare(this,n);if(!r)return n;r<0?(s=n,n=this.getLeft(n)):n=this.getRight(n)}return s}getElement(e){return this.m_treapData.getField(e,3)}getLeft(e){return this.m_treapData.getField(e,0)}getRight(e){return this.m_treapData.getField(e,1)}getParent(e){return this.m_treapData.getField(e,2)}getNext(e){return this.m_treapData.getField(e,6)}getPrev(e){return this.m_treapData.getField(e,5)}getFirst(e=-1){return e===-1?this.getFirst_(this.m_defaultTreap):this.getFirst_(e)}getLast(e=-1){return e===-1?this.getLast_(this.m_defaultTreap):this.getLast_(e)}getTreapData(e=-1){return e===-1?this.getTreapData_(this.m_defaultTreap):this.getTreapData_(e)}setElement(e,i){this.m_comparator!==null&&this.m_comparator.onSetImpl(this,e),this.setElement_(e,i)}getRoot(e=-1){return e===-1?this.getRoot_(this.m_defaultTreap):this.getRoot_(e)}clear(){this.m_treapData.deleteAll(!1),this.m_defaultTreap=jt.st_nullNode(),this.m_treapCount=0,this.m_maxDepthEver=0}addToList_(e,i,n){let s;e!==-1?(s=this.getPrev(e),this.setPrev_(e,i)):s=this.getLast_(n),this.setPrev_(i,s),s!==-1&&this.setNext_(s,i),this.setNext_(i,e),e===this.getFirst_(n)&&this.setFirst_(i,n),e===-1&&this.setLast_(i,n),this.setSize_(this.getSize_(n)+1,n)}size(e=-1){return e===-1?this.getSize_(this.m_defaultTreap):this.getSize_(e)}getMaxDepth(e=-1){return this.getMaxDepthHelper_(this.getRoot(e))}getMaxDepthEver(){return this.m_maxDepthEver}static st_isValidNode(e){return Yt.isValidElement(e)}dbgCheck_(e){K(0)}getPriority_(e){return this.m_treapData.getField(e,4)}bubbleDown_(e){let i=this.getLeft(e),n=this.getRight(e);const s=this.getPriority_(e);for(;i!==jt.st_nullNode()||n!==jt.st_nullNode();){const r=i!==jt.st_nullNode()?this.getPriority_(i):_a(),o=n!==jt.st_nullNode()?this.getPriority_(n):_a();if(s<=Math.min(r,o))return;r<=o?this.rotateRight_(i):this.rotateLeft_(e),i=this.getLeft(e),n=this.getRight(e)}}bubbleUp_(e){if(!this.m_bBalancing)return;const i=this.getPriority_(e);let n=this.getParent(e);for(;n!==jt.st_nullNode()&&this.getPriority_(n)>i;)this.getLeft(n)===e?this.rotateRight_(e):this.rotateLeft_(n),n=this.getParent(e)}rotateLeft_(e){const i=e,n=this.getRight(e);let s;this.setParent_(n,this.getParent(i)),this.setParent_(i,n),s=this.getLeft(n),this.setRight_(i,s),s!==jt.st_nullNode()&&this.setParent_(s,i),this.setLeft_(n,i),s=this.getParent(n),s!==jt.st_nullNode()&&(this.getLeft(s)===i?this.setLeft_(s,n):this.setRight_(s,n))}rotateRight_(e){const i=this.getParent(e),n=e;let s;this.setParent_(n,this.getParent(i)),this.setParent_(i,n),s=this.getRight(n),this.setLeft_(i,s),s!==jt.st_nullNode()&&this.setParent_(s,i),this.setRight_(n,i),s=this.getParent(n),s!==jt.st_nullNode()&&(this.getLeft(s)===i?this.setLeft_(s,n):this.setRight_(s,n))}setParent_(e,i){this.m_treapData.setField(e,2,i)}setLeft_(e,i){this.m_treapData.setField(e,0,i)}setRight_(e,i){this.m_treapData.setField(e,1,i)}setPriority_(e,i){this.m_treapData.setField(e,4,i)}setPrev_(e,i){this.m_treapData.setField(e,5,i)}setNext_(e,i){this.m_treapData.setField(e,6,i)}setRoot_(e,i){this.m_treapData.setField(i,0,e)}setFirst_(e,i){this.m_treapData.setField(i,1,e)}setLast_(e,i){this.m_treapData.setField(i,2,e)}setDuplicateElement_(e,i){this.m_treapData.setField(i,3,e)}setSize_(e,i){this.m_treapData.setField(i,4,e)}setTreapData_(e,i){this.m_treapData.setField(i,5,e)}getRoot_(e){return e===-1?jt.st_nullNode():this.m_treapData.getField(e,0)}getFirst_(e){return e===-1?jt.st_nullNode():this.m_treapData.getField(e,1)}getLast_(e){return e===-1?jt.st_nullNode():this.m_treapData.getField(e,2)}getDuplicateElement_(e){return e===-1?jt.st_nullNode():this.m_treapData.getField(e,3)}getSize_(e){return e===-1?0:this.m_treapData.getField(e,4)}getTreapData_(e){return this.m_treapData.getField(e,5)}newNode_(e){const i=this.m_treapData.newElement();return this.setPriority_(i,this.generatePriority_()),this.setElement_(i,e),i}freeNode_(e,i){e!==jt.st_nullNode()&&this.m_treapData.deleteElement(e)}generatePriority_(){return this.m_random=_2(this.m_random),this.m_random&_a()>>1}maxPriority(){return K(0),0}getMaxDepthHelper_(e){return e===jt.st_nullNode()?0:1+Math.max(this.getMaxDepthHelper_(this.getLeft(e)),this.getMaxDepthHelper_(this.getRight(e)))}addElement_(e,i,n){if(this.getRoot(n)===jt.st_nullNode()){const c=this.newNode_(e);return this.setRoot_(c,n),this.addToList_(-1,c,n),this.m_maxDepthEver=Math.max(this.m_maxDepthEver,1),c}let s=this.getRoot_(n),r=-1,o=-1,l=1;for(;;){const c=i===-1?1:this.m_comparator.compare(this,e,s);if(c<0){const f=this.getLeft(s);if(f===jt.st_nullNode()){o=s,r=this.newNode_(e),this.setLeft_(s,r),this.setParent_(r,s);break}s=f}else{if(i===1&&c===0)return this.m_comparator.onAddUniqueElementFailedImpl(e),this.setDuplicateElement_(s,n),-1;const f=this.getRight(s);if(f===jt.st_nullNode()){o=this.getNext(s),r=this.newNode_(e),this.setRight_(s,r),this.setParent_(r,s);break}s=f}l++}return this.bubbleUp_(r),this.getParent(r)===jt.st_nullNode()&&this.setRoot_(r,n),this.addToList_(o,r,n),this.m_maxDepthEver=Math.max(l,this.m_maxDepthEver),r}removeFromList_(e,i){const n=this.getPrev(e),s=this.getNext(e);n!==-1?this.setNext_(n,s):this.setFirst_(s,i),s!==-1?this.setPrev_(s,n):this.setLast_(n,i),this.setSize_(this.getSize_(i)-1,i)}unbalancedDelete_(e,i){this.removeFromList_(e,i);let n=this.getLeft(e),s=this.getRight(e),r=this.getParent(e),o=e;if(n!==-1&&s!==-1){let c;this.m_random=_2(this.m_random),c=this.m_random>_a()>>1?this.getNext(e):this.getPrev(e);const f=this.getParent(c)===e;this.m_treapData.swapField(e,c,0),this.m_treapData.swapField(e,c,1),this.m_treapData.swapField(e,c,2),r!==-1?this.getLeft(r)===e?this.setLeft_(r,c):this.setRight_(r,c):this.setRoot_(c,i),f?(n===c?(this.setLeft_(c,e),this.setParent_(s,c)):s===c&&(this.setRight_(c,e),this.setParent_(n,c)),this.setParent_(e,c),r=c):(this.setParent_(n,c),this.setParent_(s,c),r=this.getParent(e),o=c),n=this.getLeft(e),s=this.getRight(e),n!==-1&&this.setParent_(n,e),s!==-1&&this.setParent_(s,e)}const l=n!==-1?n:s;r===-1?this.setRoot_(l,i):this.getLeft(r)===o?this.setLeft_(r,l):this.setRight_(r,l),l!==-1&&this.setParent_(l,r),this.freeNode_(e,i)}deleteNode_(e,i){this.setPriority_(e,_a());let n=jt.st_nullNode(),s=jt.st_nullNode();const r=this.getRoot_(i),o=r===e;if(o&&(n=this.getLeft(r),s=this.getRight(r),n===jt.st_nullNode()&&s===jt.st_nullNode()))return this.removeFromList_(r,i),this.freeNode_(r,i),void this.setRoot_(jt.st_nullNode(),i);this.bubbleDown_(e);const l=this.getParent(e);l!==jt.st_nullNode()&&(this.getLeft(l)===e?this.setLeft_(l,jt.st_nullNode()):this.setRight_(l,jt.st_nullNode())),this.removeFromList_(e,i),this.freeNode_(e,i),o&&this.setRoot_(n===jt.st_nullNode()||this.getParent(n)!==jt.st_nullNode()?s:n,i)}setElement_(e,i){this.m_treapData.setField(e,3,i)}addBiggestElement_(e,i){if(this.getRoot_(i)===jt.st_nullNode())return this.setRoot_(e,i),void this.addToList_(-1,e,i);const n=this.getLast_(i);this.setRight_(n,e),this.setParent_(e,n),this.bubbleUp_(e),this.getParent(e)===jt.st_nullNode()&&this.setRoot_(e,i),this.addToList_(-1,e,i)}}class oo{constructor(e){this.m_lists=new Yt(6),this.m_listOfLists=oo.st_nullNode(),e===void 0?(this.m_listNodes=new Yt(3),this.m_bStoreListIndexWithNode=!1):(this.m_listNodes=new Yt(e?4:3),this.m_bStoreListIndexWithNode=e)}freeNode_(e){this.m_listNodes.deleteElement(e)}newNode_(){return this.m_listNodes.newElement()}freeList_(e){K(0)}newList_(){return this.m_lists.newElement()}setPrev_(e,i){this.m_listNodes.setField(e,1,i)}setNext_(e,i){this.m_listNodes.setField(e,2,i)}setData_(e,i){K(0)}setList_(e,i){return this.m_listNodes.setField(e,3,i)}setListSize_(e,i){this.m_lists.setField(e,4,i)}setNextList_(e,i){K(0)}setPrevList_(e,i){this.m_lists.setField(e,2,i)}createList(e){const i=this.newList_();return this.m_lists.setField(i,3,this.m_listOfLists),this.m_lists.setField(i,4,0),this.m_lists.setField(i,5,e),this.m_listOfLists!==oo.st_nullNode()&&this.setPrevList_(this.m_listOfLists,i),this.m_listOfLists=i,i}deleteList(e){this.clear(e);const i=this.m_lists.getField(e,2),n=this.m_lists.getField(e,3);return i!==oo.st_nullNode()?this.setNextList_(i,n):this.m_listOfLists=n,n!==oo.st_nullNode()&&this.setPrevList_(n,i),this.freeList_(e),n}reserveLists(e){K(0)}getListData(e){return this.m_lists.getField(e,5)}getList(e){return K(0),0}setListData(e,i){this.m_lists.setField(e,5,i)}addElement(e,i){return this.insertElement(e,-1,i)}insertElement(e,i,n){const s=this.newNode_();let r=-1;if(i!==oo.st_nullNode()&&(r=this.getPrev(i),this.setPrev_(i,s)),this.setNext_(s,i),r!==oo.st_nullNode()&&this.setNext_(r,s),i===this.m_lists.getField(e,0)&&this.m_lists.setField(e,0,s),i===oo.st_nullNode()){const o=this.m_lists.getField(e,1);this.setPrev_(s,o),o!==-1&&this.setNext_(o,s),this.m_lists.setField(e,1,s)}return this.setData(s,n),this.setListSize_(e,this.getListSize(e)+1),this.m_bStoreListIndexWithNode&&this.setList_(s,e),s}deleteElement(e,i){const n=this.getPrev(i),s=this.getNext(i);return n!==oo.st_nullNode()?this.setNext_(n,s):this.m_lists.setField(e,0,s),s!==oo.st_nullNode()?this.setPrev_(s,n):this.m_lists.setField(e,1,n),this.freeNode_(i),this.setListSize_(e,this.getListSize(e)-1),s}reserveNodes(e){this.m_listNodes.setCapacity(e)}getData(e){return this.m_listNodes.getField(e,0)}getElement(e){return this.getData(e)}setData(e,i){this.m_listNodes.setField(e,0,i)}getNext(e){return this.m_listNodes.getField(e,2)}getPrev(e){return this.m_listNodes.getField(e,1)}getFirst(e){return this.m_lists.getField(e,0)}getLast(e){return this.m_lists.getField(e,1)}static st_nullNode(){return-1}clear(e){if(e!==void 0){let i=this.getLast(e);for(;i!==oo.st_nullNode();){const n=i;i=this.getPrev(n),this.freeNode_(n)}return this.m_lists.setField(e,0,-1),this.m_lists.setField(e,1,-1),void this.setListSize_(e,0)}for(let i=this.getFirstList();i!==-1;)i=this.deleteList(i)}isEmpty(e){return K(0),!1}getNodeCount(){return this.m_listNodes.size()}getListCount(){return this.m_lists.size()}getListSize(e){return this.m_lists.getField(e,4)}getFirstList(){return this.m_listOfLists}getNextList(e){return this.m_lists.getField(e,3)}}class XQe extends Jv{constructor(e){super(),this.m_intervalTree=e}compare(e,i,n){const s=e.getElement(n),r=this.m_intervalTree.getValue_(i),o=this.m_intervalTree.getValue_(s);return r<o?-1:r===o?ba.isLeft_(i)&&ba.isRight_(s)?-1:ba.isLeft_(s)&&ba.isRight_(i)?1:0:1}}class ba{constructor(e){this.m_bEnvelopesRef=!1,this.m_intervals=[],this.m_envelopesRef=null,this.m_intervalNodes=new Yt(3),this.m_intervalHandles=[],this.m_endIndicesUnique=[],this.m_cCount=-1,this.m_root=-1,this.m_bSortIntervals=!1,this.m_bConstructing=!1,this.m_bConstructionEnded=!1,this.m_bOfflineDynamic=e,this.m_tertiaryNodes=new Yt(this.m_bOfflineDynamic?5:4),this.m_secondaryTreaps=new jt,this.m_secondaryTreaps.setComparator(new XQe(this)),this.m_secondaryLists=new oo}addEnvelopesRef(e){this.reset_(!0,!0),this.m_bEnvelopesRef=!0,this.m_envelopesRef=e,this.m_bConstructing=!1,this.m_bConstructionEnded=!0,this.m_bOfflineDynamic||(this.insertIntervalsStatic_(),this.m_cCount=this.m_envelopesRef.length)}startConstruction(){this.reset_(!0,!1)}addInterval(e){this.m_bConstructing||xs(""),this.m_intervals.push(e.clone())}addIntervalCoords(e,i){K(0)}endConstruction(){this.m_bConstructing||xs(""),this.m_bConstructing=!1,this.m_bConstructionEnded=!0,this.m_bOfflineDynamic||(this.insertIntervalsStatic_(),this.m_cCount=this.m_intervals.length)}insert(e){if(this.m_bOfflineDynamic&&this.m_bConstructionEnded||xs(""),this.m_root===-1){const r=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length;if(this.m_bSortIntervals){const o=new On(0);this.querySortedEndPointIndices_(o),this.m_endIndicesUnique.length=0,this.querySortedDuplicatesRemoved_(o),this.m_intervalHandles.length=r,this.m_intervalHandles.fill(-1),this.m_bSortIntervals=!1}else this.m_intervalHandles.fill(-1,0,r);this.m_root=this.createRoot_()}const i=this.insertIntervalEnd_(e<<1,this.m_root),n=this.getSecondaryFromInterval_(i),s=this.m_secondaryTreaps.addElement(1+(e<<1),n);this.setRightEnd_(i,s),this.m_intervalHandles[e]=i,this.m_cCount++}remove(e){this.m_bOfflineDynamic&&this.m_bConstructionEnded||xs("");const i=this.m_intervalHandles[e];let n;i===-1&&Je("the interval does not exist in the interval tree"),this.m_intervalHandles[e]=-1,this.m_cCount--;let s=this.getSecondaryFromInterval_(i),r=-1;r=this.m_secondaryTreaps.getTreapData(s),this.m_secondaryTreaps.deleteNode(this.getLeftEnd_(i),s),this.m_secondaryTreaps.deleteNode(this.getRightEnd_(i),s),n=this.m_secondaryTreaps.size(s),n===0&&(this.m_secondaryTreaps.deleteTreap(s),this.setSecondaryToTertiary_(r,-1)),this.m_intervalNodes.deleteElement(i);let o=this.getPptr_(r),l=this.getLptr_(r),c=this.getRptr_(r);for(;!(n>0||r===this.m_root||l!==-1&&c!==-1);)r===this.getLptr_(o)?l!==-1?(this.setLptr_(o,l),this.setPptr_(l,o),this.setLptr_(r,-1),this.setPptr_(r,-1)):c!==-1?(this.setLptr_(o,c),this.setPptr_(c,o),this.setRptr_(r,-1),this.setPptr_(r,-1)):(this.setLptr_(o,-1),this.setPptr_(r,-1)):l!==-1?(this.setRptr_(o,l),this.setPptr_(l,o),this.setLptr_(r,-1),this.setPptr_(r,-1)):c!==-1?(this.setRptr_(o,c),this.setPptr_(c,o),this.setRptr_(r,-1),this.setPptr_(r,-1)):(this.setRptr_(o,-1),this.setPptr_(r,-1)),this.m_tertiaryNodes.deleteElement(r),r=o,s=this.getSecondaryFromTertiary_(r),n=s!==-1?this.m_secondaryTreaps.size(s):0,l=this.getLptr_(r),c=this.getRptr_(r),o=this.getPptr_(r)}size(){return this.m_cCount}getIteratorQuery(e,i){return e instanceof Ze?new Qte(this,e,i):(K(0),{})}getIterator(){return new Qte(this)}querySortedEndPointIndices_(e){const i=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length;for(let n=0;n<2*i;n++)e.add(n);this.sortEndIndices_(e,0,2*i)}querySortedDuplicatesRemoved_(e){let i=Number.NaN;for(let n=0;n<e.size();n++){const s=e.read(n),r=this.getValue_(s);r!==i&&(this.m_endIndicesUnique.push(s),i=r)}}insertIntervalsStatic_(){const e=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length,i=new On(0);this.querySortedEndPointIndices_(i),this.m_endIndicesUnique.length=0,this.querySortedDuplicatesRemoved_(i),this.m_intervalNodes.setCapacity(e),this.m_secondaryLists.reserveNodes(2*e);const n=ji(e,-1);this.m_root=this.createRoot_();for(let s=0;s<i.size();s++){const r=i.read(s);let o=n[r>>1];if(o!==-1){const l=this.getSecondaryFromInterval_(o);this.setRightEnd_(o,this.m_secondaryLists.addElement(l,r))}else o=this.insertIntervalEnd_(r,this.m_root),n[r>>1]=o}}createRoot_(){const e=this.calculateDiscriminantIndex1_(0,this.m_endIndicesUnique.length-1);return this.createTertiaryNode_(e)}insertIntervalEnd_(e,i){let n=-1,s=i,r=-1,o=-1,l=0,c=this.m_endIndicesUnique.length-1,f=0;const y=e>>1;let _=Number.NaN,x=Number.NaN,S=!0;const P=this.getMin_(y),A=this.getMax_(y);let D=-1;for(;S;){f=l+(c-l>>1),D=this.calculateDiscriminantIndex1_(l,c);const N=this.getDiscriminantFromIndex1_(D);if(A<N){if(s!==-1){if(D===this.getDiscriminantIndex1_(s))n=s,_=N,s=this.getLptr_(s),x=s!==-1?this.getDiscriminant_(s):Number.NaN;else if(x>N){const V=this.createTertiaryNode_(D);N<_?this.setLptr_(n,V):this.setRptr_(n,V),this.setRptr_(V,s),this.m_bOfflineDynamic&&(this.setPptr_(V,n),this.setPptr_(s,V)),n=V,_=N,s=-1,x=Number.NaN}}c=f;continue}if(P>N){if(s!==-1){if(D===this.getDiscriminantIndex1_(s))n=s,_=N,s=this.getRptr_(s),x=s!==-1?this.getDiscriminant_(s):Number.NaN;else if(x<N){const V=this.createTertiaryNode_(D);N<_?this.setLptr_(n,V):this.setRptr_(n,V),this.setLptr_(V,s),this.m_bOfflineDynamic&&(this.setPptr_(V,n),this.setPptr_(s,V)),n=V,_=N,s=-1,x=Number.NaN}}l=f+1;continue}let F=-1;F=s===-1||D!==this.getDiscriminantIndex1_(s)?this.createTertiaryNode_(D):s,r=this.getSecondaryFromTertiary_(F),r===-1&&(r=this.createSecondary_(F),this.setSecondaryToTertiary_(F,r));const G=this.addEndIndex_(r,e);o=this.createIntervalNode_(),this.setSecondaryToInterval_(o,r),this.setLeftEnd_(o,G),s!==-1&&D===this.getDiscriminantIndex1_(s)||(N<_?this.setLptr_(n,F):this.setRptr_(n,F),this.m_bOfflineDynamic&&this.setPptr_(F,n),s!==-1&&(x<N?this.setLptr_(F,s):this.setRptr_(F,s),this.m_bOfflineDynamic&&this.setPptr_(s,F))),S=!1;break}return o}createTertiaryNode_(e){const i=this.m_tertiaryNodes.newElement();return this.setDiscriminantIndex1_(i,e),i}createSecondary_(e){return this.m_bOfflineDynamic?this.m_secondaryTreaps.createTreap(e):this.m_secondaryLists.createList(e)}createIntervalNode_(){return this.m_intervalNodes.newElement()}reset(){this.m_bOfflineDynamic&&this.m_bConstructionEnded||xs(""),this.reset_(!1,this.m_bEnvelopesRef)}reset_(e,i){e?(this.m_bEnvelopesRef=!1,this.m_envelopesRef=null,this.m_bSortIntervals=!0,this.m_bConstructing=!0,this.m_bConstructionEnded=!1,this.m_endIndicesUnique.length=0,i?(this.m_intervals.length=0,this.m_bEnvelopesRef=!0):this.m_intervals.length=0):this.m_bSortIntervals=!1,this.m_bOfflineDynamic?this.m_secondaryTreaps.clear():this.m_secondaryLists.clear(),this.m_intervalNodes.deleteAll(!1),this.m_tertiaryNodes.deleteAll(!1),this.m_root=-1,this.m_cCount=0}getDiscriminant_(e){const i=this.getDiscriminantIndex1_(e);return this.getDiscriminantFromIndex1_(i)}getDiscriminantFromIndex1_(e){if(e===-1)return Number.NaN;if(e>0){const s=e-2,r=this.m_endIndicesUnique[s],o=this.m_endIndicesUnique[s+1];return .5*(this.getValue_(r)+this.getValue_(o))}const i=-e-2,n=this.m_endIndicesUnique[i];return this.getValue_(n)}calculateDiscriminantIndex1_(e,i){let n;return e<i?n=e+(i-e>>1)+2:n=-(e+2),n}setDiscriminantIndex1_(e,i){this.m_tertiaryNodes.setField(e,0,i)}setSecondaryToTertiary_(e,i){this.m_tertiaryNodes.setField(e,1,i)}setLptr_(e,i){this.m_tertiaryNodes.setField(e,2,i)}setRptr_(e,i){this.m_tertiaryNodes.setField(e,3,i)}setPptr_(e,i){this.m_tertiaryNodes.setField(e,4,i)}setSecondaryToInterval_(e,i){this.m_intervalNodes.setField(e,0,i)}addEndIndex_(e,i){let n=-1;return n=this.m_bOfflineDynamic?this.m_secondaryTreaps.addElement(i,e):this.m_secondaryLists.addElement(e,i),n}setLeftEnd_(e,i){this.m_intervalNodes.setField(e,1,i)}setRightEnd_(e,i){this.m_intervalNodes.setField(e,2,i)}getFirst_(e){return this.m_bOfflineDynamic?this.m_secondaryTreaps.getFirst(e):this.m_secondaryLists.getFirst(e)}getLast_(e){return this.m_bOfflineDynamic?this.m_secondaryTreaps.getLast(e):this.m_secondaryLists.getLast(e)}static isLeft_(e){return!(1&e)}static isRight_(e){return!(1&~e)}getDiscriminantIndex1_(e){return this.m_tertiaryNodes.getField(e,0)}getSecondaryFromTertiary_(e){return this.m_tertiaryNodes.getField(e,1)}getLptr_(e){return this.m_tertiaryNodes.getField(e,2)}getRptr_(e){return this.m_tertiaryNodes.getField(e,3)}getPptr_(e){return this.m_tertiaryNodes.getField(e,4)}getSecondaryFromInterval_(e){return this.m_intervalNodes.getField(e,0)}getLeftEnd_(e){return this.m_intervalNodes.getField(e,1)}getRightEnd_(e){return this.m_intervalNodes.getField(e,2)}getMin_(e){return this.m_bEnvelopesRef?this.m_envelopesRef[e].xmin:this.m_intervals[e].vmin}getMax_(e){return this.m_bEnvelopesRef?this.m_envelopesRef[e].xmax:this.m_intervals[e].vmax}sortEndIndices_(e,i,n){const s=this,r={userSort(o,l,c){s.sortEndIndicesHelper_(c,o,l)},getValue:o=>s.getValue_(o)};new pd().sort(e,i,n,r)}sortEndIndicesHelper_(e,i,n){e.sort(i,n,(s,r)=>{const o=this.getValue_(s),l=this.getValue_(r);return o<l||o===l&&ba.isLeft_(s)&&ba.isRight_(r)?-1:1})}getValue_(e){if(!this.m_bEnvelopesRef){const n=this.m_intervals[e>>1];return ba.isLeft_(e)?n.vmin:n.vmax}const i=this.m_envelopesRef[e>>1];return ba.isLeft_(e)?i.xmin:i.xmax}checkValidation_(){return K(0),!1}checkValidationHelper_(e){return K(0),0}}class Qte{constructor(e,i,n){this.m_query=Ze.constructEmpty(),this.m_tertiaryHandle=-1,this.m_nextTertiaryHandle=-1,this.m_forkedHandle=-1,this.m_currentEndHandle=-1,this.m_nextEndHandle=-1,this.m_tertiaryStack=[],this.m_functionIndex=0,this.m_intervalTree=e,this.m_functionStack=new Array(2),this.m_functionStack[0]=this.nullFunc_,this.m_functionStack[1]=this.nullFunc_,i!==void 0&&this.resetIterator(i,n)}nullFunc_(){return K(0),!1}resetIterator(e,i){if(typeof e=="number"){const n=new Ze;n.setCoords(e,e),this.resetIterator(n,i)}else i===void 0&&(i=0),this.m_query.vmin=e.vmin-i,this.m_query.vmax=e.vmax+i,this.m_tertiaryStack.length=0,this.m_functionIndex=0,this.m_functionStack[0]=this.initialize_}next(){if(this.m_intervalTree.m_bConstructionEnded||xs(""),this.m_functionIndex<0)return-1;for(;this.m_fi=this.m_functionStack[this.m_functionIndex],this.m_fi(););return this.m_currentEndHandle!==-1?this.getCurrentEndIndex_()>>1:-1}initialize_(){return this.m_tertiaryHandle=-1,this.m_nextTertiaryHandle=-1,this.m_forkedHandle=-1,this.m_currentEndHandle=-1,this.m_intervalTree.m_tertiaryNodes.size()>0?(this.m_functionStack[0]=this.pIn_,this.m_nextTertiaryHandle=this.m_intervalTree.m_root,!0):(this.m_functionIndex=-1,!1)}pIn_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,this.m_tertiaryHandle===-1)return this.m_functionIndex=-1,this.m_currentEndHandle=-1,!1;const e=this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle);if(this.m_query.vmax<e){const n=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),n!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(n),this.m_functionStack[++this.m_functionIndex]=this.left_),!0}if(e<this.m_query.vmin){const n=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),n!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getLast_(n),this.m_functionStack[++this.m_functionIndex]=this.right_),!0}this.m_functionStack[this.m_functionIndex]=this.pL_,this.m_forkedHandle=this.m_tertiaryHandle;const i=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),i!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(i),this.m_functionStack[++this.m_functionIndex]=this.all_),!0}pL_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,this.m_tertiaryHandle===-1)return this.m_functionStack[this.m_functionIndex]=this.pR_,this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_forkedHandle),!0;if(this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle)<this.m_query.vmin){const n=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),n!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getLast_(n),this.m_functionStack[++this.m_functionIndex]=this.right_),!0}const e=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),e!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(e),this.m_functionStack[++this.m_functionIndex]=this.all_);const i=this.m_intervalTree.getRptr_(this.m_tertiaryHandle);return i!==-1&&this.m_tertiaryStack.push(i),!0}pR_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,this.m_tertiaryHandle===-1)return this.m_functionStack[this.m_functionIndex]=this.pT_,!0;const e=this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle);if(this.m_query.vmax<e){const s=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),s!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(s),this.m_functionStack[++this.m_functionIndex]=this.left_),!0}const i=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),i!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(i),this.m_functionStack[++this.m_functionIndex]=this.all_);const n=this.m_intervalTree.getLptr_(this.m_tertiaryHandle);return n!==-1&&this.m_tertiaryStack.push(n),!0}pT_(){if(this.m_tertiaryStack.length===0)return this.m_functionIndex=-1,this.m_currentEndHandle=-1,!1;this.m_tertiaryHandle=this.m_tertiaryStack.at(-1),this.m_tertiaryStack.pop();const e=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return e!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(e),this.m_functionStack[++this.m_functionIndex]=this.all_),this.m_intervalTree.getLptr_(this.m_tertiaryHandle)!==-1&&this.m_tertiaryStack.push(this.m_intervalTree.getLptr_(this.m_tertiaryHandle)),this.m_intervalTree.getRptr_(this.m_tertiaryHandle)!==-1&&this.m_tertiaryStack.push(this.m_intervalTree.getRptr_(this.m_tertiaryHandle)),!0}left_(){return this.m_currentEndHandle=this.m_nextEndHandle,this.m_currentEndHandle!==-1&&ba.isLeft_(this.getCurrentEndIndex_())&&this.m_intervalTree.getValue_(this.getCurrentEndIndex_())<=this.m_query.vmax?(this.m_nextEndHandle=this.getNext_(),!1):(this.m_functionIndex--,!0)}right_(){return this.m_currentEndHandle=this.m_nextEndHandle,this.m_currentEndHandle!==-1&&ba.isRight_(this.getCurrentEndIndex_())&&this.m_intervalTree.getValue_(this.getCurrentEndIndex_())>=this.m_query.vmin?(this.m_nextEndHandle=this.getPrev_(),!1):(this.m_functionIndex--,!0)}all_(){return this.m_currentEndHandle=this.m_nextEndHandle,this.m_currentEndHandle!==-1&&ba.isLeft_(this.getCurrentEndIndex_())?(this.m_nextEndHandle=this.getNext_(),!1):(this.m_functionIndex--,!0)}getNext_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getNext(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getNext(this.m_currentEndHandle)}getPrev_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getPrev(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getPrev(this.m_currentEndHandle)}getCurrentEndIndex_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getElement(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getData(this.m_currentEndHandle)}}class A5{constructor(){this.m_tolerance=0,this.m_sweepIndexRed=-1,this.m_sweepIndexBlue=-1,this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_intervalTreeRed=null,this.m_intervalTreeBlue=null,this.m_iteratorRed=null,this.m_iteratorBlue=null,this.m_envelopesRed=[],this.m_envelopesBlue=[],this.m_elementsRed=[],this.m_elementsBlue=[],this.m_sortedEndIndicesRed=new On(0),this.m_sortedEndIndicesBlue=new On(0),this.m_queuedListRed=-1,this.m_queuedListBlue=-1,this.m_queuedEnvelopes=new oo,this.m_queuedIndicesRed=[],this.m_queuedIndicesBlue=[],this.m_bAddRed=!1,this.m_bAddBlue=!1,this.m_bAddRedRed=!1,this.m_bDone=!0,this.m_function=this.nullFunc_,this.reset_()}startConstruction(){this.reset_(),this.m_bAddRedRed=!0,this.m_elementsRed.length=0,this.m_envelopesRed.length=0}addEnvelope(e,i){this.m_bAddRedRed||xs(""),this.m_elementsRed.push(e),this.m_envelopesRed.push(new xe(i))}endConstruction(){this.m_bAddRedRed||xs(""),this.m_bAddRedRed=!1,this.m_envelopesRed.length>0&&(this.m_function=this.initialize_,this.m_bDone=!1)}startRedConstruction(){this.reset_(),this.m_bAddRed=!0,this.m_elementsRed.length=0,this.m_envelopesRed.length=0}addRedEnvelope(e,i){this.m_bAddRed||xs(""),this.m_elementsRed.push(e),this.m_envelopesRed.push(i.clone())}endRedConstruction(){this.m_bAddRed||xs(""),this.m_bAddRed=!1,this.m_envelopesRed.length>0&&this.m_envelopesBlue.length>0&&(this.m_function===this.nullFunc_||this.m_function===this.initializeBlue_?this.m_function=this.initializeRedBlue_:this.m_function!==this.initializeRedBlue_&&(this.m_function=this.initializeRed_),this.m_bDone=!1)}startBlueConstruction(){this.reset_(),this.m_bAddBlue=!0,this.m_elementsBlue.length=0,this.m_envelopesBlue.length=0}addBlueEnvelope(e,i){this.m_bAddBlue||xs(""),this.m_elementsBlue.push(e),this.m_envelopesBlue.push(i.clone())}endBlueConstruction(){this.m_bAddBlue||xs(""),this.m_bAddBlue=!1,this.m_envelopesRed.length>0&&this.m_envelopesBlue.length>0&&(this.m_function===this.nullFunc_||this.m_function===this.initializeRed_?this.m_function=this.initializeRedBlue_:this.m_function!==this.initializeRedBlue_&&(this.m_function=this.initializeBlue_),this.m_bDone=!1)}next(){if(this.m_bDone)return!1;for(;this.m_function(););return!this.m_bDone}getHandleA(){return this.m_envelopeHandleA}getHandleB(){return this.m_envelopeHandleB}setTolerance(e){this.m_tolerance=e}getEnvelope(e){return K(0),{}}getElement(e){return this.m_elementsRed[e]}getRedEnvelope(e){return this.m_envelopesRed[e]}getBlueEnvelope(e){return this.m_envelopesBlue[e]}getRedElement(e){return this.m_elementsRed[e]}getBlueElement(e){return this.m_elementsBlue[e]}isTop_(e){return!(1&~e)}isBottom_(e){return!(1&e)}reset_(){this.m_bAddRed=!1,this.m_bAddBlue=!1,this.m_bAddRedRed=!1,this.m_sweepIndexRed=-1,this.m_sweepIndexBlue=-1,this.m_queuedListRed=-1,this.m_queuedListBlue=-1,this.m_bDone=!0}initialize_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new ba(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_iteratorRed===null&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_sortedEndIndicesRed.resize(0);for(let e=0;e<2*this.m_envelopesRed.length;e++)this.m_sortedEndIndicesRed.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,2*this.m_envelopesRed.length,!0),this.m_sweepIndexRed=2*this.m_envelopesRed.length,this.m_function=this.sweep_,!0}initializeRed_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new ba(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_iteratorRed===null&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_sortedEndIndicesRed.resize(0);for(let e=0;e<2*this.m_envelopesRed.length;e++)this.m_sortedEndIndicesRed.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,this.m_sortedEndIndicesRed.size(),!0),this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_queuedListRed!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_function=this.sweepRedBlue_,this.resetBlue_()}initializeBlue_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeBlue||(this.m_intervalTreeBlue=new ba(!0)),this.m_intervalTreeBlue.addEnvelopesRef(this.m_envelopesBlue),this.m_iteratorBlue==null&&(this.m_iteratorBlue=this.m_intervalTreeBlue.getIterator()),this.m_sortedEndIndicesBlue.resize(0);for(let e=0;e<2*this.m_envelopesBlue.length;e++)this.m_sortedEndIndicesBlue.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesBlue,0,this.m_sortedEndIndicesBlue.size(),!1),this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_queuedListBlue!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_function=this.sweepRedBlue_,this.resetRed_()}initializeRedBlue_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new ba(!0)),this.m_intervalTreeBlue||(this.m_intervalTreeBlue=new ba(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_intervalTreeBlue.addEnvelopesRef(this.m_envelopesBlue),this.m_iteratorRed===null&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_iteratorBlue===null&&(this.m_iteratorBlue=this.m_intervalTreeBlue.getIterator()),this.m_sortedEndIndicesRed.resize(0),this.m_sortedEndIndicesBlue.resize(0);for(let e=0;e<2*this.m_envelopesRed.length;e++)this.m_sortedEndIndicesRed.add(e);for(let e=0;e<2*this.m_envelopesBlue.length;e++)this.m_sortedEndIndicesBlue.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,this.m_sortedEndIndicesRed.size(),!0),this.sortYEndIndices_(this.m_sortedEndIndicesBlue,0,this.m_sortedEndIndicesBlue.size(),!1),this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_queuedListRed!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_queuedListBlue!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_function=this.sweepRedBlue_,!0}sweep_(){const e=this.m_sortedEndIndicesRed.read(--this.m_sweepIndexRed),i=e>>1;if(this.isBottom_(e))return this.m_intervalTreeRed.remove(i),this.m_sweepIndexRed!==0||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);const n=Ze.construct(this.m_envelopesRed[i].xmin,this.m_envelopesRed[i].xmax);return this.m_iteratorRed.resetIterator(n,this.m_tolerance),this.m_envelopeHandleA=i,this.m_function=this.iterate_,!0}sweepBruteForce_(){return--this.m_sweepIndexRed==-1?(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1):(this.m_envelopeHandleA=this.m_sweepIndexRed,this.m_sweepIndexBlue=this.m_sweepIndexRed,this.m_function=this.iterateBruteForce_,!0)}sweepRedBlueBruteForce_(){return--this.m_sweepIndexRed==-1?(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1):(this.m_envelopeHandleA=this.m_sweepIndexRed,this.m_sweepIndexBlue=this.m_envelopesBlue.length,this.m_function=this.iterateRedBlueBruteForce_,!0)}sweepRedBlue_(){const e=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed-1),i=this.m_sortedEndIndicesBlue.read(this.m_sweepIndexBlue-1),n=this.getAdjustedValue_(e,!0),s=this.getAdjustedValue_(i,!1);return n>s?this.sweepRed_():n<s?this.sweepBlue_():this.isTop_(e)?this.sweepRed_():this.isTop_(i)?this.sweepBlue_():this.sweepRed_()}sweepRed_(){const e=this.m_sortedEndIndicesRed.read(--this.m_sweepIndexRed),i=e>>1;if(this.isBottom_(e))return this.m_queuedListRed!==-1&&this.m_queuedIndicesRed[i]!==-1?(this.m_queuedEnvelopes.deleteElement(this.m_queuedListRed,this.m_queuedIndicesRed[i]),this.m_queuedIndicesRed[i]=-1):this.m_intervalTreeRed.remove(i),this.m_sweepIndexRed!==0||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);if(this.m_queuedListBlue!==-1&&this.m_queuedEnvelopes.getListSize(this.m_queuedListBlue)>0){let n=this.m_queuedEnvelopes.getFirst(this.m_queuedListBlue);for(;n!==-1;){const s=this.m_queuedEnvelopes.getData(n);this.m_intervalTreeBlue.insert(s),this.m_queuedIndicesBlue[s]=-1;const r=this.m_queuedEnvelopes.getNext(n);this.m_queuedEnvelopes.deleteElement(this.m_queuedListBlue,n),n=r}}if(this.m_intervalTreeBlue.size()>0){const n=Ze.construct(this.m_envelopesRed[i].xmin,this.m_envelopesRed[i].xmax);this.m_iteratorBlue.resetIterator(n,this.m_tolerance),this.m_envelopeHandleA=i,this.m_function=this.iterateBlue_}else this.m_queuedListRed===-1&&(this.m_queuedIndicesRed.length=this.m_envelopesRed.length,this.m_queuedIndicesRed.fill(-1),this.m_queuedListRed=this.m_queuedEnvelopes.createList(1)),this.m_queuedIndicesRed[i]=this.m_queuedEnvelopes.addElement(this.m_queuedListRed,i),this.m_function=this.sweepRedBlue_;return!0}sweepBlue_(){const e=this.m_sortedEndIndicesBlue.read(--this.m_sweepIndexBlue),i=e>>1;if(this.isBottom_(e))return this.m_queuedListBlue!==-1&&this.m_queuedIndicesBlue[i]!==-1?(this.m_queuedEnvelopes.deleteElement(this.m_queuedListBlue,this.m_queuedIndicesBlue[i]),this.m_queuedIndicesBlue[i]=-1):this.m_intervalTreeBlue.remove(i),this.m_sweepIndexBlue!==0||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);if(this.m_queuedListRed!==-1&&this.m_queuedEnvelopes.getListSize(this.m_queuedListRed)>0){let n=this.m_queuedEnvelopes.getFirst(this.m_queuedListRed);for(;n!==-1;){const s=this.m_queuedEnvelopes.getData(n);this.m_intervalTreeRed.insert(s),this.m_queuedIndicesRed[s]=-1;const r=this.m_queuedEnvelopes.getNext(n);this.m_queuedEnvelopes.deleteElement(this.m_queuedListRed,n),n=r}}if(this.m_intervalTreeRed.size()>0){const n=Ze.construct(this.m_envelopesBlue[i].xmin,this.m_envelopesBlue[i].xmax);this.m_iteratorRed.resetIterator(n,this.m_tolerance),this.m_envelopeHandleB=i,this.m_function=this.iterateRed_}else this.m_queuedListBlue===-1&&(this.m_queuedIndicesBlue.length=this.m_envelopesBlue.length,this.m_queuedIndicesBlue.fill(-1),this.m_queuedListBlue=this.m_queuedEnvelopes.createList(0)),this.m_queuedIndicesBlue[i]=this.m_queuedEnvelopes.addElement(this.m_queuedListBlue,i),this.m_function=this.sweepRedBlue_;return!0}iterate_(){if(this.m_envelopeHandleB=this.m_iteratorRed.next(),this.m_envelopeHandleB!==-1)return!1;const e=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed)>>1;return this.m_intervalTreeRed.insert(e),this.m_function=this.sweep_,!0}iterateRed_(){if(this.m_envelopeHandleA=this.m_iteratorRed.next(),this.m_envelopeHandleA!==-1)return!1;this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1;const e=this.m_sortedEndIndicesBlue.read(this.m_sweepIndexBlue)>>1;return this.m_intervalTreeBlue.insert(e),this.m_function=this.sweepRedBlue_,!0}iterateBlue_(){if(this.m_envelopeHandleB=this.m_iteratorBlue.next(),this.m_envelopeHandleB!==-1)return!1;const e=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed)>>1;return this.m_intervalTreeRed.insert(e),this.m_function=this.sweepRedBlue_,!0}iterateBruteForce_(){if(--this.m_sweepIndexBlue==-1)return this.m_function=this.sweepBruteForce_,!0;const e=this.m_envelopesRed[this.m_sweepIndexRed].clone(),i=this.m_envelopesRed[this.m_sweepIndexBlue];return e.inflateCoords(this.m_tolerance,this.m_tolerance),!e.isIntersecting(i)||(this.m_envelopeHandleB=this.m_sweepIndexBlue,!1)}iterateRedBlueBruteForce_(){if(--this.m_sweepIndexBlue==-1)return this.m_function=this.sweepRedBlueBruteForce_,!0;const e=this.m_envelopesRed[this.m_sweepIndexRed].clone(),i=this.m_envelopesBlue[this.m_sweepIndexBlue];return e.inflateCoords(this.m_tolerance,this.m_tolerance),!e.isIntersecting(i)||(this.m_envelopeHandleB=this.m_sweepIndexBlue,!1)}resetRed_(){return this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_intervalTreeRed.size()>0&&this.m_intervalTreeRed.reset(),this.m_queuedListRed!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_bDone=!1,!0}resetBlue_(){return this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_intervalTreeBlue.size()>0&&this.m_intervalTreeBlue.reset(),this.m_queuedListBlue!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_bDone=!1,!0}nullFunc_(){return K(0),!1}sortYEndIndices_(e,i,n,s){const r=this,o={userSort(l,c,f){r.sortYEndIndicesHelper_(f,l,c,s)},getValue:l=>r.getAdjustedValue_(l,s)};new pd().sort(e,i,n,o)}sortYEndIndicesHelper_(e,i,n,s){e.sort(i,n,(r,o)=>{const l=this.getAdjustedValue_(r,s),c=this.getAdjustedValue_(o,s);return l<c||l===c&&this.isBottom_(r)&&this.isTop_(o)?-1:1})}getAdjustedValue_(e,i){const n=.5*this.m_tolerance;if(i){const r=this.m_envelopesRed[e>>1];return this.isBottom_(e)?r.ymin-n:r.ymax+n}const s=this.m_envelopesBlue[e>>1];return this.isBottom_(e)?s.ymin-n:s.ymax+n}}var eie=br;class ta{constructor(e,i){this.tolerance=e!==void 0?e:Number.NaN,this.resolution=i!==void 0?i:Number.NaN}add(e){return new ta(this.tolerance+e,this.resolution)}scale(e){return new ta(this.tolerance*e,this.resolution*e)}total(){return this.tolerance+this.resolution}}function WQe(t,e,i,n,s){const r=n*n,o=t.sub(e),l=i.sub(e),c=o.sqrLength(),f=l.sqrLength();if(c<=r||f<=r)return!0;const y=Xi(o.crossProduct(l));return y<=r*c||y<=r*f?o.dotProduct(l)>=0:!1}function ZQe(t,e,i){return n=>i===0?(n+t)*e:1*(n-t*e)/e}function rB(t,e){const i=new xe;return t.queryLooseEnvelope(i),i.mergeEnvelope2D(e),i}function gT(t,e){const i=xe.constructEmpty();t.queryLooseEnvelope(i);const n=xe.constructEmpty();return e.queryLooseEnvelope(n),i.mergeEnvelope2D(n),i}function I1e(t,e,i){const n=xe.constructEmpty();return n.setFromPoints(t,e),M7(0,null,n.calculateToleranceFromEnvelope(),i,!1)}function Js(t,e,i){return M7(0,t,e.calculateToleranceFromEnvelope(),i,!1)}function JE(t,e,i){return M7(1,t,e.calculateToleranceFromEnvelope(),i,!1)}function tie(t,e,i){return JE(t,e.queryInterval(1,0),i)}function Cl(t,e,i){const n=xe.constructEmpty();return e.queryEnvelope(n),Js(t,n,i)}function n1(t,e,i=!1){return M7(0,t,e.calculateToleranceFromEnvelope(),i,!0).total()}function QE(t,e,i){const n=xe.constructEmpty();return e.queryEnvelope(n),n1(t,n,i)}function M7(t,e,i,n,s){const r=new ta(0,0);if(e!==null&&(r.tolerance=e.getTolerance(t),(!s||n)&&e!==null)){const o=e.getResolution(t);r.resolution=o,n&&(r.resolution*=2)}return n&&(i*=4,r.tolerance*=1.01,r.resolution*=1.01),r.total()<i?new ta(i,0):r}function Wc(t){return Math.sqrt(2)*(2*t.tolerance+t.resolution)}function M1e(t){return Math.sqrt(2)*(t.tolerance+t.resolution)}function Af(t){return t>=3}function KQe(t,e){const i=[0];return t.getImpl().getIsSimple(e,i)>=3}function A1e(t,e){t.getImpl().setIsSimple(3,e)}function JQe(t,e,i,n){if(Xi(e.x-t.x)+Xi(e.y-t.y)<=i*i){const s=t.z,r=e.z;return T5(s,r,n)}return!1}function E0(t){return t>=4}function QQe(t,e){return t===me.enumPolygon?Af(e):e>=1}function eet(t,e,i){const n=xe.constructEmpty(),s=xe.constructEmpty();t.queryLooseEnvelope(n),e.queryLooseEnvelope(s),n.inflateCoords(i,i),s.inflateCoords(i,i);const r=xe.constructEmpty();r.setCoords({env2D:n}),r.intersect(s);const o=t.querySegmentIterator(),l=e.querySegmentIterator(),c=xe.constructEmpty(),f=xe.constructEmpty(),y=new A5;y.setTolerance(i);let _=!1;for(y.startRedConstruction();o.nextPath();)for(;o.hasNextSegment();)o.nextSegment().queryLooseEnvelope(c),c.isIntersecting(r)&&(_=!0,y.addRedEnvelope(o.getStartPointIndex(),c));if(y.endRedConstruction(),!_)return null;let x=!1;for(y.startBlueConstruction();l.nextPath();)for(;l.hasNextSegment();)l.nextSegment().queryLooseEnvelope(f),f.isIntersecting(r)&&(x=!0,y.addBlueEnvelope(l.getStartPointIndex(),f));return y.endBlueConstruction(),x?y:null}function tet(t,e,i,n,s){t.getGeometryType(),e.getGeometryType();const r=xe.constructEmpty(),o=xe.constructEmpty();t.queryLooseEnvelope(r),e.queryLooseEnvelope(o),r.inflateCoords(i,i),o.inflateCoords(i,i);const l=xe.constructEmpty();l.setCoords({env2D:r}),l.intersect(o);const c=new A5;c.setTolerance(i);let f=!1;c.startRedConstruction();for(let _=0,x=t.getPathCount();_<x;_++)t.queryLoosePathEnvelope(_,r),r.isIntersecting(l)&&(f=!0,c.addRedEnvelope(_,r));if(c.endRedConstruction(),!f)return null;let y=!1;c.startBlueConstruction();for(let _=0,x=e.getPathCount();_<x;_++)e.queryLoosePathEnvelope(_,o),o.isIntersecting(l)&&(y=!0,c.addBlueEnvelope(_,o));return c.endBlueConstruction(),y?c:null}function iie(t,e,i){const n=xe.constructEmpty(),s=xe.constructEmpty();t.queryLooseEnvelope(n),e.queryEnvelope(s),n.inflateCoords(i,i),s.inflateCoords(i,i);const r=xe.constructEmpty();r.setCoords({env2D:n}),r.intersect(s);const o=t.querySegmentIterator(),l=new A5;l.setTolerance(i);let c=!1;for(l.startRedConstruction();o.nextPath();)for(;o.hasNextSegment();)o.nextSegment().queryLooseEnvelope(n),n.isIntersecting(r)&&(c=!0,l.addRedEnvelope(o.getStartPointIndex(),n));if(l.endRedConstruction(),!c)return null;let f=!1;l.startBlueConstruction();for(let y=0,_=e.getPointCount();y<_;y++){const x=e.getXY(y);r.contains(x)&&(f=!0,l.addBlueEnvelope(y,xe.construct(x.x,x.y,x.x,x.y)))}return l.endBlueConstruction(),f?l:null}function iet(t,e,i){const n=xe.constructEmpty(),s=xe.constructEmpty();t.queryEnvelope(n),e.queryEnvelope(s),n.inflateCoords(i,i),s.inflateCoords(i,i);const r=xe.constructEmpty();r.setCoords({env2D:n}),r.intersect(s);const o=new A5;o.setTolerance(i);let l=!1;o.startRedConstruction();const c=new Y;for(let _=0,x=t.getPointCount();_<x;_++)t.queryXY(_,c),r.contains(c)&&(l=!0,o.addRedEnvelope(_,xe.construct(c.x,c.y,c.x,c.y)));if(o.endRedConstruction(),!l)return null;let f=!1;o.startBlueConstruction();const y=new Y;for(let _=0,x=e.getPointCount();_<x;_++)e.queryXY(_,y),r.contains(y)&&(f=!0,o.addBlueEnvelope(_,xe.construct(y.x,y.y,y.x,y.y)));return o.endBlueConstruction(),f?o:null}function net(t){const e=new xe;return t.queryLooseEnvelope(e),e.inflateCoords(1,1),set(t,e)}function set(t,e,i){const n=new xe;if(t.queryLooseEnvelope(n),n.isEmpty())return null;t.getGeometryType();const s=new qo(n,8);let r=-1;const o=new xe;let l=!1;do for(let c=0,f=t.getPathCount();c<f;c++)if(t.queryLoosePathEnvelope(c,o),o.isIntersecting(e)){if(r=s.insertEx(c,o,r),r===-1){l&&xt("build_quad_tree_for_paths"),n.assign(t.calculateEnvelope2D(!1)),l=!0,s.reset(n,8);break}l=!1}while(l);return s}function tx(t,e){if(!e){const c=new xe;t.queryLooseEnvelope(c);const f=new qo(c,8);let y=-1;const _=new xe,x=t.querySegmentIterator();let S=!1;for(;x.nextPath();)for(;x.hasNextSegment();){const P=x.nextSegment(),A=x.getStartPointIndex();if(P.queryLooseEnvelope(_),y=f.insertEx(A,_,y),y===-1){S&&xt(""),c.assign(t.calculateEnvelope2D(!1)),S=!0,f.reset(c,8),x.resetToFirstPath();break}}return f}const i=new xe;t.queryLooseEnvelope(i);const n=new qo(i,8);let s=-1;const r=new xe,o=t.querySegmentIterator();let l=!1;for(;o.nextPath();)for(;o.hasNextSegment();){const c=o.nextSegment(),f=o.getStartPointIndex();if(c.queryLooseEnvelope(r),r.isIntersecting(e)&&(s=n.insertEx(f,r,s),s===-1)){l&&xt(""),i.assign(t.calculateEnvelope2D(!1)),l=!0,n.reset(i,8),o.resetToFirstPath();break}}return n}function nie(t,e){if(e){const i=new qo(e,8),n=new Y,s=new xe;let r=!1;for(let o=0;o<t.getPointCount();o++)n.setCoordsPoint2D(t.getXY(o)),e.contains(n)&&(s.setCoords({pt:n}),i.insert(o,s)!==-1||(r&&xt(""),r=!0,i.reset(t.calculateEnvelope2D(),8),o=-1));return i}return K(0),null}function sie(t,e,i,n,s){let r=!1;const o=s.vmin,l=s.vmax;for(let c=i;c<e;c+=n){const f=t.read(c);f<o?(r=!0,t.write(c,o)):f>l&&(r=!0,t.write(c,l))}return r}function Bz(t,e,i,n){if(!t.hasAttribute(i))return!1;const s=t.getGeometryType();if(s===me.enumGeometryCollection){const r=t,o=r.getGeometryCount();let l=0;for(let c=0;c<o;++c)l|=Bz(r.getGeometry(c),e,i,n)?1:0;return!!l}if(rl(s)){const r=t,o=eie.getPersistence(i),l=eie.getComponentCount(i),c=r.getPointCount();if(o===1){const f=sie(r.getAttributeStreamRef(i),c*l,n,l,e);return f&&r.notifyModified(),f}if(o===2){const f=sie(r.getAttributeStreamRef(i),c*l,n,l,e);return f&&r.notifyModified(),f}xt("snap_coordinate not implemented")}if(s===me.enumEnvelope){const r=t,o=r.queryInterval(i,n);let l=!1;return o.vmin<e.vmin&&(l=!0,o.vmin=e.vmin),o.vmax>e.vmax&&(l=!0,o.vmax=e.vmax),l&&r.setIntervalEnvelope(i,n,o),l}if(s===me.enumPoint){const r=t;let o=r.getAttributeAsDbl(i,n),l=!1;return o<e.vmin&&(l=!0,o=e.vmin),o>e.vmax&&(l=!0,o=e.vmax),l&&r.setAttributeBasic(i,n,o),l}if(Ds(s)){const r=t;let o=r.getStartAttributeAsDbl(i,n),l=!1;return o<e.vmin&&(l=!0,o=e.vmin),o>e.vmax&&(l=!0,o=e.vmax),l&&r.setStartAttribute(i,n,o),o=r.getEndAttributeAsDbl(i,n),o<e.vmin&&(l=!0,o=e.vmin),o>e.vmax&&(l=!0,o=e.vmax),l&&r.setEndAttribute(i,n,o),l}xt("snap_coordinate not implemented")}function ret(t,e,i,n,s){(e<0||i<0||n<1||e+n*(i-1)+1>t.size())&&Je("Index out of bound");for(let r=e,o=e+n*(i-1)+1;r<o;r+=n)t.writeAsDbl(r,s(t.readAsDbl(r)))}function oet(t,e){let i=_2(t);const n=e.length/Eo();for(let s=0;s<e.length;++s){const r=Math.trunc(i*n);i=_2(i);const o=Math.trunc(i*n),l=e[r];e[r]=e[o],e[o]=l}}function aet(t,e,i){const n=t.getDescription().getTotalComponentCount();K(n<=i),t.setX(e[0]),t.setY(e[1]),fs(t.getAttributeArray(),e,0,2,n-2)}var js=br;const k1e="can not assign an empty point to a vertex";class D1e{constructor(e){if(this.m_accelerators=null,e!==void 0&&e.move)this.m_description=e.move.m_description,e.move.m_description=Uo(),this.m_vertexAttributes=e.move.m_vertexAttributes,e.move.m_vertexAttributes=new mT,this.m_envelopeData=e.move.m_envelopeData,e.move.m_envelopeData=new ku,this.m_pointCount=e.move.m_pointCount,this.m_reservedPointCount=e.move.m_reservedPointCount,this.m_flags=e.move.m_flags,this.m_bFillRule=e.move.m_bFillRule,this.m_bPathStarted=e.move.m_bPathStarted,this.m_bPolygon=e.move.m_bPolygon,this.m_simpleTolerance=e.move.m_simpleTolerance;else{const i=e!==void 0&&e.vd?e.vd:Uo();this.m_description=i,this.m_vertexAttributes=new mT,this.m_envelopeData=new ku,this.m_pointCount=0,this.m_reservedPointCount=-1,this.m_flags=4063,this.m_bFillRule=this.m_bPathStarted=this.m_bPolygon=!1,this.m_simpleTolerance=0,e!==void 0&&e.copy&&e.copy.copyTo(this)}}equalsBase(e,i){if(!rl(e.getGeometryType()))return!1;const n=e;if(this===n)return!0;if(!this.m_description.equals(n.getDescription())||this.isEmptyImpl()!==n.isEmptyImpl())return!1;if(this.isEmptyImpl())return!0;const s=this.getPointCount();if(s!==n.getPointCount())return!1;for(let r=0;r<this.m_description.getAttributeCount();r++){const o=this.m_description.getSemantics(r),l=this.getAttributeStreamRef(o),c=n.getAttributeStreamRef(o),f=js.getComponentCount(o);if(!l.equals(c,0,s*f,i))return!1}if(i){if(!this.equalsImplTol(e,i))return!1}else if(!this.equalsImpl(e))return!1;return!0}vertexCount(){return K(0),0}transformAttribute(e,i,n,s,r){this.addAttribute(e),this.isEmpty()||n===0&&s===1||(ret(this.getAttributeStreamRef(e),i,this.getPointCount(),js.getComponentCount(e),ZQe(n,s,r)),this.notifyModified())}getDescription(){return this.m_description}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}mergeVertexDescriptionImpl(e){const i=I5(this.getDescription(),e);this.assignVertexDescription(i)}mergeVertexDescription(e){this.m_description!==e&&(this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=M5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){if(!this.m_description.hasAttribute(e))return;const i=sB(this.m_description,e);this.assignVertexDescription(i)}dropAllAttributes(){const e=Uo();e!==this.m_description&&this.assignVertexDescription(e)}getAttributeStreamRef(e){this.throwIfEmpty(),this.m_description.hasAttribute(e)||Je("AttributeStream : Geometry does not have the attribute");const i=this.m_description.getAttributeIndex(e);return this.m_vertexAttributes.get(i)}setAttributeStreamRef(e,i){i||Je("stream"),i&&js.getPersistence(e)!==i.getPersistence()&&Je(""),this.addAttribute(e);const n=this.m_description.getAttributeIndex(e);this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),this.m_vertexAttributes.set(n,i),this.notifyModifiedFlags(2001)}notifyModifiedFlags(e){e===65535&&(this.m_reservedPointCount=-1,this.notifyModifiedAllImpl()),this.setDirtyFlagProtected(e,!0),this.clearAccelerators(),32&e&&this.verifyAllStreamsAfterSizeChange()}notifyModified(){this.notifyModifiedFlags(2001)}getPointCount(){return this.m_pointCount}getPointByVal(e,i){const n=i;n.assignVertexDescription(this.m_description);for(let s=0;s<this.m_description.getAttributeCount();s++){const r=this.m_description.getSemantics(s);for(let o=0,l=js.getComponentCount(r);o<l;o++){const c=this.m_vertexAttributes.get(s).readAsDbl(l*e+o);n.setAttributeBasic(r,o,c)}}}setPointByVal(e,i){const n=i;n.isEmpty()&&Je(k1e);const s=n.getDescription();s!==this.m_description&&this.mergeVertexDescription(s);const r=this.m_vertexAttributes.get(0);r.write(2*e,n.getX()),r.write(2*e+1,n.getY());for(let o=1,l=this.m_description.getAttributeCount();o<l;o++){const c=this.m_description.getSemantics(o),f=js.getComponentCount(c);for(let y=0;y<f;y++){const _=n.getAttributeAsDbl(c,y);this.m_vertexAttributes.get(o).writeAsDbl(e*f+y,_)}}this.notifyModifiedFlags(2001)}setPointByValFromArray(e,i,n,s){K(0)}getPointByValAsArray(e,i,n,s){K(0)}isEmpty(){return this.isEmptyImpl()}isEmptyImpl(){return this.m_pointCount===0}getAttributeAsDbl(e,i,n){const s=js.getComponentCount(e);n>=s&&Mi("");const r=this.m_description.getAttributeIndex(e);return r>=0?this.m_vertexAttributes.get(r).readAsDbl(i*s+n):js.getDefaultValue(e)}queryAttributeAsDbl(e,i,n,s){const r=js.getComponentCount(e);s<r&&Mi("");const o=this.m_description.getAttributeIndex(e);if(o>=0){const l=i*r,c=this.m_vertexAttributes.get(o);for(let f=0;f<r;f++)n[f]=c.readAsDbl(l+f)}else{const l=js.getDefaultValue(e);for(let c=0;c<r;c++)n[c]=l}}getAttributeAsInt(e,i,n){return Math.trunc(this.getAttributeAsDbl(e,i,n))}queryAttributeAsInt(e,i,n,s){K(0)}setAttribute(e,i,n,s){const r=js.getComponentCount(e);n>=r&&Mi(""),this.addAttribute(e);const o=this.m_description.getAttributeIndex(e);this.notifyModifiedFlags(2001),this.m_vertexAttributes.get(o).writeAsDbl(i*r+n,s)}setAttributeFromArray(e,i,n,s){(i<0||i>=this.m_pointCount)&&Mi("");const r=js.getComponentCount(e);s!==r&&Mi(""),this.addAttribute(e);const o=this.m_description.getAttributeIndex(e);this.notifyModifiedFlags(2001);const l=this.m_vertexAttributes.get(o);for(let c=0;c<r;++c)l.writeAsDbl(i*r+c,n[c])}getXY(e){return this.m_vertexAttributes.get(0).readPoint2D(2*e)}queryXY(e,i){return this.m_vertexAttributes.get(0).queryPoint2D(2*e,i)}setXY(e,i){this.m_vertexAttributes.get(0).writePoint2D(2*e,i),this.notifyModifiedFlags(2001)}setXYCoords(e,i,n){const s=this.m_vertexAttributes.get(0);s.write(2*e,i),s.write(2*e+1,n),this.notifyModifiedFlags(2001)}getXYZ(e){const i=this.m_vertexAttributes.get(0),n=ii.getNAN();return n.x=i.read(2*e),n.y=i.read(2*e+1),this.m_description.hasAttribute(1)?n.z=this.m_vertexAttributes.get(1).read(e):n.z=js.getDefaultValue(1),n}setXYZ(e,i){this.addAttribute(1),this.notifyModifiedFlags(2001);const n=this.m_vertexAttributes.get(0);n.write(2*e,i.x),n.write(2*e+1,i.y),this.m_vertexAttributes.get(1).write(e,i.z)}queryEnvelope(e){e instanceof xe||e instanceof ol?this.updateEnvelope(e):(this.updateAllDirtyIntervals(!0),this.m_envelopeData.copyTo(this.m_description,e))}queryLooseEnvelope(e){this.updateLooseEnvelope(e)}queryInterval(e,i){const n=Ze.constructEmpty();return this.isEmptyImpl()||(this.updateAllDirtyIntervals(!0),this.m_envelopeData.queryInterval(this.m_description,e,i,n)),n}setAttributeBasic(e,i,n){this.setAttributeImpl(e,i,n)}setAttributeImpl(e,i,n){if(this.addAttribute(e),this.isEmpty())return;let s=!1;const r=js.getComponentCount(e),o=this.getAttributeStreamRef(e),l=Number.isNaN(n);if(o.getPersistence()===1){const c=o;for(let f=i,y=this.m_pointCount*r;f<y;f+=r){const _=c.read(f);(l||_===n)&&Number.isNaN(_)||(c.write(f,n),s=!0)}}else for(let c=i,f=this.m_pointCount*r;c<f;c+=r)o.readAsDbl(c)!==n&&(o.writeAsDbl(c,n),s=!0);s&&this.notifyModifiedFlags(2001)}replaceNaNs(e,i){if(this.addAttribute(e),this.isEmpty())return;let n=!1;const s=js.getComponentCount(e),r=this.getAttributeStreamRef(e);for(let o=0;o<s;o++)if(r.getPersistence()===1){const l=r;for(let c=0,f=this.m_pointCount*s;c<f;c++){const y=l.read(c);Number.isNaN(y)&&(l.write(c,i),n=!0)}}else for(let l=0,c=this.m_pointCount*s;l<c;l++){const f=r.readAsDbl(l);Number.isNaN(f)&&(r.writeAsDbl(l,i),n=!0)}n&&this.notifyModifiedFlags(2001)}calculateLength3D(e){return K(0),0}setEnvelopeForImport(e){this.m_description.equals(e.getDescription())||Je(""),this.m_envelopeData=new ku({moveEnv:e}),this.setDirtyFlagProtected(192,!1)}copyTo(e){e.getGeometryType()!==this.getGeometryType()&&Je(""),this!==e&&this.copyToUnchecked(e,!1)}queryCoordinates(e,i,n,s){let r=s<0?this.m_pointCount:s;if(r=Math.min(r,n+i),(n<0||r<n||this.m_pointCount>0&&n>=this.m_pointCount)&&Je(""),this.m_pointCount===0)return r;const o=this.getAttributeStreamRef(0);for(let l=2*n,c=2*r,f=0;l<c;l+=2,f++)o.queryPoint2D(l,e[f]);return r}queryCoordinates3D(e,i,n,s){let r=s<0?this.m_pointCount:s;if(r=Math.min(r,n+i),(n<0||r<n||this.m_pointCount>0&&n>=this.m_pointCount)&&Je(""),this.m_pointCount===0)return r;const o=this.getAttributeStreamRef(0);let l=null;const c=js.getDefaultValue(1),f=this.m_description.hasAttribute(1);f&&(l=this.getAttributeStreamRef(1));let y=0;for(let _=n;_<r;_++,y++)e[y].x=o.read(2*_),e[y].y=o.read(2*_+1),e[y].z=f?l.read(_):c;return r}clearAndSetDirtyFlagProtected(e,i){let n=0;const s=e&~i,r=i|s;n=this.m_flags,(n&r)!==i&&(this.m_flags=n&~s|i)}getIsSimple(e,i){i[0]=0;let n=-1;const s=this.m_flags,r=this.m_simpleTolerance;return 1&s||(n=(14&s)>>1,i[0]=r,r<e&&(n=-1)),n}setIsSimple(e,i,n=!1){if(e===2?K(this.getGeometryType()===me.enumPolyline):e===1?K(this.getGeometryType()===me.enumMultiPoint||this.getGeometryType()===me.enumPolyline):e===3&&K(this.getGeometryType()===me.enumPolygon),e===-1)this.setDirtyFlagProtected(17,!0);else{let s=e<<1;n||(s|=16),this.clearAndSetDirtyFlagProtected(31,s),this.m_simpleTolerance!==i&&(this.m_simpleTolerance=i)}}attributeStreamIsAllocated(e){this.throwIfEmpty();const i=this.m_description.getAttributeIndex(e);return i>=0&&this.m_vertexAttributes.get(i)!==null}capacity(){return this.m_reservedPointCount===-1&&this.m_pointCount===0?0:this.m_reservedPointCount}getDescriptionImpl(){return this.m_description}copyToUnchecked(e,i=!1){i&&this.hasDirtyFlag(32)&&GJe("Cannot do shallow clone on unprepared geometry");const n=e,s=this.getGeometryType(),r=n.getGeometryType();K(s===r||s===me.enumPolygon&&r===me.enumPolyline,"failure in copyToUnchcked"),n.clearAccelerators(),n.m_description=this.m_description,n.m_vertexAttributes.destroyAndSetSize(0),n.m_envelopeData.releaseAttributes();const o=this.m_description.getAttributeCount(),l=new mT;if(!this.m_vertexAttributes.empty()){l.destroyAndSetSize(o);for(let c=0;c<o;c++)if(this.m_vertexAttributes.get(c))if(i)l.set(c,this.m_vertexAttributes.get(c));else{const f=js.getComponentCount(this.m_description.getSemantics(c));l.set(c,this.m_vertexAttributes.get(c).restrictedClone(this.getPointCount()*f))}}if(this.m_envelopeData.copyToIfNotNull(this.m_description,n.m_envelopeData),n.m_flags=this.m_flags,n.m_simpleTolerance=this.m_simpleTolerance,s!==r){const c=[0];n.getIsSimple(0,c)>=3?n.setIsSimple(1,c[0]):n.setIsSimple(-1,0)}n.m_vertexAttributes.swap(l),l.destroyAndSetSize(0),n.m_pointCount=this.m_pointCount,n.hasDirtyFlag(32)?(K(!i),n.m_reservedPointCount=-1):n.m_reservedPointCount=n.m_pointCount;try{this.copyToImpl(n,i)}catch(c){throw n.setEmpty(),c}n.verifyAllStreamsAfterSizeChange()}buildRasterizedGeometryAccelerator(e,i){return!1}getAccelerators(){return this.m_accelerators}clearAccelerators(){this.m_accelerators&&this.m_accelerators.release(),this.m_accelerators=null}ensureUniqueAccelerators(){if(this.m_accelerators&&!this.m_accelerators.uniqueUse()){const e=this.m_accelerators.clone();this.m_accelerators.release(),this.m_accelerators=e}}interpolateTwoVertices(e,i,n,s){(e<0||e>=this.m_pointCount)&&Mi(""),(i<0||i>=this.m_pointCount)&&Mi(""),s.assignVertexDescription(this.m_description);const r=new Array(js.maxComponentCount()),o=new Array(js.maxComponentCount()),l=Cy();let c=0;for(let f=0;f<this.m_description.getAttributeCount();f++){const y=this.m_description.getSemantics(f),_=js.getInterpolation(y),x=js.getComponentCount(y),S=js.getDefaultValue(y);this.queryAttributeAsDbl(y,e,r,x),this.queryAttributeAsDbl(y,i,o,x),K(c+x<=iB),zz(_,r,o,l,c,x,n,S),c+=x}aet(s,l,c)}getShortestDistance(e,i){return Y.distance(this.getXY(e),this.getXY(i))}getShortestSqrDistance(e,i){return Y.sqrDistance(this.getXY(e),this.getXY(i))}resizeImpl(e){if(e<0&&Je(),(e=Math.ceil(e))===this.m_pointCount)return;this.m_pointCount=e;const i=this.m_pointCount<=this.m_reservedPointCount?2001:4095;this.notifyModifiedFlags(i)}verifyPointIndex(e){K(0)}assignVertexDescriptionImpl(e){if(!this.m_vertexAttributes.empty()){const i=T7();I7(e,this.m_description,i);const n=new mT;n.destroyAndSetSize(e.getAttributeCount());for(let s=0;s<e.getAttributeCount();s++){const r=i[s];r!==-1?n.set(s,this.m_vertexAttributes.get(r)):this.m_reservedPointCount=-1}n.swap(this.m_vertexAttributes)}this.m_description=e,this.m_envelopeData.releaseAttributes(),this.notifyModifiedFlags(4095)}hasDirtyFlag(e){return!!(this.m_flags&e)}setDirtyFlagProtected(e,i){i?this.m_flags|=e:this.m_flags&=~e}notifyModifiedAllImpl(){}verifyAllStreamsAfterSizeChange(){this.hasDirtyFlag(32)&&this.verifyAllStreamsAfterSizeChangeImpl()}verifyAllStreamsAfterSizeChangeImpl(){if(this.hasDirtyFlag(32)){if(this.m_reservedPointCount<this.m_pointCount){this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),this.m_reservedPointCount=Number.MAX_SAFE_INTEGER;let e=0;e=this.m_pointCount<4?3:this.m_pointCount<=128?2*this.m_pointCount:(4*this.m_pointCount+2)/3;for(let i=0;i<this.m_description.getAttributeCount();i++){const n=this.m_description.getSemantics(i);let s=0;if(this.m_vertexAttributes.get(i)!==null){const r=js.getComponentCount(n);s=this.m_vertexAttributes.get(i).size()/r,s<this.m_pointCount&&(this.m_vertexAttributes.get(i).resize(e*r,js.getDefaultValue(n)),s=e)}else this.m_vertexAttributes.set(i,T1e(n,e)),s=e;s<this.m_reservedPointCount&&(this.m_reservedPointCount=s)}}this.verifyStreamsAfterSizeChangeExtraImpl(),this.setDirtyFlagProtected(32,!1)}}verifyStreamsAfterSizeChangeExtraImpl(){}updateAllDirtyIntervals(e){if(e?this.hasDirtyFlag(192):this.hasDirtyFlag(128)){if(this.isEmpty())return this.hasDirtyFlag(192)&&this.m_envelopeData.setEmpty(this.m_description),void this.setDirtyFlagProtected(192,!1);const i=this.updateXYImpl(e),n=new ur({vd:this.m_description});n.setEnvelope(i);for(let s=1;s<this.m_description.getAttributeCount();s++){const r=this.m_description.getSemantics(s),o=js.getComponentCount(r),l=this.m_vertexAttributes.get(s);for(let c=0;c<o;c++){const f=new Ze;f.setEmpty();for(let y=0;y<this.m_pointCount;y++){const _=l.readAsDbl(y*o+c);f.mergeCoordinate(_)}n.setIntervalEnvelope(r,c,f)}}(e?this.hasDirtyFlag(192):this.hasDirtyFlag(128))&&(this.m_envelopeData=new ku({moveEnv:n}),this.clearDirtyIntervalsFlag(e))}}updateXYImpl(e){const i=xe.constructEmpty(),n=this.m_vertexAttributes.get(0);return i.mergePointsInterleaved(n,0,this.m_pointCount),i}updateEnvelope3D(e){K(0)}updateLooseEnvelope(e){this.updateAllDirtyIntervals(!1),e instanceof xe?e.assign(this.m_envelopeData.m_envelope2D):this.m_envelopeData.queryEnvelope3D(this.m_description,e)}updateEnvelope(e){this.updateAllDirtyIntervals(!0),e.assign(this.m_envelopeData.m_envelope2D)}setEmptyImpl(){this.m_pointCount=0,this.m_reservedPointCount=-1,this.m_vertexAttributes.destroyAndSetSize(0),this.notifyModifiedFlags(4095)}clearDirtyIntervalsFlag(e){this.setDirtyFlagProtected(192,!1)}reserveImpl(e,i){if(e<0&&Je(""),e===0)return;let n=e=Math.ceil(e);if(this.m_reservedPointCount<n){this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),i?(this.m_vertexAttributes.get(0)===null&&this.m_vertexAttributes.set(0,l9(0,0)),this.m_vertexAttributes.get(0).resizeRounded(2*n),n=this.m_vertexAttributes.get(0).size()>>1):this.m_vertexAttributes.get(0)===null?this.m_vertexAttributes.set(0,l9(0,n)):this.m_vertexAttributes.get(0).resize(2*n);for(let s=1;s<this.m_description.getAttributeCount();s++){const r=this.m_description.getSemantics(s),o=js.getComponentCount(r);this.m_vertexAttributes.get(s)!==null?this.m_vertexAttributes.get(s).resize(n*o):this.m_vertexAttributes.set(s,l9(r,n))}this.reserveImplImpl(n,i),this.m_reservedPointCount=n}}reserveRounded(e){e<0&&Je(),e=Math.ceil(e),this.reserveImpl(e,!0)}reserveImplImpl(e,i){}throwIfEmpty(){this.isEmptyImpl()&&b7("")}}class Qs extends D1e{constructor(e){super(e),e&&(e.points?this.addPoints2D(e.points,e.pointsSize,0,-1):e.point&&this.add(e.point))}assignCopy(e){return K(0),this}assignMove(e){return K(0),this}insertPoint2D(e,i){K(0)}insertPoint(e,i){K(0)}insertPoints(e,i,n){K(0)}insertPoints2D(e,i,n){K(0)}removePoints(e,i){K(0)}removePoint(e){for(let i=0,n=this.m_description.getAttributeCount();i<n;i++)if(this.m_vertexAttributes.get(i)){const s=this.m_description.getSemantics(i),r=br.getComponentCount(s);this.m_vertexAttributes.get(i).eraseRange(r*e,r,r*this.m_pointCount)}this.m_pointCount--,this.m_reservedPointCount>0&&this.m_reservedPointCount--,this.notifyModifiedFlags(2001)}calculateEnvelope2D(){return K(0),new xe(0,0,0,0)}resizeNoInit(e){this.resizeImpl(e)}resizeAndInitNonPositionAttributes(e){const i=this.m_pointCount;if(this.resizeImpl(e),this.m_pointCount>i)for(let n=1,s=this.m_description.getAttributeCount();n<s;n++){const r=this.m_description.getSemantics(n),o=br.getDefaultValue(r),l=br.getComponentCount(r);this.m_vertexAttributes.get(n).insertRange(l*i,o,l*(this.m_pointCount-i),l*i)}}queryCoordinates3D(e,i,n,s){return K(0),0}queryAttributeAsInt(e,i,n,s){K(0)}add(e){e.isEmpty()&&Je(k1e),this.resizeAndInitNonPositionAttributes(this.m_pointCount+1),this.setPointByVal(this.m_pointCount-1,e)}addXY(e,i){this.resizeAndInitNonPositionAttributes(this.m_pointCount+1);const n=new Y(e,i);this.setXY(this.m_pointCount-1,n)}addXYZ(e,i,n){this.resizeAndInitNonPositionAttributes(this.m_pointCount+1);const s=new ii;s.setCoords(e,i,n),this.setXYZ(this.m_pointCount-1,s)}addPoint2D(e){this.addXY(e.x,e.y)}addPoint3D(e){this.addXYZ(e.x,e.y,e.z)}addPoints(e,i,n){this===e&&Je("Multi_point_impl.add");const s=n<0?e.getPointCount():n;if((i<0||i>e.getPointCount()||s<i)&&Je(""),i===s)return;const r=e.getDescription();this.mergeVertexDescription(r);const o=s-i,l=this.m_pointCount;this.resizeNoInit(this.m_pointCount+o);for(let c=0,f=this.m_description.getAttributeCount();c<f;c++){const y=this.m_description.getSemantics(c),_=br.getComponentCount(y),x=this.getAttributeStreamRef(y);if(r.hasAttribute(y)){const S=e.getAttributeStreamRef(y);x.insertRangeFromStream(l*_,S,i*_,o*_,!0,1,l*_)}else{const S=br.getDefaultValue(y);x.insertRange(l*_,S,o*_,l*_)}}}addPoints2D(e,i,n,s){let r=i;const o=s<0?r:s;if((r<0||n<0||n>r||o<n)&&Je(""),n===o)return;r=o-n;const l=this.m_pointCount;this.resizeAndInitNonPositionAttributes(this.m_pointCount+r);const c=this.getAttributeStreamRef(0);for(let f=0;f<r;++f)c.writePoint2D(2*(l+f),e[n+f]);this.notifyModifiedFlags(2001)}addPoints3D(e,i,n,s){K(0)}getGeometryType(){return me.enumMultiPoint}getDimension(){return 0}createInstance(){return new Qs({vd:this.getDescription()})}setEmpty(){this.setEmptyImpl()}applyTransformation(e){if(this.isEmpty()||e.isIdentity())return;const i=this.m_vertexAttributes.get(0);e instanceof _i?i.applyTransformation(e,0,this.m_pointCount):K(0),this.notifyModifiedFlags(2001)}calculateArea2D(){return K(0),0}calculateLength2D(){return K(0),0}calculateLength3D(e){return K(0),0}equals(e,i){return e.getGeometryType()===me.enumMultiPoint&&this.equalsBase(e,i)}queryEnvelope(e){e instanceof ur?(this.updateAllDirtyIntervals(!0),this.m_envelopeData.copyTo(this.m_description,e)):e instanceof xe?this.updateEnvelope(e):K(0)}getImpl(){return this}getBoundary(){return null}reserve(e){this.reserveImpl(e)}clone(){const e=this.createInstance();return this.copyTo(e),e}swap(e){K(0)}buildQuadTreeAccelerator(e){return!1}getHashCodeImpl(){return K(0),0}equalsImpl(e){return!0}equalsImplTol(e,i){return!0}copyToImpl(e,i){}}Qs.type=me.enumMultiPoint;class Xr{constructor(){this.envAabb=xe.constructEmpty(),this.envRot=xe.constructEmpty()}static constructEmpty(){return new Xr}width(){return this.envAabb.width()}height(){return this.envAabb.height()}maxDim(){return Math.max(this.width(),this.height())}isEmpty(){return K(0),!1}setEmpty(){this.envAabb.setEmpty(),this.envRot.setEmpty()}setCoords(e){this.envAabb.setCoords(e),this.envRot.setCoords({x:b3(e),y:x3(e)})}setFromPoints(e,i){this.setEmpty(),this.mergePoints(e,i)}mergePoint2D(e){K(0)}mergeNe(e){this.envAabb.mergeNe(e),this.envRot.mergeNeCoords(b3(e),x3(e))}mergeCoords(e,i){K(0)}mergeW(e){K(0)}mergeE2D(e){K(0)}mergePoints(e,i){this.envAabb.mergePoints(e,i);for(let n=0;n<i;){if(!this.envRot.isEmpty()){for(let s=n;s<i;s++){const r=b3(e[s]),o=x3(e[s]);this.envRot.mergeNeCoords(r,o)}break}{const s=b3(e[n]),r=x3(e[n]);this.envRot.setCoords({x:s,y:r}),n++}}}isIntersectingPoint2D(e){return!(!this.envAabb.contains(e)||!this.envRot.containsCoords(b3(e),x3(e)))}isIntersectingW(e){return this.envAabb.isIntersecting(e.envAabb)&&this.envRot.isIntersecting(e.envRot)}containsW(e){return!(!this.envAabb.containsEnvelope(e.envAabb)||!this.envRot.containsEnvelope(e.envRot))}containsPoint2D(e){return this.isIntersectingPoint2D(e)}intersectW(e){const i=this.envAabb.intersect(e.envAabb),n=this.envRot.intersect(e.envRot);return i&&!n&&this.envAabb.setEmpty(),n&&!i&&this.envRot.setEmpty(),i&&n}inflate(e){this.envAabb.inflateCoords(e,e);const i=e*AQe();this.envRot.inflateCoords(i,i),i<0&&Xr.st_reduceEmpty(this)}sqrMaxMinDistance(e){return K(0),0}sqrMinDistance(e){return K(0),0}sqrMaxDistance(e){return K(0),0}getEnvelope2D(){return K(0),new xe(this.envAabb)}static st_reduceEmpty(e){const i=e.envAabb.isEmpty(),n=e.envRot.isEmpty();i&&!n?e.envRot.setEmpty():n&&!i&&e.envAabb.setEmpty()}}function b3(t){return t.x-t.y}function x3(t){return t.x+t.y}class cet{isIdentity(){return K(0),!0}}class N1e{constructor(e){this.m_factor=1,this.m_wkid=0,this.m_peUnit=null,e&&(this.m_peUnit=e,this.m_factor=e.getUnitFactor(),this.m_wkid=e.getCode(),this.m_wkid<0&&(this.m_wkid=0))}getName(){return this.m_peUnit.getName()}getID(){return this.m_wkid}getConversionFactor(e){return this.getUnitType()!==e.getUnitType()&&Je("unit type mismatch"),this.getUnitToBaseFactor()/e.getUnitToBaseFactor()}getUnitToBaseFactor(){return this.m_factor}getHashCode(){return Ua(df(this.getUnitType()),df(this.getUnitToBaseFactor()))}equals(e){return!!e&&this.getUnitType()===e.getUnitType()&&this.getUnitToBaseFactor()===e.getUnitToBaseFactor()&&this.getID()===e.getID()&&this.getName()===e.getName()}static isValidWkid(e){return!1}}class uet extends Aa{constructor(e,i){super(),this.m_index=-1,this.gc=e,this.dim=i}next(){for(;;){if(this.m_index>=this.gc.getGeometryCount()||(this.m_index++,this.m_index===this.gc.getGeometryCount()))return null;const e=this.gc.getGeometry(this.m_index);if(this.dim===-1||1<<e.getDimension()&this.dim)return e}return null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}class eC{constructor(e){this.m_geoms=[],this.m_description=Uo(),e&&(e.vd?this.m_description=e.vd:e.copy?e.copy.copyTo(this):K(0))}assignCopy(e){return K(0),this}assignMove(e){return K(0),this}getGeometryCount(){return this.m_geoms.length}reserve(e){K(0)}addGeometry(e){if(e.getGeometryType()===me.enumGeometryCollection){const i=e;for(let n=0,s=i.getGeometryCount();n<s;n++)this.addGeometry(i.getGeometry(n))}else this.m_geoms.push(e.clone()),this.mergeVertexDescription(e.getDescription())}addGeometryMove(e){K(0)}addCursor(e){K(0)}getGeometry(e){return(e<0||e>=this.m_geoms.length)&&Je("Geometry_collection.get_geometry"),this.m_geoms[e]}modifiedElementIndex(e){K(0)}modifiedElement(e){K(0)}getGeometryType(){return me.enumGeometryCollection}getDimension(){let e=0;for(const i of this.m_geoms)e=Math.max(e,i.getDimension());return e}getDescription(){return this.m_description}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}assignVertexDescriptionImpl(e){for(const i of this.m_geoms)i.assignVertexDescription(e);this.m_description=e}mergeVertexDescription(e){this.m_description!==e&&(this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=M5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){K(0)}dropAllAttributes(){K(0)}queryInterval(e,i){return K(0),new Ze(0,0)}queryEnvelope(e){K(0)}queryLooseEnvelope(e){K(0)}isEmpty(){return this.m_geoms.length===0}setEmpty(){K(0)}applyTransformation(e){if(e instanceof _i)for(const i of this.m_geoms)i.applyTransformation(e);K(0)}transformAttribute(e,i,n,s,r){K(0)}createInstance(){return new eC({vd:this.getDescription()})}copyTo(e){e.getGeometryType()!==me.enumGeometryCollection&&Je("");const i=e;if(i!==this){i.m_geoms.length=0,i.assignVertexDescription(this.m_description);for(const n of this.m_geoms)i.m_geoms.push(n.clone())}}calculateArea2D(){return K(0),0}calculateLength2D(){return K(0),0}calculateLength3D(e){return K(0),0}getBoundary(){return K(0),this}clone(){return new eC({copy:this})}equals(e,i){if(e===this)return!0;if(e.getGeometryType()!==me.enumGeometryCollection)return!1;const n=e;if(this.m_description!==n.m_description||this.m_geoms.length!==n.m_geoms.length)return!1;for(let s=0;s<this.m_geoms.length;++s)if(!this.m_geoms[s].equals(n.m_geoms[s],i))return!1;return!0}swap(e){K(0)}setAttributeBasic(e,i,n){K(0)}replaceNaNs(e,i){K(0)}getImpl(){return this}vertexCount(){return K(0),0}hasNonLinearSegments(){return K(0),!1}mergeVertexDescriptionImpl(e){const i=I5(this.getDescription(),e);this.assignVertexDescription(i)}}function het(t,e=-1){return new uet(t,e)}eC.type=me.enumGeometryCollection;class Sn{assign(e){this.m_reason=e.m_reason,this.m_vertexIndex1=e.m_vertexIndex1,this.m_vertexIndex2=e.m_vertexIndex2}constructor(e,i,n){e!==void 0?(this.m_reason=e,this.m_vertexIndex1=i,this.m_vertexIndex2=n):(this.m_reason=0,this.m_vertexIndex1=-1,this.m_vertexIndex2=-2)}clear(){K(0)}}class rie{constructor(e){if(this.m_geom=this.m_sr=null,e){if(e.move)return this.m_geom=e.move.m_geom,e.move.m_geom=null,this.m_sr=e.move.m_sr,void(e.move.m_sr=null);if(e.copy)return this.m_geom=e.copy.m_geom?e.copy.m_geom.clone():null,void(this.m_sr=e.copy.m_sr);e.geom&&(this.m_geom=e.geom),e.sr&&(this.m_sr=e.sr)}}assignCopy(e){return K(0),this}assignMove(e){return K(0),this}getGeometry(){return this.m_geom}getSpatialReference(){return this.m_sr}setGeometry(e){this.m_geom=e}setSpatialReference(e){this.m_sr=e}getHashCode(){return K(0),0}equals(e,i){return K(0),!1}clone(){return K(0),this}hasGeom(){return!!this.m_geom}}const rM={330:104878,500:104879,1300:104899,1450:104986,2230:104988,3800:104978,5e3:104919,6200:104906,8200:104909,9500:104927,9600:104977,1e4:[104911,104936],11e3:104941,11080:104872,11100:104907,12e3:104920,12400:104995,13e3:104948,14e3:[104923,104989],15e3:[104913,104954],15100:104976,16e3:[104926,104931],18e3:[104922,104982],21e3:104947,21500:104877,27e3:[104950,104957],29e3:104964,3e4:104921,31e3:104949,33e3:104946,4e4:[104914,104967],40600:104897,41900:104937,42e3:104951,43100:104993,49300:104924,50100:104939,54e3:104955,58200:104981,59500:104930,74e3:104961,77e3:104956,79e3:104962,83500:104910,85e3:104917,88800:104934,89200:104985,96e3:104997,104e3:104963,106500:104898,11e4:104938,133e3:104932,135e3:104983,17e4:104965,198200:104987,198630:104935,208e3:104966,235800:104952,249400:104929,252100:104980,255e3:104973,47e4:104972,529800:104942,531e3:104996,56e4:104928,561400:104979,578900:104945,584700:104959,593e3:104970,606e3:104999,718e3:104933,745700:104984,761400:104953,763500:104994,764e3:104940,788900:104958,1188300:104998,1195e3:104969,1352600:104968,1560800:104874,1562090:104915,1737400:104903,1821460:104918,1821490:104876,2409300:104912,2410300:104873,2439400:104974,2439700:104900,2575e3:104943,2631200:104875,2632345:104916,3393400:104904,3396190:[104905,104971],6051e3:104901,6051800:104902,637e4:104128,6370997:[4052,37008],6371e3:4035,6371007:4047,6371228:[4053,10346],6376045:[8042,8043],6376523:[4027,4901,4902],6376896:37007,6378135:[4122,4322,4324,4720,4985,4987],6378136:[4740,4923,7678,7680,9474,9475,104017,104018],6378137:[3823,3824,3888,3889,4017,4019,4023,4031,4040,4046,4055,4074,4075,4080,4081,4121,4126,4130,4133,4140,4141,4148,4151,4152,4163,4166,4167,4170,4171,4172,4173,4176,4180,4189,4190,4258,4269,4283,4318,4319,4326,4463,4466,4469,4470,4480,4482,4483,4490,4557,4558,4612,4617,4619,4624,4627,4659,4661,4667,4669,4670,4674,4686,4687,4693,4694,4702,4737,4742,4747,4749,4750,4755,4756,4757,4758,4759,4761,4762,4763,4764,4765,4883,4885,4887,4889,4893,4895,4898,4907,4909,4921,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4971,4975,4977,4979,4981,4983,4989,4997,4999,5012,5013,5245,5246,5251,5252,5263,5264,5323,5324,5340,5342,5353,5354,5359,5360,5364,5365,5370,5371,5372,5373,5380,5381,5392,5393,5488,5489,5545,5546,5592,5593,5885,5886,6134,6135,6310,6311,6318,6319,6321,6322,6324,6325,6364,6365,6667,6668,6705,6706,6782,6783,6980,6982,6983,6987,6989,6990,7034,7035,7036,7037,7038,7039,7040,7041,7042,7072,7073,7084,7085,7086,7087,7133,7135,7136,7138,7139,7372,7373,7657,7659,7661,7663,7665,7685,7686,7797,7798,7816,7843,7844,7880,7881,7885,7886,7900,7901,7902,7903,7904,7905,7906,7907,7908,7909,7910,7911,7912,7915,7917,7919,7921,7923,7925,7927,7929,7931,8085,8086,8231,8232,8235,8237,8239,8240,8244,8246,8248,8249,8251,8252,8254,8255,8399,8403,8426,8427,8449,8542,8544,8545,8684,8685,8698,8699,8817,8818,8860,8888,8899,8900,8901,8902,8906,8907,8916,8918,8920,8922,8924,8926,8928,8930,8932,8934,8936,8938,8940,8942,8944,8946,8948,8949,8972,8973,8974,8975,8976,8977,8978,8979,8980,8981,8982,8983,8984,8985,8986,8987,8988,8989,8990,8991,8992,8993,8994,8995,8996,8997,8998,8999,9e3,9002,9003,9005,9006,9008,9009,9011,9012,9013,9014,9016,9017,9018,9019,9053,9054,9055,9056,9057,9059,9060,9061,9062,9063,9064,9065,9066,9067,9068,9069,9071,9072,9074,9075,9139,9140,9147,9148,9152,9153,9183,9184,9293,9294,9299,9308,9309,9332,9333,9364,9372,9379,9380,9384,9453,9469,9470,9546,9547,9695,9696,9701,9702,9739,9754,9755,9758,9763,9776,9777,9778,9779,9781,9782,9783,9784,9866,9871,9939,9964,9969,9974,9989,9990,10175,10177,10178,10185,10191,10196,10204,10209,10214,10219,10224,10229,10237,10272,10277,10283,10284,10298,10299,10300,10304,10305,10307,10309,10310,10311,10312,10327,10328,10413,10414,10468,10474,10475,10570,10571,10605,10606,10623,10628,20033,20040,20041,20045,20046,104009,104010,104011,104012,104013,104014,104015,104016,104019,104020,104021,104022,104024,104027,104028,104050,104100,104107,104108,104110,104111,104114,104115,104116,104117,104118,104119,104120,104121,104122,104123,104124,104129,104133,104134,104137,104141,104142,104143,104144,104145,104179,104180,104181,104182,104183,104184,104185,104186,104199,104223,104257,104258,104259,104260,104286,104287,104602,104613,104644,104645,104646,104647,104653,104804,104896,104991],6378140:4610,6378145:[4025,4276,4760,4891,37001],6378150:37003,6378155:[37004,37207],6378160:[3821,4003,4021,4036,4202,4203,4237,4238,4291,4618,4708,5527,37231,104023,104136],6378166:37002,6378200:[4020,4229,4286,4303,4706],6378245:[4024,4147,4164,4178,4179,4191,4200,4205,4214,4284,4317,4555,4676,4677,4678,4991,4993,5560,5561,37257,104135],6378270:[4732,37005,37229],6378273:[4054,10345],6378300:[4029,4168,4174],6378388:[4022,4123,4153,4154,4158,4159,4160,4161,4165,4181,4182,4183,4184,4185,4192,4194,4195,4196,4199,4204,4207,4208,4215,4218,4221,4224,4225,4230,4231,4233,4235,4236,4247,4248,4249,4254,4255,4259,4264,4265,4271,4272,4274,4285,4287,4288,4292,4297,4309,4311,4313,4316,4472,4475,4611,4614,4615,4616,4621,4622,4623,4625,4626,4628,4629,4630,4631,4632,4633,4636,4637,4639,4641,4642,4643,4644,4645,4646,4658,4660,4662,4663,4664,4665,4668,4672,4673,4684,4688,4689,4690,4691,4692,4698,4704,4705,4707,4709,4710,4711,4712,4714,4715,4716,4718,4719,4721,4722,4724,4725,4727,4728,4729,4730,4733,4734,4735,4739,4741,4753,4754,4802,4803,4806,4809,4810,4823,4824,4900,5524,6883,8428,8430,8431,9248,9251,9253,9403,9893,10158,10249,10252,37201,37204,37205,37212,37213,37214,37215,37216,37217,37218,37219,37221,37222,37224,37226,37227,37230,37232,37233,37234,37235,37237,37238,37241,37242,37245,37246,37247,37249,37250,37251,37253,37259,104104,104106,104125,104126,104127,104130,104138,104248],6378523:104786,24764e3:104960,25559e3:104944,60268e3:104925,71492e3:104908,6957e5:104975,6377397155e-3:[3819,3906,4004,4120,4124,4125,4149,4150,4156,4162,4211,4219,4257,4262,4280,4289,4294,4295,4301,4306,4308,4312,4314,4613,4666,4745,4746,4801,4804,4805,4808,4813,4814,4815,4818,4820,4904,5132,5228,5229,5681,5830,8351,9267,10268,37255,104101,104102,104105,104131,104648,104696,104697,104990,104992],6377563396e-3:[4001,4188,4277,4278,4279],6377340189e-3:[4002,4299,4300],6377492018e-3:[4005,4273,4817],6377483865280418e-9:[4006,4293],6378293645208759e-9:[4007,4157,4302,4738,5464],63782064e-1:[4008,4127,4128,4129,4135,4136,4137,4138,4139,4169,4216,4242,4253,4267,4608,4609,4638,4675,4683,4695,4717,4723,4726,4995,5451,5467,37220,37239,37243,37252,37260,104e3,104109,104112,104113,104132],6378450047e-3:[4009,4268],6378300789e-3:[4010,4281],63782492e-1:[4011,4014,4155,4193,4206,4213,4223,4226,4227,4228,4252,4261,4266,4275,4282,4296,4304,4310,4315,4671,4807,4811,4816,4821,37223,37225,104139,104140,104261,104304],6378249145e-3:[4012,4013,4132,4134,4142,4143,4175,4197,4198,4201,4209,4210,4212,4220,4222,4232,4234,4246,4250,4251,4256,4260,4263,4270,4305,4307,4600,4601,4602,4603,4604,4605,4606,4607,4620,4679,4680,4696,4697,4699,4700,4701,4703,4713,4731,4736,4743,4744,4812,4819,6881,6882,6892,6894,8694,37206,37208,37211,37228,37240,37254,104025,104026,104103,104305],6377276345e-3:[4015,4131,4144,4239,4240,4244,4682,5233,6207,37202,104256,104664,104693],6377298556e-3:[4016,4298],6377304063e-3:[4018,4245],63782983e-1:[4028,4903],63781362e-1:4032,63781363e-1:4033,6378249144808011e-9:[4034,4241],209229318e-1:[4042,4243],6377301243e-3:[4044,4145,37203],6377299151e-3:[4045,4146],637701927e-2:[4657,10256,10260,10265],63783063696e-4:[4748,4752],6377295664e-3:[4751,37006],63781365e-1:[7682,7683],63710087714e-4:104047,6378418941e-3:[104700,104726,104760],6378586581e-3:[104701,104743],6378505809e-3:104702,6378544823e-3:104703,6378490569e-3:104704,6378470757e-3:[104705,104776],6378403701e-3:[104706,104750],6378434181e-3:[104707,104724,104739,104764],6378454907e-3:104708,6378400653e-3:104709,6378567378e-3:104710,6378546957e-3:[104711,104717,104780],6378476853e-3:[104712,104736],6378411321e-3:[104713,104728],6378647541e-3:[104714,104715],6378514953e-3:[104716,104782],6378421989e-3:[104718,104770],6378481425e-3:[104719,104753,104774,104781],6378518001e-3:[104720,104725],6378521049e-3:[104721,104723,104731,104745,104748],6378464661e-3:104722,6378436619e-3:104727,6378574389e-3:[104729,104730],6378472281e-3:[104732,104756],6378498189e-3:[104733,104746],6378449421e-3:[104734,104766],6378525621e-3:[104735,104754],6378466185e-3:104737,6378496665e-3:104738,6378643579e-3:104740,6378559758e-3:104741,6378414369e-3:[104742,104763,104772],6378441801e-3:104744,6378502761e-3:[104747,104759,104773,104775],6378617061e-3:104749,6378624681e-3:[104751,104765],6378468623e-3:104752,6378445763e-3:[104755,104758,104761],6378670401e-3:104757,6378438753e-3:104762,6378543909e-3:104767,6378605783e-3:104768,6378540861e-3:104769,6378443325e-3:[104771,104784],6378548481e-3:104777,6378463746e-3:104778,6378426561e-3:104779,6378453688e-3:104783,6378530193e-3:104785,6378376271e-3:[104800,104828],637847192e-2:104801,6378472931e-3:104802,6378411351e-3:104803,6378380991e-3:104805,637841496e-2:104806,637834509e-2:[104807,104819,104844,104870],6378412542e-3:104808,6378470401e-3:104809,6378376331e-3:104810,6378379031e-3:104811,6378407621e-3:104812,6378376811e-3:[104813,104827],637831392e-2:104814,637841493e-2:104815,6378413021e-3:104816,6378380381e-3:104817,6378530851e-3:104818,6378591521e-3:104820,6378378881e-3:104821,6378408481e-3:[104822,104832],6378375601e-3:[104823,104838],6378408041e-3:104824,6378655071e-3:104825,6378409151e-3:104826,63783157e-1:[104829,104840,104845,104851],637828586e-2:[104830,104835,104859],6378379301e-3:104831,6378560121e-3:104833,6378531821e-3:104834,63785006e-1:104836,6378376041e-3:104837,6378406601e-3:104839,6378438991e-3:104841,637834542e-2:104842,637859386e-2:104843,6378381271e-3:[104846,104847],6378413671e-3:104848,6378344377e-3:104849,6378563891e-3:104850,6378408091e-3:104852,6378377671e-3:104853,6378472751e-3:104854,6378412511e-3:104855,6378407281e-3:104856,6378534451e-3:104857,6378406051e-3:104858,6378532921e-3:104860,6378380091e-3:104861,6378408941e-3:104862,6378624171e-3:104863,6378377411e-3:104864,6378474591e-3:104865,6378407141e-3:104866,6378376871e-3:104867,6378375251e-3:104868,6378405971e-3:104869,6378437651e-3:104871};function det(){for(const t in rM)delete rM[t]}class Ht{constructor(){this.x=Be.getNAN(),this.y=Be.getNAN()}static getNAN(){return new Ht}static constructPoint2D(e){const i=new Ht;return i.x.set(e.x),i.y.set(e.y),i}static constructCoords(e,i){const n=new Ht;return n.x.set(e),n.y.set(i),n}static constructCoordsE(e,i){const n=new Ht;return n.setCoordsE(e,i),n}get 0(){return this.x.clone()}set 0(e){this.x.setE(e)}get 1(){return this.y.clone()}set 1(e){this.y.setE(e)}clone(){return new Ht().setE(this)}setCoords(e,i){return this.x.set(e),this.y.set(i),this}setCoordsE(e,i){return this.x.setE(e),this.y.setE(i),this}set(e){return this.x.set(e.x),this.y.set(e.y),this}setE(e){return this.x.setE(e.x),this.y.setE(e.y),this}setWithEps(e,i){return this.x.setWithEps(e.x,i),this.y.setWithEps(e.y,i),this}getUnitVector(){const e=this.clone();return e.normalize(),e}sqrLength(){return this.x.sqr().addE(this.y.sqr())}length(){return this.sqrLength().sqrt()}mulE(e){const i=new Ht;return i.setCoordsE(this.x.mulE(e),this.y.mulE(e)),i}mul(e){const i=new Ht;return i.setCoordsE(this.x.mul(e),this.y.mul(e)),i}mulThis(e){return this.x.mulThis(e),this.y.mulThis(e),this}divE(e){return this.clone().divThisE(e)}divThisE(e){return this.x.divThisE(e),this.y.divThisE(e),this}normalize(){const e=this.length();e.value()===0?(this.x=hm.clone(),this.y=Bx.clone()):(this.x.divThisE(e),this.y.divThisE(e))}addE(e){return this.clone().addThisE(e)}addThisE(e){return this.x.addThisE(e.x),this.y.addThisE(e.y),this}subE(e){return this.clone().subThisE(e)}subThisE(e){return this.x.subThisE(e.x),this.y.subThisE(e.y),this}static distance(e,i){return e.subE(i).length()}negateThis(){return this.x.negateThis(),this.y.negateThis(),this}eq(e){return this.x.eq(e.x)&&this.y.eq(e.y)}isZero(){return this.x.isZero()&&this.y.isZero()}isTrueZero(){return!this.x.value()&&!this.y.value()}rotateDirect(e,i){const n=this.x.mulE(e).subThisE(this.y.mulE(i)),s=this.x.mulE(i).addThisE(this.y.mulE(e));return this.x.setE(n),this.y.setE(s),this}rotateReverse(e,i){const n=this.x.mulE(e).addThisE(this.y.mulE(i)),s=this.x.negate().mulThisE(i).addThisE(this.y.mulE(e));return this.x.setE(n),this.y.setE(s),this}dotProduct(e){return this.x.mulE(e.x).addE(this.y.mulE(e.y))}crossProduct(e){return this.x.mulE(e.y).subE(this.y.mulE(e.x))}value(){return Y.construct(this.x.value(),this.y.value())}}class tC{constructor(){this.a11=new Be(1),this.a12=new Be(0),this.a21=new Be(0),this.a22=new Be(1)}clone(){const e=new tC;return e.a11.setE(this.a11),e.a12.setE(this.a12),e.a21.setE(this.a21),e.a22.setE(this.a22),e}assign(e){return this.a11.setE(e.a11),this.a12.setE(e.a12),this.a21.setE(e.a21),this.a22.setE(e.a22),this}mulThis(e){const i=this.a11.mulE(e.a11).addThisE(this.a12.mulE(e.a21)),n=this.a11.mulE(e.a12).addThisE(this.a12.mulE(e.a22)),s=this.a21.mulE(e.a11).addThisE(this.a22.mulE(e.a21)),r=this.a21.mulE(e.a12).addThisE(this.a22.mulE(e.a22));return this.a11=i,this.a12=n,this.a21=s,this.a22=r,this}mulLeftThis(e){const i=e.clone();return this.assign(i.mulThis(this)),this}det(){return this.a11.mulE(this.a22).subThisE(this.a12.mulE(this.a21))}invertThis(){const e=this.det();if(e.value()!==0){const i=this.a22.divE(e),n=this.a12.negate().divThisE(e),s=this.a21.negate().divThisE(e),r=this.a11.divE(e);this.a11=i,this.a12=n,this.a21=s,this.a22=r}else this.setZero();return!e.isZero()}transposeThis(){return this.a21=Et(this.a12,this.a12=this.a21),this}transformPoint(e){return K(0),new Ht}eigenValues(e){return K(0),0}eigenVectors(e,i){return K(0),0}eigenSymmetric(e,i){const n=this.a12.clone();n.addThisE(this.a21),n.mulThisByPower2(.5);let s=new Be(1),r=new Be(0);if(n.isZero())e[0].setE(this.a11),e[1].setE(this.a22);else{const o=new Be(1);if(this.a11.ne(this.a22)){const l=this.a11.subE(this.a22).divE(n);l.mulThisByPower2(.5);const c=l.sqr();o.setE(l),o.absThis(),o.subThisE(c.add(1).sqrtThis()),l.gt(Bx)&&o.negateThis();const f=o.sqr().addThis(1).sqrtThis().invThis();r=o.mulE(f),s.setE(f);const y=o.mulE(n);e[0]=this.a11.addE(y),e[1]=this.a22.subE(y)}else s=new Be(1/Math.sqrt(2)),r=s.clone(),e[0]=this.a11.addE(n),e[1]=this.a22.subE(n)}i[0].x=s.toDouble(),i[0].y=r.toDouble(),i[1].x=r.negate().toDouble(),i[1].y=s.toDouble(),Math.abs(e[0].toDouble())>Math.abs(e[1].toDouble())&&(e[1]=Et(e[0],e[0]=e[1]),i[1]=Et(i[0],i[0]=i[1]))}setZero(){this.a11.set(0),this.a21.set(0),this.a12.set(0),this.a22.set(0)}}var Iv=br;function s1(t,e){const i=t.getStartXY();if(i.equals(e.getStartXY())||i.equals(e.getEndXY()))return!0;const n=t.getEndXY();return!!n.equals(e.getStartXY())||!!n.equals(e.getEndXY())}function A7(t,e){let i=t.calculateLowerLength2D();return!(i>e)&&(!!t.isLine()||(i=t.calculateUpperLength2D(),i<=e||e!==0&&t.calculateLength2D()<=e))}function oB(t,e){const i=t.getEndXY().sub(t.getStartXY()).length(),n=t.calculateUpperLength2D()-i<=e[0];return e[0]*=.1,n}function O1e(t,e,i,n,s,r,o,l){let c=t.calculateUpperLength2D(),f=e.calculateUpperLength2D(),y=t,_=e,x=!1;c>f&&(_=Et(y,y=_),n=Et(i,i=n),f=Et(c,c=f),x=!0);const S=i===0;{o[0]=S?1:0;const W=y.getCoord2D(o[0]);l[0]=_.getClosestCoordinate(W,!1);const J=_.getCoord2D(l[0]);if(Y.distance(W,J)<=s){const re=[.5,.75,.25,.1,.9];let ne=!0;for(let oe=0;oe<re.length;oe++)if(W.assign(y.getCoord2D(re[oe])),!_.isCloserThanDistance(W,new Ze(0,1),s)){ne=!1;break}if(ne)return x&&(l[0]=Et(o[0],o[0]=l[0])),1}}if(c<=3*s)return 0;let P=hs(Math.max(s/c,.1),0,.5),A=.01*s,D=0,N=0,F=P,G=-1,V=0,B=1/32;for(let W=0;;W++){K(W<4095);const J=S?P:1-P,re=y.getCoord2D(J),ne=_.getClosestCoordinate(re,!1);if(ne===n)return V;const oe=_.getCoord2D(ne),pe=Y.distance(re,oe);if(W===0&&(G=pe),pe<=A?(B=.5,N=pe,D=P):(F=P,G=pe),Math.abs(N-G)>.1*A&&F-D>1e-16)P=Hi(D,F,B);else{if(o[V]=J,l[V]=ne,x&&(l[V]=Et(o[V],o[V]=l[V])),r===1||V===1)return V===1&&o[0]>o[1]&&(o[1]=Et(o[0],o[0]=o[1]),l[1]=Et(l[0],l[0]=l[1])),V+1;V++,D=F,N=G,F=.8,G=-1,P=.8,B=1/32,A=10*s,W=0}}}function MS(t,e,i,n,s,r,o,l,c){if(An(i,0,1)&&An(n,0,1)&&Y.distance(t.getCoord2D(i),e.getCoord2D(n))===0){const y=new Ht,_=ts();if(t.queryDerivative(new Be(i,_),y),y.isTrueZero()){const D=i===1?-1e-12:1e-12;t.queryDerivative(new Be(i,_).add(D),y)}i===1&&y.negateThis();const x=new Ht;if(e.queryDerivative(new Be(n,_),x),x.isTrueZero()){const D=i===1?-1e-12:1e-12;e.queryDerivative(new Be(n,_).add(D),x)}n===1&&x.negateThis(),y.isZero()||y.normalize(),x.isZero()||x.normalize();const S=y.dotProduct(x),P=y.crossProduct(x);P.scaleError(3);const A=()=>{{const D=t.calculateUpperLength2D(),N=e.calculateUpperLength2D();return Math.min(.01*s/Math.min(D,N),1e-10)}};if(S.ge(Bx)&&(P.isZero()||Math.abs(P.value())<A()))return O1e(t,e,i,n,s,r,o,l)}return 0}function fet(t,e,i){return K(t.isCurve()||e.isCurve()),!!(t.getStartXY().equals(e.getStartXY())&&MS(t,e,0,0,i,2,[0,0],[0,0])||t.getEndXY().equals(e.getEndXY())&&MS(t,e,1,1,i,2,[0,0],[0,0])||t.getStartXY().equals(e.getEndXY())&&MS(t,e,0,1,i,2,[0,0],[0,0])||t.getEndXY().equals(e.getStartXY())&&MS(t,e,1,0,i,2,[0,0],[0,0]))}function aB(t,e){t.m_XStart=e.x,t.m_YStart=e.y}function oie(t,e,i){t.m_XStart=e,t.m_YStart=i}function lB(t,e){t.m_XEnd=e.x,t.m_YEnd=e.y}function aie(t,e,i){t.m_XEnd=e,t.m_YEnd=i}function pet(t,e,i){e?t.m_XEnd===i.x&&t.m_YEnd===i.y||(t.m_XEnd=i.x,t.m_YEnd=i.y,t.endPointModified()):t.m_XStart===i.x&&t.m_YStart===i.y||(t.m_XStart=i.x,t.m_YStart=i.y,t.endPointModified())}function lie(t,e,i){t.m_description.hasZ()||t.addAttribute(1),e?t.m_XEnd===i.x&&t.m_YEnd===i.y||(t.m_XEnd=i.x,t.m_YEnd=i.y,t.endPointModified()):t.m_XStart===i.x&&t.m_YStart===i.y||(t.m_XStart=i.x,t.m_YStart=i.y,t.endPointModified()),t.m_attributes[(t.m_description.getTotalComponentCount()-2)*e]=i.z}function cie(t,e,i){i.assignVertexDescription(t.m_description);const n=e===0?t.m_XStart:t.m_XEnd,s=e===0?t.m_YStart:t.m_YEnd;i.setXYCoords(n,s);for(let r=1;r<t.m_description.getAttributeCount();r++){const o=t.m_description.getSemantics(r);for(let l=0,c=Iv.getComponentCount(o);l<c;l++){const f=Bh(t,e,o,l);i.setAttributeBasic(o,l,f)}}}function uie(t,e,i){i.isEmpty()&&b7(""),pet(t,e,i.getXY());const n=i.getDescription();n!==t.m_description&&t.mergeVertexDescription(n);for(let s=1,r=n.getAttributeCount();s<r;s++){const o=n.getSemantics(s),l=Iv.getComponentCount(o);for(let c=0;c<l;c++)Bp(t,e,o,c,i.getAttributeAsDbl(o,c))}}function Bh(t,e,i,n){if((e<0||e>1)&&Mi(""),i===0)return(n<0||n>=2)&&Mi(""),e===0?n===0?t.m_XStart:t.m_YStart:n===0?t.m_XEnd:t.m_YEnd;const s=Iv.getComponentCount(i);(n<0||n>=s)&&Mi("");const r=t.m_description.getAttributeIndex(i);return r>=0?t.m_attributes[e*(t.m_description.getTotalComponentCount()-2)+t.m_description.getPointAttributeOffset(r)-2+n]:Iv.getDefaultValue(i)}function Bp(t,e,i,n,s){if((e<0||e>1)&&Mi(""),i===0)return e===0?n===0?t.m_XStart=s:n===1?t.m_YStart=s:Mi(""):e===1?n===0?t.m_XEnd=s:n===1?t.m_YEnd=s:Mi(""):Mi(""),void t.endPointModified();const r=Iv.getComponentCount(i);(n<0||n>=r)&&Mi("");let o=t.m_description.getAttributeIndex(i);o<0&&(t.addAttribute(i),o=t.m_description.getAttributeIndex(i)),t.m_attributes[e*(t.m_description.getTotalComponentCount()-2)+t.m_description.getPointAttributeOffset(o)-2+n]=s}function met(t,e){if(t===e)return;e.isEmpty()&&b7("");const i=e.getDescription();i!==t.m_description&&t.mergeVertexDescription(i);for(let n=1,s=i.getAttributeCount();n<s;n++){const r=i.getSemantics(n),o=Iv.getComponentCount(r);for(let l=0;l<o;l++){let c=Bh(e,0,r,l);Bp(t,0,r,l,c),c=Bh(e,1,r,l),Bp(t,1,r,l,c)}}}function get(t,e){const i=T7();I7(e,t.m_description,i);let n=null;const s=e.getTotalComponentCount()-2,r=t.m_description?t.m_description.getTotalComponentCount()-2:0;if(s>0&&(n=new Array(2*s),fs(n,e.getDefaultPointAttributes(),0,2,s),fs(n,e.getDefaultPointAttributes(),s,2,s),t.m_description!==null))for(let o=1;o<e.getAttributeCount();o++){const l=i[o];if(l!==-1){const c=t.m_description.getPointAttributeOffset(l)-2,f=e.getPointAttributeOffset(o)-2,y=Iv.getComponentCount(e.getSemantics(o));for(let _=0;_<y;++_)n[f]=t.m_attributes[c],n[s+f]=t.m_attributes[r+c]}}t.m_attributes=n,t.m_description=e}function mf(t){return t.absNorm()*Cv()}function Ll(t,e){return Math.max(t.absNorm(),e.absNorm())*Cv()}function Zc(t,e,i){const n=new Xr;t.queryEnvelopeW(Ze.unit(),n);const s=new Xr;return e.queryEnvelopeW(Ze.unit(),s),s.inflate(i),!n.isIntersectingW(s)}function cB(t,e,i){const n=tM(t,i),s=tM(e,i);n.sort((r,o)=>r.compare(o)),s.sort((r,o)=>r.compare(o));for(let r=0;r<3;r++){if(n[r].compare(s[r])<0)return-1;if(n[r].compare(s[r])!==0)return 1}return 0}var KN=br;class k5{constructor(e){if(e.copy)this.m_XStart=e.copy.m_XStart,this.m_YStart=e.copy.m_YStart,this.m_XEnd=e.copy.m_XEnd,this.m_YEnd=e.copy.m_YEnd,this.m_description=e.copy.m_description,this.m_attributes=null,this.m_description&&this.m_description.getTotalComponentCount()-2&&(this.m_attributes=e.copy.m_attributes.slice());else{if(e.move)return this.m_description=e.move.m_description,e.move.m_description=null,this.m_attributes=e.move.m_attributes,e.move.m_attributes=null,this.m_XStart=e.move.m_XStart,this.m_YStart=e.move.m_YStart,this.m_XEnd=e.move.m_XEnd,void(this.m_YEnd=e.move.m_YEnd);if(e.XStart!==void 0)return this.m_XStart=e.XStart,this.m_YStart=e.YStart,this.m_XEnd=e.XEnd,this.m_YEnd=e.YEnd,this.m_attributes=null,this.m_description=e.vd?e.vd:Uo(),void(e.vd&&this.setDefaultAttributeValues());if(e.ZStart!==void 0)return this.m_XStart=e.XStart,this.m_YStart=e.YStart,this.m_XEnd=e.XEnd,this.m_YEnd=e.YEnd,this.m_description=e.vd?e.vd:KE(),void(e.vd?(this.setDefaultAttributeValues(),this.addAttribute(1),this.m_attributes[0]=e.ZStart,this.m_attributes[this.m_description.getTotalComponentCount()-2]=e.ZEnd):this.m_attributes=[e.ZStart,e.ZEnd]);if(e.start)return this.m_XStart=e.start.x,this.m_YStart=e.start.y,this.m_XEnd=e.end.x,this.m_YEnd=e.end.y,this.m_attributes=null,void(this.m_description=Uo());if(e.start3D)return this.m_XStart=e.start3D.x,this.m_YStart=e.start3D.y,this.m_XEnd=e.end3D.x,this.m_YEnd=e.end3D.y,this.m_description=e.vd?e.vd:KE(),void(e.vd?(this.setDefaultAttributeValues(),this.addAttribute(1),this.m_attributes[0]=e.start3D.z,this.m_attributes[this.m_description.getTotalComponentCount()-2]=e.end3D.z):this.m_attributes=[e.start3D.z,e.end3D.z]);K(0),this.m_XStart=this.m_YStart=this.m_XEnd=this.m_YEnd=Number.NaN}}setDefaultAttributeValues(){const e=this.m_description.getTotalComponentCount()-2;e>0&&(this.m_attributes===null&&(this.m_attributes=ji(2*e,Number.NaN)),fs(this.m_attributes,this.m_description.getDefaultPointAttributes(),0,2,e),fs(this.m_attributes,this.m_description.getDefaultPointAttributes(),e,2,e))}absNormXYZ(e){return Bn("not implemented"),0}snapControlPoints3D(){return Bn("not implemented"),!1}setCoordsForIntersector3D(e,i,n){Bn("not implemented")}transformAttribute(e,i,n,s,r){Bn("")}mergeVertexDescriptionImpl(e){const i=I5(this.getDescription(),e);this.assignVertexDescription(i)}changeEndPoints(e,i){const n=e.getXY(),s=i.getXY();this.changeEndPoints2D(n,s);let r=e.getDescription();r!==this.getDescription()&&this.mergeVertexDescription(r),r=i.getDescription(),r!==this.getDescription()&&this.mergeVertexDescription(r);for(let o=1,l=r.getAttributeCount();o<l;o++){const c=r.getSemantics(o),f=KN.getComponentCount(c);for(let y=0;y<f;y++)Bp(this,0,c,y,e.getAttributeAsDbl(c,y)),Bp(this,1,c,y,i.getAttributeAsDbl(c,y))}}getStartXY(){return new Y(this.m_XStart,this.m_YStart)}setStartXY(e){this.m_XStart=e.x,this.m_YStart=e.y,this.endPointModified()}setStartXYCoords(e,i){this.m_XStart=e,this.m_YStart=i,this.endPointModified()}getStartXYZ(){return K(0),new ii(0,0,0)}setStartXYZ(e){K(0)}setStartXYZCoords(e,i,n){lie(this,0,ii.construct(e,i,n))}queryStart(e){cie(this,0,e)}setStart(e){uie(this,0,e)}setStart2D(e){this.setStartXY(e)}getStartAttributeAsDbl(e,i){return Bh(this,0,e,i)}getStartAttributeAsInt(e,i){return K(0),0}setStartAttribute(e,i,n){Bp(this,0,e,i,n)}setStartAttributesFromPoint(e,i){K(0)}setEndAttributesFromPoint(e,i){K(0)}getStartX(){return this.m_XStart}getStartY(){return this.m_YStart}getStartZ(){return K(0),0}getEndX(){return this.m_XEnd}getEndY(){return this.m_YEnd}getEndZ(){return K(0),0}getEndXY(){return new Y(this.m_XEnd,this.m_YEnd)}setEndXY(e){this.m_XEnd=e.x,this.m_YEnd=e.y,this.endPointModified()}setEndXYCoords(e,i){this.m_XEnd=e,this.m_YEnd=i,this.endPointModified()}getEndXYZ(){return K(0),new ii(0,0,0)}setEndXYZ(e){K(0)}setEndXYZCoords(e,i,n){lie(this,1,ii.construct(e,i,n))}queryEnd(e){cie(this,1,e)}setEnd(e){uie(this,1,e)}setEnd2D(e){this.setEndXY(e)}getEndAttributeAsDbl(e,i){return Bh(this,1,e,i)}getEndAttributeAsInt(e,i){return K(0),Math.trunc(0)}setEndAttribute(e,i,n){Bp(this,1,e,i,n)}getDimension(){return 1}copyTo(e){if(this===e)return;e.getGeometryType()!==this.getGeometryType()&&Je("");const i=e;i.assignVertexDescription(this.m_description),i.m_attributes&&fs(i.m_attributes,this.m_attributes,0,0,2*(this.m_description.getTotalComponentCount()-2)),i.m_XStart=this.m_XStart,i.m_YStart=this.m_YStart,i.m_XEnd=this.m_XEnd,i.m_YEnd=this.m_YEnd,this.copyToImpl(i)}isEmpty(){return this.isEmptyImpl()}isClosed(){return this.m_XStart===this.m_XEnd&&this.m_YStart===this.m_YEnd}setEmpty(){}calculateArea2D(){return 0}queryInterval(e,i){const n=Ze.constructEmpty();return n.vmin=Bh(this,0,e,i),n.vmax=n.vmin,n.mergeNeCoordinate(Bh(this,1,e,i)),n}calculateLength3D(e){return K(0),0}getCoord3D(e){return K(0),{}}getCoord2D(e){const i=Y.getNAN();return this.queryCoord2D(e,i),i}queryCoord3D(e,i){K(0)}getCoordZ(e){return K(0),0}queryCoord(e,i){i.assignVertexDescription(this.m_description),i.setXY(this.getCoord2D(e));for(let n=1,s=this.m_description.getAttributeCount();n<s;n++){const r=this.m_description.getSemantics(n),o=KN.getComponentCount(r);for(let l=0;l<o;l++){const c=this.getAttributeAsDbl(e,r,l);i.setAttributeBasic(r,l,c)}}}isCloserThanDistance(e,i,n){const s=xe.constructEmpty();if(this.queryLooseEnvelopeOnInterval(i,s),s.distance(e)>n)return!1;const r=this.getClosestCoordinateOnInterval(e,i,n);return!Number.isNaN(r)&&Y.distance(e,this.getCoord2D(r))<=n}isMonotoneQuickAndDirty(){return!1}isTrue3D(){return!1}getReversed(){const e=this.clone();return e.reverse(),e}reverse(){this.m_XEnd=Et(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=Et(this.m_YStart,this.m_YStart=this.m_YEnd),this.reverseImpl();for(let e=1,i=this.m_description.getAttributeCount();e<i;e++){const n=this.m_description.getSemantics(e);for(let s=0,r=KN.getComponentCount(n);s<r;s++){const o=Bh(this,0,n,s);Bp(this,0,n,s,Bh(this,1,n,s)),Bp(this,1,n,s,o)}}return this.afterCompletedModification(),this}isEmptyImpl(){return!1}isCircular(){return!1}distance(e,i,n,s){if(!i&&this.isIntersecting(e,0,!1)){if(n!==null||s!==null){const f=new Array(9),y=new Array(9),_=this.intersect(e,null,f,y,0);K(_<=9),_===0&&xt(""),n!==null&&(n[0]=f[0]),s!==null&&(s[0]=y[0])}return 0}let r,o=Number.MAX_VALUE,l=-1,c=o;return r=this.getStartXY(),l=e.getClosestCoordinate(r,!1),r.subThis(e.getCoord2D(l)),c=r.length(),c<o&&(o=c,s!==null&&(s[0]=l),n!==null&&(n[0]=0)),r=this.getEndXY(),l=e.getClosestCoordinate(r,!1),r.subThis(e.getCoord2D(l)),c=r.length(),c<o&&(o=c,s!==null&&(s[0]=l),n!==null&&(n[0]=1)),r=e.getStartXY(),l=this.getClosestCoordinate(r,!1),r.subThis(this.getCoord2D(l)),c=r.length(),c<o&&(o=c,n!==null&&(n[0]=l),s!==null&&(s[0]=0)),r=e.getEndXY(),l=this.getClosestCoordinate(r,!1),r.subThis(this.getCoord2D(l)),c=r.length(),c<o&&(o=c,n!==null&&(n[0]=l),s!==null&&(s[0]=1)),o}calculateSubLengthFromStart(e){return this.tToLength(e)}calculateSubLength(e,i){return i===e?0:this.tToLength(i)-this.tToLength(e)}static recalculateParentT(e,i,n){return Hi(e,i,n)}moveTo(e){const i=this.isClosed(),n=new _i;n.setShift(e.sub(this.getStartXY())),this.applyTransformation(n),i?this.changeEndPoints2D(e,e):this.changeEndPoints2D(e,this.getEndXY())}moveTo3D(e){K(0)}getDescription(){return this.m_description}assignVertexDescription(e){get(this,e)}mergeVertexDescription(e){this.m_description!==e&&(this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=M5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){if(!this.m_description.hasAttribute(e))return;const i=sB(this.m_description,e);this.assignVertexDescription(i)}dropAllAttributes(){const e=Uo();e!==this.m_description&&this.assignVertexDescription(e)}swap(e){K(0)}equals(e,i){if(this.getGeometryType()!==e.getGeometryType())return!1;const n=i===void 0;n&&(i=0);const s=e;if(this===s)return!0;if(this.m_description!==s.m_description||Math.abs(this.m_XStart-s.m_XStart)>i||Math.abs(this.m_XEnd-s.m_XEnd)>i||Math.abs(this.m_YStart-s.m_YStart)>i||Math.abs(this.m_YEnd-s.m_YEnd)>i)return!1;for(let r=0,o=2*(this.m_description.getTotalComponentCount()-2);r<o;r++)if(!T5(this.m_attributes[r],s.m_attributes[r],i))return!1;return n?this.equalsImpl(s):this.equalsImplTol(s,i)}getImpl(){return this}setAttributeBasic(e,i,n){if(this.addAttribute(e),e===0&&this.isCurve()){(i<0||i>1)&&Je("");const s=new _i,r=i===0?n:0,o=i===1?n:0;s.setShiftCoords(r,o),i===0?s.xx=0:s.yy=0,this.applyTransformation(s)}else this.setStartAttribute(e,i,n),this.setEndAttribute(e,i,n)}replaceNaNs(e,i){K(0)}}k5.s_maxMonotonicPartParams=8;class D5 extends k5{constructor(e){super(e)}}class yet extends D5{isTrue3D(){return!0}constructor(e){super(e)}}function bl(t,e,i){uB(e,t.getStartXY(),t.getEndXY(),i)}function uB(t,e,i,n){cr(e,i,t,n)}function JN(t,e){return Hi(t.m_XStart,t.m_XEnd,e)}function hie(t,e){return Hi(t.m_YStart,t.m_YEnd,e)}function vet(t,e,i){const n=Ht.constructPoint2D(t.getStartXY()),s=Ht.constructPoint2D(t.getEndXY());i.setCoordsE(s.x.subE(n.x),s.y.subE(n.y))}function $1e(t,e,i){e.value()<=.5?af(2,Ht.constructPoint2D(t.getStartXY()),Ht.constructPoint2D(t.getEndXY()),e,i):lf(2,Ht.constructPoint2D(t.getStartXY()),Ht.constructPoint2D(t.getEndXY()),e,i)}function _et(t,e,i){t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,t.m_YEnd=i.y,t.afterCompletedModification()}function R1e(t){if(t.m_YEnd<t.m_YStart||t.m_YEnd===t.m_YStart&&t.m_XEnd<t.m_XStart){t.m_XEnd=Et(t.m_XStart,t.m_XStart=t.m_XEnd),t.m_YEnd=Et(t.m_YStart,t.m_YStart=t.m_YEnd);for(let e=0,i=t.m_description.getTotalComponentCount()-2;e<i;e++)t.m_attributes[e+i]=Et(t.m_attributes[e],t.m_attributes[e]=t.m_attributes[e+i])}}function bet(t,e,i,n){let s=0;if((t.m_XStart===e.m_XStart&&t.m_YStart===e.m_YStart||t.m_XStart===e.m_XEnd&&t.m_YStart===e.m_YEnd)&&(s++,!n))return 1;if(t.m_XEnd===e.m_XStart&&t.m_YEnd===e.m_YStart||t.m_XEnd===e.m_XEnd&&t.m_YEnd===e.m_YEnd){if(s++,s===2)return 2;if(!n)return 1}return e.isIntersectingPoint(t.getStartXY(),i,!0)||e.isIntersectingPoint(t.getEndXY(),i,!0)||t.isIntersectingPoint(e.getStartXY(),i,!0)||t.isIntersectingPoint(e.getEndXY(),i,!0)?4:n&&s?0:wet(t,e)?4:0}function k7(t,e,i,n,s,r,o,l){n!==null&&(n.length=2),s!==null&&(s.length=2),i!==null&&(i.length=2);const c=xet(t,e,2,i,n,s,r,o,l);return n&&(n.length=c),s&&(s.length=c),i&&(i.length=c),c}function xet(t,e,i,n,s,r,o,l,c){const f=Zb(t,e.getStartXY(),o,!1),y=Zb(t,e.getEndXY(),o,!1),_=Zb(e,t.getStartXY(),o,!1),x=Zb(e,t.getEndXY(),o,!1);let S=0,P=0;if(!Number.isNaN(f)){let D=!1;l&&An(f,0,1)&&t.getCoord2D(f).isEqualPoint2D(e.getStartXY())&&(S++,D=!0),D||(s&&(s[P]=f),r&&(r[P]=0),n&&(n[P]=Y.construct(e.m_XStart,e.m_YStart)),P++)}if(!Number.isNaN(y)){let D=!1;l&&An(y,0,1)&&t.getCoord2D(y).isEqualPoint2D(e.getEndXY())&&(S++,D=!0),D||(i>P&&(s&&(s[P]=y),r&&(r[P]=1),n&&(n[P]=Y.construct(e.m_XEnd,e.m_YEnd))),P++)}if(P!==2&&!Number.isNaN(_)&&!(f===0&&_===0||y===0&&_===1)){let D=!1;l&&An(_,0,1)&&e.getCoord2D(_).isEqualPoint2D(t.getStartXY())&&(S++,D=!0),D||(i>P&&(s&&(s[P]=0),r&&(r[P]=_),n&&(n[P]=Y.construct(t.m_XStart,t.m_YStart))),P++)}if(P!==2&&!Number.isNaN(x)&&!(f===1&&x===0||y===1&&x===1)){let D=!1;l&&An(x,0,1)&&e.getCoord2D(x).isEqualPoint2D(t.getEndXY())&&(S++,D=!0),D||(i>P&&(s&&(s[P]=1),r&&(r[P]=x),n&&(n[P]=Y.construct(e.m_XEnd,e.m_YEnd))),P++)}if(P>0)return c&&(r=Et(s,s=r)),P===2&&i>=2&&s&&s[0]>s[1]&&(s[1]=Et(s[0],s[0]=s[1]),r&&(r[1]=Et(r[0],r[0]=r[1])),n&&(n[1]=Et(n[0],n[0]=n[1]))),P;if(S>0)return 0;const A=Eet(t,e,o);return Number.isNaN(A.x)?0:(n&&(n[0]=t.getCoord2D(A.x)),s&&(s[0]=A.x),r&&(r[0]=A.y),1)}function wet(t,e){const i=yT(t,e.m_XStart,e.m_YStart),n=yT(t,e.m_XEnd,e.m_YEnd);if(i<0&&n<0||i>0&&n>0)return!1;const s=yT(e,t.m_XStart,t.m_YStart),r=yT(e,t.m_XEnd,t.m_YEnd);return s<0&&r<0||s>0&&r>0?!1:Hz(t)>Hz(e)?fie(t,e):fie(e,t)}function Zb(t,e,i,n){const s=Y.getNAN(),r=Y.getNAN();let o=!1;t.m_YEnd<t.m_YStart||t.m_YEnd===t.m_YStart&&t.m_XEnd<t.m_XStart?(s.setCoords(t.m_XEnd,t.m_YEnd),r.setCoords(t.m_XStart,t.m_YStart),o=!0):(s.setCoords(t.m_XStart,t.m_YStart),r.setCoords(t.m_XEnd,t.m_YEnd));const l=o?1:0,c=o?0:1,f=Y.getNAN();f.setSub(e,s);let y=f.length(),_=3*y*ts();if(y<=Math.max(i,_))return n&&y===0?Number.NaN:l;if(f.setSub(e,r),y=f.length(),_=3*y*ts(),y<=Math.max(i,_))return n&&y===0?Number.NaN:c;f.setCoords(r.x-s.x,r.y-s.y);const x=f.length();if(x>0){const S=1/x;f.scale(S);const P=Y.getNAN();P.setSub(e,s);const A=P.dotProduct(f),D=8*P.dotProductAbs(f)*ts();f.leftPerpendicularThis();const N=P.dotProduct(f),F=8*P.dotProductAbs(f)*ts(),G=Math.max(i,D);if(A<-G||A>x+G)return Number.NaN;const V=Math.max(i,F);if(Math.abs(N)<=V){let B=A*S;B=hs(B,0,1);const W=Y.getNAN();if(uB(B,s,r,W),Y.distance(W,e)<=i){if(B<.5){if(Y.distance(W,s)<=i&&Y.distance(e,s)<=i)return l}else if(Y.distance(W,r)<=i&&Y.distance(e,r)<=i)return c;return o?1-B:B}}}return Number.NaN}function yT(t,e,i){const n=Y.getNAN();n.setCoords(e,i),n.subThis(t.getStartXY());const s=Y.getNAN();s.setSub(t.getEndXY(),t.getStartXY());const r=s.crossProduct(n),o=4*ts()*(Math.abs(s.x*n.y)+Math.abs(s.y*n.x));return r>o?-1:r<-o?1:0}function die(t,e,i,n){const s=n?t.m_XStart:t.m_XEnd,r=n?t.m_YStart:t.m_YEnd,o=Y.getNAN();return o.x=e.getEndX()-s,o.y=e.getEndY()-r,i.dotProduct(o)>3*ts()*i.dotProductAbs(o)?(o.x=e.getStartX()-s,o.y=e.getStartY()-r,i.dotProduct(o)<=3*ts()*i.dotProductAbs(o)):!0}function fie(t,e){const i=Y.getNAN();return i.x=t.m_XEnd-t.m_XStart,i.y=t.m_YEnd-t.m_YStart,!!die(t,e,i,!1)&&(i.negateThis(),!!die(t,e,i,!0))}function Hz(t){const e=t.m_XStart-t.m_XEnd,i=t.m_YStart-t.m_YEnd;return e*e+i*i}function Eet(t,e,i){const n=t.m_XEnd-t.m_XStart,s=t.m_YEnd-t.m_YStart,r=e.m_XEnd-e.m_XStart,o=e.m_YEnd-e.m_YStart,l=r*s-n*o;if(l===0)return Y.getNAN();const c=4*ts()*(Math.abs(r*s)+Math.abs(n*o)),f=e.m_XStart-t.m_XStart,y=e.m_YStart-t.m_YStart,_=r*y-f*o,x=4*ts()*(Math.abs(r*y)+Math.abs(f*o)),S=_/l,P=Math.abs(l),A=(x*P+c*Math.abs(_))/(l*l)+ts()*Math.abs(S);if(S<-A||S>1+A)return Y.getNAN();const D=n*y-f*s,N=D/l,F=(4*ts()*(Math.abs(n*y)+Math.abs(f*s))*P+c*Math.abs(D))/(l*l)+ts()*Math.abs(N);if(N<-F||N>1+F)return Y.getNAN();let G=hs(S,0,1),V=hs(N,0,1);const B=Y.getNAN();bl(t,G,B);const W=Y.getNAN();if(bl(e,V,W),!i||Y.distance(B,W)>i){const J=Y.getNAN();cr(B,W,.5,J),G=t.getClosestCoordinate(J,!1),V=e.getClosestCoordinate(J,!1);const re=Y.getNAN();bl(t,G,re);const ne=Y.getNAN();bl(e,V,ne),re.subThis(ne);const oe=re.length(),pe=(t.absNorm()+e.absNorm())*Cv();if(oe>Math.max(i,pe))return Y.getNAN()}return new Y(G,V)}class QN{constructor(e){if(this.m_segFlagStream=null,this.m_xyStream=null,this.m_bCirculator=!1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_nextPathIndex=0,this.m_currentPathIndex=-1,this.m_parent=e.parent,this.m_buffer=new this.m_parent.m_segmentBufferCTor,this.m_description=e.parent.getDescription(),this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex),e.pointIndex!==void 0){(e.pointIndex<0||e.pointIndex>=e.parent.getPointCount())&&Mi("");const i=e.parent.getPathIndexFromPointIndex(e.pointIndex);this.m_currentPathIndex=i,this.m_nextPathIndex=i+1,this.m_nextSegmentIndex=e.pointIndex-e.parent.getPathStart(i),this.m_segmentCount=this.getSegmentCount(this.m_currentPathIndex)}else if(e.pathIndex!==void 0){(e.pathIndex<0||e.pathIndex>=e.parent.getPathCount()||e.segmentIndex<0)&&Mi("");const i=e.parent.isClosedPath(e.pathIndex)?0:1;e.segmentIndex>=e.parent.getPathSize(e.pathIndex)-i&&Mi(""),this.m_nextSegmentIndex=e.segmentIndex,this.m_currentPathIndex=e.pathIndex,this.m_nextPathIndex=this.m_nextSegmentIndex+1,this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex)}this.prepare(),this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1,this.m_bStripAttributes=!1,this.m_prevPathIndex=-1,this.m_prevSegmentIndex=-1,this.m_bNeedsUpdate=!1,this.m_currentPathIndex>-1&&(this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex))}stripAttributes(){this.m_bStripAttributes=!0}clone(){return K(0),this}prepare(){this.m_bCirculator=!1,this.m_parent.isEmptyImpl()?(this.m_segFlagStream=null,this.m_xyStream=null):(this.m_segFlagStream=this.m_parent.getSegmentFlagsStreamRef(),this.m_xyStream=this.m_parent.getAttributeStreamRef(0))}nextPath(){return this.m_currentPathIndex=this.m_nextPathIndex,!(this.m_currentPathIndex>=this.m_parent.getPathCount())&&(this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_segmentCount=this.getSegmentCount(this.m_currentPathIndex),this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex),this.m_nextPathIndex++,!0)}previousPath(){return this.m_nextPathIndex!==0&&(this.m_nextPathIndex--,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex),this.m_currentPathIndex=this.m_nextPathIndex,this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex),this.resetToLastSegment(),!0)}getSegmentCount(e){return this.m_parent.isEmptyImpl()?0:this.m_parent.getSegmentCountPath(e)}resetToFirstPath(){this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_nextPathIndex=0,this.m_currentPathIndex=-1,this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1}resetToLastPath(){this.m_nextPathIndex=this.m_parent.getPathCount(),this.m_currentPathIndex=-1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_pathBegin=-1}resetToPath(e){(e<0||e>this.m_parent.getPathCount())&&Mi(""),this.m_nextPathIndex=e,this.m_currentPathIndex=-1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1}isLastPath(){return this.m_currentPathIndex===this.m_parent.getPathCount()-1}isFirstSegmentInPath(){return this.m_currentSegmentIndex===0}isLastSegmentInPath(){return this.m_currentSegmentIndex===this.m_segmentCount-1}resetToFirstSegment(){this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0}resetToLastSegment(){this.m_nextSegmentIndex=this.m_segmentCount,this.m_currentSegmentIndex=-1}resetTo(e){this.m_parent!==e.m_parent&&xs(""),this.m_currentSegmentIndex=e.m_currentSegmentIndex,this.m_nextSegmentIndex=e.m_nextSegmentIndex,this.m_currentPathIndex=e.m_currentPathIndex,this.m_nextPathIndex=e.m_nextPathIndex,this.m_segmentCount=e.m_segmentCount,this.m_bCirculator=e.m_bCirculator,this.m_pathBegin=e.m_pathBegin,this.m_bCurrentPathClosed=e.m_bCurrentPathClosed,this.m_bStripAttributes=e.m_bStripAttributes,this.m_description=e.m_description}resetToVertex(e,i){if(this.m_currentPathIndex>=0&&this.m_currentPathIndex<this.m_parent.getPathCount()){const s=this.getPathBegin();if(e>=s&&e<this.m_parent.getPathEnd(this.m_currentPathIndex))return this.m_currentSegmentIndex=-1,void(this.m_nextSegmentIndex=e-s)}let n;n=i>=0&&i<this.m_parent.getPathCount()&&e>=this.m_parent.getPathStart(i)&&e<this.m_parent.getPathEnd(i)?i:this.m_parent.getPathIndexFromPointIndex(e),this.m_nextPathIndex=n+1,this.m_currentPathIndex=n,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=e-this.m_parent.getPathStart(n),this.m_segmentCount=this.getSegmentCount(n),this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex)}hasNextSegment(){return this.m_nextSegmentIndex<this.m_segmentCount}hasPreviousSegment(){return this.m_nextSegmentIndex>0}nextSegment(){return this.m_currentSegmentIndex!==this.m_nextSegmentIndex&&this.updateSegment(),this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:(this.m_nextSegmentIndex===this.m_segmentCount&&Mi("Segment_iterator_impl::next_segment"),this.m_nextSegmentIndex++),this.m_buffer.get()}previousSegment(){return this.m_bCirculator?this.m_nextSegmentIndex=(this.m_segmentCount+this.m_nextSegmentIndex-1)%this.m_segmentCount:(this.m_nextSegmentIndex===0&&Mi(""),this.m_nextSegmentIndex--),this.m_nextSegmentIndex!==this.m_currentSegmentIndex&&this.updateSegment(),this.m_buffer.get()}nextCurve(){if(!this.m_parent.hasNonLinearSegments())return this.resetToLastSegment(),null;let e=0;for(;;){if(this.m_nextSegmentIndex===this.m_segmentCount||e===this.m_segmentCount)return null;const i=this.getPathBegin()+this.m_nextSegmentIndex;if((31&this.m_segFlagStream.read(i))!==1){this.updateSegment();break}this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:this.m_nextSegmentIndex++,e++}return this.m_currentSegmentIndex!==this.m_nextSegmentIndex&&this.updateSegment(),this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:(this.m_nextSegmentIndex===this.m_segmentCount&&Mi(""),this.m_nextSegmentIndex++),this.m_buffer.get()}getPathBegin(){return this.m_pathBegin}getPathIndex(){return this.m_currentPathIndex}getStartPointIndex(){return this.getPathBegin()+this.m_currentSegmentIndex}getEndPointIndex(){return this.isClosingSegment()?this.getPathBegin():this.getStartPointIndex()+1}updateSegment(){(this.m_nextSegmentIndex<0||this.m_nextSegmentIndex>=this.m_segmentCount||this.m_currentPathIndex<0)&&Mi(""),this.m_currentSegmentIndex=this.m_nextSegmentIndex,this.m_parent.getSegmentFromPath(this.m_currentPathIndex,this.m_currentSegmentIndex,this.m_buffer,this.m_bStripAttributes)}isClosingSegment(){return this.m_bCurrentPathClosed&&this.m_currentSegmentIndex===this.m_segmentCount-1}isCurve(){return this.m_segFlagStream!==null?(31&this.m_segFlagStream.read(this.m_currentSegmentIndex))!==1:!1}isPathClosed(){return this.m_bCurrentPathClosed}setCirculator(e){this.m_bCirculator=e}getImpl(){return this}}class oM{constructor(e){this.m_rasterizedGeometry=null,this.m_quadTree=null,this.m_quadTreeForPaths=null,this.m_refCount=1,e&&e.copyTo(this)}assignCopy(e){return K(0),this}getRasterizedGeometry(){return this.m_rasterizedGeometry}copyTo(e){e!==this&&(K(e.uniqueUse()),e.m_quadTree=this.m_quadTree,e.m_quadTreeForPaths=this.m_quadTreeForPaths,e.m_rasterizedGeometry=this.m_rasterizedGeometry)}clone(){const e=new oM;return this.copyTo(e),e}uniqueUse(){return this.m_refCount===1}addRef(){++this.m_refCount}release(){--this.m_refCount==0&&(this.m_rasterizedGeometry=null,this.m_quadTree=null,this.m_quadTreeForPaths=null)}setRasterizedGeometry(e){K(this.uniqueUse())}setQuadTree(e){K(this.uniqueUse()),this.m_quadTree=e}setQuadTreeForPaths(e){K(this.uniqueUse()),this.m_quadTreeForPaths=e}getQuadTree(){return this.m_quadTree}getQuadTreeForPaths(){return this.m_quadTreeForPaths}}function aM(t){return!(t.isEmpty()||t.getGeometryType()!==me.enumPolyline&&t.getGeometryType()!==me.enumPolygon)&&!(t.getPointCount()<20)}function L1e(t){return!(t.isEmpty()||t.getGeometryType()!==me.enumPolyline&&t.getGeometryType()!==me.enumPolygon)&&!(t.getPointCount()<20)}function Cet(t,e){return t.readPoint2D(e+4)}function eO(t){const e=t.getGeometryType();return e===me.enumEllipticArc?10:e===me.enumBezier?4:e===me.enumRationalBezier2?5:e===me.enumBezier2?2:void xt("")}function mu(t){const e=31&t;return e===4?10:e===2?4:e===8?5:e===16?2:0}function r1(t,e,i,n){const s=4*ts()*(Math.abs(e.vmin)+Math.abs(e.vmax)),r=ts();if(t.getMaxDerivative()===1){K(i>0);const y=mie(t,0,e,ts(),s);return n[0]=y.root,y.cRoots}let o,l=[];const c=new Ze(e.vmin-s,e.vmax+s);l.push(new Y(c.vmin,c.vmax));let f=0;for(let y=t.getMaxDerivative()-1;y>=0;y--){o=l,l=[];for(let _=0,x=o.length;_<x;_++){if(o[_][0]<o[_][1]){let S,P,A;if(y===t.getMaxDerivative()-1?{root:S,funcAtRoot:P,cRoots:A}=mie(t,y,Ze.construct(o[_][0],o[_][1]),r,.5*s):{root:S,funcAtRoot:P,cRoots:A}=Met(t,y,Ze.construct(o[_][0],o[_][1]),r,.5*s),A===1){if(y===0)f<i&&(o[_][0]<=e.vmin&&o[_][1]>=e.vmin&&S!==e.vmin&&t.getValue(0,e.vmin)===0&&(S=e.vmin),o[_][0]<=e.vmax&&o[_][1]>=e.vmax&&S!==e.vmax&&t.getValue(0,e.vmax)===0&&(S=e.vmax),n[f]=e.snapClip(S),f>0?n[f]-n[f-1]>s&&f++:f++);else{const D=Y.getNAN();D[0]=o[_][0],D[1]=S,l.push(D);const N=Y.getNAN();N[0]=S,N[1]=o[_][1],l.push(N)}continue}}l.push(o[_])}}return f}function Pet(t,e,i,n){const s=new Be,r=iC(new Be(t),new Be(e),i,s);return n[0]=s.value(),r}function Mv(t,e,i,n,s,r){const o=Ge(Be,2),l=Tl(new Be(t),new Be(e),new Be(i),n,s,o);return r[0]=o[0].value(),r[1]=o[1].value(),l}function F1e(t,e,i,n,s,r,o){const l=Ge(Be,3),c=lM(new Be(t),new Be(e),new Be(i),new Be(n),s,r,l);return o[0]=l[0].value(),o[1]=l[1].value(),o[2]=l[2].value(),c}function pie(t,e,i,n,s,r,o,l){return Iet(t,e,i,n,s,r,o,l)}function Tet(t,e,i,n,s,r){return Aet(t,e,i,n,s,r)}function Iet(t,e,i,n,s,r,o,l){const c=new Array(i*i);c.fill(0),fs(l,n,0,0,i);const f=new Array(i),y=new Array(i),_=new Array(i);let x=t(l,i,e);const S=100;let P=0;for(P=0;P<S;P++){const A=x;for(let G=0;G<i;++G)y[G]=l[G];if(P%i==0){c.fill(0);for(let G=0;G<i;G++)c[G*i+G]=1}let D=0,N=0;for(let G=0;G<i;++G){for(let W=0;W<i;++W)f[W]=c[G*i+W];const V=x;x=gie(t,e,l,f,s,r,i);const B=V-x;B>D&&(N=G,D=B)}for(let G=0;G<i;G++)f[G]=l[G]-y[G],_[G]=l[G]+(l[G]-y[G]);const F=t(_,i,e);if(F<A&&2*(A-2*x+F)*Xi(A-x-D)<Xi(A-F)*D){x=gie(t,e,l,f,s,r,i);for(let G=0;G<i;++G)c[N*i+G]=c[(i-1)*i+G],c[(i-1)*i+G]=f[G]}if(A<=x)return t(l,i,e)}return x}function mie(t,e,i,n,s){const r={root:0,funcAtRoot:0,cRoots:0};let o=i.vmin,l=i.vmax,c=0,f=Number.MAX_VALUE,y=t.getValue(e,o),_=t.getValue(e,l),x=0,S=0,P=0;if(y>=0&&_>=0||y<=0&&_<=0)return Math.abs(y)<Math.abs(_)?(r.funcAtRoot=y,r.root=o,r.cRoots=y===0?1:0,r):(r.funcAtRoot=_,r.root=l,r.cRoots=_===0?1:0,r);Math.abs(y)<Math.abs(_)&&(l=Et(o,o=l),_=Et(y,y=_)),c=o,x=y;let A=!0,D=0;for(;_!==0&&Math.abs(o-l)>n*Math.abs(l)+s;D++){let N=D>64;if(!N){S=y!==x&&_!==x?o*_*x/((y-_)*(y-x))+l*y*x/((_-y)*(_-x))+c*y*_/((x-y)*(x-_)):l-_*(l-o)/(_-y);const F=(3*o+l)/4;if(N=!(S>F&&S<l||S>l&&S<F),!N){const G=n*Math.abs(l)+s;if(A){const V=Math.abs(l-c);N=Math.abs(S-l)>=.5*V||V<G}else{const V=Math.abs(c-f);N=Math.abs(S-l)>=.5*V||V<G}}}if(N?(S=(o+l)/2,A=!0):A=!1,P=t.getValue(e,S),P===0)return r.root=S,r.funcAtRoot=P,r.cRoots=1,r;if(!N){const F=o-S,G=S-l;if(Math.abs(F)>10*Math.abs(G)){let V=l+3*G;for(let B=0;B<2;B++){const W=t.getValue(e,V);ws(y)*ws(W)>0?(o=V,y=W):V=Hi(o,l,.75)}}else if(Math.abs(G)>10*Math.abs(F)){let V=o-3*F;for(let B=0;B<2;++B){const W=t.getValue(e,V);ws(_)*ws(W)>0?(l=V,_=W):V=Hi(o,l,.25)}}}f=c,c=l,x=_,ws(y)*ws(P)<0?(l=S,_=P):(o=S,y=P),Math.abs(y)<Math.abs(_)&&(l=Et(o,o=l),_=Et(y,y=_)),D===128&&xt("Root_finder iterations exceeded")}return r.root=l,r.funcAtRoot=_,r.cRoots=1,r}function Met(t,e,i,n,s){const r={root:0,funcAtRoot:0,cRoots:0};let o=i.vmin,l=t.getValue(e,o),c=i.vmax,f=t.getValue(e,c);if(l>=0&&f>=0||l<=0&&f<=0)return Math.abs(l)<Math.abs(f)?(r.funcAtRoot=l,r.root=o,r.cRoots=l===0?1:0,r):(r.funcAtRoot=f,r.root=c,r.cRoots=f===0?1:0,r);f<0&&(f=Et(l,l=f),c=Et(o,o=c));let y=.5*(o+c),_=Math.abs(c-o),x=_,S=t.getValue(e,y),P=t.getValue(e+1,y);const A=1,D=4;let N=D;const F=2;let G=1,V=0,B=0,W=A;const J=32;let re=0;for(;++re<100;){let ne;re>J||P===0||W===F&&V>1||W===A&&N<D?(W=A,G>1&&G--):(W=F,B>1&&Math.abs(2*S)>Math.abs(_*P)&&G++),_=x;let oe=!1;if(W===A)do{if(B>2){const ue=16*Math.abs(_);if(.5*Math.abs(o-c)>ue){const se=Math.min(o,c),de=Math.max(o,c);if(y===se){ne=y,y=se+ue,x=y-ne;break}if(y===de){ne=y,y=de-ue,x=y-ne;break}}}x=.5*(c-o),ne=y,y=o+x,oe=o===y||c===y}while(!1);else for(;;){x=G*S/P,ne=y,y-=x,oe=y===ne;const ue=Math.min(o,c),se=Math.max(o,c);if(y<ue){if(G>1){y=ne,G--;continue}x=ne-ue,y=ue}else if(y>se){if(G>1){y=ne,G--;continue}x=ne-se,y=se}break}if(oe||Math.abs(x)<s){ne!==y&&(S=t.getValue(e,y));break}S=t.getValue(e,y),P=t.getValue(e+1,y);const pe=o,ce=c;S<0?(l=S,o=y):(f=S,c=y),W===F&&(o===pe&&c===ce||B>1&&Math.abs(x)>=.5001*Math.abs(_))?V++:V=0,W===A?(N++,B=0):(N=0,B++)}return re===100&&xt("Root_finder iterations exceeded"),r.root=y,r.funcAtRoot=S,r.cRoots=1,r}function gie(t,e,i,n,s,r,o){const l=n.slice(0,o);let c=0;for(let N=0;N<o;N++)c+=n[N]*n[N];if(c=Math.sqrt(c),c>0)for(let N=0;N<o;N++)l[N]/=c;let f=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY;{const N=new Array(o);for(let F=0;F<o;F++)N[F]=F;N.sort((F,G)=>{const V=Math.abs(l[F]),B=Math.abs(l[G]);return V<B?-1:V>B?1:0});for(let F=0;F<o;F++){const G=N[F];if(l[G]===0)continue;let V=(s[G]-i[G])/l[G],B=(r[G]-i[G])/l[G];B<V&&(B=Et(V,V=B)),V>f&&(f=V),B<y&&(y=B)}}let _=0;const x=(Math.abs(f)+Math.abs(y))*ts()*100,S=new Array(o),P=l.slice();function A(N,F){for(let G=0,V=o;G<V;G++)S[G]=i[G]+N*P[G];return t(S,o,e)}x>0&&(_=Tet(A,null,f,0,y,x));const D=A(_);for(let N=0,F=o;N<F;N++)i[N]=hs(S[N],s[N],r[N]);return D}function Aet(t,e,i,n,s,r){const o=Vz();let l=n,c=t(l,e),f=i,y=s,_=t(f,e),x=t(y,e);c>_&&(c=_,l=f),c>x&&(c=x,l=y);let S=f,P=y,A=_,D=x;A>D&&(A=Et(D,D=A),P=Et(S,S=P));let N=l-S,F=S-P;const G=.5*Math.min(r,y-f),V=2*G,B=100;let W,J=0;for(W=0;W<B&&!(y-f<=V);++W){const re=f+.5*(y-f);let ne=J>0;if(!ne&&Math.abs(F)<=G&&(ne=!0,J=3),!ne){const ce=l-S,ue=l-P,se=ce*(c-D);let de=ue*(c-A),Se=ue*de-ce*se;de=2*(de-se),de>0&&(Se=-Se),de=Math.abs(de),de===0||Math.abs(Se)>=Math.abs(de*F/2)||Se<=de*(f-l)||Se>=de*(y-l)?(ne=!0,J=3):(F=N,N=Se/de)}ne&&(F=l>=re?f-l:y-l,N=o*F,J--);let oe=l+N;oe<f+G?oe=f+G:oe>y-G&&(oe=y-G);const pe=t(oe,e);pe<c?(oe>=l?(f=l,_=c):(y=l,x=c),P=S,S=l,l=oe,D=A,A=c,c=pe):(oe<l?(f=oe,_=pe):(y=oe,x=pe),pe<=A||S===l?(P=S,S=oe,D=A,A=pe):(pe<=D||P===l||P===S)&&(P=oe,D=pe))}return l}function iC(t,e,i,n){return t.isZero()?e.isZero()?-1:0:(n.setE(e.clone().negateThis().divThisE(t)),i.containsCoordinate(n.value())?1:0)}function Tl(t,e,i,n,s,r){if(t.value()===0)return s?(r[0].set(1),n.containsCoordinate(r[0].value())?1:0):iC(e,i,n,r[0]);if(s){let S=2;return r[0].set(1),r[1].setE(i).divThisE(t),r[1].eq(r[0])&&(r[1].set(1),S=1),n.containsCoordinate(r[1].value())||(S=1),n.containsCoordinate(r[0].value())||(S--,r[0].setE(r[1])),S===2&&r[0].value()>r[1].value()&&(r[1]=Et(r[0],r[0]=r[1])),S}const o=e.clone().sqrThis().subThisE(t.clone().mulThisE(i).mulThisE(sQe));if(o.lt(Bx))return 0;const l=new Be(e.value()>=0?1:-1),c=o.clone().sqrtThis(),f=new Be(-.5).mulThisE(e.clone().addThisE(l.clone().mulThisE(c)));let y=0;r[0].setE(f.divE(t));const _=new Be(r[0].value()),x=new Be(t.value()).mulE(_).addE(new Be(e.value()).mulE(_).addE(new Be(i.value())));return x.isZero()||yie(r[0],t,e,i,r[0]),n.containsCoordinate(r[0].value())&&y++,c.value()!==0&&f.value()!==0&&(r[y].assign(i.divE(f)),_.set(r[y].value()),x.assign(new Be(t.value()).mulE(_).addE(new Be(e.value()).mulE(_).addE(new Be(i.value())))),x.isZero()||yie(r[y],t,e,i,r[y]),n.containsCoordinate(r[y].value())&&y++,y===2&&r[0].value()>r[1].value()&&(r[1]=Et(r[0],r[0]=r[1]))),y}function lM(t,e,i,n,s,r,o){if(t.value()===0)return Tl(e,i,n,s,r,o);if(r){let l=1;o[0].set(1);const c=o.slice(l),f=Tl(t,e.addE(t),n.negate(),s,!1,c);if(f>0){l+=f;for(let _=1;_<l;_++)o[_].eq(hm)&&(o[l-1]=Et(o[_],o[_]=o[l-1]),l--)}const y=o.slice(0,l);y.sort((_,x)=>_.value()<x.value()?-1:_.value()>x.value()?1:0);for(let _=0;_<l;++_)o[_]=y[_];return l}return Oet(t,e,i,n,s,o)}function z1e(t,e,i,n,s,r){return(r<e||e<0)&&Je("nth_degree_real_roots"),$et(t,e,i,n,s)}function Uz(t,e,i,n){return{coef0:t.clone(),coef1:e.clone(),coef2:i.clone(),coef3:n.clone(),calcF(s){return this.coef0.clone().mulThis(s).addThisE(this.coef1).mulThis(s).addThisE(this.coef2).mulThis(s).addThisE(this.coef3)},calcDF(s){return this.coef0.clone().mulThis(3).mulThis(s).addThisE(this.coef1.clone().mulThisByPower2(2)).mulThis(s).addThisE(this.coef2)},estimateError(s){const r=Math.abs(s),o=((this.coef0.eps()*r+this.coef1.eps())*r+this.coef2.eps())*r+this.coef3.eps()+this.calcF(s).eps(),l=this.coef0.clone().mulThis(s).mulThis(3).addThisE(this.coef1.clone().mulThis(2)).mulThis(s).addThisE(this.coef2);if(l.isZero()){const c=this.coef0.clone().mulThis(s).mulThis(6).addThisE(this.coef1.clone().mulThis(2));if(c.isZero()){const f=this.coef0.clone().mulThis(6);return Math.pow(6*o/Math.abs(f.value()),1/3)}return Math.sqrt(2*o/Math.abs(c.value()))}return o/Math.abs(l.value())}}}class ket{updateCoefs(e){if(this.lastDeriv1===e)return this.curCoefs=this.derivCoefs1,void(this.lastUsed=1);if(this.lastDeriv2===e)return this.curCoefs=this.derivCoefs2,void(this.lastUsed=2);let i;this.lastUsed===1?(i=this.derivCoefs2,this.lastDeriv2=e,this.lastUsed=2):(i=this.derivCoefs1,this.lastDeriv1=e,this.lastUsed=1),i.length=this.truePower-e+1;for(let n=0,s=this.truePower-e;n<=s;++n){i[n]=this.coefs[n+e].clone();let r=n+e,o=r--;for(let l=1;l<e;l++)o*=r--;i[n].mulThis(o)}this.curCoefs=i}constructor(e,i,n,s){this.derivCoefs1=[],this.derivCoefs2=[],this.lastDeriv1=-1,this.lastDeriv2=-1,this.lastUsed=-1,this.curCoefs=null,this.coefs=e,this.power=i,this.truePower=0;for(let r=i;r>=1;r--)if(this.coefs[r].value()!==0){this.truePower=r;break}}getMaxDerivative(){return this.truePower+1}getValue(e,i){let n=this.coefs;e===0?n=this.coefs:(this.updateCoefs(e),n=this.curCoefs);const s=new Br(0);let r=1;for(let o=0,l=this.truePower-e;o<=l;++o)s.pe(r*n[o].value()),r*=i;return s.getResult()}getError(e){const i=Math.abs(e),n=new Br(0),s=new Be(1),r=new Be(0);for(let l=0,c=this.power;l<=c;++l)r.addThisE(this.coefs[l].mulE(s)),n.pe(s.value()*this.coefs[l].eps()),s.mulThis(i);n.pe(r.eps());let o=1;for(let l=1;l<=this.truePower;++l){o*=l,this.updateCoefs(l);const c=new Be(1),f=new Be(0);for(let y=0,_=this.truePower-l;y<=_;++y)f.addThisE(this.curCoefs[y].mulE(c)),c.mulThis(e);if(!f.isZero())return Math.pow(o*n.getResult()/Math.abs(f.value()),1/l)}return 0}}function q1e(t,e,i,n,s,r){let o=t,l=e,c=l-o;if(!r){let S=n.calcF(t).value(),P=n.calcF(e).value();if((S>0||S>P)&&(l=Et(o,o=l),P=Et(S,S=P)),S>=0||P<=0)return!1}let f,y=!1,_=i,x=0;for(;x<100;x++){const S=n.calcF(_);if(f=n.calcDF(_),f.isZero())return!1;if(!S.value()||x>3&&S.isZero()){y=!0;break}r||(S.value()<0?o=_:l=_);const P=S.value()/f.value(),A=_-P;r||(A>=o&&A<=l||A>=l&&A<=o)&&Math.abs(P)<=.5*c?(_=A,c=Math.abs(P)):(c=Math.abs(.5*(l-o)),_=.5*(o+l))}return!!y&&(s.set(_,n.estimateError(_)),!0)}function Det(t,e,i,n,s,r,o,l){return q1e(t,e,i.value(),Uz(n,s,r,o),l,!1)}class Net{constructor(e,i,n){this.coefs=Ge(Be,3),this.coefs[0].setE(e),this.coefs[1].setE(i),this.coefs[2].setE(n)}calcF(e){const i=new Be(e);return this.coefs[0].mulE(i).addE(this.coefs[1]).mulE(i).addE(this.coefs[2])}calcDF(e){const i=new Be(e);return Be.st_mulByPower2(this.coefs[0],2).mulE(i).addE(this.coefs[1])}estimateError(e){const i=Math.abs(e),n=(this.coefs[0].eps()*i+this.coefs[1].eps())*i+this.coefs[2].eps()+this.calcF(e).eps(),s=new Be(2).mulE(this.coefs[0]).mul(e).addE(this.coefs[1]);if(s.isZero()){const r=this.coefs[0].value();return Math.sqrt(n/Math.abs(r))}return n/Math.abs(s.value())}}function yie(t,e,i,n,s){return q1e(0,0,t.value(),new Net(e,i,n),s,!0)}function Oet(t,e,i,n,s,r){const o=Ge(Be,3);let l=0;const c=e.negate().divThisE(t.clone().mulThis(3));s.containsCoordinate(c.value())&&(o[0].setE(c),l=1);const f=Ge(Be,2),y=Tl(t.mul(3),e.mul(2),i,s,!1,f);if(y<0)return n.isZero()?-1:0;for(let A=0;A<y;A++)s.containsCoordinate(f[A].value())&&o[l++].setE(f[A]);dd(o,0,l,(A,D)=>A.value()<D.value()?-1:A.value()>D.value()?1:0);const _=Ge(Be,5);_[0].set(s.vmin);for(let A=0;A<l;A++)_[1+A].setE(o[A]);_[1+l].set(s.vmax);const x=l+2;let S=1,P=0;{const A=_[0].clone();if(t.clone().mulThisE(A).addThisE(e).mulThisE(A).addThisE(i).mulThisE(A).addThisE(n).isZero()){const D=Uz(t,e,i,n);A.setError(D.estimateError(A.value())),r[P]=A,P++,S++}}for(let A=S;A<x;A++){const D=_[A].clone(),N=t.clone().mulThisE(D).addThisE(e).mulThisE(D).addThisE(i).mulThisE(D).addThisE(n).isZero();if(N||!_[A].eq(_[A-1])){if(N||Det(_[A-1].value(),_[A].value(),_[A-1].clone().addThisE(_[A]).divThisByPower2(2),t,e,i,n,D)){if(P>0&&D.eq(r[P-1]))continue;if(P>=3&&xt("cubic_polynomial_solver_too_many_roots"),N){const F=Uz(t,e,i,n);D.setError(F.estimateError(D.value()))}r[P]=D,P++}if(_[A].value()===s.vmax)break;N&&A++}}return P}function $et(t,e,i,n,s,r){const o=new ket(t,e,i,ts());let l=0;if(o.truePower===2)l=Tl(t[2],t[1],t[0],i,n,s);else if(o.truePower===1)l=iC(t[1],t[0],i,s[0]);else{if(o.truePower===0)return t[0].value()?0:-1;{const c=[];c.length=e,l=r1(o,i,e,c);for(let f=0;f<l;f++)s[f].set(c[f])}}for(let c=0;c<l;c++)s[c].setError(o.getError(s[c].value()));return l}var vie=br;class pm extends D5{constructor(e){e===void 0||E7(e,"vd")?(super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=new Y(0,0)):e.from?(super({XStart:e.from.x,YStart:e.from.y,XEnd:e.to.x,YEnd:e.to.y,...e.vd}),this.m_cp=e.cp.clone()):e.points?(super({XStart:e.points[0].x,YStart:e.points[0].y,XEnd:e.points[2].x,YEnd:e.points[2].y,...e.vd}),this.m_cp=e.points[1].clone()):e.copy?(super(e),this.m_cp=e.copy.m_cp.clone()):(K(0),super({XStart:0,YStart:0,XEnd:0,YEnd:0,...e.vd}),this.m_cp=new Y(0,0))}getBoundary(){return sd(this)}assignMove(e){return K(0),this}assignCopy(e){return this!==e&&e.copyTo(this),this}construct(e,i,n){this.setStartXY(e),this.m_cp.assign(i),this.setEndXY(n),vT(this)}constructPoints(e){this.setStartXY(e[0]),this.m_cp.assign(e[1]),this.setEndXY(e[2]),vT(this)}getGeometryType(){return me.enumBezier2}queryEnvelope(e){if(e instanceof xe){if(e.setCoords(this.getStartXY()),e.mergeNe(this.getEndXY()),e.contains(this.m_cp))return;const i=Sie(this);if(i!==null){const n=new Y;for(const s of i.specialPoints)this.queryCoord2D(s,n),e.mergeNe(n)}else{const n=[];W1e(this,n);const s=new Y;for(const r of n)this.queryCoord2D(r,s),e.mergeNe(s)}}else K(0)}applyTransformation(e){if(e instanceof _i){const i=Ge(Y,3);return this.queryControlPoints(i),e.transformPoints2D(i,3,i),this.setStartXY(i[0]),this.m_cp.assign(i[1]),this.setEndXY(i[2]),void this.afterCompletedModification()}K(0)}createInstance(){return new pm({vd:this.m_description})}calculateLength2D(){return cM(this,1,!1)}calculateLowerLength2D(){return Y.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return this.calculateUpperLength2D_()}calculateUpperLength2D_(){return Y.distance(this.getStartXY(),this.m_cp)+Y.distance(this.getEndXY(),this.m_cp)}queryCoord2D(e,i){this.queryCoord2DExtended(e,i,!1)}queryCoord2DExtended(e,i,n){const s=Ge(Y,3);this.queryControlPoints(s),Wu(s,e,i,n)}queryCoord2DE(e,i){rtt()}getCoordX(e){if(e<0||e>1){const i=new Y;return this.queryCoord2DExtended(e,i,!0),i.x}if(e<=.5){const i=So(this.getStartX(),this.m_cp.x,e),n=So(this.m_cp.x,this.getEndX(),e);return So(i,n,e)}{const i=jr(this.getStartX(),this.m_cp.x,e),n=jr(this.m_cp.x,this.getEndX(),e);return jr(i,n,e)}}getCoordY(e){if(e<0||e>1){const i=new Y;return this.queryCoord2DExtended(e,i,!0),i.y}if(e<=.5){const i=So(this.getStartX(),this.m_cp.x,e),n=So(this.m_cp.x,this.getEndX(),e);return So(i,n,e)}{const i=jr(this.getStartY(),this.m_cp.y,e),n=jr(this.m_cp.y,this.getEndY(),e);return jr(i,n,e)}}cut(e,i,n){const s=new Qt;return this.queryCut(e,i,s,n),s.releaseSegment()}queryCut(e,i,n,s){const r=n.createQuadraticBezier();if(this.cutBezierIgnoreAttributes(e,i,r),s)return;r.assignVertexDescription(this.m_description);const o=this.m_description.getAttributeCount();if(o>1){for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=vie.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(e,c,y);r.setStartAttribute(c,y,_)}}for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=vie.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(i,c,y);r.setEndAttribute(c,y,_)}}}}queryDerivative(e,i){ott()}cutBezierIgnoreAttributes(e,i,n){if((e<0||i>1||e>i)&&Je("Quadratic_bezier.cut_bezier_ignore_attributes"),e===0&&i===1)return n.setStartXY(this.getStartXY()),n.m_cp.assign(this.m_cp),void n.setEndXY(this.getEndXY());const s=Ge(Y,3);this.queryControlPoints(s),sC(s,e,i,s),n.constructPoints(s)}splitBezierIgnoreAttributes(e,i,n){K(0)}getAttributeAsDbl(e,i,n){return K(0),0}getClosestCoordinate(e,i){return uM(this,e,Ze.unit(),i)}getClosestCoordinateOnInterval(e,i,n=-1){return uM(this,e,i,!1)}getYMonotonicParts(e,i){return K(0),0}getMonotonicParts(e,i){e.length<2&&Je("");const n=X1e(this);let s=0;if(n.specialPointsCount()===2)return 0;K(e.length>=n.specialPointsCount()-1);for(let r=1,o=n.specialPointsCount();r<o;++r)this.queryCut(n.specialPoints[r-1],n.specialPoints[r],e[s],i),s++;for(let r=0;r<s;++r)Q1e(e[r].get());return s}intersectionWithAxis2D(e,i,n,s){const r=Ge(Be,3),o=Ge(Be,2),l=new Ze(0,1);let c=0;if(e){if(r[0]=new Be(this.getStartY()).sub(i),r[1]=new Be(this.m_cp.y).subE(new Be(this.getStartY())).mulThisByPower2(2),r[2]=new Be(this.getStartY()).add(this.getEndY()).subE(new Be(this.m_cp.y).mulThisByPower2(2)),c=Tl(r[2],r[1],r[0],l,!1,o),n)for(let f=0;f<c;f++)n[f]=this.getCoordX(o[f].value())}else if(r[0]=new Be(this.getStartX()).sub(i),r[1]=new Be(this.m_cp.x).subE(new Be(this.getStartX())).mulThisByPower2(2),r[2]=new Be(this.getStartX()).add(this.getEndX()).subE(new Be(this.m_cp.x).mulThisByPower2(2)),c=Tl(r[2],r[1],r[0],l,!1,o),n)for(let f=0;f<c;f++)n[f]=this.getCoordY(o[f].value());if(s)for(let f=0;f<c;f++)s[f]=o[f].value();else n&&qz(n,c);return c}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const n=[0,0],s=this.intersectionWithAxis2D(!0,e,n,null);return K(s!==2),s===-1?i:n[0]}isCurve(){return!0}isLine(){return!1}isDegenerate(e){return A7(this,e)}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){K(0)}clone(e){const i=this.createInstance();return this.copyTo(i),i}queryInterval(e,i){if(e===0){const n=new xe;this.queryEnvelope(n);const s=new Ze;return i===0?n.queryIntervalX(s):n.queryIntervalY(s),s}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const n=Ge(Y,4);this.queryControlPoints(n),sC(n,e.vmin,e.vmax,n),i.setFromPoints(n,4)}changeEndPoints2D(e,i){if(e.isEqual(this.m_XStart,this.m_YStart)&&i.isEqual(this.m_XEnd,this.m_YEnd))return;const n=this.m_cp.isEqual(this.m_XStart,this.m_YStart),s=this.m_cp.isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(e),this.setEndXY(i),n?this.m_cp.setCoordsPoint2D(e):s&&this.m_cp.setCoordsPoint2D(i),this.normalizeAfterEndpointChange()}tToLength(e){return cM(this,e,!0)}lengthToT(e){return Xet(this,e)}calculateWeightedAreaCentroid2D(e){const i=Ge(Y,3);itt(this,i);const n=i[2],s=i[1],r=new Y,o=n.y*s.x-n.x*s.y;r.x=-(4*n.x+5*s.x)*o/60,r.y=-(4*n.y+5*s.y)*o/60;const l=wie(this);return r.x+=(i[0].x-e.x)*l,r.y+=(i[0].y-e.y)*l,r}calculateWeightedCentroid2D(){const e=new Y;return this.isDegenerate(0)?(e.setCoords(0,0),e):Wet(this)?(e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e):(e.assign(Jet(this,1)),e)}getControlPoint1(){return this.m_cp.clone()}setControlPoint1(e){this.m_cp.setCoordsPoint2D(e),this.afterCompletedModification()}queryControlPoints(e){e[0].assign(this.getStartXY()),e[1].assign(this.m_cp),e[2].assign(this.getEndXY())}setControlPoints(e){K(0)}getTangent(e){return K(0),Y.getNAN()}getDerivative(e){return K(0),Y.getNAN()}getCurvature(e){return K(0),0}isIntersecting(e,i,n){return K(0),!1}isIntersectingPoint(e,i,n){return K(0),!1}isIntersectingPoint3D(e,i,n,s,r=1){return K(0),!1}queryAttributeAsDbl(e,i,n,s){K(0)}isMonotoneQuickAndDirty(){return!1}getMonotonicPartParams(e,i){return K(0),0}normalizeAfterEndpointChange(){return!1}orientBottomUp(){K(0)}isDegenerateToLineHelper(e){const i=[e];if(!oB(this,i))return!1;const n=this.getEndXY().sub(this.getStartXY()),s=n.length(),r=this.getControlPoint1();return r.sub(this.getStartXY()),!(Math.abs(r.crossProduct(n))/s>i[0])}copyIgnoreAttributes(e){K(0)}calculateArea2DHelper(){return wie(this)}absNorm(){return ett(this)}queryEnvelopeW(e,i){const n=Ge(Y,3);this.queryControlPoints(n),nC(n,e,i)}setSegmentFromCoords(e,i){K(0)}snapControlPoints(e){return K(0),!1}writeInBufferStream(e,i){const n=new Float64Array(2);return n[0]=this.m_cp.x,n[1]=this.m_cp.y,e.writeRangeFromArray(i,n.length,n,!0,1),i+n.length}readFromBufferStream(e,i){const n=new Float64Array(2);e.queryRange(i,n.length,n,!0,1),this.m_cp.x=n[0],this.m_cp.y=n[1],this.m_cachedValues=null}needsSnapControlPoints(e){return K(0),!1}calculateSpecialPointsForCracking(e,i){return K(0),0}ensureXYMonotone(){return K(0),!1}setCoordsForIntersector(e,i,n){Qet(this,e,i,n)}copyToImpl(e){const i=e;i.m_cp.setCoordsPoint2D(this.m_cp),J1e(i,Sie(this))}reverseImpl(){}equalsImplTol(e,i){return K(0),!1}equalsImpl(e){const i=e;return!!this.m_cp.equals(i.m_cp)}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){vT(this)}intersect(e,i,n,s,r){return Qv(!1,this,e,i,n,s,r)}intersectPoint(e,i,n){return Zet(this,e,i.length,i,n)}intersect_(e,i,n,s){return K(0),0}endPointModified(){vT(this)}clearEndPointModified(){K(0)}}pm.type=me.enumBezier2;class V1e{constructor(e){return e.coefsT?(this.m_zeroCtor=e.zeroCtor,this.m_elements=e.coefsT.map(i=>i.clone()),K(this.m_elements.length===e.power+1),void this.updatePower()):e.coef0?(this.m_zeroCtor=e.zeroCtor,void(this.m_elements=[e.coef0.clone()])):e.copy?(this.m_zeroCtor=e.copy.m_zeroCtor,void(this.m_elements=e.copy.m_elements.map(i=>i.clone()))):(this.m_zeroCtor=e.zeroCtor,void(this.m_elements=[new this.m_zeroCtor]))}construct(e,i){return this.m_elements=e.map(n=>n.clone()),this.updatePower(),this}construct0(e){return this.m_elements.length=0,this.m_elements.push(e.clone()),this.updatePower(),this}assignCopy(e){return this.m_elements=e.m_elements.map(i=>i.clone()),this.updatePower(),this}assignMove(e){return this.m_elements=e.m_elements,e.m_elements=[],this.updatePower(),this}power(){return this.m_elements.length-1}addElement(e){this.m_elements.push(e.clone())}fmSubThis(e,i){return K(0),this}addThis(e){const i=Math.min(this.power(),e.power());for(let s=0;s<=i;++s)this.m_elements[s].addThis(e.m_elements[s]);const n=e.power();this.m_elements.length=Math.max(this.power(),e.power())+1;for(let s=i+1;s<=n;++s)this.m_elements[s]=e.m_elements[s];return this.updatePower(),this}add0(e){return this.m_elements[0].addThis(e),this.updatePower(),this}addNumber0(e){return K(0),this}sub(e){const i=Math.min(this.power(),e.power());for(let s=0;s<=i;++s)this.m_elements[s].subThis(e.m_elements[s]);const n=e.power();this.m_elements.length=Math.max(this.power(),e.power())+1;for(let s=i+1;s<=n;++s)this.m_elements[s]=e.m_elements[s].clone(),this.m_elements[s].negateThis();return this.updatePower(),this}sub0(e){return K(0),this}subNumber0(e){return K(0),this}subShifted(e,i){const n=this.power(),s=e.power()+i,r=Math.min(this.power(),s);let o=0;for(let l=i;l<=r;++l)this.m_elements[l].subThis(e.m_elements[o]),o++;if(s<=n)return this.updatePower(),this;this.m_elements.length=s+1;for(let l=n+1;l<this.m_elements.length;++l)this.m_elements[l]=new this.m_zeroCtor;for(let l=r+1;l<=s;++l)this.m_elements[l].subThis(e.m_elements[o++]);return this.updatePower(),this}subShiftedWithCoef(e,i,n){const s=this.power(),r=e.power()+n,o=Math.min(this.power(),r);let l=0;for(let c=n;c<=o;++c)this.m_elements[c].fmSubThis(e.m_elements[l],i),l++;if(r<=s)return this.updatePower(),this;this.m_elements.length=r+1;for(let c=s+1;c<this.m_elements.length;++c)this.m_elements[c]=new this.m_zeroCtor;for(let c=o+1;c<=r;++c)this.m_elements[c].fmSubThis(e.m_elements[l++],i);return this.updatePower(),this}mulThis(e){if(this.constructor===e.constructor){const i=e,n=[];for(let s=0,r=this.power();s<=r;s++)for(let o=0,l=i.power();o<=l;o++){const c=this.m_elements[s].clone();c.mulThis(i.m_elements[o]),s+o<n.length?n[s+o].addThis(c):n.push(c)}this.m_elements=n}else for(let i=0,n=this.power();i<=n;i++)this.m_elements[i].mulThis(e);return this.updatePower(),this}mulElementThis(e){for(let i=0,n=this.power();i<=n;i++)this.m_elements[i].mulThis(e);return this.updatePower(),this}mulNumber0(e){return K(0),this}mulBigint0(e){return K(0),this}mulBigIntThis(e){return K(0),this}mulInt320(e){return K(0),this}div0(e){return K(0),this}absThis(){return K(0),this}div(e,i,n){if(this.power()<e.power())return n.assignCopy(this),void i.setZero();n.setZero(),i.setZero();const s=e.getElement(e.power()),r=this.clone();let o=r.power();const l=r.power()-e.power();let c=l;for(i.m_elements=Ge(i.m_zeroCtor,l+1);;){if(o<e.power()){n.assignMove(r);break}if(o===r.power()){const f=r.getElement(r.power());f.divThis(s),r.subShiftedWithCoef(e,f,r.power()-e.power()),i.m_elements[c]=f.clone()}c--,o--}n.updatePower(),i.updatePower()}divThis(e){return K(0),this}subThis(e){const i=Math.min(this.power(),e.power());for(let s=0;s<=i;++s)this.m_elements[s].subThis(e.m_elements[s]);const n=e.power();this.m_elements.length=Math.max(this.power(),e.power())+1;for(let s=i+1;s<=n;++s)this.m_elements[s]=e.m_elements[s].clone(),this.m_elements[s].negateThis();return this.updatePower(),this}sub0This(e){return this.m_elements[0].subThis(e),this.updatePower(),this}subFrom(e,i){K(0)}isZero(){return this.power()===0&&this.m_elements[0].isZero()}negateThis(){for(let e=this.m_elements.length-1;e>=0;e--)this.m_elements[e].negateThis();return this}getElement(e){return this.m_elements[e].clone()}setElement(e,i){return this.m_elements[e]=i.clone(),this}evaluate(e){const i=this.power(),n=this.m_elements[i].clone();for(let s=i-1;s>=0;--s)n.mulThis(e),n.addThis(this.m_elements[s]);return n}equals(e){if(this===e)return!0;if(this.power()!==e.power())return!1;for(let i=this.m_elements.length-1;i>=0;i--)if(!this.m_elements[i].equals(e.m_elements[i]))return!1;return!0}updatePower(){for(let e=this.m_elements.length-1;e>0&&this.m_elements[e].isZero();e--)this.m_elements.pop();return this}setZero(){return this.m_elements.length=1,this.m_elements[0]=new this.m_zeroCtor,this.updatePower(),this}derivative(e){if(this.power()<e)return this.clone().setZero();if(e===0)return this.clone();const i=new this.constructor({coefsT:this.m_elements.slice(e),power:this.power()-e});for(let n=e,s=this.power();n<=s;n++){let r=BigInt(n);for(let o=n-1,l=n-e;o>l;--o)r*=BigInt(o);i.m_elements[n-e].mulBigIntThis(r)}return i.updatePower(),i}derivative1This(){if(this.m_elements.length>1){this.m_elements=this.m_elements.slice(1);for(let e=1,i=this.power();e<=i;e++)this.m_elements[e].mulThis(bt.constructInt32(e+1))}else this.m_elements.length=0,this.m_elements.push(new this.m_zeroCtor);return this}limitPrecisionThis(e){for(let i=this.power();i>=0;--i)this.m_elements[i].limitPrecisionThis(e);return this.updatePower(),this}hiBitIndex(){return this.m_elements.reduce((e,i)=>{const n=i.hiBitIndex();return e<n?n:e},0)}shiftRight(e){return this.m_elements.splice(0,e),this.updatePower(),this}static evaluateCoefs(e,i,n){const s=e.power();n.construct0(e.getElement(0).evaluate(i));for(let r=1;r<=s;++r)n.addElement(e.getElement(r).evaluate(i));n.updatePower()}}class Ti extends V1e{constructor(e){super(e===void 0?{zeroCtor:bt}:{...e,zeroCtor:bt})}clone(){return new Ti({copy:this})}absEvaluate(e){const i=this.power(),n=this.m_elements[i].clone();n.absThis();const s=e.clone();s.absThis();for(let r=i-1;r>=0;--r)n.mulThis(s),n.addThis(this.m_elements[r].abs());return n}}class zo extends V1e{constructor(e){super(e===void 0?{zeroCtor:Ti}:{...e,zeroCtor:Ti})}clone(){return new zo({copy:this})}constructFromMPValues(e,i){this.m_elements.length=0;for(let n=0;n<=i;++n)this.m_elements.push(new Ti({coef0:e[n]}));return this.updatePower(),this}}function Ret(){return{polypoly1:new zo,polypoly2:new zo,polyX2:new Ti,polyY2:new Ti,polyX2Deriv:new Ti,polyY2Deriv:new Ti,polypolyX1:new zo,polypolyY1:new zo,polypolyX1Deriv:new zo,polypolyY1Deriv:new zo,lazyPolypolyD1:new zo,lazyPolypolyD1Deriv:new zo,lazyPolyD2:new Ti,lazyPolyD2Deriv:null,polypoly11:new zo,polypoly12:new zo,tempPp:new zo,tempPp1:new zo,tempPp2:new zo,tempP:new Ti,tempP1:new Ti,tempP2:new Ti}}function Ux(t,e,i,n,s,r,o,l,c,f,y,_,x,S,P,A,D,N=!1){const F=Ret();F.polyX2.construct(o,l),F.polyY2.construct(c,f),F.polypolyX1.constructFromMPValues(t,e),F.polypolyY1.constructFromMPValues(i,n),F.polypoly11.assignCopy(F.polypolyX1),F.polypoly12.assignCopy(F.polypolyY1),y&&(F.lazyPolyD2.construct(y,_),F.polypoly11.mulElementThis(F.lazyPolyD2),F.polypoly12.mulElementThis(F.lazyPolyD2)),s?(F.lazyPolypolyD1.constructFromMPValues(s,r),F.lazyPolypolyD1Deriv=new zo({copy:F.lazyPolypolyD1}),F.lazyPolypolyD1Deriv.derivative1This(),F.tempPp.assignCopy(F.lazyPolypolyD1),F.tempPp.mulElementThis(F.polyX2),F.polypoly11.subThis(F.tempPp),F.tempPp.assignCopy(F.lazyPolypolyD1),F.tempPp.mulElementThis(F.polyY2),F.polypoly12.subThis(F.tempPp)):(F.polypoly11.sub0This(F.polyX2),F.polypoly12.sub0This(F.polyY2)),F.polypolyX1Deriv.assignCopy(F.polypolyX1),F.polypolyX1Deriv.derivative1This(),F.polypolyY1Deriv.assignCopy(F.polypolyY1),F.polypolyY1Deriv.derivative1This(),s&&(F.polypolyX1Deriv.mulThis(F.lazyPolypolyD1),F.tempPp2.assignCopy(F.lazyPolypolyD1Deriv),F.tempPp2.mulThis(F.polypolyX1),F.polypolyX1Deriv.subThis(F.tempPp2),F.polypolyY1Deriv.mulThis(F.lazyPolypolyD1),F.tempPp2.assignCopy(F.lazyPolypolyD1Deriv),F.tempPp2.mulThis(F.polypolyY1),F.polypolyY1Deriv.subThis(F.tempPp2)),F.polyX2Deriv.assignCopy(F.polyX2),F.polyX2Deriv.derivative1This(),F.polyY2Deriv.assignCopy(F.polyY2),F.polyY2Deriv.derivative1This(),y&&(K(F.lazyPolyD2Deriv===null),F.lazyPolyD2Deriv=new Ti({copy:F.lazyPolyD2}),F.lazyPolyD2Deriv.derivative1This(),F.polyX2Deriv.mulThis(F.lazyPolyD2),F.tempP1.assignCopy(F.lazyPolyD2Deriv),F.tempP1.mulThis(F.polyX2),F.polyX2Deriv.subThis(F.tempP1),F.polyY2Deriv.mulThis(F.lazyPolyD2),F.tempP1.assignCopy(F.lazyPolyD2Deriv),F.tempP1.mulThis(F.polyY2),F.polyY2Deriv.subThis(F.tempP1)),F.polypoly1.assignCopy(F.polypoly11),F.polypoly1.mulElementThis(F.polyX2Deriv),F.tempPp.assignCopy(F.polypoly12),F.tempPp.mulElementThis(F.polyY2Deriv),F.polypoly1.addThis(F.tempPp),F.polypoly2.assignCopy(F.polypolyX1Deriv),F.polypoly2.mulElementThis(F.polyY2Deriv),F.tempPp.assignCopy(F.polypolyY1Deriv),F.tempPp.mulElementThis(F.polyX2Deriv),F.polypoly2.subThis(F.tempPp);let G=[];const V=[];D||(D=[]),A||(A=[]),Xz(F.polypoly11,F.polypoly12,F.tempP);let B=57,W=.25*Number.EPSILON;const J=[];let re=Kg(F.tempP,x,P,W,B,J);if(re<0)return-1;for(let ce=0;ce<re;ce++){Ti.evaluateCoefs(F.polypoly11,bt.constructDouble(J[ce]),F.tempP1);const ue=[];let se=Kg(F.tempP1,x,S,W,B,ue);if(se!==0)if(Ti.evaluateCoefs(F.polypoly12,bt.constructDouble(J[ce]),F.tempP2),se<0){se=Kg(F.tempP2,x,S,W,B,ue),se<0&&xt("mp_curve_proximity");for(let de=0;de<se;de++)V.push(ar(ue[de],J[ce]))}else{const de=F.tempP2.absEvaluate(Yh);de.mulThis(bt.constructDouble(1e-12));for(let Se=0;Se<se;Se++){const Pe=F.tempP2.evaluate(bt.constructDouble(ue[Se]));Pe.absThis(),Pe.lt(de)&&V.push(ar(ue[Se],J[ce]))}}}re=V.length,Xz(F.polypoly1,F.polypoly2,F.tempP),B=57,W=.25*Number.EPSILON;const ne=[];let oe=Kg(F.tempP,x,P,W,B,ne);oe<0&&(oe=0);for(let ce=0;ce<oe;ce++){Ti.evaluateCoefs(F.polypoly1,bt.constructDouble(ne[ce]),F.tempP1);const ue=[];let se=Kg(F.tempP1,x,S,W,B,ue);if(se!==0)if(Ti.evaluateCoefs(F.polypoly2,bt.constructDouble(ne[ce]),F.tempP2),se<0){if(se=Kg(F.tempP2,x,S,W,B,ue),se<0)continue;for(let de=0;de<se;de++)G.push(ar(ue[de],ne[ce]))}else{const de=F.tempP2.absEvaluate(Yh);de.mulThis(bt.constructDouble(1e-12));for(let Se=0;Se<se;Se++){const Pe=F.tempP2.evaluate(bt.constructDouble(ue[Se]));Pe.absThis(),Pe.lt(de)&&G.push(ar(ue[Se],ne[ce]))}}}if(oe=G.length,re===0&&oe===0)return 0;G=G.concat(V),G.sort((ce,ue)=>N?Mf(ce.second,ue.second):Mf(ce.first,ue.first));const pe=b1e(G,(ce,ue)=>ce.first===ue.first&&ce.second===ue.second);G=G.slice(0,pe),A.length=0,D.length=0;for(const ce of G)A.push(ce.first),D.push(ce.second);return K(A.length===D.length),D.length}function Let(t,e,i,n,s,r,o){if(t.power()===0)return t.isZero()?-1:0;const l=t.evaluate(bt.constructInt32(1)).isZero();if(t.power()===1){const c=j1e(t.getElement(1),t.getElement(0),e,r.at(0));return r[0].limitPrecisionThis(n),c!==1?0:(r[0].limitPrecisionThis(n),1)}return t.power()===2?AS(t.getElement(2),t.getElement(1),t.getElement(0),n,e,l,r):t.power()===3?kS(t.getElement(3),t.getElement(2),t.getElement(1),t.getElement(0),n,e,l,r):t.power()===4?B1e(t.getElement(4),t.getElement(3),t.getElement(2),t.getElement(1),t.getElement(0),n,e,l,r):U1e(t,e,i,n,l,s,r,o)}function Fet(){return{polyIntersect:new Ti,polyX1:new Ti,polyY1:new Ti,polyX1Deriv:new Ti,polyY1Deriv:new Ti,lazyPolyD1:new Ti,lazyPolyD1Deriv:new Ti,tempP:new Ti,tempP1:new Ti,tempP2:new Ti,polypoly1Proximity:new zo,polypoly2Proximity:new zo}}function G1e(t,e,i,n,s,r,o,l,c,f,y){const _=Fet();_.polyX1.construct(t,e),_.polyY1.construct(i,n),_.polyX1Deriv.assignCopy(_.polyX1),_.polyX1Deriv.derivative1This(),_.polyY1Deriv.assignCopy(_.polyY1),_.polyY1Deriv.derivative1This(),_.polyIntersect.assignCopy(_.polyX1),_.polyIntersect.mulThis(_.polyX1),_.polyIntersect.mulElementThis(o[0]),_.tempP.assignCopy(_.polyY1),_.tempP.mulThis(_.polyY1),_.tempP.mulElementThis(o[1]),_.polyIntersect.addThis(_.tempP),_.polyIntersect.add0(o[2]);{const V=o[0].clone(),B=V.clone();B.sqrThis();const W=o[1].clone(),J=W.clone();J.sqrThis();const re=o[2].clone(),ne=V.clone();ne.subThis(W),_.polyX1.construct(t,e),_.polyX1Deriv.assignCopy(_.polyX1),_.polyX1Deriv.derivative1This(),_.polyY1.construct(i,n),_.polyY1Deriv.assignCopy(_.polyY1),_.polyY1Deriv.derivative1This(),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(_.polyX1),_.tempP.mulElementThis(J),_.tempP.mulElementThis(re),_.polypoly1Proximity.construct0(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(W.mul(ne).mul(re).ldexpThis(1)),_.polypoly1Proximity.addElement(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(_.polyX1),_.tempP.mulElementThis(V.mul(J)),_.tempP1.assignCopy(_.polyY1),_.tempP1.mulThis(_.polyY1),_.tempP1.mulElementThis(B.mul(W)),_.tempP.addThis(_.tempP1),_.tempP.add0(ne.mul(ne).mul(re)),_.polypoly1Proximity.addElement(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulElementThis(ne.mul(V).mul(W).ldexpThis(1)),_.polypoly1Proximity.addElement(_.tempP),_.tempP.construct0(V.mul(ne).mul(ne)),_.polypoly1Proximity.addElement(_.tempP),_.polypoly1Proximity.updatePower(),_.tempP.construct0(Ho),_.polypoly2Proximity.construct0(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(_.polyX1Deriv),_.tempP1.assignCopy(_.polyY1),_.tempP1.mulThis(_.polyY1Deriv),_.tempP.addThis(_.tempP1),_.tempP.mulElementThis(V.mul(W)),_.polypoly2Proximity.addElement(_.tempP),_.tempP.assignCopy(_.polyX1Deriv),_.tempP.mulElementThis(ne.mul(V)),_.polypoly2Proximity.addElement(_.tempP),_.polypoly2Proximity.updatePower()}const x=[],S=[];y||(y=[]);let P=2*_.polyIntersect.power()+58;const A=.5*Number.EPSILON,D=Kg(_.polyIntersect,l,c,A,P,S);if(D<0)return-1;Xz(_.polypoly1Proximity,_.polypoly2Proximity,_.tempP),P=2*_.tempP.power()+58;let N=Kg(_.tempP,l,c,A,P,x);if(N<0&&(N=0),D===0&&N===0)return 0;const F=x.concat(S);y.length=F.length,fs(y,F,0,0,F.length),Hx(y);const G=b1e(y,(V,B)=>Mf(V,B)===0);return y.length=G,y.length}function j1e(t,e,i,n){return t.isZero()?e.isZero()?-1:0:(n.setThis(e),n.negateThis(),n.divThis(t),i.isEmpty()||i.containsCoordinate(n.value())?1:0)}function AS(t,e,i,n,s,r,o){if(t.isZero())return r?(o[0].setInt32(1),s.containsCoordinate(1)?1:0):j1e(e,i,s,o[0]);if(r){let S=2;return o[0].setInt32(1),i.equals(t)?(o[1].setInt32(1),S=1):o[1].setThis(i.div(t)),s.containsCoordinate(o[1].value())||(S=1),s.containsCoordinate(o[0].value())||(S--,o[0].setThis(o[1])),S===2&&o[0].value()>o[1].value()&&(o[1]=Et(o[0],o[0]=o[1])),S}const l=e.clone();l.sqrThis();const c=t.clone();if(c.mulThis(i).ldexpThis(2).negateThis().addThis(l),c.LZ())return 0;const f=n+2,y=bt.sqrt(c,f),_=y.clone();e.LZ()&&_.negateThis(),_.addThis(e).limitPrecisionThis(f).ldexpThis(-1).negateThis();let x=0;return o[0].setThis(_).divThis(bt.constructAssign(t,f)).limitPrecisionThis(n),(s.isEmpty()||s.containsCoordinate(o[0].value()))&&x++,y.isZero()||_.isZero()||(o[x].setThis(i).divThis(_).limitPrecisionThis(n),(s.isEmpty()||s.containsCoordinate(o[x].value()))&&x++,x===2&&o[0].gt(o[1])&&(o[1]=Et(o[0],o[0]=o[1]))),x}function kS(t,e,i,n,s,r,o,l){if(t.isZero())return AS(e,i,n,s,r,o,l);const c=(pe,ce)=>{if(pe>0){let ue=ce+pe;for(let se=1;se<ue;se++)l[se].equals(l[0])&&(l[ue-1]=Et(l[se],l[se]=l[ue-1]),ue--);ce=ue}return dd(l,0,ce,(ue,se)=>ue.compare(se)),ce};if(n.isZero()){let pe=0;return r.containsCoordinate(0)&&(l[0].setInt32(0),pe=1),c(AS(t,e,i,s,r,o,l.slice(1)),pe)}if(o){let pe=0;r.containsCoordinate(1)&&(l[0].setInt32(1),pe=1);const ce=e.add(t),ue=n.negate(),se=t.add(ce).add(ue).isZero();return c(AS(t,ce,ue,s,r,se,l.slice(pe)),pe)}const f=new bt,y=new bt,_=new bt,x=e.clone();if(x.isZero())y.setThis(i),y.divThis(t),_.setThis(n),y.divThis(t);else{x.divThis(t).divDoubleThis(3).negateThis();const pe=e.clone();pe.sqrThis();const ce=t.clone();ce.sqrThis(),y.setThis(t),y.mulThis(i).mulDoubleThis(3).subThis(pe).divThis(ce).divDoubleThis(3),_.setThis(pe),_.mulThis(e),_.ldexpThis(1),f.setThis(t),f.mulThis(e).mulThis(i).mulDoubleThis(9),_.subThis(f),f.setThis(ce),f.mulThis(n).mulDoubleThis(27),_.addThis(f),_.divThis(ce).divThis(t).divDoubleThis(27)}if(y.isZero()){const pe=_.clone();return pe.negateThis(),pe.isZero()?(l[0].setThis(x),w3(r,s,l,1)):(l[0].setThis(bt.cubicRoot(_,s).add(x)),w3(r,s,l,1))}const S=_.clone();if(S.sqrThis().ldexpThis(-2),f.setThis(y.clone()),f.sqrThis().mulThis(y).divDoubleThis(27),S.addThis(f),S.isZero())return l[0].setThis(_),l[0].mulDoubleThis(3).divThis(y),l[1].setThis(l[0]),l[1].negateThis(),l[1].ldexpThis(-1),l[0].addThis(x),l[1].addThis(x),w3(r,s,l,2);if(S.GZ())return S.setThis(bt.sqrt(S,s+8)),f.setThis(_),f.ldexpThis(-1).negateThis(),f.addThis(S),l[0].setThis(bt.cubicRoot(f,s+8)),f.setThis(_),f.ldexpThis(-1).negateThis(),f.subThis(S),l[0].addThis(bt.cubicRoot(f,s+8)),l[0].addThis(x),w3(r,s,l,1);f.setThis(y),f.divDoubleThis(3).negateThis(),K(f.GEZ());const P=bt.sqrt(f,s+8),A=P.clone();A.negateThis(),A.addThis(x),P.addThis(x);const D=bt.constructDouble(r.isEmpty()?-Number.MAX_VALUE:r.vmin),N=bt.constructDouble(r.isEmpty()?Number.MAX_VALUE:r.vmax),F=new Ti({zeroCtor:bt});F.construct0(n),F.addElement(i),F.addElement(e),F.addElement(t);const G=new Ti({copy:F});G.derivative1This();let V=0;const B=Ge(bt,4);B[V++].setThis(D),A.gt(D)&&A.lt(N)&&B[V++].setThis(A),P.gt(D)&&P.lt(N)&&B[V++].setThis(P),B[V++].setThis(N);const W=3*s;let J=52,re=Number.EPSILON;for(;J<W;)2*J<=W?(re*=re,J*=2):(re*=Number.EPSILON,J+=52);J+=2;let ne=0,oe=!1;for(let pe=1;pe<V;pe++)if(Wz(F,G,B[pe-1],B[pe],re,J,l[0])){ne=1,oe=pe+1<V;break}if(!ne)return 0;if(oe){const pe=new Ti({zeroCtor:bt,coef0:l[0]});pe.negateThis(),pe.addElement(Yh);const ce=new Ti({zeroCtor:bt}),ue=new Ti({zeroCtor:bt});F.div(pe,ce,ue),K(ce.power()===2),K(ue.power()===0);const se=AS(ce.getElement(2),ce.getElement(1),ce.getElement(0),s,r,!1,l.slice(1));K(se>=0&&se<=2),ne+=se}return w3(r,s,l,ne)}function B1e(t,e,i,n,s,r,o,l,c){if(t.isZero())return kS(e,i,n,s,r,o,l,c);const f=(A,D)=>{if(A>0){let N=D+A;for(let F=1;F<N;F++)c[F].equals(c[0])&&(c[N-1]=Et(c[F],c[F]=c[N-1]),N--);D=N}return dd(c,0,D,(N,F)=>N.compare(F)),D};if(s.isZero()){let A=0;return o.containsCoordinate(0)&&(c[0].setInt32(0),A=1),f(kS(t,e,i,n,r,o,l,c.slice(A)),A)}const y=new Ti({zeroCtor:bt,coef0:s});if(y.addElement(n),y.addElement(i),y.addElement(e),y.addElement(t),l){let A=0;o.containsCoordinate(1)&&(c[0].setInt32(1),A=1);const D=new Ti({zeroCtor:bt,coef0:bt.constructInt32(-1)});D.addElement(bt.constructInt32(1));const N=new Ti({zeroCtor:bt}),F=new Ti({zeroCtor:bt});return y.div(D,N,F),f(kS(N.power()===3?N.getElement(3):Ho.clone(),N.power()>=2?N.getElement(2):Ho.clone(),N.power()>=1?N.getElement(1):Ho.clone(),N.getElement(0),r,o,N.evaluate(Yh).isZero(),c.slice(A)),A)}if(y.getElement(0).isZero()){let A=0;for(o.containsCoordinate(0)&&(A=1,c[0].setDouble(0));y.getElement(0).isZero()&&y.power()>0;)y.shiftRight(1);const D=kS(y.power()===3?y.getElement(3):Ho.clone(),y.power()>=2?y.getElement(2):Ho.clone(),y.power()>=1?y.getElement(1):Ho.clone(),y.getElement(0),r,o,!1,c.slice(A));return D>0&&(A+=D),dd(c,0,A,(N,F)=>N.compare(F)),A}let _=52,x=Number.EPSILON;for(;_<r;)2*_<=r?(x*=x,_*=2):(x*=Number.EPSILON,_+=52);_+=2;const S=Y1e(y),P=bt.constructDouble(Math.max(Math.abs(o.vmax),Math.abs(o.vmin)));return x=(S.lt(P)?S:P).mul(bt.constructDouble(x)).toDouble(),U1e(y,o,x,_,l,!1,c,4)}function zet(t,e){let i=t,n=e;n.power()>i.power()&&(n=Et(i,i=n));const s=i.power()-n.power(),r=new Ti({copy:i.getElement(i.power())});i.mulThis(n.getElement(n.power()));for(let o=0,l=i.power();o<l;o++)if(o>=s){const c=new Ti({copy:n.getElement(o-s)});c.mulThis(r);const f=i.getElement(o).sub(c);i.setElement(o,f)}i.setElement(i.power(),i.getElement(i.power()).setZero()),i.updatePower(),Yz(i)}function Yz(t){let e=0;for(;e<t.power()&&t.getElement(e).isZero();)e++;return e>0&&(t.shiftRight(e),!0)}function Xz(t,e,i){const n=t.clone(),s=e.clone();for(Yz(n),Yz(s);n.power()!==0||s.power()!==0;)zet(n,s);i.assignMove(n.getElement(0))}function Kg(t,e,i,n,s,r){r.length=0;const o=t.power(),l=Ge(bt,2*o+4),c=Let(t,i||Ze.unit(),n,s,!1,l,l.length);if(c>0){r.length=0;for(let f=0;f<c;f++){const y=l[f].value();f>0&&y<=r.at(-1)||r.push(y)}return r.length}return c}function H1e(t,e,i){if(K(i>=1),t.power()===0)return t.isZero()?-1:0;const n=t.getElement(0);return n.negateThis(),n.divThis(t.getElement(1)),e[0].setThis(n),1}function qet(t,e,i,n){if(t.power()<2)return H1e(t,i,n);K(n>=1);let s=t.getElement(1);s.mulThis(t.getElement(1));const r=t.getElement(0);if(r.mulThis(t.getElement(2)),r.ldexpThis(2),s.subThis(r),s.LZ())return 0;if(s.isZero()){const f=t.getElement(1);return f.negateThis(),f.divThis(t.getElement(2)),f.ldexpThis(-1),f.limitPrecisionThis(e),i[0].setThis(f),1}K(n>=2),s=bt.sqrt(s,e+8);const o=t.getElement(1);o.negateThis();const l=o.clone();l.subThis(s),l.divThis(t.getElement(2)),l.ldexpThis(-1),l.limitPrecisionThis(e);const c=o.clone();return c.addThis(s),c.divThis(t.getElement(2)),c.ldexpThis(-1),c.limitPrecisionThis(e),l.lt(c)?(i[0].setThis(l),i[1].setThis(c)):(i[1].setThis(l),i[0].setThis(c)),2}function Wz(t,e,i,n,s,r,o){let l=i.clone(),c=n.clone();l.limitPrecisionThis(r),c.limitPrecisionThis(r);let f=t.evaluate(l);f.limitPrecisionThis(r+2);let y=t.evaluate(c);if(y.limitPrecisionThis(r+2),f.GEZ()&&y.GEZ()||f.LEZ()&&y.LEZ())return f.absLessAbs(y)?(o=l,f.isZero()):(o=c,y.isZero());const _=y.LZ();_&&(y=Et(f,f=y),c=Et(l,l=c));const x=_?c:l,S=_?l:c,P=l.add(c).ldexpThis(-1);P.limitPrecisionThis(r);const A=c.sub(l);A.limitPrecisionThis(r),A.absThis();const D=A.clone();let N=t.evaluate(P),F=e.evaluate(P);const G=new Ti({copy:t}),V=new Ti({copy:e});{const Re=Math.max(t.hiBitIndex(),e.hiBitIndex()),$e=Yh.clone();$e.ldexpThis(-(r+2));for(let we=64;we<Re;){G.limitPrecisionThis(we),V.limitPrecisionThis(we);const Fe=G.evaluate(P),it=V.evaluate(P),_t=Fe.sub(N),ot=it.sub(F);if(_t.divThis(N).absThis().lt($e)&&(F.isZero()||ot.divThis(F).absThis().lt($e)))break;G.assignCopy(t),V.assignCopy(e),we=Math.min(we+64,Re)}N.limitPrecisionThis(r+2),F.limitPrecisionThis(r+2)}const B=1,W=4;let J=W;const re=2;let ne=1,oe=0,pe=0,ce=B;const ue=32,se=bt.constructDouble(.25*s),de=bt.constructDouble(.5001);let Se=0;const Pe=300;for(;++Se<Pe;){if(Se>ue&&oe>0||F.isZero()||ce===re&&oe>1||ce===B&&J<W)ce=B,ne>1&&ne--;else if(ce=re,pe>1){const it=A.mul(F);it.absThis(),it.ldexpThis(-3),it.absLessAbs(N)&&ne++}A.setThis(D);const Re=new bt;let $e=!1;if(ce===B)do{if(pe>2){const it=A.clone();if(it.absThis(),it.ldexpThis(4),S.sub(x).ldexpThis(-1).gt(it)){if(P.equals(x)){Re.setThis(P),P.setThis(x.add(it)),P.limitPrecisionThis(r),D.setThis(P.sub(Re));break}if(P.equals(S)){Re.setThis(P),P.setThis(S.sub(it)),P.limitPrecisionThis(r),D.setThis(P.sub(Re));break}}}D.setThis(c.sub(l)),D.ldexpThis(-1),D.limitPrecisionThis(r),Re.setThis(P),P.setThis(l.add(D)),P.limitPrecisionThis(r),P.lt(x)?P.setThis(x):P.gt(S)&&P.setThis(S),$e=l.equals(P)||c.equals(P)}while(!1);else for(;;){if(D.setThis(N.div(F)),D.limitPrecisionThis(r),ne!==1&&D.mulDoubleThis(ne),Re.setThis(P),P.subThis(D),P.limitPrecisionThis(r),$e=P.equals(Re),P.lt(x)){if(ne>1){P.setThis(Re),ne--;continue}D.setThis(Re.sub(x)),P.setThis(x)}else if(P.gt(S)){if(ne>1){P.setThis(Re),ne--;continue}D.setThis(Re.sub(S)),P.setThis(S)}break}if($e||D.absLessAbs(se)){Re.equals(P)||(N=G.evaluate(P),N.limitPrecisionThis(r+2));break}N=G.evaluate(P),N.limitPrecisionThis(r+2),F=V.evaluate(P),F.limitPrecisionThis(r+2);const we=l.clone(),Fe=c.clone();N.LZ()?(f.setThis(N),l.setThis(P)):(y.setThis(N),c.setThis(P)),ce===re&&(l.equals(we)&&c.equals(Fe)||pe>1&&!D.absLessAbs(de.mul(A)))?oe++:oe=0,ce===B?(J++,pe=0):(J=0,pe++)}return Se>=Pe&&xt("Root_finder iterations exceeded"),o.setThis(P),!0}function Vet(t,e,i,n,s){const r=t.evaluate(i);if(r.isZero())return!0;const o=bt.constructDouble(.5*n),l=i.clone();l.subThis(o);const c=t.evaluate(l),f=i.clone();f.addThis(o);const y=t.evaluate(f);if(c.LZ()&&y.GZ()||c.GZ()&&y.LZ()||(r.GZ()?c.LEZ()||y.LEZ():c.GEZ()||y.GEZ()))return!0;const _=c.LEZ()&&y.LEZ(),x=c.GEZ()&&y.GEZ();let S=!1;return _?r.gt(c)&&r.gt(y)&&(S=!0):x&&r.lt(c)&&r.lt(y)&&(S=!0),!!S&&r.absThis().lt(bt.constructDouble(1e-17))}function U1e(t,e,i,n,s,r,o,l){K(i>0),K(l>=t.power());const c=o,f=[];let y=[];const _=new Ti({zeroCtor:t.m_zeroCtor}),x=new Ti({zeroCtor:t.m_zeroCtor}),S=new Ti({zeroCtor:t.m_zeroCtor}),P=bt.constructDouble(i),A=bt.constructDouble(e.vmin),D=bt.constructDouble(e.vmax),N=A.sub(P),F=D.add(P),G=Y1e(t),V=G.clone();if(V.negateThis(),N.lt(V))N.setThis(V.sub(P));else if(N.gt(G))return 0;if(F.gt(G))F.setThis(G.add(P));else if(F.lt(V))return 0;let B=t,W=null;if(s){const de=new Ti({coef0:bt.constructInt32(-1)});de.addElement(Yh),W=new Ti,B=W;const Se=new Ti,Pe=new Ti;for(t.div(de,Se,Pe),W.assignCopy(Se);B.evaluate(Yh).isZero();)B.div(de,Se,Pe),W.assignCopy(Se)}let J=!1;if(B.power()>0&&B.getElement(0).isZero())for(J=!0,W||(W=new Ti({copy:B}),B=W);B.getElement(0).isZero();)W.shiftRight(1);let re=n+2*B.power()+2,ne=i/Math.pow(2,B.power()+2),oe=re;if(Ho.gt(N)&&Ho.lt(F)){for(let de=0,Se=B.power();de<Se;de++)if(B.getElement(de).isZero()){f.push(Ho.clone());break}}for(let de=B.power()-1;de>0;de--)if(ne*=2,re-=2,oe-=2,B.power()-de!=1)if(B.power()-de!=2){x.assignMove(S),S.assignMove(B.derivative(de-1));let Se=[];for(let Pe=0,Re=y.length;Pe<Re;++Pe)if(y[Pe].first.lte(y[Pe].second)){const $e=new bt;if(Wz(x,_,y[Pe].first,y[Pe].second,ne,re,$e)){f.push($e);let we=$e.sub(P);we.limitPrecisionThis(oe),Se.push(ar(y[Pe].first,we)),we=$e.add(P),we.limitPrecisionThis(oe),Se.push(ar(we,y[Pe].second))}else Se.push(y[Pe])}y=Se,Se=[],_.assignMove(x)}else{x.assignMove(B.derivative(de));const Se=qet(x,re,c,l);K(Se>=0&&Se<=2);for(let Pe=0;Pe<Se;Pe++)c[Pe].gt(N)&&c[Pe].lt(F)&&!c[Pe].isZero()&&f.push(c[Pe].clone());if(f.length>1&&f.sort((Pe,Re)=>Pe.compare(Re)),f.length>0){let Pe=f[0].sub(P);Pe.limitPrecisionThis(oe),y.push(ar(N.clone(),Pe));let Re=f.length===1?F.clone():f[1].sub(P);Pe=f[0].add(P),Pe.limitPrecisionThis(oe),Re.limitPrecisionThis(oe),y.push(ar(Pe,Re)),f.length>1&&(Re=f.length===2?F.clone():f[2].sub(P),Re.limitPrecisionThis(oe),Pe=f[1].add(P),Pe.limitPrecisionThis(oe),y.push(ar(Pe,Re)),f.length>2&&(Pe=f[2].add(P),Pe.limitPrecisionThis(oe),y.push(ar(Pe,F.clone()))))}else y.push(ar(N.clone(),F.clone()));_.assignCopy(x),S.assignMove(B.derivative(de-1))}else x.assignMove(B.derivative(de)),H1e(x,c,l)===1&&(c[0].gt(N)&&c[0].lt(F)&&!c[0].isZero()&&f.push(c[0].clone()),_.assignMove(x),S.assignMove(B.derivative(de-1)));f.sort((de,Se)=>de.compare(Se)),y.length===0&&(_.assignMove(B.derivative(B.power())),_.isZero()||y.push(ar(N.clone(),F.clone())));let pe=0,ce=0,ue=0;const se=new bt;for(;;){if(ce<y.length){if(y[ce].first.gt(y[ce].second)){ce++;continue}let de=!1;if(ue<f.length&&f[ue].lt(y[ce].first)&&(de=!0),!de){Wz(B,_,y[ce].first,y[ce].second,i,n,se)&&(se.lt(A)?c[pe++].setThis(A):se.gt(D)?c[pe++].setThis(D):c[pe++].setThis(se)),ce++;continue}}if(!(ue<f.length))break;ue!==0&&f[ue-1].equals(f[ue])||Vet(B,_,f[ue],i)&&(se.setThis(f[ue]),se.lt(A)?se.setThis(A):se.gt(D)&&se.setThis(D),pe!==0&&c[pe].equals(se)||c[pe++].setThis(se)),ue++}return J&&Ho.gt(N)&&Ho.lt(F)&&(c[pe++].setThis(Ho),dd(c,0,pe,(de,Se)=>de.compare(Se))),s&&Yh.gt(N)&&Yh.lt(F)&&(c[pe++].setThis(Yh),dd(c,0,pe,(de,Se)=>de.compare(Se))),pe}function Y1e(t){const e=t.getElement(t.power());e.limitPrecisionThis(53);const i=Ho.clone();for(let n=0,s=t.power();n<s;n++){const r=t.getElement(n);r.limitPrecisionThis(53),r.divThis(e).absThis(),r.gt(i)&&i.setThis(r)}return i.addThis(Yh),i.mulThis(bt.constructDouble(1+100*Number.EPSILON)),i}function w3(t,e,i,n){let s=n;if(!t.isEmpty()){s=0;for(let r=0;r<n;++r)t.containsCoordinate(i[r].value())&&(s!==r&&i[s].setThis(i[r]),s++)}s>1&&(i[0].gt(i[1])&&(i[1]=Et(i[0],i[0]=i[1])),s>2&&(i[0].gt(i[2])&&(i[2]=Et(i[0],i[0]=i[2])),i[1].gt(i[2])&&(i[2]=Et(i[1],i[1]=i[2]))));for(let r=0;r<s;++r)i[r].limitPrecisionThis(e);return s}function ix(t,e,i,n,s,r){return Bet(t,e,i,r,n,s)}function Get(t,e,i,n,s,r){let o=s;if(n)return r[0]=1,o=.5*(e-t)*(i(t)+i(e)),o;const l=r[0],c=(e-t)/l,f=t,y=new Br(0);for(let _=1;_<=r[0];++_){const x=(_-.5)*c;y.add(i(f+x))}return o=.5*(o+(e-t)*y.getResult()/l),r[0]*=2,o}function jet(t,e,i,n,s,r,o){let l=0,c=Math.abs(s-i[t]);const f=ji(e,Number.NaN),y=ji(e,Number.NaN);for(let P=0;P<e;++P){const A=Math.abs(s-i[t+P]);A<c&&(l=P,c=A),f[P]=n[t+P],y[P]=n[t+P]}let _=0,x=0,S=0;r[0]=n[t+l],l--;for(let P=1;P<e;P++){for(let A=0;A<e-P;A++){if(x=i[t+A]-s,S=i[t+A+P]-s,_=x-S,_===0)return!1;const D=(f[A+1]-y[A])/_;f[A]=x*D,y[A]=S*D}if(2*(l+1)<e-P){const A=l+1;o[0]=f[A]}else{const A=l;o[0]=y[A],l--}r[0]+=o[0]}return!0}function Bet(t,e,i,n,s,r){if(i<e&&Je("xTo < xFrom"),i===e)return 0;const o=[0];let l=Number.MAX_VALUE;const c=[Number.MAX_VALUE];let f=0;const y=32,_=ji(y+1,Number.NaN),x=ji(y+1,Number.NaN),S=[0];_[0]=1;let P=0,A=0;for(let D=0;D<y;D++){if(f=Get(e,i,n,D===0,f,S),x[D]=f,D+1>=t){jet(D+1-t,t,_,x,0,o,c)||xt("polynomial_interpolation");const N=s*Math.abs(o[0])+r,F=Math.abs(l-o[0]);if(F<=N&&Math.abs(c[0])<=N){if(P++,P>1&&(F<=.1*A||A===0||P>2))return o[0]}else P=0;A=F,l=o[0]}x[D+1]=x[D],_[D+1]=.25*_[D]}return o[0]}class _n{static constructPoint2D(e){return new _n(bt.constructDouble(e.x),bt.constructDouble(e.y))}constructor(e,i){if(e===void 0)return this.x=new bt().setNAN(),void(this.y=new bt().setNAN());this.x=e.clone(),this.y=i.clone()}assignPoint2D(e){return this.x.setDouble(e.x),this.y.setDouble(e.y),this}setCoords(e,i){return this.x.setThis(e),this.y.setThis(i),this}asPoint2D(){return new Y(this.x.value(),this.y.value())}crossProduct(e){return this.x.mul(e.y).sub(this.y.mul(e.x))}leftPerpendicularThis(){const e=this.x.clone();this.x=this.y.clone().negate(),this.y=e}clone(){return new _n(this.x,this.y)}dotProduct(e){return this.x.mul(e.x).add(this.y.mul(e.y))}add(e){return new _n(this.x.add(e.x),this.y.add(e.y))}sub(e){return new _n(this.x.sub(e.x),this.y.sub(e.y))}sqrLength(){return this.x.sqr().addThis(this.y.sqr())}mulThis(e){return this.x.mulThis(e),this.y.mulThis(e),this}mul(e){return this.clone().mulThis(e)}}class Het{constructor(){this.area=Number.NaN,this.centroid_x=Number.NaN,this.centroid_y=0,this.specialPoints=[],this.specialPointsLength=[]}specialPointsCount(){return this.specialPoints.length}}let Uet=class{constructor(t,e){this.b=t,this.len=e}getMaxDerivative(){return 1}getValue(t,e){return t===0?this.len-cM(this.b,e,!1):0}getError(t){return K(0),0}};function Yet(t,e,i,n,s){let r=!0;const o=Ge(Y,3);t.queryControlPoints(o);let l=r?0:1,c=o[1][l]-o[0][l],f=o[2][l]-o[0][l];const y=ix(5,e,i,n,s,x=>{let S;if(x<=.5){const P=So(0,c,x),A=So(c,f,x);S=So(P,A,x)}else{const P=jr(0,c,x),A=jr(c,f,x);S=jr(P,A,x)}return S*xie(o,1,x).length()});r=!1,l=r?0:1,c=o[1][l]-o[0][l],f=o[2][l]-o[0][l];const _=ix(5,e,i,n,s,x=>{let S;if(x<=.5){const P=So(0,c,x),A=So(c,f,x);S=So(P,A,x)}else{const P=jr(0,c,x),A=jr(c,f,x);S=jr(P,A,x)}return S*xie(o,1,x).length()});return new Y(y,_)}function vT(t){t.m_cachedValues=null}function X1e(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new Het;return W1e(t,e.specialPoints),J1e(t,e),e}function W1e(t,e){const i=Ge(Y,3);t.queryControlPoints(i);const n=Ge(Be,8);n[0].set(0);let s=1;{const r=Ge(Be,3);ntt(i,r,!1);const o=Ge(Be,2),l=new Ze(0,1);let c=iC(r[2].mul(2),r[1],l,o[0]);c<0&&(c=0);for(let f=0;f<c;f++)An(o[f].value(),0,1)||(n[s]=o[f],s++)}{const r=Ge(Be,3);stt(i,r,!1);const o=Ge(Be,2),l=new Ze(0,1);let c=iC(r[2].mul(2),r[1],l,o[0]);c<0&&(c=0);for(let f=0;f<c;f++)An(o[f].value(),0,1)||(n[s]=o[f],s++)}if(n[s].set(1),s++,s>2){dd(n,0,s,(c,f)=>c.value()-f.value());let r=0,o=n[0].value(),l=1;for(let c=1;c<s;c++)n[c].eq(n[c-1])?(o+=n[c].value(),l++):(l>1&&(o/=l,n[r].set(o)),r++,n[r]=n[c],o=n[c].value(),l=1);r++,s=r}n[0].set(0),n[s-1].set(1),e.length=s;for(let r=0;r<s;r++)e[r]=n[r].value()}function cM(t,e,i){const n=Ge(Y,3);return t.queryControlPoints(n),Z1e(n,e,i)}function Z1e(t,e,i){if(i){if(e<0)return e;if(e>1)return e-1+Z1e(t,1,!1)}if(e===1)return _ie(t);const n=Ge(Y,3);return Zz(t,e,n,null),_ie(n)}function _ie(t){if(t[0].equals(t[1]))return Y.distance(t[2],t[0]);if(t[1].equals(t[2]))return Y.distance(t[0],t[2]);const e=Y.distance(t[0],t[1])+Y.distance(t[2],t[1]),i=Y.distance(t[0],t[2]);if(e-i<=e*Number.EPSILON)return i;const n=1,s=Ge(Y,3);hB(t,s,!0);const r=4*(Xi(s[2].x)+Xi(s[2].y)),o=2*(s[2].x*s[1].x+s[2].y*s[1].y),l=Xi(s[1].x)+Xi(s[1].y);if(1e-14*(Math.abs(o)+Math.abs(l))>=Math.abs(r))return 1e-14*Math.abs(l)>=Math.abs(o)?Math.sqrt(l)*n:(K(0),2/(3*o)*(Math.pow(o*n+l,1.5)-Math.pow(l,1.5)));const c=o/r,f=l/r,y=f-c*c,_=n+c;if(y===0)return c>=0&&_>=0||c<=0&&_<=0?Math.abs(.5*Math.sqrt(r)*(_*_-c*c)):.5*Math.sqrt(r)*(_*_+c*c);const x=Math.sqrt(y+_*_),S=Math.sqrt(f);return .5*Math.sqrt(r)*(_*x-c*S+y*Math.log(Math.abs((_+x)/(c+S))))}function bie(t,e){return K(0),Y.getNAN()}function xie(t,e,i){{const n=t[1].sub(t[0]).mul(1-i).add(t[2].sub(t[1]).mul(i));return n.mulThis(2),n}}function Xet(t,e,i){const n=cM(t,1,!1);if(e<=0)return e;if(e>=n)return e-n+1;const s=[0];return r1(new Uet(t,e),Ze.unit(),1,s)!==1&&xt(""),s[0]}function wie(t){const e=Ge(Y,3);return t.queryControlPoints(e),K1e(e)}function K1e(t){return-t[1].sub(t[0]).crossProduct(t[2].sub(t[0]))/3}function Wet(t){const e=Y.distance(t.getStartXY(),t.getEndXY()),i=t.calculateUpperLength2D();return i-e<=8*Number.EPSILON*i}function Sie(t){return t.m_cachedValues}function J1e(t,e){t.m_cachedValues=e}function uM(t,e,i,n,s){ZE(Ze.unit().contains(i),"QuadraticBezierHelper::getClosestCoordinateSegment");const r=Ge(Y,3);t.queryControlPoints(r);let o=Number.MAX_VALUE;const l=[0],c=D7(r,e,l);if(i.containsCoordinate(l[0]))o=Y.distance(e,c);else{l[0]=i.vmin,Wu(r,l[0],c),o=Y.distance(c,e);const f=new Y;Wu(r,i.vmax,f);const y=Y.distance(f,e);o>y&&(c.setCoordsPoint2D(f),l[0]=i.vmax,o=y)}if(!n)return l[0];if(i.vmin<=0){const f=new Y;t.queryCoord2DExtended(-1,f,!0);const y=new Y;t.queryCoord2D(i.vmin,y);const _=new ni({start:f,end:y}),x=_.getClosestCoordinate(e,!0);if(x<1){const S=_.getCoord2D(x),P=Y.distance(S,e);P<o&&(o=P,l[0]=x-1,c.assign(S))}}if(i.vmin>=1){const f=new Y;t.queryCoord2DExtended(2,f,!0);const y=new Y;t.queryCoord2D(i.vmax,y);const _=new ni({start:y,end:f}),x=_.getClosestCoordinate(e,!0);if(x>0){const S=_.getCoord2D(x),P=Y.distance(S,e);P<o&&(o=P,l[0]=1+x,c.assign(S))}}return l[0]}function D7(t,e,i){const n=t[2].sub(t[1]).sub(t[1].sub(t[0])),s=t[1].sub(t[0]),r=t[0].sub(e),o=r.dotProduct(s),l=r.dotProduct(n)+2*s.dotProduct(s),c=3*s.dotProduct(n),f=n.dotProduct(n),y=new Array(3),_=F1e(f,c,l,o,Ze.unit(),!1,y),x=t[0].clone();let S=0,P=Y.sqrDistance(t[0],e),A=Y.sqrDistance(t[2],e);A<P&&(S=1,x.assign(t[2]),P=A);for(let D=0;D<_;D++){const N=new Y;Wu(t,y[D],N),A=Y.sqrDistance(N,e),A<P&&(P=A,x.assign(N),S=y[D])}return i&&(i[0]=S),x}function Zet(t,e,i,n,s,r){const o=new Xr;if(Ket(t,Ze.unit(),o),o.inflate(s),!o.isIntersectingPoint2D(e))return 0;const l=new Y,c=uM(t,e,Ze.unit(),!1);return t.queryCoord2D(c,l),Y.distance(l,e)<=s?(n&&(n[0]=c),1):0}function Ket(t,e,i){const n=Ge(Y,3);t.queryControlPoints(n),nC(n,e,i)}function nC(t,e,i){if(e.equalsRange(0,1))return void i.setFromPoints(t,3);const n=Ge(Y,3);sC(t,e.vmin,e.vmax,n),i.setFromPoints(n,3)}function Eie(t,e,i){i.setEmpty();const n=[];n.push(new Ze(0,1));const s=.5*Math.max(e.width(),e.height());for(;n.length;){const r=n.at(-1);n.pop();const o=new Xr;if(nC(t,r,o),o.isIntersectingW(e)){const l=Math.max(o.width(),o.height());if(e.containsW(o)||l<=s||r.width()<1e-12)i.merge(r);else{const c=r.getCenter();n.push(Ze.construct(r.vmin,c)),n.push(Ze.construct(c,r.vmax))}}}}function Q1e(t){const e=Ge(Y,3);t.queryControlPoints(e);const i=eye(e);return i&&(t.m_cp.setCoordsPoint2D(e[1]),t.afterCompletedModification()),i}function eye(t){let e=!1;for(let i=0;i<2;i++){const n=Qn(t[0][i],t[2][i]);n>0?(Qn(t[0][i],t[1][i])<0&&(t[1][i]=t[0][i],e=!0),Qn(t[1][i],t[2][i])<0&&(t[1][i]=t[2][i],e=!0)):n<0?(Qn(t[0][i],t[1][i])>0&&(t[1][i]=t[0][i],e=!0),Qn(t[1][i],t[2][i])>0&&(t[1][i]=t[2][i],e=!0)):t[1][i]!==t[0][i]&&(t[1][i]=t[0][i],e=!0)}return e}function Jet(t,e,i){i===void 0&&(i=e,e=0);const n=new Y;if(e<0||i>1)return n.setNAN(),n;if(e>i&&Je("calculate_sub_weighted_centroid"),e===i||t.isDegenerate(0))return n.setCoords(0,0),n;const s=X1e(t),r=mf(t),o=Math.min(r/t.calculateUpperLength2D(),1e-7);let l=e,c=0;for(let f=1,y=s.specialPointsCount();f<y;f++)if(e<s.specialPoints[f]){c=f-1;break}n.setCoords(0,0);for(let f=c+1,y=s.specialPointsCount();f<y;f++){const _=Math.min(s.specialPoints[f],i),x=Yet(t,l,_,o,r);if(n.addThis(x),l=_,i<=s.specialPoints[f])break}return n.add(t.getStartXY().mul(t.calculateLength2D()))}function Zz(t,e,i,n){new Y().setCoordsPoint2D(t[0]),new Y().setCoordsPoint2D(t[1]),new Y().setCoordsPoint2D(t[2]);const s=new Y,r=new Y,o=new Y;if(cr(t[0],t[1],e,s),cr(t[1],t[2],e,r),cr(s,r,e,o),i&&(i[0].assign(t[0]),i[1].assign(s),i[2].assign(o)),n){const l=t[2];n[0].assign(o),n[1].assign(r),n[2].assign(l)}}function sC(t,e,i,n){if(e===i){const r=new Y;return Wu(t,e,r),n[0]=r,n[1]=r,void(n[2]=r)}const s=Ge(Y,3);Zz(t,i,s,null),Zz(s,e/i,null,s),Wu(t,e,s[0]),Wu(t,i,s[2]),n[0].setCoordsPoint2D(s[0]),n[1].setCoordsPoint2D(s[1]),n[2].setCoordsPoint2D(s[2])}function Qet(t,e,i,n){if(e.isEqual(t.m_XStart,t.m_YStart)&&i.isEqual(t.m_XEnd,t.m_YEnd))return;const s=!!n&&t.isMonotoneQuickAndDirty(),r=new _i,o=Ge(Y,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const l=new Y;l.setSub(o[2],o[0]),l.leftPerpendicularThis(),o[1].setAdd(o[0],l);const c=Ge(Y,3);c[0].setCoordsPoint2D(e),c[2].setCoordsPoint2D(i),l.setSub(c[2],c[0]),l.leftPerpendicularThis(),c[1].setAdd(c[0],l),r.setFromTwoTriangles(o,c)?r.transformInPlace(t.m_cp):cr(e,i,.5,t.m_cp),t.changeEndPoints2D(e,i),s&&Q1e(t)}function ett(t){return t.getStartXY().norm(1)+t.getEndXY().norm(1)+t.m_cp.norm(1)}function Cie(t,e,i,n,s){return K(0),0}function Pie(t,e,i,n,s){return K(0),0}function ttt(t,e,i,n,s){return K(0),0}function hM(t,e,i,n,s,r,o,l,c,f){if(s!=null&&(s.length=0),r!==null&&(r.length=0),n!==null&&(n.length=0),i.isDegenerate(0)){const oe=[0,0],pe=e.intersectPoint(i.getStartXY(),oe,o);if(pe>0){if(s!==null)for(let ce=0;ce<pe;ce++)s.push(oe[ce]);if(r!==null)for(let ce=0;ce<pe;ce++)r.push(0);if(n!==null)for(let ce=0;ce<pe;ce++){const ue=new Y;e.queryCoord2D(oe[ce],ue),n.push(ue)}}return pe}const y=Ll(e,i);if(o=Math.max(o,y),e.isDegenerateToLineHelper(y)){const oe=new ni({start:e.getStartXY(),end:e.getEndXY()}),pe=k7(oe,i,n,s,r,o,l,f);if(s)for(let ce=0;ce<pe;++ce){const ue=oe.getCoord2D(s[ce]);s[ce]=e.getClosestCoordinate(ue,!1)}return pe}if(Zc(e,i,o))return 0;const _=_n.constructPoint2D(i.getStartXY()),x=_n.constructPoint2D(i.getEndXY()).sub(_),S=x.clone();S.leftPerpendicularThis();const P=_n.constructPoint2D(e.m_cp).sub(_n.constructPoint2D(e.getStartXY())),A=_n.constructPoint2D(e.getEndXY()).sub(_n.constructPoint2D(e.m_cp));let D=P.dotProduct(S).toDouble(),N=A.sub(P).dotProduct(S).toDouble();const F=ji(12,Number.NaN),G=ji(12,Number.NaN);let V=Pet(N,D,Ze.unit(),F);V<0&&(F[0]=0,F[1]=1,V=2);let B,W=0;for(let oe=0,pe=W;oe<V;++oe){const ce=e.getCoord2D(F[oe+pe]);G[W]=i.getClosestCoordinate(ce,!1),Y.distance(ce,i.getCoord2D(G[W]))<=o&&(F[W]=F[oe+pe],W++)}const J=Ge(Y,3);e.queryControlPoints(J);{const oe=Ge(_n,3);if(nx(J,oe,!1),oe[0]=oe[0].sub(_),x.x.abs().gte(x.y.abs())){const pe=x.y.div(x.x);N=oe[2].y.sub(oe[2].x.mul(pe)).toDouble(),D=oe[1].y.sub(oe[1].x.mul(pe)).toDouble(),B=oe[0].y.sub(oe[0].x.mul(pe)).toDouble()}else{const pe=x.x.div(x.y);N=oe[2].x.sub(oe[2].y.mul(pe)).toDouble(),D=oe[1].x.sub(oe[1].y.mul(pe)).toDouble(),B=oe[0].x.sub(oe[0].y.mul(pe)).toDouble()}}const re=e.getEndXY().equals(i.getStartXY())||e.getEndXY().equals(i.getEndXY()),ne=[0,0];V=Mv(N,D,B,Ze.unit(),re,ne);for(let oe=0,pe=W;oe<V;++oe){F[oe+pe]=ne[oe];const ce=e.getCoord2D(F[oe+pe]);G[W]=i.getClosestCoordinate(ce,!1),Y.distance(ce,i.getCoord2D(G[W]))<=o&&(F[W]=F[oe+pe],W++)}K(W<F.length+4),V=e.intersectPoint(i.getStartXY(),ne,o);for(let oe=0;oe<V;oe++)F[W]=ne[oe],G[W++]=0;V=e.intersectPoint(i.getEndXY(),ne,o);for(let oe=0;oe<V;oe++)F[W]=ne[oe],G[W++]=1;V=i.intersectPoint(e.getStartXY(),ne,o);for(let oe=0;oe<V;oe++)G[W]=ne[oe],F[W++]=0;V=i.intersectPoint(e.getEndXY(),ne,o);for(let oe=0;oe<V;oe++)G[W]=ne[oe],F[W++]=0;return W===0?0:Kc(t,e,i,F,G,W,n,s,r,o,l,c,f)}function Tie(t,e,i,n,s,r,o,l,c,f){if(rs(i))return hM(t,e,new ni({start:i.getStartXY(),end:i.getEndXY()}),n,s,r,o,l,c,f);const y=Ll(e,i);if(Zc(e,i,o=Math.max(o,y)))return 0;const _=[],x=[],S=Ge(Y,3);{e.queryControlPoints(S);const A=Ge(Y,3),D=new _i;i.canonicToWorldTransformation(D);const N=new _i;N.setInvert(D),N.transformPoints2D(S,3,A);const F=Ge(_n,3);nx(A,F);const G=[F[0].x,F[1].x,F[2].x],V=[F[0].y,F[1].y,F[2].y],B=Ge(bt,3);B[0].setDouble(i.getSemiMinorAxis()),B[0].sqrThis(),B[1].setDouble(i.getSemiMajorAxis()),B[1].sqrThis(),B[2]=B[0],B[2].mul(B[1]),B[2].negate();const W=G1e(G,2,V,2,null,0,B,!0,Ze.unit(),Ze.unit(),_);if(W>0){let J=0;for(let re=0;re<W;re++){const ne=new Y;e.queryCoord2D(_[re],ne);const oe=i.getClosestCoordinate(ne,!1),pe=new Y;i.queryCoord2D(oe,pe),Y.distance(ne,pe)<=o&&(_[J]=_[re],x.push(oe),J++)}_.length=J}}const P=[0,1];for(let A=0;A<2;A++){const D=A===0?i.getStartXY():i.getEndXY(),N=[0];D7(S,D,N);const F=new Y;Wu(S,N[0],F),Y.distance(D,F)<=o&&(_.push(N[0]),x.push(P[A]))}for(let A=0;A<2;A++){const D=[0,2];{const N=i.getClosestCoordinate(S[D[A]],!1),F=new Y;i.queryCoord2D(N,F),Y.distance(S[D[A]],F)<=o&&(_.push(P[A]),x.push(N))}}return Kc(t,e,i,_,x,_.length,n,s,r,o,l,c,f)}function tye(t,e,i,n,s,r,o,l,c,f){const y=Ge(Y,3);e.queryControlPoints(y);const _=Ge(Y,3);if(i.queryControlPoints(_),cB(y,_,3)<0)return tye(t,i,e,n,r,s,o,l,c,!f);const x=Ll(e,i);if(Zc(e,i,o=Math.max(o,x)))return 0;if(ltt(e,i,n,s,r,o,l,c,f))return 2;const S=new Ze(0,1),P=new Ze(0,1);{const F=new Xr;nC(y,Ze.unit(),F);const G=new Xr;nC(_,Ze.unit(),G);const V=Math.max(F.maxDim(),G.maxDim());if(F.inflate(3*o),G.inflate(3*o),!F.intersectW(G))return 0;if(F.maxDim()<.1*V){if(Eie(y,F,S),Eie(_,F,P),S.isEmpty()||P.isEmpty())return 0;sC(y,S.vmin,S.vmax,y),sC(_,P.vmin,P.vmax,_)}}const A=Xx(y,2,_,2,o);if(A===0)return 0;const D=[],N=[];if(A===-1){const F=Ge(_n,3);nx(y,F);const G=[F[0].x,F[1].x,F[2].x],V=[F[0].y,F[1].y,F[2].y],B=Ge(_n,3);nx(_,B);const W=Ux(G,2,V,2,null,0,[B[0].x,B[1].x,B[2].x],2,[B[0].y,B[1].y,B[2].y],2,null,0,!0,Ze.unit(),Ze.unit(),D,N,f);if(W>0){let J=0;for(let re=0;re<W;re++){const ne=new Y,oe=new Y;Wu(_,N[re],oe),Wu(y,D[re],ne),Y.distance(ne,oe)<=o&&(D[J]=D[re],N[J]=N[re],J++)}D.length=J,N.length=J}}for(let F=0;F<2;F++){const G=F===0?y:_,V=F===0?_:y;for(let B=0;B<2;B++){const W=B===0?0:2,J=[0];D7(V,G[W],J);const re=new Y;Wu(V,J[0],re),Y.distance(G[W],re)<=o&&(F===0?(D.push(W===0?0:1),N.push(J[0])):(N.push(W===0?0:1),D.push(J[0])))}}if(D.length===0)return 0;if(!S.equalsRange(0,1))for(let F=0;F<D.length;++F)D[F]=pm.recalculateParentT(S.vmin,S.vmax,D[F]);if(!P.equalsRange(0,1))for(let F=0;F<N.length;++F)N[F]=pm.recalculateParentT(P.vmin,P.vmax,N[F]);return Kc(t,e,i,D,N,D.length,n,s,r,o,l,c,f)}function hB(t,e,i=!1){const n=t[1].sub(t[0]);e[1].assign(n.mul(2)),e[2].assign(t[2].sub(t[1]).sub(n)),i?e[0].setCoords(0,0):e[0].assign(t[0])}function itt(t,e,i=!1){const n=Ge(Y,3);t.queryControlPoints(n),hB(n,e,i)}function ntt(t,e,i=!1){const s=new Be(t[1][0]).subE(new Be(t[0][0]));e[1]=s.mul(2),e[2]=new Be(t[2][0]).subE(new Be(t[1][0])).subE(s),i?e[0].set(0):e[0].set(t[0][0])}function stt(t,e,i=!1){const s=new Be(t[1][1]).subE(new Be(t[0][1]));e[1]=s.mul(2),e[2]=new Be(t[2][1]).subE(new Be(t[1][1])).subE(s),i?e[0].set(0):e[0].set(t[0][1])}function nx(t,e,i=!1){const n=_n.constructPoint2D(t[1]),s=n.sub(_n.constructPoint2D(t[0]));e[1]=s.mul(bt.constructInt32(2)),e[2]=_n.constructPoint2D(t[2]).sub(n).sub(s),e[0]=i?new _n(Ho,Ho):_n.constructPoint2D(t[0])}function Wu(t,e,i,n){if(n){if(e<0)return void bl(new ni({start:t[0],end:t[0].add(bie().getUnitVector())}),e,i);if(e>1)return void bl(new ni({start:t[2],end:t[2].add(bie().getUnitVector())}),e-1,i)}if(e<=.5){const s=t[1].clone(),r=new Y;Zs(2,t[0],s,e,r);const o=new Y;Zs(2,s,t[2],e,o);const l=new Y;Zs(2,r,o,e,l),i.assign(l)}else{const s=t[1].clone(),r=new Y;Ks(2,t[0],s,e,r);const o=new Y;Ks(2,s,t[2],e,o);const l=new Y;Ks(2,r,o,e,l),i.assign(l)}}function rtt(t,e,i){K(0)}function ott(t,e,i){K(0)}function att(t,e){e[0].assign(t[0]),e[3].assign(t[2]),cr(t[0],t[1],2/3,e[1]),cr(t[1],t[2],1/3,e[2])}function ltt(t,e,i,n,s,r,o,l,c){const f=Ge(Y,3);t.queryControlPoints(f);const y=Ge(Y,3);if(e.queryControlPoints(y),f[0].equals(y[0])){if(f[1].equals(y[1])&&f[2].equals(y[2]))return i&&(i.length=0,i.push(f[0]),i.push(f[2])),n&&(n.length=0,n.push(0),n.push(1)),s&&(s.length=0,s.push(0),s.push(1)),!0;if(!f[0].equals(y[2]))return!1}return!!(f[0].equals(y[2])&&f[1].equals(y[1])&&f[2].equals(y[0]))&&(n&&(n.length=0,n.push(0),n.push(1),c&&(n[1]=Et(n[0],n[0]=n[1]))),s&&(s.length=0,s.push(1),s.push(0),c&&(s[1]=Et(s[0],s[0]=s[1]))),i&&(i.length=0,i.push(f[0]),i.push(f[2]),c&&(i[1]=Et(i[0],i[0]=i[1]))),!0)}var _T=br;class Gc extends D5{constructor(e){e&&e.cp?(super({start:e.cp[0],end:e.cp[3],vd:e.vd}),this.m_cp=Ge(Y,2),this.m_cp[0].assign(e.cp[1]),this.m_cp[1].assign(e.cp[2])):e===void 0||E7(e,"vd")?(super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=Ge(Y,2),this.m_cp[0].setCoords(0,0),this.m_cp[1].setCoords(0,0)):e.from?(super({start:e.from,end:e.to,vd:e.vd}),this.m_cp=Ge(Y,2),this.m_cp[0].assign(e.cp1),this.m_cp[1].assign(e.cp2)):(super({XStart:0,YStart:0,XEnd:0,YEnd:0,vd:e.vd}),K(0),this.m_cp=Ge(Y,2),this.m_cp[0].setCoords(0,0),this.m_cp[1].setCoords(0,0)),this.m_cachedValues=0}getBoundary(){return sd(this)}assignMove(e){return K(0),this}assignCopy(e){return K(0),this}construct(e,i,n,s){this.m_XStart=e.x,this.m_YStart=e.y,this.m_XEnd=s.x,this.m_YEnd=s.y,this.m_cp[0].assign(i),this.m_cp[1].assign(n),this.afterCompletedModification()}constructPoints(e){this.m_XStart=e[0].x,this.m_YStart=e[0].y,this.m_XEnd=e[3].x,this.m_YEnd=e[3].y,this.m_cp[0].assign(e[1]),this.m_cp[1].assign(e[2]),this.afterCompletedModification()}constructFromQuadratic(e){const i=Ge(Y,4);att(e,i),this.constructPoints(i)}constructFromQuadraticSegment(e){this.dropAllAttributes(),this.assignVertexDescription(e.getDescription()),this.m_XStart=e.getStartX(),this.m_YStart=e.getStartY(),this.m_XEnd=e.getEndX(),this.m_YEnd=e.getEndY(),dE(2,e.getStartXY(),e.getControlPoint1(),2/3,this.m_cp[0]),dE(2,e.getControlPoint1(),e.getEndXY(),1/3,this.m_cp[1]),this.afterCompletedModification(),met(this,e)}getGeometryType(){return me.enumBezier}queryEnvelope(e){if(!(e instanceof xe))return void K(0);if(e.setCoords(this.getStartXY()),e.mergeNe(this.getEndXY()),e.contains(this.m_cp[0])&&e.contains(this.m_cp[1]))return;const i=Bie(this);if(i!==null){const l=new Y;for(const c of i.specialPoints)this.queryCoord2D(c,l),e.mergeNe(l);return}const n=Ge(Be,8),s=Ge(Y,4);this.queryControlPoints(s);const r=yye(s,n),o=new Y;for(let l=1;l<r-1;l++)this.queryCoord2D(n[l].value(),o),e.mergeNe(o)}applyTransformation(e){if(e instanceof _i){const i=Ge(Y,4);return this.queryControlPoints(i),e.transformPoints2D(i,4,i),this.setStartXY(i[0]),this.m_cp[0].assign(i[1]),this.m_cp[1].assign(i[2]),this.setEndXY(i[3]),void iO(this)}K(0)}createInstance(){return new Gc({vd:this.m_description})}calculateLength2D(){return uC(this,1,!1)}calculateLowerLength2D(){return Y.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return Y.distance(this.getStartXY(),this.m_cp[0])+Y.distance(this.m_cp[0],this.m_cp[1])+Y.distance(this.getEndXY(),this.m_cp[1])}calculateUpperLength2D_(){return K(0),0}queryCoord2D(e,i){return this.queryCoord2DExtends(e,i,!0)}queryCoord2DExtends(e,i,n){const s=Ge(Y,4);this.queryControlPoints(s),As(s,e,i,n)}queryCoord2DE(e,i){Ztt(this,e,i)}getCoordX(e){if(e<0||e>1){const l=new Y;return this.queryCoord2DExtends(e,l,!0),l.x}const i=Hi(this.getStartX(),this.m_cp[0].x,e),n=Hi(this.m_cp[0].x,this.m_cp[1].x,e),s=Hi(this.m_cp[1].x,this.getEndX(),e),r=Hi(i,n,e),o=Hi(n,s,e);return Hi(r,o,e)}getCoordY(e){if(e<0||e>1){const l=new Y;return this.queryCoord2DExtends(e,l,!0),l.y}const i=Hi(this.getStartY(),this.m_cp[0].y,e),n=Hi(this.m_cp[0].y,this.m_cp[1].y,e),s=Hi(this.m_cp[1].y,this.getEndY(),e),r=Hi(i,n,e),o=Hi(n,s,e);return Hi(r,o,e)}cut(e,i,n){const s=new Qt;return this.queryCut(e,i,s,n),s.releaseSegment()}queryCut(e,i,n,s){const r=n.createCubicBezier();if(this.cutBezierIgnoreAttributes(e,i,r),s)return;r.assignVertexDescription(this.m_description);const o=this.m_description.getAttributeCount();if(o>1){for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=_T.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(e,c,y);r.setStartAttribute(c,y,_)}}for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=_T.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(i,c,y);r.setEndAttribute(c,y,_)}}}}queryDerivative(e,i){pye(this,e,i)}cutBezierIgnoreAttributes(e,i,n){(e<0||i>1||e>i)&&Je("Cubic_bezier.cut_bezier_ignore_attributes");const s=Ge(Y,4);this.queryControlPoints(s);const r=Ge(Y,4);kv(s,e,i,r),n.setControlPoints(r)}splitBezierIgnoreAttributes(e,i,n){this===i&&this===n&&Je("Cubic_bezier.split_bezier_ignore_attributes");const s=Ge(Y,4);this.queryControlPoints(s);const r=Ge(Y,4),o=Ge(Y,4);dC(s,e,r,o),i&&i.setControlPoints(r),n&&n.setControlPoints(o)}getAttributeAsDbl(e,i,n){if(i===0)return n===0?this.getCoordX(e):this.getCoordY(e);if(e===0)return this.getStartAttributeAsDbl(i,n);if(e===1)return this.getEndAttributeAsDbl(i,n);const s=this.getStartAttributeAsDbl(i,n),r=this.getEndAttributeAsDbl(i,n),o=this.calculateLength2D(),l=o>0?this.tToLength(e)/o:0,c=_T.getInterpolation(i);return w7(c,s,r,l,_T.getDefaultValue(i))}getClosestCoordinate(e,i){const n=[Number.NaN];return pM(this,e,Ze.unit(),i,-1,1,n),n[0]}getClosestCoordinateOnInterval(e,i,n=-1){const s=[Number.NaN];return pM(this,e,i,!1,n,1,s)===0?Number.NaN:s[0]}getYMonotonicParts(e,i=!1){return K(0),0}getMonotonicParts(e,i){e.length<2&&Je("");const n=hC(this);if(n.specialPointsCount()===2&&this.isMonotoneQuickAndDirty())return 0;let s=0;K(e.length>=n.specialPointsCount()-1);for(let r=1,o=n.specialPointsCount();r<o;++r)this.queryCut(n.specialPoints[r-1],n.specialPoints[r],e[s],i),s++;for(let r=0;r<s;++r)fM(e[r].get());return s}intersectionWithAxis2D(e,i,n,s){const r=Ge(Y,4);return this.queryControlPoints(r),rit(r,e,i,n,s)}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const n=[0,0],s=this.intersectionWithAxis2D(!0,e,n,null);return K(s!==2),s===-1?i:n[0]}isCurve(){return!0}isDegenerate(e){return A7(this,e)}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){if(e instanceof xe)return e.setCoords({pt:this.getStartXY()}),e.mergeNe(this.m_cp[0]),e.mergeNe(this.m_cp[1]),void e.mergeNe(this.getEndXY());K(0)}clone(e){const i=this.createInstance();return this.copyTo(i),i}queryInterval(e,i){if(e===0){const n=xe.constructEmpty();this.queryEnvelope(n);const s=Ze.constructEmpty();return i===0?n.queryIntervalX(s):n.queryIntervalY(s),s}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const n=Ge(Y,4);this.queryControlPoints(n),kv(n,e.vmin,e.vmax,n),i.setFromPoints(n,4)}changeEndPoints2D(e,i){if(e.isEqual(this.m_XStart,this.m_YStart)&&i.isEqual(this.m_XEnd,this.m_YEnd))return;const n=this.m_cp[0].isEqual(this.m_XStart,this.m_YStart),s=this.m_cp[0].isEqual(this.m_XEnd,this.m_YEnd),r=this.m_cp[1].isEqual(this.m_XStart,this.m_YStart),o=this.m_cp[1].isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(e),this.setEndXY(i),n?this.m_cp[0].setCoordsPoint2D(e):s&&this.m_cp[0].setCoordsPoint2D(i),o?this.m_cp[1].setCoordsPoint2D(i):r&&this.m_cp[1].setCoordsPoint2D(e),this.normalizeAfterEndpointChange()}tToLength(e){return uC(this,e,!0)}lengthToT(e){return qtt(this,e)}calculateWeightedAreaCentroid2D(e){const i=Ge(Y,4);cye(this,i);const n=i[3],s=i[2],r=i[1],o=new Y;o.x=(5*n.x*n.x*(7*s.y+16*r.y)+n.x*(-35*n.y*s.x+40*s.x*s.y-80*n.y*r.x+140*s.x*r.y+112*r.x*r.y)-2*(n.y*(20*s.x*s.x+70*s.x*r.x+56*r.x*r.x)-7*(4*s.x+5*r.x)*(-s.y*r.x+s.x*r.y)))/840,o.y=(-5*n.y*n.y*(7*s.x+16*r.x)+n.y*(5*n.x*(7*s.y+16*r.y)-4*(10*s.x*s.y+35*s.y*r.x+28*r.x*r.y))+2*(-7*(4*s.y+5*r.y)*(s.y*r.x-s.x*r.y)+n.x*(20*s.y*s.y+70*s.y*r.y+56*r.y*r.y)))/840;const l=Hie(this);return o.x+=(i[0].x-e.x)*l,o.y+=(i[0].y-e.y)*l,o}calculateWeightedCentroid2D(){const e=new Y;return this.isDegenerate(0)?(e.setCoords(0,0),e):ztt(this)?(e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e):(e.assign(Vtt(this,1)),e)}getControlPoint1(){return this.m_cp[0].clone()}setControlPoint1(e){this.m_cp[0].setCoordsPoint2D(e),this.afterCompletedModification()}getControlPoint2(){return this.m_cp[1].clone()}setControlPoint2(e){this.m_cp[1].setCoordsPoint2D(e),this.afterCompletedModification()}queryControlPoints(e){e[0].assign(this.getStartXY()),e[1].assign(this.m_cp[0]),e[2].assign(this.m_cp[1]),e[3].assign(this.getEndXY())}setControlPoints(e){for(let i=0;i<4;i++)e[i].isNAN()&&Je("NAN control points in bezier are not supported");this.m_XStart=e[0].x,this.m_YStart=e[0].y,this.m_cp[0].setCoordsPoint2D(e[1]),this.m_cp[1].setCoordsPoint2D(e[2]),this.m_XEnd=e[3].x,this.m_YEnd=e[3].y,this.afterCompletedModification()}getTangent(e){const i=Ge(Y,4);return this.queryControlPoints(i),oq(i,e)}getDerivative(e){return K(0),Y.getNAN()}getCurvature(e){const i=ev(this,1,e),n=ev(this,2,e),s=i.sqrLength();return s===0?Number.NaN:(i.divThis(Math.sqrt(s)),i.crossProduct(n)/s)}isIntersectingPoint(e,i,n){if(n&&(e.equals(this.getStartXY())||e.equals(this.getEndXY())))return!1;const s=new xe;if(this.queryLooseEnvelope(s),s.inflateCoords(i,i),!s.contains(e))return!1;const r=this.getClosestCoordinate(e,!1),o=new Y;return this.queryCoord2D(r,o),Y.distance(o,e)<=i}isIntersectingPoint3D(e,i,n,s,r=1){return K(0),!1}queryAttributeAsDbl(e,i,n,s){K(0)}isMonotoneQuickAndDirty(){const e=Ge(Y,4);return this.queryControlPoints(e),Xtt(e)}getMonotonicPartParams(e,i){const n=hC(this),s=n.specialPointsCount();if(K(k5.s_maxMonotonicPartParams>=s),!i)return n.specialPointsCount();e<s&&Je("");for(let r=0;r<s;r++)i[r]=n.specialPoints[r];return s}normalizeAfterEndpointChange(){return!1}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){this.m_XEnd=Et(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=Et(this.m_YStart,this.m_YStart=this.m_YEnd);for(let e=0,i=this.m_description.getTotalComponentCount()-2;e<i;e++)this.m_attributes[e+i]=Et(this.m_attributes[e],this.m_attributes[e]=this.m_attributes[e+i]);this.m_cp[1]=Et(this.m_cp[0],this.m_cp[0]=this.m_cp[1]),this.m_cachedValues=null}}findMinDeriv(){const e=new Be;return fye(this,e),e.value()}queryConvexHull2D(e){return K(0),0}isLine(){return!1}isDegenerateToLineHelper(e){return K(0),!1}copyIgnoreAttributes(e){const i=Ge(Y,4);this.queryControlPoints(i),e.setControlPoints(i)}calculateArea2DHelper(){return Hie(this)}absNorm(){return eit(this)}queryEnvelopeW(e,i){mye(this,e,i)}setSegmentFromCoords(e,i){iit(this,e,i)}writeInBufferStream(e,i){const n=new Float64Array(4);return this.writeInBuffer_(n),e.writeRangeFromArray(i,n.length,n,!0,1),i+n.length}writeInBuffer_(e){return e[0]=this.m_cp[0].x,e[1]=this.m_cp[0].y,e[2]=this.m_cp[1].x,e[3]=this.m_cp[1].y,4}readFromBufferStream(e,i){const n=new Float64Array(4);e.queryRange(i,n.length,n,!0,1),this.readFromBuffer_(n)}readFromBuffer_(e){this.m_cp=Ge(Y,2),this.m_cp[0].x=e[0],this.m_cp[0].y=e[1],this.m_cp[1].x=e[2],this.m_cp[1].y=e[3],this.m_cachedValues=null}snapControlPoints(e){const i=Ge(Y,4);this.queryControlPoints(i);const n=(o,l,c)=>{let f=!1;return Y.sqrDistance(o,c)<=e&&(f=!o.equals(c),o.setCoordsPoint2D(c),Y.sqrDistance(l,c)<=e&&(f||(f=!l.equals(c)),l.setCoordsPoint2D(c))),f},s=n(i[1],i[2],i[0]),r=n(i[2],i[1],i[3]);return(s||r)&&this.setControlPoints(i),s||r}needsSnapControlPoints(e){if(!e)return!1;const i=Ge(Y,4);this.queryControlPoints(i);const n=(o,l,c)=>{let f=!1;return Y.sqrDistance(o,c)<=e&&(f=!o.equals(c),o.setCoordsPoint2D(c),Y.sqrDistance(l,c)<=e&&(f||(f=!l.equals(c)),l.setCoordsPoint2D(c))),f},s=n(i[1],i[2],i[0]),r=n(i[2],i[1],i[3]);return s||r}calculateSpecialPointsForCracking(e,i){return oit(this,e,i)}ensureXYMonotone(){return fM(this)}setCoordsForIntersector(e,i,n){Gtt(this,e,i,n)}copyToImpl(e){const i=e;i.m_cp[0].assign(this.m_cp[0]),i.m_cp[1].assign(this.m_cp[1]),dye(i,Bie(this))}reverseImpl(){this.m_cp[1]=Et(this.m_cp[0],this.m_cp[0]=this.m_cp[1])}equalsImpl(e){const i=e;return!!this.m_cp[0].equals(i.m_cp[0])&&!!this.m_cp[1].equals(i.m_cp[1])}equalsImplTol(e,i){const n=e;return!!this.m_cp[0].isEqualPoint2D(n.m_cp[0],i)&&!!this.m_cp[1].isEqualPoint2D(n.m_cp[1],i)}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){iO(this)}isIntersecting(e,i,n){return $5(!1,this,e,i,n)!==0}intersect(e,i,n,s,r){return Qv(!1,this,e,i,n,s,r)}intersectPoint(e,i,n){return Qtt(this,e,i,n)}intersect_(e,i,n,s){return K(0),0}endPointModified(){iO(this)}clearEndPointModified(){K(0)}}Gc.type=me.enumBezier;const Iie=[[.33998104358485626,.6521451548625461],[.8611363115940526,.34785484513745385]],Mie=[[.1834346424956498,.362683783378362],[.525532409916329,.31370664587788727],[.7966664774136267,.22238103445337448],[.9602898564975363,.10122853629037626]],Aie=[[.09501250983763744,.1894506104550685],[.2816035507792589,.18260341504492358],[.45801677765722737,.16915651939500254],[.6178762444026438,.14959598881657674],[.755404408355003,.12462897125553388],[.8656312023878318,.09515851168249279],[.9445750230732326,.062253523938647894],[.9894009349916499,.027152459411754096]],kie=[[.04830766568773832,.0965400885147278],[.1444719615827965,.09563872007927486],[.23928736225213706,.09384439908080457],[.33186860228212767,.09117387869576389],[.42135127613063533,.08765209300440381],[.5068999089322294,.08331192422694675],[.5877157572407623,.07819389578707031],[.6630442669302152,.0723457941088485],[.7321821187402897,.06582222277636185],[.7944837959679424,.058684093478535544],[.84936761373257,.050998059262376175],[.8963211557660521,.04283589802222668],[.9349060759377397,.03427386291302143],[.9647622555875064,.02539206530926206],[.9856115115452684,.01627439473090567],[.9972638618494816,.007018610009470096]],Die=[[.024350292663424433,.048690957009139724],[.07299312178779904,.04857546744150343],[.12146281929612056,.048344762234802954],[.16964442042399283,.04799938859645831],[.21742364374000708,.04754016571483031],[.2646871622087674,.04696818281621002],[.31132287199021097,.046284796581314416],[.3572201583376681,.04549162792741814],[.4022701579639916,.044590558163756566],[.4463660172534641,.04358372452932345],[.48940314570705296,.04247351512365359],[.5312794640198946,.04126256324262353],[.571895646202634,.03995374113272034],[.6111553551723933,.038550153178615626],[.6489654712546573,.03705512854024005],[.6852363130542333,.035472213256882386],[.7198818501716109,.033805161837141606],[.7528199072605319,.03205792835485155],[.7839723589433414,.030234657072402478],[.8132653151227975,.028339672614259483],[.8406292962525803,.02637746971505466],[.8659993981540928,.024352702568710874],[.8893154459951141,.022270173808383253],[.9105221370785028,.02013482315353021],[.9295691721319396,.017951715775697343],[.9464113748584028,.015726030476024718],[.9610087996520538,.013463047896718643],[.973326827789911,.011168139460131128],[.983336253884626,.008846759826363947],[.9910133714767443,.006504457968978363],[.9963401167719553,.004147033260562468],[.9993050417357722,.001783280721696433]],Nie=[[.012223698960615764,.024446180196262518],[.03666379096873349,.024431569097850044],[.06108196960413957,.02440235563384958],[.08546364050451549,.024358557264690626],[.10979423112764375,.024300200167971867],[.13405919946118777,.02422731922281525],[.15824404271422493,.024139957989019287],[.18233430598533718,.024038168681024052],[.2063155909020792,.023922012136703457],[.23017356422666,.023791557781003402],[.2538939664226943,.023646883584447616],[.2774626201779044,.02348807601653591],[.3008654388776772,.02331522999406276],[.32408843502441337,.023128448824387027],[.3471177285976355,.022927844143686846],[.369939555349859,.02271353585023646],[.39254027503326744,.022485652032744968],[.414906379552275,.022244328893799764],[.43702450103710416,.02198971066846049],[.4588814198335522,.021721949538052076],[.48046407240417205,.02144120553920846],[.5017595591361445,.02114764646822135],[.5227551520511755,.02084144778075115],[.5434383024128103,.02052279248696007],[.5637966482266181,.020191871042130043],[.5838180216287631,.01984888123283086],[.6034904561585486,.019494028058706602],[.6228021939105849,.019127523609950944],[.6417416925623075,.01874958694054471],[.660297632272646,.01836044393733134],[.6784589224477192,.017960327185008687],[.6962147083695144,.017549475827117706],[.7135543776835874,.01712813542311138],[.7304675667419088,.016696557801589205],[.746944166797062,.016255000909785187],[.7629743300440948,.015803728659399347],[.7785484755064119,.015343010768865144],[.7936572947621933,.014873122602147314],[.8082917575079137,.014394345004166847],[.8224431169556439,.013906964132951985],[.8361029150609068,.013411271288616333],[.8492629875779689,.012907562739267348],[.8619154689395485,.012396139543950923],[.8740527969580318,.01187730737274028],[.8856677173453972,.011351376324080417],[.8967532880491582,.010818660739503076],[.9073028834017568,.010279479015832158],[.9173101980809605,.009734153415006806],[.9267692508789478,.009183009871660874],[.9356743882779164,.00862637779861675],[.9440202878302202,.008064589890486059],[.9518019613412644,.0074979819256347285],[.9590147578536999,.006926892566898814],[.9656543664319652,.006351663161707189],[.9717168187471366,.005772637542865698],[.9771984914639074,.00519016183267633],[.9820961084357185,.004604584256702955],[.9864067427245862,.004016254983738642],[.9901278184917344,.0034255260409102157],[.9932571129002129,.0028327514714579912],[.9957927585349812,.0022382884309626186],[.997733248625514,.0016425030186690294],[.9990774599773758,.0010458126793403489],[.9998248879471319,.00044938096029209035]];function ff(t,e,i,n){const s=.5*(n-i),r=i+s,o=new Br(0);for(let l=0,c=Math.trunc(t/2);l<c;++l){let f,y;switch(t){case 4:f=Iie[l][0],y=Iie[l][1];break;case 8:f=Mie[l][0],y=Mie[l][1];break;case 16:f=Aie[l][0],y=Aie[l][1];break;case 32:f=kie[l][0],y=kie[l][1];break;case 64:f=Die[l][0],y=Die[l][1];break;case 128:f=Nie[l][0],y=Nie[l][1];break;default:throw new Error("Quadrature_integral: invalid n")}const _=Vte(-.5,f,r),x=Vte(s,f,r);o.pe(e(_)*y),o.pe(e(x)*y)}return o.getResult()*s}class ctt{constructor(){this.length=Number.NaN,this.area=Number.NaN,this.centroidX=Number.NaN,this.centroidY=0,this.specialPoints=[],this.specialPointsLength=[]}specialPointsCount(){return this.specialPoints.length}}function Kz(t,e,i,n,s,r,o,l){for(;;){const c=Y.distance(e[0],e[2]),f=Y.distance(e[0],e[1])+Y.distance(e[1],e[2]);if(f-c<=s+n*f)return t+Hi(c,f,.5);const y=Ge(Y,4),_=J=>(x2(e,i,1,J,y),y[1].length());if(o===0&&l<8){K(l<8);let J=_(0),re=_(1);r[0]+=2,J>re&&(re=Et(J,J=re),e[2]=Et(e[0],e[0]=e[2]),i[2]=Et(i[0],i[0]=i[2]));let ne=J/(J+re),oe=1,pe=f;for(;ne<1/32&&pe>=s+n*pe;){oe/=4;const ce=_(oe);r[0]++,ne=J/(ce+J);const ue=new Y;if(Ws(e,i,.5*oe,ue),pe=Y.distance(ue,e[0]),pe<=s){const se=new Y;Ws(e,i,oe,se),pe+=Y.distance(se,ue)}}if(oe!==1){const ce=Ge(Y,3),ue=[0,0,0];Fie(e,i,oe,e,i,ce,ue),t=Kz(t,ce,ue,n,s,r,0,l+1),o++,l++;continue}}let x=!1;const S=8;r[0]+=S;const P=ff(S,_,0,1),A=16;r[0]+=A;const D=ff(A,_,0,1);if(x=Math.abs(P-D)>s+n*f,!x)return t+D;if(o<8&&l<9){const J=Ge(Y,3),re=[0,0,0];Fie(e,i,.5,e,i,J,re),t=Kz(t,J,re,n,s,r,o+1,l+1),o++,l++;continue}const N=32;r[0]+=N;const F=ff(N,_,0,1);if(x=Math.abs(D-F)>s+n*f,!x)return t+F;const G=64;r[0]+=G;const V=ff(G,_,0,1);if(x=Math.abs(F-V)>s+n*f,!x)return t+V;const B=128;r[0]+=B;const W=ff(B,_,0,1);return x=Math.abs(V-W)>s+n*f,t+W}}function utt(t,e,i,n,s){if(i===e)return 0;const r=Ge(Y,3),o=[0,0,0];t.queryControlPoints(r),t.queryWeights(o);const l=[0,0,0],c=Ge(Y,3);return Av(r,o,e,i,c,l),Kz(0,c,l,n,s,[0],0,0)}let htt=class{constructor(t,e,i){this.controlPoints=tM(t,3),this.weights=[0,0,0],fs(this.weights,e,0,0,3),this.point=i.clone()}getMaxDerivative(){return 3}getValue(t,e){if(t===0){const i=new Y;Ws(this.controlPoints,this.weights,e,i);const n=Ge(Y,4);return x2(this.controlPoints,this.weights,1,e,n),2*i.sub(this.point).dotProduct(n[1])}if(t===1){const i=new Y;Ws(this.controlPoints,this.weights,e,i);const n=Ge(Y,4);return x2(this.controlPoints,this.weights,2,e,n),2*(i.sub(this.point).dotProduct(n[2])+n[1].dotProduct(n[1]))}if(t===2){const i=new Y;Ws(this.controlPoints,this.weights,e,i);const n=Ge(Y,4);return x2(this.controlPoints,this.weights,3,e,n),2*(i.sub(this.point).dotProduct(n[3])+3*n[1].dotProduct(n[2]))}return 0}getError(t){return K(0),0}};function dtt(t,e,i,n){const s=Ttt(0,0,0,0,Y.getNAN()),r=new Array(18),o=Ge(Y,3);t.queryControlPoints(o),o[2].subThis(e),o[1].subThis(e),o[0].subThis(e);const l=[0,0,0];t.queryWeights(l);const c=[1,md(l),1],f=cC(l,i),y=cC(l,n),_=r1(new htt(o,c,new Y(0,0)),Ze.construct(f,y),18,r);Ws(o,c,f,s.pt),s.t=f,s.d=Y.distance(s.pt,new Y(0,0));const x=new Y;Ws(o,c,y,x);const S=Y.distance(x,new Y(0,0));S<s.d&&(s.d=S,s.t=y,s.pt.assign(x));for(let P=0;P<_;P++){Ws(o,c,r[P],x);const A=Y.distance(x,new Y(0,0));A<s.d&&(s.d=A,s.t=ox(l,r[P]),s.pt.assign(x))}return s}function ftt(t,e,i,n,s){let r=!0;const o=Ge(Y,4),l=ix(5,e,i,n,s,f=>(Oie(t,1,f,o),(r?t.getCoordX(f)-t.getStartX():t.getCoordY(f)-t.getStartY())*o[1].length()));r=!1;const c=ix(5,e,i,n,s,f=>(Oie(t,1,f,o),(r?t.getCoordX(f)-t.getStartX():t.getCoordY(f)-t.getStartY())*o[1].length()));return new Y(l,c)}function bT(t){t.m_cachedValues=null}function rC(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new ctt,i=Ge(Y,3);t.queryControlPoints(i);const n=[0,0,0];return t.queryWeights(n),iye(i,n,e.specialPoints),sye(t,e),e}function iye(t,e,i){if(e[1]===0)return i.length=2,i[0]=0,void(i[1]=1);const n=Ge(Be,8);n[0].set(0);let s=1;{const r=new Be(t[1].x).subThis(t[0].x).mulThis(e[1]).mulThis(e[0]),o=new Be(t[2].x).subThis(t[0].x).mulThis(e[2]).mulThis(e[0]),l=r.subE(o).addThisE(new Be(t[2].x).subThis(t[1].x).mulThis(e[2]).mulThis(e[1]));o.subThisE(r.mul(2));const c=Ge(Be,2);let f=Tl(l,o,r,new Ze(0,1),!1,c);f<0&&(f=0);for(let y=0;y<f;y++)An(c[y].value(),0,1)||(n[s]=c[y],s++)}{const r=new Be(t[1].y).subThis(t[0].y).mulThis(e[1]).mulThis(e[0]),o=new Be(t[2].y).subThis(t[0].y).mulThis(e[2]).mulThis(e[0]),l=r.subE(o).addThisE(new Be(t[2].y).subThis(t[1].y).mulThis(e[2]).mulThis(e[1]));o.subThisE(r.mul(2));const c=Ge(Be,2);let f=Tl(l,o,r,new Ze(0,1),!1,c);f<0&&(f=0);for(let y=0;y<f;y++)An(c[y].value(),0,1)||(n[s]=c[y],s++)}if(n[s].set(1),s++,s>2){dd(n,0,s,(c,f)=>Mf(c.value(),f.value()));let r=0,o=n[0].value(),l=1;for(let c=1;c<s;c++)n[c].eq(n[c-1])?(o+=n[c].value(),l++):(l>1&&(o/=l,n[r].set(o)),r++,n[r]=n[c],o=n[c].value(),l=1);r++,s=r}n[0].set(0),n[s-1].set(1),i.length=s;for(let r=0;r<s;r++)i[r]=n[r].value()}function oC(t,e,i){if(i){if(e<0)return e;if(e>1)return e-1+oC(t,1,!1)}if(t.isDegenerate(0))return 0;const n=e===1,s=rC(t);if(n&&!Number.isNaN(s.length))return s.length;const r=nye(t),o=r/t.calculateUpperLength2D();let l=0,c=0;for(let f=1,y=s.specialPointsCount();f<y;f++){const _=s.specialPoints[f];if(l+=utt(t,c,Math.min(e,_),o,r),e<=_)break;c=_}return n&&(s.length=l),l}function Oie(t,e,i,n){const s=Ge(Y,3);t.queryControlPoints(s);const r=[0,0,0];t.queryWeights(r),x2(s,r,e,i,n)}function x2(t,e,i,n,s){const r=[t[0],t[1],t[2]],o=[e[0],e[1],e[2]],l=Ge(Y,4);ptt(r,o,i,n,l);for(let c=0;c<=i;c++)s[c].setCoords(l[c].x,l[c].y)}function ptt(t,e,i,n,s){K(i>0);const r=[t[0].clone(),t[1].clone(),t[2].clone()];if(!r[0].isZero()){for(let G=1;G<3;++G)r[G].subThis(r[0]);r[0].setCoords(0,0)}const o=xT(r,e,0,n),l=tO(e,0,n),c=o.divide(l);if(s[0].assign(c),i===0)return;const f=[e[1]*e[0],e[2]*e[0]*.5,e[1]*e[2]],y=[t[1].sub(t[0]),t[2].sub(t[0]),t[2].sub(t[1])],_=l*l,x=xT(y,f,0,n).mul(2).divide(_);if(s[1].assign(x),i===1)return;const S=tO(e,1,n),P=2*l*S,A=xT(y,f,1,n).mul(2).sub(x.mul(P)).divide(_);if(s[2].assign(A),i===2)return;const D=xT(y,f,2,n).mul(2),N=2*(S*S+l*tO(e,2,n)),F=D.sub(A.mul(P).mul(2)).sub(x.mul(N)).divide(_);s[3].assign(F),i!==3&&xt("")}function xT(t,e,i,n){if(i===0){if(n<=.5){const s=new Y;Zs(2,t[0].mul(e[0]),t[1].mul(e[1]),n,s);const r=new Y;Zs(2,t[1].mul(e[1]),t[2].mul(e[2]),n,r);const o=new Y;return Zs(2,s,r,n,o),o}{const s=new Y;Ks(2,t[0].mul(e[0]),t[1].mul(e[1]),n,s);const r=new Y;Ks(2,t[1].mul(e[1]),t[2].mul(e[2]),n,r);const o=new Y;return Ks(2,s,r,n,o),o}}if(i===1){const s=t[1].mul(e[1]),r=s.sub(t[0].mul(e[0])).mul(1-n).add(t[2].mul(e[2]).sub(s).mul(n));return r.mulThis(2),r}if(i===2){const s=t[1].mul(e[1]),r=t[2].mul(e[2]).sub(s).sub(s.sub(t[0].mul(e[0])));return r.mulThis(2),r}xt("")}function $ie(t,e,i,n){if(n.toDouble()<=.5){const s=new Ht;af(2,t[0].mulE(e[0]),t[1].mulE(e[1]),n,s);const r=new Ht;af(2,t[1].mulE(e[1]),t[2].mulE(e[2]),n,r);const o=new Ht;return af(2,s,r,n,o),o}{const s=new Ht;lf(2,t[0].mulE(e[0]),t[1].mulE(e[1]),n,s);const r=new Ht;lf(2,t[1].mulE(e[1]),t[2].mulE(e[2]),n,r);const o=new Ht;return lf(2,s,r,n,o),o}}function tO(t,e,i){if(e===0){const n=Hi(t[0],t[1],i),s=Hi(t[1],t[2],i);return Hi(n,s,i)}if(e===1)return 2*((1-i)*(t[1]-t[0])+(t[2]-t[1])*i);if(e===2)return 2*(t[2]-t[1]-(t[1]-t[0]));xt("")}function mtt(t,e,i){if(i.toDouble()<=.5){const n=Mu(t[0],t[1],i),s=Mu(t[1],t[2],i);return Mu(n,s,i)}{const n=Au(t[0],t[1],i),s=Au(t[1],t[2],i);return Au(n,s,i)}}function gtt(t,e,i,n,s){const r=[Ht.constructPoint2D(t[0]),Ht.constructPoint2D(t[1]),Ht.constructPoint2D(t[2])];r[2].subThisE(r[0]),r[1].subThisE(r[0]),r[0].setCoords(0,0),ytt(r,[new Be(e[0]),new Be(e[1]),new Be(e[2])],i,n,s)}function ytt(t,e,i,n,s){K(i>0);const r=[t[0].clone(),t[1].clone(),t[2].clone()];if(!r[0].isZero()){for(let S=1;S<3;++S)r[S].subThisE(r[0]);r[0]=Ht.constructCoords(0,0)}const o=$ie(r,e,0,n),l=mtt(e,0,n),c=o.divE(l);s[0].setE(c);const f=[e[1].mulE(e[0]),e[2].mulE(e[0]).mul(.5),e[1].mulE(e[2])],y=$ie([t[1].subE(t[0]),t[2].subE(t[0]),t[2].subE(t[1])],f,0,n).mul(2),_=l.sqr(),x=y.divE(_);s[1].setE(x)}function vtt(t,e,i){const n=Ge(Y,3);t.queryControlPoints(n);const s=new Array(3);t.queryWeights(s),_tt(n,s,e,i)}function _tt(t,e,i,n){i.value()<0&&i.set(0,i.eps()),i.value()>1&&i.set(1,i.eps());const s=Ge(Ht,4);gtt(t,e,1,i,s),n.setE(s[1])}function Jz(t,e,i){const n=hs(i,0,1),s=Ge(Y,4);if(x2(t,e,3,n,s),s[1].isZero()){if(s[2].isZero())return s[3];{const r=s[2].clone();return n===1&&r.negateThis(),r}}return s[1]}class btt{constructor(e,i){this.len=0,this.b=e,this.len=i}getMaxDerivative(){return 1}getValue(e,i){return e===0?this.len-oC(this.b,i,!1):0}getError(e){return K(0),0}}function xtt(t,e,i){const n=oC(t,1,!1);if(e<=0)return e;if(e>=n)return e-n+1;const s=[0];return r1(new btt(t,e),Ze.unit(),1,s)!==1&&xt(""),s[0]}function Rie(t){const e=Ge(Y,3),i=[0,0,0];return t.queryControlPoints(e),t.queryWeights(i),wtt(e,i)}function wtt(t,e){const i=md(e);if(i===1)return K1e(t);if(i===0)return 0;const n=[new Y(0,0),t[1].sub(t[0]),t[2].sub(t[0])],s=n[1].crossProduct(n[2]);if(i<1){K(i>0);const r=1-i;let o;if(r<.01)o=-1/3+r*(2/15+r*(3/35+r*(16/315+r*(20/693+r*(16/1001+r*(56/6435))))));else{const l=r*(1+i),c=Math.atan2(Math.sqrt(r),Math.sqrt(1+i));o=i*(.5*i-aQe(l)*c)/l}return s*o}{const r=(i-1)*(i+1);return .25*i/Math.pow(r,1.5)*(-2*i*Math.sqrt(r)*s-4*n[1].y*n[2].x*Math.atanh(Math.sqrt((i-1)/(i+1)))-n[1].x*n[2].y*Math.log(2*i*(i-Math.sqrt(r))-1))}}function Stt(t,e){const i=md(e);if(i===1){const r=Ge(Y,3);hB(t,r);const o=r[2].clone(),l=r[1].clone(),c=new Y,f=o.y*l.x-o.x*l.y;return c.x=-(4*o.x+5*l.x)*f/60,c.y=-(4*o.y+5*l.y)*f/60,c}if(i===0)return new Y(0,0);K(i>0);const n=t[1].sub(t[0]),s=t[2].sub(t[0]);if(i<1){const r=Math.sqrt(1-i),o=Math.sqrt(1+i),l=(n.y*s.x-n.x*s.y)*i/Math.pow(r*o,5)/12,c=Math.atan2(r,o),f=i*r*o,y=i*i,_=n.mul(2*(2+y)),x=s.mul(2*y-5),S=_.add(x).mul(f),P=s.sub(n.mul(2*y)).mul(6*c);return S.add(P).mul(l)}{const r=Math.sqrt(i-1),o=Math.sqrt(i+1),l=(n.y*s.x-n.x*s.y)*i/Math.pow(r*o,5)/12,c=Math.atanh(r/o),f=i*r*o,y=i*i,_=n.mul(4).sub(s.mul(5)),x=n.add(s).mul(2*y),S=_.add(x).mul(f),P=s.sub(n.mul(2*y)).mul(6*c);return S.add(P).mul(l)}}function Ett(t){const e=Ge(Y,3),i=[0,0,0];return t.queryControlPoints(e),t.queryWeights(i),Stt(e,i)}function nye(t){return Ctt(t.calculateUpperLength2D())}function Ctt(t){return 256*ts()*t}function Ptt(t){if(t.m_weights[1]===0)return!0;const e=Y.distance(t.getStartXY(),t.getEndXY()),i=t.calculateUpperLength2D();return i-e<=8*Number.EPSILON*i}function Lie(t){return t.m_cachedValues}function sye(t,e){t.m_cachedValues=e}function Qz(t,e,i,n,s){const r=Ge(Y,3);t.queryControlPoints(r);const o=[0,0,0];t.queryWeights(o);const l=[0];return dB(r,o,e,Ze.unit(),n,s,1,l)===1?l[0]:Number.NaN}function dB(t,e,i,n,s,r,o,l){ZE(Ze.unit().contains(n)&&o>0,""),(r<0||Number.isNaN(r))&&(r=Number.MAX_VALUE);const c=new Array(3);for(let $e=0;$e<3;++$e)c[$e]=t[$e].sub(i);const f=md(e),y=_n.constructPoint2D(c[0]),_=_n.constructPoint2D(c[1]),x=_n.constructPoint2D(c[2]),S=bt.constructDouble(f),P=S.clone();P.ldexpThis(1);const A=y.dotProduct(_.sub(y)).mul(S),D=S.mul(S.addDouble(2)),N=x.sub(_.mul(D.ldexp(1))),F=_.sqrLength().mul(S.mul(S).ldexp(1)).add(y.sqrLength().mul(S.ldexp(2).subDouble(1))).add(y.dotProduct(N)),G=x.sub(_.mul(P)).add(y.mul(P.subDouble(1))),V=_.mul(S).sub(y).dotProduct(G).mulDouble(3),B=_.dotProduct(x).mul(S.subDouble(3).mul(S)).ldexp(1),W=_.sqrLength().mul(S.mul(S).ldexp(2)),J=y.sqrLength().mul(S.ldexp(2).subDouble(3)),re=y.dotProduct(x.sub(_.mul(S.mulDouble(3).subDouble(1)).mul(S))).ldexp(1),ne=x.sqrLength().addThis(B).addThis(W).addThis(J).addThis(re),oe=y.add(x).sub(_.mul(P)),pe=S.subDouble(1),ce=x.sub(y).dotProduct(oe).mul(pe),ue=new Y(0,0),se=[];let de=new Y;Ws(c,e,n.vmin,de);let Se=Y.distance(de,ue);if(Se<=r&&se.push(new Y(n.vmin,Se)),n.vmin!==n.vmax&&(Ws(c,e,n.vmax,de),Se=Y.distance(de,ue),Se<=r&&se.push(new Y(n.vmax,Se))),n.width()>0){const $e=c[2].isZero(),we=Ge(bt,4),Fe=B1e(ce,ne,V,F,A,58,n,$e,we);for(let it=0;it<Fe;it++){if(!n.containsExclusiveCoordinate(we[it].toDouble()))continue;let _t=we[it].toDouble();_t=ox(e,_t);const ot=new Y;Ws(c,e,_t,ot),Se=Y.distance(ot,ue),Se<=r&&se.push(new Y(_t,Se))}}if(s){K(n.equals(Ze.unit()));{Ws(c,e,-1,de,!0);const $e=new Y;Ws(c,e,0,$e);const we=new ni({start:de,end:$e}),Fe=we.getClosestCoordinate(ue,!0);Fe<1&&(de=we.getCoord2D(Fe),Se=Y.distance(de,ue),Se<=r&&se.push(new Y(Fe-1,Se)))}{Ws(c,e,2,de,!0);const $e=new Y;Ws(c,e,n.vmax,$e);const we=new ni({start:$e,end:de}),Fe=we.getClosestCoordinate(ue,!0);Fe>0&&(de=we.getCoord2D(Fe),Se=Y.distance(de,ue),Se<=r&&se.push(new Y(1+Fe,Se)))}}if(!se.length)return 0;se.sort(($e,we)=>$e.compare(we));let Pe=0;const Re=se[0].x;if(l[Pe++]=Re,Pe<o){const $e=I1e(c,4,!1).total(),we=se[0].y;for(let Fe=1,it=se.length;Fe<it;Fe++)if(se[Fe].y>we+$e){se.length=Fe;break}se.sort((Fe,it)=>Mf(Fe.x,it.x)),Pe=0,l[Pe++]=se[0].x;for(let Fe=1,it=se.length;Fe<it;Fe++)se[Fe].x!==l[Pe-1]&&Pe<o&&(l[Pe++]=se[Fe].x)}return Pe}function Ttt(t,e,i,n,s){return{tmin:t,tmax:e,t:i,d:n,pt:s.clone()}}function Itt(t,e,i,n,s){const r=new Xr;if(rye(t,Ze.unit(),r),r.inflate(n),!r.isIntersectingPoint2D(e))return 0;const o=rC(t);let l=0;const c=[];let f=o.specialPoints[0];for(let y=1,_=o.specialPoints.length;y<_;++y){const x=o.specialPoints[y],S=dtt(t,e,f,x);if(c.length===0)c.push(S);else if(S.t===S.tmin)K(c.at(-1).d<=S.d),c.at(-1).tmax=S.tmax;else if(c.at(-1).t===c.at(-1).tmax){K(c.at(-1).d>=S.d);const P=c.at(-1).tmin;c[c.length-1]=S,c.at(-1).tmin=P}else c.push(S);f=x}for(const y of c)if(y.d<=n){const _=y.t;i&&(i[l]=_),l++}return l}function rye(t,e,i){const n=Ge(Y,3);t.queryControlPoints(n);const s=[0,0,0];t.queryWeights(s),aC(n,s,e,i)}function aC(t,e,i,n){if(i.equalsRange(0,1))return void n.setFromPoints(t,3);const s=Ge(Y,3),r=[0,0,0];Av(t,e,i.vmin,i.vmax,s,r),n.setFromPoints(s,3)}function N7(t){const e=Qn(t[0].y,t[1].y),i=Qn(t[1].y,t[2].y);if(e>=0&&i>=0||e<=0&&i<=0){const n=Qn(t[0].x,t[1].x),s=Qn(t[1].x,t[2].x);if(n>=0&&s>=0||n<=0&&s<=0)return!0}return!1}function eq(t){const e=Ge(Y,3);t.queryControlPoints(e);const i=sx(e);return i&&(t.m_cp.setCoordsPoint2D(e[1]),t.afterCompletedModification()),i}function sx(t){let e=!1;for(let i=0;i<2;i++){const n=Qn(t[0][i],t[2][i]);n>0?(Qn(t[0][i],t[1][i])<0&&(t[1][i]=t[0][i],e=!0),Qn(t[1][i],t[2][i])<0&&(t[1][i]=t[2][i],e=!0)):n<0?(Qn(t[0][i],t[1][i])>0&&(t[1][i]=t[0][i],e=!0),Qn(t[1][i],t[2][i])>0&&(t[1][i]=t[2][i],e=!0)):t[1][i]!==t[0][i]&&(t[1][i]=t[0][i],e=!0)}return e}function Mtt(t,e,i){i===void 0&&(i=e,e=0);const n=new Y;if(e<0||i>1)return n.setNAN(),n;if(e>i&&Je("calculate_sub_weighted_centroid"),e===i||t.isDegenerate(0))return n.setCoords(0,0),n;const s=rC(t),r=nye(t),o=r/t.calculateUpperLength2D();let l=e,c=0;for(let f=1,y=s.specialPointsCount();f<y;f++)if(e<s.specialPoints[f]){c=f-1;break}n.setCoords(0,0);for(let f=c+1,y=s.specialPointsCount();f<y;f++){const _=Math.min(s.specialPoints[f],i),x=ftt(t,l,_,o,r);if(n.addThis(x),l=_,i<=s.specialPoints[f])break}return n.add(t.getStartXY().mul(t.calculateLength2D()))}function Fie(t,e,i,n,s,r,o){K(i>=0&&i<=1&&n!==r&&s!==o),K(e[0]>0&&e[2]>0&&e[1]>=0);const l=[1,md(e),1],c=cC(e,i),f=tM(t,3),y=Ge(ii,3);oye(f,l,y);const _=Ge(ii,3),x=Ge(ii,3);nq(y,c,n?_:null,r?x:null),sq(e,i,s,o);const S=N7(f);if(n){for(let P=0;P<3;++P)tq(_[P],n[P]);rq(f,n),S&&sx(n)}if(r){for(let P=0;P<3;++P)tq(x[P],r[P]);rq(f,r),S&&sx(r)}}function Av(t,e,i,n,s,r){if(K(i>=0&&n<=1&&i<=n),i===n){const y=new Y,_=aye(t,e,i,y);return fB(t,y),s[0].assign(y),s[1].assign(y),s[2].assign(y),r[0]=_,r[1]=_,void(r[2]=_)}if(i===0&&n===1)return s[0].assign(t[0]),s[1].assign(t[1]),s[2].assign(t[2]),r[0]=e[0],r[1]=e[1],void(r[2]=e[2]);const o=Ge(ii,3);{const y=[1,md(e),1],_=cC(e,i),x=cC(e,n);oye(t,y,o),nq(o,x,o,null),nq(o,_>=x?1:_/x,null,o)}const l=[0,0,0];sq(e,n,l,null),sq(l,i/n,null,l);const c=N7(t),f=Ge(Y,3);tq(o[1],f[1]),Ws(t,e,i,f[0]),Ws(t,e,n,f[2]),rq(t,f);for(let y=0;y<3;++y)s[y].assign(f[y]),r[y]=l[y];c&&sx(s)}function Att(t,e,i,n){if(e.isEqual(t.m_XStart,t.m_YStart)&&i.isEqual(t.m_XEnd,t.m_YEnd))return;const s=!!n&&t.isMonotoneQuickAndDirty(),r=new _i,o=Ge(Y,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const l=new Y;l.setSub(o[2],o[0]),l.leftPerpendicularThis(),o[1].setAdd(o[0],l);const c=Ge(Y,3);c[0].setCoordsPoint2D(e),c[2].setCoordsPoint2D(i),l.setSub(c[2],c[0]),l.leftPerpendicularThis(),c[1].setAdd(c[0],l),r.setFromTwoTriangles(o,c)?r.transformInPlace(t.m_cp):cr(e,i,.5,t.m_cp),t.changeEndPoints2D(e,i),s&&eq(t)}function zie(t,e,i,n,s){if(s){if(Im(e,i)!==0)return t?4:2}else if(s1(e,i))return 1;return rx(t,e,i,null,null,null,n,s!==void 0&&s,!0,!1)!==0?4:0}function qie(t,e,i,n,s){return K(0),0}function ktt(t,e){const i=t.getEndXY().sub(t.getStartXY()),n=i.length(),s=t.getControlPoint1();return s.subThis(t.getStartXY()),!(Math.abs(s.crossProduct(i))/n>e)}function Dtt(t,e,i,n,s){if(s){const r=Im(e,i);if(r!==0){if(t){if(r===1){if(e.m_weights[0]===i.m_weights[0]&&e.m_weights[1]===i.m_weights[1]&&e.m_weights[2]===i.m_weights[2])return 2}else if(e.m_weights[0]===i.m_weights[2]&&e.m_weights[1]===i.m_weights[1]&&e.m_weights[2]===i.m_weights[0])return 2;return 4}return 2}}else if(s1(e,i))return 1;return lC(t,e,i,null,null,null,n,s!==void 0&&s,!0,!1)!==0?4:0}function Vie(t,e,i,n,s){return K(0),0}function rx(t,e,i,n,s,r,o,l,c,f){if(s!==null&&(s.length=0),r!==null&&(r.length=0),n!==null&&(n.length=0),i.isDegenerate(0)){const ut=[0,0],Pt=e.intersectPoint(i.getStartXY(),ut,o);if(Pt>0){if(s!==null)for(let Vt=0;Vt<Pt;Vt++)s.push(ut[Vt]);if(r!=null)for(let Vt=0;Vt<Pt;Vt++)r.push(0);if(n!=null)for(let Vt=0;Vt<Pt;Vt++){const Ft=new Y;e.queryCoord2D(ut[Vt],Ft),n.push(Ft)}}return Pt}const y=Ll(e,i);if(o=Math.max(o,y),e.isDegenerateToLineHelper(y)){const ut=new ni({start:e.getStartXY(),end:e.getEndXY()}),Pt=k7(ut,i,n,s,r,o,l,f);if(s)for(let Vt=0;Vt<Pt;++Vt){const Ft=ut.getCoord2D(s[Vt]);s[Vt]=e.getClosestCoordinate(Ft,!1)}return Pt}if(Zc(e,i,o))return 0;const _=Ge(Y,3);e.queryControlPoints(_);const x=[0,0,0];e.queryWeights(x);const S=[1,md(x),1],P=i.getEndXY().sub(i.getStartXY()),A=P.clone();A.leftPerpendicularThis();const D=_[0].clone(),N=_[1].clone(),F=_[2].clone(),G=N.sub(D),V=F.sub(D),B=F.sub(N),W=S[0],J=S[1],re=S[2],ne=W*J,oe=W*re,pe=J*re,ce=G.dotProduct(A)*ne,ue=V.dotProduct(A)*oe;let se=ce,de=ue-2*ce,Se=B.dotProduct(A)*pe+ue-ue;const Pe=new Array(13),Re=new Array(13);let $e=Mv(Se,de,se,Ze.unit(),!1,Pe);$e<0&&(Pe[0]=0,Pe[1]=1,$e=2);let we=0;for(let ut=0,Pt=we;ut<$e;++ut){const Vt=new Y;Ws(_,S,Pe[ut+Pt],Vt),Re[we]=i.getClosestCoordinate(Vt,!1),Y.distance(Vt,i.getCoord2D(Re[we]))<=o&&(Pe[we]=Pe[ut+Pt],we++)}const Fe=Ge(Y,3),it=Ge(Y,3);if(e.queryControlPoints(it),it[0].subThis(i.getStartXY()),it[1].subThis(i.getStartXY()),it[2].subThis(i.getStartXY()),Ntt(it,S,Fe,!1),Math.abs(P.x)>=Math.abs(P.y)){const ut=P.y/P.x;Se=Fe[2].y-Fe[2].x*ut,de=Fe[1].y-Fe[1].x*ut,se=Fe[0].y-Fe[0].x*ut}else{const ut=P.x/P.y;Se=Fe[2].x-Fe[2].y*ut,de=Fe[1].x-Fe[1].y*ut,se=Fe[0].x-Fe[0].y*ut}const _t=e.getEndXY().equals(i.getStartXY())||e.getEndXY().equals(i.getEndXY()),ot=[0,0];$e=Mv(Se,de,se,Ze.unit(),_t,ot);for(let ut=0,Pt=we;ut<$e;++ut){Pe[ut+Pt]=ot[ut];const Vt=new Y;Ws(_,S,Pe[ut+Pt],Vt),Re[we]=i.getClosestCoordinate(Vt,!1),Y.distance(Vt,i.getCoord2D(Re[we]))<=o&&(Pe[we]=Pe[ut+Pt],we++)}K(we<Pe.length+4);for(let ut=0;ut<we;ut++)Pe[ut]=ox(x,Pe[ut]);$e=e.intersectPoint(i.getStartXY(),ot,o);for(let ut=0;ut<$e;ut++)Pe[we]=ot[ut],Re[we++]=0;$e=e.intersectPoint(i.getEndXY(),ot,o);for(let ut=0;ut<$e;ut++)Pe[we]=ot[ut],Re[we++]=1;$e=i.intersectPoint(e.getStartXY(),ot,o);for(let ut=0;ut<$e;ut++)Re[we]=ot[ut],Pe[we++]=0;$e=i.intersectPoint(e.getEndXY(),ot,o);for(let ut=0;ut<$e;ut++)Re[we]=ot[ut],Pe[we++]=1;return we===0?0:Kc(t,e,i,Pe,Re,we,n,s,r,o,l,c,f)}function Gie(t,e,i,n,s,r,o,l,c,f){return K(0),0}function lC(t,e,i,n,s,r,o,l,c,f){const y=Ge(Y,3);e.queryControlPoints(y);const _=Ge(Y,3);if(i.queryControlPoints(_),cB(y,_,3)<0)return lC(t,i,e,n,r,s,o,l,c,!f);const x=Ll(e,i);if(e.isDegenerateToLineHelper(x)){const W=new ni({start:e.getStartXY(),end:e.getEndXY()}),J=rx(t,i,W,n,r,s,o,l,c,!f);if(s)for(let re=0;re<J;++re){const ne=W.getCoord2D(s[re]);s[re]=e.getClosestCoordinate(ne,!1)}return J}if(i.isDegenerateToLineHelper(x)){const W=new ni({start:i.getStartXY(),end:i.getEndXY()}),J=rx(t,e,W,n,s,r,o,l,c,f);if(r)for(let re=0;re<J;++re){const ne=W.getCoord2D(r[re]);r[re]=i.getClosestCoordinate(ne,!1)}return J}if(Zc(e,i,o=Math.max(o,x)))return 0;const S=new Array(3);e.queryWeights(S);const P=new Array(3);i.queryWeights(P);const A=[1,md(S),1],D=[1,md(P),1],N=new Ze(0,1),F=new Ze(0,1);{const W=Xr.constructEmpty();aC(y,A,new Ze(0,1),W);const J=Xr.constructEmpty();aC(_,D,new Ze(0,1),J);const re=Math.max(W.maxDim(),J.maxDim());if(W.inflate(3*o),J.inflate(3*o),!W.intersectW(J))return 0;if(W.maxDim()<.1*re){if(iq(y,A,W,N),iq(_,D,W,F),N.isEmpty()||F.isEmpty())return 0;Av(y,A,N.vmin,N.vmax,y,A),Av(_,D,F.vmin,F.vmax,_,D)}}const G=Xx(y,2,_,2,o);if(G===0)return 0;const V=[],B=[];if(G===-1){const W=Ge(bt,3),J=Ge(bt,3),re=Ge(bt,3);dM(y,A,W,J,re);const ne=Ge(bt,3),oe=Ge(bt,3),pe=Ge(bt,3);dM(_,D,ne,oe,pe);const ce=[],ue=[],se=Ux(W,2,J,2,re,2,ne,2,oe,2,pe,2,!0,Ze.unit(),Ze.unit(),ce,ue);if(se>0)for(let de=0;de<se;de++){const Se=new Y;Ws(_,D,ue[de],Se);const Pe=new Y;Ws(y,A,ce[de],Pe),Y.distance(Pe,Se)<=o&&(V.push(ce[de]),B.push(ue[de]))}}for(let W=0;W<2;W++){let J,re,ne;W===0?(J=y,re=_,ne=D):(J=_,re=y,ne=A);for(let oe=0;oe<2;oe++){const pe=oe===0?0:J.length-1,ce=new Y,ue=[0],se=dB(re,ne,J[pe],Ze.unit(),!1,-1,1,ue);K(se===1),Ws(re,ne,ue[0],ce),Y.distance(J[pe],ce)<=o&&(W===0?(V.push(pe===0?0:1),B.push(ue[0])):(B.push(pe===0?0:1),V.push(ue[0])))}}if(V.length===0)return 0;if(!N.equalsRange(0,1))for(let W=0;W<V.length;++W)V[W]=wa.recalculateParentT(N.vmin,N.vmax,V[W]);if(!F.equalsRange(0,1))for(let W=0;W<B.length;++W)B[W]=wa.recalculateParentT(F.vmin,F.vmax,B[W]);for(let W=0;W<V.length;++W)V[W]=ox(S,V[W]);for(let W=0;W<B.length;++W)B[W]=ox(P,B[W]);return Kc(t,e,i,V,B,V.length,n,s,r,o,l,c,f)}function jie(t,e,i,n,s,r,o,l,c,f){if(e.isLine())return hM(t,i,new ni({start:e.getStartXY(),end:e.getEndXY()}),n,r,s,o,l,c,!f);if(i.isLine())return rx(t,e,new ni({start:i.getStartXY(),end:i.getEndXY()}),n,s,r,o,l,c,f);const y=Ll(e,i);if(Zc(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,3);e.queryControlPoints(_);const x=Ge(Y,3);i.queryControlPoints(x);const S=Xx(_,2,x,2,o);if(S===0)return 0;const P=[],A=[];if(S===-1){const D=Ge(bt,3),N=Ge(bt,3),F=Ge(bt,3),G=[0,0,0];e.queryWeights(G),dM(_,G,D,N,F);const V=Ge(_n,3);nx(x,V);const B=Ux(D,2,N,2,F,2,[V[0].x,V[1].x,V[2].x],2,[V[0].y,V[1].y,V[2].y],2,null,0,!0,Ze.unit(),Ze.unit(),P,A);if(B>0){let W=0;for(let J=0;J<B;J++){const re=new Y;i.queryCoord2D(A[J],re);const ne=new Y;e.queryCoord2D(P[J],ne),Y.distance(ne,re)<=o&&(P[W]=P[J],A[W]=A[J],W++)}P.length=W,A.length=W}}for(let D=0;D<2;D++){let N;N=D===0?_:x;for(let F=0;F<2;F++){const G=F===0?0:N.length-1;let V;const B=new Y;D===0?(V=uM(i,N[G],Ze.unit(),!1),i.queryCoord2D(V,B)):(V=Qz(e,N[G],Ze.unit(),!1,-1),e.queryCoord2D(V,B)),Y.distance(N[G],B)<=o&&(D===0?(P.push(G===0?0:1),A.push(V)):(A.push(G===0?0:1),P.push(V)))}}return Kc(t,e,i,P,A,P.length,n,s,r,o,l,c,f)}function Ntt(t,e,i,n=!1){const s=Ge(Y,3);n?(s[0].setCoordsPoint2D(t[0]),s[1].setCoordsPoint2D(t[1]),s[1].subThis(s[0]),s[2].setCoordsPoint2D(t[2]),s[2].subThis(s[0]),s[0].setCoords(0,0)):(s[0].setCoordsPoint2D(t[0]),s[1].setCoordsPoint2D(t[1]),s[2].setCoordsPoint2D(t[2])),s[0].mulThis(e[0]),s[1].mulThis(e[1]),s[2].mulThis(e[2]),i[1].setCoords(s[1].x-s[0].x,s[1].y-s[0].y),i[2].setCoordsPoint2D(s[2].sub(s[1])),i[2].subThis(i[1]),i[1].x*=2,i[1].y*=2,i[0].setCoordsPoint2D(s[0])}function dM(t,e,i,n,s){const r=bt.constructDouble(e[0]),o=bt.constructDouble(e[1]),l=bt.constructDouble(e[2]);i[0].setDouble(t[0].x),i[0].mulThis(r),i[1].setDouble(t[1].x),i[1].mulThis(o),i[2].setDouble(t[2].x),i[2].mulThis(l),i[2].subThis(i[1]),i[1].subThis(i[0]),i[2].subThis(i[1]),i[1].ldexpThis(1),n[0].setDouble(t[0].y),n[0].mulThis(r),n[1].setDouble(t[1].y),n[1].mulThis(o),n[2].setDouble(t[2].y),n[2].mulThis(l),n[2].subThis(n[1]),n[1].subThis(n[0]),n[2].subThis(n[1]),n[1].ldexpThis(1),s[0].setDouble(e[0]),s[1].setDouble(e[1]),s[2].setThis(s[1]),s[2].ldexpThis(1),s[2].negateThis(),s[2].addThis(s[0]),s[2].addDoubleThis(e[2]),s[1].subThis(s[0]),s[1].ldexpThis(1)}function oye(t,e,i){for(let n=0;n<3;++n)i[n].setCoordsPoint2DZ(t[n].mul(e[n]),e[n])}function aye(t,e,i,n){if(i===0)return n.assign(t[0]),e[0];if(i===1)return n.assign(t[2]),e[2];const s=[t[0].x*e[0],t[1].x*e[1],t[2].x*e[2]],r=[t[0].y*e[0],t[1].y*e[1],t[2].y*e[2]],o=[e[0],e[1],e[2]],l=i;let c,f,y;if(i<=.5){const _=So(s[0],s[1],l),x=So(s[1],s[2],l);c=Hi(_,x,l);const S=So(r[0],r[1],l),P=So(r[1],r[2],l);f=Hi(S,P,l);const A=So(o[0],o[1],l),D=So(o[1],o[2],l);y=So(A,D,l)}else{const _=jr(s[0],s[1],l),x=jr(s[1],s[2],l);c=jr(_,x,l);const S=jr(r[0],r[1],l),P=jr(r[1],r[2],l);f=jr(S,P,l);const A=jr(o[0],o[1],l),D=jr(o[1],o[2],l);y=jr(A,D,l)}return c/=y,f/=y,n.setCoords(c,f),fB(t,n),y}function Ott(t,e,i){const n=Ge(Y,3);t.queryControlPoints(n);const s=[0,0,0];t.queryWeights(s),$tt([Ht.constructPoint2D(n[0]),Ht.constructPoint2D(n[1]),Ht.constructPoint2D(n[2])],[new Be(s[0]),new Be(s[1]),new Be(s[2])],e,i)}function $tt(t,e,i,n){if(i.value()===0)return void n.setE(t[0]);if(i.value()===1)return void n.setE(t[2]);const s=[t[0].x.mulE(e[0]),t[1].x.mulE(e[1]),t[2].x.mulE(e[2])],r=[t[0].y.mulE(e[0]),t[1].y.mulE(e[1]),t[2].y.mulE(e[2])],o=[e[0].clone(),e[1].clone(),e[2].clone()],l=new Be,c=new Be,f=new Be;if(i.value()<=.5){const _=Mu(s[0],s[1],i),x=Mu(s[1],s[2],i);l.setE(Mu(_,x,i));const S=Mu(r[0],r[1],i),P=Mu(r[1],r[2],i);c.setE(Mu(S,P,i));const A=Mu(o[0],o[1],i),D=Mu(o[1],o[2],i);f.setE(Mu(A,D,i))}else{const _=Au(s[0],s[1],i),x=Au(s[1],s[2],i);l.setE(Au(_,x,i));const S=Au(r[0],r[1],i),P=Au(r[1],r[2],i);c.setE(Au(S,P,i));const A=Au(o[0],o[1],i),D=Au(o[1],o[2],i);f.setE(Au(A,D,i))}l.divThisE(f),c.divThisE(f);const y=new Y(l.value(),c.value());fB([t[0].value(),t[1].value(),t[2].value()],y),n.x.set(y.x,l.eps()),n.y.set(y.y,c.eps())}function tq(t,e){return e.setCoords(t.x/t.z,t.y/t.z),t.z}function Ws(t,e,i,n,s){if(s){if(i<0)return void bl(new ni({start:t[0],end:t[0].add(Jz(t,e,0).getUnitVector())}),i,n);if(i>1)return void bl(new ni({start:t[2],end:t[2].add(Jz(t,e,1).getUnitVector())}),i-1,n)}aye(t,e,i,n)}function iq(t,e,i,n){n.setEmpty();const s=[];s.push(new Ze(0,1));const r=.5*Math.max(i.width(),i.height());for(;s.length;){const o=s.at(-1);s.pop();const l=new Xr;if(aC(t,e,o,l),l.isIntersectingW(i)){const c=Math.max(l.width(),l.height());if(i.containsW(l)||c<=r||o.width()<1e-12)n.merge(o);else{const f=o.getCenter();s.push(Ze.construct(o.vmin,f)),s.push(Ze.construct(f,o.vmax))}}}}function md(t){return t[1]/Math.sqrt(t[0]*t[2])}function ox(t,e){const i=Math.sqrt(t[2]/t[0]);return e/Hi(i,1,e)}function cC(t,e){const i=Math.sqrt(t[0]/t[2]);return e/Hi(i,1,e)}function Rtt(t,e){const i=Ge(Y,3);t.queryControlPoints(i);const n=[0,0,0];t.queryWeights(n),e.setControlPointsAndWeights(i,n)}function nq(t,e,i,n){K(e>=0&&e<=1),new ii().setCoordsPoint3D(t[0]),new ii().setCoordsPoint3D(t[1]),new ii().setCoordsPoint3D(t[2]);const s=new ii,r=new ii,o=new ii;dE(3,t[0],t[1],e,s),dE(3,t[1],t[2],e,r),dE(3,s,r,e,o);const l=t[2].clone();i&&(i[0].assign(t[0]),i[1].assign(s),i[2].assign(o)),n&&(n[0].assign(o),n[1].assign(r),n[2].assign(l))}function sq(t,e,i,n){const s=[t[0],t[1],t[2]];K(e>=0&&e<=1&&i!==n);const r=Hi(s[0],s[1],e),o=Hi(s[1],s[2],e),l=Hi(r,o,e);i&&(i[0]=s[0],i[1]=r,i[2]=l),n&&(n[0]=l,n[1]=o,n[2]=s[2])}function fB(t,e){const i=Ze.constructEmpty();i.vmin=i.vmax=t[0].x,i.mergeNeCoordinate(t[1].x),i.mergeNeCoordinate(t[2].x),e.x=hs(e.x,i.vmin,i.vmax),i.vmin=i.vmax=t[0].y,i.mergeNeCoordinate(t[1].y),i.mergeNeCoordinate(t[2].y),e.y=hs(e.y,i.vmin,i.vmax)}function rq(t,e){const i=new Ze;i.vmin=i.vmax=t[0].x,i.mergeNeCoordinate(t[1].x),i.mergeNeCoordinate(t[2].x),e[0].x=hs(e[0].x,i.vmin,i.vmax),e[1].x=hs(e[1].x,i.vmin,i.vmax),e[2].x=hs(e[2].x,i.vmin,i.vmax),i.vmin=i.vmax=t[0].y,i.mergeNeCoordinate(t[1].y),i.mergeNeCoordinate(t[2].y),e[0].y=hs(e[0].y,i.vmin,i.vmax),e[1].y=hs(e[1].y,i.vmin,i.vmax),e[2].y=hs(e[2].y,i.vmin,i.vmax)}var wT=br;class wa extends D5{constructor(e){return e===void 0||E7(e,"vd")?(super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=new Y(0,0),void(this.m_weights=[1,0,1])):(e.fromPoint&&e.weight?e={fromPoint:e.fromPoint,controlPoint1:e.controlPoint1,toPoint:e.toPoint,weight0:1,weight1:e.weight,weight2:1}:e.points&&e.weight?e={fromPoint:e.points[0],controlPoint1:e.points[1],toPoint:e.points[2],weight0:1,weight1:e.weight,weight2:1}:e.points&&e.weights&&(e={fromPoint:e.points[0],controlPoint1:e.points[1],toPoint:e.points[2],weight0:e.weights[0],weight1:e.weights[1],weight2:e.weights[2]}),e.fromPoint&&e.weight0?(super({start:e.fromPoint,end:e.toPoint}),(e.weight0<=0||e.weight1<0||e.weight2<=0)&&Je("weights"),this.m_cp=e.controlPoint1.clone(),void(this.m_weights=[e.weight0,e.weight1,e.weight2])):e.copy?(super(e),this.m_cp=e.copy.m_cp.clone(),void(this.m_weights=e.copy.m_weights.slice())):e.move?(super(e),this.m_cp=e.move.m_cp.clone(),void(this.m_weights=e.move.m_weights.slice())):void K(0))}getBoundary(){return sd(this)}assignMove(e){return this}assignCopy(e){return e.copyTo(this),this}construct(e,i,n,s){this.dropAllAttributes(),this.setCpsAndWeights(e,i,n,1,s,1),bT(this)}constructWeights(e,i,n,s,r,o){}constructArray(e,i){this.construct(e[0],e[1],e[2],i)}constructArrayWeights(e,i){this.dropAllAttributes(),this.setCpsAndWeightsArray(e,i),bT(this)}convertToStandardForm(){}getStandardFormWeight(){return this.m_weights[1]/Math.sqrt(this.m_weights[0]*this.m_weights[2])}getGeometryType(){return me.enumRationalBezier2}queryEnvelope(e){if(e instanceof xe){if(e.setCoords(this.getStartXY()),e.mergeNe(this.getEndXY()),e.contains(this.m_cp))return;const i=Lie(this);if(i!==null){const n=new Y;for(const s of i.specialPoints)this.queryCoord2D(s,n),e.mergeNe(n)}else{const n=[],s=Ge(Y,3);this.queryControlPoints(s),iye(s,this.m_weights,n);const r=new Y;for(const o of n)this.queryCoord2D(o,r),e.mergeNe(r)}}}applyTransformation(e){if(e instanceof _i){const i=Ge(Y,3);return this.queryControlPoints(i),e.transformPoints2D(i,3,i),this.setStartXY(i[0]),this.m_cp.assign(i[1]),this.setEndXY(i[2]),void this.afterCompletedModification()}}createInstance(){return new wa({vd:this.m_description})}calculateLength2D(){return oC(this,1,!1)}calculateLowerLength2D(){return Y.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return this.calculateUpperLength2D_()}calculateUpperLength2D_(){return this.m_weights[1]>0?Y.distance(this.getStartXY(),this.m_cp)+Y.distance(this.getEndXY(),this.m_cp):Y.distance(this.getStartXY(),this.getEndXY())}queryCoord2D(e,i){return this.queryCoord2DExtension(e,i,!0)}queryCoord2DE(e,i){Ott(this,e,i)}queryCoord2DExtension(e,i,n){if(n){if(e<0)return void bl(new ni({start:this.getStartXY(),end:this.getStartXY().add(this.getTangent(0).getUnitVector())}),e,i);if(e>1)return void bl(new ni({start:this.getEndXY(),end:this.getEndXY().add(this.getTangent(1).getUnitVector())}),e-1,i)}const s=Ge(Y,3);this.queryControlPoints(s),Ws(s,this.m_weights,e,i)}getCoordX(e){const i=new Y;return this.queryCoord2DExtension(e,i,!0),i.x}getCoordY(e){const i=new Y;return this.queryCoord2DExtension(e,i,!0),i.y}cut(e,i,n){const s=new Qt;return this.queryCut(e,i,s,n),s.releaseSegment()}queryCut(e,i,n,s){const r=n.createQuadraticRationalBezier();if(this.cutBezierIgnoreAttributes(e,i,r),s)return;r.assignVertexDescription(this.m_description);const o=this.m_description.getAttributeCount();if(o>1){for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=wT.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(e,c,y);r.setStartAttribute(c,y,_)}}for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=wT.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(i,c,y);r.setEndAttribute(c,y,_)}}}}queryDerivative(e,i){vtt(this,e,i)}cutBezierIgnoreAttributes(e,i,n){(e<0||i>1||e>i)&&Je("Quadratic_rational_bezier.cut_bezier_ignore_attributes");const s=Ge(Y,3);this.queryControlPoints(s);const r=[0,0,0];Av(s,this.m_weights,e,i,s,r),n.setControlPointsAndWeights(s,r)}splitBezierIgnoreAttributes(e,i,n){}getAttributeAsDbl(e,i,n){if(i===0)return n===0?this.getCoordX(e):this.getCoordY(e);const s=this.calculateLength2D(),r=s>0?this.tToLength(e)/s:0,o=wT.getInterpolation(i),l=this.getStartAttributeAsDbl(i,n),c=this.getEndAttributeAsDbl(i,n);return w7(o,l,c,r,wT.getDefaultValue(i))}getClosestCoordinate(e,i){return Qz(this,e,Ze.unit(),i,-1)}getClosestCoordinateOnInterval(e,i,n=-1){return Qz(this,e,i,!1,n)}getYMonotonicParts(e,i){return 0}getMonotonicParts(e,i){e.length<2&&Je("");const n=rC(this);let s=0;if(n.specialPointsCount()===2)return 0;K(e.length>=n.specialPointsCount()-1);for(let r=1,o=n.specialPointsCount();r<o;++r)this.queryCut(n.specialPoints[r-1],n.specialPoints[r],e[s],i),s++;for(let r=0;r<s;++r)eq(e[r].get());return s}intersectionWithAxis2D(e,i,n,s){n&&(n.length=9),s&&(s.length=9);const r=new Array(3),o=Ge(Be,2),l=new Ze(0,1);let c=0;const f=Ge(Y,3);if(this.queryControlPoints(f),e){if(r[0]=new Be(f[0].y).sub(i).mul(this.m_weights[0]),r[1]=new Be(f[1].y).sub(i).mul(this.m_weights[1]),r[2]=r[0].subE(r[1].mul(2)).addE(new Be(f[2].y).sub(i).mul(this.m_weights[2])),r[1]=r[1].subE(r[0]).mulThisByPower2(2),c=Tl(r[2],r[1],r[0],l,!1,o),n)for(let y=0;y<c;y++)n[y]=this.getCoordX(o[y].value())}else if(r[0]=new Be(f[0].x).sub(i).mul(this.m_weights[0]),r[1]=new Be(f[1].x).sub(i).mul(this.m_weights[1]),r[2]=r[0].subE(r[1].mul(2)).addE(new Be(f[2].x).sub(i).mul(this.m_weights[2])),r[1]=r[1].subE(r[0]).mulThisByPower2(2),c=Tl(r[2],r[1],r[0],l,!1,o),n)for(let y=0;y<c;y++)n[y]=this.getCoordY(o[y].value());if(s)for(let y=0;y<c;y++)s[y]=o[y].value();else n&&dd(n,0,c,Mf);return c}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const n=[Number.NaN,Number.NaN],s=this.intersectionWithAxis2D(!0,e,n,null);return K(s!==2),s===-1?i:n[0]}isCurve(){return!0}isDegenerate(e){return A7(this,e)}isDegenerate3D(e,i){return!1}queryLooseEnvelope(e){if(e instanceof xe)return e.setCoords({pt:this.getStartXY()}),e.mergeNe(this.m_cp),void e.mergeNe(this.getEndXY())}clone(e){const i=this.createInstance();return this.copyTo(i),i}queryInterval(e,i){if(e===0){const n=xe.constructEmpty();this.queryEnvelope(n);const s=Ze.constructEmpty();return i===0?n.queryIntervalX(s):n.queryIntervalY(s),s}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const n=Ge(Y,3);this.queryControlPoints(n);const s=[0,0,0];Av(n,this.m_weights,e.vmin,e.vmax,n,s),i.setFromPoints(n,3)}changeEndPoints2D(e,i){if(e.isEqual(this.m_XStart,this.m_YStart)&&i.isEqual(this.m_XEnd,this.m_YEnd))return;const n=this.m_cp.isEqual(this.m_XStart,this.m_YStart),s=this.m_cp.isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(e),this.setEndXY(i),n?this.m_cp.setCoordsPoint2D(e):s&&this.m_cp.setCoordsPoint2D(i),this.normalizeAfterEndpointChange()}tToLength(e){return oC(this,e,!0)}lengthToT(e){return xtt(this,e)}calculateWeightedAreaCentroid2D(e){const i=Ett(this),n=Rie(this);return i.x+=(this.getStartX()-e.x)*n,i.y+=(this.getStartY()-e.y)*n,i}calculateWeightedCentroid2D(){const e=new Y;return this.isDegenerate(0)?(e.setCoords(0,0),e):Ptt(this)?(e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e):(e.assign(Mtt(this,1)),e)}getControlPoint1(){return this.m_cp.clone()}setControlPoint1(e){this.m_cp.setCoordsPoint2D(e),this.afterCompletedModification()}queryWeights(e){for(let i=0;i<3;++i)e[i]=this.m_weights[i]}setWeights(e){}queryControlPoints(e){e[0].assign(this.getStartXY()),e[1].assign(this.m_cp),e[2].assign(this.getEndXY())}setControlPointsAndWeights(e,i){this.setCpsAndWeightsArray(e,i),this.afterCompletedModification()}getTangent(e){const i=Ge(Y,3);return this.queryControlPoints(i),Jz(i,this.m_weights,e)}getDerivative(e){return Y.getNAN()}getCurvature(e){return 0}isIntersecting(e,i,n){return!1}isIntersectingPoint(e,i,n){return!1}isIntersectingPoint3D(e,i,n,s,r=1){return!1}queryAttributeAsDbl(e,i,n,s){}isMonotoneQuickAndDirty(){const e=Ge(Y,3);return this.queryControlPoints(e),N7(e)}getMonotonicPartParams(e,i){const n=rC(this),s=n.specialPointsCount();if(!i)return n.specialPointsCount();e<s&&Je("");for(let r=0;r<s;r++)i[r]=n.specialPoints[r];return s}normalizeAfterEndpointChange(){return!1}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){this.m_XEnd=Et(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=Et(this.m_YStart,this.m_YStart=this.m_YEnd),this.m_weights[2]=Et(this.m_weights[0],this.m_weights[0]=this.m_weights[2]);for(let e=0,i=this.m_description.getTotalComponentCount()-2;e<i;e++)this.m_attributes[e+i]=Et(this.m_attributes[e],this.m_attributes[e]=this.m_attributes[e+i]);this.m_cachedValues=null}}isLine(){return!1}isDegenerateToLineHelper(e){const i=[e];return!!oB(this,i)&&ktt(this,i[0])}copyIgnoreAttributes(e){Rtt(this,e)}calculateArea2DHelper(){return Rie(this)}absNorm(){return this.getStartXY().norm(1)+this.getEndXY().norm(1)+this.m_cp.norm(1)}absNormXYZ(e){return K(0),0}queryEnvelopeW(e,i){rye(this,e,i)}setSegmentFromCoords(e,i){}writeInBufferStream(e,i){const n=new Float64Array(5);return n[0]=this.m_cp.x,n[1]=this.m_cp.y,n[2]=this.m_weights[0],n[3]=this.m_weights[1],n[4]=this.m_weights[2],e.writeRangeFromArray(i,n.length,n,!0,1),i+n.length}readFromBufferStream(e,i){const n=new Float64Array(5);e.queryRange(i,n.length,n,!0,1),this.m_cp.x=n[0],this.m_cp.y=n[1],this.m_weights[0]=n[2],this.m_weights[1]=n[3],this.m_weights[2]=n[4],this.m_cachedValues=null}snapControlPoints(e){const i=Ge(Y,3);this.queryControlPoints(i);const n=Y.sqrDistance(i[1],i[0]),s=Y.sqrDistance(i[1],i[2]);let r=i[0].clone(),o=n;n>s&&(r=i[2].clone(),o=s);let l=!1;return o<=e&&o!==0&&(l=!0,this.setControlPoint1(r)),l}needsSnapControlPoints(e){if(!e)return!1;const i=Ge(Y,3);this.queryControlPoints(i);const n=Y.sqrDistance(i[1],i[0]),s=Y.sqrDistance(i[1],i[2]);i[0].clone();let r=n;return n>s&&(i[2].clone(),r=s),r<=e&&r!==0}calculateSpecialPointsForCracking(e,i){return 0}ensureXYMonotone(){return eq(this)}setCoordsForIntersector(e,i,n){Att(this,e,i,n)}copyToImpl(e){const i=e;i.m_cp.setCoordsPoint2D(this.m_cp),i.m_weights[0]=this.m_weights[0],i.m_weights[1]=this.m_weights[1],i.m_weights[2]=this.m_weights[2],sye(i,Lie(this))}reverseImpl(){this.m_weights[2]=Et(this.m_weights[0],this.m_weights[0]=this.m_weights[2])}equalsImpl(e){const i=e;if(!this.m_cp.equals(i.m_cp))return!1;for(let n=0;n<3;n++)if(this.m_weights[n]!==i.m_weights[n])return!1;return!0}equalsImplTol(e,i){const n=e;if(!this.m_cp.isEqualPoint2D(n.m_cp,i))return!1;const s=Ge(Y,3);this.queryControlPoints(s);const r=Ge(Y,3);n.queryControlPoints(r);const o=[n.m_weights[0],n.m_weights[1],n.m_weights[2]];for(let l=0;l<3;l++){const c=new ii;c.setCoordsPoint2DZ(s[l].mul(this.m_weights[l]),this.m_weights[l]);const f=new ii;if(f.setCoordsPoint2DZ(r[l].mul(o[l]),o[l]),!c.isEqual(f,i))return!1}return!0}getHashCodeImpl(){return 0}swapImpl(e){}afterCompletedModification(){bT(this)}intersect(e,i,n,s,r){return Qv(!1,this,e,i,n,s,r)}intersectPoint(e,i,n){return Itt(this,e,i,n)}intersect_(e,i,n,s){return 0}endPointModified(){bT(this)}clearEndPointModified(){}setCpsAndWeights(e,i,n,s,r,o){(s<=0||o<=0||r<0)&&Je("weights"),(e.isNAN()||i.isNAN()||n.isNAN())&&Je("NAN control points in bezier are not supported"),this.setStartXY(e),this.m_cp.assign(i),this.m_weights[0]=s,this.m_weights[1]=r,this.m_weights[2]=o,this.setEndXY(n)}setCpsAndWeightsArray(e,i){this.setCpsAndWeights(e[0],e[1],e[2],i[0],i[1],i[2])}}wa.type=me.enumRationalBezier2;class Ltt{constructor(){this.length=Number.NaN,this.specialPoints=[]}specialPointsCount(){return this.specialPoints.length}}function lye(t){return Ftt(t.calculateUpperLength2D())}function Ftt(t){return 256*ts()*t}function ztt(t){const e=Y.distance(t.getStartXY(),t.getEndXY()),i=t.calculateUpperLength2D();return i-e<=8*Number.EPSILON*i}function cye(t,e,i=!1){e[1].setCoords(t.m_cp[0].x-t.getStartX(),t.m_cp[0].y-t.getStartY()),e[1].mulThis(3),e[2].setCoords(t.m_cp[1].x-t.m_cp[0].x,t.m_cp[1].y-t.m_cp[0].y),e[2].mulThis(3),e[3]=t.getEndXY().sub(t.getStartXY()),e[3].subThis(e[2]),e[2].subThis(e[1]),i?e[0].setCoords(0,0):e[0]=t.getStartXY()}function uye(t,e,i){const n=Ge(Y,4);t.queryControlPoints(n),pB(n,e,i)}function hye(t,e,i){const n=Ge(Y,4);t.queryControlPoints(n),mB(n,e,i)}function pB(t,e,i){let n=t[1].x;n-=t[0].x,n*=3;let s=t[2].x;s-=t[1].x,s*=3;let r=t[3].x;r-=t[0].x,r-=s,s-=n,e[3].setWithEps(r),e[2].setWithEps(s),e[1].setWithEps(n),i?e[0].set(0):e[0].set(t[0].x)}function mB(t,e,i){let n=t[1].y;n-=t[0].y,n*=3;let s=t[2].y;s-=t[1].y,s*=3;let r=t[3].y;r-=t[0].y,r-=s,s-=n,e[3].setWithEps(r),e[2].setWithEps(s),e[1].setWithEps(n),i?e[0].set(0):e[0].set(t[0].y)}function ax(t,e,i=!1){const n=Ge(_n,4);n[0].assignPoint2D(t[0]),n[1].assignPoint2D(t[1]),n[2].assignPoint2D(t[2]),n[3].assignPoint2D(t[3]),e[1].setCoords(n[1].x.sub(n[0].x),n[1].y.sub(n[0].y)),e[1].mulThis(bt.constructInt32(3)),e[2].setCoords(n[2].x.sub(n[1].x),n[2].y.sub(n[1].y)),e[2].mulThis(bt.constructInt32(3)),e[3]=n[3].sub(n[0]),e[3]=e[3].sub(e[2]),e[2]=e[2].sub(e[1]),i?e[0].setCoords(Ho,Ho):e[0]=n[0].clone()}function uC(t,e,i){if(i){if(e<0)return e;if(e>1)return e-1+uC(t,1,!1)}if(t.isDegenerate(0))return 0;const n=e===1,s=hC(t);if(n&&!Number.isNaN(s.length)&&!Number.isNaN(s.length))return s.length;const r=lye(t),o=r/t.calculateUpperLength2D();let l=0,c=0;for(let f=1,y=s.specialPointsCount();f<y;f++){const _=s.specialPoints[f];if(l+=lit(t,c,Math.min(e,_),o,r),e<=_)break;c=_}return n&&(s.length=l),l}function qtt(t,e,i){const n=uC(t,1,!1);if(e<=0)return e;if(e>=n)return e-n+1;const s=[0];return r1(new ait(t,e),Ze.unit(),1,s)!==1&&xt(""),s[0]}function Vtt(t,e,i){i===void 0&&(i=e,e=0);const n=new Y;if(e<0||i>1)return n.setNAN(),n;if(e>i&&Je("calculate_sub_weightedCentroid"),e===i||t.isDegenerate(0))return n.setCoords(0,0),n;const s=hC(t),r=lye(t),o=r/t.calculateUpperLength2D();let l=e,c=0;for(let f=1,y=s.specialPointsCount();f<y;f++)if(e<s.specialPoints[f]){c=f-1;break}n.setCoords(0,0);for(let f=c+1,y=s.specialPointsCount();f<y;f++){const _=Math.min(s.specialPoints[f],i),x=cit(t,l,_,o,r);if(n.addThis(x),l=_,i<=s.specialPoints[f])break}return n.add(t.getStartXY().mul(t.calculateLength2D()))}function hC(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new Ltt,i=Ge(Be,8),n=Ge(Y,4);t.queryControlPoints(n);const s=yye(n,i);e.specialPoints=[];for(let r=0;r<s;r++)e.specialPoints.push(i[r].value());return dye(t,e),e}function Bie(t){let e=null;return e=t.m_cachedValues,e}function dye(t,e){t.m_cachedValues=e}function iO(t){t.m_cachedValues=null}function Gtt(t,e,i,n){if(e.isEqual(t.m_XStart,t.m_YStart)&&i.isEqual(t.m_XEnd,t.m_YEnd))return;const s=!!n&&t.isMonotoneQuickAndDirty(),r=new _i,o=Ge(Y,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const l=new Y;l.setSub(o[2],o[0]),l.leftPerpendicularThis(),o[1].setAdd(o[0],l);const c=Ge(Y,3);c[0].setCoordsPoint2D(e),c[2].setCoordsPoint2D(i),l.setSub(c[2],c[0]),l.leftPerpendicularThis(),c[1].setAdd(c[0],l),r.setFromTwoTriangles(o,c)?r.transformPoints2D(t.m_cp,2,t.m_cp):(cr(e,i,1/3,t.m_cp[0]),cr(e,i,2/3,t.m_cp[1])),t.changeEndPoints2D(e,i),s&&fM(t)}function jtt(t,e,i,n,s){return{tmin:t,tmax:e,t:i,d:n,pt:s.clone()}}function Btt(t,e,i,n){const s=new Array(18),r=Ge(Y,4);t.queryControlPoints(r);const o=r1(new gye(r,e),Ze.construct(i,n),18,s),l=new Y;t.queryCoord2D(i,l);let c=i,f=Y.distance(l,e);const y=new Y;t.queryCoord2D(n,y);const _=Y.distance(y,e);_<f&&(f=_,c=n,l.assign(y));for(let x=0;x<o;x++){t.queryCoord2D(s[x],y);const S=Y.distance(y,e);S<f&&(f=S,c=s[x],l.assign(y))}return jtt(i,n,c,f,l)}function fye(t,e){const i=Ge(Be,4);uye(t,i,!0);const n=Ge(Be,4);hye(t,n,!0);const s=i[3].clone(),r=i[2].clone(),o=i[1].clone(),l=n[3].clone(),c=n[2].clone(),f=n[1].clone(),y=r.mulE(o).addE(c.mulE(f)).mul(4),_=r.mulE(r).mul(8).addE(s.mulE(o).mul(12)).addE(c.mulE(c).mul(8).addE(l.mulE(f).mul(12))),x=s.mulE(r).addE(l.mulE(c)).mul(36),S=s.mulE(s).addE(l.mulE(l)).mul(36),P=Ge(Be,3),A=lM(S,x,_,y,new Ze(0,1),!1,P);if(K(A<=3),A>0){const D=ev(t,1,0).sqrLength(),N=ev(t,1,1).sqrLength();let F=D;e.set(0),F<N&&(F=N,e.set(1));for(let G=0;G<A;G++){const V=ev(t,1,P[G].value()).sqrLength();V<F&&(F=V,e=P[G])}}}function Htt(t,e,i,n){if(e===1){const s=1-i,r=s*s,o=i*i,l=t[1].sub(t[0]),c=t[2].sub(t[1]),f=t[3].sub(t[2]),y=l.mul(r).add(c.mul(2*s*i)).add(f.mul(o));n.assign(y.mul(3))}else if(e===2){const s=1-i,r=t[2].sub(t[1]).sub(t[1].sub(t[0])),o=t[3].sub(t[2]).sub(t[2].sub(t[1])),l=r.mul(s).add(o.mul(i));n.assign(l.mul(6))}else if(e===3){const s=t[2].sub(t[1]),r=t[3].sub(s.mul(3)).sub(t[0]);n.assign(r.mul(6))}else n.setCoords(0,0)}function Utt(t,e,i,n){{const s=hm.subE(i),r=s.sqr(),o=i.sqr(),l=t[1].subE(t[0]).mulE(r).addE(t[2].subE(t[1]).mulE(new Be(2).mulE(s).mulE(i))).addE(t[3].subE(t[2]).mulE(o));n.setE(l.mulE(new Be(3)))}}function ya(t,e,i){const n=new Y;return Htt(t,e,i,n),n}function Ytt(t,e,i){const n=[Ht.constructPoint2D(t[0]),Ht.constructPoint2D(t[1]),Ht.constructPoint2D(t[2]),Ht.constructPoint2D(t[3])],s=new Ht;return Utt(n,e,i,s),s}function ev(t,e,i){const n=Ge(Y,4);return t.queryControlPoints(n),ya(n,e,i)}function Hie(t){const e=t.m_cp[0].sub(t.getStartXY()),i=t.m_cp[1].sub(t.m_cp[0]),n=t.getEndXY().sub(t.getStartXY());return e.mulThis(3),i.mulThis(3),n.subThis(i),i.subThis(e),(3*n.x*(2*i.y+5*e.y)-3*n.y*(2*i.x+5*e.x)+10*(i.x*e.y-i.y*e.x))/60}function fM(t){const e=Ge(Y,4);t.queryControlPoints(e);const i=O7(e);return i&&(t.m_cp[0].setCoordsPoint2D(e[1]),t.m_cp[1].setCoordsPoint2D(e[2]),t.afterCompletedModification()),i}function O7(t){let e=!1;for(let i=0;i<2;i++){const n=Qn(t[0][i],t[3][i]);n>0?(Qn(t[0][i],t[1][i])<0&&(t[1][i]=t[0][i],e=!0),Qn(t[1][i],t[3][i])<0&&(t[1][i]=t[3][i],e=!0),Qn(t[0][i],t[2][i])<0&&(t[2][i]=t[0][i],e=!0),Qn(t[2][i],t[3][i])<0&&(t[2][i]=t[3][i],e=!0),Qn(t[1][i],t[2][i])<0&&(t[2][i]=t[1][i],e=!0)):n<0?(Qn(t[0][i],t[1][i])>0&&(t[1][i]=t[0][i],e=!0),Qn(t[1][i],t[3][i])>0&&(t[1][i]=t[3][i],e=!0),Qn(t[0][i],t[2][i])>0&&(t[2][i]=t[0][i],e=!0),Qn(t[2][i],t[3][i])>0&&(t[2][i]=t[3][i],e=!0),Qn(t[1][i],t[2][i])>0&&(t[2][i]=t[1][i],e=!0)):t[1][i]===t[0][i]&&t[2][i]===t[0][i]||(t[1][i]=t[0][i],t[2][i]=t[0][i],e=!0)}return e}function Xtt(t){const e=Qn(t[0].y,t[1].y),i=Qn(t[1].y,t[2].y),n=Qn(t[2].y,t[3].y);if(e>=0&&i>=0&&n>=0||e<=0&&i<=0&&n<=0){const s=Qn(t[0].x,t[1].x),r=Qn(t[1].x,t[2].x),o=Qn(t[2].x,t[3].x);if(s>=0&&r>=0&&o>=0||s<=0&&r<=0&&o<=0)return!0}return!1}function ST(t,e,i){const n=new Y,s=new Y,r=new Y,o=new Y,l=new Y;e<=.5?(Zs(2,t[0],t[1],e,n),Zs(2,t[1],t[2],e,s),Zs(2,t[2],t[3],e,r),Zs(2,n,s,e,o),Zs(2,s,r,e,l),Zs(2,o,l,e,i)):(Ks(2,t[0],t[1],e,n),Ks(2,t[1],t[2],e,s),Ks(2,t[2],t[3],e,r),Ks(2,n,s,e,o),Ks(2,s,r,e,l),Ks(2,o,l,e,i))}function dC(t,e,i,n){K(e>=0&&e<=1);const s=new Y,r=new Y,o=new Y,l=new Y,c=new Y,f=new Y;e<=.5?(Zs(2,t[0],t[1],e,s),Zs(2,t[1],t[2],e,r),Zs(2,t[2],t[3],e,o),Zs(2,s,r,e,l),Zs(2,r,o,e,c),Zs(2,l,c,e,f)):(Ks(2,t[0],t[1],e,s),Ks(2,t[1],t[2],e,r),Ks(2,t[2],t[3],e,o),Ks(2,s,r,e,l),Ks(2,r,o,e,c),Ks(2,l,c,e,f));const y=t[3].clone();i&&(i[0].assign(t[0]),i[1].assign(s),i[2].assign(l),i[3].assign(f)),n&&(n[0].assign(f),n[1].assign(c),n[2].assign(o),n[3].assign(y))}function kv(t,e,i,n){if(K(e>=0&&i<=1&&e<=i),e===i){const r=new Y;return As(t,e,r),n[0].assign(r),n[1].assign(r),n[2].assign(r),void n[3].assign(r)}if(e===0&&i===1){for(let r=0;r<4;++r)n[r].assign(t[r]);return}const s=Ge(Y,4);dC(t,i,s,null),dC(s,i>0?e/i:0,null,s),As(t,e,s[0]),As(t,i,s[3]),n[0].setCoordsPoint2D(s[0]),n[1].setCoordsPoint2D(s[1]),n[2].setCoordsPoint2D(s[2]),n[3].setCoordsPoint2D(s[3])}function As(t,e,i,n){if(n){if(e<0)return void bl(new ni({start:t[0],end:t[0].add(oq(t,0).getUnitVector())}),e,i);if(e>1)return void bl(new ni({start:t[3],end:t[3].add(oq(t,1).getUnitVector())}),e-1,i)}if(e<=.5){const s=new Y;Zs(2,t[0],t[1],e,s);const r=new Y;Zs(2,t[1],t[2],e,r);const o=new Y;Zs(2,t[2],t[3],e,o);const l=new Y;Zs(2,s,r,e,l);const c=new Y;Zs(2,r,o,e,c),Zs(2,l,c,e,i)}else{const s=new Y;Ks(2,t[0],t[1],e,s);const r=new Y;Ks(2,t[1],t[2],e,r);const o=new Y;Ks(2,t[2],t[3],e,o);const l=new Y;Ks(2,s,r,e,l);const c=new Y;Ks(2,r,o,e,c),Ks(2,l,c,e,i)}}function Wtt(t,e,i){if(e.value()<=.5){const n=new Ht;af(2,Ht.constructPoint2D(t[0]),Ht.constructPoint2D(t[1]),e,n);const s=new Ht;af(2,Ht.constructPoint2D(t[1]),Ht.constructPoint2D(t[2]),e,s);const r=new Ht;af(2,Ht.constructPoint2D(t[2]),Ht.constructPoint2D(t[3]),e,r);const o=new Ht;af(2,n,s,e,o);const l=new Ht;af(2,s,r,e,l),af(2,o,l,e,i)}else{const n=new Ht;lf(2,Ht.constructPoint2D(t[0]),Ht.constructPoint2D(t[1]),e,n);const s=new Ht;lf(2,Ht.constructPoint2D(t[1]),Ht.constructPoint2D(t[2]),e,s);const r=new Ht;lf(2,Ht.constructPoint2D(t[2]),Ht.constructPoint2D(t[3]),e,r);const o=new Ht;lf(2,n,s,e,o);const l=new Ht;lf(2,s,r,e,l),lf(2,o,l,e,i)}}function Ztt(t,e,i){const n=Ge(Y,4);t.queryControlPoints(n),Wtt(n,e,i)}function oq(t,e){const i=hs(e,0,1);let n=ya(t,1,i);return n.isZero()&&(n=ya(t,2,i),n.isZero()?n=ya(t,3,i):i===1&&n.negateThis()),n}function pye(t,e,i){const n=Ge(Y,4);t.queryControlPoints(n),Ktt(n,e,i)}function Ktt(t,e,i){e.value()<0&&e.set(0,e.eps()),e.value()>1&&e.set(1,e.eps()),i.setE(Ytt(t,1,e))}function Uie(t,e,i,n,s){if(s){if(Im(e,i)!==0)return t?4:2}else if(s1(e,i))return 1;return fC(t,e,i,null,null,null,n,s!==void 0&&s,!0,!1)!==0?4:0}function Yie(t,e,i,n,s){if(s){if(Im(e,i)!==0)return t?4:2}else if(s1(e,i))return 1;return aq(t,e,i,null,null,null,n,s!==void 0&&s,!0,!1)!==0?4:0}function Jtt(t,e,i,n,s){if(s){if(Im(e,i)!==0)return 2}else if(s1(e,i))return 1;return gB(t,e,i,null,null,null,n,s!==void 0&&s,!0,!1)!==0?4:0}function Xie(t,e,i,n,s){if(s){if(Im(e,i)!==0)return t?4:2}else if(s1(e,i))return 1;return lq(t,e,i,null,null,null,n,s!==void 0&&s,!0,!1)!==0?4:0}function Wie(t,e,i,n,s){return K(0),0}function fC(t,e,i,n,s,r,o,l,c,f){if(s!==null&&(s.length=0),r!=null&&(r.length=0),n!==null&&(n.length=0),i.isDegenerate(0)){const re=[0,0,0],ne=e.intersectPoint(i.getStartXY(),re,o);if(ne>0){if(s!==null)for(let oe=0;oe<ne;oe++)s.push(re[oe]);if(r!==null)for(let oe=0;oe<ne;oe++)r.push(0);if(n!=null)for(let oe=0;oe<ne;oe++){const pe=new Y;e.queryCoord2D(re[oe],pe),n.push(pe)}}return ne}const y=Ll(e,i);if(Zc(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,4);cye(e,_);const x=i.getEndXY();x.subThis(i.getStartXY());const S=x.clone();S.leftPerpendicularThis();let P=3*_[3].dotProduct(S),A=2*_[2].dotProduct(S),D=_[1].dotProduct(S);const N=new Array(15),F=new Array(15);let G=Mv(P,A,D,Ze.unit(),!1,N);G<0&&(N[0]=0,N[1]=1,G=2);let V,B=0;for(let re=0,ne=B;re<G;++re){const oe=e.getCoord2D(N[re+ne]);F[B]=i.getClosestCoordinate(oe,!1),Y.distance(oe,i.getCoord2D(F[B]))<=o&&(N[B]=N[re+ne],B++)}if(_[0].subThis(i.getStartXY()),Math.abs(x.x)>=Math.abs(x.y)){const re=x.y/x.x;P=_[3].y-_[3].x*re,A=_[2].y-_[2].x*re,D=_[1].y-_[1].x*re,V=_[0].y-_[0].x*re}else{const re=x.x/x.y;P=_[3].x-_[3].y*re,A=_[2].x-_[2].y*re,D=_[1].x-_[1].y*re,V=_[0].x-_[0].y*re}const W=e.getEndXY().equals(i.getStartXY())||e.getEndXY().equals(i.getEndXY()),J=[0,0,0];G=F1e(P,A,D,V,Ze.unit(),W,J);for(let re=0,ne=B;re<G;++re){N[re+ne]=J[re];const oe=e.getCoord2D(N[re+ne]);F[B]=i.getClosestCoordinate(oe,!1),Y.distance(oe,i.getCoord2D(F[B]))<=o&&(N[B]=N[re+ne],B++)}G=e.intersectPoint(i.getStartXY(),J,o);for(let re=0;re<G;re++)N[B]=J[re],F[B++]=0;G=e.intersectPoint(i.getEndXY(),J,o);for(let re=0;re<G;re++)N[B]=J[re],F[B++]=1;return i.intersectPoint(e.getStartXY(),J,o)!==0&&(F[B]=J[0],N[B++]=0),i.intersectPoint(e.getEndXY(),J,o)!==0&&(F[B]=J[0],N[B++]=1),B===0?0:Kc(t,e,i,N,F,B,n,s,r,o,l,c,f)}function aq(t,e,i,n,s,r,o,l,c,f){if(rs(i))return fC(t,e,new ni({start:i.getStartXY(),end:i.getEndXY()}),n,s,r,o,l,c,f);const y=Ll(e,i);if(Zc(e,i,o=Math.max(o,y)))return 0;const _=[],x=[],S=[],P=Ge(Y,4);{e.queryControlPoints(P);const D=Ge(Y,4),N=new _i;i.canonicToWorldTransformation(N);const F=new _i;F.setInvert(N),F.transformPoints2D(P,4,D);const G=Ge(_n,4);ax(D,G);const V=[G[0].x,G[1].x,G[2].x,G[3].x],B=[G[0].y,G[1].y,G[2].y,G[3].y],W=Ge(bt,3);W[0].setDouble(i.getSemiMinorAxis()),W[0].sqrThis(),W[1].setDouble(i.getSemiMajorAxis()),W[1].sqrThis(),W[2].setThis(W[0]),W[2].mulThis(W[1]),W[2].negateThis();const J=G1e(V,3,B,3,null,0,W,!0,Ze.unit(),Ze.unit(),x);if(J>0){let re=0;for(let ne=0;ne<J;ne++){const oe=new Y;e.queryCoord2D(x[ne],oe);const pe=i.getClosestCoordinate(oe,!1),ce=new Y;i.queryCoord2D(pe,ce),Y.distance(oe,ce)<=o&&(_.push(oe.clone()),x[re]=x[ne],S.push(pe),re++)}x.length=re,_.length=re}}const A=[0,1];for(let D=0;D<2;D++){const N=D===0?i.getStartXY():i.getEndXY(),F=[0];lx(P,N,Ze.unit(),!1,-1,1,F);const G=new Y;As(P,F[0],G),Y.distance(N,G)<=o&&(x.push(F[0]),S.push(A[D]),_.push(G.clone()))}for(let D=0;D<2;D++){const N=[0,3];{const F=i.getClosestCoordinate(P[N[D]],!1),G=new Y;i.queryCoord2D(F,G),Y.distance(P[N[D]],G)<=o&&(x.push(A[D]),S.push(F),_.push(G.clone()))}}return Kc(t,e,i,x,S,x.length,n,s,r,o,l,c,f)}function gB(t,e,i,n,s,r,o,l,c,f){const y=Ge(Y,4);e.queryControlPoints(y);const _=Ge(Y,4);if(i.queryControlPoints(_),cB(y,_,4)<0)return gB(t,i,e,n,r,s,o,l,c,!f);const x=Ll(e,i);if(Zc(e,i,o=Math.max(o,x)))return 0;if(uit(e,i,n,s,r,o,l,c,f))return 2;const S=new Ze(0,1),P=new Ze(0,1);{const V=new Xr;pC(y,new Ze(0,1),V);const B=new Xr;pC(_,new Ze(0,1),B);const W=Math.max(V.maxDim(),B.maxDim());if(V.inflate(3*o),B.inflate(3*o),!V.intersectW(B))return 0;if(V.maxDim()<.1*W){if(cq(y,V,S),cq(_,V,P),S.isEmpty()||P.isEmpty())return 0;kv(y,S.vmin,S.vmax,y),kv(_,P.vmin,P.vmax,_)}}const A=Xx(y,3,_,3,o);if(A===0)return 0;const D=[],N=[],F=[];let G=!1;if(A===-1){const V=Ge(_n,4);ax(y,V);const B=[V[0].x,V[1].x,V[2].x,V[3].x],W=[V[0].y,V[1].y,V[2].y,V[3].y],J=Ge(_n,4);ax(_,J);const re=[],ne=[],oe=Ux(B,3,W,3,null,0,[J[0].x,J[1].x,J[2].x,J[3].x],3,[J[0].y,J[1].y,J[2].y,J[3].y],3,null,0,!0,Ze.unit(),Ze.unit(),re,ne);if(oe>0)for(let pe=0;pe<oe;pe++){const ce=new Y;As(_,ne[pe],ce);const ue=new Y;As(y,re[pe],ue),Y.distance(ue,ce)<=o&&(D.push(ue.clone()),F.push(ne[pe]),N.push(re[pe]))}else oe===-1&&(G=!0)}for(let V=0;V<2;V++){const B=V===0?y:_,W=V===0?_:y;for(let J=0;J<2;J++){const re=J===0?0:3,ne=[0];lx(W,B[re],Ze.unit(),!1,-1,1,ne);const oe=new Y;As(W,ne[0],oe),Y.distance(B[re],oe)<=o&&(V===0?(N.push(re===0?0:1),F.push(ne[0])):(F.push(re===0?0:1),N.push(ne[0])),D.push(oe.clone()))}}if(N.length===0&&G){const V=e.calculateUpperLength2D()>i.calculateUpperLength2D();{const B=[0,0];if(nit(V?e:i,B,!0)===2&&(K(Ze.unit().containsCoordinate(B[0])),!Ze.unit().containsCoordinate(B[1]))){const W=new Y;As(V?y:_,B[0],W);const J=[0,0];lx(V?_:y,W,Ze.unit(),!1,-1,2,J)===1&&(D.push(W.clone()),N.push(V?B[0]:J[0]),F.push(V?J[0]:B[0]))}}}if(N.length===0)return 0;if(!S.equalsRange(0,1))for(let V=0;V<N.length;++V)N[V]=Gc.recalculateParentT(S.vmin,S.vmax,N[V]);if(!P.equalsRange(0,1))for(let V=0;V<F.length;++V)F[V]=Gc.recalculateParentT(P.vmin,P.vmax,F[V]);return Kc(t,e,i,N,F,N.length,n,s,r,o,l,c,f)}function lq(t,e,i,n,s,r,o,l,c,f){const y=Ll(e,i);if(i.isDegenerateToLineHelper(y)){const B=new ni({start:i.getStartXY(),end:i.getEndXY()}),W=fC(t,e,B,n,s,r,o,l,c,f);if(r)for(let J=0;J<W;++J){const re=B.getCoord2D(r[J]);r[J]=i.getClosestCoordinate(re,!1)}return W}if(Zc(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,4);e.queryControlPoints(_);const x=Ge(Y,3);i.queryControlPoints(x);const S=new Ze(0,1),P=new Ze(0,1),A=[0,0,0];i.queryWeights(A);const D=[1,md(A),1];{const B=new Xr;pC(_,new Ze(0,1),B);const W=new Xr;aC(x,D,new Ze(0,1),W);const J=Math.max(B.maxDim(),W.maxDim());if(B.inflate(3*o),W.inflate(3*o),!B.intersectW(W))return 0;if(B.maxDim()<.1*J){if(cq(_,B,S),iq(x,D,B,P),S.isEmpty()||P.isEmpty())return 0;kv(_,S.vmin,S.vmax,_),Av(x,D,P.vmin,P.vmax,x,D)}}const N=Xx(_,3,x,2,o);if(N===0)return 0;const F=[],G=[],V=[];if(N===-1){const B=Ge(_n,4);ax(_,B);const W=[B[0].x,B[1].x,B[2].x,B[3].x],J=[B[0].y,B[1].y,B[2].y,B[3].y],re=Ge(bt,3),ne=Ge(bt,3),oe=Ge(bt,3);dM(x,D,re,ne,oe);const pe=[],ce=[],ue=Ux(re,2,ne,2,oe,2,W,3,J,3,null,0,!0,Ze.unit(),Ze.unit(),ce,pe);if(ue>0)for(let se=0;se<ue;se++){const de=new Y;As(_,pe[se],de);const Se=new Y;Ws(x,D,ce[se],Se),Y.distance(de,Se)<=o&&(F.push(de.clone()),G.push(pe[se]),V.push(ce[se]))}}for(let B=0;B<2;B++){let W,J;B===0?(W=_,J=x):(J=_,W=x);for(let re=0;re<2;re++){const ne=re===0?0:W.length-1,oe=[0],pe=new Y;if(B===0){const ce=dB(J,D,W[ne],Ze.unit(),!1,-1,1,oe);K(ce===1),Ws(J,D,oe[0],pe)}else{const ce=lx(J,W[ne],Ze.unit(),!1,-1,1,oe);K(ce===1),As(J,oe[0],pe)}Y.distance(W[ne],pe)<=o&&(B===0?(G.push(ne===0?0:1),V.push(oe[0])):(V.push(ne===0?0:1),G.push(oe[0])),F.push(pe.clone()))}}if(G.length===0)return 0;if(!S.equalsRange(0,1))for(let B=0;B<G.length;++B)G[B]=Gc.recalculateParentT(S.vmin,S.vmax,G[B]);if(!P.equalsRange(0,1))for(let B=0;B<V.length;++B)V[B]=wa.recalculateParentT(P.vmin,P.vmax,V[B]);for(let B=0;B<V.length;++B)V[B]=ox(A,V[B]);return Kc(t,e,i,G,V,G.length,n,s,r,o,l,c,f)}function Zie(t,e,i,n,s,r,o,l,c,f){const y=Ll(e,i);if(Zc(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,4);e.queryControlPoints(_);const x=Ge(Y,3);i.queryControlPoints(x);const S=Xx(_,3,x,2,o);if(S===0)return 0;const P=[],A=[],D=[];if(S===-1){const N=Ge(_n,4);ax(_,N);const F=[N[0].x,N[1].x,N[2].x,N[3].x],G=[N[0].y,N[1].y,N[2].y,N[3].y],V=Ge(_n,3);nx(x,V);const B=Ux([V[0].x,V[1].x,V[2].x],2,[V[0].y,V[1].y,V[2].y],2,null,0,F,3,G,3,null,0,!0,Ze.unit(),Ze.unit(),D,A);if(B>0){let W=0;for(let J=0;J<B;J++){const re=new Y;e.queryCoord2D(A[J],re);const ne=new Y;i.queryCoord2D(D[J],ne),Y.distance(re,ne)<=o&&(P.push(re.clone()),A[W]=A[J],D[W]=D[J],W++)}A.length=W,P.length=W}}for(let N=0;N<2;N++){let F,G;N===0?(F=_,G=x):(G=_,F=x);for(let V=0;V<2;V++){const B=V===0?0:F.length-1,W=[0],J=new Y;if(N===0)D7(G,F[B],W),Wu(G,W[0],J);else{const re=lx(G,F[B],Ze.unit(),!1,-1,1,W);K(re===1),As(G,W[0],J)}Y.distance(F[B],J)<=o&&(N===0?(A.push(B===0?0:1),D.push(W[0])):(D.push(B===0?0:1),A.push(W[0])),P.push(J.clone()))}}return Kc(t,e,i,A,D,A.length,n,s,r,o,l,c,f)}function Qtt(t,e,i,n,s){const r=new Xr;if(mye(t,Ze.unit(),r),r.inflate(n),!r.isIntersectingPoint2D(e))return 0;const o=hC(t);let l=0,c=o.specialPoints[0];const f=[];for(let y=1,_=o.specialPoints.length;y<_;++y){const x=o.specialPoints[y],S=Btt(t,e,c,x);if(f.length===0)f.push(S);else if(S.t===S.tmin)K(f.at(-1).d<=S.d),f.at(-1).tmax=S.tmax;else if(f.at(-1).t===f.at(-1).tmax){K(f.at(-1).d>=S.d);const P=f.at(-1).tmin;f[f.length-1]=S,f.at(-1).tmin=P}else f.push(S);c=x}for(const y of f)if(y.d<=n){const _=y.t;i&&(l>=i.length&&Mi(""),i[l]=_),l++}return l}function mye(t,e,i){const n=Ge(Y,4);t.queryControlPoints(n),pC(n,e,i)}function pC(t,e,i){if(e.equalsRange(0,1))return void i.setFromPoints(t,4);const n=Ge(Y,4);kv(t,e.vmin,e.vmax,n),i.setFromPoints(n,4)}class gye{constructor(e,i){this.controlPoints=e,this.point=i.clone()}getMaxDerivative(){return 6}getValue(e,i){switch(e){case 0:{const n=new Y;As(this.controlPoints,i,n);const s=ya(this.controlPoints,1,i);return 2*n.sub(this.point).dotProduct(s)}case 1:{const n=new Y;As(this.controlPoints,i,n);const s=ya(this.controlPoints,1,i),r=ya(this.controlPoints,2,i);return 2*(n.sub(this.point).dotProduct(r)+s.dotProduct(s))}case 2:{const n=new Y;As(this.controlPoints,i,n);const s=ya(this.controlPoints,1,i),r=ya(this.controlPoints,2,i),o=ya(this.controlPoints,3,i);return 2*(n.sub(this.point).dotProduct(o)+3*s.dotProduct(r))}case 3:{const n=ya(this.controlPoints,1,i),s=ya(this.controlPoints,2,i),r=ya(this.controlPoints,3,i);return 2*(4*n.dotProduct(r)+3*s.sqrLength())}case 4:{const n=ya(this.controlPoints,2,i),s=ya(this.controlPoints,3,i);return 2*(10*n.dotProduct(s))}case 5:{const n=ya(this.controlPoints,3,i);return 2*(10*n.dotProduct(n))}default:return 0}}getError(e){return K(0),0}}function lx(t,e,i,n,s,r,o){ZE(Ze.unit().contains(i)&&r>0,"getClosestCoordinate"),(s<0||Number.isNaN(s))&&(s=Number.MAX_VALUE);const l=[],c=new Y;As(t,i.vmin,c);let f=Y.distance(c,e);if(f<=s&&l.push(new Y(i.vmin,f)),i.vmin!==i.vmax&&(As(t,i.vmax,c),f=Y.distance(c,e),f<=s&&l.push(new Y(i.vmax,f))),i.width()>0){const x=new Array(18),S=r1(new gye(t,e),i,18,x);for(let P=0;P<S;P++)As(t,x[P],c),f=Y.distance(c,e),f>s||l.push(new Y(x[P],f))}if(n){K(i.equals(Ze.unit()));{As(t,-1,c,!0);const x=new Y;As(t,0,x);const S=new ni({start:c,end:x}),P=S.getClosestCoordinate(e,!0);P<1&&(c.assign(S.getCoord2D(P)),f=Y.distance(c,e),f<=s&&l.push(new Y(P-1,f)))}{As(t,2,c,!0);const x=new Y;As(t,i.vmax,x);const S=new ni({start:x,end:c}),P=S.getClosestCoordinate(e,!0);P>0&&(c.assign(S.getCoord2D(P)),f=Y.distance(c,e),f<=s&&l.push(new Y(1+P,f)))}}if(!l.length)return 0;l.sort((x,S)=>x.compare(S));let y=0;const _=l[0].x;if(o[y++]=_,y<r){const x=I1e(t,4,!1).total(),S=l[0].y;for(let P=1,A=l.length;P<A;P++)if(l[P].y>S+x){l.length=P;break}l.sort((P,A)=>Mf(P.x,A.x)),y=0,o[y++]=l[0].x;for(let P=1,A=l.length;P<A;P++)l[P].x!==o[y-1]&&y<r&&(o[y++]=l[P].x)}return y}function pM(t,e,i,n,s,r,o){const l=Ge(Y,4);return t.queryControlPoints(l),lx(l,e,i,n,s,r,o)}function eit(t){return t.getStartXY().norm(1)+t.getEndXY().norm(1)+t.m_cp[0].norm(1)+t.m_cp[1].norm(1)}function tit(t){return t[0].norm(1)+t[1].norm(1)+t[2].norm(1)+t[3].norm(1)}function iit(t,e,i){if(K(i>=2),i===2){const P=new Y;cr(e[0],e[i-1],1/3,P);const A=new Y;return cr(e[0],e[i-1],2/3,A),void t.construct(e[0],P,A,e[i-1])}const n=e[0],s=e[i-1],r=[0,0],o=pM(t,n,Ze.unit(),!1,Number.NaN,2,r),l=[0,0],c=pM(t,s,Ze.unit(),!1,Number.NaN,2,l),f=[];for(let P=0;P<o;P++)for(let A=0;A<c;A++){const D=r[P],N=l[A],F=(W,J)=>{const re=[];re.length=i-2;const ne=()=>{let $e=0;for(let we=1,Fe=i-1;we<Fe;we++){$e+=Y.distance(e[we-1],e[we]);const it=$e;re[we-1]=it}$e+=Y.distance(e[i-2],e[i-1]);for(let we=1,Fe=i-1;we<Fe;we++)re[we-1]/=$e};let oe=!1,pe=!1;{const $e=new Qt;D<=N?(t.queryCut(D,N,$e,!0),W.assign($e.get().getControlPoint1()),J.assign($e.get().getControlPoint2())):(t.queryCut(N,D,$e,!0),W.assign($e.get().getControlPoint2()),J.assign($e.get().getControlPoint1())),n.equals(W)&&(oe=!0),s.equals(J)&&(pe=!0)}ne();let ce=Number.MAX_VALUE;const ue=W.clone(),se=J.clone();for(let $e=0;$e<5;$e++)ce=nO(!0,!1,n,ue,se,s,oe,pe,re,i-2,e,i);for(let $e=0;$e<30;$e++){const we=ue.clone();se.clone();const Fe=nO(!0,!0,n,ue,se,s,oe,pe,re,i-2,e,i);if(ce<=Fe&&we.equals(ue)&&we.equals(se))break;ce=Fe}ne();let de=!1,Se=Number.EPSILON;const Pe=W.clone(),Re=J.clone();for(let $e=0;$e<30;$e++){const we=Pe.clone();Re.clone();const Fe=nO(de,!0,n,Pe,Re,s,oe,pe,re,i-2,e,i);if(Se<=Fe&&we.equals(Pe)&&we.equals(Re))break;de=!0,Se=Fe}return Se<ce?(W.assign(Pe),J.assign(Re)):(W.assign(ue),J.assign(se),Se=ce),Se},G=new Y,V=new Y,B=[F(G,V),Y.distance(n,G)+Y.distance(G,V)+Y.distance(V,s),G.x,G.y,V.x,V.y];f.splice(f.length,0,...B)}let y=f[0],_=f[1],x=0;for(let P=6;P<f.length;P+=6)f[P]<y&&(y=f[P],_=f[P+1],x=P);let S=x;for(let P=0;P<f.length;P+=6)P!==x&&f[P+1]<_&&Math.abs(y-f[P])<10*y&&(_=f[P+1],S=P);t.construct(n,new Y(f[S+2],f[S+3]),new Y(f[S+4],f[S+5]),s)}function nit(t,e,i=!1){const n=Ge(Y,4);t.queryControlPoints(n);const s=Ge(_n,4);let r,o,l;ax(n,s,!0);const c=s[3].x.isZero(),f=s[3].y.isZero();if(c||f)if(c&&!f){if(s[2].x.isZero())return 0;r=s[1].x.div(s[2].x).negate(),o=s[2].y.div(s[3].y),l=s[1].y.div(s[3].y)}else{if(c||!f||s[2].y.isZero())return 0;r=s[1].y.div(s[2].y).negate(),o=s[2].x.div(s[3].x),l=s[1].x.div(s[3].x)}else{s[2].x.divThis(s[3].x),s[1].x.divThis(s[3].x),s[2].y.divThis(s[3].y),s[1].y.divThis(s[3].y);const S=s[2].x.sub(s[2].y);if(S.isZero())return 0;r=s[1].x.sub(s[1].y).div(S).negate(),o=s[2].x.clone(),l=s[1].x.clone()}if(!i&&r.abs().value()>2)return 0;const y=[0,0],_=t.getStartXY().equals(t.getEndXY()),x=Mv(1,-r.toDouble(),r.add(o).mul(r).add(l).toDouble(),Ze.unit(),_,y);if(x===0)return 0;if(y[0]>=0&&y[0]<=1){const S=r.toDouble()-y[0];if(i||S>=0&&S<=1)return e[0]=y[0],e[1]=S,e[0]>e[1]&&(e[1]=Et(e[0],e[0]=e[1])),2}if(x===2&&y[1]>=0&&y[1]<=1){const S=r.toDouble()-y[1];if(i||S>=0&&S<=1)return e[0]=y[1],e[1]=S,e[0]>e[1]&&(e[1]=Et(e[0],e[0]=e[1])),2}return 0}function sit(t,e,i){const n=t[1].mulE(e[2]).subThisE(t[2].mulE(e[1])),s=t[1].mulE(e[3]).subThisE(t[3].mulE(e[1])).mulThis(3),r=t[2].mulE(e[3]).subThisE(t[3].mulE(e[2])).mulThis(3),o=Ge(Be,2);let l=Tl(r,s,n,new Ze(0,1),!1,o);l<0&&(l=0);let c=0;for(let f=0;f<l;f++)An(o[f].value(),0,1)||(i[c].setE(o[f]),c++);return c}function yye(t,e){e[0].set(0);let i=1;const n=Ge(Be,4);pB(t,n,!0);const s=Ge(Be,4);mB(t,s,!0);{const r=n[3].mul(3),o=n[2].mul(2),l=n[1].clone(),c=Ge(Be,2);let f=Tl(r,o,l,new Ze(0,1),!1,c);f<0&&(f=0);for(let y=0;y<f;y++)An(c[y].value(),0,1)||(e[i]=c[y],i++)}{const r=s[3].mul(3),o=s[2].mul(2),l=s[1].clone(),c=Ge(Be,2);let f=Tl(r,o,l,new Ze(0,1),!1,c);f<0&&(f=0);for(let y=0;y<f;y++)An(c[y].value(),0,1)||(e[i]=c[y],i++)}if(i+=sit(n,s,e.slice(i)),e[i].set(1),i++,i>2){dd(e,0,i,(y,_)=>{const x=y.value(),S=_.value();return x<S?-1:x>S?1:0});let r=0;const o=e[0].clone();let l=0;const c=tit(t)*ts(),f=new Y;ST(t,e[0].value(),f);for(let y=1;y<i;y++){const _=new Y;if(ST(t,e[y].value(),_),e[y].eq(o)||_.isEqualPoint2D(f,c)){if(r!==0){if(e[y].eps()===0)o.setE(e[y]),l=0;else if(l!==0){const x=Xi(1/e[y].eps()),S=1/l,P=x+S;o.set((e[y].value()*x+o.value()*S)/P),l=1/P,o.setError(Math.sqrt(l))}e[r].setE(o),ST(t,o.value(),f)}}else r++,e[r].setE(e[y]),o.setE(e[y]),ST(t,o.value(),f),l=Xi(e[y].eps())}r++,i=r}return i===1&&(i=2,e[1].set(1)),K(e[0].value()===0),K(e[i-1].value()===1),i}function rit(t,e,i,n,s){const r=Ge(Be,4),o=Ge(Be,3),l=new Ze(0,1);let c=0;if(e){if(mB(t,r,!1),c=lM(r[3],r[2],r[1],r[0].sub(i),l,!1,o),n)for(let f=0;f<c;f++){const y=new Y;As(t,o[f].value(),y),n[f]=y.x}}else if(pB(t,r,!1),c=lM(r[3],r[2],r[1],r[0].sub(i),l,!1,o),n)for(let f=0;f<c;f++){const y=new Y;As(t,o[f].value(),y),n[f]=y.y}if(s)for(let f=0;f<c;f++)s[f]=o[f].value();else n&&dd(n,0,c,Mf);return c}function cq(t,e,i){i.setEmpty();const n=[];n.push(new Ze(0,1));const s=.5*Math.max(e.width(),e.height());for(;n.length;){const r=n.at(-1);n.pop();const o=new Xr;if(pC(t,r,o),o.isIntersectingW(e)){const l=Math.max(o.width(),o.height());if(e.containsW(o)||l<=s||r.width()<1e-12)i.merge(r);else{const c=r.getCenter();n.push(Ze.construct(r.vmin,c)),n.push(Ze.construct(c,r.vmax))}}}}function oit(t,e,i){i.length=0;{const re=new Be;fye(t,re);const ne=new Ht;if(pye(t,re,ne),ne.isZero())return re.isZero()||re.eq(new Be(1))?0:(i.push(re.value()),1)}const n=Ge(Be,4);uye(t,n,!0);const s=Ge(Be,4);hye(t,s,!0);const r=Ge(Be,6),o=n[3].negate().mulE(s[1]).addE(n[2].mulE(s[2]).mul(2)).addE(n[1].mulE(s[3])),l=n[3].negate().mulE(s[1]).subE(n[2].mulE(s[2]).mul(2)).addE(n[1].mulE(s[3])),c=n[2].mulE(n[2]).subE(s[2].mulE(s[2]));r[0]=s[1].mulE(s[1]).mulE(o).addE(n[1].mulE(n[1]).mulE(l)).addE(n[1].mulE(s[1]).mulE(c).mul(2)).mul(6),r[1]=n[2].mulE(s[1]).subE(n[1].mulE(s[2])).mulE(n[2].mulE(n[2]).addE(n[1].mulE(n[3]).mul(2)).addE(s[2].mulE(s[2])).addE(s[1].mulE(s[3]).mul(2))).mul(24);const f=n[1].mulE(s[2]).mulE(s[2]).mulE(s[3]),y=n[2].mulE(n[2]).mulE(n[3]).mulE(s[1]).subE(f).mul(156),_=n[3].mulE(s[1]).subE(n[1].mulE(s[3])),x=n[3].mulE(s[1]).subE(n[1].mulE(s[3])),S=n[1].mulE(n[3]).mulE(x).addE(s[1].mulE(s[3]).mulE(_)).mul(72),P=s[1].mulE(s[3]).subE(n[1].mulE(n[3])),A=n[2].mulE(s[2]).mulE(P).mul(120),D=n[1].mulE(n[2]).mulE(n[2]).mulE(s[3]),N=n[3].mulE(s[1]).mulE(s[2]).mulE(s[2]).subE(D).mul(36);r[2]=y.addE(S).addE(A).addE(N);const F=n[2].mulE(n[3]).mulE(n[3]).mulE(s[1]).subE(n[1].mulE(s[2]).mulE(s[3]).mulE(s[3])).mul(360),G=n[2].mulE(s[2]).mulE(n[2].mulE(n[3]).subE(s[2].mulE(s[3]))).addE(n[3].mulE(s[2]).mulE(s[2]).mulE(s[2])).subE(n[2].mulE(n[2]).mulE(n[2]).mulE(s[3])).mul(24),V=n[2].mulE(s[1]).mulE(s[3]).mulE(s[3]).subE(n[1].mulE(n[3]).mulE(n[3]).mulE(s[2])).mul(72),B=n[3].mulE(s[3]).mulE(s[1].mulE(s[2]).subE(n[1].mulE(n[2]))).mul(288);r[3]=F.addE(G).addE(V).addE(B),r[4]=s[3].mulE(s[3]).addE(n[3].mulE(n[3])).mulE(n[3].mulE(s[1]).subE(n[1].mulE(s[3]))).mul(270).addE(n[3].mulE(s[2]).subE(n[2].mulE(s[3]))).mulE(n[2].mulE(n[3]).addE(s[2].mulE(s[3]))).mul(180),r[5]=n[3].mulE(s[2]).subE(n[2].mulE(s[3])).mulE(n[3].mulE(n[3]).addE(s[3].mulE(s[3]))).mul(216);const W=Ge(Be,5),J=z1e(r,5,new Ze(0,1),!1,W,5);if(J>0){let re=Math.abs(t.getCurvature(0)),ne=0;const oe=Math.abs(t.getCurvature(1));(oe>re||!Number.isFinite(oe))&&(ne=1);for(let pe=0;pe<J;pe++){const ce=Math.abs(t.getCurvature(W[pe].value()));t.getCoord2D(W[pe].value()),(ce>re||!Number.isFinite(ce))&&(re=ce,ne=W[pe].value())}if((!Number.isFinite(re)||1/re<e)&&!An(ne,0,1)){const pe=t.getCoord2D(ne);if(!pe.equals(t.getStartXY())&&!pe.equals(t.getEndXY()))return i.push(ne),1}}return 0}class ait{constructor(e,i){this.b=e,this.len=i}getMaxDerivative(){return 1}getValue(e,i){return e===0?this.len-uC(this.b,i,!1):0}getError(e){return K(0),0}}function uq(t,e,i,n,s,r,o){for(;;){const l=Y.distance(e[0],e[3]),c=Y.distance(e[0],e[1])+Y.distance(e[1],e[2])+Y.distance(e[2],e[3]);if(c-l<=n+i*c)return t+Hi(l,c,.5);const f=B=>ya(e,1,B).length();if(r===0){K(o<8);let B=f(0),W=f(1);s[0]+=2,B>W&&(W=Et(B,B=W),e[3]=Et(e[0],e[0]=e[3]),e[2]=Et(e[1],e[1]=e[2]));let J=B/(B+W),re=1,ne=c;for(;J<1/32&&ne>=32*(n+i*ne);){re/=4;const oe=f(re);s[0]++,J=B/(oe+B);const pe=new Y;if(As(e,.5*re,pe),ne=Y.distance(pe,e[0]),ne<=n){const ce=new Y;As(e,re,ce),ne+=Y.distance(ce,pe)}}if(re!==1){const oe=Ge(Y,4);dC(e,re,e,oe),t=uq(t,oe,i,n,s,0,o+1),r++,o++;continue}}const y=8;s[0]+=y;const _=ff(y,f,0,1),x=16;s[0]+=x;const S=ff(x,f,0,1);let P=Math.abs(_-S)>n+i*c;if(!P)return t+S;if(r<3){const B=Ge(Y,4);dC(e,.5,e,B),t=uq(t,B,i,n,s,r+1,o+1),r++,o++;continue}const A=32;s[0]+=A;const D=ff(A,f,0,1);if(P=Math.abs(S-D)>n+i*c,!P)return t+D;const N=64;s[0]+=N;const F=ff(N,f,0,1);if(P=Math.abs(D-F)>n+i*c,!P)return t+F;const G=128;s[0]+=G;const V=ff(G,f,0,1);return P=Math.abs(F-V)>n+i*c,t+V}}function lit(t,e,i,n,s){if(i===e)return 0;const r=Ge(Y,4);t.queryControlPoints(r);const o=Ge(Y,4);return kv(r,e,i,o),uq(0,o,n,s,[0],0,0)}function cit(t,e,i,n,s){let r=!0;const o=ix(5,e,i,n,s,c=>{const f=ev(t,1,c);return(r?t.getCoordX(c)-t.getStartX():t.getCoordY(c)-t.getStartY())*f.length()});r=!1;const l=ix(5,e,i,n,s,c=>{const f=ev(t,1,c);return(r?t.getCoordX(c)-t.getStartX():t.getCoordY(c)-t.getStartY())*f.length()});return new Y(o,l)}function uit(t,e,i,n,s,r,o,l,c){const f=Ge(Y,4);t.queryControlPoints(f);const y=Ge(Y,4);if(e.queryControlPoints(y),f[0].equals(y[0])){if(f[1].equals(y[1])&&f[2].equals(y[2])&&f[3].equals(y[3]))return i&&(i.length=0,i.push(f[0]),i.push(f[3])),n&&(n.length=0,n.push(0),n.push(1)),s&&(s.length=0,s.push(0),s.push(1)),!0;if(!f[0].equals(y[3]))return!1}return!!(f[0].equals(y[3])&&f[1].equals(y[2])&&f[2].equals(y[1])&&f[3].equals(y[0]))&&(n&&(n.length=0,n.push(0),n.push(1),c&&(n[1]=Et(n[0],n[0]=n[1]))),s&&(s.length=0,s.push(1),s.push(0),c&&(s[1]=Et(s[0],s[0]=s[1]))),i&&(i.length=0,i.push(f[0]),i.push(f[3]),c&&(i[1]=Et(i[0],i[0]=i[1]))),!0)}function nO(t,e,i,n,s,r,o,l,c,f,y,_){let x=0,S=0,P=0,A=0,D=0,N=0,F=0;for(let V=1,B=_-1;V<B;V++){let W,J,re,ne,oe,pe,ce=-1,ue=c[V-1];t&&(V>2?(ue=hs(2*c[V-2]-c[V-3],0,1),c[V-1]=ue):V===2&&ue<=c[0]&&(ue=c[0]));for(let Se=0;Se<11&&(W=c[V-1],J=W*W,re=J*W,ne=1-W,oe=ne*ne,pe=oe*ne,t)&&!(Math.abs(W-ce)<1e-12)&&Se!==10;Se++){const Pe=i.x-2*n.x+s.x,Re=i.x-3*n.x+3*s.x-r.x,$e=i.y-2*n.y+s.y,we=i.y-3*n.y+3*s.y-r.y,Fe=i.x-n.x-2*Pe*W+Re*J,it=-y[V].x+i.x*pe+W*(3*n.x*oe+W*(3*s.x-3*s.x*W+r.x*W)),_t=i.y-n.y-2*$e*W+we*J,ot=-y[V].y+i.y*pe+W*(3*n.y*oe+W*(3*s.y-3*s.y*W+r.y*W));ce=W;const ut=W- -6*(Fe*it+_t*ot)/(6*(3*Xi(Fe)-(-2*Pe+2*Re*W)*it)+6*(3*Xi(_t)-(-2*$e+2*we*W)*ot));c[V-1]=hs(ut,V>1?c[V-2]:0,1)}x+=3*J*oe*oe,S+=3*re*pe,P+=3*J*J*oe;const se=-(pe*i.x+re*r.x-y[V].x);A+=se*W*oe,D+=se*J*ne;const de=-(pe*i.y+re*r.y-y[V].y);N+=de*W*oe,F+=de*J*ne}if(e){const V=x*P-S*S;Math.abs(V)>=1e-12*(Math.abs(x*P)+Math.abs(S*S))+1e-10?(o||(n.x=(A*P-D*S)/V,n.y=(N*P-F*S)/V),l||(s.x=(x*D-S*A)/V,s.y=(x*F-S*N)/V)):(cr(i,r,.3,n),cr(i,r,.6,s))}let G=0;for(let V=1,B=_-1;V<B;V++){const W=c[V-1],J=1-W,re=i.mul(zte(J)),ne=n.mul(3*W*J*J),oe=s.mul(3*W*W*J),pe=r.mul(zte(W));G+=re.add(ne).add(oe).add(pe).sub(y[V]).sqrLength()}return G}function Kie(t,e,i,n){const s=t.getPathStart(e),r=t.getPathEnd(e);if(r-s<3)return;const o=2*s,l=Y.getNAN();i.queryPoint2D(o,l);const c=l.x,f=l.y,y=Y.getNAN();i.queryPoint2D(o+2,y);const _=Y.getNAN();for(let x=o+4,S=2*r;x<S;x+=2)i.queryPoint2D(x,_),n.pe((_.x-l.x)*(y.y-f)),l.setCoordsPoint2D(y),y.setCoordsPoint2D(_);n.pe((c-l.x)*(y.y-f))}function hit(t,e,i){for(;e.hasNextSegment();){const n=e.nextCurve();if(n===null)break;i.pe(2*n.calculateArea2DHelper())}}var tn=br;class up{static toSegType(e){let i=0;switch(e){case me.enumLine:i=1;break;case me.enumBezier:i=2;break;case me.enumEllipticArc:i=4;break;case me.enumRationalBezier2:i=8;break;case me.enumBezier2:i=16;break;default:xt("")}return i}constructor(){this.m_segmentFlags=null,this.m_segmentParamIndex=null,this.m_segmentParams=null,this.m_curveCount=0,this.m_bezierCount=0,this.m_arcCount=0,this.m_rbezier2Count=0,this.m_bezier2Count=0,this.m_curveParamWritePoint=0}assignCopy(e){return this.m_segmentFlags=e.m_segmentFlags,this.m_segmentParamIndex=e.m_segmentParamIndex,this.m_segmentParams=e.m_segmentParams,this.m_curveCount=e.m_curveCount,this.m_bezierCount=e.m_bezierCount,this.m_arcCount=e.m_arcCount,this.m_rbezier2Count=e.m_rbezier2Count,this.m_bezier2Count=e.m_bezier2Count,this.m_curveParamWritePoint=e.m_curveParamWritePoint,this}}class ga extends D1e{constructor(e){super(e),this.m_cachedRingAreas2D=null,this.m_paths=null,this.m_pathFlags=null,this.m_curveData=null,e.move?(this.m_bPolygon=e.move.m_bPolygon,this.m_cachedLength2D=e.move.m_cachedLength2D,this.m_cachedArea2D=e.move.m_cachedArea2D,this.m_currentPathIndex=e.move.m_currentPathIndex,this.m_cachedRingAreas2D=e.move.m_cachedRingAreas2D,this.m_paths=e.move.m_paths,this.m_pathFlags=e.move.m_pathFlags,this.m_curveData=e.move.m_curveData,e.move.m_curveData=null,e.move.setEmpty()):(this.m_bPolygon=e.bPolygon,this.m_cachedLength2D=0,this.m_cachedArea2D=0,this.m_currentPathIndex=0)}getGeometryType(){return this.m_bPolygon?me.enumPolygon:me.enumPolyline}getDimension(){return this.m_bPolygon?2:1}changeRingStartPoint(e){K(this.m_bPolygon);const i=this.getPathIndexFromPointIndex(e),n=this.getPathStart(i);if(n===e)return;const s=this.getPathEnd(i);(e>=s||e<n)&&Je("change_ring_start_point");for(let r=0,o=this.m_description.getAttributeCount();r<o;r++){const l=this.m_description.getSemantics(r),c=tn.getComponentCount(l);this.m_vertexAttributes.get(r).rotate(n*c,e*c,s*c)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.rotate(n,e,s),this.m_curveData.m_segmentParamIndex.rotate(n,e,s))}setFillRule(e){this.m_bFillRule=e===1}getFillRule(){return this.m_bFillRule?1:0}isExteriorRingOGC(e){return!!this.m_bPolygon&&(this.updateOGCFlagsProtected(),!!(8&this.m_pathFlags.read(e)))}isExteriorRing(e){return this.calculateRingArea2D(e)>0}calculateRingArea2D(e){return this.m_bPolygon?(this.updateRingAreas2DProtected(),this.m_cachedRingAreas2D.read(e)):0}updateRingAreas2DProtected(){if(!this.hasDirtyFlag(1024))return;const e=this.getPathCount();if(e===0)return this.hasDirtyFlag(1024)&&(this.m_cachedArea2D=0),void this.setDirtyFlagProtected(1024,!1);const i=new fd(e),n=new Br(0),s=new Br(0);if(this.m_pointCount!==0){const r=this.getAttributeStreamRef(0);if(this.hasNonLinearSegments()){const o=new QN({parent:this});for(o.stripAttributes();o.nextPath();){s.reset();const l=o.getPathIndex();Kie(this,l,r,s),hit(this,o,s);const c=.5*s.getResult();n.add(c),i.write(l,c)}}else for(let o=0;o<e;o++){s.reset(),Kie(this,o,r,s);const l=.5*s.getResult();n.add(l),i.write(o,l)}}this.hasDirtyFlag(1024)&&(this.m_cachedArea2D=n.getResult(),this.m_cachedRingAreas2D=i,this.setDirtyFlagProtected(1024,!1))}getOGCPolygonCount(){if(!this.m_bPolygon)return 0;this.updateOGCFlagsProtected();let e=0;const i=this.getPathCount();for(let n=0;n<i;n++)8&this.m_pathFlags.read(n)&&e++;return e}getHashCodeImpl(){return K(0),0}equalsImpl(e){const i=e,n=this.getPathCount();if(n!==i.getPathCount())return!1;const s=this.hasNonLinearSegments();if(s!==i.hasNonLinearSegments()||s&&(this.m_curveData.m_curveCount!==i.m_curveData.m_curveCount||this.m_curveData.m_bezierCount!==i.m_curveData.m_bezierCount)||this.m_paths&&!this.m_paths.equals(i.m_paths,0,n+1)||this.m_bFillRule!==i.m_bFillRule||!this.m_bPolygon&&this.m_pathFlags&&!this.m_pathFlags.equals(i.m_pathFlags,0,n))return!1;if(this.hasNonLinearSegments()){if(!this.m_curveData.m_segmentFlags.equals(i.m_curveData.m_segmentFlags,0,this.getPointCount()))return!1;for(let r=0,o=this.getPointCount();r<o;r++){const l=this.m_curveData.m_segmentFlags.read(r);if(!ga.isNonLinearSegmentFlag(l))continue;const c=this.m_curveData.m_segmentParamIndex.read(r),f=i.m_curveData.m_segmentParamIndex.read(r),y=mu(l);for(let _=0;_<y;_++){const x=this.m_curveData.m_segmentParams.read(c+_),S=i.m_curveData.m_segmentParams.read(f+_);if(!va(x,S))return!1}}}return!0}equalsImplTol(e,i){const n=e,s=this.getPathCount();if(s!==n.getPathCount())return!1;const r=this.hasNonLinearSegments();if(r!==n.hasNonLinearSegments()||r&&(this.m_curveData.m_curveCount!==n.m_curveData.m_curveCount||this.m_curveData.m_bezierCount!==n.m_curveData.m_bezierCount)||this.m_paths&&!this.m_paths.equals(n.m_paths,0,s+1)||this.m_bFillRule!==n.m_bFillRule||!this.m_bPolygon&&this.m_pathFlags&&!this.m_pathFlags.equals(n.m_pathFlags,0,s))return!1;if(!r)return!0;if(!this.m_curveData.m_segmentFlags.equals(n.m_curveData.m_segmentFlags,0,this.getPointCount()))return!1;const o=this.querySegmentIterator(),l=n.querySegmentIterator();for(;o.nextPath();){if(!l.nextPath())return!1;for(;o.hasNextSegment();){const c=o.nextCurve(),f=l.nextCurve();if(!(c&&f&&c.equals(f,i))){if(!c&&!f)break;return!1}}}return!0}reserveImplImpl(e,i){this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.resize(e,1),this.m_curveData.m_segmentParamIndex.resize(e,-1),this.checkCompactSegmentParams())}verifyStreamsAfterSizeChangeExtraImpl(){this.m_paths||(this.m_paths=Ya(1,0),this.m_pathFlags=jg(1,0)),this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.resize(this.m_reservedPointCount,1),this.m_curveData.m_segmentParamIndex.resize(this.m_reservedPointCount,-1),this.checkCompactSegmentParams())}copyToImpl(e,i){const n=e;n.m_bPathStarted=!1,n.m_bFillRule=this.m_bFillRule,this.m_paths?n.m_paths=i?this.m_paths:this.m_paths.clone():n.m_paths=null,this.m_pathFlags?n.m_pathFlags=i?this.m_pathFlags:this.m_pathFlags.clone():n.m_pathFlags=null,this.m_curveData&&(n.m_curveData||(n.m_curveData=new up),n.m_curveData.assignCopy(this.m_curveData),n.m_curveData.m_curveCount=0,n.updateCurveCounter(this.m_curveData.m_curveCount),i||(this.m_curveData.m_segmentParamIndex?n.m_curveData.m_segmentParamIndex=this.m_curveData.m_segmentParamIndex.clone():n.m_curveData.m_segmentParamIndex=null,this.m_curveData.m_segmentFlags?n.m_curveData.m_segmentFlags=this.m_curveData.m_segmentFlags.clone():n.m_curveData.m_segmentFlags=null,this.m_curveData.m_segmentParams?n.m_curveData.m_segmentParams=this.m_curveData.m_segmentParams.clone():n.m_curveData.m_segmentParams=null)),n.hasDirtyFlag(512)||(n.m_cachedLength2D=this.m_cachedLength2D),n.m_cachedRingAreas2D=null,n.hasDirtyFlag(1024)||(n.m_cachedArea2D=this.m_cachedArea2D,this.m_cachedRingAreas2D!==null&&(n.m_cachedRingAreas2D=i?this.m_cachedRingAreas2D:this.m_cachedRingAreas2D.clone()))}calculateArea2D(){return this.m_bPolygon?(this.updateRingAreas2DProtected(),this.m_cachedArea2D):0}calculateLength2D(){if(!this.hasDirtyFlag(512))return this.m_cachedLength2D;const e=this.querySegmentIterator(),i=new Br(0);for(;e.nextPath();)for(;e.hasNextSegment();)i.add(e.nextSegment().calculateLength2D());return this.hasDirtyFlag(512)&&(this.m_cachedLength2D=i.getResult()),this.setDirtyFlagProtected(512,!1),i.getResult()}calculatePathLength2D(e){const i=this.querySegmentIteratorAtVertex(this.getPathStart(e)),n=new Br(0);for(;i.hasNextSegment();)n.add(i.nextSegment().calculateLength2D());return n.getResult()}calculateLength3D(e){return K(0),0}calculatePathLength3D(e,i){return K(0),0}copyTo(e){bi(e.getGeometryType())||Je(""),this!==e&&super.copyTo(e)}swap(e){K(0)}hasNonLinearSegments(){return this.getCurveCount()!==0}getSegmentCount(){let e=this.getPointCount();if(!this.m_bPolygon){e-=this.getPathCount();for(let i=0,n=this.getPathCount();i<n;i++)this.isClosedPath(i)&&e++}return e}getSegmentCountPath(e){let i=this.getPathSize(e);return!this.isClosedPath(e)&&i>0&&i--,i}add(e,i){this===e&&Je("Multi_path_impl::add");for(let n=0,s=e.getPathCount();n<s;n++)this.addPath(e,n,!i)}addPath(e,i,n){this.insertPath(-1,e,i,n)}addPathPoint2D(e,i,n){this.insertPath2D(-1,e,0,i,n)}addSegmentsFromPath(e,i,n,s,r){if(this===e&&Je("Multi_path_impl.add_segments_from_path"),r||this.getPathCount()!==0||(r=!0),i<0&&(i=e.getPathCount()-1),(i>=e.getPathCount()||n<0||s<0||n+s>e.getSegmentCountPath(i))&&Mi("add_segments_from_path"),s===0)return;const o=e.getPathStart(i),l=e.isClosedPath(i)&&n+s===e.getSegmentCountPath(i);this.m_bPathStarted=!1,this.mergeVertexDescription(e.getDescription());let c=s;const f=o+n;let y=f+1;r&&(c++,y--),!r&&e.hasNonLinearSegments()&&e.m_curveData.m_segmentFlags.read(f)!==1&&(e.getXY(f).equals(this.getXY(this.m_pointCount-1))||Je("add_segments_from_path: start point mismatch"));const _=this.m_pointCount;if(this.resizeImpl(this.m_pointCount+c),this.verifyAllStreamsAfterSizeChange(),r){if(c===0)return;this.m_paths.add(this.m_pointCount);let S=e.m_pathFlags.read(i);this.m_bPolygon&&(S|=1),this.m_pathFlags.write(this.m_pathFlags.size()-1,S),this.m_pathFlags.add(0)}else this.m_paths.write(this.m_pathFlags.size()-1,this.m_pointCount);const x=l?c-1:c;for(let S=0,P=this.m_description.getAttributeCount();S<P;S++){const A=this.m_description.getSemantics(S),D=tn.getComponentCount(A),N=e.m_description.getAttributeIndex(A);if(x>0){if(N<0||!e.m_vertexAttributes.get(N)){const F=tn.getDefaultValue(A);this.m_vertexAttributes.get(S).insertRange(D*_,F,x*D,D*_),l&&this.m_vertexAttributes.get(S).insertRange(D*_+x*D,F,D,D*_);continue}this.m_vertexAttributes.get(S).insertRangeFromStream(D*_,e.m_vertexAttributes.get(N),D*y,x*D,!0,D,D*_)}l&&this.m_vertexAttributes.get(S).insertRangeFromStream(D*(_+x),e.m_vertexAttributes.get(N),D*o,D,!0,D,D*(_+x))}if(this.hasNonLinearSegments()&&this.initSegmentData(0),e.hasNonLinearSegments()){let S=0;for(let P=0,A=f;P<s;P++)S+=mu(e.m_curveData.m_segmentFlags.read(A)),A++;if(S>0){this.initSegmentData(S);let P=f,A=_-(r?0:1),D=0;for(let N=0;N<s;N++){const F=e.m_curveData.m_segmentFlags.read(P);if(this.m_curveData.m_segmentFlags.write(A,F),ga.isNonLinearSegmentFlag(F)){D++;let G=e.m_curveData.m_segmentParamIndex.read(P);const V=mu(F);this.m_curveData.m_segmentParamIndex.write(A,this.m_curveData.m_curveParamWritePoint);for(let B=0;B<V;B++){const W=e.m_curveData.m_segmentParams.read(G);this.m_curveData.m_segmentParams.write(this.m_curveData.m_curveParamWritePoint,W),this.m_curveData.m_curveParamWritePoint++,G++}this.incCurveType(F,1)}else this.m_curveData.m_segmentParamIndex.write(A,-1);A++,P++}this.modifyCurveCounter(D)}}if(l){const S=this.getPathCount()-1,P=this.getPathStart(S),A=this.getPathEnd(S)-1,D=this.getXY(P),N=this.getXY(A);D.isEqualPoint2D(N)&&(--this.m_pointCount,this.m_paths.write(S+1,this.m_pointCount))}this.notifyModifiedFlags(2001)}reverseAllPaths(){for(let e=0,i=this.getPathCount();e<i;e++)this.reversePath(e)}reversePath(e){e>=this.getPathCount()&&Je("");const i=this.getPathSize(e);if(i===0)return;const n=this.getPathStart(e),s=this.isClosedPath(e);if(this.hasNonLinearSegments()){let l=n;const c=new this.m_segmentBufferCTor;let f=!1;for(let y=0;y<i;y++,l++){const _=this.m_curveData.m_segmentFlags.read(l);if(!ga.isNonLinearSegmentFlag(_))continue;f=!0,this.querySegment(l,c,!0),c.get().reverse();const x=this.m_curveData.m_segmentParamIndex.read(l);c.get().writeInBufferStream(this.m_curveData.m_segmentParams,x)}if(f){const y=s?0:1;this.m_curveData.m_segmentFlags.reverseRange(n,i-y,1),this.m_curveData.m_segmentParamIndex.reverseRange(n,i-y,1)}}const r=s?1:0;for(let l=0,c=this.m_description.getAttributeCount();l<c;l++)if(this.m_vertexAttributes.get(l)){const f=this.m_description.getSemantics(l),y=tn.getComponentCount(f);this.m_vertexAttributes.get(l).reverseRange(y*(n+r),y*(i-r),y)}const o=6&this.m_pathFlags.read(e);if(o){let l=0;4&o&&(l|=2),2&o&&(l|=4),this.m_pathFlags.clearBits(e,6),this.m_pathFlags.setBits(e,l)}this.notifyModifiedFlags(1233)}removePath(e){const i=this.getPathCount();e<0&&(e=i-1),e>=i&&Je("");const n=this.getPathStart(e),s=this.getPathSize(e);for(let r=0,o=this.m_description.getAttributeCount();r<o;r++)if(this.m_vertexAttributes.get(r)){const l=this.m_description.getSemantics(r),c=tn.getComponentCount(l);this.m_vertexAttributes.get(r).eraseRange(c*n,c*s,c*this.m_pointCount)}if(this.hasNonLinearSegments()){let r=0;for(let o=n,l=n+s;o<l;o++){const c=this.m_curveData.m_segmentFlags.read(o);ga.isNonLinearSegmentFlag(c)&&(this.incCurveType(c,-1),r++)}this.modifyCurveCounter(-r),this.m_curveData.m_segmentFlags.eraseRange(n,s,this.m_pointCount),this.m_curveData.m_segmentParamIndex.eraseRange(n,s,this.m_pointCount)}for(let r=e+1;r<=i;r++){const o=this.m_paths.read(r);this.m_paths.write(r-1,o-s)}if(this.m_pathFlags)for(let r=e+1;r<=i;r++){const o=this.m_pathFlags.read(r);this.m_pathFlags.write(r-1,o)}this.m_paths.resize(i),this.m_pathFlags.resize(i),this.m_pointCount-=s,this.m_reservedPointCount-=s,e===i-1&&(this.m_bPathStarted=!1),this.notifyModifiedFlags(2001),this.checkCompactSegmentParams(),this.dbgVerifyCurves()}dbgVerifyCurves(){}insertPath(e,i,n,s){this===i&&Je("Multi_path_impl::insert_path");const r=this.getPathCount();if(!s&&i.hasNonLinearSegmentsPath(n))return e=this.insertPath(e,i,n,!0),this.reversePath(e),e;n>=i.getPathCount()&&Je(""),e>r&&Je(""),e<0&&(e=r),n<0&&(n=i.getPathCount()-1),this.m_bPathStarted=!1,this.mergeVertexDescription(i.getDescription());const o=i.getPathStart(n),l=i.getPathSize(n);if(l===0)return this.insertPath2D(e,null,0,0,!0);const c=this.m_pointCount,f=i.isClosedPath(n)&&!s?1:0;this.resizeImpl(this.m_pointCount+l),this.verifyAllStreamsAfterSizeChange();const y=e<r?this.getPathStart(e):c;for(let S=0,P=this.m_description.getAttributeCount();S<P;S++){const A=this.m_description.getSemantics(S),D=i.getDescription().getAttributeIndex(A),N=tn.getComponentCount(A);if(D>=0&&i.m_vertexAttributes.get(D))f!==0&&this.m_vertexAttributes.get(S).insertRangeFromStream(y*N,i.m_vertexAttributes.get(D),N*o,N,!0,N,N*c),this.m_vertexAttributes.get(S).insertRangeFromStream((y+f)*N,i.m_vertexAttributes.get(D),N*(o+f),N*(l-f),s,N,N*(c+f));else{const F=tn.getDefaultValue(A);this.m_vertexAttributes.get(S).insertRange(y*N,F,N*l,N*c)}}const _=c+l;this.m_paths.add(_);for(let S=r;S>=e+1;S--){const P=this.m_paths.read(S-1);this.m_paths.write(S,P+l)}this.m_pathFlags.add(0);for(let S=r-1;S>=e+1;S--){let P=this.m_pathFlags.read(S);P&=-9,this.m_pathFlags.write(S+1,P)}let x=i.getPathFlagsStreamRef().read(n);if(x&=-9,this.m_bPolygon&&(x|=1),this.m_pathFlags.write(e,x),i.hasNonLinearSegments()){this.initSegmentData(0);let S=o,P=0;for(let A=0;A<l;A++)P+=mu(i.m_curveData.m_segmentFlags.read(S)),S++;if(P>0){this.m_curveData.m_segmentFlags===null?(this.m_curveData.m_segmentFlags=jg(this.m_pointCount,1),this.m_curveData.m_segmentParamIndex=Ya(this.m_pointCount,-1)):(this.m_curveData.m_segmentFlags.insertRange(y,1,l,c),this.m_curveData.m_segmentParamIndex.insertRange(y,-1,l,c)),this.m_curveData.m_segmentParams?this.m_curveData.m_segmentParams.resize(this.m_curveData.m_curveParamWritePoint+P):this.m_curveData.m_segmentParams=Gy(P),S=o;let A=y,D=0;for(let N=0;N<l;N++){const F=i.m_curveData.m_segmentFlags.read(S);if(ga.isNonLinearSegmentFlag(F)){this.m_curveData.m_segmentFlags.write(A,F),this.m_curveData.m_segmentParamIndex.write(A,this.m_curveData.m_curveParamWritePoint);const G=mu(F);let V=i.m_curveData.m_segmentParamIndex.read(S);for(let B=0;B<G;B++){const W=i.m_curveData.m_segmentParams.read(V);this.m_curveData.m_segmentParams.write(this.m_curveData.m_curveParamWritePoint,W),this.m_curveData.m_curveParamWritePoint++,V++}D++,this.incCurveType(F,1)}S++,A++}this.modifyCurveCounter(D)}}return this.notifyModifiedFlags(2001),e}insertPath2D(e,i,n,s,r){const o=this.getPathCount();(e>o||n<0)&&Je(""),e<0&&(e=o),this.m_bPathStarted=!1;const l=this.m_pointCount;this.resizeImpl(this.m_pointCount+s),s===0&&this.notifyModifiedFlags(32),this.verifyAllStreamsAfterSizeChange();const c=e<o?this.getPathStart(e):l;if(i)this.m_vertexAttributes.get(0).insertRangeFromPoints(2*c,i,n,s,r,2*l);else{const f=tn.getDefaultValue(0);this.m_vertexAttributes.get(0).insertRange(2*c,f,2*s,2*l)}for(let f=1,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=tn.getComponentCount(_),S=tn.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange(c*x,S,x*s,x*l)}this.m_paths.add(this.m_pointCount);for(let f=o;f>=e+1;f--){const y=this.m_paths.read(f-1);this.m_paths.write(f,y+s)}this.m_pathFlags.add(0);for(let f=o-1;f>=e+1;f--){let y=this.m_pathFlags.read(f);y&=-9,this.m_pathFlags.write(f+1,y)}return this.m_bPolygon&&this.m_pathFlags.write(e,1),this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(c,1,s,l),this.m_curveData.m_segmentParamIndex.insertRange(c,-1,s,l)),this.notifyModifiedFlags(2001),e}insertPathFromMultipoint(e,i,n,s,r){const o=i.getImpl(),l=this.getPathCount();(e>l||n<0)&&Je("");const c=s<0?o.getPointCount()-n:s;if(c>o.getPointCount()&&Je(""),n>=o.getPointCount()&&Je("pointsOffset"),e<0&&(e=l),this.m_bPathStarted=!1,this.mergeVertexDescription(o.getDescription()),c===0)return void this.insertPath2D(e,null,0,0,!0);const f=this.m_pointCount,y=n;this.resizeImpl(this.m_pointCount+c),this.verifyAllStreamsAfterSizeChange();const _=e<l?this.getPathStart(e):f;for(let P=0,A=this.m_description.getAttributeCount();P<A;P++){const D=this.m_description.getSemantics(P),N=o.getDescription().getAttributeIndex(D),F=tn.getComponentCount(D);if(N>=0){const G=o.getAttributeStreamRef(D);this.m_vertexAttributes.get(P).insertRangeFromStream(_*F,G,F*y,F*c,r,F,F*f)}else{const G=tn.getDefaultValue(D);this.m_vertexAttributes.get(P).insertRange(_*F,G,F*c,F*f)}}const x=f+c;this.m_paths.add(x);for(let P=l;P>=e+1;P--){const A=this.m_paths.read(P-1);this.m_paths.write(P,A+c)}this.m_pathFlags.add(0);for(let P=l-1;P>=e+1;P--){let A=this.m_pathFlags.read(P);A&=-9,this.m_pathFlags.write(P+1,A)}let S=0;this.m_bPolygon&&(S|=1),this.m_pathFlags.write(e,S),this.notifyModifiedFlags(2001)}insertPoints(e,i,n,s,r,o,l){var S;if(this===n&&Je("Multi_path_impl.insert_points"),e<0&&(e=this.getPathCount()),s<0&&(s=n.getPathCount()-1),(e>this.getPathCount()||i>=0&&i>this.getPathSize(e)||s>=n.getPathCount()||o>n.getPathSize(s))&&Mi(""),!o)return;if(this.mergeVertexDescription(n.m_description),e===this.getPathCount()){this.m_paths.add(this.m_pointCount);let P=n.m_pathFlags.read(s);P&=-9,this.m_bPolygon?this.m_pathFlags.add(1|P):this.m_pathFlags.add(P)}i<0&&(i=this.getPathSize(e));const c=this.m_pointCount;this.resizeImpl(this.m_pointCount+o),this.verifyAllStreamsAfterSizeChange();const f=this.getPathStart(e),y=f+i;o<0&&(o=n.getPathSize(s));const _=n.getPathStart(s),x=_+o;for(let P=0,A=this.m_description.getAttributeCount();P<A;P++){const D=this.m_description.getSemantics(P),N=tn.getComponentCount(D),F=n.m_description.getAttributeIndex(D);if(F<0||!n.m_vertexAttributes.get(F)){const G=tn.getDefaultValue(D);this.m_vertexAttributes.get(P).insertRange(N*y,G,x*N,N*c)}else(S=this.m_vertexAttributes.get(P))==null||S.insertRangeFromStream(N*(f+i),n.m_vertexAttributes.get(F),N*(_+r),o*N,l,N,N*c)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(f+i,1,o,c),this.m_curveData.m_segmentParamIndex.insertRange(f+i,-1,o,c),i>0&&this.isNonLinearSegment(f+i-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(f+i-1),-1),this.m_curveData.m_segmentFlags.write(f+i-1,1),this.m_curveData.m_segmentParamIndex.write(f+i-1,-1),this.modifyCurveCounter(-1)));for(let P=e+1,A=this.getPathCount();P<=A;P++){const D=this.m_paths.read(P);this.m_paths.write(P,D+o)}this.notifyModifiedFlags(2001)}insertPointsFromPoints(e,i,n,s,r,o){if(e<0&&(e=this.getPathCount()),(e>this.getPathCount()||i>this.getPathSize(e)||s<0)&&Mi(""),!r)return;e===this.getPathCount()&&(this.m_paths.add(this.m_pointCount),this.m_bPolygon?this.m_pathFlags.add(1):this.m_pathFlags.add(0)),i<0&&(i=this.getPathSize(e));const l=this.m_pointCount;this.resizeImpl(this.m_pointCount+r),this.verifyAllStreamsAfterSizeChange();const c=this.getPathStart(e);this.m_vertexAttributes.get(0).insertRangeFromPoints(2*(c+i),n,s,r,o,2*l);for(let f=1,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=tn.getComponentCount(_),S=tn.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange((c+i)*x,S,x*r,x*l)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(c+i,1,r,l),this.m_curveData.m_segmentParamIndex.insertRange(c+i,-1,r,l),i>0&&this.isNonLinearSegment(c+i-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(c+i-1),-1),this.m_curveData.m_segmentFlags.write(c+i-1,1),this.m_curveData.m_segmentParamIndex.write(c+i-1,-1),this.modifyCurveCounter(-1)));for(let f=e+1,y=this.getPathCount();f<=y;f++)this.m_paths.write(f,this.m_paths.read(f)+r);this.notifyModifiedFlags(2001)}insertPointsFromMultipoint(e,i,n,s,r,o){const l=n.getImpl();if(e<0&&(e=this.getPathCount()),r<0&&(r=n.getPointCount()),(e>this.getPathCount()||i>=0&&i>this.getPathSize(e)||r>n.getPointCount())&&Mi(""),!r)return;if(this.mergeVertexDescription(l.getDescription()),e===this.getPathCount()){this.m_paths.add(this.m_pointCount);const S=0;this.m_bPolygon?this.m_pathFlags.add(1|S):this.m_pathFlags.add(S)}i<0&&(i=this.getPathSize(e));const c=this.m_pointCount;this.resizeImpl(this.m_pointCount+r),this.verifyAllStreamsAfterSizeChange();const f=this.getPathStart(e),y=f+i,_=0,x=_+r;for(let S=0,P=this.m_description.getAttributeCount();S<P;S++){const A=this.m_description.getSemantics(S),D=tn.getComponentCount(A);if(l.getDescription().getAttributeIndex(A)<0){const F=tn.getDefaultValue(A);this.m_vertexAttributes.get(S).insertRange(D*y,F,x*D,D*c);continue}const N=l.getAttributeStreamRef(A);this.m_vertexAttributes.get(S).insertRangeFromStream(D*(f+i),N,D*(_+s),r*D,o,D,D*c)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(f+i,1,r,c),this.m_curveData.m_segmentParamIndex.insertRange(f+i,-1,r,c),i>0&&this.isNonLinearSegment(f+i-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(f+i-1),-1),this.m_curveData.m_segmentFlags.write(f+i-1,1),this.m_curveData.m_segmentParamIndex.write(f+i-1,-1),this.modifyCurveCounter(-1)));for(let S=e+1,P=this.getPathCount();S<=P;S++){const A=this.m_paths.read(S);this.m_paths.write(S,A+r)}this.notifyModifiedFlags(2001)}insertPoint2D(e,i,n){const s=this.getPathCount();e<0&&(e=s),(e>s||e<s&&i>this.getPathSize(e))&&Mi(""),e===s&&this.addPathPoint2D(null,0,!0);const r=this.m_pointCount;this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();const o=this.getPathStart(e),l=i<0?this.getPathSize(e)+o:i+o,c=this.m_vertexAttributes.get(0);if(l===r)this.m_paths.write(e+1,r+1),c.writePoint2D(2*l,n);else{c.insert(2*l,n,2*r);for(let f=1,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=tn.getComponentCount(_),S=tn.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange(x*l,S,x,x*r)}this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.insertRange(l,1,1,r),this.m_curveData.m_segmentParamIndex.insertRange(l,-1,1,r));for(let f=e+1,y=s;f<=y;f++)this.m_paths.write(f,this.m_paths.read(f)+1)}this.m_curveData&&this.m_curveData.m_segmentFlags&&l>o&&this.isNonLinearSegment(l-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(l-1),-1),this.modifyCurveCounter(-1),this.m_curveData.m_segmentFlags.write(l-1,1),this.m_curveData.m_segmentParamIndex.write(l-1,-1)),this.notifyModifiedFlags(2001)}insertPoint(e,i,n){const s=this.getPathCount();e<0&&(e=s),(e>s||e<s&&i>this.getPathSize(e))&&Mi(""),e===s&&this.addPathPoint2D(null,0,!0);const r=this.m_pointCount;this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();const o=this.getPathStart(e),l=i<0?this.getPathSize(e)+o:i+o;if(l===r)this.m_paths.write(e+1,r+1),this.setPointByVal(l,n);else{const c=n.getDescription();this.m_description!==c&&this.mergeVertexDescription(c);for(let f=0,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=tn.getComponentCount(_);if(c.hasAttribute(_))this.m_vertexAttributes.get(f).insertAttributes(x*l,n,_,x*r);else{const S=tn.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange(x*l,S,x,x*r)}}this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.insertRange(l,1,1,r),this.m_curveData.m_segmentParamIndex.insertRange(l,-1,1,r));for(let f=e+1,y=s;f<=y;f++)this.m_paths.write(f,this.m_paths.read(f)+1)}this.m_curveData&&this.m_curveData.m_segmentFlags&&l>o&&this.isNonLinearSegment(l-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(l-1),-1),this.modifyCurveCounter(-1),this.m_curveData.m_segmentFlags.write(l-1,1),this.m_curveData.m_segmentParamIndex.write(l-1,-1)),this.notifyModifiedFlags(2001)}removePointFromPath(e,i){const n=this.getPathCount();e<0&&(e=n-1),(e>=n||i>=this.getPathSize(e))&&Mi("Multi_path.remove_point");const s=this.getPathStart(e),r=this.isClosedPath(e);i<0&&(i=this.getPathSize(e)-1),i<0&&Mi("Multi_path.remove_point");const o=s+i;for(let l=0,c=this.m_description.getAttributeCount();l<c;l++)if(this.m_vertexAttributes.get(l)){const f=this.m_description.getSemantics(l),y=tn.getComponentCount(f);this.m_vertexAttributes.get(l).eraseRange(y*o,y,y*this.m_pointCount)}if(this.m_curveData&&this.m_curveData.m_segmentFlags){this.checkCompactSegmentParams();let l=0;if(o>s&&this.isNonLinearSegment(o-1))l+=1,this.incCurveType(this.m_curveData.m_segmentFlags.read(o-1),-1),this.m_curveData.m_segmentFlags.write(o-1,1),this.m_curveData.m_segmentParamIndex.write(o-1,-1);else{const c=this.getPathEnd(e);r&&s+1<c&&this.isNonLinearSegment(c-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(c-1),-1),this.m_curveData.m_segmentFlags.write(c-1,1),this.m_curveData.m_segmentParamIndex.write(c-1,-1),l+=1)}this.isNonLinearSegment(o)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(o),-1),l+=1),l>0&&this.modifyCurveCounter(-l),this.m_curveData.m_segmentFlags.eraseRange(o,1,this.m_pointCount),this.m_curveData.m_segmentParamIndex.eraseRange(o,1,this.m_pointCount)}for(let l=n;l>=e+1;l--){const c=this.m_paths.read(l);this.m_paths.write(l,c-1)}this.m_pointCount--,this.m_reservedPointCount--,this.notifyModifiedFlags(2001)}removePoint(e){let i;i=e<0?this.getPathCount()-1:this.getPathIndexFromPointIndex(e),this.removePointFromPath(i,e-this.getPathStart(i))}getNumberOfCurves(e){if(!this.hasNonLinearSegments())return 0;let i=0;for(let n=this.getPathStart(e),s=this.getPathEnd(e);n<s;n++)ga.isNonLinearSegmentFlag(this.m_curveData.m_segmentFlags.read(n))&&++i;return i}getPathCount(){return this.m_paths?this.m_paths.size()-1:0}getPathSize(e){return this.m_paths.read(e+1)-this.m_paths.read(e)}getPathStart(e){return this.m_paths.read(e)}getPathEnd(e){return this.m_paths.read(e+1)}getPathIndexFromPointIndex(e,i=-1){i===-1&&(i=this.m_currentPathIndex);const n=this.getPathCount(),s=ga.getPathIndexFromPointIndexImpl(this.m_paths,n,e,i);return this.m_currentPathIndex=s,s}startPathCoords(e,i){this.startPathPoint(new Ut({x:e,y:i}))}startPath(e){this.startPathPoint(new Ut({pt:e}))}startPath3D(e){this.startPathPoint(new Ut({x:e.x,y:e.y,z:e.z}))}startPath3DCoords(e,i,n){this.startPathPoint(new Ut({x:e,y:i,z:n}))}startPathPoint(e){e.isEmpty()&&Je("");const i=e.getDescription();let n;if(this.m_description!==i){this.mergeVertexDescription(i);const s=new Ut({vd:this.m_description});e.copyCommonAttributesTo(s),n=s}else n=e;this.m_bPathStarted?this.setPointByVal(this.m_pointCount-1,n):(this.insertPoint(-1,-1,n),this.m_bPathStarted=!0)}beforeNewSegmentHelper2(){this.m_paths=Ya(2),this.m_paths.write(0,0),this.m_pathFlags=jg(2,0),this.m_bPolygon&&this.m_pathFlags.write(0,1)}beforeNewSegmentHelper1(){this.m_paths!==null?(this.m_paths.add(0),this.m_pathFlags.add(0),this.m_bPolygon&&this.m_pathFlags.write(this.m_pathFlags.size()-2,1)):this.beforeNewSegmentHelper2()}beforeNewSegment(e){this.m_pointCount!==0||this.m_bPathStarted||this.startPathCoords(0,0);const i=this.m_pointCount,n=this.m_paths.size()-1,s=i+e;this.m_paths.write(n,s),this.resizeImpl(s),this.m_bPathStarted&&(this.m_bPathStarted=!1)}finishLineTo(){if(this.hasNonLinearSegments()){const e=this.m_curveData.m_segmentFlags.read(this.m_pointCount-1);e!==1&&(this.m_curveData.m_segmentFlags.write(this.m_pointCount-1,1),this.m_curveData.m_segmentParamIndex.write(this.m_pointCount-1,-1),this.modifyCurveCounter(-1),this.incCurveType(e,-1))}}lineToCoords(e,i){if(this.beforeNewSegment(1),this.m_description.getAttributeCount()===1)this.setXYCoords(this.m_pointCount-1,e,i);else{const n=Cy(),s=new Ut({vd:this.m_description,attribBuffer:n,initDefaultValues:!0});s.setXYCoords(e,i),this.setPointByVal(this.m_pointCount-1,s)}this.finishLineTo()}lineTo(e){this.lineToCoords(e.x,e.y)}lineTo3D(e){this.beforeNewSegment(1);const i=I5(this.m_description,KE()),n=Cy(),s=new Ut({vd:i,attribBuffer:n,initDefaultValues:!0});s.setXYZ(e),this.setPointByVal(this.m_pointCount-1,s),this.finishLineTo()}lineTo3DCoords(e,i,n){this.lineTo3D(new ii(e,i,n))}lineToPoint(e){if(this.beforeNewSegment(1),this.m_description===e.getDescription())this.setPointByVal(this.m_pointCount-1,e);else{this.mergeVertexDescription(e.getDescription());const i=Cy(),n=new Ut({vd:this.m_description,attribBuffer:i,initDefaultValues:!1});e.copyCommonAttributesTo(n),this.setPointByVal(this.m_pointCount-1,n)}this.finishLineTo()}openPathAndDuplicateStartVertex(e){this.m_bPolygon&&xt("");const i=this.getPathCount();if(e>i&&Je(""),!this.isClosedPath(e))return;this.m_pathFlags||xt("");const n=this.m_pointCount,s=this.getPathStart(e),r=this.getPathEnd(e);if(r-s!=0){this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();for(let o=0,l=this.m_description.getAttributeCount();o<l;o++)if(this.m_vertexAttributes.get(o)){const c=this.m_description.getSemantics(o),f=tn.getComponentCount(c);this.m_vertexAttributes.get(o).insertRangeFromStream(f*r,this.m_vertexAttributes.get(o),f*s,f,!0,1,f*n)}for(let o=i;o>e;o--){const l=this.m_paths.read(o);this.m_paths.write(o,l+1)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(r,1,1,n),this.m_curveData.m_segmentParamIndex.insertRange(r,-1,1,n)),this.m_pathFlags.clearBits(e,1)}}openPath(e){K(0)}isStrongPathStart(e){return!!(2&this.m_pathFlags.read(e))}setStrongPathStart(e,i){i?this.m_pathFlags.setBits(e,2):this.m_pathFlags.clearBits(e,2)}isStrongPathEnd(e){return!!(4&this.m_pathFlags.read(e))}setStrongPathEnd(e,i){i?this.m_pathFlags.setBits(e,4):this.m_pathFlags.clearBits(e,4)}clearStrongPathEnds(){for(let e=0,i=this.getPathCount();e<i;++e)this.m_pathFlags.clearBits(e,6)}openAllPathsAndDuplicateStartVertex(){if(this.m_bPolygon&&xt(""),this.isEmpty())return;this.m_pathFlags||xt("");let e=0;const i=this.getPathCount();for(let y=0;y<i;y++)this.isClosedPath(y)&&(this.getPathSize(y)>0?e++:this.m_pathFlags.clearBits(y,1));if(e===0)return;const n=this.hasNonLinearSegments();let s=0;const r=this.getPathCount(),o=this.m_description.getAttributeCount(),l=new Array(o);let c=null,f=null;for(let y=0;y<r;++y){const _=this.getPathStart(y),x=this.getPathSize(y),S=this.isClosedPath(y);if(x>0){const P=_+s;for(let A=0;A<o;A++)if(this.m_vertexAttributes.get(A)){const D=this.m_description.getSemantics(A),N=tn.getComponentCount(D);if(!l[A]){const F=l9(D,N*(this.m_pointCount+e));l[A]=F}l[A].writeRange(P*N,x*N,this.m_vertexAttributes.get(A),_*N,!0,1),S&&l[A].writeRange((P+x)*N,N,this.m_vertexAttributes.get(A),_*N,!0,1)}if(n){if(c===null){const A=this.m_pointCount+e;c=jg(A),f=Ya(A)}c.writeRange(P,x,this.m_curveData.m_segmentFlags,_,!0,1),f.writeRange(P,x,this.m_curveData.m_segmentParamIndex,_,!0,1),S&&(c.write(P+x,1),f.write(P+x,-1))}}this.m_paths.write(y,_+s),S&&(this.m_pathFlags.clearBits(y,1),++s)}this.m_paths.write(r,this.m_pointCount+e),this.m_pathFlags.clearBits(r,1);for(let y=0;y<o;y++)this.m_vertexAttributes.get(y)&&this.m_vertexAttributes.set(y,l[y]);n&&(this.m_curveData.m_segmentFlags=c,this.m_curveData.m_segmentParamIndex=f),this.m_pointCount+=e,this.m_reservedPointCount>0&&(this.m_reservedPointCount=this.m_pointCount)}closePathWithLine(e){e===void 0&&(e=this.getPathCount()-1),this.throwIfEmpty(),(e<0||e>=this.getPathCount())&&Je("close_path_with_line"),e===this.getPathCount()-1&&(this.m_bPathStarted=!1);const i=this.m_pathFlags.read(e);if(this.m_pathFlags.write(e,1|i),this.m_curveData&&this.m_curveData.m_segmentFlags){const n=this.getPathEnd(e)-1,s=this.m_curveData.m_segmentFlags.read(n);this.m_curveData.m_segmentFlags.write(n,1),this.m_curveData.m_segmentParamIndex.write(n,-1),s!==1&&(this.incCurveType(s,-1),this.modifyCurveCounter(-1))}this.notifyModifiedFlags(2001)}closeLastPathWithSegment(e){this.closePathWithSegment(this.getPathCount()-1,e)}closePathWithSegment(e,i){if(this.throwIfEmpty(),(e<0||e>=this.getPathCount())&&Je("close_path_with_line"),i.getEndXY().equals(this.getXY(this.getPathStart(e)))||Je("close_path_with_segment: end point mismatch"),e===this.getPathCount()-1)this.m_bPathStarted=!1,this.addSegment(i,!1),--this.m_pointCount,this.m_paths.write(e+1,this.m_pointCount);else{this.mergeVertexDescription(i.getDescription());const s=i.getStartXY(),r=this.getPathEnd(e)-1;s.equals(this.getXY(r))||Je("close_path_with_segment: start point mismatch");const o=i.getGeometryType();if(o===me.enumLine)return void this.closePathWithLine(e);{const l=eO(i);this.initSegmentData(l);const c=up.toSegType(o),f=this.m_curveData.m_segmentFlags.read(r);if(f!==c)this.m_curveData.m_segmentParamIndex.write(r,this.m_curveData.m_curveParamWritePoint),i.writeInBufferStream(this.m_curveData.m_segmentParams,this.m_curveData.m_curveParamWritePoint),this.m_curveData.m_curveParamWritePoint+=l,this.incCurveType(c,1),f!==1?this.incCurveType(f,-1):this.modifyCurveCounter(1);else{const y=this.m_curveData.m_segmentParamIndex.read(r);i.writeInBufferStream(this.m_curveData.m_segmentParams,y)}this.m_curveData.m_segmentFlags.write(r,c)}}const n=this.m_pathFlags.read(e);this.m_pathFlags.write(e,1|n),this.notifyModifiedFlags(2001)}closeAllPaths(){if(this.m_bPolygon||this.isEmptyImpl())return;this.m_bPathStarted=!1;let e=!1;for(let i=0,n=this.m_paths.size()-1;i<n;i++){if(this.isClosedPath(i))continue;const s=this.m_pathFlags.read(i);this.m_pathFlags.write(i,1|s),e=!0}e&&this.notifyModifiedFlags(512)}isClosedPath(e){return!!(1&this.m_pathFlags.read(e))}isClosedPathInXYPlane(e){if(this.isClosedPath(e))return!0;const i=this.getPathStart(e),n=this.getPathEnd(e)-1;if(i>n)return!1;const s=this.getXY(i),r=this.getXY(n);return s.isEqualPoint2D(r)}isClosedPathIn3D(e){return K(0),!1}hasNonLinearSegmentsPath(e){if(!this.hasNonLinearSegments())return!1;for(let i=this.getPathStart(e),n=this.getPathEnd(e);i<n;i++)if(ga.isNonLinearSegmentFlag(this.m_curveData.m_segmentFlags.read(i)))return!0;return!1}isNonLinearSegment(e){return!(1&this.getSegmentFlags(e))}addEnvelope(e,i){if(e.isEmpty())return;const n=this.m_pointCount===0;if(e instanceof xe)this.startPathCoords(e.xmin,e.ymin),i?(this.lineToCoords(e.xmax,e.ymin),this.lineToCoords(e.xmax,e.ymax),this.lineToCoords(e.xmin,e.ymax)):(this.lineToCoords(e.xmin,e.ymax),this.lineToCoords(e.xmax,e.ymax),this.lineToCoords(e.xmax,e.ymin));else{const s=e.getDescription(),r=Cy(),o=new Ut({vd:s,attribBuffer:r,initDefaultValues:!1});for(let l=0,c=4;l<c;l++){const f=i?c-l-1:l;e.queryCornerByVal(f,o),l===0?this.startPathPoint(o):this.lineToPoint(o)}}this.closePathWithLine(),this.m_bPathStarted=!1,n&&!i&&(this.setDirtyFlagProtected(256,!1),this.m_bPolygon&&Math.min(e.width(),e.height())>0&&this.setIsSimple(3,0))}addPathFromClosedSegment(e,i){if(e.isClosed()||Je("add_path_from_closedSegment: segment must be closed"),i){const n=e.getReversed(),s=new Ut;n.queryStart(s),this.startPathPoint(s),this.closeLastPathWithSegment(n)}else{const n=new Ut;e.queryStart(n),this.startPathPoint(n),this.closeLastPathWithSegment(e)}}addSegment_(e,i){const n=e.getDescription();this.mergeVertexDescription(n);const s=Cy(),r=new Ut({vd:n,attribBuffer:s,initDefaultValues:!1}),o=e.getGeometryType();if(o===me.enumLine)(i||this.isEmptyImpl())&&(e.queryStart(r),this.startPathPoint(r)),e.queryEnd(r),this.lineToPoint(r);else{let l=!1;if((i||this.isEmptyImpl())&&(l=!0),!l&&(e.getStartXY().equals(this.getXY(this.m_pointCount-1))||Je("add_segment: start point mismatch")),l&&(e.queryStart(r),this.startPathPoint(r)),this.beforeNewSegment(1),e.queryEnd(r),r.getDescription()===this.m_description)this.setPointByVal(this.m_pointCount-1,r);else{const y=Cy(),_=new Ut({vd:this.m_description,attribBuffer:y,initDefaultValues:!1});r.copyCommonAttributesTo(_),this.setPointByVal(this.m_pointCount-1,_)}const c=eO(e);this.initSegmentData(c),this.m_curveData.m_segmentParamIndex.write(this.m_pointCount-2,this.m_curveData.m_curveParamWritePoint),e.writeInBufferStream(this.m_curveData.m_segmentParams,this.m_curveData.m_curveParamWritePoint),this.m_curveData.m_curveParamWritePoint+=c;const f=up.toSegType(o);this.incCurveType(f,1),this.modifyCurveCounter(1),this.m_curveData.m_segmentFlags.write(this.m_pointCount-2,f)}}addSegment(e,i,n){n?i?this.addPathFromClosedSegment(e,!1):this.closeLastPathWithSegment(e):this.addSegment_(e,i)}interpolateAttributesRange(e,i,n,s){for(let l=e;l<n-1;l++)this.isClosedPath(l)&&Je("cannot interpolate across closed paths");const r=this.m_description.getAttributeCount();if(r===1)return;const o=this.calculateSubLength2D(e,i,n,s);if(o!==0)for(let l=1;l<r;l++){const c=this.m_description.getSemantics(l);this.interpolateAttributesSemanticsImpl(c,e,i,n,s,o)}}interpolateAttributesSemantics(e,i,n,s,r){if(e===0)return;this.hasAttribute(e)||Je("does not have the given attribute"),tn.getInterpolation(e)===2&&Je("angular interpolation");for(let l=i;l<s-1;l++)this.isClosedPath(l)&&Je("cannot interpolate across closed paths");const o=this.calculateSubLength2D(i,n,s,r);o!==0&&this.interpolateAttributesSemanticsImpl(e,i,n,s,r,o)}interpolateAttributesPath(e,i,n){const s=this.m_description.getAttributeCount();if(s===1||i===n)return;const r=this.calculatePathSubLength2D(e,i,n);for(let o=1;o<s;o++){const l=this.m_description.getSemantics(o);this.interpolateAttributesSemanticsPathImpl(l,e,i,n,r)}}interpolateAttributesSemanticsPath(e,i,n,s){if(e===0)return;this.hasAttribute(e)||Je("does not have the given attribute"),tn.getInterpolation(e)===2&&Je("angular interpolation");const r=this.calculatePathSubLength2D(i,n,s);r!==0&&this.interpolateAttributesSemanticsPathImpl(e,i,n,s,r)}interpolateAttributesSemanticsImpl(e,i,n,s,r,o){const l=this.querySegmentIterator(),c=this.getPathStart(i)+n,f=this.getPathStart(s)+r,y=tn.getComponentCount(e),_=new Array(tn.maxComponentCount());this.queryAttributeAsDbl(e,c,_,y);const x=new Array(tn.maxComponentCount());this.queryAttributeAsDbl(e,f,x,y);const S=new Array(tn.maxComponentCount());fs(S,_,0,0,y);let P=0;const A=tn.getDefaultValue(e),D=tn.getInterpolation(e);l.resetToVertex(c,i);do if(l.hasNextSegment()){if(l.nextSegment(),l.getStartPointIndex()===f)return;this.setAttributeFromArray(e,l.getStartPointIndex(),S,y),l.previousSegment();do{const N=l.nextSegment();if(l.getEndPointIndex()===f)return;P+=N.calculateLength2D(),zz(D,_,x,S,0,y,P/o,A),l.isClosingSegment()||this.setAttributeFromArray(e,l.getEndPointIndex(),S,y)}while(l.hasNextSegment())}while(l.nextPath())}interpolateAttributesSemanticsPathImpl(e,i,n,s,r){const o=this.querySegmentIterator(),l=tn.getInterpolation(e),c=this.getPathStart(i)+n,f=this.getPathStart(i)+s;if(f===c)return;const y=tn.getComponentCount(e),_=new Array(tn.maxComponentCount());this.queryAttributeAsDbl(e,c,_,y);const x=new Array(tn.maxComponentCount());this.queryAttributeAsDbl(e,f,x,y);const S=new Br(0);o.resetToVertex(c,i),o.setCirculator(this.isClosedPath(i));const P=tn.getDefaultValue(e),A=new Array(tn.maxComponentCount());fs(A,_,0,0,y);const D=r===0;let N=.5;do{const F=o.nextSegment();if(this.setAttributeFromArray(e,o.getStartPointIndex(),A,y),!D){const G=F.calculateLength2D();S.pe(G),N=S.getResult()/r}zz(l,_,x,A,0,y,N,P)}while(o.getEndPointIndex()!==f)}querySegment(e,i,n){const s=this.getPathIndexFromPointIndex(e),r=e-this.getPathStart(s);r>=this.getSegmentCountPath(s)&&Je("get_segment"),this.getSegmentFromPath(s,r,i,n)}getSegment(e,i){const n=new this.m_segmentBufferCTor;return this.getSegmentBuffer(e,n,i),n.releaseSegment()}getSegmentType(e){const i=this.getPathIndexFromPointIndex(e),n=e-this.getPathStart(i);return n>=this.getSegmentCountPath(i)&&Je("get_segment"),this.getSegmentTypeFromPath(i,n)}getSegmentFromPath(e,i,n,s){const r=this.getPathStart(e)+i,o=this.getSegmentFlagsStreamRef();let l=1;switch(o&&(l=31&o.read(r)),l){case 1:n.createLine();break;case 2:n.createCubicBezier();break;case 4:n.createEllipticArc();break;case 8:n.createQuadraticRationalBezier();break;case 16:n.createQuadraticBezier();break;default:xt("")}const c=n.get();let f,y=null;if(s?(y=Uo(),c.assignVertexDescription(y)):c.assignVertexDescription(this.m_description),f=r===this.getPathEnd(e)-1&&this.isClosedPath(e)?this.getPathStart(e):r+1,aB(c,this.getXY(r)),lB(c,this.getXY(f)),!s)for(let _=1,x=this.m_description.getAttributeCount();_<x;_++){const S=this.m_description.getSemantics(_),P=tn.getComponentCount(S);for(let A=0;A<P;A++){const D=this.getAttributeAsDbl(S,r,A);c.setStartAttribute(S,A,D);const N=this.getAttributeAsDbl(S,f,A);c.setEndAttribute(S,A,N)}}if(ga.isNonLinearSegmentFlag(l)){const _=this.m_curveData.m_segmentParamIndex.read(r);c.readFromBufferStream(this.m_curveData.m_segmentParams,_)}}replaceLinearEllipticalArcsWithTrueLines(){if(!this.hasNonLinearSegments()||this.m_curveData.m_arcCount===0)return!1;let e=!1;for(let i=0,n=this.getPointCount();i<n;i++)if(this.m_curveData.m_segmentFlags.read(i)===4){const s=this.m_curveData.m_segmentParamIndex.read(i);Cet(this.m_curveData.m_segmentParams,s).isNAN()&&(this.m_curveData.m_segmentFlags.write(i,1),this.m_curveData.m_segmentParamIndex.write(i,-1),this.incCurveType(4,-1),this.modifyCurveCounter(-1),e=!0)}return e&&this.checkCompactSegmentParams(),e}queryPointAlongPath(e,i,n,s=!1){const r={iSegment:-1},o=s?r:{tSegment:0};if(n.setEmpty(),this.isEmpty()||((e<0||e>=this.getPathCount())&&Je("query_point_along_path"),i<0))return r;const l=this.getPathSize(e);if(l===0)return r;if(l===1)return this.getPointByVal(this.getPathStart(e),n),o.tSegment=0,r.iSegment=this.getPathStart(e),r;const c=this.querySegmentIteratorAtVertex(this.getPathStart(e)),f=new Br(0);for(;c.hasNextSegment();){const y=c.nextSegment(),_=y.calculateLength2D(),x=f.getResult();if(f.add(_),f.getResult()>=i){let S=i-x;S>_&&(S=_);const P=y.lengthToT(S);return y.queryCoord(P,n),o.tSegment=P,r.iSegment=c.getStartPointIndex(),r}}if(this.isClosedPath(e)){const y=this.getPathStart(e);return this.getPointByVal(y,n),o.tSegment=1,r.iSegment=this.getPathEnd(e)-1,r}{const y=this.getPathEnd(e)-1;return this.getPointByVal(y,n),this.getPathSize(e)>1?(o.tSegment=1,r.iSegment=this.getPathEnd(e)-2,r):(o.tSegment=0,r.iSegment=this.getPathStart(e),r)}}queryPointsAlongPath(e,i,n,s,r,o){{let P=0;for(let A=0;A<i;++A)s&&s[A].setEmpty(),r&&(r[A]=-1),o&&(o[A]=0),P>n[A]&&Je("query_points_along"),P=n[A]}const l=this.getPathSize(e);if(i===0||l===0)return 0;if(l===1){const P=this.getPathStart(e);return s&&this.getPointByVal(P,s[0]),o&&(o[0]=0),r&&(r[0]=P),1}const c=this.getPathStart(e),f=new Br(0),y=this.querySegmentIteratorAtVertex(c);let _=0,x=0,S=n[_];for(;y.hasNextSegment();){const P=y.nextSegment(),A=P.calculateLength2D(),D=f.getResult();for(f.add(A);f.getResult()>=S;){let N=S-D;N>A&&(N=A);const F=P.lengthToT(N);if(s&&P.queryCoord(F,s[x]),o&&(o[x]=F),r&&(r[x]=y.getStartPointIndex()),x++,_++,S=n[_],_===i)return x}}if(this.isClosedPath(e)){const P=this.getPathStart(e),A=0;s&&this.getPointByVal(P,s[x]),o&&(o[x]=A),r&&(r[x]=P),x++}else if(this.getPathSize(e)>1){const P=this.getPathEnd(e)-2,A=1;s&&this.getPointByVal(P+1,s[x]),o&&(o[x]=A),r&&(r[x]=P),x++}return x}queryPointsAlong(e,i,n,s,r){{let x=0;for(let S=0;S<e;++S)n&&n[S].setEmpty(),s&&(s[S]=-1),r&&(r[S]=0),x>i[S]&&Je("query_points_along"),x=i[S]}if(e===0)return 0;const o=new Br(0),l=this.querySegmentIterator();let c=-1,f=0,y=0,_=i[f];for(;l.nextPath();)for(;l.hasNextSegment();){c=l.getPathIndex();const x=l.nextSegment(),S=x.calculateLength2D(),P=o.getResult();for(o.add(S);o.getResult()>=_;){let A=_-P;A>S&&(A=S);const D=x.lengthToT(A);if(n&&x.queryCoord(D,n[y]),r&&(r[y]=D),s&&(s[y]=l.getStartPointIndex()),y++,f++,_=i[f],f===e)return y}}if(c<0)return 0;if(this.isClosedPath(c)){const x=this.getPathStart(c),S=0;n&&this.getPointByVal(x,n[y]),r&&(r[y]=S),s&&(s[y]=x),y++}else if(this.getPathSize(c)>1){const x=this.getPathEnd(c)-2,S=1;n&&this.getPointByVal(x+1,n[y]),r&&(r[y]=S),s&&(s[y]=x),y++}return y}querySegmentIterator(){return new QN({parent:this})}querySegmentIteratorAtVertex(e){return new QN({parent:this,pointIndex:e})}queryPathEnvelope(e,i){this.queryPathEnvelopeImpl(e,i,!0)}queryLoosePathEnvelope(e,i){this.queryPathEnvelopeImpl(e,i,!1)}queryPathEnvelopeImpl(e,i,n){if(i instanceof ur&&K(0,"not implemented for Envelope"),i instanceof ol&&K(0,"not implemented for Envelope3D"),(e>=this.getPathCount()||e<0)&&Je(""),this.isEmpty())return void i.setEmpty();const s=this.getAttributeStreamRef(0),r=xe.constructEmpty();r.setEmpty();for(let o=2*this.getPathStart(e),l=2*this.getPathEnd(e);o<l;){const c=l-o;K(!(1&c)),r.mergePointsInterleaved(s,o/2,c/2),o+=c}if(i.setCoords({env2D:r}),this.hasNonLinearSegmentsPath(e)){const o=this.querySegmentIterator();if(o.resetToPath(e),o.nextPath())for(;o.hasNextSegment();){const l=o.nextCurve();if(!l)break;{const c=xe.constructEmpty();n?l.queryEnvelope(c):l.queryLooseEnvelope(c),i.mergeEnvelope2D(c)}}else K(0)}}checkCompactSegmentParams(){if(!this.m_curveData||this.m_curveData.m_segmentParams===null||this.m_curveData.m_segmentParams.size()<=this.m_vertexAttributes.get(0).size())return!1;const e=10,i=mu(4)*this.m_curveData.m_arcCount+mu(2)*this.m_curveData.m_bezierCount+mu(8)*this.m_curveData.m_rbezier2Count+mu(16)*this.m_curveData.m_bezier2Count;return this.m_curveData.m_segmentParams.size()>Math.max(3*i>>1,e)?(this.forceCompactSegmentParams(),!0):(this.m_pointCount===0&&(this.m_curveData.m_curveParamWritePoint=0),!1)}forceCompactSegmentParams(){let e=0;for(let s=0,r=this.getPointCount();s<r;s++){const o=this.m_curveData.m_segmentFlags.read(s);ga.isNonLinearSegmentFlag(o)&&(e+=mu(o))}const i=Gy(e);let n=0;for(let s=0,r=this.getPointCount();s<r;s++){const o=this.m_curveData.m_segmentFlags.read(s);if(ga.isNonLinearSegmentFlag(o)){let l=this.m_curveData.m_segmentParamIndex.read(s);this.m_curveData.m_segmentParamIndex.write(s,n);const c=mu(o);for(let f=0;f<c;f++)i.write(n,this.m_curveData.m_segmentParams.read(l)),n++,l++}}this.m_curveData.m_segmentParams=i,this.m_curveData.m_curveParamWritePoint=n}setPathsFromJsonArrays(e,i,n){K(i===!1),K(e===!1),this.setEmpty();const s=n.length;if(s===0)return;let r=0;for(const x of n)r+=x.length;const o=this.getGeometryType()===me.enumPolygon,l=new fd(2*r),c=new On(s+1);let f=0,y=0;for(let x=0;x<s;++x){c.write(x,f);const S=n[x],P=S.length;for(let A=0;A<P;++A)l.write(y++,S[A][0]),l.write(y++,S[A][1]);o&&P>2&&l.read(2*f)===l.read(y-2)&&l.read(2*f+1)===l.read(y-1)&&(y-=2,r--,f--),f+=n[x].length}c.write(s,r);const _=new Tv(c.size());_.setRange(this.getGeometryType()===me.enumPolygon?1:0,0,s),_.write(s,0),this.setAttributeStreamRef(0,l),this.setPathFlagsStreamRef(_),this.setPathStreamRef(c),this.notifyModifiedFlags(65535)}setEmpty(){this.m_curveData&&(this.removeAllCurvesFromGlobalCounter(),this.m_curveData=null),this.m_bPathStarted=!1,this.m_paths=null,this.m_pathFlags=null,this.setEmptyImpl()}applyTransformation(e){this.applyTransformationToPath(e,-1)}applyTransformation3D(e){K(0)}getImpl(){return this}reserve(e){this.reserveImpl(e),e>0&&!this.m_paths&&(this.m_paths=Ya(0),this.m_pathFlags=jg(0),this.m_paths.reserve(2),this.m_pathFlags.reserve(2),this.m_paths.resize(1,0),this.m_pathFlags.resize(1,0))}reserveParts(e,i){this.reserveImpl(e),i>0&&(this.m_paths?(this.m_paths.reserve(i+1),this.m_pathFlags.reserve(i+1)):(this.m_paths=Ya(0),this.m_pathFlags=jg(0),this.m_paths.reserve(i+1),this.m_pathFlags.reserve(i+1),this.m_paths.resize(1,0),this.m_pathFlags.resize(1,0)))}clone(){const e=this.createInstance();return this.copyTo(e),e}createShallowClone(){return K(0),this}queryLimitedSegmentIterator(e){return new dit(this,e)}getPathStreamRef(){return this.throwIfEmpty(),this.m_paths}setPathStreamRef(e){this.m_paths=e}getSegmentFlagsStreamRef(){return this.throwIfEmpty(),this.m_curveData!=null?this.m_curveData.m_segmentFlags:null}getPathFlagsStreamRef(){return this.throwIfEmpty(),this.m_pathFlags}setPathFlagsStreamRef(e){this.m_pathFlags=e}getSegmentIndexStreamRef(){return this.throwIfEmpty(),this.m_curveData!==null?this.m_curveData.m_segmentParamIndex:null}getSegmentDataStreamRef(){return this.throwIfEmpty(),this.m_curveData!==null?this.m_curveData.m_segmentParams:null}setSegmentData(e,i,n,s){this.m_curveData||(this.m_curveData=new up),this.m_curveData.m_segmentFlags=n,this.m_curveData.m_segmentParams=i,this.m_curveData.m_segmentParamIndex=e,this.m_curveData.m_curveParamWritePoint=s}static getPathIndexFromPointIndexImpl(e,i,n,s){if(s>=0&&s<i){if(n>=e.read(s)){if(n<e.read(s+1))return s;s++}else s--;if(s>=0&&s<i&&n>=e.read(s)&&n<e.read(s+1))return s}if(i<5){for(let l=0;l<i;l++)if(n<e.read(l+1))return l;m1e("")}let r=0,o=i-1;for(;o>r;){const l=r+(o-r>>1);if(n<e.read(l))o=l-1;else{if(!(n>=e.read(l+1)))return l;r=l+1}}return r}getHighestPointIndex(e){K(e>=0&&e<this.getPathCount());const i=this.getAttributeStreamRef(0),n=this.getPathEnd(e),s=this.getPathStart(e);let r=-1;const o=new Y;o.y=Number.NEGATIVE_INFINITY,o.x=Number.NEGATIVE_INFINITY;for(let l=s+0;l<n;l++){const c=i.readPoint2D(2*l);o.compare(c)===-1&&(r=l,o.setCoordsPoint2D(c))}return r}applyTransformationToPath(e,i){if(i>=this.getPathCount()&&Je("apply_transformation"),this.isEmpty()||e.isIdentity())return;const n=this.m_vertexAttributes.get(0);if(!(i<0?this.hasNonLinearSegments():this.hasNonLinearSegmentsPath(i))){let l,c;return i<0?(l=0,c=this.m_pointCount):(l=this.getPathStart(i),c=this.getPathEnd(i)),n.applyTransformation(e,2*l,c-l),void this.notifyModifiedFlags(2001)}const s=new this.m_segmentBufferCTor,r=this.getPathCount();let o=i<0?0:i;do{const l=this.getPathStart(o),c=this.getPathEnd(o),f=this.isClosedPath(o),y=n.readPoint2D(2*l);if(!this.hasNonLinearSegmentsPath(o)){n.applyTransformation(e,2*l,c-l);continue}const _=Y.getNAN();for(let x=l;x<c;++x){if((31&this.m_curveData.m_segmentFlags.read(x))!==1){const P=f&&x+1===c;P&&n.writePoint2D(2*l,y),this.getSegmentBuffer(x,s,!0),s.get().applyTransformation(e);const A=this.m_curveData.m_segmentParamIndex.read(x);s.get().writeInBufferStream(this.m_curveData.m_segmentParams,A),n.writePoint2D(2*x,s.get().getStartXY()),P&&n.writePoint2D(2*l,s.get().getEndXY());continue}const S=2*x;n.queryPoint2D(S,_),e.transformInPlace(_),n.writePoint2D(S,_)}if(o===i)break}while(++o<r);this.notifyModifiedFlags(2001)}calculateSubLength2D(e,i,n,s){const r=this.getPathStart(e)+i,o=this.getPathStart(n)+s;(o<r||r<0||o>this.getPointCount()-1)&&xs("");const l=this.querySegmentIterator();let c=0;l.resetToVertex(r,e);do{for(;l.hasNextSegment();){const f=l.nextSegment();if(l.getStartPointIndex()===o)break;c+=f.calculateLength2D()}if(l.getStartPointIndex()===o)break}while(l.nextPath());return c}calculatePathSubLength2D(e,i,n){const s=this.getPathStart(e)+i,r=this.getPathStart(e)+n;(s<0||r>this.getPointCount()-1)&&xs("");const o=this.querySegmentIterator();if(s>r&&(this.isClosedPath(e)||Je("cannot iterate across an open path"),o.setCirculator(!0)),s===r)return 0;let l=0,c=0;o.resetToVertex(s,e);do c+=l,l=o.nextSegment().calculateLength2D();while(o.getStartPointIndex()!==r);return c}calculateEnvelope2D(e){return K(0),new xe(0,0,0,0)}updateXYImpl(e){const i=super.updateXYImpl(e);if(this.hasNonLinearSegments()){const n=xe.constructEmpty(),s=this.querySegmentIterator();for(;s.nextPath();)for(;s.hasNextSegment();){const r=s.nextCurve();if(!r)break;e?r.queryEnvelope(n):r.queryLooseEnvelope(n),i.mergeEnvelope2D(n)}}return i}notifyModifiedAllImpl(){this.m_paths!==null&&this.m_paths.size()?this.m_pointCount=this.m_paths.read(this.m_paths.size()-1):this.m_pointCount=0}setDirtyOGCFlags(e){this.setDirtyFlagProtected(16,e)}hasDirtyOGCStartFlags(){return this.hasDirtyFlag(16)}setDirtyRingAreas2D(e){this.setDirtyFlagProtected(1024,e)}hasDirtyRingAreas2D(){return this.hasDirtyFlag(1024)}static isNonLinearSegmentFlag(e){return!(1&e)}addAndExplicitlyOpenAllPaths(e,i){this===e&&Je("Multi_path_impl::add");let n=this.getPathCount();for(let s=0,r=e.getPathCount();s<r;s++)this.addPath(e,s,!i),this.openPathAndDuplicateStartVertex(n),n++}getSegmentFlags(e){return this.m_curveData!==null&&this.m_curveData.m_segmentFlags!==null?this.m_curveData.m_segmentFlags.read(e):1}getSegmentBuffer(e,i,n){const s=this.getPathIndexFromPointIndex(e),r=e-this.getPathStart(s);r>=this.getSegmentCountPath(s)&&Je("getSegmentBuffer"),this.getSegmentFromPath(s,r,i,n)}getSegmentTypeFromPath(e,i){const n=this.getPathStart(e)+i,s=this.getSegmentFlagsStreamRef();let r=1;switch(s&&(r=31&s.read(n)),r){case 1:return me.enumLine;case 2:return me.enumBezier;case 4:return me.enumEllipticArc;case 8:return me.enumRationalBezier2;case 16:return me.enumBezier2;default:xt("")}}ensureXYMonotoneSegments(){if(!this.m_curveData)return!1;let e=!1;for(let i=0,n=this.getPathCount();i<n;i++){const s=this.getPathStart(i),r=this.getPathEnd(i),o=r-s;for(let l=s;l<r;l++){const c=31&this.m_curveData.m_segmentFlags.read(l);if(c===1)continue;c!==2&&Bn("ensure_xy_monotone_segments");const f=(l-s+1)%o+s,y=this.m_curveData.m_segmentParamIndex.read(l),_=Ge(Y,4);_[0]=this.getXY(l),_[3]=this.getXY(f),_[1].x=this.m_curveData.m_segmentParams.read(y),_[1].y=this.m_curveData.m_segmentParams.read(y+1),_[2].x=this.m_curveData.m_segmentParams.read(y+2),_[2].y=this.m_curveData.m_segmentParams.read(y+3),O7(_)&&(e=!0,this.m_curveData.m_segmentParams.write(y,_[1].x),this.m_curveData.m_segmentParams.write(y+1,_[1].y),this.m_curveData.m_segmentParams.write(y+2,_[2].x),this.m_curveData.m_segmentParams.write(y+3,_[2].y))}}return e&&this.notifyModifiedFlags(2001),e}buildRasterizedGeometryAccelerator(e,i){return!1}buildQuadTreeAccelerator(e){if(this.m_accelerators||(this.m_accelerators=new oM),this.m_accelerators.getQuadTree()!==null)return!0;this.ensureUniqueAccelerators(),this.m_accelerators.setQuadTree(null);const i=tx(this);return this.m_accelerators.setQuadTree(i),!0}buildQuadTreeForPathsAccelerator(e){if(this.m_accelerators||(this.m_accelerators=new oM),this.m_accelerators.getQuadTreeForPaths()!==null)return!0;this.ensureUniqueAccelerators(),this.m_accelerators.setQuadTreeForPaths(null);const i=net(this);return this.m_accelerators.setQuadTreeForPaths(i),!0}updateCurveCounter(e){this.modifyCurveCounter(e-this.getCurveCount())}removeAllCurvesFromGlobalCounter(){this.m_curveData&&(ga.st_totalCurveCount-=this.m_curveData.m_curveCount,this.m_curveData.m_curveCount=0,this.m_curveData.m_bezierCount=0,this.m_curveData.m_arcCount=0,this.m_curveData.m_bezier2Count=0,this.m_curveData.m_rbezier2Count=0,this.m_curveData.m_curveParamWritePoint=0)}modifyCurveCounter(e){e&&(this.m_curveData||(this.m_curveData=new up),ga.st_totalCurveCount+=e,this.m_curveData.m_curveCount+=e)}getCurveCount(){return this.m_curveData?this.m_curveData.m_curveCount:0}incCurveType(e,i){this.m_curveData||(this.m_curveData=new up),2&e?this.m_curveData.m_bezierCount+=i:4&e?this.m_curveData.m_arcCount+=i:8&e?this.m_curveData.m_rbezier2Count+=i:16&e&&(this.m_curveData.m_bezier2Count+=i)}getCurveWritePoint(){return K(0),0}initSegmentData(e){this.m_curveData===null&&(this.m_curveData=new up);const i=this.m_reservedPointCount>0?this.m_reservedPointCount:this.m_pointCount;this.m_curveData.m_segmentParamIndex===null&&(this.m_curveData.m_segmentFlags=jg(i,1),this.m_curveData.m_segmentParamIndex=Ya(i,-1));const n=this.m_curveData.m_curveParamWritePoint+e;this.m_curveData.m_segmentParams===null?this.m_curveData.m_segmentParams=Gy(n):n!==this.m_curveData.m_segmentParams.size()&&this.m_curveData.m_segmentParams.resize(n,0),this.m_curveData.m_segmentFlags.size()<i&&(this.m_curveData.m_segmentFlags.resize(i,1),this.m_curveData.m_segmentParamIndex.resize(i,-1))}updateCurveWritePoint(e){this.m_curveData===null&&(this.m_curveData=new up),this.m_curveData.m_curveParamWritePoint=e}updateOGCFlagsHelper(){const e=this.getPathCount();if(e===0)return;const i=this.m_pathFlags;let n=0;for(let s=0;s<e;s++){const r=this.m_cachedRingAreas2D.read(s);n===0&&(n=ws(r)),r*n>0||n===0?i.setBits(s,8):i.clearBits(s,8)}}updateOGCFlagsProtected(){this.hasDirtyFlag(16)&&(this.updateRingAreas2DProtected(),this.updateOGCFlagsHelper(),this.setDirtyFlagProtected(16,!1))}replaceSegment(e,i,n){(e<0||e>=this.getPointCount())&&Je("Multi_path_impl.replace_segment"),K(i.isCurve());const s=this.getPathIndexFromPointIndex(e),r=this.getPathStart(s),o=(e-r+1)%this.getPathSize(s)+r;{const N=this.getXY(e),F=this.getXY(o),G=!N.isEqualPoint2D(i.getStartXY())||!F.isEqualPoint2D(i.getEndXY());K(!G)}const l=i.getDescription();this.mergeVertexDescription(l);const c=new Array(32),f=new Ut({vd:l,attribBuffer:c,initDefaultValues:!1}),y=this.m_curveData===null?1:31&this.m_curveData.m_segmentFlags.read(e),_=mu(y),x=eO(i);let S,P=!1;_>=x?(K(this.m_curveData!==null),P=!0,S=this.m_curveData.m_segmentParamIndex.read(e)):(this.initSegmentData(x),P=!1,S=this.m_curveData.m_curveParamWritePoint);const A=i.getGeometryType(),D=up.toSegType(A);n||(i.queryStart(f),this.setPointByVal(e,f),i.queryEnd(f),this.setPointByVal(o,f)),this.m_curveData.m_segmentParamIndex.write(e,D!==1?S:-1),this.m_curveData.m_segmentFlags.write(e,D),D!==1&&i.writeInBufferStream(this.m_curveData.m_segmentParams,S),P||(this.m_curveData.m_curveParamWritePoint+=x),y!==D&&(this.incCurveType(y,-1),this.incCurveType(D,1),this.modifyCurveCounter(y===1?1:-1))}verifyPathIndex(e){K(0)}setAttributeImpl(e,i,n){if(this.addAttribute(e),!this.isEmpty())if(this.hasNonLinearSegments()&&e===0){(i<0||i>1)&&Je("");const s=new _i,r=i===0?n:0,o=i===0?0:1;s.setShiftCoords(r,o),i===0?s.xx=0:s.yy=0,this.applyTransformation(s)}else super.setAttributeImpl(e,i,n)}}ga.st_totalCurveCount=0;class dit{constructor(e,i){this.m_segIter=null,this.m_quadTree=null,this.m_qtIter=null,this.m_extentOfInterest=new xe(i),this.m_bfirst=!0,this.m_prevIndex=-100,this.m_parent=e}nextSegment(){return this.m_bfirst&&this.prepare_(),this.m_quadTree?this.nextSegmentQt():this.nextSegmentNoQt()}getPathIndex(){return this.m_segIter.getPathIndex()}getStartPointIndex(){return this.m_segIter.getStartPointIndex()}getEndPointIndex(){return this.m_segIter.getEndPointIndex()}isClosingSegment(){return this.m_segIter.isClosingSegment()}isPathClosed(){return this.m_segIter.isPathClosed()}prepare_(){const e=this.m_parent.getAccelerators();e&&(this.m_quadTree=e.getQuadTree(),this.m_quadTree&&(this.m_qtIter=this.m_quadTree.getSortedIterator(this.m_extentOfInterest,0))),this.m_segIter=this.m_parent.querySegmentIterator()}nextSegmentQt(){this.m_bfirst=!1;const e=this.m_qtIter.next();if(e===-1)return null;const i=this.m_quadTree.getElement(e);return(i!==this.m_prevIndex+1||this.m_segIter.isLastSegmentInPath())&&(this.m_segIter.resetToVertex(i,this.m_segIter.getPathIndex()),this.m_prevIndex=i),this.m_segIter.nextSegment()}nextSegmentNoQt(){for(;;){if(!this.m_bfirst&&this.m_segIter.hasNextSegment()){const e=this.m_segIter.nextSegment(),i=xe.constructEmpty();if(e.queryLooseEnvelope(i),!i.isIntersecting(this.m_extentOfInterest))continue;return e}if(this.m_bfirst=!1,!this.m_segIter.nextPath())return null}}}class vi extends ga{constructor(e){e?e.vd?(super({vd:e.vd,bPolygon:!1}),this.m_segmentBufferCTor=Qt):e.copy?(super({vd:e.copy.getDescription(),bPolygon:!1}),this.m_segmentBufferCTor=Qt,e.copy.copyTo(this)):e.move?(super({move:e.move}),this.m_segmentBufferCTor=Qt):e.start?(super({vd:e.start.getDescription(),bPolygon:!1}),this.m_segmentBufferCTor=Qt,this.startPathPoint(e.start),this.lineToPoint(e.end)):e.path?(super({bPolygon:!1}),this.m_segmentBufferCTor=Qt,this.addPathPoint2D(e.path,e.pointCount,e.bForward)):K(0):(super({bPolygon:!1}),this.m_segmentBufferCTor=Qt)}getBoundary(){return sd(this)}assignCopy(e){return this!==e&&e.copyTo(this),this}assignMove(e){return e.copyTo(this),this}getGeometryType(){return vi.type}getDimension(){return 1}createInstance(){return new vi({vd:this.getDescription()})}equals(e,i){return this.equalsBase(e,i)}}vi.type=me.enumPolyline;var p0=me;function Kb(t,e){if(t.isEmpty())return!1;const i=t.getGeometryType();if(i===p0.enumPolygon)return t.calculateArea2D()!==0;if(i===p0.enumPolyline)return vye(t.getImpl(),e,!0).bNotEmpty;if(i===p0.enumEnvelope)return!0;if(Ds(i))return!!t.isClosed();if(V0(i))return!1;if(i===p0.enumGeometryCollection){const n=t;for(let s=0,r=n.getGeometryCount();s<r;s++)if(Kb(n.getGeometry(s),e))return!0;return!1}Bn("")}function sd(t,e){const i=t.getGeometryType();if(i===p0.enumPolygon){const n=new vi({vd:t.getDescription()});return t.isEmpty()||t.copyToUnchecked(n),n}if(i===p0.enumPolyline)return vye(t.getImpl(),e,!1).boundary;if(i===p0.enumEnvelope){const n=new vi({vd:t.getDescription()});return t.isEmpty()||n.addEnvelope(t,!1),n}if(Ds(i)){const n=new Qs({vd:t.getDescription()});if(!t.isEmpty()&&!t.isClosed()){const s=new Ut;n.reserve(2),t.queryStart(s),n.add(s),t.queryEnd(s),n.add(s)}return n}if(i===p0.enumGeometryCollection){const n=t;let s=null;for(let r=0,o=n.getGeometryCount();r<o;r++){const l=sd(n.getGeometry(r),e);if(l!==null){s===null&&(s=t.createInstance());const c=l;s.addGeometry(c)}}return s}if(V0(i))return new Ut({vd:t.getDescription()});Bn("")}function vye(t,e,i){const s=t;let r=null;if(i||(r=new Qs({vd:s.getDescription()})),!s.isEmpty()){const o=new On(0);for(let l=0,c=s.getPathCount();l<c;l++)if(s.getPathSize(l)>0&&!s.isClosedPathInXYPlane(l)){const f=s.getPathStart(l);o.add(f);const y=s.getPathEnd(l)-1;o.add(y)}if(o.size()>0){const l=new pd,c=s.getAttributeStreamRef(0),f={userSort(P,A,D){const N=Y.getNAN(),F=Y.getNAN();D.sort(P,A,(G,V)=>(c.queryPoint2D(2*G,N),c.queryPoint2D(2*V,F),N.compare(F)))},getValue:P=>c.read(2*P+1)};l.sort(o,0,o.size(),f);let y=c.readPoint2D(2*o.read(0)),_=0,x=1;const S=new Ut;for(let P=1,A=o.size();P<A;P++){const D=c.readPoint2D(2*o.read(P));if(D.isEqualPoint2D(y))o.read(_)>o.read(P)?(o.write(_,_a()),_=P):o.write(P,_a()),x++;else{if(1&x){if(i)return{bNotEmpty:!0,boundary:new Qs({})}}else o.write(_,_a());y=D,_=P,x=1}}if(1&x){if(i)return{bNotEmpty:!0,boundary:new Qs({})}}else o.write(_,_a());if(!i){o.sort(0,o.size());for(let P=0,A=o.size();P<A&&o.read(P)!==_a();P++)s.getPointByVal(o.read(P),S),r.add(S)}}}return i?{bNotEmpty:!1,boundary:new Qs({})}:{bNotEmpty:!1,boundary:r}}const fit=tB/180,pit=180/tB;function mit(t){let e=t;return e>=-360&&e<720?(e<0?e+=360:e>=360&&(e-=360),e):(e=G0(e,360),e<0&&(e+=360),e)}function _ye(t){let e=t;return e=mit(e),e>180&&(e-=360),e}function bye(t){return t*fit}function c9(t){return t*pit}function xye(t){const e=Bo();let i=t;return i>=-e&&i<2*e?(i<0&&(i+=e),i>=e&&(i-=e),i):(i=G0(i,e),i<0&&(i+=e),i)}function Jie(t){const e=Di();let i=t;return i>-e&&i<=e||(i=xye(i),i>e&&(i-=Bo())),i}function Qie(t,e){return _ye(e-t)}var S3=br;class Xc extends D5{constructor(e){if(e===void 0||E7(e,"vd"))return super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_semiMajorAxis=0,this.m_minorMajorRatio=1,this.m_rotation=0,this.m_cosr=1,this.m_sinr=0,this.m_center=new Y(0,0),this.m_sweepAngle=0,this.m_startAngle=0,this.m_interior=new Y(0,0),void(this.m_bits=0);if(e.copy)return super(e),void(this!==e.copy&&(this.m_center=new Y(0,0),this.m_interior=new Y(0,0),e.copy.copyToImpl(this)));if(e.move)super(e),this.m_semiMajorAxis=e.move.m_semiMajorAxis,this.m_minorMajorRatio=e.move.m_minorMajorRatio,this.m_rotation=e.move.m_rotation,this.m_cosr=e.move.m_cosr,this.m_sinr=e.move.m_sinr,this.m_center=e.move.m_center.clone(),this.m_sweepAngle=e.move.m_sweepAngle,this.m_startAngle=e.move.m_startAngle,this.m_interior=e.move.m_interior.clone(),this.m_bits=e.move.m_bits,this.m_cachedValues=e.move.m_cachedValues,e.move.m_cachedValues=null;else{if(e.fromPoint)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_center=new Y(0,0),this.m_interior=new Y(0,0),void this.constructCircularArcThreePoint(e.fromPoint,e.toPoint,e.interiorPoint);if(e.center)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_center=new Y(0,0),this.m_interior=new Y(0,0),void this.constructCircleRadius(e.radius,e.center,e.bIsCounterClockwise);if(e.semiMajorAxis)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),void this.constructEllipticArcEndPoints(e.fromPoint,e.toPoint,e.semiMajorAxis,e.minorMajorRatio,e.axisXRotationRad,e.bBigArc,e.bIsCounterClockwise)}}getBoundary(){return sd(this)}assignMove(e){return K(0),this}assignCopy(e){return this!==e&&e.copyTo(this),this}constructCircleRadius(e,i,n=!1){return this.constructEllipse(e,1,i,0,n),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructCircleCenterAndPoint(e,i,n=!1){const s=Y.distance(e,i);return this.constructEllipticArcEndPointsCenter(i,i,s,1,0,!0,n,e),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructTwoPointCircle(e,i,n=!1){const s=Y.lerp(e,i,.5);return this.constructCircleCenterAndPoint(s,e,n),this}constructLineEllipticArc(e,i){return Zu(this,e,i,1),this}constructLineCircularArc(e,i){return Zu(this,e,i,0),this}constructEllipse(e,i,n,s,r=!1){this.m_semiMajorAxis=Math.abs(e),this.m_minorMajorRatio=Math.abs(i),this.m_minorMajorRatio>1&&(this.m_semiMajorAxis*=this.m_minorMajorRatio,this.m_minorMajorRatio=1/this.m_minorMajorRatio);const o=new Y(0,this.m_minorMajorRatio*this.m_semiMajorAxis),l=Math.cos(s),c=Math.sin(s);return o.rotateDirect(l,c),o.addThis(n),this.constructEllipticArcEndPointsCenter(o,o,this.m_semiMajorAxis,this.m_minorMajorRatio,s,!0,r,n),this}inflate(e){if(this.isDegenerateToLine())return;let i=this.getSemiMinorAxis()+e;if(i=i<=0?0:(this.getSemiMajorAxis()+e)/this.getSemiMajorAxis(),this.isCircular()){const n=new _i;n.setShiftCoords(-this.m_center.x,-this.m_center.y),n.scale(i,i),n.shiftCoords(this.m_center.x,this.m_center.y),this.applyTransformation(n)}else{const n=new _i;this.canonicToWorldTransformation(n);const s=n.clone();s.invertPreciseThis(),s.scale(i,i),s.multiply(n),this.applyTransformation(s)}}constructEnclosingCircle(e,i,n=!1){return Fat(this,e,i,n),this}constructThreePointCircle(e,i,n,s=!1){if(e.equals(i)||i.equals(n)||e.equals(n)){const r=e.clone(),o=i.clone(),l=n.clone();return r.equals(o)&&o.assign(l),this.constructTwoPointCircle(r,o,s)}{const r=Y.calculateCircleCenterFromThreePoints(e,i,n);if(!r.isFinite()||!Number.isFinite(Y.distance(e,r))){const o=Y.distance(e,i),l=Y.distance(e,n);this.constructLineCircularArc(e,o>=l?i:n)}return this.constructCircleCenterAndPoint(r,e,s)}}constructCircularArcThreePoint(e,i,n){const s=new Be(e.x),r=new Be(i.x),o=new Be(n.x),l=new Be(e.y),c=new Be(i.y),f=new Be(n.y),y=new Be(.5),_=r.subE(s),x=c.subE(l),S=o.subE(s),P=f.subE(l),A=_.mulE(P).subThisE(x.mulE(S));if(A.scaleError(10),A.isZero()){if(!_.isZero()||!x.isZero())return Zu(this,e,i,0),this;{const Re=e.clone().addThis(i).mulThis(.5).addThis(n).mulThis(.5),$e=n.sub(Re).length();this.constructEllipticArcEndPointsCenter(e,i,$e,1,0,!0,!1,Re),this.m_interior.assign(n)}return this.setProjectionBehavior(0),this}const D=_.sqr().addThisE(x.sqr()).mulThisE(y),N=S.sqr().addThisE(P.sqr()).mulThisE(y),F=D.mulE(P).subThisE(N.mulE(x)),G=_.mulE(N).subThisE(S.mulE(D));F.divThisE(A),G.divThisE(A);const V=F.sqr().addThisE(G.sqr());V.sqrtThis();const B=F.addE(s),W=G.addE(l);let J=e.x-B.value(),re=e.y-W.value();const ne=Math.atan2(re,J);J=i.x-B.value(),re=i.y-W.value();const oe=Math.atan2(re,J);J=n.x-B.value(),re=n.y-W.value();const pe=Math.atan2(re,J);let ce=pe-2*Di();for(;ce<ne;)ce+=2*Di();let ue=oe-2*Di();for(;ue<ce;)ue+=2*Di();let se=pe+2*Di();for(;se>ne;)se-=2*Di();let de,Se=oe+2*Di();for(;Se>se;)Se-=2*Di();de=ue-ne<ne-Se?ue-ne:Se-ne;const Pe=new Y(B.value(),W.value());return this.constructEllipticArcEndPointsCenter(e,i,V.value(),1,0,Math.abs(de)>Di(),de>0,Pe),this.m_interior.assign(n),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructCircularArc(e,i,n,s){return this.constructEllipticArcGeneral(e,1,i,n,s,0),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructEllipticArcEndPoints(e,i,n,s,r,o,l){return hse(this,e,i,n,s,r,o,l)}constructEllipticArcEndPointsCenter(e,i,n,s,r,o,l,c){return hse(this,e,i,n,s,r,o,l,c)}constructEllipticArcGeneral(e,i,n,s,r,o){this.m_semiMajorAxis=Math.abs(e),this.m_minorMajorRatio=Math.abs(i),this.m_minorMajorRatio>1&&(this.m_semiMajorAxis*=this.m_minorMajorRatio,this.m_minorMajorRatio=1/this.m_minorMajorRatio);const l=Jie(o),c=Math.cos(l),f=Math.sin(l),y=new Y(this.m_semiMajorAxis,this.m_minorMajorRatio*this.m_semiMajorAxis),_=Y.getNAN(),x=Jie(s);_.x=y.x*Math.cos(x),_.y=y.y*Math.sin(x),_.rotateDirect(c,f),_.addThis(n);const S=kQe(r,Bo());let P=S;Math.abs(P)===Bo()&&(P=0);const A=Y.getNAN();return A.x=y.x*Math.cos(x+P),A.y=y.y*Math.sin(x+P),A.rotateDirect(c,f),A.addThis(n),this.constructEllipticArcEndPointsCenter(_,A,this.m_semiMajorAxis,this.m_minorMajorRatio,l,Math.abs(S)>Di(),S>0,n)}constructEllipticArcAsNURB(e,i,n,s){return(s>=1||s<0)&&Je("construct_elliptic_arc_as_NURB: weight"),i.isFinite()||Je("construct_elliptic_arc_as_NURB: control_point"),G7([e,i,n],s*s,null,!1,this),this}constructCanonic(e){return K(0),this}isCircular(){return this.m_minorMajorRatio===1&&this.m_rotation===0&&!this.isDegenerateToLine()}isDegenerateToLineHelper(e){return!!oB(this,[e])&&rs(this)}isDegenerateToLine(){return rs(this)}getCenter(){return this.m_center.clone()}setCenter(e){K(0)}getAxisXRotation(){return this.m_rotation}getSemiAxes(){return Y.construct(this.m_semiMajorAxis,this.m_semiMajorAxis*this.m_minorMajorRatio)}getSemiMajorAxis(){return this.m_semiMajorAxis}getSemiMinorAxis(){return this.m_semiMajorAxis*this.m_minorMajorRatio}getMinorMajorRatio(){return this.m_minorMajorRatio}isClockwise(){return!fx(this)}isMajor(){return DB(this)}getSweepAngle(){return this.m_sweepAngle}getStartAngle(){return this.m_startAngle}getEndAngle(){return this.m_startAngle+this.m_sweepAngle}getGeometryType(){return me.enumEllipticArc}queryEnvelope(e){if(e instanceof ur){e.setEmpty(),e.assignVertexDescription(this.m_description);const i=xe.constructEmpty();this.queryEnvelope(i),e.setEnvelope(i);for(let n=1,s=this.m_description.getAttributeCount();n<s;n++){const r=this.m_description.getSemantics(n);for(let o=0,l=S3.getComponentCount(r);n<l;n++){const c=this.queryInterval(r,o);e.setIntervalEnvelope(r,o,c)}}}else e instanceof xe?mse(this,Ze.unit(),e):K(0)}applyTransformation(e){kB(this,e,!1)}createInstance(){return new Xc}calculateLength2D(){return Dat(this,0,1)}queryCoord2D(e,i){if(rs(this))uB(e,this.getStartXY(),this.getEndXY(),i);else if(e===0)i.assign(Y.construct(this.m_XStart,this.m_YStart));else if(e===1)i.assign(Y.construct(this.m_XEnd,this.m_YEnd));else{const n=sf(this,e),s=new Y(this.m_semiMajorAxis*Math.cos(n),this.getSemiMinorAxis()*Math.sin(n));s.rotateDirect(this.m_cosr,this.m_sinr),s.addThis(this.m_center),i.assign(s)}}queryCoord2DE(e,i){Tat(this,e,i)}getCoordX(e){const i=new Y;return this.queryCoord2D(e,i),i.x}getCoordY(e){const i=new Y;return this.queryCoord2D(e,i),i.y}cut(e,i,n){const s=new Qt;return this.queryCut(e,i,s,n),s.releaseSegment()}queryCut(e,i,n,s){const r=n.createEllipticArc();let o=e===0&&i===1;if(o&&!s)return void this.copyTo(r);const l=Y.getNAN();this.queryCoord2D(e,l);const c=Y.getNAN();if(this.queryCoord2D(i,c),!o){if(l.equals(c))i-e>.5&&this.isMajor()&&this.isClosed()?(o=!0,e=0,i=1):i===1?e=i:i=e;else if(e>0&&l.isEqual(this.m_XStart,this.m_YStart)&&(e=0),i<1&&c.isEqual(this.m_XEnd,this.m_YEnd)&&(i=1),o=e===0&&i===1,o&&!s)return void this.copyTo(r)}if(r.m_center.assign(this.m_center),r.m_semiMajorAxis=this.m_semiMajorAxis,r.m_minorMajorRatio=this.m_minorMajorRatio,r.m_interior.assign(this.m_interior),r.m_rotation=this.m_rotation,r.m_cosr=this.m_cosr,r.m_sinr=this.m_sinr,r.m_sweepAngle=this.m_sweepAngle,r.m_startAngle=this.m_startAngle,r.m_bits=this.m_bits,oie(r,l.x,l.y),aie(r,c.x,c.y),o)return void wO(r,xO(this));r.m_startAngle=sf(this,e),r.m_sweepAngle=sf(this,i)-r.m_startAngle,r.m_startAngle=iv(r.m_startAngle),px(r,Math.abs(r.m_sweepAngle)>Di()),r.assignVertexDescription(this.m_description),pE(r),bq(r);const f=this.m_description.getAttributeCount();if(f>1){for(let y=1;y<f;y++){const _=this.m_description.getSemantics(y),x=S3.getComponentCount(_);for(let S=0;S<x;S++){const P=this.getAttributeAsDbl(e,_,S);r.setStartAttribute(_,S,P)}}for(let y=1;y<f;y++){const _=this.m_description.getSemantics(y),x=S3.getComponentCount(_);for(let S=0;S<x;S++){const P=this.getAttributeAsDbl(i,_,S);r.setEndAttribute(_,S,P)}}}r.afterCompletedModification()}queryDerivative(e,i){Vat()}cutArcIgnoreAttributes(e,i,n){let s=e===0&&i===1;const r=new Y;this.queryCoord2D(e,r);const o=new Y;this.queryCoord2D(i,o),s||(r.equals(o)?i-e>.5&&this.isMajor()&&this.isClosed()?(s=!0,e=0,i=1):i===1?e=i:i=e:(e>0&&r.isEqual(this.m_XStart,this.m_YStart)&&(e=0),i<1&&o.isEqual(this.m_XEnd,this.m_YEnd)&&(i=1),s=e===0&&i===1)),n.m_center.assign(this.m_center),n.m_semiMajorAxis=this.m_semiMajorAxis,n.m_minorMajorRatio=this.m_minorMajorRatio,n.m_interior.assign(this.m_interior),n.m_rotation=this.m_rotation,n.m_cosr=this.m_cosr,n.m_sinr=this.m_sinr,n.m_sweepAngle=this.m_sweepAngle,n.m_startAngle=this.m_startAngle,n.m_bits=this.m_bits,oie(n,r.x,r.y),aie(n,o.x,o.y),s?wO(n,xO(this)):(n.m_startAngle=sf(this,e),n.m_sweepAngle=sf(this,i)-n.m_startAngle,n.m_startAngle=iv(n.m_startAngle),px(n,Math.abs(n.m_sweepAngle)>Math.PI),pE(n),n.afterCompletedModification())}changeEndPoints2D(e,i){use(this,e,i,!1)}getAttributeAsDbl(e,i,n){if(i===0)return n===0?this.getCoordX(e):this.getCoordY(e);if(e===0)return this.getStartAttributeAsDbl(i,n);if(e===1)return this.getEndAttributeAsDbl(i,n);const s=this.calculateLength2D(),r=s>0?this.tToLength(e)/s:0,o=S3.getInterpolation(i),l=this.getStartAttributeAsDbl(i,n),c=this.getEndAttributeAsDbl(i,n);return w7(o,l,c,r,S3.getDefaultValue(i))}getClosestCoordinate(e,i){return gse(this,e,Ze.unit(),i)}getClosestCoordinateOnInterval(e,i,n=-1){return gse(this,e,i,!1)}getYMonotonicParts(e,i=!1){e.length<2&&Je("");const n=this.getSemiAxes(),s=Math.atan2(n.y*this.m_cosr,n.x*this.m_sinr),r=s+Di(),o=new Array(3);let l=0;if(o[0]=Is(this,s),o[0]>0&&o[0]<1&&l++,o[1]=Is(this,r),o[1]>0&&o[1]<1&&(o[l]=o[1],l++),l===0)return 0;o[l]=1,l++,K(e.length>=l);let c=0;for(let f=0;f<l;f++){const y=o[f];this.queryCut(c,y,e[f],i),c=y}return l}getMonotonicParts(e,i){if(e.length<4&&Je(""),this.isDegenerateToLine())return e[0].createEllipticArc().assignCopy(this),i&&e[0].get().dropAllAttributes(),1;const n=this.getSemiAxes(),s=new Array(4);s[0]=Math.atan2(n.y*this.m_cosr,n.x*this.m_sinr),s[1]=s[0]+Di(),s[2]=Math.atan2(-n.y*this.m_sinr,n.x*this.m_cosr),s[3]=s[2]+Di();const r=new Array(5);let o=0;for(let c=0;c<4;c++)r[o]=Is(this,s[c]),r[o]>0&&r[o]<1&&o++;if(o===0)return 0;qz(r,o),r[o-1]<1&&(r[o]=1,o++),K(e.length>=o);let l=0;for(let c=0;c<o;c++){const f=r[c];this.queryCut(l,f,e[c],i),l=f}return o}intersectionWithAxis2D(e,i,n,s){if(rs(this))return new ni({start:this.getStartXY(),end:this.getEndXY()}).intersectionWithAxis2D(e,i,n,s);let r,o;const l=new Be(i),c=this.getSemiAxes();if(e){if(i>this.m_center.y+c.x||i<this.m_center.y-c.x)return 0;r=new Be(c.x).mulThis(this.m_sinr),o=new Be(c.y).mulThis(this.m_cosr),l.subThis(this.m_center.y)}else{if(i>this.m_center.x+c.x||i<this.m_center.x-c.x)return 0;r=new Be(c.x).mulThis(this.m_cosr),o=new Be(c.y).mulThis(-this.m_sinr),l.subThis(this.m_center.x)}const f=r.sqr(),y=o.sqr(),_=f.addE(y),x=o.mulE(l).mulThis(-2),S=l.sqr().subThisE(f),P=x.sqr().subThisE(_.mulE(S).mulThis(4)),A=r.mulE(l).mulThis(-2),D=l.sqr().subThisE(y),N=A.sqr().subThisE(_.mulE(D).mulThis(4));let F=P.eps()*Math.abs(N.value())<=N.eps()*Math.abs(P.value());F?r.isZero()&&(F=!1):o.isZero()&&(F=!0),F||(x.setE(A),S.setE(D));const G=Ge(Be,2);let V=Tl(_,x,S,Ze.construct(-1,1),!1,G);if(V===0)return 0;const B=[0,0];let W=0;for(let J=0;J<V;J++){const re=new Be,ne=new Be;F?(re.setE(G[J]),ne.setE(l.subE(o.mulE(G[J])).divThisE(r))):(ne.setE(G[J]),re.setE(l.subE(r.mulE(G[J])).divThisE(o)));const oe=Is(this,Math.atan2(re.value(),ne.value()));oe>=0&&oe<=1&&(B[W]=oe,W++)}return V=W,V===0?0:(V===2&&B[0]>B[1]&&(B[1]=Et(B[0],B[0]=B[1])),s&&fs(s,B,0,0,V),n&&(n[0]=e?this.getCoordX(B[0]):this.getCoordY(B[0]),V>1&&(n[1]=e?this.getCoordX(B[1]):this.getCoordY(B[1]),!s&&n[0]>n[1]&&(n[1]=Et(n[0],n[0]=n[1])))),V)}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const n=[0,0];return this.intersectionWithAxis2D(!0,e,n,null)===-1?i:n[0]}isCurve(){return!0}isDegenerate(e){return A7(this,e)}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){e instanceof ol?K(0):this.queryLooseEnvelopeOnInterval(new Ze(0,1),e)}clone(e){const i=new Xc;return this.copyTo(i),i}queryInterval(e,i){if(e===0){if(rs(this))return i===0?Ze.construct(this.getStartX(),this.getEndX()):Ze.construct(this.getStartY(),this.getEndY());let n;const s=this.getSemiAxes();n=i===0?Math.atan2(-s.y*this.m_sinr,s.x*this.m_cosr):Math.atan2(s.y*this.m_cosr,s.x*this.m_sinr);const r=n+Math.PI,o=[0,0];o[0]=Is(this,n),o[1]=Is(this,r);const l=i===0?Ze.construct(this.getStartX(),this.getEndX()):Ze.construct(this.getStartY(),this.getEndY()),c=new Y;for(let f=0;f<2;f++){const y=o[f];y>0&&y<1&&(this.queryCoord2D(y,c),l.mergeNeCoordinate(i===0?c.x:c.y))}return l}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const n=new Ze(0,1);if(n.intersect(e),n.isEmpty())return void i.setEmpty();if(rs(this))return i.setCoords(this.getCoord2D(n.vmin)),void i.mergeNe(this.getCoord2D(n.vmax));const s=this.getCoord2D(n.vmin),r=this.getCoord2D(n.vmax);if(this.m_minorMajorRatio===1&&Math.abs(this.m_sweepAngle)*n.width()<=Cn){let o=Y.lerp(s,r,.5);const l=o.sub(this.m_center);return l.normalize(),o=o.add(l.mul(.5*Y.distance(s,r))),i.setCoords(s),i.mergeNe(r),void i.mergeNe(o)}mse(this,n,i)}tToLength(e){return rs(this)?e*Y.distance(this.getStartXY(),this.getEndXY()):this.m_minorMajorRatio===1?Math.abs(this.getSweepAngle()*e)*this.m_semiMajorAxis:xq(this,e)}parametricAngleToT(e){return Is(this,e)}tToParametricAngle(e){return sf(this,e)}lengthToT(e){if(rs(this)){const i=Y.distance(this.getStartXY(),this.getEndXY());return i===0?0:e/i}if(this.m_minorMajorRatio===1){const i=Math.abs(this.getSweepAngle())*this.m_semiMajorAxis;return i===0?0:e/i}return $at(this,e)}calculateWeightedAreaCentroid2D(e){if(rs(this)){const y=new Y;return y.setCoords(0,0),y}const i=fse(this),n=this.getStartXY().sub(this.m_center),s=this.getEndXY().sub(this.m_center),r=this.m_semiMajorAxis,o=this.getSemiMinorAxis(),l=this.m_startAngle+this.m_sweepAngle,c=new Y;c.x=r*o*(r*this.m_cosr*(-Math.sin(l)+Math.sin(this.m_startAngle))+o*(-Math.cos(l)+Math.cos(this.m_startAngle))*this.m_sinr)/3,c.y=r*o*(o*(Math.cos(l)-Math.cos(this.m_startAngle))*this.m_cosr+r*(-Math.sin(l)+Math.sin(this.m_startAngle))*this.m_sinr)/3;const f=s.add(n).mul(s.crossProduct(n)/6);return c.x-=f.x,c.y-=f.y,c.add(this.m_center.sub(e).mul(i))}calculateWeightedCentroid2D(){const e=new Y;if(this.isDegenerate(0))return e.setCoords(0,0),e;if(rs(this))return e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e;let i=this.m_startAngle,n=this.m_startAngle+this.m_sweepAngle;if(n<i){const c=i;i=n,n=c}const s=Math.sin(i),r=Math.sin(n),o=Math.cos(i),l=Math.cos(n);if(this.m_minorMajorRatio===1){const c=this.getSemiMajorAxis(),f=c*c,y=f*(r-s),_=f*(o-l);e.setCoords(y,_)}else{const c=this.getSemiMajorAxis(),f=this.getSemiMinorAxis(),y=c*c,_=f*f,x=c*f,S=y-_,P=S/_,A=S/y,D=Math.sqrt(P),N=Math.sqrt(A),F=.5*x*(Math.asinh(D*r)/D+r*Math.sqrt(1+P*r*r))-.5*x*(Math.asinh(D*s)/D+s*Math.sqrt(1+P*s*s)),G=-.5*x*(Math.asin(N*l)/N+l*Math.sqrt(1-A*l*l))- -.5*x*(Math.asin(N*o)/N+o*Math.sqrt(1-A*o*o));e.setCoords(F,G)}return e.rotateDirect(this.m_cosr,this.m_sinr),e.assign(e.add(this.m_center.mul(this.calculateLength2D()))),e}isIntersectingPoint(e,i,n){if(n&&(e.isEqualPoint2D(this.getStartXY())||e.isEqualPoint2D(this.getEndXY())))return!1;if(!rs(this)){const o=Y.distance(e,this.m_center),l=this.getSemiAxes();if(o<l.x-i||o>l.y+i)return!1}const s=this.getClosestCoordinate(e,!1),r=new Y;return this.queryCoord2D(s,r),Y.distance(r,e)<=i}isIntersectingPoint3D(e,i,n,s,r=1){return K(0),!1}getTangent(e){if(rs(this))return this.getEndXY().sub(this.getStartXY());{const i=sf(this,e),n=new Y;return n.setCoords(-this.m_semiMajorAxis*Math.sin(i),this.getSemiMinorAxis()*Math.cos(i)),this.m_rotation&&n.rotateDirect(this.m_cosr,this.m_sinr),n.scale(this.getSweepAngle()),n}}getDerivative(e){return K(0),Y.getNAN()}normalizeAfterEndpointChange(){return!!Eve(this)&&(rs(this)?(f9(this),!1):Cve(this,!1))}projectionBehavior(){return(4&this.m_bits)>>2}setProjectionBehavior(e){this.m_bits=-5&this.m_bits|e<<2}convertToCanonic(e){const i=new Y(e.x,e.y);return i.subThis(this.m_center),i.rotateReverse(this.m_cosr,this.m_sinr),i}convertFromCanonic(e){const i=new Y(e.x,e.y);return i.rotateDirect(this.m_cosr,this.m_sinr),i.addThis(this.m_center),i}canonicToWorldTransformation(e){e.setRotate(this.m_cosr,this.m_sinr),e.shiftCoords(this.m_center.x,this.m_center.y)}queryAttributeAsDbl(e,i,n,s){K(0)}getCurvature(e){return K(0),0}getMonotonicPartParams(e,i){const n=new Array(6);n[0]=0;let s=1;if(this.isDegenerateToLine())n[1]=1,s=2;else{const r=this.getSemiAxes(),o=new Array(4);this.m_rotation?(o[0]=Math.atan2(r.y*this.m_cosr,r.x*this.m_sinr),o[1]=o[0]+Math.PI,o[2]=Math.atan2(-r.y*this.m_sinr,r.x*this.m_cosr),o[3]=o[2]+Math.PI):(o[0]=0,o[1]=Math.PI,o[2]=.5*Math.PI,o[3]=NQe());for(let l=0;l<4;l++){const c=Is(this,o[l]);c>0&&c<1&&(n[s]=c,s++)}s>2&&qz(n,s),n[s]=1,s++}if(i){e<s&&Je("");for(let r=0;r<s;r++)i[r]=n[r]}return s}calculateLowerLength2D(){const e=Y.distance(this.getStartXY(),this.getEndXY());if(this.isDegenerateToLine())return e;const i=Math.abs(this.m_sweepAngle)*this.getSemiMinorAxis();return Math.max(i,e)}calculateUpperLength2D(){const e=Y.distance(this.getStartXY(),this.getEndXY());if(this.isDegenerateToLine())return e;const i=Math.abs(this.m_sweepAngle)*this.getSemiMajorAxis();return Math.max(i,e)}orientBottomUp(){K(0)}isLine(){return rs(this)}copyIgnoreAttributes(e){e.m_XStart=this.m_XStart,e.m_YStart=this.m_YStart,e.m_XEnd=this.m_XEnd,e.m_YEnd=this.m_YEnd,e.m_center.assign(this.m_center),e.m_semiMajorAxis=this.m_semiMajorAxis,e.m_minorMajorRatio=this.m_minorMajorRatio,e.m_interior.assign(this.m_interior),e.m_rotation=this.m_rotation,e.m_cosr=this.m_cosr,e.m_sinr=this.m_sinr,e.m_sweepAngle=this.m_sweepAngle,e.m_startAngle=this.m_startAngle,e.m_bits=this.m_bits,d9(e)}calculateArea2DHelper(){return fse(this)}absNorm(){let e=this.getStartXY().norm(1)+this.getEndXY().norm(1);return this.isDegenerateToLine()||(e+=this.m_center.norm(1),e+=this.m_semiMajorAxis),e}queryEnvelopeW(e,i){if(i.setCoords(this.getCoord2D(e.vmin)),i.mergeNe(this.getCoord2D(e.vmax)),rs(this))return;const n=this.getSemiAxes(),s=new Array(8);{const o=Math.atan2(-n.y*this.m_sinr,n.x*this.m_cosr),l=o+Math.PI,c=Math.atan2(n.y*this.m_cosr,n.x*this.m_sinr),f=c+Math.PI;s[0]=Is(this,o),s[1]=Is(this,l),s[2]=Is(this,c),s[3]=Is(this,f)}{const o=this.m_cosr+this.m_sinr,l=this.m_cosr-this.m_sinr,c=Math.atan2(-n.y*o,n.x*l),f=c+Math.PI,y=Math.atan2(n.y*l,n.x*o),_=y+Math.PI;s[4]=Is(this,c),s[5]=Is(this,f),s[6]=Is(this,y),s[7]=Is(this,_)}const r=Y.getNAN();for(let o=0;o<8;o++){const l=s[o];e.containsExclusiveCoordinate(l)&&(this.queryCoord2D(l,r),i.mergeNe(r))}}setSegmentFromCoords(e,i){Nat(this,e,i)}writeInBufferStream(e,i){const n=new Float64Array(10);return n[0]=this.m_bits,n[1]=this.m_semiMajorAxis,n[2]=this.m_minorMajorRatio,n[3]=this.m_rotation,n[4]=this.m_center.x,n[5]=this.m_center.y,n[6]=this.m_sweepAngle,n[7]=this.m_startAngle,n[8]=this.m_interior.x,n[9]=this.m_interior.y,e.writeRangeFromArray(i,n.length,n,!0,1),i+n.length}readFromBufferStream(e,i){const n=new Float64Array(10);e.queryRange(i,n.length,n,!0,1),this.m_bits=n[0],this.m_semiMajorAxis=n[1],this.m_minorMajorRatio=n[2],this.m_rotation=n[3],this.m_center.x=n[4],this.m_center.y=n[5],this.m_sweepAngle=n[6],this.m_startAngle=n[7],this.m_interior.x=n[8],this.m_interior.y=n[9],this.m_cosr=Math.cos(this.m_rotation),this.m_sinr=Math.sin(this.m_rotation),this.m_cachedValues=null}snapControlPoints(e){return!1}needsSnapControlPoints(e){return K(0),!1}calculateSpecialPointsForCracking(e,i){return K(0),0}ensureXYMonotone(){return K(0),!1}setCoordsForIntersector(e,i,n){use(this,e,i,n)}getInteriorPoint(){return this.m_interior.clone()}copyToImpl(e){const i=e;i.m_center.assign(this.m_center),i.m_semiMajorAxis=this.m_semiMajorAxis,i.m_minorMajorRatio=this.m_minorMajorRatio,i.m_interior.assign(this.m_interior),i.m_rotation=this.m_rotation,i.m_cosr=this.m_cosr,i.m_sinr=this.m_sinr,i.m_sweepAngle=this.m_sweepAngle,i.m_startAngle=this.m_startAngle,i.m_bits=this.m_bits,wO(i,xO(this))}reverseImpl(){V7(this,!fx(this)),bq(this),(this.projectionBehavior()!==0||this.getStartXY().equals(this.getEndXY()))&&pE(this)}equalsImpl(e){const i=e;if(this.m_bits!==i.m_bits||this.m_semiMajorAxis!==i.m_semiMajorAxis||this.m_minorMajorRatio!==i.m_minorMajorRatio||!(this.m_center.isEqualPoint2D(i.m_center)||this.m_center.isNAN()&&i.m_center.isNAN())||this.m_rotation!==i.m_rotation||!this.m_interior.equals(i.m_interior))return!1;const n=i.m_sweepAngle;if(this.m_sweepAngle!==n)return!1;const s=i.m_startAngle;return this.m_startAngle===s}equalsImplTol(e,i){const n=e;if(this.m_bits!==n.m_bits)return!1;if(this.m_center.isNAN()&&n.m_center.isNAN())return!0;if(this.m_center.isNAN()!==n.m_center.isNAN()||!this.getSemiAxes().isEqualPoint2D(n.getSemiAxes(),i)||!this.m_center.isEqualPoint2D(n.m_center,i))return!1;const s=Math.abs(bye(_ye(c9(this.m_rotation-n.m_rotation)))),r=Math.abs(Di()-s),o=Math.min(s,r);if(this.m_semiMajorAxis*Math.abs(o)>i)return!1;const l=this.getCoord2D(.5),c=n.getCoord2D(.5);return!!l.isEqualPoint2D(c,i)}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){f9(this),d9(this)}intersect(e,i,n,s,r){return Qv(!1,this,e,i,n,s,r)}intersectPoint(e,i,n){if(i.length<2&&Mi(""),rs(this))return new ni({start:this.getStartXY(),end:this.getEndXY()}).intersectPoint(e,i,n);{const o=Y.distance(e,this.m_center);if(o>this.m_semiMajorAxis+n||o<this.getSemiMinorAxis()-n)return 0}const s=this.getClosestCoordinate(e,!1),r=Y.getNAN();return this.queryCoord2D(s,r),Y.distance(r,e)<=n?An(s,0,1)&&(this.queryCoord2D(s===0?1:0,r),Y.distance(r,e)<=n)?(i&&(i[0]=0,i[1]=1),2):(i&&(i[0]=s),1):0}isIntersecting(e,i,n){return $5(!1,this,e,i,n)!==0}intersect_(e,i,n,s){return K(0),0}endPointModified(){this.m_bits|=8,d9(this)}clearEndPointModified(){f9(this)}}Xc.type=me.enumEllipticArc;class Wt extends ga{constructor(e){e?e.vd?(super({vd:e.vd,bPolygon:!0}),this.m_segmentBufferCTor=Qt):e.copy?(super({vd:e.copy.getDescription(),bPolygon:!0}),this.m_segmentBufferCTor=Qt,e.copy.copyTo(this)):e.move?(super({move:e.move}),this.m_segmentBufferCTor=Qt):(e.envelope,K(0)):(super({bPolygon:!0}),this.m_segmentBufferCTor=Qt)}assignMove(e){return e.copyTo(this),this}assignCopy(e){return e.copyTo(this),this}getBoundary(){return sd(this)}getExteriorRingCount(){return this.getOGCPolygonCount()}getGeometryType(){return Wt.type}getDimension(){return 2}createInstance(){return new Wt({vd:this.getDescription()})}equals(e,i){return this.equalsBase(e,i)}}Wt.type=me.enumPolygon;class mC extends N1e{constructor(e){if(typeof e=="number")return super(),this.m_factor=e,void(this.m_wkid=0);super(e)}getUnitType(){return 1}convertFromRadians(e){return e/this.getUnitToBaseFactor()}convertToRadians(e){return e*this.getUnitToBaseFactor()}}function git(t){return t.getType()===Vi.PE_TYPE_LINUNIT?new wC(t):t.getType()===Vi.PE_TYPE_ANGUNIT?new mC(t):void Je("peUnit")}function yit(t){const e=Fve(null);return t.getType()===Vi.PE_TYPE_PROJCS||t.getType()===Vi.PE_TYPE_GEOGCS?e.reset(t.getUnit()):Je("PE_coord_sys"),e.get()||xt("cannot create units from coord sys"),git(e.get())}function vit(t,e){let i=e,n=null;i||(n=_7(t)?KE():Uo(),i=n);let s=null;switch(t){case me.enumPoint:s=new Ut({vd:i});break;case me.enumLine:s=new ni({vd:i});break;case me.enumBezier:s=new Gc({vd:i});break;case me.enumEllipticArc:s=new Xc({vd:i});break;case me.enumRationalBezier2:s=new wa({vd:i});break;case me.enumBezier2:s=new pm({vd:i});break;case me.enumEnvelope:s=new ur({vd:i});break;case me.enumMultiPoint:s=new Qs({vd:i});break;case me.enumPolyline:s=new vi({vd:i});break;case me.enumPolygon:s=new Wt({vd:i});break;case me.enumMultipatch:K(0);break;case me.enumGeometryCollection:s=new eC({vd:i});break;default:Je("Geometry.create")}return s}var ene=br;const ae=-1,Vr=1;class _it{constructor(e){this.m_shape=e}userSort(e,i,n){this.m_shape.sortVerticesSimpleByYHelper(n,e,i)}getValue(e){return this.m_shape.getY(e)}}function bit(t){return t.parent!==void 0}class gC{constructor(e){bit(e)?(this.m_parent=e.parent,this.m_geometry=e.geometry,this.m_path=e.path,this.m_vertex=e.vertex,this.m_firstVertex=e.firstVertex,this.m_index=e.selection?0:e.index,this.m_bSkipMultiPoints=e.bSkipMultiPoints,this.m_selection=e.selection,this.m_bOneGeom=e.bOneGeom,this.m_bFirst=!0):(this.m_parent=e.copy.m_parent,this.m_geometry=e.copy.m_geometry,this.m_path=e.copy.m_path,this.m_vertex=e.copy.m_vertex,this.m_index=e.copy.m_index,this.m_bSkipMultiPoints=e.copy.m_bSkipMultiPoints,this.m_firstVertex=e.copy.m_firstVertex,this.m_bFirst=!0,this.m_selection=e.copy.m_selection,this.m_bOneGeom=e.copy.m_bOneGeom)}moveToNextHelper(){for(this.m_path=this.m_parent.getNextPath(this.m_path),this.m_index=0;this.m_geometry!==ae;){for(;this.m_path!==ae;this.m_path=this.m_parent.getNextPath(this.m_path))if(this.m_vertex=this.m_parent.getFirstVertex(this.m_path),this.m_firstVertex=this.m_vertex,this.m_vertex!==ae)return this.m_vertex;if(this.m_bOneGeom)return ae;if(this.m_geometry=this.m_parent.getNextGeometry(this.m_geometry),this.m_geometry===ae)break;this.m_bSkipMultiPoints&&!bi(this.m_parent.getGeometryType(this.m_geometry))||(this.m_path=this.m_parent.getFirstPath(this.m_geometry))}return ae}nextSelection(){for(;this.m_index<this.m_parent.m_selectedVertices.length;){const e=this.m_parent.m_selectedVertices[this.m_index++];if(e!==ae&&(this.m_path=this.m_parent.getPathFromVertex(e),!this.m_bOneGeom||this.m_geometry===this.m_parent.getGeometryFromPath(this.m_path)))return this.m_geometry=this.m_parent.getGeometryFromPath(this.m_path),e}return ae}next(){return this.m_selection?this.nextSelection():this.m_bFirst?(this.m_bFirst=!1,this.m_vertex):this.m_vertex!==ae?(this.m_vertex=this.m_parent.getNextVertex(this.m_vertex),this.m_index++,this.m_vertex!==ae&&this.m_vertex!==this.m_firstVertex?this.m_vertex:this.moveToNextHelper()):ae}currentGeometry(){return this.m_geometry}currentPath(){return K(0),0}static create_(e,i,n,s,r,o,l,c,f){return new gC({parent:e,geometry:i,path:n,vertex:s,firstVertex:r,index:o,bSkipMultiPoints:l,selection:c,bOneGeom:f})}}class hq{constructor(e){this.parentage=e}equals(e){return this.parentage===e.parentage}}class Hn{setPrevPath(e,i){this.m_pathIndexList.setField(e,1,i)}setNextPath(e,i){this.m_pathIndexList.setField(e,2,i)}setPathFlags(e,i){this.m_pathIndexList.setField(e,6,i)}getPathFlags(e){return this.m_pathIndexList.getField(e,6)}setPathGeometry(e,i){this.m_pathIndexList.setField(e,7,i)}getPathIndex(e){return this.m_pathIndexList.getField(e,0)}setNextGeometry(e,i){this.m_geometryIndexList.setField(e,1,i)}setPrevGeometry(e,i){this.m_geometryIndexList.setField(e,0,i)}getGeometryIndex(e){return this.m_geometryIndexList.getField(e,7)}setFirstPath(e,i){this.m_geometryIndexList.setField(e,3,i)}setLastPath(e,i){this.m_geometryIndexList.setField(e,4,i)}newGeometry(e){const i=this.m_geometryIndexList.newElement();return this.m_geometryIndexList.setField(i,2,e),this.m_geometryIndexList.setField(i,5,0),this.m_geometryIndexList.setField(i,6,0),this.m_geometryIndexList.setField(i,7,this.m_geometryIndexList.elementToIndex(i)),i}freeGeometry(e){this.m_geometryIndexList.deleteElement(e)}newPath(e){const i=this.m_pathIndexList.newElement(),n=this.m_pathIndexList.elementToIndex(i);if(this.m_pathIndexList.setField(i,0,n),this.m_pathIndexList.setField(i,3,0),this.m_pathIndexList.setField(i,6,0),this.setPathGeometry(i,e),n>=this.m_pathAreas.length){const s=Math.trunc(n<16?16:3*n/2);this.m_pathAreas.length=s,this.m_pathLengths.length=s}return this.m_pathAreas[n]=0,this.m_pathLengths[n]=0,this.m_pathCount++,i}freePath(e){this.m_pathIndexList.deleteElement(e),this.m_pathCount--}newVertex(e){const i=this.m_vertexIndexList.newElement(),n=e>=0?e:this.m_vertexIndexList.elementToIndex(i);if(this.m_vertexIndexList.setField(i,0,n),e<0){if(n>=this.m_vertices.getPointCount()){const s=Math.trunc(n<16?16:3*n/2);this.m_vertices.reserveRounded(s),this.m_vertices.resizeNoInit(s),this.m_segments!==null&&(this.m_segments.length=s),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0)}this.m_segments&&(this.m_segments[n]=null)}return this.m_pointCount++,i}freeVertex(e){this.unselect(e);const i=this.getVertexIndex(e);this.m_vertexIndexList.deleteElement(e),this.m_pointCount--;for(let n=0,s=this.m_indices.length;n<s;n++){if(n===this.m_selectionIndex)continue;const r=this.m_indices[n];r!==null&&r.size()>i&&r.write(i,-1)}this.m_weights&&this.m_weights.size()>i&&this.m_weights.write(i,1),this.m_ranks&&this.m_ranks.size()>i&&this.m_ranks.write(i,Vr),this.m_segmentWeights&&this.m_segmentWeights.size()>i&&this.m_segmentWeights.write(i,1),this.m_segmentRanks&&this.m_segmentRanks.size()>i&&this.m_segmentRanks.write(i,Vr),this.m_segments&&this.setSegmentToIndex(i,null)}insertVertex_(e,i,n,s){this.m_bHasForceSetEnvelope=!1;const r=i!==ae?this.getPrevVertex(i):this.getLastVertex(e),o=r!==ae?this.getNextVertex(r):ae,l=this.newVertex(n===null?this.m_pointCount:-1),c=this.getVertexIndex(l);n!==null&&this.m_vertices.setPointByVal(c,n),this.setPathToVertex(l,e),this.setNextVertex(l,o),this.setPrevVertex(l,r),o!==ae&&this.setPrevVertex(o,l),r!==ae&&this.setNextVertex(r,l);const f=this.isClosedPath(e),y=this.getFirstVertex(e);i===ae&&this.setLastVertex(e,l),i===y&&(f&&s&&y!==ae||this.setFirstVertex(e,l)),f&&o===ae&&(this.setNextVertex(l,l),this.setPrevVertex(l,l)),this.setPathSize(e,this.getPathSize(e)+1);const _=this.getGeometryFromPath(e);return this.setGeometryVertexCount(_,this.getPointCount(_)+1),l}getHelperPoint(){return this.m_helperPoint||(this.m_helperPoint=new Ut({vd:this.m_vertices.getDescription()}),this.m_helperPoint.setXYCoords(0,0)),this.m_helperPoint}addMultiPath_(e){return K(0),0}addMultiPoint(e,i){const n=this.createGeometry(e.getGeometryType(),e.getDescription());return this.appendMultiPoint(n,e,i),n}addPoint_(e,i){const n=this.createGeometry(me.enumMultiPoint,e.getDescription());return this.appendPoint(n,e,i),n}appendMultiPath_(e,i){if(i.isEmpty())return;const n=i.getImpl();this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+n.getPointCount()),this.m_verticesMp.addPoints(i,0,n.getPointCount()),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0);const s=this.m_segments!==null||n.getSegmentFlagsStreamRef()!==null;this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+n.getPointCount()),this.m_pathIndexList.setCapacity(this.m_pathIndexList.size()+n.getPathCount());for(let r=0,o=n.getPathCount();r<o;r++){if(n.getPathSize(r)===0)continue;const l=this.insertPath(e,ae);this.setClosedPath(l,n.isClosedPath(r));for(let c=n.getPathStart(r),f=n.getPathEnd(r);c<f;c++){const y=this.insertVertex_(l,ae,null,!1);if(s){const _=this.getVertexIndex(y);if(1&n.getSegmentFlags(c))this.setSegmentToIndex(_,null);else{const x=new Qt;n.querySegment(c,x,!0),this.setSegmentToIndex(_,x.releaseSegment())}}}n.isStrongPathStart(r)&&this.setStrongPathStart(l,!0),n.isStrongPathEnd(r)&&this.setStrongPathEnd(l,!0)}}addMultiPath(e,i){const n=this.createGeometry(e.getGeometryType(),e.getDescription());return e.getGeometryType()===me.enumPolygon&&this.setFillRule(n,e.getFillRule()),this.appendMultiPath(n,e,i),n}appendMultiPathPolyline(e,i,n){K(0)}appendMultiPathPolygon(e,i,n){var B;const s=i.getImpl(),r=this.m_segments!==null||s.getSegmentFlagsStreamRef()!==null,o=xe.constructEmpty();i.queryEnvelope(o),K(n.isIntersecting(o)&&!n.containsEnvelope(o));let l=xe.construct(Number.NEGATIVE_INFINITY,n.ymin,Number.POSITIVE_INFINITY,n.ymax),c=xe.construct(n.xmin,Number.NEGATIVE_INFINITY,n.xmax,Number.POSITIVE_INFINITY);const f=s.getAccelerators();if(f&&f.getQuadTree()){const W=f.getQuadTree(),J=W.getIntersectionCount(l,0,0);J>W.getIntersectionCount(c,0,J+1)&&(c=Et(l,l=c))}else l.height()>c.width()&&(c=Et(l,l=c));const y=[],_=s.queryLimitedSegmentIterator(l);let x=-1,S=-100,P=-1,A=0,D=-1,N=-1,F=ae,G=!0,V=_.nextSegment();if(V!==null)for(;;V=_.nextSegment()){let W=V===null;const J=V!==null?_.getPathIndex():x,re=V!==null?_.getStartPointIndex():S;if(W||(J===x?S+1===re?A++:W=!0:(W=x>=0,x<0&&(x=J,P=s.getSegmentCountPath(x),D=re,F=ae,A=1))),W){if(!(y.length===0&&P===A)){y.length!==0&&y[0].first===D||(this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.addPoints(i,D,D+1),N===-1&&(N=D),F===ae&&(F=this.insertPath(e,ae),this.setClosedPath(F,!0)),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.insertVertex_(F,ae,null,!1));for(const{first:ne,second:oe}of y){N===-1&&(N=ne);let pe=-1,ce=-1;const ue=ne+oe-1;if(oe===P){const se=ue+1;ce=se-ne,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+ce),this.m_verticesMp.addPoints(i,ne,se),pe=ue,K(y.length===1)}else if(ue+1<s.getPathEnd(x)){const se=ue+2;ce=se-ne,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+ce),this.m_verticesMp.addPoints(i,ne,se),pe=ue}else{const se=s.getPathStart(x),de=se!==N?1:0,Se=ue+1;ce=Se-ne+de,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+(Se-ne)+de),this.m_verticesMp.addPoints(i,ne,Se),pe=ue,de>0&&((B=this.m_verticesMp)==null||B.addPoints(i,se,se+1))}this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),F===ae&&(F=this.insertPath(e,ae),this.setClosedPath(F,!0));for(let se=0,de=ne;se<ce;se++,de++){const Se=this.insertVertex_(F,ae,null,!1);if(r){const Pe=this.getVertexIndex(Se);if(1&s.getSegmentFlags(de)||de>pe)this.setSegmentToIndex(Pe,null);else{const Re=new Qt;s.getSegmentBuffer(de,Re,!0),this.setSegmentToIndex(Pe,Re.releaseSegment())}}}}if(y.length===0||y.at(-1).first+y.at(-1).second!==D+A){let ne=D+A;ne===i.getPathEnd(x)&&(ne=i.getPathStart(x)),N!==ne&&(this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.addPoints(i,ne,ne+1),this.insertVertex_(F,ae,null,!1))}}y.length=0,G=!0,J!==x&&(x=J,P=s.getSegmentCountPath(x),F=ae,N=-1),D=re,A=1}if(!V)break;{const ne=xe.constructEmpty();V.queryLooseEnvelope(ne),c.isIntersecting(ne)?(G?y.push(ar(re,1)):y.at(-1).second++,G=!1):G=!0}S=re}}appendMultiPath(e,i,n){if(n===void 0)return void this.appendMultiPath_(e,i);if(i.isEmpty())return;const s=i.getGeometryType()===me.enumPolygon,r=xe.constructEmpty();i.queryEnvelope(r),n.isIntersecting(r)&&(!n.containsEnvelope(r)&&i.getPointCount()>10?s?this.appendMultiPathPolygon(e,i,n):this.appendMultiPathPolyline(e,i,n):this.appendMultiPath_(e,i))}appendPoint(e,i,n){if(i.isEmpty()||n!==void 0&&!n.contains(i.getXY()))return;this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.add(i),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+1);const s=this.insertPath(e,ae);this.insertVertex_(s,ae,null,!1)}appendMultiPoint_(e,i){this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+i.getPointCount()),this.m_verticesMp.addPoints(i,0,i.getPointCount()),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+i.getPointCount());const n=this.insertPath(e,ae);for(let s=0,r=i.getPointCount();s<r;s++)this.insertVertex_(n,ae,null,!1)}appendMultiPoint(e,i,n){if(n===void 0)return void this.appendMultiPoint_(e,i);const s=i.getAttributeStreamRef(0);let r=0;for(let y=0,_=i.getPointCount();y<_;y++){const x=s.readPoint2D(2*y);n.contains(x)&&r++}this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+r);let o=-1,l=-1,c=0;for(let y=0,_=i.getPointCount();y<_;y++){const x=s.readPoint2D(2*y);n.contains(x)?(o===-1&&(o=y,l=y),l++):o>=0&&(this.m_verticesMp.addPoints(i,o,l-o),o=-1,c++)}if(o>0&&(this.m_verticesMp.addPoints(i,o,l-o),c++),!c)return;this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+r);const f=this.insertPath(e,ae);for(let y=0,_=i.getPointCount();y<_;y++){const x=s.readPoint2D(2*y);n.contains(x)&&this.insertVertex_(f,ae,null,!1)}}splitSegmentForward(e,i,n,s,r){const o=this.getNextVertex(e);o===ae&&Je("Edit_shape.split_segment_forward_");const l=this.getHelperPoint(),c=this.getPathFromVertex(e);let f=e;const y=this.hasSegmentParentage();for(let _=0,x=i.getResultSegmentCount(n);_<x;_++){const S=this.getVertexIndex(f),P=this.getNextVertex(f),A=i.getResultSegment(n,_);let D=null;if(A.getGeometryType()!==me.enumLine&&(D=A.clone(),D.dropAllAttributes()),_===0&&(A.queryStart(l),this.setSegmentToIndex(S,null),this.setPointEx(f,l,i.getResultSegmentStartPointRank(n,_),i.getResultSegmentStartPointWeight(n,_),r)),this.setSegmentRank(f,i.getResultSegmentInteriorRank(n,_)),this.setSegmentWeight(f,i.getResultSegmentInteriorWeight(n,_)),y){const N=i.getResultSegmentSegmentParentage(n,_),F=i.getResultSegmentStartPointIsBreak(n,_);this.setSegmentParentageAndBreak(f,N,F)}if(A.queryEnd(l),_<x-1){this.setSegmentToIndex(S,D);const N=this.insertVertex(c,P,l);this.setWeight(N,i.getResultSegmentEndPointWeight(n,_)),this.setRank(N,i.getResultSegmentEndPointRank(n,_)),this.select(N),f=N}else{this.setPointEx(o,l,i.getResultSegmentEndPointRank(n,_),i.getResultSegmentEndPointWeight(n,_),r);const N=i.getResultSegmentEndPointIsBreak(n,_);this.setSegmentParentageBreakVertex(o,N),this.setSegmentToIndex(S,D)}}}splitSegmentBackward(e,i,n,s,r){const o=this.getNextVertex(e);o===ae&&Je("Edit_shape.split_segment_backward_");const l=this.getHelperPoint(),c=this.getPathFromVertex(e);let f=e;const y=this.hasSegmentParentage();for(let _=0,x=i.getResultSegmentCount(n);_<x;_++){const S=x-_-1,P=this.getVertexIndex(f),A=this.getNextVertex(f),D=i.getResultSegment(n,S);let N=null;if(D.getGeometryType()!==me.enumLine&&(N=D.clone(),N.reverse(),N.dropAllAttributes()),_===0&&(D.queryEnd(l),this.setSegmentToIndex(P,null),this.setPointEx(f,l,i.getResultSegmentEndPointRank(n,S),i.getResultSegmentEndPointWeight(n,S),r),this.setSegmentParentageAndBreak(f,i.getResultSegmentSegmentParentage(n,S),i.getResultSegmentEndPointIsBreak(n,S))),D.getGeometryType()===me.enumLine?this.setSegmentToIndex(P,null):this.setSegmentToIndex(P,N),this.setSegmentRank(f,i.getResultSegmentInteriorRank(n,S)),this.setSegmentWeight(f,i.getResultSegmentInteriorWeight(n,S)),D.queryStart(l),_<x-1){const F=this.insertVertex(c,A,l);this.setWeight(F,i.getResultSegmentStartPointWeight(n,S)),this.setRank(F,i.getResultSegmentStartPointRank(n,S)),this.select(F),f=F,y&&this.setSegmentParentageAndBreak(F,i.getResultSegmentSegmentParentage(n,S),i.getResultSegmentEndPointIsBreak(n,S))}else this.setPointEx(o,l,i.getResultSegmentStartPointRank(n,S),i.getResultSegmentStartPointWeight(n,S),r)}}selected_(e){return K(0),!1}allocateIndex(e=!0){if(this.m_deletedIndices.length){const i=this.m_deletedIndices.pop();return e&&i.setRange(-1,0,i.size()),i}return e?Ya(0,-1):Ya(0)}recycleUserIndex(e){this.m_deletedIndices.push(e)}allocatePathIndex(){if(this.m_deletedPathIndices.length){const e=this.m_deletedPathIndices.at(-1);return this.m_deletedPathIndices.pop(),e}return Ya(0)}recyclePathUserIndex(e){this.m_deletedPathIndices.push(e)}peelALoop_(e,i,n){const s=this.getNextVertex(e),r=this.getNextVertex(i),o=this.getVertexIndex(e),l=this.getVertexIndex(i);if(this.setNextVertex(e,r),this.setPrevVertex(r,e),this.setNextVertex(i,s),this.setPrevVertex(s,i),this.m_segments){const c=this.getSegmentFromIndex(o),f=this.getSegmentFromIndex(l);this.setSegmentToIndex(l,null),this.setSegmentToIndex(o,f),this.setSegmentToIndex(l,c)}if(this.hasSegmentParentage()){let c=this.getSegmentParentage(i),f=this.getSegmentParentage(e);c===-1&&f===-1||(f=Et(c,c=f),this.setSegmentParentageAndBreak(e,f),this.setSegmentParentageAndBreak(i,c))}if(n){const c=this.getPathFromVertex(e),f=this.getGeometryFromPath(c),y=[!1],_=this.insertClosedPath(f,ae,s,this.getFirstVertex(c),y);y[0]&&this.setFirstVertex(c,r);let x=this.getPathSize(c);return x-=this.getPathSize(_),this.setPathSize(c,x),_}return ae}sortVerticesSimpleByYHelper(e,i,n){e.sort(i,n,(s,r)=>{let o=this.compareVerticesSimpleY(s,r);if(o===0){const l=this.getPathInternalIndexFromVertex(s),c=this.getPathInternalIndexFromVertex(r);o=l<c?-1:l>c?1:0}return o})}sortVerticesSimpleByYHelper3D(e,i,n){K(0)}constructor(){this.m_verticesMp=null,this.m_vertices=null,this.m_xyStream=null,this.m_vertexDescription=null,this.m_segments=null,this.m_weights=null,this.m_ranks=null,this.m_segmentWeights=null,this.m_segmentRanks=null,this.m_indices=[],this.m_deletedIndices=[],this.m_pathAreas=[],this.m_pathLengths=[],this.m_pathindices=[],this.m_deletedPathIndices=[],this.m_geometryIndices=[],this.m_selectedVertices=[],this.m_helperPoint=null,this.m_forceSetEnvelope=ol.constructEmpty(),this.m_bHasForceSetEnvelope=!1,this.m_workPoint2D=Y.getNAN(),this.m_workPoint2_2D=Y.getNAN(),this.m_curveStitcher=null,this.m_pathCount=0,this.m_pointCount=0,this.m_firstGeometry=ae,this.m_lastGeometry=ae,this.m_vertexIndexList=new Yt(5),this.m_pathIndexList=new Yt(8),this.m_geometryIndexList=new Yt(8),this.m_bHasAttributes=!1,this.m_selectedCount=0,this.m_selectionIndex=-1,this.m_selection=!1,this.m_bucketSort=new pd,this.m_bHasForceSetEnvelope=!1,this.m_segmentParentageIndex=-1}getTotalPointCount(){return this.m_pointCount}getEnvelope2D(e){if(this.m_bHasForceSetEnvelope)return new xe(this.m_forceSetEnvelope.xmin,this.m_forceSetEnvelope.ymin,this.m_forceSetEnvelope.xmax,this.m_forceSetEnvelope.ymax);const i=this.hasCurves(),n=xe.constructEmpty(),s=this.queryVertexIterator();let r=!0;for(let o=s.next();o!==ae;o=s.next()){if(r?n.merge(this.getXY(o)):n.mergeNe(this.getXY(o)),i){const l=this.getSegment(o);if(l!==null){const c=xe.constructEmpty();l.queryLooseEnvelope(c),n.mergeEnvelope2D(c)}}r=!1}return n}getEnvelope3D(e){return K(0),ol.constructEmpty()}forceSetEnvelope2D(e){this.m_bHasForceSetEnvelope=!0,this.m_forceSetEnvelope.setCoords(e.xmin,e.ymin,0,e.xmax,e.ymax,0)}forceSetEnvelope3D(e){K(0)}forgetForceSetEnvelope2D(){K(0)}getGeometryCount(){return this.m_geometryIndexList.size()}addGeometry(e,i){const n=e.getGeometryType();if(bi(n))return this.addMultiPath(e,i);if(n===me.enumMultiPoint)return this.addMultiPoint(e,i);if(n===me.enumPoint)return this.addPoint_(e,i);if(n===me.enumEnvelope){const s=new Wt;return s.addEnvelope(e,!1),this.addMultiPath(s,i)}Je("")}appendGeometry(e,i){this.mergeVertexDescription(i.getDescription());const n=i.getGeometryType();bi(n)?this.appendMultiPath(e,i):n!==me.enumMultiPoint?Je(""):this.appendMultiPoint(e,i)}assignRankToGeometryVertices(e,i){K(0)}collapseAllGeometriesToFirst(){this.collapseGeometriesToFirst(me.enumUnknown)}collapseGeometriesToFirst(e){this.dbgVerifyVertexCounts();let i=ae,n=-1,s=-1;for(let r=this.getFirstGeometry();r!==ae;)if(e!==me.enumUnknown&&this.getGeometryType(r)!==e)r=this.getNextGeometry(r);else{if(i===ae){i=r,n=this.getPathCount(i),s=this.getPointCount(i),r=this.getNextGeometry(r);continue}for(let f=this.getFirstPath(r);f!==ae;f=this.getNextPath(f))this.setPathGeometry(f,i);n+=this.getPathCount(r),s+=this.getPointCount(r);const o=this.getLastPath(i),l=this.getFirstPath(r);o!==ae?this.setNextPath(o,l):this.setFirstPath(i,l),l!==ae&&(this.setPrevPath(l,o),this.setLastPath(i,this.getLastPath(r))),this.setFirstPath(r,ae),this.setLastPath(r,ae);const c=r;r=this.getNextGeometry(r),this.setGeometryVertexCount(c,0),this.removeGeometry(c)}return i!==ae&&(this.setGeometryVertexCount(i,s),this.setGeometryPathCount(i,n),this.dbgVerifyVertexCounts()),i}setFillRule(e,i){let n=this.m_geometryIndexList.getField(e,2);n&=-134217729,n|=i===1?134217728:0,this.m_geometryIndexList.setField(e,2,n)}getFillRule(e){return 134217728&this.m_geometryIndexList.getField(e,2)?1:0}setGeometryModified(e,i){let n=this.m_geometryIndexList.getField(e,2);!!(67108864&n)!==i&&(n&=-67108865,n|=i?67108864:0,this.m_geometryIndexList.setField(e,2,n))}getGeometryModified(e){return!!(67108864&this.m_geometryIndexList.getField(e,2))}setGeometryModifiedWithVertex(e,i){const n=this.getPathFromVertex(e),s=this.getGeometryFromPath(n);this.setGeometryModified(s,i)}getGeometryModifiedWithVertex(e){return K(0),!0}swapGeometry(e,i){K(0)}addPathFromMultiPath(e,i,n){const s=this.createGeometry(n?me.enumPolygon:me.enumPolyline,e.getDescription()),r=e.getImpl();if(e.getPathSize(i)<2)return s;this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+e.getPathSize(i)),this.m_verticesMp.addPoints(e,e.getPathStart(i),r.getPathEnd(i)),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0);const o=this.insertPath(s,ae);this.setClosedPath(o,r.isClosedPath(i)||n);const l=this.m_segments!==null||r.getSegmentFlagsStreamRef()!==null;for(let c=r.getPathStart(i),f=r.getPathEnd(i);c<f;c++){const y=this.insertVertex_(o,ae,null,!1);if(l){const _=this.getVertexIndex(y);if(1&r.getSegmentFlags(c))this.setSegmentToIndex(_,null);else{const x=new Qt;r.querySegment(c,x,!0),this.setSegmentToIndex(_,x.releaseSegment())}}}return r.isStrongPathStart(i)&&this.setStrongPathStart(o,!0),r.isStrongPathEnd(i)&&this.setStrongPathEnd(o,!0),s}getGeometry(e){const i=this.getGeometryType(e),n=vit(i,this.m_verticesMp.getDescription()),s=this.getPointCount(e);if(s===0)return n;if(bi(i)){const r=n.getImpl(),o=this.getPathCount(e),l=Ya(o+1),c=jg(o+1,0),f=n.getDescription(),y=this.hasCurves();for(let _=0,x=f.getAttributeCount();_<x;_++){const S=f.getSemantics(_),P=ene.getComponentCount(S),A=T1e(S,s),D=this.m_vertices.getAttributeStreamRef(S);let N=0,F=0,G=0;for(let V=this.getFirstPath(e);V!==ae;V=this.getNextPath(V)){let B=0;this.isClosedPath(V)&&(B|=1),this.isExterior(V)&&(B|=8),this.isStrongPathStart(V)&&(B|=2),this.isStrongPathEnd(V)&&(B|=4),B&&c.setBits(F,B);const W=this.getPathSize(V);if(l.write(F++,G),G+=W,S===0){const J=D,re=A;let ne;for(let oe=this.getFirstVertex(V);N<G;oe=this.getNextVertex(oe),N++){const pe=this.getVertexIndex(oe);ne=J.readPoint2D(2*pe),re.writePoint2D(2*N,ne)}}else for(let J=this.getFirstVertex(V);N<G;J=this.getNextVertex(J),N++){const re=this.getVertexIndex(J);for(let ne=0;ne<P;ne++){const oe=D.readAsDbl(re*P+ne);A.writeAsDbl(N*P+ne,oe)}}}r.setAttributeStreamRef(S,A),l.write(o,s)}if(r.setPathFlagsStreamRef(c),r.setPathStreamRef(l),r.notifyModifiedFlags(65535),y){let _=0,x=0;for(let S=this.getFirstPath(e);S!==ae;S=this.getNextPath(S)){_+=this.getPathSize(S);for(let P=this.getFirstVertex(S);x<_;P=this.getNextVertex(P)){const A=this.getSegment(P);A!==null&&A.isCurve()&&r.replaceSegment(x,A,!0),x++}}}}else if(i===me.enumMultiPoint){const r=n.getImpl(),o=n.getDescription();r.reserve(s),r.resizeNoInit(s);for(let l=0,c=o.getAttributeCount();l<c;l++){const f=o.getSemantics(l),y=ene.getComponentCount(f),_=r.getAttributeStreamRef(f),x=this.m_vertices.getAttributeStreamRef(f);let S=0;const P=this.getFirstPath(e),A=this.getPathSize(P);for(let D=this.getFirstVertex(P);S<A;D=this.getNextVertex(D),S++){const N=this.getVertexIndex(D);for(let F=0;F<y;F++){const G=x.readAsDbl(N*y+F);_.writeAsDbl(S*y+F,G)}}r.setAttributeStreamRef(f,_)}r.notifyModifiedFlags(65535)}else K(0);return n}queryPointGeometryOnly(e,i){this.getGeometryType(e)!==me.enumMultiPoint&&Je("get_point_geometry_only");const n=this.getPointCount(e);if(n>1&&Je("get_point_geometry_only"),n===0)return i.assignVertexDescription(this.m_vertexDescription),void i.setEmpty();const s=this.getFirstPath(e),r=this.getFirstVertex(s);this.queryPoint(r,i)}removeGeometry(e){for(let s=this.getFirstPath(e);s!==ae;s=this.removePath(s));const i=this.getPrevGeometry(e),n=this.getNextGeometry(e);return i!==ae?this.setNextGeometry(i,n):this.m_firstGeometry=n,n!==ae?this.setPrevGeometry(n,i):this.m_lastGeometry=i,this.freeGeometry(e),n}createGeometry(e,i){i===void 0&&(i=Uo());const n=this.newGeometry(e);return this.m_vertices||(this.m_verticesMp=new Qs({vd:i}),this.m_vertices=this.m_verticesMp.getImpl()),this.mergeVertexDescription(i),this.m_firstGeometry===ae?(this.m_firstGeometry=n,this.m_lastGeometry=n):(this.setPrevGeometry(n,this.m_lastGeometry),this.setNextGeometry(this.m_lastGeometry,n),this.m_lastGeometry=n),n}getFirstGeometry(){return this.m_firstGeometry}getLastGeometry(){return this.m_lastGeometry}getNextGeometry(e){return this.m_geometryIndexList.getField(e,1)}getPrevGeometry(e){return this.m_geometryIndexList.getField(e,0)}getGeometryType(e){return 16777215&this.m_geometryIndexList.getField(e,2)}setGeometryUserIndex(e,i,n){const s=this.m_geometryIndices[i],r=this.getGeometryIndex(e);r>=s.size()&&s.resize(Math.max(1.25*r,16),-1),s.write(r,n)}getGeometryUserIndex(e,i){const n=this.getGeometryIndex(e),s=this.m_geometryIndices[i];return n<s.size()?s.read(n):-1}createGeometryUserIndex(){for(let i=0;i<this.m_geometryIndices.length;i++)if(this.m_geometryIndices[i]===null)return this.m_geometryIndices[i]=Ya(0),i;this.m_geometryIndices.push(Ya(0));const e=this.m_geometryIndices.length-1;return K(e>=0&&e<=Number.MAX_SAFE_INTEGER),e}removeGeometryUserIndex(e){for(this.m_geometryIndices[e]=null;this.m_geometryIndices.length>0&&this.m_geometryIndices.at(-1)===null;)this.m_geometryIndices.pop()}getFirstPath(e){return this.m_geometryIndexList.getField(e,3)}getLastPath(e){return this.m_geometryIndexList.getField(e,4)}hasPointFeatures(){for(let e=this.getFirstGeometry();e!==ae;e=this.getNextGeometry(e))if(!bi(this.getGeometryType(e)))return!0;return!1}getPointCount(e){return this.m_geometryIndexList.getField(e,5)}getPathCount(e){return this.m_geometryIndexList.getField(e,6)}filterClosePoints(e,i,n,s,r){const o=e*e;let l=0;const c=this.hasCurves(),f=this.hasSegmentParentage();for(let y=r===ae?this.getFirstGeometry():r;y!==ae;y=r===ae?this.getNextGeometry(y):ae){const _=this.getGeometryType(y);if(!bi(_)||n&&_!==me.enumPolygon)continue;const x=this.getGeometryType(y)===me.enumPolygon;let S=this.getGeometryModified(y);for(let P=this.getFirstPath(y);P!==ae;){let A=0;for(let G=this.getFirstVertex(P);A<Math.trunc(this.getPathSize(P)/2);){const V=this.getNextVertex(G);if(V===ae)break;const B=this.getXY(G),W=this.getXY(V);let J=Y.sqrDistance(B,W),re=!0;do if(J<=o){if(c){const ne=this.getSegment(G);if(ne!==null){const oe=ne.calculateLength2D();if(J=oe*oe,J>o)break}}if(J===0?l===0&&(l=-1):l=1,V!==this.getLastVertex(P)){const ne=f&&(this.getSegmentParentageBreakVertex(G)||this.getSegmentParentageBreakVertex(V));if(this.transferAllDataToTheVertex(V,G),this.removeVertex(V,!1),s&&!S&&(this.setGeometryModified(y,!0),S=!0),f&&G!==V){this.setSegmentParentageBreakVertex(G,ne);const oe=this.getNextVertex(G);K(oe!==ae),this.isDiscontinuousSegmentParentage(oe)&&this.setSegmentParentageBreakVertex(oe,!0)}}re=!1}while(!1);re&&(G=this.getNextVertex(G)),A++}let D=this.getFirstVertex(P);for(let G=this.isClosedPath(P)?D:this.getLastVertex(P);this.getPathSize(P)>0;){const V=this.getPrevVertex(G);if(V===ae)break;{const B=this.getXY(V),W=this.getXY(G);let J=Y.sqrDistance(B,W),re=!0;do if(J<=o){if(c){const oe=this.getSegment(V);if(oe!==null){const pe=oe.calculateLength2D();if(J=pe*pe,J>o)break}}J===0?l===0&&(l=-1):l=1;const ne=f&&(this.getSegmentParentageBreakVertex(G)||this.getSegmentParentageBreakVertex(V));this.removeVertex(V,!0),s&&!S&&(this.setGeometryModified(y,!0),S=!0),f&&V!==G&&(ne||this.isDiscontinuousSegmentParentage(G))&&this.setSegmentParentageBreakVertex(G,!0),D===V&&(D=this.getFirstVertex(P)),re=!1}while(!1);if(re&&(G=this.getPrevVertex(G),G===D))break}}const N=this.getPathSize(P);let F=i&&N<(x?3:2);F&&x&&N===2&&c&&(F=!this.pathHasCurves(P)),F?(P=this.removePath(P),l===0&&(l=-1),s&&!S&&(this.setGeometryModified(y,!0),S=!0)):P=this.getNextPath(P)}}return l}filterClosePoints3D(e,i,n,s,r,o){return K(0),0}hasDegenerateSegments(e){for(let i=this.getFirstGeometry();i!==ae;i=this.getNextGeometry(i))if(bi(this.getGeometryType(i)))for(let n=this.getFirstPath(i);n!==ae;){const s=this.getPathSize(n);if(s===0)return!0;let r=this.getFirstVertex(n);for(let o=0;o<s;o++){const l=this.getNextVertex(r);if(l===ae)break;const c=this.getVertexIndex(r),f=this.getSegmentFromIndex(c);let y=0;if(f!==null){if(y=f.calculateLowerLength2D(),y<=e&&(y=f.calculateUpperLength2D(),y<=e||(y=f.calculateLength2D(),y<=e)))return!0}else{const _=this.getVertexIndex(l);if(y=this.m_vertices.getShortestDistance(c,_),y<=e)return!0}r=l}n=this.getNextPath(n)}return!1}hasDegenerateSegments3D(e,i){return K(0),!1}transferAllDataToTheVertex(e,i){const n=this.getVertexIndex(e),s=this.getVertexIndex(i);if(this.m_weights){const o=this.getWeightWithIndex(n);this.setWeightWithIndex(s,o)}if(this.m_ranks){const o=this.getRankWithIndex(n);this.setRankWithIndex(s,o)}if(this.m_segmentWeights){const o=this.getSegmentWeightWithIndex(n);this.setSegmentWeightWithIndex(s,o)}if(this.m_segmentRanks){const o=this.getSegmentRankWithIndex(n);this.setSegmentRankWithIndex(s,o)}for(let o=0,l=this.m_indices.length;o<l;o++)if(o!==this.m_selectionIndex&&this.m_indices[o]!==null){const c=this.getUserIndex(e,o);c!==-1&&this.setUserIndex(i,o,c)}const r=this.selected(e);r!==this.selected(i)&&(r?this.select(i):this.unselect(i))}splitSegmentAxisAware(e,i,n,s,r){let o=0;const l=this.getNextVertex(e);l===ae&&Je("");const c=this.getVertexIndex(e),f=this.getVertexIndex(l),y=this.getSegmentFromIndex(c);let _=this.m_vertices.getShortestDistance(c,f);const x=this.getPathFromVertex(e),S=this.m_bHasAttributes;S&&y&&(_=y.calculateLength2D());const P=this.getSegmentParentage(e),A=this.getHelperPoint();if(y){let D=0,N=0,F=ae;for(let G=0;G<n;G++){const V=i[G];if(D<V&&V<1){const B=y.cut(D,V);if(s!==null&&(G>0&&B.setStartXY(s[G-1]),B.setEndXY(s[G]),B.normalizeAfterEndpointChange(),N=G),S){const re=_>0?y.calculateSubLengthFromStart(V)/_:0;this.m_vertices.interpolateTwoVertices(c,f,re,A)}A.setXY(B.getEndXY()),F=this.insertVertex(x,l,A),o++;const W=this.getPrevVertex(F),J=this.getVertexIndex(W);this.setSegmentToIndex(J,B),P!==-1&&this.setSegmentParentageAndBreak(F,P,!1),D=V}}if(F!==ae){const G=y.cut(D,1);s!==null&&(G.setStartXY(s[N]),G.normalizeAfterEndpointChange());const V=this.getVertexIndex(F);this.setSegmentToIndex(V,G)}}else{let D=0;for(let N=0;N<n;N++){const F=i[N];if(D<F&&F<1){this.m_vertices.interpolateTwoVertices(c,f,F,A);const G=this.insertVertex(x,l,A);o++,P!==-1&&this.setSegmentParentageAndBreak(G,P,!1)}D=F}}return o}splitSegment(e,i,n,s=null){return this.splitSegmentAxisAware(e,i,n,s,-1)}snapControlPoints(e,i,n){return K(0),!1}snapControlPointsOnSelection(e){if(!this.hasCurves())return!1;let i=0;const n=this.queryVertexIteratorOnSelection();for(let s=n.next();s!==ae;s=n.next()){const r=this.getVertexIndex(s),o=this.getSegmentFromIndex(r);o&&(i|=o.snapControlPoints(e)?1:0)}return i!==0}calculateSubLength2D(e,i,n){return K(0),0}setPoint(e,i,n){if(this.setPointOnly(e,i),this.m_segments!==null){const s=this.getVertexIndex(e),r=this.getSegmentFromIndex(s);r!==null&&(r.setStartXY(i.getXY()),r.normalizeAfterEndpointChange(),n&&r.ensureXYMonotone());const o=this.getPrevVertex(e);if(o!==ae){const l=this.getVertexIndex(o),c=this.getSegmentFromIndex(l);c!==null&&(c.setEndXY(i.getXY()),c.normalizeAfterEndpointChange(),n&&c.ensureXYMonotone())}}}setPointEx(e,i,n,s,r){this.setPoint(e,i,r);const o=this.getVertexIndex(e);this.setWeightWithIndex(o,s),this.setRankWithIndex(o,n)}setPointOnly(e,i){const n=this.getVertexIndex(e);this.m_vertices.setPointByVal(n,i)}setPointOnlyEx(e,i,n,s){K(0)}queryPoint(e,i){const n=this.getVertexIndex(e);this.m_vertices.getPointByVal(n,i)}setXY(e,i){this.setXYCoords(e,i.x,i.y)}setXYCoords(e,i,n){var r;const s=this.getVertexIndex(e);if((r=this.m_vertices)==null||r.setXYCoords(s,i,n),this.m_segments!==null){const o=this.getSegmentFromIndex(s);o!==null&&(o.setStartXYCoords(i,n),o.normalizeAfterEndpointChange());const l=this.getPrevVertex(e);if(l!==ae){const c=this.getVertexIndex(l),f=this.getSegmentFromIndex(c);f!=null&&(f.setEndXYCoords(i,n),f.normalizeAfterEndpointChange())}}}setXYMonotonic(e,i,n){const s=this.getVertexIndex(e);if(this.m_vertices.setXYCoords(s,i,n),this.m_segments!==null){const r=this.getSegmentFromIndex(s);if(r!==null){const l=r.getEndXY();r.setCoordsForIntersector(new Y(i,n),l,!1),r.ensureXYMonotone()}const o=this.getPrevVertex(e);if(o!==ae){const l=this.getVertexIndex(o),c=this.getSegmentFromIndex(l);if(c!==null){const f=c.getStartXY();c.setCoordsForIntersector(f,new Y(i,n),!1),c.ensureXYMonotone()}}}}setXYMonotonicPoint2D(e,i){this.setXYMonotonic(e,i.x,i.y)}queryXY(e,i){const n=this.getVertexIndex(e);return this.m_vertices.queryXY(n,i)}getXY(e){const i=this.getVertexIndex(e);return this.m_vertices.getXY(i)}getXYWithIndex(e){return this.m_xyStream.readPoint2D(2*e)}static setSegDefault(e,i,n){K(0)}setXYZ(e,i,n){K(0)}setXYZCoords(e,i,n,s){K(0)}queryXYZ(e,i){K(0)}getXYZ(e){return K(0),ii.getNAN()}getXYZWithIndex(e){return K(0),ii.getNAN()}mergeVertexDescription(e){this.m_verticesMp.mergeVertexDescription(e),this.m_vertexDescription=this.m_verticesMp.getDescription(),this.m_bHasAttributes=this.m_vertexDescription.getAttributeCount()>1}addAttribute(e){K(0)}getAttributeAsDbl(e,i,n){return this.m_vertices.getAttributeAsDbl(e,this.getVertexIndex(i),n)}queryAttributeAsDbl(e,i,n,s){K(0)}setAttribute(e,i,n,s){K(0)}setAttributeInt(e,i,n,s){K(0)}getVertexDescription(){return this.m_vertexDescription}getMinPathVertexY(e){return K(0),0}getVertexIndex(e){return this.m_vertexIndexList.getField(e,0)}getY(e){const i=this.getVertexIndex(e);return this.m_vertices.queryXY(i,this.m_workPoint2D),this.m_workPoint2D.y}getX(e){return this.getXY(e).x}isEqualXY(e,i){return this.queryXY(e,this.m_workPoint2D),this.queryXY(i,this.m_workPoint2_2D),this.m_workPoint2D.isEqualPoint2D(this.m_workPoint2_2D)}isEqualXYPoint2D(e,i){return this.queryXY(e,this.m_workPoint2D),this.m_workPoint2D.isEqualPoint2D(i)}isEqualXYZPoint3D(e,i){return K(0),!1}setWeight(e,i){i<1&&(i=1);const n=i===1;if(this.m_weights==null){if(n)return;this.m_weights=Gy(this.m_vertices.getPointCount(),1)}const s=this.getVertexIndex(e);if(s>=this.m_weights.size()){if(n)return;this.m_weights.resize(s+1,1)}this.m_weights.write(s,i)}setWeightWithIndex(e,i){i<1&&(i=1);const n=i===1;if(this.m_weights===null){if(n)return;this.m_weights=Gy(this.m_vertices.getPointCount(),1)}if(e>=this.m_weights.size()){if(n)return;this.m_weights.resize(e+1,1)}this.m_weights.write(e,i)}getWeight(e){if(this.m_weights===null)return 1;const i=this.getVertexIndex(e);return i>=this.m_weights.size()?1:this.m_weights.read(i)}getWeightWithIndex(e){return this.m_weights===null||e>=this.m_weights.size()?1:this.m_weights.read(e)}getRank(e){if(this.m_ranks===null)return Vr;const i=this.getVertexIndex(e);return i>=this.m_ranks.size()?Vr:this.m_ranks.read(i)}getRankWithIndex(e){return this.m_ranks===null||e>=this.m_ranks.size()?Vr:this.m_ranks.read(e)}setRank(e,i){i<Vr&&(i=Vr);const n=i===Vr;if(this.m_ranks===null){if(n)return;this.m_ranks=Ya(this.m_vertices.getPointCount(),Vr)}const s=this.getVertexIndex(e);if(s>=this.m_ranks.size()){if(n)return;this.m_ranks.resize(s+1,Vr)}this.m_ranks.write(s,i)}setRankWithIndex(e,i){i<Vr&&(i=Vr);const n=i===Vr;if(this.m_ranks===null){if(n)return;this.m_ranks=Ya(this.m_vertices.getPointCount(),Vr)}if(e>=this.m_ranks.size()){if(n)return;this.m_ranks.resize(e+1,Vr)}this.m_ranks.write(e,i)}setSegmentWeight(e,i){i<1&&(i=1);const n=i===1;if(this.m_segmentWeights===null){if(n)return;this.m_segmentWeights=Gy(this.m_vertices.getPointCount(),1)}const s=this.getVertexIndex(e);if(s>=this.m_segmentWeights.size()){if(n)return;this.m_segmentWeights.resize(s+1,1)}this.m_segmentWeights.write(s,i)}setSegmentWeightWithIndex(e,i){i<1&&(i=1);const n=i===1;if(this.m_segmentWeights==null){if(n)return;this.m_segmentWeights=Gy(this.m_vertices.getPointCount(),1)}if(e>=this.m_segmentWeights.size()){if(n)return;this.m_segmentWeights.resize(e+1,1)}this.m_segmentWeights.write(e,i)}getSegmentWeight(e){if(this.m_segmentWeights===null)return 1;const i=this.getVertexIndex(e);return i>=this.m_segmentWeights.size()?1:this.m_segmentWeights.read(i)}getSegmentWeightWithIndex(e){return this.m_segmentWeights==null||e>=this.m_segmentWeights.size()?1:this.m_segmentWeights.read(e)}getSegmentRank(e){if(this.m_segmentRanks===null)return Hn.st_defaultRank;const i=this.getVertexIndex(e);return i>=this.m_segmentRanks.size()?Hn.st_defaultRank:this.m_segmentRanks.read(i)}getSegmentRankWithIndex(e){return this.m_segmentRanks===null||e>=this.m_segmentRanks.size()?Vr:this.m_segmentRanks.read(e)}setSegmentRank(e,i){i<Vr&&(i=Vr);const n=i===Vr;if(this.m_segmentRanks===null){if(n)return;this.m_segmentRanks=Ya(this.m_vertices.getPointCount(),Vr)}const s=this.getVertexIndex(e);if(s>=this.m_segmentRanks.size()){if(n)return;this.m_segmentRanks.resize(s+1,Vr)}this.m_segmentRanks.write(s,i)}setSegmentRankWithIndex(e,i){K(0)}removeWeights(){K(0),this.m_weights=new fd(0),this.m_segmentWeights=new fd(0)}removeRanks(){K(0),this.m_ranks=new On(0),this.m_segmentRanks=new On(0)}setUserIndex(e,i,n){const s=this.m_indices[i],r=this.getVertexIndex(e);if(s.size()<=r){if(n===-1)return;s.resize(this.m_vertices.getPointCount(),-1)}s.write(r,n)}getUserIndex(e,i){const n=this.getVertexIndex(e),s=this.m_indices[i];return n<s.size()?s.read(n):-1}addToUserIndex(e,i,n){const s=this.m_indices[i],r=this.getVertexIndex(e);s.size()<=r&&s.resize(this.m_vertices.getPointCount(),-1);const o=s.read(r);s.write(r,o+n)}createUserIndex(){for(let i=0;i<this.m_indices.length;i++)if(this.m_indices[i]===null)return this.m_indices[i]=this.allocateIndex(),i;this.m_indices.push(this.allocateIndex());const e=this.m_indices.length-1;return K(e>=0&&e<=Eo()),e}createUserIndexUninitialized(){for(let i=0;i<this.m_indices.length;i++)if(this.m_indices[i]===null)return this.m_indices[i]=this.allocateIndex(!1),i;this.m_indices.push(this.allocateIndex(!1));const e=this.m_indices.length-1;return K(e>=0&&e<=Number.MAX_SAFE_INTEGER),e}fillUserIndexForGeometry(e,i,n){const s=this.m_indices[i],r=s.size();for(let o=this.getFirstPath(e);o!==ae;o=this.getNextPath(o)){let l=this.getFirstVertex(o);for(let c=0,f=this.getPathSize(o);c<f;c++,l=this.getNextVertex(l)){const y=this.getVertexIndex(l);y<r&&s.write(y,n)}}}fillUserIndexForSelection(e,i){K(0)}removeUserIndex(e){for(this.recycleUserIndex(this.m_indices[e]),this.m_indices[e]=null;this.m_indices.length>0&&this.m_indices[this.m_indices.length-1]===null;)this.m_indices.pop()}replaceCurveWithLine(e){if(this.m_segments!==null){const i=this.getVertexIndex(e);this.setSegmentToIndex(i,null)}}queryLineConnector(e,i,n=!1){const s=this.getNextVertex(e);if(s===ae)return!1;if(!this.m_bHasAttributes||n){const r=this.getXY(e);i.setStartXY(r);const o=this.getXY(s);i.setEndXY(o)}else{const r=new Ut({vd:this.getVertexDescription()});this.queryPoint(e,r),i.setStart(r),this.queryPoint(s,r),i.setEnd(r)}return!0}queryLineConnector3D(e,i,n=!1){return K(0),!1}hasCurves(){return this.m_segments!==null}geometryHasCurves(e){return K(0),!1}pathHasCurves(e){if(!this.hasCurves())return!1;const i=this.getFirstVertex(e);if(i===ae)return!1;const n=this.getPathSize(e);let s=i;for(let r=0;r<n;r++,s=this.getNextVertex(s)){const o=this.getSegment(s);if(o!==null&&o.getGeometryType()!==me.enumLine)return!0}return!1}insertPath(e,i){let n=ae;i!==ae?(e!==this.getGeometryFromPath(i)&&Je(""),n=this.getPrevPath(i)):n=this.getLastPath(e);const s=this.newPath(e);return i!==ae&&this.setPrevPath(i,s),this.setNextPath(s,i),this.setPrevPath(s,n),n!==ae?this.setNextPath(n,s):this.setFirstPath(e,s),i===ae&&this.setLastPath(e,s),this.setGeometryPathCount(e,this.getPathCount(e)+1),s}removePath(e){const i=this.getPrevPath(e),n=this.getNextPath(e),s=this.getGeometryFromPath(e);return i!==ae?this.setNextPath(i,n):this.setFirstPath(s,n),n!==ae?this.setPrevPath(n,i):this.setLastPath(s,i),this.clearPath(e),this.setGeometryPathCount(s,this.getPathCount(s)-1),this.freePath(e),n}clearPath(e){const i=this.getFirstVertex(e);if(i!==ae){let n=i;for(let r=0,o=this.getPathSize(e);r<o;r++){const l=n;n=this.getNextVertex(n),this.freeVertex(l)}const s=this.getGeometryFromPath(e);this.setGeometryVertexCount(s,this.getPointCount(s)-this.getPathSize(e))}this.setPathSize(e,0)}getNextPath(e){return this.m_pathIndexList.getField(e,2)}getPrevPath(e){return this.m_pathIndexList.getField(e,1)}getPathSize(e){return this.m_pathIndexList.getField(e,3)}isClosedPath(e){return!!(1&this.getPathFlags(e))}setClosedPath(e,i){if(this.isClosedPath(e)===i)return;if(this.getPathSize(e)>0){const s=this.getFirstVertex(e),r=this.getLastVertex(e);if(i){this.setNextVertex(r,s),this.setPrevVertex(s,r);const o=this.getVertexIndex(r);this.setSegmentToIndex(o,null)}else{this.setNextVertex(r,ae),this.setPrevVertex(s,ae);const o=this.getVertexIndex(r);this.setSegmentToIndex(o,null)}}const n=(1|this.getPathFlags(e))-1;this.setPathFlags(e,n|(i?1:0))}closeAllPaths(e){K(0)}isStrongPathStart(e){return!!(8&this.getPathFlags(e))}isStrongPathEnd(e){return!!(16&this.getPathFlags(e))}setStrongPathStart(e,i){const n=(8|this.getPathFlags(e))-8;this.setPathFlags(e,n|(i?8:0))}setStrongPathEnd(e,i){const n=(16|this.getPathFlags(e))-16;this.setPathFlags(e,n|(i?16:0))}getGeometryFromPath(e){return this.m_pathIndexList.getField(e,7)}isExterior(e){return!!(2&this.getPathFlags(e))}setExterior(e,i){const n=(2|this.getPathFlags(e))-2;this.setPathFlags(e,n|(i?2:0))}getRingArea(e){if(this.isRingAreaValid(e))return this.m_pathAreas[this.getPathIndex(e)];const i=this.getFirstVertex(e);if(i===ae)return 0;const n=this.getXY(i),s=new Br(0),r=this.getPathSize(e);if(r>2){const l=n.clone(),c=l.x,f=l.y;let y=this.getNextVertex(i);const _=this.getXY(y);y=this.getNextVertex(y);const x=Y.getNAN();for(let S=2;S<r;S++,y=this.getNextVertex(y))this.queryXY(y,x),s.pe((x.x-l.x)*(_.y-f)),l.setCoordsPoint2D(_),_.setCoordsPoint2D(x);s.pe((c-l.x)*(_.y-f))}if(this.hasCurves()){let l=i;for(let c=0;c<r;c++,l=this.getNextVertex(l)){const f=this.getSegment(l);if(f===null||f.getGeometryType()===me.enumLine)continue;const y=2*f.calculateArea2DHelper();s.pe(y)}}this.setRingAreaValid(e,!0);const o=.5*s.getResult();return this.m_pathAreas[this.getPathIndex(e)]=o,o}getPathIndexInternal(e){return this.getPathIndex(e)}getPathInternalIndexFromVertex(e){return this.getPathIndex(this.getPathFromVertex(e))}setPathUserIndex(e,i,n){const s=this.m_pathindices[i],r=this.getPathIndex(e);s.size()<this.m_pathAreas.length&&s.resize(this.m_pathAreas.length,-1),s.write(r,n)}getPathUserIndex(e,i){const n=this.getPathIndex(e),s=this.m_pathindices[i];return n<s.size()?s.read(n):-1}createPathUserIndex(){for(let i=0;i<this.m_pathindices.length;i++)if(this.m_pathindices[i]===null)return this.m_pathindices[i]=this.allocatePathIndex(),i;this.m_pathindices.push(this.allocatePathIndex());const e=this.m_pathindices.length-1;return K(e>=0&&e<=Number.MAX_SAFE_INTEGER),e}fillPathUserIndexForGeometry(e,i,n){const s=this.m_pathindices[i],r=s.size();for(let o=this.getFirstPath(e);o!==ae;o=this.getNextPath(o)){const l=this.getPathIndex(o);l<r&&s.write(l,n)}}removePathUserIndex(e){for(this.recyclePathUserIndex(this.m_pathindices[e]),this.m_pathindices[e]=null;this.m_pathindices.length>0&&this.m_pathindices.at(-1)===null;)this.m_pathindices.pop()}movePath(e,i,n){if(n===ae&&Je(""),i===n)return;const s=this.getNextPath(n);let r=this.getPrevPath(n);const o=this.getGeometryFromPath(n);r===ae?this.setFirstPath(o,s):this.setNextPath(r,s),s===ae?this.setLastPath(o,r):this.setPrevPath(s,r),this.setGeometryVertexCount(o,this.getPointCount(o)-this.getPathSize(n)),this.setGeometryPathCount(o,this.getPathCount(o)-1),r=i===ae?this.getLastPath(e):this.getPrevPath(i),this.setPrevPath(n,r),this.setNextPath(n,i),i===ae?this.setLastPath(e,n):this.setPrevPath(i,n),r===ae?this.setFirstPath(e,n):this.setNextPath(r,n),this.setGeometryVertexCount(e,this.getPointCount(e)+this.getPathSize(n)),this.setGeometryPathCount(e,this.getPathCount(e)+1),this.setPathGeometry(n,e)}addVertex(e,i){return this.m_vertices.getPointByVal(this.getVertexIndex(i),this.getHelperPoint()),this.insertVertex_(e,ae,this.getHelperPoint(),!1)}insertVertex(e,i,n){return this.insertVertex_(e,i,n,!0)}removeVertex(e,i){const n=this.getPathFromVertex(e),s=this.getPrevVertex(e),r=this.getNextVertex(e);s!==ae&&this.setNextVertex(s,r);const o=this.getPathSize(n);if(e===this.getFirstVertex(n)&&this.setFirstVertex(n,o>1?r:ae),r!==ae&&this.setPrevVertex(r,s),e===this.getLastVertex(n)&&this.setLastVertex(n,o>1?s:ae),this.hasCurves()&&s!==ae&&r!==ae){const c=this.getVertexIndex(e),f=this.getVertexIndex(s),y=this.getVertexIndex(r);if(i){const _=this.getSegmentFromIndex(f);if(_!==null){const x=this.m_vertices.getXY(y);_.setEndXY(x),_.normalizeAfterEndpointChange()}this.setSegmentToIndex(c,null)}else{const _=this.getSegmentFromIndex(c);if(this.setSegmentToIndex(c,null),_!==null){const x=this.m_vertices.getXY(f);_.setStartXY(x),_.normalizeAfterEndpointChange()}this.setSegmentToIndex(f,_)}}this.setPathSize(n,o-1);const l=this.getGeometryFromPath(n);return this.setGeometryVertexCount(l,this.getPointCount(l)-1),this.freeVertex(e),r}removeVertices(e,i){K(e!==i);const n=this.getPathFromVertex(e),s=this.getPrevVertex(e),r=this.getPrevVertex(i);s!==ae&&this.setNextVertex(s,i);let o=this.getPathSize(n);const l=this.getVertexIndex(e);this.setSegmentToIndex(l,null),this.setPrevVertex(i,s),this.setPrevVertex(e,ae),this.setNextVertex(r,ae);let c=0,f=e;const y=this.getFirstVertex(n);let _=!1;for(;;){const S=this.getNextVertex(f);if(_||(_=y===f),this.freeVertex(f),c++,f===r)break;f=S}o-=c,_&&this.setFirstVertex(n,o>0?i:ae),this.setPathSize(n,o);const x=this.getGeometryFromPath(n);this.setGeometryVertexCount(x,this.getPointCount(x)-c)}getFirstVertex(e){return this.m_pathIndexList.getField(e,4)}getLastVertex(e){return this.m_pathIndexList.getField(e,5)}getNextVertex(e){return this.m_vertexIndexList.getField(e,2)}getPrevVertex(e){return this.m_vertexIndexList.getField(e,1)}getNextVertexEx(e,i){return i>0?this.m_vertexIndexList.getField(e,2):this.m_vertexIndexList.getField(e,1)}getPrevVertexEx(e,i){return i>0?this.m_vertexIndexList.getField(e,1):this.m_vertexIndexList.getField(e,2)}getPathFromVertex(e){return this.m_vertexIndexList.getField(e,3)}addPoint(e,i){return this.insertVertex_(e,ae,i,!1)}getGeometryFromVertex(e){return this.getGeometryFromPath(this.getPathFromVertex(e))}replaceNaNs(e,i){this.m_vertexDescription.hasAttribute(e)||xt(""),this.m_vertices.replaceNaNs(e,i)}removeNaNVertices(){for(let e=this.getFirstGeometry();e!==ae;e=this.getNextGeometry(e))for(let i=this.getFirstPath(e);i!==ae;i=this.getNextPath(i)){let n=this.getFirstVertex(i);for(let s=0,r=this.getPathSize(i);s<r;s++)n=this.getXY(n).isFinite()?this.getNextVertex(n):this.removeVertex(n,!0)}}queryVertexIterator(e=ae){return this.queryVertexIteratorEx(!1,e)}queryVertexIteratorEx(e,i=ae){let n=ae,s=ae,r=ae,o=ae,l=0,c=!1;for(n=i!==ae?i:this.getFirstGeometry();n!==ae;n=this.getNextGeometry(n))if(!e||bi(this.getGeometryType(n))){for(s=this.getFirstPath(n);s!==ae;s=this.getNextPath(s))if(r=this.getFirstVertex(s),o=r,l=0,r!==ae){c=!0;break}if(c||i!==ae)break}return c||(n=ae),gC.create_(this,n,s,r,o,l,e,!1,i!==ae)}queryVertexIteratorOnSelection(e=ae){return this.m_selection?gC.create_(this,e,ae,ae,ae,-1,!1,!0,e!==ae):this.queryVertexIteratorEx(!1,e)}hasSelection(){return this.m_selection}createEmptySelection(){K(0)}removeSelection(){this.m_selection&&(this.m_selectedVertices.length=0,this.removeUserIndex(this.m_selectionIndex),this.m_selectionIndex=-1,this.m_selection=!1,this.m_selectedCount=0)}select(e){return!!this.selected(e)||(this.setUserIndex(e,this.m_selectionIndex,this.m_selectedVertices.length),this.m_selectedVertices.push(e),this.m_selectedCount++,!1)}unselect(e){if(!this.m_selection)return;const i=this.getUserIndex(e,this.m_selectionIndex);i>=0&&(this.m_selectedVertices[i]=ae,this.setUserIndex(e,this.m_selectionIndex,-1),this.m_selectedCount--)}selected(e){return!this.m_selection||this.selected_(e)}getSelectedCount(){return this.m_selection?this.m_selectedCount:this.getTotalPointCount()}createSelectionForCrackingAndClustering(e,i){return K(0),!1}peelALoop(e,i){this.peelALoop_(e,i,!1)}peelALoopIntoAPath(e,i){return this.peelALoop_(e,i,!0)}applyTransformation(e){if(this.m_verticesMp.applyTransformation(e),this.m_segments!==null)for(let i=0,n=this.m_segments.length;i<n;i++)this.m_segments[i]&&this.m_segments[i].applyTransformation(e)}setGeometryType(e,i){this.m_geometryIndexList.setField(e,2,i)}splitSegmentWithIntersector(e,i,n,s,r){s?this.splitSegmentForward(e,i,n,!0,r):this.splitSegmentBackward(e,i,n,!0,r)}setPrevVertex(e,i){this.m_vertexIndexList.setField(e,1,i)}setNextVertex(e,i){this.m_vertexIndexList.setField(e,2,i)}setPathToVertex(e,i){this.m_vertexIndexList.setField(e,3,i)}setPathSize(e,i){this.m_pathIndexList.setField(e,3,i)}setFirstVertex(e,i){this.m_pathIndexList.setField(e,4,i)}setLastVertex(e,i){this.m_pathIndexList.setField(e,5,i)}getSegment(e){if(this.m_segments!=null){const i=this.getVertexIndex(e);return this.getSegmentFromIndex(i)}return null}isCurve(e){return K(0),!1}querySegment(e,i,n=!0,s=!1){const r=this.getNextVertex(e);if(r===ae)return!1;const o=this.getSegment(e);if(!o)return!n&&(this.queryLineConnector(e,i.createLine(),s),!0);if(i.copyFrom(o,!0),s)return!0;if(this.m_vertexDescription.getAttributeCount()>1){const l=this.getHelperPoint();this.queryPoint(e,l),i.get().setStart(l),this.queryPoint(r,l),i.get().setEnd(l)}return!0}getSegmentFromIndex(e){return(this.m_segments!==null&&this.m_segments.length>e?this.m_segments[e]:null)||null}getAndClearSegmentFromIndex(e){return(this.m_segments!==null&&this.m_segments.length>e?this.m_segments[e]:null)||null}setSegmentToIndex(e,i){if(this.m_bHasForceSetEnvelope=!1,this.m_segments===null){if(!i)return;this.m_segments=[],this.m_segments.length=this.m_vertices.getPointCount()}e>=this.m_segments.length&&(this.m_segments.length=e+1),this.m_segments[e]=i}setGeometryPathCount(e,i){this.m_geometryIndexList.setField(e,6,i)}setGeometryVertexCount(e,i){this.m_geometryIndexList.setField(e,5,i)}ringParentageCheckInternal(e,i){return K(0),!1}reverseRingInternal(e){const i=this.hasCurves(),n=this.hasSegmentParentage();let s=null,r=-1,o=e;if(i){const l=this.getVertexIndex(o);s=this.getAndClearSegmentFromIndex(l)}n&&(r=this.getSegmentParentage(o));do{const l=this.getPrevVertex(o),c=this.getNextVertex(o);if(this.setNextVertex(o,l),this.setPrevVertex(o,c),i){const f=this.getVertexIndex(c),y=this.getSegmentFromIndex(f);s&&s.reverse(),this.setSegmentToIndex(f,s),s=y}if(n){const f=this.getSegmentParentage(c);this.setSegmentParentagePreserveBreak(c,r),r=f}o=c}while(o!==e);this.dbgVerifyIntegrity(e)}setTotalPointCount(e){this.m_pointCount=e}removePathOnly(e){const i=this.getPrevPath(e),n=this.getNextPath(e),s=this.getGeometryFromPath(e);i!==ae?this.setNextPath(i,n):this.setFirstPath(s,n),n!==ae?this.setPrevPath(n,i):this.setLastPath(s,i),this.setFirstVertex(e,ae),this.setLastVertex(e,ae),this.freePath(e)}insertClosedPath(e,i,n,s,r){const o=this.insertPath(e,ae);let l=0,c=n;for(r[0]=!1;;){c===s&&(r[0]=!0),this.setPathToVertex(c,o),l++;const f=this.getNextVertex(c);if(f===n)break;c=f}return this.setClosedPath(o,!0),this.setPathSize(o,l),r[0]&&(n=s),this.setFirstVertex(o,n),this.setLastVertex(o,this.getPrevVertex(n)),this.setRingAreaValid(o,!1),o}findVertex2D(e,i){return K(0),0}findVertex3D(e,i,n){return K(0),0}dbgVerifyMonotone(){}dbgCheckSelection(){}dbgVerifySegment(e){}dbgVerifyIntegrity(e,i=!0){}dbgVerifyVertexCounts(){}dbgVerifyCurves(){}dbgDumpGeometry(e,i){K(0)}removeVertexInternal(e,i){const n=this.getPrevVertex(e),s=this.getNextVertex(e);if(n!==ae&&this.setNextVertex(n,s),s!==ae&&this.setPrevVertex(s,n),this.hasCurves()&&n!==ae&&s!==ae){const r=this.getVertexIndex(e),o=this.getVertexIndex(n),l=this.getVertexIndex(s);if(i){const c=this.getSegmentFromIndex(o);if(c!==null){const f=this.m_vertices.getXY(l);c.setEndXY(f),c.normalizeAfterEndpointChange()}this.setSegmentToIndex(r,null)}else{const c=this.getSegmentFromIndex(r);if(this.setSegmentToIndex(r,null),c!==null){const f=this.m_vertices.getXY(o);c.setStartXY(f),c.normalizeAfterEndpointChange()}this.setSegmentToIndex(o,c)}}return this.freeVertex(e),s}isRingAreaValid(e){return!!(4&this.getPathFlags(e))}setRingAreaValid(e,i){const n=(4|this.getPathFlags(e))-4;this.setPathFlags(e,n|(i?4:0))}compareVerticesSimpleY(e,i){return this.queryXY(e,this.m_workPoint2D),this.queryXY(i,this.m_workPoint2_2D),this.m_workPoint2D.compare(this.m_workPoint2_2D)}compareVerticesSimpleY3D(e,i){return this.getXYZ(e).compare(this.getXYZ(i))}compareVerticesSimpleX(e,i){return this.getXY(e).compareX(this.getXY(i))}sortVerticesSimpleByYHeapMerge(e,i){K(0)}sortVerticesSimpleByY(e,i,n){this.m_bucketSort.sort(e,i,n,new _it(this))}sortVerticesSimpleByX(e,i,n){K(0)}sortVerticesSimpleByY3D(e,i,n){K(0)}snapVertexForPoleClipping(e,i){const n=this.getPrevVertex(e);n!==ae&&this.replaceCurveWithLine(n),this.getNextVertex(e)!==ae&&this.replaceCurveWithLine(e);const s=new Y;this.queryXY(e,s),s.y=i,this.setXY(e,s)}setSegmentParentageAndBreak(e,i,n=!0){if(this.m_segmentParentageIndex===-1){if(i===-1)return;this.m_segmentParentageIndex=this.createUserIndex()}i>=0&&(K(i<=_a()>>1),i<<=1,i|=n?1:0),this.setUserIndex(e,this.m_segmentParentageIndex,i)}setSegmentParentagePreserveBreak(e,i){if(K(i>=-1),this.m_segmentParentageIndex===-1){if(i===-1)return;this.m_segmentParentageIndex=this.createUserIndex()}i>=0&&(K(i<=_a()>>1),i<<=1,i|=this.getSegmentParentageBreakVertex(e)?1:0),this.setUserIndex(e,this.m_segmentParentageIndex,i)}getSegmentParentage(e){if(this.m_segmentParentageIndex===-1)return-1;const i=this.getUserIndex(e,this.m_segmentParentageIndex);return i<0?i:i>>1}getOriginalSegmentInfo(e){if(this.m_segmentParentageIndex!==-1){const i=this.getSegmentParentage(e);return new hq(i)}return new hq(-1)}setSegmentParentageBreakVertex(e,i){if(this.m_segmentParentageIndex===-1)return;let n=this.getUserIndex(e,this.m_segmentParentageIndex);n<0||!!(1&n)!==i&&(i?n|=1:n&=_a()>>1<<1,this.setUserIndex(e,this.m_segmentParentageIndex,n))}getSegmentParentageBreakVertex(e){if(this.m_segmentParentageIndex===-1)return!0;const i=this.getUserIndex(e,this.m_segmentParentageIndex);return i<0||!!(1&i)}isDiscontinuousSegmentParentage(e){const i=this.getPrevVertex(e);return i===ae?!1:this.getSegmentParentage(i)!==this.getSegmentParentage(e)}setCurveStitcherPointer(e){this.m_curveStitcher=e}hasSegmentParentage(){return this.m_segmentParentageIndex!==-1}deleteSegmentParentage(){this.m_segmentParentageIndex!==-1&&(this.removeUserIndex(this.m_segmentParentageIndex),this.m_segmentParentageIndex=-1),this.m_curveStitcher=null}clearSegments(){this.m_segments=null}}Hn.st_defaultRank=1;class zp{constructor(e,i,n){e===void 0?(this.x=new Be,this.y=new Be,this.z=new Be):e instanceof ii?(this.x=new Be(e.x),this.y=new Be(e.y),this.z=new Be(e.z)):e instanceof Be?(this.x=e.clone(),this.y=i.clone(),this.z=n.clone()):Je("EPoint3D constructor")}dotProduct(e){return this.x.mulE(e.x).addE(this.y.mulE(e.y)).addE(this.z.mulE(e.z))}crossProduct(e){return new zp(this.y.mulE(e.z).subE(this.z.mulE(e.y)),this.z.mulE(e.x).subE(this.x.mulE(e.z)),this.x.mulE(e.y).subE(this.y.mulE(e.x)))}crossProductVector(e){const i=this.y.mulE(e.z).subE(e.y.mulE(this.z)),n=e.x.mulE(this.z).subE(this.x.mulE(e.z)),s=this.x.mulE(e.y).subE(e.x.mulE(this.y));return new zp(i,n,s)}sqrLength(){return this.x.mulE(this.x).addE(this.y.mulE(this.y)).addE(this.z.mulE(this.z))}length(){return this.sqrLength().sqrt()}static distance(e,i){return e.sub(i).length()}negate(){return new zp(this.x.negate(),this.y.negate(),this.z.negate())}add(e){return new zp(this.x.addE(e.x),this.y.addE(e.y),this.z.addE(e.z))}sub(e){return new zp(this.x.subE(e.x),this.y.subE(e.y),this.z.subE(e.z))}subThis(e){return this.x.subThisE(e.x),this.y.subThisE(e.y),this.z.subThisE(e.z),this}addThis(e){return this.x.addThisE(e.x),this.y.addThisE(e.y),this.z.addThisE(e.z),this}mul(e){return new zp(this.x.mulE(e),this.y.mulE(e),this.z.mulE(e))}div(e){return new zp(this.x.divE(e),this.y.divE(e),this.z.divE(e))}eq(e){return this.x.eq(e.x)&&this.y.eq(e.y)&&this.z.eq(e.z)}isZero(){return this.x.isZero()&&this.y.isZero()&&this.z.isZero()}value(){return ii.construct(this.x.value(),this.y.value(),this.z.value())}}class xit{constructor(e){this.m_origin=new ii,this.m_normal=new ii,this.m_axisX=new ii,this.m_axisY=new ii,K(0)}assign(e){return K(0),this}set(e,i,n,s){K(0)}setFromPoints(e,i,n){return K(0),!1}getCoord(e,i){return K(0),{}}getCoord2D(e){return K(0),{}}getCoordX(e,i){return K(0),0}getCoordY(e,i){return K(0),0}getCoordZ(e,i){return K(0),0}setPreferredAxisX(e){K(0)}getOrigin(){return K(0),{}}getNormal(){return K(0),{}}getAxisX(){return this.m_axisX.clone()}getAxisY(){return this.m_axisY.clone()}setAxisX(e,i=!1){K(0)}setAxisY(e,i=!1){K(0)}recalculateAxisY(){K(0)}setOrigin(e){K(0)}setNormal(e,i){K(0)}intersect(e,i){return K(0),!1}intersectLine(e){return K(0),0}intersectLineEx(e,i){return K(0),0}closestCoordinate(e){return K(0),{}}projectVector(e){return K(0),{}}signedDistance(e){return K(0),0}distance(e){return K(0),0}}function wit(t,e){return!1}function wye(t,e,i,n,s=100,r=wit){let o,l,c,f,y,_,x,S,P;K(n>0);let A,D,N,F=0,G=0;const V=Vz();e>i&&(i=Et(e,e=i));const B=t(e),W=t(i);B<W?(o=l=c=e,f=y=_=B):(o=l=c=i,f=y=_=W);let J=0;for(;J<s&&(N=.5*(i-e),P=e+N,A=n*(Math.abs(o)+.25),D=2*A,!(r(o,f)||Math.abs(o-P)<=D-N));++J){if(Math.abs(G)>A){const re=(o-l)*(f-_);let ne=(o-c)*(f-y),oe=(o-c)*ne-(o-l)*re;ne=2*(ne-re),ne>0&&(oe=-oe),ne=Math.abs(ne);const pe=G;G=F,Math.abs(oe)>=Math.abs(ne*pe*.5)||oe<=ne*(e-o)||oe>=ne*(i-o)?(G=o>=P?e-o:i-o,F=Vz()*G):(F=oe/ne,S=o+F,(S-e<D||i-S<D)&&(F=P-o<0?-Math.abs(A):Math.abs(A)))}else G=o>=P?e-o:i-o,F=G*V;S=o+F,x=t(S),x<f?(S>=o?e=o:i=o,c=l,l=o,o=S,_=y,y=f,f=x):(S<o?e=S:i=S,x<=y||l===o?(c=l,l=S,_=y,y=x):(x<=_||c===o||c===l)&&(c=S,_=x))}return ar(o,f)}function Sit(t,e,i){return t>i?t-=Math.ceil((t-i)/TS)*TS:t<e&&(t+=Math.ceil((e-t)/TS)*TS),t}function vl(t,e,i){return Eit(t,e,i,0)}function Eit(t,e,i,n){const s=i.x,r=i.y;return Sye(t,e,Math.cos(s),Math.sin(s),Math.cos(r),Math.sin(r),n)}function Cit(t,e,i,n,s,r){return Sye(t,e,i,n,s,r,0)}function Sye(t,e,i,n,s,r,o){const l=t/Math.sqrt(1-e*r*r),c=l+o,f=c*s*i,y=c*s*n,_=(l*(1-e)+o)*r;return ii.construct(f,y,_)}function tne(t,e,i){const n=new Be,s=new Be,r=new Be,o=new Be;n.setCos(i.x),s.setSin(i.x),r.setCos(i.y),o.setSin(i.y);const l=o.negate().mulE(o.mul(e)).add(1).sqrt(),c=new Be(t).divE(l),f=c.mulE(r).mulE(n),y=c.mulE(r).mulE(s),_=c.mul(1-e).mulE(o);return new zp(f,y,_)}function yC(t,e,i){const n=i.x,s=i.y,r=i.z,o=Math.atan2(s,n),l=Math.sqrt(n*n+s*s),c=Math.atan2(r,(1-e)*l);return Y.construct(o,c)}function sO(t,e,i){const n=1-e,s=t/Math.sqrt(Xi(i.x)+Xi(i.y)+Xi(i.z)/n);return i.mul(s)}function Pit(t,e,i,n,s){const r=vl(t,e,i),o=vl(t,e,n);return yC(t,e,ii.lerp(r,o,s))}function Tit(t,e,i,n){const s={stack:[],error:void 0,hasError:!1};try{const r=sc(s,new Zh,!1);return B0.geodeticDistance(t,e,i.x,i.y,n.x,n.y,r,null,null,Vi.PE_LINETYPE_GEODESIC),r.val}catch(r){s.error=r,s.hasError=!0}finally{_m(s)}}function Iit(t,e,i,n,s){switch(K(i.isFinite()&&n.isFinite()),s){case 0:return Tit(t,e,i,n);case 1:return Ait(t,e,i);case 2:case 3:{const r=vl(t,e,i),o=vl(t,e,n);return ii.distance(r,o)}default:Bn("")}}function ine(t,e,i,n,s,r=0,o){if(r===2||r===3)return Mit(t,e,i,n,s,r===3);const l=yC(t,e,i),c=y=>{const _=yC(t,e,ii.lerp(n,s,y));return Iit(t,e,l,_,r)},f=ii.distance(n,s);if(f>0){const y=Eye(t,f),{first:_,second:x}=wye(c,0,1,y);return ar(_,x)}{const y=c(0);return ar(.5,y)}}function Mit(t,e,i,n,s,r=!1,o){const l=sO(t,e,i);if(r){const y=new xit({pt0:new ii(0,0,0),pt1:n,pt2:s}),_=y.closestCoordinate(i),x=y.closestCoordinate(n),S=y.closestCoordinate(s),P=Y.getClosestCoordinate(x,S,_),A=sO(t,e,ii.lerp(n,s,P)),D=ii.distance(A,l);return ar(P,D)}const c=y=>{const _=sO(t,e,ii.lerp(n,s,y));return ii.distance(_,l)},f=ii.distance(n,s);if(f>0){const y=Eye(t,f),{first:_,second:x}=wye(c,0,1,y);return ar(_,x)}{const y=ii.distance(i,n);return ar(.5,y)}}function Ait(t,e,i,n){const s={stack:[],error:void 0,hasError:!1};try{const r=sc(s,new Zh,!1);return B0.greatEllipticDistance(t,e,i.x,i.y,i.x,i.y,r,null,null),r.val}catch(r){s.error=r,s.hasError=!0}finally{_m(s)}}function kit(t,e,i,n,s){if(Math.abs(i.x-n.x)>Math.PI||Math.abs(i.y)>Cn||Math.abs(n.y)>Cn||(Math.abs(i.y)===Cn||Math.abs(n.y)===Cn)&&i.x!==n.x)return Number.NaN;const{first:r,second:o}=rQe(i.x,n.x);let l=s;if(l=Sit(l,r,o),!Ze.construct(i.x,n.x).containsCoordinate(l))return Number.NaN;const c=Ht.constructPoint2D(i),f=Ht.constructPoint2D(n),y=tne(1,e,c),_=tne(1,e,f),x=y.crossProductVector(_);if(x.z.isZero())return i.y;const S=x.x.divE(x.z.negate()),P=x.y.divE(x.z.negate()),A=S.mulE(S).addE(P.mulE(P)).sqrt();if(A.isZero()||S.isZero()&&P.isZero())return i.y;const D=Math.atan2(P.value(),S.value());let N=Math.atan2(A.value()*Math.cos(D-l),1-e);const F=vl(1,e,Y.construct(l,N)),G=ii.construct(F.x,F.y,-F.z),V=x.value().dotProduct(F),B=x.value().dotProduct(G);return Math.abs(B)<Math.abs(V)&&(N=-N),N}function Dit(t,e){return t*Math.sqrt(1-e)}function Nit(t,e){return(1-e)*t}function nne(t,e,i){const n=i/(2*Nit(t,e)),s=n*n;return i*(1-s*(.16666666666666666-.008333333333333333*s))}function Eye(t,e){if(e!==0){const i=t*gQe()/e;return Math.min(i,1e-10)}return 0}function bn(t,e,i,n,s){return Cye(t,e,null,i,n,s)}function Cye(t,e,i,n,s,r){const o=t.getGeometryType();if(o===me.enumPoint){const y=t.getXY();return e.contains(y)?t:t.createInstance()}if(o===me.enumEnvelope){const y=xe.constructEmpty();if(t.queryEnvelope(y),y.intersect(e)){const _=t.clone();return _.setEnvelope(y),_}return t.createInstance()}if(t.isEmpty())return t;if(e.isEmpty())return t.createInstance();const l=e.clone();{const y=new xe;if(t.queryLooseEnvelope(y),l.containsEnvelope(y))return t;if(!l.isIntersecting(y))return t.createInstance();s===0&&(y.intersect(l),y.inflate(Math.max(.1*y.maxDimension(),1)),y.intersect(l),l.assign(y))}let c=n;if((i!==null||Number.isNaN(c))&&(c=Js(i,l,!1).total()),o===me.enumGeometryCollection){const y=t,_=t.createInstance();for(let x=0,S=y.getGeometryCount();x<S;x++){const P=y.getGeometry(x);if(P.isEmpty())continue;const A=bn(P,l,c,s,r);A.isEmpty()||(A===P?_.addGeometry(A.clone()):_.addGeometry(A))}return _}rl(o)||Je("Clip: geometry not supported");const f=t.getImpl().getAccelerators();if(f!==null){const y=f.getRasterizedGeometry();K(y===null)}switch(o){case me.enumMultiPoint:{const y=t;let _;const x=y.getPointCount(),S=y.getImpl().getAttributeStreamRef(0);let P=0;for(let A=0;A<x;A++){const D=S.readPoint2D(2*A);l.contains(D)||(P===0&&(_=y.createInstance()),P<A&&_.addPoints(y,P,A),P=A+1)}return P>0&&_.addPoints(y,P,x),P===0?y:(K(_!==null),_)}case me.enumPolygon:case me.enumPolyline:return $it(t,l,c,s,r);default:xt("")}}function Oit(t,e,i,n,s,r){const o=new Ac(e,r),l=new xe;return t.queryLooseEnvelope(l),e.containsEnvelope(l)?t:e.isIntersecting(l)?o.clipPolesOut(t,s):t.createInstance()}function $it(t,e,i,n,s){return new Ac(e,s).clipMultiPath2(t,i,n)}class Ac{constructor(e,i){this.m_shape=new Hn,this.m_geometry=ae,this.m_verticesOnExtentIndex=-1,this.m_verticesOnExtent=[],this.m_progressCounter=0,this.m_extent=new xe(e),this.m_progressTracker=i}progress_(){}clipMultiPath2(e,i,n){return e.getGeometryType()===me.enumPolygon?this.clipPolygonOrProjectedPolyline2(e,n):this.clipPolyline(e,i)}clipPolygonOrProjectedPolyline2(e,i){const n=e.getGeometryType()===me.enumPolyline;if(this.m_extent.width()===0||this.m_extent.height()===0)return e.createInstance();const s=xe.constructEmpty();e.queryLooseEnvelope(s),this.m_geometry=n?this.m_shape.addGeometry(e):this.m_shape.addGeometry(e,this.m_extent);const r=xe.constructEmpty(),o=xe.constructEmpty(),l=new Y,c=new Y,f=new Array(9),y=new Array(9),_=Ge(Y,9);let x=null;const S=new ni,P=[];let A=!1;for(let N=0;!A&&N<4;N++){let F=!1;const G=!!(1&N);let V=0;switch(N){case 0:V=this.m_extent.xmin,F=s.xmin<=V&&s.xmax>=V;break;case 1:V=this.m_extent.ymin,F=s.ymin<=V&&s.ymax>=V;break;case 2:V=this.m_extent.xmax,F=s.xmin<=V&&s.xmax>=V;break;case 3:V=this.m_extent.ymax,F=s.ymin<=V&&s.ymax>=V}if(F){A=!0;for(let B=this.m_shape.getFirstPath(this.m_geometry);B!==ae;){let W=!0,J=-1,re=-1;const ne=this.m_shape.getFirstVertex(B);let oe=ne;do{this.progress_(),x=this.m_shape.getSegment(oe);let pe=x;if(pe===null){const de=this.m_shape.getNextVertex(oe);if(de===ae){K(n),J===0&&P.push(oe);break}this.m_shape.queryXY(oe,l),S.setStartXY(l),this.m_shape.queryXY(de,c),S.setEndXY(c),pe=S}pe.queryLooseEnvelope(r);let ce=Ac.checkSegmentIntersection(r,N,V);pe.isCurve()&&ce===0&&pe.isCurve()&&(S.setStartXY(pe.getStartXY()),S.setEndXY(pe.getEndXY()),this.m_shape.replaceCurveWithLine(oe),pe=S,S.queryEnvelope(r),ce=Ac.checkSegmentIntersection(r,N,V));let ue=0,se=ae;if(ce===-1){const de=pe.intersectionWithAxis2D(G,V,f,y);if(de>0){let Re=null;if(pe.isCurve()){Re=_,K(de<=9);for(let $e=0;$e<de;$e++)G?_[$e].setCoords(f[$e],V):_[$e].setCoords(V,f[$e]);ue=this.m_shape.splitSegmentAxisAware(oe,y,de,Re,G?1:0)}else ue=this.m_shape.splitSegmentAxisAware(oe,y,de,null,-1)}else ue=0;ue+=1;let Se=oe,Pe=this.m_shape.getNextVertex(Se);pe=null;for(let Re=0;Re<ue;Re++){this.m_shape.queryXY(Se,l),this.m_shape.queryXY(Pe,c),x=this.m_shape.getSegment(Se);let $e=x;$e===null&&(S.setStartXY(l),S.setEndXY(c),$e=S),$e.queryEnvelope(o);let we=Ac.checkSegmentIntersection(o,N,V);$e.isCurve()&&we===0&&(this.m_shape.replaceCurveWithLine(Se),S.setStartXY(l),S.setEndXY(c),$e=S,$e.queryEnvelope(o),we=Ac.checkSegmentIntersection(o,N,V)),we===-1&&(G?Math.abs(l.y-V)<Math.abs(c.y-V)?(l.y=V,this.m_shape.setXY(Se,l)):(c.y=V,this.m_shape.setXY(Pe,c)):Math.abs(l.x-V)<Math.abs(c.x-V)?(l.x=V,this.m_shape.setXY(Se,l)):(c.x=V,this.m_shape.setXY(Pe,c)),x=this.m_shape.getSegment(Se),$e=x,$e===null&&(S.setStartXY(l),S.setEndXY(c),$e=S),$e.queryEnvelope(o),we=Ac.checkSegmentIntersection(o,N,V),we===-1&&(we=Ac.checkSegmentIntersectionLoose(o,N,V)));const Fe=J;J=we,re===-1&&(re=J),Fe===0&&J===1||Fe===1&&J===0||Fe===0&&J===0&&P.push(Se),J===1&&(A=!1,W=!1),Se=Pe,se=Se,Pe=this.m_shape.getNextVertex(Pe)}}if(ue===0){const de=J;J=ce,re===-1&&(re=J),de===0&&J>=1||de>=1&&J===0||de===0&&J===0&&P.push(oe),J===1&&(A=!1,W=!1),se=this.m_shape.getNextVertex(oe)}if(oe=se,P.length>=256){for(let de=1,Se=P.length-1;de<Se;de++){const Pe=P[de];n?this.m_shape.snapVertexForPoleClipping(Pe,V):this.m_shape.removeVertex(Pe,!1)}P[1]=P.at(-1),P.length=2}}while(oe!==ne);if(!W){re!==0||!n&&J!==0&&J!==2||P.push(ne);for(let pe=0,ce=P.length;pe<ce;pe++){const ue=P[pe];n?this.m_shape.snapVertexForPoleClipping(ue,V):this.m_shape.removeVertex(ue,!1)}}P.length=0,B=W||this.m_shape.getPathSize(B)===0?this.m_shape.removePath(B):this.m_shape.getNextPath(B)}}}if(A)return e.createInstance();x=null,n?this.removeSpikesAlongPoles():this.resolveBoundaryOverlaps(),i>0&&this.densifyAlongClipExtent(i);const D=this.m_shape.getGeometry(this.m_geometry);return D.getGeometryType()===me.enumPolygon&&D.setFillRule(e.getFillRule()),D}clipPolyline(e,i){const n=xe.constructEmpty(),s=xe.constructEmpty(),r=new Array(9),o=new Array(9),l=new Qt;let c=e;const f=xe.constructEmpty();e.queryLooseEnvelope(f);for(let y=0;y<4;y++){let _=!1;const x=!!(1&y);let S=0;switch(y){case 0:S=this.m_extent.xmin,_=f.xmin<=S&&f.xmax>=S;break;case 1:S=this.m_extent.ymin,_=f.ymin<=S&&f.ymax>=S;break;case 2:S=this.m_extent.xmax,_=f.xmin<=S&&f.xmax>=S;break;case 3:S=this.m_extent.ymax,_=f.ymin<=S&&f.ymax>=S}if(!_)continue;const P=c;c=e.createInstance();const A=P.getImpl().querySegmentIterator();A.resetToFirstPath();const D=new Y,N=new Y;for(;A.nextPath();){let F=-1,G=!0;for(;A.hasNextSegment();){this.progress_();const V=A.nextSegment(),B=V.isDegenerate(0);V.queryLooseEnvelope(n);const W=Ac.checkSegmentIntersection(n,y,S);if(W===-1){const J=V.intersectionWithAxis2D(x,S,r,o);let re=0;D.assign(V.getStartXY());for(let ne=0;ne<=J;ne++){const oe=ne<J?o[ne]:1;if(re===oe)continue;V.queryCut(re,oe,l,!1);const pe=l.get();let ce=!1;if(pe.getStartXY().equals(D)||(pe.setStartXY(D),ce=!0),ne<J&&(x?(N.x=r[ne],N.y=S):(N.x=S,N.y=r[ne]),pe.getEndXY().equals(N)||(pe.setEndXY(N),ce=!0)),ce&&pe.normalizeAfterEndpointChange(),!B&&pe.isDegenerate(0))continue;pe.queryEnvelope(s);let ue=Ac.checkSegmentIntersection(s,y,S);if(ue===-1){const se=pe.getStartXY(),de=pe.getEndXY();ce=!1,x?Math.abs(se.y-S)<Math.abs(de.y-S)?(se.y=S,pe.setStartXY(se),se.equals(pe.getStartXY())||(pe.setStartXY(se),ce=!0)):(de.y=S,de.equals(pe.getEndXY())||(pe.setEndXY(de),ce=!0)):Math.abs(se.x-S)<Math.abs(de.x-S)?(se.x=S,se.equals(pe.getStartXY())||(pe.setStartXY(se),ce=!0)):(de.x=S,de.equals(pe.getEndXY())||(pe.setEndXY(de),ce=!0)),ce&&pe.normalizeAfterEndpointChange(),pe.queryEnvelope(s),ue=Ac.checkSegmentIntersection(s,y,S),ue===-1&&(ue=Ac.checkSegmentIntersectionLoose(s,y,S))}D.assign(pe.getEndXY()),re=oe,F=ue,F>=1?(c.addSegment(pe,G),G=!1):G=!0}}else F=W,F>=1?(c.addSegment(V,G),G=!1):G=!0}}}return c}static checkSegmentIntersection(e,i,n){switch(i){case 0:return e.xmin<n&&e.xmax<=n?0:e.xmin>=n?e.xmax===n?2:1:-1;case 1:return e.ymin<n&&e.ymax<=n?0:e.ymin>=n?e.ymax===n?2:1:-1;case 2:return e.xmin>=n&&e.xmax>n?0:e.xmax<=n?e.xmin===n?2:1:-1;case 3:return e.ymin>=n&&e.ymax>n?0:e.ymax<=n?e.ymin===n?2:1:-1}return K(0),0}static checkSegmentIntersectionLoose(e,i,n){return K(0),0}resolveBoundaryOverlaps(){this.m_verticesOnExtentIndex=-1,this.splitSegments(!1,this.m_extent.xmin),this.splitSegments(!1,this.m_extent.xmax),this.splitSegments(!0,this.m_extent.ymin),this.splitSegments(!0,this.m_extent.ymax),this.m_verticesOnExtent.length=0,this.m_verticesOnExtentIndex=this.m_shape.createUserIndex();const e=new Y;for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;i=this.m_shape.getNextPath(i)){let n=this.m_shape.getFirstVertex(i);for(let s=0,r=this.m_shape.getPathSize(i);s<r;s++,n=this.m_shape.getNextVertex(n))this.progress_(),this.m_shape.queryXY(n,e),this.m_extent.xmin!==e.x&&this.m_extent.xmax!==e.x&&this.m_extent.ymin!==e.y&&this.m_extent.ymax!==e.y||(this.m_shape.setUserIndex(n,this.m_verticesOnExtentIndex,this.m_verticesOnExtent.length),this.m_verticesOnExtent.push(n))}this.dbgCheckPathFirst(),this.resolveOverlaps(!1,this.m_extent.xmin),this.dbgCheckPathFirst(),this.resolveOverlaps(!1,this.m_extent.xmax),this.dbgCheckPathFirst(),this.resolveOverlaps(!0,this.m_extent.ymin),this.dbgCheckPathFirst(),this.resolveOverlaps(!0,this.m_extent.ymax),this.fixPaths()}densifyAlongClipExtent(e){const i=new Y(0,0),n=new Y(0,0),s=new Array(2048);for(let r=this.m_shape.getFirstPath(this.m_geometry);r!==ae;r=this.m_shape.getNextPath(r)){const o=this.m_shape.getFirstVertex(r);let l=o;do{const c=this.m_shape.getNextVertex(l);this.m_shape.queryXY(l,i);let f=-1;if(i.x===this.m_extent.xmin?(this.m_shape.queryXY(c,n),n.x===this.m_extent.xmin&&(f=1)):i.x===this.m_extent.xmax&&(this.m_shape.queryXY(c,n),n.x===this.m_extent.xmax&&(f=1)),i.y===this.m_extent.ymin?(this.m_shape.queryXY(c,n),n.y===this.m_extent.ymin&&(f=0)):i.y===this.m_extent.ymax&&(this.m_shape.queryXY(c,n),n.y===this.m_extent.ymax&&(f=0)),f===-1){l=c;continue}if(this.isCurve(l)){l=c;continue}const y=i.clone(),_=new Y(0,0);if(f){const P=i.y-this.m_extent.ymin;_.y=ws(n.y-i.y),y.y=e*dm(Math.floor(Math.abs(P)/e),P)+this.m_extent.ymin,_.y<0&&(y.y+=e)}else{const P=i.x-this.m_extent.xmin;_.x=ws(n.x-i.x),y.x=e*dm(Math.floor(Math.abs(P)/e),P)+this.m_extent.xmin,_.x<0&&(y.x+=e)}const x=f?n.y-i.y:n.x-i.x,S=Math.abs(x);if(S/e>65536&&xt(""),S>0){const P=Math.trunc(S/e)+2;s.length<P&&(s.length=P);let A=0;for(let D=0;;D++){const N=y.add(_.mul(D*e)),F=(f?N.y-i.y:N.x-i.x)/x;if(F>=1)break;F<=0||(K(A<=s.length),s[A]=F,A++)}A!==0&&this.m_shape.splitSegment(l,s,A)}l=c}while(l!==o)}}splitSegments(e,i){let n=-1;const s=new Y,r=[];for(let P=this.m_shape.getFirstPath(this.m_geometry);P!==ae;P=this.m_shape.getNextPath(P)){let A=this.m_shape.getFirstVertex(P),D=ae;for(let N=0,F=this.m_shape.getPathSize(P);N<F;N++,A=D)if(this.progress_(),D=this.m_shape.getNextVertex(A),this.m_shape.queryXY(A,s),(e?s.y===i:s.x===i)&&(this.m_shape.queryXY(D,s),e?s.y===i:s.x===i)){if(this.isCurve(A))continue;n===-1&&(n=this.m_shape.createUserIndex()),this.m_shape.getUserIndex(A,n)!==1&&(r.push(A),this.m_shape.setUserIndex(A,n,1)),this.m_shape.getUserIndex(D,n)!==1&&(r.push(D),this.m_shape.setUserIndex(D,n,1))}}if(n!==-1&&this.m_shape.removeUserIndex(n),r.length<3)return;r.sort((P,A)=>this.compareVertices(P,A));const o=new Y,l=new Y,c=new Y;l.setNAN();let f=-1,y=[],_=[];const x=this.m_shape.createUserIndex(),S=this.m_shape.createUserIndex();for(let P=0,A=r.length;P<A;P++){const D=r[P];if(this.m_shape.queryXY(D,s),!s.isEqualPoint2D(l)){if(f===-1){f=P,l.setCoordsPoint2D(s);continue}for(let F=f;F<P;F++){const G=r[F],V=this.m_shape.getNextVertex(G),B=this.m_shape.getPrevVertex(G);let W=!1;this.m_shape.queryXY(V,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(G)||(y.push(G),W=!0,this.m_shape.setUserIndex(G,S,1))),this.m_shape.queryXY(B,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(B)||(W||y.push(G),this.m_shape.setUserIndex(G,x,1)))}for(let F=0,G=y.length;F<G;F++){const V=y[F],B=this.m_shape.getUserIndex(V,x),W=this.m_shape.getUserIndex(V,S);if(B===1){const J=this.m_shape.getPrevVertex(V);this.m_shape.queryXY(J,c);let re=0;if(!c.isEqualPoint2D(s)){const ne=Y.distance(l,c);re=Y.distance(c,s)/ne,re===0?re=Number.EPSILON:re===1&&(re=1-Number.EPSILON),this.m_shape.splitSegment(J,[re],1);const oe=this.m_shape.getPrevVertex(V);this.m_shape.setXY(oe,s),_.push(oe),this.m_shape.setUserIndex(oe,x,1),this.m_shape.setUserIndex(oe,S,-1)}}if(W===1){const J=this.m_shape.getNextVertex(V);this.m_shape.queryXY(J,c);let re=0;if(!c.isEqualPoint2D(s)){const ne=Y.distance(l,c);re=Y.distance(l,s)/ne,re===0?re=Number.EPSILON:re===1&&(re=1-Number.EPSILON),this.m_shape.splitSegment(V,[re],1);const oe=this.m_shape.getNextVertex(V);this.m_shape.setXY(oe,s),_.push(oe),this.m_shape.setUserIndex(oe,x,-1),this.m_shape.setUserIndex(oe,S,1)}}}const N=y;y=_,_=N,_.length=0,f=P,l.setCoordsPoint2D(s)}}this.m_shape.removeUserIndex(x),this.m_shape.removeUserIndex(S)}resolveOverlaps(e,i){const n=new Y,s=[];let r=-1;for(let f=0,y=this.m_verticesOnExtent.length;f<y;f++){this.progress_();const _=this.m_verticesOnExtent[f];if(_===ae)continue;const x=this.m_shape.getNextVertex(_);if(this.m_shape.queryXY(_,n),(e?n.y===i:n.x===i)&&(this.m_shape.queryXY(x,n),e?n.y===i:n.x===i)){if(this.isCurve(_))continue;r===-1&&(r=this.m_shape.createUserIndex()),this.m_shape.getUserIndex(_,r)!==-2&&(s.push(_),this.m_shape.setUserIndex(_,r,-2)),this.m_shape.getUserIndex(x,r)!==-2&&(s.push(x),this.m_shape.setUserIndex(x,r,-2))}}if(s.length===0)return void(r!==-1&&this.m_shape.removeUserIndex(r));K(r!==-1),s.sort((f,y)=>this.compareVertices(f,y));for(let f=0,y=s.length;f<y;f++){const _=s[f];this.m_shape.setUserIndex(_,r,f)}const o=new Y,l=new Y;l.setNAN();let c=-1;for(let f=0,y=s.length;f<y;f++){this.progress_();const _=s[f];if(_!==ae&&(this.m_shape.queryXY(_,n),!n.isEqualPoint2D(l))){if(c!==-1)for(;;){let x=!1;const S=f;for(let P=c;P<S;P++){const A=s[P];if(A===ae)continue;let D=ae;const N=this.m_shape.getNextVertex(A);this.m_shape.queryXY(N,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(A)||(D=N));let F=ae;const G=this.m_shape.getPrevVertex(A);if(this.m_shape.queryXY(G,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(G)||(F=G)),D===ae||F===ae){if(D!==ae||F!==ae){for(let V=P+1;V<f;V++){const B=s[V];if(B===ae)continue;const W=this.m_shape.getNextVertex(B);let J=ae;this.m_shape.queryXY(W,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(B)||(J=W));const re=this.m_shape.getPrevVertex(B);let ne=ae;if(this.m_shape.queryXY(re,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(re)||(ne=re)),J!==ae&&ne!==ae){this.beforeRemoveVertex(B,s,r),this.m_shape.removeVertex(B,!1),this.beforeRemoveVertex(J,s,r),this.m_shape.removeVertex(J,!1),x=!0;break}if(D!==ae&&ne!==ae){this.removeOverlap(s,A,D,B,ne,r),x=!0;break}if(F!==ae&&J!==ae){this.removeOverlap(s,B,J,A,F,r),x=!0;break}}if(x)break}}else this.beforeRemoveVertex(A,s,r),this.m_shape.removeVertex(A,!1),this.beforeRemoveVertex(D,s,r),this.m_shape.removeVertex(D,!1),x=!0}if(!x)break}c=f,l.setCoordsPoint2D(n)}}this.m_shape.removeUserIndex(r)}beforeRemoveVertex(e,i,n){let s=this.m_shape.getUserIndex(e,n);K(s>=0),i[s]=ae,s=this.m_shape.getUserIndex(e,this.m_verticesOnExtentIndex),K(s>=0),this.m_verticesOnExtent[s]=ae;const r=this.m_shape.getPathFromVertex(e);r!==ae&&this.m_shape.getFirstVertex(r)===e&&(this.m_shape.setFirstVertex(r,ae),this.m_shape.setLastVertex(r,ae))}removeOverlap(e,i,n,s,r,o){this.m_shape.setNextVertex(i,s),this.m_shape.setPrevVertex(s,i),this.m_shape.setPrevVertex(n,r),this.m_shape.setNextVertex(r,n),this.beforeRemoveVertex(s,e,o),this.m_shape.removeVertexInternal(s,!1),this.beforeRemoveVertex(r,e,o),this.m_shape.removeVertexInternal(r,!0)}removeSpikesAlongPoles(){this.removeSpikesOnPole(this.m_extent.ymin),this.removeSpikesOnPole(this.m_extent.ymax)}removeSpikesOnPole(e){for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;i=this.m_shape.getNextPath(i)){const n=this.m_shape.getPathSize(i);if(n<3)continue;let s=this.m_shape.getFirstVertex(i);const r=new Y;this.m_shape.queryXY(s,r);let o=r.y===e&&!this.isCurve(s);s=this.m_shape.getNextVertex(s);const l=new Y;this.m_shape.queryXY(s,l);let c=l.y===e&&!this.isCurve(s);s=this.m_shape.getNextVertex(s);const f=new Y;for(let y=0,_=n-2;y<_;y++,s=this.m_shape.getNextVertex(s)){this.progress_(),this.m_shape.queryXY(s,f);const x=f.y===e;if(c&&o&&x&&(l.x-r.x)*(f.x-l.x)<=0){this.m_shape.removeVertex(this.m_shape.getPrevVertex(s),!1),l.setCoordsPoint2D(f),c=x&&!this.isCurve(s);continue}r.setCoordsPoint2D(l),o=c,l.setCoordsPoint2D(f),c=x&&!this.isCurve(s)}}}fixPaths(){for(let r=0,o=this.m_verticesOnExtent.length;r<o;r++){const l=this.m_verticesOnExtent[r];l!==ae&&this.m_shape.setPathToVertex(l,ae)}const e=this.m_shape.hasCurves();let i=0,n=0;for(let r=this.m_shape.getFirstPath(this.m_geometry);r!==ae;){const o=this.m_shape.getFirstVertex(r);if(o===ae||r!==this.m_shape.getPathFromVertex(o)){const f=r;r=this.m_shape.getNextPath(r),this.m_shape.setFirstVertex(f,ae),this.m_shape.removePathOnly(f);continue}let l=o,c=0;do this.m_shape.setPathToVertex(l,r),c++,l=this.m_shape.getNextVertex(l);while(l!==o);this.m_shape.setRingAreaValid(r,!1),this.m_shape.setLastVertex(r,this.m_shape.getPrevVertex(o)),this.m_shape.setPathSize(r,c),n+=c,i++,r=this.m_shape.getNextPath(r)}for(let r=0,o=this.m_verticesOnExtent.length;r<o;r++){let l=this.m_verticesOnExtent[r];if(l===ae)continue;let c=this.m_shape.getPathFromVertex(l);if(c!==ae)continue;c=this.m_shape.insertPath(this.m_geometry,ae);let f=!1,y=0;const _=l;do this.m_shape.setPathToVertex(l,c),y++,e&&y<=2&&(f||(f=this.isCurve(l))),l=this.m_shape.getNextVertex(l);while(l!==_);if(f?y===0:y<=2){let x=this.m_shape.getUserIndex(_,this.m_verticesOnExtentIndex);K(x>=0),this.m_verticesOnExtent[x]=ae;const S=this.m_shape.removeVertex(_,!1);y===2&&(x=this.m_shape.getUserIndex(S,this.m_verticesOnExtentIndex),x>=0&&(this.m_verticesOnExtent[x]=ae),this.m_shape.removeVertex(S,!1));const P=c;c=this.m_shape.getNextPath(c),this.m_shape.setFirstVertex(P,ae),this.m_shape.removePathOnly(P)}else this.m_shape.setClosedPath(c,!0),this.m_shape.setPathSize(c,y),this.m_shape.setFirstVertex(c,_),this.m_shape.setLastVertex(c,this.m_shape.getPrevVertex(_)),this.m_shape.setRingAreaValid(c,!1),n+=y,i++}this.m_shape.setGeometryPathCount(this.m_geometry,i),this.m_shape.setGeometryVertexCount(this.m_geometry,n);let s=0;for(let r=this.m_shape.getFirstGeometry();r!==ae;r=this.m_shape.getNextGeometry(r))s+=this.m_shape.getPointCount(r);this.m_shape.setTotalPointCount(s)}dbgCheckPathFirst(){}isCurve(e){return this.m_shape.getSegment(e)!==null}compareVertices(e,i){const n=new Y;this.m_shape.queryXY(e,n);const s=new Y;return this.m_shape.queryXY(i,s),n.compare(s)}clipPolesOut(e,i){return this.clipPolygonOrProjectedPolyline2(e,i)}}function Rit(t,e,i,n,s,r){return new yB(0,0,0,null,!1,Eo()).densifyEx(t,e,i,n,!1,r)}function Pye(t,e,i,n,s,r,o,l){r&&(r.length=0),o&&(o.length=0);const c=t.getGeometryType();if(c===me.enumLine)return r&&(r.push(t.getStartXY()),r.push(Y.getNAN()),r.push(Y.getNAN()),r.push(t.getEndXY())),o&&(o.push(0),o.push(1)),1;if(c===me.enumBezier){if(!n)return r&&(r.push(t.getStartXY()),r.push(t.getControlPoint1()),r.push(t.getControlPoint2()),r.push(t.getEndXY())),o&&(o.push(0),o.push(1)),1;const f=[];f.length=9;let y=t.getMonotonicPartParams(f.length,f);if(f.length=y,y=u9(t,i,f),o&&o.splice(0,0,...f.slice(0,y)),r){const _=new Qt;for(let x=1;x<y;x++){const S=f[x-1],P=f[x];t.queryCut(S,P,_,!0);const A=_.get();fM(A),x===1&&r.push(A.getStartXY()),r.push(A.getControlPoint1()),r.push(A.getControlPoint2()),r.push(A.getEndXY())}}return y-1}if(c===me.enumEllipticArc){const f=t;if(f.isDegenerateToLine()||f.isDegenerate(0))return r&&(r.push(t.getStartXY()),r.push(Y.getNAN()),r.push(Y.getNAN()),r.push(t.getEndXY())),o&&(o.push(0),o.push(1)),1;if(n&&!f.isMonotoneQuickAndDirty()){const y=[];y.length=6;let _=f.getMonotonicPartParams(y.length,y);y.length=_,_=u9(t,i,y);let x=0;if(_>2){const S=new Qt,P=o||[];let A=0;for(let D=1;D<_;D++){const N=y[A],F=y[D];if(f.queryCut(N,F,S,!0),S.get().isDegenerate(0))continue;const G=P.length,V=sne(D===1,S.get(),e,i,n,r,o);K(V>0),x+=V;const B=D===_-1,W=y[A],J=S.get().getSweepAngle()/f.getSweepAngle();for(let re=G,ne=P.length;re<ne;re++)if(P[re]=!B||re+1<ne?W+P[re]*J:1,r){const oe=3*re,pe=f.getCoord2D(P[re]);r[oe].setCoordsPoint2D(pe),oe>0&&O7(r.slice(oe-3))}A=D}return x}}return sne(!0,f,e,i,n,r,o)}if(c===me.enumRationalBezier2){const f=t;if(n&&!f.isMonotoneQuickAndDirty()){const y=[];y.length=6;let _=f.getMonotonicPartParams(y.length,y);y.length=_,_=u9(t,i,y);let x=0;if(_>2){const S=new Qt,P=o||[];for(let A=1;A<_;A++){const D=y[A-1],N=y[A];f.queryCut(D,N,S,!0);const F=P.length;x+=rne(A===1,S.get());const G=A===_-1,V=y[A-1];for(let B=F,W=P.length;B<W;B++)if(P[B]=!G||B+1<W?V+P[B]:1,r){const J=3*B,re=f.getCoord2D(P[B]);r[J].setCoordsPoint2D(re),J>0&&eye(r.slice(J-3))}}return x}}return rne()}if(c===me.enumBezier2){const f=t,y=Ge(Y,3);f.queryControlPoints(y);const _=new Gc;return _.constructFromQuadratic(y),Pye(_,e,i,n,s,r,o)}Bn("")}function dq(t,e,i,n,s,r,o,l,c){const f=t.getGeometryType();if(r&&(r.length=0,o.length=0),l&&(l.length=0),f===me.enumEllipticArc){const x=t;if(x.isDegenerateToLine()||x.isDegenerate(0))return r&&(r.push(t.getStartXY()),r.push(Y.getNAN()),r.push(t.getEndXY()),o.push(Number.NaN),o.push(Number.NaN),o.push(Number.NaN)),l&&(l.push(0),l.push(1)),1}const y=ji(9,Number.NaN);let _;if(s)_=t.getMonotonicPartParams(y.length,y),y.length=_,_=u9(t,i,y);else{if(_=2,y[0]=0,y[1]=1,f===Xc.type){const x=t.getSweepAngle();if(x>.9*Math.PI){const S=2*Math.PI/3;Math.min(3,Math.trunc(x/S+.5))>2?(y[0]=0,y[1]=1/3,y[2]=2/3,y[3]=1,_=4):(y[0]=0,y[1]=.5,y[2]=1,_=3)}}else K(f===wa.type);y.length=_}if(r){const x=new Qt;let S=1;for(;S<_;){const P=y[S-1],A=y[S];t.queryCut(P,A,x,!0);const D=Ge(Y,3),N=[1,1,1];if(f===me.enumEllipticArc){const F=x.get();if(Math.abs(F.getSweepAngle())>.9*Math.PI){const G=(A-P)/3;y.splice(S,0,P+G),y.splice(S+1,0,P+2*G),_+=2;continue}N[1]=Pve(F,D)}else{const F=x.get();F.queryControlPoints(D),F.queryWeights(N)}s&&sx(D),S===1&&(r.push(D[0].clone()),o.push(N[0])),r.push(D[1].clone()),r.push(D[2].clone()),o.push(N[1]),o.push(N[2]),S++}}return l&&(l.length=_,fs(l,y,0,0,_)),_-1}let yB=class Xd{static constructDefault(e){return new Xd(0,0,0,e,!1,Eo())}constructor(e,i,n,s,r,o){this.m_segmentBuffer=null,this.m_dummyPoint=new Ut,this.m_progressCounter=0,this.m_progressTracker=s,this.m_bSetDensifyFlag=r,this.m_maxLength=e,this.m_maxDeviation=i,this.m_maxAngle=n>xa()?xa():n,this.m_cosMaxAngle=Math.cos(this.m_maxAngle),this.m_bOnlyCurveDensify=this.m_maxAngle>0||this.m_maxDeviation>0,this.m_maxSegmentsPerCurve=o,ZE(this.m_maxSegmentsPerCurve>0,"this.m_maxSegmentsPerCurve > 0"),this.m_minStep=1/this.m_maxSegmentsPerCurve}densify(e){return this.densifyGeom(e)}densifySegment(e,i){K(0)}densifyEx(e,i,n,s,r,o){return this.m_maxLength=i,this.m_maxDeviation=n,this.m_maxAngle=s>xa()?xa():s,this.m_cosMaxAngle=Math.cos(this.m_maxAngle),this.m_bOnlyCurveDensify=this.m_maxAngle>0||this.m_maxDeviation>0,this.m_bSetDensifyFlag=r,this.m_maxSegmentsPerCurve=o,ZE(this.m_maxSegmentsPerCurve>0,"this.m_maxSegmentsPerCurve > 0"),this.m_minStep=1/this.m_maxSegmentsPerCurve,this.densifyGeom(e)}densifyGeom(e){if(e.isEmpty()||e.getDimension()<1)return e;const i=e.getGeometryType();return _7(i)?e:bi(i)?this.densifyMultiPath(e):Ds(i)?this.densifySegmentImpl(e):i===me.enumEnvelope?this.densifyEnvelope(e):void xt("")}densifySegmentEx(e,i,n,s,r){const o=e.getGeometryType();if(!(this.m_maxLength>0||this.m_bOnlyCurveDensify&&o!==me.enumLine)&&(!s||n))return void(i?o===me.enumLine?i.addSegment(e,n):(n&&(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)),e.queryEnd(this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint)):(n&&r.push(0),r.push(1)));if(o===me.enumBezier)return void this.densifyCubicBezier(e,i,n,s,r);if(o===me.enumRationalBezier2)return void this.densifyRationalBezier2(e,i,n,s,r);if(o===me.enumBezier2)return void this.densifyBezier2(e,i,n,s,r);if(o===me.enumEllipticArc&&!e.isLine()&&e.getMinorMajorRatio()<.25)return void this.densifyEllipticArc(e,i,n,s,r);let l=1;this.m_maxLength>0&&(l=this.calculateLengthSubdivisionStep(e,this.m_maxLength)),this.m_maxDeviation>0&&(l=Math.min(l,this.calculateDeviationSubdivisionStep(e,this.m_maxDeviation))),this.m_maxAngle>0&&(l=Math.min(l,this.calculateAngularSubdivisionStep(e,this.m_maxAngle))),this.densifySegmentByLength(e,l,i,n,s,r)}densifyMultiPath(e){if(!e.hasNonLinearSegments()){if(e.getDescription().getAttributeCount()===1)return this.densifyMultiPathLinear(e);if(!(this.m_maxLength>0))return e}const i=e.createInstance();i.getGeometryType()===me.enumPolygon&&i.setFillRule(e.getFillRule()),i.reserve(e.getPointCount());const n=e.getImpl().querySegmentIterator();for(;n.nextPath();){let s=!0;for(;n.hasNextSegment();){const r=n.nextSegment(),o=n.isClosingSegment();this.densifySegmentEx(r,i,s,o,null),o&&i.closePathWithLine(),s=!1}}return i}densifySegmentImpl(e){const i=new vi({vd:e.getDescription()}),n=[0];return this.densifySegmentEx(e,i,!0,!1,n),i}densifyEnvelope(e){const i=new Wt({vd:e.getDescription()});i.addEnvelope(e,!1);const n=xe.constructEmpty();e.queryEnvelope(n);const s=n.width(),r=n.height();return!(this.m_maxLength>0)||s<=this.m_maxLength&&r<=this.m_maxLength?i:this.densifyMultiPath(i)}densifyMultiPathLinear(e){if(!(this.m_maxLength>0))return e;const i=e.createInstance();i.getGeometryType()===me.enumPolygon&&i.setFillRule(e.getFillRule()),i.reserve(e.getPointCount());const n=i.getImpl(),s=e.getImpl(),r=s.getAttributeStreamRef(0),o=new ni;for(let l=0,c=s.getPathCount();l<c;l++){const f=s.isClosedPath(l);if(s.getPathSize(l)===0)continue;const y=s.getPathStart(l),_=r.readPoint2D(2*y),x=_.clone();n.startPath(_);for(let S=y+1,P=s.getPathEnd(l);S<P;S++){const A=r.readPoint2D(2*S),D=Y.distance(x,A);if(D>this.m_maxLength){let N=Math.ceil(D/this.m_maxLength);N>Eo()&&(N=Eo());const F=1/N;let G,V,B;x.compare(A)<0?(o.setStartXY(x),o.setEndXY(A),G=0,V=1):(o.setStartXY(A),o.setEndXY(x),G=N-2,V=-1);for(let W=0,J=N-1;W<J;W++,G+=V){this.progress_(),B=F*(G+1);const re=new Y;o.queryCoord2D(B,re),n.lineTo(re),this.m_bSetDensifyFlag&&n.setAttribute(10,n.getPointCount()-1,0,1)}}else this.progress_();i.lineTo(A),x.assign(A)}if(f){const S=Y.distance(x,_);if(S>this.m_maxLength){const P=_;let A=Math.ceil(S/this.m_maxLength);A>Eo()&&(A=Eo());const D=1/A;let N,F;x.compare(P)<0?(o.setStartXY(x),o.setEndXY(P),N=0,F=1):(o.setStartXY(P),o.setEndXY(x),N=A-2,F=-1);const G=new Y(0,0);let V;for(let B=0,W=A-1;B<W;B++,N+=F)this.progress_(),V=D*(N+1),o.queryCoord2D(V,G),n.lineTo(G),this.m_bSetDensifyFlag&&n.setAttribute(10,n.getPointCount()-1,0,1)}n.closePathWithLine()}}return i}densifySegmentByLength(e,i,n,s,r,o){K(e.getGeometryType()!==me.enumBezier);let l=e.getStartXY().compare(e.getEndXY());l===0&&i<1&&(e.getGeometryType()===me.enumEllipticArc?l=e.getSweepAngle()<0?1:-1:K(0));let c=0;if(s&&(n?(e.queryStart(this.m_dummyPoint),n.startPathPoint(this.m_dummyPoint)):o.push(0),++c),i*this.m_maxSegmentsPerCurve<1&&(i=1/this.m_maxSegmentsPerCurve),i<1){this.m_segmentBuffer||(this.m_segmentBuffer=new Qt);let f=Math.ceil(1/i);f>Eo()&&(f=Eo()),i=1/f,this.m_segmentBuffer.create(e.getGeometryType());let y,_,x,S=e;l<0?(y=0,_=1):(e.copyTo(this.m_segmentBuffer.get()),this.m_segmentBuffer.get().reverse(),y=f-2,_=-1,S=this.m_segmentBuffer.get());const P=f-1;for(let A=0;A<P;A++,y+=_)x=i*(y+1),n?(S.queryCoord(x,this.m_dummyPoint),n.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&x!==1&&x!==0&&n.setAttribute(10,n.getPointCount()-1,0,1)):o.push(l>0?1-x:x),this.progress_();x=1,c+=P}(!r||r&&s&&c<2)&&(n?(e.queryEnd(this.m_dummyPoint),n.lineToPoint(this.m_dummyPoint)):o.push(1))}densifyCubicBezier(e,i,n,s,r){const o=new Gc;let l=e;const c=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());if(f===0&&c>0){const D=Ge(Y,4);e.queryControlPoints(D),f=D[1].compare(D[2]),f===0&&(f=D[1].compare(D[0]))}f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;n&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=[],x=[],S=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve));let P=!0,A=0;if(f>0)for(_.push([l.getStartXY(),l.getControlPoint1(),l.getControlPoint2(),l.getEndXY(),new Y(0,1)]),x.push(0);_.length;){this.progress_();const D=_.at(-1),N=x.at(-1),F=D[4].x,G=D[4].y;if(N<S&&this.bezierNeedsSplit(D)){P&&(A=l.findMinDeriv(),P=!1);let V=.5*(F+G);Math.abs(A-V)<.4*(G-F)&&(V=A);const B=(V-F)/(G-F),W=D[0].mul(1-B).add(D[1].mul(B)),J=D[1].mul(1-B).add(D[2].mul(B)),re=D[2].mul(1-B).add(D[3].mul(B)),ne=W.mul(1-B).add(J.mul(B)),oe=J.mul(1-B).add(re.mul(B)),pe=ne.mul(1-B).add(oe.mul(B)),ce=D[3];D[1]=W,D[2]=ne,D[3]=pe,D[4].setCoords(F,V);const ue=[pe,oe,re,ce,new Y(V,G)];_.push(ue),x[x.length-1]=N+1,x.push(N+1)}else _.pop(),x.pop(),(_.length>0||!s||s&&n&&y<2)&&(i?(l.queryCoord(F,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&F!==1&&F!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(1-F),++y)}else for(_.push([l.getStartXY(),l.getControlPoint1(),l.getControlPoint2(),l.getEndXY(),new Y(0,1)]),x.push(0);_.length;){this.progress_();const D=_.at(-1),N=x.at(-1),F=D[4].x,G=D[4].y;if(N<S&&this.bezierNeedsSplit(D)){P&&(A=l.findMinDeriv(),P=!1);let V=.5*(F+G);Math.abs(A-V)<.4*(G-F)&&(V=A);const B=(V-F)/(G-F),W=D[0].mul(1-B).add(D[1].mul(B)),J=D[1].mul(1-B).add(D[2].mul(B)),re=D[2].mul(1-B).add(D[3].mul(B)),ne=W.mul(1-B).add(J.mul(B)),oe=J.mul(1-B).add(re.mul(B)),pe=ne.mul(1-B).add(oe.mul(B)),ce=D[0];D[0]=pe,D[1]=oe,D[2]=re,D[4].setCoords(V,G);const ue=[ce,W,ne,pe,new Y(F,V)];_.push(ue),x[x.length-1]=N+1,x.push(N+1)}else _.pop(),x.pop(),(_.length>0||!s||s&&n&&y<2)&&(i?(l.queryCoord(G,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&G!==1&&G!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(G),++y)}}densifyRationalBezier2(e,i,n,s,r){const o=new wa;let l=e;const c=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());f===0&&c>0&&(f=0),f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;n&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve)),x=new wa,S=[],P=[];for(S.push(new Ze(0,1)),P.push(0);S.length;){this.progress_();const A=S.at(-1).clone(),D=P.at(-1);if(D<_&&this.rationalBezier2NeedsSplit(l,x,A.vmin,A.vmax)){const N=A.getCenter();f>0?(S.at(-1).vmax=N,S.push(new Ze(N,A.vmax))):(S.at(-1).vmin=N,S.push(new Ze(A.vmin,N))),P[P.length-1]=D+1,P.push(D+1)}else if(S.pop(),P.pop(),S.length>0||!s||s&&n&&y<2){const N=f>0?A.vmin:A.vmax;i?(l.queryCoord(N,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&N!==1&&N!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(f>0?1-N:N),++y}}}densifyBezier2(e,i,n,s,r){const o=new pm;let l=e;const c=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());f===0&&c>0&&(f=0),f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;n&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=Math.ceil(Math.log2(this.m_maxSegmentsPerCurve)),x=new pm,S=[],P=[];for(S.push(new Ze(0,1)),P.push(0);S.length;){this.progress_();const A=S.at(-1).clone(),D=P.at(-1);if(D<_&&this.bezier2NeedsSplit(l,x,A.vmin,A.vmax)){const N=A.getCenter();f>0?(S.at(-1).vmax=N,S.push(new Ze(N,A.vmax))):(S.at(-1).vmin=N,S.push(new Ze(A.vmin,N))),P[P.length-1]=D+1,P.push(D+1)}else if(S.pop(),P.pop(),S.length>0||!s||s&&n&&y<2){const N=f>0?A.vmin:A.vmax;i?(l.queryCoord(N,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&N!==1&&N!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(f>0?1-N:N),++y}}}densifyEllipticArc(e,i,n,s,r){const o=new Xc;let l=e;const c=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());f===0&&c>0&&(f=e.isClockwise()?0:1),f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;n&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve)),x=new Xc,S=[],P=[];for(S.push(new Ze(0,1)),P.push(0);S.length;){this.progress_();const A=S.at(-1).clone(),D=P.at(-1);if(D<_&&this.ellipticArcNeedsSplit(l,x,A.vmin,A.vmax)){const N=A.getCenter();f>0?(S.at(-1).vmax=N,S.push(new Ze(N,A.vmax))):(S.at(-1).vmin=N,S.push(new Ze(A.vmin,N))),P[P.length-1]=D+1,P.push(D+1)}else if(S.pop(),P.pop(),S.length>0||!s||s&&n&&y<2){const N=f>0?A.vmin:A.vmax;i?(l.queryCoord(N,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&N!==1&&N!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(f>0?1-N:N),++y}}}calculateLengthSubdivisionStep(e,i){const n=e.calculateUpperLength2D();if(!e.isCurve())return n?i/n:1;if(e.getGeometryType()===me.enumEllipticArc){const s=e;if(s.isCircular()||s.isDegenerate(0)||s.isDegenerateToLine()){let r=i/n;return r<this.m_minStep&&(r=this.m_minStep),r}return i/n*s.getSemiAxes().y/s.getSemiAxes().x}e.getGeometryType()===me.enumBezier&&Bn(""),Bn("")}calculateDeviationSubdivisionStep(e,i){if(!e.isCurve())return 1;if(e.getGeometryType()===me.enumEllipticArc){const n=e;if(n.isDegenerate(0)||n.isDegenerateToLine())return 1;{const s=n.getSemiMajorAxis(),r=1-i/s;let o=Math.PI/2;if(r>0){const c=4*Math.sqrt(i/s*.5);o=Math.min(Math.PI/2,Math.abs(c))}o=Math.max(o,2*Math.PI/this.m_maxSegmentsPerCurve);const l=o*s;return this.calculateLengthSubdivisionStep(e,l)}}Bn("")}calculateAngularSubdivisionStep(e,i){if(!e.isCurve())return 1;if(e.getGeometryType()===me.enumEllipticArc){const n=e;return n.isDegenerate(0)||n.isDegenerateToLine()?1:this.calculateLengthSubdivisionStep(e,i*n.getSemiMinorAxis())}Bn("")}rationalBezier2NeedsSplit(e,i,n,s){e.cutBezierIgnoreAttributes(n,s,i);let r=!1;if(this.m_maxLength>0&&i.calculateUpperLength2D()>this.m_maxLength)return r=!0,!0;const o=Ge(Y,3);i.queryControlPoints(o);const l=[0,0,0];return i.queryWeights(l),!r&&this.m_maxDeviation>0&&(r=!Xd.checkRationalBezier2MaxDeviation(o,l,this.m_maxDeviation)),!r&&this.m_maxAngle>0&&(r=!Xd.checkRationalBezier2MaxAngle(o,l,this.m_cosMaxAngle)),r}bezier2NeedsSplit(e,i,n,s){e.cutBezierIgnoreAttributes(n,s,i);let r=!1;if(this.m_maxLength>0&&i.calculateUpperLength2D()>this.m_maxLength)return r=!0,!0;const o=Ge(Y,3);return i.queryControlPoints(o),!r&&this.m_maxDeviation>0&&(r=!Xd.checkBezier2MaxDeviation(o,this.m_maxDeviation)),!r&&this.m_maxAngle>0&&(r=!Xd.checkBezier2MaxAngle(o,this.m_cosMaxAngle)),r}ellipticArcNeedsSplit(e,i,n,s){e.cutArcIgnoreAttributes(n,s,i);let r=!1;return this.m_maxLength>0&&i.calculateUpperLength2D()>this.m_maxLength?(r=!0,!0):(!r&&this.m_maxDeviation>0&&(r=!Xd.checkEllipticArcMaxDeviation(i,this.m_maxDeviation)),!r&&this.m_maxAngle>0&&(r=!Xd.checkEllipticArcMaxAngle(i,this.m_cosMaxAngle)),r)}bezierNeedsSplit(e){let i=!1;return this.m_maxLength>0&&Y.distance(e[0],e[1])+Y.distance(e[1],e[2])+Y.distance(e[2],e[3])>this.m_maxLength?(i=!0,!0):(!i&&this.m_maxDeviation>0&&(i=!Xd.checkBezierMaxDeviation(e,this.m_maxDeviation)),!i&&this.m_maxAngle>0&&(i=!Xd.checkBezierMaxAngle(e,this.m_cosMaxAngle)),i)}progress_(){}static checkBezierMaxDeviation(e,i){const n=e[3].sub(e[0]);if(n.sqrLength()>0){const s=n.clone();s.leftPerpendicularThis(),s.normalize();const r=s.dotProduct(e[0].sub(e[1])),o=s.dotProduct(e[0].sub(e[2]));if(Math.max(Math.abs(r),Math.abs(o))<=i){const l=new Y;As(e,.5,l,!1);const c=l.sub(e[0]).dotProduct(n);return c>=0&&c<=n.sqrLength()}return!1}return Math.max(e[0].sub(e[1]).sqrLength(),e[0].sub(e[2]).sqrLength())<=i*i}static checkBezierMaxAngle(e,i){if(e[0].equals(e[3]))return!(!e[0].equals(e[1])||!e[1].equals(e[2]));const n=e[3].sub(e[0]);n.normalize();{const s=e[1].sub(e[0]),r=s.dotProduct(n);if(r<0||s.length()*i>r)return!1}{const s=e[2].sub(e[0]),r=s.dotProduct(n);if(r<0||s.length()*i>r)return!1}{const s=e[2].sub(e[1]),r=s.dotProduct(n);if(r<0||s.length()*i>r)return!1}return!0}static checkRationalBezier2MaxDeviation(e,i,n){if(i[1]===0)return!1;const s=e[2].sub(e[0]);if(s.sqrLength()>0){const r=s.clone();r.leftPerpendicularThis(),r.normalize();const o=r.dotProduct(e[0].sub(e[1]));if(Math.abs(o)<=n){const l=e[1].sub(e[0]).dotProduct(s);return l>=0&&l<=s.sqrLength()}return!1}return e[0].sub(e[1]).sqrLength()<=n*n}static checkRationalBezier2MaxAngle(e,i,n){return K(0),!1}static checkBezier2MaxDeviation(e,i){const n=e[2].sub(e[0]);if(n.sqrLength()>0){const s=n.clone();s.leftPerpendicularThis(),s.normalize();const r=s.dotProduct(e[0].sub(e[1]));if(Math.abs(r)<=i){const o=e[1].sub(e[0]).dotProduct(n);return o>=0&&o<=n.sqrLength()}return!1}return e[0].sub(e[1]).sqrLength()<=i*i}static checkBezier2MaxAngle(e,i){return K(0),!1}static checkEllipticArcMaxDeviation(e,i){if(Math.abs(e.getSweepAngle())<Math.PI){const r=e.getEndXY().sub(e.getStartXY()),o=[0,0];if(qat(e,r,o)===1){const l=e.getCoord2D(o[0]),c=Y.getClosestCoordinate(e.getStartXY(),e.getEndXY(),l),f=new Y;return cr(e.getStartXY(),e.getEndXY(),c,f),Y.distance(l,f)<=i}}const n=e.getCoord2D(.5),s=new Y;return cr(e.getEndXY(),e.getStartXY(),.5,s),Y.distance(n,s)<=i}static checkEllipticArcMaxAngle(e,i){return K(0),!1}static checkTypeForReplace(e,i){return K(0),!1}};function u9(t,e,i){const n=i.length;if(e<=0||n<=2)return n;let s=0;const r=[];r.length=n-1;for(let o=1,l=n;o<l;o++){const c=t.tToLength(i[o]);r[o-1]=c-s,s=c}for(;r.length>1;){const o=r.findIndex(f=>f<=2*e);if(o===-1)break;let l=o+1,c=o+1;if(o>0){const f=o-1;(c===r.length||r[f]>r[c])&&(c=f,l--)}r[c]+=r[o],r.splice(o,1),i.splice(l,1)}return i.length}function sne(t,e,i,n,s,r,o,l){const c=e.clone();c.dropAllAttributes();const f=(Pe,Re,$e,we)=>(Re&&(Pe&&Re.push(we.getStartXY()),Re.push(Y.getNAN()),Re.push(Y.getNAN()),Re.push(we.getEndXY())),$e&&(Pe&&$e.push(0),$e.push(1)),1);if(c.isDegenerateToLine()||c.isDegenerate(0))return f(t,r,o,e);const y=c.getStartXY(),_=c.getEndXY(),x=c.getSemiAxes(),S=new _i;if(c.isCircular())S.setIdentity();else{const Pe=c.getAxisXRotation();S.setScaleCoords(1,c.getMinorMajorRatio()),S.rotateAngle(Pe)}const P=c.getCenter();S.shift(P);const A=S.clone();A.invertThis(),c.applyTransformation(A);const D=c.getSweepAngle();if(D===0)return f(t,r,o,e);const N=xe.constructEmpty();N.setCoords({center:P,width:2*x.x,height:2*x.x});const F=.05*N.calculateToleranceFromEnvelope(),G=Math.max(i/x.x,F/x.x);let V=4*Math.pow(G/.0741,1/6);V=Math.min(V,Math.PI/2);const B=xye(c.getStartAngle());let W=D>0?Math.floor(B/V):Math.ceil(B/V);W*=V;const J=D>0?V:-V;W+J===B&&(W+=J);let re=4/3*Math.tan(Math.abs(V)/4);D>0&&(re=-re),o&&t&&o.push(0);const ne=V/Math.abs(D);let oe=(W-B)/D;const pe=y.clone(),ce=new Y;c.queryCoord2D(0,ce);const ue=ce.clone(),se=1-.01*ne;let de=0,Se=0;for(;oe<1;){let Pe;if(oe+=ne,Se>0&&oe<se)Pe=re;else{oe>=se&&(oe=1);const it=(oe-Se)*D;Pe=4/3*Math.tan(Math.abs(it)/4),D>0&&(Pe=-Pe)}c.queryCoord2D(oe,ce);const Re=new Y;S.queryTransform(ce,Re);const $e=e.getClosestCoordinate(Re,!1);if(e.queryCoord2D($e,Re),oe!==1&&(Y.distance(pe,Re)<=2*n||Y.distance(Re,_)<=2*n))continue;pe.setCoordsPoint2D(Re);const we=Ge(Y,4);we[0].assign(ue),we[3].assign(ce),we[1].rightPerpendicularOther(ue),we[1].scaleAddThis(Pe,ue),we[2].leftPerpendicularOther(ce),we[2].scaleAddThis(Pe,ce),S.transformPoints2D(we,3,we),we[3].assign(Re),Se===0&&we[0].setCoordsPoint2D(y),oe===1&&we[3].setCoordsPoint2D(_),s&&O7(we);let Fe=!0;for(let it=1;it<4;it++)if(!we[it].isEqualPoint2D(we[0])){Fe=!1;break}Fe||(o&&o.push($e),r&&(Se===0&&t&&r.push(we[0].clone()),r.push(we[1].clone()),r.push(we[2].clone()),r.push(we[3].clone())),de++),Se=oe,ue.setCoordsPoint2D(ce)}return de}function rne(t,e,i,n,s,r,o,l){return K(0),0}var ma,Jg,Lit=yB;class Fit extends Aa{constructor(e,i,n,s,r,o){super(),this.m_densificator=new Lit(i,n,s,o,!1,r),this.m_index=-1,this.m_inputGeoms=e}tock(){return!0}getRank(){return 1}next(){let e=null;for(;e=this.m_inputGeoms.next();)return sh(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.densify(e);return null}getGeometryID(){return this.m_index}densify(e){return this.m_densificator.densify(e)}}class t0{getOperatorType(){return 10202}accelerateGeometry(e,i,n){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}executeMany(e,i,n,s,r,o=12e3){return new Fit(e,i,n,s,o,r)}execute(e,i,n,s,r,o=12e3){return Rit(e,i,n,s,r,o)}}class $7{constructor(e){this.m_currentShift=63n,this.m_currentElt=0n,this.m_iCurrentElt=-1,this.m_parent=e,this.m_aiSetElts=e.m_bits.flatMap((i,n)=>n)}next(){if(this.m_currentShift++,this.m_currentShift===64n){if(this.m_iCurrentElt++,this.m_iCurrentElt===this.m_aiSetElts.length)return $7.npos();this.m_currentShift=0n,this.m_currentElt=this.m_parent.m_bits[this.m_aiSetElts[this.m_iCurrentElt]]}for(;this.m_currentShift<63n&&!(this.m_currentElt&1n<<this.m_currentShift);)this.m_currentShift++;return this.m_currentElt&1n<<this.m_currentShift?64*this.m_aiSetElts[this.m_iCurrentElt]+Number(this.m_currentShift):this.next()}static npos(){return Number.MAX_SAFE_INTEGER}}function rO(t){return 1n<<(0x3fn&BigInt(t))}function oO(t){return t>>6}class Sh{constructor(e){this.m_bits=[],e!==void 0&&e.copy&&(this.m_bits=e.copy.m_bits.slice())}assignMove(){return this}assignCopy(){return this}hasBit(e){const i=rO(e),n=oO(e);return this.m_bits[n]!==void 0&&!!(this.m_bits[n]&i)}setBit(e){const i=rO(e),n=oO(e);this.m_bits[n]===void 0&&(this.m_bits[n]=0n),this.m_bits[n]|=i}clearBit(e){}flipBit(e){const i=rO(e),n=oO(e);return this.m_bits[n]===void 0&&(this.m_bits[n]=0n),this.m_bits[n]^=i,(this.m_bits[n]&i)!==0n}clear(){this.m_bits.length=0}isZero(){let e=0;return this.m_bits.forEach(i=>{e|=i?2:1}),!(2&e)}equals(e){if(this===e)return!0;if(this.m_bits.length!==e.m_bits.length)return!1;let i=0;return this.m_bits.forEach((n,s)=>{i|=n===e.m_bits[s]?2:1}),!(1&i)&&(e.m_bits.forEach((n,s)=>{i|=n===this.m_bits[s]?2:1}),!(1&i))}notEquals(e){return!this.equals(e)}assignOr(e){return e.m_bits.forEach((i,n)=>{this.m_bits[n]===void 0?this.m_bits[n]=i:this.m_bits[n]|=i}),this}assignSubtract(e){return e.m_bits.forEach((i,n)=>{this.m_bits[n]!==void 0&&(this.m_bits[n]&=~i)}),this}assignAnd(e){return e.m_bits.forEach((i,n)=>{this.m_bits[n]!==void 0&&(this.m_bits[n]&=i)}),this}assignXor(e){return e.m_bits.forEach((i,n)=>{this.m_bits[n]===void 0?this.m_bits[n]=i:this.m_bits[n]^=i}),this}getHashCode(){return this.m_bits.reduce((e,i)=>CQe(e,i),df(0))}getUnorderedBitIterator(){return new $7(this)}}class zit{constructor(e,i){this.m_map=new Map,this.m_hf=e,this.m_ef=i}add(e){const i=this.m_hf(e);if(!this.m_map.has(i))return this.m_map.set(i,e),this;const n=this.m_map.get(i);return n instanceof Array?n.find(s=>this.m_ef(s,e))||n.push(e):this.m_ef(n,e)||this.m_map.set(i,[n,e]),this}clear(){this.m_map.clear()}delete(e){return!1}has(e){const i=this.m_hf(e);if(!this.m_map.has(i))return!1;const n=this.m_map.get(i);return n instanceof Array?n.find(s=>this.m_ef(s,e))!==void 0:this.m_ef(n,e)}get(e){const i=this.m_hf(e),n=this.m_map.get(i);if(n!==void 0)return n instanceof Array?n.find(s=>this.m_ef(s,e)):n}get size(){let e=0;for(const i of this.m_map.values())e+=i instanceof Array?i.length:1;return e}forEach(e,i){}[Symbol.iterator](){return new Set()[Symbol.iterator]()}entries(){return new Set().entries()}keys(){return new Set().keys()}values(){return new Set().values()}get[Symbol.toStringTag](){return"ValueSet"}}class qit extends Jv{constructor(e){super(),this.m_bufferLeft=new Qt,this.m_bufferRight=new Qt,this.m_intervalLeft=Ze.constructEmpty(),this.m_intervalRight=Ze.constructEmpty(),this.m_yScanline=Number.NaN,this.m_helper=e}compare(e,i,n){const s=i,r=e.getElement(n);this.m_helper.querySegmentXY(s,this.m_bufferLeft),this.m_helper.querySegmentXY(r,this.m_bufferRight);const o=this.m_bufferLeft.get(),l=this.m_bufferRight.get();if(this.m_intervalLeft.setCoords(o.getStartX(),o.getEndX()),this.m_intervalRight.setCoords(l.getStartX(),l.getEndX()),this.m_intervalLeft.vmax<this.m_intervalRight.vmin)return-1;if(this.m_intervalLeft.vmin>this.m_intervalRight.vmax)return 1;const c=o.getStartY()===o.getEndY(),f=l.getStartY()===l.getEndY();if(c||f){if(c&&f)return 0;if(o.getStartY()===l.getStartY()&&o.getStartX()===l.getStartX())return c?1:-1;if(o.getEndY()===l.getEndY()&&o.getEndX()===l.getEndX())return c?-1:1}let y=o.intersectionOfYMonotonicWithAxisX(this.m_yScanline,this.m_intervalLeft.vmin),_=l.intersectionOfYMonotonicWithAxisX(this.m_yScanline,this.m_intervalRight.vmin);if(y===_){const x=o.getEndY(),S=l.getEndY(),P=Math.min(x,S);let A=.5*(P+this.m_yScanline);A===this.m_yScanline&&(A=P),y=o.intersectionOfYMonotonicWithAxisX(A,this.m_intervalLeft.vmin),_=l.intersectionOfYMonotonicWithAxisX(A,this.m_intervalRight.vmin)}return y<_?-1:y>_?1:0}setY(e){this.m_yScanline=e}}class Vit{constructor(e){this.m_segmentBuffer=new Qt,this.m_point=Y.getNAN(),this.m_parent=e}setPointXY(e){this.m_point.assign(e)}compare(e,i){const n=e.getElement(i);this.m_parent.querySegmentXY(n,this.m_segmentBuffer);const s=this.m_segmentBuffer.get(),r=new Ze;if(r.setCoords(s.getStartX(),s.getEndX()),this.m_point.x<r.vmin)return-1;if(this.m_point.x>r.vmax)return 1;const o=s.intersectionOfYMonotonicWithAxisX(this.m_point.y,this.m_point.x);return this.m_point.x<o?-1:this.m_point.x>o?1:0}}function one(t,e){return{parentage:t,rank:e}}function Git(t,e){const i=t.length;if(i!==e.length)return!1;const n=t[0].parentage;if(n!==e[0].parentage)return!1;if(n===-1)return!0;for(let s=1;s<i;++s)if(t[s].parentage!==e[s].parentage)return!1;return!0}function ane(t,e,i){i.length=0;let n=!1;{let s=t.getHalfEdgeVertexIterator(e);for(;s!==ae;){const r=t.getVertexFromVertexIterator(s),o=t.getShape().getSegmentRank(r),l=t.getShape().getSegmentParentage(r);n||(n=l>=0),i.push(one(l,o)),s=t.incrementVertexIterator(s)}}{let s=t.getHalfEdgeVertexIterator(t.getHalfEdgeTwin(e));for(;s!==ae;){const r=t.getVertexFromVertexIterator(s),o=t.getShape().getSegmentRank(r),l=t.getShape().getSegmentParentage(r);n||(n=l>=0),i.push(one(l,o)),s=t.incrementVertexIterator(s)}}n&&i.sort((s,r)=>s.rank>r.rank?-1:s.rank<r.rank?1:s.parentage<r.parentage?-1:s.parentage>r.parentage?1:0),i[0].parentage===-1&&(i.length=1)}function jit(){return new zit(t=>t.getHashCode(),(t,e)=>t.equals(e))}(function(t){t[t.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",t[t.enumInputModeSimplifyAlternate=1]="enumInputModeSimplifyAlternate",t[t.enumInputModeSimplifyWinding=2]="enumInputModeSimplifyWinding"})(ma||(ma={})),function(t){t[t.enumSegmentParentageBreakNode=1]="enumSegmentParentageBreakNode",t[t.enumPathBreakNode=2]="enumPathBreakNode"}(Jg||(Jg={}));class Xh{constructor(){this.m_shape=null,this.m_clusterData=new Yt(8),this.m_clusterVertices=new Yt(2),this.m_firstCluster=ae,this.m_lastCluster=ae,this.m_halfEdgeData=new Yt(8),this.m_chainData=new Yt(8),this.m_chainAreas=null,this.m_chainPerimeters=null,this.m_universeChain=-1,this.m_simplifiedGeometry=-1,this.m_edgeIndices=[],this.m_clusterIndices=[],this.m_chainIndices=[],this.m_bBuildGeometryParentageSets=!1,this.m_chainBitSetIndex=-1,this.m_edgeBitSetIndex=-1,this.m_edgeBitSetIndexLeft=-1,this.m_emptyBitSet=null,this.m_geometryMapID=null,this.m_uniqueBitSets=null,this.m_chainBitSets=[],this.m_edgeBitSets=[],this.m_checkDirtyPlanesweepTolerance=Number.NaN,this.m_geometryIDIndex=-1,this.m_clusterIndex=-1,this.m_halfEdgeIndex=-1,this.m_tmpHalfEdgeParentageIndex=-1,this.m_tmpHalfEdgeParentageIndexLeft=-1,this.m_tmpHalfEdgeWindingNumberIndex=-1,this.m_tmpHalfEdgeOddEvenNumberIndex=-1,this.m_segmentParentageIndex=-1,this.m_segmentIndexHe=-1,this.m_clusterBreakNodeIndex=-1,this.m_universeGeomID=-1,this.m_pointCount=0,this.m_progressCounter=0,this.m_bBuildChains=!0,this.m_bDirtyCheckFailed=!1}setCheckDirtyPlanesweepTolerance(e){this.m_checkDirtyPlanesweepTolerance=e}dirtyCheckFailed(){return this.m_bDirtyCheckFailed}getShape(){return this.m_shape}setEditShape(e,i,n=!0,s=!1){s?this.setEditShapeImpl3D_(e,ma.enumInputModeBuildGraph,null,i,!1):this.setEditShapeImpl_(e,ma.enumInputModeBuildGraph,null,i,n)}setAndSimplifyEditShapeAlternate(e,i,n=null,s=!1){const r=[];r.push(i),this.m_simplifiedGeometry=i,s?this.setEditShapeImpl3D_(e,ma.enumInputModeSimplifyAlternate,r,n,!1):this.setEditShapeImpl_(e,ma.enumInputModeSimplifyAlternate,r,n,e.getGeometryType(i)===me.enumPolygon)}setAndSimplifyEditShapeWinding(e,i,n=null){const s=[];s.push(i),this.m_simplifiedGeometry=i,this.setEditShapeImpl_(e,ma.enumInputModeSimplifyWinding,s,n,!0)}removeShape(){this.m_shape!==null&&(this.m_geometryIDIndex!==-1&&(this.m_shape.removeGeometryUserIndex(this.m_geometryIDIndex),this.m_geometryIDIndex=-1),this.m_clusterIndex!==-1&&(this.m_shape.removeUserIndex(this.m_clusterIndex),this.m_clusterIndex=-1),this.m_halfEdgeIndex!==-1&&(this.m_shape.removeUserIndex(this.m_halfEdgeIndex),this.m_halfEdgeIndex=-1),this.m_tmpHalfEdgeParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_tmpHalfEdgeParentageIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.m_tmpHalfEdgeWindingNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeWindingNumberIndex),this.m_tmpHalfEdgeWindingNumberIndex=-1),this.m_tmpHalfEdgeOddEvenNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeOddEvenNumberIndex),this.m_tmpHalfEdgeOddEvenNumberIndex=-1),this.m_segmentParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_segmentParentageIndex),this.m_segmentParentageIndex=-1),this.m_segmentIndexHe!==-1&&(this.deleteUserIndexForHalfEdges(this.m_segmentIndexHe),this.m_segmentIndexHe=-1),this.m_clusterBreakNodeIndex!==-1&&(this.deleteUserIndexForClusters(this.m_clusterBreakNodeIndex),this.m_clusterBreakNodeIndex=-1),this.deleteEdgeBitSets_(),this.deleteChainBitSets_(),this.m_emptyBitSet=null,this.m_geometryMapID=null,this.m_shape=null,this.m_clusterData.deleteAll(!0),this.m_clusterVertices.deleteAll(!0),this.m_firstCluster=ae,this.m_lastCluster=ae,this.m_halfEdgeData.deleteAll(!0),this.m_edgeIndices.length=0,this.m_clusterIndices.length=0,this.m_chainIndices.length=0,this.m_chainData.deleteAll(!0),this.m_universeChain=ae,this.m_chainAreas=null)}getClusterHalfEdge(e){return this.m_clusterData.getField(e,2)}queryXY(e,i){const n=this.getClusterVertexIndex_(e);i.assign(this.m_shape.getXYWithIndex(n))}queryXYZ(e,i){K(0)}getClusterParentage(e){return this.m_clusterData.getField(e,1)}getFirstCluster(){return this.m_firstCluster}getPrevCluster(e){return this.m_clusterData.getField(e,3)}getNextCluster(e){return this.m_clusterData.getField(e,4)}getClusterChain(e){return this.m_clusterData.getField(e,6)}getClusterVertexIterator(e){return this.m_clusterData.getField(e,7)}incrementVertexIterator(e){return this.m_clusterVertices.getField(e,1)}getVertexFromVertexIterator(e){return this.m_clusterVertices.getField(e,0)}getClusterUserIndex(e,i){const n=this.getClusterIndex_(e),s=this.m_clusterIndices[i];return s.size()<=n?-1:s.read(n)}setClusterUserIndex(e,i,n){const s=this.getClusterIndex_(e),r=this.m_clusterIndices[i];r.size()<=s&&r.resize(this.m_clusterData.size(),-1),r.write(s,n)}hasClusterUserIndexFlags(e,i,n){if(i===-1)return!1;const s=this.getClusterUserIndex(e,i);return s!==-1&&!!(n&s)}setClusterUserIndexFlags(e,i,n){const s=this.getClusterIndex_(e),r=this.m_clusterIndices[i];r.size()<=s&&r.resize(this.m_clusterData.size(),-1);let o=r.read(s);o===-1&&(o=0),r.write(s,n|o)}clearClusterUserIndexFlags(e,i,n){K(0)}createUserIndexForClusters(e=-1){const i=new On(this.m_clusterData.capacity(),e);for(let n=0,s=this.m_clusterIndices.length;n<s;n++)if(this.m_clusterIndices[n]===null)return this.m_clusterIndices[n]=i,n;return this.m_clusterIndices.push(i),this.m_clusterIndices.length-1}deleteUserIndexForClusters(e){this.m_clusterIndices[e]=null}getHalfEdgeOrigin(e){return this.m_halfEdgeData.getField(e,1)}getHalfEdgeTo(e){return this.getHalfEdgeOrigin(this.getHalfEdgeTwin(e))}getHalfEdgeTwin(e){return this.m_halfEdgeData.getField(e,4)}getHalfEdgePrev(e){return this.m_halfEdgeData.getField(e,5)}getHalfEdgeNext(e){return this.m_halfEdgeData.getField(e,6)}getHalfEdgeChain(e){return this.m_halfEdgeData.getField(e,2)}getHalfEdgeFaceParentage(e){return this.getChainParentage(this.getHalfEdgeChain(e))}getHalfEdgeVertexIterator(e){return this.m_halfEdgeData.getField(e,7)}getHalfEdgeFromXY(e,i){this.queryXY(this.getHalfEdgeOrigin(e),i)}getHalfEdgeToXY(e,i){this.queryXY(this.getHalfEdgeTo(e),i)}isHalfEdgeCurve(e){return this.m_segmentIndexHe!==-1?this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe)!==-1:!1}getHalfEdgeFromXYZ(e,i){K(0)}getHalfEdgeToXYZ(e,i){K(0)}getHalfEdgeParentage(e){return this.m_halfEdgeData.getField(e,3)&Xh.c_EdgeParentageMask}getHalfEdgeUserIndex(e,i){const n=this.getHalfEdgeIndex_(e),s=this.m_edgeIndices[i];return s.size()<=n?-1:s.read(n)}setHalfEdgeUserIndex(e,i,n){const s=this.getHalfEdgeIndex_(e),r=this.m_edgeIndices[i];r.size()<=s&&r.resize(this.m_halfEdgeData.size(),-1),r.write(s,n)}createUserIndexForHalfEdges(e){e===void 0&&(e=-1);const i=new On(this.m_halfEdgeData.capacity(),e);for(let s=0,r=this.m_edgeIndices.length;s<r;s++)if(this.m_edgeIndices[s]===null)return this.m_edgeIndices[s]=i,s;this.m_edgeIndices.push(i);const n=this.m_edgeIndices.length-1;return K(n>=0&&n<=Number.MAX_SAFE_INTEGER),n}deleteUserIndexForHalfEdges(e){this.m_edgeIndices[e]=null}deleteEdgesBreakFaces_(e){for(let i=0,n=e.length;i<n;i++){const s=e[i],r=this.getHalfEdgeChain(s),o=this.getHalfEdgeTwin(s),l=this.getHalfEdgeChain(o);this.setChainHalfEdge_(r,ae),this.setChainHalfEdge_(l,ae),this.updateVertexToHalfEdgeConnection_(s,!0),this.deleteEdgeImpl_(s)}}doesHalfEdgeBelongToAPolygonInterior(e,i){return K(0),!1}doesHalfEdgeBelongToAPolygonExterior(e,i){return K(0),!1}doesHalfEdgeBelongToAPolygonBoundary(e,i){return K(0),!1}doesHalfEdgeBelongToAPolylineInterior(e,i){return K(0),!1}doesHalfEdgeBelongToAPolylineExterior(e,i){return K(0),!1}doesClusterBelongToAPolygonInterior(e,i){return K(0),!1}doesClusterBelongToAPolygonExterior(e,i){return K(0),!1}doesClusterBelongToAPolygonBoundary(e,i){return K(0),!1}getFirstChain(){return this.m_universeChain}getChainHalfEdge(e){return this.m_chainData.getField(e,1)}getChainParentage(e){return this.m_chainData.getField(e,2)}getChainParent(e){return this.m_chainData.getField(e,3)}getChainFirstIsland(e){return this.m_chainData.getField(e,4)}getChainNextInParent(e){return this.m_chainData.getField(e,5)}getChainNext(e){return this.m_chainData.getField(e,7)}getChainArea(e){const i=this.getChainIndex_(e);let n=this.m_chainAreas.read(i);return Number.isNaN(n)&&(this.updateChainAreaAndPerimeter_(e),n=this.m_chainAreas.read(i)),n}getChainPerimeter(e){return K(0),0}getChainUserIndex(e,i){const n=this.getChainIndex_(e),s=this.m_chainIndices[i];return s.size()<=n?-1:s.read(n)}setChainUserIndex(e,i,n){const s=this.getChainIndex_(e),r=this.m_chainIndices[i];r.size()<=s&&r.resize(this.m_chainData.size(),-1),r.write(s,n)}createUserIndexForChains(){const e=new On(this.m_chainData.capacity(),-1);for(let i=0,n=this.m_chainIndices.length;i<n;i++)if(this.m_chainIndices[i]===null)return this.m_chainIndices[i]=e,i;return this.m_chainIndices.push(e),this.m_chainIndices.length-1}deleteUserIndexForChains(e){K(0)}extractPolygonFromChainAndIslands(e,i,n,s){const r=i===ae?e.createGeometry(me.enumPolygon):i,o=new Qt;this.extractPolygonPathFromChain_(e,r,n,s,o);for(let l=this.getChainFirstIsland(n);l!==ae;l=this.getChainNextInParent(l))this.extractPolygonPathFromChain_(e,r,l,s,o);return r}getGeometryID(e){const i=this.m_shape.getGeometryUserIndex(e,this.m_geometryIDIndex);return K(i>=0),1<<Math.min(i,31)}getClusterFromVertex(e){return this.m_shape.getUserIndex(e,this.m_clusterIndex)}getHalfEdgeFromVertex(e){return this.m_shape.getUserIndex(e,this.m_halfEdgeIndex)}buildGeometryParentageSets(){this.m_bBuildGeometryParentageSets=!0}getChainBitSet(e){if(K(this.m_bBuildGeometryParentageSets),this.m_chainBitSetIndex===-1)return this.getEmptySet();const i=this.getChainUserIndex(e,this.m_chainBitSetIndex);K(i>=0);let n=this.m_chainBitSets.at(i);return n||(n=this.getEmptySet()),n}getChainBoundaryBitSet(e){K(this.m_bBuildGeometryParentageSets);const i=new Sh,n=s=>{const r=this.getChainHalfEdge(s);let o=r;do{const l=this.getEdgeBitSet_(o);l!==null&&i.assignOr(l);const c=this.getEdgeBitSet_(this.getHalfEdgeTwin(o));c!==null&&i.assignOr(c),o=this.getHalfEdgeNext(o)}while(o!==r)};n(e);for(let s=this.getChainFirstIsland(e);s!==ae;s=this.getChainNextInParent(s))n(e);return i}getChainPolygons(e){return K(0),[]}getGeometriesFromBits(e){if(!this.m_bBuildGeometryParentageSets||e===null)return[];if(this.m_geometryMapID===null){this.m_geometryMapID=new Map;for(let s=this.m_shape.getFirstGeometry();s!==ae;s=this.m_shape.getNextGeometry(s))this.m_geometryMapID.set(this.m_shape.getGeometryUserIndex(s,this.m_geometryIDIndex),s)}const i=[],n=e.getUnorderedBitIterator();for(let s=n.next();s!==$7.npos();s=n.next())K(this.m_geometryMapID.has(s)),i.push(this.m_geometryMapID.get(s));return i}getVertexDominant(e,i){if(i===ae)return e;const n=this.getClusterFromVertex(e);return this.getVertexDominantFromCluster(n,i)}getVertexDominantFromCluster(e,i){if(i!==ae){let n=ae;for(let s=this.getClusterVertexIterator(e);s!==ae;s=this.incrementVertexIterator(s)){const r=this.getVertexFromVertexIterator(s);n===ae&&(n=r);const o=this.m_shape.getPathFromVertex(r);if(this.m_shape.getGeometryFromPath(o)===i){n=r;break}}return n}{const n=this.getClusterVertexIterator(e);return n!==ae?this.getVertexFromVertexIterator(n):ae}}isBreakNode(e){return this.hasClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Jg.enumSegmentParentageBreakNode)}setBreakNode(e,i){K(this.m_clusterBreakNodeIndex!==-1),i?this.setClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Jg.enumSegmentParentageBreakNode):this.clearClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Jg.enumSegmentParentageBreakNode)}isStrongPathNode(e){return this.hasClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Jg.enumPathBreakNode)}setStrongPathNode(e,i){if(this.m_clusterBreakNodeIndex===-1){if(!i)return;this.m_clusterBreakNodeIndex=this.createUserIndexForClusters()}i?this.setClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Jg.enumPathBreakNode):this.clearClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Jg.enumPathBreakNode)}getSegmentParentage(e){if(this.m_segmentParentageIndex===-1)return-1;const i=this.getHalfEdgeUserIndex(e,this.m_segmentParentageIndex);return i>=0?i:-1}isCrossroadAhead(e){const i=this.getHalfEdgeNext(e);if(this.isStrongPathNode(this.getHalfEdgeOrigin(i)))return!0;const n=this.getHalfEdgeTwin(i),s=this.getHalfEdgeNext(n);return e!==this.getHalfEdgeTwin(s)}isCrossroadBehind(e){return K(0),!1}getHalfEdgeConnector(e,i){const n=this.getClusterHalfEdge(e);if(n===ae)return ae;let s=n,r=ae,o=ae;do{if(this.getHalfEdgeTo(s)===i)return s;if(r===ae){if(r=this.getClusterHalfEdge(i),r===ae)return ae;o=r}if(this.getHalfEdgeTo(o)===e)return s=this.getHalfEdgeTwin(o),s;s=this.getHalfEdgeNext(this.getHalfEdgeTwin(s)),o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o))}while(s!==n&&o!==r);return ae}querySegmentXY(e,i){if(this.m_segmentIndexHe!==-1){let r=this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe);if(r!==-1){if(r!==-2){const o=this.m_shape.getSegmentFromIndex(r);i.copyFrom(o,!0)}else{r=this.getHalfEdgeUserIndex(this.getHalfEdgeTwin(e),this.m_segmentIndexHe);const o=this.m_shape.getSegmentFromIndex(r);i.copyFrom(o,!0),i.get().reverse()}return}}i.createLine();const n=i.get(),s=Y.getNAN();this.getHalfEdgeFromXY(e,s),n.setStartXY(s),this.getHalfEdgeToXY(e,s),n.setEndXY(s)}isCurveEdge(e){return this.m_segmentIndexHe!==-1?this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe)!==-1:!1}compareEdgeAnglesCurveHelper_(e,i,n){const s=new Qt,r=new Qt;this.querySegmentXY(e,s),this.querySegmentXY(i,r);const o=s.get(),l=r.get();if(o.equals(l))return 0;const c=new Y;this.getHalfEdgeFromXY(e,c);const f=new Y;this.getHalfEdgeToXY(e,f);const y=new Y;this.getHalfEdgeToXY(i,y),K(!f.isEqualPoint2D(y));const _=o.getTangent(0),x=l.getTangent(0);return Y.compareVectors(_,x)}compareEdgeAnglesHelper_(e,i,n){if(e===i)return 0;if(this.isHalfEdgeCurve(e)||this.isHalfEdgeCurve(i))return this.compareEdgeAnglesCurveHelper_(e,i,n);const s=Y.getNAN();this.getHalfEdgeToXY(e,s);const r=Y.getNAN();if(this.getHalfEdgeToXY(i,r),s.isEqualPoint2D(r))return 0;const o=Y.getNAN();this.getHalfEdgeFromXY(e,o);const l=Y.getNAN();l.setSub(s,o);const c=Y.getNAN();return c.setSub(r,o),!n||c.y>=0&&l.y>0?Y.compareVectors(l,c):0}compareEdgeAngles_(e,i){return this.compareEdgeAnglesHelper_(e,i,!1)}compareEdgeAnglesForPair_(e,i){return this.compareEdgeAnglesHelper_(e,i,!0)}compareEdgeAngles3D_(e,i){return K(0),0}compareEdgeAnglesForPair3D_(e,i){return K(0),0}dbgDumpChains_(){}dbgDumpChainToPolygon_(e,i){K(0)}deleteEdgeInternal_(e){const i=this.getHalfEdgeChain(e),n=this.getHalfEdgeTwin(e),s=this.getHalfEdgeChain(n);K(s===i),K(e===this.getHalfEdgeNext(n)||n===this.getHalfEdgeNext(e));let r=this.getHalfEdgeNext(e);r===n&&(r=this.getHalfEdgeNext(r),r===e&&(r=ae));const o=this.getChainIndex_(i),l=this.m_chainAreas.read(o);Number.isNaN(l)||(this.setChainArea_(i,Number.NaN),this.setChainPerimeter_(i,Number.NaN));const c=this.getChainHalfEdge(i);c!==e&&c!==n||this.setChainHalfEdge_(i,r),this.updateVertexToHalfEdgeConnection_(e,!0),this.deleteEdgeImpl_(e)}getFirstUnvisitedHalfEdgeOnCluster_(e,i,n){let s=i!==ae?i:this.getClusterHalfEdge(e);if(s===ae)return ae;const r=s;for(;;){if(this.getHalfEdgeUserIndex(s,n)!==1)return s;const o=this.getHalfEdgeNext(this.getHalfEdgeTwin(s));if(o===r)return ae;s=o}}removeSpikes_(){let e=!1;const i=this.createUserIndexForHalfEdges();for(let n=this.getFirstCluster();n!==ae;n=this.getNextCluster(n)){let s=ae;for(;;){let r=this.getFirstUnvisitedHalfEdgeOnCluster_(n,s,i);if(r===ae)break;s=this.getHalfEdgeNext(this.getHalfEdgeTwin(r));let o=r;for(;;){const l=this.getHalfEdgeNext(o),c=this.getHalfEdgePrev(o),f=this.getHalfEdgeTwin(o);if(c===f){if(this.deleteEdgeInternal_(o),e=!0,s!==o&&s!==f||(s=ae),o===r||c===r){if(r=l,o===r||c===r)break;o=l;continue}}else this.setHalfEdgeUserIndex(o,i,1);if(o=l,o===r)break}}}return this.deleteUserIndexForHalfEdges(i),e}progress_(e,i=!1){}newCluster_(){const e=this.m_clusterData.newElement();return this.m_clusterData.setField(e,1,0),e}newHalfEdgePair_(){const e=this.m_halfEdgeData.newElement();this.m_halfEdgeData.setField(e,2,0),this.m_halfEdgeData.setField(e,3,0);const i=this.m_halfEdgeData.newElement();return this.m_halfEdgeData.setField(i,2,0),this.m_halfEdgeData.setField(i,3,0),this.setHalfEdgeTwin_(e,i),this.setHalfEdgeTwin_(i,e),e}newChain_(){const e=this.m_chainData.newElement();return this.m_chainData.setField(e,2,0),e}deleteChain_(e){return K(0),0}getClusterIndex_(e){return this.m_clusterData.elementToIndex(e)}setClusterVertexIterator_(e,i){this.m_clusterData.setField(e,7,i)}setClusterHalfEdge_(e,i){this.m_clusterData.setField(e,2,i)}setClusterParentage_(e,i){this.m_clusterData.setField(e,1,i)}setPrevCluster_(e,i){this.m_clusterData.setField(e,3,i)}setNextCluster_(e,i){this.m_clusterData.setField(e,4,i)}setClusterVertexIndex_(e,i){this.m_clusterData.setField(e,5,i)}getClusterVertexIndex_(e){return this.m_clusterData.getField(e,5)}setClusterChain_(e,i){this.m_clusterData.setField(e,6,i)}addClusterToExteriorChain_(e,i){this.setClusterChain_(i,e)}getHalfEdgeIndex_(e){return this.m_halfEdgeData.elementToIndex(e)}setHalfEdgeOrigin_(e,i){this.m_halfEdgeData.setField(e,1,i)}setHalfEdgeTwin_(e,i){this.m_halfEdgeData.setField(e,4,i)}setHalfEdgePrev_(e,i){this.m_halfEdgeData.setField(e,5,i)}setHalfEdgeNext_(e,i){this.m_halfEdgeData.setField(e,6,i)}setHalfEdgeChain_(e,i){this.m_halfEdgeData.setField(e,2,i)}setHalfEdgeParentage_(e,i){this.m_halfEdgeData.setField(e,3,i)}getHalfEdgeParentageMask_(e){return this.m_halfEdgeData.getField(e,3)}setHalfEdgeVertexIterator_(e,i){this.m_halfEdgeData.setField(e,7,i)}updateVertexToHalfEdgeConnectionHelper_(e,i){const n=i?ae:e;for(let s=this.getHalfEdgeVertexIterator(e);s!==ae;s=this.incrementVertexIterator(s)){const r=this.getVertexFromVertexIterator(s);this.m_shape.setUserIndex(r,this.m_halfEdgeIndex,n)}}updateVertexToHalfEdgeConnection_(e,i){e!==ae&&(this.updateVertexToHalfEdgeConnectionHelper_(e,i),this.updateVertexToHalfEdgeConnectionHelper_(this.getHalfEdgeTwin(e),i))}getChainIndex_(e){return this.m_chainData.elementToIndex(e)}setChainHalfEdge_(e,i){this.m_chainData.setField(e,1,i)}setChainParentage_(e,i){this.m_chainData.setField(e,2,i)}setChainParent_(e,i){this.m_chainData.setField(e,3,i);const n=this.getChainFirstIsland(i);this.setChainNextInParent_(e,n),this.setChainFirstIsland_(i,e)}setChainFirstIsland_(e,i){this.m_chainData.setField(e,4,i)}setChainNextInParent_(e,i){this.m_chainData.setField(e,5,i)}setChainPrev_(e,i){this.m_chainData.setField(e,6,i)}setChainNext_(e,i){this.m_chainData.setField(e,7,i)}setChainArea_(e,i){const n=this.getChainIndex_(e);this.m_chainAreas.write(n,i)}setChainPerimeter_(e,i){const n=this.getChainIndex_(e);this.m_chainPerimeters.write(n,i)}updateChainAreaAndPerimeter_(e){const i=this.m_shape.hasCurves(),n=new Br(0),s=new Br(0),r=this.getChainHalfEdge(e),o=Y.getNAN(),l=Y.getNAN(),c=Y.getNAN();this.getHalfEdgeFromXY(r,o),l.setCoordsPoint2D(o);let f=r;do this.getHalfEdgeToXY(f,c),i&&this.isCurveEdge(f)||s.pe(Y.distance(l,c)),this.getHalfEdgeChain(this.getHalfEdgeTwin(f))!==e&&n.pe((c.x-o.x-(l.x-o.x))*(c.y-o.y+(l.y-o.y))*.5),l.setCoordsPoint2D(c),f=this.getHalfEdgeNext(f);while(f!==r);if(i){const _=new Qt;f=r;do{this.getHalfEdgeToXY(f,c);const x=this.isCurveEdge(f);if(x&&(this.querySegmentXY(f,_),s.pe(_.get().calculateLength2D())),this.getHalfEdgeChain(this.getHalfEdgeTwin(f))!==e&&x){const S=_.get().calculateArea2DHelper();n.pe(S)}f=this.getHalfEdgeNext(f)}while(f!==r)}const y=this.getChainIndex_(e);this.m_chainAreas.write(y,n.getResult()),this.m_chainPerimeters.write(y,s.getResult())}getChainTopmostEdge_(e){return K(0),0}planeSweepParentage_(e,i){const n=new qit(this),s=new jt;s.setCapacity(Math.trunc(this.m_pointCount/2)),s.setComparator(n);const r=[],o=this.createUserIndexForHalfEdges();let l=null;const c=Y.getNAN();for(let f=this.getFirstCluster();f!==ae;f=this.getNextCluster(f)){this.progress_(i);const y=this.getClusterHalfEdge(f);if(y!==ae){if(r.length=0,!this.tryOptimizedInsertion_(s,o,r,f,y)){this.queryXY(f,c),n.setY(c.y);let _=y;do{const x=this.getHalfEdgeUserIndex(_,o);x!==-1&&(s.deleteNode(x),this.setHalfEdgeUserIndex(_,o,Yt.impossibleIndex2())),_=this.getHalfEdgeNext(this.getHalfEdgeTwin(_))}while(y!==_);_=y;do{if(this.getHalfEdgeUserIndex(_,o)===-1){const x=s.addElement(_);r.push(x)}_=this.getHalfEdgeNext(this.getHalfEdgeTwin(_))}while(y!==_)}for(let _=r.length-1;_>=0;_--){const x=r[_],S=s.getElement(x),P=this.getHalfEdgeTwin(S);this.setHalfEdgeUserIndex(P,o,x),this.planeSweepParentagePropagateParentage_(s,x,e)}}else if(this.getClusterChain(f)===ae){l===null&&(l=new Vit(this)),this.queryXY(f,c),l.setPointXY(c);const _=s.searchLowerBound(l);let x=this.m_universeChain;if(_!==-1){let S=s.getElement(_);this.getHalfEdgeChain(S)===this.getHalfEdgeChain(this.getHalfEdgeTwin(S))&&(S=this.getLeftSkipPolylines_(s,_)),S!==ae&&(x=this.getHalfEdgeChain(S))}this.addClusterToExteriorChain_(x,f)}}this.deleteUserIndexForHalfEdges(o)}planeSweepParentagePropagateParentage_(e,i,n){const s=e.getElement(i),r=this.getHalfEdgeChain(s);if(this.getChainParent(r)!==ae)return;const o=this.getLeftSkipPolylines_(e,i),l=this.getHalfEdgeTwin(s),c=this.getHalfEdgeChain(l);let f=this.getChainParent(r),y=this.getChainParent(c);if(o===ae)f===ae&&(c===r?(this.setChainParent_(c,this.m_universeChain),y=this.m_universeChain,f=y):(y===ae&&(this.setChainParent_(c,this.m_universeChain),y=this.m_universeChain),this.setChainParent_(r,c),f=c));else{const _=this.getHalfEdgeChain(o);if(y===ae){if(this.getChainArea(_)<=0){const x=this.getChainParent(_);this.setChainParent_(c,x),y=x}else this.setChainParent_(c,_),y=_;c===r&&(f=y)}}f===ae&&(this.trySetChainParentFromTwin_(r,c),f=this.getChainParent(r)),K(f!==ae),n===ma.enumInputModeBuildGraph?this.propagateParentageBuildGraph_(e,i,s,o):n===ma.enumInputModeSimplifyWinding?this.propagateParentageWinding_(e,i,s,o,l,r,c):n===ma.enumInputModeSimplifyAlternate&&this.propagateParentageAlternate_(e,i,s,o,l,r,c)}propagateParentageBuildGraph_(e,i,n,s){let r,o=i;s===ae?(o=e.getNext(o),r=this.getHalfEdgeChain(n)):r=this.getHalfEdgeChain(s);let l=null,c=this.getChainParentage(r);for(this.m_bBuildGeometryParentageSets&&(l=this.getChainBitSet(r));o!==-1;o=e.getNext(o)){const f=e.getElement(o),y=this.getHalfEdgeTwin(f);r=this.getHalfEdgeChain(f);const _=this.getHalfEdgeChain(y);if(this.m_bBuildGeometryParentageSets){let D=this.getChainBitSet(_);D=new Sh({copy:D}),D.assignOr(l),this.setChainBitSet_(_,D);let N=this.getChainBitSet(r);const F=this.getLeftEdgeBitSet_(f),G=new Sh({copy:l});if(G.assignSubtract(F),G.isZero())break;N=new Sh({copy:N}),N.assignOr(G),this.setChainBitSet_(r,N),l=N}const x=this.getChainParentage(_),S=x|c;S!==x&&this.setChainParentage_(_,S);let P=this.getChainParentage(r);const A=c&~this.getHalfEdgeUserIndex(f,this.m_tmpHalfEdgeParentageIndexLeft);if(A&&(P|=A,this.setChainParentage_(r,P)),A===0)break;c=P}}propagateParentageWinding_(e,i,n,s,r,o,l){if(o===l)return;let c=this.getHalfEdgeUserIndex(n,this.m_tmpHalfEdgeWindingNumberIndex);c+=this.getHalfEdgeUserIndex(r,this.m_tmpHalfEdgeWindingNumberIndex);let f=0;const y=[],_=[];_.push(0);for(let x=e.getFirst();x!==i;x=e.getNext(x)){const S=e.getElement(x),P=this.getHalfEdgeTwin(S),A=this.getHalfEdgeChain(S),D=this.getHalfEdgeChain(P);if(A!==D){let N=this.getHalfEdgeUserIndex(S,this.m_tmpHalfEdgeWindingNumberIndex);N+=this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeWindingNumberIndex),f+=N;let F=!1;y.length!==0&&y.at(-1)===D&&(_.pop(),y.pop(),F=!0),K(this.getChainParent(D)!==ae),F&&this.getChainParent(D)===A||(_.push(f),y.push(A))}}if(f+=c,y.length!==0&&y.at(-1)===l&&(_.pop(),y.pop()),f!==0){if(_.at(-1)===0){const x=this.m_simplifiedGeometry,S=this.getGeometryID(x);this.setChainParentage_(o,S)}}else if(_.at(-1)!==0){const x=this.m_simplifiedGeometry,S=this.getGeometryID(x);this.setChainParentage_(o,S)}}propagateParentageAlternate_(e,i,n,s,r,o,l){const c=this.m_simplifiedGeometry,f=this.getGeometryID(c);if(s===ae)this.setChainParentage_(l,this.m_universeGeomID),1&this.getHalfEdgeUserIndex(n,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(o,f):this.setChainParentage_(o,this.m_universeGeomID);else{const y=this.getChainParentage(l);if(y===0){const _=this.getHalfEdgeChain(s),x=this.getChainParentage(_);this.setChainParentage_(l,x),1&this.getHalfEdgeUserIndex(n,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(o,x===f?this.m_universeGeomID:f):this.setChainParentage_(o,x)}else 1&this.getHalfEdgeUserIndex(n,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(o,y===f?this.m_universeGeomID:f):this.setChainParentage_(o,y)}}tryOptimizedInsertion_(e,i,n,s,r){let o=r,l=-1,c=ae,f=0;do{if(f===2)return!1;const y=this.getHalfEdgeUserIndex(o,i);if(y!==-1){if(l!==-1)return!1;l=y}else{if(c!==ae)return!1;c=o}f++,o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o))}while(r!==o);return c!==ae&&l!==-1&&(this.setHalfEdgeUserIndex(e.getElement(l),i,Yt.impossibleIndex2()),e.setElement(l,c),n.push(l),!0)}trySetChainParentFromTwin_(e,i){const n=this.getChainArea(e);if(n===0)return!1;const s=this.getChainArea(i);if(n>0&&s<0||n<0&&s>0)return this.setChainParent_(e,i),!0;{const r=this.getChainParent(i);if(r!==ae)return this.setChainParent_(e,r),!0}return!1}createHalfEdges_(e,i){this.m_halfEdgeIndex=this.m_shape.createUserIndex();for(let n=0,s=i.size();n<s;n++){const r=i.read(n),o=this.m_shape.getUserIndex(r,this.m_clusterIndex),l=this.m_shape.getPathFromVertex(r),c=this.m_shape.getGeometryFromPath(l),f=this.m_shape.getGeometryType(c);if(bi(f)){const y=this.m_shape.getNextVertex(r);if(y===ae)continue;const _=this.m_shape.getUserIndex(y,this.m_clusterIndex);if(o===_)continue;const x=this.newHalfEdgePair_(),S=this.getHalfEdgeTwin(x),P=this.m_clusterVertices.newElement();this.m_clusterVertices.setField(P,0,r),this.m_clusterVertices.setField(P,1,-1),this.setHalfEdgeVertexIterator_(x,P),this.m_shape.setUserIndex(r,this.m_halfEdgeIndex,x),this.setHalfEdgeOrigin_(x,o);const A=this.getClusterHalfEdge(o);if(A===ae)this.setClusterHalfEdge_(o,x),this.setHalfEdgePrev_(x,S),this.setHalfEdgeNext_(S,x);else{const G=this.getHalfEdgePrev(A);this.setHalfEdgePrev_(A,S),this.setHalfEdgeNext_(S,A),this.setHalfEdgeNext_(G,x),this.setHalfEdgePrev_(x,G)}this.setHalfEdgeOrigin_(S,_);const D=this.getClusterHalfEdge(_);if(D===ae)this.setClusterHalfEdge_(_,S),this.setHalfEdgeNext_(x,S),this.setHalfEdgePrev_(S,x);else{const G=this.getHalfEdgePrev(D);this.setHalfEdgePrev_(D,x),this.setHalfEdgeNext_(x,D),this.setHalfEdgeNext_(G,S),this.setHalfEdgePrev_(S,G)}const N=this.getGeometryID(c);if(e===ma.enumInputModeBuildGraph){const G=f===me.enumPolygon?N:0;if(this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeParentageIndex,0),this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeParentageIndex,G),this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeParentageIndexLeft,G),this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeParentageIndexLeft,0),this.m_bBuildGeometryParentageSets){const V=new Sh,B=this.m_shape.getGeometryUserIndex(c,this.m_geometryIDIndex);V.setBit(B),this.setEdgeBitSet_(x,V),this.setEdgeBitSet_(S,null),this.setLeftEdgeBitSet_(S,V),this.setLeftEdgeBitSet_(x,null)}}else if(e===ma.enumInputModeSimplifyWinding){const G=this.m_shape.getXY(r),V=this.m_shape.getXY(y);let B=0,W=0;G.compare(V)<0?B=1:W=-1,this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeWindingNumberIndex,B),this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeWindingNumberIndex,W)}else e===ma.enumInputModeSimplifyAlternate&&(this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeOddEvenNumberIndex,1),this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeOddEvenNumberIndex,1));const F=f===me.enumPolygon?Xh.c_EdgeBitMask:0;this.setHalfEdgeParentage_(x,N|F),this.setHalfEdgeParentage_(S,N|F)}}if(this.m_shape.hasCurves()){this.m_segmentIndexHe=this.createUserIndexForHalfEdges();for(let n=0,s=i.size();n<s;n++){const r=i.read(n);if(this.m_shape.getSegment(r)){const o=this.m_shape.getUserIndex(r,this.m_halfEdgeIndex);o!==ae&&(this.setHalfEdgeUserIndex(o,this.m_segmentIndexHe,this.m_shape.getVertexIndex(r)),this.setHalfEdgeUserIndex(this.getHalfEdgeTwin(o),this.m_segmentIndexHe,-2))}}}}mergeVertexListsOfEdges_(e,i){{const r=this.getHalfEdgeVertexIterator(i);if(r!==ae){const o=this.getHalfEdgeVertexIterator(e);this.m_clusterVertices.setField(r,1,o),this.setHalfEdgeVertexIterator_(e,r),this.setHalfEdgeVertexIterator_(i,ae)}}const n=this.getHalfEdgeTwin(e),s=this.getHalfEdgeTwin(i);{const r=this.getHalfEdgeVertexIterator(s);if(r!==ae){const o=this.getHalfEdgeVertexIterator(n);this.m_clusterVertices.setField(r,1,o),this.setHalfEdgeVertexIterator_(n,r),this.setHalfEdgeVertexIterator_(s,ae)}}if(this.m_segmentIndexHe!==-1){let r=this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe);if(r!==-1){if(r===-2){const o=this.getHalfEdgeUserIndex(i,this.m_segmentIndexHe);this.setHalfEdgeUserIndex(e,this.m_segmentIndexHe,o)}if(r=this.getHalfEdgeUserIndex(n,this.m_segmentIndexHe),r===-2){const o=this.getHalfEdgeUserIndex(s,this.m_segmentIndexHe);this.setHalfEdgeUserIndex(n,this.m_segmentIndexHe,o)}}}}sortHalfEdgesByAngle_(e){const i=[];for(let n=this.getFirstCluster();n!==ae;n=this.getNextCluster(n)){i.length=0;const s=this.getClusterHalfEdge(n);if(s!==ae){let r=s;do i.push(r),r=this.getHalfEdgeNext(this.getHalfEdgeTwin(r));while(r!==s);if(i.length>1){let o=!0;i.length>2?(i.sort((x,S)=>this.compareEdgeAngles_(x,S)),i.push(i[0])):this.compareEdgeAnglesForPair_(i[0],i[1])>0?i[1]=Et(i[0],i[0]=i[1]):o=!1;let l=i[0],c=l,f=this.getHalfEdgeTo(c),y=this.getHalfEdgeTwin(c),_=ae;for(let x=1,S=i.length;x<S;x++){const P=i[x],A=this.getHalfEdgeTwin(P),D=this.getHalfEdgeOrigin(A);if(D!==f||P===c)this.updateVertexToHalfEdgeConnection_(_,!1),_=ae,c=P,f=D,y=A;else{if(e===ma.enumInputModeBuildGraph){const N=this.getHalfEdgeParentageMask_(c)|this.getHalfEdgeParentageMask_(P);if(this.setHalfEdgeParentage_(c,N),this.setHalfEdgeParentage_(y,N),this.setHalfEdgeUserIndex(c,this.m_tmpHalfEdgeParentageIndex,this.getHalfEdgeUserIndex(c,this.m_tmpHalfEdgeParentageIndex)|this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeParentageIndex)),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndex,this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndex)|this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeParentageIndex)),this.setHalfEdgeUserIndex(c,this.m_tmpHalfEdgeParentageIndexLeft,this.getHalfEdgeUserIndex(c,this.m_tmpHalfEdgeParentageIndexLeft)|this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeParentageIndexLeft)),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndexLeft,this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndexLeft)|this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeParentageIndexLeft)),this.m_bBuildGeometryParentageSets){let F,G,V;F=this.getEdgeBitSet_(c),G=this.getEdgeBitSet_(P),V=new Sh({copy:F}),V.assignOr(G),this.setEdgeBitSet_(c,V),F=this.getEdgeBitSet_(y),G=this.getEdgeBitSet_(A),V=new Sh({copy:F}),V.assignOr(G),this.setEdgeBitSet_(y,V),F=this.getLeftEdgeBitSet_(c),G=this.getLeftEdgeBitSet_(P),V=new Sh({copy:F}),V.assignOr(G),this.setLeftEdgeBitSet_(c,V),F=this.getLeftEdgeBitSet_(y),G=this.getLeftEdgeBitSet_(A),V=new Sh({copy:F}),V.assignOr(G),this.setLeftEdgeBitSet_(y,V)}}else if(this.m_tmpHalfEdgeWindingNumberIndex!==-1){const N=this.getHalfEdgeUserIndex(c,this.m_tmpHalfEdgeWindingNumberIndex)+this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeWindingNumberIndex),F=this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeWindingNumberIndex)+this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeWindingNumberIndex);this.setHalfEdgeUserIndex(c,this.m_tmpHalfEdgeWindingNumberIndex,N),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeWindingNumberIndex,F)}else if(this.m_tmpHalfEdgeOddEvenNumberIndex!==-1){const N=this.getHalfEdgeUserIndex(c,this.m_tmpHalfEdgeOddEvenNumberIndex)+this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeOddEvenNumberIndex),F=this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeOddEvenNumberIndex)+this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeOddEvenNumberIndex);this.setHalfEdgeUserIndex(c,this.m_tmpHalfEdgeOddEvenNumberIndex,N),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeOddEvenNumberIndex,F)}this.mergeVertexListsOfEdges_(c,P),this.deleteEdgeImpl_(P),_=c,i[x]=ae,P===l&&(i[0]=ae,l=ae)}}if(this.updateVertexToHalfEdgeConnection_(_,!1),_=ae,!o){l=ae;for(let x=0,S=i.length;x<S;x++){const P=i[x];if(P!==ae){l=P;break}}s!==l&&this.setClusterHalfEdge_(n,l);continue}l=ae;for(let x=0,S=i.length;x<S;x++){const P=i[x];if(P===ae)continue;if(l===ae){l=P,c=l,f=this.getHalfEdgeTo(c),y=this.getHalfEdgeTwin(c);continue}if(P===c)continue;const A=this.getHalfEdgeTwin(P),D=this.getHalfEdgeOrigin(A);this.setHalfEdgeNext_(y,P),this.setHalfEdgePrev_(P,y),c=P,f=D,y=A}this.setClusterHalfEdge_(n,l)}}}}sortHalfEdgesByAngleHelper_(e){K(0)}sortHalfEdgesByAngle3D_(e){K(0)}buildChains_(e){this.m_universeChain=this.newChain_(),this.setChainHalfEdge_(this.m_universeChain,ae);let i=this.m_universeChain;const n=this.createUserIndexForHalfEdges();for(let s=this.getFirstCluster();s!==ae;s=this.getNextCluster(s)){const r=this.getClusterHalfEdge(s);if(r!==ae){let o=r;do{if(this.getHalfEdgeUserIndex(o,n)!==1){const l=this.newChain_();this.setChainHalfEdge_(l,o),this.setChainPrev_(l,i),this.setChainNext_(i,l);let c=null;this.m_bBuildGeometryParentageSets&&(c=new Sh),i=l;let f=0,y=o;do this.m_tmpHalfEdgeParentageIndex!==-1&&(f|=this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndex)),this.m_bBuildGeometryParentageSets&&c.assignOr(this.getEdgeBitSet_(y)),this.setHalfEdgeChain_(y,l),this.setHalfEdgeUserIndex(y,n,1),y=this.getHalfEdgeNext(y);while(y!==o);this.m_bBuildGeometryParentageSets&&this.setChainBitSet_(l,c),this.setChainParentage_(l,f)}o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o))}while(o!==r)}}this.m_chainAreas=new fd(this.m_chainData.size(),Number.NaN),this.m_chainPerimeters=new fd(this.m_chainData.size(),Number.NaN),this.setChainArea_(this.m_universeChain,Number.POSITIVE_INFINITY),this.setChainPerimeter_(this.m_universeChain,Number.POSITIVE_INFINITY),this.deleteUserIndexForHalfEdges(n)}simplify_(e){K(0)}simplifyAlternate_(){K(0)}simplifyWinding_(){K(0)}setEditShapeImpl_(e,i,n,s,r){this.removeShape(),this.m_bBuildChains=r,this.m_shape=e,this.m_geometryIDIndex=this.m_shape.createGeometryUserIndex();let o=this.m_shape.getTotalPointCount();if(n){o=0;for(let S=0,P=n.length;S<P;S++)o+=this.m_shape.getPointCount(n[S])}const l=new On(0);let c=0,f=0;{let S=n!=null?n[0]:this.m_shape.getFirstGeometry(),P=1;for(;S!==ae;){this.m_shape.setGeometryUserIndex(S,this.m_geometryIDIndex,f++);for(let A=this.m_shape.getFirstPath(S);A!==ae;A=this.m_shape.getNextPath(A)){let D=this.m_shape.getFirstVertex(A);for(let N=0,F=this.m_shape.getPathSize(A);N<F;N++)l.add(D),D=this.m_shape.getNextVertex(D)}V0(this.m_shape.getGeometryType(S))||(c+=this.m_shape.getPathCount(S)),n!=null?(S=P<n.length?n[P]:ae,P++):S=this.m_shape.getNextGeometry(S)}}this.m_universeGeomID=1<<Math.min(f,31),this.m_pointCount=l.size(),this.m_shape.sortVerticesSimpleByY(l,0,this.m_pointCount),this.m_clusterVertices.setCapacity(this.m_pointCount),this.progress_(s,!0),this.m_clusterData.setCapacity(this.m_pointCount+10),this.m_halfEdgeData.setCapacity(2*this.m_pointCount+32),this.m_chainData.setCapacity(Math.max(32,c)),this.m_clusterIndex=this.m_shape.createUserIndex();const y=Y.getNAN();let _=0;const x=Y.getNAN();for(let S=0;S<=this.m_pointCount;S++){if(S<this.m_pointCount){const P=l.read(S);this.m_shape.queryXY(P,x)}else x.setNAN();if(!y.isEqualPoint2D(x)){if(_<S){const P=this.newCluster_();let A=ae,D=-1;for(let N=_;N<S;N++){D=l.read(N),this.m_shape.setUserIndex(D,this.m_clusterIndex,P);const F=this.m_clusterVertices.newElement();this.m_clusterVertices.setField(F,0,D),this.m_clusterVertices.setField(F,1,A),A=F;const G=this.m_shape.getPathFromVertex(D),V=this.m_shape.getGeometryFromPath(G),B=this.getGeometryID(V);this.setClusterParentage_(P,this.getClusterParentage(P)|B)}this.setClusterVertexIterator_(P,A),this.setClusterVertexIndex_(P,this.m_shape.getVertexIndex(D)),this.m_lastCluster!==ae&&this.setNextCluster_(this.m_lastCluster,P),this.setPrevCluster_(P,this.m_lastCluster),this.m_lastCluster=P,this.m_firstCluster===ae&&(this.m_firstCluster=P)}_=S,y.setCoordsPoint2D(x)}}if(this.m_shape.hasSegmentParentage()){this.m_clusterBreakNodeIndex===-1&&(this.m_clusterBreakNodeIndex=this.createUserIndexForClusters());for(let S=0;S<this.m_pointCount;S++){const P=l.read(S);if(this.m_shape.getSegmentParentageBreakVertex(P)){const A=this.getClusterFromVertex(P);this.setBreakNode(A,!0)}}}this.progress_(s,!0);{let S=n!=null?n[0]:this.m_shape.getFirstGeometry(),P=1;for(;S!==ae;){for(let A=this.m_shape.getFirstPath(S);A!==ae;A=this.m_shape.getNextPath(A)){if(this.m_shape.isStrongPathStart(A)){const D=this.m_shape.getFirstVertex(A),N=this.getClusterFromVertex(D);this.setStrongPathNode(N,!0)}if(this.m_shape.isStrongPathEnd(A)){const D=this.m_shape.isClosedPath(A)?this.m_shape.getFirstVertex(A):this.m_shape.getLastVertex(A),N=this.getClusterFromVertex(D);this.setStrongPathNode(N,!0)}}n!=null?(S=P<n.length?n[P]:ae,P++):S=this.m_shape.getNextGeometry(S)}}if(i===ma.enumInputModeBuildGraph&&(this.m_tmpHalfEdgeParentageIndex=this.createUserIndexForHalfEdges(),this.m_tmpHalfEdgeParentageIndexLeft=this.createUserIndexForHalfEdges()),i===ma.enumInputModeSimplifyWinding&&(this.m_tmpHalfEdgeWindingNumberIndex=this.createUserIndexForHalfEdges()),i===ma.enumInputModeSimplifyAlternate&&(this.m_tmpHalfEdgeOddEvenNumberIndex=this.createUserIndexForHalfEdges()),this.createHalfEdges_(i,l),this.dbgNavigate_(),this.sortHalfEdgesByAngle_(i),!Number.isNaN(this.m_checkDirtyPlanesweepTolerance)&&!this.checkStructureAfterDirtySweep_())return this.m_bDirtyCheckFailed=!0,void this.cleanSetEditShapeImpl_();this.buildChains_(i),this.m_tmpHalfEdgeParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_bBuildChains&&this.planeSweepParentage_(i,s),this.m_tmpHalfEdgeParentageIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.dbgChkChainParents_(),this.dbgDumpChains_(),this.mergeSegmentParentage_(),this.dbgNavigate_(),this.dbgDumpChains_(),this.cleanSetEditShapeImpl_()}setEditShapeImpl3D_(e,i,n,s,r){K(0)}cleanSetEditShapeImpl_(){this.m_tmpHalfEdgeParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_tmpHalfEdgeParentageIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.m_tmpHalfEdgeWindingNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeWindingNumberIndex),this.m_tmpHalfEdgeWindingNumberIndex=-1),this.m_tmpHalfEdgeOddEvenNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeOddEvenNumberIndex),this.m_tmpHalfEdgeOddEvenNumberIndex=-1)}cleanSetEditShapeImpl3D_(){K(0)}dbgNavigate_(){}dbgChkChainParents_(){}deleteEdgeImpl_(e){const i=this.getHalfEdgeNext(e),n=this.getHalfEdgePrev(e),s=this.getHalfEdgeTwin(e),r=this.getHalfEdgeNext(s),o=this.getHalfEdgePrev(s);i!==s&&(this.setHalfEdgeNext_(o,i),this.setHalfEdgePrev_(i,o)),n!==s&&(this.setHalfEdgeNext_(n,r),this.setHalfEdgePrev_(r,n));const l=this.getHalfEdgeOrigin(e);this.getClusterHalfEdge(l)===e&&(r!==e?this.setClusterHalfEdge_(l,r):this.setClusterHalfEdge_(l,ae));const c=this.getHalfEdgeOrigin(s);this.getClusterHalfEdge(c)===s&&(i!==s?this.setClusterHalfEdge_(c,i):this.setClusterHalfEdge_(c,ae)),this.m_halfEdgeData.deleteElement(e),this.m_halfEdgeData.deleteElement(s)}getLeftSkipPolylines_(e,i){let n=i;for(;;){if(n=e.getPrev(n),n===-1)return ae;{const s=e.getElement(n);if(this.getHalfEdgeChain(s)!==this.getHalfEdgeChain(this.getHalfEdgeTwin(s)))return s}}}checkStructureAfterDirtySweep_(){const e=Xi(this.m_checkDirtyPlanesweepTolerance),i=new Y,n=new Y,s=new Y,r=new Y,o=new Y;for(let l=this.getFirstCluster();l!==ae;l=this.getNextCluster(l)){const c=this.getClusterHalfEdge(l);if(c!==ae){let f=c;this.getHalfEdgeFromXY(f,i),this.getHalfEdgeToXY(f,n),s.setSub(n,i);let y=s.sqrLength();do{const _=f;if(f=this.getHalfEdgeNext(this.getHalfEdgeTwin(f)),f!==_){this.getHalfEdgeToXY(f,r),o.setSub(r,i);const x=o.sqrLength(),S=o.crossProduct(s),P=S*S/(x*y);if(Math.min(x,y)*P<=e&&o.dotProduct(s)>=0)return!1;s.assign(o),y=x,n.assign(r)}}while(f!==c)}}return!0}extractPolygonPathFromChain_(e,i,n,s,r){const o=this.m_shape.hasSegmentParentage(),l=this.getChainHalfEdge(n);let c=l,f=ae;const y=new Ut;do{const _=this.getHalfEdgeTwin(c);if(this.getHalfEdgeChain(_)!==n){let x=ae;const S=this.getHalfEdgeOrigin(c);if(s===ae){const A=this.getClusterVertexIterator(S);x=this.getVertexFromVertexIterator(A)}else for(let A=this.getClusterVertexIterator(S);A!==ae;A=this.incrementVertexIterator(A)){const D=this.getVertexFromVertexIterator(A);x===ae&&(x=D);const N=this.m_shape.getPathFromVertex(D);if(this.m_shape.getGeometryFromPath(N)===s){x=D;break}}let P;if(f===ae&&(f=e.insertPath(i,ae),e.setClosedPath(f,!0)),this.m_shape===e?P=e.addVertex(f,x):(this.m_shape.queryPoint(x,y),P=e.addPoint(f,y)),this.isHalfEdgeCurve(c)&&(this.querySegmentXY(c,r),e.setSegmentToIndex(e.getVertexIndex(P),r.get().clone())),o){const A=this.getSegmentParentage(c);e.setSegmentParentageAndBreak(P,A,this.isBreakNode(S))}}c=this.getHalfEdgeNext(c)}while(c!==l)}mergeSegmentParentage_(){if(!this.m_shape.hasSegmentParentage())return;K(this.m_clusterBreakNodeIndex!==-1),K(this.m_segmentParentageIndex===-1);for(let s=this.getFirstCluster();s!==ae;s=this.getNextCluster(s)){let r=0;const o=this.getClusterHalfEdge(s);if(o!==ae){let l=o;do r++,l=this.getHalfEdgeNext(this.getHalfEdgeTwin(l));while(l!==o&&r<3)}r!==2&&this.setBreakNode(s,!0)}let e=[],i=[];this.m_segmentParentageIndex=this.createUserIndexForHalfEdges();const n=this.createUserIndexForHalfEdges();for(let s=this.getFirstCluster();s!==ae;s=this.getNextCluster(s)){const r=this.getClusterHalfEdge(s);if(r!==ae){let o=!1,l=r;do{let c=l;for(;this.getHalfEdgeUserIndex(c,n)===-1;){const f=this.getHalfEdgeNext(c),y=this.getHalfEdgeTwin(c);ane(this,c,i);const _=i.at(-1).parentage;if(!o){const S=this.getHalfEdgeOrigin(c);if(!this.isBreakNode(S)){const P=this.getHalfEdgePrev(c);c!==P&&(ane(this,P,e),o=!0)}}if(o&&!Git(i,e)){const S=this.getHalfEdgeOrigin(c);this.setBreakNode(S,!0)}e=Et(i,i=e),o=!0;const x=this.getHalfEdgeOrigin(f);this.isBreakNode(x)&&(o=!1),this.setHalfEdgeUserIndex(c,this.m_segmentParentageIndex,_),this.setHalfEdgeUserIndex(y,this.m_segmentParentageIndex,_),this.setHalfEdgeUserIndex(c,n,1),this.setHalfEdgeUserIndex(y,n,1),c=f}l=this.getHalfEdgeNext(this.getHalfEdgeTwin(l))}while(l!==r)}}this.deleteUserIndexForHalfEdges(n)}registerNewBitSet(e){return this.m_uniqueBitSets===null&&(this.m_uniqueBitSets=jit(),this.m_uniqueBitSets.add(this.getEmptySet())),e===null?this.getEmptySet():this.m_uniqueBitSets.has(e)?this.m_uniqueBitSets.get(e):(this.m_uniqueBitSets.add(e),e)}getLeftEdgeBitSet_(e){const i=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft);return K(i>=0),K(this.m_edgeBitSets.at(i)),this.m_edgeBitSets.at(i)}getEdgeBitSet_(e){const i=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndex);return K(i>=0),this.m_edgeBitSets.at(i)}setEdgeBitSet_(e,i){K(this.m_bBuildGeometryParentageSets),i=this.registerNewBitSet(i),this.m_edgeBitSetIndex===-1&&(this.m_edgeBitSetIndex=this.createUserIndexForHalfEdges());const n=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndex);n!==-1?this.m_edgeBitSets[n]=i:(this.setHalfEdgeUserIndex(e,this.m_edgeBitSetIndex,this.m_edgeBitSets.length),this.m_edgeBitSets.push(i))}setLeftEdgeBitSet_(e,i){K(this.m_bBuildGeometryParentageSets),i=this.registerNewBitSet(i),this.m_edgeBitSetIndexLeft===-1&&(this.m_edgeBitSetIndexLeft=this.createUserIndexForHalfEdges());const n=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft);n!==-1?this.m_edgeBitSets[n]=i:(this.setHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft,this.m_edgeBitSets.length),this.m_edgeBitSets.push(i))}setChainBitSet_(e,i){K(this.m_bBuildGeometryParentageSets),i=this.registerNewBitSet(i),this.m_chainBitSetIndex===-1&&(this.m_chainBitSetIndex=this.createUserIndexForChains());const n=this.getChainUserIndex(e,this.m_chainBitSetIndex);n!==-1?this.m_chainBitSets[n]=i:(this.setChainUserIndex(e,this.m_chainBitSetIndex,this.m_chainBitSets.length),this.m_chainBitSets.push(i))}getEmptySet(){return this.m_emptyBitSet||(this.m_emptyBitSet=new Sh),this.m_emptyBitSet}deleteEdgeBitSets_(){this.m_edgeBitSetIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_edgeBitSetIndex),this.m_edgeBitSetIndex=-1),this.m_edgeBitSetIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_edgeBitSetIndexLeft),this.m_edgeBitSetIndexLeft=-1),this.m_edgeBitSets.length=0,this.m_uniqueBitSets=null}deleteChainBitSets_(){this.m_chainBitSetIndex!==-1&&(this.deleteUserIndexForChains(this.m_chainBitSetIndex),this.m_chainBitSetIndex=-1,this.m_chainBitSets.length=0)}dbgPrintEdge_(e){K(0)}dbgVerifyEdgeSegment(e){K(0)}}Xh.c_EdgeParentageMask=2147483647,Xh.c_EdgeBitMask=1<<31;class En{freeNode_(e){this.m_listNodes.deleteElement(e)}newNode_(){return this.m_listNodes.newElement()}freeList_(e){this.m_lists.deleteElement(e)}newList_(){return this.m_lists.newElement()}Init_(e){K(0)}constructor(e){this.m_listNodes=new Yt(2),this.m_listOfLists=En.st_nullNode(),this.m_bAllowNavigationBetweenLists=!0,e===void 0&&(e=!0),this.m_bAllowNavigationBetweenLists=e,this.m_lists=new Yt(this.m_bAllowNavigationBetweenLists?4:2)}createList(){const e=this.newList_();return this.m_bAllowNavigationBetweenLists&&(this.m_lists.setField(e,3,this.m_listOfLists),this.m_listOfLists!==En.st_nullNode()&&this.m_lists.setField(this.m_listOfLists,2,e),this.m_listOfLists=e),e}deleteList(e){let i=this.getFirst(e);for(;i!==En.st_nullNode();){const n=i;i=this.getNext(i),this.freeNode_(n)}if(this.m_bAllowNavigationBetweenLists){const n=this.m_lists.getField(e,2),s=this.m_lists.getField(e,3);n!==En.st_nullNode()?this.m_lists.setField(n,3,s):this.m_listOfLists=s,s!==En.st_nullNode()&&this.m_lists.setField(s,2,n)}this.freeList_(e)}reserveLists(e){this.m_lists.setCapacity(e)}addElement(e,i){this.m_lists.getField(e,0);const n=this.m_lists.getField(e,1),s=this.newNode_();return n!==En.st_nullNode()?(this.m_listNodes.setField(n,1,s),this.m_lists.setField(e,1,s)):(this.m_lists.setField(e,0,s),this.m_lists.setField(e,1,s)),this.m_listNodes.setField(s,0,i),s}reserveNodes(e){this.m_listNodes.setCapacity(e)}deleteElementDirect(e,i,n){i!==En.st_nullNode()?(this.m_listNodes.setField(i,1,this.m_listNodes.getField(n,1)),this.m_lists.getField(e,1)===n&&this.m_lists.setField(e,1,i)):(this.m_lists.setField(e,0,this.m_listNodes.getField(n,1)),this.m_lists.getField(e,1)===n&&this.m_lists.setField(e,1,En.st_nullNode())),this.freeNode_(n)}deleteElementSearch(e,i){let n=-1,s=this.getFirst(e);for(;s!==i;)n=s,s=this.getNext(s);this.deleteElementDirect(e,n,i)}concatenateLists(e,i){const n=this.m_lists.getField(e,1),s=this.m_lists.getField(i,0);if(s!==En.st_nullNode()&&(n!==En.st_nullNode()?(this.m_listNodes.setField(n,1,s),this.m_lists.setField(e,1,this.m_lists.getField(i,1))):(this.m_lists.setField(e,0,s),this.m_lists.setField(e,1,this.m_lists.getField(i,1)))),this.m_bAllowNavigationBetweenLists){const r=this.m_lists.getField(i,2),o=this.m_lists.getField(i,3);r!==En.st_nullNode()?this.m_lists.setField(r,3,o):this.m_listOfLists=o,o!==En.st_nullNode()&&this.m_lists.setField(o,2,r)}return this.freeList_(i),e}getElement(e){return this.m_listNodes.getField(e,0)}getData(e){return this.getElement(e)}setElement(e,i){K(0)}getNext(e){return this.m_listNodes.getField(e,1)}getFirst(e){return this.m_lists.getField(e,0)}getFirstElement(e){const i=this.getFirst(e);return this.getElement(i)}static st_nullNode(){return-1}clear(){this.m_listNodes.deleteAll(!0),this.m_lists.deleteAll(!0),this.m_listOfLists=En.st_nullNode()}isEmpty(e){return K(0),!1}getNodeCount(){return this.m_listNodes.size()}getListCount(){return this.m_lists.size()}getFirstList(){return this.m_listOfLists}getNextList(e){return this.m_lists.getField(e,3)}}function aO(t=-1){return{m_value:t,m_line:new ni,m_segment:null,m_segmentInfo:new hq(-1),m_env:new Ze(0,0),m_dxdy:55555555,m_bHorizontal:!1,m_bCurve:!1}}const Bit=67;class Tye extends Jv{constructor(e,i,n){super(!0),this.m_bIntersectionDetected=!1,this.m_nonSimpleResult=new Sn,this.m_tempSimpleEdge1=aO(),this.m_tempSimpleEdge2=aO(),this.m_prev1=ae,this.m_prev2=ae,this.m_vertex1=ae,this.m_vertex2=ae,this.m_currentNode=-1,this.m_prevX1=Number.NaN,this.m_prevX2=Number.NaN,this.m_prevY=Number.NaN,this.m_prevX=0,this.m_sweepY=Number.NaN,this.m_sweepX=0,this.m_ptSweep=new Y,this.m_simpleEdgesCache=[],this.m_simpleEdgesRecycle=[],this.m_cOutstandingConstructedEdges=0,this.m_shape=e,this.m_bShapeHasSegments=this.m_shape.hasCurves(),this.m_tolerance=i,this.m_tolerance10=10*i,this.m_bIsSimple=n;const s=Math.trunc(Math.min(3*e.getTotalPointCount()/2,Bit)),r=Math.min(7,s);this.m_simpleEdgesCache.length=r}tryGetCachedEdge_(e){const i=this.m_simpleEdgesCache[(e&_a())%this.m_simpleEdgesCache.length];return i&&i.m_value===e?i:null}tryDeleteCachedEdge_(e){const i=(e&_a())%this.m_simpleEdgesCache.length,n=this.m_simpleEdgesCache[i];n&&n.m_value===e&&(this.m_simpleEdgesRecycle.push(n),this.m_simpleEdgesCache[i]=null)}tryCreateCachedEdge_(e){const i=(e&_a())%this.m_simpleEdgesCache.length;let n=this.m_simpleEdgesCache[i];return n?null:(this.m_simpleEdgesRecycle.length===0?(n=aO(),this.m_cOutstandingConstructedEdges++):n=this.m_simpleEdgesRecycle.pop(),n.m_value=e,this.m_simpleEdgesCache[i]=n,n)}initSimpleEdge_(e,i){this.m_bShapeHasSegments&&this.initSimpleEdgeHelper_(e,i)||e.m_bCurve||(this.m_shape.queryLineConnector(i,e.m_line,!0),e.m_segment=e.m_line,e.m_env.setCoordsNoNAN(e.m_line.getStartX(),e.m_line.getEndX()),e.m_env.vmax+=this.m_tolerance,e.m_line.orientBottomUp(),e.m_bHorizontal=e.m_line.getEndY()===e.m_line.getStartY(),e.m_bHorizontal||(e.m_dxdy=(e.m_line.getEndX()-e.m_line.getStartX())/(e.m_line.getEndY()-e.m_line.getStartY())))}initSimpleEdgeHelper_(e,i){if(e.m_segment=this.m_shape.getSegment(i),e.m_segmentInfo=this.m_shape.getOriginalSegmentInfo(i),e.m_bCurve=e.m_segment!==null,e.m_bCurve){const n=e.m_segment.clone();return n.orientBottomUp(),e.m_segment=n,e.m_env=e.m_segment.queryInterval(0,0),e.m_env.vmax+=this.m_tolerance,!0}return!1}compareTwoSegments_(e,i){const n=e.getStartXY(),s=e.getEndXY(),r=i.getStartXY(),o=i.getEndXY();if(this.m_ptSweep.setCoords(this.m_sweepX,this.m_sweepY),n.isEqualPoint2D(r)&&this.m_sweepY===n.y){this.m_ptSweep.assign(s.compare(o)<0?s:o);const _=e.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),x=i.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x);if(Math.abs(_-x)>this.m_tolerance)return _<x?-1:1}const l=n.compare(r)<0?r:n,c=s.compare(o)<0?s:o;let f=0,y=0;for(let _=1;_<5;_++){cr(l,c,_/5,this.m_ptSweep);const x=e.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),S=i.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),P=Math.abs(x-S);P>f&&(f=P,y=x<S?-1:1)}return y===0?this.errorCracking():y}compareNonHorizontal_(e,i){if(e.m_line.getStartY()===i.m_line.getStartY()&&e.m_line.getStartX()===i.m_line.getStartX())return e.m_line.getEndY()===i.m_line.getEndY()&&e.m_line.getEndX()===i.m_line.getEndX()?this.m_bIsSimple?this.errorCoincident():0:this.compareNonHorizontalUpperEnd_(e,i);if(e.m_line.getEndY()===i.m_line.getEndY()&&e.m_line.getEndX()===i.m_line.getEndX())return this.compareNonHorizontalLowerEnd_(e,i);const n=this.compareNonHorizontalLowerEnd_(e,i),s=this.compareNonHorizontalUpperEnd_(e,i);return n<0&&s<0?-1:n>0&&s>0?1:this.errorCracking()}compareHorizontal1Case1_(e,i){if(e.getEndX()>i.getEndX()){if(i.getEndX()>i.getStartX()&&i.getEndY()-i.getStartY()<2*this.m_tolerance&&e.isIntersectingPoint(i.getEndXY(),this.m_tolerance,!0))return this.errorCracking()}else if((i.getEndY()-i.getStartY())/(i.getEndX()-i.getStartX())*(e.getEndX()-e.getStartX())<this.m_tolerance10&&i.isIntersectingPoint(e.getEndXY(),this.m_tolerance,!0))return this.errorCracking();return 1}compareHorizontal1Case2_(e,i){if(e.getStartX()<i.getStartX()){if(i.getEndX()>i.getStartX()&&i.getEndY()-i.getStartY()<2*this.m_tolerance&&e.isIntersectingPoint(i.getEndXY(),this.m_tolerance,!0))return this.errorCracking()}else if((i.getEndY()-i.getStartY())/(i.getEndX()-i.getStartX())*(e.getStartX()-e.getEndX())<this.m_tolerance10&&i.isIntersectingPoint(e.getStartXY(),this.m_tolerance,!0))return this.errorCracking();return-1}compareHorizontal1Case3_(e,i){const n=Y.getNAN();n.setSub(i.getEndXY(),i.getStartXY()),n.rightPerpendicularThis(),n.normalize();const s=Y.getNAN();s.setSub(e.getStartXY(),i.getStartXY());const r=Y.getNAN();r.setSub(e.getEndXY(),i.getStartXY());const o=s.dotProduct(n),l=r.dotProduct(n),c=Math.abs(o),f=Math.abs(l);if(c<f){if(c<this.m_tolerance10&&i.isIntersectingPoint(e.getStartXY(),this.m_tolerance,!0))return this.errorCracking()}else if(f<this.m_tolerance10&&i.isIntersectingPoint(e.getEndXY(),this.m_tolerance,!0))return this.errorCracking();return o<0&&l<0?-1:o>0&&l>0?1:this.errorCracking()}compareHorizontal1_(e,i){return e.getStartY()===i.getStartY()&&e.getStartX()===i.getStartX()?this.compareHorizontal1Case1_(e,i):e.getEndY()===i.getEndY()&&e.getEndX()===i.getEndX()?this.compareHorizontal1Case2_(e,i):this.compareHorizontal1Case3_(e,i)}compareHorizontal2_(e,i){return e.getEndY()===i.getEndY()&&e.getEndX()===i.getEndX()&&e.getStartY()===i.getStartY()&&e.getStartX()===i.getStartX()?this.m_bIsSimple?this.errorCoincident():0:this.errorCracking()}compareNonHorizontalLowerEnd_(e,i){let n=1;if(e.m_line.getStartY()<i.m_line.getStartY()){n=-1;const f=e;e=i,i=f}const s=e.m_line,r=i.m_line,o=s.getStartX()-r.getStartX(),l=i.m_dxdy*(s.getStartY()-r.getStartY()),c=this.m_tolerance10;return o<l-c?-n:o>l+c?n:r.isIntersectingPoint(s.getStartXY(),this.m_tolerance,!0)?this.errorCracking():o<l?-n:n}compareNonHorizontalUpperEnd_(e,i){let n=1;if(i.m_line.getEndY()<e.m_line.getEndY()){n=-1;const f=e;e=i,i=f}const s=e.m_line,r=i.m_line,o=s.getEndX()-r.getStartX(),l=i.m_dxdy*(s.getEndY()-r.getStartY()),c=this.m_tolerance10;return o<l-c?-n:o>l+c?n:r.isIntersectingPoint(s.getEndXY(),this.m_tolerance,!0)?this.errorCracking():o<l?-n:n}errorCoincident(){this.m_bIntersectionDetected=!0;const e=7;return this.m_nonSimpleResult=new Sn(e,this.m_vertex1,this.m_vertex2),-1}errorCracking(){return this.m_bIntersectionDetected=!0,this.m_bIsSimple?this.m_nonSimpleResult=new Sn(6,this.m_vertex1,this.m_vertex2):(this.m_prev1=ae,this.m_prev2=ae,this.m_vertex1=ae,this.m_vertex2=ae),-1}compareSegments_(e,i,n,s){if(n.m_env.vmax<s.m_env.vmin)return-1;if(s.m_env.vmax<n.m_env.vmin)return 1;if(!n.m_bCurve&&!s.m_bCurve){let f=n.m_bHorizontal?1:0;return f|=s.m_bHorizontal?2:0,f===0?this.compareNonHorizontal_(n,s):f===1?this.compareHorizontal1_(n.m_line,s.m_line):f===2?-1*this.compareHorizontal1_(s.m_line,n.m_line):this.compareHorizontal2_(n.m_line,s.m_line)}if(this.m_bIntersectionDetected)return-1;const r=this.m_prevY===this.m_sweepY&&this.m_prevX===this.m_sweepX;let o,l;if(r&&e===this.m_prev1?o=this.m_prevX1:(o=Number.NaN,this.m_prev1=ae),r&&i===this.m_prev2?l=this.m_prevX2:(l=Number.NaN,this.m_prev2=ae),this.m_prevY=this.m_sweepY,this.m_prevX=this.m_sweepX,Number.isNaN(o)){this.m_prev1=e;const f=n.m_segment.intersectionOfYMonotonicWithAxisX(this.m_sweepY,this.m_sweepX);o=f,this.m_prevX1=f}if(Number.isNaN(l)){this.m_prev2=i;const f=s.m_segment.intersectionOfYMonotonicWithAxisX(this.m_sweepY,this.m_sweepX);l=f,this.m_prevX2=f}const c=j7(!0,!0,n.m_segment,s.m_segment,this.m_tolerance,!0);return c!==0?c===2?this.m_bIsSimple?this.errorCoincident():n.m_segmentInfo.equals(s.m_segmentInfo)?0:this.errorCracking():this.errorCracking():Math.abs(o-l)<=this.m_tolerance?this.compareTwoSegments_(n.m_segment,s.m_segment):o<l?-1:o>l?1:0}clearIntersectionDetectedFlag(){this.m_bIntersectionDetected=!1}intersectionDetected(){return this.m_bIntersectionDetected}getLastComparedNode(){return this.m_currentNode}getResult(){return this.m_nonSimpleResult}setSweepY(e,i){this.m_sweepY=e,this.m_sweepX=i,this.m_prev1=ae,this.m_prev2=ae,this.m_vertex1=ae,this.m_vertex2=ae}compare(e,i,n){if(this.m_bIntersectionDetected)return-1;const s=e.getElement(n),r=i;return this.m_currentNode=n,this.compareSegments(r,r,s,s)}compareSegments(e,i,n,s){let r=this.tryGetCachedEdge_(e);r===null?this.m_vertex1===i?r=this.m_tempSimpleEdge1:(this.m_vertex1=i,r=this.tryCreateCachedEdge_(e),r===null&&(r=this.m_tempSimpleEdge1,this.m_tempSimpleEdge1.m_value=e),this.initSimpleEdge_(r,i)):this.m_vertex1=i;let o=this.tryGetCachedEdge_(n);return o===null?this.m_vertex2===s?o=this.m_tempSimpleEdge2:(this.m_vertex2=s,o=this.tryCreateCachedEdge_(n),o===null&&(o=this.m_tempSimpleEdge2,this.m_tempSimpleEdge2.m_value=n),this.initSimpleEdge_(o,s)):this.m_vertex2=s,this.compareSegments_(i,s,r,o)}onDelete(e){this.tryDeleteCachedEdge_(e)}onSet(e){this.tryDeleteCachedEdge_(e)}onEndSearch(e){this.tryDeleteCachedEdge_(e)}onAddUniqueElementFailed(e){this.tryDeleteCachedEdge_(e)}}class Iye{constructor(e,i){this.m_bIntersectionDetected=!1,this.m_pointOfInterest=Y.getNAN(),this.m_line1=new ni,this.m_seg1=null,this.m_env=Ze.constructEmpty(),this.m_vertex1=-1,this.m_currentNode=-1,this.m_minDist=Number.MAX_VALUE,this.m_shape=e,this.m_tolerance=i}getCurrentNode(){return this.m_currentNode}clearIntersectionDetectedFlag(){this.m_bIntersectionDetected=!1,this.m_minDist=Number.MAX_VALUE}intersectionDetected(){return this.m_bIntersectionDetected}setPoint(e){this.m_pointOfInterest.assign(e)}compare(e,i){const n=e.getElement(i);return this.compareVertex(e,i,n)}compareVertex(e,i,n){let s,r=this.m_shape.getSegment(n),o=!0;if(r==null)this.m_shape.queryLineConnector(n,this.m_line1,!0),this.m_env.setCoordsNoNAN(this.m_line1.getStartX(),this.m_line1.getEndX()),r=this.m_line1,s=this.m_line1.getStartY()===this.m_line1.getEndY();else{const c=xe.constructEmpty();r.queryLooseEnvelope(c),c.queryIntervalX(this.m_env),s=c.height()===0,o=!1}if(this.m_pointOfInterest.x+this.m_tolerance<this.m_env.vmin)return-1;if(this.m_pointOfInterest.x-this.m_tolerance>this.m_env.vmax)return 1;if(s)return this.m_currentNode=i,this.m_bIntersectionDetected=!0,0;let l=0;if(o){R1e(this.m_line1);const c=this.m_line1.getStartXY(),f=new Y;f.setSub(this.m_line1.getEndXY(),c),f.rightPerpendicularThis();const y=new Y;y.setSub(this.m_pointOfInterest,c),l=f.dotProduct(y),l/=f.length()}else l=r.intersectionOfYMonotonicWithAxisX(this.m_pointOfInterest.y,this.m_pointOfInterest.x)-this.m_pointOfInterest.x;return l<10*-this.m_tolerance?-1:l>10*this.m_tolerance?1:(r.isIntersectingPoint(this.m_pointOfInterest,this.m_tolerance)&&(Math.abs(l)<this.m_minDist&&(this.m_currentNode=i,this.m_minDist=l),this.m_bIntersectionDetected=!0),l<0?-1:l>0?1:0)}}class Jb{constructor(e,i){this.m_lists=new En(!1),this.m_hash=i,this.m_hashBuckets=new Int32Array(e),this.m_hashBuckets.fill(Jb.st_nullNode()),this.m_bitFilter=new Int32Array(10*e+31>>5)}reserveElements(e){this.m_lists.reserveLists(Math.min(this.m_hashBuckets.length,e)),this.m_lists.reserveNodes(e)}addElement(e,i){i===void 0&&(i=this.m_hash.getHash(e));const n=i%(this.m_bitFilter.length<<5);this.m_bitFilter[n>>5]|=1<<(31&n);const s=i%this.m_hashBuckets.length;let r=this.m_hashBuckets[s];return r===En.st_nullNode()&&(r=this.m_lists.createList(),this.m_hashBuckets[s]=r),this.m_lists.addElement(r,e)}deleteElement(e,i){i===void 0&&(i=this.m_hash.getHash(e));const n=i%this.m_hashBuckets.length,s=this.m_hashBuckets[n];s===En.st_nullNode()&&Je("");let r=this.m_lists.getFirst(s),o=En.st_nullNode();for(;r!==En.st_nullNode();){const l=this.m_lists.getData(r),c=this.m_lists.getNext(r);l===e?(this.m_lists.deleteElementDirect(s,o,r),this.m_lists.getFirst(s)===En.st_nullNode()&&(this.m_lists.deleteList(s),this.m_hashBuckets[n]=En.st_nullNode())):o=r,r=c}}getFirstInBucket(e){const i=e%(this.m_bitFilter.length<<5);if(!(this.m_bitFilter[i>>5]&1<<(31&i)))return En.st_nullNode();const n=e%this.m_hashBuckets.length,s=this.m_hashBuckets[n];return s===En.st_nullNode()?En.st_nullNode():this.m_lists.getFirst(s)}getNextInBucket(e){return this.m_lists.getNext(e)}findNode(e){const i=this.m_hash.getHash(e);let n=this.getFirstInBucket(i);for(;n!==En.st_nullNode();){const s=this.m_lists.getData(n);if(this.m_hash.equal(s,e))return n;n=this.m_lists.getNext(n)}return En.st_nullNode()}getNextNode(e){return K(0),0}deleteNode(e){const i=this.getElement(e),n=this.m_hash.getHash(i)%this.m_hashBuckets.length,s=this.m_hashBuckets[n];s===En.st_nullNode()&&Je(""),this.m_lists.deleteElementSearch(s,e),this.m_lists.getFirst(s)===En.st_nullNode()&&(this.m_lists.deleteList(s),this.m_hashBuckets[n]=En.st_nullNode())}getElement(e){return this.m_lists.getData(e)}static st_nullNode(){return En.st_nullNode()}clear(){K(0)}size(){return this.m_lists.getNodeCount()}dbgPrintBucketHistogram(){K(0)}}function Mye(t,e,i,n,s){const r=new Yit(s);return r.m_shape=t,r.m_sqrTolerance=e*e,r.m_cellSize=2*e,r.m_invCellSize=1/r.m_cellSize,r.m_geometry=i,r.m_bTrackChanges=n,r.m_bHasSegmentParentage=t.hasSegmentParentage(),r.clusterNonReciprocal()}function vB(t,e,i,n,s){const r=t-i,o=e-n;return r*r+o*o<=s}function Hit(){return{pt:new Y,weight:0,rank:0,bMerged:!1}}function Aye(t,e,i,n,s,r){const o=Hit(),l=i+s;let c=!1,f=t.x;t.x!==e.x&&(n===r&&(f=(t.x*i+e.x*s)/l),c=!0);let y=t.y;return t.y!==e.y&&(n===r&&(y=(t.y*i+e.y*s)/l),c=!0),n!==r?n>r?(o.rank=n,o.weight=i,o.pt=t):(o.rank=r,o.weight=s,o.pt=e):(o.pt.setCoords(f,y),o.weight=l,o.rank=n),o.bMerged=c,o}function Uit(t,e,i,n,s,r,o,l,c){const f=t.equals(e);if(n>r)return o.assignCopy(t),c[0]=n,l[0]=i,f;if(r>n)return o=e,c[0]=r,l[0]=s,f;o.assignCopy(t);const y=Aye(t.getXY(),e.getXY(),i,n,s,r);return o.setXY(y.pt),l[0]=y.weight,c[0]=y.rank,f}function kye(t,e){const i=C1e(t);return PQe(i,e)}class lne{constructor(e,i,n,s,r){this.m_workPt=new Y,this.m_shape=e,this.m_sqrTolerance=n,this.m_invCellSize=s,this.m_origin=i.clone(),this.m_hashValues=r}getHash(e){return this.m_shape.getUserIndex(e,this.m_hashValues)}calculateHash(e){return K(0),0}calculateHashFromVertex(e){this.m_shape.queryXY(e,this.m_workPt);const i=this.m_workPt.x-this.m_origin.x,n=Math.trunc(i*this.m_invCellSize+.5),s=this.m_workPt.y-this.m_origin.y;return kye(n,Math.trunc(s*this.m_invCellSize+.5))}dbgCalculateHashFromXy(e,i){return K(0),0}equal(e,i){return K(0),!1}}class Yit{constructor(e){this.m_origin=Y.getNAN(),this.m_sqrTolerance=0,this.m_cellSize=0,this.m_invCellSize=0,this.m_geometry=ae,this.m_bucketArray=new Array(4),this.m_bucketHash=new Array(4),this.m_dbgCandidateCheckCount=0,this.m_nsr=new Sn,this.m_hashValues=-1,this.m_newClusters=-1,this.m_bTrackChanges=!1,this.m_bHasSegmentParentage=!1,this.m_shape=null,this.m_clusters=new En,this.m_hashFunction=null,this.m_hashTable=null,this.m_progressCounter=0,this.m_progressTracker=e}progress_(){}getNearestNeighbourCandidate(e,i,n,s,r){K(0)}findClusterCandidate(e,i){K(0)}collectClusterCandidates(e,i){const n=Y.getNAN();this.m_shape.queryXY(e,n);const s=(n.x-this.m_origin.x)*this.m_invCellSize,r=(n.y-this.m_origin.y)*this.m_invCellSize,o=Math.trunc(s),l=Math.trunc(r);let c=0;for(let f=0;f<=1;f+=1)for(let y=0;y<=1;y+=1){const _=kye(o+f,l+y),x=this.m_hashTable.getFirstInBucket(_);x!==Jb.st_nullNode()&&(this.m_bucketArray[c]=x,this.m_bucketHash[c]=_,c++)}for(let f=c-1;f>=1;f--){const y=this.m_bucketArray[f];for(let _=f-1;_>=0;_--)if(y===this.m_bucketArray[_]){this.m_bucketHash[_]=-1,c--,f!==c&&(this.m_bucketHash[f]=this.m_bucketHash[c],this.m_bucketArray[f]=this.m_bucketArray[c]);break}}for(let f=0;f<c;f++)this.collectNearestNeighbourCandidates(e,this.m_bucketHash[f],n,this.m_bucketArray[f],i)}collectNearestNeighbourCandidates(e,i,n,s,r){const o=Y.getNAN();for(let l=s;l!==Jb.st_nullNode();l=this.m_hashTable.getNextInBucket(l)){const c=this.m_hashTable.getElement(l);e===c||i!==-1&&this.m_shape.getUserIndex(c,this.m_hashValues)!==i||(this.m_shape.queryXY(c,o),vB(n.x,n.y,o.x,o.y,this.m_sqrTolerance)&&r.push(l))}}mergeClusters(e,i,n){let s=this.m_shape.getUserIndex(e,this.m_newClusters);const r=this.m_shape.getUserIndex(i,this.m_newClusters);s===-1&&(s=this.m_clusters.createList(),this.m_clusters.addElement(s,e),this.m_shape.setUserIndex(e,this.m_newClusters,s)),r===-1?this.m_clusters.addElement(s,i):this.m_clusters.concatenateLists(s,r),this.m_shape.setUserIndex(i,this.m_newClusters,Yt.impossibleIndex2());const o=this.mergeVertices(e,i);if(n){const l=this.m_hashFunction.calculateHashFromVertex(e);this.m_shape.setUserIndex(e,this.m_hashValues,l)}return o}mergeVertices(e,i){const n=Y.getNAN();this.m_shape.queryXY(e,n);const s=Y.getNAN();this.m_shape.queryXY(i,s);const r=this.m_shape.getRank(e),o=this.m_shape.getRank(i),l=this.m_shape.getWeight(e),c=this.m_shape.getWeight(i);let f,y,_,x,S=!1;if(r===o?(f=r,y=l+c,_=n.x,n.x!==s.x&&(_=(n.x*l+s.x*c)/y,S=!0),x=n.y,n.y!==s.y&&(x=(n.y*l+s.y*c)/y,S=!0)):(r>o?(_=n.x,x=n.y,y=l,f=r):(_=s.x,x=s.y,y=c,f=o),S=!n.equals(s)),S&&(this.m_shape.setXYMonotonic(e,_,x),this.m_bTrackChanges&&this.m_shape.setGeometryModifiedWithVertex(e,!0),this.m_bHasSegmentParentage)){const P=this.m_shape.getSegmentParentageBreakVertex(e)||this.m_shape.getSegmentParentageBreakVertex(i);this.m_shape.setSegmentParentageBreakVertex(e,P),this.m_shape.setSegmentParentageBreakVertex(i,P)}return this.m_shape.setWeight(e,y),this.m_shape.setRank(e,f),S}clusterReciprocal(){return K(0),!1}needsClustering(){const e={stack:[],error:void 0,hasError:!1};try{sc(e,S7(()=>{this.m_hashTable=null,this.m_hashFunction=null,this.m_shape.removeUserIndex(this.m_hashValues),this.m_shape.removeUserIndex(this.m_newClusters)}),!1);const i=this.m_shape.getSelectedCount(),n=this.m_shape.getEnvelope2D(this.m_progressTracker);this.m_origin.assign(n.getLowerLeft());const s=Math.max(n.height(),n.width())/(Eo()-1);this.m_cellSize<s&&(this.m_cellSize=s,this.m_invCellSize=1/this.m_cellSize),this.m_clusters.clear(),this.m_clusters.reserveLists(this.m_shape.getSelectedCount()/3+1),this.m_clusters.reserveNodes(this.m_shape.getSelectedCount()/3+1),this.m_hashValues=this.m_shape.createUserIndex(),this.m_newClusters=this.m_shape.createUserIndex(),this.m_hashFunction=new lne(this.m_shape,this.m_origin,this.m_sqrTolerance,this.m_invCellSize,this.m_hashValues),this.m_hashTable=new Jb(4*i/3,this.m_hashFunction),this.m_hashTable.reserveElements(this.m_shape.getSelectedCount());let r=!1;for(let o=0;o<2;o++){const l=[],c=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let f=c.next();f!==ae;f=c.next()){if(this.progress_(),o>0&&this.m_shape.getUserIndex(f,this.m_newClusters)===Yt.impossibleIndex2())continue;let y;if(o===0?(y=this.m_hashFunction.calculateHashFromVertex(f),this.m_shape.setUserIndex(f,this.m_hashValues,y)):y=this.m_shape.getUserIndex(f,this.m_hashValues),this.collectClusterCandidates(f,l),l.length!==0){for(let _=0,x=l.length;_<x;_++){this.progress_();const S=l[_],P=this.m_hashTable.getElement(S);if(this.m_hashTable.deleteNode(S),!this.m_shape.isEqualXY(f,P))return this.m_nsr=new Sn(5,this.m_shape.getVertexIndex(f),this.m_shape.getVertexIndex(P)),r=!0,r;this.mergeClusters(f,P,!1)}l.length=0}o===0&&this.m_hashTable.addElement(f,y)}}return r}catch(i){e.error=i,e.hasError=!0}finally{_m(e)}}clusterNonReciprocal(){const e=this.m_shape.getSelectedCount(),i=this.m_shape.getEnvelope2D(this.m_progressTracker);this.m_origin=i.getLowerLeft();const n=Math.max(i.height(),i.width())/(Eo()-1);this.m_cellSize<n&&(this.m_cellSize=n,this.m_invCellSize=1/this.m_cellSize),this.m_clusters.clear(),this.m_clusters.reserveLists(Math.trunc(this.m_shape.getSelectedCount()/3+1)),this.m_clusters.reserveNodes(Math.trunc(this.m_shape.getSelectedCount()/3+1)),this.m_hashValues=this.m_shape.createUserIndex(),this.m_newClusters=this.m_shape.createUserIndex(),this.m_hashFunction=new lne(this.m_shape,this.m_origin,this.m_sqrTolerance,this.m_invCellSize,this.m_hashValues),this.m_hashTable=new Jb(Math.trunc(4*e/3),this.m_hashFunction),this.m_hashTable.reserveElements(this.m_shape.getSelectedCount());let s=!1;{const r=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let o=r.next();o!==ae;o=r.next()){this.progress_();const l=this.m_hashFunction.calculateHashFromVertex(o);this.m_shape.setUserIndex(o,this.m_hashValues,l),this.m_hashTable.addElement(o,l)}}{const r=[],o=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let l=o.next();l!==ae;l=o.next()){if(this.m_shape.getUserIndex(l,this.m_newClusters)===Yt.impossibleIndex2())continue;let c=this.m_shape.getUserIndex(l,this.m_hashValues);this.m_hashTable.deleteElement(l,c);let f=!1;for(;this.collectClusterCandidates(l,r),r.length!==0;){let y=0;for(let _=0,x=r.length;_<x;_++){this.progress_();const S=r[_],P=this.m_hashTable.getElement(S);this.m_hashTable.deleteNode(S);const A=_+1===x;y|=this.mergeClusters(l,P,A)?1:0}if(f||(f=y!==0),s||(s=y!==0),r.length=0,!y)break}f&&(c=this.m_shape.getUserIndex(l,this.m_hashValues)),this.m_hashTable.addElement(l,c)}r.length=0}return s&&this.applyClusterPositions_(),this.m_hashTable=null,this.m_hashFunction=null,this.m_shape.removeUserIndex(this.m_hashValues),this.m_shape.removeUserIndex(this.m_newClusters),s}applyClusterPositions_(){const e=Y.getNAN();for(let i=this.m_clusters.getFirstList();i!==En.st_nullNode();i=this.m_clusters.getNextList(i)){let n=this.m_clusters.getFirst(i);const s=this.m_clusters.getElement(n);this.m_shape.queryXY(s,e);const r=this.m_shape.getRank(s),o=this.m_shape.getWeight(s);for(n=this.m_clusters.getNext(n);n!==En.st_nullNode();n=this.m_clusters.getNext(n)){const l=this.m_clusters.getElement(n);if(this.m_bTrackChanges?this.m_shape.isEqualXYPoint2D(l,e)||(this.m_shape.setXYMonotonicPoint2D(l,e),this.m_shape.setGeometryModifiedWithVertex(l,!0)):this.m_shape.setXYMonotonicPoint2D(l,e),this.m_bHasSegmentParentage){const c=this.m_shape.getSegmentParentageBreakVertex(s)||this.m_shape.getSegmentParentageBreakVertex(l);this.m_shape.setSegmentParentageBreakVertex(s,c),this.m_shape.setSegmentParentageBreakVertex(l,c)}this.m_shape.setWeight(l,o),this.m_shape.setRank(l,r)}}}}class yl{constructor(){this.m_inputParts=[],this.m_resultParts1=[],this.m_resultParts2=[],this.m_resultSegments=[],this.m_freeSegments=[],this.m_inputSegments=[],this.m_param1=[],this.m_param2=[],this.m_tolerance=0,this.m_toleranceZ=0,this.m_point=new Ut,this.m_pointWeight=1,this.m_maxDensifyLimit=0,this.m_pointRank=0,this.m_changed1=!1,this.m_changed2=!1,this.m_adaptiveDensify=!1}clear(){this.freeAllResultSegments(),this.m_inputSegments.length=0,this.m_inputParts.length=0,this.m_resultParts1.length=0,this.m_resultParts2.length=0,this.m_param1.length=0,this.m_param2.length=0,this.m_adaptiveDensify=!1,this.m_changed1=!1,this.m_changed2=!1}newIntersectionPart_(e,i,n,s,r,o,l,c,f,y){return Wit(e,i,n,s,r,o,l,c,f,y)}pushSegment(e,i,n,s,r,o,l,c,f,y){return this.m_inputParts.push(this.newIntersectionPart_(this.m_inputSegments.length,i,n,s,r,o,l,c,f,y)),this.m_inputSegments.push(e),this.m_inputParts.length-1}getResultSegmentCount(e){return this.m_adaptiveDensify?e===0?this.m_param1.length-1:this.m_param2.length-1:e===0?this.m_resultParts1.length:this.m_resultParts2.length}getResultPart_(e,i){return e===0?this.m_resultParts1[i]:this.m_resultParts2[i]}getResultSegment(e,i){return this.m_resultSegments[this.getResultPart_(e,i).segmentIndex].get()}getSegmentChanged(e){return e===0?this.m_changed1:this.m_changed2}getResultSegmentStartPointWeight(e,i){return this.getResultPart_(e,i).weightStart}getResultSegmentStartPointRank(e,i){return this.getResultPart_(e,i).rankStart}getResultSegmentSegmentParentage(e,i){return this.getResultPart_(e,i).segmentParentage}getResultSegmentStartPointIsBreak(e,i){return this.getResultPart_(e,i).u.bBreakStart}getResultSegmentEndPointWeight(e,i){return this.getResultPart_(e,i).weightEnd}getResultSegmentEndPointRank(e,i){return this.getResultPart_(e,i).rankEnd}getResultSegmentEndPointIsBreak(e,i){return this.getResultPart_(e,i).u.bBreakEnd}getResultSegmentInteriorRank(e,i){return this.getResultPart_(e,i).rankInterior}getResultSegmentInteriorWeight(e,i){return this.getResultPart_(e,i).weightInterior}getResultPoint(){return this.m_point}getResultPointWeight(){return this.m_pointWeight}getResultPointRank(){return this.m_pointRank}getResultPointChanged(){return this.m_changed2}intersectLines(e,i){this.m_inputSegments.length!==2&&xt(""),this.m_changed1=!1,this.m_changed2=!1,this.m_tolerance=e;const n=Xi(e*yl.c_smallToleranceFactor);let s=!1;const r=this.m_inputParts[0],o=this.m_inputParts[1],l=this.m_inputSegments[r.segmentIndex],c=this.m_inputSegments[o.segmentIndex];if(i||5&$5(!0,l,c,e,!0)){const f=Qv(!0,l,c,null,this.m_param1,this.m_param2,e);f===0&&xt("");const y=new Array(f);for(let W=0;W<f;++W)y[W]=Y.getNAN();const _=new Float64Array(f),x=new Int32Array(f),S=new Array(f),P=new Array(f);for(let W=0;W<f;++W)S[W]=mM(),P[W]=mM();for(let W=0;W<f;W++){const J=this.m_param1[W],re=this.m_param2[W];let ne,oe=r.rankInterior,pe=r.weightInterior;J===0?(oe=r.rankStart,pe=r.weightStart,ne=r.u.bBreakStart):J===1?(oe=r.rankEnd,pe=r.weightEnd,ne=r.u.bBreakEnd):(this.m_changed1=!0,ne=!1);let ce,ue=o.rankInterior,se=o.weightInterior;re===0?(ue=o.rankStart,se=o.weightStart,ce=o.u.bBreakStart):re===1?(ue=o.rankEnd,se=o.weightEnd,ce=o.u.bBreakEnd):(this.m_changed2=!0,ce=!1);const de=oe,Se=ue;let Pe=1,Re=0,$e=Y.getNAN();if(de===Se){const we=l.getCoord2D(J),Fe=c.getCoord2D(re);Pe=pe+se,Re=oe,cr(we,Fe,se/Pe,$e);const it=Y.sqrDistance($e,we),_t=Y.sqrDistance($e,Fe);S[W].bBigMove=it>n,P[W].bBigMove=_t>n,this.m_changed1||we.equals($e)||(this.m_changed1=!0),this.m_changed2||Fe.equals($e)||(this.m_changed2=!0)}else if(de>Se){$e=l.getCoord2D(J);const we=c.getCoord2D(re);Pe=pe,Re=oe;const Fe=Y.sqrDistance($e,we);S[W].bBigMove=!1,P[W].bBigMove=Fe>n,this.m_changed2||we.equals($e)||(this.m_changed2=!0)}else{$e=c.getCoord2D(re),Pe=se,Re=ue;const we=l.getCoord2D(J),Fe=Y.sqrDistance($e,we);S[W].bBigMove=Fe>n,P[W].bBigMove=!1,this.m_changed1||we.equals($e)||(this.m_changed1=!0)}y[W].assign($e),_[W]=Pe,x[W]=Re,S[W].bIsBreak=ne||ce,P[W].bIsBreak=ne||ce,s||(s=S[W].bBigMove||P[W].bBigMove)}const A=r.rankInterior,D=r.weightInterior;let N=0,F=-1;for(let W=0;W<=f;W++){const J=W<f?this.m_param1[W]:1;if(J!==N){const re=this.allocResultSegment(),ne=this.m_resultSegments[re];let oe,pe,ce,ue;l.queryCut(N,J,ne,!1),ne.get().snapControlPoints(e*e);let se=!1,de=!1,Se=!1,Pe=!1,Re=!1,$e=Y.getNAN(),we=Y.getNAN();F!==-1?(pe=x[F],oe=_[F],se=S[F].bBigMove,$e.assign(y[F]),Se=S[F].bIsBreak,Re=!0):(oe=r.weightStart,pe=r.rankStart,$e=ne.get().getStartXY(),Se=r.u.bBreakStart),W<f?(ue=x[W],ce=_[W],de=S[W].bBigMove,we.assign(y[W]),Pe=S[W].bIsBreak,Re=!0):(ce=r.weightEnd,ue=r.rankEnd,we=ne.get().getEndXY(),Pe=r.u.bBreakEnd),Re&&ne.get().setCoordsForIntersector($e,we,!0),this.m_resultParts1.push(this.newIntersectionPart_(re,oe,pe,ce,ue,D,A,Se,Pe,r.segmentParentage));const Fe=this.m_resultParts1.at(-1);Fe.u.bBigMoveStart=se,Fe.u.bBigMoveEnd=de,N=J,F=W}else F===-1&&(F=W)}const G=new Array(f);for(let W=0;W<f;W++)G[W]=W;f>2?(G.sort((W,J)=>this.m_param2[W]<this.m_param2[J]?-1:this.m_param2[W]>this.m_param2[J]?1:0),Hx(this.m_param2)):f===2&&this.m_param2[0]>this.m_param2[1]&&(this.m_param2[1]=Et(this.m_param2[0],this.m_param2[0]=this.m_param2[1]),G[1]=Et(G[0],G[0]=G[1]));const V=o.rankInterior,B=o.weightInterior;N=0,F=-1;for(let W=0;W<=f;W++){const J=W<f?this.m_param2[W]:1;if(J!==N){const re=this.allocResultSegment(),ne=this.m_resultSegments[re];let oe,pe,ce,ue;c.queryCut(N,J,ne,!1),ne.get().snapControlPoints(e*e);let se=Y.getNAN(),de=Y.getNAN(),Se=!1,Pe=!1,Re=!1,$e=!1,we=!1;if(F!==-1){const it=G[F];oe=_[it],pe=x[it],se.assign(y[it]),Re=P[it].bBigMove,Se=P[it].bIsBreak,we=!0}else oe=o.weightStart,pe=o.rankStart,se=ne.get().getStartXY(),Se=o.u.bBreakStart;if(W!==f){const it=G[W];ce=_[it],ue=x[it],de.assign(y[it]),$e=P[it].bBigMove,Pe=P[it].bIsBreak,we=!0}else ce=o.weightEnd,ue=o.rankEnd,de=ne.get().getEndXY(),Pe=o.u.bBreakEnd;we&&ne.get().setCoordsForIntersector(se,de,!0),this.m_resultParts2.push(this.newIntersectionPart_(re,oe,pe,ce,ue,B,V,Se,Pe,o.segmentParentage));const Fe=this.m_resultParts2.at(-1);Fe.u.bBigMoveStart=Re,Fe.u.bBigMoveEnd=$e,N=J,F=W}else F===-1&&(F=W)}return s?3:2}return 0}intersectLines3D(e,i,n,s){return K(0),1}intersect2D(e,i){const n=this.m_inputParts[0],s=this.m_inputParts[1],r=this.m_inputSegments[n.segmentIndex].getGeometryType(),o=this.m_inputSegments[s.segmentIndex].getGeometryType();return r!==me.enumLine||o!==me.enumLine?new Zit(this).intersectCurves(e,i):this.intersectLines(e,i)}intersect2DEx(e,i,n,s,r){this.m_point.assignCopy(i),this.m_inputSegments.length!==1&&xt(""),this.m_tolerance=e,this.m_changed1=!1,this.m_changed2=!1;const o=Xi(e*yl.c_smallToleranceFactor);let l=!1;const c=this.m_inputParts[0],f=this.m_inputSegments[c.segmentIndex];if(r||f.isIntersectingPoint(i.getXY(),e,!0)){this.m_param1=ji(16,Number.NaN);const y=f.getClosestCoordinate(i.getXY(),!1);this.m_param1[0]=y;let _=c.rankInterior,x=c.weightInterior;y===0?(_=c.rankStart,x=c.weightStart):y===1?(_=c.rankEnd,x=c.weightEnd):this.m_changed1=!0;let S=_;const P=n,A=s;S===P&&f.isCurve()&&(S=P+1);let D=1,N=0;const F=new Y;if(S===P){const W=f.getCoord2D(y),J=i.getXY();D=x+A,N=_,cr(W,J,A/D,F),this.m_changed1||W.equals(F)||(this.m_changed1=!0),this.m_changed2||J.equals(F)||(this.m_changed2=!0),l=Y.sqrDistance(F,W)>o}else S>P?(F.assign(f.getCoord2D(y)),D=x,N=_,this.m_changed2||F.equals(i.getXY())||(this.m_changed2=!0)):(F.assign(f.getCoord2D(y)),D=A,N=P,this.m_changed1||F.equals(i.getXY())||(this.m_changed1=!0),l=Y.sqrDistance(F,i.getXY())>o);let G=0,V=-1;const B=1;for(let W=0;W<=B;W++){const J=W<B?this.m_param1[0]:1;if(J!==G){const re=this.allocResultSegment(),ne=this.m_resultSegments[re];f.queryCut(G,J,ne),ne.get().snapControlPoints(e*e);let oe=c.weightStart,pe=c.weightEnd,ce=c.rankStart,ue=c.rankEnd;const se=c.rankInterior,de=c.weightInterior;let Se=c.u.bBreakStart,Pe=c.u.bBreakEnd;V!==-1&&(oe=D,ce=N,Se=!0,ne.get().setCoordsForIntersector(F,ne.get().getEndXY(),!0)),W!==B&&(pe=D,ue=N,Pe=!0,ne.get().setCoordsForIntersector(ne.get().getStartXY(),F,!0)),G=J,this.m_resultParts1.push(this.newIntersectionPart_(re,oe,ce,pe,ue,de,se,Se,Pe,c.segmentParentage))}V=W}return this.m_point.setXY(F),this.m_pointWeight=D,this.m_pointRank=N,l?3:2}return 0}intersect_3D(e,i,n,s){return K(0),1}intersect3DEx(e,i,n,s,r,o,l){return K(0),1}getTolerance(){return this.m_tolerance}getToleranceZ(){return K(0),0}freeAllResultSegments(){this.m_resultSegments.length=0,this.m_freeSegments.length=0}freeResultSegment(e){this.m_freeSegments.push(e)}allocResultSegment(){if(this.m_freeSegments.length)return this.m_freeSegments.pop();const e=new Qt,i=this.m_resultSegments.length;return this.m_resultSegments.push(e),i}allocResultSegmentFromBuffer(e){if(this.m_freeSegments.length)return this.m_freeSegments.pop();const i=new Qt({copy:e}),n=this.m_resultSegments.length;return this.m_resultSegments.push(i),n}allocResultSegmentFromSegment(e){if(this.m_freeSegments.length)return this.m_freeSegments.pop();const i=new Qt({segment:e}),n=this.m_resultSegments.length;return this.m_resultSegments.push(i),n}}function Xit(t,e){return{bBigMoveStart:!1,bBigMoveEnd:!1,bBreakStart:t,bBreakEnd:e}}function Wit(t,e,i,n,s,r,o,l,c,f){return{segmentIndex:t,weightStart:e,rankStart:i,weightEnd:n,rankEnd:s,weightInterior:r,rankInterior:o,segmentParentage:f,u:Xit(l,c)}}function mM(){return{bBigMove:!1,bIsBreak:!1}}yl.maxWeight=.1*Number.MAX_VALUE,yl.c_smallToleranceFactor=.01,yl.c_maxGeometryTypeToRankDelta=8;let cne=class{constructor(){this.start=null,this.end=null,this.equalEdge=null,this.segmentIndex=-1,this.segmentParentage=-1,this.weight=0,this.rank=0}hasSegment(){return this.segmentIndex>=0}transferAttributes(t,e,i){if(e.getDescription().getAttributeCount()===1)return;const n=t.parent.m_resultSegments[this.segmentIndex].get().getStartXY(),s=t.parent.m_resultSegments[this.segmentIndex].get().getEndXY(),r=new Ut;e.queryStart(r),i?(r.setXY(n),t.parent.m_resultSegments[this.segmentIndex].get().setStart(r)):(r.setXY(s),t.parent.m_resultSegments[this.segmentIndex].get().setEnd(r)),e.queryEnd(r),i?(r.setXY(s),t.parent.m_resultSegments[this.segmentIndex].get().setEnd(r)):(r.setXY(n),t.parent.m_resultSegments[this.segmentIndex].get().setStart(r))}copyFromWhenOverlap(t,e,i){this.equalEdge=e,e.equalEdge=this,this.segmentIndex=t.parent.allocResultSegmentFromBuffer(t.parent.m_resultSegments[e.segmentIndex]),this.segmentParentage=e.segmentParentage,this.weight=e.weight,this.rank=e.rank,i?(this.start.copyFrom(e.start),this.end.copyFrom(e.end)):(this.start.copyFrom(e.end),this.end.copyFrom(e.start),t.parent.m_resultSegments[this.segmentIndex].get().reverse())}getEnd(){return K(0),{}}getNextInChain(){return this.end.nextInChain}getPrevInChain(){return this.start.prevInChain}};class une{constructor(){this.hash=0,this.pt=new Y,this.prevInChain=null,this.nextInChain=null,this.prevInHash=null,this.nextInHash=null,this.prevEqual=null,this.nextEqual=null,this.weight=0,this.rank=0,this.bBigMove=!1,this.bIsBreak=!1}copyFrom(e){this.pt.assign(e.pt),this.weight=e.weight,this.rank=e.rank,this.bBigMove=e.bBigMove,this.bIsBreak=e.bIsBreak}nextNode(){return K(0),{}}prevNode(){return K(0),{}}equalListHead(){let e=this;for(;e.prevEqual!==null;e=e.prevEqual);return e}}function _g(t,e,i,n){return{edge1:t,edge2:e,recursion:i,bIsIntersecting:n}}class Zit{constructor(e){this.m_pairs=[],this.m_chainOrigin1=null,this.m_chainOrigin2=null,this.m_newNodes=[],this.m_hashTableOfEquals=[],this.m_hashTableOfEqualsSize=0,this.m_origin=new Y,this.m_cell=new Y,this.parent=e}addSegment(e,i,n,s,r,o,l,c,f,y,_){const x=this.newNode(this.parent.m_resultSegments[e].get().getStartXY(),n,s,f),S=this.newNode(this.parent.m_resultSegments[e].get().getEndXY(),r,o,y);this.newEdge(x,S,e,l,c,_),this.m_chainOrigin1===null?this.m_chainOrigin1=x:this.m_chainOrigin2===null?this.m_chainOrigin2=x:K(0)}intersectCurvesHelper(e,i,n,s,r){var $e,we,Fe,it,_t,ot,ut,Pt,Vt,Ft,Nt,Wi,hn,ps,Yn,fr,fo,sn;const o=this.getSegment(e).get(),l=this.getSegment(i).get();if(o.isDegenerate(0)||l.isDegenerate(0))return 0;const c=this.tryOverlapIntersectCurves(e,i,n,s);if(c!==0)return c;const f=Xi(.01*n);let y=!1,_=this.processSharpCorners(o,l,n,r>4);const x=_>0;if(!x){if(!(s||5&j7(!0,!1,o,l,n,!0)))return 0;_=Qv(!0,o,l,null,this.parent.m_param1,this.parent.m_param2,n)}_===0&&xt("");const S=o.getGeometryType(),P=l.getGeometryType(),A=Ge(Y,_),D=Ge(Y,_),N=new Array(_),F=new Array(_),G=new Array(_),V=new Array(_),B=Ute(mM,_),W=Ute(mM,_);let J=!1,re=!1;for(let ye=0;ye<_;ye++){const qi=this.parent.m_param1[ye],Ir=this.parent.m_param2[ye];let ri=e.rank,Ai=e.weight,ms=!0,gn=!1;qi===0?(ri=e.start.rank,Ai=e.start.weight,gn=e.start.bIsBreak):qi===1?(ri=e.end.rank,Ai=e.end.weight,gn=e.end.bIsBreak):(J=!0,ms=!1);let Ji=i.rank,is=i.weight,gs=!1,Wr=!0;Ir===0?(Ji=i.start.rank,is=i.start.weight,gs=i.start.bIsBreak):Ir===1?(Ji=i.end.rank,is=i.end.weight,gs=i.end.bIsBreak):(re=!0,Wr=!1);let Tn=ri,wt=Ji;if(Tn===wt&&(Tn*=yl.c_maxGeometryTypeToRankDelta,wt*=yl.c_maxGeometryTypeToRankDelta,Tn+=W_(S,o,!1),wt+=W_(P,l,!1)),ms&&Wr&&wt===Tn){const d=o.getCoord2D(qi),g=l.getCoord2D(Ir);d.equals(g)&&(wt=Tn-1)}let Xn=1,m=0,j=1,T=0;const p=new Y,h=new Y,a=o.getCoord2D(qi),u=l.getCoord2D(Ir);if(x&&Y.distance(a,u)>n)p.setCoordsPoint2D(a),h.setCoordsPoint2D(u),Xn=Ai,j=is,m=ri,T=Ji,B[ye].bBigMove=!1,W[ye].bBigMove=!1,gn=!0,gs=!0;else if(Tn===wt){j=Xn=Ai+is,T=m=ri,cr(a,u,is/Xn,p),h.setCoordsPoint2D(p);const d=Y.sqrDistance(p,a),g=Y.sqrDistance(p,u);B[ye].bBigMove=d>f,W[ye].bBigMove=g>f,J||a.equals(p)||(J=!0),re||u.equals(h)||(re=!0)}else if(Tn>wt){p.setCoordsPoint2D(a),h.setCoordsPoint2D(p),j=Xn=Ai,T=m=ri;const d=Y.sqrDistance(p,u);B[ye].bBigMove=!1,W[ye].bBigMove=d>f,re||u.equals(h)||(re=!0)}else{h.setCoordsPoint2D(u),p.setCoordsPoint2D(h),j=Xn=is,T=m=Ji;const d=Y.sqrDistance(p,a);B[ye].bBigMove=d>f,W[ye].bBigMove=!1,J||a.equals(p)||(J=!0)}A[ye].assign(p),D[ye].assign(h),N[ye]=Xn,F[ye]=j,G[ye]=m,V[ye]=T,B[ye].bIsBreak=gn||gs,W[ye].bIsBreak=gn||gs,y||(y=B[ye].bBigMove||W[ye].bBigMove),ye>0&&(qi!==this.parent.m_param1[ye-1]&&Ir!==this.parent.m_param2[ye-1]||(G[ye]<=G[ye-1]?(A[ye].assign(D[ye-1]),N[ye]=F[ye-1],G[ye]=V[ye-1],D[ye].assign(D[ye-1]),F[ye]=F[ye-1],V[ye]=V[ye-1],($e=B[ye]).bBigMove||($e.bBigMove=B[ye-1].bBigMove),(we=W[ye]).bBigMove||(we.bBigMove=W[ye-1].bBigMove),(Fe=B[ye]).bIsBreak||(Fe.bIsBreak=B[ye-1].bIsBreak),(it=W[ye]).bIsBreak||(it.bIsBreak=W[ye-1].bIsBreak)):(A[ye-1].assign(A[ye]),N[ye-1]=N[ye],G[ye-1]=G[ye],D[ye-1].assign(D[ye]),F[ye-1]=F[ye],V[ye-1]=V[ye],(_t=B[ye-1]).bBigMove||(_t.bBigMove=B[ye].bBigMove),(ot=W[ye-1]).bBigMove||(ot.bBigMove=W[ye].bBigMove),(ut=B[ye-1]).bIsBreak||(ut.bIsBreak=B[ye].bIsBreak),(Pt=W[ye-1]).bIsBreak||(Pt.bIsBreak=W[ye].bIsBreak))))}if(!J&&!re&&_===2){if(S!==me.enumLine||P!==me.enumLine){if(this.processDoublyConnectedEdges(e,i,r+1,n))return this.parent.m_changed1=!0,this.parent.m_changed2=!0,2;K(0)}K(0)}(Vt=this.parent).m_changed1||(Vt.m_changed1=J),(Ft=this.parent).m_changed2||(Ft.m_changed2=re);let ne=e,oe=e.end.weight,pe=e.end.rank,ce=e.end.bBigMove,ue=e.end.bIsBreak,se=0,de=-1;for(let ye=0;ye<=_;ye++){const qi=ye<_?this.parent.m_param1[ye]:1;if(qi!==se){const Ir=this.parent.allocResultSegment(),ri=this.parent.m_resultSegments[Ir];let Ai,ms,gn,Ji;o.queryCut(se,qi,ri,!1),ri.get().snapControlPoints(n*n);let is=!1,gs=!1,Wr=!1,Tn=!1;const wt=new Y,Xn=new Y;de!==-1?(ms=G[de],Ai=N[de],Wr=B[de].bBigMove,is=B[de].bIsBreak,wt.assign(A[de])):(Ai=e.start.weight,ms=e.start.rank,Wr=e.start.bBigMove,is=e.start.bIsBreak,wt.assign(ri.get().getStartXY())),ye<_?(Ji=G[ye],gn=N[ye],Tn=B[ye].bBigMove,gs=B[ye].bIsBreak,Xn.assign(A[ye])):(gn=oe,Ji=pe,Tn=ce,gs=ue,Xn.assign(ri.get().getEndXY()));let m=ne;qi<1&&(this.splitEdgeInPlace(ne),m=ne.getNextInChain()),this.updateSegmentOnly(ne,Ir),ne.start.hash===0||ne.start.pt.equals(wt)||(this.m_newNodes.push(ne.start),this.removeNodeFromHash(ne.start),ne.start.hash=0),ne.end.hash===0||ne.end.pt.equals(Xn)||(this.m_newNodes.push(ne.end),this.removeNodeFromHash(ne.end),ne.end.hash=0),ne.start.pt.assign(wt),ne.end.pt.assign(Xn),(Nt=ne.start).bBigMove||(Nt.bBigMove=Wr),(Wi=ne.end).bBigMove||(Wi.bBigMove=Tn),(hn=ne.start).bIsBreak||(hn.bIsBreak=is),(ps=ne.end).bIsBreak||(ps.bIsBreak=gs),ne.start.weight=Ai,ne.start.rank=ms,ne.end.weight=gn,ne.end.rank=Ji,ne=m,se=qi,de=ye}else de===-1&&(de=ye)}const Se=ne.getNextInChain(),Pe=[];Pe.length=_;for(let ye=0;ye<_;ye++)Pe[ye]=ye;_>2?(Pe.sort((ye,qi)=>Mf(this.parent.m_param2[ye],this.parent.m_param2[qi])),this.parent.m_param2.sort(Mf)):_===2&&this.parent.m_param2[0]>this.parent.m_param2[1]&&(this.parent.m_param2[1]=Et(this.parent.m_param2[0],this.parent.m_param2[0]=this.parent.m_param2[1]),Pe[1]=Et(Pe[0],Pe[0]=Pe[1])),ne=i,oe=i.end.weight,pe=i.end.rank,ce=i.end.bBigMove,ue=i.end.bIsBreak,se=0,de=-1;for(let ye=0;ye<=_;ye++){const qi=ye<_?this.parent.m_param2[ye]:1;if(qi!==se){const Ir=this.parent.allocResultSegment(),ri=this.parent.m_resultSegments[Ir];let Ai,ms,gn,Ji;l.queryCut(se,qi,ri,!1),ri.get().snapControlPoints(n*n);const is=new Y,gs=new Y;let Wr=!1,Tn=!1,wt=!1,Xn=!1;if(de!==-1){const j=Pe[de];Ai=F[j],ms=V[j],is.assign(D[j]),wt=W[j].bBigMove,Wr=W[j].bIsBreak}else Ai=i.start.weight,ms=i.start.rank,wt=i.start.bBigMove,Wr=i.start.bIsBreak,is.assign(ri.get().getStartXY());if(ye!==_){const j=Pe[ye];gn=F[j],Ji=V[j],gs.assign(D[j]),Xn=W[j].bBigMove,Tn=W[j].bIsBreak}else gn=oe,Ji=pe,Xn=ce,Tn=ue,gs.assign(ri.get().getEndXY());let m=ne;qi<1&&(this.splitEdgeInPlace(ne),m=ne.getNextInChain()),this.updateSegmentOnly(ne,Ir),ne.start.hash===0||ne.start.pt.equals(is)||(this.m_newNodes.push(ne.start),this.removeNodeFromHash(ne.start),ne.start.hash=0),ne.end.hash===0||ne.end.pt.equals(gs)||(this.m_newNodes.push(ne.end),this.removeNodeFromHash(ne.end),ne.end.hash=0),ne.start.pt.assign(is),ne.end.pt.assign(gs),(Yn=ne.start).bBigMove||(Yn.bBigMove=wt),(fr=ne.end).bBigMove||(fr.bBigMove=Xn),(fo=ne.start).bIsBreak||(fo.bIsBreak=Wr),(sn=ne.end).bIsBreak||(sn.bIsBreak=Tn),ne.start.weight=Ai,ne.start.rank=ms,ne.end.weight=gn,ne.end.rank=Ji,ne=m,se=qi,de=ye}else de===-1&&(de=ye)}const Re=ne.getNextInChain();return this.postProcessResultPartsForCurves(e,Se,i,Re,r+1),y?3:2}intersectCurves(e,i){this.parent.m_inputSegments.length!==2&&xt(""),this.parent.m_changed1=!1,this.parent.m_changed2=!1,this.parent.m_tolerance=e,this.m_hashTableOfEqualsSize=0,this.m_hashTableOfEquals=fE(16);const n=xe.constructEmpty();for(let o=0;o<2;o++){const l=this.parent.allocResultSegmentFromSegment(this.parent.m_inputSegments[this.parent.m_inputParts[o].segmentIndex]),c=xe.constructEmpty();this.parent.m_inputSegments[this.parent.m_inputParts[o].segmentIndex].queryLooseEnvelope(c),n.mergeEnvelope2D(c);const f=this.parent.m_inputParts[o];this.addSegment(l,0,f.weightStart,f.rankStart,f.weightEnd,f.rankEnd,f.weightInterior,f.rankInterior,f.u.bBreakStart,f.u.bBreakEnd,f.segmentParentage)}n.inflateCoords(100*e,100*e),this.m_origin.assign(n.getLowerLeft()),this.m_cell.setCoords(2*e,2*e),this.m_pairs.push(_g(this.m_chainOrigin1.nextInChain,this.m_chainOrigin2.nextInChain,0,i));let s=0,r=!0;for(;this.m_pairs.length;){const o=this.m_pairs.at(-1);this.m_pairs.pop(),K(o.recursion>=0),K(o.recursion<=256),this.clusterNodes(e);const l=this.intersectCurvesHelper(o.edge1,o.edge2,e,o.bIsIntersecting,o.recursion);r&&(r=!1,s=l)}for(let o=0;o<2;o++){const l=o===0?this.parent.m_resultParts1:this.parent.m_resultParts2;for(let c=(o===0?this.m_chainOrigin1:this.m_chainOrigin2).nextInChain;c!=null;c=c.getNextInChain())l.push(this.parent.newIntersectionPart_(c.segmentIndex,c.start.weight,c.start.rank,c.end.weight,c.end.rank,c.weight,c.rank,c.start.bIsBreak,c.end.bIsBreak,c.segmentParentage)),l.at(-1).u.bBigMoveStart=c.start.bBigMove,l.at(-1).u.bBigMoveEnd=c.end.bBigMove}return s}tryOverlapIntersectCurves(e,i,n,s){const r=this.parent.m_resultSegments[e.segmentIndex].get(),o=this.parent.m_resultSegments[i.segmentIndex].get(),l=r.getStartXY().equals(o.getStartXY())&&r.getEndXY().equals(o.getEndXY()),c=r.getStartXY().equals(o.getEndXY())&&r.getEndXY().equals(o.getStartXY());if(!l&&!c)return 0;const f=Im(r,o,!0);if(f!==0&&Mve(r,o)&&e.segmentParentage===i.segmentParentage){let P=!1;if(f>0)P=r.equals(o);else{K(f===-1);const A=new Qt({segment:o});A.get().reverse(),P=r.equals(A.get())}if(P)return 1}const y=n*yl.c_smallToleranceFactor;let _=!1;if(f===0){const P=[.5,.25,.75,.125,.375,.625,.875,.5625,.3125];for(let A=0,D=P.length;A<D;++A){const N=P[A],F=new Y;r.queryCoord2D(N,F);const G=o.getClosestCoordinate(F,!1),V=new Y;o.queryCoord2D(G,V);const B=Y.distance(F,V);if(B>n)return 0;_||(_=B>y)}for(let A=0,D=P.length;A<D;++A){const N=P[A],F=new Y;o.queryCoord2D(N,F);const G=r.getClosestCoordinate(F,!1),V=new Y;r.queryCoord2D(G,V);const B=Y.distance(F,V);if(B>n)return 0;_||(_=B>y)}}let x=e.rank,S=i.rank;return x===S&&(x*=yl.c_maxGeometryTypeToRankDelta,S*=yl.c_maxGeometryTypeToRankDelta,x+=W_(r.getGeometryType(),r,!0),S+=W_(o.getGeometryType(),o,!0)),x>S?(i.copyFromWhenOverlap(this,e,l),i.transferAttributes(this,r,l)):S>x?(e.copyFromWhenOverlap(this,i,l),e.transferAttributes(this,o,l)):e.segmentParentage<=i.segmentParentage?(e.weight=e.weight+i.weight,i.copyFromWhenOverlap(this,e,l),i.transferAttributes(this,r,l)):(i.weight=e.weight+i.weight,e.copyFromWhenOverlap(this,i,l),e.transferAttributes(this,o,l)),_?3:2}postProcessResultPartsForCurves(e,i,n,s,r){r===Xte()&&xt("curve_helper");for(let o=e;o!==i;o=o.getNextInChain())this.updateSegmentToNodes(o);for(let o=n;o!==s;o=o.getNextInChain())this.updateSegmentToNodes(o);for(let o=e;o!==i;o=o.getNextInChain()){const l=o.end.pt.sub(o.start.pt);for(let c=n;c!==s;c=c.getNextInChain()){let f=0;if(o.start.pt.equals(c.start.pt)&&o.end.pt.equals(c.end.pt)?f=1:o.start.pt.equals(c.end.pt)&&o.end.pt.equals(c.start.pt)&&(f=-1),!f){let A=o.start.pt.equals(c.start.pt)?1:0;if(A||(A=o.end.pt.equals(c.end.pt)?2:0,A||(A=o.end.pt.equals(c.start.pt)?3:0,A||(A=o.start.pt.equals(c.end.pt)?4:0))),A){const D=c.end.pt.sub(c.start.pt),N=l.dotProduct(D);let F;switch(A){case 1:case 2:F=N>0;break;case 3:case 4:F=N<0;break;default:xt("post_process_result_parts_for_curves_")}F&&this.m_pairs.push(_g(o,c,r,!1))}continue}const y=this.parent.m_resultSegments[o.segmentIndex],_=this.parent.m_resultSegments[c.segmentIndex],x=[.5,.25,.75];for(let A=0,D=x.length;A<D;++A){const N=x[A],F=new Y;y.get().queryCoord2D(N,F);const G=_.get().getClosestCoordinate(F,!1),V=new Y;if(_.get().queryCoord2D(G,V),Y.distance(F,V)>this.parent.m_tolerance){f=0;break}}if(!f){this.m_pairs.push(_g(o,c,r,!1));continue}for(let A=0,D=x.length;A<D;++A){const N=x[A],F=new Y;_.get().queryCoord2D(N,F);const G=y.get().getClosestCoordinate(F,!1),V=new Y;if(y.get().queryCoord2D(G,V),Y.distance(F,V)>this.parent.m_tolerance){f=0;break}}if(!f){this.m_pairs.push(_g(o,c,r,!1));continue}o.equalEdge=c,c.equalEdge=o;let S=o.rank,P=c.rank;S===P&&(S*=yl.c_maxGeometryTypeToRankDelta,P*=yl.c_maxGeometryTypeToRankDelta,S+=W_(y.get().getGeometryType(),y.get(),!0),P+=W_(_.get().getGeometryType(),_.get(),!0)),S>P||S===P&&o.segmentParentage<=c.segmentParentage?(y.copyTo(_,!1),c.segmentParentage=o.segmentParentage,f===-1&&_.get().reverse()):(_.copyTo(y,!1),o.segmentParentage=c.segmentParentage,f===-1&&y.get().reverse());break}}this.updateAttachedEdgesAfterNodeChange(e.start),i&&this.updateAttachedEdgesAfterNodeChange(i.start),this.updateAttachedEdgesAfterNodeChange(n.start),s&&this.updateAttachedEdgesAfterNodeChange(s.start)}processDoublyConnectedEdges(e,i,n,s){n===Xte()&&xt("curve_helper");const r=this.getSegment(e).get(),o=this.getSegment(i).get(),l=r.getStartXY().equals(o.getStartXY())&&r.getEndXY().equals(o.getEndXY())?1:r.getEndXY().equals(o.getStartXY())&&r.getStartXY().equals(o.getEndXY())?-1:0;if(l!==0){const c=new Qt;r.queryCut(0,.5,c),c.get().snapControlPoints(s*s);const f=new Qt;r.queryCut(.5,1,f),f.get().snapControlPoints(s*s),this.splitEdgeInPlace(e),e.end.pt=c.get().getEndXY(),e.segmentIndex=this.parent.allocResultSegmentFromBuffer(c),e.getNextInChain().segmentIndex=this.parent.allocResultSegmentFromBuffer(f);let y=o.getClosestCoordinate(e.end.pt,!1);return Math.abs(y-.5)>.2&&(y=.5),o.queryCut(0,y,c),c.get().snapControlPoints(s*s),o.queryCut(y,1,f),f.get().snapControlPoints(s*s),this.splitEdgeInPlace(i),i.end.pt=c.get().getEndXY(),i.segmentIndex=this.parent.allocResultSegmentFromBuffer(c),i.getNextInChain().segmentIndex=this.parent.allocResultSegmentFromBuffer(f),l>0?(this.m_pairs.push(_g(e,i,n,!1)),this.m_pairs.push(_g(e.getNextInChain(),i.getNextInChain(),n,!1))):(this.m_pairs.push(_g(e,i.getNextInChain(),n,!1)),this.m_pairs.push(_g(e.getNextInChain(),i,n,!1))),!0}return!1}getNext(e){return K(0),{}}newNode(e,i,n,s){const r=new une;return this.m_newNodes.push(r),r.pt=e,r.rank=n,r.weight=i,r.bIsBreak=s,r}newEdge(e,i,n,s,r,o){const l=new cne;return l.start=e,l.end=i,e.nextInChain=l,i.prevInChain=l,l.segmentIndex=n,l.segmentParentage=o,l.rank=r,l.weight=s,l}splitEdgeInPlace(e){e.segmentIndex=-1;const i=new cne,n=new une;this.m_newNodes.push(n),n.pt.setNAN(),n.nextInChain=i,n.prevInChain=e,n.prevInHash=null,n.nextInHash=null,n.prevEqual=null,n.nextEqual=null,n.weight=e.weight,n.rank=e.rank,n.bIsBreak=!1,n.bBigMove=!1,i.start=n,i.segmentIndex=-1,i.end=e.end,i.end.prevInChain=i,i.rank=e.rank,i.weight=e.weight,i.segmentParentage=e.segmentParentage,e.end=n,e.equalEdge&&(e.equalEdge.equalEdge=null),e.equalEdge=null}updateSegmentOnly(e,i){e.segmentIndex=i}updateAttachedEdgesAfterNodeChange(e){for(let i=e.equalListHead();i!==null;i=i.nextEqual)this.updateAttachedEdgesAfterNodeChangeImpl(i)}updateAttachedEdgesAfterNodeChangeImpl(e){const i=e.prevInChain;if(i&&i.hasSegment()){const s=this.getSegment(i).get();e.pt.equals(s.getEndXY())||(s.setCoordsForIntersector(i.start.pt,i.end.pt,!1),s.ensureXYMonotone())}const n=e.nextInChain;if(n&&n.hasSegment()){const s=this.getSegment(n).get();e.pt.equals(s.getStartXY())||(s.setCoordsForIntersector(n.start.pt,n.end.pt,!1),s.ensureXYMonotone())}}updateSegmentToNodes(e){const i=this.getSegment(e).get();e.start.pt.equals(i.getStartXY())&&e.end.pt.equals(i.getEndXY())||(i.setCoordsForIntersector(e.start.pt,e.end.pt,!1),i.ensureXYMonotone()),this.updateAttachedEdgesAfterNodeChange(e.start),this.updateAttachedEdgesAfterNodeChange(e.end)}getSegment(e){return this.parent.m_resultSegments[e.segmentIndex]}clusterNodes(e){let i=!1;const n=[],s=[],r=[];for(let o=0,l=this.m_newNodes.length;o<l;o++){const c=this.m_newNodes[o];if(c===null)continue;let f=c;for(let y=o+1;y<l;y++){const _=this.m_newNodes[y];_!==null&&c.pt.equals(_.pt)&&(f.nextInHash=_,_.prevInHash=f,f=_,this.m_newNodes[y]=null)}}for(let o=0,l=this.m_newNodes.length;o<l;o++){const c=this.m_newNodes[o];if(c==null)continue;for(c.hash=this.calculateHash(c.pt);;){const S=fE(4),P=this.hashTableBinsToCheck(c,S);for(let D=0;D<P;D++)if(S[D]!==null)for(let N=S[D];N!==null;){const F=N.nextInHash;Y.distance(c.pt,N.pt)<=e&&(n.push(N),this.removeNodeFromHash(N),N.hash=0,r.push(N),s.push(N)),N=F}let A=!1;for(const D of n)if(!c.pt.equals(D.pt)){const N=Aye(c.pt,D.pt,c.weight,c.rank,D.weight,D.rank);c.pt.assign(N.pt),c.weight=N.weight,c.rank=N.rank,A=!0,i=!0}if(n.length=0,!A)break;c.hash=this.calculateHash(c.pt)}r.push(c),s.push(c);for(let S=c.nextInHash;S!==null;){S.prevInHash=null;const P=S.nextInHash;S.nextInHash=null,r.push(S),s.push(S),S=P}const f=c.hash;let y=null,_=null;for(const S of s)c!==S&&(S.hash=f,S.pt.assign(c.pt),S.rank=c.rank,S.weight=c.weight),S.prevInHash=y,y&&(y.nextInHash=S),S.prevEqual=_,S.nextEqual=null,_&&(_.nextEqual=S),_=S,y=S;const x=f%this.m_hashTableOfEquals.length;y.nextInHash=this.m_hashTableOfEquals[x],this.m_hashTableOfEquals[x]!==null&&(this.m_hashTableOfEquals[x].prevInHash=y),this.m_hashTableOfEquals[x]=s[0],this.m_hashTableOfEqualsSize+=s.length,s.length=0,this.rehashIfNeeded()}if(this.m_newNodes.length=0,i)for(const o of r)this.updateAttachedEdgesAfterNodeChange(o)}addNodeToHash(e){K(0)}rehashIfNeeded(){if(2*this.m_hashTableOfEqualsSize>this.m_hashTableOfEquals.length){const e=this.m_hashTableOfEquals;this.m_hashTableOfEquals=fE(2*e.length),this.m_hashTableOfEqualsSize=0;for(const i of e){let n=i;for(;n;){const s=n.nextInHash;n.nextInHash=null,n.prevInHash=null,this.addNodeToHashImpl(n),n=s}}}}addNodeToHashImpl(e){const i=e.hash%this.m_hashTableOfEquals.length,n=this.m_hashTableOfEquals[i];e.nextInHash=n,n!==null&&(n.prevInHash=e),this.m_hashTableOfEquals[i]=e,this.m_hashTableOfEqualsSize++}removeNodeFromHash(e){const i=e.hash%this.m_hashTableOfEquals.length,n=e.prevInHash,s=e.nextInHash;n?n.nextInHash=s:this.m_hashTableOfEquals[i]=s,s&&(s.prevInHash=n),this.m_hashTableOfEqualsSize--,e.prevInHash=null,e.nextInHash=null}hashTableBinsToCheck(e,i){const n=(e.pt.x-this.m_origin.x)/this.m_cell.x,s=(e.pt.y-this.m_origin.y)/this.m_cell.y,r=Eo()-1,o=Math.round(hs(n,-2147483646,r)),l=Math.round(hs(s,-2147483646,r));let c=o|l<<32;c=df(c),i[0]=this.m_hashTableOfEquals[c%this.m_hashTableOfEquals.length];let f=o+1|l<<32;f=df(f);let y=1;i[1]=this.m_hashTableOfEquals[f%this.m_hashTableOfEquals.length],i[1]!==i[0]&&(y=2);let _=o+1|l+1<<32;_=df(_),i[y]=this.m_hashTableOfEquals[_%this.m_hashTableOfEquals.length];for(let S=0;S<y;S++)if(i[y]===i[S]){y--;break}y++;let x=o|l+1<<32;x=df(x),i[y]=this.m_hashTableOfEquals[x%this.m_hashTableOfEquals.length];for(let S=0;S<y;S++)if(i[y]===i[S]){y--;break}return y++,y}calculateHash(e){const i=(e.x-this.m_origin.x)/this.m_cell.x,n=(e.y-this.m_origin.y)/this.m_cell.y,s=Eo()-1;let r=Math.round(hs(i,-2147483646,s))|Math.round(hs(n,-2147483646,s))<<32;return r=df(r),r===0&&(r=1),r}processSharpCorners(e,i,n,s){if(this.parent.m_param1.length=0,this.parent.m_param2.length=0,e.getStartXY().equals(i.getStartXY())){const r=[0,0],o=[0,0],l=AT(e,i,0,0,n,2,r,o,s);if(l){this.parent.m_param1.push(0),this.parent.m_param2.push(0);for(let c=0;c<l;c++)this.parent.m_param1.push(r[c]),this.parent.m_param2.push(o[c]);return l+1}}if(e.getEndXY().equals(i.getEndXY())){const r=[0,0],o=[0,0],l=AT(e,i,1,1,n,2,r,o,s);if(l){for(let c=0;c<l;c++)this.parent.m_param1.push(r[c]),this.parent.m_param2.push(o[c]);return this.parent.m_param1.push(1),this.parent.m_param2.push(1),l+1}}if(e.getStartXY().equals(i.getEndXY())){const r=[0,0],o=[0,0],l=AT(e,i,0,1,n,2,r,o,s);if(l){this.parent.m_param1.push(0),this.parent.m_param2.push(1);for(let c=0;c<l;c++)this.parent.m_param1.push(r[c]),this.parent.m_param2.push(o[c]);return l+1}}if(e.getEndXY().equals(i.getStartXY())){const r=[0,0],o=[0,0],l=AT(e,i,1,0,n,2,r,o,s);if(l){for(let c=0;c<l;c++)this.parent.m_param1.push(r[c]),this.parent.m_param2.push(o[c]);return this.parent.m_param1.push(1),this.parent.m_param2.push(0),l+1}}return 0}}function W_(t,e,i){let n=0;switch(t){case me.enumLine:n=0;break;case me.enumBezier:n=2;break;case me.enumRationalBezier2:n=3;break;case me.enumBezier2:n=1;break;case me.enumEllipticArc:n=e.projectionBehavior()===0?5:4;break;default:xt("")}return i?5-n:n}class Kit extends Tye{constructor(e){super(e.m_shape,e.m_tolerance,!1),this.m_parent=e}compare(e,i,n){if(this.m_bIntersectionDetected)return-1;const s=e.getElement(n),r=this.m_parent.getEdgeOriginVertices(i),o=this.m_parent.m_edgeVertices.getFirstElement(r),l=this.m_parent.getEdgeOriginVertices(s),c=this.m_parent.m_edgeVertices.getFirstElement(l);return this.m_currentNode=n,this.compareSegments(i,o,s,c)}}class Jit extends Iye{constructor(e){super(e.m_shape,e.m_tolerance),this.m_parent=e}compare(e,i){if(this.m_bIntersectionDetected)return-1;const n=e.getElement(i),s=this.m_parent.getEdgeOriginVertices(n),r=this.m_parent.m_edgeVertices.getFirstElement(s);return this.m_currentNode=i,this.compareVertex(e,i,r)}}class Qit extends Jv{constructor(e){super(),this.pt1=Y.getNAN(),this.pt2=Y.getNAN(),this.m_shape=e}compare(e,i,n){this.m_shape.queryXY(i,this.pt1);const s=e.getElement(n);return this.m_shape.queryXY(s,this.pt2),this.pt1.compare(this.pt2)}}class ent{constructor(e){this.m_point=Y.getNAN(),this.m_pt=Y.getNAN(),this.m_shape=e}setPoint(e){this.m_point.setCoordsPoint2D(e)}compare(e,i){const n=e.getElement(i);return this.m_shape.queryXY(n,this.m_pt),this.m_point.compare(this.m_pt)}}class fq{constructor(e,i){this.m_shape=null,this.m_progressTracker=null,this.m_edges=new Yt(8),this.m_clusters=new Yt(5),this.m_clusterVertices=new En(!1),this.m_edgeVertices=new En(!1),this.m_helperPoint=new Ut,this.m_eventQ=new jt,this.m_sweepStructure=new jt,this.m_bComplications=!1,this.m_sweepComparator=null,this.m_tempEdgeBuffer=[],this.m_modifiedClusters=[],this.m_edgesToInsertInSweepStructure=[],this.m_prevNeighbour=-1,this.m_nextNeighbour=-1,this.m_bContinuingSegmentChainOptimization=!1,this.m_progressCounter=0,this.m_segmentIntersector=new yl,this.m_segBuf1=new Qt,this.m_segBuf2=new Qt,this.m_sweepPoint=new Y(0,0),this.m_tolerance=0,this.m_toleranceSqr=0,this.m_sweepPointCluster=-1,this.m_vertexClusterIndex=-1,this.m_bCracked=!1,this.m_bSweepPointClusterWasModified=!1,this.m_progressTracker=e,this.m_bTrackChanges=i}hadComplications(){return this.m_bComplications}sweep(e,i){const n=new _i;n.setSwapCoordinates(),e.applyTransformation(n),this.setEditShape_(e),this.m_bCracked=!1,this.m_tolerance=i,this.m_toleranceSqr=i*i;let s=this.sweepImpl_();return e.applyTransformation(n),s||(this.fillEventQueuePass2(),s=this.sweepImpl_()||s),this.m_shape.removeUserIndex(this.m_vertexClusterIndex),this.m_shape=null,this.m_bCracked}sweepVertical(e,i){this.setEditShape_(e),this.m_bCracked=!1,this.m_tolerance=i,this.m_toleranceSqr=i*i,this.m_bComplications=!1;let n=this.sweepImpl_();if(!this.m_bComplications){const s=e.filterClosePoints(i,!0,!1,this.m_bTrackChanges,ae);this.m_bComplications=s===1,n||(n=s===1)}return this.m_vertexClusterIndex!==-1&&(this.m_shape.removeUserIndex(this.m_vertexClusterIndex),this.m_vertexClusterIndex=-1),this.m_shape=null,n}getEdgeCluster(e,i){return this.m_edges.getField(e,0+i)}setEdgeCluster_(e,i,n){this.m_edges.setField(e,0+i,n)}getEdgeOriginVertices(e){return this.m_edges.getField(e,2)}setEdgeOriginVertices_(e,i){this.m_edges.setField(e,2,i)}getNextEdgeEx(e,i){return this.m_edges.getField(e,3+i)}setNextEdgeEx_(e,i,n){this.m_edges.setField(e,3+i,n)}getEdgeSweepNode(e){return this.m_edges.getField(e,7)}setEdgeSweepNode_(e,i){this.m_edges.setField(e,7,i)}getNextEdge(e,i){const n=this.getEdgeEnd(e,i);return this.m_edges.getField(e,3+n)}setNextEdge_(e,i,n){const s=this.getEdgeEnd(e,i);this.m_edges.setField(e,3+s,n)}getPrevEdge(e,i){const n=this.getEdgeEnd(e,i);return this.m_edges.getField(e,5+n)}setPrevEdge_(e,i,n){const s=this.getEdgeEnd(e,i);this.m_edges.setField(e,5+s,n)}getClusterVertices(e){return this.m_clusters.getField(e,0)}setClusterVertices_(e,i){this.m_clusters.setField(e,0,i)}getClusterSweepEdgeList(e){return this.m_clusters.getField(e,2)}setClusterSweepEdgeList_(e,i){this.m_clusters.setField(e,2,i)}getClusterFirstEdge(e){return this.m_clusters.getField(e,1)}setClusterFirstEdge_(e,i){this.m_clusters.setField(e,1,i)}getClusterEventQNode(e){return this.m_clusters.getField(e,3)}setClusterEventQNode_(e,i){this.m_clusters.setField(e,3,i)}newCluster_(e){const i=this.m_clusters.newElement(),n=this.m_clusterVertices.createList();return this.setClusterVertices_(i,n),e!==ae&&(this.m_clusterVertices.addElement(n,e),this.m_shape.setUserIndex(e,this.m_vertexClusterIndex,i)),i}deleteCluster_(e){this.m_clusters.deleteElement(e)}addVertexToCluster_(e,i){const n=this.getClusterVertices(e);this.m_clusterVertices.addElement(n,i),this.m_shape.setUserIndex(i,this.m_vertexClusterIndex,e)}newEdge_(e){const i=this.m_edges.newElement(),n=this.m_edgeVertices.createList();return this.setEdgeOriginVertices_(i,n),e!==-1&&this.m_edgeVertices.addElement(n,e),i}addVertexToEdge_(e,i){const n=this.getEdgeOriginVertices(e);this.m_edgeVertices.addElement(n,i)}deleteEdge_(e){this.m_edges.deleteElement(e);const i=this.m_edgesToInsertInSweepStructure.findIndex(n=>n===e);i>=0&&dQe(this.m_edgesToInsertInSweepStructure,i)}addEdgeToCluster(e,i){this.getEdgeCluster(e,0)===-1?this.setEdgeCluster_(e,0,i):this.getEdgeCluster(e,1)===-1?this.setEdgeCluster_(e,1,i):xt(""),this.addEdgeToClusterImpl_(e,i)}addEdgeToClusterImpl_(e,i){const n=this.getClusterFirstEdge(i);if(n!==-1){const s=this.getNextEdge(n,i);this.setPrevEdge_(s,i,e),this.setNextEdge_(e,i,s),this.setNextEdge_(n,i,e),this.setPrevEdge_(e,i,n)}else this.setPrevEdge_(e,i,e),this.setNextEdge_(e,i,e),this.setClusterFirstEdge_(i,e)}getEdgeEnd(e,i){return this.getEdgeCluster(e,0)===i?0:1}mergeClusters_(e,i){this.dbgCheckCluster_(e),this.dbgCheckCluster_(i);const n=this.getClusterEventQNode(i);n!==-1&&(this.m_eventQ.deleteNode(n),this.setClusterEventQNode_(i,-1));let s=this.getClusterFirstEdge(e),r=this.getClusterFirstEdge(i);if(r!==-1){let c=r,f=r,y=!1;do{this.dbgCheckEdge_(c),y=!1;const _=this.getEdgeEnd(c,i),x=this.getNextEdgeEx(c,_);if(this.getEdgeCluster(c,_+1&1)===e){this.disconnectEdge_(c);const S=this.getEdgeOriginVertices(c);if(this.m_edgeVertices.deleteList(S),this.deleteEdge_(c),c===x){r=-1;break}r===c&&(r=this.getClusterFirstEdge(i),f=x,y=!0)}c=x}while(c!==f||y);if(r!==-1){do{const _=this.getEdgeEnd(c,i),x=this.getNextEdgeEx(c,_);this.setEdgeCluster_(c,_,e),c=x}while(c!==f);if(s=this.getClusterFirstEdge(e),s!==-1){const _=this.getNextEdge(s,e),x=this.getNextEdge(r,e);_===s?(this.setClusterFirstEdge_(e,r),this.addEdgeToClusterImpl_(s,e),this.setClusterFirstEdge_(e,s)):x===r&&this.addEdgeToClusterImpl_(r,e),this.setNextEdge_(r,e,_),this.setPrevEdge_(_,e,r),this.setNextEdge_(s,e,x),this.setPrevEdge_(x,e,s)}else this.setClusterFirstEdge_(e,r)}}const o=this.getClusterVertices(e),l=this.getClusterVertices(i);for(let c=this.m_clusterVertices.getFirst(l);c!==-1;c=this.m_clusterVertices.getNext(c)){const f=this.m_clusterVertices.getElement(c);this.m_shape.setUserIndex(f,this.m_vertexClusterIndex,e)}this.m_clusterVertices.concatenateLists(o,l),this.deleteCluster_(i),this.dbgCheckCluster_(e)}mergeEdges_(e,i){this.dbgCheckEdge_(e),this.dbgCheckEdge_(i);const n=this.getEdgeCluster(e,0),s=this.getEdgeCluster(e,1),r=this.getEdgeCluster(i,0),o=this.getEdgeCluster(i,1),l=this.getEdgeOriginVertices(e),c=this.getEdgeOriginVertices(i);if(this.m_edgeVertices.concatenateLists(l,c),i===this.getClusterFirstEdge(n)&&this.setClusterFirstEdge_(n,e),i===this.getClusterFirstEdge(s)&&this.setClusterFirstEdge_(s,e),this.disconnectEdge_(i),this.deleteEdge_(i),!(n===r&&s===o||s===r&&n===o)){const f=this.getClusterXY(n),y=this.getClusterXY(r);f.isEqualPoint2D(y)?(n!==r&&this.mergeClusters_(n,r),s!==o&&this.mergeClusters_(s,o)):(s!==r&&this.mergeClusters_(s,r),n!==o&&this.mergeClusters_(n,o))}this.dbgCheckEdge_(e)}disconnectEdge_(e){const i=this.getEdgeCluster(e,0),n=this.getEdgeCluster(e,1);this.disconnectEdgeFromCluster_(e,i),this.disconnectEdgeFromCluster_(e,n)}disconnectEdgeFromCluster_(e,i){const n=this.getNextEdge(e,i),s=this.getPrevEdge(e,i),r=this.getClusterFirstEdge(i);n!==e?(this.setNextEdge_(s,i,n),this.setPrevEdge_(n,i,s),r===e&&this.setClusterFirstEdge_(i,n)):this.setClusterFirstEdge_(i,-1)}applyIntersectorToEditShape_(e,i,n){let s=this.m_edgeVertices.getFirst(e);const r=this.m_edgeVertices.getElement(s),o=this.getClusterFromVertex(r),l=this.m_shape.getNextVertex(r),c=this.getClusterFromVertex(l),f=this.m_shape.getXY(r),y=this.m_shape.getXY(l);let _=!1,x=!1;const S=i.getResultSegment(n,0).getStartXY(),P=i.getResultSegment(n,i.getResultSegmentCount(n)-1).getEndXY();f.equals(S)||(_=!0),y.equals(P)||(x=!0),this.m_shape.splitSegmentWithIntersector(r,i,n,!0,!0);const A=this.m_bTrackChanges&&i.getSegmentChanged(n);for(A&&this.m_shape.setGeometryModifiedWithVertex(r,!0),s=this.m_edgeVertices.getNext(s);s!==-1;s=this.m_edgeVertices.getNext(s)){const D=this.m_edgeVertices.getElement(s),N=this.getClusterFromVertex(D)===o;this.m_shape.splitSegmentWithIntersector(D,i,n,N,!0),A&&this.m_shape.setGeometryModifiedWithVertex(D,!0)}if(_&&this.updateClusterXY(!0,o,S,i.getResultSegmentStartPointWeight(n,0),i.getResultSegmentStartPointRank(n,0)),x){const D=i.getResultSegmentCount(n)-1;this.updateClusterXY(!0,c,P,i.getResultSegmentEndPointWeight(n,D),i.getResultSegmentEndPointRank(n,D))}}createEdgesAndClustersFromSplitEdge_(e,i,n){this.dbgCheckNewEdgesArray_();const s=this.getEdgeOriginVertices(e),r=this.getEdgeCluster(e,0),o=this.getEdgeCluster(e,1);let l=this.newEdge_(-1);this.m_edgesToInsertInSweepStructure.push(l);const c=Yt.impossibleIndex3();this.setEdgeSweepNode_(l,c),this.m_tempEdgeBuffer.push(l),this.addEdgeToCluster(l,r);const f=i.getResultSegmentCount(n);for(let y=1;y<f;y++){const _=this.newCluster_(-1);this.m_modifiedClusters.push(_),this.m_tempEdgeBuffer.push(_),this.addEdgeToCluster(l,_);const x=this.newEdge_(-1);this.m_edgesToInsertInSweepStructure.push(x),this.setEdgeSweepNode_(x,c),this.m_tempEdgeBuffer.push(x),this.addEdgeToCluster(x,_),l=x}this.addEdgeToCluster(l,o);for(let y=this.m_edgeVertices.getFirst(s);y!==-1;y=this.m_edgeVertices.getNext(y)){let _=this.m_edgeVertices.getElement(y);if(this.getClusterFromVertex(_)===r){let x=0;const S=this.m_tempEdgeBuffer.length;do{if(x>0){const A=this.m_tempEdgeBuffer[x-1];this.addVertexToCluster_(A,_)}const P=this.m_tempEdgeBuffer[x];x+=2,this.addVertexToEdge_(P,_),_=this.m_shape.getNextVertex(_)}while(x<S)}else{let x=this.m_tempEdgeBuffer.length-1;do{if(x<this.m_tempEdgeBuffer.length-2){const P=this.m_tempEdgeBuffer[x+1];this.addVertexToCluster_(P,_)}const S=this.m_tempEdgeBuffer[x];x-=2,this.addVertexToEdge_(S,_),_=this.m_shape.getNextVertex(_)}while(x>=0)}}this.m_tempEdgeBuffer.length=0,this.dbgCheckNewEdgesArray_()}getVertexFromClusterIndex(e){const i=this.getClusterVertices(e);return this.m_clusterVertices.getFirstElement(i)}getClusterFromVertex(e){return this.m_shape.getUserIndex(e,this.m_vertexClusterIndex)}processSplitHelper1_(e,i,n){const s=this.getEdgeCluster(i,0),r=this.getClusterXY(s),o=this.getEdgeCluster(i,1),l=this.getClusterXY(o),c=n.getResultSegmentCount(e);let f=n.getResultSegment(e,0);const y=f.getStartXY();if(r.isEqualPoint2D(y)||(this.m_bComplications||r.compare(this.m_sweepPoint)*y.compare(this.m_sweepPoint)<0&&(this.m_bComplications=!0),this.getAffectedEdges(s,this.m_tempEdgeBuffer),this.m_modifiedClusters.push(s)),!this.m_bComplications&&c>1){const x=r.compare(l),S=f.getEndXY();(r.compare(S)!==x||S.compare(l)!==x||S.compare(this.m_sweepPoint)<0)&&(this.m_bComplications=!0)}f=n.getResultSegment(e,c-1);const _=f.getEndXY();l.isEqualPoint2D(_)||(this.m_bComplications||l.compare(this.m_sweepPoint)*_.compare(this.m_sweepPoint)<0&&(this.m_bComplications=!0),this.getAffectedEdges(o,this.m_tempEdgeBuffer),this.m_modifiedClusters.push(o)),this.m_tempEdgeBuffer.push(i);for(let x=0,S=this.m_tempEdgeBuffer.length;x<S;x++){const P=this.m_tempEdgeBuffer[x],A=this.getEdgeSweepNode(P);Yt.isValidElement(A)&&(this.m_sweepStructure.deleteNode(A),this.setEdgeSweepNode_(P,-1));const D=Yt.impossibleIndex3();P!==i&&this.getEdgeSweepNode(P)!==D&&(this.m_edgesToInsertInSweepStructure.push(P),this.setEdgeSweepNode_(P,D))}this.m_tempEdgeBuffer.length=0}checkAndFixIntersection_(e,i){const n=this.m_sweepStructure.getElement(e);return this.m_sweepComparator.compare(this.m_sweepStructure,n,i),!!this.m_sweepComparator.intersectionDetected()&&(this.m_sweepComparator.clearIntersectionDetectedFlag(),this.fixIntersection_(e,i),!0)}fixIntersection_(e,i){this.m_bCracked=!0;const n=this.m_sweepStructure.getElement(e),s=this.m_sweepStructure.getElement(i);let r=null,o=null;const l=this.getEdgeOriginVertices(n),c=this.m_edgeVertices.getFirstElement(l),f=this.getEdgeOriginVertices(s),y=this.m_edgeVertices.getFirstElement(f),_=this.m_shape.querySegment(c,this.m_segBuf1,!1,!1);K(_),r=this.m_segBuf1.get();const x=this.m_shape.getNextVertex(c),S=this.m_shape.getWeight(c),P=this.m_shape.getSegmentParentageBreakVertex(c),A=this.m_shape.getWeight(x),D=this.m_shape.getSegmentParentageBreakVertex(x),N=this.m_shape.getSegmentWeight(c),F=this.m_shape.getRank(c),G=this.m_shape.getRank(x),V=this.m_shape.getSegmentRank(c),B=this.m_shape.getSegmentParentage(c),W=this.m_shape.querySegment(y,this.m_segBuf2,!1,!1);K(W),o=this.m_segBuf2.get();const J=this.m_shape.getNextVertex(y),re=this.m_shape.getWeight(y),ne=this.m_shape.getSegmentParentageBreakVertex(y),oe=this.m_shape.getWeight(J),pe=this.m_shape.getSegmentParentageBreakVertex(J),ce=this.m_shape.getSegmentWeight(y),ue=this.m_shape.getRank(y),se=this.m_shape.getRank(J),de=this.m_shape.getSegmentRank(y),Se=this.m_shape.getSegmentParentage(y);this.m_segmentIntersector.pushSegment(r,S,F,A,G,N,V,P,D,B),this.m_segmentIntersector.pushSegment(o,re,ue,oe,se,ce,de,ne,pe,Se),this.m_segmentIntersector.intersect2D(this.m_tolerance,!0)===3&&(this.m_bComplications=!0),this.splitEdge_(n,s,-1,this.m_segmentIntersector),this.m_segmentIntersector.clear()}fixIntersectionPointSegment_(e,i){this.m_bCracked=!0;const n=this.m_sweepStructure.getElement(i);let s=null;const r=this.getEdgeOriginVertices(n),o=this.m_edgeVertices.getFirstElement(r),l=this.m_shape.querySegment(o,this.m_segBuf1,!1,!1);K(l),s=this.m_segBuf1.get();const c=this.m_shape.getNextVertex(o),f=this.m_shape.getWeight(o),y=this.m_shape.getSegmentParentageBreakVertex(o),_=this.m_shape.getWeight(c),x=this.m_shape.getSegmentParentageBreakVertex(c),S=this.m_shape.getSegmentWeight(o),P=this.m_shape.getRank(o),A=this.m_shape.getRank(c),D=this.m_shape.getSegmentRank(o),N=this.m_shape.getSegmentParentage(o),F=this.getClusterFirstVertex(e);this.m_segmentIntersector.pushSegment(s,f,P,_,A,S,D,y,x,N),this.m_shape.queryPoint(F,this.m_helperPoint);const G=this.m_shape.getWeight(F),V=this.m_shape.getRank(F);this.m_segmentIntersector.intersect2DEx(this.m_tolerance,this.m_helperPoint,V,G,!0),this.splitEdge_(n,-1,e,this.m_segmentIntersector),this.m_segmentIntersector.clear()}insertNewEdges_(){if(this.m_edgesToInsertInSweepStructure.length===0)return!0;this.dbgCheckNewEdgesArray_();let e=!0,i=0;const n=this.m_edgesToInsertInSweepStructure.length,s=Math.max(2*n+200,this.m_sweepStructure.size()+200);for(;this.m_edgesToInsertInSweepStructure.length;){if(this.m_edgesToInsertInSweepStructure.length>Math.max(100,this.m_shape.getTotalPointCount())||i>s){this.m_edgesToInsertInSweepStructure.length=0,this.m_bComplications=!0,e=!1;break}const r=this.m_edgesToInsertInSweepStructure.at(-1);this.m_edgesToInsertInSweepStructure.pop(),this.setEdgeSweepNode_(r,-1);const o=this.isEdgeOnSweepLine_(r);Yt.isValidElement(o)?(this.insertNewEdgeToSweepStructure_(r,o),i++):o!==Yt.impossibleIndex2()&&(e=!1),this.m_bContinuingSegmentChainOptimization=!1}return e}insertNewEdgeToSweepStructure_(e,i){let n;if(this.m_bContinuingSegmentChainOptimization?(n=this.m_sweepStructure.addElementAtPosition(this.m_prevNeighbour,this.m_nextNeighbour,e,!0,!0),this.m_bContinuingSegmentChainOptimization=!1):n=this.m_sweepStructure.addUniqueElement(e),n===-1){const s=this.m_sweepStructure.getDuplicateElement(),r=this.m_sweepStructure.getElement(s);return this.mergeEdges_(r,e),!1}if(this.setEdgeSweepNode_(e,n),this.m_sweepComparator.intersectionDetected()){this.m_sweepComparator.clearIntersectionDetectedFlag();const s=this.m_sweepComparator.getLastComparedNode();return this.m_prevNeighbour===s&&(this.m_prevNeighbour=-1),this.m_nextNeighbour===s&&(this.m_nextNeighbour=-1),this.fixIntersection_(s,n),!0}return!1}isEdgeOnSweepLine_(e){const i=this.getEdgeCluster(e,0),n=this.getEdgeCluster(e,1),s=this.getClusterXY(i),r=this.getClusterXY(n);if(Y.sqrDistance(s,r)<=this.m_toleranceSqr)return this.m_bComplications=!0,-1;const o=s.compare(this.m_sweepPoint),l=r.compare(this.m_sweepPoint);return o<=0&&l>0?n:l<=0&&o>0?i:o>0&&l>0?Yt.impossibleIndex2():-1}fillEventQueue(){const e=new On(0),i=this.m_shape.queryVertexIteratorOnSelection();for(let r=i.next();r!==ae;r=i.next())this.m_shape.getUserIndex(r,this.m_vertexClusterIndex)!==-1&&e.add(r);this.m_shape.sortVerticesSimpleByY(e,0,e.size()),this.progress_(!0),this.m_eventQ.clear(),this.m_eventQ.setCapacity(e.size()),this.m_eventQ.setComparator(new Qit(this.m_shape));const n=Y.getNAN();n.setNAN();let s=-1;for(let r=0,o=e.size();r<o;r++){const l=e.read(r);if(this.m_shape.getXY(l).isEqualPoint2D(n)){const f=this.m_shape.getUserIndex(l,this.m_vertexClusterIndex);this.mergeClusters_(s,f);continue}s=this.getClusterFromVertex(l),this.m_shape.queryXY(l,n);const c=this.m_eventQ.addBiggestElement(l);this.setClusterEventQNode_(s,c)}}fillEventQueuePass2(){const e=new On(0);for(let i=this.m_eventQ.getFirst();i!==-1;i=this.m_eventQ.getNext(i)){const n=this.m_eventQ.getElement(i);e.add(n)}this.m_eventQ.clear(),this.m_shape.sortVerticesSimpleByY(e,0,e.size()),this.progress_(!0);for(let i=0,n=e.size();i<n;i++){const s=e.read(i),r=this.getClusterFromVertex(s),o=this.m_eventQ.addBiggestElement(s);this.setClusterEventQNode_(r,o)}}getAffectedEdges(e,i){const n=this.getClusterFirstEdge(e);if(n===-1)return;let s=n;do{const r=this.getEdgeSweepNode(s);Yt.isValidElement(r)&&i.push(s),s=this.getNextEdge(s,e)}while(s!==n)}updateClusterXY(e,i,n,s,r){const o=this.getClusterVertices(i);for(let l=this.m_clusterVertices.getFirst(o);l!==-1;l=this.m_clusterVertices.getNext(l)){const c=this.m_clusterVertices.getElement(l);this.m_shape.setXYMonotonicPoint2D(c,n),this.m_shape.setWeight(c,s),this.m_shape.setRank(c,r),e&&this.m_bTrackChanges&&this.m_shape.setGeometryModifiedWithVertex(c,!0),this.m_shape.setSegmentParentageBreakVertex(c,!0)}}splitEdge_(e,i,n,s){this.dbgCheckEdge_(e),i!==-1&&this.dbgCheckEdge_(i),this.disconnectEdge_(e),i!==-1&&this.disconnectEdge_(i),this.processSplitHelper1_(0,e,s),i!==-1&&this.processSplitHelper1_(1,i,s),n!==-1&&s.getResultPointChanged()&&this.m_modifiedClusters.push(n);for(let l=0,c=this.m_modifiedClusters.length;l<c;l++){const f=this.m_modifiedClusters[l],y=this.getClusterEventQNode(f);y!==-1&&(this.m_eventQ.deleteNode(y),this.setClusterEventQNode_(f,-1))}const r=this.getEdgeOriginVertices(e),o=i!==-1?this.getEdgeOriginVertices(i):-1;if(this.applyIntersectorToEditShape_(r,s,0),o!==-1)this.applyIntersectorToEditShape_(o,s,1);else{const l=s.getResultPoint().getXY();this.updateClusterXY(s.getResultPointChanged(),n,l,s.getResultPointWeight(),s.getResultPointRank())}this.createEdgesAndClustersFromSplitEdge_(e,s,0),i!==-1&&this.createEdgesAndClustersFromSplitEdge_(i,s,1),this.m_edgeVertices.deleteList(r),this.deleteEdge_(e),i!==-1&&(this.m_edgeVertices.deleteList(o),this.deleteEdge_(i));for(let l=0,c=this.m_modifiedClusters.length;l<c;l++){const f=this.m_modifiedClusters[l];f===this.m_sweepPointCluster&&(this.m_bSweepPointClusterWasModified=!0);let y=this.getClusterEventQNode(f);if(y===-1){const _=this.getClusterFirstVertex(f);if(y=this.m_eventQ.addUniqueElement(_),y===-1){const x=this.m_eventQ.getDuplicateElement(),S=this.m_eventQ.getElement(x),P=this.getClusterFromVertex(S);this.mergeClusters_(P,f)}else this.setClusterEventQNode_(f,y)}}this.m_modifiedClusters.length=0}getClusterXY(e){const i=this.getClusterFirstVertex(e);return this.m_shape.getXY(i)}getClusterFirstVertex(e){const i=this.getClusterVertices(e);return this.m_clusterVertices.getFirstElement(i)}dbgCheckEdge_(e){}dbgCheckCluster_(e){}dbgCheckNewEdgesArray_(){}dbgSaveSweepStructure_(e){K(0)}sweepImpl_(){this.progress_(!0),this.m_bSweepPointClusterWasModified=!1,this.m_sweepPointCluster=-1,this.m_sweepComparator===null&&(this.m_sweepStructure.disableBalancing(),this.m_sweepComparator=new Kit(this),this.m_sweepStructure.setComparator(this.m_sweepComparator));const e=[];let i=null,n=null;this.m_prevNeighbour=-1,this.m_nextNeighbour=-1,this.m_bContinuingSegmentChainOptimization=!1;const s=Yt.impossibleIndex2(),r=Yt.impossibleIndex3();for(let o=this.m_eventQ.getFirst();o!==-1;){this.progress_(),this.dbgCheckSweepStructure_(),this.m_bContinuingSegmentChainOptimization=!1,this.m_prevNeighbour=-1,this.m_nextNeighbour=-1;const l=this.m_eventQ.getElement(o);this.m_sweepPointCluster=this.getClusterFromVertex(l),this.m_shape.queryXY(l,this.m_sweepPoint),this.m_sweepComparator.setSweepY(this.m_sweepPoint.y,this.m_sweepPoint.x);let c=!1;{const y=this.getClusterFirstEdge(this.m_sweepPointCluster);if(c=y===-1,!c){let _=y;do{const x=this.getEdgeSweepNode(_);x===-1?(this.m_edgesToInsertInSweepStructure.push(_),this.setEdgeSweepNode_(_,r)):x!==r&&e.push(x),_=this.getNextEdge(_,this.m_sweepPointCluster)}while(_!==y)}}if(!this.m_sweepStructure.isAutoBalancing()&&(this.m_sweepStructure.getMaxDepthEver()>4||this.m_edgesToInsertInSweepStructure.length>10)&&this.m_sweepStructure.enableBalancing(),e.length>0){this.m_bContinuingSegmentChainOptimization=e.length===1&&this.m_edgesToInsertInSweepStructure.length===1;for(let x=0,S=e.length;x<S;x++){const P=this.m_sweepStructure.getElement(e[x]);this.setEdgeSweepNode_(P,s)}let y=s,_=s;for(let x=0,S=e.length;x<S;x++){const P=e[x];if(y===s){const A=this.m_sweepStructure.getPrev(P);if(A!==-1){const D=this.m_sweepStructure.getElement(A);this.getEdgeSweepNode(D)!==s&&(y=A)}else y=-1}if(_===s){const A=this.m_sweepStructure.getNext(P);if(A!==-1){const D=this.m_sweepStructure.getElement(A);this.getEdgeSweepNode(D)!==s&&(_=A)}else _=-1}if(y!==s&&_!==s)break}for(let x=0,S=e.length;x<S;x++){const P=e[x],A=this.m_sweepStructure.getElement(P);this.m_sweepStructure.deleteNode(P),this.setEdgeSweepNode_(A,-1)}e.length=0,this.m_prevNeighbour=y,this.m_nextNeighbour=_,y!==-1&&_!==-1?this.m_bContinuingSegmentChainOptimization||this.checkAndFixIntersection_(y,_):y===-1&&_===-1&&(this.m_bContinuingSegmentChainOptimization=!1)}else c&&(i===null&&(i=new Jit(this)),i.setPoint(this.m_sweepPoint),this.m_sweepStructure.searchUpperBound(i),i.intersectionDetected()&&(i.clearIntersectionDetectedFlag(),this.fixIntersectionPointSegment_(this.m_sweepPointCluster,i.getCurrentNode())));const f=this.m_bContinuingSegmentChainOptimization;!this.insertNewEdges_()&&f&&this.m_prevNeighbour!==-1&&this.m_nextNeighbour!==-1&&this.checkAndFixIntersection_(this.m_prevNeighbour,this.m_nextNeighbour),this.m_bSweepPointClusterWasModified?(this.m_bSweepPointClusterWasModified=!1,n===null&&(n=new ent(this.m_shape)),n.setPoint(this.m_sweepPoint),o=this.m_eventQ.searchUpperBound(n)):o=this.m_eventQ.getNext(o)}return this.m_bCracked}setEditShape_(e){this.m_shape=e,this.m_vertexClusterIndex=this.m_shape.createUserIndex(),this.m_edges.setCapacity(e.getSelectedCount()+32),this.m_clusters.setCapacity(e.getSelectedCount()),this.m_clusterVertices.reserveLists(e.getSelectedCount()),this.m_clusterVertices.reserveNodes(e.getSelectedCount()),this.m_edgeVertices.reserveLists(e.getSelectedCount()+32),this.m_edgeVertices.reserveNodes(e.getSelectedCount()+32);for(let i=this.m_shape.getFirstGeometry();i!==ae;i=this.m_shape.getNextGeometry(i))if(bi(this.m_shape.getGeometryType(i)))for(let n=this.m_shape.getFirstPath(i);n!==ae;n=this.m_shape.getNextPath(n)){const s=this.m_shape.getPathSize(n),r=this.m_shape.getFirstVertex(n);if(r===ae)continue;let o=this.m_shape.getNextVertex(r);if(o===ae||o===r)continue;let l=-1;e.selected(r)&&(l=this.newCluster_(r));let c=-1;l!==-1&&e.selected(o)&&(c=this.newEdge_(r),this.addEdgeToCluster(c,l));let f=c;for(let y=0,_=s-2;y<_;y++){const x=this.m_shape.getNextVertex(o);let S=-1;if(this.m_shape.selected(o)){const P=this.newCluster_(o);f!==-1&&this.addEdgeToCluster(f,P),this.m_shape.selected(x)&&(S=this.newEdge_(o),this.addEdgeToCluster(S,P))}f=S,o=x}if(this.m_shape.isClosedPath(n)){const y=this.m_shape.getNextVertex(o);if(this.m_shape.selected(o)){const _=this.newCluster_(o);if(f!==-1&&this.addEdgeToCluster(f,_),this.m_shape.selected(y)){const x=this.newEdge_(o);this.addEdgeToCluster(x,_),this.addEdgeToCluster(x,l)}}}else{let y=-1;this.m_shape.selected(o)&&(y=this.newCluster_(o),f!==-1&&this.addEdgeToCluster(f,y))}}else for(let n=this.m_shape.getFirstPath(i);n!==ae;n=this.m_shape.getNextPath(n)){let s=this.m_shape.getFirstVertex(n);for(let r=0,o=this.m_shape.getPathSize(n);r<o;r++)this.m_shape.selected(s)&&this.newCluster_(s),s=this.m_shape.getNextVertex(s)}this.fillEventQueue()}progress_(e=!1){}dbgCheckSweepStructure_(){}}function tnt(t,e,i,n){i>0&&Mye(t,i,e,!1,n),new int(n).executeImpl_(t,e)}function hne(t,e,i){return{vertex0:t,vertex1:e,dir:i}}class int{constructor(e){this.m_shape=null,this.m_spikes=[],this.m_points=new On(0),this.m_pointsIndex=-1,this.m_dissolvedEdges=0,this.m_progressTracker=e}executeImpl_(e,i){if(this.m_shape=e,e.getPathCount(i)<2&&e.getPointCount(i)<6)return;this.m_points.resize(0);for(let _=e.getFirstPath(i);_!==ae;_=e.getNextPath(_)){let x=e.getFirstVertex(_);for(let S=0,P=e.getPathSize(_);S<P;S++,x=e.getNextVertex(x))this.m_points.add(x)}this.m_pointsIndex=e.createUserIndex();for(let _=0,x=this.m_points.size();_<x;++_)e.setUserIndex(this.m_points.read(_),this.m_pointsIndex,_);e.sortVerticesSimpleByY(this.m_points,0,this.m_points.size());let n=this.m_points.read(0);const s=e.getXY(n);let r=1,o=0;const l=[];for(let _=1;_<this.m_points.size();_++){const x=this.m_points.read(_);if(x===ae||e.getUserIndex(x,this.m_pointsIndex)===-1)continue;const S=e.getXY(x);if(S.isEqualPoint2D(s))r++;else{if(r>1){for(let P=o;P<_;P++){const A=this.m_points.read(P);if(e.getUserIndex(A,this.m_pointsIndex)===-1)continue;const D=e.getNextVertex(A),N=e.getPrevVertex(A);if(A!==D&&!e.isEqualXYPoint2D(D,s)){const F=hne(A,D,1);l.push(F)}if(A!==N&&N!==D&&!e.isEqualXYPoint2D(N,s)){const F=hne(A,N,-1);l.push(F)}}l.length>0&&this.processBunch_(l,s)}n=x,s.assign(S),r=1,o=_}}if(this.m_dissolvedEdges===0)return e.removeUserIndex(this.m_pointsIndex),void(this.m_pointsIndex=-1);let c=e.getPointCount(i);for(let _=0;_<this.m_points.size();_++){const x=this.m_points.read(_);if(x===ae)continue;if(e.getUserIndex(x,this.m_pointsIndex)!==-1){e.setUserIndex(x,this.m_pointsIndex,-1);continue}const S=e.getPathFromVertex(x);e.getFirstVertex(S)===x&&e.setFirstVertex(S,ae),e.freeVertex(x),this.m_points.write(_,ae),c--}const f=e.createPathUserIndex();let y=e.getPathCount(i);for(let _=0,x=this.m_points.size();_<x;++_){if(this.m_points.read(_)===ae)continue;let S=this.m_points.read(_);if(e.getUserIndex(S,this.m_pointsIndex)!==-1)continue;let P=e.getPathFromVertex(S),A=-1;if(e.getPathUserIndex(P,f)===2){P=ae;for(let G=e.getNextVertex(S);G!==S;G=e.getNextVertex(G)){const V=e.getPathFromVertex(G);if(e.getPathUserIndex(V,f)!==2){P=V,S=G;break}}P===ae&&(P=e.insertPath(i,ae),e.setClosedPath(P,!0),y++),K(P!==ae)}e.setPathUserIndex(P,f,2),A=e.getFirstVertex(P);let D=0,N=!1,F=S;do{A===F&&(N=!0),e.setUserIndex(F,this.m_pointsIndex,1);const G=e.getPathFromVertex(F);G!==P&&(e.getPathUserIndex(G,f)!==2&&(e.setPathUserIndex(G,f,1),e.setFirstVertex(G,ae)),e.setPathToVertex(F,P)),D++,F=e.getNextVertex(F)}while(F!==S);N||e.setFirstVertex(P,S),e.setPathSize(P,D)}for(let _=e.getFirstPath(i);_!==ae;){const x=e.getNextPath(_);e.getPathUserIndex(_,f)!==1&&e.getFirstVertex(_)!==ae||(e.removePathOnly(_),y--),_=x}e.setGeometryVertexCount(i,c),e.setGeometryPathCount(i,y),e.removePathUserIndex(f),e.removeUserIndex(this.m_pointsIndex),this.m_pointsIndex=-1,e.dbgVerifyVertexCounts(),e.filterClosePoints(0,!0,!1,!1,i)}processBunch_(e,i){e.sort((l,c)=>{const f=this.m_shape.getXY(l.vertex1).sub(i),y=this.m_shape.getXY(c.vertex1).sub(i),_=Y.compareVectors(f,y);return _===0?l.dir<c.dir?-1:1:_});let n=0;const s=this.m_shape.getXY(e[0].vertex1);let r=1;const o=this.m_shape.hasCurves();for(let l=1,c=e.length;l<c;l++){const f=this.m_shape.getXY(e[l].vertex1);if(!(f.isEqualPoint2D(s)&&(r++,l+1<c))){if(r===2){const y=e[n],_=e[n+1],x=y.dir;if(x!==_.dir){let S=!0;if(o&&(S=!this.m_shape.isCurve(y.dir===1?y.vertex0:y.vertex1)&&!this.m_shape.isCurve(_.dir===1?_.vertex0:_.vertex1)),S){if(x===1){const P=y.vertex0,A=_.vertex0;this.m_shape.setNextVertex(P,A),this.m_shape.setPrevVertex(A,P),this.m_shape.getPrevVertex(P)===A&&(this.m_shape.setUserIndex(P,this.m_pointsIndex,-1),this.m_shape.setUserIndex(A,this.m_pointsIndex,-1));const D=y.vertex1,N=_.vertex1;this.m_shape.setPrevVertex(D,N),this.m_shape.setNextVertex(N,D),this.m_shape.getNextVertex(D)===N&&(this.m_shape.setUserIndex(D,this.m_pointsIndex,-1),this.m_shape.setUserIndex(N,this.m_pointsIndex,-1))}else{const P=y.vertex0,A=_.vertex0;this.m_shape.setPrevVertex(P,A),this.m_shape.setNextVertex(A,P),this.m_shape.getNextVertex(P)===A&&(this.m_shape.setUserIndex(P,this.m_pointsIndex,-1),this.m_shape.setUserIndex(A,this.m_pointsIndex,-1));const D=y.vertex1,N=_.vertex1;this.m_shape.setNextVertex(D,N),this.m_shape.setPrevVertex(N,D),this.m_shape.getPrevVertex(D)===N&&(this.m_shape.setUserIndex(D,this.m_pointsIndex,-1),this.m_shape.setUserIndex(N,this.m_pointsIndex,-1))}this.m_dissolvedEdges+=2}}}s.assign(f),n=l,r=1}}e.length=0}}function Dye(t){for(let e=t.getFirstGeometry();e!==ae;e=t.getNextGeometry(e))if(bi(t.getGeometryType(e)))return!0;return!1}function nnt(t,e,i,n){if(!Dye(t))return!1;const s=new Dv(n);s.m_shape=t,s.m_tolerance=e,s.m_bTrackChanges=i;let r=!1;const o=t.hasCurves()?5:15;return r=t.getTotalPointCount()<o?s.crackBruteForce_():s.crackerPlaneSweep_(),r}function Nye(t,e,i,n,s){if(!Dye(e))return!1;let r=new Dv(s);if(r.m_shape=e,r.m_tolerance=i,r.m_bAllowCoincident=t,r.m_bNeedsNonSimpleResult=n!==null,r.needsCrackingImpl_())return n&&n.assign(r.m_nonSimpleResult),!0;const o=new _i;o.setSwapCoordinates(),e.applyTransformation(o),r=new Dv(s),r.m_shape=e,r.m_tolerance=i,r.m_bAllowCoincident=t,r.m_bNeedsNonSimpleResult=n!==null;const l=r.needsCrackingImpl_();return e.applyTransformation(o),!!l&&(n&&n.assign(r.m_nonSimpleResult),!0)}function snt(t,e,i,n){const s=e.getGeometryType();if(bi(s))return new Dv(n).crackAWithBMultiPath_(t,e,i);Bn("crack_A_with_B")}function dne(t,e){return{t,index:e}}class Dv{crackBruteForce_(){let e=this.crackBruteForceImpl_();if(!e&&this.m_shape.hasCurves()){const i=new _i;i.setSwapCoordinates(),this.m_shape.applyTransformation(i),e=this.crackBruteForceImpl_(),this.m_shape.applyTransformation(i)}return e}crackBruteForceImpl_(){let e=!1;const i=new Qt,n=new Qt,s=xe.constructEmpty(),r=xe.constructEmpty(),o=!1,l=new Ut,c=new yl,f=this.m_shape.getTotalPointCount(),y=f*f*2,_=this.m_shape.queryVertexIteratorOnSelection();for(let x=_.next();x!==ae;x=_.next()){const S=this.m_shape.getGeometryType(_.currentGeometry());let P=1,A=1,D=1,N=0,F=0,G=0;const V=this.m_shape.getSegmentParentage(x);let B=!1,W=!1,J=null,re=!1;if(V0(S))P=this.m_shape.getWeight(x),N=this.m_shape.getRank(x);else{if(J=this.getSegment_(x,i),J===null)continue;const ce=this.m_shape.getVertexIndex(x);P=this.m_shape.getWeightWithIndex(ce),N=this.m_shape.getRankWithIndex(ce),D=this.m_shape.getSegmentWeightWithIndex(ce),G=this.m_shape.getSegmentRankWithIndex(ce),B=this.m_shape.getSegmentParentageBreakVertex(x);{const ue=this.m_shape.getNextVertex(x);A=this.m_shape.getWeight(ue),F=this.m_shape.getRank(ue),W=this.m_shape.getSegmentParentageBreakVertex(ue)}if(J.queryLooseEnvelope(s),s.inflateCoords(this.m_tolerance,this.m_tolerance),J.isDegenerate(this.m_tolerance)){if(!J.isDegenerate(0))continue;re=!0,J=null}}const ne=new gC({copy:_});let oe=ne.next();oe!==ae&&(oe=ne.next());let pe=0;for(;oe!==ae;oe=ne.next()){if(pe!==0){pe--;continue}if(this.m_shape.getTotalPointCount()>y)return e;this.progress_();const ce=this.m_shape.getGeometryType(ne.currentGeometry());let ue=null,se=!1,de=0,Se=0,Pe=0,Re=0,$e=0,we=0,Fe=!1,it=!1;const _t=this.m_shape.getSegmentParentage(oe);if(V0(ce))de=this.m_shape.getWeight(oe),Re=this.m_shape.getRank(oe);else{if(ue=this.getSegment_(oe,n),ue===null)continue;const Pt=this.m_shape.getVertexIndex(oe);de=this.m_shape.getWeightWithIndex(Pt),Re=this.m_shape.getRankWithIndex(Pt),Pe=this.m_shape.getSegmentWeightWithIndex(Pt),we=this.m_shape.getSegmentRankWithIndex(Pt),Fe=this.m_shape.getSegmentParentageBreakVertex(oe);{const Vt=this.m_shape.getNextVertex(oe);Se=this.m_shape.getWeight(Vt),$e=this.m_shape.getRank(Vt),it=this.m_shape.getSegmentParentageBreakVertex(Vt)}if(ue.queryLooseEnvelope(r),ue.isDegenerate(this.m_tolerance)){if(!ue.isDegenerate(0))continue;se=!0,ue=null}}let ot=0,ut=0;if(J!==null&&ue!==null)s.isIntersectingNe(r)&&j7(!0,!0,J,ue,this.m_tolerance,!0)!==0&&(c.pushSegment(J,P,N,A,F,D,G,B,W,V),c.pushSegment(ue,de,Re,Se,$e,Pe,we,Fe,it,_t),c.intersect2D(this.m_tolerance,!0),e||(e=c.getSegmentChanged(0)||c.getSegmentChanged(1)),ot=c.getResultSegmentCount(0),ut=c.getResultSegmentCount(1),ot+ut>0&&(this.m_shape.splitSegmentWithIntersector(x,c,0,!0,!0),this.m_shape.splitSegmentWithIntersector(oe,c,1,!0,!0),this.m_bTrackChanges&&(c.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(x,!0),c.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(oe,!0))),ut>1&&(pe+=ut-1),c.clear());else if(J!==null){const Pt=this.m_shape.getXY(oe);if(s.contains(Pt)){if(c.pushSegment(J,P,N,A,F,D,G,B,W,V),this.m_shape.queryPoint(oe,l),c.intersect2DEx(this.m_tolerance,l,Re,de,o),e||(e=c.getSegmentChanged(0)||c.getResultPointChanged()),ot=c.getResultSegmentCount(0),ot>0)if(this.m_bTrackChanges&&(c.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(x,!0),c.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(oe,!0)),this.m_shape.splitSegmentWithIntersector(x,c,0,!0,!0),se){let Vt=ae;for(let Ft=this.m_shape.getNextVertex(oe);Ft!==ae&&Ft!==oe&&(ue=this.getSegment_(Ft,n),Vt=Ft,ue!=null&&ue.isDegenerate(0));Ft=this.m_shape.getNextVertex(Ft));for(let Ft=oe;Ft!==ae&&(this.m_shape.setPoint(Ft,c.getResultPoint(),!0),Ft!==Vt);Ft=this.m_shape.getNextVertex(Ft));}else this.m_shape.setPoint(oe,c.getResultPoint(),!0);c.clear()}}else{if(ue===null)continue;{const Pt=this.m_shape.getXY(x);if(r.inflateCoords(this.m_tolerance,this.m_tolerance),r.contains(Pt)){if(c.pushSegment(ue,de,Re,Se,$e,Pe,we,Fe,it,_t),this.m_shape.queryPoint(x,l),c.intersect2DEx(this.m_tolerance,l,N,P,o),e||(e=c.getSegmentChanged(0)||c.getResultPointChanged()),ut=c.getResultSegmentCount(0),ut>0)if(this.m_bTrackChanges&&(c.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(oe,!0),c.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(x,!0)),this.m_shape.splitSegmentWithIntersector(oe,c,0,!0,!0),pe+=ut-1,re){let Vt=ae;for(let Ft=this.m_shape.getNextVertex(x);Ft!==ae&&Ft!==x&&(ue=this.getSegment_(Ft,n),Vt=Ft,ue!=null&&ue.isDegenerate(0));Ft=this.m_shape.getNextVertex(Ft));for(let Ft=x;Ft!==ae&&(this.m_shape.setPoint(Ft,c.getResultPoint(),!0),Ft!==Vt);Ft=this.m_shape.getNextVertex(Ft));}else this.m_shape.setPoint(x,c.getResultPoint(),!0);c.clear()}}}if(ot+ut!==0&&ot!==0){let Pt=!1;for(;J=this.getSegment_(x,i),J!=null&&(J.queryEnvelope(s),J.isDegenerate(this.m_tolerance));){if(!(ot>1)){Pt=!0;break}x=_.next(),ot--,K(x!==ae)}if(Pt)break}}}return e}crackerPlaneSweep_(){return this.planesweep_()}planesweep_(){return new fq(this.m_progressTracker,this.m_bTrackChanges).sweep(this.m_shape,this.m_tolerance)}needsCrackingImpl_(){let e=!1;const i=new On(0);i.resize(this.m_shape.getSelectedCount());const n=this.m_shape.queryVertexIteratorOnSelection();for(let _=0,x=n.next();x!==ae;++_,x=n.next())i.write(_,x);this.m_shape.sortVerticesSimpleByY(i,0,i.size()),i.add(ae);const s=this.m_shape.createUserIndex(),r=this.m_shape.createUserIndex();this.m_sweepComparator=new Tye(this.m_shape,this.m_tolerance,!this.m_bAllowCoincident),this.m_sweepStructure.setComparator(this.m_sweepComparator);let o=null;const l=[],c=[];let f=0;const y=new Y;for(let _=i.read(f++);_!==ae;){this.m_shape.queryXY(_,y);let x=!1;do{let N=this.m_shape.getNextVertex(_),F=this.m_shape.getPrevVertex(_);x||(x=N!==ae||F!==ae),N===ae||this.m_shape.selected(N)||(N=ae),F===ae||this.m_shape.selected(F)||(F=ae),N!==ae&&this.m_shape.compareVerticesSimpleY(_,N)<0&&(c.push(_),c.push(N)),F!==ae&&this.m_shape.compareVerticesSimpleY(_,F)<0&&(c.push(F),c.push(F));const G=this.m_shape.getUserIndex(_,s);G!==-1&&(l.push(G),this.m_shape.setUserIndex(_,s,-1));const V=this.m_shape.getUserIndex(_,r);V!==-1&&(l.push(V),this.m_shape.setUserIndex(_,r,-1)),_=i.read(f++)}while(_!==ae&&this.m_shape.isEqualXYPoint2D(_,y));if(!x&&(o===null&&(o=new Iye(this.m_shape,this.m_tolerance)),o.setPoint(y),this.m_sweepStructure.searchUpperBound(o),o.intersectionDetected())){e=!0,this.m_bNeedsNonSimpleResult&&(K(0),this.m_nonSimpleResult=new Sn(6,-1,-1));break}let S=l.length===1&&c.length===2;l.length>32&&Hx(l);let A=-1,D=-1;if(!S)for(let N=0,F=l.length;N<F;N++){const G=l[N],V=this.m_sweepStructure.getPrev(G);if(V!==-1&&l.indexOf(V)===-1)if(A===-1)A=V;else{if(e=!0,!this.m_bNeedsNonSimpleResult)break;this.m_nonSimpleResult=new Sn(6,-1,-1)}const B=this.m_sweepStructure.getNext(G);if(B!==-1&&l.indexOf(B)===-1)if(D===-1)D=B;else{if(e=!0,!this.m_bNeedsNonSimpleResult)break;this.m_nonSimpleResult=new Sn(6,-1,-1)}if(A!==-1&&D!==-1)break}if(e&&!this.m_bNeedsNonSimpleResult)break;if(this.m_sweepComparator.setSweepY(y.y,y.x),!S){for(let N=0,F=l.length;N<F;N++){const G=l[N];this.m_sweepStructure.deleteNode(G)}l.length=0}if(!S&&A!==-1&&D!==-1&&this.checkForIntersections_(A,D)){e=!0,this.m_bNeedsNonSimpleResult&&(this.m_nonSimpleResult=this.m_sweepComparator.getResult());break}for(let N=0,F=c.length;N<F;N+=2){const G=c[N],V=c[N+1];let B;if(S?(B=this.m_sweepStructure.replaceElementAtPosition(l[0],G,!0,!0),l.length=0,S=!1):B=this.m_sweepStructure.addElement(G),this.m_sweepComparator.intersectionDetected()){this.m_bNeedsNonSimpleResult&&(this.m_nonSimpleResult=this.m_sweepComparator.getResult()),e=!0;break}this.m_shape.getUserIndex(V,s)===-1?this.m_shape.setUserIndex(V,s,B):this.m_shape.setUserIndex(V,r,B)}if(e)break;c.length=0}return this.m_shape.removeUserIndex(s),this.m_shape.removeUserIndex(r),e}checkForIntersections_(e,i){const n=this.m_sweepStructure.getElement(e);this.m_sweepComparator.compare(this.m_sweepStructure,n,i);const s=this.m_sweepComparator.intersectionDetected();return this.m_sweepComparator.clearIntersectionDetectedFlag(),s}getSegment_(e,i){return Dv.st_getSegment(this.m_shape,e,i)}static st_getSegment(e,i,n){return e.querySegment(i,n,!1,!1)?n.get():null}dbgPrintSweepEdge(e){}dbgPrintSweepStructure(){}dbgSaveSweepStructure(e=null){}dbgCheckSweepStructure(){}progress_(e=!1){this.m_progressCounter++}crackAWithBMultiPath_(e,i,n){const s=xe.constructEmpty();e.queryLooseEnvelope(s);const r=xe.constructEmpty();if(i.queryLooseEnvelope(r),r.inflateCoords(n,n),!r.isIntersecting(s))return e;const o=e.getImpl(),l=o.getAccelerators();let c=null,f=null;l&&(f=l.getQuadTree()),rnt(e,WE(i))&&(c=tx(o,r),f=c);const y=f?f.getIteratorForQT():null,_=i.querySegmentIterator(),x=e.querySegmentIterator(),S=new Array(15),P=[];for(;_.nextPath();)for(;_.hasNextSegment();){const V=_.nextSegment();if(f){y.resetIterator(V,n);for(let B=y.next();B!==-1;B=y.next()){this.progress_();const W=f.getElement(B);if(x.resetToVertex(W,-1),x.hasNextSegment()){const J=x.nextSegment().intersect(V,null,S,null,n);for(let re=0;re<J;re++){const ne=S[re];if(ne===0||ne===1)continue;const oe=dne(ne,x.getStartPointIndex());P.push(oe)}}}}else{const B=xe.constructEmpty();if(V.queryLooseEnvelope(B),B.inflateCoords(n,n),!s.isIntersecting(B))continue;for(x.resetToFirstPath();x.nextPath();)for(;x.hasNextSegment();){const W=x.nextSegment(),J=xe.constructEmpty();if(W.queryLooseEnvelope(J),!J.isIntersecting(B))continue;const re=W.intersect(V,null,S,null,n);for(let ne=0;ne<re;ne++){const oe=S[ne];if(oe===0||oe===1)continue;const pe=dne(oe,x.getStartPointIndex());P.push(pe)}}}}if(P.length===0)return e;P.sort((V,B)=>V.index<B.index?-1:V.index>B.index?1:V.t<B.t?-1:V.t>B.t?1:0);const A=e.createInstance();for(A.getGeometryType()===me.enumPolygon&&A.setFillRule(e.getFillRule()),x.resetToFirstPath();x.nextPath()&&!x.hasNextSegment(););K(x.hasNextSegment());let D=x.nextSegment();const N=new Qt;let F=-1;for(let V=0,B=P.length;V<B;){const W=P[V].index;let J=V+1;for(;J<B&&P[J].index===W;)++J;for(;x.getStartPointIndex()<W;){this.progress_();const oe=x.hasNextSegment(),pe=x.getPathIndex();if((oe||!x.isClosingSegment()||x.isCurve())&&(K(D!==null),A.addSegment(D,F!==pe)),F=pe,!oe){for(x.isPathClosed();x.nextPath()&&!x.hasNextSegment(););K(x.hasNextSegment())}D=x.nextSegment()}let re=0;for(let oe=V;oe<J;oe++){const pe=P[oe].t;if(pe===re)continue;K(D!==null),D.queryCut(re,pe,N),re=pe;const ce=x.getPathIndex();A.addSegment(N.get(),F!==ce),F=ce}const ne=x.hasNextSegment();if((ne||!x.isClosingSegment()||x.isCurve())&&(K(D!=null),D.queryCut(re,1,N),A.addSegment(N.get(),!1)),ne)D=x.nextSegment();else{for(;x.nextPath()&&!x.hasNextSegment(););D=x.hasNextSegment()?x.nextSegment():null}V=J}if(D!==null){const V=x.getPathIndex();(x.hasNextSegment()||!x.isClosingSegment()||x.isCurve())&&A.addSegment(D,F!==V),F=V}let G=x.hasNextSegment();for(;;){if(!G){for(;x.nextPath()&&(G=x.hasNextSegment(),!G););if(!G)break}D=x.nextSegment();const V=x.getPathIndex();G=x.hasNextSegment(),(G||!x.isClosingSegment()||x.isCurve())&&A.addSegment(D,F!==V),F=V}return A}constructor(e){this.m_shape=null,this.m_progressTracker=null,this.m_nonSimpleResult=new Sn,this.m_tolerance=0,this.m_sweepComparator=null,this.m_progressCounter=0,this.m_bTrackChanges=!1,this.m_bNeedsNonSimpleResult=!1,this.m_bAllowCoincident=!0,this.m_sweepStructure=new jt,this.m_progressTracker=e}}function rnt(t,e){const i=t.getPointCount();return i<16?!1:2*i+1*(Math.log(i)/Math.log(2))*e<1*i*e}Dv.s_bForceBruteForce=!0;class Oye{constructor(e,i){this.m_monotoneParts=Ge(Qt,16),this.m_xOrds=ji(16,Number.NaN),this.m_inputPoint=Y.getNAN(),this.m_miny=0,this.m_maxy=0,this.m_windnum=0,this.m_bAlternate=e,this.m_tolerance=i,this.m_toleranceSqr=i*i,this.m_bTestBorder=!!i,this.m_bBreak=!1}_DoOne(e){if(!this.m_bTestBorder&&(this.m_bAlternate&&this.m_inputPoint.equals(e.getStartXY())||this.m_inputPoint.equals(e.getEndXY())))return void(this.m_bBreak=!0);if(e.getStartY()===this.m_inputPoint.y&&e.getStartY()===e.getEndY()){if(this.m_bAlternate&&!this.m_bTestBorder){const s=Math.min(e.getStartX(),e.getEndX()),r=Math.max(e.getStartX(),e.getEndX());this.m_inputPoint.x>s&&this.m_inputPoint.x<r&&(this.m_bBreak=!0)}return}let i=!1;const n=Math.max(e.getStartX(),e.getEndX());if(this.m_inputPoint.x>n)i=!0;else if(this.m_inputPoint.x>=Math.min(e.getStartX(),e.getEndX())){const s=e.intersectionOfYMonotonicWithAxisX(this.m_inputPoint.y,n);i=!Number.isNaN(s)&&s<=this.m_inputPoint.x}if(i){if(this.m_inputPoint.y===e.getStartY()){if(this.m_inputPoint.y<e.getEndY())return}else if(this.m_inputPoint.y===e.getEndY()&&this.m_inputPoint.y<e.getStartY())return;this.m_bAlternate?this.m_windnum^=1:this.m_windnum+=e.getStartY()>e.getEndY()?1:-1}}_Result(){return!!this.m_windnum}testBorder(e){const i=e.getClosestCoordinate(this.m_inputPoint,!1),n=e.getCoord2D(i);return Y.sqrDistance(n,this.m_inputPoint)<=this.m_toleranceSqr}setInputPoint(e){this.m_inputPoint.setCoordsPoint2D(e),this.m_miny=e.y-this.m_tolerance,this.m_maxy=e.y+this.m_tolerance}processSegment(e){const i=e.queryInterval(0,1);if(i.vmin>this.m_maxy||i.vmax<this.m_miny)return!1;if(this.m_bTestBorder&&this.testBorder(e))return!0;if(i.vmin>this.m_inputPoint.y||i.vmax<this.m_inputPoint.y)return!1;let n=0;if(e.isCurve()&&(this.m_monotoneParts.length===0&&(this.m_monotoneParts.length=128),n=e.getMonotonicParts(this.m_monotoneParts,!0),K(this.m_monotoneParts.length>=n)),n>0)for(let s=0;s<n;s++){const r=this.m_monotoneParts[s].get(),o=Ze.construct(r.getStartY(),r.getEndY());if(!(o.vmin>this.m_inputPoint.y||o.vmax<this.m_inputPoint.y)&&(this._DoOne(r),this.m_bBreak))return!0}else if(this._DoOne(e),this.m_bBreak)return!0;return!1}result(){return K(0),2}}function ont(t,e,i,n){const s=new xe;t.queryLooseEnvelope(s),s.inflateCoords(n,n);const r=t.getFillRule()===0,o=new Oye(r,n);o.setInputPoint(i);const l=s.clone();l.xmax=i.x+n,l.ymin=i.y-n,l.ymax=i.y+n;const c=t.getImpl().querySegmentIterator(),f=e.getIterator(l,n);for(let y=f.next();y!==-1;y=f.next())if(c.resetToVertex(e.getElement(y),-1),c.hasNextSegment()){const _=c.nextSegment();if(o.processSegment(_))return-1}return o._Result()?1:0}function ant(t,e,i){const n=t.getFillRule()===0,s=new Oye(n,i);s.setInputPoint(e);const r=t.getImpl().querySegmentIterator();for(;r.nextPath();)for(;r.hasNextSegment();){const o=r.nextSegment();if(s.processSegment(o))return-1}return s._Result()?1:0}function lnt(t,e,i){return e.isEmpty()?0:gM(t,e.getXY(),i)}function gM(t,e,i){if(t.isEmpty())return 0;const n=xe.constructEmpty();if(t.queryLooseEnvelope(n),n.inflateCoords(i,i),!n.contains(e))return 0;const s=t.getImpl().getAccelerators();if(s){s.getRasterizedGeometry()&&K(0);const r=s.getQuadTree();if(r)return ont(t,r,e,i)}return ant(t,e,i)}function j0(t,e){const i=t.getPointCount();return i<16?!1:2*i+1*(Math.log(i)/Math.log(2))*e<1*i*e}function cnt(t,e,i,n,s){const r=new dnt(s);return r.m_shape=t,r.m_geometry=e,r.m_sortedVertices=i,r.m_bFixSelfTangency=n,r.fixRingOrientation_()}class unt{getDirection_(e){return this.m_shape.getNextVertex(this.getEnd1(e))===this.getEnd2(e)}getEnd_(e){const i=this.getEnd1(e),n=this.getEnd2(e);return this.m_shape.getNextVertex(i)===n?n:i}constructor(e){this.m_end1Nodes=[],this.m_end2Nodes=[],this.m_directions=[],this.m_shape=e,this.m_firstFree=-1}getSegment(e){return this.m_shape.getSegment(this.getStart(e))}isBottomUp(e){let i=this.getEnd1(e),n=this.getEnd2(e);this.m_shape.getPrevVertex(i)===n&&(n=Et(i,i=n));const s=Y.getNAN(),r=Y.getNAN();return this.m_shape.queryXY(i,s),this.m_shape.queryXY(n,r),K(!s.equals(r)),s.y<r.y}getStart(e){const i=this.getEnd1(e),n=this.getEnd2(e);return this.m_shape.getNextVertex(i)===n?i:n}getEnd1(e){return this.m_end1Nodes[e]}getEnd2(e){return this.m_end2Nodes[e]}freeEdge(e){this.m_end1Nodes[e]=this.m_firstFree,this.m_firstFree=e}newEdge(e){if(this.m_firstFree!==-1){const n=this.m_firstFree;return this.m_firstFree=this.m_end1Nodes[n],this.m_end1Nodes[n]=e,this.m_end2Nodes[n]=this.m_shape.getNextVertex(e),n}const i=this.m_end1Nodes.length;return this.m_end1Nodes.push(e),this.m_end2Nodes.push(this.m_shape.getNextVertex(e)),i}getShape(){return this.m_shape}getPath(e){return this.m_shape.getPathFromVertex(this.getEnd1(e))}}let hnt=class extends Jv{constructor(t){super(),this.m_line1=new ni,this.m_line2=new ni,this.m_leftElm=-1,this.m_leftx=0,this.m_seg1=null,this.m_helper=t}compare(t,e,i){const n=t.getElement(i),s=this.m_helper.m_edges;let r;this.m_leftElm===e?r=this.m_leftx:(this.m_seg1=s.getSegment(e),this.m_seg1?r=this.m_seg1.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0):(s.getShape().queryLineConnector(s.getStart(e),this.m_line1,!0),this.m_seg1=this.m_line1,r=this.m_line1.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0)),this.m_leftx=r,this.m_leftElm=e);let o,l=s.getSegment(n);if(l?o=l.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0):(s.getShape().queryLineConnector(s.getStart(n),this.m_line2,!0),l=this.m_line2,o=this.m_line2.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0)),r===o){const c=s.isBottomUp(e),f=s.isBottomUp(n),y=c?this.m_seg1.getEndY():this.m_seg1.getStartY(),_=f?l.getEndY():l.getStartY(),x=Math.min(y,_);let S=.5*(x+this.m_helper.m_yScanline);S===this.m_helper.m_yScanline&&(S=x),r=this.m_seg1.intersectionOfYMonotonicWithAxisX(S,0),o=l.intersectionOfYMonotonicWithAxisX(S,0),r===o&&Lz("")}return r<o?-1:r>o?1:0}reset(){this.m_leftElm=-1}};class fne{constructor(e){this.m_node=-1,this.m_index=0,this.m_sortedVertices=e.m_sortedVertices,this.m_sortedVerticesArray=e.m_sortedVerticesArray,this.m_sortedVertices&&(this.m_node=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList()))}next(){if(this.m_sortedVertices){const e=this.m_node;if(e===-1)return ae;const i=this.m_sortedVertices.getData(e);return this.m_node=this.m_sortedVertices.getNext(e),i}if(this.m_index<this.m_sortedVerticesArray.size()){const e=this.m_sortedVerticesArray.read(this.m_index);return this.m_index++,e}return ae}}class dnt{constructor(e){this.m_edges=null,this.m_shape=null,this.m_AET=new jt,this.m_yScanline=0,this.m_geometry=ae,this.m_unknownRingOrientationCount=-1,this.m_sortedVertices=null,this.m_sortedVerticesArray=null,this.m_unknownNodes=[],this.m_node1UserIndex=-1,this.m_node2UserIndex=-1,this.m_pathOrientationIndex=-1,this.m_pathParentageIndex=-1,this.m_pathParentsIndex=-1,this.m_progressCounter=0,this.m_bFixSelfTangency=!1,this.m_progressTracker=e,this.m_AET.disableBalancing(),this.m_sweepComparator=new hnt(this),this.m_AET.setComparator(this.m_sweepComparator)}fixRingOrientation_(){const e=this.fixRingOrientationImplMain_();return this.m_pathOrientationIndex===-1||this.fixRingOrientationImplSimplify_(),e}fixRingOrientationForMp2sp_(){return this.fixRingOrientationImplMain_(),this.m_pathOrientationIndex===-1?-1:this.fixRingOrientationImplMp2sp_()}processBunchForRingOrientationTest_(e){return this.processBunchForRingOrientationTestOddEven_(e)}processBunchForRingOrientationTestOddEven_(e){let i=!1;if(this.m_edges||(this.m_edges=new unt(this.m_shape)),this.m_unknownNodes.length=0,this.processBunchForRingOrientationRemoveEdges_(e),!this.m_AET.isAutoBalancing()){let n=0;for(let s=0,r=e.length;s<r;s++)e[s]!==-1&&n++;(n>10||this.m_AET.getMaxDepthEver()>4)&&this.m_AET.enableBalancing()}for(let n=0,s=e.length;n<s;n++){const r=e[n];r!==ae&&this.insertEdge_(r,-1)}for(let n=0;n<this.m_unknownNodes.length&&this.m_unknownRingOrientationCount>0;n++){const s=this.m_unknownNodes[n],r=this.m_AET.getElement(s),o=this.m_edges.getPath(r),l=this.m_shape.getPathUserIndex(o,this.m_pathOrientationIndex);let c=ae;if(l===0){let f=this.m_AET.getPrev(s),y=s,_=!1;for(;f!==jt.st_nullNode();){const x=this.m_AET.getElement(f),S=this.m_edges.getPath(x);if(this.m_shape.getPathUserIndex(S,this.m_pathOrientationIndex)!==0){c=S;break}y=f,f=this.m_AET.getPrev(f)}if(f===jt.st_nullNode())_=!0,f=y;else{const x=this.m_AET.getElement(f);_=this.m_edges.isBottomUp(x),f=this.m_AET.getNext(f),_=!_}do{const x=this.m_AET.getElement(f),S=this.m_edges.getPath(x);if(this.m_shape.getPathUserIndex(S,this.m_pathOrientationIndex)===0){if(_!==this.m_edges.isBottomUp(x)){const P=this.m_shape.getFirstVertex(S);this.m_shape.reverseRingInternal(P),this.m_shape.setLastVertex(S,this.m_shape.getPrevVertex(P)),i=!0}if(this.m_shape.setPathUserIndex(S,this.m_pathOrientationIndex,_?3:2),!_){let P=this.m_shape.getPathUserIndex(c,this.m_pathOrientationIndex);P===2&&(c=this.m_shape.getPathUserIndex(c,this.m_pathParentsIndex),P=this.m_shape.getPathUserIndex(c,this.m_pathOrientationIndex)),K(P===3);const A=this.m_shape.getPathUserIndex(c,this.m_pathParentageIndex);this.m_shape.setPathUserIndex(c,this.m_pathParentageIndex,S),this.m_shape.setPathUserIndex(S,this.m_pathParentageIndex,A),this.m_shape.setPathUserIndex(S,this.m_pathParentsIndex,c)}if(this.m_unknownRingOrientationCount--,!this.m_unknownRingOrientationCount)return i}c=S,y=f,f=this.m_AET.getNext(f),_=!_}while(y!==s)}}return i}processBunchForRingOrientationRemoveEdges_(e){for(let i=0,n=e.length;i<n;i++){const s=e[i],r=this.m_shape.getUserIndex(s,this.m_node1UserIndex),o=this.m_shape.getUserIndex(s,this.m_node2UserIndex);if(r!==-1){const c=this.m_AET.getElement(r);this.m_edges.freeEdge(c),this.m_shape.setUserIndex(s,this.m_node1UserIndex,-1)}if(o!==-1){const c=this.m_AET.getElement(o);this.m_edges.freeEdge(c),this.m_shape.setUserIndex(s,this.m_node2UserIndex,-1)}let l=-1;r!==-1&&o!==-1?(this.m_AET.deleteNode(r),this.m_AET.deleteNode(o),e[i]=ae):l=r!==-1?r:o,l!==-1&&(this.insertEdge_(s,l)||this.m_AET.deleteNode(l),e[i]=ae)}}dbgVerifyRingOrientation_(){}insertEdge_(e,i){const n=Y.getNAN(),s=Y.getNAN();this.m_shape.queryXY(e,n);const r=this.m_shape.getNextVertex(e);this.m_shape.queryXY(r,s);let o=!1;if(n.y<s.y){o=!0;const c=this.m_edges.newEdge(e);let f;i===-1?f=this.m_AET.addElement(c):(f=i,this.m_AET.setElement(f,c)),this.m_shape.getUserIndex(r,this.m_node1UserIndex)===-1?this.m_shape.setUserIndex(r,this.m_node1UserIndex,f):this.m_shape.setUserIndex(r,this.m_node2UserIndex,f);const y=this.m_shape.getPathFromVertex(e);this.m_shape.getPathUserIndex(y,this.m_pathOrientationIndex)===0&&this.m_unknownNodes.push(f)}const l=this.m_shape.getPrevVertex(e);if(this.m_shape.queryXY(l,s),n.y<s.y){o=!0;const c=this.m_edges.newEdge(l);let f;i===-1?f=this.m_AET.addElement(c):(f=i,this.m_AET.setElement(f,c)),this.m_shape.getUserIndex(l,this.m_node1UserIndex)===-1?this.m_shape.setUserIndex(l,this.m_node1UserIndex,f):this.m_shape.setUserIndex(l,this.m_node2UserIndex,f);const y=this.m_shape.getPathFromVertex(e);this.m_shape.getPathUserIndex(y,this.m_pathOrientationIndex)===0&&this.m_unknownNodes.push(f)}return o}fixRingSelfTangency_(){const e=[],i=[];let n=-1,s=-1;const r=new Y;let o=ae,l=ae,c=-1;const f=new fne(this);for(let y=f.next();y!==ae;y=f.next()){const _=new Y;this.m_shape.queryXY(y,_);const x=this.m_shape.getPathFromVertex(y);r.equals(_)&&l===x?(s===-1&&(n=this.m_shape.createPathUserIndex(),this.m_shape.fillPathUserIndexForGeometry(this.m_geometry,n,-1),s=this.m_shape.createUserIndex(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,s,-1)),c===-1&&(c=i.length,this.m_shape.setUserIndex(o,s,c),i.push(1),this.m_shape.getPathUserIndex(x,n)===-1&&(this.m_shape.setPathUserIndex(x,n,o),e.push(x))),this.m_shape.setUserIndex(y,s,c),i[i.length-1]++):(c=-1,r.assign(_)),o=y,l=x}if(e.length===0)return!1;K(n!==-1);for(let y=0,_=e.length;y<_;y++){const x=e[y];let S=this.m_shape.getPathUserIndex(x,n);const P=this.m_shape.getUserIndex(S,s),A=[],D=[];A.push(S),D.push(P);for(let N=this.m_shape.getNextVertex(S);N!==S;N=this.m_shape.getNextVertex(N)){const F=N,G=this.m_shape.getUserIndex(F,s);if(G!==-1){if(D.length===0){D.push(G),A.push(F);continue}if(D.at(-1)===G){const V=A.at(-1);this.m_shape.peelALoopIntoAPath(V,F),this.m_shape.setUserIndex(N,s,-1),i[G]--,i[G]===1&&(i[G]=0,D.pop(),A.pop()),S=V,N=V}else A.push(N),D.push(G)}}}return this.m_shape.removePathUserIndex(n),this.m_shape.removeUserIndex(s),this.m_shape.dbgVerifyVertexCounts(),!0}progress_(e=!1){}fixRingOrientationImplMain_(){const e={stack:[],error:void 0,hasError:!1};try{let i,n=!1;const s=sc(e,S7(()=>{this.m_sortedVerticesArray=null}),!1);if(this.m_sortedVertices===null){const c=this.m_shape.getPointCount(this.m_geometry);i=new On(0);for(let f=this.m_shape.getFirstPath(this.m_geometry);f!==ae;f=this.m_shape.getNextPath(f)){let y=this.m_shape.getFirstVertex(f);for(let _=0,x=this.m_shape.getPathSize(f);_<x;_++)i.add(y),y=this.m_shape.getNextVertex(y)}this.m_shape.sortVerticesSimpleByY(i,0,c),this.progress_(!0),this.m_sortedVerticesArray=i}else s.bForget=!0;if(this.m_bFixSelfTangency&&(n=this.fixRingSelfTangency_()),this.m_shape.getPathCount(this.m_geometry)===1){const c=this.m_shape.getFirstPath(this.m_geometry),f=this.m_shape.getRingArea(c);if(this.m_shape.setExterior(c,!0),f<0){const y=this.m_shape.getFirstVertex(c);return this.m_shape.reverseRingInternal(y),this.m_shape.setLastVertex(c,this.m_shape.getPrevVertex(y)),!0}return!1}this.m_shape.dbgVerifyCurves(),this.m_pathOrientationIndex=this.m_shape.createPathUserIndex(),this.m_pathParentageIndex=this.m_shape.createPathUserIndex(),this.m_pathParentsIndex=this.m_shape.createPathUserIndex();for(let c=this.m_shape.getFirstPath(this.m_geometry);c!==ae;c=this.m_shape.getNextPath(c))this.m_shape.setPathUserIndex(c,this.m_pathOrientationIndex,0),this.m_shape.setPathUserIndex(c,this.m_pathParentageIndex,-1),this.m_shape.setPathUserIndex(c,this.m_pathParentsIndex,-1);const r=[];this.m_yScanline=Number.NaN;const o=Y.getNAN();this.m_unknownRingOrientationCount=this.m_shape.getPathCount(this.m_geometry),this.m_node1UserIndex=this.m_shape.createUserIndexUninitialized(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,this.m_node1UserIndex,-1),this.m_node2UserIndex=this.m_shape.createUserIndexUninitialized(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,this.m_node2UserIndex,-1);const l=new fne(this);for(let c=l.next();c!==ae&&(this.progress_(),this.m_shape.queryXY(c,o),o.y!==this.m_yScanline&&r.length&&(n=this.processBunchForRingOrientationTest_(r)||n,this.m_sweepComparator.reset(),r.length=0),r.push(c),this.m_yScanline=o.y,this.m_unknownRingOrientationCount!==0);c=l.next());return this.m_unknownRingOrientationCount>0&&(n=this.processBunchForRingOrientationTest_(r)||n,r.length=0),this.m_shape.removeUserIndex(this.m_node1UserIndex),this.m_shape.removeUserIndex(this.m_node2UserIndex),this.dbgVerifyRingOrientation_(),n}catch(i){e.error=i,e.hasError=!0}finally{_m(e)}}fixRingOrientationImplSimplify_(){const e=[];for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;)if(this.progress_(),this.m_shape.getPathUserIndex(i,this.m_pathOrientationIndex)===3){this.m_shape.setExterior(i,!0);for(let r=this.m_shape.getPathUserIndex(i,this.m_pathParentageIndex);r!==ae;){const o=this.m_shape.getPathUserIndex(r,this.m_pathParentageIndex);e.push(r),this.m_shape.setExterior(r,!1),this.m_shape.setPathUserIndex(r,this.m_pathParentageIndex,i),r=o}let n=i,s=e.length;for(let r=this.m_shape.getNextPath(i);s>0&&r!==ae;r=this.m_shape.getNextPath(r),--s){if(this.m_shape.getPathUserIndex(r,this.m_pathParentageIndex)!==i){n=ae;break}n=r}if(s!==0){n=i;for(let r=0,o=e.length;r<o;r++){const l=e[r];this.m_shape.setPathUserIndex(l,this.m_pathParentageIndex,Wb),this.m_shape.movePath(this.m_geometry,this.m_shape.getNextPath(n),l),n=l}}e.length=0,i=this.m_shape.getNextPath(n)}else i=this.m_shape.getNextPath(i);this.m_shape.removePathUserIndex(this.m_pathOrientationIndex),this.m_shape.removePathUserIndex(this.m_pathParentageIndex),this.m_shape.removePathUserIndex(this.m_pathParentsIndex)}fixRingOrientationImplMp2sp_(){const e=this.m_shape.createPathUserIndex();let i=0;const n=[];for(let s=this.m_shape.getFirstPath(this.m_geometry);s!==ae;)if(this.progress_(),this.m_shape.getPathUserIndex(s,this.m_pathOrientationIndex)===3){this.m_shape.setExterior(s,!0),this.m_shape.setPathUserIndex(s,e,i),i++;for(let c=this.m_shape.getPathUserIndex(s,this.m_pathParentageIndex);c!==ae;){const f=this.m_shape.getPathUserIndex(c,this.m_pathParentageIndex);n.push(c),this.m_shape.setExterior(c,!1),this.m_shape.setPathUserIndex(c,this.m_pathParentageIndex,s),c=f}let r=s,o=n.length,l=i;for(let c=this.m_shape.getNextPath(s);o>0&&c!==ae;c=this.m_shape.getNextPath(c),--o){if(this.m_shape.getPathUserIndex(c,this.m_pathParentageIndex)!==s){r=ae;break}r=c,this.m_shape.setPathUserIndex(c,e,-l),l++}if(o!==0){r=s,l=i;for(let c=0,f=n.length;c<f;c++){const y=n[c];this.m_shape.setPathUserIndex(y,e,-l),l++,this.m_shape.setPathUserIndex(y,this.m_pathParentageIndex,Wb)}r=s}i=l,n.length=0,s=this.m_shape.getNextPath(r)}else s=this.m_shape.getNextPath(s);return this.m_shape.removePathUserIndex(this.m_pathOrientationIndex),this.m_shape.removePathUserIndex(this.m_pathParentageIndex),this.m_shape.removePathUserIndex(this.m_pathParentsIndex),e}}function m0(t,e,i,n,s,r){const o=new fnt(r);return o.m_shape=t,o.m_geometry=e,o.m_knownSimpleResult=i,o.m_bFixSelfTangency=n,o.m_polylineDegeneracies=s,o.m_bHasSegmentParentage=t.hasSegmentParentage(),o.m_bHasSegments=t.hasCurves(),o.simplify_()}class fnt{constructor(e){this.m_shape=null,this.m_geometry=ae,this.m_sortedVertices=new oo,this.m_bunchEdgeEndPoints=[],this.m_bunchEdgeCenterPoints=[],this.m_bunchEdgeIndices=[],this.m_knownSimpleResult=-1,this.m_sortedVerticesListIndex=-1,this.m_polylineDegeneracies=ae,this.m_userIndexSortedIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=-1,this.m_nextVertexToProcess=-1,this.m_firstCoincidentVertex=-1,this.m_progressCounter=0,this.m_bFixSelfTangency=!1,this.m_bHasSegmentParentage=!1,this.m_bHasSegments=!1,this.m_progressTracker=e}compareAngles_(e,i){if(this.m_bHasSegments)return this.compareAnglesCurves_(e,i);const n=this.m_bunchEdgeEndPoints[e],s=new Y;this.m_shape.queryXY(n,s);const r=new Y,o=this.m_bunchEdgeEndPoints[i];if(this.m_shape.queryXY(o,r),s.equals(r))return 0;const l=this.m_bunchEdgeCenterPoints[e],c=new Y;this.m_shape.queryXY(l,c);const f=this.m_bunchEdgeCenterPoints[i],y=new Y;this.m_shape.queryXY(f,y);const _=new Y;_.setSub(s,c);const x=new Y;return x.setSub(r,y),(_.isZero()||x.isZero())&&Lz(""),Y.compareVectors(_,x)}compareAnglesCurves_(e,i){const n=this.m_bunchEdgeEndPoints[e],s=this.m_bunchEdgeEndPoints[i],r=this.m_bunchEdgeCenterPoints[e],o=this.m_bunchEdgeCenterPoints[i],l=this.m_shape.getNextVertex(r)===n,c=this.m_shape.getNextVertex(o)===s,f=new Qt,y=new Y;l?(this.m_shape.querySegment(r,f,!1,!0),y.assign(f.get().getTangent(0))):(this.m_shape.querySegment(n,f,!1,!0),y.assign(f.get().getTangent(1)),y.negateThis());const _=new Y;return c?(this.m_shape.querySegment(o,f,!1,!0),_.assign(f.get().getTangent(0))):(this.m_shape.querySegment(s,f,!1,!0),_.assign(f.get().getTangent(1)),_.negateThis()),(y.isZero()||_.isZero())&&Lz(""),Y.compareVectors(y,_)}beforeRemoveVertex_(e,i){const n=this.m_shape.getUserIndex(e,this.m_userIndexSortedIndexToVertex);if(this.m_nextVertexToProcess===n&&(this.m_nextVertexToProcess=this.m_sortedVertices.getNext(this.m_nextVertexToProcess)),this.m_firstCoincidentVertex===n&&(this.m_firstCoincidentVertex=this.m_sortedVertices.getNext(this.m_firstCoincidentVertex)),this.m_sortedVertices.deleteElement(this.m_sortedVerticesListIndex,n),this.removeAngleSortInfo_(e),i){const s=this.m_shape.getPathFromVertex(e);if(s!==ae&&this.m_shape.getFirstVertex(s)===e){const r=this.m_shape.getNextVertex(e);if(r!==e){if(this.m_shape.getPathFromVertex(r)===s)return void this.m_shape.setFirstVertex(s,r);{const o=this.m_shape.getPrevVertex(e);if(o!==e&&this.m_shape.getPathFromVertex(o)===s)return void this.m_shape.setFirstVertex(s,o)}}this.m_shape.setFirstVertex(s,ae),this.m_shape.setLastVertex(s,ae)}}}processBunch_(){let e=!1;const i=new Y(0,0);for(;;){this.m_bunchEdgeEndPoints.length=0,this.m_bunchEdgeCenterPoints.length=0,this.m_bunchEdgeIndices.length=0;let n=this.m_firstCoincidentVertex,s=0,r=!0;for(;n!==this.m_nextVertexToProcess;){const l=this.m_sortedVertices.getData(n);r&&(this.m_shape.queryXY(l,i),r=!1);const c=this.m_shape.getPrevVertex(l),f=this.m_shape.getNextVertex(l);this.m_shape.getUserIndex(c,this.m_userIndexSortedAngleIndexToVertex)!==Wb&&(this.m_bunchEdgeEndPoints.push(c),this.m_shape.setUserIndex(c,this.m_userIndexSortedAngleIndexToVertex,Wb),this.m_bunchEdgeCenterPoints.push(l),this.m_bunchEdgeIndices.push(s++)),this.m_shape.getUserIndex(f,this.m_userIndexSortedAngleIndexToVertex)!==Wb&&(this.m_bunchEdgeEndPoints.push(f),this.m_shape.setUserIndex(f,this.m_userIndexSortedAngleIndexToVertex,Wb),this.m_bunchEdgeCenterPoints.push(l),this.m_bunchEdgeIndices.push(s++)),n=this.m_sortedVertices.getNext(n)}if(this.m_bunchEdgeEndPoints.length<2){this.m_bunchEdgeEndPoints.length===1&&this.m_shape.setUserIndex(this.m_bunchEdgeEndPoints[0],this.m_userIndexSortedAngleIndexToVertex,-1);break}this.m_bunchEdgeIndices.sort((l,c)=>this.compareAngles_(l,c));for(let l=0,c=this.m_bunchEdgeIndices.length;l<c;l++){const f=this.m_bunchEdgeIndices[l],y=this.m_bunchEdgeEndPoints[f];this.m_shape.setUserIndex(y,this.m_userIndexSortedAngleIndexToVertex,l)}const o=this.processCrossOvers_(i);for(let l=0,c=this.m_bunchEdgeIndices.length;l<c;l++){const f=this.m_bunchEdgeIndices[l];if(f===-1)continue;const y=this.m_bunchEdgeEndPoints[f];this.m_shape.setUserIndex(y,this.m_userIndexSortedAngleIndexToVertex,-1)}if(!o)break;e=!0}return e}processCrossOvers_(e){let i=!1,n=!0;for(;n;){n=!1;let s=0;this.m_bunchEdgeIndices[s]===-1&&(s=this.getNextEdgeIndex_(s));let r=this.getNextEdgeIndex_(s);for(let o=0,l=this.m_bunchEdgeIndices.length;o<l&&s!==-1&&r!==-1&&s!==r;o++){const c=this.m_bunchEdgeIndices[s],f=this.m_bunchEdgeIndices[r],y=this.m_bunchEdgeEndPoints[c],_=this.m_bunchEdgeEndPoints[f];let x=this.m_shape.getNextVertex(y),S=!1;this.m_shape.isEqualXYPoint2D(x,e)||(x=this.m_shape.getPrevVertex(y),S=!0);let P=this.m_shape.getNextVertex(_),A=!1;this.m_shape.isEqualXYPoint2D(P,e)||(P=this.m_shape.getPrevVertex(_),A=!0);const D=S?this.m_shape.getPrevVertex(x):this.m_shape.getNextVertex(x),N=A?this.m_shape.getPrevVertex(P):this.m_shape.getNextVertex(P);let F=!1;(this.removeSpike_(x)||this.removeSpike_(P)||this.removeSpike_(y)||this.removeSpike_(_)||this.removeSpike_(D)||this.removeSpike_(N))&&(F=!0),x!==P&&(!F&&this.m_shape.isEqualXY(y,_)&&(F=this.resolveOverlap_(S,A,x,y,P,_)),!F&&this.m_shape.isEqualXY(D,N)&&(F=this.resolveOverlap_(!S,!A,x,D,P,N)),!F&&this.m_shape.isEqualXY(y,N)&&(F=this.resolveOverlap_(S,!A,x,y,P,N)),!F&&this.m_shape.isEqualXY(D,_)&&(F=this.resolveOverlap_(!S,A,x,D,P,_))),F&&(i=!0),n||(n=F),s=F?this.getNextEdgeIndex_(s):r,r=this.getNextEdgeIndex_(s)}}if(!i){let s=0;this.m_bunchEdgeIndices[s]===-1&&(s=this.getNextEdgeIndex_(s));let r=this.getNextEdgeIndex_(s);for(let o=0,l=this.m_bunchEdgeIndices.length;o<l&&s!==-1&&r!==-1&&s!==r;o++){const c=this.m_bunchEdgeIndices[s],f=this.m_bunchEdgeIndices[r],y=this.m_bunchEdgeEndPoints[c],_=this.m_bunchEdgeEndPoints[f];let x=this.m_shape.getNextVertex(y);this.m_shape.isEqualXYPoint2D(x,e)||(x=this.m_shape.getPrevVertex(y));let S=this.m_shape.getNextVertex(_);this.m_shape.isEqualXYPoint2D(S,e)||(S=this.m_shape.getPrevVertex(_));const P=this.getDirection_(x,y),A=this.getDirection_(S,_),D=P?this.m_shape.getPrevVertex(x):this.m_shape.getNextVertex(x),N=A?this.m_shape.getPrevVertex(S):this.m_shape.getNextVertex(S),F=this.detectAndResolveCrossOver_(P,A,y,x,D,_,S,N);F!==1?F===0?(s=this.getNextEdgeIndex_(s),r=this.getNextEdgeIndex_(s)):(s=this.getPrevEdgeIndex_(s),r=this.getNextEdgeIndex_(s)):i=!0}}return i}simplify_(){this.m_shape.getGeometryType(this.m_geometry)===me.enumPolygon&&this.m_shape.getFillRule(this.m_geometry)===1&&new kf(this.m_progressTracker).planarSimplifyNoCrackingAndCluster(this.m_bFixSelfTangency,this.m_shape,this.m_geometry,0);let e=!1;this.m_userIndexSortedIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=this.m_shape.createUserIndexUninitialized();const i=this.m_shape.getPointCount(this.m_geometry),n=new On(0);this.m_shape.dbgVerifyMonotone();for(let o=this.m_shape.getFirstPath(this.m_geometry);o!==ae;o=this.m_shape.getNextPath(o)){let l=this.m_shape.getFirstVertex(o);for(let c=0,f=this.m_shape.getPathSize(o);c<f;c++)this.m_shape.setUserIndex(l,this.m_userIndexSortedAngleIndexToVertex,-1),n.add(l),l=this.m_shape.getNextVertex(l)}this.m_shape.sortVerticesSimpleByY(n,0,i),this.progress_(!0),this.m_userIndexSortedIndexToVertex=this.m_shape.createUserIndexUninitialized(),this.m_sortedVertices.reserveNodes(i),this.m_sortedVerticesListIndex=this.m_sortedVertices.createList(0);for(let o=0;o<i;o++){const l=n.read(o),c=this.m_sortedVertices.addElement(this.m_sortedVerticesListIndex,l);this.m_shape.setUserIndex(l,this.m_userIndexSortedIndexToVertex,c)}this.m_nextVertexToProcess=-1,this.cleanupSpikes_()&&(e=!0);let s=0,r=!1;do{r=!1,this.m_nextVertexToProcess=-1,this.m_firstCoincidentVertex=this.m_sortedVertices.getFirst(this.m_sortedVerticesListIndex);const o=new Y(0,0);this.m_firstCoincidentVertex!==oo.st_nullNode()&&this.m_shape.queryXY(this.m_sortedVertices.getData(this.m_firstCoincidentVertex),o);let l=0,c=this.m_firstCoincidentVertex;for(;c!==oo.st_nullNode()&&(c=this.m_sortedVertices.getNext(c),c!==oo.st_nullNode());){this.progress_();const f=this.m_sortedVertices.getData(c),y=Y.getNAN();if(this.m_shape.queryXY(f,y),o.equals(y))l++;else{if(l>0){this.m_nextVertexToProcess=c;const _=this.processBunch_();c=this.m_nextVertexToProcess,c!==oo.st_nullNode()&&this.m_shape.queryXY(this.m_sortedVertices.getData(c),y),_&&(r=!0)}o.setCoordsPoint2D(y),this.m_firstCoincidentVertex=c,l=0}}this.m_nextVertexToProcess=-1,l>0&&this.processBunch_()&&(r=!0),s++>10&&xt(""),r&&this.fixOrphanVertices_(),this.cleanupSpikes_()&&(r=!0),e||(e=r)}while(r);return this.m_shape.dbgVerifyMonotone(),this.m_shape.dbgVerifyCurves(),this.m_shape.removeUserIndex(this.m_userIndexSortedIndexToVertex),this.m_shape.removeUserIndex(this.m_userIndexSortedAngleIndexToVertex),e=cnt(this.m_shape,this.m_geometry,this.m_sortedVertices,this.m_bFixSelfTangency,this.m_progressTracker)||e,this.m_shape.dbgVerifyCurves(),e}getDirection_(e,i){return this.m_shape.getNextVertex(i)!==e}detectAndResolveCrossOver_(e,i,n,s,r,o,l,c){if(s===l)return this.removeAngleSortInfo_(n),this.removeAngleSortInfo_(o),-1;const f=this.m_shape.getUserIndex(n,this.m_userIndexSortedAngleIndexToVertex),y=this.m_shape.getUserIndex(r,this.m_userIndexSortedAngleIndexToVertex),_=this.m_shape.getUserIndex(o,this.m_userIndexSortedAngleIndexToVertex),x=this.m_shape.getUserIndex(c,this.m_userIndexSortedAngleIndexToVertex),S=new Array(8),P=new Array(4);S[0]=0,P[0]=f,S[1]=0,P[1]=y,S[2]=1,P[2]=_,S[3]=1,P[3]=x;for(let D=1;D<4;D++){const N=P[D],F=S[D];let G=D-1;for(;G>=0&&P[G]>N;)P[G+1]=P[G],S[G+1]=S[G],G--;P[G+1]=N,S[G+1]=F}let A=0;if(S[0]&&(A|=1),S[1]&&(A|=2),S[2]&&(A|=4),S[3]&&(A|=8),A!==5&&A!==10)return 0;if(e!==i&&(c=Et(o,o=c)),e)this.m_shape.setNextVertex(c,s),this.m_shape.setPrevVertex(s,c),this.m_shape.setNextVertex(r,l),this.m_shape.setPrevVertex(l,r),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageBreakVertex(s,!0),this.m_shape.setSegmentParentageBreakVertex(l,!0));else{if(this.m_shape.setPrevVertex(c,s),this.m_shape.setNextVertex(s,c),this.m_shape.setPrevVertex(r,l),this.m_shape.setNextVertex(l,r),this.m_bHasSegmentParentage){const D=this.m_shape.getSegmentParentage(s),N=this.m_shape.getSegmentParentage(l);this.m_shape.setSegmentParentageAndBreak(s,N,!0),this.m_shape.setSegmentParentageAndBreak(l,D,!0)}if(this.m_bHasSegments){const D=this.m_shape.getVertexIndex(s),N=this.m_shape.getVertexIndex(l),F=this.m_shape.getSegmentFromIndex(D);this.m_shape.setSegmentToIndex(D,null);const G=this.m_shape.getSegmentFromIndex(N);this.m_shape.setSegmentToIndex(N,null),this.m_shape.setSegmentToIndex(D,G),this.m_shape.setSegmentToIndex(N,F)}}return 1}resolveOverlap_(e,i,n,s,r,o){return this.resolveOverlapOddEven_(e,i,n,s,r,o)}resolveOverlapOddEven_(e,i,n,s,r,o){if(e!==i){e||(r=Et(n,n=r),o=Et(s,s=o));const l=this.m_shape.getNextVertex(r),c=this.m_shape.getNextVertex(n);if(this.m_shape.setNextVertex(n,l),this.m_shape.setPrevVertex(l,n),this.m_shape.setNextVertex(r,c),this.m_shape.setPrevVertex(c,r),this.m_bHasSegments){const f=this.m_shape.getVertexIndex(n),y=this.m_shape.getVertexIndex(r),_=this.m_shape.getSegmentFromIndex(f);this.m_shape.setSegmentToIndex(f,null);const x=this.m_shape.getSegmentFromIndex(y);this.m_shape.setSegmentToIndex(y,null),this.m_shape.setSegmentToIndex(f,x),this.m_shape.setSegmentToIndex(y,_)}if(this.m_bHasSegmentParentage){const f=this.m_shape.getSegmentParentage(n),y=this.m_shape.getSegmentParentage(r);this.m_shape.setSegmentParentageAndBreak(n,y,!0),this.m_shape.setSegmentParentageAndBreak(r,f,!0),this.m_shape.setSegmentParentageBreakVertex(s,!0),this.m_shape.setSegmentParentageBreakVertex(o,!0)}this.removeSpike_(r)}else{const l=e?n:s,c=i?r:o,f=e?s:n,y=i?o:r;let _=null;if(this.m_bHasSegments){const F=this.m_shape.getVertexIndex(y);_=this.m_shape.getSegmentFromIndex(F),this.m_shape.setSegmentToIndex(F,null);const G=this.m_shape.getVertexIndex(c);this.m_shape.setSegmentToIndex(G,null);const V=this.m_shape.getVertexIndex(l);this.m_shape.setSegmentToIndex(V,null)}let x=-1;this.m_bHasSegmentParentage&&(x=this.m_shape.getSegmentParentage(y));let S=!1;this.m_shape.setNextVertex(l,c),this.m_shape.setNextVertex(c,l),this.m_shape.setPrevVertex(f,y),this.m_shape.setPrevVertex(y,f);let P=y;for(;P!==c;){const F=this.m_shape.getPrevVertex(P),G=this.m_shape.getNextVertex(P);if(this.m_shape.setPrevVertex(P,G),this.m_shape.setNextVertex(P,F),S||(S=P===l),this.m_bHasSegments&&P!==l){const V=this.m_shape.getVertexIndex(G),B=_;_=this.m_shape.getSegmentFromIndex(V),B!==null&&B.reverse(),this.m_shape.setSegmentToIndex(V,B)}if(this.m_bHasSegmentParentage){const V=this.m_shape.getSegmentParentage(G);this.m_shape.setSegmentParentagePreserveBreak(G,x),x=V}P=G}let A=null;if(!S){const F=this.m_shape.getPrevVertex(c),G=this.m_shape.getNextVertex(c);if(this.m_shape.setPrevVertex(c,G),this.m_shape.setNextVertex(c,F),this.m_bHasSegments){const V=this.m_shape.getVertexIndex(c);A=this.m_shape.getSegmentFromIndex(V),this.m_shape.setSegmentToIndex(V,null)}}let D=-1,N=-1;if(this.m_bHasSegmentParentage&&(D=S?this.m_shape.getSegmentParentage(l):this.m_shape.getSegmentParentage(c),N=this.m_shape.getSegmentParentage(f)),this.transferVertexData_(c,l),this.beforeRemoveVertex_(c,!0),this.m_shape.removeVertexInternal(c,!0),this.removeAngleSortInfo_(l),this.transferVertexData_(y,f),this.beforeRemoveVertex_(y,!0),this.m_shape.removeVertexInternal(y,!0),this.removeAngleSortInfo_(f),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageAndBreak(l,D,!0),this.m_shape.setSegmentParentageAndBreak(f,N,!0)),A){const F=this.m_shape.getVertexIndex(l);this.m_shape.setSegmentToIndex(F,A)}}return!0}cleanupSpikes_(){let e=!1;for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;){const n=this.m_shape.getNextPath(i);let s=this.m_shape.getFirstVertex(i);for(let r=0,o=this.m_shape.getPathSize(i);r<o&&o>1;){this.progress_();const{v:l,bModified:c}=this.checkAndCleanupSpike_(i,s);if(l===ae)break;c?(e=!0,s=l,r=0,o=this.m_shape.getPathSize(i)):(s=l,r++)}i=n}return e}checkAndCleanupSpike_(e,i){const n={v:ae,bModified:!1};let s=this.m_shape.getPrevVertex(i),r=this.m_shape.getNextVertex(i),o=ae,l=ae;for(;this.m_shape.isEqualXY(s,r)&&(o=s,l=r,r!==i);)s=this.m_shape.getPrevVertex(s),r=this.m_shape.getNextVertex(r);if(o===ae)return n.v=r,n;n.bModified=!0;for(let c=this.m_shape.getNextVertex(o);this.beforeRemoveVertex_(c,!1),c!==l;c=this.m_shape.getNextVertex(c));if(o===i)return this.m_polylineDegeneracies!==ae?this.m_shape.movePath(this.m_polylineDegeneracies,ae,e):this.m_shape.removePath(e),n.v=ae,n;{const c=this.m_shape.peelALoopIntoAPath(o,l);this.m_polylineDegeneracies!==ae?this.m_shape.movePath(this.m_polylineDegeneracies,ae,c):this.m_shape.removePath(c)}return n.v=o,n}removeSpike_(e){let i=this.m_shape.getPrevVertex(e),n=this.m_shape.getNextVertex(e),s=ae,r=ae;for(;this.m_shape.isEqualXY(i,n)&&(s=i,r=n,n!==e);)i=this.m_shape.getPrevVertex(i),n=this.m_shape.getNextVertex(n);if(s===ae)return!1;if(this.m_shape.peelALoop(s,r),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageBreakVertex(s,!0),this.m_shape.setSegmentParentageBreakVertex(r,!0)),this.removeAngleSortInfo_(s),this.m_polylineDegeneracies===ae)for(let o=this.m_shape.getNextVertex(r);;){const l=this.m_shape.getNextVertex(o);if(this.removeAngleSortInfo_(o),this.beforeRemoveVertex_(o,!0),this.m_shape.setSegmentToIndex(this.m_shape.getVertexIndex(o),null),this.m_shape.removeVertexInternal(o,!1),o===r)break;o=l}else{for(let l=r;;){const c=this.m_shape.getNextVertex(l);if(this.removeAngleSortInfo_(l),this.beforeRemoveVertex_(l,!1),l=c,l===r)break}const o=[!1];this.m_shape.insertClosedPath(this.m_polylineDegeneracies,ae,r,r,o)}return!0}fixOrphanVertices_(){let e=0;for(let s=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList());s!==-1;s=this.m_sortedVertices.getNext(s)){const r=this.m_sortedVertices.getData(s);this.m_shape.setPathToVertex(r,ae)}let i=0;for(let s=this.m_shape.getFirstPath(this.m_geometry);s!==ae;){const r=this.m_shape.getFirstVertex(s);if(r===ae||this.m_shape.getPathFromVertex(r)!==ae){const l=s;s=this.m_shape.getNextPath(s),this.m_shape.removePathOnly(l);continue}this.m_shape.setPathToVertex(r,s);let o=1;for(let l=this.m_shape.getNextVertex(r);l!==r;l=this.m_shape.getNextVertex(l))this.m_shape.setPathToVertex(l,s),o++;this.m_shape.setRingAreaValid(s,!1),this.m_shape.setPathSize(s,o),this.m_shape.setLastVertex(s,this.m_shape.getPrevVertex(r)),i+=o,e++,s=this.m_shape.getNextPath(s)}for(let s=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList());s!==-1;s=this.m_sortedVertices.getNext(s)){const r=this.m_sortedVertices.getData(s);if(this.m_shape.getPathFromVertex(r)!==ae)continue;const o=[!1],l=this.m_shape.insertClosedPath(this.m_geometry,ae,r,r,o);i+=this.m_shape.getPathSize(l),e++}this.m_shape.setGeometryPathCount(this.m_geometry,e),this.m_shape.setGeometryVertexCount(this.m_geometry,i);let n=0;for(let s=this.m_shape.getFirstGeometry();s!==ae;s=this.m_shape.getNextGeometry(s))n+=this.m_shape.getPointCount(s);this.m_shape.setTotalPointCount(n)}getNextEdgeIndex_(e){if(e===-1)return-1;for(let i=0,n=this.m_bunchEdgeIndices.length-1;i<n;i++)if(e=(e+1)%this.m_bunchEdgeIndices.length,this.m_bunchEdgeIndices[e]!==-1)return e;return-1}getPrevEdgeIndex_(e){if(e===-1)return-1;for(let i=0,n=this.m_bunchEdgeIndices.length-1;i<n;i++)if(e=(this.m_bunchEdgeIndices.length+e-1)%this.m_bunchEdgeIndices.length,this.m_bunchEdgeIndices[e]!==-1)return e;return-1}transferVertexData_(e,i){const n=this.m_shape.getUserIndex(i,this.m_userIndexSortedIndexToVertex),s=this.m_shape.getUserIndex(i,this.m_userIndexSortedAngleIndexToVertex);this.m_shape.transferAllDataToTheVertex(e,i),this.m_shape.setUserIndex(i,this.m_userIndexSortedIndexToVertex,n),this.m_shape.setUserIndex(i,this.m_userIndexSortedAngleIndexToVertex,s)}removeAngleSortInfo_(e){const i=this.m_shape.getUserIndex(e,this.m_userIndexSortedAngleIndexToVertex);i!==-1&&(this.m_bunchEdgeIndices[i]=-1,this.m_shape.setUserIndex(e,this.m_userIndexSortedAngleIndexToVertex,-1))}progress_(e=!1){}}function rh(t,e,i,n,s,r=!0){switch(gnt(n)){case 0:break;case 1:Je("relation string length has to be 9 characters");break;default:Je("relation string")}if(r){const x=wnt(n,t.getDimension(),e.getDimension());if(x!==0)return i0(t,e,i,x,s)}let o=0;if(typeof i=="number")o=i;else{const x=xe.constructEmpty();t.queryEnvelope(x);const S=xe.constructEmpty();e.queryEnvelope(S);const P=xe.constructEmpty();P.setCoords({env2D:x}),P.mergeEnvelope2D(S),o=n1(i,P,!1)}const l=bne(t,o),c=bne(e,o);if(l.isEmpty()||c.isEmpty())return xnt(l,c,n);const f=l.getGeometryType(),y=c.getGeometryType();let _=!1;switch(f){case me.enumPolygon:switch(y){case me.enumPolygon:_=ynt(l,c,o,n,s);break;case me.enumPolyline:_=pne(l,c,o,n,s);break;case me.enumPoint:_=yne(l,c,o,n);break;case me.enumMultiPoint:_=mne(l,c,o,n,s)}break;case me.enumPolyline:switch(y){case me.enumPolygon:_=pne(c,l,o,Z_(n),s);break;case me.enumPolyline:_=vnt(l,c,o,n,s);break;case me.enumPoint:_=vne(l,c,o,n,s);break;case me.enumMultiPoint:_=gne(l,c,o,n,s)}break;case me.enumPoint:switch(y){case me.enumPolygon:_=yne(c,l,o,Z_(n));break;case me.enumPolyline:_=vne(c,l,o,Z_(n),s);break;case me.enumPoint:_=bnt(l,c,o,n);break;case me.enumMultiPoint:_=_ne(c,l,o,Z_(n))}break;case me.enumMultiPoint:switch(y){case me.enumPolygon:_=mne(c,l,o,Z_(n),s);break;case me.enumPolyline:_=gne(c,l,o,Z_(n),s);break;case me.enumMultiPoint:_=_nt(l,c,o,n,s);break;case me.enumPoint:_=_ne(l,c,o,n)}break;default:_=!1}return _}function pnt(t,e,i,n){const s=new _d;s.resetMatrix_(),s.setPredicates_("T*****F**"),s.setAreaAreaPredicates_();const r=xe.constructEmpty(),o=xe.constructEmpty();t.queryEnvelope(r),e.queryEnvelope(o);let l=!1;if(zf(r,o,i)&&(s.areaAreaDisjointPredicates_(t,e),l=!0),l||nn(t,e),l)return Sa(s.m_matrix,s.m_scl);let c=new Hn,f=c.addGeometry(t),y=c.addGeometry(e),_=null,x=0;if(t.hasNonLinearSegments()||e.hasNonLinearSegments()){_=new Ru;const D=$u(i,c.getEnvelope2D(n));x=gf(D,0),Wh(c,D,i,12e3,_,null,n)}nf(c,new ta(i,0).add(x),n,!1,!1);const S=c.getGeometry(y).getBoundary();if(c.filterClosePoints(0,!0,!0,!1,ae),m0(c,f,-1,!1,ae,n),c.getPointCount(f)===0)return!1;m0(c,y,-1,!1,ae,n),s.setEditShape_(c,n);const P=c.getPointCount(y)===0;if(!P){s.computeMatrixTopoGraphHalfEdges_(f,y),s.m_topoGraph.removeShape();const D=Sa(s.m_matrix,s.m_scl);if(!D)return D}const A=c.getGeometry(f);return c=new Hn,f=c.addGeometry(A),y=c.addGeometry(S),s.setEditShape_(c,n),s.m_predicateCount=0,s.resetMatrix_(),s.setPredicates_(P?"T*****F**":"******F**"),s.setAreaLinePredicates_(),s.computeMatrixTopoGraphHalfEdges_(f,y),s.m_topoGraph.removeShape(),Sa(s.m_matrix,s.m_scl)}function mnt(t,e,i,n){const s=new _d;s.resetMatrix_(),s.setPredicates_("T*****F**"),s.setAreaLinePredicates_();const r=xe.constructEmpty(),o=xe.constructEmpty();t.queryEnvelope(r),e.queryEnvelope(o);let l=!1;if(zf(r,o,i)&&(s.areaLineDisjointPredicates_(t,e),l=!0),l||nn(t,e),l)return Sa(s.m_matrix,s.m_scl);const c=new Hn,f=c.addGeometry(t),y=c.addGeometry(e);return s.setEditShapeCrackAndCluster_(c,new ta(i,0),n),c.getPointCount(f)===0?!1:(s.computeMatrixTopoGraphHalfEdges_(f,y),s.m_topoGraph.removeShape(),Sa(s.m_matrix,s.m_scl))}function gnt(t){if(t.length!==9)return 1;for(let e=0;e<9;e++){const i=t[e];if(i!=="*"&&i!=="T"&&i!=="F"&&i!=="0"&&i!=="1"&&i!=="2")return 2}return 0}function ynt(t,e,i,n,s){const r=new _d;r.resetMatrix_(),r.setPredicates_(n),r.setAreaAreaPredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(zf(o,l,i)&&(r.areaAreaDisjointPredicates_(t,e),c=!0),c||nn(t,e),!c){const f=new Hn,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new ta(i,0),s),r.computeMatrixTopoGraphHalfEdges_(y,_),r.m_topoGraph.removeShape()}return Sa(r.m_matrix,r.m_scl)}function pne(t,e,i,n,s){const r=new _d;r.resetMatrix_(),r.setPredicates_(n),r.setAreaLinePredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(zf(o,l,i)&&(r.areaLineDisjointPredicates_(t,e),c=!0),c||nn(t,e),!c){const f=new Hn,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new ta(i,0),s),r.m_clusterIndexB=r.m_topoGraph.createUserIndexForClusters(),yM(_,r.m_topoGraph,r.m_clusterIndexB),r.computeMatrixTopoGraphHalfEdges_(y,_),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexB),r.m_topoGraph.removeShape()}return Sa(r.m_matrix,r.m_scl)}function mne(t,e,i,n,s){const r=new _d;r.resetMatrix_(),r.setPredicates_(n),r.setAreaPointPredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(zf(o,l,i)&&(r.areaPointDisjointPredicates_(t),c=!0),c||nn(t,e),!c){const f=new Hn,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new ta(i,0),s),r.computeMatrixTopoGraphClusters_(y,_),r.m_topoGraph.removeShape()}return Sa(r.m_matrix,r.m_scl)}function vnt(t,e,i,n,s){const r=new _d;r.resetMatrix_(),r.setPredicates_(n),r.setLineLinePredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(zf(o,l,i)&&(r.lineLineDisjointPredicates_(t,e),c=!0),c||nn(t,e),!c){const f=new Hn,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new ta(i,0),s),r.m_clusterIndexA=r.m_topoGraph.createUserIndexForClusters(),r.m_clusterIndexB=r.m_topoGraph.createUserIndexForClusters(),yM(y,r.m_topoGraph,r.m_clusterIndexA),yM(_,r.m_topoGraph,r.m_clusterIndexB),r.computeMatrixTopoGraphHalfEdges_(y,_),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexA),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexB),r.m_topoGraph.removeShape()}return Sa(r.m_matrix,r.m_scl)}function gne(t,e,i,n,s){const r=new _d;r.resetMatrix_(),r.setPredicates_(n),r.setLinePointPredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(zf(o,l,i)&&(r.linePointDisjointPredicates_(t),c=!0),c||nn(t,e),!c){const f=new Hn,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new ta(i,0),s),r.m_clusterIndexA=r.m_topoGraph.createUserIndexForClusters(),yM(y,r.m_topoGraph,r.m_clusterIndexA),r.computeMatrixTopoGraphClusters_(y,_),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexA),r.m_topoGraph.removeShape()}return Sa(r.m_matrix,r.m_scl)}function _nt(t,e,i,n,s){const r=new _d;r.resetMatrix_(),r.setPredicates_(n),r.setPointPointPredicates_();const o=new xe,l=new xe;t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(zf(o,l,i)&&(r.pointPointDisjointPredicates_(),c=!0),!c){const f=new Hn,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new ta(i,0),s),r.computeMatrixTopoGraphClusters_(y,_),r.m_topoGraph.removeShape()}return Sa(r.m_matrix,r.m_scl)}function yne(t,e,i,n,s){const r=new _d;r.resetMatrix_(),r.setPredicates_(n),r.setAreaPointPredicates_();const o=xe.constructEmpty();t.queryEnvelope(o);const l=e.getXY();let c=!1;if(R7(l,o,i)&&(r.areaPointDisjointPredicates_(t),c=!0),!c){const f=Il(t,l,i);if(f===1)r.m_matrix[0]=0,r.m_matrix[2]=2,r.m_matrix[3]=-1,r.m_matrix[5]=1,r.m_matrix[6]=-1;else if(f===2)if(r.m_matrix[6]=-1,t.calculateArea2D()!==0)r.m_matrix[0]=-1,r.m_matrix[3]=0,r.m_matrix[2]=2,r.m_matrix[5]=1;else{r.m_matrix[0]=0,r.m_matrix[3]=-1,r.m_matrix[5]=-1;const y=xe.constructEmpty();t.queryEnvelope(y),r.m_matrix[2]=y.height()||y.width()?1:-1}else r.areaPointDisjointPredicates_(t)}return Sa(r.m_matrix,n)}function vne(t,e,i,n,s){const r=new _d;r.resetMatrix_(),r.setPredicates_(n),r.setLinePointPredicates_();const o=xe.constructEmpty();t.queryEnvelope(o);let l=!1;if(R7(e.getXY(),o,i)&&(r.linePointDisjointPredicates_(t),l=!0),!l){let c=null,f=!1,y=!1;if((r.m_performPredicates[0]||r.m_performPredicates[6])&&(i0(t,e,i,4,s)?(r.m_matrix[0]=-1,r.m_matrix[6]=0):(r.m_performPredicates[0]&&(c=sd(t),y=!i0(c,e,i,4,s),f=!0,r.m_matrix[0]=y?-1:0),r.m_matrix[6]=-1)),r.m_performPredicates[3]&&(c!==null&&c.isEmpty()?r.m_matrix[3]=-1:(f||(c==null&&(c=sd(t)),y=!i0(c,e,i,4,s),f=!0),r.m_matrix[3]=y?0:-1)),r.m_performPredicates[5])if(c!==null&&c.isEmpty())r.m_matrix[5]=-1;else if(f&&!y)r.m_matrix[5]=0;else{c===null&&(c=sd(t));const _=i0(c,e,i,3,s);r.m_matrix[5]=_?-1:0}if(r.m_performPredicates[2])if(t.calculateLength2D()!==0)r.m_matrix[2]=1;else{const _=new Qs({vd:t.getDescription()});_.addPoints(t,0,t.getPointCount());const x=i0(_,e,i,3,s);r.m_matrix[2]=x?-1:0}}return Sa(r.m_matrix,r.m_scl)}function _ne(t,e,i,n,s){const r=new _d;r.resetMatrix_(),r.setPredicates_(n),r.setPointPointPredicates_();const o=xe.constructEmpty();t.queryEnvelope(o);const l=e.getXY(),c=new Y;let f=!1;if(R7(l,o,i)&&(r.pointPointDisjointPredicates_(),f=!0),!f){let y=!1,_=!0;const x=i*i;for(let S=0;S<t.getPointCount()&&(t.queryXY(S,c),Y.sqrDistance(c,l)<=x?y=!0:_=!1,!y||_);S++);y?(r.m_matrix[0]=0,r.m_matrix[2]=_?-1:0,r.m_matrix[6]=-1):(r.m_matrix[0]=-1,r.m_matrix[2]=0,r.m_matrix[6]=0)}return Sa(r.m_matrix,n)}function bnt(t,e,i,n,s){const r=t.getXY(),o=e.getXY(),l=ji(9,-1);return Y.sqrDistance(r,o)<=i*i?l[0]=0:(l[2]=0,l[6]=0),l[8]=2,Sa(l,n)}function Sa(t,e){for(let i=0;i<9;i++)switch(e[i]){case"T":if(t[i]===-1)return!1;break;case"F":if(t[i]!==-1)return!1;break;case"0":if(t[i]!==0)return!1;break;case"1":if(t[i]!==1)return!1;break;case"2":if(t[i]!==2)return!1}return!0}function xnt(t,e,i){const n=ji(9,-1);if(t.isEmpty()&&e.isEmpty())return Sa(n,i);let s,r=!1;t.isEmpty()?(s=e,r=!0):s=t,n[0]=-1,n[1]=-1,n[3]=-1,n[4]=-1,n[6]=-1,n[7]=-1,n[8]=2;const o=s.getGeometryType();if(bi(o))if(o===me.enumPolygon)if(s.calculateArea2D()!==0)n[2]=2,n[5]=1;else{n[5]=-1;const l=xe.constructEmpty();s.queryEnvelope(l),n[2]=l.height()||l.width()?1:0}else{const l=s.calculateLength2D()!==0;n[2]=l?1:0,n[5]=Kb(s)?0:-1}else n[2]=0,n[5]=-1;return r&&Ant(n),Sa(n,i)}function wnt(t,e,i){return Snt(t)?3:Ent(t)?4:Cnt(t,e,i)?8:Pnt(t,e,i)?16:Int(t)?64:Tnt(t)?1:Mnt(t,e,i)?32:0}function Snt(t){return t==="T*F**FFF*"}function Ent(t){return t==="FF*FF****"}function Cnt(t,e,i){return(e!==0||i!==0)&&(e===2&&i===2?t==="F***T****":(e===2||e===1)&&i===0&&t==="F**T*****")}function Pnt(t,e,i){return e>i?t==="T*****T**":e===1&&i===1&&t==="0********"}function Tnt(t){return t==="T*****FF*"}function Int(t){return t==="T**FF*FF*"}function Mnt(t,e,i){return e===i&&(e!==1?t==="T*T***T**":t==="1*T***T**")}function yM(t,e,i){const n=e.getGeometryID(t);for(let s=e.getFirstCluster();s!==ae;s=e.getNextCluster(s)){if(!(e.getClusterParentage(s)&n))continue;const r=e.getClusterHalfEdge(s);if(r===ae){e.setClusterUserIndex(s,i,0);continue}let o=r,l=0;do{const c=o;e.getHalfEdgeParentage(c)&n&&l++,o=e.getHalfEdgeNext(e.getHalfEdgeTwin(c))}while(o!==r);e.setClusterUserIndex(s,i,l)}}class _d{nullFunc(){return K(0),!1}constructor(){this.m_clusterIndexA=-1,this.m_clusterIndexB=-1,this.m_visitedIndex=-1,this.m_topoGraph=new Xh,this.m_matrix=ji(9,0),this.m_maxDim=ji(9,0),this.m_performPredicates=ji(9,!1),this.m_scl="",this.m_predicateCount=0,this.m_predicatesHalfEdge=this.nullFunc,this.m_predicatesCluster=this.nullFunc}resetMatrix_(){this.m_matrix.fill(-2),this.m_maxDim.fill(-2)}setPredicates_(e){this.m_scl=e;for(let i=0;i<9;i++)this.m_scl[i]!=="*"?(this.m_performPredicates[i]=!0,this.m_predicateCount++):this.m_performPredicates[i]=!1}setRemainingPredicatesToFalse_(){for(let e=0;e<9;e++)this.m_performPredicates[e]&&this.m_matrix[e]===-2&&(this.m_matrix[e]=-1,this.m_performPredicates[e]=!1)}isPredicateKnown_(e){return this.m_matrix[e]!==-2&&(this.m_matrix[e]===-1?(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0):this.m_scl[e]!=="T"&&this.m_scl[e]!=="F"?!(this.m_matrix[e]<this.m_maxDim[e])&&(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0):(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0))}setAreaAreaPredicates_(){this.m_predicatesHalfEdge=this.areaAreaPredicates_,this.m_maxDim[0]=2,this.m_maxDim[1]=1,this.m_maxDim[2]=2,this.m_maxDim[3]=1,this.m_maxDim[4]=1,this.m_maxDim[5]=1,this.m_maxDim[6]=2,this.m_maxDim[7]=1,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setAreaLinePredicates_(){this.m_predicatesHalfEdge=this.areaLinePredicates_,this.m_predicatesCluster=this.areaPointPredicates_,this.m_maxDim[0]=1,this.m_maxDim[1]=0,this.m_maxDim[2]=2,this.m_maxDim[3]=1,this.m_maxDim[4]=0,this.m_maxDim[5]=1,this.m_maxDim[6]=1,this.m_maxDim[7]=0,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setLineLinePredicates_(){this.m_predicatesHalfEdge=this.lineLinePredicates_,this.m_predicatesCluster=this.linePointPredicates_,this.m_maxDim[0]=1,this.m_maxDim[1]=0,this.m_maxDim[2]=1,this.m_maxDim[3]=0,this.m_maxDim[4]=0,this.m_maxDim[5]=0,this.m_maxDim[6]=1,this.m_maxDim[7]=0,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setAreaPointPredicates_(){this.m_predicatesCluster=this.areaPointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=2,this.m_maxDim[3]=0,this.m_maxDim[4]=-1,this.m_maxDim[5]=1,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setLinePointPredicates_(){this.m_predicatesCluster=this.linePointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=1,this.m_maxDim[3]=0,this.m_maxDim[4]=-1,this.m_maxDim[5]=0,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setPointPointPredicates_(){this.m_predicatesCluster=this.pointPointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=0,this.m_maxDim[3]=-1,this.m_maxDim[4]=-1,this.m_maxDim[5]=-1,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[3]&&(this.m_matrix[3]=-1,this.m_performPredicates[3]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[5]&&(this.m_matrix[5]=-1,this.m_performPredicates[5]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}areaAreaDisjointPredicates_(e,i){this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5]),this.areaGeomContainsOrDisjointPredicates_(i,this.m_performPredicates[6]?6:-1,this.m_scl[6],this.m_performPredicates[7]?7:-1,this.m_scl[7])}areaGeomContainsOrDisjointPredicates_(e,i,n,s,r){const o=i!==-1,l=s!==-1;if(o||l){if(!(n!=="T"&&n!=="F"&&o||r!=="T"&&r!=="F"&&l)||e.calculateArea2D()!==0)o&&(this.m_matrix[i]=2),l&&(this.m_matrix[s]=1);else if(l&&(this.m_matrix[s]=-1),o){const c=xe.constructEmpty();e.queryEnvelope(c),this.m_matrix[i]=c.height()||c.width()?1:0}}}areaAreaContainsPredicates_(e){K(0)}areaAreaWithinPredicates_(e){K(0)}areaLineDisjointPredicates_(e,i){if(this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_performPredicates[6]){const n=this.m_scl[6],s=n==="T"||n==="F"||i.calculateLength2D()!==0;this.m_matrix[6]=s?1:0}if(this.m_performPredicates[7]){const n=Kb(i);this.m_matrix[7]=n?0:-1}this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5])}areaLineContainsPredicates_(e,i){K(0)}areaPointDisjointPredicates_(e){this.m_matrix[0]=-1,this.m_matrix[3]=-1,this.m_matrix[6]=0,this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5])}areaPointContainsPredicates_(e){K(0)}lineLineDisjointPredicates_(e,i){if(this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_performPredicates[2]){const n=this.m_scl[2],s=n==="T"||n==="F"||e.calculateLength2D()!==0;this.m_matrix[2]=s?1:0}if(this.m_performPredicates[5]){const n=Kb(e);this.m_matrix[5]=n?0:-1}if(this.m_performPredicates[6]){const n=this.m_scl[6],s=n==="T"||n==="F"||i.calculateLength2D()!==0;this.m_matrix[6]=s?1:0}if(this.m_performPredicates[7]){const n=Kb(i);this.m_matrix[7]=n?0:-1}}linePointDisjointPredicates_(e){if(this.m_matrix[0]=-1,this.m_matrix[3]=-1,this.m_performPredicates[2]){const i=this.m_scl[2],n=i==="T"||i==="F"||e.calculateLength2D()!==0;this.m_matrix[2]=n?1:0}if(this.m_performPredicates[5]){const i=Kb(e);this.m_matrix[5]=i?0:-1}this.m_matrix[6]=0}pointPointDisjointPredicates_(){this.m_matrix[0]=-1,this.m_matrix[2]=0,this.m_matrix[6]=0}areaAreaPredicates_(e,i,n){let s=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorArea_(e,i,n);const r=this.isPredicateKnown_(0);s&&(s=r)}if(this.m_performPredicates[1]){this.interiorAreaBoundaryArea_(e,i,1);const r=this.isPredicateKnown_(1);s&&(s=r)}if(this.m_performPredicates[2]){this.interiorAreaExteriorArea_(e,i,n,2);const r=this.isPredicateKnown_(2);s&&(s=r)}if(this.m_performPredicates[3]){this.interiorAreaBoundaryArea_(e,n,3);const r=this.isPredicateKnown_(3);s&&(s=r)}if(this.m_performPredicates[4]){this.boundaryAreaBoundaryArea_(e,i,n);const r=this.isPredicateKnown_(4);s&&(s=r)}if(this.m_performPredicates[5]){this.boundaryAreaExteriorArea_(e,i,n,5);const r=this.isPredicateKnown_(5);s&&(s=r)}if(this.m_performPredicates[6]){this.interiorAreaExteriorArea_(e,n,i,6);const r=this.isPredicateKnown_(6);s&&(s=r)}if(this.m_performPredicates[7]){this.boundaryAreaExteriorArea_(e,n,i,7);const r=this.isPredicateKnown_(7);s&&(s=r)}return s}areaLinePredicates_(e,i,n){let s=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorLine_(e,i,n);const r=this.isPredicateKnown_(0);s&&(s=r)}if(this.m_performPredicates[1]){this.interiorAreaBoundaryLine_(e,i,n,this.m_clusterIndexB);const r=this.isPredicateKnown_(1);s&&(s=r)}if(this.m_performPredicates[2]){this.interiorAreaExteriorLine_(e,i,n);const r=this.isPredicateKnown_(2);s&&(s=r)}if(this.m_performPredicates[3]){this.boundaryAreaInteriorLine_(e,i,n,this.m_clusterIndexB);const r=this.isPredicateKnown_(3);s&&(s=r)}if(this.m_performPredicates[4]){this.boundaryAreaBoundaryLine_(e,i,n,this.m_clusterIndexB);const r=this.isPredicateKnown_(4);s&&(s=r)}if(this.m_performPredicates[5]){this.boundaryAreaExteriorLine_(e,i,n);const r=this.isPredicateKnown_(5);s&&(s=r)}if(this.m_performPredicates[6]){this.exteriorAreaInteriorLine_(e,i);const r=this.isPredicateKnown_(6);s&&(s=r)}if(this.m_performPredicates[7]){this.exteriorAreaBoundaryLine_(e,i,n,this.m_clusterIndexB);const r=this.isPredicateKnown_(7);s&&(s=r)}return s}lineLinePredicates_(e,i,n){let s=!0;if(this.m_performPredicates[0]){this.interiorLineInteriorLine_(e,i,n,this.m_clusterIndexA,this.m_clusterIndexB);const r=this.isPredicateKnown_(0);s&&(s=r)}if(this.m_performPredicates[1]){this.interiorLineBoundaryLine_(e,i,n,this.m_clusterIndexA,this.m_clusterIndexB,1);const r=this.isPredicateKnown_(1);s&&(s=r)}if(this.m_performPredicates[2]){this.interiorLineExteriorLine_(e,i,n,2);const r=this.isPredicateKnown_(2);s&&(s=r)}if(this.m_performPredicates[3]){this.interiorLineBoundaryLine_(e,n,i,this.m_clusterIndexB,this.m_clusterIndexA,3);const r=this.isPredicateKnown_(3);s&&(s=r)}if(this.m_performPredicates[4]){this.boundaryLineBoundaryLine_(e,i,n,this.m_clusterIndexA,this.m_clusterIndexB);const r=this.isPredicateKnown_(4);s&&(s=r)}if(this.m_performPredicates[5]){this.boundaryLineExteriorLine_(e,i,n,this.m_clusterIndexA,5);const r=this.isPredicateKnown_(5);s&&(s=r)}if(this.m_performPredicates[6]){this.interiorLineExteriorLine_(e,n,i,6);const r=this.isPredicateKnown_(6);s&&(s=r)}if(this.m_performPredicates[7]){this.boundaryLineExteriorLine_(e,n,i,this.m_clusterIndexB,7);const r=this.isPredicateKnown_(7);s&&(s=r)}return s}areaPointPredicates_(e,i,n){let s=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorPoint_(e,i);const r=this.isPredicateKnown_(0);s&&(s=r)}if(this.m_performPredicates[2]){this.interiorAreaExteriorPoint_(e,i);const r=this.isPredicateKnown_(2);s&&(s=r)}if(this.m_performPredicates[3]){this.boundaryAreaInteriorPoint_(e,i,n);const r=this.isPredicateKnown_(3);s&&(s=r)}if(this.m_performPredicates[5]){this.boundaryAreaExteriorPoint_(e,i);const r=this.isPredicateKnown_(5);s&&(s=r)}if(this.m_performPredicates[6]){this.exteriorAreaInteriorPoint_(e,i);const r=this.isPredicateKnown_(6);s&&(s=r)}return s}linePointPredicates_(e,i,n){let s=!0;if(this.m_performPredicates[0]){this.interiorLineInteriorPoint_(e,i,n,this.m_clusterIndexA);const r=this.isPredicateKnown_(0);s&&(s=r)}if(this.m_performPredicates[2]){this.interiorLineExteriorPoint_(e,i,n,this.m_clusterIndexA);const r=this.isPredicateKnown_(2);s&&(s=r)}if(this.m_performPredicates[3]){this.boundaryLineInteriorPoint_(e,i,n,this.m_clusterIndexA);const r=this.isPredicateKnown_(3);s&&(s=r)}if(this.m_performPredicates[5]){this.boundaryLineExteriorPoint_(e,i,n,this.m_clusterIndexA);const r=this.isPredicateKnown_(5);s&&(s=r)}if(this.m_performPredicates[6]){this.exteriorLineInteriorPoint_(e,i,n);const r=this.isPredicateKnown_(6);s&&(s=r)}return s}pointPointPredicates_(e,i,n){let s=!0;if(this.m_performPredicates[0]){this.interiorPointInteriorPoint_(e,i,n);const r=this.isPredicateKnown_(0);s&&(s=r)}if(this.m_performPredicates[2]){this.interiorPointExteriorPoint_(e,i,n,2);const r=this.isPredicateKnown_(2);s&&(s=r)}if(this.m_performPredicates[6]){this.interiorPointExteriorPoint_(e,n,i,6);const r=this.isPredicateKnown_(6);s&&(s=r)}return s}interiorAreaInteriorArea_(e,i,n){if(this.m_matrix[0]===2)return;const s=this.m_topoGraph.getHalfEdgeFaceParentage(e);s&i&&s&n&&(this.m_matrix[0]=2)}interiorAreaBoundaryArea_(e,i,n){if(this.m_matrix[n]===1)return;const s=this.m_topoGraph.getHalfEdgeFaceParentage(e),r=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));s&i&&r&i&&(this.m_matrix[n]=1)}interiorAreaExteriorArea_(e,i,n,s){if(this.m_matrix[s]===2)return;const r=this.m_topoGraph.getHalfEdgeFaceParentage(e);r&i&&!(r&n)&&(this.m_matrix[s]=2)}boundaryAreaBoundaryArea_(e,i,n){if(this.m_matrix[4]===1)return;const s=this.m_topoGraph.getHalfEdgeParentage(e);if(s&i&&s&n)this.m_matrix[4]=1;else if(this.m_matrix[4]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(o&i&&o&n)return void(this.m_matrix[4]=0)}}boundaryAreaExteriorArea_(e,i,n,s){if(this.m_matrix[s]===1)return;const r=this.m_topoGraph.getHalfEdgeFaceParentage(e),o=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));r&n||o&n||(this.m_matrix[s]=1)}interiorAreaInteriorLine_(e,i,n){if(this.m_matrix[0]===1)return;const s=this.m_topoGraph.getHalfEdgeFaceParentage(e),r=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));s&i&&r&i&&(this.m_matrix[0]=1)}interiorAreaBoundaryLine_(e,i,n,s){if(this.m_matrix[1]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(!(o&i)&&this.m_topoGraph.getHalfEdgeFaceParentage(e)&i){const l=this.m_topoGraph.getClusterUserIndex(r,s);if(o&n&&l%2!=0)return void(this.m_matrix[1]=0)}}}interiorAreaExteriorLine_(e,i,n){this.m_matrix[2]!==2&&this.m_topoGraph.getHalfEdgeParentage(e)&i&&(this.m_matrix[2]=2)}boundaryAreaInteriorLine_(e,i,n,s){if(this.m_matrix[3]===1)return;const r=this.m_topoGraph.getHalfEdgeParentage(e);if(r&i&&r&n)this.m_matrix[3]=1;else if(this.m_matrix[3]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const o=this.m_topoGraph.getHalfEdgeTo(e),l=this.m_topoGraph.getClusterParentage(o);if(l&i){const c=this.m_topoGraph.getClusterUserIndex(o,s);if(l&n&&c%2==0)return void(this.m_matrix[3]=0)}}}boundaryAreaBoundaryLine_(e,i,n,s){if(this.m_matrix[4]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(o&i){const l=this.m_topoGraph.getClusterUserIndex(r,s);if(o&n&&l%2!=0)return void(this.m_matrix[4]=0)}}}boundaryAreaExteriorLine_(e,i,n){if(this.m_matrix[5]===1)return;const s=this.m_topoGraph.getHalfEdgeParentage(e);s&i&&!(s&n)&&(this.m_matrix[5]=1)}exteriorAreaInteriorLine_(e,i){if(this.m_matrix[6]===1)return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e),s=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));n&i||s&i||(this.m_matrix[6]=1)}exteriorAreaBoundaryLine_(e,i,n,s){if(this.m_matrix[7]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(!(o&i)&&!(this.m_topoGraph.getHalfEdgeFaceParentage(e)&i)){const l=this.m_topoGraph.getClusterUserIndex(r,s);if(o&n&&l%2!=0)return void(this.m_matrix[7]=0)}}}interiorLineInteriorLine_(e,i,n,s,r){if(this.m_matrix[0]===1)return;const o=this.m_topoGraph.getHalfEdgeParentage(e);if(o&i&&o&n)this.m_matrix[0]=1;else if(this.m_matrix[0]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const l=this.m_topoGraph.getHalfEdgeTo(e),c=this.m_topoGraph.getClusterParentage(l);if(c&i&&c&n){const f=this.m_topoGraph.getClusterUserIndex(l,s),y=this.m_topoGraph.getClusterUserIndex(l,r);if(f%2==0&&y%2==0)return void(this.m_matrix[0]=0)}}}interiorLineBoundaryLine_(e,i,n,s,r,o){if(this.m_matrix[o]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const l=this.m_topoGraph.getHalfEdgeTo(e),c=this.m_topoGraph.getClusterParentage(l);if(c&i&&c&n){const f=this.m_topoGraph.getClusterUserIndex(l,s),y=this.m_topoGraph.getClusterUserIndex(l,r);if(f%2==0&&y%2!=0)return void(this.m_matrix[o]=0)}}}interiorLineExteriorLine_(e,i,n,s){if(this.m_matrix[s]===1)return;const r=this.m_topoGraph.getHalfEdgeParentage(e);r&i&&!(r&n)&&(this.m_matrix[s]=1)}boundaryLineBoundaryLine_(e,i,n,s,r){if(this.m_matrix[4]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const o=this.m_topoGraph.getHalfEdgeTo(e),l=this.m_topoGraph.getClusterParentage(o);if(l&i&&l&n){const c=this.m_topoGraph.getClusterUserIndex(o,s),f=this.m_topoGraph.getClusterUserIndex(o,r);if(c%2!=0&&f%2!=0)return void(this.m_matrix[4]=0)}}}boundaryLineExteriorLine_(e,i,n,s,r){if(this.m_matrix[r]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const o=this.m_topoGraph.getHalfEdgeTo(e);if(!(this.m_topoGraph.getClusterParentage(o)&n)&&this.m_topoGraph.getClusterUserIndex(o,s)%2!=0)return void(this.m_matrix[r]=0)}}interiorAreaInteriorPoint_(e,i){if(this.m_matrix[0]!==0&&!(this.m_topoGraph.getClusterParentage(e)&i)){const n=this.m_topoGraph.getClusterChain(e);if(this.m_topoGraph.getChainParentage(n)&i)return void(this.m_matrix[0]=0)}}interiorAreaExteriorPoint_(e,i){this.m_matrix[2]!==2&&this.m_topoGraph.getClusterParentage(e)&i&&(this.m_matrix[2]=2)}boundaryAreaInteriorPoint_(e,i,n){if(this.m_matrix[3]===0)return;const s=this.m_topoGraph.getClusterParentage(e);s&i&&s&n&&(this.m_matrix[3]=0)}boundaryAreaExteriorPoint_(e,i){this.m_matrix[5]!==1&&this.m_topoGraph.getClusterParentage(e)&i&&(this.m_matrix[5]=1)}exteriorAreaInteriorPoint_(e,i){if(this.m_matrix[6]!==0&&!(this.m_topoGraph.getClusterParentage(e)&i)){const n=this.m_topoGraph.getClusterChain(e);if(!(this.m_topoGraph.getChainParentage(n)&i))return void(this.m_matrix[6]=0)}}interiorLineInteriorPoint_(e,i,n,s){if(this.m_matrix[0]===0)return;const r=this.m_topoGraph.getClusterParentage(e);if(r&i&&r&n&&this.m_topoGraph.getClusterUserIndex(e,s)%2==0)return void(this.m_matrix[0]=0)}interiorLineExteriorPoint_(e,i,n,s){if(this.m_matrix[2]!==1)if(this.m_topoGraph.getClusterHalfEdge(e)===-1){if(this.m_matrix[2]!==0&&!(this.m_topoGraph.getClusterParentage(e)&n))return void(this.m_matrix[2]=0)}else this.m_matrix[2]=1}boundaryLineInteriorPoint_(e,i,n,s){if(this.m_matrix[3]===0)return;const r=this.m_topoGraph.getClusterParentage(e);if(r&i&&r&n&&this.m_topoGraph.getClusterUserIndex(e,s)%2!=0)return void(this.m_matrix[3]=0)}boundaryLineExteriorPoint_(e,i,n,s){if(this.m_matrix[5]===0)return;const r=this.m_topoGraph.getClusterParentage(e);if(r&i&&!(r&n)&&this.m_topoGraph.getClusterUserIndex(e,s)%2!=0)return void(this.m_matrix[5]=0)}exteriorLineInteriorPoint_(e,i,n){if(this.m_matrix[6]===0)return;const s=this.m_topoGraph.getClusterParentage(e);s&i||!(s&n)||(this.m_matrix[6]=0)}interiorPointInteriorPoint_(e,i,n){if(this.m_matrix[0]===0)return;const s=this.m_topoGraph.getClusterParentage(e);s&i&&s&n&&(this.m_matrix[0]=0)}interiorPointExteriorPoint_(e,i,n,s){if(this.m_matrix[s]===0)return;const r=this.m_topoGraph.getClusterParentage(e);!(r&i)||r&n||(this.m_matrix[s]=0)}computeMatrixTopoGraphHalfEdges_(e,i){let n=!1;const s=this.m_topoGraph.getGeometryID(e),r=this.m_topoGraph.getGeometryID(i);this.m_visitedIndex=this.m_topoGraph.createUserIndexForHalfEdges();for(let o=this.m_topoGraph.getFirstCluster();o!==ae;o=this.m_topoGraph.getNextCluster(o)){const l=this.m_topoGraph.getClusterHalfEdge(o);if(l===ae){if(this.m_predicatesCluster!==null&&(n=this.m_predicatesCluster(o,s,r),n))break;continue}let c=l;do{let f=c;if(this.m_topoGraph.getHalfEdgeUserIndex(f,this.m_visitedIndex)!==1)do{if(n=this.m_predicatesHalfEdge(f,s,r),n)break;this.m_topoGraph.setHalfEdgeUserIndex(f,this.m_visitedIndex,1),f=this.m_topoGraph.getHalfEdgeNext(f)}while(f!==c&&!n);if(n)break;c=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(f))}while(c!==l);if(n)break}n||this.setRemainingPredicatesToFalse_(),this.m_topoGraph.deleteUserIndexForHalfEdges(this.m_visitedIndex)}computeMatrixTopoGraphClusters_(e,i){let n=!1;const s=this.m_topoGraph.getGeometryID(e),r=this.m_topoGraph.getGeometryID(i);for(let o=this.m_topoGraph.getFirstCluster();o!==ae&&(n=this.m_predicatesCluster(o,s,r),!n);o=this.m_topoGraph.getNextCluster(o));n||this.setRemainingPredicatesToFalse_()}setEditShape_(e,i){this.m_topoGraph.setEditShape(e,i)}setEditShapeCrackAndCluster_(e,i,n){let s=0;if(e.hasCurves()){const r=new Ru,o=e.getEnvelope2D(n),l=$u(i.total(),o);s=gf(l,0),Wh(e,l,i.total(),12e3,r,null,n),r.clearStitcher(e)}nf(e,i.add(s),n,!1,!1),e.filterClosePoints(0,!0,!0,!1,ae);for(let r=e.getFirstGeometry();r!==ae;r=e.getNextGeometry(r))e.getGeometryType(r)===me.enumPolygon&&m0(e,r,-1,!1,ae,n);this.setEditShape_(e,n)}}function Ant(t){const e=t[1],i=t[2],n=t[5];t[1]=t[3],t[2]=t[6],t[5]=t[7],t[3]=e,t[6]=i,t[7]=n}function bne(t,e,i){const n=t.getGeometryType();if(Ds(n)){const s=new vi({vd:t.getDescription()});return s.addSegment(t,!0),s}if(n===me.enumEnvelope){const s=t,r=xe.constructEmpty();if(t.queryEnvelope(r),r.height()<=e&&r.width()<=e){const l=new Ut({vd:t.getDescription()});return s.getCenter(l),l}if(r.height()<=e||r.width()<=e){const l=new vi({vd:t.getDescription()}),c=new Ut;return s.queryCornerByVal(0,c),l.startPathPoint(c),s.queryCornerByVal(2,c),l.lineToPoint(c),l}const o=new Wt({vd:t.getDescription()});return o.addEnvelope(s,!1),o}return t}function Z_(t){return`${t[0]}${t[3]}${t[6]}${t[1]}${t[4]}${t[7]}${t[2]}${t[5]}${t[8]}`}class uc{nullFunc(){return K(0),!1}constructor(e,i,n,s=!1){this.m_bDone=!1,this.m_tolerance=0,this.m_elementHandle=-1,this.m_query=xe.constructEmpty(),this.m_envInter=xe.constructEmpty(),this.m_quadTree=null,this.m_intersector=null,this.m_function=this.nullFunc;const r=e.getAccelerators();let o=null;r!=null&&(o=s?r.getQuadTreeForPaths():r.getQuadTree());const l=i.getAccelerators();let c=null;if(l!=null&&(c=s?l.getQuadTreeForPaths():l.getQuadTree()),o===null&&c===null&&!s){const f=e.getPointCount(),y=i.getPointCount();if(f>10&&y>10){const _=xe.constructEmpty(),x=xe.constructEmpty(),S=xe.constructEmpty();e.queryLooseEnvelope(_),i.queryLooseEnvelope(x),_.inflateCoords(n,n),x.inflateCoords(n,n),S.setCoords({env2D:_}),S.intersect(x),f>=y?o=bi(e.getGeometryType())?tx(e,S):nie(e,S):c=bi(i.getGeometryType())?tx(i,S):nie(i,S)}}this.construct_(e,o,i,c,n,s)}next(){if(this.m_bQuadTree){if(this.m_bDone)return!1;for(;this.m_function(););return!this.m_bDone}return!!this.m_intersector&&this.m_intersector.next()}getRedElement(){return this.m_bQuadTree?this.m_bSwapElements?this.m_quadTree.getElement(this.m_elementHandle):bi(this.m_queryType)?this.m_bPaths?this.m_pathIndex:this.m_segIter.getStartPointIndex():this.m_pointIndex:this.m_bSwapElements?this.m_intersector.getBlueElement(this.m_intersector.getHandleB()):this.m_intersector.getRedElement(this.m_intersector.getHandleA())}getBlueElement(){return this.m_bQuadTree?this.m_bSwapElements?bi(this.m_queryType)?this.m_bPaths?this.m_pathIndex:this.m_segIter.getStartPointIndex():this.m_pointIndex:this.m_quadTree.getElement(this.m_elementHandle):this.m_bSwapElements?this.m_intersector.getRedElement(this.m_intersector.getHandleA()):this.m_intersector.getBlueElement(this.m_intersector.getHandleB())}getRedEnvelope(){return this.m_bPaths||xs(""),this.m_bQuadTree?this.m_bSwapElements?this.m_quadTree.getElementExtent(this.m_elementHandle):this.m_query:this.m_bSwapElements?this.m_intersector.getBlueEnvelope(this.m_intersector.getHandleB()):this.m_intersector.getRedEnvelope(this.m_intersector.getHandleA())}getBlueEnvelope(){return this.m_bPaths||xs(""),this.m_bQuadTree?this.m_bSwapElements?this.m_query:this.m_quadTree.getElementExtent(this.m_elementHandle):this.m_bSwapElements?this.m_intersector.getRedEnvelope(this.m_intersector.getHandleA()):this.m_intersector.getBlueEnvelope(this.m_intersector.getHandleB())}construct_(e,i,n,s,r,o){const l=xe.constructEmpty(),c=xe.constructEmpty();e.queryLooseEnvelope(l),n.queryLooseEnvelope(c),l.inflateCoords(r,r),c.inflateCoords(r,r),this.m_envInter.setCoords({env2D:l}),this.m_envInter.intersect(c),this.m_multiVertexImplA=e,this.m_multiVertexImplB=n;const f=e.getGeometryType(),y=n.getGeometryType();this.m_bPaths=o,this.m_pathIndex=-1,this.m_pointIndex=-1,this.m_bSwapElements=!1,this.m_queryType=me.enumUnknown,this.m_bQuadTree=!1,i!==null&&(this.m_bDone=!1,this.m_tolerance=r,this.m_quadTree=i,this.m_qtIter=this.m_quadTree.getIteratorForQT(),this.m_bQuadTree=!0,this.m_bSwapElements=!0,bi(y)?(this.m_queryType=y,this.m_function=this.nextPath_,o?this.m_pathIndex=n.getPathCount():this.m_segIter=n.querySegmentIterator()):(this.m_queryType=y,this.m_function=this.nextPoint_,this.m_pointIndex=n.getPointCount())),this.m_bQuadTree||s!==null&&(this.m_bDone=!1,this.m_tolerance=r,this.m_quadTree=s,this.m_qtIter=this.m_quadTree.getIteratorForQT(),this.m_bQuadTree=!0,this.m_bSwapElements=!1,bi(f)?(this.m_queryType=f,this.m_function=this.nextPath_,o?this.m_pathIndex=e.getPathCount():this.m_segIter=e.querySegmentIterator()):(this.m_queryType=f,this.m_function=this.nextPoint_,this.m_pointIndex=e.getPointCount())),this.m_bQuadTree||(o&&bi(f)&&bi(y)?this.m_intersector=tet(e,n,r):bi(f)&&bi(y)?(this.m_intersector=eet(e,n,r),this.m_bSwapElements=!1):bi(f)&&!bi(y)?(this.m_intersector=iie(e,n,r),this.m_bSwapElements=!1):!bi(f)&&bi(y)?(this.m_intersector=iie(n,e,r),this.m_bSwapElements=!0):(this.m_intersector=iet(e,n,r),this.m_bSwapElements=!1))}nextPath_(){return this.m_bPaths?--this.m_pathIndex==-1?(this.m_bDone=!0,!1):(this.m_bSwapElements?this.m_multiVertexImplB.queryPathEnvelope(this.m_pathIndex,this.m_query):this.m_multiVertexImplA.queryPathEnvelope(this.m_pathIndex,this.m_query),this.m_qtIter.resetIterator(this.m_query,this.m_tolerance),this.m_function=this.iterate_,!0):this.m_segIter.nextPath()?(this.m_function=this.nextSegment_,!0):(this.m_bDone=!0,!1)}nextSegment_(){if(!this.m_segIter.hasNextSegment())return this.m_function=this.nextPath_,!0;const e=this.m_segIter.nextSegment(),i=new xe;return e.queryLooseEnvelope(i),!i.isIntersecting(this.m_envInter)||(this.m_qtIter.resetIterator(e,this.m_tolerance),this.m_function=this.iterate_,!0)}nextPoint_(){if(--this.m_pointIndex==-1)return this.m_bDone=!0,!1;const e=new Y;if(this.m_bSwapElements){const i=this.m_multiVertexImplB.getXY(this.m_pointIndex);e.setCoordsPoint2D(i)}else{const i=this.m_multiVertexImplA.getXY(this.m_pointIndex);e.setCoordsPoint2D(i)}return!this.m_envInter.contains(e)||(this.m_qtIter.resetIterator(xe.construct(e.x,e.y,e.x,e.y),this.m_tolerance),this.m_function=this.iterate_,!0)}iterate_(){return this.m_elementHandle=this.m_qtIter.next(),this.m_elementHandle===-1&&(bi(this.m_queryType)?(this.m_function=this.m_bPaths?this.nextPath_:this.nextSegment_,!0):(this.m_function=this.nextPoint_,!0))}}function lO(t){return t===2?1:t===1?2:t===128?64:t===64?128:t}function knt(t,e,i){let n;if(t instanceof ju||t===null){const s=xe.constructEmpty();s.setCoords({pt:e}),s.mergeEnvelope2D(i),n=n1(t,s,!1)}else n=t;return n}function $ye(t,e,i){let n;if(t instanceof ju||t===null){const s=xe.constructEmpty();s.setCoords({env2D:e}),s.mergeEnvelope2D(i),n=n1(t,s,!1)}else n=t;return n}function i0(t,e,i,n,s){if(t.isEmpty()||e.isEmpty())return n===4;sh(t),sh(e);let r=t.getGeometryType(),o=e.getGeometryType();if(r===me.enumEnvelope){if(o===me.enumEnvelope)return Dnt(t,e,i,n);if(o===me.enumPoint)return xne(e,t,i,lO(n))}else if(r===me.enumPoint){if(o===me.enumEnvelope)return xne(t,e,i,n);if(o===me.enumPoint)return Nnt(t,e,i,n)}const l=xe.constructEmpty();t.queryEnvelope(l);const c=xe.constructEmpty();e.queryEnvelope(c);const f=$ye(i,l,c);if(zf(l,c,f))return n===4;let y=!1,_=null,x=null,S=null,P=null;switch(Ds(r)?(_=new vi({vd:t.getDescription()}),_.addSegment(t,!0),S=_,r=me.enumPolyline):S=t,Ds(o)?(x=new vi({vd:e.getDescription()}),x.addSegment(e,!0),P=x,o=me.enumPolyline):P=e,r!==me.enumEnvelope&&o!==me.enumEnvelope?(S.getDimension()<P.getDimension()||r===me.enumPoint&&o===me.enumMultiPoint)&&(n=lO(n)):r!==me.enumPolygon&&o!==me.enumEnvelope&&(n=lO(n)),r){case me.enumPolygon:switch(o){case me.enumPolygon:y=Ont(S,P,f,n,s);break;case me.enumPolyline:y=wne(S,P,f,n,s);break;case me.enumPoint:y=Sne(S,P,f,n);break;case me.enumMultiPoint:y=Ene(S,P,f,n);break;case me.enumEnvelope:y=Cne(S,P,f,n,s)}break;case me.enumPolyline:switch(o){case me.enumPolygon:y=wne(P,S,f,n,s);break;case me.enumPolyline:y=$nt(S,P,f,n,s);break;case me.enumPoint:y=Pne(S,P,f,n);break;case me.enumMultiPoint:y=Tne(S,P,f,n);break;case me.enumEnvelope:y=Ine(S,P,f,n,s)}break;case me.enumPoint:switch(o){case me.enumPolygon:y=Sne(P,S,f,n);break;case me.enumPolyline:y=Pne(P,S,f,n);break;case me.enumMultiPoint:y=Mne(P,S,f,n)}break;case me.enumMultiPoint:switch(o){case me.enumPolygon:y=Ene(P,S,f,n);break;case me.enumPolyline:y=Tne(P,S,f,n);break;case me.enumMultiPoint:y=Rnt(S,P,f,n);break;case me.enumPoint:y=Mne(S,P,f,n);break;case me.enumEnvelope:y=Ane(S,P,f,n)}break;case me.enumEnvelope:switch(o){case me.enumPolygon:y=Cne(P,S,f,n,s);break;case me.enumPolyline:y=Ine(P,S,f,n,s);break;case me.enumMultiPoint:y=Ane(P,S,f,n)}}return y}function Dnt(t,e,i,n,s){if(t.isEmpty()||e.isEmpty())return n===4;const r=xe.constructEmpty();t.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o);const l=$ye(i,r,o);switch(n){case 4:return zf(r,o,l);case 2:return ET(o,r,l,!1);case 128:return ET(o,r,l,!0);case 1:return ET(r,o,l,!1);case 64:return ET(r,o,l,!0);case 3:return Tm(r,o,l);case 8:return Mst(r,o,l);case 32:return Ast(r,o,l);case 16:return!1}return!1}function xne(t,e,i,n,s){if(t.isEmpty()||e.isEmpty())return n===4;const r=t.getXY(),o=xe.constructEmpty();e.queryEnvelope(o);const l=knt(i,r,o);switch(n){case 4:return R7(r,o,l);case 2:case 128:return Ist(r,o,l);case 1:case 64:return!1;case 3:return Pst(r,o,l);case 8:return Tst(r,o,l)}return!1}function Nnt(t,e,i,n,s){if(t.isEmpty()||e.isEmpty())return n===4;const r=t.getXY(),o=e.getXY();let l;if(i instanceof ju||i===null){const c=xe.constructEmpty();c.setCoords({pt:r}),c.merge(o),l=n1(i,c,!1)}else l=i;switch(n){case 4:return Cst(r,o,l);case 2:case 128:return qne(o,r,l);case 1:case 64:return qne(r,o,l);case 3:return qye(r,o,l)}return!1}function zf(t,e,i){const n=xe.constructEmpty();return n.setCoords({env2D:e}),n.inflateCoords(i,i),!t.isIntersecting(n)}function nn(t,e,i,n=!1){const s=t.getGeometryType(),r=e.getGeometryType();if(rl(s)){const o=t.getImpl().getAccelerators();if(o!==null){const l=o.getRasterizedGeometry();K(l===null)}}if(rl(r)){const o=e.getImpl().getAccelerators();if(o!==null){const l=o.getRasterizedGeometry();K(l===null)}}return 0}function R7(t,e,i,n){const s=xe.constructEmpty();return s.setCoords({env2D:e}),s.inflateCoords(i,i),!s.contains(t)}function Ont(t,e,i,n,s){switch(n){case 4:return Lnt(t,e,i);case 2:return kne(e,t,i,s);case 128:return Dne(e,t,i);case 1:return kne(t,e,i,s);case 64:return Dne(t,e,i);case 3:return Rye(t,e,i,s);case 8:return Fnt(t,e,i);case 32:return znt(t,e,i,s)}return!1}function wne(t,e,i,n,s){switch(n){case 4:return qnt(t,e,i);case 1:return Gnt(t,e,i,s);case 64:return jnt(t,e,i);case 8:return Lye(t,e,i,s);case 16:return Vnt(t,e,i)}return!1}function Sne(t,e,i,n,s){switch(n){case 4:return Bnt(t,e,i);case 1:case 64:return Unt(t,e,i);case 8:return Hnt(t,e,i)}return!1}function Ene(t,e,i,n,s){switch(n){case 4:return Ynt(t,e,i);case 1:return Nne(t,e,i,!1);case 64:return Nne(t,e,i,!0);case 8:return Xnt(t,e,i);case 16:return Wnt(t,e,i)}return!1}function Cne(t,e,i,n,s){if(Knt(t,e,i))return n===4;if(n===4)return!1;switch(n){case 2:return One(t,e,i,!1);case 128:return One(t,e,i,!0);case 1:return $ne(t,e,i,!1,s);case 64:return $ne(t,e,i,!0,s);case 3:return Znt(t,e,i,s);case 8:return Jnt(t,e,i,s);case 32:return Qnt(t,e,i,s);case 16:return!1}return!1}function $nt(t,e,i,n,s){switch(n){case 4:return tst(t,e,i);case 2:return Rne(e,t,i,s);case 128:return Lne(e,t,i,s);case 1:return Rne(t,e,i,s);case 64:return Lne(t,e,i,s);case 3:return est(t,e,i,s);case 8:return ist(t,e,i,s);case 32:return sst(t,e,i,s);case 16:return nst(t,e,i,s)}return!1}function Pne(t,e,i,n,s){switch(n){case 4:return rst(t,e,i);case 1:case 64:return ast(t,e,i);case 8:return ost(t,e,i)}return!1}function Tne(t,e,i,n,s){switch(n){case 4:return lst(t,e,i);case 1:case 64:return hst(t,e,i);case 8:return cst(t,e,i);case 16:return ust(t,e,i)}return!1}function Ine(t,e,i,n,s){if(fst(t,e,i))return n===4;if(n===4)return!1;switch(n){case 2:return Fne(t,e,i,!1);case 128:return Fne(t,e,i,!0);case 1:case 64:case 32:return!1;case 3:return dst(t,e,i);case 8:return pst(t,e,i,s);case 16:return mst(t,e,i)}return!1}function Rnt(t,e,i,n,s){switch(n){case 4:return yst(t,e,i);case 2:case 128:return Nv(e,t,i);case 1:case 64:return Nv(t,e,i);case 3:return gst(t,e,i);case 32:return vst(t,e,i)}return!1}function Mne(t,e,i,n,s){switch(n){case 4:return zye(t,e,i);case 2:case 128:return _st(t,e,i);case 1:case 64:return bst(t,e,i);case 3:return Fye(t,e,i)}return!1}function Ane(t,e,i,n,s){switch(n){case 4:return wst(t,e,i);case 2:return zne(t,e,i,!1);case 128:return zne(t,e,i,!0);case 1:case 64:return!1;case 3:return xst(t,e,i);case 8:return Sst(t,e,i);case 16:return Est(t,e,i)}return!1}function Rye(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();if(t.queryEnvelope(s),e.queryEnvelope(r),!Tm(s,r,i))return!1;if(nn(t,e),Gye(t,e,i))return!0;const o=t.calculateLength2D(),l=e.calculateLength2D(),c=Math.max(t.getPointCount(),e.getPointCount());return Math.abs(o-l)>4*c*i?!1:t.hasNonLinearSegments()||e.hasNonLinearSegments()?rh(t,e,i,"**F**FFF*",n,!1):jye(t,e,i,!0)}function Lnt(t,e,i,n){return nn(t,e,i,!0),N5(t,e,i,!0)===1}function Fnt(t,e,i,n){return nn(t,e),Xye(t,e,i,null)}function znt(t,e,i,n){return nn(t,e),Wye(t,e,i,n)}function kne(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),!!wr(s,r,i)&&(nn(t,e),Zye(t,e,i,n))}function Dne(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),!!wr(s,r,i)&&(nn(t,e),N5(t,e,i,!1)===2)}function qnt(t,e,i,n){return nn(t,e,i,!0),N5(t,e,i,!0)===1}function Lye(t,e,i,n){return nn(t,e),Ost(t,e,i,n)}function Vnt(t,e,i,n){return nn(t,e),$st(t,e,i,null)}function Gnt(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),!!wr(s,r,i)&&(nn(t,e),Rst(t,e,i,n))}function jnt(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),!!wr(s,r,i)&&(nn(t,e),N5(t,e,i,!1)===2)}function Bnt(t,e,i,n){return Qye(t,e,i)===0}function Hnt(t,e,i,n){return Fst(t,e.getXY(),i)}function Unt(t,e,i,n){return Lst(t,e.getXY(),i)}function Ynt(t,e,i,n,s){return nn(t,e),kst(t,e,i)===1}function Xnt(t,e,i,n){nn(t,e);const s=xe.constructEmpty();t.queryEnvelope(s),s.inflateCoords(i,i);const r=new Y;let o=!1;const l=t.getImpl(),c=new Wt;let f=t,y=!1;for(let _=0;_<e.getPointCount();_++){if(e.queryXY(_,r),s.contains(r)){const x=Il(f,r,i);if(x===2)o=!0;else if(x===1)return!1}y||(!j0(t,e.getPointCount()-1)||l.getAccelerators()!==null&&l.getAccelerators().getQuadTree()!==null?f=t:(t.copyTo(c),c.getImpl().buildQuadTreeAccelerator(1),f=c),y=!0)}return!!o}function Wnt(t,e,i,n){nn(t,e);const s=new xe,r=new xe,o=new xe;t.queryEnvelope(s),e.queryEnvelope(o),r.setCoords({env2D:s}),r.inflateCoords(i,i);let l=!1,c=!1;const f=new Y,y=t.getImpl(),_=new Wt;let x=t,S=!1;for(let P=0;P<e.getPointCount();P++){if(e.queryXY(P,f),r.contains(f)){const A=Il(x,f,i);A===0?c=!0:A===1&&(l=!0)}else c=!0;if(l&&c)return!0;S||(!j0(t,e.getPointCount()-1)||y.getAccelerators()!==null&&y.getAccelerators().getQuadTree()!==null?x=t:(t.copyTo(_),_.getImpl().buildQuadTreeAccelerator(1),x=_),S=!0)}return!1}function Nne(t,e,i,n,s){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),!wr(r,o,i))return!1;nn(t,e);let l=!1;const c=new Y,f=t.getImpl(),y=new Wt;let _=t,x=!1;for(let S=0;S<e.getPointCount();S++){if(e.queryXY(S,c),!r.contains(c))return!1;const P=Il(_,c,i);if(P===1)l=!0;else if(P===0)return!1;if(n&&P===2)return!1;x||(!j0(t,e.getPointCount()-1)||f.getAccelerators()!==null&&f.getAccelerators().getQuadTree()!==null?_=t:(t.copyTo(y),y.getImpl().buildQuadTreeAccelerator(1),_=y),x=!0)}return l}function Znt(t,e,i,n){const s=new xe,r=new xe;if(t.queryEnvelope(s),e.queryEnvelope(r),!Tm(s,r,i))return!1;const o=new Wt;return o.addEnvelope(e,!1),Rye(t,o,i,n)}function Knt(t,e,i,n){nn(t,e);const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),wr(r,s,i)?!1:Il(t,r.getLowerLeft(),0)===0&&!r.contains(t.getXY(0))&&!Yye(t,r,i)}function Jnt(t,e,i,n){nn(t,e);const s=new xe,r=new xe;if(t.queryEnvelope(s),e.queryEnvelope(r),wr(r,s,i)||r.height()<=i||r.width()<=i)return!1;const o=new Wt;return o.addEnvelope(e,!1),Xye(t,o,i,n)}function Qnt(t,e,i,n){nn(t,e);const s=new xe,r=new xe;if(t.queryEnvelope(s),e.queryEnvelope(r),wr(r,s,i)||r.height()<=i||r.width()<=i)return!1;const o=new Wt;return o.addEnvelope(e,!1),Wye(t,o,i,n)}function One(t,e,i,n,s){const r=xe.constructEmpty(),o=xe.constructEmpty();return t.queryEnvelope(r),e.queryEnvelope(o),n?L7(o,r,i):wr(o,r,i)}function $ne(t,e,i,n,s){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),!wr(r,o,i))return!1;nn(t,e);const l=new Wt;return l.addEnvelope(e,!1),n?N5(t,l,i,!1)===2:Zye(t,l,i,s)}function est(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),Tm(s,r,i)?(nn(t,e),Gye(t,e,i)?!0:t.hasNonLinearSegments()||e.hasNonLinearSegments()?rh(t,e,i,"**F**FFF*",n,!1):jye(t,e,i,!1)):!1}function tst(t,e,i,n){nn(t,e);const s=t.getImpl(),r=e.getImpl();return!new uc(s,r,i,!0).next()||!Bye(t,e,i)}function ist(t,e,i,n){nn(t,e);const s=[],r=bB(t,e,i,s);if(r===-2){const f=xe.constructEmpty(),y=xe.constructEmpty(),_=xe.constructEmpty();let x,S;if(t.queryEnvelope(f),e.queryEnvelope(y),f.inflateCoords(1e3*i,1e3*i),y.inflateCoords(1e3*i,1e3*i),_.setCoords({env2D:f}),_.intersect(y),t.getPointCount()>10){if(x=bn(t,_,i,0,n),x.isEmpty())return!1}else x=t;if(e.getPointCount()>10){if(S=bn(e,_,i,0,n),S.isEmpty())return!1}else S=e;return rh(x,S,i,"F********",n,!1)}if(r!==0)return!1;const o=new Qs;for(let f=0;f<s.length;f+=2){const y=s[f],_=s[f+1];o.addXY(y,_)}const l=t.getBoundary(),c=e.getBoundary();return l.addPoints(c,0,c.getPointCount()),!l.isEmpty()&&Nv(l,o,i)}function nst(t,e,i,n){nn(t,e);const s=[],r=bB(t,e,i,s);if(r===-2){const f=xe.constructEmpty(),y=xe.constructEmpty(),_=xe.constructEmpty();let x,S;if(t.queryEnvelope(f),e.queryEnvelope(y),f.inflateCoords(1e3*i,1e3*i),y.inflateCoords(1e3*i,1e3*i),_.setCoords({env2D:f}),_.intersect(y),t.getPointCount()>10){if(x=bn(t,_,i,0,n),x.isEmpty())return!1}else x=t;if(e.getPointCount()>10){if(S=bn(e,_,i,0,n),S.isEmpty())return!1}else S=e;return rh(x,S,i,"0********",n,!1)}if(r!==0)return!1;const o=new Qs;for(let f=0;f<s.length;f+=2){const y=s[f],_=s[f+1];o.addXY(y,_)}const l=t.getBoundary(),c=e.getBoundary();return l.addPoints(c,0,c.getPointCount()),!!l.isEmpty()||!Nv(l,o,i)}function sst(t,e,i,n){nn(t,e);const s=xe.constructEmpty(),r=xe.constructEmpty();t.queryEnvelope(s),e.queryEnvelope(r);const o=vC(s,r,i),l=vC(r,s,i),c=t.hasNonLinearSegments(),f=e.hasNonLinearSegments(),y=bB(t,e,i,null);if(y===-1)return!1;if(y===1){if(o&&l)return!0;if(!c&&!f)return o&&!l?!jy(e,t,i,!1):l&&!o?!jy(t,e,i,!1):!jy(t,e,i,!1)&&!jy(e,t,i,!1)}const _=xe.constructEmpty(),x=xe.constructEmpty(),S=xe.constructEmpty();let P,A;_.setCoords({env2D:s}),_.inflateCoords(1e3*i,1e3*i),x.setCoords({env2D:r}),x.inflateCoords(1e3*i,1e3*i),S.setCoords({env2D:_}),S.intersect(x);let D="";if(D+="1*",o){if(e.getPointCount()>10){if(A=bn(e,S,i,0,n),A.isEmpty())return!1}else A=e;D+="****"}else A=e,D+="T***";if(l){if(t.getPointCount()>10){if(P=bn(t,S,i,0,n),P.isEmpty())return!1}else P=t;D+="***"}else P=t,D+="T**";return rh(P,A,i,D,n,!1)}function Rne(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),wr(s,r,i)?(nn(t,e),t.hasNonLinearSegments()||e.hasNonLinearSegments()?rh(t,e,i,"******FF*",n,!1):jy(e,t,i,!1)):!1}function Lne(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),wr(s,r,i)?(nn(t,e),rh(t,e,i,"T**FF*FF*",n,!1)):!1}function rst(t,e,i,n){return nn(t,e),!Uye(t,e.getXY(),i)}function ost(t,e,i,n){return nn(t,e),Jye(t,e.getXY(),i)}function ast(t,e,i,n){return nn(t,e),Nst(t,e.getXY(),i)}function lst(t,e,i,n){return nn(t,e),!Hye(t,e,i,!1)}function cst(t,e,i,n){nn(t,e);const s=t.getImpl(),r=e.getImpl(),o=new Qs,l=new uc(s,r,i,!1),c=s.querySegmentIterator();let f=!1;for(;l.next();){const _=l.getRedElement(),x=l.getBlueElement();c.resetToVertex(_,-1);const S=c.nextSegment(),P=r.getXY(x);S.isIntersectingPoint(P,i)&&(f=!0,o.addPoint2D(P))}if(!f)return!1;const y=t.getBoundary();return!y.isEmpty()&&Nv(y,o,i)}function ust(t,e,i,n){nn(t,e);const s=t.getImpl(),r=e.getImpl(),o=r.getPointCount(),l=ji(o,!1),c=new uc(s,r,i,!1),f=s.querySegmentIterator();let y=!1;for(;c.next();){const P=c.getRedElement(),A=c.getBlueElement();f.resetToVertex(P,-1);const D=f.nextSegment(),N=r.getXY(A);D.isIntersectingPoint(N,i)&&(y=!0,l[A]=!0)}if(!y)return!1;let _=!1;for(let P=0;P<o;P++)if(!l[P]){_=!0;break}if(!_)return!1;const x=t.getBoundary();if(x.isEmpty())return!0;const S=new Qs;for(let P=0;P<o;P++)l[P]&&S.addPoint2D(r.getXY(P));return!Nv(x,S,i)}function hst(t,e,i,n,s){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),!wr(r,o,i))return!1;nn(t,e);const l=Hye(t,e,i,!0);if(!l)return l;const c=t.getBoundary();return c.isEmpty()?l:!Nv(c,e,i)}function dst(t,e,i,n){const s=new xe,r=new xe;return t.queryEnvelope(s),e.queryEnvelope(r),!(r.height()>i&&r.width()>i)&&Tm(s,r,i)}function fst(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();t.queryEnvelope(s),e.queryEnvelope(r);const o=zst(r,s,i);return o===0?!Yye(t,r,i):o===4}function pst(t,e,i,n){const s=new xe,r=new xe;if(t.queryEnvelope(s),e.queryEnvelope(r),r.height()<=i||r.width()<=i)return!1;const o=new xe,l=new xe;if(o.setCoords({env2D:r}),l.setCoords({env2D:r}),o.inflateCoords(i,i),l.inflateCoords(-i,-i),l.containsEnvelope(s)||!s.isIntersecting(o))return!1;const c=t.getImpl().querySegmentIterator();c.stripAttributes();const f=t.getImpl().getAccelerators();let y=null,_=null;f!==null&&(y=f.getQuadTree(),y!==null&&(_=y.getIterator(r,i))),_||c.nextPath()||xt("relational_operations");let x=!1,S=null;const P=new Y,A=new Y,D=t.hasNonLinearSegments();let N=!1;for(;;){if(_!==null){const G=_.next();if(G===-1)break;c.resetToVertex(y.getElement(G),-1),S=c.nextSegment()}else{for(;!c.hasNextSegment()&&c.nextPath(););if(!c.hasNextSegment())break;S=c.nextSegment()}if(D&&S.getGeometryType()!==me.enumLine){const G=new xe;if(S.queryEnvelope(G),l.containsEnvelope(G))return!1;if(o.isIntersecting(G)){N=!0;break}}else{P.assign(S.getStartXY()),A.assign(S.getEndXY());let G=l.clipLine(P,A);if(G!==0)return!1;x||(G=o.clipLine(P,A),G!==0&&(x=!0))}}if(!N)return x;const F=new Wt;return F.addEnvelope(r,!1),Lye(F,t,i,n)}function Fne(t,e,i,n,s){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),o.height()<=i||o.width()<=i)return!1;if(n)return L7(o,r,i);if(!wr(o,r,i))return!1;const l=xe.constructEmpty();l.setCoords({env2D:o}),l.inflateCoords(-i,-i);const c=xe.constructEmpty();if(c.setCoords({env2D:o}),c.inflateCoords(i,i),l.containsEnvelope(r))return!0;const f=t.getImpl().querySegmentIterator();f.stripAttributes(),f.nextPath()||xt("relational_operations");let y,_,x,S,P,A,D=!1;const N=t.hasNonLinearSegments();for(N&&(x=new ni,S=new ni,P=new ni,A=new ni,l.querySide(0,x),l.querySide(1,S),l.querySide(2,P),l.querySide(3,A));;){for(;!f.hasNextSegment()&&f.nextPath(););if(!f.hasNextSegment())break;const F=f.nextSegment();if(N&&F.getGeometryType()!==me.enumLine){if(F.isIntersecting(x,i)){D=!0;break}if(F.isIntersecting(S,i)){D=!0;break}if(F.isIntersecting(P,i)){D=!0;break}if(F.isIntersecting(A,i)){D=!0;break}}else if(y=F.getStartXY(),_=F.getEndXY(),l.clipLine(y,_)!==0){D=!0;break}}return D}function mst(t,e,i,n){const s=new xe,r=new xe;if(t.queryEnvelope(s),e.queryEnvelope(r),r.height()<=i||r.width()<=i)return!1;const o=new xe;if(o.setCoords({env2D:r}),o.inflateCoords(i,i),o.containsEnvelope(s))return!1;const l=!0,c=new xe;if(c.setCoords({env2D:r}),c.inflateCoords(-i,-i),!c.isIntersecting(s))return!1;const f=t.getImpl().querySegmentIterator();f.stripAttributes();const y=t.getImpl().getAccelerators();let _=null,x=null;if(y!==null&&(_=y.getQuadTree(),_!==null&&(x=_.getIterator(r,i))),!x){const B=f.nextPath();K(B)}let S=!1,P=null;const A=new Y,D=new Y;let N=null,F=null,G=null,V=null;for(t.hasNonLinearSegments()&&(N=new ni,F=new ni,G=new ni,V=new ni,c.querySide(0,N),c.querySide(1,F),c.querySide(2,G),c.querySide(3,V));;){if(x!==null){const B=x.next();if(B===-1)break;f.resetToVertex(_.getElement(B),-1),P=f.nextSegment()}else{for(;!f.hasNextSegment()&&f.nextPath(););if(!f.hasNextSegment())break;P=f.nextSegment()}if(P.getGeometryType()===me.enumLine){if(A.assign(P.getStartXY()),D.assign(P.getEndXY()),c.clipLine(A,D)!==0){S=!0;break}}else{if(N.isIntersecting(P,i)){S=!0;break}if(F.isIntersecting(P,i)){S=!0;break}if(G.isIntersecting(P,i)){S=!0;break}if(V.isIntersecting(P,i)){S=!0;break}}}return S&&l}function gst(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),!!Tm(s,r,i)&&(!!Dst(t,e,i)||_B(t,e,i,!1,!0,!1))}function yst(t,e,i,n){const s=t,r=e,o=new uc(s,r,i,!1),l=i*i,c=new Y,f=new Y;for(;o.next();){const y=o.getRedElement(),_=o.getBlueElement();if(s.queryXY(y,c),r.queryXY(_,f),Y.sqrDistance(c,f)<=l)return!1}return!0}function vst(t,e,i,n){return _B(t,e,i,!1,!1,!0)}function Nv(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),!!wr(s,r,i)&&_B(e,t,i,!0,!1,!1)}function Fye(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(s),e.queryEnvelope(r),Tm(s,r,i)}function zye(t,e,i,n){return Kye(t,e.getXY(),i)}function _st(t,e,i,n){return Fye(t,e,i)}function bst(t,e,i,n){return!zye(t,e,i)}function xst(t,e,i,n){const s=new xe,r=new xe;return t.queryEnvelope(s),e.queryEnvelope(r),!(r.height()>i||r.width()>i)&&Tm(s,r,i)}function wst(t,e,i,n){const s=xe.constructEmpty(),r=xe.constructEmpty();if(t.queryEnvelope(s),e.queryEnvelope(r),wr(r,s,i))return!1;const o=xe.constructEmpty();o.setCoords({env2D:r}),o.inflateCoords(i,i);const l=new Y;for(let c=0;c<t.getPointCount();c++)if(t.queryXY(c,l),o.contains(l))return!1;return!0}function Sst(t,e,i,n){const s=new xe,r=new xe,o=new xe;if(e.queryEnvelope(s),s.height()<=i||s.width()<=i)return!1;r.setCoords({env2D:s}),o.setCoords({env2D:s}),r.inflateCoords(i,i),o.inflateCoords(-i,-i);const l=new Y;let c=!1;for(let f=0;f<t.getPointCount();f++)if(t.queryXY(f,l),r.contains(l)){if(o.containsExclusive(l))return!1;c=!0}return c}function zne(t,e,i,n,s){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),o.height()<=i||o.width()<=i)return!1;if(n)return L7(o,r,i);if(!wr(o,r,i))return!1;let l=!1;const c=xe.constructEmpty(),f=xe.constructEmpty();c.setCoords({env2D:o}),f.setCoords({env2D:o}),c.inflateCoords(-i,-i),f.inflateCoords(i,i);const y=new Y;for(let _=0;_<t.getPointCount();_++){if(t.queryXY(_,y),!f.contains(y))return!1;c.containsExclusive(y)&&(l=!0)}return l}function Est(t,e,i,n){const s=new xe,r=new xe;if(t.queryEnvelope(s),e.queryEnvelope(r),wr(r,s,i)||r.height()<=i||r.width()<=i)return!1;const o=new xe,l=new xe;o.setCoords({env2D:r}),o.inflateCoords(-i,-i),l.setCoords({env2D:r}),l.inflateCoords(i,i);const c=new Y;let f=!1,y=!1;for(let _=0;_<t.getPointCount();_++)if(t.queryXY(_,c),!f&&o.containsExclusive(c)&&(f=!0),y||l.contains(c)||(y=!0),f&&y)return!0;return!1}function qye(t,e,i,n){return Y.sqrDistance(t,e)<=i*i}function Cst(t,e,i,n){return Y.sqrDistance(t,e)>i*i}function qne(t,e,i,n){return qye(t,e,i)}function Pst(t,e,i,n){const s=new xe;return s.setCoords({pt:t}),Tm(s,e,i)}function Tst(t,e,i,n){if(e.height()<=i||e.width()<=i)return!1;const s=new xe,r=new xe;return s.setCoords({env2D:e}),s.inflateCoords(i,i),!!s.contains(t)&&(r.setCoords({env2D:e}),r.inflateCoords(-i,-i),!r.containsExclusive(t))}function Ist(t,e,i,n){if(e.height()<=i||e.width()<=i)return!1;const s=xe.constructEmpty();return s.setCoords({env2D:e}),s.inflateCoords(-i,-i),s.containsExclusive(t)}function Tm(t,e,i,n){return wr(t,e,i)&&wr(e,t,i)}function Mst(t,e,i,n){if(t.height()<=i||t.width()<=i||e.height()<=i||e.width()<=i)return!1;const s=new xe;return s.setCoords({env2D:t}),s.inflateCoords(-i,-i),s.intersect(e),!(!s.isEmpty()&&s.height()>i&&s.width()>i)&&(s.setCoords({env2D:t}),s.inflateCoords(i,i),s.intersect(e),!s.isEmpty())}function Ast(t,e,i,n){if(t.height()<=i||t.width()<=i||e.height()<=i||e.width()<=i||wr(t,e,i)||wr(e,t,i))return!1;const s=new xe;return s.setCoords({env2D:t}),s.inflateCoords(-i,-i),s.intersect(e),!s.isEmpty()&&(s.height()>i||s.width()>i)}function ET(t,e,i,n,s){if(t.height()<=i||t.width()<=i)return!1;if(n)return L7(t,e,i);if(!wr(t,e,i))return!1;const r=xe.constructEmpty();return r.setCoords({env2D:t}),r.inflateCoords(-i,-i),r.intersect(e),!r.isEmpty()}function N5(t,e,i,n,s){const r=new Y,o=new Y,l=xe.constructEmpty(),c=xe.constructEmpty(),f=t.getImpl(),y=e.getImpl(),_=y.getGeometryType(),x=new uc(f,y,i,!0);if(!x.next())return 1;if(Bye(t,e,i))return n?4:0;const S=new Wt;let P=t;const A=new Wt;let D=null;_===me.enumPolygon&&(D=e);const N=_===me.enumPolygon?ji(f.getPathCount(),!1):[],F=ji(y.getPathCount(),!1);let G=!1,V=!1,B=!1,W=!1,J=!1,re=!1;do{if(B&&J||W&&re||B&&W)break;const ne=x.getRedElement(),oe=x.getBlueElement();if(!F[oe]&&(o.assign(e.getXY(e.getPathStart(oe))),l.setCoords({env2D:x.getRedEnvelope()}),l.inflateCoords(i,i),l.contains(o))){if(Il(P,o,0)!==0){if(W=!0,n)return 4}else re=!0;F[oe]=!0}if(_===me.enumPolygon&&!N[ne]&&(r.assign(t.getXY(t.getPathStart(ne))),c.setCoords({env2D:x.getBlueEnvelope()}),c.inflateCoords(i,i),c.contains(r))){if(Il(D,r,0)!==0){if(B=!0,n)return 4}else J=!0;N[ne]=!0}if(G||(!j0(t,e.getPathCount()-1)||f.getAccelerators()!==null&&f.getAccelerators().getQuadTree()!==null?P=t:(t.copyTo(S),S.getImpl().buildQuadTreeAccelerator(1),P=S),G=!0),_===me.enumPolygon&&!V){const pe=e;!j0(pe,t.getPathCount()-1)||y.getAccelerators()!==null&&y.getAccelerators().getQuadTree()!==null?D=e:(pe.copyTo(A),A.getImpl().buildQuadTreeAccelerator(1),D=A),V=!0}}while(x.next());if(!B&&!W)return 1;if(!J||!re){if(_===me.enumPolygon){for(let ne=0,oe=f.getPathCount();ne<oe;ne++)if(!N[ne]){J=!0;break}}for(let ne=0,oe=y.getPathCount();ne<oe;ne++)if(!F[ne]){re=!0;break}}return B&&J||W&&re||B&&W?4:W?2:3}function kst(t,e,i,n,s){const r=xe.constructEmpty();t.queryEnvelope(r),r.inflateCoords(i,i);const o=new Y,l=t.getImpl(),c=new Wt;let f=t,y=!1,_=!1,x=!1;for(let S=0;S<e.getPointCount();S++){if(e.queryXY(S,o),r.contains(o)){const P=Il(f,o,i);if(P===1)return _=!0,4;if(P===2)return 4;x=!0}else x=!0;y||(!j0(t,e.getPointCount()-1)||l.getAccelerators()!==null&&l.getAccelerators().getQuadTree()!=null?f=t:(t.copyTo(c),c.getImpl().buildQuadTreeAccelerator(1),f=c),y=!0)}return _?x?4:2:1}function Vye(t,e,i,n,s){n[0]=!1;const r=t.getImpl(),o=e.getImpl(),l=r.querySegmentIterator(),c=o.querySegmentIterator(),f=[0,0],y=[0,0],_=new uc(r,o,i);let x=!1;for(;_.next();){const S=_.getRedElement(),P=_.getBlueElement();l.resetToVertex(S,-1),c.resetToVertex(P,-1);const A=l.nextSegment(),D=c.nextSegment();let N=0;if(Yx(A,D)?!x&&D.isIntersecting(A,i)&&(x=!0):N=D.intersect(A,null,y,f,i),N!==0&&(x=!0,N===1)){const F=f[0],G=y[0];if(F>0&&F<1&&G>0&&G<1)return n[0]=!0,!1}}if(!x){n[0]=!0;const S=xe.constructEmpty();t.queryEnvelope(S),S.inflateCoords(i,i);const P=new Wt;let A=t,D=!1;for(let W=0,J=e.getPathCount();W<J;W++)if(e.getPathSize(W)>0){const re=xe.constructEmpty();if(e.queryPathEnvelope(W,re),!S.isIntersecting(re))return!1;{const ne=gM(A,e.getXY(e.getPathStart(W)),0);if(K(ne!==-1),ne===0)return!1}D||(!j0(t,e.getPathCount()-1)||r.getAccelerators()!==null&&r.getAccelerators().getQuadTree()!==null?A=t:(t.copyTo(P),P.getImpl().buildQuadTreeAccelerator(1),A=P),D=!0)}if(t.getPathCount()===1||e.getGeometryType()===me.enumPolyline)return!0;const N=e,F=xe.constructEmpty();N.queryEnvelope(F),F.inflateCoords(i,i);const G=new Wt;let V=N,B=!1;for(let W=0,J=t.getPathCount();W<J;W++)if(t.getPathSize(W)>0){const re=xe.constructEmpty();if(t.queryPathEnvelope(W,re),F.isIntersecting(re)){const ne=gM(V,t.getXY(t.getPathStart(W)),0);if(K(ne!==-1),ne===1)return!1}B||(!j0(N,t.getPathCount()-1)||o.getAccelerators()!==null&&o.getAccelerators().getQuadTree()!==null?V=N:(N.copyTo(G),G.getImpl().buildQuadTreeAccelerator(1),V=G),B=!0)}return!0}return!1}function wr(t,e,i){const n=xe.constructEmpty();return n.setCoords({env2D:t}),n.inflateCoords(i,i),n.containsEnvelope(e)}function L7(t,e,i){const n=xe.constructEmpty();return n.setCoords({env2D:e}),n.inflateCoords(i,i),t.containsExclusiveEnvelope(n)}function vC(t,e,i){const n=xe.constructEmpty();return n.setCoords({env2D:e}),n.inflateCoords(i,i),!n.contains(t.getLowerLeft())||!n.contains(t.getLowerRight())||!n.contains(t.getUpperLeft())||!n.contains(t.getUpperRight())}function Gye(t,e,i,n){if(t.getPathCount()!==e.getPathCount()||t.getPointCount()!==e.getPointCount())return!1;if(t.hasNonLinearSegments()||e.hasNonLinearSegments())return t.equals(e);const s=new Y,r=new Y;let o=!0;const l=i*i;for(let c=0;c<t.getPathCount();c++){if(t.getPathEnd(c)!==e.getPathEnd(c)){o=!1;break}for(let f=t.getPathStart(c);f<e.getPathEnd(c);f++)if(t.queryXY(f,s),e.queryXY(f,r),Y.sqrDistance(s,r)>l){o=!1;break}if(!o)break}return!!o}function Dst(t,e,i,n){if(t.getPointCount()!==e.getPointCount())return!1;const s=new Y,r=new Y;let o=!0;const l=i*i;for(let c=0;c<t.getPointCount();c++)if(t.queryXY(c,s),e.queryXY(c,r),Y.sqrDistance(s,r)>l){o=!1;break}return!!o}function _B(t,e,i,n,s,r,o){const l=t.getImpl(),c=e.getImpl(),f=l.getPointCount(),y=c.getPointCount(),_=ji(f,!1),x=s||r?ji(y,!1):[],S=i*i,P=new uc(l,c,i);for(;P.next();){const G=P.getRedElement(),V=P.getBlueElement(),B=l.getXY(G),W=c.getXY(V);Y.sqrDistance(B,W)<=S&&(_[G]=!0,(s||r)&&(x[V]=!0))}let A=!1,D=!1;for(let G=0;G<f;G++){const V=_[G];if(A||(A=!V),D||(D=V),(s||n)&&A)return!1}if(n)return!0;let N=!1,F=!1;for(let G=0;G<y;G++){const V=x[G];if(N||(N=!V),F||(F=V),s&&N)return!1}return!!s||A&&D&&N&&F}function jye(t,e,i,n){return jy(t,e,i,n)&&jy(e,t,i,n)}function jy(t,e,i,n){if(ex(t),ex(e),e.isEmpty())return!1;let s=!0;const r=ji(2,Number.NaN),o=ji(2,Number.NaN),l=[],c=new Vst;let f;const y=xe.constructEmpty(),_=xe.constructEmpty(),x=xe.constructEmpty();t.queryEnvelope(y),e.queryEnvelope(_),y.inflateCoords(i,i),_.inflateCoords(i,i),x.setCoords({env2D:y}),x.intersect(_);const S=t.getImpl().querySegmentIterator(),P=e.getImpl().querySegmentIterator(),A=e.getImpl().getAccelerators();let D=null,N=null,F=null,G=null;if(A!==null&&(D=A.getQuadTree(),N=A.getQuadTreeForPaths(),N!==null&&(G=N.getIteratorForQT())),D===null){const V=t.getPointCount(),B=e.getPointCount();V>10&&B>10&&(D=tx(e.getImpl(),x))}for(D!==null&&(F=D.getIteratorForQT());S.nextPath();)for(;S.hasNextSegment();){let V=S.nextSegment();if(V.queryEnvelope(y),!y.isIntersecting(x))return s=!1,!1;if(G!==null&&(G.resetIterator(y,i),G.next()===-1))continue;let B=0,W=null;if(F!=null)F.resetIterator(V,i);else if(P.resetToFirstPath(),!P.nextPath())return s=!1,!1;do if(B=0,F!==null){const se=F.next();if(se===-1)return s=!1,!1;P.resetToVertex(D.getElement(se),-1),W=P.nextSegment(),B=V.intersect(W,null,r,o,i)}else{for(;!P.hasNextSegment();)if(!P.nextPath())return s=!1,!1;W=P.nextSegment(),W.queryEnvelope(_),_.inflateCoords(i,i),y.isIntersecting(_)&&(B=V.intersect(W,null,r,o,i))}while(B!==2||r[0]!==0||n&&!(o[0]<=o[1]));let J=Number.NaN,re=!1;do{let se=!1;if(r[1]===1){if(!S.hasNextSegment()){re=!0;break}V=S.nextSegment(),se=!0}if(o[1]===1&&o[0]<=o[1]){if(J===-1||(J=1,!P.hasNextSegment()))break;W=P.nextSegment(),se=!0}if(o[1]===0&&o[0]>o[1]){if(J===1)break;if(Number.isNaN(J)){if(!P.hasPreviousSegment())break;P.previousSegment(),J=-1}if(!P.hasPreviousSegment())break;W=P.previousSegment(),se=!0}if(!se)break;B=V.intersect(W,null,r,o,i)}while(B===2&&(!n||o[0]<=o[1]));if(re)continue;const ne=V.calculateLength2D();V.queryEnvelope(y),l.length=0,c.m_overlapEvents.length=0;let oe=!1,pe=!1,ce=0;const ue=n1(null,y,!0);for(F!==null?F.resetIterator(V,i):(P.resetToFirstPath(),P.nextPath()||xt("relational_operations"));;){if(B=0,F!==null){const se=F.next();if(se===-1)break;P.resetToVertex(D.getElement(se),-1),W=P.nextSegment(),B=V.intersect(W,null,r,o,i)}else{for(;!P.hasNextSegment()&&P.nextPath(););if(!P.hasNextSegment())break;W=P.nextSegment(),W.queryEnvelope(_),_.inflateCoords(i,i),y.isIntersecting(_)&&(B=V.intersect(W,null,r,o,i))}if(B===2&&(!n||o[0]<=o[1])){const se=S.getStartPointIndex(),de=S.getPathIndex(),Se=P.getStartPointIndex(),Pe=P.getPathIndex();if(f=qst(se,de,r[0],r[1],Se,Pe,o[0],o[1]),c.m_overlapEvents.push(f),l.push(l.length),!(oe||f.m_scalarA0<ce&&f.m_scalarA1<ce)){if(ce===0&&ne*(f.m_scalarA0-ce)>i)oe=!0;else if(ce!==0&&ne*(f.m_scalarA0-ce)>ue)oe=!0;else if(ce=f.m_scalarA1,ne*(1-ce)<=i||ce===1){pe=!0;break}}}}if(!pe){if(!oe)return s=!1,!1;l.length>1&&l.sort((se,de)=>c.compareOverlapEvents(se,de)),ce=0;for(let se=0;se<c.m_overlapEvents.length;se++)if(f=c.m_overlapEvents[l[se]],!(f.m_scalarA0<ce&&f.m_scalarA1<ce)){if(ce===0&&ne*(f.m_scalarA0-ce)>i||ce!==0&&ne*(f.m_scalarA0-ce)>ue)return s=!1,!1;if(ce=f.m_scalarA1,ne*(1-ce)<=i||ce===1)break}if(ne*(1-ce)>i)return s=!1,!1;l.length=0,c.m_overlapEvents.length=0}}return s}function Bye(t,e,i){const n=t.getImpl(),s=e.getImpl(),r=n.querySegmentIterator(),o=s.querySegmentIterator(),l=new uc(n,s,i);for(;l.next();){const c=l.getRedElement(),f=l.getBlueElement();r.resetToVertex(c,-1),o.resetToVertex(f,-1);const y=r.nextSegment();if(o.nextSegment().isIntersecting(y,i))return!0}return!1}function bB(t,e,i,n){const s=t.getImpl(),r=e.getImpl(),o=s.querySegmentIterator(),l=r.querySegmentIterator(),c=ji(2,Number.NaN),f=new uc(s,r,i);let y=!1,_=-1;for(;f.next();){const x=f.getRedElement(),S=f.getBlueElement();o.resetToVertex(x,-1),l.resetToVertex(S,-1);const P=o.nextSegment(),A=l.nextSegment();let D=0;if(Yx(P,A)){if(A.isIntersecting(P,i))return-2}else D=P.intersect(A,null,c,null,i);if(D){if(D===2){const N=P.calculateLength2D(),F=c[0];if(N*(c[1]-F)>i)return _=1,_;y=!0}else if(_=0,n){const N=c[0],F=new Y;P.queryCoord2D(N,F),n.push(F.x),n.push(F.y)}}}return y?-2:_}function Hye(t,e,i,n){const s=t.getImpl(),r=e,o=r.getPointCount(),l=n?ji(o,!1):[],c=new uc(s,r,i,!1),f=s.querySegmentIterator();for(;c.next();){const y=c.getRedElement(),_=c.getBlueElement();f.resetToVertex(y,-1);const x=f.nextSegment(),S=r.getXY(_);if(x.isIntersectingPoint(S,i)){if(!n)return!0;l[_]=!0}}if(!n)return!1;for(let y=0;y<o;y++)if(!l[y])return!1;return!0}function Uye(t,e,i){const n=new Y,s=i*i,r=t.querySegmentIterator(),o=t.getImpl().getAccelerators();if(o!==null){const c=o.getQuadTree();if(c!==null){const f=xe.constructEmpty();f.setCoords({pt:e});const y=c.getIterator(f,i);for(let _=y.next();_!==-1;_=y.next())if(r.resetToVertex(c.getElement(_),-1),r.hasNextSegment()){const x=r.nextSegment(),S=x.getClosestCoordinate(e,!1);if(x.queryCoord2D(S,n),Y.sqrDistance(e,n)<=s)return!0}return!1}}const l=xe.constructEmpty();for(;r.nextPath();)for(;r.hasNextSegment();){const c=r.nextSegment();if(c.queryEnvelope(l),l.inflateCoords(i,i),!l.contains(e))continue;const f=c.getClosestCoordinate(e,!1);if(c.queryCoord2D(f,n),Y.sqrDistance(e,n)<=s)return!0}return!1}function Nst(t,e,i){return Uye(t,e,i)&&!Jye(t,e,i)}function Yye(t,e,i,n){const s=t.querySegmentIterator(),r=t.getImpl().getAccelerators(),o=t.hasNonLinearSegments();let l=null,c=null,f=null,y=null;if(r!==null){const _=r.getQuadTree();if(_!==null){const x=_.getIterator(e,i);o&&(l=new ni,c=new ni,f=new ni,y=new ni,e.querySide(0,l),e.querySide(1,c),e.querySide(2,f),e.querySide(3,y));const S=xe.constructEmpty();S.setCoords({env2D:e}),S.inflateCoords(i,i);for(let P=x.next();P!==-1;P=x.next())if(s.resetToVertex(_.getElement(P),-1),s.hasNextSegment()){const A=s.nextSegment();if(A.getGeometryType()===me.enumLine){const D=A.getStartXY(),N=A.getEndXY();if(S.clipLine(D,N))return!0;continue}if(e.contains(A.getStartXY())||e.contains(A.getEndXY())||A.isIntersecting(l,i)||A.isIntersecting(c,i)||A.isIntersecting(f,i)||A.isIntersecting(y,i))return!0}return!1}}if(o){l=new ni,c=new ni,f=new ni,y=new ni,e.querySide(0,l),e.querySide(1,c),e.querySide(2,f),e.querySide(3,y);const _=t.querySegmentIterator();for(;_.nextPath();)for(;_.hasNextSegment();){const x=_.nextSegment();if(e.contains(x.getStartXY())||e.contains(x.getEndXY())||x.isIntersecting(l,i)||x.isIntersecting(c,i)||x.isIntersecting(f,i)||x.isIntersecting(y,i))return!0}}else{const _=xe.constructEmpty();_.setCoords({env2D:e}),_.inflateCoords(i,i);const x=t.getImpl(),S=x.getAttributeStreamRef(0),P=new Y;for(let A=0,D=x.getPathCount();A<D;A++){let N=!0;const F=new Y,G=new Y,V=new Y,B=x.getPathStart(A),W=new Y;for(let J=B,re=x.getPathEnd(A);J<re;J++)if(N)S.queryPoint2D(2*J,F),W.assign(F),N=!1;else{if(S.queryPoint2D(2*J,P),G.setCoordsPoint2D(F),V.setCoordsPoint2D(P),_.clipLine(G,V))return!0;F.assign(P)}if(x.isClosedPath(A)&&!N&&(G.setCoordsPoint2D(F),V.setCoordsPoint2D(W),_.clipLine(G,V)))return!0}}return!1}function Xye(t,e,i,n){const s=t.getImpl(),r=e.getImpl(),o=[0],l=Af(s.getIsSimple(0,o))&&Af(r.getIsSimple(0,o)),c=s.querySegmentIterator(),f=r.querySegmentIterator(),y=ji(2,0),_=ji(2,0),x=new uc(s,r,i);let S=!1;for(;x.next();){const G=x.getRedElement(),V=x.getBlueElement();c.resetToVertex(G,-1),f.resetToVertex(V,-1);const B=c.nextSegment(),W=f.nextSegment();let J=0;if(Yx(B,W)){if(W.isIntersecting(B,i)){S=!0;break}}else J=W.intersect(B,null,_,y,i);if(J===2){const re=y[0],ne=y[1],oe=B.calculateLength2D();if(l&&(ne-re)*oe>i)return!1;S=!0}else if(J){const re=y[0],ne=_[0];if(re>0&&re<1&&ne>0&&ne<1)return!1;S=!0}}if(!S)return!1;const P=xe.constructEmpty(),A=xe.constructEmpty(),D=xe.constructEmpty();let N,F;if(t.queryEnvelope(P),e.queryEnvelope(A),P.inflateCoords(1e3*i,1e3*i),A.inflateCoords(1e3*i,1e3*i),D.setCoords({env2D:P}),D.intersect(A),t.getPointCount()>10){if(N=bn(t,D,i,0,n),N.isEmpty())return!1}else N=t;if(e.getPointCount()>10){if(F=bn(e,D,i,0,n),F.isEmpty())return!1}else F=e;return rh(N,F,i,"F********",n,!1)}function Wye(t,e,i,n){const s=t.getImpl(),r=e.getImpl(),o=[0],l=Af(s.getIsSimple(0,o))&&Af(r.getIsSimple(0,o)),c=xe.constructEmpty(),f=xe.constructEmpty(),y=xe.constructEmpty();t.queryEnvelope(c),e.queryEnvelope(f);let _=!1;const x=vC(c,f,i),S=vC(f,c,i),P=s.querySegmentIterator(),A=r.querySegmentIterator(),D=ji(2,Number.NaN),N=ji(2,Number.NaN),F=new uc(s,r,i);for(;F.next();){const re=F.getRedElement(),ne=F.getBlueElement();P.resetToVertex(re,-1),A.resetToVertex(ne,-1);const oe=P.nextSegment(),pe=A.nextSegment();let ce=0;if(Yx(oe,pe)){if(pe.isIntersecting(oe,i))break}else ce=pe.intersect(oe,null,N,D,i);if(ce===2){const ue=D[0],se=D[1],de=oe.calculateLength2D();if(l&&(se-ue)*de>i&&(_=!0,x&&S))return!0}else if(ce){const ue=D[0],se=N[0];if(ue>0&&ue<1&&se>0&&se<1)return!0}}const G=xe.constructEmpty(),V=xe.constructEmpty();let B,W;G.setCoords({env2D:c}),G.inflateCoords(1e3*i,1e3*i),V.setCoords({env2D:f}),V.inflateCoords(1e3*i,1e3*i),y.setCoords({env2D:G}),y.intersect(V);let J="";if(J+=_?"**":"T*",x){if(e.getPointCount()>10){if(W=bn(e,y,i,0,n),W.isEmpty())return!1}else W=e;J+="****"}else W=e,J+="T***";if(S){if(t.getPointCount()>10){if(B=bn(t,y,i,0,n),B.isEmpty())return!1}else B=t;J+="***"}else B=t,J+="T**";return rh(B,W,i,J,n,!1)}function Zye(t,e,i,n){const s=[!1],r=Vye(t,e,i,s);if(s[0])return r;const o=xe.constructEmpty();let l;if(e.queryEnvelope(o),o.inflateCoords(1e3*i,1e3*i),t.getPointCount()>10){if(l=bn(t,o,i,0,n),l.isEmpty())return!1}else l=t;return pnt(l,e,i,n)}function Ost(t,e,i,n){const s=t.getImpl(),r=e.getImpl(),o=s.querySegmentIterator(),l=r.querySegmentIterator(),c=ji(2,Number.NaN),f=ji(2,Number.NaN),y=new uc(s,r,i);let _=!1;for(;y.next();){const N=y.getRedElement(),F=y.getBlueElement();o.resetToVertex(N,-1),l.resetToVertex(F,-1);const G=o.nextSegment(),V=l.nextSegment();let B=0;if(Yx(G,V)?!_&&V.isIntersecting(G,i)&&(_=!0):B=V.intersect(G,null,f,c,i),B===2)_=!0;else if(B){const W=c[0],J=f[0];if(W>0&&W<1&&J>0&&J<1)return!1;_=!0}}if(!_)return!1;const x=xe.constructEmpty(),S=xe.constructEmpty(),P=xe.constructEmpty();let A,D;if(t.queryEnvelope(x),e.queryEnvelope(S),x.inflateCoords(1e3*i,1e3*i),S.inflateCoords(1e3*i,1e3*i),P.setCoords({env2D:x}),P.intersect(S),t.getPointCount()>10){if(A=bn(t,P,i,0,n),A.isEmpty())return!1}else A=t;if(e.getPointCount()>10){if(D=bn(e,P,i,0,n),D.isEmpty())return!1}else D=e;return rh(A,D,i,"F********",n,!1)}function $st(t,e,i,n){const s=t.getImpl(),r=e.getImpl(),o=s.querySegmentIterator(),l=r.querySegmentIterator(),c=ji(2,Number.NaN),f=ji(2,Number.NaN),y=new uc(s,r,i);let _=!1;for(;y.next();){const N=y.getRedElement(),F=y.getBlueElement();o.resetToVertex(N,-1),l.resetToVertex(F,-1);const G=o.nextSegment(),V=l.nextSegment();let B=0;if(Yx(G,V)?!_&&V.isIntersecting(G,i)&&(_=!0):B=V.intersect(G,null,f,c,i),B===2)_=!0;else if(B){const W=c[0],J=f[0];if(W>0&&W<1&&J>0&&J<1)return!0;_=!0}}if(!_)return!1;const x=xe.constructEmpty(),S=xe.constructEmpty(),P=xe.constructEmpty(),A=xe.constructEmpty(),D=xe.constructEmpty();if(t.queryEnvelope(x),e.queryEnvelope(S),vC(S,x,i)){let N,F;if(P.setCoords({env2D:x}),P.inflateCoords(1e3*i,1e3*i),A.setCoords({env2D:S}),A.inflateCoords(1e3*i,1e3*i),D.setCoords({env2D:P}),D.intersect(A),t.getPointCount()>10){if(N=bn(t,D,i,0,n),N.isEmpty())return!1}else N=t;if(e.getPointCount()>10){if(F=bn(e,D,i,0,n),F.isEmpty())return!1}else F=e;return rh(N,F,i,"T********",n,!1)}return rh(t,e,i,"T*****T**",n,!1)}function Rst(t,e,i,n){const s=[!1],r=Vye(t,e,i,s);if(s[0])return r;const o=xe.constructEmpty();let l;if(e.queryEnvelope(o),o.inflateCoords(1e3*i,1e3*i),t.getPointCount()>10){if(l=bn(t,o,i,0,n),l.isEmpty())return!1}else l=t;return mnt(l,e,i,n)}function Lst(t,e,i,n){return Il(t,e,i)===1}function Fst(t,e,i,n){return Il(t,e,i)===2}function Kye(t,e,i,n){const s=new Y,r=i*i;for(let o=0;o<t.getPointCount();o++)if(t.queryXY(o,s),Y.sqrDistance(s,e)<=r)return!1;return!0}function Jye(t,e,i){const n=t.getBoundary();return!n.isEmpty()&&!Kye(n,e,i)}function zst(t,e,i){const n=xe.constructEmpty();return n.setCoords({env2D:t}),n.inflateCoords(i,i),n.containsEnvelope(e)?1073741824:n.isIntersecting(e)?t.isIntersecting(e)?t.xmin<e.xmin&&e.xmax<t.xmax?e.ymin<t.ymin&&e.ymax>t.ymax?0:1073741824:t.ymin<e.ymin&&e.ymax<t.ymax?e.xmin<t.xmin&&e.xmax>t.xmax?0:1073741824:0:0:4}function Yx(t,e){return t.getGeometryType()!==me.enumLine||e.getGeometryType()!==me.enumLine}function qst(t,e,i,n,s,r,o,l){return{m_ivertexA:t,m_ipathA:e,m_scalarA0:i,m_scalarA1:n,m_ivertexB:s,m_ipathB:r,m_scalarB0:o,m_scalarB1:l}}class Vst{constructor(){this.m_overlapEvents=[]}compareOverlapEvents(e,i){const n=this.m_overlapEvents[e],s=this.m_overlapEvents[i];return n.m_ipathA<s.m_ipathA||n.m_ipathA===s.m_ipathA&&(n.m_ivertexA<s.m_ivertexA||n.m_ivertexA===s.m_ivertexA&&(n.m_scalarA0<s.m_scalarA0||n.m_scalarA0===s.m_scalarA0&&(n.m_scalarA1<s.m_scalarA1||n.m_scalarA1===s.m_scalarA1&&n.m_ivertexB<s.m_ivertexB)))?-1:1}}function Qye(t,e,i){const n=lnt(t,e,i);return n?n===1?1:2:0}function Il(t,e,i){const n=gM(t,e,i);return n?n===1?1:2:0}function Gst(t,e,i,n,s){for(let r=0;r<i;r++)s[r]=Il(t,e[r],n)}function eve(t,e,i,n,s){if(t.getGeometryType()===me.enumPolygon)Gst(t,e,i,n,s);else if(t.getGeometryType()===me.enumEnvelope){const r=xe.constructEmpty();t.queryEnvelope(r),jst(r,e,i,n,s)}else xs("")}function tve(t,e,i,n,s){const r=t.getGeometryType();r===me.enumPolyline?Ust(t,e,i,n,s):Ds(r)?Hst():xs("")}function jst(t,e,i,n,s){if(t.isEmpty()){for(let l=0;l<i;l++)s[l]=0;return}const r=t.clone();r.inflateCoords(.5*-n,.5*-n);const o=t.clone();o.inflateCoords(.5*n,.5*n);for(let l=0;l<i;l++)r.contains(e[l])?s[l]=1:o.contains(e[l])?s[l]=2:s[l]=0}function Bst(t,e,i){if(i.reset(),e<3)return;const n=t[0].clone(),s=n.x,r=n.y,o=t[1].clone(),l=new Y;for(let c=2;c<e;c++)l.assign(t[c]),i.pe((l.x-n.x)*(o.y-r)),n.assign(o),o.assign(l);i.pe((s-n.x)*(o.y-r))}function Hst(t,e,i,n,s){K(0)}function Ust(t,e,i,n,s){const r=t.getImpl(),o=r.getAccelerators();let l=null;o&&(l=o.getRasterizedGeometry());let c=i;for(let f=0;f<i;f++)s[f]=1,l&&K(0);if(c){if(o){let y=null;o!==null&&o.getQuadTree()!==null&&(y=o.getQuadTree());const _=r.getPointCount();if(y===null&&_>20&&_*i>4*_+Math.log(_)*i&&(y=tx(r)),y){let x=null;const S=r.querySegmentIterator(),P=new xe;for(let A=0;A<i&&c;A++)if(s[A]===1){P.setCoords(e[A]),x===null?x=y.getIterator(P,n):x.resetIterator(P,n);let D=-1;for(let N=x.next();N!==-1;N=x.next()){if(S.resetToVertex(y.getElement(N),D),D=S.getPathIndex(),S.nextSegment().isIntersectingPoint(e[A],n)){s[A]=2,c--;break}s[A]=0}}return}}const f=r.querySegmentIterator();for(;f.nextPath()&&c;)for(;f.hasNextSegment()&&c;){const y=f.nextSegment();for(let _=0;_<i&&c;_++)s[_]===1&&y.isIntersectingPoint(e[_],n)&&(s[_]=2,c--)}}for(let f=0;f<i;f++)s[f]===1&&(s[f]=0)}function Yst(t,e,i,n,s){const r=mf(e),o=Math.max(4*r,i);return new vM(e,null,o,Number.NaN,s).approximateWithCirclesImpl(t,n)}function Xst(){return Number.isNaN(this.radius.value())}function Wst(){return{ptStart:new Y,ptEnd:new Y,center:new Ht,radius:new Be,fcenter:new _n,fradius2:new bt,maxError:Number.NaN,isLine:Xst}}const Zst=5,Kst=1/8;function E3(t,e,i,n){return{pt:t.clone(),t:e,err:i,checkCount:n}}class vM{constructor(e,i,n,s,r){this.m_left=e,this.m_tracker=r,this.m_eps=n,this.m_trackerCounter=0,this.m_tolerance=s,this.m_circleCheckCounter=0,this.m_bReversedLeft=!1,this.m_leftArc=Wst()}closeToCircularArc(e,i,n,s,r,o){if(this.m_circleCheckCounter++,o.maxError=0,!vM.checkSweepAngle(e,i))return!1;if(o.ptStart.setCoordsPoint2D(n),o.ptEnd.setCoordsPoint2D(r),e.isCircular()){const B=e;return o.fradius2=bt.constructDouble(B.getSemiMajorAxis()).mulDouble(B.getSemiMajorAxis()),o.radius.set(B.getSemiMajorAxis()),o.fcenter.assignPoint2D(B.getCenter()),o.center.set(B.getCenter()),!0}const l=o.ptEnd.sub(o.ptStart).clone();if(l.leftPerpendicularThis(),l.normalize(),Math.abs(l.dotProduct(s.sub(o.ptStart)))<=this.m_eps)return!!this.confirmIsLine(o,l)&&(o.radius.set(Number.NaN),o.center.setCoords(0,0),!0);{const B=o.ptEnd.sub(o.ptStart),W=s.sub(o.ptStart),J=B.crossProduct(W);if(J===0)return!1;const re=.5*B.sqrLength(),ne=.5*W.sqrLength();let oe=re*W.y-ne*B.y;oe/=J;let pe=B.x*ne-W.x*re;pe/=J;const ce=Math.sqrt(oe*oe+pe*pe);if(4*Number.EPSILON*ce>this.m_eps)return!1;const ue=oe+o.ptStart.x,se=pe+o.ptStart.y;o.radius.set(ce),o.center.setCoords(ue,se);const de=this.maxCircleApproximationError(e,i,o);if(de>this.m_eps)return o.maxError=de,!1}const c=new _n().assignPoint2D(o.ptStart),f=new _n().assignPoint2D(o.ptEnd).sub(c),y=new _n().assignPoint2D(s).sub(c),_=f.crossProduct(y);if(_.isZero())return!1;const x=f.sqrLength().mulDouble(.5),S=y.sqrLength().mulDouble(.5),P=x.mul(y.y).sub(S.mul(f.y)),A=f.x.mul(S).sub(y.x.mul(x)),D=P.mul(P).add(A.mul(A)),N=_.clone();N.invertThis(),o.fradius2=D.mul(N).mul(N),o.fcenter.setCoords(P.mul(N).add(c.x),A.mul(N).add(c.y)),o.center.setWithEps(o.fcenter.asPoint2D()),o.radius.setWithEps(Math.sqrt(o.fradius2.toDouble()));const F=Ht.constructPoint2D(o.ptStart).subE(o.center),G=Ht.constructPoint2D(o.ptEnd).subE(o.center);if(!F.dotProduct(G).gt(Bx))return!1;const V=this.maxCircleApproximationError(e,i,o);return o.maxError=V,V<=this.m_eps}static checkSweepAngle(e,i){if(e.getGeometryType()===me.enumEllipticArc){const n=e,s=sf(n,i.vmin),r=sf(n,i.vmax);return!(Math.abs(r-s)>.5*Cn)}return!0}confirmIsLine(e,i){return K(0),!1}maxCircleApproximationError(e,i,n){const s=[.25,.75],r=[.1,.25,.75,.9];let o,l;e.getGeometryType()===me.enumEllipticArc?(o=s,l=s.length):(o=r,l=r.length);let c=0;for(let f=0;f<l;++f){const y=new Y;e.queryCoord2D(Hi(i.vmin,i.vmax,o[f]),y);const _=y.sub(n.center.value()).length(),x=Math.abs(_-n.radius.value());x>c&&(c=x)}return c}approximateWithCirclesImpl(e,i){let n=1;i&&i.push(0);const s=ji(9,Number.NaN);let r;e?r=this.m_left.getMonotonicPartParams(s.length,s):(s[0]=0,s[1]=1,r=2);const o=[],l=[],c=new Y(0,0);for(let f=1;f<r;f++){const y=new Ze(s[f-1],s[f]);for(this.m_bReversedLeft=!vM.goodOrientation(this.m_left,y),this.m_bReversedLeft?(o.push(E3(c,y.vmin,0,0)),o.push(E3(c,y.vmax,0,0))):(o.push(E3(c,y.vmax,0,0)),o.push(E3(c,y.vmin,0,0))),o[0].pt=this.m_left.getCoord2D(o[0].t),o[1].pt=this.m_left.getCoord2D(o[1].t);o.length>1;){this.progress_();const _=o.at(-1);let x=_.checkCount,S=_.err;const P=_.pt.clone(),A=_.t,D=o[o.length-2].t,N=.5*(A+D),F=this.m_left.getCoord2D(N);if(S<=this.m_eps||x>=Zst){const G=new Ze;if(G.setCoords(A,D),this.closeToCircularArc(this.m_left,G,P,F,o[o.length-2].pt,this.m_leftArc)){i&&(this.m_bReversedLeft?l.push(A):i.push(D)),n++,o.pop();continue}x=0,S=this.m_leftArc.maxError}_.t=N,_.pt.setCoordsPoint2D(F),S*=Kst,x++,_.err=S,_.checkCount=x,o.push(E3(P,A,S,x))}this.m_bReversedLeft&&i&&(i.length=i.length+l.length,fs(i,l.reverse(),i.length-l.length,0,l.length),l.length=0),o.length=0}return n}approximateWithCirclesImplPolyline(e){return K(0),{}}static goodOrientation(e,i){const n=e.getCoord2D(i.vmin),s=e.getCoord2D(i.vmax);return n.compare(s)<0}progress_(e=!1){}}function Wh(t,e,i,n,s,r,o){Jst(t,e,i,s,r,o)}function Jst(t,e,i,n,s,r){t.hasCurves()?(t.setCurveStitcherPointer(n),n.m_impl=new n0(r,!1,null),n.m_impl.buildMonotonicCurveParentage(t,e,i,s)):n.m_impl=null}function Qst(t,e,i,n,s,r,o,l){t.hasCurves()?(t.setCurveStitcherPointer(r),r.m_impl=new n0(l,!0,s),r.m_impl.buildMonotonicCurveParentage(t,e,i,o),srt(t,i,l)):r.m_impl=null}function ert(t){if(!t.hasSegmentParentage())return;const e=new On(0),i=t.queryVertexIteratorOnSelection();for(let o=i.next();o!==ae;o=i.next())e.add(o);if(e.size()===0)return;t.sortVerticesSimpleByY(e,0,e.size()),e.add(ae);const n=Y.getNAN();t.queryXY(e.read(0),n);let s=0;const r=Y.getNAN();for(let o=1,l=e.size();o<l;o++){{const c=e.read(o);c!==ae?t.queryXY(c,r):r.setNAN()}if(!r.isEqualPoint2D(n)){let c=!1,f=-2;for(let y=s;y<o;++y){const _=e.read(y);if(t.getSegmentParentageBreakVertex(_)){c=!0;break}let x=t.getSegmentParentage(_);const S=t.getPrevVertex(_);if(S!==ae){let P=t.getSegmentParentage(S);if(x===-1&&(x=P),P===-1&&(P=x),x!==P){c=!0;break}}if(f!==-2&&x!==f){c=!0;break}f=x}if(c)for(let y=s;y<o;++y)t.setSegmentParentageBreakVertex(e.read(y),!0);n.setCoordsPoint2D(r),s=o}}}function trt(t,e){let i=e.isEmpty()?t:Js(null,e,!0).total();return i>t&&(i=t),.125*i}function $u(t,e){return e||(e=xe.constructEmpty()),trt(t,e)}function Up(t,e){return .125*t}function gf(t,e){return 3*t+3*e}class Ru{constructor(){this.m_impl=null}stitchCurves(e,i,n,s){this.m_impl&&(this.m_impl.stitchCurves(e,i,n),s&&this.clearStitcher(e))}clearStitcher(e){this.m_impl&&(this.m_impl.clearStitcher(e),this.m_impl=null)}getOriginalVertexIndex(e,i){return this.m_impl.getOriginalVertexIndex(e,i)}getOriginalSegmentTypeInfo(e){return this.m_impl.getOriginalSegmentTypeInfo(e)}}class n0{constructor(e,i,n){this.m_originalPlanarSegments=[],this.m_progressTracker=null,this.m_nsr=null,this.m_progressTracker=e,this.m_nsr=n,this.m_tolerance=0,this.m_originalVertexIndex=-1,this.m_type=0,this.m_progressCounter=0,this.m_bIsSimple=i}buildSegmentParentage(e,i,n,s,r){K(0)}static processCurves(e,i,n,s){return K(0),e}buildMonotonicCurveParentage(e,i,n,s){if(!e.hasCurves())return;K(!e.hasSegmentParentage()),this.m_type=1,this.m_originalPlanarSegments.length=0,this.m_bIsSimple&&(this.m_originalVertexIndex=e.createUserIndex()),this.m_tolerance=n;const l=new Ut,c=new Qt,f=[],y=[],_=[];for(let x=e.getFirstGeometry();x!==ae;x=e.getNextGeometry(x))for(let S=e.getFirstPath(x);S!==ae;S=e.getNextPath(S)){let P=e.getPathSize(S),A=e.getFirstVertex(S),D=0,N=-1;for(let F=0;F<P;F++){let G=e.getNextVertex(A);if(!e.querySegment(A,c,!0,!1)){A=G;continue}if(D===0){N=e.getVertexIndex(A);const ne=n0.regularizeCurve(e,c.get(),A,n);if(ne>=0){this.m_nsr&&this.m_nsr.m_reason===0&&this.m_nsr.assign(new Sn(13,N,-1)),D=ne,P=e.getPathSize(S),G=e.getNextVertex(A);const oe=e.querySegment(A,c,!0,!1);K(oe)}}else D--;const V=e.getVertexIndex(A);let B;this.m_originalVertexIndex!==-1&&e.setUserIndex(A,this.m_originalVertexIndex,N),e.setSegmentToIndex(V,null);let W=!1;switch(c.get().getGeometryType()){case me.enumEllipticArc:case me.enumRationalBezier2:B=dq(c.get(),i,n,!1,!0,y,_,f),W=!0;break;default:{const ne=!this.m_bIsSimple||!c.get().isMonotoneQuickAndDirty();B=Pye(c.get(),i,n,ne,!1,y,f)}}const J=this.m_originalPlanarSegments.length;if(e.setSegmentParentageAndBreak(A,J,!0),!y[1].isNAN()){let ne=null;ne=W?new wa({points:y,weights:_}):new Gc({cp:y}),ne.snapControlPoints(n*n),e.setSegmentToIndex(V,ne)}const re=W?2:3;for(let ne=1,oe=B,pe=re;ne<oe;++ne,pe+=re){c.get().queryCoord(f[ne],l);const ce=e.insertVertex(S,G,l);if(this.m_originalVertexIndex!==-1&&e.setUserIndex(ce,this.m_originalVertexIndex,N),!y[pe+1].isNAN())if(W){const ue=new wa({points:y.slice(pe),weights:_.slice(pe)});ue.snapControlPoints(n*n),e.setSegmentToIndex(e.getVertexIndex(ce),ue)}else{const ue=new Gc({cp:y.slice(pe)});ue.snapControlPoints(n*n),e.setSegmentToIndex(e.getVertexIndex(ce),ue)}e.setSegmentParentageAndBreak(ce,J,!1)}B>1&&(F+=B-1,P=e.getPathSize(S)),this.m_originalPlanarSegments.push(c.releaseSegment()),A=G}}}stitchCurves(e,i,n){n0.st_stitchCurvesImpl(this,e,i,n,!1)}clearStitcher(e){this.m_originalPlanarSegments.length=0,this.m_originalVertexIndex!==-1&&(e.removeUserIndex(this.m_originalVertexIndex),this.m_originalVertexIndex=-1),e.deleteSegmentParentage()}static st_verifyParentage(e){n0.st_stitchCurvesImpl(null,e,ae,0,!0)}getOriginalVertexIndex(e,i){return this.m_originalVertexIndex!==-1&&i!==ae?e.getUserIndex(i,this.m_originalVertexIndex):-1}getOriginalSegmentTypeInfo(e){if(e!==-1){const i=this.m_originalPlanarSegments[e];switch(i.getGeometryType()){case me.enumEllipticArc:return i.projectionBehavior()===0?0:1;case me.enumBezier:return 2;case me.enumBezier2:return 3;case me.enumLine:return-1;case me.enumRationalBezier2:return 4;default:Bn("")}}return-1}static st_curveRequiresRegularization(e,i){return K(0),!1}progress_(e=!1){this.m_progressCounter++}processSpan_(e,i,n,s,r,o,l){if(i===n&&s===0)return K(e.getNextVertex(i)===ae),e.setSegmentToIndex(e.getVertexIndex(i),null),void e.setSegmentParentageAndBreak(i,-1);const c=e.getNextVertex(i);{let _=2;for(let x=c;x!==n;x=e.getNextVertex(x))_++;K(_===s)}if(r===null){e.setSegmentToIndex(e.getVertexIndex(i),null);for(let _=c;_!==n;)_=e.removeVertex(_,!0);return}const f=e.getXY(i),y=e.getXY(n);if(r.isClosed()){if(f.isEqualPoint2D(y)&&f.isEqualPoint2D(r.getStartXY())){let _;if(_=this.verifySegmentFitness(e,i,n,s,r,o,l)){const x=r.clone();return x.dropAllAttributes(),_<0&&x.reverse(),this.removeSpan(e,i,n),void e.setSegmentToIndex(e.getVertexIndex(i),x)}}}else if(f.isEqualPoint2D(r.getStartXY())){if(y.isEqualPoint2D(r.getEndXY())){const _=r.clone();if(_.dropAllAttributes(),this.verifySegmentFitness(e,i,n,s,_,o,l))return this.removeSpan(e,i,n),void e.setSegmentToIndex(e.getVertexIndex(i),_)}}else if(y.isEqualPoint2D(r.getStartXY())&&f.isEqualPoint2D(r.getEndXY())){const _=r.getReversed();if(_.dropAllAttributes(),this.verifySegmentFitness(e,i,n,s,_,o,l))return this.removeSpan(e,i,n),void e.setSegmentToIndex(e.getVertexIndex(i),_)}this.processSpanSplitSegment(e,i,n,s,r,o,l)}processSpanSplitSegment(e,i,n,s,r,o,l){if(r.isLine()||this.fitSegmentToSpan(e,i,n,s,r,o,l))return;const c=l*l;let f=s,y=i;const _=e.getXY(i);let x=r.getClosestCoordinate(_,!1);const S=r.getCoord2D(x);let P=!1;const A=Y.sqrDistance(_,S);if(A>c){const J=e.getNextVertex(i);if(this.approximateSpanSection(e,i,r,o,l),J===n)return;y=J,P=!0,f-=1}let D=n;const N=e.getXY(n);x=r.getClosestCoordinate(N,!1);const F=r.getCoord2D(x);let G=!1;const V=Y.sqrDistance(N,F);if(V>c){const J=e.getPrevVertex(n);if(this.approximateSpanSection(e,J,r,o,l),J===y)return;D=J,G=!0,f-=1}if((P||G)&&this.fitSegmentToSpan(e,y,D,f,r,o,l))return;let B=!1;if(!P&&A>0){const J=e.getNextVertex(i);if(this.approximateSpanSection(e,i,r,o,l),J===D)return;y=J,P=!0,B=!0,f-=1}if(!G&&V>0){const J=e.getPrevVertex(n);if(this.approximateSpanSection(e,J,r,o,l),J===y)return;D=J,G=!0,B=!0,f-=1}if(B&&this.fitSegmentToSpan(e,y,D,f,r,o,l))return;let W=y;for(;;){const J=e.getNextVertex(W);if(this.approximateSpanSection(e,W,r,o,l),W=J,W===D)return}}fitSegmentToSpan(e,i,n,s,r,o,l){const c=this.m_type===0,f=[];if(f.push(e.getXY(i)),c){let x=i;const S=32;if(s>S){const P=BigInt(s-1),A=BigInt(S-1);let D=A,N=0n;for(let F=1;F<s;F++,D+=A)if(x=e.getNextVertex(x),D>=N+P){N+=P;const G=e.getXY(x);f.push(G)}K(x===n)}else{for(let P=1;P<s;P++){x=e.getNextVertex(x);const A=e.getXY(x);f.push(A)}K(x===n)}}else{let x=i;const S=new Qt;for(;;){e.querySegment(x,S,!1,!0);const P=[.1,.25,.4,.5,.6,.75,.9,1];let A=0;for(const D of P)(s===2||1&A)&&f.push(S.get().getCoord2D(D)),A++;if(x=e.getNextVertex(x),x===n)break}}const y=(()=>{let x=f[0].compare(f.at(-1));if(x===0){const S=new Br(0);Bst(f,f.length,S),x=S.getResult()>=0?-1:1}return x>0})();y&&f.reverse();const _=r.clone();if(_.dropAllAttributes(),_.setSegmentFromCoords(f,f.length),y&&_.reverse(),_.snapControlPoints(this.m_tolerance*this.m_tolerance),this.verifySegmentFitness(e,i,n,s,_,o,l)){this.removeSpan(e,i,n);const x=e.getVertexIndex(i);return e.setSegmentToIndex(x,_),!0}return!1}approximateSpanSection(e,i,n,s,r){const o=new Qt;if(!e.querySegment(i,o,!0,!1))return;const l=n.getGeometryType();if(l!==o.get().getGeometryType()){if(l===me.enumEllipticArc){if(o.get().getGeometryType()!==me.enumRationalBezier2)return;if(n.projectionBehavior()===0){const c=[];Yst(!1,o.get(),r,c,this.m_progressTracker);const f=e.getNextVertex(i),y=e.getPathFromVertex(i),_=new Ut;let x=i;for(let S=1,P=c.length;S<P;S++){const A=c[S],D=o.get().getCoord2D(c[S-1]),N=o.get().getCoord2D(Hi(c[S-1],A,.5));o.get().queryCoord(A,_);const F=_.getXY(),G=new Xc;G.constructCircularArcThreePoint(D,F,N);let V=ae;A<1&&(V=e.insertVertex(y,f,_)),e.setSegmentToIndex(e.getVertexIndex(x),G),x=V}return}{const c=Ge(Y,3);o.get().queryControlPoints(c);const f=[0,0,0];o.get().queryWeights(f);const y=md(f),_=new Xc;return Lat(c,y*y,null,!1,_),void e.setSegmentToIndex(e.getVertexIndex(i),_)}}xt("approximate_span_section_")}}verifySegmentFitness(e,i,n,s,r,o,l){return this.m_type===0?this.verifySegmentFitnessLines(e,i,n,s,r,o,l):this.verifySegmentFitnessCurves(e,i,n,s,r,o,l)}verifySegmentFitnessCurves(e,i,n,s,r,o,l){const c=e.getXY(i),f=e.getXY(n);if(!c.isEqualPoint2D(r.getStartXY())||!f.isEqualPoint2D(r.getEndXY()))return 0;let y=0;if(r.isClosed()){const F=r.getCoord2D(.1).sub(c);y=r.getCoord2D(.7).sub(c).crossProduct(F)>=0?1:-1}const _=new Array(k5.s_maxMonotonicPartParams);let x=r.getMonotonicPartParams(_.length,_);x--;const S=new ni,P=[1,.5,.75,.25];let A=0,D=i;const N=c.clone();for(;;){const F=e.getNextVertex(D);let G=e.getSegment(D);G===null&&(e.queryLineConnector(D,S,!0),G=S);for(let V=F===n?1:0;V<P.length;V++){const B=G.getCoord2D(P[V]);if(!r.isCloserThanDistance(B,Ze.unit(),l))return 0}if(x>1)for(let V=1;V<x;){const B=r.getCoord2D(_[V]);G.isCloserThanDistance(B,Ze.unit(),l)?(_[x-1]=Et(_[V],_[V]=_[x-1]),x--):V++}if(y){const V=G.getCoord2D(.25);A+=V.sub(c).crossProduct(N.sub(c)),N.assign(V),V.assign(G.getCoord2D(.75)),A+=V.sub(c).crossProduct(N.sub(c)),N.assign(V)}if(D=F,D===n)return x>1?0:y?A<0?-y:y:1}}verifySegmentFitnessLines(e,i,n,s,r,o,l){return K(0),0}removeSpan(e,i,n){e.setSegmentToIndex(e.getVertexIndex(i),null);const s=e.getNextVertex(i);s!==n&&e.removeVertices(s,n)}static st_stitchCurvesImpl(e,i,n,s,r){if(i.hasSegmentParentage())return i.hasCurves()?n0.st_stitchCurvesFromCurvesImpl(e,i,n,s,r):n0.st_stitchCurvesFromLinesImpl(e,i,n,s,r)}static st_stitchCurvesFromLinesImpl(e,i,n,s,r){let o=n===ae?i.getFirstGeometry():n;for(;o!==ae;){for(let l=i.getFirstPath(o);l!==ae;l=i.getNextPath(l)){let c=i.getPathSize(l);i.isClosedPath(l)&&(c+=1);let f=!0,y=!1;const _=i.getFirstVertex(l);let x=_;for(let S=0;S<c&&x!==ae;){let P=i.getSegmentParentage(x);if(P===-1||f){f=!1,S++,x=i.getNextVertex(x),y=!0;continue}let A,D,N=0;if(y?(A=i.getPrevVertex(x),D=x,K(A!==ae),K(D!==A),K(i.getSegmentParentage(A)===-1||_===A)):(A=x,D=i.getNextVertex(A),S++,K(D!==ae),K(D!==A),P=i.getSegmentParentage(D)),N=2,y=!1,P===-1||i.getSegmentParentageBreakVertex(D)){x=D;continue}let F=i.getNextVertex(D);for(S++;S<c&&F!==ae;){D=F,N++;const G=i.getSegmentParentage(F);if(G===-1||i.getSegmentParentageBreakVertex(F))break;K(G===P),S++,F=i.getNextVertex(F)}if(!r){const G=e.m_originalPlanarSegments[P];e.processSpan_(i,A,D,N,G,P,s)}x=D}}if(n!==ae)break;o=i.getNextGeometry(o)}}static st_stitchCurvesFromCurvesImpl(e,i,n,s,r){let o=n===ae?i.getFirstGeometry():n;for(;o!==ae;)if(p1e(i.getGeometryType(o))){for(let l=i.getFirstPath(o);l!==ae;l=i.getNextPath(l)){let c=i.getPathSize(l);const f=i.isClosedPath(l);f&&(c+=1);let y=i.getFirstVertex(l);if(f){if(i.getSegmentParentage(y)!==-1){let x=y;for(let S=0;!i.getSegmentParentageBreakVertex(x);S++){if(S===c){y=i.getFirstVertex(l),i.setSegmentParentageBreakVertex(x,!0);break}x=i.getPrevVertex(x)}}}else K(i.getSegmentParentage(y)===-1||i.getSegmentParentageBreakVertex(y));let _=y;for(let x=0;x<c&&_!==ae;){const S=i.getSegmentParentage(_);if(S===-1){x++,_=i.getNextVertex(_);continue}let P=0,A=ae;const D=_;P=1;let N=i.getNextVertex(D);for(;x<c&&N!==ae;){x++,A=N,P++;const F=i.getSegmentParentage(N);if(F===-1||i.getSegmentParentageBreakVertex(N))break;K(F===S),N=i.getNextVertex(N)}if(A===ae)break;if(!r){const F=e.m_originalPlanarSegments[S];e.processSpan_(i,D,A,P,F,S,s)}_=A}}if(n!==ae)break;o=i.getNextGeometry(o)}else o=n===ae?i.getNextGeometry(o):ae}static regularizeCurve(e,i,n,s){let r=i.snapControlPoints(s*s);if(r){const o=e.getVertexIndex(n),l=i.clone();e.setSegmentToIndex(o,l)}if(i.getGeometryType()===Gc.type){const o=[],l=i.calculateSpecialPointsForCracking(s,o);if(l>0){e.splitSegment(n,o,l),r=e.snapControlPoints(n,l+1,s*s)||r;for(let c=0;c<l;c++)n=e.getNextVertex(n),e.setSegmentParentageBreakVertex(n,!0);return l}}return r?0:-1}}function nf(t,e,i,n,s){return new F7(t,i,e,n,s).do_()}function irt(t,e,i){const n=Wc(t);return vB(e.getX(),e.getY(),i.getX(),i.getY(),Xi(n))}function nrt(t,e,i=1,n=1,s=1,r=1){if(n>r)return t;if(r>n)return e;const o=[0],l=[0],c=new Ut;return Uit(t,e,i,n,s,r,c,l,o),c}function srt(t,e,i){return F7.fixCurveTwoPointLoops(t,e,i)}function ive(t){return Wc(t)}class F7{constructor(e,i,n,s,r){this.m_shape=e,this.m_progressTracker=i,this.m_tolerance=n,this.m_bFilterDegenerateSegments=s,this.m_bTrackChanges=r,this.m_progressCounter=0}do_(){const e=new ta(this.m_tolerance.tolerance,this.m_tolerance.resolution),i=1e-5,n=1e-6,s=ive(e);let r=M1e(e);const o=r*(1+i);r*=1+n;let l=!1;const c=this.m_shape.getTotalPointCount()+10>30?1e3:(this.m_shape.getTotalPointCount()+10)*(this.m_shape.getTotalPointCount()+10),f=this.m_shape.hasPointFeatures();for(let y=0;;y++){this.m_shape.dbgCheckSelection(),y>c&&xt("crack_and_cluster_iteration_exceeded"),this.m_shape.dbgVerifyMonotone();let _=-1;y===0&&(_=this.firstCrack_(),l||(l=_>0));const x=this.cluster_(s);if(this.m_shape.dbgVerifyMonotone(),l||(l=x),this.m_bFilterDegenerateSegments){const A=this.m_shape.filterClosePoints(s,!0,!1,this.m_bTrackChanges,ae)!==0;l||(l=A),this.m_shape.dbgVerifyMonotone()}const S=this.m_shape.snapControlPointsOnSelection(o*o);l||(l=S),this.m_shape.dbgCheckSelection();let P=!1;if((y===0&&_===-1||f||Nye(!0,this.m_shape,r,null,this.m_progressTracker))&&(P=this.crack_(o),l||(l=P),this.m_shape.dbgVerifyMonotone()),!P&&!F7.fixCurveTwoPointLoops(this.m_shape,s,this.m_progressTracker)){this.m_shape.dbgVerifyMonotone();break}}return l&&ert(this.m_shape),l}cluster_(e){return Mye(this.m_shape,e,ae,this.m_bTrackChanges,this.m_progressTracker)}crack_(e){return nnt(this.m_shape,e,this.m_bTrackChanges,this.m_progressTracker)}static fixCurveTwoPointLoops(e,i,n){if(!e.hasCurves())return!1;e.dbgVerifyCurves();const s=e.createUserIndexUninitialized(),r=new On(0),o=e.queryVertexIteratorOnSelection();for(let _=o.next();_!==ae;_=o.next())r.add(_),e.setUserIndex(_,s,-1);if(r.size()===0)return!1;r.add(ae),e.sortVerticesSimpleByY(r,0,r.size()-1);let l=0;const c=e.getXY(r.read(l)),f=new Y(Number.NaN,Number.NaN),y=[];for(let _=1,x=r.size();_<x;++_){const S=r.read(_),P=S!==ae?e.getXY(S):f;if(P.equals(c))continue;const A=[];for(let D=l;D<_;D++){const N=r.read(D),F=e.getPrevVertex(N);if(F!==ae&&e.getUserIndex(F,s)===-1){const V=cO(e.getXY(F),e.getSegment(F));Y.sqrDistance(c,V.otherPt)!==0&&(V.vert=F,V.dir=-1,A.push(V)),e.setUserIndex(F,s,1)}const G=e.getNextVertex(N);if(G!==ae&&e.getUserIndex(N,s)===-1){const V=cO(e.getXY(G),e.getSegment(N));Y.sqrDistance(c,V.otherPt)!==0&&(V.vert=N,V.dir=1,A.push(V)),e.setUserIndex(N,s,1)}}if(A.length>1){A.sort((F,G)=>art(F,G));const D=cO(f.clone(),null);A.push(D);let N=0;for(let F=1,G=A.length;F<G;F++)if(!A[F].otherPt.equals(A[F-1].otherPt)){if(F-N>1&&A[N].seg!==null){let V=!1;const B=N;for(let W=N+1;W<F;W++)if(!rrt(A[B],A[W])){V=!0;break}if(V)for(let W=N;W<F&&A[W].seg!==null;W++)y.push(A[W].vert)}N=F}}l=_,c.setCoordsPoint2D(P)}for(const _ of y){const x=e.getSegment(_);K(x!==null);const S=e.getXY(_),P=e.getXY(e.getNextVertex(_));if(Y.distance(S,P)<3*i)e.setSegmentToIndex(e.getVertexIndex(_),null);else{const A=x.lengthToT(.5*x.calculateLength2D());e.splitSegment(_,[A],1)}}return e.removeUserIndex(s),y.length>0}firstCrack_(){const e=Js(null,this.m_shape.getEnvelope2D(this.m_progressTracker),!0).total();if(4*e<this.m_tolerance.total()){let i=!1;const n=1.1*e,s=e,r=this.cluster_(n);i||(i=r);let o=0;this.m_bFilterDegenerateSegments&&(o=this.m_shape.filterClosePoints(0,!0,!1,this.m_bTrackChanges,ae));const l=this.crack_(s);return i||(i=l),i?1:o?2:0}return-1}progress_(e=!1){this.m_progressCounter++,!e&&4095&this.m_progressCounter||(this.m_progressCounter=0)}}function cO(t,e){return{otherPt:t,seg:e,vert:-1,dir:0}}function rrt(t,e){if(K(t.otherPt.equals(e.otherPt)),t.seg===null)return e.seg===null;if(e.seg===null)return!1;const i=t.seg.getGeometryType();if(i!==e.seg.getGeometryType())return!1;if(i===me.enumBezier){const n=t.seg,s=e.seg;let r=n.getControlPoint1(),o=n.getControlPoint2();t.dir===-1&&(o=Et(r,r=o));let l=s.getControlPoint1(),c=s.getControlPoint2();return e.dir===-1&&(c=Et(l,l=c)),r.equals(l)&&o.equals(c)}if(i===me.enumRationalBezier2){const n=t.seg,s=e.seg,r=n.getControlPoint1(),o=s.getControlPoint1();if(!r.equals(o))return!1;const l=[0,0,0];n.queryWeights(l),t.dir===-1&&(l[2]=Et(l[0],l[0]=l[2]));const c=[0,0,0];return s.queryWeights(c),e.dir===-1&&(c[2]=Et(c[0],c[0]=c[2])),l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}xt("")}function ort(t,e){if(t.seg===null||e.seg===null)return t.seg!==null?-1:e.seg!==null?1:0;const i=t.seg.getGeometryType(),n=e.seg.getGeometryType();return i<n?-1:i>n?1:0}function art(t,e){const i=t.otherPt.compare(e.otherPt);return i!==0?i:ort(t,e)}var xB=bi,lrt=Ds,CT=ml;function K_(){return{unsplitBehavior:0,allCrossRoadsImpassable:!1,ogcRule:!1}}function pq(t,e,i,n,s,r,o){const l=new kf(s);l.m_bOGCOutput=!0;const c=t.getGeometryType()===me.enumPolygon&&t.getFillRule()===1&&!Af(n);return l.planarSimplifyImpl_(t,e,c,i,n,s,r,o)}function _M(t,e,i,n,s,r,o,l){return new kf(r).planarSimplifyImpl_(t,e,i,n,s,r,o,l)}function crt(t,e,i,n){return K(0),{}}function urt(t,e,i,n,s,r,o){return K(0),{}}function hrt(t,e,i,n){return K(0),{}}function Vne(t,e,i){return vrt(t,e,i)}function drt(t,e,i,n){if(t.isEmpty()||e.isEmpty()||t.getDimension()>e.getDimension())return em(Wo(t),t,e,"-");const s=new xe;t.queryEnvelope(s);const r=new xe;e.queryEnvelope(r);const o=new xe;o.setCoords({env2D:s}),o.mergeEnvelope2D(r);const l=Js(i,o,!0),c=r.clone(),f=Wc(l);if(c.inflateCoords(f,f),!s.isIntersecting(c))return em(Wo(t),t,e,"-");const y=new kf(n),_=new Hn,x=_.addGeometry(Wo(t)),S=_.addGeometry(Wo(e));let P=0,A=0,D=null;if(_.hasCurves()){D=new Ru;const G=_.getEnvelope2D(n);A=Up(l.total());const V=$u(l.total(),G);P=gf(V,A),Wh(_,V,l.total(),12e3,D,null,n)}y.setEditShapeCrackAndCluster(_,l.add(P));const N=y.difference(x,S);D!==null&&D.stitchCurves(_,N,A,!0);const F=em(_.getGeometry(N),t,e,"-");return xB(F.getGeometryType())&&(F.getImpl().setIsSimple(4,l.total()),F.getGeometryType()===me.enumPolygon&&F.getImpl().updateOGCFlagsProtected()),F}function Gne(t,e,i){return yrt(t,e,i,!0)}function frt(t,e,i){return t.isEmpty()||e.isEmpty()?t.createInstance():irt(i,t,e)?new Ut({copy:nrt(t,e)}):t.createInstance()}function prt(t,e,i,n){const s=xe.constructEmpty();t.queryEnvelope(s);const r=xe.constructEmpty();e.queryEnvelope(r);const o=xe.constructEmpty();o.setCoords({env2D:s}),o.mergeEnvelope2D(r);const l=Js(i,o,!0),c=new xe(r),f=Wc(l);if(c.inflateCoords(f,f),!s.isIntersecting(c)){if(t.getDimension()<=e.getDimension())return em(Wo(t.createInstance()),t,e,"&");if(t.getDimension()>e.getDimension())return em(Wo(e.createInstance()),t,e,"&")}const y=new kf(n),_=new Hn,x=_.addGeometry(Wo(t)),S=_.addGeometry(Wo(e));let P=0,A=0,D=null;if(_.hasCurves()){D=new Ru;const G=_.getEnvelope2D(n);A=Up(l.total());const V=$u(l.total(),G);P=gf(V,A),Wh(_,V,l.total(),12e3,D,null,n)}y.setEditShapeCrackAndCluster(_,l.add(P));const N=y.intersection(x,S);D!==null&&D.stitchCurves(_,N,A,!0);const F=em(_.getGeometry(N),t,e,"&");return xB(F.getGeometryType())&&(F.getImpl().setIsSimple(4,l.total()),F.getGeometryType()===me.enumPolygon&&F.getImpl().updateOGCFlagsProtected()),F}function mrt(t,e,i,n){const s=new Array(3),r=xe.constructEmpty();t.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o);const l=xe.constructEmpty();l.setCoords({env2D:r}),l.mergeEnvelope2D(o);const c=Js(i,l,!0),f=new xe(o),y=Wc(c);if(f.inflateCoords(y,y),!r.isIntersecting(f)){if(t.getDimension()<=e.getDimension()){const G=em(Wo(t.createInstance()),t,e,"&");return s[G.getDimension()]=G,s}if(t.getDimension()>e.getDimension()){const G=em(Wo(e.createInstance()),t,e,"&");return s[G.getDimension()]=G,s}}const _=new kf(n),x=new Hn,S=x.addGeometry(Wo(t)),P=x.addGeometry(Wo(e));let A=0,D=0,N=null;if(x.hasCurves()){N=new Ru;const G=x.getEnvelope2D(n);D=Up(c.total());const V=$u(c.total(),G);A=gf(V,D),Wh(x,V,c.total(),12e3,N,null,n)}_.setEditShapeCrackAndCluster(x,c.add(A)),x.dbgVerifyCurves();const F=_.intersectionEx(S,P);for(const G of F){N!==null&&N.stitchCurves(x,G,D,!1);const V=em(x.getGeometry(G),t,e,"&");xB(V.getGeometryType())&&(V.getImpl().setIsSimple(4,c.total()),V.getGeometryType()===me.enumPolygon&&V.getImpl().updateOGCFlagsProtected()),s[V.getDimension()]=V}return N!==null&&N.clearStitcher(x),s}function uO(t,e,i,n,s,r=!1){e===0&&Je("not enough geometries to dissolve");let o=0;for(let P=0,A=e;P<A;P++)o=Math.max(t[P].getDimension(),o);if(o===2||o===1)return new kf(n).dissolveMultiPaths_(o,!1,t,e,i,s,r);let l=0,c=-1;for(let P=0,A=e;P<A;P++)t[P].getDimension()===o&&(c===-1&&(c=P),t[P].isEmpty()||(c=P,l++));if(l<2)return Wo(t[c]);const f=ol.constructEmpty(),y=new Hn;let _=ae;for(let P=0,A=e;P<A;P++)if(t[P].getDimension()===o&&!t[P].isEmpty()){_===ae?_=y.addGeometry(Wo(t[P])):y.appendGeometry(_,Wo(t[P]));const D=ol.constructEmpty();t[P].queryLooseEnvelope(D),f.mergeEnv3D(D)}const x=Js(i,f.getEnvelope2D(),!0),S=new kf(n);if(r){const P=JE(i,f.getEnvelopeZs(),!0);return S.planarSimplify3DImpl_(y,x,P,0,!0)}return S.m_bOGCOutput=!0,S.planarSimplifyMultiPoints(y,x,!1,-1)}function grt(t,e,i,n,s,r=!1){e<2&&Je("not enough geometries to dissolve");let o=0;for(let A=0,D=e;A<D;A++)o=Math.max(t[A].getDimension(),o);if(o===2||o===1)return new kf(n).dissolveMultiPaths_(o,!0,t,e,i,s,r);const l=ol.constructEmpty(),c=new Hn;let f=ae,y=0,_=-1;for(let A=0,D=e;A<D;A++)if(t[A].getDimension()===o&&(_===-1&&(_=A),!t[A].isEmpty())){_=A,f===ae?f=c.addGeometry(Wo(t[A])):c.appendGeometry(f,Wo(t[A]));const N=ol.constructEmpty();t[A].queryLooseEnvelope(N),l.mergeEnv3D(N),y++}if(y<2)return Wo(t[_]);const x=o===0?i:null,S=Js(x,l.getEnvelope2D(),!0),P=new kf(n);if(r){const A=JE(x,l.getEnvelopeZs(),!0);return P.m_bOGCOutput=!0,P.planarSimplify3DImpl_(c,S,A,0,!0)}return P.planarSimplifyMultiPoints(c,S,!0,-1)}class kf{constructor(e){this.m_topoGraph=null,this.m_maskLookup=[],this.m_dummyPt1=Y.getNAN(),this.m_dummyPt2=Y.getNAN(),this.m_fromEdgeForPolylines=ae,this.m_progressCounter=0,this.m_bOGCOutput=!1,this.m_progressTracker=e}linesToPolygonsImpl(e,i){let n=0,s=0,r=null;if(e.hasCurves()){r=new Ru;const f=e.getEnvelope2D(this.m_progressTracker);s=Up(i.total());const y=$u(i.total(),f);n=gf(y,s),Wh(e,y,i.total(),12e3,r,null,this.m_progressTracker)}this.setEditShapeCrackAndCluster(e,i.add(n));const o=this.m_topoGraph.createUserIndexForChains(),l=this.m_topoGraph.getFirstChain();this.m_topoGraph.setChainUserIndex(l,o,1);for(let f=this.m_topoGraph.getChainFirstIsland(l);f!==ae;f=this.m_topoGraph.getChainNextInParent(f))this.m_topoGraph.setChainUserIndex(f,o,1);const c=[];for(let f=this.m_topoGraph.getFirstChain();f!==ae;f=this.m_topoGraph.getChainNext(f)){if(this.m_topoGraph.getChainUserIndex(f,o)===1)continue;this.m_topoGraph.setChainUserIndex(f,o,1);for(let x=this.m_topoGraph.getChainFirstIsland(f);x!==ae;x=this.m_topoGraph.getChainNextInParent(x))this.m_topoGraph.setChainUserIndex(x,o,1);if(this.m_topoGraph.getChainArea(f)===0)continue;const y=this.m_topoGraph.extractPolygonFromChainAndIslands(e,ae,f,ae);r!=null&&r.stitchCurves(e,y,s,!1);const _=e.getGeometry(y);c.push(_)}return new nh(c)}autoCompleteImpl(e,i,n){let s=0,r=0,o=null;if(e.hasCurves()){o=new Ru;const _=e.getEnvelope2D(this.m_progressTracker);r=Up(n.total());const x=$u(n.total(),_);s=gf(x,r),Wh(e,x,n.total(),12e3,o,null,this.m_progressTracker)}this.setEditShapeCrackAndCluster(e,n.add(s));const l=this.m_topoGraph.getGeometryID(i),c=this.m_topoGraph.createUserIndexForChains(),f=this.m_topoGraph.getFirstChain();this.m_topoGraph.setChainUserIndex(f,c,1);for(let _=this.m_topoGraph.getChainFirstIsland(f);_!==ae;_=this.m_topoGraph.getChainNextInParent(_))this.m_topoGraph.setChainUserIndex(_,c,1);const y=[];for(let _=this.m_topoGraph.getFirstChain();_!==ae;_=this.m_topoGraph.getChainNext(_)){if(this.m_topoGraph.getChainUserIndex(_,c)===1)continue;this.m_topoGraph.setChainUserIndex(_,c,1);for(let N=this.m_topoGraph.getChainFirstIsland(_);N!==ae;N=this.m_topoGraph.getChainNextInParent(N))this.m_topoGraph.setChainUserIndex(N,c,1);if(this.m_topoGraph.getChainParentage(_)!==0)continue;const x=this.m_topoGraph.getChainHalfEdge(_);let S=x,P=!1;do{const N=this.m_topoGraph.getHalfEdgeTwin(S);if(this.m_topoGraph.getHalfEdgeChain(N)!==_&&this.m_topoGraph.getHalfEdgeParentage(S)&l){P=!0;break}S=this.m_topoGraph.getHalfEdgeNext(S)}while(S!==x);if(!P||this.m_topoGraph.getChainArea(_)===0)continue;const A=this.m_topoGraph.extractPolygonFromChainAndIslands(e,ae,_,ae);o!==null&&o.stitchCurves(e,A,r,!1);const D=e.getGeometry(A);y.push(D)}return new nh(y)}setEditShape(e,i=!1){this.m_topoGraph===null&&(this.m_topoGraph=new Xh),this.m_topoGraph.setEditShape(e,this.m_progressTracker,!0,i)}setEditShapeCrackAndCluster(e,i){nf(e,i,this.m_progressTracker,!0,!1);for(let n=e.getFirstGeometry();n!==ae;n=e.getNextGeometry(n))e.getGeometryType(n)===me.enumPolygon&&m0(e,n,-1,this.m_bOGCOutput,ae,this.m_progressTracker);this.setEditShape(e)}setHalfEdgeOrientations_(e,i){const n=this.m_topoGraph.getShape();for(let s=n.getFirstGeometry();s!==ae;s=n.getNextGeometry(s))if(s===i)for(let r=n.getFirstPath(s);r!==ae;r=n.getNextPath(r)){let o=n.getFirstVertex(r);if(o===ae)continue;let l=n.getNextVertex(o);for(;l!==ae;){const c=this.m_topoGraph.getClusterFromVertex(o),f=this.m_topoGraph.getClusterFromVertex(l),y=this.m_topoGraph.getHalfEdgeConnector(c,f);if(y!==ae){const _=this.m_topoGraph.getHalfEdgeTwin(y);this.m_topoGraph.setHalfEdgeUserIndex(y,e,1),this.m_topoGraph.setHalfEdgeUserIndex(_,e,2)}o=l,l=n.getNextVertex(o)}}}flushVertices_(e,i){const n=this.m_topoGraph.getShape(),s=n.hasSegmentParentage(),r=new Qt,o=n.insertPath(e,ae);i.push(i[0]);const l=i.length;let c=ae;for(let f=0;f<l;f++){const y=i[f];if(c=n.addVertex(o,y),!s)continue;const _=this.m_topoGraph.getClusterFromVertex(y);if(f>0&&this.m_topoGraph.isBreakNode(_)&&n.setSegmentParentageBreakVertex(c,!0),f<l-1){const x=this.m_topoGraph.getHalfEdgeConnector(_,this.m_topoGraph.getClusterFromVertex(i[f+1])),S=this.m_topoGraph.getSegmentParentage(x);n.setSegmentParentageAndBreak(c,S,f>0||this.m_topoGraph.isBreakNode(_)),this.m_topoGraph.isHalfEdgeCurve(x)&&(this.m_topoGraph.querySegmentXY(x,r),n.setSegmentToIndex(n.getVertexIndex(c),r.get().clone()))}}if(s){const f=this.m_topoGraph.getClusterFromVertex(i[l-1]);this.m_topoGraph.isBreakNode(f)&&n.setSegmentParentageBreakVertex(c,!0)}n.setClosedPath(o,!0)}processPolygonCuts_(e,i,n,s){const r=this.m_topoGraph.getGeometryID(n),o=this.m_topoGraph.getGeometryID(s),l=[],c=this.m_topoGraph.getShape(),f=this.m_topoGraph.createUserIndexForHalfEdges();for(let y=this.m_topoGraph.getFirstCluster();y!==ae;y=this.m_topoGraph.getNextCluster(y)){const _=this.m_topoGraph.getClusterHalfEdge(y);if(_===ae)continue;let x=_;do{if(this.m_topoGraph.getHalfEdgeUserIndex(x,f)!==1){let S=x,P=x,A=!1,D=0;do{if(this.m_topoGraph.setHalfEdgeUserIndex(S,f,1),!A&&this.m_topoGraph.getHalfEdgeParentage(S)&o&&this.m_topoGraph.getHalfEdgeFaceParentage(S)&r&&(P=S,A=!0),A){const N=this.m_topoGraph.getHalfEdgeOrigin(S),F=this.m_topoGraph.getClusterVertexIterator(N),G=this.m_topoGraph.getVertexFromVertexIterator(F);l.push(G),e!==-1&&this.m_topoGraph.getHalfEdgeParentage(S)&o&&(D|=this.m_topoGraph.getHalfEdgeUserIndex(S,e))}S=this.m_topoGraph.getHalfEdgeNext(S)}while(S!==P);if(A&&this.m_topoGraph.getChainArea(this.m_topoGraph.getHalfEdgeChain(P))>0){const N=c.createGeometry(me.enumPolygon);this.flushVertices_(N,l),i!==-1&&c.setGeometryUserIndex(N,i,D)}l.length=0}x=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(x))}while(x!==_)}this.m_topoGraph.deleteUserIndexForHalfEdges(f)}cutPolygonPolyline_(e,i,n,s){this.m_topoGraph.removeSpikes_();let r=-1;e!==-1&&(r=this.m_topoGraph.createUserIndexForHalfEdges(),this.setHalfEdgeOrientations_(r,n)),this.processPolygonCuts_(r,e,i,n),r!==-1&&(this.m_topoGraph.deleteUserIndexForHalfEdges(r),r=-1);const o=this.m_topoGraph.getShape();for(let l=o.getFirstGeometry();l!==ae;l=o.getNextGeometry(l))l!==i&&l!==n&&s.push(l);s.sort((l,c)=>{const f=o.getFirstPath(l),y=o.getRingArea(f),_=o.getFirstPath(c),x=o.getRingArea(_);return y<x?-1:y>x?1:0})}cut(e,i,n,s,r){const o=this.m_topoGraph.getShape().getGeometryType(n),l=this.m_topoGraph.getShape().getGeometryType(s),c=ml(o),f=ml(l);c!==2||f!==1?c!==1||f!==1?xt(""):new _rt(this,e,i,n,s,r).Do():this.cutPolygonPolyline_(i,n,s,r)}progress_(e=!1){}isGoodParentage(e){return e>=0&&e<this.m_maskLookup.length&&this.m_maskLookup[e]}normalizeInputGeometry(e){const i=e.getGeometryType();if(i===me.enumEnvelope){const n=new Wt({vd:e.getDescription()});return e.isEmpty()||n.addEnvelope(e,!1),n}if(i===me.enumPoint){const n=new Qs({vd:e.getDescription()});return e.isEmpty()||n.add(e),n}if(Ds(i)){const n=new vi({vd:e.getDescription()});return e.isEmpty()||n.addSegment(e,!0),n}return i!==me.enumMultiPoint&&i!==me.enumPolyline&&i!==me.enumPolygon&&Je("Unexpected geometry type"),e}dissolveNonSimplePolygons(e,i,n,s){K(i>0);const r=new Hn;let o=0,l=-1;for(let c=0,f=i;c<f;c++)e[c].getDimension()===2&&(l===-1&&(l=c),e[c].isEmpty()||(o++,r.addGeometry(e[c])));return o===0?(K(l>=0),this.normalizeInputGeometry(e[l])):this.planarSimplifyPolygons(r,n,!0,!1,-1,!0)}dissolveMultiPaths_(e,i,n,s,r,o,l){K(e>=1&&e<=2),K(s>0);const c=8&o?1:2,f=ol.constructEmpty();let y=0,_=-1,x=!0;for(let se=0,de=s;se<de;se++)if(n[se].getDimension()===e&&(_===-1&&(_=se),!n[se].isEmpty())){_=se,y++;const Se=ol.constructEmpty();if(n[se].queryLooseEnvelope(Se),f.mergeEnv3D(Se),e===2&&x&&n[se].getGeometryType()===me.enumPolygon)if(16&o){const Pe=[0],Re=n[se].getImpl().getIsSimple(0,Pe),$e=this.m_bOGCOutput?Re===5:E0(Re);x&&(x=$e)}else{const Pe=KQe(n[se],0);x&&(x=Pe)}}if(y<2&&(K(_>=0),y===0||!(16&o)))return this.normalizeInputGeometry(n[_]);if(!x){const se=Js(i?null:r,f.getEnvelope2D(),!0);return this.dissolveNonSimplePolygons(n,s,se,o)}const S=n.slice(0,s),P=Js(r,f.getEnvelope2D(),!0),A=10*Wc(P);let D=new ta(0,0);if(l&&(D=JE(r,f.getEnvelopeZs(),!0)),y===1&&e===1&&c===2&&!i)return l?urt():this.m_bOGCOutput?pq(S[_],P,!1,-1,this.m_progressTracker,c,!1):_M(S[_],P,!1,!1,-1,this.m_progressTracker,c,!1);const N=new A5;N.startConstruction();let F=e===2?3:4,G=0;for(let se=0,de=s;se<de;se++){if(S[se].getDimension()!==e||S[se].isEmpty())continue;let Se=S[se].getGeometryType();if(Se!==me.enumEnvelope){if(Ds(Se)?(S[se]=this.normalizeInputGeometry(S[se]),Se=me.enumPolyline):K(bi(Se)),e===1){K(Se===me.enumPolyline);let Re=-1;if(l)K(0,"3d not implemented yet");else{const $e=[0];Re=S[se].getImpl().getIsSimple(P.total(),$e)}if(this.m_bOGCOutput?Re!==5:!E0(Re))if(i)F=-1;else{l?K(0,"3d not implemented yet"):this.m_bOGCOutput?S[se]=pq(S[se],P,!1,-1,this.m_progressTracker,c,!1):S[se]=_M(S[se],P,!1,!1,-1,this.m_progressTracker,c,!1);const $e=[0];K(E0(S[se].getImpl().getIsSimple(P.total(),$e)))}}else{K(Se===me.enumPolygon);const Re=[0],$e=S[se].getImpl().getIsSimple(0,Re);K(Af($e))}const Pe=S[se].getImpl();for(let Re=0,$e=Pe.getPathCount();Re<$e;Re++){const we=xe.constructEmpty();Pe.queryLoosePathEnvelope(Re,we),we.inflateCoords(A,A),N.addEnvelope(G,we),G++}}else{K(Se===me.enumEnvelope);const Pe=xe.constructEmpty();S[se].queryLooseEnvelope(Pe),Pe.inflateCoords(A,A),N.addEnvelope(G,Pe),G++,F=-1}}N.endConstruction();const V=G,B=ji(V,-2147483647),W=ji(V,-1);let J=0;_=-1,G=0;for(let se=0,de=s;se<de;se++){if(S[se].getDimension()!==e||(_===-1&&(_=se),S[se].isEmpty()))continue;_=se,J++;const Se=S[se].getGeometryType();if(bi(Se))for(let Pe=0,Re=S[se].getPathCount();Pe<Re;Pe++)W[G]=se,B[G]=-Pe-1,G++;else K(Se===me.enumEnvelope),W[G]=se,B[G]=-1,G++}if(J<2&&e===2)return K(_>=0),this.normalizeInputGeometry(S[_]);let re=V;for(;N.next()&&re>0;){this.progress_();const se=N.getHandleA(),de=N.getHandleB(),Se=N.getElement(se),Pe=N.getElement(de);W[Se]!==W[Pe]&&(B[Se]<0&&(re--,B[Se]=-(B[Se]+1)),B[Pe]<0&&(re--,B[Pe]=-(B[Pe]+1)))}const ne=new Hn;let oe=!1,pe=0;for(let se=0,de=s;se<de;se++){if(S[se].getDimension()!==e||S[se].isEmpty())continue;const Se=S[se].getGeometryType(),Pe=pe;let Re=0,$e=0;const we=bi(Se)?S[se]:null;for(let Fe=Pe,it=B.length;Fe<it&&W[Fe]===se;Fe++)B[Fe]>=0&&(Re++,$e+=we?we.getPathSize(B[Fe]):WE(S[se])),pe++;if($e>.95*WE(S[se])){ne.addGeometry(this.normalizeInputGeometry(S[se]));for(let Fe=Pe;Fe<pe;Fe++)B[Fe]<0&&(B[Fe]=-(B[Fe]+1))}else{if(Re===0){oe=!0;continue}{oe=!0,K(bi(Se)),K(we!=null);const Fe=new Wt({vd:S[se].getDescription()}),it=new vi({vd:S[se].getDescription()}),_t=Se===me.enumPolygon?Fe:it;for(let ot=Pe;ot<pe;ot++)B[ot]>=0&&_t.addPath(we,B[ot],!0);ne.addGeometry(_t)}}}let ce;if(ne.getFirstGeometry()!==ae){const se=e===2,de=i?Js(null,f.getEnvelope2D(),!0):P;let Se=new ta(0,0);if(l&&(Se=i?JE(null,f.getEnvelopeZs(),!0):D),e===2&&!(2&o)){ne.collapseAllGeometriesToFirst();let Pe=0,Re=null;if(ne.hasCurves()&&!ne.hasSegmentParentage()){Re=new Ru;const $e=ne.getEnvelope2D(this.m_progressTracker);Pe=Up(de.total()),Wh(ne,$u(de.total(),$e),de.total(),12e3,Re,null,this.m_progressTracker)}tnt(ne,ne.getFirstGeometry(),de.total(),this.m_progressTracker),Re!==null&&Re.stitchCurves(ne,ae,Pe,!0)}if(l)ce=this.planarSimplify3DImpl_(ne,de,Se,c,!0);else if(e===2)ce=this.planarSimplifyPolygons(ne,de,se,i,-1,!1);else{const Pe=K_();Pe.ogcRule=this.m_bOGCOutput,Pe.allCrossRoadsImpassable=!0,Pe.unsplitBehavior=c,ce=this.planarSimplifyPolylines(ne,de,i,Pe,-1)}if(!oe){const Pe=[0];F=ce.getImpl().getIsSimple(de.total(),Pe)}}else K(oe),K(_>=0),ce=e===2?new Wt({vd:S[_].getDescription()}):new vi({vd:S[_].getDescription()});if(oe){let se=0;for(let de=0,Se=B.length;de<Se;de++){const Pe=W[de];if(!(Pe<0)&&B[de]<0){const Re=S[Pe].getGeometryType(),$e=bi(Re)?S[Pe]:null;if($e){const we=-(B[de]+1);se+=$e.getPathSize(we)}else se+=4}}ce.reserve(ce.getPointCount()+se);for(let de=0,Se=B.length;de<Se;de++){const Pe=W[de];if(!(Pe<0)&&B[de]<0){const Re=S[Pe].getGeometryType(),$e=bi(Re)?S[Pe]:null;if($e){const we=-(B[de]+1);ce.addPath($e,we,!0)}else Re===me.enumEnvelope?ce.addEnvelope(S[Pe],!1):(K(Ds(Re)),ce.addSegment(S[Pe],!0))}}}let ue=0;if(e===2?F!==-1&&(F=3,ue=i?0:P.total()):(K(e===1),i||F===-1||(ue=P.total())),l||ce.getImpl().setIsSimple(F,ue),!i&&oe)if(e===2){if(!l)return new Rc().execute(ce,r,!1,this.m_progressTracker);K(0,"3d not yet implemented")}else e===1&&c!==1&&(ce=l?hrt():crt(),ce.getImpl().setIsSimple(F,ue));return ce}dissolveTopoGraphCommonEdges_(){const e=this.m_topoGraph.createUserIndexForHalfEdges(),i=[];for(let n=this.m_topoGraph.getFirstCluster();n!==ae;n=this.m_topoGraph.getNextCluster(n)){const s=this.m_topoGraph.getClusterHalfEdge(n);let r=s;if(s!==ae)do{if(this.progress_(),this.m_topoGraph.getHalfEdgeUserIndex(r,e)!==1){const o=this.m_topoGraph.getHalfEdgeTwin(r);this.m_topoGraph.setHalfEdgeUserIndex(o,e,1),this.m_topoGraph.setHalfEdgeUserIndex(r,e,1);const l=this.m_topoGraph.getHalfEdgeFaceParentage(r);if(this.isGoodParentage(l)){const c=this.m_topoGraph.getHalfEdgeFaceParentage(o);this.isGoodParentage(c)&&i.push(r)}}r=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(r))}while(r!==s)}this.m_topoGraph.deleteUserIndexForHalfEdges(e),this.m_topoGraph.deleteEdgesBreakFaces_(i)}chooseVertexByOrder(e,i,n,s){let r=_a(),o=ae;for(let c=this.m_topoGraph.getClusterVertexIterator(e);c!==ae;c=this.m_topoGraph.incrementVertexIterator(c)){const f=this.m_topoGraph.getVertexFromVertexIterator(c),y=i.getUserIndex(f,n);y>=0&&y<r&&(r=y,o=f)}K(o!==ae);let l=i.getUserIndex(o,s);return l>0&&(i.setUserIndex(o,s,--l),l===0&&i.setUserIndex(o,n,-1)),o}chooseVertexFromCluster_(e,i){return this.m_topoGraph.getVertexDominantFromCluster(e,i)}chooseVertexFromVertexCluster_(e,i){return this.m_topoGraph.getVertexDominant(e,i)}collectPolygonPathsPreservingFrom_(e,i,n,s,r){const o=this.m_topoGraph.getShape();if(o.getGeometryType(e)!==me.enumPolygon)return;const l=o.hasSegmentParentage(),c=new Qt;for(let f=o.getFirstPath(e);f!==ae;f=o.getNextPath(f)){const y=o.getFirstVertex(f);this.m_topoGraph.getClusterFromVertex(y);const _=this.m_topoGraph.getHalfEdgeFromVertex(y);if(_===ae)continue;const x=this.m_topoGraph.getHalfEdgeUserIndex(_,n);if(x===1||x===2)continue;const S=this.m_topoGraph.getHalfEdgeFaceParentage(_);if(!this.isGoodParentage(S)){this.m_topoGraph.setHalfEdgeUserIndex(_,n,2);continue}this.m_topoGraph.setHalfEdgeUserIndex(_,n,1);const P=o.insertPath(i,ae);o.setClosedPath(P,!0);let A=_,D=y,N=this.m_topoGraph.getClusterFromVertex(D),F=1;do{this.progress_();const G=this.chooseVertexFromVertexCluster_(D,r),V=o.addVertex(P,G);if(this.m_topoGraph.isHalfEdgeCurve(A)&&(this.m_topoGraph.querySegmentXY(A,c),o.setSegmentToIndex(o.getVertexIndex(V),c.get().clone())),l){const re=this.m_topoGraph.getSegmentParentage(A);o.setSegmentParentageAndBreak(V,re,this.m_topoGraph.isBreakNode(N))}let B,W;s!==-1&&this.m_topoGraph.setClusterUserIndex(N,s,1),this.m_topoGraph.setHalfEdgeUserIndex(A,n,1),A=this.m_topoGraph.getHalfEdgeNext(A);do B=F===1?o.getNextVertex(D):o.getPrevVertex(D),W=B!==ae?this.m_topoGraph.getClusterFromVertex(B):ae;while(W===N);const J=this.m_topoGraph.getHalfEdgeOrigin(A);if(J!==W){do B=F===1?o.getPrevVertex(D):o.getNextVertex(D),W=B!==ae?this.m_topoGraph.getClusterFromVertex(B):ae;while(W===N);if(J!==W){W=J;const re=this.m_topoGraph.getClusterVertexIterator(W);B=this.m_topoGraph.getVertexFromVertexIterator(re)}else F=-F}N=W,D=B}while(A!==_)}}topoOperationPolygonPolygonHelper_(e,i,n,s,r,o){this.progress_(!0),e!==ae&&this.collectPolygonPathsPreservingFrom_(e,n,r,o,s),i!==ae&&this.collectPolygonPathsPreservingFrom_(i,n,r,o,s);const l=new Qt,c=this.m_topoGraph.getShape();c.dbgVerifyCurves();const f=c.hasSegmentParentage();for(let y=this.m_topoGraph.getFirstCluster();y!==ae;y=this.m_topoGraph.getNextCluster(y)){const _=this.m_topoGraph.getClusterHalfEdge(y);if(_===ae)continue;let x=_;do{this.progress_();const S=this.m_topoGraph.getHalfEdgeUserIndex(x,r);if(S!==1&&S!==2){const P=this.m_topoGraph.getHalfEdgeFaceParentage(x);if(this.isGoodParentage(P)){const A=c.insertPath(n,ae);c.setClosedPath(A,!0);let D=x;do{const N=this.m_topoGraph.getHalfEdgeVertexIterator(D);let F=ae;if(N!==ae)F=this.m_topoGraph.getVertexFromVertexIterator(N);else{const B=this.m_topoGraph.getHalfEdgeVertexIterator(this.m_topoGraph.getHalfEdgeTwin(D));F=this.m_topoGraph.getVertexFromVertexIterator(B),F=c.getNextVertex(F)}const G=this.chooseVertexFromVertexCluster_(F,s),V=c.addVertex(A,G);if(f){const B=this.m_topoGraph.getSegmentParentage(D),W=this.m_topoGraph.getHalfEdgeOrigin(D);c.setSegmentParentageAndBreak(V,B,this.m_topoGraph.isBreakNode(W))}if(this.m_topoGraph.isHalfEdgeCurve(D)&&(this.m_topoGraph.querySegmentXY(D,l),c.setSegmentToIndex(c.getVertexIndex(V),l.get().clone())),this.m_topoGraph.setHalfEdgeUserIndex(D,r,1),o!==-1){const B=this.m_topoGraph.getClusterFromVertex(G);this.m_topoGraph.setClusterUserIndex(B,o,1)}D=this.m_topoGraph.getHalfEdgeNext(D)}while(D!==x)}else this.m_topoGraph.setHalfEdgeUserIndex(x,r,2)}x=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(x))}while(x!==_)}}topoOperationPolygonPolygon_(e,i,n,s=!1){this.dissolveTopoGraphCommonEdges_();const r=this.m_topoGraph.getShape(),o=r.createGeometry(me.enumPolygon),l=this.m_topoGraph.createUserIndexForHalfEdges();return this.topoOperationPolygonPolygonHelper_(e,i,o,n,l,-1),this.m_topoGraph.deleteUserIndexForHalfEdges(l),s||m0(r,o,3,this.m_bOGCOutput,ae,this.m_progressTracker),o}topoOperationPolyline_(e,i){const n=K_();return n.allCrossRoadsImpassable=!1,n.ogcRule=i,n.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(ae,e,!1,n).first}topoOperationMultiPoint_(){const e=this.m_topoGraph.getShape(),i=e.createGeometry(me.enumMultiPoint),n=e.insertPath(i,ae);for(let s=this.m_topoGraph.getFirstCluster();s!==ae;s=this.m_topoGraph.getNextCluster(s)){const r=this.m_topoGraph.getClusterParentage(s);if(this.isGoodParentage(r)){let o=ae;for(let l=this.m_topoGraph.getClusterVertexIterator(s);l!==ae;l=this.m_topoGraph.incrementVertexIterator(l)){const c=this.m_topoGraph.getVertexFromVertexIterator(l);o===ae&&(o=c);const f=e.getGeometryFromPath(e.getPathFromVertex(c)),y=this.m_topoGraph.getGeometryID(f);if(this.isGoodParentage(y)){o=c;break}}e.addVertex(n,o)}}return i}intersection(e,i){const n=this.m_topoGraph.getShape().getGeometryType(e),s=this.m_topoGraph.getShape().getGeometryType(i),r=ml(n),o=ml(s),l=this.m_topoGraph.getGeometryID(e),c=this.m_topoGraph.getGeometryID(i);K(l>=0),K(c>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|c),this.m_maskLookup[l|c]=!0;let f=ae;return this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(f=e),r===2&&o===2?this.topoOperationPolygonPolygon_(e,i,f):r===1&&o>0||o===1&&r>0?this.topoOperationPolyline_(f,this.m_bOGCOutput):r===0||o===0?this.topoOperationMultiPoint_():void xt("")}topoOperationPolygonPolygonEx(e,i,n){const s=this.m_topoGraph.getShape(),r=s.createGeometry(me.enumPolygon),o=s.createGeometry(me.enumPolyline),l=s.createGeometry(me.enumMultiPoint);this.dissolveTopoGraphCommonEdges_();let c=ae;const f=this.m_topoGraph.createUserIndexForHalfEdges(),y=this.m_topoGraph.createUserIndexForClusters();s.dbgVerifyCurves(),this.topoOperationPolygonPolygonHelper_(e,i,r,n,f,y),s.dbgVerifyCurves();const _=s.hasSegmentParentage(),x=new Qt;for(let P=this.m_topoGraph.getFirstCluster();P!==ae;P=this.m_topoGraph.getNextCluster(P)){const A=this.m_topoGraph.getClusterHalfEdge(P);if(A===ae)continue;let D=A;do{let N=this.m_topoGraph.getHalfEdgeUserIndex(D,f),F=this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(D),f),G=N|F;if(G===2){let V=this.m_topoGraph.getHalfEdgeParentage(D);if(this.isGoodParentage(V)){const B=s.insertPath(o,ae);let W=D;const J=this.chooseVertexFromCluster_(P,n);let re=s.addVertex(B,J);if(_){const ne=this.m_topoGraph.getSegmentParentage(D),oe=this.m_topoGraph.getHalfEdgeOrigin(D);s.setSegmentParentageAndBreak(re,ne,this.m_topoGraph.isBreakNode(oe))}this.m_topoGraph.isHalfEdgeCurve(D)&&(this.m_topoGraph.querySegmentXY(D,x),s.setSegmentToIndex(s.getVertexIndex(re),x.get().clone())),this.m_topoGraph.setClusterUserIndex(P,y,1);do{this.progress_();const ne=this.m_topoGraph.getHalfEdgeTo(W),oe=this.chooseVertexFromCluster_(ne,n);if(re=s.addVertex(B,oe),_){const pe=this.m_topoGraph.getSegmentParentage(D),ce=this.m_topoGraph.getHalfEdgeOrigin(D);s.setSegmentParentageAndBreak(re,pe,this.m_topoGraph.isBreakNode(ce))}if(this.m_topoGraph.setHalfEdgeUserIndex(W,f,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(W),f,1),this.m_topoGraph.setClusterUserIndex(ne,y,1),W=this.m_topoGraph.getHalfEdgeNext(W),N=this.m_topoGraph.getHalfEdgeUserIndex(W,f),F=this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(W),f),G=N|F,G!==2)break;if(V=this.m_topoGraph.getHalfEdgeParentage(W),!this.isGoodParentage(V)){this.m_topoGraph.setHalfEdgeUserIndex(W,f,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(W),f,1);break}this.m_topoGraph.isHalfEdgeCurve(D)&&W!==D&&(this.m_topoGraph.querySegmentXY(D,x),s.setSegmentToIndex(s.getVertexIndex(re),x.get().clone()))}while(W!==D)}else this.m_topoGraph.setHalfEdgeUserIndex(D,f,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(D),f,1)}D=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(D))}while(D!==A)}for(let P=this.m_topoGraph.getFirstCluster();P!==ae;P=this.m_topoGraph.getNextCluster(P)){if(this.progress_(),this.m_topoGraph.getClusterUserIndex(P,y)===1)continue;const A=this.m_topoGraph.getClusterParentage(P);if(this.isGoodParentage(A)){c===ae&&(c=s.insertPath(l,ae));const D=this.m_topoGraph.getClusterVertexIterator(P);let N=ae;if(D!==ae){N=this.m_topoGraph.getVertexFromVertexIterator(D);const F=this.chooseVertexFromVertexCluster_(N,n);s.addVertex(c,F)}}}this.m_topoGraph.deleteUserIndexForClusters(y),this.m_topoGraph.deleteUserIndexForHalfEdges(f),s.dbgVerifyCurves(),m0(s,r,3,this.m_bOGCOutput,ae,this.m_progressTracker);const S=[ae,ae,ae];return S[0]=l,S[1]=o,S[2]=r,S}topoOperationPolylinePolylineOrPolygonEx(e,i){const n=K_();return n.allCrossRoadsImpassable=!1,n.ogcRule=i,n.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(ae,e,!0,n)}topoOperationMultiPoint(){const e=this.m_topoGraph.getShape(),i=e.createGeometry(me.enumMultiPoint),n=e.insertPath(i,ae);for(let s=this.m_topoGraph.getFirstCluster();s!==ae;s=this.m_topoGraph.getNextCluster(s)){const r=this.m_topoGraph.getClusterParentage(s);if(this.isGoodParentage(r)){let o=ae;for(let l=this.m_topoGraph.getClusterVertexIterator(s);l!==ae;l=this.m_topoGraph.incrementVertexIterator(l)){const c=this.m_topoGraph.getVertexFromVertexIterator(l);o===ae&&(o=c);const f=e.getGeometryFromPath(e.getPathFromVertex(c)),y=this.m_topoGraph.getGeometryID(f);if(this.isGoodParentage(y)){o=c;break}}e.addVertex(n,o)}}return i}intersectionEx(e,i){const n=this.m_topoGraph.getShape().getGeometryType(e),s=this.m_topoGraph.getShape().getGeometryType(i),r=CT(n),o=CT(s),l=this.m_topoGraph.getGeometryID(e),c=this.m_topoGraph.getGeometryID(i);K(l>=0),K(c>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|c),this.m_maskLookup[l|c]=!0;let f=ae;if(this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(f=e),r===2&&o===2)return this.topoOperationPolygonPolygonEx(e,i,f);if(r===1&&o>0||o===1&&r>0){const{first:y,second:_}=this.topoOperationPolylinePolylineOrPolygonEx(f,this.m_bOGCOutput);return[_,y]}if(r===0||o===0){const y=[];return y.push(this.topoOperationMultiPoint()),y}xt("")}getCombinedHalfEdgeParentage(e){return this.m_topoGraph.getHalfEdgeParentage(e)|this.m_topoGraph.getHalfEdgeFaceParentage(e)|this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e))}prevailingDirection(e,i){const n=this.getCombinedHalfEdgeParentage(i),s=this.m_topoGraph.getHalfEdgeOrigin(i),r=this.m_topoGraph.getHalfEdgeTo(i);let o=0,l=0;for(let c=this.m_topoGraph.getClusterVertexIterator(s);c!==ae;c=this.m_topoGraph.incrementVertexIterator(c)){const f=this.m_topoGraph.getVertexFromVertexIterator(c),y=e.getPathFromVertex(f),_=e.getGeometryFromPath(y),x=this.m_topoGraph.getGeometryID(_),S=e.getFirstVertex(y),P=!!(x&n);P&&S===f&&(this.m_fromEdgeForPolylines=i);const A=e.getNextVertex(f);if(A!==ae&&this.m_topoGraph.getClusterFromVertex(A)===r){if(o++,P){if(this.m_fromEdgeForPolylines===ae&&S===A){const D=this.m_topoGraph.getHalfEdgeNext(i);this.isGoodParentage(this.getCombinedHalfEdgeParentage(D))&&(this.m_fromEdgeForPolylines=D)}l++}}else{const D=e.getPrevVertex(f);if(D!==ae&&this.m_topoGraph.getClusterFromVertex(D)===r&&(o--,P)){if(this.m_fromEdgeForPolylines===ae&&S===D){const N=this.m_topoGraph.getHalfEdgeNext(i);this.isGoodParentage(this.getCombinedHalfEdgeParentage(N))&&(this.m_fromEdgeForPolylines=N)}l--}}}return this.m_topoGraph.queryXY(s,this.m_dummyPt1),this.m_topoGraph.queryXY(r,this.m_dummyPt2),(l!==0?l:o)*Y.distance(this.m_dummyPt1,this.m_dummyPt2)}tryMoveThroughCrossroadBackwards(e,i){const n=this.m_topoGraph.getHalfEdgePrev(e),s=this.m_topoGraph.getHalfEdgeTwin(n);if(!i){if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(e)))return ae;const l=this.m_topoGraph.getHalfEdgeTwin(e);if(s===this.m_topoGraph.getHalfEdgeNext(l))return n}let r=s,o=ae;for(;r!==e;){const l=this.getCombinedHalfEdgeParentage(r);if(this.isGoodParentage(l)){if(o!==ae)return ae;o=this.m_topoGraph.getHalfEdgeTwin(r)}r=this.m_topoGraph.getHalfEdgeTwin(this.m_topoGraph.getHalfEdgePrev(r))}return o}tryMoveThroughCrossroadForward(e,i){const n=this.m_topoGraph.getHalfEdgeNext(e),s=this.m_topoGraph.getHalfEdgeTwin(n);if(!i){const l=this.m_topoGraph.getHalfEdgeTwin(e);if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(l)))return ae;if(s===this.m_topoGraph.getHalfEdgePrev(l))return n}let r=s,o=ae;for(;r!==e;){const l=this.getCombinedHalfEdgeParentage(r);if(this.isGoodParentage(l)){if(o!==ae)return ae;o=this.m_topoGraph.getHalfEdgeTwin(r)}r=this.m_topoGraph.getHalfEdgeTwin(this.m_topoGraph.getHalfEdgeNext(r))}return o}isOnALoop(e,i){let n=e;const s=2*this.m_topoGraph.getShape().getTotalPointCount()+10;for(let r=0;r<s;r++){if(this.m_topoGraph.getHalfEdgeUserIndex(n,i)===1)return!1;const o=this.m_topoGraph.getHalfEdgeNext(n);if(o===this.m_topoGraph.getHalfEdgeTwin(n))return!1;if(n=o,n===e)return!0}xt("is_on_a_loop_")}restorePolylineParts(e,i,n,s,r,o,l,c,f,y){K(r===ae&&o>=0&&l>=0||o===-1&&l===-1),K(c===-1&&y.unsplitBehavior!==1||c!==-1&&y.unsplitBehavior===1);const _=y.ogcRule,x=y.allCrossRoadsImpassable,S=y.unsplitBehavior===1,P=y.unsplitBehavior===0,A=this.m_topoGraph.getShape(),D=A.hasSegmentParentage();let N=e,F=this.m_topoGraph.getHalfEdgeTwin(N);const G=new Qt;this.m_fromEdgeForPolylines=ae;let V=this.prevailingDirection(A,N),B=N,W=ae,J=!1,re=!1,ne=!1;if(!S)for(;;){const ot=this.m_topoGraph.getHalfEdgePrev(N);if(ot===F){ne=!0;break}const ut=this.m_topoGraph.getHalfEdgeNext(F);if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(ut))){J=!0;break}if(this.m_topoGraph.getHalfEdgeTwin(ot)!==ut){if(x){J=!0;break}if(N=this.tryMoveThroughCrossroadBackwards(N,!0),N===ae){J=!0;break}F=this.m_topoGraph.getHalfEdgeTwin(N)}else N=ot,F=ut;if(this.m_topoGraph.getHalfEdgeUserIndex(N,n)===1){ne=!0;break}if(N===e){W=e,re=!0;break}const Pt=this.getCombinedHalfEdgeParentage(N);if(!this.isGoodParentage(Pt))break;B=N,V+=this.prevailingDirection(A,N)}if(W===ae){for(N=e,F=this.m_topoGraph.getHalfEdgeTwin(N),W=N;;){const ut=this.m_topoGraph.getHalfEdgeNext(N),Pt=this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(ut));if(Pt){J=!0;break}if(ut===F){ne=!0;break}if(c!==-1){const Nt=this.m_topoGraph.getHalfEdgeOrigin(F);if(this.m_topoGraph.getClusterUserIndex(Nt,c)===1){J=!0;break}}const Vt=this.m_topoGraph.getHalfEdgePrev(F);if(this.m_topoGraph.getHalfEdgeTwin(ut)!==Vt){if(Pt||x){J=!0;break}if(N=this.tryMoveThroughCrossroadForward(N,!0),N===ae){J=!0;break}F=this.m_topoGraph.getHalfEdgeTwin(N)}else N=ut,F=Vt;if(this.m_topoGraph.getHalfEdgeUserIndex(N,n)===1){ne=!0;break}const Ft=this.getCombinedHalfEdgeParentage(N);if(!this.isGoodParentage(Ft))break;W=N,V+=this.prevailingDirection(A,N)}const ot=this.m_topoGraph.getHalfEdgeOrigin(B);re=this.m_topoGraph.getHalfEdgeTo(W)===ot}else if(this.m_fromEdgeForPolylines!==ae){B=e,W=this.tryMoveThroughCrossroadBackwards(B,!1),K(W!==ae);const ot=this.m_topoGraph.getHalfEdgeTwin(B);this.m_topoGraph.getHalfEdgeNext(ot)}let oe=re;re||ne||f&&(oe=this.isOnALoop(e,n),oe||(oe=this.isOnALoop(F,n)));const pe=V>=0;let ce=!1;oe&&J&&(re?(ce=_,pe&&(ce||S||P)&&B!==e&&(K(!S),B=e,ce=!1)):(S||pe&&P)&&(B=e));let ue=0;for(N=B;F=this.m_topoGraph.getHalfEdgeTwin(N),this.m_topoGraph.setHalfEdgeUserIndex(N,n,1),this.m_topoGraph.setHalfEdgeUserIndex(F,n,1),ue++,N!==W;)N=x?this.m_topoGraph.getHalfEdgeNext(N):this.tryMoveThroughCrossroadForward(N,!1);pe||(W=Et(B,B=W),W=this.m_topoGraph.getHalfEdgeTwin(W),B=this.m_topoGraph.getHalfEdgeTwin(B));let se=A.insertPath(i,ae);N=B;const de=this.m_topoGraph.getHalfEdgeOrigin(B);let Se;Se=o!==-1?this.chooseVertexByOrder(de,A,o,l):this.chooseVertexFromCluster_(de,r),this.m_topoGraph.isStrongPathNode(de)&&A.setStrongPathStart(se,!0);let Pe=A.addVertex(se,Se),Re=Pe;s!==-1&&this.m_topoGraph.setClusterUserIndex(de,s,1);let $e=0;const we=ce?Math.trunc((ue+1)/2):-1;let Fe=ae,it=!0,_t=ae;for(;;){if(D){const Vt=this.m_topoGraph.getSegmentParentage(N),Ft=this.m_topoGraph.getHalfEdgeOrigin(N);A.setSegmentParentageAndBreak(Re,Vt,it||this.m_topoGraph.isBreakNode(Ft))}it=!1,this.m_topoGraph.isHalfEdgeCurve(N)&&(this.m_topoGraph.querySegmentXY(N,G),A.setSegmentToIndex(A.getVertexIndex(Re),G.get().clone())),Fe!==ae&&l!==-1&&A.addToUserIndex(Fe,l,-1);const ot=x?this.m_topoGraph.getHalfEdgeNext(N):this.tryMoveThroughCrossroadForward(N,!1),ut=this.m_topoGraph.getHalfEdgeTo(N);let Pt;if(Pt=o!==-1?this.chooseVertexByOrder(ut,A,o,l):this.chooseVertexFromCluster_(ut,r),Pe=A.addVertex(se,Pt),_t=ut,s!==-1&&this.m_topoGraph.setClusterUserIndex(ut,s,1),D&&this.m_topoGraph.isBreakNode(ut)&&A.setSegmentParentageBreakVertex(Pe,!0),Fe=Pt,$e++,ce&&$e===we&&(se=A.insertPath(i,ae),Pe=A.addVertex(se,Pt),it=!0,l!==-1&&A.addToUserIndex(Pt,l,-1),Fe=ae),N===W)break;N=ot,Re=Pe}_t!==ae&&this.m_topoGraph.isStrongPathNode(_t)&&A.setStrongPathEnd(se,!0)}topoOperationPolylineSimplify_(e,i){return this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,ae,!1,i).first}topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,i,n,s){K(i===ae||e===ae);const r=this.m_topoGraph.getShape(),o=P=>P=e===ae?P===ae?r.getFirstGeometry():r.getNextGeometry(P):P===ae?e:ae,l=r.createGeometry(me.enumPolyline);let c=-1;n&&(c=this.m_topoGraph.createUserIndexForClusters());const f=this.m_topoGraph.createUserIndexForHalfEdges(),y=i===ae?r.createUserIndex():-1,_=i===ae?r.createUserIndex():-1;let x=-1;if(s.unsplitBehavior===1){x=this.m_topoGraph.createUserIndexForClusters();for(let P=o(ae);P!==ae;P=o(P))for(let A=r.getFirstPath(P);A!==ae;A=r.getNextPath(A)){{const D=r.getFirstVertex(A),N=this.m_topoGraph.getClusterFromVertex(D);this.m_topoGraph.setClusterUserIndex(N,x,1)}if(!r.isClosedPath(A)){const D=r.getLastVertex(A),N=this.m_topoGraph.getClusterFromVertex(D);this.m_topoGraph.setClusterUserIndex(N,x,1)}}}if(i===ae){let P=0;for(let A=o(ae);A!==ae;A=o(A))for(let D=r.getFirstPath(A);D!==ae;D=r.getNextPath(D))if(r.isClosedPath(D)){let N=r.getFirstVertex(D);for(let F=0,G=r.getPathSize(D);F<G;F++,N=r.getNextVertex(N))r.setUserIndex(N,y,P++),r.setUserIndex(N,_,2)}else{const N=r.getFirstVertex(D);r.setUserIndex(N,y,P++),r.setUserIndex(N,_,1);let F=r.getNextVertex(N);for(let G=1,V=r.getPathSize(D)-1;G<V;++G)r.setUserIndex(F,y,P++),r.setUserIndex(F,_,2),F=r.getNextVertex(F);r.setUserIndex(F,y,P++),r.setUserIndex(F,_,1)}}for(let P=o(ae);P!==ae;P=o(P))for(let A=r.getFirstPath(P);A!==ae;A=r.getNextPath(A)){let D=r.getFirstVertex(A);for(let N=0,F=r.getPathSize(A);N<F;N++,D=r.getNextVertex(D)){const G=this.m_topoGraph.getHalfEdgeFromVertex(D);if(G===ae||this.m_topoGraph.getHalfEdgeUserIndex(G,f)===1)continue;const V=this.getCombinedHalfEdgeParentage(G);if(this.isGoodParentage(V)){const B=N===0;this.restorePolylineParts(G,l,f,c,i,y,_,x,B,s)}}}let S=ae;if(n){S=r.createGeometry(me.enumMultiPoint);let P=ae;for(let A=this.m_topoGraph.getFirstCluster();A!==ae;A=this.m_topoGraph.getNextCluster(A))if(this.progress_(),this.m_topoGraph.getClusterUserIndex(A,c)!==1){const D=this.m_topoGraph.getClusterParentage(A);if(this.isGoodParentage(D)){P===ae&&(P=r.insertPath(S,ae));const N=this.m_topoGraph.getClusterVertexIterator(A);if(N!==ae){let F;this.m_topoGraph.getVertexFromVertexIterator(N),F=y!==-1?this.chooseVertexByOrder(A,r,y,_):this.chooseVertexFromCluster_(A,i),r.addVertex(P,F)}}}}return _!==-1&&r.removeUserIndex(_),y!==-1&&r.removeUserIndex(y),c!==-1&&r.removeUserIndex(c),this.m_topoGraph.deleteUserIndexForHalfEdges(f),ar(l,S)}difference(e,i){const n=this.m_topoGraph.getShape().getGeometryType(e),s=this.m_topoGraph.getShape().getGeometryType(i),r=ml(n),o=ml(s);if(r>o)return e;const l=this.m_topoGraph.getGeometryID(e),c=this.m_topoGraph.getGeometryID(i);if(this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|c),this.m_maskLookup[l]=!0,r===2&&o===2){let f=ae;return this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(f=e),this.topoOperationPolygonPolygon_(e,i,f)}if(r===1&&o===2){const f=K_();return f.allCrossRoadsImpassable=!1,f.ogcRule=this.m_bOGCOutput,f.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,ae,!1,f).first}if(r===1&&o===1){const f=K_();return f.allCrossRoadsImpassable=!0,f.ogcRule=this.m_bOGCOutput,f.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,ae,!1,f).first}if(r===0)return this.topoOperationMultiPoint_();xt("")}symmetricDifference(e,i){const n=this.m_topoGraph.getShape().getGeometryType(e),s=this.m_topoGraph.getShape().getGeometryType(i),r=CT(n),o=CT(s),l=this.m_topoGraph.getGeometryID(e),c=this.m_topoGraph.getGeometryID(i);return K(l>=0),K(c>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|c),this.m_maskLookup[l]=!0,this.m_maskLookup[l]=!0,this.m_maskLookup[c]=!0,r===2&&o===2?this.topoOperationPolygonPolygon_(e,i,ae):r===1&&o===1?this.topoOperationPolyline_(ae,this.m_bOGCOutput):r===0&&o===0?this.topoOperationMultiPoint():void xt("")}planarSimplifyNoCrackingAndCluster(e,i,n,s){return K(0),!1}unsplitPolylineExact(e){return K(0),new vi}planarSimplifyPolylines(e,i,n,s,r){for(let S=e.getFirstGeometry();S!==ae;S=e.getNextGeometry(S)){const P=e.getGeometryType(S);K(P===me.enumPolyline)}let o=0,l=0,c=null;if(e.hasCurves()&&!e.hasSegmentParentage()){c=new Ru;const S=e.getEnvelope2D(this.m_progressTracker);l=Up(i.total());const P=$u(i.total(),S);o=gf(P,l),Wh(e,P,i.total(),12e3,c,null,this.m_progressTracker)}{const S=ive(i.add(o));e.filterClosePoints(S,!1,!1,!1,ae)}if(this.m_topoGraph=new Xh,r!==4&&r!==5)if(c===null&&n){const S=new fq(this.m_progressTracker,!1);S.sweepVertical(e,i.total()),S.hadComplications()?(nf(e,i,this.m_progressTracker,!0,!1),n=!1):this.m_topoGraph.setCheckDirtyPlanesweepTolerance(i.total())}else nf(e,i.add(o),this.m_progressTracker,!0,!1),n=!1;else n=!1;e.removeSelection(),e.collapseAllGeometriesToFirst();const f=e.getFirstGeometry();if(this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,f,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return K(n&&c===null),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyPolylines(e,i,!1,s,-1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const y=this.m_topoGraph.getGeometryID(f);K(y>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=y+1,this.m_maskLookup[y]=!0;const _=this.topoOperationPolylineSimplify_(e.getFirstGeometry(),s);c!==null&&c.stitchCurves(e,_,l,!0);const x=e.getGeometry(_);return n||x.getImpl().setIsSimple(4,i.total()),x}planarSimplifyMultiPoints(e,i,n,s){for(let f=e.getFirstGeometry();f!==ae;f=e.getNextGeometry(f)){const y=e.getGeometryType(f);K(y===me.enumMultiPoint)}this.m_topoGraph=new Xh,s!==4&&s!==5&&nf(e,i,this.m_progressTracker,!0,!1),n=!1,e.removeSelection(),e.collapseAllGeometriesToFirst();const r=e.getFirstGeometry();if(this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,r,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return K(n),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyMultiPoints(e,i,!1,-1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const o=this.m_topoGraph.getGeometryID(r);K(o>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=o+1,this.m_maskLookup[o]=!0;const l=this.topoOperationMultiPoint(),c=e.getGeometry(l);return n||c.getImpl().setIsSimple(4,i.total()),c}planarSimplifyPolygons(e,i,n,s,r,o){for(let D=e.getFirstGeometry();D!==ae;D=e.getNextGeometry(D)){const N=e.getGeometryType(D);K(N===me.enumPolygon||N===me.enumPolyline&&n)}let l=0,c=0,f=null;if(e.hasCurves()&&!e.hasSegmentParentage()){f=new Ru;const D=e.getEnvelope2D(this.m_progressTracker);c=Up(i.total());const N=$u(i.total(),D);l=gf(N,c),Wh(e,N,i.total(),12e3,f,null,this.m_progressTracker)}if(o){nf(e,i.add(l),this.m_progressTracker,!0,!1);for(let D=e.getFirstGeometry();D!==ae;D=e.getNextGeometry(D))e.getGeometryType(D)===me.enumPolygon&&m0(e,D,-1,!1,ae,this.m_progressTracker)}if(this.m_topoGraph=new Xh,o||r===4||r===5)s=!1;else if(f===null&&s){const D=new fq(this.m_progressTracker,!1);D.sweepVertical(e,i.total()),D.hadComplications()?(nf(e,i,this.m_progressTracker,!0,!1),s=!1):this.m_topoGraph.setCheckDirtyPlanesweepTolerance(i.total())}else nf(e,i.add(l),this.m_progressTracker,!0,!1),s=!1;e.removeSelection(),e.collapseAllGeometriesToFirst();const y=e.getFirstGeometry();if(n?this.m_topoGraph.setAndSimplifyEditShapeWinding(e,y,this.m_progressTracker):this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,y,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return K(s&&f===null),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyPolygons(e,i,n,!1,-1,!1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const _=this.m_topoGraph.getGeometryID(y);K(_>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=_+1,this.m_maskLookup[_]=!0,e.setFillRule(y,0);const x=this.m_bOGCOutput&&n,S=x;let P=this.topoOperationPolygonPolygon_(y,ae,ae,S);x&&(this.m_topoGraph.removeShape(),this.m_topoGraph=null,e.removeGeometry(y),this.m_topoGraph=new Xh,this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,P,this.m_progressTracker),P=this.topoOperationPolygonPolygon_(P,ae,ae,!1)),f!==null&&f.stitchCurves(e,P,c,!0);const A=e.getGeometry(P);return A.setFillRule(0),s?A.getImpl().setIsSimple(3,0):(A.getImpl().setIsSimple(4,i.total()),A.getImpl().updateOGCFlagsProtected()),A}planarSimplify3DImpl_(e,i,n,s,r){return K(0),{}}planarSimplifyImpl_(e,i,n,s,r,o,l,c){if(e.isEmpty())return e.clone();const f=e.getGeometryType(),y=new Hn,_=y.addGeometry(e);if(Af(r)&&f===me.enumPolygon&&(n=!1,y.setFillRule(_,0)),c&&(e.hasAttribute(1)&&y.replaceNaNs(1,0),y.removeNaNVertices()),f===me.enumPolygon||f===me.enumPolyline&&n)return this.planarSimplifyPolygons(y,i,n,s,r,!1);if(f===vi.type){const x=K_();return x.allCrossRoadsImpassable=!0,x.ogcRule=this.m_bOGCOutput,x.unsplitBehavior=l,this.planarSimplifyPolylines(y,i,s,x,r)}if(f===me.enumMultiPoint)return this.planarSimplifyMultiPoints(y,i,s,r);xt("what else?")}}function yrt(t,e,i,n){if(t.isEmpty())return t.createInstance();if(e.isEmpty())return n?t.createInstance():new Ut({copy:t});const s=[new Y],r=[0],o=e.getDimension()===2;return e.getDimension()!==1&&e.getDimension()!==2&&xt(""),s[0]=t.getXY(),o?eve(e,s,1,i.total(),r):tve(e,s,1,i.total(),r),r[0]===0?t.createInstance():t}function vrt(t,e,i,n){const s=t.createInstance(),r=Ge(Y,100),o=new Array(100),l=t.getPointCount();let c=!0;const f=e.getDimension()===2;e.getDimension()!==1&&e.getDimension()!==2&&xt("");for(let y=0;y<l;){const _=t.queryCoordinates(r,r.length,y,-1)-y;f?eve(e,r,_,i.total(),o):tve(e,r,_,i.total(),o);let x=0;for(let S=0;S<_;S++)o[S]===0&&(c&&(c=!1,s.addPoints(t,0,y)),x!==S&&s.addPoints(t,y+x,y+S),x=S+1);c||x===_||s.addPoints(t,y+x,y+_),y+=_}return c?t:s}function em(t,e,i,n){const s=t.getGeometryType();if(s===me.enumEnvelope){const r=new Wt({vd:t.getDescription()});return t.isEmpty()||r.addEnvelope(t,!1),r}if(s===me.enumPoint&&(n==="|"||n==="^")){const r=new Qs({vd:t.getDescription()});return t.isEmpty()||r.add(t),r}if(s===me.enumLine){const r=new vi({vd:t.getDescription()});return t.isEmpty()||r.addSegment(t,!0),r}if(s===me.enumMultiPoint&&n==="-"&&e.getGeometryType()===me.enumPoint){const r=new Ut({vd:t.getDescription()});return t.isEmpty()||t.getPointByVal(0,r),r}if(s===me.enumMultiPoint&&n==="&"&&e.getGeometryType()===me.enumPoint){const r=new Ut({vd:t.getDescription()});return t.isEmpty()||t.getPointByVal(0,r),r}return t}function Wo(t){const e=t.getGeometryType();if(e===me.enumEnvelope){const i=new Wt({vd:t.getDescription()});return t.isEmpty()||i.addEnvelope(t,!1),i}if(e===me.enumPoint){const i=new Qs({vd:t.getDescription()});return t.isEmpty()||i.add(t),i}if(lrt(e)){const i=new vi({vd:t.getDescription()});return t.isEmpty()||i.addSegment(t,!0),i}return e!==me.enumMultiPoint&&e!==me.enumPolyline&&e!==me.enumPolygon&&Je("Unexpected geometry type"),t}function hO(t,e,i,n){const s=i===ae?t.getClusterHalfEdge(e):i;let r=s;K(t.getHalfEdgeOrigin(s)===e);do n(r),r=t.getHalfEdgeNext(t.getHalfEdgeTwin(r));while(r!==s)}class _rt{constructor(e,i,n,s,r,o){this.m_rParent=e,this.m_rTopoGraph=e.m_topoGraph,this.m_rShape=this.m_rTopoGraph.getShape(),this.m_IDCuttee=this.m_rTopoGraph.getGeometryID(s),this.m_IDCutter=this.m_rTopoGraph.getGeometryID(r),this.m_IDBoth=this.m_IDCuttee|this.m_IDCutter,this.m_bConsiderTouch=i,this.m_sideIndex=n,this.m_cuttee=s,this.m_cutter=r,this.m_rCutHandles=o,this.m_cutteeBreadcrumbsIndex=this.m_rShape.createUserIndexUninitialized(),this.m_clusterParentageIndex=this.m_rShape.createUserIndexUninitialized();for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){let c=0;const f=this.m_rShape.getPathSize(l);for(let y=this.m_rShape.getFirstVertex(l);c<f;c++,y=this.m_rShape.getNextVertex(y))this.m_rShape.setUserIndex(y,this.m_clusterParentageIndex,this.m_rTopoGraph.getClusterParentage(this.m_rTopoGraph.getClusterFromVertex(y)))}}Do(){this.cutPolylinePolyline_(),this.m_rShape.removeUserIndex(this.m_cutteeBreadcrumbsIndex),this.m_rShape.removeUserIndex(this.m_clusterParentageIndex)}setTbd(e){return 8|e}classifyStandardCut(e,i,n,s){const r=this.m_rShape.getPrevVertex(e),o=this.m_rShape.getNextVertex(e),l=r===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(r)),c=o===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(o)),f=this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(n)),y=this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(s));let _=1,x=32,S=32;if(hO(this.m_rTopoGraph,i,y,P=>{P===f&&(_=2),P===l&&(x=_),P===c&&(S=_)}),this.m_bConsiderTouch)x!==32&&this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|x),S!==32&&this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|S);else{if(x===32||S===32||x===S&&!(l===f||l===y||c===f||c===y))return 1;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|x),this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|S)}return 0}classifyTouchCut(e,i,n,s){const r=this.m_rShape.getPrevVertex(e),o=this.m_rShape.getNextVertex(e),l=r===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(r)),c=o===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(o)),f=n===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(n)),y=s===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(s));if(!this.m_bConsiderTouch){let _;return(_=f===l||y===l)?this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))):(_=f===c||y===c)&&this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),_?0:1}if(l===ae)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(c===ae)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;if(l===c)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(y!==ae){if(l===y)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(c===y)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;let _=1;hO(this.m_rTopoGraph,i,y,x=>{if(x===l){const S=this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,S),_=2}else if(x===c){const S=this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,S),_=2}})}else{if(l===f)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(c===f)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;let _=2;hO(this.m_rTopoGraph,i,f,x=>{if(x===l){const S=this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,S),_=1}else if(x===c){const S=this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,S),_=1}})}return 0}classifyCutVertex(e,i){let n=0,s=0;for(let r=this.m_rTopoGraph.getClusterVertexIterator(i);r!==ae;r=this.m_rTopoGraph.incrementVertexIterator(r)){const o=this.m_rTopoGraph.getVertexFromVertexIterator(r);if(this.m_rShape.getGeometryFromVertex(o)===this.m_cutter){s++;const l=this.m_rShape.getPrevVertex(o),c=this.m_rShape.getNextVertex(o);n+=l===ae||c===ae?this.classifyTouchCut(e,i,l,c):this.classifyStandardCut(e,i,l,c)}}s&&n===s&&!this.m_bConsiderTouch&&this.m_rShape.setUserIndex(e,this.m_clusterParentageIndex,this.m_IDCuttee)}cutPolylinePolyline_(){this.m_rShape.getGeometryType(this.m_cuttee),this.m_rShape.getGeometryType(this.m_cutter),this.m_rParent.m_maskLookup.length=0,this.m_rParent.m_maskLookup.length=this.m_IDBoth+1,this.m_rParent.m_maskLookup[this.m_IDBoth]=!0;for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){const c=this.m_rShape.getPathSize(l);let f=this.m_rShape.getFirstVertex(l);for(let y=0;y<c;++y,f=this.m_rShape.getNextVertex(f))this.m_rShape.setUserIndex(f,this.m_cutteeBreadcrumbsIndex,0);f=this.m_rShape.getFirstVertex(l);for(let y=0;y<c;++y,f=this.m_rShape.getNextVertex(f)){const _=this.m_rTopoGraph.getClusterFromVertex(f);this.m_rTopoGraph.getClusterParentage(_)===this.m_IDBoth&&this.classifyCutVertex(f,_)}}const e=(l,c)=>{let f=this.m_rShape.getUserIndex(l,this.m_cutteeBreadcrumbsIndex);const y=this.m_rTopoGraph.getHalfEdgeConnector(this.m_rTopoGraph.getClusterFromVertex(l),this.m_rTopoGraph.getClusterFromVertex(c));return(this.m_rTopoGraph.getHalfEdgeParentage(y)&this.m_IDBoth)===this.m_IDBoth&&(f|=4),f};for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){let c=this.m_rShape.getFirstVertex(l);const f=this.m_rShape.isClosedPath(l),y=this.m_rShape.getPathSize(l)+(f?1:0);let _=1,x=32;for(let P=this.m_rShape.getNextVertex(c);_<y;++_,c=P,P=this.m_rShape.getNextVertex(P)){const A=e(c,P);this.m_rShape.getUserIndex(c,this.m_clusterParentageIndex)===this.m_IDBoth&&(x=A),x!==32&&this.m_rShape.setUserIndex(c,this.m_cutteeBreadcrumbsIndex,x|A)}c=this.m_rShape.getLastVertex(l);let S=32;_=1;for(let P=this.m_rShape.getPrevVertex(c);_<y;++_,c=P,P=this.m_rShape.getPrevVertex(P)){const A=e(P,c);this.m_rShape.getUserIndex(c,this.m_clusterParentageIndex)===this.m_IDBoth&&(S=A),S!==32&&this.m_rShape.setUserIndex(P,this.m_cutteeBreadcrumbsIndex,S|A)}}let i=ae,n=ae,s=32;const r=this.m_rShape.hasSegmentParentage(),o=new Qt;for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){const c=this.m_rShape.isClosedPath(l),f=this.m_rShape.getPathSize(l)+(c?1:0);let y=1,_=this.m_rShape.getFirstVertex(l),x=ae,S=!0;for(let P=this.m_rShape.getNextVertex(_);y<f;++y,P=this.m_rShape.getNextVertex(P)){let A=this.m_rShape.getUserIndex(_,this.m_cutteeBreadcrumbsIndex);A===8?A=3:(A&=-9,4&A?A=4:3&~A||(A=3)),A!==s?(i!==ae&&(x=this.m_rShape.addVertex(n,_),r&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(_))&&this.m_rShape.setSegmentParentageBreakVertex(x,!0),this.m_rCutHandles.push(i),this.m_rShape.setGeometryUserIndex(i,this.m_sideIndex,s)),i=this.m_rShape.createGeometry(me.enumPolyline),n=this.m_rShape.insertPath(i,ae),s=A,S=!0):this.m_rShape.getUserIndex(_,this.m_clusterParentageIndex)===this.m_IDBoth&&A!==4&&(x=this.m_rShape.addVertex(n,_),r&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(_))&&this.m_rShape.setSegmentParentageBreakVertex(x,!0),n=this.m_rShape.insertPath(i,ae),S=!0),x=this.m_rShape.addVertex(n,_);const D=this.m_rTopoGraph.getClusterFromVertex(_);!S&&r&&this.m_rTopoGraph.isBreakNode(D)&&this.m_rShape.setSegmentParentageBreakVertex(x,!0);const N=this.m_rTopoGraph.getHalfEdgeFromVertex(_);if(r){const F=this.m_rTopoGraph.getSegmentParentage(N);this.m_rShape.setSegmentParentageAndBreak(x,F,S||this.m_rTopoGraph.isBreakNode(D))}this.m_rTopoGraph.isHalfEdgeCurve(N)&&(this.m_rTopoGraph.querySegmentXY(N,o),this.m_rShape.setSegmentToIndex(this.m_rShape.getVertexIndex(x),o.get().clone())),_=P,S=!1}x=this.m_rShape.addVertex(n,_),r&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(_))&&this.m_rShape.setSegmentParentageBreakVertex(x,!0),this.m_rCutHandles.push(i),this.m_rShape.setGeometryUserIndex(i,this.m_sideIndex,s),i=ae,n=ae,s=32}}}function brt(t,e,i,n,s){if(n&&(n.m_reason=0,n.m_vertexIndex1=-1,n.m_vertexIndex2=-1),t.isEmpty())return 5;const r=t.getGeometryType();if(r===me.enumPoint)return O5(t,n);const o=Cl(e,t,!1).total();if(r===me.enumEnvelope){const _=t,x=new xe;return _.queryEnvelope(x),x.isDegenerate(o)?(n&&(n.m_reason=4,n.m_vertexIndex1=-1,n.m_vertexIndex2=-1),0):5}if(Ds(r)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),wB(x,e,i,n,s)}const l=[0],c=t.getImpl().getIsSimple(o,l);let f=i?-1:c;if(E0(f)||f===0)return f;const y=new Nu(t,e,f,s,!1);return r===me.enumMultiPoint||r===me.enumPolyline||r===me.enumPolygon?f=y.isSimplePlanarImpl():xt(""),t.getImpl().setIsSimple(f,o),n&&n.assign(y.m_nonSimpleResult),f}function nve(t,e,i,n,s){if(n&&(n.m_reason=0,n.m_vertexIndex1=-1,n.m_vertexIndex2=-1),t.isEmpty())return 5;const r=t.getGeometryType();if(r===me.enumPoint)return O5(t,n);const o=Cl(e,t,!1).total();if(r===me.enumEnvelope){const _=t,x=new xe;return _.queryEnvelope(x),x.isDegenerate(o)?(n&&(n.m_reason=4,n.m_vertexIndex1=-1,n.m_vertexIndex2=-1),0):5}if(Ds(r)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),nve(x,e,i,n,s)}x7(r),rl(r)||Bn("OGC simplify is not implemented for this geometry type");const l=[0],c=t.getImpl().getIsSimple(o,l);let f=i?-1:c;if(f===5||f===0)return f;const y=new Nu(t,e,f,s,!0);return r===me.enumMultiPoint||r===me.enumPolyline||r===me.enumPolygon?(f=y.isSimplePlanarImpl(),E0(f)&&(f=5)):xt(""),t.getImpl().setIsSimple(f,o),n&&n.assign(y.m_nonSimpleResult),f}function wB(t,e,i,n,s){if(n&&(n.m_reason=0,n.m_vertexIndex1=-1,n.m_vertexIndex2=-1),t.isEmpty())return 5;const r=t.getGeometryType();if(r===me.enumPoint)return O5(t,n);const o=Cl(e,t,!1).total();if(r===me.enumEnvelope){const _=t,x=xe.constructEmpty();return _.queryEnvelope(x),x.isDegenerate(o)?(n&&(n.m_reason=4,n.m_vertexIndex1=-1,n.m_vertexIndex2=-1),0):5}if(Ds(r)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),wB(x,e,i,n,s)}const l=[0],c=t.getImpl().getIsSimple(o,l);let f=i?-1:c;if(f!==-1)return f;const y=new Nu(t,e,f,s,!1);return r===me.enumMultiPoint?f=y.multipointIsSimpleAsFeature():r===me.enumPolyline?f=y.polylineIsSimpleAsFeature():r===me.enumPolygon?f=y.polygonIsSimpleAsFeature():xt(""),t.getImpl().setIsSimple(f,o),n&&n.assign(y.m_nonSimpleResult),f}function sve(t,e,i,n){if(t.isEmpty())return t;const s=t.getGeometryType();if(s===me.enumPoint){const _=new Sn;if(O5(t,_),_.m_reason===3){const x=t.clone();return x.replaceNaNs(1,0),x}return _.m_reason===2?t.createInstance():t}if(s===me.enumEnvelope){const _=Cl(e,t,!0).total(),x=t,S=xe.constructEmpty();return x.queryEnvelope(S),S.isDegenerate(_)?x.createInstance():t}if(Ds(s)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),sve(x,e,i,n)}x7(s);const r=Cl(e,t,!1).total(),o=[0],l=t.getImpl().getIsSimple(r,o),c=i?-1:l;if(E0(c)){if(s===me.enumPolygon&&t.getFillRule()!==0){const _=t.clone();return _.setFillRule(0),_}return t}if((s===me.enumMultiPoint||s===me.enumPolyline)&&c>=1)return t;const f=new Nu(t,e,c,n,!1);let y;return s===me.enumMultiPoint?y=f.multipointSimplifyAsFeature():s===me.enumPolyline?y=f.polylineSimplifyAsFeature():s===me.enumPolygon?y=f.polygonSimplifyAsFeature():xt(""),y}function rve(t,e,i,n){if(t.isEmpty())return t;const s=t.getGeometryType();if(s===me.enumPoint){const f=new Sn;if(O5(t,f),f.m_reason===3){const y=t.clone();return y.replaceNaNs(1,0),y}return f.m_reason===2?t.createInstance():t}if(s===me.enumEnvelope){const f=t,y=new xe;f.queryEnvelope(y);const _=Cl(e,t,!0).total();return y.isDegenerate(_)?f.createInstance():t}if(Ds(s)){const f=t,y=new vi({vd:f.getDescription()});return y.addSegment(f,!0),rve(y,e,i,n)}x7(s),rl(s)||Bn("OGC simplify is not implemented for this geometry type");const r=Cl(e,t,!1).total(),o=[0],l=t.getImpl().getIsSimple(r,o),c=i?-1:l;if(c===5){if(s===me.enumPolygon&&t.getFillRule()!==0){const f=t.clone();return f.setFillRule(0),f}return t}return pq(t,Cl(e,t,!0),!1,c,n,0,!0)}function O5(t,e){const i=t.getX(),n=t.getY();if(!Number.isFinite(i)||!Number.isFinite(n))return e&&(e.m_reason=2,e.m_vertexIndex1=-1,e.m_vertexIndex2=-1),0;if(t.hasAttribute(1)){const s=t.getZ();if(!Number.isFinite(s))return e&&(e.m_reason=Number.isNaN(s)?3:2,e.m_vertexIndex1=-1,e.m_vertexIndex2=-1),0}return 5}class jne{constructor(){this.m_segment=null,this.m_vertexIndex=-1,this.m_pathIndex=-1,this.m_flags=0}setReversed(e){this.m_flags&=-2,this.m_flags=this.m_flags|(e?1:0)}getReversed(){return!!(1&this.m_flags)}getRightSide(){return this.getReversed()?0:1}}function xrt(){return{x:-1,y:-1,ipath:-1,ivertex:-1,ipolygon:-1}}function wrt(t,e,i,n,s){return{x:t,y:e,ipath:i,ivertex:n,ipolygon:s}}function Srt(t,e){return t.x===e.x&&t.y===e.y&&t.ipath===e.ipath&&t.ivertex===e.ivertex&&t.ipolygon===e.ipolygon}function Ert(t,e){t.x=e.x,t.y=e.y,t.ipath=e.ipath,t.ivertex=e.ivertex,t.ipolygon=e.ipolygon}function Crt(){return{x:-1,y:-1,ipath:-1,ivertex:-1,bBoundary:!1,bEndPoint:!1}}function Prt(t,e,i,n,s,r){return{x:t,y:e,ipath:i,ivertex:n,bBoundary:s,bEndPoint:r}}function Trt(t,e){t.x=e.x,t.y=e.y,t.ipath=e.ipath,t.ivertex=e.ivertex,t.bBoundary=e.bBoundary,t.bEndPoint=e.bEndPoint}class Irt extends Jv{constructor(e){super(),this.m_helper=e}compare(e,i,n){const s=e.getElement(n),r=this.m_helper.m_xy.read(2*i)-this.m_helper.m_xy.read(2*s);return r<0?-1:r>0?1:0}}class Mrt extends Jv{constructor(e){super(),this.m_helper=e}compare(e,i,n){const s=e.getElement(n),r=this.m_helper.m_edges[i],o=this.m_helper.m_edges[s],l=r.getReversed(),c=o.getReversed();let f=r.m_segment.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0),y=o.m_segment.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0);if(f===y){const _=l?r.m_segment.getStartY():r.m_segment.getEndY(),x=c?o.m_segment.getStartY():o.m_segment.getEndY(),S=Math.min(_,x);let P=.5*(S-this.m_helper.m_yScanline)+this.m_helper.m_yScanline;P===this.m_helper.m_yScanline&&(P=S),f=r.m_segment.intersectionOfYMonotonicWithAxisX(P,0),y=o.m_segment.intersectionOfYMonotonicWithAxisX(P,0)}return f<y?-1:f>y?1:0}}class Nu{constructor(e,i,n,s,r){this.m_multiVertexGeom=null,this.m_edges=[],this.m_freeEdges=[],this.m_lineEdgesRecycle=[],this.m_newEdges=[],this.m_recycledSegIter=null,this.m_crossOverHelperList=new oo,this.m_progressTracker=null,this.m_progressCounter=0,this.m_AET=new jt,this.m_xyToNode1=null,this.m_xyToNode2=null,this.m_pathOrientations=null,this.m_pathParentage=null,this.m_xy=null,this.m_pairs=[],this.m_pairIndices=null,this.m_pathsForOGCTests=[],this.m_curveStitcher=null,this.m_editShape=null,this.m_multiPathStitcher=null,this.m_nonSimpleResult=new Sn,this.m_progressCounter=0,this.m_progressTracker=s,this.m_geometry=e,this.m_knownSimpleResult=n,this.m_sr=i;const o=Cl(i,e,!1);this.m_toleranceIsSimple=o,this.m_toleranceIsSimpleClustering=Wc(o),this.m_toleranceIsSimpleCracking=M1e(o),this.m_toleranceSimplify=Cl(i,e,!0),this.m_description=this.m_geometry.getDescription(),this.m_attributeCount=this.m_description.getAttributeCount(),this.m_bOGCRestrictions=r,this.m_bPlanarSimplify=this.m_bOGCRestrictions,this.m_unknownOrientationPathCount=-1,this.m_yScanline=0,this.m_progressCounter=0}isSimplePlanarImpl(){if(this.m_bPlanarSimplify=!0,!this.checkStructure())return 0;const e=this.m_geometry.getGeometryType();return bi(e)&&!this.checkDegenerateSegments(!1)?0:this._CheckClustering()?bi(e)?this._CheckCracking()?this.m_geometry.getGeometryType()===me.enumPolyline?this.checkSelfIntersectionsPolylinePlanar()?4:0:this._CheckSelfIntersections()?this._CheckValidRingOrientation():0:0:5:0}isSimplePlanarImpl3D(){return K(0),7}generateSortedPairs(e){let i=null;bi(e.getGeometryType())&&(i=e);const n=(this.m_bPlanarSimplify||this.m_bOGCRestrictions)&&i!==null,s=e.getPointCount();this.m_xy=e.getAttributeStreamRef(0),this.m_pairs.length=0,this.m_pairIndices=new On(0),n&&(this.m_pathsForOGCTests.length=0);let r=0;for(let c=0;c<s;c++)if(this.m_pairs.push(2*c),this.m_pairs.push(2*c+1),this.m_pairIndices.add(2*c),this.m_pairIndices.add(2*c+1),n){for(;c>=i.getPathEnd(r);)r++;this.m_pathsForOGCTests.push(r)}const o=new pd,l={parent:this,workPt:new Y,userSort(c,f,y){y.sort(c,f,(_,x)=>this.parent.compareVerticesForPlanarClustering(_,x,n))},getValue(c){const f=this.parent.m_pairs[c],y=f>>1;return this.parent.m_xy.queryPoint2D(2*y,this.workPt),this.workPt.y+(1&f?this.parent.m_toleranceIsSimpleClustering:-this.parent.m_toleranceIsSimpleClustering)}};o.sort(this.m_pairIndices,0,2*s,l)}_TestToleranceDistancePlanar(e,i){const n=this.m_xy.read(2*e),s=this.m_xy.read(2*e+1),r=this.m_xy.read(2*i),o=this.m_xy.read(2*i+1);return vB(n,s,r,o,this.m_toleranceIsSimpleClustering*this.m_toleranceIsSimpleClustering)?this.m_geometry.getDimension()===0?!1:n===r&&s===o:!0}checkStructure(){const e=this.m_geometry.getGeometryType();if(bi(e)){const i=this.m_geometry.getImpl(),n=this.m_geometry.getGeometryType()===me.enumPolygon?3:2;for(let s=0,r=i.getPathCount();s<r;s++)if(i.getPathSize(s)<n){if(i.hasNonLinearSegments()&&i.hasNonLinearSegmentsPath(s)&&i.getPathSize(s)>0)continue;return this.m_nonSimpleResult=new Sn(1,s,0),!1}}if(rl(e)){const i=this.m_geometry.getImpl(),n=i.getAttributeStreamRef(0);for(let s=0,r=i.getPointCount();s<r;s++)if(!n.readPoint2D(2*s).isFinite())return this.m_nonSimpleResult=new Sn(2,s,0),!1;if(this.m_geometry.hasAttribute(1)){const s=i.getAttributeStreamRef(1);for(let r=0,o=i.getPointCount();r<o;r++){const l=s.read(r);if(!Number.isFinite(l))return Number.isNaN(l)?this.m_nonSimpleResult=new Sn(3,r,0):this.m_nonSimpleResult=new Sn(2,r,0),!1}}}return!0}checkDegenerateSegments(e){const i=this.m_geometry.getImpl(),n=i.querySegmentIterator(),s=i.hasAttribute(1),r=s?tie(this.m_sr,i,!1).total():0,o=i.hasNonLinearSegments(),l=this.m_toleranceIsSimple.total();for(;n.nextPath();)for(;n.hasNextSegment();){const c=n.nextSegment();let f=c.calculateLowerLength2D();if(!(f>l)&&!(o&&c.isCurve()&&(f=c.calculateLength2D(),f>l))){if(e&&s){const y=c.getStartAttributeAsDbl(1,0),_=c.getEndAttributeAsDbl(1,0);if(Math.abs(_-y)>r)continue}return this.m_nonSimpleResult=new Sn(4,n.getStartPointIndex(),-1),!1}}return!0}checkDegenerateSegments3D(){return K(0),!1}_CheckClustering(){const e=this.m_geometry.getImpl();this.generateSortedPairs(e);const i=e.getPointCount();this.m_AET.clear(),this.m_AET.setComparator(new Irt(this)),this.m_AET.setCapacity(i);for(let n=0,s=2*i;n<s;n++){this.progress_();const r=this.m_pairIndices.read(n),o=this.m_pairs[r],l=o>>1;if(1&o){const c=this.m_AET.search(l),f=this.m_AET.getPrev(c),y=this.m_AET.getNext(c);if(this.m_AET.deleteNode(c),f!==jt.st_nullNode()&&y!==jt.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(f),this.m_AET.getElement(y)))return this.m_nonSimpleResult=new Sn(5,this.m_AET.getElement(f),this.m_AET.getElement(y)),!1}else{const c=this.m_AET.addElement(l),f=this.m_AET.getPrev(c);if(f!==jt.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(f),l))return this.m_nonSimpleResult=new Sn(5,l,this.m_AET.getElement(f)),!1;const y=this.m_AET.getNext(c);if(y!==jt.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(y),l))return this.m_nonSimpleResult=new Sn(5,l,this.m_AET.getElement(y)),!1}}return!0}_CheckCracking(){const e=this.m_geometry.getImpl(),i=e.getPointCount();return!e.hasNonLinearSegments()&&i<10?this._CheckCrackingBrute():this._CheckCrackingPlanesweep()}_CheckCrackingPlanesweep(){if(this.m_editShape=new Hn,this.m_editShape.addGeometry(this.m_geometry),this.m_editShape.hasCurves()){this.m_curveStitcher=new Ru;const i=xe.constructEmpty();this.m_geometry.queryEnvelope(i);const n=$u(this.m_toleranceSimplify.total(),i),s=new Sn;if(Qst(this.m_editShape,n,this.m_toleranceSimplify.total(),12e3,s,this.m_curveStitcher,null,this.m_progressTracker),s.m_reason!==0)return this.m_editShape=null,this.m_nonSimpleResult.assign(s),!1}const e=new Sn;return Nye(!1,this.m_editShape,this.m_toleranceIsSimpleCracking,e,this.m_progressTracker)?(this.m_curveStitcher!=null?(e.m_vertexIndex1=this.m_curveStitcher.getOriginalVertexIndex(this.m_editShape,e.m_vertexIndex1),e.m_vertexIndex2=this.m_curveStitcher.getOriginalVertexIndex(this.m_editShape,e.m_vertexIndex2),this.m_curveStitcher=null):(e.m_vertexIndex1=this.m_editShape.getVertexIndex(e.m_vertexIndex1),e.m_vertexIndex2=this.m_editShape.getVertexIndex(e.m_vertexIndex2)),this.m_editShape=null,this.m_nonSimpleResult.assign(e),!1):(this.m_curveStitcher==null&&(this.m_editShape=null),!0)}_CheckCrackingBrute(){const e=this.m_geometry.getImpl(),i=e.querySegmentIterator(),n=e.querySegmentIterator();for(;i.nextPath();)for(;i.hasNextSegment();){const s=i.nextSegment();if(!i.isLastSegmentInPath()||!i.isLastPath()){n.resetTo(i);do for(;n.hasNextSegment();){const r=$5(!0,s,n.nextSegment(),this.m_toleranceIsSimpleCracking,!0);if(r){const o=r===2?7:6;return this.m_nonSimpleResult=new Sn(o,i.getStartPointIndex(),n.getStartPointIndex()),!1}}while(n.nextPath())}}return!0}_CheckSelfIntersections(){let e=this.m_geometry.getImpl();this.m_curveStitcher!==null&&(this.m_multiPathStitcher=this.m_editShape.getGeometry(this.m_editShape.getFirstGeometry()),e=this.m_multiPathStitcher.getImpl(),this.generateSortedPairs(e)),this.m_edges.length=0,this.m_lineEdgesRecycle.length=0,this.m_recycledSegIter=e.querySegmentIterator(),this.m_recycledSegIter.setCirculator(!0);const i=new Array(0),n=e.getPointCount();let s=Number.NaN,r=0;for(let o=0,l=2*n;o<l;o++){this.progress_();const c=this.m_pairIndices.read(o),f=this.m_pairs[c];if(1&f)continue;const y=f>>1,_=this.m_xy.read(2*y),x=this.m_xy.read(2*y+1);if(i.length&&(_!==s||x!==r)){if(!this.processBunchForSelfIntersectionTest(i))return!1;i.length=0}i.push(y),s=_,r=x}return!!this.processBunchForSelfIntersectionTest(i)}checkSelfIntersectionsPolylinePlanar(){const e=this.m_geometry.getImpl(),i=[];for(let l=0,c=e.getPathCount();l<c;l++)i.push(e.isClosedPathInXYPlane(l));const n=Crt();let s,r,o;{const l=this.m_pairIndices.read(0),c=this.m_pairs[l]>>1,f=this.m_xy.readPoint2D(2*c),y=this.m_pathsForOGCTests[c];s=i[y],r=e.getPathStart(y),o=e.getPathEnd(y)-1,n.bEndPoint=c===r||c===o,this.m_bOGCRestrictions?n.bBoundary=!s&&n.bEndPoint:n.bBoundary=n.bEndPoint,n.ipath=y,n.x=f.x,n.y=f.y,n.ivertex=c}for(let l=1,c=this.m_pairIndices.size();l<c;l++){const f=this.m_pairIndices.read(l),y=this.m_pairs[f];if(1&y)continue;const _=y>>1,x=this.m_xy.readPoint2D(2*_),S=this.m_pathsForOGCTests[_];let P;S!==n.ipath&&(s=i[S],r=e.getPathStart(S),o=e.getPathEnd(S)-1);const A=_===r||_===o;P=this.m_bOGCRestrictions?!s&&A:A;const D=Prt(x.x,x.y,S,_,P,A);if(D.x===n.x&&D.y===n.y){if(this.m_bOGCRestrictions){if(!(D.bBoundary&&n.bBoundary||D.ipath===n.ipath&&D.bEndPoint&&n.bEndPoint))return this.m_nonSimpleResult=new Sn(10,D.ivertex,n.ivertex),!1}else if(!D.bEndPoint||!n.bEndPoint)return this.m_nonSimpleResult=new Sn(7,D.ivertex,n.ivertex),!1}Trt(n,D)}return!0}checkSelfIntersectionsPolylinePlanar3D(e){return K(0),!1}checkSelfIntersectionsPolygonsOGC(){const e=this.m_geometry.getImpl(),i=[];let n=-1,s=!1;for(let _=0,x=e.getPathCount();_<x;_++)e.isExteriorRingOGC(_)&&(s=!1,n++,_<x-1&&(e.isExteriorRingOGC(_+1)||(s=!0))),i.push(s?n:-1);const r=xrt();{const _=this.m_pairIndices.read(0),x=this.m_pairs[_]>>1,S=this.m_xy.readPoint2D(2*x),P=this.m_pathsForOGCTests[x];r.ipath=P,r.x=S.x,r.y=S.y,r.ivertex=x,r.ipolygon=i[P]}const o=[];for(let _=1,x=this.m_pairIndices.size();_<x;_++){const S=this.m_pairIndices.read(_),P=this.m_pairs[S];if(1&P)continue;const A=P>>1,D=this.m_xy.readPoint2D(2*A),N=this.m_pathsForOGCTests[A],F=wrt(D.x,D.y,N,A,i[N]);if(F.x===r.x&&F.y===r.y){if(F.ipath===r.ipath)return this.m_nonSimpleResult=new Sn(11,F.ivertex,r.ivertex),!1;i[F.ipath]>=0&&i[F.ipath]===i[r.ipath]&&(o.length!==0&&Srt(o.at(-1),r)||o.push({...r}),o.push(F))}Ert(r,F)}if(o.length===0)return!0;const l=new oo(!0);i.fill(-1);let c=-1;const f=new Y;for(let _=0,x=o.length;_<x;_++){const S=o[_];S.x===f.x&&S.y===f.y||(c=l.createList(0),f.x=S.x,f.y=S.y);let P=i[S.ipath];P===-1&&(P=l.createList(2),i[S.ipath]=P),l.addElement(P,c),l.addElement(c,P)}const y=[];for(let _=l.getFirstList();_!==-1;_=l.getNextList(_)){const x=l.getListData(_);if(1&x||!(2&x))continue;let S=-1;for(y.push(_),y.push(-1);y.length;){const P=y.at(-1);y.pop();const A=y.at(-1);y.pop();const D=l.getListData(A);if(1&D){S=2&D?A:P;break}l.setListData(A,1|D);for(let N=l.getFirst(A);N!==-1;N=l.getNext(N)){const F=l.getData(N);F!==P&&(y.push(F),y.push(A))}}if(S!==-1){const P=i.indexOf(S);return this.m_nonSimpleResult=new Sn(12,P,-1),!1}}return!0}_CheckValidRingOrientation(){const e=this.m_multiPathStitcher!==null?this.m_multiPathStitcher.getImpl():this.m_geometry.getImpl();if(e.calculateArea2D()<=0)return this.m_nonSimpleResult=new Sn(8,e.getPathCount()===1?1:-1,-1),0;if(e.getPathCount()===1)return this.m_bOGCRestrictions&&!this.checkSelfIntersectionsPolygonsOGC()?0:4;this.m_pathOrientations=new Tv(e.getPathCount(),0),this.m_pathParentage=new On(e.getPathCount(),-1);let i=-1,n=0;for(let o=0,l=e.getPathCount();o<l;o++){const c=e.calculateRingArea2D(o);if(this.m_pathOrientations.write(o,c<0?0:8),c>0)i=o,n=c;else{if(c===0)return this.m_nonSimpleResult=new Sn(8,o,-1),0;if((i<0||n<Math.abs(c))&&(this.m_nonSimpleResult=new Sn(9,o,-1),this.m_bOGCRestrictions))return 0;this.m_pathParentage.write(o,i)}}this.m_unknownOrientationPathCount=e.getPathCount(),this.m_newEdges.length=0;const s=e.getPointCount();this.m_yScanline=Number.NaN;const r=[];this.m_xyToNode1=new On(s,jt.st_nullNode()),this.m_xyToNode2=new On(s,jt.st_nullNode()),this.m_freeEdges.length=0,this.m_AET.clear(),this.m_AET.setComparator(new Mrt(this));for(let o=0,l=2*s;this.m_unknownOrientationPathCount>0&&o<l;o++){const c=this.m_pairIndices.read(o),f=this.m_pairs[c];if(1&f)continue;const y=f>>1,_=this.m_xy.read(2*y+1);if(_!==this.m_yScanline&&r.length){if(!this.processBunchForRingOrientationTest(r))return 0;r.length=0}r.push(y),this.m_yScanline=_}return this.m_unknownOrientationPathCount>0&&!this.processBunchForRingOrientationTest(r)?0:this.m_bOGCRestrictions?this.m_nonSimpleResult.m_reason!==0?0:this.checkSelfIntersectionsPolygonsOGC()?5:0:this.m_nonSimpleResult.m_reason===0?4:3}processBunchForSelfIntersectionTest(e){if(e.length===1)return!0;for(let l=0,c=e.length;l<c;l++){const f=e[l];this.m_recycledSegIter.resetToVertex(f,-1);const y=this.m_recycledSegIter.previousSegment();this.m_edges.push(this.createEdge(y,f,this.m_recycledSegIter.getPathIndex(),!0)),this.m_recycledSegIter.nextSegment();const _=this.m_recycledSegIter.nextSegment();this.m_edges.push(this.createEdge(_,f,this.m_recycledSegIter.getPathIndex(),!1))}this.m_edges.sort((l,c)=>this.edgeAngleCompare(l,c));let i=this.m_crossOverHelperList.getFirstList();i===-1&&(i=this.m_crossOverHelperList.createList(0)),this.m_crossOverHelperList.reserveNodes(this.m_edges.length);for(let l=0,c=this.m_edges.length;l<c;l++)this.m_crossOverHelperList.addElement(i,l);let n=!0,s=-1,r=-1;for(;n;){n=!1;let l=this.m_crossOverHelperList.getFirst(i);if(l===-1)break;let c=this.m_crossOverHelperList.getNext(l);for(;c!==-1;){const f=this.m_crossOverHelperList.getData(l),y=this.m_crossOverHelperList.getData(c);if(s=this.m_edges[f].m_vertexIndex,r=this.m_edges[y].m_vertexIndex,s!==r)l=c,c=this.m_crossOverHelperList.getNext(l);else if(n=!0,this.m_crossOverHelperList.deleteElement(i,l),l=this.m_crossOverHelperList.getPrev(c),c=this.m_crossOverHelperList.deleteElement(i,c),c===-1||l===-1)break}}const o=this.m_crossOverHelperList.getListSize(i);if(this.m_crossOverHelperList.clear(i),o>0)return this.m_nonSimpleResult=new Sn(7,s,r),!1;for(let l=0,c=e.length;l<c;l++)this.recycleEdge(this.m_edges[l]);return this.m_edges.length=0,!0}processBunchForRingOrientationTest(e){for(let i=0,n=e.length;i<n;i++){const s=e[i];let r=this.m_xyToNode1.read(s);if(r!==jt.st_nullNode()){const o=this.m_AET.getElement(r);this.m_freeEdges.push(o),this.m_AET.deleteNode(r),this.recycleEdge(this.m_edges[o]),this.m_edges[o]=null,this.m_xyToNode1.write(s,jt.st_nullNode())}if(r=this.m_xyToNode2.read(s),r!==jt.st_nullNode()){const o=this.m_AET.getElement(r);this.m_freeEdges.push(o),this.m_AET.deleteNode(r),this.recycleEdge(this.m_edges[o]),this.m_edges[o]=null,this.m_xyToNode2.write(s,jt.st_nullNode())}}for(let i=0,n=e.length;i<n;i++){const s=e[i];this.m_recycledSegIter.resetToVertex(s,-1);const r=this.m_recycledSegIter.previousSegment();if(r.getStartY()>r.getEndY()){const l=this.m_recycledSegIter.getStartPointIndex(),c=this.createEdge(r,s,this.m_recycledSegIter.getPathIndex(),!0);let f;this.m_freeEdges.length>0?(f=this.m_freeEdges.at(-1),this.m_freeEdges.pop(),this.m_edges[f]=c):(f=this.m_edges.length,this.m_edges.push(c));const y=this.m_AET.addElement(f);this.m_xyToNode1.read(l)===jt.st_nullNode()?this.m_xyToNode1.write(l,y):this.m_xyToNode2.write(l,y),3&this.m_pathOrientations.read(this.m_recycledSegIter.getPathIndex())||this.m_newEdges.push(y)}this.m_recycledSegIter.nextSegment();const o=this.m_recycledSegIter.nextSegment();if(o.getStartY()<o.getEndY()){const l=this.m_recycledSegIter.getEndPointIndex(),c=this.createEdge(o,s,this.m_recycledSegIter.getPathIndex(),!1);let f;this.m_freeEdges.length>0?(f=this.m_freeEdges.at(-1),this.m_freeEdges.pop(),this.m_edges[f]=c):(f=this.m_edges.length,this.m_edges.push(c));const y=this.m_AET.addElement(f);this.m_xyToNode1.read(l)===jt.st_nullNode()?this.m_xyToNode1.write(l,y):this.m_xyToNode2.write(l,y),3&this.m_pathOrientations.read(this.m_recycledSegIter.getPathIndex())||this.m_newEdges.push(y)}}for(let i=0,n=this.m_newEdges.length;i<n&&this.m_unknownOrientationPathCount>0;i++){const s=this.m_newEdges[i],r=this.m_AET.getElement(s),o=this.m_edges[r].m_pathIndex;if(!(3&this.m_pathOrientations.read(o))){let l=-1,c=this.m_AET.getPrev(s),f=s,y=0;{let _=-1,x=null,S=-1,P=0;for(;c!==jt.st_nullNode()&&(_=this.m_AET.getElement(c),x=this.m_edges[_],S=x.m_pathIndex,P=this.m_pathOrientations.read(S),!(3&P));)f=c,c=this.m_AET.getPrev(c);c===jt.st_nullNode()?(y=1,c=f):(l=(3&P)==1?S:this.m_pathParentage.read(S),y=x.getRightSide()?0:1,c=this.m_AET.getNext(c))}do{const _=this.m_AET.getElement(c),x=this.m_edges[_],S=x.m_pathIndex;let P=this.m_pathOrientations.read(S);if(!(3&P)){if(y!==x.getRightSide())return this.m_nonSimpleResult=new Sn(8,S,-1),!1;const A=y&&!x.getReversed()?1:2;if(P=-4&P|A,this.m_pathOrientations.write(S,P),A===2&&this.m_nonSimpleResult.m_reason===0){const D=this.m_pathParentage.read(S);if(D!==l&&(this.m_nonSimpleResult=new Sn(9,S,D),this.m_bOGCRestrictions))return!1}if(this.m_unknownOrientationPathCount--,!this.m_unknownOrientationPathCount)return!0}l=(3&P)==1?S:this.m_pathParentage.read(S),f=c,c=this.m_AET.getNext(c),y=y?0:1}while(f!==s)}}return this.m_newEdges.length=0,!0}createEdge(e,i,n,s){let r;return e.getGeometryType()===me.enumLine?r=this.createEdgeLine(e):(r=new jne,r.m_segment=e.clone()),r.m_vertexIndex=i,r.m_pathIndex=n,r.m_flags=0,r.setReversed(s),r}createEdgeLine(e){let i;return this.m_lineEdgesRecycle.length>0?(i=this.m_lineEdgesRecycle.at(-1),this.m_lineEdgesRecycle.pop(),e.copyTo(i.m_segment)):(i=new jne,i.m_segment=e.clone()),i}recycleEdge(e){e.m_segment.getGeometryType()===me.enumLine&&this.m_lineEdgesRecycle.push(e)}static isShortSegment(e,i,n,s){let r=e.calculateLowerLength2D();if(r<=n){let o=!0;if(e.isCurve()&&(r=e.calculateLength2D(),o=r<=n),o){if(i){let l=e.getEndAttributeAsDbl(1,0);Number.isNaN(l)&&(l=0);let c=e.getStartAttributeAsDbl(1,0);return Number.isNaN(c)&&(c=0),Math.abs(c-l)<=s}return!0}return!1}return!1}static isShortSegmentPoints(e,i,n,s,r){if(n)return JQe(e.getXYZ(),i.getXYZ(),s,r);{const o=e.getXY(),l=i.getXY();return Y.sqrDistance(o,l)<=s*s}}removeDegenerateSegmentsFromCurvedPath(e,i,n,s){const r=e.hasAttribute(1),o=e.querySegmentIterator();o.resetToPath(i),K(o.nextPath());const l=this.m_toleranceSimplify.total();let c=!1,f=!0;const y=new Ut,_=new Ut,x=new Y;for(;o.hasNextSegment();){this.progress_();const A=o.nextSegment();if(Nu.isShortSegment(A,r,l,n))if(c){if(A.queryEnd(_),Nu.isShortSegmentPoints(y,_,r,l,n))continue;f&&(s.startPathPoint(y),f=!1),A.queryEnd(y),s.lineToPoint(y),c=!1}else x.assign(A.getStartXY()),A.queryStart(y),c=!0;else if(c)if(A.isCurve()){const D=A.clone();if(D.setCoordsForIntersector(x,A.getEndXY(),!1),D.setStart(y),Nu.isShortSegment(D,r,l,n))continue;s.addSegment(D,f),f=!1,c=!1}else{if(A.queryEnd(_),Nu.isShortSegmentPoints(y,_,r,l,n))continue;f&&(s.startPathPoint(y),f=!1),s.lineToPoint(_),c=!1}else s.addSegment(A,f),f=!1}if(f||!c)return;e.isClosedPath(i)?e.getPointByVal(e.getPathStart(i),y):e.getPointByVal(e.getPathEnd(i)-1,y);const S=s.querySegmentIterator();S.resetToLastPath(),S.resetToLastSegment();const P=s.getDescription().getAttributeCount()>1;for(K(S.previousPath());S.hasPreviousSegment();){const A=S.previousSegment();if(A.isCurve()){const D=A.clone();if(D.setCoordsForIntersector(A.getStartXY(),y.getXY(),!1),!Nu.isShortSegment(D,r,l,n)){P&&D.setEnd(y);const N=S.getEndPointIndex();for(let F=s.getPointCount()-1;F>=N;F--)s.removePoint(F);return void s.addSegment(D,!1)}}else if(A.queryStart(_),!Nu.isShortSegmentPoints(_,y,r,l,n)){const D=S.getEndPointIndex();for(let N=s.getPointCount()-1;N>=D;N--)s.removePoint(N);return void s.lineToPoint(y)}}s.removePath(s.getPathCount()-1)}multipointIsSimpleAsFeature(){if(!this.checkStructure())return 0;const e=this.m_geometry.getImpl();this.m_multiVertexGeom=e;const i=e.getPointCount(),n=new Array(i);for(let s=0;s<i;s++)n[s]=s;n.sort((s,r)=>this.compareVerticesMultiPoint(s,r));for(let s=1;s<i;s++)if(this.compareVerticesMultiPoint(n[s-1],n[s])===0)return this.m_nonSimpleResult=new Sn(5,n[s-1],n[s]),0;return 1}polylineIsSimpleAsFeature(){return this.checkStructure()&&this.checkDegenerateSegments(!0)?1:0}polygonIsSimpleAsFeature(){return this.isSimplePlanarImpl()}multipointSimplifyAsFeature(){let e=this.m_geometry.getImpl();const i=Nu.hasNanZs(e);let n,s=this.m_geometry;i&&(n=this.m_geometry.clone(),e=n.getImpl(),n.replaceNaNs(1,br.getDefaultValue(1)),s=n),this.m_multiVertexGeom=e;const r=e.getPointCount(),o=new Array(r);for(let x=0;x<r;x++)o[x]=x;o.sort((x,S)=>this.compareVerticesMultiPoint(x,S));const l=new Array(r);l.fill(!1);let c=-1;for(let x=0;x<r;x++){const S=o[x];e.getXY(S).isFinite()&&((c<0||this.compareVerticesMultiPoint(c,S)!==0)&&(l[S]=!0),c=S)}const f=this.m_geometry.createInstance();let y=0,_=0;for(let x=0;x<r;x++)l[x]?_=x+1:(y<_&&f.addPoints(s,y,_),y=x+1);return y<_&&f.addPoints(s,y,_),f.getImpl().setIsSimple(1,this.m_toleranceSimplify.total()),f}polylineSimplifyAsFeature(){const e=this.m_geometry.getImpl(),i=e.querySegmentIterator(),n=e.querySegmentIterator(),s=this.m_geometry.createInstance(),r=this.m_geometry,o=e.hasAttribute(1),l=o?tie(this.m_sr,e,!0).total():0,c=[],f=[];let y=null;o&&(y=e.getAttributeStreamRef(1));const _=new Ut,x=e.hasNonLinearSegments(),S=this.m_toleranceSimplify.total();for(;i.nextPath();){if(n.nextPath(),e.getPathSize(i.getPathIndex())<2)continue;if(x&&e.hasNonLinearSegmentsPath(i.getPathIndex())){this.removeDegenerateSegmentsFromCurvedPath(e,i.getPathIndex(),l,s);continue}n.resetToLastSegment();let P=0,A=0,D=!0,N=!0;for(;i.hasNextSegment();){this.progress_();const F=i.nextSegment(),G=n.previousSegment();if(i.getStartPointIndex()>n.getStartPointIndex())break;if(D){const V=i.getStartPointIndex();e.getXY(V).isNAN()||(D=!1,c.push(V))}if(N){const V=n.getEndPointIndex();e.getXY(V).isNAN()||(f.push(V),N=!1)}if(!D){const V=c.at(-1),B=i.getEndPointIndex();if(B-V>1){const W=new Y;W.setSub(e.getXY(V),e.getXY(B)),P=W.length()}else P=F.calculateLength2D();if(P>S)c.push(B),P=0;else if(o){let W=y.read(V);Number.isNaN(W)&&(W=0);let J=y.read(B);Number.isNaN(J)&&(J=0),Math.abs(J-W)>l&&(c.push(B),P=0)}}if(!N){const V=f.at(-1),B=n.getStartPointIndex();if(B-V>1){const W=new Y;W.setSub(e.getXY(V),e.getXY(B)),A=W.length()}else A=G.calculateLength2D();if(A>S)f.push(B),A=0;else if(o){let W=y.read(V);Number.isNaN(W)&&(W=0);let J=y.read(B);Number.isNaN(J)&&(J=0),Math.abs(J-W)>l&&(f.push(B),A=0)}}}if(c.length>0&&f.length>0&&(c.at(-1)<f.at(-1)?c.length>f.length?c.pop():f.pop():(c.at(-1)===f.at(-1)||f.pop(),f.pop())),f.length+c.length>=2){let F=!1;for(let G=0,V=c.length;G<V;G++)r.getPointByVal(c[G],_),F?s.lineToPoint(_):(s.startPathPoint(_),F=!0);for(let G=f.length-1;G>0;G--)r.getPointByVal(f[G],_),F?s.lineToPoint(_):(s.startPathPoint(_),F=!0);r.isClosedPath(i.getPathIndex())?s.closePathWithLine():f.length>0&&(r.getPointByVal(f[0],_),s.lineToPoint(_))}c.length=0,f.length=0}return o&&s.replaceNaNs(1,0),s.getImpl().setIsSimple(1,S),s}polygonSimplifyAsFeature(){return this.simplifyPlanar()}simplifyPlanar(){if(this.m_geometry.getFillRule()===1&&!Af(this.m_knownSimpleResult))return _M(this.m_geometry,this.m_toleranceSimplify,!0,!1,this.m_knownSimpleResult,this.m_progressTracker,0,!0);const e=new Hn;if(e.addGeometry(this.m_geometry),this.m_geometry.hasAttribute(1)&&e.replaceNaNs(1,0),e.removeNaNVertices(),e.getTotalPointCount()!==0){let n=null,s=0,r=0;if(e.hasCurves()){n=new Ru;const o=xe.constructEmpty();this.m_geometry.queryEnvelope(o);const l=$u(this.m_toleranceSimplify.total(),o);s=Up(this.m_toleranceSimplify.total()),r=gf(l,s),Wh(e,l,this.m_toleranceSimplify.total(),12e3,n,null,this.m_progressTracker)}Af(this.m_knownSimpleResult)||nf(e,this.m_toleranceSimplify.add(r),this.m_progressTracker,!0,!1),this.m_geometry.getGeometryType()===me.enumPolygon&&m0(e,e.getFirstGeometry(),this.m_knownSimpleResult,!1,-1,this.m_progressTracker),n!==null&&n.stitchCurves(e,e.getFirstGeometry(),s,!0)}const i=e.getGeometry(e.getFirstGeometry());return i.getGeometryType()===me.enumPolygon&&(i.getImpl().updateOGCFlagsProtected(),i.setFillRule(0)),i.getImpl().setIsSimple(4,this.m_toleranceSimplify.total()),i}progress_(){}static hasNanZs(e){if(e.hasAttribute(1)){const i=e.getAttributeStreamRef(1);for(let n=0,s=e.getPointCount();n<s;n++){const r=i.read(n);if(Number.isNaN(r))return!0}}return!1}compareVerticesForPlanarClustering(e,i,n){if(e===i)return 0;const s=this.m_pairs[e],r=this.m_pairs[i],o=s>>1,l=r>>1,c=this.m_xy.readPoint2D(2*o);c.y+=1&s?this.m_toleranceIsSimpleClustering:-this.m_toleranceIsSimpleClustering;const f=this.m_xy.readPoint2D(2*l);f.y+=1&r?this.m_toleranceIsSimpleClustering:-this.m_toleranceIsSimpleClustering;const y=c.compare(f);if(y===0&&n){const _=this.m_pathsForOGCTests[o]-this.m_pathsForOGCTests[l];return ws(_)}return y}compareVerticesMultiPoint(e,i){if(e===i)return 0;const n=this.m_multiVertexGeom.getXY(e),s=this.m_multiVertexGeom.getXY(i),r=!n.isFinite(),o=!s.isFinite();if(r||o)return r<o?-1:r>o?1:0;if(n.y<s.y)return-1;if(n.y>s.y)return 1;if(n.x<s.x)return-1;if(n.x>s.x)return 1;for(let l=1;l<this.m_attributeCount;l++){const c=this.m_description.getSemantics(l),f=br.getComponentCount(c);for(let y=0;y<f;y++){const _=this.m_multiVertexGeom.getAttributeAsDbl(c,e,y),x=this.m_multiVertexGeom.getAttributeAsDbl(c,i,y),S=vQe(_,x);if(S!==0)return S}}return 0}edgeAngleCompare(e,i){if(e===i)return 0;const n=e.m_segment.getTangent(e.getReversed()?1:0);e.getReversed()&&n.negateThis();const s=i.m_segment.getTangent(i.getReversed()?1:0);i.getReversed()&&s.negateThis();const r=n.getQuarter(),o=s.getQuarter();if(o===r){const l=n.crossProduct(s);return l<0?1:l>0?-1:0}return r<o?-1:1}}class Rc{getOperatorType(){return 10103}accelerateGeometry(e,i,n){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}isSimpleAsFeature(e,i,n,s,r){const o=wB(e,i,n,s,r);return QQe(e.getGeometryType(),o)}isSimplePlanarDONOTUSE(e,i,n,s,r){return E0(brt(e,i,n,s,r))}executeMany(e,i,n,s){return new Art(e,i,n,s)}execute(e,i,n,s){const r=new nh([e]),o=this.executeMany(r,i,n,s).next();return o||xt("null geometry"),o}}class Art extends Aa{constructor(e,i,n,s){super(),this.m_progressTracker=s,this.m_bForceSimplify=n,this.m_index=-1,this.m_inputGeometryCursor=e,this.m_spatialReference=i}next(){const e=this.m_inputGeometryCursor.next();return e?(this.m_index=this.m_inputGeometryCursor.getGeometryID(),this.simplify(e)):null}getGeometryID(){return this.m_index}tock(){return!1}getRank(){return 1}simplify(e){if(e||Je(""),e.getGeometryType()===me.enumGeometryCollection){const i=het(e,-1),n=new Rc().executeMany(i,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker),s=e.createInstance();for(let r=n.next();r!=null;r=n.next())s.addGeometry(r);return s}return sve(e,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker)}}class cx{getOperatorType(){return 10004}supportsCurves(){return!0}accelerateGeometry(e,i,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,n,s){return new krt(e,i,n,s)}execute(e,i,n,s){return Drt(e,i,n,s)}}class krt extends Aa{constructor(e,i,n,s){super(),this.m_progressTracker=s,this.m_index=-1,e||Je(""),this.m_envelope=i,this.m_inputGeometryCursor=e,this.m_spatialRefImpl=n,this.m_tolerance=Js(n,i,!1).total()}next(){let e;return(e=this.m_inputGeometryCursor.next())?(sh(e),this.m_index=this.m_inputGeometryCursor.getGeometryID(),bn(e,this.m_envelope,this.m_tolerance,0,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}function Drt(t,e,i,n){return Cye(t,e,i,Number.NaN,0,n)}function Nrt(t,e,i){const n=new xe;t.queryEnvelope(n);const s=new xe;e.queryEnvelope(s);const r=new xe(s);if(r.inflate(2*i),!r.isIntersecting(n))return 4;const o=t.getGeometryType(),l=e.getGeometryType();if(o===me.enumEnvelope&&n.containsEnvelope(r))return 1;if(l===me.enumEnvelope){const c=new xe(n);if(c.inflate(2*i),s.containsEnvelope(c))return 2}return 0}class tv{constructor(e,i,n,s){this.m_intersectorGeom=null,this.m_sr=null,this.m_dimensionMask=-1,this.m_progressTracker=null,this.m_intersectorGeomType=me.enumUnknown,this.m_geomIntersectorEmptyGeom=null,this.m_intersectorGeom=e,this.m_sr=i,this.m_dimensionMask=n,this.m_progressTracker=s,this.m_intersectorGeomType=e.getGeometryType()}intersect(e){const i=this.tryFastImplementation(e);if(i!==null)return i;const n=gT(this.m_intersectorGeom,e),s=Js(this.m_sr,n,!0).total(),r=xe.constructEmpty();this.m_intersectorGeom.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o),r.inflateCoords(2*s,2*s),r.intersect(o),r.inflateCoords(100*s,100*s);const l=0;let c=bn(this.m_intersectorGeom,r,l,0,this.m_progressTracker),f=bn(e,r,l,0,this.m_progressTracker);return e.getDimension()>this.m_intersectorGeom.getDimension()&&(c=Et(f,f=c)),prt(f,c,this.m_sr,this.m_progressTracker)}intersectEx(e){const i=this.tryFastImplementation(e);if(i!==null){const _=[];return _.length=3,_[i.getDimension()]=i,this.prepareVector(e.getDescription(),this.m_dimensionMask,_)}const n=gT(this.m_intersectorGeom,e),s=Js(this.m_sr,n,!0).total(),r=xe.constructEmpty();this.m_intersectorGeom.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o),r.inflateCoords(2*s,2*s),r.intersect(o),r.inflateCoords(100*s,100*s);const l=0;let c=bn(this.m_intersectorGeom,r,l,0,this.m_progressTracker),f=bn(e,r,l,0,this.m_progressTracker);e.getDimension()>this.m_intersectorGeom.getDimension()&&(c=Et(f,f=c));const y=mrt(f,c,this.m_sr,this.m_progressTracker);return this.prepareVector(e.getDescription(),this.m_dimensionMask,y)}init(e,i,n,s=null){K(0)}static intersectPoints(e,i,n){return frt(e,i,Js(n,gT(e,i),!0))}tryFastImplementation(e){const i=e.getGeometryType();if(this.m_intersectorGeomType===me.enumPoint&&i===me.enumPoint){const c=tv.intersectPoints(e,this.m_intersectorGeom,this.m_sr);if(this.m_dimensionMask!==-1){const f=new Qs({vd:c.getDescription()});return c.isEmpty()||f.add(c),f}return c}if(i===me.enumEnvelope&&this.m_intersectorGeomType===me.enumEnvelope&&(this.m_dimensionMask===-1||this.m_dimensionMask===4)){const c=e,f=this.m_intersectorGeom,y=new ur({copy:c});return y.intersect(f),y}const n=gT(e,this.m_intersectorGeom),s=Js(this.m_sr,n,!0),r=e.isEmpty(),o=this.m_intersectorGeom.isEmpty();let l=r||o;if(!l){const c=Nrt(this.m_intersectorGeom,e,s.total());if(c===4)l=!0;else{if(2&c)return this.m_intersectorGeom;if(1&c)return e}}if(l){const c=ml(i),f=ml(this.m_intersectorGeomType);return c<f?tv.ReturnEmpty(e,r):c>f||c===0&&i===me.enumMultiPoint&&this.m_intersectorGeomType===me.enumPoint?this.ReturnEmptyIntersector():tv.ReturnEmpty(e,r)}if(i===me.enumEnvelope&&ml(this.m_intersectorGeomType)===0||this.m_intersectorGeomType===me.enumEnvelope&&ml(i)===0){const c=i===me.enumEnvelope?e:this.m_intersectorGeom,f=i===me.enumEnvelope?this.m_intersectorGeom:e,y=xe.constructEmpty();return c.queryEnvelope(y),bn(f,y,s.total(),0,this.m_progressTracker)}if(ml(i)===0&&ml(this.m_intersectorGeomType)>0||ml(i)>0&&ml(this.m_intersectorGeomType)===0){if(i===me.enumMultiPoint)return Vne(e,this.m_intersectorGeom,s);if(i===me.enumPoint)return Gne(e,this.m_intersectorGeom,s);if(this.m_intersectorGeomType===me.enumMultiPoint)return Vne(this.m_intersectorGeom,e,s);if(this.m_intersectorGeomType===me.enumPoint)return Gne(this.m_intersectorGeom,e,s);xt("")}return null}tryFastIntersectPolylinePolygon(e,i){return K(0),{}}AnalyseClipSegment(e,i,n){return K(0),0}AnalyseClipSegmenPt(e,i,n){return K(0),0}ReturnEmptyIntersector(){return this.m_geomIntersectorEmptyGeom===null&&(this.m_geomIntersectorEmptyGeom=this.m_intersectorGeom.createInstance()),this.m_geomIntersectorEmptyGeom}static ReturnEmpty(e,i){return i?e:e.createInstance()}prepareVector(e,i,n){let s=0;return 1&i?(n[0]||(n[0]=new Qs({vd:e})),s++):n.shift(),2&i?(n[s]||(n[s]=new vi({vd:e})),s++):n.splice(s,1),4&i?n[s]||(n[s]=new Wt({vd:e})):n.splice(s,1),new nh(n)}}class Ort extends Aa{constructor(e,i,n,s,r){super(),this.m_smallCursor=null,this.m_progressTracker=s,this.m_geomIntersector=i.next(),this.m_intersector=new tv(this.m_geomIntersector,n,r,s),this.m_index=-1,this.m_inputGeoms=e,this.m_dimensionMask=r,this.m_dimensionMask!==-1&&(this.m_dimensionMask<=0||this.m_dimensionMask>7)&&Je("bad dimension mask")}next(){if(!this.m_geomIntersector)return null;let e;if(this.m_smallCursor!==null){if(e=this.m_smallCursor.next(),e)return e;this.m_smallCursor=null}for(;e=this.m_inputGeoms.next();)return sh(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.m_dimensionMask===-1?this.m_intersector.intersect(e):(this.m_smallCursor=this.m_intersector.intersectEx(e),this.m_smallCursor.next());return null}getGeometryID(){return K(0),0}tock(){return K(0),!1}getRank(){return K(0),0}}class ux{getOperatorType(){return 1e4}accelerateGeometry(e,i,n){if(!this.canAccelerateGeometry(e))return!1;Cl(i,e,!0);let s=0;return e.getGeometryType()!==me.enumPolygon&&e.getGeometryType()!==me.enumPolyline||!aM(e)||n===0||(s|=e.getImpl().buildQuadTreeAccelerator(n)?1:0),!!s}canAccelerateGeometry(e){return aM(e)}supportsCurves(){return!0}executeMany(e,i,n,s,r=-1){return new Ort(e,i,n,s,r)}execute(e,i,n,s){if(e.getGeometryType()===me.enumPoint&&i.getGeometryType()===me.enumPoint)return tv.intersectPoints(e,i,n);const r=new nh([e]),o=new nh([i]),l=this.executeMany(r,o,n,s,-1).next();return l||xt("null output"),l}}function ove(t,e,i){return e.m_projector.project(t,i)}function $rt(t,e,i,n,s){t.m_projector.transformInPlaceZ(e,null,i,n,null,s);const r=n.slice(0,i).filter(o=>!o.isNAN());for(let o=0,l=r.length;o<l;++o)n[o].assign(r[o]);return r.length}function ave(t,e,i,n,s){return t.m_projector.transformInPlaceZ(e,null,i,n,null,s)}function mq(t,e,i,n){if(t&&e&&e.isPannable()||Je("fold_into_360_range_geodetic"),t.isEmpty())return t;if(i===4)return bM(t,e,n);let s=t;const r=s.getGeometryType();if(bi(r)){s=bC(t,e);const o=new xe;s.queryEnvelope(o);const l=Js(e,o,!1).total(),c=e.getPannableExtent();let f=Math.floor((o.xmin-c.xmin)/c.width())*c.width()+c.xmin,y=s;for(;f<o.xmax;)f>o.xmin+l&&f<o.xmax-l&&(y=pve(y,e,i,!0,f)),f+=c.width();s=y}else{if(r===me.enumEnvelope){const o=new Wt({vd:s.getDescription()});return o.addEnvelope(s,!1),mq(o,e,i,n)}if(Ds(r)){const o=new vi({vd:s.getDescription()});return o.addSegment(s,!0),mq(o,e,i,n)}}return bM(s,e,n)}function bM(t,e,i){if(t&&e&&e.isPannable()||Je(""),t.isEmpty())return t;let n;const s=t.getGeometryType();if(s===me.enumEnvelope){const o=new Wt({vd:t.getDescription()});o.addEnvelope(t,!1),n=o}else if(Ds(s)){const o=new vi({vd:t.getDescription()});o.addSegment(t,!0),n=o}else n=t;const r=bC(n,e);return r.isEmpty()?r:hx(r,e,0,r!==t,0,i)}function Rrt(t,e,i){if(!e.isPannable()||t.isEmpty())return t;const n=e.getPannableExtent().width(),s=.5*n,r=t.queryInterval(0,0);if(r.width()<s||!rl(t.getGeometryType())){if(Number.isNaN(i))return t;const N=r.getCenter();if(Math.abs(N-i)<=s)return t;{const F=new _i,G=Ev((i-N)/n)*n;F.setShiftCoords(G,0);const V=t.clone();return V.applyTransformation(F),V}}const o=t.getGeometryType(),l=t,c=l.getAttributeStreamRef(0),f=t.clone(),y=f.getAttributeStreamRef(0);let _=0,x=0,S=0,P=bi(o)?0:-1;const A=Ze.constructEmpty();let D=!1;for(let N=0,F=l.getPointCount();N<F;N++){const G=c.read(2*N);N===x&&(bi(o)?(P===0&&Number.isNaN(i)&&(D=!0),P>0&&Number.isNaN(i)&&(i=A.getCenter(),D=!1),x=l.getPathEnd(P),P++):x=l.getPointCount(),Number.isNaN(i)?S=G:(S=i,_=0));let V=G-S;Math.abs(V)>s&&(V=Ev(V/n)*n,_-=V,Math.abs(_)<.1*n&&(_=0));const B=G+_;y.write(2*N,B),D&&A.mergeCoordinate(B),S=G}return f.notifyModified(),f}const Lrt="missing implementation";function Frt(t,e,i,n){const s=e.getCoordinateSystemType();if(s===0){const l=new Wl;return e.queryPrecisionDescriptor(l),Bne(t,l,e,i)}let r=t;n!==2&&n!==3||!e.isPannable()||(r=bM(r,e,i));const o=new Wl;if(e.queryPrecisionDescriptor(o),r=Bne(r,o,e,i),n===0||r.isEmpty())return r;if(s===1){if(n===1){const l=new xe;r.queryLooseEnvelope(l);const c=e.getPannableExtent(),f=.01*c.width();return c.xmin=l.xmin-f,c.xmax=l.xmax+f,new cx().execute(r,c,e,i)}return r}if(s===2){const l=e.getPCSHorizon();if(n===1||n===2){const c=new ux().execute(r,l,e,i);return c===l?c.clone():c}return r}if(s===3)return r;xt(Lrt)}function Bne(t,e,i,n){const s=e.getXYGridRange(),r=t.hasAttribute(1),o=t.hasAttribute(2);let l=new Ze,c=new Ze;r&&(l=e.getZGridRange()),o&&(c=e.getMGridRange());let f=new cx().execute(t,s,i,n);if(r){const y=f.queryInterval(1,0);l.contains(y)||(t===f&&(f=f.clone()),Bz(f,l,1,0))}if(o){const y=f.queryInterval(2,0);c.contains(y)||(t===f&&(f=f.clone()),Bz(f,c,2,0))}return f}class zrt{constructor(e){this.m_inputPCSHorizonClipOption=0,this.m_outputPCSHorizonClipOption=0,this.m_bDontGeonormalizePolygon=!1,this.m_bClipOutCurvedPoles=!1,this.m_bNormalizeOutputGeometry=!1,this.m_bDontHackPolesInGeogToGeog=!1,this.m_centralMeridianOfOutputGCS=0,this.m_densificationStepInput=0,e||Je(""),this.m_projTransform=e,this.m_bClipOutCurvedPoles=!1;const i=this.m_projTransform.getExtendedParamsImpl();this.m_bNormalizeOutputGeometry=i.normalizeResultGeometry,this.m_bNormalizeOutputGeometry&&(i.legacyHorizonClipping?this.m_bNormalizeOutputGeometry=!1:this.m_projTransform.getOutputSR().isPannable()||(this.m_bNormalizeOutputGeometry=!1)),i.clipWithInputHorizon?(this.m_inputPCSHorizonClipOption=0,!i.legacyHorizonClipping&&this.m_projTransform.getInputSR().isPannable()&&(this.m_inputPCSHorizonClipOption=this.m_bNormalizeOutputGeometry?4:2)):this.m_inputPCSHorizonClipOption=1,i.clipWithOutputHorizon?(this.m_outputPCSHorizonClipOption=0,!i.legacyHorizonClipping&&this.m_projTransform.getOutputSR().isPannable()&&(this.m_outputPCSHorizonClipOption=this.m_bNormalizeOutputGeometry?4:2)):this.m_outputPCSHorizonClipOption=1,this.m_centralMeridianOfOutputGCS=i.centralMeridianOfOutputGCS,this.m_densificationStepInput=i.densificationStep;const n=this.m_projTransform.getExtendedParamsInternal();this.m_bDontGeonormalizePolygon=n.hasFlag(2147483648),this.m_bDontHackPolesInGeogToGeog=n.hasFlag(1073741824),this.m_bClipOutCurvedPoles=n.hasFlag(536870912)}project(e,i){if(this.m_projTransform.isIdentity()||e.isEmpty())return e;const n=e.getGeometryType();if(n===me.enumPoint)return this.projectPoint(e,i);const s=this.m_projTransform.getInputSR().getCoordinateSystemType(),r=this.m_projTransform.getOutputSR().getCoordinateSystemType();if(this.m_projTransform.getInputSR(),this.m_projTransform.getOutputSR(),s===0&&s===r){const o=qrt(),l=e.clone();return l.applyTransformation(o),l}switch(n){case me.enumPolyline:case me.enumPolygon:return this.projectMultiPath(e,i);case me.enumMultiPoint:return this.projectMultiPoint(e,i);case me.enumEnvelope:return this.projectEnvelope(e,i);case me.enumGeometryCollection:return this.projectGeometryCollection(e,i);default:xt("")}}projectPoint(e,i){const n=[e.getXY()];let s,r=null;(s=e.hasAttribute(1))&&(r=[e.getZ()]),this.transformInPlaceZ(n,r,1,n,r,null);const o=e.clone();return o.setXY(n[0]),s&&o.setZ(r[0]),o}projectMultiPoint(e,i){let n=new Qs({copy:e});const s=this.m_projTransform.getInputSR(),r=this.m_projTransform.getOutputSR(),o=s.getCoordinateSystemType(),l=r.getCoordinateSystemType();if(o===3&&K(0),n=mO(n,s,this.m_inputPCSHorizonClipOption,i),n.isEmpty())return n;o===2&&yve(s,0,n),_ve(this.m_projTransform,n,!1);let c=0;l===3&&K(0);const f=l===2;return f?c=r.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(c=this.m_centralMeridianOfOutputGCS),f&&this.m_outputPCSHorizonClipOption!==0||(n=hx(n,EO(r),c,!1,0,i)),f&&(n=fO(n,r,this.m_outputPCSHorizonClipOption,i),gve(r,n,this.m_bNormalizeOutputGeometry),n.isEmpty()),n}projectMultiPath(e,i){const n=e.getGeometryType();return n===me.enumPolygon?this.projectPolygon(e,i):n===me.enumPolyline?this.projectPolyline(e,i):void xt("project_multi_path_")}projectEnvelope(e,i){this.m_projTransform.getInputSR(),this.m_projTransform.getOutputSR();const n=this.m_projTransform.isVertical()&&e.hasAttribute(1);let s=Ze.constructEmpty();if(n&&(s=e.queryInterval(1,0)),s.width()>0){const r=e.clone();r.setInterval(1,0,s.vmin,s.vmin);const o=this.projectEnvelopeHelper(r,i);r.setInterval(1,0,s.vmax,s.vmax);const l=this.projectEnvelopeHelper(r,i);return o.merge(l),o}return this.projectEnvelopeHelper(e,i)}projectPolygon(e,i){K(e.getGeometryType()===me.enumPolygon),K(!this.m_projTransform.isIdentity()),K(!e.isEmpty());const n=this.m_projTransform.getInputSR(),s=this.m_projTransform.getOutputSR(),r=n.getCoordinateSystemType(),o=s.getCoordinateSystemType(),l=new Wt({copy:e});r===3&&K(0),o===3&&K(0);const c=r===2,f=o===2,y=c?n.getGCS():n,_=f?s.getGCS():s,x=!f&&!this.m_bDontHackPolesInGeogToGeog;let S=!1,P=mO(l,n,this.m_inputPCSHorizonClipOption,i);if(P.isEmpty())return P;let A=this.m_densificationStepInput;const D=!Number.isNaN(A);let N;D&&(P=new t0().execute(P,A,0,0,i));let F=f?s.getPCSInfo():null,G=Number.NaN;c&&(G=n.getCentralMeridian());const V=s.getGCSSplitLines()!==null;if(this.m_bDontGeonormalizePolygon){const B=P;if(c&&(TT(n,G,B),D)){const W=n.getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/W}if(IT(this.m_projTransform,B,x),D){const W=n.getGCS().getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/W}N=B}else{let B=new vi({vd:P.getDescription()});if(B.addAndExplicitlyOpenAllPaths(P,!1),c){if(TT(n,G,B),D){const ne=n.getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/ne}if(this.m_bClipOutCurvedPoles){const ne=n.getPCSInfo(),oe=ne.getSouthPoleGeometry()===Za.PE_POLE_LINE_CURVED,pe=ne.getNorthPoleGeometry()===Za.PE_POLE_LINE_CURVED;if(oe||pe){const ce=xe.constructEmpty();B.queryLooseEnvelope(ce),ce.inflateCoords(1,1);const ue=89.9999*y.getOneDegreeGCSUnit();oe&&(ce.ymin=-ue),pe&&(ce.ymax=ue),B=Oit(B,ce,y,0,0,i)}}}if(IT(this.m_projTransform,B,x),D){const ne=EO(n).getUnitsPerMillimeter();A*=EO(s).getUnitsPerMillimeter()/ne}let W=Number.NaN;f?(F=s.getPCSInfo(),W=s.getCentralMeridian()):Number.isNaN(this.m_centralMeridianOfOutputGCS)||(W=this.m_centralMeridianOfOutputGCS);let J=PT(n)|PT(s),re=10*_.getTolerance(0);this.m_bDontHackPolesInGeogToGeog&&(J=3,re=10*_.getTolerance(0)),N=Lot(P,n,B,_,W,i,J,re,this.m_bNormalizeOutputGeometry),J=0}if(V&&(K(!s.isPannable()),N=ise(N,s,i)),f){if(!S){const B=_.getPannableExtent().width();if(N.queryInterval(0,0).width()>=B-10*_.getTolerance(0)){const W=F.getNorthPoleLocation(),J=F.getSouthPoleLocation(),re=F.getNorthPoleGeometry(),ne=F.getSouthPoleGeometry();let oe=0;re===Za.PE_POLE_POINT&&W!==Za.PE_POLE_OUTSIDE_BOUNDARY&&(oe=1),ne===Za.PE_POLE_POINT&&J!==Za.PE_POLE_OUTSIDE_BOUNDARY&&(oe|=2),S||(S=oe!==0)}}N=fO(N,s,this.m_outputPCSHorizonClipOption,i),D&&(N=new t0().execute(N,A,0,0,i)),sse(s,N,this.m_bNormalizeOutputGeometry)}return N.isEmpty()||S&&(N=new Rc().execute(N,s,!1,i)),N}projectPolyline(e,i){K(e.getGeometryType()===me.enumPolyline),K(!this.m_projTransform.isIdentity()),K(!e.isEmpty());const n=this.m_projTransform.getInputSR(),s=this.m_projTransform.getOutputSR(),r=n.getCoordinateSystemType(),o=s.getCoordinateSystemType(),l=new vi({copy:e});r===3&&K(0),o===3&&K(0);const c=r===2,f=o===2;c&&n.getGCS();const y=f?s.getGCS():s,_=!f&&!this.m_bDontHackPolesInGeogToGeog;let x=mO(l,n,this.m_inputPCSHorizonClipOption,i);if(x.isEmpty())return x;let S=Number.NaN;c&&(S=n.getCentralMeridian());const P=s.getGCSSplitLines()!==null;let A=this.m_densificationStepInput;const D=!Number.isNaN(A);let N;if(D&&(x=new t0().execute(x,A,0,0,i)),this.m_bDontGeonormalizePolygon){if(c&&(TT(n,S,x),D)){const F=n.getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/F}if(IT(this.m_projTransform,x,_),D){const F=n.getGCS().getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/F}N=x}else{const F=new vi({vd:x.getDescription()});if(F.addAndExplicitlyOpenAllPaths(x,!1),c&&(TT(n,S,F),D)){const W=n.getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/W}if(IT(this.m_projTransform,F,_),D){const W=n.getGCS().getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/W}let G=Number.NaN;f?G=s.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(G=this.m_centralMeridianOfOutputGCS);let V=PT(n)|PT(s),B=10*y.getTolerance(0);this.m_bDontHackPolesInGeogToGeog&&(V=3,B=0),N=Fot(x,n,F,y,G,i,V,B,this.m_bNormalizeOutputGeometry),V=0}return P&&(K(!s.isPannable()),N=ise(N,s,i)),f&&(N=fO(N,s,this.m_outputPCSHorizonClipOption,i),D&&(N=new t0().execute(N,A,0,0,i)),sse(s,N,this.m_bNormalizeOutputGeometry)),N.isEmpty(),N}projectGeometryCollection(e,i){return K(0),{}}tryProjectMultiVertexSimple(e,i){return K(0),{}}projectEnvelopeHelper(e,i){const n=(e.height()+e.width())/400;if(n!==0){const s=new t0().execute(e,n,0,0,i),r=this.projectMultiPath(s,i),o=new ur({vd:e.getDescription()});if(r.isEmpty()){const l=Math.min(e.height(),e.width()),c=Cl(this.m_projTransform.getInputSR(),e,!0).total();if(l>100*c){const P=xe.constructEmpty(),A=Js(this.m_projTransform.getOutputSR(),P,!0).total(),D=this.m_projTransform.getInputSR().getOneMeter()/this.m_projTransform.getOutputSR().getOneMeter();if(l>100*Math.max(c,A*D))return o}const f=new vi;f.addAndExplicitlyOpenAllPaths(s,!1),this.projectMultiPath(f,i).queryEnvelope(o);const y=new Qs({vd:e.getDescription()});y.reserve(4);const _=new Ut;for(let P=0;P<4;P++)e.queryCornerByVal(P,_),y.add(_);const x=this.projectMultiPoint(y,i),S=new ur;return x.queryEnvelope(S),o.merge(S),o}return r.queryEnvelope(o),o}{const s=e.getCenterXY(),r=new Ut(s),o=this.projectPoint(r,i),l=new ur({vd:e.getDescription()});if(o.isEmpty())l.setEmpty();else{e.copyTo(l);const c=o.getXY();l.setCoords(c.x,c.y,c.x,c.y)}return l}}transformInPlace(e,i,n,s){return K(0),0}transformInPlaceZ(e,i,n,s,r,o){if(this.m_projTransform.isIdentity())return e!==s&&eM(s,e,n),i!==r&&fs(r,i,0,0,n),n;const l=this.m_projTransform,c=l.getInputSR(),f=l.getOutputSR(),y=c.getCoordinateSystemType(),_=f.getCoordinateSystemType();if(y===0&&y===_){const A=c.getHorzUnitFactor()/f.getHorzUnitFactor(),D=new _i;return D.setScaleCoords(A,A),D.transformPoints2D(e,n,s),l.isVertical()&&K(0),n}y===3&&Bn("image: transform_in_place_"),_===3&&Bn("image: transform_in_place_"),Got(e,n,s,c,this.m_inputPCSHorizonClipOption),r!==i&&fs(r,i,0,0,n),y===2&&CB(c,0,s,n),dx(this.m_projTransform,s,r,n,!1);let x=0;const S=_===2;if(S?x=f.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(x=this.m_centralMeridianOfOutputGCS),S&&this.m_outputPCSHorizonClipOption!==0||fve(s,n,f.getGCS(),x),S){if(!yq(s,n,f,this.m_outputPCSHorizonClipOption))for(let A=0;A<n;++A)s[A].setNAN();EB(f,s,n,!1)}let P=n;for(let A=0;A<n;++A)s[A].isNAN()&&(r&&(r[A]=Number.NaN),P--);return P}}function PT(t){if(t.getCoordinateSystemType()!==2)return 0;let e=0;const i=t.getPCSInfo(),n=i.getNorthPoleLocation(),s=i.getSouthPoleLocation(),r=i.getNorthPoleGeometry(),o=i.getSouthPoleGeometry();return r===Za.PE_POLE_POINT&&n!==Za.PE_POLE_OUTSIDE_BOUNDARY&&(e=1),o===Za.PE_POLE_POINT&&s!==Za.PE_POLE_OUTSIDE_BOUNDARY&&(e|=2),e}function qrt(t,e){return K(0),{}}class w2{getOperatorType(){return 10300}supportsCurves(){return!0}accelerateGeometry(e,i,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,n){return!i||i.isIdentity()?e:new Vrt(e,i,n)}execute(e,i,n){return i.isIdentity()?e:ove(e,i,n)}transform(e,i,n,s,r=!0){return r?$rt(e,i,n,s,null):ave(e,i,n,s,null)}transform3D(e,i,n,s,r=!0){return K(0),0}foldInto360Range(e,i){return bM(e,i,null)}foldInto360RangeGeodetic(e,i,n){return mq(e,i,n,null)}normalizeGeometryEx(e,i,n,s,r=0){return fot(e,i,n,s,r)}normalizeGeometry(e,i,n){return Rrt(e,i,n)}clipToSpatialReference(e,i,n,s=0){return Frt(e,i,n,s)}}class Vrt extends Aa{constructor(e,i,n){super(),this.m_projTrans=i,this.m_progressTracker=n,this.m_index=-1,e||Je(""),this.m_inputGeoms=e}next(){const e=this.m_inputGeoms.next();return e!=null?(ex(e),sh(e),this.m_index=this.m_inputGeoms.getGeometryID(),ove(e,this.m_projTrans,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return K(0),!1}getRank(){return K(0),0}}function Hne(t,e,i,n,s,r,o=!1){t||Je("Geometry.Geodetic_densify.densify");let l=t.getGeometryType();if(sh(t),ex(t),t.isEmpty()||V0(l))return t;const c=new Hrt;c.m_sr=e,c.m_gcs=e.getGCS(),c.m_transform=c.m_gcs!==e?e.getSRToGCSTransform():null,c.m_progressTracker=r;const f=R5();let y,_,x;if(c.m_gcs.querySpheroidData(f),c.m_a=f.majorSemiAxis,c.m_eSquared=f.e2,c.m_rpu=c.m_gcs.getUnit().getUnitToBaseFactor(),c.m_gcsTolerance=c.m_gcs.getTolerance(0),c.m_radTolerance=c.m_gcsTolerance*c.m_rpu,c.m_maxLength=n,c.m_maxDeviation=s,c.m_curveType=i,l===me.enumEnvelope){const S=new Wt({vd:t.getDescription()});S.addEnvelope(t,!1),y=S,l=me.enumPolygon}else if(Ds(l)){const S=new vi({vd:t.getDescription()});S.addSegment(t,!0),y=S,l=me.enumPolyline}else y=t;if(c.m_curveType!==4){if(_=c.m_transform&&!c.m_transform.isIdentity()?new w2().execute(y,c.m_transform,r):bC(y,c.m_gcs),_.isEmpty())return _;_=Grt(c.m_rpu,_);let S=c.geodeticDensify(_);o||(S=new w2().foldInto360RangeGeodetic(S,c.m_gcs,c.m_curveType)),x=c.m_transform&&!c.m_transform.isIdentity()?new w2().execute(S,c.m_transform.getInverse(),r):S}else{let S;if(e.isPannable())S=bC(y,e);else{const P=e.getPCSHorizon();S=new ux().execute(y,P,e,r),S===P&&(S=P.clone())}if(_=S,_.isEmpty())return _;x=c.shapePreservingDensify(_)}return x}function Grt(t,e){const i=new xe;if(e.queryLooseEnvelope(i),i.width()*t<Math.PI)return e;let n=!1;const s=e.querySegmentIterator(),r=new Y,o=new Y;for(;s.nextPath();)for(;s.hasNextSegment();){const P=s.nextSegment();if(r.setCoordsPoint2D(P.getStartXY()),o.setCoordsPoint2D(P.getEndXY()),r.scale(t),o.scale(t),Math.abs(r.x-o.x)>Math.PI){if(!Une(r,o)){n=!0;break}if(Math.abs(r.x-o.x)>2*Math.PI){n=!0;break}}}if(!n)return e;const l=e.createInstance();l.reserve(e.getPointCount());const c=e.getDescription().getAttributeCount()>1,f=new Y,y=new Y,_=new Y(0,0),x=new Y(0,0),S=new Ut;for(s.resetToFirstPath();s.nextPath();){let P=Number.NaN,A=0;for(;s.hasNextSegment();){const D=s.nextSegment();if(r.setCoordsPoint2D(D.getStartXY()),o.setCoordsPoint2D(D.getEndXY()),r.scale(t),o.scale(t),Number.isNaN(P)?(A=By(r.x,Number.NaN,A),_.setCoordsPoint2D(r)):_.setCoordsPoint2D(x),P=_.x,Une(r,o)){if(o.x-r.x>2*Math.PI)for(;o.x-r.x>2*Math.PI;)o.x-=2*Math.PI;else if(o.x-r.x<2*-Math.PI)for(;o.x-r.x<2*-Math.PI;)o.x+=2*Math.PI;A=By(o.x,Number.NaN,A),x.setCoordsPoint2D(o)}else f.setCoordsPoint2D(o),Krt(f),A=By(f.x,P,A),x.setCoords(A+f.x,f.y);if(Math.abs(x.x-o.x)<.5&&x.setCoordsPoint2D(o),c)D.queryCoord(0,S),y.setCoordsPoint2D(_),y.scale(1/t),S.setXY(y),s.isFirstSegmentInPath()?l.startPathPoint(S):l.lineToPoint(S),s.isLastSegmentInPath()&&!s.isPathClosed()&&(D.queryCoord(1,S),y.setCoordsPoint2D(x),y.scale(1/t),S.setXY(y),l.lineToPoint(S));else{s.isFirstSegmentInPath()&&l.insertPath2D(-1,null,0,0,!0);const N=l.getPathCount()-1;y.setCoordsPoint2D(_),y.scale(1/t),l.insertPoint2D(N,-1,y),s.isLastSegmentInPath()&&!s.isPathClosed()&&(y.setCoordsPoint2D(x),y.scale(1/t),l.insertPoint2D(N,-1,y))}}}return l}function Une(t,e){return!(!vn(t.y,Cn)||!vn(e.y,Cn))||!(!vn(t.y,-Cn)||!vn(e.y,-Cn))}function jrt(t,e){return!(!vn(t.y,Cn)||vn(e.y,Cn))||!(!vn(t.y,-Cn)||vn(e.y,-Cn))}function Brt(t,e){return!(!vn(e.y,Cn)||vn(t.y,Cn))||!(!vn(e.y,-Cn)||vn(t.y,-Cn))}class Hrt{constructor(){this.m_sr=null,this.m_gcs=null,this.m_transform=null,this.m_progressTracker=null,this.m_a=0,this.m_eSquared=0,this.m_rpu=0,this.m_gcsTolerance=0,this.m_radTolerance=0,this.m_maxLength=0,this.m_maxDeviation=0,this.m_curveType=0}geodeticDensify(e){const i=e.createInstance(),n=e.querySegmentIterator(),s=[],r=[],o=new Qt,l=e.getDescription().getAttributeCount()>1;for(;n.nextPath();){const c=[0];for(;n.hasNextSegment();){const f=n.nextSegment(),y=f.getStartXY(),_=f.getEndXY();y.scale(this.m_rpu),_.scale(this.m_rpu);const x=new Y,S=new Y,P=y.compare(_)>0;Wrt(P,y,_,x,S),s.length=0,r.length=0,this.m_maxLength>0?Urt(this.m_a,this.m_eSquared,this.m_curveType,x,S,this.m_maxLength,this.m_maxDeviation,this.m_radTolerance,null,null,l?r:null,s,c):Yrt(),P&&Zne(null,null,l?r:null,s),s[0].setCoordsPoint2D(f.getStartXY()),s.at(-1).setCoordsPoint2D(f.getEndXY());const A=1/this.m_rpu;for(let D=1,N=s.length-1;D<N;D++)s[D].scale(A);if(l){const D=Kne(P,f,o);Xne(n.isFirstSegmentInPath(),n.isLastSegmentInPath()&&!n.isPathClosed(),f,D,r,s,i)}else Yne(n.isFirstSegmentInPath(),n.isLastSegmentInPath()&&!n.isPathClosed(),s,i)}}return i}shapePreservingDensify(e){const i=e.createInstance(),n=e.querySegmentIterator(),s=[],r=[],o=new Qt,l=e.getDescription().getAttributeCount()>1;for(;n.nextPath();)for(;n.hasNextSegment();){const c=n.nextSegment(),f=c.getStartXY(),y=c.getEndXY(),_=f.compare(y)>0,x=Kne(_,c,o);s.length=0,r.length=0,Xrt(this.m_a,this.m_eSquared,this.m_rpu,x,this.m_sr,this.m_maxLength,this.m_maxDeviation,l?r:null,s),_&&Zne(null,null,l?r:null,s),l?Xne(n.isFirstSegmentInPath(),n.isLastSegmentInPath()&&!n.isPathClosed(),c,x,r,s,i):Yne(n.isFirstSegmentInPath(),n.isLastSegmentInPath()&&!n.isPathClosed(),s,i)}return i}}function Yne(t,e,i,n){t&&n.insertPath2D(-1,null,0,0,!0);const s=n.getPathCount()-1;n.insertPointsFromPoints(s,-1,i,0,i.length-1,!0),e&&n.insertPoint2D(s,-1,i.at(-1))}function Xne(t,e,i,n,s,r,o){o.reserve(o.getPointCount()+r.length-1);const l=new Ut;if(i.queryStart(l),t?o.startPathPoint(l):o.lineToPoint(l),r.length>2){const c=n.calculateLength2D();for(let f=1;f<r.length-1;f++){const y=n.lengthToT(s[f]*c);n.queryCoord(y,l),l.setXY(r[f]),o.lineToPoint(l)}}e&&(i.queryEnd(l),o.lineToPoint(l))}function Urt(t,e,i,n,s,r,o,l,c,f,y,_,x){const S={stack:[],error:void 0,hasError:!1};try{const P=sc(S,new Zh,!1),A=sc(S,new Zh,!1),D=sc(S,new Zh,!1);B0.geodeticDistance(t,e,n.x,n.y,s.x,s.y,D,P,A,i);const N=D.val,F=P.val,G=A.val;let V=F,B=G;V<0&&(V+=2*Math.PI),B<0&&(B+=2*Math.PI),c&&(c[0]=V),f&&(f[0]=B);let W=Number.NaN,J=Number.NaN;if(y!==null){const we=Sse.q90(t,e),Fe=Sse.q(t,e,n.y);W=(we-Fe)/N,J=(we+Fe)/N}const re=jrt(n,s),ne=Brt(n,s),oe=re||ne,pe=Zrt(n,s,l),ce=sc(S,new fQe(new Zh,new Zh),!1),ue=new Y,se=new Y,de=new Y;x[0]=By(n.x,Number.NaN,x[0]);let Se=x[0];if(N<=r)return _.push(n.clone()),x[0]=By(s.x,Number.NaN,x[0]),y!=null&&y.push(0),oe?(re&&Jne(n,s,y,_),ne&&Qne(n,s,y,_)):pe?ese(n,s,F,W,J,y,_):o>0&&(se.setCoords(n.x-Se,n.y),ue.setCoords(s.x-x[0],s.y),Se=Wne()),_.push(s.clone()),N;const Pe=1+Math.ceil(N/r),Re=N/(Pe-1),$e=new Y;_.push(n.clone()),$e.setCoordsPoint2D(n),se.setCoords(n.x-x[0],n.y),y!==null&&y.push(0);for(let we=1;we<Pe;we++){let Fe;if(we<Pe-1){const it=we*Re;B0.geodeticCoordinate(t,e,n.x,n.y,it,F,ce.at(0),ce.at(1),i),ue.setCoords(ce.at(0).val,ce.at(1).val),x[0]=By(ue.x,$e.x,x[0]),de.setCoords(x[0]+ue.x,ue.y),Fe=we/(Pe-1)}else x[0]=By(s.x,Number.NaN,x[0]),ue.setCoords(s.x-x[0],s.y),de.setCoordsPoint2D(s),Fe=1;oe?(we===1&&re&&Jne(n,de,y,_),we===Pe-1&&ne&&Qne($e,s,y,_)):pe?lve($e,de,l)&&(n.x<s.x?$e.x>de.x&&(x[0]+=2*Math.PI,de.setCoords(x[0]+ue.x,ue.y)):$e.x<de.x&&(x[0]-=2*Math.PI,de.setCoords(x[0]+ue.x,ue.y)),ese($e,de,F,W,J,y,_)):o>0&&Wne(),_.push(de.clone()),y!=null&&y.push(Fe),$e.setCoordsPoint2D(de),se.setCoordsPoint2D(ue),Se=x[0]}return N}catch(P){S.error=P,S.hasError=!0}finally{_m(S)}}function Yrt(t,e,i,n,s,r,o,l,c,f){K(0)}function Wne(t,e,i,n,s,r,o,l,c,f,y,_,x,S,P){return K(0),0}function dO(t,e,i,n){const s=vl(t,e,i),r=vl(t,e,n);return ii.distance(s,r)}function Xrt(t,e,i,n,s,r,o,l,c){const f=n.isCurve(),y=Dit(t,e)*Math.PI*179/180;let _=r;r>0&&!(r>y)||(_=y),_=nne(t,e,_);let x=o;!f||x>0||(x=.001);const S=x>0;let P=Number.NaN;S&&(P=nne(t,e,x));const A=s.getPECoordSys(),D=s.getCoordinateSystemType()===1,N=s.getTolerance(0),F=n.getStartXY(),G=n.getEndXY(),V=new Y,B=new Y;if(D)V.setCoordsPoint2D(F),V.scale(i),B.setCoordsPoint2D(G),B.scale(i);else{const de=[F.x,F.y,G.x,G.y];tl.projToGeog(A,2,de),V.setCoords(de[0],de[1]),V.scale(i),B.setCoords(de[2],de[3]),B.scale(i)}let W=0,J=0;const re=[],ne=[],oe=[];re.push(G.clone()),ne.push(B.clone()),oe.push(1),c.push(F.clone()),l!==null&&l.push(J);const pe=s.isPannable(),ce=F.clone(),ue=[.5,.33333333333333337,.6666666666666666,.16666666666666669,.8333333333333333];let se=5;for(f||(S?(ue[0]=.5,ue[1]=.25,ue[2]=.75,se=3):se=1);ne.length>0;){const de=re.at(-1).clone();B.assign(ne.at(-1));const Se=oe.at(-1);let Pe=!1,Re=Number.NaN;const $e=dO(t,e,V,B);let we=_>=$e&&Math.abs(V.y-B.y)<.9*Math.PI;D&&we&&(we=Math.abs(V.x-B.x)<.9*Math.PI);const Fe=new Y,it=new Y;let _t=!1;if(f||S||!we||we&&(_t=!0),n.calculateSubLength(J,Se)<=N&&(_t=!0),!_t)for(let ot=0;ot<se;ot++){const ut=Hi(J,Se,ue[ot]),Pt=new Y;n.queryCoord2D(ut,Pt);const Vt=new Y;if(D)Vt.setCoords(Pt.x*i,Pt.y*i);else{const Ft=[Pt.x,Pt.y];tl.projToGeog(A,1,Ft),Vt.setCoords(Ft[0]*i,Ft[1]*i)}if(ot===0&&(Re=ut,Fe.setCoordsPoint2D(Pt),it.setCoordsPoint2D(Vt),!we)){Pe=!0;break}if(D&&Math.abs(V.x-Vt.x)>=Math.PI){Pe=!0;break}if(_<dO(t,e,V,Vt)){Pe=!0;break}if(S){const Ft=Pit(t,e,V,B,ue[ot]),Nt=Ft.clone();if(D?(Nt.x/=i,Nt.y/=i):(Nt.x/=i,Nt.y/=i,ave(s.getGCSToSRTransform(),[Nt],1,[Nt],null)),Nt.isNAN()){const Wi=vl(t,e,Vt),hn=vl(t,e,V),ps=vl(t,e,B),{first:Yn,second:fr}=ine(t,e,Wi,hn,ps,2);if(fr>P){Pe=!0;break}}else{if(pe){const Yn=s.getPannableExtent().width(),fr=Hi(n.getStartX(),n.getEndX(),.5);for(;Nt.x<fr-.5*Yn;)Nt.x+=Yn;for(;Nt.x>=fr+.5*Yn;)Nt.x-=Yn}const Wi=n.getClosestCoordinateOnInterval(Nt,new Ze(J,Se),-1),hn=n.getCoord2D(Wi);if(!D){const Yn=[hn.x,hn.y];tl.projToGeog(A,1,Yn),hn.x=Yn[0],hn.y=Yn[1]}hn.x*=i,hn.y*=i;let ps=dO(t,e,hn,Ft);if(ps>P){if(ps<4*P){const Yn=vl(t,e,hn),fr=vl(t,e,V),fo=vl(t,e,B),{first:sn,second:ye}=ine(t,e,Yn,fr,fo,2);ps=ye}if(ps>P){Pe=!0;break}}}}}Pe?(re.push(Fe.clone()),ne.push(it.clone()),oe.push(Re)):(re.pop(),ne.pop(),oe.pop(),c.push(de.clone()),W+=$e,l!==null&&l.push(W),ce.setCoordsPoint2D(de),V.setCoordsPoint2D(B),J=Se)}if(l!==null){const de=1/W;for(let Se=0;Se<l.length;Se++)l[Se]*=de}}function Zne(t,e,i,n){n.reverse(),i!==null&&i.reverse()}function Wrt(t,e,i,n,s){t?(n.setCoordsPoint2D(i),s.setCoordsPoint2D(e)):(n.setCoordsPoint2D(e),s.setCoordsPoint2D(i))}function Kne(t,e,i){return t?(i.create(e.getGeometryType()),e.copyTo(i.get()),i.get().reverse(),i.get()):e}function By(t,e,i){if(Number.isNaN(e)){for(;i-t>Math.PI;)i-=2*Math.PI;for(;t-i>Math.PI;)i+=2*Math.PI;return i}return i+t-e>Math.PI?i-=2*Math.PI:e-(i+t)>Math.PI&&(i+=2*Math.PI),i}function Jne(t,e,i,n){if(t.y>0){const s=new Y;s.setCoords(e.x,Cn),vn(t.x,s.x)||vn(e.y,s.y)||(n.push(s),i!==null&&i.push(0))}else{const s=new Y;s.setCoords(e.x,-Cn),vn(t.x,s.x)||vn(e.y,s.y)||(n.push(s),i!==null&&i.push(0))}}function Qne(t,e,i,n){if(e.y>0){const s=new Y;s.setCoords(t.x,Cn),vn(e.x,s.x)||vn(t.y,s.y)||(n.push(s),i!==null&&i.push(1))}else{const s=new Y;s.setCoords(t.x,-Cn),vn(e.x,s.x)||vn(t.y,s.y)||(n.push(s),i!==null&&i.push(1))}}function ese(t,e,i,n,s,r,o){if(clt(i)){if(Cn-t.y>0){const l=new Y;l.setCoords(t.x,Cn),o.push(l),r!==null&&r.push(n)}if(Cn-e.y>0){const l=new Y;l.setCoords(e.x,Cn),o.push(l),r!==null&&r.push(n)}}else{if(Cn+t.y>0){const l=new Y;l.setCoords(t.x,-Cn),o.push(l),r!==null&&r.push(s)}if(Cn+e.y>0){const l=new Y;l.setCoords(e.x,-Cn),o.push(l),r!==null&&r.push(s)}}}function Zrt(t,e,i){return!(!lve(t,e,i)||vn(t.y,Cn)||vn(t.y,-Cn)||vn(e.y,Cn)||vn(e.y,-Cn))}function lve(t,e,i){return Math.abs(Math.abs(t.x-e.x)-Math.PI)<=i}function Krt(t){if(t.x<-Math.PI)for(;t.x<-Math.PI;)t.x+=2*Math.PI;else if(t.x>Math.PI)for(;t.x>Math.PI;)t.x-=2*Math.PI}function Jrt(t,e,i,n,s){const r=new xe;i.queryEnvelope(r);const o=Cl(null,i,!0).total();if(e.xmin-r.xmin<=o&&r.xmax-e.xmax<=o)return i;const l=e.width();let c=0;for(;e.xmin+c*l<r.xmin;)c++;for(;e.xmin+c*l>r.xmin;)c--;const f=c*l,y=new _i;y.setShiftCoords(-f,0);const _=i;_.applyTransformation(y);const x=new xe;_.queryEnvelope(x);let S=null;if(x.xmax>e.xmax){let P=0;const A=new xe;A.setCoords({env2D:e}),A.ymin-=1,A.ymax+=1;let D=_;for(;A.xmin<x.xmax;){x.xmax>A.xmax&&(D=pve(D,t,2,!0,A.xmax));const N=bn(D,A,Js(null,rB(D,A),!0).total(),Number.NaN,s);S===null?S=N===D?N.clone():N:(y.setShiftCoords(-P*l,0),N.applyTransformation(y),S.add(N,!1)),P++,A.xmin=A.xmax,A.xmax=e.xmax+P*l}}else S=_;return S}class Qrt{constructor(e,i){this.m_basisX=new ii,this.m_basisY=new ii,this.m_normal=new ii,K(e.getCoordinateSystemType()===1),this.m_gcs=e;const n=R5();e.querySpheroidData(n),this.m_a=n.majorSemiAxis,this.m_e2=n.e2,this.m_rpu=e.getUnit().getUnitToBaseFactor(),this.m_curvCenterRad=i.mul(this.m_rpu);const s=this.m_curvCenterRad.x,r=this.m_curvCenterRad.y,o=Math.cos(s),l=Math.sin(s),c=Math.cos(r),f=Math.sin(r);this.m_cartCenter3D=Cit(this.m_a,this.m_e2,o,l,c,f),this.m_normal.setCoordsPoint3D(this.m_cartCenter3D),this.m_d=this.m_cartCenter3D.length(),this.m_normal.divThis(this.m_d),ii.selectRightHandedBasisFromNormal(this.m_normal,this.m_basisX,this.m_basisY),this.m_northPolePcs=this.projectPoint(Y.construct(0,.5*Math.PI/this.m_rpu)),this.m_southPolePcs=this.projectPoint(Y.construct(0,.5*-Math.PI/this.m_rpu))}project(e){const i=e.getGeometryType();if(rl(i)){ex(e);const n=e;return this.projectMultiVertex(n)}Je("Gnomonic.project")}unproject(e,i,n){const s=e.getGeometryType();if(rl(s)){ex(e);let r=e;const o=[];if(s===me.enumPolygon){const l=r.getPathCount();for(let c=0;c<l;c++){const f=r.calculateRingArea2D(c);o.push(f)}}return this.unprojectMultiVertex(i,r),bi(s)?(lot(this.m_gcs,0,r),eot(o,this.m_gcs,0,r,n)):r=hx(r,this.m_gcs,0,!0,0,n),r}Je("Gnomonic.unproject")}projectPoint(e){const i=e.mul(this.m_rpu),n=vl(this.m_a,this.m_e2,i),s=this.m_normal.dotProduct(n);if(s<=0)return Y.construct(Number.NaN,Number.NaN);const r=this.m_d/s,o=n.mul(r).sub(this.m_cartCenter3D),l=new Y;return l.x=this.m_basisX.dotProduct(o),l.y=this.m_basisY.dotProduct(o),l}unprojectPoint(e){const i=this.m_cartCenter3D.add(this.m_basisX.mul(e.x).add(this.m_basisY.mul(e.y)));return yC(this.m_a,this.m_e2,i).divide(this.m_rpu)}projectMultiVertex(e){const i=e.getImpl();let n=!0;const s=new Y,r=new Y;for(let o=0,l=i.getPointCount();o<l;o++)i.queryXY(o,s),s.y*this.m_rpu>.5*Math.PI?r.assign(this.m_northPolePcs):s.y*this.m_rpu<.5*-Math.PI?r.assign(this.m_southPolePcs):r.assign(this.projectPoint(s)),i.setXY(o,r),r.isNAN()&&(n=!1);return i.notifyModifiedFlags(2001),n}unprojectMultiVertex(e,i){const n=i.getImpl(),s=e*e,r=!this.m_northPolePcs.isNAN(),o=!this.m_southPolePcs.isNAN();for(let l=0,c=n.getPointCount();l<c;l++){const f=n.getXY(l);let y=new Y;r&&Y.sqrDistance(f,this.m_northPolePcs)<=s?(y.setCoords(this.m_curvCenterRad.x,.5*Math.PI),y.scale(1/this.m_rpu)):o&&Y.sqrDistance(f,this.m_southPolePcs)<=s?(y.setCoords(this.m_curvCenterRad.x,.5*-Math.PI),y.scale(1/this.m_rpu)):y=this.unprojectPoint(f),n.setXY(l,y)}n.notifyModifiedFlags(2001)}}function eot(t,e,i,n,s){const r=n.getGeometryType(),o=e.getPannableExtent();let l=n,c=!1,f=!1;if(r===me.enumPolygon){const y=new xe,_=Y.construct(i,0);y.setCoords({env2D:o}),y.centerAt(_),c=tot(t,e,y,l,s);const x=aot(e,y,l,s);x!==l&&(f=!0),l=x}else l=new w2().foldInto360RangeGeodetic(l,e,2);r===me.enumPolygon&&(c||f)&&(l=new Rc().execute(l,e,!1,s)),l!==n&&(n.setEmpty(),n.add(l,!1))}function tot(t,e,i,n,s){const r=iot(i,n),o=not(t,e,i,n,s);return r||o}function iot(t,e){const i=new xe;e.queryEnvelope(i);const n=vn(t.ymax,i.ymax),s=vn(t.ymin,i.ymin),r=n||s;return!!r&&(sot(t,e),r)}function not(t,e,i,n,s){const r=[],o=[],l=.5*i.width();for(let _=0;_<n.getPathCount();_++){const x=n.getXY(n.getPathStart(_)),S=n.getXY(n.getPathEnd(_)-1),P=t[_]<0;if(Math.abs(x.x-S.x)>l){const A=rot(P,e,i,_,n,s);r.push(A),o.push(_)}else if(!P&&n.calculateRingArea2D(_)<0){const A=oot(e,i,_,n,s);r.push(A),o.push(_)}}if(r.length===0)return!1;const c=new Wt({vd:n.getDescription()});let f=0,y=o[f];for(let _=0;_<n.getPathCount();_++)_===y?(c.add(r[f],!1),f++,f<o.length&&(y=o[f])):c.addPath(n,_,!0);return n.setEmpty(),n.add(c,!1),!0}function sot(t,e){const i=new Wt,n=new xe;for(let s=0;s<e.getPathCount();s++){e.queryPathEnvelope(s,n);let r=vn(t.ymax,n.ymax),o=vn(t.ymin,n.ymin);if(!(r||o)){i.addPath(e,s,!0);continue}i.insertPath2D(-1,null,0,0,!0);const l=e.getPathStart(s),c=e.getPathEnd(s),f=c-l;let y=-1;for(y=l;y<c;y++){const P=e.getXY(y);if(r=vn(t.ymax,P.y),o=vn(t.ymin,P.y),!r&&!o)break}let _=y,x=!1,S=Number.NaN;do{const P=e.getXY(_);r=vn(t.ymax,P.y),o=vn(t.ymin,P.y);const A=l+(_+1-l)%f;if(r||o){let D=Y.construct(S,P.y);i.insertPoint2D(s,-1,D);const N=e.getXY(A),F=vn(t.ymax,N.y),G=vn(t.ymin,N.y);F||G||(D=Y.construct(N.x,P.y),x?i.setXY(i.getPointCount()-1,D):i.insertPoint2D(s,-1,D)),x=!0}else i.insertPoint2D(s,-1,P),S=P.x,x=!1;_=A}while(_!==y)}e.setEmpty(),e.add(i,!1)}function rot(t,e,i,n,s,r){const o=new Wt,l=new Wt,c=new _i,f=s.getXY(s.getPathStart(n)),y=s.getXY(s.getPathEnd(n)-1),_=i.width(),x=.5*_,S=new xe;s.queryEnvelope(S);const P=Math.ceil(S.width()/_)+1;let A,D;f.x>y.x?(A=-_,D=t?i.ymin:i.ymax):(A=_,D=t?i.ymax:i.ymin),c.setShiftCoords(A,0),o.addPath(s,n,!0),l.add(o,!1);const N=new Ut;for(let ue=0;ue<P;ue++)l.applyTransformation(c),l.getPointByVal(0,N),o.lineToPoint(N),o.addSegmentsFromPath(l,0,0,l.getSegmentCount()-1,!1);const F=o.getXY(0),G=o.getXY(o.getPointCount()-1);F.y=D,G.y=D,o.lineTo(G);const V=new Y;for(V.setCoordsPoint2D(G),V.x-=.5*A;Math.abs(V.x-F.x)>x;)o.lineTo(V),V.x-=.5*A;o.lineTo(F);const B=i.getCenter().x,W=new xe;o.queryEnvelope(W);let J=0;const re=W.getCenter().x;re-B>x?J=-Math.ceil((re-B-x)/_):B-re>x&&(J=Math.ceil((B-re-x)/_)),J!==0&&(c.setShiftCoords(J*_,0),o.applyTransformation(c));const ne=new Hn,oe=ne.addGeometry(o);_C(ne,oe,e,0,2,!0,i.xmin),_C(ne,oe,e,0,2,!0,i.xmax);const pe=ne.getGeometry(oe),ce=rB(pe,i);return ce.inflateCoords(0,1),bn(pe,i,Js(null,ce,!0).total(),Number.NaN,r)}function oot(t,e,i,n,s){const r=e.width(),o=.5*r,l=e.getCenter().x,c=new xe;n.queryPathEnvelope(i,c);let f,y=0,_=c.getCenter().x;if(_-l>o?y=-Math.ceil((_-l-o)/r):l-_>o&&(y=Math.ceil((l-_-o)/r)),y!==0){const A=new _i;A.setShiftCoords(y*r,0),n.getImpl().applyTransformationToPath(A,i),n.queryPathEnvelope(i,c),_=c.getCenter().x}const x=new xe;e.containsExclusiveEnvelope(c)?(f=!1,x.setCoords({env2D:e})):(f=!0,x.setCoords({env2D:e}),x.xmin-=r,x.xmax+=r);let S=n.createInstance();S.addPathPoint2D(null,0,!0);const P=new Y;if(P.setCoords(x.xmin,x.ymin),S.insertPoint2D(0,-1,P),P.setCoords(x.xmin,x.ymax),S.insertPoint2D(0,-1,P),P.setCoords(.5*(x.xmin+x.xmax),x.ymax),S.insertPoint2D(0,-1,P),P.setCoords(x.xmax,x.ymax),S.insertPoint2D(0,-1,P),P.setCoords(x.xmax,x.ymin),S.insertPoint2D(0,-1,P),P.setCoords(.5*(x.xmin+x.xmax),x.ymin),S.insertPoint2D(0,-1,P),f){S.addPath(n,i,!0);const A=new _i;_<l?A.setShiftCoords(r,0):A.setShiftCoords(-r,0),n.getImpl().applyTransformationToPath(A,i),S.addPath(n,i,!0);const D=new Hn,N=D.addGeometry(S);_C(D,N,t,0,2,!0,e.xmin),_C(D,N,t,0,2,!0,e.xmax),S=D.getGeometry(N);const F=rB(S,e);F.inflateCoords(0,1),S=bn(S,e,Js(null,F,!0).total(),Number.NaN,s)}else S.addPath(n,i,!0);return S}function aot(t,e,i,n){const s=new xe;i.queryEnvelope(s);const r=Cl(null,i,!0).total();if(e.xmin-s.xmin<=r&&s.xmax-e.xmax<=r)return i;const o=i.createInstance();let l=i.createInstance();const c=new xe,f=i.getPathCount();for(let y=0;y<f;y++)i.queryPathEnvelope(y,c),e.xmin-c.xmin<=r&&c.xmax-e.xmax<=r?o.addPath(i,y,!0):(l.setEmpty(),l.addPath(i,y,!0),l=Jrt(t,e,l,!0,n),o.add(l,!0));return o}function lot(t,e,i){const n=t.getPannableExtent(),s=Y.construct(e,0);n.centerAt(s);const r=n.width(),o=.5*r,l=new Y;l.setNAN();let c=Number.NaN;for(let f=0;f<i.getPathCount();f++)for(let y=i.getPathStart(f);y<i.getPathEnd(f);y++){const _=i.getXY(y),x=vn(_.y,n.ymax)||vn(n.ymin,_.y);y===i.getPathStart(f)?(l.setNAN(),c=0):l.isNAN()||x||(c=cot(_.x,l.x,o,r,c)),_.x+=c,i.setXY(y,_),x||l.setCoordsPoint2D(_)}i.getImpl().notifyModifiedFlags(2001)}function cot(t,e,i,n,s){return s+t-e>i?s-=n:e-(s+t)>i&&(s+=n),s}function tse(t,e,i,n,s,r){const o=e.getAttributeStreamRef(0),l=e.getPointCount();let c=!1;const f=new Y;for(let V=0;V<l;++V){if(o.queryPoint2D(2*V,f),1&r&&f.y>=i){c=!0;break}if(2&r&&f.y<=-i){c=!0;break}}if(!c)return!1;let y=!1;t&&(y=e.getImpl().isClosedPathInXYPlane(0));const _=new Hn,x=_.addGeometry(e),S=_.getFirstPath(x);let P=-1,A=!0;const D=new Y,N=new Ut;let F=ae;const G=cve*s/360;for(let V=_.getFirstVertex(S);V!==ae;V=_.getNextVertex(V)){_.queryXY(V,f);let B=1&r&&f.y>=i?1:0;if(B|=2&r&&f.y<=-i?2:0,P>0&&P!==B){if(D.x!==f.x){const W=_.getPrevVertex(V);_.queryPoint(W,N);const J=_.insertVertex(S,V,N);D.x=f.x,_.setXY(J,D)}if(y){let W=F!==ae?_.getNextVertex(F):_.getFirstVertex(S);const J=_.getPrevVertex(V);for(;W!==J;)W=_.removeVertex(W,!1);if(F!==ae){const re=_.getXY(F),ne=_.getXY(J);if(Math.abs(re.x-ne.x)>G){_.queryPoint(F,N);const oe=_.insertVertex(S,J,N);re.x=Hi(re.x,ne.x,.5),_.setXY(oe,re)}}}F=ae}if(B&&(f.y=dm(n,f.y),_.setXY(V,f),!A&&P!==B))if(f.x!==D.x){_.queryPoint(V,N);const W=_.insertVertex(S,V,N);_.setXYCoords(W,D.x,f.y),F=W}else F=V;P=B,D.assign(f),A=!1}if(y){if(F!==ae){let re=_.getNextVertex(F);for(;re!==ae;)re=_.removeVertex(re,!1)}const V=_.getFirstVertex(S);let B=_.getLastVertex(S);const W=_.getXY(V),J=_.getXY(B);if(!W.equals(J)&&(_.queryPoint(V,N),B=_.insertVertex(S,ae,N),Math.abs(W.x-J.x)>G)){const re=_.insertVertex(S,B,N);W.x=Hi(W.x,J.x,.5),_.setXY(re,W)}}return e.assignCopy(_.getGeometry(x)),!0}function uot(t,e){let i=new Wt({vd:t});i.addEnvelope(e,!1);const n=e.width()/180;return i=new t0().execute(i,n,0,0,null),i}function hot(t,e){const i=t.getPannableExtent();return Number.isNaN(e)||i.centerAtCoords(e,0),i}function dot(t,e,i){const n=R5();e.querySpheroidData(n);const s=e.getGCS()!==e?e.getSRToGCSTransform():null,r=Ge(Y,100),o=new ii(0,0,0),l=t.getPointCount(),c=e.getGCS().getUnit().getUnitToBaseFactor();for(let x=0,S=l;x<S;){const P=Math.min(100,S-x);t.queryCoordinates(r,P,x,x+P),s&&new w2().transform(s,r,P,r,!1);for(let A=0;A<P;A++){if(r[A].isNAN())continue;r[A].scale(c);const D=vl(n.majorSemiAxis,n.e2,r[A]);o.addThis(D)}x+=P}const f=yC(n.majorSemiAxis,n.e2,o);f.scale(1/c);const y=t;if(!new Qrt(e.getGCS(),f).project(y))return 0;i.length=t.getPathCount();const _=y.calculateArea2D()<0;for(let x=0,S=t.getPathCount();x<S;x++){const P=y.calculateRingArea2D(x),A=_?P<0:P>0;i[x]=A}return _?-1:1}function fot(t,e,i,n,s){if(!e.isPannable()||t.isEmpty())return t;const r=t.getGeometryType();r===me.enumGeometryCollection&&K(0);const o=e.getPannableExtent();Number.isNaN(i)&&(i=o.getCenterX());const l=o.width(),c=.5*l,f=s>0,y=t.queryInterval(0,0);if(!f&&y.width()<c||!rl(t.getGeometryType())){const _=y.getCenter();if(Math.abs(_-i)<=c)return t;{const x=new _i,S=Ev((i-_)/l)*l;x.setShiftCoords(S,0);const P=t.clone();return P.applyTransformation(x),P}}if(r===me.enumPolygon){let _=new vi({vd:t.getDescription()});_.addAndExplicitlyOpenAllPaths(t,!1),f&&(_=Hne(_,e,2,s,Number.NaN,null,!0));const x=[];if(!n){{let S=t;f&&(S=new Wt,S.add(_,!1));const P=dot(t,e,x);if(P)P<0&&_.reverseAllPaths();else{const A=S.getPathCount();for(let D=0;D<A;D++)x.push(S.calculateRingArea2D(D)>0)}}n=x}return new xM(null,n,_,null,e,i,3,0,null).geoNormalizePolygonGeometry(!0)}if(r===me.enumPolyline){let _=new vi({vd:t.getDescription()});return _.addAndExplicitlyOpenAllPaths(t,!1),f&&(_=Hne(_,e,2,s,Number.NaN,null,!0)),new xM(null,null,_,null,e,i,3,0,null).geoNormalizePolylineGeometry(!0)}if(r===me.enumMultiPoint){const _=t,x=_.getAttributeStreamRef(0);let S,P=null,A=i,D=0;const N=.1*l;for(let F=0,G=_.getPointCount();F<G;F++){const V=x.read(2*F);let B=V-A;if(Math.abs(B)>c&&(B=Ev(B/l)*l,D-=B,Math.abs(D)<N&&(D=0)),D!==0){P||(S=t.clone(),P=S.getAttributeStreamRef(0));const W=V+D;P.write(2*F,W)}A=V}return P?(S.notifyModified(),S):t}xt("")}const cve=210;class xM{constructor(e,i,n,s,r,o,l,c,f){this.m_bAdjustedAtPoles=0,this.m_inputPoly=n,this.m_progressTracker=f,this.m_originalGeometry=e,this.m_originalSR=s,this.m_polygonRingFlags=i,this.m_pannableSR=r,this.m_poleSnappingTolerance=c,this.m_poleFlags=l,this.m_bAdjustedAtPoles=0,this.m_pannableExtent=hot(this.m_pannableSR,o),this.m_centralLongitude=Number.isNaN(o)?this.m_pannableExtent.getCenterX():o,this.m_width360=this.m_pannableExtent.width(),this.m_degree=this.m_width360/360,this.m_GCSLargeDelta=cve*this.m_degree,K(this.m_originalGeometry===null&&this.m_originalSR===null||this.m_originalGeometry!==null&&this.m_originalSR!==null)}geonormalizeRing(e,i,n,s,r,o,l){let c=n;const f=new vi({vd:this.m_inputPoly.getDescription()});f.addPath(this.m_inputPoly,e,!0),this.m_poleFlags!==0&&(this.m_bAdjustedAtPoles|=tse(!0,f,this.m_pannableExtent.ymax-this.m_poleSnappingTolerance,this.m_pannableExtent.ymax,this.m_pannableExtent.width(),this.m_poleFlags)?1:0,this.m_bAdjustedAtPoles&&(c=!1));let y=-1;c&&(y=this.m_originalGeometry.getPathStart(e));const _=f.getAttributeStreamRef(0),x=f.getPointCount();let S=0,P=_.read(0),A=0;const D=3*this.m_pannableSR.getTolerance(0);let N=!1;const F=new Y,G=new Y;let V=!1;const B=f.hasNonLinearSegments(),W=new Y;for(let ne=1;ne<x;++ne){_.queryPoint2D(2*ne,W);const oe=W.x;let pe=oe+S;const ce=pe-P;if(W.x=pe,Math.abs(ce)>this.m_GCSLargeDelta){if(c){const ue=y+ne-1,se=y+(ne+1<x?ne:0),de=o.read(2*ue),Se=(o.read(2*se)-de)*s;Math.abs(ce-Se)>1*this.m_degree&&(c=!1)}c||(S-=dm(this.m_width360,pe-P),pe=oe+S,++A,V=S!==0,W.x=pe)}else N||WQe(F,G,W,D)&&(N=!0);V&&(B&&xt("error in geonormalize_ring_ for curves"),_.write(2*ne,pe)),P=pe,F.setCoordsPoint2D(G),G.setCoordsPoint2D(W)}A&&f.notifyModified();const J=f.getXY(0),re=f.getXY(x-1);if(Y.distance(J,re)<D){const ne=this.finalizeGeoNormalizeClosedRing(f,N,r);l.add(ne,!1)}else{i<0&&(this.m_originalGeometry!==null?(K(this.m_originalGeometry!==null),i=this.m_originalGeometry.calculateRingArea2D(e)>0?1:0):i=1);const ne=this.finalizeGeoNormalizeOpenedRing(i>0,f);l.add(ne,!1)}}geoNormalizePolygonGeometry(e){K(this.m_originalSR&&this.m_originalGeometry||!this.m_originalGeometry&&!this.m_originalSR),K(this.m_pannableSR.isPannable());let i=null,n=Number.NaN;const s=!!this.m_originalSR&&this.m_originalSR.isPannable();s&&(i=this.m_originalGeometry.getAttributeStreamRef(0),n=this.m_width360/this.m_originalSR.getPannableExtent().width()),this.m_bAdjustedAtPoles=0;const r=new Wt({vd:this.m_inputPoly.getDescription()});for(let P=0,A=this.m_inputPoly.getPathCount();P<A;++P){const D=this.m_polygonRingFlags?this.m_polygonRingFlags[P]?1:0:-1;this.geonormalizeRing(P,D,s,n,e,i,r)}const o=this.m_pannableSR.getTolerance(0),l=this.m_pannableExtent.width()/180;CM(r,this.m_pannableExtent,.1*o,!1);const c=xe.constructEmpty();if(c.setCoords({env2D:this.m_pannableExtent}),e){let P=!0;for(let A=0;A<2;A++){P=!0;const D=xe.constructEmpty();for(let N=0,F=r.getPathCount();N<F;N++)if(r.queryPathEnvelope(N,D),!(c.xmin<=D.xmin&&c.xmax>=D.xmax||D.xmin>=c.xmax||D.xmax<=c.xmin)){P=!1;break}if(P)break;c.move(.5*this.m_width360,0)}P||c.setCoords({env2D:this.m_pannableExtent})}let f=bn(r,c,o,l,this.m_progressTracker),y=r!==f;const _=this.m_originalGeometry?this.m_originalGeometry.calculateArea2D():1,x=f.calculateArea2D();let S=0;if(x>0&&_<0)S=1;else if(x<=0&&_>0)if(x===0){if(this.m_originalSR){let P=Number.NaN;this.m_originalSR.getCoordinateSystemType()===2?P=this.m_originalSR.getPCSHorizon().calculateArea2D():this.m_originalSR.getCoordinateSystemType()===1&&(P=this.m_originalSR.getPannableExtent().getArea()),_>.99*P&&(S=-1)}}else S=-1;if(S!==0){const P=uot(f.getDescription(),c);P.add(f,!1),y=!0,f=P}return y&&(f=new Rc().execute(f,this.m_pannableSR,!1,this.m_progressTracker)),f}geoNormalizePolylineGeometry(e){K(this.m_pannableSR.isPannable());let i=null;const n=this.m_originalSR&&this.m_originalSR.isPannable();let s=1;n&&(K(this.m_originalGeometry),s=this.m_width360/this.m_originalSR.getPannableExtent().width(),i=this.m_originalGeometry.getAttributeStreamRef(0));const r=this.m_pannableExtent.width(),o=r*ts()*4;let l=e,c=Number.NaN;const f=Ze.constructEmpty();this.m_bAdjustedAtPoles=0;let y=new vi({vd:this.m_inputPoly.getDescription()});for(let S=0,P=this.m_inputPoly.getPathCount();S<P;++S){let A=n;const D=new vi({vd:this.m_inputPoly.getDescription()});D.addPath(this.m_inputPoly,S,!0);const N=this.m_inputPoly.isClosedPath(S);this.m_poleFlags!==0&&(this.m_bAdjustedAtPoles|=tse(N,D,this.m_pannableExtent.ymax-this.m_poleSnappingTolerance,this.m_pannableExtent.ymax,r,this.m_poleFlags)?1:0,this.m_bAdjustedAtPoles&&(A=!1));let F=-1;const G=D.getPointCount();let V=!1;A&&(F=this.m_originalGeometry.getPathStart(S),V=this.m_originalGeometry.isClosedPath(S));const B=D.getAttributeStreamRef(0);let W=0,J=B.read(0),re=0;const ne=new Y,oe=new Y;let pe=!1;const ce=D.hasNonLinearSegments(),ue=new Y;for(let se=1;se<G;++se){B.queryPoint2D(2*se,ue);const de=ue.x;let Se=de+W;const Pe=Se-J;if(ue.x=Se,Math.abs(Pe)>this.m_GCSLargeDelta){if(A){const Re=F+se-1;let $e=F;(!V||se+1<G)&&($e+=se);const we=i.read(2*Re),Fe=(i.read(2*$e)-we)*s;Math.abs(Pe-Fe)>1*this.m_degree&&(A=!1)}A||(W-=dm(this.m_width360,Se-J),Se=de+W,++re,pe=W!==0,ue.x=Se)}pe&&(ce&&xt("error in geonormalize_ring_ for curves"),B.write(2*se,Se)),J=Se,ne.setCoordsPoint2D(oe),oe.setCoordsPoint2D(ue)}if(re&&D.notifyModified(),l){let se=!1;if(!D.isEmpty()){const de=xe.constructEmpty();if(D.queryEnvelope(de),de.width()>=r||de.ymin<=this.m_pannableExtent.ymin||de.ymax>=this.m_pannableExtent.ymax)se=!0;else{if(Number.isNaN(c)){const Pe=this.m_centralLongitude-.5*r;c=de.xmin,c+=Math.round((Pe-de.xmin)/r)*r,c>Pe&&(c-=r),K(c<=Pe),c<Pe&&(c+=r),K(c>=Pe)}let Se=Math.round((c-de.xmin)/r)*r;if(de.xmin+Se>c+o&&(Se-=r),de.xmin+Se<c-o&&(Se+=r),f.mergeCoordinate(de.xmin+Se),f.mergeCoordinate(de.xmax+Se),se=f.width()>=r,!se){const Pe=new _i;Pe.setShiftCoords(Se,0),D.applyTransformation(Pe)}}}y.add(D,!1),se&&(y=(()=>{const de=new vi({vd:y.getDescription()});for(let Se=0,Pe=y.getPathCount();Se<Pe;++Se){const Re=new vi({vd:y.getDescription()});Re.addPath(y,Se,!0);const $e=hx(Re,this.m_pannableSR,this.m_centralLongitude,!0,0,this.m_progressTracker);de.add($e,!1)}return de})(),l=!1)}else{const se=hx(D,this.m_pannableSR,this.m_centralLongitude,!0,0,this.m_progressTracker);y.add(se,!1)}}if(l)return y;const _=this.m_pannableSR.getTolerance(0),x=this.m_pannableExtent.width()/180;return CM(y,this.m_pannableExtent,.1*_,!1),bn(y,this.m_pannableExtent,_,x,this.m_progressTracker)}finalizeGeoNormalizeOpenedRing(e,i){const n=i.getPointCount(),s=i.getXY(0),r=i.getXY(n-1);{const ne=Math.abs(r.x-s.x),oe=Math.round(ne/this.m_width360)*this.m_width360;K(Math.abs(ne-oe)<this.m_pannableSR.getTolerance(0))}const o=ws(r.x-s.x),l=xe.constructEmpty();i.queryLooseEnvelope(l);const c=this.m_pannableExtent.getCenterX();let f=0,y=c-this.m_width360,_=c+this.m_width360;if(o>=0){let ne=Math.ceil((y-l.xmin)/this.m_width360);for(ne*=this.m_width360;y>l.xmin+ne;)ne+=this.m_width360;for(;y<l.xmax+ne;)ne-=this.m_width360;for(f=ne,l.width()>720&&(_=y+360*Math.ceil(l.width()/360));_<l.xmax;)_+=this.m_width360}else{let ne=Math.ceil((_-l.xmax)/this.m_width360);for(ne*=this.m_width360;_<l.xmax+ne;)ne-=this.m_width360;for(;_>l.xmin+ne;)ne+=this.m_width360;for(f=ne,l.width()>720&&(y=_-360*Math.ceil(l.width()/360));y>l.xmin;)y-=this.m_width360}const x=Math.round(Math.abs(r.x-s.x)/this.m_width360)*this.m_width360,S=o*x,P=l.clone();P.move(f,0);const A=new Y(0,0),D=new _i;D.setShiftCoords(f,0),i.applyTransformation(D);const N=new vi({vd:i.getDescription()});N.add(i,!1),A.assign(i.getXY(n-1));let F=0,G=N.getXY(0).x;for(;o>0?P.xmax<_:P.xmin>y;)P.move(S,0),D.xd=S,i.applyTransformation(D),G+=S,this.m_pannableExtent.xmin<=G&&this.m_pannableExtent.xmax>=G&&(F=N.getPointCount()-1),i.setXY(0,A),A.assign(i.getXY(n-1)),N.addSegmentsFromPath(i,0,0,n-1,!1);const V=new Wt({vd:N.getDescription()});V.add(N,!1);const B=N.getXY(0),W=N.getXY(N.getPointCount()-1),J=o<0?e:!e,re=V.getPointCount()-1;if(J){const ne=new Y(W.x,this.m_pannableExtent.ymax);V.lineTo(ne);const oe=new Y(this.m_pannableExtent.getCenterX(),this.m_pannableExtent.ymax);V.lineTo(oe);const pe=new Y(B.x,this.m_pannableExtent.ymax);V.lineTo(pe)}else{const ne=new Y(W.x,this.m_pannableExtent.ymin);V.lineTo(ne);const oe=new Y(this.m_pannableExtent.getCenterX(),this.m_pannableExtent.ymin);V.lineTo(oe);const pe=new Y(B.x,this.m_pannableExtent.ymin);V.lineTo(pe)}if(V.interpolateAttributesPath(0,re,0),V.getImpl().changeRingStartPoint(F),x>this.m_width360){const ne=new Wt({copy:V});D.setShiftCoords(this.m_width360,0),ne.applyTransformation(D),V.add(ne,!1)}return V}finalizeGeoNormalizeClosedRing(e,i,n){const s=new Wt({vd:e.getDescription()});s.add(e,!1);const r=()=>{const y=s.getPointCount()-2;return s.getSegmentType(y)!==me.enumLine};if(s.hasNonLinearSegments()&&r()){const y=new Qt,_=s.getPointCount()-2;s.getSegmentBuffer(_,y,!1),s.removePointFromPath(0,_+1),s.closeLastPathWithSegment(y.get())}else s.removePointFromPath(0,s.getPointCount()-1);const o=xe.constructEmpty();s.queryLooseEnvelope(o);let l=Math.ceil((this.m_pannableExtent.xmin-o.xmin)/this.m_width360);for(l*=this.m_width360;this.m_pannableExtent.xmin>o.xmin+l;)l+=this.m_width360;for(;this.m_pannableExtent.xmin<o.xmax+l;)l-=this.m_width360;if(l+=this.m_width360,l!==0){o.move(l,0);const y=new _i;y.setShiftCoords(l,0),s.applyTransformation(y)}if(this.m_pannableExtent.xmin<=o.xmin&&this.m_pannableExtent.xmax>=o.xmax){if(i){const _=s.calculateArea2D(),x=new Rc().execute(s,this.m_pannableSR,!0,this.m_progressTracker);if(x!==s){const S=x.calculateArea2D();ws(_)!==ws(S)&&x.reverseAllPaths(),s.assignMove(x)}}let y;if(y=new Wt(n?{copy:s}:{move:s}),n)for(;o.xmin<this.m_pannableExtent.xmax;){o.move(this.m_width360,0);const _=new _i;_.setShiftCoords(this.m_width360,0),s.applyTransformation(_),y.add(s,!1)}return y}let c=new Wt({vd:e.getDescription()});c.add(s,!1);const f=i||o.width()>this.m_width360-10*this.m_pannableSR.getTolerance(0);for(;o.xmin<this.m_pannableExtent.xmax;){o.move(this.m_width360,0);const y=new _i;y.setShiftCoords(this.m_width360,0),s.applyTransformation(y),c.add(s,!1)}if(f){const y=c.calculateArea2D();c.setFillRule(1),c=new Rc().execute(c,this.m_pannableSR,!0,this.m_progressTracker);const _=c.calculateArea2D();ws(y)!==ws(_)&&c.reverseAllPaths()}return c}geonormalize_ring_(e,i,n,s,r,o,l){K(0)}}class uve{supportsCurves(){return!0}accelerateGeometry(e,i,n){return pot(e,i,n)}canAccelerateGeometry(e){return hve(e)}}function pot(t,e,i){if(!hve(t))return!1;QE(e,t,!1);let n=0;const s=t.getGeometryType();return bi(s)&&aM(t)&&i!==0&&(n|=t.getImpl().buildQuadTreeAccelerator(i)?1:0),bi(s)&&L1e(t)&&i!==0&&(n|=t.getImpl().buildQuadTreeForPathsAccelerator(i)?1:0),n>0}function hve(t){return aM(t)||L1e(t)}class mot extends uve{getOperatorType(){return 8}execute(e,i,n,s){return i0(e,i,n,1,s)}}function got(t,e,i,n){if(t.isEmpty()||e.isEmpty())return t;const s=t.getDimension(),r=e.getDimension();if(s>r)return t;const o=t.getGeometryType(),l=e.getGeometryType(),c=new xe,f=new xe,y=new xe;t.queryEnvelope(c),e.queryEnvelope(f),y.setCoords({env2D:c}),y.mergeEnvelope2D(f);const _=Js(i,y,!0),x=Wc(_),S=new xe;if(S.setCoords({env2D:c}),S.inflateCoords(x,x),!S.isIntersecting(f))return t;if(s===1&&r===2){const A=Pot(t,e,l,i,n);if(A)return A}if(o===me.enumPoint){let A;switch(Ds(l)?(A=new vi({vd:e.getDescription()}),A.addSegment(e,!0)):A=e,l){case me.enumPolygon:return vot(t,A,_);case me.enumPolyline:return _ot(t,A,_);case me.enumMultiPoint:return bot(t,A,_);case me.enumEnvelope:return xot(t,A,_);case me.enumPoint:return wot(t,A,_);default:Je("invalid shape type")}}else if(o===me.enumMultiPoint)switch(l){case me.enumPolygon:return Sot(t,e,_);case me.enumEnvelope:return Eot(t,e,_);case me.enumPoint:return Cot(t,e,_)}const P=new xe(c);return P.inflate(100*_.total()),drt(t,bn(e,P,0,0,n),i,n)}class z7{getOperatorType(){return 10002}supportsCurves(){return!0}accelerateGeometry(e,i,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,n,s){return new yot(e,i,n,s)}execute(e,i,n,s){return this.executeMany(new nh([e]),new nh([i]),n,s).next()}}class yot extends Aa{constructor(e,i,n,s){super(),this.m_progressTracker=s,this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=n;const r=i.next();this.m_geomSubtractor=r||new Wt}next(){const e=this.m_inputGeoms.next();return e?(sh(e),BJe(e),this.m_index=this.m_inputGeoms.getGeometryID(),got(e,this.m_geomSubtractor,this.m_spatialReference,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return K(0),!1}getRank(){return K(0),0}}function vot(t,e,i,n){return Qye(e,t,i.total())===0?t:t.createInstance()}function _ot(t,e,i,n){const s=t.getXY(),r=e.querySegmentIterator(),o=Wc(i),l=o*o;for(;r.nextPath();)for(;r.hasNextSegment();){const c=r.nextSegment(),f=new xe;if(c.queryEnvelope(f),f.inflateCoords(o,o),!f.contains(s))continue;if(c.isIntersectingPoint(s,i.total()))return t.createInstance();let y=c.getStartXY();if(Y.sqrDistance(s,y)<=l||(y=c.getEndXY(),Y.sqrDistance(s,y)<=l))return t.createInstance()}return t}function bot(t,e,i,n){const s=e.getImpl().getAttributeStreamRef(0),r=e.getPointCount(),o=t.getXY(),l=Wc(i),c=l*l,f=new Y;for(let y=0;y<r;y++)if(s.queryPoint2D(2*y,f),Y.sqrDistance(f,o)<=c)return t.createInstance();return t}function xot(t,e,i,n){const s=new xe;e.queryEnvelope(s),s.inflate(i.total());const r=t.getXY();return s.contains(r)?t.createInstance():t}function wot(t,e,i,n){const s=Wc(i),r=s*s,o=t.getXY(),l=e.getXY();return Y.sqrDistance(o,l)<=r?t.createInstance():t}function Sot(t,e,i,n){const s=new xe;e.queryEnvelope(s),s.inflate(i.total());const r=t.getPointCount();let o=!1;const l=ji(r,!1),c=new Y;for(let y=0;y<r;y++)t.queryXY(y,c),s.contains(c)&&Il(e,c,i.total())!==0&&(o=!0,l[y]=!0);if(!o)return t;const f=t.createInstance();for(let y=0;y<r;y++)l[y]||f.addPoints(t,y,y+1);return f}function Eot(t,e,i,n){const s=new xe;e.queryEnvelope(s),s.inflate(i.total());const r=t.getPointCount();let o=!1;const l=ji(r,!1),c=new Y;for(let y=0;y<r;y++)t.queryXY(y,c),s.contains(c)&&(o=!0,l[y]=!0);if(!o)return t;const f=t.createInstance();for(let y=0;y<r;y++)l[y]||f.addPoints(t,y,y+1);return f}function Cot(t,e,i,n){const s=t.getImpl().getAttributeStreamRef(0),r=t.getPointCount(),o=e.getXY();let l=!1;const c=ji(r,!1),f=Wc(i),y=f*f,_=new Y;for(let S=0;S<r;S++)s.queryPoint2D(2*S,_),Y.sqrDistance(_,o)<=y&&(l=!0,c[S]=!0);if(!l)return t;const x=t.createInstance();for(let S=0;S<r;S++)c[S]||x.addPoints(t,S,S+1);return x}function Pot(t,e,i,n,s){const r=new ur;t.queryEnvelope(r);const o=new xe;e.queryEnvelope(o),r.merge(o);const l=.1*r.width(),c=.1*r.height();r.inflateCoords(l,c);const f=new Wt;f.addEnvelope(r,!1);const y=f.getImpl();if(i===me.enumPolygon){const _=e.getImpl();y.add(_,!0)}else y.addEnvelope(e,!0);return new tv(f,n,-1,s).tryFastImplementation(t)}class C0{getOperatorType(){return 10001}supportsCurves(){return!0}accelerateGeometry(e,i,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,n,s=0){return new wM(e,i,n,s)}execute(e,i,n,s){const r=new nh([e,i]),o=new wM(r,n,s,0).next();return o||xt("null output"),o}}function Tot(){return{geom:null,vertexCount:-1,bUnioned:!1,location:new Y}}function Iot(t,e){return Y.compareZorder(t.location,e.location)?-1:t.location.equals(e.location)?0:1}class Mot{constructor(){this.binVertexCount=0,this.geometries=[]}addPair(e){this.binVertexCount+=e.vertexCount,this.geometries.push(e)}sort(){this.geometries.sort((e,i)=>Iot(e,i))}geomCount(){return this.geometries.length}geomPairs(){return this.geometries}clear(){this.binVertexCount=0,this.geometries.length=0}getBinVertexCount(){return this.binVertexCount}}class wM extends Aa{constructor(e,i,n,s,r=!1){super(),this.m_index=-1,this.m_currentDim=-1,this.m_bDone=!1,this.m_unionBins=[],this.m_readyGeoms=fE(4),this.m_dimGeomCounts=ji(4,0),this.m_addedGeoms=0,this.m_maxDimension=-1,this.m_bHadGeometry=ji(4,!1),this.m_complexUnionGeoms=fE(4),this.m_totalNonEmptyGeomCounters=ji(4,0),this.m_progressTracker=n,this.m_bUnionAllDimensions=!!(4&s),this.m_bPreserveAllPathEnds=!!(8&s),this.m_inputGeoms=e,this.m_spatialReference=i,this.m_options=s,this.m_bIs3D=r}next(){if(this.m_bDone&&this.m_currentDim===this.m_maxDimension)return null;for(;!this.step_(););if(this.m_maxDimension===-1)return null;if(this.m_bUnionAllDimensions){if(this.m_currentDim===-1){for(let e=0;e<=this.m_maxDimension;e++)if(this.m_bHadGeometry[e]){this.m_complexUnionGeoms[e]=this.getResultGeometry(e);for(let i=e+1;i<=this.m_maxDimension;i++)this.m_complexUnionGeoms[i]=this.getResultGeometry(i),this.m_bHadGeometry[i]&&!this.m_complexUnionGeoms[i].isEmpty()&&(this.m_bIs3D?K(0):this.m_complexUnionGeoms[e]=new z7().execute(this.m_complexUnionGeoms[e],this.m_complexUnionGeoms[i],this.m_spatialReference,this.m_progressTracker))}}for(;this.m_currentDim++,(this.m_currentDim>this.m_maxDimension||this.m_currentDim<0)&&xt(""),!this.m_bHadGeometry[this.m_currentDim];);if(this.m_index++,this.m_currentDim===0&&this.m_complexUnionGeoms[this.m_currentDim].getGeometryType()===me.enumPoint){const e=new Qs({vd:this.m_complexUnionGeoms[this.m_currentDim].getDescription()});return this.m_complexUnionGeoms[this.m_currentDim].isEmpty()||e.add(this.m_complexUnionGeoms[this.m_currentDim]),e}return this.m_complexUnionGeoms[this.m_currentDim]}return this.m_index=0,this.m_currentDim=this.m_maxDimension,this.getResultGeometry(this.m_maxDimension)}getGeometryID(){return this.m_index}getRank(){return K(0),-1}tock(){return this.step_()}getResultGeometry(e){return this.m_readyGeoms[e]}finishDim(e,i,n){let s=i;if(!n)return 16&this.m_options&&(s=uO([s],1,this.m_spatialReference,this.m_progressTracker,this.m_options,this.m_bIs3D)),s;if(1&this.m_options)return s;if(e===1)if(!(8&this.m_options)&&(16&this.m_options||this.m_totalNonEmptyGeomCounters[e]>1)){s=uO([s],1,this.m_spatialReference,this.m_progressTracker,16|this.m_options,this.m_bIs3D);const r=[0],o=s.getImpl().getIsSimple(0,r);K(this.m_bIs3D||E0(o))}else this.m_totalNonEmptyGeomCounters[e]===1&&(this.m_bIs3D?K(0):s=new Rc().execute(s,this.m_spatialReference,!1,this.m_progressTracker));else this.m_bIs3D?K(0):s=new Rc().execute(s,this.m_spatialReference,!1,this.m_progressTracker);if(e===0&&s.getGeometryType()===me.enumPoint){const r=new Qs({vd:s.getDescription()});s.isEmpty()||r.add(s),s=r}return s}static getLevel(e){const n=WE(e);let s=n>0?(Math.log(n)-Math.log(32))/Math.log(4):0;return s<0&&(s=0),Math.floor(s)}step_(){if(this.m_bDone)return!0;let e;if(this.m_inputGeoms?(e=this.m_inputGeoms.next(),e===null?(this.m_bDone=!0,this.m_inputGeoms=null):(this.checkAndThrow(e),e.isEmpty()||this.m_totalNonEmptyGeomCounters[e.getDimension()]++)):e=null,e!==null){const i=e.getDimension();this.m_bHadGeometry[i]=!0,(i>=this.m_maxDimension||this.m_bUnionAllDimensions)&&(this.addGeom(i,!1,e),i>this.m_maxDimension&&!this.m_bUnionAllDimensions&&this.removeAllBinsWithLowerDimension(i))}if(this.m_addedGeoms>0)for(let i=0;i<=this.m_maxDimension;i++){for(;this.m_dimGeomCounts[i]>1;){const n=this.collectGeometriesToUnion(i);if(n===null)break;{let s;s=1&this.m_options?uO(n,n.length,this.m_spatialReference,this.m_progressTracker,this.m_options,this.m_bIs3D):grt(n,n.length,this.m_spatialReference,this.m_progressTracker,8|this.m_options,this.m_bIs3D),this.addGeom(i,!0,s)}}if(this.m_bDone&&(K(this.m_dimGeomCounts[i]<=1),this.m_dimGeomCounts[i]!==0)){const n=this.m_unionBins[i].entries().next().value,s=n[1].geomPairs()[0].geom,r=n[1].geomPairs()[0].bUnioned;this.m_unionBins[i].clear(),this.m_readyGeoms[i]=this.finishDim(i,s,r)}}return this.m_bDone}addGeom(e,i,n){const s=Tot();s.geom=n;const r=WE(n);s.vertexCount=r;const o=xe.constructEmpty();n.queryEnvelope(o),s.location=r>0?o.getCenter():new Y(0,0);const l=wM.getLevel(n);if(e+1>this.m_unionBins.length)for(;this.m_unionBins.length<Math.max(2,e+1);)this.m_unionBins.push(new Map);let c=null;const f=this.m_unionBins[e].get(l);f&&(c=f),c===null&&(c=new Mot,this.m_unionBins[e].set(l,c)),s.bUnioned=i,c.addPair(s),this.m_dimGeomCounts[e]++,this.m_addedGeoms++,this.m_maxDimension=Math.max(this.m_maxDimension,e)}removeAllBinsWithLowerDimension(e){K(0)}collectGeometriesToUnion(e){if(1&this.m_options&&!this.m_bDone)return null;let i=null;const n=[];for(const s of this.m_unionBins[e].keys())n.push(s);Hx(n);for(let s=0;s<n.length;s++){if(n[s]===-1)continue;const r=this.m_unionBins[e].get(n[s]);{const c=r.getBinVertexCount()>5e3&&r.geomCount()>=4;if(this.m_bDone||c){for(let f=0;f<s;f++){if(n[f]===-1)continue;const y=this.m_unionBins[e].get(n[f]);y.sort(),this.m_dimGeomCounts[e]-=y.geomCount(),this.m_addedGeoms-=y.geomCount();for(const _ of y.geomPairs())i||(i=new Array),i.push(_.geom);y.clear(),this.m_unionBins[e].delete(n[f]),n[f]=-1}r.sort(),this.m_dimGeomCounts[e]-=r.geomCount(),this.m_addedGeoms-=r.geomCount();for(const f of r.geomPairs())i||(i=new Array),i.push(f.geom);if(r.clear(),this.m_unionBins[e].delete(n[s]),n[s]=-1,!this.m_bDone)break}}}return i}checkAndThrow(e){this.m_bIs3D&&(e.getDimension()>1&&VJe(),e.hasAttribute(1)||Je("Geometry must have Zs")),sh(e)}}class dve extends uve{getOperatorType(){return 3}execute(e,i,n,s=null){return i0(e,i,n,4,s)}}function ise(t,e,i){const n=e.getGCSSplitLines();if(n===null)return t;const s=e.getGCS(),r=s.getPannableExtent().width(),o=xe.constructEmpty();t.queryLooseEnvelope(o);const l=Ze.constructEmpty();o.queryIntervalX(l);const c=n.querySegmentIterator();let f=null;const y=new _i;for(;c.nextPath();)for(;c.hasNextSegment();){const _=c.nextSegment(),x=_.queryInterval(0,0),S=Ze.constructEmpty();S.setCoordsFromEnvelope(x);let P=0;for(;S.vmax>l.vmin;)S.move(-r),P--;for(;S.vmin<=l.vmax;){if(S.isIntersecting(l)){f===null&&(f=new vi);const A=new ni({start:_.getStartXY(),end:_.getEndXY()});P!==0&&(y.setShiftCoords(P*r,0),A.applyTransformation(y)),f.addSegment(A,!0)}S.move(r),++P}}return f!==null?snt(t,f,Wc(Cl(s,f,!0)),i):t}function SB(t,e,i){let n=t.getName();return rlt(n)||(i||e>0?(n=t.toString(Vi.PE_STR_NAME_CANON|Vi.PE_STR_AUTH_NONE),n=Dot(n)):n=t.toString(Vi.PE_STR_AUTH_TOP)),n}function Aot(t,e,i,n){return K(0),""}function nse(t,e=-1){if((e>1||e<-1)&&Je("verbosity"),e===-1)return t.toString();{const i=e===0?Vi.PE_STR_AUTH_TOP:Vi.PE_STR_AUTH_ALL;return t.toString(i)}}function kot(t,e){(e>1||e<-1)&&Je("verbosity");let i=Vi.PE_STR_FMT_WKT2;return e!==-1&&(i|=e===0?Vi.PE_STR_AUTH_TOP:Vi.PE_STR_AUTH_ALL),t.toString(i)}function Dot(t){return t.toLocaleUpperCase("en-US")}function Not(t,e,i){const n=t.getPCSHorizon();if(n.getGeometryType()!==me.enumPolygon)if(n.getGeometryType()!==me.enumEnvelope)Je("");else{const s=n;for(let r=0;r<i;r++)s.contains(e[r])||e[r].setNAN()}else{const s=t.getDefaultPrecisionSR().getTolerance(0),r=n;for(let o=0;o<i;o++)Il(r,e[o],s)!==1&&e[o].setNAN()}}function Oot(t,e,i,n){for(let s=0;s<e;s++){if(t[s].y<i.ymin||t[s].y>i.ymax){t[s].setNAN();continue}const r=t[s].x;t[s].x=Oy(r,i,n)}}function fO(t,e,i,n){if(t.isEmpty()||i===1)return t;const s=t.getGeometryType();if(s===me.enumPoint){const V=t,B=V.getXY();return yq([B],1,e,i)===0||B.isNAN()?V.setEmpty():V.setXY(B),t}if(s===me.enumMultiPoint){const V=t,B=t.createInstance(),W=V.getPointCount();B.reserve(W);const J=V.getAttributeStreamRef(0),re=V.getDescription().getAttributeCount()>1,ne=new Ut,oe=Float64Array.from(J.getArray());if(yq(oe,W,e,i)>0)for(let pe=0,ce=2*W;pe<ce;pe+=2)Number.isNaN(oe[pe])||(re?(V.getPointByVal(pe>>1,ne),ne.setXYCoords(oe[pe],oe[pe+1]),B.add(ne)):B.addXY(oe[pe],oe[pe+1]));return B}let r=t;const o=e.getOneDegreeGCSUnit(),l=90*o,c=180*o,f=360*o,y=e.getCentralMeridian(),_=.5*o,x=xe.constructEmpty();r.queryEnvelope(x);const S=e.getGCSHorizon(),P=e.getGCSHorisonIsInclusive(),A=S.getGeometryType()===me.enumEnvelope,D=xe.constructEmpty();S.queryEnvelope(D);const N=e.getGCS();if(i!==2&&i!==4||(D.xmin=y-c,D.xmax=D.xmin+f),i===4){if(!(x.width()>f-o)){const V=xe.constructEmpty();V.setCoords({xmin:x.xmin-o,ymin:D.ymin,xmax:x.xmax+o,ymax:D.ymax}),r=new cx().execute(r,V,N,n);let B=Math.floor((y-x.getCenterX())/f);for(x.move(B*f,0);x.xmin>D.xmax;)B-=1,x.move(-f,0);for(;x.xmin<D.xmin;)B+=1,x.move(f,0);if(B!==0){const W=new _i;W.setShiftCoords(B*f,0),r.applyTransformation(W)}return r}i=2}if(i===2&&(D.xmin=y-c,D.xmax=D.xmin+f),x.ymin<-l||x.ymax>l){const V=xe.constructEmpty();if(V.setCoords({xmin:x.xmin-o,ymin:-l,xmax:x.xmax+o,ymax:l}),r=new cx().execute(r,V,N,n),r.isEmpty())return r;r.queryEnvelope(x)}if(P&&(D.ymax<x.ymin||D.ymin>x.ymax))return r.createInstance();x.width()>f&&(r=EM(r,y-c,f,N,!0,0,!0,n),r.queryEnvelope(x));let F=zot(x.xmin,x.xmax,D.xmin,D.xmax,f);if(F!==0&&x.move(F,0),x.xmax>D.xmax||x.xmin<D.xmin){if(x.xmax>D.xmax)for(;x.xmin>=D.xmax;)x.move(-f,0),F-=f;for(;x.xmin<D.xmax-f;)x.move(f,0),F+=f}const G=QE(N,S,!1);if(F!==0){const V=new _i;V.setShiftCoords(F,0),r.applyTransformation(V),F=0}if(P){if(A&&D.containsEnvelope(x))return r;const V=new Array(2);for(let B=0;B<2;B++){let W;if(A?W=bi(s)?bn(r,D,G,_,n):bn(r,D,G,0,n):(W=new ux().execute(r,S,N,n),W===S&&(W=W.clone())),D.xmin<=x.xmin&&D.xmax>=x.xmax||D.xmin>=x.xmin&&D.xmax<=x.xmax)return W;if(V[B]=W,B===0){x.move(-f,0);const J=new _i;J.setShiftCoords(-f,0),r.applyTransformation(J)}}return bi(s)?V[0].add(V[1],!1):xt("intersect_with_GCS_horizon: unexpected geometry type"),V[0]}{if(D.ymax<x.ymin||D.ymin>x.ymax)return r;let V=0;for(;!r.isEmpty()&&x.xmax>D.xmin;){if(V!==0){const B=new _i;B.setShiftCoords(V,0),r.applyTransformation(B)}if(new dve().execute(r,S,N,n)||(r=new z7().execute(r,S,N,n),S===r&&(r=r.clone())),V!==0){const B=new _i;B.setShiftCoords(-V,0),r.applyTransformation(B)}V-=f,x.move(-f,0)}return r}}function $ot(t,e,i,n,s,r){const o={stack:[],error:void 0,hasError:!1};try{if(r===2)return kit(t,e,i,n,s);if(Math.abs(i.x-n.x)>=Math.PI||!gO(i.x,n.x,s))return Number.NaN;i.x>n.x&&(n=Et(i,i=n));const l=sc(o,new Zh,!1),c=sc(o,new Zh,!1),f=sc(o,new Zh,!1),y=i.clone();B0.geodeticDistance(t,e,i.x,i.y,n.x,n.y,c,l,null,r);const _=c.val;let x=0,S=1;for(;_*(S-x)>1e-12*t;){const P=.5*(x+S);if(B0.geodeticCoordinate(t,e,i.x,i.y,_*P,l.val,c,f,r),y.x=c.val,y.y=f.val,y.x===s)return y.y;if(gO(i.x,y.x,s))S=P;else{if(!gO(n.x,y.x,s))return Number.NaN;x=P}}return y.y}catch(l){o.error=l,o.hasError=!0}finally{_m(o)}}function Rot(t,e){let i;if(Array.isArray(t)){const n=t;i=new Float64Array(2*e);for(let s=0,r=0;s<e;s++,r+=2)i[r]=n[s].x,i[r+1]=n[s].y}else i=t;return i}function gq(t,e,i,n){for(let s=0,r=0;s<n;s++,r+=2)e[i+s].x=t[r],e[i+s].y=t[r+1]}function yq(t,e,i,n){if(e===0||n===1)return e;const s=Rot(t,e);if(n===2){const A=i.getPannableExtentInGCS();let D=e;for(let N=0,F=2*e;N<F;N+=2)(s[N+1]>A.ymax||s[N+1]<A.ymin)&&(s[N]=Number.NaN,D--);return D?(h9(s,e,A.xmin,A.width(),!0),t!==s&&gq(s,t,0,e),D):0}const r=i.getOneDegreeGCSUnit(),o=90*r,l=180*r,c=360*r;let f=e;for(let A=0,D=2*e;A<D;A+=2)(s[A+1]>o||s[A+1]<-o)&&(s[A]=Number.NaN,f--);if(!f)return 0;const y=xe.constructEmpty();y.setFromPoints(s,e);const _=i.getGCSHorizon(),x=i.getGCSHorisonIsInclusive(),S=_.getGeometryType()===me.enumEnvelope,P=xe.constructEmpty();if(_.queryEnvelope(P),x&&(P.ymax<y.ymin||P.ymin>y.ymax))return 0;if(x)if(h9(s,e,P.getCenterX()-l,c,!0),f=e,S)for(let A=0,D=2*e;A<D;A+=2)P.containsCoords(s[A],s[A+1])||(s[A]=Number.NaN,f--);else{const A=QE(i.getGCS(),_,!1),D=new Y;for(let N=0,F=2*e;N<F;N+=2)D.setCoords(s[N],s[N+1]),Il(_,D,A)!==0||(s[N]=Number.NaN,f--)}else{h9(s,e,-l,c,!0),f=e;const A=QE(i.getGCS(),_,!1),D=new Y;for(let N=0,F=2*e;N<F;N+=2){D.setCoords(s[N],s[N+1]),D.isNAN()&&f--;const G=mve(D.x,P.xmin,P.xmax,c);D.x+=G,Il(_,D,A)!==0&&(s[N]=Number.NaN,f--)}}return f>0&&Array.isArray(t)&&gq(s,t,0,e),f}function hx(t,e,i,n,s,r){if(e.isPannable()||Je("fold_into_360_degree_range"),t.isEmpty())return t;let o,l;if(e.getCoordinateSystemType()===2){const c=e.getPannableExtent();l=c.xmin,o=c.width()}else{const c=e.getOneDegreeGCSUnit();o=360*c,l=i-180*c}return EM(t,l,o,e,n,s,!0,r)}function fve(t,e,i,n){let s,r;if(i.getCoordinateSystemType()===2){const o=i.getPannableExtent();s=o.xmin,r=o.width()}else{const o=i.getOneDegreeGCSUnit();r=360*o,s=n-180*o}h9(t,e,s,r)}function pO(t,e){const i=e.width();let n=G0(t-e.vmin,i);return n<0&&(n+=i),e.snapClip(n+e.vmin)}function Oy(t,e,i){return t>e.xmax&&t-e.xmax<i?e.xmax:t<e.xmin&&e.xmin-t<i?e.xmin:t}function SM(t,e,i){if(t[0]<e.vmin||t[0]>e.vmax||i&&t[0]===e.vmax){const n=e.width();return t[0]+=Math.ceil((e.vmin-t[0])/n)*n,t[0]=e.snapClip(t[0]),!0}return!1}function Lot(t,e,i,n,s,r,o,l,c){return new xM(t,null,i,e,n,s,o,l,r).geoNormalizePolygonGeometry(c)}function Fot(t,e,i,n,s,r,o,l,c){return new xM(t,null,i,e,n,s,o,l,r).geoNormalizePolylineGeometry(c)}function pve(t,e,i,n,s){const r=new Hn,o=r.addGeometry(t);return _C(r,o,e,QE(e,t,!1),i,n,s),r.getGeometry(o)}function _C(t,e,i,n,s,r,o){const l={stack:[],error:void 0,hasError:!1};try{K(tlt()),i.isPannable()||xs("insert_geodetic_points");const c=i.getPannableExtent(),f=i.getGCS(),y=R5();f.querySpheroidData(y);const _=f.getUnit().getUnitToBaseFactor(),x=y.majorSemiAxis,S=y.e2;let P=0;const A=new Ze;c.queryIntervalX(A);let D=null;const N=new Array(4);i.getCoordinateSystemType()===2?(D=i.getPECoordSys(),r?(N[0]=pO(o,A),N[1]=c.getCenterY(),tl.projToGeog(D,1,N),P=N[0]*_):(N[0]=c.getCenterX(),N[1]=o,tl.projToGeog(D,1,N),P=N[1]*_)):P=o*_,r||P===0||s===2||xs("insert_geodetic_points: 1");const F=sc(l,new Zh,!1),G=new Y,V=new Y,B=new Y,W=new Y,J=new Y,re=new Y;for(let ne=t.getFirstPath(e);ne!==ae;ne=t.getNextPath(ne)){const oe=t.getFirstVertex(ne);t.queryXY(oe,B);let pe=!1;const ce=t.getNextVertex(oe);for(let ue=ce;ue!==ae;ue=t.getNextVertex(ue)){if(ue===ce){if(pe)break;pe=!0}if(t.queryXY(ue,W),r&&(n<o-B.x&&W.x-o>n||n<o-W.x&&B.x-o>n)||!r&&(o!==0||n<-B.y&&W.y>n||n<-W.y&&B.y>n))do{if(Math.abs(B.x-W.x)>=.5*A.width())break;i.getCoordinateSystemType()===2?(N[0]=pO(B.x,A),N[1]=B.y,N[2]=pO(W.x,A),N[3]=W.y,q7(D,2,N,0),J.x=N[0]*_,J.y=N[1]*_,re.y=N[3]*_):(J.x=B.x*_,J.y=B.y*_,re.y=W.y*_),re.x=(W.x-B.x)*Math.PI*2/A.width()+J.x;let se=0;const de=Ge(Y,2);if(r){if(V.x=P,V.y=$ot(x,S,J,re,P,s),Number.isNaN(V.y))break;de[0]=V,se=1}let Se=-1;for(let Pe=0;Pe<se;Pe++){B0.geodeticDistance(x,S,J.x,J.y,re.x,re.y,F,null,null,s);const Re=F.val;B0.geodeticDistance(x,S,J.x,J.y,de[Pe].x,de[Pe].y,F,null,null,s);const $e=F.val;i.getCoordinateSystemType()===2?(N[0]=de[Pe].x/_,N[1]=de[Pe].y/_,tl.geogToProj(D,1,N),r?(G.y=N[1],G.x=o):(G.x=ose(N[0],B.x,W.x,A),G.y=o)):r?(G.x=o,G.y=de[Pe].y/_):(G.x=ose(de[Pe].x/_,B.x,W.x,A),G.y=o);const we=Re>0?hs($e/Re,0,1):.5;if(we===0||we===1||Se>we)continue;const Fe=t.getPrevVertex(ue);t.splitSegment(Fe,[we],1);const it=t.getNextVertex(Fe);t.setXYCoords(it,G.x,G.y),Se=we}}while(!1);B.setCoordsPoint2D(W)}}}catch(c){l.error=c,l.hasError=!0}finally{_m(l)}}function bC(t,e){K(e.isPannable());const i=e.getPannableExtent();if(t.getGeometryType()===me.enumPoint){const l=t.getY();return i.ymin<=l&&l<=i.ymax?t:t.createInstance()}const n=xe.constructEmpty();t.queryEnvelope(n);const s=xe.constructEmpty();s.setCoords({env2D:i}),s.xmin=n.xmin,s.xmax=n.xmax,s.inflateCoords(.01*s.height(),0);const r=n1(e,n,!1);let o;return o=s.containsEnvelope(n)?t:bn(t,s,r,0,null),o}function mve(t,e,i,n){return Ev((.5*(i+e)-t)/n)*n}function zot(t,e,i,n,s){return t>=i&&e<=n?0:mve(.5*(e+t),i,n,s)}function EM(t,e,i,n,s,r,o,l){const c=t.getGeometryType(),f=Ze.constructEmpty();f.setCoords(e,e+i);const y=[0];if(c===me.enumPoint){const J=t;if(y[0]=J.getX(),SM(y,f,o)){const re=s?t:t.clone();return re.setX(y[0]),re}return t}const _=xe.constructEmpty();if(t.queryEnvelope(_),_.isEmpty())return t;if(c===me.enumMultiPoint){const J=s?t:t.clone(),re=J.getImpl(),ne=re.getAttributeStreamRef(0),oe=2*re.getPointCount();let pe=!1;for(let ce=0;ce<oe;ce+=2)y[0]=ne.read(ce),SM(y,f,o)&&(ne.write(ce,y[0]),pe=!0);return pe&&re.notifyModifiedFlags(2001),J}const x=Ze.constructEmpty();if(_.queryIntervalX(x),f.contains(x))return f.vmax,x.vmax,t;const S=xe.constructEmpty();if(S.setCoords({env2D:_}),x.width()===0){let J=x.vmin;J+=Math.ceil((f.vmin-J)/i)*i,J=f.snapClip(J);const re=s?t:t.clone();return re.setAttributeBasic(0,0,J),re}if(c===me.enumEnvelope){const J=s?t:t.clone();return _.intersect(S),J.setEnvelope(_),J}const P=.1*Math.max(_.height(),_.width())*1;S.inflateCoords(0,P);let A=t;const D=n.getTolerance(0),N=new _i;for(;;){const J=Math.floor((x.vmin-e)/i),re=Math.ceil((x.vmax-e)/i);if(!(re-J>3))break;{const ne=Math.floor(.5*(re+J));S.xmin=_.xmin-P,S.xmax=e+i*ne;const oe=bn(A,S,D,r,l);S.xmin=S.xmax,S.xmax=_.xmax+P;const pe=bn(A,S,D,r,l);N.setShiftCoords((ne-re)*i,0),pe.applyTransformation(N),c===me.enumPolygon?A=new C0().execute(oe,pe,n,l):(A=oe,A.add(pe,!1)),A.queryEnvelope(_),_.queryIntervalX(x)}}S.xmin=e,S.xmax=e+i;const F=xe.constructEmpty();F.setCoords({env2D:S}),F.inflateCoords(D,0);const G=Math.floor((_.xmin-S.xmin)/i)*i;let V;G?(S.move(G,0),N.setShiftCoords(-G,0)):N.setIdentity(),V=c===me.enumPolyline?new vi({vd:A.getDescription()}):new Wt({vd:A.getDescription()});const B=xe.constructEmpty(),W=xe.constructEmpty();for(;_.xmax>S.xmin;){const J=bn(A,S,D,0,l);J.queryEnvelope(W);let re=!1;re=c===me.enumPolyline?!J.isEmpty()&&(W.width()>D||W.height()>D):!J.isEmpty()&&(c!==me.enumPolygon||W.width()>D),re&&(J.applyTransformation(N),J.queryEnvelope(W),V.queryEnvelope(B),B.inflateCoords(D,D),B.isIntersecting(W)&&c===me.enumPolygon?V=new C0().execute(V,J,n,l):V.add(J,!1)),S.move(i,0),N.shiftCoords(-i,0)}return V}function h9(t,e,i,n,s=!0){const r=new Ze;r.setCoords(i,i+n);const o=[0];if(Array.isArray(t)){const l=t;for(let c=0;c<e;c++)r.containsRightExclusive(l[c].x)||(o[0]=l[c].x,SM(o,r,s),l[c].x=o[0])}else{const l=t;for(let c=0;c<e;c++){const f=c<<1;r.containsRightExclusive(l[f])||(o[0]=l[f],SM(o,r,s),l[f]=o[0])}}}function CM(t,e,i,n=!0){if(t.isEmpty())return;const s=t.getGeometryType();if(!n||s!==me.enumPolygon)if(rl(s)){let r=!1;if(bi(s)&&t.hasNonLinearSegments()){const o=t.getImpl(),l=o.getAttributeStreamRef(0),c=o.getSegmentFlagsStreamRef();K(c!==null);for(let f=0,y=o.getPathCount();f<y;f++){let _=!0;const x=o.isClosedPath(f),S=o.getPathEnd(f);x&&o.getPathSize(f)>0&&(_=(31&c.read(S-1))===1);for(let P=o.getPathStart(f);P<S;P++)if((31&c.read(P))===1){if(_){const A=l.read(2*P),D=Oy(A,e,i);D!==A&&(r=!0,l.write(2*P,D))}_=!0}else _=!1}}else{const o=t.getImpl(),l=o.getAttributeStreamRef(0);for(let c=0,f=o.getPointCount();c<f;c++){const y=l.read(2*c),_=Oy(y,e,i);_!==y&&(r=!0,l.write(2*c,_))}}r&&t.getImpl().notifyModifiedFlags(2001)}else if(s===me.enumEnvelope){const r=t,o=xe.constructEmpty();r.queryEnvelope(o),o.xmin=Oy(o.xmin,e,i),o.xmax=Oy(o.xmax,e,i),r.setEnvelope(o)}else if(s===me.enumPoint){const r=t;r.setX(Oy(r.getX(),e,i))}else xt("")}function qot(t,e,i){const n=new Y;return n.x=Oy(t.x,e,i),n.y=t.y,n}function Vot(t,e){if(e.isEmpty())return 0;const i=t.getPECoordSys();if(i.getProjection().getCode()===Vi.PE_PRJ_AZIMUTHAL_EQUIDISTANT){const n=R5();t.querySpheroidData(n);const s=i.getParameters();if(s[Vi.PE_PARM_LAM0]===null||s[Vi.PE_PARM_PHI0]===null)return 0;const r=[s[Vi.PE_PARM_LAM0].getValue(),s[Vi.PE_PARM_PHI0].getValue()];tl.geogToProj(i,1,r);const o=new Y(r[0],r[1]),l=xe.constructEmpty();e.queryEnvelope(l);const c=Ge(Y,4);l.queryCorners(c);let f=0;const y=t.getOneMeter();let _=Math.max(n.majorSemiAxis,n.minorSemiAxis)*Math.PI,x=Math.min(n.majorSemiAxis,n.minorSemiAxis)*Math.PI;x-=_/180,_*=y,x*=y;for(let S=0;S<4;S++){const P=Y.distance(c[S],o);if(P>_)f++;else if(P>x)return-1}if(f===0)return 1;if(f===4){const S=xe.constructEmpty();return S.setCoords({center:o,width:_,height:_}),l.isIntersectingNe(S)?-1:0}return-1}return-1}function mO(t,e,i,n){const s=t.getGeometryType();K(s===me.enumPolygon||s===me.enumPolyline||s===me.enumMultiPoint);const r=e.getCoordinateSystemType();if(r===2){let o=t;if(i===0){const l=Vot(e,t);if(l===0)return t.createInstance();if(l===1)return t;const c=e.getPCSHorizon(),f=c.getGeometryType(),y=e.getDefaultPrecisionSR();if(f===me.enumEnvelope){const _=xe.constructEmpty();c.queryEnvelope(_),o=bn(t,_,n1(y,_,!1),5e4*e.getOneMeterPCSUnit(),n)}else new mot().execute(c,t,y,n)||(o=new ux().execute(o,c,y,n),o===c&&(o=o.clone()))}else if(e.isPannable()){const l=xe.constructEmpty();o.queryEnvelope(l);const c=e.getPannableExtent();c.containsEnvelope(l)||(CM(o,c,e.getTolerance(0)),i!==2&&i!==4||(o=bC(o,e)),i!==4?o=hx(o,e,0,!0,1e5*e.getOneMeterPCSUnit(),n):s===me.enumPolygon&&l.width()>2*c.width()&&(o=EM(o,-2*c.width(),2*c.width(),e,!0,0,!0,n)))}return o}if(K(r===1),s===me.enumMultiPoint)return CM(t,e.getPannableExtent(),e.getTolerance(0)),t;{const o=xe.constructEmpty();t.queryEnvelope(o);let l=t;const c=e.getPannableExtent();if(o.ymin<c.ymin||o.ymax>c.ymax){const f=Math.max(1,o.calculateToleranceFromEnvelope()),y=new xe(o.xmin-f,c.ymin,o.xmax+f,c.ymax);if(l=new cx().execute(l,y,e,n),l.isEmpty())return l}return s===me.enumPolygon&&o.width()>2*c.width()&&(l=EM(l,-2*c.width(),2*c.width(),e,!0,0,!0,n)),l}}function Got(t,e,i,n,s,r){const o=n.getCoordinateSystemType();if(o===2){if(s===0)i!==t&&eM(i,t,e),Not(n,i,e);else if(i!==t&&eM(i,t,e),n.isPannable()){const l=n.getTolerance(0);Oot(i,e,n.getPannableExtent(),l),fve(i,e,n,0)}}else{K(o===1);const l=n.getTolerance(0),c=n.getPannableExtent();for(let f=0;f<e;f++)i[f].assign(qot(t[f],c,l))}}function EB(t,e,i,n){if(!i)return;const s=t.getPECoordSys();if(i===1){const _=[e[0].x,e[0].y];if(tl.geogToProj(s,1,_),n){const{first:x,second:S}=t.m_peCoordSysVal.getGeogToProjFactors();_[0]=x*(e[0].x-t.getCentralMeridian())+S}return void e[0].setCoords(_[0],_[1])}const r=t.isPannable(),o=r?t.getPannableExtent().width():0,l=179*o/360;let c=0;r&&(c=t.getCentralMeridian());const f=256,y=new Float64Array(2*f);for(let _=0;_<i;){for(let S=_;S<i&&e[S].isNAN();++S)_++;let x=Math.min(f,i-_);if(x>0){for(let S=1,P=_+1;S<x;++S,++P)if(e[P].isNAN()){x=S;break}for(let S=0;S<x;++S){const P=S<<1;y[P]=e[_+S].x,y[P+1]=e[_+S].y}if(tl.geogToProj(s,x,y),n){const{first:S,second:P}=t.m_peCoordSysVal.getGeogToProjFactors();for(let A=0;A<x;++A)y[A<<1]=S*(e[_+A].x-c)+P}if(r)for(let S=0,P=_;S<x;S++,P++){const A=S<<1,D=y[A],N=ws(D),F=e[P].x-c;N*ws(F)<0&&Math.abs(D)>l&&(y[A]-=N*o)}gq(y,e,_,x),_+=x}}}function gve(t,e,i){K(!i||t.isPannable());const n=e.getPointCount();if(!n)return;const s=e.getImpl(),r=s.getAttributeStreamRef(0),o=t.getPECoordSys();let l=0;const c=r.readRange(0,2*n);let f=()=>{tl.geogToProj(o,n,c)};const y=t.isPannable()&&!i,_=y?t.getPannableExtent().width():0,x=179*_/360;if(t.isPannable()&&(l=t.getCentralMeridian(),i)){const S=t.m_peCoordSysVal.getGeogToProjFactors(),P=S.first,A=S.second;f=()=>{tl.geogToProj(o,n,c);for(let D=0;D<n;D++){const N=D<<1,F=r.read(N),G=P*(F-l)+A;c[N]=G}}}if(f(),y)for(let S=0;S<n;S++){const P=S<<1,A=c[P],D=ws(A),N=r.read(P)-l;D*ws(N)<0&&Math.abs(A)>x&&(c[P]+=-D*_)}r.writeRangeFromArray(0,2*n,c,!0,1),s.notifyModifiedFlags(2001)}function jot(t,e,i){switch(e.getGeometryType()){case me.enumLine:return void sat(t,e,i);case me.enumBezier:return void aat(t,e,i);case me.enumEllipticArc:return void rat(t,e,i);case me.enumBezier2:return void lat();case me.enumRationalBezier2:return void cat();default:xt("")}}function sse(t,e,i){if(!e.hasNonLinearSegments())return void gve(t,e,i);if(K(!i||t.isPannable()),e.isEmpty())return;const n=0,s=t.getPECoordSys(),r=t.isPannable(),o=r?t.getPannableExtent().width():0,l=179*o/360;let c=0;r&&(c=t.getCentralMeridian());const f=e.createInstance();f.reserveParts(e.getPointCount(),e.getPathCount());const y=e.getImpl(),_=new Qt;for(let x=0,S=e.getPathCount();x<S;++x)if(y.hasNonLinearSegmentsPath(x)){let P=!0,A=-1;const D=y.getPathStart(x),N=D+y.getSegmentCountPath(x);y.isClosedPath(x)&&(A=N-1);const F=new Y;for(let G=D;G<N;++G){if(y.getSegmentBuffer(G,_,!1),jot(t,_.get(),i),!P&&(_.get().getStartXY().equals(F)||_.get().moveTo(F)),G!==A)f.addSegment(_.get(),P);else{if(P){const V=new Ut;_.get().queryStart(V),f.startPathPoint(V)}f.closeLastPathWithSegment(_.get())}F.assign(_.get().getEndXY()),P=!1}}else{let A,D=y.getPathSize(x),N=Math.min(D,1024);f.insertPath(-1,e,x,!0);const F=y.getAttributeStreamRef(0),G=f.getAttributeStreamRef(0);for(let V=y.getPathStart(x),B=y.getPathEnd(x);V<B;){if(A=F.readRange(V,N),tl.geogToProj(s,N,A),r)for(let W=0;W<N;W++){const J=W<<1,re=A[J],ne=ws(re),oe=F.read(2*(n+W))-c;ne*ws(oe)<0&&Math.abs(re)>l&&(A[J]+=-ne*o)}G.writeRangeFromArray(V,N,A,!0,1),V+=N,D-=N,N=Math.min(D,1024)}}e.assignMove(f)}function yve(t,e,i){let s=i.getPointCount();if(!s)return;const r=i.getImpl(),o=r.getAttributeStreamRef(0);let l=Math.min(s,1e3),c=0;const f=t.getPECoordSys();Number.isNaN(e)&&(e=0);const y=t.isPannable(),_=t.getOneDegreeGCSUnit(),x=360*_,S=179*_;let P;for(;s;){if(P=o.readRange(2*c,2*l),q7(f,l,P,e),y)for(let A=0;A<l;A++){const D=A<<1,N=P[D]-e,F=ws(N),G=o.read(2*(c+A));F*ws(G)<0&&Math.abs(N)>S&&(P[D]+=-F*x)}o.writeRangeFromArray(2*c,2*l,P,!0,1),c+=l,s-=l,l=Math.min(s,1e3)}r.notifyModifiedFlags(2001)}function Bot(t,e,i){switch(i.getGeometryType()){case me.enumLine:return void Hot(t,e,i);case me.enumBezier:return void Xot(t,e,i);case me.enumEllipticArc:return void Uot(t,e,i);case me.enumBezier2:return void Wot();case me.enumRationalBezier2:return void Zot();default:xt("")}}function Hot(t,e,i){const n=[i.getStartXY(),i.getEndXY()];CB(t,e,n,2),i.setStartXY(n[0]),i.setEndXY(n[1]),i.normalizeAfterEndpointChange()}function Uot(t,e,i){if(i.projectionBehavior()===0)Yot(t,e,i);else{const n=i.isClosed()&&i.isMajor(),s=[i.getStartXY(),n?i.getCenter():i.getEndXY()],r=[s[0].clone(),s[1].clone()];TB(t,e,r,2);const o=new _i;o.initializeFromTwoPointsArray(s,r),i.applyTransformation(o);const l=n?0:1;i.setCoordsForIntersector(r[0],r[l],!1)}}function Yot(t,e,i){bve(!1,t,e,i,!1)}function Xot(t,e,i){const n=Ge(Y,4);i.queryControlPoints(n),TB(t,e,n,4),i.setControlPoints(n)}function Wot(t,e,i){K(0)}function Zot(t,e,i){K(0)}function q7(t,e,i,n){const s=tl.projToGeogCenter(t,e,i,n);for(let r=0;r<e;++r){const o=r<<1;K(Number.isFinite(i[o]+i[o+1]))}return s}function TT(t,e,i){if(!i.hasNonLinearSegments())return void yve(t,e,i);if(i.isEmpty())return;const n=t.getPECoordSys();Number.isNaN(e)&&(e=0);const s=t.isPannable(),r=t.getOneDegreeGCSUnit(),o=360*r,l=179*r,c=i.createInstance();c.reserveParts(i.getPointCount(),i.getPathCount());const f=i.getImpl(),y=new Qt;for(let _=0,x=i.getPathCount();_<x;++_)if(f.hasNonLinearSegmentsPath(_)){let S=!0,P=-1;const A=f.getPathStart(_),D=A+f.getSegmentCountPath(_);f.isClosedPath(_)&&(P=D-1);const N=new Y;for(let F=A;F<D;++F){if(f.getSegmentBuffer(F,y,!1),Bot(t,e,y.get()),!S&&(y.get().getStartXY().equals(N)||y.get().moveTo(N)),F!==P)c.addSegment(y.get(),S);else{if(S){const G=new Ut;y.get().queryStart(G),c.startPathPoint(G)}c.closeLastPathWithSegment(y.get())}N.assign(y.get().getEndXY()),S=!1}}else{let P,A=f.getPathSize(_),D=Math.min(A,1e3);c.insertPath(-1,i,_,!0);const N=f.getAttributeStreamRef(0),F=c.getAttributeStreamRef(0);for(let G=f.getPathStart(_),V=f.getPathEnd(_);G<V;){if(P=N.readRange(2*G,2*D),q7(n,D,P,e),s)for(let B=0;B<D;B++){const W=B<<1,J=P[W]-e,re=ws(J),ne=N.read(2*G);re*ws(ne)<0&&Math.abs(J)>l&&(P[W]+=-re*o)}F.writeRangeFromArray(2*G,2*D,P,!0,1),G+=D,A-=D,D=Math.min(A,1e3)}}i.assignMove(c)}function CB(t,e,i,n){const s=t.getPECoordSys();Number.isNaN(e)&&(e=0);const r=t.isPannable(),o=t.getOneDegreeGCSUnit(),l=360*o,c=179*o,f=256,y=new Float64Array(2*f);for(let _=0;_<n;){for(let S=_;S<n&&i[S].isNAN();++S)_++;let x=Math.min(f,n-_);if(x>0){for(let S=1,P=_+1;S<x;++S,++P)if(i[P].isNAN()){x=S;break}for(let S=0;S<x;S++){const P=S<<1;y[P]=i[_+S].x,y[P+1]=i[_+S].y}if(q7(s,x,y,e),r)for(let S=0,P=_;S<x;++S,++P){const A=S<<1,D=i[P].x,N=y[A]-e,F=ws(N);F*ws(D)<0&&Math.abs(N)>c&&(y[A]-=F*l)}for(let S=0;S<x;S++){const P=S<<1;i[_+S].x=y[P],i[_+S].y=y[P+1]}_+=x}}}function vve(t,e,i,n){K(0)}function _ve(t,e,i){let n=e.getPointCount();if(!n)return!1;const s=e.getImpl(),r=s.getAttributeStreamRef(0);let o=null;const l=t.getInputSR(),c=t.getOutputSR();l.getVCS(),c.getVCS();const f=l.getOneDegreeGCSUnit(),y=c.getOneDegreeGCSUnit(),_=t.isVertical();_&&e.hasAttribute(1)&&(o=s.getAttributeStreamRef(1));const x=t.getDatumTransformation(),S=!!x&&x.getType()===1;if(S||o===null||(vve(o.getArray()),o=null),!x||x.count()===0){const oe=l.getGcsUnitFactor()/c.getGcsUnitFactor(),pe=(l.getPrimeMeridian()-c.getPrimeMeridian())*y,ce=-90*f,ue=90*f;let se=0;const de=r.getArray(),Se=[0];for(let Pe=1,Re=2*n;Pe<Re;)Se[0]=de[Pe],se|=Gz(Se,ce,ue)?1:0,de[Pe]=Se[0],Pe+=2;if(pe!==0||oe!==1){se=1;const Pe=r.getArray();for(let Re=0,$e=2*n;Re<$e;){let we=Pe[Re];we*=oe,we+=pe,Pe[Re]=we,Pe[Re+1]*=oe,Re+=2}}return se!==0&&s.notifyModifiedFlags(2001),!!se}const P=1e3;let A=Math.min(n,P);const D=new Array(A),N=new Array(A);let F=null;o!==null&&(F=new Float64Array(A));let G=0,V=Number.NaN,B=Number.NaN;const W=360*y,J=y/f;i&&(B=90*y,V=89.9*f,N.fill(0));let re=!0,ne=0;for(;n;){let oe=!1;const pe=r.readRange(2*G,2*A);for(let ue=0;ue<A;ue++)D[ue]=pe[ue<<1];if(i)for(let ue=0;ue<A;ue++){const se=1+(ue<<1),de=Math.abs(pe[se])-V;if(de>0){const Se=pe[se];pe[se]=dm(V,Se),N[ue]=dm(de,Se),oe=!0}}const ce=pe[0];if(S){const ue=x;F&&o.queryRange(G,A,F,!0,1),ue.transform(!1,pe,F,A),F&&o.writeRangeFromArray(G,A,F,!0,1)}else x.transform(!1,pe,A);re&&(ne=pe[0]-J*ce,re=!1);for(let ue=0;ue<A;ue++){const se=ue<<1,de=pe[se]-D[ue]*J-ne;Math.abs(de)>200&&(pe[se]+=de>0?-W:W)}if(oe){for(let ue=0;ue<A;ue++)if(N[ue]){const se=1+(ue<<1);pe[se]+=J*N[ue],pe[se]>B?pe[se]=B:pe[se]<-B&&(pe[se]=-B)}N.fill(0)}r.writeRangeFromArray(2*G,2*A,pe,!0,1),_&&o&&o.writeRangeFromArray(G,A,F,!0,1),G+=A,n-=A,A=Math.min(n,P)}return s.notifyModifiedFlags(2001),!0}function Kot(t,e,i){switch(e.getGeometryType()){case me.enumLine:return Jot(t,e,i);case me.enumBezier:return tat(t,e,i);case me.enumEllipticArc:return Qot(t,e,i);case me.enumBezier2:return iat();case me.enumRationalBezier2:return nat();default:xt("")}}function IT(t,e,i){if(!e.hasNonLinearSegments())return _ve(t,e,i);if(e.isEmpty())return!1;const n=e.createInstance();n.reserveParts(e.getPointCount(),e.getPathCount());const s=e.getImpl(),r=new Qt;for(let o=0,l=e.getPathCount();o<l;++o){let c=!0,f=-1;const y=s.getPathStart(o),_=y+s.getSegmentCountPath(o);s.isClosedPath(o)&&(f=_-1);const x=new Y;for(let S=y;S<_;++S){if(s.getSegmentBuffer(S,r,!1),Kot(t,r.get(),i),!c&&(r.get().getStartXY().equals(x)||r.get().moveTo(x)),S!==f)n.addSegment(r.get(),c);else{if(c){const P=new Ut;r.get().queryStart(P),n.startPathPoint(P)}n.closeLastPathWithSegment(r.get())}x.assign(r.get().getEndXY()),c=!1}}return e.assignMove(n),!0}function rse(t,e,i,n,s,r){if(t.isIdentityGeogToGeog()){const ce=90*t.getInputSR().getOneDegreeGCSUnit();let ue=0;const se=[0];for(let de=0;de<n;de++)se[0]=e[de].y,ue|=Gz(se,-ce,ce)?1:0,e[de].y=se[0];return ue}const o=t.getInputSR(),l=t.getOutputSR(),c=o.getVCS(),f=l.getVCS(),y=o.getOneDegreeGCSUnit(),_=90*y,x=l.getOneDegreeGCSUnit(),S=t.isVertical(),P=t.getDatumTransformation(),A=!!P&&P.getType()===1;if(S||(i=null),!P||P.count()===0){let ce=0;const ue=[0];for(let se=0;se<n;se++)ue[0]=e[se].y,ce|=Gz(ue,-_,_)?1:0,e[se].y=ue[0];return ce|=glt(o.getGCS(),c,l.getGCS(),f,e,i,n)?1:0,ce}A||i===null||vve();const D=1024;let N=Math.min(n,D);const F=new Array(N),G=ji(N,0);let V=0,B=Number.NaN,W=Number.NaN;const J=360*x,re=x/y;s&&(W=90*x,B=89.9*y);let ne=!0,oe=0,pe=n;for(;pe;){let ce=!1;for(let se=0;se<N;se++)F[se]=e[se+V].x;if(s)for(let se=0;se<N;se++){const de=Math.abs(e[se+V].y)-B;if(de>0){const Se=e[se+V].y;e[se+V].y=dm(B,Se),G[se]=dm(de,Se),ce=!0}}const ue=e[0].x;A?P.transform(!1,e,i,N):P.transform(!1,e,N),ne&&(oe=e[0].x-re*ue,ne=!1);for(let se=0;se<N;se++){const de=e[V+se].x-F[se]*re-oe;Math.abs(de)>200&&(de>0?e[V+se].x-=J:e[V+se].x+=J)}if(ce){for(let se=0;se<N;se++)G[se]&&(e[V+se].y+=re*G[se],e[V+se].y>W?e[V+se].y=W:e[V+se].y<-W&&(e[V+se].y=-W));G.fill(0,0,N)}V+=N,pe-=N,N=Math.min(pe,D)}return 1}function dx(t,e,i,n,s,r){let o=0,l=!0,c=0;for(let f=0;f<n;++f)e[f].isNAN()?l||(o|=rse(t,e.slice(c,f-c),i?i.slice(c,f-c):null,f-c,s),c=f,l=!0):l&&(c=f,l=!1);return l||(o|=rse(t,c===0?e:e.slice(c),i?c===0?i:i.slice(c):null,n-c,s)),o!==0}function Jot(t,e,i){const n=[e.getStartXY(),e.getEndXY()],s=[0,0];let r=null;e.hasAttribute(1)&&(r=s,r[0]=e.getAttributeAsDbl(0,1,0),r[1]=e.getAttributeAsDbl(1,1,0));const o=dx(t,n,r,2,i);return e.setStartXY(n[0]),e.setEndXY(n[1]),r&&(e.setStartAttribute(1,0,r[0]),e.setEndAttribute(1,0,r[1])),e.normalizeAfterEndpointChange(),o}function Qot(t,e,i){if(e.projectionBehavior()===0)return eat(t,e,i);const n=e.getStartXY().equals(e.getEndXY()),s=Ge(Y,3),r=Ge(Y,3),o=[0,0,0];let l=null;s[0].assign(e.getStartXY()),s[1].assign(n?e.getCenter():e.getEndXY());let c=!1;e.hasAttribute(1)&&(l=o,l[0]=e.getAttributeAsDbl(0,1,0),l[1]=e.getAttributeAsDbl(1,1,0),l[2]=Hi(l[0],l[1],.5),n&&(l[1]=l[2])),r[0].setCoordsPoint2D(s[0]),r[1].setCoordsPoint2D(s[1]);const f=new _i;if(n||e.isDegenerateToLine())c=dx(t,r,l,2,i),f.initializeFromTwoPoints(s[0],s[1],r[0],r[1]);else{const y=new Y;e.queryCoord2D(.5,y),s[2].setCoordsPoint2D(y),r[2].setCoordsPoint2D(y),c=dx(t,r,l,3,i),f.setFromTwoTriangles(s,r)}return f.isIdentity()||(e.applyTransformation(f),e.setStartXY(r[0]),e.setEndXY(n?r[0]:r[1]),e.normalizeAfterEndpointChange()),l&&(e.setStartAttribute(1,0,l[0]),e.setEndAttribute(1,0,n?l[0]:l[1])),c}function eat(t,e,i){const n=[e.getStartXY(),e.getEndXY(),e.getInteriorPoint(),e.getCenter()];let s=4;e.isDegenerateToLine()&&(s=2);const r=[0,0,0,0];let o=null;if(e.hasAttribute(1)){o=r,o[0]=e.getAttributeAsDbl(0,1,0),o[1]=e.getAttributeAsDbl(1,1,0);const f=Hi(o[0],o[1],.5);o[2]=f,o[3]=f}const l=e.getStartXY().equals(e.getEndXY())&&!e.isDegenerateToLine(),c=dx(t,n,o,s,i);return l?e.constructCircleCenterAndPoint(n[3],n[0],!e.isClockwise()):e.isDegenerateToLine()?e.constructLineCircularArc(n[0],n[1]):e.constructCircularArcThreePoint(n[0],n[1],n[2]),o&&(e.setStartAttribute(1,0,o[0]),e.setEndAttribute(1,0,o[1])),c}function tat(t,e,i){const n=Ge(Y,4);e.queryControlPoints(n);const s=[0,0,0,0];let r=null;e.hasAttribute(1)&&(r=s,r[0]=e.getAttributeAsDbl(0,1,0),r[3]=e.getAttributeAsDbl(1,1,0),r[1]=Hi(r[0],r[3],.5),r[2]=r[1]);const o=dx(t,n,r||null,n.length,i);return e.setControlPoints(n),r&&(e.setStartAttribute(1,0,r[0]),e.setEndAttribute(1,0,r[3])),e.normalizeAfterEndpointChange(),o}function iat(t,e,i){return K(0),!1}function nat(t,e,i){return K(0),!1}function sat(t,e,i){const n=[e.getStartXY(),e.getEndXY()];EB(t,n,2,i),e.setStartXY(n[0]),e.setEndXY(n[1]),e.normalizeAfterEndpointChange()}function PB(t,e,i,n){EB(t,e,i,n)}function rat(t,e,i){if(e.projectionBehavior()===0)oat(t,e,i);else{const n=e.isClosed()&&e.isMajor(),s=[e.getStartXY(),n?e.getCenter():e.getEndXY()],r=[s[0].clone(),s[1].clone()];PB(t,r,2,i);const o=new _i;o.initializeFromTwoPointsArray(s,r),e.applyTransformation(o);const l=n?0:1;e.setCoordsForIntersector(r[0],r[l],!1)}}function TB(t,e,i,n){CB(t,e,i,n);const s=new xe;s.setFromPoints(i,n);const r=t.getOneDegreeGCSUnit(),o=360*r,l=180*r;if(s.width()>l){for(let c=0;c<n;c++)for(;i[c].x<e;)i[c].x+=o;if(s.setFromPoints(i,n),s.xmax>l+e)for(let c=0;c<n;c++)i[c].x-=o}}function bve(t,e,i,n,s){const r=Ge(Y,3);let o=0,l=!1,c=!1;const f=n.isDegenerateToLine();f?(r[0].assign(n.getStartXY()),r[1].assign(n.getEndXY()),r[2].setCoords(0,0),o=2):n.isClosed()&&n.isMajor()?(l=!0,c=!n.isClockwise(),r[0].assign(n.getStartXY()),r[1].assign(n.getCenter()),r[2].setCoords(0,0),o=2):(r[0].assign(n.getStartXY()),r[1].assign(n.getEndXY()),r[2].assign(n.getInteriorPoint()),o=3),t?PB(e,r,o,s):TB(e,i,r,o),f?n.constructLineCircularArc(r[0],r[1]):l?n.constructCircleCenterAndPoint(r[1],r[0],c):n.constructCircularArcThreePoint(r[0],r[1],r[2])}function oat(t,e,i){bve(!0,t,0,e,i)}function aat(t,e,i){const n=Ge(Y,4);e.queryControlPoints(n),PB(t,n,4,i),e.setControlPoints(n)}function lat(t,e,i){K(0)}function cat(t,e,i){K(0)}function gO(t,e,i){const n=c9(t),s=Qie(n,c9(e)),r=Qie(n,c9(i));return r===0||s>0&&r>0&&r<=s||s<0&&r<0&&r>=s}function ose(t,e,i,n){const s=new Ze;s.setCoords(e,i);const r=n.width();let o=Math.floor((t-e)/r)*r+t;const l=s.getCenter();for(;Math.abs(o-l)>Math.abs(o+r-l);)o+=r;return o}class uat extends Aa{constructor(){super(),this.m_geometryDeque=[],this.m_index=-1}next(){if(this.m_geometryDeque.length>0){this.m_index++;const e=this.m_geometryDeque[0];return this.m_geometryDeque.shift(),e}return null}getGeometryID(){return this.m_index}tick(e){this.m_geometryDeque.push(e)}tock(){return!0}getRank(){return 1}}function hat(t,e){return t===e||t!==null&&e!==null&&t.m_csType===e.m_csType&&(t.m_WKID===0&&e.m_WKID===0?t.m_hashCode===e.m_hashCode&&t.m_canonicalWkt===e.m_canonicalWkt:t.m_WKID===e.m_WKID)}function dat(t,e){return t===e||t!==null&&e!==null&&t.m_csType===e.m_csType&&(t.m_WKID===0&&e.m_WKID===0?t.m_csType===1?t.m_peCoordSys.isEqual(e.m_peCoordSys):t.m_peCoordSys===e.m_peCoordSys:t.m_WKID===e.m_WKID)}class IB{constructor(e,i=!0){this.m_PCSHorizon=null,this.m_GCSHorizon=null,this.m_GCSSplitLines=null,this.m_bGCSHorisonIsInclusive=!1,this.m_oneMeterPCS=0,this.m_oneDegreeGCS=0,this.m_gcsUnitFactor=0,this.m_northPole=Y.getNAN(),this.m_southPole=Y.getNAN(),this.m_polesUpdated=0,this.m_domain=xe.constructEmpty(),this.m_primeMeridian=Number.NaN,this.m_geogToProjFactor=1,this.m_geogToProjOffset=0,this.m_geogToProjFactorsUpdated=0,this.m_oneMillimeter=0,this.m_centralMeridian=0,this.m_pPCSInfoNoDomain=null,this.m_oldWKID=-1973,this.m_vcsWKID=-1,this.m_bIsPannable=!1,this.m_bCached=!1,this.m_pannableExtent=xe.constructEmpty(),this.m_pannableExtentGCS=xe.constructEmpty(),this.m_areaOfUse=null,this.m_canonicalWkt="",this.m_peCoordSys=e,this.m_WKID=E2.getCode(e),this.m_WKID<=0?(this.m_WKID=0,this.m_canonicalWkt=SB(e,0,!0),this.m_hashCode=EQe(this.m_canonicalWkt)):this.m_hashCode=_2(this.m_WKID);const n=this.m_peCoordSys.getType();this.m_csType=n===Vi.PE_TYPE_PROJCS?2:1,K(n===Vi.PE_TYPE_PROJCS||n===Vi.PE_TYPE_GEOGCS),n===Vi.PE_TYPE_PROJCS&&(e.loadConstants()||Je("PeProjcs.loadConstants failed"));const s=n===Vi.PE_TYPE_GEOGCS?this.m_peCoordSys:this.m_peCoordSys.getGeogcs();n!==Vi.PE_TYPE_GEOGCS&&E2.getCode(s),this.m_unit=yit(e),this.m_primeMeridian=s.getPrimem().getLongitude();{const r=s.getUnit().getUnitFactor();this.m_gcsUnitFactor=r;let o=Math.PI/(180*r);Math.abs(o-1)<1e-10&&(o=1),this.m_oneDegreeGCS=o}if(n===Vi.PE_TYPE_PROJCS){const r=this.m_peCoordSys,o=r.getUnit().getUnitFactor();this.m_oneMeterPCS=1/o,this.m_oneMillimeter=.001/o,this.m_pPCSInfoNoDomain=Za.generate(r,Za.PE_PCSINFO_OPTION_NONE),this.m_pPCSInfoNoDomain||xt("cannot create pcs info"),this.m_bIsPannable=this.m_pPCSInfoNoDomain.isPannableRectangle(),this.m_centralMeridian=this.m_pPCSInfoNoDomain.getCentralMeridian()}else{this.m_bIsPannable=!0,this.m_polesUpdated=1,this.m_oneMeterPCS=0;const r=1/s.getUnit().getUnitFactor(),o=s.getDatum().getSpheroid().getAxis();this.m_oneMillimeter=.001/o*r,this.m_centralMeridian=0}this.m_bIsPannable&&(this.updateGCSHorizon(),this.updatePCSHorizon(),this.updatePoles(),this.updateDomain(),this.updatePannableExtent(),this.updatePannableExtentGCS())}[Symbol.dispose](){}getHashCode(){return this.m_hashCode}getPCSHorizonPannable(){return this.m_PCSHorizon}getGCSHorizonPannable(){return this.m_GCSHorizon}getPCSInfo(){return K(this.m_pPCSInfoNoDomain),this.m_pPCSInfoNoDomain}getCentralMeridian(){return this.m_centralMeridian}updateGCSHorizon(){if(this.m_peCoordSys.getType()!==Vi.PE_TYPE_PROJCS)return;let e=!0;const i=this.m_peCoordSys,n=i.getGeogcs(),s=i.horizonGcsGenerate();if(!s)return;K(s.length>0);const r=s[0].getNump(),o=s[0].getKind();let l,c;e=s[0].getInclusive()>0;const f=this.getOneDegreeGCSUnit(),y=90*f,_=360*f,x=370*f,S=180*f*Vi.PE_HORIZON_DELTA/Math.PI,P=xe.constructEmpty();let A=null;if(r>1){for(let D=1;D<r;D++)if(s[D].getKind()===Vi.PE_HORIZON_LINE){A||(A=new vi);const N=s[D].getCoord();A.startPathCoords(N[0][0],N[0][1]),A.lineToCoords(N[1][0],N[1][1])}}if(o===Vi.PE_HORIZON_RECT){const D=s[0].getCoord();if(P.setFromPoints([new Y(D[0][0],D[0][1]),new Y(D[1][0],D[1][1])],2),Math.abs(P.ymax-y)<1e-7*S&&(P.ymax=y),Math.abs(P.ymin+y)<1e-7*S&&(P.ymin=-y),P.width()>x){const F=-400*f,G=F+5*_;P.setCoords({xmin:F,ymin:P.ymin,xmax:G,ymax:P.ymax})}const N=new ur({env2D:P});this.m_GCSHorizon||(this.m_GCSHorizon=N,this.m_bGCSHorisonIsInclusive=e)}else{let D=this.getPCSInfo().isGcsHorizonMultiOverlap();const N=Dve(n,null,null,1),F=[],G=new Ze;for(let re=0;re<r;re++){if(s[re].getKind()!==Vi.PE_HORIZON_POLY)continue;l=s[re].getSize();const ne=s[re].getCoord(),oe=xe.constructEmpty();oe.setFromPoints(X_(ne),l),F.push(new Ze(oe.xmin,oe.xmax)),oe.width(),G.merge(F.at(-1))}let V=!1;const B=new Ze;G.width()>_&&F.length>1?(B.vmin=this.getCentralMeridian()-_,B.vmax=B.vmin+2*_,V=!0,D=!0):(B.vmin=G.vmin,B.vmax=B.vmin+_);const W=re=>{let ne=0;for(;F[re].vmin+ne<B.vmin;)ne+=_;for(;F[re].vmax+ne-_>B.vmin;)ne-=_;return ne};let J=new Wt;if(D){const re=new uat,ne=new C0().executeMany(re,N,null);for(let oe=0;oe<r;oe++){if(s[oe].getKind()!==Vi.PE_HORIZON_POLY)continue;l=s[oe].getSize();const pe=s[oe].getCoord();c=s[oe].getInclusive()>0;const ce=new Wt;if(ce.addPathPoint2D(X_(pe),l-1,!0),V){const ue=W(oe),se=F[oe].clone();se.move(ue);let de=ue;const Se=new _i;do{Se.setShiftCoords(de,0);const Pe=ce.clone();Pe.applyTransformation(Se),re.tick(Pe),re.tock(),de+=_,se.move(_)}while(se.vmin<B.vmax)}else re.tick(ce),ne.tock()}J=ne.next()}else{J=new Wt;for(let re=0;re<r;re++){if(s[re].getKind()!==Vi.PE_HORIZON_POLY)continue;l=s[re].getSize();const ne=s[re].getCoord();if(c=s[re].getInclusive()>0,K(c===e),V){const oe=new Wt;oe.addPathPoint2D(X_(ne),l-1,!0);const pe=W(re),ce=F[re].clone();ce.move(pe);let ue=pe;const se=new _i;do{if(ue!==0){se.setShiftCoords(ue,0);const de=new Wt({copy:oe});de.applyTransformation(se),J.addPath(de,0,!0)}else J.addPath(oe,0,!0);ue+=_,ce.move(_)}while(ce.vmin<B.vmax)}else J.addPathPoint2D(X_(ne),l-1,!0)}}V&&(J=new cx().execute(J,new xe(B.vmin,-y-f,B.vmax,y+f),N,null)),e?new ux().accelerateGeometry(J,N,1):new z7().accelerateGeometry(J,N,1),new dve().accelerateGeometry(J,N,1),this.m_GCSHorizon===null&&(this.m_GCSHorizon=J,this.m_bGCSHorisonIsInclusive=e,this.m_GCSSplitLines=A)}}updateAreaOfUse(){return null}updatePCSHorizon(){if(this.m_peCoordSys.getType()!==Vi.PE_TYPE_PROJCS)return;const e=this.m_peCoordSys.horizonPcsGenerate();if(!e)return;let i;this.getPCSInfo();const n=e[0].getKind();e[0].getInclusive();const s=xe.constructEmpty(),r=e[0].getNump();let o=!1;if(n===Vi.PE_HORIZON_RECT){const l=e[0].getCoord();s.setFromPoints(X_(l),2),i=new ur({env2D:s})}else{let l=-1;for(let _=0;_<r;_++)e[_].getKind()===Vi.PE_HORIZON_POLY&&(l=_);K(l>=0);const c=e[l].getSize()-1,f=e[l].getCoord(),y=new Wt;i=y,y.addPathPoint2D(X_(f),c,!0),o=!0}if(this.getPCSInfo().isDensificationNeeded()){K(n!==Vi.PE_HORIZON_RECT);const l=1e5*this.getOneMeterPCSUnit();i=new t0().execute(i,l,0,0,null)}if(o){{const l=new ur;i.queryEnvelope(l),i.calculateArea2D(),i.calculateLength2D(),i.getExteriorRingCount()}new ux().accelerateGeometry(i,null,1)}this.m_PCSHorizon===null&&(this.m_PCSHorizon=i)}updatePannableExtent(){const e=this.m_peCoordSys.getType();if(e===Vi.PE_TYPE_PROJCS){const i=this.m_peCoordSys,n=this.getPCSInfo().getCentralMeridian(),s=i.getGeogcs();s||xt("");const r=[n+1/s.getUnit().getUnitFactor()*Math.PI,0];tl.geogToProj(i,1,r);const o=r[0],l=i.getParameters()[Vi.PE_PARM_X0].getValue(),c=this.getPCSHorizon(),f=xe.constructEmpty();c.queryEnvelope(f);const y=Math.abs(o-l),_=y+l,x=-1*y+l,S=f.ymax,P=f.ymin;this.m_pannableExtent.setCoords({xmin:x,ymin:P,xmax:_,ymax:S})}else if(e===Vi.PE_TYPE_GEOGCS){const i=1/this.m_peCoordSys.getUnit().getUnitFactor()*Math.PI;this.m_pannableExtent.setCoords({xmin:-i,ymin:-i/2,xmax:i,ymax:i/2})}else xt("")}updatePannableExtentGCS(){const e=this.m_peCoordSys.getType();if(e===Vi.PE_TYPE_PROJCS){const i=this.m_peCoordSys,n=this.m_centralMeridian,s=i.getGeogcs();s||xt("");const r=1/s.getUnit().getUnitFactor()*Math.PI,o=this.getGCSHorizon(),l=xe.constructEmpty();o.queryEnvelope(l),this.m_pannableExtentGCS.setCoords({xmin:n-r,ymin:l.ymin,xmax:n+r,ymax:l.ymax})}else if(e===Vi.PE_TYPE_GEOGCS){const i=1/this.m_peCoordSys.getUnit().getUnitFactor()*Math.PI;this.m_pannableExtentGCS.setCoords({xmin:-i,ymin:-i/2,xmax:i,ymax:i/2})}else xt("")}updateDomain(){if(this.m_csType===1){const e=400*this.getOneDegreeGCSUnit();this.m_domain=xe.construct(-e,-e,e,e)}else{K(this.m_csType===2);const e=Za.generate(this.m_peCoordSys,Za.PE_PCSINFO_OPTION_DOMAIN);e||xt("generate pcs info failed");const i=new xe(e.getDomainMinx(),e.getDomainMiny(),e.getDomainMaxx(),e.getDomainMaxy());this.m_domain.isEmpty()&&this.m_domain.setCoords({env2D:i})}}updatePoles(){if(this.m_peCoordSys.getType()===Vi.PE_TYPE_PROJCS){const e=90*this.getOneDegreeGCSUnit(),i=[[0,e],[0,-e]];tl.geogToProj(this.m_peCoordSys,2,i);const n=this.getPCSInfo().getNorthPoleLocation()!==Za.PE_POLE_OUTSIDE_BOUNDARY,s=this.getPCSInfo().getSouthPoleLocation()!==Za.PE_POLE_OUTSIDE_BOUNDARY;this.m_polesUpdated||(n&&this.m_northPole.setCoords(i[0][0],i[0][1]),s&&this.m_southPole.setCoords(i[1][0],i[1][1]),this.m_polesUpdated=1)}else this.m_polesUpdated=1}updateGeogToProjFactors(){if(this.m_peCoordSys.getType()===Vi.PE_TYPE_PROJCS){const e=this.getOneDegreeGCSUnit(),i=this.m_pPCSInfoNoDomain.getCentralMeridian(),n=[0,0,0,0];n[0]=i,n[1]=0,n[2]=i+e,n[3]=0;const s=tl.geogToProj(this.m_peCoordSys,2,n);K(s===2);const r=(n[2]-n[0])/e,o=n[0];this.m_geogToProjFactorsUpdated===0&&(this.m_geogToProjFactor=r,this.m_geogToProjOffset=o,this.m_geogToProjFactorsUpdated=1)}else this.m_geogToProjFactorsUpdated=1}getOneMeterPCSUnit(){return this.m_oneMeterPCS}getOneDegreeGCSUnit(){return this.m_oneDegreeGCS}getGcsUnitFactor(){return this.m_gcsUnitFactor}getUnitsPerMillimeter(){return this.m_oneMillimeter}getGCSSplitLines(){return this.m_bIsPannable?null:(this.m_GCSHorizon||this.updateGCSHorizon(),this.m_GCSSplitLines)}getGCSHorizon(){return this.m_bIsPannable?this.getGCSHorizonPannable():(this.m_GCSHorizon!==null||this.updateGCSHorizon(),this.m_GCSHorizon)}getGCSHorisonIsInclusive(){return this.m_bIsPannable||this.getGCSHorizon(),this.m_bGCSHorisonIsInclusive}getPCSHorizon(){return this.m_bIsPannable?this.getPCSHorizonPannable():(this.m_PCSHorizon!==null||this.updatePCSHorizon(),this.m_PCSHorizon)}getPole(e){return this.m_bIsPannable||this.m_polesUpdated!==0||this.updatePoles(),e?this.m_southPole:this.m_northPole}getGeogToProjFactors(){return this.m_geogToProjFactorsUpdated===0&&this.updateGeogToProjFactors(),ar(this.m_geogToProjFactor,this.m_geogToProjOffset)}getDomainXY(){if(this.m_bIsPannable)return this.m_domain.clone();let e=!1;return e=this.m_domain.isEmpty(),e&&this.updateDomain(),this.m_domain.clone()}getPrimeMeridian(){return this.m_primeMeridian}getLatestID(){return this.m_WKID}getOldID(){let e=this.m_oldWKID;if(e<0){if(e=0,this.m_WKID>0){const i=[0],n=[0];hlt(this.m_peCoordSys.getType(),this.m_WKID,i,n)||xt("query_code_change"),e=i[0]}this.m_oldWKID=e}return e}isCustomWkid(){return!1}isPannable(){return this.m_bIsPannable}getPannableExtent(){return this.m_pannableExtent.clone()}getPannableExtentGCS(){return this.m_pannableExtentGCS.clone()}getAreaOfUse(){return this.m_areaOfUse!==null?this.m_areaOfUse:this.updateAreaOfUse()}getVcsCode(){return 0}saveMemory(){}getCSType(){return this.m_csType}getUnit(){return this.m_unit}setCached(){this.m_bCached=!0}getCached(){return this.m_bCached}static equal(e,i){return!1}static equal_for_projection(e,i){return!1}}function yO(t,e,i,n){return fat(!0,t,e,i,n)}function fat(t,e,i,n,s,r){return new MB(2,e,i,n,s,r)}function pat(){return{centralMeridianOfOutputGCS:Number.NaN,densificationStep:Number.NaN,clipWithInputHorizon:!0,clipWithOutputHorizon:!0,legacyHorizonClipping:!1,normalizeResultGeometry:!1,equals(t){return va(this.centralMeridianOfOutputGCS,t.centralMeridianOfOutputGCS)&&va(this.densificationStep,t.densificationStep)&&this.clipWithInputHorizon===t.clipWithInputHorizon&&this.clipWithOutputHorizon===t.clipWithOutputHorizon&&this.legacyHorizonClipping===t.legacyHorizonClipping&&this.normalizeResultGeometry===t.normalizeResultGeometry}}}function mat(){return{flagsMask:0,setFlag(t,e){e?this.flagsMask|=t:this.flagsMask&=~t},hasFlag(t){return!!(this.flagsMask&t)}}}function vq(){return{m_extendedParams:pat(),m_extendedParamsInternal:mat()}}function vO(){return vq()}class MB{constructor(e,i,n,s,r,o){let l,c;this.m_datumTran=null,this.m_bIdentity=!0,this.m_bIdentityGeogToGeog=!0,this.m_bVertical=!1,this.m_bNormalize=!1,i&&n||Je("!inputSR || !outputSR"),s&&s.getType()===0&&(s.m_bReadOnly=!0),this.m_bNormalize=!1,e!==1&&(l=i.getVCS(),c=n.getVCS(),this.m_bVertical=l!=null&&c!=null),this.m_inputSR=i,this.m_outputSR=n,this.m_bIdentity=!1,this.m_bIdentityGeogToGeog=!1,K(!this.m_params),r&&(this.m_params=vq(),this.m_params.m_extendedParams=r),o&&(this.m_params||(this.m_params=vq()),this.m_params.m_extendedParamsInternal=o);let f=!1;const y=s!=null,_=i.getCoordinateSystemType(),x=n.getCoordinateSystemType();if(n.isPannable()&&_!==0&&r){const A=r.centralMeridianOfOutputGCS;if(!Number.isNaN(A)&&n.isPannable()){const D=n.getPannableExtent(),N=D.getCenterX();if(N!==A){const F=Math.ceil(D.width());A+F!==N+F&&(f=!0)}}}const S=r&&r.normalizeResultGeometry;if(i.equals(n))return this.m_bIdentity=!f,this.m_bIdentityGeogToGeog=!0,void this.updateProjector();const P=!y&&i.equalForProjection(n,this.m_bVertical);this.m_bIdentity=P&&!f,this.m_bIdentity?this.m_bIdentityGeogToGeog=!0:_!==0&&x!==0&&(S&&this.m_outputSR.isPannable()&&(this.m_bNormalize=S),this.m_datumTran=s||null,this.m_bIdentityGeogToGeog=(!this.m_datumTran||this.m_datumTran.count()===0)&&this.m_inputSR.getGCS().equalForProjection(this.m_outputSR.getGCS(),this.m_bVertical)),this.updateProjector()}getInputSR(){return this.m_inputSR}getOutputSR(){return this.m_outputSR}getDatumTransformation(){return this.m_datumTran}getInverse(){var i;const e=new MB(1,this.m_outputSR,this.m_inputSR,(i=this.m_datumTran)==null?void 0:i.createInverse());return e.m_bIdentity=this.m_bIdentity,e.m_bVertical=this.m_bVertical,e.m_bIdentityGeogToGeog=this.m_bIdentityGeogToGeog,e.updateProjector(),e}isIdentity(){return this.m_bIdentity}getExtendedParams(){return this.m_params?this.m_params.m_extendedParams:vO().m_extendedParams}equals(e){return K(0),!1}isVertical(){return this.m_bVertical}isMatchingTransformation(e,i){return K(0),!1}getGeographicTransformations(){return this.m_datumTran}getExtendedParamsImpl(){return this.m_params?this.m_params.m_extendedParams:vO().m_extendedParams}getExtendedParamsInternal(){return this.m_params?this.m_params.m_extendedParamsInternal:vO().m_extendedParamsInternal}isIdentityGeogToGeog(){return this.m_bIdentityGeogToGeog}normalizeOutput(){return this.m_bNormalize}updateProjector(){this.m_projector=new zrt(this)}}const xve=new Map,xC=new Map,_q=new Map;function gat(t){let e=t.getCode();if(e>0)return wve(e)||ase(E2.coordsys(e));const i=t.getName();if(xC.has(i)){const n=xC.get(i);if(n&&n.deref()){const s=n.deref();if(s.m_peCoordSys.isEqual(t))return s}}return e=E2.getCode(t),ase(e>0?E2.coordsys(e):t)}function yat(t){xC.delete(t.m_peCoordSys.getName()),_q.delete(SB(t.m_peCoordSys,0,!1))}let _O;function vat(){return _O||(_O=E2.unit(9001)),_O}function ase(t){const e=Fve(t),i=t.getCode();if(i>0){const l=wve(i);if(l)return l}const n=t.getName();let s=xC.get(n);if(s){const l=s.deref();if(l&&l.m_peCoordSys.isEqual(t))return l}const r=new IB(e.release());if(i>0)return r.setCached(),xve.set(i,new WeakRef(r)),xC.set(n,new WeakRef(r)),r;const o=SB(t,0,!1);if(s=_q.get(o),s){const l=s.deref();if(l)return l}return r.setCached(),_q.set(o,new WeakRef(r)),r}function wve(t){const e=xve.get(t);if(e)return e.deref()}class wC extends N1e{constructor(e){return e===void 0?(super(),this.m_wkid=9001,void(this.m_peUnit=null)):typeof e=="number"?(super(),this.m_factor=e,void(this.m_wkid=0)):(super(e),void(e||(this.m_factor=1,this.m_wkid=9001,this.m_peUnit=vat())))}getUnitType(){return 0}convertFromMeters(e){return e/this.getUnitToBaseFactor()}convertToMeters(e){return e*this.getUnitToBaseFactor()}}function _at(t,e=!0){return K(0),{}}function bat(t,e,i,n,s,r){const o=.5*(n.sub(e).length()+n.sub(i).length());t.m_center.assign(n),t.m_startAngle=Math.atan2(e.y-t.m_center.y,e.x-t.m_center.x),xat(t,Math.atan2(i.y-t.m_center.y,i.x-t.m_center.x),s,r);const l=t.constructEllipticArcEndPointsCenter(e,i,o,1,0,Math.abs(t.m_sweepAngle)>Math.PI,t.m_sweepAngle>0,n);return t.setProjectionBehavior(0),l}function xat(t,e,i,n){let s=t.m_startAngle,r=t.m_sweepAngle;const o=1e-12;for(;s>Di();)s-=2*Di();for(;s<=-Di();)s+=2*Di();if(!Number.isNaN(e)){for(;e>Di();)e-=2*Di();for(;e<=-Di();)e+=2*Di();!i&&e>s&&(e-=2*Di()),i&&e<s&&(e+=2*Di()),r=e-s,Math.abs(r)<o&&!n&&(r=i?2*Di():-2*Di()),Math.abs(r)>2*Di()-o&&n&&(r=0)}Math.abs(r)>2*Di()-o&&(r=r>=0?2*Di():-2*Di(),t.setEndXY(t.getStartXY())),Math.abs(r)<o&&(r=0,t.setEndXY(t.getStartXY())),n=Math.abs(r)<=Di(),r&&(i=r>0),t.m_startAngle=iv(s),t.m_sweepAngle=r,px(t,!n),V7(t,i)}function wat(t,e,i,n){const s=[];return Sat(e,s),Eat(t,s,e,i)}function Sat(t,e){e.length=t;for(let i=0;i<e.length;++i)e[i]=i;t>3&&oet(t,e)}function Eat(t,e,i,n,s){let r=0;const o=[0,0,0];let l=0;const c=3;let f=0;for(let y=0;y<c;++y){let _=!1;for(;f<i;){const x=t.at(e[f]);let S=1;if(r===3?S=Y.inCircleRobust(t.at(n[0]),t.at(n[1]),t.at(n[2]),x):r===2?S=Y.inCircleRobust3Point(t.at(n[0]),t.at(n[1]),x):r===1&&x.equals(t.at(n[0]))&&(S=0),S<=0){if(S<0&&y+1<c){e[l]=Et(e[f],e[f]=e[l]);for(let A=0;A<r;A++)if(n[A]===e[f]){o[A]=f;break}l++}f++;continue}_=!0;let P=0;for(let A=0;A<r;A++)o[A]>f&&(n[P]=n[A],o[P]=o[A],P++);r=P,n[r]=e[f],o[r]=f,r++,r<3?f=l:(Y.orientationRobust(t.at(n[0]),t.at(n[1]),t.at(n[2]))===1&&(n[2]=Et(n[0],n[0]=n[2]),o[2]=Et(o[0],o[0]=o[2])),f++)}if(!_)break;if(y+1<c){l=0;let x=!1;for(let S=0;S<r;S++)for(let P=S+1;P<r;P++)o[S]>o[P]&&(o[P]=Et(o[S],o[S]=o[P]),n[P]=Et(n[S],n[S]=n[P]),x=!0);for(let S=0;S<r;S++)e[o[S]]=Et(e[S],e[S]=e[o[S]]),o[S]=S;x&&r===3&&Y.orientationRobust(t.at(n[0]),t.at(n[1]),t.at(n[2]))===1&&(n[2]=Et(n[0],n[0]=n[2]),o[2]=Et(o[0],o[0]=o[2]))}f=r}return r}function Cat(){return{e2:0,completeE:0}}class Pat{constructor(e,i){this.m_arc=e,this.m_sqrChordLength=i}getMaxDerivative(){return 1}getValue(e,i){return e===0?Y.sqrDistance(this.m_arc.getCoord2D(i),this.m_arc.getCoord2D(1-i))-this.m_sqrChordLength:0}getError(e){return K(0),0}}function Tat(t,e,i){if(rs(t))$1e(new ni({start:t.getStartXY(),end:t.getEndXY()}),e,i);else if(e.value()===0)i.set(t.getStartXY());else if(e.value()===1)i.set(t.getEndXY());else{const n=new Be;Mat(t,e,n);const s=new Be,r=new Be;Be.st_cosAndSin(n,s,r);const o=Ht.constructCoordsE(new Be(t.m_semiMajorAxis).mulThisE(s),new Be(t.m_semiMajorAxis).mulThis(t.m_minorMajorRatio).mulThisE(r)),l=new Be(t.m_rotation);Be.st_cosAndSin(l,s,r),o.rotateDirect(s,r),o.addThisE(Ht.constructPoint2D(t.m_center)),i.setE(o)}}function bO(t,e){return t.convertToCanonic(e)}function Iat(t,e){const i=new Ze(t.getStartAngle(),t.getEndAngle());i.normalize();const n=Bo(),s=G0(e,n);if(s<i.vmin){let r=s+n;for(;r<i.vmin;)r+=n;return i.containsCoordinate(r)?r:i.vmin-s<r-i.vmax?s:r}if(s>i.vmax){let r=s-n;for(;r>i.vmax;)r-=n;return i.containsCoordinate(r)||i.vmin-r<s-i.vmax?r:s}return s}function iv(t){let e=t,i=!1;return e<=-Di()?(e+=Bo(),i=!0):e>Di()&&(e-=Bo(),i=!0),e<=-Di()?(e=G0(e,Bo()),e<=-Di()&&(e+=Bo()),i=!0):e>Di()&&(e=G0(e,Bo()),e>Di()&&(e-=Bo()),i=!0),i&&(e>Di()||e<=-Di())&&(e=Di()),e}function lse(t,e,i){const n=i,s=n.getSemiAxes();let r=new Y(s.x*Math.cos(t[0]),s.y*Math.sin(t[0]));return r=n.convertFromCanonic(r),Y.sqrDistance(r,n.getStartXY())}function cse(t,e,i){const n=i,s=n.getSemiAxes(),r=t[0]+n.getStartAngle();let o=new Y(s.x*Math.cos(r),s.y*Math.sin(r));return o=n.convertFromCanonic(o),Y.sqrDistance(o,n.getEndXY())}function bq(t){if(t.m_center.isNAN())return t.m_startAngle=0,void(t.m_sweepAngle=0);const e=t.getStartXY(),i=t.getEndXY(),n=e.equals(i),s=DB(t),r=fx(t),o=t.projectionBehavior();if(n){const l=t.convertToCanonic(e),c=new Y(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);l.x/=c.x,l.y/=c.y,t.m_startAngle=iv(Math.atan2(l.y,l.x)),t.m_sweepAngle=s?r?Bo():-Bo():0}else{const l=t.convertToCanonic(e),c=new Y(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);l.x/=c.x,l.y/=c.y;const f=t.convertToCanonic(i);f.x/=c.x,f.y/=c.y,t.m_startAngle=Math.atan2(l.y,l.x),t.m_sweepAngle=Y.calculateAngle(l,f),r?t.m_sweepAngle<0&&(t.m_sweepAngle+=Bo()):t.m_sweepAngle>0&&(t.m_sweepAngle-=Bo()),t.m_startAngle=iv(t.m_startAngle);let y=lse([t.m_startAngle],1,t);if(y=Math.sqrt(y),y>.25*mf(t)){const x=t.m_startAngle-1e-4,S=t.m_startAngle+1e-4,P=[0];pie(lse,t,1,[t.m_startAngle],[x],[S],1e-14,P),t.m_startAngle=iv(P[0])}if(y=cse([t.m_sweepAngle],1,t),y=Math.sqrt(y),y>.25*mf(t)){const x=t.m_sweepAngle-1e-4,S=t.m_sweepAngle+1e-4,P=[0];pie(cse,t,1,[t.m_sweepAngle],[x],[S],1e-14,P),t.m_sweepAngle=P[0]}const _=Math.abs(t.m_sweepAngle)>Di();if(px(t,_),s!==_&&!s&&Math.abs(t.m_sweepAngle)>1.5*Di()||t.m_sweepAngle===0||r!==t.m_sweepAngle>0)return void Zu(t,e,i,o)}}function Is(t,e){return(Iat(t,e)-t.getStartAngle())/t.getSweepAngle()}function sf(t,e){return t.m_startAngle+e*t.m_sweepAngle}function Mat(t,e,i){i.assign(new Be(t.m_startAngle).addE(e.mulE(new Be(t.m_sweepAngle))))}function Aat(t,e){const i=new Be(t.m_cosr).sqrThis(),n=new Be(t.m_sinr).sqrThis(),s=new Be(t.m_minorMajorRatio),r=new Be(1/t.m_minorMajorRatio),o=s.mulE(i).addThisE(r.mulE(n)),l=s.subE(r).mulThis(2*t.m_cosr*t.m_sinr),c=s.mulE(n).addThisE(r.mulE(i));e[0]=o,e[1]=l,e[2]=c,e[3]=new Be(-t.m_semiMajorAxis).mulThis(t.m_semiMajorAxis).mulThis(t.m_minorMajorRatio)}function kat(t,e){const i=new tC;i.a11.setE(t[0]),i.a12=Be.st_mulByPower2(t[1],.5),i.a21.setE(i.a12),i.a22.setE(t[2]);const n=[Y.getNAN(),Y.getNAN()],s=[new Be,new Be];i.eigenSymmetric(s,n);const r=t[3].clone();return r.negateThis(),r.invThis(),s[0].mulThisE(r),s[1].mulThisE(r),s[0].sqrtThis().invThis(),s[1].sqrtThis().invThis(),e.x=s[0].toDouble(),e.y=s[1].toDouble(),Math.atan2(n[0].y,n[0].x)}function Dat(t,e,i){if(rs(t))return(i-e)*Y.distance(t.getStartXY(),t.getEndXY());if(t.m_minorMajorRatio===1)return Math.abs(t.getSweepAngle()*(e-i))*t.m_semiMajorAxis;const n=xq(t,e);return xq(t,i)-n}function xO(t){return t.m_cachedValues}function AB(t){if(t.m_cachedValues)return t.m_cachedValues;const e=Cat();return e.e2=Oat(t),e.completeE=Qj(e.e2),t.m_cachedValues=e,e}function use(t,e,i,n){if(!e.isEqual(t.m_XStart,t.m_YStart)||!i.isEqual(t.m_XEnd,t.m_YEnd)){if(rs(t))return t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,t.m_YEnd=i.y,pE(t),void t.afterCompletedModification();if(n&&Math.abs(t.getSweepAngle())<=1.01*xa()){const s=Ge(Y,3),r=Pve(t,s);if(N7(s)){if(s[0].assign(e),s[2].assign(i),sx(s),t.projectionBehavior()===0){let o=0,l=2;Y.sqrDistance(s[1],s[0])<Y.sqrDistance(s[1],s[2])&&(l=Et(o,o=l));const c=s[l].sub(s[o]),f=c.length();c.divThis(f);const y=s[1].sub(s[o]),_=y.length(),x=y.dotProduct(c)/_,S=y.crossProduct(c)/_,P=new Y;cr(s[o],s[l],.5,P);const A=.5*f/S*hs(1-x,0,1),D=s[1].side(s[o],s[l]),N=c.clone();D?N.leftPerpendicularThis():N.rightPerpendicularThis();const F=P.sub(N.mul(A));t.constructCircularArcThreePoint(s[0],s[2],F)}else G7(s,r*r,null,!1,t);return}}t.projectionBehavior()===0?Gat(t,e,i):Ive(t,e,i)}}function Nat(t,e,i){const n=t.projectionBehavior()===0;if(i<=2)return void Zu(t,e[0],e[i-1],n?0:1);if(n){t.constructCircularArcThreePoint(e[0],e[i-1],e[Math.trunc(i/2)]);const P=new Y;return t.queryCoord2D(.5,P),void t.m_interior.setCoordsPoint2D(P)}const s=t.getSemiMajorAxis(),r=t.getMinorMajorRatio(),o=t.getAxisXRotation(),l=t.getCenter(),c=new Array(4);c[0]=t.isMajor(),c[1]=!c[0],c[2]=c[0],c[3]=!c[0];const f=new Array(4);f[0]=t.isClockwise(),f[1]=f[0],f[2]=!f[0],f[3]=!f[0];const y=Math.trunc(i<5?1:(i+4)/5),_=Ge(Xc,4),x=new Array(4);let S=0;for(let P=0;P<4;P++){_[P].constructEllipticArcEndPointsCenter(e[0],e[i-1],s,r,o,c[P],f[P],l),x[P]=0;let A=0;for(let D=y;D<i-1;D+=y){const N=_[P].getClosestCoordinate(e[D],!1);x[P]+=Y.sqrDistance(_[P].getCoord2D(N),e[D]),A++}x[P]/=A,x[P]<x[S]&&(S=P)}t.assignCopy(_[S])}function Oat(t){return 1-Xi(t.m_minorMajorRatio)}function hse(t,e,i,n,s,r,o,l,c){return t.m_bits=0,t.m_rotation=r,aB(t,e),lB(t,i),t.m_cosr=Math.cos(r),t.m_sinr=Math.sin(r),px(t,o),V7(t,l),c!==void 0?t.m_center.assign(c):t.m_center.setNAN(),t.setProjectionBehavior(1),t.m_semiMajorAxis=n,t.m_minorMajorRatio=s,Cve(t,c===void 0)}function Zu(t,e,i,n){t.m_bits=0,t.m_rotation=0,aB(t,e),lB(t,i),t.m_interior.assign(e.add(i).mul(.5)),t.m_startAngle=0,t.m_sweepAngle=0,t.m_cosr=1,t.m_sinr=0,px(t,!1),V7(t,!1),t.m_center.setNAN(),t.m_semiMajorAxis=1,t.m_minorMajorRatio=0,t.setProjectionBehavior(n),t.afterCompletedModification()}function rs(t){return t.m_center.isNAN()}function xq(t,e){if(e===0)return 0;const i=AB(t),n=sf(t,e),s=xa(),r=Sve(t),o=eB(n+s,i.e2,i.completeE),l=t.m_semiMajorAxis*(o-r);return Math.abs(l)}function $at(t,e){if(rs(t)){const c=Y.distance(t.getStartXY(),t.getEndXY());return c===0?0:e/c}if(t.m_minorMajorRatio===1){const c=Math.abs(t.getSweepAngle()*t.m_semiMajorAxis);return c===0?0:e/c}if(e===0)return 0;const i=t.getSweepAngle();if(i===0)return .5;const n=AB(t),s=xa(),r=Sve(t);i<0&&(e=-e);const o=e/t.m_semiMajorAxis+r;let l=uQe(o,n.e2,n.completeE);return l-=s,l-=t.getStartAngle(),l/i}function Sve(t){const e=AB(t);return eB(t.getStartAngle()+xa(),e.e2,e.completeE)}function kB(t,e,i){if(e instanceof cet)return void K(0);if(K(!Eve(t)),e.isIdentity())return;d9(t);const n=Y.getNAN();n.x=t.m_XStart,n.y=t.m_YStart,e.transformInPlace(n);const s=Y.getNAN();if(s.x=t.m_XEnd,s.y=t.m_YEnd,e.transformInPlace(s),rs(t))return t.m_XStart=n.x,t.m_YStart=n.y,t.m_XEnd=s.x,void(t.m_YEnd=s.y);const r=t.m_center.clone();if(e.transformInPlace(r),i||e.isUniformNoRotation()){let o=fx(t);if(e.isReflective()&&(o=!o),t.projectionBehavior()===0){if(!n.equals(s)){const _=t.m_interior.clone();return e.transformInPlace(_),void t.constructCircularArcThreePoint(n,s,_)}return void bat(t,n,s,r,o,!1)}const l=new Y(t.m_cosr,t.m_sinr);e.transformWithoutTranslateInPlace(l);const c=Math.atan2(l.y,l.x),f=t.getSemiAxes();e.transformWithoutTranslateInPlace(f);const y=t.m_center.clone();return e.transformInPlace(y),void t.constructEllipticArcEndPointsCenter(n,s,f.x,f.y/f.x,c,t.isMajor(),o,y)}{{const _=new Array(4);Aat(t,_);const x=new tC;if(x.a11.setE(_[0]),x.a12.setE(_[1]),x.a12.mulThisByPower2(.5),x.a21.setE(x.a12),x.a22.setE(_[2]),!x.det().isZero()){const S=new tC;if(S.a11.set(e.xx),S.a12.set(e.xy),S.a21.set(e.yx),S.a22.set(e.yy),S.invertThis()){const P=S.clone();P.transposeThis();const A=x.clone();if(A.mulThis(S),A.mulLeftThis(P),!A.det().isZero()){const D=Ge(Be,4);D[0].setE(A.a11),D[1].setE(A.a12),D[1].mulThisByPower2(2),D[2].setE(A.a22),D[3].setE(_[3]);const N=Y.getNAN(),F=kat(D,N);let G=fx(t);return e.isReflective()&&(G=!G),void t.constructEllipticArcEndPointsCenter(n,s,N.x,N.y/N.x,F,t.isMajor(),G,r)}}}}const o=[Y.getNAN(),Y.getNAN(),Y.getNAN()];o[0].setCoords(t.getSemiMajorAxis(),0),o[0].rotateDirect(t.m_cosr,t.m_sinr),o[1].setCoords(t.getSemiMajorAxis(),t.getSemiMinorAxis()),o[1].rotateDirect(t.m_cosr,t.m_sinr),o[2].setCoords(0,t.getSemiMinorAxis()),o[2].rotateDirect(t.m_cosr,t.m_sinr);let l=t.isClockwise();l&&(o[2]=Et(o[0],o[0]=o[2]));const c=.5;e.transformWithoutTranslateArray(o,3,o),e.isReflective()&&(l=!l);const f=new Y(0,0),y=t.createInstance();G7(o,c,f,!1,y),t.constructEllipticArcEndPointsCenter(n,s,y.getSemiMajorAxis(),y.getMinorMajorRatio(),y.getAxisXRotation(),t.isMajor(),!l,r)}}function wO(t,e){t.m_cachedValues=e}function d9(t){t.m_cachedValues=null}function V7(t,e){const i=e?1:0;t.m_bits=-2&t.m_bits|i}function fx(t){return!!(1&t.m_bits)}function px(t,e){const i=e?1:0;t.m_bits=-3&t.m_bits|i<<1}function DB(t){return!!(2&t.m_bits)}function Rat(t){if(t.m_center.isNAN())return!1;const e=8,i=new Ht;i.setWithEps(t.getStartXY(),e),i.subThisE(new Ht().setWithEps(t.m_center,e));const n=new Be;n.setWithEps(t.m_rotation,e);const s=new Be,r=new Be;Be.st_cosAndSin(n,s,r),i.rotateReverse(s,r);const o=new Ht;o.setWithEps(t.getEndXY()),o.subThisE(Ht.constructPoint2D(t.m_center)),o.rotateReverse(s,r);const l=new Be;l.setWithEps(t.m_semiMajorAxis,e);const c=l.clone(),f=new Be;f.setWithEps(t.m_minorMajorRatio),c.mulThisE(f),i.x.divThisE(l),i.y.divThisE(c),o.x.divThisE(l),o.y.divThisE(c);const y=i.x.sqr().addThisE(i.y.sqr()).subThisE(hm),_=o.x.sqr().addThisE(o.y.sqr()).subThisE(hm);return!y.isZero()||!_.isZero()}function Eve(t){return!!(8&t.m_bits)}function f9(t){t.m_bits&=-9}function Cve(t,e){f9(t);const i=t.getStartXY(),n=t.getEndXY();let s=!1;const r=DB(t),o=fx(t),l=t.projectionBehavior(),c=i.equals(n);let f=t.m_minorMajorRatio===0||t.m_semiMajorAxis===0;if(Number.isNaN(t.m_minorMajorRatio)&&(t.m_semiMajorAxis===0?t.m_minorMajorRatio=1:m1e("NAN minor major ratio and non-zero major axis")),f||(f=e?c:t.m_center.isNAN()),f)return Zu(t,i,n,l),!0;t.m_semiMajorAxis=Math.abs(t.m_semiMajorAxis),t.m_minorMajorRatio=Math.abs(t.m_minorMajorRatio),t.m_minorMajorRatio>1&&(t.m_semiMajorAxis*=t.m_minorMajorRatio,t.m_minorMajorRatio=1/t.m_minorMajorRatio);const y=new Y(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);if(c){const _=t.convertToCanonic(i);_.x/=y.x,_.y/=y.y;const x=Math.sqrt(Xi(_.x)+Xi(_.y));if(s=x!==1,t.m_semiMajorAxis*=x,y.mulThis(x),t.m_startAngle=iv(Math.atan2(_.y,_.x)),!r)return t.m_interior.assign(i),t.m_sweepAngle=0,t.afterCompletedModification(),s;t.m_sweepAngle=o?Bo():-Bo()}else{let _=t.m_center.isNAN()||Rat(t);if(!_){const x=t.convertToCanonic(i);x.x/=y.x,x.y/=y.y;const S=new Y(1,0);t.m_startAngle=Y.calculateAngle(S,x);const P=t.convertToCanonic(n);P.x/=y.x,P.y/=y.y,t.m_sweepAngle=Y.calculateAngle(x,P),_=!dse(t)}if(_){s=!0;const x=i.sub(n).mulThis(.5);x.rotateReverse(t.m_cosr,t.m_sinr);let S=Xi(x.x/y.x)+Xi(x.y/y.y);S>1&&(S=Math.sqrt(S),t.m_semiMajorAxis*=S,y.mulThis(S));const P=new Y(0,0);{const A=y.x*y.x,D=y.y*y.y,N=A*x.y*x.y+D*x.x*x.x,F=A*D-N;if(F>0){const G=Math.sqrt(F/N);P.setCoords(y.x*x.y/y.y,-y.y*x.x/y.x),P.mulThis(G),r===o&&P.negateThis()}}{const A=new Y(P.x,P.y);A.rotateDirect(t.m_cosr,t.m_sinr),A.addThis(i.add(n).mulThis(.5)),t.m_center.assign(A)}}if(bq(t),!dse(t))return Zu(t,i,n,l),!0}return pE(t),t.afterCompletedModification(),s}function Pve(t,e){K(Math.abs(t.getSweepAngle())<15*Math.PI/16);const i=t.getSemiMajorAxis(),n=t.getSemiMinorAxis();let s;if(i===0)return e[0].setCoordsPoint2D(t.getStartXY()),e[1].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getStartXY()),s=1,s;if(n===0)return e[0].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getEndXY()),e[1]=Y.lerp(e[0],e[2],.5),s=1,s;const r=t.getSweepAngle(),o=t.getStartAngle(),l=o+r,c=new Y(-i*Math.sin(o),n*Math.cos(o)),f=new Y(-i*Math.sin(l),n*Math.cos(l));c.normalize(),f.normalize(),c.rotateDirect(t.m_cosr,t.m_sinr),f.rotateDirect(t.m_cosr,t.m_sinr),e[0].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getEndXY()),e[1].setSub(e[2],e[0]);const y=c.crossProduct(f);return e[1].assign(c.mul(e[1].crossProduct(f)/y)),e[1].addThis(e[0]),s=Math.cos(.5*r),s}function G7(t,e,i,n,s){const r=t[0].sub(t[1]),o=t[2].sub(t[1]),l=r.crossProduct(o),c=r.dotProduct(o),f=e;K(f<=1),K(f>0);const y=.5/(1-f),_=r.sqrLength(),x=c,S=o.sqrLength(),P=Xi(l),A=r.sub(o).sqrLength();if(P===0||c<=-Math.sqrt(_)*Math.sqrt(S))return Zu(s,t[0],t[2],1),!1;const D=[0,0],N=new Ze;N.setInfinite();const F=Mv(2*P,-(A/f+4*x),2*(1-f)/f,N,!1,D);if(F===0)return Zu(s,t[0],t[2],1),!1;F===1&&(D[1]=D[0]);const G=Math.sqrt(y/D[0]),V=Math.sqrt(y/D[1]),B=.5/f;let W=B-S*D[0],J=B-_*D[0];Math.abs(W)>Math.abs(J)?J=x*D[0]-B+1:W=x*D[0]-B+1;const re=r.mul(W).add(o.mul(J)),ne=re.norm(1)<1e-15*G?0:Math.atan2(re.y,re.x)+Math.PI,oe=r.add(o),pe=i?i.clone():t[1].add(oe.mul(y)),ce=t[0].sub(pe),ue=t[2].sub(pe),se=ce.crossProduct(ue)<0,de=!1;return new Xc,s.constructEllipticArcEndPointsCenter(t[0],t[2],G,V/G,ne,de,!se,pe)}function Lat(t,e,i,n,s){return G7(t,e,i,n,s)}function dse(t){let e=!1;{const n=new Y(t.m_semiMajorAxis*Math.cos(t.m_startAngle),t.getSemiMinorAxis()*Math.sin(t.m_startAngle));n.rotateDirect(t.m_cosr,t.m_sinr),n.addThis(t.m_center),e=Y.distance(t.getStartXY(),n)>mf(t)}let i=!1;if(!e){const n=new Y(t.m_semiMajorAxis*Math.cos(t.m_startAngle+t.m_sweepAngle),t.getSemiMinorAxis()*Math.sin(t.m_startAngle+t.m_sweepAngle));n.rotateDirect(t.m_cosr,t.m_sinr),n.addThis(t.m_center),i=Y.distance(t.getEndXY(),n)>mf(t)}return!e&&!i}function Fat(t,e,i,n){i===0&&Je("construct_enclosing_circle");const s=[0,0,0],r=wat(e,i,s);if(r===1)t.constructCircleRadius(0,e[s[0]],n);else if(r===2){const o=Y.lerp(e[s[0]],e[s[1]],.5),l=Y.distance(e[s[0]],o),c=Y.distance(e[s[1]],o);t.constructCircleRadius(Math.max(l,c),o,n)}else if(r===3){const o=Y.calculateCircleCenterFromThreePoints(e[s[0]],e[s[1]],e[s[2]]),l=Y.distance(e[s[0]],o),c=Y.distance(e[s[1]],o),f=Y.distance(e[s[2]],o);t.constructCircleRadius(Math.max(l,c,f),o,n)}else xt("unexpected")}function fse(t){if(rs(t)||t.isDegenerate(0))return 0;const e=t.m_semiMajorAxis,i=t.getSemiMinorAxis(),n=e*e+i*i,s=t.getStartAngle(),r=t.getEndAngle(),o=t.m_center.y-t.m_YStart,l=t.m_cosr,c=t.m_sinr;let f=1,y=0;t.m_rotation&&(f=(l-c)*(l+c),y=2*l*c);const _=((-.5*(r-s)+.25*f*(2*Math.cos(r+s)*Math.sin(r-s)))*i+-2*Math.sin(.5*(r+s))*Math.sin(.5*(r-s))*l*o)*e/n;let x=0;return t.m_rotation&&(x=.125*(-2*Math.sin(r+s)*Math.sin(r-s))*y-i*o/n*(2*Math.cos(.5*(r+s))*Math.sin(.5*(r-s)))*c),n*(_+x)+-.5*(t.m_XEnd-t.m_XStart)*(t.m_YEnd-t.m_YStart)}function pE(t){t.queryCoord2D(.5,t.m_interior)}function pse(t,e,i,n,s){if(s){if(Im(e,i)!==0)return 2}else if(s1(e,i))return 1;return SC(t,e,i,null,null,null,n,s!==void 0&&s,!0,!1)!==0?4:0}function zat(t,e,i,n,s){if(s){if(Im(e,i)!==0)return 2}else if(s1(e,i))return 1;return Tve(t,e,i,null,null,null,n,s!==void 0&&s,!0,!1)!==0?4:0}function SC(t,e,i,n,s,r,o,l,c,f){if(rs(e))return k7(new ni({start:e.getStartXY(),end:e.getEndXY()}),i,n,s,r,o,l,f);s!==null&&(s.length=0),r!==null&&(r.length=0),n!==null&&(n.length=0);const y=Ll(e,i);if(Zc(e,i,o=Math.max(y,o)))return 0;const _=i.getStartXY();_.subThis(e.m_center);const x=i.getEndXY();x.subThis(e.m_center),_.rotateReverse(e.m_cosr,e.m_sinr),x.rotateReverse(e.m_cosr,e.m_sinr);const S=x.clone();S.subThis(_);const P=e.m_semiMajorAxis,A=1/P,D=e.getSemiMinorAxis(),N=1/D,F=S.clone();F.leftPerpendicularThis();const G=Math.atan2(D*F.y,P*F.x),V=new Array(16),B=new Array(16);let W=0;const J=[G,G+Math.PI];for(let se=0;se<2;++se){const de=Is(e,J[se]);if(de>=0&&de<=1){V[W]=de;const Se=e.getCoord2D(V[W]);B[W]=i.getClosestCoordinate(Se,!1),Y.distance(Se,i.getCoord2D(B[W]))<=o&&W++}}const re=_.x*A,ne=_.y*N,oe=S.x*A,pe=S.y*N;let ce=Mv(oe*oe+pe*pe,2*(re*oe+ne*pe),re*re+ne*ne-1,Ze.unit(),!1,B);K(ce>=0);for(let se=0;se<ce;se++){const de=S.mul(B[se]).add(_);de.x*=A,de.y*=N;const Se=Is(e,Math.atan2(de.y,de.x));if(Se>=0&&Se<=1){V[W]=Se;const Pe=e.getCoord2D(Se);B[W]=i.getClosestCoordinate(Pe,!1),Y.distance(Pe,i.getCoord2D(B[W]))<=o&&W++}}K(W<V.length+4);const ue=new Array(16);ce=e.intersectPoint(i.getStartXY(),ue,o);for(let se=0;se<ce;se++,W++)V[W]=ue[se],B[W]=0;ce=e.intersectPoint(i.getEndXY(),ue,o);for(let se=0;se<ce;se++,W++)V[W]=ue[se],B[W]=1;ce=i.intersectPoint(e.getStartXY(),ue,o);for(let se=0;se<ce;se++,W++)V[W]=0,B[W]=ue[se];ce=i.intersectPoint(e.getEndXY(),ue,o);for(let se=0;se<ce;se++,W++)V[W]=1,B[W]=ue[se];return W===0?0:Kc(t,e,i,V,B,W,n,s,r,o,l,c,f)}function Tve(t,e,i,n,s,r,o,l,c,f){if(rs(e)){const oe=new ni({start:e.getStartXY(),end:e.getEndXY()});return SC(t,i,oe,n,r,s,o,l,c,!0)}if(rs(i)){const oe=new ni({start:i.getStartXY(),end:i.getEndXY()});return SC(t,e,oe,n,s,r,o,l,c,f)}const y=Ll(e,i);o=Math.max(o,y);let _=!1;{const oe=e.getSemiAxes(),pe=e.getCenter(),ce=i.getSemiAxes(),ue=i.getCenter(),se=Y.distance(ue,pe),de=oe.x+ce.x;if(se>de+o)return 0;if(oe.y>ce.x){if(se+ce.x+o<oe.y)return 0}else if(ce.y>oe.x&&se+oe.x+o<ce.y)return 0;if(c&&!l){const Se=e.m_minorMajorRatio===1&&e.isClosed()&&e.isMajor(),Pe=i.m_minorMajorRatio===1&&i.isClosed()&&i.isMajor();if(Se&&Pe&&(_=!0,se<=de)&&Math.max(oe.x,ce.x)<=Math.min(oe.x,ce.x)+se)return K(!s&&!r),1}}if(!_&&Zc(e,i,o))return 0;const x=[],S=[],P=!1,A=!1,D=dq(e,0,0,P,A,x,S,null),N=[],F=[],G=dq(i,0,0,P,A,N,F,null);if(D===1&&G===1){const oe=new wa({points:x,weights:S}),pe=new wa({points:N,weights:F}),ce=[],ue=[],se=lC(!1,oe,pe,n,s===null?null:ce,r===null?null:ue,o,l,c,f);if(se>0&&s!==null||r!==null){s&&(s.length=0),r&&(r.length=0);for(let de=0;de<se;++de){if(s)if(An(ce[de],0,1))s.push(ce[de]);else{const Se=oe.tToLength(ce[de]),Pe=e.lengthToT(Se);s.push(Pe)}if(r)if(An(ue[de],0,1))r.push(ue[de]);else{const Se=pe.tToLength(ue[de]),Pe=i.lengthToT(Se);r.push(Pe)}}}return se}let V=[];const B=[];let W=0;const J=c&&!l;for(let oe=0;oe<D;oe++){const pe=new wa({points:x.slice(2*oe,2*oe+3),weights:S.slice(2*oe,2*oe+3)});let ce=0;for(let ue=0;ue<G;ue++){B.length<=ue&&B.push(new wa({points:N.slice(2*ue,2*ue+3),weights:F.slice(2*ue,2*ue+3)}));const se=[],de=[],Se=J?null:se,Pe=J?null:de,Re=lC(!1,pe,B[ue],null,Se,Pe,o,!1,J,!1);if(Re>0&&J)return 1;for(let $e=0;$e<Re;++$e){if(se[$e]===0&&oe===0)se[$e]=0;else if(se[$e]===1&&oe===D-1)se[$e]=1;else{const we=pe.tToLength(se[$e])+W,Fe=e.lengthToT(we);se[$e]=Fe}if(de[$e]===0&&ue===0)de[$e]=0;else if(de[$e]===1&&ue===G-1)de[$e]=1;else{const we=B[ue].tToLength(de[$e])+ce,Fe=i.lengthToT(we);de[$e]=Fe}V.push(ar(se[$e],de[$e]))}ce+=B[ue].calculateLength2D()}W+=pe.calculateLength2D()}if(V.length===0)return 0;if(l&&(V=V.filter(oe=>!An(oe.first,0,1)||!An(oe.second,0,1)||!e.getCoord2D(oe.first).equals(i.getCoord2D(oe.second)))),c)return V.length;const re=[],ne=[];for(const oe of V)re.push(oe.first),ne.push(oe.second);return Kc(t,e,i,re,ne,re.length,n,s,r,o,l,c,f)}function mse(t,e,i){if(i.setCoords(t.getCoord2D(e.vmin)),i.mergeNe(t.getCoord2D(e.vmax)),rs(t))return;const n=t.getSemiAxes(),s=[0,0,0,0];{const o=Math.atan2(-n.y*t.m_sinr,n.x*t.m_cosr),l=o+Math.PI,c=Math.atan2(n.y*t.m_cosr,n.x*t.m_sinr),f=c+Math.PI;s[0]=Is(t,o),s[1]=Is(t,l),s[2]=Is(t,c),s[3]=Is(t,f)}const r=new Y;for(let o=0;o<4;o++){const l=s[o];e.containsExclusiveCoordinate(l)&&(t.queryCoord2D(l,r),i.mergeNe(r))}}function gse(t,e,i,n,s){if(t.m_semiMajorAxis===0)return i.vmin;let r=Y.getNAN();t.queryCoord2D(i.vmin,r);let o=Y.getNAN();if(t.queryCoord2D(i.vmax,o),rs(t))return new ni({start:r,end:o}).getClosestCoordinate(e,n);const l=bO(t,e);if(r=bO(t,r),o=bO(t,o),t.m_minorMajorRatio===1){if(l.isEqual(0,0))return i.vmin;const W=Is(t,Math.atan2(l.y,l.x));return n||i.containsCoordinate(W)?W:Y.distance(l,r)<=Y.distance(l,o)?i.vmin:i.vmax}const c=t.getSemiMajorAxis(),f=t.getSemiMinorAxis(),y=(c-f)*(c+f),_=Xi(y),x=l.x,S=l.y,P=Xi(f*S),A=f*y*S*2,D=[new Be(P),new Be(A),new Be(_-Xi(c*x)-P),new Be(-A),new Be(-_)],N=Ge(Be,4),F=z1e(D,4,new Ze(-1,1),!1,N,4);let G=i.vmin,V=Y.sqrDistance(l,r);{const W=Y.sqrDistance(l,o);W<V&&(G=i.vmax,V=W)}K(!n);let B=new Array(8);for(let W=0;W<F;++W){const J=N[W].value(),re=Math.sqrt(1-J*J),ne=Math.atan2(J,re),oe=Math.atan2(J,-re);B[2*W]=Is(t,ne),B[2*W+1]=Is(t,oe)}B=B.slice(0,2*F),Hx(B);for(let W=0,J=2*F;W<J;++W)if(B[W]>i.vmin&&B[W]<i.vmax){const re=Y.sqrDistance(e,t.getCoord2D(B[W]));V>re&&(V=re,G=B[W])}return G}function yse(t,e,i){return K(0),!1}function qat(t,e,i){K(!rs(t));const n=new _i;n.setRotateAngle(-t.getAxisXRotation());const s=new Y;n.queryTransform(e,s);const r=Math.atan2(-s.x*t.getMinorMajorRatio(),s.y),o=r+Di();let l=Is(t,r),c=Is(t,o);c<l&&(c=Et(l,l=c));let f=0;return l>=0&&l<=1&&(i[f++]=l),c>=0&&c<=1&&(i[f++]=c),f}function Vat(t,e,i){K(0)}function Gat(t,e,i,n){const s=t.getStartXY(),r=t.getEndXY(),o=s.equals(r),l=e.equals(i);if(!o&&!l){const A=new _i;A.setShiftCoords(-t.m_XStart,-t.m_YStart);const D=Y.distance(e,i),N=Y.distance(s,r),F=D/N;A.scale(F,F);const G=r.sub(s);G.divThis(N);const V=i.sub(e);V.divThis(D);const B=G.crossProduct(V),W=V.dotProduct(G);return A.rotate(W,B),A.shiftCoords(e.x,e.y),kB(t,A,!0),t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,void(t.m_YEnd=i.y)}const c=new Y;if(t.queryCoord2D(.5,c),l){if(o){const A=t.m_center.add(e.sub(s));t.constructEllipticArcEndPointsCenter(e,i,t.getSemiMajorAxis(),1,0,!0,!t.isClockwise(),A),t.setProjectionBehavior(0)}else if(t.isMajor()){const A=c.sub(e).getUnitVector().mul(2*t.getSemiMajorAxis()).add(e);t.constructCircularArcThreePoint(e,i,A)}else t.constructCircularArcThreePoint(e,i,e);return}const f=e.add(i).mul(.5),y=i.sub(e);y.rightPerpendicularThis();const _=f.add(y),x=Y.getClosestCoordinate(f,_,t.getCenter(),!0),S=new Y;cr(f,_,x,S);const P=Y.distance(e,S);t.constructEllipticArcEndPointsCenter(e,i,P,1,0,!0,!t.isClockwise(),S),t.setProjectionBehavior(0)}function Ive(t,e,i,n){const s=t.getStartXY(),r=t.getEndXY(),o=s.equals(r),l=e.equals(i);if(!o&&!l){const S=new _i;return S.initializeFromTwoPoints(s,r,e,i),kB(t,S,!0),t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,t.m_YEnd=i.y,t.endPointModified(),void t.normalizeAfterEndpointChange()}if(!t.isMajor())return void Zu(t,e,i,1);if(o&&l){const S=t.m_center.add(e.sub(s));return void t.constructEllipticArcEndPointsCenter(e,i,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),S)}if(!o){const S=.5*(Bo()-Math.abs(t.getSweepAngle())),P=(t.getSweepAngle()+S*ws(t.getSweepAngle()))/t.getSweepAngle(),A=new Y;t.queryCoord2D(P,A),t.constructEllipticArcEndPointsCenter(A,A,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),t.getCenter());const D=t.getCenter().add(e.sub(A));return void t.constructEllipticArcEndPointsCenter(e,i,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),D)}const c=Y.sqrDistance(e,i);let f=.25,y=.75;if(c<Y.sqrDistance(t.getCoord2D(.25),t.getCoord2D(.75))){const S=[0],P=r1(new Pat(t,c),Ze.construct(0,.25),1,S);P>0&&(K(P===1),f=S[0],y=1-S[0])}const _=t.getCoord2D(f),x=t.getCoord2D(y);K(!_.equals(x)),t.constructEllipticArcEndPointsCenter(_,x,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),t.m_center),Ive(t,e,i)}function vse(t,e,i){if(e<=262144)return Xat(t,e,i);K(0);const n=new Hat({points:t,n:e}),s=0;let r=1;const o=t[s].clone();for(;r<e&&t[r].equals(o);)r++;if(n.m_treeHull.addElement(s),r<e){n.m_treeHull.addBiggestElement(r);for(let c=r+1;c<e;c++){const f=t[c],y=n.treeHull(f);y!==-1&&n.m_treeHull.setElement(y,c)}}let l=0;for(let c=n.m_treeHull.getFirst();c!==-1;c=n.m_treeHull.getNext(c))i[l++]=n.m_treeHull.getElement(c);return l}function jat(t,e,i){const n=t.getImpl(),s=n.getPathStart(e),r=n.getPathEnd(e),o=!n.isClosedPath(e)&&n.isClosedPathInXYPlane(e),l=n.getAttributeStreamRef(0),c=2*s;let f=2*r;if(o&&(f-=2),f-c<6)return!0;const y=l.readPoint2D(c),_=l.readPoint2D(c+2),x=l.readPoint2D(c+4);if(!g0(Y.orientationRobust(_,x,y)))return!1;const S=_.clone(),P=new Y;for(let A=c+6;A<f;A+=2)if(P.assign(_),_.assign(x),l.queryPoint2D(A,x),!g0(Y.orientationRobust(_,x,y))||!g0(Y.orientationRobust(S,x,y))||!g0(Y.orientationRobust(_,x,P)))return!1;return!0}class Bat{constructor(e){this.m_handleP=-1,this.m_handleQ=-1,this.m_currentSupport=-1,this.m_area=0,this.m_bDone=!0,K(0),this.m_convexHull=e,this.m_function=this.done_}next(){return K(0),!1}get_vertex_handle_p(){return K(0),0}get_vertex_handle_q(){return K(0),0}get_current_support(){return K(0),0}getNext(e){return K(0),0}getPrev(e){return K(0),0}intialize_(){return K(0),!1}increment_(){return K(0),!1}increment_q_(){return K(0),!1}increment_p_(){return K(0),!1}parallel_edge_with_q_support_(){return K(0),!1}parallel_edge_with_p_support_(){return K(0),!1}done_(){return K(0),!1}}class Hat{nullGetXY(e){return xt("m_getXY is null"),{}}nullDeleteNode(e){xt("m_deleteNode is null")}constructor(e){return this.m_treeHull=new jt,this.m_shape=null,this.m_stream=null,this.m_points=null,this.m_geometryHandle=-1,this.m_pathHandle=-1,this.m_getXY=this.nullGetXY,this.m_deleteNode=this.nullDeleteNode,e?e.stream?(this.m_treeHull.setCapacity(Math.min(20,e.n)),this.m_stream=e.stream,this.m_getXY=this.getXYStream,this.m_deleteNode=this.deleteNodeStream,this.m_points=null,this.m_geometryHandle=ae,void(this.m_pathHandle=ae)):e.points?(this.m_treeHull.setCapacity(Math.min(20,e.n)),this.m_points=e.points,this.m_getXY=this.getXYPoints,this.m_deleteNode=this.deleteNodePoints,this.m_stream=null,this.m_geometryHandle=ae,void(this.m_pathHandle=ae)):void K(0):(this.m_treeHull.setCapacity(20),this.m_shape=new Hn,this.m_geometryHandle=this.m_shape.createGeometry(me.enumMultiPoint),this.m_pathHandle=this.m_shape.insertPath(this.m_geometryHandle,ae),this.m_getXY=this.getXYShape,this.m_deleteNode=this.deleteNodeShape,this.m_stream=null,void(this.m_points=null))}getXYShape(e){return this.m_shape.getXY(e)}getXYStream(e){return this.m_stream.readPoint2D(e<<1)}getXYPoints(e){return K(0),new Y}deleteNodeShape(e){const i=this.m_treeHull.getElement(e);this.m_treeHull.deleteNode(e),this.m_shape.removeVertex(i,!1)}deleteNodeStream(e){this.m_treeHull.deleteNode(e)}deleteNodePoints(e){K(0)}addGeometry(e){if(e.isEmpty())return;const i=e.getGeometryType();if(i===me.enumGeometryCollection){const n=e;for(let s=0,r=n.getGeometryCount();s<r;s++)this.addGeometry(n.getGeometry(s))}else rl(i)?this.addMultiVertexGeometry(e):Ds(i)?this.addSegment(e):i===me.enumEnvelope?this.addEnvelope(e):i===me.enumPoint?this.addPoint(e):Je("Convex_hull: geometry not supported")}getBoundingGeometry(){const e=new Ut,i=this.m_treeHull.getFirst(),n=new Wt({vd:this.m_shape.getVertexDescription()});if(this.m_treeHull.size()===0)return n;n.reserve(this.m_treeHull.size()),this.m_shape.queryPoint(this.m_treeHull.getElement(i),e),n.startPathPoint(e);for(let s=this.m_treeHull.getNext(i);s!==-1;s=this.m_treeHull.getNext(s))this.m_shape.queryPoint(this.m_treeHull.getElement(s),e),n.lineToPoint(e);return n}getAntipodalPairsIterator(){return K(0),new Bat(this)}getXY(e){return K(0),new Y}getXYWithIndex(e){return K(0),new Y}getFirst(){return K(0),0}getLast(){return K(0),0}getNext(e){return K(0),0}getPrev(e){return K(0),0}getVertexIndex(e){return K(0),0}getPointCount(){return K(0),0}static constructOrientedMinimumBoundingBox(e,i,n,s,r){K(0)}addMultiVertexGeometry(e){const i=new Ut,n=e.getImpl(),s=new Y;for(let r=0;r<e.getPointCount();r++){n.queryXY(r,s);const o=this.addPoint2D(s);if(o!==-1){e.getPointByVal(r,i);const l=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(o,l)}}}addEnvelope(e){const i=new Ut;for(let n=0;n<4;n++){const s=new Y;e.queryCorner(n,s);const r=this.addPoint2D(s);if(r!==-1){e.queryCornerByVal(n,i);const o=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(r,o)}}}addSegment(e){const i=new Ut,n=e.getStartXY(),s=this.addPoint2D(n);if(s!==-1){e.queryStart(i);const l=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(s,l)}const r=e.getEndXY(),o=this.addPoint2D(r);if(o!==-1){e.queryEnd(i);const l=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(o,l)}}addPoint(e){const i=e.getXY(),n=this.addPoint2D(i);if(n!==-1){const s=this.m_shape.addPoint(this.m_pathHandle,e);this.m_treeHull.setElement(n,s)}}addPoint2D(e){let i=-1;if(this.m_treeHull.size()===0)return i=this.m_treeHull.addElement(-4),i;if(this.m_treeHull.size()===1){const n=this.m_treeHull.getElement(this.m_treeHull.getFirst()),s=this.m_shape.getXY(n);return e.equals(s)||(i=this.m_treeHull.addBiggestElement(-5)),i}return i=this.treeHull(e),i}treeHull(e){let i=-1;do{const n=this.m_treeHull.getFirst(),s=this.m_treeHull.getLast(),r=this.m_treeHull.getElement(n),o=this.m_treeHull.getElement(s),l=this.m_getXY(r),c=this.m_getXY(o),f=Y.orientationRobust(c,e,l);if(g0(f)){i=this.m_treeHull.addBiggestElement(-1);const y=this.treeHullWalkBackward(e,s,n);y!==n&&this.treeHullWalkForward(e,n,this.m_treeHull.getPrev(y));break}if(_se(f)){let y=this.m_treeHull.getRoot(),_=this.m_treeHull.getFirst(),x=this.m_treeHull.getLast(),S=-1,P=-1,A=-1;for(;_!==this.m_treeHull.getPrev(x);){P=this.m_treeHull.getElement(y);const F=this.m_getXY(P);_se(Y.orientationRobust(F,e,l))?(x=y,y=this.m_treeHull.getLeft(y)):(_=y,y=this.m_treeHull.getRight(y))}y=x,S=_,P=this.m_treeHull.getElement(y),A=this.m_treeHull.getElement(S);const D=this.m_getXY(P),N=this.m_getXY(A);if(S!==n&&!g0(Y.orientationRobust(N,e,D)))break;i=this.m_treeHull.addElementAtPosition(S,y,-2,!0,!1),this.treeHullWalkForward(e,y,s),this.treeHullWalkBackward(e,S,n);break}{const y=Wat(e,c,l);if(y===-1){const _=this.m_treeHull.getPrev(s);this.m_treeHull.deleteNode(s),i=this.m_treeHull.addBiggestElement(-3),this.treeHullWalkBackward(e,_,n)}else if(y===1){const _=this.m_treeHull.getNext(n);this.m_treeHull.deleteNode(n),i=this.m_treeHull.addElementAtPosition(-1,_,-3,!0,!1),this.treeHullWalkForward(e,_,s)}break}}while(!1);return i}treeHullWalkForward(e,i,n){if(i===n)return n;let s=i,r=this.m_treeHull.getElement(s),o=this.m_treeHull.getNext(s);const l=this.m_getXY(r);for(;s!==n&&this.m_treeHull.size()>2;){const c=this.m_treeHull.getElement(o),f=this.m_getXY(c);if(g0(Y.orientationRobust(f,e,l)))break;const y=s;s=o,r=c,l.assign(f),o=this.m_treeHull.getNext(s),this.m_deleteNode(y)}return s}treeHullWalkBackward(e,i,n){if(i===n)return n;let s=i,r=this.m_treeHull.getElement(s),o=this.m_treeHull.getPrev(s);const l=this.m_getXY(r);for(;s!==n&&this.m_treeHull.size()>2;){const c=this.m_treeHull.getElement(o),f=this.m_getXY(c);if(g0(Y.orientationRobust(l,e,f)))break;const y=s;s=o,r=c,l.assign(f),o=this.m_treeHull.getPrev(s),this.m_deleteNode(y)}return s}}function Uat(t,e,i){const n=e.sub(t),s=i.sub(e);if(n.x===0)return s.x>0?-1:0;if(n.y===0)return s.y>0?1:s.y<0?-1:0;const r=n.crossProduct(s),o=4*Number.EPSILON*(Math.abs(s.x*n.y)+Math.abs(s.y*n.x));return r>o?1:r<-o?-1:Y.orientationRobust(t,e,i)}function Yat(t,e,i){const n=e.sub(t),s=i.sub(e);if(n.x===0)return s.x<0?-1:0;if(n.y===0)return s.y>0?-1:s.y<0?1:0;const r=n.crossProduct(s),o=4*Number.EPSILON*(Math.abs(s.x*n.y)+Math.abs(s.y*n.x));return r>o?1:r<-o?-1:Y.orientationRobust(t,e,i)}function Xat(t,e,i){const n=new On(0);for(let l=0;l<e;l++)n.add(l);const s={userSort(l,c,f){f.sort(l,c,(y,_)=>t[y].compareX(t[_]))},getValue:l=>t[l].x};pd.sortEx(n,0,e,s);let r=0;e:for(let l=0;l<e;++l){const c=n.read(l);for(;r>=2;){const f=i[r-2],y=i[r-1];if(t[y].equals(t[c])){n.write(l,-1);continue e}if(!(Uat(t[f],t[y],t[c])>=0)){y===n.read(l-1)&&n.write(l-1,-1);break}r--}i[r++]=c,r===2&&t[c].equals(t[i[0]])&&(n.write(1,-1),r--)}const o=r+1;e:for(let l=e-2;l>=0;--l){const c=n.read(l);if(!(c<0)){for(;r>=o;){const f=i[r-2],y=i[r-1];if(t[y].equals(t[c]))continue e;if(!(Yat(t[f],t[y],t[c])>=0))break;r--}if(l!==0){const f=i[r-1];i[r++]=c,t[c].equals(t[f])&&r--}}}return r>1&&t[i[0]].equals(t[i[r-1]])&&r--,r}function g0(t){return t<0}function _se(t){return t>0}function Wat(t,e,i){let n=-1;e.y===i.y?n=0:e.x===i.x?n=1:n=Math.abs(e.x-i.x)>=Math.abs(e.y-i.y)?0:1;let s=-1;return s=e[n]<i[n]?t[n]<e[n]?-1:i[n]<t[n]?1:0:e[n]<t[n]?-1:t[n]<i[n]?1:0,s}function $5(t,e,i,n,s){return j7(t,!1,e,i,n,s)}function j7(t,e,i,n,s,r){const o=i.getGeometryType(),l=n.getGeometryType(),c=Math.max(s,Ll(i,n));if(o===me.enumLine&&l===me.enumLine)return bet(i,n,c,r);let f=i,y=n,_=i.getStartXY(),x=i.getEndXY();if(_.compare(x)>0&&(f=i.clone().reverse()),_=n.getStartXY(),x=n.getEndXY(),_.compare(x)>0&&(y=n.clone().reverse()),e){if(i.equals(n))return 2;if(fet(i,n,c))return 4}switch(o){case me.enumLine:switch(l){case me.enumEllipticArc:return pse(t,y,f,c,r);case me.enumBezier:return Uie(t,y,f,c,r);case me.enumRationalBezier2:return zie(t,y,f,c,r);case me.enumBezier2:return Cie();default:xt("")}break;case me.enumEllipticArc:switch(l){case me.enumLine:return pse(t,f,y,c,r);case me.enumEllipticArc:return zat(t,f,y,c,r);case me.enumBezier:return Yie(t,y,f,c,r);case me.enumRationalBezier2:return qie();case me.enumBezier2:return Pie();default:xt("")}break;case me.enumBezier:switch(l){case me.enumLine:return Uie(t,f,y,c,r);case me.enumEllipticArc:return Yie(t,f,y,c,r);case me.enumBezier:return Jtt(t,f,y,c,r);case me.enumRationalBezier2:return Xie(t,f,y,c,r);case me.enumBezier2:return Wie();default:xt("")}break;case me.enumRationalBezier2:switch(l){case me.enumLine:return zie(t,f,y,c,r);case me.enumEllipticArc:return qie();case me.enumBezier:return Xie(t,y,f,c,r);case me.enumRationalBezier2:return Dtt(t,f,y,c,r);case me.enumBezier2:return Vie();default:xt("")}break;case me.enumBezier2:switch(l){case me.enumLine:return Cie();case me.enumEllipticArc:return Pie();case me.enumBezier:return Wie();case me.enumRationalBezier2:return Vie();case me.enumBezier2:return ttt();default:xt("")}break;default:xt("")}}function Im(t,e,i=!0){if(!i&&!Mve(t,e))return 0;const n=t.isLine()&&e.isLine();if(t.getStartXY().equals(e.getStartXY())&&t.getEndXY().equals(e.getEndXY())){if(n)return 1;const r=t.getGeometryType();if(r!==e.getGeometryType())return 0;if(r===me.enumBezier){const o=t,l=e;return o.getControlPoint1().equals(l.getControlPoint1())&&o.getControlPoint2().equals(l.getControlPoint2())?1:0}if(r===me.enumEllipticArc)return yse()?1:0;if(r===me.enumRationalBezier2){const o=t,l=e;if(o.getControlPoint1().equals(l.getControlPoint1())&&o.getStandardFormWeight()===l.getStandardFormWeight())return 1}else if(r===me.enumBezier2){const o=e;if(t.getControlPoint1().equals(o.getControlPoint1()))return 1}return 0}if(t.getStartXY().equals(e.getEndXY())&&t.getEndXY().equals(e.getStartXY())){if(n)return-1;const r=t.getGeometryType();if(r!==e.getGeometryType())return 0;if(r===me.enumBezier){const o=t,l=e;return o.getControlPoint1().equals(l.getControlPoint2())&&o.getControlPoint2().equals(l.getControlPoint1())?-1:0}if(r===me.enumEllipticArc)return yse(),-1;if(r===me.enumRationalBezier2){const o=t,l=e;if(o.getControlPoint1().equals(l.getControlPoint1())&&o.getStandardFormWeight()===l.getStandardFormWeight())return-1}else if(r===me.enumBezier2){const o=e;if(t.getControlPoint1().equals(o.getControlPoint1()))return-1}return 0}return 0}function Mve(t,e){const i=t.getGeometryType();return i===e.getGeometryType()&&(i!==me.enumEllipticArc||t.projectionBehavior()===e.projectionBehavior())}function Qv(t,e,i,n,s,r,o){!s&&r&&Je("");const l=e.getGeometryType(),c=i.getGeometryType(),f=Math.max(o,Ll(e,i));if(n&&(n.length=0),s&&(s.length=0),r&&(r.length=0),l===me.enumLine&&c===me.enumLine)return k7(e,i,n,s,r,f,!1,!1);let y=e,_=i,x=e.getStartXY(),S=e.getEndXY(),P=!1,A=!1;x.compare(S)>0&&(y=e.clone(!0).reverse(),P=!0),x=i.getStartXY(),S=i.getEndXY(),x.compare(S)>0&&(_=i.clone(!0).reverse(),A=!0);let D=0;switch(l){case me.enumLine:switch(c){case me.enumEllipticArc:D=SC(t,_,y,n,r,s,f,!1,!1,!0);break;case me.enumBezier:D=fC(t,_,y,n,r,s,f,!1,!1,!0);break;case me.enumRationalBezier2:D=rx(t,_,y,n,r,s,f,!1,!1,!0);break;case me.enumBezier2:D=hM(t,_,y,n,r,s,f,!1,!1,!0);break;default:xt("")}break;case me.enumEllipticArc:switch(c){case me.enumLine:D=SC(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumEllipticArc:D=Tve(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumBezier:D=aq(t,_,y,n,r,s,f,!1,!1,!0);break;case me.enumRationalBezier2:D=Gie();break;case me.enumBezier2:D=Tie(t,_,y,n,r,s,f,!1,!1,!0);break;default:xt("")}break;case me.enumRationalBezier2:switch(c){case me.enumLine:D=rx(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumEllipticArc:D=Gie();break;case me.enumBezier:D=lq(t,_,y,n,r,s,f,!1,!1,!0);break;case me.enumRationalBezier2:D=lC(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumBezier2:D=jie(t,y,_,n,s,r,f,!1,!1,!1);break;default:xt("")}break;case me.enumBezier2:switch(c){case me.enumLine:D=hM(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumEllipticArc:D=Tie(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumBezier:D=Zie(t,_,y,n,r,s,f,!1,!1,!0);break;case me.enumRationalBezier2:D=jie(t,_,y,n,r,s,f,!1,!1,!0);break;case me.enumBezier2:D=tye(t,y,_,n,s,r,f,!1,!1,!1);break;default:xt("")}break;case me.enumBezier:switch(c){case me.enumLine:D=fC(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumEllipticArc:D=aq(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumBezier:D=gB(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumRationalBezier2:D=lq(t,y,_,n,s,r,f,!1,!1,!1);break;case me.enumBezier2:D=Zie(t,y,_,n,s,r,f,!1,!1,!1);break;default:xt("")}break;default:xt("")}if(P){if(s){for(let N=0;N<D;N++)s[N]=1-s[N];s.reverse()}n&&n.reverse(),r&&r.reverse()}if(A&&r)for(let N=0;N<D;N++)r[N]=1-r[N];return D}function MT(t,e,i){return e===i?0:(e>i&&(i=Et(e,e=i)),t.cut(e,i,!0).calculateUpperLength2D())}function Zat(t,e,i,n,s){const r=[],o=[],l=[];for(let f=0,y=s;f<y;f++)r.push(t.calculateSubLengthFromStart(i[f])),o.push(e.calculateSubLengthFromStart(n[f])),An(i[f],0,1)&&An(n[f],0,1)&&t.getCoord2D(i[f]).equals(e.getCoord2D(n[f]))&&l.push(f);if(l.length===0||l.length===s)return;l.sort((f,y)=>i[f]<i[y]?-1:i[f]>i[y]?1:n[f]<n[y]?-1:n[f]>n[y]?1:0);let c=-1;for(const f of l){if(c>=0&&i[f]===i[c]&&i[f]===i[c]){c=f;continue}c=f;const y=[];y.length=s;for(let _=0;_<y.length;++_)y[_]=_;y.sort((_,x)=>{const S=r[f],P=o[f],A=r[_]-S,D=o[_]-P,N=A*A+D*D,F=r[x]-S,G=o[x]-P,V=F*F+G*G;return N<V?-1:N>V?1:0});for(let _=0;_<s;_++){const x=y[_];if(x===f||i[x]===i[f]&&n[x]===n[f]||An(i[x],0,1)&&An(n[x],0,1))continue;const S=(W,J,re,ne)=>{const oe=new Ht,pe=new Be;pe.setWithEps(1);const ce=new Be;ce.set(J,pe.eps()),t.queryCoord2DE(ce,oe);const ue=new Ht;t.queryCoord2DE(new Be(W),ue);let se=!1;return oe.eq(ue)&&(ce.set(ne,pe.eps()),e.queryCoord2DE(ce,oe),e.queryCoord2DE(new Be(re),ue),se=oe.eq(ue)),!se},P=Y.getNAN();t.queryCoord2D(i[x],P);const A=Y.getNAN();if(e.queryCoord2D(n[x],A),Y.distance(P,A)===0&&S(i[f],i[x],n[f],n[x]))break;const D=new Ze(n[x],n[f]);D.normalizeNoNAN();const N=new Ze(i[x],i[f]);N.normalizeNoNAN();let F=-1,G=Number.POSITIVE_INFINITY,V=Number.POSITIVE_INFINITY,B=i[x];P.assign(t.getCoord2D(B));for(let W=0;W<5;W++){const J=e.getClosestCoordinateOnInterval(P,D,-1);A.assign(e.getCoord2D(J));const re=Y.distance(P,A);if(B=t.getClosestCoordinateOnInterval(A,N,-1),B===i[f]&&J===n[f]){F=1;break}P.assign(t.getCoord2D(B));const ne=Y.distance(A,P);if(!(ne<V&&re<G)){F=0;break}if(ne===0&&re===0){S(i[f],i[x],n[f],n[x])?(i[x]=B,n[x]=J,F=0):F=1;break}V=ne,G=re}if(F===-1&&(F=An(i[x],0,1)||An(n[x],0,1)?0:1),F!==1)break;i[x]=i[f],n[x]=n[f]}}}function Kc(t,e,i,n,s,r,o,l,c,f,y,_,x){if(!r)return 0;const S=(N,F)=>{for(let G=0;G<r;++G){let V=F[G];if(An(V,0,1)){V=OQe(V);continue}const B=N.getCoord2D(V);V<.5?B.equals(N.getStartXY())&&MT(N,0,V)<=mf(N)&&(F[G]=0):B.equals(N.getEndXY())&&MT(N,V,1)<=mf(N)&&(F[G]=1)}};S(e,n),S(i,s),Zat(e,i,n,s,r);const P=[];for(let N=0,F=r;N<F;N++)P.push(N);const A=(N,F)=>x?Hte(s[N],n[N],s[F],n[F]):Hte(n[N],s[N],n[F],s[F]);if(P.length>1){P.sort(A);const N=Math.max(mf(e),mf(i));let F=0;for(let G=1,V=P.length;G<V;G++){const B=n[P[F]],W=n[P[G]],J=s[P[F]],re=s[P[G]];if(B!==W||J!==re)if(!(MT(e,B,W)<=N&&MT(i,J,re)<=N)||An(B,0,1)&&An(J,0,1)||An(W,0,1)&&An(re,0,1))F++,P[F]=P[G];else{const ne=Y.distance(e.getCoord2D(B),i.getCoord2D(J)),oe=Y.distance(e.getCoord2D(W),i.getCoord2D(re));if(ne<=oe)continue;if(oe<ne){P[F]=P[G];continue}}}if(P.length=F+1,P.length===1&&P[0]!==0&&(n[0]=n[P[0]],s[0]=s[P[0]],P[0]=0),P.length>2){const G=Ze.constructEmpty(),V=Ze.constructEmpty();G.setCoords(n[P[0]],n[P.at(-1)]),V.setCoords(s[P[0]],s[P.at(-1)]);let B=!0;for(let W=1,J=P.length-1;W<J;W++)if(!G.containsCoordinate(n[P[W]])||!V.containsCoordinate(s[P[W]])){B=!1;break}if(B){const W=[.5,.2,.7,.1,.3,.4,.6,.8,.9];for(let J=0;J<W.length;J++){let re=Hi(G.vmin,G.vmax,W[J]);const ne=e.getCoord2D(re);if(!i.isCloserThanDistance(ne,V,f)){B=!1;break}re=Hi(V.vmin,V.vmax,W[J]);const oe=i.getCoord2D(re);if(!e.isCloserThanDistance(oe,G,f)){B=!1;break}}}B&&(P[1]=P.at(-1),P.length=2)}}if(P.length===1&&t&&MS(e,i,n[0],s[0],f,1,[0],[0])&&(P.push(1),n[1]=0,s[1]=0,P.sort(A)),y&&P.length===1){let N=!0;for(let F=0,G=P.length;F<G;F++)if(!(An(n[P[F]],0,1)&&An(s[P[F]],0,1)&&Y.distance(e.getCoord2D(n[P[F]]),i.getCoord2D(s[P[F]]))===0)){N=!1;break}if(N)return 0}let D=0;for(let N=0,F=P.length;N<F;N++){if(l&&l.push(n[P[N]]),c&&c.push(s[P[N]]),o){const G=Y.getNAN();e.queryCoord2D(n[P[N]],G),o.push(G)}D++}return D}function AT(t,e,i,n,s,r,o,l,c){if(An(i,0,1)&&An(n,0,1)&&Y.distance(t.getCoord2D(i),e.getCoord2D(n))===0){const y=new Ht,_=Number.EPSILON;if(t.queryDerivative(new Be(i,_),y),y.isTrueZero()){const D=i===1?-1e-12:1e-12;t.queryDerivative(new Be(i,_).add(D),y)}i===1&&y.negateThis();const x=new Ht;if(e.queryDerivative(new Be(n,_),x),x.isTrueZero()){const D=i===1?-1e-12:1e-12;e.queryDerivative(new Be(n,_).add(D),x)}n===1&&x.negateThis(),y.isZero()||y.normalize(),x.isZero()||x.normalize();const S=y.dotProduct(x),P=y.crossProduct(x);P.scaleError(3);const A=()=>{if(c)return .001;{const D=t.calculateUpperLength2D(),N=e.calculateUpperLength2D();return Math.min(.01*s/Math.min(D,N),1e-10)}};if(S.ge(Bx)&&(P.isZero()||Math.abs(P.value())<A()))return O1e(t,e,i,n,s,r,o,l)}return 0}function Xx(t,e,i,n,s){let r=-1,o=-1,l=-1,c=-1;{const f=[0,e],y=[e,0],_=[0,n],x=[n,0];for(let S=0;S<2&&r===-1;++S)for(let P=0;P<2;++P)if(t[f[S]].equals(i[_[P]])){r=f[S],o=y[S],l=_[P],c=x[P];break}}if(r===-1){const f=new Xr;f.setFromPoints(t,e+1);const y=new Xr;return y.setFromPoints(i,n+1),y.inflate(s),f.isIntersectingW(y)?-1:0}{const f=new Array(e+1),y=vse(t,e+1,f);K(y>1);let _=0,x=0;for(let re=0;re<y;++re)r===f[re]&&(x=re,_++),o===f[re]&&_++;if(_!==2)return-1;const S=new Array(n+1),P=vse(i,n+1,S);K(P>1),_=0;let A=0;for(let re=0;re<P;++re)l===S[re]&&(A=re,_++),c===S[re]&&_++;if(_!==2)return-1;const D=t[f[(x+y-1)%y]],N=t[f[(x+1)%y]],F=i[S[(A+P-1)%P]],G=i[S[(A+1)%P]],V=t[r],B=[D,N,F,G],W=[0,1,2,3];W.sort((re,ne)=>Y.compareVectorsOrigin(V,B[re],B[ne]));let J=W[0];for(let re=1;re<4;re++){if(W[re]!==(J+1)%4)return-1;J=W[re]}{const re=D.sub(V),ne=G.sub(V),oe=ne.dotProduct(re);if(oe>0){const pe=ne.crossProduct(re),ce=Math.abs(Math.atan2(pe,oe)),ue=ce*re.length(),se=ce*ne.length();if(ue<=s||se<=s)return-1}}{const re=N.sub(V),ne=F.sub(V),oe=ne.dotProduct(re);if(oe>0){const pe=ne.crossProduct(re),ce=Math.abs(Math.atan2(pe,oe)),ue=ce*re.length(),se=ce*ne.length();if(ue<=s||se<=s)return-1}}return 1}}var kT=br;class ni extends yet{constructor(e){super(e||{XStart:0,YStart:0,XEnd:0,YEnd:0})}assignMove(e){return this!==e&&(this.m_description=e.m_description,e.m_description=null,this.m_attributes=e.m_attributes,e.m_attributes=null,this.m_XStart=e.m_XStart,e.m_XStart=Number.NaN,this.m_YStart=e.m_YStart,this.m_XEnd=e.m_XEnd,e.m_XEnd=Number.NaN,this.m_YEnd=e.m_YEnd),this}assignCopy(e){return this!==e&&e.copyTo(this),this}calculateLowerLength3D(){return K(0),0}calculateUpperLength3D(){return K(0),0}changeEndPoints3D(e,i){K(0)}getClosestCoordinate3D(e,i,n){return K(0),0}getBoundary(){return sd(this)}transformAttribute(e,i,n,s,r){K(0)}getAttributeAsDbl(e,i,n){if(i===0)return n===0?JN(this,e):hie(this,e);const s=kT.getInterpolation(i),r=this.getStartAttributeAsDbl(i,n),o=this.getEndAttributeAsDbl(i,n);return w7(s,r,o,e,kT.getDefaultValue(i))}constructFromCoords(e,i,n,s){this.dropAllAttributes(),this.setStartXYCoords(e,i),this.setEndXYCoords(n,s)}construct(e,i){this.dropAllAttributes(),this.setStartXY(e),this.setEndXY(i)}construct3D(e,i){K(0)}constructFromPoints(e,i){K(0)}getGeometryType(){return ni.type}queryEnvelope(e){if(e instanceof ur){e.setEmpty(),e.assignVertexDescription(this.m_description);const i=xe.constructEmpty();this.queryEnvelope(i),e.setEnvelope(i);for(let n=1,s=this.m_description.getAttributeCount();n<s;n++){const r=this.m_description.getSemantics(n);for(let o=0,l=kT.getComponentCount(r);n<l;n++){const c=this.queryInterval(r,o);e.setIntervalEnvelope(r,o,c)}}}else e instanceof xe?e.setCoords({xmin:this.m_XStart,ymin:this.m_YStart,xmax:this.m_XEnd,ymax:this.m_YEnd}):e instanceof ol?(e.setEmpty(),e.mergeCoords(this.m_XStart,this.m_YStart,Bh(this,0,1,0)),e.mergeCoords(this.m_XEnd,this.m_YEnd,Bh(this,1,1,0))):K(0)}applyTransformation(e){K(e instanceof _i);const i=new Y;i.x=this.m_XStart,i.y=this.m_YStart,e.transformInPlace(i),this.m_XStart=i.x,this.m_YStart=i.y,i.x=this.m_XEnd,i.y=this.m_YEnd,e.transformInPlace(i),this.m_XEnd=i.x,this.m_YEnd=i.y}createInstance(){return K(0),this}calculateLength2D(){return Math.sqrt(Hz(this))}calculateLength3D(e){return K(0),0}changeEndPoints2D(e,i){this.setStartXY(e),this.setEndXY(i),this.normalizeAfterEndpointChange()}queryCoord2D(e,i){return bl(this,e,i)}queryCoord3D(e,i){K(0)}getCoordZ(e){return K(0),0}queryCoord2DE(e,i){$1e(this,e,i)}getCoordX(e){return K(0),0}getCoordY(e){return K(0),0}cut(e,i,n){const s=new Qt;return this.queryCut(e,i,s,n),s.releaseSegment()}queryCut(e,i,n,s){const r=n.createLine();s&&r.assignVertexDescription(this.m_description);const o=Y.getNAN();if(bl(this,e,o),r.setStartXYCoords(o.x,o.y),bl(this,i,o),r.setEndXYCoords(o.x,o.y),!s)for(let l=1,c=this.m_description.getAttributeCount();l<c;l++){const f=this.m_description.getSemantics(l),y=kT.getComponentCount(f);for(let _=0;_<y;_++){const x=this.getAttributeAsDbl(e,f,_);r.setStartAttribute(f,_,x);const S=this.getAttributeAsDbl(i,f,_);r.setEndAttribute(f,_,S)}}}queryDerivative(e,i){vet(this,e,i)}getClosestCoordinate(e,i){return Y.getClosestCoordinate(this.getStartXY(),this.getEndXY(),e,i)}getClosestCoordinateOnInterval(e,i,n=-1){const s=new Y;this.queryCoord2D(i.vmin,s);const r=new Y;this.queryCoord2D(i.vmax,r);const o=Y.getClosestCoordinate(s,r,e,!1);return k5.recalculateParentT(i.vmin,i.vmax,o)}intersectionOfYMonotonicWithAxisX(e,i){const n=this.m_YEnd-this.m_YStart;if(!n)return e===this.m_YEnd?i:Number.NaN;const s=(e-this.m_YStart)/n;let r=JN(this,s);return s===1&&(r=this.m_XEnd),r}isCurve(){return!1}isMonotoneQuickAndDirty(){return!0}isDegenerate(e){const i=this.m_XStart-this.m_XEnd,n=this.m_YStart-this.m_YEnd;return Math.sqrt(i*i+n*n)<=e}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){this.queryEnvelope(e)}clone(e){const i=new ni;return this.copyTo(i),i}tToLength(e){return e*this.calculateLength2D()}lengthToT(e){const i=this.calculateLength2D();return i!==0?e/i:0}calculateWeightedAreaCentroid2D(e){return K(0),new Y(0,0)}calculateWeightedCentroid2D(){return this.getCoord2D(.5).mul(this.calculateLength2D())}queryAttributeAsDbl(e,i,n,s){K(0)}getTangent(e){const i=Y.getNAN();return i.setSub(this.getEndXY(),this.getStartXY()),i}getDerivative(e){return K(0),new Y(0,0)}getCurvature(e){return 0}isIntersectingPoint(e,i,n){return Zb(this,e,i,n)>=0}isIntersectingPoint3D(e,i,n,s,r=1){return K(0),!1}getYMonotonicParts(e,i){return K(0),0}getMonotonicParts(e,i){return 0}getMonotonicPartParams(e,i){return K(0),0}intersectionWithAxis2D(e,i,n,s){if(e){const r=this.m_YEnd-this.m_YStart;if(!r)return i===this.m_YEnd?-1:0;const o=(i-this.m_YStart)/r;return o<0||o>1?0:(n&&(n[0]=JN(this,o)),s&&(s[0]=o),1)}{const r=this.m_XEnd-this.m_XStart;if(!r)return i===this.m_XEnd?-1:0;const o=(i-this.m_XStart)/r;return o<0||o>1?0:(n&&(n[0]=hie(this,o)),s&&(s[0]=o),1)}}calculateUpperLength2D(){return this.calculateLength2D()}calculateLowerLength2D(){return this.calculateLength2D()}normalizeAfterEndpointChange(){return!1}queryLooseEnvelopeOnInterval(e,i){if(i instanceof xe){let n=hs(e.vmin,0,1);const s=new Y;return this.queryCoord2D(n,s),i.setCoords({pt:s}),n=hs(e.vmax,0,1),this.queryCoord2D(n,s),void i.mergeNe(s)}K(0)}orientBottomUp(){R1e(this)}isLine(){return!0}isDegenerateToLineHelper(e){return K(0),!1}copyIgnoreAttributes(e){K(0)}calculateArea2DHelper(){return K(0),0}absNorm(){return this.getStartXY().norm(1)+this.getEndXY().norm(1)}queryEnvelopeW(e,i){i.setCoords(this.getCoord2D(e.vmin)),i.mergeNe(this.getCoord2D(e.vmax))}setSegmentFromCoords(e,i){K(0)}writeInBufferStream(e,i){return K(0),0}readFromBufferStream(e,i){K(0)}snapControlPoints(e){return!1}needsSnapControlPoints(e){return!1}calculateSpecialPointsForCracking(e,i){return K(0),0}ensureXYMonotone(){return!1}setCoordsForIntersector(e,i,n){_et(this,e,i)}static isIntersectingLineLine(e,i,n,s){return K(0),0}static isIntersectingLineLine_(e,i,n,s){return K(0),0}copyToImpl(e){}reverseImpl(){}equalsImpl(e){return!0}equalsImplTol(e,i){return!0}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){}endPointModified(){}clearEndPointModified(){}intersect(e,i,n,s,r){return Qv(!1,this,e,i,n,s,r)}intersectPoint(e,i,n){i.length<1&&Mi("");const s=Zb(this,e,n,!1);return s>=0?(i&&(i[0]=s),1):0}isIntersecting(e,i,n){return $5(!1,this,e,i,n)!==0}intersect_(e,i,n,s){return K(0),0}}ni.type=me.enumLine;class Qt{constructor(e){this.m_seg=null,this.m_curves=null,this.m_lineBuffer=new ni,this.m_mask=0,this.m_active=0,e!==void 0&&(e.copy?e.copy.copyTo(this,!1):e.move?this.assignMove(e.move):e.segment?this.copyFrom(e.segment,!!e.bIgnoreAttributes):K(0))}assignCopy(e){return e instanceof Qt?this!==e&&e.copyTo(this,!1):this.copyFrom(e,!1),this}assignMove(e){if(e instanceof Qt){if(this===e)return this;this.reset(),1&e.m_mask&&(this.m_lineBuffer=e.m_lineBuffer,e.m_lineBuffer=null,this.m_mask=1),this.m_curves=e.m_curves,this.m_mask=e.m_mask,this.m_active=e.m_active,e.reset(),this.m_seg=this.activeSegment(),e.m_seg=null}else{if(this.m_seg===e)return this;this.create(e.getGeometryType()),this.m_seg.swap(e)}return this}activeSegment(){switch(this.m_active){case 0:return null;case 1:return this.line();case 2:return this.arc();case 4:return this.bezier3();case 8:return this.bezier2();case 16:return this.rbezier2();default:xt("")}}get(){return this.m_seg}reset(){1&this.m_mask&&(this.m_lineBuffer=null),this.m_mask>1&&(this.m_curves=null),this.m_mask=0,this.m_active=0}empty(){return this.m_seg===null}copyTo(e,i){this!==e&&(this.empty()?e.m_seg=null:e.copyFrom(this.m_seg,i))}copyToWithZ(e,i){K(0)}createImpl(e){switch(e){case me.enumLine:1&this.m_mask||(this.m_lineBuffer=new ni,this.m_mask|=1,this.m_active=1);break;case me.enumEllipticArc:2&this.m_mask||(this.m_curves=new Xc,this.m_mask=1&this.m_mask|2,this.m_active=2);break;case me.enumBezier:4&this.m_mask||(this.m_curves=new Gc,this.m_mask=1&this.m_mask|4,this.m_active=4);break;case me.enumBezier2:8&this.m_mask||(this.m_curves=new pm,this.m_mask=1&this.m_mask|8,this.m_active=8);break;case me.enumRationalBezier2:16&this.m_mask||(this.m_curves=new wa,this.m_mask=1&this.m_mask|16,this.m_active=16);break;default:Je("")}}create(e){e===me.enumLine?this.createLine():e===me.enumEllipticArc?this.createEllipticArc():e===me.enumBezier?this.createCubicBezier():e===me.enumRationalBezier2?this.createQuadraticRationalBezier():e===me.enumBezier2?this.createQuadraticBezier():Je("Segment_buffer.create")}copyFrom(e,i){this.m_seg!==e&&(this.create(e.getGeometryType()),i?e.copyIgnoreAttributes(this.m_seg):e.copyTo(this.m_seg))}copyFromWithZ(e,i){K(0)}line(){return this.m_lineBuffer}arc(){return this.m_curves}bezier3(){return this.m_curves}bezier2(){return this.m_curves}rbezier2(){return this.m_curves}createLine(){return this.createImpl(me.enumLine),this.m_seg=this.line(),this.line()}createEllipticArc(){return this.createImpl(me.enumEllipticArc),this.m_seg=this.arc(),this.arc()}createCubicBezier(){return this.createImpl(me.enumBezier),this.m_seg=this.bezier3(),this.bezier3()}createQuadraticRationalBezier(){return this.createImpl(me.enumRationalBezier2),this.m_seg=this.rbezier2(),this.rbezier2()}createQuadraticBezier(){return this.createImpl(me.enumBezier2),this.m_seg=this.bezier2(),this.bezier2()}releaseSegment(){if(this.m_seg=null,this.m_active===0&&xt("releaseSegment"),1&this.m_active){const i=this.line();return this.m_mask-=1,this.m_active=0,this.m_lineBuffer=null,i}let e;return 2&this.m_active?e=this.arc():4&this.m_active?e=this.bezier3():8&this.m_active?e=this.bezier2():16&this.m_active?e=this.rbezier2():xt("releaseSegment"),this.m_mask-=this.m_active,this.m_active=0,this.m_curves=null,e}equals(e){return e instanceof Qt?this===e||(this.empty()?e.empty():!e.empty()&&this.get().equals(e.get())):(K(0),!1)}}const Kat=["0","1","2","3","4","5","6","7","8","9","b","c","d","e","f","g","h","j","k","m","n","p","q","r","s","t","u","v","w","x","y","z"];function Jat(t,e,i){const n=ji(e,"R");let s=0,r=0;for(let o=0;o<e;o++){let l=t[s]>>r&31;if(r+=5,r>31){const f=37-r;l&=(1<<f)-1,r-=32,s++,l|=(t[s]&(1<<r)-1)<<f}const c=Kat[l];n[e-1-o]=c}return i>e?n.push(..."0".repeat(i-e)):i<e&&(n.length=i),n.join("")}function bse(t,e,i,n,s){K(n>>5<s.length);let r=e,o=i;for(let l=n;l>=0;l-=2){const c=31&l,f=.5*(o+r);t>=f?(s[l>>5]|=1<<c,r=f):o=f}}let xse=new Set;const wq=2147483645n,p9=9007199254740990n,SO="operation is not supported for unknown coordinate systems";var wse;function R5(){return{majorSemiAxis:0,e2:0,minorSemiAxis:0,flattening:0,isSphere(){return this.e2===0}}}function Qat(t,e,i){t.majorSemiAxis=e,t.minorSemiAxis=e*(1-i),t.e2=i*(2-i),t.flattening=i}function elt(t){ult(t)}function tlt(){return!1}function Ave(){return!!EC}function Sq(t,e,i){return K(Ave()),H7(t,0,null,!1)}function kve(t,e){K(Ave());const i=new ju;let n;return n=OB(t),i.m_unit=n.isPCS?new wC(n.metersOrRadiansPerUnit):new mC(n.metersOrRadiansPerUnit),B7(i.m_precisionDescriptor,n,null,1),i.m_bDefaultDescriptor=!0,i.m_userWKT=t,i.calculateHashCode(),i.initDbgName(),i}function Dve(t,e,i,n,s=!0){let r=null;return e&&(r=_at(e,s)),ilt(t,r,i,n,s)}function ilt(t,e,i,n,s){t||Je("!PE_coord_sys");const r=new ju;let o;return o=s?gat(t):new IB(t,!1),B7(r.m_precisionDescriptor,o,e,n),r.m_bDefaultDescriptor=!0,r.setHorzProj_(o),r.m_vertcs=e,r.m_userWKID=o.getLatestID(),r.calculateHashCode(),r.initDbgName(),r}function nlt(t,e,i=!1){t.getCoordinateSystemType()===3&&Je("image spatial reference cannot be altered");const n=new ju,s=t;return n.m_peCoordSysVal=s.m_peCoordSysVal,n.m_vertcs=s.m_vertcs,n.m_unit=s.m_unit,n.m_precisionDescriptor.assign(e),n.m_localZToXYFactor=s.m_localZToXYFactor,(Number.isNaN(n.m_precisionDescriptor.m_falseX)||Number.isNaN(n.m_precisionDescriptor.m_falseY))&&(n.m_precisionDescriptor.m_falseX=s.m_precisionDescriptor.m_falseX,n.m_precisionDescriptor.m_falseY=s.m_precisionDescriptor.m_falseY),n.m_precisionDescriptor.snapPrecision(),n.m_precisionDescriptor.fixTolerance(),n.m_userWKID=s.m_userWKID,n.m_precisionDescriptor.equals(s.m_precisionDescriptor)?n.m_bDefaultDescriptor=s.m_bDefaultDescriptor:n.m_bDefaultDescriptor=!1,i&&(n.m_bDefaultDescriptor=!0),n.calculateHashCode(),n.initDbgName(),n}function EO(t){const e=t.getCoordinateSystemType();return e===1?t:(e===3&&K(0),t.getGCS())}let CO;function slt(){return CO||(CO=(()=>{const t=Math.trunc(Math.random()*Eo()),e=Date.now();return`|abba_000|${t.toString(16)}|${e.toString(16)}|`})()),CO}(function(t){t[t.utmDefault=0]="utmDefault",t[t.utmNorthSouth=1]="utmNorthSouth"})(wse||(wse={}));let PO,TO,IO;function rlt(t){return t.startsWith(slt())}class ju{destroy(){yat(this.m_peCoordSysVal),this.getCoordinateSystemType()===1||this.getCoordinateSystemType()===2?this.getPECoordSys().destroy():xt("SpatialReference.destroy")}constructor(){this.m_vertcs=null,this.m_peCoordSysVal=null,this.m_userWKID=0,this.m_userWKT=null,this.m_geogSpatialReference=null,this.m_srToGcs=null,this.m_gcsToSr=null,this.m_defaultPrecisionSR=null,this.m_localZToXYFactor=-1,this.m_precisionDescriptor=new Wl,this.m_hashCode=0,this.m_bDefaultDescriptor=!1,NB(this.m_precisionDescriptor),xse&&xse.add(new WeakRef(this))}attachToPe(){(this.m_userWKID>0?Sq(this.m_userWKID):kve(this.m_userWKT)).copyTo(this,!1)}copyTo(e,i=!0){(i||e.m_bDefaultDescriptor)&&(e.m_bDefaultDescriptor=this.m_bDefaultDescriptor,e.m_precisionDescriptor.assign(this.m_precisionDescriptor)),e.m_defaultPrecisionSR=null,e.m_gcsToSr=this.m_gcsToSr,e.m_geogSpatialReference=this.m_geogSpatialReference,e.m_hashCode=this.m_hashCode,e.m_localZToXYFactor=this.m_localZToXYFactor,e.m_peCoordSysVal=this.m_peCoordSysVal,e.m_srToGcs=this.m_srToGcs,e.m_userWKID=this.m_userWKID,e.m_userWKT=this.m_userWKT,e.m_vertcs=this.m_vertcs,e.m_unit=this.m_unit}getHashCode(){return this.m_hashCode}getHashCodeHorizontal(){let e=0;return e=this.m_peCoordSysVal?this.m_peCoordSysVal.getHashCode():this.m_unit?this.m_unit.getHashCode():305419891,e}updateTransform(e){if(this.getCoordinateSystemType()===1)return yO(this,this,null);let i=e?this.m_srToGcs:this.m_gcsToSr;if(i)return i;const n=this.getGCS(),s=this;i=e?yO(s,n,null):yO(n,s,null);const r=i;return(e?this.m_srToGcs:this.m_gcsToSr)||(e?this.m_srToGcs=r:this.m_gcsToSr=r,i)}getHashCodeVertical(){return this.m_vertcs?this.m_vertcs.getHashCode():0}calculateHashCode(){let e=this.getHashCodeHorizontal();const i=this.getHashCodeVertical(),n=this.m_precisionDescriptor.getHashCode();e=Ua(e,i),this.m_hashCode=Ua(e,n)}initDbgName(){}setHorzProj_(e){this.m_peCoordSysVal=e,this.m_unit=this.m_peCoordSysVal.getUnit()}getTolerance(e=0){return this.m_precisionDescriptor.getTolerance(e)}getResolution(e=0){return this.m_precisionDescriptor.getResolution(e)}getPECoordSys(){return this.m_peCoordSysVal?this.m_peCoordSysVal.m_peCoordSys:null}getPCSInfo(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPCSInfo()}getCentralMeridian(){return this.throwIfNotGCSOrPCS(),this.getCoordinateSystemType()===1?0:this.getPCSInfo().getCentralMeridian()}getCoordinateSystemType(){const e=this.getPECoordSys();if(e)switch(e.getType()){case Vi.PE_TYPE_GEOGCS:return 1;case Vi.PE_TYPE_PROJCS:return 2;default:return 0}else{if((this.m_userWKID>0||this.m_userWKT)&&this.m_unit instanceof wC)return 2;if(this.m_unit instanceof mC)return 1}return 0}getID(){return this.m_userWKID}getLatestID(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getLatestID():this.m_userWKID}getOldID(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getOldID():this.m_userWKID}getVerticalID(){return Bn("vcs not implemented"),0}getLatestVerticalID(){return this.m_vertcs?this.m_vertcs.getLatestID():0}getOldVerticalID(){return Bn("vcs not implemented"),0}getPEVerticalCoordSys(){return null}getPole(e){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPole(e)}getText(){const e=this.getPECoordSys();return e?nse(e):this.m_userWKT??""}getTextExtended(e){const i=this.getPECoordSys();return i?this.getPEVerticalCoordSys()?Aot(null,i,this.getPEVerticalCoordSys()):nse(i,e):this.m_userWKT??""}getText2(e=-1){const i=this.getPECoordSys();return i?kot(i,e):this.m_userWKT??""}getUnit(){return this.m_unit}getUnitsPerMillimeter(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getUnitsPerMillimeter():this.m_unit instanceof wC?.001/this.m_unit.getUnitToBaseFactor():this.m_unit instanceof mC?.001/(OB(this.m_userWKT??this.m_userWKID).semiMajor*this.m_unit.getUnitToBaseFactor()):(xs("sr object not in valid state"),0)}getAuthorityName(){return""}getVerticalUnit(){return Bn("vcs not implemented"),{}}getVCS(){return this.m_vertcs}hasVCS(){return!1}getGCSHorisonIsInclusive(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSHorisonIsInclusive()}getGCSHorizon(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSHorizon()}getGCS(){const e=this.getCoordinateSystemType();if(e===0)xs(SO);else{if(e===1)return this;e===3&&xs("image cs not supported")}if(this.m_geogSpatialReference)return this.m_geogSpatialReference;let i;if(this===Nve()||this===Ove())i=$ve();else{K(this.m_peCoordSysVal);const n=this.m_peCoordSysVal.m_peCoordSys.getGeogcs();n||xt(""),i=Dve(n,this.m_vertcs,null,this.m_precisionDescriptor.getPrecision(),this.m_peCoordSysVal.getCached())}return this.m_geogSpatialReference?i=this.m_geogSpatialReference:this.m_geogSpatialReference=i,i}getGCSSplitLines(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSSplitLines()}toGCS(e,i){if(e.length===0)return 0;e.length>i.length&&Je("coordsSrc.size() > coordsDst.size()");const n=this.getCoordinateSystemType();if(n===0&&xs(SO),n===1)return eM(i,e,e.length),e.length;K(this.m_peCoordSysVal);const s=this.getSRToGCSTransform();return new w2().transform(s,e,e.length,i)}toMilitaryGrid(e,i,n,s,r){return K(0),[]}fromMilitaryGrid(e,i){return[]}toUnitedStatesNationalGrid(e,i,n,s){return[]}fromUnitedStatesNationalGrid(e){return[]}toUniversalTransverseMercator(e,i,n){return[]}fromUniversalTransverseMercator(e,i){return[]}toWorldGeographicReference(e,i,n){return[]}fromWorldGeographicReference(e){return[]}toGlobalArea(e){return[]}fromGlobalArea(e,i){return[]}toDegreeMinuteSecond(e,i){return[]}fromDegreeMinuteSecond(e){return[]}toDegreeDecimalMinute(e,i){return[]}fromDegreeDecimalMinute(e){return[]}toDecimalDegree(e,i){return[]}fromDecimalDegree(e){return[]}fromGeohashToGCSEnvelope(e){return{}}toGeohash(e,i=8){const n=e.clone();n.scale(this.getGCS().getUnit().getID()===9102?1:this.getGCS().getUnit().getUnitToBaseFactor()/Math.PI*180),n.x<-180?(n.x=G0(n.x,360),n.x<-180&&(n.x+=360)):n.x>180&&(n.x=G0(n.x,360),n.x>180&&(n.x-=360)),n.y>90&&(n.y=90),n.y<-90&&(n.y=-90);const s=5*i,r=new Uint32Array(4);return bse(n.x,-180,180,s-1,r),bse(n.y,-90,90,s-2,r),Jat(r,i,i)}calculateContainingGeohash(e){return"1;"}calculateCoveringGeohashes(e,i){return[]}calculateGeohashNeighbours(e){return[]}calculateGeohashNeighbour(e,i,n){return""}isPannable(){const e=this.getCoordinateSystemType();return e!==0&&e!==3&&(K(this.m_peCoordSysVal),this.m_peCoordSysVal.isPannable())}getPannableExtent(){return this.isPannable()||Je("!is_pannable"),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPannableExtent()}getPannableExtentInGCS(){return this.isPannable()||Je("!is_pannable"),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPannableExtentGCS()}throwIfNotGCSOrPCS(){const e=this.getCoordinateSystemType();e!==1&&e!==2&&Je("Not a GCS or PCS")}getDomainXY(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getDomainXY()}getFullWorldExtent(){return this.throwIfNotGCSOrPCS(),this.isPannable()?this.getPannableExtent():this.getDomainXY()}queryPrecisionDescriptor(e){if(e.assign(this.m_precisionDescriptor),Number.isNaN(e.m_falseX))if(xs("projection engine is not loaded"),K(this.m_peCoordSysVal!==null),this.m_precisionDescriptor.m_precision!==2){const i=this.m_peCoordSysVal.getDomainXY();e.m_falseX=i.xmin,e.m_falseY=i.ymin}else e.m_falseX=-Number.MAX_VALUE,e.m_falseY=-Number.MAX_VALUE}queryPrecisionDescriptorWithoutFalseXY(e){e.assign(this.m_precisionDescriptor),e.m_falseX=Number.NaN,e.m_falseY=Number.NaN}queryDefaultPrecisionDescriptorWithoutFalseXY(e){if(this.m_bDefaultDescriptor)e.assign(this.m_precisionDescriptor);else{const i=this.getCoordinateSystemType();i===0?olt(e,this.m_unit,this.m_vertcs,this.m_precisionDescriptor.getPrecision()):i===3?Bn("image cs"):B7(e,this.m_peCoordSysVal,this.m_vertcs,this.m_precisionDescriptor.getPrecision())}e.m_falseX=Number.NaN,e.m_falseY=Number.NaN}horizontalEqual(e){return hat(this.m_peCoordSysVal,e.m_peCoordSysVal)}verticalEqual(e){return this.m_vertcs!==null==(e.m_vertcs!==null)&&(!this.m_vertcs||this.m_vertcs.equals(e.m_vertcs))}equals(e){const i=e;if(this===i)return!0;if(!this.horizontalEqual(i)||!this.verticalEqual(i)||!i.m_peCoordSysVal&&(K(!this.m_peCoordSysVal),this.m_unit!==null!=(i.m_unit!==null)||this.m_unit&&!this.m_unit.equals(i.m_unit)||this.m_localZToXYFactor!==i.m_localZToXYFactor))return!1;if(!this.m_bDefaultDescriptor||!i.m_bDefaultDescriptor){if(this.m_peCoordSysVal){if(!this.m_precisionDescriptor.equalsWithoutFalseXY(i.m_precisionDescriptor))return!1;K(i.m_peCoordSysVal);let n=this.m_precisionDescriptor.m_falseX,s=this.m_precisionDescriptor.m_falseY;if(Number.isNaN(n)){const l=this.m_peCoordSysVal.getDomainXY();n=l.xmin,s=l.ymin}let r=i.m_precisionDescriptor.m_falseX,o=i.m_precisionDescriptor.m_falseY;if(Number.isNaN(r)){const l=i.m_peCoordSysVal.getDomainXY();r=l.xmin,o=l.ymin}return n===r&&s===o}return this.m_precisionDescriptor.equals(i.m_precisionDescriptor)}return!0}equalForProjection(e,i){if(this===e)return!0;const n=this.getCoordinateSystemType(),s=e.getCoordinateSystemType();if(n===0||s===0)return n===0&&s===0?(!i||this.getZToXYFactor()===e.getZToXYFactor())&&(!this.getUnit()||!e.getUnit()||this.getUnit().equals(e.getUnit())):n!==3&&s!==3&&(this.getUnit()===null||e.getUnit()===null||(!i||this.getZToXYFactor()===e.getZToXYFactor())&&this.getUnit().equals(e.getUnit()));if(n!==s)return!1;if(n===3)return this.equals(e);if(dat(this.m_peCoordSysVal,e.m_peCoordSysVal)){if(!i)return!0;if(this.m_vertcs!==null==(e.m_vertcs!==null))return!this.m_vertcs||this.m_vertcs.equalForProjection(e.m_vertcs)}return!1}equalHorizontal(e){return this.horizontalEqual(e)}equalVertical(e){return!1}equalVerticalVCS(e){return!1}convergenceAngle(e){return 0}getPeCoordsysCopy(){if(this.m_peCoordSysVal){const e=this.m_peCoordSysVal.m_peCoordSys;return e||xt("cannot clone coord sys"),e}return null}getPeVertcsCopy(){return 0}throwIfLocal(){this.getCoordinateSystemType()===0&&Je(SO)}getPrimeMeridian(){return this.throwIfLocal(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPrimeMeridian()}getSRToGCSTransform(){return this.updateTransform(!0)}getGCSToSRTransform(){return this.updateTransform(!1)}getOneMeter(){return 1e3*this.getUnitsPerMillimeter()}getOneMeterPCSUnit(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getOneMeterPCSUnit()}getDefaultPrecisionSR(){if(this.m_bDefaultDescriptor)return this;if(this.m_defaultPrecisionSR===null){const e=new Wl;this.queryDefaultPrecisionDescriptorWithoutFalseXY(e),this.m_defaultPrecisionSR=nlt(this,e,!0)}return this.m_defaultPrecisionSR}getPCSHorizon(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPCSHorizon()}getHorzUnitFactor(){return this.m_unit?this.m_unit.getUnitToBaseFactor():1}querySpheroidData(e){this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal);const i=this.getGCS().getPECoordSys().getDatum().getSpheroid(),n=i.getFlattening();Qat(e,i.getAxis(),n)}getAreaOfUse(){this.getCoordinateSystemType()===0&&xs(""),K(this.m_peCoordSysVal);const e=this.m_peCoordSysVal.getAreaOfUse();return e===null?new rie:new rie({geom:e.clone(),sr:Sq(4326)})}getZToXYFactor(){return 1}isCustomWkid(){return!1}getOneDegreeGCSUnit(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getOneDegreeGCSUnit()}getGcsUnitFactor(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGcsUnitFactor()}snapGeometry(e){if(e.isEmpty()||this.m_precisionDescriptor.getPrecision()===2)return!1;const i=e.getGeometryType();if(rl(i))return this.snapMultiVertex_(e);if(i===me.enumPoint)return this.snapPoint_(e);if(i===me.enumEnvelope)return this.snapEnvelope_(e);if(Ds(i))return this.snapSegment_(e);if(i===me.enumGeometryCollection){const n=e;let s=!1;for(let r=0,o=n.getGeometryCount();r<o;++r)s=this.snapGeometry(n.getGeometry(r))||s;return s}xt("what else?")}snapMultiVertex_(e){if(K(!e.isEmpty()),K(this.m_precisionDescriptor.getPrecision()!==2),bi(e.getGeometryType())){const r=e;if(r.hasNonLinearSegments())return this.snapGeometryWithCurves_(r)}const i=e.getImpl(),n=i.getDescription();let s=!1;for(let r=0,o=n.getAttributeCount();r<o;r++){const l=n.getSemantics(r),c=i.getAttributeStreamRef(l);s=this.snapAttributes(l,c,0,i.getPointCount())||s}return s&&i.notifyModifiedFlags(2001),s}snapPoint_(e){return!1}snapEnvelope_(e){return!1}snapSegment_(e){K(!e.isEmpty()),K(this.m_precisionDescriptor.getPrecision()!==2);const i=new Wl;this.queryPrecisionDescriptor(i);const n=e.getStartXY(),s=new Y;s.x=J_(n.x,i.getFalseX(),i.getGridUnitsXY()),s.y=J_(n.y,i.getFalseY(),i.getGridUnitsXY());let r=!s.equals(n);const o=e.getEndXY(),l=new Y;l.x=J_(o.x,i.getFalseX(),i.getGridUnitsXY()),l.y=J_(o.y,i.getFalseY(),i.getGridUnitsXY()),r||(r=!l.equals(o)),r&&e.changeEndPoints2D(s,l);const c=(y,_,x)=>{let S=!1;{const P=e.getStartAttributeAsDbl(y,0),A=J_(P,_,x),D=!va(A,P);S||(S=D),D&&e.setStartAttribute(y,0,A)}{const P=e.getEndAttributeAsDbl(y,0),A=J_(P,_,x),D=!va(A,P);S||(S=D),D&&e.setEndAttribute(y,0,A)}return S};let f=r?1:0;return e.hasAttribute(1)&&(f|=c(1,i.getFalseZ(),i.getGridUnitsZ())?1:0),e.hasAttribute(2)&&(f|=c(2,i.getFalseM(),i.getGridUnitsM())?1:0),!!f}snapGeometryWithCurves_(e){K(!e.isEmpty()),K(this.m_precisionDescriptor.getPrecision()!==2);const i=e.createInstance(),n=new Qt;let s=0;for(let r=0,o=e.getPathCount();r<o;++r){const l=e.getSegmentCountPath(r);if(l===0){if(i.addPath(e,r,!0),i.getPathSize(r)===1){const f=new Ut;i.getPointByVal(i.getPointCount()-1,f),s|=this.snapGeometry(f)?1:0,i.setPointByVal(i.getPointCount()-1,f)}continue}const c=e.isClosedPath(r);for(let f=0,y=c?l-1:l;f<y;++f)e.getSegmentFromPath(r,f,n,!1),s|=this.snapGeometry(n.get())?1:0,i.addSegment(n.get(),f===0);c&&(e.getSegmentFromPath(r,l-1,n,!1),s|=this.snapGeometry(n.get())?1:0,l===1?i.addPathFromClosedSegment(n.get(),!1):i.closeLastPathWithSegment(n.get()))}return s&&i.copyTo(e),!!s}snapAttributes(e,i,n,s){let r=!1;const o=new Wl;if(this.queryPrecisionDescriptor(o),e===0){const l=i;for(let c=n;c<s;c++){const f=l.read(2*c),y=ju.s_SnapValue(f,o.getFalseX(),o.getGridUnitsXY()),_=l.read(2*c+1),x=ju.s_SnapValue(_,o.getFalseY(),o.getGridUnitsXY());r=r||y!==f||x!==_,r&&(l.write(2*c,y),l.write(2*c+1,x))}}else if(e===1){const l=i;for(let c=n;c<s;c++){const f=l.read(c),y=ju.s_SnapValue(f,o.getFalseZ(),o.getGridUnitsZ());r=r||!va(y,f),r&&l.write(c,y)}}else if(e===2){const l=i;for(let c=n;c<s;c++){const f=l.read(c),y=ju.s_SnapValue(f,o.getFalseM(),o.getGridUnitsM());r=r||!va(y,f),r&&l.write(c,y)}}return r}static s_SnapValue(e,i,n){return Ev((e-i)*n)/n+i}}class Wl{constructor(){const e=p9,i=1e-4,n=.001,s=i*Number(e)*.5;this.m_precision=1,this.m_falseX=-s,this.m_falseY=-s,this.m_unitsXY=Number(e)/(2*s),this.m_falseM=-1e5,this.m_unitsM=1/i,this.m_falseZ=-1e5,this.m_unitsZ=1/i,this.m_toleranceXY=n,this.m_toleranceM=n,this.m_toleranceZ=n}getHashCode(){let e=7777,i=7777;return i=Ua(i,this.m_falseM),i=Ua(i,this.m_unitsM),e=Ua(e,this.m_unitsXY),i=Ua(i,this.m_toleranceXY),e=Ua(e,this.m_falseZ),i=Ua(i,this.m_toleranceZ),e=Ua(e,this.m_unitsZ),i=Ua(i,this.m_toleranceM),e=Ua(e,this.m_precision),Ua(e,i)}clone(){const e=new Wl;return e.m_falseX=this.m_falseX,e.m_falseY=this.m_falseY,e.m_unitsXY=this.m_unitsXY,e.m_falseZ=this.m_falseZ,e.m_unitsZ=this.m_unitsZ,e.m_falseM=this.m_falseM,e.m_unitsM=this.m_unitsM,e.m_toleranceXY=this.m_toleranceXY,e.m_toleranceZ=this.m_toleranceZ,e.m_toleranceM=this.m_toleranceM,e.m_precision=this.m_precision,e}assign(e){return this.m_falseX=e.m_falseX,this.m_falseY=e.m_falseY,this.m_unitsXY=e.m_unitsXY,this.m_falseZ=e.m_falseZ,this.m_unitsZ=e.m_unitsZ,this.m_falseM=e.m_falseM,this.m_unitsM=e.m_unitsM,this.m_toleranceXY=e.m_toleranceXY,this.m_toleranceZ=e.m_toleranceZ,this.m_toleranceM=e.m_toleranceM,this.m_precision=e.m_precision,this}initialize2D(e,i){}getTolerance(e){switch(e){case 0:return this.m_toleranceXY;case 1:return this.m_toleranceZ;case 2:return this.m_toleranceM;default:return 0}}getResolution(e){if(this.m_precision===2)return 0;switch(e){case 0:return 1/this.m_unitsXY;case 1:return 1/this.m_unitsZ;case 2:return 1/this.m_unitsM;default:return 0}}getFalseX(){return this.m_falseX}getFalseY(){return this.m_falseY}getFalseZ(){return this.m_falseZ}getFalseM(){return this.m_falseM}getGridUnitsXY(){return this.m_unitsXY}getGridUnitsZ(){return this.m_unitsZ}getGridUnitsM(){return this.m_unitsM}getPrecision(){return this.m_precision}static getLimit32(){return 2147483645}static getLimit64(){return 9007199254740990n}static getLimitFloat(){return 0}getXYGridRange(){const e=new xe;switch(this.m_precision){case 0:{const i=Wl.getLimit32()/this.getGridUnitsXY();e.setCoords({xmin:this.getFalseX(),ymin:this.getFalseY(),xmax:this.getFalseX()+i,ymax:this.getFalseY()+i})}break;case 1:{const i=Number(Wl.getLimit64())/this.getGridUnitsXY();e.setCoords({xmin:this.getFalseX(),ymin:this.getFalseY(),xmax:this.getFalseX()+i,ymax:this.getFalseY()+i})}break;case 2:e.setCoords({xmin:-Number.MAX_VALUE,ymin:-Number.MAX_VALUE,xmax:Number.MAX_VALUE,ymax:Number.MAX_VALUE});break;default:e.setEmpty(),xt("")}return e}getZGridRange(){const e=new Ze;switch(this.m_precision){case 0:{const i=Wl.getLimit32()/this.getGridUnitsZ();e.setCoords(this.getFalseZ(),this.getFalseZ()+i)}break;case 1:{const i=Number(Wl.getLimit64())/this.getGridUnitsZ();e.setCoords(this.getFalseZ(),this.getFalseZ()+i)}break;case 2:e.setCoords(-Number.MAX_VALUE,Number.MAX_VALUE);break;default:e.setEmpty(),xt("")}return e}getMGridRange(){const e=new Ze;switch(this.m_precision){case 0:{const i=Wl.getLimit32()/this.getGridUnitsM();e.setCoords(this.getFalseM(),this.getFalseM()+i)}break;case 1:{const i=Number(Wl.getLimit64())/this.getGridUnitsM();e.setCoords(this.getFalseM(),this.getFalseM()+i)}break;case 2:e.setCoords(-Number.MAX_VALUE,Number.MAX_VALUE);break;default:e.setEmpty(),xt("")}return e}setTolerance(e,i){switch(i<0&&Je("tol < 0"),Number.isFinite(i)||Je("tol is not finite"),e){case 0:this.m_toleranceXY=i;break;case 1:this.m_toleranceZ=i;break;case 2:this.m_toleranceM=i;break;default:Je("cannot set tolerance for this attribute")}}setGridParams(e,i,n){Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(n)||Je("grid params are not finite"),n<1&&Je("grid units cannot be smaller than 1.0"),this.m_falseX=e,this.m_falseY=i,this.m_unitsXY=n}setZParams(e,i){Number.isFinite(e)&&Number.isFinite(i)||Je("grid params are not finite"),i<1&&Je("grid units cannot be smaller than 1.0"),this.m_falseZ=e,this.m_unitsZ=i}setMParams(e,i){Number.isFinite(e)&&Number.isFinite(i)||Je("grid params are not finite"),i<1&&Je("grid units cannot be smaller than 1.0"),this.m_falseM=e,this.m_unitsM=i}setPrecision(e){}equals(e){return this===e||va(this.m_falseX,e.m_falseX)&&va(this.m_falseY,e.m_falseY)&&this.equalsWithoutFalseXY(e)}snapPrecision(){if(this.m_precision===2)return;const e=(n,s,r,o)=>{if(!Number.isFinite(s)||!Number.isFinite(r))return r;if(r<1)return 1;if(!o)return r;const l=Number(n)/r;return Math.trunc((s+l-s)*r)>n&&(r=n/(s+l-s)),Math.max(1,r)},i=Number(this.m_precision===0?wq:p9);this.m_unitsXY=e(i,this.m_falseX,this.m_unitsXY,!0),this.m_unitsXY=e(i,this.m_falseY,this.m_unitsXY,!0),this.m_unitsZ=e(i,this.m_falseZ,this.m_unitsZ,!1),this.m_unitsM=e(i,this.m_falseM,this.m_unitsM,!1)}verifyPrecision(){if(this.m_precision===2)return!0;const e=(n,s,r,o)=>{if(r<1||!Number.isFinite(s)||!Number.isFinite(r))return!1;if(!o)return!0;const l=Number(n)/r;return!(BigInt((s+l-s)*r)>n)},i=this.m_precision===0?wq:p9;return!!e(i,this.m_falseX,this.m_unitsXY,!0)&&!!e(i,this.m_falseY,this.m_unitsXY,!0)&&!!e(i,this.m_falseZ,this.m_unitsZ,!1)&&!!e(i,this.m_falseM,this.m_unitsM,!1)}fixTolerance(){this.m_precision!==2&&(this.m_toleranceXY=Math.max(2/this.m_unitsXY,this.m_toleranceXY),this.m_toleranceZ=Math.max(2/this.m_unitsZ,this.m_toleranceZ),this.m_toleranceM=Math.max(2/this.m_unitsM,this.m_toleranceM),(Number.isNaN(this.m_falseX)||Number.isNaN(this.m_falseY))&&(this.m_falseX=this.m_falseY=Number.NaN))}equalsWithoutFalseXY(e){return this===e||this.m_unitsXY===e.m_unitsXY&&this.m_falseZ===e.m_falseZ&&this.m_unitsZ===e.m_unitsZ&&this.m_falseM===e.m_falseM&&this.m_unitsM===e.m_unitsM&&this.m_toleranceXY===e.m_toleranceXY&&this.m_toleranceZ===e.m_toleranceZ&&this.m_toleranceM===e.m_toleranceM&&this.m_precision===e.m_precision}setBestXyDomainFromEnvelope(e,i){}setBestZDomainFromZRange(e,i,n){}setBestMDomainFromMRange(e,i,n){}}function Nve(){return PO||(PO=H7(3857,0,null,!0)),PO}function Ove(){return TO||(TO=H7(102100,0,null,!0)),TO}function $ve(){return IO||(IO=H7(4326,0,null,!0)),IO}function NB(t){t.m_falseX=0,t.m_falseY=0,t.m_unitsXY=1,t.m_falseZ=0,t.m_unitsZ=1,t.m_falseM=0,t.m_unitsM=1,t.m_toleranceXY=100*ts(),t.m_toleranceZ=100*ts(),t.m_toleranceM=100*ts(),t.m_precision=2}function B7(t,e,i,n){const s=e instanceof IB;NB(t),t.m_precision=n,t.m_falseX=Number.NaN,t.m_falseY=Number.NaN;const r=1e-4,o=.001,l=s?e.m_csType:e.isPCS?2:1;if(l===1){const y=(n===0?5555555555555555e-22:1e-9)*(s?e.getOneDegreeGCSUnit():Math.PI/e.metersOrRadiansPerUnit/180);t.m_unitsXY=1/y}else if(l===2){const y=(n===0?o:r)*(s?e.getOneMeterPCSUnit():1/e.metersOrRadiansPerUnit);t.m_unitsXY=1/y}else Je("unrecognized cs type");t.m_falseM=-1e5,t.m_unitsM=1/(n===0?o:r),t.m_unitsM=Math.max(1,t.m_unitsM),t.m_unitsXY=Math.max(1,t.m_unitsXY);let c=0,f=0;n!==0&&n!==1||(c=2/t.m_unitsXY,f=2/t.m_unitsM),t.m_toleranceXY=Math.max(c,s?e.getUnitsPerMillimeter():l===2?.001/e.metersOrRadiansPerUnit:.001/(e.semiMajor*e.metersOrRadiansPerUnit)),t.m_toleranceM=Math.max(o,f),Rve(t,i)}function Rve(t,e){if(t.m_falseZ=-1e5,e){const r=(t.m_precision===0?.001:1e-4)*e.getOneMeter();t.m_unitsZ=1/r}else t.m_unitsZ=1/(t.m_precision===0?.001:1e-4);t.m_unitsZ=Math.max(1,t.m_unitsZ);let s=0;t.m_precision!==0&&t.m_precision!==1||(s=2/t.m_unitsZ),t.m_toleranceZ=Math.max(e?e.getOneMeter()*.001:.001,s)}function olt(t,e,i,n){NB(t),t.m_precision=n;const s=n===0?wq:p9,r=1e-4,o=.001;let l=1,c=1,f=.001;e&&(c=e.getUnitToBaseFactor()),e&&e.getUnitType()===1?(l=400*Math.PI/180,f=8983152841195215e-24*Math.PI/180/c):(l=(n===0?o:r)*Number(s)*.5,f=o/c),l/=c,t.m_falseX=-l,t.m_falseY=-l,t.m_unitsXY=Number(s)/(2*l),t.m_falseM=-1e5,t.m_unitsM=1/(n===0?o:r),t.m_unitsM=Math.max(1,t.m_unitsM),t.snapPrecision();let y=0,_=0;t.m_precision!==0&&t.m_precision!==1||(_=2/t.m_unitsM,y=2/t.m_unitsXY),t.m_toleranceXY=Math.max(y,f),t.m_toleranceM=Math.max(o,_),Rve(t,i)}function H7(t,e,i,n){if(!n&&e===0){if(t===3857)return Nve();if(t===102100)return Ove();if(t===4326)return $ve()}const s=new ju;let r,o=null;return r=OB(t),s.m_unit=r.isPCS?new wC(r.metersOrRadiansPerUnit):new mC(r.metersOrRadiansPerUnit),B7(s.m_precisionDescriptor,r,o,1),s.m_bDefaultDescriptor=!0,s.m_userWKID=t,s.calculateHashCode(),s.initDbgName(),s}function J_(t,e,i){return Ev((t-e)*i)/i+e}let S2=null;const Lve=3552713678800501e-30;function alt(t,e,i){return t===e||Math.abs(t-e)<=i*(1+(Math.abs(t)+Math.abs(e))/2)}function vn(t,e){return alt(t,e,Lve)}function llt(t,e){return t===0||Math.abs(t)<=e}function clt(t){return llt(t,Lve)}let Zh,E2,Vi,tl,Za,B0,Sse;function Fve(t){return{_this:t,get(){return this._this},reset(e){this._this=e},release(){const e=this._this;return this._this=null,e}}}let EC=null;function OB(t){K(EC);const e=EC(t);return e.semiMajor=e.isPCS?Number.NaN:flt(t),e}function ult(t){EC=t,K(EC)}function hlt(t,e,i,n){return e<=0?(i[0]=0,n[0]=0,!1):(i[0]=e,n[0]=e,!0)}const dlt=/(?:ELLIPSOID|SPHEROID)\["(?:\w|[-()])+",(\d+\.\d+)/;function flt(t){if(typeof t=="string"){const e=t.match(dlt);e&&e.length===2||Je("bad gcs wkt");const i=Number.parseFloat(e[1]);return Number.isFinite(i)||Je("bad gcs wkt"),i}return S2||plt(),S2.has(t)||xs("gcs wkid not found"),S2.get(t)}function plt(){S2=new Map;for(const t in rM){const e=Number.parseFloat(t),i=rM[t];if(Array.isArray(i))for(const n of i)S2.set(n,e);else S2.set(i,e)}det()}function mlt(t,e,i,n,s){if(t.equals(e))return!1;if(n){let l=1,c=0,f=1,y=1,_=0,x=1;Number.isNaN(t.m_heightMetersPerUnit)||(l=t.m_heightMetersPerUnit,c=t.m_heightZ0,f=t.m_heightSign,y=e.m_heightMetersPerUnit,_=e.m_heightZ0,x=e.m_heightSign);const S=f*x*l/y;for(let P=0;P<s;P++)n[P]=(n[P]-c)*S+_}let r=1,o=0;if(Number.isNaN(t.m_XYToRadians)||(r=t.m_XYToRadians/e.m_XYToRadians,o=t.m_PrimeMeridianDegrees-e.m_PrimeMeridianDegrees,o!==0&&(o=bye(o),o/=e.m_XYToRadians)),Array.isArray(i)){const l=i;for(let c=0;c<s;c++)l[c][0]=l[c][0]*r+o,l[c][1]=l[c][1]*r}else{const l=i;for(let c=0;c<s;c++){const f=c<<1;l[f]=l[f]*r+o,l[f+1]=l[f+1]*r}}return!0}function Ese(){return{m_heightMetersPerUnit:0,m_heightSign:0,m_heightZ0:0,m_XYToRadians:0,m_PrimeMeridianDegrees:0,assign(t){this.m_heightMetersPerUnit=t.m_heightMetersPerUnit,this.m_heightSign=t.m_heightSign,this.m_heightZ0=t.m_heightZ0,this.m_XYToRadians=t.m_XYToRadians,this.m_PrimeMeridianDegrees=t.m_PrimeMeridianDegrees},equals(t){return va(this.m_heightSign,t.m_heightSign)&&va(this.m_heightMetersPerUnit,t.m_heightMetersPerUnit)&&va(this.m_heightZ0,t.m_heightZ0)&&va(this.m_XYToRadians,t.m_XYToRadians)&&va(this.m_PrimeMeridianDegrees,t.m_PrimeMeridianDegrees)},initFromGcsAndVcsPe(t,e){this.m_heightSign=1,this.m_heightMetersPerUnit=Number.NaN,this.m_heightZ0=0,this.m_XYToRadians=Number.NaN,this.m_PrimeMeridianDegrees=Number.NaN,e&&K(0),t&&(this.m_XYToRadians=t.getUnit().getUnitFactor(),this.m_PrimeMeridianDegrees=t.getPrimem().getLongitude())},initFromGcsAndVcs(t,e){const i=t?t.getPECoordSys():null,n=e?e.getPEVerticalCoordSys():null;this.initFromGcsAndVcsPe(i,n)},processUnitParams(t){Number.isNaN(this.m_heightMetersPerUnit)&&(this.m_heightMetersPerUnit=t.m_heightMetersPerUnit,this.m_heightSign=t.m_heightSign,this.m_heightZ0=t.m_heightZ0),Number.isNaN(this.m_XYToRadians)&&(this.m_XYToRadians=t.m_XYToRadians,this.m_PrimeMeridianDegrees=t.m_PrimeMeridianDegrees)}}}function glt(t,e,i,n,s,r,o){let l=null;e&&(l=e.getPEVerticalCoordSys());let c=null;t&&(c=t.getPECoordSys());let f=null;n&&(f=n.getPEVerticalCoordSys());let y=null;if(i&&(y=i.getPECoordSys()),!(c||l||y||f))return!1;const _=Ese();_.initFromGcsAndVcsPe(c,l);const x=Ese();return x.initFromGcsAndVcsPe(y,f),mlt(_,x,s,r,o)}df(0),df(1);const ylt=new C0;function vlt(t,e){return ylt.executeMany(new nh(t),e,null).next()}const uo="_gxVersion",zve=2,qve=1;function $B(t){return Array.isArray(t)?t[0].spatialReference:t.spatialReference}function PM(t){switch(t.type){case"point":return xlt(t);case"multipoint":return blt(t);case"polyline":return Slt(t);case"polygon":return wlt(t);case"extent":return _lt(t);default:throw new Error(`Unsupported geometry type: ${t.type}`)}}function _lt(t){if(!t.getCacheValue(uo)){const e=new ur;e.setCoords(t.xmin,t.ymin,t.xmax,t.ymax),t.hasM&&e.setInterval(zve,0,t.mmin,t.mmax),t.hasZ&&e.setInterval(qve,0,t.zmin,t.zmax),t.setCacheValue(uo,e)}return t.getCacheValue(uo)}function blt(t){if(!t.getCacheValue(uo)){const e=new Qs,i=new Ut,n=t.points,s=t.hasM,r=t.hasZ,o=r?3:2;for(let l=0,c=n.length;l<c;l++){const f=n[l];i.setXYCoords(f[0],f[1]),r&&i.setZ(f[2]??0),s&&i.setM(f[o]??NaN),e.add(i)}t.setCacheValue(uo,e)}return t.getCacheValue(uo)}function xlt(t){if(!t.getCacheValue(uo)){const e=new Ut;e.setXYCoords(t.x,t.y),t.hasM&&e.setM(t.m),t.hasZ&&e.setZ(t.z),t.setCacheValue(uo,e)}return t.getCacheValue(uo)}function wlt(t){if(!t.getCacheValue(uo)){const e=new Wt;Vve(e,t),t.setCacheValue(uo,e)}return t.getCacheValue(uo)}function Slt(t){if(!t.getCacheValue(uo)){const e=new vi;Vve(e,t),t.setCacheValue(uo,e)}return t.getCacheValue(uo)}function Vve(t,e){const i=e.type==="polygon",n=new Ut,s=i?e.rings:e.paths,r=e.hasM,o=e.hasZ,l=o?3:2;for(let c=0,f=s.length;c<f;c++){const y=s[c],_=i?y.length-1:y.length;for(let x=0;x<_;x++){const S=y[x];n.setXYCoords(S[0],S[1]),o&&n.setZ(S[2]??0),r&&n.setM(S[l]??NaN),x===0?t.startPathPoint(n):t.lineToPoint(n)}}}function RB(t){if(t.wkid)return Sq(t.wkid);const e=t.wkt2||t.wkt;return e?kve(e):null}function LB(t,e){if(t)switch(t.getGeometryType()){case me.enumPoint:return Plt(t,e);case me.enumEnvelope:return Elt(t,e);case me.enumMultiPoint:return Clt(t,e);case me.enumPolyline:return Ilt(t,e);case me.enumPolygon:return Tlt(t,e)}return null}function Elt(t,e){if(t.isEmpty())return null;const i=new dr({xmin:t.getXMin(),ymin:t.getYMin(),xmax:t.getXMax(),ymax:t.getYMax(),spatialReference:e}),n=t.getDescription();if(n.hasM()){const s=t.queryInterval(zve,0);i.mmin=s.vmin,i.mmax=s.vmax}if(n.hasZ()){const s=t.queryInterval(qve,0);i.zmin=s.vmin,i.zmax=s.vmax}return i.setCacheValue(uo,t),i}function Clt(t,e){if(t.isEmpty())return null;const i=t.getDescription(),n=i.hasM(),s=i.hasZ(),r=[],o=new Ut;for(let c=0,f=t.getPointCount();c<f;c++){t.getPointByVal(c,o);const y=[o.getX(),o.getY()];s&&y.push(o.getZ()),n&&y.push(o.getM()),r.push(y)}const l=new Hv({hasM:n,hasZ:s,points:r,spatialReference:e});return l.setCacheValue(uo,t),l}function Plt(t,e){if(t instanceof Y)return new Yi({x:t.x,y:t.y,spatialReference:e});if(t.isEmpty())return null;const i=new Yi({x:t.getX(),y:t.getY(),spatialReference:e}),n=t.getDescription();return n.hasM()&&(i.m=t.getM()),n.hasZ()&&(i.z=t.getZ()),i.setCacheValue(uo,t),i}function Tlt(t,e){if(t.isEmpty())return null;const i=new el({spatialReference:e});return Gve(i,t),i.setCacheValue(uo,t),i}function Ilt(t,e){if(t.isEmpty())return null;const i=new $f({spatialReference:e});return Gve(i,t),i.setCacheValue(uo,t),i}function Gve(t,e){const i=t.type==="polygon",n=e.getDescription(),s=n.hasM(),r=n.hasZ(),o=[],l=new Ut;for(let c=0,f=e.getPathCount();c<f;c++){o.push([]);for(let y=e.getPathStart(c),_=e.getPathEnd(c);y<_;y++){e.getPointByVal(y,l);const x=[l.getX(),l.getY()];r&&x.push(l.getZ()),s&&x.push(l.getM()),o[c].push(x)}i&&o[c].push(o[c][0].slice())}t.hasM=s,t.hasZ=r,i?t.rings=o:t.paths=o}elt(t=>{let e,i;typeof t=="number"?e=t:i=t;const n={wkid:e,wkt:i};let s,r;if(i){s=JM(i);const o=$2(n);if(!s&&!o)throw new Error(`Unsupported WKT type: ${i}`)}else s=!$2(n);return r=e&&jle.has(e)?Math.PI/200:s?DV(n):Math.PI/180,{isPCS:s,metersOrRadiansPerUnit:r,semiMajor:0,wkidOrWkt:t}});function Cse(t){const e=t.map(PM),i=$B(t);return LB(vlt(e,RB(i)),i)}function Mlt(t,e){const i=t.getGeometryType();return i===me.enumPoint?t:bi(i)?Alt(t):i===me.enumMultiPoint?t:(i===me.enumEnvelope||i===me.enumMultipatch&&K(0),t)}function Alt(t){if(klt(t))return t;const e=t.createInstance();for(let i=0,n=t.getPathCount();i<n;i++){const s=t.getPathSize(i);if(s!==0){if(s===1&&(t.getSegmentCountPath(i)===0||t.getSegmentType(t.getPathStart(i))===me.enumLine||!t.isClosedPath(i)))continue;e.addPath(t,i,!0)}}return e}function klt(t){for(let e=0,i=t.getPathCount();e<i;e++){const n=t.getPathSize(e);if(n===0||n===1&&(t.getSegmentCountPath(e)===0||t.getSegmentType(t.getPathStart(e))===me.enumLine||!t.isClosedPath(e)))return!1}return!0}class Dlt{getOperatorType(){return 10204}supportsCurves(){return!0}accelerateGeometry(e,i,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,n,s){return new Pse(e,i,n,s)}execute(e,i,n,s){return e||Je("null param is not allowed."),new Pse(null,i,n,s).generalize(e)}}class Pse extends Aa{constructor(e,i,n,s){super(),this.m_pline=null,this.m_point=new Ut,this.m_stack=[],this.m_resultstack=[],this.m_callCount=0,this.m_progressTracker=s,this.m_geoms=e,this.m_maxDeviation=i,this.m_bRemoveDegenerateParts=n}tock(){return!0}getRank(){return 1}next(){const e=this.m_geoms.next();return e===null?null:(sh(e),this.generalize(e))}getGeometryID(){return this.m_geoms.getGeometryID()}generalize(e){const i=e.getGeometryType();if(V0(i))return e;if(i===me.enumEnvelope){const o=new Wt({vd:e.getDescription()});return o.addEnvelope(e,!1),this.generalize(o)}if(Ds(i)){const o=new vi({vd:e.getDescription()});return o.addSegment(e,!0),this.generalize(o)}if(bi(i)||Bn(""),e.isEmpty()||this.m_maxDeviation<=0)return e;const n=new t0().execute(e,0,.05*this.m_maxDeviation,0,this.m_progressTracker);e.hasNonLinearSegments()&&(this.m_maxDeviation*=.95);const s=n,r=e.createInstance();r.getGeometryType()===me.enumPolygon&&r.setFillRule(e.getFillRule()),this.m_xy=s.getAttributeStreamRef(0);{const o={stack:[],error:void 0,hasError:!1};try{const l=new ni;this.m_pline=l,sc(o,S7(()=>{this.m_pline=null},!1),!1);for(let c=0,f=s.getPathCount();c<f;c++)this.generalizePath(s.getImpl(),c,r.getImpl())}catch(l){o.error=l,o.hasError=!0}finally{_m(o)}}return this.m_resultstack.length=0,this.m_stack.length=0,r}generalizePath(e,i,n){if(e.getPathSize(i)<2)return;this.m_resultstack.length=0,this.m_stack.length=0;const s=e.getPathStart(i),r=e.getPathEnd(i)-1,o=e.isClosedPath(i),l=e.isClosedPathInXYPlane(i);let c=0,f=-1;this.m_stack.push(o?s:r),this.m_stack.push(s);let y=!1,_=!1;for(!this.m_bRemoveDegenerateParts&&l&&(y=!0,_=!0);this.m_stack.length>1;){const S=this.m_stack.at(-1);this.m_stack.pop();const P=this.m_stack.at(-1);let A=e.getXY(S);this.m_pline.setStartXY(A),A=e.getXY(P),this.m_pline.setEndXY(A);const D=[0];let N=this.findGreatestDistance(S,P,r,D);N>=0&&(y?y=!1:(_&&D[0]>c&&(c=D[0],f=N),D[0]<=this.m_maxDeviation&&(N=-1))),N>=0?(this.m_stack.push(N),this.m_stack.push(S)):this.m_resultstack.push(S)}o||this.m_resultstack.push(this.m_stack[0]);const x=this.m_resultstack.length;if(x===e.getPathSize(i)&&x===this.m_stack.length)n.addPath(e,i,!0);else if(this.m_resultstack.length>0){if(this.m_bRemoveDegenerateParts&&this.m_resultstack.length<=2&&(o||this.m_resultstack.length===1||Y.distance(e.getXY(this.m_resultstack[0]),e.getXY(this.m_resultstack[1]))<=this.m_maxDeviation))return;if(_&&f>=0&&c<=this.m_maxDeviation){const S=this.m_resultstack.at(-1)>f;this.m_resultstack.push(f),S&&(this.m_resultstack[this.m_resultstack.length-2]=Et(this.m_resultstack[this.m_resultstack.length-1],this.m_resultstack[this.m_resultstack.length-1]=this.m_resultstack[this.m_resultstack.length-2]))}for(let S=0,P=this.m_resultstack.length;S<P;S++)e.getPointByVal(this.m_resultstack[S],this.m_point),S===0?n.startPathPoint(this.m_point):n.lineToPoint(this.m_point);if(o){for(let S=this.m_resultstack.length;S<3;S++)n.lineToPoint(this.m_point);n.closePathWithLine()}}}findGreatestDistance(e,i,n,s){let r=i-1;i<=e&&(r=n);let o=-1,l=0;const c=new Y;for(let f=e+1;f<=r;f++){this.m_xy.queryPoint2D(2*f,c);const y=c.x,_=c.y,x=this.m_pline.getClosestCoordinate(c,!1);c.assign(this.m_pline.getCoord2D(x)),c.x-=y,c.y-=_;const S=c.length();S>l&&(o=f,l=S),this.m_callCount++}return s[0]=l,o}}class Nlt{getOperatorType(){return 10104}accelerateGeometry(e,i,n){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}isSimple(e,i,n,s,r){return nve(e,i,n,s,r)===5}executeMany(e,i,n,s){return new Olt(e,i,n,s)}execute(e,i,n,s){const r=new nh([e]),o=this.executeMany(r,i,n,s).next();return o||xt("null output"),o}}class Olt extends Aa{constructor(e,i,n,s){super(),e||Je(""),this.m_progressTracker=s,this.m_bForceSimplify=n,this.m_index=-1,this.m_inputGeometryCursor=e,this.m_spatialReference=i}next(){const e=this.m_inputGeometryCursor.next();return e?(sh(e),this.m_index=this.m_inputGeometryCursor.getGeometryID(),this.simplify(e)):null}getGeometryID(){return this.m_index}tock(){return!1}getRank(){return 1}simplify(e){return e||Je(""),rve(e,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker)}}var Ts;function Eh(t,e,i,n,s,r){return{m_from:t.clone(),m_to:e.clone(),m_center:i.clone(),m_next:s,m_type:n}}function DT(t,e,i,n,s){return{m_from:t.clone(),m_to:e.clone(),m_next:i,m_type:4,m_center:new Y}}(function(t){t[t.enumDummy=256]="enumDummy",t[t.enumLine=1]="enumLine",t[t.enumArc=2]="enumArc",t[t.enumMiter=8]="enumMiter",t[t.enumBevel=16]="enumBevel",t[t.enumJoinMask=26]="enumJoinMask",t[t.enumConnectionMask=27]="enumConnectionMask"})(Ts||(Ts={}));class $lt extends Aa{constructor(e,i,n,s,r,o,l,c,f,y){super(),this.m_index=0,this.m_bufferedPolygon=null,this.m_x=0,this.m_y=0,this.m_progressTracker=y,this.m_parent=e,this.m_mp=i,this.m_distance=n,this.m_spatialReference=s,this.m_densifyDist=c,this.m_maxVertexInCompleteCircle=f,this.m_joins=r,this.m_caps=o,this.m_miterLimit=l}next(){const e=new Ut;for(;;){if(this.m_index===this.m_mp.getPointCount())return null;if(this.m_caps===1)return this.m_index=this.m_mp.getPointCount(),new Wt({vd:this.m_mp.getDescription()});if(this.m_mp.getPointByVal(this.m_index,e),this.m_index++,!e.isEmpty())break}let i,n=!1;if(this.m_bufferedPolygon===null&&(this.m_x=e.getX(),this.m_y=e.getY(),this.m_bufferedPolygon=this.m_parent.buffer(e,this.m_distance,this.m_spatialReference,this.m_joins,this.m_caps,this.m_miterLimit,this.m_densifyDist,this.m_maxVertexInCompleteCircle),n=!0),i=this.m_index<this.m_mp.getPointCount()?this.m_bufferedPolygon.clone():this.m_bufferedPolygon,!n){const s=new _i,r=e.getX()-this.m_x,o=e.getY()-this.m_y;s.setShiftCoords(r,o),i.applyTransformation(s)}return A1e(i,0),i}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class Rlt extends Aa{constructor(e){super(),this.m_currentPathIndex=0,this.m_polyline=e}next(){if(!this.m_polyline)return null;const e=this.m_polyline.getImpl(),i=e.getPathCount();if(this.m_currentPathIndex<i){const n=this.m_currentPathIndex;if(this.m_currentPathIndex++,!e.isClosedPathInXYPlane(n)){let r=e.getXY(e.getPathEnd(n)-1);for(;this.m_currentPathIndex<e.getPathCount();){const o=e.getXY(e.getPathStart(this.m_currentPathIndex));if(e.isClosedPathInXYPlane(this.m_currentPathIndex)||!o.equals(r))break;r=e.getXY(e.getPathEnd(this.m_currentPathIndex)-1),this.m_currentPathIndex++}}if(n===0&&this.m_currentPathIndex===this.m_polyline.getPathCount()){const r=this.m_polyline;return this.m_polyline=null,r}const s=new vi({vd:this.m_polyline.getDescription()});s.addPath(this.m_polyline,n,!0);for(let r=n+1;r<this.m_currentPathIndex;r++)s.addSegmentsFromPath(this.m_polyline,r,0,e.getSegmentCountPath(r),!1);return this.m_currentPathIndex===this.m_polyline.getPathCount()&&(this.m_polyline=null),s}return null}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class Llt extends Aa{constructor(e,i,n){super(),this.m_geometry=null,this.m_index=0,this.m_bufferer=e,this.m_geoms=i,this.m_index=0,this.m_bFilter=n}next(){if(this.m_geometry===null&&(this.m_index=0,this.m_geometry=this.m_geoms.next(),!this.m_geometry))return null;const e=this.m_geometry.getImpl();if(this.m_index<e.getPathCount()){const i=this.m_index;return this.m_index++,this.m_bufferer.bufferPolylinePath(this.m_geometry,i,this.m_bFilter)}return this.m_geometry=null,this.next()}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class Flt extends Aa{constructor(e){super(),this.m_index=0,this.m_bufferer=e}next(){const e=this.m_bufferer.m_geometry;if(this.m_index<e.getPathCount()){const i=this.m_index,n=e.calculateRingArea2D(this.m_index);for(K(n>0),this.m_index++;this.m_index<e.getPathCount()&&!(e.calculateRingArea2D(this.m_index)>0);)this.m_index++;let s;return s=i===0&&this.m_index===e.getPathCount()?this.m_bufferer.bufferPolygonImpl(e,0,e.getPathCount()):this.m_bufferer.bufferPolygonImpl(e,i,this.m_index),s}return null}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class zlt{constructor(e){this.m_geometry=null,this.m_bufferCommands=[],this.m_originalGeomType=me.enumUnknown,this.m_maxVertexInCompleteCircle=-1,this.m_circleTemplateSize=-1,this.m_oldCircleTemplateSize=0,this.m_spatialReference=null,this.m_tolerance=new ta(0,0),this.m_smallTolerance=new ta(0,0),this.m_filterTolerance=0,this.m_densifyDist=-1,this.m_distance=Number.NaN,this.m_absDistance=0,this.m_absDistanceReversed=0,this.m_dA=-1,this.m_miterLimit=4,this.m_joins=0,this.m_caps=0,this.m_bRoundBuffer=!0,this.m_bOutputLoops=!0,this.m_bFilter=!0,this.m_circleTemplate=[],this.m_leftStack=[],this.m_middleStack=[],this.m_helperLine1=new ni,this.m_helperLine2=new ni,this.m_helperArray=[],this.m_progressCounter=0,this.m_densificator=yB.constructDefault(e),this.m_progressTracker=e}buffer(e,i,n,s,r,o,l,c){if(e||Je("Geometry.Bufferer.Impl.Buffer"),l<0&&Je("Geometry.Bufferer.Impl.Buffer"),_7(e.getGeometryType())&&Bn("Unsupported geometry type."),e.isEmpty())return new Wt({vd:e.getDescription()});if(this.m_joins=s,this.m_caps=r,this.m_bRoundBuffer=!1,this.m_miterLimit=o,this.m_originalGeomType=e.getGeometryType(),Lte(this.m_originalGeomType)?this.m_bRoundBuffer=this.m_joins===0:V0(this.m_originalGeomType)?this.m_bRoundBuffer=this.m_caps===0:p1e(this.m_originalGeomType)&&(this.m_bRoundBuffer=this.m_joins===0&&this.m_caps===0),this.m_bFilter=this.m_bRoundBuffer,this.m_geometry=Mlt(e),this.m_geometry.isEmpty())return new Wt({vd:e.getDescription()});const f=new xe;this.m_geometry.queryLooseEnvelope(f),i>0&&f.inflateCoords(i,i),this.m_tolerance=Js(n,f,!0),this.m_smallTolerance=Js(null,f,!0),c<=0&&(c=96),this.m_spatialReference=n,this.m_distance=i,this.m_absDistance=Math.abs(this.m_distance),this.m_absDistanceReversed=this.m_absDistance!==0?1/this.m_absDistance:0,Number.isNaN(l)||l===0?l=1e-5*this.m_absDistance:l>.5*this.m_absDistance&&(l=.5*this.m_absDistance),c<12&&(c=12);const y=Math.abs(i)*(1-Math.cos(Math.PI/c));if(y>l)l=y;else if(i!==0){const x=Math.PI/Math.acos(1-l/Math.abs(i));x<c-1&&(c=Math.trunc(x))<12&&(c=12,l=Math.abs(i)*(1-Math.cos(Math.PI/c)))}this.m_densifyDist=l,this.m_maxVertexInCompleteCircle=c,this.m_filterTolerance=this.m_bRoundBuffer?Math.min(this.m_smallTolerance.total(),.25*this.m_densifyDist):0,this.m_circleTemplateSize=this.calcN(),this.m_circleTemplateSize!==this.m_oldCircleTemplateSize&&(this.m_circleTemplate.length=0,this.m_oldCircleTemplateSize=this.m_circleTemplateSize),this.m_densifyDist>0&&Kj(this.m_geometry)&&(this.m_geometry=this.m_densificator.densifyEx(this.m_geometry,0,this.m_densifyDist,0,this.m_joins!==0,Eo()));const _=this.bufferImpl();return this.m_geometry=null,_}generateCircleTemplate(){if(this.m_circleTemplate.length)return;const e=this.m_circleTemplateSize,i=Math.trunc((e+3)/4),n=.5*Math.PI/i;this.m_dA=n,this.m_circleTemplate.length=4*i;const s=Math.cos(n),r=Math.sin(n),o=Y.construct(0,1);for(let l=0;l<i;l++)this.m_circleTemplate[l+0*i]=Y.construct(o.y,-o.x),this.m_circleTemplate[l+1*i]=Y.construct(-o.x,-o.y),this.m_circleTemplate[l+2*i]=Y.construct(-o.y,o.x),this.m_circleTemplate[l+3*i]=o.clone(),o.rotateReverse(s,r)}bufferImpl(){const e=this.m_geometry.getGeometryType();if(Ds(e)){const i=new vi({vd:this.m_geometry.getDescription()});return i.addSegment(this.m_geometry,!0),this.m_geometry=i,this.bufferImpl()}if(this.m_distance<=this.m_tolerance.total()){if(!Lte(e))return new Wt({vd:this.m_geometry.getDescription()});if(this.m_distance<0){const i=new xe;if(this.m_geometry.queryEnvelope(i),i.width()<=2*this.m_absDistance||i.height()<=2*this.m_absDistance)return new Wt({vd:this.m_geometry.getDescription()})}}switch(this.m_geometry.getGeometryType()){case me.enumPoint:return this.bufferPoint();case me.enumMultiPoint:return this.bufferMultiPoint();case me.enumPolyline:return this.bufferPolyline();case me.enumPolygon:return this.bufferPolygon();case me.enumEnvelope:return this.bufferEnvelope();default:xt("")}}bufferPolyline(){if(this.isDegenerateGeometry(this.m_geometry)){const f=new Ut;this.m_geometry.getPointByVal(0,f);const y=new xe;return this.m_geometry.queryEnvelope(y),f.setXY(y.getCenter()),this.bufferDegeneratePath(f,!0)}const e=this.m_geometry,i=this.m_geometry.getDescription();this.m_geometry=null;const n=new Rlt(e);let s,r;s=this.m_joins===0?new Dlt().executeMany(n,.25*this.m_densifyDist,!1,this.m_progressTracker):n,r=this.m_bRoundBuffer?new Nlt().executeMany(s,null,!0,this.m_progressTracker):s;const o=new Llt(this,r,this.m_bFilter),l=new C0().executeMany(o,this.m_spatialReference,this.m_progressTracker,2),c=new Rc().executeMany(l,this.m_spatialReference,!1,this.m_progressTracker).next();return c!==null?c:new Wt({vd:i})}bufferPolygon(){if(this.m_distance===0)return this.m_geometry;this.generateCircleTemplate();const e=new Rc().execute(this.m_geometry,null,!1,this.m_progressTracker);if(this.m_distance<0){if(this.m_geometry=e,this.m_geometry.isEmpty())return this.m_geometry;const i=this.m_geometry,n=this.bufferPolygonImpl(i,0,i.getPathCount());return new Rc().execute(n,this.m_spatialReference,!1,this.m_progressTracker)}{if(this.m_geometry=e,this.isDegenerateGeometry(this.m_geometry)){const r=new Ut;this.m_geometry.getPointByVal(0,r);const o=new xe;return this.m_geometry.queryEnvelope(o),r.setXY(o.getCenter()),this.bufferDegeneratePath(r,!0)}const i=new Flt(this),n=new C0().executeMany(i,this.m_spatialReference,this.m_progressTracker,2),s=new Rc().executeMany(n,this.m_spatialReference,!1,this.m_progressTracker).next();return s!==null?s:new Wt({vd:this.m_geometry.getDescription()})}}bufferPolygonImpl(e,i,n){const s=e,r=s.getImpl();let o=new Wt({vd:e.getDescription()});for(let l=i;l<n;l++){if(r.getPathSize(l)<1)continue;const c=r.calculateRingArea2D(l),f=new xe;if(r.queryPathEnvelope(l,f),this.m_distance>0)if(c>0)if(this.isDegeneratePath(r,l)){const y=new Ut;r.getPointByVal(r.getPathStart(l),y),y.setXY(f.getCenter()),o.add(this.bufferDegeneratePath(y,!0),!1)}else{const y=new vi({vd:e.getDescription()}),_=y.getImpl();if(jat(this.m_geometry,l)){const x=this.bufferConvexPath(s,l);o.add(x,!1)}else{this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,1);const x=this.bufferCleanup(y);o.add(x,!1)}}else{if(f.width()+this.m_tolerance.total()<=2*this.m_absDistance||f.height()+this.m_tolerance.total()<=2*this.m_absDistance)continue;const y=new vi({vd:e.getDescription()}),_=y.getImpl();if(this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,1),!y.isEmpty()){const x=f,S=Math.max(1,this.m_absDistance),P=x.clone();P.inflateCoords(S,S),_.addEnvelope(P,!1);const A=this.bufferCleanup(y);o.reserve(o.getPointCount()+A.getPointCount()-4),MO(A,o,P,!0)}}else if(c>0){if(f.width()+this.m_tolerance.total()<=2*this.m_absDistance||f.height()+this.m_tolerance.total()<=2*this.m_absDistance)continue;const y=new vi({vd:e.getDescription()}),_=y.getImpl();if(this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,-1),!y.isEmpty()){const x=new xe;_.queryLooseEnvelope(x);const S=Math.max(1,this.m_absDistance),P=x.clone();P.inflateCoords(S,S),_.addEnvelope(P,!1),MO(this.bufferCleanup(y),o,P,!0)}}else{const y=new vi({vd:e.getDescription()}),_=y.getImpl();this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,-1);const x=this.bufferCleanup(y);for(let S=0,P=x.getPathCount();S<P;S++)o.addPath(x,S,!0)}}if(this.m_distance>0)return o.getPathCount()>1?this.bufferCleanup(o):NT(o);{const l=new xe;if(o.queryLooseEnvelope(l),o.isEmpty())return NT(o);{const c=Math.max(1,this.m_absDistance),f=l.clone();f.inflateCoords(c,c),o.addEnvelope(f,!1);const y=this.bufferCleanup(o);o=new Wt;const _=new Wt({vd:y.getDescription()});return MO(y,_,f,!1),NT(_)}}}bufferPoint(){return this.bufferPointImpl(this.m_geometry)}bufferPointImpl(e){const i=new Wt({vd:e.getDescription()});return this.m_caps===0?(this.addCircle(i.getImpl(),e),this.setStrongSimple(i)):this.m_caps===2?(this.addSquare(i.getImpl(),e),this.setStrongSimple(i)):i}bufferDegeneratePath(e,i){const n=new Wt({vd:e.getDescription()});return i&&this.m_joins===0||!i&&this.m_caps===0?(this.addCircle(n.getImpl(),e),this.setStrongSimple(n)):i||this.m_caps!==2?n:(this.addSquare(n.getImpl(),e),this.setStrongSimple(n))}bufferMultiPoint(){const e=new $lt(this,this.m_geometry,this.m_distance,this.m_spatialReference,this.m_joins,this.m_caps,this.m_miterLimit,this.m_densifyDist,this.m_maxVertexInCompleteCircle,this.m_progressTracker);return new C0().executeMany(e,this.m_spatialReference,this.m_progressTracker,2).next()}bufferEnvelope(){let e=new Wt({vd:this.m_geometry.getDescription()});if(this.m_distance<=0){if(this.m_distance===0)e.addEnvelope(this.m_geometry,!1),Tse(this.m_geometry,this.m_tolerance.total())&&(e=this.setStrongSimple(e));else{const n=new ur;this.m_geometry.queryEnvelope(n),n.inflateCoords(this.m_distance,this.m_distance),e.addEnvelope(n,!1),Tse(n,this.m_tolerance.total())&&(e=this.setStrongSimple(e))}return e}if(this.m_joins===1){const n=new ur({copy:this.m_geometry});return n.inflateCoords(this.m_absDistance,this.m_absDistance),e.addEnvelope(n,!1),e}const i=this.m_geometry.clone();if(i.width()===0||i.height()===0){if(i.width()===0&&i.height()===0){const r=new Ut({vd:this.m_geometry.getDescription()});return i.queryCornerByVal(0,r),this.m_geometry=r,this.bufferImpl()}const n=new vi({vd:this.m_geometry.getDescription()}),s=new Ut;return i.queryCornerByVal(0,s),n.startPathPoint(s),i.queryCornerByVal(2,s),n.lineToPoint(s),this.m_geometry=n,this.bufferImpl()}return e.addEnvelope(this.m_geometry,!1),this.m_geometry=e,this.bufferConvexPath(e,0)}bufferConvexPath(e,i){this.generateCircleTemplate();const n=e.hasAttribute(10),s=new Wt({vd:e.getDescription()}),r=s.getImpl();s.reserve((this.m_circleTemplate.length/10+4)*e.getPathSize(i));const o=new Y,l=new Y,c=new Y,f=new Y(0,0),y=new Y,_=new Y,x=e.getImpl(),S=e.getPathSize(i),P=e.getPathStart(i);for(let A=0,D=e.getPathSize(i);A<D;A++){const N=x.getXY(P+A),F=x.getXY(P+(A+1)%S),G=x.getXY(P+(A+2)%S);y.setSub(F,N),y.length()===0&&xt("");const V=n&&!!(1&x.getAttributeAsInt(10,(A+1)%S,0));y.normalize();const B=y.clone();y.leftPerpendicularThis(),y.scale(this.m_absDistance),o.setAdd(y,N),l.setAdd(y,F),A===0?r.startPath(o):r.lineTo(o),r.lineTo(l),_.setSub(G,F),_.length()===0&&xt(""),_.normalize();const W=_.clone();_.leftPerpendicularThis(),_.scale(this.m_absDistance),c.setAdd(_,F);let J=Ts.enumArc;const re=V?0:this.m_joins;if(re===2)J=Ts.enumBevel;else if(re===1){const ne=-B.crossProduct(W);f.setSub(B,W),f.scale(this.m_absDistance/ne),f.length()<this.m_miterLimit*this.m_absDistance?(f.addThis(F),J=Ts.enumMiter):J=Ts.enumBevel}else f.assign(F);this.addJoin(J,r,f,l,c,!1,!1)}return NT(s)}bufferPolylinePath(e,i,n){this.generateCircleTemplate();const s=e,r=s.getImpl();if(r.getPathSize(i)<1)return null;let o;if(o=this.m_bRoundBuffer?r.isClosedPathInXYPlane(i):r.isClosedPath(i),this.isDegeneratePath(r,i)&&this.m_distance>0){const f=new Ut;r.getPointByVal(r.getPathStart(i),f);const y=new xe;return r.queryPathEnvelope(i,y),f.setXY(y.getCenter()),this.bufferDegeneratePath(f,o)}const l=new vi({vd:e.getDescription()});l.reserve((Math.trunc(this.m_circleTemplate.length/10)+4)*r.getPathSize(i));const c=l.getImpl();return o?this.bufferClosedPath(s,i,c,n,1)!==2&&this.bufferClosedPath(s,i,c,n,-1):this.bufferOpenPath(s,i,c,n),this.bufferCleanup(l)}progress_(){}bufferCleanup(e,i=!1){const n=i?this.m_tolerance:this.m_smallTolerance;return _M(e,n,!0,!i,-1,this.m_progressTracker,0,!1)}calcN(){if(this.m_densifyDist===0)return this.m_maxVertexInCompleteCircle;const i=1-this.m_densifyDist*Math.abs(this.m_absDistanceReversed);let n=4;return n=i<-1?4:2*Math.PI/Math.acos(i)+.5,n<4?n=4:n>this.m_maxVertexInCompleteCircle&&(n=this.m_maxVertexInCompleteCircle),Math.trunc(n)}addJoin(e,i,n,s,r,o,l){if(this.generateCircleTemplate(),o&&(i.startPath(s),o=!1),e===Ts.enumBevel)return void(l&&i.lineTo(r));if(e===Ts.enumMiter){const N=n.clone();return i.lineTo(N),void(l&&i.lineTo(r))}const c=new Y;c.setSub(s,n),c.scale(this.m_absDistanceReversed);const f=new Y;f.setSub(r,n),f.scale(this.m_absDistanceReversed);let y=Math.atan2(c.y,c.x)/this.m_dA;y<0&&(y=this.m_circleTemplate.length+y),y=this.m_circleTemplate.length-y;let _=Math.atan2(f.y,f.x)/this.m_dA;_<0&&(_=this.m_circleTemplate.length+_),_=this.m_circleTemplate.length-_,_<y&&(_+=this.m_circleTemplate.length);let x=Math.trunc(_),S=Math.ceil(y),P=this.m_circleTemplate[S%this.m_circleTemplate.length].clone();P.scaleAddThis(this.m_absDistance,n);const A=10*this.m_tolerance.total();P.sub(s).length()<A&&(S+=1),P=this.m_circleTemplate[x%this.m_circleTemplate.length].clone(),P.scaleAddThis(this.m_absDistance,n),P.sub(r).length()<A&&(x-=1);let D=x-S;D++;for(let N=0,F=S%this.m_circleTemplate.length;N<D;N++,F=(F+1)%this.m_circleTemplate.length)P=this.m_circleTemplate[F].clone(),P.scaleAddThis(this.m_absDistance,n),i.lineTo(P),this.progress_();l&&i.lineTo(r)}bufferClosedPath(e,i,n,s,r){const o=new Hn,l=o.addPathFromMultiPath(e,i,!0);return this.bufferClosedPathImpl(o,l,n,s,r)}bufferClosedPathImpl(e,i,n,s,r){const o=e.getFirstVertex(e.getFirstPath(i)),l=new Ut;if(e.queryPoint(o,l),e.filterClosePoints(this.m_filterTolerance,!1,!1,!1,-1),e.getPointCount(i)<2)return r<0?0:(this.m_bRoundBuffer&&this.addCircle(n,l),2);K(e.getFirstPath(i)!==ae),K(e.getFirstVertex(e.getFirstPath(i))!==ae);const c=e.getXY(e.getFirstVertex(e.getFirstPath(i))),f=new _i;if(f.setShift(c.negate()),e.applyTransformation(f),s){const pe=jlt(e,i,r,!0,this.m_absDistance,this.m_filterTolerance,this.m_densifyDist);if(K(pe===1),e.getPointCount(i)<2)return r<0?0:(this.addCircle(n,l),2)}const y=this.m_joins!==0&&e.getVertexDescription().hasAttribute(10);this.m_bufferCommands.length=0;const _=e.getFirstPath(i);let x=e.getFirstVertex(_),S=r===1?e.getPrevVertex(x):e.getNextVertex(x),P=r===1?e.getNextVertex(x):e.getPrevVertex(x),A=!0;const D=new Y,N=new Y,F=new Y,G=new Y,V=new Y,B=new Y,W=new Y,J=new Y,re=this.m_absDistance,ne=e.getPathSize(_),oe=new Y(0,0);for(let pe=0;pe<ne;pe++){N.assign(e.getXY(P)),A&&(D.assign(e.getXY(x)),F.assign(e.getXY(S)),B.setSub(D,F),B.normalize(),J.leftPerpendicularOther(B),J.scale(re),G.setAdd(J,D));const ce=y&&!!(1&e.getAttributeAsDbl(10,x,0));V.setSub(N,D),V.normalize(),W.leftPerpendicularOther(V),W.scale(re);const ue=new Y;ue.setAdd(D,W);const se=B.crossProduct(V),de=B.dotProduct(V);if(se<0||de<0&&se<Math.abs(de)*Number.EPSILON*8){let Pe=!1;const Re=ce?0:this.m_joins;if(Re===1){const $e=-se;oe.setSub(B,V),oe.scale(this.m_absDistance/$e),oe.length()<this.m_miterLimit*this.m_absDistance&&(oe.addThis(D),Pe=!0),this.m_bufferCommands.push(Eh(G,ue,oe,Pe?Ts.enumMiter:Ts.enumBevel,this.m_bufferCommands.length+1))}else this.m_bufferCommands.push(Eh(G,ue,D,Re===0?Ts.enumArc:Ts.enumBevel,this.m_bufferCommands.length+1))}else G.equals(ue)||(this.m_bufferCommands.push(DT(G,D,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(DT(D,ue,this.m_bufferCommands.length+1)));const Se=new Y;Se.setAdd(N,W),this.m_bufferCommands.push(Eh(ue,Se,D,Ts.enumLine,this.m_bufferCommands.length+1)),G.setCoordsPoint2D(Se),J.setCoordsPoint2D(W),F.setCoordsPoint2D(D),D.setCoordsPoint2D(N),B.setCoordsPoint2D(V),S=x,x=P,A=!1,P=r===1?e.getNextVertex(x):e.getPrevVertex(x)}return this.m_bufferCommands.at(-1).m_next=0,this.processBufferCommands(n),f.setShift(c),n.applyTransformationToPath(f,n.getPathCount()-1),1}bufferOpenPath(e,i,n,s){if(this.m_bRoundBuffer){const ce=new vi({vd:e.getDescription()});return ce.addPath(e,i,!1),ce.addSegmentsFromPath(e,i,0,e.getSegmentCountPath(i),!1),this.bufferClosedPath(ce,0,n,s,1)}let r=0;const o=new vi({vd:e.getDescription()}),l=new Y(0,0);{const ce=new Hn,ue=ce.addPathFromMultiPath(e,i,!1),se=ce.getFirstVertex(ce.getFirstPath(ue)),de=new Ut;if(ce.queryPoint(se,de),l.assign(de.getXY()),ce.filterClosePoints(0,!1,!1,!1,-1),ce.getPointCount(ue)<2)return this.m_bRoundBuffer&&this.addCircle(n,de),2;const Se=ce.getGeometry(ce.getFirstGeometry());o.addPath(Se,0,!1),r=o.getPointCount()-1,o.addSegmentsFromPath(Se,0,0,Se.getSegmentCountPath(0)-1,!1)}const c=new Hn,f=c.addPathFromMultiPath(o,0,!0);K(c.getFirstPath(f)!==ae),K(c.getFirstVertex(c.getFirstPath(f))!==ae);const y=new _i;y.setShift(l.negate()),c.applyTransformation(y),this.m_bufferCommands.length=0;const _=c.getFirstPath(f),x=this.m_joins!==0&&c.getVertexDescription().hasAttribute(10);let S=c.getFirstVertex(_),P=c.getPrevVertex(S),A=c.getNextVertex(S),D=!0;const N=new Y,F=new Y,G=new Y,V=new Y,B=new Y,W=new Y,J=new Y,re=new Y,ne=this.m_absDistance,oe=c.getPathSize(_),pe=new Y(0,0);for(let ce=0;ce<oe;ce++){let ue=!1;ce!==0&&ce!==r||(ue=!0),F.assign(c.getXY(A)),D&&(N.assign(c.getXY(S)),G.assign(c.getXY(P)),W.setSub(N,G),W.normalize(),re.leftPerpendicularOther(W),re.scale(ne),V.setAdd(re,N));const se=x&&!!(1&c.getAttributeAsDbl(10,S,0));B.setSub(F,N),B.normalize(),J.leftPerpendicularOther(B),J.scale(ne);const de=new Y;de.setAdd(N,J);const Se=W.crossProduct(B),Pe=W.dotProduct(B);if(Se<0||Pe<0&&Se<Math.abs(Pe)*Number.EPSILON*8)if(ue)if(this.m_caps===0)this.m_bufferCommands.push(Eh(V,de,N,Ts.enumArc,this.m_bufferCommands.length+1));else if(this.m_caps===1)this.m_bufferCommands.push(Eh(V,de,N,Ts.enumLine,this.m_bufferCommands.length+1));else{const $e=B.mul(this.m_absDistance).negate(),we=$e.clone();$e.addThis(V),we.addThis(de),this.m_bufferCommands.push(Eh(V,$e,N,Ts.enumLine,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(Eh($e,we,N,Ts.enumLine,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(Eh(we,de,N,Ts.enumLine,this.m_bufferCommands.length+1))}else{let $e=!1;const we=se?0:this.m_joins;if(we===1){const Fe=-Se;pe.setSub(W,B),pe.scale(this.m_absDistance/Fe),pe.length()<this.m_miterLimit*this.m_absDistance&&(pe.addThis(N),$e=!0),this.m_bufferCommands.push(Eh(V,de,pe,$e?Ts.enumMiter:Ts.enumBevel,this.m_bufferCommands.length+1))}else this.m_bufferCommands.push(Eh(V,de,N,we===0?Ts.enumArc:Ts.enumBevel,this.m_bufferCommands.length+1))}else V.equals(de)||(this.m_bufferCommands.push(DT(V,N,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(DT(N,de,this.m_bufferCommands.length+1)));const Re=new Y;Re.setAdd(F,J),this.m_bufferCommands.push(Eh(de,Re,N,Ts.enumLine,this.m_bufferCommands.length+1)),V.setCoordsPoint2D(Re),re.setCoordsPoint2D(J),G.setCoordsPoint2D(N),N.setCoordsPoint2D(F),W.setCoordsPoint2D(B),P=S,S=A,D=!1,A=c.getNextVertex(S)}return this.m_bufferCommands.at(-1).m_next=0,this.processBufferCommands(n),y.setShift(l),n.applyTransformationToPath(y,n.getPathCount()-1),1}processBufferCommands(e){const i=this.cleanupBufferCommands();let n=!0,s=i+1;for(let r=i;s!==i;r=s){const o=this.m_bufferCommands[r];s=o.m_next!==-1?o.m_next:(r+1)%this.m_bufferCommands.length,o.m_type&&(n&&(e.startPath(o.m_from),n=!1),o.m_type&Ts.enumJoinMask?this.addJoin(o.m_type,e,o.m_center,o.m_from,o.m_to,!1,!0):e.lineTo(o.m_to))}}cleanupBufferCommands(){this.m_helperArray=Ge(Y,9);let e=0;for(let n=0,s=this.m_bufferCommands.length;n<s;){const r=this.m_bufferCommands[n];if(r.m_type&Ts.enumConnectionMask){e=n;break}n=r.m_next}let i=e+1;for(let n=e;i!==e;n=i){const s=this.m_bufferCommands[n];i=s.m_next;let r=1,o=null;for(;i!==n&&(o=this.m_bufferCommands[i],!(o.m_type&Ts.enumConnectionMask));)i=o.m_next,r++;r!==1&&(s.m_type&o.m_type)===Ts.enumLine&&(this.m_helperLine1.setStartXY(s.m_from),this.m_helperLine1.setEndXY(s.m_to),this.m_helperLine2.setStartXY(o.m_from),this.m_helperLine2.setEndXY(o.m_to),this.m_helperLine1.intersect(this.m_helperLine2,this.m_helperArray,null,null,this.m_smallTolerance.total())===1&&(s.m_to.assign(this.m_helperArray[0]),o.m_from.assign(this.m_helperArray[0]),s.m_next=i))}return e}isDegeneratePath(e,i){if(e.getPathSize(i)===1)return!0;if(this.m_joins===0&&this.m_caps===0){const n=new xe;if(e.queryPathEnvelope(i,n),Math.max(n.width(),n.height())<.5*this.m_densifyDist)return!0}return!1}isDegenerateGeometry(e){if(this.m_joins===0&&this.m_caps===0){const i=new xe;if(e.queryEnvelope(i),Math.max(i.width(),i.height())<.5*this.m_densifyDist)return!0}return!1}addCircle(e,i){const n=i.getXY();if(this.m_circleTemplate.length!==0){let f=this.m_circleTemplate[0].clone();f.scaleAddThis(this.m_absDistance,n),e.startPath(f);for(let y=1,_=this.m_circleTemplate.length;y<_;y++)f=this.m_circleTemplate[y].clone(),f.scaleAddThis(this.m_absDistance,n),e.lineTo(f);return}const s=this.m_circleTemplateSize,r=Math.trunc((s+3)/4),o=.5*Math.PI/r;e.reserve(4*r);const l=Math.cos(o),c=Math.sin(o);for(let f=3;f>=0;f--){const y=Y.construct(0,this.m_absDistance);switch(f){case 0:for(let _=0;_<r;_++)e.lineToCoords(y.x+n.x,y.y+n.y),y.rotateReverse(l,c);break;case 1:for(let _=0;_<r;_++)e.lineToCoords(-y.y+n.x,y.x+n.y),y.rotateReverse(l,c);break;case 2:for(let _=0;_<r;_++)e.lineToCoords(-y.x+n.x,-y.y+n.y),y.rotateReverse(l,c);break;default:e.startPathCoords(y.y+n.x,-y.x+n.y);for(let _=1;_<r;_++)y.rotateReverse(l,c),e.lineToCoords(y.y+n.x,-y.x+n.y)}this.progress_()}}addSquare(e,i){const n=new ur({vd:i.getDescription()});n.setCoords(i.getX(),i.getY(),i.getX(),i.getY()),n.inflateCoords(this.m_absDistance,this.m_absDistance),e.addEnvelope(n,!1)}setStrongSimple(e){return e.getImpl().setIsSimple(4,this.m_tolerance.total()),e.getImpl().updateOGCFlagsProtected(),e}}function NT(t){return A1e(t,0),t}function Tse(t,e){return!!t.isEmpty()||Math.min(t.width(),t.height())>e}function qlt(t,e,i,n,s,r,o,l){const c=t.getXY(i),f=t.getXY(n);if(c.equals(f))return-1;const y=.25*o,_=.25*o,x=new Y;x.setSub(f,c);const S=x.length(),P=S*S*.25,A=r*r-P;if(A<=P)return-1;const D=Math.sqrt(A);x.normalize();const N=x.clone();N.rightPerpendicularThis();const F=P/D,G=F<=_,V=Y.lerp(f,c,.5),B=N.clone(),W=F-y;B.scaleAddThis(Math.max(0,W),V),N.negate().scaleAddThis(D,V);const J=3.61*Xi(r-_),re=B.sub(c),ne=B.sub(f);let oe=!1,pe=0;const ce=ji(64,0);K(l===ce.length);{for(let _t=t.getPrevVertexEx(n,s);_t!==i;){if(t.getUserIndex(_t,e)===1)return-1;if(!t.getXY(_t).equals(f))break;{const ot=t.getPrevVertexEx(_t,s);t.removeVertex(_t,!1),_t=ot}}const Fe=new Y,it=c.clone();ce[pe++]=1;for(let _t=t.getNextVertexEx(i,s);_t!==n;){if(t.getUserIndex(_t,e)===1)return-1;const ot=t.getXY(_t);if(ot.equals(it)){const Vt=t.getNextVertexEx(_t,s);t.removeVertex(_t,!1),_t=Vt;continue}ce[pe++]=0;const ut=new Y;if(ut.setSub(ot,c),ut.dotProduct(N)<0)return 0;(Y.sqrDistance(ot,c)>J||Y.sqrDistance(ot,f)>J)&&(oe=!0);let Pt=0;if(ot.sub(c).crossProduct(re)>=0&&(Pt=1),ot.sub(f).crossProduct(ne)<=0&&(Pt|=2),Pt===0)return 0;ce[pe-1]=Pt,Fe.assign(it),it.assign(ot),_t=t.getNextVertexEx(_t,s)}if(pe===1)return 0;K(pe<ce.length),ce[pe++]=2}let ue=!0;for(let Fe=1,it=0;Fe<pe;Fe++)if(ce[Fe]!==ce[Fe-1]&&(it++,ue=it<3&&(it===1&&ce[Fe]===3||it===2&&ce[Fe]===2),!ue))return 0;if(pe>2&&ue&&(pe===3||!oe)){let Fe=0,it=t.getNextVertexEx(i,s);for(G||(t.setXY(it,B),it=t.getNextVertexEx(it,s));it!==n;){const _t=t.getNextVertexEx(it,s);t.removeVertex(it,!1),it=_t,++Fe}return Fe}if(K(pe!==3),oe&&pe>3)return 0;const se=c.clone();let de=i;const Se=c.clone();let Pe=1,Re=-1,$e=de,we=0;for(pe=1;$e!==n;){$e=t.getNextVertexEx($e,s);const Fe=ce[pe++];if(Fe===0){if($e===n)break;continue}const it=t.getXY($e);if(Re!==-1){if(3&(Re&Pe&Fe)){t.removeVertex(de,!0),we++,de=$e,Se.setCoordsPoint2D(it),Pe=Fe;continue}if(Pe===3&&Re!==0&&Fe!==0){if(Se.setCoordsPoint2D(B),G||Se.equals(se)){t.removeVertex(de,!0),we++,de=$e,Se.setCoordsPoint2D(it),Pe=Fe;continue}t.setXY(de,Se)}}Re=Pe,se.setCoordsPoint2D(Se),de=$e,Pe=Fe,Se.setCoordsPoint2D(it)}return we}function Vlt(t,e,i,n){let s=-1;const r=new Y,o=new Y,l=new Y;for(let c=0,f=t.getPathSize(n),y=t.getFirstVertex(n);c<f;++c){s===-1&&(t.queryXY(y,o),s=t.getPrevVertex(y),s!==-1&&(t.queryXY(s,r),l.setSub(o,r),l.normalize()));const _=t.getNextVertex(y);if(_===-1)break;const x=t.getXY(_),S=x.sub(o);S.normalize(),s!==-1&&S.dotProduct(l)<-.99&&Math.abs(S.crossProduct(l))<1e-7&&t.setUserIndex(y,e,1),s=y,y=_,r.assign(o),o.assign(x),l.assign(S)}}function Glt(t,e,i,n,s,r,o){const l={stack:[],error:void 0,hasError:!1};try{const c=t.getFirstPath(e),f=t.createUserIndex();sc(l,S7(()=>{t.removeUserIndex(f)},!1),!1),Vlt(t,f,e,c);for(let y=0;y<100;++y){if(t.getPathSize(c)===0)return 1;let _=t.getFirstVertex(c),x=t.getPathSize(c);if(x<3)return 1;t.isClosedPath(c)||(x-=1);const S=64;let P=0,A=!1;for(let D=0;D<x&&_!==ae;D++){let N=0,F=_;for(let G=1,V=Math.min(S,x-D);G<V;G++)if(F=t.getNextVertexEx(F,i),G>1){const B=qlt(t,f,_,F,i,s,o,S);if(B===-1)break;N+=B,x-=B}if(P+=N,A=N>0,A){const G=t.getPrevVertexEx(_,i);if(G!==-1){_=G,x++;continue}}_=t.getNextVertexEx(_,i)}if(P===0)break}return t.filterClosePoints(r,!1,!1,!1,-1),1}catch(c){l.error=c,l.hasError=!0}finally{_m(l)}}function jlt(t,e,i,n,s,r,o){return Glt(t,e,i,n,s,r,o)}function MO(t,e,i,n){for(let s=0,r=t.getPathCount();s<r;s++){const o=t.getXY(t.getPathStart(s));o.x!==i.xmin&&o.x!==i.xmax&&e.addPath(t,s,n)}}let Blt=class{getOperatorType(){return 10004}supportsCurves(){return!0}accelerateGeometry(e,i,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,n,s,r){return this.executeManyEx(e,i,n,Number.NaN,96,s,r)}execute(e,i,n,s){Number.isFinite(n)||Je("Invalid distance for buffer operation");const r=new nh([e]),o=[n],l=this.executeMany(r,i,o,!1,s).next();return l||xt("null buffer output"),l}executeManyEx(e,i,n,s,r,o,l){if(n.find(c=>!Number.isFinite(c))!==void 0&&Je("Invalid distance for buffer operation"),o){const c=new Ise(e,i,n,s,r,!1,l);return new C0().executeMany(c,i,l,2)}return new Ise(e,i,n,s,r,!1,l)}};class Ise extends Aa{constructor(e,i,n,s,r,o,l){super(),this.m_currentUnionEnvelope2D=new xe,this.m_index=-1,this.m_dindex=-1,this.m_progressTracker=l,this.m_bufferer=new zlt(l),this.m_inputGeoms=e,this.m_spatialReference=i,this.m_distances=n,this.m_maxDeviation=s,this.m_maxVerticesInFullCircle=r}tock(){return!0}getRank(){return 1}next(){{let e;for(;e=this.m_inputGeoms.next();)return sh(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.m_dindex+1<this.m_distances.length&&this.m_dindex++,this.buffer(e,this.m_distances[this.m_dindex]);return null}}getGeometryID(){return this.m_index}buffer(e,i){return this.m_bufferer.buffer(e,i,this.m_spatialReference,0,0,4,this.m_maxDeviation,this.m_maxVerticesInFullCircle)}}const Hlt=new Blt;function Ult(t,e,i){return Hlt.execute(t,e,i,null)}function Mse(t,e,i={}){const{unit:n}=i,s=$B(t);return n&&(e=a6e(e,n,s)),LB(Ult(PM(t),RB(s),e),s)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const qa={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},Ylt={image:"image"},OT={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},Xlt=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{--calcite-internal-chip-close-icon-color:var(--calcite-color-text-3);color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]):host([kind=brand]) .container,:host([appearance=outline-fill]):host([kind=brand]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-brand))}:host([appearance=outline]):host([kind=inverse]) .container,:host([appearance=outline-fill]):host([kind=inverse]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]) .container,:host([appearance=outline-fill]):host([kind=neutral]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]) .container{background-color:transparent}:host([appearance=outline-fill]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]) .container{border-color:transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=neutral]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{--calcite-internal-chip-close-icon-color:var(--calcite-color-text-3);color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([selected]) .select-icon{opacity:1}:host([scale=s]) .container{--calcite-internal-chip-block-size:1.5rem ;--calcite-internal-chip-container-space-x-end:0.25rem ;--calcite-internal-chip-container-space-x-start:0.25rem ;--calcite-internal-chip-font-size:var(--calcite-font-size--2);--calcite-internal-chip-icon-size:1rem ;--calcite-internal-chip-icon-space:0.25rem ;--calcite-internal-chip-image-size:1.25rem ;--calcite-internal-chip-title-space:0.25rem ;--calcite-internal-close-size:1rem }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end:var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.25rem }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:0.375rem ;--calcite-internal-chip-select-space-x-start:0}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.25rem ;--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.375rem ;--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start:0.375rem }:host([scale=m]) .container{--calcite-internal-chip-block-size:2rem ;--calcite-internal-chip-container-space-x-end:0.375rem ;--calcite-internal-chip-container-space-x-start:0.375rem ;--calcite-internal-chip-font-size:var(--calcite-font-size--1);--calcite-internal-chip-icon-size:1.5rem ;--calcite-internal-chip-icon-space:0.375rem ;--calcite-internal-chip-image-size:1.5rem ;--calcite-internal-chip-title-space:0.375rem ;--calcite-internal-close-size:1.5rem }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end:var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.375rem }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start:0}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.375rem }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end:0.125rem ;--calcite-internal-chip-select-space-x-start:0.125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end:0.25rem }:host([scale=l]) .container{--calcite-internal-chip-block-size:2.75rem ;--calcite-internal-chip-container-space-x-end:0.5rem ;--calcite-internal-chip-container-space-x-start:0.5rem ;--calcite-internal-chip-font-size:var(--calcite-font-size-0);--calcite-internal-chip-icon-size:2rem ;--calcite-internal-chip-icon-space:0.5rem ;--calcite-internal-chip-image-size:2rem ;--calcite-internal-chip-title-space:0.5rem ;--calcite-internal-close-size:2rem }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end:0.25rem ;--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.375rem }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:0.375rem }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.375rem ;--calcite-internal-chip-select-space-x-start:0.5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.5rem ;--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end:0.375rem }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:1}.container.selectable{cursor:pointer}.container:not(.non-interactive):focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:0}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, 1.5rem);inline-size:var(--calcite-internal-chip-image-size, 1.5rem);padding-inline-start:0;padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, 0.375rem)}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity 0.15s ease-in-out, inline-size 0.15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:0.5;color:var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, 1.5rem);inline-size:var(--calcite-internal-chip-icon-size, 1.5rem)}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0px;cursor:pointer;align-items:center;border-radius:50%;border-style:none;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-internal-chip-close-icon-color, var(--calcite-color-text-1))));block-size:var(--calcite-internal-close-size, 1.5rem);inline-size:var(--calcite-internal-close-size, 1.5rem);padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,Wlt=Xlt,Zlt=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteChipClose=Mt(this,"calciteChipClose",6),this.calciteChipSelect=Mt(this,"calciteChipSelect",6),this.calciteInternalChipKeyEvent=Mt(this,"calciteInternalChipKeyEvent",6),this.calciteInternalChipSelect=Mt(this,"calciteInternalChipSelect",6),this.calciteInternalSyncSelectedChips=Mt(this,"calciteInternalSyncSelectedChips",6),this.handleDefaultSlotChange=()=>{this.updateHasText()},this.close=()=>{this.calciteChipClose.emit(),this.selected=!1,this.closed=!0},this.closeButtonKeyDownHandler=e=>{MC(e.key)&&(e.preventDefault(),this.close())},this.handleSlotImageChange=e=>{this.hasImage=yn(e)},this.handleEmittingEvent=()=>{this.interactive&&this.calciteChipSelect.emit()},this.disabled=!1,this.appearance="solid",this.kind="neutral",this.closable=!1,this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.label=void 0,this.value=void 0,this.closed=!1,this.selectionMode="none",this.selected=!1,this.messageOverrides=void 0,this.messages=void 0,this.interactive=!1,this.parentChipGroup=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasText=!1,this.hasImage=!1}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}onMessagesChange(){}effectiveLocaleChange(){Al(this,this.effectiveLocale)}connectedCallback(){Ca(this),kl(this)}componentDidLoad(){Er(this),this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}componentDidRender(){gd(this)}disconnectedCallback(){Pa(this),Dl(this)}async componentWillLoad(){Sr(this),Df()&&(await Ml(this),this.updateHasText())}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&this.closeButtonEl.focus()}async setFocus(){var e,i;await Cr(this),!this.disabled&&this.interactive?(e=this.containerEl)==null||e.focus():!this.disabled&&this.closable&&((i=this.closeButtonEl)==null||i.focus())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return Me("div",{class:qa.imageContainer},Me("slot",{name:Ylt.image,onSlotchange:this.handleSlotImageChange}))}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?OT.checkedMultiple:OT.uncheckedMultiple:this.selected?OT.checkedSingle:void 0;return Me("div",{class:{[qa.selectIcon]:!0,[qa.selectIconActive]:this.selectionMode==="multiple"||this.selected}},e?Me("calcite-icon",{icon:e,scale:Yo(this.scale)}):null)}renderCloseButton(){return Me("button",{"aria-label":this.messages.dismissLabel,class:qa.close,onClick:this.close,onKeyDown:this.closeButtonKeyDownHandler,ref:e=>this.closeButtonEl=e,tabIndex:this.disabled?-1:0},Me("calcite-icon",{icon:OT.close,scale:Yo(this.scale)}))}renderIcon(){return Me("calcite-icon",{class:qa.chipIcon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:Yo(this.scale)})}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,n=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":void 0;return Me(er,{key:"7feca8bad37627baabfc4abd25cf135e1e9f196b"},Me(yd,{key:"af2360b4b768ae8c643d52f4bdb9f5d282504114",disabled:e},Me("div",{key:"8d905c4ab20d271a211282b95ebcb2d305d76cb7","aria-checked":this.selectionMode!=="none"&&this.interactive?xr(this.selected):void 0,"aria-label":this.label,class:{[qa.container]:!0,[qa.textSlotted]:this.hasText,[qa.imageSlotted]:this.hasImage,[qa.selectable]:this.selectionMode!=="none",[qa.multiple]:this.selectionMode==="multiple",[qa.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[qa.selected]:this.selected,[qa.closable]:this.closable,[qa.nonInteractive]:!this.interactive,[qa.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)},onClick:this.handleEmittingEvent,ref:s=>this.containerEl=s,role:n,tabIndex:i?-1:0},this.selectionMode!=="none"&&this.renderSelectionIcon(),this.renderChipImage(),this.icon&&this.renderIcon(),Me("span",{key:"dab6eae3f8330b85ffac4c7fe1b2fcbb53327196",class:qa.title},Me("slot",{key:"72ba5bd0c7a97c30f766da119f419261aab24acb",onSlotchange:this.handleDefaultSlotChange})),this.closable&&this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Wlt}},[1,"calcite-chip",{disabled:[516],appearance:[513],kind:[513],closable:[516],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],label:[1],value:[8],closed:[1540],selectionMode:[1,"selection-mode"],selected:[1540],messageOverrides:[1040],messages:[1040],interactive:[4],parentChipGroup:[16],defaultMessages:[32],effectiveLocale:[32],hasText:[32],hasImage:[32],setFocus:[64]},[[0,"keydown","keyDownHandler"],[0,"click","clickHandler"]],{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function jve(){if(typeof customElements>"u")return;["calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-chip":customElements.get(e)||customElements.define(e,Zlt);break;case"calcite-icon":customElements.get(e)||Pr();break}})}jve();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const AO={slow:14e3,medium:1e4,fast:6e3},$T={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},gu={actionsEnd:"actions-end",close:"close",container:"container",containerActive:"container--active",dismissProgress:"dismiss-progress",icon:"icon",containerEmbedded:"container--embedded",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},Klt=300;class Jlt{constructor(){this.registeredElements=[],this.queueTimeoutId=null}registerElement(e){const{registeredElements:i}=this;if(!i.includes(e)){switch(e.queue){case"immediate":i.unshift(e);break;case"next":i.splice(1,0,e);break;case"last":i.push(e);break}this.updateAlerts()}}unregisterElement(e){const{registeredElements:i}=this,n=i.indexOf(e);n!==-1&&i.splice(n,1),e.active=!1,this.updateAlerts()}updateAlerts(){window.clearTimeout(this.queueTimeoutId),this.queueTimeoutId=null,this.registeredElements.forEach((e,i)=>{e.openAlertCount=this.registeredElements.length,i===0?this.queueTimeoutId=window.setTimeout(()=>e.active=!0,Klt):e.active=!1})}}const Qlt=`:host{--calcite-internal-alert-edge-distance:2rem;display:block;inline-size:var(--calcite-alert-width)}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;text-align:start;opacity:0;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-alert-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));background-color:var(--calcite-alert-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);max-inline-size:calc(100% - var(--calcite-internal-alert-edge-distance) * 2);transition:opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0, var(--calcite-internal-alert-edge-distance), 0);inset-block-end:var(--calcite-internal-alert-edge-distance)}.container[class*=top]{transform:translate3d(0, calc(-1 * var(--calcite-internal-alert-edge-distance)), 0);inset-block-start:var(--calcite-internal-alert-edge-distance)}.container[class*=start]{inset-inline-start:var(--calcite-internal-alert-edge-distance);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-internal-alert-edge-distance);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0px;margin-block:auto;margin-inline-end:auto}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;border-start-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-end-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));outline-color:transparent}.close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:hover,.close:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress::after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-color-transparent-tint);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:0.5rem}:host([scale=s]) .container{--calcite-internal-alert-min-height:3.5rem;inline-size:var(--calcite-alert-width, 40em)}:host([scale=s]) .close{padding:0.75rem}:host([scale=s]) .icon{padding-inline-start:0.75rem}:host([scale=s]) .text-container{padding-block:0.5rem;padding-inline:0.75rem 0.5rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:0.75rem}:host([scale=m]) .container{--calcite-internal-alert-min-height:4.1875rem;inline-size:var(--calcite-alert-width, 50em)}:host([scale=m]) .close{padding:1rem}:host([scale=m]) .icon{padding-inline-start:1rem}:host([scale=m]) .text-container{padding-block:0.75rem;padding-inline:1rem 0.75rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:0.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-internal-alert-min-height:5.625rem;inline-size:var(--calcite-alert-width, 60em)}:host([scale=l]) .close{padding:1.25rem}:host([scale=l]) .icon{padding-inline-start:1.25rem}:host([scale=l]) .text-container{padding-block:1rem;padding-inline:1.25rem 1rem}:host([open]) .container--active{border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container--active[class*=bottom]{transform:translate3d(0, calc(-1 * var(--calcite-internal-alert-edge-distance)), inherit)}:host([open]) .container--active[class*=top]{transform:translate3d(0, var(--calcite-internal-alert-edge-distance), inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0px;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);margin-inline-end:0.5rem;color:var(--calcite-color-text-2)}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6000ms ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10000ms ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14000ms ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress::after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:0.75}100%{inline-size:100%;opacity:1}}.container--embedded{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}`,ect=Qlt,Q_=new Jlt,tct=zi(class extends Fi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteAlertBeforeClose=Mt(this,"calciteAlertBeforeClose",6),this.calciteAlertClose=Mt(this,"calciteAlertClose",6),this.calciteAlertBeforeOpen=Mt(this,"calciteAlertBeforeOpen",6),this.calciteAlertOpen=Mt(this,"calciteAlertOpen",6),this.handleKeyBoardFocus=()=>{this.isFocused=!0,this.handleFocus()},this.handleKeyBoardBlur=()=>{this.isFocused=!1,this.isHovered||this.handleBlur()},this.autoCloseTimeoutId=null,this.totalOpenTime=0,this.totalHoverTime=0,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.closeAlert=()=>{this.open=!1,this.clearAutoCloseTimeout()},this.actionsEndSlotChangeHandler=e=>{this.hasEndActions=yn(e)},this.handleMouseOver=()=>{this.isHovered=!0,this.handleFocus()},this.handleMouseLeave=()=>{this.isHovered=!1,this.isFocused||this.handleBlur()},this.handleFocus=()=>{this.clearAutoCloseTimeout(),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()},this.handleBlur=()=>{const e=Date.now()-this.lastMouseOverBegin,i=AO[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)},this.active=!1,this.openAlertCount=0,this.open=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.embedded=!1,this.kind="brand",this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.numberingSystem=void 0,this.placement="bottom",this.scale="m",this.messages=void 0,this.messageOverrides=void 0,this.queue="last",this.defaultMessages=void 0,this.effectiveLocale="",this.numberStringFormatter=new _re,this.hasEndActions=!1,this.isFocused=!1}handleActiveChange(){this.clearAutoCloseTimeout(),this.active&&this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),AO[this.autoCloseDuration]))}openHandler(){Bu(this),this.open?Q_.registerElement(this.el):Q_.unregisterElement(this.el)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(this.clearAutoCloseTimeout(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),AO[this.autoCloseDuration]))}onMessagesChange(){}handleQueueChange(){this.open&&(Q_.unregisterElement(this.el),Q_.registerElement(this.el))}connectedCallback(){Ca(this),kl(this),this.open&&Q_.registerElement(this.el),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}async componentWillLoad(){Sr(this),await Ml(this),this.open&&Bu(this)}componentDidLoad(){Er(this)}disconnectedCallback(){Q_.unregisterElement(this.el),this.clearAutoCloseTimeout(),Pa(this),Dl(this),this.embedded=!1}render(){const{open:e,autoClose:i,label:n,placement:s,active:r,openAlertCount:o}=this,l=i?"alert":"alertdialog",c=!e,f=FO(JO,this.icon,this.kind),y=o>1;return Me(er,{key:"cecedeaa678e4f6e22fd2aabc4d29bc8589430f6","aria-hidden":xr(c),"aria-label":n,"calcite-hydrated-hidden":c,role:l},Me("div",{key:"ca85d5f5ec313f3a305e01dcc8cbbad9647dd516",class:{[gu.container]:!0,[gu.containerActive]:r,[`${gu.container}--${s}`]:!0,[gu.containerEmbedded]:this.embedded,[gu.focused]:this.isFocused},onPointerEnter:this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null,onPointerLeave:this.autoClose?this.handleMouseLeave:null,ref:this.setTransitionEl},f&&this.renderIcon(f),Me("div",{key:"1f72f255c3e0630eed63bb62d3d50f4a2ba6a528",class:gu.textContainer,onFocusin:this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null},Me("slot",{key:"aade607960adea0a10f5eac85b119444085c9cf9",name:$T.title}),Me("slot",{key:"1f47158cfbf8c0626cd49246142fb750311b1d4a",name:$T.message}),Me("slot",{key:"5ba06e024b517f23168311828cc8ce41c21926a6",name:$T.link})),this.renderActionsEnd(),y?this.renderQueueCount():null,this.renderCloseButton(),e&&r&&i?Me("div",{class:gu.dismissProgress}):null))}renderCloseButton(){return Me("button",{"aria-label":this.messages.close,class:gu.close,key:"close",onClick:this.closeAlert,onFocusin:this.autoClose?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null,ref:e=>this.closeButton=e,type:"button"},Me("calcite-icon",{icon:"x",scale:Yo(this.scale)}))}renderQueueCount(){const{openAlertCount:e}=this,i=e>2?e-1:1,n=this.numberStringFormatter.numberFormatter.format(i);return Me("div",{class:{[gu.queueCount]:!0,[gu.queueCountActive]:e>1},key:"queue-count"},Me("calcite-chip",{scale:this.scale,value:n},n))}renderActionsEnd(){return Me("div",{class:gu.actionsEnd},Me("slot",{name:$T.actionsEnd,onSlotchange:this.actionsEndSlotChangeHandler}))}renderIcon(e){return Me("div",{class:gu.icon},Me("calcite-icon",{flipRtl:this.iconFlipRtl,icon:e,scale:Yo(this.scale)}))}async setFocus(){await Cr(this);const e=kq(this.el,{selector:"calcite-link"});if(!(!this.closeButton&&!e)){if(e)return e.setFocus();this.closeButton&&this.closeButton.focus()}}effectiveLocaleChange(){Al(this,this.effectiveLocale),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}clearAutoCloseTimeout(){window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{active:["handleActiveChange"],open:["openHandler"],autoCloseDuration:["updateDuration"],messageOverrides:["onMessagesChange"],queue:["handleQueueChange"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}}static get style(){return ect}},[1,"calcite-alert",{active:[4],openAlertCount:[2,"open-alert-count"],open:[1540],autoClose:[516,"auto-close"],autoCloseDuration:[513,"auto-close-duration"],embedded:[1028],kind:[513],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],numberingSystem:[513,"numbering-system"],placement:[513],scale:[513],messages:[1040],messageOverrides:[1040],queue:[513],defaultMessages:[32],effectiveLocale:[32],numberStringFormatter:[32],hasEndActions:[32],isFocused:[32],setFocus:[64]},void 0,{active:["handleActiveChange"],open:["openHandler"],autoCloseDuration:["updateDuration"],messageOverrides:["onMessagesChange"],queue:["handleQueueChange"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}]);function ict(){if(typeof customElements>"u")return;["calcite-alert","calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-alert":customElements.get(e)||customElements.define(e,tct);break;case"calcite-chip":customElements.get(e)||jve();break;case"calcite-icon":customElements.get(e)||Pr();break}})}ict();const nct=new z7;function sct(t,e,i){return nct.execute(t,e,i,null)}function rct(t,e){const i=$B(t);return LB(sct(PM(t),PM(e),RB(i)),i)}Hse("https://js.arcgis.com/calcite-components/2.13.2/assets");const oct=gbe.createRoot(document.getElementById("root"));oct.render(vt.jsx(Gh.StrictMode,{children:vt.jsxs("calcite-shell",{children:[vt.jsxs("calcite-navigation",{slot:"header",id:"header",children:[vt.jsx("calcite-navigation-logo",{id:"header-title",slot:"logo",heading:"R-STEP Solar Panel Planning",href:"#",description:"A web toolkit for solar panel planning"}),vt.jsxs("calcite-menu",{slot:"content-end",children:[vt.jsx("calcite-menu-item",{text:"Map","icon-start":"globe"}),vt.jsx("calcite-menu-item",{text:"About","icon-start":"information",id:"about-btn"}),vt.jsx("calcite-menu-item",{text:"GitHub","icon-start":"code",href:"https://github.com/HumblePasty/rstep-siting-tool",target:"_blank",id:"about-btn"})]}),vt.jsxs("calcite-dropdown",{id:"header-dropdown",slot:"content-end",children:[vt.jsx("calcite-navigation-user",{id:"header-user","full-name":"Jane Doe",username:"jane.doe",slot:"trigger"}),vt.jsx("calcite-dropdown-group",{"group-title":"User Settings","selection-mode":"none",children:vt.jsx("calcite-dropdown-item",{onClick:cct,children:"Log out"})})]})]}),vt.jsxs("div",{slot:"footer",id:"footer","justify-content":"center","align-items":"center",children:["Created by  ",vt.jsx("a",{href:"https://5lakesenergy.com/",target:"_blank",children:"5 Lakes Energy LLC"}),"  |   Learn more about the  ",vt.jsx("a",{href:"https://www.energy.gov/eere/renewable-energy-siting-through-technical-engagement-and-planning-r-steptm",target:"_blank",children:"R-STEP Program"}),"  |   Powered by  ",vt.jsx("a",{href:"https://www.esri.com",target:"_blank",children:"Esri"}),"  |   See ",vt.jsx("a",{target:"_self",id:"attributionLink",href:"#",children:"Attribution"}),vt.jsx("calcite-tooltip",{"reference-element":"attributionLink",placement:"top",theme:"dark",id:"attributionTooltip"})]}),vt.jsx("calcite-shell-panel",{position:"start",slot:"panel-start",children:vt.jsxs("calcite-action-bar",{slot:"action-bar",overflowActionsDisabled:!0,expanded:!0,children:[vt.jsxs("calcite-action-group",{label:"Edit",children:[vt.jsx("calcite-action",{text:"Define Solar Array",icon:"polygon",id:"AddAction",onClick:()=>{document.getElementById("my-expand").toggle()}}),vt.jsx("calcite-action",{text:"Add Clipping Features",icon:"crop",id:"CropAction"}),vt.jsx("calcite-popover",{"reference-element":"CropAction",label:"Crop",overlayPositioning:"fixed",autoClose:!0,children:vt.jsxs("calcite-action-pad",{expandDisabled:!0,children:[vt.jsx("calcite-action",{id:"DetectBuildingFootprints",text:"Detect Building Footprints",icon:"footprint",onClick:gct}),vt.jsx("calcite-action",{id:"DetectRoads",text:"Road Segments",icon:"curve"}),vt.jsx("calcite-popover",{"reference-element":"DetectRoads",label:"Roads",autoClose:!0,children:vt.jsxs("calcite-action-bar",{expandDisabled:!0,children:[vt.jsx("calcite-action",{text:"Select by Extent",icon:"extent",onClick:yct}),vt.jsx("calcite-action",{text:"Select by Clicking",icon:"select",onClick:()=>{document.getElementById("ClickRoadsNotice").open=!0}})]})}),vt.jsx("calcite-action",{id:"SelfDefinedPolyline",text:"Self-defined Polyline",icon:"line",onClick:vct}),vt.jsx("calcite-action",{id:"SelfDefinedPolygon",text:"Self-defined Polygon",icon:"polygon",onClick:_ct})]})}),vt.jsx("calcite-action",{id:"EditBufferAction",text:"Create/Edit Buffers",icon:"rings",onClick:bct,children:vt.jsxs("calcite-popover",{id:"EditBufferPopover","reference-element":"EditBufferAction",label:"Buffer",overlayPositioning:"fixed",triggerDisabled:!0,autoClose:!0,children:[vt.jsxs("calcite-label",{alignment:"center",children:["Buffer Distance (US feet)",vt.jsx("calcite-slider",{id:"BufferSlider",min:"0",max:"100",step:"1",value:"0","label-handles":!0,"label-ticks":!0,"min-label":"1","max-label":"100"})]}),vt.jsx("calcite-button",{appearance:"solid",color:"blue",scale:"m",width:"full",onClick:wct,children:"Delete Buffer"})]})}),vt.jsx("calcite-action",{text:"View/Update Clipped Results",icon:"view-visible",onClick:Sct}),vt.jsx("calcite-action",{text:"Toggle Stats Table",icon:"dock-bottom",onClick:()=>{document.querySelector("#bottom-panel").collapsed=!document.querySelector("#bottom-panel").collapsed}}),vt.jsx("calcite-action",{id:"ClearAction",text:"Clear Solar Array",icon:"trash",onClick:pct,disabled:!0})]}),vt.jsxs("calcite-action-group",{children:[vt.jsx("calcite-action",{text:"Upload Layer",icon:"upload",onClick:uct}),vt.jsx("calcite-action",{text:"Edit Layer",icon:"pencil",id:"EditAction"}),vt.jsx("calcite-popover",{"reference-element":"EditAction",label:"Edit",overlayPositioning:"fixed",autoClose:!0,children:vt.jsx("arcgis-editor",{})})]}),vt.jsxs("calcite-action-group",{children:[vt.jsx("calcite-action",{text:"Import from File",icon:"upload",onClick:dct}),vt.jsx("calcite-action",{id:"ExportAction",text:"Export Results",icon:"download",onClick:fct,disabled:!0})]}),vt.jsx("calcite-tooltip",{slot:"expand-tooltip",placement:"right",children:"Toggle Action Bar"})]})}),vt.jsx("calcite-panel",{children:vt.jsxs("arcgis-map",{itemId:"1d9aec5e950f46f9a35a0d399e7e0cf1",center:"-83.74, 42.27",zoom:"15",onarcgisViewReadyChange:act,children:[vt.jsx("arcgis-expand",{position:"top-left",id:"my-expand",children:vt.jsx("arcgis-sketch",{id:"my-sketch",creationMode:"single",onarcgisCreate:mct,expanded:!0})}),vt.jsx("arcgis-placement",{position:"top-right",children:vt.jsxs("calcite-action-pad",{expanded:"false",overlayPositioning:"fixed",id:"map-views-pad",children:[vt.jsx("calcite-action",{text:"Basemap",icon:"basemap",id:"BasemapAction"}),vt.jsx("calcite-popover",{"reference-element":"BasemapAction",label:"Basemap",overlayPositioning:"fixed",autoClose:!0,children:vt.jsx("arcgis-basemap-gallery",{})}),vt.jsx("calcite-action",{text:"Layer List",icon:"layers",id:"LayerListAction"}),vt.jsx("calcite-popover",{"reference-element":"LayerListAction",label:"Layer List",overlayPositioning:"fixed",autoClose:!0,children:vt.jsx("arcgis-layer-list",{dragEnabled:!0})}),vt.jsx("calcite-action",{text:"Legend",icon:"legend",id:"LegendAction"}),vt.jsx("calcite-popover",{"reference-element":"LegendAction",label:"Legend",overlayPositioning:"fixed",autoClose:!0,children:vt.jsx("arcgis-legend",{})}),vt.jsx("calcite-action",{text:"Measure Distance",icon:"measure-line",id:"MeasureDistanceAction"}),vt.jsx("calcite-popover",{"reference-element":"MeasureDistanceAction",label:"Measure Distance",overlayPositioning:"fixed",autoClose:!0,children:vt.jsx("arcgis-distance-measurement-2d",{})}),vt.jsx("calcite-action",{text:"Measure Area",icon:"measure-area",id:"MeasureAreaAction"}),vt.jsx("calcite-popover",{"reference-element":"MeasureAreaAction",label:"Measure Area",overlayPositioning:"fixed",autoClose:!0,children:vt.jsx("arcgis-area-measurement-2d",{})})]})})]})}),vt.jsxs("calcite-shell-panel",{id:"bottom-panel",position:"end",collapsed:!0,children:[vt.jsx("span",{slot:"header-content",children:"Stats Table"}),vt.jsx("div",{children:vt.jsxs("table",{children:[vt.jsx("thead",{children:vt.jsxs("tr",{children:[vt.jsx("th",{children:"Feature"}),vt.jsx("th",{children:"Value"})]})}),vt.jsxs("tbody",{children:[vt.jsxs("tr",{children:[vt.jsx("td",{children:"Feature 1"}),vt.jsx("td",{children:"Value 1"})]}),vt.jsxs("tr",{children:[vt.jsx("td",{children:"Feature 2"}),vt.jsx("td",{children:"Value 2"})]}),vt.jsxs("tr",{children:[vt.jsx("td",{children:"Feature 3"}),vt.jsx("td",{children:"Value 3"})]}),vt.jsxs("tr",{children:[vt.jsx("td",{children:"Feature 4"}),vt.jsx("td",{children:"Value 4"})]})]})]})})]}),vt.jsxs("calcite-dialog",{heading:"About",id:"about-dialog",slot:"dialogs",modal:!0,children:[vt.jsx("calcite-label",{children:"This is a web toolkit for solar panel planning."}),vt.jsxs("ul",{children:[vt.jsx("li",{children:"Start by adding a polygon to the map to represent a solar panel array."}),vt.jsx("li",{children:'Use the "Edit Layers" button to edit the polygon or other layers on the map.'}),vt.jsx("li",{children:"You can also import and export GeoJSON files to save and share your work."}),vt.jsx("li",{children:'Use the "Clear" button to remove all the graphics from the map.'}),vt.jsx("li",{children:"TBD..."})]})]}),vt.jsxs("calcite-alert",{icon:"information",id:"selectRoadsNotice",kind:"info",slot:"alerts",placement:"top",children:[vt.jsx("div",{slot:"title",children:" Select road segments by extent"}),vt.jsx("div",{slot:"message",children:" Drag and draw a rectangle on the map"})]}),vt.jsxs("calcite-alert",{icon:"information",id:"ClickRoadsNotice",kind:"info",slot:"alerts",placement:"top",children:[vt.jsx("div",{slot:"title",children:" Select by Clicking"}),vt.jsxs("div",{slot:"message",children:[" ","Press ",vt.jsx("i",{children:"Control"})," or ",vt.jsx("i",{children:"Shift"})," and click on road segements to make selection"]}),vt.jsx("calcite-action",{scale:"m",icon:"plus",text:"Add to Clipping Features","text-enabled":!0,slot:"actions-end",onClick:lct})]}),vt.jsxs("calcite-alert",{icon:"smile",id:"buffer-alert",scale:"m",autoCloseDuration:"fast",autoClose:!0,slot:"alerts",children:[vt.jsx("div",{slot:"title",children:"Buffer Editing"}),vt.jsxs("div",{slot:"message",children:["Please select a feature from the ",vt.jsx("b",{children:'"Clipping Features"'})," Layer to continue"]}),vt.jsx("calcite-button",{slot:"controls",appearance:"clear",children:"Close"})]}),vt.jsx("calcite-tooltip",{referenceElement:"DetectBuildingFootprints",children:vt.jsx("span",{children:"Select and detect building footprints within an area"})}),vt.jsx("calcite-tooltip",{referenceElement:"DetectRoads",closeOnClick:!0,children:vt.jsx("span",{children:"Select and detect road segments within an area"})}),vt.jsx("calcite-tooltip",{referenceElement:"SelfDefinedPolyline",children:vt.jsx("span",{children:"Create a self-defined polyline"})}),vt.jsx("calcite-tooltip",{referenceElement:"SelfDefinedPolygon",children:vt.jsx("span",{children:"Create a self-defined polygon"})})]})}));function act(t){const e=new Bc;e.authMode="immediate",e.load().then(()=>{document.querySelector("#header-user").fullName=e.user.fullName,document.querySelector("#header-user").username=e.user.username,document.querySelector("#header-user").avatarUrl=e.user.thumbnailUrl});const i=document.getElementById("about-btn"),n=document.getElementById("about-dialog");i.addEventListener("click",()=>{n.open=!0});const s=t.target.map;s.allLayers.forEach(N=>{N.title==="Regrid_Nationwide_Parcel_Boundaries_May24"&&(N.visible=!1),N.title==="Michigan"&&(N.visible=!1),N.title==="Michigan Counties"&&(N.visible=!1)});const r=s.allLayers.find(N=>N.title==="Substations");s.remove(r);const o=document.querySelector("#my-sketch").layer;o.title="Solar Array";const l=new CR({title:"Solar Data",visible:!0,visibilityMode:"independent",layers:[]}),c=s.allLayers.filter(N=>N.title!=="Solar Array"&&N.title!=="World Topographic Map"&&N.title!=="World Hillshade");l.addMany(c),s.add(l);const f=new CR({title:"Clipping Features",visible:!0,visibilityMode:"independent",layers:[]});s.add(f),document.querySelector("#BufferSlider").addEventListener("calciteSliderChange",xct);const _=document.querySelector("arcgis-map").view.ui.find("attribution");_.visible=!1,document.getElementById("attributionTooltip").addEventListener("calciteTooltipBeforeOpen",N=>{document.getElementById("attributionTooltip").innerHTML=_.attributionText});const S=new Pm({title:"Highlights"});s.add(S);let P=!1,A=!1;const D=document.querySelector("arcgis-map").view;D.on("key-down",N=>{N.key==="Control"&&(P=!0),N.key==="Shift"&&(A=!0)}),D.on("key-up",N=>{N.key==="Control"&&(P=!1),N.key==="Shift"&&(A=!1)}),D.on("click",N=>{if(!P&&!A)S.removeAll();else{const F=s.allLayers.find(V=>V.title==="All Roads"),G=D.toMap(N);F.queryFeatures({geometry:G,spatialRelationship:"intersects",distance:5,units:"meters",returnGeometry:!0,returnQueryGeometry:!0,outFields:["*"]}).then(V=>{S.addMany(V.features)})}})}function lct(){const t=document.querySelector("arcgis-map").map.allLayers.find(n=>n.title==="Highlights");t.graphics.length===0&&alert("Please select road segments first");const e=document.querySelector("arcgis-map").map.allLayers.find(n=>n.title==="Clipping Features");if(e.allLayers.find(n=>n.title==="Selected Road Segments")){const n=e.allLayers.find(l=>l.title==="Selected Road Segments");let s=t.graphics.toArray(),r=n.source.length;s.forEach(l=>{r++,l.attributes={id:r,name:`Selected Road Segment ${r}`}});const o={addFeatures:s};n.applyEdits(o)}else{let n=t.graphics.toArray(),s=0;n.forEach(c=>{s++,c.attributes={id:s,name:`Selected Road Segment ${s}`}}),console.log(n);const r={title:"Delete",id:"delete-this",className:"esri-icon-trash"},o=new zx({source:[],fields:[{name:"OBJECTID",alias:"ID",type:"oid"},{name:"name",alias:"Name",type:"string"}],objectIdField:"OBJECTID",title:"Selected Road Segments",geometryType:"polyline",popupTemplate:{actions:[r],title:"{name}",content:"This is a user-selected polyline"}});e.add(o);const l={addFeatures:n};o.applyEdits(l)}const i=document.querySelector("arcgis-map").view;Ju(()=>i.popup,"trigger-action",n=>{if(n.action.id==="delete-this"){const s=i.popup.selectedFeature;s.layer.applyEdits({deleteFeatures:[s]}),i.popup.close()}})}function cct(){tG.destroyCredentials(),window.location.reload()}function uct(){const t="https://www.arcgis.com",e=document.querySelector("arcgis-map").view,i=document.createElement("input");i.type="file",i.accept=".zip",i.onchange=n=>{const s=n.target.files[0],r=new FileReader;r.onload=o=>{const l={name:s.name,targetSR:e.spatialReference,maxRecordCount:1e3,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0},c=e.resolution;l.generalize=!0,l.maxAllowableOffset=c,l.reducePrecision=!0,l.numberOfDigitsAfterDecimal=0;const f=new FormData;f.append("filetype","shapefile"),f.append("publishParameters",JSON.stringify(l)),f.append("f","json"),f.append("file",s),es(t+"/sharing/rest/content/features/generate",{method:"POST",body:f}).then(function(y){if(console.log(y),!y&&y.error){console.error(y.error);return}hct(y.data.featureCollection)})},r.readAsArrayBuffer(s)},i.click()}function hct(t){var e=[];t.layers.forEach(function(n){var s=new zx({objectIdField:"ObjectID"});switch(n.featureSet.geometryType){case"esriGeometryPoint":n.featureSet.features.forEach(function(r){r.geometry=new Yi({x:r.geometry.x,y:r.geometry.y,spatialReference:r.geometry.spatialReference})}),s.renderer={type:"simple",symbol:{type:"simple-marker",size:6,color:"black"}};break;case"esriGeometryPolygon":n.featureSet.features.forEach(function(r){r.geometry=new el({rings:r.geometry.rings,spatialReference:r.geometry.spatialReference})}),s.renderer={type:"simple",symbol:{type:"simple-fill",size:6,color:"black"}};break;case"esriGeometryPolyline":n.featureSet.features.forEach(function(r){r.geometry=new $f({paths:r.geometry.paths,spatialReference:r.geometry.spatialReference})}),s.renderer={type:"simple",symbol:{type:"simple-line",size:6,color:"white"}};break;default:console.log("Not a valid shapefile")}s.source=n.featureSet.features,e.push(s)}),document.querySelector("arcgis-map").map.addMany(e)}function dct(){const t=document.createElement("input");t.type="file",t.accept=".geojson",t.onchange=e=>{const i=e.target.files[0],n=new FileReader;n.onload=s=>{const r=JSON.parse(s.target.result);console.log(r),document.querySelector("#my-sketch").layer.addMany(r.features)},n.readAsText(i)},t.click()}function fct(){const i={type:"FeatureCollection",features:document.querySelector("#my-sketch").layer.graphics.map(o=>o.toJSON())},n=new Blob([JSON.stringify(i)],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download="sketch.geojson",r.click()}function pct(){document.querySelector("#my-sketch").layer.removeAll(),document.querySelector("#ExportAction").disabled=!0,document.querySelector("#ClearAction").disabled=!0}function mct(t){document.querySelector("#my-sketch").layer.graphics.on("after-changes",i=>{document.querySelector("#ExportAction").disabled=i.length===0,document.querySelector("#ClearAction").disabled=i.length===0})}function gct(){const t=document.querySelector("arcgis-map").view,e=new P5({layer:new Pm({title:"Building Footprints"}),view:t,creationMode:"single",updateOnGraphicClick:!0});e.create("polygon"),e.layer.graphics.on("after-add",i=>{i.item})}function yct(){const t=document.querySelector("arcgis-map").view,e=document.querySelector("arcgis-map").map,i=new P5({layer:new Pm({title:"Roads"}),view:t,creationMode:"single",updateOnGraphicClick:!0});document.getElementById("selectRoadsNotice").open=!0,i.create("rectangle"),i.layer.graphics.on("after-add",n=>{document.getElementById("selectRoadsNotice").open=!1;const s=n.item,r=e.allLayers.find(c=>c.title==="All Roads"),o=r.createQuery();o.geometry=s.geometry,o.spatialRelationship="intersects";var l=r.popupTemplate;l.actions=[{id:"delete-this",title:"Delete",className:"esri-icon-trash"}],r.queryFeatures(o).then(c=>{const f=e.allLayers.find(y=>y.title==="Clipping Features");if(f.allLayers.find(y=>y.title==="Selected Roads")){const y=f.allLayers.find(x=>x.title==="Selected Roads"),_={addFeatures:c.features};y.applyEdits(_)}else{const y=new zx({source:c.features,fields:c.fields,objectIdField:"OBJECTID",title:"Selected Roads",geometryType:c.geometryType,renderer:r.renderer,popupTemplate:l});f.add(y)}})}),Ju(()=>t.popup,"trigger-action",n=>{if(n.action.id==="delete-this"){const s=t.popup.selectedFeature;s.layer.applyEdits({deleteFeatures:[s]}),t.popup.close()}})}function vct(){const t=document.querySelector("arcgis-map").view,e=new P5({layer:new Pm,view:t,creationMode:"single",updateOnGraphicClick:!0});e.create("polyline");const i=document.querySelector("arcgis-map").map.allLayers.find(n=>n.title==="Clipping Features");e.layer.graphics.on("after-add",n=>{let s=n.item;if(i.allLayers.find(r=>r.title==="Selected Polyline")){const r=i.allLayers.find(o=>o.title==="Selected Polyline");r.queryFeatureCount().then(o=>{s.attributes={id:o+1,name:`Self Defined Polyline ${o+1}`};const l={addFeatures:[s]};r.applyEdits(l)})}else{s.attributes={id:1,name:"Self Defined Polyline 1"};const r={title:"Delete",id:"delete-this",className:"esri-icon-trash"},o=new zx({source:[s],fields:[{name:"OBJECTID",alias:"ID",type:"oid"},{name:"name",alias:"Name",type:"string"}],objectIdField:"OBJECTID",title:"Selected Polyline",geometryType:s.geometry.type,popupTemplate:{actions:[r],title:"{name}",content:"This is a self-defined polyline"}});i.add(o)}Ju(()=>t.popup,"trigger-action",r=>{if(r.action.id==="delete-this"){const o=t.popup.selectedFeature;o.layer.applyEdits({deleteFeatures:[o]}),t.popup.close()}})})}function _ct(){const t=document.querySelector("arcgis-map").view,e=new P5({layer:new Pm,view:t,creationMode:"single",updateOnGraphicClick:!0});e.create("polygon");const i=document.querySelector("arcgis-map").map.allLayers.find(n=>n.title==="Clipping Features");e.layer.graphics.on("after-add",n=>{let s=n.item;if(i.allLayers.find(r=>r.title==="Selected Polygon")){const r=i.allLayers.find(o=>o.title==="Selected Polygon");r.queryFeatureCount().then(o=>{s.attributes={id:o+1,name:`Self Defined Polygon ${o+1}`};const l={addFeatures:[s]};r.applyEdits(l)})}else{s.attributes={id:1,name:"Self Defined Polygon 1"};const r={title:"Delete",id:"delete-this",className:"esri-icon-trash"},o=new zx({source:[s],fields:[{name:"OBJECTID",alias:"ID",type:"oid"},{name:"name",alias:"Name",type:"string"}],objectIdField:"OBJECTID",title:"Selected Polygon",geometryType:s.geometry.type,popupTemplate:{actions:[r],title:"{name}",content:"This is a self-defined polygon"}});i.add(o)}Ju(()=>t.popup,"trigger-action",r=>{if(r.action.id==="delete-this"){const o=t.popup.selectedFeature;o.layer.applyEdits({deleteFeatures:[o]}),t.popup.close()}})})}function bct(){const t=document.querySelector("#EditBufferPopover");if(t.open){t.open=!1;return}const e=document.querySelector("arcgis-map").view;if(!e.map.allLayers.find(i=>i.title==="Buffers")){const i=new Pm({title:"Buffers"});e.map.add(i)}if(Object.keys(e.popup).length===0||e.popup.visible===!1)document.querySelector("#buffer-alert").open=!0;else{t.open=!0;const i=e.popup.features[0],s=e.map.allLayers.find(r=>r.title==="Buffers").graphics.find(r=>r.attributes.associatedFeatureID===i.attributes.OBJECTID);if(s){const r=document.querySelector("#BufferSlider");r.value=s.attributes.bufferDistance}}}function xct(t){const e=document.querySelector("arcgis-map").view,i=e.popup.features,n=e.map.allLayers.find(l=>l.title==="Buffers");var s=t.target.value;const r=e.popup.features[0],o=n.graphics.find(l=>l.attributes.associatedFeatureID===r.attributes.OBJECTID);if(o){n.remove(o);const l=i.map(c=>{const f=c.geometry.clone(),y={unit:"feet"},_=Mse(f,s,y);return new th({geometry:_,symbol:{type:"simple-fill",color:[0,0,0,.5],outline:{color:[0,0,0,1],width:1}},attributes:{associatedFeatureID:c.attributes.OBJECTID,bufferDistance:s,bufferUnit:y.unit}})});n.addMany(l)}else{const l=i.map(c=>{const f=c.geometry.clone(),y={unit:"feet"},_=Mse(f,s,y);return new th({geometry:_,symbol:{type:"simple-fill",color:[0,0,0,.5],outline:{color:[0,0,0,1],width:1}},attributes:{associatedFeatureID:c.attributes.OBJECTID,bufferDistance:s,bufferUnit:y.unit}})});n.addMany(l)}}function wct(){const t=document.querySelector("arcgis-map").view,e=t.map.allLayers.find(s=>s.title==="Buffers"),i=t.popup.features[0],n=e.graphics.find(s=>s.attributes.associatedFeatureID===i.attributes.OBJECTID);n&&e.remove(n)}function Sct(){const t=document.querySelector("arcgis-map").view,e=t.map.allLayers.find(o=>o.title==="Buffers"),i=t.map.allLayers.find(o=>o.title==="Solar Array");if(!e||!i){alert("Please create buffer and solar array layers first");return}const n=Cse(e.graphics.items.map(o=>o.geometry)),s=Cse(i.graphics.items.map(o=>o.geometry)),r=rct(s,n);if(t.map.allLayers.find(o=>o.title==="Clipped Solar Array")){const o=t.map.allLayers.find(l=>l.title==="Clipped Solar Array");o.removeAll(),o.add(new th({geometry:r,symbol:{type:"simple-fill",color:"blue",outline:{color:[0,0,0,1],width:1}}}))}else{const o=new Pm({title:"Clipped Solar Array"});o.add(new th({geometry:r})),t.map.add(o)}}export{ht as $,Lwe as A,smt as B,XV as C,IIe as D,zt as E,xl as F,Gi as G,OW as H,mwe as I,vd as J,iGe as K,emt as L,qt as M,qM as N,nmt as O,oc as P,ymt as Q,Bc as R,WS as S,wl as T,ZV as U,Nht as V,oV as W,N2 as X,es as Y,ddt as Z,st as _,dRe as a,vpt as a$,Ue as a0,AFe as a1,kFe as a2,DFe as a3,pme as a4,Q0 as a5,St as a6,$t as a7,qhe as a8,Sl as a9,pKe as aA,Y8e as aB,Yr as aC,Co as aD,vHe as aE,l2 as aF,$f as aG,Dhe as aH,lG as aI,khe as aJ,oJ as aK,hgt as aL,qft as aM,opt as aN,apt as aO,RC as aP,jn as aQ,V6 as aR,UF as aS,Po as aT,Jl as aU,Fae as aV,lr as aW,aV as aX,zv as aY,fi as aZ,X4e as a_,cc as aa,Pj as ab,Y0e as ac,Sv as ad,X8e as ae,Xhe as af,lNe as ag,y1t as ah,g1t as ai,Oc as aj,ci as ak,th as al,sft as am,TE as an,qpt as ao,$2 as ap,ea as aq,cv as ar,cd as as,rc as at,uhe as au,x8e as av,w8e as aw,Uhe as ax,X0e as ay,LDe as az,rt as b,n_t as b$,Hu as b0,co as b1,Qo as b2,Ql as b3,_l as b4,YC as b5,mi as b6,TGe as b7,BIe as b8,Fdt as b9,If as bA,xXe as bB,u0e as bC,bm as bD,d7 as bE,ds as bF,Ot as bG,Nke as bH,YE as bI,due as bJ,Ydt as bK,w4 as bL,k0 as bM,Bpt as bN,vv as bO,HOe as bP,e$e as bQ,Wdt as bR,c7e as bS,l7e as bT,a7e as bU,BOe as bV,Fpt as bW,zpt as bX,Sf as bY,Ei as bZ,jee as b_,y6 as ba,VM as bb,IBe as bc,vj as bd,cs as be,kdt as bf,Ndt as bg,Adt as bh,Ddt as bi,Odt as bj,$dt as bk,Qu as bl,Yi as bm,qC as bn,To as bo,kyt as bp,_r as bq,FBe as br,W0 as bs,eh as bt,G6 as bu,oQ as bv,iQ as bw,Uc as bx,Rl as by,_Xe as bz,wf as c,xm as c$,Ia as c0,zx as c1,a0t as c2,c0t as c3,l0t as c4,dqe as c5,hqe as c6,Mx as c7,d9e as c8,eVe as c9,gBe as cA,eV as cB,tV as cC,Uv as cD,$pt as cE,vA as cF,ZM as cG,KM as cH,MV as cI,AV as cJ,K9e as cK,J9e as cL,mn as cM,mV as cN,Un as cO,ZC as cP,pG as cQ,lBe as cR,Vde as cS,afe as cT,CG as cU,iG as cV,dA as cW,h$e as cX,l$e as cY,Ma as cZ,c5 as c_,G0t as ca,qgt as cb,cJ as cc,iE as cd,LL as ce,Qqe as cf,j0t as cg,B0t as ch,ZG as ci,hi as cj,dr as ck,ude as cl,wNe as cm,SNe as cn,mde as co,G_ as cp,BFe as cq,sm as cr,Cdt as cs,l0 as ct,Ui as cu,uGe as cv,udt as cw,Qpt as cx,jh as cy,Li as cz,m5 as d,sl as d$,a$e as d0,Ef as d1,kx as d2,Qde as d3,lm as d4,IE as d5,qs as d6,el as d7,l6 as d8,C$ as d9,mG as dA,QNe as dB,Rme as dC,ldt as dD,H0t as dE,s5 as dF,BT as dG,r5 as dH,spt as dI,Ymt as dJ,fgt as dK,wL as dL,om as dM,V9 as dN,uV as dO,ugt as dP,ept as dQ,Yy as dR,t$ as dS,Koe as dT,W9e as dU,M0t as dV,O0t as dW,yK as dX,N0t as dY,d8e as dZ,o7 as d_,T$ as da,B2 as db,s2 as dc,mGe as dd,gGe as de,aGe as df,zr as dg,tc as dh,lge as di,Ax as dj,rHe as dk,oHe as dl,ic as dm,cyt as dn,oyt as dp,lyt as dq,c$e as dr,_pt as ds,jM as dt,QC as du,OE as dv,o0 as dw,Fc as dx,JNe as dy,WM as dz,mRe as e,h1t as e$,svt as e0,Pn as e1,hd as e2,evt as e3,NUe as e4,Qyt as e5,X0 as e6,ivt as e7,Yc as e8,Zhe as e9,Q$e as eA,Gft as eB,tpt as eC,il as eD,ld as eE,Pm as eF,E6 as eG,Q9 as eH,Ahe as eI,ipt as eJ,EDe as eK,YFe as eL,_pe as eM,Kle as eN,zle as eO,yOe as eP,yG as eQ,UOe as eR,jpt as eS,Fu as eT,Vpt as eU,Dde as eV,uae as eW,cae as eX,Aft as eY,av as eZ,vme as e_,Ko as ea,uE as eb,Gs as ec,Mj as ed,i1 as ee,rvt as ef,Pge as eg,Mge as eh,e9 as ei,ovt as ej,mz as ek,nG as el,avt as em,fvt as en,ZA as eo,td as ep,Z2 as eq,uBe as er,wdt as es,O0 as et,gDe as eu,mBe as ev,g6 as ew,Ss as ex,Rx as ey,Bft as ez,fRe as f,xwe as f$,SJ as f0,wJ as f1,ght as f2,mht as f3,a9e as f4,Yl as f5,wV as f6,t5 as f7,i8e as f8,Lpt as f9,Cr as fA,IC as fB,Al as fC,$v as fD,Ca as fE,kl as fF,Pa as fG,Dl as fH,Rv as fI,Ml as fJ,Sr as fK,Er as fL,gd as fM,Me as fN,kq as fO,Fq as fP,xr as fQ,yd as fR,er as fS,Bq as fT,Fv as fU,Nl as fV,gx as fW,jEe as fX,BEe as fY,Ea as fZ,FO as f_,hK as fa,z2 as fb,u6 as fc,LHe as fd,qHe as fe,j1t as ff,rae as fg,aae as fh,lae as fi,eht as fj,L4e as fk,vht as fl,EV as fm,s9 as fn,r_t as fo,lgt as fp,Zmt as fq,qDe as fr,zc as fs,uht as ft,zi as fu,Fi as fv,Mt as fw,yn as fx,WSe as fy,Bu as fz,Nf as g,cK as g$,Lq as g0,Vxe as g1,eX as g2,Dq as g3,Ict as g4,mre as g5,DS as g6,Mct as g7,Act as g8,Mo as g9,t9 as gA,Io as gB,yHe as gC,YXe as gD,DOe as gE,oA as gF,Rft as gG,vae as gH,adt as gI,pdt as gJ,gee as gK,kft as gL,gF as gM,$ht as gN,lE as gO,$i as gP,s1e as gQ,Ju as gR,ec as gS,Fx as gT,sge as gU,SA as gV,lfe as gW,the as gX,n9e as gY,X$ as gZ,xRe as g_,AM as ga,jxe as gb,Yxe as gc,Mre as gd,Hxe as ge,Gn as gf,Zp as gg,Yo as gh,kre as gi,Zl as gj,Wxe as gk,Df as gl,Y3e as gm,k9 as gn,Zre as go,XO as gp,H3e as gq,B3e as gr,D3e as gs,Y2e as gt,vwe as gu,QWe as gv,K$e as gw,wge as gx,Vyt as gy,bXe as gz,k4e as h,Dht as h$,jb as h0,bA as h1,f1t as h2,Uxe as h3,tm as h4,SEe as h5,Zlt as h6,jve as h7,Xs as h8,yoe as h9,E0t as hA,Ype as hB,PEe as hC,pEe as hD,Ect as hE,RS as hF,KO as hG,poe as hH,moe as hI,Wut as hJ,K_t as hK,XEe as hL,woe as hM,Gv as hN,XC as hO,UT as hP,IN as hQ,yXe as hR,vXe as hS,q0 as hT,o0e as hU,Zv as hV,FC as hW,ryt as hX,rte as hY,Hyt as hZ,jyt as h_,aCe as ha,Hq as hb,bEe as hc,XSe as hd,mm as he,hoe as hf,lwe as hg,Cct as hh,Pct as hi,Fb as hj,Jre as hk,kO as hl,Tre as hm,jq as hn,RM as ho,I2 as hp,Bw as hq,Dct as hr,xdt as hs,Xy as ht,egt as hu,mgt as hv,aze as hw,gm as hx,iqe as hy,ggt as hz,hRe as i,Zje as i$,pUe as i0,D4e as i1,qv as i2,Z4e as i3,rr as i4,xht as i5,D0 as i6,N7e as i7,Tx as i8,Px as i9,Ode as iA,$gt as iB,ypt as iC,XA as iD,ubt as iE,uge as iF,zhe as iG,jC as iH,Tgt as iI,$c as iJ,Qdt as iK,xK as iL,b8e as iM,hGe as iN,lj as iO,fGe as iP,pGe as iQ,FK as iR,lmt as iS,cmt as iT,Qe as iU,F8e as iV,A$e as iW,pA as iX,kgt as iY,gv as iZ,eBe as i_,Rte as ia,Tbt as ib,N0 as ic,sRe as id,uI as ie,Rdt as ig,fdt as ih,GC as ii,JGe as ij,nGe as ik,m1t as il,vGe as im,p1t as io,yGe as ip,ETe as iq,jj as ir,WC as is,HT as it,wR as iu,Gb as iv,QM as iw,rpt as ix,bx as iy,RHe as iz,Pr as j,Gee as j$,CGe as j0,IK as j1,Sde as j2,yBe as j3,p$e as j4,hBe as j5,xG as j6,CN as j7,BA as j8,_R as j9,OUe as jA,Gdt as jB,iZ as jC,Lle as jD,Fle as jE,hr as jF,v_t as jG,Oft as jH,N8e as jI,Yhe as jJ,SUe as jK,fz as jL,Whe as jM,Y9e as jN,pf as jO,jE as jP,dj as jQ,f$e as jR,d$e as jS,Sft as jT,u$e as jU,JA as jV,Gme as jW,BZe as jX,_5 as jY,v5 as jZ,W1t as j_,bG as ja,sVe as jb,GA as jc,o$e as jd,yj as je,tdt as jf,hht as jg,Age as jh,n7 as ji,qUe as jj,RUe as jk,pHe as jl,FUe as jm,_j as jn,Vft as jo,mK as jp,Vme as jq,f9e as jr,U0 as js,Ige as jt,jmt as ju,Gmt as jv,$Le as jw,hA as jx,JUe as jy,Lft as jz,xi as k,mF as k$,Sz as k0,Hv as k1,i7 as k2,fX as k3,MC as k4,_$e as k5,FXe as k6,wGe as k7,Uyt as k8,m$e as k9,NW as kA,U8 as kB,ad as kC,_0 as kD,$y as kE,_9e as kF,GM as kG,am as kH,z9 as kI,qO as kJ,Nct as kK,Exe as kL,Nq as kM,_ht as kN,da as kO,g7e as kP,G6e as kQ,Ege as kR,Az as kS,Iz as kT,Cz as kU,_0e as kV,XE as kW,zN as kX,Jgt as kY,MA as kZ,Zgt as k_,Qa as ka,O7e as kb,Hee as kc,SXe as kd,WYe as ke,Y6 as kf,TXe as kg,z0 as kh,Gyt as ki,ho as kj,Zde as kk,qS as kl,rht as km,bKe as kn,pz as ko,Aj as kp,jo as kq,_Ye as kr,kYe as ks,Rht as kt,Lht as ku,uj as kv,LUe as kw,GUe as kx,jUe as ky,HUe as kz,mmt as l,UGe as l$,PHe as l0,qZe as l1,GZe as l2,j0e as l3,X1t as l4,jZe as l5,VZe as l6,jWe as l7,M_t as l8,wWe as l9,Lme as lA,Zht as lB,DVe as lC,wje as lD,xGe as lE,$Ge as lF,ije as lG,HGe as lH,e6 as lI,ble as lJ,lRe as lK,vpe as lL,fmt as lM,Ime as lN,hV as lO,yb as lP,Pl as lQ,DGe as lR,D1t as lS,oje as lT,aje as lU,Vh as lV,vx as lW,ype as lX,rj as lY,wm as lZ,n0t as l_,Pdt as la,Ble as lb,Bdt as lc,MRe as ld,hae as le,oht as lf,kTe as lg,jc as lh,PUe as li,yUe as lj,_8e as lk,y8e as ll,EKe as lm,Zyt as ln,nHe as lo,SHe as lp,F6 as lq,ZUe as lr,BUe as ls,Em as lt,Sze as lu,Ude as lv,X9e as lw,kV as lx,sHe as ly,oge as lz,fn as m,$6e as m$,WGe as m0,hpe as m1,upe as m2,cpe as m3,r$e as m4,QGe as m5,NGe as m6,OGe as m7,LGe as m8,FGe as m9,V1t as mA,Pft as mB,rhe as mC,zs as mD,t$e as mE,M6 as mF,Xut as mG,P8e as mH,Wj as mI,Q6 as mJ,gbt as mK,Sbt as mL,$ue as mM,EJe as mN,zA as mO,xx as mP,Hc as mQ,GI as mR,zG as mS,Wmt as mT,Umt as mU,gge as mV,XXe as mW,ghe as mX,YV as mY,Jft as mZ,tce as m_,XGe as ma,zGe as mb,qGe as mc,VGe as md,GGe as me,jGe as mf,BGe as mg,qme as mh,nJ as mi,wae as mj,yx as mk,Jde as ml,Xo as mm,d1t as mn,qIe as mo,dvt as mp,lvt as mq,IUe as mr,Yu as ms,TUe as mt,Tge as mu,Nge as mv,hvt as mw,w5 as mx,CYe as my,qx as mz,ac as n,mvt as n$,y_t as n0,O4e as n1,age as n2,QBe as n3,bYe as n4,Ayt as n5,_bt as n6,vbt as n7,Cbt as n8,bbt as n9,sht as nA,R4e as nB,s_t as nC,$te as nD,n1e as nE,_v as nF,H0e as nG,QZe as nH,WZe as nI,eKe as nJ,JZe as nK,cft as nL,Qze as nM,h5 as nN,_gt as nO,ygt as nP,Sge as nQ,y5 as nR,Byt as nS,THe as nT,F1t as nU,L1t as nV,MHe as nW,YA as nX,Pf as nY,Uge as nZ,Vs as n_,xbt as na,Pbt as nb,ybt as nc,MJe as nd,Ebt as ne,bJe as nf,wbt as ng,Ape as nh,pn as ni,FT as nj,D6e as nk,z6e as nl,ece as nm,jdt as nn,Ee as no,Edt as np,Yp as nq,T7e as nr,Kft as ns,Vae as nt,Bht as nu,jht as nv,F7e as nw,LTe as nx,Gae as ny,Uft as nz,O as o,lut as o$,wXe as o0,X6 as o1,t1 as o2,cm as o3,nd as o4,bj as o5,gvt as o6,EXe as o7,MDe as o8,IDe as o9,dX as oA,tut as oB,eut as oC,iut as oD,d3e as oE,Zct as oF,Qct as oG,Jct as oH,G2e as oI,nc as oJ,Abe as oK,s0 as oL,Z2e as oM,ixe as oN,Hr as oO,aut as oP,Xct as oQ,f3e as oR,zO as oS,Hct as oT,Yct as oU,Uct as oV,p3e as oW,uut as oX,rut as oY,sut as oZ,out as o_,Lgt as oa,Fgt as ob,Rgt as oc,IM as od,Eq as oe,kct as of,r9e as og,Vv as oh,lht as oi,cht as oj,aht as ok,Lu as ol,SJe as om,Efe as on,Sfe as oo,n5 as op,I0t as oq,Ihe as or,Tft as os,LC as ot,Nfe as ou,L0e as ov,JG as ow,_3e as ox,UO as oy,A9 as oz,De as p,wle as p$,cut as p0,Wct as p1,nut as p2,Oct as p3,Kct as p4,$ct as p5,Dgt as p6,I6 as p7,_G as p8,_Re as p9,Xb as pA,q8e as pB,bUe as pC,D8e as pD,O8e as pE,RDe as pF,Xp as pG,Gfe as pH,BG as pI,Ox as pJ,tFe as pK,LWe as pL,Ta as pM,Xdt as pN,eze as pO,JFe as pP,QFe as pQ,RTe as pR,rf as pS,pde as pT,L0 as pU,XNe as pV,WNe as pW,EGe as pX,Fje as pY,Qje as pZ,oae as p_,vRe as pa,gRe as pb,oft as pc,aft as pd,QZ as pe,dht as pf,q2 as pg,P6 as ph,wpt as pi,T6 as pj,rmt as pk,mae as pl,IVe as pm,Spt as pn,xLe as po,R6 as pp,Mpt as pq,tje as pr,ayt as ps,Tee as pt,x0 as pu,cBe as pv,Fft as pw,Ff as px,p0e as py,a1e as pz,Y4e as q,Nze as q$,odt as q0,qle as q1,UW as q2,dde as q3,mdt as q4,S1t as q5,ABe as q6,q1t as q7,IHe as q8,H1t as q9,Hmt as qA,Bmt as qB,bV as qC,WXe as qD,W8e as qE,U8e as qF,cHe as qG,H8e as qH,zLe as qI,g_t as qJ,xae as qK,Vu as qL,KG as qM,lLe as qN,DKe as qO,EUe as qP,xKe as qQ,B_ as qR,uYe as qS,JXe as qT,p7 as qU,rRe as qV,Cft as qW,Eft as qX,o5 as qY,a5 as qZ,l5 as q_,lo as qa,zee as qb,B1t as qc,z1t as qd,Jle as qe,Ldt as qf,F0 as qg,cvt as qh,Jht as qi,tKe as qj,Jme as qk,Xme as ql,Bme as qm,Yme as qn,Xgt as qo,lze as qp,zft as qq,zUe as qr,Xu as qs,Wme as qt,Dft as qu,lpt as qv,cdt as qw,VC as qx,Lae as qy,k2 as qz,I as r,rft as r$,Lze as r0,L8e as r1,$8e as r2,R8e as r3,Gx as r4,m7 as r5,xy as r6,mge as r7,an as r8,H_t as r9,OBe as rA,cWe as rB,pWe as rC,gWe as rD,yWe as rE,dz as rF,jme as rG,Kut as rH,A4e as rI,Zut as rJ,Jyt as rK,gYe as rL,Kyt as rM,Qmt as rN,Jmt as rO,UUe as rP,lv as rQ,Vdt as rR,$ft as rS,fK as rT,Xft as rU,Zft as rV,tmt as rW,Jpt as rX,Zpt as rY,b$e as rZ,l_t as r_,Y_t as ra,v0e as rb,c_t as rc,nbt as rd,x5 as re,Cj as rf,Lh as rg,D2 as rh,Tdt as ri,Wgt as rj,eqe as rk,t7 as rl,K1t as rm,U1t as rn,R_t as ro,cV as rp,GKe as rq,jKe as rr,qKe as rs,VKe as rt,v7 as ru,rbt as rv,r9 as rw,sbt as rx,Wyt as ry,NBe as rz,ofe as s,k$ as s$,OA as s0,dDe as s1,Hpt as s2,hLe as s3,Xpt as s4,yDe as s5,Tfe as s6,Wpt as s7,dGe as s8,Sdt as s9,Xyt as sA,d5 as sB,Yft as sC,pgt as sD,xft as sE,C0t as sF,EJ as sG,VBe as sH,$$ as sI,ZZe as sJ,wo as sK,_A as sL,D0t as sM,PJ as sN,SGe as sO,Rpt as sP,kpt as sQ,Npt as sR,Dpt as sS,Opt as sT,El as sU,yW as sV,Apt as sW,TV as sX,PV as sY,A$ as sZ,Zdt as s_,Jpe as sa,Wqe as sb,Igt as sc,Mgt as sd,Agt as se,KFe as sf,NTe as sg,Lx as sh,kG as si,iLe as sj,tLe as sk,gfe as sl,wFe as sm,ope as sn,N6 as so,ffe as sp,sE as sq,T8e as sr,upt as ss,bde as st,rm as su,mv as sv,fOe as sw,Tje as sx,pvt as sy,Y0 as sz,Es as t,wQ as t$,a6 as t0,o6 as t1,Tf as t2,UA as t3,xyt as t4,Mdt as t5,Idt as t6,l6e as t7,uDe as t8,DTe as t9,npt as tA,XJ as tB,hQ as tC,dQ as tD,fQ as tE,jDe as tF,Ift as tG,SDe as tH,pQ as tI,Mft as tJ,u0t as tK,P0t as tL,h0t as tM,vF as tN,S0t as tO,b0t as tP,_0t as tQ,x0t as tR,w0t as tS,MQ as tT,AQ as tU,kQ as tV,v0t as tW,y0t as tX,SQ as tY,LJ as tZ,CQ as t_,pJe as ta,hft as tb,dpt as tc,UE as td,J1t as te,Wle as tf,c6 as tg,c6e as th,PBe as ti,_Ue as tj,NG as tk,Qut as tl,mLe as tm,FE as tn,qE as to,X2 as tp,pLe as tq,N1t as tr,jXe as ts,HJ as tt,qJ as tu,wDe as tv,VJ as tw,vqe as tx,nQ as ty,GJ as tz,pmt as u,i1t as u$,WJ as u0,AJ as u1,MJ as u2,IJ as u3,RJ as u4,jft as u5,m0t as u6,g0t as u7,g6e as u8,m6e as u9,bGe as uA,MGe as uB,qyt as uC,Qft as uD,fhe as uE,Rze as uF,tNe as uG,RBe as uH,Ghe as uI,eNe as uJ,pYe as uK,N$e as uL,XBe as uM,xje as uN,hOe as uO,eOe as uP,AOe as uQ,Tde as uR,uOe as uS,Gpt as uT,bpt as uU,Tpt as uV,Ppt as uW,Ipt as uX,Oue as uY,Nde as uZ,MVe as u_,zdt as ua,tIe as ub,T0t as uc,yF as ud,d0t as ue,Lpe as uf,r0t as ug,p0t as uh,_qe as ui,mqe as uj,f0t as uk,pqe as ul,VA as um,W6 as un,yqe as uo,o0t as up,Ght as uq,hdt as ur,YUe as us,XM as ut,zme as uu,dUe as uv,LIe as uw,y9e as ux,_N as uy,_Ge as uz,lft as v,Uvt as v$,AVe as v0,jOe as v1,sOe as v2,yA as v3,oOe as v4,xpt as v5,aOe as v6,Ept as v7,Cpt as v8,imt as v9,S9e as vA,S7e as vB,Jdt as vC,Oht as vD,JI as vE,gmt as vF,Kpt as vG,Hht as vH,bge as vI,Fp as vJ,xTe as vK,NHe as vL,E$ as vM,WA as vN,nKe as vO,iKe as vP,B0e as vQ,S6e as vR,V_t as vS,Ic as vT,wft as vU,I6e as vV,OXe as vW,bh as vX,phe as vY,mhe as vZ,Yvt as v_,H9 as va,dLe as vb,NA as vc,Hvt as vd,Bvt as ve,Jut as vf,Cde as vg,LXe as vh,e7 as vi,Uht as vj,Bde as vk,f7 as vl,mJe as vm,NJe as vn,QA as vo,s1t as vp,jVe as vq,F0t as vr,L0t as vs,KUe as vt,Vhe as vu,hNe as vv,uNe as vw,wHe as vx,ogt as vy,agt as vz,si as w,Nft as w$,wW as w0,c1t as w1,fUe as w2,W_t as w3,Ul as w4,_ge as w5,Mz as w6,Gu as w7,NXe as w8,Syt as w9,cgt as wA,nyt as wB,Y1t as wC,xFe as wD,iUe as wE,K6 as wF,RWe as wG,R0e as wH,Kht as wI,G4 as wJ,HK as wK,AA as wL,__t as wM,zgt as wN,Wv as wO,fF as wP,nvt as wQ,aHe as wR,igt as wS,M8e as wT,Xmt as wU,s0t as wV,Ub as wW,Nqe as wX,LLe as wY,m_t as wZ,KBe as w_,wyt as wa,eHe as wb,Ki as wc,eWe as wd,Upt as we,fpt as wf,hf as wg,Cpe as wh,u5 as wi,Mpe as wj,W2 as wk,K8e as wl,cNe as wm,hz as wn,Tpe as wo,Oze as wp,iht as wq,dgt as wr,ngt as ws,tgt as wt,fht as wu,Egt as wv,Sgt as ww,nht as wx,Kmt as wy,Hft as wz,uIe as x,umt as x$,qBe as x0,Qme as x1,RLe as x2,tvt as x3,Fht as x4,mpt as x5,gpt as x6,jHe as x7,Nyt as x8,Oyt as x9,z8e as xA,O_t as xB,I_t as xC,N_t as xD,Kgt as xE,D_t as xF,BHe as xG,bs as xH,A_t as xI,k_t as xJ,Sj as xK,G1t as xL,Tz as xM,mWe as xN,xUe as xO,z6 as xP,w0 as xQ,PWe as xR,i0t as xS,$_t as xT,Z8e as xU,Q0e as xV,Sut as xW,Cut as xX,Mut as xY,NCe as xZ,a5e as x_,Dyt as xa,ih as xb,CXe as xc,q6 as xd,Yyt as xe,Ate as xf,nWe as xg,ppt as xh,Wft as xi,wj as xj,Mte as xk,SG as xl,sgt as xm,t0t as xn,DV as xo,vge as xp,Qgt as xq,e0t as xr,$He as xs,syt as xt,Eae as xu,bht as xv,zHe as xw,rgt as xx,EWe as xy,G8e as xz,Jae as y,dmt as y0,ARe as y1,xmt as y2,Smt as y3,Pgt as y4,Ngt as y5,b1t as y6,TBe as y7,Q_t as y8,Dt as z};
