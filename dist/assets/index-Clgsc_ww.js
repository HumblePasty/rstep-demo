const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MapView-BSc05RhZ.js","./ColorBackground-Culo9zv3.js","./Basemap-C55jA_4J.js","./editableLayers-D01jxX5I.js","./catalogUtils-nuN0YsKB.js","./basemapUtils-BtVgAZyh.js","./TileInfo-DE_C4-d4.js","./TileKey-DZd6gJy7.js","./ReactiveMap-BZ7M9Iai.js","./IViewEvents-Bci6PjlS.js","./a11yUtils-DpDdtsvA.js","./heightModelInfoUtils-BJnvTU2F.js","./normalizeUtils-D41z3Sc6.js","./normalizeUtilsCommon-DdoKG547.js","./utils-B95B5uOD.js","./utils-DSCvw780.js","./mat2df32-orApM5a3.js","./vec2f32-BbH2jxlN.js","./unitBezier-BX6NeAEr.js","./Tile-DyPqReij.js","./TileKey-BYE4o8R3.js","./QueueProcessor-DJXUtTsL.js","./quickselect-QQC62dOK.js","./definitions-DyYHcW4a.js","./HighlightDefaults-B3qdZrQW.js","./enums-D9v74xTE.js","./Texture-DyXOhKsV.js","./imageUtils-BGF-PRfx.js","./capabilities-DWNhET5Y.js","./accessibleHandler-CAka6Pgv.js","./GoTo-D0c6IP3K.js","./WebMap-BTswToeq.js","./jsonContext-UU9NgWvx.js","./project-DwGqAOgW.js","./NetworkElement-BPiC3QUA.js","./AreaMeasurement2D-DlguSPI5.js","./defaultUnit-C4QR-iS6.js","./getDefaultUnitForView-BvvWQCb4.js","./unitFormatUtils-qKrk4z41.js","./ByteSizeUnit-BsxeN7wM.js","./SnappingVisualizer2D-dByWdwJ0.js","./SnappingVisualizer-D52P2jDP.js","./PointSnappingHint-CMvkZpLE.js","./MeasurementWidgetContent-REm3eATu.js","./GraphicManipulator-BUoJXYAA.js","./BasemapGallery-Cac4pWCG.js","./Heading-CqRbvl2L.js","./DistanceMeasurement2D-Dq73GI9O.js","./Editor-CpAJJFI2.js","./Spinner-hrp_vFRo.js","./AttachmentInfo-BOWEBAmz.js","./featureUtils-B45JZWi7.js","./utils-VJgik27k.js","./legacyIcon-DkTFV6vi.js","./arcade-CDUjzUwB.js","./TimeOnly-BMcSMz65.js","./ImmutableArray-BPVd6ESQ.js","./symbolUtils-DM3tGsHX.js","./utils-P9W16Y3N.js","./cimSymbolUtils-CZW8-0MT.js","./webStyleSymbolUtils-C929I5M-.js","./devEnvironmentUtils-CnNDiFMM.js","./helpMessageUtils-M95XMmyR.js","./GraphicState-DdYa0ooE.js","./HighlightHelper-Cq44hJyM.js","./infoFor3D-BU6V8avP.js","./uploadAssetErrors-CFV0Yjf4.js","./LayerList-BrcP7niL.js","./actionUtils-C081jlRo.js","./Legend-B6FVYWij.js","./featureReductionUtils-Caulfaw_.js","./EffectView-C4l0-Don.js","./ExportImageParameters-DUNJ9Rvu.js","./scaleUtils-vhtA6JV5.js","./floorFilterUtils-DZ5C6FQv.js","./sublayerUtils-DZ4vcY9z.js","./pixelRangeUtils-Ba7Ehdiw.js","./rendererConversion-D1ZBydiM.js","./heatmapRampUtils-CNPCdkUt.js","./Search-CrFmIZSz.js","./geometryUtils-x_fYDZYh.js","./commonProperties-DHiB1uzW.js","./ElevationLayer-CC9E0pMl.js","./ArcGISCachedService-Bx2rW690.js","./TileInfoTilemapCache-TBnVHHJF.js","./TilemapCache-B7b0R5zz.js","./WorkerHandle-BnPEbYPO.js","./calcite-input-DlolSDaM.js","./input2-D9D5GWcd.js","./Validation-DnvXNBEF.js","./input-j1u1wOBY.js","./input-message-DbcDa3zy.js","./progress-BCGtgckQ.js","./portalLayers-VmjrFVzU.js","./associatedFeatureServiceUtils-BrjQnUNq.js","./fetchService-CMshxJZU.js","./arcgisLayers-R2cVuN0W.js","./WhereClause-D3zSqwA2.js","./arcadeUtils-BQzL2OZn.js","./languageUtils-D77r9NDN.js","./shared-HRNoc8yR.js","./number-B-CbZEul.js","./featureConversionUtils-DN0wCCRp.js","./OptimizedFeature-6cJ-QFG5.js","./OptimizedGeometry-BF8iz5FO.js","./OptimizedFeatureSet-Blu9Ckm7.js","./layersLoader-CF3RN3iu.js","./layersCreator-CmGOc9rc.js","./BingMapsLayer-D1ZVB56g.js","./imageBitmapUtils-B8eqYxYU.js","./BuildingSceneLayer-BPsZIrm5.js","./capabilities-D6exRNM4.js","./SceneService-BCFdbrQ_.js","./originUtils-D69mHv66.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./resourceUtils-CzJLo-lz.js","./resourceUtils-ClY7AIy5.js","./I3SLayerDefinitions-zxvuSPba.js","./I3SUtil-DQTfgaTt.js","./I3SBinaryReader-DsfISncu.js","./VertexAttribute-Cq4MnHjR.js","./edgeUtils-C8v8iEnX.js","./floatRGBA-FgAAfO18.js","./symbolColorUtils-BmlQwOEv.js","./interfaces-DDtDqZYj.js","./NormalAttribute.glsl-CDM2-mOG.js","./BindType-BmZEZMMh.js","./orientedBoundingBox-DXMr3UZd.js","./spatialReferenceEllipsoidUtils-YYGMbrLg.js","./computeTranslationToOriginAndRotation-DRnFiqrY.js","./popupUtils-ByFQ3h80.js","./CSVLayer-Bd5_wBOo.js","./clientSideDefaults-COAc4aBn.js","./QueryEngineCapabilities-DjYb9CEb.js","./CatalogLayer-CifazpIT.js","./utils-C6o3T9Lm.js","./ClassBreaksDefinition-B6Pxu--G.js","./FeatureLayerSource-B2bX4Byd.js","./External-BLnxRuKw.js","./MeshTransform-BhH_5INn.js","./axisAngleDegrees-B8AlkqCT.js","./editingSupport-TNPxOXe0.js","./QueryTask-WQhLgtBc.js","./executeForIds-D6aQ7gfB.js","./query-B-QKxfNP.js","./pbfQueryUtils-BgzNCk30.js","./pbf-CA9_wU3D.js","./executeQueryJSON-gfS2xWMa.js","./DimensionLayer-CvBKyZaf.js","./Analysis-BjZnvIQH.js","./GeoJSONLayer-CWnc-b7k.js","./ImageryLayer-D03DtarC.js","./RasterPresetRendererMixin-D-rWkmNf.js","./multidimensionalUtils-DR2Zd16h.js","./dataUtils-1qn2YuKF.js","./RasterSymbolizer-CrgZQjn_.js","./ImageryTileLayer-BElNnhiG.js","./RawBlockCache-DpvRU_jI.js","./rasterProjectionHelper-CJ7L_Vwa.js","./GCSShiftTransform-DORuacnb.js","./IntegratedMeshLayer-hiXxa7XY.js","./persistable-CLt_dMCX.js","./resourceExtension-CUjAQzCe.js","./KMLLayer-HPnp3dDk.js","./kmlUtils-Cx8QWCmM.js","./KnowledgeGraphLayer-DUh2dHYo.js","./KnowledgeGraphSublayer-gNcjEyp6.js","./knowledgeGraphService-DFYbJjOd.js","./GraphQueryStreaming-BNjGheS7.js","./FeatureStore-Ba1VG3gP.js","./BoundsStore-BOQg-dHL.js","./PooledRBush-DK2RVfCo.js","./timeSupport-CFjVINbV.js","./queryUtils-f-kYRL3m.js","./json-Wa8cmqdu.js","./optimizedFeatureQueryEngineAdapter-BOPMFOve.js","./centroid-DdLmOD72.js","./QueryEngine-DHtZcs3t.js","./utils-BxOIX3fw.js","./SnappingCandidate-DGkpYqI6.js","./LineOfSightLayer-B8UDChz4.js","./featureReferenceUtils-CcSaTBCY.js","./IntersectorInterfaces-CmNINbyF.js","./boundedPlane-CUhRft6X.js","./lineSegment-2jd0N7jc.js","./LinkChartLayer-CoA66rFx.js","./MapImageLayer-CrXTp5cR.js","./SublayersOwner-Cd2d_Ihu.js","./MapNotesLayer-Bn6EtVXP.js","./objectIdUtils-4dd1rf9p.js","./MediaLayer-CWMTJucT.js","./MediaElementView-DhoiF5lX.js","./normalizeUtilsSync-KBg0O4k-.js","./OGCFeatureLayer-D5gXkoKF.js","./ogcFeatureUtils-CzUMfGkd.js","./geojson-BgSbGnD_.js","./date-Ctp1FiBW.js","./sourceUtils-CrAivCbl.js","./OpenStreetMapLayer-otztBLHj.js","./WebTileLayer-zpVxixRH.js","./PointCloudLayer-CwHAplTx.js","./PointCloudUniqueValueRenderer-BW732-4r.js","./RouteLayer-AJe6NCQG.js","./Stop-BhQCNxRf.js","./SceneLayer-BVqiSqn5.js","./Mesh-C7xLYrvG.js","./MeshComponent-B6zlUhF2.js","./meshProperties-C4iW0Ukm.js","./MeshVertexAttributes-bz6lSTa4.js","./triangulationUtils-CXdsSOvD.js","./earcut-D9gy186-.js","./Indices-BFYPqnts.js","./deduplicate-CO0OrlGz.js","./vertexSpaceConversion-BSe8FmEy.js","./vec3-CdDgk9pU.js","./BufferView-Zyvo5bA0.js","./vec4-bQiYVhvO.js","./meshSpatialReferenceScaleUtils-BrGvzt9T.js","./SubtypeGroupLayer-qXSj14QC.js","./TileLayer-CdakavAT.js","./VectorTileLayer-Bep2KqNV.js","./StyleRepository-CvmpVH90.js","./StyleDefinition-DaF-Cgaa.js","./enums-BRzLM11V.js","./GeometryUtils-CzwzzK-1.js","./VertexElementDescriptor-BLyltQyJ.js","./VideoLayer-B2uV4L3K.js","./TelemetryDisplay-YSOsRwf8.js","./ViewshedLayer-D-I9LYEY.js","./VoxelLayer-CiuLHZ0g.js","./WFSLayer-CjLQOS3b.js","./wfsUtils-MKNiewV4.js","./xmlUtils-CtUoQO7q.js","./WMSLayer-D1ceYcS5.js","./crsUtils-DAndLU68.js","./ExportWMSImageParameters-DE4ySNMn.js","./WMTSLayer-Bj2euaAH.js","./groupLayerUtils-CuWq_5sC.js","./utils-CPspjwi_.js","./geometryEngineJSON-Dp-J5E7L.js","./statsWorker-fscfM4Zt.js","./geometryEngineWorker-DFvTNbFu.js","./CSVSourceWorker-BE1sebae.js","./EdgeProcessingWorker-uxNiVkfV.js","./workerHelper-BvCvtyWU.js","./InterleavedLayout-BeokYnK1.js","./types-D0PSWh4d.js","./Util-DVZ-cjJ5.js","./edgeProcessing-BGIpUjwv.js","./glUtil-CAJRmga-.js","./Normals-CgHYCf0b.js","./ElevationSamplerWorker-Dnh6sYN7.js","./FeatureServiceSnappingSourceWorker-DqxQ-ULv.js","./symbologySnappingCandidates-568jBkr7.js","./GeoJSONSourceWorker-DkSGw66h.js","./MemorySourceWorker-Dl12IaOP.js","./PBFDecoderWorker-CHQBiiHI.js","./dehydratedFeatures-DIB9-qIZ.js","./FeaturePipelineWorker-DLD62dQS.js","./AttributeStore-q8SKcJ8X.js","./LabelMetric-DpBQcGA5.js","./Program-CbpDqC-1.js","./BufferObject-BG_LvDvc.js","./BoundingBox-CnpCxTZE.js","./CIMSymbolHelper-CVqtVK_G.js","./BidiEngine-QXap_35O.js","./fontUtils-CrrHZX7Y.js","./Rect-CUzevAry.js","./UpdateTracking2D-D0boKsjm.js","./MeshWriterRegistry-CNqMY3fd.js","./PieChartMeshWriter-ToFdeGUT.js","./TurboLine-CDhm5t-Q.js","./constants-F8oTIn7N.js","./grouping-DzPQniCG.js","./CircularArray-CujHzHWW.js","./createConnection-CO-2zgd4.js","./PointCloudWorker-Bli3fJug.js","./vec3f32-nZdmKIgz.js","./RasterWorker-DxE6saLV.js","./SceneLayerSnappingSourceWorker-aCkoOKlg.js","./Octree-DTj4gmJJ.js","./SceneLayerWorker-C2q9SuZP.js","./WFSSourceWorker-Cc4A2FVg.js","./WorkerTileHandler-DRbuujM6.js","./config-BOD8--da.js","./SourceLayerData-BIjBsD_X.js","./Feature3DPipelineWorker-BgFe6z5s.js","./LodRenderer-CBGEa3ic.js","./Texture-4e6cAAqR.js","./renderState-5U5mGt-0.js","./basicInterfaces-CZwQPxTp.js","./triangle-BRgFuFVo.js","./requestImageUtils-f0SqAR0_.js","./HUDMaterial.glsl-BGNSfVVp.js","./VertexArrayObject-Be6iuBkl.js","./utils-BXs9ugaN.js","./doublePrecisionUtils-B0owpBza.js","./NestedMap-GuqgquCN.js","./DefaultMaterial-Btp6XNYm.js","./RealisticTree.glsl-Jv7NawI6.js","./deleteForwardEdits-DPj_AvSp.js","./featureLayerUtils-D1ndVB9w.js","./BinsQuery-C5-6Ggx8.js","./SelfSnappingEngine-DvMe9m_r.js","./geodesicLengthMeasurementUtils-DdAbmudQ.js","./GridSnappingEngine-CfeGPTJ9.js","./gridUtils-BI6LiNtB.js","./FeatureSnappingEngine-CZInL-3_.js","./editingTools-8segTewq.js","./editPlaneUtils-DX_t6qYR.js","./automaticLengthMeasurementUtils-Dj6W7oxz.js","./helpMessageUtils3d-BJgf3qy9.js","./automaticAreaMeasurementUtils-C5QLWCLz.js","./drawUtils-CLCPhBLF.js","./ImageMaterial.glsl-C2x-QWsc.js","./TextOverlayItem-MMTrY3Il.js","./RibbonLine.glsl-sbr73Shz.js","./DefaultLayouts-DZA43jpm.js","./SelectedVertexTooltipInfo-D56TgEs7.js","./TranslateTooltipInfo-DrrdYdoW.js","./ExtentScaleTooltipInfo-_7xO1gg0.js","./LineCallout.glsl-CFI9yhMe.js","./highlightUtils-CSOjnfBK.js","./geometryServiceUtils-n1_mIjRb.js","./LayerView-CwzjKKP6.js","./GraphicMover-DuenV4MN.js","./Box-rJGa6Ea7.js","./settings-C0UyA3Pw.js","./Reshape-BC4CPwFa.js","./calcite-block-DggrRWOL.js","./handle-Cdv9FYLM.js","./calcite-radio-button-group-D_O_wGif.js","./calcite-list-CfHydLti.js","./resources4-F8vB_VGv.js","./utils3-CTeQWEsB.js","./filter-BpxB3UxJ.js","./calcite-list-item-DL1xKK9f.js","./GridControls-B9_ktwNn.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();var _8={exports:{}},Cw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kU;function o_e(){if(kU)return Cw;kU=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,n,r){var o=null;if(r!==void 0&&(o=""+r),n.key!==void 0&&(o=""+n.key),"key"in n){r={};for(var l in n)l!=="key"&&(r[l]=n[l])}else r=n;return n=r.ref,{$$typeof:t,type:s,key:o,ref:n!==void 0?n:null,props:r}}return Cw.Fragment=e,Cw.jsx=i,Cw.jsxs=i,Cw}var NU;function a_e(){return NU||(NU=1,_8.exports=o_e()),_8.exports}var Yt=a_e(),b8={exports:{}},Xi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $U;function l_e(){if($U)return Xi;$U=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function x(we){return we===null||typeof we!="object"?null:(we=_&&we[_]||we["@@iterator"],typeof we=="function"?we:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,A={};function k(we,Fe,it){this.props=we,this.context=Fe,this.refs=A,this.updater=it||S}k.prototype.isReactComponent={},k.prototype.setState=function(we,Fe){if(typeof we!="object"&&typeof we!="function"&&we!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,we,Fe,"setState")},k.prototype.forceUpdate=function(we){this.updater.enqueueForceUpdate(this,we,"forceUpdate")};function $(){}$.prototype=k.prototype;function F(we,Fe,it){this.props=we,this.context=Fe,this.refs=A,this.updater=it||S}var G=F.prototype=new $;G.constructor=F,P(G,k.prototype),G.isPureReactComponent=!0;var V=Array.isArray,B={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function J(we,Fe,it,vt,ot,ct){return it=ct.ref,{$$typeof:t,type:we,key:Fe,ref:it!==void 0?it:null,props:ct}}function re(we,Fe){return J(we.type,Fe,void 0,void 0,void 0,we.props)}function se(we){return typeof we=="object"&&we!==null&&we.$$typeof===t}function oe(we){var Fe={"=":"=0",":":"=2"};return"$"+we.replace(/[=:]/g,function(it){return Fe[it]})}var pe=/\/+/g;function ue(we,Fe){return typeof we=="object"&&we!==null&&we.key!=null?oe(""+we.key):Fe.toString(36)}function ce(){}function ne(we){switch(we.status){case"fulfilled":return we.value;case"rejected":throw we.reason;default:switch(typeof we.status=="string"?we.then(ce,ce):(we.status="pending",we.then(function(Fe){we.status==="pending"&&(we.status="fulfilled",we.value=Fe)},function(Fe){we.status==="pending"&&(we.status="rejected",we.reason=Fe)})),we.status){case"fulfilled":return we.value;case"rejected":throw we.reason}}throw we}function de(we,Fe,it,vt,ot){var ct=typeof we;(ct==="undefined"||ct==="boolean")&&(we=null);var Ct=!1;if(we===null)Ct=!0;else switch(ct){case"bigint":case"string":case"number":Ct=!0;break;case"object":switch(we.$$typeof){case t:case e:Ct=!0;break;case y:return Ct=we._init,de(Ct(we._payload),Fe,it,vt,ot)}}if(Ct)return ot=ot(we),Ct=vt===""?"."+ue(we,0):vt,V(ot)?(it="",Ct!=null&&(it=Ct.replace(pe,"$&/")+"/"),de(ot,Fe,it,"",function(Dt){return Dt})):ot!=null&&(se(ot)&&(ot=re(ot,it+(ot.key==null||we&&we.key===ot.key?"":(""+ot.key).replace(pe,"$&/")+"/")+Ct)),Fe.push(ot)),1;Ct=0;var qt=vt===""?".":vt+":";if(V(we))for(var Lt=0;Lt<we.length;Lt++)vt=we[Lt],ct=qt+ue(vt,Lt),Ct+=de(vt,Fe,it,ct,ot);else if(Lt=x(we),typeof Lt=="function")for(we=Lt.call(we),Lt=0;!(vt=we.next()).done;)vt=vt.value,ct=qt+ue(vt,Lt++),Ct+=de(vt,Fe,it,ct,ot);else if(ct==="object"){if(typeof we.then=="function")return de(ne(we),Fe,it,vt,ot);throw Fe=String(we),Error("Objects are not valid as a React child (found: "+(Fe==="[object Object]"?"object with keys {"+Object.keys(we).join(", ")+"}":Fe)+"). If you meant to render a collection of children, use an array instead.")}return Ct}function Se(we,Fe,it){if(we==null)return we;var vt=[],ot=0;return de(we,vt,"","",function(ct){return Fe.call(it,ct,ot++)}),vt}function Pe(we){if(we._status===-1){var Fe=we._result;Fe=Fe(),Fe.then(function(it){(we._status===0||we._status===-1)&&(we._status=1,we._result=it)},function(it){(we._status===0||we._status===-1)&&(we._status=2,we._result=it)}),we._status===-1&&(we._status=0,we._result=Fe)}if(we._status===1)return we._result.default;throw we._result}var Re=typeof reportError=="function"?reportError:function(we){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof we=="object"&&we!==null&&typeof we.message=="string"?String(we.message):String(we),error:we});if(!window.dispatchEvent(Fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",we);return}console.error(we)};function Oe(){}return Xi.Children={map:Se,forEach:function(we,Fe,it){Se(we,function(){Fe.apply(this,arguments)},it)},count:function(we){var Fe=0;return Se(we,function(){Fe++}),Fe},toArray:function(we){return Se(we,function(Fe){return Fe})||[]},only:function(we){if(!se(we))throw Error("React.Children.only expected to receive a single React element child.");return we}},Xi.Component=k,Xi.Fragment=i,Xi.Profiler=n,Xi.PureComponent=F,Xi.StrictMode=s,Xi.Suspense=c,Xi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Xi.act=function(){throw Error("act(...) is not supported in production builds of React.")},Xi.cache=function(we){return function(){return we.apply(null,arguments)}},Xi.cloneElement=function(we,Fe,it){if(we==null)throw Error("The argument must be a React element, but you passed "+we+".");var vt=P({},we.props),ot=we.key,ct=void 0;if(Fe!=null)for(Ct in Fe.ref!==void 0&&(ct=void 0),Fe.key!==void 0&&(ot=""+Fe.key),Fe)!W.call(Fe,Ct)||Ct==="key"||Ct==="__self"||Ct==="__source"||Ct==="ref"&&Fe.ref===void 0||(vt[Ct]=Fe[Ct]);var Ct=arguments.length-2;if(Ct===1)vt.children=it;else if(1<Ct){for(var qt=Array(Ct),Lt=0;Lt<Ct;Lt++)qt[Lt]=arguments[Lt+2];vt.children=qt}return J(we.type,ot,void 0,void 0,ct,vt)},Xi.createContext=function(we){return we={$$typeof:o,_currentValue:we,_currentValue2:we,_threadCount:0,Provider:null,Consumer:null},we.Provider=we,we.Consumer={$$typeof:r,_context:we},we},Xi.createElement=function(we,Fe,it){var vt,ot={},ct=null;if(Fe!=null)for(vt in Fe.key!==void 0&&(ct=""+Fe.key),Fe)W.call(Fe,vt)&&vt!=="key"&&vt!=="__self"&&vt!=="__source"&&(ot[vt]=Fe[vt]);var Ct=arguments.length-2;if(Ct===1)ot.children=it;else if(1<Ct){for(var qt=Array(Ct),Lt=0;Lt<Ct;Lt++)qt[Lt]=arguments[Lt+2];ot.children=qt}if(we&&we.defaultProps)for(vt in Ct=we.defaultProps,Ct)ot[vt]===void 0&&(ot[vt]=Ct[vt]);return J(we,ct,void 0,void 0,null,ot)},Xi.createRef=function(){return{current:null}},Xi.forwardRef=function(we){return{$$typeof:l,render:we}},Xi.isValidElement=se,Xi.lazy=function(we){return{$$typeof:y,_payload:{_status:-1,_result:we},_init:Pe}},Xi.memo=function(we,Fe){return{$$typeof:f,type:we,compare:Fe===void 0?null:Fe}},Xi.startTransition=function(we){var Fe=B.T,it={};B.T=it;try{var vt=we(),ot=B.S;ot!==null&&ot(it,vt),typeof vt=="object"&&vt!==null&&typeof vt.then=="function"&&vt.then(Oe,Re)}catch(ct){Re(ct)}finally{B.T=Fe}},Xi.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Xi.use=function(we){return B.H.use(we)},Xi.useActionState=function(we,Fe,it){return B.H.useActionState(we,Fe,it)},Xi.useCallback=function(we,Fe){return B.H.useCallback(we,Fe)},Xi.useContext=function(we){return B.H.useContext(we)},Xi.useDebugValue=function(){},Xi.useDeferredValue=function(we,Fe){return B.H.useDeferredValue(we,Fe)},Xi.useEffect=function(we,Fe){return B.H.useEffect(we,Fe)},Xi.useId=function(){return B.H.useId()},Xi.useImperativeHandle=function(we,Fe,it){return B.H.useImperativeHandle(we,Fe,it)},Xi.useInsertionEffect=function(we,Fe){return B.H.useInsertionEffect(we,Fe)},Xi.useLayoutEffect=function(we,Fe){return B.H.useLayoutEffect(we,Fe)},Xi.useMemo=function(we,Fe){return B.H.useMemo(we,Fe)},Xi.useOptimistic=function(we,Fe){return B.H.useOptimistic(we,Fe)},Xi.useReducer=function(we,Fe,it){return B.H.useReducer(we,Fe,it)},Xi.useRef=function(we){return B.H.useRef(we)},Xi.useState=function(we){return B.H.useState(we)},Xi.useSyncExternalStore=function(we,Fe,it){return B.H.useSyncExternalStore(we,Fe,it)},Xi.useTransition=function(){return B.H.useTransition()},Xi.version="19.0.0",Xi}var OU;function qz(){return OU||(OU=1,b8.exports=l_e()),b8.exports}var u_e=qz(),x8={exports:{}},Pw={},w8={exports:{}},S8={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RU;function c_e(){return RU||(RU=1,function(t){function e(Se,Pe){var Re=Se.length;Se.push(Pe);e:for(;0<Re;){var Oe=Re-1>>>1,we=Se[Oe];if(0<n(we,Pe))Se[Oe]=Pe,Se[Re]=we,Re=Oe;else break e}}function i(Se){return Se.length===0?null:Se[0]}function s(Se){if(Se.length===0)return null;var Pe=Se[0],Re=Se.pop();if(Re!==Pe){Se[0]=Re;e:for(var Oe=0,we=Se.length,Fe=we>>>1;Oe<Fe;){var it=2*(Oe+1)-1,vt=Se[it],ot=it+1,ct=Se[ot];if(0>n(vt,Re))ot<we&&0>n(ct,vt)?(Se[Oe]=ct,Se[ot]=Re,Oe=ot):(Se[Oe]=vt,Se[it]=Re,Oe=it);else if(ot<we&&0>n(ct,Re))Se[Oe]=ct,Se[ot]=Re,Oe=ot;else break e}}return Pe}function n(Se,Pe){var Re=Se.sortIndex-Pe.sortIndex;return Re!==0?Re:Se.id-Pe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],f=[],y=1,_=null,x=3,S=!1,P=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function G(Se){for(var Pe=i(f);Pe!==null;){if(Pe.callback===null)s(f);else if(Pe.startTime<=Se)s(f),Pe.sortIndex=Pe.expirationTime,e(c,Pe);else break;Pe=i(f)}}function V(Se){if(A=!1,G(Se),!P)if(i(c)!==null)P=!0,ne();else{var Pe=i(f);Pe!==null&&de(V,Pe.startTime-Se)}}var B=!1,W=-1,J=5,re=-1;function se(){return!(t.unstable_now()-re<J)}function oe(){if(B){var Se=t.unstable_now();re=Se;var Pe=!0;try{e:{P=!1,A&&(A=!1,$(W),W=-1),S=!0;var Re=x;try{t:{for(G(Se),_=i(c);_!==null&&!(_.expirationTime>Se&&se());){var Oe=_.callback;if(typeof Oe=="function"){_.callback=null,x=_.priorityLevel;var we=Oe(_.expirationTime<=Se);if(Se=t.unstable_now(),typeof we=="function"){_.callback=we,G(Se),Pe=!0;break t}_===i(c)&&s(c),G(Se)}else s(c);_=i(c)}if(_!==null)Pe=!0;else{var Fe=i(f);Fe!==null&&de(V,Fe.startTime-Se),Pe=!1}}break e}finally{_=null,x=Re,S=!1}Pe=void 0}}finally{Pe?pe():B=!1}}}var pe;if(typeof F=="function")pe=function(){F(oe)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,ce=ue.port2;ue.port1.onmessage=oe,pe=function(){ce.postMessage(null)}}else pe=function(){k(oe,0)};function ne(){B||(B=!0,pe())}function de(Se,Pe){W=k(function(){Se(t.unstable_now())},Pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Se){Se.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,ne())},t.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Se?Math.floor(1e3/Se):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(Se){switch(x){case 1:case 2:case 3:var Pe=3;break;default:Pe=x}var Re=x;x=Pe;try{return Se()}finally{x=Re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Se,Pe){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var Re=x;x=Se;try{return Pe()}finally{x=Re}},t.unstable_scheduleCallback=function(Se,Pe,Re){var Oe=t.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?Oe+Re:Oe):Re=Oe,Se){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Re+we,Se={id:y++,callback:Pe,priorityLevel:Se,startTime:Re,expirationTime:we,sortIndex:-1},Re>Oe?(Se.sortIndex=Re,e(f,Se),i(c)===null&&Se===i(f)&&(A?($(W),W=-1):A=!0,de(V,Re-Oe))):(Se.sortIndex=we,e(c,Se),P||S||(P=!0,ne())),Se},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(Se){var Pe=x;return function(){var Re=x;x=Pe;try{return Se.apply(this,arguments)}finally{x=Re}}}}(S8)),S8}var LU;function h_e(){return LU||(LU=1,w8.exports=c_e()),w8.exports}var E8={exports:{}},Ma={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FU;function d_e(){if(FU)return Ma;FU=1;var t=qz();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function r(c,f,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:_==null?null:""+_,children:c,containerInfo:f,implementation:y}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ma.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ma.createPortal=function(c,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return r(c,f,null,y)},Ma.flushSync=function(c){var f=o.T,y=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=f,s.p=y,s.d.f()}},Ma.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(c,f))},Ma.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Ma.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var y=f.as,_=l(y,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?s.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:x,fetchPriority:S}):y==="script"&&s.d.X(c,{crossOrigin:_,integrity:x,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ma.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=l(f.as,f.crossOrigin);s.d.M(c,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(c)},Ma.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,_=l(y,f.crossOrigin);s.d.L(c,y,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ma.preloadModule=function(c,f){if(typeof c=="string")if(f){var y=l(f.as,f.crossOrigin);s.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(c)},Ma.requestFormReset=function(c){s.d.r(c)},Ma.unstable_batchedUpdates=function(c,f){return c(f)},Ma.useFormState=function(c,f,y){return o.H.useFormState(c,f,y)},Ma.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ma.version="19.0.0",Ma}var zU;function f_e(){if(zU)return E8.exports;zU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),E8.exports=d_e(),E8.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qU;function p_e(){if(qU)return Pw;qU=1;var t=h_e(),e=qz(),i=f_e();function s(w){var E="https://react.dev/errors/"+w;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)E+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+w+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(w){return!(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)}var r=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),S=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),V=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function W(w){return w===null||typeof w!="object"?null:(w=B&&w[B]||w["@@iterator"],typeof w=="function"?w:null)}var J=Symbol.for("react.client.reference");function re(w){if(w==null)return null;if(typeof w=="function")return w.$$typeof===J?null:w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case c:return"Fragment";case l:return"Portal";case y:return"Profiler";case f:return"StrictMode";case A:return"Suspense";case k:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case S:return(w.displayName||"Context")+".Provider";case x:return(w._context.displayName||"Context")+".Consumer";case P:var E=w.render;return w=w.displayName,w||(w=E.displayName||E.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case $:return E=w.displayName||null,E!==null?E:re(w.type)||"Memo";case F:E=w._payload,w=w._init;try{return re(w(E))}catch{}}return null}var se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=Object.assign,pe,ue;function ce(w){if(pe===void 0)try{throw Error()}catch(D){var E=D.stack.trim().match(/\n( *(at )?)/);pe=E&&E[1]||"",ue=-1<D.stack.indexOf(`
    at`)?" (<anonymous>)":-1<D.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+w+ue}var ne=!1;function de(w,E){if(!w||ne)return"";ne=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(E){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(gt){var at=gt}Reflect.construct(w,[],It)}else{try{It.call()}catch(gt){at=gt}w.call(It.prototype)}}else{try{throw Error()}catch(gt){at=gt}(It=w())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(gt){if(gt&&at&&typeof gt.stack=="string")return[gt.stack,at.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Z=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");Z&&Z.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ie=z.DetermineComponentFrameRoot(),_e=ie[0],Ae=ie[1];if(_e&&Ae){var qe=_e.split(`
`),We=Ae.split(`
`);for(Z=z=0;z<qe.length&&!qe[z].includes("DetermineComponentFrameRoot");)z++;for(;Z<We.length&&!We[Z].includes("DetermineComponentFrameRoot");)Z++;if(z===qe.length||Z===We.length)for(z=qe.length-1,Z=We.length-1;1<=z&&0<=Z&&qe[z]!==We[Z];)Z--;for(;1<=z&&0<=Z;z--,Z--)if(qe[z]!==We[Z]){if(z!==1||Z!==1)do if(z--,Z--,0>Z||qe[z]!==We[Z]){var yt=`
`+qe[z].replace(" at new "," at ");return w.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",w.displayName)),yt}while(1<=z&&0<=Z);break}}}finally{ne=!1,Error.prepareStackTrace=D}return(D=w?w.displayName||w.name:"")?ce(D):""}function Se(w){switch(w.tag){case 26:case 27:case 5:return ce(w.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 15:return w=de(w.type,!1),w;case 11:return w=de(w.type.render,!1),w;case 1:return w=de(w.type,!0),w;default:return""}}function Pe(w){try{var E="";do E+=Se(w),w=w.return;while(w);return E}catch(D){return`
Error generating stack: `+D.message+`
`+D.stack}}function Re(w){var E=w,D=w;if(w.alternate)for(;E.return;)E=E.return;else{w=E;do E=w,(E.flags&4098)!==0&&(D=E.return),w=E.return;while(w)}return E.tag===3?D:null}function Oe(w){if(w.tag===13){var E=w.memoizedState;if(E===null&&(w=w.alternate,w!==null&&(E=w.memoizedState)),E!==null)return E.dehydrated}return null}function we(w){if(Re(w)!==w)throw Error(s(188))}function Fe(w){var E=w.alternate;if(!E){if(E=Re(w),E===null)throw Error(s(188));return E!==w?null:w}for(var D=w,z=E;;){var Z=D.return;if(Z===null)break;var ie=Z.alternate;if(ie===null){if(z=Z.return,z!==null){D=z;continue}break}if(Z.child===ie.child){for(ie=Z.child;ie;){if(ie===D)return we(Z),w;if(ie===z)return we(Z),E;ie=ie.sibling}throw Error(s(188))}if(D.return!==z.return)D=Z,z=ie;else{for(var _e=!1,Ae=Z.child;Ae;){if(Ae===D){_e=!0,D=Z,z=ie;break}if(Ae===z){_e=!0,z=Z,D=ie;break}Ae=Ae.sibling}if(!_e){for(Ae=ie.child;Ae;){if(Ae===D){_e=!0,D=ie,z=Z;break}if(Ae===z){_e=!0,z=ie,D=Z;break}Ae=Ae.sibling}if(!_e)throw Error(s(189))}}if(D.alternate!==z)throw Error(s(190))}if(D.tag!==3)throw Error(s(188));return D.stateNode.current===D?w:E}function it(w){var E=w.tag;if(E===5||E===26||E===27||E===6)return w;for(w=w.child;w!==null;){if(E=it(w),E!==null)return E;w=w.sibling}return null}var vt=Array.isArray,ot=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},Ct=[],qt=-1;function Lt(w){return{current:w}}function Dt(w){0>qt||(w.current=Ct[qt],Ct[qt]=null,qt--)}function Yi(w,E){qt++,Ct[qt]=w.current,w.current=E}var cs=Lt(null),fn=Lt(null),Us=Lt(null),hr=Lt(null);function oo(w,E){switch(Yi(Us,E),Yi(fn,w),Yi(cs,null),w=E.nodeType,w){case 9:case 11:E=(E=E.documentElement)&&(E=E.namespaceURI)?aU(E):0;break;default:if(w=w===8?E.parentNode:E,E=w.tagName,w=w.namespaceURI)w=aU(w),E=lU(w,E);else switch(E){case"svg":E=1;break;case"math":E=2;break;default:E=0}}Dt(cs),Yi(cs,E)}function ss(){Dt(cs),Dt(fn),Dt(Us)}function ye(w){w.memoizedState!==null&&Yi(hr,w);var E=cs.current,D=lU(E,w.type);E!==D&&(Yi(fn,w),Yi(cs,D))}function Fi(w){fn.current===w&&(Dt(cs),Dt(fn)),hr.current===w&&(Dt(hr),bw._currentValue=ct)}var xr=Object.prototype.hasOwnProperty,ri=t.unstable_scheduleCallback,Ai=t.unstable_cancelCallback,pn=t.unstable_shouldYield,ms=t.unstable_requestPaint,Zi=t.unstable_now,tn=t.unstable_getCurrentPriorityLevel,mn=t.unstable_ImmediatePriority,jr=t.unstable_UserBlockingPriority,Cs=t.unstable_NormalPriority,xt=t.unstable_LowPriority,Ys=t.unstable_IdlePriority,m=t.log,j=t.unstable_setDisableYieldValue,T=null,p=null;function h(w){if(p&&typeof p.onCommitFiberRoot=="function")try{p.onCommitFiberRoot(T,w,void 0,(w.current.flags&128)===128)}catch{}}function a(w){if(typeof m=="function"&&j(w),p&&typeof p.setStrictMode=="function")try{p.setStrictMode(T,w)}catch{}}var u=Math.clz32?Math.clz32:v,d=Math.log,g=Math.LN2;function v(w){return w>>>=0,w===0?32:31-(d(w)/g|0)|0}var b=128,C=4194304;function M(w){var E=w&42;if(E!==0)return E;switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return w&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return w}}function O(w,E){var D=w.pendingLanes;if(D===0)return 0;var z=0,Z=w.suspendedLanes,ie=w.pingedLanes,_e=w.warmLanes;w=w.finishedLanes!==0;var Ae=D&134217727;return Ae!==0?(D=Ae&~Z,D!==0?z=M(D):(ie&=Ae,ie!==0?z=M(ie):w||(_e=Ae&~_e,_e!==0&&(z=M(_e))))):(Ae=D&~Z,Ae!==0?z=M(Ae):ie!==0?z=M(ie):w||(_e=D&~_e,_e!==0&&(z=M(_e)))),z===0?0:E!==0&&E!==z&&(E&Z)===0&&(Z=z&-z,_e=E&-E,Z>=_e||Z===32&&(_e&4194176)!==0)?E:z}function L(w,E){return(w.pendingLanes&~(w.suspendedLanes&~w.pingedLanes)&E)===0}function q(w,E){switch(w){case 1:case 2:case 4:case 8:return E+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var w=b;return b<<=1,(b&4194176)===0&&(b=128),w}function ee(){var w=C;return C<<=1,(C&62914560)===0&&(C=4194304),w}function Q(w){for(var E=[],D=0;31>D;D++)E.push(w);return E}function ge(w,E){w.pendingLanes|=E,E!==268435456&&(w.suspendedLanes=0,w.pingedLanes=0,w.warmLanes=0)}function ve(w,E,D,z,Z,ie){var _e=w.pendingLanes;w.pendingLanes=D,w.suspendedLanes=0,w.pingedLanes=0,w.warmLanes=0,w.expiredLanes&=D,w.entangledLanes&=D,w.errorRecoveryDisabledLanes&=D,w.shellSuspendCounter=0;var Ae=w.entanglements,qe=w.expirationTimes,We=w.hiddenUpdates;for(D=_e&~D;0<D;){var yt=31-u(D),It=1<<yt;Ae[yt]=0,qe[yt]=-1;var at=We[yt];if(at!==null)for(We[yt]=null,yt=0;yt<at.length;yt++){var gt=at[yt];gt!==null&&(gt.lane&=-536870913)}D&=~It}z!==0&&fe(w,z,0),ie!==0&&Z===0&&w.tag!==0&&(w.suspendedLanes|=ie&~(_e&~E))}function fe(w,E,D){w.pendingLanes|=E,w.suspendedLanes&=~E;var z=31-u(E);w.entangledLanes|=E,w.entanglements[z]=w.entanglements[z]|1073741824|D&4194218}function Ce(w,E){var D=w.entangledLanes|=E;for(w=w.entanglements;D;){var z=31-u(D),Z=1<<z;Z&E|w[z]&E&&(w[z]|=E),D&=~Z}}function Ie(w){return w&=-w,2<w?8<w?(w&134217727)!==0?32:268435456:8:2}function Ne(){var w=ot.p;return w!==0?w:(w=window.event,w===void 0?32:PU(w.type))}function Ve(w,E){var D=ot.p;try{return ot.p=w,E()}finally{ot.p=D}}var Xe=Math.random().toString(36).slice(2),et="__reactFiber$"+Xe,dt="__reactProps$"+Xe,ut="__reactContainer$"+Xe,mt="__reactEvents$"+Xe,lt="__reactListeners$"+Xe,gi="__reactHandles$"+Xe,oi="__reactResources$"+Xe,Ni="__reactMarker$"+Xe;function Ki(w){delete w[et],delete w[dt],delete w[mt],delete w[lt],delete w[gi]}function _s(w){var E=w[et];if(E)return E;for(var D=w.parentNode;D;){if(E=D[ut]||D[et]){if(D=E.alternate,E.child!==null||D!==null&&D.child!==null)for(w=hU(w);w!==null;){if(D=w[et])return D;w=hU(w)}return E}w=D,D=w.parentNode}return null}function as(w){if(w=w[et]||w[ut]){var E=w.tag;if(E===5||E===6||E===13||E===26||E===27||E===3)return w}return null}function $i(w){var E=w.tag;if(E===5||E===26||E===27||E===6)return w.stateNode;throw Error(s(33))}function ci(w){var E=w[oi];return E||(E=w[oi]={hoistableStyles:new Map,hoistableScripts:new Map}),E}function Kt(w){w[Ni]=!0}var Xs=new Set,Ps={};function Qn(w,E){wi(w,E),wi(w+"Capture",E)}function wi(w,E){for(Ps[w]=E,w=0;w<E.length;w++)Xs.add(E[w])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ns=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dr={},Jc={};function Yu(w){return xr.call(Jc,w)?!0:xr.call(dr,w)?!1:ns.test(w)?Jc[w]=!0:(dr[w]=!0,!1)}function ze(w,E,D){if(Yu(E))if(D===null)w.removeAttribute(E);else{switch(typeof D){case"undefined":case"function":case"symbol":w.removeAttribute(E);return;case"boolean":var z=E.toLowerCase().slice(0,5);if(z!=="data-"&&z!=="aria-"){w.removeAttribute(E);return}}w.setAttribute(E,""+D)}}function pt(w,E,D){if(D===null)w.removeAttribute(E);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":w.removeAttribute(E);return}w.setAttribute(E,""+D)}}function Pt(w,E,D,z){if(z===null)w.removeAttribute(D);else{switch(typeof z){case"undefined":case"function":case"symbol":case"boolean":w.removeAttribute(D);return}w.setAttributeNS(E,D,""+z)}}function ei(w){switch(typeof w){case"bigint":case"boolean":case"number":case"string":case"undefined":return w;case"object":return w;default:return""}}function Os(w){var E=w.type;return(w=w.nodeName)&&w.toLowerCase()==="input"&&(E==="checkbox"||E==="radio")}function kn(w){var E=Os(w)?"checked":"value",D=Object.getOwnPropertyDescriptor(w.constructor.prototype,E),z=""+w[E];if(!w.hasOwnProperty(E)&&typeof D<"u"&&typeof D.get=="function"&&typeof D.set=="function"){var Z=D.get,ie=D.set;return Object.defineProperty(w,E,{configurable:!0,get:function(){return Z.call(this)},set:function(_e){z=""+_e,ie.call(this,_e)}}),Object.defineProperty(w,E,{enumerable:D.enumerable}),{getValue:function(){return z},setValue:function(_e){z=""+_e},stopTracking:function(){w._valueTracker=null,delete w[E]}}}}function Nn(w){w._valueTracker||(w._valueTracker=kn(w))}function Br(w){if(!w)return!1;var E=w._valueTracker;if(!E)return!0;var D=E.getValue(),z="";return w&&(z=Os(w)?w.checked?"true":"false":w.value),w=z,w!==D?(E.setValue(w),!0):!1}function If(w){if(w=w||(typeof document<"u"?document:void 0),typeof w>"u")return null;try{return w.activeElement||w.body}catch{return w.body}}var mm=/[\n"\\]/g;function Pa(w){return w.replace(mm,function(E){return"\\"+E.charCodeAt(0).toString(16)+" "})}function gm(w,E,D,z,Z,ie,_e,Ae){w.name="",_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?w.type=_e:w.removeAttribute("type"),E!=null?_e==="number"?(E===0&&w.value===""||w.value!=E)&&(w.value=""+ei(E)):w.value!==""+ei(E)&&(w.value=""+ei(E)):_e!=="submit"&&_e!=="reset"||w.removeAttribute("value"),E!=null?Mf(w,_e,ei(E)):D!=null?Mf(w,_e,ei(D)):z!=null&&w.removeAttribute("value"),Z==null&&ie!=null&&(w.defaultChecked=!!ie),Z!=null&&(w.checked=Z&&typeof Z!="function"&&typeof Z!="symbol"),Ae!=null&&typeof Ae!="function"&&typeof Ae!="symbol"&&typeof Ae!="boolean"?w.name=""+ei(Ae):w.removeAttribute("name")}function Qc(w,E,D,z,Z,ie,_e,Ae){if(ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(w.type=ie),E!=null||D!=null){if(!(ie!=="submit"&&ie!=="reset"||E!=null))return;D=D!=null?""+ei(D):"",E=E!=null?""+ei(E):D,Ae||E===w.value||(w.value=E),w.defaultValue=E}z=z??Z,z=typeof z!="function"&&typeof z!="symbol"&&!!z,w.checked=Ae?w.checked:!!z,w.defaultChecked=!!z,_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"&&(w.name=_e)}function Mf(w,E,D){E==="number"&&If(w.ownerDocument)===w||w.defaultValue===""+D||(w.defaultValue=""+D)}function ym(w,E,D,z){if(w=w.options,E){E={};for(var Z=0;Z<D.length;Z++)E["$"+D[Z]]=!0;for(D=0;D<w.length;D++)Z=E.hasOwnProperty("$"+w[D].value),w[D].selected!==Z&&(w[D].selected=Z),Z&&z&&(w[D].defaultSelected=!0)}else{for(D=""+ei(D),E=null,Z=0;Z<w.length;Z++){if(w[Z].value===D){w[Z].selected=!0,z&&(w[Z].defaultSelected=!0);return}E!==null||w[Z].disabled||(E=w[Z])}E!==null&&(E.selected=!0)}}function kx(w,E,D){if(E!=null&&(E=""+ei(E),E!==w.value&&(w.value=E),D==null)){w.defaultValue!==E&&(w.defaultValue=E);return}w.defaultValue=D!=null?""+ei(D):""}function Nx(w,E,D,z){if(E==null){if(z!=null){if(D!=null)throw Error(s(92));if(vt(z)){if(1<z.length)throw Error(s(93));z=z[0]}D=z}D==null&&(D=""),E=D}D=ei(E),w.defaultValue=D,z=w.textContent,z===D&&z!==""&&z!==null&&(w.value=z)}function ud(w,E){if(E){var D=w.firstChild;if(D&&D===w.lastChild&&D.nodeType===3){D.nodeValue=E;return}}w.textContent=E}var y7=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function h5(w,E,D){var z=E.indexOf("--")===0;D==null||typeof D=="boolean"||D===""?z?w.setProperty(E,""):E==="float"?w.cssFloat="":w[E]="":z?w.setProperty(E,D):typeof D!="number"||D===0||y7.has(E)?E==="float"?w.cssFloat=D:w[E]=(""+D).trim():w[E]=D+"px"}function $x(w,E,D){if(E!=null&&typeof E!="object")throw Error(s(62));if(w=w.style,D!=null){for(var z in D)!D.hasOwnProperty(z)||E!=null&&E.hasOwnProperty(z)||(z.indexOf("--")===0?w.setProperty(z,""):z==="float"?w.cssFloat="":w[z]="");for(var Z in E)z=E[Z],E.hasOwnProperty(Z)&&D[Z]!==z&&h5(w,Z,z)}else for(var ie in E)E.hasOwnProperty(ie)&&h5(w,ie,E[ie])}function Ox(w){if(w.indexOf("-")===-1)return!1;switch(w){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v7=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),d5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wg(w){return d5.test(""+w)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":w}var Rx=null;function Zg(w){return w=w.target||w.srcElement||window,w.correspondingUseElement&&(w=w.correspondingUseElement),w.nodeType===3?w.parentNode:w}var vm=null,Af=null;function f5(w){var E=as(w);if(E&&(w=E.stateNode)){var D=w[dt]||null;e:switch(w=E.stateNode,E.type){case"input":if(gm(w,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name),E=D.name,D.type==="radio"&&E!=null){for(D=w;D.parentNode;)D=D.parentNode;for(D=D.querySelectorAll('input[name="'+Pa(""+E)+'"][type="radio"]'),E=0;E<D.length;E++){var z=D[E];if(z!==w&&z.form===w.form){var Z=z[dt]||null;if(!Z)throw Error(s(90));gm(z,Z.value,Z.defaultValue,Z.defaultValue,Z.checked,Z.defaultChecked,Z.type,Z.name)}}for(E=0;E<D.length;E++)z=D[E],z.form===w.form&&Br(z)}break e;case"textarea":kx(w,D.value,D.defaultValue);break e;case"select":E=D.value,E!=null&&ym(w,!!D.multiple,E,!1)}}}var _m=!1;function p5(w,E,D){if(_m)return w(E,D);_m=!0;try{var z=w(E);return z}finally{if(_m=!1,(vm!==null||Af!==null)&&(oP(),vm&&(E=vm,w=Af,Af=vm=null,f5(E),w)))for(E=0;E<w.length;E++)f5(w[E])}}function bm(w,E){var D=w.stateNode;if(D===null)return null;var z=D[dt]||null;if(z===null)return null;D=z[E];e:switch(E){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(w=w.type,z=!(w==="button"||w==="input"||w==="select"||w==="textarea")),w=!z;break e;default:w=!1}if(w)return null;if(D&&typeof D!="function")throw Error(s(231,E,typeof D));return D}var Vv=!1;if(sn)try{var Kg={};Object.defineProperty(Kg,"passive",{get:function(){Vv=!0}}),window.addEventListener("test",Kg,Kg),window.removeEventListener("test",Kg,Kg)}catch{Vv=!1}var eh=null,Gv=null,jv=null;function xm(){if(jv)return jv;var w,E=Gv,D=E.length,z,Z="value"in eh?eh.value:eh.textContent,ie=Z.length;for(w=0;w<D&&E[w]===Z[w];w++);var _e=D-w;for(z=1;z<=_e&&E[D-z]===Z[ie-z];z++);return jv=Z.slice(w,1<z?1-z:void 0)}function Df(w){var E=w.keyCode;return"charCode"in w?(w=w.charCode,w===0&&E===13&&(w=13)):w=E,w===10&&(w=13),32<=w||w===13?w:0}function Bv(){return!0}function Hv(){return!1}function ea(w){function E(D,z,Z,ie,_e){this._reactName=D,this._targetInst=Z,this.type=z,this.nativeEvent=ie,this.target=_e,this.currentTarget=null;for(var Ae in w)w.hasOwnProperty(Ae)&&(D=w[Ae],this[Ae]=D?D(ie):ie[Ae]);return this.isDefaultPrevented=(ie.defaultPrevented!=null?ie.defaultPrevented:ie.returnValue===!1)?Bv:Hv,this.isPropagationStopped=Hv,this}return oe(E.prototype,{preventDefault:function(){this.defaultPrevented=!0;var D=this.nativeEvent;D&&(D.preventDefault?D.preventDefault():typeof D.returnValue!="unknown"&&(D.returnValue=!1),this.isDefaultPrevented=Bv)},stopPropagation:function(){var D=this.nativeEvent;D&&(D.stopPropagation?D.stopPropagation():typeof D.cancelBubble!="unknown"&&(D.cancelBubble=!0),this.isPropagationStopped=Bv)},persist:function(){},isPersistent:Bv}),E}var kf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(w){return w.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wm=ea(kf),Sm=oe({},kf,{view:0,detail:0}),m5=ea(Sm),Jg,Lx,Qg,iu=oe({},Sm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Em,button:0,buttons:0,relatedTarget:function(w){return w.relatedTarget===void 0?w.fromElement===w.srcElement?w.toElement:w.fromElement:w.relatedTarget},movementX:function(w){return"movementX"in w?w.movementX:(w!==Qg&&(Qg&&w.type==="mousemove"?(Jg=w.screenX-Qg.screenX,Lx=w.screenY-Qg.screenY):Lx=Jg=0,Qg=w),Jg)},movementY:function(w){return"movementY"in w?w.movementY:Lx}}),g5=ea(iu),_7=oe({},iu,{dataTransfer:0}),b7=ea(_7),y5=oe({},Sm,{relatedTarget:0}),Uv=ea(y5),ta=oe({},kf,{animationName:0,elapsedTime:0,pseudoElement:0}),x7=ea(ta),w7=oe({},kf,{clipboardData:function(w){return"clipboardData"in w?w.clipboardData:window.clipboardData}}),S7=ea(w7),E7=oe({},kf,{data:0}),v5=ea(E7),C7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _5(w){var E=this.nativeEvent;return E.getModifierState?E.getModifierState(w):(w=T7[w])?!!E[w]:!1}function Em(){return _5}var Nf=oe({},Sm,{key:function(w){if(w.key){var E=C7[w.key]||w.key;if(E!=="Unidentified")return E}return w.type==="keypress"?(w=Df(w),w===13?"Enter":String.fromCharCode(w)):w.type==="keydown"||w.type==="keyup"?P7[w.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Em,charCode:function(w){return w.type==="keypress"?Df(w):0},keyCode:function(w){return w.type==="keydown"||w.type==="keyup"?w.keyCode:0},which:function(w){return w.type==="keypress"?Df(w):w.type==="keydown"||w.type==="keyup"?w.keyCode:0}}),Yv=ea(Nf),I7=oe({},iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fx=ea(I7),b5=oe({},Sm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Em}),x5=ea(b5),e1=oe({},kf,{propertyName:0,elapsedTime:0,pseudoElement:0}),M7=ea(e1),A7=oe({},iu,{deltaX:function(w){return"deltaX"in w?w.deltaX:"wheelDeltaX"in w?-w.wheelDeltaX:0},deltaY:function(w){return"deltaY"in w?w.deltaY:"wheelDeltaY"in w?-w.wheelDeltaY:"wheelDelta"in w?-w.wheelDelta:0},deltaZ:0,deltaMode:0}),D7=ea(A7),k7=oe({},kf,{newState:0,oldState:0}),N7=ea(k7),$7=[9,13,27,32],t1=sn&&"CompositionEvent"in window,i1=null;sn&&"documentMode"in document&&(i1=document.documentMode);var Xv=sn&&"TextEvent"in window&&!i1,w5=sn&&(!t1||i1&&8<i1&&11>=i1),Wv=" ",S5=!1;function E5(w,E){switch(w){case"keyup":return $7.indexOf(E.keyCode)!==-1;case"keydown":return E.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zx(w){return w=w.detail,typeof w=="object"&&"data"in w?w.data:null}var Xu=!1;function cd(w,E){switch(w){case"compositionend":return zx(E);case"keypress":return E.which!==32?null:(S5=!0,Wv);case"textInput":return w=E.data,w===Wv&&S5?null:w;default:return null}}function C5(w,E){if(Xu)return w==="compositionend"||!t1&&E5(w,E)?(w=xm(),jv=Gv=eh=null,Xu=!1,w):null;switch(w){case"paste":return null;case"keypress":if(!(E.ctrlKey||E.altKey||E.metaKey)||E.ctrlKey&&E.altKey){if(E.char&&1<E.char.length)return E.char;if(E.which)return String.fromCharCode(E.which)}return null;case"compositionend":return w5&&E.locale!=="ko"?null:E.data;default:return null}}var qx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P5(w){var E=w&&w.nodeName&&w.nodeName.toLowerCase();return E==="input"?!!qx[w.type]:E==="textarea"}function T5(w,E,D,z){vm?Af?Af.push(z):Af=[z]:vm=z,E=hP(E,"onChange"),0<E.length&&(D=new wm("onChange","change",null,D,z),w.push({event:D,listeners:E}))}var s1=null,n1=null;function O7(w){iU(w,0)}function Zv(w){var E=$i(w);if(Br(E))return w}function I5(w,E){if(w==="change")return E}var M5=!1;if(sn){var Vx;if(sn){var Gx="oninput"in document;if(!Gx){var X=document.createElement("div");X.setAttribute("oninput","return;"),Gx=typeof X.oninput=="function"}Vx=Gx}else Vx=!1;M5=Vx&&(!document.documentMode||9<document.documentMode)}function H(){s1&&(s1.detachEvent("onpropertychange",te),n1=s1=null)}function te(w){if(w.propertyName==="value"&&Zv(n1)){var E=[];T5(E,n1,w,Zg(w)),p5(O7,E)}}function le(w,E,D){w==="focusin"?(H(),s1=E,n1=D,s1.attachEvent("onpropertychange",te)):w==="focusout"&&H()}function he(w){if(w==="selectionchange"||w==="keyup"||w==="keydown")return Zv(n1)}function be(w,E){if(w==="click")return Zv(E)}function Te(w,E){if(w==="input"||w==="change")return Zv(E)}function Me(w,E){return w===E&&(w!==0||1/w===1/E)||w!==w&&E!==E}var $e=typeof Object.is=="function"?Object.is:Me;function je(w,E){if($e(w,E))return!0;if(typeof w!="object"||w===null||typeof E!="object"||E===null)return!1;var D=Object.keys(w),z=Object.keys(E);if(D.length!==z.length)return!1;for(z=0;z<D.length;z++){var Z=D[z];if(!xr.call(E,Z)||!$e(w[Z],E[Z]))return!1}return!0}function Le(w){for(;w&&w.firstChild;)w=w.firstChild;return w}function Ke(w,E){var D=Le(w);w=0;for(var z;D;){if(D.nodeType===3){if(z=w+D.textContent.length,w<=E&&z>=E)return{node:D,offset:E-w};w=z}e:{for(;D;){if(D.nextSibling){D=D.nextSibling;break e}D=D.parentNode}D=void 0}D=Le(D)}}function ft(w,E){return w&&E?w===E?!0:w&&w.nodeType===3?!1:E&&E.nodeType===3?ft(w,E.parentNode):"contains"in w?w.contains(E):w.compareDocumentPosition?!!(w.compareDocumentPosition(E)&16):!1:!1}function Mt(w){w=w!=null&&w.ownerDocument!=null&&w.ownerDocument.defaultView!=null?w.ownerDocument.defaultView:window;for(var E=If(w.document);E instanceof w.HTMLIFrameElement;){try{var D=typeof E.contentWindow.location.href=="string"}catch{D=!1}if(D)w=E.contentWindow;else break;E=If(w.document)}return E}function Tt(w){var E=w&&w.nodeName&&w.nodeName.toLowerCase();return E&&(E==="input"&&(w.type==="text"||w.type==="search"||w.type==="tel"||w.type==="url"||w.type==="password")||E==="textarea"||w.contentEditable==="true")}function Rt(w,E){var D=Mt(E);E=w.focusedElem;var z=w.selectionRange;if(D!==E&&E&&E.ownerDocument&&ft(E.ownerDocument.documentElement,E)){if(z!==null&&Tt(E)){if(w=z.start,D=z.end,D===void 0&&(D=w),"selectionStart"in E)E.selectionStart=w,E.selectionEnd=Math.min(D,E.value.length);else if(D=(w=E.ownerDocument||document)&&w.defaultView||window,D.getSelection){D=D.getSelection();var Z=E.textContent.length,ie=Math.min(z.start,Z);z=z.end===void 0?ie:Math.min(z.end,Z),!D.extend&&ie>z&&(Z=z,z=ie,ie=Z),Z=Ke(E,ie);var _e=Ke(E,z);Z&&_e&&(D.rangeCount!==1||D.anchorNode!==Z.node||D.anchorOffset!==Z.offset||D.focusNode!==_e.node||D.focusOffset!==_e.offset)&&(w=w.createRange(),w.setStart(Z.node,Z.offset),D.removeAllRanges(),ie>z?(D.addRange(w),D.extend(_e.node,_e.offset)):(w.setEnd(_e.node,_e.offset),D.addRange(w)))}}for(w=[],D=E;D=D.parentNode;)D.nodeType===1&&w.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<w.length;E++)D=w[E],D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}var Xt=sn&&"documentMode"in document&&11>=document.documentMode,Vt=null,ai=null,Ii=null,Ji=!1;function Si(w,E,D){var z=D.window===D?D.document:D.nodeType===9?D:D.ownerDocument;Ji||Vt==null||Vt!==If(z)||(z=Vt,"selectionStart"in z&&Tt(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),Ii&&je(Ii,z)||(Ii=z,z=hP(ai,"onSelect"),0<z.length&&(E=new wm("onSelect","select",null,E,D),w.push({event:E,listeners:z}),E.target=Vt)))}function Pi(w,E){var D={};return D[w.toLowerCase()]=E.toLowerCase(),D["Webkit"+w]="webkit"+E,D["Moz"+w]="moz"+E,D}var wr={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionrun:Pi("Transition","TransitionRun"),transitionstart:Pi("Transition","TransitionStart"),transitioncancel:Pi("Transition","TransitionCancel"),transitionend:Pi("Transition","TransitionEnd")},gn={},Ta={};sn&&(Ta=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function ao(w){if(gn[w])return gn[w];if(!wr[w])return w;var E=wr[w],D;for(D in E)if(E.hasOwnProperty(D)&&D in Ta)return gn[w]=E[D];return w}var Wu=ao("animationend"),r1=ao("animationiteration"),Cm=ao("animationstart"),jye=ao("transitionrun"),Bye=ao("transitionstart"),Hye=ao("transitioncancel"),Hj=ao("transitionend"),Uj=new Map,Yj="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function th(w,E){Uj.set(w,E),Qn(E,[w])}var Zu=[],Kv=0,R7=0;function A5(){for(var w=Kv,E=R7=Kv=0;E<w;){var D=Zu[E];Zu[E++]=null;var z=Zu[E];Zu[E++]=null;var Z=Zu[E];Zu[E++]=null;var ie=Zu[E];if(Zu[E++]=null,z!==null&&Z!==null){var _e=z.pending;_e===null?Z.next=Z:(Z.next=_e.next,_e.next=Z),z.pending=Z}ie!==0&&Xj(D,Z,ie)}}function D5(w,E,D,z){Zu[Kv++]=w,Zu[Kv++]=E,Zu[Kv++]=D,Zu[Kv++]=z,R7|=z,w.lanes|=z,w=w.alternate,w!==null&&(w.lanes|=z)}function L7(w,E,D,z){return D5(w,E,D,z),k5(w)}function Pm(w,E){return D5(w,null,null,E),k5(w)}function Xj(w,E,D){w.lanes|=D;var z=w.alternate;z!==null&&(z.lanes|=D);for(var Z=!1,ie=w.return;ie!==null;)ie.childLanes|=D,z=ie.alternate,z!==null&&(z.childLanes|=D),ie.tag===22&&(w=ie.stateNode,w===null||w._visibility&1||(Z=!0)),w=ie,ie=ie.return;Z&&E!==null&&w.tag===3&&(ie=w.stateNode,Z=31-u(D),ie=ie.hiddenUpdates,w=ie[Z],w===null?ie[Z]=[E]:w.push(E),E.lane=D|536870912)}function k5(w){if(50<fw)throw fw=0,jD=null,Error(s(185));for(var E=w.return;E!==null;)w=E,E=w.return;return w.tag===3?w.stateNode:null}var Jv={},Wj=new WeakMap;function Ku(w,E){if(typeof w=="object"&&w!==null){var D=Wj.get(w);return D!==void 0?D:(E={value:w,source:E,stack:Pe(E)},Wj.set(w,E),E)}return{value:w,source:E,stack:Pe(E)}}var Qv=[],e_=0,N5=null,$5=0,Ju=[],Qu=0,o1=null,$f=1,Of="";function a1(w,E){Qv[e_++]=$5,Qv[e_++]=N5,N5=w,$5=E}function Zj(w,E,D){Ju[Qu++]=$f,Ju[Qu++]=Of,Ju[Qu++]=o1,o1=w;var z=$f;w=Of;var Z=32-u(z)-1;z&=~(1<<Z),D+=1;var ie=32-u(E)+Z;if(30<ie){var _e=Z-Z%5;ie=(z&(1<<_e)-1).toString(32),z>>=_e,Z-=_e,$f=1<<32-u(E)+Z|D<<Z|z,Of=ie+w}else $f=1<<ie|D<<Z|z,Of=w}function F7(w){w.return!==null&&(a1(w,1),Zj(w,1,0))}function z7(w){for(;w===N5;)N5=Qv[--e_],Qv[e_]=null,$5=Qv[--e_],Qv[e_]=null;for(;w===o1;)o1=Ju[--Qu],Ju[Qu]=null,Of=Ju[--Qu],Ju[Qu]=null,$f=Ju[--Qu],Ju[Qu]=null}var il=null,ia=null,Rs=!1,ih=null,hd=!1,q7=Error(s(519));function l1(w){var E=Error(s(418,""));throw Hx(Ku(E,w)),q7}function Kj(w){var E=w.stateNode,D=w.type,z=w.memoizedProps;switch(E[et]=w,E[dt]=z,D){case"dialog":bs("cancel",E),bs("close",E);break;case"iframe":case"object":case"embed":bs("load",E);break;case"video":case"audio":for(D=0;D<mw.length;D++)bs(mw[D],E);break;case"source":bs("error",E);break;case"img":case"image":case"link":bs("error",E),bs("load",E);break;case"details":bs("toggle",E);break;case"input":bs("invalid",E),Qc(E,z.value,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name,!0),Nn(E);break;case"select":bs("invalid",E);break;case"textarea":bs("invalid",E),Nx(E,z.value,z.defaultValue,z.children),Nn(E)}D=z.children,typeof D!="string"&&typeof D!="number"&&typeof D!="bigint"||E.textContent===""+D||z.suppressHydrationWarning===!0||oU(E.textContent,D)?(z.popover!=null&&(bs("beforetoggle",E),bs("toggle",E)),z.onScroll!=null&&bs("scroll",E),z.onScrollEnd!=null&&bs("scrollend",E),z.onClick!=null&&(E.onclick=dP),E=!0):E=!1,E||l1(w)}function Jj(w){for(il=w.return;il;)switch(il.tag){case 3:case 27:hd=!0;return;case 5:case 13:hd=!1;return;default:il=il.return}}function jx(w){if(w!==il)return!1;if(!Rs)return Jj(w),Rs=!0,!1;var E=!1,D;if((D=w.tag!==3&&w.tag!==27)&&((D=w.tag===5)&&(D=w.type,D=!(D!=="form"&&D!=="button")||o8(w.type,w.memoizedProps)),D=!D),D&&(E=!0),E&&ia&&l1(w),Jj(w),w.tag===13){if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));e:{for(w=w.nextSibling,E=0;w;){if(w.nodeType===8)if(D=w.data,D==="/$"){if(E===0){ia=nh(w.nextSibling);break e}E--}else D!=="$"&&D!=="$!"&&D!=="$?"||E++;w=w.nextSibling}ia=null}}else ia=il?nh(w.stateNode.nextSibling):null;return!0}function Bx(){ia=il=null,Rs=!1}function Hx(w){ih===null?ih=[w]:ih.push(w)}var Ux=Error(s(460)),Qj=Error(s(474)),V7={then:function(){}};function eB(w){return w=w.status,w==="fulfilled"||w==="rejected"}function O5(){}function tB(w,E,D){switch(D=w[D],D===void 0?w.push(E):D!==E&&(E.then(O5,O5),E=D),E.status){case"fulfilled":return E.value;case"rejected":throw w=E.reason,w===Ux?Error(s(483)):w;default:if(typeof E.status=="string")E.then(O5,O5);else{if(w=$n,w!==null&&100<w.shellSuspendCounter)throw Error(s(482));w=E,w.status="pending",w.then(function(z){if(E.status==="pending"){var Z=E;Z.status="fulfilled",Z.value=z}},function(z){if(E.status==="pending"){var Z=E;Z.status="rejected",Z.reason=z}})}switch(E.status){case"fulfilled":return E.value;case"rejected":throw w=E.reason,w===Ux?Error(s(483)):w}throw Yx=E,Ux}}var Yx=null;function iB(){if(Yx===null)throw Error(s(459));var w=Yx;return Yx=null,w}var t_=null,Xx=0;function R5(w){var E=Xx;return Xx+=1,t_===null&&(t_=[]),tB(t_,w,E)}function Wx(w,E){E=E.props.ref,w.ref=E!==void 0?E:null}function L5(w,E){throw E.$$typeof===r?Error(s(525)):(w=Object.prototype.toString.call(E),Error(s(31,w==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":w)))}function sB(w){var E=w._init;return E(w._payload)}function nB(w){function E(tt,Ye){if(w){var st=tt.deletions;st===null?(tt.deletions=[Ye],tt.flags|=16):st.push(Ye)}}function D(tt,Ye){if(!w)return null;for(;Ye!==null;)E(tt,Ye),Ye=Ye.sibling;return null}function z(tt){for(var Ye=new Map;tt!==null;)tt.key!==null?Ye.set(tt.key,tt):Ye.set(tt.index,tt),tt=tt.sibling;return Ye}function Z(tt,Ye){return tt=Fm(tt,Ye),tt.index=0,tt.sibling=null,tt}function ie(tt,Ye,st){return tt.index=st,w?(st=tt.alternate,st!==null?(st=st.index,st<Ye?(tt.flags|=33554434,Ye):st):(tt.flags|=33554434,Ye)):(tt.flags|=1048576,Ye)}function _e(tt){return w&&tt.alternate===null&&(tt.flags|=33554434),tt}function Ae(tt,Ye,st,Et){return Ye===null||Ye.tag!==6?(Ye=OD(st,tt.mode,Et),Ye.return=tt,Ye):(Ye=Z(Ye,st),Ye.return=tt,Ye)}function qe(tt,Ye,st,Et){var ti=st.type;return ti===c?yt(tt,Ye,st.props.children,Et,st.key):Ye!==null&&(Ye.elementType===ti||typeof ti=="object"&&ti!==null&&ti.$$typeof===F&&sB(ti)===Ye.type)?(Ye=Z(Ye,st.props),Wx(Ye,st),Ye.return=tt,Ye):(Ye=tP(st.type,st.key,st.props,null,tt.mode,Et),Wx(Ye,st),Ye.return=tt,Ye)}function We(tt,Ye,st,Et){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==st.containerInfo||Ye.stateNode.implementation!==st.implementation?(Ye=RD(st,tt.mode,Et),Ye.return=tt,Ye):(Ye=Z(Ye,st.children||[]),Ye.return=tt,Ye)}function yt(tt,Ye,st,Et,ti){return Ye===null||Ye.tag!==7?(Ye=v1(st,tt.mode,Et,ti),Ye.return=tt,Ye):(Ye=Z(Ye,st),Ye.return=tt,Ye)}function It(tt,Ye,st){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=OD(""+Ye,tt.mode,st),Ye.return=tt,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case o:return st=tP(Ye.type,Ye.key,Ye.props,null,tt.mode,st),Wx(st,Ye),st.return=tt,st;case l:return Ye=RD(Ye,tt.mode,st),Ye.return=tt,Ye;case F:var Et=Ye._init;return Ye=Et(Ye._payload),It(tt,Ye,st)}if(vt(Ye)||W(Ye))return Ye=v1(Ye,tt.mode,st,null),Ye.return=tt,Ye;if(typeof Ye.then=="function")return It(tt,R5(Ye),st);if(Ye.$$typeof===S)return It(tt,J5(tt,Ye),st);L5(tt,Ye)}return null}function at(tt,Ye,st,Et){var ti=Ye!==null?Ye.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return ti!==null?null:Ae(tt,Ye,""+st,Et);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case o:return st.key===ti?qe(tt,Ye,st,Et):null;case l:return st.key===ti?We(tt,Ye,st,Et):null;case F:return ti=st._init,st=ti(st._payload),at(tt,Ye,st,Et)}if(vt(st)||W(st))return ti!==null?null:yt(tt,Ye,st,Et,null);if(typeof st.then=="function")return at(tt,Ye,R5(st),Et);if(st.$$typeof===S)return at(tt,Ye,J5(tt,st),Et);L5(tt,st)}return null}function gt(tt,Ye,st,Et,ti){if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return tt=tt.get(st)||null,Ae(Ye,tt,""+Et,ti);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case o:return tt=tt.get(Et.key===null?st:Et.key)||null,qe(Ye,tt,Et,ti);case l:return tt=tt.get(Et.key===null?st:Et.key)||null,We(Ye,tt,Et,ti);case F:var ls=Et._init;return Et=ls(Et._payload),gt(tt,Ye,st,Et,ti)}if(vt(Et)||W(Et))return tt=tt.get(st)||null,yt(Ye,tt,Et,ti,null);if(typeof Et.then=="function")return gt(tt,Ye,st,R5(Et),ti);if(Et.$$typeof===S)return gt(tt,Ye,st,J5(Ye,Et),ti);L5(Ye,Et)}return null}function di(tt,Ye,st,Et){for(var ti=null,ls=null,yi=Ye,Ci=Ye=0,Mo=null;yi!==null&&Ci<st.length;Ci++){yi.index>Ci?(Mo=yi,yi=null):Mo=yi.sibling;var Ls=at(tt,yi,st[Ci],Et);if(Ls===null){yi===null&&(yi=Mo);break}w&&yi&&Ls.alternate===null&&E(tt,yi),Ye=ie(Ls,Ye,Ci),ls===null?ti=Ls:ls.sibling=Ls,ls=Ls,yi=Mo}if(Ci===st.length)return D(tt,yi),Rs&&a1(tt,Ci),ti;if(yi===null){for(;Ci<st.length;Ci++)yi=It(tt,st[Ci],Et),yi!==null&&(Ye=ie(yi,Ye,Ci),ls===null?ti=yi:ls.sibling=yi,ls=yi);return Rs&&a1(tt,Ci),ti}for(yi=z(yi);Ci<st.length;Ci++)Mo=gt(yi,tt,Ci,st[Ci],Et),Mo!==null&&(w&&Mo.alternate!==null&&yi.delete(Mo.key===null?Ci:Mo.key),Ye=ie(Mo,Ye,Ci),ls===null?ti=Mo:ls.sibling=Mo,ls=Mo);return w&&yi.forEach(function(Hm){return E(tt,Hm)}),Rs&&a1(tt,Ci),ti}function Gi(tt,Ye,st,Et){if(st==null)throw Error(s(151));for(var ti=null,ls=null,yi=Ye,Ci=Ye=0,Mo=null,Ls=st.next();yi!==null&&!Ls.done;Ci++,Ls=st.next()){yi.index>Ci?(Mo=yi,yi=null):Mo=yi.sibling;var Hm=at(tt,yi,Ls.value,Et);if(Hm===null){yi===null&&(yi=Mo);break}w&&yi&&Hm.alternate===null&&E(tt,yi),Ye=ie(Hm,Ye,Ci),ls===null?ti=Hm:ls.sibling=Hm,ls=Hm,yi=Mo}if(Ls.done)return D(tt,yi),Rs&&a1(tt,Ci),ti;if(yi===null){for(;!Ls.done;Ci++,Ls=st.next())Ls=It(tt,Ls.value,Et),Ls!==null&&(Ye=ie(Ls,Ye,Ci),ls===null?ti=Ls:ls.sibling=Ls,ls=Ls);return Rs&&a1(tt,Ci),ti}for(yi=z(yi);!Ls.done;Ci++,Ls=st.next())Ls=gt(yi,tt,Ci,Ls.value,Et),Ls!==null&&(w&&Ls.alternate!==null&&yi.delete(Ls.key===null?Ci:Ls.key),Ye=ie(Ls,Ye,Ci),ls===null?ti=Ls:ls.sibling=Ls,ls=Ls);return w&&yi.forEach(function(r_e){return E(tt,r_e)}),Rs&&a1(tt,Ci),ti}function Cr(tt,Ye,st,Et){if(typeof st=="object"&&st!==null&&st.type===c&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case o:e:{for(var ti=st.key;Ye!==null;){if(Ye.key===ti){if(ti=st.type,ti===c){if(Ye.tag===7){D(tt,Ye.sibling),Et=Z(Ye,st.props.children),Et.return=tt,tt=Et;break e}}else if(Ye.elementType===ti||typeof ti=="object"&&ti!==null&&ti.$$typeof===F&&sB(ti)===Ye.type){D(tt,Ye.sibling),Et=Z(Ye,st.props),Wx(Et,st),Et.return=tt,tt=Et;break e}D(tt,Ye);break}else E(tt,Ye);Ye=Ye.sibling}st.type===c?(Et=v1(st.props.children,tt.mode,Et,st.key),Et.return=tt,tt=Et):(Et=tP(st.type,st.key,st.props,null,tt.mode,Et),Wx(Et,st),Et.return=tt,tt=Et)}return _e(tt);case l:e:{for(ti=st.key;Ye!==null;){if(Ye.key===ti)if(Ye.tag===4&&Ye.stateNode.containerInfo===st.containerInfo&&Ye.stateNode.implementation===st.implementation){D(tt,Ye.sibling),Et=Z(Ye,st.children||[]),Et.return=tt,tt=Et;break e}else{D(tt,Ye);break}else E(tt,Ye);Ye=Ye.sibling}Et=RD(st,tt.mode,Et),Et.return=tt,tt=Et}return _e(tt);case F:return ti=st._init,st=ti(st._payload),Cr(tt,Ye,st,Et)}if(vt(st))return di(tt,Ye,st,Et);if(W(st)){if(ti=W(st),typeof ti!="function")throw Error(s(150));return st=ti.call(st),Gi(tt,Ye,st,Et)}if(typeof st.then=="function")return Cr(tt,Ye,R5(st),Et);if(st.$$typeof===S)return Cr(tt,Ye,J5(tt,st),Et);L5(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,Ye!==null&&Ye.tag===6?(D(tt,Ye.sibling),Et=Z(Ye,st),Et.return=tt,tt=Et):(D(tt,Ye),Et=OD(st,tt.mode,Et),Et.return=tt,tt=Et),_e(tt)):D(tt,Ye)}return function(tt,Ye,st,Et){try{Xx=0;var ti=Cr(tt,Ye,st,Et);return t_=null,ti}catch(yi){if(yi===Ux)throw yi;var ls=sc(29,yi,null,tt.mode);return ls.lanes=Et,ls.return=tt,ls}finally{}}}var u1=nB(!0),rB=nB(!1),i_=Lt(null),F5=Lt(0);function oB(w,E){w=Uf,Yi(F5,w),Yi(i_,E),Uf=w|E.baseLanes}function G7(){Yi(F5,Uf),Yi(i_,i_.current)}function j7(){Uf=F5.current,Dt(i_),Dt(F5)}var ec=Lt(null),dd=null;function Tm(w){var E=w.alternate;Yi(lo,lo.current&1),Yi(ec,w),dd===null&&(E===null||i_.current!==null||E.memoizedState!==null)&&(dd=w)}function aB(w){if(w.tag===22){if(Yi(lo,lo.current),Yi(ec,w),dd===null){var E=w.alternate;E!==null&&E.memoizedState!==null&&(dd=w)}}else Im()}function Im(){Yi(lo,lo.current),Yi(ec,ec.current)}function Rf(w){Dt(ec),dd===w&&(dd=null),Dt(lo)}var lo=Lt(0);function z5(w){for(var E=w;E!==null;){if(E.tag===13){var D=E.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||D.data==="$?"||D.data==="$!"))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if((E.flags&128)!==0)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===w)break;for(;E.sibling===null;){if(E.return===null||E.return===w)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var Uye=typeof AbortController<"u"?AbortController:function(){var w=[],E=this.signal={aborted:!1,addEventListener:function(D,z){w.push(z)}};this.abort=function(){E.aborted=!0,w.forEach(function(D){return D()})}},Yye=t.unstable_scheduleCallback,Xye=t.unstable_NormalPriority,uo={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function B7(){return{controller:new Uye,data:new Map,refCount:0}}function Zx(w){w.refCount--,w.refCount===0&&Yye(Xye,function(){w.controller.abort()})}var Kx=null,H7=0,s_=0,n_=null;function Wye(w,E){if(Kx===null){var D=Kx=[];H7=0,s_=KD(),n_={status:"pending",value:void 0,then:function(z){D.push(z)}}}return H7++,E.then(lB,lB),E}function lB(){if(--H7===0&&Kx!==null){n_!==null&&(n_.status="fulfilled");var w=Kx;Kx=null,s_=0,n_=null;for(var E=0;E<w.length;E++)(0,w[E])()}}function Zye(w,E){var D=[],z={status:"pending",value:null,reason:null,then:function(Z){D.push(Z)}};return w.then(function(){z.status="fulfilled",z.value=E;for(var Z=0;Z<D.length;Z++)(0,D[Z])(E)},function(Z){for(z.status="rejected",z.reason=Z,Z=0;Z<D.length;Z++)(0,D[Z])(void 0)}),z}var uB=se.S;se.S=function(w,E){typeof E=="object"&&E!==null&&typeof E.then=="function"&&Wye(w,E),uB!==null&&uB(w,E)};var c1=Lt(null);function U7(){var w=c1.current;return w!==null?w:$n.pooledCache}function q5(w,E){E===null?Yi(c1,c1.current):Yi(c1,E.pool)}function cB(){var w=U7();return w===null?null:{parent:uo._currentValue,pool:w}}var Mm=0,rs=null,yn=null,Hr=null,V5=!1,r_=!1,h1=!1,G5=0,Jx=0,o_=null,Kye=0;function $r(){throw Error(s(321))}function Y7(w,E){if(E===null)return!1;for(var D=0;D<E.length&&D<w.length;D++)if(!$e(w[D],E[D]))return!1;return!0}function X7(w,E,D,z,Z,ie){return Mm=ie,rs=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,se.H=w===null||w.memoizedState===null?d1:Am,h1=!1,ie=D(z,Z),h1=!1,r_&&(ie=dB(E,D,z,Z)),hB(w),ie}function hB(w){se.H=fd;var E=yn!==null&&yn.next!==null;if(Mm=0,Hr=yn=rs=null,V5=!1,Jx=0,o_=null,E)throw Error(s(300));w===null||To||(w=w.dependencies,w!==null&&K5(w)&&(To=!0))}function dB(w,E,D,z){rs=w;var Z=0;do{if(r_&&(o_=null),Jx=0,r_=!1,25<=Z)throw Error(s(301));if(Z+=1,Hr=yn=null,w.updateQueue!=null){var ie=w.updateQueue;ie.lastEffect=null,ie.events=null,ie.stores=null,ie.memoCache!=null&&(ie.memoCache.index=0)}se.H=f1,ie=E(D,z)}while(r_);return ie}function Jye(){var w=se.H,E=w.useState()[0];return E=typeof E.then=="function"?Qx(E):E,w=w.useState()[0],(yn!==null?yn.memoizedState:null)!==w&&(rs.flags|=1024),E}function W7(){var w=G5!==0;return G5=0,w}function Z7(w,E,D){E.updateQueue=w.updateQueue,E.flags&=-2053,w.lanes&=~D}function K7(w){if(V5){for(w=w.memoizedState;w!==null;){var E=w.queue;E!==null&&(E.pending=null),w=w.next}V5=!1}Mm=0,Hr=yn=rs=null,r_=!1,Jx=G5=0,o_=null}function Dl(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?rs.memoizedState=Hr=w:Hr=Hr.next=w,Hr}function Ur(){if(yn===null){var w=rs.alternate;w=w!==null?w.memoizedState:null}else w=yn.next;var E=Hr===null?rs.memoizedState:Hr.next;if(E!==null)Hr=E,yn=w;else{if(w===null)throw rs.alternate===null?Error(s(467)):Error(s(310));yn=w,w={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Hr===null?rs.memoizedState=Hr=w:Hr=Hr.next=w}return Hr}var j5;j5=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Qx(w){var E=Jx;return Jx+=1,o_===null&&(o_=[]),w=tB(o_,w,E),E=rs,(Hr===null?E.memoizedState:Hr.next)===null&&(E=E.alternate,se.H=E===null||E.memoizedState===null?d1:Am),w}function B5(w){if(w!==null&&typeof w=="object"){if(typeof w.then=="function")return Qx(w);if(w.$$typeof===S)return Ia(w)}throw Error(s(438,String(w)))}function J7(w){var E=null,D=rs.updateQueue;if(D!==null&&(E=D.memoCache),E==null){var z=rs.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(E={data:z.data.map(function(Z){return Z.slice()}),index:0})))}if(E==null&&(E={data:[],index:0}),D===null&&(D=j5(),rs.updateQueue=D),D.memoCache=E,D=E.data[E.index],D===void 0)for(D=E.data[E.index]=Array(w),z=0;z<w;z++)D[z]=V;return E.index++,D}function Lf(w,E){return typeof E=="function"?E(w):E}function H5(w){var E=Ur();return Q7(E,yn,w)}function Q7(w,E,D){var z=w.queue;if(z===null)throw Error(s(311));z.lastRenderedReducer=D;var Z=w.baseQueue,ie=z.pending;if(ie!==null){if(Z!==null){var _e=Z.next;Z.next=ie.next,ie.next=_e}E.baseQueue=Z=ie,z.pending=null}if(ie=w.baseState,Z===null)w.memoizedState=ie;else{E=Z.next;var Ae=_e=null,qe=null,We=E,yt=!1;do{var It=We.lane&-536870913;if(It!==We.lane?(Ts&It)===It:(Mm&It)===It){var at=We.revertLane;if(at===0)qe!==null&&(qe=qe.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),It===s_&&(yt=!0);else if((Mm&at)===at){We=We.next,at===s_&&(yt=!0);continue}else It={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},qe===null?(Ae=qe=It,_e=ie):qe=qe.next=It,rs.lanes|=at,zm|=at;It=We.action,h1&&D(ie,It),ie=We.hasEagerState?We.eagerState:D(ie,It)}else at={lane:It,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},qe===null?(Ae=qe=at,_e=ie):qe=qe.next=at,rs.lanes|=It,zm|=It;We=We.next}while(We!==null&&We!==E);if(qe===null?_e=ie:qe.next=Ae,!$e(ie,w.memoizedState)&&(To=!0,yt&&(D=n_,D!==null)))throw D;w.memoizedState=ie,w.baseState=_e,w.baseQueue=qe,z.lastRenderedState=ie}return Z===null&&(z.lanes=0),[w.memoizedState,z.dispatch]}function eD(w){var E=Ur(),D=E.queue;if(D===null)throw Error(s(311));D.lastRenderedReducer=w;var z=D.dispatch,Z=D.pending,ie=E.memoizedState;if(Z!==null){D.pending=null;var _e=Z=Z.next;do ie=w(ie,_e.action),_e=_e.next;while(_e!==Z);$e(ie,E.memoizedState)||(To=!0),E.memoizedState=ie,E.baseQueue===null&&(E.baseState=ie),D.lastRenderedState=ie}return[ie,z]}function fB(w,E,D){var z=rs,Z=Ur(),ie=Rs;if(ie){if(D===void 0)throw Error(s(407));D=D()}else D=E();var _e=!$e((yn||Z).memoizedState,D);if(_e&&(Z.memoizedState=D,To=!0),Z=Z.queue,sD(gB.bind(null,z,Z,w),[w]),Z.getSnapshot!==E||_e||Hr!==null&&Hr.memoizedState.tag&1){if(z.flags|=2048,a_(9,mB.bind(null,z,Z,D,E),{destroy:void 0},null),$n===null)throw Error(s(349));ie||(Mm&60)!==0||pB(z,E,D)}return D}function pB(w,E,D){w.flags|=16384,w={getSnapshot:E,value:D},E=rs.updateQueue,E===null?(E=j5(),rs.updateQueue=E,E.stores=[w]):(D=E.stores,D===null?E.stores=[w]:D.push(w))}function mB(w,E,D,z){E.value=D,E.getSnapshot=z,yB(E)&&vB(w)}function gB(w,E,D){return D(function(){yB(E)&&vB(w)})}function yB(w){var E=w.getSnapshot;w=w.value;try{var D=E();return!$e(w,D)}catch{return!0}}function vB(w){var E=Pm(w,2);E!==null&&sl(E,w,2)}function tD(w){var E=Dl();if(typeof w=="function"){var D=w;if(w=D(),h1){a(!0);try{D()}finally{a(!1)}}}return E.memoizedState=E.baseState=w,E.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lf,lastRenderedState:w},E}function _B(w,E,D,z){return w.baseState=D,Q7(w,yn,typeof z=="function"?z:Lf)}function Qye(w,E,D,z,Z){if(X5(w))throw Error(s(485));if(w=E.action,w!==null){var ie={payload:Z,action:w,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_e){ie.listeners.push(_e)}};se.T!==null?D(!0):ie.isTransition=!1,z(ie),D=E.pending,D===null?(ie.next=E.pending=ie,bB(E,ie)):(ie.next=D.next,E.pending=D.next=ie)}}function bB(w,E){var D=E.action,z=E.payload,Z=w.state;if(E.isTransition){var ie=se.T,_e={};se.T=_e;try{var Ae=D(Z,z),qe=se.S;qe!==null&&qe(_e,Ae),xB(w,E,Ae)}catch(We){iD(w,E,We)}finally{se.T=ie}}else try{ie=D(Z,z),xB(w,E,ie)}catch(We){iD(w,E,We)}}function xB(w,E,D){D!==null&&typeof D=="object"&&typeof D.then=="function"?D.then(function(z){wB(w,E,z)},function(z){return iD(w,E,z)}):wB(w,E,D)}function wB(w,E,D){E.status="fulfilled",E.value=D,SB(E),w.state=D,E=w.pending,E!==null&&(D=E.next,D===E?w.pending=null:(D=D.next,E.next=D,bB(w,D)))}function iD(w,E,D){var z=w.pending;if(w.pending=null,z!==null){z=z.next;do E.status="rejected",E.reason=D,SB(E),E=E.next;while(E!==z)}w.action=null}function SB(w){w=w.listeners;for(var E=0;E<w.length;E++)(0,w[E])()}function EB(w,E){return E}function CB(w,E){if(Rs){var D=$n.formState;if(D!==null){e:{var z=rs;if(Rs){if(ia){t:{for(var Z=ia,ie=hd;Z.nodeType!==8;){if(!ie){Z=null;break t}if(Z=nh(Z.nextSibling),Z===null){Z=null;break t}}ie=Z.data,Z=ie==="F!"||ie==="F"?Z:null}if(Z){ia=nh(Z.nextSibling),z=Z.data==="F!";break e}}l1(z)}z=!1}z&&(E=D[0])}}return D=Dl(),D.memoizedState=D.baseState=E,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:EB,lastRenderedState:E},D.queue=z,D=jB.bind(null,rs,z),z.dispatch=D,z=tD(!1),ie=lD.bind(null,rs,!1,z.queue),z=Dl(),Z={state:E,dispatch:null,action:w,pending:null},z.queue=Z,D=Qye.bind(null,rs,Z,ie,D),Z.dispatch=D,z.memoizedState=w,[E,D,!1]}function PB(w){var E=Ur();return TB(E,yn,w)}function TB(w,E,D){E=Q7(w,E,EB)[0],w=H5(Lf)[0],E=typeof E=="object"&&E!==null&&typeof E.then=="function"?Qx(E):E;var z=Ur(),Z=z.queue,ie=Z.dispatch;return D!==z.memoizedState&&(rs.flags|=2048,a_(9,eve.bind(null,Z,D),{destroy:void 0},null)),[E,ie,w]}function eve(w,E){w.action=E}function IB(w){var E=Ur(),D=yn;if(D!==null)return TB(E,D,w);Ur(),E=E.memoizedState,D=Ur();var z=D.queue.dispatch;return D.memoizedState=w,[E,z,!1]}function a_(w,E,D,z){return w={tag:w,create:E,inst:D,deps:z,next:null},E=rs.updateQueue,E===null&&(E=j5(),rs.updateQueue=E),D=E.lastEffect,D===null?E.lastEffect=w.next=w:(z=D.next,D.next=w,w.next=z,E.lastEffect=w),w}function MB(){return Ur().memoizedState}function U5(w,E,D,z){var Z=Dl();rs.flags|=w,Z.memoizedState=a_(1|E,D,{destroy:void 0},z===void 0?null:z)}function Y5(w,E,D,z){var Z=Ur();z=z===void 0?null:z;var ie=Z.memoizedState.inst;yn!==null&&z!==null&&Y7(z,yn.memoizedState.deps)?Z.memoizedState=a_(E,D,ie,z):(rs.flags|=w,Z.memoizedState=a_(1|E,D,ie,z))}function AB(w,E){U5(8390656,8,w,E)}function sD(w,E){Y5(2048,8,w,E)}function DB(w,E){return Y5(4,2,w,E)}function kB(w,E){return Y5(4,4,w,E)}function NB(w,E){if(typeof E=="function"){w=w();var D=E(w);return function(){typeof D=="function"?D():E(null)}}if(E!=null)return w=w(),E.current=w,function(){E.current=null}}function $B(w,E,D){D=D!=null?D.concat([w]):null,Y5(4,4,NB.bind(null,E,w),D)}function nD(){}function OB(w,E){var D=Ur();E=E===void 0?null:E;var z=D.memoizedState;return E!==null&&Y7(E,z[1])?z[0]:(D.memoizedState=[w,E],w)}function RB(w,E){var D=Ur();E=E===void 0?null:E;var z=D.memoizedState;if(E!==null&&Y7(E,z[1]))return z[0];if(z=w(),h1){a(!0);try{w()}finally{a(!1)}}return D.memoizedState=[z,E],z}function rD(w,E,D){return D===void 0||(Mm&1073741824)!==0?w.memoizedState=E:(w.memoizedState=D,w=FH(),rs.lanes|=w,zm|=w,D)}function LB(w,E,D,z){return $e(D,E)?D:i_.current!==null?(w=rD(w,D,z),$e(w,E)||(To=!0),w):(Mm&42)===0?(To=!0,w.memoizedState=D):(w=FH(),rs.lanes|=w,zm|=w,E)}function FB(w,E,D,z,Z){var ie=ot.p;ot.p=ie!==0&&8>ie?ie:8;var _e=se.T,Ae={};se.T=Ae,lD(w,!1,E,D);try{var qe=Z(),We=se.S;if(We!==null&&We(Ae,qe),qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var yt=Zye(qe,z);ew(w,E,yt,ou(w))}else ew(w,E,z,ou(w))}catch(It){ew(w,E,{then:function(){},status:"rejected",reason:It},ou())}finally{ot.p=ie,se.T=_e}}function tve(){}function oD(w,E,D,z){if(w.tag!==5)throw Error(s(476));var Z=zB(w).queue;FB(w,Z,E,ct,D===null?tve:function(){return qB(w),D(z)})}function zB(w){var E=w.memoizedState;if(E!==null)return E;E={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lf,lastRenderedState:ct},next:null};var D={};return E.next={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lf,lastRenderedState:D},next:null},w.memoizedState=E,w=w.alternate,w!==null&&(w.memoizedState=E),E}function qB(w){var E=zB(w).next.queue;ew(w,E,{},ou())}function aD(){return Ia(bw)}function VB(){return Ur().memoizedState}function GB(){return Ur().memoizedState}function ive(w){for(var E=w.return;E!==null;){switch(E.tag){case 24:case 3:var D=ou();w=Nm(D);var z=$m(E,w,D);z!==null&&(sl(z,E,D),sw(z,E,D)),E={cache:B7()},w.payload=E;return}E=E.return}}function sve(w,E,D){var z=ou();D={lane:z,revertLane:0,action:D,hasEagerState:!1,eagerState:null,next:null},X5(w)?BB(E,D):(D=L7(w,E,D,z),D!==null&&(sl(D,w,z),HB(D,E,z)))}function jB(w,E,D){var z=ou();ew(w,E,D,z)}function ew(w,E,D,z){var Z={lane:z,revertLane:0,action:D,hasEagerState:!1,eagerState:null,next:null};if(X5(w))BB(E,Z);else{var ie=w.alternate;if(w.lanes===0&&(ie===null||ie.lanes===0)&&(ie=E.lastRenderedReducer,ie!==null))try{var _e=E.lastRenderedState,Ae=ie(_e,D);if(Z.hasEagerState=!0,Z.eagerState=Ae,$e(Ae,_e))return D5(w,E,Z,0),$n===null&&A5(),!1}catch{}finally{}if(D=L7(w,E,Z,z),D!==null)return sl(D,w,z),HB(D,E,z),!0}return!1}function lD(w,E,D,z){if(z={lane:2,revertLane:KD(),action:z,hasEagerState:!1,eagerState:null,next:null},X5(w)){if(E)throw Error(s(479))}else E=L7(w,D,z,2),E!==null&&sl(E,w,2)}function X5(w){var E=w.alternate;return w===rs||E!==null&&E===rs}function BB(w,E){r_=V5=!0;var D=w.pending;D===null?E.next=E:(E.next=D.next,D.next=E),w.pending=E}function HB(w,E,D){if((D&4194176)!==0){var z=E.lanes;z&=w.pendingLanes,D|=z,E.lanes=D,Ce(w,D)}}var fd={readContext:Ia,use:B5,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useLayoutEffect:$r,useInsertionEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useSyncExternalStore:$r,useId:$r};fd.useCacheRefresh=$r,fd.useMemoCache=$r,fd.useHostTransitionStatus=$r,fd.useFormState=$r,fd.useActionState=$r,fd.useOptimistic=$r;var d1={readContext:Ia,use:B5,useCallback:function(w,E){return Dl().memoizedState=[w,E===void 0?null:E],w},useContext:Ia,useEffect:AB,useImperativeHandle:function(w,E,D){D=D!=null?D.concat([w]):null,U5(4194308,4,NB.bind(null,E,w),D)},useLayoutEffect:function(w,E){return U5(4194308,4,w,E)},useInsertionEffect:function(w,E){U5(4,2,w,E)},useMemo:function(w,E){var D=Dl();E=E===void 0?null:E;var z=w();if(h1){a(!0);try{w()}finally{a(!1)}}return D.memoizedState=[z,E],z},useReducer:function(w,E,D){var z=Dl();if(D!==void 0){var Z=D(E);if(h1){a(!0);try{D(E)}finally{a(!1)}}}else Z=E;return z.memoizedState=z.baseState=Z,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:Z},z.queue=w,w=w.dispatch=sve.bind(null,rs,w),[z.memoizedState,w]},useRef:function(w){var E=Dl();return w={current:w},E.memoizedState=w},useState:function(w){w=tD(w);var E=w.queue,D=jB.bind(null,rs,E);return E.dispatch=D,[w.memoizedState,D]},useDebugValue:nD,useDeferredValue:function(w,E){var D=Dl();return rD(D,w,E)},useTransition:function(){var w=tD(!1);return w=FB.bind(null,rs,w.queue,!0,!1),Dl().memoizedState=w,[!1,w]},useSyncExternalStore:function(w,E,D){var z=rs,Z=Dl();if(Rs){if(D===void 0)throw Error(s(407));D=D()}else{if(D=E(),$n===null)throw Error(s(349));(Ts&60)!==0||pB(z,E,D)}Z.memoizedState=D;var ie={value:D,getSnapshot:E};return Z.queue=ie,AB(gB.bind(null,z,ie,w),[w]),z.flags|=2048,a_(9,mB.bind(null,z,ie,D,E),{destroy:void 0},null),D},useId:function(){var w=Dl(),E=$n.identifierPrefix;if(Rs){var D=Of,z=$f;D=(z&~(1<<32-u(z)-1)).toString(32)+D,E=":"+E+"R"+D,D=G5++,0<D&&(E+="H"+D.toString(32)),E+=":"}else D=Kye++,E=":"+E+"r"+D.toString(32)+":";return w.memoizedState=E},useCacheRefresh:function(){return Dl().memoizedState=ive.bind(null,rs)}};d1.useMemoCache=J7,d1.useHostTransitionStatus=aD,d1.useFormState=CB,d1.useActionState=CB,d1.useOptimistic=function(w){var E=Dl();E.memoizedState=E.baseState=w;var D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return E.queue=D,E=lD.bind(null,rs,!0,D),D.dispatch=E,[w,E]};var Am={readContext:Ia,use:B5,useCallback:OB,useContext:Ia,useEffect:sD,useImperativeHandle:$B,useInsertionEffect:DB,useLayoutEffect:kB,useMemo:RB,useReducer:H5,useRef:MB,useState:function(){return H5(Lf)},useDebugValue:nD,useDeferredValue:function(w,E){var D=Ur();return LB(D,yn.memoizedState,w,E)},useTransition:function(){var w=H5(Lf)[0],E=Ur().memoizedState;return[typeof w=="boolean"?w:Qx(w),E]},useSyncExternalStore:fB,useId:VB};Am.useCacheRefresh=GB,Am.useMemoCache=J7,Am.useHostTransitionStatus=aD,Am.useFormState=PB,Am.useActionState=PB,Am.useOptimistic=function(w,E){var D=Ur();return _B(D,yn,w,E)};var f1={readContext:Ia,use:B5,useCallback:OB,useContext:Ia,useEffect:sD,useImperativeHandle:$B,useInsertionEffect:DB,useLayoutEffect:kB,useMemo:RB,useReducer:eD,useRef:MB,useState:function(){return eD(Lf)},useDebugValue:nD,useDeferredValue:function(w,E){var D=Ur();return yn===null?rD(D,w,E):LB(D,yn.memoizedState,w,E)},useTransition:function(){var w=eD(Lf)[0],E=Ur().memoizedState;return[typeof w=="boolean"?w:Qx(w),E]},useSyncExternalStore:fB,useId:VB};f1.useCacheRefresh=GB,f1.useMemoCache=J7,f1.useHostTransitionStatus=aD,f1.useFormState=IB,f1.useActionState=IB,f1.useOptimistic=function(w,E){var D=Ur();return yn!==null?_B(D,yn,w,E):(D.baseState=w,[w,D.queue.dispatch])};function uD(w,E,D,z){E=w.memoizedState,D=D(z,E),D=D==null?E:oe({},E,D),w.memoizedState=D,w.lanes===0&&(w.updateQueue.baseState=D)}var cD={isMounted:function(w){return(w=w._reactInternals)?Re(w)===w:!1},enqueueSetState:function(w,E,D){w=w._reactInternals;var z=ou(),Z=Nm(z);Z.payload=E,D!=null&&(Z.callback=D),E=$m(w,Z,z),E!==null&&(sl(E,w,z),sw(E,w,z))},enqueueReplaceState:function(w,E,D){w=w._reactInternals;var z=ou(),Z=Nm(z);Z.tag=1,Z.payload=E,D!=null&&(Z.callback=D),E=$m(w,Z,z),E!==null&&(sl(E,w,z),sw(E,w,z))},enqueueForceUpdate:function(w,E){w=w._reactInternals;var D=ou(),z=Nm(D);z.tag=2,E!=null&&(z.callback=E),E=$m(w,z,D),E!==null&&(sl(E,w,D),sw(E,w,D))}};function UB(w,E,D,z,Z,ie,_e){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(z,ie,_e):E.prototype&&E.prototype.isPureReactComponent?!je(D,z)||!je(Z,ie):!0}function YB(w,E,D,z){w=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(D,z),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(D,z),E.state!==w&&cD.enqueueReplaceState(E,E.state,null)}function p1(w,E){var D=E;if("ref"in E){D={};for(var z in E)z!=="ref"&&(D[z]=E[z])}if(w=w.defaultProps){D===E&&(D=oe({},D));for(var Z in w)D[Z]===void 0&&(D[Z]=w[Z])}return D}var W5=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function XB(w){W5(w)}function WB(w){console.error(w)}function ZB(w){W5(w)}function Z5(w,E){try{var D=w.onUncaughtError;D(E.value,{componentStack:E.stack})}catch(z){setTimeout(function(){throw z})}}function KB(w,E,D){try{var z=w.onCaughtError;z(D.value,{componentStack:D.stack,errorBoundary:E.tag===1?E.stateNode:null})}catch(Z){setTimeout(function(){throw Z})}}function hD(w,E,D){return D=Nm(D),D.tag=3,D.payload={element:null},D.callback=function(){Z5(w,E)},D}function JB(w){return w=Nm(w),w.tag=3,w}function QB(w,E,D,z){var Z=D.type.getDerivedStateFromError;if(typeof Z=="function"){var ie=z.value;w.payload=function(){return Z(ie)},w.callback=function(){KB(E,D,z)}}var _e=D.stateNode;_e!==null&&typeof _e.componentDidCatch=="function"&&(w.callback=function(){KB(E,D,z),typeof Z!="function"&&(qm===null?qm=new Set([this]):qm.add(this));var Ae=z.stack;this.componentDidCatch(z.value,{componentStack:Ae!==null?Ae:""})})}function nve(w,E,D,z,Z){if(D.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(E=D.alternate,E!==null&&iw(E,D,Z,!0),D=ec.current,D!==null){switch(D.tag){case 13:return dd===null?UD():D.alternate===null&&Er===0&&(Er=3),D.flags&=-257,D.flags|=65536,D.lanes=Z,z===V7?D.flags|=16384:(E=D.updateQueue,E===null?D.updateQueue=new Set([z]):E.add(z),XD(w,z,Z)),!1;case 22:return D.flags|=65536,z===V7?D.flags|=16384:(E=D.updateQueue,E===null?(E={transitions:null,markerInstances:null,retryQueue:new Set([z])},D.updateQueue=E):(D=E.retryQueue,D===null?E.retryQueue=new Set([z]):D.add(z)),XD(w,z,Z)),!1}throw Error(s(435,D.tag))}return XD(w,z,Z),UD(),!1}if(Rs)return E=ec.current,E!==null?((E.flags&65536)===0&&(E.flags|=256),E.flags|=65536,E.lanes=Z,z!==q7&&(w=Error(s(422),{cause:z}),Hx(Ku(w,D)))):(z!==q7&&(E=Error(s(423),{cause:z}),Hx(Ku(E,D))),w=w.current.alternate,w.flags|=65536,Z&=-Z,w.lanes|=Z,z=Ku(z,D),Z=hD(w.stateNode,z,Z),PD(w,Z),Er!==4&&(Er=2)),!1;var ie=Error(s(520),{cause:z});if(ie=Ku(ie,D),hw===null?hw=[ie]:hw.push(ie),Er!==4&&(Er=2),E===null)return!0;z=Ku(z,D),D=E;do{switch(D.tag){case 3:return D.flags|=65536,w=Z&-Z,D.lanes|=w,w=hD(D.stateNode,z,w),PD(D,w),!1;case 1:if(E=D.type,ie=D.stateNode,(D.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(qm===null||!qm.has(ie))))return D.flags|=65536,Z&=-Z,D.lanes|=Z,Z=JB(Z),QB(Z,w,D,z),PD(D,Z),!1}D=D.return}while(D!==null);return!1}var eH=Error(s(461)),To=!1;function sa(w,E,D,z){E.child=w===null?rB(E,null,D,z):u1(E,w.child,D,z)}function tH(w,E,D,z,Z){D=D.render;var ie=E.ref;if("ref"in z){var _e={};for(var Ae in z)Ae!=="ref"&&(_e[Ae]=z[Ae])}else _e=z;return g1(E),z=X7(w,E,D,_e,ie,Z),Ae=W7(),w!==null&&!To?(Z7(w,E,Z),Ff(w,E,Z)):(Rs&&Ae&&F7(E),E.flags|=1,sa(w,E,z,Z),E.child)}function iH(w,E,D,z,Z){if(w===null){var ie=D.type;return typeof ie=="function"&&!$D(ie)&&ie.defaultProps===void 0&&D.compare===null?(E.tag=15,E.type=ie,sH(w,E,ie,z,Z)):(w=tP(D.type,null,z,E,E.mode,Z),w.ref=E.ref,w.return=E,E.child=w)}if(ie=w.child,!bD(w,Z)){var _e=ie.memoizedProps;if(D=D.compare,D=D!==null?D:je,D(_e,z)&&w.ref===E.ref)return Ff(w,E,Z)}return E.flags|=1,w=Fm(ie,z),w.ref=E.ref,w.return=E,E.child=w}function sH(w,E,D,z,Z){if(w!==null){var ie=w.memoizedProps;if(je(ie,z)&&w.ref===E.ref)if(To=!1,E.pendingProps=z=ie,bD(w,Z))(w.flags&131072)!==0&&(To=!0);else return E.lanes=w.lanes,Ff(w,E,Z)}return dD(w,E,D,z,Z)}function nH(w,E,D){var z=E.pendingProps,Z=z.children,ie=(E.stateNode._pendingVisibility&2)!==0,_e=w!==null?w.memoizedState:null;if(tw(w,E),z.mode==="hidden"||ie){if((E.flags&128)!==0){if(z=_e!==null?_e.baseLanes|D:D,w!==null){for(Z=E.child=w.child,ie=0;Z!==null;)ie=ie|Z.lanes|Z.childLanes,Z=Z.sibling;E.childLanes=ie&~z}else E.childLanes=0,E.child=null;return rH(w,E,z,D)}if((D&536870912)!==0)E.memoizedState={baseLanes:0,cachePool:null},w!==null&&q5(E,_e!==null?_e.cachePool:null),_e!==null?oB(E,_e):G7(),aB(E);else return E.lanes=E.childLanes=536870912,rH(w,E,_e!==null?_e.baseLanes|D:D,D)}else _e!==null?(q5(E,_e.cachePool),oB(E,_e),Im(),E.memoizedState=null):(w!==null&&q5(E,null),G7(),Im());return sa(w,E,Z,D),E.child}function rH(w,E,D,z){var Z=U7();return Z=Z===null?null:{parent:uo._currentValue,pool:Z},E.memoizedState={baseLanes:D,cachePool:Z},w!==null&&q5(E,null),G7(),aB(E),w!==null&&iw(w,E,z,!0),null}function tw(w,E){var D=E.ref;if(D===null)w!==null&&w.ref!==null&&(E.flags|=2097664);else{if(typeof D!="function"&&typeof D!="object")throw Error(s(284));(w===null||w.ref!==D)&&(E.flags|=2097664)}}function dD(w,E,D,z,Z){return g1(E),D=X7(w,E,D,z,void 0,Z),z=W7(),w!==null&&!To?(Z7(w,E,Z),Ff(w,E,Z)):(Rs&&z&&F7(E),E.flags|=1,sa(w,E,D,Z),E.child)}function oH(w,E,D,z,Z,ie){return g1(E),E.updateQueue=null,D=dB(E,z,D,Z),hB(w),z=W7(),w!==null&&!To?(Z7(w,E,ie),Ff(w,E,ie)):(Rs&&z&&F7(E),E.flags|=1,sa(w,E,D,ie),E.child)}function aH(w,E,D,z,Z){if(g1(E),E.stateNode===null){var ie=Jv,_e=D.contextType;typeof _e=="object"&&_e!==null&&(ie=Ia(_e)),ie=new D(z,ie),E.memoizedState=ie.state!==null&&ie.state!==void 0?ie.state:null,ie.updater=cD,E.stateNode=ie,ie._reactInternals=E,ie=E.stateNode,ie.props=z,ie.state=E.memoizedState,ie.refs={},ED(E),_e=D.contextType,ie.context=typeof _e=="object"&&_e!==null?Ia(_e):Jv,ie.state=E.memoizedState,_e=D.getDerivedStateFromProps,typeof _e=="function"&&(uD(E,D,_e,z),ie.state=E.memoizedState),typeof D.getDerivedStateFromProps=="function"||typeof ie.getSnapshotBeforeUpdate=="function"||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(_e=ie.state,typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount(),_e!==ie.state&&cD.enqueueReplaceState(ie,ie.state,null),rw(E,z,ie,Z),nw(),ie.state=E.memoizedState),typeof ie.componentDidMount=="function"&&(E.flags|=4194308),z=!0}else if(w===null){ie=E.stateNode;var Ae=E.memoizedProps,qe=p1(D,Ae);ie.props=qe;var We=ie.context,yt=D.contextType;_e=Jv,typeof yt=="object"&&yt!==null&&(_e=Ia(yt));var It=D.getDerivedStateFromProps;yt=typeof It=="function"||typeof ie.getSnapshotBeforeUpdate=="function",Ae=E.pendingProps!==Ae,yt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Ae||We!==_e)&&YB(E,ie,z,_e),km=!1;var at=E.memoizedState;ie.state=at,rw(E,z,ie,Z),nw(),We=E.memoizedState,Ae||at!==We||km?(typeof It=="function"&&(uD(E,D,It,z),We=E.memoizedState),(qe=km||UB(E,D,qe,z,at,We,_e))?(yt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(E.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=z,E.memoizedState=We),ie.props=z,ie.state=We,ie.context=_e,z=qe):(typeof ie.componentDidMount=="function"&&(E.flags|=4194308),z=!1)}else{ie=E.stateNode,CD(w,E),_e=E.memoizedProps,yt=p1(D,_e),ie.props=yt,It=E.pendingProps,at=ie.context,We=D.contextType,qe=Jv,typeof We=="object"&&We!==null&&(qe=Ia(We)),Ae=D.getDerivedStateFromProps,(We=typeof Ae=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(_e!==It||at!==qe)&&YB(E,ie,z,qe),km=!1,at=E.memoizedState,ie.state=at,rw(E,z,ie,Z),nw();var gt=E.memoizedState;_e!==It||at!==gt||km||w!==null&&w.dependencies!==null&&K5(w.dependencies)?(typeof Ae=="function"&&(uD(E,D,Ae,z),gt=E.memoizedState),(yt=km||UB(E,D,yt,z,at,gt,qe)||w!==null&&w.dependencies!==null&&K5(w.dependencies))?(We||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(z,gt,qe),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(z,gt,qe)),typeof ie.componentDidUpdate=="function"&&(E.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof ie.componentDidUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=1024),E.memoizedProps=z,E.memoizedState=gt),ie.props=z,ie.state=gt,ie.context=qe,z=yt):(typeof ie.componentDidUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||_e===w.memoizedProps&&at===w.memoizedState||(E.flags|=1024),z=!1)}return ie=z,tw(w,E),z=(E.flags&128)!==0,ie||z?(ie=E.stateNode,D=z&&typeof D.getDerivedStateFromError!="function"?null:ie.render(),E.flags|=1,w!==null&&z?(E.child=u1(E,w.child,null,Z),E.child=u1(E,null,D,Z)):sa(w,E,D,Z),E.memoizedState=ie.state,w=E.child):w=Ff(w,E,Z),w}function lH(w,E,D,z){return Bx(),E.flags|=256,sa(w,E,D,z),E.child}var fD={dehydrated:null,treeContext:null,retryLane:0};function pD(w){return{baseLanes:w,cachePool:cB()}}function mD(w,E,D){return w=w!==null?w.childLanes&~D:0,E&&(w|=nc),w}function uH(w,E,D){var z=E.pendingProps,Z=!1,ie=(E.flags&128)!==0,_e;if((_e=ie)||(_e=w!==null&&w.memoizedState===null?!1:(lo.current&2)!==0),_e&&(Z=!0,E.flags&=-129),_e=(E.flags&32)!==0,E.flags&=-33,w===null){if(Rs){if(Z?Tm(E):Im(),Rs){var Ae=ia,qe;if(qe=Ae){e:{for(qe=Ae,Ae=hd;qe.nodeType!==8;){if(!Ae){Ae=null;break e}if(qe=nh(qe.nextSibling),qe===null){Ae=null;break e}}Ae=qe}Ae!==null?(E.memoizedState={dehydrated:Ae,treeContext:o1!==null?{id:$f,overflow:Of}:null,retryLane:536870912},qe=sc(18,null,null,0),qe.stateNode=Ae,qe.return=E,E.child=qe,il=E,ia=null,qe=!0):qe=!1}qe||l1(E)}if(Ae=E.memoizedState,Ae!==null&&(Ae=Ae.dehydrated,Ae!==null))return Ae.data==="$!"?E.lanes=16:E.lanes=536870912,null;Rf(E)}return Ae=z.children,z=z.fallback,Z?(Im(),Z=E.mode,Ae=yD({mode:"hidden",children:Ae},Z),z=v1(z,Z,D,null),Ae.return=E,z.return=E,Ae.sibling=z,E.child=Ae,Z=E.child,Z.memoizedState=pD(D),Z.childLanes=mD(w,_e,D),E.memoizedState=fD,z):(Tm(E),gD(E,Ae))}if(qe=w.memoizedState,qe!==null&&(Ae=qe.dehydrated,Ae!==null)){if(ie)E.flags&256?(Tm(E),E.flags&=-257,E=vD(w,E,D)):E.memoizedState!==null?(Im(),E.child=w.child,E.flags|=128,E=null):(Im(),Z=z.fallback,Ae=E.mode,z=yD({mode:"visible",children:z.children},Ae),Z=v1(Z,Ae,D,null),Z.flags|=2,z.return=E,Z.return=E,z.sibling=Z,E.child=z,u1(E,w.child,null,D),z=E.child,z.memoizedState=pD(D),z.childLanes=mD(w,_e,D),E.memoizedState=fD,E=Z);else if(Tm(E),Ae.data==="$!"){if(_e=Ae.nextSibling&&Ae.nextSibling.dataset,_e)var We=_e.dgst;_e=We,z=Error(s(419)),z.stack="",z.digest=_e,Hx({value:z,source:null,stack:null}),E=vD(w,E,D)}else if(To||iw(w,E,D,!1),_e=(D&w.childLanes)!==0,To||_e){if(_e=$n,_e!==null){if(z=D&-D,(z&42)!==0)z=1;else switch(z){case 2:z=1;break;case 8:z=4;break;case 32:z=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:z=64;break;case 268435456:z=134217728;break;default:z=0}if(z=(z&(_e.suspendedLanes|D))!==0?0:z,z!==0&&z!==qe.retryLane)throw qe.retryLane=z,Pm(w,z),sl(_e,w,z),eH}Ae.data==="$?"||UD(),E=vD(w,E,D)}else Ae.data==="$?"?(E.flags|=128,E.child=w.child,E=_ve.bind(null,w),Ae._reactRetry=E,E=null):(w=qe.treeContext,ia=nh(Ae.nextSibling),il=E,Rs=!0,ih=null,hd=!1,w!==null&&(Ju[Qu++]=$f,Ju[Qu++]=Of,Ju[Qu++]=o1,$f=w.id,Of=w.overflow,o1=E),E=gD(E,z.children),E.flags|=4096);return E}return Z?(Im(),Z=z.fallback,Ae=E.mode,qe=w.child,We=qe.sibling,z=Fm(qe,{mode:"hidden",children:z.children}),z.subtreeFlags=qe.subtreeFlags&31457280,We!==null?Z=Fm(We,Z):(Z=v1(Z,Ae,D,null),Z.flags|=2),Z.return=E,z.return=E,z.sibling=Z,E.child=z,z=Z,Z=E.child,Ae=w.child.memoizedState,Ae===null?Ae=pD(D):(qe=Ae.cachePool,qe!==null?(We=uo._currentValue,qe=qe.parent!==We?{parent:We,pool:We}:qe):qe=cB(),Ae={baseLanes:Ae.baseLanes|D,cachePool:qe}),Z.memoizedState=Ae,Z.childLanes=mD(w,_e,D),E.memoizedState=fD,z):(Tm(E),D=w.child,w=D.sibling,D=Fm(D,{mode:"visible",children:z.children}),D.return=E,D.sibling=null,w!==null&&(_e=E.deletions,_e===null?(E.deletions=[w],E.flags|=16):_e.push(w)),E.child=D,E.memoizedState=null,D)}function gD(w,E){return E=yD({mode:"visible",children:E},w.mode),E.return=w,w.child=E}function yD(w,E){return OH(w,E,0,null)}function vD(w,E,D){return u1(E,w.child,null,D),w=gD(E,E.pendingProps.children),w.flags|=2,E.memoizedState=null,w}function cH(w,E,D){w.lanes|=E;var z=w.alternate;z!==null&&(z.lanes|=E),wD(w.return,E,D)}function _D(w,E,D,z,Z){var ie=w.memoizedState;ie===null?w.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:z,tail:D,tailMode:Z}:(ie.isBackwards=E,ie.rendering=null,ie.renderingStartTime=0,ie.last=z,ie.tail=D,ie.tailMode=Z)}function hH(w,E,D){var z=E.pendingProps,Z=z.revealOrder,ie=z.tail;if(sa(w,E,z.children,D),z=lo.current,(z&2)!==0)z=z&1|2,E.flags|=128;else{if(w!==null&&(w.flags&128)!==0)e:for(w=E.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&cH(w,D,E);else if(w.tag===19)cH(w,D,E);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===E)break e;for(;w.sibling===null;){if(w.return===null||w.return===E)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}z&=1}switch(Yi(lo,z),Z){case"forwards":for(D=E.child,Z=null;D!==null;)w=D.alternate,w!==null&&z5(w)===null&&(Z=D),D=D.sibling;D=Z,D===null?(Z=E.child,E.child=null):(Z=D.sibling,D.sibling=null),_D(E,!1,Z,D,ie);break;case"backwards":for(D=null,Z=E.child,E.child=null;Z!==null;){if(w=Z.alternate,w!==null&&z5(w)===null){E.child=Z;break}w=Z.sibling,Z.sibling=D,D=Z,Z=w}_D(E,!0,D,null,ie);break;case"together":_D(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function Ff(w,E,D){if(w!==null&&(E.dependencies=w.dependencies),zm|=E.lanes,(D&E.childLanes)===0)if(w!==null){if(iw(w,E,D,!1),(D&E.childLanes)===0)return null}else return null;if(w!==null&&E.child!==w.child)throw Error(s(153));if(E.child!==null){for(w=E.child,D=Fm(w,w.pendingProps),E.child=D,D.return=E;w.sibling!==null;)w=w.sibling,D=D.sibling=Fm(w,w.pendingProps),D.return=E;D.sibling=null}return E.child}function bD(w,E){return(w.lanes&E)!==0?!0:(w=w.dependencies,!!(w!==null&&K5(w)))}function rve(w,E,D){switch(E.tag){case 3:oo(E,E.stateNode.containerInfo),Dm(E,uo,w.memoizedState.cache),Bx();break;case 27:case 5:ye(E);break;case 4:oo(E,E.stateNode.containerInfo);break;case 10:Dm(E,E.type,E.memoizedProps.value);break;case 13:var z=E.memoizedState;if(z!==null)return z.dehydrated!==null?(Tm(E),E.flags|=128,null):(D&E.child.childLanes)!==0?uH(w,E,D):(Tm(E),w=Ff(w,E,D),w!==null?w.sibling:null);Tm(E);break;case 19:var Z=(w.flags&128)!==0;if(z=(D&E.childLanes)!==0,z||(iw(w,E,D,!1),z=(D&E.childLanes)!==0),Z){if(z)return hH(w,E,D);E.flags|=128}if(Z=E.memoizedState,Z!==null&&(Z.rendering=null,Z.tail=null,Z.lastEffect=null),Yi(lo,lo.current),z)break;return null;case 22:case 23:return E.lanes=0,nH(w,E,D);case 24:Dm(E,uo,w.memoizedState.cache)}return Ff(w,E,D)}function dH(w,E,D){if(w!==null)if(w.memoizedProps!==E.pendingProps)To=!0;else{if(!bD(w,D)&&(E.flags&128)===0)return To=!1,rve(w,E,D);To=(w.flags&131072)!==0}else To=!1,Rs&&(E.flags&1048576)!==0&&Zj(E,$5,E.index);switch(E.lanes=0,E.tag){case 16:e:{w=E.pendingProps;var z=E.elementType,Z=z._init;if(z=Z(z._payload),E.type=z,typeof z=="function")$D(z)?(w=p1(z,w),E.tag=1,E=aH(null,E,z,w,D)):(E.tag=0,E=dD(null,E,z,w,D));else{if(z!=null){if(Z=z.$$typeof,Z===P){E.tag=11,E=tH(null,E,z,w,D);break e}else if(Z===$){E.tag=14,E=iH(null,E,z,w,D);break e}}throw E=re(z)||z,Error(s(306,E,""))}}return E;case 0:return dD(w,E,E.type,E.pendingProps,D);case 1:return z=E.type,Z=p1(z,E.pendingProps),aH(w,E,z,Z,D);case 3:e:{if(oo(E,E.stateNode.containerInfo),w===null)throw Error(s(387));var ie=E.pendingProps;Z=E.memoizedState,z=Z.element,CD(w,E),rw(E,ie,null,D);var _e=E.memoizedState;if(ie=_e.cache,Dm(E,uo,ie),ie!==Z.cache&&SD(E,[uo],D,!0),nw(),ie=_e.element,Z.isDehydrated)if(Z={element:ie,isDehydrated:!1,cache:_e.cache},E.updateQueue.baseState=Z,E.memoizedState=Z,E.flags&256){E=lH(w,E,ie,D);break e}else if(ie!==z){z=Ku(Error(s(424)),E),Hx(z),E=lH(w,E,ie,D);break e}else for(ia=nh(E.stateNode.containerInfo.firstChild),il=E,Rs=!0,ih=null,hd=!0,D=rB(E,null,ie,D),E.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(Bx(),ie===z){E=Ff(w,E,D);break e}sa(w,E,ie,D)}E=E.child}return E;case 26:return tw(w,E),w===null?(D=mU(E.type,null,E.pendingProps,null))?E.memoizedState=D:Rs||(D=E.type,w=E.pendingProps,z=fP(Us.current).createElement(D),z[et]=E,z[dt]=w,na(z,D,w),Kt(z),E.stateNode=z):E.memoizedState=mU(E.type,w.memoizedProps,E.pendingProps,w.memoizedState),null;case 27:return ye(E),w===null&&Rs&&(z=E.stateNode=dU(E.type,E.pendingProps,Us.current),il=E,hd=!0,ia=nh(z.firstChild)),z=E.pendingProps.children,w!==null||Rs?sa(w,E,z,D):E.child=u1(E,null,z,D),tw(w,E),E.child;case 5:return w===null&&Rs&&((Z=z=ia)&&(z=Ove(z,E.type,E.pendingProps,hd),z!==null?(E.stateNode=z,il=E,ia=nh(z.firstChild),hd=!1,Z=!0):Z=!1),Z||l1(E)),ye(E),Z=E.type,ie=E.pendingProps,_e=w!==null?w.memoizedProps:null,z=ie.children,o8(Z,ie)?z=null:_e!==null&&o8(Z,_e)&&(E.flags|=32),E.memoizedState!==null&&(Z=X7(w,E,Jye,null,null,D),bw._currentValue=Z),tw(w,E),sa(w,E,z,D),E.child;case 6:return w===null&&Rs&&((w=D=ia)&&(D=Rve(D,E.pendingProps,hd),D!==null?(E.stateNode=D,il=E,ia=null,w=!0):w=!1),w||l1(E)),null;case 13:return uH(w,E,D);case 4:return oo(E,E.stateNode.containerInfo),z=E.pendingProps,w===null?E.child=u1(E,null,z,D):sa(w,E,z,D),E.child;case 11:return tH(w,E,E.type,E.pendingProps,D);case 7:return sa(w,E,E.pendingProps,D),E.child;case 8:return sa(w,E,E.pendingProps.children,D),E.child;case 12:return sa(w,E,E.pendingProps.children,D),E.child;case 10:return z=E.pendingProps,Dm(E,E.type,z.value),sa(w,E,z.children,D),E.child;case 9:return Z=E.type._context,z=E.pendingProps.children,g1(E),Z=Ia(Z),z=z(Z),E.flags|=1,sa(w,E,z,D),E.child;case 14:return iH(w,E,E.type,E.pendingProps,D);case 15:return sH(w,E,E.type,E.pendingProps,D);case 19:return hH(w,E,D);case 22:return nH(w,E,D);case 24:return g1(E),z=Ia(uo),w===null?(Z=U7(),Z===null&&(Z=$n,ie=B7(),Z.pooledCache=ie,ie.refCount++,ie!==null&&(Z.pooledCacheLanes|=D),Z=ie),E.memoizedState={parent:z,cache:Z},ED(E),Dm(E,uo,Z)):((w.lanes&D)!==0&&(CD(w,E),rw(E,null,null,D),nw()),Z=w.memoizedState,ie=E.memoizedState,Z.parent!==z?(Z={parent:z,cache:z},E.memoizedState=Z,E.lanes===0&&(E.memoizedState=E.updateQueue.baseState=Z),Dm(E,uo,z)):(z=ie.cache,Dm(E,uo,z),z!==Z.cache&&SD(E,[uo],D,!0))),sa(w,E,E.pendingProps.children,D),E.child;case 29:throw E.pendingProps}throw Error(s(156,E.tag))}var xD=Lt(null),m1=null,zf=null;function Dm(w,E,D){Yi(xD,E._currentValue),E._currentValue=D}function qf(w){w._currentValue=xD.current,Dt(xD)}function wD(w,E,D){for(;w!==null;){var z=w.alternate;if((w.childLanes&E)!==E?(w.childLanes|=E,z!==null&&(z.childLanes|=E)):z!==null&&(z.childLanes&E)!==E&&(z.childLanes|=E),w===D)break;w=w.return}}function SD(w,E,D,z){var Z=w.child;for(Z!==null&&(Z.return=w);Z!==null;){var ie=Z.dependencies;if(ie!==null){var _e=Z.child;ie=ie.firstContext;e:for(;ie!==null;){var Ae=ie;ie=Z;for(var qe=0;qe<E.length;qe++)if(Ae.context===E[qe]){ie.lanes|=D,Ae=ie.alternate,Ae!==null&&(Ae.lanes|=D),wD(ie.return,D,w),z||(_e=null);break e}ie=Ae.next}}else if(Z.tag===18){if(_e=Z.return,_e===null)throw Error(s(341));_e.lanes|=D,ie=_e.alternate,ie!==null&&(ie.lanes|=D),wD(_e,D,w),_e=null}else _e=Z.child;if(_e!==null)_e.return=Z;else for(_e=Z;_e!==null;){if(_e===w){_e=null;break}if(Z=_e.sibling,Z!==null){Z.return=_e.return,_e=Z;break}_e=_e.return}Z=_e}}function iw(w,E,D,z){w=null;for(var Z=E,ie=!1;Z!==null;){if(!ie){if((Z.flags&524288)!==0)ie=!0;else if((Z.flags&262144)!==0)break}if(Z.tag===10){var _e=Z.alternate;if(_e===null)throw Error(s(387));if(_e=_e.memoizedProps,_e!==null){var Ae=Z.type;$e(Z.pendingProps.value,_e.value)||(w!==null?w.push(Ae):w=[Ae])}}else if(Z===hr.current){if(_e=Z.alternate,_e===null)throw Error(s(387));_e.memoizedState.memoizedState!==Z.memoizedState.memoizedState&&(w!==null?w.push(bw):w=[bw])}Z=Z.return}w!==null&&SD(E,w,D,z),E.flags|=262144}function K5(w){for(w=w.firstContext;w!==null;){if(!$e(w.context._currentValue,w.memoizedValue))return!0;w=w.next}return!1}function g1(w){m1=w,zf=null,w=w.dependencies,w!==null&&(w.firstContext=null)}function Ia(w){return fH(m1,w)}function J5(w,E){return m1===null&&g1(w),fH(w,E)}function fH(w,E){var D=E._currentValue;if(E={context:E,memoizedValue:D,next:null},zf===null){if(w===null)throw Error(s(308));zf=E,w.dependencies={lanes:0,firstContext:E},w.flags|=524288}else zf=zf.next=E;return D}var km=!1;function ED(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function CD(w,E){w=w.updateQueue,E.updateQueue===w&&(E.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,callbacks:null})}function Nm(w){return{lane:w,tag:0,payload:null,callback:null,next:null}}function $m(w,E,D){var z=w.updateQueue;if(z===null)return null;if(z=z.shared,(pr&2)!==0){var Z=z.pending;return Z===null?E.next=E:(E.next=Z.next,Z.next=E),z.pending=E,E=k5(w),Xj(w,null,D),E}return D5(w,z,E,D),k5(w)}function sw(w,E,D){if(E=E.updateQueue,E!==null&&(E=E.shared,(D&4194176)!==0)){var z=E.lanes;z&=w.pendingLanes,D|=z,E.lanes=D,Ce(w,D)}}function PD(w,E){var D=w.updateQueue,z=w.alternate;if(z!==null&&(z=z.updateQueue,D===z)){var Z=null,ie=null;if(D=D.firstBaseUpdate,D!==null){do{var _e={lane:D.lane,tag:D.tag,payload:D.payload,callback:null,next:null};ie===null?Z=ie=_e:ie=ie.next=_e,D=D.next}while(D!==null);ie===null?Z=ie=E:ie=ie.next=E}else Z=ie=E;D={baseState:z.baseState,firstBaseUpdate:Z,lastBaseUpdate:ie,shared:z.shared,callbacks:z.callbacks},w.updateQueue=D;return}w=D.lastBaseUpdate,w===null?D.firstBaseUpdate=E:w.next=E,D.lastBaseUpdate=E}var TD=!1;function nw(){if(TD){var w=n_;if(w!==null)throw w}}function rw(w,E,D,z){TD=!1;var Z=w.updateQueue;km=!1;var ie=Z.firstBaseUpdate,_e=Z.lastBaseUpdate,Ae=Z.shared.pending;if(Ae!==null){Z.shared.pending=null;var qe=Ae,We=qe.next;qe.next=null,_e===null?ie=We:_e.next=We,_e=qe;var yt=w.alternate;yt!==null&&(yt=yt.updateQueue,Ae=yt.lastBaseUpdate,Ae!==_e&&(Ae===null?yt.firstBaseUpdate=We:Ae.next=We,yt.lastBaseUpdate=qe))}if(ie!==null){var It=Z.baseState;_e=0,yt=We=qe=null,Ae=ie;do{var at=Ae.lane&-536870913,gt=at!==Ae.lane;if(gt?(Ts&at)===at:(z&at)===at){at!==0&&at===s_&&(TD=!0),yt!==null&&(yt=yt.next={lane:0,tag:Ae.tag,payload:Ae.payload,callback:null,next:null});e:{var di=w,Gi=Ae;at=E;var Cr=D;switch(Gi.tag){case 1:if(di=Gi.payload,typeof di=="function"){It=di.call(Cr,It,at);break e}It=di;break e;case 3:di.flags=di.flags&-65537|128;case 0:if(di=Gi.payload,at=typeof di=="function"?di.call(Cr,It,at):di,at==null)break e;It=oe({},It,at);break e;case 2:km=!0}}at=Ae.callback,at!==null&&(w.flags|=64,gt&&(w.flags|=8192),gt=Z.callbacks,gt===null?Z.callbacks=[at]:gt.push(at))}else gt={lane:at,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},yt===null?(We=yt=gt,qe=It):yt=yt.next=gt,_e|=at;if(Ae=Ae.next,Ae===null){if(Ae=Z.shared.pending,Ae===null)break;gt=Ae,Ae=gt.next,gt.next=null,Z.lastBaseUpdate=gt,Z.shared.pending=null}}while(!0);yt===null&&(qe=It),Z.baseState=qe,Z.firstBaseUpdate=We,Z.lastBaseUpdate=yt,ie===null&&(Z.shared.lanes=0),zm|=_e,w.lanes=_e,w.memoizedState=It}}function pH(w,E){if(typeof w!="function")throw Error(s(191,w));w.call(E)}function mH(w,E){var D=w.callbacks;if(D!==null)for(w.callbacks=null,w=0;w<D.length;w++)pH(D[w],E)}function ow(w,E){try{var D=E.updateQueue,z=D!==null?D.lastEffect:null;if(z!==null){var Z=z.next;D=Z;do{if((D.tag&w)===w){z=void 0;var ie=D.create,_e=D.inst;z=ie(),_e.destroy=z}D=D.next}while(D!==Z)}}catch(Ae){En(E,E.return,Ae)}}function Om(w,E,D){try{var z=E.updateQueue,Z=z!==null?z.lastEffect:null;if(Z!==null){var ie=Z.next;z=ie;do{if((z.tag&w)===w){var _e=z.inst,Ae=_e.destroy;if(Ae!==void 0){_e.destroy=void 0,Z=E;var qe=D;try{Ae()}catch(We){En(Z,qe,We)}}}z=z.next}while(z!==ie)}}catch(We){En(E,E.return,We)}}function gH(w){var E=w.updateQueue;if(E!==null){var D=w.stateNode;try{mH(E,D)}catch(z){En(w,w.return,z)}}}function yH(w,E,D){D.props=p1(w.type,w.memoizedProps),D.state=w.memoizedState;try{D.componentWillUnmount()}catch(z){En(w,E,z)}}function y1(w,E){try{var D=w.ref;if(D!==null){var z=w.stateNode;switch(w.tag){case 26:case 27:case 5:var Z=z;break;default:Z=z}typeof D=="function"?w.refCleanup=D(Z):D.current=Z}}catch(ie){En(w,E,ie)}}function su(w,E){var D=w.ref,z=w.refCleanup;if(D!==null)if(typeof z=="function")try{z()}catch(Z){En(w,E,Z)}finally{w.refCleanup=null,w=w.alternate,w!=null&&(w.refCleanup=null)}else if(typeof D=="function")try{D(null)}catch(Z){En(w,E,Z)}else D.current=null}function vH(w){var E=w.type,D=w.memoizedProps,z=w.stateNode;try{e:switch(E){case"button":case"input":case"select":case"textarea":D.autoFocus&&z.focus();break e;case"img":D.src?z.src=D.src:D.srcSet&&(z.srcset=D.srcSet)}}catch(Z){En(w,w.return,Z)}}function _H(w,E,D){try{var z=w.stateNode;Ave(z,w.type,D,E),z[dt]=E}catch(Z){En(w,w.return,Z)}}function bH(w){return w.tag===5||w.tag===3||w.tag===26||w.tag===27||w.tag===4}function ID(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||bH(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==27&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function MD(w,E,D){var z=w.tag;if(z===5||z===6)w=w.stateNode,E?D.nodeType===8?D.parentNode.insertBefore(w,E):D.insertBefore(w,E):(D.nodeType===8?(E=D.parentNode,E.insertBefore(w,D)):(E=D,E.appendChild(w)),D=D._reactRootContainer,D!=null||E.onclick!==null||(E.onclick=dP));else if(z!==4&&z!==27&&(w=w.child,w!==null))for(MD(w,E,D),w=w.sibling;w!==null;)MD(w,E,D),w=w.sibling}function Q5(w,E,D){var z=w.tag;if(z===5||z===6)w=w.stateNode,E?D.insertBefore(w,E):D.appendChild(w);else if(z!==4&&z!==27&&(w=w.child,w!==null))for(Q5(w,E,D),w=w.sibling;w!==null;)Q5(w,E,D),w=w.sibling}var Vf=!1,Sr=!1,AD=!1,xH=typeof WeakSet=="function"?WeakSet:Set,Io=null,wH=!1;function ove(w,E){if(w=w.containerInfo,n8=_P,w=Mt(w),Tt(w)){if("selectionStart"in w)var D={start:w.selectionStart,end:w.selectionEnd};else e:{D=(D=w.ownerDocument)&&D.defaultView||window;var z=D.getSelection&&D.getSelection();if(z&&z.rangeCount!==0){D=z.anchorNode;var Z=z.anchorOffset,ie=z.focusNode;z=z.focusOffset;try{D.nodeType,ie.nodeType}catch{D=null;break e}var _e=0,Ae=-1,qe=-1,We=0,yt=0,It=w,at=null;t:for(;;){for(var gt;It!==D||Z!==0&&It.nodeType!==3||(Ae=_e+Z),It!==ie||z!==0&&It.nodeType!==3||(qe=_e+z),It.nodeType===3&&(_e+=It.nodeValue.length),(gt=It.firstChild)!==null;)at=It,It=gt;for(;;){if(It===w)break t;if(at===D&&++We===Z&&(Ae=_e),at===ie&&++yt===z&&(qe=_e),(gt=It.nextSibling)!==null)break;It=at,at=It.parentNode}It=gt}D=Ae===-1||qe===-1?null:{start:Ae,end:qe}}else D=null}D=D||{start:0,end:0}}else D=null;for(r8={focusedElem:w,selectionRange:D},_P=!1,Io=E;Io!==null;)if(E=Io,w=E.child,(E.subtreeFlags&1028)!==0&&w!==null)w.return=E,Io=w;else for(;Io!==null;){switch(E=Io,ie=E.alternate,w=E.flags,E.tag){case 0:break;case 11:case 15:break;case 1:if((w&1024)!==0&&ie!==null){w=void 0,D=E,Z=ie.memoizedProps,ie=ie.memoizedState,z=D.stateNode;try{var di=p1(D.type,Z,D.elementType===D.type);w=z.getSnapshotBeforeUpdate(di,ie),z.__reactInternalSnapshotBeforeUpdate=w}catch(Gi){En(D,D.return,Gi)}}break;case 3:if((w&1024)!==0){if(w=E.stateNode.containerInfo,D=w.nodeType,D===9)u8(w);else if(D===1)switch(w.nodeName){case"HEAD":case"HTML":case"BODY":u8(w);break;default:w.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((w&1024)!==0)throw Error(s(163))}if(w=E.sibling,w!==null){w.return=E.return,Io=w;break}Io=E.return}return di=wH,wH=!1,di}function SH(w,E,D){var z=D.flags;switch(D.tag){case 0:case 11:case 15:jf(w,D),z&4&&ow(5,D);break;case 1:if(jf(w,D),z&4)if(w=D.stateNode,E===null)try{w.componentDidMount()}catch(Ae){En(D,D.return,Ae)}else{var Z=p1(D.type,E.memoizedProps);E=E.memoizedState;try{w.componentDidUpdate(Z,E,w.__reactInternalSnapshotBeforeUpdate)}catch(Ae){En(D,D.return,Ae)}}z&64&&gH(D),z&512&&y1(D,D.return);break;case 3:if(jf(w,D),z&64&&(z=D.updateQueue,z!==null)){if(w=null,D.child!==null)switch(D.child.tag){case 27:case 5:w=D.child.stateNode;break;case 1:w=D.child.stateNode}try{mH(z,w)}catch(Ae){En(D,D.return,Ae)}}break;case 26:jf(w,D),z&512&&y1(D,D.return);break;case 27:case 5:jf(w,D),E===null&&z&4&&vH(D),z&512&&y1(D,D.return);break;case 12:jf(w,D);break;case 13:jf(w,D),z&4&&PH(w,D);break;case 22:if(Z=D.memoizedState!==null||Vf,!Z){E=E!==null&&E.memoizedState!==null||Sr;var ie=Vf,_e=Sr;Vf=Z,(Sr=E)&&!_e?Rm(w,D,(D.subtreeFlags&8772)!==0):jf(w,D),Vf=ie,Sr=_e}z&512&&(D.memoizedProps.mode==="manual"?y1(D,D.return):su(D,D.return));break;default:jf(w,D)}}function EH(w){var E=w.alternate;E!==null&&(w.alternate=null,EH(E)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(E=w.stateNode,E!==null&&Ki(E)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}var Yr=null,nu=!1;function Gf(w,E,D){for(D=D.child;D!==null;)CH(w,E,D),D=D.sibling}function CH(w,E,D){if(p&&typeof p.onCommitFiberUnmount=="function")try{p.onCommitFiberUnmount(T,D)}catch{}switch(D.tag){case 26:Sr||su(D,E),Gf(w,E,D),D.memoizedState?D.memoizedState.count--:D.stateNode&&(D=D.stateNode,D.parentNode.removeChild(D));break;case 27:Sr||su(D,E);var z=Yr,Z=nu;for(Yr=D.stateNode,Gf(w,E,D),D=D.stateNode,E=D.attributes;E.length;)D.removeAttributeNode(E[0]);Ki(D),Yr=z,nu=Z;break;case 5:Sr||su(D,E);case 6:Z=Yr;var ie=nu;if(Yr=null,Gf(w,E,D),Yr=Z,nu=ie,Yr!==null)if(nu)try{w=Yr,z=D.stateNode,w.nodeType===8?w.parentNode.removeChild(z):w.removeChild(z)}catch(_e){En(D,E,_e)}else try{Yr.removeChild(D.stateNode)}catch(_e){En(D,E,_e)}break;case 18:Yr!==null&&(nu?(E=Yr,D=D.stateNode,E.nodeType===8?l8(E.parentNode,D):E.nodeType===1&&l8(E,D),Ew(E)):l8(Yr,D.stateNode));break;case 4:z=Yr,Z=nu,Yr=D.stateNode.containerInfo,nu=!0,Gf(w,E,D),Yr=z,nu=Z;break;case 0:case 11:case 14:case 15:Sr||Om(2,D,E),Sr||Om(4,D,E),Gf(w,E,D);break;case 1:Sr||(su(D,E),z=D.stateNode,typeof z.componentWillUnmount=="function"&&yH(D,E,z)),Gf(w,E,D);break;case 21:Gf(w,E,D);break;case 22:Sr||su(D,E),Sr=(z=Sr)||D.memoizedState!==null,Gf(w,E,D),Sr=z;break;default:Gf(w,E,D)}}function PH(w,E){if(E.memoizedState===null&&(w=E.alternate,w!==null&&(w=w.memoizedState,w!==null&&(w=w.dehydrated,w!==null))))try{Ew(w)}catch(D){En(E,E.return,D)}}function ave(w){switch(w.tag){case 13:case 19:var E=w.stateNode;return E===null&&(E=w.stateNode=new xH),E;case 22:return w=w.stateNode,E=w._retryCache,E===null&&(E=w._retryCache=new xH),E;default:throw Error(s(435,w.tag))}}function DD(w,E){var D=ave(w);E.forEach(function(z){var Z=bve.bind(null,w,z);D.has(z)||(D.add(z),z.then(Z,Z))})}function tc(w,E){var D=E.deletions;if(D!==null)for(var z=0;z<D.length;z++){var Z=D[z],ie=w,_e=E,Ae=_e;e:for(;Ae!==null;){switch(Ae.tag){case 27:case 5:Yr=Ae.stateNode,nu=!1;break e;case 3:Yr=Ae.stateNode.containerInfo,nu=!0;break e;case 4:Yr=Ae.stateNode.containerInfo,nu=!0;break e}Ae=Ae.return}if(Yr===null)throw Error(s(160));CH(ie,_e,Z),Yr=null,nu=!1,ie=Z.alternate,ie!==null&&(ie.return=null),Z.return=null}if(E.subtreeFlags&13878)for(E=E.child;E!==null;)TH(E,w),E=E.sibling}var sh=null;function TH(w,E){var D=w.alternate,z=w.flags;switch(w.tag){case 0:case 11:case 14:case 15:tc(E,w),ic(w),z&4&&(Om(3,w,w.return),ow(3,w),Om(5,w,w.return));break;case 1:tc(E,w),ic(w),z&512&&(Sr||D===null||su(D,D.return)),z&64&&Vf&&(w=w.updateQueue,w!==null&&(z=w.callbacks,z!==null&&(D=w.shared.hiddenCallbacks,w.shared.hiddenCallbacks=D===null?z:D.concat(z))));break;case 26:var Z=sh;if(tc(E,w),ic(w),z&512&&(Sr||D===null||su(D,D.return)),z&4){var ie=D!==null?D.memoizedState:null;if(z=w.memoizedState,D===null)if(z===null)if(w.stateNode===null){e:{z=w.type,D=w.memoizedProps,Z=Z.ownerDocument||Z;t:switch(z){case"title":ie=Z.getElementsByTagName("title")[0],(!ie||ie[Ni]||ie[et]||ie.namespaceURI==="http://www.w3.org/2000/svg"||ie.hasAttribute("itemprop"))&&(ie=Z.createElement(z),Z.head.insertBefore(ie,Z.querySelector("head > title"))),na(ie,z,D),ie[et]=w,Kt(ie),z=ie;break e;case"link":var _e=vU("link","href",Z).get(z+(D.href||""));if(_e){for(var Ae=0;Ae<_e.length;Ae++)if(ie=_e[Ae],ie.getAttribute("href")===(D.href==null?null:D.href)&&ie.getAttribute("rel")===(D.rel==null?null:D.rel)&&ie.getAttribute("title")===(D.title==null?null:D.title)&&ie.getAttribute("crossorigin")===(D.crossOrigin==null?null:D.crossOrigin)){_e.splice(Ae,1);break t}}ie=Z.createElement(z),na(ie,z,D),Z.head.appendChild(ie);break;case"meta":if(_e=vU("meta","content",Z).get(z+(D.content||""))){for(Ae=0;Ae<_e.length;Ae++)if(ie=_e[Ae],ie.getAttribute("content")===(D.content==null?null:""+D.content)&&ie.getAttribute("name")===(D.name==null?null:D.name)&&ie.getAttribute("property")===(D.property==null?null:D.property)&&ie.getAttribute("http-equiv")===(D.httpEquiv==null?null:D.httpEquiv)&&ie.getAttribute("charset")===(D.charSet==null?null:D.charSet)){_e.splice(Ae,1);break t}}ie=Z.createElement(z),na(ie,z,D),Z.head.appendChild(ie);break;default:throw Error(s(468,z))}ie[et]=w,Kt(ie),z=ie}w.stateNode=z}else _U(Z,w.type,w.stateNode);else w.stateNode=yU(Z,z,w.memoizedProps);else ie!==z?(ie===null?D.stateNode!==null&&(D=D.stateNode,D.parentNode.removeChild(D)):ie.count--,z===null?_U(Z,w.type,w.stateNode):yU(Z,z,w.memoizedProps)):z===null&&w.stateNode!==null&&_H(w,w.memoizedProps,D.memoizedProps)}break;case 27:if(z&4&&w.alternate===null){Z=w.stateNode,ie=w.memoizedProps;try{for(var qe=Z.firstChild;qe;){var We=qe.nextSibling,yt=qe.nodeName;qe[Ni]||yt==="HEAD"||yt==="BODY"||yt==="SCRIPT"||yt==="STYLE"||yt==="LINK"&&qe.rel.toLowerCase()==="stylesheet"||Z.removeChild(qe),qe=We}for(var It=w.type,at=Z.attributes;at.length;)Z.removeAttributeNode(at[0]);na(Z,It,ie),Z[et]=w,Z[dt]=ie}catch(di){En(w,w.return,di)}}case 5:if(tc(E,w),ic(w),z&512&&(Sr||D===null||su(D,D.return)),w.flags&32){Z=w.stateNode;try{ud(Z,"")}catch(di){En(w,w.return,di)}}z&4&&w.stateNode!=null&&(Z=w.memoizedProps,_H(w,Z,D!==null?D.memoizedProps:Z)),z&1024&&(AD=!0);break;case 6:if(tc(E,w),ic(w),z&4){if(w.stateNode===null)throw Error(s(162));z=w.memoizedProps,D=w.stateNode;try{D.nodeValue=z}catch(di){En(w,w.return,di)}}break;case 3:if(gP=null,Z=sh,sh=pP(E.containerInfo),tc(E,w),sh=Z,ic(w),z&4&&D!==null&&D.memoizedState.isDehydrated)try{Ew(E.containerInfo)}catch(di){En(w,w.return,di)}AD&&(AD=!1,IH(w));break;case 4:z=sh,sh=pP(w.stateNode.containerInfo),tc(E,w),ic(w),sh=z;break;case 12:tc(E,w),ic(w);break;case 13:tc(E,w),ic(w),w.child.flags&8192&&w.memoizedState!==null!=(D!==null&&D.memoizedState!==null)&&(qD=Zi()),z&4&&(z=w.updateQueue,z!==null&&(w.updateQueue=null,DD(w,z)));break;case 22:if(z&512&&(Sr||D===null||su(D,D.return)),qe=w.memoizedState!==null,We=D!==null&&D.memoizedState!==null,yt=Vf,It=Sr,Vf=yt||qe,Sr=It||We,tc(E,w),Sr=It,Vf=yt,ic(w),E=w.stateNode,E._current=w,E._visibility&=-3,E._visibility|=E._pendingVisibility&2,z&8192&&(E._visibility=qe?E._visibility&-2:E._visibility|1,qe&&(E=Vf||Sr,D===null||We||E||l_(w)),w.memoizedProps===null||w.memoizedProps.mode!=="manual"))e:for(D=null,E=w;;){if(E.tag===5||E.tag===26||E.tag===27){if(D===null){We=D=E;try{if(Z=We.stateNode,qe)ie=Z.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{_e=We.stateNode,Ae=We.memoizedProps.style;var gt=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;_e.style.display=gt==null||typeof gt=="boolean"?"":(""+gt).trim()}}catch(di){En(We,We.return,di)}}}else if(E.tag===6){if(D===null){We=E;try{We.stateNode.nodeValue=qe?"":We.memoizedProps}catch(di){En(We,We.return,di)}}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===w)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===w)break e;for(;E.sibling===null;){if(E.return===null||E.return===w)break e;D===E&&(D=null),E=E.return}D===E&&(D=null),E.sibling.return=E.return,E=E.sibling}z&4&&(z=w.updateQueue,z!==null&&(D=z.retryQueue,D!==null&&(z.retryQueue=null,DD(w,D))));break;case 19:tc(E,w),ic(w),z&4&&(z=w.updateQueue,z!==null&&(w.updateQueue=null,DD(w,z)));break;case 21:break;default:tc(E,w),ic(w)}}function ic(w){var E=w.flags;if(E&2){try{if(w.tag!==27){e:{for(var D=w.return;D!==null;){if(bH(D)){var z=D;break e}D=D.return}throw Error(s(160))}switch(z.tag){case 27:var Z=z.stateNode,ie=ID(w);Q5(w,ie,Z);break;case 5:var _e=z.stateNode;z.flags&32&&(ud(_e,""),z.flags&=-33);var Ae=ID(w);Q5(w,Ae,_e);break;case 3:case 4:var qe=z.stateNode.containerInfo,We=ID(w);MD(w,We,qe);break;default:throw Error(s(161))}}}catch(yt){En(w,w.return,yt)}w.flags&=-3}E&4096&&(w.flags&=-4097)}function IH(w){if(w.subtreeFlags&1024)for(w=w.child;w!==null;){var E=w;IH(E),E.tag===5&&E.flags&1024&&E.stateNode.reset(),w=w.sibling}}function jf(w,E){if(E.subtreeFlags&8772)for(E=E.child;E!==null;)SH(w,E.alternate,E),E=E.sibling}function l_(w){for(w=w.child;w!==null;){var E=w;switch(E.tag){case 0:case 11:case 14:case 15:Om(4,E,E.return),l_(E);break;case 1:su(E,E.return);var D=E.stateNode;typeof D.componentWillUnmount=="function"&&yH(E,E.return,D),l_(E);break;case 26:case 27:case 5:su(E,E.return),l_(E);break;case 22:su(E,E.return),E.memoizedState===null&&l_(E);break;default:l_(E)}w=w.sibling}}function Rm(w,E,D){for(D=D&&(E.subtreeFlags&8772)!==0,E=E.child;E!==null;){var z=E.alternate,Z=w,ie=E,_e=ie.flags;switch(ie.tag){case 0:case 11:case 15:Rm(Z,ie,D),ow(4,ie);break;case 1:if(Rm(Z,ie,D),z=ie,Z=z.stateNode,typeof Z.componentDidMount=="function")try{Z.componentDidMount()}catch(We){En(z,z.return,We)}if(z=ie,Z=z.updateQueue,Z!==null){var Ae=z.stateNode;try{var qe=Z.shared.hiddenCallbacks;if(qe!==null)for(Z.shared.hiddenCallbacks=null,Z=0;Z<qe.length;Z++)pH(qe[Z],Ae)}catch(We){En(z,z.return,We)}}D&&_e&64&&gH(ie),y1(ie,ie.return);break;case 26:case 27:case 5:Rm(Z,ie,D),D&&z===null&&_e&4&&vH(ie),y1(ie,ie.return);break;case 12:Rm(Z,ie,D);break;case 13:Rm(Z,ie,D),D&&_e&4&&PH(Z,ie);break;case 22:ie.memoizedState===null&&Rm(Z,ie,D),y1(ie,ie.return);break;default:Rm(Z,ie,D)}E=E.sibling}}function kD(w,E){var D=null;w!==null&&w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(D=w.memoizedState.cachePool.pool),w=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(w=E.memoizedState.cachePool.pool),w!==D&&(w!=null&&w.refCount++,D!=null&&Zx(D))}function ND(w,E){w=null,E.alternate!==null&&(w=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==w&&(E.refCount++,w!=null&&Zx(w))}function Lm(w,E,D,z){if(E.subtreeFlags&10256)for(E=E.child;E!==null;)MH(w,E,D,z),E=E.sibling}function MH(w,E,D,z){var Z=E.flags;switch(E.tag){case 0:case 11:case 15:Lm(w,E,D,z),Z&2048&&ow(9,E);break;case 3:Lm(w,E,D,z),Z&2048&&(w=null,E.alternate!==null&&(w=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==w&&(E.refCount++,w!=null&&Zx(w)));break;case 12:if(Z&2048){Lm(w,E,D,z),w=E.stateNode;try{var ie=E.memoizedProps,_e=ie.id,Ae=ie.onPostCommit;typeof Ae=="function"&&Ae(_e,E.alternate===null?"mount":"update",w.passiveEffectDuration,-0)}catch(qe){En(E,E.return,qe)}}else Lm(w,E,D,z);break;case 23:break;case 22:ie=E.stateNode,E.memoizedState!==null?ie._visibility&4?Lm(w,E,D,z):aw(w,E):ie._visibility&4?Lm(w,E,D,z):(ie._visibility|=4,u_(w,E,D,z,(E.subtreeFlags&10256)!==0)),Z&2048&&kD(E.alternate,E);break;case 24:Lm(w,E,D,z),Z&2048&&ND(E.alternate,E);break;default:Lm(w,E,D,z)}}function u_(w,E,D,z,Z){for(Z=Z&&(E.subtreeFlags&10256)!==0,E=E.child;E!==null;){var ie=w,_e=E,Ae=D,qe=z,We=_e.flags;switch(_e.tag){case 0:case 11:case 15:u_(ie,_e,Ae,qe,Z),ow(8,_e);break;case 23:break;case 22:var yt=_e.stateNode;_e.memoizedState!==null?yt._visibility&4?u_(ie,_e,Ae,qe,Z):aw(ie,_e):(yt._visibility|=4,u_(ie,_e,Ae,qe,Z)),Z&&We&2048&&kD(_e.alternate,_e);break;case 24:u_(ie,_e,Ae,qe,Z),Z&&We&2048&&ND(_e.alternate,_e);break;default:u_(ie,_e,Ae,qe,Z)}E=E.sibling}}function aw(w,E){if(E.subtreeFlags&10256)for(E=E.child;E!==null;){var D=w,z=E,Z=z.flags;switch(z.tag){case 22:aw(D,z),Z&2048&&kD(z.alternate,z);break;case 24:aw(D,z),Z&2048&&ND(z.alternate,z);break;default:aw(D,z)}E=E.sibling}}var lw=8192;function c_(w){if(w.subtreeFlags&lw)for(w=w.child;w!==null;)AH(w),w=w.sibling}function AH(w){switch(w.tag){case 26:c_(w),w.flags&lw&&w.memoizedState!==null&&Wve(sh,w.memoizedState,w.memoizedProps);break;case 5:c_(w);break;case 3:case 4:var E=sh;sh=pP(w.stateNode.containerInfo),c_(w),sh=E;break;case 22:w.memoizedState===null&&(E=w.alternate,E!==null&&E.memoizedState!==null?(E=lw,lw=16777216,c_(w),lw=E):c_(w));break;default:c_(w)}}function DH(w){var E=w.alternate;if(E!==null&&(w=E.child,w!==null)){E.child=null;do E=w.sibling,w.sibling=null,w=E;while(w!==null)}}function uw(w){var E=w.deletions;if((w.flags&16)!==0){if(E!==null)for(var D=0;D<E.length;D++){var z=E[D];Io=z,NH(z,w)}DH(w)}if(w.subtreeFlags&10256)for(w=w.child;w!==null;)kH(w),w=w.sibling}function kH(w){switch(w.tag){case 0:case 11:case 15:uw(w),w.flags&2048&&Om(9,w,w.return);break;case 3:uw(w);break;case 12:uw(w);break;case 22:var E=w.stateNode;w.memoizedState!==null&&E._visibility&4&&(w.return===null||w.return.tag!==13)?(E._visibility&=-5,eP(w)):uw(w);break;default:uw(w)}}function eP(w){var E=w.deletions;if((w.flags&16)!==0){if(E!==null)for(var D=0;D<E.length;D++){var z=E[D];Io=z,NH(z,w)}DH(w)}for(w=w.child;w!==null;){switch(E=w,E.tag){case 0:case 11:case 15:Om(8,E,E.return),eP(E);break;case 22:D=E.stateNode,D._visibility&4&&(D._visibility&=-5,eP(E));break;default:eP(E)}w=w.sibling}}function NH(w,E){for(;Io!==null;){var D=Io;switch(D.tag){case 0:case 11:case 15:Om(8,D,E);break;case 23:case 22:if(D.memoizedState!==null&&D.memoizedState.cachePool!==null){var z=D.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:Zx(D.memoizedState.cache)}if(z=D.child,z!==null)z.return=D,Io=z;else e:for(D=w;Io!==null;){z=Io;var Z=z.sibling,ie=z.return;if(EH(z),z===D){Io=null;break e}if(Z!==null){Z.return=ie,Io=Z;break e}Io=ie}}}function lve(w,E,D,z){this.tag=w,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sc(w,E,D,z){return new lve(w,E,D,z)}function $D(w){return w=w.prototype,!(!w||!w.isReactComponent)}function Fm(w,E){var D=w.alternate;return D===null?(D=sc(w.tag,E,w.key,w.mode),D.elementType=w.elementType,D.type=w.type,D.stateNode=w.stateNode,D.alternate=w,w.alternate=D):(D.pendingProps=E,D.type=w.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=w.flags&31457280,D.childLanes=w.childLanes,D.lanes=w.lanes,D.child=w.child,D.memoizedProps=w.memoizedProps,D.memoizedState=w.memoizedState,D.updateQueue=w.updateQueue,E=w.dependencies,D.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},D.sibling=w.sibling,D.index=w.index,D.ref=w.ref,D.refCleanup=w.refCleanup,D}function $H(w,E){w.flags&=31457282;var D=w.alternate;return D===null?(w.childLanes=0,w.lanes=E,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=D.childLanes,w.lanes=D.lanes,w.child=D.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=D.memoizedProps,w.memoizedState=D.memoizedState,w.updateQueue=D.updateQueue,w.type=D.type,E=D.dependencies,w.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),w}function tP(w,E,D,z,Z,ie){var _e=0;if(z=w,typeof w=="function")$D(w)&&(_e=1);else if(typeof w=="string")_e=Yve(w,D,cs.current)?26:w==="html"||w==="head"||w==="body"?27:5;else e:switch(w){case c:return v1(D.children,Z,ie,E);case f:_e=8,Z|=24;break;case y:return w=sc(12,D,E,Z|2),w.elementType=y,w.lanes=ie,w;case A:return w=sc(13,D,E,Z),w.elementType=A,w.lanes=ie,w;case k:return w=sc(19,D,E,Z),w.elementType=k,w.lanes=ie,w;case G:return OH(D,Z,ie,E);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case _:case S:_e=10;break e;case x:_e=9;break e;case P:_e=11;break e;case $:_e=14;break e;case F:_e=16,z=null;break e}_e=29,D=Error(s(130,w===null?"null":typeof w,"")),z=null}return E=sc(_e,D,E,Z),E.elementType=w,E.type=z,E.lanes=ie,E}function v1(w,E,D,z){return w=sc(7,w,z,E),w.lanes=D,w}function OH(w,E,D,z){w=sc(22,w,z,E),w.elementType=G,w.lanes=D;var Z={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var ie=Z._current;if(ie===null)throw Error(s(456));if((Z._pendingVisibility&2)===0){var _e=Pm(ie,2);_e!==null&&(Z._pendingVisibility|=2,sl(_e,ie,2))}},attach:function(){var ie=Z._current;if(ie===null)throw Error(s(456));if((Z._pendingVisibility&2)!==0){var _e=Pm(ie,2);_e!==null&&(Z._pendingVisibility&=-3,sl(_e,ie,2))}}};return w.stateNode=Z,w}function OD(w,E,D){return w=sc(6,w,null,E),w.lanes=D,w}function RD(w,E,D){return E=sc(4,w.children!==null?w.children:[],w.key,E),E.lanes=D,E.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},E}function Bf(w){w.flags|=4}function RH(w,E){if(E.type!=="stylesheet"||(E.state.loading&4)!==0)w.flags&=-16777217;else if(w.flags|=16777216,!bU(E)){if(E=ec.current,E!==null&&((Ts&4194176)===Ts?dd!==null:(Ts&62914560)!==Ts&&(Ts&536870912)===0||E!==dd))throw Yx=V7,Qj;w.flags|=8192}}function iP(w,E){E!==null&&(w.flags|=4),w.flags&16384&&(E=w.tag!==22?ee():536870912,w.lanes|=E,d_|=E)}function cw(w,E){if(!Rs)switch(w.tailMode){case"hidden":E=w.tail;for(var D=null;E!==null;)E.alternate!==null&&(D=E),E=E.sibling;D===null?w.tail=null:D.sibling=null;break;case"collapsed":D=w.tail;for(var z=null;D!==null;)D.alternate!==null&&(z=D),D=D.sibling;z===null?E||w.tail===null?w.tail=null:w.tail.sibling=null:z.sibling=null}}function fr(w){var E=w.alternate!==null&&w.alternate.child===w.child,D=0,z=0;if(E)for(var Z=w.child;Z!==null;)D|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags&31457280,z|=Z.flags&31457280,Z.return=w,Z=Z.sibling;else for(Z=w.child;Z!==null;)D|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags,z|=Z.flags,Z.return=w,Z=Z.sibling;return w.subtreeFlags|=z,w.childLanes=D,E}function uve(w,E,D){var z=E.pendingProps;switch(z7(E),E.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fr(E),null;case 1:return fr(E),null;case 3:return D=E.stateNode,z=null,w!==null&&(z=w.memoizedState.cache),E.memoizedState.cache!==z&&(E.flags|=2048),qf(uo),ss(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(w===null||w.child===null)&&(jx(E)?Bf(E):w===null||w.memoizedState.isDehydrated&&(E.flags&256)===0||(E.flags|=1024,ih!==null&&(BD(ih),ih=null))),fr(E),null;case 26:return D=E.memoizedState,w===null?(Bf(E),D!==null?(fr(E),RH(E,D)):(fr(E),E.flags&=-16777217)):D?D!==w.memoizedState?(Bf(E),fr(E),RH(E,D)):(fr(E),E.flags&=-16777217):(w.memoizedProps!==z&&Bf(E),fr(E),E.flags&=-16777217),null;case 27:Fi(E),D=Us.current;var Z=E.type;if(w!==null&&E.stateNode!=null)w.memoizedProps!==z&&Bf(E);else{if(!z){if(E.stateNode===null)throw Error(s(166));return fr(E),null}w=cs.current,jx(E)?Kj(E):(w=dU(Z,z,D),E.stateNode=w,Bf(E))}return fr(E),null;case 5:if(Fi(E),D=E.type,w!==null&&E.stateNode!=null)w.memoizedProps!==z&&Bf(E);else{if(!z){if(E.stateNode===null)throw Error(s(166));return fr(E),null}if(w=cs.current,jx(E))Kj(E);else{switch(Z=fP(Us.current),w){case 1:w=Z.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:w=Z.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":w=Z.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":w=Z.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":w=Z.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof z.is=="string"?Z.createElement("select",{is:z.is}):Z.createElement("select"),z.multiple?w.multiple=!0:z.size&&(w.size=z.size);break;default:w=typeof z.is=="string"?Z.createElement(D,{is:z.is}):Z.createElement(D)}}w[et]=E,w[dt]=z;e:for(Z=E.child;Z!==null;){if(Z.tag===5||Z.tag===6)w.appendChild(Z.stateNode);else if(Z.tag!==4&&Z.tag!==27&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===E)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===E)break e;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}E.stateNode=w;e:switch(na(w,D,z),D){case"button":case"input":case"select":case"textarea":w=!!z.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Bf(E)}}return fr(E),E.flags&=-16777217,null;case 6:if(w&&E.stateNode!=null)w.memoizedProps!==z&&Bf(E);else{if(typeof z!="string"&&E.stateNode===null)throw Error(s(166));if(w=Us.current,jx(E)){if(w=E.stateNode,D=E.memoizedProps,z=null,Z=il,Z!==null)switch(Z.tag){case 27:case 5:z=Z.memoizedProps}w[et]=E,w=!!(w.nodeValue===D||z!==null&&z.suppressHydrationWarning===!0||oU(w.nodeValue,D)),w||l1(E)}else w=fP(w).createTextNode(z),w[et]=E,E.stateNode=w}return fr(E),null;case 13:if(z=E.memoizedState,w===null||w.memoizedState!==null&&w.memoizedState.dehydrated!==null){if(Z=jx(E),z!==null&&z.dehydrated!==null){if(w===null){if(!Z)throw Error(s(318));if(Z=E.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(s(317));Z[et]=E}else Bx(),(E.flags&128)===0&&(E.memoizedState=null),E.flags|=4;fr(E),Z=!1}else ih!==null&&(BD(ih),ih=null),Z=!0;if(!Z)return E.flags&256?(Rf(E),E):(Rf(E),null)}if(Rf(E),(E.flags&128)!==0)return E.lanes=D,E;if(D=z!==null,w=w!==null&&w.memoizedState!==null,D){z=E.child,Z=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(Z=z.alternate.memoizedState.cachePool.pool);var ie=null;z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(ie=z.memoizedState.cachePool.pool),ie!==Z&&(z.flags|=2048)}return D!==w&&D&&(E.child.flags|=8192),iP(E,E.updateQueue),fr(E),null;case 4:return ss(),w===null&&t8(E.stateNode.containerInfo),fr(E),null;case 10:return qf(E.type),fr(E),null;case 19:if(Dt(lo),Z=E.memoizedState,Z===null)return fr(E),null;if(z=(E.flags&128)!==0,ie=Z.rendering,ie===null)if(z)cw(Z,!1);else{if(Er!==0||w!==null&&(w.flags&128)!==0)for(w=E.child;w!==null;){if(ie=z5(w),ie!==null){for(E.flags|=128,cw(Z,!1),w=ie.updateQueue,E.updateQueue=w,iP(E,w),E.subtreeFlags=0,w=D,D=E.child;D!==null;)$H(D,w),D=D.sibling;return Yi(lo,lo.current&1|2),E.child}w=w.sibling}Z.tail!==null&&Zi()>sP&&(E.flags|=128,z=!0,cw(Z,!1),E.lanes=4194304)}else{if(!z)if(w=z5(ie),w!==null){if(E.flags|=128,z=!0,w=w.updateQueue,E.updateQueue=w,iP(E,w),cw(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ie.alternate&&!Rs)return fr(E),null}else 2*Zi()-Z.renderingStartTime>sP&&D!==536870912&&(E.flags|=128,z=!0,cw(Z,!1),E.lanes=4194304);Z.isBackwards?(ie.sibling=E.child,E.child=ie):(w=Z.last,w!==null?w.sibling=ie:E.child=ie,Z.last=ie)}return Z.tail!==null?(E=Z.tail,Z.rendering=E,Z.tail=E.sibling,Z.renderingStartTime=Zi(),E.sibling=null,w=lo.current,Yi(lo,z?w&1|2:w&1),E):(fr(E),null);case 22:case 23:return Rf(E),j7(),z=E.memoizedState!==null,w!==null?w.memoizedState!==null!==z&&(E.flags|=8192):z&&(E.flags|=8192),z?(D&536870912)!==0&&(E.flags&128)===0&&(fr(E),E.subtreeFlags&6&&(E.flags|=8192)):fr(E),D=E.updateQueue,D!==null&&iP(E,D.retryQueue),D=null,w!==null&&w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(D=w.memoizedState.cachePool.pool),z=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(z=E.memoizedState.cachePool.pool),z!==D&&(E.flags|=2048),w!==null&&Dt(c1),null;case 24:return D=null,w!==null&&(D=w.memoizedState.cache),E.memoizedState.cache!==D&&(E.flags|=2048),qf(uo),fr(E),null;case 25:return null}throw Error(s(156,E.tag))}function cve(w,E){switch(z7(E),E.tag){case 1:return w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 3:return qf(uo),ss(),w=E.flags,(w&65536)!==0&&(w&128)===0?(E.flags=w&-65537|128,E):null;case 26:case 27:case 5:return Fi(E),null;case 13:if(Rf(E),w=E.memoizedState,w!==null&&w.dehydrated!==null){if(E.alternate===null)throw Error(s(340));Bx()}return w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 19:return Dt(lo),null;case 4:return ss(),null;case 10:return qf(E.type),null;case 22:case 23:return Rf(E),j7(),w!==null&&Dt(c1),w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 24:return qf(uo),null;case 25:return null;default:return null}}function LH(w,E){switch(z7(E),E.tag){case 3:qf(uo),ss();break;case 26:case 27:case 5:Fi(E);break;case 4:ss();break;case 13:Rf(E);break;case 19:Dt(lo);break;case 10:qf(E.type);break;case 22:case 23:Rf(E),j7(),w!==null&&Dt(c1);break;case 24:qf(uo)}}var hve={getCacheForType:function(w){var E=Ia(uo),D=E.data.get(w);return D===void 0&&(D=w(),E.data.set(w,D)),D}},dve=typeof WeakMap=="function"?WeakMap:Map,pr=0,$n=null,hs=null,Ts=0,On=0,ru=null,Hf=!1,h_=!1,LD=!1,Uf=0,Er=0,zm=0,_1=0,FD=0,nc=0,d_=0,hw=null,pd=null,zD=!1,qD=0,sP=1/0,nP=null,qm=null,rP=!1,b1=null,dw=0,VD=0,GD=null,fw=0,jD=null;function ou(){if((pr&2)!==0&&Ts!==0)return Ts&-Ts;if(se.T!==null){var w=s_;return w!==0?w:KD()}return Ne()}function FH(){nc===0&&(nc=(Ts&536870912)===0||Rs?U():536870912);var w=ec.current;return w!==null&&(w.flags|=32),nc}function sl(w,E,D){(w===$n&&On===2||w.cancelPendingCommit!==null)&&(f_(w,0),Yf(w,Ts,nc,!1)),ge(w,D),((pr&2)===0||w!==$n)&&(w===$n&&((pr&2)===0&&(_1|=D),Er===4&&Yf(w,Ts,nc,!1)),md(w))}function zH(w,E,D){if((pr&6)!==0)throw Error(s(327));var z=!D&&(E&60)===0&&(E&w.expiredLanes)===0||L(w,E),Z=z?mve(w,E):YD(w,E,!0),ie=z;do{if(Z===0){h_&&!z&&Yf(w,E,0,!1);break}else if(Z===6)Yf(w,E,0,!Hf);else{if(D=w.current.alternate,ie&&!fve(D)){Z=YD(w,E,!1),ie=!1;continue}if(Z===2){if(ie=E,w.errorRecoveryDisabledLanes&ie)var _e=0;else _e=w.pendingLanes&-536870913,_e=_e!==0?_e:_e&536870912?536870912:0;if(_e!==0){E=_e;e:{var Ae=w;Z=hw;var qe=Ae.current.memoizedState.isDehydrated;if(qe&&(f_(Ae,_e).flags|=256),_e=YD(Ae,_e,!1),_e!==2){if(LD&&!qe){Ae.errorRecoveryDisabledLanes|=ie,_1|=ie,Z=4;break e}ie=pd,pd=Z,ie!==null&&BD(ie)}Z=_e}if(ie=!1,Z!==2)continue}}if(Z===1){f_(w,0),Yf(w,E,0,!0);break}e:{switch(z=w,Z){case 0:case 1:throw Error(s(345));case 4:if((E&4194176)===E){Yf(z,E,nc,!Hf);break e}break;case 2:pd=null;break;case 3:case 5:break;default:throw Error(s(329))}if(z.finishedWork=D,z.finishedLanes=E,(E&62914560)===E&&(ie=qD+300-Zi(),10<ie)){if(Yf(z,E,nc,!Hf),O(z,0)!==0)break e;z.timeoutHandle=uU(qH.bind(null,z,D,pd,nP,zD,E,nc,_1,d_,Hf,2,-0,0),ie);break e}qH(z,D,pd,nP,zD,E,nc,_1,d_,Hf,0,-0,0)}}break}while(!0);md(w)}function BD(w){pd===null?pd=w:pd.push.apply(pd,w)}function qH(w,E,D,z,Z,ie,_e,Ae,qe,We,yt,It,at){var gt=E.subtreeFlags;if((gt&8192||(gt&16785408)===16785408)&&(_w={stylesheets:null,count:0,unsuspend:Xve},AH(E),E=Zve(),E!==null)){w.cancelPendingCommit=E(YH.bind(null,w,D,z,Z,_e,Ae,qe,1,It,at)),Yf(w,ie,_e,!We);return}YH(w,D,z,Z,_e,Ae,qe,yt,It,at)}function fve(w){for(var E=w;;){var D=E.tag;if((D===0||D===11||D===15)&&E.flags&16384&&(D=E.updateQueue,D!==null&&(D=D.stores,D!==null)))for(var z=0;z<D.length;z++){var Z=D[z],ie=Z.getSnapshot;Z=Z.value;try{if(!$e(ie(),Z))return!1}catch{return!1}}if(D=E.child,E.subtreeFlags&16384&&D!==null)D.return=E,E=D;else{if(E===w)break;for(;E.sibling===null;){if(E.return===null||E.return===w)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function Yf(w,E,D,z){E&=~FD,E&=~_1,w.suspendedLanes|=E,w.pingedLanes&=~E,z&&(w.warmLanes|=E),z=w.expirationTimes;for(var Z=E;0<Z;){var ie=31-u(Z),_e=1<<ie;z[ie]=-1,Z&=~_e}D!==0&&fe(w,D,E)}function oP(){return(pr&6)===0?(pw(0),!1):!0}function HD(){if(hs!==null){if(On===0)var w=hs.return;else w=hs,zf=m1=null,K7(w),t_=null,Xx=0,w=hs;for(;w!==null;)LH(w.alternate,w),w=w.return;hs=null}}function f_(w,E){w.finishedWork=null,w.finishedLanes=0;var D=w.timeoutHandle;D!==-1&&(w.timeoutHandle=-1,kve(D)),D=w.cancelPendingCommit,D!==null&&(w.cancelPendingCommit=null,D()),HD(),$n=w,hs=D=Fm(w.current,null),Ts=E,On=0,ru=null,Hf=!1,h_=L(w,E),LD=!1,d_=nc=FD=_1=zm=Er=0,pd=hw=null,zD=!1,(E&8)!==0&&(E|=E&32);var z=w.entangledLanes;if(z!==0)for(w=w.entanglements,z&=E;0<z;){var Z=31-u(z),ie=1<<Z;E|=w[Z],z&=~ie}return Uf=E,A5(),D}function VH(w,E){rs=null,se.H=fd,E===Ux?(E=iB(),On=3):E===Qj?(E=iB(),On=4):On=E===eH?8:E!==null&&typeof E=="object"&&typeof E.then=="function"?6:1,ru=E,hs===null&&(Er=1,Z5(w,Ku(E,w.current)))}function GH(){var w=se.H;return se.H=fd,w===null?fd:w}function jH(){var w=se.A;return se.A=hve,w}function UD(){Er=4,Hf||(Ts&4194176)!==Ts&&ec.current!==null||(h_=!0),(zm&134217727)===0&&(_1&134217727)===0||$n===null||Yf($n,Ts,nc,!1)}function YD(w,E,D){var z=pr;pr|=2;var Z=GH(),ie=jH();($n!==w||Ts!==E)&&(nP=null,f_(w,E)),E=!1;var _e=Er;e:do try{if(On!==0&&hs!==null){var Ae=hs,qe=ru;switch(On){case 8:HD(),_e=6;break e;case 3:case 2:case 6:ec.current===null&&(E=!0);var We=On;if(On=0,ru=null,p_(w,Ae,qe,We),D&&h_){_e=0;break e}break;default:We=On,On=0,ru=null,p_(w,Ae,qe,We)}}pve(),_e=Er;break}catch(yt){VH(w,yt)}while(!0);return E&&w.shellSuspendCounter++,zf=m1=null,pr=z,se.H=Z,se.A=ie,hs===null&&($n=null,Ts=0,A5()),_e}function pve(){for(;hs!==null;)BH(hs)}function mve(w,E){var D=pr;pr|=2;var z=GH(),Z=jH();$n!==w||Ts!==E?(nP=null,sP=Zi()+500,f_(w,E)):h_=L(w,E);e:do try{if(On!==0&&hs!==null){E=hs;var ie=ru;t:switch(On){case 1:On=0,ru=null,p_(w,E,ie,1);break;case 2:if(eB(ie)){On=0,ru=null,HH(E);break}E=function(){On===2&&$n===w&&(On=7),md(w)},ie.then(E,E);break e;case 3:On=7;break e;case 4:On=5;break e;case 7:eB(ie)?(On=0,ru=null,HH(E)):(On=0,ru=null,p_(w,E,ie,7));break;case 5:var _e=null;switch(hs.tag){case 26:_e=hs.memoizedState;case 5:case 27:var Ae=hs;if(!_e||bU(_e)){On=0,ru=null;var qe=Ae.sibling;if(qe!==null)hs=qe;else{var We=Ae.return;We!==null?(hs=We,aP(We)):hs=null}break t}}On=0,ru=null,p_(w,E,ie,5);break;case 6:On=0,ru=null,p_(w,E,ie,6);break;case 8:HD(),Er=6;break e;default:throw Error(s(462))}}gve();break}catch(yt){VH(w,yt)}while(!0);return zf=m1=null,se.H=z,se.A=Z,pr=D,hs!==null?0:($n=null,Ts=0,A5(),Er)}function gve(){for(;hs!==null&&!pn();)BH(hs)}function BH(w){var E=dH(w.alternate,w,Uf);w.memoizedProps=w.pendingProps,E===null?aP(w):hs=E}function HH(w){var E=w,D=E.alternate;switch(E.tag){case 15:case 0:E=oH(D,E,E.pendingProps,E.type,void 0,Ts);break;case 11:E=oH(D,E,E.pendingProps,E.type.render,E.ref,Ts);break;case 5:K7(E);default:LH(D,E),E=hs=$H(E,Uf),E=dH(D,E,Uf)}w.memoizedProps=w.pendingProps,E===null?aP(w):hs=E}function p_(w,E,D,z){zf=m1=null,K7(E),t_=null,Xx=0;var Z=E.return;try{if(nve(w,Z,E,D,Ts)){Er=1,Z5(w,Ku(D,w.current)),hs=null;return}}catch(ie){if(Z!==null)throw hs=Z,ie;Er=1,Z5(w,Ku(D,w.current)),hs=null;return}E.flags&32768?(Rs||z===1?w=!0:h_||(Ts&536870912)!==0?w=!1:(Hf=w=!0,(z===2||z===3||z===6)&&(z=ec.current,z!==null&&z.tag===13&&(z.flags|=16384))),UH(E,w)):aP(E)}function aP(w){var E=w;do{if((E.flags&32768)!==0){UH(E,Hf);return}w=E.return;var D=uve(E.alternate,E,Uf);if(D!==null){hs=D;return}if(E=E.sibling,E!==null){hs=E;return}hs=E=w}while(E!==null);Er===0&&(Er=5)}function UH(w,E){do{var D=cve(w.alternate,w);if(D!==null){D.flags&=32767,hs=D;return}if(D=w.return,D!==null&&(D.flags|=32768,D.subtreeFlags=0,D.deletions=null),!E&&(w=w.sibling,w!==null)){hs=w;return}hs=w=D}while(w!==null);Er=6,hs=null}function YH(w,E,D,z,Z,ie,_e,Ae,qe,We){var yt=se.T,It=ot.p;try{ot.p=2,se.T=null,yve(w,E,D,z,It,Z,ie,_e,Ae,qe,We)}finally{se.T=yt,ot.p=It}}function yve(w,E,D,z,Z,ie,_e,Ae){do m_();while(b1!==null);if((pr&6)!==0)throw Error(s(327));var qe=w.finishedWork;if(z=w.finishedLanes,qe===null)return null;if(w.finishedWork=null,w.finishedLanes=0,qe===w.current)throw Error(s(177));w.callbackNode=null,w.callbackPriority=0,w.cancelPendingCommit=null;var We=qe.lanes|qe.childLanes;if(We|=R7,ve(w,z,We,ie,_e,Ae),w===$n&&(hs=$n=null,Ts=0),(qe.subtreeFlags&10256)===0&&(qe.flags&10256)===0||rP||(rP=!0,VD=We,GD=D,xve(Cs,function(){return m_(),null})),D=(qe.flags&15990)!==0,(qe.subtreeFlags&15990)!==0||D?(D=se.T,se.T=null,ie=ot.p,ot.p=2,_e=pr,pr|=4,ove(w,qe),TH(qe,w),Rt(r8,w.containerInfo),_P=!!n8,r8=n8=null,w.current=qe,SH(w,qe.alternate,qe),ms(),pr=_e,ot.p=ie,se.T=D):w.current=qe,rP?(rP=!1,b1=w,dw=z):XH(w,We),We=w.pendingLanes,We===0&&(qm=null),h(qe.stateNode),md(w),E!==null)for(Z=w.onRecoverableError,qe=0;qe<E.length;qe++)We=E[qe],Z(We.value,{componentStack:We.stack});return(dw&3)!==0&&m_(),We=w.pendingLanes,(z&4194218)!==0&&(We&42)!==0?w===jD?fw++:(fw=0,jD=w):fw=0,pw(0),null}function XH(w,E){(w.pooledCacheLanes&=E)===0&&(E=w.pooledCache,E!=null&&(w.pooledCache=null,Zx(E)))}function m_(){if(b1!==null){var w=b1,E=VD;VD=0;var D=Ie(dw),z=se.T,Z=ot.p;try{if(ot.p=32>D?32:D,se.T=null,b1===null)var ie=!1;else{D=GD,GD=null;var _e=b1,Ae=dw;if(b1=null,dw=0,(pr&6)!==0)throw Error(s(331));var qe=pr;if(pr|=4,kH(_e.current),MH(_e,_e.current,Ae,D),pr=qe,pw(0,!1),p&&typeof p.onPostCommitFiberRoot=="function")try{p.onPostCommitFiberRoot(T,_e)}catch{}ie=!0}return ie}finally{ot.p=Z,se.T=z,XH(w,E)}}return!1}function WH(w,E,D){E=Ku(D,E),E=hD(w.stateNode,E,2),w=$m(w,E,2),w!==null&&(ge(w,2),md(w))}function En(w,E,D){if(w.tag===3)WH(w,w,D);else for(;E!==null;){if(E.tag===3){WH(E,w,D);break}else if(E.tag===1){var z=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(qm===null||!qm.has(z))){w=Ku(D,w),D=JB(2),z=$m(E,D,2),z!==null&&(QB(D,z,E,w),ge(z,2),md(z));break}}E=E.return}}function XD(w,E,D){var z=w.pingCache;if(z===null){z=w.pingCache=new dve;var Z=new Set;z.set(E,Z)}else Z=z.get(E),Z===void 0&&(Z=new Set,z.set(E,Z));Z.has(D)||(LD=!0,Z.add(D),w=vve.bind(null,w,E,D),E.then(w,w))}function vve(w,E,D){var z=w.pingCache;z!==null&&z.delete(E),w.pingedLanes|=w.suspendedLanes&D,w.warmLanes&=~D,$n===w&&(Ts&D)===D&&(Er===4||Er===3&&(Ts&62914560)===Ts&&300>Zi()-qD?(pr&2)===0&&f_(w,0):FD|=D,d_===Ts&&(d_=0)),md(w)}function ZH(w,E){E===0&&(E=ee()),w=Pm(w,E),w!==null&&(ge(w,E),md(w))}function _ve(w){var E=w.memoizedState,D=0;E!==null&&(D=E.retryLane),ZH(w,D)}function bve(w,E){var D=0;switch(w.tag){case 13:var z=w.stateNode,Z=w.memoizedState;Z!==null&&(D=Z.retryLane);break;case 19:z=w.stateNode;break;case 22:z=w.stateNode._retryCache;break;default:throw Error(s(314))}z!==null&&z.delete(E),ZH(w,D)}function xve(w,E){return ri(w,E)}var lP=null,g_=null,WD=!1,uP=!1,ZD=!1,x1=0;function md(w){w!==g_&&w.next===null&&(g_===null?lP=g_=w:g_=g_.next=w),uP=!0,WD||(WD=!0,Sve(wve))}function pw(w,E){if(!ZD&&uP){ZD=!0;do for(var D=!1,z=lP;z!==null;){if(w!==0){var Z=z.pendingLanes;if(Z===0)var ie=0;else{var _e=z.suspendedLanes,Ae=z.pingedLanes;ie=(1<<31-u(42|w)+1)-1,ie&=Z&~(_e&~Ae),ie=ie&201326677?ie&201326677|1:ie?ie|2:0}ie!==0&&(D=!0,QH(z,ie))}else ie=Ts,ie=O(z,z===$n?ie:0),(ie&3)===0||L(z,ie)||(D=!0,QH(z,ie));z=z.next}while(D);ZD=!1}}function wve(){uP=WD=!1;var w=0;x1!==0&&(Dve()&&(w=x1),x1=0);for(var E=Zi(),D=null,z=lP;z!==null;){var Z=z.next,ie=KH(z,E);ie===0?(z.next=null,D===null?lP=Z:D.next=Z,Z===null&&(g_=D)):(D=z,(w!==0||(ie&3)!==0)&&(uP=!0)),z=Z}pw(w)}function KH(w,E){for(var D=w.suspendedLanes,z=w.pingedLanes,Z=w.expirationTimes,ie=w.pendingLanes&-62914561;0<ie;){var _e=31-u(ie),Ae=1<<_e,qe=Z[_e];qe===-1?((Ae&D)===0||(Ae&z)!==0)&&(Z[_e]=q(Ae,E)):qe<=E&&(w.expiredLanes|=Ae),ie&=~Ae}if(E=$n,D=Ts,D=O(w,w===E?D:0),z=w.callbackNode,D===0||w===E&&On===2||w.cancelPendingCommit!==null)return z!==null&&z!==null&&Ai(z),w.callbackNode=null,w.callbackPriority=0;if((D&3)===0||L(w,D)){if(E=D&-D,E===w.callbackPriority)return E;switch(z!==null&&Ai(z),Ie(D)){case 2:case 8:D=jr;break;case 32:D=Cs;break;case 268435456:D=Ys;break;default:D=Cs}return z=JH.bind(null,w),D=ri(D,z),w.callbackPriority=E,w.callbackNode=D,E}return z!==null&&z!==null&&Ai(z),w.callbackPriority=2,w.callbackNode=null,2}function JH(w,E){var D=w.callbackNode;if(m_()&&w.callbackNode!==D)return null;var z=Ts;return z=O(w,w===$n?z:0),z===0?null:(zH(w,z,E),KH(w,Zi()),w.callbackNode!=null&&w.callbackNode===D?JH.bind(null,w):null)}function QH(w,E){if(m_())return null;zH(w,E,!0)}function Sve(w){Nve(function(){(pr&6)!==0?ri(mn,w):w()})}function KD(){return x1===0&&(x1=U()),x1}function eU(w){return w==null||typeof w=="symbol"||typeof w=="boolean"?null:typeof w=="function"?w:Wg(""+w)}function tU(w,E){var D=E.ownerDocument.createElement("input");return D.name=E.name,D.value=E.value,w.id&&D.setAttribute("form",w.id),E.parentNode.insertBefore(D,E),w=new FormData(w),D.parentNode.removeChild(D),w}function Eve(w,E,D,z,Z){if(E==="submit"&&D&&D.stateNode===Z){var ie=eU((Z[dt]||null).action),_e=z.submitter;_e&&(E=(E=_e[dt]||null)?eU(E.formAction):_e.getAttribute("formAction"),E!==null&&(ie=E,_e=null));var Ae=new wm("action","action",null,z,Z);w.push({event:Ae,listeners:[{instance:null,listener:function(){if(z.defaultPrevented){if(x1!==0){var qe=_e?tU(Z,_e):new FormData(Z);oD(D,{pending:!0,data:qe,method:Z.method,action:ie},null,qe)}}else typeof ie=="function"&&(Ae.preventDefault(),qe=_e?tU(Z,_e):new FormData(Z),oD(D,{pending:!0,data:qe,method:Z.method,action:ie},ie,qe))},currentTarget:Z}]})}}for(var JD=0;JD<Yj.length;JD++){var QD=Yj[JD],Cve=QD.toLowerCase(),Pve=QD[0].toUpperCase()+QD.slice(1);th(Cve,"on"+Pve)}th(Wu,"onAnimationEnd"),th(r1,"onAnimationIteration"),th(Cm,"onAnimationStart"),th("dblclick","onDoubleClick"),th("focusin","onFocus"),th("focusout","onBlur"),th(jye,"onTransitionRun"),th(Bye,"onTransitionStart"),th(Hye,"onTransitionCancel"),th(Hj,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tve=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mw));function iU(w,E){E=(E&4)!==0;for(var D=0;D<w.length;D++){var z=w[D],Z=z.event;z=z.listeners;e:{var ie=void 0;if(E)for(var _e=z.length-1;0<=_e;_e--){var Ae=z[_e],qe=Ae.instance,We=Ae.currentTarget;if(Ae=Ae.listener,qe!==ie&&Z.isPropagationStopped())break e;ie=Ae,Z.currentTarget=We;try{ie(Z)}catch(yt){W5(yt)}Z.currentTarget=null,ie=qe}else for(_e=0;_e<z.length;_e++){if(Ae=z[_e],qe=Ae.instance,We=Ae.currentTarget,Ae=Ae.listener,qe!==ie&&Z.isPropagationStopped())break e;ie=Ae,Z.currentTarget=We;try{ie(Z)}catch(yt){W5(yt)}Z.currentTarget=null,ie=qe}}}}function bs(w,E){var D=E[mt];D===void 0&&(D=E[mt]=new Set);var z=w+"__bubble";D.has(z)||(sU(E,w,2,!1),D.add(z))}function e8(w,E,D){var z=0;E&&(z|=4),sU(D,w,z,E)}var cP="_reactListening"+Math.random().toString(36).slice(2);function t8(w){if(!w[cP]){w[cP]=!0,Xs.forEach(function(D){D!=="selectionchange"&&(Tve.has(D)||e8(D,!1,w),e8(D,!0,w))});var E=w.nodeType===9?w:w.ownerDocument;E===null||E[cP]||(E[cP]=!0,e8("selectionchange",!1,E))}}function sU(w,E,D,z){switch(PU(E)){case 2:var Z=Qve;break;case 8:Z=e_e;break;default:Z=p8}D=Z.bind(null,E,D,w),Z=void 0,!Vv||E!=="touchstart"&&E!=="touchmove"&&E!=="wheel"||(Z=!0),z?Z!==void 0?w.addEventListener(E,D,{capture:!0,passive:Z}):w.addEventListener(E,D,!0):Z!==void 0?w.addEventListener(E,D,{passive:Z}):w.addEventListener(E,D,!1)}function i8(w,E,D,z,Z){var ie=z;if((E&1)===0&&(E&2)===0&&z!==null)e:for(;;){if(z===null)return;var _e=z.tag;if(_e===3||_e===4){var Ae=z.stateNode.containerInfo;if(Ae===Z||Ae.nodeType===8&&Ae.parentNode===Z)break;if(_e===4)for(_e=z.return;_e!==null;){var qe=_e.tag;if((qe===3||qe===4)&&(qe=_e.stateNode.containerInfo,qe===Z||qe.nodeType===8&&qe.parentNode===Z))return;_e=_e.return}for(;Ae!==null;){if(_e=_s(Ae),_e===null)return;if(qe=_e.tag,qe===5||qe===6||qe===26||qe===27){z=ie=_e;continue e}Ae=Ae.parentNode}}z=z.return}p5(function(){var We=ie,yt=Zg(D),It=[];e:{var at=Uj.get(w);if(at!==void 0){var gt=wm,di=w;switch(w){case"keypress":if(Df(D)===0)break e;case"keydown":case"keyup":gt=Yv;break;case"focusin":di="focus",gt=Uv;break;case"focusout":di="blur",gt=Uv;break;case"beforeblur":case"afterblur":gt=Uv;break;case"click":if(D.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=g5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=b7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=x5;break;case Wu:case r1:case Cm:gt=x7;break;case Hj:gt=M7;break;case"scroll":case"scrollend":gt=m5;break;case"wheel":gt=D7;break;case"copy":case"cut":case"paste":gt=S7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Fx;break;case"toggle":case"beforetoggle":gt=N7}var Gi=(E&4)!==0,Cr=!Gi&&(w==="scroll"||w==="scrollend"),tt=Gi?at!==null?at+"Capture":null:at;Gi=[];for(var Ye=We,st;Ye!==null;){var Et=Ye;if(st=Et.stateNode,Et=Et.tag,Et!==5&&Et!==26&&Et!==27||st===null||tt===null||(Et=bm(Ye,tt),Et!=null&&Gi.push(gw(Ye,Et,st))),Cr)break;Ye=Ye.return}0<Gi.length&&(at=new gt(at,di,null,D,yt),It.push({event:at,listeners:Gi}))}}if((E&7)===0){e:{if(at=w==="mouseover"||w==="pointerover",gt=w==="mouseout"||w==="pointerout",at&&D!==Rx&&(di=D.relatedTarget||D.fromElement)&&(_s(di)||di[ut]))break e;if((gt||at)&&(at=yt.window===yt?yt:(at=yt.ownerDocument)?at.defaultView||at.parentWindow:window,gt?(di=D.relatedTarget||D.toElement,gt=We,di=di?_s(di):null,di!==null&&(Cr=Re(di),Gi=di.tag,di!==Cr||Gi!==5&&Gi!==27&&Gi!==6)&&(di=null)):(gt=null,di=We),gt!==di)){if(Gi=g5,Et="onMouseLeave",tt="onMouseEnter",Ye="mouse",(w==="pointerout"||w==="pointerover")&&(Gi=Fx,Et="onPointerLeave",tt="onPointerEnter",Ye="pointer"),Cr=gt==null?at:$i(gt),st=di==null?at:$i(di),at=new Gi(Et,Ye+"leave",gt,D,yt),at.target=Cr,at.relatedTarget=st,Et=null,_s(yt)===We&&(Gi=new Gi(tt,Ye+"enter",di,D,yt),Gi.target=st,Gi.relatedTarget=Cr,Et=Gi),Cr=Et,gt&&di)t:{for(Gi=gt,tt=di,Ye=0,st=Gi;st;st=y_(st))Ye++;for(st=0,Et=tt;Et;Et=y_(Et))st++;for(;0<Ye-st;)Gi=y_(Gi),Ye--;for(;0<st-Ye;)tt=y_(tt),st--;for(;Ye--;){if(Gi===tt||tt!==null&&Gi===tt.alternate)break t;Gi=y_(Gi),tt=y_(tt)}Gi=null}else Gi=null;gt!==null&&nU(It,at,gt,Gi,!1),di!==null&&Cr!==null&&nU(It,Cr,di,Gi,!0)}}e:{if(at=We?$i(We):window,gt=at.nodeName&&at.nodeName.toLowerCase(),gt==="select"||gt==="input"&&at.type==="file")var ti=I5;else if(P5(at))if(M5)ti=Te;else{ti=he;var ls=le}else gt=at.nodeName,!gt||gt.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?We&&Ox(We.elementType)&&(ti=I5):ti=be;if(ti&&(ti=ti(w,We))){T5(It,ti,D,yt);break e}ls&&ls(w,at,We),w==="focusout"&&We&&at.type==="number"&&We.memoizedProps.value!=null&&Mf(at,"number",at.value)}switch(ls=We?$i(We):window,w){case"focusin":(P5(ls)||ls.contentEditable==="true")&&(Vt=ls,ai=We,Ii=null);break;case"focusout":Ii=ai=Vt=null;break;case"mousedown":Ji=!0;break;case"contextmenu":case"mouseup":case"dragend":Ji=!1,Si(It,D,yt);break;case"selectionchange":if(Xt)break;case"keydown":case"keyup":Si(It,D,yt)}var yi;if(t1)e:{switch(w){case"compositionstart":var Ci="onCompositionStart";break e;case"compositionend":Ci="onCompositionEnd";break e;case"compositionupdate":Ci="onCompositionUpdate";break e}Ci=void 0}else Xu?E5(w,D)&&(Ci="onCompositionEnd"):w==="keydown"&&D.keyCode===229&&(Ci="onCompositionStart");Ci&&(w5&&D.locale!=="ko"&&(Xu||Ci!=="onCompositionStart"?Ci==="onCompositionEnd"&&Xu&&(yi=xm()):(eh=yt,Gv="value"in eh?eh.value:eh.textContent,Xu=!0)),ls=hP(We,Ci),0<ls.length&&(Ci=new v5(Ci,w,null,D,yt),It.push({event:Ci,listeners:ls}),yi?Ci.data=yi:(yi=zx(D),yi!==null&&(Ci.data=yi)))),(yi=Xv?cd(w,D):C5(w,D))&&(Ci=hP(We,"onBeforeInput"),0<Ci.length&&(ls=new v5("onBeforeInput","beforeinput",null,D,yt),It.push({event:ls,listeners:Ci}),ls.data=yi)),Eve(It,w,We,D,yt)}iU(It,E)})}function gw(w,E,D){return{instance:w,listener:E,currentTarget:D}}function hP(w,E){for(var D=E+"Capture",z=[];w!==null;){var Z=w,ie=Z.stateNode;Z=Z.tag,Z!==5&&Z!==26&&Z!==27||ie===null||(Z=bm(w,D),Z!=null&&z.unshift(gw(w,Z,ie)),Z=bm(w,E),Z!=null&&z.push(gw(w,Z,ie))),w=w.return}return z}function y_(w){if(w===null)return null;do w=w.return;while(w&&w.tag!==5&&w.tag!==27);return w||null}function nU(w,E,D,z,Z){for(var ie=E._reactName,_e=[];D!==null&&D!==z;){var Ae=D,qe=Ae.alternate,We=Ae.stateNode;if(Ae=Ae.tag,qe!==null&&qe===z)break;Ae!==5&&Ae!==26&&Ae!==27||We===null||(qe=We,Z?(We=bm(D,ie),We!=null&&_e.unshift(gw(D,We,qe))):Z||(We=bm(D,ie),We!=null&&_e.push(gw(D,We,qe)))),D=D.return}_e.length!==0&&w.push({event:E,listeners:_e})}var Ive=/\r\n?/g,Mve=/\u0000|\uFFFD/g;function rU(w){return(typeof w=="string"?w:""+w).replace(Ive,`
`).replace(Mve,"")}function oU(w,E){return E=rU(E),rU(w)===E}function dP(){}function vn(w,E,D,z,Z,ie){switch(D){case"children":typeof z=="string"?E==="body"||E==="textarea"&&z===""||ud(w,z):(typeof z=="number"||typeof z=="bigint")&&E!=="body"&&ud(w,""+z);break;case"className":pt(w,"class",z);break;case"tabIndex":pt(w,"tabindex",z);break;case"dir":case"role":case"viewBox":case"width":case"height":pt(w,D,z);break;case"style":$x(w,z,ie);break;case"data":if(E!=="object"){pt(w,"data",z);break}case"src":case"href":if(z===""&&(E!=="a"||D!=="href")){w.removeAttribute(D);break}if(z==null||typeof z=="function"||typeof z=="symbol"||typeof z=="boolean"){w.removeAttribute(D);break}z=Wg(""+z),w.setAttribute(D,z);break;case"action":case"formAction":if(typeof z=="function"){w.setAttribute(D,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ie=="function"&&(D==="formAction"?(E!=="input"&&vn(w,E,"name",Z.name,Z,null),vn(w,E,"formEncType",Z.formEncType,Z,null),vn(w,E,"formMethod",Z.formMethod,Z,null),vn(w,E,"formTarget",Z.formTarget,Z,null)):(vn(w,E,"encType",Z.encType,Z,null),vn(w,E,"method",Z.method,Z,null),vn(w,E,"target",Z.target,Z,null)));if(z==null||typeof z=="symbol"||typeof z=="boolean"){w.removeAttribute(D);break}z=Wg(""+z),w.setAttribute(D,z);break;case"onClick":z!=null&&(w.onclick=dP);break;case"onScroll":z!=null&&bs("scroll",w);break;case"onScrollEnd":z!=null&&bs("scrollend",w);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(s(61));if(D=z.__html,D!=null){if(Z.children!=null)throw Error(s(60));w.innerHTML=D}}break;case"multiple":w.multiple=z&&typeof z!="function"&&typeof z!="symbol";break;case"muted":w.muted=z&&typeof z!="function"&&typeof z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(z==null||typeof z=="function"||typeof z=="boolean"||typeof z=="symbol"){w.removeAttribute("xlink:href");break}D=Wg(""+z),w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",D);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":z!=null&&typeof z!="function"&&typeof z!="symbol"?w.setAttribute(D,""+z):w.removeAttribute(D);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":z&&typeof z!="function"&&typeof z!="symbol"?w.setAttribute(D,""):w.removeAttribute(D);break;case"capture":case"download":z===!0?w.setAttribute(D,""):z!==!1&&z!=null&&typeof z!="function"&&typeof z!="symbol"?w.setAttribute(D,z):w.removeAttribute(D);break;case"cols":case"rows":case"size":case"span":z!=null&&typeof z!="function"&&typeof z!="symbol"&&!isNaN(z)&&1<=z?w.setAttribute(D,z):w.removeAttribute(D);break;case"rowSpan":case"start":z==null||typeof z=="function"||typeof z=="symbol"||isNaN(z)?w.removeAttribute(D):w.setAttribute(D,z);break;case"popover":bs("beforetoggle",w),bs("toggle",w),ze(w,"popover",z);break;case"xlinkActuate":Pt(w,"http://www.w3.org/1999/xlink","xlink:actuate",z);break;case"xlinkArcrole":Pt(w,"http://www.w3.org/1999/xlink","xlink:arcrole",z);break;case"xlinkRole":Pt(w,"http://www.w3.org/1999/xlink","xlink:role",z);break;case"xlinkShow":Pt(w,"http://www.w3.org/1999/xlink","xlink:show",z);break;case"xlinkTitle":Pt(w,"http://www.w3.org/1999/xlink","xlink:title",z);break;case"xlinkType":Pt(w,"http://www.w3.org/1999/xlink","xlink:type",z);break;case"xmlBase":Pt(w,"http://www.w3.org/XML/1998/namespace","xml:base",z);break;case"xmlLang":Pt(w,"http://www.w3.org/XML/1998/namespace","xml:lang",z);break;case"xmlSpace":Pt(w,"http://www.w3.org/XML/1998/namespace","xml:space",z);break;case"is":ze(w,"is",z);break;case"innerText":case"textContent":break;default:(!(2<D.length)||D[0]!=="o"&&D[0]!=="O"||D[1]!=="n"&&D[1]!=="N")&&(D=v7.get(D)||D,ze(w,D,z))}}function s8(w,E,D,z,Z,ie){switch(D){case"style":$x(w,z,ie);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(s(61));if(D=z.__html,D!=null){if(Z.children!=null)throw Error(s(60));w.innerHTML=D}}break;case"children":typeof z=="string"?ud(w,z):(typeof z=="number"||typeof z=="bigint")&&ud(w,""+z);break;case"onScroll":z!=null&&bs("scroll",w);break;case"onScrollEnd":z!=null&&bs("scrollend",w);break;case"onClick":z!=null&&(w.onclick=dP);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ps.hasOwnProperty(D))e:{if(D[0]==="o"&&D[1]==="n"&&(Z=D.endsWith("Capture"),E=D.slice(2,Z?D.length-7:void 0),ie=w[dt]||null,ie=ie!=null?ie[D]:null,typeof ie=="function"&&w.removeEventListener(E,ie,Z),typeof z=="function")){typeof ie!="function"&&ie!==null&&(D in w?w[D]=null:w.hasAttribute(D)&&w.removeAttribute(D)),w.addEventListener(E,z,Z);break e}D in w?w[D]=z:z===!0?w.setAttribute(D,""):ze(w,D,z)}}}function na(w,E,D){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bs("error",w),bs("load",w);var z=!1,Z=!1,ie;for(ie in D)if(D.hasOwnProperty(ie)){var _e=D[ie];if(_e!=null)switch(ie){case"src":z=!0;break;case"srcSet":Z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,E));default:vn(w,E,ie,_e,D,null)}}Z&&vn(w,E,"srcSet",D.srcSet,D,null),z&&vn(w,E,"src",D.src,D,null);return;case"input":bs("invalid",w);var Ae=ie=_e=Z=null,qe=null,We=null;for(z in D)if(D.hasOwnProperty(z)){var yt=D[z];if(yt!=null)switch(z){case"name":Z=yt;break;case"type":_e=yt;break;case"checked":qe=yt;break;case"defaultChecked":We=yt;break;case"value":ie=yt;break;case"defaultValue":Ae=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(s(137,E));break;default:vn(w,E,z,yt,D,null)}}Qc(w,ie,Ae,qe,We,_e,Z,!1),Nn(w);return;case"select":bs("invalid",w),z=_e=ie=null;for(Z in D)if(D.hasOwnProperty(Z)&&(Ae=D[Z],Ae!=null))switch(Z){case"value":ie=Ae;break;case"defaultValue":_e=Ae;break;case"multiple":z=Ae;default:vn(w,E,Z,Ae,D,null)}E=ie,D=_e,w.multiple=!!z,E!=null?ym(w,!!z,E,!1):D!=null&&ym(w,!!z,D,!0);return;case"textarea":bs("invalid",w),ie=Z=z=null;for(_e in D)if(D.hasOwnProperty(_e)&&(Ae=D[_e],Ae!=null))switch(_e){case"value":z=Ae;break;case"defaultValue":Z=Ae;break;case"children":ie=Ae;break;case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(s(91));break;default:vn(w,E,_e,Ae,D,null)}Nx(w,z,Z,ie),Nn(w);return;case"option":for(qe in D)if(D.hasOwnProperty(qe)&&(z=D[qe],z!=null))switch(qe){case"selected":w.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:vn(w,E,qe,z,D,null)}return;case"dialog":bs("cancel",w),bs("close",w);break;case"iframe":case"object":bs("load",w);break;case"video":case"audio":for(z=0;z<mw.length;z++)bs(mw[z],w);break;case"image":bs("error",w),bs("load",w);break;case"details":bs("toggle",w);break;case"embed":case"source":case"link":bs("error",w),bs("load",w);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in D)if(D.hasOwnProperty(We)&&(z=D[We],z!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,E));default:vn(w,E,We,z,D,null)}return;default:if(Ox(E)){for(yt in D)D.hasOwnProperty(yt)&&(z=D[yt],z!==void 0&&s8(w,E,yt,z,D,void 0));return}}for(Ae in D)D.hasOwnProperty(Ae)&&(z=D[Ae],z!=null&&vn(w,E,Ae,z,D,null))}function Ave(w,E,D,z){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Z=null,ie=null,_e=null,Ae=null,qe=null,We=null,yt=null;for(gt in D){var It=D[gt];if(D.hasOwnProperty(gt)&&It!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":qe=It;default:z.hasOwnProperty(gt)||vn(w,E,gt,null,z,It)}}for(var at in z){var gt=z[at];if(It=D[at],z.hasOwnProperty(at)&&(gt!=null||It!=null))switch(at){case"type":ie=gt;break;case"name":Z=gt;break;case"checked":We=gt;break;case"defaultChecked":yt=gt;break;case"value":_e=gt;break;case"defaultValue":Ae=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(s(137,E));break;default:gt!==It&&vn(w,E,at,gt,z,It)}}gm(w,_e,Ae,qe,We,yt,ie,Z);return;case"select":gt=_e=Ae=at=null;for(ie in D)if(qe=D[ie],D.hasOwnProperty(ie)&&qe!=null)switch(ie){case"value":break;case"multiple":gt=qe;default:z.hasOwnProperty(ie)||vn(w,E,ie,null,z,qe)}for(Z in z)if(ie=z[Z],qe=D[Z],z.hasOwnProperty(Z)&&(ie!=null||qe!=null))switch(Z){case"value":at=ie;break;case"defaultValue":Ae=ie;break;case"multiple":_e=ie;default:ie!==qe&&vn(w,E,Z,ie,z,qe)}E=Ae,D=_e,z=gt,at!=null?ym(w,!!D,at,!1):!!z!=!!D&&(E!=null?ym(w,!!D,E,!0):ym(w,!!D,D?[]:"",!1));return;case"textarea":gt=at=null;for(Ae in D)if(Z=D[Ae],D.hasOwnProperty(Ae)&&Z!=null&&!z.hasOwnProperty(Ae))switch(Ae){case"value":break;case"children":break;default:vn(w,E,Ae,null,z,Z)}for(_e in z)if(Z=z[_e],ie=D[_e],z.hasOwnProperty(_e)&&(Z!=null||ie!=null))switch(_e){case"value":at=Z;break;case"defaultValue":gt=Z;break;case"children":break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(91));break;default:Z!==ie&&vn(w,E,_e,Z,z,ie)}kx(w,at,gt);return;case"option":for(var di in D)if(at=D[di],D.hasOwnProperty(di)&&at!=null&&!z.hasOwnProperty(di))switch(di){case"selected":w.selected=!1;break;default:vn(w,E,di,null,z,at)}for(qe in z)if(at=z[qe],gt=D[qe],z.hasOwnProperty(qe)&&at!==gt&&(at!=null||gt!=null))switch(qe){case"selected":w.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:vn(w,E,qe,at,z,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gi in D)at=D[Gi],D.hasOwnProperty(Gi)&&at!=null&&!z.hasOwnProperty(Gi)&&vn(w,E,Gi,null,z,at);for(We in z)if(at=z[We],gt=D[We],z.hasOwnProperty(We)&&at!==gt&&(at!=null||gt!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(s(137,E));break;default:vn(w,E,We,at,z,gt)}return;default:if(Ox(E)){for(var Cr in D)at=D[Cr],D.hasOwnProperty(Cr)&&at!==void 0&&!z.hasOwnProperty(Cr)&&s8(w,E,Cr,void 0,z,at);for(yt in z)at=z[yt],gt=D[yt],!z.hasOwnProperty(yt)||at===gt||at===void 0&&gt===void 0||s8(w,E,yt,at,z,gt);return}}for(var tt in D)at=D[tt],D.hasOwnProperty(tt)&&at!=null&&!z.hasOwnProperty(tt)&&vn(w,E,tt,null,z,at);for(It in z)at=z[It],gt=D[It],!z.hasOwnProperty(It)||at===gt||at==null&&gt==null||vn(w,E,It,at,z,gt)}var n8=null,r8=null;function fP(w){return w.nodeType===9?w:w.ownerDocument}function aU(w){switch(w){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lU(w,E){if(w===0)switch(E){case"svg":return 1;case"math":return 2;default:return 0}return w===1&&E==="foreignObject"?0:w}function o8(w,E){return w==="textarea"||w==="noscript"||typeof E.children=="string"||typeof E.children=="number"||typeof E.children=="bigint"||typeof E.dangerouslySetInnerHTML=="object"&&E.dangerouslySetInnerHTML!==null&&E.dangerouslySetInnerHTML.__html!=null}var a8=null;function Dve(){var w=window.event;return w&&w.type==="popstate"?w===a8?!1:(a8=w,!0):(a8=null,!1)}var uU=typeof setTimeout=="function"?setTimeout:void 0,kve=typeof clearTimeout=="function"?clearTimeout:void 0,cU=typeof Promise=="function"?Promise:void 0,Nve=typeof queueMicrotask=="function"?queueMicrotask:typeof cU<"u"?function(w){return cU.resolve(null).then(w).catch($ve)}:uU;function $ve(w){setTimeout(function(){throw w})}function l8(w,E){var D=E,z=0;do{var Z=D.nextSibling;if(w.removeChild(D),Z&&Z.nodeType===8)if(D=Z.data,D==="/$"){if(z===0){w.removeChild(Z),Ew(E);return}z--}else D!=="$"&&D!=="$?"&&D!=="$!"||z++;D=Z}while(D);Ew(E)}function u8(w){var E=w.firstChild;for(E&&E.nodeType===10&&(E=E.nextSibling);E;){var D=E;switch(E=E.nextSibling,D.nodeName){case"HTML":case"HEAD":case"BODY":u8(D),Ki(D);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(D.rel.toLowerCase()==="stylesheet")continue}w.removeChild(D)}}function Ove(w,E,D,z){for(;w.nodeType===1;){var Z=D;if(w.nodeName.toLowerCase()!==E.toLowerCase()){if(!z&&(w.nodeName!=="INPUT"||w.type!=="hidden"))break}else if(z){if(!w[Ni])switch(E){case"meta":if(!w.hasAttribute("itemprop"))break;return w;case"link":if(ie=w.getAttribute("rel"),ie==="stylesheet"&&w.hasAttribute("data-precedence"))break;if(ie!==Z.rel||w.getAttribute("href")!==(Z.href==null?null:Z.href)||w.getAttribute("crossorigin")!==(Z.crossOrigin==null?null:Z.crossOrigin)||w.getAttribute("title")!==(Z.title==null?null:Z.title))break;return w;case"style":if(w.hasAttribute("data-precedence"))break;return w;case"script":if(ie=w.getAttribute("src"),(ie!==(Z.src==null?null:Z.src)||w.getAttribute("type")!==(Z.type==null?null:Z.type)||w.getAttribute("crossorigin")!==(Z.crossOrigin==null?null:Z.crossOrigin))&&ie&&w.hasAttribute("async")&&!w.hasAttribute("itemprop"))break;return w;default:return w}}else if(E==="input"&&w.type==="hidden"){var ie=Z.name==null?null:""+Z.name;if(Z.type==="hidden"&&w.getAttribute("name")===ie)return w}else return w;if(w=nh(w.nextSibling),w===null)break}return null}function Rve(w,E,D){if(E==="")return null;for(;w.nodeType!==3;)if((w.nodeType!==1||w.nodeName!=="INPUT"||w.type!=="hidden")&&!D||(w=nh(w.nextSibling),w===null))return null;return w}function nh(w){for(;w!=null;w=w.nextSibling){var E=w.nodeType;if(E===1||E===3)break;if(E===8){if(E=w.data,E==="$"||E==="$!"||E==="$?"||E==="F!"||E==="F")break;if(E==="/$")return null}}return w}function hU(w){w=w.previousSibling;for(var E=0;w;){if(w.nodeType===8){var D=w.data;if(D==="$"||D==="$!"||D==="$?"){if(E===0)return w;E--}else D==="/$"&&E++}w=w.previousSibling}return null}function dU(w,E,D){switch(E=fP(D),w){case"html":if(w=E.documentElement,!w)throw Error(s(452));return w;case"head":if(w=E.head,!w)throw Error(s(453));return w;case"body":if(w=E.body,!w)throw Error(s(454));return w;default:throw Error(s(451))}}var rc=new Map,fU=new Set;function pP(w){return typeof w.getRootNode=="function"?w.getRootNode():w.ownerDocument}var Xf=ot.d;ot.d={f:Lve,r:Fve,D:zve,C:qve,L:Vve,m:Gve,X:Bve,S:jve,M:Hve};function Lve(){var w=Xf.f(),E=oP();return w||E}function Fve(w){var E=as(w);E!==null&&E.tag===5&&E.type==="form"?qB(E):Xf.r(w)}var v_=typeof document>"u"?null:document;function pU(w,E,D){var z=v_;if(z&&typeof E=="string"&&E){var Z=Pa(E);Z='link[rel="'+w+'"][href="'+Z+'"]',typeof D=="string"&&(Z+='[crossorigin="'+D+'"]'),fU.has(Z)||(fU.add(Z),w={rel:w,crossOrigin:D,href:E},z.querySelector(Z)===null&&(E=z.createElement("link"),na(E,"link",w),Kt(E),z.head.appendChild(E)))}}function zve(w){Xf.D(w),pU("dns-prefetch",w,null)}function qve(w,E){Xf.C(w,E),pU("preconnect",w,E)}function Vve(w,E,D){Xf.L(w,E,D);var z=v_;if(z&&w&&E){var Z='link[rel="preload"][as="'+Pa(E)+'"]';E==="image"&&D&&D.imageSrcSet?(Z+='[imagesrcset="'+Pa(D.imageSrcSet)+'"]',typeof D.imageSizes=="string"&&(Z+='[imagesizes="'+Pa(D.imageSizes)+'"]')):Z+='[href="'+Pa(w)+'"]';var ie=Z;switch(E){case"style":ie=__(w);break;case"script":ie=b_(w)}rc.has(ie)||(w=oe({rel:"preload",href:E==="image"&&D&&D.imageSrcSet?void 0:w,as:E},D),rc.set(ie,w),z.querySelector(Z)!==null||E==="style"&&z.querySelector(yw(ie))||E==="script"&&z.querySelector(vw(ie))||(E=z.createElement("link"),na(E,"link",w),Kt(E),z.head.appendChild(E)))}}function Gve(w,E){Xf.m(w,E);var D=v_;if(D&&w){var z=E&&typeof E.as=="string"?E.as:"script",Z='link[rel="modulepreload"][as="'+Pa(z)+'"][href="'+Pa(w)+'"]',ie=Z;switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ie=b_(w)}if(!rc.has(ie)&&(w=oe({rel:"modulepreload",href:w},E),rc.set(ie,w),D.querySelector(Z)===null)){switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(D.querySelector(vw(ie)))return}z=D.createElement("link"),na(z,"link",w),Kt(z),D.head.appendChild(z)}}}function jve(w,E,D){Xf.S(w,E,D);var z=v_;if(z&&w){var Z=ci(z).hoistableStyles,ie=__(w);E=E||"default";var _e=Z.get(ie);if(!_e){var Ae={loading:0,preload:null};if(_e=z.querySelector(yw(ie)))Ae.loading=5;else{w=oe({rel:"stylesheet",href:w,"data-precedence":E},D),(D=rc.get(ie))&&c8(w,D);var qe=_e=z.createElement("link");Kt(qe),na(qe,"link",w),qe._p=new Promise(function(We,yt){qe.onload=We,qe.onerror=yt}),qe.addEventListener("load",function(){Ae.loading|=1}),qe.addEventListener("error",function(){Ae.loading|=2}),Ae.loading|=4,mP(_e,E,z)}_e={type:"stylesheet",instance:_e,count:1,state:Ae},Z.set(ie,_e)}}}function Bve(w,E){Xf.X(w,E);var D=v_;if(D&&w){var z=ci(D).hoistableScripts,Z=b_(w),ie=z.get(Z);ie||(ie=D.querySelector(vw(Z)),ie||(w=oe({src:w,async:!0},E),(E=rc.get(Z))&&h8(w,E),ie=D.createElement("script"),Kt(ie),na(ie,"link",w),D.head.appendChild(ie)),ie={type:"script",instance:ie,count:1,state:null},z.set(Z,ie))}}function Hve(w,E){Xf.M(w,E);var D=v_;if(D&&w){var z=ci(D).hoistableScripts,Z=b_(w),ie=z.get(Z);ie||(ie=D.querySelector(vw(Z)),ie||(w=oe({src:w,async:!0,type:"module"},E),(E=rc.get(Z))&&h8(w,E),ie=D.createElement("script"),Kt(ie),na(ie,"link",w),D.head.appendChild(ie)),ie={type:"script",instance:ie,count:1,state:null},z.set(Z,ie))}}function mU(w,E,D,z){var Z=(Z=Us.current)?pP(Z):null;if(!Z)throw Error(s(446));switch(w){case"meta":case"title":return null;case"style":return typeof D.precedence=="string"&&typeof D.href=="string"?(E=__(D.href),D=ci(Z).hoistableStyles,z=D.get(E),z||(z={type:"style",instance:null,count:0,state:null},D.set(E,z)),z):{type:"void",instance:null,count:0,state:null};case"link":if(D.rel==="stylesheet"&&typeof D.href=="string"&&typeof D.precedence=="string"){w=__(D.href);var ie=ci(Z).hoistableStyles,_e=ie.get(w);if(_e||(Z=Z.ownerDocument||Z,_e={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ie.set(w,_e),(ie=Z.querySelector(yw(w)))&&!ie._p&&(_e.instance=ie,_e.state.loading=5),rc.has(w)||(D={rel:"preload",as:"style",href:D.href,crossOrigin:D.crossOrigin,integrity:D.integrity,media:D.media,hrefLang:D.hrefLang,referrerPolicy:D.referrerPolicy},rc.set(w,D),ie||Uve(Z,w,D,_e.state))),E&&z===null)throw Error(s(528,""));return _e}if(E&&z!==null)throw Error(s(529,""));return null;case"script":return E=D.async,D=D.src,typeof D=="string"&&E&&typeof E!="function"&&typeof E!="symbol"?(E=b_(D),D=ci(Z).hoistableScripts,z=D.get(E),z||(z={type:"script",instance:null,count:0,state:null},D.set(E,z)),z):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,w))}}function __(w){return'href="'+Pa(w)+'"'}function yw(w){return'link[rel="stylesheet"]['+w+"]"}function gU(w){return oe({},w,{"data-precedence":w.precedence,precedence:null})}function Uve(w,E,D,z){w.querySelector('link[rel="preload"][as="style"]['+E+"]")?z.loading=1:(E=w.createElement("link"),z.preload=E,E.addEventListener("load",function(){return z.loading|=1}),E.addEventListener("error",function(){return z.loading|=2}),na(E,"link",D),Kt(E),w.head.appendChild(E))}function b_(w){return'[src="'+Pa(w)+'"]'}function vw(w){return"script[async]"+w}function yU(w,E,D){if(E.count++,E.instance===null)switch(E.type){case"style":var z=w.querySelector('style[data-href~="'+Pa(D.href)+'"]');if(z)return E.instance=z,Kt(z),z;var Z=oe({},D,{"data-href":D.href,"data-precedence":D.precedence,href:null,precedence:null});return z=(w.ownerDocument||w).createElement("style"),Kt(z),na(z,"style",Z),mP(z,D.precedence,w),E.instance=z;case"stylesheet":Z=__(D.href);var ie=w.querySelector(yw(Z));if(ie)return E.state.loading|=4,E.instance=ie,Kt(ie),ie;z=gU(D),(Z=rc.get(Z))&&c8(z,Z),ie=(w.ownerDocument||w).createElement("link"),Kt(ie);var _e=ie;return _e._p=new Promise(function(Ae,qe){_e.onload=Ae,_e.onerror=qe}),na(ie,"link",z),E.state.loading|=4,mP(ie,D.precedence,w),E.instance=ie;case"script":return ie=b_(D.src),(Z=w.querySelector(vw(ie)))?(E.instance=Z,Kt(Z),Z):(z=D,(Z=rc.get(ie))&&(z=oe({},D),h8(z,Z)),w=w.ownerDocument||w,Z=w.createElement("script"),Kt(Z),na(Z,"link",z),w.head.appendChild(Z),E.instance=Z);case"void":return null;default:throw Error(s(443,E.type))}else E.type==="stylesheet"&&(E.state.loading&4)===0&&(z=E.instance,E.state.loading|=4,mP(z,D.precedence,w));return E.instance}function mP(w,E,D){for(var z=D.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Z=z.length?z[z.length-1]:null,ie=Z,_e=0;_e<z.length;_e++){var Ae=z[_e];if(Ae.dataset.precedence===E)ie=Ae;else if(ie!==Z)break}ie?ie.parentNode.insertBefore(w,ie.nextSibling):(E=D.nodeType===9?D.head:D,E.insertBefore(w,E.firstChild))}function c8(w,E){w.crossOrigin==null&&(w.crossOrigin=E.crossOrigin),w.referrerPolicy==null&&(w.referrerPolicy=E.referrerPolicy),w.title==null&&(w.title=E.title)}function h8(w,E){w.crossOrigin==null&&(w.crossOrigin=E.crossOrigin),w.referrerPolicy==null&&(w.referrerPolicy=E.referrerPolicy),w.integrity==null&&(w.integrity=E.integrity)}var gP=null;function vU(w,E,D){if(gP===null){var z=new Map,Z=gP=new Map;Z.set(D,z)}else Z=gP,z=Z.get(D),z||(z=new Map,Z.set(D,z));if(z.has(w))return z;for(z.set(w,null),D=D.getElementsByTagName(w),Z=0;Z<D.length;Z++){var ie=D[Z];if(!(ie[Ni]||ie[et]||w==="link"&&ie.getAttribute("rel")==="stylesheet")&&ie.namespaceURI!=="http://www.w3.org/2000/svg"){var _e=ie.getAttribute(E)||"";_e=w+_e;var Ae=z.get(_e);Ae?Ae.push(ie):z.set(_e,[ie])}}return z}function _U(w,E,D){w=w.ownerDocument||w,w.head.insertBefore(D,E==="title"?w.querySelector("head > title"):null)}function Yve(w,E,D){if(D===1||E.itemProp!=null)return!1;switch(w){case"meta":case"title":return!0;case"style":if(typeof E.precedence!="string"||typeof E.href!="string"||E.href==="")break;return!0;case"link":if(typeof E.rel!="string"||typeof E.href!="string"||E.href===""||E.onLoad||E.onError)break;switch(E.rel){case"stylesheet":return w=E.disabled,typeof E.precedence=="string"&&w==null;default:return!0}case"script":if(E.async&&typeof E.async!="function"&&typeof E.async!="symbol"&&!E.onLoad&&!E.onError&&E.src&&typeof E.src=="string")return!0}return!1}function bU(w){return!(w.type==="stylesheet"&&(w.state.loading&3)===0)}var _w=null;function Xve(){}function Wve(w,E,D){if(_w===null)throw Error(s(475));var z=_w;if(E.type==="stylesheet"&&(typeof D.media!="string"||matchMedia(D.media).matches!==!1)&&(E.state.loading&4)===0){if(E.instance===null){var Z=__(D.href),ie=w.querySelector(yw(Z));if(ie){w=ie._p,w!==null&&typeof w=="object"&&typeof w.then=="function"&&(z.count++,z=yP.bind(z),w.then(z,z)),E.state.loading|=4,E.instance=ie,Kt(ie);return}ie=w.ownerDocument||w,D=gU(D),(Z=rc.get(Z))&&c8(D,Z),ie=ie.createElement("link"),Kt(ie);var _e=ie;_e._p=new Promise(function(Ae,qe){_e.onload=Ae,_e.onerror=qe}),na(ie,"link",D),E.instance=ie}z.stylesheets===null&&(z.stylesheets=new Map),z.stylesheets.set(E,w),(w=E.state.preload)&&(E.state.loading&3)===0&&(z.count++,E=yP.bind(z),w.addEventListener("load",E),w.addEventListener("error",E))}}function Zve(){if(_w===null)throw Error(s(475));var w=_w;return w.stylesheets&&w.count===0&&d8(w,w.stylesheets),0<w.count?function(E){var D=setTimeout(function(){if(w.stylesheets&&d8(w,w.stylesheets),w.unsuspend){var z=w.unsuspend;w.unsuspend=null,z()}},6e4);return w.unsuspend=E,function(){w.unsuspend=null,clearTimeout(D)}}:null}function yP(){if(this.count--,this.count===0){if(this.stylesheets)d8(this,this.stylesheets);else if(this.unsuspend){var w=this.unsuspend;this.unsuspend=null,w()}}}var vP=null;function d8(w,E){w.stylesheets=null,w.unsuspend!==null&&(w.count++,vP=new Map,E.forEach(Kve,w),vP=null,yP.call(w))}function Kve(w,E){if(!(E.state.loading&4)){var D=vP.get(w);if(D)var z=D.get(null);else{D=new Map,vP.set(w,D);for(var Z=w.querySelectorAll("link[data-precedence],style[data-precedence]"),ie=0;ie<Z.length;ie++){var _e=Z[ie];(_e.nodeName==="LINK"||_e.getAttribute("media")!=="not all")&&(D.set(_e.dataset.precedence,_e),z=_e)}z&&D.set(null,z)}Z=E.instance,_e=Z.getAttribute("data-precedence"),ie=D.get(_e)||z,ie===z&&D.set(null,Z),D.set(_e,Z),this.count++,z=yP.bind(this),Z.addEventListener("load",z),Z.addEventListener("error",z),ie?ie.parentNode.insertBefore(Z,ie.nextSibling):(w=w.nodeType===9?w.head:w,w.insertBefore(Z,w.firstChild)),E.state.loading|=4}}var bw={$$typeof:S,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function Jve(w,E,D,z,Z,ie,_e,Ae){this.tag=1,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Q(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q(0),this.hiddenUpdates=Q(null),this.identifierPrefix=z,this.onUncaughtError=Z,this.onCaughtError=ie,this.onRecoverableError=_e,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function xU(w,E,D,z,Z,ie,_e,Ae,qe,We,yt,It){return w=new Jve(w,E,D,_e,Ae,qe,We,It),E=1,ie===!0&&(E|=24),ie=sc(3,null,null,E),w.current=ie,ie.stateNode=w,E=B7(),E.refCount++,w.pooledCache=E,E.refCount++,ie.memoizedState={element:z,isDehydrated:D,cache:E},ED(ie),w}function wU(w){return w?(w=Jv,w):Jv}function SU(w,E,D,z,Z,ie){Z=wU(Z),z.context===null?z.context=Z:z.pendingContext=Z,z=Nm(E),z.payload={element:D},ie=ie===void 0?null:ie,ie!==null&&(z.callback=ie),D=$m(w,z,E),D!==null&&(sl(D,w,E),sw(D,w,E))}function EU(w,E){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var D=w.retryLane;w.retryLane=D!==0&&D<E?D:E}}function f8(w,E){EU(w,E),(w=w.alternate)&&EU(w,E)}function CU(w){if(w.tag===13){var E=Pm(w,67108864);E!==null&&sl(E,w,67108864),f8(w,67108864)}}var _P=!0;function Qve(w,E,D,z){var Z=se.T;se.T=null;var ie=ot.p;try{ot.p=2,p8(w,E,D,z)}finally{ot.p=ie,se.T=Z}}function e_e(w,E,D,z){var Z=se.T;se.T=null;var ie=ot.p;try{ot.p=8,p8(w,E,D,z)}finally{ot.p=ie,se.T=Z}}function p8(w,E,D,z){if(_P){var Z=m8(z);if(Z===null)i8(w,E,z,bP,D),TU(w,z);else if(i_e(Z,w,E,D,z))z.stopPropagation();else if(TU(w,z),E&4&&-1<t_e.indexOf(w)){for(;Z!==null;){var ie=as(Z);if(ie!==null)switch(ie.tag){case 3:if(ie=ie.stateNode,ie.current.memoizedState.isDehydrated){var _e=M(ie.pendingLanes);if(_e!==0){var Ae=ie;for(Ae.pendingLanes|=2,Ae.entangledLanes|=2;_e;){var qe=1<<31-u(_e);Ae.entanglements[1]|=qe,_e&=~qe}md(ie),(pr&6)===0&&(sP=Zi()+500,pw(0))}}break;case 13:Ae=Pm(ie,2),Ae!==null&&sl(Ae,ie,2),oP(),f8(ie,2)}if(ie=m8(z),ie===null&&i8(w,E,z,bP,D),ie===Z)break;Z=ie}Z!==null&&z.stopPropagation()}else i8(w,E,z,null,D)}}function m8(w){return w=Zg(w),g8(w)}var bP=null;function g8(w){if(bP=null,w=_s(w),w!==null){var E=Re(w);if(E===null)w=null;else{var D=E.tag;if(D===13){if(w=Oe(E),w!==null)return w;w=null}else if(D===3){if(E.stateNode.current.memoizedState.isDehydrated)return E.tag===3?E.stateNode.containerInfo:null;w=null}else E!==w&&(w=null)}}return bP=w,null}function PU(w){switch(w){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tn()){case mn:return 2;case jr:return 8;case Cs:case xt:return 32;case Ys:return 268435456;default:return 32}default:return 32}}var y8=!1,Vm=null,Gm=null,jm=null,xw=new Map,ww=new Map,Bm=[],t_e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TU(w,E){switch(w){case"focusin":case"focusout":Vm=null;break;case"dragenter":case"dragleave":Gm=null;break;case"mouseover":case"mouseout":jm=null;break;case"pointerover":case"pointerout":xw.delete(E.pointerId);break;case"gotpointercapture":case"lostpointercapture":ww.delete(E.pointerId)}}function Sw(w,E,D,z,Z,ie){return w===null||w.nativeEvent!==ie?(w={blockedOn:E,domEventName:D,eventSystemFlags:z,nativeEvent:ie,targetContainers:[Z]},E!==null&&(E=as(E),E!==null&&CU(E)),w):(w.eventSystemFlags|=z,E=w.targetContainers,Z!==null&&E.indexOf(Z)===-1&&E.push(Z),w)}function i_e(w,E,D,z,Z){switch(E){case"focusin":return Vm=Sw(Vm,w,E,D,z,Z),!0;case"dragenter":return Gm=Sw(Gm,w,E,D,z,Z),!0;case"mouseover":return jm=Sw(jm,w,E,D,z,Z),!0;case"pointerover":var ie=Z.pointerId;return xw.set(ie,Sw(xw.get(ie)||null,w,E,D,z,Z)),!0;case"gotpointercapture":return ie=Z.pointerId,ww.set(ie,Sw(ww.get(ie)||null,w,E,D,z,Z)),!0}return!1}function IU(w){var E=_s(w.target);if(E!==null){var D=Re(E);if(D!==null){if(E=D.tag,E===13){if(E=Oe(D),E!==null){w.blockedOn=E,Ve(w.priority,function(){if(D.tag===13){var z=ou(),Z=Pm(D,z);Z!==null&&sl(Z,D,z),f8(D,z)}});return}}else if(E===3&&D.stateNode.current.memoizedState.isDehydrated){w.blockedOn=D.tag===3?D.stateNode.containerInfo:null;return}}}w.blockedOn=null}function xP(w){if(w.blockedOn!==null)return!1;for(var E=w.targetContainers;0<E.length;){var D=m8(w.nativeEvent);if(D===null){D=w.nativeEvent;var z=new D.constructor(D.type,D);Rx=z,D.target.dispatchEvent(z),Rx=null}else return E=as(D),E!==null&&CU(E),w.blockedOn=D,!1;E.shift()}return!0}function MU(w,E,D){xP(w)&&D.delete(E)}function s_e(){y8=!1,Vm!==null&&xP(Vm)&&(Vm=null),Gm!==null&&xP(Gm)&&(Gm=null),jm!==null&&xP(jm)&&(jm=null),xw.forEach(MU),ww.forEach(MU)}function wP(w,E){w.blockedOn===E&&(w.blockedOn=null,y8||(y8=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,s_e)))}var SP=null;function AU(w){SP!==w&&(SP=w,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){SP===w&&(SP=null);for(var E=0;E<w.length;E+=3){var D=w[E],z=w[E+1],Z=w[E+2];if(typeof z!="function"){if(g8(z||D)===null)continue;break}var ie=as(D);ie!==null&&(w.splice(E,3),E-=3,oD(ie,{pending:!0,data:Z,method:D.method,action:z},z,Z))}}))}function Ew(w){function E(qe){return wP(qe,w)}Vm!==null&&wP(Vm,w),Gm!==null&&wP(Gm,w),jm!==null&&wP(jm,w),xw.forEach(E),ww.forEach(E);for(var D=0;D<Bm.length;D++){var z=Bm[D];z.blockedOn===w&&(z.blockedOn=null)}for(;0<Bm.length&&(D=Bm[0],D.blockedOn===null);)IU(D),D.blockedOn===null&&Bm.shift();if(D=(w.ownerDocument||w).$$reactFormReplay,D!=null)for(z=0;z<D.length;z+=3){var Z=D[z],ie=D[z+1],_e=Z[dt]||null;if(typeof ie=="function")_e||AU(D);else if(_e){var Ae=null;if(ie&&ie.hasAttribute("formAction")){if(Z=ie,_e=ie[dt]||null)Ae=_e.formAction;else if(g8(Z)!==null)continue}else Ae=_e.action;typeof Ae=="function"?D[z+1]=Ae:(D.splice(z,3),z-=3),AU(D)}}}function v8(w){this._internalRoot=w}EP.prototype.render=v8.prototype.render=function(w){var E=this._internalRoot;if(E===null)throw Error(s(409));var D=E.current,z=ou();SU(D,z,w,E,null,null)},EP.prototype.unmount=v8.prototype.unmount=function(){var w=this._internalRoot;if(w!==null){this._internalRoot=null;var E=w.containerInfo;w.tag===0&&m_(),SU(w.current,2,null,w,null,null),oP(),E[ut]=null}};function EP(w){this._internalRoot=w}EP.prototype.unstable_scheduleHydration=function(w){if(w){var E=Ne();w={blockedOn:null,target:w,priority:E};for(var D=0;D<Bm.length&&E!==0&&E<Bm[D].priority;D++);Bm.splice(D,0,w),D===0&&IU(w)}};var DU=e.version;if(DU!=="19.0.0")throw Error(s(527,DU,"19.0.0"));ot.findDOMNode=function(w){var E=w._reactInternals;if(E===void 0)throw typeof w.render=="function"?Error(s(188)):(w=Object.keys(w).join(","),Error(s(268,w)));return w=Fe(E),w=w!==null?it(w):null,w=w===null?null:w.stateNode,w};var n_e={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:se,findFiberByHostInstance:_s,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CP.isDisabled&&CP.supportsFiber)try{T=CP.inject(n_e),p=CP}catch{}}return Pw.createRoot=function(w,E){if(!n(w))throw Error(s(299));var D=!1,z="",Z=XB,ie=WB,_e=ZB,Ae=null;return E!=null&&(E.unstable_strictMode===!0&&(D=!0),E.identifierPrefix!==void 0&&(z=E.identifierPrefix),E.onUncaughtError!==void 0&&(Z=E.onUncaughtError),E.onCaughtError!==void 0&&(ie=E.onCaughtError),E.onRecoverableError!==void 0&&(_e=E.onRecoverableError),E.unstable_transitionCallbacks!==void 0&&(Ae=E.unstable_transitionCallbacks)),E=xU(w,1,!1,null,null,D,z,Z,ie,_e,Ae,null),w[ut]=E.current,t8(w.nodeType===8?w.parentNode:w),new v8(E)},Pw.hydrateRoot=function(w,E,D){if(!n(w))throw Error(s(299));var z=!1,Z="",ie=XB,_e=WB,Ae=ZB,qe=null,We=null;return D!=null&&(D.unstable_strictMode===!0&&(z=!0),D.identifierPrefix!==void 0&&(Z=D.identifierPrefix),D.onUncaughtError!==void 0&&(ie=D.onUncaughtError),D.onCaughtError!==void 0&&(_e=D.onCaughtError),D.onRecoverableError!==void 0&&(Ae=D.onRecoverableError),D.unstable_transitionCallbacks!==void 0&&(qe=D.unstable_transitionCallbacks),D.formState!==void 0&&(We=D.formState)),E=xU(w,1,!0,E,D??null,z,Z,ie,_e,Ae,qe,We),E.context=wU(null),D=E.current,z=ou(),Z=Nm(z),Z.callback=null,$m(D,Z,z),E.current.lanes=z,ge(E,z),md(E),w[ut]=E.current,t8(w),new EP(E)},Pw.version="19.0.0",Pw}var VU;function m_e(){if(VU)return x8.exports;VU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),x8.exports=p_e(),x8.exports}var g_e=m_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const y_e="calcite-mode-auto",Bse="calcite-mode-dark",v_e="calcite-mode-light",Yd={darkMode:Bse,lightMode:v_e,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},GU={filter:250,resize:150,reposition:100},__e="modulepreload",b_e=function(t,e){return new URL(t,e).href},jU={},nt=function(e,i,s){let n=Promise.resolve();if(i&&i.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(i.map(f=>{if(f=b_e(f,s),f in jU)return;jU[f]=!0;const y=f.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(!!s)for(let P=o.length-1;P>=0;P--){const A=o[P];if(A.href===f&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${_}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":__e,y||(S.as="script"),S.crossOrigin="",S.href=f,c&&S.setAttribute("nonce",c),document.head.appendChild(S),y)return new Promise((P,A)=>{S.addEventListener("load",P),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};var Oh={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},x_e=Object.defineProperty,w_e=(t,e)=>{for(var i in e)x_e(t,i,{get:e[i],enumerable:!0})},Hse=new WeakMap,Sv=t=>Hse.get(t),S_e=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return Hse.set(t,i)},BU=(t,e)=>e in t,tC=(t,e)=>(0,console.error)(t,e),V9=new Map,E_e=[],C_e="slot-fb{display:contents}slot-fb[hidden]{display:none}",HU="http://www.w3.org/1999/xlink",iC=typeof window<"u"?window:{},Bh=iC.document||{head:{}},es=iC.HTMLElement||class{},Xo={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,s)=>t.addEventListener(e,i,s),rel:(t,e,i,s)=>t.removeEventListener(e,i,s),ce:(t,e)=>new CustomEvent(t,e)},P_e=(()=>{let t=!1;try{Bh.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),T_e=t=>Promise.resolve(t),I_e=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),JN=!1,QN=[],Use=[],Yse=(t,e)=>i=>{t.push(i),JN||(JN=!0,e&&Xo.$flags$&4?M_e(e$):Xo.raf(e$))},UU=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){tC(i)}t.length=0},e$=()=>{UU(QN),UU(Use),(JN=QN.length>0)&&Xo.raf(e$)},M_e=t=>T_e().then(t),A_e=Yse(QN,!1),D_e=Yse(Use,!0),Vz=t=>{const e=new URL(t,Xo.$resourcesUrl$);return e.origin!==iC.location.origin?e.href:e.pathname},Xse=t=>Xo.$resourcesUrl$=t,YU={},k_e="http://www.w3.org/2000/svg",N_e="http://www.w3.org/1999/xhtml",$_e=t=>t!=null,Gz=t=>(t=typeof t,t==="object"||t==="function");function O_e(t){var e,i,s;return(s=(i=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:i.getAttribute("content"))!=null?s:void 0}var R_e={};w_e(R_e,{err:()=>Wse,map:()=>L_e,ok:()=>t$,unwrap:()=>F_e,unwrapErr:()=>z_e});var t$=t=>({isOk:!0,isErr:!1,value:t}),Wse=t=>({isOk:!1,isErr:!0,value:t});function L_e(t,e){if(t.isOk){const i=e(t.value);return i instanceof Promise?i.then(s=>t$(s)):t$(i)}if(t.isErr){const i=t.value;return Wse(i)}throw"should never get here"}var F_e=t=>{if(t.isOk)return t.value;throw t.value},z_e=t=>{if(t.isErr)return t.value;throw t.value},Hy=(t,e="")=>()=>{},ke=(t,e,...i)=>{let s=null,n=null,r=null,o=!1,l=!1;const c=[],f=_=>{for(let x=0;x<_.length;x++)s=_[x],Array.isArray(s)?f(s):s!=null&&typeof s!="boolean"&&((o=typeof t!="function"&&!Gz(s))&&(s=String(s)),o&&l?c[c.length-1].$text$+=s:c.push(o?G9(null,s):s),l=o)};if(f(i),e){e.key&&(n=e.key),e.name&&(r=e.name);{const _=e.className||e.class;_&&(e.class=typeof _!="object"?_:Object.keys(_).filter(x=>_[x]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,c,V_e);const y=G9(t,null);return y.$attrs$=e,c.length>0&&(y.$children$=c),y.$key$=n,y.$name$=r,y},G9=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Nr={},q_e=t=>t&&t.$tag$===Nr,V_e={forEach:(t,e)=>t.map(XU).forEach(e),map:(t,e)=>t.map(XU).map(e).map(G_e)},XU=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),G_e=t=>{if(typeof t.vtag=="function"){const i={...t.vattrs};return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),ke(t.vtag,i,...t.vchildren||[])}const e=G9(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},j_e=t=>E_e.map(e=>e(t)).find(e=>!!e),B_e=(t,e)=>t!=null&&!Gz(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,H_e=t=>t,Ot=(t,e,i)=>{const s=H_e(t);return{emit:n=>U_e(s,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},U_e=(t,e,i)=>{const s=Xo.ce(e,i);return t.dispatchEvent(s),s},WU=new WeakMap,Y_e=(t,e,i)=>{let s=V9.get(t);I_e&&i?(s=s||new CSSStyleSheet,typeof s=="string"?s=e:s.replaceSync(e)):s=e,V9.set(t,s)},X_e=(t,e,i)=>{var s;const n=Zse(e,i),r=V9.get(n);if(t=t.nodeType===11?t:Bh,r)if(typeof r=="string"){t=t.head||t;let o=WU.get(t),l;if(o||WU.set(t,o=new Set),!o.has(n)){{l=Bh.createElement("style"),l.innerHTML=r;const c=(s=Xo.$nonce$)!=null?s:O_e(Bh);c!=null&&l.setAttribute("nonce",c),(!(e.$flags$&1)||e.$flags$&1&&t.nodeName!=="HEAD")&&t.insertBefore(l,t.querySelector("link"))}e.$flags$&4&&(l.innerHTML+=C_e),o&&o.add(n)}}else t.adoptedStyleSheets.includes(r)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,r]);return n},W_e=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,s=e.$flags$,n=Hy("attachStyles",e.$tagName$),r=X_e(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);s&10&&s&2&&(i["s-sc"]=r,i.classList.add(r+"-h"),s&2&&i.classList.add(r+"-s")),n()},Zse=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),ZU=(t,e,i,s,n,r)=>{if(i!==s){let o=BU(t,e),l=e.toLowerCase();if(e==="class"){const c=t.classList,f=KU(i),y=KU(s);c.remove(...f.filter(_=>_&&!y.includes(_))),c.add(...y.filter(_=>_&&!f.includes(_)))}else if(e==="style"){for(const c in i)(!s||s[c]==null)&&(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in s)(!i||s[c]!==i[c])&&(c.includes("-")?t.style.setProperty(c,s[c]):t.style[c]=s[c])}else if(e!=="key")if(e==="ref")s&&s(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):BU(iC,l)?e=l.slice(2):e=l[2]+e.slice(3),i||s){const c=e.endsWith(Kse);e=e.replace(K_e,""),i&&Xo.rel(t,e,i,c),s&&Xo.ael(t,e,s,c)}}else{const c=Gz(s);if((o||c&&s!==null)&&!n)try{if(t.tagName.includes("-"))t[e]=s;else{const y=s??"";e==="list"?o=!1:(i==null||t[e]!=y)&&(t[e]=y)}}catch{}let f=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(e=l,f=!0),s==null||s===!1?(s!==!1||t.getAttribute(e)==="")&&(f?t.removeAttributeNS(HU,e):t.removeAttribute(e)):(!o||r&4||n)&&!c&&(s=s===!0?"":s,f?t.setAttributeNS(HU,e,s):t.setAttribute(e,s))}}},Z_e=/\s/,KU=t=>t?t.split(Z_e):[],Kse="Capture",K_e=new RegExp(Kse+"$"),Jse=(t,e,i)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,n=t&&t.$attrs$||YU,r=e.$attrs$||YU;for(const o of JU(Object.keys(n)))o in r||ZU(s,o,n[o],void 0,i,e.$flags$);for(const o of JU(Object.keys(r)))ZU(s,o,n[o],r[o],i,e.$flags$)};function JU(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var q_,i$,YS,j9=!1,B9=!1,jz=!1,wu=!1,H9=(t,e,i,s)=>{var n;const r=e.$children$[i];let o=0,l,c,f;if(j9||(jz=!0,r.$tag$==="slot"&&(q_&&s.classList.add(q_+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)l=r.$elm$=Bh.createTextNode(r.$text$);else if(r.$flags$&1)l=r.$elm$=Bh.createTextNode("");else{if(wu||(wu=r.$tag$==="svg"),l=r.$elm$=Bh.createElementNS(wu?k_e:N_e,!j9&&Oh.slotRelocation&&r.$flags$&2?"slot-fb":r.$tag$),wu&&r.$tag$==="foreignObject"&&(wu=!1),Jse(null,r,wu),!!l.getRootNode().querySelector("body")&&Oh.scoped&&$_e(q_)&&l["s-si"]!==q_&&l.classList.add(l["s-si"]=q_),Hz(l,s),r.$children$)for(o=0;o<r.$children$.length;++o)c=H9(t,r,o,l),c&&l.appendChild(c);r.$tag$==="svg"?wu=!1:l.tagName==="foreignObject"&&(wu=!0)}return l["s-hn"]=YS,r.$flags$&3&&(l["s-sr"]=!0,l["s-cr"]=i$,l["s-sn"]=r.$name$||"",l["s-rf"]=(n=r.$attrs$)==null?void 0:n.ref,f=t&&t.$children$&&t.$children$[i],f&&f.$tag$===r.$tag$&&t.$elm$&&XS(t.$elm$,!1)),l},XS=(t,e)=>{Xo.$flags$|=1;const i=Array.from(t.childNodes);t["s-sr"]&&Oh.experimentalSlotFixes;for(let s=i.length-1;s>=0;s--){const n=i[s];n["s-hn"]!==YS&&n["s-ol"]&&(sg(tne(n),n,Bz(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,jz=!0),e&&XS(n,e)}Xo.$flags$&=-2},Qse=(t,e,i,s,n,r)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,l;for(o.shadowRoot&&o.tagName===YS&&(o=o.shadowRoot);n<=r;++n)s[n]&&(l=H9(null,i,n,t),l&&(s[n].$elm$=l,sg(o,l,Bz(e))))},ene=(t,e,i)=>{for(let s=e;s<=i;++s){const n=t[s];if(n){const r=n.$elm$;nne(n),r&&(B9=!0,r["s-ol"]?r["s-ol"].remove():XS(r,!0),r.remove())}}},J_e=(t,e,i,s,n=!1)=>{let r=0,o=0,l=0,c=0,f=e.length-1,y=e[0],_=e[f],x=s.length-1,S=s[0],P=s[x],A,k;for(;r<=f&&o<=x;)if(y==null)y=e[++r];else if(_==null)_=e[--f];else if(S==null)S=s[++o];else if(P==null)P=s[--x];else if(PP(y,S,n))V_(y,S,n),y=e[++r],S=s[++o];else if(PP(_,P,n))V_(_,P,n),_=e[--f],P=s[--x];else if(PP(y,P,n))(y.$tag$==="slot"||P.$tag$==="slot")&&XS(y.$elm$.parentNode,!1),V_(y,P,n),sg(t,y.$elm$,_.$elm$.nextSibling),y=e[++r],P=s[--x];else if(PP(_,S,n))(y.$tag$==="slot"||P.$tag$==="slot")&&XS(_.$elm$.parentNode,!1),V_(_,S,n),sg(t,_.$elm$,y.$elm$),_=e[--f],S=s[++o];else{for(l=-1,c=r;c<=f;++c)if(e[c]&&e[c].$key$!==null&&e[c].$key$===S.$key$){l=c;break}l>=0?(k=e[l],k.$tag$!==S.$tag$?A=H9(e&&e[o],i,l,t):(V_(k,S,n),e[l]=void 0,A=k.$elm$),S=s[++o]):(A=H9(e&&e[o],i,o,t),S=s[++o]),A&&sg(tne(y.$elm$),A,Bz(y.$elm$))}r>f?Qse(t,s[x+1]==null?null:s[x+1].$elm$,i,s,o,x):o>x&&ene(e,r,f)},PP=(t,e,i=!1)=>t.$tag$===e.$tag$?t.$tag$==="slot"?"$nodeId$"in t&&i&&t.$elm$.nodeType!==8?!1:t.$name$===e.$name$:i?!0:t.$key$===e.$key$:!1,Bz=t=>t&&t["s-ol"]||t,tne=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,V_=(t,e,i=!1)=>{const s=e.$elm$=t.$elm$,n=t.$children$,r=e.$children$,o=e.$tag$,l=e.$text$;let c;l===null?(wu=o==="svg"?!0:o==="foreignObject"?!1:wu,o==="slot"&&!j9||Jse(t,e,wu),n!==null&&r!==null?J_e(s,n,e,r,i):r!==null?(t.$text$!==null&&(s.textContent=""),Qse(s,null,e,r,0,r.length-1)):!i&&Oh.updatable&&n!==null&&ene(n,0,n.length-1),wu&&o==="svg"&&(wu=!1)):(c=s["s-cr"])?c.parentNode.textContent=l:t.$text$!==l&&(s.data=l)},ine=t=>{const e=t.childNodes;for(const i of e)if(i.nodeType===1){if(i["s-sr"]){const s=i["s-sn"];i.hidden=!1;for(const n of e)if(n!==i){if(n["s-hn"]!==i["s-hn"]||s!==""){if(n.nodeType===1&&(s===n.getAttribute("slot")||s===n["s-sn"])||n.nodeType===3&&s===n["s-sn"]){i.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){i.hidden=!0;break}}}ine(i)}},Tp=[],sne=t=>{let e,i,s;for(const n of t.childNodes){if(n["s-sr"]&&(e=n["s-cr"])&&e.parentNode){i=e.parentNode.childNodes;const r=n["s-sn"];for(s=i.length-1;s>=0;s--)if(e=i[s],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==n["s-hn"])if(QU(e,r)){let o=Tp.find(l=>l.$nodeToRelocate$===e);B9=!0,e["s-sn"]=e["s-sn"]||r,o?(o.$nodeToRelocate$["s-sh"]=n["s-hn"],o.$slotRefNode$=n):(e["s-sh"]=n["s-hn"],Tp.push({$slotRefNode$:n,$nodeToRelocate$:e})),e["s-sr"]&&Tp.map(l=>{QU(l.$nodeToRelocate$,e["s-sn"])&&(o=Tp.find(c=>c.$nodeToRelocate$===e),o&&!l.$slotRefNode$&&(l.$slotRefNode$=o.$slotRefNode$))})}else Tp.some(o=>o.$nodeToRelocate$===e)||Tp.push({$nodeToRelocate$:e})}n.nodeType===1&&sne(n)}},QU=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",nne=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(nne)},sg=(t,e,i)=>{const s=t==null?void 0:t.insertBefore(e,i);return Hz(e,t),s},rne=t=>{const e=[];return t&&e.push(...t["s-scs"]||[],t["s-si"],t["s-sc"],...rne(t.parentElement)),e},Hz=(t,e,i=!1)=>{var s;if(t&&e&&t.nodeType===1){const n=new Set(rne(e).filter(Boolean));if(n.size&&((s=t.classList)==null||s.add(...t["s-scs"]=[...n]),t["s-ol"]||i))for(const r of Array.from(t.childNodes))Hz(r,t,!0)}},Q_e=(t,e,i=!1)=>{var s,n,r,o,l;const c=t.$hostElement$,f=t.$cmpMeta$,y=t.$vnode$||G9(null,null),_=q_e(e)?e:ke(null,null,e);if(YS=c.tagName,f.$attrsToReflect$&&(_.$attrs$=_.$attrs$||{},f.$attrsToReflect$.map(([x,S])=>_.$attrs$[S]=c[x])),i&&_.$attrs$)for(const x of Object.keys(_.$attrs$))c.hasAttribute(x)&&!["key","ref","style","class"].includes(x)&&(_.$attrs$[x]=c[x]);_.$tag$=null,_.$flags$|=4,t.$vnode$=_,_.$elm$=y.$elm$=c.shadowRoot||c,q_=c["s-sc"],j9=(f.$flags$&1)!==0,i$=c["s-cr"],B9=!1,V_(y,_,i);{if(Xo.$flags$|=1,jz){sne(_.$elm$);for(const x of Tp){const S=x.$nodeToRelocate$;if(!S["s-ol"]){const P=Bh.createTextNode("");P["s-nr"]=S,sg(S.parentNode,S["s-ol"]=P,S)}}for(const x of Tp){const S=x.$nodeToRelocate$,P=x.$slotRefNode$;if(P){const A=P.parentNode;let k=P.nextSibling;{let $=(s=S["s-ol"])==null?void 0:s.previousSibling;for(;$;){let F=(n=$["s-nr"])!=null?n:null;if(F&&F["s-sn"]===S["s-sn"]&&A===F.parentNode){for(F=F.nextSibling;F===S||F!=null&&F["s-sr"];)F=F==null?void 0:F.nextSibling;if(!F||!F["s-nr"]){k=F;break}}$=$.previousSibling}}(!k&&A!==S.parentNode||S.nextSibling!==k)&&S!==k&&(!S["s-hn"]&&S["s-ol"]&&(S["s-hn"]=S["s-ol"].parentNode.nodeName),sg(A,S,k),S.nodeType===1&&(S.hidden=(r=S["s-ih"])!=null?r:!1)),S&&typeof P["s-rf"]=="function"&&P["s-rf"](S)}else S.nodeType===1&&(i&&(S["s-ih"]=(o=S.hidden)!=null?o:!1),S.hidden=!0)}}B9&&ine(_.$elm$),Xo.$flags$&=-2,Tp.length=0}if(Oh.experimentalScopedSlotChanges&&f.$flags$&2)for(const x of _.$elm$.childNodes)x["s-hn"]!==YS&&!x["s-sh"]&&(i&&x["s-ih"]==null&&(x["s-ih"]=(l=x.hidden)!=null?l:!1),x.hidden=!0);i$=void 0},ebe=(t,e)=>{},Uz=(t,e)=>(t.$flags$|=16,ebe(t,t.$ancestorComponent$),D_e(()=>tbe(t,e))),tbe=(t,e)=>{const i=t.$hostElement$,s=Hy("scheduleUpdate",t.$cmpMeta$.$tagName$),n=i;if(!n)throw new Error(`Can't render component <${i.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return e?r=Fb(n,"componentWillLoad"):r=Fb(n,"componentWillUpdate"),r=eY(r,()=>Fb(n,"componentWillRender")),s(),eY(r,()=>sbe(t,n,e))},eY=(t,e)=>ibe(t)?t.then(e).catch(i=>{console.error(i),e()}):e(),ibe=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",sbe=async(t,e,i)=>{const s=t.$hostElement$,n=Hy("update",t.$cmpMeta$.$tagName$);s["s-rc"],i&&W_e(t);const r=Hy("render",t.$cmpMeta$.$tagName$);nbe(t,e,s,i),r(),n(),rbe(t)},tY=null,nbe=(t,e,i,s)=>{try{tY=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Oh.hasRenderFn||Oh.reflect)&&(Oh.vdomRender||Oh.reflect)&&(Oh.hydrateServerSide||Q_e(t,e,s))}catch(c){tC(c,t.$hostElement$)}return tY=null,null},rbe=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,s=Hy("postUpdate",e),n=i;t.$ancestorComponent$,Fb(n,"componentDidRender"),t.$flags$&64?(Fb(n,"componentDidUpdate"),s()):(t.$flags$|=64,Fb(n,"componentDidLoad"),s())},So=t=>{{const e=Sv(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&Uz(e,!1),i}},Fb=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(s){tC(s)}},obe=(t,e)=>Sv(t).$instanceValues$.get(e),abe=(t,e,i,s)=>{const n=Sv(t),r=t,o=n.$instanceValues$.get(e),l=n.$flags$,c=r;i=B_e(i,s.$members$[e][0]);const f=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!f){n.$instanceValues$.set(e,i);{if(s.$watchers$&&l&128){const _=s.$watchers$[e];_&&_.map(x=>{try{c[x](i,o,e)}catch(S){tC(S,r)}})}if((l&18)===2){if(c.componentShouldUpdate&&c.componentShouldUpdate(i,o,e)===!1)return;Uz(n,!1)}}}},lbe=(t,e,i)=>{var s,n;const r=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const o=Object.entries((s=e.$members$)!=null?s:{});o.map(([l,[c]])=>{(c&31||c&32)&&Object.defineProperty(r,l,{get(){return obe(this,l)},set(f){abe(this,l,f,e)},configurable:!0,enumerable:!0})});{const l=new Map;r.attributeChangedCallback=function(c,f,y){Xo.jmp(()=>{var _;const x=l.get(c);if(this.hasOwnProperty(x))y=this[x],delete this[x];else{if(r.hasOwnProperty(x)&&typeof this[x]=="number"&&this[x]==y)return;if(x==null){const S=Sv(this),P=S==null?void 0:S.$flags$;if(P&&!(P&8)&&P&128&&y!==f){const k=this,$=(_=e.$watchers$)==null?void 0:_[c];$==null||$.forEach(F=>{k[F]!=null&&k[F].call(k,y,f,c)})}return}}this[x]=y===null&&typeof this[x]=="boolean"?!1:y})},t.observedAttributes=Array.from(new Set([...Object.keys((n=e.$watchers$)!=null?n:{}),...o.filter(([c,f])=>f[0]&15).map(([c,f])=>{var y;const _=f[1]||c;return l.set(_,c),f[0]&512&&((y=e.$attrsToReflect$)==null||y.push([c,_])),_})]))}}return t},ube=async(t,e,i,s)=>{let n;if((e.$flags$&32)===0){e.$flags$|=32,i.$lazyBundleId$;{n=t.constructor;const o=t.localName;customElements.whenDefined(o).then(()=>e.$flags$|=128)}if(n&&n.style){let o;typeof n.style=="string"?o=n.style:typeof n.style!="string"&&(e.$modeName$=j_e(t),e.$modeName$&&(o=n.style[e.$modeName$]));const l=Zse(i,e.$modeName$);if(!V9.has(l)){const c=Hy("registerStyles",i.$tagName$);Y_e(l,o,!!(i.$flags$&1)),c()}}}e.$ancestorComponent$,Uz(e,!0)},iY=t=>{},cbe=t=>{if((Xo.$flags$&1)===0){const e=Sv(t),i=e.$cmpMeta$,s=Hy("connectedCallback",i.$tagName$);e.$flags$&1?(one(t,e,i.$listeners$),e!=null&&e.$lazyInstance$?iY(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>iY(e.$lazyInstance$))):(e.$flags$|=1,i.$flags$&12&&hbe(t),i.$members$&&Object.entries(i.$members$).map(([n,[r]])=>{if(r&31&&t.hasOwnProperty(n)){const o=t[n];delete t[n],t[n]=o}}),ube(t,e,i)),s()}},hbe=t=>{const e=t["s-cr"]=Bh.createComment("");e["s-cn"]=!0,sg(t,e,t.firstChild)},dbe=async t=>{if((Xo.$flags$&1)===0){const e=Sv(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},ts=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const s=t.prototype.connectedCallback,n=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){S_e(this,i)},connectedCallback(){const r=Sv(this);one(this,r,i.$listeners$),cbe(this),s&&s.call(this)},disconnectedCallback(){dbe(this),n&&n.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${i.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),t.is=i.$tagName$,lbe(t,i)},Z6=(t,e)=>e,one=(t,e,i,s)=>{i&&i.map(([n,r,o])=>{const l=pbe(t,n),c=fbe(e,o),f=mbe(n);Xo.ael(l,r,c,f),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Xo.rel(l,r,c,f))})},fbe=(t,e)=>i=>{var s;try{Oh.lazyLoad||t.$hostElement$[e](i)}catch(n){tC(n)}},pbe=(t,e)=>e&4?Bh:e&8?iC:e&16?Bh.body:t,mbe=t=>P_e?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Rp=globalThis.calciteConfig,gbe=(Rp==null?void 0:Rp.focusTrapStack)||[];Rp!=null&&Rp.logLevel;const sY="2.13.2",ybe="2024-10-24",vbe="e38e2977d";function _be(){if(Rp&&Rp.version)return;console.info(`Using Calcite Components ${sY} [Date: ${ybe}, Revision: ${vbe}]`);const t=Rp||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:sY,writable:!1}),globalThis.calciteConfig=t}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const wf=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function nY(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(Bse)||t.contains(y_e)&&e?"dark":"light",s=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{r!==o&&s(o),r=o};let r=i();s(r),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function bbe(){wf()&&(document.readyState==="interactive"?nY():document.addEventListener("DOMContentLoaded",()=>nY(),{once:!0})),_be()}const xbe=bbe;xbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function xl(t,e,i){if(!wf())return;const s=wbe(t);return new s(e,i)}function wbe(t){class e extends window.MutationObserver{constructor(s){super(s),this.observedEntry=[],this.callback=s}observe(s,n){return this.observedEntry.push({target:s,options:n}),super.observe(s,n)}unobserve(s){const n=this.observedEntry.filter(r=>r.target!==s);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(r=>this.observe(r.target,r.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */let lT;const Sbe={childList:!0};function K6(t){lT||(lT=xl("mutation",Ebe)),lT.observe(t.el,Sbe)}function J6(t){lT.unobserve(t.el)}function Ebe(t){t.forEach(({target:e})=>{So(e)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Cbe(t){return t.map(e=>{let i="";for(let s=0;s<e;s++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const tm=()=>Cbe([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ane=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],U9=ane.join(","),lne=typeof Element>"u",Uy=lne?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Y9=!lne&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},X9=function t(e,i){var s;i===void 0&&(i=!0);var n=e==null||(s=e.getAttribute)===null||s===void 0?void 0:s.call(e,"inert"),r=n===""||n==="true",o=r||i&&e&&t(e.parentNode);return o},Pbe=function(e){var i,s=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return s===""||s==="true"},une=function(e,i,s){if(X9(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(U9));return i&&Uy.call(e,U9)&&n.unshift(e),n=n.filter(s),n},cne=function t(e,i,s){for(var n=[],r=Array.from(e);r.length;){var o=r.shift();if(!X9(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),c=l.length?l:o.children,f=t(c,!0,s);s.flatten?n.push.apply(n,f):n.push({scopeParent:o,candidates:f})}else{var y=Uy.call(o,U9);y&&s.filter(o)&&(i||!e.includes(o))&&n.push(o);var _=o.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(o),x=!X9(_,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(o));if(_&&x){var S=t(_===!0?o.children:_.children,!0,s);s.flatten?n.push.apply(n,S):n.push({scopeParent:o,candidates:S})}else r.unshift.apply(r,o.children)}}return n},hne=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},py=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Pbe(e))&&!hne(e)?0:e.tabIndex},Tbe=function(e,i){var s=py(e);return s<0&&i&&!hne(e)?0:s},Ibe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},dne=function(e){return e.tagName==="INPUT"},Mbe=function(e){return dne(e)&&e.type==="hidden"},Abe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(s){return s.tagName==="SUMMARY"});return i},Dbe=function(e,i){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===i)return e[s]},kbe=function(e){if(!e.name)return!0;var i=e.form||Y9(e),s=function(l){return i.querySelectorAll('input[type="radio"][name="'+l+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=s(window.CSS.escape(e.name));else try{n=s(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var r=Dbe(n,e.form);return!r||r===e},Nbe=function(e){return dne(e)&&e.type==="radio"},$be=function(e){return Nbe(e)&&!kbe(e)},Obe=function(e){var i,s=e&&Y9(e),n=(i=s)===null||i===void 0?void 0:i.host,r=!1;if(s&&s!==e){var o,l,c;for(r=!!((o=n)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(n)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!r&&n;){var f,y,_;s=Y9(n),n=(f=s)===null||f===void 0?void 0:f.host,r=!!((y=n)!==null&&y!==void 0&&(_=y.ownerDocument)!==null&&_!==void 0&&_.contains(n))}}return r},rY=function(e){var i=e.getBoundingClientRect(),s=i.width,n=i.height;return s===0&&n===0},Rbe=function(e,i){var s=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var r=Uy.call(e,"details>summary:first-of-type"),o=r?e.parentElement:e;if(Uy.call(o,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof n=="function"){for(var l=e;e;){var c=e.parentElement,f=Y9(e);if(c&&!c.shadowRoot&&n(c)===!0)return rY(e);e.assignedSlot?e=e.assignedSlot:!c&&f!==e.ownerDocument?e=f.host:e=c}e=l}if(Obe(e))return!e.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return rY(e);return!1},Lbe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var s=0;s<i.children.length;s++){var n=i.children.item(s);if(n.tagName==="LEGEND")return Uy.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},W9=function(e,i){return!(i.disabled||X9(i)||Mbe(i)||Rbe(i,e)||Abe(i)||Lbe(i))},s$=function(e,i){return!($be(i)||py(i)<0||!W9(e,i))},Fbe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},zbe=function t(e){var i=[],s=[];return e.forEach(function(n,r){var o=!!n.scopeParent,l=o?n.scopeParent:n,c=Tbe(l,o),f=o?t(n.candidates):l;c===0?o?i.push.apply(i,f):i.push(l):s.push({documentOrder:r,tabIndex:c,item:n,isScope:o,content:f})}),s.sort(Ibe).reduce(function(n,r){return r.isScope?n.push.apply(n,r.content):n.push(r.content),n},[]).concat(i)},fne=function(e,i){i=i||{};var s;return i.getShadowRoot?s=cne([e],i.includeContainer,{filter:s$.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Fbe}):s=une(e,i.includeContainer,s$.bind(null,i)),zbe(s)},qbe=function(e,i){i=i||{};var s;return i.getShadowRoot?s=cne([e],i.includeContainer,{filter:W9.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):s=une(e,i.includeContainer,W9.bind(null,i)),s},x_=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Uy.call(e,U9)===!1?!1:s$(i,e)},Vbe=ane.concat("iframe").join(","),C8=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Uy.call(e,Vbe)===!1?!1:W9(i,e)};const pne={getShadowRoot:!0};function Dat(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${tm()}`:""}function kat(t){return Array.isArray(t)?t:Array.from(t)}function Gbe(t){const e=im(t,`.${Yd.darkMode}, .${Yd.lightMode}`);return e!=null&&e.classList.contains("calcite-mode-dark")?"dark":"light"}function ng(t){const e="dir",i=`[${e}]`,s=im(t,i);return s?s.getAttribute(e):"ltr"}function Nat(t){return t?parseFloat(getComputedStyle(t).inlineSize):0}function Yz(t){return t.getRootNode()}function jbe(t){const e=Yz(t);return"host"in e?e:null}function $at(t,e){if(!t)return 0;const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t).width}function mne(t){return t.host||null}function sC(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const s=Yz(t);return(i?"getElementById"in s?s.getElementById(i):null:e?s.querySelector(e):null)||sC(mne(s),{selector:e,id:i})}function im(t,e){return t?t.closest(e)||im(mne(Yz(t)),e):null}function Bbe(t,e){return gne(t,e)}function gne(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:s}=t;return gne(s instanceof ShadowRoot?s.host:s,e)}function Hbe(t,e){return!!Bbe(e,i=>i===t?!0:void 0)}function Ube(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function Yy(t){if(t)return Ube(t)?t.setFocus():t.focus()}function Ybe(t){if(t)return fne(t,pne)[0]??t}function Q6(t){var e;(e=Ybe(t))==null||e.focus()}const WS=":not([slot])";function Xbe(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const s=e?Array.isArray(e)?e.map(n=>`[slot="${n}"]`).join(","):`[slot="${e}"]`:WS;return i!=null&&i.all?Wbe(t,s,i):Zbe(t,s,i)}function yne(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function Wbe(t,e,i){let s=e===WS?yne(t,WS):Array.from(t.querySelectorAll(e));s=i&&i.direct===!1?s:s.filter(r=>r.parentElement===t),s=i!=null&&i.matches?s.filter(r=>r==null?void 0:r.matches(i.matches)):s;const n=i==null?void 0:i.selector;return n?s.map(r=>Array.from(r.querySelectorAll(n))).reduce((r,o)=>[...r,...o],[]).filter(r=>!!r):s}function Zbe(t,e,i){let s=e===WS?yne(t,WS)[0]||null:t.querySelector(e);s=i&&i.direct===!1||(s==null?void 0:s.parentElement)===t?s:null,s=i!=null&&i.matches?s!=null&&s.matches(i.matches)?s:null:s;const n=i==null?void 0:i.selector;return n?s==null?void 0:s.querySelector(n):s}function Oat(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function Kbe(t,e){return t.filter(i=>i.matches(e))}function Jbe(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function oY(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function Wo(t){return(!!t).toString()}function Qbe(t){return ks(t)||t2e(t)}function e2e(t){return i2e(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function t2e(t){return!!e2e(t)}function i2e(t){return t.currentTarget.assignedNodes({flatten:!0})}function ks(t){return!!Mc(t).length}function Mc(t,e){return s2e(t.target,e)}function s2e(t,e){const i=t.assignedElements({flatten:!0});return e?Kbe(i,e):i}function cS(t){return!!(t.isPrimary&&t.button===0)}function n2e(t){return t.detail===0}const B0=(t,e,i,s=!0)=>{const n=t.indexOf(e),r=n===0,o=n===t.length-1;s&&(i=i==="previous"&&r?"last":i==="next"&&o?"first":i);let l;return i==="previous"?l=t[n-1]||t[s?t.length-1:n]:i==="next"?l=t[n+1]||t[s?0:n]:i==="last"?l=t[t.length-1]:l=t[0],Yy(l),l};function r2e(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function o2e(t,e,i,s){return a2e(t,e,"transition",i,s)}async function a2e(t,e,i,s,n){const r=window.getComputedStyle(t),o=r.transitionDuration,l=r.transitionProperty,c=o.split(","),y=l.split(",").map(k=>k.trim()).indexOf(e),_=c[y]??c[0];function x(){requestAnimationFrame(()=>{s==null||s(),requestAnimationFrame(()=>n==null?void 0:n())})}if(_==="0s"){x();return}const S="transitionstart",P="transitionend",A="transitioncancel";return new Promise(k=>{const $=window.setTimeout(()=>{t.removeEventListener(S,F),t.removeEventListener(P,G),t.removeEventListener(A,G),x(),k()},parseFloat(_)*1e3);t.addEventListener(S,F),t.addEventListener(P,G),t.addEventListener(A,G);function F(V){V.target===t&&aY(V)===e&&(window.clearTimeout($),t.removeEventListener(S,F),s==null||s())}function G(V){V.target===t&&aY(V)===e&&(t.removeEventListener(P,G),t.removeEventListener(A,G),n==null||n(),k())}})}function l2e(t){return"propertyName"in t}function aY(t){return l2e(t)?t.propertyName:t.animationName}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const gd={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",contentBehindCenterContent:"center-content"},rh={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},u2e=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",c2e=u2e,h2e=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=e=>{this.hasHeader=!!ks(e)},this.handleFooterSlotChange=e=>{this.hasFooter=!!ks(e)},this.handleAlertsSlotChange=e=>{var i;this.hasAlerts=!!ks(e),(i=Mc(e))==null||i.map(s=>{s.tagName==="CALCITE-ALERT"&&(s.embedded=!0)})},this.handleSheetsSlotChange=e=>{var i;this.hasSheets=!!ks(e),(i=Mc(e))==null||i.map(s=>{s.tagName==="CALCITE-SHEET"&&(s.embedded=!0)})},this.handleModalsSlotChange=e=>{var i;this.hasModals=!!ks(e),(i=Mc(e))==null||i.map(s=>{s.tagName==="CALCITE-MODAL"&&(s.embedded=!0)})},this.handlePanelTopChange=e=>{this.hasPanelTop=ks(e)},this.handlePanelBottomChange=e=>{this.hasPanelBottom=ks(e)},this.handleDialogsSlotChange=e=>{var i;this.hasDialogs=!!ks(e),(i=Mc(e))==null||i.map(s=>{s.tagName==="CALCITE-DIALOG"&&(s.embedded=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasDialogs=!1,this.hasSheets=!1,this.hasPanelTop=!1,this.hasPanelBottom=!1,this.hasOnlyPanelBottom=!1,this.panelIsResizing=!1}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}updateHasOnlyPanelBottom(){this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom}connectedCallback(){K6(this)}disconnectedCallback(){J6(this)}renderHeader(){return ke("div",{hidden:!this.hasHeader},ke("slot",{key:"header",name:rh.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return ke("div",{class:gd.footer,hidden:!this.hasFooter,key:"footer"},ke("slot",{name:rh.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return ke("div",{hidden:!this.hasAlerts},ke("slot",{key:"alerts",name:rh.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return ke("div",{hidden:!this.hasSheets},ke("slot",{key:"sheets",name:rh.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return ke("div",{hidden:!this.hasModals},ke("slot",{key:"modals",name:rh.modals,onSlotchange:this.handleModalsSlotChange}))}renderDialogs(){return ke("div",{hidden:!this.hasDialogs},ke("slot",{key:"dialogs",name:rh.dialogs,onSlotchange:this.handleDialogsSlotChange}))}renderContent(){const{panelIsResizing:e}=this,i=ke("slot",{key:"default-slot"}),s=e?ke("div",{class:gd.contentNonInteractive},i):i,n=ke("slot",{key:"center-row-slot",name:rh.centerRow}),r=ke("slot",{key:"panel-bottom-slot",name:rh.panelBottom,onSlotchange:this.handlePanelBottomChange}),o=ke("slot",{key:"panel-top-slot",name:rh.panelTop,onSlotchange:this.handlePanelTopChange}),l="content-container";return this.contentBehind?[ke("div",{class:{[gd.content]:!0,[gd.contentBehind]:!0},key:l},s),ke("div",{class:{[gd.contentBehindCenterContent]:!0,[gd.contentBottom]:this.hasOnlyPanelBottom}},o,r,n)]:[ke("div",{class:{[gd.content]:!0,[gd.contentBottom]:this.hasOnlyPanelBottom},key:l},o,s,r,n)]}renderMain(){return ke("div",{class:gd.main},ke("slot",{name:rh.panelStart}),this.renderContent(),ke("slot",{name:rh.panelEnd}))}renderPositionedSlots(){return ke("div",{class:gd.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderDialogs(),this.renderSheets())}render(){return ke(Z6,{key:"6864b8b95b6edd871ad622b0d49a3f4a42a0a8a8"},this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get watchers(){return{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}}static get style(){return c2e}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasDialogs:[32],hasSheets:[32],hasPanelTop:[32],hasPanelBottom:[32],hasOnlyPanelBottom:[32],panelIsResizing:[32]},[[0,"calciteInternalShellPanelResizeStart","handleCalciteInternalShellPanelResizeStart"],[0,"calciteInternalShellPanelResizeEnd","handleCalciteInternalShellPanelResizeEnd"]],{hasPanelTop:["updateHasOnlyPanelBottom"],hasPanelBottom:["updateHasOnlyPanelBottom"]}]);function d2e(){if(typeof customElements>"u")return;["calcite-shell"].forEach(e=>{switch(e){case"calcite-shell":customElements.get(e)||customElements.define(e,h2e);break}})}d2e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function nC(t){return t==="Enter"||t===" "}const vne=["0","1","2","3","4","5","6","7","8","9"];/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const f2e=new RegExp("\\.(0+)?$"),p2e=new RegExp("0+$");class Vs{constructor(e){if(e instanceof Vs)return e;const[i,s]=b2e(e).split(".").concat("");this.value=BigInt(i+s.padEnd(Vs.DECIMALS,"0").slice(0,Vs.DECIMALS))+BigInt(Vs.ROUNDED&&s[Vs.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(Vs.DECIMALS+1,"0"),i=e.slice(0,-Vs.DECIMALS),s=e.slice(-Vs.DECIMALS).replace(p2e,"");return{integers:i,decimals:s}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:s}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),s.length&&(n.push({type:"decimal",value:e.decimal}),s.split("").forEach(r=>n.push({type:"fraction",value:r}))),n}format(e){const{integers:i,decimals:s}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,r=s.length?`${e.decimal}${s.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${n}${r}`}add(e){return Vs.fromBigInt(this.value+new Vs(e).value)}subtract(e){return Vs.fromBigInt(this.value-new Vs(e).value)}multiply(e){return Vs._divRound(this.value*new Vs(e).value,Vs.SHIFT)}divide(e){return Vs._divRound(this.value*Vs.SHIFT,new Vs(e).value)}}Vs.DECIMALS=100;Vs.ROUNDED=!0;Vs.SHIFT=BigInt("1"+"0".repeat(Vs.DECIMALS));Vs._divRound=(t,e)=>Vs.fromBigInt(t/e+(Vs.ROUNDED?t*BigInt(2)/e%BigInt(2):BigInt(0)));Vs.fromBigInt=t=>Object.assign(Object.create(Vs.prototype),{value:t,isNegative:t<BigInt(0)});function Xz(t){return!(!t||isNaN(Number(t)))}function Lat(t){return!t||!x2e(t)?"":Z9(t,e=>{let i=!1;const s=e.split("").filter((n,r)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&r===0?!0:vne.includes(n)).join("");return Xz(s)?new Vs(s).toString():""})}const _ne=/^([-0])0+(?=\d)/,m2e=/(?!^\.)\.$/,g2e=/(?!^-)-/g,y2e=/^-\b0\b\.?0*$/,v2e=/0*$/,Fat=t=>Z9(t,e=>{const i=e.replace(g2e,"").replace(m2e,"").replace(_ne,"$1");return Xz(i)?y2e.test(i)?i:_2e(i):e});function _2e(t){const e=t.split(".")[1],i=new Vs(t).toString(),[s,n]=i.split(".");return e&&n!==e?`${s}.${e}`:i}function Z9(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((s,n)=>e(n===1?s.replace(/\./g,""):s)).join("e").replace(/^e/,"1e"):e(t)}function b2e(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const s=t.charAt(0)==="-",n=+e[1],r=e[0].split("."),o=(s?r[0].substring(1):r[0])||"",l=r[1]||"",c=(_,x)=>{const S=Math.abs(x)-_.length,P=S>0?`${"0".repeat(S)}${_}`:_;return`${P.slice(0,x)}.${P.slice(x)}`},f=(_,x)=>{const S=x>_.length?`${_}${"0".repeat(x-_.length)}`:_;return`${S.slice(0,x)}.${S.slice(x)}`},y=n>0?`${o}${f(l,n)}`:`${c(o,n)}${l}`;return`${s?"-":""}${y.charAt(0)==="."?"0":""}${y.replace(f2e,"").replace(_ne,"")}`}function x2e(t){return vne.some(e=>t.includes(e))}function zat(t,e,i){const s=e.split(".")[1];if(s){const n=s.match(v2e)[0];if(n&&i.delocalize(t).length!==e.length&&s.indexOf("e")===-1){const r=i.decimal;return t=t.includes(r)?t:`${t}${r}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const dg="en",w2e=["ar","bg","bs","ca","cs","da","de","el",dg,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],S2e=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",dg,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],E2e=["arab","arabext","latn"],bne=t=>E2e.includes(t),P8=new Intl.NumberFormat().resolvedOptions().numberingSystem,xne=P8==="arab"||!bne(P8)?"latn":P8,C2e=t=>bne(t)?t:xne;function Wz(t,e="cldr"){const i=e==="cldr"?S2e:w2e;return t?i.includes(t)?t:(t=t.toLowerCase(),t==="nb"?"no":e==="t9n"&&t==="pt"?"pt-BR":(t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(s,n,r)=>`${n}-${r.toUpperCase()}`),i.includes(t)||(t=t.split("-")[0])),t==="zh"?"zh-CN":i.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),dg))):dg}function qat(t){switch(t){case"it-CH":return"de-CH";case"bs":return"bs-Cyrl";default:return t}}const ZS=new Set;function Cl(t){P2e(t),ZS.size===0&&(uT==null||uT.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),ZS.add(t)}function P2e(t){t.effectiveLocale=T2e(t)}function Pl(t){ZS.delete(t),ZS.size===0&&uT.disconnect()}const uT=xl("mutation",t=>{t.forEach(e=>{const i=e.target;ZS.forEach(s=>{if(!Hbe(i,s.el))return;const r=im(s.el,"[lang]");if(!r){s.effectiveLocale=dg;return}const o=r.lang;s.effectiveLocale=r.hasAttribute("lang")&&o===""?dg:o})})});function T2e(t){var e;return t.el.lang||((e=im(t.el,"[lang]"))==null?void 0:e.lang)||document.documentElement.lang||dg}class wne{constructor(){this.delocalize=e=>this._numberFormatOptions?Z9(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?Z9(e,i=>Xz(i.trim())?new Vs(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=Wz(e==null?void 0:e.locale),e.numberingSystem=C2e(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===dg&&e.numberingSystem===xne&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,r)=>[n,r])),s=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=s.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?" ":this._actualGroup,this._decimal=s.find(n=>n.type==="decimal").value,this._minusSign=s.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const lY=new wne;let Tw,uY;function I2e(t={}){return Object.entries(t).sort(([e],[i])=>e.localeCompare(i)).map(e=>`${e[0]}-${e[1]}`).flat().join(":")}function Vat(t,e){t=Wz(t),Tw||(Tw=new Map),uY!==t&&(Tw.clear(),uY=t);const i=I2e(e),s=Tw.get(i);if(s)return s;const n=new Intl.DateTimeFormat(t,e);return Tw.set(i,n),n}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const n$=(t,e,i)=>Math.max(e,Math.min(t,i)),M2e=new RegExp(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),r$=t=>{const e=(""+t).match(M2e);return!e||parseInt(e[1])===0?0:Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0))};function Gat(t){return r$(t)>0&&t>0?parseFloat(`0.${t.toString().split(".")[1]}`):t}function jat(t,e,i,s,n){return(t-e)*(n-s)/(i-e)+s}function Bat(t,e,i){return t<i?-1:t>e-i?1:0}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const TP={};async function A2e(t,e){const i=`${e}_${t}`;return TP[i]||(TP[i]=fetch(Vz(`./assets/${e}/t9n/messages_${t}.json`)).then(s=>(s.ok||cY(),s.json())).catch(()=>cY())),TP[i]}function cY(){throw new Error("could not fetch component message bundle")}function Zz(t){t.messages={...t.defaultMessages,...t.messageOverrides}}function D2e(){}async function qu(t){t.defaultMessages=await Sne(t,t.effectiveLocale),Zz(t)}async function Sne(t,e){if(!wf())return{};const{el:i}=t,n=i.tagName.toLowerCase().replace("calcite-","");return A2e(Wz(e,"t9n"),n)}async function Vu(t,e){t.defaultMessages=await Sne(t,e),Zz(t)}function Gu(t){t.onMessagesChange=k2e}function ju(t){t.onMessagesChange=D2e}function k2e(){Zz(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Um={container:"container",content:"content",contentHeader:"content__header",contentBody:"content__body",floatContent:"float--content",contentOverlay:"content--overlay",separator:"separator",floatAll:"float-all"},hY={actionBar:"action-bar",header:"header"},N2e=`:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-detached-max-height:unset;--calcite-shell-panel-max-height:unset;--calcite-internal-shell-panel-shadow-block-start:0 4px 8px -1px rgba(0, 0, 0, 0.08),
    0 2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-block-end:0 -4px 8px -1px rgba(0, 0, 0, 0.08),
    0 -2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-start:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-end:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04)}.calcite--rtl.content--overlay{--calcite-internal-shell-panel-shadow-inline-start:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-internal-shell-panel-shadow-inline-end:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][display-mode=float-all]) .content{flex:2}:host([layout=vertical][width-scale=s]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 300px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=s][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=m]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 420px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=m][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=l]:not([display-mode=float-all])) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-max-width:var(--calcite-shell-panel-max-width, 680px);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 340px)}:host([layout=vertical][width-scale=l][display-mode=float-all]) .content{--calcite-internal-shell-panel-width:var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-min-width:var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal][height-scale=s]) .content{--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 20vh)
  )}:host([layout=horizontal]) .content{--calcite-internal-shell-panel-min-height:var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 30vh)
  )}:host([layout=horizontal][height-scale=l]) .content{--calcite-internal-shell-panel-max-height:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 40vh)
  )}.container{pointer-events:none;box-sizing:border-box;display:flex;block-size:100%;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-color-text-2)}.container *{box-sizing:border-box}.container.float-all{margin-block:0.5rem;margin-inline:0.5rem}:host([layout=horizontal]) .container{block-size:auto;inline-size:100%;flex-direction:column}:host(:hover) .separator:not(:hover):not(:focus),:host(:focus-within) .separator:not(:hover):not(:focus){opacity:1;background-color:var(--calcite-color-border-3)}.separator{pointer-events:auto;position:absolute;display:flex;background-color:transparent;opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;cursor:col-resize;outline:none}.separator:hover{opacity:1;background-color:var(--calcite-color-border-2)}.separator:focus{background-color:var(--calcite-color-brand);opacity:1}:host([layout=vertical]) .separator{inset-block:0px;block-size:100%;inline-size:0.125rem;cursor:col-resize}:host([layout=horizontal][position=start]) .separator{inset-block-end:0px}:host([layout=horizontal][position=end]) .separator{inset-block-start:0px}:host([layout=horizontal]) .separator{inset-inline-end:0px;block-size:0.125rem;inline-size:100%;cursor:row-resize}:host([layout=vertical][position=start]) .separator{inset-inline-end:-2px}:host([layout=horizontal][position=start]) .separator{inset-block-end:-2px}:host([layout=vertical][position=end]) .separator{inset-inline-start:-2px}:host([layout=horizontal][position=end]) .separator{inset-block-start:-2px}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.content{pointer-events:auto;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]:not([display-mode=float-all])) .content{inline-size:var(--calcite-internal-shell-panel-width);max-inline-size:var(--calcite-internal-shell-panel-max-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=vertical][display-mode=float-all]) .content{inline-size:var(--calcite-internal-shell-panel-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=horizontal]) .content{block-size:var(--calcite-internal-shell-panel-height);max-block-size:var(--calcite-internal-shell-panel-max-height);min-block-size:var(--calcite-internal-shell-panel-min-height)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-start)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-end)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-start)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-end)}.float--content{margin-inline:0.5rem;margin-block:0.5rem auto;block-size:auto;overflow:hidden;border-radius:0.25rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem))}.float--content ::slotted(calcite-panel),.float--content ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .float--content{margin-block:0.5rem}:host([position=start]) .float--content ::slotted(calcite-panel),:host([position=start]) .float--content ::slotted(calcite-flow),:host([position=end]) .float--content ::slotted(calcite-panel),:host([position=end]) .float--content ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end]):not([display-mode=float-all])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]:not([display-mode=float-all])) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]:not([display-mode=float-all])) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]:not([display-mode=float-all])) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,$2e=N2e,O2e=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalShellPanelResizeStart=Ot(this,"calciteInternalShellPanelResizeStart",6),this.calciteInternalShellPanelResizeEnd=Ot(this,"calciteInternalShellPanelResizeEnd",6),this.initialContentWidth=null,this.initialContentHeight=null,this.initialClientX=null,this.initialClientY=null,this.contentWidthMax=null,this.contentWidthMin=null,this.contentHeightMax=null,this.contentHeightMin=null,this.step=1,this.stepMultiplier=10,this.actionBars=[],this.storeContentEl=e=>{this.contentEl=e},this.getKeyAdjustedSize=e=>{const{key:i}=e,{el:s,step:n,stepMultiplier:r,layout:o,contentWidthMin:l,contentWidthMax:c,initialContentWidth:f,initialContentHeight:y,contentHeightMin:_,contentHeightMax:x,position:S}=this,P=n*r;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(i)>-1&&e.preventDefault();const k=ng(s),$=["ArrowLeft","ArrowRight"],F=["ArrowDown","ArrowUp"],G=k==="rtl"&&$.includes(i)?-1:1;if(o==="horizontal"?S==="end"?i===F[1]||i===$[0]:i===F[0]||i===$[1]:i===F[1]||(S==="end"?i===$[0]:i===$[1])){const W=e.shiftKey?P:n;return o==="horizontal"?y+G*W:f+G*W}if(o==="horizontal"?S==="end"?i===F[0]||i===$[0]:i===F[1]||i===$[1]:i===F[0]||(S==="end"?i===$[1]:i===$[0])){const W=e.shiftKey?P:n;return o==="horizontal"?y-G*W:f-G*W}return i==="Home"&&o==="horizontal"&&typeof _=="number"?_:i==="Home"&&o==="vertical"&&typeof l=="number"?l:i==="End"&&o==="horizontal"&&typeof x=="number"?x:i==="End"&&o==="vertical"&&typeof c=="number"?c:i==="PageDown"?o==="horizontal"?y-P:f-P:i==="PageUp"?o==="horizontal"?y+P:f+P:null},this.initialKeydownWidth=e=>{this.setInitialContentWidth();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentWidth(i)},this.initialKeydownHeight=e=>{this.setInitialContentHeight();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentHeight(i)},this.separatorKeyDown=e=>{this.layout==="horizontal"?this.initialKeydownHeight(e):this.initialKeydownWidth(e)},this.separatorPointerMove=e=>{e.preventDefault();const{el:i,layout:s,initialContentWidth:n,initialContentHeight:r,position:o,initialClientX:l,initialClientY:c}=this,f=s==="horizontal"?e.clientY-c:e.clientX-l,y=s==="vertical"&&ng(i)==="rtl"?-1:1,_=o==="end"?-y*f:y*f;s==="horizontal"?this.setContentHeight(r+_):this.setContentWidth(n+_)},this.separatorPointerUp=e=>{cS(e)&&(this.calciteInternalShellPanelResizeEnd.emit(),e.preventDefault(),window.removeEventListener("pointerup",this.separatorPointerUp),window.removeEventListener("pointermove",this.separatorPointerMove))},this.setInitialContentHeight=()=>{var e;this.initialContentHeight=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().height},this.setInitialContentWidth=()=>{var e;this.initialContentWidth=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().width},this.separatorPointerDown=e=>{if(!cS(e))return;this.calciteInternalShellPanelResizeStart.emit(),e.preventDefault();const{separatorEl:i}=this;i&&document.activeElement!==i&&i.focus(),this.layout==="horizontal"?(this.setInitialContentHeight(),this.initialClientY=e.clientY):(this.setInitialContentWidth(),this.initialClientX=e.clientX),window.addEventListener("pointerup",this.separatorPointerUp),window.addEventListener("pointermove",this.separatorPointerMove)},this.connectSeparator=e=>{this.disconnectSeparator(),this.separatorEl=e,e==null||e.addEventListener("pointerdown",this.separatorPointerDown)},this.disconnectSeparator=()=>{var e;(e=this.separatorEl)==null||e.removeEventListener("pointerdown",this.separatorPointerDown)},this.setActionBarsLayout=e=>{e.forEach(i=>i.layout=this.layout)},this.handleActionBarSlotChange=e=>{const i=Mc(e).filter(s=>s==null?void 0:s.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)},this.handleHeaderSlotChange=e=>{this.hasHeader=ks(e)},this.collapsed=!1,this.detached=!1,this.displayMode="dock",this.detachedHeightScale=void 0,this.heightScale=void 0,this.widthScale="m",this.layout="vertical",this.position="start",this.resizable=!1,this.messages=void 0,this.messageOverrides=void 0,this.contentWidth=null,this.contentHeight=null,this.defaultMessages=void 0,this.effectiveLocale="",this.hasHeader=!1}handleDetached(e){e?this.displayMode="float-content":(this.displayMode==="float-content"||this.displayMode==="float")&&(this.displayMode="dock")}handleDisplayMode(e){this.detached=e==="float-content"||e==="float"}handleDetachedHeightScale(e){this.heightScale=e}handleHeightScale(e){this.detachedHeightScale=e}layoutHandler(){this.setActionBarsLayout(this.actionBars)}onMessagesChange(){}connectedCallback(){K6(this),Cl(this),Gu(this)}async componentWillLoad(){await qu(this)}disconnectedCallback(){J6(this),this.disconnectSeparator(),Pl(this),ju(this)}componentDidLoad(){this.updateAriaValues()}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}renderHeader(){return ke("div",{class:Um.contentHeader,hidden:!this.hasHeader,key:"header"},ke("slot",{name:hY.header,onSlotchange:this.handleHeaderSlotChange}))}render(){const{collapsed:e,position:i,initialContentWidth:s,initialContentHeight:n,contentWidth:r,contentWidthMax:o,contentWidthMin:l,contentHeight:c,contentHeightMax:f,contentHeightMin:y,resizable:_,layout:x,displayMode:S}=this,P=ng(this.el),A=S!=="float-content"&&S!=="float"&&_,k=A?x==="horizontal"?c?{height:`${c}px`}:null:r?{width:`${r}px`}:null:null,$=!e&&A?ke("div",{"aria-label":this.messages.resize,"aria-orientation":x==="horizontal"?"vertical":"horizontal","aria-valuemax":x=="horizontal"?f:o,"aria-valuemin":x=="horizontal"?y:l,"aria-valuenow":x=="horizontal"?c??n:r??s,class:Um.separator,key:"separator",onKeyDown:this.separatorKeyDown,ref:this.connectSeparator,role:"separator",tabIndex:0,"touch-action":"none"}):null,F=()=>x==="horizontal"?i==="start"?Yd.calciteAnimateInDown:Yd.calciteAnimateInUp:P==="ltr"&&i==="end"||P==="rtl"&&i==="start"?Yd.calciteAnimateInLeft:Yd.calciteAnimateInRight,G=ke("div",{class:{[Yd.rtl]:P==="rtl",[Um.content]:!0,[Um.contentOverlay]:S==="overlay",[Um.floatContent]:S==="float-content"||S==="float",[Yd.calciteAnimate]:S==="overlay",[F()]:S==="overlay"},hidden:e,key:"content",ref:this.storeContentEl,style:k},this.renderHeader(),ke("div",{class:Um.contentBody},ke("slot",null)),$),B=[ke("slot",{key:"action-bar",name:hY.actionBar,onSlotchange:this.handleActionBarSlotChange}),G];return i==="end"&&B.reverse(),ke("div",{class:{[Um.container]:!0,[Um.floatAll]:S==="float-all"}},B)}setContentWidth(e){const{contentWidthMax:i,contentWidthMin:s}=this,n=Math.round(e);this.contentWidth=typeof i=="number"&&typeof s=="number"?n$(n,s,i):n}updateAriaValues(){const{contentEl:e}=this,i=e&&getComputedStyle(e);i&&(this.layout==="horizontal"?this.updateHeights(i):this.updateWidths(i),So(this))}setContentHeight(e){const{contentHeightMax:i,contentHeightMin:s}=this,n=Math.round(e);this.contentHeight=typeof i=="number"&&typeof s=="number"?n$(n,s,i):n}updateWidths(e){const i=parseInt(e.getPropertyValue("max-width"),10),s=parseInt(e.getPropertyValue("min-width"),10),n=parseInt(e.getPropertyValue("width"),10);typeof n=="number"&&!isNaN(n)&&(this.initialContentWidth=n),typeof i=="number"&&!isNaN(i)&&(this.contentWidthMax=i),typeof s=="number"&&!isNaN(s)&&(this.contentWidthMin=s)}updateHeights(e){const i=parseInt(e.getPropertyValue("max-height"),10),s=parseInt(e.getPropertyValue("min-height"),10),n=parseInt(e.getPropertyValue("height"),10);typeof n=="number"&&!isNaN(n)&&(this.initialContentHeight=n),typeof i=="number"&&!isNaN(i)&&(this.contentHeightMax=i),typeof s=="number"&&!isNaN(s)&&(this.contentHeightMin=s)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return $2e}},[1,"calcite-shell-panel",{collapsed:[516],detached:[516],displayMode:[513,"display-mode"],detachedHeightScale:[513,"detached-height-scale"],heightScale:[513,"height-scale"],widthScale:[513,"width-scale"],layout:[513],position:[513],resizable:[516],messages:[1040],messageOverrides:[1040],contentWidth:[32],contentHeight:[32],defaultMessages:[32],effectiveLocale:[32],hasHeader:[32]},void 0,{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function R2e(){if(typeof customElements>"u")return;["calcite-shell-panel"].forEach(e=>{switch(e){case"calcite-shell-panel":customElements.get(e)||customElements.define(e,O2e);break}})}R2e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const L2e=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function F2e(t){return`${t.split("-").map((s,n)=>n===0?s:`${s[0].toUpperCase()}${s.slice(1)}`).join("")}${L2e.includes(t)?"Input":"Change"}`}const o$="hidden-form-input";function Kz(t){return"checked"in t}const a$=new WeakMap,Jz=new WeakSet;function z2e(t,e){if(im(e.parentElement,"[form]"))return!0;const s="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(s,r=>{n=r.composedPath().some(o=>Jz.has(o)),r.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(s,{bubbles:!0,composed:!0})),n}function q2e(t,{status:e,message:i,icon:s}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=s),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function Ene(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?im(t,"calcite-radio-button-group"):t}const V2e=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function dY(t){var l;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,s=Ene(e==null?void 0:e.parentElement);if(!s)return;const n=(l=s==null?void 0:s.nodeName)==null?void 0:l.toLowerCase(),r=n==null?void 0:n.split("-");if(r.length<2||r[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in s&&(s.validity=e==null?void 0:e.validity),s.dispatchEvent(V2e),q2e(s,{message:i,icon:!0,status:"invalid"});const o=F2e(n);s.addEventListener(o,()=>{"status"in s&&(s.status="idle"),"validationIcon"in s&&!s.validationIcon&&(s.validationIcon=!1),"validationMessage"in s&&s.validationMessage===i&&(s.validationMessage=""),"validity"in s&&(s.validity=e==null?void 0:e.validity)},{once:!0})}function G2e(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",dY,!0),e.requestSubmit(),e.removeEventListener("invalid",dY,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const s of i)if(s!=null&&s.validationMessage){s==null||s.setFocus();break}}),!0):!1}function j2e(t){var e;(e=t.formEl)==null||e.reset()}function B2e(t){const{el:e,value:i}=t,s=Cne(t);if(!s||z2e(s,e))return;t.formEl=s,t.defaultValue=i,Kz(t)&&(t.defaultChecked=t.checked);const n=(t.onFormReset||H2e).bind(t);s.addEventListener("reset",n),a$.set(t.el,n),Jz.add(e)}function Cne(t){const{el:e,form:i}=t;return i?sC(e,{id:i}):im(e,"form")}function H2e(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),Kz(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue}function U2e(t){const{el:e,formEl:i}=t;if(!i)return;const s=a$.get(e);i.removeEventListener("reset",s),a$.delete(e),t.formEl=null,Jz.delete(e)}function Y2e(t,e){t.defaultValue=e}const X2e="calciteInternalHiddenInputInput",Pne=t=>{t.target.dispatchEvent(new CustomEvent(X2e,{bubbles:!0}))},fY=t=>t.removeEventListener("input",Pne);function W2e(t){const{el:e,formEl:i,name:s,value:n}=t,{ownerDocument:r}=e,o=e.querySelectorAll(`input[slot="${o$}"]`);if(!i||!s){o.forEach(_=>{fY(_),_.remove()});return}const l=Array.isArray(n)?n:[n],c=[],f=new Set;o.forEach(_=>{const x=l.find(S=>S==_.value);x!=null?(f.add(x),pY(t,_,x)):c.push(_)});let y;l.forEach(_=>{if(f.has(_))return;let x=c.pop();x||(x=r.createElement("input"),x.slot=o$),y||(y=r.createDocumentFragment()),y.append(x),x.addEventListener("input",Pne),pY(t,x,_)}),y&&e.append(y),c.forEach(_=>{fY(_),_.remove()})}function pY(t,e,i){var f;const{defaultValue:s,disabled:n,form:r,name:o,required:l}=t;e.defaultValue=s,e.disabled=n,e.name=o,e.required=l,e.tabIndex=-1,r?e.setAttribute("form",r):e.removeAttribute("form"),Kz(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(f=t.syncHiddenFormInput)==null||f.call(t,e);const c=Ene(t.el);if(c&&"validity"in c)for(const y in{...e==null?void 0:e.validity})c.validity[y]=e.validity[y]}const Z2e=({component:t})=>(W2e(t),ke("slot",{name:o$}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function K2e(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function Tne(t){t.target.disabled&&t.preventDefault()}const Ine=["mousedown","mouseup","click"];function Mne(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const K9={capture:!0};function kg(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),J2e(t);return}exe(t),t.el.removeAttribute("aria-disabled")}function J2e(t){t.el.click=K2e,Q2e(t.el)}function Q2e(t){t.addEventListener("pointerdown",Tne,K9),Ine.forEach(e=>t.addEventListener(e,Mne,K9))}function exe(t){delete t.el.click,txe(t.el)}function txe(t){t.removeEventListener("pointerdown",Tne,K9),Ine.forEach(e=>t.removeEventListener(e,Mne,K9))}const ixe={container:"interaction-container"},Ng=({disabled:t},e)=>ke("div",{class:ixe.container,inert:t},...e);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Lc(t){return t==="l"?"m":"s"}async function Ane(t){await(sxe(t)?t.componentOnReady():new Promise(e=>requestAnimationFrame(()=>e())))}function sxe(t){return typeof t.componentOnReady=="function"}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Dne="calciteInternalLabelClick",eM="calciteInternalLabelConnected",J9="calciteInternalLabelDisconnected",mY="calcite-label",c2=new WeakMap,hS=new WeakMap,KS=new WeakMap,Q9=new WeakMap,ky=new Set,nxe=t=>{const{id:e}=t,i=e&&sC(t,{selector:`${mY}[for="${e}"]`});if(i)return i;const s=im(t,mY);return!s||rxe(s,t)?null:s};function rxe(t,e){let i;const s="custom-element-ancestor-check",n=o=>{o.stopImmediatePropagation();const l=o.composedPath();i=l.slice(l.indexOf(e),l.indexOf(t))};return t.addEventListener(s,n,{once:!0}),e.dispatchEvent(new CustomEvent(s,{composed:!0,bubbles:!0})),t.removeEventListener(s,n),i.filter(o=>o!==e&&o!==t).filter(o=>{var l;return(l=o.tagName)==null?void 0:l.includes("-")}).length>0}function tM(t){if(!t)return;const e=nxe(t.el);if(hS.has(e)&&e===t.labelEl||!e&&ky.has(t))return;const i=axe.bind(t);if(e){t.labelEl=e;const s=c2.get(e)||[];s.push(t),c2.set(e,s.sort(Nne)),hS.has(t.labelEl)||(hS.set(t.labelEl,gY),t.labelEl.addEventListener(Dne,gY)),ky.delete(t),document.removeEventListener(eM,KS.get(t)),Q9.set(t,i),document.addEventListener(J9,i)}else ky.has(t)||(i(),document.removeEventListener(J9,Q9.get(t)))}function kne(t){if(!t||(ky.delete(t),document.removeEventListener(eM,KS.get(t)),document.removeEventListener(J9,Q9.get(t)),KS.delete(t),Q9.delete(t),!t.labelEl))return;const e=c2.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(Dne,hS.get(t.labelEl)),hS.delete(t.labelEl)),c2.set(t.labelEl,e.filter(i=>i!==t).sort(Nne)),t.labelEl=null}function Nne(t,e){return r2e(t.el,e.el)?-1:1}function $ne(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function gY(t){const e=t.detail.sourceEvent.target,i=c2.get(this),s=i.find(o=>o.el===e);if(i.includes(s))return;const r=i[0];r.disabled||r.onLabelClick(t)}function oxe(){ky.has(this)&&tM(this)}function axe(){ky.add(this);const t=KS.get(this)||oxe.bind(this);KS.set(this,t),document.addEventListener(eM,t)}async function lxe(t){var s;if(await Ane(t),c2.has(t))return;const i=(s=t.ownerDocument)==null?void 0:s.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const n of ky)if(n.el===i){tM(n);break}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const One=new WeakMap,Rne=new WeakMap;function Eo(t){Rne.set(t,new Promise(e=>One.set(t,e)))}function Co(t){One.get(t)()}function uxe(t){return Rne.get(t)}async function Po(t){if(await uxe(t),!!wf())return So(t),new Promise(e=>requestAnimationFrame(()=>e()))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const cxe={flipRtl:"flip-rtl"},Lne={},T8={},Fne={s:16,m:24,l:32};function zne({icon:t,scale:e}){const i=Fne[e],s=fxe(t),n=s.charAt(s.length-1)==="F";return`${n?s.substring(0,s.length-1):s}${i}${n?"F":""}`}async function hxe(t){const e=zne(t),i=qne(e);if(i)return i;T8[e]||(T8[e]=fetch(Vz(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(console.error(`"${e}" is not a valid calcite-ui-icon name`),"")));const s=await T8[e];return Lne[e]=s,s}function dxe(t){return qne(zne(t))}function qne(t){return Lne[t]}function fxe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((r,o)=>r.replace(n,function(c,f){return o===0&&f===0?c:c.toUpperCase()})).join("")}return e?`i${t}`:t}const pxe=":host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",mxe=pxe,gxe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var e;(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}render(){const{el:e,flipRtl:i,pathData:s,scale:n,textLabel:r}=this,o=ng(e),l=Fne[n],c=!!r,f=[].concat(s||"");return ke(Nr,{key:"724265acdc6fb528bf7b25d7ec445c73a63f4c8e","aria-hidden":Wo(!c),"aria-label":c?r:null,role:c?"img":null},ke("svg",{key:"864ee2d80bebd282543ba5d94c57f84b48a6204d","aria-hidden":"true",class:{[cxe.flipRtl]:o==="rtl"&&i,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${l} ${l}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},f.map(y=>typeof y=="string"?ke("path",{d:y}):ke("path",{d:y.d,opacity:"opacity"in y?y.opacity:1}))))}async loadIconPathData(){const{icon:e,scale:i,visible:s}=this;if(!wf()||!e||!s)return;const n={icon:e,scale:i},r=dxe(n)||await hxe(n);e===this.icon&&(this.pathData=r)}waitUntilVisible(e){if(this.intersectionObserver=xl("intersection",i=>{i.forEach(s=>{s.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return mxe}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function Qo(){if(typeof customElements>"u")return;["calcite-icon"].forEach(e=>{switch(e){case"calcite-icon":customElements.get(e)||customElements.define(e,gxe);break}})}Qo();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const G_={loader:"loader",loaderParts:"loader__svgs",loaderPart:"loader__svg",loaderPartId:t=>`${G_.loaderPart}--${t}`,loaderText:"loader__text",loaderPercentage:"loader__percentage"},yxe='@charset "UTF-8";@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{position:relative;margin-inline:auto;display:none;align-items:center;justify-content:center;opacity:1;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke:var(--calcite-color-brand);stroke-width:3;fill:none;transform:scale(1, 1);animation:loader-color-shift calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) alternate-reverse infinite linear;padding-block:var(--calcite-loader-padding, 4rem);will-change:contents}:host([scale=s]){--calcite-loader-font-size:var(--calcite-font-size--3);--calcite-loader-size:2rem;--calcite-loader-size-inline:0.75rem;--calcite-internal-loader-value-line-height:0.625rem}:host([scale=m]){--calcite-loader-font-size:var(--calcite-font-size-0);--calcite-loader-size:4rem;--calcite-loader-size-inline:1rem;--calcite-internal-loader-value-line-height:1.375rem}:host([scale=l]){--calcite-loader-font-size:var(--calcite-font-size-2);--calcite-loader-size:6rem;--calcite-loader-size-inline:1.5rem;--calcite-internal-loader-value-line-height:1.71875rem}:host([no-padding]){padding-block:0px}:host{display:flex}.loader__text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);margin-block-start:calc(var(--calcite-loader-size) + 1.5rem)}.loader__percentage{display:block;text-align:center;color:var(--calcite-color-text-1);font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size);line-height:var(--calcite-internal-loader-value-line-height);align-self:center}.loader__svgs{position:absolute;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.66 / var(--calcite-internal-duration-factor));animation-name:loader-clockwise;display:flex}.loader__svg{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);animation-iteration-count:infinite;animation-timing-function:linear}.loader__svg--1{animation-name:loader-offset-1}.loader__svg--2{animation-name:loader-offset-2}.loader__svg--3{animation-name:loader-offset-3}:host([type=determinate]),:host([type=determinate-value]){animation:none;stroke:var(--calcite-color-border-3)}:host([type=determinate]) .loader__svgs,:host([type=determinate-value]) .loader__svgs{animation:none}:host([type=determinate]) .loader__svg--3,:host([type=determinate-value]) .loader__svg--3{animation:none;stroke:var(--calcite-color-brand);stroke-dasharray:150.79632;transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([inline]){position:relative;margin:0px;animation:none;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size-inline);min-block-size:var(--calcite-loader-size-inline);inline-size:var(--calcite-loader-size-inline);margin-inline-end:calc(var(--calcite-loader-size-inline) * 0.5);vertical-align:calc(var(--calcite-loader-size-inline) * -1 * 0.2)}:host([inline]) .loader__svgs{inset-block-start:0px;margin:0px;inset-inline-start:0;inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([inline]) .loader__svg{inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([complete]){opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1000ms, transform var(--calcite-internal-animation-timing-medium) linear 1000ms}:host([complete]) .loader__svgs{opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms, transform calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms}:host([complete]) .loader__percentage{color:var(--calcite-color-brand);transform:scale(1.05, 1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear, transform var(--calcite-internal-animation-timing-medium) linear}.loader__svg--1{stroke-dasharray:27.9252444444 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 4.8 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-1{0%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-83.7757333333}100%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:-279.2524444444}}.loader__svg--2{stroke-dasharray:55.8504888889 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.4 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-2{0%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-97.7383555556}100%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:-279.2524444444}}.loader__svg--3{stroke-dasharray:13.9626222222 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 7.734 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-3{0%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-76.7944222222}100%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:-279.2524444444}}@keyframes loader-color-shift{0%{stroke:var(--calcite-color-brand)}33%{stroke:var(--calcite-color-brand-press)}66%{stroke:var(--calcite-color-brand-hover)}100%{stroke:var(--calcite-color-brand)}}@keyframes loader-clockwise{100%{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}',vxe=yxe,_xe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.formatValue=()=>this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100),this.complete=!1,this.inline=!1,this.label=void 0,this.scale="m",this.type="indeterminate",this.value=0,this.text="",this.effectiveLocale=""}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}connectedCallback(){Cl(this),this.updateFormatter()}disconnectedCallback(){Pl(this)}componentWillLoad(){requestAnimationFrame(()=>this.valueChangeHandler())}render(){const{el:e,inline:i,label:s,scale:n,text:r,type:o,value:l}=this,c=e.id||tm(),f=.45,y=i?this.getInlineSize(n):this.getSize(n),_=y*f,x=`0 0 ${y} ${y}`,S=o.startsWith("determinate"),P=2*_*Math.PI,A=l/100*P,k=P-A,$=Math.floor(l),F={"stroke-dasharray":`${A} ${k}`};return ke(Nr,{key:"8272bdfae9fff51b19ed8fa66197eb93b53feb4c","aria-label":s,"aria-valuemax":S?"100":void 0,"aria-valuemin":S?"0":void 0,"aria-valuenow":S?$.toString():void 0,id:c,role:"progressbar"},ke("div",{key:"3d410c178af39bb57cc478bdd06c0392f6ba71a3",class:G_.loaderParts},[1,2,3].map(G=>ke("svg",{"aria-hidden":"true",class:{[G_.loaderPart]:!0,[G_.loaderPartId(G)]:!0},key:G,style:S&&G===3?F:void 0,viewBox:x},ke("circle",{cx:y/2,cy:y/2,r:_}))),S&&ke("div",{key:"4ccc633930dee031bf769908d712df39e0677bbb",class:G_.loaderPercentage},this.formatValue())),r&&ke("div",{key:"6d0d51988bdfafee2a19faed9e14d3bda06d79b5",class:G_.loaderText},r))}formatterPropsChange(){this.updateFormatter()}getSize(e){return{s:32,m:56,l:80}[e]}getInlineSize(e){return{s:12,m:16,l:20}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.effectiveLocale||(this.formatter=new Intl.NumberFormat(this.effectiveLocale,{style:"percent"}))}get el(){return this}static get watchers(){return{value:["valueChangeHandler"],effectiveLocale:["formatterPropsChange"],type:["formatterPropsChange"]}}static get style(){return vxe}},[1,"calcite-loader",{complete:[1540],inline:[516],label:[1],scale:[513],type:[513],value:[2],text:[1],effectiveLocale:[32]},void 0,{value:["valueChangeHandler"],effectiveLocale:["formatterPropsChange"],type:["formatterPropsChange"]}]);function Zc(){if(typeof customElements>"u")return;["calcite-loader"].forEach(e=>{switch(e){case"calcite-loader":customElements.get(e)||customElements.define(e,_xe);break}})}Zc();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const au={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},bxe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle}:host([round]){border-radius:50px}:host([round]) a,:host([round]) button{border-radius:50px}:host button,:host a{outline-color:transparent}:host button:focus,:host a:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host button,:host a{--calcite-button-content-margin-internal:0.5rem;--calcite-button-padding-x-internal:7px;--calcite-button-padding-y-internal:3px;padding-block:var(--calcite-button-padding-y-internal);padding-inline:var(--calcite-button-padding-x-internal);position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-radius:0px;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, box-shadow var(--calcite-animation-timing) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host button:hover,:host a:hover{text-decoration-line:none}:host button span,:host a span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content{margin-inline:var(--calcite-button-content-margin-internal)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-content-margin-internal:0.75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-button-content-margin-internal:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-button-content-margin-internal)}.icon{position:relative;margin:0px;display:inline-flex;font-weight:var(--calcite-font-weight-normal);line-height:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(0.5)}100%{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}100%{inline-size:0;opacity:0;transform:scale(0.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0px}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-button-content-margin-internal)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{border-width:1px;border-style:solid;border-color:transparent}:host([kind=brand]) button,:host([kind=brand]) a{background-color:var(--calcite-color-brand);color:var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) button:focus,:host([kind=brand]) a:hover,:host([kind=brand]) a:focus{background-color:var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{background-color:var(--calcite-color-brand-press)}:host([kind=brand]) button calcite-loader,:host([kind=brand]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=danger]) button,:host([kind=danger]) a{background-color:var(--calcite-color-status-danger);color:var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) button:focus,:host([kind=danger]) a:hover,:host([kind=danger]) a:focus{background-color:var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{background-color:var(--calcite-color-status-danger-press)}:host([kind=danger]) button calcite-loader,:host([kind=danger]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([kind=neutral]) button,:host([kind=neutral]) a{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) button:focus,:host([kind=neutral]) a:hover,:host([kind=neutral]) a:focus{background-color:var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{background-color:var(--calcite-color-foreground-1)}:host([kind=neutral]) button calcite-loader,:host([kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) button:focus,:host([kind=inverse]) a:hover,:host([kind=inverse]) a:focus{background-color:var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{background-color:var(--calcite-color-inverse-press)}:host([kind=inverse]) button calcite-loader,:host([kind=inverse]) a calcite-loader{color:var(--calcite-color-text-inverse)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button calcite-loader,:host([appearance=outline-fill][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline-fill][kind=inverse]) button calcite-loader,:host([appearance=outline-fill][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline]) button,:host([appearance=outline]) a{border-width:1px;border-style:solid;background-color:transparent;box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{border-color:var(--calcite-color-brand);background-color:transparent;color:var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{border-color:var(--calcite-color-brand-hover);color:var(--calcite-color-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{border-color:var(--calcite-color-brand);color:var(--calcite-color-brand);box-shadow:inset 0 0 0 2px var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{border-color:var(--calcite-color-brand-press);color:var(--calcite-color-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{border-color:var(--calcite-color-status-danger);background-color:transparent;color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{border-color:var(--calcite-color-status-danger-hover);color:var(--calcite-color-status-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{border-color:var(--calcite-color-status-danger-press);color:var(--calcite-color-status-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-border-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button calcite-loader,:host([appearance=outline][kind=neutral]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{background-color:transparent;color:var(--calcite-color-text-1);border-color:var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{border-color:var(--calcite-color-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{border-color:var(--calcite-color-inverse);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{border-color:var(--calcite-color-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-color-inverse-press)}:host([appearance=outline][kind=inverse]) button calcite-loader,:host([appearance=outline][kind=inverse]) a calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:transparent}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) button:focus,:host([appearance=transparent]:not(.enable-editing-button)) a:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{color:var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{color:var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{color:var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{color:var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{color:var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{color:var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{border-block-start-width:1px;border-block-end-width:1px;color:var(--calcite-color-text-3);border-block-start-color:var(--calcite-color-border-input);border-block-end-color:var(--calcite-color-border-input);border-block-style:solid}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:not(.content--slotted){--calcite-button-padding-y-internal:0}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{color:var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].enable-editing-button) button{background-color:transparent}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button,:host([appearance=transparent][kind=inverse]) a,:host([appearance=transparent][kind=inverse]) calcite-loader{color:var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-button-padding-y-internal:3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-button-padding-x-internal:11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-padding-y-internal:7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-button-padding-x-internal:15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-button-padding-x-internal:1rem;--calcite-button-padding-y-internal:11px}:host([scale=l]) .button-padding--shrunk{--calcite-button-padding-y-internal:9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y-internal:0.625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,xxe=bxe,wxe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=xl("mutation",()=>this.updateHasContent()),this.resizeObserver=xl("resize",()=>this.setTooltipText()),this.handleClick=()=>{const{type:e}=this;this.href||(e==="submit"?G2e(this):e==="reset"&&j2e(this))},this.setTooltipText=()=>{const{contentEl:e}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)},this.setChildEl=e=>{var i;this.childEl=e,e&&((i=this.resizeObserver)==null||i.observe(e))},this.alignment="center",this.appearance="solid",this.label=void 0,this.kind="brand",this.disabled=!1,this.form=void 0,this.download=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.loading=!1,this.name=void 0,this.rel=void 0,this.round=!1,this.scale="m",this.splitChild=!1,this.target=void 0,this.type="button",this.width="auto",this.messages=void 0,this.messageOverrides=void 0,this.hasContent=!1,this.effectiveLocale="",this.defaultMessages=void 0,this.tooltipText=void 0}handleGlobalAttributesChanged(){So(this)}onMessagesChange(){}async connectedCallback(){Cl(this),Gu(this),this.setupTextContentObserver(),tM(this),this.formEl=Cne(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),kne(this),Pl(this),ju(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}async componentWillLoad(){Eo(this),wf()&&(this.updateHasContent(),await qu(this))}componentDidLoad(){Co(this),this.setTooltipText()}componentDidRender(){kg(this)}render(){const e=this.href?"a":"button",i=e,s=this.loading?ke("div",{class:au.buttonLoader},ke("calcite-loader",{class:this.loading?au.loadingIn:au.loadingOut,inline:!0,label:this.messages.loading,scale:this.scale==="l"?"m":"s"})):null,n=!this.iconStart&&!this.iconEnd,r=ke("calcite-icon",{key:"f1036c0a1bf5740fe63806e3559ea66fac29b726",class:{[au.icon]:!0,[au.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:Lc(this.scale)}),o=ke("calcite-icon",{key:"d2c22ecf9ca23426b4c4a3b42d623f35ee988a44",class:{[au.icon]:!0,[au.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:Lc(this.scale)}),l=ke("span",{key:"d1803021f5fa106c9e296402ec0a1498ecdf36c7",class:au.content,ref:c=>this.contentEl=c},ke("slot",{key:"d2f729c16f9c803ffa109b68d58a22a4383dd426"}));return ke(Ng,{key:"2757c795d29f812cf11def4df108837b9971dcdb",disabled:this.disabled},ke(i,{key:"e67a4882c8a0c13d6b5f98bc8c5b53c10ba36e3e","aria-busy":Wo(this.loading),"aria-expanded":this.el.ariaExpanded?this.el.ariaExpanded:null,"aria-label":this.loading?this.messages.loading:$ne(this),"aria-live":"polite",class:{[au.buttonPadding]:n,[au.buttonPaddingShrunk]:!n,[au.contentSlotted]:this.hasContent,[au.iconStartEmpty]:!this.iconStart,[au.iconEndEmpty]:!this.iconEnd},disabled:e==="button"?this.disabled:null,download:e==="a"?this.download===!0||this.download===""?"":this.download||null:null,href:e==="a"&&this.href,name:e==="button"&&this.name,onClick:this.handleClick,ref:this.setChildEl,rel:e==="a"&&this.rel,tabIndex:this.disabled?-1:null,target:e==="a"&&this.target,title:this.tooltipText,type:e==="button"&&this.type},s,this.iconStart?r:null,this.hasContent?l:null,this.iconEnd?o:null))}async setFocus(){var e;await Po(this),(e=this.childEl)==null||e.focus()}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}updateHasContent(){var i,s;const e=this.el.textContent.trim().length>0||this.el.childNodes.length>0;this.hasContent=this.el.childNodes.length===1&&((i=this.el.childNodes[0])==null?void 0:i.nodeName)==="#text"?((s=this.el.textContent)==null?void 0:s.trim().length)>0:e}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{"aria-expanded":["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return xxe}},[1,"calcite-button",{alignment:[513],appearance:[513],label:[1],kind:[513],disabled:[516],form:[513],download:[520],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],loading:[516],name:[513],rel:[513],round:[516],scale:[513],splitChild:[520,"split-child"],target:[513],type:[513],width:[513],messages:[1040],messageOverrides:[1040],hasContent:[32],effectiveLocale:[32],defaultMessages:[32],tooltipText:[32],setFocus:[64]},void 0,{"aria-expanded":["handleGlobalAttributesChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Sxe(){if(typeof customElements>"u")return;["calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-button":customElements.get(e)||customElements.define(e,wxe);break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break}})}Sxe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Exe(t,e,i){const s=e[0]-t[0],n=i[0]-e[0],r=e[1]-t[1],o=i[1]-e[1],l=r/(s||n<0&&0),c=o/(n||s<0&&0),f=(l*n+c*s)/(s+n);return(Math.sign(l)+Math.sign(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(f))||0}function yY(t,e,i){const s=e[0]-t[0],n=e[1]-t[1];return s?(3*n/s-i)/2:i}function vY(t,e,i,s,n){const[r,o]=t,[l,c]=e,f=(l-r)/3,y=n([r+f,o+f*i]).join(","),_=n([l-f,c-f*s]).join(","),x=n([l,c]).join(",");return`C ${y} ${_} ${x}`}function Cxe({width:t,height:e,min:i,max:s}){const n=s[0]-i[0],r=s[1]-i[1];return o=>{const l=(o[0]-i[0])/n*t,c=e-o[1]/r*e;return[l,c]}}function Pxe(t){const[e,i]=t[0],s=[e,i],n=[e,i];return t.reduce(({min:r,max:o},[l,c])=>({min:[Math.min(r[0],l),Math.min(r[1],c)],max:[Math.max(o[0],l),Math.max(o[1],c)]}),{min:s,max:n})}function Txe({data:t,min:e,max:i,t:s}){if(t.length===0)return"";const[n,r]=s(t[0]),[o,l]=s(e),[c]=s(i);let f,y,_;const x=t.reduce((A,k,$)=>{if(y=t[$-2],_=t[$-1],$>1){const F=Exe(y,_,k),G=f===void 0?yY(y,_,F):f,V=vY(y,_,G,F,s);return f=F,`${A} ${V}`}return A},`M ${o},${l} L ${o},${r} L ${n},${r}`),S=t[t.length-1],P=vY(_,S,f,yY(_,S,f),s);return`${x} ${P} L ${c},${l} Z`}const Ixe=":host{display:block;block-size:100%}.svg{fill:currentColor;stroke:transparent;margin:0px;display:block;block-size:100%;inline-size:100%;padding:0px}.svg .graph-path--highlight{fill:var(--calcite-color-brand);opacity:0.5}:host([hidden]){display:none}[hidden]{display:none}",Mxe=Ixe,Axe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.graphId=`calcite-graph-${tm()}`,this.resizeObserver=xl("resize",()=>So(this)),this.data=[],this.colorStops=void 0,this.highlightMin=void 0,this.highlightMax=void 0,this.min=void 0,this.max=void 0}connectedCallback(){var e;(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;(e=this.resizeObserver)==null||e.disconnect()}render(){const{data:e,colorStops:i,el:s,highlightMax:n,highlightMin:r,min:o,max:l}=this,c=this.graphId,{clientHeight:f,clientWidth:y}=s;if(!e||e.length===0)return ke("svg",{"aria-hidden":"true",class:"svg",height:f,preserveAspectRatio:"none",viewBox:`0 0 ${y} ${f}`,width:y});const{min:_,max:x}=Pxe(e);let S=_,P=x;(o<_[0]||o>_[0])&&(S=[o,0]),(l>x[0]||l<x[0])&&(P=[l,x[1]]);const A=Cxe({min:S,max:P,width:y,height:f}),[k]=A([r,P[1]]),[$]=A([n,P[1]]),F=Txe({data:e,min:_,max:x,t:A}),G=i?`url(#linear-gradient-${c})`:void 0;return ke("svg",{"aria-hidden":"true",class:"svg",height:f,preserveAspectRatio:"none",viewBox:`0 0 ${y} ${f}`,width:y},i?ke("defs",null,ke("linearGradient",{id:`linear-gradient-${c}`,x1:"0",x2:"1",y1:"0",y2:"0"},i.map(({offset:V,color:B,opacity:W})=>ke("stop",{offset:`${V*100}%`,"stop-color":B,"stop-opacity":W})))):null,r!==void 0?[ke("mask",{height:"100%",id:`${c}1`,width:"100%",x:"0%",y:"0%"},ke("path",{d:`
            M 0,0
            L ${k-1},0
            L ${k-1},${f}
            L 0,${f}
            Z
          `,fill:"white"})),ke("mask",{height:"100%",id:`${c}2`,width:"100%",x:"0%",y:"0%"},ke("path",{d:`
            M ${k+1},0
            L ${$-1},0
            L ${$-1},${f}
            L ${k+1}, ${f}
            Z
          `,fill:"white"})),ke("mask",{height:"100%",id:`${c}3`,width:"100%",x:"0%",y:"0%"},ke("path",{d:`
                M ${$+1},0
                L ${y},0
                L ${y},${f}
                L ${$+1}, ${f}
                Z
              `,fill:"white"})),ke("path",{class:"graph-path",d:F,fill:G,mask:`url(#${c}1)`}),ke("path",{class:"graph-path--highlight",d:F,fill:G,mask:`url(#${c}2)`}),ke("path",{class:"graph-path",d:F,fill:G,mask:`url(#${c}3)`})]:ke("path",{class:"graph-path",d:F,fill:G}))}get el(){return this}static get style(){return Mxe}},[1,"calcite-graph",{data:[16],colorStops:[16],highlightMin:[2,"highlight-min"],highlightMax:[2,"highlight-max"],min:[514],max:[514]}]);function Vne(){if(typeof customElements>"u")return;["calcite-graph"].forEach(e=>{switch(e){case"calcite-graph":customElements.get(e)||customElements.define(e,Axe);break}})}Vne();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const As={container:"container",containerRange:"container--range",graph:"graph",handle:"handle",handleExtension:"handle-extension",handleLabel:"handle__label",handleLabelMinValue:"handle__label--minValue",handleLabelValue:"handle__label--value",hyphen:"hyphen",hyphenWrap:"hyphen--wrap",static:"static",thumb:"thumb",thumbActive:"thumb--active",thumbContainer:"thumb-container",thumbMinValue:"thumb--minValue",thumbPrecise:"thumb--precise",thumbValue:"thumb--value",tick:"tick",tickActive:"tick--active",tickLabel:"tick__label",tickMax:"tick__label--max",tickMin:"tick__label--min",ticks:"ticks",track:"track",trackRange:"track__range",transformed:"transformed"},Dxe=250,kxe=`@charset "UTF-8";:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{--calcite-slider-handle-size:0.625rem;--calcite-slider-handle-extension-height:0.4rem;--calcite-slider-container-font-size:var(--calcite-font-size--3)}.scale--s .handle__label,.scale--s .tick__label{line-height:.75rem}.scale--m{--calcite-slider-handle-size:0.875rem;--calcite-slider-handle-extension-height:0.5rem;--calcite-slider-container-font-size:var(--calcite-font-size--2)}.scale--m .handle__label,.scale--m .tick__label{line-height:1rem}.scale--l{--calcite-slider-handle-size:1rem;--calcite-slider-handle-extension-height:0.65rem;--calcite-slider-container-font-size:var(--calcite-font-size--1)}.scale--l .handle__label,.scale--l .tick__label{line-height:1rem}.handle__label,.tick__label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);font-size:var(--calcite-slider-container-font-size)}:host{display:block}.container{position:relative;display:block;overflow-wrap:normal;word-break:normal;padding-inline:calc(var(--calcite-slider-handle-size) * 0.5);padding-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-inline:0;--calcite-slider-full-handle-height:calc(
    var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height)
  );touch-action:none;-webkit-user-select:none;user-select:none}:host([disabled]) .track__range,:host([disabled]) .tick--active{background-color:var(--calcite-color-text-3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.375rem}.scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.5rem}.scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.55rem}:host([precise]:not([has-histogram])) .container .thumb--value{--calcite-slider-thumb-y-offset:calc(var(--calcite-slider-full-handle-height) * -1)}.thumb-container{position:relative;max-inline-size:100%}.thumb{--calcite-slider-thumb-x-offset:calc(var(--calcite-slider-handle-size) * 0.5);position:absolute;margin:0px;display:flex;cursor:pointer;flex-direction:column;align-items:center;border-style:none;background-color:transparent;padding:0px;font-family:inherit;outline:2px solid transparent;outline-offset:2px;transform:translate(var(--calcite-slider-thumb-x-offset), var(--calcite-slider-thumb-y-offset))}.thumb .handle__label.static,.thumb .handle__label.transformed{position:absolute;inset-block:0px;opacity:0}.thumb .handle__label.hyphen::after{content:"—";display:inline-block;inline-size:1em}.thumb .handle__label.hyphen--wrap{display:flex}.thumb .handle{box-sizing:border-box;border-radius:9999px;background-color:var(--calcite-color-foreground-1);outline-color:transparent;block-size:var(--calcite-slider-handle-size);inline-size:var(--calcite-slider-handle-size);box-shadow:0 0 0 2px var(--calcite-color-text-3) inset;transition:border var(--calcite-internal-animation-timing-medium) ease, background-color var(--calcite-internal-animation-timing-medium) ease, box-shadow var(--calcite-animation-timing) ease}.thumb .handle-extension{inline-size:0.125rem;block-size:var(--calcite-slider-handle-extension-height);background-color:var(--calcite-color-text-3)}.thumb:hover .handle{box-shadow:0 0 0 3px var(--calcite-color-brand) inset}.thumb:hover .handle-extension{background-color:var(--calcite-color-brand)}.thumb:focus .handle{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.thumb:focus .handle-extension{background-color:var(--calcite-color-brand)}.thumb.thumb--minValue{transform:translate(calc(var(--calcite-slider-thumb-x-offset) * -1), var(--calcite-slider-thumb-y-offset))}.thumb.thumb--precise{--calcite-slider-thumb-y-offset:-0.125rem}:host([label-handles]) .thumb{--calcite-slider-thumb-x-offset:50%}:host([label-handles]):host(:not([has-histogram])) .scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-1.4375rem}:host([label-handles]):host(:not([has-histogram])) .scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-1.875rem}:host([label-handles]):host(:not([has-histogram])) .scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-2rem}:host([has-histogram][label-handles]) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--minValue.thumb--precise .handle__label{margin-block-start:0.5em}:host(:not([has-histogram]):not([precise])) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--value .handle__label{margin-block-end:0.5em}:host([label-handles][precise]):host(:not([has-histogram])) .scale--s .thumb--value{--calcite-slider-thumb-y-offset:-2.075rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--m .thumb--value{--calcite-slider-thumb-y-offset:-2.75rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--l .thumb--value{--calcite-slider-thumb-y-offset:-3.0625rem}.thumb:focus .handle,.thumb--active .handle{background-color:var(--calcite-color-brand);box-shadow:0 0 8px 0 rgba(0, 0, 0, 0.16)}.thumb:hover.thumb--precise::after,.thumb:focus.thumb--precise::after,.thumb--active.thumb--precise::after{background-color:var(--calcite-color-brand)}.track{position:relative;block-size:0.125rem;border-radius:0px;background-color:var(--calcite-color-border-2);transition:all var(--calcite-internal-animation-timing-medium) ease-in}.track__range{position:absolute;inset-block-start:0px;block-size:0.125rem;background-color:var(--calcite-color-brand)}.container--range .track__range:hover{cursor:ew-resize}.container--range .track__range::after{position:absolute;inline-size:100%;content:"";inset-block-start:calc(var(--calcite-slider-full-handle-height) * 0.5 * -1);block-size:calc(var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height))}@media (forced-colors: active){.thumb{outline-width:0;outline-offset:0}.handle{outline:2px solid transparent;outline-offset:2px}.thumb:focus .handle,.thumb .handle-extension,.thumb:hover .handle-extension,.thumb:focus .handle-extension,.thumb:active .handle-extension{background-color:canvasText}.track{background-color:canvasText}.track__range{background-color:highlight}}.tick{position:absolute;block-size:0.25rem;inline-size:0.125rem;border-width:1px;border-style:solid;background-color:var(--calcite-color-border-input);border-color:var(--calcite-color-foreground-1);inset-block-start:-2px;pointer-events:none;margin-inline-start:calc(-1 * 0.125rem)}.tick--active{background-color:var(--calcite-color-brand)}.tick__label{pointer-events:none;margin-block-start:0.875rem;display:flex;justify-content:center}.tick__label--min{transition:opacity var(--calcite-animation-timing)}.tick__label--max{transition:opacity var(--calcite-internal-animation-timing-fast)}:host([has-histogram][label-handles]) .tick__label--min,:host([has-histogram][label-handles]) .tick__label--max,:host([has-histogram][precise]) .tick__label--min,:host([has-histogram][precise]) .tick__label--max{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-3)}.graph{color:var(--calcite-color-foreground-3);block-size:48px}:host([label-ticks][ticks]) .container{padding-block-end:calc(0.875rem + var(--calcite-slider-container-font-size))}:host([has-histogram]):host([precise][label-handles]) .container{padding-block-end:calc(var(--calcite-slider-full-handle-height) + 1em)}:host([has-histogram]):host([label-handles]:not([precise])) .container{padding-block-end:calc(var(--calcite-slider-handle-size) * 0.5 + 1em)}:host([has-histogram]):host([precise]:not([label-handles])) .container{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container{padding-block-start:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container--range{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([label-handles]:not([precise])) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container--range{padding-block-end:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,Nxe=kxe;function lu(t){return Array.isArray(t)}const $xe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSliderInput=Ot(this,"calciteSliderInput",6),this.calciteSliderChange=Ot(this,"calciteSliderChange",6),this.handleKeyDown=e=>{const i=this.shouldMirror(),{activeProp:s,max:n,min:r,pageStep:o,step:l}=this,c=this[s],{key:f}=e;if(nC(f)){e.preventDefault();return}let y;if(f==="ArrowUp"||f==="ArrowRight"?y=c+l*(i&&f==="ArrowRight"?-1:1):f==="ArrowDown"||f==="ArrowLeft"?y=c-l*(i&&f==="ArrowLeft"?-1:1):f==="PageUp"?o&&(y=c+o):f==="PageDown"?o&&(y=c-o):f==="Home"?y=r:f==="End"&&(y=n),isNaN(y))return;e.preventDefault();const _=Number(y.toFixed(r$(l)));this.setValue({[s]:this.clamp(_,s)})},this.activeProp="value",this.guid=`calcite-slider-${tm()}`,this.onThumbBlur=()=>{this.activeProp=null},this.onThumbFocus=e=>{const i=e.currentTarget;this.activeProp=i.getAttribute("data-value-prop")},this.onThumbPointerDown=e=>{const i=e.currentTarget;this.pointerDownDragStart(e,i.getAttribute("data-value-prop"))},this.onTrackPointerDown=e=>{this.pointerDownDragStart(e,"minMaxValue")},this.dragUpdate=e=>{if(!this.disabled&&(e.preventDefault(),this.dragProp)){const i=this.mapToRange(e.clientX||e.pageX);if(lu(this.value)&&this.dragProp==="minMaxValue")if(this.minValueDragRange&&this.maxValueDragRange&&this.minMaxValueRange){const s=i-this.minValueDragRange,n=i+this.maxValueDragRange;n<=this.max&&s>=this.min&&n-s===this.minMaxValueRange&&this.setValue({minValue:this.clamp(s,"minValue"),maxValue:this.clamp(n,"maxValue")})}else this.minValueDragRange=i-this.minValue,this.maxValueDragRange=this.maxValue-i,this.minMaxValueRange=this.maxValue-this.minValue;else this.setValue({[this.dragProp]:this.clamp(i,this.dragProp)})}},this.pointerUpDragEnd=e=>{this.disabled||!cS(e)||this.dragEnd(e)},this.dragEnd=e=>{this.disabled||(this.removeDragListeners(),this.focusActiveHandle(e.clientX),this.lastDragPropValue!=this[this.dragProp]&&this.emitChange(),this.dragProp=null,this.lastDragPropValue=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.minMaxValueRange=null)},this.storeTrackRef=e=>{this.trackEl=e},this.storeThumbRef=e=>{if(!e)return;e.getAttribute("data-value-prop")==="minValue"?this.minHandle=e:this.maxHandle=e},this.formatValue=e=>(lY.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},lY.localize(e.toString())),this.disabled=!1,this.fillPlacement="start",this.form=void 0,this.groupSeparator=!1,this.hasHistogram=!1,this.histogram=void 0,this.histogramStops=void 0,this.labelHandles=!1,this.labelFormatter=void 0,this.labelTicks=!1,this.max=100,this.maxLabel=void 0,this.maxValue=void 0,this.min=0,this.minLabel=void 0,this.minValue=void 0,this.mirrored=!1,this.name=void 0,this.numberingSystem=void 0,this.pageStep=void 0,this.precise=!1,this.required=!1,this.snap=!1,this.step=1,this.ticks=void 0,this.value=0,this.scale="m",this.effectiveLocale="",this.minMaxValueRange=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.tickValues=[]}histogramWatcher(e){this.hasHistogram=!!e}ticksWatcher(){this.tickValues=this.generateTickValues()}valueHandler(){this.setMinMaxFromValue()}minMaxValueHandler(){this.setValueFromMinMax()}connectedCallback(){Cl(this),this.setMinMaxFromValue(),this.setValueFromMinMax(),tM(this),B2e(this)}disconnectedCallback(){kne(this),U2e(this),Pl(this),this.removeDragListeners()}componentWillLoad(){Eo(this),lu(this.value)||(this.value=this.snap?this.getClosestStep(this.value):this.clamp(this.value)),this.ticksWatcher(),this.histogramWatcher(this.histogram),Y2e(this,this.value)}componentDidLoad(){Co(this)}componentDidRender(){this.labelHandles&&(this.adjustHostObscuredHandleLabel("value"),lu(this.value)&&(this.adjustHostObscuredHandleLabel("minValue"),this.precise&&!this.hasHistogram||this.hyphenateCollidingRangeHandleLabels())),this.hideObscuredBoundingTickLabels(),kg(this)}render(){const e=this.el.id||this.guid,i=lu(this.value)?this.maxValue:this.value,s=this.minValue||this.min,n=this.shouldUseMinValue(),r=this.getUnitInterval(n?this.minValue:s)*100,o=this.getUnitInterval(i)*100,l=this.shouldMirror(),c=lu(this.value),f=this.buildThumbType("max"),y=this.renderThumb({type:f,thumbPlacement:f.includes("histogram")?"below":"above",maxInterval:o,minInterval:r,mirror:l}),_=this.buildThumbType("min"),x=c&&this.renderThumb({type:_,thumbPlacement:_.includes("histogram")||_.includes("precise")?"below":"above",maxInterval:o,minInterval:r,mirror:l}),S=c?"start":this.fillPlacement,P=S==="none"?{left:"unset",right:"unset"}:S==="end"?{left:`${l?r:o}%`,right:`${l?o:r}%`}:{left:`${l?100-o:r}%`,right:`${l?r:100-o}%`};return ke(Nr,{key:"dee9376120224b51dfa12f3e87fbdce4a481a1ed",id:e,onKeyDown:this.handleKeyDown,onTouchStart:this.handleTouchStart},ke(Ng,{key:"65bca4d477d57ced846ef97b466917b6d7fc2f21",disabled:this.disabled},ke("div",{key:"99dd57b50ded2302ca1d255708d9e4bd90de3ecb","aria-label":$ne(this),class:{[As.container]:!0,[As.containerRange]:c,[`scale--${this.scale}`]:!0}},this.renderGraph(),ke("div",{key:"47647c0d347232a0ddb384333b15860a0264aefa",class:As.track,ref:this.storeTrackRef},ke("div",{key:"3dc176871f6245f2dde77a016ddc747ad9571d3d",class:As.trackRange,onPointerDown:this.onTrackPointerDown,style:P}),ke("div",{key:"0c08b977678d6ac7e8b9944157e51948969a5dc5",class:As.ticks},this.tickValues.map(A=>{const k=`${this.getUnitInterval(A)*100}%`;let $=!1;if(S==="start"||S==="end")if(n)$=A>=this.minValue&&A<=this.maxValue;else{const F=S==="start"?s:i,G=S==="start"?i:this.max;$=A>=F&&A<=G}return ke("span",{class:{[As.tick]:!0,[As.tickActive]:$},style:{left:l?"":k,right:l?k:""}},this.renderTickLabel(A))}))),ke("div",{key:"51996cb05142dbeec20093ca12b017adee23f293",class:As.thumbContainer},x,y,ke(Z2e,{key:"6fd5c00374205d47e226a417674264417323a5c3",component:this})))))}renderThumb({type:e,mirror:i,thumbPlacement:s,minInterval:n,maxInterval:r}){const o=e.includes("labeled"),l=e.includes("precise"),c=e.includes("min"),f=lu(this.value),y=c?this.minValue:f?this.maxValue:this.value,_=c?"minValue":f?"maxValue":"value",x=c?this.minLabel:f?this.maxLabel:this.minLabel,S=c?this.minValue:y,P=_==="minValue"?this.internalLabelFormatter(this.minValue,"min"):_==="maxValue"?this.internalLabelFormatter(this.maxValue,"max"):this.internalLabelFormatter(y,"value"),A=c?{left:`${i?100-n:n}%`}:{right:`${i?r:100-r}%`},k=`${As.handleLabel} ${c?As.handleLabelMinValue:As.handleLabelValue}`,F=[...o?[ke("span",{"aria-hidden":"true",class:k},P),ke("span",{"aria-hidden":"true",class:`${k} ${As.static}`},P),ke("span",{"aria-hidden":"true",class:`${k} ${As.transformed}`},P)]:[],ke("div",{class:As.handle}),l&&ke("div",{class:As.handleExtension})];return s==="below"&&F.reverse(),ke("div",{"aria-label":x,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":S,class:{[As.thumb]:!0,[As.thumbValue]:!c,[As.thumbActive]:this.lastDragProp!=="minMaxValue"&&this.dragProp===_,[As.thumbPrecise]:l,[As.thumbMinValue]:c},"data-value-prop":_,key:e,onBlur:this.onThumbBlur,onFocus:this.onThumbFocus,onPointerDown:this.onThumbPointerDown,ref:this.storeThumbRef,role:"slider",style:A,tabIndex:0},F)}renderGraph(){return this.histogram?ke("calcite-graph",{class:As.graph,colorStops:this.histogramStops,data:this.histogram,highlightMax:lu(this.value)?this.maxValue:this.value,highlightMin:lu(this.value)?this.minValue:this.min,max:this.max,min:this.min}):null}renderTickLabel(e){const{hasHistogram:i,labelHandles:s,labelTicks:n,max:r,min:o,precise:l,value:c}=this,f=lu(c),y=e===o,_=e===r,x=y||_;return n&&(!i&&(x||!l||!f)||i&&(x||!l&&!s))?ke("span",{class:{[As.tickLabel]:!0,[As.tickMin]:y,[As.tickMax]:_}},this.internalLabelFormatter(e,"tick")):null}pointerDownHandler(e){if(this.disabled||!cS(e))return;const i=e.clientX||e.pageX,s=this.mapToRange(i);let n="value";lu(this.value)&&(s>=this.minValue&&s<=this.maxValue&&this.lastDragProp==="minMaxValue"?n="minMaxValue":n=Math.abs(this.maxValue-s)<Math.abs(this.minValue-s)||s>=this.maxValue?"maxValue":"minValue"),this.lastDragPropValue=this[n],this.dragStart(n),this.el.shadowRoot.querySelector(`.${As.thumb}:active`)||this.setValue({[n]:this.clamp(s,n)}),this.focusActiveHandle(i)}handleTouchStart(e){e.preventDefault()}async setFocus(){await Po(this);const e=this.minHandle?this.minHandle:this.maxHandle;e==null||e.focus()}buildThumbType(e){const i=[e];return this.labelHandles&&i.push("labeled"),this.precise&&i.push("precise"),this.hasHistogram&&i.push("histogram"),i.join("-")}setValueFromMinMax(){const{minValue:e,maxValue:i}=this;typeof e=="number"&&typeof i=="number"&&(this.value=[e,i])}setMinMaxFromValue(){const{value:e}=this;lu(e)&&(this.minValue=e[0],this.maxValue=e[1])}onLabelClick(){this.setFocus()}shouldMirror(){return this.mirrored&&!this.hasHistogram}shouldUseMinValue(){return lu(this.value)?this.hasHistogram&&this.maxValue===0||!this.hasHistogram&&this.minValue===0:!1}getTickDensity(){const e=(this.max-this.min)/this.ticks/Dxe;return e<1?1:e}generateTickValues(){const e=this.ticks??0;if(e<=0)return[];const i=[this.min],s=this.getTickDensity(),n=e*s;let r=this.min;for(;r<this.max;)r+=n,i.push(Math.min(r,this.max));return i.includes(this.max)||i.push(this.max),i}pointerDownDragStart(e,i){cS(e)&&this.dragStart(i)}dragStart(e){this.dragProp=e,this.lastDragProp=this.dragProp,this.activeProp=e,window.addEventListener("pointermove",this.dragUpdate),window.addEventListener("pointerup",this.pointerUpDragEnd),window.addEventListener("pointercancel",this.dragEnd)}focusActiveHandle(e){this.dragProp==="minValue"?this.minHandle.focus():this.dragProp==="maxValue"||this.dragProp==="value"?this.maxHandle.focus():this.dragProp==="minMaxValue"&&this.getClosestHandle(e).focus()}emitInput(){this.calciteSliderInput.emit()}emitChange(){this.calciteSliderChange.emit()}removeDragListeners(){window.removeEventListener("pointermove",this.dragUpdate),window.removeEventListener("pointerup",this.pointerUpDragEnd),window.removeEventListener("pointercancel",this.dragEnd)}setValue(e){let i;if(Object.keys(e).forEach(n=>{const r=e[n];i||(i=this[n]!==r),this[n]=r}),!i)return;this.dragProp||this.emitChange(),this.emitInput()}clamp(e,i){return e=n$(e,this.min,this.max),i==="maxValue"&&(e=Math.max(e,this.minValue)),i==="minValue"&&(e=Math.min(e,this.maxValue)),e}mapToRange(e){const i=this.max-this.min,{left:s,width:n}=this.trackEl.getBoundingClientRect(),r=(e-s)/n,o=this.shouldMirror(),l=this.clamp(this.min+i*(o?1-r:r)),c=Number(l.toFixed(r$(this.step)));return this.snap&&this.step?this.getClosestStep(c):c}getClosestStep(e){const{max:i,min:s,step:n}=this,r=new Vs(`${Math.floor((e-s)/n)}`).multiply(`${n}`).add(`${s}`).toString();let o=this.clamp(Number(r));return o>i&&(o-=n),o}getClosestHandle(e){return this.getDistanceX(this.maxHandle,e)>this.getDistanceX(this.minHandle,e)?this.minHandle:this.maxHandle}getDistanceX(e,i){return Math.abs(e.getBoundingClientRect().left-i)}getFontSizeForElement(e){return Number(window.getComputedStyle(e).getPropertyValue("font-size").match(/\d+/)[0])}getUnitInterval(e){e=this.clamp(e);const i=this.max-this.min;return(e-this.min)/i}adjustHostObscuredHandleLabel(e){const i=this.el.shadowRoot.querySelector(`.handle__label--${e}`),s=this.el.shadowRoot.querySelector(`.handle__label--${e}.static`),n=this.el.shadowRoot.querySelector(`.handle__label--${e}.transformed`),r=s.getBoundingClientRect(),o=this.getHostOffset(r.left,r.right);i.style.transform=`translateX(${o}px)`,n.style.transform=`translateX(${o}px)`}hyphenateCollidingRangeHandleLabels(){const{shadowRoot:e}=this.el,i=this.shouldMirror(),s=i?"value":"minValue",n=i?"minValue":"value",r=e.querySelector(`.handle__label--${s}`),o=e.querySelector(`.handle__label--${s}.static`),l=e.querySelector(`.handle__label--${s}.transformed`),c=this.getHostOffset(o.getBoundingClientRect().left,o.getBoundingClientRect().right),f=e.querySelector(`.handle__label--${n}`),y=e.querySelector(`.handle__label--${n}.static`),_=e.querySelector(`.handle__label--${n}.transformed`),x=this.getHostOffset(y.getBoundingClientRect().left,y.getBoundingClientRect().right),S=this.getFontSizeForElement(r),P=this.getRangeLabelOverlap(l,_),A=r,k=S/2;if(P>0){if(A.classList.add(As.hyphen,As.hyphenWrap),x===0&&c===0){let $=P/2-k;$=Math.sign($)===-1?Math.abs($):-$;const F=this.getHostOffset(l.getBoundingClientRect().left+$-k,l.getBoundingClientRect().right+$-k);let G=P/2;const V=this.getHostOffset(_.getBoundingClientRect().left+G,_.getBoundingClientRect().right+G);F!==0&&($+=F,G+=F),V!==0&&($+=V,G+=V),r.style.transform=`translateX(${$}px)`,l.style.transform=`translateX(${$-k}px)`,f.style.transform=`translateX(${G}px)`,_.style.transform=`translateX(${G}px)`}else if(c>0||x>0)r.style.transform=`translateX(${c+k}px)`,f.style.transform=`translateX(${P+x}px)`,_.style.transform=`translateX(${P+x}px)`;else if(c<0||x<0){let $=Math.abs(c)+P-k;$=Math.sign($)===-1?Math.abs($):-$,r.style.transform=`translateX(${$}px)`,l.style.transform=`translateX(${$-k}px)`}}else A.classList.remove(As.hyphen,As.hyphenWrap),r.style.transform=`translateX(${c}px)`,l.style.transform=`translateX(${c}px)`,f.style.transform=`translateX(${x}px)`,_.style.transform=`translateX(${x}px)`}hideObscuredBoundingTickLabels(){const e=lu(this.value);if(!this.hasHistogram&&!e&&!this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&this.labelHandles&&!this.precise||!this.hasHistogram&&!e&&!this.labelHandles&&this.precise||!this.hasHistogram&&!e&&this.labelHandles&&this.precise||!this.hasHistogram&&e&&!this.precise||this.hasHistogram&&!this.precise&&!this.labelHandles)return;const i=this.el.shadowRoot.querySelector(`.${As.thumbMinValue}`),s=this.el.shadowRoot.querySelector(`.${As.thumbValue}`),n=this.el.shadowRoot.querySelector(`.${As.tickMin}`),r=this.el.shadowRoot.querySelector(`.${As.tickMax}`);!i&&s&&n&&r&&(n.style.opacity=this.isMinTickLabelObscured(n,s)?"0":"1",r.style.opacity=this.isMaxTickLabelObscured(r,s)?"0":"1"),i&&s&&n&&r&&(n.style.opacity=this.isMinTickLabelObscured(n,i)||this.isMinTickLabelObscured(n,s)?"0":"1",r.style.opacity=this.isMaxTickLabelObscured(r,i)||this.isMaxTickLabelObscured(r,s)&&this.hasHistogram?"0":"1")}getHostOffset(e,i){const s=this.el.getBoundingClientRect(),n=7;return e+n<s.left?s.left-e-n:i-n>s.right?-(i-s.right)+n:0}getRangeLabelOverlap(e,i){const s=e.getBoundingClientRect(),n=i.getBoundingClientRect(),r=this.getFontSizeForElement(e),o=s.right+r-n.left;return Math.max(o,0)}isMinTickLabelObscured(e,i){const s=e.getBoundingClientRect(),n=i.getBoundingClientRect();return oY(s,n)}isMaxTickLabelObscured(e,i){const s=e.getBoundingClientRect(),n=i.getBoundingClientRect();return oY(s,n)}internalLabelFormatter(e,i){const s=this.labelFormatter;if(!s)return this.formatValue(e);const n=s(e,i,this.formatValue);return n??this.formatValue(e)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{histogram:["histogramWatcher"],ticks:["ticksWatcher"],value:["valueHandler"],minValue:["minMaxValueHandler"],maxValue:["minMaxValueHandler"]}}static get style(){return Nxe}},[17,"calcite-slider",{disabled:[516],fillPlacement:[513,"fill-placement"],form:[513],groupSeparator:[516,"group-separator"],hasHistogram:[1540,"has-histogram"],histogram:[16],histogramStops:[16],labelHandles:[516,"label-handles"],labelFormatter:[16],labelTicks:[516,"label-ticks"],max:[514],maxLabel:[1,"max-label"],maxValue:[1026,"max-value"],min:[514],minLabel:[1,"min-label"],minValue:[1026,"min-value"],mirrored:[516],name:[513],numberingSystem:[1,"numbering-system"],pageStep:[514,"page-step"],precise:[516],required:[516],snap:[516],step:[514],ticks:[514],value:[1538],scale:[513],effectiveLocale:[32],minMaxValueRange:[32],minValueDragRange:[32],maxValueDragRange:[32],tickValues:[32],setFocus:[64]},[[1,"pointerdown","pointerDownHandler"]],{histogram:["histogramWatcher"],ticks:["ticksWatcher"],value:["valueHandler"],minValue:["minMaxValueHandler"],maxValue:["minMaxValueHandler"]}]);function Oxe(){if(typeof customElements>"u")return;["calcite-slider","calcite-graph"].forEach(e=>{switch(e){case"calcite-slider":customElements.get(e)||customElements.define(e,$xe);break;case"calcite-graph":customElements.get(e)||Vne();break}})}Oxe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const oh={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},Rxe={tooltip:"tooltip"},Lxe=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;background-color:transparent}:host,button{border-end-end-radius:var(--calcite-action-corner-radius-end-end, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-end-start-radius:var(--calcite-action-corner-radius-end-start, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-start-end-radius:var(--calcite-action-corner-radius-start-end, var(--calcite-action-corner-radius, var(--calcite-corner-radius)));border-start-start-radius:var(--calcite-action-corner-radius-start-start, var(--calcite-action-corner-radius, var(--calcite-corner-radius)))}.button{position:relative;margin:0px;display:flex;inline-size:auto;cursor:pointer;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-color-text-3));text-align:unset;flex:1 0 auto}.button:hover,.button:focus{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-pressed, var(--calcite-color-text-1))}.button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.button:active{background-color:var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))}.icon-container{pointer-events:none;margin:0px;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0px;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-property:margin;transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus{color:var(--calcite-action-text-color-pressed, var(--calcite-color-text-1));background-color:var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host([appearance=transparent]) .button:hover,:host([appearance=transparent]) .button:focus{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([data-active]) .button{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .button{padding-inline:0.5rem;padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:0.5rem}:host([scale=m]) .button{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:0.75rem}:host([scale=l]) .button{padding:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:0.25rem;inline-size:1rem;position:relative}.indicator-without-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;background-color:var(--calcite-color-foreground-1);opacity:var(--calcite-opacity-disabled)}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{background-color:var(--calcite-color-foreground-3);opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,Fxe=Lxe,zxe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=xl("mutation",()=>So(this)),this.guid=`calcite-action-${tm()}`,this.indicatorId=`${this.guid}-indicator`,this.buttonId=`${this.guid}-button`,this.handleTooltipSlotChange=e=>{const s=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"))[0];s&&(s.referenceElement=this.buttonEl)},this.active=!1,this.alignment=void 0,this.appearance="solid",this.compact=!1,this.disabled=!1,this.icon=void 0,this.iconFlipRtl=!1,this.indicator=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0}onMessagesChange(){}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}connectedCallback(){var e;Cl(this),Gu(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}async componentWillLoad(){Eo(this),wf()&&await qu(this)}componentDidLoad(){Co(this)}disconnectedCallback(){var e;Pl(this),ju(this),(e=this.mutationObserver)==null||e.disconnect()}componentDidRender(){kg(this)}async setFocus(){var e;await Po(this),(e=this.buttonEl)==null||e.focus()}renderTextContainer(){const{text:e,textEnabled:i}=this,s={[oh.textContainer]:!0,[oh.textContainerVisible]:i};return e?ke("div",{class:s,key:"text-container"},e):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:s,buttonId:n}=this;return ke("div",{"aria-labelledby":n,"aria-live":"polite",class:oh.indicatorText,id:s,role:"region"},e?i.indicator:null)}renderIconContainer(){var S;const{loading:e,icon:i,scale:s,el:n,iconFlipRtl:r,indicator:o}=this,l=s==="l"?"l":"m",c=e?ke("calcite-loader",{inline:!0,label:this.messages.loading,scale:l}):null,f=i?ke("calcite-icon",{class:{[oh.indicatorWithIcon]:o},flipRtl:r,icon:i,scale:Lc(this.scale)}):null,y=c||f,_=y||((S=n.children)==null?void 0:S.length),x=ke("div",{class:{[oh.slotContainer]:!0,[oh.slotContainerHidden]:e}},ke("slot",null));return _?ke("div",{"aria-hidden":"true",class:oh.iconContainer,key:"icon-container"},y,x):null}render(){const{active:e,compact:i,disabled:s,icon:n,loading:r,textEnabled:o,label:l,text:c,indicator:f,indicatorId:y,buttonId:_,messages:x}=this,S=l||c,P=S?`${S}${f?` (${x.indicator})`:""}`:"",A={[oh.button]:!0,[oh.buttonTextVisible]:o,[oh.buttonCompact]:i};return ke(Nr,{key:"3b459307dcb6f8d373e70cd5c7a45d122565a70e"},ke(Ng,{key:"3a81f1fb62a66f1dbd608f095ed90f2d47a9daf6",disabled:s},ke("button",{key:"bb5249babc116d462becd6b9a056ca0d368c6e09","aria-busy":Wo(r),"aria-controls":f?y:null,"aria-label":P,"aria-pressed":Wo(e),class:A,disabled:s,id:_,ref:k=>this.buttonEl=k},this.renderIconContainer(),this.renderTextContainer(),!n&&f&&ke("div",{class:oh.indicatorWithoutIcon,key:"indicator-no-icon"})),ke("slot",{key:"983989711d64076eca866c1928f9c777331fcba4",name:Rxe.tooltip,onSlotchange:this.handleTooltipSlotChange}),this.renderIndicatorText()))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Fxe}},[1,"calcite-action",{active:[516],alignment:[513],appearance:[513],compact:[516],disabled:[516],icon:[1],iconFlipRtl:[516,"icon-flip-rtl"],indicator:[516],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function sm(){if(typeof customElements>"u")return;["calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-action":customElements.get(e)||customElements.define(e,zxe);break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break}})}sm();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Wf={container:"container",containerContent:"container-content",hasProgress:"progress-bar",hide:"hide",primary:"primary",secondary:"secondary",tertiary:"tertiary"},Aa={logo:"logo",user:"user",progress:"progress",navigationAction:"navigation-action",contentStart:"content-start",contentEnd:"content-end",contentCenter:"content-center",navSecondary:"navigation-secondary",navTertiary:"navigation-tertiary"},qxe={hamburger:"hamburger"},Vxe=":host([hidden]){display:none}[hidden]{display:none}.container{margin-inline:auto;display:flex;inline-size:100%;flex-direction:column;margin-block:0;margin-inline:auto;background-color:var(--calcite-navigation-background, var(--calcite-color-foreground-1))}.container.primary,.container.secondary,.container.tertiary{border-block-end:1px solid;border-block-end-color:var(--calcite-navigation-border-color, var(--calcite-color-border-3))}.user,.logo{display:flex}.hide{display:none}.primary{block-size:4rem}.secondary{block-size:3rem}.tertiary{block-size:3rem}.container-content{margin-inline:auto;display:flex;block-size:100%;inline-size:100%;margin-block:0;inline-size:var(--calcite-navigation-width, 100%);max-inline-size:100%}.container-content.progress-bar{margin-block-start:0.125rem}slot[name]{display:flex;flex-direction:row}slot[name=navigation-secondary]::slotted(calcite-navigation),slot[name=navigation-tertiary]::slotted(calcite-navigation){inline-size:100%}slot[name=content-start]::slotted(*),slot[name=content-center]::slotted(*),slot[name=content-end]::slotted(*){display:flex;flex-direction:row;align-items:center}slot[name=progress],slot[name=progress] calcite-progress{inset-block-start:0;inset-inline:0}slot[name=content-end]{margin-inline-start:auto}slot[name=content-start]{margin-inline-end:auto}slot[name=content-end],slot[name=logo]~slot[name=user],slot[name=user]:only-child{margin-inline-start:auto}slot[name=content-center]{margin-inline-start:auto;margin-inline-end:auto}slot[name=content-start]~slot[name=content-center]{margin-inline-start:0px}slot[name=content-start]~slot[name=content-end],slot[name=content-center]~slot[name=content-end],slot[name=content-center]~slot[name=user],slot[name=content-end]~slot[name=user]{margin:0px}",Gxe=Vxe,jxe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteNavigationActionSelect=Ot(this,"calciteNavigationActionSelect",6),this.actionClickHandler=()=>{this.calciteNavigationActionSelect.emit()},this.handleUserSlotChange=e=>{this.isPrimaryLevel()&&(this.userSlotHasElements=ks(e))},this.handleLogoSlotChange=e=>{this.isPrimaryLevel()&&(this.logoSlotHasElements=ks(e))},this.handleContentStartSlotChange=e=>{this.isPrimaryLevel()&&(this.primaryContentStartSlotHasElements=ks(e))},this.handleContentEndSlotChange=e=>{this.isPrimaryLevel()&&(this.primaryContentEndSlotHasElements=ks(e))},this.handleContentCenterSlotChange=e=>{this.isPrimaryLevel()&&(this.primaryContentCenterSlotHasElements=ks(e))},this.handleSecondarySlotChange=e=>{this.secondarySlotHasElements=ks(e)},this.handleTertiarySlotChange=e=>{this.tertiarySlotHasElements=ks(e)},this.handleMenuActionSlotChange=e=>{this.isPrimaryLevel()&&(this.navigationActionSlotHasElements=ks(e),this.navigationActionSlotHasElements&&(this.navigationAction=!1))},this.handleProgressSlotChange=e=>{this.isPrimaryLevel()&&(this.progressSlotHasElement=ks(e))},this.label=void 0,this.navigationAction=!1,this.logoSlotHasElements=void 0,this.navigationActionSlotHasElements=void 0,this.primaryContentCenterSlotHasElements=void 0,this.primaryContentEndSlotHasElements=void 0,this.primaryContentStartSlotHasElements=void 0,this.progressSlotHasElement=void 0,this.secondarySlotHasElements=void 0,this.tertiarySlotHasElements=void 0,this.userSlotHasElements=void 0}async setFocus(){var e;return await Po(this),(e=this.navigationActionEl)==null?void 0:e.setFocus()}componentWillLoad(){Eo(this)}componentDidLoad(){Co(this)}isPrimaryLevel(){return this.el.slot!==Aa.navSecondary&&this.el.slot!==Aa.navTertiary}renderMenuAction(){return ke("slot",{name:Aa.navigationAction,onSlotchange:this.handleMenuActionSlotChange},this.navigationAction&&ke("calcite-action",{icon:qxe.hamburger,onClick:this.actionClickHandler,ref:e=>this.navigationActionEl=e,text:this.label}))}render(){const e=this.logoSlotHasElements||this.userSlotHasElements||this.navigationActionSlotHasElements||this.primaryContentCenterSlotHasElements||this.primaryContentEndSlotHasElements||this.primaryContentStartSlotHasElements||this.navigationAction,i=this.el.slot;return ke(Nr,{key:"bf64aa6c6c41bfad6413b58f7897527bb62e1d96"},ke("div",{key:"8c30501a94d5c41e60291c1f0d1cb2856afa5d62",class:{[Wf.container]:!0,[Wf.secondary]:i===Aa.navSecondary,[Wf.tertiary]:i===Aa.navTertiary,[Wf.primary]:e}},ke("div",{key:"ef4c088fc24566ca24da9abe6a30903fedcad4d9",class:{[Wf.hide]:!this.progressSlotHasElement,[Aa.progress]:!0}},ke("slot",{key:"0abc91e366b542e11ee76f13f099ee8b64a55ee0",name:Aa.progress,onSlotchange:this.handleProgressSlotChange})),ke("div",{key:"689dc16c2ab71944a78f3bfc16c1c16c9159f073",class:{[Wf.containerContent]:!0,[Wf.hasProgress]:this.progressSlotHasElement}},this.renderMenuAction(),ke("div",{key:"122f9d2d278a0a87dc1774f4933a4bb120410e48",class:{[Wf.hide]:!this.logoSlotHasElements,[Aa.logo]:!0}},ke("slot",{key:"38f2a0106cb2b3a844b60406c629c0cff4c1b64e",name:Aa.logo,onSlotchange:this.handleLogoSlotChange})),ke("slot",{key:"af8aa2c6ed65c95c51ebe31314cd1e684beef657",name:Aa.contentStart,onSlotchange:this.handleContentStartSlotChange}),ke("slot",{key:"989ba0f344ce973ea32b07ee02b04d62068cefb8",name:Aa.contentCenter,onSlotchange:this.handleContentCenterSlotChange}),ke("slot",{key:"e0fd2d40efb52e8735ca426c1374a3da4882a77d",name:Aa.contentEnd,onSlotchange:this.handleContentEndSlotChange}),ke("div",{key:"56e905fef7a76fd14be7085f367d6abf8b44a80b",class:{[Wf.hide]:!this.userSlotHasElements,[Aa.user]:!0}},ke("slot",{key:"e038f1510da60abbb05c1fd8541563334f86f6d5",name:Aa.user,onSlotchange:this.handleUserSlotChange})))),ke(Z6,{key:"3a65439c3774cfb42fa6bc5f12c234a66f8bb314"},ke("slot",{key:"52e0b810e42911da6dc1ea448026f5756df0206f",name:Aa.navSecondary,onSlotchange:this.handleSecondarySlotChange}),ke("slot",{key:"97c2666bcd896fa763cb84d6b53285e2e26b51d1",name:Aa.navTertiary,onSlotchange:this.handleTertiarySlotChange})))}get el(){return this}static get style(){return Gxe}},[1,"calcite-navigation",{label:[1],navigationAction:[516,"navigation-action"],logoSlotHasElements:[32],navigationActionSlotHasElements:[32],primaryContentCenterSlotHasElements:[32],primaryContentEndSlotHasElements:[32],primaryContentStartSlotHasElements:[32],progressSlotHasElement:[32],secondarySlotHasElements:[32],tertiarySlotHasElements:[32],userSlotHasElements:[32],setFocus:[64]}]);function Bxe(){if(typeof customElements>"u")return;["calcite-navigation","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-navigation":customElements.get(e)||customElements.define(e,jxe);break;case"calcite-action":customElements.get(e)||sm();break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break}})}Bxe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Qz=(t,e)=>{const i=t.level?`h${t.level}`:"div";return delete t.level,ke(i,{class:t.class,key:t.key},e)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const yd={container:"container",heading:"heading",description:"description",anchor:"anchor",image:"image",standalone:"standalone",icon:"icon"},Hxe=`:host{display:inline-flex;outline:2px solid transparent;outline-offset:2px}.anchor{margin:0px;display:flex;cursor:pointer;align-items:center;justify-content:center;font-size:var(--calcite-font-size-0);line-height:1.25rem;text-decoration-line:none;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;color:inherit;border-block-end:2px solid transparent}.anchor:hover,.anchor:focus{background-color:var(--calcite-color-foreground-2)}.anchor:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.anchor:active{background-color:var(--calcite-color-foreground-3)}.image,.icon{margin:0px;display:flex;block-size:1.75rem;padding-inline:1rem}.image~.icon{padding-inline-start:0px}.image~.container,.icon~.container{padding-inline-start:0px}:host(:active) .anchor{color:var(--calcite-color-text-1)}:host([active]) .anchor{color:var(--calcite-color-text-1);border-color:var(--calcite-color-brand);--calcite-icon-color:var(--calcite-color-brand)}.container{margin-block-start:0.125rem;display:flex;flex-direction:column;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-inline:1rem;text-align:start}.heading{margin-inline-start:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.standalone{font-size:var(--calcite-font-size-1)}.description{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host([hidden]){display:none}[hidden]{display:none}`,Uxe=Hxe,Yxe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.active=void 0,this.href=void 0,this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.rel=void 0,this.description=void 0,this.target=void 0,this.heading=void 0,this.thumbnail=void 0,this.headingLevel=void 0}async setFocus(){await Po(this),this.href&&this.el.focus()}componentWillLoad(){Eo(this)}componentDidLoad(){Co(this)}renderIcon(){return ke("calcite-icon",{class:yd.icon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:"l"})}renderHeaderContent(){const{heading:e,headingLevel:i,description:s}=this,n=e?ke(Qz,{class:{[yd.heading]:!0,[yd.standalone]:!this.description},key:yd.heading,level:i},e):null,r=s?ke("span",{class:yd.description,key:yd.description},s):null;return n||r?ke("div",{class:yd.container,key:yd.container},n,r):null}render(){const{thumbnail:e}=this;return ke(Nr,{key:"40dcb76c1c7919fd1a8b6929616d1d507c1e3301"},ke("a",{key:"7b457d99add3c3d4edbd4478711f9b9c9fb12caf",class:yd.anchor,href:this.href,rel:this.rel,target:this.target},e&&ke("img",{key:"592aa3cfc2dfa47f9aa603f7edce4521dbaa27ae",alt:this.label||"",class:yd.image,src:e}),this.icon&&this.renderIcon(),this.renderHeaderContent()))}static get delegatesFocus(){return!0}get el(){return this}static get style(){return Uxe}},[17,"calcite-navigation-logo",{active:[516],href:[513],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],rel:[513],description:[1],target:[513],heading:[1],thumbnail:[1],headingLevel:[514,"heading-level"],setFocus:[64]}]);function Xxe(){if(typeof customElements>"u")return;["calcite-navigation-logo","calcite-icon"].forEach(e=>{switch(e){case"calcite-navigation-logo":customElements.get(e)||customElements.define(e,Yxe);break;case"calcite-icon":customElements.get(e)||Qo();break}})}Xxe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var Gne={exports:{}},jne={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Bne={exports:{}},Wxe=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},Zxe=Wxe,Kxe=Array.prototype.concat,Jxe=Array.prototype.slice,_Y=Bne.exports=function(e){for(var i=[],s=0,n=e.length;s<n;s++){var r=e[s];Zxe(r)?i=Kxe.call(i,Jxe.call(r)):i.push(r)}return i};_Y.wrap=function(t){return function(){return t(_Y(arguments))}};var dS=jne,rC=Bne.exports,Hne=Object.hasOwnProperty,Une=Object.create(null);for(var I8 in dS)Hne.call(dS,I8)&&(Une[dS[I8]]=I8);var Eu=Gne.exports={to:{},get:{}};Eu.get=function(t){var e=t.substring(0,3).toLowerCase(),i,s;switch(e){case"hsl":i=Eu.get.hsl(t),s="hsl";break;case"hwb":i=Eu.get.hwb(t),s="hwb";break;default:i=Eu.get.rgb(t),s="rgb";break}return i?{model:s,value:i}:null};Eu.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,i=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,s=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,n=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,r=/^(\w+)$/,o=[0,0,0,1],l,c,f;if(l=t.match(i)){for(f=l[2],l=l[1],c=0;c<3;c++){var y=c*2;o[c]=parseInt(l.slice(y,y+2),16)}f&&(o[3]=parseInt(f,16)/255)}else if(l=t.match(e)){for(l=l[1],f=l[3],c=0;c<3;c++)o[c]=parseInt(l[c]+l[c],16);f&&(o[3]=parseInt(f+f,16)/255)}else if(l=t.match(s)){for(c=0;c<3;c++)o[c]=parseInt(l[c+1],0);l[4]&&(l[5]?o[3]=parseFloat(l[4])*.01:o[3]=parseFloat(l[4]))}else if(l=t.match(n)){for(c=0;c<3;c++)o[c]=Math.round(parseFloat(l[c+1])*2.55);l[4]&&(l[5]?o[3]=parseFloat(l[4])*.01:o[3]=parseFloat(l[4]))}else return(l=t.match(r))?l[1]==="transparent"?[0,0,0,0]:Hne.call(dS,l[1])?(o=dS[l[1]],o[3]=1,o):null:null;for(c=0;c<3;c++)o[c]=rg(o[c],0,255);return o[3]=rg(o[3],0,1),o};Eu.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(e);if(i){var s=parseFloat(i[4]),n=(parseFloat(i[1])%360+360)%360,r=rg(parseFloat(i[2]),0,100),o=rg(parseFloat(i[3]),0,100),l=rg(isNaN(s)?1:s,0,1);return[n,r,o,l]}return null};Eu.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(e);if(i){var s=parseFloat(i[4]),n=(parseFloat(i[1])%360+360)%360,r=rg(parseFloat(i[2]),0,100),o=rg(parseFloat(i[3]),0,100),l=rg(isNaN(s)?1:s,0,1);return[n,r,o,l]}return null};Eu.to.hex=function(){var t=rC(arguments);return"#"+IP(t[0])+IP(t[1])+IP(t[2])+(t[3]<1?IP(Math.round(t[3]*255)):"")};Eu.to.rgb=function(){var t=rC(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Eu.to.rgb.percent=function(){var t=rC(arguments),e=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),s=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+i+"%, "+s+"%)":"rgba("+e+"%, "+i+"%, "+s+"%, "+t[3]+")"};Eu.to.hsl=function(){var t=rC(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Eu.to.hwb=function(){var t=rC(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Eu.to.keyword=function(t){return Une[t.slice(0,3)]};function rg(t,e,i){return Math.min(Math.max(e,t),i)}function IP(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const JS=jne,Yne={};for(const t of Object.keys(JS))Yne[JS[t]]=t;const li={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Xne=li;for(const t of Object.keys(li)){if(!("channels"in li[t]))throw new Error("missing channels property: "+t);if(!("labels"in li[t]))throw new Error("missing channel labels property: "+t);if(li[t].labels.length!==li[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:i}=li[t];delete li[t].channels,delete li[t].labels,Object.defineProperty(li[t],"channels",{value:e}),Object.defineProperty(li[t],"labels",{value:i})}li.rgb.hsl=function(t){const e=t[0]/255,i=t[1]/255,s=t[2]/255,n=Math.min(e,i,s),r=Math.max(e,i,s),o=r-n;let l,c;r===n?l=0:e===r?l=(i-s)/o:i===r?l=2+(s-e)/o:s===r&&(l=4+(e-i)/o),l=Math.min(l*60,360),l<0&&(l+=360);const f=(n+r)/2;return r===n?c=0:f<=.5?c=o/(r+n):c=o/(2-r-n),[l,c*100,f*100]};li.rgb.hsv=function(t){let e,i,s,n,r;const o=t[0]/255,l=t[1]/255,c=t[2]/255,f=Math.max(o,l,c),y=f-Math.min(o,l,c),_=function(x){return(f-x)/6/y+1/2};return y===0?(n=0,r=0):(r=y/f,e=_(o),i=_(l),s=_(c),o===f?n=s-i:l===f?n=1/3+e-s:c===f&&(n=2/3+i-e),n<0?n+=1:n>1&&(n-=1)),[n*360,r*100,f*100]};li.rgb.hwb=function(t){const e=t[0],i=t[1];let s=t[2];const n=li.rgb.hsl(t)[0],r=1/255*Math.min(e,Math.min(i,s));return s=1-1/255*Math.max(e,Math.max(i,s)),[n,r*100,s*100]};li.rgb.cmyk=function(t){const e=t[0]/255,i=t[1]/255,s=t[2]/255,n=Math.min(1-e,1-i,1-s),r=(1-e-n)/(1-n)||0,o=(1-i-n)/(1-n)||0,l=(1-s-n)/(1-n)||0;return[r*100,o*100,l*100,n*100]};function Qxe(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}li.rgb.keyword=function(t){const e=Yne[t];if(e)return e;let i=1/0,s;for(const n of Object.keys(JS)){const r=JS[n],o=Qxe(t,r);o<i&&(i=o,s=n)}return s};li.keyword.rgb=function(t){return JS[t]};li.rgb.xyz=function(t){let e=t[0]/255,i=t[1]/255,s=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;const n=e*.4124+i*.3576+s*.1805,r=e*.2126+i*.7152+s*.0722,o=e*.0193+i*.1192+s*.9505;return[n*100,r*100,o*100]};li.rgb.lab=function(t){const e=li.rgb.xyz(t);let i=e[0],s=e[1],n=e[2];i/=95.047,s/=100,n/=108.883,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const r=116*s-16,o=500*(i-s),l=200*(s-n);return[r,o,l]};li.hsl.rgb=function(t){const e=t[0]/360,i=t[1]/100,s=t[2]/100;let n,r,o;if(i===0)return o=s*255,[o,o,o];s<.5?n=s*(1+i):n=s+i-s*i;const l=2*s-n,c=[0,0,0];for(let f=0;f<3;f++)r=e+1/3*-(f-1),r<0&&r++,r>1&&r--,6*r<1?o=l+(n-l)*6*r:2*r<1?o=n:3*r<2?o=l+(n-l)*(2/3-r)*6:o=l,c[f]=o*255;return c};li.hsl.hsv=function(t){const e=t[0];let i=t[1]/100,s=t[2]/100,n=i;const r=Math.max(s,.01);s*=2,i*=s<=1?s:2-s,n*=r<=1?r:2-r;const o=(s+i)/2,l=s===0?2*n/(r+n):2*i/(s+i);return[e,l*100,o*100]};li.hsv.rgb=function(t){const e=t[0]/60,i=t[1]/100;let s=t[2]/100;const n=Math.floor(e)%6,r=e-Math.floor(e),o=255*s*(1-i),l=255*s*(1-i*r),c=255*s*(1-i*(1-r));switch(s*=255,n){case 0:return[s,c,o];case 1:return[l,s,o];case 2:return[o,s,c];case 3:return[o,l,s];case 4:return[c,o,s];case 5:return[s,o,l]}};li.hsv.hsl=function(t){const e=t[0],i=t[1]/100,s=t[2]/100,n=Math.max(s,.01);let r,o;o=(2-i)*s;const l=(2-i)*n;return r=i*n,r/=l<=1?l:2-l,r=r||0,o/=2,[e,r*100,o*100]};li.hwb.rgb=function(t){const e=t[0]/360;let i=t[1]/100,s=t[2]/100;const n=i+s;let r;n>1&&(i/=n,s/=n);const o=Math.floor(6*e),l=1-s;r=6*e-o,(o&1)!==0&&(r=1-r);const c=i+r*(l-i);let f,y,_;switch(o){default:case 6:case 0:f=l,y=c,_=i;break;case 1:f=c,y=l,_=i;break;case 2:f=i,y=l,_=c;break;case 3:f=i,y=c,_=l;break;case 4:f=c,y=i,_=l;break;case 5:f=l,y=i,_=c;break}return[f*255,y*255,_*255]};li.cmyk.rgb=function(t){const e=t[0]/100,i=t[1]/100,s=t[2]/100,n=t[3]/100,r=1-Math.min(1,e*(1-n)+n),o=1-Math.min(1,i*(1-n)+n),l=1-Math.min(1,s*(1-n)+n);return[r*255,o*255,l*255]};li.xyz.rgb=function(t){const e=t[0]/100,i=t[1]/100,s=t[2]/100;let n,r,o;return n=e*3.2406+i*-1.5372+s*-.4986,r=e*-.9689+i*1.8758+s*.0415,o=e*.0557+i*-.204+s*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[n*255,r*255,o*255]};li.xyz.lab=function(t){let e=t[0],i=t[1],s=t[2];e/=95.047,i/=100,s/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const n=116*i-16,r=500*(e-i),o=200*(i-s);return[n,r,o]};li.lab.xyz=function(t){const e=t[0],i=t[1],s=t[2];let n,r,o;r=(e+16)/116,n=i/500+r,o=r-s/200;const l=r**3,c=n**3,f=o**3;return r=l>.008856?l:(r-16/116)/7.787,n=c>.008856?c:(n-16/116)/7.787,o=f>.008856?f:(o-16/116)/7.787,n*=95.047,r*=100,o*=108.883,[n,r,o]};li.lab.lch=function(t){const e=t[0],i=t[1],s=t[2];let n;n=Math.atan2(s,i)*360/2/Math.PI,n<0&&(n+=360);const o=Math.sqrt(i*i+s*s);return[e,o,n]};li.lch.lab=function(t){const e=t[0],i=t[1],n=t[2]/360*2*Math.PI,r=i*Math.cos(n),o=i*Math.sin(n);return[e,r,o]};li.rgb.ansi16=function(t,e=null){const[i,s,n]=t;let r=e===null?li.rgb.hsv(t)[2]:e;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(n/255)<<2|Math.round(s/255)<<1|Math.round(i/255));return r===2&&(o+=60),o};li.hsv.ansi16=function(t){return li.rgb.ansi16(li.hsv.rgb(t),t[2])};li.rgb.ansi256=function(t){const e=t[0],i=t[1],s=t[2];return e===i&&i===s?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(s/255*5)};li.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const i=(~~(t>50)+1)*.5,s=(e&1)*i*255,n=(e>>1&1)*i*255,r=(e>>2&1)*i*255;return[s,n,r]};li.ansi256.rgb=function(t){if(t>=232){const r=(t-232)*10+8;return[r,r,r]}t-=16;let e;const i=Math.floor(t/36)/5*255,s=Math.floor((e=t%36)/6)/5*255,n=e%6/5*255;return[i,s,n]};li.rgb.hex=function(t){const i=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(i.length)+i};li.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let i=e[0];e[0].length===3&&(i=i.split("").map(l=>l+l).join(""));const s=parseInt(i,16),n=s>>16&255,r=s>>8&255,o=s&255;return[n,r,o]};li.rgb.hcg=function(t){const e=t[0]/255,i=t[1]/255,s=t[2]/255,n=Math.max(Math.max(e,i),s),r=Math.min(Math.min(e,i),s),o=n-r;let l,c;return o<1?l=r/(1-o):l=0,o<=0?c=0:n===e?c=(i-s)/o%6:n===i?c=2+(s-e)/o:c=4+(e-i)/o,c/=6,c%=1,[c*360,o*100,l*100]};li.hsl.hcg=function(t){const e=t[1]/100,i=t[2]/100,s=i<.5?2*e*i:2*e*(1-i);let n=0;return s<1&&(n=(i-.5*s)/(1-s)),[t[0],s*100,n*100]};li.hsv.hcg=function(t){const e=t[1]/100,i=t[2]/100,s=e*i;let n=0;return s<1&&(n=(i-s)/(1-s)),[t[0],s*100,n*100]};li.hcg.rgb=function(t){const e=t[0]/360,i=t[1]/100,s=t[2]/100;if(i===0)return[s*255,s*255,s*255];const n=[0,0,0],r=e%1*6,o=r%1,l=1-o;let c=0;switch(Math.floor(r)){case 0:n[0]=1,n[1]=o,n[2]=0;break;case 1:n[0]=l,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=o;break;case 3:n[0]=0,n[1]=l,n[2]=1;break;case 4:n[0]=o,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=l}return c=(1-i)*s,[(i*n[0]+c)*255,(i*n[1]+c)*255,(i*n[2]+c)*255]};li.hcg.hsv=function(t){const e=t[1]/100,i=t[2]/100,s=e+i*(1-e);let n=0;return s>0&&(n=e/s),[t[0],n*100,s*100]};li.hcg.hsl=function(t){const e=t[1]/100,s=t[2]/100*(1-e)+.5*e;let n=0;return s>0&&s<.5?n=e/(2*s):s>=.5&&s<1&&(n=e/(2*(1-s))),[t[0],n*100,s*100]};li.hcg.hwb=function(t){const e=t[1]/100,i=t[2]/100,s=e+i*(1-e);return[t[0],(s-e)*100,(1-s)*100]};li.hwb.hcg=function(t){const e=t[1]/100,s=1-t[2]/100,n=s-e;let r=0;return n<1&&(r=(s-n)/(1-n)),[t[0],n*100,r*100]};li.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};li.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};li.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};li.gray.hsl=function(t){return[0,0,t[0]]};li.gray.hsv=li.gray.hsl;li.gray.hwb=function(t){return[0,100,t[0]]};li.gray.cmyk=function(t){return[0,0,0,t[0]]};li.gray.lab=function(t){return[t[0],0,0]};li.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,s=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(s.length)+s};li.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const eI=Xne;function ewe(){const t={},e=Object.keys(eI);for(let i=e.length,s=0;s<i;s++)t[e[s]]={distance:-1,parent:null};return t}function twe(t){const e=ewe(),i=[t];for(e[t].distance=0;i.length;){const s=i.pop(),n=Object.keys(eI[s]);for(let r=n.length,o=0;o<r;o++){const l=n[o],c=e[l];c.distance===-1&&(c.distance=e[s].distance+1,c.parent=s,i.unshift(l))}}return e}function iwe(t,e){return function(i){return e(t(i))}}function swe(t,e){const i=[e[t].parent,t];let s=eI[e[t].parent][t],n=e[t].parent;for(;e[n].parent;)i.unshift(e[n].parent),s=iwe(eI[e[n].parent][n],s),n=e[n].parent;return s.conversion=i,s}var nwe=function(t){const e=twe(t),i={},s=Object.keys(e);for(let n=s.length,r=0;r<n;r++){const o=s[r];e[o].parent!==null&&(i[o]=swe(o,e))}return i};const l$=Xne,rwe=nwe,j_={},owe=Object.keys(l$);function awe(t){const e=function(...i){const s=i[0];return s==null?s:(s.length>1&&(i=s),t(i))};return"conversion"in t&&(e.conversion=t.conversion),e}function lwe(t){const e=function(...i){const s=i[0];if(s==null)return s;s.length>1&&(i=s);const n=t(i);if(typeof n=="object")for(let r=n.length,o=0;o<r;o++)n[o]=Math.round(n[o]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}owe.forEach(t=>{j_[t]={},Object.defineProperty(j_[t],"channels",{value:l$[t].channels}),Object.defineProperty(j_[t],"labels",{value:l$[t].labels});const e=rwe(t);Object.keys(e).forEach(s=>{const n=e[s];j_[t][s]=lwe(n),j_[t][s].raw=awe(n)})});var uwe=j_;const B_=Gne.exports,Su=uwe,Wne=["keyword","gray","hex"],u$={};for(const t of Object.keys(Su))u$[[...Su[t].labels].sort().join("")]=t;const tI={};function Fo(t,e){if(!(this instanceof Fo))return new Fo(t,e);if(e&&e in Wne&&(e=null),e&&!(e in Su))throw new Error("Unknown model: "+e);let i,s;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Fo)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const n=B_.get(t);if(n===null)throw new Error("Unable to parse color from string: "+t);this.model=n.model,s=Su[this.model].channels,this.color=n.value.slice(0,s),this.valpha=typeof n.value[s]=="number"?n.value[s]:1}else if(t.length>0){this.model=e||"rgb",s=Su[this.model].channels;const n=Array.prototype.slice.call(t,0,s);this.color=c$(n,s),this.valpha=typeof t[s]=="number"?t[s]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const n=Object.keys(t);"alpha"in t&&(n.splice(n.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const r=n.sort().join("");if(!(r in u$))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=u$[r];const{labels:o}=Su[this.model],l=[];for(i=0;i<o.length;i++)l.push(t[o[i]]);this.color=c$(l)}if(tI[this.model])for(s=Su[this.model].channels,i=0;i<s;i++){const n=tI[this.model][i];n&&(this.color[i]=n(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Fo.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in B_.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const i=e.valpha===1?e.color:[...e.color,this.valpha];return B_.to[e.model](i)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),i=e.valpha===1?e.color:[...e.color,this.valpha];return B_.to.rgb.percent(i)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=Su[this.model],{labels:i}=Su[this.model];for(let s=0;s<e;s++)t[i[s]]=this.color[s];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Fo([...this.color.map(hwe(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new Fo([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Pr("rgb",0,co(255)),green:Pr("rgb",1,co(255)),blue:Pr("rgb",2,co(255)),hue:Pr(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Pr("hsl",1,co(100)),lightness:Pr("hsl",2,co(100)),saturationv:Pr("hsv",1,co(100)),value:Pr("hsv",2,co(100)),chroma:Pr("hcg",1,co(100)),gray:Pr("hcg",2,co(100)),white:Pr("hwb",1,co(100)),wblack:Pr("hwb",2,co(100)),cyan:Pr("cmyk",0,co(100)),magenta:Pr("cmyk",1,co(100)),yellow:Pr("cmyk",2,co(100)),black:Pr("cmyk",3,co(100)),x:Pr("xyz",0,co(95.047)),y:Pr("xyz",1,co(100)),z:Pr("xyz",2,co(108.833)),l:Pr("lab",0,co(100)),a:Pr("lab",1),b:Pr("lab",2),keyword(t){return t!==void 0?new Fo(t):Su[this.model].keyword(this.color)},hex(t){return t!==void 0?new Fo(t):B_.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new Fo(t);const e=this.rgb().round().color;let i=Math.round(this.valpha*255).toString(16).toUpperCase();return i.length===1&&(i="0"+i),B_.to.hex(e)+i},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[i,s]of t.entries()){const n=s/255;e[i]=n<=.04045?n/12.92:((n+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Fo.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let i=e.color[0];return i=(i+t)%360,i=i<0?360+i:i,e.color[0]=i,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const i=t.rgb(),s=this.rgb(),n=e===void 0?.5:e,r=2*n-1,o=i.alpha()-s.alpha(),l=((r*o===-1?r:(r+o)/(1+r*o))+1)/2,c=1-l;return Fo.rgb(l*i.red()+c*s.red(),l*i.green()+c*s.green(),l*i.blue()+c*s.blue(),i.alpha()*n+s.alpha()*(1-n))}};for(const t of Object.keys(Su)){if(Wne.includes(t))continue;const{channels:e}=Su[t];Fo.prototype[t]=function(...i){return this.model===t?new Fo(this):i.length>0?new Fo(i,t):new Fo([...dwe(Su[this.model][t].raw(this.color)),this.valpha],t)},Fo[t]=function(...i){let s=i[0];return typeof s=="number"&&(s=c$(i,e)),new Fo(s,t)}}function cwe(t,e){return Number(t.toFixed(e))}function hwe(t){return function(e){return cwe(e,t)}}function Pr(t,e,i){t=Array.isArray(t)?t:[t];for(const s of t)(tI[s]||(tI[s]=[]))[e]=i;return t=t[0],function(s){let n;return s!==void 0?(i&&(s=i(s)),n=this[t](),n.color[e]=s,n):(n=this[t]().color[e],i&&(n=i(n)),n)}}function co(t){return function(e){return Math.max(0,Math.min(t,e))}}function dwe(t){return Array.isArray(t)?t:[t]}function c$(t,e){for(let i=0;i<e;i++)typeof t[i]!="number"&&(t[i]=0);return t}var fwe=Fo;const pwe=fwe,elt={channel:"channel",channels:"channels",colorField:"color-field",colorFieldScope:"scope--color-field",colorMode:"color-mode",colorModeContainer:"color-mode-container",container:"container",control:"control",controlAndScope:"control-and-scope",controlSection:"control-section",deleteColor:"delete-color",header:"header",hexAndChannelsGroup:"hex-and-channels-group",hexOptions:"color-hex-options",hueScope:"scope--hue",hueSlider:"hue-slider",opacityScope:"scope--opacity",opacitySlider:"opacity-slider",preview:"preview",previewAndSliders:"preview-and-sliders",saveColor:"save-color",savedColor:"saved-color",savedColors:"saved-colors",savedColorsButtons:"saved-colors-buttons",savedColorsSection:"saved-colors-section",scope:"scope",section:"section",slider:"slider",sliders:"sliders",splitSection:"section--split"},tlt=pwe("#007AC2"),ilt="calcite-color-",slt={r:255,g:255,b:255},mwe={h:360,s:100,v:100},nlt=mwe.h-1,rlt={min:0,max:100},gwe={s:{slider:{height:12,width:104},colorField:{height:80,width:160},thumb:{radius:7},preview:{size:20}},m:{slider:{height:12,width:204},colorField:{height:150,width:272},thumb:{radius:7},preview:{size:24}},l:{slider:{height:12,width:384},colorField:{height:200,width:464},thumb:{radius:7},preview:{size:32}}},olt=1,alt=/^[0-9A-F]$/i,ywe=/^#[0-9A-F]{3}$/i,vwe=/^#[0-9A-F]{6}$/i,_we=/^#[0-9A-F]{4}$/i,bwe=/^#[0-9A-F]{8}$/i,llt=t=>Number((t*100).toFixed()),ult=t=>Number((t/100).toFixed(2));function iI(t,e=!1){return h$(t,e)||xwe(t,e)}function Zne(t,e,i){return t?t.length===e&&i.test(t):!1}function h$(t,e=!1){return Zne(t,e?5:4,e?_we:ywe)}function xwe(t,e=!1){return Zne(t,e?9:7,e?bwe:vwe)}function clt(t,e=!1,i=!1){if(t=t.toLowerCase(),t.startsWith("#")||(t=`#${t}`),h$(t,e))return bY(d$(t,e));if(e&&i&&iI(t,!1)){const s=h$(t,!1);return bY(d$(`${t}${s?"f":"ff"}`,!0))}return t}function hlt(t,e=!1){return e?t.hexa():t.hex()}function bY(t){const{r:e,g:i,b:s}=t,n=MP(e),r=MP(i),o=MP(s),l="a"in t?MP(t.a*255):"";return`#${n}${r}${o}${l}`.toLowerCase()}function MP(t){return t.toString(16).padStart(2,"0")}function dlt(t){const e={...t,a:t.alpha??1};return delete e.alpha,e}function flt(t){const e={...t,alpha:t.a??1};return delete e.a,e}function d$(t,e=!1){if(!iI(t,e))return null;t=t.replace("#","");let i,s,n,r;if(t.length===3||t.length===4){const[l,c,f,y]=t.split("");i=parseInt(`${l}${l}`,16),s=parseInt(`${c}${c}`,16),n=parseInt(`${f}${f}`,16),r=parseInt(`${y}${y}`,16)/255}else i=parseInt(t.slice(0,2),16),s=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16),r=parseInt(t.slice(6,8),16)/255;return isNaN(r)?{r:i,g:s,b:n}:{r:i,g:s,b:n,a:r}}const Kne=t=>t,zr=Kne({HEX:"hex",HEXA:"hexa",RGB_CSS:"rgb-css",RGBA_CSS:"rgba-css",HSL_CSS:"hsl-css",HSLA_CSS:"hsla-css"}),qr=Kne({RGB:"rgb",RGBA:"rgba",HSL:"hsl",HSLA:"hsla",HSV:"hsv",HSVA:"hsva"});function plt(t){if(typeof t=="string"){if(t.startsWith("#")){const{length:e}=t;if(e===4||e===7)return zr.HEX;if(e===5||e===9)return zr.HEXA}if(t.startsWith("rgba("))return zr.RGBA_CSS;if(t.startsWith("rgb("))return zr.RGB_CSS;if(t.startsWith("hsl("))return zr.HSL_CSS;if(t.startsWith("hsla("))return zr.HSLA_CSS}if(typeof t=="object"){if(w_(t,"r","g","b"))return w_(t,"a")?qr.RGBA:qr.RGB;if(w_(t,"h","s","l"))return w_(t,"a")?qr.HSLA:qr.HSL;if(w_(t,"h","s","v"))return w_(t,"a")?qr.HSVA:qr.HSV}return null}function w_(t,...e){return e.every(i=>i&&t&&`${i}`in t)}function mlt(t,e){return(t==null?void 0:t.rgb().array().toString())===(e==null?void 0:e.rgb().array().toString())}function glt(t){return t===zr.HEXA||t===zr.RGBA_CSS||t===zr.HSLA_CSS||t===qr.RGBA||t===qr.HSLA||t===qr.HSVA}function ylt(t){return t===zr.HEX?zr.HEXA:t===zr.RGB_CSS?zr.RGBA_CSS:t===zr.HSL_CSS?zr.HSLA_CSS:t===qr.RGB?qr.RGBA:t===qr.HSL?qr.HSLA:t===qr.HSV?qr.HSVA:t}function vlt(t){return t===zr.HEXA?zr.HEX:t===zr.RGBA_CSS?zr.RGB_CSS:t===zr.HSLA_CSS?zr.HSL_CSS:t===qr.RGBA?qr.RGB:t===qr.HSLA?qr.HSL:t===qr.HSVA?qr.HSV:t}function _lt(t,e){const{slider:{width:i},preview:s}=t;if(e)return i;const n=gwe.l.preview.size-s.size;return i+n}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const AP={thumbnail:"thumbnail",background:"background",initials:"initials",icon:"icon"};function wwe(t){t=Swe(t);let e=0;for(let s=0;s<t.length;s++)e=t.charCodeAt(s)+((e<<5)-e);let i="#";for(let s=0;s<3;s++){const n=e>>s*8&255;i+=("00"+n.toString(16)).substr(-2)}return i}function Swe(t){const e=Math.floor(t.length/2),i=t.split("").reverse().join("");return i.substring(e)+i.slice(0,e)}function Ewe(t){let{r:e,g:i,b:s}=t;e/=255,i/=255,s/=255;const n=Math.max(e,i,s),r=Math.min(e,i,s),o=n-r;if(n===r)return 0;let l=(n+r)/2;switch(n){case e:l=(i-s)/o+(i<s?6:0);break;case i:l=(s-e)/o+2;break;case s:l=(e-i)/o+4;break}return Math.round(l*60)}function Cwe(t){return Ewe(d$(t))}const Pwe=":host{display:inline-block;overflow:hidden;border-radius:var(--calcite-avatar-corner-radius, 50%);color:var(--calcite-avatar-color, var(--calcite-color-text-2))}:host([scale=s]){block-size:1.5rem;inline-size:1.5rem;font-size:var(--calcite-font-size--3)}:host([scale=m]){block-size:2rem;inline-size:2rem;font-size:var(--calcite-font-size--2)}:host([scale=l]){block-size:2.75rem;inline-size:2.75rem;font-size:var(--calcite-font-size-0)}.icon{display:flex}.background{display:flex;block-size:100%;inline-size:100%;align-items:center;justify-content:center;border-radius:var(--calcite-avatar-corner-radius, 50%)}.initials{font-weight:var(--calcite-font-weight-bold);text-transform:uppercase}.thumbnail{block-size:100%;inline-size:100%;border-radius:var(--calcite-avatar-corner-radius, 50%)}:host([hidden]){display:none}[hidden]{display:none}",Twe=Pwe,Iwe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.scale="m",this.thumbnail=void 0,this.fullName=void 0,this.username=void 0,this.userId=void 0,this.label=void 0,this.thumbnailFailedToLoad=!1}render(){return this.determineContent()}determineContent(){if(this.thumbnail&&!this.thumbnailFailedToLoad)return ke("img",{alt:this.label||"",class:AP.thumbnail,onError:()=>this.thumbnailFailedToLoad=!0,src:this.thumbnail});const e=this.generateInitials(),i=this.generateFillColor();return ke("span",{"aria-label":this.label||this.fullName,class:AP.background,role:"figure",style:{backgroundColor:i}},e?ke("span",{"aria-hidden":"true",class:AP.initials},e):ke("calcite-icon",{class:AP.icon,icon:"user",scale:this.scale}))}generateFillColor(){const{userId:e,username:i,fullName:s,el:n}=this,r=Gbe(n),o=e&&`#${e.substr(e.length-6)}`,l=i||s||"",c=o&&iI(o)?o:wwe(l);return!e&&!l||!iI(c)?"var(--calcite-avatar-background-color, var(--calcite-color-foreground-2))":`var(--calcite-avatar-background-color, hsl(${Cwe(c)}, 60%, ${r==="dark"?20:90}%))`}generateInitials(){const{fullName:e,username:i}=this;return e?e.trim().split(" ").map(s=>s.substring(0,1)).join(""):i?i.substring(0,2):!1}get el(){return this}static get style(){return Twe}},[1,"calcite-avatar",{scale:[513],thumbnail:[513],fullName:[513,"full-name"],username:[513],userId:[513,"user-id"],label:[1],thumbnailFailedToLoad:[32]}]);function Jne(){if(typeof customElements>"u")return;["calcite-avatar","calcite-icon"].forEach(e=>{switch(e){case"calcite-avatar":customElements.get(e)||customElements.define(e,Iwe);break;case"calcite-icon":customElements.get(e)||Qo();break}})}Jne();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const S_={textContainer:"text-container",fullName:"full-name",username:"username",button:"button"},Mwe=`:host{display:inline-flex;outline:2px solid transparent;outline-offset:2px}:host .button{background-color:transparent;border:none;margin:0px;display:flex;cursor:pointer;align-items:center;justify-content:center;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size-0);line-height:1.25rem;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-block-end:2px solid transparent}:host(:hover) .button,:host(:focus) .button{background-color:var(--calcite-color-foreground-2)}:host(:focus) .button{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:active) .button{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}:host([active]) .button{border-color:var(--calcite-color-brand);color:var(--calcite-color-text-1);--calcite-icon-color:var(--calcite-color-brand)}.text-container{margin-block-start:0.125rem;display:flex;flex-direction:column;padding-inline:1rem;text-align:start}calcite-avatar{padding-inline:1rem}calcite-avatar~.text-container{padding-inline-start:0px}.full-name{margin-inline-start:0px;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.username{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host([hidden]){display:none}[hidden]{display:none}`,Awe=Mwe,Dwe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.active=void 0,this.fullName=void 0,this.label=void 0,this.textDisabled=!1,this.thumbnail=void 0,this.userId=void 0,this.username=void 0}async setFocus(){await Po(this),this.el.focus()}componentWillLoad(){Eo(this)}componentDidLoad(){Co(this)}render(){return ke(Nr,{key:"d848f4b0ee430fdbf74ce63be874afc055b1a48a"},ke("button",{key:"d8187d1795407a9d12e4f2c6c3d75dba47cdf028","aria-label":this.label,class:S_.button},ke("calcite-avatar",{key:"3a8526feb870ed33d7eae888c71f9489d90df26f","full-name":this.fullName,label:this.label,thumbnail:this.thumbnail,"user-id":this.userId,username:this.username}),(this.fullName||this.username)&&!this.textDisabled&&ke("div",{key:"111bc54b8e187a95849ed325aca22880c00d1191",class:S_.textContainer},this.fullName&&ke("span",{class:S_.fullName,key:S_.fullName},this.fullName),this.username&&ke("span",{class:S_.username,key:S_.username},this.username))))}static get delegatesFocus(){return!0}get el(){return this}static get style(){return Awe}},[17,"calcite-navigation-user",{active:[516],fullName:[1,"full-name"],label:[1],textDisabled:[516,"text-disabled"],thumbnail:[1],userId:[1,"user-id"],username:[1],setFocus:[64]}]);function kwe(){if(typeof customElements>"u")return;["calcite-navigation-user","calcite-avatar","calcite-icon"].forEach(e=>{switch(e){case"calcite-navigation-user":customElements.get(e)||customElements.define(e,Dwe);break;case"calcite-avatar":customElements.get(e)||Jne();break;case"calcite-icon":customElements.get(e)||Qo();break}})}kwe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Nwe=":host{display:flex}ul{margin:0px;display:inline-flex;block-size:100%;align-items:center;padding:0px}:host([layout=vertical]) ul{display:flex;inline-size:100%;flex-direction:column}:host([hidden]){display:none}[hidden]{display:none}",$we=Nwe,Owe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.menuItems=[],this.handleMenuSlotChange=e=>{this.menuItems=Mc(e),this.setMenuItemLayout(this.menuItems,this.layout)},this.label=void 0,this.layout="horizontal",this.messageOverrides=void 0,this.messages=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}handleGlobalAttributesChanged(){So(this),this.setMenuItemLayout(this.menuItems,this.layout)}handleLayoutChange(e){this.setMenuItemLayout(this.menuItems,e)}onMessagesChange(){}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}connectedCallback(){Cl(this),Gu(this)}async componentWillLoad(){Eo(this),await qu(this)}componentDidLoad(){Co(this)}disconnectedCallback(){Pl(this),ju(this)}async setFocus(){await Po(this),this.el.focus()}calciteInternalNavMenuItemKeyEvent(e){const i=e.target,s=e.detail.children,n=e.detail.event.key;e.stopPropagation(),n==="ArrowDown"?i.layout==="vertical"?B0(this.menuItems,i,"next",!1):e.detail.isSubmenuOpen&&s[0].setFocus():n==="ArrowUp"?this.layout==="vertical"?B0(this.menuItems,i,"previous",!1):e.detail.isSubmenuOpen&&s[s.length-1].setFocus():n==="ArrowRight"?this.layout==="horizontal"?B0(this.menuItems,i,"next",!1):e.detail.isSubmenuOpen&&s[0].setFocus():n==="ArrowLeft"?this.layout==="horizontal"?B0(this.menuItems,i,"previous",!1):e.detail.isSubmenuOpen&&this.focusParentElement(e.target):n==="Escape"&&this.focusParentElement(e.target),e.preventDefault()}focusParentElement(e){const i=e.parentElement;i&&(Yy(i),i.open=!1)}setMenuItemLayout(e,i){e.forEach(s=>{s.layout=i,this.getEffectiveRole()==="menubar"&&(s.isTopLevelItem=!0,s.topLevelMenuLayout=this.layout)})}getEffectiveRole(){return this.el.role||"menubar"}render(){return ke(Nr,{key:"75308ac4419f7116f73975ad9ff88d25817d0522"},ke("ul",{key:"ed22f7ab681c6e583b0b5aa720823898759687cb","aria-label":this.label,role:this.getEffectiveRole()},ke("slot",{key:"4296d48a1a8921802458776d02e119feeaf12b3e",onSlotchange:this.handleMenuSlotChange})))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{role:["handleGlobalAttributesChanged"],layout:["handleLayoutChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return $we}},[17,"calcite-menu",{label:[1],layout:[513],messageOverrides:[1040],messages:[1040],defaultMessages:[32],effectiveLocale:[32],setFocus:[64]},[[0,"calciteInternalMenuItemKeyEvent","calciteInternalNavMenuItemKeyEvent"]],{role:["handleGlobalAttributesChanged"],layout:["handleLayoutChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Qne(){if(typeof customElements>"u")return;["calcite-menu"].forEach(e=>{switch(e){case"calcite-menu":customElements.get(e)||customElements.define(e,Owe);break}})}Qne();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Rn={container:"container",content:"content",dropdownVertical:"dropdown--vertical",dropdownMenuItems:"dropdown-menu-items",dropdownAction:"dropdown-action",layoutVertical:"layout--vertical",hoverHrefIcon:"hover-href-icon",icon:"icon",iconBreadcrumb:"icon--breadcrumb",iconDropdown:"icon--dropdown",iconEnd:"icon--end",iconStart:"icon--start",isParentVertical:"parent--vertical",itemContent:"item-content",open:"open",nested:"nested",textContainer:"text-container"},Rwe=`:host{position:relative;box-sizing:border-box;display:flex;align-items:center;flex-shrink:0}:host .container,:host .item-content,:host .content{min-block-size:3rem}:host([layout=vertical]){inline-size:100%}:host(:not([layout=vertical])){block-size:100%}.container,.item-content{display:flex;block-size:100%;inline-size:100%;flex-direction:row;align-items:stretch}.content{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);padding-inline:1rem;font-size:var(--calcite-font-size-0);color:var(--calcite-color-text-2);outline:2px solid transparent;outline-offset:2px;text-decoration:none;border-block-end:0.125rem solid transparent;padding-block-start:0.125rem}.content:hover{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-2)}.content:focus{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-2);outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.content:active{background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1)}.content span{display:inline-flex}.content.layout--vertical{display:flex;inline-size:100%;justify-content:flex-start;padding-block:1rem;border-block-end:0;border-inline-end:0.25rem solid transparent}:host([active]) .content{color:var(--calcite-color-text-1);border-color:var(--calcite-color-brand)}:host([active]) .content .icon{--calcite-icon-color:var(--calcite-color-brand)}:host([layout=vertical]) .content{padding-inline:0.75rem}.icon--start{margin-inline-end:0.75rem}.icon--end{margin-inline-start:0.75rem}:host([layout=vertical]) .icon--end{margin-inline-start:auto;padding-inline-start:0.75rem}.icon--dropdown{position:relative;margin-inline-start:auto;margin-inline-end:0px;padding-inline-start:0.5rem;--calcite-icon-color:var(--calcite-color-text-3)}:host([layout=vertical]) .icon--end~.icon--dropdown{margin-inline-start:0.75rem}:host([layout=vertical]) .hover-href-icon{padding-inline-start:0.5rem}:host([layout=vertical]) .hover-href-icon~.icon--end{margin-inline-start:0.5rem}:host([layout=vertical]) .hover-href-icon~.icon--breadcrumb{margin-inline-start:0.75rem}.icon--breadcrumb{margin-inline-end:0px;padding-inline-start:0.5rem;--calcite-icon-color:var(--calcite-color-text-3)}:host([layout=vertical]) .icon--breadcrumb{margin-inline-start:auto}:host([layout=vertical]) .icon--breadcrumb~.icon--dropdown{margin-inline-start:0.5rem}:host([layout=vertical]) .icon--end~.icon--breadcrumb{margin-inline-start:0.5rem}:host([breadcrumb]) .content{padding-inline-end:0.75rem}calcite-action{position:relative;block-size:auto;border-inline-start:1px solid var(--calcite-color-foreground-1)}calcite-action::after{position:absolute;inset-inline-start:-1px;display:block;inline-size:1px;content:"";inset-block:0.75rem;background-color:var(--calcite-color-border-3)}calcite-action:hover::after{block-size:100%;inset-block:0}.content:focus~calcite-action,.content:hover~calcite-action{color:var(--calcite-color-text-1);border-inline-start:1px solid var(--calcite-color-border-3)}.container:hover .dropdown-action{background-color:var(--calcite-color-foreground-2)}.dropdown-menu-items{position:absolute;display:none;block-size:auto;min-inline-size:100%;flex-direction:column;overflow:visible;border:1px solid var(--calcite-color-border-3);background:var(--calcite-color-foreground-1);inset-block-start:100%;z-index:var(--calcite-z-index-dropdown)}.dropdown-menu-items.open{display:block}.dropdown-menu-items.nested{position:absolute;inset-block-start:-1px;transform:translateX(calc(100% - 2px))}.parent--vertical{flex-direction:column}.dropdown--vertical.dropdown-menu-items{position:relative;border-radius:0px;box-shadow:none;inset-block-start:0;transform:none}.dropdown--vertical.dropdown-menu-items:last-of-type{border-inline:0}:host([layout=vertical]:last-of-type) .dropdown-menu-items{border-block-end:0}:host([slot=submenu-item]) .parent--vertical{padding-inline-start:1.5rem}.dropdown-menu-items.nested.calcite--rtl{transform:translateX(calc(-100% + 2px))}.dropdown--vertical.dropdown-menu-items.nested.calcite--rtl{transform:none}.hover-href-icon{position:relative;inset-inline-end:0.25rem;margin-inline-start:auto;opacity:0;transition:all var(--calcite-internal-animation-timing-medium) ease-in-out}.content:focus .hover-href-icon,.content:hover .hover-href-icon{inset-inline-end:-0.25rem;opacity:1}:host([hidden]){display:none}[hidden]{display:none}`,Lwe=Rwe,Fwe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalMenuItemKeyEvent=Ot(this,"calciteInternalMenuItemKeyEvent",7),this.calciteMenuItemSelect=Ot(this,"calciteMenuItemSelect",7),this.clickHandler=e=>{(this.href&&e.target===this.dropdownActionEl||!this.href&&this.hasSubmenu)&&(this.open=!this.open),this.selectMenuItem(e)},this.handleMenuItemSlotChange=e=>{this.submenuItems=Mc(e),this.submenuItems.forEach(i=>{i.topLevelMenuLayout||(i.topLevelMenuLayout=this.topLevelMenuLayout)}),this.hasSubmenu=this.submenuItems.length>0},this.keyDownHandler=async e=>{const{hasSubmenu:i,href:s,layout:n,open:r,submenuItems:o}=this,l=e.key,c=e.target===this.dropdownActionEl;if(!e.defaultPrevented){if(l===" "||l==="Enter")i&&(!s||s&&c)&&(this.open=!r),!(s&&c)&&l!=="Enter"&&this.selectMenuItem(e),(l===" "||s&&c)&&e.preventDefault();else if(l==="Escape"){if(r){this.open=!1;return}this.calciteInternalMenuItemKeyEvent.emit({event:e}),e.preventDefault()}else if(l==="ArrowDown"||l==="ArrowUp"){if(e.preventDefault(),(c||!s)&&i&&!r&&n==="horizontal"){this.open=!0;return}this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:r&&i})}else if(l==="ArrowLeft")e.preventDefault(),this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:!0});else if(l==="ArrowRight"){if(e.preventDefault(),(c||!s)&&i&&!r&&n==="vertical"){this.open=!0;return}this.calciteInternalMenuItemKeyEvent.emit({event:e,children:o,isSubmenuOpen:r&&i})}}},this.active=void 0,this.breadcrumb=void 0,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.isTopLevelItem=!1,this.label=void 0,this.layout=void 0,this.messageOverrides=void 0,this.messages=void 0,this.open=!1,this.rel=void 0,this.target=void 0,this.text=void 0,this.topLevelMenuLayout=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasSubmenu=!1,this.submenuItems=void 0}onMessagesChange(){}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}async setFocus(){await Po(this),this.anchorEl.focus()}handleClickOut(e){this.topLevelMenuLayout!=="vertical"&&this.hasSubmenu&&this.open&&!e.composedPath().includes(this.el)&&(this.open=!1)}handleFocusOut(e){this.topLevelMenuLayout!=="vertical"&&!this.el.contains(e.relatedTarget)&&(this.open=!1)}connectedCallback(){Cl(this),Gu(this)}async componentWillLoad(){Eo(this),await qu(this)}componentDidLoad(){Co(this)}disconnectedCallback(){Pl(this),ju(this)}blurHandler(){this.isFocused=!1}focusHandler(e){const i=e.target;this.isFocused=!0,i.open&&!this.open&&(i.open=!1)}selectMenuItem(e){e.target!==this.dropdownActionEl&&this.calciteMenuItemSelect.emit()}renderIconStart(){return ke("calcite-icon",{class:`${Rn.icon} ${Rn.iconStart}`,flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,key:Rn.iconStart,scale:"s"})}renderIconEnd(){return ke("calcite-icon",{class:`${Rn.icon} ${Rn.iconEnd}`,flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,key:Rn.iconEnd,scale:"s"})}renderBreadcrumbIcon(e){return ke("calcite-icon",{class:`${Rn.icon} ${Rn.iconBreadcrumb}`,icon:e==="rtl"?"chevron-left":"chevron-right",key:Rn.iconBreadcrumb,scale:"s"})}renderDropdownIcon(e){const i=e==="rtl"?"chevron-left":"chevron-right";return ke("calcite-icon",{class:`${Rn.icon} ${Rn.iconDropdown}`,icon:this.topLevelMenuLayout==="vertical"||this.isTopLevelItem?this.open?"chevron-up":"chevron-down":i,key:Rn.iconDropdown,scale:"s"})}renderDropdownAction(e){const i=e==="rtl"?"chevron-left":"chevron-right";return ke("calcite-action",{class:Rn.dropdownAction,icon:this.topLevelMenuLayout==="vertical"||this.isTopLevelItem?this.open?"chevron-up":"chevron-down":i,key:Rn.dropdownAction,onClick:this.clickHandler,onKeyDown:this.keyDownHandler,ref:s=>this.dropdownActionEl=s,text:this.messages.open})}renderSubmenuItems(e){return ke("calcite-menu",{class:{[Rn.dropdownMenuItems]:!0,[Rn.open]:this.open,[Rn.nested]:!this.isTopLevelItem,[Yd.rtl]:e==="rtl",[Rn.dropdownVertical]:this.topLevelMenuLayout==="vertical"},label:this.messages.submenu,layout:"vertical",role:"menu"},ke("slot",{name:"submenu-item",onSlotchange:this.handleMenuItemSlotChange}))}renderHrefIcon(e){return ke("calcite-icon",{class:Rn.hoverHrefIcon,icon:e==="rtl"?"arrow-left":"arrow-right",key:Rn.hoverHrefIcon,scale:"s"})}renderItemContent(e){const i=this.href&&(this.topLevelMenuLayout==="vertical"||!this.isTopLevelItem);return ke(Z6,null,this.iconStart&&this.renderIconStart(),ke("div",{class:Rn.textContainer},ke("span",null,this.text)),i&&this.renderHrefIcon(e),this.iconEnd&&this.renderIconEnd(),this.breadcrumb?this.renderBreadcrumbIcon(e):null,!this.href&&this.hasSubmenu?this.renderDropdownIcon(e):null)}render(){const e=ng(this.el);return ke(Nr,{key:"e57c6579d3287593d663a8586cfd25c90246b1a4",onBlur:this.blurHandler,onFocus:this.focusHandler},ke("li",{key:"954549390e447ec43ccf681949095d1393d9068a",class:{[Rn.container]:!0,[Rn.isParentVertical]:this.topLevelMenuLayout==="vertical"},role:"none"},ke("div",{key:"6130156128f303bb225007e337fae78385614cf5",class:Rn.itemContent},ke("a",{key:"9103ba8f3683feb1eb2301f05412b434c39ec3d3","aria-current":this.isFocused?"page":!1,"aria-expanded":Wo(this.open),"aria-haspopup":Wo(this.hasSubmenu),"aria-label":this.label,class:{[Rn.layoutVertical]:this.layout==="vertical",[Rn.content]:!0},href:this.href,onClick:this.clickHandler,onKeyDown:this.keyDownHandler,ref:i=>this.anchorEl=i,rel:this.rel,role:"menuitem",tabIndex:this.isTopLevelItem?0:-1,target:this.target},this.renderItemContent(e)),this.href&&this.hasSubmenu?this.renderDropdownAction(e):null),this.renderSubmenuItems(e)))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Lwe}},[1,"calcite-menu-item",{active:[516],breadcrumb:[516],href:[1],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],isTopLevelItem:[4,"is-top-level-item"],label:[1],layout:[513],messageOverrides:[1040],messages:[1040],open:[1540],rel:[513],target:[513],text:[1],topLevelMenuLayout:[1,"top-level-menu-layout"],defaultMessages:[32],effectiveLocale:[32],hasSubmenu:[32],submenuItems:[32],setFocus:[64]},[[8,"click","handleClickOut"],[0,"focusout","handleFocusOut"]],{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function zwe(){if(typeof customElements>"u")return;["calcite-menu-item","calcite-action","calcite-icon","calcite-loader","calcite-menu"].forEach(e=>{switch(e){case"calcite-menu-item":customElements.get(e)||customElements.define(e,Fwe);break;case"calcite-action":customElements.get(e)||sm();break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break;case"calcite-menu":customElements.get(e)||Qne();break}})}zwe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 *//*!
* focus-trap 7.6.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function qwe(t,e,i){return(e=Gwe(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xY(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,s)}return i}function wY(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?xY(Object(i),!0).forEach(function(s){qwe(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xY(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}function Vwe(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gwe(t){var e=Vwe(t,"string");return typeof e=="symbol"?e:e+""}var SY={activateTrap:function(e,i){if(e.length>0){var s=e[e.length-1];s!==i&&s.pause()}var n=e.indexOf(i);n===-1||e.splice(n,1),e.push(i)},deactivateTrap:function(e,i){var s=e.indexOf(i);s!==-1&&e.splice(s,1),e.length>0&&e[e.length-1].unpause()}},jwe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Bwe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},fS=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Hwe=function(e){return fS(e)&&!e.shiftKey},Uwe=function(e){return fS(e)&&e.shiftKey},EY=function(e){return setTimeout(e,0)},CY=function(e,i){var s=-1;return e.every(function(n,r){return i(n)?(s=r,!1):!0}),s},Iw=function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,s):e},DP=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Ywe=[],Xwe=function(e,i){var s=(i==null?void 0:i.document)||document,n=(i==null?void 0:i.trapStack)||Ywe,r=wY({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Hwe,isKeyBackward:Uwe},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,c=function(ce,ne,de){return ce&&ce[ne]!==void 0?ce[ne]:r[de||ne]},f=function(ce,ne){var de=typeof(ne==null?void 0:ne.composedPath)=="function"?ne.composedPath():void 0;return o.containerGroups.findIndex(function(Se){var Pe=Se.container,Re=Se.tabbableNodes;return Pe.contains(ce)||(de==null?void 0:de.includes(Pe))||Re.find(function(Oe){return Oe===ce})})},y=function(ce){var ne=r[ce];if(typeof ne=="function"){for(var de=arguments.length,Se=new Array(de>1?de-1:0),Pe=1;Pe<de;Pe++)Se[Pe-1]=arguments[Pe];ne=ne.apply(void 0,Se)}if(ne===!0&&(ne=void 0),!ne){if(ne===void 0||ne===!1)return ne;throw new Error("`".concat(ce,"` was specified but was not a node, or did not return a node"))}var Re=ne;if(typeof ne=="string"&&(Re=s.querySelector(ne),!Re))throw new Error("`".concat(ce,"` as selector refers to no known node"));return Re},_=function(){var ce=y("initialFocus");if(ce===!1)return!1;if(ce===void 0||!C8(ce,r.tabbableOptions))if(f(s.activeElement)>=0)ce=s.activeElement;else{var ne=o.tabbableGroups[0],de=ne&&ne.firstTabbableNode;ce=de||y("fallbackFocus")}if(!ce)throw new Error("Your focus-trap needs to have at least one focusable element");return ce},x=function(){if(o.containerGroups=o.containers.map(function(ce){var ne=fne(ce,r.tabbableOptions),de=qbe(ce,r.tabbableOptions),Se=ne.length>0?ne[0]:void 0,Pe=ne.length>0?ne[ne.length-1]:void 0,Re=de.find(function(Fe){return x_(Fe)}),Oe=de.slice().reverse().find(function(Fe){return x_(Fe)}),we=!!ne.find(function(Fe){return py(Fe)>0});return{container:ce,tabbableNodes:ne,focusableNodes:de,posTabIndexesFound:we,firstTabbableNode:Se,lastTabbableNode:Pe,firstDomTabbableNode:Re,lastDomTabbableNode:Oe,nextTabbableNode:function(it){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ot=ne.indexOf(it);return ot<0?vt?de.slice(de.indexOf(it)+1).find(function(ct){return x_(ct)}):de.slice(0,de.indexOf(it)).reverse().find(function(ct){return x_(ct)}):ne[ot+(vt?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(ce){return ce.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!y("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(ce){return ce.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},S=function(ce){var ne=ce.activeElement;if(ne)return ne.shadowRoot&&ne.shadowRoot.activeElement!==null?S(ne.shadowRoot):ne},P=function(ce){if(ce!==!1&&ce!==S(document)){if(!ce||!ce.focus){P(_());return}ce.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=ce,jwe(ce)&&ce.select()}},A=function(ce){var ne=y("setReturnFocus",ce);return ne||(ne===!1?!1:ce)},k=function(ce){var ne=ce.target,de=ce.event,Se=ce.isBackward,Pe=Se===void 0?!1:Se;ne=ne||DP(de),x();var Re=null;if(o.tabbableGroups.length>0){var Oe=f(ne,de),we=Oe>=0?o.containerGroups[Oe]:void 0;if(Oe<0)Pe?Re=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:Re=o.tabbableGroups[0].firstTabbableNode;else if(Pe){var Fe=CY(o.tabbableGroups,function(qt){var Lt=qt.firstTabbableNode;return ne===Lt});if(Fe<0&&(we.container===ne||C8(ne,r.tabbableOptions)&&!x_(ne,r.tabbableOptions)&&!we.nextTabbableNode(ne,!1))&&(Fe=Oe),Fe>=0){var it=Fe===0?o.tabbableGroups.length-1:Fe-1,vt=o.tabbableGroups[it];Re=py(ne)>=0?vt.lastTabbableNode:vt.lastDomTabbableNode}else fS(de)||(Re=we.nextTabbableNode(ne,!1))}else{var ot=CY(o.tabbableGroups,function(qt){var Lt=qt.lastTabbableNode;return ne===Lt});if(ot<0&&(we.container===ne||C8(ne,r.tabbableOptions)&&!x_(ne,r.tabbableOptions)&&!we.nextTabbableNode(ne))&&(ot=Oe),ot>=0){var ct=ot===o.tabbableGroups.length-1?0:ot+1,Ct=o.tabbableGroups[ct];Re=py(ne)>=0?Ct.firstTabbableNode:Ct.firstDomTabbableNode}else fS(de)||(Re=we.nextTabbableNode(ne))}}else Re=y("fallbackFocus");return Re},$=function(ce){var ne=DP(ce);if(!(f(ne,ce)>=0)){if(Iw(r.clickOutsideDeactivates,ce)){l.deactivate({returnFocus:r.returnFocusOnDeactivate});return}Iw(r.allowOutsideClick,ce)||ce.preventDefault()}},F=function(ce){var ne=DP(ce),de=f(ne,ce)>=0;if(de||ne instanceof Document)de&&(o.mostRecentlyFocusedNode=ne);else{ce.stopImmediatePropagation();var Se,Pe=!0;if(o.mostRecentlyFocusedNode)if(py(o.mostRecentlyFocusedNode)>0){var Re=f(o.mostRecentlyFocusedNode),Oe=o.containerGroups[Re].tabbableNodes;if(Oe.length>0){var we=Oe.findIndex(function(Fe){return Fe===o.mostRecentlyFocusedNode});we>=0&&(r.isKeyForward(o.recentNavEvent)?we+1<Oe.length&&(Se=Oe[we+1],Pe=!1):we-1>=0&&(Se=Oe[we-1],Pe=!1))}}else o.containerGroups.some(function(Fe){return Fe.tabbableNodes.some(function(it){return py(it)>0})})||(Pe=!1);else Pe=!1;Pe&&(Se=k({target:o.mostRecentlyFocusedNode,isBackward:r.isKeyBackward(o.recentNavEvent)})),P(Se||o.mostRecentlyFocusedNode||_())}o.recentNavEvent=void 0},G=function(ce){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=ce;var de=k({event:ce,isBackward:ne});de&&(fS(ce)&&ce.preventDefault(),P(de))},V=function(ce){(r.isKeyForward(ce)||r.isKeyBackward(ce))&&G(ce,r.isKeyBackward(ce))},B=function(ce){Bwe(ce)&&Iw(r.escapeDeactivates,ce)!==!1&&(ce.preventDefault(),l.deactivate())},W=function(ce){var ne=DP(ce);f(ne,ce)>=0||Iw(r.clickOutsideDeactivates,ce)||Iw(r.allowOutsideClick,ce)||(ce.preventDefault(),ce.stopImmediatePropagation())},J=function(){if(o.active)return SY.activateTrap(n,l),o.delayInitialFocusTimer=r.delayInitialFocus?EY(function(){P(_())}):P(_()),s.addEventListener("focusin",F,!0),s.addEventListener("mousedown",$,{capture:!0,passive:!1}),s.addEventListener("touchstart",$,{capture:!0,passive:!1}),s.addEventListener("click",W,{capture:!0,passive:!1}),s.addEventListener("keydown",V,{capture:!0,passive:!1}),s.addEventListener("keydown",B),l},re=function(){if(o.active)return s.removeEventListener("focusin",F,!0),s.removeEventListener("mousedown",$,!0),s.removeEventListener("touchstart",$,!0),s.removeEventListener("click",W,!0),s.removeEventListener("keydown",V,!0),s.removeEventListener("keydown",B),l},se=function(ce){var ne=ce.some(function(de){var Se=Array.from(de.removedNodes);return Se.some(function(Pe){return Pe===o.mostRecentlyFocusedNode})});ne&&P(_())},oe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(se):void 0,pe=function(){oe&&(oe.disconnect(),o.active&&!o.paused&&o.containers.map(function(ce){oe.observe(ce,{subtree:!0,childList:!0})}))};return l={get active(){return o.active},get paused(){return o.paused},activate:function(ce){if(o.active)return this;var ne=c(ce,"onActivate"),de=c(ce,"onPostActivate"),Se=c(ce,"checkCanFocusTrap");Se||x(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=s.activeElement,ne==null||ne();var Pe=function(){Se&&x(),J(),pe(),de==null||de()};return Se?(Se(o.containers.concat()).then(Pe,Pe),this):(Pe(),this)},deactivate:function(ce){if(!o.active)return this;var ne=wY({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},ce);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,re(),o.active=!1,o.paused=!1,pe(),SY.deactivateTrap(n,l);var de=c(ne,"onDeactivate"),Se=c(ne,"onPostDeactivate"),Pe=c(ne,"checkCanReturnFocus"),Re=c(ne,"returnFocus","returnFocusOnDeactivate");de==null||de();var Oe=function(){EY(function(){Re&&P(A(o.nodeFocusedBeforeActivation)),Se==null||Se()})};return Re&&Pe?(Pe(A(o.nodeFocusedBeforeActivation)).then(Oe,Oe),this):(Oe(),this)},pause:function(ce){if(o.paused||!o.active)return this;var ne=c(ce,"onPause"),de=c(ce,"onPostPause");return o.paused=!0,ne==null||ne(),re(),pe(),de==null||de(),this},unpause:function(ce){if(!o.paused||!o.active)return this;var ne=c(ce,"onUnpause"),de=c(ce,"onPostUnpause");return o.paused=!1,ne==null||ne(),x(),J(),pe(),de==null||de(),this},updateContainerElements:function(ce){var ne=[].concat(ce).filter(Boolean);return o.containers=ne.map(function(de){return typeof de=="string"?s.querySelector(de):de}),o.active&&x(),pe(),this}},l.updateContainerElements(e),l};function ere(t,e){const{el:i}=t,s=(e==null?void 0:e.focusTrapEl)||i;if(!s)return;const n={clickOutsideDeactivates:!0,escapeDeactivates:!1,fallbackFocus:s,setReturnFocus:r=>(Yy(r),!1),...e==null?void 0:e.focusTrapOptions,document:i.ownerDocument,tabbableOptions:pne,trapStack:gbe};t.focusTrap=Xwe(s,n)}function f$(t,e){var i;t.focusTrapDisabled||(i=t.focusTrap)==null||i.activate(e)}function pS(t,e){var i;(i=t.focusTrap)==null||i.deactivate(e)}function tre(t){var e;(e=t.focusTrap)==null||e.updateContainerElements(t.el)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Wwe=A_e;function PY(t){return"opened"in t?t.opened:t.open}function of(t){Wwe(()=>{t.transitionEl&&o2e(t.transitionEl,t.openTransitionProp,()=>{PY(t)?t.onBeforeOpen():t.onBeforeClose()},()=>{PY(t)?t.onOpen():t.onClose()})})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function TY(t,e){return(t+e)%e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var Zwe=typeof global=="object"&&global&&global.Object===Object&&global;const Kwe=Zwe;var Jwe=typeof self=="object"&&self&&self.Object===Object&&self,Qwe=Kwe||Jwe||Function("return this")();const ire=Qwe;var e3e=ire.Symbol;const sI=e3e;var sre=Object.prototype,t3e=sre.hasOwnProperty,i3e=sre.toString,Mw=sI?sI.toStringTag:void 0;function s3e(t){var e=t3e.call(t,Mw),i=t[Mw];try{t[Mw]=void 0;var s=!0}catch{}var n=i3e.call(t);return s&&(e?t[Mw]=i:delete t[Mw]),n}var n3e=Object.prototype,r3e=n3e.toString;function o3e(t){return r3e.call(t)}var a3e="[object Null]",l3e="[object Undefined]",IY=sI?sI.toStringTag:void 0;function u3e(t){return t==null?t===void 0?l3e:a3e:IY&&IY in Object(t)?s3e(t):o3e(t)}function c3e(t){return t!=null&&typeof t=="object"}var h3e="[object Symbol]";function d3e(t){return typeof t=="symbol"||c3e(t)&&u3e(t)==h3e}var f3e=/\s/;function p3e(t){for(var e=t.length;e--&&f3e.test(t.charAt(e)););return e}var m3e=/^\s+/;function g3e(t){return t&&t.slice(0,p3e(t)+1).replace(m3e,"")}function p$(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var MY=NaN,y3e=/^[-+]0x[0-9a-f]+$/i,v3e=/^0b[01]+$/i,_3e=/^0o[0-7]+$/i,b3e=parseInt;function AY(t){if(typeof t=="number")return t;if(d3e(t))return MY;if(p$(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=p$(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=g3e(t);var i=v3e.test(t);return i||_3e.test(t)?b3e(t.slice(2),i?2:8):y3e.test(t)?MY:+t}var x3e=function(){return ire.Date.now()};const M8=x3e;var w3e="Expected a function",S3e=Math.max,E3e=Math.min;function C3e(t,e,i){var s,n,r,o,l,c,f=0,y=!1,_=!1,x=!0;if(typeof t!="function")throw new TypeError(w3e);e=AY(e)||0,p$(i)&&(y=!!i.leading,_="maxWait"in i,r=_?S3e(AY(i.maxWait)||0,e):r,x="trailing"in i?!!i.trailing:x);function S(W){var J=s,re=n;return s=n=void 0,f=W,o=t.apply(re,J),o}function P(W){return f=W,l=setTimeout($,e),y?S(W):o}function A(W){var J=W-c,re=W-f,se=e-J;return _?E3e(se,r-re):se}function k(W){var J=W-c,re=W-f;return c===void 0||J>=e||J<0||_&&re>=r}function $(){var W=M8();if(k(W))return F(W);l=setTimeout($,A(W))}function F(W){return l=void 0,x&&s?S(W):(s=n=void 0,o)}function G(){l!==void 0&&clearTimeout(l),f=0,s=c=n=l=void 0}function V(){return l===void 0?o:F(M8())}function B(){var W=M8(),J=k(W);if(s=arguments,n=this,c=W,J){if(l===void 0)return P(c);if(_)return clearTimeout(l),l=setTimeout($,e),S(c)}return l===void 0&&(l=setTimeout($,e)),o}return B.cancel=G,B.flush=V,B}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const nre=["top","right","bottom","left"],DY=["start","end"],kY=nre.reduce((t,e)=>t.concat(e,e+"-"+DY[0],e+"-"+DY[1]),[]),h2=Math.min,Ny=Math.max,nI=Math.round,kP=Math.floor,fg=t=>({x:t,y:t}),P3e={left:"right",right:"left",bottom:"top",top:"bottom"},T3e={start:"end",end:"start"};function m$(t,e,i){return Ny(t,h2(e,i))}function Ev(t,e){return typeof t=="function"?t(e):t}function Vp(t){return t.split("-")[0]}function af(t){return t.split("-")[1]}function rre(t){return t==="x"?"y":"x"}function eq(t){return t==="y"?"height":"width"}function iM(t){return["top","bottom"].includes(Vp(t))?"y":"x"}function tq(t){return rre(iM(t))}function ore(t,e,i){i===void 0&&(i=!1);const s=af(t),n=tq(t),r=eq(n);let o=n==="x"?s===(i?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=oI(o)),[o,oI(o)]}function I3e(t){const e=oI(t);return[rI(t),e,rI(e)]}function rI(t){return t.replace(/start|end/g,e=>T3e[e])}function M3e(t,e,i){const s=["left","right"],n=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?n:s:e?s:n;case"left":case"right":return e?r:o;default:return[]}}function A3e(t,e,i,s){const n=af(t);let r=M3e(Vp(t),i==="start",s);return n&&(r=r.map(o=>o+"-"+n),e&&(r=r.concat(r.map(rI)))),r}function oI(t){return t.replace(/left|right|bottom|top/g,e=>P3e[e])}function D3e(t){return{top:0,right:0,bottom:0,left:0,...t}}function are(t){return typeof t!="number"?D3e(t):{top:t,right:t,bottom:t,left:t}}function aI(t){const{x:e,y:i,width:s,height:n}=t;return{width:s,height:n,top:i,left:e,right:e+s,bottom:i+n,x:e,y:i}}function NY(t,e,i){let{reference:s,floating:n}=t;const r=iM(e),o=tq(e),l=eq(o),c=Vp(e),f=r==="y",y=s.x+s.width/2-n.width/2,_=s.y+s.height/2-n.height/2,x=s[l]/2-n[l]/2;let S;switch(c){case"top":S={x:y,y:s.y-n.height};break;case"bottom":S={x:y,y:s.y+s.height};break;case"right":S={x:s.x+s.width,y:_};break;case"left":S={x:s.x-n.width,y:_};break;default:S={x:s.x,y:s.y}}switch(af(e)){case"start":S[o]-=x*(i&&f?-1:1);break;case"end":S[o]+=x*(i&&f?-1:1);break}return S}const k3e=async(t,e,i)=>{const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:o}=i,l=r.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:y,y:_}=NY(f,s,c),x=s,S={},P=0;for(let A=0;A<l.length;A++){const{name:k,fn:$}=l[A],{x:F,y:G,data:V,reset:B}=await $({x:y,y:_,initialPlacement:s,placement:x,strategy:n,middlewareData:S,rects:f,platform:o,elements:{reference:t,floating:e}});y=F??y,_=G??_,S={...S,[k]:{...S[k],...V}},B&&P<=50&&(P++,typeof B=="object"&&(B.placement&&(x=B.placement),B.rects&&(f=B.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):B.rects),{x:y,y:_}=NY(f,x,c)),A=-1)}return{x:y,y:_,placement:x,strategy:n,middlewareData:S}};async function QS(t,e){var i;e===void 0&&(e={});const{x:s,y:n,platform:r,rects:o,elements:l,strategy:c}=t,{boundary:f="clippingAncestors",rootBoundary:y="viewport",elementContext:_="floating",altBoundary:x=!1,padding:S=0}=Ev(e,t),P=are(S),k=l[x?_==="floating"?"reference":"floating":_],$=aI(await r.getClippingRect({element:(i=await(r.isElement==null?void 0:r.isElement(k)))==null||i?k:k.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:f,rootBoundary:y,strategy:c})),F=_==="floating"?{x:s,y:n,width:o.floating.width,height:o.floating.height}:o.reference,G=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),V=await(r.isElement==null?void 0:r.isElement(G))?await(r.getScale==null?void 0:r.getScale(G))||{x:1,y:1}:{x:1,y:1},B=aI(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:F,offsetParent:G,strategy:c}):F);return{top:($.top-B.top+P.top)/V.y,bottom:(B.bottom-$.bottom+P.bottom)/V.y,left:($.left-B.left+P.left)/V.x,right:(B.right-$.right+P.right)/V.x}}const N3e=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:s,placement:n,rects:r,platform:o,elements:l,middlewareData:c}=e,{element:f,padding:y=0}=Ev(t,e)||{};if(f==null)return{};const _=are(y),x={x:i,y:s},S=tq(n),P=eq(S),A=await o.getDimensions(f),k=S==="y",$=k?"top":"left",F=k?"bottom":"right",G=k?"clientHeight":"clientWidth",V=r.reference[P]+r.reference[S]-x[S]-r.floating[P],B=x[S]-r.reference[S],W=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let J=W?W[G]:0;(!J||!await(o.isElement==null?void 0:o.isElement(W)))&&(J=l.floating[G]||r.floating[P]);const re=V/2-B/2,se=J/2-A[P]/2-1,oe=h2(_[$],se),pe=h2(_[F],se),ue=oe,ce=J-A[P]-pe,ne=J/2-A[P]/2+re,de=m$(ue,ne,ce),Se=!c.arrow&&af(n)!=null&&ne!==de&&r.reference[P]/2-(ne<ue?oe:pe)-A[P]/2<0,Pe=Se?ne<ue?ne-ue:ne-ce:0;return{[S]:x[S]+Pe,data:{[S]:de,centerOffset:ne-de-Pe,...Se&&{alignmentOffset:Pe}},reset:Se}}});function $3e(t,e,i){return(t?[...i.filter(n=>af(n)===t),...i.filter(n=>af(n)!==t)]:i.filter(n=>Vp(n)===n)).filter(n=>t?af(n)===t||(e?rI(n)!==n:!1):!0)}const O3e=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,s,n;const{rects:r,middlewareData:o,placement:l,platform:c,elements:f}=e,{crossAxis:y=!1,alignment:_,allowedPlacements:x=kY,autoAlignment:S=!0,...P}=Ev(t,e),A=_!==void 0||x===kY?$3e(_||null,S,x):x,k=await QS(e,P),$=((i=o.autoPlacement)==null?void 0:i.index)||0,F=A[$];if(F==null)return{};const G=ore(F,r,await(c.isRTL==null?void 0:c.isRTL(f.floating)));if(l!==F)return{reset:{placement:A[0]}};const V=[k[Vp(F)],k[G[0]],k[G[1]]],B=[...((s=o.autoPlacement)==null?void 0:s.overflows)||[],{placement:F,overflows:V}],W=A[$+1];if(W)return{data:{index:$+1,overflows:B},reset:{placement:W}};const J=B.map(oe=>{const pe=af(oe.placement);return[oe.placement,pe&&y?oe.overflows.slice(0,2).reduce((ue,ce)=>ue+ce,0):oe.overflows[0],oe.overflows]}).sort((oe,pe)=>oe[1]-pe[1]),se=((n=J.filter(oe=>oe[2].slice(0,af(oe[0])?2:3).every(pe=>pe<=0))[0])==null?void 0:n[0])||J[0][0];return se!==l?{data:{index:$+1,overflows:B},reset:{placement:se}}:{}}}},R3e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,s;const{placement:n,middlewareData:r,rects:o,initialPlacement:l,platform:c,elements:f}=e,{mainAxis:y=!0,crossAxis:_=!0,fallbackPlacements:x,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:P="none",flipAlignment:A=!0,...k}=Ev(t,e);if((i=r.arrow)!=null&&i.alignmentOffset)return{};const $=Vp(n),F=Vp(l)===l,G=await(c.isRTL==null?void 0:c.isRTL(f.floating)),V=x||(F||!A?[oI(l)]:I3e(l));!x&&P!=="none"&&V.push(...A3e(l,A,P,G));const B=[l,...V],W=await QS(e,k),J=[];let re=((s=r.flip)==null?void 0:s.overflows)||[];if(y&&J.push(W[$]),_){const ue=ore(n,o,G);J.push(W[ue[0]],W[ue[1]])}if(re=[...re,{placement:n,overflows:J}],!J.every(ue=>ue<=0)){var se,oe;const ue=(((se=r.flip)==null?void 0:se.index)||0)+1,ce=B[ue];if(ce)return{data:{index:ue,overflows:re},reset:{placement:ce}};let ne=(oe=re.filter(de=>de.overflows[0]<=0).sort((de,Se)=>de.overflows[1]-Se.overflows[1])[0])==null?void 0:oe.placement;if(!ne)switch(S){case"bestFit":{var pe;const de=(pe=re.map(Se=>[Se.placement,Se.overflows.filter(Pe=>Pe>0).reduce((Pe,Re)=>Pe+Re,0)]).sort((Se,Pe)=>Se[1]-Pe[1])[0])==null?void 0:pe[0];de&&(ne=de);break}case"initialPlacement":ne=l;break}if(n!==ne)return{reset:{placement:ne}}}return{}}}};function $Y(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function OY(t){return nre.some(e=>t[e]>=0)}const L3e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:s="referenceHidden",...n}=Ev(t,e);switch(s){case"referenceHidden":{const r=await QS(e,{...n,elementContext:"reference"}),o=$Y(r,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:OY(o)}}}case"escaped":{const r=await QS(e,{...n,altBoundary:!0}),o=$Y(r,i.floating);return{data:{escapedOffsets:o,escaped:OY(o)}}}default:return{}}}}};async function F3e(t,e){const{placement:i,platform:s,elements:n}=t,r=await(s.isRTL==null?void 0:s.isRTL(n.floating)),o=Vp(i),l=af(i),c=iM(i)==="y",f=["left","top"].includes(o)?-1:1,y=r&&c?-1:1,_=Ev(e,t);let{mainAxis:x,crossAxis:S,alignmentAxis:P}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,..._};return l&&typeof P=="number"&&(S=l==="end"?P*-1:P),c?{x:S*y,y:x*f}:{x:x*f,y:S*y}}const z3e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,s;const{x:n,y:r,placement:o,middlewareData:l}=e,c=await F3e(e,t);return o===((i=l.offset)==null?void 0:i.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:n+c.x,y:r+c.y,data:{...c,placement:o}}}}},q3e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:s,placement:n}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:l={fn:k=>{let{x:$,y:F}=k;return{x:$,y:F}}},...c}=Ev(t,e),f={x:i,y:s},y=await QS(e,c),_=iM(Vp(n)),x=rre(_);let S=f[x],P=f[_];if(r){const k=x==="y"?"top":"left",$=x==="y"?"bottom":"right",F=S+y[k],G=S-y[$];S=m$(F,S,G)}if(o){const k=_==="y"?"top":"left",$=_==="y"?"bottom":"right",F=P+y[k],G=P-y[$];P=m$(F,P,G)}const A=l.fn({...e,[x]:S,[_]:P});return{...A,data:{x:A.x-i,y:A.y-s}}}}};function sM(){return typeof window<"u"}function Q2(t){return lre(t)?(t.nodeName||"").toLowerCase():"#document"}function Iu(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function nm(t){var e;return(e=(lre(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lre(t){return sM()?t instanceof Node||t instanceof Iu(t).Node:!1}function Wh(t){return sM()?t instanceof Element||t instanceof Iu(t).Element:!1}function hf(t){return sM()?t instanceof HTMLElement||t instanceof Iu(t).HTMLElement:!1}function RY(t){return!sM()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Iu(t).ShadowRoot}function oC(t){const{overflow:e,overflowX:i,overflowY:s,display:n}=Zh(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(n)}function V3e(t){return["table","td","th"].includes(Q2(t))}function nM(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function rM(t){const e=iq(),i=Wh(t)?Zh(t):t;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(i.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(i.contain||"").includes(s))}function G3e(t){let e=pg(t);for(;hf(e)&&!d2(e);){if(rM(e))return e;if(nM(e))return null;e=pg(e)}return null}function iq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function d2(t){return["html","body","#document"].includes(Q2(t))}function Zh(t){return Iu(t).getComputedStyle(t)}function oM(t){return Wh(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function pg(t){if(Q2(t)==="html")return t;const e=t.assignedSlot||t.parentNode||RY(t)&&t.host||nm(t);return RY(e)?e.host:e}function ure(t){const e=pg(t);return d2(e)?t.ownerDocument?t.ownerDocument.body:t.body:hf(e)&&oC(e)?e:ure(e)}function eE(t,e,i){var s;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=ure(t),r=n===((s=t.ownerDocument)==null?void 0:s.body),o=Iu(n);if(r){const l=j3e(o);return e.concat(o,o.visualViewport||[],oC(n)?n:[],l&&i?eE(l):[])}return e.concat(n,eE(n,[],i))}function j3e(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function cre(t){const e=Zh(t);let i=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const n=hf(t),r=n?t.offsetWidth:i,o=n?t.offsetHeight:s,l=nI(i)!==r||nI(s)!==o;return l&&(i=r,s=o),{width:i,height:s,$:l}}function sq(t){return Wh(t)?t:t.contextElement}function zb(t){const e=sq(t);if(!hf(e))return fg(1);const i=e.getBoundingClientRect(),{width:s,height:n,$:r}=cre(e);let o=(r?nI(i.width):i.width)/s,l=(r?nI(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const B3e=fg(0);function hre(t){const e=Iu(t);return!iq()||!e.visualViewport?B3e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function H3e(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==Iu(t)?!1:e}function Xy(t,e,i,s){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),r=sq(t);let o=fg(1);e&&(s?Wh(s)&&(o=zb(s)):o=zb(t));const l=H3e(r,i,s)?hre(r):fg(0);let c=(n.left+l.x)/o.x,f=(n.top+l.y)/o.y,y=n.width/o.x,_=n.height/o.y;if(r){const x=Iu(r),S=s&&Wh(s)?Iu(s):s;let P=x,A=P.frameElement;for(;A&&s&&S!==P;){const k=zb(A),$=A.getBoundingClientRect(),F=Zh(A),G=$.left+(A.clientLeft+parseFloat(F.paddingLeft))*k.x,V=$.top+(A.clientTop+parseFloat(F.paddingTop))*k.y;c*=k.x,f*=k.y,y*=k.x,_*=k.y,c+=G,f+=V,P=Iu(A),A=P.frameElement}}return aI({width:y,height:_,x:c,y:f})}function U3e(t){let{elements:e,rect:i,offsetParent:s,strategy:n}=t;const r=n==="fixed",o=nm(s),l=e?nM(e.floating):!1;if(s===o||l&&r)return i;let c={scrollLeft:0,scrollTop:0},f=fg(1);const y=fg(0),_=hf(s);if((_||!_&&!r)&&((Q2(s)!=="body"||oC(o))&&(c=oM(s)),hf(s))){const x=Xy(s);f=zb(s),y.x=x.x+s.clientLeft,y.y=x.y+s.clientTop}return{width:i.width*f.x,height:i.height*f.y,x:i.x*f.x-c.scrollLeft*f.x+y.x,y:i.y*f.y-c.scrollTop*f.y+y.y}}function Y3e(t){return Array.from(t.getClientRects())}function dre(t){return Xy(nm(t)).left+oM(t).scrollLeft}function X3e(t){const e=nm(t),i=oM(t),s=t.ownerDocument.body,n=Ny(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=Ny(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-i.scrollLeft+dre(t);const l=-i.scrollTop;return Zh(s).direction==="rtl"&&(o+=Ny(e.clientWidth,s.clientWidth)-n),{width:n,height:r,x:o,y:l}}function W3e(t,e){const i=Iu(t),s=nm(t),n=i.visualViewport;let r=s.clientWidth,o=s.clientHeight,l=0,c=0;if(n){r=n.width,o=n.height;const f=iq();(!f||f&&e==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:r,height:o,x:l,y:c}}function Z3e(t,e){const i=Xy(t,!0,e==="fixed"),s=i.top+t.clientTop,n=i.left+t.clientLeft,r=hf(t)?zb(t):fg(1),o=t.clientWidth*r.x,l=t.clientHeight*r.y,c=n*r.x,f=s*r.y;return{width:o,height:l,x:c,y:f}}function LY(t,e,i){let s;if(e==="viewport")s=W3e(t,i);else if(e==="document")s=X3e(nm(t));else if(Wh(e))s=Z3e(e,i);else{const n=hre(t);s={...e,x:e.x-n.x,y:e.y-n.y}}return aI(s)}function fre(t,e){const i=pg(t);return i===e||!Wh(i)||d2(i)?!1:Zh(i).position==="fixed"||fre(i,e)}function K3e(t,e){const i=e.get(t);if(i)return i;let s=eE(t,[],!1).filter(l=>Wh(l)&&Q2(l)!=="body"),n=null;const r=Zh(t).position==="fixed";let o=r?pg(t):t;for(;Wh(o)&&!d2(o);){const l=Zh(o),c=rM(o);!c&&l.position==="fixed"&&(n=null),(r?!c&&!n:!c&&l.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||oC(o)&&!c&&fre(t,o))?s=s.filter(y=>y!==o):n=l,o=pg(o)}return e.set(t,s),s}function J3e(t){let{element:e,boundary:i,rootBoundary:s,strategy:n}=t;const o=[...i==="clippingAncestors"?nM(e)?[]:K3e(e,this._c):[].concat(i),s],l=o[0],c=o.reduce((f,y)=>{const _=LY(e,y,n);return f.top=Ny(_.top,f.top),f.right=h2(_.right,f.right),f.bottom=h2(_.bottom,f.bottom),f.left=Ny(_.left,f.left),f},LY(e,l,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Q3e(t){const{width:e,height:i}=cre(t);return{width:e,height:i}}function eSe(t,e,i){const s=hf(e),n=nm(e),r=i==="fixed",o=Xy(t,!0,r,e);let l={scrollLeft:0,scrollTop:0};const c=fg(0);if(s||!s&&!r)if((Q2(e)!=="body"||oC(n))&&(l=oM(e)),s){const _=Xy(e,!0,r,e);c.x=_.x+e.clientLeft,c.y=_.y+e.clientTop}else n&&(c.x=dre(n));const f=o.left+l.scrollLeft-c.x,y=o.top+l.scrollTop-c.y;return{x:f,y,width:o.width,height:o.height}}function A8(t){return Zh(t).position==="static"}function FY(t,e){return!hf(t)||Zh(t).position==="fixed"?null:e?e(t):t.offsetParent}function pre(t,e){const i=Iu(t);if(nM(t))return i;if(!hf(t)){let n=pg(t);for(;n&&!d2(n);){if(Wh(n)&&!A8(n))return n;n=pg(n)}return i}let s=FY(t,e);for(;s&&V3e(s)&&A8(s);)s=FY(s,e);return s&&d2(s)&&A8(s)&&!rM(s)?i:s||G3e(t)||i}const tSe=async function(t){const e=this.getOffsetParent||pre,i=this.getDimensions,s=await i(t.floating);return{reference:eSe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function iSe(t){return Zh(t).direction==="rtl"}const g$={convertOffsetParentRelativeRectToViewportRelativeRect:U3e,getDocumentElement:nm,getClippingRect:J3e,getOffsetParent:pre,getElementRects:tSe,getClientRects:Y3e,getDimensions:Q3e,getScale:zb,isElement:Wh,isRTL:iSe};function sSe(t,e){let i=null,s;const n=nm(t);function r(){var l;clearTimeout(s),(l=i)==null||l.disconnect(),i=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),r();const{left:f,top:y,width:_,height:x}=t.getBoundingClientRect();if(l||e(),!_||!x)return;const S=kP(y),P=kP(n.clientWidth-(f+_)),A=kP(n.clientHeight-(y+x)),k=kP(f),F={rootMargin:-S+"px "+-P+"px "+-A+"px "+-k+"px",threshold:Ny(0,h2(1,c))||1};let G=!0;function V(B){const W=B[0].intersectionRatio;if(W!==c){if(!G)return o();W?o(!1,W):s=setTimeout(()=>{o(!1,1e-7)},1e3)}G=!1}try{i=new IntersectionObserver(V,{...F,root:n.ownerDocument})}catch{i=new IntersectionObserver(V,F)}i.observe(t)}return o(!0),r}function nSe(t,e,i,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,f=sq(t),y=n||r?[...f?eE(f):[],...eE(e)]:[];y.forEach($=>{n&&$.addEventListener("scroll",i,{passive:!0}),r&&$.addEventListener("resize",i)});const _=f&&l?sSe(f,i):null;let x=-1,S=null;o&&(S=new ResizeObserver($=>{let[F]=$;F&&F.target===f&&S&&(S.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var G;(G=S)==null||G.observe(e)})),i()}),f&&!c&&S.observe(f),S.observe(e));let P,A=c?Xy(t):null;c&&k();function k(){const $=Xy(t);A&&($.x!==A.x||$.y!==A.y||$.width!==A.width||$.height!==A.height)&&i(),A=$,P=requestAnimationFrame(k)}return i(),()=>{var $;y.forEach(F=>{n&&F.removeEventListener("scroll",i),r&&F.removeEventListener("resize",i)}),_==null||_(),($=S)==null||$.disconnect(),S=null,c&&cancelAnimationFrame(P)}}const rSe=z3e,oSe=O3e,aSe=q3e,zY=R3e,lSe=L3e,uSe=N3e,cSe=(t,e,i)=>{const s=new Map,n={platform:g$,...i},r={...n.platform,_c:s};return k3e(t,e,{...n,platform:r})};function hSe(t){return dSe(t)}function D8(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function dSe(t){for(let e=t;e;e=D8(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=D8(t);e;e=D8(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||rM(i)||e.tagName==="BODY"))return e}return null}(function(){if(wf()){const e=g$.getOffsetParent;g$.getOffsetParent=i=>e(i,hSe)}})();function qY(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const mre=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:s="absolute",placement:n,flipDisabled:r,flipPlacements:o,offsetDistance:l,offsetSkidding:c,arrowEl:f,type:y})=>{var B;if(!e||!i)return null;const _=ng(i)==="rtl",{x,y:S,placement:P,strategy:A,middlewareData:k}=await cSe(e,i,{strategy:s,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:GY(n,_),middleware:gSe({placement:n,flipDisabled:r,flipPlacements:o==null?void 0:o.map(W=>GY(W,_)),offsetDistance:l,offsetSkidding:c,arrowEl:f,type:y})});if(f&&k.arrow){const{x:W,y:J}=k.arrow,re=P.split("-")[0],se=W!=null?"left":"top",oe=vSe[re],pe={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=re==="left"||re==="right"?"horizontal":"vertical"),Object.assign(f.style,{...pe,[se]:`${se=="left"?W:J}px`,[re]:"100%",transform:oe})}const F=((B=k.hide)==null?void 0:B.referenceHidden)?"hidden":null,G=F?"none":null;i.setAttribute(fSe,P);const{open:V}=t;Object.assign(i.style,{visibility:F,pointerEvents:G,position:A,transform:V?`translate(${qY(x)}px,${qY(S)}px)`:"",top:0,left:0})},fSe="data-placement",VY=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],pSe="bottom-start",mSe="bottom-end",f2={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function gSe({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:s,offsetSkidding:n,arrowEl:r,type:o}){const l=[aSe(),lSe()];if(o==="menu")return[...l,zY({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if(o==="popover"||o==="tooltip"){const c=[...l,rSe({mainAxis:typeof s=="number"?s:0,crossAxis:typeof n=="number"?n:0})];return t==="auto"||t==="auto-start"||t==="auto-end"?c.push(oSe({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||c.push(zY(i?{fallbackPlacements:i}:{})),r&&c.push(uSe({element:r})),c}return[]}function gre(t,e){const i=t.filter(s=>VY.includes(s));return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${VY.map(s=>`"${s}"`).join(", ").trim()}`,{el:e}),i}function GY(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function nq(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(!tE.get(t))return yre(t,e.referenceEl,e.floatingEl);await(i?ySe(t):mre)(t,e)}function ySe(t){let e=lI.get(t);return e||(e=C3e(mre,GU.reposition,{leading:!0,maxWait:GU.reposition}),lI.set(t,e),e)}const vSe={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},tE=new WeakMap,lI=new WeakMap;async function yre(t,e,i){if(!i.isConnected)return;const s=wf()?nSe:(o,l,c)=>(c(),()=>{});tE.set(t,{state:"pending"});let n;const r=s(e,i,()=>{const o=t.reposition();n||(n=o)});return tE.set(t,{state:"active",cleanUp:r}),n}async function Eb(t,e,i){if(!(!i||!e)&&(aM(t,e,i),Object.assign(i.style,{visibility:"hidden",pointerEvents:"none",position:t.overlayPositioning}),!!t.open))return yre(t,e,i)}function aM(t,e,i){var n;if(!i||!e)return;const s=tE.get(t);(s==null?void 0:s.state)==="active"&&s.cleanUp(),tE.delete(t),(n=lI.get(t))==null||n.cancel(),lI.delete(t)}const jY=4,vre=Math.ceil(Math.hypot(jY,jY));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const BY={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},_Se={width:12,height:6,strokeWidth:1},_re=({floatingLayout:t,key:e,ref:i})=>{const{width:s,height:n,strokeWidth:r}=_Se,o=s/2,l=t==="vertical",c=`M0,0 H${s} L${s-o},${n} Q${o},${n} ${o},${n} Z`;return ke("svg",{"aria-hidden":"true",class:BY.arrow,height:s,key:e,ref:i,viewBox:`0 0 ${s} ${s+(l?0:r)}`,width:s+(l?r:0)},ke("path",{class:BY.arrowStroke,d:c,fill:"none","stroke-width":r+1}),ke("path",{d:c,stroke:"none"}))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */class bSe{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,s=e.find(n=>i.has(n));return i.get(s)},this.togglePopovers=e=>{const i=e.composedPath(),s=this.queryPopover(i);s&&!s.triggerDisabled&&(s.open=!s.open),Array.from(this.registeredElements.values()).filter(n=>n!==s&&n.autoClose&&n.open&&!i.includes(n)).forEach(n=>n.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():nC(e.key)&&this.togglePopovers(e))},this.clickHandler=e=>{n2e(e)||this.togglePopovers(e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const vd={container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"headerContainer",heading:"heading"},xSe="auto",HY="aria-controls",UY="aria-expanded",wSe=":host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, var(--calcite-z-index-popup));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{inset-block-start:-5px}:host([data-placement^=top]) .calcite-floating-ui-anim{inset-block-start:5px}:host([data-placement^=left]) .calcite-floating-ui-anim{left:5px}:host([data-placement^=right]) .calcite-floating-ui-anim{left:-5px}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}:host([hidden]){display:none}[hidden]{display:none}",SSe=wSe,YY=new bSe,ESe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePopoverBeforeClose=Ot(this,"calcitePopoverBeforeClose",6),this.calcitePopoverClose=Ot(this,"calcitePopoverClose",6),this.calcitePopoverBeforeOpen=Ot(this,"calcitePopoverBeforeOpen",6),this.calcitePopoverOpen=Ot(this,"calcitePopoverOpen",6),this.mutationObserver=xl("mutation",()=>this.updateFocusTrapElements()),this.guid=`calcite-popover-${tm()}`,this.openTransitionProp="opacity",this.hasLoaded=!1,this.setTransitionEl=e=>{this.transitionEl=e},this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?gre(i,e):null},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement(),Eb(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:s,effectiveReferenceElement:n}=this;e&&s&&!n&&console.warn(`${i.tagName}: reference-element id "${s}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(UY,Wo(i))},this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(HY,i),YY.registerElement(e,this.el),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(HY),e.removeAttribute(UY)),YY.unregisterElement(e))},this.hide=()=>{this.open=!1},this.storeArrowEl=e=>{this.arrowEl=e,this.reposition(!0)},this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.pointerDisabled=!1,this.flipPlacements=void 0,this.heading=void 0,this.headingLevel=void 0,this.label=void 0,this.messageOverrides=void 0,this.messages=void 0,this.offsetDistance=vre,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=xSe,this.referenceElement=void 0,this.scale="m",this.triggerDisabled=!1,this.effectiveLocale="",this.floatingLayout="vertical",this.effectiveReferenceElement=void 0,this.defaultMessages=void 0}handleFocusTrapDisabled(e){this.open&&(e?pS(this):f$(this))}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){of(this),this.reposition(!0),this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),Cl(this),Gu(this),ere(this),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}async componentWillLoad(){await qu(this),Eo(this)}componentDidLoad(){Co(this),this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.open&&of(this),this.hasLoaded=!0}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),Pl(this),ju(this),aM(this,this.effectiveReferenceElement,this.el),pS(this)}async reposition(e=!1){const{el:i,effectiveReferenceElement:s,placement:n,overlayPositioning:r,flipDisabled:o,filteredFlipPlacements:l,offsetDistance:c,offsetSkidding:f,arrowEl:y}=this;return nq(this,{floatingEl:i,referenceEl:s,overlayPositioning:r,placement:n,flipDisabled:o,flipPlacements:l,offsetDistance:c,offsetSkidding:f,arrowEl:y,type:"popover"},e)}async setFocus(){await Po(this),So(this.el),Q6(this.el)}async updateFocusTrapElements(){tre(this)}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?sC(i,{id:e}):e)||null}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),f$(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),pS(this)}renderCloseButton(){const{messages:e,closable:i}=this;return i?ke("div",{class:vd.closeButtonContainer,key:vd.closeButtonContainer},ke("calcite-action",{appearance:"transparent",class:vd.closeButton,onClick:this.hide,ref:s=>this.closeButtonEl=s,scale:this.scale,text:e.close},ke("calcite-icon",{icon:"x",scale:Lc(this.scale)}))):null}renderHeader(){const{heading:e,headingLevel:i}=this,s=e?ke(Qz,{class:vd.heading,level:i},e):null;return s?ke("div",{class:vd.header,key:vd.header},s,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:e,heading:i,label:s,open:n,pointerDisabled:r,floatingLayout:o}=this,l=e&&n,c=!l,f=r?null:ke(_re,{floatingLayout:o,key:"floating-arrow",ref:this.storeArrowEl});return ke(Nr,{key:"a563d48090d6e6c0c138023e169667834f657c4c","aria-hidden":Wo(c),"aria-label":s,"aria-live":"polite","calcite-hydrated-hidden":c,id:this.getId(),role:"dialog"},ke("div",{key:"73053dbdce2cfc68fcd42667089d611e81010955",class:{[vd.container]:!0,[f2.animation]:!0,[f2.animationActive]:l},ref:this.setTransitionEl},f,ke("div",{key:"1fbcd45ee42b10a67881ced74db2db051231c94d",class:{[vd.hasHeader]:!!i,[vd.headerContainer]:!0}},this.renderHeader(),ke("div",{key:"522abe801b98787863aac14d990b948d2d286156",class:vd.content},ke("slot",{key:"022a8f690288acdbac4ec1b3eccf807ffe382d5d"})),i?null:this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return SSe}},[1,"calcite-popover",{autoClose:[516,"auto-close"],closable:[516],flipDisabled:[516,"flip-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],pointerDisabled:[516,"pointer-disabled"],flipPlacements:[16],heading:[1],headingLevel:[514,"heading-level"],label:[1],messageOverrides:[1040],messages:[1040],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],scale:[513],triggerDisabled:[516,"trigger-disabled"],effectiveLocale:[32],floatingLayout:[32],effectiveReferenceElement:[32],defaultMessages:[32],reposition:[64],setFocus:[64],updateFocusTrapElements:[64]},void 0,{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function ex(){if(typeof customElements>"u")return;["calcite-popover","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-popover":customElements.get(e)||customElements.define(e,ESe);break;case"calcite-action":customElements.get(e)||sm();break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break}})}ex();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const XY={menu:"menu",defaultTrigger:"default-trigger"},p2={tooltip:"tooltip",trigger:"trigger"},CSe={menu:"ellipsis"},PSe="data-active",TSe=":host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}",ISe=TSe,MSe=["ArrowUp","ArrowDown","End","Home"],ASe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionMenuOpen=Ot(this,"calciteActionMenuOpen",6),this.actionElements=[],this.guid=`calcite-action-menu-${tm()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.connectMenuButtonEl=()=>{const{menuButtonId:e,menuId:i,open:s,label:n}=this,r=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==r&&(this.disconnectMenuButtonEl(),this.menuButtonEl=r,this.setTooltipReferenceElement(),r&&(r.active=s,r.setAttribute("aria-controls",i),r.setAttribute("aria-expanded",Wo(s)),r.setAttribute("aria-haspopup","true"),r.id||(r.id=e),r.label||(r.label=n),r.text||(r.text=n),r.addEventListener("click",this.menuButtonClick),r.addEventListener("keydown",this.menuButtonKeyDown)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown))},this.setMenuButtonEl=e=>{const i=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()},this.setDefaultMenuButtonEl=e=>{this.defaultMenuButtonEl=e,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=()=>{this.toggleOpen()},this.updateTooltip=e=>{const i=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()},this.setTooltipReferenceElement=()=>{const{tooltipEl:e,expanded:i,menuButtonEl:s,open:n}=this;e&&(e.referenceElement=!i&&!n?s:null)},this.updateAction=(e,i)=>{const{guid:s,activeMenuItemIndex:n}=this,r=`${s}-action-${i}`;e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=r),e.toggleAttribute(PSe,i===n)},this.updateActions=e=>{e==null||e.forEach(this.updateAction)},this.handleDefaultSlotChange=e=>{const i=e.target.assignedElements({flatten:!0}).reduce((s,n)=>n!=null&&n.matches("calcite-action")?(s.push(n),s):n!=null&&n.matches("calcite-action-group")?s.concat(Array.from(n.querySelectorAll("calcite-action"))):s,[]);this.actionElements=i.filter(s=>!s.disabled&&!s.hidden)},this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:s,activeMenuItemIndex:n,open:r}=this;if(s.length){if(nC(i)){if(e.preventDefault(),!r){this.toggleOpen();return}const o=s[n];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,s)}},this.handleActionNavigation=(e,i,s)=>{if(!this.isValidKey(i,MSe))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=s.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=s.length-1);const n=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=TY(Math.max(n-1,-1),s.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=TY(n+1,s.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(e=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=e},this.handlePopoverOpen=()=>{this.open=!0},this.handlePopoverClose=()=>{this.open=!1},this.appearance="solid",this.expanded=!1,this.flipPlacements=void 0,this.label=void 0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale=void 0,this.menuButtonEl=void 0,this.activeMenuItemIndex=-1}connectedCallback(){this.connectMenuButtonEl()}componentWillLoad(){Eo(this)}componentDidLoad(){Co(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=e),this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){return await Po(this),Yy(this.menuButtonEl)}renderMenuButton(){const{appearance:e,label:i,scale:s,expanded:n}=this;return ke("slot",{name:p2.trigger,onSlotchange:this.setMenuButtonEl},ke("calcite-action",{appearance:e,class:XY.defaultTrigger,icon:CSe.menu,ref:this.setDefaultMenuButtonEl,scale:s,text:i,textEnabled:n}))}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,open:s,menuId:n,menuButtonEl:r,label:o,placement:l,overlayPositioning:c,flipPlacements:f}=this,y=e[i],_=(y==null?void 0:y.id)||null;return ke("calcite-popover",{autoClose:!0,flipPlacements:f,focusTrapDisabled:!0,label:o,offsetDistance:0,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,open:s,overlayPositioning:c,placement:l,pointerDisabled:!0,referenceElement:r},ke("div",{"aria-activedescendant":_,"aria-labelledby":r==null?void 0:r.id,class:XY.menu,id:n,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},ke("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return ke(Z6,{key:"d13aa4f3d43fb5651c0487ccfa456813f69955d2"},this.renderMenuButton(),this.renderMenuItems(),ke("slot",{key:"b63d187516c766db6a1b1db3df34050fdec9e6ce",name:p2.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(e,i){return!!i.find(s=>s===e)}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}static get style(){return ISe}},[1,"calcite-action-menu",{appearance:[513],expanded:[516],flipPlacements:[16],label:[1],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],menuButtonEl:[32],activeMenuItemIndex:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}]);function aC(){if(typeof customElements>"u")return;["calcite-action-menu","calcite-action","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-menu":customElements.get(e)||customElements.define(e,ASe);break;case"calcite-action":customElements.get(e)||sm();break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break;case"calcite-popover":customElements.get(e)||ex();break}})}aC();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const WY={scrim:"scrim",content:"content"},ZY={s:72,l:480},DSe=":host{--calcite-scrim-background:var(--calcite-color-transparent-scrim);position:absolute;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",kSe=DSe,NSe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=xl("resize",()=>this.handleResize()),this.handleDefaultSlotChange=e=>{this.hasContent=Qbe(e)},this.storeLoaderEl=e=>{this.loaderEl=e,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}connectedCallback(){var e;Cl(this),Gu(this),(e=this.resizeObserver)==null||e.observe(this.el)}async componentWillLoad(){await qu(this)}disconnectedCallback(){var e;Pl(this),ju(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const{hasContent:e,loading:i,messages:s}=this;return ke("div",{key:"286b03bb4a18b45f1b6914684a5178e952a44127",class:WY.scrim},i?ke("calcite-loader",{label:s.loading,ref:this.storeLoaderEl,scale:this.loaderScale}):null,ke("div",{key:"0f8cd111720239b204d0d201610c4145d5616753",class:WY.content,hidden:!e},ke("slot",{key:"fe7bbced9871c9179971da0ef7ca07ea1c9ac33e",onSlotchange:this.handleDefaultSlotChange})))}getScale(e){return e<ZY.s?"s":e>=ZY.l?"l":"m"}handleResize(){const{loaderEl:e,el:i}=this;e&&(this.loaderScale=this.getScale(Math.min(i.clientHeight,i.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return kSe}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function rq(){if(typeof customElements>"u")return;["calcite-scrim","calcite-loader"].forEach(e=>{switch(e){case"calcite-scrim":customElements.get(e)||customElements.define(e,NSe);break;case"calcite-loader":customElements.get(e)||Zc();break}})}rq();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Tr={actionBarContainer:"action-bar-container",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",heading:"heading",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end"},KY={close:"close",collapse:"collapse"},NP={close:"x",menu:"ellipsis",expand:"chevron-down",collapse:"chevron-up"},Yn={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"},$Se=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height:calc(var(--calcite-icon-size) * 3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}:host([scale=s]){--calcite-internal-panel-default-padding:var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding:10px}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-internal-panel-default-padding:var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding:var(--calcite-spacing-lg)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-internal-panel-default-padding:var(--calcite-spacing-xl);--calcite-internal-panel-header-vertical-padding:var(--calcite-spacing-xxl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1);line-height:1.5rem}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0);line-height:1.25rem}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;border-block-start:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.container{position:relative;margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), inline-size var(--calcite-animation-timing)}.container[hidden]{display:none}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1);border-block-end:var(--calcite-panel-header-border-block-end, 1px solid var(--calcite-color-border-3))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-color-border-3)}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:0.75rem;padding-block:0.875rem;margin-inline-end:auto}.header-content .heading,.header-content .description{display:block;overflow-wrap:break-word;padding:0px}.header-content .heading{margin-inline:0px;margin-block:0px 0.25rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-color-text-2)}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-color-border-3);border-inline-end-width:1px}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;outline-color:transparent;padding:var(--calcite-panel-content-space, 0);background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.content-top,.content-bottom{padding:var(--calcite-internal-panel-default-padding)}.header-content{flex:1 1 auto;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-padding)}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-color-border-3);padding:var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-padding))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-padding)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-padding)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-padding)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:0.5rem;inset-inline:0;inline-size:-moz-fit-content;inline-size:fit-content}:host([hidden]){display:none}[hidden]{display:none}`,OSe=$Se,RSe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePanelClose=Ot(this,"calcitePanelClose",6),this.calcitePanelToggle=Ot(this,"calcitePanelToggle",6),this.calcitePanelScroll=Ot(this,"calcitePanelScroll",6),this.resizeObserver=xl("resize",()=>this.resizeHandler()),this.resizeHandler=()=>{const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")},this.setContainerRef=e=>{this.containerEl=e},this.panelKeyDownHandler=e=>{this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.handleUserClose(),e.preventDefault())},this.handleUserClose=()=>{this.closed=!0,this.calcitePanelClose.emit()},this.open=()=>{this.isClosed=!1},this.close=async()=>{const e=this.beforeClose??(()=>Promise.resolve());try{await e()}catch{requestAnimationFrame(()=>{this.closed=!1});return}this.isClosed=!0},this.collapse=()=>{this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()},this.panelScrollHandler=()=>{this.calcitePanelScroll.emit()},this.handleHeaderActionsStartSlotChange=e=>{this.hasStartActions=ks(e)},this.handleHeaderActionsEndSlotChange=e=>{this.hasEndActions=ks(e)},this.handleHeaderMenuActionsSlotChange=e=>{this.hasMenuItems=ks(e)},this.handleActionBarSlotChange=e=>{const i=Mc(e).filter(s=>s==null?void 0:s.matches("calcite-action-bar"));i.forEach(s=>s.layout="horizontal"),this.hasActionBar=!!i.length},this.handleHeaderContentSlotChange=e=>{this.hasHeaderContent=ks(e)},this.handleFabSlotChange=e=>{this.hasFab=ks(e)},this.handleFooterActionsSlotChange=e=>{this.hasFooterActions=ks(e)},this.handleFooterEndSlotChange=e=>{this.hasFooterEndContent=ks(e)},this.handleFooterStartSlotChange=e=>{this.hasFooterStartContent=ks(e)},this.handleFooterSlotChange=e=>{this.hasFooterContent=ks(e)},this.contentBottomSlotChangeHandler=e=>{this.hasContentBottom=ks(e)},this.contentTopSlotChangeHandler=e=>{this.hasContentTop=ks(e)},this.setPanelScrollEl=e=>{var i,s;this.panelScrollEl=e,(i=this.resizeObserver)==null||i.disconnect(),e&&((s=this.resizeObserver)==null||s.observe(e),this.resizeHandler())},this.handleAlertsSlotChange=e=>{var i;(i=Mc(e))==null||i.map(s=>{s.nodeName==="CALCITE-ALERT"&&(s.embedded=!0)})},this.beforeClose=void 0,this.closed=!1,this.disabled=!1,this.closable=!1,this.collapsed=!1,this.collapseDirection="down",this.collapsible=!1,this.headingLevel=void 0,this.loading=!1,this.heading=void 0,this.description=void 0,this.menuFlipPlacements=void 0,this.menuOpen=!1,this.menuPlacement=mSe,this.messageOverrides=void 0,this.messages=void 0,this.overlayPositioning="absolute",this.scale="m",this.isClosed=!1,this.hasStartActions=!1,this.hasEndActions=!1,this.hasMenuItems=!1,this.hasHeaderContent=!1,this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.defaultMessages=void 0,this.effectiveLocale="",this.showHeaderContent=!1}toggleDialog(e){e?this.close():this.open()}onMessagesChange(){}connectedCallback(){Cl(this),Gu(this)}async componentWillLoad(){Eo(this),this.isClosed=this.closed,await qu(this)}componentDidLoad(){Co(this)}componentDidRender(){kg(this)}disconnectedCallback(){var e;Pl(this),ju(this),(e=this.resizeObserver)==null||e.disconnect()}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}async setFocus(){await Po(this),Q6(this.containerEl)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}renderHeaderContent(){const{heading:e,headingLevel:i,description:s,hasHeaderContent:n}=this,r=e?ke(Qz,{class:Tr.heading,level:i},e):null,o=s?ke("span",{class:Tr.description},s):null;return!n&&(r||o)?ke("div",{class:Tr.headerContent,key:"header-content"},r,o):null}renderActionBar(){return ke("div",{class:Tr.actionBarContainer,hidden:!this.hasActionBar},ke("slot",{name:Yn.actionBar,onSlotchange:this.handleActionBarSlotChange}))}renderHeaderSlottedContent(){return ke("div",{class:Tr.headerContent,hidden:!this.hasHeaderContent,key:"slotted-header-content"},ke("slot",{name:Yn.headerContent,onSlotchange:this.handleHeaderContentSlotChange}))}renderHeaderStartActions(){const{hasStartActions:e}=this;return ke("div",{class:{[Tr.headerActionsStart]:!0,[Tr.headerActions]:!0},hidden:!e,key:"header-actions-start"},ke("slot",{name:Yn.headerActionsStart,onSlotchange:this.handleHeaderActionsStartSlotChange}))}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:s,collapsed:n,collapseDirection:r,collapsible:o,hasMenuItems:l}=this,{collapse:c,expand:f,close:y}=i,_=[NP.expand,NP.collapse];r==="up"&&_.reverse();const x=o?ke("calcite-action",{"aria-expanded":Wo(!n),"aria-label":c,icon:n?_[0]:_[1],id:KY.collapse,onClick:this.collapse,scale:this.scale,text:c,title:n?f:c}):null,S=s?ke("calcite-action",{"aria-label":y,icon:NP.close,id:KY.close,onClick:this.handleUserClose,scale:this.scale,text:y,title:y}):null,P=ke("slot",{name:Yn.headerActionsEnd,onSlotchange:this.handleHeaderActionsEndSlotChange}),A=e||x||S||l;return ke("div",{class:{[Tr.headerActionsEnd]:!0,[Tr.headerActions]:!0},hidden:!A,key:"header-actions-end"},P,this.renderMenu(),x,S)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:s,menuFlipPlacements:n,menuPlacement:r}=this;return ke("calcite-action-menu",{flipPlacements:n??["top","bottom"],hidden:!e,key:"menu",label:i.options,open:s,overlayPositioning:this.overlayPositioning,placement:r},ke("calcite-action",{icon:NP.menu,scale:this.scale,slot:p2.trigger,text:i.options}),ke("slot",{name:Yn.headerMenuActions,onSlotchange:this.handleHeaderMenuActionsSlotChange}))}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:s,closable:n,collapsible:r,hasMenuItems:o,hasActionBar:l}=this,c=this.renderHeaderContent(),f=e||!!c||i||s||r||n||o;return this.showHeaderContent=f,ke("header",{class:Tr.header,hidden:!(f||l)},ke("div",{class:{[Tr.headerContainer]:!0,[Tr.headerContainerBorderEnd]:l},hidden:!f},this.renderHeaderStartActions(),this.renderHeaderSlottedContent(),c,this.renderHeaderActionsEnd()),this.renderActionBar(),this.renderContentTop())}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:s,hasFooterActions:n}=this,r=i||e||s||n;return ke("footer",{class:Tr.footer,hidden:!r},ke("div",{class:Tr.footerContent,hidden:!s},ke("slot",{name:Yn.footer,onSlotchange:this.handleFooterSlotChange})),ke("div",{class:Tr.footerStart,hidden:s||!i},ke("slot",{name:Yn.footerStart,onSlotchange:this.handleFooterStartSlotChange})),ke("div",{class:Tr.footerEnd,hidden:s||!e},ke("slot",{name:Yn.footerEnd,onSlotchange:this.handleFooterEndSlotChange})),ke("div",{class:Tr.footerActions,hidden:s||!n},ke("slot",{key:"footer-actions-slot",name:Yn.footerActions,onSlotchange:this.handleFooterActionsSlotChange})))}renderContent(){return ke("div",{class:Tr.contentWrapper,hidden:this.collapsible&&this.collapsed,onScroll:this.panelScrollHandler,ref:this.setPanelScrollEl},ke("slot",null),this.renderFab())}renderContentBottom(){return ke("div",{class:Tr.contentBottom,hidden:!this.hasContentBottom},ke("slot",{name:Yn.contentBottom,onSlotchange:this.contentBottomSlotChangeHandler}))}renderContentTop(){return ke("div",{class:Tr.contentTop,hidden:!this.hasContentTop},ke("slot",{name:Yn.contentTop,onSlotchange:this.contentTopSlotChangeHandler}))}renderFab(){return ke("div",{class:Tr.fabContainer,hidden:!this.hasFab},ke("slot",{name:Yn.fab,onSlotchange:this.handleFabSlotChange}))}render(){const{disabled:e,loading:i,isClosed:s}=this,n=ke("article",{key:"0f439dffdca536eb6973ac386b0566091249aee3","aria-busy":Wo(i),class:Tr.container,hidden:s,ref:this.setContainerRef},this.renderHeaderNode(),this.renderContent(),this.renderContentBottom(),this.renderFooterNode(),ke("slot",{key:"alerts",name:Yn.alerts,onSlotchange:this.handleAlertsSlotChange}));return ke(Nr,{key:"6e5baec07ecb356871dea038ebc2d5ee2d8ed54f",onKeyDown:this.panelKeyDownHandler},ke(Ng,{key:"924cda1799b359f1bb3fb119cebfff5a7349b72d",disabled:e},i?ke("calcite-scrim",{loading:i}):null,n))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{closed:["toggleDialog"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return OSe}},[1,"calcite-panel",{beforeClose:[16],closed:[1540],disabled:[516],closable:[516],collapsed:[516],collapseDirection:[1,"collapse-direction"],collapsible:[516],headingLevel:[514,"heading-level"],loading:[516],heading:[1],description:[1],menuFlipPlacements:[16],menuOpen:[516,"menu-open"],menuPlacement:[513,"menu-placement"],messageOverrides:[1040],messages:[1040],overlayPositioning:[513,"overlay-positioning"],scale:[513],isClosed:[32],hasStartActions:[32],hasEndActions:[32],hasMenuItems:[32],hasHeaderContent:[32],hasActionBar:[32],hasContentBottom:[32],hasContentTop:[32],hasFab:[32],hasFooterActions:[32],hasFooterContent:[32],hasFooterEndContent:[32],hasFooterStartContent:[32],defaultMessages:[32],effectiveLocale:[32],showHeaderContent:[32],setFocus:[64],scrollContentTo:[64]},void 0,{closed:["toggleDialog"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function bre(){if(typeof customElements>"u")return;["calcite-panel","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-panel":customElements.get(e)||customElements.define(e,RSe);break;case"calcite-action":customElements.get(e)||sm();break;case"calcite-action-menu":customElements.get(e)||aC();break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break;case"calcite-popover":customElements.get(e)||ex();break;case"calcite-scrim":customElements.get(e)||rq();break}})}bre();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */var LSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xre={exports:{}};(function(t,e){(function(i,s){t.exports=s()})(LSe,function(){function i(X,H){var te=Object.keys(X);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(X);H&&(le=le.filter(function(he){return Object.getOwnPropertyDescriptor(X,he).enumerable})),te.push.apply(te,le)}return te}function s(X){for(var H=1;H<arguments.length;H++){var te=arguments[H]!=null?arguments[H]:{};H%2?i(Object(te),!0).forEach(function(le){c(X,le,te[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(te)):i(Object(te)).forEach(function(le){Object.defineProperty(X,le,Object.getOwnPropertyDescriptor(te,le))})}return X}function n(X){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},n(X)}function r(X,H){if(!(X instanceof H))throw new TypeError("Cannot call a class as a function")}function o(X,H){for(var te=0;te<H.length;te++){var le=H[te];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(X,A(le.key),le)}}function l(X,H,te){return H&&o(X.prototype,H),Object.defineProperty(X,"prototype",{writable:!1}),X}function c(X,H,te){return(H=A(H))in X?Object.defineProperty(X,H,{value:te,enumerable:!0,configurable:!0,writable:!0}):X[H]=te,X}function f(X,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(H&&H.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),H&&_(X,H)}function y(X){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(H){return H.__proto__||Object.getPrototypeOf(H)},y(X)}function _(X,H){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,le){return te.__proto__=le,te},_(X,H)}function x(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function S(X){var H=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var te,le=y(X);if(H){var he=y(this).constructor;te=Reflect.construct(le,arguments,he)}else te=le.apply(this,arguments);return function(be,Te){if(Te&&(typeof Te=="object"||typeof Te=="function"))return Te;if(Te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(be)}(this,te)}}function P(){return P=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(X,H,te){var le=function(be,Te){for(;!Object.prototype.hasOwnProperty.call(be,Te)&&(be=y(be))!==null;);return be}(X,H);if(le){var he=Object.getOwnPropertyDescriptor(le,H);return he.get?he.get.call(arguments.length<3?X:te):he.value}},P.apply(this,arguments)}function A(X){var H=function(te,le){if(typeof te!="object"||te===null)return te;var he=te[Symbol.toPrimitive];if(he!==void 0){var be=he.call(te,le);if(typeof be!="object")return be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(te)}(X,"string");return typeof H=="symbol"?H:H+""}var k=function(X){return!(!X||!X.Window)&&X instanceof X.Window},$=void 0,F=void 0;function G(X){$=X;var H=X.document.createTextNode("");H.ownerDocument!==X.document&&typeof X.wrap=="function"&&X.wrap(H)===H&&(X=X.wrap(X)),F=X}function V(X){return k(X)?X:(X.ownerDocument||X).defaultView||F.window}typeof window<"u"&&window&&G(window);var B=function(X){return!!X&&n(X)==="object"},W=function(X){return typeof X=="function"},J={window:function(X){return X===F||k(X)},docFrag:function(X){return B(X)&&X.nodeType===11},object:B,func:W,number:function(X){return typeof X=="number"},bool:function(X){return typeof X=="boolean"},string:function(X){return typeof X=="string"},element:function(X){if(!X||n(X)!=="object")return!1;var H=V(X)||F;return/object|function/.test(typeof Element>"u"?"undefined":n(Element))?X instanceof Element||X instanceof H.Element:X.nodeType===1&&typeof X.nodeName=="string"},plainObject:function(X){return B(X)&&!!X.constructor&&/function Object\b/.test(X.constructor.toString())},array:function(X){return B(X)&&X.length!==void 0&&W(X.splice)}};function re(X){var H=X.interaction;if(H.prepared.name==="drag"){var te=H.prepared.axis;te==="x"?(H.coords.cur.page.y=H.coords.start.page.y,H.coords.cur.client.y=H.coords.start.client.y,H.coords.velocity.client.y=0,H.coords.velocity.page.y=0):te==="y"&&(H.coords.cur.page.x=H.coords.start.page.x,H.coords.cur.client.x=H.coords.start.client.x,H.coords.velocity.client.x=0,H.coords.velocity.page.x=0)}}function se(X){var H=X.iEvent,te=X.interaction;if(te.prepared.name==="drag"){var le=te.prepared.axis;if(le==="x"||le==="y"){var he=le==="x"?"y":"x";H.page[he]=te.coords.start.page[he],H.client[he]=te.coords.start.client[he],H.delta[he]=0}}}var oe={id:"actions/drag",install:function(X){var H=X.actions,te=X.Interactable,le=X.defaults;te.prototype.draggable=oe.draggable,H.map.drag=oe,H.methodDict.drag="draggable",le.actions.drag=oe.defaults},listeners:{"interactions:before-action-move":re,"interactions:action-resume":re,"interactions:action-move":se,"auto-start:check":function(X){var H=X.interaction,te=X.interactable,le=X.buttons,he=te.options.drag;if(he&&he.enabled&&(!H.pointerIsDown||!/mouse|pointer/.test(H.pointerType)||(le&te.options.drag.mouseButtons)!=0))return X.action={name:"drag",axis:he.lockAxis==="start"?he.startAxis:he.lockAxis},!1}},draggable:function(X){return J.object(X)?(this.options.drag.enabled=X.enabled!==!1,this.setPerAction("drag",X),this.setOnEvents("drag",X),/^(xy|x|y|start)$/.test(X.lockAxis)&&(this.options.drag.lockAxis=X.lockAxis),/^(xy|x|y)$/.test(X.startAxis)&&(this.options.drag.startAxis=X.startAxis),this):J.bool(X)?(this.options.drag.enabled=X,this):this.options.drag},beforeMove:re,move:se,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(X){return X.search("drag")===0}},pe=oe,ue={init:function(X){var H=X;ue.document=H.document,ue.DocumentFragment=H.DocumentFragment||ce,ue.SVGElement=H.SVGElement||ce,ue.SVGSVGElement=H.SVGSVGElement||ce,ue.SVGElementInstance=H.SVGElementInstance||ce,ue.Element=H.Element||ce,ue.HTMLElement=H.HTMLElement||ue.Element,ue.Event=H.Event,ue.Touch=H.Touch||ce,ue.PointerEvent=H.PointerEvent||H.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function ce(){}var ne=ue,de={init:function(X){var H=ne.Element,te=X.navigator||{};de.supportsTouch="ontouchstart"in X||J.func(X.DocumentTouch)&&ne.document instanceof X.DocumentTouch,de.supportsPointerEvent=te.pointerEnabled!==!1&&!!ne.PointerEvent,de.isIOS=/iP(hone|od|ad)/.test(te.platform),de.isIOS7=/iP(hone|od|ad)/.test(te.platform)&&/OS 7[^\d]/.test(te.appVersion),de.isIe9=/MSIE 9/.test(te.userAgent),de.isOperaMobile=te.appName==="Opera"&&de.supportsTouch&&/Presto/.test(te.userAgent),de.prefixedMatchesSelector="matches"in H.prototype?"matches":"webkitMatchesSelector"in H.prototype?"webkitMatchesSelector":"mozMatchesSelector"in H.prototype?"mozMatchesSelector":"oMatchesSelector"in H.prototype?"oMatchesSelector":"msMatchesSelector",de.pEventTypes=de.supportsPointerEvent?ne.PointerEvent===X.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,de.wheelEvent=ne.document&&"onmousewheel"in ne.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},Se=de;function Pe(X,H){if(X.contains)return X.contains(H);for(;H;){if(H===X)return!0;H=H.parentNode}return!1}function Re(X,H){for(;J.element(X);){if(we(X,H))return X;X=Oe(X)}return null}function Oe(X){var H=X.parentNode;if(J.docFrag(H)){for(;(H=H.host)&&J.docFrag(H););return H}return H}function we(X,H){return F!==$&&(H=H.replace(/\/deep\//g," ")),X[Se.prefixedMatchesSelector](H)}var Fe=function(X){return X.parentNode||X.host};function it(X,H){for(var te,le=[],he=X;(te=Fe(he))&&he!==H&&te!==he.ownerDocument;)le.unshift(he),he=te;return le}function vt(X,H,te){for(;J.element(X);){if(we(X,H))return!0;if((X=Oe(X))===te)return we(X,H)}return!1}function ot(X){return X.correspondingUseElement||X}function ct(X){var H=X instanceof ne.SVGElement?X.getBoundingClientRect():X.getClientRects()[0];return H&&{left:H.left,right:H.right,top:H.top,bottom:H.bottom,width:H.width||H.right-H.left,height:H.height||H.bottom-H.top}}function Ct(X){var H,te=ct(X);if(!Se.isIOS7&&te){var le={x:(H=(H=V(X))||F).scrollX||H.document.documentElement.scrollLeft,y:H.scrollY||H.document.documentElement.scrollTop};te.left+=le.x,te.right+=le.x,te.top+=le.y,te.bottom+=le.y}return te}function qt(X){for(var H=[];X;)H.push(X),X=Oe(X);return H}function Lt(X){return!!J.string(X)&&(ne.document.querySelector(X),!0)}function Dt(X,H){for(var te in H)X[te]=H[te];return X}function Yi(X,H,te){return X==="parent"?Oe(te):X==="self"?H.getRect(te):Re(te,X)}function cs(X,H,te,le){var he=X;return J.string(he)?he=Yi(he,H,te):J.func(he)&&(he=he.apply(void 0,le)),J.element(he)&&(he=Ct(he)),he}function fn(X){return X&&{x:"x"in X?X.x:X.left,y:"y"in X?X.y:X.top}}function Us(X){return!X||"x"in X&&"y"in X||((X=Dt({},X)).x=X.left||0,X.y=X.top||0,X.width=X.width||(X.right||0)-X.x,X.height=X.height||(X.bottom||0)-X.y),X}function hr(X,H,te){X.left&&(H.left+=te.x),X.right&&(H.right+=te.x),X.top&&(H.top+=te.y),X.bottom&&(H.bottom+=te.y),H.width=H.right-H.left,H.height=H.bottom-H.top}function oo(X,H,te){var le=te&&X.options[te];return fn(cs(le&&le.origin||X.options.origin,X,H,[X&&H]))||{x:0,y:0}}function ss(X,H){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function($e){return!0},le=arguments.length>3?arguments[3]:void 0;if(le=le||{},J.string(X)&&X.search(" ")!==-1&&(X=ye(X)),J.array(X))return X.forEach(function($e){return ss($e,H,te,le)}),le;if(J.object(X)&&(H=X,X=""),J.func(H)&&te(X))le[X]=le[X]||[],le[X].push(H);else if(J.array(H))for(var he=0,be=H;he<be.length;he++){var Te=be[he];ss(X,Te,te,le)}else if(J.object(H))for(var Me in H)ss(ye(Me).map(function($e){return"".concat(X).concat($e)}),H[Me],te,le);return le}function ye(X){return X.trim().split(/ +/)}var Fi=function(X,H){return Math.sqrt(X*X+H*H)},xr=["webkit","moz"];function ri(X,H){X.__set||(X.__set={});var te=function(he){if(xr.some(function(be){return he.indexOf(be)===0}))return 1;typeof X[he]!="function"&&he!=="__set"&&Object.defineProperty(X,he,{get:function(){return he in X.__set?X.__set[he]:X.__set[he]=H[he]},set:function(be){X.__set[he]=be},configurable:!0})};for(var le in H)te(le);return X}function Ai(X,H){X.page=X.page||{},X.page.x=H.page.x,X.page.y=H.page.y,X.client=X.client||{},X.client.x=H.client.x,X.client.y=H.client.y,X.timeStamp=H.timeStamp}function pn(X){X.page.x=0,X.page.y=0,X.client.x=0,X.client.y=0}function ms(X){return X instanceof ne.Event||X instanceof ne.Touch}function Zi(X,H,te){return X=X||"page",(te=te||{}).x=H[X+"X"],te.y=H[X+"Y"],te}function tn(X,H){return H=H||{x:0,y:0},Se.isOperaMobile&&ms(X)?(Zi("screen",X,H),H.x+=window.scrollX,H.y+=window.scrollY):Zi("page",X,H),H}function mn(X){return J.number(X.pointerId)?X.pointerId:X.identifier}function jr(X,H,te){var le=H.length>1?xt(H):H[0];tn(le,X.page),function(he,be){be=be||{},Se.isOperaMobile&&ms(he)?Zi("screen",he,be):Zi("client",he,be)}(le,X.client),X.timeStamp=te}function Cs(X){var H=[];return J.array(X)?(H[0]=X[0],H[1]=X[1]):X.type==="touchend"?X.touches.length===1?(H[0]=X.touches[0],H[1]=X.changedTouches[0]):X.touches.length===0&&(H[0]=X.changedTouches[0],H[1]=X.changedTouches[1]):(H[0]=X.touches[0],H[1]=X.touches[1]),H}function xt(X){for(var H={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},te=0;te<X.length;te++){var le=X[te];for(var he in H)H[he]+=le[he]}for(var be in H)H[be]/=X.length;return H}function Ys(X){if(!X.length)return null;var H=Cs(X),te=Math.min(H[0].pageX,H[1].pageX),le=Math.min(H[0].pageY,H[1].pageY),he=Math.max(H[0].pageX,H[1].pageX),be=Math.max(H[0].pageY,H[1].pageY);return{x:te,y:le,left:te,top:le,right:he,bottom:be,width:he-te,height:be-le}}function m(X,H){var te=H+"X",le=H+"Y",he=Cs(X),be=he[0][te]-he[1][te],Te=he[0][le]-he[1][le];return Fi(be,Te)}function j(X,H){var te=H+"X",le=H+"Y",he=Cs(X),be=he[1][te]-he[0][te],Te=he[1][le]-he[0][le];return 180*Math.atan2(Te,be)/Math.PI}function T(X){return J.string(X.pointerType)?X.pointerType:J.number(X.pointerType)?[void 0,void 0,"touch","pen","mouse"][X.pointerType]:/touch/.test(X.type||"")||X instanceof ne.Touch?"touch":"mouse"}function p(X){var H=J.func(X.composedPath)?X.composedPath():X.path;return[ot(H?H[0]:X.target),ot(X.currentTarget)]}var h=function(){function X(H){r(this,X),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=H}return l(X,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),X}();Object.defineProperty(h.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var a=function(X,H){for(var te=0;te<H.length;te++){var le=H[te];X.push(le)}return X},u=function(X){return a([],X)},d=function(X,H){for(var te=0;te<X.length;te++)if(H(X[te],te,X))return te;return-1},g=function(X,H){return X[d(X,H)]},v=function(X){f(te,X);var H=S(te);function te(le,he,be){var Te;r(this,te),(Te=H.call(this,he._interaction)).dropzone=void 0,Te.dragEvent=void 0,Te.relatedTarget=void 0,Te.draggable=void 0,Te.propagationStopped=!1,Te.immediatePropagationStopped=!1;var Me=be==="dragleave"?le.prev:le.cur,$e=Me.element,je=Me.dropzone;return Te.type=be,Te.target=$e,Te.currentTarget=$e,Te.dropzone=je,Te.dragEvent=he,Te.relatedTarget=he.target,Te.draggable=he.interactable,Te.timeStamp=he.timeStamp,Te}return l(te,[{key:"reject",value:function(){var le=this,he=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&he.cur.dropzone===this.dropzone&&he.cur.element===this.target)if(he.prev.dropzone=this.dropzone,he.prev.element=this.target,he.rejected=!0,he.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var be=he.activeDrops,Te=d(be,function($e){var je=$e.dropzone,Le=$e.element;return je===le.dropzone&&Le===le.target});he.activeDrops.splice(Te,1);var Me=new te(he,this.dragEvent,"dropdeactivate");Me.dropzone=this.dropzone,Me.target=this.target,this.dropzone.fire(Me)}else this.dropzone.fire(new te(he,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),te}(h);function b(X,H){for(var te=0,le=X.slice();te<le.length;te++){var he=le[te],be=he.dropzone,Te=he.element;H.dropzone=be,H.target=Te,be.fire(H),H.propagationStopped=H.immediatePropagationStopped=!1}}function C(X,H){for(var te=function(be,Te){for(var Me=[],$e=0,je=be.interactables.list;$e<je.length;$e++){var Le=je[$e];if(Le.options.drop.enabled){var Ke=Le.options.drop.accept;if(!(J.element(Ke)&&Ke!==Te||J.string(Ke)&&!we(Te,Ke)||J.func(Ke)&&!Ke({dropzone:Le,draggableElement:Te})))for(var ft=0,Mt=Le.getAllElements();ft<Mt.length;ft++){var Tt=Mt[ft];Tt!==Te&&Me.push({dropzone:Le,element:Tt,rect:Le.getRect(Tt)})}}}return Me}(X,H),le=0;le<te.length;le++){var he=te[le];he.rect=he.dropzone.getRect(he.element)}return te}function M(X,H,te){for(var le=X.dropState,he=X.interactable,be=X.element,Te=[],Me=0,$e=le.activeDrops;Me<$e.length;Me++){var je=$e[Me],Le=je.dropzone,Ke=je.element,ft=je.rect,Mt=Le.dropCheck(H,te,he,be,Ke,ft);Te.push(Mt?Ke:null)}var Tt=function(Rt){for(var Xt,Vt,ai,Ii=[],Ji=0;Ji<Rt.length;Ji++){var Si=Rt[Ji],Pi=Rt[Xt];if(Si&&Ji!==Xt)if(Pi){var wr=Fe(Si),gn=Fe(Pi);if(wr!==Si.ownerDocument)if(gn!==Si.ownerDocument)if(wr!==gn){Ii=Ii.length?Ii:it(Pi);var Ta=void 0;if(Pi instanceof ne.HTMLElement&&Si instanceof ne.SVGElement&&!(Si instanceof ne.SVGSVGElement)){if(Si===gn)continue;Ta=Si.ownerSVGElement}else Ta=Si;for(var ao=it(Ta,Pi.ownerDocument),Wu=0;ao[Wu]&&ao[Wu]===Ii[Wu];)Wu++;var r1=[ao[Wu-1],ao[Wu],Ii[Wu]];if(r1[0])for(var Cm=r1[0].lastChild;Cm;){if(Cm===r1[1]){Xt=Ji,Ii=ao;break}if(Cm===r1[2])break;Cm=Cm.previousSibling}}else ai=Pi,(parseInt(V(Vt=Si).getComputedStyle(Vt).zIndex,10)||0)>=(parseInt(V(ai).getComputedStyle(ai).zIndex,10)||0)&&(Xt=Ji);else Xt=Ji}else Xt=Ji}return Xt}(Te);return le.activeDrops[Tt]||null}function O(X,H,te){var le=X.dropState,he={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return te.type==="dragstart"&&(he.activate=new v(le,te,"dropactivate"),he.activate.target=null,he.activate.dropzone=null),te.type==="dragend"&&(he.deactivate=new v(le,te,"dropdeactivate"),he.deactivate.target=null,he.deactivate.dropzone=null),le.rejected||(le.cur.element!==le.prev.element&&(le.prev.dropzone&&(he.leave=new v(le,te,"dragleave"),te.dragLeave=he.leave.target=le.prev.element,te.prevDropzone=he.leave.dropzone=le.prev.dropzone),le.cur.dropzone&&(he.enter=new v(le,te,"dragenter"),te.dragEnter=le.cur.element,te.dropzone=le.cur.dropzone)),te.type==="dragend"&&le.cur.dropzone&&(he.drop=new v(le,te,"drop"),te.dropzone=le.cur.dropzone,te.relatedTarget=le.cur.element),te.type==="dragmove"&&le.cur.dropzone&&(he.move=new v(le,te,"dropmove"),te.dropzone=le.cur.dropzone)),he}function L(X,H){var te=X.dropState,le=te.activeDrops,he=te.cur,be=te.prev;H.leave&&be.dropzone.fire(H.leave),H.enter&&he.dropzone.fire(H.enter),H.move&&he.dropzone.fire(H.move),H.drop&&he.dropzone.fire(H.drop),H.deactivate&&b(le,H.deactivate),te.prev.dropzone=he.dropzone,te.prev.element=he.element}function q(X,H){var te=X.interaction,le=X.iEvent,he=X.event;if(le.type==="dragmove"||le.type==="dragend"){var be=te.dropState;H.dynamicDrop&&(be.activeDrops=C(H,te.element));var Te=le,Me=M(te,Te,he);be.rejected=be.rejected&&!!Me&&Me.dropzone===be.cur.dropzone&&Me.element===be.cur.element,be.cur.dropzone=Me&&Me.dropzone,be.cur.element=Me&&Me.element,be.events=O(te,0,Te)}}var U={id:"actions/drop",install:function(X){var H=X.actions,te=X.interactStatic,le=X.Interactable,he=X.defaults;X.usePlugin(pe),le.prototype.dropzone=function(be){return function(Te,Me){if(J.object(Me)){if(Te.options.drop.enabled=Me.enabled!==!1,Me.listeners){var $e=ss(Me.listeners),je=Object.keys($e).reduce(function(Ke,ft){return Ke[/^(enter|leave)/.test(ft)?"drag".concat(ft):/^(activate|deactivate|move)/.test(ft)?"drop".concat(ft):ft]=$e[ft],Ke},{}),Le=Te.options.drop.listeners;Le&&Te.off(Le),Te.on(je),Te.options.drop.listeners=je}return J.func(Me.ondrop)&&Te.on("drop",Me.ondrop),J.func(Me.ondropactivate)&&Te.on("dropactivate",Me.ondropactivate),J.func(Me.ondropdeactivate)&&Te.on("dropdeactivate",Me.ondropdeactivate),J.func(Me.ondragenter)&&Te.on("dragenter",Me.ondragenter),J.func(Me.ondragleave)&&Te.on("dragleave",Me.ondragleave),J.func(Me.ondropmove)&&Te.on("dropmove",Me.ondropmove),/^(pointer|center)$/.test(Me.overlap)?Te.options.drop.overlap=Me.overlap:J.number(Me.overlap)&&(Te.options.drop.overlap=Math.max(Math.min(1,Me.overlap),0)),"accept"in Me&&(Te.options.drop.accept=Me.accept),"checker"in Me&&(Te.options.drop.checker=Me.checker),Te}return J.bool(Me)?(Te.options.drop.enabled=Me,Te):Te.options.drop}(this,be)},le.prototype.dropCheck=function(be,Te,Me,$e,je,Le){return function(Ke,ft,Mt,Tt,Rt,Xt,Vt){var ai=!1;if(!(Vt=Vt||Ke.getRect(Xt)))return!!Ke.options.drop.checker&&Ke.options.drop.checker(ft,Mt,ai,Ke,Xt,Tt,Rt);var Ii=Ke.options.drop.overlap;if(Ii==="pointer"){var Ji=oo(Tt,Rt,"drag"),Si=tn(ft);Si.x+=Ji.x,Si.y+=Ji.y;var Pi=Si.x>Vt.left&&Si.x<Vt.right,wr=Si.y>Vt.top&&Si.y<Vt.bottom;ai=Pi&&wr}var gn=Tt.getRect(Rt);if(gn&&Ii==="center"){var Ta=gn.left+gn.width/2,ao=gn.top+gn.height/2;ai=Ta>=Vt.left&&Ta<=Vt.right&&ao>=Vt.top&&ao<=Vt.bottom}return gn&&J.number(Ii)&&(ai=Math.max(0,Math.min(Vt.right,gn.right)-Math.max(Vt.left,gn.left))*Math.max(0,Math.min(Vt.bottom,gn.bottom)-Math.max(Vt.top,gn.top))/(gn.width*gn.height)>=Ii),Ke.options.drop.checker&&(ai=Ke.options.drop.checker(ft,Mt,ai,Ke,Xt,Tt,Rt)),ai}(this,be,Te,Me,$e,je,Le)},te.dynamicDrop=function(be){return J.bool(be)?(X.dynamicDrop=be,te):X.dynamicDrop},Dt(H.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),H.methodDict.drop="dropzone",X.dynamicDrop=!1,he.actions.drop=U.defaults},listeners:{"interactions:before-action-start":function(X){var H=X.interaction;H.prepared.name==="drag"&&(H.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(X,H){var te=X.interaction,le=X.iEvent;if(te.prepared.name==="drag"){var he=te.dropState;he.activeDrops=[],he.events={},he.activeDrops=C(H,te.element),he.events=O(te,0,le),he.events.activate&&(b(he.activeDrops,he.events.activate),H.fire("actions/drop:start",{interaction:te,dragEvent:le}))}},"interactions:action-move":q,"interactions:after-action-move":function(X,H){var te=X.interaction,le=X.iEvent;if(te.prepared.name==="drag"){var he=te.dropState;L(te,he.events),H.fire("actions/drop:move",{interaction:te,dragEvent:le}),he.events={}}},"interactions:action-end":function(X,H){if(X.interaction.prepared.name==="drag"){var te=X.interaction,le=X.iEvent;q(X,H),L(te,te.dropState.events),H.fire("actions/drop:end",{interaction:te,dragEvent:le})}},"interactions:stop":function(X){var H=X.interaction;if(H.prepared.name==="drag"){var te=H.dropState;te&&(te.activeDrops=null,te.events=null,te.cur.dropzone=null,te.cur.element=null,te.prev.dropzone=null,te.prev.element=null,te.rejected=!1)}}},getActiveDrops:C,getDrop:M,getDropEvents:O,fireDropEvents:L,filterEventType:function(X){return X.search("drag")===0||X.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},ee=U;function Q(X){var H=X.interaction,te=X.iEvent,le=X.phase;if(H.prepared.name==="gesture"){var he=H.pointers.map(function(je){return je.pointer}),be=le==="start",Te=le==="end",Me=H.interactable.options.deltaSource;if(te.touches=[he[0],he[1]],be)te.distance=m(he,Me),te.box=Ys(he),te.scale=1,te.ds=0,te.angle=j(he,Me),te.da=0,H.gesture.startDistance=te.distance,H.gesture.startAngle=te.angle;else if(Te||H.pointers.length<2){var $e=H.prevEvent;te.distance=$e.distance,te.box=$e.box,te.scale=$e.scale,te.ds=0,te.angle=$e.angle,te.da=0}else te.distance=m(he,Me),te.box=Ys(he),te.scale=te.distance/H.gesture.startDistance,te.angle=j(he,Me),te.ds=te.scale-H.gesture.scale,te.da=te.angle-H.gesture.angle;H.gesture.distance=te.distance,H.gesture.angle=te.angle,J.number(te.scale)&&te.scale!==1/0&&!isNaN(te.scale)&&(H.gesture.scale=te.scale)}}var ge={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(X){var H=X.actions,te=X.Interactable,le=X.defaults;te.prototype.gesturable=function(he){return J.object(he)?(this.options.gesture.enabled=he.enabled!==!1,this.setPerAction("gesture",he),this.setOnEvents("gesture",he),this):J.bool(he)?(this.options.gesture.enabled=he,this):this.options.gesture},H.map.gesture=ge,H.methodDict.gesture="gesturable",le.actions.gesture=ge.defaults},listeners:{"interactions:action-start":Q,"interactions:action-move":Q,"interactions:action-end":Q,"interactions:new":function(X){X.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(X){if(!(X.interaction.pointers.length<2)){var H=X.interactable.options.gesture;if(H&&H.enabled)return X.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(X){return X.search("gesture")===0}},ve=ge;function fe(X,H,te,le,he,be,Te){if(!H)return!1;if(H===!0){var Me=J.number(be.width)?be.width:be.right-be.left,$e=J.number(be.height)?be.height:be.bottom-be.top;if(Te=Math.min(Te,Math.abs((X==="left"||X==="right"?Me:$e)/2)),Me<0&&(X==="left"?X="right":X==="right"&&(X="left")),$e<0&&(X==="top"?X="bottom":X==="bottom"&&(X="top")),X==="left"){var je=Me>=0?be.left:be.right;return te.x<je+Te}if(X==="top"){var Le=$e>=0?be.top:be.bottom;return te.y<Le+Te}if(X==="right")return te.x>(Me>=0?be.right:be.left)-Te;if(X==="bottom")return te.y>($e>=0?be.bottom:be.top)-Te}return!!J.element(le)&&(J.element(H)?H===le:vt(le,H,he))}function Ce(X){var H=X.iEvent,te=X.interaction;if(te.prepared.name==="resize"&&te.resizeAxes){var le=H;te.interactable.options.resize.square?(te.resizeAxes==="y"?le.delta.x=le.delta.y:le.delta.y=le.delta.x,le.axes="xy"):(le.axes=te.resizeAxes,te.resizeAxes==="x"?le.delta.y=0:te.resizeAxes==="y"&&(le.delta.x=0))}}var Ie,Ne,Ve={id:"actions/resize",before:["actions/drag"],install:function(X){var H=X.actions,te=X.browser,le=X.Interactable,he=X.defaults;Ve.cursors=function(be){return be.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(te),Ve.defaultMargin=te.supportsTouch||te.supportsPointerEvent?20:10,le.prototype.resizable=function(be){return function(Te,Me,$e){return J.object(Me)?(Te.options.resize.enabled=Me.enabled!==!1,Te.setPerAction("resize",Me),Te.setOnEvents("resize",Me),J.string(Me.axis)&&/^x$|^y$|^xy$/.test(Me.axis)?Te.options.resize.axis=Me.axis:Me.axis===null&&(Te.options.resize.axis=$e.defaults.actions.resize.axis),J.bool(Me.preserveAspectRatio)?Te.options.resize.preserveAspectRatio=Me.preserveAspectRatio:J.bool(Me.square)&&(Te.options.resize.square=Me.square),Te):J.bool(Me)?(Te.options.resize.enabled=Me,Te):Te.options.resize}(this,be,X)},H.map.resize=Ve,H.methodDict.resize="resizable",he.actions.resize=Ve.defaults},listeners:{"interactions:new":function(X){X.interaction.resizeAxes="xy"},"interactions:action-start":function(X){(function(H){var te=H.iEvent,le=H.interaction;if(le.prepared.name==="resize"&&le.prepared.edges){var he=te,be=le.rect;le._rects={start:Dt({},be),corrected:Dt({},be),previous:Dt({},be),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},he.edges=le.prepared.edges,he.rect=le._rects.corrected,he.deltaRect=le._rects.delta}})(X),Ce(X)},"interactions:action-move":function(X){(function(H){var te=H.iEvent,le=H.interaction;if(le.prepared.name==="resize"&&le.prepared.edges){var he=te,be=le.interactable.options.resize.invert,Te=be==="reposition"||be==="negate",Me=le.rect,$e=le._rects,je=$e.start,Le=$e.corrected,Ke=$e.delta,ft=$e.previous;if(Dt(ft,Le),Te){if(Dt(Le,Me),be==="reposition"){if(Le.top>Le.bottom){var Mt=Le.top;Le.top=Le.bottom,Le.bottom=Mt}if(Le.left>Le.right){var Tt=Le.left;Le.left=Le.right,Le.right=Tt}}}else Le.top=Math.min(Me.top,je.bottom),Le.bottom=Math.max(Me.bottom,je.top),Le.left=Math.min(Me.left,je.right),Le.right=Math.max(Me.right,je.left);for(var Rt in Le.width=Le.right-Le.left,Le.height=Le.bottom-Le.top,Le)Ke[Rt]=Le[Rt]-ft[Rt];he.edges=le.prepared.edges,he.rect=Le,he.deltaRect=Ke}})(X),Ce(X)},"interactions:action-end":function(X){var H=X.iEvent,te=X.interaction;if(te.prepared.name==="resize"&&te.prepared.edges){var le=H;le.edges=te.prepared.edges,le.rect=te._rects.corrected,le.deltaRect=te._rects.delta}},"auto-start:check":function(X){var H=X.interaction,te=X.interactable,le=X.element,he=X.rect,be=X.buttons;if(he){var Te=Dt({},H.coords.cur.page),Me=te.options.resize;if(Me&&Me.enabled&&(!H.pointerIsDown||!/mouse|pointer/.test(H.pointerType)||(be&Me.mouseButtons)!=0)){if(J.object(Me.edges)){var $e={left:!1,right:!1,top:!1,bottom:!1};for(var je in $e)$e[je]=fe(je,Me.edges[je],Te,H._latestPointer.eventTarget,le,he,Me.margin||Ve.defaultMargin);$e.left=$e.left&&!$e.right,$e.top=$e.top&&!$e.bottom,($e.left||$e.right||$e.top||$e.bottom)&&(X.action={name:"resize",edges:$e})}else{var Le=Me.axis!=="y"&&Te.x>he.right-Ve.defaultMargin,Ke=Me.axis!=="x"&&Te.y>he.bottom-Ve.defaultMargin;(Le||Ke)&&(X.action={name:"resize",axes:(Le?"x":"")+(Ke?"y":"")})}return!X.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(X){var H=X.edges,te=X.axis,le=X.name,he=Ve.cursors,be=null;if(te)be=he[le+te];else if(H){for(var Te="",Me=0,$e=["top","bottom","left","right"];Me<$e.length;Me++){var je=$e[Me];H[je]&&(Te+=je)}be=he[Te]}return be},filterEventType:function(X){return X.search("resize")===0},defaultMargin:null},Xe=Ve,et={id:"actions",install:function(X){X.usePlugin(ve),X.usePlugin(Xe),X.usePlugin(pe),X.usePlugin(ee)}},dt=0,ut={request:function(X){return Ie(X)},cancel:function(X){return Ne(X)},init:function(X){if(Ie=X.requestAnimationFrame,Ne=X.cancelAnimationFrame,!Ie)for(var H=["ms","moz","webkit","o"],te=0;te<H.length;te++){var le=H[te];Ie=X["".concat(le,"RequestAnimationFrame")],Ne=X["".concat(le,"CancelAnimationFrame")]||X["".concat(le,"CancelRequestAnimationFrame")]}Ie=Ie&&Ie.bind(X),Ne=Ne&&Ne.bind(X),Ie||(Ie=function(he){var be=Date.now(),Te=Math.max(0,16-(be-dt)),Me=X.setTimeout(function(){he(be+Te)},Te);return dt=be+Te,Me},Ne=function(he){return clearTimeout(he)})}},mt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(X){mt.isScrolling=!0,ut.cancel(mt.i),X.autoScroll=mt,mt.interaction=X,mt.prevTime=mt.now(),mt.i=ut.request(mt.scroll)},stop:function(){mt.isScrolling=!1,mt.interaction&&(mt.interaction.autoScroll=null),ut.cancel(mt.i)},scroll:function(){var X=mt.interaction,H=X.interactable,te=X.element,le=X.prepared.name,he=H.options[le].autoScroll,be=lt(he.container,H,te),Te=mt.now(),Me=(Te-mt.prevTime)/1e3,$e=he.speed*Me;if($e>=1){var je={x:mt.x*$e,y:mt.y*$e};if(je.x||je.y){var Le=gi(be);J.window(be)?be.scrollBy(je.x,je.y):be&&(be.scrollLeft+=je.x,be.scrollTop+=je.y);var Ke=gi(be),ft={x:Ke.x-Le.x,y:Ke.y-Le.y};(ft.x||ft.y)&&H.fire({type:"autoscroll",target:te,interactable:H,delta:ft,interaction:X,container:be})}mt.prevTime=Te}mt.isScrolling&&(ut.cancel(mt.i),mt.i=ut.request(mt.scroll))},check:function(X,H){var te;return(te=X.options[H].autoScroll)==null?void 0:te.enabled},onInteractionMove:function(X){var H=X.interaction,te=X.pointer;if(H.interacting()&&mt.check(H.interactable,H.prepared.name))if(H.simulation)mt.x=mt.y=0;else{var le,he,be,Te,Me=H.interactable,$e=H.element,je=H.prepared.name,Le=Me.options[je].autoScroll,Ke=lt(Le.container,Me,$e);if(J.window(Ke))Te=te.clientX<mt.margin,le=te.clientY<mt.margin,he=te.clientX>Ke.innerWidth-mt.margin,be=te.clientY>Ke.innerHeight-mt.margin;else{var ft=ct(Ke);Te=te.clientX<ft.left+mt.margin,le=te.clientY<ft.top+mt.margin,he=te.clientX>ft.right-mt.margin,be=te.clientY>ft.bottom-mt.margin}mt.x=he?1:Te?-1:0,mt.y=be?1:le?-1:0,mt.isScrolling||(mt.margin=Le.margin,mt.speed=Le.speed,mt.start(H))}}};function lt(X,H,te){return(J.string(X)?Yi(X,H,te):X)||V(te)}function gi(X){return J.window(X)&&(X=window.document.body),{x:X.scrollLeft,y:X.scrollTop}}var oi={id:"auto-scroll",install:function(X){var H=X.defaults,te=X.actions;X.autoScroll=mt,mt.now=function(){return X.now()},te.phaselessTypes.autoscroll=!0,H.perAction.autoScroll=mt.defaults},listeners:{"interactions:new":function(X){X.interaction.autoScroll=null},"interactions:destroy":function(X){X.interaction.autoScroll=null,mt.stop(),mt.interaction&&(mt.interaction=null)},"interactions:stop":mt.stop,"interactions:action-move":function(X){return mt.onInteractionMove(X)}}},Ni=oi;function Ki(X,H){var te=!1;return function(){return te||(F.console.warn(H),te=!0),X.apply(this,arguments)}}function _s(X,H){return X.name=H.name,X.axis=H.axis,X.edges=H.edges,X}function as(X){return J.bool(X)?(this.options.styleCursor=X,this):X===null?(delete this.options.styleCursor,this):this.options.styleCursor}function $i(X){return J.func(X)?(this.options.actionChecker=X,this):X===null?(delete this.options.actionChecker,this):this.options.actionChecker}var ci={id:"auto-start/interactableMethods",install:function(X){var H=X.Interactable;H.prototype.getAction=function(te,le,he,be){var Te=function(Me,$e,je,Le,Ke){var ft=Me.getRect(Le),Mt=$e.buttons||{0:1,1:4,3:8,4:16}[$e.button],Tt={action:null,interactable:Me,interaction:je,element:Le,rect:ft,buttons:Mt};return Ke.fire("auto-start:check",Tt),Tt.action}(this,le,he,be,X);return this.options.actionChecker?this.options.actionChecker(te,le,Te,this,be,he):Te},H.prototype.ignoreFrom=Ki(function(te){return this._backCompatOption("ignoreFrom",te)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),H.prototype.allowFrom=Ki(function(te){return this._backCompatOption("allowFrom",te)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),H.prototype.actionChecker=$i,H.prototype.styleCursor=as}};function Kt(X,H,te,le,he){return H.testIgnoreAllow(H.options[X.name],te,le)&&H.options[X.name].enabled&&wi(H,te,X,he)?X:null}function Xs(X,H,te,le,he,be,Te){for(var Me=0,$e=le.length;Me<$e;Me++){var je=le[Me],Le=he[Me],Ke=je.getAction(H,te,X,Le);if(Ke){var ft=Kt(Ke,je,Le,be,Te);if(ft)return{action:ft,interactable:je,element:Le}}}return{action:null,interactable:null,element:null}}function Ps(X,H,te,le,he){var be=[],Te=[],Me=le;function $e(Le){be.push(Le),Te.push(Me)}for(;J.element(Me);){be=[],Te=[],he.interactables.forEachMatch(Me,$e);var je=Xs(X,H,te,be,Te,le,he);if(je.action&&!je.interactable.options[je.action.name].manualStart)return je;Me=Oe(Me)}return{action:null,interactable:null,element:null}}function Qn(X,H,te){var le=H.action,he=H.interactable,be=H.element;le=le||{name:null},X.interactable=he,X.element=be,_s(X.prepared,le),X.rect=he&&le.name?he.getRect(be):null,dr(X,te),te.fire("autoStart:prepared",{interaction:X})}function wi(X,H,te,le){var he=X.options,be=he[te.name].max,Te=he[te.name].maxPerElement,Me=le.autoStart.maxInteractions,$e=0,je=0,Le=0;if(!(be&&Te&&Me))return!1;for(var Ke=0,ft=le.interactions.list;Ke<ft.length;Ke++){var Mt=ft[Ke],Tt=Mt.prepared.name;if(Mt.interacting()&&(++$e>=Me||Mt.interactable===X&&((je+=Tt===te.name?1:0)>=be||Mt.element===H&&(Le++,Tt===te.name&&Le>=Te))))return!1}return Me>0}function sn(X,H){return J.number(X)?(H.autoStart.maxInteractions=X,this):H.autoStart.maxInteractions}function ns(X,H,te){var le=te.autoStart.cursorElement;le&&le!==X&&(le.style.cursor=""),X.ownerDocument.documentElement.style.cursor=H,X.style.cursor=H,te.autoStart.cursorElement=H?X:null}function dr(X,H){var te=X.interactable,le=X.element,he=X.prepared;if(X.pointerType==="mouse"&&te&&te.options.styleCursor){var be="";if(he.name){var Te=te.options[he.name].cursorChecker;be=J.func(Te)?Te(he,te,le,X._interacting):H.actions.map[he.name].getCursor(he)}ns(X.element,be||"",H)}else H.autoStart.cursorElement&&ns(H.autoStart.cursorElement,"",H)}var Jc={id:"auto-start/base",before:["actions"],install:function(X){var H=X.interactStatic,te=X.defaults;X.usePlugin(ci),te.base.actionChecker=null,te.base.styleCursor=!0,Dt(te.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),H.maxInteractions=function(le){return sn(le,X)},X.autoStart={maxInteractions:1/0,withinInteractionLimit:wi,cursorElement:null}},listeners:{"interactions:down":function(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget;te.interacting()||Qn(te,Ps(te,le,he,be,H),H)},"interactions:move":function(X,H){(function(te,le){var he=te.interaction,be=te.pointer,Te=te.event,Me=te.eventTarget;he.pointerType!=="mouse"||he.pointerIsDown||he.interacting()||Qn(he,Ps(he,be,Te,Me,le),le)})(X,H),function(te,le){var he=te.interaction;if(he.pointerIsDown&&!he.interacting()&&he.pointerWasMoved&&he.prepared.name){le.fire("autoStart:before-start",te);var be=he.interactable,Te=he.prepared.name;Te&&be&&(be.options[Te].manualStart||!wi(be,he.element,he.prepared,le)?he.stop():(he.start(he.prepared,be,he.element),dr(he,le)))}}(X,H)},"interactions:stop":function(X,H){var te=X.interaction,le=te.interactable;le&&le.options.styleCursor&&ns(te.element,"",H)}},maxInteractions:sn,withinInteractionLimit:wi,validateAction:Kt},Yu=Jc,ze={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(X,H){var te=X.interaction,le=X.eventTarget,he=X.dx,be=X.dy;if(te.prepared.name==="drag"){var Te=Math.abs(he),Me=Math.abs(be),$e=te.interactable.options.drag,je=$e.startAxis,Le=Te>Me?"x":Te<Me?"y":"xy";if(te.prepared.axis=$e.lockAxis==="start"?Le[0]:$e.lockAxis,Le!=="xy"&&je!=="xy"&&je!==Le){te.prepared.name=null;for(var Ke=le,ft=function(Tt){if(Tt!==te.interactable){var Rt=te.interactable.options.drag;if(!Rt.manualStart&&Tt.testIgnoreAllow(Rt,Ke,le)){var Xt=Tt.getAction(te.downPointer,te.downEvent,te,Ke);if(Xt&&Xt.name==="drag"&&function(Vt,ai){if(!ai)return!1;var Ii=ai.options.drag.startAxis;return Vt==="xy"||Ii==="xy"||Ii===Vt}(Le,Tt)&&Yu.validateAction(Xt,Tt,Ke,le,H))return Tt}}};J.element(Ke);){var Mt=H.interactables.forEachMatch(Ke,ft);if(Mt){te.prepared.name="drag",te.interactable=Mt,te.element=Ke;break}Ke=Oe(Ke)}}}}}};function pt(X){var H=X.prepared&&X.prepared.name;if(!H)return null;var te=X.interactable.options;return te[H].hold||te[H].delay}var Pt={id:"auto-start/hold",install:function(X){var H=X.defaults;X.usePlugin(Yu),H.perAction.hold=0,H.perAction.delay=0},listeners:{"interactions:new":function(X){X.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(X){var H=X.interaction,te=pt(H);te>0&&(H.autoStartHoldTimer=setTimeout(function(){H.start(H.prepared,H.interactable,H.element)},te))},"interactions:move":function(X){var H=X.interaction,te=X.duplicate;H.autoStartHoldTimer&&H.pointerWasMoved&&!te&&(clearTimeout(H.autoStartHoldTimer),H.autoStartHoldTimer=null)},"autoStart:before-start":function(X){var H=X.interaction;pt(H)>0&&(H.prepared.name=null)}},getHoldDuration:pt},ei=Pt,Os={id:"auto-start",install:function(X){X.usePlugin(Yu),X.usePlugin(ei),X.usePlugin(ze)}},kn=function(X){return/^(always|never|auto)$/.test(X)?(this.options.preventDefault=X,this):J.bool(X)?(this.options.preventDefault=X?"always":"never",this):this.options.preventDefault};function Nn(X){var H=X.interaction,te=X.event;H.interactable&&H.interactable.checkAndPreventDefault(te)}var Br={id:"core/interactablePreventDefault",install:function(X){var H=X.Interactable;H.prototype.preventDefault=kn,H.prototype.checkAndPreventDefault=function(te){return function(le,he,be){var Te=le.options.preventDefault;if(Te!=="never")if(Te!=="always"){if(he.events.supportsPassive&&/^touch(start|move)$/.test(be.type)){var Me=V(be.target).document,$e=he.getDocOptions(Me);if(!$e||!$e.events||$e.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(be.type)||J.element(be.target)&&we(be.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||be.preventDefault()}else be.preventDefault()}(this,X,te)},X.interactions.docEvents.push({type:"dragstart",listener:function(te){for(var le=0,he=X.interactions.list;le<he.length;le++){var be=he[le];if(be.element&&(be.element===te.target||Pe(be.element,te.target)))return void be.interactable.checkAndPreventDefault(te)}}})},listeners:["down","move","up","cancel"].reduce(function(X,H){return X["interactions:".concat(H)]=Nn,X},{})};function If(X,H){if(H.phaselessTypes[X])return!0;for(var te in H.map)if(X.indexOf(te)===0&&X.substr(te.length)in H.phases)return!0;return!1}function mm(X){var H={};for(var te in X){var le=X[te];J.plainObject(le)?H[te]=mm(le):J.array(le)?H[te]=u(le):H[te]=le}return H}var Pa=function(){function X(H){r(this,X),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=H,this.result=gm(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return l(X,[{key:"start",value:function(H,te){var le,he,be=H.phase,Te=this.interaction,Me=function(je){var Le=je.interactable.options[je.prepared.name],Ke=Le.modifiers;return Ke&&Ke.length?Ke:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(ft){var Mt=Le[ft];return Mt&&Mt.enabled&&{options:Mt,methods:Mt._methods}}).filter(function(ft){return!!ft})}(Te);this.prepareStates(Me),this.startEdges=Dt({},Te.edges),this.edges=Dt({},this.startEdges),this.startOffset=(le=Te.rect,he=te,le?{left:he.x-le.left,top:he.y-le.top,right:le.right-he.x,bottom:le.bottom-he.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var $e=this.fillArg({phase:be,pageCoords:te,preEnd:!1});return this.result=gm(),this.startAll($e),this.result=this.setAll($e)}},{key:"fillArg",value:function(H){var te=this.interaction;return H.interaction=te,H.interactable=te.interactable,H.element=te.element,H.rect||(H.rect=te.rect),H.edges||(H.edges=this.startEdges),H.startOffset=this.startOffset,H}},{key:"startAll",value:function(H){for(var te=0,le=this.states;te<le.length;te++){var he=le[te];he.methods.start&&(H.state=he,he.methods.start(H))}}},{key:"setAll",value:function(H){var te=H.phase,le=H.preEnd,he=H.skipModifiers,be=H.rect,Te=H.edges;H.coords=Dt({},H.pageCoords),H.rect=Dt({},be),H.edges=Dt({},Te);for(var Me=he?this.states.slice(he):this.states,$e=gm(H.coords,H.rect),je=0;je<Me.length;je++){var Le,Ke=Me[je],ft=Ke.options,Mt=Dt({},H.coords),Tt=null;(Le=Ke.methods)!=null&&Le.set&&this.shouldDo(ft,le,te)&&(H.state=Ke,Tt=Ke.methods.set(H),hr(H.edges,H.rect,{x:H.coords.x-Mt.x,y:H.coords.y-Mt.y})),$e.eventProps.push(Tt)}Dt(this.edges,H.edges),$e.delta.x=H.coords.x-H.pageCoords.x,$e.delta.y=H.coords.y-H.pageCoords.y,$e.rectDelta.left=H.rect.left-be.left,$e.rectDelta.right=H.rect.right-be.right,$e.rectDelta.top=H.rect.top-be.top,$e.rectDelta.bottom=H.rect.bottom-be.bottom;var Rt=this.result.coords,Xt=this.result.rect;if(Rt&&Xt){var Vt=$e.rect.left!==Xt.left||$e.rect.right!==Xt.right||$e.rect.top!==Xt.top||$e.rect.bottom!==Xt.bottom;$e.changed=Vt||Rt.x!==$e.coords.x||Rt.y!==$e.coords.y}return $e}},{key:"applyToInteraction",value:function(H){var te=this.interaction,le=H.phase,he=te.coords.cur,be=te.coords.start,Te=this.result,Me=this.startDelta,$e=Te.delta;le==="start"&&Dt(this.startDelta,Te.delta);for(var je=0,Le=[[be,Me],[he,$e]];je<Le.length;je++){var Ke=Le[je],ft=Ke[0],Mt=Ke[1];ft.page.x+=Mt.x,ft.page.y+=Mt.y,ft.client.x+=Mt.x,ft.client.y+=Mt.y}var Tt=this.result.rectDelta,Rt=H.rect||te.rect;Rt.left+=Tt.left,Rt.right+=Tt.right,Rt.top+=Tt.top,Rt.bottom+=Tt.bottom,Rt.width=Rt.right-Rt.left,Rt.height=Rt.bottom-Rt.top}},{key:"setAndApply",value:function(H){var te=this.interaction,le=H.phase,he=H.preEnd,be=H.skipModifiers,Te=this.setAll(this.fillArg({preEnd:he,phase:le,pageCoords:H.modifiedCoords||te.coords.cur.page}));if(this.result=Te,!Te.changed&&(!be||be<this.states.length)&&te.interacting())return!1;if(H.modifiedCoords){var Me=te.coords.cur.page,$e={x:H.modifiedCoords.x-Me.x,y:H.modifiedCoords.y-Me.y};Te.coords.x+=$e.x,Te.coords.y+=$e.y,Te.delta.x+=$e.x,Te.delta.y+=$e.y}this.applyToInteraction(H)}},{key:"beforeEnd",value:function(H){var te=H.interaction,le=H.event,he=this.states;if(he&&he.length){for(var be=!1,Te=0;Te<he.length;Te++){var Me=he[Te];H.state=Me;var $e=Me.options,je=Me.methods,Le=je.beforeEnd&&je.beforeEnd(H);if(Le)return this.endResult=Le,!1;be=be||!be&&this.shouldDo($e,!0,H.phase,!0)}be&&te.move({event:le,preEnd:!0})}}},{key:"stop",value:function(H){var te=H.interaction;if(this.states&&this.states.length){var le=Dt({states:this.states,interactable:te.interactable,element:te.element,rect:null},H);this.fillArg(le);for(var he=0,be=this.states;he<be.length;he++){var Te=be[he];le.state=Te,Te.methods.stop&&Te.methods.stop(le)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(H){this.states=[];for(var te=0;te<H.length;te++){var le=H[te],he=le.options,be=le.methods,Te=le.name;this.states.push({options:he,methods:be,index:te,name:Te})}return this.states}},{key:"restoreInteractionCoords",value:function(H){var te=H.interaction,le=te.coords,he=te.rect,be=te.modification;if(be.result){for(var Te=be.startDelta,Me=be.result,$e=Me.delta,je=Me.rectDelta,Le=0,Ke=[[le.start,Te],[le.cur,$e]];Le<Ke.length;Le++){var ft=Ke[Le],Mt=ft[0],Tt=ft[1];Mt.page.x-=Tt.x,Mt.page.y-=Tt.y,Mt.client.x-=Tt.x,Mt.client.y-=Tt.y}he.left-=je.left,he.right-=je.right,he.top-=je.top,he.bottom-=je.bottom}}},{key:"shouldDo",value:function(H,te,le,he){return!(!H||H.enabled===!1||he&&!H.endOnly||H.endOnly&&!te||le==="start"&&!H.setStart)}},{key:"copyFrom",value:function(H){this.startOffset=H.startOffset,this.startDelta=H.startDelta,this.startEdges=H.startEdges,this.edges=H.edges,this.states=H.states.map(function(te){return mm(te)}),this.result=gm(Dt({},H.result.coords),Dt({},H.result.rect))}},{key:"destroy",value:function(){for(var H in this)this[H]=null}}]),X}();function gm(X,H){return{rect:H,coords:X,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Qc(X,H){var te=X.defaults,le={start:X.start,set:X.set,beforeEnd:X.beforeEnd,stop:X.stop},he=function(be){var Te=be||{};for(var Me in Te.enabled=Te.enabled!==!1,te)Me in Te||(Te[Me]=te[Me]);var $e={options:Te,methods:le,name:H,enable:function(){return Te.enabled=!0,$e},disable:function(){return Te.enabled=!1,$e}};return $e};return H&&typeof H=="string"&&(he._defaults=te,he._methods=le),he}function Mf(X){var H=X.iEvent,te=X.interaction.modification.result;te&&(H.modifiers=te.eventProps)}var ym={id:"modifiers/base",before:["actions"],install:function(X){X.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(X){var H=X.interaction;H.modification=new Pa(H)},"interactions:before-action-start":function(X){var H=X.interaction,te=X.interaction.modification;te.start(X,H.coords.start.page),H.edges=te.edges,te.applyToInteraction(X)},"interactions:before-action-move":function(X){var H=X.interaction,te=H.modification,le=te.setAndApply(X);return H.edges=te.edges,le},"interactions:before-action-end":function(X){var H=X.interaction,te=H.modification,le=te.beforeEnd(X);return H.edges=te.startEdges,le},"interactions:action-start":Mf,"interactions:action-move":Mf,"interactions:action-end":Mf,"interactions:after-action-start":function(X){return X.interaction.modification.restoreInteractionCoords(X)},"interactions:after-action-move":function(X){return X.interaction.modification.restoreInteractionCoords(X)},"interactions:stop":function(X){return X.interaction.modification.stop(X)}}},kx=ym,Nx={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},ud=function(X){f(te,X);var H=S(te);function te(le,he,be,Te,Me,$e,je){var Le;r(this,te),(Le=H.call(this,le)).relatedTarget=null,Le.screenX=void 0,Le.screenY=void 0,Le.button=void 0,Le.buttons=void 0,Le.ctrlKey=void 0,Le.shiftKey=void 0,Le.altKey=void 0,Le.metaKey=void 0,Le.page=void 0,Le.client=void 0,Le.delta=void 0,Le.rect=void 0,Le.x0=void 0,Le.y0=void 0,Le.t0=void 0,Le.dt=void 0,Le.duration=void 0,Le.clientX0=void 0,Le.clientY0=void 0,Le.velocity=void 0,Le.speed=void 0,Le.swipe=void 0,Le.axes=void 0,Le.preEnd=void 0,Me=Me||le.element;var Ke=le.interactable,ft=(Ke&&Ke.options||Nx).deltaSource,Mt=oo(Ke,Me,be),Tt=Te==="start",Rt=Te==="end",Xt=Tt?x(Le):le.prevEvent,Vt=Tt?le.coords.start:Rt?{page:Xt.page,client:Xt.client,timeStamp:le.coords.cur.timeStamp}:le.coords.cur;return Le.page=Dt({},Vt.page),Le.client=Dt({},Vt.client),Le.rect=Dt({},le.rect),Le.timeStamp=Vt.timeStamp,Rt||(Le.page.x-=Mt.x,Le.page.y-=Mt.y,Le.client.x-=Mt.x,Le.client.y-=Mt.y),Le.ctrlKey=he.ctrlKey,Le.altKey=he.altKey,Le.shiftKey=he.shiftKey,Le.metaKey=he.metaKey,Le.button=he.button,Le.buttons=he.buttons,Le.target=Me,Le.currentTarget=Me,Le.preEnd=$e,Le.type=je||be+(Te||""),Le.interactable=Ke,Le.t0=Tt?le.pointers[le.pointers.length-1].downTime:Xt.t0,Le.x0=le.coords.start.page.x-Mt.x,Le.y0=le.coords.start.page.y-Mt.y,Le.clientX0=le.coords.start.client.x-Mt.x,Le.clientY0=le.coords.start.client.y-Mt.y,Le.delta=Tt||Rt?{x:0,y:0}:{x:Le[ft].x-Xt[ft].x,y:Le[ft].y-Xt[ft].y},Le.dt=le.coords.delta.timeStamp,Le.duration=Le.timeStamp-Le.t0,Le.velocity=Dt({},le.coords.velocity[ft]),Le.speed=Fi(Le.velocity.x,Le.velocity.y),Le.swipe=Rt||Te==="inertiastart"?Le.getSwipe():null,Le}return l(te,[{key:"getSwipe",value:function(){var le=this._interaction;if(le.prevEvent.speed<600||this.timeStamp-le.prevEvent.timeStamp>150)return null;var he=180*Math.atan2(le.prevEvent.velocityY,le.prevEvent.velocityX)/Math.PI;he<0&&(he+=360);var be=112.5<=he&&he<247.5,Te=202.5<=he&&he<337.5;return{up:Te,down:!Te&&22.5<=he&&he<157.5,left:be,right:!be&&(292.5<=he||he<67.5),angle:he,speed:le.prevEvent.speed,velocity:{x:le.prevEvent.velocityX,y:le.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),te}(h);Object.defineProperties(ud.prototype,{pageX:{get:function(){return this.page.x},set:function(X){this.page.x=X}},pageY:{get:function(){return this.page.y},set:function(X){this.page.y=X}},clientX:{get:function(){return this.client.x},set:function(X){this.client.x=X}},clientY:{get:function(){return this.client.y},set:function(X){this.client.y=X}},dx:{get:function(){return this.delta.x},set:function(X){this.delta.x=X}},dy:{get:function(){return this.delta.y},set:function(X){this.delta.y=X}},velocityX:{get:function(){return this.velocity.x},set:function(X){this.velocity.x=X}},velocityY:{get:function(){return this.velocity.y},set:function(X){this.velocity.y=X}}});var y7=l(function X(H,te,le,he,be){r(this,X),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=H,this.pointer=te,this.event=le,this.downTime=he,this.downTarget=be}),h5=function(X){return X.interactable="",X.element="",X.prepared="",X.pointerIsDown="",X.pointerWasMoved="",X._proxy="",X}({}),$x=function(X){return X.start="",X.move="",X.end="",X.stop="",X.interacting="",X}({}),Ox=0,v7=function(){function X(H){var te=this,le=H.pointerType,he=H.scopeFire;r(this,X),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Ki(function(Le){this.move(Le)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Ox++,this._scopeFire=he,this.pointerType=le;var be=this;this._proxy={};var Te=function(Le){Object.defineProperty(te._proxy,Le,{get:function(){return be[Le]}})};for(var Me in h5)Te(Me);var $e=function(Le){Object.defineProperty(te._proxy,Le,{value:function(){return be[Le].apply(be,arguments)}})};for(var je in $x)$e(je);this._scopeFire("interactions:new",{interaction:this})}return l(X,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(H,te,le){var he=this.updatePointer(H,te,le,!0),be=this.pointers[he];this._scopeFire("interactions:down",{pointer:H,event:te,eventTarget:le,pointerIndex:he,pointerInfo:be,type:"down",interaction:this})}},{key:"start",value:function(H,te,le){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(H.name==="gesture"?2:1)||!te.options[H.name].enabled)&&(_s(this.prepared,H),this.interactable=te,this.element=le,this.rect=te.getRect(le),this.edges=this.prepared.edges?Dt({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(H,te,le){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(H,te,le,!1);var he,be,Te=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(he=this.coords.cur.client.x-this.coords.start.client.x,be=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Fi(he,be)>this.pointerMoveTolerance);var Me,$e,je,Le=this.getPointerIndex(H),Ke={pointer:H,pointerIndex:Le,pointerInfo:this.pointers[Le],event:te,type:"move",eventTarget:le,dx:he,dy:be,duplicate:Te,interaction:this};Te||(Me=this.coords.velocity,$e=this.coords.delta,je=Math.max($e.timeStamp/1e3,.001),Me.page.x=$e.page.x/je,Me.page.y=$e.page.y/je,Me.client.x=$e.client.x/je,Me.client.y=$e.client.y/je,Me.timeStamp=je),this._scopeFire("interactions:move",Ke),Te||this.simulation||(this.interacting()&&(Ke.type=null,this.move(Ke)),this.pointerWasMoved&&Ai(this.coords.prev,this.coords.cur))}},{key:"move",value:function(H){H&&H.event||pn(this.coords.delta),(H=Dt({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},H||{})).phase="move",this._doPhase(H)}},{key:"pointerUp",value:function(H,te,le,he){var be=this.getPointerIndex(H);be===-1&&(be=this.updatePointer(H,te,le,!1));var Te=/cancel$/i.test(te.type)?"cancel":"up";this._scopeFire("interactions:".concat(Te),{pointer:H,pointerIndex:be,pointerInfo:this.pointers[be],event:te,eventTarget:le,type:Te,curEventTarget:he,interaction:this}),this.simulation||this.end(te),this.removePointer(H,te)}},{key:"documentBlur",value:function(H){this.end(H),this._scopeFire("interactions:blur",{event:H,type:"blur",interaction:this})}},{key:"end",value:function(H){var te;this._ending=!0,H=H||this._latestPointer.event,this.interacting()&&(te=this._doPhase({event:H,interaction:this,phase:"end"})),this._ending=!1,te===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(H){var te=mn(H);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:d(this.pointers,function(le){return le.id===te})}},{key:"getPointerInfo",value:function(H){return this.pointers[this.getPointerIndex(H)]}},{key:"updatePointer",value:function(H,te,le,he){var be,Te,Me,$e=mn(H),je=this.getPointerIndex(H),Le=this.pointers[je];return he=he!==!1&&(he||/(down|start)$/i.test(te.type)),Le?Le.pointer=H:(Le=new y7($e,H,te,null,null),je=this.pointers.length,this.pointers.push(Le)),jr(this.coords.cur,this.pointers.map(function(Ke){return Ke.pointer}),this._now()),be=this.coords.delta,Te=this.coords.prev,Me=this.coords.cur,be.page.x=Me.page.x-Te.page.x,be.page.y=Me.page.y-Te.page.y,be.client.x=Me.client.x-Te.client.x,be.client.y=Me.client.y-Te.client.y,be.timeStamp=Me.timeStamp-Te.timeStamp,he&&(this.pointerIsDown=!0,Le.downTime=this.coords.cur.timeStamp,Le.downTarget=le,ri(this.downPointer,H),this.interacting()||(Ai(this.coords.start,this.coords.cur),Ai(this.coords.prev,this.coords.cur),this.downEvent=te,this.pointerWasMoved=!1)),this._updateLatestPointer(H,te,le),this._scopeFire("interactions:update-pointer",{pointer:H,event:te,eventTarget:le,down:he,pointerInfo:Le,pointerIndex:je,interaction:this}),je}},{key:"removePointer",value:function(H,te){var le=this.getPointerIndex(H);if(le!==-1){var he=this.pointers[le];this._scopeFire("interactions:remove-pointer",{pointer:H,event:te,eventTarget:null,pointerIndex:le,pointerInfo:he,interaction:this}),this.pointers.splice(le,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(H,te,le){this._latestPointer.pointer=H,this._latestPointer.event=te,this._latestPointer.eventTarget=le}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(H,te,le,he){return new ud(this,H,this.prepared.name,te,this.element,le,he)}},{key:"_fireEvent",value:function(H){var te;(te=this.interactable)==null||te.fire(H),(!this.prevEvent||H.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=H)}},{key:"_doPhase",value:function(H){var te=H.event,le=H.phase,he=H.preEnd,be=H.type,Te=this.rect;if(Te&&le==="move"&&(hr(this.edges,Te,this.coords.delta[this.interactable.options.deltaSource]),Te.width=Te.right-Te.left,Te.height=Te.bottom-Te.top),this._scopeFire("interactions:before-action-".concat(le),H)===!1)return!1;var Me=H.iEvent=this._createPreparedEvent(te,le,he,be);return this._scopeFire("interactions:action-".concat(le),H),le==="start"&&(this.prevEvent=Me),this._fireEvent(Me),this._scopeFire("interactions:after-action-".concat(le),H),!0}},{key:"_now",value:function(){return Date.now()}}]),X}();function d5(X){Wg(X.interaction)}function Wg(X){if(!function(te){return!(!te.offset.pending.x&&!te.offset.pending.y)}(X))return!1;var H=X.offset.pending;return Zg(X.coords.cur,H),Zg(X.coords.delta,H),hr(X.edges,X.rect,H),H.x=0,H.y=0,!0}function Rx(X){var H=X.x,te=X.y;this.offset.pending.x+=H,this.offset.pending.y+=te,this.offset.total.x+=H,this.offset.total.y+=te}function Zg(X,H){var te=X.page,le=X.client,he=H.x,be=H.y;te.x+=he,te.y+=be,le.x+=he,le.y+=be}$x.offsetBy="";var vm={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(X){X.Interaction.prototype.offsetBy=Rx},listeners:{"interactions:new":function(X){X.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(X){return function(H){H.pointerIsDown&&(Zg(H.coords.cur,H.offset.total),H.offset.pending.x=0,H.offset.pending.y=0)}(X.interaction)},"interactions:before-action-start":d5,"interactions:before-action-move":d5,"interactions:before-action-end":function(X){var H=X.interaction;if(Wg(H))return H.move({offset:!0}),H.end(),!1},"interactions:stop":function(X){var H=X.interaction;H.offset.total.x=0,H.offset.total.y=0,H.offset.pending.x=0,H.offset.pending.y=0}}},Af=vm,f5=function(){function X(H){r(this,X),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=H}return l(X,[{key:"start",value:function(H){var te=this.interaction,le=_m(te);if(!le||!le.enabled)return!1;var he=te.coords.velocity.client,be=Fi(he.x,he.y),Te=this.modification||(this.modification=new Pa(te));if(Te.copyFrom(te.modification),this.t0=te._now(),this.allowResume=le.allowResume,this.v0=be,this.currentOffset={x:0,y:0},this.startCoords=te.coords.cur.page,this.modifierArg=Te.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-te.coords.cur.timeStamp<50&&be>le.minSpeed&&be>le.endSpeed)this.startInertia();else{if(Te.result=Te.setAll(this.modifierArg),!Te.result.changed)return!1;this.startSmoothEnd()}return te.modification.result.rect=null,te.offsetBy(this.targetOffset),te._doPhase({interaction:te,event:H,phase:"inertiastart"}),te.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),te.modification.result.rect=null,this.active=!0,te.simulation=this,!0}},{key:"startInertia",value:function(){var H=this,te=this.interaction.coords.velocity.client,le=_m(this.interaction),he=le.resistance,be=-Math.log(le.endSpeed/this.v0)/he;this.targetOffset={x:(te.x-be)/he,y:(te.y-be)/he},this.te=be,this.lambda_v0=he/this.v0,this.one_ve_v0=1-le.endSpeed/this.v0;var Te=this.modification,Me=this.modifierArg;Me.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},Te.result=Te.setAll(Me),Te.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+Te.result.delta.x,y:this.targetOffset.y+Te.result.delta.y}),this.onNextFrame(function(){return H.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var H=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return H.smoothEndTick()})}},{key:"onNextFrame",value:function(H){var te=this;this.timeout=ut.request(function(){te.active&&H()})}},{key:"inertiaTick",value:function(){var H,te,le,he,be,Te,Me,$e=this,je=this.interaction,Le=_m(je).resistance,Ke=(je._now()-this.t0)/1e3;if(Ke<this.te){var ft,Mt=1-(Math.exp(-Le*Ke)-this.lambda_v0)/this.one_ve_v0;this.isModified?(H=0,te=0,le=this.targetOffset.x,he=this.targetOffset.y,be=this.modifiedOffset.x,Te=this.modifiedOffset.y,ft={x:bm(Me=Mt,H,le,be),y:bm(Me,te,he,Te)}):ft={x:this.targetOffset.x*Mt,y:this.targetOffset.y*Mt};var Tt={x:ft.x-this.currentOffset.x,y:ft.y-this.currentOffset.y};this.currentOffset.x+=Tt.x,this.currentOffset.y+=Tt.y,je.offsetBy(Tt),je.move(),this.onNextFrame(function(){return $e.inertiaTick()})}else je.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var H=this,te=this.interaction,le=te._now()-this.t0,he=_m(te).smoothEndDuration;if(le<he){var be={x:Vv(le,0,this.targetOffset.x,he),y:Vv(le,0,this.targetOffset.y,he)},Te={x:be.x-this.currentOffset.x,y:be.y-this.currentOffset.y};this.currentOffset.x+=Te.x,this.currentOffset.y+=Te.y,te.offsetBy(Te),te.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return H.smoothEndTick()})}else te.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(H){var te=H.pointer,le=H.event,he=H.eventTarget,be=this.interaction;be.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),be.updatePointer(te,le,he,!0),be._doPhase({interaction:be,event:le,phase:"resume"}),Ai(be.coords.prev,be.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,ut.cancel(this.timeout)}}]),X}();function _m(X){var H=X.interactable,te=X.prepared;return H&&H.options&&te.name&&H.options[te.name].inertia}var p5={id:"inertia",before:["modifiers","actions"],install:function(X){var H=X.defaults;X.usePlugin(Af),X.usePlugin(kx),X.actions.phases.inertiastart=!0,X.actions.phases.resume=!0,H.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(X){var H=X.interaction;H.inertia=new f5(H)},"interactions:before-action-end":function(X){var H=X.interaction,te=X.event;return(!H._interacting||H.simulation||!H.inertia.start(te))&&null},"interactions:down":function(X){var H=X.interaction,te=X.eventTarget,le=H.inertia;if(le.active)for(var he=te;J.element(he);){if(he===H.element){le.resume(X);break}he=Oe(he)}},"interactions:stop":function(X){var H=X.interaction.inertia;H.active&&H.stop()},"interactions:before-action-resume":function(X){var H=X.interaction.modification;H.stop(X),H.start(X,X.interaction.coords.cur.page),H.applyToInteraction(X)},"interactions:before-action-inertiastart":function(X){return X.interaction.modification.setAndApply(X)},"interactions:action-resume":Mf,"interactions:action-inertiastart":Mf,"interactions:after-action-inertiastart":function(X){return X.interaction.modification.restoreInteractionCoords(X)},"interactions:after-action-resume":function(X){return X.interaction.modification.restoreInteractionCoords(X)}}};function bm(X,H,te,le){var he=1-X;return he*he*H+2*he*X*te+X*X*le}function Vv(X,H,te,le){return-te*(X/=le)*(X-2)+H}var Kg=p5;function eh(X,H){for(var te=0;te<H.length;te++){var le=H[te];if(X.immediatePropagationStopped)break;le(X)}}var Gv=function(){function X(H){r(this,X),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=Dt({},H||{})}return l(X,[{key:"fire",value:function(H){var te,le=this.global;(te=this.types[H.type])&&eh(H,te),!H.propagationStopped&&le&&(te=le[H.type])&&eh(H,te)}},{key:"on",value:function(H,te){var le=ss(H,te);for(H in le)this.types[H]=a(this.types[H]||[],le[H])}},{key:"off",value:function(H,te){var le=ss(H,te);for(H in le){var he=this.types[H];if(he&&he.length)for(var be=0,Te=le[H];be<Te.length;be++){var Me=Te[be],$e=he.indexOf(Me);$e!==-1&&he.splice($e,1)}}}},{key:"getRect",value:function(H){return null}}]),X}(),jv=function(){function X(H){r(this,X),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=H,ri(this,H)}return l(X,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),X}();function xm(X){return J.object(X)?{capture:!!X.capture,passive:!!X.passive}:{capture:!!X,passive:!1}}function Df(X,H){return X===H||(typeof X=="boolean"?!!H.capture===X&&!H.passive:!!X.capture==!!H.capture&&!!X.passive==!!H.passive)}var Bv={id:"events",install:function(X){var H,te=[],le={},he=[],be={add:Te,remove:Me,addDelegate:function(Le,Ke,ft,Mt,Tt){var Rt=xm(Tt);if(!le[ft]){le[ft]=[];for(var Xt=0;Xt<he.length;Xt++){var Vt=he[Xt];Te(Vt,ft,$e),Te(Vt,ft,je,!0)}}var ai=le[ft],Ii=g(ai,function(Ji){return Ji.selector===Le&&Ji.context===Ke});Ii||(Ii={selector:Le,context:Ke,listeners:[]},ai.push(Ii)),Ii.listeners.push({func:Mt,options:Rt})},removeDelegate:function(Le,Ke,ft,Mt,Tt){var Rt,Xt=xm(Tt),Vt=le[ft],ai=!1;if(Vt)for(Rt=Vt.length-1;Rt>=0;Rt--){var Ii=Vt[Rt];if(Ii.selector===Le&&Ii.context===Ke){for(var Ji=Ii.listeners,Si=Ji.length-1;Si>=0;Si--){var Pi=Ji[Si];if(Pi.func===Mt&&Df(Pi.options,Xt)){Ji.splice(Si,1),Ji.length||(Vt.splice(Rt,1),Me(Ke,ft,$e),Me(Ke,ft,je,!0)),ai=!0;break}}if(ai)break}}},delegateListener:$e,delegateUseCapture:je,delegatedEvents:le,documents:he,targets:te,supportsOptions:!1,supportsPassive:!1};function Te(Le,Ke,ft,Mt){if(Le.addEventListener){var Tt=xm(Mt),Rt=g(te,function(Xt){return Xt.eventTarget===Le});Rt||(Rt={eventTarget:Le,events:{}},te.push(Rt)),Rt.events[Ke]||(Rt.events[Ke]=[]),g(Rt.events[Ke],function(Xt){return Xt.func===ft&&Df(Xt.options,Tt)})||(Le.addEventListener(Ke,ft,be.supportsOptions?Tt:Tt.capture),Rt.events[Ke].push({func:ft,options:Tt}))}}function Me(Le,Ke,ft,Mt){if(Le.addEventListener&&Le.removeEventListener){var Tt=d(te,function(wr){return wr.eventTarget===Le}),Rt=te[Tt];if(Rt&&Rt.events)if(Ke!=="all"){var Xt=!1,Vt=Rt.events[Ke];if(Vt){if(ft==="all"){for(var ai=Vt.length-1;ai>=0;ai--){var Ii=Vt[ai];Me(Le,Ke,Ii.func,Ii.options)}return}for(var Ji=xm(Mt),Si=0;Si<Vt.length;Si++){var Pi=Vt[Si];if(Pi.func===ft&&Df(Pi.options,Ji)){Le.removeEventListener(Ke,ft,be.supportsOptions?Ji:Ji.capture),Vt.splice(Si,1),Vt.length===0&&(delete Rt.events[Ke],Xt=!0);break}}}Xt&&!Object.keys(Rt.events).length&&te.splice(Tt,1)}else for(Ke in Rt.events)Rt.events.hasOwnProperty(Ke)&&Me(Le,Ke,"all")}}function $e(Le,Ke){for(var ft=xm(Ke),Mt=new jv(Le),Tt=le[Le.type],Rt=p(Le)[0],Xt=Rt;J.element(Xt);){for(var Vt=0;Vt<Tt.length;Vt++){var ai=Tt[Vt],Ii=ai.selector,Ji=ai.context;if(we(Xt,Ii)&&Pe(Ji,Rt)&&Pe(Ji,Xt)){var Si=ai.listeners;Mt.currentTarget=Xt;for(var Pi=0;Pi<Si.length;Pi++){var wr=Si[Pi];Df(wr.options,ft)&&wr.func(Mt)}}}Xt=Oe(Xt)}}function je(Le){return $e(Le,!0)}return(H=X.document)==null||H.createElement("div").addEventListener("test",null,{get capture(){return be.supportsOptions=!0},get passive(){return be.supportsPassive=!0}}),X.events=be,be}},Hv={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(X){for(var H=0,te=Hv.methodOrder;H<te.length;H++){var le=te[H],he=Hv[le](X);if(he)return he}return null},simulationResume:function(X){var H=X.pointerType,te=X.eventType,le=X.eventTarget,he=X.scope;if(!/down|start/i.test(te))return null;for(var be=0,Te=he.interactions.list;be<Te.length;be++){var Me=Te[be],$e=le;if(Me.simulation&&Me.simulation.allowResume&&Me.pointerType===H)for(;$e;){if($e===Me.element)return Me;$e=Oe($e)}}return null},mouseOrPen:function(X){var H,te=X.pointerId,le=X.pointerType,he=X.eventType,be=X.scope;if(le!=="mouse"&&le!=="pen")return null;for(var Te=0,Me=be.interactions.list;Te<Me.length;Te++){var $e=Me[Te];if($e.pointerType===le){if($e.simulation&&!ea($e,te))continue;if($e.interacting())return $e;H||(H=$e)}}if(H)return H;for(var je=0,Le=be.interactions.list;je<Le.length;je++){var Ke=Le[je];if(!(Ke.pointerType!==le||/down/i.test(he)&&Ke.simulation))return Ke}return null},hasPointer:function(X){for(var H=X.pointerId,te=0,le=X.scope.interactions.list;te<le.length;te++){var he=le[te];if(ea(he,H))return he}return null},idle:function(X){for(var H=X.pointerType,te=0,le=X.scope.interactions.list;te<le.length;te++){var he=le[te];if(he.pointers.length===1){var be=he.interactable;if(be&&(!be.options.gesture||!be.options.gesture.enabled))continue}else if(he.pointers.length>=2)continue;if(!he.interacting()&&H===he.pointerType)return he}return null}};function ea(X,H){return X.pointers.some(function(te){return te.id===H})}var kf=Hv,wm=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Sm(X,H){return function(te){var le=H.interactions.list,he=T(te),be=p(te),Te=be[0],Me=be[1],$e=[];if(/^touch/.test(te.type)){H.prevTouchTime=H.now();for(var je=0,Le=te.changedTouches;je<Le.length;je++){var Ke=Le[je],ft={pointer:Ke,pointerId:mn(Ke),pointerType:he,eventType:te.type,eventTarget:Te,curEventTarget:Me,scope:H},Mt=m5(ft);$e.push([ft.pointer,ft.eventTarget,ft.curEventTarget,Mt])}}else{var Tt=!1;if(!Se.supportsPointerEvent&&/mouse/.test(te.type)){for(var Rt=0;Rt<le.length&&!Tt;Rt++)Tt=le[Rt].pointerType!=="mouse"&&le[Rt].pointerIsDown;Tt=Tt||H.now()-H.prevTouchTime<500||te.timeStamp===0}if(!Tt){var Xt={pointer:te,pointerId:mn(te),pointerType:he,eventType:te.type,curEventTarget:Me,eventTarget:Te,scope:H},Vt=m5(Xt);$e.push([Xt.pointer,Xt.eventTarget,Xt.curEventTarget,Vt])}}for(var ai=0;ai<$e.length;ai++){var Ii=$e[ai],Ji=Ii[0],Si=Ii[1],Pi=Ii[2];Ii[3][X](Ji,te,Si,Pi)}}}function m5(X){var H=X.pointerType,te=X.scope,le={interaction:kf.search(X),searchDetails:X};return te.fire("interactions:find",le),le.interaction||te.interactions.new({pointerType:H})}function Jg(X,H){var te=X.doc,le=X.scope,he=X.options,be=le.interactions.docEvents,Te=le.events,Me=Te[H];for(var $e in le.browser.isIOS&&!he.events&&(he.events={passive:!1}),Te.delegatedEvents)Me(te,$e,Te.delegateListener),Me(te,$e,Te.delegateUseCapture,!0);for(var je=he&&he.events,Le=0;Le<be.length;Le++){var Ke=be[Le];Me(te,Ke.type,Ke.listener,je)}}var Lx={id:"core/interactions",install:function(X){for(var H={},te=0;te<wm.length;te++){var le=wm[te];H[le]=Sm(le,X)}var he,be=Se.pEventTypes;function Te(){for(var Me=0,$e=X.interactions.list;Me<$e.length;Me++){var je=$e[Me];if(je.pointerIsDown&&je.pointerType==="touch"&&!je._interacting)for(var Le=function(){var Mt=ft[Ke];X.documents.some(function(Tt){return Pe(Tt.doc,Mt.downTarget)})||je.removePointer(Mt.pointer,Mt.event)},Ke=0,ft=je.pointers;Ke<ft.length;Ke++)Le()}}(he=ne.PointerEvent?[{type:be.down,listener:Te},{type:be.down,listener:H.pointerDown},{type:be.move,listener:H.pointerMove},{type:be.up,listener:H.pointerUp},{type:be.cancel,listener:H.pointerUp}]:[{type:"mousedown",listener:H.pointerDown},{type:"mousemove",listener:H.pointerMove},{type:"mouseup",listener:H.pointerUp},{type:"touchstart",listener:Te},{type:"touchstart",listener:H.pointerDown},{type:"touchmove",listener:H.pointerMove},{type:"touchend",listener:H.pointerUp},{type:"touchcancel",listener:H.pointerUp}]).push({type:"blur",listener:function(Me){for(var $e=0,je=X.interactions.list;$e<je.length;$e++)je[$e].documentBlur(Me)}}),X.prevTouchTime=0,X.Interaction=function(Me){f(je,Me);var $e=S(je);function je(){return r(this,je),$e.apply(this,arguments)}return l(je,[{key:"pointerMoveTolerance",get:function(){return X.interactions.pointerMoveTolerance},set:function(Le){X.interactions.pointerMoveTolerance=Le}},{key:"_now",value:function(){return X.now()}}]),je}(v7),X.interactions={list:[],new:function(Me){Me.scopeFire=function(je,Le){return X.fire(je,Le)};var $e=new X.Interaction(Me);return X.interactions.list.push($e),$e},listeners:H,docEvents:he,pointerMoveTolerance:1},X.usePlugin(Br)},listeners:{"scope:add-document":function(X){return Jg(X,"add")},"scope:remove-document":function(X){return Jg(X,"remove")},"interactable:unset":function(X,H){for(var te=X.interactable,le=H.interactions.list.length-1;le>=0;le--){var he=H.interactions.list[le];he.interactable===te&&(he.stop(),H.fire("interactions:destroy",{interaction:he}),he.destroy(),H.interactions.list.length>2&&H.interactions.list.splice(le,1))}}},onDocSignal:Jg,doOnInteractions:Sm,methodNames:wm},Qg=Lx,iu=function(X){return X[X.On=0]="On",X[X.Off=1]="Off",X}(iu||{}),g5=function(){function X(H,te,le,he){r(this,X),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Gv,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=te.actions,this.target=H,this._context=te.context||le,this._win=V(Lt(H)?this._context:H),this._doc=this._win.document,this._scopeEvents=he,this.set(te)}return l(X,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(H,te){return J.func(te.onstart)&&this.on("".concat(H,"start"),te.onstart),J.func(te.onmove)&&this.on("".concat(H,"move"),te.onmove),J.func(te.onend)&&this.on("".concat(H,"end"),te.onend),J.func(te.oninertiastart)&&this.on("".concat(H,"inertiastart"),te.oninertiastart),this}},{key:"updatePerActionListeners",value:function(H,te,le){var he,be=this,Te=(he=this._actions.map[H])==null?void 0:he.filterEventType,Me=function($e){return(Te==null||Te($e))&&If($e,be._actions)};(J.array(te)||J.object(te))&&this._onOff(iu.Off,H,te,void 0,Me),(J.array(le)||J.object(le))&&this._onOff(iu.On,H,le,void 0,Me)}},{key:"setPerAction",value:function(H,te){var le=this._defaults;for(var he in te){var be=he,Te=this.options[H],Me=te[be];be==="listeners"&&this.updatePerActionListeners(H,Te.listeners,Me),J.array(Me)?Te[be]=u(Me):J.plainObject(Me)?(Te[be]=Dt(Te[be]||{},mm(Me)),J.object(le.perAction[be])&&"enabled"in le.perAction[be]&&(Te[be].enabled=Me.enabled!==!1)):J.bool(Me)&&J.object(le.perAction[be])?Te[be].enabled=Me:Te[be]=Me}}},{key:"getRect",value:function(H){return H=H||(J.element(this.target)?this.target:null),J.string(this.target)&&(H=H||this._context.querySelector(this.target)),Ct(H)}},{key:"rectChecker",value:function(H){var te=this;return J.func(H)?(this.getRect=function(le){var he=Dt({},H.apply(te,le));return"width"in he||(he.width=he.right-he.left,he.height=he.bottom-he.top),he},this):H===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(H,te){if(Lt(te)||J.object(te)){for(var le in this.options[H]=te,this._actions.map)this.options[le][H]=te;return this}return this.options[H]}},{key:"origin",value:function(H){return this._backCompatOption("origin",H)}},{key:"deltaSource",value:function(H){return H==="page"||H==="client"?(this.options.deltaSource=H,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var H=this.target;return J.string(H)?Array.from(this._context.querySelectorAll(H)):J.func(H)&&H.getAllElements?H.getAllElements():J.element(H)?[H]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(H){return this._context===H.ownerDocument||Pe(this._context,H)}},{key:"testIgnoreAllow",value:function(H,te,le){return!this.testIgnore(H.ignoreFrom,te,le)&&this.testAllow(H.allowFrom,te,le)}},{key:"testAllow",value:function(H,te,le){return!H||!!J.element(le)&&(J.string(H)?vt(le,H,te):!!J.element(H)&&Pe(H,le))}},{key:"testIgnore",value:function(H,te,le){return!(!H||!J.element(le))&&(J.string(H)?vt(le,H,te):!!J.element(H)&&Pe(H,le))}},{key:"fire",value:function(H){return this.events.fire(H),this}},{key:"_onOff",value:function(H,te,le,he,be){J.object(te)&&!J.array(te)&&(he=le,le=null);var Te=ss(te,le,be);for(var Me in Te){Me==="wheel"&&(Me=Se.wheelEvent);for(var $e=0,je=Te[Me];$e<je.length;$e++){var Le=je[$e];If(Me,this._actions)?this.events[H===iu.On?"on":"off"](Me,Le):J.string(this.target)?this._scopeEvents[H===iu.On?"addDelegate":"removeDelegate"](this.target,this._context,Me,Le,he):this._scopeEvents[H===iu.On?"add":"remove"](this.target,Me,Le,he)}}return this}},{key:"on",value:function(H,te,le){return this._onOff(iu.On,H,te,le)}},{key:"off",value:function(H,te,le){return this._onOff(iu.Off,H,te,le)}},{key:"set",value:function(H){var te=this._defaults;for(var le in J.object(H)||(H={}),this.options=mm(te.base),this._actions.methodDict){var he=le,be=this._actions.methodDict[he];this.options[he]={},this.setPerAction(he,Dt(Dt({},te.perAction),te.actions[he])),this[be](H[he])}for(var Te in H)Te!=="getRect"?J.func(this[Te])&&this[Te](H[Te]):this.rectChecker(H.getRect);return this}},{key:"unset",value:function(){if(J.string(this.target))for(var H in this._scopeEvents.delegatedEvents)for(var te=this._scopeEvents.delegatedEvents[H],le=te.length-1;le>=0;le--){var he=te[le],be=he.selector,Te=he.context,Me=he.listeners;be===this.target&&Te===this._context&&te.splice(le,1);for(var $e=Me.length-1;$e>=0;$e--)this._scopeEvents.removeDelegate(this.target,this._context,H,Me[$e][0],Me[$e][1])}else this._scopeEvents.remove(this.target,"all")}}]),X}(),_7=function(){function X(H){var te=this;r(this,X),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=H,H.addListeners({"interactable:unset":function(le){var he=le.interactable,be=he.target,Te=J.string(be)?te.selectorMap[be]:be[te.scope.id],Me=d(Te,function($e){return $e===he});Te.splice(Me,1)}})}return l(X,[{key:"new",value:function(H,te){te=Dt(te||{},{actions:this.scope.actions});var le=new this.scope.Interactable(H,te,this.scope.document,this.scope.events);return this.scope.addDocument(le._doc),this.list.push(le),J.string(H)?(this.selectorMap[H]||(this.selectorMap[H]=[]),this.selectorMap[H].push(le)):(le.target[this.scope.id]||Object.defineProperty(H,this.scope.id,{value:[],configurable:!0}),H[this.scope.id].push(le)),this.scope.fire("interactable:new",{target:H,options:te,interactable:le,win:this.scope._win}),le}},{key:"getExisting",value:function(H,te){var le=te&&te.context||this.scope.document,he=J.string(H),be=he?this.selectorMap[H]:H[this.scope.id];if(be)return g(be,function(Te){return Te._context===le&&(he||Te.inContext(H))})}},{key:"forEachMatch",value:function(H,te){for(var le=0,he=this.list;le<he.length;le++){var be=he[le],Te=void 0;if((J.string(be.target)?J.element(H)&&we(H,be.target):H===be.target)&&be.inContext(H)&&(Te=te(be)),Te!==void 0)return Te}}}]),X}(),b7=function(){function X(){var H=this;r(this,X),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=Se,this.defaults=mm(Nx),this.Eventable=Gv,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(le){var he=function be(Te,Me){var $e=le.interactables.getExisting(Te,Me);return $e||(($e=le.interactables.new(Te,Me)).events.global=be.globalEvents),$e};return he.getPointerAverage=xt,he.getTouchBBox=Ys,he.getTouchDistance=m,he.getTouchAngle=j,he.getElementRect=Ct,he.getElementClientRect=ct,he.matchesSelector=we,he.closest=Re,he.globalEvents={},he.version="1.10.27",he.scope=le,he.use=function(be,Te){return this.scope.usePlugin(be,Te),this},he.isSet=function(be,Te){return!!this.scope.interactables.get(be,Te&&Te.context)},he.on=Ki(function(be,Te,Me){if(J.string(be)&&be.search(" ")!==-1&&(be=be.trim().split(/ +/)),J.array(be)){for(var $e=0,je=be;$e<je.length;$e++){var Le=je[$e];this.on(Le,Te,Me)}return this}if(J.object(be)){for(var Ke in be)this.on(Ke,be[Ke],Te);return this}return If(be,this.scope.actions)?this.globalEvents[be]?this.globalEvents[be].push(Te):this.globalEvents[be]=[Te]:this.scope.events.add(this.scope.document,be,Te,{options:Me}),this},"The interact.on() method is being deprecated"),he.off=Ki(function(be,Te,Me){if(J.string(be)&&be.search(" ")!==-1&&(be=be.trim().split(/ +/)),J.array(be)){for(var $e=0,je=be;$e<je.length;$e++){var Le=je[$e];this.off(Le,Te,Me)}return this}if(J.object(be)){for(var Ke in be)this.off(Ke,be[Ke],Te);return this}var ft;return If(be,this.scope.actions)?be in this.globalEvents&&(ft=this.globalEvents[be].indexOf(Te))!==-1&&this.globalEvents[be].splice(ft,1):this.scope.events.remove(this.scope.document,be,Te,Me),this},"The interact.off() method is being deprecated"),he.debug=function(){return this.scope},he.supportsTouch=function(){return Se.supportsTouch},he.supportsPointerEvent=function(){return Se.supportsPointerEvent},he.stop=function(){for(var be=0,Te=this.scope.interactions.list;be<Te.length;be++)Te[be].stop();return this},he.pointerMoveTolerance=function(be){return J.number(be)?(this.scope.interactions.pointerMoveTolerance=be,this):this.scope.interactions.pointerMoveTolerance},he.addDocument=function(be,Te){this.scope.addDocument(be,Te)},he.removeDocument=function(be){this.scope.removeDocument(be)},he}(this),this.InteractEvent=ud,this.Interactable=void 0,this.interactables=new _7(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(le){return H.removeDocument(le.target)};var te=this;this.Interactable=function(le){f(be,le);var he=S(be);function be(){return r(this,be),he.apply(this,arguments)}return l(be,[{key:"_defaults",get:function(){return te.defaults}},{key:"set",value:function(Te){return P(y(be.prototype),"set",this).call(this,Te),te.fire("interactable:set",{options:Te,interactable:this}),this}},{key:"unset",value:function(){P(y(be.prototype),"unset",this).call(this);var Te=te.interactables.list.indexOf(this);Te<0||(te.interactables.list.splice(Te,1),te.fire("interactable:unset",{interactable:this}))}}]),be}(g5)}return l(X,[{key:"addListeners",value:function(H,te){this.listenerMaps.push({id:te,map:H})}},{key:"fire",value:function(H,te){for(var le=0,he=this.listenerMaps;le<he.length;le++){var be=he[le].map[H];if(be&&be(te,this,H)===!1)return!1}}},{key:"init",value:function(H){return this.isInitialized?this:function(te,le){return te.isInitialized=!0,J.window(le)&&G(le),ne.init(le),Se.init(le),ut.init(le),te.window=le,te.document=le.document,te.usePlugin(Qg),te.usePlugin(Bv),te}(this,H)}},{key:"pluginIsInstalled",value:function(H){var te=H.id;return te?!!this._plugins.map[te]:this._plugins.list.indexOf(H)!==-1}},{key:"usePlugin",value:function(H,te){if(!this.isInitialized)return this;if(this.pluginIsInstalled(H))return this;if(H.id&&(this._plugins.map[H.id]=H),this._plugins.list.push(H),H.install&&H.install(this,te),H.listeners&&H.before){for(var le=0,he=this.listenerMaps.length,be=H.before.reduce(function(Me,$e){return Me[$e]=!0,Me[y5($e)]=!0,Me},{});le<he;le++){var Te=this.listenerMaps[le].id;if(Te&&(be[Te]||be[y5(Te)]))break}this.listenerMaps.splice(le,0,{id:H.id,map:H.listeners})}else H.listeners&&this.listenerMaps.push({id:H.id,map:H.listeners});return this}},{key:"addDocument",value:function(H,te){if(this.getDocIndex(H)!==-1)return!1;var le=V(H);te=te?Dt({},te):{},this.documents.push({doc:H,options:te}),this.events.documents.push(H),H!==this.document&&this.events.add(le,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:H,window:le,scope:this,options:te})}},{key:"removeDocument",value:function(H){var te=this.getDocIndex(H),le=V(H),he=this.documents[te].options;this.events.remove(le,"unload",this.onWindowUnload),this.documents.splice(te,1),this.events.documents.splice(te,1),this.fire("scope:remove-document",{doc:H,window:le,scope:this,options:he})}},{key:"getDocIndex",value:function(H){for(var te=0;te<this.documents.length;te++)if(this.documents[te].doc===H)return te;return-1}},{key:"getDocOptions",value:function(H){var te=this.getDocIndex(H);return te===-1?null:this.documents[te].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),X}();function y5(X){return X&&X.replace(/\/.*$/,"")}var Uv=new b7,ta=Uv.interactStatic,x7=typeof globalThis<"u"?globalThis:window;Uv.init(x7);var w7=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(X){var H=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(le){var he=le[0],be=le[1];return he in X||be in X}),te=function(le,he){for(var be=X.range,Te=X.limits,Me=Te===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:Te,$e=X.offset,je=$e===void 0?{x:0,y:0}:$e,Le={range:be,grid:X,x:null,y:null},Ke=0;Ke<H.length;Ke++){var ft=H[Ke],Mt=ft[0],Tt=ft[1],Rt=Math.round((le-je.x)/X[Mt]),Xt=Math.round((he-je.y)/X[Tt]);Le[Mt]=Math.max(Me.left,Math.min(Me.right,Rt*X[Mt]+je.x)),Le[Tt]=Math.max(Me.top,Math.min(Me.bottom,Xt*X[Tt]+je.y))}return Le};return te.grid=X,te.coordFields=H,te}}),S7={id:"snappers",install:function(X){var H=X.interactStatic;H.snappers=Dt(H.snappers||{},w7),H.createSnapGrid=H.snappers.grid}},E7=S7,v5={start:function(X){var H=X.state,te=X.rect,le=X.edges,he=X.pageCoords,be=H.options,Te=be.ratio,Me=be.enabled,$e=H.options,je=$e.equalDelta,Le=$e.modifiers;Te==="preserve"&&(Te=te.width/te.height),H.startCoords=Dt({},he),H.startRect=Dt({},te),H.ratio=Te,H.equalDelta=je;var Ke=H.linkedEdges={top:le.top||le.left&&!le.bottom,left:le.left||le.top&&!le.right,bottom:le.bottom||le.right&&!le.top,right:le.right||le.bottom&&!le.left};if(H.xIsPrimaryAxis=!(!le.left&&!le.right),H.equalDelta){var ft=(Ke.left?1:-1)*(Ke.top?1:-1);H.edgeSign={x:ft,y:ft}}else H.edgeSign={x:Ke.left?-1:1,y:Ke.top?-1:1};if(Me!==!1&&Dt(le,Ke),Le!=null&&Le.length){var Mt=new Pa(X.interaction);Mt.copyFrom(X.interaction.modification),Mt.prepareStates(Le),H.subModification=Mt,Mt.startAll(s({},X))}},set:function(X){var H=X.state,te=X.rect,le=X.coords,he=H.linkedEdges,be=Dt({},le),Te=H.equalDelta?C7:P7;if(Dt(X.edges,he),Te(H,H.xIsPrimaryAxis,le,te),!H.subModification)return null;var Me=Dt({},te);hr(he,Me,{x:le.x-be.x,y:le.y-be.y});var $e=H.subModification.setAll(s(s({},X),{},{rect:Me,edges:he,pageCoords:le,prevCoords:le,prevRect:Me})),je=$e.delta;return $e.changed&&(Te(H,Math.abs(je.x)>Math.abs(je.y),$e.coords,$e.rect),Dt(le,$e.coords)),$e.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function C7(X,H,te){var le=X.startCoords,he=X.edgeSign;H?te.y=le.y+(te.x-le.x)*he.y:te.x=le.x+(te.y-le.y)*he.x}function P7(X,H,te,le){var he=X.startRect,be=X.startCoords,Te=X.ratio,Me=X.edgeSign;if(H){var $e=le.width/Te;te.y=be.y+($e-he.height)*Me.y}else{var je=le.height*Te;te.x=be.x+(je-he.width)*Me.x}}var T7=Qc(v5,"aspectRatio"),_5=function(){};_5._defaults={};var Em=_5;function Nf(X,H,te){return J.func(X)?cs(X,H.interactable,H.element,[te.x,te.y,H]):cs(X,H.interactable,H.element)}var Yv={start:function(X){var H=X.rect,te=X.startOffset,le=X.state,he=X.interaction,be=X.pageCoords,Te=le.options,Me=Te.elementRect,$e=Dt({left:0,top:0,right:0,bottom:0},Te.offset||{});if(H&&Me){var je=Nf(Te.restriction,he,be);if(je){var Le=je.right-je.left-H.width,Ke=je.bottom-je.top-H.height;Le<0&&($e.left+=Le,$e.right+=Le),Ke<0&&($e.top+=Ke,$e.bottom+=Ke)}$e.left+=te.left-H.width*Me.left,$e.top+=te.top-H.height*Me.top,$e.right+=te.right-H.width*(1-Me.right),$e.bottom+=te.bottom-H.height*(1-Me.bottom)}le.offset=$e},set:function(X){var H=X.coords,te=X.interaction,le=X.state,he=le.options,be=le.offset,Te=Nf(he.restriction,te,H);if(Te){var Me=function($e){return!$e||"left"in $e&&"top"in $e||(($e=Dt({},$e)).left=$e.x||0,$e.top=$e.y||0,$e.right=$e.right||$e.left+$e.width,$e.bottom=$e.bottom||$e.top+$e.height),$e}(Te);H.x=Math.max(Math.min(Me.right-be.right,H.x),Me.left+be.left),H.y=Math.max(Math.min(Me.bottom-be.bottom,H.y),Me.top+be.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},I7=Qc(Yv,"restrict"),Fx={top:1/0,left:1/0,bottom:-1/0,right:-1/0},b5={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function x5(X,H){for(var te=0,le=["top","left","bottom","right"];te<le.length;te++){var he=le[te];he in X||(X[he]=H[he])}return X}var e1={noInner:Fx,noOuter:b5,start:function(X){var H,te=X.interaction,le=X.startOffset,he=X.state,be=he.options;be&&(H=fn(Nf(be.offset,te,te.coords.start.page))),H=H||{x:0,y:0},he.offset={top:H.y+le.top,left:H.x+le.left,bottom:H.y-le.bottom,right:H.x-le.right}},set:function(X){var H=X.coords,te=X.edges,le=X.interaction,he=X.state,be=he.offset,Te=he.options;if(te){var Me=Dt({},H),$e=Nf(Te.inner,le,Me)||{},je=Nf(Te.outer,le,Me)||{};x5($e,Fx),x5(je,b5),te.top?H.y=Math.min(Math.max(je.top+be.top,Me.y),$e.top+be.top):te.bottom&&(H.y=Math.max(Math.min(je.bottom+be.bottom,Me.y),$e.bottom+be.bottom)),te.left?H.x=Math.min(Math.max(je.left+be.left,Me.x),$e.left+be.left):te.right&&(H.x=Math.max(Math.min(je.right+be.right,Me.x),$e.right+be.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},M7=Qc(e1,"restrictEdges"),A7=Dt({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(X){}},Yv.defaults),D7=Qc({start:Yv.start,set:Yv.set,defaults:A7},"restrictRect"),k7={width:-1/0,height:-1/0},N7={width:1/0,height:1/0},$7=Qc({start:function(X){return e1.start(X)},set:function(X){var H=X.interaction,te=X.state,le=X.rect,he=X.edges,be=te.options;if(he){var Te=Us(Nf(be.min,H,X.coords))||k7,Me=Us(Nf(be.max,H,X.coords))||N7;te.options={endOnly:be.endOnly,inner:Dt({},e1.noInner),outer:Dt({},e1.noOuter)},he.top?(te.options.inner.top=le.bottom-Te.height,te.options.outer.top=le.bottom-Me.height):he.bottom&&(te.options.inner.bottom=le.top+Te.height,te.options.outer.bottom=le.top+Me.height),he.left?(te.options.inner.left=le.right-Te.width,te.options.outer.left=le.right-Me.width):he.right&&(te.options.inner.right=le.left+Te.width,te.options.outer.right=le.left+Me.width),e1.set(X),te.options=be}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),t1={start:function(X){var H,te=X.interaction,le=X.interactable,he=X.element,be=X.rect,Te=X.state,Me=X.startOffset,$e=Te.options,je=$e.offsetWithOrigin?function(ft){var Mt=ft.interaction.element,Tt=fn(cs(ft.state.options.origin,null,null,[Mt])),Rt=Tt||oo(ft.interactable,Mt,ft.interaction.prepared.name);return Rt}(X):{x:0,y:0};if($e.offset==="startCoords")H={x:te.coords.start.page.x,y:te.coords.start.page.y};else{var Le=cs($e.offset,le,he,[te]);(H=fn(Le)||{x:0,y:0}).x+=je.x,H.y+=je.y}var Ke=$e.relativePoints;Te.offsets=be&&Ke&&Ke.length?Ke.map(function(ft,Mt){return{index:Mt,relativePoint:ft,x:Me.left-be.width*ft.x+H.x,y:Me.top-be.height*ft.y+H.y}}):[{index:0,relativePoint:null,x:H.x,y:H.y}]},set:function(X){var H=X.interaction,te=X.coords,le=X.state,he=le.options,be=le.offsets,Te=oo(H.interactable,H.element,H.prepared.name),Me=Dt({},te),$e=[];he.offsetWithOrigin||(Me.x-=Te.x,Me.y-=Te.y);for(var je=0,Le=be;je<Le.length;je++)for(var Ke=Le[je],ft=Me.x-Ke.x,Mt=Me.y-Ke.y,Tt=0,Rt=he.targets.length;Tt<Rt;Tt++){var Xt=he.targets[Tt],Vt=void 0;(Vt=J.func(Xt)?Xt(ft,Mt,H._proxy,Ke,Tt):Xt)&&$e.push({x:(J.number(Vt.x)?Vt.x:ft)+Ke.x,y:(J.number(Vt.y)?Vt.y:Mt)+Ke.y,range:J.number(Vt.range)?Vt.range:he.range,source:Xt,index:Tt,offset:Ke})}for(var ai={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Ii=0;Ii<$e.length;Ii++){var Ji=$e[Ii],Si=Ji.range,Pi=Ji.x-Me.x,wr=Ji.y-Me.y,gn=Fi(Pi,wr),Ta=gn<=Si;Si===1/0&&ai.inRange&&ai.range!==1/0&&(Ta=!1),ai.target&&!(Ta?ai.inRange&&Si!==1/0?gn/Si<ai.distance/ai.range:Si===1/0&&ai.range!==1/0||gn<ai.distance:!ai.inRange&&gn<ai.distance)||(ai.target=Ji,ai.distance=gn,ai.range=Si,ai.inRange=Ta,ai.delta.x=Pi,ai.delta.y=wr)}return ai.inRange&&(te.x=ai.target.x,te.y=ai.target.y),le.closest=ai,ai},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},i1=Qc(t1,"snap"),Xv={start:function(X){var H=X.state,te=X.edges,le=H.options;if(!te)return null;X.state={options:{targets:null,relativePoints:[{x:te.left?0:1,y:te.top?0:1}],offset:le.offset||"self",origin:{x:0,y:0},range:le.range}},H.targetFields=H.targetFields||[["width","height"],["x","y"]],t1.start(X),H.offsets=X.state.offsets,X.state=H},set:function(X){var H=X.interaction,te=X.state,le=X.coords,he=te.options,be=te.offsets,Te={x:le.x-be[0].x,y:le.y-be[0].y};te.options=Dt({},he),te.options.targets=[];for(var Me=0,$e=he.targets||[];Me<$e.length;Me++){var je=$e[Me],Le=void 0;if(Le=J.func(je)?je(Te.x,Te.y,H):je){for(var Ke=0,ft=te.targetFields;Ke<ft.length;Ke++){var Mt=ft[Ke],Tt=Mt[0],Rt=Mt[1];if(Tt in Le||Rt in Le){Le.x=Le[Tt],Le.y=Le[Rt];break}}te.options.targets.push(Le)}}var Xt=t1.set(X);return te.options=he,Xt},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},w5=Qc(Xv,"snapSize"),Wv={aspectRatio:T7,restrictEdges:M7,restrict:I7,restrictRect:D7,restrictSize:$7,snapEdges:Qc({start:function(X){var H=X.edges;return H?(X.state.targetFields=X.state.targetFields||[[H.left?"left":"right",H.top?"top":"bottom"]],Xv.start(X)):null},set:Xv.set,defaults:Dt(mm(Xv.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:i1,snapSize:w5,spring:Em,avoid:Em,transform:Em,rubberband:Em},S5={id:"modifiers",install:function(X){var H=X.interactStatic;for(var te in X.usePlugin(kx),X.usePlugin(E7),H.modifiers=Wv,Wv){var le=Wv[te],he=le._defaults,be=le._methods;he._methods=be,X.defaults.perAction[te]=he}}},E5=S5,zx=function(X){f(te,X);var H=S(te);function te(le,he,be,Te,Me,$e){var je;if(r(this,te),ri(x(je=H.call(this,Me)),be),be!==he&&ri(x(je),he),je.timeStamp=$e,je.originalEvent=be,je.type=le,je.pointerId=mn(he),je.pointerType=T(he),je.target=Te,je.currentTarget=null,le==="tap"){var Le=Me.getPointerIndex(he);je.dt=je.timeStamp-Me.pointers[Le].downTime;var Ke=je.timeStamp-Me.tapTime;je.double=!!Me.prevTap&&Me.prevTap.type!=="doubletap"&&Me.prevTap.target===je.target&&Ke<500}else le==="doubletap"&&(je.dt=he.timeStamp-Me.tapTime,je.double=!0);return je}return l(te,[{key:"_subtractOrigin",value:function(le){var he=le.x,be=le.y;return this.pageX-=he,this.pageY-=be,this.clientX-=he,this.clientY-=be,this}},{key:"_addOrigin",value:function(le){var he=le.x,be=le.y;return this.pageX+=he,this.pageY+=be,this.clientX+=he,this.clientY+=be,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),te}(h),Xu={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(X){X.pointerEvents=Xu,X.defaults.actions.pointerEvents=Xu.defaults,Dt(X.actions.phaselessTypes,Xu.types)},listeners:{"interactions:new":function(X){var H=X.interaction;H.prevTap=null,H.tapTime=0},"interactions:update-pointer":function(X){var H=X.down,te=X.pointerInfo;!H&&te.hold||(te.hold={duration:1/0,timeout:null})},"interactions:move":function(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget;X.duplicate||te.pointerIsDown&&!te.pointerWasMoved||(te.pointerIsDown&&qx(X),cd({interaction:te,pointer:le,event:he,eventTarget:be,type:"move"},H))},"interactions:down":function(X,H){(function(te,le){for(var he=te.interaction,be=te.pointer,Te=te.event,Me=te.eventTarget,$e=te.pointerIndex,je=he.pointers[$e].hold,Le=qt(Me),Ke={interaction:he,pointer:be,event:Te,eventTarget:Me,type:"hold",targets:[],path:Le,node:null},ft=0;ft<Le.length;ft++){var Mt=Le[ft];Ke.node=Mt,le.fire("pointerEvents:collect-targets",Ke)}if(Ke.targets.length){for(var Tt=1/0,Rt=0,Xt=Ke.targets;Rt<Xt.length;Rt++){var Vt=Xt[Rt].eventable.options.holdDuration;Vt<Tt&&(Tt=Vt)}je.duration=Tt,je.timeout=setTimeout(function(){cd({interaction:he,eventTarget:Me,pointer:be,event:Te,type:"hold"},le)},Tt)}})(X,H),cd(X,H)},"interactions:up":function(X,H){qx(X),cd(X,H),function(te,le){var he=te.interaction,be=te.pointer,Te=te.event,Me=te.eventTarget;he.pointerWasMoved||cd({interaction:he,eventTarget:Me,pointer:be,event:Te,type:"tap"},le)}(X,H)},"interactions:cancel":function(X,H){qx(X),cd(X,H)}},PointerEvent:zx,fire:cd,collectEventTargets:C5,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function cd(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget,Te=X.type,Me=X.targets,$e=Me===void 0?C5(X,H):Me,je=new zx(Te,le,he,be,te,H.now());H.fire("pointerEvents:new",{pointerEvent:je});for(var Le={interaction:te,pointer:le,event:he,eventTarget:be,targets:$e,type:Te,pointerEvent:je},Ke=0;Ke<$e.length;Ke++){var ft=$e[Ke];for(var Mt in ft.props||{})je[Mt]=ft.props[Mt];var Tt=oo(ft.eventable,ft.node);if(je._subtractOrigin(Tt),je.eventable=ft.eventable,je.currentTarget=ft.node,ft.eventable.fire(je),je._addOrigin(Tt),je.immediatePropagationStopped||je.propagationStopped&&Ke+1<$e.length&&$e[Ke+1].node!==je.currentTarget)break}if(H.fire("pointerEvents:fired",Le),Te==="tap"){var Rt=je.double?cd({interaction:te,pointer:le,event:he,eventTarget:be,type:"doubletap"},H):je;te.prevTap=Rt,te.tapTime=Rt.timeStamp}return je}function C5(X,H){var te=X.interaction,le=X.pointer,he=X.event,be=X.eventTarget,Te=X.type,Me=te.getPointerIndex(le),$e=te.pointers[Me];if(Te==="tap"&&(te.pointerWasMoved||!$e||$e.downTarget!==be))return[];for(var je=qt(be),Le={interaction:te,pointer:le,event:he,eventTarget:be,type:Te,path:je,targets:[],node:null},Ke=0;Ke<je.length;Ke++){var ft=je[Ke];Le.node=ft,H.fire("pointerEvents:collect-targets",Le)}return Te==="hold"&&(Le.targets=Le.targets.filter(function(Mt){var Tt,Rt;return Mt.eventable.options.holdDuration===((Tt=te.pointers[Me])==null||(Rt=Tt.hold)==null?void 0:Rt.duration)})),Le.targets}function qx(X){var H=X.interaction,te=X.pointerIndex,le=H.pointers[te].hold;le&&le.timeout&&(clearTimeout(le.timeout),le.timeout=null)}var P5=Object.freeze({__proto__:null,default:Xu});function T5(X){var H=X.interaction;H.holdIntervalHandle&&(clearInterval(H.holdIntervalHandle),H.holdIntervalHandle=null)}var s1={id:"pointer-events/holdRepeat",install:function(X){X.usePlugin(Xu);var H=X.pointerEvents;H.defaults.holdRepeatInterval=0,H.types.holdrepeat=X.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(X,H){return X["pointerEvents:".concat(H)]=T5,X},{"pointerEvents:new":function(X){var H=X.pointerEvent;H.type==="hold"&&(H.count=(H.count||0)+1)},"pointerEvents:fired":function(X,H){var te=X.interaction,le=X.pointerEvent,he=X.eventTarget,be=X.targets;if(le.type==="hold"&&be.length){var Te=be[0].eventable.options.holdRepeatInterval;Te<=0||(te.holdIntervalHandle=setTimeout(function(){H.pointerEvents.fire({interaction:te,eventTarget:he,type:"hold",pointer:le,event:le},H)},Te))}}})},n1=s1,O7={id:"pointer-events/interactableTargets",install:function(X){var H=X.Interactable;H.prototype.pointerEvents=function(le){return Dt(this.events.options,le),this};var te=H.prototype._backCompatOption;H.prototype._backCompatOption=function(le,he){var be=te.call(this,le,he);return be===this&&(this.events.options[le]=he),be}},listeners:{"pointerEvents:collect-targets":function(X,H){var te=X.targets,le=X.node,he=X.type,be=X.eventTarget;H.interactables.forEachMatch(le,function(Te){var Me=Te.events,$e=Me.options;Me.types[he]&&Me.types[he].length&&Te.testIgnoreAllow($e,le,be)&&te.push({node:le,eventable:Me,props:{interactable:Te}})})},"interactable:new":function(X){var H=X.interactable;H.events.getRect=function(te){return H.getRect(te)}},"interactable:set":function(X,H){var te=X.interactable,le=X.options;Dt(te.events.options,H.pointerEvents.defaults),Dt(te.events.options,le.pointerEvents||{})}}},Zv=O7,I5={id:"pointer-events",install:function(X){X.usePlugin(P5),X.usePlugin(n1),X.usePlugin(Zv)}},M5=I5,Vx={id:"reflow",install:function(X){var H=X.Interactable;X.actions.phases.reflow=!0,H.prototype.reflow=function(te){return function(le,he,be){for(var Te=le.getAllElements(),Me=be.window.Promise,$e=Me?[]:null,je=function(){var Ke=Te[Le],ft=le.getRect(Ke);if(!ft)return 1;var Mt,Tt=g(be.interactions.list,function(Vt){return Vt.interacting()&&Vt.interactable===le&&Vt.element===Ke&&Vt.prepared.name===he.name});if(Tt)Tt.move(),$e&&(Mt=Tt._reflowPromise||new Me(function(Vt){Tt._reflowResolve=Vt}));else{var Rt=Us(ft),Xt=function(Vt){return{coords:Vt,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:Rt.x,y:Rt.y},client:{x:Rt.x,y:Rt.y},timeStamp:be.now()});Mt=function(Vt,ai,Ii,Ji,Si){var Pi=Vt.interactions.new({pointerType:"reflow"}),wr={interaction:Pi,event:Si,pointer:Si,eventTarget:Ii,phase:"reflow"};Pi.interactable=ai,Pi.element=Ii,Pi.prevEvent=Si,Pi.updatePointer(Si,Si,Ii,!0),pn(Pi.coords.delta),_s(Pi.prepared,Ji),Pi._doPhase(wr);var gn=Vt.window,Ta=gn.Promise,ao=Ta?new Ta(function(Wu){Pi._reflowResolve=Wu}):void 0;return Pi._reflowPromise=ao,Pi.start(Ji,ai,Ii),Pi._interacting?(Pi.move(wr),Pi.end(Si)):(Pi.stop(),Pi._reflowResolve()),Pi.removePointer(Si,Si),ao}(be,le,Ke,he,Xt)}$e&&$e.push(Mt)},Le=0;Le<Te.length&&!je();Le++);return $e&&Me.all($e).then(function(){return le})}(this,te,X)}},listeners:{"interactions:stop":function(X,H){var te=X.interaction;te.pointerType==="reflow"&&(te._reflowResolve&&te._reflowResolve(),function(le,he){le.splice(le.indexOf(he),1)}(H.interactions.list,te))}}},Gx=Vx;if(ta.use(Br),ta.use(Af),ta.use(M5),ta.use(Kg),ta.use(E5),ta.use(Os),ta.use(et),ta.use(Ni),ta.use(Gx),ta.default=ta,n(t)==="object"&&t)try{t.exports=ta}catch{}return ta.default=ta,ta})})(xre);const $P=xre.exports,Ym={dialog:"dialog",panel:"panel",scrim:"scrim",container:"container",containerOpen:"container--open",containerEmbedded:"container--embedded",assistiveText:"assistive-text",openingActive:"dialog--opening-active"},uu={actionBar:"action-bar",alerts:"alerts",content:"content",contentTop:"content-top",contentBottom:"content-bottom",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerStart:"footer-start",footerEnd:"footer-end"},Xm=25,OP=25,JY={x:0,y:0},QY={top:0,right:0,bottom:0,left:0},FSe=`:host{--calcite-dialog-scrim-background-color:rgba(0, 0, 0, 0.85);pointer-events:none;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;--calcite-internal-dialog-animation-offset:20px}:host([modal]){position:absolute}.container{pointer-events:auto;position:fixed;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;align-items:center;justify-content:center;overflow:hidden;color:var(--calcite-color-text-2);opacity:0;visibility:hidden;transition:visibility 0ms linear var(--calcite-internal-animation-timing-slow), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88)}:host([placement=top]) .container{align-items:flex-start;justify-content:center}:host([placement=top-start]) .container{align-items:flex-start;justify-content:flex-start}:host([placement=top-end]) .container{align-items:flex-start;justify-content:flex-end}:host([placement=bottom]) .container{align-items:flex-end;justify-content:center}:host([placement=bottom-start]) .container{align-items:flex-end;justify-content:flex-start}:host([placement=bottom-end]) .container{align-items:flex-end;justify-content:flex-end}:host(:not([modal])) .container{pointer-events:none}:host([scale=s]){--calcite-internal-dialog-content-padding:var(--calcite-dialog-content-space, var(--calcite-spacing-sm));--calcite-internal-dialog-min-size-x:198px;--calcite-internal-dialog-min-size-y:140px}:host([scale=m]){--calcite-internal-dialog-content-padding:var(--calcite-dialog-content-space, var(--calcite-spacing-md));--calcite-internal-dialog-min-size-x:288px;--calcite-internal-dialog-min-size-y:180px}:host([scale=l]){--calcite-internal-dialog-content-padding:var(--calcite-dialog-content-space, var(--calcite-spacing-lg));--calcite-internal-dialog-min-size-x:388px;--calcite-internal-dialog-min-size-y:220px}.scrim{--calcite-scrim-background:var(--calcite-dialog-scrim-background-color, var(--calcite-color-transparent-scrim));--calcite-scrim-background-color:var(
    --calcite-dialog-scrim-background-color,
    var(--calcite-color-transparent-scrim)
  );position:fixed;inset:0px;display:flex;overflow-y:hidden}calcite-panel{--calcite-panel-content-space:var(--calcite-dialog-content-space, var(--calcite-internal-dialog-content-padding));--calcite-panel-footer-padding:var(--calcite-dialog-footer-space);--calcite-panel-header-border-block-end:var(--calcite-border-width-sm) solid var(--calcite-dialog-border-color);--calcite-panel-background-color:var(--calcite-dialog-background-color)}.dialog{pointer-events:none;position:relative;z-index:var(--calcite-z-index-modal);margin:1.5rem;box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;border-radius:0.25rem;opacity:0;--tw-shadow:0 2px 12px -4px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.16);--tw-shadow-colored:0 2px 12px -4px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);-webkit-overflow-scrolling:touch;visibility:hidden;transition:inset-block var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88);min-inline-size:var(--calcite-dialog-min-size-x, var(--calcite-internal-dialog-min-size-x));max-inline-size:var(--calcite-dialog-max-size-x, 100%);min-block-size:var(--calcite-dialog-min-size-y, var(--calcite-internal-dialog-min-size-y));max-block-size:var(--calcite-dialog-max-size-y, 100%);--calcite-internal-dialog-hidden-position:calc(
    var(--calcite-dialog-offset-y, 0px) + var(--calcite-internal-dialog-animation-offset)
  );--calcite-internal-dialog-shown-position:var(--calcite-dialog-offset-y, 0);inset-inline-start:var(--calcite-dialog-offset-x, 0);inset-block-start:var(--calcite-internal-dialog-hidden-position)}.dialog--opening-active{inset-block-start:var(--calcite-internal-dialog-shown-position)}:host([menu-open]) .dialog{transition:visibility 0ms linear var(--calcite-internal-animation-timing-slow), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88)}.panel{border-radius:0.25rem}.container--open{opacity:1;visibility:visible;transition-delay:0ms}.container--open .dialog{pointer-events:auto;visibility:visible;opacity:1;transition:inset-block var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88);transition-delay:0ms}:host([width=small]) .dialog{inline-size:auto}:host([width-scale=s]) .dialog{inline-size:var(--calcite-dialog-size-x, 32rem);block-size:var(--calcite-dialog-size-y, auto)}@media screen and (max-width: 35rem){:host([width-scale=s]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;inset-inline-start:0;inset-block-start:var(--calcite-internal-dialog-animation-offset)}:host([width-scale=s]) .dialog--opening-active{inset-block-start:0}}:host([width-scale=m]) .dialog{inline-size:var(--calcite-dialog-size-x, 48rem);block-size:var(--calcite-dialog-size-y, auto)}@media screen and (max-width: 51rem){:host([width-scale=m]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;inset-inline-start:0;inset-block-start:var(--calcite-internal-dialog-animation-offset)}:host([width-scale=m]) .dialog--opening-active{inset-block-start:0}}:host([width-scale=l]) .dialog{inline-size:var(--calcite-dialog-size-x, 94rem);block-size:var(--calcite-dialog-size-y, auto)}@media screen and (max-width: 97rem){:host([width-scale=l]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;inset-inline-start:0;inset-block-start:var(--calcite-internal-dialog-animation-offset)}:host([width-scale=l]) .dialog--opening-active{inset-block-start:0}}:host([placement=cover]) .dialog{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;border-radius:0px}:host([placement=cover]) .panel{border-radius:0px}:host([kind]) .panel{border-start-start-radius:0px;border-start-end-radius:0px}:host([kind=brand]) .dialog{border-color:var(--calcite-color-brand)}:host([kind=danger]) .dialog{border-color:var(--calcite-color-status-danger)}:host([kind=info]) .dialog{border-color:var(--calcite-color-status-info)}:host([kind=success]) .dialog{border-color:var(--calcite-color-status-success)}:host([kind=warning]) .dialog{border-color:var(--calcite-color-status-warning)}:host([kind=brand][open]) .dialog,:host([kind=danger][open]) .dialog,:host([kind=info][open]) .dialog,:host([kind=success][open]) .dialog,:host([kind=warning][open]) .dialog{border-width:0px;border-block-start-width:4px;border-style:solid}.container--embedded{position:absolute;pointer-events:auto}.container--embedded calcite-scrim{position:absolute}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,zSe=FSe;let k8=0,eX="";const wre=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDialogBeforeClose=Ot(this,"calciteDialogBeforeClose",6),this.calciteDialogClose=Ot(this,"calciteDialogClose",6),this.calciteDialogBeforeOpen=Ot(this,"calciteDialogBeforeOpen",6),this.calciteDialogOpen=Ot(this,"calciteDialogOpen",6),this.calciteDialogScroll=Ot(this,"calciteDialogScroll",6),this.openTransitionProp="opacity",this.resizePosition={...QY},this.dragPosition={...JY},this.ignoreOpenChange=!1,this.mutationObserver=xl("mutation",()=>this.handleMutationObserver()),this.handleKeyDown=e=>{const{key:i,shiftKey:s,defaultPrevented:n}=e,{dragEnabled:r,resizable:o,resizePosition:l,dragPosition:c,transitionEl:f}=this;if(!(n||!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(i)))switch(i){case"ArrowUp":s&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().height-Xm,type:"blockSize"}),l.bottom-=Xm,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(c.y-=OP,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break;case"ArrowDown":s&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().height+Xm,type:"blockSize"}),l.bottom+=Xm,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(c.y+=OP,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break;case"ArrowLeft":s&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().width-Xm,type:"inlineSize"}),l.right-=Xm,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(c.x-=OP,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break;case"ArrowRight":s&&o&&f?(this.updateSize({size:this.getTransitionElDOMRect().width+Xm,type:"inlineSize"}),l.right+=Xm,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault()):r&&(c.x+=OP,this.updateTransform(),this.triggerInteractModifiers(),e.preventDefault());break}},this.setTransitionEl=e=>{this.transitionEl=e,this.setupInteractions()},this.openEnd=()=>{this.setFocus(),this.el.removeEventListener("calciteDialogOpen",this.openEnd)},this.handleInternalPanelScroll=e=>{e.target===this.panelEl&&(e.stopPropagation(),this.calciteDialogScroll.emit())},this.handleInternalPanelCloseClick=e=>{e.target===this.panelEl&&(e.stopPropagation(),this.open=!1)},this.handlePanelKeyDown=e=>{this.escapeDisabled&&e.key==="Escape"&&e.preventDefault()},this.handleOutsideClose=()=>{this.outsideCloseDisabled||(this.open=!1)},this.closeDialog=async()=>{if(this.beforeClose)try{await this.beforeClose()}catch{requestAnimationFrame(()=>{this.ignoreOpenChange=!0,this.open=!0,this.ignoreOpenChange=!1});return}k8--,this.opened=!1,this.updateOverflowHiddenClass()},this.updateOverflowHiddenClass=()=>{this.opened&&!this.embedded&&this.modal?this.addOverflowHiddenClass():this.removeOverflowHiddenClass()},this.handleMutationObserver=()=>{this.updateFocusTrapElements()},this.beforeClose=void 0,this.description=void 0,this.dragEnabled=!1,this.closeDisabled=!1,this.embedded=!1,this.escapeDisabled=!1,this.heading=void 0,this.headingLevel=void 0,this.kind=void 0,this.loading=!1,this.menuOpen=!1,this.messages=void 0,this.messageOverrides=void 0,this.modal=!1,this.open=!1,this.outsideCloseDisabled=!1,this.overlayPositioning="absolute",this.placement="center",this.resizable=!1,this.scale="m",this.widthScale="m",this.opened=!1,this.hasFooter=!0,this.hasContentTop=!1,this.hasContentBottom=!1,this.effectiveLocale=void 0,this.defaultMessages=void 0,this.assistiveText=null}onMessagesChange(){}onModalChange(){this.updateOverflowHiddenClass()}async componentWillLoad(){await qu(this),Eo(this),this.open&&this.openDialog()}componentDidLoad(){Co(this)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),Cl(this),Gu(this),ere(this),this.setupInteractions()}disconnectedCallback(){var e;this.removeOverflowHiddenClass(),(e=this.mutationObserver)==null||e.disconnect(),pS(this),Pl(this),ju(this),this.embedded=!1,this.cleanupInteractions()}render(){const{assistiveText:e,description:i,heading:s,opened:n}=this;return ke(Nr,{key:"bf406255eaa6d94c8443af185a74a2b2d58c6d59"},ke("div",{key:"de2a34b6da4a82c66e9fafdbdd2056e4e11e1315",class:{[Ym.container]:!0,[Ym.containerOpen]:n,[Ym.containerEmbedded]:this.embedded}},this.modal?ke("calcite-scrim",{class:Ym.scrim,onClick:this.handleOutsideClose}):null,ke("div",{key:"be47093e3a955ce45a71c555700143a4a1c7a166","aria-description":i,"aria-label":s,"aria-modal":Wo(this.modal),class:Ym.dialog,onKeyDown:this.handleKeyDown,ref:this.setTransitionEl,role:"dialog"},e?ke("div",{"aria-live":"polite",class:Ym.assistiveText,key:"assistive-text"},e):null,ke("slot",{key:"6ed9f10ae7d5ecc1ec9062d6aba559001d5194e6",name:uu.content},ke("calcite-panel",{key:"cd6ebaa7d7362cbeb70e9ae623f38298d1e831e3",beforeClose:this.beforeClose,class:Ym.panel,closable:!this.closeDisabled,closed:!n,description:i,heading:s,headingLevel:this.headingLevel,loading:this.loading,menuOpen:this.menuOpen,messageOverrides:this.messageOverrides,onCalcitePanelClose:this.handleInternalPanelCloseClick,onCalcitePanelScroll:this.handleInternalPanelScroll,onKeyDown:this.handlePanelKeyDown,overlayPositioning:this.overlayPositioning,ref:r=>this.panelEl=r,scale:this.scale},ke("slot",{key:"2ce955775c33b09fc849a083d0bcc1c8ce523dd8",name:uu.actionBar,slot:Yn.actionBar}),ke("slot",{key:"dd44184de251320af6225baa2e59571b881a23cd",name:uu.alerts,slot:Yn.alerts}),ke("slot",{key:"da343a1a10e015b04b37463c10592e612a576e9b",name:uu.headerActionsStart,slot:Yn.headerActionsStart}),ke("slot",{key:"6680fde2bd7ad6dc5803c78ea7250d11d4920b7c",name:uu.headerActionsEnd,slot:Yn.headerActionsEnd}),ke("slot",{key:"a17ca64188ffe6000792e67eafc838df575ebbc3",name:uu.headerContent,slot:Yn.headerContent}),ke("slot",{key:"7e048c4a9104053ca0a61ab2514b018efb4fc872",name:uu.headerMenuActions,slot:Yn.headerMenuActions}),ke("slot",{key:"6760c8a6c105a511fcb859cfd222f8c1355a82c4",name:uu.fab,slot:Yn.fab}),ke("slot",{key:"e0f2e7644281d408d8c21ce5bf16b08af0a59c3b",name:uu.contentTop,slot:Yn.contentTop}),ke("slot",{key:"01889c3b7fc13bc49521c27feb2ab35346552504",name:uu.contentBottom,slot:Yn.contentBottom}),ke("slot",{key:"593bad35110b5d7e7b44d598b397e4b87cc28e28",name:uu.footerStart,slot:Yn.footerStart}),ke("slot",{key:"5e84099e096a6afb678cce9731b189f4011dc067",name:uu.footer,slot:Yn.footer}),ke("slot",{key:"69a805bd0c1f43a6d165939e62db562428f39f11",name:uu.footerEnd,slot:Yn.footerEnd}),ke("slot",{key:"b49e14ff6d2c63caaa8fd296920618e7673eb71b"}))))))}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}handleInteractionChange(){this.setupInteractions()}updateAssistiveText(){const{messages:e}=this;this.assistiveText=e&&(this.dragEnabled||this.resizable)?`${this.dragEnabled?e.dragEnabled:""} ${this.resizable?e.resizeEnabled:""}`:null}handleEscape(e){this.open&&!this.escapeDisabled&&e.key==="Escape"&&!e.defaultPrevented&&(this.open=!1,e.preventDefault())}async setFocus(){var e;return await Po(this),((e=this.panelEl)==null?void 0:e.setFocus())??Q6(this.el)}async updateFocusTrapElements(){tre(this)}async scrollContentTo(e){var i;await((i=this.panelEl)==null?void 0:i.scrollContentTo(e))}onBeforeOpen(){this.calciteDialogBeforeOpen.emit()}onOpen(){this.calciteDialogOpen.emit(),f$(this)}onBeforeClose(){this.calciteDialogBeforeClose.emit()}onClose(){this.calciteDialogClose.emit(),pS(this)}toggleDialog(e){this.ignoreOpenChange||(e?this.openDialog():this.closeDialog())}handleOpenedChange(e){this.transitionEl.classList.toggle(Ym.openingActive,e),of(this)}async triggerInteractModifiers(){const{interaction:e}=this;e&&(await e.reflow({name:"drag"}),await e.reflow({name:"resize"}))}getTransitionElDOMRect(){return this.transitionEl.getBoundingClientRect()}updateTransform(){const{dragPosition:{x:e,y:i},resizePosition:s,transitionEl:n,dragEnabled:r,resizable:o}=this;if(!n)return;if(!r&&!o){n.style.transform=null;return}const{top:l,right:c,bottom:f,left:y}=this.getAdjustedResizePosition(s),_=Math.round(e+y+c),x=Math.round(i+l+f);n.style.transform=_||x?`translate(${_}px, ${x}px)`:null}updateSize({type:e,size:i}){const{transitionEl:s}=this;s&&(s.style[e]=i!==null?`${Math.round(i)}px`:null)}cleanupInteractions(){var e;(e=this.interaction)==null||e.unset(),this.updateSize({size:null,type:"inlineSize"}),this.updateSize({size:null,type:"blockSize"}),this.dragPosition={...JY},this.resizePosition={...QY},this.updateTransform()}setupInteractions(){this.cleanupInteractions();const{el:e,transitionEl:i,resizable:s,dragEnabled:n,resizePosition:r,dragPosition:o}=this;if(!(!i||!this.open)){if((s||n)&&(this.interaction=$P(i,{context:e.ownerDocument})),s){const{minInlineSize:l,minBlockSize:c,maxInlineSize:f,maxBlockSize:y}=window.getComputedStyle(i);this.interaction.resizable({edges:{top:!0,right:!0,bottom:!0,left:!0},modifiers:[$P.modifiers.restrictSize({min:{width:this.isPixelValue(l)?parseInt(l,10):0,height:this.isPixelValue(c)?parseInt(c,10):0},max:{width:this.isPixelValue(f)?parseInt(f,10):window.innerWidth,height:this.isPixelValue(y)?parseInt(y,10):window.innerHeight}}),$P.modifiers.restrict({restriction:"parent"})],listeners:{move:({rect:_,deltaRect:x})=>{x&&(r.top+=x.top,r.right+=x.right,r.bottom+=x.bottom,r.left+=x.left),this.updateSize({size:_.width,type:"inlineSize"}),this.updateSize({size:_.height,type:"blockSize"}),this.updateTransform()}}})}n&&this.interaction.draggable({modifiers:[$P.modifiers.restrictRect({restriction:"parent"})],listeners:{move:({dx:l,dy:c})=>{o.x+=l,o.y+=c,this.updateTransform()}}})}}isPixelValue(e){return e.indexOf("px")!==-1}getAdjustedResizePosition({top:e,right:i,bottom:s,left:n}){const r=e/2,o=i/2,l=s/2,c=n/2;switch(this.placement){case"top":return{top:e,right:o,bottom:0,left:c};case"top-start":return{top:e,right:0,bottom:0,left:n};case"top-end":return{top:e,right:i,bottom:0,left:0};case"bottom":return{top:0,right:o,bottom:s,left:c};case"bottom-start":return{top:0,right:0,bottom:s,left:n};case"bottom-end":return{top:0,right:i,bottom:s,left:0};case"cover":case"center":default:return{top:r,right:o,bottom:l,left:c}}}async openDialog(){await Ane(this.el),this.el.addEventListener("calciteDialogOpen",this.openEnd),this.opened=!0,this.updateOverflowHiddenClass()}addOverflowHiddenClass(){k8===0&&(eX=document.documentElement.style.overflow),k8++,document.documentElement.style.setProperty("overflow","hidden")}removeOverflowHiddenClass(){document.documentElement.style.setProperty("overflow",eX)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],modal:["onModalChange"],effectiveLocale:["effectiveLocaleChange"],open:["handleInteractionChange","toggleDialog"],placement:["handleInteractionChange"],resizable:["handleInteractionChange","updateAssistiveText"],dragEnabled:["handleInteractionChange","updateAssistiveText"],messages:["updateAssistiveText"],opened:["handleOpenedChange"]}}static get style(){return zSe}},[1,"calcite-dialog",{beforeClose:[16],description:[1],dragEnabled:[516,"drag-enabled"],closeDisabled:[516,"close-disabled"],embedded:[1028],escapeDisabled:[516,"escape-disabled"],heading:[1],headingLevel:[514,"heading-level"],kind:[513],loading:[516],menuOpen:[516,"menu-open"],messages:[1040],messageOverrides:[1040],modal:[516],open:[1540],outsideCloseDisabled:[516,"outside-close-disabled"],overlayPositioning:[513,"overlay-positioning"],placement:[513],resizable:[516],scale:[513],widthScale:[513,"width-scale"],opened:[32],hasFooter:[32],hasContentTop:[32],hasContentBottom:[32],effectiveLocale:[32],defaultMessages:[32],assistiveText:[32],setFocus:[64],updateFocusTrapElements:[64],scrollContentTo:[64]},[[8,"keydown","handleEscape"]],{messageOverrides:["onMessagesChange"],modal:["onModalChange"],effectiveLocale:["effectiveLocaleChange"],open:["handleInteractionChange","toggleDialog"],placement:["handleInteractionChange"],resizable:["handleInteractionChange","updateAssistiveText"],dragEnabled:["handleInteractionChange","updateAssistiveText"],messages:["updateAssistiveText"],opened:["handleOpenedChange"]}]);function Sre(){if(typeof customElements>"u")return;["calcite-dialog","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-panel","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-dialog":customElements.get(e)||customElements.define(e,wre);break;case"calcite-action":customElements.get(e)||sm();break;case"calcite-action-menu":customElements.get(e)||aC();break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break;case"calcite-panel":customElements.get(e)||bre();break;case"calcite-popover":customElements.get(e)||ex();break;case"calcite-scrim":customElements.get(e)||rq();break}})}Sre();const qSe=wre,VSe=Sre,GSe=Object.freeze(Object.defineProperty({__proto__:null,CalciteDialog:qSe,defineCustomElement:VSe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const jSe={container:"container"},BSe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.5rem)}:host([scale=m]) .container{gap:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.75rem)}:host([scale=l]) .container{gap:0.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1)}:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:0.5rem}:host([layout=inline][scale=l]) .container{gap:0.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity:1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}",HSe=BSe,USe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalLabelClick=Ot(this,"calciteInternalLabelClick",2),this.labelClickHandler=e=>{var i;((i=window.getSelection())==null?void 0:i.type)!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})},this.alignment="start",this.for=void 0,this.scale="m",this.layout="default"}handleForChange(){lxe(this.el)}connectedCallback(){document.dispatchEvent(new CustomEvent(eM))}disconnectedCallback(){document.dispatchEvent(new CustomEvent(J9))}render(){return ke(Nr,{key:"c3eff09792519c9e5a76ee28e3754db83b536f99",onClick:this.labelClickHandler},ke("div",{key:"387902edd9b59be290f95ad6c2721584037d7256",class:jSe.container},ke("slot",{key:"b54d782522e95323333040e40e1a6dd06b52a575"})))}get el(){return this}static get watchers(){return{for:["handleForChange"]}}static get style(){return HSe}},[1,"calcite-label",{alignment:[513],for:[513],scale:[513],layout:[513]},void 0,{for:["handleForChange"]}]);function YSe(){if(typeof customElements>"u")return;["calcite-label"].forEach(e=>{switch(e){case"calcite-label":customElements.get(e)||customElements.define(e,USe);break}})}YSe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const XSe={dropdownTrigger:"trigger"},WSe=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:var(--calcite-z-index-dropdown);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;block-size:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width-scale=s]){--calcite-dropdown-width:12rem}:host([width-scale=m]){--calcite-dropdown-width:14rem}:host([width-scale=l]){--calcite-dropdown-width:16rem}:host([hidden]){display:none}[hidden]{display:none}",ZSe=WSe,KSe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownSelect=Ot(this,"calciteDropdownSelect",6),this.calciteDropdownBeforeClose=Ot(this,"calciteDropdownBeforeClose",6),this.calciteDropdownClose=Ot(this,"calciteDropdownClose",6),this.calciteDropdownBeforeOpen=Ot(this,"calciteDropdownBeforeOpen",6),this.calciteDropdownOpen=Ot(this,"calciteDropdownOpen",6),this.items=[],this.groups=[],this.mutationObserver=xl("mutation",()=>this.updateItems()),this.resizeObserver=xl("resize",e=>this.resizeObserverCallback(e)),this.openTransitionProp="opacity",this.guid=`calcite-dropdown-${tm()}`,this.focusLastDropdownItem=!1,this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?gre(i,e):null},this.updateTriggers=e=>{this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)},this.updateItems=()=>{this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)},this.updateGroups=e=>{const i=e.target.assignedElements({flatten:!0}).filter(s=>s==null?void 0:s.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupScale()},this.resizeObserverCallback=e=>{e.forEach(i=>{const{target:s}=i;s===this.referenceEl?this.setDropdownWidth():s===this.scrollerEl&&this.setMaxScrollerHeight()})},this.setDropdownWidth=()=>{const{referenceEl:e,scrollerEl:i}=this,s=e==null?void 0:e.clientWidth;!s||!i||(i.style.minWidth=`${s}px`)},this.setMaxScrollerHeight=()=>{const{scrollerEl:e}=this;if(!e)return;this.reposition(!0);const i=this.getMaxScrollerHeight();e.style.maxHeight=i>0?`${i}px`:"",this.reposition(!0)},this.setScrollerAndTransitionEl=e=>{this.resizeObserver.observe(e),this.scrollerEl=e,this.transitionEl=e},this.setReferenceEl=e=>{this.referenceEl=e,Eb(this,this.referenceEl,this.floatingEl),this.resizeObserver.observe(e)},this.setFloatingEl=e=>{this.floatingEl=e,Eb(this,this.referenceEl,this.floatingEl)},this.keyDownHandler=e=>{if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:s}=e;if(!i){if(s==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&s==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}nC(s)?(this.toggleDropdown(),e.preventDefault()):(s==="ArrowDown"||s==="ArrowUp")&&(this.focusLastDropdownItem=s==="ArrowUp",this.open=!0,this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd))}},this.focusOnFirstActiveOrDefaultItem=()=>{const i=this.getTraversableItems().find(s=>s.selected)||(this.focusLastDropdownItem?this.items[this.items.length-1]:this.items[0]);this.focusLastDropdownItem=!1,i&&Yy(i)},this.onOpenEnd=()=>{this.focusOnFirstActiveOrDefaultItem(),this.el.removeEventListener("calciteDropdownOpen",this.onOpenEnd)},this.toggleDropdown=()=>{this.open=!this.open,this.open&&this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd)},this.open=!1,this.closeOnSelectDisabled=!1,this.disabled=!1,this.flipPlacements=void 0,this.maxItems=0,this.overlayPositioning="absolute",this.placement=pSe,this.selectedItems=[],this.type="click",this.widthScale=void 0,this.scale="m"}openHandler(){if(of(this),this.disabled){this.open=!1;return}this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupScale()}async setFocus(){await Po(this),Q6(this.referenceEl)}connectedCallback(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.open&&(this.openHandler(),of(this)),this.updateItems(),Eb(this,this.referenceEl,this.floatingEl)}componentWillLoad(){Eo(this)}componentDidLoad(){Co(this),Eb(this,this.referenceEl,this.floatingEl)}componentDidRender(){kg(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),aM(this,this.referenceEl,this.floatingEl)}render(){const{open:e,guid:i}=this;return ke(Nr,{key:"377c3d9687bc025f004b4efe58bfa5f0893d86d0"},ke(Ng,{key:"9e2f48be045fc6db10cc7203a8b998ec2b6abafd",disabled:this.disabled},ke("div",{key:"8607de2d53a4f8c4b29206ee56aa23ad4c2cbe3d",class:"calcite-trigger-container",id:`${i}-menubutton`,onClick:this.toggleDropdown,onKeyDown:this.keyDownHandler,ref:this.setReferenceEl},ke("slot",{key:"07de8df34055ddc39301654a5ca312ddf293e6a9","aria-controls":`${i}-menu`,"aria-expanded":Wo(e),"aria-haspopup":"menu",name:XSe.dropdownTrigger,onSlotchange:this.updateTriggers})),ke("div",{key:"c1469efb62eb704b021ce6479ad55deda59582d4","aria-hidden":Wo(!e),class:"calcite-dropdown-wrapper",ref:this.setFloatingEl},ke("div",{key:"f875166d486a53cd393f17d9295974aa449d449f","aria-labelledby":`${i}-menubutton`,class:{"calcite-dropdown-content":!0,[f2.animation]:!0,[f2.animationActive]:e},id:`${i}-menu`,ref:this.setScrollerAndTransitionEl,role:"menu"},ke("slot",{key:"bc6e61383aaf85b3d6242a86c50da68bc8b31e27",onSlotchange:this.updateGroups})))))}async reposition(e=!1){const{floatingEl:i,referenceEl:s,placement:n,overlayPositioning:r,filteredFlipPlacements:o}=this;return nq(this,{floatingEl:i,referenceEl:s,overlayPositioning:r,placement:n,flipPlacements:o,type:"menu"},e)}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,s=i.target,n=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(s);break;case"ArrowDown":B0(n,s,"next");break;case"ArrowUp":B0(n,s,"previous");break;case"Home":B0(n,s,"first");break;case"End":B0(n,s,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}updateGroupScale(){var e;(e=this.groups)==null||e.forEach(i=>i.scale=this.scale)}onBeforeOpen(){this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit()}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getMaxScrollerHeight(){const{maxItems:e,items:i}=this;let s=0,n=0,r;return this.groups.forEach(o=>{e>0&&s<e&&Array.from(o.children).forEach((l,c)=>{c===0&&(isNaN(r)&&(r=l.offsetTop),n+=r),s<e&&(n+=l.offsetHeight,s+=1)})}),i.length>e?n:0}closeCalciteDropdown(e=!0){this.open=!1,e&&Yy(this.triggers[0])}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}}static get style(){return ZSe}},[17,"calcite-dropdown",{open:[1540],closeOnSelectDisabled:[516,"close-on-select-disabled"],disabled:[516],flipPlacements:[16],maxItems:[514,"max-items"],overlayPositioning:[513,"overlay-positioning"],placement:[513],selectedItems:[1040],type:[513],widthScale:[513,"width-scale"],scale:[513],setFocus:[64],reposition:[64]},[[8,"click","closeCalciteDropdownOnClick"],[0,"calciteInternalDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"pointerenter","pointerEnterHandler"],[1,"pointerleave","pointerLeaveHandler"],[0,"calciteInternalDropdownItemKeyEvent","calciteInternalDropdownItemKeyEvent"],[0,"calciteInternalDropdownItemSelect","handleItemSelect"]],{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}]);function JSe(){if(typeof customElements>"u")return;["calcite-dropdown"].forEach(e=>{switch(e){case"calcite-dropdown":customElements.get(e)||customElements.define(e,KSe);break}})}JSe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const o0={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const QSe=":host{position:relative;display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-color-border-3)}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:0.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:0.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",eEe=QSe,Ere=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalDropdownItemChange=Ot(this,"calciteInternalDropdownItemChange",6),this.updateItems=()=>{Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)},this.mutationObserver=xl("mutation",()=>this.updateItems()),this.groupTitle=void 0,this.scale="m",this.selectionMode="single"}handlePropsChange(){this.updateItems()}connectedCallback(){var e;this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}componentWillLoad(){this.groupPosition=this.getGroupPosition()}disconnectedCallback(){var e;(e=this.mutationObserver)==null||e.disconnect()}render(){const e=this.groupTitle?ke("span",{"aria-hidden":"true",class:"dropdown-title"},this.groupTitle):null,i=this.groupPosition>0?ke("div",{class:"dropdown-separator",role:"separator"}):null;return ke(Nr,{key:"f41943751aefdb17d4f5d5bd8778c219cfd01a00","aria-label":this.groupTitle,role:"group"},ke("div",{key:"87b78040b93c06081ca8282a785d466ed8fcf334",class:{[o0.container]:!0}},i,e,ke("slot",{key:"f635a5bdbe439315eba6292a4858cbd8519d23d1"})))}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}getGroupPosition(){return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-dropdown-group"),this.el)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{selectionMode:["handlePropsChange"]}}static get style(){return eEe}},[17,"calcite-dropdown-group",{groupTitle:[513,"group-title"],scale:[513],selectionMode:[513,"selection-mode"]},[[0,"calciteInternalDropdownItemSelect","updateActiveItemOnChange"]],{selectionMode:["handlePropsChange"]}]);function Cre(){if(typeof customElements>"u")return;["calcite-dropdown-group"].forEach(e=>{switch(e){case"calcite-dropdown-group":customElements.get(e)||customElements.define(e,Ere);break}})}Cre();const tEe=Ere,iEe=Cre,klt=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownGroup:tEe,defineCustomElement:iEe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const sEe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);text-align:start}.container a{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);outline-color:transparent}.dropdown-item-content{flex:1 1 auto;padding-block:0.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:scale(0.9)}:host([scale=s]) .container{padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:0.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-xl)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-xl)}:host(:focus){outline:2px solid transparent;outline-offset:2px;outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host(:focus) .container{color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1);text-decoration-line:none}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-color-text-1)}:host(:active:not([disabled])) .container{background-color:var(--calcite-color-foreground-3)}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-color-brand)}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-color-border-1);opacity:1}:host([selected]) .dropdown-item-icon{color:var(--calcite-color-brand);opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,nEe=sEe,Pre=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownItemSelect=Ot(this,"calciteDropdownItemSelect",6),this.calciteInternalDropdownItemSelect=Ot(this,"calciteInternalDropdownItemSelect",6),this.calciteInternalDropdownItemKeyEvent=Ot(this,"calciteInternalDropdownItemKeyEvent",6),this.calciteInternalDropdownCloseRequest=Ot(this,"calciteInternalDropdownCloseRequest",6),this.disabled=!1,this.href=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.iconEnd=void 0,this.label=void 0,this.rel=void 0,this.selected=!1,this.target=void 0,this.selectionMode="single",this.scale="m"}async setFocus(){var e;await Po(this),(e=this.el)==null||e.focus()}componentWillLoad(){Eo(this),this.initialize()}componentDidLoad(){Co(this)}connectedCallback(){this.initialize()}componentDidRender(){kg(this)}render(){const{href:e,selectionMode:i,label:s,iconFlipRtl:n}=this,r=ke("calcite-icon",{key:"1ec1c941651dda8f39fa15427592141f04180f3e",class:o0.iconStart,flipRtl:n==="start"||n==="both",icon:this.iconStart,scale:Lc(this.scale)}),o=ke("span",{key:"3ab167ed4054ca34b4e13e72b752af6cf25522ae",class:o0.itemContent},ke("slot",{key:"88cf44809fb48450c66cc8f105bbda008a78157d"})),l=ke("calcite-icon",{key:"32fb27182943a032c0037f1f878a95c194d2dff1",class:o0.iconEnd,flipRtl:n==="end"||n==="both",icon:this.iconEnd,scale:Lc(this.scale)}),c=this.iconStart&&this.iconEnd?[r,o,l]:this.iconStart?[r,o]:this.iconEnd?[o,l]:o,f=e?ke("a",{"aria-label":s,class:o0.link,href:e,ref:S=>this.childLink=S,rel:this.rel,tabIndex:-1,target:this.target},c):c,y=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",_=i!=="none"?Wo(this.selected):null,{disabled:x}=this;return ke(Nr,{key:"beec8e51bf18bdcab1928181828b372cc70bb7ee","aria-checked":_,"aria-label":e?"":s,role:y,tabIndex:x?-1:0},ke(Ng,{key:"5cbbd1074d6c571f4cac3a99e4a2c09bf113db55",disabled:x},ke("div",{key:"bff025aeb280c9d0d829e5cf4d94e9392604e607",class:{[o0.container]:!0,[o0.containerNone]:i==="none"}},i!=="none"?ke("calcite-icon",{class:o0.icon,icon:i==="multiple"?"check":"bullet-point",scale:Lc(this.scale)}):null,f)))}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}get el(){return this}static get style(){return nEe}},[1,"calcite-dropdown-item",{disabled:[516],href:[513],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],iconEnd:[513,"icon-end"],label:[1],rel:[513],selected:[1540],target:[513],selectionMode:[1,"selection-mode"],scale:[513],setFocus:[64]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"],[16,"calciteInternalDropdownItemChange","updateActiveItemOnChange"]]]);function Tre(){if(typeof customElements>"u")return;["calcite-dropdown-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-dropdown-item":customElements.get(e)||customElements.define(e,Pre);break;case"calcite-icon":customElements.get(e)||Qo();break}})}Tre();const rEe=Pre,oEe=Tre,$lt=Object.freeze(Object.defineProperty({__proto__:null,CalciteDropdownItem:rEe,defineCustomElement:oEe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const m2={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},aEe={menu:"ellipsis"},lEe={container:"container"},uEe=':host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0px;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns:1}:host([columns="2"]){--calcite-internal-action-group-columns:2}:host([columns="3"]){--calcite-internal-action-group-columns:3}:host([columns="4"]){--calcite-internal-action-group-columns:4}:host([columns="5"]){--calcite-internal-action-group-columns:5}:host([columns="6"]){--calcite-internal-action-group-columns:6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)), auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([hidden]){display:none}[hidden]{display:none}',cEe=uEe,hEe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.setMenuOpen=e=>{this.menuOpen=!!e.target.open},this.handleMenuActionsSlotChange=e=>{this.hasMenuActions=ks(e)},this.expanded=!1,this.label=void 0,this.layout="vertical",this.columns=void 0,this.menuOpen=!1,this.overlayPositioning="absolute",this.scale=void 0,this.menuFlipPlacements=void 0,this.menuPlacement=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0,this.hasMenuActions=!1}expandedHandler(){this.menuOpen=!1}onMessagesChange(){}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}async setFocus(){await Po(this),this.el.focus()}connectedCallback(){Cl(this),Gu(this),K6(this)}disconnectedCallback(){Pl(this),ju(this),J6(this)}async componentWillLoad(){Eo(this),await qu(this)}componentDidLoad(){Co(this)}renderMenu(){const{expanded:e,menuOpen:i,scale:s,layout:n,messages:r,overlayPositioning:o,hasMenuActions:l,menuFlipPlacements:c,menuPlacement:f}=this;return ke("calcite-action-menu",{expanded:e,flipPlacements:c??(n==="horizontal"?["top","bottom"]:["left","right"]),hidden:!l,label:r.more,onCalciteActionMenuOpen:this.setMenuOpen,open:i,overlayPositioning:o,placement:f??(n==="horizontal"?"bottom-start":"leading-start"),scale:s},ke("calcite-action",{icon:aEe.menu,scale:s,slot:p2.trigger,text:r.more,textEnabled:e}),ke("slot",{name:m2.menuActions,onSlotchange:this.handleMenuActionsSlotChange}),ke("slot",{name:m2.menuTooltip,slot:p2.tooltip}))}render(){return ke("div",{key:"8143606c5745053f15140f34ff5ea375a683325f","aria-label":this.label,class:lEe.container,role:"group"},ke("slot",{key:"e8c2821b9ce2e9d0293478989fc31d24f043f9c3"}),this.renderMenu())}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return cEe}},[17,"calcite-action-group",{expanded:[516],label:[1],layout:[513],columns:[514],menuOpen:[1540,"menu-open"],overlayPositioning:[513,"overlay-positioning"],scale:[513],menuFlipPlacements:[16],menuPlacement:[513,"menu-placement"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],hasMenuActions:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Ire(){if(typeof customElements>"u")return;["calcite-action-group","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-group":customElements.get(e)||customElements.define(e,hEe);break;case"calcite-action":customElements.get(e)||sm();break;case"calcite-action-menu":customElements.get(e)||aC();break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break;case"calcite-popover":customElements.get(e)||ex();break}})}Ire();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const dEe=2,tX=t=>t.reduce((e,i)=>e+i,0)/t.length,Rlt=t=>{const e=t.filter(s=>s.slot!==m2.menuActions),i=e==null?void 0:e.length;return{actionWidth:i?tX(e.map(s=>s.clientWidth||0)):0,actionHeight:i?tX(e.map(s=>s.clientHeight||0)):0}},fEe=({width:t,actionWidth:e,layout:i,height:s,actionHeight:n,groupCount:r})=>{const o=i==="horizontal"?t:s,l=i==="horizontal"?e:n;return Math.floor((o-r*dEe)/l)},Llt=({layout:t,actionCount:e,actionWidth:i,width:s,actionHeight:n,height:r,groupCount:o})=>Math.max(e-fEe({width:s,actionWidth:i,layout:t,height:r,actionHeight:n,groupCount:o}),0),Mre=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===p2.trigger:!0),Flt=({actionGroups:t,expanded:e,overflowCount:i})=>{let s=i;t.reverse().forEach(n=>{let r=0;const o=Mre(n).reverse();o.forEach(l=>{l.slot===m2.menuActions&&(l.removeAttribute("slot"),l.textEnabled=e)}),s>0&&o.some(l=>(o.filter(f=>!f.slot).length>1&&o.length>2&&!l.closest("calcite-action-menu")&&(l.textEnabled=!0,l.setAttribute("slot",m2.menuActions),r++,r>1&&s--),s<1)),So(n)})},iX={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function pEe(t,e){var i;return t||((i=e.closest("calcite-shell-panel"))==null?void 0:i.position)||"start"}function sX({el:t,expanded:e}){Mre(t).filter(i=>i.slot!==m2.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const mEe=({tooltip:t,referenceElement:e,expanded:i,ref:s})=>(t&&(t.referenceElement=!i&&e?e:null),s&&s(e),e),gEe=({expanded:t,expandText:e,collapseText:i,expandLabel:s,collapseLabel:n,toggle:r,el:o,position:l,tooltip:c,ref:f,scale:y})=>{const _=ng(o)==="rtl",x=t?i:e,S=t?n:s,P=[iX.chevronsLeft,iX.chevronsRight];_&&P.reverse();const A=pEe(l,o)==="end",k=A?P[1]:P[0],$=A?P[0]:P[1];return ke("calcite-action",{icon:t?k:$,id:"expand-toggle",label:S,onClick:r,ref:G=>mEe({tooltip:c,referenceElement:G,expanded:t,ref:f}),scale:y,text:x,textEnabled:t,title:!t&&!c?x:null})};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const nX={actionGroupEnd:"action-group--end",container:"container"},yEe={expandTooltip:"expand-tooltip"},vEe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:block}@keyframes in{0%{opacity:0}100%{opacity:1}}:host{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:var(--calcite-action-pad-corner-radius, 0.125rem);background:transparent}:host([expanded][layout=vertical]) .container{max-inline-size:var(--calcite-action-pad-expanded-max-width, auto)}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:1px}.container{display:inline-flex;flex-direction:column;overflow-y:auto;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);gap:var(--calcite-action-pad-items-space, 0);border-radius:calc(var(--calcite-action-pad-corner-radius, 0.125rem) * 2);background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}.action-group--bottom{flex-grow:1;justify-content:flex-end;padding-block-end:0px}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]) .container .action-group--bottom{padding:0px}:host([layout=horizontal]) .container ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:1px}:host([hidden]){display:none}[hidden]{display:none}",_Ee=vEe,bEe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionPadToggle=Ot(this,"calciteActionPadToggle",6),this.mutationObserver=xl("mutation",()=>this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")))),this.actionMenuOpenHandler=e=>{if(e.target.menuOpen){const i=e.composedPath();Array.from(this.el.querySelectorAll("calcite-action-group")).forEach(s=>{i.includes(s)||(s.menuOpen=!1)})}},this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionPadToggle.emit()},this.handleDefaultSlotChange=e=>{const i=Mc(e).filter(s=>s==null?void 0:s.matches("calcite-action-group"));this.setGroupLayout(i)},this.handleTooltipSlotChange=e=>{const i=Mc(e).filter(s=>s==null?void 0:s.matches("calcite-tooltip"));this.expandTooltip=i[0]},this.actionsEndGroupLabel=void 0,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.position=void 0,this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.overlayPositioning="absolute",this.expandTooltip=void 0,this.effectiveLocale="",this.defaultMessages=void 0}expandedHandler(e){sX({el:this.el,expanded:e})}layoutHandler(){this.updateGroups()}onMessagesChange(){}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}connectedCallback(){var e;K6(this),Cl(this),Gu(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}disconnectedCallback(){var e;Pl(this),ju(this),J6(this),(e=this.mutationObserver)==null||e.disconnect()}async componentWillLoad(){Eo(this);const{el:e,expanded:i}=this;sX({el:e,expanded:i}),await qu(this)}componentDidLoad(){Co(this)}async setFocus(){var e;await Po(this),(e=this.el)==null||e.focus()}updateGroups(){this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")))}setGroupLayout(e){e.forEach(i=>i.layout=this.layout)}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,messages:s,el:n,position:r,toggleExpand:o,scale:l,layout:c,actionsEndGroupLabel:f,overlayPositioning:y}=this,_=i?null:ke(gEe,{collapseLabel:s.collapseLabel,collapseText:s.collapse,el:n,expandLabel:s.expandLabel,expandText:s.expand,expanded:e,position:r,scale:l,toggle:o,tooltip:this.expandTooltip});return _?ke("calcite-action-group",{class:nX.actionGroupEnd,label:f,layout:c,overlayPositioning:y,scale:l},ke("slot",{name:yEe.expandTooltip,onSlotchange:this.handleTooltipSlotChange}),_):null}render(){return ke(Nr,{key:"ca50c5f475d78b92b5347ab912727587420ceea5",onCalciteActionMenuOpen:this.actionMenuOpenHandler},ke("div",{key:"81b26e9b6bd0a04357fe00ef55111c6bb609f4e7",class:nX.container},ke("slot",{key:"e346dc6cfab0e26cfc694b43063715d7b845ae32",onSlotchange:this.handleDefaultSlotChange}),this.renderBottomActionGroup()))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return _Ee}},[17,"calcite-action-pad",{actionsEndGroupLabel:[1,"actions-end-group-label"],expandDisabled:[516,"expand-disabled"],expanded:[1540],layout:[513],position:[513],scale:[513],messages:[1040],messageOverrides:[1040],overlayPositioning:[513,"overlay-positioning"],expandTooltip:[32],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function xEe(){if(typeof customElements>"u")return;["calcite-action-pad","calcite-action","calcite-action-group","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-pad":customElements.get(e)||customElements.define(e,bEe);break;case"calcite-action":customElements.get(e)||sm();break;case"calcite-action-group":customElements.get(e)||Ire();break;case"calcite-action-menu":customElements.get(e)||aC();break;case"calcite-icon":customElements.get(e)||Qo();break;case"calcite-loader":customElements.get(e)||Zc();break;case"calcite-popover":customElements.get(e)||ex();break}})}xEe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const wEe={container:"container"},SEe=300,EEe=500,rX="aria-describedby";function Are(t){const{referenceElement:e}=t;return(typeof e=="string"?sC(t,{id:e}):e)||null}class CEe{constructor(){this.registeredElements=new WeakMap,this.registeredShadowRootCounts=new WeakMap,this.hoverOpenTimeout=null,this.hoverCloseTimeout=null,this.activeTooltip=null,this.registeredElementCount=0,this.clickedTooltip=null,this.queryTooltip=e=>{const{registeredElements:i}=this,s=e.find(n=>i.has(n));return i.get(s)},this.keyDownHandler=e=>{if(e.key==="Escape"&&!e.defaultPrevented){const{activeTooltip:i}=this;if(i!=null&&i.open){this.clearHoverTimeout(),this.closeActiveTooltip();const s=Are(i);s instanceof Element&&s.contains(e.target)&&e.preventDefault()}}},this.pointerMoveHandler=e=>{const i=e.composedPath(),{activeTooltip:s}=this,n=this.queryTooltip(i);if(this.pathHasOpenTooltip(n,i)){this.clearHoverTimeout();return}n!==this.clickedTooltip&&(n?this.openHoveredTooltip(n):s!=null&&s.open&&this.closeHoveredTooltip(),this.clickedTooltip=null)},this.clickHandler=e=>{this.clickedTooltip=null;const i=e.composedPath(),s=this.queryTooltip(i);if(this.pathHasOpenTooltip(s,i)){this.clearHoverTimeout();return}if(this.closeActiveTooltip(),!!s){if(this.clearHoverTimeout(),s.closeOnClick){this.clickedTooltip=s,this.toggleTooltip(s,!1);return}this.toggleTooltip(s,!0)}},this.blurHandler=()=>{this.closeActiveTooltip()},this.focusInHandler=e=>{const i=e.composedPath(),s=this.queryTooltip(i);if(this.pathHasOpenTooltip(s,i)){this.clearHoverTimeout();return}this.closeTooltipIfNotActive(s),s&&this.toggleFocusedTooltip(s,!0)},this.openHoveredTooltip=e=>{var i;this.hoverOpenTimeout=window.setTimeout(()=>{this.hoverOpenTimeout!==null&&(this.clearHoverCloseTimeout(),this.closeTooltipIfNotActive(e),this.toggleTooltip(e,!0))},(i=this.activeTooltip)!=null&&i.open?0:SEe)},this.closeHoveredTooltip=()=>{this.hoverCloseTimeout=window.setTimeout(()=>{this.hoverCloseTimeout!==null&&this.closeActiveTooltip()},EEe)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i);const s=this.getReferenceElShadowRootNode(e);s&&this.registerShadowRoot(s),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){const i=this.getReferenceElShadowRootNode(e);i&&this.unregisterShadowRoot(i),this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}pathHasOpenTooltip(e,i){const{activeTooltip:s}=this;return(s==null?void 0:s.open)&&i.includes(s)||(e==null?void 0:e.open)&&i.includes(e)}addShadowListeners(e){e.addEventListener("focusin",this.focusInHandler,{capture:!0})}removeShadowListeners(e){e.removeEventListener("focusin",this.focusInHandler,{capture:!0})}addListeners(){window.addEventListener("keydown",this.keyDownHandler,{capture:!0}),window.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.addEventListener("click",this.clickHandler,{capture:!0}),window.addEventListener("focusin",this.focusInHandler,{capture:!0}),window.addEventListener("blur",this.blurHandler)}removeListeners(){window.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),window.removeEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),window.removeEventListener("click",this.clickHandler,{capture:!0}),window.removeEventListener("focusin",this.focusInHandler,{capture:!0}),window.removeEventListener("blur",this.blurHandler)}clearHoverOpenTimeout(){window.clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null}clearHoverCloseTimeout(){window.clearTimeout(this.hoverCloseTimeout),this.hoverCloseTimeout=null}clearHoverTimeout(){this.clearHoverOpenTimeout(),this.clearHoverCloseTimeout()}closeTooltipIfNotActive(e){this.activeTooltip!==e&&this.closeActiveTooltip()}closeActiveTooltip(){const{activeTooltip:e}=this;e!=null&&e.open&&this.toggleTooltip(e,!1)}toggleFocusedTooltip(e,i){i&&this.clearHoverTimeout(),this.toggleTooltip(e,i)}toggleTooltip(e,i){e.open=i,this.activeTooltip=i?e:null}registerShadowRoot(e){const{registeredShadowRootCounts:i}=this,s=i.get(e),n=Math.min((typeof s=="number"?s:0)+1,1);n===1&&this.addShadowListeners(e),i.set(e,n)}unregisterShadowRoot(e){const{registeredShadowRootCounts:i}=this,s=i.get(e),n=Math.max((typeof s=="number"?s:1)-1,0);n===0&&this.removeShadowListeners(e),i.set(e,n)}getReferenceElShadowRootNode(e){return e instanceof Element?jbe(e):null}}const PEe=":host{--calcite-floating-ui-z-index:var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{inset-block-start:-5px}:host([data-placement^=top]) .calcite-floating-ui-anim{inset-block-start:5px}:host([data-placement^=left]) .calcite-floating-ui-anim{left:5px}:host([data-placement^=right]) .calcite-floating-ui-anim{left:-5px}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;border-radius:0.25rem;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);max-inline-size:20rem;max-block-size:20rem;text-align:start}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}:host([hidden]){display:none}[hidden]{display:none}",TEe=PEe,oX=new CEe,Dre=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTooltipBeforeClose=Ot(this,"calciteTooltipBeforeClose",6),this.calciteTooltipClose=Ot(this,"calciteTooltipClose",6),this.calciteTooltipBeforeOpen=Ot(this,"calciteTooltipBeforeOpen",6),this.calciteTooltipOpen=Ot(this,"calciteTooltipOpen",6),this.guid=`calcite-tooltip-${tm()}`,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=Are(this.el),Eb(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:s,effectiveReferenceElement:n}=this;e&&s&&!n&&console.warn(`${i.tagName}: reference-element id "${s}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(rX,i),oX.registerElement(e,this.el)},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&e.removeAttribute(rX),oX.unregisterElement(e))},this.closeOnClick=!1,this.label=void 0,this.offsetDistance=vre,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.referenceElement=void 0,this.effectiveReferenceElement=void 0,this.floatingLayout="vertical"}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){of(this),this.reposition(!0)}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement()}connectedCallback(){this.setUpReferenceElement(!0),this.open&&of(this)}async componentWillLoad(){this.open&&of(this)}componentDidLoad(){this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement()}disconnectedCallback(){this.removeReferences(),aM(this,this.effectiveReferenceElement,this.el)}async reposition(e=!1){const{el:i,effectiveReferenceElement:s,placement:n,overlayPositioning:r,offsetDistance:o,offsetSkidding:l,arrowEl:c}=this;return nq(this,{floatingEl:i,referenceEl:s,overlayPositioning:r,placement:n,offsetDistance:o,offsetSkidding:l,arrowEl:c,type:"tooltip"},e)}onBeforeOpen(){this.calciteTooltipBeforeOpen.emit()}onOpen(){this.calciteTooltipOpen.emit()}onBeforeClose(){this.calciteTooltipBeforeClose.emit()}onClose(){this.calciteTooltipClose.emit()}render(){const{effectiveReferenceElement:e,label:i,open:s,floatingLayout:n}=this,r=e&&s,o=!r;return ke(Nr,{key:"4f097fd8c6eda6dfcd5734e5aaea1f52092501e7","aria-hidden":Wo(o),"aria-label":i,"aria-live":"polite","calcite-hydrated-hidden":o,id:this.getId(),role:"tooltip"},ke("div",{key:"6b5055ab6f95277dd4daeaaff15cb9848d85eea0",class:{[f2.animation]:!0,[f2.animationActive]:r},ref:this.setTransitionEl},ke(_re,{key:"57f68bea5a7bb369d82437f10535cab9753677ea",floatingLayout:n,ref:l=>this.arrowEl=l}),ke("div",{key:"100b8318173849508952f996acaeb5bf81b8af43",class:wEe.container},ke("slot",{key:"f89d3ae9313d9555e6a7acdc32c323de85319a3a"}))))}get el(){return this}static get watchers(){return{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}}static get style(){return TEe}},[1,"calcite-tooltip",{closeOnClick:[516,"close-on-click"],label:[1],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[516],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],effectiveReferenceElement:[32],floatingLayout:[32],reposition:[64]},void 0,{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}]);function kre(){if(typeof customElements>"u")return;["calcite-tooltip"].forEach(e=>{switch(e){case"calcite-tooltip":customElements.get(e)||customElements.define(e,Dre);break}})}kre();const IEe=Dre,MEe=kre,AEe=Object.freeze(Object.defineProperty({__proto__:null,CalciteTooltip:IEe,defineCustomElement:MEe},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const DEe=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline}:host a,:host span{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0px;border-style:none;font-family:inherit;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none}:host a:hover,:host span:hover{text-decoration:none}:host a,:host span{outline-color:transparent}:host a:focus,:host span:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;margin-block-start:-0.25em}:host .calcite-link--icon.icon-start{margin-inline-end:0.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:0.5rem}:host span,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0px;color:var(--calcite-color-text-link);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor, currentColor), linear-gradient(var(--calcite-color-brand-underline), var(--calcite-color-brand-underline));background-position-x:0%, 100%;background-position-y:min(1.5em, 100%);background-repeat:no-repeat, no-repeat;background-size:0% 1px, 100% 1px}:host span:hover,:host span:focus,:host a:hover,:host a:focus{background-size:100% 1px, 100% 1px}:host span:active,:host a:active{background-size:100% 2px, 100% 2px}:host span.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%, 100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,kEe=DEe,NEe=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childElClickHandler=e=>{e.isTrusted||e.stopPropagation()},this.storeTagRef=e=>{this.childEl=e},this.disabled=!1,this.download=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.rel=void 0,this.target=void 0}componentWillLoad(){Eo(this)}componentDidLoad(){Co(this)}componentDidRender(){kg(this)}render(){const{download:e,el:i}=this,s=ng(i),n=this.href?"a":"span",r=ke("calcite-icon",{key:"c9844033e9bd5da35333b485aad27ddb2df6b039",class:"calcite-link--icon icon-start",flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:"s"}),o=ke("calcite-icon",{key:"f1de10682fee566552253cf2ae3cb6725f5e5f11",class:"calcite-link--icon icon-end",flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:"s"}),l=n,c=n==="span"?"link":null,f=n==="span"?0:null;return ke(Nr,{key:"5ad440468fcccb6fe7c146ec57462e7593f96109",role:"presentation"},ke(Ng,{key:"916c68cd97c31fa1ec69f408d25d3023749698e1",disabled:this.disabled},ke(l,{key:"e00cebc0c56b95c02192872ac84df996a74a5fa4",class:{[Yd.rtl]:s==="rtl"},download:n==="a"?e===!0||e===""?"":e||null:null,href:n==="a"&&this.href,onClick:this.childElClickHandler,ref:this.storeTagRef,rel:n==="a"&&this.rel,role:c,tabIndex:f,target:n==="a"&&this.target},this.iconStart?r:null,ke("slot",{key:"57b25ff3b8f7f3d048796a559c2911178d6b8ddf"}),this.iconEnd?o:null)))}clickHandler(e){this.disabled||e.isTrusted||this.childEl.click()}async setFocus(){await Po(this),Yy(this.childEl)}get el(){return this}static get style(){return kEe}},[1,"calcite-link",{disabled:[516],download:[520],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],rel:[1],target:[1],setFocus:[64]},[[0,"click","clickHandler"]]]);function $Ee(){if(typeof customElements>"u")return;["calcite-link","calcite-icon"].forEach(e=>{switch(e){case"calcite-link":customElements.get(e)||customElements.define(e,NEe);break;case"calcite-icon":customElements.get(e)||Qo();break}})}$Ee();var Tl=typeof window<"u"&&"$arcgis"in window&&typeof window.$arcgis=="object"&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function Il(t){return t.default!==void 0}async function OEe(){if(Tl)return await window.$arcgis.import("esri/core/Accessor");const t=await nt(()=>Promise.resolve().then(()=>sTe),void 0,import.meta.url);return Il(t)?t.default:t}async function REe(){if(Tl)return await window.$arcgis.import("esri/layers/GraphicsLayer");const t=await nt(()=>Promise.resolve().then(()=>Bje),void 0,import.meta.url);return Il(t)?t.default:t}async function LEe(t){const e=await REe();return new e(t)}async function FEe(){if(Tl)return await window.$arcgis.import("esri/views/MapView");const t=await nt(()=>import("./MapView-BSc05RhZ.js").then(e=>e.H),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]),import.meta.url);return Il(t)?t.default:t}async function zEe(t){const e=await FEe();return new e(t)}async function qEe(){if(Tl)return await window.$arcgis.import("esri/WebMap");const t=await nt(()=>import("./WebMap-BTswToeq.js").then(e=>e.W),__vite__mapDeps([31,1,2,3,4,5,32,33,14,15,34]),import.meta.url);return Il(t)?t.default:t}async function VEe(t){const e=await qEe();return new e(t)}async function GEe(){if(Tl)return await window.$arcgis.import("esri/widgets/AreaMeasurement2D");const t=await nt(()=>import("./AreaMeasurement2D-DlguSPI5.js"),__vite__mapDeps([35,36,37,38,39,40,41,42,43,44]),import.meta.url);return Il(t)?t.default:t}async function jEe(t){const e=await GEe();return new e(t)}async function BEe(){if(Tl)return await window.$arcgis.import("esri/widgets/BasemapGallery");const t=await nt(()=>import("./BasemapGallery-Cac4pWCG.js"),__vite__mapDeps([45,5,2,6,7,46,29]),import.meta.url);return Il(t)?t.default:t}async function HEe(t){const e=await BEe();return new e(t)}async function UEe(){if(Tl)return await window.$arcgis.import("esri/widgets/DistanceMeasurement2D");const t=await nt(()=>import("./DistanceMeasurement2D-Dq73GI9O.js"),__vite__mapDeps([47,36,37,38,39,40,41,42,43,44]),import.meta.url);return Il(t)?t.default:t}async function YEe(t){const e=await UEe();return new e(t)}async function XEe(){if(Tl)return await window.$arcgis.import("esri/widgets/Editor");const t=await nt(()=>import("./Editor-CpAJJFI2.js"),__vite__mapDeps([48,49,38,39,50,51,52,2,53,46,3,4,54,55,56,8,57,58,59,16,60,61,62,63,64,65,66]),import.meta.url);return Il(t)?t.default:t}async function WEe(t){const e=await XEe();return new e(t)}async function ZEe(){if(Tl)return await window.$arcgis.import("esri/widgets/Expand");const t=await nt(()=>import("./Expand--LVmJRIj.js"),[],import.meta.url);return Il(t)?t.default:t}async function KEe(t){const e=await ZEe();return new e(t)}async function JEe(){if(Tl)return await window.$arcgis.import("esri/widgets/LayerList");const t=await nt(()=>import("./LayerList-BrcP7niL.js").then(e=>e.L),__vite__mapDeps([67,8,4,68]),import.meta.url);return Il(t)?t.default:t}async function QEe(t){const e=await JEe();return new e(t)}async function eCe(){if(Tl)return await window.$arcgis.import("esri/widgets/Legend");const t=await nt(()=>import("./Legend-B6FVYWij.js"),__vite__mapDeps([69,70,71,72,73,74,75,76,77,59,57,58,16,60,61,78,52,2,46,29]),import.meta.url);return Il(t)?t.default:t}async function tCe(t){const e=await eCe();return new e(t)}async function iCe(){if(Tl)return await window.$arcgis.import("esri/widgets/Search");const t=await nt(()=>import("./Search-CrFmIZSz.js"),__vite__mapDeps([79,80,73,14,81,33,15,30,29,53]),import.meta.url);return Il(t)?t.default:t}async function sCe(t){const e=await iCe();return new e(t)}async function nCe(){if(Tl)return await window.$arcgis.import("esri/widgets/Sketch");const t=await nt(()=>Promise.resolve().then(()=>BZe),void 0,import.meta.url);return Il(t)?t.default:t}async function rCe(t){const e=await nCe();return new e(t)}async function oCe(){if(Tl)return await window.$arcgis.import("esri/core/accessorSupport/decorators");const t=await nt(()=>import("./decorators-hAw_jbTP.js"),[],import.meta.url);return Il(t)?t.default:t}async function Nre(){if(Tl)return await window.$arcgis.import("esri/core/reactiveUtils");const t=await nt(()=>Promise.resolve().then(()=>lAe),void 0,import.meta.url);return Il(t)?t.default:t}var y$=class{resolve(t){}reject(t){}constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};function nr(t,e,...i){try{return t==null?void 0:t.call(e,...i)}catch(s){console.error(s,t)}}async function uI(t,e,...i){try{const s=t==null?void 0:t.call(e,...i);return s instanceof Promise?await s:s}catch(s){console.error(s,t)}}var aCe=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Set(aCe);var lCe=t=>t.replace(uCe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),uCe=/[A-Z]+(?![a-z])|[A-Z]/gu;function cCe(t,e){const i=e/hCe;let s=0;const n=setInterval(()=>{s+=i,s>=e&&(clearInterval(n),t())},i);return n}var hCe=4;function $re(t){return t!==void 0}/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */function dCe(t,e){var i;if(e){const s=t.constructor.elementProperties;t.manager.internals.members=Object.fromEntries(Array.from(s,([n,r])=>r.noAccessor?void 0:[n,[(r.readOnly?2048:0)|(r.state?32:16)]]).filter($re))}else{const s=t.constructor,n=((i=s.__registerControllers)==null?void 0:i.call(s,t))??void 0;if(s.__registerControllers=void 0,typeof n!="object")throw new Error("Failed to retrieve component meta");t.manager.internals.members=Object.fromEntries(Object.entries(n).filter(([r,[o]])=>(o&63)!==0))}}function fCe(t,e=8){return t==null||typeof t=="object"||typeof t=="function"?t:(e&4)!==0?t==="false"?!1:t===""||!!t:(e&2)!==0?Number.parseFloat(t):(e&1)!==0?String(t):t}var Ore=(t,e)=>{var i,s;return(s=(i=t.manager.internals.members)==null?void 0:i[e])==null?void 0:s[0]},oq=Symbol.for("controller"),pCe=t=>typeof t=="object"&&t!==null&&(oq in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),r3;function Cb(t){r3!==t&&(r3=t,queueMicrotask(()=>{r3===t&&(r3=void 0)}))}function lM(t){return r3}var A1=[];function aq(t){if(t===void 0){A1=[];return}const e=A1.indexOf(t);A1=e===-1?[...A1,t]:A1.slice(0,e+1),queueMicrotask(()=>{A1=[]})}function mCe(){return A1}var Pb;function gCe(t){Pb!==t&&(Pb=t,queueMicrotask(()=>{Pb===t&&(Pb=void 0)}))}function yCe(){const t=Pb;return Pb=void 0,t}var vCe=async(t,e)=>{const i=lq(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const s=i.watchExports(n=>e(n,s))}return i.exports},_Ce=async t=>{const e=lq(t);return await e.ready,e},lq=t=>{const e=yCe();if(e!==void 0)return e;const s=lM().manager.internals.resolveExports(t);if(s!==void 0)return s;if(pCe(t))return t},Lp={setter:!1,getter:!1,readOnly:!1},cI=new WeakMap,Rre;Rre=oq;var uq=class{constructor(t){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new y$,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[Rre]=!0,this.ready=this._ready.promise,this._exports=lX(this),this._exportWatchers=new Set;const e=t??lM();this.component=e,this.component.addController(this),aq(this),this.component.manager===void 0||queueMicrotask(()=>this.catchUpLifecycle())}catchUpLifecycle(){const{manager:t}=this.component;t.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),t._loadCalled&&this.triggerLoad().then(()=>{t.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(t){const e=this._exports;e!==t&&(this._exports=t,this._exportWatchers.forEach(nr),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,e)),this._ready.resolve(t)}setProvisionalExports(t){this._exports=lX(t),this._exportWatchers.forEach(nr)}watchExports(t){const e=()=>t(this._exports);return this._exportWatchers.add(e),()=>void this._exportWatchers.delete(e)}get use(){return Cb(this.component),vCe}get useRef(){return Cb(this.component),_Ce}get useRefSync(){return Cb(this.component),lq}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(t){this._callbacks.hostConnected.push(t)}onDisconnected(t){this._callbacks.hostDisconnected.push(t)}onLoad(t){this._callbacks.hostLoad.push(t)}onLoaded(t){this._callbacks.hostLoaded.push(t)}onUpdate(t){this._callbacks.hostUpdate.push(t)}onUpdated(t){this._callbacks.hostUpdated.push(t)}onDestroy(t){this._callbacks.hostDestroy.push(t)}onLifecycle(t){this._callbacks.hostLifecycle.push(t),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(t)}triggerConnected(){const t=this;t.hostConnected&&nr(t.hostConnected,t),this._callbacks.hostConnected.forEach(nr),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const t=this;t.hostDisconnected&&nr(t.hostDisconnected,t),this._callbacks.hostDisconnected.forEach(nr),this._lifecycleCleanups.forEach(nr),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const t=this;t.hostLoad&&await uI(t.hostLoad,t),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(uI)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const t=this;t.hostLoaded&&nr(t.hostLoaded,t),this._callbacks.hostLoaded.forEach(nr),this.loadedCalled=!0}triggerUpdate(t){const e=this;e.hostUpdate&&nr(e.hostUpdate,e,t),this._callbacks.hostUpdate.forEach(aX,t)}triggerUpdated(t){const e=this;e.hostUpdated&&nr(e.hostUpdated,e,t),this._callbacks.hostUpdated.forEach(aX,t)}triggerDestroy(){const t=this;t.hostDestroy&&nr(t.hostDestroy,t),this._callbacks.hostDestroy.forEach(nr)}triggerLifecycle(){const t=this;t.hostLifecycle&&this._callLifecycle(()=>t.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(t){Cb(this.component);const e=nr(t);(Array.isArray(e)?e:[e]).forEach(s=>{typeof s=="function"?this._lifecycleCleanups.push(s):typeof s=="object"&&typeof s.remove=="function"&&this._lifecycleCleanups.push(s.remove)})}};function aX(t){nr(t,void 0,this)}var Lre=uq;function lX(t){if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e=new Proxy(t,{get(i,s,n){if(!(bCe.has(s)&&s in i&&i[s]===e)&&(s in i||s in Promise.prototype||typeof s=="symbol"))return typeof i=="function"?i[s]:Reflect.get(i,s,n)},set:(i,s,n,r)=>Reflect.set(i,s,n,r)});return e}var bCe=new Set(["exports","_exports"]);function xCe(t,e,i){const s=Object.keys(t),n=s.length;kp===void 0&&queueMicrotask(Fre),kp??(kp=new Map);let r=kp.get(t);return r===void 0&&(r={callbacks:[],keyCount:n},kp.set(t,r)),r.keyCount!==n&&(r.callbacks.forEach(o=>o(s)),r.callbacks=[],r.keyCount=n),r.callbacks.push(o=>{const l=f=>nr(e,null,f),c=o[n];c===void 0?l(void 0):t[c]===i?l(c):l(void 0)}),i}var kp=void 0;function Fre(){Array.from((kp==null?void 0:kp.entries())??[]).forEach(([t,{callbacks:e}])=>{const i=Object.keys(t);e.forEach(s=>s(i))}),kp=void 0}function qb(t,e,i){var s;const n=e,r=t.manager.internals;(s=r.allWatchers)[n]??(s[n]=[]);const o=r.allWatchers[n],l=i,c=(f,y,_)=>nr(l,null,f,y,_);return o.push(c),()=>{const f=o.indexOf(c);f!==-1&&o.splice(f,1)}}var wCe=class{constructor(t){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const e=this.component.manager.internals;Object.entries(e.members).forEach(([i,[s]])=>{var n;s&2048&&((n=e.setters)[i]??(n[i]=[]),e.setters[i].push(e.readonlySetter))})},this.trackedValue=v$,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this.reactiveUtilsIntegrations=new Set,this._exports=new WeakMap,this.readonlySetter=(e,i,s)=>{if(Lp.readOnly)return e;throw new Error(`Cannot assign to read-only property "${s}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(e)}"`)},this.component=t}firePropTrackers(t,e){const i=this.keyTrackers;this.trackedValue=v$,this.keyTrackers=[],i.forEach(s=>s(t,e))}getSetProxy(t){const e=this.component,i=e.constructor.prototype;if(this._getSetProxy(i,t,"class"),e.manager.isLit)return;const s=e.el.constructor.prototype;i!==s&&this._getSetProxy(s,t,"html")}_getSetProxy(t,e,i){const s=this.component,n=Ore(s,e);let r;do r=Object.getOwnPropertyDescriptor(t,e);while(!r&&(t=Object.getPrototypeOf(t)));if(!r)return;const o=r.get,l=r.set,c=RP in o,f=RP in l;if(c&&f)return;const y=!c,_=!f,x=y?function(){let A=o.call(this);const k=cI.get(this);if(Lp.getter||k===void 0)return A;const $=k.manager.internals;A=$.accessorGetter[e](A,e);const F=$.getters[e]??N8;for(let G=0;G<F.length;G++)A=F[G](A,e);return A}:o,S=_?function(A){var V;const k=o.call(this),$=cI.get(this);if($===void 0){l.call(this,A);return}let F=$.manager.isLit?A??void 0:fCe(A,n);const G=$.manager.internals;if(F===k)l.call(this,F);else{const B=Lp.setter?N8:G.setters[e]??N8;for(let W=0;W<B.length&&(F=B[W](F,k,e),F!==k);W++);F=G.accessorSetter[e](F,k,e),l.call(this,F),F!==k&&((V=G.enabledWatchers[e])==null||V.forEach(W=>W(F,k,e)))}G.keyTrackers.length>0&&(G==null||G.firePropTrackers(e,A))}:l;y&&(x[RP]=!0),_&&(S[RP]=!0),Object.defineProperty(t,e,{...r,get:x,set:S})}markExports(t,e){(typeof e=="object"&&e!==null||typeof e=="function")&&this._exports.set(e,t)}resolveExports(t){if(typeof t=="object"&&t!==null||typeof t=="function")return this._exports.get(t)}},N8=[],RP=Symbol(),v$=Symbol(),Sf=(t,e)=>new SCe(t,e),SCe=class extends Lre{constructor(t,e){const i="addController"in t,s=new Set;function n(c){var f;s.add(c),!(oq in c)&&t.renderRoot&&t.el.isConnected&&((f=c.hostConnected)==null||f.call(c))}function r(c){var f;s.delete(c),(f=c.controllerRemoved)==null||f.call(c)}const o=t;if(o.addController=n,o.removeController=r,!i){const c=e??t.constructor.__forceUpdate;o.requestUpdate=()=>c(t)}super(t),this.internals=new wCe(this.component),this.destroyed=!1,this._updatePromise=new y$,this._originalLifecycles={},this.isLit=i,this.component.manager=this,dCe(t,i),this._controllers=s,this.exports=void 0,this.hasDestroy=$8 in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const l=this.internals;Object.keys(l.members).forEach(c=>{l.accessorGetter[c]=mS,l.accessorSetter[c]=mS,l.getSetProxy(c)}),i?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(t,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(l.enableReadonly),aq(void 0),Cb(t),cI.set(t.el,t),cI.set(t,t)}_bindLifecycleMethods(){const t=this.component,e=this.isLit,i=t.el===t;this._originalLifecycles={_connectedCallback:e||i?void 0:t.connectedCallback,_disconnectedCallback:e||i?void 0:t.disconnectedCallback,_load:e?t.load:t.componentWillLoad,_loaded:e?t.loaded:t.componentDidLoad,_willUpdate:e?void 0:t.componentWillUpdate,_updated:e?void 0:t.componentDidUpdate,_destroy:t.destroy};const s=this._connectedCallback.bind(this),n=this._disconnectedCallback.bind(this),r=this._update.bind(this),o=this._updated.bind(this);e?t.constructor.prototype.addController.call(t,{hostConnected:s,hostDisconnected:n,hostUpdate:r,hostUpdated:o}):(t.connectedCallback=s,t.disconnectedCallback=n,t.componentWillLoad=this._load.bind(this),t.componentDidLoad=this._loaded.bind(this),t.componentWillUpdate=r,t.componentDidUpdate=o),this.hasDestroy&&(t.destroy=this.destroy.bind(this))}_connectedCallback(){var e,i;if(this.destroyed){const s=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${s} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${$8} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const t=this.internals;t.enabledWatchers=t.allWatchers,Fre(),(e=t.enableReadonly)==null||e.call(t),this._controllers.forEach(CCe),(i=this._originalLifecycles._connectedCallback)==null||i.call(this.component)}_disconnectedCallback(){var t;this.destroyed||(this._controllers.forEach(PCe),(t=this._originalLifecycles._disconnectedCallback)==null||t.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;const t=this.internals.reactiveUtilsIntegrations;if(t.size>0)for(const i of t)"triggerLoad"in i?await i.triggerLoad():await uI(i.hostLoad,i);await Promise.allSettled(Array.from(this._controllers,TCe,t)),await((e=this._originalLifecycles._load)==null?void 0:e.call(this.component)),this.hasDestroy&&qb(this.component,$8,()=>this._setAutoDestroyTimeout())}_loaded(){var t;this._controllers.forEach(ICe),(t=this._originalLifecycles._loaded)==null||t.call(this.component)}_update(){var e;const t=this.component;this._controllers.forEach(MCe,t.$changes),(e=this._originalLifecycles._willUpdate)==null||e.call(this.component)}_updated(){var e;const t=this.component;if(this._controllers.forEach(ACe,t.$changes),(e=this._originalLifecycles._updated)==null||e.call(this.component),this.isLit)t.$changes=new Map;else{const i=this._updatePromise;this._updatePromise=new y$,i.resolve(!0)}}async destroy(){var t;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(DCe),this._controllers.clear(),await((t=this._originalLifecycles._destroy)==null?void 0:t.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const t=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=cCe(t,ECe)}}},$8="autoDestroyDisabled",ECe=1e3,mS=t=>t;function CCe(t){"triggerConnected"in t?t.triggerConnected():nr(t.hostConnected,t)}function PCe(t){"triggerDisconnected"in t?t.triggerDisconnected():nr(t.hostDisconnected,t)}async function TCe(t){this.has(t)||("triggerLoad"in t?await t.triggerLoad():await uI(t.hostLoad,t))}function ICe(t){"triggerLoaded"in t?t.triggerLoaded():nr(t.hostLoaded,t)}function MCe(t){"triggerUpdate"in t?t.triggerUpdate(this):nr(t.hostUpdate,t,this)}function ACe(t){"triggerUpdated"in t?t.triggerUpdated(this):nr(t.hostUpdated,t,this)}function DCe(t){"triggerDestroy"in t?t.triggerDestroy():nr(t.hostDestroy,t)}function uM(t,e,i){const s=t.manager.internals;return s.trackedValue!==v$&&s.trackedValue!==i&&s.firePropTrackers(void 0,void 0),s.keyTrackers.length===0&&queueMicrotask(()=>s.firePropTrackers(void 0,void 0)),s.trackedValue=i,s.keyTrackers.push((n,r)=>nr(e,void 0,i===r?n:void 0)),i}function zre(t,e,i){const s=Array.isArray(t)?t:[t];let n=s.length+1;const r=l=>{n-=1,l!==void 0&&(n=Math.min(n,0)),n===0&&e(l)};s.forEach(l=>xCe(l,c=>r(c===void 0?void 0:{key:c,host:l,isReactive:!1}),i));const o=s.find(l=>"manager"in l&&typeof l.manager=="object"&&l.manager.component===l);return o&&uM(o,l=>r(l===void 0?void 0:{key:l,host:o,isReactive:Ore(o,l)!==void 0}),i),i}function qa(t,e){const i=lM();return uM(i,s=>{const n=s,r=i.manager,o=i,l=o[n];if(l!=null&&l!==t&&typeof e.set=="function"){const c=e.set(l,t,n);if(c!==l)if(r.isLit)o[n]=c;else{let f=!0;r.onConnected(()=>{f&&(f=!0,qre(()=>{o[n]=c}))})}}kCe(i,n,e)},t)}function qre(t){Lp.setter=!0;try{return t()}finally{Lp.setter=!1}}function Vre(t){Lp.getter=!0;try{return t()}finally{Lp.getter=!1}}function kCe(t,e,i){var s,n;const r=i,o=t.manager.internals,l=typeof r.get=="function"?r.get:void 0;l&&((s=o.getters)[e]??(s[e]=[]),o.getters[e].unshift(l));const c=r.set==="ignore"?NCe:r.set;c&&((n=o.setters)[e]??(n[e]=[]),o.setters[e].unshift(c))}var NCe=(t,e)=>e;function O8(t){const e=lM();return qa(t,{set:e.manager.internals.readonlySetter})}function $Ce(t){Lp.readOnly=!0;try{return t()}finally{Lp.readOnly=!1}}var cq=t=>(...e)=>{const i=mCe(),s=new t(...e),n=s.exports;aq(i.at(-1));const r=s.component.manager.internals;r.markExports(s,n),s.watchExports(l=>r.markExports(s,l)),gCe(s);const o=[s.component,...i].reverse();return zre(o,l=>l===void 0?void 0:OCe(s,l,n),n)};function OCe(t,{host:e,key:i,isReactive:s},n){const r=e,o=r[i]!==t.exports,l=r[i]!==n,c=n!==t.exports;if(o&&!l&&c&&(r[i]=t.exports),e===t.component){if(s){const y=t.component.manager.internals;l&&y.markExports(t,r[i]),qb(t.component,i,_=>{_!==t.exports&&y.markExports(t,_)})}t.assignedProperty=s?void 0:i}t.watchExports(()=>{var x;if(r[i]===t.exports)return;const y=t.component.manager;((x=y.internals.setters[i])==null?void 0:x.includes(y.internals.readonlySetter))?$Ce(()=>{r[i]=t.exports}):r[i]=t.exports})}var R8;async function RCe(){return R8??(R8=Nre()),await R8}var LCe=Promise.all([OEe(),oCe()]),uX=class extends uq{async hostLoad(){const[t,{subclass:e,property:i}]=await LCe;class s extends t{}const n=(_,x)=>y[x];function r(_,x,S){return y!==void 0&&(y[S]=_),_}const o=this.component,l=o.manager.internals,c=[];if(Vre(()=>Object.keys(l.members).forEach(_=>{l.accessorSetter[_]===mS&&(c.push(_),l.accessorGetter[_]=n,l.accessorSetter[_]=r,i({value:o[_]})(s.prototype,_))})),this._enabledMembers=c,c.length===0)return;const f=e(o.el.tagName)(s),y=new f;this._instance=y}controllerRemoved(){var e,i;super.controllerRemoved();const t=this.component.manager.internals;(e=this._instance)==null||e.destroy(),(i=this._enabledMembers)==null||i.forEach(s=>{t.accessorGetter[s]=mS,t.accessorSetter[s]=mS})}},Gre=(t,e)=>(i,s)=>FCe(i,t,s),jre=class extends Lre{constructor(t,e,i){super(t),this._loadAccessor=e,this._options=i,this._watchedProperties=new Map,this._isBinding={value:!0},this.setProvisionalExports(Jd.makeGetterProxy(t,this._watchedProperties,this._isBinding,this.constructor.allowedPropNameMismatches));const s=t.manager.internals.reactiveUtilsIntegrations;s.add(this);const n=Array.from(s).find(r=>r instanceof uX);n&&s.delete(n),s.add(n??new uX(this.component)),uM(t,r=>{r&&(this._instancePropName=r)},this.exports)}hostConnected(){this._isBinding.value=!1}async hostLoad(){var l,c;this.reactiveUtils=await RCe();const t=this.component,e=this._gatherParameters(),i=((c=(l=this._options)==null?void 0:l.editConstructorProperties)==null?void 0:c.call(t,e))??e,s=i instanceof Promise?await i:i,n=t,r=typeof this._instancePropName=="string"?n[this._instancePropName]:void 0;r!=null&&r!==this.exports?(this._instance=r,r.set(s)):this._instance=await this._createInstance(s),!t.manager.destroyed&&(Jd.watchComponentUpdates(this,this._instance,this._watchedProperties),Jd.watchAccessorUpdates(this,this._instance,this._watchedProperties),this.exports=this._instance)}_gatherParameters(){return Object.fromEntries(Array.from(this._watchedProperties,([i,s])=>[s,this.component[i]]).filter(([,i])=>i!==void 0))}async _createInstance(t){return this._isAccessorConstructor(this._loadAccessor)?new this._loadAccessor(t):await this._loadAccessor(t)}_isAccessorConstructor(t){return"prototype"in t&&"declaredClass"in t.prototype}hostDestroy(){this._instance&&this._instance.destroy()}async reCreate(){this.hostDestroy(),await this.hostLoad()}},FCe=cq(jre),Jd={makeGetterProxy:(t,e,i,s)=>new Proxy({},{has:(n,r)=>typeof r=="string"||r in n,get:(n,r)=>{const o=Reflect.get(n,r);if(typeof r=="symbol"||r in Promise.prototype)return o;const l=r in n,c=(i==null?void 0:i.value)??!0;return l||!c?o:zre(t,f=>{f!==void 0&&e.set(f.key,r)},o)}}),watchComponentUpdates(t,e,i){function s(l,c){const f=i.get(c),y=e[f];return typeof y=="boolean"&&f!==c&&c.toLowerCase().includes("disable")?!y:y}const n=(l,c,f)=>{const y=i.get(f),_=e[y],x=typeof _=="boolean"&&y!==f&&f.toLowerCase().includes("disable");if((x?!_:r.manager.isLit?_??void 0:_)===l)return l;e[y]=x?!l:l;const P=e[y];return x?!P:P},r=t.component,o=r.manager.internals;i.forEach((l,c)=>{o.accessorGetter[c]=s,o.accessorSetter[c]=n})},watchAccessorUpdates(t,e,i){const{component:s}=t,n=s,r=e,o=zCe(e);Vre(()=>i.forEach((l,c)=>{if(o.has(l))return;const f=n[c];let y=r[l];s.manager.isLit&&(y??(y=void 0));const x=typeof f=="boolean"&&l!==c&&c.toLowerCase().includes("disable")?!f:f;x!=null&&y!==x&&(r[l]=x)})),t.onLifecycle(()=>{if(!e.destroyed)return Array.from(i,([l,c])=>t.reactiveUtils.watch(()=>r[c],()=>{const f=r[c],_=typeof f=="boolean"&&c!==l&&l.toLowerCase().includes("disable")?!f:f;qre(()=>{n[l]=_})},{initial:!0}))})},reEmitAccessorEvents(t,e,i,s){if(!("on"in e&&typeof e.on=="function"))return;const r=Object.entries(t.component).map(([c,f])=>{const y=f;if(!c.startsWith(s)||c===s||typeof y!="object"||y===null||!("emit"in y)||typeof y.emit!="function")return;const _=y.emit,x=c.slice(s.length);return[lCe(x).toLowerCase(),_]}).filter($re);if(r.length===0)return;const o=e,l=()=>o;t.onLifecycle(()=>{if(!e.destroyed)return r.map(([c,f])=>i.on(l,c,f))})},async reCreate(t,e){const i=e.manager.useRefSync(t);i!==void 0&&await i.reCreate()}};function zCe(t){var s;const i=Object.entries(((s=t.__accessor__)==null?void 0:s.metadata)??{});return new Set(i.filter(([n,r])=>(r==null?void 0:r.readOnly)===!0).map(([n])=>n))}/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */var Bre=t=>VCe(void 0,t),qCe=class extends uq{constructor(t,e){super(t);const i=this.exports;try{Cb(this.component);const s=e(this.component,this),n=this.exports!==i;if(s instanceof Promise){n||this.setProvisionalExports(s);const r=s.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this._ready.reject(o),console.error(o)});this.onLoad(async()=>await r)}else(!n||s!==void 0)&&(this.exports=s),queueMicrotask(()=>super.catchUpLifecycle())}catch(s){this._ready.reject(s),console.error(s)}}catchUpLifecycle(){}},VCe=cq(qCe),GCe=Bre,$g=t=>jCe,cX="arcgisPropertyChange",jCe=(...t)=>Bre((e,i)=>{let n=e[cX];return e.manager.isLit&&(n=e.constructor.$createEvent(cX,void 0,e)),i.onLoad(()=>i.onLifecycle(()=>t.map(r=>qb(e,r,()=>n.emit({name:r}))))),n});/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */function o3(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const e=BCe(t);if(!e){const i=Yre(t.referenceElement);if(!i){Ure(t);return}return dX(i,t,!0),i}return HCe(e,t.el.parent)||(t.el.parent=e,e.tagName.toLowerCase()==="arcgis-expand"?UCe(e,t):e.tagName.toLowerCase()==="arcgis-placement"?YCe(e,t):dX(e,t,!1)),e}function BCe({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(hX.has(e.tagName.toLowerCase()))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&hX.has(e.ownedBy.tagName.toLowerCase()))return e.ownedBy}}const hX=new Set(["arcgis-map","arcgis-scene","arcgis-expand","arcgis-placement"]);function HCe(t,e){if(t!==e)return!1;const i=t.tagName.toLowerCase();return i==="arcgis-expand"||i==="arcgis-placement"}function cM(t,e,i="arcgisReady"){var n;const s=t;typeof((n=s.view)==null?void 0:n.ready)=="boolean"?e(s.view):t.addEventListener(i,r=>r.target===t?cM(t,e,i):void 0,{once:!0})}const UCe=(t,e)=>cM(t,i=>{var s,n;e.el.childElem&&typeof t.content=="object"&&((s=t.content)==null||s.append(e.el.childElem)),t.expandIcon=e.icon||((n=e.widget)==null?void 0:n.icon)||t.expandIcon,e.position=t.position,e.el.view=i}),YCe=(t,e)=>cM(t,i=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=t.position,e.el.view=i}),dX=(t,e,i)=>cM(t,s=>{i?Ure(e):e.el.childElem&&XCe(t,e),e.el.view=s},"arcgisViewReadyChange");function XCe(t,e){var o;const i=e.el.childElem??e.el,s=[...t.children],n={};for(const l of s){const c=l.getAttribute("position")??"manual";n[c]??(n[c]=[]),n[c].push({child:l,position:c,index:s.indexOf(l)})}const r=(o=n[e.position??"manual"])==null?void 0:o.findIndex(({child:l})=>l===e.el);t.view.ui.remove(i),t.view.ui.add(i,{position:e.position,index:r})}function WCe(t){let e=!1,i=t.el.view;const s=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t.el),"view")??{get:()=>i,set:n=>i=n};Object.defineProperty(t.el,"view",{get:s.get.bind(t.el),set:n=>{s.set.call(t.el,n),n&&!e&&(e=!0,t.arcgisReady.emit())},configurable:!0,enumerable:!0}),i&&(t.el.view=i)}function ZCe(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function fX(t,e){return Hre(e==null?void 0:e.center,t)}function Hre(t,e){if(typeof e=="string")return Hre(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],s=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||s!==t.latitude||n!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}async function KCe(t,e){e!=null&&(typeof e=="string"?t.el.view=await JCe(e):t.widget&&(t.el.view=e.view))}async function JCe(t){const e=Yre(t);return await new Promise(i=>{var s;typeof((s=e==null?void 0:e.view)==null?void 0:s.ready)=="boolean"?i(e.view):e&&e.addEventListener("arcgisViewReadyChange",()=>i(e.view),{once:!0})})}function Ure(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function Yre(t){return typeof t!="string"?t??void 0:(t.includes("#")||t.includes(".")||t.includes("[")?void 0:document.querySelector(`#${t}`))??document.querySelector(t)??void 0}/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const QCe=".arcgis-map{padding:0;margin:0;height:100%;width:100%}",e5e=QCe,t5e=Gre(VEe),i5e=Gre(zEe),pX=[0,"arcgis-map",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],view:[1040],map:[1040],allLayerViews:[1040],background:[1040],basemapView:[1040],basemap:[1025],center:[1025],constraints:[1040],extent:[1040],fatalError:[1040],floors:[1040],gamepad:[1040],graphics:[1040],ground:[1025],highlightOptions:[1040],interacting:[1028],ipsInfo:[1040],itemId:[1537,"item-id"],layerViews:[1040],magnifier:[1040],navigating:[1028],navigation:[1040],padding:[1040],popup:[1040],popupDisabled:[1028,"popup-disabled"],ready:[1028],resizeAlign:[1025,"resize-align"],resolution:[1026],rotation:[1026],scale:[1026],spatialReference:[1040],stationary:[1028],suspended:[1540],theme:[1040],timeExtent:[1040],timeZone:[1025,"time-zone"],toMap:[1040],toScreen:[1040],updating:[1540],viewpoint:[1040],zoom:[1026],addLayer:[64],addLayers:[64],closePopup:[64],destroy:[64],goTo:[64],hitTest:[64],openPopup:[64],takeScreenshot:[64],tryFatalErrorRecovery:[64],whenLayerView:[64]}],s5e=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>pX[2]??{},this.arcgisViewReadyChange=Ot(this,"arcgisViewReadyChange",7),this.arcgisViewChange=Ot(this,"arcgisViewChange",7),this.arcgisViewClick=Ot(this,"arcgisViewClick",7),this.arcgisViewDoubleClick=Ot(this,"arcgisViewDoubleClick",7),this.arcgisViewDrag=Ot(this,"arcgisViewDrag",7),this.arcgisViewHold=Ot(this,"arcgisViewHold",7),this.arcgisViewImmediateClick=Ot(this,"arcgisViewImmediateClick",7),this.arcgisViewImmediateDoubleClick=Ot(this,"arcgisViewImmediateDoubleClick",7),this.arcgisViewKeyDown=Ot(this,"arcgisViewKeyDown",7),this.arcgisViewKeyUp=Ot(this,"arcgisViewKeyUp",7),this.arcgisViewLayerviewCreate=Ot(this,"arcgisViewLayerviewCreate",7),this.arcgisViewLayerviewCreateError=Ot(this,"arcgisViewLayerviewCreateError",7),this.arcgisViewLayerviewDestroy=Ot(this,"arcgisViewLayerviewDestroy",7),this.arcgisViewMouseWheel=Ot(this,"arcgisViewMouseWheel",7),this.arcgisViewPointerDown=Ot(this,"arcgisViewPointerDown",7),this.arcgisViewPointerEnter=Ot(this,"arcgisViewPointerEnter",7),this.arcgisViewPointerLeave=Ot(this,"arcgisViewPointerLeave",7),this.arcgisViewPointerMove=Ot(this,"arcgisViewPointerMove",7),this.arcgisViewPointerUp=Ot(this,"arcgisViewPointerUp",7),this.manager=Sf(this,So),this.reactiveUtils=GCe(Nre),this._map=t5e(this,{editConstructorProperties:this._editMapProperties}),this._setChildElement=e=>{this.el.childElem=e},this.autoDestroyDisabled=!1,this.view=O8(i5e(this,{editConstructorProperties:this._editViewProperties})),this.map=this.view.map,this.allLayerViews=this.view.allLayerViews,this.background=this.view.background,this.basemapView=this.view.basemapView,this.basemap=this._map.basemap,this.center=qa(void 0,{get:e=>this.view.center??e,set:e=>{const i=fX(e,this.ready?this.view:void 0);return this.ready?(this.view.center=i,this.view.center):i}}),this.constraints=this.view.constraints,this.extent=qa(void 0,{get:e=>this.view.extent??e,set:(e,i)=>this.view.ready?(e&&!(i!=null&&i.equals(e))&&(this.view.extent=e),this.view.extent):e}),this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.gamepad=qa(void 0,{get:()=>this.ready?this.view.input.gamepad:void 0,set:"ignore"}),this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlightOptions=this.view.highlightOptions,this.interacting=qa(!1,{get:()=>this.view.interacting,set:"ignore"}),this.ipsInfo=this._map.ipsInfo,this.itemId=qa(void 0,{get:e=>{var i;return((i=this._map.portalItem)==null?void 0:i.id)??e},set:e=>(this.ready&&Jd.reCreate(this._map,this).then(()=>{this.view.map=this._map}).catch(console.error),e)}),this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.navigating=qa(!1,{get:()=>this.view.navigating,set:"ignore"}),this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.scale=qa(void 0,{get:e=>this.view.scale??e,set:e=>(this.ready&&(this.view.scale=e),e)}),this.spatialReference=qa(this.view.spatialReference,{set:(e,i)=>i!=null&&i.equals(e)?i:e}),this.stationary=qa(!0,{get:()=>this.view.stationary,set:"ignore"}),this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.toMap=O8((...e)=>this.view.toMap(...e)),this.toScreen=O8((...e)=>this.view.toScreen(...e)),this.updating=this.view.updating,this.viewpoint=qa(void 0,{get:()=>this.view.viewpoint,set:(e,i)=>ZCe(i,e)?e:i}),this.zoom=qa(void 0,{get:e=>this.view.zoom??e,set:e=>(this.ready&&(this.view.zoom=e),e)})}async addLayer(e,i){var s;(s=this.map)==null||s.add(e,i)}async addLayers(e,i){var s;(s=this.map)==null||s.addMany(e,i)}async closePopup(){var e;(e=this.view)==null||e.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){var s;return await((s=this.view)==null?void 0:s.goTo(e,i))}async hitTest(e,i){var s;return await((s=this.view)==null?void 0:s.hitTest(e,i))}async openPopup(e){var i;await((i=this.view)==null?void 0:i.openPopup(e))}async takeScreenshot(e){var i;return await((i=this.view)==null?void 0:i.takeScreenshot(e))}async tryFatalErrorRecovery(){var e;(e=this.view)==null||e.tryFatalErrorRecovery()}async whenLayerView(e){var i;return await((i=this.view)==null?void 0:i.whenLayerView(e))}componentDidLoad(){var i;(i=this.view).container??(i.container=this.el.childElem);const{watch:e}=this.reactiveUtils;this.manager.onLifecycle(()=>[e(()=>this.view.stationary,()=>{this.arcgisViewChange.emit()},{initial:!0}),e(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})]),Jd.reEmitAccessorEvents(this.manager,this.view,this.reactiveUtils,"arcgisView")}render(){return ke("div",{key:"77569d288f8260b1aeddb513498de4b38a9dd9ae",class:"arcgis-map",ref:this._setChildElement})}_editMapProperties(e){this.map&&(this._map=this.map),this.itemId?e.portalItem={id:this.itemId}:this.basemap?this.basemap==="none"&&(e.basemap=void 0,this.basemap=null):e.basemap="topo-vector";const{basemap:i,...s}=e;i||(e=s);const{ground:n,...r}=e;return n||(e=r),e}_editViewProperties(e){this.view.ui||(e.ui={components:["attribution"]}),e.map??(e.map=this._map);const i=fX(this.center,void 0);return i&&(e.center=i),this.viewpoint&&(e.viewpoint=this.viewpoint),this.scale!==void 0&&(e.scale=this.scale),this.extent&&(e.extent=this.extent),this.zoom!==void 0&&(e.zoom=this.zoom),e}get el(){return this}static get style(){return e5e}},pX);function n5e(){if(typeof customElements>"u")return;["arcgis-map"].forEach(e=>{switch(e){case"arcgis-map":customElements.get(e)||customElements.define(e,s5e);break}})}n5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const rm=(t,e)=>(i,s)=>o5e(i,t,s);class r5e extends jre{constructor(e,i,s){super(e,i,s),this._watchedViewModelProperties=new Map,this._watchedVisibleElementsProperties={},this._isBindingViewModel={value:!0},Object.defineProperty(this.exports,"viewModel",{value:Jd.makeGetterProxy(e,this._watchedViewModelProperties,this._isBindingViewModel)}),Object.defineProperty(this.exports,"visibleElements",{value:this._makeVisibleElementsBinder()})}hostConnected(){super.hostConnected(),this._isBindingViewModel.value=!1,this.component.manager.loadedCalled&&o3(this.component)}async hostLoad(){if(this._watchedProperties.delete("viewModel"),await super.hostLoad(),this.component.manager.destroyed)return;this._watchMetaProperties(),Jd.reEmitAccessorEvents(this,this._instance,this.reactiveUtils,"widget"),this.onLifecycle(()=>this.reactiveUtils.watch(()=>this._instance.viewModel,s=>{this.component.viewModel=s},{initial:!0}));const e=this._instance.viewModel;typeof e=="object"&&(Jd.reEmitAccessorEvents(this,e,this.reactiveUtils,"viewModel"),Jd.watchComponentUpdates(this,e,this._watchedViewModelProperties),Jd.watchAccessorUpdates(this,e,this._watchedViewModelProperties));const i=Object.entries(this._watchedVisibleElementsProperties);i.length>0&&this.onLifecycle(()=>i.map(([s,n])=>{let r=this._instance.visibleElements??{},o;for(const y of n.slice(0,-1))if(typeof r[y]=="object"&&r[y]!==null)r=r[y];else{o=!!r[y];break}o===void 0&&(o=!!(r[n.slice(-1)[0]]??!0)),s.startsWith("hide");const c=s.startsWith("hide")||s.startsWith("show")?s.startsWith("hide"):o,f=this.component;return typeof f[s]=="boolean"?this._updateWidgetVisibleElement(n,f[s],c):f[s]=!1,qb(this.component,s,y=>this._updateWidgetVisibleElement(n,y,c))}))}_updateWidgetVisibleElement(e,i,s){let n=this._instance.visibleElements??{};for(const o of e.slice(0,-1))(typeof n[o]!="object"||n[o]===null)&&(n[o]={}),n=n[o];const r=!!(s?!i:i);n[e.at(-1)]=r}hostLoaded(){const{el:e}=this.component;e.childElem??(e.childElem=document.createElement("div")),this._instance.container=e.childElem;let i=!1;const s=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>{var n;return this._instance.view??((n=this._instance.viewModel)==null?void 0:n.view)},set:n=>{!("view"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.view=n:this._instance.view=n,!("map"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.map=n.map:this._instance.map=n.map,this._watchViewDestroy(),n&&!i&&(i=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),s&&(this._instance.view=s),this.component.el.isConnected&&(o3(this.component),this._watchViewDestroy())}hostDisconnected(){var e,i;typeof this.component.el.childElem=="object"&&((i=(e=this.component.el.view)==null?void 0:e.ui)==null||i.remove(this.component.el.childElem))}hostDestroy(){var e;super.hostDestroy(),(e=this._watchViewDestroyHandle)==null||e.remove()}_watchMetaProperties(){qb(this.component,"position",e=>{this.component.el.childElem!=null&&typeof e=="string"&&o3(this.component)}),qb(this.component,"referenceElement",()=>o3(this.component))}_makeVisibleElementsBinder(){return new Proxy({},{has:(e,i)=>typeof i=="string"||Reflect.has(e,i),get:(e,i)=>{if(typeof i=="symbol"||i in Promise.prototype)return Reflect.get(e,i);const s=[i],n=this._makeRecursiveProxy(s);return uM(this.component,r=>{const o=r;this.component[o]=!1,this._watchedVisibleElementsProperties[o]=s},n)}})}_makeRecursiveProxy(e){const i=new Proxy({},{get:(s,n)=>{const r=Reflect.get(s,n);return typeof n=="symbol"||n in Promise.prototype?r:(e.push(n),i)}});return i}_watchViewDestroy(){var e;(e=this._watchViewDestroyHandle)==null||e.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when(()=>{var i;return((i=this.component.el.view)==null?void 0:i.destroyed)===!0},()=>void this.component.destroy().catch(console.error),{sync:!0})}}const o5e=cq(r5e);/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const a5e="",l5e=a5e,u5e=rm(tCe),mX=[0,"arcgis-legend",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],headingLevel:[1026,"heading-level"],referenceElement:[1025,"reference-element"],activeLayerInfos:[1040],basemapLegendVisible:[1028,"basemap-legend-visible"],hideLayersNotInCurrentView:[1028,"hide-layers-not-in-current-view"],icon:[1025],label:[1025],respectLayerVisibilityDisabled:[1028,"respect-layer-visibility-disabled"],legendStyle:[1025,"legend-style"],layerInfos:[1040],position:[1025],respectLayerDefinitionExpression:[1028,"respect-layer-definition-expression"],state:[1537],destroy:[64]}],c5e=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>mX[2]??{},this.arcgisReady=Ot(this,"arcgisReady",7),this.arcgisPropertyChange=Ot(this,"arcgisPropertyChange",7),this.manager=Sf(this,So),this.widget=u5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=$g()("state"),this.autoDestroyDisabled=!1,this.headingLevel=this.widget.headingLevel,this.referenceElement=void 0,this.activeLayerInfos=this.widget.activeLayerInfos,this.basemapLegendVisible=this.widget.basemapLegendVisible,this.hideLayersNotInCurrentView=this.widget.hideLayersNotInCurrentView,this.icon=this.widget.icon,this.label=this.widget.label,this.respectLayerVisibilityDisabled=this.widget.respectLayerVisibility,this.legendStyle=this.widget.style,this.layerInfos=this.widget.layerInfos,this.position="bottom-left",this.respectLayerDefinitionExpression=this.widget.respectLayerDefinitionExpression,this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return l5e}},mX);function h5e(){if(typeof customElements>"u")return;["arcgis-legend"].forEach(e=>{switch(e){case"arcgis-legend":customElements.get(e)||customElements.define(e,c5e);break}})}h5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const d5e="",f5e=d5e,p5e=rm(sCe),gX=[0,"arcgis-search",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],activeMenu:[1025,"active-menu"],activeSource:[1040],activeSourceIndex:[1026,"active-source-index"],allPlaceholder:[1025,"all-placeholder"],allSources:[1040],autoSelectDisabled:[1028,"auto-select-disabled"],defaultSources:[1040],disabled:[1540],icon:[1025],label:[1025],includeDefaultSourcesDisabled:[1028,"include-default-sources-disabled"],locationDisabled:[1028,"location-disabled"],maxResults:[1026,"max-results"],maxSuggestions:[1026,"max-suggestions"],minSuggestCharacters:[1026,"min-suggest-characters"],popupDisabled:[1028,"popup-disabled"],popupTemplate:[1040],portal:[1040],resultGraphic:[1040],resultGraphicDisabled:[1028,"result-graphic-disabled"],results:[1040],searchAllDisabled:[1028,"search-all-disabled"],searchTerm:[1025,"search-term"],selectedResult:[1040],sources:[1040],suggestions:[1040],suggestionsDisabled:[1028,"suggestions-disabled"],position:[1025],state:[1537],blurSearch:[64],clearSearch:[64],focusSearch:[64],destroy:[64],search:[64],suggest:[64]}],m5e=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>gX[2]??{},this.arcgisReady=Ot(this,"arcgisReady",7),this.arcgisPropertyChange=Ot(this,"arcgisPropertyChange",7),this.widgetSearchBlur=Ot(this,"arcgisBlur",7),this.widgetSearchClear=Ot(this,"arcgisClear",7),this.widgetSearchComplete=Ot(this,"arcgisComplete",7),this.widgetSearchFocus=Ot(this,"arcgisFocus",7),this.widgetSearchStart=Ot(this,"arcgisStart",7),this.widgetSelectResult=Ot(this,"arcgisSelectResult",7),this.widgetSuggestComplete=Ot(this,"arcgisSuggestComplete",7),this.widgetSuggestStart=Ot(this,"arcgisSuggestStart",7),this.manager=Sf(this,So),this.widget=p5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=$g()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeMenu=this.widget.activeMenu,this.activeSource=this.widget.activeSource,this.activeSourceIndex=this.widget.activeSourceIndex,this.allPlaceholder=this.widget.allPlaceholder,this.allSources=this.widget.allSources,this.autoSelectDisabled=this.widget.autoSelect,this.defaultSources=this.widget.defaultSources,this.disabled=this.widget.disabled,this.icon=this.widget.icon,this.label=this.widget.label,this.includeDefaultSourcesDisabled=this.widget.includeDefaultSources,this.locationDisabled=this.widget.locationEnabled,this.maxResults=this.widget.maxResults,this.maxSuggestions=this.widget.maxSuggestions,this.minSuggestCharacters=this.widget.minSuggestCharacters,this.popupDisabled=this.widget.popupEnabled,this.popupTemplate=this.widget.popupTemplate,this.portal=this.widget.portal,this.resultGraphic=this.widget.resultGraphic,this.resultGraphicDisabled=this.widget.resultGraphicEnabled,this.results=this.widget.results,this.searchAllDisabled=this.widget.searchAllEnabled,this.searchTerm=this.widget.searchTerm,this.selectedResult=this.widget.selectedResult,this.sources=this.widget.sources,this.suggestions=this.widget.suggestions,this.suggestionsDisabled=this.widget.suggestionsEnabled,this.position="top-right",this.state=this.viewModel.state}async blurSearch(){var e;(e=this.widget)==null||e.blur()}async clearSearch(){var e;(e=this.widget)==null||e.clear()}async focusSearch(){var e;(e=this.widget)==null||e.focus()}async destroy(){await this.manager.destroy()}async search(e){var i;return await((i=this.widget)==null?void 0:i.search(e))}async suggest(e){var i;return await((i=this.widget)==null?void 0:i.suggest(e))}get el(){return this}static get style(){return f5e}},gX);function g5e(){if(typeof customElements>"u")return;["arcgis-search"].forEach(e=>{switch(e){case"arcgis-search":customElements.get(e)||customElements.define(e,m5e);break}})}g5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const y5e="",v5e=y5e,_5e=rm(WEe),yX=[0,"arcgis-editor",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],activeWorkflow:[1040],allowedWorkflows:[1025,"allowed-workflows"],icon:[1025],label:[1025],labelOptions:[1040],layerInfos:[1040],snappingOptions:[1040],supportingWidgetDefaults:[1040],tooltipOptions:[1040],headingLevel:[1026,"heading-level"],hideCreateFeaturesSection:[1028,"hide-create-features-section"],hideEditFeaturesSection:[1028,"hide-edit-features-section"],hideLabelsToggle:[1028,"hide-labels-toggle"],hideTooltipsToggle:[1028,"hide-tooltips-toggle"],showSnappingControlsElementsHeader:[1028,"show-snapping-controls-elements-header"],hideSnappingControlsElementsEnabledToggle:[1028,"hide-snapping-controls-elements-enabled-toggle"],hideSnappingControlsElementsSelfEnabledToggle:[1028,"hide-snapping-controls-elements-self-enabled-toggle"],hideSnappingControlsElementsFeatureEnabledToggle:[1028,"hide-snapping-controls-elements-feature-enabled-toggle"],hideSnappingControlsElementsLayerList:[1028,"hide-snapping-controls-elements-layer-list"],position:[1025],state:[1537],cancelWorkflow:[64],destroy:[64],deleteFeatureFromWorkflow:[64],startCreateFeaturesWorkflowAtFeatureCreation:[64],startCreateFeaturesWorkflowAtFeatureTypeSelection:[64],startUpdateWorkflowAtFeatureEdit:[64],startUpdateWorkflowAtFeatureSelection:[64],startUpdateWorkflowAtMultipleFeatureSelection:[64]}],b5e=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>yX[2]??{},this.arcgisReady=Ot(this,"arcgisReady",7),this.arcgisPropertyChange=Ot(this,"arcgisPropertyChange",7),this.manager=Sf(this,So),this.widget=_5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=$g()("activeWorkflow","state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeWorkflow=this.widget.activeWorkflow,this.allowedWorkflows=this.widget.allowedWorkflows,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layerInfos=this.widget.layerInfos,this.snappingOptions=this.widget.snappingOptions,this.supportingWidgetDefaults=this.widget.supportingWidgetDefaults,this.tooltipOptions=this.widget.tooltipOptions,this.headingLevel=this.widget.headingLevel,this.hideCreateFeaturesSection=this.widget.visibleElements.createFeaturesSection,this.hideEditFeaturesSection=this.widget.visibleElements.editFeaturesSection,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.position="bottom-left",this.state=this.viewModel.state}async cancelWorkflow(){var e;await((e=this.widget)==null?void 0:e.cancelWorkflow())}async destroy(){await this.manager.destroy()}async deleteFeatureFromWorkflow(){var e;await((e=this.widget)==null?void 0:e.deleteFeatureFromWorkflow())}async startCreateFeaturesWorkflowAtFeatureCreation(e){var i;await((i=this.widget)==null?void 0:i.startCreateFeaturesWorkflowAtFeatureCreation(e))}async startCreateFeaturesWorkflowAtFeatureTypeSelection(){var e;await((e=this.widget)==null?void 0:e.startCreateFeaturesWorkflowAtFeatureTypeSelection())}async startUpdateWorkflowAtFeatureEdit(e){var i;await((i=this.widget)==null?void 0:i.startUpdateWorkflowAtFeatureEdit(e))}async startUpdateWorkflowAtFeatureSelection(){var e;await((e=this.widget)==null?void 0:e.startUpdateWorkflowAtFeatureSelection())}async startUpdateWorkflowAtMultipleFeatureSelection(e){var i;await((i=this.widget)==null?void 0:i.startUpdateWorkflowAtMultipleFeatureSelection(e))}get el(){return this}static get style(){return v5e}},yX);function x5e(){if(typeof customElements>"u")return;["arcgis-editor"].forEach(e=>{switch(e){case"arcgis-editor":customElements.get(e)||customElements.define(e,b5e);break}})}x5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const w5e="arcgis-sketch{}",S5e=w5e,E5e=rm(rCe),vX=[0,"arcgis-sketch",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],activeTool:[1537,"active-tool"],availableCreateTools:[1040],createGraphic:[1040],creationMode:[1025,"creation-mode"],defaultCreateOptions:[1040],defaultUpdateOptions:[1040],defaultGraphicsLayerDisabled:[1028,"default-graphics-layer-disabled"],icon:[1025],label:[1025],labelOptions:[1040],layer:[1040],layout:[1025],pointSymbol:[1040],polylineSymbol:[1040],polygonSymbol:[1040],snappingOptions:[1040],tooltipOptions:[1040],updateGraphics:[1040],hideCreateToolsPoint:[1028,"hide-create-tools-point"],hideCreateToolsPolyline:[1028,"hide-create-tools-polyline"],hideCreateToolsPolygon:[1028,"hide-create-tools-polygon"],hideCreateToolsRectangle:[1028,"hide-create-tools-rectangle"],hideCreateToolsCircle:[1028,"hide-create-tools-circle"],hideDuplicateButton:[1028,"hide-duplicate-button"],hideSelectionToolsRectangleSelection:[1028,"hide-selection-tools-rectangle-selection"],hideSelectionToolsLassoSelection:[1028,"hide-selection-tools-lasso-selection"],hideSettingsMenu:[1028,"hide-settings-menu"],hideLabelsToggle:[1028,"hide-labels-toggle"],hideTooltipsToggle:[1028,"hide-tooltips-toggle"],hideSnappingControls:[1028,"hide-snapping-controls"],showSnappingControlsElementsHeader:[1028,"show-snapping-controls-elements-header"],hideSnappingControlsElementsEnabledToggle:[1028,"hide-snapping-controls-elements-enabled-toggle"],hideSnappingControlsElementsSelfEnabledToggle:[1028,"hide-snapping-controls-elements-self-enabled-toggle"],hideSnappingControlsElementsFeatureEnabledToggle:[1028,"hide-snapping-controls-elements-feature-enabled-toggle"],hideSnappingControlsElementsLayerList:[1028,"hide-snapping-controls-elements-layer-list"],hideUndoRedoMenu:[1028,"hide-undo-redo-menu"],position:[1025],state:[1537],cancel:[64],complete:[64],create:[64],delete:[64],destroy:[64],duplicate:[64],redo:[64],undo:[64],update:[64]},[[0,"arcgisReady","arcgisReadyHandler"]]],C5e=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>vX[2]??{},this.arcgisReady=Ot(this,"arcgisReady",7),this.arcgisPropertyChange=Ot(this,"arcgisPropertyChange",7),this.widgetCreate=Ot(this,"arcgisCreate",7),this.widgetDelete=Ot(this,"arcgisDelete",7),this.widgetRedo=Ot(this,"arcgisRedo",7),this.widgetUndo=Ot(this,"arcgisUndo",7),this.widgetUpdate=Ot(this,"arcgisUpdate",7),this.manager=Sf(this,So),this.widget=E5e(this,{editConstructorProperties:this._editConstructorProperties}),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=$g()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeTool=this.widget.activeTool,this.availableCreateTools=this.widget.availableCreateTools,this.createGraphic=this.widget.createGraphic,this.creationMode=this.widget.creationMode,this.defaultCreateOptions=this.widget.defaultCreateOptions,this.defaultUpdateOptions=this.widget.defaultUpdateOptions,this.defaultGraphicsLayerDisabled=!1,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layer=this.widget.layer,this.layout=this.widget.layout,this.pointSymbol=this.viewModel.pointSymbol,this.polylineSymbol=this.viewModel.polylineSymbol,this.polygonSymbol=this.viewModel.polygonSymbol,this.snappingOptions=this.widget.snappingOptions,this.tooltipOptions=this.widget.tooltipOptions,this.updateGraphics=this.widget.updateGraphics,this.hideCreateToolsPoint=this.widget.visibleElements.createTools.point,this.hideCreateToolsPolyline=this.widget.visibleElements.createTools.polyline,this.hideCreateToolsPolygon=this.widget.visibleElements.createTools.polygon,this.hideCreateToolsRectangle=this.widget.visibleElements.createTools.rectangle,this.hideCreateToolsCircle=this.widget.visibleElements.createTools.circle,this.hideDuplicateButton=this.widget.visibleElements.duplicateButton,this.hideSelectionToolsRectangleSelection=this.widget.visibleElements.selectionTools["rectangle-selection"],this.hideSelectionToolsLassoSelection=this.widget.visibleElements.selectionTools["lasso-selection"],this.hideSettingsMenu=this.widget.visibleElements.settingsMenu,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.hideSnappingControls=this.widget.visibleElements.snappingControls,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.hideUndoRedoMenu=this.widget.visibleElements.undoRedoMenu,this.position="bottom-left",this.state=this.widget.state}async _editConstructorProperties(e){return this.defaultGraphicsLayerDisabled||(e.layer??(e.layer=await LEe({title:"Sketch Layer"}))),e}arcgisReadyHandler(){var e,i;!this.defaultGraphicsLayerDisabled&&!((e=this.el.view)!=null&&e.map.layers.includes(this.widget.layer))&&((i=this.el.view)==null||i.map.add(this.widget.layer))}async cancel(){var e;(e=this.widget)==null||e.cancel()}async complete(){var e;(e=this.widget)==null||e.complete()}async create(e,i){var s;await((s=this.widget)==null?void 0:s.create(e,i))}async delete(){var e;(e=this.widget)==null||e.delete()}async destroy(){await this.manager.destroy()}async duplicate(){var e;(e=this.widget)==null||e.duplicate()}async redo(){var e;(e=this.widget)==null||e.redo()}async undo(){var e;(e=this.widget)==null||e.undo()}async update(e,i){var s;return void((s=this.widget)==null?void 0:s.update(e,i))}get el(){return this}static get style(){return S5e}},vX);function P5e(){if(typeof customElements>"u")return;["arcgis-sketch"].forEach(e=>{switch(e){case"arcgis-sketch":customElements.get(e)||customElements.define(e,C5e);break}})}P5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const T5e="",I5e=T5e,M5e=rm(QEe),_X=[0,"arcgis-layer-list",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],collapsed:[1540],headingLevel:[1026,"heading-level"],catalogLayerList:[1040],catalogOptions:[1040],dragEnabled:[1028,"drag-enabled"],filterPlaceholder:[1025,"filter-placeholder"],filterText:[1025,"filter-text"],icon:[1025],knowledgeGraphOptions:[1040],tableList:[1040],label:[1025],listItemCreatedFunction:[1040],minDragEnabledItems:[1026,"min-drag-enabled-items"],minFilterItems:[1026,"min-filter-items"],openedLayers:[1040],operationalItems:[1040],selectedItems:[1040],selectionMode:[1025,"selection-mode"],visibilityAppearance:[1025,"visibility-appearance"],hideCatalogLayerList:[1028,"hide-catalog-layer-list"],showCloseButton:[1028,"show-close-button"],showCollapseButton:[1028,"show-collapse-button"],showErrors:[1028,"show-errors"],showFilter:[1028,"show-filter"],hideFlow:[1028,"hide-flow"],showHeading:[1028,"show-heading"],hideStatusIndicators:[1028,"hide-status-indicators"],showTemporaryLayerIndicators:[1028,"show-temporary-layer-indicators"],position:[1025],state:[1537],destroy:[64],triggerAction:[64]}],A5e=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>_X[2]??{},this.arcgisReady=Ot(this,"arcgisReady",7),this.widgetTriggerAction=Ot(this,"arcgisTriggerAction",7),this.arcgisPropertyChange=Ot(this,"arcgisPropertyChange",7),this.manager=Sf(this,So),this.widget=M5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=$g()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.collapsed=this.widget.collapsed,this.headingLevel=this.widget.headingLevel,this.catalogLayerList=qa(void 0,{get:()=>this.widget.catalogLayerList,set:"ignore"}),this.catalogOptions=this.widget.catalogOptions,this.dragEnabled=this.widget.dragEnabled,this.filterPlaceholder=this.widget.filterPlaceholder,this.filterText=this.widget.filterText,this.icon=this.widget.icon,this.knowledgeGraphOptions=this.widget.knowledgeGraphOptions,this.tableList=qa(void 0,{get:()=>this.widget.tableList,set:"ignore"}),this.label=this.widget.label,this.listItemCreatedFunction=this.widget.listItemCreatedFunction,this.minDragEnabledItems=this.widget.minDragEnabledItems,this.minFilterItems=this.widget.minFilterItems,this.openedLayers=qa(void 0,{get:()=>this.widget.openedLayers,set:"ignore"}),this.operationalItems=qa(void 0,{get:()=>this.widget.operationalItems,set:"ignore"}),this.selectedItems=this.widget.selectedItems,this.selectionMode=this.widget.selectionMode,this.visibilityAppearance=this.widget.visibilityAppearance,this.hideCatalogLayerList=this.widget.visibleElements.catalogLayerList,this.showCloseButton=this.widget.visibleElements.closeButton,this.showCollapseButton=this.widget.visibleElements.collapseButton,this.showErrors=this.widget.visibleElements.errors,this.showFilter=this.widget.visibleElements.filter,this.hideFlow=this.widget.visibleElements.flow,this.showHeading=this.widget.visibleElements.heading,this.hideStatusIndicators=this.widget.visibleElements.statusIndicators,this.showTemporaryLayerIndicators=this.widget.visibleElements.temporaryLayerIndicators,this.position="bottom-left",this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}async triggerAction(e,i){var s;(s=this.widget)==null||s.triggerAction(e,i)}get el(){return this}static get style(){return I5e}},_X);function D5e(){if(typeof customElements>"u")return;["arcgis-layer-list"].forEach(e=>{switch(e){case"arcgis-layer-list":customElements.get(e)||customElements.define(e,A5e);break}})}D5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const k5e="arcgis-expand{pointer-events:auto}arcgis-expand>.esri-expand__content--expanded{background-color:var(--calcite-color-background)}",N5e=k5e,$5e=rm(KEe),bX=[0,"arcgis-expand",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],icon:[1025],content:[1025],label:[1025],autoCollapse:[1028,"auto-collapse"],closeOnEsc:[1028,"close-on-esc"],collapseIcon:[1025,"collapse-icon"],collapseTooltip:[1025,"collapse-tooltip"],expanded:[1540],expandIcon:[1025,"expand-icon"],expandTooltip:[1025,"expand-tooltip"],group:[1025],iconNumber:[1026,"icon-number"],mode:[1025],placement:[1025],position:[1025],referenceElement:[1025,"reference-element"],destroy:[64],collapse:[64],expand:[64],toggle:[64]}],O5e=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>bX[2]??{},this.arcgisReady=Ot(this,"arcgisReady",7),this.manager=Sf(this,So),this.widget=$5e(this),this.viewModel=this.widget.viewModel,this.autoDestroyDisabled=!1,this.icon=this.widget.icon,this.content=this.widget.content,this.label=this.widget.label,this.autoCollapse=this.widget.autoCollapse,this.closeOnEsc=this.widget.closeOnEsc,this.collapseIcon=this.widget.collapseIcon,this.collapseTooltip=this.widget.collapseTooltip,this.expanded=this.widget.expanded,this.expandIcon=this.widget.expandIcon,this.expandTooltip=this.widget.expandTooltip,this.group=this.widget.group,this.iconNumber=this.widget.iconNumber,this.mode=this.widget.mode,this.placement=this.widget.placement,this.position="top-right",this.referenceElement=void 0,this.content??(this.content=document.createElement("div"))}async destroy(){await this.manager.destroy()}async collapse(){var e;(e=this.widget)==null||e.collapse()}async expand(){var e;(e=this.widget)==null||e.expand()}async toggle(){this.expanded?await this.collapse():await this.expand()}get el(){return this}static get style(){return N5e}},bX);function R5e(){if(typeof customElements>"u")return;["arcgis-expand"].forEach(e=>{switch(e){case"arcgis-expand":customElements.get(e)||customElements.define(e,O5e);break}})}R5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const L5e="",F5e=L5e,z5e=rm(HEe),xX=[0,"arcgis-basemap-gallery",{activeBasemap:[1040],autoDestroyDisabled:[1028,"auto-destroy-disabled"],disabled:[1540],icon:[1025],label:[1025],headingLevel:[1026,"heading-level"],source:[1040],position:[1025],referenceElement:[1025,"reference-element"],state:[1537],destroy:[64]}],q5e=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>xX[2]??{},this.arcgisReady=Ot(this,"arcgisReady",7),this.arcgisPropertyChange=Ot(this,"arcgisPropertyChange",7),this.manager=Sf(this,So),this.widget=z5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=$g()("activeBasemap","state"),this.activeBasemap=this.widget.activeBasemap,this.autoDestroyDisabled=!1,this.disabled=this.widget.disabled,this.icon=this.widget.icon,this.label=this.widget.label,this.headingLevel=this.widget.headingLevel,this.source=this.widget.source,this.position="bottom-left",this.referenceElement=void 0,this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return F5e}},xX);function V5e(){if(typeof customElements>"u")return;["arcgis-basemap-gallery"].forEach(e=>{switch(e){case"arcgis-basemap-gallery":customElements.get(e)||customElements.define(e,q5e);break}})}V5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const G5e="arcgis-placement{display:block;pointer-events:auto;box-shadow:none}.arcgis-placement__container{display:flex}",j5e=G5e,B5e=ts(class extends es{constructor(){super(),this.__registerHost(),this.arcgisReady=Ot(this,"arcgisReady",7),this._setContainer=e=>{this.el.childElem=e},this.referenceElement=void 0,this.position="bottom-left"}referenceElementWatcher(e){KCe(this,e)}positionWatcher(e){var i;this.el.childElem&&e!==void 0&&((i=this.el.view)==null||i.ui.move(this.el.childElem,e))}async componentDidLoad(){WCe(this),o3(this)}disconnectedCallback(){var e,i;this.el.childElem&&((i=(e=this.el.view)==null?void 0:e.ui)==null||i.remove(this.el.childElem))}render(){return ke("div",{key:"71b98c7f94af271e6881f46e4036085576e1fbd4",ref:this._setContainer,class:"arcgis-placement__container"},ke("slot",{key:"ac18bc6a5a4ae5a8642d73b7b692c6180a3c13ec"}))}get el(){return this}static get watchers(){return{referenceElement:["referenceElementWatcher"],position:["positionWatcher"]}}static get style(){return j5e}},[4,"arcgis-placement",{referenceElement:[1,"reference-element"],position:[1]},void 0,{referenceElement:["referenceElementWatcher"],position:["positionWatcher"]}]);function H5e(){if(typeof customElements>"u")return;["arcgis-placement"].forEach(e=>{switch(e){case"arcgis-placement":customElements.get(e)||customElements.define(e,B5e);break}})}H5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const U5e="",Y5e=U5e,X5e=rm(YEe),wX=[0,"arcgis-distance-measurement-2d",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],icon:[1025],label:[1025],unit:[1025],unitOptions:[1040],position:[1025],state:[1537],destroy:[64]}],W5e=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>wX[2]??{},this.arcgisReady=Ot(this,"arcgisReady",7),this.arcgisPropertyChange=Ot(this,"arcgisPropertyChange",7),this.manager=Sf(this,So),this.widget=X5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=$g()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.icon=this.widget.icon,this.label=this.widget.label,this.unit=this.widget.unit,this.unitOptions=this.widget.unitOptions,this.position="bottom-left",this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return Y5e}},wX);function Z5e(){if(typeof customElements>"u")return;["arcgis-distance-measurement-2d"].forEach(e=>{switch(e){case"arcgis-distance-measurement-2d":customElements.get(e)||customElements.define(e,W5e);break}})}Z5e();/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */const K5e="",J5e=K5e,Q5e=rm(jEe),SX=[0,"arcgis-area-measurement-2d",{autoDestroyDisabled:[1028,"auto-destroy-disabled"],referenceElement:[1025,"reference-element"],label:[1025],icon:[1025],unit:[1025],unitOptions:[1040],position:[1025],state:[1537],destroy:[64]}],ePe=ts(class extends es{connectedCallback(){this.manager._connectedCallback()}disconnectedCallback(){this.manager._disconnectedCallback()}constructor(){super(),this.__registerHost(),this.constructor.__registerControllers=()=>SX[2]??{},this.arcgisReady=Ot(this,"arcgisReady",7),this.arcgisPropertyChange=Ot(this,"arcgisPropertyChange",7),this.manager=Sf(this,So),this.widget=Q5e(this),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=$g()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.label=this.widget.label,this.icon=this.widget.icon,this.unit=this.widget.unit,this.unitOptions=this.widget.unitOptions,this.position="bottom-left",this.state=this.viewModel.state}async destroy(){await this.manager.destroy()}get el(){return this}static get style(){return J5e}},SX);function tPe(){if(typeof customElements>"u")return;["arcgis-area-measurement-2d"].forEach(e=>{switch(e){case"arcgis-area-measurement-2d":customElements.get(e)||customElements.define(e,ePe);break}})}tPe();function I(t,e,i,s){var n,r=arguments.length,o=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,s);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function Qlt(t,e){return function(i,s){e(i,s,t)}}function eut(t,e,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function l(y){try{f(s.next(y))}catch(_){o(_)}}function c(y){try{f(s.throw(y))}catch(_){o(_)}}function f(y){y.done?r(y.value):n(y.value).then(l,c)}f((s=s.apply(t,[])).next())})}function Wl(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,n;if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose]}if(typeof s!="function")throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(r){return Promise.reject(r)}}),t.stack.push({value:e,dispose:s,async:i})}return e}var iPe=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var s=new Error(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function om(t){function e(r){t.error=t.hasError?new iPe(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}var i,s=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&s===1)return s=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(r).then(n,function(o){return e(o),n()})}else s|=1}catch(o){e(o)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}let H0;function ht(t){return typeof H0[t]=="function"?H0[t]=H0[t](globalThis):H0[t]}var Ose,Rse,Lse,Fse;H0=(Ose=globalThis.dojoConfig)!=null&&Ose.has||(Rse=globalThis.esriConfig)!=null&&Rse.has?{...(Lse=globalThis.dojoConfig)==null?void 0:Lse.has,...(Fse=globalThis.esriConfig)==null?void 0:Fse.has}:{},ht.add=(t,e,i,s)=>{(s||H0[t]===void 0)&&(H0[t]=e),i&&ht(t)},ht.cache=H0,ht.add("big-integer-warning-enabled",!0),ht.add("esri-deprecation-warnings",!0),ht.add("esri-tests-disable-screenshots",!1),ht.add("esri-tests-use-full-window",!1),ht.add("esri-tests-post-to-influx",!0),ht.add("esri-cim-animations-enable-status","enabled"),ht.add("esri-cim-animations-spotlight",!1),ht.add("esri-cim-animations-freeze-time",!1),ht.add("enable-feature:multiple-highlights",!1),(()=>{var e;ht.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ht.add("host-browser",t),ht.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ht.add("dom",t),ht("host-browser")){const i=navigator,s=i.userAgent,n=i.appVersion,r=parseFloat(n);if(ht.add("wp",parseFloat(s.split("Windows Phone")[1])||void 0),ht.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0),ht.add("khtml",n.includes("Konqueror")?r:void 0),ht.add("edge",parseFloat(s.split("Edge/")[1])||void 0),ht.add("opr",parseFloat(s.split("OPR/")[1])||void 0),ht.add("webkit",!ht("wp")&&!ht("edge")&&parseFloat(s.split("WebKit/")[1])||void 0),ht.add("chrome",!ht("edge")&&!ht("opr")&&parseFloat(s.split("Chrome/")[1])||void 0),ht.add("android",!ht("wp")&&parseFloat(s.split("Android ")[1])||void 0),ht.add("safari",!n.includes("Safari")||ht("wp")||ht("chrome")||ht("android")||ht("edge")||ht("opr")?void 0:parseFloat(n.split("Version/")[1])),ht.add("mac",n.includes("Macintosh")),!ht("wp")&&/(iPhone|iPod|iPad)/.test(s)){const o=RegExp.$1.replace(/P/,"p"),l=/OS ([\d_]+)/.test(s)?RegExp.$1:"1",c=parseFloat(l.replace(/_/,".").replaceAll("_",""));ht.add(o,c),ht.add("ios",c)}ht("webkit")||(!s.includes("Gecko")||ht("wp")||ht("khtml")||ht("edge")||ht.add("mozilla",r),ht("mozilla")&&ht.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ht.add("esri-mobile",e),i&&ht.add("esri-iPhone",i),ht.add("esri-geolocation",!!navigator.geolocation)}ht.add("esri-wasm","WebAssembly"in globalThis),ht.add("esri-performance-mode-frames-between-render",20),ht.add("esri-force-performance-mode",!1),ht.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),ht.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ht.add("esri-atomics","Atomics"in globalThis),ht.add("esri-workers","Worker"in globalThis),ht.add("web-feat:cache","caches"in globalThis),ht.add("esri-workers-arraybuffer-transfer",!ht("safari")||Number(ht("safari"))>=12),ht.add("workers-pool-size",8),ht.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ht.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ht.add("featurelayer-fast-triangulation-enabled",!0),ht.add("featurelayer-animation-enabled",!0),ht.add("featurelayer-snapshot-enabled",!0),ht.add("featurelayer-snapshot-point-min-threshold",8e4),ht.add("featurelayer-snapshot-point-max-threshold",4e5),ht.add("featurelayer-snapshot-point-coverage",.1),ht.add("featurelayer-query-max-depth",4),ht.add("featurelayer-query-pausing-enabled",!1),ht.add("featurelayer-advanced-symbols",!1),ht.add("featurelayer-pbf",!0),ht.add("featurelayer-pbf-statistics",!1),ht.add("feature-layers-workers",!0),ht.add("feature-polyline-generalization-factor",1),ht.add("mapview-transitions-duration",200),ht.add("mapview-essential-goto-duration",200),ht.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ht.add("mapserver-pbf-version-support",10.81),ht.add("mapservice-popup-identify-max-tolerance",20),ht("host-webworker")||ht("host-browser")&&(ht.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ht.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{ht.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ht.add("esri-image-decode",!1,!0,!0)})}return!1}),ht.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();let cT=class D1{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*D1._m}getInt(){return this._seed=(D1._a*this._seed+D1._c)%D1._m,this._seed}getFloat(){return this.getInt()/(D1._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const s=i-e;return e+this.getInt()/D1._m*s}};cT._m=2147483647,cT._a=48271,cT._c=0;const sPe=1.5,tut=1/sPe,iut=.5;function sut(t,e){if(!e)return t;for(const i of e)t.push(i);return t}function nut(t,e){return e?t.filter((i,s,n)=>n.findIndex(e.bind(null,i))===s):Array.from(new Set(t))}function df(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1}else for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}function nPe(t,e,i){let s,n;return i?(s=e.filter(r=>!t.some(o=>i(o,r))),n=t.filter(r=>!e.some(o=>i(o,r)))):(s=e.filter(r=>!t.includes(r)),n=t.filter(r=>!e.includes(r))),{added:s,removed:n}}function rut(t){return t&&typeof t.length=="number"}let Xre=class{constructor(){this.last=0}};const Wre=new Xre;function _$(t,e,i,s){s=s||Wre;const n=Math.max(0,s.last-10);for(let o=n;o<i;++o)if(t[o]===e)return s.last=o,o;const r=Math.min(n,i);for(let o=0;o<r;++o)if(t[o]===e)return s.last=o,o;return-1}function rPe(t,e,i,s){const n=t.length,r=_$(t,e,n,s);if(r!==-1)return t[r]=t[n-1],t.pop(),e}const ah=new Set;function oPe(t,e,i=t.length,s=e.length,n,r){if(s===0||i===0)return i;ah.clear();for(let l=0;l<s;++l)ah.add(e[l]);n=n||Wre;const o=Math.max(0,n.last-10);for(let l=o;l<i;++l)if(ah.has(t[l])&&(r==null||r.push(t[l]),ah.delete(t[l]),t[l]=t[i-1],--i,--l,ah.size===0||i===0))return ah.clear(),i;for(let l=0;l<o;++l)if(ah.has(t[l])&&(r==null||r.push(t[l]),ah.delete(t[l]),t[l]=t[i-1],--i,--l,ah.size===0||i===0))return ah.clear(),i;return ah.clear(),i}function aut(t,e){let i=0;for(let s=0;s<t.length;++s){const n=t[s];e(n,s)&&(t[i]=n,i++)}t.length=i}function Zre(t){return t?(EX.seed=t,()=>EX.getFloat()):Math.random}function Kre(t,e){const i=Zre(e);for(let s=t.length-1;s>0;s--){const n=Math.floor(i()*(s+1)),r=t[s];t[s]=t[n],t[n]=r}return t}const EX=new cT;function hM(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function gl(t,e){return t!=null}const lut=[];function Jre(t){return 32+t.length}function hq(){return 16}function uut(t){if(!t)return 0;let e=eoe;for(const i in t)if(t.hasOwnProperty(i)){const s=t[i];switch(typeof s){case"string":e+=Jre(s);break;case"number":e+=hq();break;case"boolean":e+=4}}return e}function aPe(t){if(!t)return 0;if(Array.isArray(t))return lPe(t);let e=eoe;for(const i in t)t.hasOwnProperty(i)&&(e+=Qre(t[i]));return e}function lPe(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=toe;for(let s=0;s<e;s++)i+=Qre(t[s]);return i}function Qre(t){switch(typeof t){case"object":return aPe(t);case"string":return Jre(t);case"number":return hq();case"boolean":return 4;default:return 8}}function uPe(t,e){return toe+t.length*e}const eoe=32,toe=16;function cut(t){return t instanceof ArrayBuffer}function dq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function ioe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function soe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function fq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function noe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function pq(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function roe(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function lC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function uC(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function ooe(t){return!("buffer"in t)}function hut(...t){return t.reduce((e,i)=>e+(i?ooe(i)?uPe(i,hq()):i.byteLength+cPe:0),0)}const cPe=145,aoe=1024;function dut(t){return uC(t)||lC(t)||pq(t)||fq(t)||dq(t)}function fut(t){return uC(t)||lC(t)}function put(t){return uC(t)?179769e303:lC(t)?3402823e32:roe(t)?4294967295:noe(t)?65535:ioe(t)||soe(t)?255:pq(t)?2147483647:fq(t)?32767:dq(t)?127:256}function mq(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function Ue(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=hoe(t);if(e!=null)return e;if(loe(t))return t.clone();if(uoe(t))return t.map(Ue);if(coe(t))return t.clone();const i={};for(const s of Object.getOwnPropertyNames(t))i[s]=Ue(t[s]);return i}function b$(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=hoe(t);if(e!=null)return e;if(uoe(t)){let i=!0;const s=t.map(n=>{const r=b$(n);return n!=null&&r==null&&(i=!1),r});return i?s:null}if(loe(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!coe(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const s of Object.getOwnPropertyNames(t)){const n=t[s],r=b$(n);if(n!=null&&r==null)return null;i[s]=r}return i}return null}function loe(t){return typeof t.clone=="function"}function uoe(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function coe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function CX(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function hoe(t){if(dq(t)||ioe(t)||soe(t)||fq(t)||noe(t)||pq(t)||roe(t)||lC(t)||uC(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,s]of t)e.set(i,Ue(s));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(Ue(i));return e}return null}function gq(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function doe(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&df(t,e):t instanceof Set?e instanceof Set&&dPe(t,e):t instanceof Map?e instanceof Map&&fPe(t,e):!!CX(t)&&CX(e)&&hPe(t,e))}function hPe(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const s of i)if(t[s]!==e[s]||!Object.prototype.hasOwnProperty.call(e,s))return!1;return!0}function dPe(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function fPe(t,e){if(t.size!==e.size)return!1;for(const[i,s]of t){const n=e.get(i);if(n!==s||n===void 0&&!e.has(i))return!1}return!0}function yq(t,e,i=!1){return poe(t,e,i)}function $p(t,e){if(e!=null)return e[t]||foe(t.split("."),!1,e)}function Ka(t,e,i){const s=t.split("."),n=s.pop(),r=foe(s,!0,i);r&&n&&(r[n]=e)}function PX(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let s=0;s<t.length;s++)if(PX(t[s],i[s]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(PX(t[i],e[i]))return!0;return!1}return t!==e}function foe(t,e,i){let s=i;for(const n of t){if(s==null)return;if(!(n in s)){if(!e)return;s[n]={}}s=s[n]}return s}function poe(t,e,i){return e?Object.keys(e).reduce((s,n)=>{let r=s[n],o=e[n];return r===o?s:r===void 0?(s[n]=Ue(o),s):(Array.isArray(o)||Array.isArray(s)?(r=r?Array.isArray(r)?s[n]=r.slice():s[n]=[r]:s[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(l=>{r.includes(l)||r.push(l)}):s[n]=o.slice())):o&&typeof o=="object"?s[n]=poe(r,o,i):s.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(s[n]=o),s)},t||{}):t}var zse;const Gs={apiKey:void 0,applicationName:"",applicationUrl:(zse=globalThis.location)==null?void 0:zse.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(yq(Gs,globalThis.esriConfig,!0),delete Gs.has),!Gs.assetsPath){{const t="4.31";Gs.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Gs.defaultAssetsPath=Gs.assetsPath}const pPe=/\{([^}]+)\}/g;function TX(t){return t??""}function dM(t,e){return e?t.replaceAll(pPe,typeof e=="object"?(i,s)=>TX($p(s,e)):(i,s)=>TX(e(s))):t}function mut(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e!=null&&e.includes(i)?i:`\\${i}`)}function moe(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let IX;function gut(t){return IX??(IX=new DOMParser),IX.parseFromString(t||"","text/html").body.innerText||""}function yut(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function vut(t,...e){let i=t[0];for(let s=0;s<e.length;++s)i+=e[s]+t[s+1];return i}const MX={info:0,warn:1,error:2,none:3};let zt=class cu{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,cu._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=cu.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,cu._loggers.get(e)||new cu({module:e})}_log(e,i,...s){if(this._matchLevel(e)){if(i!=="always"&&!cu._throttlingDisabled){const n=gPe(s),r=this._loggedMessages[e].get(n);if(i==="once"&&r!=null||i==="oncePerTick"&&r&&r>=cu._tickCounter)return;this._loggedMessages[e].set(n,cu._tickCounter),cu._scheduleTickCounterIncrement()}for(const n of Gs.log.interceptors)if(n(e,this.module,...s))return;this._inheritedWriter()(e,this.module,...s)}}_parentWithMember(e,i){let s=this;for(;s!=null;){const n=s[e];if(n!=null)return n;s=s.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",mPe)}_matchLevel(e){const i=Gs.log.level||"warn";return MX[this._parentWithMember("level",i)]<=MX[e]}static _scheduleTickCounterIncrement(){cu._tickCounterScheduled||(cu._tickCounterScheduled=!0,Promise.resolve().then(()=>{cu._tickCounter++,cu._tickCounterScheduled=!1}))}};function mPe(t,e,...i){console[t](`[${e}]`,...i)}function gPe(...t){return moe(JSON.stringify(t,(i,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]"))}zt._loggers=new Map,zt._tickCounter=0,zt._tickCounterScheduled=!1,zt._throttlingDisabled=!1;function yPe(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,s)=>s===""?"$":($p(s,e)??"").toString())}let goe=class{constructor(e,i,s=void 0){this.name=e,this.details=s,this.message=(i&&yPe(i,s))??""}toString(){return"["+this.name+"]: "+this.message}},rt=class yoe extends goe{constructor(e,i,s){super(e,i,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return Ue(i)}catch{return"[object]"}}))}}catch(e){throw zt.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new yoe(e.name,e.message,e.details)}};rt.prototype.type="error";const AX=new WeakMap;function vPe(t,e,i=!1){const s=`🛑 DEPRECATED - ${e}`;if(!i)return void t.warn(s);let n=AX.get(t);n||(n=new Set,AX.set(t,n)),n.has(e)||(n.add(e),t.warn(s))}function voe(t,e,i={}){if(ht("esri-deprecation-warnings")){const{moduleName:s}=i;g2(t,`Function: ${(s?s+"::":"")+e+"()"}`,i)}}function hI(t,e,i={}){if(ht("esri-deprecation-warnings")){const{moduleName:s}=i;g2(t,`Property: ${(s?s+"::":"")+e}`,i)}}function _Pe(t,e,i={}){ht("esri-deprecation-warnings")&&g2(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function g2(t,e,i={}){if(ht("esri-deprecation-warnings")){const{replacement:s,version:n,see:r,warnOnce:o}=i;let l=e;s&&(l+=`
	🛠️ Replacement: ${s}`),n&&(l+=`
	⚙️ Version: ${n}`),r&&(l+=`
	🔗 See ${r} for more details.`),vPe(t,l,o)}}function but(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function xut(t,e){for(const i of t)if(i!=null&&e(i))return i}function DX(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let fM=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(DX(e)){const s=this._getOrCreateGroup(i);for(const n of e)NX(n)&&s.push(n)}else NX(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(s=>s.forEach(e));else{const s=this._getGroup(e);s&&i&&s.forEach(i)}}has(e){return this._groups.has(LP(e))}remove(e){if(typeof e!="string"&&DX(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(kX(this._getGroup(e)),this._groups.delete(LP(e)),this):this}removeAll(){return this._groups.forEach(kX),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(LP(e),i),i}_getGroup(e){return this._groups.get(LP(e))}};function LP(t){return t||"_default_"}function kX(t){for(const e of t)e instanceof fM?e.removeAll():e.remove()}function NX(t){return t!=null&&(!!t.remove||t instanceof fM)}function bPe(t,e){if(t==null)throw new Error(e??"value is None")}function so(t){return t==null||t.destroy(),null}function Sut(t){return t==null||t.dispose(),null}function bo(t){return t==null||t.remove(),null}function og(t){return t==null||t.abort(),null}function Eut(t){return t==null||t.release(),null}function _oe(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function xPe(t,e){let i;return t.some((s,n)=>(i=e(s,n),i!=null)),i??void 0}const boe=Symbol("Accessor-beforeDestroy"),wPe={remove:()=>{}};function ds(t){return t?{remove(){t&&(t(),t=void 0)}}:wPe}function xoe(t){t.forEach(e=>e==null?void 0:e.remove())}function _d(t){xoe(t),t.length=0}function am(t){return ds(()=>xoe(t))}function Cut(t){return ds(()=>{var e;return(e=t())==null?void 0:e.remove()})}function Put(t){return ds(()=>t==null?void 0:t.abort())}function SPe(t){return ds(t!=null?()=>t.destroy():void 0)}function wl(t){return t.__accessor__??null}function EPe(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function hT(t,e,i){return i?dI(t,e,{policy:i,path:""}):dI(t,e,null)}function dI(t,e,i){return e?Object.keys(e).reduce((s,n)=>{const r=n;let o=null,l="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,l=i.policy(o)),l==="replace"||l==="replace-arrays"&&Array.isArray(s[r]))return s[r]=e[r],s;if(s[r]===void 0)return s[r]=Ue(e[r]),s;let c=s[r],f=e[r];if(c===f)return s;if(Array.isArray(f)||Array.isArray(s))c=c?Array.isArray(c)?s[r]=c.slice():s[r]=[c]:s[r]=[],f&&(Array.isArray(f)||(f=[f]),f.forEach(y=>{c.includes(y)||c.push(y)}));else if(f&&typeof f=="object")if(i){const y=i.path;i.path=o,s[r]=dI(c,f,i),i.path=y}else s[r]=dI(c,f,null);else s.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(s[r]=f);return s},t||{}):t}function woe(t){return Array.isArray(t)?t:t.split(".")}function $X(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function CPe(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...$X(i));return e}return $X(t)}function Soe(t,e,i,s){const n=CPe(e);if(n.length!==1){const r=n.map(o=>s(t,o,i));return am(r)}return s(t,n[0],i)}function Eoe(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=wl(e);return EPe(s,i)?s.get(i):e[i]}function Coe(t,e,i){if(t==null)return t;const s=Eoe(e[i],t);return!s&&i<e.length-1?void 0:i===e.length-1?s:Coe(s,e,i+1)}function cC(t,e,i=0){return typeof e!="string"||e.includes(".")?Coe(t,woe(e),i):Eoe(e,t)}function Ac(t,e){return cC(t,e)}function OX(t,e){return cC(e,t)!==void 0}var jl;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED",t[t.DESTROYED=3]="DESTROYED"})(jl||(jl={}));function hC(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const s in e)e[s]=Ue(e[s]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function pM(t,e){const i=hC(t);let s=i[e];return s||(s=i[e]={}),s}function PPe(t,e){return hT(t,e,IPe)}const TPe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function IPe(t){return TPe.test(t)?"replace":"merge"}function MPe(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function APe(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let dC=class x${constructor(e,i,s,n=1,r=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=s,this.allocationSize=n,this._pool=new Array(r),this._initialSize=r;for(let o=0;o<r;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(x$.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let n=0;n<s;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):APe(i)&&i.acquire(...e),i}release(e){e&&!x$.test.disabled&&(this._releaseFunction?this._releaseFunction(e):MPe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const s=this._pool[i];this._dispose(s)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};dC.test={disabled:!1};let DPe=class{constructor(e,i){this._observers=e,this._observer=i}remove(){hM(this._observers,this._observer)}},Poe=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return kPe;this._observers==null&&(this._observers=[]);const i=this._observers;let s=!1,n=!1;const r=i.length;for(let o=0;o<r;++o){const l=i[o];if(l.destroyed)n=!0;else if(l===e){s=!0;break}}return s||(i.push(e),n&&this._removeDestroyedObservers()),new DPe(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let s=0;for(let n=0;n<i;++n){for(;n+s<i&&e[n+s].destroyed;)++s;if(s>0){if(!(n+s<i))break;e[n]=e[n+s]}}e.length=i-s}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const kPe=ds();var Bi;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Bi||(Bi={}));const w$=Bi.USER+1;function U0(t){switch(t){case"defaults":return Bi.DEFAULTS;case"service":return Bi.SERVICE;case"portal-item":return Bi.PORTAL_ITEM;case"web-scene":return Bi.WEB_SCENE;case"web-map":return Bi.WEB_MAP;case"link-chart":return Bi.LINK_CHART;case"user":return Bi.USER;default:return null}}function fI(t){switch(t){case Bi.DEFAULTS:return"defaults";case Bi.SERVICE:return"service";case Bi.PORTAL_ITEM:return"portal-item";case Bi.WEB_SCENE:return"web-scene";case Bi.WEB_MAP:return"web-map";case Bi.LINK_CHART:return"link-chart";case Bi.USER:return"user"}}function NPe(t){return fI(t)}var Ks;(function(t){t[t.Dirty=1]="Dirty",t[t.Overridden=2]="Overridden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ks||(Ks={}));let mM=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const pI=new mM,a3=[];let gS=pI;function mi(t){gS.onAccessed(t)}let dT=!1,fT=!1;function Gp(t,e,i){if(dT)return vq(t,e,i);let s=null;return Toe(t),s=e.call(i),Ioe(),s}function $Pe(t,e){return Gp(pI,t,e)}function vq(t,e,i){const s=dT;dT=!0,Toe(t);let n=null;try{n=e.call(i)}catch(r){fT&&zt.getLogger("esri.core.accessorSupport.tracking").error(r)}return Ioe(),dT=s,n}function Toe(t){gS=t,a3.push(t)}function Ioe(){const t=a3.length;if(t>1){const e=a3.pop();gS=a3[t-2],e.onTrackingEnd()}else if(t===1){const e=a3.pop();gS=pI,e.onTrackingEnd()}else gS=pI}function Moe(t,e){if(e.flags&Ks.DepTrackingInitialized)return;e.flags|=Ks.DepTrackingInitialized;const i=fT;fT=!1,e.flags&Ks.AutoTracked?vq(e.trackingTarget,e.metadata.get,t):Aoe(t,e),fT=i}const OPe=[];function Aoe(t,e){e.flags&Ks.ExplicitlyTracking||(e.flags|=Ks.ExplicitlyTracking,vq(e.trackingTarget,()=>{const i=e.metadata.dependsOn||OPe;for(const s of i)if(typeof s!="string"||s.includes(".")){const n=woe(s);for(let r=0,o=t;r<n.length&&o!=null&&typeof o=="object";++r)o=RX(o,n[r],r!==n.length-1)}else RX(t,s,!1)}),e.flags&=~Ks.ExplicitlyTracking)}function RX(t,e,i){const s=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const r=parseInt(s,10);if(!isNaN(r))return Array.isArray(t)?t[r]:t.at(r)}const n=wl(t);if(n){const r=n.propertiesByName.get(s);r&&(mi(r),Moe(t,r))}return i?t[s]:void 0}let LX=class extends Poe{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new mM(this),this.flags=0,this.flags=Ks.Dirty|(i.nonNullable?Ks.NonNullable:0)|(i.hasOwnProperty("value")?Ks.HasDefaultValue:0)|(i.get===void 0?Ks.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ks.AutoTracked:0)}destroy(){this.flags&Ks.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&mi(this);const i=e.store,s=this.propertyName,n=this.flags,r=i.get(s);if(n&Ks.Computing||~n&Ks.Dirty&&i.has(s))return r;this.flags|=Ks.Computing;const o=e.host;let l;n&Ks.AutoTracked?l=Gp(this.trackingTarget,this.metadata.get,o):(Aoe(o,this),l=this.metadata.get.call(o)),this.flags|=Ks.DepTrackingInitialized,i.set(s,l,Bi.COMPUTED);const c=i.get(s);return c===r?this.flags&=~Ks.Dirty:$Pe(this.commit,this),this.flags&=~Ks.Computing,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Ks.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Ks.Overridden&&(this.flags|=Ks.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onCommitted()}}},RPe=class Doe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Doe;return this._values.forEach((s,n)=>{e&&e.has(n)||i.set(n,Ue(s))}),i}get(e){return this._values.get(e)}originOf(){return Bi.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function FP(t,e,i){return t!==void 0}function FX(t,e,i,s){return t!==void 0&&(!(i==null&&t.flags&Ks.NonNullable)||(s.lifecycle,jl.INITIALIZING,!1))}let LPe=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=jl.INITIALIZING,this.store=new RPe,this.mutable=!0,this._origin=Bi.USER;const i=this.host.constructor.__accessorMetadata__;for(const s in i){const n=new LX(s,i[s]);this.propertiesByName.set(s,n)}this.metadata=i}initialize(){this.lifecycle=jl.CONSTRUCTING}constructed(){this.lifecycle=jl.CONSTRUCTED}destroy(){this.lifecycle=jl.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==jl.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);this.mutable&&mi(i);const s=this.store;return s.has(e)?s.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const s=this.propertiesByName.get(e);if(s!==void 0&&s.flags&Ks.HasDefaultValue)return"defaults"}return fI(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(FP(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const s=this.propertiesByName.get(e);FP(s)&&this._internalSet(s,i)}getDependsInfo(e,i,s){const n=this.propertiesByName.get(i);if(!FP(n))return"";const r=new mM,o=Gp(r,()=>{var f;return(f=n.metadata.get)==null?void 0:f.call(e)});let l=`${s}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const c=r.accessed??new Set;if(c.size===0)return l;s+="  ";for(const f of c)f instanceof LX&&(l+=`${s}${f.propertyName}: undefined
`);return l}setAtOrigin(e,i,s){const n=this.propertiesByName.get(e);if(FP(n))return this._setAtOrigin(n,i,s)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Ks.Overridden)}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Ks.Overridden&&(i.flags&=~Ks.Overridden,i.notifyChange())}override(e,i){const s=this.propertiesByName.get(e);if(!FX(s,e,i,this))return;const n=s.metadata.cast;if(n){const r=this._cast(n,i),{valid:o,value:l}=r;if(L8.release(r),!o)return;i=l}s.flags|=Ks.Overridden,this._internalSet(s,i)}set(e,i){const s=this.propertiesByName.get(e);if(!FX(s,e,i,this))return;const n=s.metadata.cast;if(n){const o=this._cast(n,i),{valid:l,value:c}=o;if(L8.release(o),!l)return;i=c}const r=s.metadata.set;r?r.call(this.host,i):this._internalSet(s,i)}setDefaultOrigin(e){this._origin=U0(e)}getDefaultOrigin(){return fI(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const s=this.lifecycle!==jl.INITIALIZING?this._origin:Bi.DEFAULTS;this._setAtOrigin(e,i,s)}_setAtOrigin(e,i,s){const n=this.store,r=e.propertyName;n.has(r,s)&&gq(i,n.get(r))&&~e.flags&Ks.Overridden&&s===n.originOf(r)||(e.invalidate(),n.set(r,i,s),e.commit(),Moe(this.host,e))}_cast(e,i){const s=L8.acquire();return s.valid=!0,s.value=i,e&&(s.value=e.call(this.host,i,s)),s}},FPe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const L8=new dC(FPe);function mI(t,e,i){if(t&&e)if(typeof e=="object")for(const s of Object.getOwnPropertyNames(e))mI(t,s,e[s]);else{if(e.includes(".")){const n=e.split("."),r=n.splice(-1,1)[0];return void mI(Ac(t,n),r,i)}const s=t.__accessor__;s!=null&&zPe(e,s),t[e]=i}}function zPe(t,e){if(ht("esri-unknown-property-errors")&&!qPe(t,e))throw new rt("set:unknown-property",VPe(t,e))}function qPe(t,e){return e.metadata[t]!=null}function VPe(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let GPe;function jPe(){return GPe}var zX;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(zX||(zX={}));function BPe(t){t.length=0}let Xd=class{constructor(e=50,i=50){this._pool=new dC(Array,void 0,BPe,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return F8.acquire()}static release(e){return F8.release(e)}static prune(){F8.prune()}};const F8=new Xd(100);let koe=class extends dC{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const zP=[];function y2(t){zP.push(t),zP.length===1&&queueMicrotask(()=>{const e=zP.slice();zP.length=0;for(const i of e)i()})}let yS=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var S$;(function(t){const e=(r,o,l,c)=>{let f=o,y=o;const _=l>>>1,x=r[f-1];for(;y<=_;){y=f<<1,y<l&&c(r[y-1],r[y])<0&&++y;const S=r[y-1];if(c(S,x)<=0)break;r[f-1]=S,f=y}r[f-1]=x},i=(r,o)=>r<o?-1:r>o?1:0;function s(r,o,l,c){o===void 0&&(o=0),l===void 0&&(l=r.length),c===void 0&&(c=i);for(let y=l>>>1;y>o;y--)e(r,y,l,c);const f=o+1;for(let y=l-1;y>o;y--){const _=r[o];r[o]=r[y],r[y]=_,e(r,f,y,c)}}function*n(r,o,l,c){o===void 0&&(o=0),l===void 0&&(l=r.length),c===void 0&&(c=i);for(let y=l>>>1;y>o;y--)e(r,y,l,c),yield;const f=o+1;for(let y=l-1;y>o;y--){const _=r[o];r[o]=r[y],r[y]=_,e(r,f,y,c),yield}}t.sort=s,t.iterableSort=n})(S$||(S$={}));const qX=S$,HPe=1.5,UPe=1.1;let $y=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Xre,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>VX(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let s=0;s<this._length;s++){const n=this.data[s];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const s=this.data.indexOf(e,i);return s!==-1&&s<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let s=0;s<i;s++)this.data[this._length++]=e[s]}fill(e,i){for(let s=0;s<i;s++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,VX(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=_$(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(_$(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,s){this.length=oPe(this.data,e,this.length,i,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const s=this.data[e];this.data[e]=this.data[i],this.data[i]=s}sort(e){qX.sort(this.data,0,this.length,e)}iterableSort(e){return qX.iterableSort(this.data,0,this.length,e)}some(e,i){for(let s=0;s<this.length;++s)if(e.call(i,this.data[s],s,this.data))return!0;return!1}find(e,i){const{data:s,length:n}=this;for(let r=0;r<n;++r)if(e.call(i,s[r]))return s[r]}filterInPlace(e,i){let s=0;for(let n=0;n<this._length;++n){const r=this.data[n];e.call(i,r,n,this.data)&&(this.data[n]=this.data[s],this.data[s]=r,s++)}if(this._deallocator)for(let n=s;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=s,this._shrink(),this}forAll(e,i){const{data:s,length:n}=this;for(let r=0;r<n;++r)e.call(i,s[r],r,s)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const s=new Array(this.length);for(let n=0;n<this.length;++n)s[n]=e.call(i,this.data[n],n,this.data);return s}reduce(e,i){let s=i;for(let n=0;n<this.length;++n)s=e(s,this.data[n],n,this.data);return s}has(e){const i=this.length,s=this.data;for(let n=0;n<i;++n)if(s[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function VX(t){t.data.length>HPe*t.length&&(t.data.length=Math.floor(t.length*UPe))}function YPe(t){return{setTimeout:(e,i)=>{const s=t.setTimeout(e,i);return ds(()=>t.clearTimeout(s))}}}const XPe=YPe(globalThis);function gM(t){return WPe(t)||Noe(t)}function WPe(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function Noe(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function Oy(t,e,i){if(!gM(t))throw new TypeError("target is not a Evented or EventTarget object");return Noe(t)?ZPe(t,e,i):t.on(e,i)}function ZPe(t,e,i,s){if(Array.isArray(e)){const n=e.slice();for(const r of n)t.addEventListener(r,i,s);return ds(()=>{for(const r of n)t.removeEventListener(r,i,s)})}return t.addEventListener(e,i,s),ds(()=>t.removeEventListener(e,i,s))}function $oe(t,e,i){if(!gM(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const s=Oy(t,e,n=>{s.remove(),i.call(t,n)});return s}function or(t="Aborted"){return new rt("AbortError",t)}function Kl(t,e="Aborted"){if($u(t))throw or(e)}function fC(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function $u(t){const e=fC(t);return e!=null&&e.aborted}function Nh(t){if(ad(t))throw t}function GX(t){if(!ad(t))throw t}function Bl(t,e){const i=fC(t);if(i!=null){if(!i.aborted)return $oe(i,"abort",()=>e());e()}}function Ooe(t,e){const i=fC(t);if(i!=null)return Kl(i),$oe(i,"abort",()=>e(or()))}function pC(t,e){return fC(e)==null?t:new Promise((i,s)=>{let n=Bl(e,()=>s(or()));const r=()=>{n=bo(n)};t.then(r,r),t.then(i,s)})}function ad(t){return(t==null?void 0:t.name)==="AbortError"}async function Kh(t){try{return await t}catch(e){if(!ad(e))throw e;return}}async function _q(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),s=i.map(o=>t[o]),n=await _q(s),r={};return i.map((o,l)=>r[o]=n[l]),r}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(s,n)=>{const r=i[n];return r.status==="fulfilled"?{promise:s,value:r.value}:{promise:s,error:r.reason}}))}async function Lut(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function Fut(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function KPe(t,e=void 0,i){const s=new AbortController;return Bl(i,()=>s.abort()),new Promise((n,r)=>{let o=setTimeout(()=>{o=0,n(e)},t);Bl(s,()=>{o&&(clearTimeout(o),r(or()))})})}function zut(t,e){const i=new AbortController,s=setTimeout(()=>i.abort(),e);return Bl(t,()=>{i.abort(),clearTimeout(s)}),{...t,signal:i.signal}}function Cv(t){return t&&typeof t.then=="function"}function E$(t){return Cv(t)?t:Promise.resolve(t)}function Pv(t,e=-1){let i,s,n,r,o=null;const l=(...c)=>{if(i){s=c,r&&r.reject(or()),r=Cu();const x=r.promise;if(o){const S=o;o=null,S.abort()}return x}if(n=r||Cu(),r=null,e>0){const x=new AbortController;i=E$(t(...c,x.signal));const S=i;KPe(e).then(()=>{i===S&&(r?x.abort():o=x)})}else i=1,i=E$(t(...c));const f=()=>{const x=s;s=n=i=o=null,x!=null&&l(...x)},y=i,_=n;return y.then(f,f),y.then(_.resolve,_.reject),_.promise};return l}function Cu(){let t,e;const i=new Promise((n,r)=>{t=n,e=r}),s=n=>{t(n)};return s.resolve=n=>t(n),s.reject=n=>e(n),s.timeout=(n,r)=>XPe.setTimeout(()=>s.reject(r),n),s.promise=i,s}async function jX(t){await Promise.resolve(),Kl(t)}function qut(t){return t}function Vut(t){return 1e3*t}function Gut(t){return t}function jut(t){return .001*t}let JPe=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},QPe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},C$=0;const Aw={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},P$=["prepare","preRender","render","postRender","update","finish"],T$=[],Wy=new $y;let e4e=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function t4e(){Ry!=null&&(cancelAnimationFrame(Ry),Ry=requestAnimationFrame(xq))}const gI={frameTasks:Wy,willDispatch:!1,clearFrameTasks:i4e,dispatch:Loe,executeFrameTasks:s4e,reschedule:t4e};function bq(t){const e=new QPe(t);return T$.push(e),gI.willDispatch||(gI.willDispatch=!0,y2(Loe)),e}function Yut(t){const e=new JPe(t);return Wy.push(e),Ry==null&&(C$=performance.now(),Ry=requestAnimationFrame(xq)),new e4e(e)}let Ry=null;function i4e(t=!1){Wy.forAll(e=>{e.removed=!0}),t&&Roe()}function xq(){const t=performance.now();Ry=null,Ry=Wy.length>0?requestAnimationFrame(xq):null,gI.executeFrameTasks(t)}function s4e(t){const e=t-C$;C$=t;const i=1e3/60,s=Math.max(0,e-i);Aw.time=t,Aw.frameDuration=i-s;for(let n=0;n<P$.length;n++){const r=performance.now(),o=P$[n];Wy.forAll(l=>{var c;l.paused||l.removed||(n===0&&l.ticks++,l.phases[o]&&(Aw.elapsedFrameTime=performance.now()-t,Aw.deltaTime=l.ticks===0?0:e,(c=l.phases[o])==null||c.call(l,Aw)))}),a4e[n].push(performance.now()-r)}Roe(),l4e.push(performance.now()-t)}const qP=new $y;function Roe(){Wy.forAll(t=>{t.removed&&qP.push(t)}),Wy.removeUnorderedMany(qP.data,qP.length),qP.clear()}function Loe(){for(;T$.length;){const t=T$.shift();t.isActive&&t.callback()}gI.willDispatch=!1}function n4e(t=1,e){const i=Cu(),s=()=>{$u(e)?i.reject(or()):t===0?i():(--t,y2(()=>s()))};return s(),i.promise}function r4e(t){return n4e(1,t)}async function o4e(t){await r4e(t),await new Promise(e=>requestAnimationFrame(()=>{t!=null&&t.aborted||e()}))}const a4e=P$.map(t=>new yS(t)),l4e=new yS("total");function u4e(t,e){for(const i of t.values())if(e(i))return!0;return!1}function yI(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function BX(t,e){return e!=null&&t.add(e),t}function Foe(t,e){const i=new Set;return yI(i,t),yI(i,e),i}function zoe(t,e){const i=new Set;for(const s of e)t.has(s)&&i.add(s);return i}function Xut(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function Wut(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function c4e(t,e){const i=new Set(t);for(const s of e)i.delete(s);return i}function Zut(t,e){return c4e(Foe(t,e),zoe(t,e))}function Kut(t){let e;for(e of t);return e}let h4e=0;function vS(){return++h4e}let yM=class extends mM{constructor(e){super(new d4e(e)),this._observer&&HX.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&HX.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},d4e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=f4e}};const HX=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function f4e(){}let Vb=!1;const vI=[];function qoe(t,e){let i=new yM(r),s=null,n=!1;function r(){if(!i||n)return;if(Vb)return void Goe(r);const l=s;i.clear(),Vb=!0,n=!0,s=Gp(i,t),n=!1,Vb=!1,e(s,l),joe()}function o(){i&&(i.destroy(),i=null,s=null)}return n=!0,s=Gp(i,t),n=!1,ds(o)}function Voe(t,e){let i=new yM(n),s=null;function n(){e(s,o)}function r(){i&&(i.destroy(),i=null),s=null}function o(){return i?(i.clear(),s=Gp(i,t),s):null}return o(),ds(r)}function wq(t,e){let i=!1,s=!1;const n=!!(e!=null&&e.sync);let r=new yM(()=>{i||s||(s=!0,n?o():queueMicrotask(o))});function o(){s=!1,r&&!i&&(Vb?Goe(o):(r.clear(),Vb=!0,i=!0,Gp(r,t),i=!1,Vb=!1,joe()))}function l(){r&&(r.destroy(),r=null)}return i=!0,Gp(r,t),i=!1,ds(l)}function Goe(t){vI.includes(t)||vI.unshift(t)}function joe(){for(;vI.length;)vI.pop()()}var _S;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(_S||(_S={}));let iE=class{constructor(){this.uid=vS(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,s,n,r){return this.pool.acquire(_S.Untracked,e,i,s,n,r,gq)}static acquireTracked(e,i,s,n){return this.pool.acquire(_S.Tracked,e,i,s,null,null,n)}notify(e,i){this.type===_S.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,s,n,r,o,l){this.uid=vS(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=s,this.getValue=n,this.target=r,this.path=o,this.equals=l}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=vS(),this.removed=!0}};iE.pool=new koe(iE);const pT=new Xd,Fp=new Set;let _I;function bI(t){Fp.delete(t),Fp.add(t),_I||(_I=bq(g4e))}function p4e(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function m4e(t){for(const e of Fp.values())e.target===t&&(e.removed=!0)}function g4e(){let t=10;for(;_I&&t--;){_I=null;const e=y4e(),i=pT.acquire();for(const s of e){const n=s.uid;p4e(s),n===s.uid&&s.removed&&i.push(s)}for(const s of Fp)s.removed&&(i.push(s),Fp.delete(s));for(const s of i)iE.pool.release(s);pT.release(i),pT.release(e),I$.forEach(s=>s())}}function y4e(){const t=pT.acquire();t.length=Fp.size;let e=0;for(const i of Fp)t[e]=i,++e;return Fp.clear(),t}const I$=new Set;function v4e(t){return I$.add(t),ds(()=>I$.delete(t))}function _4e(t,e,i){let s=Soe(t,e,i,(n,r,o)=>{let l,c,f=Voe(()=>cC(n,r),(y,_)=>{var x;((x=n.__accessor__)==null?void 0:x.lifecycle)===jl.DESTROYED||l&&l.uid!==c?s.remove():(l||(l=iE.acquireUntracked(y,o,_,n,r),c=l.uid),bI(l))});return ds(()=>{f.remove(),l&&(l.uid!==c||l.removed||(l.removed=!0,bI(l)),l=null),s=f=null})});return s}function b4e(t,e,i){const s=Soe(t,e,i,(n,r,o)=>{let l=!1;return qoe(()=>cC(n,r),(c,f)=>{n.__accessor__.lifecycle!==jl.DESTROYED?l||(l=!0,gq(f,c)||o.call(n,c,f,r,n),l=!1):s.remove()})});return s}function x4e(t,e,i,s=!1){return t.__accessor__&&t.__accessor__.lifecycle!==jl.DESTROYED?s?b4e(t,e,i):_4e(t,e,i):ds()}function w4e(t,e,i){let s,n,r=Voe(t,(o,l)=>{s&&s.uid!==n?r.remove():(s||(s=iE.acquireTracked(o,e,l,i),n=s.uid),bI(s))});return ds(()=>{r.remove(),s&&(s.uid!==n||s.removed||(s.removed=!0,bI(s)),s=null),r=null})}function S4e(t,e,i){let s=!1;return qoe(t,(n,r)=>{s||(s=!0,i(r,n)||e(n,r),s=!1)})}function E4e(t,e,i=!1,s=doe){return i?S4e(t,e,s):w4e(t,e,s)}function UX(t){return u4e(Fp,e=>e.oldValue===t)}function tct(t,e){for(const i of t.values())if(e(i))return!0;return!1}function ict(t,e){for(const i of t.values())if(e(i))return i;return null}function Sq(t,e,i){const s=t.get(e);if(s!==void 0)return s;const n=i();return t.set(e,n),n}function sct(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const Gb=()=>zt.getLogger("esri.core.accessorSupport.ensureTypes");function C4e(t){return t==null?t:new Date(t)}function P4e(t){return t==null?t:!!t}function mC(t){return t==null?t:t.toString()}function tx(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function Eq(t){return t==null?t:Math.round(parseFloat(t))}function T4e(t){return null}function I4e(t,e){return i=>{let s=t(i);return e.step!=null&&(s=Math.round(s/e.step)*e.step),e.min!=null&&(s=Math.max(e.min,s)),e.max!=null&&(s=Math.min(e.max,s)),s}}function Boe(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function xI(t,e){return e!=null&&t&&!(e instanceof t)}function Hoe(t){return t&&"isCollection"in t}function YX(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function M4e(t,e){if(!(e!=null&&e.constructor)||!Hoe(e.constructor))return M$(t,e)?e:new t(e);const i=YX(t.prototype.itemType),s=YX(e.constructor.prototype.itemType);return i?s?i===s?e:i.prototype.isPrototypeOf(s.prototype)?new t(e):(M$(t,e),e):new t(e):e}function M$(t,e){return!!Boe(e)&&(Gb().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+vM(t)+"'"),!0)}function gC(t,e){return e==null?e:Hoe(t)?M4e(t,e):xI(t,e)?M$(t,e)?e:new t(e):e}function vM(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const A4e=new WeakMap;function D4e(t){switch(t){case Number:return e=>tx(e);case wn:return Eq;case Boolean:return P4e;case String:return mC;case Date:return C4e;case _M:return T4e;default:return Sq(A4e,t,()=>gC.bind(null,t))}}function Zo(t,e){const i=D4e(t);return arguments.length===1?i:i(e)}function sE(t,e,i){return arguments.length===1?sE.bind(null,t):e&&(Array.isArray(e)?e.map(s=>t(s,i)):[t(e,i)])}function k4e(t,e){return arguments.length===1?sE(i=>Zo(t,i)):sE(i=>Zo(t,i),e)}function Uoe(t,e,i){return e!==0&&Array.isArray(i)?i.map(s=>Uoe(t,e-1,s)):t(i)}function wI(t,e,i){if(arguments.length===2)return r=>wI(t,e,r);if(!i)return i;i=Uoe(t,e,i);let s=e,n=i;for(;s>0&&Array.isArray(n);)s--,n=n[0];if(n!==void 0)for(let r=0;r<s;r++)i=[i];return i}function N4e(t,e,i){return arguments.length===2?wI(s=>Zo(t,s),e):wI(s=>Zo(t,s),e,i)}function Yoe(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function A$(t,e){if(arguments.length===2)return A$(t).call(null,e);const i=new Set,s=t.filter(l=>typeof l!="function"),n=t.filter(l=>typeof l=="function");for(const l of t)typeof l!="string"&&typeof l!="number"||i.add(l);let r=null,o=null;return(l,c)=>{if(l==null)return l;const f=typeof l,y=f==="string"||f==="number";return y&&(i.has(l)||n.some(_=>f==="string"&&_===String||f==="number"&&_===Number))||f==="object"&&n.some(_=>!xI(l,_))?l:(y&&s.length?(r||(r=s.map(_=>typeof _=="string"?`'${_}'`:`${_}`).join(", ")),Gb().error("Accessor#set",`'${l}' is not a valid value for this property, only the following values are valid: ${r}`)):typeof l=="object"&&n.length?(o||(o=n.map(_=>vM(_)).join(", ")),Gb().error("Accessor#set",`'${l}' is not a valid value for this property, value must be one of ${o}`)):Gb().error("Accessor#set",`'${l}' is not a valid value for this property`),c&&(c.valid=!1),null)}}function Bc(t,e){if(arguments.length===2)return Bc(t).call(null,e);const i={},s=[],n=[];for(const c in t.typeMap){const f=t.typeMap[c];i[c]=Zo(f),s.push(vM(f)),n.push(c)}const r=()=>`'${s.join("', '")}'`,o=()=>`'${n.join("', '")}'`,l=typeof t.key=="string"?c=>c[t.key]:t.key;return c=>{if(t.base&&!xI(t.base,c)||c==null)return c;const f=l(c)||t.defaultKeyValue,y=i[f];if(!y)return Gb().error("Accessor#set",`Invalid property value, value needs to be one of ${r()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!xI(t.typeMap[f],c))return c;if(typeof t.key=="string"&&!Boe(c)){const _={};for(const x in c)x!==t.key&&(_[x]=c[x]);return y(_)}return y(c)}}let wn=class{},_M=class{};const oct={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function $4e(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Xoe(t){switch(t.type){case"native":return Zo(t.value);case"array":return sE(Xoe(t.value));case"one-of":return O4e(t);default:return null}}function O4e(t){let e=null;return(i,s)=>k$(i,t)?i:(e==null&&(e=D$(t)),Gb().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),s&&(s.valid=!1),null)}function D$(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case wn:return"integer";case Date:return"date";case _M:return"null";default:return vM(t.value)}case"array":return`array of ${D$(t.value)}`;case"one-of":{const e=t.values.map(i=>D$(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function k$(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case wn:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case _M:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!k$(i,e.value));case"one-of":return e.values.some(i=>k$(t,i))}}function N(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(e,i),n=pM(e,i);s&&(s.get||s.set?(n.get=s.get||n.get,n.set=s.set||n.set):"value"in s&&("value"in t&&zt.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=s.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const r=t.aliasOf;if(r){const c=typeof r=="string"?r:r.source,f=typeof r=="string"?null:r.overridable===!0;let y;n.dependsOn=[c],n.get=function(){let _=Ac(this,c);if(typeof _=="function"){y||(y=c.split(".").slice(0,-1).join("."));const x=Ac(this,y);x&&(_=_.bind(x))}return _},n.readOnly||(n.set=f?function(_){this._override(i,_)}:function(_){mI(this,c,_)})}const o=t.type,l=t.types;if(!n.cast){let c;o?c=R4e(o):l&&(c=Array.isArray(l)?sE(Bc(l[0])):Bc(l)),t.cast=L4e(t.cast,c)}PPe(n,t),t.range&&(n.cast=I4e(n.cast,t.range))}}function Woe(t,e,i){const s=pM(t,i);s.json||(s.json={});let n=s.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function R4e(t){let e=0,i=t;if($4e(t))return Xoe(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const s=i;if(Yoe(s))return e===0?A$(s):wI(A$(s),e);if(e===1)return k4e(s);if(e>1)return N4e(s,e);const n=t;return n.from?n.from:Zo(n)}function L4e(t,e){if(t||e)return t?e?(i,s)=>e(t(i,s),s):t:e}function F4e(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const s in i)if(e[s]){const n=e[s];i[s].forEach(r=>{e[r]=n}),delete e[s]}}}let Jh=class extends goe{constructor(e,i,s){super(e,i,s)}};Jh.prototype.type="warning";function Zoe(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const N$=()=>zt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function XX(t,e,i){var s,n;t&&(!i&&!e.read||(s=e.read)!=null&&s.reader||((n=e.read)==null?void 0:n.enabled)===!1||V4e(t)&&Ka("read.reader",ix(t),e))}function ix(t){var i,s;const e=t.ndimArray??0;if(e>1)return q4e(t);if(e===1)return WX(t);if("type"in t&&Joe(t.type)){const n=(s=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:s.Type,r=WX(typeof n=="function"?{type:n}:{types:n});return(o,l,c)=>{const f=r(o,l,c);return f&&new t.type(f)}}return Cq(t)}function Cq(t){return"type"in t?z4e(t.type):G4e(t.types)}function z4e(t){return t.prototype.read?(e,i,s)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void N$().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const r=new t;return r.read(e,s),r}:t.fromJSON}function Koe(t,e,i,s){return s!==0&&Array.isArray(e)?e.map(n=>Koe(t,n,i,s-1)):t(e,void 0,i)}function q4e(t){const e=Cq(t),i=Koe.bind(null,e),s=t.ndimArray??0;return(n,r,o)=>{if(n==null)return n;n=i(n,o,s);let l=s,c=n;for(;l>0&&Array.isArray(c);)l--,c=c[0];if(c!==void 0)for(let f=0;f<l;f++)n=[n];return n}}function WX(t){const e=Cq(t);return(i,s,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const l of i){const c=e(l,void 0,n);c!==void 0&&o.push(c)}return o}const r=e(i,void 0,n);return r!==void 0?[r]:void 0}}function Joe(t){if(!Zoe(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?Pq(e.Type):Qoe(e.Type))}function V4e(t){return"types"in t?Qoe(t.types):Pq(t.type)}function Pq(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Joe(t))}function Qoe(t){for(const e in t.typeMap)if(!Pq(t.typeMap[e]))return!1;return!0}function G4e(t){let e=null;const i=t.errorContext??"type",s=t.validate;return(n,r,o)=>{if(n==null)return n;const l=typeof n;if(l!=="object")return void N$().error(`Expected JSON value of type 'object' to deserialize, but got '${l}'`);e||(e=j4e(t));const c=t.key;if(typeof c!="string")return;const f=n[c],y=f?e[f]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!y){const x=`Type '${f||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new Jh(`${i}:unsupported`,x,{definition:n,context:o})),void N$().error(x)}const _=new y;return _.read(n,o),s?s(_):_}}function j4e(t){var i,s;const e={};for(const n in t.typeMap){const r=t.typeMap[n],o=hC(r.prototype);if(typeof t.key=="function")continue;const l=o[t.key];if(!l)continue;if((i=l.json)!=null&&i.type&&Array.isArray(l.json.type)&&l.json.type.length===1&&typeof l.json.type[0]=="string"){e[l.json.type[0]]=r;continue}const c=(s=l.json)==null?void 0:s.write;if(!(c!=null&&c.writer)){e[n]=r;continue}const f=c.target,y=typeof f=="string"?f:t.key,_={};c.writer(n,_,y),_[y]&&(e[_[y]]=r)}return e}function B4e(t){if(t.json||(t.json={}),KX(t.json),JX(t.json),ZX(t.json),t.json.origins)for(const e in t.json.origins)KX(t.json.origins[e]),JX(t.json.origins[e]),ZX(t.json.origins[e]);return!0}function ZX(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function KX(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function JX(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function QX(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&Zoe(t.type))?e.write.writer=Y4e:i>1?e.write.writer=X4e(i):e.types?Array.isArray(e.types)?e.write.writer=U4e(e.types[0]):e.write.writer=H4e(e.types):e.write.writer=nE}function H4e(t){return(e,i,s,n)=>e?eae(e,t,n)?nE(e,i,s,n):void 0:nE(e,i,s,n)}function eae(t,e,i){for(const s in e.typeMap)if(t instanceof e.typeMap[s])return!0;if(i!=null&&i.messages){const s=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new rt(`${s}:unsupported`,n,{definition:t,context:i})),zt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function U4e(t){return(e,i,s,n)=>!e||!Array.isArray(e)?nE(e,i,s,n):nE(e.filter(r=>eae(r,t,n)),i,s,n)}function nE(t,e,i,s){Ka(i,SI(t,s),e)}function SI(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?EI(t):t}function EI(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Y4e(t,e,i,s){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(r=>SI(r,s)),typeof n.toArray=="function"&&(n=n.toArray())):n=[SI(t,s)],Ka(i,n,e)}function tae(t,e,i){return i!==0&&Array.isArray(t)?t.map(s=>tae(s,e,i-1)):SI(t,e)}function X4e(t){return(e,i,s,n)=>{let r;if(e===null)r=null;else{r=tae(e,n,t);let o=t,l=r;for(;o>0&&Array.isArray(l);)o--,l=l[0];if(l!==void 0)for(let c=0;c<o;c++)r=[r]}Ka(s,r,i)}}function W4e(t,e){return Tq(t,"any",e==null?void 0:e.origin)}function $$(t,e){return Tq(t,"read",e==null?void 0:e.origin)}function iae(t,e){return Tq(t,"write",e==null?void 0:e.origin)}function Tq(t,e,i){let s=t==null?void 0:t.json;if(s!=null&&s.origins&&i){let n;n=i==="link-chart"?s.origins[i]&&(e==="any"||e in s.origins[i])?s.origins[i]:s.origins["web-map"]:s.origins[i],n&&(e==="any"||e in n)&&(s=n)}return s}function Z4e(t){var i;const e=K4e(t);if(t.json.origins)for(const s in t.json.origins){const n=t.json.origins[s],r=n.types?J4e(n):e;XX(r,n,!1),n.types&&!n.write&&((i=t.json.write)!=null&&i.enabled)&&(n.write={...t.json.write}),QX(r,n)}XX(e,t.json,!0),QX(e,t.json)}function K4e(t){return t.json.types?O$(t.json):t.type?sae(t):O$(t)}function J4e(t){return t.type?sae(t):O$(t)}function sae(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!Yoe(i);)i=i[0],e++;return{type:i,ndimArray:e}}function O$(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function Q4e(t){B4e(t)&&(F4e(t),Z4e(t))}const z8=new Set,q8=new Set;function De(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,tTe(e);const i=[],s=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!z8.has(n.initialize)&&(z8.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!q8.has(n.destroy)&&(q8.add(n.destroy),s.push(n.destroy)),n=Object.getPrototypeOf(n);z8.clear(),q8.clear();const r=class extends e{constructor(...l){if(super(...l),this.constructor===r&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let c=i.length-1;c>=0;c--)i[c].call(this)}}),s.length){let c=!1;const f=this[boe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!c){c=!0,f.call(this);for(let y=0;y<s.length;y++)s[y].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};r.__accessorMetadata__=hC(e.prototype),r.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(r,"name",{value:o,configurable:!0}),r}}function eTe(t,e){return e.get==null?function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s===void 0)return;i.mutable&&mi(s);const n=i.store;return n.has(t)?n.get(t):s.metadata.value}:function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s!==void 0)return s.getComputed(i)}}function tTe(t){const e=t.prototype,i=hC(e),s={};for(const n of Object.getOwnPropertyNames(i)){const r=i[n];Q4e(r),s[n]={enumerable:!0,configurable:!0,get:eTe(n,r),set(o){const l=this.__accessor__;if(l!==void 0){if(l.mutable)return l.initialized&&r.readOnly?eW("read-only",n):l.lifecycle===jl.CONSTRUCTED&&r.constructOnly?eW("construct-only",n):void l.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,s)}const eW=(t,e)=>{zt.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var nae,rae;function iTe(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const Ed=Symbol("Accessor-Handles"),R$=Symbol("Accessor-Initialized");let Ei=class mT{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:s,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const r=this;class o extends r{constructor(...c){super(...c),this.inherited=null,n&&n.apply(this,c)}}hC(o.prototype);for(const l in e){const c=e[l];o.prototype[l]=typeof c=="function"?function(...f){const y=this.inherited;let _;this.inherited=function(...x){if(r.prototype[l])return r.prototype[l].apply(this,x)};try{_=c.apply(this,f)}catch(x){throw this.inherited=y,x}return this.inherited=y,_}:e[l]}for(const l in i){const c=iTe(i[l]);N(c)(o.prototype,l)}return De(s)(o)}static freeze(e){return e instanceof mT?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof mT?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var s;if(this[nae]=null,this[rae]=!1,this.constructor===mT)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new LPe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((s=this.normalizeCtorArgs)==null?void 0:s.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[R$]=!0}initialize(){}[boe](){this[Ed]=so(this[Ed])}destroy(){var e;this.destroyed||(m4e(this),this.__accessor__.destroy(),(e=jPe())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[R$]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===jl.DESTROYED||!1}commitProperty(e){Ac(this,e)}get(e){return voe(zt.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Ac(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return mI(this,e,i),this}watch(e,i,s){return x4e(this,e,i,s)}addHandles(e,i){if(this.destroyed){const s=Array.isArray(e)?e:[e];for(const n of s)n.remove();return}(this[Ed]??(this[Ed]=new fM)).add(e,i)}removeHandles(e){var i;(i=this[Ed])==null||i.remove(e)}removeAllHandles(){var e;(e=this[Ed])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[Ed])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[Ed])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};nae=Ed,rae=R$;const sTe=Object.freeze(Object.defineProperty({__proto__:null,default:Ei},Symbol.toStringTag,{value:"Module"}));let nTe=class oae{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new oae;return this._values.forEach((s,n)=>{e&&e.has(n)||i.set(n,Ue(s.value),s.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const s=this._values.get(e);return i==null||(s==null?void 0:s.origin)===i?s==null?void 0:s.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Bi.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(s=>{var n;return((n=this._values.get(s))==null?void 0:n.origin)===e})}set(e,i,s){if((s=this._normalizeOrigin(s))===Bi.DEFAULTS){const n=this._values.get(e);if((n==null?void 0:n.origin)!=null&&n.origin>s)return}this._values.set(e,new rTe(i,s))}delete(e,i){var s;(i=this._normalizeOrigin(i))!=null&&((s=this._values.get(e))==null?void 0:s.origin)!==i||this._values.delete(e)}has(e,i){var s;return(i=this._normalizeOrigin(i))!=null?((s=this._values.get(e))==null?void 0:s.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},s)=>e(i,s))}_normalizeOrigin(e){if(e!=null)return e===Bi.DEFAULTS?e:Bi.USER}},rTe=class{constructor(e,i){this.value=e,this.origin=i}};function aae(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),Bi.DEFAULTS)});const s=t.metadata;Object.keys(s).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),Bi.DEFAULTS)})}function oTe(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const s=t.read.source;if(typeof s=="string"){if(s===e||s.includes(".")&&s.indexOf(e)===0&&OX(s,i))return!0}else for(const n of s)if(n===e||n.includes(".")&&n.indexOf(e)===0&&OX(n,i))return!0;return!1}function aTe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function lTe(t,e,i,s,n){let r=$$(e[i],n);aTe(r)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))r=$$(e[o],n),oTe(r,i,s)&&(t[o]=!0)}function uTe(t,e,i,s){const n=i.metadata,r=W4e(n[e],s),o=r==null?void 0:r.default;if(o===void 0)return;const l=typeof o=="function"?o.call(t,e,s):o;l!==void 0&&i.set(e,l)}const lae={origin:"service"};function uae(t,e,i=lae){if(!e||typeof e!="object")return;const s=wl(t),n=s.metadata,r={};for(const o of Object.getOwnPropertyNames(e))lTe(r,n,o,e,i);s.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(r)){const l=$$(n[o],i).read,c=l==null?void 0:l.source;let f;f=c&&typeof c=="string"?cC(e,c):e[o],l!=null&&l.reader&&(f=l.reader.call(t,f,e,i)),f!==void 0&&s.set(o,f)}if(!i||!i.ignoreDefaults){s.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))r[o]||uTe(t,o,s,i)}s.setDefaultOrigin("user")}function cTe(t,e,i,s=lae){var r;const n={...s,messages:[]};i(n),(r=n.messages)==null||r.forEach(o=>{o.type!=="warning"||t.loaded?s!=null&&s.messages&&s.messages.push(o):t.loadWarnings.push(o)})}function hTe(t,e,i,s,n){var o,l;const r={};return(l=(o=e.write)==null?void 0:o.writer)==null||l.call(t,s,r,i,n),r}function cae(t,e,i,s,n,r){if(!(s!=null&&s.write))return!1;const o=Ac(t,i);if(!n&&s.write.overridePolicy){const l=s.write.overridePolicy.call(t,o,i,r??void 0);l!==void 0&&(n=l)}if(n||(n=s.write),!n||n.enabled===!1||n.layerContainerTypes&&(r!=null&&r.layerContainerType)&&!n.layerContainerTypes.includes(r.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const l=new rt("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return l&&(r!=null&&r.messages)?r.messages.push(l):l&&!r&&zt.getLogger("esri.core.accessorSupport.write").error(l.name,l.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Bi.DEFAULTS)&&dTe(t,i,r,s,o)||!n.ignoreOrigin&&(r!=null&&r.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<U0(r.origin))}function dTe(t,e,i,s,n){const r=s.default;if(r===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(n);if(typeof r=="function"){if(Array.isArray(n)){const o=r.call(t,e,i??void 0);return df(o,n)}return!1}return r===n}function fTe(t,e,i,s){const n=wl(t),r=n.metadata,o=iae(r[e],s);return!!o&&cae(t,n,e,o,i,s)}function hae(t,e,i){var r,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return hT(e,t.toJSON(i));const s=wl(t),n=s.metadata;for(const l in n){const c=iae(n[l],i);if(!cae(t,s,l,c,void 0,i))continue;const f=Ac(t,l),y=hTe(t,c,c.write&&typeof c.write.target=="string"?c.write.target:l,f,i);Object.keys(y).length>0&&(e=hT(e,y),(o=(r=i==null?void 0:i.resources)==null?void 0:r.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>hT(e,y,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:l,oldOrigin:NPe(s.store.originOf(l)),newOrigin:i.origin}))}return e}const Iq=t=>{let e=class extends t{constructor(...i){super(...i);const s=wl(this),n=s.store,r=new nTe;s.store=r,aae(s,n,r)}read(i,s){uae(this,i,s)}write(i,s){return hae(this,i??{},s)}toJSON(i){return this.write({},i)}static fromJSON(i,s){return pTe.call(this,i,s)}};return e=I([De("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function pTe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}function CI(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}let wt=class extends Iq(Ei){};wt=I([De("esri.core.JSONSupport")],wt);const mTe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,gTe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function tW(t){const e=t==null?void 0:t.match(mTe);if(!e)return null;const[,i,s,n]=e;if(!i)return null;let r=null,o=null,l=null;const{devext:c,qaext:f,www:y}=gTe;if(s)if(r=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=c);break;case"qa":({customBaseUrl:o,portalHostname:l}=f);break;default:return null}else({customBaseUrl:o,portalHostname:l}=y);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=c);break;case"qaext":({customBaseUrl:o,portalHostname:l}=f);break;case"www":({customBaseUrl:o,portalHostname:l}=y);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:l,urlKey:r}}function dae(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function PI(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,s=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):s.test(t)&&(t=t.replace(s,"https://qaext.arcgis.com")),t}function yTe(t){const e=atob(t),i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i.buffer}function vTe(t){const e=new Uint8Array(t);let i="";for(let s=0;s<e.length;s++)i+=String.fromCharCode(e[s]);return btoa(i)}const _Te=()=>zt.getLogger("esri.core.urlUtils"),sx=Gs.request,iW="esri/config: esriConfig.request.proxyUrl is not set.",fae=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,pae=/^\s*http:/i,bTe=/^\s*https:/i,xTe=/^\s*file:/i,wTe=/:\d+$/,STe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ETe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),CTe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Hl=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(ETe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(CTe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const VP={},PTe=new Hl(Gs.applicationUrl);let Ua=PTe;const TTe=ITe();let Mq=TTe;const Aq=()=>Ua,hct=()=>Mq;function ITe(){const t=Ua.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${Ua.scheme}://${Ua.host}${Ua.port!=null?`:${Ua.port}`:""}`}${e}`}function yl(t){if(!t)return null;const e={path:null,query:null},i=new Hl(t),s=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,s),e.query=Sy(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function Sy(t){const e=t.split("&"),i={};for(const s of e){if(!s)continue;const n=s.indexOf("=");let r,o;n<0?(r=decodeURIComponent(s),o=""):(r=decodeURIComponent(s.slice(0,n)),o=decodeURIComponent(s.slice(n+1)));let l=i[r];typeof l=="string"&&(l=i[r]=[l]),Array.isArray(l)?l.push(o):i[r]=o}return i}function Zy(t,e){return t?Object.keys(t).map(i=>{const s=t[i];if(s==null)return"";const n=encodeURIComponent(i)+"=";return Array.isArray(s)?s.map(r=>CI(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)).join("&"):CI(s)?n+encodeURIComponent(JSON.stringify(s)):n+encodeURIComponent(s)}).filter(i=>i).join("&"):""}function mae(t=!1){let e,i=sx.proxyUrl;if(typeof t=="string"){e=$Te(t);const s=yC(t);s&&(i=s.proxyUrl)}else e=!!t;if(!i)throw _Te().warn(iW),new rt("urlUtils:proxy-not-set",iW);return e&&F$()&&(i=Oq(i)),yl(i)}function dct(t,e=!1){const i=yC(t);let s,n;if(i){const r=Dq(i.proxyUrl);s=r.path,n=r.query?Sy(r.query):null}else if(e){const r=mae(t);s=r.path,n=r.query}if(s){const r=yl(t);t=s+"?"+r.path;const o=Zy({...n,...r.query});o&&(t=`${t}?${o}`)}return t}const Dw={path:"",query:""};function Dq(t){const e=t.indexOf("?");return e!==-1?(Dw.path=t.slice(0,e),Dw.query=t.slice(e+1)):(Dw.path=t,Dw.query=null),Dw}function gae(t){return t=(t=II(t=qTe(t=Dq(t).path),!0)).toLowerCase()}function MTe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:gae(t.urlPrefix)},i=sx.proxyRules,s=e.urlPrefix;let n=i.length;for(let r=0;r<i.length;r++){const o=i[r].urlPrefix;if(s.indexOf(o)===0){if(s.length===o.length)return-1;n=r;break}o.indexOf(s)===0&&(n=r+1)}return i.splice(n,0,e),n}function yC(t){const e=sx.proxyRules,i=gae(t);for(let s=0;s<e.length;s++)if(i.indexOf(e[s].urlPrefix)===0)return e[s]}function ATe(t,e){if(!t||!e)return!1;t=TI(t),e=TI(e);const i=tW(t),s=tW(e);return i!=null&&s!=null?i.portalHostname===s.portalHostname:i==null&&s==null&&ql(t,e,!0)}function yae(t,e){return t=TI(t),e=TI(e),II(t)===II(e)}function TI(t){const e=(t=Fc(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function L$(t,e=sx.interceptors){const i=s=>s==null||s instanceof RegExp&&s.test(t)||typeof s=="string"&&t.startsWith(s);if(e){for(const s of e)if(Array.isArray(s.urls)){if(s.urls.some(i))return s}else if(i(s.urls))return s}return null}function ql(t,e,i=!1){if(!t||!e)return!1;const s=q$(t),n=q$(e);return!(!i&&s.scheme!==n.scheme)&&s.host!=null&&n.host!=null&&s.host.toLowerCase()===n.host.toLowerCase()&&s.port===n.port}function kq(t){if(typeof t=="string"){if(!Mu(t))return!0;t=q$(t)}if(ql(t,Ua))return!0;const e=sx.trustedServers||[];for(let i=0;i<e.length;i++){const s=DTe(e[i]);for(let n=0;n<s.length;n++)if(ql(t,s[n]))return!0}return!1}function DTe(t){return VP[t]||($q(t)||Og(t)?VP[t]=[new Hl(pl(t))]:VP[t]=[new Hl(`http://${t}`),new Hl(`https://${t}`)]),VP[t]}function pl(t,e=Mq,i){return Og(t)?i!=null&&i.preserveProtocolRelative?t:Ua.scheme==="http"&&Ua.authority===zc(t).slice(2)?`http:${t}`:`https:${t}`:$q(t)?t:v2(t[0]==="/"?FTe(e):e,t)}function Nq(t,e=Mq,i){if(t==null||!Mu(t))return t;const s=Fc(t),n=s.toLowerCase(),r=Fc(e).toLowerCase().replace(/\/+$/,""),o=i?Fc(i).toLowerCase().replace(/\/+$/,""):null;if(o&&r.indexOf(o)!==0)return t;const l=(_,x,S)=>(S=_.indexOf(x,S))===-1?_.length:S;let c=l(n,"/",n.indexOf("//")+2),f=-1;for(;n.slice(0,c+1)===r.slice(0,c)+"/"&&(f=c+1,c!==n.length);)c=l(n,"/",c+1);if(f===-1||o&&f<o.length)return t;t=s.slice(f);const y=r.slice(f-1).replaceAll(/[^/]+/g,"").length;if(y>0)for(let _=0;_<y;_++)t=`../${t}`;else t=`./${t}`;return t}function Fc(t){return t=jTe(t=GTe(t=VTe(t=pl(t=t.trim()))))}function v2(...t){const e=t.filter(gl);if(!(e!=null&&e.length))return;const i=[];if(Mu(e[0])){const n=e[0],r=n.indexOf("//");r!==-1&&(i.push(n.slice(0,r+1)),RTe(e[0])&&(i[0]+="/"),e[0]=n.slice(r+2))}else e[0][0]==="/"&&i.push("");const s=e.reduce((n,r)=>r?n.concat(r.split("/")):n,[]);for(let n=0;n<s.length;n++){const r=s[n];r===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!r&&n===s.length-1||r&&(r!=="."||i.length===0))&&i.push(r)}return i.join("/")}function zc(t,e=!1){if(t==null||bM(t)||Tv(t))return null;let i=t.indexOf("://");if(i===-1&&Og(t))i=2;else{if(i===-1)return null;i+=3}const s=t.indexOf("/",i);return s!==-1&&(t=t.slice(0,s)),e&&(t=II(t,!0)),t}function Mu(t){return Og(t)||$q(t)}function bM(t){return t!=null&&t.slice(0,5)==="blob:"}function Tv(t){return t!=null&&t.slice(0,5)==="data:"}function kTe(t){const e=rE(t);return e!=null&&e.isBase64?yTe(e.data):null}function V8(t){return vTe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const NTe=/^data:(.*?)(;base64)?,(.*)$/;function rE(t){const e=t.match(NTe);if(!e)return null;const[,i,s,n]=e;return{mediaType:i,isBase64:!!s,data:n}}function vae(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function fct(t){return(await fetch(t)).blob()}function pct(t){const e=kTe(t);if(!e)return null;const i=rE(t);return new Blob([e],{type:i.mediaType})}function Og(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function $q(t){return t!=null&&fae.test(t)}function $Te(t){return t!=null&&bTe.test(t)||Ua.scheme==="https"&&Og(t)}function OTe(t){return t!=null&&pae.test(t)||Ua.scheme==="http"&&Og(t)}function RTe(t){return t!=null&&xTe.test(t)}function Oq(t){return Og(t)?`https:${t}`:t.replace(pae,"https:")}function LTe(){return Ua.scheme==="http"}function F$(){return Ua.scheme==="https"}function II(t,e=!1){return Og(t)?t.slice(2):(t=t.replace(fae,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function FTe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function zTe(t){let e=0;if(Mu(t)){const s=t.indexOf("//");s!==-1&&(e=s+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function mct(t,e){if(!t)return"";const i=yl(t).path.replace(/\/+$/,""),s=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return s;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return s.replace(n,"")}function qTe(t){return t.endsWith("/")?t:`${t}/`}function _ae(t){return t.replace(/\/+$/,"")}function VTe(t){if(/^https?:\/\//i.test(t)){const e=Dq(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function GTe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function jTe(t){const e=sx.httpsDomains;if(!OTe(t))return t;const i=t.indexOf("/",7);let s;if(s=i===-1?t:t.slice(0,i),s=s.toLowerCase().slice(7),wTe.test(s)){if(!s.endsWith(":80"))return t;s=s.slice(0,-3),t=t.replace(":80","")}return LTe()&&s===Ua.authority&&!STe.test(t)||(F$()&&s===Ua.authority||e&&e.some(n=>s===n||s.endsWith(`.${n}`))||F$()&&!yC(t))&&(t=Oq(t)),t}function z$(t,e,i){if(!(e&&i&&t&&Mu(t)))return t;const s=t.indexOf("//"),n=t.indexOf("/",s+2),r=t.indexOf(":",s+2),o=Math.min(n<0?t.length:n,r<0?t.length:r);return t.slice(s+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,s+2)}${i}${t.slice(o)}`}function q$(t){return typeof t=="string"?new Hl(pl(t)):(t.scheme||(t.scheme=Ua.scheme),t)}function gct(t){return HTe.test(t)}function bae(t,e){const i=yl(t),s=Object.keys(i.query||{});return s.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function BTe(t,e,i){const s=yl(t),n=s.query||{};return n[e]=String(i),`${s.path}?${Zy(n)}`}function gT(t,e){if(!e)return t;const i=yl(t),s=i.query||{};for(const[r,o]of Object.entries(e))o!=null&&(s[r]=o);const n=Zy(s);return n?`${i.path}?${n}`:i.path}function yct(t){if(t==null)return null;const e=t.match(xae);return e?e[2]:null}function sW(t){if(t==null)return null;const e=t.match(xae);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function vct(t){return typeof t=="string"?rE(t)??{data:t}:new Promise((e,i)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(rE(s.result)),s.onerror=n=>i(n)})}const xae=/([^.]*)\.([^/]*)$/,HTe=/(^data:image\/svg|\.svg$)/i,wae="20241122",Sae="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const UTe="4.31";let Li,Rq=UTe;Rq="4.31.6";function YTe(t){Li=t}function _ct(t){const e=Li==null?void 0:Li.findCredential(t);return e!=null&&e.token?BTe(t,"token",e.token):t}ht("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ht("host-webworker");const XTe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function WTe(t){const e=zc(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!XTe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function Eae(t,e){return!(!Gs.apiKey||!WTe(t))}function ZTe(t,e,i=!1,s){return new Promise((n,r)=>{if($u(s))return void r(nW());let o=()=>{f(),r(new Error(`Unable to load ${e}`))},l=()=>{const y=t;f(),n(y)},c=()=>{if(!t)return;const y=t;f(),y.src="",r(nW())};const f=()=>{ht("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",l)),o=null,l=null,t=null,s!=null&&s.removeEventListener("abort",c),c=null,i&&URL.revokeObjectURL(e)};s!=null&&s.addEventListener("abort",c),ht("esri-image-decode")?t.decode().then(l,o):(t.addEventListener("error",o),t.addEventListener("load",l))})}function nW(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Cae="Timeout exceeded";function KTe(){return new Error(Cae)}function bct(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===Cae}function JTe(t){Gs.request.crossOriginNoCorsDomains||(Gs.request.crossOriginNoCorsDomains={});const e=Gs.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[zc(i)??""]=0:(e[zc("http://"+i)??""]=0,e[zc("https://"+i)??""]=0)}function QTe(t){const e=Gs.request.crossOriginNoCorsDomains;if(e){let i=zc(t);if(i)return i=i.toLowerCase(),!ql(i,Aq())&&e[i]<Date.now()-36e5}return!1}async function e9e(t){var n;const e=yl(t);t=e.path,((n=e.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=Gs.request.crossOriginNoCorsDomains,s=zc(t);i&&s&&(i[s.toLowerCase()]=Date.now())}async function Qs(t,e){var x;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=Sy(e.query.toString().replaceAll("+"," ")));const i=Tv(t),s=bM(t);s||i||(t=Fc(t));const n={url:t,requestOptions:{...e}},r=S=>({data:S,getAllHeaders:_2,getHeader:_2,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=L$(t,Cc.internalInterceptors);if(o){const S=await oW(o,n);if(S!=null)return r(S)}let l=L$(t);if(l){const S=await oW(l,n);if(S!=null)return r(S);l.after||l.error||(l=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(ht("host-webworker")||ht("host-node")))throw lf("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw lf("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||s)throw lf("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await r9e(),MI)return MI.execute(t,e);const c=new AbortController,f=Bl(e,()=>c.abort()),y={controller:c,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:n,redoRequest:!1,useIdentity:Cc.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=await u9e(y).finally(()=>f==null?void 0:f.remove());return(x=l==null?void 0:l.after)==null||x.call(l,_),_}let MI;const Cc=Gs.request,Pae="FormData"in globalThis,t9e=new Set([499,498,403,401]),i9e=new Set(["COM_0056","COM_0057","SB_0008"]),s9e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_2=()=>null,AI=Symbol();function n9e(t){const e=zc(t);e&&!Qs._corsServers.includes(e)&&Qs._corsServers.push(e)}function rW(t){const e=zc(t);return!e||e.endsWith(".arcgis.com")||Qs._corsServers.includes(e)||kq(e)}function lf(t,e,i,s){let n="Error";const r={url:i.url,requestOptions:i.requestOptions,getAllHeaders:_2,getHeader:_2,ssl:!1};if(e instanceof rt)return e.details?(e.details=Ue(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=r,e;if(e){const o=s&&(()=>Array.from(s.headers)),l=s&&(y=>s.headers.get(y)),c=s==null?void 0:s.status,f=e.message;f&&(n=f),o&&l&&(r.getAllHeaders=o,r.getHeader=l),r.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||c||0,r.subCode=e.subcode,r.messageCode=e.messageCode,typeof e.details=="string"?r.messages=[e.details]:r.messages=e.details,r.raw=AI in e?e[AI]:e}return ad(e)?or():new rt(t,n,r)}async function r9e(){ht("host-webworker")&&!MI&&(MI=await nt(()=>import("./request-CeGGo6Ud.js"),[],import.meta.url))}async function V$(){Li||await nt(()=>Promise.resolve().then(()=>G7e),void 0,import.meta.url)}async function o9e(t){var l;const e=t.params.url,i=t.params.requestOptions,s=t.controller.signal,n=i.body;let r=null,o=null;if(Pae&&"HTMLFormElement"in globalThis&&(n instanceof FormData?r=n:n instanceof HTMLFormElement&&(r=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Cc.priority,redirect:"follow",signal:s},(r||o)&&(t.fetchOptions.body=r||o),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(l=i.query)!=null&&l.token||r!=null&&r.get("token")),!t.hasToken&&Eae(e)&&(i.query||(i.query={}),i.query.token=Gs.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!Tae(e)&&!$u(s)){let c;i.authMode==="immediate"?(await V$(),c=await Li.getCredential(e,{signal:s}),t.credential=c):i.authMode==="no-prompt"?(await V$(),c=await Li.getCredential(e,{prompt:!1,signal:s}).catch(()=>{}),t.credential=c):Li&&(c=Li.findCredential(e)),c&&(t.credentialToken=c.token,t.useSSL=!!c.ssl)}}function Tae(t){return s9e.some(e=>e.test(t))}async function a9e(t){let e=t.params.url;const i=t.params.requestOptions,s=t.fetchOptions??{},n=bM(e)||Tv(e),r=i.responseType||"json",o=n?0:i.timeout!=null?i.timeout:Cc.timeout;let l=!1;if(!n){t.useSSL&&(e=Oq(e));let x={...i.query};t.credentialToken&&(x.token=t.credentialToken);let S=Zy(x);ht("esri-url-encodes-apostrophe")&&(S=S.replaceAll("'","%27"));const P=e.length+1+S.length;let A;l=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||P>Cc.maxUrlLength;const k=i.useProxy||!!yC(e);if(k){const $=mae(e);A=$.path,!l&&A.length+1+P>Cc.maxUrlLength&&(l=!0),$.query&&(x={...$.query,...x})}if(s.method==="HEAD"&&(l||k)){if(l)throw P>Cc.maxUrlLength?lf("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):lf("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(k)throw lf("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(l?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=gT(e,x):(s.body=Zy(x),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):e=gT(e,x),k&&(t.useProxy=!0,e=`${A}?${e}`),x.token&&Pae&&s.body instanceof FormData&&!dae(e)&&s.body.set("token",x.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!ql(e,Aq())){if(kq(e))t.withCredentials=!0;else if(Li){const $=Li.findServerInfo(e);$!=null&&$.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(s.credentials="include",QTe(e)&&await e9e(l?gT(e,x):e))}let c,f,y=0,_=!1;o>0&&(y=setTimeout(()=>{_=!0,t.controller.abort()},o));try{if(i.responseType==="native-request-init")f=s,f.url=e,i.signal?f.signal=i.signal:delete f.signal;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||l||l9e(i.headers)||!n&&!t.useProxy&&Cc.proxyUrl&&!rW(e)){if(Qs._beforeFetch&&await Qs._beforeFetch(e,s),c=await fetch(e,s),Qs._afterFetch&&await Qs._afterFetch(c),t.useProxy||n9e(e),i.responseType==="native")f=c;else if(s.method!=="HEAD")if(c.ok){switch(r){case"array-buffer":f=await c.arrayBuffer();break;case"blob":case"image":f=await c.blob();break;default:f=await c.text()}if(y&&(clearTimeout(y),y=0),r==="json"||r==="xml"||r==="document")if(f)switch(r){case"json":f=JSON.parse(f);break;case"xml":f=aW(f,"application/xml");break;case"document":f=aW(f,"text/html")}else f=null;if(f){if(r==="array-buffer"||r==="blob"){const x=c.headers.get("Content-Type");if(x&&/application\/json|text\/plain/i.test(x)&&f[r==="blob"?"size":"byteLength"]<=750)try{const S=await new Response(f).json();S.error&&(f=S)}catch{}}r==="image"&&f instanceof Blob&&(f=await lW(URL.createObjectURL(f),t,!0))}}else{f=await c.text();try{f=JSON.parse(f)}catch{}}}else f=await lW(e,t)}catch(x){if(x.name==="AbortError")throw _?KTe():or("Request canceled");if(!(!c&&x instanceof TypeError&&Cc.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||rW(e))throw x;t.redoRequest=!0,MTe({proxyUrl:Cc.proxyUrl,urlPrefix:zc(e)??""})}finally{y&&clearTimeout(y)}return[c,f]}async function oW(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,s;try{s=await t.before(e)}catch(n){i=lf("request:interceptor",n,e)}if((s instanceof Error||s instanceof rt)&&(i=lf("request:interceptor",s,e)),i)throw t.error&&t.error(i),i;return s}}function l9e(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function aW(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function u9e(t){var r,o;let e,i;await o9e(t);try{do[e,i]=await a9e(t);while(!await c9e(t,e,i))}catch(l){const c=lf("request:server",l,t.params,e);throw c.details.ssl=t.useSSL,(r=t.interceptor)!=null&&r.error&&t.interceptor.error(c),c}const s=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!kq(s)){const l=zc(s,!0);l&&Cc.trustedServers.push(l)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&JTe(i.authorizedCrossOriginNoCorsDomains)}const n=t.credential;if(n&&Li){const l=Li.findServerInfo(n.server);let c=l==null?void 0:l.owningSystemUrl;if(c){c=c.replace(/\/?$/,"/sharing");const f=Li.findCredential(c,n.userId);f&&Li._getIdenticalSvcIdx(c,f)===-1&&f.resources.unshift(c)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):_2,getHeader:e?l=>e.headers.get(l):_2,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function c9e(t,e,i){var f;if(t.redoRequest)return t.redoRequest=!1,!1;const s=t.params.requestOptions;if(!e||s.responseType==="native"||s.responseType==="native-request-init")return!0;let n,r;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[AI]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[AI]=i,n;let o,l=null;n&&(r=Number(n.code),l=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const c=s.authMode;if(r===403&&(l===4||(f=n.message)!=null&&f.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(c!=="no-prompt"||r===498)&&r!==void 0&&t9e.has(r)&&!Tae(t.params.url)&&(r!==403||(!o||!i9e.has(o))&&(l==null||l===2&&t.credentialToken))){await V$();try{const y=await Li.getCredential(t.params.url,{error:lf("request:server",n,t.params),prompt:c!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=y,t.credentialToken=y.token,t.useSSL=t.useSSL||y.ssl,!1}catch(y){if(c==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=y}}if(n)throw n;return!0}function lW(t,e,i=!1){const s=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Cc.priority,n.src=t,ZTe(n,t,i,s)}Qs._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Qs._beforeFetch=void 0,Qs._afterFetch=void 0;var A0;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(A0||(A0={}));let h9e=class{constructor(){this._resolver=Cu(),this._status=A0.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=A0.RESOLVED,this._cleanUp()},()=>{this._status=A0.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===A0.RESOLVED}isRejected(){return this._status===A0.REJECTED}isFulfilled(){return this._status!==A0.PENDING}abort(){this._resolver.reject(or())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Cu(),i=[...this._resolvingPromises,e.promise],s=this._allPromise=Promise.all(i);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==s||ad(n)||this._resolver.reject(n)}),e.resolve()}};const Lq=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new h9e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,s){return this._promiseProps.promise.then(()=>this).then(i,s)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=I([De("esri.core.Promise")],e),e};let G$=class extends Lq(Ei){};G$=I([De("esri.core.Promise")],G$);const d9e="not-loaded",f9e="loading",p9e="failed",uW="loaded",Iae=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const n=this.load.bind(this);this.load=r=>{const o=new Promise((l,c)=>{const f=Ooe(r,c);this.destroyed&&c(new rt("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{f&&f.remove()})});if(this.loadStatus===d9e){this._set("loadStatus",f9e);const l=this._loadController=new AbortController;n({signal:l.signal})}return s(),o}})),this.when(()=>{this._set("loadStatus",uW),this._loadController=null},s=>{this._set("loadStatus",p9e),this._set("loadError",s),this._loadController=null})}destroy(){this._loadController&&(this._loadController=og(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===uW}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new rt("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return I([N({readOnly:!0})],e.prototype,"loaded",null),I([N({readOnly:!0})],e.prototype,"loadError",void 0),I([N({clonable:!1})],e.prototype,"loadStatus",void 0),I([N({type:[Jh],readOnly:!0})],e.prototype,"loadWarnings",null),e=I([De("esri.core.Loadable")],e),e};let l3=class extends Iae(G$){};l3=I([De("esri.core.Loadable")],l3),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=Iae,t.isLoadable=e}(l3||(l3={}));const vC=l3;function At(t,e,i){let s,n;return e===void 0||Array.isArray(e)?(n=t,i=e,s=[void 0]):(n=e,s=Array.isArray(t)?t:[t]),(r,o)=>{const l=r.constructor.prototype;s.forEach(c=>{const f=Woe(r,c,n);f.read&&typeof f.read=="object"||(f.read={}),f.read.reader=l[o],i&&(f.read.source=(f.read.source||[]).concat(i))})}}let ps=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=m9e(e),this.apiValues=cW(this._apiToJSON),this.jsonValues=cW(this._jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,n,r)=>{const o=this.toJSON(s);o!==void 0&&Ka(r,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function m9e(t){const e={};for(const i in t)e[t[i]]=i;return e}function cW(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function wa(){return function(t,e){return new ps(t,{ignoreUnknown:!0,...e})}}let Fq=class{constructor(e,i,s,n,r,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=s,this.atmosphereHeight=n,this.scaleHeight=r;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const ur=new Fq(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),uf=new Fq(3396190,1/169.8944472236118,23e4,6e4,.111),mg=new Fq(1737400,0,0,0,0);function _C(t){if(!Gs.assetsPath)throw zt.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new rt("assets:path-not-set","config.assetsPath is not set");return v2(Gs.assetsPath,t)}let G8,He=null;function zq(){return!!He}function g9e(){return!!ht("esri-wasm")}function qq(){return G8||(G8=nt(()=>import("./pe-wasm-B-Un5sOz.js"),[],import.meta.url).then(t=>t.p).then(({default:t})=>t({locateFile:e=>_C(`esri/geometry/support/${e}`)})).then(t=>{Dae(t)}),G8)}var j$,zn;(function(t){function e(r,o,l){He.ensureCache.prepare();const c=my(l),f=l===c,y=He.ensureFloat64(c),_=He._pe_geog_to_proj(He.getPointer(r),o,y);return _&&z0(l,o,y,f),_}function i(r,o,l,c){switch(c){case zn.PE_TRANSFORM_P_TO_G:return s(r,o,l);case zn.PE_TRANSFORM_G_TO_P:return e(r,o,l)}return 0}function s(r,o,l){return n(r,o,l,0)}function n(r,o,l,c){He.ensureCache.prepare();const f=my(l),y=l===f,_=He.ensureFloat64(f),x=He._pe_proj_to_geog_center(He.getPointer(r),o,_,c);return x&&z0(l,o,_,y),x}t.geogToProj=e,t.projGeog=i,t.projToGeog=s,t.projToGeogCenter=n})(j$||(j$={})),function(t){function e(){t.PE_BUFFER_MAX=He.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=He.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=He.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=He.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=He.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=He.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=He.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=He.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=He.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=He.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=He.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=He.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=He.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=He.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=He.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=He.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=He.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=He.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=He.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=He.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=He.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=He.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=He.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=He.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=He.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=He.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=He.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=He.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=He.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=He.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=He.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=He.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(zn||(zn={}));let Mae=null;var oE;(function(t){const e={},i={},s=S=>{const P=S.getType();switch(P){case zn.PE_TYPE_GEOGCS:S=He.castObject(S,He.PeGeogcs);break;case zn.PE_TYPE_PROJCS:S=He.castObject(S,He.PeProjcs);break;case zn.PE_TYPE_GEOGTRAN:S=He.castObject(S,He.PeGeogtran);break;default:P&zn.PE_TYPE_UNIT&&(S=He.castObject(S,He.PeUnit))}return S};function n(){He.PeFactory.prototype.initialize(null)}function r(S){return o(zn.PE_TYPE_COORDSYS,S)}function o(S,P){let A=null,k=e[S];if(k||(k={},e[S]=k),k.hasOwnProperty(String(P))&&(A=k[P],He.compare(A,He.NULL)&&(A=null)),!A){const $=He.PeFactory.prototype.factoryByType(S,P);He.compare($,He.NULL)||(A=s($),k[P]=A)}return A}function l(S,P){let A=null,k=i[S];if(k||(k={},i[S]=k),k.hasOwnProperty(P)&&(A=k[P],He.compare(A,He.NULL)&&(A=null)),!A){const $=He.PeFactory.prototype.fromString(S,P);He.compare($,He.NULL)||(A=s($),k[P]=A)}return A}function c(S){return o(zn.PE_TYPE_GEOGCS,S)}function f(S){return o(zn.PE_TYPE_GEOGTRAN,S)}function y(S){return He.PeFactory.prototype.getCode(S)}function _(S){return o(zn.PE_TYPE_PROJCS,S)}function x(S){return o(zn.PE_TYPE_UNIT,S)}t.initialize=n,t.coordsys=r,t.factoryByType=o,t.fromString=l,t.geogcs=c,t.geogtran=f,t.getCode=y,t.projcs=_,t.unit=x})(oE||(oE={}));let Aae=null;var DI,B$,H$,U$,Y$,X$,kI,W$,NI,$I,Z$;function Dae(t){function e(r,o,l){r[o]=l(r[o])}He=t,zn.init(),DI.init(),kI.init(),NI.init(),$I.init(),Mae=class extends He.PeDouble{constructor(r=NaN){super(r)}destroy(){He.destroy(this)}[Symbol.dispose](){this.destroy()}},Aae=class extends He.PeGCSExtent{destroy(){He.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[He.PeAngunit,He.PeDatum,He.PeGeogcs,He.PeGeogtran,He.PeObject,He.PeParameter,He.PePrimem,He.PeProjcs,He.PeSpheroid,He.PeUnit];for(const r of i)e(r.prototype,"getName",o=>function(){return o.call(this,new Array(zn.PE_NAME_MAX))});for(const r of[He.PeGeogtran,He.PeProjcs])e(r.prototype,"getParameters",o=>function(){const l=new Array(zn.PE_PARM_MAX);let c=o.call(this);for(let f=0;f<l.length;f++){const y=He.getValue(c,"*");l[f]=y?He.wrapPointer(y,He.PeParameter):null,c+=Int32Array.BYTES_PER_ELEMENT}return l});e(He.PeHorizon.prototype,"getCoord",r=>function(o=!1){const l=this.getSize();if(!l)return null;const c=[];return z0(c,l,r.call(this),o),c}),e(He.PeGTlistExtendedEntry.prototype,"getEntries",r=>{const o=He._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;const c=r.call(this);if(!He.compare(c,He.NULL)){l=[c];const f=this.getSteps();if(f>1){const y=He.getPointer(c);for(let _=1;_<f;_++)l.push(He.wrapPointer(y+o*_,He.PeGTlistExtendedGTs))}}return l}});const s=He._pe_getPeHorizonSize(),n=r=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(r))return o.get(r);let l=null;const c=r.call(this);if(!He.compare(c,He.NULL)){l=[c];const f=c.getNump();if(f>1){const y=He.getPointer(c);for(let _=1;_<f;_++)l.push(He.wrapPointer(y+s*_,He.PeHorizon))}}return o.set(r,l),l};e(He.PeProjcs.prototype,"horizonGcsGenerate",n),e(He.PeProjcs.prototype,"horizonPcsGenerate",n),He.PeObject.prototype.toString=function(r=zn.PE_STR_OPTS_NONE){He.ensureCache.prepare();const o=He.getPointer(this),l=He.ensureInt8(new Array(zn.PE_BUFFER_MAX));return He.UTF8ToString(He._pe_object_to_string_ext(o,r,l))},He.PeGeogcs.prototype.destroy=function(){this.Delete(),Th(this),this.ptr=0},He.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},He.PeProjcs.prototype.destroy=function(){this.Delete(),Th(this),this.ptr=0},He.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Th(t){if(!t)return;const e=He.getClass(t);if(!e)return;const i=He.getCache(e);if(!i)return;const s=He.getPointer(t);s&&delete i[s]}function GP(t,e){const i=[],s=new Array(e);for(let n=0;n<t;n++)i.push(He.ensureInt8(s));return i}function my(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function z0(t,e,i,s=!1){if(s)for(let n=0;n<2*e;n++)t[n]=He.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let r=0;r<e;r++)n&&(t[r]=new Array(2)),t[r][0]=He.getValue(i,"double"),t[r][1]=He.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=He.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=He._pe_getPeGTlistExtendedEntrySize()}function s(n,r,o,l,c,f){let y=null;const _=new He.PeInteger(f);try{const x=He.PeGTlistExtended.prototype.getGTlist(n,r,o,l,c,_);if((f=_.val)&&(y=[x],f>1)){const S=He.getPointer(x);for(let P=1;P<f;P++)y.push(He.wrapPointer(S+e*P,He.PeGTlistExtendedEntry))}}finally{He.destroy(_)}return y}t.init=i,t.getGTlist=s})(DI||(DI={})),function(t){function e(i){if(i!=null&&i.length){for(const s of i)Th(s),s.getEntries().forEach(n=>{Th(n);const r=n.getGeogtran();Th(r),r.getParameters().forEach(Th),[r.getGeogcs1(),r.getGeogcs2()].forEach(o=>{Th(o);const l=o.getDatum();Th(l),Th(l.getSpheroid()),Th(o.getPrimem()),Th(o.getUnit())})});He.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(B$||(B$={})),function(t){function e(i,s,n,r,o){He.ensureCache.prepare();const l=my(n),c=n===l,f=He.ensureFloat64(l);let y=0;r&&(y=He.ensureFloat64(r));const _=He._pe_geog_to_geog(He.getPointer(i),s,f,y,o);return _&&z0(n,s,f,c),_}t.geogToGeog=e}(H$||(H$={})),function(t){function e(r,o,l,c,f,y,_,x){He.PeLineType.prototype.geodesic_coordinate(r,o,l,c,f,y,_,x)}function i(r,o,l,c,f,y,_,x,S){He.PeLineType.prototype.geodetic_coordinate(r,o,l,c,f,y,_,x,S)}function s(r,o,l,c,f,y,_,x,S,P){He.PeLineType.prototype.geodetic_distance(r,o,l,c,f,y,_,x,S,P)}function n(r,o,l,c,f,y,_,x,S){He.PeLineType.prototype.great_elliptic_distance(r,o,l,c,f,y,_,x,S)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=s,t.greatEllipticDistance=n}(U$||(U$={})),function(t){function e(o,l){return He.PeMath.prototype.phi_to_eta(o,l)}function i(o,l){return He.PeMath.prototype.eta_to_phi(o,l)}function s(o,l){return He.PeMath.prototype.phi_to_phig(o,l)}function n(o,l,c){return He.PeMath.prototype.q(o,l,c)}function r(o,l){return He.PeMath.prototype.q90(o,l)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=s,t.q=n,t.q90=r}(Y$||(Y$={})),function(t){const e=(f,y,_,x,S,P)=>{let A,k;switch(He.ensureCache.prepare(),f){case"dd":A=He._pe_geog_to_dd,k=zn.PE_DD_MAX;break;case"ddm":A=He._pe_geog_to_ddm,k=zn.PE_DDM_MAX;break;case"dms":A=He._pe_geog_to_dms,k=zn.PE_DMS_MAX}let $=0;y&&($=He.getPointer(y));const F=my(x),G=He.ensureFloat64(F),V=GP(_,k),B=A($,_,G,S,He.ensureInt32(V));if(B)for(let W=0;W<_;W++)P[W]=He.UTF8ToString(V[W]);return B},i=(f,y,_,x,S)=>{let P;switch(He.ensureCache.prepare(),f){case"dd":P=He._pe_dd_to_geog;break;case"ddm":P=He._pe_ddm_to_geog;break;case"dms":P=He._pe_dms_to_geog}let A=0;y&&(A=He.getPointer(y));const k=x.map(V=>He.ensureString(V)),$=He.ensureInt32(k),F=He.ensureFloat64(new Array(2*_)),G=P(A,_,$,F);return G&&z0(S,_,F),G};function s(f,y,_,x,S){return e("dms",f,y,_,x,S)}function n(f,y,_,x){return i("dms",f,y,_,x)}function r(f,y,_,x,S){return e("ddm",f,y,_,x,S)}function o(f,y,_,x){return i("ddm",f,y,_,x)}function l(f,y,_,x,S){return e("dd",f,y,_,x,S)}function c(f,y,_,x){return i("dd",f,y,_,x)}t.geogToDms=s,t.dmsToGeog=n,t.geogToDdm=r,t.ddmToGeog=o,t.geogToDd=l,t.ddToGeog=c}(X$||(X$={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=He.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=He.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=He.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=He.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=He.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,r,o,l,c,f,y){He.ensureCache.prepare();let _=0;n&&(_=He.getPointer(n));const x=my(o),S=He.ensureFloat64(x),P=GP(r,zn.PE_MGRS_MAX),A=He.ensureInt32(P),k=He._pe_geog_to_mgrs_extended(_,r,S,l,c,f,A);if(k)for(let $=0;$<r;$++)y[$]=He.UTF8ToString(P[$]);return k}function s(n,r,o,l,c){He.ensureCache.prepare();let f=0;n&&(f=He.getPointer(n));const y=o.map(P=>He.ensureString(P)),_=He.ensureInt32(y),x=He.ensureFloat64(new Array(2*r)),S=He._pe_mgrs_to_geog_extended(f,r,_,l,x);return S&&z0(c,r,x),S}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=s}(kI||(kI={})),function(t){function e(s,n,r,o,l,c,f){He.ensureCache.prepare();let y=0;s&&(y=He.getPointer(s));const _=my(r),x=He.ensureFloat64(_),S=GP(n,zn.PE_MGRS_MAX),P=He.ensureInt32(S),A=He._pe_geog_to_usng(y,n,x,o,l,c,P);if(A)for(let k=0;k<n;k++)f[k]=He.UTF8ToString(S[k]);return A}function i(s,n,r,o){He.ensureCache.prepare();let l=0;s&&(l=He.getPointer(s));const c=r.map(x=>He.ensureString(x)),f=He.ensureInt32(c),y=He.ensureFloat64(new Array(2*n)),_=He._pe_usng_to_geog(l,n,f,y);return _&&z0(o,n,y),_}t.geogToUsng=e,t.usngToGeog=i}(W$||(W$={})),function(t){function e(){t.PE_UTM_OPTS_NONE=He.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=He.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=He.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,r,o,l,c){He.ensureCache.prepare();let f=0;n&&(f=He.getPointer(n));const y=my(o),_=He.ensureFloat64(y),x=GP(r,zn.PE_UTM_MAX),S=He.ensureInt32(x),P=He._pe_geog_to_utm(f,r,_,l,S);if(P)for(let A=0;A<r;A++)c[A]=He.UTF8ToString(x[A]);return P}function s(n,r,o,l,c){He.ensureCache.prepare();let f=0;n&&(f=He.getPointer(n));const y=o.map(P=>He.ensureString(P)),_=He.ensureInt32(y),x=He.ensureFloat64(new Array(2*r)),S=He._pe_utm_to_geog(f,r,_,l,x);return S&&z0(c,r,x),S}t.init=e,t.geogToUtm=i,t.utmToGeog=s}(NI||(NI={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=He.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=He.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=He.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=He.PePCSInfo.prototype.PE_POLE_POINT}function s(n,r=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,l=null;return e.has(n)&&(l=e.get(n),l[r]&&(o=l[r])),o||(o=He.PePCSInfo.prototype.generate(n,r),l||(l=[],e.set(n,l)),l[r]=o),o}t.init=i,t.generate=s}($I||($I={})),function(t){function e(){return He.PeVersion.prototype.version_string()}t.versionString=e}(Z$||(Z$={}));const y9e=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return j$},get PeDefs(){return zn},get PeDouble(){return Mae},get PeFactory(){return oE},get PeGCSExtent(){return Aae},get PeGTTransformations(){return H$},get PeGTlistExtended(){return DI},get PeGTlistExtendedEntry(){return B$},get PeLineType(){return U$},get PeMath(){return Y$},get PeNotationDms(){return X$},get PeNotationMgrs(){return kI},get PeNotationUsng(){return W$},get PeNotationUtm(){return NI},get PePCSInfo(){return $I},get PeVersion(){return Z$},_init:Dae,get _pe(){return He},isLoaded:zq,isSupported:g9e,load:qq},Symbol.toStringTag,{value:"Module"}));var Ky;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(Ky||(Ky={}));let R;const Ee={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(R=2e3;R<=2045;R++)Ee[R]=0;for(R=2056;R<=2065;R++)Ee[R]=0;for(R=2067;R<=2135;R++)Ee[R]=0;for(R=2137;R<=2154;R++)Ee[R]=0;for(R=2161;R<=2170;R++)Ee[R]=0;for(R=2172;R<=2193;R++)Ee[R]=0;for(R=2195;R<=2198;R++)Ee[R]=0;for(R=2200;R<=2203;R++)Ee[R]=0;for(R=2205;R<=2217;R++)Ee[R]=0;for(R=2222;R<=2224;R++)Ee[R]=1;for(R=2225;R<=2250;R++)Ee[R]=2;for(R=2251;R<=2253;R++)Ee[R]=1;for(R=2257;R<=2264;R++)Ee[R]=2;for(R=2274;R<=2279;R++)Ee[R]=2;for(R=2280;R<=2282;R++)Ee[R]=1;for(R=2283;R<=2289;R++)Ee[R]=2;for(R=2290;R<=2292;R++)Ee[R]=0;for(R=2308;R<=2313;R++)Ee[R]=0;for(R=2315;R<=2491;R++)Ee[R]=0;for(R=2494;R<=2866;R++)Ee[R]=0;for(R=2867;R<=2869;R++)Ee[R]=1;for(R=2870;R<=2888;R++)Ee[R]=2;for(R=2891;R<=2895;R++)Ee[R]=2;for(R=2896;R<=2898;R++)Ee[R]=1;for(R=2902;R<=2908;R++)Ee[R]=2;for(R=2915;R<=2920;R++)Ee[R]=2;for(R=2921;R<=2923;R++)Ee[R]=1;for(R=2924;R<=2930;R++)Ee[R]=2;for(R=2931;R<=2962;R++)Ee[R]=0;for(R=2964;R<=2968;R++)Ee[R]=2;for(R=2969;R<=2973;R++)Ee[R]=0;for(R=2975;R<=2991;R++)Ee[R]=0;for(R=2995;R<=3051;R++)Ee[R]=0;for(R=3054;R<=3079;R++)Ee[R]=0;for(R=3081;R<=3088;R++)Ee[R]=0;for(R=3092;R<=3101;R++)Ee[R]=0;for(R=3106;R<=3138;R++)Ee[R]=0;for(R=3146;R<=3151;R++)Ee[R]=0;for(R=3153;R<=3166;R++)Ee[R]=0;for(R=3168;R<=3172;R++)Ee[R]=0;for(R=3174;R<=3203;R++)Ee[R]=0;for(R=3294;R<=3358;R++)Ee[R]=0;for(R=3367;R<=3403;R++)Ee[R]=0;for(R=3408;R<=3416;R++)Ee[R]=0;for(R=3417;R<=3438;R++)Ee[R]=2;for(R=3441;R<=3446;R++)Ee[R]=2;for(R=3447;R<=3450;R++)Ee[R]=0;for(R=3451;R<=3459;R++)Ee[R]=2;for(R=3460;R<=3478;R++)Ee[R]=0;for(R=3554;R<=3559;R++)Ee[R]=0;for(R=3560;R<=3570;R++)Ee[R]=2;for(R=3571;R<=3581;R++)Ee[R]=0;for(R=3594;R<=3597;R++)Ee[R]=0;for(R=3601;R<=3604;R++)Ee[R]=0;for(R=3637;R<=3639;R++)Ee[R]=0;for(R=3665;R<=3667;R++)Ee[R]=0;for(R=3693;R<=3695;R++)Ee[R]=0;for(R=3701;R<=3727;R++)Ee[R]=0;for(R=3728;R<=3739;R++)Ee[R]=2;for(R=3740;R<=3751;R++)Ee[R]=0;for(R=3753;R<=3760;R++)Ee[R]=2;for(R=3761;R<=3773;R++)Ee[R]=0;for(R=3775;R<=3777;R++)Ee[R]=0;for(R=3779;R<=3781;R++)Ee[R]=0;for(R=3783;R<=3785;R++)Ee[R]=0;for(R=3788;R<=3791;R++)Ee[R]=0;for(R=3797;R<=3802;R++)Ee[R]=0;for(R=3814;R<=3816;R++)Ee[R]=0;for(R=3825;R<=3829;R++)Ee[R]=0;for(R=3832;R<=3841;R++)Ee[R]=0;for(R=3844;R<=3852;R++)Ee[R]=0;for(R=3873;R<=3885;R++)Ee[R]=0;for(R=3890;R<=3893;R++)Ee[R]=0;for(R=3907;R<=3912;R++)Ee[R]=0;for(R=3942;R<=3950;R++)Ee[R]=0;for(R=3968;R<=3970;R++)Ee[R]=0;for(R=3973;R<=3976;R++)Ee[R]=0;for(R=3986;R<=3989;R++)Ee[R]=0;for(R=3994;R<=3997;R++)Ee[R]=0;for(R=4048;R<=4051;R++)Ee[R]=0;for(R=4056;R<=4063;R++)Ee[R]=0;for(R=4093;R<=4096;R++)Ee[R]=0;for(R=4390;R<=4398;R++)Ee[R]=0;for(R=4399;R<=4413;R++)Ee[R]=2;for(R=4418;R<=4433;R++)Ee[R]=2;for(R=4455;R<=4457;R++)Ee[R]=2;for(R=4484;R<=4489;R++)Ee[R]=0;for(R=4491;R<=4554;R++)Ee[R]=0;for(R=4568;R<=4589;R++)Ee[R]=0;for(R=4652;R<=4656;R++)Ee[R]=0;for(R=4766;R<=4800;R++)Ee[R]=0;for(R=5014;R<=5016;R++)Ee[R]=0;for(R=5069;R<=5072;R++)Ee[R]=0;for(R=5105;R<=5130;R++)Ee[R]=0;for(R=5167;R<=5188;R++)Ee[R]=0;for(R=5253;R<=5259;R++)Ee[R]=0;for(R=5269;R<=5275;R++)Ee[R]=0;for(R=5292;R<=5311;R++)Ee[R]=0;for(R=5329;R<=5331;R++)Ee[R]=0;for(R=5343;R<=5349;R++)Ee[R]=0;for(R=5355;R<=5357;R++)Ee[R]=0;for(R=5387;R<=5389;R++)Ee[R]=0;for(R=5459;R<=5463;R++)Ee[R]=0;for(R=5479;R<=5482;R++)Ee[R]=0;for(R=5518;R<=5520;R++)Ee[R]=0;for(R=5530;R<=5539;R++)Ee[R]=0;for(R=5550;R<=5552;R++)Ee[R]=0;for(R=5562;R<=5583;R++)Ee[R]=0;for(R=5623;R<=5625;R++)Ee[R]=2;for(R=5631;R<=5639;R++)Ee[R]=0;for(R=5649;R<=5653;R++)Ee[R]=0;for(R=5663;R<=5680;R++)Ee[R]=0;for(R=5682;R<=5685;R++)Ee[R]=0;for(R=5875;R<=5877;R++)Ee[R]=0;for(R=5896;R<=5899;R++)Ee[R]=0;for(R=5921;R<=5940;R++)Ee[R]=0;for(R=6050;R<=6125;R++)Ee[R]=0;for(R=6244;R<=6275;R++)Ee[R]=0;for(R=6328;R<=6348;R++)Ee[R]=0;for(R=6350;R<=6356;R++)Ee[R]=0;for(R=6366;R<=6372;R++)Ee[R]=0;for(R=6381;R<=6387;R++)Ee[R]=0;for(R=6393;R<=6404;R++)Ee[R]=0;for(R=6480;R<=6483;R++)Ee[R]=0;for(R=6511;R<=6514;R++)Ee[R]=0;for(R=6579;R<=6581;R++)Ee[R]=0;for(R=6619;R<=6624;R++)Ee[R]=0;for(R=6625;R<=6627;R++)Ee[R]=2;for(R=6628;R<=6632;R++)Ee[R]=0;for(R=6634;R<=6637;R++)Ee[R]=0;for(R=6669;R<=6692;R++)Ee[R]=0;for(R=6707;R<=6709;R++)Ee[R]=0;for(R=6720;R<=6723;R++)Ee[R]=0;for(R=6732;R<=6738;R++)Ee[R]=0;for(R=6931;R<=6933;R++)Ee[R]=0;for(R=6956;R<=6959;R++)Ee[R]=0;for(R=7005;R<=7007;R++)Ee[R]=0;for(R=7057;R<=7070;R++)Ee[R]=2;for(R=7074;R<=7082;R++)Ee[R]=0;for(R=7109;R<=7118;R++)Ee[R]=0;for(R=7119;R<=7127;R++)Ee[R]=1;for(R=7374;R<=7376;R++)Ee[R]=0;for(R=7528;R<=7586;R++)Ee[R]=0;for(R=7587;R<=7645;R++)Ee[R]=2;for(R=7692;R<=7696;R++)Ee[R]=0;for(R=7755;R<=7787;R++)Ee[R]=0;for(R=7791;R<=7795;R++)Ee[R]=0;for(R=7799;R<=7801;R++)Ee[R]=0;for(R=7803;R<=7805;R++)Ee[R]=0;for(R=7825;R<=7831;R++)Ee[R]=0;for(R=7845;R<=7859;R++)Ee[R]=0;for(R=8013;R<=8032;R++)Ee[R]=0;for(R=8065;R<=8068;R++)Ee[R]=1;for(R=8518;R<=8529;R++)Ee[R]=2;for(R=8533;R<=8536;R++)Ee[R]=2;for(R=8538;R<=8540;R++)Ee[R]=2;for(R=8677;R<=8679;R++)Ee[R]=0;for(R=8836;R<=8840;R++)Ee[R]=0;for(R=8857;R<=8859;R++)Ee[R]=0;for(R=8908;R<=8910;R++)Ee[R]=0;for(R=9154;R<=9159;R++)Ee[R]=0;for(R=9205;R<=9218;R++)Ee[R]=0;for(R=9271;R<=9273;R++)Ee[R]=0;for(R=9295;R<=9297;R++)Ee[R]=0;for(R=9356;R<=9360;R++)Ee[R]=0;for(R=9404;R<=9407;R++)Ee[R]=0;for(R=9476;R<=9482;R++)Ee[R]=0;for(R=9487;R<=9494;R++)Ee[R]=0;for(R=9697;R<=9699;R++)Ee[R]=0;for(R=9821;R<=9865;R++)Ee[R]=0;for(R=10285;R<=10291;R++)Ee[R]=0;for(R=10314;R<=10317;R++)Ee[R]=0;for(R=10448;R<=10465;R++)Ee[R]=0;for(R=10731;R<=10733;R++)Ee[R]=0;for(R=11114;R<=11118;R++)Ee[R]=0;for(R=20004;R<=20032;R++)Ee[R]=0;for(R=20047;R<=20049;R++)Ee[R]=0;for(R=20062;R<=20092;R++)Ee[R]=0;for(R=20135;R<=20138;R++)Ee[R]=0;for(R=20248;R<=20258;R++)Ee[R]=0;for(R=20348;R<=20358;R++)Ee[R]=0;for(R=20436;R<=20440;R++)Ee[R]=0;for(R=20822;R<=20824;R++)Ee[R]=0;for(R=20904;R<=20932;R++)Ee[R]=0;for(R=20934;R<=20936;R++)Ee[R]=0;for(R=21004;R<=21032;R++)Ee[R]=0;for(R=21035;R<=21037;R++)Ee[R]=0;for(R=21095;R<=21097;R++)Ee[R]=0;for(R=21148;R<=21150;R++)Ee[R]=0;for(R=21207;R<=21264;R++)Ee[R]=0;for(R=21307;R<=21364;R++)Ee[R]=0;for(R=21413;R<=21423;R++)Ee[R]=0;for(R=21453;R<=21463;R++)Ee[R]=0;for(R=21473;R<=21483;R++)Ee[R]=0;for(R=21780;R<=21782;R++)Ee[R]=0;for(R=21891;R<=21894;R++)Ee[R]=0;for(R=21896;R<=21899;R++)Ee[R]=0;for(R=22171;R<=22177;R++)Ee[R]=0;for(R=22181;R<=22187;R++)Ee[R]=0;for(R=22191;R<=22197;R++)Ee[R]=0;for(R=22207;R<=22222;R++)Ee[R]=0;for(R=22229;R<=22232;R++)Ee[R]=0;for(R=22234;R<=22236;R++)Ee[R]=0;for(R=22243;R<=22250;R++)Ee[R]=0;for(R=22262;R<=22265;R++)Ee[R]=0;for(R=22307;R<=22322;R++)Ee[R]=0;for(R=22348;R<=22357;R++)Ee[R]=0;for(R=22407;R<=22422;R++)Ee[R]=0;for(R=22462;R<=22465;R++)Ee[R]=0;for(R=22521;R<=22525;R++)Ee[R]=0;for(R=22607;R<=22622;R++)Ee[R]=0;for(R=22641;R<=22646;R++)Ee[R]=0;for(R=22648;R<=22657;R++)Ee[R]=0;for(R=22707;R<=22722;R++)Ee[R]=0;for(R=22762;R<=22765;R++)Ee[R]=0;for(R=22807;R<=22822;R++)Ee[R]=0;for(R=22991;R<=22994;R++)Ee[R]=0;for(R=23028;R<=23038;R++)Ee[R]=0;for(R=23301;R<=23333;R++)Ee[R]=2;for(R=23830;R<=23853;R++)Ee[R]=0;for(R=23866;R<=23872;R++)Ee[R]=0;for(R=23877;R<=23884;R++)Ee[R]=0;for(R=23886;R<=23894;R++)Ee[R]=0;for(R=23946;R<=23948;R++)Ee[R]=0;for(R=24311;R<=24313;R++)Ee[R]=0;for(R=24342;R<=24347;R++)Ee[R]=0;for(R=24370;R<=24374;R++)Ee[R]=10;for(R=24375;R<=24381;R++)Ee[R]=0;for(R=24718;R<=24721;R++)Ee[R]=0;for(R=24817;R<=24821;R++)Ee[R]=0;for(R=24877;R<=24882;R++)Ee[R]=0;for(R=24891;R<=24893;R++)Ee[R]=0;for(R=25391;R<=25395;R++)Ee[R]=0;for(R=25828;R<=25838;R++)Ee[R]=0;for(R=26191;R<=26195;R++)Ee[R]=0;for(R=26391;R<=26393;R++)Ee[R]=0;for(R=26701;R<=26722;R++)Ee[R]=0;for(R=26729;R<=26799;R++)Ee[R]=2;for(R=26801;R<=26803;R++)Ee[R]=2;for(R=26811;R<=26813;R++)Ee[R]=2;for(R=26847;R<=26870;R++)Ee[R]=2;for(R=26891;R<=26899;R++)Ee[R]=0;for(R=26901;R<=26923;R++)Ee[R]=0;for(R=26929;R<=26946;R++)Ee[R]=0;for(R=26948;R<=26998;R++)Ee[R]=0;for(R=27037;R<=27040;R++)Ee[R]=0;for(R=27205;R<=27232;R++)Ee[R]=0;for(R=27258;R<=27260;R++)Ee[R]=0;for(R=27391;R<=27398;R++)Ee[R]=0;for(R=27561;R<=27564;R++)Ee[R]=0;for(R=27571;R<=27574;R++)Ee[R]=0;for(R=27581;R<=27584;R++)Ee[R]=0;for(R=27591;R<=27594;R++)Ee[R]=0;for(R=27700;R<=27707;R++)Ee[R]=0;for(R=28191;R<=28193;R++)Ee[R]=0;for(R=28348;R<=28358;R++)Ee[R]=0;for(R=28402;R<=28432;R++)Ee[R]=0;for(R=28462;R<=28492;R++)Ee[R]=0;for(R=29118;R<=29122;R++)Ee[R]=0;for(R=29168;R<=29172;R++)Ee[R]=0;for(R=29177;R<=29185;R++)Ee[R]=0;for(R=29187;R<=29195;R++)Ee[R]=0;for(R=29900;R<=29903;R++)Ee[R]=0;for(R=30161;R<=30179;R++)Ee[R]=0;for(R=30491;R<=30494;R++)Ee[R]=0;for(R=30729;R<=30732;R++)Ee[R]=0;for(R=31251;R<=31259;R++)Ee[R]=0;for(R=31265;R<=31268;R++)Ee[R]=0;for(R=31275;R<=31279;R++)Ee[R]=0;for(R=31281;R<=31297;R++)Ee[R]=0;for(R=31461;R<=31469;R++)Ee[R]=0;for(R=31491;R<=31495;R++)Ee[R]=0;for(R=31917;R<=31922;R++)Ee[R]=0;for(R=31965;R<=32e3;R++)Ee[R]=0;for(R=32001;R<=32003;R++)Ee[R]=2;for(R=32005;R<=32031;R++)Ee[R]=2;for(R=32033;R<=32060;R++)Ee[R]=2;for(R=32064;R<=32067;R++)Ee[R]=2;for(R=32074;R<=32077;R++)Ee[R]=2;for(R=32081;R<=32086;R++)Ee[R]=0;for(R=32107;R<=32130;R++)Ee[R]=0;for(R=32133;R<=32159;R++)Ee[R]=0;for(R=32164;R<=32167;R++)Ee[R]=2;for(R=32180;R<=32199;R++)Ee[R]=0;for(R=32201;R<=32260;R++)Ee[R]=0;for(R=32301;R<=32360;R++)Ee[R]=0;for(R=32401;R<=32460;R++)Ee[R]=0;for(R=32501;R<=32560;R++)Ee[R]=0;for(R=32601;R<=32662;R++)Ee[R]=0;for(R=32664;R<=32667;R++)Ee[R]=2;for(R=32701;R<=32761;R++)Ee[R]=0;for(R=53001;R<=53004;R++)Ee[R]=0;for(R=53008;R<=53019;R++)Ee[R]=0;for(R=53021;R<=53032;R++)Ee[R]=0;for(R=53034;R<=53037;R++)Ee[R]=0;for(R=53042;R<=53046;R++)Ee[R]=0;for(R=53074;R<=53080;R++)Ee[R]=0;for(R=54001;R<=54004;R++)Ee[R]=0;for(R=54008;R<=54019;R++)Ee[R]=0;for(R=54021;R<=54032;R++)Ee[R]=0;for(R=54034;R<=54037;R++)Ee[R]=0;for(R=54042;R<=54046;R++)Ee[R]=0;for(R=54048;R<=54053;R++)Ee[R]=0;for(R=54074;R<=54080;R++)Ee[R]=0;for(R=54098;R<=54101;R++)Ee[R]=0;for(R=102001;R<=102040;R++)Ee[R]=0;for(R=102042;R<=102063;R++)Ee[R]=0;for(R=102065;R<=102067;R++)Ee[R]=0;for(R=102070;R<=102117;R++)Ee[R]=0;for(R=102122;R<=102216;R++)Ee[R]=0;for(R=102221;R<=102377;R++)Ee[R]=0;for(R=102382;R<=102388;R++)Ee[R]=0;for(R=102389;R<=102398;R++)Ee[R]=2;for(R=102399;R<=102444;R++)Ee[R]=0;for(R=102445;R<=102447;R++)Ee[R]=2;for(R=102448;R<=102458;R++)Ee[R]=0;for(R=102459;R<=102468;R++)Ee[R]=2;for(R=102469;R<=102499;R++)Ee[R]=0;for(R=102500;R<=102519;R++)Ee[R]=1;for(R=102520;R<=102524;R++)Ee[R]=0;for(R=102525;R<=102529;R++)Ee[R]=2;for(R=102530;R<=102588;R++)Ee[R]=0;for(R=102590;R<=102598;R++)Ee[R]=0;for(R=102601;R<=102603;R++)Ee[R]=0;for(R=102605;R<=102628;R++)Ee[R]=0;for(R=102629;R<=102646;R++)Ee[R]=2;for(R=102648;R<=102700;R++)Ee[R]=2;for(R=102701;R<=102703;R++)Ee[R]=0;for(R=102707;R<=102730;R++)Ee[R]=2;for(R=102733;R<=102758;R++)Ee[R]=2;for(R=102767;R<=102900;R++)Ee[R]=0;for(R=102901;R<=102933;R++)Ee[R]=2;for(R=102934;R<=102950;R++)Ee[R]=13;for(R=102951;R<=102963;R++)Ee[R]=0;for(R=102965;R<=102969;R++)Ee[R]=0;for(R=102971;R<=102973;R++)Ee[R]=0;for(R=102975;R<=102989;R++)Ee[R]=0;for(R=102990;R<=102992;R++)Ee[R]=1;for(R=102997;R<=103002;R++)Ee[R]=0;for(R=103003;R<=103008;R++)Ee[R]=2;for(R=103009;R<=103011;R++)Ee[R]=0;for(R=103012;R<=103014;R++)Ee[R]=2;for(R=103019;R<=103021;R++)Ee[R]=0;for(R=103022;R<=103024;R++)Ee[R]=2;for(R=103029;R<=103031;R++)Ee[R]=0;for(R=103032;R<=103034;R++)Ee[R]=2;for(R=103065;R<=103068;R++)Ee[R]=0;for(R=103074;R<=103076;R++)Ee[R]=0;for(R=103077;R<=103079;R++)Ee[R]=1;for(R=103080;R<=103082;R++)Ee[R]=0;for(R=103083;R<=103085;R++)Ee[R]=2;for(R=103090;R<=103093;R++)Ee[R]=0;for(R=103097;R<=103099;R++)Ee[R]=0;for(R=103100;R<=103102;R++)Ee[R]=2;for(R=103107;R<=103109;R++)Ee[R]=0;for(R=103110;R<=103112;R++)Ee[R]=2;for(R=103113;R<=103116;R++)Ee[R]=0;for(R=103117;R<=103120;R++)Ee[R]=2;for(R=103153;R<=103157;R++)Ee[R]=0;for(R=103158;R<=103162;R++)Ee[R]=2;for(R=103163;R<=103165;R++)Ee[R]=0;for(R=103166;R<=103168;R++)Ee[R]=1;for(R=103169;R<=103171;R++)Ee[R]=2;for(R=103186;R<=103188;R++)Ee[R]=0;for(R=103189;R<=103191;R++)Ee[R]=2;for(R=103192;R<=103195;R++)Ee[R]=0;for(R=103196;R<=103199;R++)Ee[R]=2;for(R=103200;R<=103224;R++)Ee[R]=0;for(R=103225;R<=103227;R++)Ee[R]=1;for(R=103232;R<=103237;R++)Ee[R]=0;for(R=103238;R<=103243;R++)Ee[R]=2;for(R=103244;R<=103246;R++)Ee[R]=0;for(R=103247;R<=103249;R++)Ee[R]=2;for(R=103254;R<=103256;R++)Ee[R]=0;for(R=103257;R<=103259;R++)Ee[R]=2;for(R=103264;R<=103266;R++)Ee[R]=0;for(R=103267;R<=103269;R++)Ee[R]=2;for(R=103300;R<=103375;R++)Ee[R]=0;for(R=103381;R<=103383;R++)Ee[R]=0;for(R=103384;R<=103386;R++)Ee[R]=1;for(R=103387;R<=103389;R++)Ee[R]=0;for(R=103390;R<=103392;R++)Ee[R]=2;for(R=103397;R<=103399;R++)Ee[R]=0;for(R=103400;R<=103471;R++)Ee[R]=2;for(R=103476;R<=103478;R++)Ee[R]=0;for(R=103479;R<=103481;R++)Ee[R]=2;for(R=103486;R<=103488;R++)Ee[R]=0;for(R=103489;R<=103491;R++)Ee[R]=2;for(R=103492;R<=103495;R++)Ee[R]=0;for(R=103496;R<=103499;R++)Ee[R]=2;for(R=103528;R<=103543;R++)Ee[R]=0;for(R=103544;R<=103548;R++)Ee[R]=2;for(R=103549;R<=103551;R++)Ee[R]=0;for(R=103552;R<=103554;R++)Ee[R]=1;for(R=103555;R<=103557;R++)Ee[R]=2;for(R=103558;R<=103560;R++)Ee[R]=0;for(R=103571;R<=103573;R++)Ee[R]=0;for(R=103574;R<=103576;R++)Ee[R]=2;for(R=103577;R<=103580;R++)Ee[R]=0;for(R=103581;R<=103583;R++)Ee[R]=2;for(R=103595;R<=103694;R++)Ee[R]=0;for(R=103696;R<=103699;R++)Ee[R]=0;for(R=103700;R<=103793;R++)Ee[R]=2;for(R=103794;R<=103890;R++)Ee[R]=0;for(R=103891;R<=103896;R++)Ee[R]=2;for(R=103900;R<=103971;R++)Ee[R]=2;for(R=103972;R<=103977;R++)Ee[R]=0;for(R=112e3;R<=112101;R++)Ee[R]=0;const kae=[102100,102113,3857,3785,900913],v9e=[104905,104971],_9e=[4326,...kae,...v9e],aE=[-20037508342788905e-9,20037508342788905e-9],K$=[-20037508342787e-6,20037508342787e-6],j8={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:aE,origin:K$,dx:1e-5},Nae={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:aE,origin:K$,dx:1e-5},102100:j8,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:aE,origin:K$,dx:1e-5},3857:j8,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:j8};function Ko(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,s=e.wkid;if(i!=null||s!=null){if(i===s||Qh(t)&&Qh(e))return!0;const o=t.latestWkid;if(o!=null&&s===o)return!0;const l=e.latestWkid;return l!=null&&i===l}let n,r;return t.wkt2&&e.wkt2?(n=t.wkt2,r=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,r=e.wkt),!(!n||!r)&&n.toUpperCase()===r.toUpperCase()}async function Pct(t,e){if(t===e)return!0;zq()||await qq();const i=r=>{var c;const o=r.wkt2||r.wkt;if(o){const f=oE.fromString(zn.PE_TYPE_NONE,o);return f==null?void 0:f.getCode()}const l=r.wkid??r.latestWkid;return l?(c=oE.coordsys(l))==null?void 0:c.getCode():null},s=t?i(t):null,n=e?i(e):null;return s!=null&&n!=null&&s===n}function jb(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Nae[e]||null}function Tct(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const s=t.wkt||t.wkt2;return JSON.stringify(s?i?{wkt:s,vcsWkid:i}:{wkt:s}:{})}function b2(t){if(!Dc(t))return!1;const{wkid:e}=t;if(e)return Ee[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function b9e(t){return!($ae(t)||Oae(t))}function Jy(t){return(t==null?void 0:t.wkid)===4326}function Ict(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function hW(t){return(t==null?void 0:t.wkid)===Ky.CGCS2000}function Qh(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&kae.includes(e)}function x9e(t){return(t==null?void 0:t.wkid)===32662}function xM(t){return t===Ky.GCSMARS2000||t===Ky.GCSMARS2000_SPHERE}function $ae(t){return xM(t==null?void 0:t.wkid)}function wM(t){return t===Ky.GCSMOON2000}function Oae(t){return wM(t==null?void 0:t.wkid)}function w9e(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&_9e.includes(e)}function Dc(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const Rae={wkid:4326,wkt:dM(Nae[4326].wkTemplate,{Central_Meridian:"0.0"})},Lae={wkid:102100,latestWkid:3857},S9e={wkid:32662};function Vq(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const E9e=Vq(ur),Gq=Vq(uf),jq=Vq(mg),C9e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${ur.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},P9e=Gq.wkt.toUpperCase(),T9e=jq.wkt.toUpperCase();function Bq(t){if(t!=null&&Dc(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(xM(e))return uf;const s=i==null?void 0:i.toUpperCase();if(i&&s===P9e)return uf;if(wM(e)||s&&s===T9e)return mg}return ur}function Mct(t){return xM(t)?uf:wM(t)?mg:ur}function OI(t){return Ko(t,E9e)}function gg(t){return OI(t)||Ko(t,Gq)||Ko(t,jq)}const Act=39.37,I9e=ur.radius*Math.PI/200,Fae=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Ly=Ee,zae=/UNIT\[([^\]]+)]/i,qae=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),M9e=wa()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),bd=t=>t*t,Wm=t=>t*t*t,lE={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:bd(.001)},"square-centimeters":{inBaseUnits:bd(.01)},"square-decimeters":{inBaseUnits:bd(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:bd(1e3)},"square-inches":{inBaseUnits:bd(.0254)},"square-feet":{inBaseUnits:bd(.3048)},"square-yards":{inBaseUnits:bd(.9144)},"square-miles":{inBaseUnits:bd(1609.344)},"square-us-feet":{inBaseUnits:bd(1200/3937)},acres:{inBaseUnits:.0015625*bd(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Wm(.001)},"cubic-centimeters":{inBaseUnits:1e3*Wm(.01)},"cubic-decimeters":{inBaseUnits:1e3*Wm(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Wm(1e3)},"cubic-inches":{inBaseUnits:1e3*Wm(.0254)},"cubic-feet":{inBaseUnits:1e3*Wm(.3048)},"cubic-yards":{inBaseUnits:1e3*Wm(.9144)},"cubic-miles":{inBaseUnits:1e3*Wm(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},A9e=(()=>{const t={};for(const e in lE)for(const i in lE[e].units)t[i]=e;return t})();function D9e(t,e,i){return t*lE[i].units[e].inBaseUnits}function k9e(t,e,i){return t/lE[i].units[e].inBaseUnits}const Dct=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],Vae=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],N9e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function kct(t){return t==="imperial"||t==="metric"}function Qy(t){const e=A9e[t];if(!e)throw new Error("unknown type");return e}function dW(t,e=null){return e=e||Qy(t),lE[e].baseUnit===t}function un(t,e,i){if(e===i)return t;const s=Qy(e);if(s!==Qy(i))throw new Error("incompatible units");const n=dW(e,s)?t:D9e(t,e,s);return dW(i,s)?n:k9e(n,i,s)}function $9e(t,e,i,s=!1){if(!s&&i.isGeographic)throw new Error("Unable to convert from a linear unit to an angular unit.");const n=nx(i);return e!==n&&(t=n?un(t,e,n):un(t,e,"meters")/jp(i)),t}function O9e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function Nct(t){return O9e(t)}function $ct(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function Oct(t,e){const i=un(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Rct(t,e){const i=un(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function Lct(t,e){const i=un(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function Fct(t,e){const i=un(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function zct(t,e){const i=un(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function qct(t,e){const i=un(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function Gae(t,e,i){return un(t,e,"meters")/(i*Math.PI/180)}function jae(t){return M9e.fromJSON(t.toLowerCase())||null}function RI(t){if(t!=null&&!b9e(t))return 1;const e=jp(t);return e>1e5?1:e}function Bae(t){return jp(t)>=Bq(t).metersPerDegree?"meters":nx(t)}function jp(t,e=ur.metersPerDegree){return Hq(t,!0)??e}function Hq(t,e=!1){const i=(t==null?void 0:t.wkid)??null,s=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(i){if(xM(i))return uf.metersPerDegree;if(wM(i))return mg.metersPerDegree;n=Ly.values[Ly[i]],!n&&e&&qae.has(i)&&(n=I9e)}else s&&(SM(s)?n=fW(Fae.exec(s),n):Yae(s)&&(n=fW(zae.exec(s),n)));return n}function Vct(t){return b2(t)?1:jp(t)}function fW(t,e){return t!=null&&t[1]?Hae(t[1]):e}function Hae(t){return parseFloat(t.split(",")[1])}function nx(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let s=null;if(e)s=Ly.units[Ly[e]];else if(i){const n=SM(i)?Fae:Yae(i)?zae:null;if(n){const r=n.exec(i);r!=null&&r[1]&&(s=F9e(r[1]))}}return s!=null?jae(s):null}function R9e(t){const e=nx(t);return e!=null&&Vae.includes(e)?e:null}function Uae(t){const e=Bae(t);return e!=null&&Vae.includes(e)?e:null}function Gct(t){const e=nx(t);return e==null?null:N9e.get(e)}function Yae(t){return/^GEOCCS/i.test(t)}function SM(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const L9e=1e-7;function F9e(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!Ly.units.includes(i)){const s=Hae(t);i=null;const n=Ly.values;for(let r=0;r<n.length;++r)if(Math.abs(s-n[r])<L9e){i=Ly.units[r];break}}return i}function jct(t){const e=nx(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const z9e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},q9e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},V9e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},G9e=wa()(z9e),j9e=wa()(q9e),Bct=wa()(V9e);function Ft(t,e,i){let s,n;return e===void 0?(n=t,s=[void 0]):typeof e!="string"?(n=t,s=[void 0],i=e):(n=e,s=Array.isArray(t)?t:[t]),(r,o)=>{const l=r.constructor.prototype;for(const c of s){const f=Woe(r,c,n);f.write&&typeof f.write=="object"||(f.write={}),i&&(f.write.target=i),f.write.writer=l[o]}}}var Cd;let nn=Cd=class extends wt{static fromJSON(t){if(!t)return null;if((t==null?void 0:t.wkid)===102100)return Cd.WebMercator;if((t==null?void 0:t.wkid)===4326)return Cd.WGS84;const e=new Cd;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return Jy(this)}get isWebMercator(){return Qh(this)}get isGeographic(){return b2(this)}get isWrappable(){return w9e(this)}get metersPerUnit(){return jp(this)}get unit(){return nx(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Cd.WGS84)return new Cd(Rae);if(this===Cd.WebMercator)return new Cd(Lae);const t=new Cd;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=Ue(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:s}=t.imageCoordinateSystem,n=this.imageCoordinateSystem;return e==null||s?JSON.stringify(n)===JSON.stringify(t.imageCoordinateSystem):i?n.id===e&&n.referenceServiceName===i:n.id===e}return Ko(this,t)}toJSON(t){return this.write(void 0,t)}};nn.GCS_NAD_1927=null,nn.WGS84=null,nn.WebMercator=null,nn.PlateCarree=null,I([N({readOnly:!0})],nn.prototype,"isWGS84",null),I([N({readOnly:!0})],nn.prototype,"isWebMercator",null),I([N({readOnly:!0})],nn.prototype,"isGeographic",null),I([N({readOnly:!0})],nn.prototype,"isWrappable",null),I([N({type:wn,json:{write:!0}})],nn.prototype,"latestWkid",void 0),I([N({readOnly:!0})],nn.prototype,"metersPerUnit",null),I([N({readOnly:!0})],nn.prototype,"unit",null),I([N({type:wn,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],nn.prototype,"wkid",void 0),I([N({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],nn.prototype,"wkt",void 0),I([Ft("wkt"),Ft("web-scene","wkt")],nn.prototype,"writeWkt",null),I([N({type:String,json:{write:!1}})],nn.prototype,"wkt2",void 0),I([N({type:wn,json:{write:!0}})],nn.prototype,"vcsWkid",void 0),I([N({type:wn,json:{write:!0}})],nn.prototype,"latestVcsWkid",void 0),I([N()],nn.prototype,"imageCoordinateSystem",void 0),nn=Cd=I([De("esri.geometry.SpatialReference")],nn),nn.prototype.toJSON.isDefaultToJSON=!0,nn.GCS_NAD_1927=Ei.freeze(new nn({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),nn.WGS84=Ei.freeze(new nn(Rae)),nn.WebMercator=Ei.freeze(new nn(Lae)),nn.PlateCarree=Ei.freeze(new nn(S9e));const qi=nn;let Pd=class extends wt{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=qi.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof qi)return e;if(e!=null){const s=new qi;return s.read(e,i),s}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};I([N()],Pd.prototype,"type",void 0),I([N({readOnly:!0})],Pd.prototype,"cache",null),I([N({readOnly:!0})],Pd.prototype,"extent",null),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Pd.prototype,"hasM",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Pd.prototype,"hasZ",void 0),I([N({type:qi,json:{write:!0},value:qi.WGS84})],Pd.prototype,"spatialReference",void 0),I([At("spatialReference")],Pd.prototype,"readSpatialReference",null),Pd=I([De("esri.geometry.Geometry")],Pd);const Iv=Pd,B9e=Object.prototype.toString;function H9e(t){const e="__accessorMetadata__"in t?Zo(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return U9e.apply(this,i)}}function U9e(t,e,i,s){pM(t,e).cast=s}function Y9e(t){return(e,i)=>{pM(e,t).cast=e[i]}}function Sn(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&B9e.call(t[0])==="[object Function]"?H9e(t[0]):t.length===1&&typeof t[0]=="string"?Y9e(t[0]):void 0}const X9e=57.29577951308232,W9e=.017453292519943;function pW(t){return t*X9e}function mW(t){return t*W9e}function Uct(t){return t/ur.radius}function Yct(t){return Math.PI/2-2*Math.atan(Math.exp(-t/ur.radius))}function J$(t){return t.wkid!=null||t.wkt!=null}const B8=[0,0];function LI(t,e,i,s,n){const r=t,o=n;if(o.spatialReference=i,"x"in r&&"x"in o)[o.x,o.y]=e(r.x,r.y,B8,s);else if("xmin"in r&&"xmin"in o)[o.xmin,o.ymin]=e(r.xmin,r.ymin,B8,s),[o.xmax,o.ymax]=e(r.xmax,r.ymax,B8,s);else if("paths"in r&&"paths"in o||"rings"in r&&"rings"in o){const l="paths"in r?r.paths:r.rings,c=[];let f;for(let y=0;y<l.length;y++){const _=l[y];f=[],c.push(f);for(let x=0;x<_.length;x++)f.push(e(_[x][0],_[x][1],[0,0],s)),_[x].length>2&&f[x].push(_[x][2]),_[x].length>3&&f[x].push(_[x][3])}"paths"in o?o.paths=c:o.rings=c}else if("points"in r&&"points"in o){const l=r.points,c=[];for(let f=0;f<l.length;f++)c[f]=e(l[f][0],l[f][1],[0,0],s),l[f].length>2&&c[f].push(l[f][2]),l[f].length>3&&c[f].push(l[f][3]);o.points=c}return n}function yT(t,e){const i=t&&(J$(t)?t:t.spatialReference),s=e&&(J$(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!s)&&(!!Ko(s,i)||Qh(s)&&Jy(i)||Qh(i)&&Jy(s))}function Xae(t,e){if(t==null)return null;const i=t.spatialReference,s=e&&(J$(e)?e:e.spatialReference);return yT(i,s)?Ko(i,s)?Ue(t):Qh(s)?LI(t,Tb,qi.WebMercator,!1,Ue(t)):Jy(s)?LI(t,EM,qi.WGS84,!1,Ue(t)):null:null}function Tb(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const s=mW(e);return i[0]=mW(t)*ur.radius,i[1]=ur.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function EM(t,e,i=[0,0],s=!1){if(t===aE[0])i[0]=-180;else if(t===aE[1])i[0]=180;else{const n=pW(t/ur.radius);i[0]=s?n:n-360*Math.floor((n+180)/360)}return i[1]=pW(Math.PI/2-2*Math.atan(Math.exp(-e/ur.radius))),i}function vT(t,e=!1,i=Ue(t)){return LI(t,Tb,qi.WebMercator,e,i)}function Ib(t,e=!1,i=Ue(t)){return LI(t,EM,qi.WGS84,e,i)}function Z9e(t,e){const i=t.x-e.x,s=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+s*s+n*n)}function K9e(t){var e;return((e=Wae(t,Zae))==null?void 0:e[0])??null}function J9e(t){var e;return((e=Wae(t,Zae))==null?void 0:e[1])??null}function Wae({x:t,y:e,spatialReference:i},s=[0,0]){if(i){if(Qh(i))return EM(t,e,s);if(b2(i))return s[0]=t,s[1]=e,s}return null}const Zae=[0,0];var _T;const H8=[0,0];function gW(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let rl=_T=class extends Iv{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Ei.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,s,n){let r;if(Array.isArray(t))r=t,n=e,t=r[0],e=r[1],i=r[2],s=r[3];else if(t&&typeof t=="object"){if(r=t,t=r.x!=null?r.x:r.longitude,e=r.y!=null?r.y:r.latitude,i=r.z,s=r.m,(n=r.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new qi(n)),r.longitude!=null||r.latitude!=null){if(r.longitude==null)zt.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(r.latitude==null)zt.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!r.declaredClass&&(n!=null&&n.isWebMercator)){const l=Tb(r.longitude,r.latitude,H8);t=l[0],e=l[1]}}}else gW(i)?(n=i,i=null):gW(s)&&(n=s,s=null);const o={x:t,y:e};return o.x==null&&o.y!=null?zt.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&zt.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),s!=null&&(o.m=s),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return J9e(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Tb(i,t,H8)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return K9e(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Tb(t,e,H8)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new _T;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return _T.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:s,m:n,spatialReference:r}=this,{z:o,m:l}=t;let{x:c,y:f,spatialReference:y}=t;if(!r.equals(y))if(r.isWebMercator&&y.isWGS84)[c,f]=Tb(c,f),y=r;else{if(!r.isWGS84||!y.isWebMercator)return!1;[c,f]=EM(c,f),y=r}return e===c&&i===f&&s===o&&n===l&&r.wkid===y.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=jb(this.spatialReference);if(!t)return this;let e=this.x;const[i,s]=t.valid,n=2*s;let r;return e>s?(r=Math.ceil(Math.abs(e-s)/n),e-=r*n):e<i&&(r=Math.ceil(Math.abs(e-i)/n),e+=r*n),this._set("x",e),this}distance(t){return Z9e(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};I([N({readOnly:!0})],rl.prototype,"cache",null),I([N({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],rl.prototype,"hasM",null),I([N({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],rl.prototype,"hasZ",null),I([N({type:Number})],rl.prototype,"latitude",null),I([N({type:Number})],rl.prototype,"longitude",null),I([N({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Sn(t=>isNaN(t)?t:tx(t))],rl.prototype,"x",void 0),I([Ft("x")],rl.prototype,"writeX",null),I([At("x")],rl.prototype,"readX",null),I([N({type:Number,json:{write:!0}})],rl.prototype,"y",void 0),I([N({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],rl.prototype,"z",void 0),I([N({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],rl.prototype,"m",void 0),rl=_T=I([De("esri.geometry.Point")],rl),rl.prototype.toJSON.isDefaultToJSON=!0;const Hi=rl,U8=[0,0];function Kae(t,e){return e!=null&&ul(t,e.x,e.y,e.z)}function Xct(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!x2(t,i))return!1;return!0}function Q9e(t,e){const{xmin:i,ymin:s,zmin:n,xmax:r,ymax:o,zmax:l}=e;return t.hasZ&&e.hasZ?ul(t,i,s,n)&&ul(t,i,o,n)&&ul(t,r,o,n)&&ul(t,r,s,n)&&ul(t,i,s,l)&&ul(t,i,o,l)&&ul(t,r,o,l)&&ul(t,r,s,l):ul(t,i,s)&&ul(t,i,o)&&ul(t,r,o)&&ul(t,r,s)}function x2(t,e){return ul(t,e[0],e[1])}function eIe(t,e){return ul(t,e[0],e[1],e[2])}function ul(t,e,i,s){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(s==null||!t.hasZ||s>=t.zmin&&s<=t.zmax)}function tIe(t,e){return U8[1]=e.y,U8[0]=e.x,iIe(t,U8)}function iIe(t,e){return Jae(t.rings,e)}function Jae(t,e){if(!t)return!1;if(sIe(t))return yW(!1,t,e);let i=!1;for(let s=0,n=t.length;s<n;s++)i=yW(i,t[s],e);return i}function sIe(t){return!Array.isArray(t[0][0])}function yW(t,e,i){const[s,n]=i;let r=t,o=0;for(let l=0,c=e.length;l<c;l++){o++,o===c&&(o=0);const[f,y]=e[l],[_,x]=e[o];(y<n&&x>=n||x<n&&y>=n)&&f+(n-y)/(x-y)*(_-f)<s&&(r=!r)}return r}function nIe(t,e){return Kae(t,e)}function rIe(t,e){const i=t.hasZ&&e.hasZ;let s,n,r;if(t.xmin<=e.xmin){if(s=e.xmin,t.xmax<s)return!1}else if(s=t.xmin,e.xmax<s)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(r=e.zmin,t.zmax<r)return!1}else if(r=t.zmin,e.zmax<r)return!1}return!0}function oIe(t,e){const{points:i,hasZ:s}=e,n=s?eIe:x2;for(const r of i)if(n(t,r))return!0;return!1}const ev=[0,0],tv=[0,0],iv=[0,0],sv=[0,0],aIe=[ev,tv,iv,sv],Qae=[[iv,ev],[ev,tv],[tv,sv],[sv,iv]];function lIe(t,e){return uIe(t,e.rings)}function uIe(t,e){ev[0]=t.xmin,ev[1]=t.ymax,tv[0]=t.xmax,tv[1]=t.ymax,iv[0]=t.xmin,iv[1]=t.ymin,sv[0]=t.xmax,sv[1]=t.ymin;for(const i of aIe)if(Jae(e,i))return!0;for(const i of e){if(!i.length)continue;let s=i[0];if(x2(t,s))return!0;for(let n=1;n<i.length;n++){const r=i[n];if(x2(t,r)||ele(s,r,Qae))return!0;s=r}}return!1}function cIe(t,e){ev[0]=t.xmin,ev[1]=t.ymax,tv[0]=t.xmax,tv[1]=t.ymax,iv[0]=t.xmin,iv[1]=t.ymin,sv[0]=t.xmax,sv[1]=t.ymin;const i=e.paths;for(const s of i){if(!i.length)continue;let n=s[0];if(x2(t,n))return!0;for(let r=1;r<s.length;r++){const o=s[r];if(x2(t,o)||ele(n,o,Qae))return!0;n=o}}return!1}const Ao=[0,0];function hIe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const r=i[n],o=i[n+1];for(let l=e+1;l<t.length;l++)for(let c=0;c<t[l].length-1;c++){const f=t[l][c],y=t[l][c+1];if(Q$(r,o,f,y,Ao)&&!(Ao[0]===r[0]&&Ao[1]===r[1]||Ao[0]===f[0]&&Ao[1]===f[1]||Ao[0]===o[0]&&Ao[1]===o[1]||Ao[0]===y[0]&&Ao[1]===y[1]))return!0}}const s=i.length;if(!(s<=4))for(let n=0;n<s-3;n++){let r=s-1;n===0&&(r=s-2);const o=i[n],l=i[n+1];for(let c=n+2;c<r;c++){const f=i[c],y=i[c+1];if(Q$(o,l,f,y,Ao)&&!(Ao[0]===o[0]&&Ao[1]===o[1]||Ao[0]===f[0]&&Ao[1]===f[1]||Ao[0]===l[0]&&Ao[1]===l[1]||Ao[0]===y[0]&&Ao[1]===y[1]))return!0}}}return!1}function ele(t,e,i){for(let s=0;s<i.length;s++)if(Q$(t,e,i[s][0],i[s][1]))return!0;return!1}function Q$(t,e,i,s,n){const[r,o]=t,[l,c]=e,[f,y]=i,[_,x]=s,S=_-f,P=r-f,A=l-r,k=x-y,$=o-y,F=c-o,G=k*A-S*F;if(G===0)return!1;const V=(S*$-k*P)/G,B=(A*$-F*P)/G;return V>=0&&V<=1&&B>=0&&B<=1&&(n&&(n[0]=r+V*(l-r),n[1]=o+V*(c-o)),!0)}function dIe(t){switch(t){case"esriGeometryEnvelope":case"extent":return rIe;case"esriGeometryMultipoint":case"multipoint":return oIe;case"esriGeometryPoint":case"point":return nIe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return lIe;case"esriGeometryPolyline":case"polyline":return cIe}}var cc;function fIe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Zm(t,e,i){return e==null?i:i==null?e:t(e,i)}let fo=cc=class extends Iv{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,s,n){return fIe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?qi.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:s,spatialReference:n??qi.WGS84}}static fromBounds(t,e){return new cc({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new cc({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Hi({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new cc;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&yT(e,i)&&(t=e.isWebMercator?vT(t):Ib(t,!0)),t.type==="point"?Kae(this,t):t.type==="extent"&&Q9e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&yT(e,i)&&(t=e.isWebMercator?vT(t):Ib(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,s=this.height*e;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Ko(e,i)&&yT(e,i)&&(t=e.isWebMercator?vT(t):Ib(t,!0)),dIe(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Zm(Math.min,this.zmin,t.zmin),this.zmax=Zm(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Zm(Math.min,this.mmin,t.mmin),this.mmax=Zm(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Zm(Math.max,this.zmin,t.zmin),this.zmax=Zm(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Zm(Math.max,this.mmin,t.mmin),this.mmax=Zm(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=jb(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const s=e.isWebMercator?Ib(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(s.x=Y8(s.x,t).x),this.spatialReference=new qi(dM((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(t){let e=null;const[i,s]=t.valid,n=this.xmin,r=this.xmax;return n>=i&&n<=s&&r>=i&&r<=s||(e=this.center),e}_normalize(t,e,i){const s=this.spatialReference;if(!s)return this;const n=i??jb(s);if(n==null)return this;const r=this._getParts(n).map(c=>c.extent);if(r.length<2)return r[0]||this;if(r.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return r;let o=!0,l=!0;return r.forEach(c=>{c.hasZ||(o=!1),c.hasM||(l=!1)}),{rings:r.map(c=>{const f=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(o){const y=(c.zmax-c.zmin)/2;for(let _=0;_<f.length;_++)f[_].push(y)}if(l){const y=(c.mmax-c.mmin)/2;for(let _=0;_<f.length;_++)f[_].push(y)}return f}),hasZ:o,hasM:l,spatialReference:s}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:r,spatialReference:o}=this,l=this.width,c=this.xmin,f=this.xmax;let y;t=t||jb(o);const[_,x]=t.valid;y=Y8(this.xmin,t);const S=y.x,P=y.frameId;y=Y8(this.xmax,t);const A=y.x,k=y.frameId,$=S===A&&l>0;if(l>2*x){const F=new cc(c<f?S:A,n,x,r,o),G=new cc(_,n,c<f?A:S,r,o),V=new cc(0,n,x,r,o),B=new cc(_,n,0,r,o),W=[],J=[];F.contains(V)&&W.push(P),F.contains(B)&&J.push(P),G.contains(V)&&W.push(k),G.contains(B)&&J.push(k);for(let re=P+1;re<k;re++)W.push(re),J.push(re);e.push({extent:F,frameIds:[P]},{extent:G,frameIds:[k]},{extent:V,frameIds:W},{extent:B,frameIds:J})}else S>A||$?e.push({extent:new cc(S,n,x,r,o),frameIds:[P]},{extent:new cc(_,n,A,r,o),frameIds:[k]}):e.push({extent:new cc(S,n,A,r,o),frameIds:[P]});this.cache._parts=e}const i=this.hasZ,s=this.hasM;if(i||s){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),s&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let r=0;r<e.length;r++)e[r].extent.set(n)}return e}};function Y8(t,e){const[i,s]=e.valid,n=2*s;let r,o=0;return t>s?(r=Math.ceil(Math.abs(t-s)/n),t-=r*n,o=r):t<i&&(r=Math.ceil(Math.abs(t-i)/n),t+=r*n,o=-r),{x:t,frameId:o}}I([N({readOnly:!0})],fo.prototype,"cache",null),I([N({readOnly:!0})],fo.prototype,"center",null),I([N({readOnly:!0})],fo.prototype,"extent",null),I([N({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],fo.prototype,"hasM",null),I([N({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],fo.prototype,"hasZ",null),I([N({readOnly:!0})],fo.prototype,"height",null),I([N({readOnly:!0})],fo.prototype,"width",null),I([N({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],fo.prototype,"xmin",void 0),I([N({type:Number,json:{write:!0}})],fo.prototype,"ymin",void 0),I([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],fo.prototype,"mmin",void 0),I([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],fo.prototype,"zmin",void 0),I([N({type:Number,json:{write:!0}})],fo.prototype,"xmax",void 0),I([N({type:Number,json:{write:!0}})],fo.prototype,"ymax",void 0),I([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],fo.prototype,"mmax",void 0),I([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],fo.prototype,"zmax",void 0),fo=cc=I([De("esri.geometry.Extent")],fo),fo.prototype.toJSON.isDefaultToJSON=!0;const cr=fo;let bS;var qse,Vse;const pIe=((qse=globalThis.esriConfig)==null?void 0:qse.locale)??((Vse=globalThis.dojoConfig)==null?void 0:Vse.locale);var Gse;const xS=(Gse=globalThis.document)==null?void 0:Gse.documentElement;function tle(){var i;const t=xS==null?void 0:xS.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return pIe??t??e??"en"}function Au(){return bS===void 0&&(bS=tle()),bS}function Wct(t=Au()){const e=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(t);return e==null?void 0:e[1].toLowerCase()}const bT=[];function mIe(t){return bT.push(t),ds(()=>bT.splice(bT.indexOf(t),1))}const xT=[];function Uq(t){return xT.push(t),ds(()=>xT.splice(xT.indexOf(t),1))}function vW(){const t=tle();bS!==t&&([...xT].forEach(e=>e(t)),bS=t,[...bT].forEach(e=>e(t)))}var jse;(jse=globalThis.addEventListener)==null||jse.call(globalThis,"languagechange",vW),xS&&new MutationObserver(()=>{vW()}).observe(xS,{attributeFilter:["lang"]});let jP;function gIe(t){return jP&&!jP.destroyed||(jP=t()),jP}var eO;const yIe=new ps({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let hc=eO=class extends Ei{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new eO({categories:this.categories?Ue(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let s="";if(this.extent){const o=Xae(this.extent,qi.WGS84);o!=null&&(s=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const r={categories:i,bbox:s,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(r.sortField=this.sortField.split(",").map(o=>yIe.toJSON(o.trim())).join(","),r.sortOrder=this.sortOrder),{query:{...e,...r}}}};I([N()],hc.prototype,"categories",void 0),I([N()],hc.prototype,"disableExtraQuery",void 0),I([N({type:cr})],hc.prototype,"extent",void 0),I([N()],hc.prototype,"filter",void 0),I([N()],hc.prototype,"num",void 0),I([N()],hc.prototype,"query",void 0),I([N()],hc.prototype,"sortField",void 0),I([N()],hc.prototype,"sortOrder",null),I([N()],hc.prototype,"start",void 0),hc=eO=I([De("esri.portal.PortalQueryParams")],hc);const Rh=hc;var tO;let Wr=tO=class extends wt{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new rt("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new tO({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=Zo(Rh,t);const s=this.portal;return parseFloat(s.currentVersion)>5?(i=i||new Rh,s.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new Rh,i.query="group:"+this.id+(i.query?" "+i.query:""),s.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(s=>{const n=s.contentCategorySetsGroupQuery;if(n){const r=new Rh({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(r,e)}throw new rt("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(s=>{if(s.total){const n=s.results[0],r=new Rh({num:1,query:`typekeywords:"${t}"`});return n.queryItems(r,e)}throw new rt("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(s=>s.total?s.results[0].fetchData("json",e).then(n=>{const r=n==null?void 0:n.categorySchema;return r!=null&&r.length?r:[]}):[])}};I([N()],Wr.prototype,"access",void 0),I([N({type:Date})],Wr.prototype,"created",void 0),I([N()],Wr.prototype,"description",void 0),I([N()],Wr.prototype,"id",void 0),I([N()],Wr.prototype,"isInvitationOnly",void 0),I([N({type:Date})],Wr.prototype,"modified",void 0),I([N()],Wr.prototype,"owner",void 0),I([N()],Wr.prototype,"portal",void 0),I([N()],Wr.prototype,"snippet",void 0),I([N()],Wr.prototype,"sortField",void 0),I([N()],Wr.prototype,"sortOrder",void 0),I([N()],Wr.prototype,"sourceJSON",void 0),I([N()],Wr.prototype,"tags",void 0),I([N()],Wr.prototype,"thumbnail",void 0),I([N({readOnly:!0})],Wr.prototype,"thumbnailUrl",null),I([N()],Wr.prototype,"title",void 0),I([N({readOnly:!0})],Wr.prototype,"url",null),Wr=tO=I([De("esri.portal.PortalGroup")],Wr);const iO=Wr;let k1=class extends Ei{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};I([N()],k1.prototype,"nextQueryParams",void 0),I([N()],k1.prototype,"queryParams",void 0),I([N()],k1.prototype,"results",void 0),I([N()],k1.prototype,"total",void 0),k1=I([De("esri.portal.PortalQueryResult")],k1);const vIe=k1;let Jf=class extends wt{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new rt("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};I([N({type:Date})],Jf.prototype,"created",void 0),I([N()],Jf.prototype,"id",void 0),I([N()],Jf.prototype,"portal",void 0),I([N()],Jf.prototype,"title",void 0),I([N({readOnly:!0})],Jf.prototype,"url",null),I([N()],Jf.prototype,"username",void 0),Jf=I([De("esri.portal.PortalFolder")],Jf);const _Ie=Jf;var sO;let Cn=sO=class extends wt{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.username}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,s=t==null?void 0:t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let r=this.userContentUrl;return s&&(r+="/"+(typeof s=="string"?s:s.id)),this.portal.request(r+"/addItem",n).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const s=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:s}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",s=[],n=t.map(r=>r.id);if(n.length){const r={method:"post",query:{items:n.join(","),permanentDelete:e}},o=await this.portal.request(i,r);for(const l of o.results){const c=t.find(_=>l.itemId===_.id),f=l.success;let y=null;f?(c.id=null,c.portal=null):l.error&&(y=new rt("portal:delete-item-failed",l.error.message,l.error)),s.push({item:c,success:f,error:y})}}return s}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(s=>{const n=_Ie.fromJSON(s);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const s=iO.fromJSON(i);return s.portal=this.portal,s}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await nt(()=>Promise.resolve().then(()=>Ghe),void 0,import.meta.url),s={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:s});let r;return n!=null&&n.items?(r=n.items.map(o=>{const l=i.fromJSON(o);return l.portal=this.portal,l}),await Promise.all(r.map(o=>o.load())),{items:r,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new iO({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new rt("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,s=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:s})}toJSON(){throw new rt("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new sO({sourceJSON:t});return e.read(t),e}};I([N()],Cn.prototype,"access",void 0),I([N({type:Date})],Cn.prototype,"created",void 0),I([N()],Cn.prototype,"culture",void 0),I([N()],Cn.prototype,"description",void 0),I([N()],Cn.prototype,"email",void 0),I([N()],Cn.prototype,"favGroupId",void 0),I([N()],Cn.prototype,"fullName",void 0),I([N({type:Date})],Cn.prototype,"modified",void 0),I([N()],Cn.prototype,"orgId",void 0),I([N()],Cn.prototype,"portal",void 0),I([N()],Cn.prototype,"preferredView",void 0),I([N()],Cn.prototype,"privileges",void 0),I([N()],Cn.prototype,"region",void 0),I([N()],Cn.prototype,"role",void 0),I([N()],Cn.prototype,"roleId",void 0),I([N()],Cn.prototype,"sourceJSON",void 0),I([N()],Cn.prototype,"thumbnail",void 0),I([N({readOnly:!0})],Cn.prototype,"thumbnailUrl",null),I([N()],Cn.prototype,"units",void 0),I([N({readOnly:!0})],Cn.prototype,"userContentUrl",null),I([N({readOnly:!0})],Cn.prototype,"url",null),I([N()],Cn.prototype,"username",void 0),I([N()],Cn.prototype,"userLicenseTypeId",void 0),I([N()],Cn.prototype,"userType",void 0),Cn=sO=I([De("esri.portal.PortalUser")],Cn);const Yq=Cn;var hu;let kw;const _W={PortalGroup:()=>Promise.resolve({default:iO}),PortalItem:()=>nt(()=>Promise.resolve().then(()=>Ghe),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:Yq})};let $t=hu=class extends Iq(vC){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Gs.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){bW.unregister(this),this.defaultBasemap=so(this.defaultBasemap),this.defaultDevBasemap=so(this.defaultDevBasemap),this.defaultVectorBasemap=so(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=bo(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Gs.request.trustedServers.includes(e)||Gs.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,e=!t||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get hasAPIKey(){return Eae(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.slice(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=Yq.fromJSON(t),e.portal=this),e}load(t){const e=nt(()=>import("./Basemap-C55jA_4J.js").then(i=>i.B),[],import.meta.url).then(({default:i})=>{Kl(t),kw=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var s;if(!this.hasAPIKey&&Li){const n=Li;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==hu.AUTH_MODE_AUTO&&this.authMode!==hu.AUTH_MODE_NO_PROMPT||((s=this._esriIdCredentialCreateHandle)==null||s.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",bIe(new WeakRef(this))),bW.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await nt(async()=>{const{default:i}=await import("./ElevationLayer-CC9E0pMl.js");return{default:i}},__vite__mapDeps([82,83,6,7,84,85,39,86]),import.meta.url)).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(t,e);i.unshift(...s)}return i}async fetchDefault3DBasemap(t){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const e=new Rh;e.query=this.default3DBasemapQuery,e.disableExtraQuery=!0;const i=(await this.queryItems(e,t)).results.find(s=>s.type==="Web Scene");return i?new kw({portalItem:i}):null}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):$u(t)?Promise.reject(or()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Rh({num:100,sortField:"title"});if(e!=null&&e.length){const s=[];for(const n of e)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,t).then(n=>n.results)}return $u(t)?Promise.reject(or()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Au();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Au();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return gIe(()=>new hu)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const s=this.restUrl+"/portals/self",n={authMode:t,query:{culture:Au().toLowerCase()},withCredentials:!0,...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),e&&(n.query.default=!0),this.request(s,n)}queryPortal(t,e,i,s){const n=Zo(Rh,e),r=o=>this.request(this.restUrl+t,{...n.toRequestOptions(this),...s}).then(l=>{const c=n.clone();return c.start=l.nextStart,new vIe({nextQueryParams:c,queryParams:n,total:l.total,results:hu._resultsToTypedArray(o,{portal:this},l,s)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(Nh(c),l)));return i&&_W[i]?_W[i]().then(({default:o})=>(Kl(s),r(o))):r()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new rt("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===hu.AUTH_MODE_ANONYMOUS||this.authMode===hu.AUTH_MODE_NO_PROMPT&&!Li)return Promise.reject(new rt("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Li?Li.getCredential(this.restUrl,{prompt:this.authMode!==hu.AUTH_MODE_NO_PROMPT}).then(e=>t(e)):t(this.credential)}normalizeUrl(t){var i;const e=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(s=>{const n=hu._resultsToTypedArray(i,{portal:this},s);return Promise.all(n.map(r=>typeof r.when=="function"?r.when():s)).then(()=>n,()=>n)})}request(t,e={}){const i={f:"json",...e.query},{authMode:s=this.authMode===hu.AUTH_MODE_ANONYMOUS||this.authMode===hu.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:r=!1,method:o="auto",responseType:l="json",signal:c}=e,f={authMode:s,body:n,cacheBust:r,method:o,query:i,responseType:l,timeout:0,signal:c};return e.withCredentials&&(f.withCredentials=!0),Qs(this._normalizeSSL(t),f).then(y=>y.data)}toJSON(){throw new rt("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new hu({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new rt("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new Rh;i.query=t||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,e);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const r=await n.queryItems(i,e);return r.total?r.results.filter(o=>o.type==="Web Map").map(o=>new kw({portalItem:o})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const s=new Rh({query:i,disableExtraQuery:!0}),n=await this.queryGroups(s,e);if(!n.total)return[];const r=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=r.sortField||"name",s.sortOrder=r.sortOrder||"desc";const o=await r.queryItems(s,e);return o.total?o.results.filter(l=>l.type==="Web Scene").map(l=>new kw({portalItem:l})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=kw.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,s){let n;if(i){const r=s!=null?s.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(n=n.map(o=>{const l=Object.assign(t?t.fromJSON(o):o,e);return typeof l.load=="function"&&l.load(r),l}))}else n=[];return n}};$t.AUTH_MODE_ANONYMOUS="anonymous",$t.AUTH_MODE_AUTO="auto",$t.AUTH_MODE_IMMEDIATE="immediate",$t.AUTH_MODE_NO_PROMPT="no-prompt",I([N()],$t.prototype,"access",void 0),I([N()],$t.prototype,"allSSL",void 0),I([N()],$t.prototype,"authMode",void 0),I([N()],$t.prototype,"authorizedCrossOriginDomains",void 0),I([At("authorizedCrossOriginDomains")],$t.prototype,"readAuthorizedCrossOriginDomains",null),I([N()],$t.prototype,"basemapGalleryGroupQuery",void 0),I([N({json:{name:"3DBasemapGalleryGroupQuery"}})],$t.prototype,"basemapGalleryGroupQuery3D",void 0),I([N()],$t.prototype,"bingKey",void 0),I([N()],$t.prototype,"canListApps",void 0),I([N()],$t.prototype,"canListData",void 0),I([N()],$t.prototype,"canListPreProvisionedItems",void 0),I([N()],$t.prototype,"canProvisionDirectPurchase",void 0),I([N()],$t.prototype,"canSearchPublic",void 0),I([N()],$t.prototype,"canShareBingPublic",void 0),I([N()],$t.prototype,"canSharePublic",void 0),I([N()],$t.prototype,"canSignInArcGIS",void 0),I([N()],$t.prototype,"canSignInIDP",void 0),I([N()],$t.prototype,"colorSetsGroupQuery",void 0),I([N()],$t.prototype,"commentsEnabled",void 0),I([N({type:Date})],$t.prototype,"created",void 0),I([N()],$t.prototype,"credential",void 0),I([N()],$t.prototype,"culture",void 0),I([N()],$t.prototype,"currentVersion",void 0),I([N()],$t.prototype,"customBaseUrl",void 0),I([N()],$t.prototype,"default3DBasemapQuery",void 0),I([N()],$t.prototype,"defaultBasemap",void 0),I([At("defaultBasemap")],$t.prototype,"readDefaultBasemap",null),I([N()],$t.prototype,"defaultDevBasemap",void 0),I([At("defaultDevBasemap")],$t.prototype,"readDefaultDevBasemap",null),I([N({type:cr})],$t.prototype,"defaultExtent",void 0),I([N()],$t.prototype,"defaultVectorBasemap",void 0),I([At("defaultVectorBasemap")],$t.prototype,"readDefaultVectorBasemap",null),I([N()],$t.prototype,"description",void 0),I([N()],$t.prototype,"devBasemapGalleryGroupQuery",void 0),I([N()],$t.prototype,"eueiEnabled",void 0),I([N({readOnly:!0})],$t.prototype,"extraQuery",null),I([N()],$t.prototype,"featuredGroups",void 0),I([N()],$t.prototype,"featuredItemsGroupQuery",void 0),I([N()],$t.prototype,"galleryTemplatesGroupQuery",void 0),I([N()],$t.prototype,"layoutGroupQuery",void 0),I([N()],$t.prototype,"livingAtlasGroupQuery",void 0),I([N({readOnly:!0})],$t.prototype,"hasAPIKey",null),I([N()],$t.prototype,"hasCategorySchema",void 0),I([N()],$t.prototype,"hasClassificationSchema",void 0),I([N()],$t.prototype,"helpBase",void 0),I([N()],$t.prototype,"helperServices",void 0),I([N()],$t.prototype,"helpMap",void 0),I([N()],$t.prototype,"homePageFeaturedContent",void 0),I([N()],$t.prototype,"homePageFeaturedContentCount",void 0),I([N()],$t.prototype,"httpPort",void 0),I([N()],$t.prototype,"httpsPort",void 0),I([N()],$t.prototype,"id",void 0),I([N()],$t.prototype,"ipCntryCode",void 0),I([N({readOnly:!0})],$t.prototype,"isOrganization",null),I([N()],$t.prototype,"isPortal",void 0),I([N()],$t.prototype,"isReadOnly",void 0),I([N({readOnly:!0})],$t.prototype,"itemPageUrl",null),I([N()],$t.prototype,"layerTemplatesGroupQuery",void 0),I([N()],$t.prototype,"maxTokenExpirationMinutes",void 0),I([N({type:Date})],$t.prototype,"modified",void 0),I([N()],$t.prototype,"name",void 0),I([N()],$t.prototype,"portalHostname",void 0),I([N()],$t.prototype,"portalMode",void 0),I([N()],$t.prototype,"portalProperties",void 0),I([N()],$t.prototype,"region",void 0),I([N()],$t.prototype,"recycleBinEnabled",void 0),I([N({readOnly:!0})],$t.prototype,"restUrl",null),I([N()],$t.prototype,"rotatorPanels",void 0),I([N()],$t.prototype,"showHomePageDescription",void 0),I([N()],$t.prototype,"sourceJSON",void 0),I([N()],$t.prototype,"staticImagesUrl",void 0),I([N({json:{name:"2DStylesGroupQuery"}})],$t.prototype,"stylesGroupQuery2d",void 0),I([N({json:{name:"stylesGroupQuery"}})],$t.prototype,"stylesGroupQuery3d",void 0),I([N()],$t.prototype,"supportsHostedServices",void 0),I([N()],$t.prototype,"symbolSetsGroupQuery",void 0),I([N()],$t.prototype,"templatesGroupQuery",void 0),I([N()],$t.prototype,"thumbnail",void 0),I([N({readOnly:!0})],$t.prototype,"thumbnailUrl",null),I([N()],$t.prototype,"units",void 0),I([N()],$t.prototype,"url",void 0),I([N()],$t.prototype,"urlKey",void 0),I([At("urlKey")],$t.prototype,"readUrlKey",null),I([N()],$t.prototype,"user",void 0),I([At("user")],$t.prototype,"readUser",null),I([N()],$t.prototype,"use3dBasemaps",void 0),I([N()],$t.prototype,"useDefault3dBasemap",void 0),I([N()],$t.prototype,"useStandardizedQuery",void 0),I([N()],$t.prototype,"useVectorBasemaps",void 0),I([N()],$t.prototype,"vectorBasemapGalleryGroupQuery",void 0),$t=hu=I([De("esri.portal.Portal")],$t);const Ou=$t,bW=new FinalizationRegistry(t=>{t.remove()});function bIe(t){const e=Li;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let wT=class ile{constructor(){this._emitter=new ile.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,r){var f;let o=(f=this._listenersMap)==null?void 0:f.get(n);if(!o)return!1;const l=this._target||this;let c=!1;for(const y of o.slice()){const _="deref"in y?y.deref():y;_?_==null||_.call(l,r):c=!0}return c&&(o=o.filter(y=>!("deref"in y)||y.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,r){if(Array.isArray(n)){const l=n.map(c=>this.on(c,r));return am(l)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(r),this._listenersMap.set(n,o),ds(()=>{var f;const l=(f=this._listenersMap)==null?void 0:f.get(n),c=(l==null?void 0:l.indexOf(r))??-1;c>=0&&l.splice(c,1)})}once(n,r){const o=this.on(n,l=>{o.remove();const c="deref"in r?r.deref():r;c==null||c.call(null,l)});return o}hasEventListener(n){var o;const r=(o=this._listenersMap)==null?void 0:o.get(n);return r!=null&&r.length>0}}t.EventEmitter=e,t.EventedMixin=s=>{let n=class extends s{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(r,o){return this._emitter.emit(r,o)}on(r,o){return this._emitter.on(r,o)}once(r,o){return this._emitter.once(r,o)}hasEventListener(r){return this._emitter.hasEventListener(r)}};return n=I([De("esri.core.Evented")],n),n};let i=class extends Ei{constructor(){super(...arguments),this._emitter=new wT.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,n){return this._emitter.emit(s,n)}on(s,n){return this._emitter.on(s,n)}once(s,n){return this._emitter.once(s,n)}hasEventListener(s){return this._emitter.hasEventListener(s)}};i=I([De("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(wT||(wT={}));const Sa=wT,xW=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Mv extends Error{}class xIe extends Mv{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class wIe extends Mv{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class SIe extends Mv{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Mb extends Mv{}class sle extends Mv{constructor(e){super(`Invalid unit ${e}`)}}class ja extends Mv{}class Km extends Mv{constructor(){super("Zone is an abstract class")}}const jt="numeric",ed="short",Du="long",FI={year:jt,month:jt,day:jt},nle={year:jt,month:ed,day:jt},EIe={year:jt,month:ed,day:jt,weekday:ed},rle={year:jt,month:Du,day:jt},ole={year:jt,month:Du,day:jt,weekday:Du},ale={hour:jt,minute:jt},lle={hour:jt,minute:jt,second:jt},ule={hour:jt,minute:jt,second:jt,timeZoneName:ed},cle={hour:jt,minute:jt,second:jt,timeZoneName:Du},hle={hour:jt,minute:jt,hourCycle:"h23"},dle={hour:jt,minute:jt,second:jt,hourCycle:"h23"},fle={hour:jt,minute:jt,second:jt,hourCycle:"h23",timeZoneName:ed},ple={hour:jt,minute:jt,second:jt,hourCycle:"h23",timeZoneName:Du},mle={year:jt,month:jt,day:jt,hour:jt,minute:jt},gle={year:jt,month:jt,day:jt,hour:jt,minute:jt,second:jt},yle={year:jt,month:ed,day:jt,hour:jt,minute:jt},vle={year:jt,month:ed,day:jt,hour:jt,minute:jt,second:jt},CIe={year:jt,month:ed,day:jt,weekday:ed,hour:jt,minute:jt},_le={year:jt,month:Du,day:jt,hour:jt,minute:jt,timeZoneName:ed},ble={year:jt,month:Du,day:jt,hour:jt,minute:jt,second:jt,timeZoneName:ed},xle={year:jt,month:Du,day:jt,weekday:Du,hour:jt,minute:jt,timeZoneName:Du},wle={year:jt,month:Du,day:jt,weekday:Du,hour:jt,minute:jt,second:jt,timeZoneName:Du};class rx{get type(){throw new Km}get name(){throw new Km}get ianaName(){return this.name}get isUniversal(){throw new Km}offsetName(e,i){throw new Km}formatOffset(e,i){throw new Km}offset(e){throw new Km}equals(e){throw new Km}get isValid(){throw new Km}}let X8=null;class CM extends rx{static get instance(){return X8===null&&(X8=new CM),X8}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return Dle(e,i,s)}formatOffset(e,i){return wS(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let ST={};function PIe(t){return ST[t]||(ST[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),ST[t]}const TIe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function IIe(t,e){const i=t.format(e).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,r,o,l,c,f,y]=s;return[o,n,r,l,c,f,y]}function MIe(t,e){const i=t.formatToParts(e),s=[];for(let n=0;n<i.length;n++){const{type:r,value:o}=i[n],l=TIe[r];r==="era"?s[l]=o:Ri(l)||(s[l]=parseInt(o,10))}return s}let BP={};class Ru extends rx{static create(e){return BP[e]||(BP[e]=new Ru(e)),BP[e]}static resetCache(){BP={},ST={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ru.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return Dle(e,i,s,this.name)}formatOffset(e,i){return wS(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const s=PIe(this.name);let[n,r,o,l,c,f,y]=s.formatToParts?MIe(s,i):IIe(s,i);l==="BC"&&(n=-Math.abs(n)+1);const x=TM({year:n,month:r,day:o,hour:c===24?0:c,minute:f,second:y,millisecond:0});let S=+i;const P=S%1e3;return S-=P>=0?P:1e3+P,(x-S)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let wW={};function AIe(t,e={}){const i=JSON.stringify([t,e]);let s=wW[i];return s||(s=new Intl.ListFormat(t,e),wW[i]=s),s}let nO={};function rO(t,e={}){const i=JSON.stringify([t,e]);let s=nO[i];return s||(s=new Intl.DateTimeFormat(t,e),nO[i]=s),s}let oO={};function DIe(t,e={}){const i=JSON.stringify([t,e]);let s=oO[i];return s||(s=new Intl.NumberFormat(t,e),oO[i]=s),s}let aO={};function kIe(t,e={}){const{base:i,...s}=e,n=JSON.stringify([t,s]);let r=aO[n];return r||(r=new Intl.RelativeTimeFormat(t,e),aO[n]=r),r}let u3=null;function NIe(){return u3||(u3=new Intl.DateTimeFormat().resolvedOptions().locale,u3)}let SW={};function $Ie(t){let e=SW[t];if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,SW[t]=e}return e}function OIe(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let s,n;try{s=rO(t).resolvedOptions(),n=t}catch{const c=t.substring(0,i);s=rO(c).resolvedOptions(),n=c}const{numberingSystem:r,calendar:o}=s;return[n,r,o]}}function RIe(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function LIe(t){const e=[];for(let i=1;i<=12;i++){const s=hi.utc(2009,i,1);e.push(t(s))}return e}function FIe(t){const e=[];for(let i=1;i<=7;i++){const s=hi.utc(2016,11,13+i);e.push(t(s))}return e}function HP(t,e,i,s){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):s(e)}function zIe(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class qIe{constructor(e,i,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:n,floor:r,...o}=s;if(!i||Object.keys(o).length>0){const l={useGrouping:!1,...s};s.padTo>0&&(l.minimumIntegerDigits=s.padTo),this.inf=DIe(e,l)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):Jq(e,3);return to(i,this.padTo)}}}class VIe{constructor(e,i,s){this.opts=s,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Ru.create(l).valid?(n=l,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const r={...this.opts};r.timeZone=r.timeZone||n,this.dtf=rO(i,r)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:s}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class GIe{constructor(e,i,s){this.opts={style:"long",...s},!i&&Mle()&&(this.rtf=kIe(e,s))}format(e,i){return this.rtf?this.rtf.format(e,i):h6e(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const jIe={firstDay:1,minimalDays:4,weekend:[6,7]};class on{static fromOpts(e){return on.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,s,n,r=!1){const o=e||Dr.defaultLocale,l=o||(r?"en-US":NIe()),c=i||Dr.defaultNumberingSystem,f=s||Dr.defaultOutputCalendar,y=lO(n)||Dr.defaultWeekSettings;return new on(l,c,f,y,o)}static resetCache(){u3=null,nO={},oO={},aO={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:s,weekSettings:n}={}){return on.create(e,i,s,n)}constructor(e,i,s,n,r){const[o,l,c]=OIe(e);this.locale=o,this.numberingSystem=i||l||null,this.outputCalendar=s||c||null,this.weekSettings=n,this.intl=RIe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=zIe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:on.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,lO(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return HP(this,e,$le,()=>{const s=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=LIe(r=>this.extract(r,s,"month"))),this.monthsCache[n][e]})}weekdays(e,i=!1){return HP(this,e,Lle,()=>{const s=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=FIe(r=>this.extract(r,s,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return HP(this,void 0,()=>Fle,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[hi.utc(2016,11,13,9),hi.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return HP(this,e,zle,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[hi.utc(-40,1,1),hi.utc(2017,1,1)].map(s=>this.extract(s,i,"era"))),this.eraCache[e]})}extract(e,i,s){const n=this.dtFormatter(e,i),r=n.formatToParts(),o=r.find(l=>l.type.toLowerCase()===s);return o?o.value:null}numberFormatter(e={}){return new qIe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new VIe(e,this.intl,i)}relFormatter(e={}){return new GIe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return AIe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Ale()?$Ie(this.locale):jIe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let W8=null;class Bo extends rx{static get utcInstance(){return W8===null&&(W8=new Bo(0)),W8}static instance(e){return e===0?Bo.utcInstance:new Bo(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Bo(IM(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${wS(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${wS(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return wS(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class BIe extends rx{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function q0(t,e){if(Ri(t)||t===null)return e;if(t instanceof rx)return t;if(ZIe(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?CM.instance:i==="utc"||i==="gmt"?Bo.utcInstance:Bo.parseSpecifier(i)||Ru.create(t)}else return ag(t)?Bo.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new BIe(t)}const Xq={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},EW={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},HIe=Xq.hanidec.replace(/[\[|\]]/g,"").split("");function UIe(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);if(t[i].search(Xq.hanidec)!==-1)e+=HIe.indexOf(t[i]);else for(const n in EW){const[r,o]=EW[n];s>=r&&s<=o&&(e+=s-r)}}return parseInt(e,10)}else return e}let H_={};function YIe(){H_={}}function lh({numberingSystem:t},e=""){const i=t||"latn";return H_[i]||(H_[i]={}),H_[i][e]||(H_[i][e]=new RegExp(`${Xq[i]}${e}`)),H_[i][e]}let CW=()=>Date.now(),PW="system",TW=null,IW=null,MW=null,AW=60,DW,kW=null;class Dr{static get now(){return CW}static set now(e){CW=e}static set defaultZone(e){PW=e}static get defaultZone(){return q0(PW,CM.instance)}static get defaultLocale(){return TW}static set defaultLocale(e){TW=e}static get defaultNumberingSystem(){return IW}static set defaultNumberingSystem(e){IW=e}static get defaultOutputCalendar(){return MW}static set defaultOutputCalendar(e){MW=e}static get defaultWeekSettings(){return kW}static set defaultWeekSettings(e){kW=lO(e)}static get twoDigitCutoffYear(){return AW}static set twoDigitCutoffYear(e){AW=e%100}static get throwOnInvalid(){return DW}static set throwOnInvalid(e){DW=e}static resetCaches(){on.resetCache(),Ru.resetCache(),hi.resetCache(),YIe()}}class Vh{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Sle=[0,31,59,90,120,151,181,212,243,273,304,334],Ele=[0,31,60,91,121,152,182,213,244,274,305,335];function kc(t,e){return new Vh("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Wq(t,e,i){const s=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const n=s.getUTCDay();return n===0?7:n}function Cle(t,e,i){return i+(bC(t)?Ele:Sle)[e-1]}function Ple(t,e){const i=bC(t)?Ele:Sle,s=i.findIndex(r=>r<e),n=e-i[s];return{month:s+1,day:n}}function Zq(t,e){return(t-e+7)%7+1}function zI(t,e=4,i=1){const{year:s,month:n,day:r}=t,o=Cle(s,n,r),l=Zq(Wq(s,n,r),i);let c=Math.floor((o-l+14-e)/7),f;return c<1?(f=s-1,c=uE(f,e,i)):c>uE(s,e,i)?(f=s+1,c=1):f=s,{weekYear:f,weekNumber:c,weekday:l,...MM(t)}}function NW(t,e=4,i=1){const{weekYear:s,weekNumber:n,weekday:r}=t,o=Zq(Wq(s,1,e),i),l=Bb(s);let c=n*7+r-o-7+e,f;c<1?(f=s-1,c+=Bb(f)):c>l?(f=s+1,c-=Bb(s)):f=s;const{month:y,day:_}=Ple(f,c);return{year:f,month:y,day:_,...MM(t)}}function Z8(t){const{year:e,month:i,day:s}=t,n=Cle(e,i,s);return{year:e,ordinal:n,...MM(t)}}function $W(t){const{year:e,ordinal:i}=t,{month:s,day:n}=Ple(e,i);return{year:e,month:s,day:n,...MM(t)}}function OW(t,e){if(!Ri(t.localWeekday)||!Ri(t.localWeekNumber)||!Ri(t.localWeekYear)){if(!Ri(t.weekday)||!Ri(t.weekNumber)||!Ri(t.weekYear))throw new Mb("Cannot mix locale-based week fields with ISO-based week fields");return Ri(t.localWeekday)||(t.weekday=t.localWeekday),Ri(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Ri(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function XIe(t,e=4,i=1){const s=PM(t.weekYear),n=Nc(t.weekNumber,1,uE(t.weekYear,e,i)),r=Nc(t.weekday,1,7);return s?n?r?!1:kc("weekday",t.weekday):kc("week",t.weekNumber):kc("weekYear",t.weekYear)}function WIe(t){const e=PM(t.year),i=Nc(t.ordinal,1,Bb(t.year));return e?i?!1:kc("ordinal",t.ordinal):kc("year",t.year)}function Tle(t){const e=PM(t.year),i=Nc(t.month,1,12),s=Nc(t.day,1,qI(t.year,t.month));return e?i?s?!1:kc("day",t.day):kc("month",t.month):kc("year",t.year)}function Ile(t){const{hour:e,minute:i,second:s,millisecond:n}=t,r=Nc(e,0,23)||e===24&&i===0&&s===0&&n===0,o=Nc(i,0,59),l=Nc(s,0,59),c=Nc(n,0,999);return r?o?l?c?!1:kc("millisecond",n):kc("second",s):kc("minute",i):kc("hour",e)}function Ri(t){return typeof t>"u"}function ag(t){return typeof t=="number"}function PM(t){return typeof t=="number"&&t%1===0}function ZIe(t){return typeof t=="string"}function KIe(t){return Object.prototype.toString.call(t)==="[object Date]"}function Mle(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Ale(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function JIe(t){return Array.isArray(t)?t:[t]}function RW(t,e,i){if(t.length!==0)return t.reduce((s,n)=>{const r=[e(n),n];return s&&i(s[0],r[0])===s[0]?s:r},null)[1]}function QIe(t,e){return e.reduce((i,s)=>(i[s]=t[s],i),{})}function w2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lO(t){if(t==null)return null;if(typeof t!="object")throw new ja("Week settings must be an object");if(!Nc(t.firstDay,1,7)||!Nc(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Nc(e,1,7)))throw new ja("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Nc(t,e,i){return PM(t)&&t>=e&&t<=i}function e6e(t,e){return t-e*Math.floor(t/e)}function to(t,e=2){const i=t<0;let s;return i?s="-"+(""+-t).padStart(e,"0"):s=(""+t).padStart(e,"0"),s}function D0(t){if(!(Ri(t)||t===null||t===""))return parseInt(t,10)}function w1(t){if(!(Ri(t)||t===null||t===""))return parseFloat(t)}function Kq(t){if(!(Ri(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function Jq(t,e,i=!1){const s=10**e;return(i?Math.trunc:Math.round)(t*s)/s}function bC(t){return t%4===0&&(t%100!==0||t%400===0)}function Bb(t){return bC(t)?366:365}function qI(t,e){const i=e6e(e-1,12)+1,s=t+(e-i)/12;return i===2?bC(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function TM(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function LW(t,e,i){return-Zq(Wq(t,1,e),i)+e-1}function uE(t,e=4,i=1){const s=LW(t,e,i),n=LW(t+1,e,i);return(Bb(t)-s+n)/7}function uO(t){return t>99?t:t>Dr.twoDigitCutoffYear?1900+t:2e3+t}function Dle(t,e,i,s=null){const n=new Date(t),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(r.timeZone=s);const o={timeZoneName:e,...r},l=new Intl.DateTimeFormat(i,o).formatToParts(n).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function IM(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const s=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-s:s;return i*60+n}function kle(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ja(`Invalid unit value ${t}`);return e}function VI(t,e){const i={};for(const s in t)if(w2(t,s)){const n=t[s];if(n==null)continue;i[e(s)]=kle(n)}return i}function wS(t,e){const i=Math.trunc(Math.abs(t/60)),s=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${to(i,2)}:${to(s,2)}`;case"narrow":return`${n}${i}${s>0?`:${s}`:""}`;case"techie":return`${n}${to(i,2)}${to(s,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function MM(t){return QIe(t,["hour","minute","second","millisecond"])}const t6e=["January","February","March","April","May","June","July","August","September","October","November","December"],Nle=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i6e=["J","F","M","A","M","J","J","A","S","O","N","D"];function $le(t){switch(t){case"narrow":return[...i6e];case"short":return[...Nle];case"long":return[...t6e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Ole=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Rle=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],s6e=["M","T","W","T","F","S","S"];function Lle(t){switch(t){case"narrow":return[...s6e];case"short":return[...Rle];case"long":return[...Ole];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Fle=["AM","PM"],n6e=["Before Christ","Anno Domini"],r6e=["BC","AD"],o6e=["B","A"];function zle(t){switch(t){case"narrow":return[...o6e];case"short":return[...r6e];case"long":return[...n6e];default:return null}}function a6e(t){return Fle[t.hour<12?0:1]}function l6e(t,e){return Lle(e)[t.weekday-1]}function u6e(t,e){return $le(e)[t.month-1]}function c6e(t,e){return zle(e)[t.year<0?0:1]}function h6e(t,e,i="always",s=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&r){const _=t==="days";switch(e){case 1:return _?"tomorrow":`next ${n[t][0]}`;case-1:return _?"yesterday":`last ${n[t][0]}`;case 0:return _?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,f=n[t],y=s?c?f[1]:f[2]||f[1]:c?n[t][0]:t;return o?`${l} ${y} ago`:`in ${l} ${y}`}function FW(t,e){let i="";for(const s of t)s.literal?i+=s.val:i+=e(s.val);return i}const d6e={D:FI,DD:nle,DDD:rle,DDDD:ole,t:ale,tt:lle,ttt:ule,tttt:cle,T:hle,TT:dle,TTT:fle,TTTT:ple,f:mle,ff:yle,fff:_le,ffff:xle,F:gle,FF:vle,FFF:ble,FFFF:wle};class Ya{static create(e,i={}){return new Ya(e,i)}static parseFormat(e){let i=null,s="",n=!1;const r=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(s.length>0&&r.push({literal:n||/^\s+$/.test(s),val:s}),i=null,s="",n=!n):n||l===i?s+=l:(s.length>0&&r.push({literal:/^\s+$/.test(s),val:s}),s=l,i=l)}return s.length>0&&r.push({literal:n||/^\s+$/.test(s),val:s}),r}static macroTokenToFormatOpts(e){return d6e[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return to(e,i);const s={...this.opts};return i>0&&(s.padTo=i),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,i){const s=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(S,P)=>this.loc.extract(e,S,P),o=S=>e.isOffsetFixed&&e.offset===0&&S.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,S.format):"",l=()=>s?a6e(e):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(S,P)=>s?u6e(e,S):r(P?{month:S}:{month:S,day:"numeric"},"month"),f=(S,P)=>s?l6e(e,S):r(P?{weekday:S}:{weekday:S,month:"long",day:"numeric"},"weekday"),y=S=>{const P=Ya.macroTokenToFormatOpts(S);return P?this.formatWithSystemDefault(e,P):S},_=S=>s?c6e(e,S):r({era:S},"era"),x=S=>{switch(S){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return n?r({day:"numeric"},"day"):this.num(e.day);case"dd":return n?r({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return n?r({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?r({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return n?r({month:"numeric"},"month"):this.num(e.month);case"MM":return n?r({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return n?r({year:"numeric"},"year"):this.num(e.year);case"yy":return n?r({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?r({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?r({year:"numeric"},"year"):this.num(e.year,6);case"G":return _("short");case"GG":return _("long");case"GGGGG":return _("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return y(S)}};return FW(Ya.parseFormat(i),x)}formatDurationFromString(e,i){const s=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=c=>f=>{const y=s(f);return y?this.num(c.get(y),f.length):f},r=Ya.parseFormat(i),o=r.reduce((c,{literal:f,val:y})=>f?c:c.concat(y),[]),l=e.shiftTo(...o.map(s).filter(c=>c));return FW(r,n(l))}}const qle=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ox(...t){const e=t.reduce((i,s)=>i+s.source,"");return RegExp(`^${e}$`)}function ax(...t){return e=>t.reduce(([i,s,n],r)=>{const[o,l,c]=r(e,n);return[{...i,...o},l||s,c]},[{},null,1]).slice(0,2)}function lx(t,...e){if(t==null)return[null,null];for(const[i,s]of e){const n=i.exec(t);if(n)return s(n)}return[null,null]}function Vle(...t){return(e,i)=>{const s={};let n;for(n=0;n<t.length;n++)s[t[n]]=D0(e[i+n]);return[s,null,i+n]}}const Gle=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,f6e=`(?:${Gle.source}?(?:\\[(${qle.source})\\])?)?`,Qq=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,jle=RegExp(`${Qq.source}${f6e}`),eV=RegExp(`(?:T${jle.source})?`),p6e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,m6e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,g6e=/(\d{4})-?(\d{3})/,y6e=Vle("weekYear","weekNumber","weekDay"),v6e=Vle("year","ordinal"),_6e=/(\d{4})-(\d\d)-(\d\d)/,Ble=RegExp(`${Qq.source} ?(?:${Gle.source}|(${qle.source}))?`),b6e=RegExp(`(?: ${Ble.source})?`);function Hb(t,e,i){const s=t[e];return Ri(s)?i:D0(s)}function x6e(t,e){return[{year:Hb(t,e),month:Hb(t,e+1,1),day:Hb(t,e+2,1)},null,e+3]}function ux(t,e){return[{hours:Hb(t,e,0),minutes:Hb(t,e+1,0),seconds:Hb(t,e+2,0),milliseconds:Kq(t[e+3])},null,e+4]}function xC(t,e){const i=!t[e]&&!t[e+1],s=IM(t[e+1],t[e+2]),n=i?null:Bo.instance(s);return[{},n,e+3]}function wC(t,e){const i=t[e]?Ru.create(t[e]):null;return[{},i,e+1]}const w6e=RegExp(`^T?${Qq.source}$`),S6e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function E6e(t){const[e,i,s,n,r,o,l,c,f]=t,y=e[0]==="-",_=c&&c[0]==="-",x=(S,P=!1)=>S!==void 0&&(P||S&&y)?-S:S;return[{years:x(w1(i)),months:x(w1(s)),weeks:x(w1(n)),days:x(w1(r)),hours:x(w1(o)),minutes:x(w1(l)),seconds:x(w1(c),c==="-0"),milliseconds:x(Kq(f),_)}]}const C6e={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function tV(t,e,i,s,n,r,o){const l={year:e.length===2?uO(D0(e)):D0(e),month:Nle.indexOf(i)+1,day:D0(s),hour:D0(n),minute:D0(r)};return o&&(l.second=D0(o)),t&&(l.weekday=t.length>3?Ole.indexOf(t)+1:Rle.indexOf(t)+1),l}const P6e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function T6e(t){const[,e,i,s,n,r,o,l,c,f,y,_]=t,x=tV(e,n,s,i,r,o,l);let S;return c?S=C6e[c]:f?S=0:S=IM(y,_),[x,new Bo(S)]}function I6e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const M6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,A6e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,D6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function zW(t){const[,e,i,s,n,r,o,l]=t;return[tV(e,n,s,i,r,o,l),Bo.utcInstance]}function k6e(t){const[,e,i,s,n,r,o,l]=t;return[tV(e,l,i,s,n,r,o),Bo.utcInstance]}const N6e=ox(p6e,eV),$6e=ox(m6e,eV),O6e=ox(g6e,eV),R6e=ox(jle),Hle=ax(x6e,ux,xC,wC),L6e=ax(y6e,ux,xC,wC),F6e=ax(v6e,ux,xC,wC),z6e=ax(ux,xC,wC);function q6e(t){return lx(t,[N6e,Hle],[$6e,L6e],[O6e,F6e],[R6e,z6e])}function V6e(t){return lx(I6e(t),[P6e,T6e])}function G6e(t){return lx(t,[M6e,zW],[A6e,zW],[D6e,k6e])}function j6e(t){return lx(t,[S6e,E6e])}const B6e=ax(ux);function H6e(t){return lx(t,[w6e,B6e])}const U6e=ox(_6e,b6e),Y6e=ox(Ble),X6e=ax(ux,xC,wC);function W6e(t){return lx(t,[U6e,Hle],[Y6e,X6e])}const qW="Invalid Duration",Ule={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Z6e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Ule},oc=146097/400,E_=146097/4800,K6e={years:{quarters:4,months:12,weeks:oc/7,days:oc,hours:oc*24,minutes:oc*24*60,seconds:oc*24*60*60,milliseconds:oc*24*60*60*1e3},quarters:{months:3,weeks:oc/28,days:oc/4,hours:oc*24/4,minutes:oc*24*60/4,seconds:oc*24*60*60/4,milliseconds:oc*24*60*60*1e3/4},months:{weeks:E_/7,days:E_,hours:E_*24,minutes:E_*24*60,seconds:E_*24*60*60,milliseconds:E_*24*60*60*1e3},...Ule},Ey=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],J6e=Ey.slice(0).reverse();function Jm(t,e,i=!1){const s={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Ds(s)}function Yle(t,e){let i=e.milliseconds??0;for(const s of J6e.slice(1))e[s]&&(i+=e[s]*t[s].milliseconds);return i}function VW(t,e){const i=Yle(t,e)<0?-1:1;Ey.reduceRight((s,n)=>{if(Ri(e[n]))return s;if(s){const r=e[s]*i,o=t[n][s],l=Math.floor(r/o);e[n]+=l*i,e[s]-=l*o*i}return n},null),Ey.reduce((s,n)=>{if(Ri(e[n]))return s;if(s){const r=e[s]%1;e[s]-=r,e[n]+=r*t[s][n]}return n},null)}function Q6e(t){const e={};for(const[i,s]of Object.entries(t))s!==0&&(e[i]=s);return e}class Ds{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let s=i?K6e:Z6e;e.matrix&&(s=e.matrix),this.values=e.values,this.loc=e.loc||on.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(e,i){return Ds.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new ja(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ds({values:VI(e,Ds.normalizeUnit),loc:on.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(ag(e))return Ds.fromMillis(e);if(Ds.isDuration(e))return e;if(typeof e=="object")return Ds.fromObject(e);throw new ja(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[s]=j6e(e);return s?Ds.fromObject(s,i):Ds.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[s]=H6e(e);return s?Ds.fromObject(s,i):Ds.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new ja("need to specify a reason the Duration is invalid");const s=e instanceof Vh?e:new Vh(e,i);if(Dr.throwOnInvalid)throw new SIe(s);return new Ds({invalid:s})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new sle(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const s={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Ya.create(this.loc,s).formatDurationFromString(this,e):qW}toHuman(e={}){if(!this.isValid)return qW;const i=Ey.map(s=>{const n=this.values[s];return Ri(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(n)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Jq(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},hi.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Yle(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Ds.fromDurationLike(e),s={};for(const n of Ey)(w2(i.values,n)||w2(this.values,n))&&(s[n]=i.get(n)+this.get(n));return Jm(this,{values:s},!0)}minus(e){if(!this.isValid)return this;const i=Ds.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const s of Object.keys(this.values))i[s]=kle(e(this.values[s],s));return Jm(this,{values:i},!0)}get(e){return this[Ds.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...VI(e,Ds.normalizeUnit)};return Jm(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:s,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:s};return Jm(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return VW(this.matrix,e),Jm(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Q6e(this.normalize().shiftToAll().toObject());return Jm(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Ds.normalizeUnit(o));const i={},s={},n=this.toObject();let r;for(const o of Ey)if(e.indexOf(o)>=0){r=o;let l=0;for(const f in s)l+=this.matrix[f][o]*s[f],s[f]=0;ag(n[o])&&(l+=n[o]);const c=Math.trunc(l);i[o]=c,s[o]=(l*1e3-c*1e3)/1e3}else ag(n[o])&&(s[o]=n[o]);for(const o in s)s[o]!==0&&(i[r]+=o===r?s[o]:s[o]/this.matrix[r][o]);return VW(this.matrix,i),Jm(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Jm(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(s,n){return s===void 0||s===0?n===void 0||n===0:s===n}for(const s of Ey)if(!i(this.values[s],e.values[s]))return!1;return!0}}const C_="Invalid Interval";function eMe(t,e){return!t||!t.isValid?Ar.invalid("missing or invalid start"):!e||!e.isValid?Ar.invalid("missing or invalid end"):e<t?Ar.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Ar{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new ja("need to specify a reason the Interval is invalid");const s=e instanceof Vh?e:new Vh(e,i);if(Dr.throwOnInvalid)throw new wIe(s);return new Ar({invalid:s})}static fromDateTimes(e,i){const s=Nw(e),n=Nw(i),r=eMe(s,n);return r??new Ar({start:s,end:n})}static after(e,i){const s=Ds.fromDurationLike(i),n=Nw(e);return Ar.fromDateTimes(n,n.plus(s))}static before(e,i){const s=Ds.fromDurationLike(i),n=Nw(e);return Ar.fromDateTimes(n.minus(s),n)}static fromISO(e,i){const[s,n]=(e||"").split("/",2);if(s&&n){let r,o;try{r=hi.fromISO(s,i),o=r.isValid}catch{o=!1}let l,c;try{l=hi.fromISO(n,i),c=l.isValid}catch{c=!1}if(o&&c)return Ar.fromDateTimes(r,l);if(o){const f=Ds.fromISO(n,i);if(f.isValid)return Ar.after(r,f)}else if(c){const f=Ds.fromISO(s,i);if(f.isValid)return Ar.before(l,f)}}return Ar.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const s=this.start.startOf(e,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:s.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(s,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Ar.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(Nw).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),s=[];let{s:n}=this,r=0;for(;n<this.e;){const o=i[r]||this.e,l=+o>+this.e?this.e:o;s.push(Ar.fromDateTimes(n,l)),n=l,r+=1}return s}splitBy(e){const i=Ds.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s}=this,n=1,r;const o=[];for(;s<this.e;){const l=this.start.plus(i.mapUnits(c=>c*n));r=+l>+this.e?this.e:l,o.push(Ar.fromDateTimes(s,r)),s=r,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,s=this.e<e.e?this.e:e.e;return i>=s?null:Ar.fromDateTimes(i,s)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,s=this.e>e.e?this.e:e.e;return Ar.fromDateTimes(i,s)}static merge(e){const[i,s]=e.sort((n,r)=>n.s-r.s).reduce(([n,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[n,r.union(o)]:[n.concat([r]),o]:[n,o],[[],null]);return s&&i.push(s),i}static xor(e){let i=null,s=0;const n=[],r=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),o=Array.prototype.concat(...r),l=o.sort((c,f)=>c.time-f.time);for(const c of l)s+=c.type==="s"?1:-1,s===1?i=c.time:(i&&+i!=+c.time&&n.push(Ar.fromDateTimes(i,c.time)),i=null);return Ar.merge(n)}difference(...e){return Ar.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:C_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=FI,i={}){return this.isValid?Ya.create(this.s.loc.clone(i),e).formatInterval(this):C_}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:C_}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:C_}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:C_}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:C_}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Ds.invalid(this.invalidReason)}mapEndpoints(e){return Ar.fromDateTimes(e(this.s),e(this.e))}}class UP{static hasDST(e=Dr.defaultZone){const i=hi.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Ru.isValidZone(e)}static normalizeZone(e){return q0(e,Dr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||on.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||on.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||on.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:s=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||on.create(i,s,r)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||on.create(i,s,r)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:s=null,locObj:n=null}={}){return(n||on.create(i,s,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:n=null}={}){return(n||on.create(i,s,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return on.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return on.create(i,null,"gregory").eras(e)}static features(){return{relative:Mle(),localeWeek:Ale()}}}function GW(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=i(e)-i(t);return Math.floor(Ds.fromMillis(s).as("days"))}function tMe(t,e,i){const s=[["years",(c,f)=>f.year-c.year],["quarters",(c,f)=>f.quarter-c.quarter+(f.year-c.year)*4],["months",(c,f)=>f.month-c.month+(f.year-c.year)*12],["weeks",(c,f)=>{const y=GW(c,f);return(y-y%7)/7}],["days",GW]],n={},r=t;let o,l;for(const[c,f]of s)i.indexOf(c)>=0&&(o=c,n[c]=f(t,e),l=r.plus(n),l>e?(n[c]--,t=r.plus(n),t>e&&(l=t,n[c]--,t=r.plus(n))):t=l);return[t,n,l,o]}function iMe(t,e,i,s){let[n,r,o,l]=tMe(t,e,i);const c=e-n,f=i.filter(_=>["hours","minutes","seconds","milliseconds"].indexOf(_)>=0);f.length===0&&(o<e&&(o=n.plus({[l]:1})),o!==n&&(r[l]=(r[l]||0)+c/(o-n)));const y=Ds.fromObject(r,s);return f.length>0?Ds.fromMillis(c,s).shiftTo(...f).plus(y):y}const sMe="missing Intl.DateTimeFormat.formatToParts support";function Ws(t,e=i=>i){return{regex:t,deser:([i])=>e(UIe(i))}}const nMe=" ",Xle=`[ ${nMe}]`,Wle=new RegExp(Xle,"g");function rMe(t){return t.replace(/\./g,"\\.?").replace(Wle,Xle)}function jW(t){return t.replace(/\./g,"").replace(Wle," ").toLowerCase()}function uh(t,e){return t===null?null:{regex:RegExp(t.map(rMe).join("|")),deser:([i])=>t.findIndex(s=>jW(i)===jW(s))+e}}function BW(t,e){return{regex:t,deser:([,i,s])=>IM(i,s),groups:e}}function YP(t){return{regex:t,deser:([e])=>e}}function oMe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function aMe(t,e){const i=lh(e),s=lh(e,"{2}"),n=lh(e,"{3}"),r=lh(e,"{4}"),o=lh(e,"{6}"),l=lh(e,"{1,2}"),c=lh(e,"{1,3}"),f=lh(e,"{1,6}"),y=lh(e,"{1,9}"),_=lh(e,"{2,4}"),x=lh(e,"{4,6}"),S=k=>({regex:RegExp(oMe(k.val)),deser:([$])=>$,literal:!0}),A=(k=>{if(t.literal)return S(k);switch(k.val){case"G":return uh(e.eras("short"),0);case"GG":return uh(e.eras("long"),0);case"y":return Ws(f);case"yy":return Ws(_,uO);case"yyyy":return Ws(r);case"yyyyy":return Ws(x);case"yyyyyy":return Ws(o);case"M":return Ws(l);case"MM":return Ws(s);case"MMM":return uh(e.months("short",!0),1);case"MMMM":return uh(e.months("long",!0),1);case"L":return Ws(l);case"LL":return Ws(s);case"LLL":return uh(e.months("short",!1),1);case"LLLL":return uh(e.months("long",!1),1);case"d":return Ws(l);case"dd":return Ws(s);case"o":return Ws(c);case"ooo":return Ws(n);case"HH":return Ws(s);case"H":return Ws(l);case"hh":return Ws(s);case"h":return Ws(l);case"mm":return Ws(s);case"m":return Ws(l);case"q":return Ws(l);case"qq":return Ws(s);case"s":return Ws(l);case"ss":return Ws(s);case"S":return Ws(c);case"SSS":return Ws(n);case"u":return YP(y);case"uu":return YP(l);case"uuu":return Ws(i);case"a":return uh(e.meridiems(),0);case"kkkk":return Ws(r);case"kk":return Ws(_,uO);case"W":return Ws(l);case"WW":return Ws(s);case"E":case"c":return Ws(i);case"EEE":return uh(e.weekdays("short",!1),1);case"EEEE":return uh(e.weekdays("long",!1),1);case"ccc":return uh(e.weekdays("short",!0),1);case"cccc":return uh(e.weekdays("long",!0),1);case"Z":case"ZZ":return BW(new RegExp(`([+-]${l.source})(?::(${s.source}))?`),2);case"ZZZ":return BW(new RegExp(`([+-]${l.source})(${s.source})?`),2);case"z":return YP(/[a-z_+-/]{1,256}?/i);case" ":return YP(/[^\S\n\r]/);default:return S(k)}})(t)||{invalidReason:sMe};return A.token=t,A}const lMe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function uMe(t,e,i){const{type:s,value:n}=t;if(s==="literal"){const c=/^\s+$/.test(n);return{literal:!c,val:c?" ":n}}const r=e[s];let o=s;s==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let l=lMe[o];if(typeof l=="object"&&(l=l[r]),l)return{literal:!1,val:l}}function cMe(t){return[`^${t.map(i=>i.regex).reduce((i,s)=>`${i}(${s.source})`,"")}$`,t]}function hMe(t,e,i){const s=t.match(e);if(s){const n={};let r=1;for(const o in i)if(w2(i,o)){const l=i[o],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(n[l.token.val[0]]=l.deser(s.slice(r,r+c))),r+=c}return[s,n]}else return[s,{}]}function dMe(t){const e=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,s;return Ri(t.z)||(i=Ru.create(t.z)),Ri(t.Z)||(i||(i=new Bo(t.Z)),s=t.Z),Ri(t.q)||(t.M=(t.q-1)*3+1),Ri(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Ri(t.u)||(t.S=Kq(t.u)),[Object.keys(t).reduce((r,o)=>{const l=e(o);return l&&(r[l]=t[o]),r},{}),i,s]}let K8=null;function fMe(){return K8||(K8=hi.fromMillis(1555555555555)),K8}function pMe(t,e){if(t.literal)return t;const i=Ya.macroTokenToFormatOpts(t.val),s=Qle(i,e);return s==null||s.includes(void 0)?t:s}function Zle(t,e){return Array.prototype.concat(...t.map(i=>pMe(i,e)))}class Kle{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=Zle(Ya.parseFormat(i),e),this.units=this.tokens.map(s=>aMe(s,e)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,n]=cMe(this.units);this.regex=RegExp(s,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,s]=hMe(e,this.regex,this.handlers),[n,r,o]=s?dMe(s):[null,null,void 0];if(w2(s,"a")&&w2(s,"H"))throw new Mb("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:s,result:n,zone:r,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Jle(t,e,i){return new Kle(t,i).explainFromTokens(e)}function mMe(t,e,i){const{result:s,zone:n,specificOffset:r,invalidReason:o}=Jle(t,e,i);return[s,n,r,o]}function Qle(t,e){if(!t)return null;const s=Ya.create(e,t).dtFormatter(fMe()),n=s.formatToParts(),r=s.resolvedOptions();return n.map(o=>uMe(o,t,r))}const J8="Invalid DateTime",gMe=864e13;function c3(t){return new Vh("unsupported zone",`the zone "${t.name}" is not supported`)}function Q8(t){return t.weekData===null&&(t.weekData=zI(t.c)),t.weekData}function ek(t){return t.localWeekData===null&&(t.localWeekData=zI(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function S1(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new hi({...i,...e,old:i})}function eue(t,e,i){let s=t-e*60*1e3;const n=i.offset(s);if(e===n)return[s,e];s-=(n-e)*60*1e3;const r=i.offset(s);return n===r?[s,n]:[t-Math.min(n,r)*60*1e3,Math.max(n,r)]}function XP(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function ET(t,e,i){return eue(TM(t),e,i)}function HW(t,e){const i=t.o,s=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,r={...t.c,year:s,month:n,day:Math.min(t.c.day,qI(s,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Ds.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=TM(r);let[c,f]=eue(l,i,t.zone);return o!==0&&(c+=o,f=t.zone.offset(c)),{ts:c,o:f}}function P_(t,e,i,s,n,r){const{setZone:o,zone:l}=i;if(t&&Object.keys(t).length!==0||e){const c=e||l,f=hi.fromObject(t,{...i,zone:c,specificOffset:r});return o?f:f.setZone(l)}else return hi.invalid(new Vh("unparsable",`the input "${n}" can't be parsed as ${s}`))}function WP(t,e,i=!0){return t.isValid?Ya.create(on.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function tk(t,e){const i=t.c.year>9999||t.c.year<0;let s="";return i&&t.c.year>=0&&(s+="+"),s+=to(t.c.year,i?6:4),e?(s+="-",s+=to(t.c.month),s+="-",s+=to(t.c.day)):(s+=to(t.c.month),s+=to(t.c.day)),s}function UW(t,e,i,s,n,r){let o=to(t.c.hour);return e?(o+=":",o+=to(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=to(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=to(t.c.second),(t.c.millisecond!==0||!s)&&(o+=".",o+=to(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!r?o+="Z":t.o<0?(o+="-",o+=to(Math.trunc(-t.o/60)),o+=":",o+=to(Math.trunc(-t.o%60))):(o+="+",o+=to(Math.trunc(t.o/60)),o+=":",o+=to(Math.trunc(t.o%60)))),r&&(o+="["+t.zone.ianaName+"]"),o}const tue={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yMe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},vMe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},iue=["year","month","day","hour","minute","second","millisecond"],_Me=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],bMe=["year","ordinal","hour","minute","second","millisecond"];function xMe(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new sle(t);return e}function YW(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return xMe(t)}}function wMe(t){return PT[t]||(CT===void 0&&(CT=Dr.now()),PT[t]=t.offset(CT)),PT[t]}function XW(t,e){const i=q0(e.zone,Dr.defaultZone);if(!i.isValid)return hi.invalid(c3(i));const s=on.fromObject(e);let n,r;if(Ri(t.year))n=Dr.now();else{for(const c of iue)Ri(t[c])&&(t[c]=tue[c]);const o=Tle(t)||Ile(t);if(o)return hi.invalid(o);const l=wMe(i);[n,r]=ET(t,l,i)}return new hi({ts:n,zone:i,loc:s,o:r})}function WW(t,e,i){const s=Ri(i.round)?!0:i.round,n=(o,l)=>(o=Jq(o,s||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,l)),r=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return n(r(i.unit),i.unit);for(const o of i.units){const l=r(o);if(Math.abs(l)>=1)return n(l,o)}return n(t>e?-0:0,i.units[i.units.length-1])}function ZW(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let CT,PT={};class hi{constructor(e){const i=e.zone||Dr.defaultZone;let s=e.invalid||(Number.isNaN(e.ts)?new Vh("invalid input"):null)||(i.isValid?null:c3(i));this.ts=Ri(e.ts)?Dr.now():e.ts;let n=null,r=null;if(!s)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,r]=[e.old.c,e.old.o];else{const l=ag(e.o)&&!e.old?e.o:i.offset(this.ts);n=XP(this.ts,l),s=Number.isNaN(n.year)?new Vh("invalid input"):null,n=s?null:n,r=s?null:l}this._zone=i,this.loc=e.loc||on.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=n,this.o=r,this.isLuxonDateTime=!0}static now(){return new hi({})}static local(){const[e,i]=ZW(arguments),[s,n,r,o,l,c,f]=i;return XW({year:s,month:n,day:r,hour:o,minute:l,second:c,millisecond:f},e)}static utc(){const[e,i]=ZW(arguments),[s,n,r,o,l,c,f]=i;return e.zone=Bo.utcInstance,XW({year:s,month:n,day:r,hour:o,minute:l,second:c,millisecond:f},e)}static fromJSDate(e,i={}){const s=KIe(e)?e.valueOf():NaN;if(Number.isNaN(s))return hi.invalid("invalid input");const n=q0(i.zone,Dr.defaultZone);return n.isValid?new hi({ts:s,zone:n,loc:on.fromObject(i)}):hi.invalid(c3(n))}static fromMillis(e,i={}){if(ag(e))return e<-864e13||e>gMe?hi.invalid("Timestamp out of range"):new hi({ts:e,zone:q0(i.zone,Dr.defaultZone),loc:on.fromObject(i)});throw new ja(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(ag(e))return new hi({ts:e*1e3,zone:q0(i.zone,Dr.defaultZone),loc:on.fromObject(i)});throw new ja("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const s=q0(i.zone,Dr.defaultZone);if(!s.isValid)return hi.invalid(c3(s));const n=on.fromObject(i),r=VI(e,YW),{minDaysInFirstWeek:o,startOfWeek:l}=OW(r,n),c=Dr.now(),f=Ri(i.specificOffset)?s.offset(c):i.specificOffset,y=!Ri(r.ordinal),_=!Ri(r.year),x=!Ri(r.month)||!Ri(r.day),S=_||x,P=r.weekYear||r.weekNumber;if((S||y)&&P)throw new Mb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&y)throw new Mb("Can't mix ordinal dates with month/day");const A=P||r.weekday&&!S;let k,$,F=XP(c,f);A?(k=_Me,$=yMe,F=zI(F,o,l)):y?(k=bMe,$=vMe,F=Z8(F)):(k=iue,$=tue);let G=!1;for(const oe of k){const pe=r[oe];Ri(pe)?G?r[oe]=$[oe]:r[oe]=F[oe]:G=!0}const V=A?XIe(r,o,l):y?WIe(r):Tle(r),B=V||Ile(r);if(B)return hi.invalid(B);const W=A?NW(r,o,l):y?$W(r):r,[J,re]=ET(W,f,s),se=new hi({ts:J,zone:s,o:re,loc:n});return r.weekday&&S&&e.weekday!==se.weekday?hi.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${se.toISO()}`):se.isValid?se:hi.invalid(se.invalid)}static fromISO(e,i={}){const[s,n]=q6e(e);return P_(s,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[s,n]=V6e(e);return P_(s,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[s,n]=G6e(e);return P_(s,n,i,"HTTP",i)}static fromFormat(e,i,s={}){if(Ri(e)||Ri(i))throw new ja("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:r=null}=s,o=on.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0}),[l,c,f,y]=mMe(o,e,i);return y?hi.invalid(y):P_(l,c,s,`format ${i}`,e,f)}static fromString(e,i,s={}){return hi.fromFormat(e,i,s)}static fromSQL(e,i={}){const[s,n]=W6e(e);return P_(s,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new ja("need to specify a reason the DateTime is invalid");const s=e instanceof Vh?e:new Vh(e,i);if(Dr.throwOnInvalid)throw new xIe(s);return new hi({invalid:s})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const s=Qle(e,on.fromObject(i));return s?s.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return Zle(Ya.parseFormat(e),on.fromObject(i)).map(n=>n.val).join("")}static resetCache(){CT=void 0,PT={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Q8(this).weekYear:NaN}get weekNumber(){return this.isValid?Q8(this).weekNumber:NaN}get weekday(){return this.isValid?Q8(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?ek(this).weekday:NaN}get localWeekNumber(){return this.isValid?ek(this).weekNumber:NaN}get localWeekYear(){return this.isValid?ek(this).weekYear:NaN}get ordinal(){return this.isValid?Z8(this.c).ordinal:NaN}get monthShort(){return this.isValid?UP.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?UP.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?UP.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?UP.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,s=TM(this.c),n=this.zone.offset(s-e),r=this.zone.offset(s+e),o=this.zone.offset(s-n*i),l=this.zone.offset(s-r*i);if(o===l)return[this];const c=s-o*i,f=s-l*i,y=XP(c,o),_=XP(f,l);return y.hour===_.hour&&y.minute===_.minute&&y.second===_.second&&y.millisecond===_.millisecond?[S1(this,{ts:c}),S1(this,{ts:f})]:[this]}get isInLeapYear(){return bC(this.year)}get daysInMonth(){return qI(this.year,this.month)}get daysInYear(){return this.isValid?Bb(this.year):NaN}get weeksInWeekYear(){return this.isValid?uE(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?uE(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:s,calendar:n}=Ya.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:s,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(Bo.instance(e),i)}toLocal(){return this.setZone(Dr.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:s=!1}={}){if(e=q0(e,Dr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||s){const r=e.offset(this.ts),o=this.toObject();[n]=ET(o,r,e)}return S1(this,{ts:n,zone:e})}else return hi.invalid(c3(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:s}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:s});return S1(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=VI(e,YW),{minDaysInFirstWeek:s,startOfWeek:n}=OW(i,this.loc),r=!Ri(i.weekYear)||!Ri(i.weekNumber)||!Ri(i.weekday),o=!Ri(i.ordinal),l=!Ri(i.year),c=!Ri(i.month)||!Ri(i.day),f=l||c,y=i.weekYear||i.weekNumber;if((f||o)&&y)throw new Mb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Mb("Can't mix ordinal dates with month/day");let _;r?_=NW({...zI(this.c,s,n),...i},s,n):Ri(i.ordinal)?(_={...this.toObject(),...i},Ri(i.day)&&(_.day=Math.min(qI(_.year,_.month),_.day))):_=$W({...Z8(this.c),...i});const[x,S]=ET(_,this.o,this.zone);return S1(this,{ts:x,o:S})}plus(e){if(!this.isValid)return this;const i=Ds.fromDurationLike(e);return S1(this,HW(this,i))}minus(e){if(!this.isValid)return this;const i=Ds.fromDurationLike(e).negate();return S1(this,HW(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const s={},n=Ds.normalizeUnit(e);switch(n){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(n==="weeks")if(i){const r=this.loc.getStartOfWeek(),{weekday:o}=this;o<r&&(s.weekNumber=this.weekNumber-1),s.weekday=r}else s.weekday=1;if(n==="quarters"){const r=Math.ceil(this.month/3);s.month=(r-1)*3+1}return this.set(s)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Ya.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):J8}toLocaleString(e=FI,i={}){return this.isValid?Ya.create(this.loc.clone(i),e).formatDateTime(this):J8}toLocaleParts(e={}){return this.isValid?Ya.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:s=!1,includeOffset:n=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=tk(this,o);return l+="T",l+=UW(this,o,i,s,n,r),l}toISODate({format:e="extended"}={}){return this.isValid?tk(this,e==="extended"):null}toISOWeekDate(){return WP(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:s=!0,includePrefix:n=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+UW(this,o==="extended",i,e,s,r):null}toRFC2822(){return WP(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return WP(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?tk(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:s=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(s&&(n+=" "),i?n+="z":e&&(n+="ZZ")),WP(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():J8}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",s={}){if(!this.isValid||!e.isValid)return Ds.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...s},r=JIe(i).map(Ds.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,c=o?e:this,f=iMe(l,c,r,n);return o?f.negate():f}diffNow(e="milliseconds",i={}){return this.diff(hi.now(),e,i)}until(e){return this.isValid?Ar.fromDateTimes(this,e):this}hasSame(e,i,s){if(!this.isValid)return!1;const n=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(i,s)<=n&&n<=r.endOf(i,s)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||hi.fromObject({},{zone:this.zone}),s=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],r=e.unit;return Array.isArray(e.unit)&&(n=e.unit,r=void 0),WW(i,this.plus(s),{...e,numeric:"always",units:n,unit:r})}toRelativeCalendar(e={}){return this.isValid?WW(e.base||hi.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(hi.isDateTime))throw new ja("min requires all arguments be DateTimes");return RW(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(hi.isDateTime))throw new ja("max requires all arguments be DateTimes");return RW(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,s={}){const{locale:n=null,numberingSystem:r=null}=s,o=on.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return Jle(o,e,i)}static fromStringExplain(e,i,s={}){return hi.fromFormatExplain(e,i,s)}static buildFormatParser(e,i={}){const{locale:s=null,numberingSystem:n=null}=i,r=on.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return new Kle(r,e)}static fromFormatParser(e,i,s={}){if(Ri(e)||Ri(i))throw new ja("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:r=null}=s,o=on.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});if(!o.equals(i.locale))throw new ja(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:l,zone:c,specificOffset:f,invalidReason:y}=i.explainFromTokens(e);return y?hi.invalid(y):P_(l,c,s,`format ${i.format}`,e,f)}static get DATE_SHORT(){return FI}static get DATE_MED(){return nle}static get DATE_MED_WITH_WEEKDAY(){return EIe}static get DATE_FULL(){return rle}static get DATE_HUGE(){return ole}static get TIME_SIMPLE(){return ale}static get TIME_WITH_SECONDS(){return lle}static get TIME_WITH_SHORT_OFFSET(){return ule}static get TIME_WITH_LONG_OFFSET(){return cle}static get TIME_24_SIMPLE(){return hle}static get TIME_24_WITH_SECONDS(){return dle}static get TIME_24_WITH_SHORT_OFFSET(){return fle}static get TIME_24_WITH_LONG_OFFSET(){return ple}static get DATETIME_SHORT(){return mle}static get DATETIME_SHORT_WITH_SECONDS(){return gle}static get DATETIME_MED(){return yle}static get DATETIME_MED_WITH_SECONDS(){return vle}static get DATETIME_MED_WITH_WEEKDAY(){return CIe}static get DATETIME_FULL(){return _le}static get DATETIME_FULL_WITH_SECONDS(){return ble}static get DATETIME_HUGE(){return xle}static get DATETIME_HUGE_WITH_SECONDS(){return wle}}function Nw(t){if(hi.isDateTime(t))return t;if(t&&t.valueOf&&ag(t.valueOf()))return hi.fromJSDate(t);if(t&&typeof t=="object")return hi.fromObject(t);throw new ja(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const Bp="system",nv="unknown",ff="UTC",SMe=Intl.DateTimeFormat().resolvedOptions().timeZone,EMe="shortOffset";function CMe(t){return"timeZoneIANA"in t}function PMe(t){return t.startsWith("UTC")}function GI(t,e=!1){return{json:{read:{source:t,reader:(i,s)=>s[t]?TT(s[t]):null},write:!!e&&{allowNull:!0,writer(i,s){s[t]=i?TMe(i):null}}}}}function TT(t,e=Bp){return t?CMe(t)?t.timeZoneIANA:IMe(t,e):e}function TMe(t){return{timeZoneIANA:t}}function IMe(t,e=Bp){if(!t||!xW.has(t.timeZone))return e;const i=xW.get(t.timeZone);return PMe(t.timeZone)||t.respectsDaylightSaving?i:MMe(i)}function MMe(t){const e=hi.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Bo.instance(-i).formatOffset(0,"narrow")}`}function Jct(t,e,i,s,n){if(e&&n==="date")return{timeZone:ff,timeZoneName:void 0};const r=s.timeStyle||s.hour,o=i===nv;return{timeZone:o?n==="timestamp-offset"?void 0:t??ff:i,timeZoneName:o&&r?EMe:void 0}}function Qct(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(s=>s.toLowerCase()));return t===Bp||t===nv||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const AMe={year:void 0,month:void 0,day:void 0,weekday:void 0},DMe={hour:void 0,minute:void 0,second:void 0},sue={timeZone:ff},xd={year:"numeric",month:"numeric",day:"numeric"},$w={year:"numeric",month:"long",day:"numeric"},Ow={year:"numeric",month:"short",day:"numeric"},Rw={year:"numeric",month:"long",weekday:"long",day:"numeric"},k0={hour:"numeric",minute:"numeric"},N1={...k0,second:"numeric"},nue={hourCycle:"h23"},Lw={...k0,...nue},Fw={...N1,...nue},rue={"short-date":xd,"short-date-short-time":{...xd,...k0},"short-date-short-time-24":{...xd,...Lw},"short-date-long-time":{...xd,...N1},"short-date-long-time-24":{...xd,...Fw},"short-date-le":xd,"short-date-le-short-time":{...xd,...k0},"short-date-le-short-time-24":{...xd,...Lw},"short-date-le-long-time":{...xd,...N1},"short-date-le-long-time-24":{...xd,...Fw},"long-month-day-year":$w,"long-month-day-year-short-time":{...$w,...k0},"long-month-day-year-short-time-24":{...$w,...Lw},"long-month-day-year-long-time":{...$w,...N1},"long-month-day-year-long-time-24":{...$w,...Fw},"day-short-month-year":Ow,"day-short-month-year-short-time":{...Ow,...k0},"day-short-month-year-short-time-24":{...Ow,...Lw},"day-short-month-year-long-time":{...Ow,...N1},"day-short-month-year-long-time-24":{...Ow,...Fw},"long-date":Rw,"long-date-short-time":{...Rw,...k0},"long-date-short-time-24":{...Rw,...Lw},"long-date-long-time":{...Rw,...N1},"long-date-long-time-24":{...Rw,...Fw},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":k0,"long-time":N1},kMe=wa()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),oue={ar:"ar-u-nu-latn-ca-gregory"};let cO=new WeakMap;const AM=rue["short-date-short-time"];function NMe(t){let e=cO.get(t);if(!e){const i=Au(),s=oue[i]||i,n=iV(t.timeZone??Bp),r={...t,timeZone:n};e=new Intl.DateTimeFormat(s,r),cO.set(t,e)}return e}function ZP(t){return rue[t]}function yg(t,e=AM){return NMe(e).format(t)}function $Me(t,e=AM){return yg(new Date(t),{...e,...sue,...DMe})}function OMe(t,e=AM){return yg(new Date(`1970-01-01T${t}Z`),{...e,...sue,...AMe})}function RMe(t,e=AM){if(e.timeZone)return yg(new Date(t),e);const i=hi.fromISO(t,{setZone:!0}),s=Au(),n=oue[s]??s,r=i.offset===0?ff:e.timeZone,o={...e,timeZone:r};return i.toLocaleString(o,{locale:n})}function iV(t){switch(t){case Bp:return SMe;case nv:return ff;default:return t}}Uq(()=>{cO=new WeakMap});const LMe={ar:"ar-u-nu-latn"};let IT=new WeakMap,aue={};function hO(t){const e=t||aue;if(!IT.has(e)){const i=Au(),s=LMe[Au()]||i;IT.set(e,new Intl.NumberFormat(s,t))}return IT.get(e)}function eht(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function jI(t,e){return Object.is(t,-0)&&(t=0),hO(e).format(t)}function tht(t,e=Au()){var s,n;if(!t)return null;let i=KW.get(e);if(!i){const r=hO().formatToParts(12345.6),o=[...hO({useGrouping:!1}).format(9876543210)].reverse(),l=new Map(o.map((S,P)=>[S,P])),c=new RegExp(`[${(s=r.find(S=>S.type==="group"))==null?void 0:s.value}]`,"g"),f=new RegExp(`[${(n=r.find(S=>S.type==="decimal"))==null?void 0:n.value}]`),y=new RegExp(`[${o.join("")}]`,"g"),_=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,x=/[-\u2212\u2013\u2014\u2015]/g;i=S=>{if((S=S.trim().replaceAll(c,"").replace(f,".").replace(y,A=>String(l.get(A))).replaceAll(_,"").replaceAll(x,"-"))==="")return null;const P=Number(S);return isNaN(P)?null:P},KW.set(e,i)}return i(t)}Uq(()=>{IT=new WeakMap,aue={}});const KW=new Map,lue=()=>zt.getLogger("esri.intl.substitute");function uue(t,e,i={}){const{format:s={}}=i;return dM(t,n=>FMe(n,e,s))}function FMe(t,e,i){let s,n;const r=t.indexOf(":");if(r===-1?s=t.trim():(s=t.slice(0,r).trim(),n=t.slice(r+1).trim()),!s)return"";const o=$p(s,e);if(o==null)return"";const l=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[s]);return l?zMe(o,l):n?qMe(o,n):sV(o)}function zMe(t,e){switch(e.type){case"date":return yg(t,e.intlOptions);case"number":return jI(t,e.intlOptions);default:return lue().warn("missing format descriptor for key {key}"),sV(t)}}function qMe(t,e){switch(e.toLowerCase()){case"dateformat":return yg(t);case"numberformat":return jI(t);default:return lue().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?yg(t):/^numberformat/i.test(e)?jI(t):sV(t)}}function sV(t){switch(typeof t){case"string":return t;case"number":return jI(t);case"boolean":return""+t;default:return t instanceof Date?yg(t):""}}const JW=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,VMe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function QW(t){return t in VMe}const h3=[],Ub=new Map;function eZ(t){for(const e of Ub.keys())cue(t.pattern,e)&&Ub.delete(e)}function GMe(t){return h3.includes(t)||(eZ(t),h3.unshift(t)),ds(()=>{const e=h3.indexOf(t);e>-1&&(h3.splice(e,1),eZ(t))})}async function jMe(t){const e=Au();Ub.has(t)||Ub.set(t,HMe(t,e));const i=Ub.get(t);return i&&await UMe.add(i),i}function BMe(t){if(!JW.test(t))return null;const e=JW.exec(t);if(e===null)return null;const[,i,s]=e,n=i+(s?"-"+s.toUpperCase():"");return QW(n)?n:QW(i)?i:null}async function HMe(t,e){const i=[];for(const s of h3)if(cue(s.pattern,t))try{return await s.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new rt("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new rt("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function cue(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}Uq(()=>{Ub.clear()});const UMe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Cu())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function YMe(t,e,i,s){const n=e.exec(i);if(!n)throw new rt("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const r=n[1]?`${n[1]}/`:"",o=n[2],l=BMe(s),c=`${r}${o}.json`,f=l?`${r}${o}_${l}.json`:c;let y;try{y=await tZ(t(f))}catch(_){if(f===c)throw new rt("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:_});try{y=await tZ(t(c))}catch(x){throw new rt("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:x})}}return y}async function tZ(t){if(iZ.fetchBundleAsset!=null)return iZ.fetchBundleAsset(t);const e=await Qs(t,{responseType:"text"});return JSON.parse(e.data)}let XMe=class{constructor({base:e="",pattern:i,location:s=new URL(window.location.href)}){let n;n=typeof s=="string"?r=>new URL(r,new URL(s,window.location.href)).href:s instanceof URL?r=>new URL(r,s).href:s,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return YMe(this.getAssetUrl,this.matcher,e,i)}};function WMe(t){return new XMe(t)}const iZ={};GMe(WMe({pattern:"esri/",location:_C}));function ZMe(t){return typeof t=="string"?document.getElementById(t):t??null}function sht(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}function nht(t,e,i){return _q(t.map((s,n)=>e.apply(i,[s,n])))}async function KMe(t,e,i){return(await _q(t.map((s,n)=>e.apply(i,[s,n])))).map(s=>s.value)}function nV(t){return{ok:!0,value:t}}function rV(t){return{ok:!1,error:t}}function JMe(t){return t!=null&&t.ok===!0?t.value:null}function QMe(t){return t!=null&&t.ok===!1?t.error:null}async function oV(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return nV(await t)}catch(e){return rV(e)}}async function eAe(t){try{return nV(await t)}catch(e){return Nh(e),rV(e)}}function DM(t,e){return new a0(t,e)}let a0=class extends Ei{get value(){return JMe(this._result)}get error(){return QMe(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=og(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:s}=this._abortController;this.promise=e(s),this.promise.then(n=>{this._result=nV(n),this._cleanup()},n=>{this._result=rV(n),this._cleanup()}),this._abortHandle=Bl(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=bo(this._abortHandle),this._abortController=null}};I([N()],a0.prototype,"value",null),I([N()],a0.prototype,"error",null),I([N()],a0.prototype,"finished",null),I([N()],a0.prototype,"promise",void 0),I([N()],a0.prototype,"_result",void 0),a0=I([De("esri.core.asyncUtils.ReactiveTask")],a0);var zs;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(zs||(zs={}));function aV(t){return(e,i)=>{e[i]=t}}let SC=class extends Poe{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onInvalidated(),s.onCommitted()}}};var Ip;let tAe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},iAe=class{constructor(e,i,s,n,r){this.target=e,this.added=i,this.removed=s,this.start=n,this.deleteCount=r}};const ac=new dC(tAe,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function sZ(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function ik(t){return t?t instanceof bp?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function sk(t){if(t!=null&&t.length)return t[0]}function sAe(t,e,i,s){const n=Math.min(t.length-i,e.length-s);let r=0;for(;r<n&&t[i+r]===e[s+r];)r++;return r}function hue(t,e,i,s){e&&e.forEach((n,r,o)=>{t.push(n),hue(t,i.call(s,n,r,o),i,s)})}const Qm=new Set,e0=new Set,t0=new Set,nk=new Map;let nAe=0,bp=Ip=class extends Sa.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Ip}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new SC,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:nAe++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Ip?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return mi(this._observable),this._items}set items(t){this._emitBeforeChanges(zs.ADD)||(this._splice(0,this.length,ik(t)),this._emitAfterChanges(zs.ADD))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t))}on(t,e){if(this.destroyed)return ds();if(t==="change"){const i=this._chgListeners,s={removed:!1,callback:e};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),ds(()=>{s.removed=!0,i.splice(i.indexOf(s),1)})}return this._emitter.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,s=this.on(t,n=>{var r;(r=i())==null||r.call(null,n),s.remove()});return s}add(t,e){if(mi(this._observable),this._emitBeforeChanges(zs.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(zs.ADD),this}addMany(t,e=this._items.length){if(mi(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(zs.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,ik(t)),this._emitAfterChanges(zs.ADD),this}at(t){if(mi(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(zs.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return mi(this._observable),this._createNewInstance({items:this._items.map(Ue)})}concat(...t){mi(this._observable);const e=t.map(ik);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let n=0;n<s;n++)t.call(e,i[n],n,i);this._emitAfterChanges(zs.REMOVE)}destroyAll(){this.drain(sZ)}destroyMany(t){const e=this.removeMany(t);return e.forEach(sZ),e}every(t,e){return mi(this._observable),this._items.every(t,e)}filter(t,e){let i;return mi(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return mi(this._observable),this._items.find(t,e)}findIndex(t,e){return mi(this._observable),this._items.findIndex(t,e)}flatten(t,e){mi(this._observable);const i=[];return hue(i,this,t,e),new Ip(i)}forEach(t,e){return mi(this._observable),this._items.forEach(t,e)}getItemAt(t){return mi(this._observable),this._items[t]}getNextIndex(t){mi(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return mi(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return mi(this._observable),this._items.indexOf(t,e)}join(t=","){return mi(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return mi(this._observable),this._items.lastIndexOf(t,e)}map(t,e){mi(this._observable);const i=this._items.map(t,e);return new Ip({items:i})}reorder(t,e=this.length-1){mi(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(zs.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(zs.MOVE)}return t}}pop(){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.REMOVE))return;const t=sk(this._splice(this.length-1,1));return this._emitAfterChanges(zs.REMOVE),t}push(...t){return mi(this._observable),this._emitBeforeChanges(zs.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(zs.ADD)),this.length}reduce(t,e){mi(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){mi(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return mi(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(mi(this._observable),t<0||t>=this.length||this._emitBeforeChanges(zs.REMOVE))return;const e=sk(this._splice(t,1));return this._emitAfterChanges(zs.REMOVE),e}removeMany(t){if(mi(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(zs.REMOVE))return[];const e=t instanceof Ip?t.toArray():t,i=this._items,s=[],n=e.length;for(let r=0;r<n;r++){const o=e[r],l=i.indexOf(o);if(l>-1){const c=1+sAe(e,i,r+1,l+1),f=this._splice(l,c);f&&f.length>0&&s.push.apply(s,f),r+=c-1}}return this._emitAfterChanges(zs.REMOVE),s}reverse(){if(mi(this._observable),this._emitBeforeChanges(zs.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(zs.MOVE),this}shift(){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.REMOVE))return;const t=sk(this._splice(0,1));return this._emitAfterChanges(zs.REMOVE),t}slice(t=0,e=this.length){return mi(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return mi(this._observable),this._items.some(t,e)}sort(t){if(mi(this._observable),!this.length||this._emitBeforeChanges(zs.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(zs.MOVE),this}splice(t,e,...i){mi(this._observable);const s=(e?zs.REMOVE:0)|(i.length?zs.ADD:0);if(this._emitBeforeChanges(s))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(s),n}toArray(){return mi(this._observable),this._items.slice()}toJSON(){return mi(this._observable),this.toArray()}toLocaleString(){return mi(this._observable),this._items.toLocaleString()}toString(){return mi(this._observable),this._items.toString()}unshift(...t){return mi(this._observable),!t.length||this._emitBeforeChanges(zs.ADD)||(this._splice(0,0,t),this._emitAfterChanges(zs.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const s=this._items,n=this.itemType;let r,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=bq(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=s.splice(t,e),this.hasEventListener("before-remove")){const l=ac.acquire();l.target=this,l.cancellable=!0;for(let c=0,f=o.length;c<f;c++)r=o[c],l.reset(r),this.emit("before-remove",l),l.defaultPrevented&&(o.splice(c,1),s.splice(t,0,r),t+=1,c-=1,f-=1);ac.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=ac.acquire();l.target=this,l.cancellable=!1;const c=o.length;for(let f=0;f<c;f++)l.reset(o[f]),this.emit("after-remove",l);ac.release(l)}}if(i!=null&&i.length){if(n){const y=[];for(const _ of i){const x=n.ensureType(_);x==null&&_!=null||y.push(x)}i=y}const l=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),f=t===this.length;if(l||c){const y=ac.acquire();y.target=this,y.cancellable=!0;const _=ac.acquire();_.target=this,_.cancellable=!1;for(const x of i)l?(y.reset(x),this.emit("before-add",y),y.defaultPrevented||(f?s.push(x):s.splice(t++,0,x),this._set("length",s.length),c&&(_.reset(x),this.emit("after-add",_)))):(f?s.push(x):s.splice(t++,0,x),this._set("length",s.length),_.reset(x),this.emit("after-add",_));ac.release(_),ac.release(y)}else{if(f)for(const y of i)s.push(y);else s.splice(t,0,...i);this._set("length",s.length)}}if((i!=null&&i.length||o!=null&&o.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const l=new iAe(this,i,o,t,e);this.emit("after-splice",l)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=ac.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,ac.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=ac.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),ac.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Qm.clear(),e0.clear(),t0.clear();for(const{added:c,removed:f}of i){if(c)if(t0.size===0&&e0.size===0)for(const y of c)Qm.add(y);else for(const y of c)e0.has(y)?(t0.add(y),e0.delete(y)):t0.has(y)||Qm.add(y);if(f)if(t0.size===0&&Qm.size===0)for(const y of f)e0.add(y);else for(const y of f)Qm.has(y)?Qm.delete(y):(t0.delete(y),e0.add(y))}const s=Xd.acquire();Qm.forEach(c=>{s.push(c)});const n=Xd.acquire();e0.forEach(c=>{n.push(c)});const r=this._items,o=e.items,l=Xd.acquire();if(t0.forEach(c=>{o.indexOf(c)!==r.indexOf(c)&&l.push(c)}),e.listeners&&(s.length||n.length||l.length)){const c={target:this,added:s,removed:n,moved:l},f=e.listeners.length;for(let y=0;y<f;y++){const _=e.listeners[y];_.removed||_.callback.call(this,c)}}Xd.release(s),Xd.release(n),Xd.release(l)}Qm.clear(),e0.clear(),t0.clear()}};bp.ofType=t=>{if(!t)return Ip;if(nk.has(t))return nk.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const s in t.typeMap){const n=t.typeMap[s].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends Ip{};return I([aV({Type:t,ensureType:typeof t=="function"?Zo(t):Bc(t)})],i.prototype,"itemType",void 0),i=I([De(`esri.core.Collection<${e}>`)],i),nk.set(t,i),i},I([N()],bp.prototype,"_updating",void 0),I([N()],bp.prototype,"length",void 0),I([N()],bp.prototype,"items",null),I([N({readOnly:!0})],bp.prototype,"updating",null),bp=Ip=I([De("esri.core.Collection")],bp);const ui=bp;function xi(t,e,i={}){return lV(t,e,i,fue)}function vg(t,e,i={}){return lV(t,e,i,pue)}function lV(t,e,i={},s){let n=null;const r=i.once?(o,l)=>{s(o)&&(bo(n),e(o,l))}:(o,l)=>{s(o)&&e(o,l)};if(n=E4e(t,r,i.sync,i.equals),i.initial){const o=t();r(o,o)}return n}function _g(t,e,i,s={}){let n=null,r=null,o=null;function l(){var y;n&&r&&(r.remove(),(y=s.onListenerRemove)==null||y.call(s,n),n=null,r=null)}function c(y){s.once&&s.once&&bo(o),i(y)}const f=xi(t,(y,_)=>{var x;l(),gM(y)&&(n=y,r=Oy(y,e,c),(x=s.onListenerAdd)==null||x.call(s,y))},{sync:s.sync,initial:!0});return o=ds(()=>{f.remove(),l()}),o}function rAe(t,e){return due(t,null,e)}function dO(t,e){return due(t,pue,e)}function due(t,e,i){if($u(i))return Promise.reject(or());const s=t();if(e!=null&&e(s))return Promise.resolve(s);let n=null;function r(){n=bo(n)}return new Promise((o,l)=>{n=am([Bl(i,()=>{r(),l(or())}),lV(t,c=>{r(),o(c)},{sync:!1,once:!0},e??fue)])})}function fue(t){return!0}function pue(t){return!!t}function oAe(t,e,i={}){let s=!1;const n=xi(t,(r,o)=>{s||e(r,o)},i);return{remove(){n.remove()},pause(){s=!0},resume(){s=!1}}}function mue(t,e){const i=new ui,s=_g(t,"after-splice",({added:n,start:r,deleteCount:o})=>{const l=i.splice(r,o);for(const c of l)c.remove();if(n!=null&&n.length){const c=n.map(e);i.addMany(c,r)}},{sync:!0,onListenerRemove:()=>i.drain(n=>n.remove()),onListenerAdd:n=>i.addMany(n.items.map(e))});return i.addHandles(s),i}function aAe(t,e){const i=new ui,s=mue(t,l=>DM(async c=>{const f=await e(l,c);if($u(c))throw f.remove(),or();return f})),n=()=>null,r=async l=>{const c=await l.promise,f=s.indexOf(l);f<0||i.splice(f,1,c)};i.addMany(s.items.map(n));for(const l of s)Kh(r(l));const o=s.on("after-splice",({added:l,start:c,deleteCount:f})=>{const y=i.splice(c,f);for(const _ of y)_==null||_.remove();if(l!=null&&l.length){i.addMany(l.map(n),c);for(const _ of l)Kh(r(_))}});return i.addHandles([SPe(s),o]),i}const Hp={sync:!0},Ul={initial:!0},Jl={sync:!0,initial:!0},lAe=Object.freeze(Object.defineProperty({__proto__:null,autorun:wq,initial:Ul,mapCollection:mue,mapCollectionAsync:aAe,on:_g,once:rAe,pausable:oAe,sync:Hp,syncAndInitial:Jl,watch:xi,when:vg,whenOnce:dO},Symbol.toStringTag,{value:"Module"})),uAe="randomUUID"in crypto;function uV(){if(uAe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function uht(){return`{${uV().toUpperCase()}}`}function cAe(){return`{${uV()}}`}function hAe(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var BI=function(){return BI=Object.assign||function(e){for(var i,s=1,n=arguments.length;s<n;s++){i=arguments[s];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},BI.apply(this,arguments)},fO={exports:{}},br={},pO={exports:{}},Av={};function gue(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function dAe(t,e,i){}function fAe(t,e,i){}var pAe=/javascript\s*\:/img;function mAe(t,e){return pAe.test(e)?"":e}Av.whiteList=gue();Av.getDefaultWhiteList=gue;Av.onAttr=dAe;Av.onIgnoreAttr=fAe;Av.safeAttrValue=mAe;var gAe={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,n;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,n=t.length;s<n;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},zw=gAe;function yAe(t,e){t=zw.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,s=!1,n=0,r=0,o="";function l(){if(!s){var y=zw.trim(t.slice(n,r)),_=y.indexOf(":");if(_!==-1){var x=zw.trim(y.slice(0,_)),S=zw.trim(y.slice(_+1));if(x){var P=e(n,o.length,x,S,y);P&&(o+=P+"; ")}}}n=r+1}for(;r<i;r++){var c=t[r];if(c==="/"&&t[r+1]==="*"){var f=t.indexOf("*/",r+2);if(f===-1)break;r=f+1,n=r+1,s=!1}else c==="("?s=!0:c===")"?s=!1:c===";"?s||l():c===`
`&&l()}return zw.trim(o)}var vAe=yAe,KP=Av,_Ae=vAe;function nZ(t){return t==null}function bAe(t){var e={};for(var i in t)e[i]=t[i];return e}function yue(t){t=bAe(t||{}),t.whiteList=t.whiteList||KP.whiteList,t.onAttr=t.onAttr||KP.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||KP.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||KP.safeAttrValue,this.options=t}yue.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,n=i.onAttr,r=i.onIgnoreAttr,o=i.safeAttrValue,l=_Ae(t,function(c,f,y,_,x){var S=s[y],P=!1;if(S===!0?P=S:typeof S=="function"?P=S(_):S instanceof RegExp&&(P=S.test(_)),P!==!0&&(P=!1),_=o(y,_),!!_){var A={position:f,sourcePosition:c,source:x,isWhite:P};if(P){var k=n(y,_,A);return nZ(k)?y+":"+_:k}else{var k=r(y,_,A);if(!nZ(k))return k}}});return l};var xAe=yue;(function(t,e){var i=Av,s=xAe;function n(o,l){var c=new s(l);return c.process(o)}e=t.exports=n,e.FilterCSS=s;for(var r in i)e[r]=i[r]})(pO,pO.exports);var cV=pO.exports,hV={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,n;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,n=t.length;s<n;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},wAe=cV.FilterCSS,SAe=cV.getDefaultWhiteList,HI=hV;function vue(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var _ue=new wAe;function EAe(t,e,i){}function CAe(t,e,i){}function PAe(t,e,i){}function TAe(t,e,i){}function bue(t){return t.replace(MAe,"&lt;").replace(AAe,"&gt;")}function IAe(t,e,i,s){if(i=Pue(i),e==="href"||e==="src"){if(i=HI.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(JP.lastIndex=0,JP.test(i))return""}else if(e==="style"){if(rZ.lastIndex=0,rZ.test(i)||(oZ.lastIndex=0,oZ.test(i)&&(JP.lastIndex=0,JP.test(i))))return"";s!==!1&&(s=s||_ue,i=s.process(i))}return i=Tue(i),i}var MAe=/</g,AAe=/>/g,DAe=/"/g,kAe=/&quot;/g,NAe=/&#([a-zA-Z0-9]*);?/gim,$Ae=/&colon;?/gim,OAe=/&newline;?/gim,JP=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,rZ=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,oZ=/u\s*r\s*l\s*\(.*/gi;function xue(t){return t.replace(DAe,"&quot;")}function wue(t){return t.replace(kAe,'"')}function Sue(t){return t.replace(NAe,function(i,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function Eue(t){return t.replace($Ae,":").replace(OAe," ")}function Cue(t){for(var e="",i=0,s=t.length;i<s;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return HI.trim(e)}function Pue(t){return t=wue(t),t=Sue(t),t=Eue(t),t=Cue(t),t}function Tue(t){return t=xue(t),t=bue(t),t}function RAe(){return""}function LAe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function s(o){return i?!0:HI.indexOf(t,o)!==-1}var n=[],r=!1;return{onIgnoreTag:function(o,l,c){if(s(o))if(c.isClosing){var f="[/removed]",y=c.position+f.length;return n.push([r!==!1?r:c.position,y]),r=!1,f}else return r||(r=c.position),"[removed]";else return e(o,l,c)},remove:function(o){var l="",c=0;return HI.forEach(n,function(f){l+=o.slice(c,f[0]),c=f[1]}),l+=o.slice(c),l}}}function FAe(t){for(var e="",i=0;i<t.length;){var s=t.indexOf("<!--",i);if(s===-1){e+=t.slice(i);break}e+=t.slice(i,s);var n=t.indexOf("-->",s);if(n===-1)break;i=n+3}return e}function zAe(t){var e=t.split("");return e=e.filter(function(i){var s=i.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),e.join("")}br.whiteList=vue();br.getDefaultWhiteList=vue;br.onTag=EAe;br.onIgnoreTag=CAe;br.onTagAttr=PAe;br.onIgnoreTagAttr=TAe;br.safeAttrValue=IAe;br.escapeHtml=bue;br.escapeQuote=xue;br.unescapeQuote=wue;br.escapeHtmlEntities=Sue;br.escapeDangerHtml5Entities=Eue;br.clearNonPrintableCharacter=Cue;br.friendlyAttrValue=Pue;br.escapeAttrValue=Tue;br.onIgnoreTagStripAll=RAe;br.StripTagBody=LAe;br.stripCommentTag=FAe;br.stripBlankChar=zAe;br.cssFilter=_ue;br.getDefaultCSSWhiteList=SAe;var kM={},N0=hV;function qAe(t){var e=N0.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=N0.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function VAe(t){return t.slice(0,2)==="</"}function GAe(t,e,i){var s="",n=0,r=!1,o=!1,l=0,c=t.length,f="",y="";e:for(l=0;l<c;l++){var _=t.charAt(l);if(r===!1){if(_==="<"){r=l;continue}}else if(o===!1){if(_==="<"){s+=i(t.slice(n,l)),r=l,n=l;continue}if(_===">"){s+=i(t.slice(n,r)),y=t.slice(r,l+1),f=qAe(y),s+=e(r,s.length,f,y,VAe(y)),n=l+1,r=!1;continue}if(_==='"'||_==="'")for(var x=1,S=t.charAt(l-x);S.trim()===""||S==="=";){if(S==="="){o=_;continue e}S=t.charAt(l-++x)}}else if(_===o){o=!1;continue}}return n<t.length&&(s+=i(t.substr(n))),s}var jAe=/[^a-zA-Z0-9\\_:.-]/gim;function BAe(t,e){var i=0,s=0,n=[],r=!1,o=t.length;function l(x,S){if(x=N0.trim(x),x=x.replace(jAe,"").toLowerCase(),!(x.length<1)){var P=e(x,S||"");P&&n.push(P)}}for(var c=0;c<o;c++){var f=t.charAt(c),y,_;if(r===!1&&f==="="){r=t.slice(i,c),i=c+1,s=t.charAt(i)==='"'||t.charAt(i)==="'"?i:UAe(t,c+1);continue}if(r!==!1&&c===s){if(_=t.indexOf(f,c+1),_===-1)break;y=N0.trim(t.slice(s+1,_)),l(r,y),r=!1,c=_,i=c+1;continue}if(/\s|\n|\t/.test(f))if(t=t.replace(/\s|\n|\t/g," "),r===!1)if(_=HAe(t,c),_===-1){y=N0.trim(t.slice(i,c)),l(y),r=!1,i=c+1;continue}else{c=_-1;continue}else if(_=YAe(t,c-1),_===-1){y=N0.trim(t.slice(i,c)),y=aZ(y),l(r,y),r=!1,i=c+1;continue}else continue}return i<t.length&&(r===!1?l(t.slice(i)):l(r,aZ(N0.trim(t.slice(i))))),N0.trim(n.join(" "))}function HAe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function UAe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function YAe(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function XAe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function aZ(t){return XAe(t)?t.substr(1,t.length-2):t}kM.parseTag=GAe;kM.parseAttr=BAe;var WAe=cV.FilterCSS,Ah=br,Iue=kM,ZAe=Iue.parseTag,KAe=Iue.parseAttr,MT=hV;function QP(t){return t==null}function JAe(t){var e=MT.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=MT.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=MT.trim(t.slice(0,-1))),{html:t,closing:i}}function QAe(t){var e={};for(var i in t)e[i]=t[i];return e}function e7e(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(s){return s.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Mue(t){t=QAe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Ah.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=e7e(t.whiteList||t.allowList):t.whiteList=Ah.whiteList,t.onTag=t.onTag||Ah.onTag,t.onTagAttr=t.onTagAttr||Ah.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Ah.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Ah.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Ah.safeAttrValue,t.escapeHtml=t.escapeHtml||Ah.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new WAe(t.css))}Mue.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,n=i.onTag,r=i.onIgnoreTag,o=i.onTagAttr,l=i.onIgnoreTagAttr,c=i.safeAttrValue,f=i.escapeHtml,y=e.cssFilter;i.stripBlankChar&&(t=Ah.stripBlankChar(t)),i.allowCommentTag||(t=Ah.stripCommentTag(t));var _=!1;i.stripIgnoreTagBody&&(_=Ah.StripTagBody(i.stripIgnoreTagBody,r),r=_.onIgnoreTag);var x=ZAe(t,function(S,P,A,k,$){var F={sourcePosition:S,position:P,isClosing:$,isWhite:Object.prototype.hasOwnProperty.call(s,A)},G=n(A,k,F);if(!QP(G))return G;if(F.isWhite){if(F.isClosing)return"</"+A+">";var V=JAe(k),B=s[A],W=KAe(V.html,function(J,re){var se=MT.indexOf(B,J)!==-1,oe=o(A,J,re,se);return QP(oe)?se?(re=c(A,J,re,y),re?J+'="'+re+'"':J):(oe=l(A,J,re,se),QP(oe)?void 0:oe):oe});return k="<"+A,W&&(k+=" "+W),V.closing&&(k+=" /"),k+=">",k}else return G=r(A,k,F),QP(G)?f(k):G},f);return _&&(x=_.remove(x)),x};var t7e=Mue;(function(t,e){var i=br,s=kM,n=t7e;function r(l,c){var f=new n(c);return f.process(l)}e=t.exports=r,e.filterXSS=r,e.FilterXSS=n,function(){for(var l in i)e[l]=i[l];for(var c in s)e[c]=s[c]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(fO,fO.exports);var T_=fO.exports,i7e=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},s7e=function(){function t(e,i){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=BI(BI({},T_.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(r,o,l,c){return r==="a"&&o==="href"||(r==="img"||r==="source")&&o==="src"?s.sanitizeUrl(l):T_.safeAttrValue(r,o,l,c)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(r){if(r==="whiteList")n.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,e.whiteList||{}]);else if(r==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(l){return n.css.whiteList[l]=o[l]})}else n[r]=e[r]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new T_.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var s=(i??{}).isProtocolRequired,n=s===void 0?!0:s,r=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",l=/^#/.test(e),c=r&&this.allowedProtocols.indexOf(r.toLowerCase())>-1;return o||l||c?T_.escapeAttrValue(e):!r&&!n?T_.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,s,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,s,n):T_.safeAttrValue(e,i,s,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var s=this.sanitize(e,i);return{isValid:e===s,sanitized:s}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(s){return i._entityMap[s]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(s,n){return i.test(s)?s:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(s){Object.keys(s).forEach(function(n){Array.isArray(s[n])&&Array.isArray(i[n])?i[n]=i[n].concat(s[n]):i[n]=s[n]})}),i},t.prototype._iterateOverObject=function(e,i){var s=this;i===void 0&&(i={});try{var n=!1,r=void 0;if(Array.isArray(e))r=e.reduce(function(l,c){var f=s.validate(c,i);return f.isValid?l.concat([c]):(n=!0,l.concat([f.sanitized]))},[]);else if(i7e(e)){var o=Object.keys(e);r=o.reduce(function(l,c){var f=e[c],y=s.validate(f,i);return y.isValid?l[c]=f:(n=!0,l[c]=y.sanitized),l},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?r:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const NM=new Map;function Aue(){NM.clear()}function n7e(t){return NM.get(t)}function r7e(t,e){NM.set(t,e)}function rk(t){NM.delete(t)}function o7e(...t){const e=Xd.acquire();for(let s=0;s<t.length;s++){const n=t[s],r=typeof n;if(r==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(r==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return Xd.release(e),i}const cht=(()=>{const t=new Map,e=new ResizeObserver(s=>{var n;Aue();for(const r of s)(n=t.get(r.target))==null||n(r)}),i=(s,n,r)=>(t.set(s,n),e.observe(s,r),ds(()=>{e.unobserve(s),t.delete(s)}));return(s,n,r)=>{let o=null;return am([xi(()=>typeof s=="function"?s():s,l=>{o==null||o.remove(),l&&(o=i(l,n,r))},Jl),ds(()=>o==null?void 0:o.remove())])}})();function lZ(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function hht(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function dht(t){const e="data-node-ref";this[t.getAttribute(e)]=t}const a7e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],l7e=a7e.reduce((t,e)=>(t[e]=[],t),{}),u7e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Due=new s7e({whiteList:l7e,onTagAttr:(t,e,i)=>{const s=`${e}="${i}"`;if(u7e.includes(e))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function fht(t){return t==="Enter"||t===" "}async function kue(t,e){await o4e(fC(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const Nue="http://www.w3.org/",$M=`${Nue}2000/svg`,$ue=`${Nue}1999/xlink`;let uZ=[],dV=(t,e)=>{let i={};return Object.keys(t).forEach(s=>{i[s]=t[s]}),e&&Object.keys(e).forEach(s=>{i[s]=e[s]}),i},fV=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Oue=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},c7e=(t,e,i)=>{if(e.vnodeSelector!==""){for(let s=i;s<t.length;s++)if(fV(t[s],e))return s}return-1},ok=(t,e,i,s)=>{let n=t[e];if(n.vnodeSelector==="")return;let r=n.properties;if(!(r&&(r.key===void 0?r.bind:r.key))){for(let o=0;o<t.length;o++)if(o!==e){let l=t[o];if(fV(l,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},h7e=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},mO=[],gO=!1,Rue=t=>{(t.children||[]).forEach(Rue),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},cZ=()=>{gO=!1,mO.forEach(Rue),mO.length=0},hZ=t=>{mO.push(t),gO||(gO=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(cZ,{timeout:16}):setTimeout(cZ,16))},dZ=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),hZ(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),hZ(t))},d7e=(t,e,i)=>{if(!e)return;let s=i.eventHandlerInterceptor,n=Object.keys(e),r=n.length;for(let o=0;o<r;o++){let l=n[o],c=e[l];if(l==="className")throw new Error('Property "className" is not supported, use "class".');if(l==="class")vO(t,c,!0);else if(l==="classes"){let f=Object.keys(c),y=f.length;for(let _=0;_<y;_++){let x=f[_];c[x]&&t.classList.add(x)}}else if(l==="styles"){let f=Object.keys(c),y=f.length;for(let _=0;_<y;_++){let x=f[_],S=c[x];S&&(Oue(S),i.styleApplyer(t,x,S))}}else if(l!=="key"&&c!=null){let f=typeof c;f==="function"?(l.lastIndexOf("on",0)===0&&(s&&(c=s(l,c,t,e)),l==="oninput"&&function(){let y=c;c=function(_){y.apply(this,[_]),_.target["oninput-value"]=_.target.value}}()),t[l]=c):i.namespace===$M?l==="href"?t.setAttributeNS($ue,l,c):t.setAttribute(l,c):f==="string"&&l!=="value"?l==="innerHTML"?t[l]=Due.sanitize(c):yO(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]=c}}};function yO(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let UI,f7e=(t,e,i)=>{if(e)for(let s of e)SS(s,t,void 0,i)},Lue=(t,e,i)=>{f7e(t,e.children,i),e.text&&(t.textContent=e.text),d7e(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},SS=(t,e,i,s)=>{let n,r=0,o=t.vnodeSelector,l=e.ownerDocument;if(o==="")n=t.domNode=l.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let c=0;c<=o.length;++c){let f=o.charAt(c);if(c===o.length||f==="."||f==="#"){let y=o.charAt(r-1),_=o.slice(r,c);y==="."?n.classList.add(_):y==="#"?n.id=_:(_==="svg"&&(s=dV(s,{namespace:$M})),s.namespace!==void 0?n=t.domNode=l.createElementNS(s.namespace,_):(n=t.domNode=t.domNode||l.createElement(_),_==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),r=c+1}}Lue(n,t,s)}},vO=(t,e,i)=>{e&&e.split(" ").forEach(s=>{s&&t.classList.toggle(s,i)})},p7e=(t,e,i,s)=>{if(!i)return;let n=!1,r=Object.keys(i),o=r.length;for(let l=0;l<o;l++){let c=r[l],f=i[c],y=e[c];if(c==="class")y!==f&&(vO(t,y,!1),vO(t,f,!0));else if(c==="classes"){let _=t.classList,x=Object.keys(f),S=x.length;for(let P=0;P<S;P++){let A=x[P],k=!!f[A];k!==!!y[A]&&(n=!0,k?_.add(A):_.remove(A))}}else if(c==="styles"){let _=Object.keys(f),x=_.length;for(let S=0;S<x;S++){let P=_[S],A=f[P];A!==y[P]&&(n=!0,A?(Oue(A),s.styleApplyer(t,P,A)):s.styleApplyer(t,P,""))}}else if(f||typeof y!="string"||(f=""),c!=="value"||yO(t)){if(f!==y){let _=typeof f;_==="function"&&s.eventHandlerInterceptor||(s.namespace===$M?c==="href"?t.setAttributeNS($ue,c,f):t.setAttribute(c,f):_==="string"?c==="innerHTML"?t[c]=Due.sanitize(f):c==="role"&&f===""?t.removeAttribute(c):yO(t)&&c in t?t[c]=f:t.setAttribute(c,f):t[c]!==f&&(t[c]=f),n=!0)}}else{let _=t[c];_!==f&&(t["oninput-value"]?_===t["oninput-value"]:f!==y)&&(t[c]=f,t["oninput-value"]=void 0),f!==y&&(n=!0)}}return n},m7e=(t,e,i,s,n)=>{if(i===s)return!1;s=s||uZ;let r,o=(i=i||uZ).length,l=s.length,c=0,f=0,y=!1;for(;f<l;){let _=c<o?i[c]:void 0,x=s[f];if(_!==void 0&&fV(_,x))y=UI(_,x,n)||y,c++;else{let S=c7e(i,x,c+1);if(S>=0){for(r=c;r<S;r++)dZ(i[r]),ok(i,r,t,"removed");y=UI(i[S],x,n)||y,c=S+1}else SS(x,e,c<o?i[c].domNode:void 0,n),h7e(x),ok(s,f,t,"added")}f++}if(o>c)for(r=c;r<o;r++)dZ(i[r]),ok(i,r,t,"removed");return y};UI=(t,e,i)=>{let s=t.domNode,n=!1;if(t===e)return!1;let r=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=s.ownerDocument.createTextNode(e.text);return s.parentNode.replaceChild(o,s),e.domNode=o,n=!0,n}e.domNode=s}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=dV(i,{namespace:$M})),t.text!==e.text&&(r=!0,e.text===void 0?s.removeChild(s.firstChild):s.textContent=e.text),e.domNode=s,r=m7e(e,s,t.children,e.children,i)||r,r=p7e(s,t.properties,e.properties,i)||r,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[s,i,e.vnodeSelector,e.properties,e.children]);return r&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(s,e.properties,t.properties),n};let e4=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=t;t=i,UI(s,i,e)},domNode:t.domNode});const g7e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let d3=t=>dV(g7e,t),Y0={append:(t,e,i)=>(i=d3(i),SS(e,t,void 0,i),e4(e,i)),insertBefore:(t,e,i)=>(i=d3(i),SS(e,t.parentNode,t,i),e4(e,i)),merge:(t,e,i)=>(i=d3(i),e.domNode=t,Lue(t,e,i),e4(e,i)),replace:(t,e,i)=>(i=d3(i),SS(e,t.parentNode,t,i),t.parentNode.removeChild(t),e4(e,i))},Fue,y7e=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};Fue=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let v7e=(t,e)=>{let i=t;return e.forEach(s=>{i=i&&i.children?Fue(i.children,n=>n.domNode===s):void 0}),i},_7e=(t,e,i)=>{let s=function(n){i("domEvent",n);let r=e(),o=y7e(n.currentTarget,r.domNode);o.reverse();let l,c=v7e(r.getLastRender(),o);return t.scheduleRender(),c&&(l=c.properties[`on${n.type}`].apply(c.properties.bind||this,arguments)),i("domEventProcessed",n),l};return(n,r,o,l)=>s},pht=t=>{let e,i,s=d3(t),n=s.performanceLogger,r=!0,o=!1,l=[],c=[],f=(_,x,S)=>{let P,A=()=>P;s.eventHandlerInterceptor=_7e(e,A,n),P=_(x,S(),s),l.push(P),c.push(S)},y=()=>{if(i=void 0,r){r=!1,n("renderStart",void 0);for(let _=0;_<l.length;_++){let x=c[_]();n("rendered",void 0),l[_].update(x),n("patched",void 0)}n("renderDone",void 0),r=!0}};return e={renderNow:y,scheduleRender:()=>{i||o||(i=requestAnimationFrame(y))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,r=!0,e.scheduleRender()},append:(_,x)=>{f(Y0.append,_,x)},insertBefore:(_,x)=>{f(Y0.insertBefore,_,x)},merge:(_,x)=>{f(Y0.merge,_,x)},replace:(_,x)=>{f(Y0.replace,_,x)},detach:_=>{for(let x=0;x<c.length;x++)if(c[x]===_)return c.splice(x,1),l.splice(x,1)[0];throw new Error("renderFunction was not found")}},e};const b7e={handleInterceptedEvent:(t,e,i,s)=>(t.scheduleRender(),e.properties[`on${s.type}`].apply(e.properties.bind||i,[s]))},x7e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},w7e=t=>({...x7e,...t}),S7e=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},E7e=(t,e)=>t.find(e),fZ=(t,e,i=!1)=>{let s=t;return e.forEach((n,r)=>{const o=s!=null&&s.children?E7e(s.children,l=>l.domNode===n):void 0;i&&!o&&r!==e.length-1||(s=o)}),s},C7e=t=>{let e;const i={...b7e,...t},s=w7e(i),n=s.performanceLogger;let r,o=!0,l=!1;const c=[],f=[],y=(x,S,P)=>{var $;let A;s.eventHandlerInterceptor=(F,G,V,B)=>function(W){let J;n("domEvent",W);const re=S7e(W.currentTarget,A.domNode),se=re.some(pe=>{var ue;return customElements.get((ue=pe==null?void 0:pe.tagName)==null?void 0:ue.toLowerCase())});if(W.eventPhase===Event.CAPTURING_PHASE||!se)re.reverse(),J=fZ(A.getLastRender(),re);else{const pe=W.composedPath(),ue=pe.slice(pe.indexOf(W.currentTarget),pe.indexOf(A.domNode)).reverse();J=fZ(A.getLastRender(),ue,!0)}let oe;return J&&(oe=i.handleInterceptedEvent(e,J,this,W)),n("domEventProcessed",W),oe},($=i.postProcessProjectionOptions)==null||$.call(i,s);const k=P();A=x(S,k,s),s.eventHandlerInterceptor=void 0,c.push(A),f.push(P),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(A,k)};let _=()=>{if(r=void 0,o){o=!1,n("renderStart",void 0);for(let x=0;x<c.length;x++){const S=f[x]();n("rendered",void 0);try{c[x].update(S)}catch(P){console.error(P)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(_=i.modifyDoRenderImplementation(_,c,f)),e={renderNow:_,scheduleRender:()=>{r||l||(r=requestAnimationFrame(_))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),l=!0},resume:()=>{l=!1,o=!0,e.scheduleRender()},append:(x,S)=>{y(Y0.append,x,S)},insertBefore:(x,S)=>{y(Y0.insertBefore,x,S)},merge:(x,S)=>{y(Y0.merge,x,S)},replace:(x,S)=>{y(Y0.replace,x,S)},detach:x=>{for(let S=0;S<f.length;S++)if(f[S]===x)return f.splice(S,1),c.splice(S,1)[0];throw new Error("renderFunction was not found")}},e};let zue;function P7e(){try{Vz(".")}catch{Xse(pl(_C(zue)))}}function cx(t){var i;const e=[];for(const s of Object.keys(t))customElements.get(`calcite-${s}`)||e.push((i=t[s])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}zue="components/assets";const que=Symbol("widget"),Vue=Symbol("widget-test-data"),T7e=[],I7e={},YI=new WeakMap;function Gue(t,e){let i=e.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=Gue(t,i[n]);else i=T7e;const s=e.vnodeSelector;if(XI(s)){const n=e.properties||I7e,r=n.key||s,o={key:r,afterCreate:M7e,afterUpdate:A7e,afterRemoved:jue,parentWidget:t,widgetConstructor:s,widgetProperties:{...n,key:r,children:i}};return{vnodeSelector:s.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function M7e(t,e,i,{parentWidget:s,widgetConstructor:n,widgetProperties:r}){var l;const o=new n(r);o.container=t,YI.set(t,o),(l=o.afterCreate)==null||l.call(o,o,t),s.addHandles(ds(()=>jue(t))),queueMicrotask(()=>{o[Vue].projector.renderNow()})}function A7e(t,e,i,{widgetProperties:s}){var r;const n=YI.get(t);n&&(n.set(s),(r=n.afterUpdate)==null||r.call(n,n,t))}function jue(t){var i;const e=YI.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),YI.delete(t))}function XI(t){return typeof t=="function"&&t[que]}const pZ=new Set;function D7e(t){pZ.add(t),t.finally(()=>pZ.delete(t))}var Bue;const k7e="esri.widgets.Widget";let N7e=0;function Hue(t,e){const i=Object.prototype.hasOwnProperty;for(const s in e)i.call(e,s)&&i.call(t,s)&&(t[s]!=null&&e[s]!=null&&typeof t[s]=="object"&&typeof e[s]=="object"?Hue(t[s],e[s]):t[s]=e[s]);return t}const $7e=C7e({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(s,n,r,o)=>{const l=e==null?void 0:e(s,n,r,o),c=i.test(s);if(!((s=s.replace(i,"")).toLowerCase()in r)||c){const f=s[2].toLowerCase()+s.slice(3),y=S=>l==null?void 0:l.call(r,S);r.addEventListener(f,y,c);const _=()=>r.removeEventListener(f,y,c),x=o.afterRemoved;o.afterRemoved=S=>{x==null||x(S),_()}}return l}},handleInterceptedEvent(t,e,i,s){const{eventPhase:n,type:r}=s,o=n===Event.CAPTURING_PHASE;let l=`on${r}${o?"capture":""}`;const c=e.properties;(c&&l in c||(l=`on${r[0].toUpperCase()}${r.slice(1)}${o?"Capture":""}`,c&&l in c))&&(Aue(),t.scheduleRender(),c[l].call(c.bind||i,s))}});let ak=!1,Zr=class extends Lq(Sa.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=$7e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Pv(async()=>{var c;if((c=this._messageBundleProps)!=null&&c.length){const f=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:y,propertyName:_})=>{if(this.destroyed)return;let x=await jMe(y);this.uiStrings&&Object.keys(this.uiStrings)&&(x=Hue(Ue(x),this.uiStrings)),this[_]=x}));if(this.destroyed)return;for(const y of f)y.status==="rejected"&&zt.getLogger(this).error("widget-intl:locale-error",this.declaredClass,y.reason)}await this.loadLocale()}),P7e();const s="esri-widget-uid-"+uV(),n=this.render.bind(this);this._trackingTarget=new yM(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const r=()=>({vnodeSelector:"div",properties:{key:`${s}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var _,x;if(!this._readyForTrueRender||this.destroyed)return null;const c=n()??r(),f=c.properties??(c.properties={});if(f.key??(f.key=s),XI(c.vnodeSelector)){if(!this.visible)return r()}else this.visible?f.styles||(f.styles={}):(f.class="",f.styles={display:"none"}),(_=f.styles).display??(_.display="");let y=0;return(x=c.children)==null||x.forEach(S=>{var P;XI(S.vnodeSelector)||(S.properties??(S.properties={}),(P=S.properties).key??(P.key=`${this.id}--${y++}`))}),Gue(this,c)};this.render=()=>{if(ak)return o();let c=n7e(this)??null;if(c)return c;this._trackingTarget.clear(),ak=!0;try{c=Gp(this._trackingTarget,o)}catch(f){throw zt.getLogger(this).error(f),f}finally{ak=!1}return c&&r7e(this,c),c};const l=this.beforeFirstRender();l?this._resourcesFetch=l.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),D7e(this._resourcesFetch)}normalizeCtorArgs(e,i){const s={...e};return i&&(s.container=i),s}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(GX):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(so(this._trackingTarget),so(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,rk(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return ZMe(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+N7e++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Bue=que,Vue)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(rk(this),this._projector.scheduleRender())}own(e){voe(zt.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return o7e.apply(this,e)}renderNow(){rk(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(xi(()=>this.viewModel,(s,n)=>{n&&this.removeHandles("delegated-events"),s&&gM(s)&&this.addHandles(this._delegatedEventNames.map(r=>Oy(s,r,o=>{this.emit(r,o)})),"delegated-events")},Jl)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(GX),this.scheduleRender()};this.addHandles([mIe(e),xi(()=>this.uiStrings,e),vg(()=>this.container,s=>{this.destroyed||this._attach(s)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};Zr[Bue]=!0,Zr.vnodeSelector="div",I([N()],Zr.prototype,"_readyForTrueRender",void 0),I([N({value:null})],Zr.prototype,"container",null),I([Sn("container")],Zr.prototype,"castContainer",null),I([N()],Zr.prototype,"icon",null),I([N()],Zr.prototype,"id",null),I([N()],Zr.prototype,"label",null),I([N()],Zr.prototype,"renderable",null),I([N()],Zr.prototype,"uiStrings",void 0),I([N()],Zr.prototype,"viewModel",void 0),I([N({value:!0})],Zr.prototype,"visible",null),I([N()],Zr.prototype,"key",void 0),I([N()],Zr.prototype,"children",void 0),I([N()],Zr.prototype,"afterCreate",void 0),I([N()],Zr.prototype,"afterUpdate",void 0),I([N()],Zr.prototype,"afterRemoved",void 0),Zr=I([De(k7e)],Zr);const hx=Zr;function bg(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var O7e=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},Uue=function(t,e){for(var i=0,s=t.length;i<s;i++){var n=t[i];Array.isArray(n)?Uue(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=O7e(n)),e.push(n))}},R7e=function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return Uue(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function kt(t,e,...i){return typeof t!="function"||XI(t)?R7e(t,e,...i):t(e,...i)}function L7e(...t){return t}const Yue="calcite-mode-";function F7e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function z7e(){return F7e().startsWith("dark")}function Xue(){return`${Yue}${z7e()?"dark":"light"}`}function ght(t){q7e(t),t.classList.add(Xue())}function q7e(t){Array.from(t.classList).forEach(e=>{e.startsWith(Yue)&&t.classList.remove(e)})}const lk="esri-identity-modal",uk={base:lk,info:`${lk}__info`,notice:`${lk}__notice`},V7e="ArcGIS Online";let du=class extends hx{constructor(e,i){super(e,i),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return cx({button:()=>nt(()=>import("./calcite-button-h_yn8oa6.js"),[],import.meta.url),dialog:()=>nt(()=>Promise.resolve().then(()=>GSe),void 0,import.meta.url),input:()=>nt(()=>import("./calcite-input-DlolSDaM.js"),__vite__mapDeps([87,88,89,90,91,92]),import.meta.url),label:()=>nt(()=>import("./calcite-label-D4re2yoh.js"),[],import.meta.url),notice:()=>nt(()=>import("./calcite-notice-mOUCqbbV.js"),[],import.meta.url)})}get title(){var e;return(e=this.commonMessages)==null?void 0:e.auth.signIn}render(){var G;const{open:e,title:i,messages:s,signingIn:n,oAuthPrompt:r,server:o,resource:l,error:c}=this,{info:f,oAuthInfo:y,lblItem:_,invalidUser:x,noAuthService:S,lblUser:P,lblPwd:A,lblCancel:k,lblSigning:$,lblOk:F}=s;return kt("div",{class:this.classes(uk.base,Xue())},kt("form",{bind:this,onsubmit:this._submit},kt("calcite-dialog",{bind:this,heading:i,modal:!0,open:e,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteDialogClose:this._cancel,onCalciteDialogOpen:this._focusUsernameInput},kt("div",{class:uk.info},uue(r?y:f,{server:o&&/\.arcgis\.com/i.test(o)?V7e:o,resource:`(${l||_})`})),c?kt("calcite-notice",{class:uk.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},kt("div",{slot:"message"},(G=c.details)!=null&&G.httpStatus?x:S)):null,r?null:[kt("calcite-label",null,P,kt("calcite-input",{afterCreate:V=>this._usernameInputNode=V,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),kt("calcite-label",null,A,kt("calcite-input",{afterCreate:V=>this._passwordInputNode=V,bind:this,name:"password",required:!0,type:"password",value:""}))],kt("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"footer-end",type:"button"},k),kt("calcite-button",{loading:!!n,slot:"footer-end",type:"submit"},n?$:F))))}_focusUsernameInput(){return kue(()=>this._usernameInputNode)}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){var s,n;e.preventDefault(),this._set("signingIn",!0);const i=this.oAuthPrompt?{}:{username:(s=this._usernameInputNode)==null?void 0:s.value,password:(n=this._passwordInputNode)==null?void 0:n.value};this.emit("submit",i)}};I([N({readOnly:!0})],du.prototype,"container",void 0),I([N(),bg("esri/t9n/common")],du.prototype,"commonMessages",void 0),I([N()],du.prototype,"error",void 0),I([N(),bg("esri/identity/t9n/identity")],du.prototype,"messages",void 0),I([N()],du.prototype,"oAuthPrompt",void 0),I([N()],du.prototype,"open",void 0),I([N()],du.prototype,"signingIn",void 0),I([N()],du.prototype,"server",void 0),I([N({readOnly:!0})],du.prototype,"title",null),I([N()],du.prototype,"resource",void 0),du=I([De("esri.identity.IdentityModal")],du);const mZ=du,ck="esriJSAPIOAuth";let _O=class{constructor(e,i){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=i,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token)){if(this.expires==null&&this.refreshToken)e=!0;else if(this.expires){const i=Date.now();this.expires>i&&(this.expires-i)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}}return e}save(){if(!this.storage)return!1;const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.authNamespace&&i.portalUrl){let s=e[i.authNamespace];s||(s=e[i.authNamespace]={}),this.appId||(this.appId=i.appId),s[i.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(ck,JSON.stringify(e))}catch(n){return console.warn(n),!1}return!0}return!1}destroy(){const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.appId&&(i!=null&&i.portalUrl)&&(this.expires==null||this.expires>Date.now())&&(this.refreshToken||this.token)){const s=i.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",n=new FormData;if(n.append("f","json"),n.append("auth_token",this.refreshToken||this.token),n.append("client_id",i.appId),n.append("token_type_hint",this.refreshToken?"refresh_token":"access_token"),typeof navigator.sendBeacon=="function")navigator.sendBeacon(s,n);else{const r=new XMLHttpRequest;r.open("POST",s),r.send(n)}}if(i!=null&&i.authNamespace&&i.portalUrl&&this.storage){const s=e[i.authNamespace];if(s){delete s[i.portalUrl];try{this.storage.setItem(ck,JSON.stringify(e))}catch(n){console.log(n)}}}i&&(i._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.authNamespace&&i.portalUrl){let s=e[i.authNamespace];s&&(s=s[i.portalUrl],s&&(this.appId=s.appId,this.codeVerifier=s.codeVerifier,this.expires=s.expires,this.refreshToken=s.refreshToken,this.ssl=s.ssl,this.stateUID=s.stateUID,this.token=s.token,this.userId=s.userId))}}_load(){let e={};if(this.storage){const i=this.storage.getItem(ck);if(i)try{e=JSON.parse(i)}catch(s){console.warn(s)}}return e}};_O.prototype.declaredClass="esri.identity.OAuthCredential";var bO;let aa=bO=class extends wt{constructor(t){super(t),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return bO.fromJSON(this.toJSON())}};I([N({json:{write:!0}})],aa.prototype,"appId",void 0),I([N({json:{write:!0}})],aa.prototype,"authNamespace",void 0),I([N({json:{write:!0}})],aa.prototype,"expiration",void 0),I([N({json:{write:!0}})],aa.prototype,"flowType",void 0),I([N({json:{write:!0}})],aa.prototype,"forceLogin",void 0),I([N({json:{write:!0}})],aa.prototype,"forceUserId",void 0),I([N({json:{write:!0}})],aa.prototype,"locale",void 0),I([N({json:{write:!0}})],aa.prototype,"minTimeUntilExpiration",void 0),I([N({json:{write:!0}})],aa.prototype,"popup",void 0),I([N({json:{write:!0}})],aa.prototype,"popupCallbackUrl",void 0),I([N({json:{write:!0}})],aa.prototype,"popupWindowFeatures",void 0),I([N({json:{write:!0}})],aa.prototype,"portalUrl",void 0),I([N({json:{write:!0}})],aa.prototype,"preserveUrlHash",void 0),I([N({json:{write:!0}})],aa.prototype,"userId",void 0),aa=bO=I([De("esri.identity.OAuthInfo")],aa);const gZ=aa;let fu=class extends wt{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};I([N({json:{write:!0}})],fu.prototype,"adminTokenServiceUrl",void 0),I([N({json:{write:!0}})],fu.prototype,"currentVersion",void 0),I([N({json:{write:!0}})],fu.prototype,"hasPortal",void 0),I([N({json:{write:!0}})],fu.prototype,"hasServer",void 0),I([N({json:{write:!0}})],fu.prototype,"owningSystemUrl",void 0),I([N({json:{write:!0}})],fu.prototype,"owningTenant",void 0),I([N({json:{write:!0}})],fu.prototype,"server",void 0),I([N({json:{write:!0}})],fu.prototype,"shortLivedTokenValidity",void 0),I([N({json:{write:!0}})],fu.prototype,"tokenServiceUrl",void 0),I([N({json:{write:!0}})],fu.prototype,"webTierAuth",void 0),fu=I([De("esri.identity.ServerInfo")],fu);const hk=fu,AT={},Wue=t=>{const e=new Hl(t.owningSystemUrl).host,i=new Hl(t.server).host,s=/.+\.arcgis\.com$/i;return s.test(e)&&s.test(i)},xO=(t,e)=>!!(Wue(t)&&e&&e.some(i=>i.test(t.server)));let DT=null,kT=null;try{DT=window.localStorage,kT=window.sessionStorage}catch{}let Zue=class extends Sa{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=window.origin!=="null"?window.origin:window.location.origin,this._appUrlObj=yl(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^/]+\/[^/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^/]+).*/i,this._gwItem=/http.+\/items\/([^/]+).*/i,this._gwGroup=/http.+\/groups\/([^/]+).*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getPlatformSelfError=null,this._getOAuthLocationParams(),window.addEventListener("pageshow",e=>{this._pageShowHandler(e)})}registerServers(e){const i=this.serverInfos;i?(e=e.filter(s=>!this.findServerInfo(s.server)),this.serverInfos=i.concat(e)):this.serverInfos=e,e.forEach(s=>{s.owningSystemUrl&&this._portals.push(s.owningSystemUrl),s.hasPortal&&this._portals.push(s.server)})}registerOAuthInfos(e){const i=this.oAuthInfos;if(i){for(const s of e){const n=this.findOAuthInfo(s.portalUrl);n&&i.splice(i.indexOf(n),1)}this.oAuthInfos=i.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const i=this._sanitizeUrl(e.server),s=this._isServerRsrc(i);let n,r=this.findServerInfo(i),o=!0;r||(r=new hk,r.server=this._getServerInstanceRoot(i),s?r.hasServer=!0:(r.tokenServiceUrl=this._getTokenSvcUrl(i),r.hasPortal=!0),this.registerServers([r])),n=this._findCredential(i),n?(delete e.server,Object.assign(n,e),o=!1):(n=new Un({userId:e.userId,server:r.server??void 0,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?"server":"portal"}),n.resources=[i],this.credentials.push(n)),n.emitTokenChange(!1),o||n.refreshServerTokens()}toJSON(){return mq({serverInfos:this.serverInfos.map(e=>e.toJSON()),oAuthInfos:this.oAuthInfos.map(e=>e.toJSON()),credentials:this.credentials.map(e=>e.toJSON())})}initialize(e){if(!e)return;typeof e=="string"&&(e=JSON.parse(e));const i=e.serverInfos,s=e.oAuthInfos,n=e.credentials;if(i){const r=[];i.forEach(o=>{o.server&&o.tokenServiceUrl&&r.push(o.declaredClass?o:new hk(o))}),r.length&&this.registerServers(r)}if(s){const r=[];s.forEach(o=>{o.appId&&r.push(o.declaredClass?o:new gZ(o))}),r.length&&this.registerOAuthInfos(r)}n&&n.forEach(r=>{r.server&&r.token&&r.expires&&r.expires>Date.now()&&((r=r.declaredClass?r:new Un(r)).emitTokenChange(),this.credentials.push(r))})}findServerInfo(e){let i;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){i=s;break}return i}findOAuthInfo(e){let i;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){i=s;break}return i}findCredential(e,i){if(!e)return;let s;e=this._sanitizeUrl(e);const n=this._isServerRsrc(e)?"server":"portal";if(i){for(const r of this.credentials)if(this._hasSameServerInstance(r.server,e)&&i===r.userId&&r.scope===n){s=r;break}}else for(const r of this.credentials)if(this._hasSameServerInstance(r.server,e)&&this._getIdenticalSvcIdx(e,r)!==-1&&r.scope===n){s=r;break}return s}getCredential(e,i){let s,n,r=!0;i&&(s=!!i.token,n=i.error,r=i.prompt!==!1),i={...i},e=this._sanitizeUrl(e);const o=new AbortController,l=Cu();if(i.signal&&Bl(i.signal,()=>{o.abort()}),Bl(o,()=>{l.reject(new rt("identity-manager:user-aborted","ABORTED"))}),$u(o))return l.promise;i.signal=o.signal;const c=this._isAdminResource(e),f=s?this.findCredential(e):null;let y;if(f&&n&&n.details&&n.details.httpStatus===498)f.destroy();else if(f)return y=new rt("identity-manager:not-authorized","You are currently signed in as: '"+f.userId+"'. You do not have access to this resource: "+e,{error:n}),l.reject(y),l.promise;const _=this._findCredential(e,i);if(_)return l.resolve(_),l.promise;let x=this.findServerInfo(e);if(x)!x.hasPortal&&x.server&&x.owningSystemUrl&&this._hasSameServerInstance(x.server,x.owningSystemUrl)&&(x.hasPortal=!0),!x.hasServer&&this._isServerRsrc(e)&&(x._restInfoPms=this._getTokenSvcUrl(e),x.hasServer=!0);else{const S=this._getTokenSvcUrl(e);if(!S)return y=new rt("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),l.reject(y),l.promise;x=new hk,x.server=this._getServerInstanceRoot(e),typeof S=="string"?(x.tokenServiceUrl=S,x.hasPortal=!0):(x._restInfoPms=S,x.hasServer=!0),this.registerServers([x])}return x.hasPortal&&x._selfReq===void 0&&(r||ql(x.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(S=>S.tokenServiceUrl===x.tokenServiceUrl))&&(x._selfReq={owningTenant:i==null?void 0:i.owningTenant,selfDfd:this._getPortalSelf(x.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,x,i,l,c)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,i,s){const n=this._rePortalTokenSvc.test(e.tokenServiceUrl),r=new Hl(this._appOrigin),o=e.shortLivedTokenValidity;let l,c,f,y,_,x,S,P;i&&(P=this.tokenValidity||o||this._defaultTokenValidity,P>o&&o>0&&(P=o)),s&&(l=s.isAdmin,c=s.serverUrl,f=s.token,x=s.signal,S=s.ssl,e.customParameters=s.customParameters),l?y=e.adminTokenServiceUrl:(y=e.tokenServiceUrl,_=new Hl(y.toLowerCase()),e.webTierAuth&&(s!=null&&s.serverUrl)&&!S&&r.scheme==="http"&&(ql(r.uri,y,!0)||_.scheme==="https"&&r.host===_.host&&r.port==="7080"&&_.port==="7443")&&(y=y.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const A={query:{request:"getToken",username:i==null?void 0:i.username,password:i==null?void 0:i.password,serverUrl:c,token:f,expiration:P,referer:l||n?this._appOrigin:null,client:l?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,s),signal:x,...s==null?void 0:s.ioArgs};return n||(A.withCredentials=!1),Qs(y,A).then(k=>{const $=k.data;if(!($!=null&&$.token))return new rt("identity-manager:authentication-failed","Unable to generate token");const F=e.server;return AT[F]||(AT[F]={}),i&&(AT[F][i.username]=i.password),$.validity=P,$})}isBusy(){return!!this._busy}async checkSignInStatus(e){return(await this.checkAppAccess(e,"")).credential}checkAppAccess(e,i,s){let n=!1;return this.getCredential(e,{prompt:!1}).then(r=>{let o;const l={f:"json"};if(r.scope==="portal")if(i&&(this._doPortalSignIn(e)||s!=null&&s.force))o=r.server+"/sharing/rest/oauth2/validateAppAccess",l.client_id=i;else{if(!r.token)return{credential:r};o=r.server+"/sharing/rest"}else{if(!r.token)return{credential:r};o=r.server+"/rest/services"}return r.token&&(l.token=r.token),Qs(o,{query:l,authMode:"anonymous"}).then(c=>{if(c.data.valid===!1)throw new rt("identity-manager:not-authorized",`You are currently signed in as: '${r.userId}'.`,c.data);return n=!!c.data.viewOnlyUserTypeApp,{credential:r}}).catch(c=>{var y;if(c.name==="identity-manager:not-authorized")throw c;const f=(y=c.details)==null?void 0:y.httpStatus;if(f===498)throw r.destroy(),new rt("identity-manager:not-authenticated","User is not signed in.");if(f===400)throw new rt("identity-manager:invalid-request");return{credential:r}})}).then(r=>({credential:r.credential,viewOnly:n}))}setOAuthResponseHash(e){e&&(e.charAt(0)==="#"&&(e=e.slice(1)),this._processOAuthPopupParams(Sy(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,i,s={}){const n=Cu(),r=()=>{var y;c==null||c.remove(),f==null||f.remove(),(y=this.dialog)==null||y.destroy(),this.dialog=c=f=null},o=()=>{r(),this._oAuthDfd=null,n.reject(new rt("identity-manager:user-aborted","ABORTED"))};s.signal&&Bl(s.signal,()=>{o()});const l=new mZ({open:!0,resource:this.getResourceName(e),server:i.server});this.dialog=l,this.emit("dialog-create");let c=l.on("cancel",o),f=l.on("submit",y=>{this.generateToken(i,y,{isAdmin:s.isAdmin,signal:s.signal}).then(_=>{r();const x=new Un({userId:y.username,server:i.server??void 0,token:_.token,expires:_.expires!=null?Number(_.expires):null,ssl:!!_.ssl,isAdmin:s.isAdmin,validity:_.validity});n.resolve(x)}).catch(_=>{l.error=_,l.signingIn=!1})});return n.promise}oAuthSignIn(e,i,s,n){this._oAuthDfd=Cu();const r=this._oAuthDfd;let o;n!=null&&n.signal&&Bl(n.signal,()=>{const x=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;x&&!x.closed?x.close():this.dialog&&y()}),r.resUrl_=e,r.sinfo_=i,r.oinfo_=s;const l=s._oAuthCred;if(l.storage&&(s.flowType==="authorization-code"||s.flowType==="auto"&&i.currentVersion>=8.4)){let x=crypto.getRandomValues(new Uint8Array(32));o=V8(x),l.codeVerifier=o,x=crypto.getRandomValues(new Uint8Array(32)),l.stateUID=V8(x),l.save()||(l.codeVerifier=o=null)}else l.codeVerifier=null;let c,f;this._getCodeChallenge(o).then(x=>{const S=!n||n.oAuthPopupConfirmation!==!1;if(!s.popup||!S)return void this._doOAuthSignIn(e,i,s,x);const P=new mZ({oAuthPrompt:!0,server:i.server,open:!0});this.dialog=P,this.emit("dialog-create"),c=P.on("cancel",y),f=P.on("submit",()=>{_(),this._doOAuthSignIn(e,i,s,x)})});const y=()=>{_(),this._oAuthDfd=null,r.reject(new rt("identity-manager:user-aborted","ABORTED"))},_=()=>{var x;c==null||c.remove(),f==null||f.remove(),(x=this.dialog)==null||x.destroy(),this.dialog=null};return r.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach(e=>{e.destroy()}),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=Oy(window,"message",i=>{var s;if((i.origin===this._appOrigin||i.origin.endsWith(".arcgis.com"))&&((s=i.data)==null?void 0:s.type)==="arcgis:auth:requestCredential"){const n=i.source;this.getCredential(e).then(r=>{n.postMessage({type:"arcgis:auth:credential",credential:{expires:r.expires,server:r.server,ssl:r.ssl,token:r.token,userId:r.userId}},i.origin)}).catch(r=>{n.postMessage({type:"arcgis:auth:error",error:{name:r.name,message:r.message}},i.origin)})}})}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){var s,n;let e=window.location.hash;if(e){e.charAt(0)==="#"&&(e=e.slice(1));const r=Sy(e);let o=!1;if(r.access_token&&r.expires_in&&r.state&&r.hasOwnProperty("username"))try{r.state=JSON.parse(r.state),r.state.portalUrl&&(this._oAuthLocationParams=r,o=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(o=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}o&&(window.location.hash=((s=r.state)==null?void 0:s.hash)||"")}let i=window.location.search;if(i){i.charAt(0)==="?"&&(i=i.slice(1));const r=Sy(i);let o=!1;if(r.code&&r.state)try{r.state=JSON.parse(r.state),r.state.portalUrl&&r.state.uid&&(this._oAuthLocationParams=r,o=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(o=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}if(o){const l={...r};["code","error","error_description","message_code","persist","state"].forEach(y=>{delete l[y]});const c=Zy(l),f=window.location.pathname+(c?`?${c}`:"")+(((n=r.state)==null?void 0:n.hash)||"");window.history.replaceState(window.history.state,"",f)}}}_getOAuthToken(e,i,s,n,r){return e=e.replace(/^http:/i,"https:"),Qs(`${e}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:n&&r?{grant_type:"authorization_code",code:i,redirect_uri:n,client_id:s,code_verifier:r}:{grant_type:"refresh_token",refresh_token:i,client_id:s}}).then(o=>o.data)}async _getCodeChallenge(e){if(e&&globalThis.isSecureContext){const i=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",i);return V8(new Uint8Array(s))}return null}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const i=new rt("identity-manager:user-aborted","ABORTED");this._errbackFunc(i)}}_findCredential(e,i){let s,n,r,o,l=-1;const c=i==null?void 0:i.token,f=i==null?void 0:i.resource,y=this._isServerRsrc(e)?"server":"portal",_=this.credentials.filter(x=>this._hasSameServerInstance(x.server,e)&&x.scope===y);if(e=f||e,_.length)if(_.length===1){if(s=_[0],r=this.findServerInfo(s.server),n=r==null?void 0:r.owningSystemUrl,o=n?this.findCredential(n,s.userId):void 0,l=this._getIdenticalSvcIdx(e,s),!c)return l===-1&&s.resources.push(e),this._addResource(e,o),s;l!==-1&&(s.resources.splice(l,1),this._removeResource(e,o))}else{let x,S;if(_.some(P=>(S=this._getIdenticalSvcIdx(e,P),S!==-1&&(x=P,r=this.findServerInfo(x.server),n=r==null?void 0:r.owningSystemUrl,o=n?this.findCredential(n,x.userId):void 0,l=S,!0))),c)x&&(x.resources.splice(l,1),this._removeResource(e,o));else if(x)return this._addResource(e,o),x}}_findOAuthInfo(e){let i=this.findOAuthInfo(e);if(!i){for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){i=s;break}}return i}_addResource(e,i){i&&this._getIdenticalSvcIdx(e,i)===-1&&i.resources.push(e)}_removeResource(e,i){let s=-1;i&&(s=this._getIdenticalSvcIdx(e,i),s>-1&&i.resources.splice(s,1))}_useProxy(e,i){return(i==null?void 0:i.isAdmin)&&!ql(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&String(e.currentVersion)==="10.1"&&!ql(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const i=new Hl(e);return i.scheme+"://"+i.host+(i.port!=null?":"+i.port:"")}_getServerInstanceRoot(e){const i=e.toLowerCase();let s=i.indexOf(this._agsRest);return s===-1&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),s!==-1||dae(i)||(s=i.indexOf("/sharing")),s===-1&&i.endsWith("/")&&(s=i.length-1),s>-1?e.slice(0,s):e}_hasSameServerInstance(e,i){return e.endsWith("/")&&(e=e.slice(0,-1)),e=e.toLowerCase(),i=this._getServerInstanceRoot(i).toLowerCase(),e=PI(e),i=PI(i),(e=e.slice(Math.max(0,e.indexOf(":"))))===(i=i.slice(Math.max(0,i.indexOf(":"))))}_sanitizeUrl(e){const i=(Gs.request.proxyUrl||"").toLowerCase(),s=i?e.toLowerCase().indexOf(i+"?"):-1;return s!==-1&&(e=e.slice(s+i.length+1)),e=Fc(e),yl(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,i){let s=!1;if(this._isRESTService(e)&&this._isRESTService(i)){const n=this._getSuffix(e).toLowerCase(),r=this._getSuffix(i).toLowerCase();if(s=n===r,!s){const o=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;s=n.replaceAll(o,"$1")===r.replaceAll(o,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(i)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(i)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const i=new Hl(e.toLowerCase()),s=this._portalConfig;let n=this._gwDomains.some(r=>r.regex.test(i.uri));return!n&&s&&(n=this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),i.uri)),n||Gs.portalUrl&&(n=ql(i,Gs.portalUrl,!0)),n||(n=this._portals.some(r=>this._hasSameServerInstance(r,i.uri))),n=n||this._agsPortal.test(i.path),n}_isIdProvider(e,i){let s=-1,n=-1;this._gwDomains.forEach((o,l)=>{s===-1&&o.regex.test(e)&&(s=l),n===-1&&o.regex.test(i)&&(n=l)});let r=!1;if(s>-1&&n>-1&&(s===0||s===4?n!==0&&n!==4||(r=!0):s===1?n!==1&&n!==2||(r=!0):s===2?n===2&&(r=!0):s===3&&n===3&&(r=!0)),!r){const o=this.findServerInfo(i),l=o==null?void 0:o.owningSystemUrl;l&&Wue(o)&&this._isPortalDomain(l)&&this._isIdProvider(e,l)&&(r=!0)}return r}_getIdenticalSvcIdx(e,i){let s=-1;for(let n=0;n<i.resources.length;n++){const r=i.resources[n];if(this._isIdenticalService(e,r)){s=n;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let i,s,n;if(this._isRESTService(e)||this._isAdminResource(e)){const r=this._getServerInstanceRoot(e);return i=r+"/admin/generateToken",s=Qs(e=r+"/rest/info",{query:{f:"json"}}).then(o=>o.data),{adminUrl:i,promise:s}}if(this._isPortalDomain(e)){let r="";if(this._gwDomains.some(o=>(o.regex.test(e)&&(r=o.tokenServiceUrl),!!r)),r||this._portals.some(o=>(this._hasSameServerInstance(o,e)&&(r=o+this._gwTokenUrl),!!r)),r||(n=e.toLowerCase().indexOf("/sharing"),n!==-1&&(r=e.slice(0,n)+this._gwTokenUrl)),r||(r=this._getOrigin(e)+this._gwTokenUrl),r){const o=new Hl(e).port;/^http:\/\//i.test(e)&&o==="7080"&&(r=r.replace(/:7080/i,":7443")),r=r.replace(/http:/i,"https:")}return r}}_processOAuthResponseParams(e,i,s){const n=i._oAuthCred;if(e.code){const o=n.codeVerifier;return n.codeVerifier=null,n.stateUID=null,n.save(),this._getOAuthToken(s.server,e.code,i.appId,this._getRedirectURI(i,!0),o).then(l=>{const c=new Un({userId:l.username,server:s.server??void 0,token:l.access_token,expires:Date.now()+1e3*l.expires_in,ssl:l.ssl,oAuthState:e.state,_oAuthCred:n});return i.userId=c.userId,n.storage=l.persist?DT:kT,n.refreshToken=l.refresh_token,n.token=null,n.expires=l.refresh_token_expires_in?Date.now()+1e3*l.refresh_token_expires_in:null,n.userId=c.userId,n.ssl=c.ssl,n.save(),c})}const r=new Un({userId:e.username,server:s.server??void 0,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:e.ssl==="true",oAuthState:e.state,_oAuthCred:n});return i.userId=r.userId,n.storage=e.persist?DT:kT,n.refreshToken=null,n.token=r.token,n.expires=r.expires,n.userId=r.userId,n.ssl=r.ssl,n.save(),Promise.resolve(r)}_processOAuthPopupParams(e){var s;const i=this._oAuthDfd;if(this._oAuthDfd=null,i)if(clearInterval(this._oAuthIntervalId),(s=this._oAuthOnPopupHandle)==null||s.remove(),e.error){const n=e.error==="access_denied",r=new rt(n?"identity-manager:user-aborted":"identity-manager:authentication-failed",n?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);i.reject(r)}else this._processOAuthResponseParams(e,i.oinfo_,i.sinfo_).then(n=>{i.resolve(n)}).catch(n=>{i.reject(n)})}_setOAuthResponseQueryString(e){e&&(e.charAt(0)==="?"&&(e=e.slice(1)),this._processOAuthPopupParams(Sy(e)))}async _exchangeToken(e,i,s){return(await Qs(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:i,token:s}})).data.token}async _getPlatformSelf(e,i){var s;if(this._getPlatformSelfError&&Date.now()-this._getPlatformSelfError[1]<1e3)throw this._getPlatformSelfError[0];e=e.replace(/^http:/i,"https:");try{const n=await Qs(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0});return this._getPlatformSelfError=null,n.data}catch(n){throw((s=n.details)==null?void 0:s.messageCode)==="OAUTH_0066"&&(this._getPlatformSelfError=[n,Date.now()]),n}}_getPortalSelf(e,i){let s;return this._gwDomains.some(n=>(n.regex.test(e)&&(s=n.customBaseUrl),!!s)),s?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:s,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(i)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),Qs(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(n=>n.data))}_doPortalSignIn(e){const i=this._portalConfig,s=window.location.href,n=this.findServerInfo(e);return!(!i&&!this._isPortalDomain(s)||!(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||i&&(this._hasSameServerInstance(this._getServerInstanceRoot(i.restBaseUrl),e)||this._isIdProvider(i.restBaseUrl,e))||ql(s,e,!0)))}_checkProtocol(e,i,s,n){let r=!0;const o=n?i.adminTokenServiceUrl:i.tokenServiceUrl;return o.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&yC(o)&&(r=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:i}),!r)&&s(new rt("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),r}_enqueue(e,i,s,n,r,o){return n||(n=Cu()),n.resUrl_=e,n.sinfo_=i,n.options_=s,n.admin_=r,n.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(n)):this._xoReqs.push(n):this._doSignIn(n),n.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const i=f=>{var k;const y=(k=e.options_)==null?void 0:k.resource,_=e.resUrl_,x=e.refresh_;let S=!1;this.credentials.includes(f)||(x&&this.credentials.includes(x)?(x.userId=f.userId,x.token=f.token,x.expires=f.expires,x.validity=f.validity,x.ssl=f.ssl,x.creationTime=f.creationTime,S=!0,f=x):this.credentials.push(f)),f.resources||(f.resources=[]),f.resources.includes(y||_)||f.resources.push(y||_),f.scope=this._isServerRsrc(_)?"server":"portal",f.emitTokenChange();const P=this._soReqs,A={};this._soReqs=[],P.forEach($=>{if(!this._isIdenticalService(_,$.resUrl_)){const F=this._getSuffix($.resUrl_);A[F]||(A[F]=!0,f.resources.push($.resUrl_))}}),e.resolve(f),P.forEach($=>{this._hasSameServerInstance(this._getServerInstanceRoot(_),$.resUrl_)?$.resolve(f):this._soReqs.push($)}),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,S||this.emit("credential-create",{credential:f}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=f=>{e.reject(f),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},n=(f,y,_,x)=>{var F,G,V;const S=e.sinfo_,P=!e.options_||e.options_.prompt!==!1,A=S.hasPortal&&this._findOAuthInfo(e.resUrl_);let k,$;if(f)i(new Un({userId:f,server:S.server??void 0,token:_??void 0,expires:x!=null?Number(x):null,ssl:!!y}));else if(window!==window.parent&&((F=this._appUrlObj.query)!=null&&F["arcgis-auth-origin"])&&((G=this._appUrlObj.query)!=null&&G["arcgis-auth-portal"])&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const B=Oy(window,"message",W=>{W.source===window.parent&&W.data&&(W.data.type==="arcgis:auth:credential"?(B.remove(),W.data.credential.expires<Date.now()?s(new rt("identity-manager:credential-request-failed","Parent application's token has expired.")):i(new Un(W.data.credential))):W.data.type==="arcgis:auth:error"&&(B.remove(),W.data.error.name==="tokenExpiredError"?s(new rt("identity-manager:credential-request-failed","Parent application's token has expired.")):s(rt.fromJSON(W.data.error))))});Bl((V=e.options_)==null?void 0:V.signal,()=>{B.remove()})}else if(A){let B=A._oAuthCred;if(!B){const W=new _O(A,DT),J=new _O(A,kT);W.isValid()&&J.isValid()?W.expires>J.expires?(B=W,J.destroy()):(B=J,W.destroy()):B=W.isValid()?W:J,A._oAuthCred=B}if(B.isValid()){k=new Un({userId:B.userId??void 0,server:S.server??void 0,token:B.token??void 0,expires:B.expires,ssl:B.ssl??void 0,_oAuthCred:B});const W=A.appId!==B.appId&&this._doPortalSignIn(e.resUrl_);W||B.refreshToken?(e._pendingDfd=B.refreshToken?this._getOAuthToken(S.server,B.refreshToken,B.appId).then(J=>(k.expires=Date.now()+1e3*J.expires_in,k.token=J.access_token,k)):Promise.resolve(k),e._pendingDfd.then(J=>W?this._exchangeToken(J.server,A.appId,J.token).then(re=>(J.token=re,J)).catch(()=>J):J).then(J=>{i(J)}).catch(J=>{var se;const re=(se=J.details)==null?void 0:se.httpStatus;re>0&&re!==404?(B.destroy(),n()):s(J)})):i(k)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(A.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===B.stateUID&&B.codeVerifier)){const W=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(W,A,S).then(J=>{i(J)}).catch(s)}else{const W=()=>{P?e._pendingDfd=this.oAuthSignIn(e.resUrl_,S,A,e.options_).then(i,s):($=new rt("identity-manager:not-authenticated","User is not signed in."),s($))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(S.server,A.appId).then(J=>{ql(J.portalUrl,this._appOrigin,!0)?(k=new Un({userId:J.username,server:S.server??void 0,expires:Date.now()+1e3*J.expires_in,token:J.token}),i(k)):W()}).catch(W):W()}}else if(P){if(this._checkProtocol(e.resUrl_,S,s,e.admin_)){let B=e.options_;e.admin_&&(B=B||{},B.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,S,B).then(i,s)}}else $=new rt("identity-manager:not-authenticated","User is not signed in."),s($)},r=()=>{const f=e.sinfo_,y=f.owningSystemUrl,_=e.options_;let x,S,P,A;if(_&&(x=_.token,S=_.error,P=_.prompt),A=this._findCredential(y,{token:x,resource:e.resUrl_}),!A){for(const k of this.credentials)if(this._isIdProvider(y,k.server)){A=k;break}}if(A){const k=this.findCredential(e.resUrl_,A.userId);if(k)i(k);else if(xO(f,this._legacyFed)){const $=A.toJSON();$.server=f.server,$.resources=null,i(new Un($))}else(e._pendingDfd=this.generateToken(this.findServerInfo(A.server),null,{serverUrl:e.resUrl_,token:A.token,signal:e.options_.signal,ssl:A.ssl})).then($=>{i(new Un({userId:A==null?void 0:A.userId,server:f.server??void 0,token:$.token,expires:$.expires!=null?Number($.expires):null,ssl:!!$.ssl,isAdmin:e.admin_,validity:$.validity}))},s)}else this._busy=null,x&&(e.options_.token=null),(e._pendingDfd=this.getCredential(y.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:f.owningTenant,signal:e.options_.signal,token:x,error:S,prompt:P})).then(()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)},k=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(k)})};this._errbackFunc=s;const o=e.sinfo_.owningSystemUrl,l=this._isServerRsrc(e.resUrl_),c=e.sinfo_._restInfoPms;c?c.promise.then(f=>{const y=e.sinfo_;if(y._restInfoPms){y.adminTokenServiceUrl=y._restInfoPms.adminUrl,y._restInfoPms=null,y.tokenServiceUrl=($p("authInfo.tokenServicesUrl",f)||$p("authInfo.tokenServiceUrl",f)||$p("tokenServiceUrl",f))??null,y.shortLivedTokenValidity=$p("authInfo.shortLivedTokenValidity",f)??null,y.currentVersion=f.currentVersion,y.owningTenant=f.owningTenant;const _=y.owningSystemUrl=f.owningSystemUrl;_&&this._portals.push(_)}l&&y.owningSystemUrl?r():n()},()=>{e.sinfo_._restInfoPms=null;const f=new rt("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");s(f)}):l&&o?r():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then(f=>{var A;const y={};let _,x,S,P;return f&&(_=(A=f.user)==null?void 0:A.username,y.username=_,y.allSSL=f.allSSL,x=f.supportsOAuth,P=parseFloat(f.currentVersion),f.portalMode==="multitenant"&&(S=f.customBaseUrl),e.sinfo_.currentVersion=P),e.sinfo_.webTierAuth=!!_,_&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:y.allSSL}).catch(()=>null).then(k=>(y.portalToken=k==null?void 0:k.token,y.tokenExpiration=k==null?void 0:k.expires,y)):!_&&x&&P>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:S,owningTenant:e.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>y):y}).catch(()=>null).then(f=>{e.sinfo_._selfReq=null,f?n(f.username,f.allSSL,f.portalToken,f.tokenExpiration):n()}):n()}_generateOAuthInfo(e){let i,s=null,n=e.portalUrl;const r=e.customBaseUrl,o=e.owningTenant,l=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(l){s=window.location.href;let c=s.indexOf("?");c>-1&&(s=s.slice(0,c)),c=s.search(/\/(apps|home)\//),s=c>-1?s.slice(0,c):null}return l&&s?(this._hasTestedIfAppIsOnPortal=!0,i=Qs(s+"/sharing/rest",{query:{f:"json"}}).then(()=>{this._defaultOAuthInfo=new gZ({appId:"arcgisonline",popupCallbackUrl:s+"/home/oauth-callback.html"})})):i=Promise.resolve(),i.then(()=>{if(this._defaultOAuthInfo)return n=n.replace(/^http:/i,"https:"),Qs(n+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:o,client_id:this._defaultOAuthInfo.appId,redirect_uri:pl(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(c=>{if(c.data.valid){const f=this._defaultOAuthInfo.clone();c.data.urlKey&&r?f.portalUrl="https://"+c.data.urlKey.toLowerCase()+"."+r:f.portalUrl=n,f.popup=window!==window.top||!(ql(n,this._appOrigin)||this._gwDomains.some(y=>y.regex.test(n)&&y.regex.test(this._appOrigin))),this.oAuthInfos.push(f)}})})}_doOAuthSignIn(e,i,s,n){const r=s._oAuthCred,o={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(o.hash=window.location.hash),r.stateUID&&(o.uid=r.stateUID);const l={client_id:s.appId,response_type:r.codeVerifier?"code":"token",state:JSON.stringify(o),expiration:s.expiration,locale:s.locale,redirect_uri:this._getRedirectURI(s,!!r.codeVerifier)};s.forceLogin&&(l.force_login=!0),s.forceUserId&&s.userId&&(l.prepopulatedusername=s.userId),!s.popup&&this._doPortalSignIn(e)&&(l.redirectToUserOrgUrl=!0),r.codeVerifier&&(l.code_challenge=n||r.codeVerifier,l.code_challenge_method=n?"S256":"plain");const c=s.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",f=c+"?"+Zy(l);if(s.popup){const y=window.open(f,"esriJSAPIOAuth",s.popupWindowFeatures);if(y)y.focus(),this._oAuthDfd.oAuthWin_=y,this._oAuthIntervalId=setInterval(()=>{if(y.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const _=this._oAuthDfd;if(_){const x=new rt("identity-manager:user-aborted","ABORTED");_.reject(x)}}},500),this._oAuthOnPopupHandle=Oy(window,["arcgis:auth:hash","arcgis:auth:location:search"],_=>{_.type==="arcgis:auth:hash"?this.setOAuthResponseHash(_.detail):this._setOAuthResponseQueryString(_.detail)});else{const _=new rt("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(_)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:l,authorizeUrl:c,resourceUrl:e,serverInfo:i,oAuthInfo:s}):window.location.href=f}_getRedirectURI(e,i){const s=window.location.href.replace(/#.*$/,"");if(e.popup)return pl(e.popupCallbackUrl);if(i){const n=yl(s);return n.query&&["code","error","error_description","message_code","persist","state"].forEach(r=>{delete n.query[r]}),gT(n.path,n.query)}return s}};Zue.prototype.declaredClass="esri.identity.IdentityManagerBase";let Un=class extends Sa.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e!=null&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],this.creationTime==null&&(this.creationTime=Date.now())}refreshToken(){const e=Li,i=e.findServerInfo(this.server),s=i==null?void 0:i.owningSystemUrl,n=!!s&&this.scope==="server",r=n&&xO(i,e._legacyFed),o=i.webTierAuth,l=o&&e.normalizeWebTierAuth,c=AT[this.server],f=c==null?void 0:c[this.userId];let y,_=this.resources&&this.resources[0],x=n?e.findServerInfo(s):null,S={username:this.userId,password:f};if(o&&!l)return;n&&!x&&e.serverInfos.some(A=>(e._isIdProvider(s,A.server)&&(x=A),!!x));const P=x?e.findCredential(x.server,this.userId):null;if(!n||P){if(!r){if(n)y={serverUrl:_,token:P==null?void 0:P.token,ssl:P==null?void 0:P.ssl};else if(l)S=null,y={ssl:this.ssl};else{if(!f){let A;return _&&(_=e._sanitizeUrl(_),this._enqueued=1,A=e._enqueue(_,i,null,null,this.isAdmin,this),A.then(()=>{this._enqueued=0,this.refreshServerTokens()}).catch(()=>{this._enqueued=0})),A}this.isAdmin&&(y={isAdmin:!0})}return e.generateToken(n?x:i,n?null:S,y).then(A=>{this.token=A.token,this.expires=A.expires!=null?Number(A.expires):null,this.creationTime=Date.now(),this.validity=A.validity,this.emitTokenChange(),this.refreshServerTokens()}).catch(()=>{})}P==null||P.refreshToken()}}refreshServerTokens(){if(this.scope==="portal"){const e=Li;e.credentials.forEach(i=>{const s=e.findServerInfo(i.server),n=s==null?void 0:s.owningSystemUrl;i!==this&&i.userId===this.userId&&n&&i.scope==="server"&&(e._hasSameServerInstance(this.server,n)||e._isIdProvider(n,this.server))&&(xO(s,e._legacyFed)?(i.token=this.token,i.expires=this.expires,i.creationTime=this.creationTime,i.validity=this.validity,i.emitTokenChange()):i.refreshToken())})}}emitTokenChange(e){clearTimeout(this._refreshTimer);const i=Li,s=this.server?i.findServerInfo(this.server):null,n=s==null?void 0:s.owningSystemUrl,r=n?i.findServerInfo(n):null;e===!1||n&&this.scope!=="portal"&&(!(r!=null&&r.webTierAuth)||i.normalizeWebTierAuth)||this.expires==null&&this.validity==null||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=Li,i=e.credentials.indexOf(this);i>-1&&e.credentials.splice(i,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=mq({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),i=this.resources;return i&&i.length>0&&(e.resources=i.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,i=2**31-1;let s=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();s<0?s=0:s>i&&(s=i),this._refreshTimer=setTimeout(this.refreshToken.bind(this),s>e?s-e:s)}};I([N()],Un.prototype,"creationTime",void 0),I([N()],Un.prototype,"expires",void 0),I([N()],Un.prototype,"isAdmin",void 0),I([N()],Un.prototype,"oAuthState",void 0),I([N()],Un.prototype,"resources",void 0),I([N()],Un.prototype,"scope",void 0),I([N()],Un.prototype,"server",void 0),I([N()],Un.prototype,"ssl",void 0),I([N()],Un.prototype,"token",void 0),I([N()],Un.prototype,"tokenRefreshBuffer",void 0),I([N()],Un.prototype,"userId",void 0),I([N()],Un.prototype,"validity",void 0),Un=I([De("esri.identity.Credential")],Un);let Kue=class extends Zue{};Kue.prototype.declaredClass="esri.identity.IdentityManager";const pV=new Kue;YTe(pV);const G7e=Object.freeze(Object.defineProperty({__proto__:null,default:pV},Symbol.toStringTag,{value:"Module"}));let U_=class extends ui{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(wq(()=>this._refresh(),Hp))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const s of e)s!=null&&(i=this._processCollection(i,s));this.splice(i,this.length)}_createNewInstance(e){return new ui(e)}_processCollection(e,i){if(!i)return e;const s=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(s(n)){const r=this.indexOf(n,e);r>=0?r!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const r=this.getChildrenFunction(n);if(Array.isArray(r))for(const o of r)e=this._processCollection(e,o);else e=this._processCollection(e,r)}}return e}};I([N()],U_.prototype,"getCollections",void 0),I([N()],U_.prototype,"getChildrenFunction",void 0),I([N()],U_.prototype,"itemFilterFunction",void 0),U_=I([De("esri.core.CollectionFlattener")],U_);const Jue=U_;async function j7e(t,e){return await t.load(),B7e(t,e)}async function B7e(t,e){const i=[],s=(...r)=>{for(const o of r)o!=null&&(Array.isArray(o)?s(...o):ui.isCollection(o)?o.forEach(l=>s(l)):vC.isLoadable(o)&&i.push(o))};e(s);let n=null;if(await KMe(i,async r=>{const o=await oV(H7e(r)?r.loadAll():r.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return t}function H7e(t){return"loadAll"in t&&typeof t.loadAll=="function"}let U7e=class Que{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(w$),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new Que,s=this._originStores[Bi.DEFAULTS];s&&s.forEach((n,r)=>{i.set(r,Ue(n),Bi.DEFAULTS)});for(let n=Bi.SERVICE;n<w$;n++){const r=this._originStores[n];r&&r.forEach((o,l)=>{e&&e.has(l)||i.set(l,Ue(o),n)})}return i}get(e,i){const s=i===void 0?this._values:this._originStores[i];return s?s.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,s=Bi.USER){let n=this._originStores[s];if(n||(n=new Map,this._originStores[s]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=s){const r=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,s),r!==i}return!1}delete(e,i=Bi.USER){const s=this._originStores[i];if(!s)return;const n=s.get(e);if(s.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let r=i-1;r>=0;r--){const o=this._originStores[r];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,r);break}}}return n}has(e,i){const s=i===void 0?this._values:this._originStores[i];return!!s&&s.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const s=this._originStores[i],n=s==null?void 0:s.get(e),r=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),r!==n}originOf(e){return this._propertyOriginMap.get(e)||Bi.DEFAULTS}forEach(e){this._values.forEach(e)}};const ece=t=>{let e=class extends t{constructor(...i){super(...i);const s=wl(this),n=s.store,r=new U7e;s.store=r,aae(s,n,r)}read(i,s){uae(this,i,s)}getAtOrigin(i,s){const n=dk(this),r=U0(s);if(typeof i=="string")return n.get(i,r);const o={};return i.forEach(l=>{o[l]=n.get(l,r)}),o}originOf(i){return fI(this.originIdOf(i))}originIdOf(i){return dk(this).originOf(i)}revert(i,s){const n=dk(this),r=U0(s),o=wl(this);let l;l=typeof i=="string"?i==="*"?n.keys(r):[i]:i,l.forEach(c=>{o.invalidate(c),n.revert(c,r),o.commit(c)})}};return e=I([De("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function dk(t){return wl(t).store}let yZ=class extends ece(Ei){};yZ=I([De("esri.core.ReadOnlyMultiOriginJSONSupport")],yZ);const Y7e=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,s="user"){return fk(this).delete(i,U0(s))}write(i,s){return hae(this,i=i||{},s),i}setAtOrigin(i,s,n){wl(this).setAtOrigin(i,s,U0(n))}removeOrigin(i){const s=fk(this),n=U0(i),r=s.keys(n);for(const o of r)s.originOf(o)===n&&s.set(o,s.get(o,n),Bi.USER)}updateOrigin(i,s){const n=fk(this),r=U0(s),o=Ac(this,i);for(let l=r+1;l<w$;++l)n.delete(i,l);n.set(i,o,r)}toJSON(i){return this.write({},i)}};return e=I([De("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function fk(t){return wl(t).store}const mV=t=>{let e=class extends Y7e(ece(t)){constructor(...i){super(...i)}};return e=I([De("esri.core.MultiOriginJSONSupport")],e),e};let vZ=class extends mV(Ei){};vZ=I([De("esri.core.MultiOriginJSONSupport")],vZ);function S2(t,e,i=!1){let{hasM:s,hasZ:n}=t;Array.isArray(e)?e.length!==4||s||n?e.length===3&&i&&!s?(n=!0,s=!1):e.length===3&&s&&n&&(s=!1,n=!1):(s=!0,n=!0):(n=!n&&e.hasZ&&(!s||e.hasM),s=!s&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=s}var wO;function _Z(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function X7e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let l0=wO=class extends Iv{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var n;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):X7e(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const s=(n=i.points)==null?void 0:n[0];return s&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=s.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=s.length>3:i.hasM===void 0&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new cr,i=this.hasZ,s=this.hasM,n=i?3:2,r=t[0],o=_Z(Math.min),l=_Z(Math.max);let c,f,y,_,[x,S]=r,[P,A]=r;for(let k=0,$=t.length;k<$;k++){const F=t[k],[G,V]=F;if(x=o(x,G),S=o(S,V),P=l(P,G),A=l(A,V),i&&F.length>2){const B=F[2];c=o(c,B),y=l(y,B)}if(s&&F.length>n){const B=F[n];f=o(f,B),_=l(_,B)}}return e.xmin=x,e.ymin=S,e.xmax=P,e.ymax=A,e.spatialReference=this.spatialReference,i?(e.zmin=c,e.zmax=y):(e.zmin=void 0,e.zmax=void 0),s?(e.mmin=f,e.mmax=_):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=Ue(this.points)}addPoint(t){return S2(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:Ue(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new wO(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(i.z=e[2],s=3),this.hasM&&(i.m=e[s]),new Hi(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Hi(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(S2(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};I([N({readOnly:!0})],l0.prototype,"cache",null),I([N()],l0.prototype,"extent",null),I([N({type:[[Number]],json:{write:{isRequired:!0}}})],l0.prototype,"points",void 0),I([Ft("points")],l0.prototype,"writePoints",null),l0=wO=I([De("esri.geometry.Multipoint")],l0),l0.prototype.toJSON.isDefaultToJSON=!0;const Dv=l0;function Pht(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function W7e(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var Hh;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(Hh||(Hh={}));function bZ(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const s=t.clone().normalize();if(!s)return null;let n=!1,r=!1;return s.forEach(o=>{o.hasZ&&(n=!0),o.hasM&&(r=!0)}),s.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const c=.5*(o.zmax-o.zmin);for(let f=0;f<l.length;f++)l[f].push(c)}if(r&&o.hasM){const c=.5*(o.mmax-o.mmin);for(let f=0;f<l.length;f++)l[f].push(c)}return l})}return null}function OM(t,e){const i=e[0]-t[0],s=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+s*s+n*n)}return Math.sqrt(i*i+s*s)}function tce(t,e,i){const s=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[s,n,t[2]+i*(e[2]-t[2])]:[s,n]}function Tht(t,e,i,s){return Z7e(t,e,i[s],i[s+1])}function Z7e(t,e,i,s){const[n,r]=e,[o,l]=i,[c,f]=s,y=c-o,_=f-l,x=y*y+_*_,S=(n-o)*y+(r-l)*_,P=Math.min(1,Math.max(0,S/x));return t[0]=o+y*P,t[1]=l+_*P,t}function Iht(t,e,i,s,n,r){let o=i,l=s,c=n-o,f=r-l;if(c!==0||f!==0){const y=((t-o)*c+(e-l)*f)/(c*c+f*f);y>1?(o=n,l=r):y>0&&(o+=c*y,l+=f*y)}return c=t-o,f=e-l,c*c+f*f}function ice(t,e){return tce(t,e,.5)}function Mht(t){const e=t.length;let i=0;for(let s=0;s<e-1;++s)i+=OM(t[s],t[s+1]);return i}function Aht(t,e){if(e<=0)return t[0];const i=t.length;let s=0;for(let n=0;n<i-1;++n){const r=OM(t[n],t[n+1]);if(e-s<r){const o=(e-s)/r;return tce(t[n],t[n+1],o)}s+=r}return t[i-1]}function RM(t,e=Hh.X,i=Hh.Y){let s=0;const n=t.length;let r=t[0];for(let o=1;o<n;o++){const l=t[o];s+=(l[e]-r[e])*(l[i]+r[i]),r=l}if(!sce(t)){const o=t[0];s+=(o[e]-r[e])*(o[i]+r[i])}return s>=0}function sce(t){const e=t.length;return e<3||df(t[0],t[e-1])}function Dht(t){"rings"in t&&(K7e(t),J7e(t))}function K7e(t){if(!("rings"in t))return!1;let e=!1;for(const i of t.rings)sce(i)||(i.push(i[0].slice()),e=!0);return e}function J7e(t){if(!("rings"in t)||t.rings.length===0||RM(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function nce(t){return t.type!=="polygon"&&t.type!=="polyline"||rce(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function rce(t,e){const i=jb(e);if(!i)return;const s=i.valid[0],n=i.valid[1],r=n-s;for(const o of t){let l=1/0,c=-1/0;for(const y of o){const _=Q7e(y[0],s,n);l=Math.min(l,_),c=Math.max(c,_),y[0]=_}const f=c-l;r-f<f&&o.forEach(y=>{y[0]<0&&(y[0]+=r)})}}function Q7e(t,e,i){const s=i-e;return t<e?i-(e-t)%s:t>i?e+(t-e)%s:t}function eDe(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,s]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===s.length&&i.every((n,r)=>n.length===s[r].length)}function kht(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function tDe(t){return t?iDe(t.rings,t.hasZ??!1):null}function iDe(t,e){if(!(t!=null&&t.length))return null;const i=[],s=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let r=0,o=t.length;r<o;r++){const l=oce(t[r],e,n);l&&s.push(l)}if(s.sort((r,o)=>{let l=r[2]-o[2];return l===0&&e&&(l=r[4]-o[4]),l}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],e&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const r=t[0]&&t[0].length?sDe(t[0],e):null;if(!r)return null;i[0]=r[0],i[1]=r[1],e&&r.length>2&&(i[2]=r[2])}return i}function oce(t,e,i){let s=0,n=0,r=0,o=0,l=0;const c=t.length?t[0][0]:0,f=t.length?t[0][1]:0,y=t.length&&e?t[0][2]:0;for(let x=0;x<t.length;x++){const S=t[x],P=t[(x+1)%t.length],[A,k,$]=S,F=A-c,G=k-f,[V,B,W]=P,J=V-c,re=B-f,se=F*re-J*G;if(o+=se,s+=(F+J)*se,n+=(G+re)*se,e&&S.length>2&&P.length>2){const oe=$-y,pe=W-y,ue=F*pe-J*oe;r+=(oe+pe)*ue,l+=ue}A<i[0]&&(i[0]=A),A>i[1]&&(i[1]=A),k<i[2]&&(i[2]=k),k>i[3]&&(i[3]=k),e&&($<i[4]&&(i[4]=$),$>i[5]&&(i[5]=$))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;o*=.5,l*=.5;const _=[s/(6*o)+c,n/(6*o)+f,o];return e&&(i[4]===i[5]||l===0?(_[3]=(i[4]+i[5])/2,_[4]=0):(_[3]=r/(6*l)+y,_[4]=l)),_}function Nht(t,e){let i=0,s=0,n=0;t.nextPoint();const r=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let l=0;l<t.pathSize;l++){t.seekInPath(l);const c=[t.x,t.y];t.seekInPath((l+1)%t.pathSize);const f=[t.x,t.y],[y,_]=c,x=y-r,S=_-o,[P,A]=f,k=P-r,$=A-o,F=x*$-k*S;n+=F,i+=(x+k)*F,s+=(S+$)*F,y<e[0]&&(e[0]=y),y>e[1]&&(e[1]=y),_<e[2]&&(e[2]=_),_>e[3]&&(e[3]=_)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+r,s/(6*n)+o,n]):null}function sDe(t,e){const i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let n=0,r=0,o=0,l=0;for(let c=0,f=t.length;c<f-1;c++){const y=t[c],_=t[c+1];if(y&&_){i[0]=y[0],i[1]=y[1],s[0]=_[0],s[1]=_[1],e&&y.length>2&&_.length>2&&(i[2]=y[2],s[2]=_[2]);const x=OM(i,s);if(x){n+=x;const S=ice(y,_);r+=x*S[0],o+=x*S[1],e&&S.length>2&&(l+=x*S[2])}}}return n>0?e?[r/n,o/n,l/n]:[r/n,o/n]:t.length?t[0]:null}function nDe(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const s=[],n=[],r=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=oce(W7e(t),t.hasZ,r);o&&n.push(o)}if(n.sort((o,l)=>{let c=o[2]-l[2];return c===0&&e&&(c=o[4]-l[4]),c}),n.length&&(s[0]=n[0][0],s[1]=n[0][1],e&&(s[2]=n[0][3]),(s[0]<r[0]||s[0]>r[1]||s[1]<r[2]||s[1]>r[3]||e&&(s[2]<r[4]||s[2]>r[5]))&&(s.length=0)),!s.length){t.reset(),t.nextPath();const o=t.pathSize?rDe(t):null;if(!o)return null;s[0]=o[0],s[1]=o[1],e&&o.length>2&&(s[2]=o[2])}return s}function rDe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let n=0,r=0,o=0,l=0;if(t.nextPoint()){let c=t.x,f=t.y,y=t.z;for(;t.nextPoint();){const _=t.x,x=t.y,S=t.z;i[0]=c,i[1]=f,s[0]=_,s[1]=x,e&&(i[2]=y,s[2]=S);const P=OM(i,s);if(P){n+=P;const A=ice(i,s);r+=P*A[0],o+=P*A[1],e&&A.length>2&&(l+=P*A[2])}c=_,f=x,y=S}}return n>0?e?[r/n,o/n,l/n]:[r/n,o/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const oDe=1e-6;function $ht(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<oDe){const n=nDe(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const s=[t.x,t.y];for(t.reset();t.nextPath();)lDe(i,s,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=s[0],i[1]+=s[1],i}const aDe=1/3;function lDe(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const s=i.x,n=i.y;i.nextPoint();let r,o=i.x-s,l=i.y-n,c=0,f=0;for(;i.nextPoint();)c=i.x-s,f=i.y-n,r=.5*aDe*(c*l-f*o),t[0]+=r*(o+c),t[1]+=r*(l+f),o=c,l=f;const y=i.getCurrentRingArea(),_=[s,n];return _[0]-=e[0],_[1]-=e[1],_[0]*=y,_[1]*=y,t[0]+=_[0],t[1]+=_[1],t}const xZ=new Float32Array(1);function Oht(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Hc(t,e,i){return Math.min(Math.max(t,e),i)}function Rht(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function uDe(t,e,i){return t+(e-t)*i}function Lht(t,e,i,s,n){return uDe(s,n,(t-e)/(i-e))}function ace(t){return t*Math.PI/180}function cDe(t){return 180*t/Math.PI}function Fht(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function gV(t){return Math.acos(Hc(t,-1,1))}function yV(t){return Math.asin(Hc(t,-1,1))}function X0(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const WI=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function SO(t){return WI.setFloat64(0,t),WI.getBigInt64(0)}function hDe(t){return WI.setBigInt64(0,t),WI.getFloat64(0)}const NT=BigInt("1000000"),dDe=lce(1);function lce(t){const e=SO(t=Math.abs(t)),i=hDe(e<=NT?NT:e-NT);return Math.abs(t-i)}function zht(t,e,i=dDe){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&lce(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const s=SO(t),n=SO(e);return s<0!=n<0?!1:!((s<n?n-s:s-n)>NT)}function qht(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const s=Math.abs(t-e),n=Math.abs(t),r=Math.abs(e);if(t===0||e===0||n<1e-12&&r<1e-12){if(s>.01*i)return!1}else if(s/(n+r)>i)return!1;return!0}function Vht(t){return uce(Math.max(-wZ,Math.min(t,wZ)))}function uce(t){return xZ[0]=t,xZ[0]}function Ght(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],s=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(X0(e,1)&&X0(i,1)&&X0(s,1))}function jht(t,e){return(t%e+e)%e}const wZ=uce(34028234663852886e22);function Bht(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let s=e.toString().split("e");return s=(e=Math[t](+(s[0]+"e"+(s[1]?+s[1]-i:-i)))).toString().split("e"),+(s[0]+"e"+(s[1]?+s[1]+i:i))}function kv(t=mDe){return[t[0],t[1],t[2],t[3]]}function cce(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function Hht(t,e,i,s,n=kv()){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n}function Uht(t,e=kv()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function Yht(t,e){return new cr({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function Xht(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Wht(t,e,i){if(e!=null)if("length"in e)EO(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else cce(i,t)}function fDe(t,e,i=t){const s=e.length;let n=t[0],r=t[1],o=t[2],l=t[3];for(let c=0;c<s;c++){const f=e[c];n=Math.min(n,f[0]),r=Math.min(r,f[1]),o=Math.max(o,f[0]),l=Math.max(l,f[1])}return i[0]=n,i[1]=r,i[2]=o,i[3]=l,i}function Zht(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function hce(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function dce(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function Kht(t){return hce(t)*dce(t)}function Jht(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function Qht(t,e){return fce(t,e[0],e[1])}function edt(t,e){return fce(t,e.x,e.y)}function fce(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function tdt(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function idt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function sdt(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function ndt(t,e,i,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+e,s[3]=t[3]+i,s}function pDe(t,e,i=t){return i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i}function rdt(t){return t?cce(t,ZI):kv(ZI)}function EO(t){return t!=null&&t.length===4}function odt(t,e){return EO(t)&&EO(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const ZI=[1/0,1/0,-1/0,-1/0],mDe=[0,0,0,0];function pce(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function mce(t){return t.points!==void 0}function gce(t){return t.x!==void 0&&t.y!==void 0}function yce(t){return t.paths!==void 0}function vce(t){return t.rings!==void 0}function _ce(t){function e(i,s){return i==null?s:s==null?i:t(i,s)}return e}const W0=_ce(Math.min),Z0=_ce(Math.max);function adt(t,e){return yce(e)?E2(t,e.paths,!1,!1):vce(e)?E2(t,e.rings,!1,!1):mce(e)?vV(t,e.points,!1,!1,!1,!1):pce(e)?bce(t,e):(gce(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function ldt(t){let e,i,s,n;for(t.reset(),e=s=1/0,i=n=-1/0;t.nextPath();){const r=gDe(t);e=Math.min(r[0],e),s=Math.min(r[1],s),i=Math.max(r[2],i),n=Math.max(r[3],n)}return kv([e,s,i,n])}function gDe(t){let e,i,s,n;for(e=s=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),s=Math.min(t.y,s),i=Math.max(t.x,i),n=Math.max(t.y,n);return kv([e,s,i,n])}function udt(t,e){return yce(e)?E2(t,e.paths,!0,!1):vce(e)?E2(t,e.rings,!0,!1):mce(e)?vV(t,e.points,!0,!1,!0,!1):pce(e)?bce(t,e,!0,!1,!0,!1):(gce(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function E2(t,e,i,s){const n=i?3:2;if(!e.length||!e[0].length)return null;let r,o,l,c,[f,y]=e[0][0],[_,x]=e[0][0];for(let S=0;S<e.length;S++){const P=e[S];for(let A=0;A<P.length;A++){const k=P[A],[$,F]=k;if(f=W0(f,$),y=W0(y,F),_=Z0(_,$),x=Z0(x,F),i&&k.length>2){const G=k[2];r=W0(r,G),o=Z0(o,G)}if(s&&k.length>n){const G=k[n];l=W0(r,G),c=Z0(o,G)}}}return i?s?(t[0]=f,t[1]=y,t[2]=r,t[3]=l,t[4]=_,t[5]=x,t[6]=o,t[7]=c,t.length=8,t):(t[0]=f,t[1]=y,t[2]=r,t[3]=_,t[4]=x,t[5]=o,t.length=6,t):s?(t[0]=f,t[1]=y,t[2]=l,t[3]=_,t[4]=x,t[5]=c,t.length=6,t):(t[0]=f,t[1]=y,t[2]=_,t[3]=x,t.length=4,t)}function bce(t,e,i,s,n,r){const o=e.xmin,l=e.xmax,c=e.ymin,f=e.ymax;let y=e.zmin,_=e.zmax,x=e.mmin,S=e.mmax;return n?(y=y||0,_=_||0,r?(x=x||0,S=S||0,t[0]=o,t[1]=c,t[2]=y,t[3]=x,t[4]=l,t[5]=f,t[6]=_,t[7]=S,t):(t[0]=o,t[1]=c,t[2]=y,t[3]=l,t[4]=f,t[5]=_,t)):r?(x=x||0,S=S||0,t[0]=o,t[1]=c,t[2]=x,t[3]=l,t[4]=f,t[5]=S,t):(t[0]=o,t[1]=c,t[2]=l,t[3]=f,t)}function vV(t,e,i,s,n,r){const o=i?3:2,l=s&&r,c=i&&n;if(!e.length||!e[0].length)return null;let f,y,_,x,[S,P]=e[0],[A,k]=e[0];for(let $=0;$<e.length;$++){const F=e[$],[G,V]=F;if(S=W0(S,G),P=W0(P,V),A=Z0(A,G),k=Z0(k,V),c&&F.length>2){const B=F[2];f=W0(f,B),y=Z0(y,B)}if(l&&F.length>o){const B=F[o];_=W0(f,B),x=Z0(y,B)}}return n?(f=f||0,y=y||0,r?(_=_||0,x=x||0,t[0]=S,t[1]=P,t[2]=f,t[3]=_,t[4]=A,t[5]=k,t[6]=y,t[7]=x,t):(t[0]=S,t[1]=P,t[2]=f,t[3]=A,t[4]=k,t[5]=y,t)):r?(_=_||0,x=x||0,t[0]=S,t[1]=P,t[2]=_,t[3]=A,t[4]=k,t[5]=x,t):(t[0]=S,t[1]=P,t[2]=A,t[3]=k,t)}function yDe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function vDe(t){return t.points!==void 0}function _De(t){return t.x!==void 0&&t.y!==void 0}function bDe(t){return t.paths!==void 0}function xDe(t){return t.rings!==void 0}const _V=[];function xce(t,e,i,s){return{xmin:t,ymin:e,xmax:i,ymax:s}}function wce(t,e,i,s,n,r){return{xmin:t,ymin:e,zmin:i,xmax:s,ymax:n,zmax:r}}function Sce(t,e,i,s,n,r){return{xmin:t,ymin:e,mmin:i,xmax:s,ymax:n,mmax:r}}function Ece(t,e,i,s,n,r,o,l){return{xmin:t,ymin:e,zmin:i,mmin:s,xmax:n,ymax:r,zmax:o,mmax:l}}function bV(t,e=!1,i=!1){return e?i?Ece(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):wce(t[0],t[1],t[2],t[3],t[4],t[5]):i?Sce(t[0],t[1],t[2],t[3],t[4],t[5]):xce(t[0],t[1],t[2],t[3])}function cdt(t){return t?yDe(t)?t:_De(t)?SDe(t):xDe(t)?Cce(t):bDe(t)?Pce(t):vDe(t)?wDe(t):null:null}function wDe(t){const{hasZ:e,hasM:i,points:s}=t;return bV(vV(_V,s,e??!1,i??!1),e,i)}function SDe(t){const{x:e,y:i,z:s,m:n}=t,r=n!=null;return s!=null?r?Ece(e,i,s,n,e,i,s,n):wce(e,i,s,e,i,s):r?Sce(e,i,n,e,i,n):xce(e,i,e,i)}function Cce(t){const{hasZ:e,hasM:i,rings:s}=t,n=E2(_V,s,e??!1,i??!1);return n?bV(n,e,i):null}function Pce(t){const{hasZ:e,hasM:i,paths:s}=t,n=E2(_V,s,e??!1,i??!1);return n?bV(n,e,i):null}var $T;function SZ(t){return!Array.isArray(t[0])}function EDe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function CDe(t){var r,o;if(!t)return;let{rings:e,hasM:i,hasZ:s,spatialReference:n}=t;switch(e??(e=[]),EDe(e)&&(e=[e]),(o=(r=e[0])==null?void 0:r[0])==null?void 0:o.length){case 4:s??(s=!0),i??(i=!0);break;case 3:s??(s=i!==!0),i??(i=!s);break;default:s??(s=!1),i??(i=!1)}return n??(n=qi.WGS84),{...t,hasM:i,hasZ:s,rings:e,spatialReference:n}}let Fd=$T=class extends Iv{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let s=!1,n=!1;for(const o of e)o.hasZ&&(s=!0),o.hasM&&(n=!0);const r={rings:e.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const c=o.zmin+.5*(o.zmax-o.zmin);for(let f=0;f<l.length;f++)l[f].push(c)}if(n&&o.hasM){const c=o.mmin+.5*(o.mmax-o.mmin);for(let f=0;f<l.length;f++)l[f].push(c)}return l}),spatialReference:i};return s&&(r.hasZ=!0),n&&(r.hasM=!0),new $T(r)}constructor(t){super(CDe(t)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=tDe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Hi;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=Cce(this);if(!e)return null;const i=new cr(e);return i.spatialReference=t,i}get isSelfIntersecting(){return hIe(this.rings)}writeRings(t,e){e.rings=Ue(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(SZ(t)){const s=[];for(let n=0,r=t.length;n<r;n++)s[n]=t[n].toArray();e[i]=s}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new $T;return t.spatialReference=this.spatialReference,t.rings=Ue(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const s=([n,r,o,l],[c,f,y,_])=>n===c&&r===f&&(o==null&&y==null||o===y)&&(l==null&&_==null||l===_);for(let n=0;n<this.rings.length;n++){const r=this.rings[n],o=t.rings[n];if(!df(r,o,s))return!1}return!0}contains(t){if(!t)return!1;const e=Xae(t,this.spatialReference);return tIe(this,e??t)}isClockwise(t){const e=SZ(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return RM(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],s=this.hasZ,n=this.hasM;return s&&!n?new Hi(i[0],i[1],i[2],void 0,this.spatialReference):n&&!s?new Hi(i[0],i[1],void 0,i[2],this.spatialReference):s&&n?new Hi(i[0],i[1],i[2],i[3],this.spatialReference):new Hi(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(S2(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Hi(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,s=e.map(n=>new Hi(n,i));return this.notifyChange("rings"),s}setPoint(t,e,i){return this._validateInputs(t,e)?(S2(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const s=this.rings[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};I([N({readOnly:!0})],Fd.prototype,"cache",null),I([N({readOnly:!0})],Fd.prototype,"centroid",null),I([N({readOnly:!0})],Fd.prototype,"extent",null),I([N({readOnly:!0})],Fd.prototype,"isSelfIntersecting",null),I([N({type:[[[Number]]],json:{write:{isRequired:!0}}})],Fd.prototype,"rings",void 0),I([Ft("rings")],Fd.prototype,"writeRings",null),Fd=$T=I([De("esri.geometry.Polygon")],Fd);const Wa=Fd;Fd.prototype.toJSON.isDefaultToJSON=!0;var CO;function PDe(t){return!Array.isArray(t[0])}function TDe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function IDe(t){var r,o;if(!t)return;let{paths:e,hasM:i,hasZ:s,spatialReference:n}=t;switch(e??(e=[]),TDe(e)&&(e=[e]),(o=(r=e[0])==null?void 0:r[0])==null?void 0:o.length){case 4:s??(s=!0),i??(i=!0);break;case 3:s??(s=i!==!0),i??(i=!s);break;default:s??(s=!1),i??(i=!1)}return n??(n=qi.WGS84),{...t,hasM:i,hasZ:s,paths:e,spatialReference:n}}let $0=CO=class extends Iv{constructor(t){super(IDe(t)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=Pce(this);if(!e)return null;const i=new cr(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=Ue(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(PDe(t)){const s=[];for(let n=0,r=t.length;n<r;n++)s[n]=t[n].toArray();e[i]=s}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new CO;return t.spatialReference=this.spatialReference,t.paths=Ue(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],s=this.hasZ,n=this.hasM;return s&&!n?new Hi(i[0],i[1],i[2],void 0,this.spatialReference):n&&!s?new Hi(i[0],i[1],void 0,i[2],this.spatialReference):s&&n?new Hi(i[0],i[1],i[2],i[3],this.spatialReference):new Hi(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(S2(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,s=e.map(n=>new Hi(n,i));return this.notifyChange("paths"),s}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Hi(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(S2(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const s=this.paths[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};I([N({readOnly:!0})],$0.prototype,"cache",null),I([N({readOnly:!0})],$0.prototype,"extent",null),I([N({type:[[[Number]]],json:{write:{isRequired:!0}}})],$0.prototype,"paths",void 0),I([Ft("paths")],$0.prototype,"writePaths",null),$0=CO=I([De("esri.geometry.Polyline")],$0);const Ef=$0;$0.prototype.toJSON.isDefaultToJSON=!0;const MDe=wa()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),EZ=wa()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function Tce(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Ice(t){return t.points!==void 0}function Mce(t){return t.x!==void 0&&t.y!==void 0}function xV(t){return t.paths!==void 0}function Yb(t){return t.rings!==void 0}function EC(t){return t==null?null:t instanceof Iv?t:Mce(t)?Hi.fromJSON(t):xV(t)?Ef.fromJSON(t):Yb(t)?Wa.fromJSON(t):Ice(t)?Dv.fromJSON(t):Tce(t)?cr.fromJSON(t):null}function hdt(t){return t?Mce(t)?"esriGeometryPoint":xV(t)?"esriGeometryPolyline":Yb(t)?"esriGeometryPolygon":Tce(t)?"esriGeometryEnvelope":Ice(t)?"esriGeometryMultipoint":null:null}const ADe={esriGeometryPoint:Hi,esriGeometryPolyline:Ef,esriGeometryPolygon:Wa,esriGeometryEnvelope:cr,esriGeometryMultipoint:Dv,esriGeometryMultiPatch:Wa};function ddt(t){return t&&ADe[t]||null}const CC={base:Iv,key:"type",typeMap:{extent:cr,multipoint:Dv,point:Hi,polyline:Ef,polygon:Wa}};Bc(CC);let Ace=0;const PC=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Ace++})}};return e=I([De("esri.core.Identifiable")],e),e},fdt=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Ace++})}};return e=I([De("esri.core.Identifiable.NumericIdentifiable")],e),e};let CZ=class extends PC(class{}){};CZ=I([De("esri.core.Identifiable")],CZ);async function DDe(t){var s;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await nt(async()=>{const{fromItem:n}=await import("./portalLayers-VmjrFVzU.js").then(r=>r.p);return{fromItem:n}},__vite__mapDeps([93,94,95]),import.meta.url);try{return await i(e)}catch(n){const r=e==null?void 0:e.portalItem,o=(r==null?void 0:r.id)||"unset",l=((s=r==null?void 0:r.portal)==null?void 0:s.url)||Gs.portalUrl;throw zt.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",n),n}}const PZ={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function pk(t,e,i,s=Bp){const n=new Ru(iV(s)),r=hi.fromJSDate(t,{zone:n}),o=i==="decades"||i==="centuries"?"year":kce(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),r.plus({[o]:e}).toJSDate()}function mdt(t,e,i="milliseconds"){const s=t.getTime(),n=Dce(e,i,"milliseconds");return new Date(s+n)}function TZ(t,e,i=Bp){const s=new Ru(iV(i)),n=hi.fromJSDate(t,{zone:s});if(e==="decades"||e==="centuries"){const o=n.startOf("year"),{year:l}=o,c=l-l%(e==="decades"?10:100);return o.set({year:c}).toJSDate()}const r=kce(e);return n.startOf(r).toJSDate()}function Dce(t,e,i){return t===0?0:t*PZ[e]/PZ[i]}function kDe(t,e){return t&&e?t.intersection(e):t||e}function kce(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var dc;let bu=dc=class extends wt{static get allTime(){return IZ}static get empty(){return NDe}static fromArray(t){return new dc({start:t[0]!=null?new Date(t[0]):t[0],end:t[1]!=null?new Date(t[1]):t[1]})}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(dc.allTime)}get isEmpty(){return this.equals(dc.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=(t==null?void 0:t.getTime())??null}clone(){return new dc({end:this.end,start:this.start})}equals(t){var r,o,l,c;if(!t)return!1;const e=((r=this.start)==null?void 0:r.getTime())??this.start,i=((o=this.end)==null?void 0:o.getTime())??this.end,s=((l=t.start)==null?void 0:l.getTime())??t.start,n=((c=t.end)==null?void 0:c.getTime())??t.end;return e===s&&i===n}expandTo(t,e=Bp){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=TZ(i,t,e));let s=this.end;if(s){const n=TZ(s,t,e);s=s.getTime()===n.getTime()?n:pk(n,1,t,e)}return new dc({start:i,end:s})}intersection(t){var l,c,f,y;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return dc.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((l=this.start)==null?void 0:l.getTime())??-1/0,i=((c=this.end)==null?void 0:c.getTime())??1/0,s=((f=t.start)==null?void 0:f.getTime())??-1/0,n=((y=t.end)==null?void 0:y.getTime())??1/0;let r,o;return s>=e&&s<=i?r=s:e>=s&&e<=n&&(r=e),i>=s&&i<=n?o=i:n>=e&&n<=i&&(o=n),r==null||o==null||isNaN(r)||isNaN(o)?dc.empty:new dc({start:r===-1/0?null:new Date(r),end:o===1/0?null:new Date(o)})}offset(t,e,i=Bp){if(this.isEmpty||this.isAllTime)return this.clone();const s=new dc,{start:n,end:r}=this;return n!=null&&(s.start=pk(n,t,e,i)),r!=null&&(s.end=pk(r,t,e,i)),s}toArray(){var t,e;return this.isEmpty?[void 0,void 0]:[((t=this.start)==null?void 0:t.getTime())??null,((e=this.end)==null?void 0:e.getTime())??null]}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return IZ.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new dc({start:e,end:i})}};I([N({type:Date,json:{write:{allowNull:!0}}})],bu.prototype,"end",void 0),I([At("end")],bu.prototype,"readEnd",null),I([Ft("end")],bu.prototype,"writeEnd",null),I([N({readOnly:!0,json:{read:!1}})],bu.prototype,"isAllTime",null),I([N({readOnly:!0,json:{read:!1}})],bu.prototype,"isEmpty",null),I([N({type:Date,json:{write:{allowNull:!0}}})],bu.prototype,"start",void 0),I([At("start")],bu.prototype,"readStart",null),I([Ft("start")],bu.prototype,"writeStart",null),bu=dc=I([De("esri.time.TimeExtent")],bu);const xg=bu,IZ=new bu,NDe=new bu({start:void 0,end:void 0});let $De=0,Ir=class extends Sa.EventedMixin(PC(vC)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new cr(-180,-90,180,90,qi.WGS84),this.id=Date.now().toString(16)+"-layer-"+$De++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=qi.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await nt(async()=>{const{fromUrl:s}=await import("./arcgisLayers-R2cVuN0W.js");return{fromUrl:s}},__vite__mapDeps([96,94,95]),import.meta.url)).fromUrl(i)}static fromPortalItem(e){return DDe(e)}initialize(){this.when().catch(e=>{ad(e)||zt.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&e&&(e=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return yl(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Qs(e,{query:{f:"json"},responseType:"json"})).data;throw new rt("layer:no-attribution-data","Layer does not have attribution data")}};I([N({type:String})],Ir.prototype,"attributionDataUrl",void 0),I([N({readOnly:!0})],Ir.prototype,"effectiveVisible",null),I([N({type:cr})],Ir.prototype,"fullExtent",void 0),I([N({readOnly:!0})],Ir.prototype,"hasAttributionData",null),I([N({type:String,clonable:!1})],Ir.prototype,"id",void 0),I([N({type:Boolean,nonNullable:!0})],Ir.prototype,"legendEnabled",void 0),I([N({type:["show","hide","hide-children"]})],Ir.prototype,"listMode",void 0),I([N({type:Number,range:{min:0,max:1},nonNullable:!0})],Ir.prototype,"opacity",void 0),I([N({clonable:!1})],Ir.prototype,"parent",void 0),I([N({readOnly:!0})],Ir.prototype,"parsedUrl",null),I([N({type:Boolean,readOnly:!0})],Ir.prototype,"persistenceEnabled",void 0),I([N({type:Boolean})],Ir.prototype,"popupEnabled",void 0),I([N({type:Boolean})],Ir.prototype,"attributionVisible",void 0),I([N({type:qi})],Ir.prototype,"spatialReference",void 0),I([N({type:String})],Ir.prototype,"title",void 0),I([N({readOnly:!0,json:{read:!1}})],Ir.prototype,"type",void 0),I([N()],Ir.prototype,"url",void 0),I([N({type:xg})],Ir.prototype,"visibilityTimeExtent",void 0),I([N({type:Boolean,nonNullable:!0})],Ir.prototype,"visible",void 0),Ir=I([De("esri.layers.Layer")],Ir);const LM=Ir,KI={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Nce(t){return!!KI[t]||!!KI[t.toLowerCase()]}function wV(t){return KI[t]??KI[t.toLowerCase()]}function ODe(t){return[...wV(t)]}function mk(t,e,i){i<0&&++i,i>1&&--i;const s=6*i;return s<1?t+(e-t)*s:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function $ce(t,e,i,s=1){const n=(t%360+360)%360/360,r=i<=.5?i*(e+1):i+e-i*e,o=2*i-r;return[Math.round(255*mk(o,r,n+1/3)),Math.round(255*mk(o,r,n)),Math.round(255*mk(o,r,n-1/3)),s]}function RDe(t){const e=t.length>5,i=e?8:4,s=(1<<i)-1,n=e?1:17,r=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const l=[0,0,0,1];let c;return r&&(c=o&s,o>>=i,l[3]=n*c/255),c=o&s,o>>=i,l[2]=n*c,c=o&s,o>>=i,l[1]=n*c,c=o&s,o>>=i,l[0]=n*c,l}const LDe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,FDe="screenUtils.toPt: input not recognized!",Oce=96;function zDe(t){return t?t/72*Oce:0}function Uc(t){return t?72*t/Oce:0}function fs(t){if(typeof t=="string"){const e=t.match(LDe);if(e){const i=Number(e[1]),s=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",r=s==="px"?Uc(i):i;return n?-r:r}return console.warn(FDe),null}return t}function Up(t=0,e=0){return{x:t,y:e}}function ydt(t){return t?Up(t.x,t.y):null}function Rce(t=0,e=0){return[t,e]}function vdt(t=0,e=0,i=0){return[t,e,i]}function _dt(t){return t}function bdt(t){return t}function xdt(t){return t}function wdt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function FM(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function qDe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function VDe(t,e,i,s,n,r,o,l,c,f,y,_,x,S,P,A){const k=new Float32Array(16);return k[0]=t,k[1]=e,k[2]=i,k[3]=s,k[4]=n,k[5]=r,k[6]=o,k[7]=l,k[8]=c,k[9]=f,k[10]=y,k[11]=_,k[12]=x,k[13]=S,k[14]=P,k[15]=A,k}function GDe(t,e){return new Float32Array(t,e,16)}const jDe=FM();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:jDe,clone:qDe,create:FM,createView:GDe,fromValues:VDe},Symbol.toStringTag,{value:"Module"}));function Nt(){return[0,0,0]}function eu(t){return[t[0],t[1],t[2]]}function vl(t,e,i){return[t,e,i]}function BDe(t,e,i){return[t,e,i]}function Lce(t,e=Nt()){const i=Math.min(3,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function HDe(t,e){return new Float64Array(t,e,3)}function Fce(){return Nt()}function zce(){return vl(1,1,1)}function qce(){return vl(1,0,0)}function Vce(){return vl(0,1,0)}function Gce(){return vl(0,0,1)}const UDe=Fce(),YDe=zce(),XDe=qce(),WDe=Vce(),jce=Gce();Object.freeze(Object.defineProperty({__proto__:null,ONES:YDe,UNIT_X:XDe,UNIT_Y:WDe,UNIT_Z:jce,ZEROS:UDe,clone:eu,create:Nt,createView:HDe,freeze:BDe,fromArray:Lce,fromValues:vl,ones:zce,unitX:qce,unitY:Vce,unitZ:Gce,zeros:Fce},Symbol.toStringTag,{value:"Module"}));let SV=1e-6;function ro(){return SV}function ZDe(t){SV=t}const TC=Math.random,KDe=Math.PI/180,JDe=180/Math.PI;function QDe(t){return t*KDe}function e8e(t){return t*JDe}function t8e(t,e){return Math.abs(t-e)<=SV*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:TC,equals:t8e,getEpsilon:ro,setEpsilon:ZDe,toDegree:e8e,toRadian:QDe},Symbol.toStringTag,{value:"Module"}));function Bce(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Rg(t,e,i,s,n,r,o,l,c,f,y,_,x,S,P,A,k){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=r,t[5]=o,t[6]=l,t[7]=c,t[8]=f,t[9]=y,t[10]=_,t[11]=x,t[12]=S,t[13]=P,t[14]=A,t[15]=k,t}function zM(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Lg(t,e){if(t===e){const i=e[1],s=e[2],n=e[3],r=e[6],o=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=r,t[11]=e[14],t[12]=n,t[13]=o,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function i8e(t,e){return Hce(t,e)||zM(t),t}function Hce(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8],_=e[9],x=e[10],S=e[11],P=e[12],A=e[13],k=e[14],$=e[15],F=i*l-s*o,G=i*c-n*o,V=i*f-r*o,B=s*c-n*l,W=s*f-r*l,J=n*f-r*c,re=y*A-_*P,se=y*k-x*P,oe=y*$-S*P,pe=_*k-x*A,ue=_*$-S*A,ce=x*$-S*k;let ne=F*ce-G*ue+V*pe+B*oe-W*se+J*re;return ne?(ne=1/ne,t[0]=(l*ce-c*ue+f*pe)*ne,t[1]=(n*ue-s*ce-r*pe)*ne,t[2]=(A*J-k*W+$*B)*ne,t[3]=(x*W-_*J-S*B)*ne,t[4]=(c*oe-o*ce-f*se)*ne,t[5]=(i*ce-n*oe+r*se)*ne,t[6]=(k*V-P*J-$*G)*ne,t[7]=(y*J-x*V+S*G)*ne,t[8]=(o*ue-l*oe+f*re)*ne,t[9]=(s*oe-i*ue-r*re)*ne,t[10]=(P*W-A*V+$*F)*ne,t[11]=(_*V-y*W-S*F)*ne,t[12]=(l*se-o*pe-c*re)*ne,t[13]=(i*pe-s*se+n*re)*ne,t[14]=(A*G-P*B-k*F)*ne,t[15]=(y*B-_*G+x*F)*ne,t):null}function s8e(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8],_=e[9],x=e[10],S=e[11],P=e[12],A=e[13],k=e[14],$=e[15];return t[0]=l*(x*$-S*k)-_*(c*$-f*k)+A*(c*S-f*x),t[1]=-(s*(x*$-S*k)-_*(n*$-r*k)+A*(n*S-r*x)),t[2]=s*(c*$-f*k)-l*(n*$-r*k)+A*(n*f-r*c),t[3]=-(s*(c*S-f*x)-l*(n*S-r*x)+_*(n*f-r*c)),t[4]=-(o*(x*$-S*k)-y*(c*$-f*k)+P*(c*S-f*x)),t[5]=i*(x*$-S*k)-y*(n*$-r*k)+P*(n*S-r*x),t[6]=-(i*(c*$-f*k)-o*(n*$-r*k)+P*(n*f-r*c)),t[7]=i*(c*S-f*x)-o*(n*S-r*x)+y*(n*f-r*c),t[8]=o*(_*$-S*A)-y*(l*$-f*A)+P*(l*S-f*_),t[9]=-(i*(_*$-S*A)-y*(s*$-r*A)+P*(s*S-r*_)),t[10]=i*(l*$-f*A)-o*(s*$-r*A)+P*(s*f-r*l),t[11]=-(i*(l*S-f*_)-o*(s*S-r*_)+y*(s*f-r*l)),t[12]=-(o*(_*k-x*A)-y*(l*k-c*A)+P*(l*x-c*_)),t[13]=i*(_*k-x*A)-y*(s*k-n*A)+P*(s*x-n*_),t[14]=-(i*(l*k-c*A)-o*(s*k-n*A)+P*(s*c-n*l)),t[15]=i*(l*x-c*_)-o*(s*x-n*_)+y*(s*c-n*l),t}function n8e(t){const e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],o=t[5],l=t[6],c=t[7],f=t[8],y=t[9],_=t[10],x=t[11],S=t[12],P=t[13],A=t[14],k=t[15];return(e*o-i*r)*(_*k-x*A)-(e*l-s*r)*(y*k-x*P)+(e*c-n*r)*(y*A-_*P)+(i*l-s*o)*(f*k-x*S)-(i*c-n*o)*(f*A-_*S)+(s*c-n*l)*(f*P-y*S)}function Uce(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=e[8],x=e[9],S=e[10],P=e[11],A=e[12],k=e[13],$=e[14],F=e[15];let G=i[0],V=i[1],B=i[2],W=i[3];return t[0]=G*s+V*l+B*_+W*A,t[1]=G*n+V*c+B*x+W*k,t[2]=G*r+V*f+B*S+W*$,t[3]=G*o+V*y+B*P+W*F,G=i[4],V=i[5],B=i[6],W=i[7],t[4]=G*s+V*l+B*_+W*A,t[5]=G*n+V*c+B*x+W*k,t[6]=G*r+V*f+B*S+W*$,t[7]=G*o+V*y+B*P+W*F,G=i[8],V=i[9],B=i[10],W=i[11],t[8]=G*s+V*l+B*_+W*A,t[9]=G*n+V*c+B*x+W*k,t[10]=G*r+V*f+B*S+W*$,t[11]=G*o+V*y+B*P+W*F,G=i[12],V=i[13],B=i[14],W=i[15],t[12]=G*s+V*l+B*_+W*A,t[13]=G*n+V*c+B*x+W*k,t[14]=G*r+V*f+B*S+W*$,t[15]=G*o+V*y+B*P+W*F,t}function r8e(t,e,i){const s=i[0],n=i[1],r=i[2];if(e===t)t[12]=e[0]*s+e[4]*n+e[8]*r+e[12],t[13]=e[1]*s+e[5]*n+e[9]*r+e[13],t[14]=e[2]*s+e[6]*n+e[10]*r+e[14],t[15]=e[3]*s+e[7]*n+e[11]*r+e[15];else{const o=e[0],l=e[1],c=e[2],f=e[3],y=e[4],_=e[5],x=e[6],S=e[7],P=e[8],A=e[9],k=e[10],$=e[11];t[0]=o,t[1]=l,t[2]=c,t[3]=f,t[4]=y,t[5]=_,t[6]=x,t[7]=S,t[8]=P,t[9]=A,t[10]=k,t[11]=$,t[12]=o*s+y*n+P*r+e[12],t[13]=l*s+_*n+A*r+e[13],t[14]=c*s+x*n+k*r+e[14],t[15]=f*s+S*n+$*r+e[15]}return t}function o8e(t,e,i){const s=i[0],n=i[1],r=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a8e(t,e,i,s){let n=s[0],r=s[1],o=s[2],l=Math.sqrt(n*n+r*r+o*o);if(l<=ro())return void Bce(t,e);l=1/l,n*=l,r*=l,o*=l;const c=Math.sin(i),f=Math.cos(i),y=1-f,_=e[0],x=e[1],S=e[2],P=e[3],A=e[4],k=e[5],$=e[6],F=e[7],G=e[8],V=e[9],B=e[10],W=e[11],J=n*n*y+f,re=r*n*y+o*c,se=o*n*y-r*c,oe=n*r*y-o*c,pe=r*r*y+f,ue=o*r*y+n*c,ce=n*o*y+r*c,ne=r*o*y-n*c,de=o*o*y+f;t[0]=_*J+A*re+G*se,t[1]=x*J+k*re+V*se,t[2]=S*J+$*re+B*se,t[3]=P*J+F*re+W*se,t[4]=_*oe+A*pe+G*ue,t[5]=x*oe+k*pe+V*ue,t[6]=S*oe+$*pe+B*ue,t[7]=P*oe+F*pe+W*ue,t[8]=_*ce+A*ne+G*de,t[9]=x*ce+k*ne+V*de,t[10]=S*ce+$*ne+B*de,t[11]=P*ce+F*ne+W*de,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function l8e(t,e,i){const s=Math.sin(i),n=Math.cos(i),r=e[4],o=e[5],l=e[6],c=e[7],f=e[8],y=e[9],_=e[10],x=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*n+f*s,t[5]=o*n+y*s,t[6]=l*n+_*s,t[7]=c*n+x*s,t[8]=f*n-r*s,t[9]=y*n-o*s,t[10]=_*n-l*s,t[11]=x*n-c*s,t}function u8e(t,e,i){const s=Math.sin(i),n=Math.cos(i),r=e[0],o=e[1],l=e[2],c=e[3],f=e[8],y=e[9],_=e[10],x=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*n-f*s,t[1]=o*n-y*s,t[2]=l*n-_*s,t[3]=c*n-x*s,t[8]=r*s+f*n,t[9]=o*s+y*n,t[10]=l*s+_*n,t[11]=c*s+x*n,t}function c8e(t,e,i){const s=Math.sin(i),n=Math.cos(i),r=e[0],o=e[1],l=e[2],c=e[3],f=e[4],y=e[5],_=e[6],x=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*n+f*s,t[1]=o*n+y*s,t[2]=l*n+_*s,t[3]=c*n+x*s,t[4]=f*n-r*s,t[5]=y*n-o*s,t[6]=_*n-l*s,t[7]=x*n-c*s,t}function h8e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function d8e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Yce(t,e,i){if(e===0)return zM(t);let s=i[0],n=i[1],r=i[2],o=Math.sqrt(s*s+n*n+r*r);if(o<=ro())return null;o=1/o,s*=o,n*=o,r*=o;const l=Math.sin(e),c=Math.cos(e),f=1-c;return t[0]=s*s*f+c,t[1]=n*s*f+r*l,t[2]=r*s*f-n*l,t[3]=0,t[4]=s*n*f-r*l,t[5]=n*n*f+c,t[6]=r*n*f+s*l,t[7]=0,t[8]=s*r*f+n*l,t[9]=n*r*f-s*l,t[10]=r*r*f+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f8e(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p8e(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function m8e(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xce(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=s+s,c=n+n,f=r+r,y=s*l,_=s*c,x=s*f,S=n*c,P=n*f,A=r*f,k=o*l,$=o*c,F=o*f;return t[0]=1-(S+A),t[1]=_+F,t[2]=x-$,t[3]=0,t[4]=_-F,t[5]=1-(y+A),t[6]=P+k,t[7]=0,t[8]=x+$,t[9]=P-k,t[10]=1-(y+S),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function g8e(t,e){const i=y8e,s=-e[0],n=-e[1],r=-e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=s*s+n*n+r*r+o*o;return _>0?(i[0]=2*(l*o+y*s+c*r-f*n)/_,i[1]=2*(c*o+y*n+f*s-l*r)/_,i[2]=2*(f*o+y*r+l*n-c*s)/_):(i[0]=2*(l*o+y*s+c*r-f*n),i[1]=2*(c*o+y*n+f*s-l*r),i[2]=2*(f*o+y*r+l*n-c*s)),Xce(t,e,i),t}const y8e=Nt();function v8e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function _8e(t,e){const i=e[0],s=e[1],n=e[2],r=e[4],o=e[5],l=e[6],c=e[8],f=e[9],y=e[10];return t[0]=Math.sqrt(i*i+s*s+n*n),t[1]=Math.sqrt(r*r+o*o+l*l),t[2]=Math.sqrt(c*c+f*f+y*y),t}function b8e(t,e){const i=e[0]+e[5]+e[10];let s=0;return i>0?(s=2*Math.sqrt(i+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s),t}function x8e(t,e,i,s){const n=e[0],r=e[1],o=e[2],l=e[3],c=n+n,f=r+r,y=o+o,_=n*c,x=n*f,S=n*y,P=r*f,A=r*y,k=o*y,$=l*c,F=l*f,G=l*y,V=s[0],B=s[1],W=s[2];return t[0]=(1-(P+k))*V,t[1]=(x+G)*V,t[2]=(S-F)*V,t[3]=0,t[4]=(x-G)*B,t[5]=(1-(_+k))*B,t[6]=(A+$)*B,t[7]=0,t[8]=(S+F)*W,t[9]=(A-$)*W,t[10]=(1-(_+P))*W,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function w8e(t,e,i,s,n){const r=e[0],o=e[1],l=e[2],c=e[3],f=r+r,y=o+o,_=l+l,x=r*f,S=r*y,P=r*_,A=o*y,k=o*_,$=l*_,F=c*f,G=c*y,V=c*_,B=s[0],W=s[1],J=s[2],re=n[0],se=n[1],oe=n[2],pe=(1-(A+$))*B,ue=(S+V)*B,ce=(P-G)*B,ne=(S-V)*W,de=(1-(x+$))*W,Se=(k+F)*W,Pe=(P+G)*J,Re=(k-F)*J,Oe=(1-(x+A))*J;return t[0]=pe,t[1]=ue,t[2]=ce,t[3]=0,t[4]=ne,t[5]=de,t[6]=Se,t[7]=0,t[8]=Pe,t[9]=Re,t[10]=Oe,t[11]=0,t[12]=i[0]+re-(pe*re+ne*se+Pe*oe),t[13]=i[1]+se-(ue*re+de*se+Re*oe),t[14]=i[2]+oe-(ce*re+Se*se+Oe*oe),t[15]=1,t}function S8e(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,l=s+s,c=n+n,f=i*o,y=s*o,_=s*l,x=n*o,S=n*l,P=n*c,A=r*o,k=r*l,$=r*c;return t[0]=1-_-P,t[1]=y+$,t[2]=x-k,t[3]=0,t[4]=y-$,t[5]=1-f-P,t[6]=S+A,t[7]=0,t[8]=x+k,t[9]=S-A,t[10]=1-f-_,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E8e(t,e,i,s,n,r,o){const l=1/(i-e),c=1/(n-s),f=1/(r-o);return t[0]=2*r*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*c,t[6]=0,t[7]=0,t[8]=(i+e)*l,t[9]=(n+s)*c,t[10]=(o+r)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*r*2*f,t[15]=0,t}function C8e(t,e,i,s,n){const r=1/Math.tan(e/2);let o;return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(s-n),t[10]=(n+s)*o,t[14]=2*n*s*o):(t[10]=-1,t[14]=-2*s),t}function P8e(t,e,i,s){const n=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+l),f=2/(n+r);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(o-l)*c*.5,t[9]=(n-r)*f*.5,t[10]=s/(i-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i/(i-s),t[15]=0,t}function T8e(t,e,i,s,n,r,o){const l=1/(e-i),c=1/(s-n),f=1/(r-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+i)*l,t[13]=(n+s)*c,t[14]=(o+r)*f,t[15]=1,t}function I8e(t,e,i,s){const n=e[0],r=e[1],o=e[2];let l=n-i[0],c=r-i[1],f=o-i[2];const y=ro();if(Math.abs(l)<y&&Math.abs(c)<y&&Math.abs(f)<y)return void zM(t);let _=1/Math.sqrt(l*l+c*c+f*f);l*=_,c*=_,f*=_;const x=s[0],S=s[1],P=s[2];let A=S*f-P*c,k=P*l-x*f,$=x*c-S*l;_=Math.sqrt(A*A+k*k+$*$),_?(_=1/_,A*=_,k*=_,$*=_):(A=0,k=0,$=0);let F=c*$-f*k,G=f*A-l*$,V=l*k-c*A;_=Math.sqrt(F*F+G*G+V*V),_?(_=1/_,F*=_,G*=_,V*=_):(F=0,G=0,V=0),t[0]=A,t[1]=F,t[2]=l,t[3]=0,t[4]=k,t[5]=G,t[6]=c,t[7]=0,t[8]=$,t[9]=V,t[10]=f,t[11]=0,t[12]=-(A*n+k*r+$*o),t[13]=-(F*n+G*r+V*o),t[14]=-(l*n+c*r+f*o),t[15]=1}function M8e(t,e,i,s){const n=e[0],r=e[1],o=e[2],l=s[0],c=s[1],f=s[2];let y=n-i[0],_=r-i[1],x=o-i[2],S=y*y+_*_+x*x;S>0&&(S=1/Math.sqrt(S),y*=S,_*=S,x*=S);let P=c*x-f*_,A=f*y-l*x,k=l*_-c*y;return S=P*P+A*A+k*k,S>0&&(S=1/Math.sqrt(S),P*=S,A*=S,k*=S),t[0]=P,t[1]=A,t[2]=k,t[3]=0,t[4]=_*k-x*A,t[5]=x*P-y*k,t[6]=y*A-_*P,t[7]=0,t[8]=y,t[9]=_,t[10]=x,t[11]=0,t[12]=n,t[13]=r,t[14]=o,t[15]=1,t}function A8e(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function D8e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function k8e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function Wce(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function N8e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function $8e(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t[9]=e[9]+i[9]*s,t[10]=e[10]+i[10]*s,t[11]=e[11]+i[11]*s,t[12]=e[12]+i[12]*s,t[13]=e[13]+i[13]*s,t[14]=e[14]+i[14]*s,t[15]=e[15]+i[15]*s,t}function O8e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function R8e(t,e){if(t===e)return!0;const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],l=t[5],c=t[6],f=t[7],y=t[8],_=t[9],x=t[10],S=t[11],P=t[12],A=t[13],k=t[14],$=t[15],F=e[0],G=e[1],V=e[2],B=e[3],W=e[4],J=e[5],re=e[6],se=e[7],oe=e[8],pe=e[9],ue=e[10],ce=e[11],ne=e[12],de=e[13],Se=e[14],Pe=e[15],Re=ro();return Math.abs(i-F)<=Re*Math.max(1,Math.abs(i),Math.abs(F))&&Math.abs(s-G)<=Re*Math.max(1,Math.abs(s),Math.abs(G))&&Math.abs(n-V)<=Re*Math.max(1,Math.abs(n),Math.abs(V))&&Math.abs(r-B)<=Re*Math.max(1,Math.abs(r),Math.abs(B))&&Math.abs(o-W)<=Re*Math.max(1,Math.abs(o),Math.abs(W))&&Math.abs(l-J)<=Re*Math.max(1,Math.abs(l),Math.abs(J))&&Math.abs(c-re)<=Re*Math.max(1,Math.abs(c),Math.abs(re))&&Math.abs(f-se)<=Re*Math.max(1,Math.abs(f),Math.abs(se))&&Math.abs(y-oe)<=Re*Math.max(1,Math.abs(y),Math.abs(oe))&&Math.abs(_-pe)<=Re*Math.max(1,Math.abs(_),Math.abs(pe))&&Math.abs(x-ue)<=Re*Math.max(1,Math.abs(x),Math.abs(ue))&&Math.abs(S-ce)<=Re*Math.max(1,Math.abs(S),Math.abs(ce))&&Math.abs(P-ne)<=Re*Math.max(1,Math.abs(P),Math.abs(ne))&&Math.abs(A-de)<=Re*Math.max(1,Math.abs(A),Math.abs(de))&&Math.abs(k-Se)<=Re*Math.max(1,Math.abs(k),Math.abs(Se))&&Math.abs($-Pe)<=Re*Math.max(1,Math.abs($),Math.abs(Pe))}function L8e(t){const e=ro(),i=t[0],s=t[1],n=t[2],r=t[4],o=t[5],l=t[6],c=t[8],f=t[9],y=t[10];return Math.abs(1-(i*i+r*r+c*c))<=e&&Math.abs(1-(s*s+o*o+f*f))<=e&&Math.abs(1-(n*n+l*l+y*y))<=e}function F8e(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const z8e=Uce,q8e=Wce;Object.freeze(Object.defineProperty({__proto__:null,add:k8e,adjoint:s8e,copy:Bce,determinant:n8e,equals:R8e,exactEquals:O8e,frob:D8e,fromQuat:S8e,fromQuat2:g8e,fromRotation:Yce,fromRotationTranslation:Xce,fromRotationTranslationScale:x8e,fromRotationTranslationScaleOrigin:w8e,fromScaling:d8e,fromTranslation:h8e,fromXRotation:f8e,fromYRotation:p8e,fromZRotation:m8e,frustum:E8e,getRotation:b8e,getScaling:_8e,getTranslation:v8e,hasIdentityRotation:F8e,identity:zM,invert:Hce,invertOrIdentity:i8e,isOrthoNormal:L8e,lookAt:I8e,mul:z8e,multiply:Uce,multiplyScalar:N8e,multiplyScalarAndAdd:$8e,ortho:T8e,perspective:C8e,perspectiveFromFieldOfView:P8e,rotate:a8e,rotateX:l8e,rotateY:u8e,rotateZ:c8e,scale:o8e,set:Rg,str:A8e,sub:q8e,subtract:Wce,targetTo:M8e,translate:r8e,transpose:Lg},Symbol.toStringTag,{value:"Module"}));const V8e=(t,e)=>{const i=Rg(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Lg(i,i)},G8e=(t,e)=>{const i=Rg(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Lg(i,i)},j8e=(t,e)=>{const i=1-e,s=Rg(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Lg(s,s)},B8e=(t,e)=>{const i=Math.sin(e*Math.PI/180),s=Math.cos(e*Math.PI/180),n=Rg(t,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return Lg(n,n)},H8e=(t,e)=>{const i=1-2*e,s=Rg(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Lg(s,s)},U8e=(t,e)=>{const i=Rg(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Lg(i,i)},Y8e=(t,e)=>{const i=1-e,s=Rg(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Lg(s,s)};let Zce=class Kce{constructor(e,i,s){this.strength=e,this.radius=i,this.threshold=s,this.type="bloom"}interpolate(e,i,s){this.strength=Vl(e.strength,i.strength,s),this.radius=Vl(e.radius,i.radius,s),this.threshold=Vl(e.threshold,i.threshold,s)}clone(){return new Kce(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:ES(this.radius),strength:this.strength,threshold:this.threshold}}},Jce=class Qce{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,s){this.radius=Math.round(Vl(e.radius,i.radius,s))}clone(){return new Qce(this.radius)}toJSON(){return{type:"blur",radius:ES(this.radius)}}},PO=class ehe{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.amount=Vl(e.amount,i.amount,s),this._updateMatrix()}clone(){return new ehe(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||FM();switch(this.type){case"brightness":this._colorMatrix=V8e(e,this.amount);break;case"contrast":this._colorMatrix=G8e(e,this.amount);break;case"grayscale":this._colorMatrix=j8e(e,this.amount);break;case"invert":this._colorMatrix=H8e(e,this.amount);break;case"saturate":this._colorMatrix=U8e(e,this.amount);break;case"sepia":this._colorMatrix=Y8e(e,this.amount)}}},the=class ihe{constructor(e,i,s,n){this.offsetX=e,this.offsetY=i,this.blurRadius=s,this.color=n,this.type="drop-shadow"}interpolate(e,i,s){this.offsetX=Vl(e.offsetX,i.offsetX,s),this.offsetY=Vl(e.offsetY,i.offsetY,s),this.blurRadius=Vl(e.blurRadius,i.blurRadius,s),this.color[0]=Math.round(Vl(e.color[0],i.color[0],s)),this.color[1]=Math.round(Vl(e.color[1],i.color[1],s)),this.color[2]=Math.round(Vl(e.color[2],i.color[2],s)),this.color[3]=Vl(e.color[3],i.color[3],s)}clone(){return new ihe(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:ES(this.offsetX),yoffset:ES(this.offsetY),blurRadius:ES(this.blurRadius),color:e}}},she=class nhe{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.angle=Vl(e.angle,i.angle,s),this._updateMatrix()}clone(){return new nhe(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||FM();this._colorMatrix=B8e(e,this.angle)}},rhe=class ohe{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,s){this.amount=Vl(e.amount,i.amount,s)}clone(){return new ohe(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Vl(t,e,i){return t+(e-t)*i}function ES(t){return Math.round(1e3*Uc(t))/1e3}function X8e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new PO(t.type,0);case"saturate":case"brightness":case"contrast":return new PO(t.type,1);case"opacity":return new rhe(1);case"hue-rotate":return new she(0);case"blur":return new Jce(0);case"drop-shadow":return new the(0,0,0,[...wV("transparent")]);case"bloom":return new Zce(0,0,1)}}function W8e(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((s,n)=>s.type===i[n].type)}function Z8e(t,e){const i=t.length>e.length?t:e,s=t.length>e.length?e:t;for(let n=s.length;n<i.length;n++)s.push(X8e(i[n]))}function K8e(t){const e=t[0];return!!e&&"type"in e}function Sdt(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}function J8e(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}function Xb(t,e,i,s){var n=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(n,Xb.prototype),n.expected=e,n.found=i,n.location=s,n.name="SyntaxError",n}function gk(t,e,i){return i=i||" ",t.length>e?t:(e-=t.length,t+(i+=i.repeat(e)).slice(0,e))}function Q8e(t,e){var i,s={},n=(e=e!==void 0?e:{}).grammarSource,r={start:oi},o=oi,l="none",c=")",f=",",y="(",_="%",x="px",S="cm",P="mm",A="in",k="pt",$="pc",F="deg",G="rad",V="grad",B="turn",W="#",J=".",re="e",se=/^[ \t\n\r]/,oe=/^[a-z\-]/,pe=/^[0-9a-fA-F]/,ue=/^[+\-]/,ce=/^[0-9]/,ne=dt("none"),de=Ve("none",!1),Se=Ve(")",!1),Pe=Ve(",",!1),Re=dt("whitespace"),Oe=Xe([" ","	",`
`,"\r"],!1,!1),we=dt("function"),Fe=Ve("(",!1),it=dt("identifier"),vt=Xe([["a","z"],"-"],!1,!1),ot=dt("percentage"),ct=Ve("%",!1),Ct=dt("length"),qt=Ve("px",!1),Lt=Ve("cm",!1),Dt=Ve("mm",!1),Yi=Ve("in",!1),cs=Ve("pt",!1),fn=Ve("pc",!1),Us=dt("angle"),hr=Ve("deg",!1),oo=Ve("rad",!1),ss=Ve("grad",!1),ye=Ve("turn",!1),Fi=dt("number"),xr=dt("color"),ri=Ve("#",!1),Ai=Xe([["0","9"],["a","f"],["A","F"]],!1,!1),pn=Xe(["+","-"],!1,!1),ms=Xe([["0","9"]],!1,!1),Zi=Ve(".",!1),tn=Ve("e",!1),mn=function(){return[]},jr=function(ze,pt){return{type:"function",name:ze,parameters:pt||[]}},Cs=function(ze,pt){return pt.length>0?Yu(ze,pt,3):[ze]},xt=function(ze){return{type:"quantity",value:ze.value,unit:ze.unit}},Ys=function(ze){return{type:"color",colorType:ze.type,value:ze.value}},m=function(ze){return ze},j=function(){return Ne()},T=function(ze){return{value:ze,unit:"%"}},p=function(ze){return{value:ze,unit:"px"}},h=function(ze){return{value:ze,unit:"cm"}},a=function(ze){return{value:ze,unit:"mm"}},u=function(ze){return{value:ze,unit:"in"}},d=function(ze){return{value:ze,unit:"pt"}},g=function(ze){return{value:ze,unit:"pc"}},v=function(ze){return{value:ze,unit:"deg"}},b=function(ze){return{value:ze,unit:"rad"}},C=function(ze){return{value:ze,unit:"grad"}},M=function(ze){return{value:ze,unit:"turn"}},O=function(ze){return{value:ze,unit:null}},L=function(){return{type:"hex",value:Ne()}},q=function(ze){return{type:"function",value:ze}},U=function(){return{type:"named",value:Ne()}},ee=function(){return parseFloat(Ne())},Q=0|e.peg$currPos,ge=Q,ve=[{line:1,column:1}],fe=Q,Ce=e.peg$maxFailExpected||[],Ie=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in r))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');o=r[e.startRule]}function Ne(){return t.substring(ge,Q)}function Ve(ze,pt){return{type:"literal",text:ze,ignoreCase:pt}}function Xe(ze,pt,Pt){return{type:"class",parts:ze,inverted:pt,ignoreCase:Pt}}function et(){return{type:"end"}}function dt(ze){return{type:"other",description:ze}}function ut(ze){var pt,Pt=ve[ze];if(Pt)return Pt;if(ze>=ve.length)pt=ve.length-1;else for(pt=ze;!ve[--pt];);for(Pt={line:(Pt=ve[pt]).line,column:Pt.column};pt<ze;)t.charCodeAt(pt)===10?(Pt.line++,Pt.column=1):Pt.column++,pt++;return ve[ze]=Pt,Pt}function mt(ze,pt,Pt){var ei=ut(ze),Os=ut(pt);return{source:n,start:{offset:ze,line:ei.line,column:ei.column},end:{offset:pt,line:Os.line,column:Os.column}}}function lt(ze){Q<fe||(Q>fe&&(fe=Q,Ce=[]),Ce.push(ze))}function gi(ze,pt,Pt){return new Xb(Xb.buildMessage(ze,pt),ze,pt,Pt)}function oi(){var ze;return(ze=Ni())===s&&(ze=Ki()),ze}function Ni(){var ze,pt;return Ie++,ze=Q,ci(),t.substr(Q,4)===l?(pt=l,Q+=4):(pt=s,Ie===0&&lt(de)),pt!==s?(ci(),ge=ze,ze=mn()):(Q=ze,ze=s),Ie--,ze===s&&Ie===0&&lt(ne),ze}function Ki(){var ze,pt;if(ze=[],(pt=_s())!==s)for(;pt!==s;)ze.push(pt),pt=_s();else ze=s;return ze}function _s(){var ze,pt,Pt,ei;return ze=Q,ci(),(pt=Kt())!==s?(ci(),(Pt=as())===s&&(Pt=null),ci(),t.charCodeAt(Q)===41?(ei=c,Q++):(ei=s,Ie===0&&lt(Se)),ei!==s?(ci(),ge=ze,ze=jr(pt,Pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze}function as(){var ze,pt,Pt,ei,Os,kn,Nn,Br;if(ze=Q,(pt=$i())!==s){for(Pt=[],ei=Q,Os=ci(),t.charCodeAt(Q)===44?(kn=f,Q++):(kn=s,Ie===0&&lt(Pe)),kn===s&&(kn=null),Nn=ci(),(Br=$i())!==s?ei=Os=[Os,kn,Nn,Br]:(Q=ei,ei=s);ei!==s;)Pt.push(ei),ei=Q,Os=ci(),t.charCodeAt(Q)===44?(kn=f,Q++):(kn=s,Ie===0&&lt(Pe)),kn===s&&(kn=null),Nn=ci(),(Br=$i())!==s?ei=Os=[Os,kn,Nn,Br]:(Q=ei,ei=s);ge=ze,ze=Cs(pt,Pt)}else Q=ze,ze=s;return ze}function $i(){var ze,pt;return ze=Q,(pt=Ps())===s&&(pt=Qn())===s&&(pt=wi())===s&&(pt=sn()),pt!==s&&(ge=ze,pt=xt(pt)),(ze=pt)===s&&(ze=Q,(pt=ns())!==s&&(ge=ze,pt=Ys(pt)),ze=pt),ze}function ci(){var ze,pt;for(Ie++,ze=[],pt=t.charAt(Q),se.test(pt)?Q++:(pt=s,Ie===0&&lt(Oe));pt!==s;)ze.push(pt),pt=t.charAt(Q),se.test(pt)?Q++:(pt=s,Ie===0&&lt(Oe));return Ie--,pt=s,Ie===0&&lt(Re),ze}function Kt(){var ze,pt,Pt;return Ie++,ze=Q,(pt=Xs())!==s?(t.charCodeAt(Q)===40?(Pt=y,Q++):(Pt=s,Ie===0&&lt(Fe)),Pt!==s?(ge=ze,ze=m(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),Ie--,ze===s&&(pt=s,Ie===0&&lt(we)),ze}function Xs(){var ze,pt,Pt;if(Ie++,ze=Q,pt=[],Pt=t.charAt(Q),oe.test(Pt)?Q++:(Pt=s,Ie===0&&lt(vt)),Pt!==s)for(;Pt!==s;)pt.push(Pt),Pt=t.charAt(Q),oe.test(Pt)?Q++:(Pt=s,Ie===0&&lt(vt));else pt=s;return pt!==s&&(ge=ze,pt=j()),Ie--,(ze=pt)===s&&(pt=s,Ie===0&&lt(it)),ze}function Ps(){var ze,pt,Pt;return Ie++,ze=Q,ci(),(pt=dr())!==s?(t.charCodeAt(Q)===37?(Pt=_,Q++):(Pt=s,Ie===0&&lt(ct)),Pt!==s?(ge=ze,ze=T(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),Ie--,ze===s&&Ie===0&&lt(ot),ze}function Qn(){var ze,pt,Pt;return Ie++,ze=Q,ci(),(pt=dr())!==s?(t.substr(Q,2)===x?(Pt=x,Q+=2):(Pt=s,Ie===0&&lt(qt)),Pt!==s?(ge=ze,ze=p(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ci(),(pt=dr())!==s?(t.substr(Q,2)===S?(Pt=S,Q+=2):(Pt=s,Ie===0&&lt(Lt)),Pt!==s?(ge=ze,ze=h(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ci(),(pt=dr())!==s?(t.substr(Q,2)===P?(Pt=P,Q+=2):(Pt=s,Ie===0&&lt(Dt)),Pt!==s?(ge=ze,ze=a(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ci(),(pt=dr())!==s?(t.substr(Q,2)===A?(Pt=A,Q+=2):(Pt=s,Ie===0&&lt(Yi)),Pt!==s?(ge=ze,ze=u(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ci(),(pt=dr())!==s?(t.substr(Q,2)===k?(Pt=k,Q+=2):(Pt=s,Ie===0&&lt(cs)),Pt!==s?(ge=ze,ze=d(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,ci(),(pt=dr())!==s?(t.substr(Q,2)===$?(Pt=$,Q+=2):(Pt=s,Ie===0&&lt(fn)),Pt!==s?(ge=ze,ze=g(pt)):(Q=ze,ze=s)):(Q=ze,ze=s)))))),Ie--,ze===s&&Ie===0&&lt(Ct),ze}function wi(){var ze,pt,Pt;return Ie++,ze=Q,(pt=dr())!==s?(t.substr(Q,3)===F?(Pt=F,Q+=3):(Pt=s,Ie===0&&lt(hr)),Pt!==s?(ge=ze,ze=v(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,(pt=dr())!==s?(t.substr(Q,3)===G?(Pt=G,Q+=3):(Pt=s,Ie===0&&lt(oo)),Pt!==s?(ge=ze,ze=b(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,(pt=dr())!==s?(t.substr(Q,4)===V?(Pt=V,Q+=4):(Pt=s,Ie===0&&lt(ss)),Pt!==s?(ge=ze,ze=C(pt)):(Q=ze,ze=s)):(Q=ze,ze=s),ze===s&&(ze=Q,(pt=dr())!==s?(t.substr(Q,4)===B?(Pt=B,Q+=4):(Pt=s,Ie===0&&lt(ye)),Pt!==s?(ge=ze,ze=M(pt)):(Q=ze,ze=s)):(Q=ze,ze=s)))),Ie--,ze===s&&(pt=s,Ie===0&&lt(Us)),ze}function sn(){var ze,pt;return Ie++,ze=Q,ci(),(pt=dr())!==s?(ge=ze,ze=O(pt)):(Q=ze,ze=s),Ie--,ze===s&&Ie===0&&lt(Fi),ze}function ns(){var ze,pt,Pt,ei;if(Ie++,ze=Q,t.charCodeAt(Q)===35?(pt=W,Q++):(pt=s,Ie===0&&lt(ri)),pt!==s){if(Pt=[],ei=t.charAt(Q),pe.test(ei)?Q++:(ei=s,Ie===0&&lt(Ai)),ei!==s)for(;ei!==s;)Pt.push(ei),ei=t.charAt(Q),pe.test(ei)?Q++:(ei=s,Ie===0&&lt(Ai));else Pt=s;Pt!==s?(ge=ze,ze=L()):(Q=ze,ze=s)}else Q=ze,ze=s;return ze===s&&(ze=Q,(pt=_s())!==s&&(ge=ze,pt=q(pt)),(ze=pt)===s&&(ze=Q,(pt=Xs())!==s&&(ge=ze,pt=U()),ze=pt)),Ie--,ze===s&&(pt=s,Ie===0&&lt(xr)),ze}function dr(){var ze,pt,Pt,ei,Os,kn,Nn,Br;for(ze=Q,pt=t.charAt(Q),ue.test(pt)?Q++:(pt=s,Ie===0&&lt(pn)),pt===s&&(pt=null),Pt=Q,ei=[],Os=t.charAt(Q),ce.test(Os)?Q++:(Os=s,Ie===0&&lt(ms));Os!==s;)ei.push(Os),Os=t.charAt(Q),ce.test(Os)?Q++:(Os=s,Ie===0&&lt(ms));if(t.charCodeAt(Q)===46?(Os=J,Q++):(Os=s,Ie===0&&lt(Zi)),Os!==s){if(kn=[],Nn=t.charAt(Q),ce.test(Nn)?Q++:(Nn=s,Ie===0&&lt(ms)),Nn!==s)for(;Nn!==s;)kn.push(Nn),Nn=t.charAt(Q),ce.test(Nn)?Q++:(Nn=s,Ie===0&&lt(ms));else kn=s;kn!==s?Pt=ei=[ei,Os,kn]:(Q=Pt,Pt=s)}else Q=Pt,Pt=s;if(Pt===s)if(Pt=[],ei=t.charAt(Q),ce.test(ei)?Q++:(ei=s,Ie===0&&lt(ms)),ei!==s)for(;ei!==s;)Pt.push(ei),ei=t.charAt(Q),ce.test(ei)?Q++:(ei=s,Ie===0&&lt(ms));else Pt=s;if(Pt!==s){if(ei=Q,t.charCodeAt(Q)===101?(Os=re,Q++):(Os=s,Ie===0&&lt(tn)),Os!==s){if(kn=t.charAt(Q),ue.test(kn)?Q++:(kn=s,Ie===0&&lt(pn)),kn===s&&(kn=null),Nn=[],Br=t.charAt(Q),ce.test(Br)?Q++:(Br=s,Ie===0&&lt(ms)),Br!==s)for(;Br!==s;)Nn.push(Br),Br=t.charAt(Q),ce.test(Br)?Q++:(Br=s,Ie===0&&lt(ms));else Nn=s;Nn!==s?ei=Os=[Os,kn,Nn]:(Q=ei,ei=s)}else Q=ei,ei=s;ei===s&&(ei=null),ge=ze,ze=ee()}else Q=ze,ze=s;return ze}function Jc(ze,pt){return ze.map(function(Pt){return Pt[pt]})}function Yu(ze,pt,Pt){return[ze].concat(Jc(pt,Pt))}if(i=o(),e.peg$library)return{peg$result:i,peg$currPos:Q,peg$FAILED:s,peg$maxFailExpected:Ce,peg$maxFailPos:fe};if(i!==s&&Q===t.length)return i;throw i!==s&&Q<t.length&&lt(et()),gi(Ce,fe<t.length?t.charAt(fe):null,fe<t.length?mt(fe,fe+1):mt(fe,fe))}function ahe(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=MZ(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new rt("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:MZ(i.value)}});e.sort((i,s)=>s.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!W8e(e[i].effects,e[i+1].effects))throw new rt("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});Z8e(e[i].effects,e[i+1].effects)}return e.sort((i,s)=>s.scale-i.scale),e}function MZ(t){let e;if(!t)return[];try{e=Q8e(t)}catch(i){throw new rt("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>eke(i))}function eke(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return tke(t);case"opacity":return ike(t);case"hue-rotate":return ske(t);case"blur":return nke(t);case"drop-shadow":return rke(t);case"bloom":return oke(t)}}catch(e){throw e.details.filter=t,e}throw new rt("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function tke(t){let e=1;return dx(t.parameters,1),t.parameters.length===1&&(e=Dh(t.parameters[0])),new PO(t.name,e)}function ike(t){let e=1;return dx(t.parameters,1),t.parameters.length===1&&(e=Dh(t.parameters[0])),new rhe(e)}function ske(t){let e=0;return dx(t.parameters,1),t.parameters.length===1&&(e=dke(t.parameters[0])),new she(e)}function nke(t){let e=0;return dx(t.parameters,1),t.parameters.length===1&&(e=PV(t.parameters[0]),IC(e,t.parameters[0])),new Jce(e)}function rke(t){const e=[];let i=null;for(const s of t.parameters)if(s.type==="color"){if(e.length&&Object.freeze(e),i)throw new rt("effect:type-error","Accepts only one color",{});i=fke(s)}else{const n=PV(s);if(Object.isFrozen(e))throw new rt("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&IC(n,s)}if(e.length<2||e.length>3)throw new rt("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new the(e[0],e[1],e[2]||0,i||lhe("black"))}function oke(t){let e=1,i=0,s=0;return dx(t.parameters,3),t.parameters[0]&&(e=Dh(t.parameters[0])),t.parameters[1]&&(i=PV(t.parameters[1]),IC(i,t.parameters[1])),t.parameters[2]&&(s=Dh(t.parameters[2])),new Zce(e,i,s)}function dx(t,e){if(t.length>e)throw new rt("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function qM(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in CV)return"<length>";if(t.unit in EV)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function IC(t,e){if(t<0)throw new rt("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function ake(t){if(t.type!=="quantity"||t.unit!==null)throw new rt("effect:type-error",`Expected <double>, Actual: ${qM(t)}`,{term:t})}function lke(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new rt("effect:type-error",`Expected <double> or <percentage>, Actual: ${qM(t)}`,{term:t})}J8e(Xb,Error),Xb.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var i,s=null;for(i=0;i<t.length;i++)if(t[i].source===this.location.source){s=t[i].text.split(/\r\n|\n|\r/g);break}var n=this.location.start,r=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,o=this.location.source+":"+r.line+":"+r.column;if(s){var l=this.location.end,c=gk("",r.line.toString().length," "),f=s[n.line-1],y=(n.line===l.line?l.column:f.length+1)-n.column||1;e+=`
 --> `+o+`
`+c+` |
`+r.line+" | "+f+`
`+c+" | "+gk("",n.column-1," ")+gk("",y,"^")}else e+=`
 at `+o}return e},Xb.buildMessage=function(t,e){var i={literal:function(f){return'"'+n(f.text)+'"'},class:function(f){var y=f.parts.map(function(_){return Array.isArray(_)?r(_[0])+"-"+r(_[1]):r(_)});return"["+(f.inverted?"^":"")+y.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(f){return f.description}};function s(f){return f.charCodeAt(0).toString(16).toUpperCase()}function n(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+s(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+s(y)})}function r(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+s(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+s(y)})}function o(f){return i[f.type](f)}function l(f){var y,_,x=f.map(o);if(x.sort(),x.length>0){for(y=1,_=1;y<x.length;y++)x[y-1]!==x[y]&&(x[_]=x[y],_++);x.length=_}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}function c(f){return f?'"'+n(f)+'"':"end of input"}return"Expected "+l(t)+" but "+c(e)+" found."};const EV={deg:1,grad:.9,rad:180/Math.PI,turn:360};function uke(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&EV[t.unit]!=null))throw new rt("effect:type-error",`Expected <angle>, Actual: ${qM(t)}`,{term:t})}const CV={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function cke(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&CV[t.unit]!=null))throw new rt("effect:type-error",`Expected <length>, Actual: ${qM(t)}`,{term:t})}function Dh(t){lke(t);const e=t.value;return IC(e,t),t.unit==="%"?.01*e:e}function hke(t){return ake(t),IC(t.value,t),t.value}function dke(t){return uke(t),t.value*EV[t.unit]||0}function PV(t){return cke(t),t.value*CV[t.unit]||0}function fke(t){switch(t.colorType){case"hex":return RDe(t.value);case"named":return lhe(t.value);case"function":return gke(t.value)}}function lhe(t){if(!Nce(t))throw new rt("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return ODe(t)}const pke=/^rgba?/i,mke=/^hsla?/i;function gke(t){if(dx(t.parameters,4),pke.test(t.name))return[Dh(t.parameters[0]),Dh(t.parameters[1]),Dh(t.parameters[2]),t.parameters[3]?Dh(t.parameters[3]):1];if(mke.test(t.name))return $ce(hke(t.parameters[0]),Dh(t.parameters[1]),Dh(t.parameters[2]),t.parameters[3]?Dh(t.parameters[3]):1);throw new rt("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function cE(t,e,i){var s;try{return vke(t)}catch(n){(s=i==null?void 0:i.messages)==null||s.push(n)}return null}function hE(t,e,i,s){try{const n=yke(t);Ka(i,n,e)}catch(n){s.messages&&s.messages.push(n)}}function yke(t){const e=ahe(t);return e?K8e(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:s})=>({scale:i,value:s.map(n=>n.toJSON())})):null}function vke(t){if(!t||t.length===0)return null;if(_ke(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:AZ(i.value)});return e}return AZ(t)}function _ke(t){const e=t[0];return!!e&&"scale"in e}function AZ(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let s=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[Zf(i,"amount")];break;case"blur":s=[Zf(i,"radius","pt")];break;case"hue-rotate":s=[Zf(i,"angle","deg")];break;case"drop-shadow":s=[Zf(i,"xoffset","pt"),Zf(i,"yoffset","pt"),Zf(i,"blurRadius","pt"),bke(i,"color")];break;case"bloom":s=[Zf(i,"strength"),Zf(i,"radius","pt"),Zf(i,"threshold")]}const n=`${i.type}(${s.filter(Boolean).join(" ")})`;ahe(n),e.push(n)}return e.join(" ")}function Zf(t,e,i){if(t[e]==null)throw new rt("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function bke(t,e){if(t[e]==null)throw new rt("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const xke={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},DZ={read:{reader:cE},write:{allowNull:!0,writer:hE}},wke={json:{read:!1,write:!1,origins:{"web-map":DZ,"portal-item":DZ}}},TV=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return I([N(xke)],e.prototype,"blendMode",void 0),I([N(wke)],e.prototype,"effect",void 0),e=I([De("esri.layers.mixins.BlendLayer")],e),e},Uo=(t=>t)(["operational-layers","basemap","ground"]),kZ={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},NZ={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},$Z={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Ske={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":kZ,"web-map/basemap":NZ,"web-map/tables":$Z,"link-chart/operational-layers":{...kZ,LinkChartLayer:!0},"link-chart/basemap":NZ,"link-chart/tables":$Z,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};function fx(t,e){var s;const i=(s=e==null?void 0:e.url)==null?void 0:s.path;if(t&&i&&(t=pl(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=Nq(t,e.portalItem.itemUrl);n!=null&&Eke.test(n)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return(t=TO(t,e==null?void 0:e.portal))&&VM.test(t)?MV(t):t}function MC(t,e,i=dE.YES){var n,r;if((t=t&&VM.test(t)?che(t):t)==null)return t;!Mu(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let s=pl(t);if(e){const o=((n=e.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((r=e.url)==null?void 0:r.path);if(o){const l=TO(o,e.portal),c=TO(s,e.portal);s=Nq(c,l,l),s!=null&&s!==c&&s!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=uhe(s,e==null?void 0:e.portal),Mu(s)&&(s=Fc(s)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Mu(s)&&!Tv(s)&&i===dE.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(s),compress:!1}),s}function IV(t,e,i){return fx(t,i)}function rv(t,e,i,s){const n=MC(t,s);n!==void 0&&(e[i]=n)}const VM=/\/items\/([^/]+)\/resources\/(.*)/,Eke=/^\.\/resources\//;function Cke(t){const e=(t==null?void 0:t.match(VM))??null;return(e==null?void 0:e[1])??null}function Pke(t){const e=(t==null?void 0:t.match(VM))??null;if(e==null)return null;const i=e[2],s=i.lastIndexOf("/");if(s===-1){const{path:o,extension:l}=sW(i);return{prefix:null,filename:o,extension:l}}const{path:n,extension:r}=sW(i.slice(s+1));return{prefix:i.slice(0,s),filename:n,extension:r}}function uhe(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?z$(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function TO(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,s=Aq();return ql(s,`${s.scheme}://${i}`)?z$(t,e.portalHostname,i):z$(t,i,e.portalHostname)}function MV(t){if(!t)return t||null;let e=t;return e&&Li&&!Li.findCredential(e)&&(e=PI(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function che(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Li&&!Li.findCredential(e)&&(e=PI(e)),e}var dE;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(dE||(dE={}));const Edt=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return dE},ensureMainOnlineDomain:uhe,fromCDNUrl:che,fromJSON:fx,itemIdFromResourceUrl:Cke,prefixAndFilenameFromResourceUrl:Pke,read:IV,toCDNUrl:MV,toJSON:MC,write:rv},Symbol.toStringTag,{value:"Module"}));async function hhe(t,e){const{WhereClause:i}=await nt(()=>import("./WhereClause-D3zSqwA2.js").then(s=>s.W),__vite__mapDeps([97,55]),import.meta.url);return i.create(t,{fieldsIndex:e})}function dhe(t,e){return t==="1=1"?e??t:e==="1=1"?t??e:t!=null&&t!==""?e!=null&&e!==""?`(${t}) AND (${e})`:t:e}function Tke(t){return typeof t=="number"}function GM(t){return typeof t=="string"||t instanceof String}const Ike=ff,IO={date:null,time:null,timeZoneOffset:null},Cdt=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]);var Fy;(function(t){t.HM="HH:mm",t.HMS="HH:mm:ss",t.HMS_MS="HH:mm:ss.SSS"})(Fy||(Fy={}));const Mke=[Fy.HMS_MS,Fy.HMS,Fy.HM,"TT"],AC="yyyy-MM-dd",Ake=Fy.HMS,Dke="latn",kke=t=>"valueAsDate"in t;function ov(t){return{locale:Au(),numberingSystem:Dke,zone:t??Ike}}function fhe(t,e){return t===null?null:hi.fromMillis(t,ov(e))}function Nke(t,e){if(t==null||!GM(t)||t===""){if(e){const s=hi.local({zone:e});return{date:null,time:null,timeZoneOffset:s.isValid?s.offset.toString():null}}return IO}const i=hi.fromISO(t,{setZone:!0});return{date:i.toFormat(AC,ov()),time:i.toFormat(Fy.HMS_MS,ov()),timeZoneOffset:i.offset.toString()}}function Pdt(t,e){if(t==null||!Tke(t)||isNaN(t))return IO;const i=fhe(t,e);return i?{date:i.toFormat(AC,ov(e)),time:i.toFormat(Ake,ov(e))}:IO}function Tdt(t){switch(t.type){case"date":default:return ZP("short-date-short-time");case"date-only":return ZP("short-date");case"time-only":return ZP("short-time");case"timestamp-offset":return{...ZP("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function Idt(t,e,i){if(!t||e==null)return null;switch(t.type){case"date":return yg(e,i);case"date-only":return $Me(e,i);case"time-only":return OMe(e,i);case"timestamp-offset":return RMe(e,i);default:return null}}function Mdt(t){const{dateComponent:e,defaultTimeZone:i,timeComponent:s,timeZoneComponent:n,oldValue:r}=t;if(!(e!=null&&e.value))return null;const{year:o,month:l,day:c}=hi.fromFormat(e.value,AC),{hour:f,minute:y,second:_,millisecond:x}=MO(s,ff)??hi.now(),S=Nke(r,i),P=n!=null&&n.value?parseInt(n.value,10):S.timeZoneOffset!=null?parseInt(S.timeZoneOffset,10):new Date().getTimezoneOffset(),A=Bo.instance(P),k=hi.fromObject({year:o,month:l,day:c,hour:f,minute:y,second:_,millisecond:x},{zone:A});return k.isValid?k.toISO({includeOffset:!0}):null}function Adt(t){const{dateComponent:e,timeComponent:i,timeZone:s,max:n,min:r,oldValue:o}=t,l=MO(e,s);let c=!!t.applyRange;if(!l)return null;let f=null;if((i==null?void 0:i.value)!=null){const _=MO(i,s),x=Date.now(),S=n!=null&&n<x?n:x,P=hi.fromMillis(S,ov(s)),A=l||P,{year:k,month:$,day:F}=A,{hour:G,minute:V,second:B,millisecond:W}=_||P;f=A.set({year:k,month:$,day:F,hour:G,minute:V,second:B,millisecond:W})}else{const _=fhe(RZ({value:o??Date.now(),max:n,min:r}),s),{year:x,month:S,day:P}=l,{hour:A,minute:k,second:$,millisecond:F}=_;c=!0,f=l.set({year:x,month:S,day:P,hour:A,minute:k,second:$,millisecond:F})}if(!f.isValid)return null;const y=f.toMillis();return c?RZ({value:y,max:n,min:r}):y}function MO(t,e){if((t==null?void 0:t.value)==null||Array.isArray(t.value))return null;let i=null;return i=kke(t)?hi.fromFormat(t.value,AC,ov(e)):Wb(t.value),i!=null&&i.isValid?i:null}function OZ(t){const{max:e,min:i,value:s}=t;return!isNaN(s)&&!(e!=null&&s>e)&&!(i!=null&&s<i)}function RZ(t){const{max:e,min:i,value:s}=t;return e!=null&&i!=null?Hc(s,i,e):e!=null&&s>e?e:i!=null&&s<i?i:s}function $ke(t){if(!t)return"";const e=t.split(".").at(0);if(!e||e.length<1)throw new rt("invalid time-only field",`Cannot parse valid time-only field value from ${t}`);const i=e.split(":"),s=new Array(3);for(let n=0;n<3;n++){const r=i.at(n)??"";s[n]=r.padStart(2,"0")}return s.join(":")}function Ddt(t,e){switch(e){case"date":return t.getTime();case"date-only":return t.toISODate();case"time-only":return $ke(t.toISOTime(!0,!1));case"timestamp-offset":return t.toISOString(!1);default:return null}}function kdt(t){return!!t&&typeof t=="object"&&"getTime"in t&&"toISOString"in t&&"timeZone"in t}function CS(t){if(!t||!GM(t))return null;const e=hi.fromFormat(t,AC);return e.isValid?e:null}function Wb(t){return t&&GM(t)?xPe(Mke,e=>{const i=hi.fromFormat(t,e);return i.isValid?i:null})??null:null}function PS(t){if(!t||!GM(t))return null;const e=hi.fromISO(t);return e.isValid?e:null}function Ndt(t){const{type:e,range:i,value:s}=t;if(s==null||!i||s===i.min||s===i.max)return!0;if(e==="date")return OZ({value:s,min:i.min,max:i.max});const{rawMax:n,rawMin:r}=i;let o=null,l=null,c=null;switch(e){case"date-only":o=CS(n),l=CS(r),c=CS(s);break;case"time-only":o=Wb(n),l=Wb(r),c=Wb(s);break;case"timestamp-offset":o=PS(n),l=PS(r),c=PS(s)}return!c||OZ({value:c.valueOf(),min:l==null?void 0:l.valueOf(),max:o==null?void 0:o.valueOf()})}var C2;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(C2||(C2={}));const Oke=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function Rke(t){return t!=null&&Oke.has(t.type)}function phe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function mhe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function ghe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function Lke(t,e,i){const s=i??(t==null?void 0:t.domain);if(!s)return null;switch(s.type){case"range":{const{min:n,max:r}=yhe(t,i);if(n!=null&&+e<n||r!=null&&+e>r)return C2.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(s.codedValues==null||s.codedValues.every(n=>n==null||n.code!==e))return C2.INVALID_CODED_VALUE}return null}function yhe(t,e){const i=e??(t==null?void 0:t.domain);if(!i||i.type!=="range")return;const s="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,r=Rke(t);return phe(t)||ghe(t)||mhe(t)?{...Fke(t,n,s),isInteger:r}:{min:s!=null&&typeof s=="number"?s:null,max:n!=null&&typeof n=="number"?n:null,rawMin:s,rawMax:n,isInteger:r}}function Fke(t,e,i){var s,n,r,o,l,c;return phe(t)?{min:(s=CS(i))==null?void 0:s.toMillis(),max:(n=CS(e))==null?void 0:n.toMillis(),rawMin:i,rawMax:e}:ghe(t)?{min:(r=Wb(i))==null?void 0:r.toMillis(),max:(o=Wb(e))==null?void 0:o.toMillis(),rawMin:i,rawMax:e}:mhe(t)?{min:(l=PS(i))==null?void 0:l.toMillis(),max:(c=PS(e))==null?void 0:c.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}const zke=()=>zt.getLogger("esri.support.arcadeOnDemand");let yk;function av(){return yk||(yk=(async()=>{const t=await nt(()=>import("./arcadeUtils-BQzL2OZn.js").then(e=>e.i),__vite__mapDeps([98,99,55,56,100,101,102,103,104,105]),import.meta.url);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),yk}const qke=(t,e,i)=>vhe.create(t,e,i,null,["$feature","$view"],[]),Vke=(t,e,i,s)=>vhe.create(t,e,i,s,["$feature","$view"],[]);let vhe=class _he{constructor(e,i,s,n,r,o,l){this.services=null,this.script=e,this.evaluate=n;const c=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=c??[],this._syntaxTree=s,this._arcade=i,this._arcadeFeature=r,this._spatialReference=l,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,s,n,r,o){const{arcade:l,Feature:c,Dictionary:f}=await av(),y=i instanceof qi?i:qi.fromJSON(i);let _;try{_=l.parseScript(e,o)}catch(re){return zke().error(new rt("arcade-bad-expression","Failed to parse arcade script",{script:e,error:re})),null}const x=r.reduce((re,se)=>({...re,[se]:null}),{});let S=null;n!=null&&(S=new f(n),S.immutable=!0,x.$config=null);const P=l.scriptUsesGeometryEngine(_),A=P&&l.enableGeometrySupport(),k=l.scriptUsesFeatureSet(_)&&l.enableFeatureSetSupport(),$=l.scriptIsAsync(_),F=$&&l.enableAsyncSupport(),G={vars:x,spatialReference:y,useAsync:!!F};await Promise.all([A,k,F]);const V=new Set;await l.loadDependentModules(V,_,null,$,P);const B=new f;B.immutable=!1,B.setField("scale",0);const W=l.compileScript(_,G),J=(re,se)=>{var pe;const oe=(pe=re.$view)==null?void 0:pe.timeZone;return"$view"in re&&re.$view&&(B.setField("scale",typeof re.$view=="object"&&"scale"in re.$view?re.$view.scale:void 0),re.$view=B),S&&(re.$config=S),W({vars:re,spatialReference:y,services:se,timeZone:oe})};return new _he(e,l,_,J,new c,s,y)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Gke=/^([0-9_])/,jke=/[^a-z0-9_\u0080-\uffff]+/gi;function Bke(t){return t==null?null:t.trim().replaceAll(jke,"_").replace(Gke,"F$1")||null}const Hke=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Uke=["field","normalizationField"];function LZ(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(FZ(Hke,i,e),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)FZ(Uke,s,e)}}function FZ(t,e,i){if(t)for(const s of t){const n=$p(s,e),r=n&&typeof n!="function"&&i.get(n);r&&Ka(s,r.name,e)}}function bhe(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const s=e.get(t.startField),n=e.get(t.endField);t.startField=(s==null?void 0:s.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const s=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(s==null?void 0:s.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const vk=new Set;function jM(t,e){return t&&e?(vk.clear(),lv(vk,t,e),Array.from(vk).sort()):[]}function lv(t,e,i){var s;if(i)if((s=e==null?void 0:e.fields)!=null&&s.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)_l(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function _l(t,e,i){if(typeof i=="string")if(e){const s=e.get(i);s&&t.add(s.name)}else t.add(i)}function $dt(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function Odt(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const s=jM(t,e);return s.length/t.fields.length>=i?["*"]:s}async function Ja(t,e,i){var r;if(!i)return;const{arcadeUtils:s}=await av(),n=s.extractFieldNames(i,(r=e==null?void 0:e.fields)==null?void 0:r.map(o=>o.name));for(const o of n)_l(t,e,o)}async function xhe(t,e,i){if(i&&i!=="1=1"){const s=await hhe(i,e);if(!s.isStandardized)throw new rt("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});lv(t,e,s.fieldNames)}}function whe({displayField:t,fields:e}){return t||(e!=null&&e.length?_k(e,"name-or-title")||_k(e,"unique-identifier")||_k(e,"type-or-category")||Yke(e):null)}function Yke(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function _k(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function Rdt(t,e){var s;if(!e)return;const i=(s=e.elevationInfo)==null?void 0:s.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function Xke(t,e,i){i.onStatisticExpression?Ja(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function Ldt(t,e,i){if(!e||!i||!("fields"in i))return;const s=[],n=i.popupTemplate;s.push(Wke(t,e,n)),i.fields&&s.push(...i.fields.map(async r=>Xke(t,e.fieldsIndex,r))),await Promise.all(s)}async function Wke(t,e,i){const s=[];i!=null&&i.expressionInfos&&s.push(...i.expressionInfos.map(r=>Ja(t,e.fieldsIndex,r.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const r of n)r.type==="expression"&&r.expressionInfo&&s.push(Ja(t,e.fieldsIndex,r.expressionInfo.expression));await Promise.all(s)}async function Fdt(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&lv(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&lv(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await xhe(t,e.fieldsIndex,i.where))}async function zdt(t,e,i){e&&i&&await Promise.all(i.map(s=>Zke(t,e,s)))}async function Zke(t,e,i){e&&i&&(i.valueExpression?await Ja(t,e.fieldsIndex,i.valueExpression):i.field&&_l(t,e.fieldsIndex,i.field))}function qdt(t){return t?jM(t.fieldsIndex,She(t)):[]}function Kke(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?jM(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const Jke=new Set(["oid","global-id","guid"]),Qke=new Set(["oid","global-id"]),eNe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function tNe(t){const e=new Set;Ehe(t).forEach(s=>e.add(s)),Kke(t).forEach(s=>e.add(s.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(s=>e.add(s.toLowerCase())),Object.values(i.transformFieldRoles).forEach(s=>e.add(s.toLowerCase()))),Array.from(e)}function She(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:s,editDateField:n,editorField:r}=e;return[i,s,n,r].filter(Boolean)}function Ehe(t){return She(t).map(e=>e.toLowerCase())}function iNe(t,e){var i;return t.editable&&!Jke.has(t.type)&&!Ehe(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function sNe(t,e){var s;const i=((s=t.name)==null?void 0:s.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||tNe(e).includes(i)||Qke.has(t.type)||eNe.some(n=>n.test(i)))}async function Vdt(t,e){const{labelingInfo:i,fieldsIndex:s}=e;i!=null&&i.length&&await Promise.all(i.map(n=>nNe(t,s,n)))}async function nNe(t,e,i){if(!i)return;const s=i.getLabelExpression(),n=i.where;if(s.type==="arcade")await Ja(t,e,s.expression);else{const r=s.expression.match(/{[^}]*}/g);r&&r.forEach(o=>{_l(t,e,o.slice(1,-1))})}await xhe(t,e,n)}function rNe(t){const e=t.defaultValue;return e!==void 0&&The(t,e)?e:t.nullable?null:void 0}function Gdt(t){const e=typeof t=="string"?{type:t}:t;return Mhe(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function Che(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function oNe(t){return t===null||Che(t)}function aNe(t){return t===null||Number.isInteger(t)}function Phe(t){return t!=null&&typeof t=="string"}function lNe(t){return t===null||Phe(t)}function uNe(){return!0}function The(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?aNe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?oNe:Che;break;case"string":case"esriFieldTypeString":i=t.nullable?lNe:Phe;break;default:i=uNe}return arguments.length===1?i:i(e)}const cNe=["integer","small-integer","big-integer"],hNe=["single","double"],dNe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],fNe=["esriFieldTypeSingle","esriFieldTypeDouble"],Ihe=new Set([...cNe,...dNe]),pNe=new Set([...hNe,...fNe]),mNe=Foe(Ihe,pNe);function gNe(t){return t!=null&&Ihe.has(t.type)}function AV(t){return t!=null&&mNe.has(t.type)}function Mhe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function yNe(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function jdt(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Bdt(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function vNe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function zZ(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function qZ(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function Hdt(t,e){return _Ne(t,e)===null}var JI,QI;function Udt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function _Ne(t,e){return t==null||t.nullable&&e===null?null:AV(t)&&!bNe(t.type,Number(e))?JI.OUT_OF_RANGE:The(t,e)?t.domain?Lke(t,e):null:QI.INVALID_TYPE}function bNe(t,e){const i=typeof t=="string"?DV(t):t;if(!i)return!1;const s=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=s&&e<=n:e>=s&&e<=n}function Ydt(t,e){return yhe(t,e)||(AV(t)?DV(t.type):void 0)}function DV(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return xNe;case"esriFieldTypeInteger":case"integer":return wNe;case"esriFieldTypeBigInteger":case"big-integer":return SNe;case"esriFieldTypeSingle":case"single":return ENe;case"esriFieldTypeDouble":case"double":return CNe}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(JI||(JI={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(QI||(QI={}));const xNe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},wNe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},SNe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},ENe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},CNe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Xdt(t,e,i){switch(t){case C2.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case C2.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case QI.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case JI.OUT_OF_RANGE:{const{min:s,max:n}=DV(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${s} to ${n}`}}}function Wdt(t,e){return!PNe(t,e,null)}function PNe(t,e,i){if(!(e!=null&&e.attributes)||!t)return!0;const s=new Set(Object.keys(e.attributes));let n=!1;for(const r of t)if(!s.has(r)&&(n=!0,i==null))break;return n}function TNe(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}async function Zdt(t,e){const i=new Set;return t!=null&&t.collectRequiredFields&&await t.collectRequiredFields(i,e),Array.from(i).sort()}function Ahe(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}var AO;let f3=AO=class extends wt{constructor(t){super(t)}async collectRequiredFields(t,e){return Ja(t,e,this.expression)}clone(){return new AO({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};I([N({type:String,json:{write:!0}})],f3.prototype,"expression",void 0),I([N({type:String,json:{write:!0}})],f3.prototype,"title",void 0),f3=AO=I([De("esri.symbols.support.FeatureExpressionInfo")],f3);const VZ=f3,BM={unknown:1,inches:un(1,"meters","inches"),feet:un(1,"meters","feet"),"us-feet":un(1,"meters","us-feet"),yards:un(1,"meters","yards"),miles:un(1,"meters","miles"),"nautical-miles":un(1,"meters","nautical-miles"),millimeters:un(1,"meters","millimeters"),centimeters:un(1,"meters","centimeters"),decimeters:un(1,"meters","decimeters"),meters:un(1,"meters","meters"),kilometers:un(1,"meters","kilometers"),"decimal-degrees":1/Gae(1,"meters",ur.radius)};function Kdt(t){return!!t&&BM[t]!=null}function INe(t){return 1/(BM[t]||1)}function MNe(){const t=Object.keys(BM);return hM(t,"decimal-degrees"),t.sort(),t}const ANe=MNe();var DO;const t4=wa()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),GZ=new ps({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Qf=DO=class extends wt{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,s){e[i]=t.write({},s),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new DO({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&_oe(this.featureExpressionInfo,t.featureExpressionInfo)}};I([N({type:VZ,json:{write:!0}})],Qf.prototype,"featureExpressionInfo",void 0),I([At("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Qf.prototype,"readFeatureExpressionInfo",null),I([Ft("featureExpressionInfo",{featureExpressionInfo:{type:VZ},"featureExpression.value":{type:[0]}})],Qf.prototype,"writeFeatureExpressionInfo",null),I([N({type:t4.apiValues,nonNullable:!0,json:{type:t4.jsonValues,read:t4.read,write:{writer:t4.write,isRequired:!0}}})],Qf.prototype,"mode",null),I([N({type:Number,json:{write:!0}})],Qf.prototype,"offset",void 0),I([N({type:ANe,json:{type:String,read:GZ.read,write:GZ.write}})],Qf.prototype,"unit",null),Qf=DO=I([De("esri.symbols.support.ElevationInfo")],Qf);const Dhe=Qf;let Y_=class extends wt{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};I([N({type:String,json:{write:!0}})],Y_.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],Y_.prototype,"label",void 0),I([N()],Y_.prototype,"type",void 0),Y_=I([De("esri.tables.elements.AttributeTableElement")],Y_);const P2=Y_;var kO;let p3=kO=class extends P2{constructor(t){super(t),this.displayType="auto",this.type="attachment"}clone(){return new kO({description:this.description,displayType:this.displayType,label:this.label})}};I([N({type:["auto"],json:{write:!0}})],p3.prototype,"displayType",void 0),I([N({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],p3.prototype,"type",void 0),p3=kO=I([De("esri.tables.elements.AttributeTableAttachmentElement")],p3);const jZ=p3;var NO;let m3=NO=class extends P2{constructor(t){super(t),this.fieldName=null,this.type="field"}clone(){return new NO({description:this.description,fieldName:this.fieldName,label:this.label})}};I([N({type:String,json:{write:!0}})],m3.prototype,"fieldName",void 0),I([N({type:String,json:{read:!1,write:!0}})],m3.prototype,"type",void 0),m3=NO=I([De("esri.tables.elements.AttributeTableFieldElement")],m3);const BZ=m3;var $O;let g3=$O=class extends P2{constructor(t){super(t),this.relationshipId=null,this.type="relationship"}clone(){return new $O({description:this.description,label:this.label,relationshipId:this.relationshipId})}};I([N({type:Number,json:{write:!0}})],g3.prototype,"relationshipId",void 0),I([N({type:["relationship"],json:{read:!1,write:!0}})],g3.prototype,"type",void 0),g3=$O=I([De("esri.tables.elements.AttributeTableRelationshipElement")],g3);const HZ=g3;function khe(t){return{typesWithGroup:{base:P2,key:"type",typeMap:{attachment:jZ,field:BZ,group:t,relationship:HZ}},typesWithoutGroup:{base:P2,key:"type",typeMap:{attachment:jZ,field:BZ,relationship:HZ}}}}function Nhe(t,e,i=!0){if(!t)return null;const s=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>s[n.type]).map(n=>s[n.type].fromJSON(n))}function $he(t,e,i=!0){if(!t)return null;const s=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>s[n.type]).map(n=>n.toJSON())}function Ohe(t,e,i=!0){return t?t.map(s=>Bc(i?e.typesWithGroup:e.typesWithoutGroup,s)):null}var OO;let xp=OO=class extends P2{constructor(t){super(t),this.elements=null,this.type="group"}castElements(t){return Ohe(t,bk,!1)}readElements(t,e){return Nhe(e.attributeTableElements,bk,!1)}writeElements(t,e){e.attributeTableElements=$he(t,bk,!1)}clone(){return new OO({description:this.description,elements:Ue(this.elements),label:this.label})}};I([N({json:{write:!0}})],xp.prototype,"elements",void 0),I([Sn("elements")],xp.prototype,"castElements",null),I([At("elements",["attributeTableElements"])],xp.prototype,"readElements",null),I([Ft("elements")],xp.prototype,"writeElements",null),I([N({type:String,json:{read:!1,write:!0}})],xp.prototype,"type",void 0),xp=OO=I([De("esri.tables.elements.AttributeTableGroupElement")],xp);const bk=khe(xp),DNe=xp;var RO;const xk=khe(DNe);let u0=RO=class extends wt{constructor(t){super(t),this.elements=null,this.orderByFields=null}castElements(t){return Ohe(t,xk)}readElements(t,e){return Nhe(e.attributeTableElements,xk)}writeElements(t,e){e.attributeTableElements=$he(t,xk)}clone(){return new RO({elements:Ue(this.elements),orderByFields:this.orderByFields})}};I([N({json:{write:!0}})],u0.prototype,"elements",void 0),I([Sn("elements")],u0.prototype,"castElements",null),I([At("elements",["attributeTableElements"])],u0.prototype,"readElements",null),I([Ft("elements")],u0.prototype,"writeElements",null),I([N({type:[Object],json:{write:!0}})],u0.prototype,"orderByFields",void 0),u0=RO=I([De("esri.tables.AttributeTableTemplate")],u0);const kNe=u0;function kV(t){const e=Eq(100*(1-t));return Math.max(0,Math.min(e,100))}function e6(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}const NNe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Uo}}},NV={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},$V={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Uo}}},$Ne={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:rv}}},ONe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Uo}}},RNe={value:null,type:Dhe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Uo}}};function Qdt(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Rhe={write:{enabled:!0,layerContainerTypes:Uo},read:!0},LO={type:Number,json:{origins:{"web-document":Rhe,"portal-item":{write:!0}}}},LNe={...LO,json:{...LO.json,origins:{"web-document":{...Rhe,write:{enabled:!0,layerContainerTypes:Uo,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var s;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(s=e.layerDefinition)!=null&&s.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?e6(e.layerDefinition.drawingInfo.transparency):void 0:e6(e.drawingInfo.transparency)}}}},eft={type:cr,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=cr.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=qi.fromJSON(e.spatialReference)),i}}}},read:!1}},FNe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},zNe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:Uo}}},name:"layerDefinition.minScale",write:!0}},qNe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:Uo}}},name:"layerDefinition.maxScale",write:!0}},Lhe={json:{write:{ignoreOrigin:!0,layerContainerTypes:Uo},origins:{"web-map":{read:!1,write:!1}}}},VNe={type:kNe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}},Fhe=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,s,n){var r;return((r=n==null?void 0:n.portalItem)==null?void 0:r.type)==="Group Layer"?void 0:i}writeListMode(i,s,n,r){(r&&r.layerContainerType==="ground"||i&&fTe(this,n,{},r))&&(s[n]=i)}writeOperationalLayerType(i,s,n,r){i&&(r==null?void 0:r.layerContainerType)!=="tables"&&(s.layerType=i)}writeTitle(i,s){s.title=i??"Layer"}readTimeExtent(i){return i?xg.fromArray(i):null}writeTimeExtent(i,s,n,r){i&&r.layerContainerType!=="tables"&&(i.isEmpty?r!=null&&r.messages&&r.messages.push(new rt("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):s[n]=i.toArray())}read(i,s){s&&(s.layer=this),cTe(this,i,n=>super.read(i,n),s)}write(i,s){var o,l;if(!this.persistenceEnabled&&!(s!=null&&s.ignorePersistenceEnabled))return null;if(s!=null&&s.origin){const c=`${s.origin}/${s.layerContainerType||"operational-layers"}`,f=Ske[c];let y=!!(f!=null&&f[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&c==="web-scene/operational-layers"&&(y=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&c==="web-map/operational-layers"&&(y=!1),!y)return(o=s.messages)==null||o.push(new rt("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${c}'`,{layer:this})),null}const n=super.write(i,{...s,layer:this}),r=!!s&&!!s.messages&&!!s.messages.filter(c=>c instanceof rt&&c.name==="web-document-write:property-required").length;return bM(n==null?void 0:n.url)?((l=s==null?void 0:s.messages)==null||l.push(new rt("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&r?null:n}beforeSave(){}};return I([N({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),I([At("id",["id"])],e.prototype,"readId",null),I([N(Lhe)],e.prototype,"listMode",void 0),I([Ft("listMode")],e.prototype,"writeListMode",null),I([N({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Uo}}}}})],e.prototype,"operationalLayerType",void 0),I([Ft("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),I([N(LO)],e.prototype,"opacity",void 0),I([N({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),I([N({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),I([Ft("title"),Ft(["web-scene"],"title")],e.prototype,"writeTitle",null),I([N({type:xg,json:{origins:{"web-scene":{write:{layerContainerTypes:Uo}}}}})],e.prototype,"visibilityTimeExtent",void 0),I([At("visibilityTimeExtent")],e.prototype,"readTimeExtent",null),I([Ft(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[wn,_M]]}})],e.prototype,"writeTimeExtent",null),I([N({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:Uo}}},name:"visibility",write:!0}})],e.prototype,"visible",void 0),e=I([De("esri.layers.mixins.OperationalLayer")],e),e};function tft(t){return YNe(t)||HNe(t)}function GNe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function jNe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function BNe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-notes"&&"sublayers"in t}function zhe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function qhe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="link-chart"&&"layers"in t}function HNe(t){return(t==null?void 0:t.type)==="scene"}function UNe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function ift(t){return(t==null?void 0:t.type)==="subtype-sublayer"}function YNe(t){const e=t==null?void 0:t.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function sft(t){const e=t==null?void 0:t.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const nft={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function FO(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function XNe(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function HM(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function rft(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t.source)==null?void 0:i.type)==="feature-layer"}function oft(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function Vhe(t,e){const i=Li==null?void 0:Li.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const s=t.toLowerCase().indexOf("/rest/services");if(s===-1)return null;const n=`${t.slice(0,s)}/rest/info`,r=e!=null?e.signal:null,{data:o}=await Qs(n,{query:{f:"json"},responseType:"json",signal:r});return(o==null?void 0:o.owningSystemUrl)||null}function WNe(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function aft(t){return t!=null&&typeof t=="object"&&"isTable"in t&&!!t.isTable}function lft(t){return WNe(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function ZNe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function uft(t){return!!ZNe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function cft(t){return t?("subtypes"in t?t.subtypes:UNe(t.parent)?t.parent.subtypes:[])??[]:[]}let ep=class extends Ei{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:UZ(e.path,e.portalItem)}:e}set path(e){e!=null&&Mu(e)?zt.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return UZ(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const s=this.cdnUrl;if(s==null)throw new rt("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(s,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:s}=await nt(()=>import("./resourceUtils-ClY7AIy5.js"),[],import.meta.url);return await s(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function UZ(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&Mu(t)&&(t=Nq(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}I([N()],ep.prototype,"portalItem",void 0),I([N({type:String,value:null})],ep.prototype,"path",null),I([Sn("path")],ep.prototype,"_castPath",null),I([N({type:String,readOnly:!0})],ep.prototype,"url",null),I([N({type:String,readOnly:!0})],ep.prototype,"cdnUrl",null),I([N({type:String,readOnly:!0})],ep.prototype,"itemRelativeUrl",null),ep=I([De("esri.portal.PortalItemResource")],ep);const KNe=ep;let y3=class extends Ei{constructor(e){super(e),this.created=null,this.rating=null}};I([N()],y3.prototype,"created",void 0),I([N()],y3.prototype,"rating",void 0),y3=I([De("esri.portal.PortalRating")],y3);const wk=y3;var $1;const JNe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),QNe=new Set(["KML","GeoJson","CSV"]);let Di=$1=class extends Iq(vC){static from(t){return gC($1,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new cr(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var S;const t=((S=this.type)==null?void 0:S.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",s="16";let n,r=!1,o=!1,l=!1,c=!1,f=!1,y=!1,_=!1,x=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(r=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),l=e.includes("Route Layer"),c=e.includes("Markup"),f=e.includes("Spatiotemporal"),y=e.includes("UtilityNetwork"),n=f&&o?"spatiotemporaltable":o?"table":l?"routelayer":c?"markup":f?"spatiotemporal":y?"utilitynetwork":r?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(f=e.includes("Spatiotemporal"),_=e.includes("Relational"),n=f||_?"mapimages":r||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(x=e.includes("Map"),n=x?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",n?_C(i+n+s+".png"):null}get isLayer(){return this.type!=null&&JNe.has(this.type)}get itemCdnUrl(){return MV(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,s,n;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((n=(s=this.portal)==null?void 0:s.user)==null?void 0:n.username);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Ou.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(s=>{this.sourceJSON=s,this.read(s)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof wk&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new wk({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:Ue(this.applicationProxies),avgRating:this.avgRating,categories:Ue(this.categories),classification:Ue(this.classification),created:Ue(this.created),culture:this.culture,description:this.description,extent:Ue(this.extent),groupCategories:Ue(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Ue(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Ue(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ue(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ue(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new $1({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const s=t[i];s&&(t[i]=JSON.stringify(s))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new wk(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},$1)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const s in i.query)i.query[s]===null&&(i.query[s]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new rt("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new rt("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:s,folder:n,tags:r,title:o}=t||{},l={method:"post",query:{copyPrivateResources:s==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!s,tags:r==null?void 0:r.join(","),title:o}},{itemId:c}=await e.request(`${i}/copy`,l);return new $1({id:c,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,s={method:"post"};if(typeof e=="string")Tv(e)?s.query={data:e}:s.query={url:pl(e)},i!=null&&(s.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),s.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new rt("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await nt(()=>import("./resourceUtils-ClY7AIy5.js"),[],import.meta.url);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:s}=await nt(()=>import("./resourceUtils-ClY7AIy5.js"),[],import.meta.url);return t.portalItem=this,await s(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await nt(()=>import("./resourceUtils-ClY7AIy5.js"),[],import.meta.url);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new rt("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await nt(()=>import("./resourceUtils-ClY7AIy5.js"),[],import.meta.url);return e(this,t)}resourceFromPath(t){return new KNe({portalItem:this,path:t})}toJSON(){var i,s;const t=this.extent,e={accessInformation:this.accessInformation,categories:Ue(this.categories),classification:Ue(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(s=this.modified)==null?void 0:s.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ue(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ue(this.typeKeywords),url:this.url};return mq(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new $1({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};I([N({type:["private","shared","org","public"]})],Di.prototype,"access",void 0),I([N()],Di.prototype,"accessInformation",void 0),I([N({type:String})],Di.prototype,"apiKey",void 0),I([N({json:{read:{source:"appProxies"}}})],Di.prototype,"applicationProxies",void 0),I([N()],Di.prototype,"avgRating",void 0),I([N()],Di.prototype,"categories",void 0),I([N()],Di.prototype,"classification",void 0),I([N({type:Date})],Di.prototype,"created",void 0),I([N()],Di.prototype,"culture",void 0),I([N()],Di.prototype,"description",void 0),I([N({readOnly:!0})],Di.prototype,"displayName",null),I([N({type:cr})],Di.prototype,"extent",void 0),I([At("extent")],Di.prototype,"readExtent",null),I([N()],Di.prototype,"groupCategories",void 0),I([N({readOnly:!0})],Di.prototype,"iconUrl",null),I([N()],Di.prototype,"id",void 0),I([N({readOnly:!0})],Di.prototype,"isLayer",null),I([N({type:Boolean,readOnly:!0})],Di.prototype,"isOrgItem",void 0),I([N()],Di.prototype,"itemControl",void 0),I([N({readOnly:!0})],Di.prototype,"itemPageUrl",null),I([N({readOnly:!0})],Di.prototype,"itemUrl",null),I([N()],Di.prototype,"licenseInfo",void 0),I([N({type:Date})],Di.prototype,"modified",void 0),I([N()],Di.prototype,"name",void 0),I([N()],Di.prototype,"numComments",void 0),I([N()],Di.prototype,"numRatings",void 0),I([N()],Di.prototype,"numViews",void 0),I([N()],Di.prototype,"owner",void 0),I([N()],Di.prototype,"ownerFolder",void 0),I([N({type:Ou})],Di.prototype,"portal",void 0),I([N()],Di.prototype,"screenshots",void 0),I([N()],Di.prototype,"size",void 0),I([N()],Di.prototype,"snippet",void 0),I([N()],Di.prototype,"sourceJSON",void 0),I([N({type:String})],Di.prototype,"sourceUrl",void 0),I([N({type:String})],Di.prototype,"spatialReference",void 0),I([N()],Di.prototype,"tags",void 0),I([N()],Di.prototype,"thumbnail",void 0),I([N({readOnly:!0})],Di.prototype,"thumbnailUrl",null),I([N()],Di.prototype,"title",void 0),I([N()],Di.prototype,"type",void 0),I([N()],Di.prototype,"typeKeywords",void 0),I([N({type:String,json:{read(t,e){var i;if(QNe.has(e.type)){const s=(i=this.portal)==null?void 0:i.restUrl;t||(t=s&&this.id?`${s}/content/items/${this.id}/data`:null)}return t}}})],Di.prototype,"url",void 0),I([N({readOnly:!0})],Di.prototype,"userItemUrl",null),Di=$1=I([De("esri.portal.PortalItem")],Di);const TS=Di,Ghe=Object.freeze(Object.defineProperty({__proto__:null,default:TS},Symbol.toStringTag,{value:"Module"})),hl=Math.PI/180,e$e=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,i0=ur.radius,ch=ur.eccentricitySquared,t$e={a1:i0*ch,a2:i0*ch*i0*ch,a3:i0*ch*ch/2,a4:i0*ch*i0*ch*2.5,a5:i0*ch+i0*ch*ch/2,a6:1-ch},i$e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:ur.radius,f:ur.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:mg.radius,f:mg.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:uf.radius,f:uf.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:uf.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var Qe;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(Qe||(Qe={}));const s$e={[Qe.WGS84]:{[Qe.CGCS2000]:Hn,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:MS,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:Zb,[Qe.PLATE_CARREE]:Kb,[Qe.WGS84]:Hn,[Qe.WGS84_ECEF]:e2},[Qe.CGCS2000]:{[Qe.CGCS2000]:Hn,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:MS,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:Zb,[Qe.PLATE_CARREE]:Kb,[Qe.WGS84]:Hn,[Qe.WGS84_ECEF]:e2},[Qe.GCSMARS2000]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:Hn,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:WZ,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.GCSMOON2000]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:Hn,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:XZ,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.WEB_MERCATOR]:{[Qe.CGCS2000]:IS,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:IS,[Qe.SPHERICAL_ECEF]:n$e,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:Hn,[Qe.PLATE_CARREE]:a$e,[Qe.WGS84]:IS,[Qe.WGS84_ECEF]:r$e},[Qe.WGS84_ECEF]:{[Qe.CGCS2000]:t2,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:t2,[Qe.SPHERICAL_ECEF]:g$e,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:y$e,[Qe.PLATE_CARREE]:l$e,[Qe.WGS84]:t2,[Qe.WGS84_ECEF]:Hn},[Qe.SPHERICAL_ECEF]:{[Qe.CGCS2000]:Qb,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Qb,[Qe.SPHERICAL_ECEF]:Hn,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:f$e,[Qe.PLATE_CARREE]:u$e,[Qe.WGS84]:Qb,[Qe.WGS84_ECEF]:p$e},[Qe.SPHERICAL_MARS_PCPF]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:KZ,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:KZ,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:Hn,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.SPHERICAL_MOON_PCPF]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:ZZ,[Qe.LON_LAT]:ZZ,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:Hn,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.UNKNOWN]:{[Qe.CGCS2000]:null,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:null,[Qe.SPHERICAL_ECEF]:null,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:Hn,[Qe.WEB_MERCATOR]:null,[Qe.PLATE_CARREE]:null,[Qe.WGS84]:null,[Qe.WGS84_ECEF]:null},[Qe.LON_LAT]:{[Qe.CGCS2000]:Hn,[Qe.GCSMARS2000]:Hn,[Qe.GCSMOON2000]:Hn,[Qe.LON_LAT]:Hn,[Qe.SPHERICAL_ECEF]:MS,[Qe.SPHERICAL_MARS_PCPF]:WZ,[Qe.SPHERICAL_MOON_PCPF]:XZ,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:Zb,[Qe.PLATE_CARREE]:Kb,[Qe.WGS84]:Hn,[Qe.WGS84_ECEF]:e2},[Qe.PLATE_CARREE]:{[Qe.CGCS2000]:Jb,[Qe.GCSMARS2000]:null,[Qe.GCSMOON2000]:null,[Qe.LON_LAT]:Jb,[Qe.SPHERICAL_ECEF]:c$e,[Qe.SPHERICAL_MARS_PCPF]:null,[Qe.SPHERICAL_MOON_PCPF]:null,[Qe.UNKNOWN]:null,[Qe.WEB_MERCATOR]:h$e,[Qe.PLATE_CARREE]:Hn,[Qe.WGS84]:Jb,[Qe.WGS84_ECEF]:d$e}};function jhe(t,e,i=Bhe()){return t==null||e==null?null:v$e(t,e,i).projector}function YZ(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=jp(t,1)),OI(t)?e.spatialReferenceId=Qe.SPHERICAL_ECEF:Jy(t)?e.spatialReferenceId=Qe.WGS84:Qh(t)?e.spatialReferenceId=Qe.WEB_MERCATOR:x9e(t)?e.spatialReferenceId=Qe.PLATE_CARREE:t.wkt===C9e.wkt?e.spatialReferenceId=Qe.WGS84_ECEF:t.wkid===Ky.CGCS2000?e.spatialReferenceId=Qe.CGCS2000:t.wkt===Gq.wkt?e.spatialReferenceId=Qe.SPHERICAL_MARS_PCPF:t.wkt===jq.wkt?e.spatialReferenceId=Qe.SPHERICAL_MOON_PCPF:$ae(t)?e.spatialReferenceId=Qe.GCSMARS2000:Oae(t)?e.spatialReferenceId=Qe.GCSMOON2000:e.spatialReferenceId=Qe.UNKNOWN):Qe.UNKNOWN}function Hn(t,e,i,s){t!==i&&(i[s++]=t[e++],i[s++]=t[e++],i[s]=t[e])}function IS(t,e,i,s){i[s]=I2*(t[e]/zy),i[s+1]=I2*(Uhe-2*Math.atan(Math.exp(-t[e+1]/zy))),i[s+2]=t[e+2]}function n$e(t,e,i,s){const n=t[e]/zy,r=Uhe-2*Math.atan(Math.exp(-t[e+1]/zy)),o=zy+t[e+2],l=Math.cos(r)*o;i[s]=Math.cos(n)*l,i[s+1]=Math.sin(n)*l,i[s+2]=Math.sin(r)*o}function r$e(t,e,i,s){IS(t,e,i,s),e2(i,s,i,s)}function o$e(t,e,i,s,n){const r=.4999999*UM,o=Hc(T2*t[e+1],-r,r),l=Math.sin(o);i[s++]=T2*t[e]*n.radius,i[s++]=n.halfSemiMajorAxis*Math.log((1+l)/(1-l)),i[s]=t[e+2]}function Zb(t,e,i,s){o$e(t,e,i,s,ur)}function Kb(t,e,i,s){i[s]=t[e]*JZ,i[s+1]=t[e+1]*JZ,i[s+2]=t[e+2]}function Jb(t,e,i,s){i[s]=t[e]*QZ,i[s+1]=t[e+1]*QZ,i[s+2]=t[e+2]}function a$e(t,e,i,s){IS(t,e,i,s),Kb(i,s,i,s)}function l$e(t,e,i,s){t2(t,e,i,s),Kb(i,s,i,s)}function u$e(t,e,i,s){Qb(t,e,i,s),Kb(i,s,i,s)}function c$e(t,e,i,s){Jb(t,e,i,s),MS(i,s,i,s)}function h$e(t,e,i,s){Jb(t,e,i,s),Zb(i,s,i,s)}function d$e(t,e,i,s){Jb(t,e,i,s),e2(i,s,i,s)}function OV(t,e,i,s,n){const r=n+t[e+2],o=T2*t[e+1],l=T2*t[e],c=Math.cos(o)*r;i[s]=Math.cos(l)*c,i[s+1]=Math.sin(l)*c,i[s+2]=Math.sin(o)*r}function XZ(t,e,i,s){OV(t,e,i,s,mg.radius)}function WZ(t,e,i,s){OV(t,e,i,s,uf.radius)}function MS(t,e,i,s){OV(t,e,i,s,ur.radius)}function RV(t,e,i,s,n){const r=t[e],o=t[e+1],l=t[e+2],c=Math.sqrt(r*r+o*o+l*l),f=yV(l/(c===0?1:c)),y=Math.atan2(o,r);i[s++]=I2*y,i[s++]=I2*f,i[s]=c-n}function ZZ(t,e,i,s){RV(t,e,i,s,mg.radius)}function KZ(t,e,i,s){RV(t,e,i,s,uf.radius)}function Qb(t,e,i,s){RV(t,e,i,s,ur.radius)}function f$e(t,e,i,s){Qb(t,e,i,s),Zb(i,s,i,s)}function p$e(t,e,i,s){Qb(t,e,i,s),e2(i,s,i,s)}function m$e(t,e,i,s,n){const r=T2*t[e],o=T2*t[e+1],l=t[e+2],c=Math.sin(o),f=Math.cos(o),y=n.radius/Math.sqrt(1-n.eccentricitySquared*c*c);i[s++]=(y+l)*f*Math.cos(r),i[s++]=(y+l)*f*Math.sin(r),i[s++]=(y*(1-n.eccentricitySquared)+l)*c}function e2(t,e,i,s){m$e(t,e,i,s,ur)}function t2(t,e,i,s){const n=t$e,r=t[e],o=t[e+1],l=t[e+2];let c,f,y,_,x,S,P,A,k,$,F,G,V,B,W,J,re,se,oe,pe,ue;c=Math.abs(l),f=r*r+o*o,y=Math.sqrt(f),_=f+l*l,x=Math.sqrt(_),pe=Math.atan2(o,r),S=l*l/_,P=f/_,B=n.a2/x,W=n.a3-n.a4/x,P>.3?(A=c/x*(1+P*(n.a1+B+S*W)/x),oe=Math.asin(A),$=A*A,k=Math.sqrt(1-$)):(k=y/x*(1-S*(n.a5-B-P*W)/x),oe=Math.acos(k),$=1-k*k,A=Math.sqrt($)),F=1-ur.eccentricitySquared*$,G=ur.radius/Math.sqrt(F),V=n.a6*G,B=y-G*k,W=c-V*A,re=k*B+A*W,J=k*W-A*B,se=J/(V/F+re),oe+=se,ue=re+J*se/2,l<0&&(oe=-oe),i[s++]=I2*pe,i[s++]=I2*oe,i[s]=ue}function g$e(t,e,i,s){t2(t,e,i,s),MS(i,s,i,s)}function y$e(t,e,i,s){t2(t,e,i,s),Zb(i,s,i,s)}function v$e(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const s=YZ(t,i.source),n=YZ(e,i.dest);return s===Qe.UNKNOWN&&n===Qe.UNKNOWN?Ko(t,e)?i.projector=Hn:i.projector=null:i.projector=s$e[s][n],i}function Bhe(){return{source:{spatialReference:null,spatialReferenceId:Qe.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Qe.UNKNOWN,metersPerUnit:1},projector:Hn}}const fft={spatialReference:null,spatialReferenceId:Qe.UNKNOWN},pft={spatialReference:null,spatialReferenceId:Qe.UNKNOWN},Hhe=Bhe(),T2=ace(1),I2=cDe(1),UM=Math.PI,Uhe=.5*UM,zy=ur.radius,JZ=zy*UM/180,QZ=180/(zy*UM);function px(t,e,i,s,n,r,o=Math.floor(t.length/3)){const l=jhe(e,n,Hhe);if(l==null)return!1;if(l===Hn){if(t===s&&i===r)return!0;const f=i+3*o;for(let y=i,_=r;y<f;y++,_++)s[_]=t[y];return!0}const c=i+3*o;for(let f=i,y=r;f<c;f+=3,y+=3)l(t,f,s,y);return!0}const mft=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:px},Symbol.toStringTag,{value:"Module"}));function eK(t,e,i,s,n,r){return i4[0]=t,i4[1]=e,i4[2]=i,px(i4,s,0,n,r,0)}const i4=Nt();let s4=0,Sk=class zO{static fromGE(e){const i=new zO;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=s4++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=s4++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=s4++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=s4++}getInverse(){const e=new zO;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},t6=class v3{static cacheKey(e,i){var s,n,r,o,l,c;return[((s=e.wkid)==null?void 0:s.toString())??"-1",((n=e.wkt)==null?void 0:n.toString())??"",((r=e.wkt2)==null?void 0:r.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((l=i.wkt)==null?void 0:l.toString())??"",((c=i.wkt2)==null?void 0:c.toString())??""].join()}static fromGE(e){const i=new v3;let s="";for(const n of e.steps){const r=Sk.fromGE(n);i.steps.push(r),s+=r.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=s,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof Sk?this.steps.push(i):this.steps.push(new Sk({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new v3;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const s=this.steps[i];e.steps.push(s.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,s){this._cachedProjection[v3.cacheKey(e,i)]=s}getCachedGeTransformation(e,i){let s="";for(const r of this.steps)s+=r.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);const n=this._cachedProjection[v3.cacheKey(e,i)];return n===void 0?null:n}};function Yhe(t,e,i){if(e==null||i==null||i.vcsWkid||Ko(e,i)||gg(e)||gg(i))return null;const s=RI(e)/RI(i);if(s===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>_$e(n,s);case"polyline":case"esriGeometryPolyline":return n=>x$e(n,s);case"polygon":case"esriGeometryPolygon":return n=>b$e(n,s);case"multipoint":case"esriGeometryMultipoint":return n=>w$e(n,s);case"extent":case"esriGeometryEnvelope":return n=>S$e(n,s);default:return null}}function _$e(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function b$e(t,e){if(t)for(const i of t.rings)for(const s of i)s.length>2&&(s[2]*=e)}function x$e(t,e){if(t)for(const i of t.paths)for(const s of i)s.length>2&&(s[2]*=e)}function w$e(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function S$e(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Uh=null,wg=null,AS=null,OT={};const LV=new SC;function mx(){return!!Uh&&zq()}function Xhe(){return!!mx()||(mi(LV),M2(),!1)}function E$e(t,e){return!t||!e||Yp(t,e)||Xhe()}function C$e(t,e){return!Yp(t,e)&&!mx()}function M2(t){return AS==null&&(AS=Promise.all([qq(),nt(()=>Promise.resolve().then(()=>fXe),void 0,import.meta.url).then(e=>e.g),nt(()=>Promise.resolve().then(()=>bXe),void 0,import.meta.url)])),AS.then(([,e,{hydratedAdapter:i}])=>{Kl(t),wg=i,Uh=e.default,Uh._enableProjection(y9e),LV.notify()})}function pf(t,e,i=null,s=null){return Array.isArray(t)?t.length===0?[]:qO(wg,t,t[0].spatialReference,e,i,s):qO(wg,[t],t.spatialReference,e,i,s)[0]}function qO(t,e,i,s,n=null,r=null){if(i==null||s==null)return e;if(Yp(i,s,n))return e.map(o=>RT(o,i,s));if(n==null&&OI(i))return e.map(o=>RT(o,i,qi.WGS84)).map(o=>A2(o,s));if(n==null&&OI(s))return e.map(o=>A2(o,qi.WGS84)).map(o=>RT(o,qi.WGS84,s));if(n==null){const o=t6.cacheKey(i,s);OT[o]!==void 0?n=OT[o]:((n=Zhe(i,s,void 0))==null&&(n=new t6),OT[o]=n)}if(Uh==null||t==null)throw new YM;return r!=null?Uh._project(t,e,i,s,n,r):Uh._project(t,e,i,s,n)}function P$e(t,e){const i=Whe([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Whe(t,e){if(!mx()){for(const i of t)if(i!=null&&!Ko(i.spatialReference,e)&&Dc(i.spatialReference)&&Dc(e)&&!Yp(i.spatialReference,e))return mi(LV),{pending:M2(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Ko(i.spatialReference,e)?i:Dc(i.spatialReference)&&Dc(e)?A2(i,e):null)}}function Zhe(t,e,i=null){if(t==null||e==null)return null;if(Uh==null||wg==null)throw new YM;const s=Uh._getTransformation(wg,t,e,i,i==null?void 0:i.spatialReference);return s!==null?t6.fromGE(s):null}function T$e(t,e,i=null){if(Uh==null||wg==null)throw new YM;const s=Uh._getTransformationBySuitability(wg,t,e,i,i==null?void 0:i.spatialReference);if(s!==null){const n=[];for(const r of s)n.push(t6.fromGE(r));return n}return[]}let YM=class extends rt{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function I$e(){Uh=null,wg=null,AS=null,OT={}}const M$e={get loadPromise(){return AS}};function A2(t,e){try{const i=pf(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const s=Yhe(i.type,t.spatialReference,e);return s!=null&&s(i),i}catch(i){if(!(i instanceof YM))throw i;return null}}async function A$e(t,e,i){const s=t.spatialReference;return s!=null&&e!=null&&await DC(s,e,null,i),A2(t,e)}function Yp(t,e,i){return!i&&(!!Ko(t,e)||Dc(t)&&Dc(e)&&!!jhe(t,e,Hhe))}function D$e(t,e){if(Ko(t,e))return!0;if(!Dc(t)||!Dc(e))return!1;const i=Jy(t)||Qh(t)||hW(t),s=Jy(e)||Qh(e)||hW(e);return i&&s}async function DC(t,e,i,s){if(mx())return jX(s);if(Array.isArray(t)){for(const{source:n,dest:r,geographicTransformation:o}of t)if(n&&r&&!Yp(n,r,o))return M2(s)}else if(t&&e&&!Yp(t,e,i))return M2(s);return jX(s)}function RT(t,e,i){return t?"x"in t?Khe(t,e,new Hi,i,0):"xmin"in t?tde(t,e,new cr,i,0):"rings"in t?ede(t,e,new Wa,i,0):"paths"in t?Qhe(t,e,new Ef,i,0):"points"in t?Jhe(t,e,new Dv,i,0):null:null}function k$e(t,e,i=e.spatialReference,s=0){return i!=null&&t.spatialReference!=null&&Khe(t,t.spatialReference,e,i,s)!=null}function Khe(t,e,i,s,n){Ba[0]=t.x,Ba[1]=t.y;const r=t.z;return Ba[2]=r!==void 0?r:n,px(Ba,e,0,Ba,s,0)?(i.x=Ba[0],i.y=Ba[1],i.spatialReference=s,r!==void 0||gg(s)?(i.z=Ba[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function N$e(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&Jhe(t,t.spatialReference,e,i,s)!=null}function Jhe(t,e,i,s,n){const{points:r,hasZ:o,hasM:l}=t,c=[],f=r.length,y=[];for(const x of r)y.push(x[0],x[1],o?x[2]:n);if(!px(y,e,0,y,s,0,f))return null;const _=o||gg(s);for(let x=0;x<f;++x){const S=3*x,P=y[S],A=y[S+1];_&&l?c.push([P,A,y[S+2],r[x][3]]):_?c.push([P,A,y[S+2]]):l?c.push([P,A,r[x][2]]):c.push([P,A])}return i.points=c,i.spatialReference=s,i.hasZ=o,i.hasM=l,i}function $$e(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&Qhe(t,t.spatialReference,e,i,s)!=null}function Qhe(t,e,i,s,n){const{paths:r,hasZ:o,hasM:l}=t,c=[];if(!ide(r,o??!1,l??!1,e,c,s,n))return null;const f=o||gg(s);return i.paths=c,i.spatialReference=s,i.hasZ=f,i.hasM=l,i}function O$e(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&ede(t,t.spatialReference,e,i,s)!=null}function ede(t,e,i,s,n){const{rings:r,hasZ:o,hasM:l}=t,c=[];if(!ide(r,o??!1,l??!1,e,c,s,n))return null;const f=o||gg(s);return i.rings=c,i.spatialReference=s,i.hasZ=f,i.hasM=l,i}function R$e(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&tde(t,t.spatialReference,e,i,s)!=null}function tde(t,e,i,s,n){const{xmin:r,ymin:o,xmax:l,ymax:c,hasZ:f,hasM:y}=t,_=f?t.zmin:n;if(!eK(r,o,_,e,Ba,s))return null;const x=f||gg(s);i.xmin=Ba[0],i.ymin=Ba[1],x&&(i.zmin=Ba[2]);const S=f?t.zmax:n;return eK(l,c,S,e,Ba,s)?(i.xmax=Ba[0],i.ymax=Ba[1],x&&(i.zmax=Ba[2]),y&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=s,i):null}function ide(t,e,i,s,n,r,o=0){const l=new Array;for(const y of t)for(const _ of y)l.push(_[0],_[1],e?_[2]:o);if(!px(l,s,0,l,r,0))return!1;let c=0;n.length=0;const f=e||gg(r);for(const y of t){const _=new Array;for(const x of y)f&&i?_.push([l[c++],l[c++],l[c++],x[3]]):f?_.push([l[c++],l[c++],l[c++]]):i?(_.push([l[c++],l[c++],x[2]]),c++):(_.push([l[c++],l[c++]]),c++);n.push(_)}return!0}const Ba=Nt(),yft=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Yp,getTransformation:Zhe,getTransformations:T$e,initializeProjection:DC,isEqualBaseGCS:D$e,isLoaded:mx,isLoadedOrLoad:Xhe,isLoadedOrLoadFor:E$e,load:M2,project:pf,projectExtent:R$e,projectMany:qO,projectMultipoint:N$e,projectOrLoad:P$e,projectOrLoadMany:Whe,projectPoint:k$e,projectPolygon:O$e,projectPolyline:$$e,projectWithZConversion:A$e,projectWithoutEngine:RT,requiresLoad:C$e,test:M$e,tryProjectWithZConversion:A2,unload:I$e},Symbol.toStringTag,{value:"Module"}));async function L$e(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Ib(t);const i=qi.WGS84;return await DC(e,i),pf(t,i)}function F$e(t,e){if(!sde(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function sde(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function vft(t){return sde(t,q$e.HOSTED_SERVICE)}function z$e(t,e){const i=t.typeKeywords;if(i){const s=i.indexOf(e);s>-1&&i.splice(s,1)}}function _ft(t,e,i){i?F$e(t,e):z$e(t,e)}async function bft(t){const e=t.clone().normalize();let i;if(e.length>1)for(const s of e)i?s.width>i.width&&(i=s):i=s;else i=e[0];return L$e(i)}const q$e={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function tK(t){var c;const{portal:e,isOrgItem:i,itemControl:s}=t,n=(c=e.user)==null?void 0:c.privileges;let r=!n||n.includes("features:user:edit"),o=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const l=s==="update"||s==="admin";return l?o=r=!0:o&&(r=!0),{features:{edit:r,fullEdit:o},content:{updateItem:l}}}const nde=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=so(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,n){if(s.itemId)return new TS({id:s.itemId,portal:n==null?void 0:n.portal})}writePortalItem(i,s){i!=null&&i.id&&(s.itemId=i.id)}async loadFromPortal(i,s){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:r}=await nt(()=>import("./layersLoader-CF3RN3iu.js"),__vite__mapDeps([106,95,93,94,107,32]),import.meta.url);return Kl(s),await r({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},s)}catch(r){throw ad(r)||zt.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${r}`),r}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(s=>(Nh(s),!0)))}async setUserPrivileges(i,s){if(!Gs.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:n,fullEdit:r},content:{updateItem:o}}=await this._fetchUserPrivileges(i,s);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",r),this._set("userHasUpdateItemPrivileges",o)}catch(n){Nh(n)}}async _fetchUserPrivileges(i,s){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(s);const r=i===n.id;if(r&&n.portal.user)return tK(n);let o,l;if(r)o=n.portal.url;else try{o=await Vhe(this.url,s)}catch(_){Nh(_)}if(!o||!ATe(o,n.portal.url))return this._fetchFallbackUserPrivileges(s);try{const _=s!=null?s.signal:null;l=await(Li==null?void 0:Li.getCredential(`${o}/sharing`,{prompt:!1,signal:_}))}catch(_){Nh(_)}const c=!0,f=!1,y=!1;if(!l)return{features:{edit:c,fullEdit:f},content:{updateItem:y}};try{if(r?await n.reload():(n=new TS({id:i,portal:{url:o}}),await n.load(s)),n.portal.user)return tK(n)}catch(_){Nh(_)}return{features:{edit:c,fullEdit:f},content:{updateItem:y}}}async _fetchFallbackUserPrivileges(i){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(i)}catch(n){Nh(n)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const s=this.url?Li==null?void 0:Li.findCredential(this.url):null;if(!s)return!0;const n=n4.credential===s?n4.user:await this._fetchEditingUser(i);return n4.credential=s,n4.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var y,_;const s=(_=(y=this.portalItem)==null?void 0:y.portal)==null?void 0:_.user;if(s)return s;const n=Li==null?void 0:Li.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const r=`${n.owningSystemUrl}/sharing/rest`,o=Ou.getDefault();if(o&&o.loaded&&Fc(o.restUrl)===Fc(r))return o.user;const l=`${r}/community/self`,c=i!=null?i.signal:null,f=await oV(Qs(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return f.ok?Yq.fromJSON(f.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){var o;const n=s==null?void 0:s.portal,r=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Ou.getDefault());return n&&r&&!yae(r.restUrl,n.restUrl)?(s.messages&&s.messages.push(new rt("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return I([N({type:TS})],e.prototype,"portalItem",null),I([At("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),I([Ft("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),I([N({clonable:!1})],e.prototype,"resourceReferences",void 0),I([N({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),I([N({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),I([N({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=I([De("esri.layers.mixins.PortalLayer")],e),e},n4={credential:null,user:null},FV=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&V$e(i,s.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return I([N({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),I([N({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),I([N({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=I([De("esri.layers.mixins.ScaleRangeLayer")],e),e};function V$e(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const G$e={BingMapsLayer:async()=>(await nt(async()=>{const{default:t}=await import("./BingMapsLayer-D1ZVB56g.js");return{default:t}},__vite__mapDeps([108,109,6,7]),import.meta.url)).default,BuildingSceneLayer:async()=>(await nt(async()=>{const{default:t}=await import("./BuildingSceneLayer-BPsZIrm5.js");return{default:t}},__vite__mapDeps([110,111,112,113,114,32,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,94]),import.meta.url)).default,CSVLayer:async()=>(await nt(async()=>{const{default:t}=await import("./CSVLayer-Bd5_wBOo.js");return{default:t}},__vite__mapDeps([131,132,133,111]),import.meta.url)).default,CatalogLayer:async()=>(await nt(async()=>{const{default:t}=await import("./CatalogLayer-CifazpIT.js");return{default:t}},__vite__mapDeps([134,8,135,136,137,138,65,139,140,141,12,13,14,15,132,133,111,142,143,144,145,146,104,103,105,147,102]),import.meta.url)).default,DimensionLayer:async()=>(await nt(async()=>{const{default:t}=await import("./DimensionLayer-CvBKyZaf.js");return{default:t}},__vite__mapDeps([148,149]),import.meta.url)).default,ElevationLayer:async()=>(await nt(async()=>{const{default:t}=await import("./ElevationLayer-CC9E0pMl.js");return{default:t}},__vite__mapDeps([82,83,6,7,84,85,39,86]),import.meta.url)).default,FeatureLayer:async()=>(await nt(async()=>{const{default:t}=await Promise.resolve().then(()=>LGe);return{default:t}},void 0,import.meta.url)).default,GeoJSONLayer:async()=>(await nt(async()=>{const{default:t}=await import("./GeoJSONLayer-CWnc-b7k.js");return{default:t}},__vite__mapDeps([150,132,133,111]),import.meta.url)).default,GeoRSSLayer:async()=>(await nt(async()=>{const{default:t}=await import("./GeoRSSLayer-CGbngyD_.js");return{default:t}},[],import.meta.url)).default,GroupLayer:async()=>(await nt(async()=>{const{default:t}=await Promise.resolve().then(()=>sOe);return{default:t}},void 0,import.meta.url)).default,ImageryLayer:async()=>(await nt(async()=>{const{default:t}=await import("./ImageryLayer-D03DtarC.js");return{default:t}},__vite__mapDeps([151,152,153,154,76,155,136,14,12,13,15,58,59,109,143,144,145,146,104,103,105,147]),import.meta.url)).default,ImageryTileLayer:async()=>(await nt(async()=>{const{default:t}=await import("./ImageryTileLayer-BElNnhiG.js");return{default:t}},__vite__mapDeps([156,152,153,154,76,155,136,14,12,13,15,58,59,6,7,157,158,21,8,159,85,39]),import.meta.url)).default,IntegratedMesh3DTilesLayer:async()=>(await nt(async()=>{const{default:t}=await import("./IntegratedMesh3DTilesLayer-M-u4EEId.js");return{default:t}},[],import.meta.url)).default,IntegratedMeshLayer:async()=>(await nt(async()=>{const{default:t}=await import("./IntegratedMeshLayer-hiXxa7XY.js");return{default:t}},__vite__mapDeps([160,161,114,162,112,113,32,115,116,117]),import.meta.url)).default,KMLLayer:async()=>(await nt(async()=>{const{default:t}=await import("./KMLLayer-HPnp3dDk.js");return{default:t}},__vite__mapDeps([163,164]),import.meta.url)).default,KnowledgeGraphLayer:async()=>(await nt(async()=>{const{default:t}=await import("./KnowledgeGraphLayer-DUh2dHYo.js");return{default:t}},__vite__mapDeps([165,166,102,103,104,105,167,168,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,132,111]),import.meta.url)).default,LineOfSightLayer:async()=>(await nt(async()=>{const{default:t}=await import("./LineOfSightLayer-B8UDChz4.js");return{default:t}},__vite__mapDeps([180,149,181,182,183,184,161,114,162]),import.meta.url)).default,LinkChartLayer:async()=>(await nt(async()=>{const{default:t}=await import("./LinkChartLayer-CoA66rFx.js");return{default:t}},__vite__mapDeps([185,102,103,104,105,166,167,168,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,132,111]),import.meta.url)).default,MapImageLayer:async()=>(await nt(async()=>{const{default:t}=await import("./MapImageLayer-CrXTp5cR.js");return{default:t}},__vite__mapDeps([186,73,187,142,65,14,143,144,12,13,15,145,146,104,103,105,147,102,75,72,74,109]),import.meta.url)).default,MapNotesLayer:async()=>(await nt(async()=>{const{default:t}=await import("./MapNotesLayer-Bn6EtVXP.js");return{default:t}},__vite__mapDeps([188,12,13,14,15,189]),import.meta.url)).default,MediaLayer:async()=>(await nt(async()=>{const{default:t}=await import("./MediaLayer-CWMTJucT.js");return{default:t}},__vite__mapDeps([190,191,192,13,27,162,170,171,22]),import.meta.url)).default,OGCFeatureLayer:async()=>(await nt(async()=>{const{default:t}=await import("./OGCFeatureLayer-D5gXkoKF.js");return{default:t}},__vite__mapDeps([193,194,102,103,104,105,195,196,132,133,111,197]),import.meta.url)).default,OpenStreetMapLayer:async()=>(await nt(async()=>{const{default:t}=await import("./OpenStreetMapLayer-otztBLHj.js");return{default:t}},__vite__mapDeps([198,199,109,6,7]),import.meta.url)).default,OrientedImageryLayer:async()=>(await nt(async()=>{const{default:t}=await import("./OrientedImageryLayer-3m0L2kxk.js");return{default:t}},[],import.meta.url)).default,PointCloudLayer:async()=>(await nt(async()=>{const{default:t}=await import("./PointCloudLayer-CwHAplTx.js");return{default:t}},__vite__mapDeps([200,112,113,114,32,115,116,201]),import.meta.url)).default,RouteLayer:async()=>(await nt(async()=>{const{default:t}=await import("./RouteLayer-AJe6NCQG.js");return{default:t}},__vite__mapDeps([202,113,114,14,203,12,13,15,81]),import.meta.url)).default,SceneLayer:async()=>(await nt(async()=>{const{default:t}=await import("./SceneLayer-BVqiSqn5.js");return{default:t}},__vite__mapDeps([204,205,140,206,27,207,139,208,209,210,211,212,213,128,129,214,215,216,138,65,66,112,113,114,32,115,116,94,111,117,217,161,162,118,119,120,121,122,123,124,125,126,127,130]),import.meta.url)).default,StreamLayer:async()=>(await nt(async()=>{const{default:t}=await import("./StreamLayer-DFfbMfXa.js");return{default:t}},[],import.meta.url)).default,SubtypeGroupLayer:async()=>(await nt(async()=>{const{default:t}=await import("./SubtypeGroupLayer-qXSj14QC.js");return{default:t}},__vite__mapDeps([218,59,58]),import.meta.url)).default,TileLayer:async()=>(await nt(async()=>{const{default:t}=await import("./TileLayer-CdakavAT.js");return{default:t}},__vite__mapDeps([219,83,6,7,84,85,39,187,142,65,14,143,144,12,13,15,145,146,104,103,105,147,102,75,109]),import.meta.url)).default,UnknownLayer:async()=>(await nt(async()=>{const{default:t}=await import("./UnknownLayer-CqAi_a1N.js");return{default:t}},[],import.meta.url)).default,UnsupportedLayer:async()=>(await nt(async()=>{const{default:t}=await import("./UnsupportedLayer-B_9Ip3hP.js");return{default:t}},[],import.meta.url)).default,VectorTileLayer:async()=>(await nt(async()=>{const{default:t}=await import("./VectorTileLayer-Bep2KqNV.js");return{default:t}},__vite__mapDeps([220,83,6,7,84,85,39,20,32,221,222,223,224,25,225,18,23,28]),import.meta.url)).default,VideoLayer:async()=>(await nt(async()=>{const{default:t}=await import("./VideoLayer-B2uV4L3K.js");return{default:t}},__vite__mapDeps([226,227,128]),import.meta.url)).default,ViewshedLayer:async()=>(await nt(async()=>{const{default:t}=await import("./ViewshedLayer-D-I9LYEY.js");return{default:t}},__vite__mapDeps([228,181,182,183,184,149]),import.meta.url)).default,VoxelLayer:async()=>(await nt(async()=>{const{default:t}=await import("./VoxelLayer-CiuLHZ0g.js");return{default:t}},__vite__mapDeps([229,112,113,114,32,115,116,161,162]),import.meta.url)).default,WFSLayer:async()=>(await nt(async()=>{const{default:t}=await import("./WFSLayer-CjLQOS3b.js");return{default:t}},__vite__mapDeps([230,132,133,111,231,195,196,103,104,232]),import.meta.url)).default,WMSLayer:async()=>(await nt(async()=>{const{default:t}=await import("./WMSLayer-D1ceYcS5.js");return{default:t}},__vite__mapDeps([233,73,234,235,109]),import.meta.url)).default,WMTSLayer:async()=>(await nt(async()=>{const{default:t}=await import("./WMTSLayer-Bj2euaAH.js");return{default:t}},__vite__mapDeps([236,199,109,6,7,84,234,232]),import.meta.url)).default,WebTileLayer:async()=>(await nt(async()=>{const{default:t}=await import("./WebTileLayer-zpVxixRH.js").then(e=>e.W);return{default:t}},__vite__mapDeps([199,109,6,7]),import.meta.url)).default};function j$e(t){return new Jue({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function xft(t){for(const e of t.values())e==null||e.destroy();t.clear()}function XM(t,e,i=ui){return e||(e=new i),e===t||(e.removeAll(),B$e(t)?e.addMany(t):t&&e.add(t)),e}function rde(t){return t}function B$e(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}function VO(t,e,i){let s,n;if(t)for(let r=0,o=t.length;r<o;r++){if(s=t.at(r),(s==null?void 0:s[e])===i)return s;if((s==null?void 0:s.type)==="group"&&(n=VO(s.layers,e,i),n))return n}}const H$e=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new ui;const s=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||zt.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},r=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void zt.getLogger(this).error("#add()","Cannot add layer to itself.");s(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>r(o.item))])}destroy(){const i=this.layers.toArray();for(const s of i)s.destroy();this.layers.destroy()}set layers(i){this._set("layers",XM(i,this._get("layers")))}add(i,s){const n=this.layers;if(s=n.getNextIndex(s),i instanceof LM){const r=i;r.parent===this?this.reorder(r,s):n.add(r,s)}else Cv(i)?i.then(r=>{this.destroyed||this.add(r,s)}):zt.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const n=this.layers;let r=n.getNextIndex(s);i.slice().forEach(o=>{o.parent!==this?(n.add(o,r),r+=1):this.reorder(o,r)})}findLayerById(i){return VO(this.layers,"id",i)}findLayerByUid(i){return VO(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return I([N()],e.prototype,"layers",null),e=I([De("esri.support.LayersMixin")],e),e};function GO(t,e,i){if(t)for(let s=0,n=t.length;s<n;s++){const r=t.at(s);if(r[e]===i)return r;if((r==null?void 0:r.type)==="group"){const o=GO(r.tables,e,i);if(o)return o}}}const U$e=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new ui,this.addHandles([this.tables.on("after-add",s=>{const n=s.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&zt.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const s of i)s.destroy();this.tables.destroy()}set tables(i){this._set("tables",XM(i,this._get("tables")))}findTableById(i){return GO(this.tables,"id",i)}findTableByUid(i){return GO(this.tables,"uid",i)}};return I([N()],e.prototype,"tables",null),e=I([De("esri.support.TablesMixin")],e),e},Y$e=Symbol("WebScene");var sf;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(sf||(sf={}));async function X$e(t){const e=[];for(const i of t.allLayers)if("beforeSave"in i&&typeof i.beforeSave=="function"){const s=i.beforeSave();s&&e.push(s)}await Promise.allSettled(e)}const W$e=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function wft(t,e,i){let s=(t.messages??[]).filter(({type:n})=>n==="error").map(({name:n,message:r,details:o})=>new rt(n,r,o));if(t.blockedRelativeUrls&&(s=s.concat(t.blockedRelativeUrls.map(n=>new rt("url:unsupported",`Relative url '${n}' is not supported`)))),i){const{ignoreUnsupported:n,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:o}=i;n&&(s=s.filter(({name:l})=>!(W$e.has(l)||r.includes(l)))),o&&(s=s.filter(l=>l.name!=="web-document-write:property-required"))}if(s.length>0)throw new rt(e.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:s})}const Z$e=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),K$e=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function J$e(t){return t.layerContainerType==="basemap"?Z$e:t.layerContainerType==="operational-layers"?K$e:null}function Q$e(t,e){if(e.restrictedWebMapWriting){const i=J$e(e);return i==null||i.has(t.type)&&!HM(t)}return!0}function eOe(t,e){var i;if(e)if(HM(t)){const s=$p("featureCollection.layers",e),n=(i=s==null?void 0:s[0])==null?void 0:i.layerDefinition;n&&iK(t,n)}else t.type!=="group"&&iK(t,e)}function iK(t,e){"maxScale"in t&&(e.maxScale=EI(t.maxScale)??void 0),"minScale"in t&&(e.minScale=EI(t.minScale)??void 0)}function tOe(t,e){if(eOe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=EI(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(HM(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function iOe(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new rt("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(HM(t)&&!t.isTable)e=t.resourceInfo;else if(Q$e(t,i)){const s={};return t.write(s,i)?s:null}return e!=null&&tOe(t,e=Ue(e)),e}let la=class extends TV(FV(Fhe(nde(U$e(H$e(mV(LM))))))){constructor(e){super(e),this.allLayers=new Jue({getCollections:()=>[this.layers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=j$e(this),this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._debouncedSaveOperations=Pv(async(i,s,n)=>{const{save:r,saveAs:o}=await nt(()=>import("./groupLayerUtils-CuWq_5sC.js"),__vite__mapDeps([237,238,113,114,32,115,116]),import.meta.url);switch(i){case sf.SAVE:return r(this,s);case sf.SAVE_AS:return o(this,n,s)}})}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([xi(()=>{let e=this.parent;for(;e&&"parent"in e&&e.parent;)e=e.parent;return e&&Y$e in e},e=>{const i="prevent-adding-tables";this.removeHandles(i),e&&(this.tables.removeAll(),this.addHandles(_g(()=>this.tables,"before-add",s=>{s.preventDefault(),zt.getLogger(this).errorOnce("tables","tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.")}),i))},Jl),xi(()=>this.visible,this._onVisibilityChange.bind(this),Hp)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf("portalItem")===Bi.USER}_writeLayers(e,i,s,n){const r=[];if(!e)return r;e.forEach(o=>{const l=iOe(o,n.webmap?n.webmap.getLayerJSONFromResourceInfo(o):null,n);l!=null&&l.layerType&&r.push(l)}),i.layers=r}set portalItem(e){this._set("portalItem",e)}readPortalItem(e,i,s){const{itemId:n,layerType:r}=i;if(r==="GroupLayer"&&n)return new TS({id:n,portal:s==null?void 0:s.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}set visibilityMode(e){const i=this._get("visibilityMode")!==e;this._set("visibilityMode",e),i&&this._enforceVisibility(e,this.visible)}async beforeSave(){return X$e(this)}load(e){const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Group Layer","Scene Service"],layerModuleTypeMap:G$e},e).catch(s=>{if(Nh(s),this.sourceIsPortalItem)throw s});return this.addResolvingPromise(i),Promise.resolve(this)}async loadAll(){return j7e(this,e=>{e(this.layers,this.tables)})}async save(e){return this._debouncedSaveOperations(sf.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(sf.SAVE_AS,i,e)}layerAdded(e){e.visible&&this.visibilityMode==="exclusive"?this._turnOffOtherLayers(e):this.visibilityMode==="inherited"&&(e.visible=this.visible),this.hasHandles(e.uid)?console.error(`Layer read to Grouplayer: uid=${e.uid}`):this.addHandles(xi(()=>e.visible,i=>this._onChildVisibilityChange(e,i),Hp),e.uid)}layerRemoved(e){this.removeHandles(e.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach(i=>{i!==e&&(i.visible=!1)})}_enforceVisibility(e,i){if(!wl(this).initialized)return;const s=this.layers;let n=s.find(r=>r.visible);switch(e){case"exclusive":s.length&&!n&&(n=s.at(0),n.visible=!0),this._turnOffOtherLayers(n);break;case"inherited":s.forEach(r=>{r.visible=i})}}_onVisibilityChange(e){this.visibilityMode==="inherited"&&this.layers.forEach(i=>{i.visible=e})}_onChildVisibilityChange(e,i){switch(this.visibilityMode){case"exclusive":i?this._turnOffOtherLayers(e):this._isAnyLayerVisible()||(e.visible=!0);break;case"inherited":e.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some(e=>e.visible)}};I([N({readOnly:!0,dependsOn:[]})],la.prototype,"allLayers",void 0),I([N({readOnly:!0})],la.prototype,"allTables",void 0),I([N({json:{read:!0,write:!0}})],la.prototype,"blendMode",void 0),I([N()],la.prototype,"fullExtent",void 0),I([N({readOnly:!0})],la.prototype,"sourceIsPortalItem",null),I([N({json:{read:!1,write:{ignoreOrigin:!0}}})],la.prototype,"layers",void 0),I([Ft("layers")],la.prototype,"_writeLayers",null),I([N({type:["GroupLayer"]})],la.prototype,"operationalLayerType",void 0),I([N({json:{origins:{"web-map":{read:!1,write:{overridePolicy(t,e,i){return{enabled:(t==null?void 0:t.type)==="Group Layer"&&(i==null?void 0:i.initiator)!==this}}}},"web-scene":{read:!1,write:!1}}}})],la.prototype,"portalItem",null),I([At("web-map","portalItem",["itemId"])],la.prototype,"readPortalItem",null),I([Ft("web-map","portalItem",{itemId:{type:String}})],la.prototype,"writePortalItem",null),I([N()],la.prototype,"spatialReference",void 0),I([N({json:{read:!1},readOnly:!0,value:"group"})],la.prototype,"type",void 0),I([N({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{type:["independent","exclusive"],write:(t,e,i)=>{t!=="inherited"&&(e[i]=t)}}}}})],la.prototype,"visibilityMode",null),la=I([De("esri.layers.GroupLayer")],la);const ode=la,sOe=Object.freeze(Object.defineProperty({__proto__:null,default:ode},Symbol.toStringTag,{value:"Module"})),Hs=t=>{let e=class extends t{clone(){var c;const i=wl(this);bPe(i,"unable to clone instance of non-accessor class");const s=i.metadata,n=i.store,r={},o=new Map;for(const f in s){const y=s[f],_=n==null?void 0:n.originOf(f),x=y.clonable;if(y.readOnly||x===!1||_!==Bi.USER&&_!==Bi.DEFAULTS&&_!==Bi.WEB_MAP&&_!==Bi.WEB_SCENE)continue;const S=this[f];let P=null;P=typeof x=="function"?x(S):x==="reference"?S:b$(S),S!=null&&P==null||(_===Bi.DEFAULTS?o.set(f,P):r[f]=P)}const l=new(Object.getPrototypeOf(this)).constructor(r);if(o.size){const f=(c=wl(l))==null?void 0:c.store;if(f)for(const[y,_]of o)f.set(y,_,Bi.DEFAULTS)}return l}};return e=I([De("esri.core.Clonable")],e),e};let sK=class extends Hs(Ei){};sK=I([De("esri.core.Clonable")],sK);let LT=class extends wt{constructor(e){super(e),this.type=null}};I([N({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],LT.prototype,"type",void 0),LT=I([De("esri.popup.content.Content")],LT);const lm=LT;var jO;let O1=jO=class extends lm{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new jO({description:this.description,displayType:this.displayType,title:this.title})}};I([N({type:String,json:{write:!0}})],O1.prototype,"description",void 0),I([N({type:["auto","preview","list"],json:{write:!0}})],O1.prototype,"displayType",void 0),I([N({type:String,json:{write:!0}})],O1.prototype,"title",void 0),I([N({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],O1.prototype,"type",void 0),O1=jO=I([De("esri.popup.content.AttachmentsContent")],O1);const D2=O1;var BO;let R1=BO=class extends lm{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new BO({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Ue(this.outFields):null})}};I([N()],R1.prototype,"creator",void 0),I([N()],R1.prototype,"destroyer",void 0),I([N()],R1.prototype,"outFields",void 0),I([N({type:["custom"],readOnly:!0})],R1.prototype,"type",void 0),R1=BO=I([De("esri.popup.content.CustomContent")],R1);const nOe=R1;var HO;let X_=HO=class extends wt{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new HO({title:this.title,expression:this.expression})}};I([N({type:String,json:{write:!0}})],X_.prototype,"title",void 0),I([N({type:String,json:{write:!0}})],X_.prototype,"expression",void 0),I([N({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],X_.prototype,"returnType",void 0),X_=HO=I([De("esri.popup.ElementExpressionInfo")],X_);const rOe=X_;var UO;let _3=UO=class extends lm{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new UO({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};I([N({type:rOe,json:{write:!0}})],_3.prototype,"expressionInfo",void 0),I([N({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],_3.prototype,"type",void 0),_3=UO=I([De("esri.popup.content.ExpressionContent")],_3);const WM=_3;function ni(t,e={}){const i=t instanceof ps?t:new ps(t,e),{alwaysWriteDefaults:s,default:n,ignoreUnknown:r=!0,name:o,nonNullable:l,readOnly:c=!1}=e;return N({type:r?i.apiValues:String,json:{type:i.jsonValues,default:n,name:o,read:!c&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:s}},nonNullable:l,readOnly:c})}let W_=class extends Hs(wt){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};I([ni(kMe)],W_.prototype,"dateFormat",void 0),I([N({type:Boolean,json:{write:!0}})],W_.prototype,"digitSeparator",void 0),I([N({type:wn,json:{write:!0}})],W_.prototype,"places",void 0),W_=I([De("esri.popup.support.FieldInfoFormat")],W_);const FT=W_;var YO;let gh=YO=class extends wt{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new YO({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};I([N({type:String,json:{write:!0}})],gh.prototype,"fieldName",void 0),I([N({type:FT,json:{write:!0}})],gh.prototype,"format",void 0),I([N({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],gh.prototype,"isEditable",void 0),I([N({type:String,json:{write:!0}})],gh.prototype,"label",void 0),I([ni(new ps({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],gh.prototype,"stringFieldOption",void 0),I([N({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],gh.prototype,"statisticType",void 0),I([N({type:String,json:{write:!0}})],gh.prototype,"tooltip",void 0),I([N({type:Boolean,json:{write:!0}})],gh.prototype,"visible",void 0),gh=YO=I([De("esri.popup.FieldInfo")],gh);const zV=gh;var XO;let tp=XO=class extends lm{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new XO(Ue({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};I([N({type:Object,json:{write:!0}})],tp.prototype,"attributes",void 0),I([N({type:String,json:{write:!0}})],tp.prototype,"description",void 0),I([N({type:[zV]})],tp.prototype,"fieldInfos",void 0),I([Ft("fieldInfos")],tp.prototype,"writeFieldInfos",null),I([N({type:String,json:{write:!0}})],tp.prototype,"title",void 0),I([N({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],tp.prototype,"type",void 0),tp=XO=I([De("esri.popup.content.FieldsContent")],tp);const k2=tp;let L1=class extends wt{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};I([N({type:String,json:{write:!0}})],L1.prototype,"altText",void 0),I([N({type:String,json:{write:!0}})],L1.prototype,"caption",void 0),I([N({type:String,json:{write:!0}})],L1.prototype,"title",void 0),I([N({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],L1.prototype,"type",void 0),L1=I([De("esri.popup.content.mixins.MediaInfo")],L1);const qV=L1;function r4(t){return Hc(Eq(t),0,255)}function o4(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}function a4(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let zT=class po{static blendColors(e,i,s,n=new po){return n.r=Math.round(e.r+(i.r-e.r)*s),n.g=Math.round(e.g+(i.g-e.g)*s),n.b=Math.round(e.b+(i.b-e.b)*s),n.a=e.a+(i.a-e.a)*s,n._sanitize()}static fromRgb(e,i){const s=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(s){const n=s[2].split(/\s*,\s*/),r=s[1];if(r==="rgb"&&n.length===3||r==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const l=n.map(c=>2.56*parseFloat(c));return n.length===4&&(l[3]=parseFloat(n[3])),po.fromArray(l,i)}return po.fromArray(n.map(l=>parseFloat(l)),i)}if(r==="hsl"&&n.length===3||r==="hsla"&&n.length===4)return po.fromArray($ce(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(e,i=new po){if(e[0]!=="#"||isNaN(+`0x${e.slice(1)}`))return null;switch(e.length){case 4:case 5:{const s=parseInt(e.slice(1,2),16),n=parseInt(e.slice(2,3),16),r=parseInt(e.slice(3,4),16),o=e.length===5?15:parseInt(e.slice(4),16);return po.fromArray([s+16*s,n+16*n,r+16*r,(o+16*o)/255],i)}case 7:case 9:{const s=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16),o=e.length===7?255:parseInt(e.slice(7),16);return po.fromArray([s,n,r,o/255],i)}default:return null}}static fromArray(e,i=new po){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const s=Nce(e)?wV(e):null;return s&&po.fromArray(s,i)||po.fromRgb(e,i)||po.fromHex(e,i)}static fromJSON(e){return e!=null?new po([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?po.fromString(e,this):Array.isArray(e)?po.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof po||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,s=(e==null?void 0:e.digits)??6,n=s===3||s===4,r=s===4||s===8,o=`#${a4(this.r,n)}${a4(this.g,n)}${a4(this.b,n)}${r?a4(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=po.AlphaMode.ALWAYS){const i=r4(this.r),s=r4(this.g),n=r4(this.b);return e===po.AlphaMode.ALWAYS||this.a!==1?[i,s,n,r4(255*this.a)]:[i,s,n]}clone(){return new po(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(o4(this.r,0,255)),this.g=Math.round(o4(this.g,0,255)),this.b=Math.round(o4(this.b,0,255)),this.a=o4(this.a,0,1),this}_set(e,i,s,n){this.r=e,this.g=i,this.b=s,this.a=n}};zT.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(zT||(zT={}));const fi=zT;var WO;let F1=WO=class extends Ei{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new WO({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};I([N()],F1.prototype,"color",void 0),I([N()],F1.prototype,"fieldName",void 0),I([N()],F1.prototype,"tooltip",void 0),I([N()],F1.prototype,"value",void 0),F1=WO=I([De("esri.popup.content.support.ChartMediaInfoValueSeries")],F1);const oOe=F1;var ZO;let c0=ZO=class extends wt{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new ZO({colors:Ue(this.colors),fields:Ue(this.fields),normalizeField:this.normalizeField,series:Ue(this.series),tooltipField:this.tooltipField})}};I([N({type:[fi],json:{type:[[wn]],write:!0}})],c0.prototype,"colors",void 0),I([N({type:[String],json:{write:!0}})],c0.prototype,"fields",void 0),I([N({type:String,json:{write:!0}})],c0.prototype,"normalizeField",void 0),I([N({type:[oOe],json:{read:!1}})],c0.prototype,"series",void 0),I([N({type:String,json:{write:!0}})],c0.prototype,"tooltipField",void 0),c0=ZO=I([De("esri.popup.content.support.ChartMediaInfoValue")],c0);const aOe=c0;let b3=class extends qV{constructor(e){super(e),this.type=null,this.value=void 0}};I([N({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],b3.prototype,"type",void 0),I([N({type:aOe,json:{write:!0}})],b3.prototype,"value",void 0),b3=I([De("esri.popup.content.mixins.ChartMediaInfo")],b3);const ZM=b3,KM=wa()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var KO;let qT=KO=class extends ZM{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new KO({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:KM.write}})],qT.prototype,"type",void 0),qT=KO=I([De("esri.popup.content.BarChartMediaInfo")],qT);const ade=qT;var JO;let VT=JO=class extends ZM{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new JO({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:KM.write}})],VT.prototype,"type",void 0),VT=JO=I([De("esri.popup.content.ColumnChartMediaInfo")],VT);const lde=VT;var QO;let x3=QO=class extends wt{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new QO({linkURL:this.linkURL,sourceURL:this.sourceURL})}};I([N({type:String,json:{write:!0}})],x3.prototype,"linkURL",void 0),I([N({type:String,json:{write:!0}})],x3.prototype,"sourceURL",void 0),x3=QO=I([De("esri.popup.content.support.ImageMediaInfoValue")],x3);const lOe=x3;var eR;let Z_=eR=class extends qV{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new eR({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:Number,json:{write:!0}})],Z_.prototype,"refreshInterval",void 0),I([N({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Z_.prototype,"type",void 0),I([N({type:lOe,json:{write:!0}})],Z_.prototype,"value",void 0),Z_=eR=I([De("esri.popup.content.ImageMediaInfo")],Z_);const ude=Z_;var tR;let GT=tR=class extends ZM{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new tR({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:KM.write}})],GT.prototype,"type",void 0),GT=tR=I([De("esri.popup.content.LineChartMediaInfo")],GT);const cde=GT;var iR;let jT=iR=class extends ZM{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new iR({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};I([N({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:KM.write}})],jT.prototype,"type",void 0),jT=iR=I([De("esri.popup.content.PieChartMediaInfo")],jT);const hde=jT,sR={base:qV,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":ade,"column-chart":lde,"line-chart":cde,"pie-chart":hde,image:ude}};var nR;let yh=nR=class extends lm{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?ude.fromJSON(e):e.type==="barchart"?ade.fromJSON(e):e.type==="columnchart"?lde.fromJSON(e):e.type==="linechart"?cde.fromJSON(e):e.type==="piechart"?hde.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new nR(Ue({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};I([N()],yh.prototype,"activeMediaInfoIndex",void 0),I([N({type:Object,json:{write:!0}})],yh.prototype,"attributes",void 0),I([N({type:String,json:{write:!0}})],yh.prototype,"description",void 0),I([N({types:[sR]})],yh.prototype,"mediaInfos",void 0),I([At("mediaInfos")],yh.prototype,"readMediaInfos",null),I([Ft("mediaInfos")],yh.prototype,"writeMediaInfos",null),I([N({type:String,json:{write:!0}})],yh.prototype,"title",void 0),I([N({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],yh.prototype,"type",void 0),yh=nR=I([De("esri.popup.content.MediaContent")],yh);const fE=yh;var rR;let w3=rR=class extends wt{constructor(t){super(t),this.field=null,this.order=null}clone(){return new rR({field:this.field,order:this.order})}};I([N({type:String,json:{write:!0}})],w3.prototype,"field",void 0),I([N({type:["asc","desc"],json:{write:!0}})],w3.prototype,"order",void 0),w3=rR=I([De("esri.popup.support.RelatedRecordsInfoFieldOrder")],w3);const VV=w3;let Td=class extends Hs(lm){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};I([N({type:String,json:{write:!0}})],Td.prototype,"description",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Td.prototype,"displayCount",void 0),I([N({type:["list"],json:{write:!0}})],Td.prototype,"displayType",void 0),I([N({type:[VV],json:{write:!0}})],Td.prototype,"orderByFields",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Td.prototype,"relationshipId",void 0),I([N({type:String,json:{write:!0}})],Td.prototype,"title",void 0),I([N({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Td.prototype,"type",void 0),Td=I([De("esri.popup.content.RelationshipContent")],Td);const pE=Td;var oR;let S3=oR=class extends lm{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new oR({text:this.text})}};I([N({type:String,json:{write:!0}})],S3.prototype,"text",void 0),I([N({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],S3.prototype,"type",void 0),S3=oR=I([De("esri.popup.content.TextContent")],S3);const mE=S3;let Id=class extends Hs(wt){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};I([N({type:String,json:{write:!0}})],Id.prototype,"title",void 0),I([N({type:String,json:{write:!0}})],Id.prototype,"description",void 0),I([N({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Id.prototype,"type",void 0),I([N({type:Boolean,json:{read:!1}})],Id.prototype,"open",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Id.prototype,"associatedNetworkSourceId",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Id.prototype,"associatedAssetGroup",void 0),I([N({type:Number,json:{type:wn,write:!0}})],Id.prototype,"associatedAssetType",void 0),Id=I([De("esri.popup.support.UtilityNetworkAssociationType")],Id);const uOe=Id;let z1=class extends Hs(lm){constructor(e){super(e),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};I([N({type:String,json:{write:!0}})],z1.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],z1.prototype,"title",void 0),I([N({type:[uOe],json:{write:!0}})],z1.prototype,"associationTypes",void 0),I([ni({utilityNetworkAssociations:"utility-network-associations"})],z1.prototype,"type",void 0),z1=I([De("esri.popup.content.UtilityNetworkAssociationsContent")],z1);const GV=z1,cOe={base:null,key:"type",typeMap:{attachment:D2,media:fE,text:mE,expression:WM,field:k2,relationship:pE,utilityNetworkAssociations:GV}},hOe={base:null,key:"type",typeMap:{attachment:D2,media:fE,text:mE,expression:WM,field:k2,relationship:pE}};var aR;let q1=aR=class extends wt{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new aR({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};I([N({type:String,json:{write:!0}})],q1.prototype,"name",void 0),I([N({type:String,json:{write:!0}})],q1.prototype,"title",void 0),I([N({type:String,json:{write:!0}})],q1.prototype,"expression",void 0),I([N({type:["string","number"],json:{write:!0}})],q1.prototype,"returnType",void 0),q1=aR=I([De("esri.popup.ExpressionInfo")],q1);const dOe=q1;var lR;let E3=lR=class extends wt{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new lR({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};I([N({type:Boolean,json:{write:!0}})],E3.prototype,"returnTopmostRaster",void 0),I([N({type:Boolean,json:{write:!0}})],E3.prototype,"showNoDataRecords",void 0),E3=lR=I([De("esri.popup.LayerOptions")],E3);const fOe=E3;var uR;let C3=uR=class extends wt{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new uR({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Ue(this.orderByFields):null})}};I([N({type:Boolean,json:{write:!0}})],C3.prototype,"showRelatedRecords",void 0),I([N({type:[VV],json:{write:!0}})],C3.prototype,"orderByFields",void 0),C3=uR=I([De("esri.popup.RelatedRecordsInfo")],C3);const nK=C3;var cR;let fc=cR=class extends PC(Ei){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new cR({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};I([N()],fc.prototype,"active",void 0),I([N()],fc.prototype,"className",void 0),I([N()],fc.prototype,"disabled",void 0),I([N()],fc.prototype,"icon",void 0),I([N()],fc.prototype,"id",void 0),I([N()],fc.prototype,"indicator",void 0),I([N()],fc.prototype,"title",void 0),I([N()],fc.prototype,"type",void 0),I([N()],fc.prototype,"visible",void 0),fc=cR=I([De("esri.support.actions.ActionBase")],fc);const kC=fc;var hR;let BT=hR=class extends kC{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new hR({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};I([N()],BT.prototype,"image",void 0),BT=hR=I([De("esri.support.actions.ActionButton")],BT);const dde=BT;var dR;let P3=dR=class extends kC{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new dR({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};I([N()],P3.prototype,"image",void 0),I([N()],P3.prototype,"value",void 0),P3=dR=I([De("esri.support.actions.ActionToggle")],P3);const fde=P3,qw="relationships/",rK="expression/",pOe=ui.ofType({key:"type",defaultKeyValue:"button",base:kC,typeMap:{button:dde,toggle:fde}}),mOe={base:lm,key:"type",typeMap:{media:fE,custom:nOe,text:mE,attachments:D2,fields:k2,expression:WM,relationship:pE,utilityNetworkAssociations:GV}},pde=new Set(["attachments","fields","media","text","expression","relationship"]),gOe=new Set([...pde,"utility-network-associations"]);let Kr=class extends Hs(wt){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Bc(mOe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Cv(e)?e:(zt.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:s}=i;return Array.isArray(s)&&s.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,s):this._readPopupInfo(i)}writeWebSceneContent(e,i,s,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,s,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,s,n){const{content:r}=this,o=Array.isArray(r)?r:null;if(e){const l=o?o.filter(f=>f.type==="fields"):[],c=l.length&&l.every(f=>{var y;return(y=f.fieldInfos)==null?void 0:y.length});i.fieldInfos=e.filter(Boolean).map(f=>{const y=f.toJSON(n);return c&&(y.visible=!1),y})}if(o)for(const l of o)l.type==="fields"&&this._writeFieldsContent(l,i)}writeLayerOptions(e,i,s,n){i[s]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...s,...this._getContentExpressionInfos(this.content,s)]),lv(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,s){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(n=>(s==null?void 0:s.origin)==="web-scene"?pde.has(n.type):gOe.has(n.type)).map(n=>n==null?void 0:n.toJSON(s)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const s=Ue(e.fieldInfos);Array.isArray(i.fieldInfos)?s.forEach(n=>{const r=i.fieldInfos.find(o=>{var l,c;return((l=o.fieldName)==null?void 0:l.toLowerCase())===((c=n.fieldName)==null?void 0:c.toLowerCase())});r?r.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=s}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var r,o;const s=((r=e.orderByFields)==null?void 0:r.map(l=>this._toFieldOrderJSON(l,e.relationshipId)))||[],n=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...s];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const s=Ue(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...s]:i.mediaInfos=s}_readPopupInfoElements(e,i,s){const n={description:!1,mediaInfos:!1};return s.map(r=>r.type==="media"?(r.mediaInfos||!i||n.mediaInfos||(r.mediaInfos=i,n.mediaInfos=!0),fE.fromJSON(r)):r.type==="text"?(r.text||!e||n.description||(r.text=e,n.description=!0),mE.fromJSON(r)):r.type==="attachments"?D2.fromJSON(r):r.type==="fields"?k2.fromJSON(r):r.type==="expression"?WM.fromJSON(r):r.type==="relationship"?pE.fromJSON(r):r.type==="utilityNetworkAssociations"?GV.fromJSON(r):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:s}=e;if(!(i!=null&&i.startsWith(qw)))return null;const n=i.replace(qw,"").split("/");if(n.length!==2)return null;const r=parseInt(n[0],10),o=n[1];return typeof r=="number"&&o?pE.fromJSON({relationshipId:r,orderByFields:[{field:o,order:s}]}):null}_toFieldOrderJSON(e,i){const{order:s,field:n}=e;return{field:`${qw}${i}/${n}`,order:s}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:s,relatedRecordsInfo:n={showRelatedRecords:!1}}){const r=[];e?r.push(new mE({text:e})):r.push(new k2),Array.isArray(i)&&i.length&&r.push(fE.fromJSON({mediaInfos:i})),s&&r.push(D2.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:l}=n;return o&&(l!=null&&l.length)&&l.forEach(c=>{const f=this._toRelationshipContent(c);f&&r.push(f)}),r.length?r:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const s=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...s.reduce((n,r)=>[...n,...this._getMediaInfoFields(r)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:s,value:n}=e,r=n||{},{fields:o,normalizeField:l,tooltipField:c,sourceURL:f,linkURL:y}=r,_=[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(f),...this._extractFieldNames(y),...o??[]];return l&&_.push(l),c&&_.push(c),_}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((s,n)=>[...s,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,s)=>[...i,...this._getContentElementFields(s)],[]):[]}async _collectExpressionInfoFields(e,i,s){s&&await Promise.all(s.map(n=>Ja(e,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:s})=>!(s!==void 0&&!s||!i||i.startsWith(qw)||i.startsWith(rK))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,s)=>[...i,...this._getActionFields(s)],[]):[]}_getActionFields(e){const{className:i,title:s,type:n}=e,r=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(r)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Ahe(e).filter(i=>!(i.indexOf(qw)===0||i.indexOf(rK)===0))}};I([N({type:pOe})],Kr.prototype,"actions",void 0),I([N()],Kr.prototype,"content",void 0),I([Sn("content")],Kr.prototype,"castContent",null),I([At("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Kr.prototype,"readContent",null),I([Ft("web-scene","content",{popupElements:{type:ui.ofType(hOe)},showAttachments:{type:Boolean},mediaInfos:{type:ui.ofType(sR)},description:{type:String},relatedRecordsInfo:{type:nK}})],Kr.prototype,"writeWebSceneContent",null),I([Ft("content",{popupElements:{type:ui.ofType(cOe)},showAttachments:{type:Boolean},mediaInfos:{type:ui.ofType(sR)},description:{type:String},relatedRecordsInfo:{type:nK}})],Kr.prototype,"writeWebMapContent",null),I([N({type:[dOe],json:{write:!0}})],Kr.prototype,"expressionInfos",void 0),I([N({type:[zV]})],Kr.prototype,"fieldInfos",void 0),I([Ft("fieldInfos")],Kr.prototype,"writeFieldInfos",null),I([N({type:fOe})],Kr.prototype,"layerOptions",void 0),I([Ft("layerOptions")],Kr.prototype,"writeLayerOptions",null),I([N({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Kr.prototype,"lastEditInfoEnabled",void 0),I([N()],Kr.prototype,"outFields",void 0),I([N()],Kr.prototype,"overwriteActions",void 0),I([N()],Kr.prototype,"returnGeometry",void 0),I([N({json:{type:String}})],Kr.prototype,"title",void 0),I([Ft("title")],Kr.prototype,"writeTitle",null),Kr=I([De("esri.PopupTemplate")],Kr);const NC=Kr,oK=new ps({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let yOe=0,K_=class extends wt{constructor(e){super(e),this.id="sym"+yOe++,this.type=null,this.color=new fi([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};I([N({type:oK.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:oK.write}}})],K_.prototype,"type",void 0),I([N({type:fi,json:{write:{allowNull:!0}}})],K_.prototype,"color",void 0),I([At("color")],K_.prototype,"readColor",null),K_=I([De("esri.symbols.Symbol")],K_);const Ea=K_;var fR;let h0=fR=class extends Ea{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const s=this.data.primitiveOverrides;if(s){const n=s.map(r=>{const o=r.valueExpressionInfo;return o?Ja(t,e,o.expression):null});await Promise.all(n)}}}clone(){return new fR({data:Ue(this.data)})}hash(){return moe(JSON.stringify(this.data)).toString()}};I([N({json:{write:!1}})],h0.prototype,"color",void 0),I([N({json:{write:!0}})],h0.prototype,"data",void 0),I([At("data",["symbol"])],h0.prototype,"readData",null),I([Ft("data",{})],h0.prototype,"writeData",null),I([ni({CIMSymbolReference:"cim"},{readOnly:!0})],h0.prototype,"type",void 0),h0=fR=I([De("esri.symbols.CIMSymbol")],h0);const Fg=h0;let J_=class extends wt{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,s){e||(i[s]=e)}};I([N({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],J_.prototype,"enabled",void 0),I([Ft("enabled")],J_.prototype,"writeEnabled",null),I([N({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],J_.prototype,"type",void 0),J_=I([De("esri.symbols.Symbol3DLayer")],J_);const Cf=J_;function vOe(t,e){const i=e.transparency!=null?e6(e.transparency):1,s=e.color;return s&&Array.isArray(s)?new fi([s[0]||0,s[1]||0,s[2]||0,i]):null}function _Oe(t,e){e.color=t.toJSON().slice(0,3);const i=kV(t.a);i!==0&&(e.transparency=i)}const zg={type:fi,json:{type:[wn],default:null,read:{source:["color","transparency"],reader:vOe},write:{target:{color:{type:[wn]},transparency:{type:wn}},writer:_Oe}}},mf={type:Number,cast:fs,json:{write:!0}};let V1=class extends wt{constructor(e){super(e),this.color=new fi([0,0,0,1]),this.extensionLength=0,this.size=Uc(1)}clone(){}cloneProperties(){return{color:Ue(this.color),size:this.size,extensionLength:this.extensionLength}}};I([N({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],V1.prototype,"type",void 0),I([N(zg)],V1.prototype,"color",void 0),I([N({...mf,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],V1.prototype,"extensionLength",void 0),I([N(mf)],V1.prototype,"size",void 0),V1=I([De("esri.symbols.edges.Edges3D")],V1);const jV=V1;var pR;let HT=pR=class extends jV{constructor(t){super(t),this.type="sketch"}clone(){return new pR(this.cloneProperties())}};I([ni({sketch:"sketch"},{readOnly:!0})],HT.prototype,"type",void 0),HT=pR=I([De("esri.symbols.edges.SketchEdges3D")],HT);const bOe=HT;var mR;let UT=mR=class extends jV{constructor(t){super(t),this.type="solid"}clone(){return new mR(this.cloneProperties())}};I([ni({solid:"solid"},{readOnly:!0})],UT.prototype,"type",void 0),UT=mR=I([De("esri.symbols.edges.SolidEdges3D")],UT);const mde=UT,gde={types:{key:"type",base:jV,typeMap:{solid:mde,sketch:bOe}},json:{write:!0}};var gR;let Pu=gR=class extends wt{constructor(t){super(t),this.color=null,this.emissiveFactor=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?eu(this.emissiveFactor):null};return new gR(t)}};I([N(zg)],Pu.prototype,"color",void 0),I([N({type:[Number],json:{write:!1}})],Pu.prototype,"emissiveFactor",void 0),Pu=gR=I([De("esri.symbols.support.Symbol3DMaterial")],Pu);var yR;let d0=yR=class extends Cf{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var t,e;return new yR({edges:(t=this.edges)==null?void 0:t.clone(),enabled:this.enabled,material:(e=this.material)==null?void 0:e.clone(),castShadows:this.castShadows,size:this.size})}};I([ni({Extrude:"extrude"},{readOnly:!0})],d0.prototype,"type",void 0),I([N({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],d0.prototype,"size",void 0),I([N({type:Pu,json:{write:!0}})],d0.prototype,"material",void 0),I([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],d0.prototype,"castShadows",void 0),I([N(gde)],d0.prototype,"edges",void 0),d0=yR=I([De("esri.symbols.ExtrudeSymbol3DLayer")],d0);const yde=d0;let T3=class extends Ea{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};I([ni({esriSLS:"simple-line"},{readOnly:!0})],T3.prototype,"type",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],T3.prototype,"width",void 0),T3=I([De("esri.symbols.LineSymbol")],T3);const xOe=T3,wOe=["begin","end","begin-end"],vde=["arrow","circle","square","diamond","cross","x"];var vR;let Md=vR=class extends wt{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,s){e[i]=(s==null?void 0:s.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,s){(s==null?void 0:s.origin)==="web-map"||(e[i]=t)}clone(){return new vR({color:Ue(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};I([N({type:["begin","end","begin-end"],json:{write:!0}})],Md.prototype,"placement",void 0),I([ni({"line-marker":"line-marker"},{readOnly:!0}),N({json:{origins:{"web-map":{write:!1}}}})],Md.prototype,"type",void 0),I([N({type:vde})],Md.prototype,"style",void 0),I([Ft("style")],Md.prototype,"writeStyle",null),I([N({type:fi,value:null,json:{write:{allowNull:!0}}})],Md.prototype,"color",null),I([At("color")],Md.prototype,"readColor",null),I([Ft("color")],Md.prototype,"writeColor",null),Md=vR=I([De("esri.symbols.LineSymbolMarker")],Md);const SOe=Md;var _R;const Ek=new ps({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ip=_R=class extends xOe{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,s,n,r){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=fs(i)),s!=null&&(o.cap=s),n!=null&&(o.join=n),r!=null&&(o.miterLimit=fs(r)),o}clone(){var t;return new _R({color:Ue(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};I([ni({esriSLS:"simple-line"},{readOnly:!0})],ip.prototype,"type",void 0),I([N({type:Ek.apiValues,json:{read:Ek.read,write:Ek.write}})],ip.prototype,"style",void 0),I([N({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],ip.prototype,"cap",void 0),I([N({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],ip.prototype,"join",void 0),I([N({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":SOe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ip.prototype,"marker",void 0),I([N({type:Number,json:{read:!1,write:!1}})],ip.prototype,"miterLimit",void 0),ip=_R=I([De("esri.symbols.SimpleLineSymbol")],ip);const Ml=ip,Lft=Object.freeze(Object.defineProperty({__proto__:null,default:Ml},Symbol.toStringTag,{value:"Module"}));let I3=class extends Ea{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};I([N({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ml}},json:{default:null,write:!0}})],I3.prototype,"outline",void 0),I([N({type:["simple-fill","picture-fill"],readOnly:!0})],I3.prototype,"type",void 0),I3=I([De("esri.symbols.FillSymbol")],I3);const _de=I3;let YT=class extends wt{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};I([N({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],YT.prototype,"type",void 0),YT=I([De("esri.symbols.patterns.LinePattern3D")],YT);const bde=YT,EOe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var bR;const COe=wa()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let M3=bR=class extends bde{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new bR(t)}};I([N({type:["style"]})],M3.prototype,"type",void 0),I([ni(COe),N({type:EOe})],M3.prototype,"style",void 0),M3=bR=I([De("esri.symbols.patterns.LineStylePattern3D")],M3);const BV=M3;let XT=class extends wt{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};I([N({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],XT.prototype,"type",void 0),XT=I([De("esri.symbols.patterns.Pattern3D")],XT);const xde=XT,POe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var xR;let A3=xR=class extends xde{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new xR({style:this.style})}};I([N({type:["style"]})],A3.prototype,"type",void 0),I([N({type:POe,json:{read:!0,write:!0}})],A3.prototype,"style",void 0),A3=xR=I([De("esri.symbols.patterns.StylePattern3D")],A3);const wde=A3,TOe={types:{key:"type",base:xde,typeMap:{style:wde}},json:{write:!0}},Sde={types:{key:"type",base:bde,typeMap:{style:BV}},json:{write:!0}},DS=new fi("white");new fi("black");const IOe=new fi([255,255,255,0]);function MOe(t){return t.r===0&&t.g===0&&t.b===0}var wR;let kS=wR=class extends Pu{constructor(t){super(t),this.colorMixMode=null}clone(){var e;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissiveFactor:this.emissiveFactor?eu(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new wR(t)}};I([ni({multiply:"multiply",replace:"replace",tint:"tint"})],kS.prototype,"colorMixMode",void 0),kS=wR=I([De("esri.symbols.support.Symbol3DFillMaterial")],kS);function AOe(t,e=!1){return t<=aoe?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function Vft(t){return(ooe(t)?t.length:t.byteLength/8)<=aoe?Array.from(t):new Float64Array(t)}function Gft(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function $C(t=$Oe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function HV(t,e,i,s,n,r,o=$C()){return o[0]=t,o[1]=e,o[2]=i,o[3]=s,o[4]=n,o[5]=r,o}function jft(t,e=$C()){return DOe(t,0,t.length/3,e)}function DOe(t,e,i,s=$C()){return Ede(s,SR),kOe(s,t,e,i),s}function Bft(t,e=AOe(24)){const[i,s,n,r,o,l]=t;return e[0]=i,e[1]=s,e[2]=n,e[3]=i,e[4]=s,e[5]=l,e[6]=i,e[7]=o,e[8]=n,e[9]=i,e[10]=o,e[11]=l,e[12]=r,e[13]=s,e[14]=n,e[15]=r,e[16]=s,e[17]=l,e[18]=r,e[19]=o,e[20]=n,e[21]=r,e[22]=o,e[23]=l,e}function Hft(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new cr(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Uft(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Yft(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function Xft(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function kOe(t,e,i=0,s=e.length/3){let n=t[0],r=t[1],o=t[2],l=t[3],c=t[4],f=t[5];for(let y=0;y<s;y++)n=Math.min(n,e[i+3*y]),r=Math.min(r,e[i+3*y+1]),o=Math.min(o,e[i+3*y+2]),l=Math.max(l,e[i+3*y]),c=Math.max(c,e[i+3*y+1]),f=Math.max(f,e[i+3*y+2]);t[0]=n,t[1]=r,t[2]=o,t[3]=l,t[4]=c,t[5]=f}function Wft(t,e,i){const s=e.length;let n=t[0],r=t[1],o=t[2],l=t[3],c=t[4],f=t[5];if(i)for(let y=0;y<s;y++){const _=e[y];n=Math.min(n,_[0]),r=Math.min(r,_[1]),o=Math.min(o,_[2]),l=Math.max(l,_[0]),c=Math.max(c,_[1]),f=Math.max(f,_[2])}else for(let y=0;y<s;y++){const _=e[y];n=Math.min(n,_[0]),r=Math.min(r,_[1]),l=Math.max(l,_[0]),c=Math.max(c,_[1])}t[0]=n,t[1]=r,t[2]=o,t[3]=l,t[4]=c,t[5]=f}function Zft(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function OC(t){return t[0]>=t[3]?0:t[3]-t[0]}function RC(t){return t[1]>=t[4]?0:t[4]-t[1]}function LC(t){return t[2]>=t[5]?0:t[5]-t[2]}function Kft(t){const e=OC(t),i=LC(t),s=RC(t);return Math.sqrt(e*e+i*i+s*s)}function Jft(t,e=[0,0,0]){return e[0]=t[0]+OC(t)/2,e[1]=t[1]+RC(t)/2,e[2]=t[2]+LC(t)/2,e}function Qft(t,e=[0,0,0]){return e[0]=OC(t),e[1]=RC(t),e[2]=LC(t),e}function ept(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function NOe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function tpt(t,e){return e==null||NOe(t,e)}function ipt(t,e,i,s,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+s,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+s,n}function spt(t,e,i=t){const s=t[0]+OC(t)/2,n=t[1]+RC(t)/2,r=t[2]+LC(t)/2;return i[0]=s+(t[0]-s)*e,i[1]=n+(t[1]-n)*e,i[2]=r+(t[2]-r)*e,i[3]=s+(t[3]-s)*e,i[4]=n+(t[4]-n)*e,i[5]=r+(t[5]-r)*e,i}function npt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function rpt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function opt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function Ede(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function apt(t){return t?Ede(t,SR):$C(SR)}function lpt(t,e){return e||(e=kv()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function upt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function cpt(t,e,i,s,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=s,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function aK(t){return t.length===6}function hpt(t){return OC(t)===0&&RC(t)===0&&LC(t)===0}function dpt(t,e,i){if(t==null||e==null)return t===e;if(!aK(t)||!aK(e))return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}const SR=[1/0,1/0,1/0,-1/0,-1/0,-1/0],$Oe=[0,0,0,0,0,0];$C();function fpt(t,{isPrimitive:e,width:i,depth:s,height:n}){const r=e?10:1;if(i==null&&n==null&&s==null)return[r*t[0],r*t[1],r*t[2]];const o=vl(i,s,n);let l;for(let c=0;c<3;c++){const f=o[c];if(f!=null){l=f/t[c];break}}for(let c=0;c<3;c++)o[c]==null&&(o[c]=t[c]*l);return o}const OOe=HV(-.5,-.5,-.5,.5,.5,.5),ROe=HV(-.5,-.5,0,.5,.5,1),LOe=HV(-.5,-.5,0,.5,.5,.5);function ppt(t){switch(t){case"sphere":case"cube":case"diamond":return OOe;case"cylinder":case"cone":case"inverted-cone":return ROe;case"tetrahedron":return LOe;default:return}}const UV=["butt","square","round"],FOe=[...UV,"none"],Cde=["miter","bevel","round"];var ER;let G1=ER=class extends wt{constructor(t){super(t),this.color=new fi([0,0,0,1]),this.size=Uc(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new ER(t)}};I([N(zg)],G1.prototype,"color",void 0),I([N(mf)],G1.prototype,"size",void 0),I([N(Sde)],G1.prototype,"pattern",void 0),I([N({type:UV,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],G1.prototype,"patternCap",void 0),G1=ER=I([De("esri.symbols.support.Symbol3DOutline")],G1);var WT;let sp=WT=class extends Cf{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new WT(t)}static fromSimpleFillSymbol(t){var s,n,r;const e=t.outline&&t.outline.style&&t.outline.style!=="solid"?new BV({style:t.outline.style}):null,i={size:((s=t.outline)==null?void 0:s.width)??0,color:(((n=t.outline)==null?void 0:n.color)??DS).clone(),pattern:e};return e&&((r=t.outline)!=null&&r.cap)&&(i.patternCap=t.outline.cap),new WT({material:new kS({color:(t.color??IOe).clone()}),pattern:t.style&&t.style!=="solid"?new wde({style:t.style}):null,outline:i})}};I([ni({Fill:"fill"},{readOnly:!0})],sp.prototype,"type",void 0),I([N({type:kS,json:{write:!0}})],sp.prototype,"material",void 0),I([N(TOe)],sp.prototype,"pattern",void 0),I([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],sp.prototype,"castShadows",void 0),I([N({type:G1,json:{write:!0}})],sp.prototype,"outline",void 0),I([N(gde)],sp.prototype,"edges",void 0),sp=WT=I([De("esri.symbols.FillSymbol3DLayer")],sp);const qg=sp,zOe=["none","underline","line-through"],qOe=["normal","italic","oblique"],VOe=["normal","lighter","bold","bolder"],Pde={type:Number,cast:t=>{const e=tx(t);return e===0?1:Hc(e,.1,4)},nonNullable:!0},GOe=["left","right","center"],jOe=["baseline","top","middle","bottom"],Tde={type:GOe,nonNullable:!0},Ide={type:jOe,nonNullable:!0},mpt=8;var CR;let np=CR=class extends wt{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return fs(t)}clone(){return new CR({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};I([N({type:zOe,json:{default:"none",write:!0}})],np.prototype,"decoration",void 0),I([N({type:String,json:{write:!0}})],np.prototype,"family",void 0),I([N({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],np.prototype,"size",void 0),I([Sn("size")],np.prototype,"castSize",null),I([N({type:qOe,json:{default:"normal",write:!0}})],np.prototype,"style",void 0),I([N({type:VOe,json:{default:"normal",write:!0}})],np.prototype,"weight",void 0),np=CR=I([De("esri.symbols.Font")],np);const JM=np;var PR;const BOe=wa()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let j1=PR=class extends wt{constructor(t){super(t)}readHref(t,e,i){return t?fx(t,i):e.dataURI}writeHref(t,e,i,s){t&&(Tv(t)?e.dataURI=t:(e.href=MC(t,s),Mu(e.href)&&(e.href=Fc(e.href))))}clone(){return new PR({href:this.href,primitive:this.primitive})}};I([N({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],j1.prototype,"href",void 0),I([At("href")],j1.prototype,"readHref",null),I([Ft("href",{href:{type:String},dataURI:{type:String}})],j1.prototype,"writeHref",null),I([ni(BOe)],j1.prototype,"primitive",void 0),j1=PR=I([De("esri.symbols.support.IconSymbol3DLayerResource")],j1);const gpt="circle";var TR;let Ab=TR=class extends Ei{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new TR({x:this.x,y:this.y})}};I([N({type:Number})],Ab.prototype,"x",void 0),I([N({type:Number})],Ab.prototype,"y",void 0),Ab=TR=I([De("esri.symbols.support.Symbol3DAnchorPosition2D")],Ab);var IR;let D3=IR=class extends wt{constructor(t){super(t),this.color=new fi([0,0,0,1]),this.size=Uc(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new IR(t)}};I([N(zg)],D3.prototype,"color",void 0),I([N(mf)],D3.prototype,"size",void 0),D3=IR=I([De("esri.symbols.support.Symbol3DIconOutline")],D3);var Q_;const Mde="esri.symbols.IconSymbol3DLayer";let vh=Q_=class extends Cf{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Q_({anchor:this.anchor,anchorPosition:Ue(this.anchorPosition),enabled:this.enabled,material:Ue(this.material),outline:Ue(this.outline),resource:Ue(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||DS,i=lK(t),s=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||DS).clone()}:null;return new Q_({size:t.size,angle:t.angle,resource:{primitive:UOe(t.style)},material:{color:e},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||MOe(t.color)?DS:t.color,i=lK(t);return new Q_({size:t.width<=t.height?t.height:t.width,angle:t.angle,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new Q_({resource:{href:vae({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};I([N({type:Pu,json:{write:!0}})],vh.prototype,"material",void 0),I([N({type:j1,json:{write:!0}})],vh.prototype,"resource",void 0),I([ni({Icon:"icon"},{readOnly:!0})],vh.prototype,"type",void 0),I([N(mf)],vh.prototype,"size",void 0),I([ni({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],vh.prototype,"anchor",void 0),I([N({type:Ab,json:{type:[Number],read:{reader:t=>new Ab({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],vh.prototype,"anchorPosition",void 0),I([N({type:D3,json:{write:!0}})],vh.prototype,"outline",void 0),I([N({type:Number,json:{write:!0,default:0}})],vh.prototype,"angle",void 0),vh=Q_=I([De(Mde)],vh);const Cy=vh;function lK(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,s=uK(t.xoffset),n=uK(t.yoffset);return(s||n)&&e&&i?{x:-s/e,y:n/i}:null}function uK(t){return isFinite(t)?t:0}const HOe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function UOe(t){return HOe[t]||(zt.getLogger(Mde).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let B1=class extends Hs(wt){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};I([N({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],B1.prototype,"type",void 0),I([N({type:wOe,json:{default:"begin-end",write:!0}})],B1.prototype,"placement",void 0),I([N({type:vde,json:{default:"arrow",write:!0}})],B1.prototype,"style",void 0),I([N({type:fi,json:{type:[wn],default:null,write:!0}})],B1.prototype,"color",void 0),B1=I([De("esri.symbols.LineStyleMarker3D")],B1);const MR=B1;var ZT;let Ad=ZT=class extends Cf{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Uc(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new ZT(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??Uc(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style?new BV({style:t.style}):null,material:new Pu({color:(t.color||DS).clone()}),marker:t.marker?new MR({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new ZT(e)}};I([N({type:Pu,json:{write:!0}})],Ad.prototype,"material",void 0),I([ni({Line:"line"},{readOnly:!0})],Ad.prototype,"type",void 0),I([N({type:Cde,json:{write:!0,default:"miter"}})],Ad.prototype,"join",void 0),I([N({type:UV,json:{write:!0,default:"butt"}})],Ad.prototype,"cap",void 0),I([N(mf)],Ad.prototype,"size",void 0),I([N(Sde)],Ad.prototype,"pattern",void 0),I([N({types:{key:"type",base:MR,typeMap:{style:MR}},json:{write:!0}})],Ad.prototype,"marker",void 0),Ad=ZT=I([De("esri.symbols.LineSymbol3DLayer")],Ad);const gx=Ad;var AR;const YOe=wa()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let k3=AR=class extends wt{clone(){return new AR({href:this.href,primitive:this.primitive})}};I([N({type:String,json:{read:IV,write:rv}})],k3.prototype,"href",void 0),I([ni(YOe)],k3.prototype,"primitive",void 0),k3=AR=I([De("esri.symbols.support.ObjectSymbol3DLayerResource")],k3);const vpt="sphere";var DR;let gy=DR=class extends Ei{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new DR({x:this.x,y:this.y,z:this.z})}};I([N({type:Number})],gy.prototype,"x",void 0),I([N({type:Number})],gy.prototype,"y",void 0),I([N({type:Number})],gy.prototype,"z",void 0),gy=DR=I([De("esri.symbols.support.Symbol3DAnchorPosition3D")],gy);var kR;let Ra=kR=class extends Cf{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,e,i;return new kR({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((e=this.material)==null?void 0:e.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};I([N({type:Pu,json:{write:!0}})],Ra.prototype,"material",void 0),I([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ra.prototype,"castShadows",void 0),I([N({type:k3,json:{write:!0}})],Ra.prototype,"resource",void 0),I([ni({Object:"object"},{readOnly:!0})],Ra.prototype,"type",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"width",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"height",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"depth",void 0),I([ni({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Ra.prototype,"anchor",void 0),I([N({type:gy,json:{type:[Number],read:{reader:t=>new gy({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ra.prototype,"anchorPosition",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"heading",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"tilt",void 0),I([N({type:Number,json:{write:!0}})],Ra.prototype,"roll",void 0),I([N({readOnly:!0})],Ra.prototype,"isPrimitive",null),Ra=kR=I([De("esri.symbols.ObjectSymbol3DLayer")],Ra);const YV=Ra;var NR;let ol=NR=class extends Cf{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new NR({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};I([N({type:Pu,json:{write:!0}})],ol.prototype,"material",void 0),I([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ol.prototype,"castShadows",void 0),I([ni({Path:"path"},{readOnly:!0})],ol.prototype,"type",void 0),I([N({type:["circle","quad"],json:{write:!0,default:"circle"}})],ol.prototype,"profile",void 0),I([N({type:Cde,json:{write:!0,default:"miter"}})],ol.prototype,"join",void 0),I([N({type:FOe,json:{write:!0,default:"butt"}})],ol.prototype,"cap",void 0),I([N({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ol.prototype,"width",void 0),I([At("width",["width","size","height"])],ol.prototype,"readWidth",null),I([N({type:Number,json:{write:!0}})],ol.prototype,"height",void 0),I([At("height",["height","size","width"])],ol.prototype,"readHeight",null),I([N({type:["center","bottom","top"],json:{write:!0,default:"center"}})],ol.prototype,"anchor",void 0),I([N({type:["heading","all"],json:{write:!0,default:"all"}})],ol.prototype,"profileRotation",void 0),ol=NR=I([De("esri.symbols.PathSymbol3DLayer")],ol);const XV=ol;var $R;let Db=$R=class extends wt{constructor(){super(...arguments),this.color=new fi([0,0,0,1]),this.size=0}clone(){const t={color:Ue(this.color),size:this.size};return new $R(t)}};I([N(zg)],Db.prototype,"color",void 0),I([N(mf)],Db.prototype,"size",void 0),Db=$R=I([De("esri.symbols.support.Symbol3DHalo")],Db);let NS=class extends Hs(wt){constructor(e){super(e),this.color=null}};I([N(zg)],NS.prototype,"color",void 0),NS=I([De("esri.symbols.support.Symbol3DTextBackground")],NS);var KT;let Nl=KT=class extends Cf{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,s){const n={...s,textSymbol3D:!0};e.font=t.write({},n),delete e.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new KT({enabled:this.enabled,font:this.font&&Ue(this.font),halo:this.halo&&Ue(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Ue(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new KT({font:t.font!=null?t.font.clone():new JM,halo:XOe(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Pu({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new NS({color:t.backgroundColor.clone()}):null})}};function XOe(t,e){return t&&e!=null&&e>0?new Db({color:Ue(t),size:e}):null}I([N({type:JM,json:{write:!0}})],Nl.prototype,"font",null),I([Ft("font")],Nl.prototype,"writeFont",null),I([N({type:Db,json:{write:!0}})],Nl.prototype,"halo",void 0),I([N({...Tde,json:{default:"center",write:!0}})],Nl.prototype,"horizontalAlignment",void 0),I([N({...Pde,json:{default:1,write:!0}})],Nl.prototype,"lineHeight",void 0),I([N({type:Pu,json:{write:!0}})],Nl.prototype,"material",void 0),I([N({type:NS,json:{write:!0}})],Nl.prototype,"background",void 0),I([N(mf)],Nl.prototype,"size",null),I([N({type:String,json:{write:!0}})],Nl.prototype,"text",void 0),I([ni({Text:"text"},{readOnly:!0})],Nl.prototype,"type",void 0),I([N({...Ide,json:{default:"baseline",write:!0}})],Nl.prototype,"verticalAlignment",void 0),Nl=KT=I([De("esri.symbols.TextSymbol3DLayer")],Nl);const yx=Nl;var OR;let f0=OR=class extends Cf{constructor(t){super(t),this.color=RR.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new OR({color:Ue(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};I([N({type:fi,nonNullable:!0,json:{type:[wn],write:(t,e,i)=>e[i]=t.toArray(fi.AlphaMode.UNLESS_OPAQUE),default:()=>RR.clone(),defaultEquals:t=>t.toCss(!0)===RR.toCss(!0)}})],f0.prototype,"color",void 0),I([ni({Water:"water"},{readOnly:!0})],f0.prototype,"type",void 0),I([N({type:["small","medium","large"],json:{write:!0,default:"medium"}})],f0.prototype,"waterbodySize",void 0),I([N({type:Number,json:{write:!0,default:null}})],f0.prototype,"waveDirection",void 0),I([N({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],f0.prototype,"waveStrength",void 0),f0=OR=I([De("esri.symbols.WaterSymbol3DLayer")],f0);const Ade=f0,RR=new fi([0,119,190]);var LR;let H1=LR=class extends Ei{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new LR({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};I([N({type:String})],H1.prototype,"name",void 0),I([N({type:String})],H1.prototype,"styleUrl",void 0),I([N({type:String})],H1.prototype,"styleName",void 0),I([N({type:Ou})],H1.prototype,"portal",void 0),H1=LR=I([De("esri.symbols.support.StyleOrigin")],H1);const FR=H1;var zR;let $S=zR=class extends Ei{constructor(){super(...arguments),this.url=""}clone(){return new zR({url:this.url})}};I([N({type:String})],$S.prototype,"url",void 0),$S=zR=I([De("esri.symbols.support.Thumbnail")],$S);const Dde={icon:Cy,object:YV,line:gx,path:XV,fill:qg,extrude:yde,text:yx,water:Ade},WOe=ui.ofType({base:Cf,key:"type",typeMap:Dde,errorContext:"symbol-layer"});let Dd=class extends Ea{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,s=i==null?void 0:i.type,n=s||ui;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&zt.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){XM(e,this._get("symbolLayers"))}readStyleOrigin(e,i,s){if(e.styleUrl&&e.name){const n=fx(e.styleUrl,s);return new FR({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new FR({portal:(s==null?void 0:s.portal)||Ou.getDefault(),styleName:e.styleName,name:e.name});s!=null&&s.messages&&s.messages.push(new Jh("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:s,definition:e}))}writeStyleOrigin(e,i,s,n){if(e.styleUrl&&e.name){let r=MC(e.styleUrl,n);Mu(r)&&(r=Fc(r)),i.styleOrigin={styleUrl:r,name:e.name}}else e.styleName&&e.name&&(e.portal&&(n!=null&&n.portal)&&!yae(e.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Jh("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Cf||e&&Dde[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};I([N({json:{read:!1,write:!1}})],Dd.prototype,"color",null),I([N({type:WOe,nonNullable:!0,json:{write:!0}}),Sn(rde)],Dd.prototype,"symbolLayers",null),I([N({type:FR})],Dd.prototype,"styleOrigin",void 0),I([At("styleOrigin")],Dd.prototype,"readStyleOrigin",null),I([Ft("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Dd.prototype,"writeStyleOrigin",null),I([N({type:$S,json:{read:!1}})],Dd.prototype,"thumbnail",void 0),I([N({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Dd.prototype,"type",void 0),Dd=I([De("esri.symbols.Symbol3D")],Dd);const Nv=Dd;let N3=class extends wt{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};I([N({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],N3.prototype,"type",void 0),I([N({readOnly:!0})],N3.prototype,"visible",void 0),N3=I([De("esri.symbols.callouts.Callout3D")],N3);const kde=N3;var qR;let JT=qR=class extends wt{constructor(t){super(t),this.color=new fi("white")}clone(){return new qR({color:Ue(this.color)})}};I([N(zg)],JT.prototype,"color",void 0),JT=qR=I([De("esri.symbols.callouts.LineCallout3DBorder")],JT);const ZOe=JT;var VR;let p0=VR=class extends kde{constructor(t){super(t),this.type="line",this.color=new fi([0,0,0,1]),this.size=Uc(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new VR({color:Ue(this.color),size:this.size,border:Ue(this.border)})}};I([ni({line:"line"})],p0.prototype,"type",void 0),I([N(zg)],p0.prototype,"color",void 0),I([N(mf)],p0.prototype,"size",void 0),I([N({type:ZOe,json:{write:!0}})],p0.prototype,"border",void 0),I([N({readOnly:!0})],p0.prototype,"visible",null),p0=VR=I([De("esri.symbols.callouts.LineCallout3D")],p0);const Nde=p0;function WV(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function $de(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!WV(t)}function wpt(t){return t.type==="point-3d"||t.type==="label-3d"}function Spt(t){return t.horizontalAlignment==="center"}const Ode={types:{key:"type",base:kde,typeMap:{line:Nde}},json:{write:!0}};var GR;let eb=GR=class extends wt{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new GR({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};I([N(mf)],eb.prototype,"screenLength",void 0),I([N({type:Number,nonNullable:!0,json:{write:!0,default:0}})],eb.prototype,"minWorldLength",void 0),I([N({type:Number,json:{write:!0}})],eb.prototype,"maxWorldLength",void 0),eb=GR=I([De("esri.symbols.support.Symbol3DVerticalOffset")],eb);const ZV=eb;var QT;const Rde=ui.ofType({base:null,key:"type",typeMap:{text:yx}});let m0=QT=class extends Nv{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Rde,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return $de(this)}hasVisibleVerticalOffset(){return WV(this)}clone(){return new QT({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail),callout:Ue(this.callout),verticalOffset:Ue(this.verticalOffset)})}static fromTextSymbol(t){return new QT({symbolLayers:new ui([yx.fromTextSymbol(t)])})}};I([N({type:ZV,json:{write:!0}})],m0.prototype,"verticalOffset",void 0),I([N(Ode)],m0.prototype,"callout",void 0),I([N({json:{read:!1,write:!1}})],m0.prototype,"styleOrigin",void 0),I([N({type:Rde})],m0.prototype,"symbolLayers",void 0),I([ni({LabelSymbol3D:"label-3d"},{readOnly:!0})],m0.prototype,"type",void 0),m0=QT=I([De("esri.symbols.LabelSymbol3D")],m0);const QM=m0;var e9;const Lde=ui.ofType({base:null,key:"type",typeMap:{line:gx,path:XV}}),KOe=ui.ofType({base:null,key:"type",typeMap:{line:gx,path:XV}});let $3=e9=class extends Nv{constructor(t){super(t),this.symbolLayers=new Lde,this.type="line-3d"}clone(){return new e9({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromSimpleLineSymbol(t){return new e9({symbolLayers:new ui([gx.fromSimpleLineSymbol(t)])})}};I([N({type:Lde,json:{type:KOe}})],$3.prototype,"symbolLayers",void 0),I([ni({LineSymbol3D:"line-3d"},{readOnly:!0})],$3.prototype,"type",void 0),$3=e9=I([De("esri.symbols.LineSymbol3D")],$3);const $v=$3;let g0=class extends Ea{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};I([N({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],g0.prototype,"angle",void 0),I([N({type:["simple-marker","picture-marker"],readOnly:!0})],g0.prototype,"type",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],g0.prototype,"xoffset",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],g0.prototype,"yoffset",void 0),I([N({cast:t=>t==="auto"?t:tx(fs(t)),json:{write:!0}})],g0.prototype,"size",void 0),g0=I([De("esri.symbols.MarkerSymbol")],g0);const Fde=g0;var t9;const zde=ui.ofType({base:null,key:"type",typeMap:{fill:qg}});let O3=t9=class extends Nv{constructor(t){super(t),this.symbolLayers=new zde,this.type="mesh-3d"}clone(){return new t9({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromSimpleFillSymbol(t){return new t9({symbolLayers:new ui([qg.fromSimpleFillSymbol(t)])})}};I([N({type:zde})],O3.prototype,"symbolLayers",void 0),I([ni({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],O3.prototype,"type",void 0),O3=t9=I([De("esri.symbols.MeshSymbol3D")],O3);const vx=O3;function JOe(t,e,i){return e.imageData?vae({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):qde(e.url,i)}function qde(t,e){if(!Mu(t)){const i=eRe(e);if(i)return v2(i,"images",t)}return fx(t,e)}function QOe(t,e,i,s){if(Tv(t)){const n=rE(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&rv(i.url,e,"url",s)}else rv(t,e,"url",s)}const Vde={json:{read:{source:["imageData","url"],reader:JOe},write:{writer(t,e,i,s){QOe(t,e,this.source,s)}}}},Gde={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const s={};return e.imageData&&(s.imageData=e.imageData),e.contentType&&(s.contentType=e.contentType),e.url&&(s.url=qde(e.url,i)),s}}}};function eRe(t){var n,r;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const s=i==null?void 0:i.type;return s==="feature"||s==="stream"?(n=i.parsedUrl)==null?void 0:n.path:s==="map-image"||s==="tile"?(r=t.url)==null?void 0:r.path:null}var jR;let pc=jR=class extends _de{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=fs(i)),s!=null&&(n.height=fs(s)),n}clone(){const t=new jR({color:Ue(this.color),height:this.height,outline:Ue(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",Ue(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};I([ni({esriPFS:"picture-fill"},{readOnly:!0})],pc.prototype,"type",void 0),I([N(Vde)],pc.prototype,"url",void 0),I([N({type:Number,json:{write:!0}})],pc.prototype,"xscale",void 0),I([N({type:Number,json:{write:!0}})],pc.prototype,"yscale",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],pc.prototype,"width",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],pc.prototype,"height",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],pc.prototype,"xoffset",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],pc.prototype,"yoffset",void 0),I([N(Gde)],pc.prototype,"source",void 0),pc=jR=I([De("esri.symbols.PictureFillSymbol")],pc);const KV=pc;var BR;let _h=BR=class extends Fde{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e!=null&&(s.width=fs(e)),i!=null&&(s.height=fs(i)),s}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new BR({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",Ue(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};I([N({json:{write:!1}})],_h.prototype,"color",void 0),I([ni({esriPMS:"picture-marker"},{readOnly:!0})],_h.prototype,"type",void 0),I([N(Vde)],_h.prototype,"url",void 0),I([N(Gde)],_h.prototype,"source",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],_h.prototype,"height",void 0),I([At("height",["height","size"])],_h.prototype,"readHeight",null),I([N({type:Number,cast:fs,json:{write:!0}})],_h.prototype,"width",void 0),I([N({json:{write:!1}})],_h.prototype,"size",void 0),_h=BR=I([De("esri.symbols.PictureMarkerSymbol")],_h);const FC=_h;var U1;const jde=ui.ofType({base:null,key:"type",typeMap:{icon:Cy,object:YV,text:yx}});let Y1=U1=class extends Nv{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new jde,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return $de(this)}hasVisibleVerticalOffset(){return WV(this)}clone(){return new U1({verticalOffset:Ue(this.verticalOffset),callout:Ue(this.callout),styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new U1({symbolLayers:new ui([Cy.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new U1({symbolLayers:new ui([Cy.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var s,n;if(((n=(s=t.data)==null?void 0:s.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new U1(i!=null&&i.callout?{symbolLayers:new ui([Cy.fromCIMSymbol(t)]),callout:new Nde({size:.5,color:new fi([0,0,0])}),verticalOffset:new ZV({screenLength:40})}:{symbolLayers:new ui([Cy.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new U1({symbolLayers:new ui([yx.fromTextSymbol(t)])})}};I([N({type:ZV,json:{write:!0}})],Y1.prototype,"verticalOffset",void 0),I([N(Ode)],Y1.prototype,"callout",void 0),I([N({type:jde,json:{origins:{"web-scene":{write:!0}}}})],Y1.prototype,"symbolLayers",void 0),I([ni({PointSymbol3D:"point-3d"},{readOnly:!0})],Y1.prototype,"type",void 0),Y1=U1=I([De("esri.symbols.PointSymbol3D")],Y1);const Op=Y1;var R3;const Bde=ui.ofType({base:null,key:"type",typeMap:{extrude:yde,fill:qg,icon:Cy,line:gx,object:YV,text:yx,water:Ade}});let L3=R3=class extends Nv{constructor(t){super(t),this.symbolLayers=new Bde,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&g2(zt.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&g2(zt.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(_g(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Hp))}clone(){return new R3({styleOrigin:Ue(this.styleOrigin),symbolLayers:Ue(this.symbolLayers),thumbnail:Ue(this.thumbnail)})}static fromJSON(t){var i;const e=new R3;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const s=e.symbolLayers.at(0),n=e.symbolLayers.at(1);!n.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(s.outline={size:n.size,color:n.material!=null?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new R3({symbolLayers:new ui([qg.fromSimpleFillSymbol(t)])})}};I([N({type:Bde,json:{write:!0}})],L3.prototype,"symbolLayers",void 0),I([ni({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],L3.prototype,"type",void 0),L3=R3=I([De("esri.symbols.PolygonSymbol3D")],L3);const Vg=L3;var HR;const Ck=new ps({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let X1=HR=class extends _de{constructor(...t){super(...t),this.color=new fi([0,0,0,.25]),this.outline=new Ml,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e&&(s.outline=e),i&&(s.color=i),s}clone(){return new HR({color:Ue(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};I([N()],X1.prototype,"color",void 0),I([N()],X1.prototype,"outline",void 0),I([ni({esriSFS:"simple-fill"},{readOnly:!0})],X1.prototype,"type",void 0),I([N({type:Ck.apiValues,json:{read:Ck.read,write:Ck.write}})],X1.prototype,"style",void 0),X1=HR=I([De("esri.symbols.SimpleFillSymbol")],X1);const um=X1,Cpt=Object.freeze(Object.defineProperty({__proto__:null,default:um},Symbol.toStringTag,{value:"Module"}));var UR;const Pk=new ps({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let kd=UR=class extends Fde{constructor(...t){super(...t),this.color=new fi([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ml}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=fs(e)),i&&(n.outline=i),s&&(n.color=s),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new UR({angle:this.angle,color:Ue(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};I([N()],kd.prototype,"color",void 0),I([Ft("color")],kd.prototype,"writeColor",null),I([ni({esriSMS:"simple-marker"},{readOnly:!0})],kd.prototype,"type",void 0),I([N()],kd.prototype,"size",void 0),I([N({type:Pk.apiValues,json:{read:Pk.read,write:Pk.write}})],kd.prototype,"style",void 0),I([N({type:String,json:{write:!0}})],kd.prototype,"path",null),I([N({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ml}},json:{default:null,write:!0}})],kd.prototype,"outline",void 0),kd=UR=I([De("esri.symbols.SimpleMarkerSymbol")],kd);const Lu=kd,Ppt=Object.freeze(Object.defineProperty({__proto__:null,default:Lu},Symbol.toStringTag,{value:"Module"}));var YR;let jn=YR=class extends Ea{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new JM,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.text=t),e&&(s.font=e),i&&(s.color=i),s}writeLineWidth(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}castLineWidth(t){return fs(t)}writeLineHeight(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}clone(){return new YR({angle:this.angle,backgroundColor:Ue(this.backgroundColor),borderLineColor:Ue(this.borderLineColor),borderLineSize:this.borderLineSize,color:Ue(this.color),font:this.font&&this.font.clone(),haloColor:Ue(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};I([N({type:fi,json:{write:!0}})],jn.prototype,"backgroundColor",void 0),I([N({type:fi,json:{write:!0}})],jn.prototype,"borderLineColor",void 0),I([N({type:Number,json:{write:!0},cast:fs})],jn.prototype,"borderLineSize",void 0),I([N({type:JM,json:{write:!0}})],jn.prototype,"font",void 0),I([N({...Tde,json:{write:!0}})],jn.prototype,"horizontalAlignment",void 0),I([N({type:Boolean,json:{write:!0}})],jn.prototype,"kerning",void 0),I([N({type:fi,json:{write:!0}})],jn.prototype,"haloColor",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],jn.prototype,"haloSize",void 0),I([N({type:Boolean,json:{write:!0}})],jn.prototype,"rightToLeft",void 0),I([N({type:Boolean,json:{write:!0}})],jn.prototype,"rotated",void 0),I([N({type:String,json:{write:!0}})],jn.prototype,"text",void 0),I([ni({esriTS:"text"},{readOnly:!0})],jn.prototype,"type",void 0),I([N({...Ide,json:{write:!0}})],jn.prototype,"verticalAlignment",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],jn.prototype,"xoffset",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],jn.prototype,"yoffset",void 0),I([N({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],jn.prototype,"angle",void 0),I([N({type:Number,json:{write:!0}})],jn.prototype,"width",void 0),I([N({type:Number})],jn.prototype,"lineWidth",void 0),I([Ft("lineWidth")],jn.prototype,"writeLineWidth",null),I([Sn("lineWidth")],jn.prototype,"castLineWidth",null),I([N(Pde)],jn.prototype,"lineHeight",void 0),I([Ft("lineHeight")],jn.prototype,"writeLineHeight",null),jn=YR=I([De("esri.symbols.TextSymbol")],jn);const _x=jn;var XR;let bh=XR=class extends Ea{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:Ou.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new XR({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,s=i?this._fetchCacheKey:null;if(i!=null){const l=s&&i.get(s);if(l)return l.clone()}const{resolveWebStyleSymbol:n}=await nt(()=>import("./webStyleSymbolUtils-C929I5M-.js"),__vite__mapDeps([60,61]),import.meta.url);Kl(e);const r=n(this,{portal:this.portal},t,e);r.catch(l=>{zt.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",l)});const o=await r;return t==="webRef"&&o.type==="point-3d"||t==="cimRef"&&o.type==="cim"?(i!=null&&i.set(s,o.clone()),o):null}};I([N({json:{write:!1}})],bh.prototype,"color",void 0),I([N({type:String,json:{write:!0}})],bh.prototype,"styleName",void 0),I([N({type:Ou,json:{write:!1}})],bh.prototype,"portal",void 0),I([N({type:String,json:{read:IV,write:rv}})],bh.prototype,"styleUrl",void 0),I([N({type:$S,json:{read:!1}})],bh.prototype,"thumbnail",void 0),I([N({type:String,json:{write:!0}})],bh.prototype,"name",void 0),I([ni({styleSymbolReference:"web-style"},{readOnly:!0})],bh.prototype,"type",void 0),I([N()],bh.prototype,"_fetchCacheKey",null),bh=XR=I([De("esri.symbols.WebStyleSymbol")],bh);const Ov=bh;function Tpt(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function cK(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const $c={base:Ea,key:"type",typeMap:{"simple-fill":um,"picture-fill":KV,"picture-marker":FC,"simple-line":Ml,"simple-marker":Lu,text:_x,"label-3d":QM,"line-3d":$v,"mesh-3d":vx,"point-3d":Op,"polygon-3d":Vg,"web-style":Ov,cim:Fg},errorContext:"symbol"},Ipt={base:Ea,key:"type",typeMap:{"picture-marker":FC,"simple-marker":Lu,"point-3d":Op,cim:Fg},errorContext:"symbol"},Mpt={base:Ea,key:"type",typeMap:{"simple-line":Ml,"line-3d":$v,cim:Fg},errorContext:"symbol"},Apt={base:Ea,key:"type",typeMap:{"simple-fill":um,"picture-fill":KV,"polygon-3d":Vg,cim:Fg},errorContext:"symbol"},tRe={base:Ea,key:"type",typeMap:{"picture-marker":FC,"simple-marker":Lu,text:_x,"web-style":Ov,cim:Fg},errorContext:"symbol"},iRe=ix({types:$c}),Hde={base:Ea,key:"type",typeMap:{"simple-fill":um,"picture-fill":KV,"picture-marker":FC,"simple-line":Ml,"simple-marker":Lu,text:_x,"line-3d":$v,"mesh-3d":vx,"point-3d":Op,"polygon-3d":Vg,"web-style":Ov,cim:Fg},errorContext:"symbol"},sRe={base:Ea,key:"type",typeMap:{text:_x,"label-3d":QM},errorContext:"symbol"},hK={base:Ea,key:"type",typeMap:{"line-3d":$v,"mesh-3d":vx,"point-3d":Op,"polygon-3d":Vg,"web-style":Ov,cim:Fg},errorContext:"symbol"},nRe={base:Ea,key:"type",typeMap:{"label-3d":QM},errorContext:"symbol"},Ude=Bc($c);var WR;function rRe(t){if(!t)return null;const e={};for(const i in t){const s=EC(t[i]);s&&(e[i]=s)}return Object.keys(e).length!==0?e:null}function oRe(t){if(t==null)return null;const e={};for(const i in t){const s=t[i];s&&(e[i]=s.toJSON())}return Object.keys(e).length!==0?e:null}let $l=WR=class extends Hs(wt){constructor(t){super(t),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:vS(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&_Pe(zt.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),(t==null?void 0:t.type)!=="mesh"&&this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}get version(){return this._version}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new WR({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;const e=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[e,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(t&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var t;return{aggregateGeometries:oRe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:CI(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(n.action=s),t==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([vg(()=>{var t,e;return((t=this.geometry)==null?void 0:t.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(e=this.geometry.transform)==null?void 0:e.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:t,origin:e})=>{this._lastMeshTransform.localMatrix===t&&this._lastMeshTransform.origin===e||(this._lastMeshTransform.localMatrix=t,this._lastMeshTransform.origin=e,this.notifyMeshTransformChanged())}),vg(()=>{var t;return((t=this.geometry)==null?void 0:t.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var e;const t=this.geometry;(t==null?void 0:t.type)==="mesh"&&t.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(e=t.transform)==null?void 0:e.localMatrix,this._lastMeshTransform.origin=t.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(t,e)=>t===e,sync:!0})])}};I([N({value:null,json:{read:rRe}})],$l.prototype,"aggregateGeometries",null),I([N({value:null})],$l.prototype,"attributes",null),I([N({value:null,types:CC,json:{read:EC}})],$l.prototype,"geometry",null),I([N({type:Boolean})],$l.prototype,"isAggregate",void 0),I([N({clonable:"reference"})],$l.prototype,"layer",void 0),I([N({clonable:"reference"})],$l.prototype,"origin",void 0),I([N({type:NC})],$l.prototype,"popupTemplate",void 0),I([N({clonable:"reference"})],$l.prototype,"sourceLayer",void 0),I([N({value:null,types:$c})],$l.prototype,"symbol",null),I([N({clonable:!1,json:{read:!1,write:!1}})],$l.prototype,"_version",void 0),I([N({type:Boolean,value:!0})],$l.prototype,"visible",null),$l=WR=I([De("esri.Graphic")],$l);const Xp=$l;var ZR;let F3=ZR=class extends wt{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new ZR({minValue:this.minValue,maxValue:this.maxValue})}};I([N({type:Number,json:{write:!0}})],F3.prototype,"minValue",void 0),I([N({type:Number,json:{write:!0}})],F3.prototype,"maxValue",void 0),F3=ZR=I([De("esri.renderers.support.AuthoringInfoClassBreakInfo")],F3);var KR;let O0=KR=class extends wt{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new KR({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Ue(this.classBreakInfos)})}};I([N({type:String,json:{write:!0}})],O0.prototype,"field",void 0),I([N({type:String,json:{write:!0}})],O0.prototype,"normalizationField",void 0),I([N({type:String,json:{write:!0}})],O0.prototype,"label",void 0),I([N({type:[F3],json:{write:!0}})],O0.prototype,"classBreakInfos",void 0),O0=KR=I([De("esri.renderers.support.AuthoringInfoFieldInfo")],O0);var JR;let tb=JR=class extends wt{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new JR({label:this.label,value:this.value,size:this.size})}};I([N({type:String,json:{write:!0}})],tb.prototype,"label",void 0),I([N({type:Number,json:{write:!0}})],tb.prototype,"size",void 0),I([N({type:Number,json:{write:!0}})],tb.prototype,"value",void 0),tb=JR=I([De("esri.renderers.support.AuthoringInfoSizeStop")],tb);const aRe=tb;var QR;const l4=new ps({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),u4=new ps({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),dK={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},fK=["high-to-low","above-and-below","centered-on","extremes"],pK=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],mK=["seconds","minutes","hours","days","months","years"],lRe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let Do=QR=class extends wt{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new QR({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:Ue(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};I([N({types:dK,json:{write:!0}})],Do.prototype,"endTime",void 0),I([Sn("endTime")],Do.prototype,"castEndTime",null),I([N({type:String,json:{write:!0}})],Do.prototype,"field",void 0),I([N({type:Number,json:{write:!0}})],Do.prototype,"maxSliderValue",void 0),I([N({type:Number,json:{write:!0}})],Do.prototype,"minSliderValue",void 0),I([N({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Do.prototype,"normalizationField",null),I([N({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Do.prototype,"referenceSizeScale",null),I([N({type:lRe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Do.prototype,"referenceSizeSymbolStyle",null),I([N({types:dK,json:{write:!0}})],Do.prototype,"startTime",void 0),I([Sn("startTime")],Do.prototype,"castStartTime",null),I([N({type:[aRe],json:{origins:{"web-scene":{write:!1}},write:!0}})],Do.prototype,"sizeStops",null),I([N({type:l4.apiValues,value:null,json:{type:l4.jsonValues,read:l4.read,write:l4.write}})],Do.prototype,"style",null),I([N({type:pK,value:null,json:{type:pK,origins:{"web-scene":{type:fK,write:{writer:(t,e)=>{fK.includes(t)&&(e.theme=t)}}}},write:!0}})],Do.prototype,"theme",null),I([N({type:u4.apiValues,json:{type:u4.jsonValues,read:u4.read,write:u4.write}})],Do.prototype,"type",void 0),I([N({type:mK,json:{type:mK,write:!0}})],Do.prototype,"units",void 0),Do=QR=I([De("esri.renderers.support.AuthoringInfoVisualVariable")],Do);const uRe=Do;let i9=class extends wt{constructor(e){super(e),this.type=null}};I([N({readOnly:!0,json:{read:!1,write:!0}})],i9.prototype,"type",void 0),i9=I([De("esri.rest.support.ColorRamp")],i9);const JV=i9;var eL;let W1=eL=class extends JV{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new eL({fromColor:Ue(this.fromColor),toColor:Ue(this.toColor),algorithm:this.algorithm})}};I([ni({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],W1.prototype,"algorithm",void 0),I([N({type:fi,json:{type:[wn],write:!0}})],W1.prototype,"fromColor",void 0),I([N({type:fi,json:{type:[wn],write:!0}})],W1.prototype,"toColor",void 0),I([N({type:["algorithmic"]})],W1.prototype,"type",void 0),W1=eL=I([De("esri.rest.support.AlgorithmicColorRamp")],W1);const QV=W1;var tL;let z3=tL=class extends JV{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new tL({colorRamps:Ue(this.colorRamps)})}};I([N({type:[QV],json:{write:!0}})],z3.prototype,"colorRamps",void 0),I([N({type:["multipart"]})],z3.prototype,"type",void 0),z3=tL=I([De("esri.rest.support.MultipartColorRamp")],z3);const Yde=z3,cRe={key:"type",base:JV,typeMap:{algorithmic:QV,multipart:Yde}};function hRe(t){return t!=null&&t.type?t.type==="algorithmic"?QV.fromJSON(t):t.type==="multipart"?Yde.fromJSON(t):null:null}var iL;const E1=new ps({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),c4=new ps({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),gK=new ps({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),yK=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],dRe=["high-to-low","above-and-below","above","below"],fRe=["flow-line","wave-front"],pRe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let mr=iL=class extends wt{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?hRe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new iL({classificationMethod:this.classificationMethod,colorRamp:Ue(this.colorRamp),fadeRatio:Ue(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:Ue(this.field1),field2:Ue(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};I([N({type:E1.apiValues,value:null,json:{type:E1.jsonValues,read:E1.read,write:E1.write,origins:{"web-document":{default:"manual",type:E1.jsonValues,read:E1.read,write:E1.write}}}})],mr.prototype,"classificationMethod",null),I([N({types:cRe,json:{write:!0}})],mr.prototype,"colorRamp",void 0),I([At("colorRamp")],mr.prototype,"readColorRamp",null),I([N({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mr.prototype,"fadeRatio",void 0),I([N({type:[String],value:null,json:{write:!0}})],mr.prototype,"fields",null),I([N({type:O0,value:null,json:{write:!0}})],mr.prototype,"field1",null),I([N({type:O0,value:null,json:{write:!0}})],mr.prototype,"field2",null),I([N({type:fRe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mr.prototype,"flowTheme",null),I([N({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],mr.prototype,"focus",null),I([N({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],mr.prototype,"isAutoGenerated",void 0),I([N({type:Number,value:null,json:{type:wn,write:!0}})],mr.prototype,"numClasses",null),I([N({type:yK,json:{type:yK,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],mr.prototype,"lengthUnit",void 0),I([N({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mr.prototype,"maxSliderValue",void 0),I([N({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mr.prototype,"minSliderValue",void 0),I([N({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mr.prototype,"statistics",null),I([N({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],mr.prototype,"standardDeviationInterval",null),I([N({type:c4.apiValues,value:null,json:{type:c4.jsonValues,read:c4.read,write:c4.write,origins:{"web-scene":{type:gK.jsonValues,write:{writer:gK.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],mr.prototype,"type",null),I([N({type:[uRe],json:{write:!0}})],mr.prototype,"visualVariables",void 0),I([N({type:pRe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mr.prototype,"univariateSymbolStyle",null),I([N({type:dRe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mr.prototype,"univariateTheme",null),mr=iL=I([De("esri.renderers.support.AuthoringInfo")],mr);const eG=mr,Tk=new ps({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let q3=class extends wt{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};I([N({type:eG,json:{write:!0}})],q3.prototype,"authoringInfo",void 0),I([N({type:Tk.apiValues,readOnly:!0,json:{type:Tk.jsonValues,read:!1,write:{writer:Tk.write,ignoreOrigin:!0}}})],q3.prototype,"type",void 0),q3=I([De("esri.renderers.Renderer")],q3);const cm=q3;function mRe(t){var e,i;return((i=(e=t.match(gRe))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const gRe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let V3=class extends Hs(wt){constructor(){super(...arguments),this.showLegend=null,this.title=null}};I([N({type:Boolean,json:{write:!0}})],V3.prototype,"showLegend",void 0),I([N({type:String,json:{write:!0}})],V3.prototype,"title",void 0),V3=I([De("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],V3);const Xde=V3,Ik=new ps({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let xh=class extends wt{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(zt.getLogger(this).error(".field: field must be a string value"),null):mC(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};I([N()],xh.prototype,"index",void 0),I([N({type:Ik.apiValues,readOnly:!0,json:{read:Ik.read,write:Ik.write}})],xh.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],xh.prototype,"field",void 0),I([Sn("field")],xh.prototype,"castField",null),I([N({type:String,json:{write:!0}})],xh.prototype,"valueExpression",void 0),I([N({type:String,json:{write:!0}})],xh.prototype,"valueExpressionTitle",void 0),I([N({readOnly:!0})],xh.prototype,"arcadeRequired",null),I([N({type:Xde,json:{write:!0}})],xh.prototype,"legendOptions",void 0),xh=I([De("esri.renderers.visualVariables.VisualVariable")],xh);const bx=xh;var sL;let Z1=sL=class extends wt{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new sL({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};I([N({type:fi,json:{type:[wn],write:!0}})],Z1.prototype,"color",void 0),I([N({type:String,json:{write:!0}})],Z1.prototype,"label",void 0),I([N({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Z1.prototype,"value",void 0),I([Ft("value")],Z1.prototype,"writeValue",null),Z1=sL=I([De("esri.renderers.visualVariables.support.ColorStop")],Z1);const yRe=Z1;var nL;let K1=nL=class extends bx{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new nL({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};I([N({readOnly:!0})],K1.prototype,"cache",null),I([N({type:["color"],json:{type:["colorInfo"]}})],K1.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],K1.prototype,"normalizationField",void 0),I([N({type:[yRe],json:{write:!0}})],K1.prototype,"stops",null),K1=nL=I([De("esri.renderers.visualVariables.ColorVariable")],K1);const Wde=K1;var rL;let y0=rL=class extends wt{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return e6(e.transparency)}writeOpacity(t,e,i){e[i]=kV(t)}clone(){return new rL({label:this.label,opacity:this.opacity,value:this.value})}};I([N({type:String,json:{write:!0}})],y0.prototype,"label",void 0),I([N({type:Number,json:{type:wn,write:{target:"transparency"}}})],y0.prototype,"opacity",void 0),I([At("opacity",["transparency"])],y0.prototype,"readOpacity",null),I([Ft("opacity")],y0.prototype,"writeOpacity",null),I([N({type:Number,json:{write:!0}})],y0.prototype,"value",void 0),y0=rL=I([De("esri.renderers.visualVariables.support.OpacityStop")],y0);const vRe=y0;var oL;let J1=oL=class extends bx{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new oL({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};I([N({readOnly:!0})],J1.prototype,"cache",null),I([N({type:["opacity"],json:{type:["transparencyInfo"]}})],J1.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],J1.prototype,"normalizationField",void 0),I([N({type:[vRe],json:{write:!0}})],J1.prototype,"stops",null),J1=oL=I([De("esri.renderers.visualVariables.OpacityVariable")],J1);const tG=J1;var aL;let Q1=aL=class extends bx{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new aL({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};I([N({readOnly:!0})],Q1.prototype,"cache",null),I([N({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Q1.prototype,"axis",void 0),I([N({type:["rotation"],json:{type:["rotationInfo"]}})],Q1.prototype,"type",void 0),I([N({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Q1.prototype,"rotationType",void 0),Q1=aL=I([De("esri.renderers.visualVariables.RotationVariable")],Q1);const Zde=Q1;function _Re(t){return fs(t)}var lL;let v0=lL=class extends wt{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new lL({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};I([N({type:String,json:{write:!0}})],v0.prototype,"label",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],v0.prototype,"size",void 0),I([N({type:Number,json:{write:!0}})],v0.prototype,"value",void 0),I([N({type:Boolean,json:{write:!1}})],v0.prototype,"useMinValue",void 0),I([N({type:Boolean,json:{write:!1}})],v0.prototype,"useMaxValue",void 0),v0=lL=I([De("esri.renderers.visualVariables.support.SizeStop")],v0);const s9=v0;let n9=class extends Xde{constructor(){super(...arguments),this.customValues=null}};I([N({type:[Number],json:{write:!0}})],n9.prototype,"customValues",void 0),n9=I([De("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],n9);const bRe=n9;var zp,go;function kb(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function gE(t){return t!=null&&!isNaN(t)&&isFinite(t)}function Kde(t){return t.valueExpression?zp.Expression:t.field&&typeof t.field=="string"?zp.Field:zp.Unknown}function xRe(t,e){const i=e||Kde(t),s=t.valueUnit||"unknown";return i===zp.Unknown?go.Constant:t.stops?go.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?go.ClampedLinear:s==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?go.Proportional:go.Additive:go.Identity:go.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(zp||(zp={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(go||(go={}));function Rpt(t){}function Lpt(t){return()=>t}const Jde=()=>zt.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),eA=t=>Jde().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),tA=()=>Jde().error("Use of arcade expressions requires an arcade context"),vK=new Xp,r9=Math.PI,Qde=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function efe(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(P=>P.type==="color"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void eA("ColorVariable");const n=typeof e=="number",r=n?null:e,o=r==null?void 0:r.attributes;let l=n?e:null;const c=s.field,{ipData:f,hasExpression:y}=s.cache;let _=s.cache.compiledFunc;if(!c&&!y){const P=s.stops;return P&&P[0]&&P[0].color}if(typeof l!="number")if(y){if((i==null?void 0:i.arcade)==null)return void tA();const P={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,k=A.getViewInfo(P),$=A.createExecContext(r,k,i.timeZone);if(!_){const F=A.createSyntaxTree(s.valueExpression);_=A.createFunction(F),s.cache.compiledFunc=_}l=A.executeFunction(_,$)}else o&&(l=o[c]);const x=s.normalizationField,S=o!=null&&x!=null?parseFloat(o[x]):void 0;if(l!=null&&(!x||n||!isNaN(S)&&S!==0)){isNaN(S)||n||(l/=S);const P=iG(l,f);if(P){const A=P[0],k=P[1],$=A===k?s.stops[A].color:fi.blendColors(s.stops[A].color,s.stops[k].color,P[2],i!=null?i.color:void 0);return new fi($)}}}function tfe(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(P=>P.type==="opacity"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void eA("OpacityVariable");const n=typeof e=="number",r=n?null:e,o=r==null?void 0:r.attributes;let l=n?e:null;const c=s.field,{ipData:f,hasExpression:y}=s.cache;let _=s.cache.compiledFunc;if(!c&&!y){const P=s.stops;return P&&P[0]&&P[0].opacity}if(typeof l!="number")if(y){if((i==null?void 0:i.arcade)==null)return void tA();const P={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,k=A.getViewInfo(P),$=A.createExecContext(r,k,i.timeZone);if(!_){const F=A.createSyntaxTree(s.valueExpression);_=A.createFunction(F),s.cache.compiledFunc=_}l=A.executeFunction(_,$)}else o&&(l=o[c]);const x=s.normalizationField,S=o!=null&&x!=null?parseFloat(o[x]):void 0;if(l!=null&&(!x||n||!isNaN(S)&&S!==0)){isNaN(S)||n||(l/=S);const P=iG(l,f);if(P){const A=P[0],k=P[1];if(A===k)return s.stops[A].opacity;{const $=s.stops[A].opacity;return $+(s.stops[k].opacity-$)*P[2]}}}}function ife(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(S=>S.type==="rotation"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void eA("RotationVariable");const n=s.axis||"heading",r=n==="heading"&&s.rotationType==="arithmetic"?90:0,o=n==="heading"&&s.rotationType==="arithmetic"?-1:1,l=typeof e=="number"?null:e,c=l==null?void 0:l.attributes,f=s.field,{hasExpression:y}=s.cache;let _=s.cache.compiledFunc,x=0;if(!f&&!y)return x;if(y){if((i==null?void 0:i.arcade)==null)return void tA();const S={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},P=i.arcade.arcadeUtils,A=P.getViewInfo(S),k=P.createExecContext(l,A,i.timeZone);if(!_){const $=P.createSyntaxTree(s.valueExpression);_=P.createFunction($),s.cache.compiledFunc=_}x=P.executeFunction(_,k)}else c&&(x=c[f]||0);return x=typeof x!="number"||isNaN(x)?null:r+o*x,x}function wRe(t,e,i){const s=typeof e=="number",n=s?null:e,r=n==null?void 0:n.attributes;let o=s?e:null;const{isScaleDriven:l}=t.cache;let c=t.cache.compiledFunc;if(l){const y=i!=null?i.scale:void 0,_=i!=null?i.view:void 0;o=y==null||_==="3d"?SRe(t):y}else if(!s)switch(t.inputValueType){case zp.Expression:{if((i==null?void 0:i.arcade)==null)return void tA();const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,x=_.getViewInfo(y),S=_.createExecContext(n,x,i.timeZone);if(!c){const P=_.createSyntaxTree(t.valueExpression);c=_.createFunction(P),t.cache.compiledFunc=c}o=_.executeFunction(c,S);break}case zp.Field:r&&(o=r[t.field]);break;case zp.Unknown:o=null}if(!gE(o))return null;if(s||!t.normalizationField)return o;const f=r?parseFloat(r[t.normalizationField]):null;return gE(f)&&f!==0?o/f:null}function SRe(t){let e=null,i=null;const s=t.stops;return s?(e=s[0].value,i=s[s.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function iA(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(r=>r.type==="size"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void eA("SizeVariable");const n=nfe(wRe(s,e,i),s,e,i,s.cache.ipData);return n==null||isNaN(n)?0:n}function Ql(t,e,i){return t==null?null:kb(t)?iA(t,e,i):gE(t)?t:null}function sfe(t,e,i){return gE(i)&&t>i?i:gE(e)&&t<e?e:t}function ERe(t,e,i,s){return t+((Ql(e.minSize,i,s)||e.minDataValue)??0)}function CRe(t,e,i){const s=t.stops;let n=(s==null?void 0:s.length)&&s[0].size;return n==null&&(n=t.minSize),Ql(n,e,i)}function PRe(t,e,i,s){const n=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),r=Ql(e.minSize,i,s),o=Ql(e.maxSize,i,s),l=s!=null?s.shape:void 0;if(t<=e.minDataValue)return r;if(t>=e.maxDataValue)return o;if(r==null||o==null)return null;if(e.scaleBy==="area"&&l){const c=l==="circle",f=c?r9*(r/2)**2:r*r,y=f+n*((c?r9*(o/2)**2:o*o)-f);return c?2*Math.sqrt(y/r9):Math.sqrt(y)}return r+n*(o-r)}function TRe(t,e,i,s){const n=s!=null?s.shape:void 0,r=t/e.minDataValue,o=Ql(e.minSize,i,s),l=Ql(e.maxSize,i,s);let c=null;return c=n==="circle"?2*Math.sqrt(r*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(r*o**2):r*o,sfe(c,o,l)}function IRe(t,e,i,s,n){var c,f,y;const[r,o,l]=iG(t,n);if(r===o)return Ql((c=e.stops)==null?void 0:c[r].size,i,s);{const _=Ql((f=e.stops)==null?void 0:f[r].size,i,s);return _+(Ql((y=e.stops)==null?void 0:y[o].size,i,s)-_)*l}}function MRe(t,e,i,s){const n=((s==null?void 0:s.resolution)??1)*BM[e.valueUnit],r=Ql(e.minSize,i,s),o=Ql(e.maxSize,i,s),{valueRepresentation:l}=e;let c=null;return c=l==="area"?2*Math.sqrt(t/r9)/n:l==="radius"||l==="distance"?2*t/n:t/n,sfe(c,r,o)}function nfe(t,e,i,s,n){switch(e.transformationType){case go.Additive:return ERe(t,e,i,s);case go.Constant:return CRe(e,i,s);case go.ClampedLinear:return PRe(t,e,i,s);case go.Proportional:return TRe(t,e,i,s);case go.Stops:return IRe(t,e,i,s,n);case go.RealWorldSize:return MRe(t,e,i,s);case go.Identity:return t;case go.Unknown:return null}}function ARe(t,e,i){const{isScaleDriven:s}=t.cache;if(!(s&&i==="3d"||e))return null;const n={scale:e,view:i};let r=Ql(t.minSize,vK,n),o=Ql(t.maxSize,vK,n);if(r!=null||o!=null){if(r>o){const l=o;o=r,r=l}return{minSize:r,maxSize:o}}}function DRe(t,e,i){if(!t.visualVariables)return;const s=[],n=[],r=[],o=[],l=[];for(const c of t.visualVariables)switch(c.type){case"color":n.push(c);break;case"opacity":r.push(c);break;case"rotation":l.push(c);break;case"size":o.push(c)}return n.forEach(c=>{const f=efe(c,e,i);s.push({variable:c,value:f})}),r.forEach(c=>{const f=tfe(c,e,i);s.push({variable:c,value:f})}),l.forEach(c=>{const f=ife(c,e,i);s.push({variable:c,value:f})}),o.forEach(c=>{const f=iA(c,e,i);s.push({variable:c,value:f})}),s.filter(c=>c.value!=null)}function iG(t,e){if(!e)return;let i=0,s=e.length-1;return e.some((n,r)=>t<n?(s=r,!0):(i=r,!1)),[i,s,(t-e[i])/(e[s]-e[i])]}function kRe(t,e,i){const s=["proportional","proportional","proportional"];for(const n of t){const r=n.useSymbolValue?"symbol-value":iA(n,e,i);switch(n.axis){case"width":s[0]=r;break;case"depth":s[1]=r;break;case"height":s[2]=r;break;case"width-and-depth":s[0]=r,s[1]=r;break;case"all":case void 0:case null:s[0]=r,s[1]=r,s[2]=r;break;default:n.axis}}return s}const Fpt=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:kRe,getColor:efe,getOpacity:tfe,getRotationAngle:ife,getSize:iA,getSizeForValue:nfe,getSizeFromNumberOrVariable:Ql,getSizeRangeAtScale:ARe,getVisualVariableValues:DRe,viewScaleRE:Qde},Symbol.toStringTag,{value:"Module"}));var uL;const h4=new ps({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),cL=new ps({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function _K(t){if(t!=null)return typeof t=="string"||typeof t=="number"?_Re(t):t.type==="size"?kb(t)?t:(delete(t={...t}).type,new qs(t)):void 0}function bK(t,e,i){if(typeof t!="object")return t;const s=new qs;return s.read(t,i),s}let qs=uL=class extends bx{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&Qde.test(this.valueExpression)}}set index(t){kb(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),kb(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return Kde(this)}set maxDataValue(t){t&&this.stops&&(zt.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(zt.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return _K(t)}readMaxSize(t,e,i){return bK(t,e,i)}set minDataValue(t){t&&this.stops&&(zt.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(zt.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return _K(t)}readMinSize(t,e,i){return bK(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(zt.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return xRe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,s){if(t==="$view.scale"){if(s!=null&&s.messages){const n=this.index,r=typeof n=="string"?n:`visualVariables[${n}]`;s.messages.push(new rt("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpression",context:s}))}}else e[i]=t}readValueUnit(t){return t?cL.read(t):null}clone(){var t,e;return new uL({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:kb(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:kb(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType===go.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===go.Stops){const t=this.stops;if(!t)return this;const e=t.map(s=>s.size).reverse(),i=t.length;for(let s=0;s<i;s++)t[s].size=e[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map(e=>e.value||0)}};I([N({readOnly:!0})],qs.prototype,"cache",null),I([N({type:h4.apiValues,json:{type:h4.jsonValues,origins:{"web-map":{read:!1}},read:h4.read,write:h4.write}})],qs.prototype,"axis",void 0),I([N()],qs.prototype,"index",null),I([N({type:String,readOnly:!0})],qs.prototype,"inputValueType",null),I([N({type:bRe,json:{write:!0}})],qs.prototype,"legendOptions",void 0),I([N({type:Number,value:null,json:{write:!0}})],qs.prototype,"maxDataValue",null),I([N({type:Number,value:null,json:{write:!0}})],qs.prototype,"maxSize",null),I([Sn("maxSize")],qs.prototype,"castMaxSize",null),I([At("maxSize")],qs.prototype,"readMaxSize",null),I([N({type:Number,value:null,json:{write:!0}})],qs.prototype,"minDataValue",null),I([N({type:Number,value:null,json:{write:!0}})],qs.prototype,"minSize",null),I([Sn("minSize")],qs.prototype,"castMinSize",null),I([At("minSize")],qs.prototype,"readMinSize",null),I([N({type:String,json:{write:!0}})],qs.prototype,"normalizationField",void 0),I([N({readOnly:!0})],qs.prototype,"arcadeRequired",null),I([N({type:String})],qs.prototype,"scaleBy",void 0),I([N({type:[s9],value:null,json:{write:!0}})],qs.prototype,"stops",null),I([N({type:["outline"],json:{write:!0}})],qs.prototype,"target",void 0),I([N({type:String,readOnly:!0})],qs.prototype,"transformationType",null),I([N({type:["size"],json:{type:["sizeInfo"]}})],qs.prototype,"type",void 0),I([N({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],qs.prototype,"useSymbolValue",void 0),I([N({type:String,json:{write:!0}})],qs.prototype,"valueExpression",void 0),I([At("valueExpression",["valueExpression","expression"])],qs.prototype,"readValueExpression",null),I([Ft("web-scene","valueExpression")],qs.prototype,"writeValueExpressionWebScene",null),I([N({type:["radius","diameter","area","width","distance"],json:{write:!0}})],qs.prototype,"valueRepresentation",void 0),I([N({type:cL.apiValues,json:{write:cL.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],qs.prototype,"valueUnit",void 0),I([At("valueUnit")],qs.prototype,"readValueUnit",null),qs=uL=I([De("esri.renderers.visualVariables.SizeVariable")],qs);const sA=qs,NRe={color:Wde,size:sA,opacity:tG,rotation:Zde},$Re=new ps({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),ORe=/^\[([^\]]+)\]$/i;let o9=class extends Ei{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter(i=>!!i),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,s)=>{let n=null;return n=i.target===s.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,s){const{rotationExpression:n,rotationType:r}=i,o=n==null?void 0:n.match(ORe),l=o==null?void 0:o[1];if(l&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:r,field:l})),e)return e.map(c=>{const f=$Re.read(c.type),y=NRe[f];y||(zt.getLogger(this).warn(`Unknown variable type: ${f}`),s!=null&&s.messages&&s.messages.push(new Jh("visual-variable:unsupported",`visualVariable of type '${f}' is not supported`,{definition:c,context:s})));const _=new y;return _.read(c,s),_})}writeVariables(e,i){const s=[];for(const n of e){const r=n.toJSON(i);r&&s.push(r)}return s}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};I([N()],o9.prototype,"visualVariables",null),o9=I([De("esri.renderers.visualVariables.VisualVariableFactory")],o9);const RRe=o9,LRe={base:bx,key:"type",typeMap:{opacity:tG,color:Wde,rotation:Zde,size:sA}},xx=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new RRe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,s,n){return this._vvFactory.readVariables(i,s,n)}writeVisualVariables(i,s,n,r){s[n]=this._vvFactory.writeVariables(i,r)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,s){return i?this.getVisualVariablesForType(i,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(i,s){const n=this.visualVariables;return n?n.filter(r=>r.type===i&&(typeof s=="string"?r.target===s:s!==!1||!r.target)):[]}async collectVVRequiredFields(i,s){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const r of n)r&&(r.field&&_l(i,s,r.field),r.normalizationField&&_l(i,s,r.normalizationField),r.valueExpression&&(FRe(r.valueExpression,i,s)||await Ja(i,s,r.valueExpression)))}};return I([N({types:[LRe],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),I([At("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),I([Ft("visualVariables")],e.prototype,"writeVisualVariables",null),e=I([De("esri.renderers.mixins.VisualVariablesMixin")],e),e};function FRe(t,e,i){const s=mRe(t);return s!=null&&(_l(e,i,s),!0)}const sG=[252,146,31,255],zRe=[153,153,153,255],qRe={type:"esriSMS",style:"esriSMSCircle",size:6,color:sG,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},VRe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:sG},GRe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},jRe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},BRe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},HRe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},URe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},rfe=Lu.fromJSON(qRe),ofe=Ml.fromJSON(VRe),afe=um.fromJSON(GRe),YRe=_x.fromJSON(jRe);function qpt(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return rfe;case"polyline":return ofe;case"polygon":case"extent":return afe}return null}const Vpt=Lu.fromJSON(BRe),Gpt=Ml.fromJSON(HRe),jpt=um.fromJSON(URe),XRe=Op.fromSimpleMarkerSymbol(rfe),WRe=$v.fromSimpleLineSymbol(ofe),ZRe=Vg.fromSimpleFillSymbol(afe),KRe=new vx({symbolLayers:new ui([new qg({material:{color:sG},edges:new mde({size:Uc(1),color:new fi(zRe)})})])}),JRe=new $v({symbolLayers:new ui([new gx({material:{color:new fi([0,0,0])},size:Uc(1)})])}),QRe=new Vg({symbolLayers:new ui([new qg({outline:{color:new fi([0,0,0]),size:Uc(1)}})])});function Bpt(t){if(t==null)return null;switch(t.type){case"mesh":return KRe;case"point":case"multipoint":return XRe;case"polyline":return WRe;case"polygon":case"extent":return ZRe}return null}const xK="#useCIMFallbackSymbology()",I_={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function eLe(t,e=I_){var c,f,y,_;if(!t)return{symbol:null};const{retainId:i=I_.retainId,ignoreDrivers:s=I_.ignoreDrivers,hasLabelingContext:n=I_.hasLabelingContext,retainCIM:r=I_.retainCIM,cimFallbackEnabled:o=I_.cimFallbackEnabled}=e;let l=null;if(cK(t)||t instanceof Ov)l=t.clone();else if(t.type==="cim"){const x=(f=(c=t.data)==null?void 0:c.symbol)==null?void 0:f.type;switch(x){case"CIMPointSymbol":l=r?t.clone():Op.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(l=JRe.clone(),(y=e==null?void 0:e.logWarning)==null||y.call(e,xK,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(l=QRe.clone(),(_=e==null?void 0:e.logWarning)==null||_.call(e,xK,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!l)return{error:new rt("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${x||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof Ml)l=$v.fromSimpleLineSymbol(t);else if(t instanceof Lu)l=Op.fromSimpleMarkerSymbol(t);else if(t instanceof FC)l=Op.fromPictureMarkerSymbol(t);else if(t instanceof um)l=e.geometryType&&e.geometryType==="mesh"?vx.fromSimpleFillSymbol(t):Vg.fromSimpleFillSymbol(t);else{if(!(t instanceof _x))return{error:new rt("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};l=n?QM.fromTextSymbol(t):Op.fromTextSymbol(t)}return i&&l&&l.type!=="cim"&&(l.id=t.id),s&&cK(l)&&l.symbolLayers.forEach(x=>x.ignoreDrivers=!0),{symbol:l}}function i6(t,e,i,s){const n=lfe(t,{},{context:s,isLabelSymbol:!1});n!=null&&(e[i]=n)}function wK(t,e,i,s){const n=lfe(t,{},{context:s,isLabelSymbol:!0});n!=null&&(e[i]=n)}function SK(t){return t instanceof Nv||t instanceof Ov}function tLe(t){return t instanceof Nv&&(t.type==="polygon-3d"||t.type==="line-3d")}function lfe(t,e,i){var l;if(t==null)return null;const{context:s,isLabelSymbol:n}=i,r=s==null?void 0:s.origin,o=s==null?void 0:s.messages;if(r==="web-scene"&&!SK(t)){const c=eLe(t,{retainCIM:!0,hasLabelingContext:n});return c.symbol!=null?c.symbol.write(e,s):(o==null||o.push(new rt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:s,error:c.error})),null)}return FO(s==null?void 0:s.layer)&&tLe(t)?(o==null||o.push(new rt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(l=s==null?void 0:s.layer)==null?void 0:l.declaredClass}'.`,{symbol:t,context:s})),null):(r==="web-map"||r==="portal-item"&&!FO(s==null?void 0:s.layer))&&SK(t)?(o==null||o.push(new rt("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:s})),null):t.write(e,s)}function Hpt(t,e){return iRe(t,null,e)}const nA={types:Hde,json:{write:{writer:i6},origins:{"web-scene":{types:hK,write:{writer:i6},read:{reader:ix({types:hK})}}}}},nG=yq({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},nA),rG={types:{base:Ea,key:"type",typeMap:{"simple-fill":$c.typeMap["simple-fill"],"picture-fill":$c.typeMap["picture-fill"],"polygon-3d":$c.typeMap["polygon-3d"],cim:$c.typeMap.cim}},json:{write:{writer:i6},origins:{"web-scene":{type:Vg,write:{writer:i6}}}}},a9={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var hL;let _0=hL=class extends wt{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new hL({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};I([N({type:String,json:{write:!0}})],_0.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],_0.prototype,"label",void 0),I([N({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],_0.prototype,"minValue",void 0),I([N({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],_0.prototype,"maxValue",void 0),I([N(nG)],_0.prototype,"symbol",void 0),_0=hL=I([De("esri.renderers.support.ClassBreakInfo")],_0);const s6=_0,iLe=wa()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let G3=class extends Hs(wt){constructor(e){super(e),this.title=null,this.order=null}};I([N({type:String,json:{write:!0}})],G3.prototype,"title",void 0),I([ni(iLe)],G3.prototype,"order",void 0),G3=I([De("esri.renderers.support.RendererLegendOptions")],G3);const oG=G3;var dL;const ufe="log",l9="percent-of-total",u9="field",d4=new ps({esriNormalizeByLog:ufe,esriNormalizeByPercentOfTotal:l9,esriNormalizeByField:u9}),sLe=Zo(s6);let Jr=dL=class extends xx(cm){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let s=e.minValue;return t.map(n=>{const r=new s6;return r.read(n,i),r.minValue==null&&(r.minValue=s),r.maxValue==null&&(r.maxValue=r.minValue),s=r.maxValue,r})}writeClassBreakInfos(t,e,i,s){const n=t.map(r=>r.write({},s));this._areClassBreaksConsecutive()&&n.forEach(r=>delete r.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(zt.getLogger(this).error(".field: field must be a string value"),null):mC(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&u9||i&&l9||null,e&&i&&zt.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==u9&&t!==l9||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let s=null;s=typeof t=="number"?new s6({minValue:t,maxValue:e,symbol:Ude(i)}):sLe(Ue(t)),this.classBreakInfos.push(s),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let s=0;s<i;s++){const n=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&zt.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await av()});const s=this.getBreakIndex(t,i);return s!==-1?this.classBreakInfos[s]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void zt.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const n=await av(),{arcadeUtils:r}=n;r.hasGeometryOperations(this.valueExpression)&&await r.enableGeometryOperations(),i={...i,arcade:n}}const s=this.getBreakIndex(t,i);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((s,n)=>s+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new dL({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Ue(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Ue(this.visualVariables),legendOptions:Ue(this.legendOptions),authoringInfo:Ue(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(t,e)),Ja(t,e,this.valueExpression)];_l(t,e,this.field),_l(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:s,spatialReference:n,arcade:r,timeZone:o}=e??{},{valueExpression:l}=this;let c=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const f=r.arcadeUtils;if(!c){const _=f.createSyntaxTree(l);c=f.createFunction(_),this._compiledValueExpression.compiledFunction=c}this._compiledValueExpression.valueExpression=l;const y=f.executeFunction(c,f.createExecContext(t,f.getViewInfo({viewingMode:i,scale:s,spatialReference:n}),o));return this._getBreakIndexfromInfos(y)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,s=this.normalizationType;let n=parseFloat(i[e]);if(s){const r=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(s===ufe)n=Math.log(n)*Math.LOG10E;else if(s!==l9||r==null||isNaN(r)){if(s===u9&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/r*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]<=t&&(e?t<=s[1]:t<s[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};I([N(rG)],Jr.prototype,"backgroundFillSymbol",void 0),I([N({type:[s6]})],Jr.prototype,"classBreakInfos",void 0),I([At("classBreakInfos")],Jr.prototype,"readClassBreakInfos",null),I([Ft("classBreakInfos")],Jr.prototype,"writeClassBreakInfos",null),I([N({type:String,json:{write:!0}})],Jr.prototype,"defaultLabel",void 0),I([N(nA)],Jr.prototype,"defaultSymbol",void 0),I([N({type:String,json:{write:!0}})],Jr.prototype,"field",void 0),I([Sn("field")],Jr.prototype,"castField",null),I([N({type:Boolean})],Jr.prototype,"isMaxInclusive",void 0),I([N({type:oG,json:{write:!0}})],Jr.prototype,"legendOptions",void 0),I([N({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Jr.prototype,"minValue",null),I([N({type:String,json:{write:!0}})],Jr.prototype,"normalizationField",void 0),I([N({type:Number,json:{write:!0}})],Jr.prototype,"normalizationTotal",void 0),I([N({type:d4.apiValues,value:null,json:{type:d4.jsonValues,read:d4.read,write:d4.write}})],Jr.prototype,"normalizationType",null),I([ni({classBreaks:"class-breaks"})],Jr.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],Jr.prototype,"valueExpression",void 0),I([N({type:String,json:{write:!0}})],Jr.prototype,"valueExpressionTitle",void 0),Jr=dL=I([De("esri.renderers.ClassBreaksRenderer")],Jr);const cfe=Jr,fL=-3,nLe=fL-1;var wp;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(wp||(wp={}));let rLe=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new $y,this._users=new $y}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const s=this._db.get(e.id+i);return(s==null?void 0:s.size)??0}put(e,i,s,n,r){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==s&&this._notifyRemove(i,o.entry,o.size,wp.ALL)),n>this._maxSize)return void this._notifyRemove(i,s,n,wp.ALL);if(s===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,s,0,wp.ALL);const l=1+Math.max(r,nLe)-fL;this._db.set(i,new oLe(s,n,l)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i,s,n){i=e.id+i;const r=this._db.get(i);if(r&&r.entry===s){for(this._size-=r.size,e.size-=r.size;n>this._maxSize;){const o=this._notifyRemove(i,s,n,wp.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);n=o}r.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,i){i=e.id+i;const s=this._db.get(i);if(s)return this._size-=s.size,e.size-=s.size,this._db.delete(i),++this._hit,s.entry;++this._miss}get(e,i){i=e.id+i;const s=this._db.get(i);if(s!==void 0)return this._db.delete(i),s.lives=s.lifetime,this._db.set(i,s),++this._hit,s.entry;++this._miss}peek(e,i){const s=this._db.get(e.id+i);return s?++this._hit:++this._miss,s==null?void 0:s.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},s=new Array;this._db.forEach((o,l)=>{const c=o.lifetime;s[c]=(s[c]||0)+o.size,this._users.forAll(f=>{const{id:y,name:_}=f;if(l.startsWith(y)){const x=i[_]||0;i[_]=x+o.size}})});const n={};this._users.forAll(o=>{const l=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const c=i[l]||0;i[l]=c,n[l]=Math.round(100*o.hitRate)+"%"}else n[l]="0%"});const r=Object.keys(i);r.sort((o,l)=>i[l]-i[o]),r.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=s.length-1;o>=0;--o){const l=s[o];l&&(e["Priority "+(o+fL-1)]=Math.round(l/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((s,n)=>{n.startsWith(i)&&(this._size-=s.size,this._db.delete(n),this._notifyRemove(n,s.entry,s.size,wp.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,wp.ALL)),this._users.forAll(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,s,n){let r;return this._removeFuncs.some(o=>{if(e.startsWith(o[0])){const l=o[1](i,n,s);return typeof l=="number"&&(r=l),!0}return!1}),r}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e)),this._checkSizeLimits()}_checkSizeLimits(e){const i=e??this;if(i.maxSize<0||i.size<=i.maxSize)return;const s=e==null?void 0:e.id;let n=!0;for(;n;){n=!1;for(const[r,o]of this._db)if(o.lifetime===0&&(!s||r.startsWith(s))){if(this._purgeItem(r,o,e),i.size<=.9*i.maxSize)return;n||(n=this._db.has(r))}}for(const[r,o]of this._db)if((!s||r.startsWith(s))&&(this._purgeItem(r,o,e),i.size<=.9*i.maxSize))return}_purgeItem(e,i,s=this._users.find(n=>e.startsWith(n.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,s&&(s.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,wp.SOME);n!=null&&n>0&&(this._size+=n,s&&(s.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},oLe=class{constructor(e,i,s){this.entry=e,this.size=i,this.lifetime=s,this.lives=s}},aLe=class{constructor(e,i){this._storage=new rLe,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,s=1){this._storage.put(this,e,i,s,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},hfe=class pL{constructor(e,i,s=""){this.major=e,this.minor=i,this._context=s}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",s=this._context&&this._context+" ";throw new rt(i+"unsupported-version",`Required major ${s}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new pL(this.major,this.minor,this._context)}static parse(e,i=""){const[s,n]=e.split("."),r=/^\s*\d+\s*$/;if(!(s!=null&&s.match)||!r.test(s))throw new rt((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(n!=null&&n.match)||!r.test(n))throw new rt((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(s,10),l=parseInt(n,10);return new pL(o,l,i)}},rA=class{};function lLe(t){return t instanceof rx?t===rA.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function Kpt(t){return lLe(t)?rA.instance:t}rA.instance=new Ru("Etc/UTC");function uLe(t){return"timeZone"in t}function cLe(t){return"timeZone"in t}function hLe(t){return"dateFieldsTimeZone"in t}const dLe=new Map;let dfe=class c9{static fromJSON(e){return new c9(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new c9(e.fields??[],CK(e))}static fromLayerJSON(e){return new c9(e.fields??[],CK(e))}constructor(e=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const s=[];for(const r of this.fields){const o=r==null?void 0:r.name,l=EK(o);if(o&&l){const c=yy(o);this._fieldsMap.set(o,r),this._fieldsMap.set(c,r),this._normalizedFieldsMap.set(l,r),s.push(`${c}:${r.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),yNe(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):AV(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),zZ(r)||qZ(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}s.sort(),this.uid=s.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)zZ(e)||qZ(e)||e.nullable||rNe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(yy(e))??this._normalizedFieldsMap.get(EK(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(zt.getLogger("esri.layers.support.FieldsIndex").error(new rt("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),ff):ffe.has(i.type)?nv:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===nv?rA.instance:i===ff?Bo.utcInstance:Sq(dLe,i,()=>Ru.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return vNe(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(e=>CI(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function yy(t){return t.trim().toLowerCase()}function EK(t){var e;return((e=Bke(t))==null?void 0:e.toLowerCase())??""}const ffe=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function CK(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:s,editFieldsInfo:n}=t,r=(s?"startField"in s?s.startField:s.startTimeField:"")??"",o=(s?"endField"in s?s.endField:s.endTimeField:"")??"",l=hLe(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?TT(t.dateFieldsTimeReference):null,c=n?uLe(n)?n.timeZone??l:n.dateFieldsTimeReference?TT(n.dateFieldsTimeReference):l??ff:null,f=s?cLe(s)?s.timeZone??l:s.timeReference?TT(s.timeReference):l:null,y=new Map([[yy((n==null?void 0:n.creationDateField)??""),c],[yy((n==null?void 0:n.editDateField)??""),c],[yy(r),f],[yy(o),f]]);for(const{name:_,type:x}of t.fields)if(ffe.has(x))e.set(_,nv);else if(x!=="date"&&x!=="esriFieldTypeDate")e.set(_,null);else if(i)e.set(_,nv);else{const S=y.get(yy(_??""))??l;e.set(_,S)}return e}function N2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function fLe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function aG(t,e,i,s,n){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t}function pfe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function mfe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function gfe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function yfe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function pLe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function mLe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function gLe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function yLe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function vLe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function vfe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function _Le(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t}function _fe(t,e){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(i*i+s*s+n*n+r*r)}function bfe(t,e){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2],r=e[3]-t[3];return i*i+s*s+n*n+r*r}function lG(t){const e=t[0],i=t[1],s=t[2],n=t[3];return Math.sqrt(e*e+i*i+s*s+n*n)}function uG(t){const e=t[0],i=t[1],s=t[2],n=t[3];return e*e+i*i+s*s+n*n}function bLe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function xLe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function xfe(t,e){const i=e[0],s=e[1],n=e[2],r=e[3];let o=i*i+s*s+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=s*o,t[2]=n*o,t[3]=r*o),t}function cG(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function oA(t,e,i,s){const n=e[0],r=e[1],o=e[2],l=e[3];return t[0]=n+s*(i[0]-n),t[1]=r+s*(i[1]-r),t[2]=o+s*(i[2]-o),t[3]=l+s*(i[3]-l),t}function wLe(t,e=1){const i=TC;let s,n,r,o,l,c;do s=2*i()-1,n=2*i()-1,l=s*s+n*n;while(l>=1);do r=2*i()-1,o=2*i()-1,c=r*r+o*o;while(c>=1);const f=Math.sqrt((1-l)/c);return t[0]=e*s,t[1]=e*n,t[2]=e*r*f,t[3]=e*o*f,t}function SLe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3];return t[0]=i[0]*s+i[4]*n+i[8]*r+i[12]*o,t[1]=i[1]*s+i[5]*n+i[9]*r+i[13]*o,t[2]=i[2]*s+i[6]*n+i[10]*r+i[14]*o,t[3]=i[3]*s+i[7]*n+i[11]*r+i[15]*o,t}function ELe(t,e,i){const s=e[0],n=e[1],r=e[2],o=i[0],l=i[1],c=i[2],f=i[3],y=f*s+l*r-c*n,_=f*n+c*s-o*r,x=f*r+o*n-l*s,S=-o*s-l*n-c*r;return t[0]=y*f+S*-o+_*-c-x*-l,t[1]=_*f+S*-l+x*-o-y*-c,t[2]=x*f+S*-c+y*-l-_*-o,t[3]=e[3],t}function CLe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function wfe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function zC(t,e){const i=t[0],s=t[1],n=t[2],r=t[3],o=e[0],l=e[1],c=e[2],f=e[3],y=ro();return Math.abs(i-o)<=y*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-l)<=y*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-c)<=y*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=y*Math.max(1,Math.abs(r),Math.abs(f))}const PLe=mfe,TLe=gfe,ILe=yfe,MLe=_fe,ALe=bfe,DLe=lG,kLe=uG;Object.freeze(Object.defineProperty({__proto__:null,add:pfe,ceil:pLe,copy:N2,copyVec3:fLe,dist:MLe,distance:_fe,div:ILe,divide:yfe,dot:cG,equals:zC,exactEquals:wfe,floor:mLe,inverse:xLe,len:DLe,length:lG,lerp:oA,max:yLe,min:gLe,mul:TLe,multiply:gfe,negate:bLe,normalize:xfe,random:wLe,round:vLe,scale:vfe,scaleAndAdd:_Le,set:aG,sqrDist:ALe,sqrLen:kLe,squaredDistance:bfe,squaredLength:uG,str:CLe,sub:PLe,subtract:mfe,transformMat4:SLe,transformQuat:ELe},Symbol.toStringTag,{value:"Module"}));function hm(){return[0,0,0,0]}function NLe(t){return[t[0],t[1],t[2],t[3]]}function qc(t,e,i,s){return[t,e,i,s]}function $Le(t,e,i,s){return[t,e,i,s]}function Sfe(t,e=hm()){const i=Math.min(4,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function OLe(t,e){return new Float64Array(t,e,4)}function Efe(){return hm()}function Cfe(){return qc(1,1,1,1)}function Pfe(){return qc(1,0,0,0)}function Tfe(){return qc(0,1,0,0)}function Ife(){return qc(0,0,1,0)}function Mfe(){return qc(0,0,0,1)}const RLe=Efe(),LLe=Cfe(),FLe=Pfe(),zLe=Tfe(),qLe=Ife(),VLe=Mfe();Object.freeze(Object.defineProperty({__proto__:null,ONES:LLe,UNIT_W:VLe,UNIT_X:FLe,UNIT_Y:zLe,UNIT_Z:qLe,ZEROS:RLe,clone:NLe,create:hm,createView:OLe,freeze:$Le,fromArray:Sfe,fromValues:qc,ones:Cfe,unitW:Mfe,unitX:Pfe,unitY:Tfe,unitZ:Ife,zeros:Efe},Symbol.toStringTag,{value:"Module"}));function Afe(t){return"r"in t&&"g"in t&&"b"in t}function Dfe(t){return"h"in t&&"s"in t&&"v"in t}function kfe(t){return"l"in t&&"a"in t&&"b"in t}function Nfe(t){return"l"in t&&"c"in t&&"h"in t}function GLe(t){return"x"in t&&"y"in t&&"z"in t}const jLe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],BLe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function $fe(t,e){const i=[];let s,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const r=t.length,o=t[0].length;let l=0;for(s=0;s<r;s++){for(l=0,n=0;n<o;n++)l+=t[s][n]*e[n];i.push(l)}return i}function Ofe(t){const e=[t.r/255,t.g/255,t.b/255].map(s=>s<=.04045?s/12.92:((s+.055)/1.055)**2.4),i=$fe(jLe,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function hG(t){const e=$fe(BLe,[t.x/100,t.y/100,t.z/100]).map(i=>{const s=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(s,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function Rfe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function Lfe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(s=>s>6/29?s**3:3*(6/29)**2*(s-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function HLe(t){const e=t.l,i=t.a,s=t.b,n=Math.sqrt(i*i+s*s);let r=Math.atan2(s,i);return r=r>0?r:r+2*Math.PI,{l:e,c:n,h:r}}function ULe(t){const e=t.l,i=t.c,s=t.h;return{l:e,a:i*Math.cos(s),b:i*Math.sin(s)}}function YLe(t){return Rfe(Ofe(t))}function XLe(t){return hG(Lfe(t))}function WLe(t){return HLe(Rfe(Ofe(t)))}function ZLe(t){return hG(Lfe(ULe(t)))}function KLe(t){const e=t.r,i=t.g,s=t.b,n=Math.max(e,i,s),r=n-Math.min(e,i,s);let o=n,l=r===0?0:n===e?(i-s)/r%6:n===i?(s-e)/r+2:(e-i)/r+4,c=r===0?0:r/o;return l<0&&(l+=6),l*=60,c*=100,o*=100/255,{h:l,s:c,v:o}}function JLe(t){const e=(t.h+360)%360/60,i=t.s/100,s=t.v/100*255,n=s*i,r=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:r,b:0};break;case 1:o={r,g:n,b:0};break;case 2:o={r:0,g:n,b:r};break;case 3:o={r:0,g:r,b:n};break;case 4:o={r,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:r};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+s-n),o.g=Math.round(o.g+s-n),o.b=Math.round(o.b+s-n),o}function qC(t){return Afe(t)?t:Nfe(t)?ZLe(t):kfe(t)?XLe(t):GLe(t)?hG(t):Dfe(t)?JLe(t):t}function QLe(t){return Dfe(t)?t:KLe(qC(t))}function eFe(t){return kfe(t)?t:YLe(qC(t))}function Jpt(t){return Nfe(t)?t:WLe(qC(t))}function tFe(t){let{r:e,g:i,b:s,a:n}=t;return n<1&&(e=Math.round(n*e+255*(1-n)),i=Math.round(n*i+255*(1-n)),s=Math.round(n*s+255*(1-n))),new fi({r:e,g:i,b:s})}function iFe(t,e){const{r:i,g:s,b:n}=e!=null&&e.ignoreAlpha?t:tFe(t);return .2126*i+.7152*s+.0722*n}var mL;function Qpt(t,e=mL.High){return iFe(t,{ignoreAlpha:!0})>e?new fi([0,0,0,t.a]):new fi([255,255,255,t.a])}function emt(t,e){const i=eFe(t);i.l*=1-e;const s=qC(i),n=t.clone();return n.setColor(s),n.a=t.a,n}function tmt(t,e){const i=t.clone();return i.a*=e,i}function imt(t,e){const i=QLe(t);i.s*=e;const s=qC(i),n=t.clone();return n.setColor(s),n.a=t.a,n}function smt(t){return fi.toUnitRGBA(t)}function nmt(t){return qc(t[0],t[1],t[2],t.length>3?t[3]:1)}function rmt(t,e){const i=fi.toUnitRGBA(t);return i[3]*=e,i}function omt(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map(s=>typeof s=="string"?new fi(s):s)).length===1||e===1){const s=[],n=t[0];for(let r=0;r<e;r++)s.push(n.clone());return s}if(i.shuffle&&(t=Kre(Ue(t),i.seed)),t.length>=e){const s=[],n=(t.length-1)/(e-1);for(let r=0;r<e;r++){const o=Math.round(r*n);s.push(t[o].clone())}return s}return sFe(t,e,i)}function sFe(t,e,i={}){const s=[],n=t.length-1,r=Math.ceil((e-t.length)/n);e:for(let o=0;o<n;o++){const l=t[o],c=t[o+1];for(let f=1;f<=r;f++){const y=f/(r+1);if(s.push(nFe(l,c,y,i)),s.length+t.length===e)break e}}return[...t.map(o=>o.clone()),...Kre(s,i.seed??1)]}(function(t){t[t.Low=160]="Low",t[t.High=225]="High"})(mL||(mL={}));const Mk=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function nFe(t,e,i,s={}){const n=t.r,r=t.g,o=t.b,l=e.r,c=e.g,f=e.b,y=Math.round(n+(l-n)*i),_=Math.round(r+(c-r)*i),x=Math.round(o+(f-o)*i);if(!s.offset)return new fi([y,_,x]);const S=Zre(s.seed);return new fi([Mk(y,S),Mk(_,S),Mk(x,S)])}var PK,TK,IK,MK,AK,DK,kK,NK,$K,OK,gL,yL,RK,LK,FK,zK,qK,VK,GK,jK,BK,HK,UK,YK,XK,WK,ZK,KK,JK,QK,eJ,tJ,iJ,sJ,nJ,rJ,oJ,aJ,lJ,uJ,cJ,hJ,dJ,fJ,pJ,mJ,gJ,yJ,vJ,_J,bJ,xJ,wJ,SJ,EJ,CJ,PJ,TJ,IJ,MJ,AJ,DJ;(function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"})(PK||(PK={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(TK||(TK={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}(IK||(IK={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}(MK||(MK={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(AK||(AK={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(DK||(DK={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(kK||(kK={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(NK||(NK={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}($K||($K={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(OK||(OK={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(gL||(gL={})),function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"}(yL||(yL={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(RK||(RK={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(LK||(LK={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(FK||(FK={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}(zK||(zK={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(qK||(qK={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(VK||(VK={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(GK||(GK={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(jK||(jK={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}(BK||(BK={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(HK||(HK={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(UK||(UK={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(YK||(YK={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(XK||(XK={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(WK||(WK={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}(ZK||(ZK={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(KK||(KK={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(JK||(JK={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(QK||(QK={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(eJ||(eJ={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(tJ||(tJ={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(iJ||(iJ={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AloneLine=1]="AloneLine"}(sJ||(sJ={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(nJ||(nJ={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(rJ||(rJ={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}(oJ||(oJ={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(aJ||(aJ={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(lJ||(lJ={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(uJ||(uJ={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(cJ||(cJ={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}(hJ||(hJ={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(dJ||(dJ={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(fJ||(fJ={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(pJ||(pJ={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(mJ||(mJ={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(gJ||(gJ={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(yJ||(yJ={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(vJ||(vJ={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(_J||(_J={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(bJ||(bJ={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(xJ||(xJ={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(wJ||(wJ={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(SJ||(SJ={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(EJ||(EJ={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(CJ||(CJ={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(PJ||(PJ={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(TJ||(TJ={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(IJ||(IJ={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}(MJ||(MJ={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(AJ||(AJ={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(DJ||(DJ={}));const rFe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},vL={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:gL.Loop,repeatdelay:0,easing:yL.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function oFe(t){return typeof t=="function"}function amt(t,e,i,s){return oFe(t)?t(e,i,s):t}function lmt(t){return[t.r,t.g,t.b,t.a]}const aFe=` /-,
`;function kJ(t){let e=t.length;for(;e--;)if(!aFe.includes(t.charAt(e)))return!1;return!0}function lFe(t,e){const i=[];let s=0,n=-1;do if(n=t.indexOf("[",s),n>=s){if(n>s){const r=t.slice(s,n);i.push([r,null,kJ(r)])}if(s=n+1,n=t.indexOf("]",s),n>=s){if(n>s){const r=e[t.slice(s,n)];r&&i.push([null,r,!1])}s=n+1}}while(n!==-1);if(s<t.length){const r=t.slice(s);i.push([r,null,kJ(r)])}return i}function uFe(t,e,i,s){let n="",r=null;for(const o of e){const[l,c,f]=o;if(l)f?r=l:(r&&(n+=r,r=null),n+=l);else{let y=c;i!=null&&(y=Ffe(c,i));const _=t.attributes[y];_&&(r&&(n+=r,r=null),n+=_)}}return cFe(n,s)}function cFe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function umt(t,e,i,s,n,r,o=!0){const l=e/n,c=i/r,f=Math.ceil(l/2),y=Math.ceil(c/2);for(let _=0;_<r;_++)for(let x=0;x<n;x++){const S=4*(x+(o?r-_-1:_)*n);let P=0,A=0,k=0,$=0,F=0,G=0,V=0;const B=(_+.5)*c;for(let W=Math.floor(_*c);W<(_+1)*c;W++){const J=Math.abs(B-(W+.5))/y,re=(x+.5)*l,se=J*J;for(let oe=Math.floor(x*l);oe<(x+1)*l;oe++){let pe=Math.abs(re-(oe+.5))/f;const ue=Math.sqrt(se+pe*pe);ue>=-1&&ue<=1&&(P=2*ue*ue*ue-3*ue*ue+1,P>0&&(pe=4*(oe+W*e),V+=P*t[pe+3],k+=P,t[pe+3]<255&&(P=P*t[pe+3]/250),$+=P*t[pe],F+=P*t[pe+1],G+=P*t[pe+2],A+=P))}}s[S]=$/A,s[S+1]=F/A,s[S+2]=G/A,s[S+3]=V/k}}function hFe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function cmt(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function hmt(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function dmt(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function fmt(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function dFe(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const pmt=(t,e=0)=>t==null||isNaN(t)?e:t,mmt=(t,e)=>t??e,gmt=(t,e)=>t??e,ymt=t=>t.tintColor?hFe(t.tintColor):[255,255,255,1],vmt=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function _mt(){return nt(()=>import("./geometryEngineJSON-Dp-J5E7L.js").then(t=>t.g),__vite__mapDeps([239,174]),import.meta.url)}function bmt(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function xmt(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function wmt(t){let e="normal",i="normal";if(t){const s=t.toLowerCase();s.includes("italic")?e="italic":s.includes("oblique")&&(e="oblique"),s.includes("bold")?i="bold":s.includes("light")&&(i="lighter")}return{style:e,weight:i}}function Smt(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function NJ(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=NJ(e);if(i!=null)return i}break;case"CIMTextSymbol":return NJ(t.symbol);case"CIMSolidFill":return t.color}return null}function $J(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const s=$J(i);if(s!=null)return s}break}case"CIMTextSymbol":return $J(t.symbol);case"CIMSolidStroke":return t.color}}function OJ(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=OJ(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return OJ(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function Emt(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Cmt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function fFe(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Pmt=t=>t.includes("data:image/svg+xml");function Tmt(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function aA(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Imt(t,e,i,s,n,r,o=!0){const{infos:l}=r;let c=1,f=0,y=0,_=0,x=1;for(const{absoluteAnchorPoint:A,offsetX:k,offsetY:$,rotation:F,size:G,frameHeight:V,rotateClockWise:B,scaleSymbolsProportionally:W}of l)x=A?1:c,y=FJ(k,$,f,x,y),_=LJ(k,$,f,x,_),V&&(W||o)&&(c*=G/V),f=zJ(F,B,f);const S=FJ(s,n,f,x,y),P=LJ(s,n,f,x,_);return{size:t*c,rotation:zJ(e,i,f),offsetX:S,offsetY:P}}function pFe(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>pFe(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function mFe(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...rFe[e]];const i=vL[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function gFe(t){return t.split(" ").map(e=>Number(e))}function yFe(t){return typeof t=="string"?gFe(t):t}function vFe(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=yFe(t.dashTemplate)),t}function _L(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return _L(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return _L(i.symbol)}}return"Normal"}function Mmt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const s=i.size??vL.CIMVectorMarker.size;s>e&&(e=s);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const s=i.width;s!=null&&s>e&&(e=s);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&dFe(i.markerPlacement)){const s=i.size??vL.CIMVectorMarker.size;s>e&&(e=s)}break;case"CIMPictureFill":{const s=i.height;s!=null&&s>e&&(e=s)}}}return e}}}function Ffe(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function _Fe(t){return t.map(e=>({...e,propertyName:aA(e.propertyName)}))}function RJ(t){const e={};for(const i in t){const s=t[i];e[aA(i)]=s}return e}function LJ(t,e,i,s,n){const r=i*Math.PI/180;if(r){const o=Math.cos(r);return(Math.sin(r)*t+o*e)*s+n}return e*s+n}function FJ(t,e,i,s,n){const r=i*Math.PI/180;return r?(Math.cos(r)*t-Math.sin(r)*e)*s+n:t*s+n}function zJ(t,e,i){return e?i-t:i+t}function Amt(t,e,i){const s=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let r=e[aA(i)];if(r!=null&&(s?r=[r[0]/255,r[1]/255,r[2]/255,r[3]/255]:n&&(r*=Math.PI/180)),r==null&&(r=mFe(e.type,i.toLowerCase()),r!=null&&(s?r=[r[0]/255,r[1]/255,r[2]/255,r[3]]:n&&(r*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const l=o[i];l==null||(typeof l=="string"||typeof l=="number"||Array.isArray(l)?(r=l,r!=null&&(s?r=[r[0]/255,r[1]/255,r[2]/255,r[3]/255]:n&&(r*=Math.PI/180))):(r={valueExpressionInfo:l,defaultValue:r},r!=null&&(s?r={type:"Process",op:"ArcadeColor",value:r}:n&&(r={type:"Process",op:"Divide",left:r,right:180/Math.PI}))))}}if(r==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return r}function Dmt(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function bFe(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function VC(t){if(bFe(t))return t;const{originPosition:e,scale:i,translate:s}=t,n=i[0]??1,r=i[1]??1;return{originPosition:"lowerLeft",scale:[n,e==="lowerLeft"?r:-r,i[2]??1,i[3]??1],translate:[s[0]??0,s[1]??0,s[2]??0,s[3]??0]}}function xFe({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function wFe({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function SFe({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function EFe({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function GC({scale:t,translate:e},i){return i*t[0]+e[0]}function jC({scale:t,translate:e},i){return i*t[1]+e[1]}function yE({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function vE({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function dG(t,e){return t&&e?IFe:t&&!e?PFe:!t&&e?TFe:CFe}const CFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const s=e[0];let n=GC(t,s[0]),r=jC(t,s[1]);i[0]=[n,r];const{scale:o,originPosition:l}=t,c=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x]=e[y];n+=c*_,r+=f*x,i[y]=[n,r]}return i},PFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const s=e[0];let n=GC(t,s[0]),r=jC(t,s[1]);i[0]=[n,r,yE(t,s[2])];const{scale:o,originPosition:l}=t,c=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x,S]=e[y];n+=c*_,r+=f*x,i[y]=[n,r,yE(t,S)]}return i},TFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const s=e[0];let n=GC(t,s[0]),r=jC(t,s[1]);i[0]=[n,r,vE(t,s[2])];const{scale:o,originPosition:l}=t,c=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x,S]=e[y];n+=c*_,r+=f*x,i[y]=[n,r,vE(t,S)]}return i},IFe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const s=e[0];let n=GC(t,s[0]),r=jC(t,s[1]);i[0]=[n,r,yE(t,s[2]),vE(t,s[3])];const{scale:o,originPosition:l}=t,c=o[0],f=l==="lowerLeft"?o[1]:-o[1];for(let y=1;y<e.length;y++){const[_,x,S,P]=e[y];n+=c*_,r+=f*x,i[y]=[n,r,yE(t,S),vE(t,P)]}return i};function zfe(t,e,i){const s=new Array(i.length);for(let n=0;n<i.length;n++)s[n]=e(t,i[n]);return s}function kmt(t,e,i){const s=VC(t);return e.x=xFe(s,i.x),e.y=wFe(s,i.y),i.z!=null&&(e.z=SFe(s,i.z)),i.m!=null&&(e.m=EFe(s,i.m)),e}function MFe(t,e,i,s=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const r=VC(t);e.points=dG(s,n)(r,i.points),e.hasZ=s,e.hasM=n}return e}function AFe(t,e,i,s=(i==null?void 0:i.z)!=null,n=(i==null?void 0:i.m)!=null){if(i==null)return e;const r=VC(t);return e.x=GC(r,i.x),e.y=jC(r,i.y),s&&(e.z=yE(r,i.z)),n&&(e.m=vE(r,i.m)),e}function DFe(t,e,i,s=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const r=VC(t);e.rings=zfe(r,dG(s,n),i.rings),e.hasZ=s,e.hasM=n}return e}function kFe(t,e,i,s=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const r=VC(t);e.paths=zfe(r,dG(s,n),i.paths),e.hasZ=s,e.hasM=n}return e}function NFe(t,e,i,s,n){if(t==null)return null;const r=t.referencesGeometry()&&n?$Fe(e,s,n):e,o=t.repurposeFeature(r);try{return t.evaluate({...i,$feature:o},t.services)}catch(l){return zt.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const Ak=new Map;function $Fe(t,e,i){const{transform:s,hasZ:n,hasM:r}=i;Ak.has(e)||Ak.set(e,OFe(e));const o=Ak.get(e)(t.geometry,s,n,r);return{...t,geometry:o}}function OFe(t){const e={};switch(t){case"esriGeometryPoint":return(i,s,n,r)=>AFe(s,e,i,n,r);case"esriGeometryPolygon":return(i,s,n,r)=>DFe(s,e,i,n,r);case"esriGeometryPolyline":return(i,s,n,r)=>kFe(s,e,i,n,r);case"esriGeometryMultipoint":return(i,s,n,r)=>MFe(s,e,i,n,r);default:return zt.getLogger("esri.views.2d.support.arcadeOnDemand").error(new rt("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const RFe=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:s,a:n}=t;return[e,i,s,255*n]};let qfe=class er{static findApplicableOverrides(e,i,s){if(e&&i){if(e.primitiveName){let n=!1;for(const r of s)if(r.primitiveName===e.primitiveName){n=!0;break}if(!n)for(const r of i)r.primitiveName===e.primitiveName&&s.push(r)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)er.findApplicableOverrides(n,i,s);if(e.symbolLayers)for(const n of e.symbolLayers)er.findApplicableOverrides(n,i,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const n of e.effects)er.findApplicableOverrides(n,i,s);if(e.markerPlacement&&er.findApplicableOverrides(e.markerPlacement,i,s),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const n of e.markerGraphics)er.findApplicableOverrides(n,i,s),er.findApplicableOverrides(n.symbol,i,s)}else e.type==="CIMCharacterMarker"?er.findApplicableOverrides(e.symbol,i,s):e.type==="CIMHatchFill"?er.findApplicableOverrides(e.lineSymbol,i,s):e.type==="CIMPictureMarker"&&er.findApplicableOverrides(e.animatedSymbolProperties,i,s)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&vFe(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const s=RJ(e),n=e.primitiveName,r=[];for(const o of i)o.primitiveName===n&&r.push(RJ(o));return{type:"cim-effect-param",effect:s,overrides:_Fe(r)}}static async resolveSymbolOverrides(e,i,s,n,r,o,l){if(!(e!=null&&e.symbol))return null;let{symbol:c,primitiveOverrides:f}=e;const y=!!f;if(!y&&!n)return c;c=Ue(c),f=Ue(f);let _=!0;if(i||(i={attributes:{}},_=!1),y){if(_||(f=f.filter(x=>{var S;return!((S=x.valueExpressionInfo)!=null&&S.expression.includes("$feature"))})),l||(f=f.filter(x=>{var S;return!((S=x.valueExpressionInfo)!=null&&S.expression.includes("$view"))})),f.length>0){const x={spatialReference:s,fields:fFe(i.attributes),geometryType:r};await er.createRenderExpressions(f,x),er.evaluateOverrides(f,i,r??"esriGeometryPoint",o,l)}er.applyOverrides(c,f)}return n&&er.applyDictionaryTextOverrides(c,i,n,null),c}static async createRenderExpressions(e,i){const s=[];for(const n of e){const r=n.valueExpressionInfo;if(!r||er._expressionToRenderExpression.has(r.expression))continue;const o=qke(r.expression,i.spatialReference,i.fields);s.push(o),o.then(l=>er._expressionToRenderExpression.set(r.expression,l))}s.length>0&&await Promise.all(s)}static evaluateOverrides(e,i,s,n,r){const o={$view:{scale:r==null?void 0:r.scale}};for(const l of e){l.value&&typeof l.value=="object"&&Afe(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=RFe(l.value));const c=l.valueExpressionInfo;if(!c)continue;const f=er._expressionToRenderExpression.get(c.expression);f&&(l.value=NFe(f,i,o,s,n))}}static applyDictionaryTextOverrides(e,i,s,n,r="Normal"){if(e!=null&&e.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const l of o)l&&l.type==="CIMVectorMarker"&&er.applyDictionaryTextOverrides(l,i,s,n,e.type==="CIMTextSymbol"?e.textCase:r)}break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)return;for(const l of o)l&&er.applyDictionaryTextOverrides(l,i,s,n)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const l=lFe(o,s);e.textString=uFe(i,l,n,r)}}}}static applyOverrides(e,i,s,n){if(e.primitiveName){for(const r of i)if(r.primitiveName===e.primitiveName){const o=aA(r.propertyName);if(n&&n.push({cim:e,nocapPropertyName:o,value:e[o]}),s){let l=!1;for(const c of s)c.primitiveName===e.primitiveName&&(l=!0);l||s.push(r)}r.value!=null&&(e[o]=r.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const r of e.effects)er.applyOverrides(r,i,s,n);if(e.symbolLayers)for(const r of e.symbolLayers)er.applyOverrides(r,i,s,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const r of e.effects)er.applyOverrides(r,i,s,n);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const r of e.markerGraphics)er.applyOverrides(r,i,s,n),er.applyOverrides(r.symbol,i,s,n)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const s of e)s.value!==void 0&&(i+=`${s.primitiveName}${s.propertyName}${JSON.stringify(s.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map(s=>Number(s));if(e==="Color"){const s=new fi(i).toRgba();return s[3]*=255,s}return i}};qfe._expressionToRenderExpression=new Map;const qJ="esri.renderers.support.DictionaryLoader",LFe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Vfe=class{constructor(e,i,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new aLe(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){var _;let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{s=await this._dictionaryPromise}catch(x){if(ad(x))return this._dictionaryPromise=null,null}const n=(_=this._dictionaryVersion)==null?void 0:_.greaterEqual(4,0),r={};if(this.fieldMap)for(const x of this._symbolFields){const S=Ffe(this.fieldMap[x],this._fieldIndex);if(S){const P=e.attributes[S];r[x]=n?P:P!=null?""+e.attributes[S]:""}else r[x]=""}let o=null;try{o=s==null?void 0:s(r,i)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const l=o.split(";"),c=[],f=[];for(let x=0;x<l.length;x++){const S=l[x];if(S){if(S.includes("po:")){const P=S.slice(3).split("|");if(P.length===3){const A=P[0],k=P[1];let $=P[2];const F="countrylabel";if(A===F&&k==="TextString"){if(this.fieldMap!=null){let G=this.fieldMap[F];G==null&&(G=F,this.fieldMap[G]=G),e.attributes[G]=$}continue}if(k==="DashTemplate")$=$.split(" ").map(G=>Number(G));else if(k==="Color"){const G=new fi($).toRgba();$=[G[0],G[1],G[2],255*G[3]]}else $=Number($);f.push({primitiveName:A,propertyName:k,value:$,defaultValue:null})}}else if(S.includes("|")){for(const P of S.split("|"))if(this._itemNames.has(P)){c.push(P);break}}else if(this._itemNames.has(S))c.push(S);else if(x===0){c.length=0;let P="Invalid_P";e.geometry!=null&&(Yb(e.geometry)?P="Invalid_A":xV(e.geometry)&&(P="Invalid_L")),c.push(P);break}}}const y=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point";return this._cimPartsToCIMSymbol(e,c,f,y,i)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void zt.getLogger(qJ).error("no valid URL!");const i=Qs(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:s}]=await Promise.all([i,av()]);if(!s)throw this._dictionaryPromise=null,new rt("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:r,expression:o,itemsNames:l}=s,c=o;let f=!1;r&&(this._dictionaryVersion=hfe.parse(r),f=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+s.cimRefTemplateUrl,this._itemNames=new Set(l),this._symbolFields=n.symbol;const y={};if(this.config){const S=this.config;for(const P in S)y[P]=S[P]}if(n.configuration)for(const S of n.configuration)y.hasOwnProperty(S.name)||(y[S.name]=S.value);const _=[];if(e!=null&&e.fields&&this.fieldMap)for(const S in this.fieldMap){const P=this.fieldMap[S],A=e.fields.filter(k=>k.name.toLowerCase()===(P==null?void 0:P.toLowerCase()));A.length>0&&_.push({...A[0],type:f?A[0].type:"esriFieldTypeString"})}_.length>0&&(this._fieldIndex=new dfe(_));const x=Vke(c,e!=null?e.spatialReference:null,_,y).then(S=>{const P={scale:0};return(A,k)=>{if(S==null)return null;const $=S.repurposeFeature({geometry:null,attributes:A});return P.scale=k!=null?k.scale??void 0:void 0,S.evaluate({$feature:$,$view:P},S.services)}}).catch(S=>(zt.getLogger(qJ).error("Creating dictionary expression failed:",S),null));return this._dictionaryPromise=x,x}async _cimPartsToCIMSymbol(e,i,s,n,r){const o=new Array(i.length);for(let f=0;f<i.length;f++)o[f]=this._getSymbolPart(i[f],r);let l=await Promise.all(o);const c=this.fieldMap;if(c){l=Ue(l);for(const f of l)qfe.applyDictionaryTextOverrides(f,e,c,this._fieldIndex,_L(f))}return new Fg({data:FFe(l,s,n)})}async _getSymbolPart(e,i){const s=this._symbolCache.get(e);if(s)return s;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(o=>o.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),r=Qs(n,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,r),r.finally(()=>this._ongoingRequests.delete(e));try{const o=await r;return this._symbolCache.put(e,o.data),o.data}catch(o){throw o}}};function FFe(t,e,i){if(!t||t.length===0)return null;const s={...t[0]};if(t.length>1){s.effects=null,s.symbolLayers=[];for(const n of t){const r=n;if(r.effects!=null)for(const o of r.symbolLayers)o.effects==null?o.effects=r.effects:o.effects.unshift(...r.effects);s.symbolLayers.unshift(...r.symbolLayers)}}return i&&(s.callout=LFe),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:e}}var bL;let wh=bL=class extends xx(cm){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Vfe(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,s){s!=null&&s.origin||super.writeVisualVariables(t,e,i,s)}clone(){return new bL({config:Ue(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Ue(this.fieldMap),url:Ue(this.url),visualVariables:Ue(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Ja(t,e,this.scaleExpression);for(const i in this.fieldMap){const s=this.fieldMap[i];e.has(s)&&t.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};I([N({type:Vfe})],wh.prototype,"_loader",null),I([N({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],wh.prototype,"config",void 0),I([N({type:Object,json:{write:!0}})],wh.prototype,"fieldMap",void 0),I([N({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],wh.prototype,"scaleExpression",void 0),I([Ft("scaleExpression")],wh.prototype,"writeData",null),I([N({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],wh.prototype,"scaleExpressionTitle",void 0),I([N({type:String,json:{write:!0}})],wh.prototype,"url",void 0),I([Ft("visualVariables")],wh.prototype,"writeVisualVariables",null),wh=bL=I([De("esri.renderers.DictionaryRenderer")],wh);const zFe=wh;var xL;let rp=xL=class extends wt{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(zt.getLogger(this).error(".field: field must be a string value"),null):mC(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new xL({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};I([N({type:fi,json:{type:[Number],write:!0}})],rp.prototype,"color",void 0),I([N({type:String,json:{write:!0}})],rp.prototype,"field",void 0),I([Sn("field")],rp.prototype,"castField",null),I([N({type:String,json:{write:!0}})],rp.prototype,"label",void 0),I([N({type:String,json:{write:!0}})],rp.prototype,"valueExpression",void 0),I([N({type:String,json:{write:!0}})],rp.prototype,"valueExpressionTitle",void 0),rp=xL=I([De("esri.renderers.support.AttributeColorInfo")],rp);const Gfe=rp;var wL;let h9=wL=class extends wt{constructor(){super(...arguments),this.unit=null}clone(){return new wL({unit:this.unit})}};I([N({type:String,json:{write:!0}})],h9.prototype,"unit",void 0),h9=wL=I([De("esri.renderers.support.DotDensityLegendOptions")],h9);const qFe=h9;var SL;let Ol=SL=class extends xx(cm){constructor(t){super(t),this.attributes=null,this.backgroundColor=new fi([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Ml,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new um({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new SL({attributes:Ue(this.attributes),backgroundColor:Ue(this.backgroundColor),dotBlendingEnabled:Ue(this.dotBlendingEnabled),dotShape:Ue(this.dotShape),dotSize:Ue(this.dotSize),dotValue:Ue(this.dotValue),legendOptions:Ue(this.legendOptions),outline:Ue(this.outline),referenceScale:Ue(this.referenceScale),seed:Ue(this.seed),visualVariables:Ue(this.visualVariables),authoringInfo:Ue(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Ja(t,e,i.valueExpression),i.field&&t.add(i.field)}};I([N({type:[Gfe],json:{write:!0}})],Ol.prototype,"attributes",void 0),I([N({type:fi,json:{write:!0}})],Ol.prototype,"backgroundColor",void 0),I([N({type:Boolean,json:{write:!0}})],Ol.prototype,"dotBlendingEnabled",void 0),I([N({type:String,json:{write:!1}})],Ol.prototype,"dotShape",void 0),I([N({type:Number,json:{write:!0}})],Ol.prototype,"dotSize",void 0),I([N({type:qFe,json:{write:!0}})],Ol.prototype,"legendOptions",void 0),I([N({type:Ml,json:{default:null,write:!0}})],Ol.prototype,"outline",void 0),I([N({type:Number,json:{write:!0}})],Ol.prototype,"dotValue",void 0),I([N({type:Number,json:{write:!0}})],Ol.prototype,"referenceScale",void 0),I([N({type:Number,json:{write:!0}})],Ol.prototype,"seed",void 0),I([ni({dotDensity:"dot-density"})],Ol.prototype,"type",void 0),Ol=SL=I([De("esri.renderers.DotDensityRenderer")],Ol);const VFe=Ol;var EL;let j3=EL=class extends wt{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new EL({color:this.color&&this.color.clone(),ratio:this.ratio})}};I([N({type:fi,json:{type:[wn],default:null,write:!0}})],j3.prototype,"color",void 0),I([N({type:Number,json:{write:!0}})],j3.prototype,"ratio",void 0),j3=EL=I([De("esri.renderers.support.HeatmapColorStop")],j3);const d9=j3;let ib=class extends Hs(wt){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};I([N({type:String,json:{write:!0}})],ib.prototype,"minLabel",void 0),I([N({type:String,json:{write:!0}})],ib.prototype,"maxLabel",void 0),I([N({type:String,json:{write:!0}})],ib.prototype,"title",void 0),ib=I([De("esri.renderers.support.HeatmapLegendOptions")],ib);const fG=2.4;function GFe(t){return Uc(t*fG)}function jFe(t){return zDe(t)/fG}function BFe(t,e,i,s){let{color:n,ratio:r}=e,{color:o,ratio:l}=i;l===r&&(l===1?r-=1e-6:l+=1e-6);const c=Hc((s-r)/(l-r),0,1);oA(t,n.toArray(),o.toArray(),c)}function Omt(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:l})=>l>=0&&l<=1).sort((l,c)=>l.ratio-c.ratio).map(({color:l,ratio:c})=>({color:l,ratio:Math.max(c,.001)})),t.length<1)return i;let s=t[0],n=t[0],r=1;const o=hm();for(let l=0;l<512;l++){const c=(l+.5)/512;for(;c>n.ratio&&r<t.length;)s=n,n=t[r++];BFe(o,s,n,c),i.set(o,4*l)}return i}function Rmt(t,e,i){const s=Math.sqrt(t**2+e**2)/i;return s>1?0:3/(Math.PI*i**2)*(1-s**2)**2}function Lmt(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var CL;function VJ(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:s}=t;if(e!=null||i!=null||s!=null){const{blurRadius:n,maxPixelIntensity:r,minPixelIntensity:o,...l}=t;return l}}return t}let ko=CL=class extends cm{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new d9({ratio:0,color:new fi("rgba(255, 140, 0, 0)")}),new d9({ratio:.75,color:new fi("rgba(255, 140, 0, 1)")}),new d9({ratio:.9,color:new fi("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return VJ(t)}get blurRadius(){return jFe(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",GFe(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(fG**2*this.blurRadius**4)}read(t,e){t=VJ(t),super.read(t,e)}getSymbol(){return new Lu}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,s=this.valueExpression;i&&typeof i=="string"&&_l(t,e,i),s&&typeof s=="string"&&await Ja(t,e,s)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new CL({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:Ue(this.colorStops),field:this.field,legendOptions:Ue(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};I([N({type:eG,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ko.prototype,"authoringInfo",void 0),I([N({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ko.prototype,"blurRadius",null),I([N({type:[d9],json:{write:!0}})],ko.prototype,"colorStops",void 0),I([N({type:String,json:{write:!0}})],ko.prototype,"field",void 0),I([N({type:ib,json:{write:!0}})],ko.prototype,"legendOptions",void 0),I([N({type:Number,json:{write:!0}})],ko.prototype,"maxDensity",void 0),I([N({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ko.prototype,"maxPixelIntensity",null),I([N({type:Number,json:{write:!0}})],ko.prototype,"minDensity",void 0),I([N({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ko.prototype,"minPixelIntensity",null),I([N({type:Number,cast:fs,json:{write:!0}})],ko.prototype,"radius",void 0),I([N({type:Number,range:{min:0},json:{default:0,write:!0}})],ko.prototype,"referenceScale",void 0),I([ni({heatmap:"heatmap"})],ko.prototype,"type",void 0),I([N({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],ko.prototype,"valueExpression",void 0),I([N({type:String})],ko.prototype,"valueExpressionTitle",void 0),I([N({readOnly:!0})],ko.prototype,"_pixelIntensityToDensity",null),ko=CL=I([De("esri.renderers.HeatmapRenderer")],ko);const jfe=ko;let vy=class extends Hs(wt){constructor(){super(...arguments),this.color=new fi([0,0,0,0]),this.label=null,this.threshold=0}};I([N({type:fi,json:{write:!0}})],vy.prototype,"color",void 0),I([N({type:String,json:{write:!0}})],vy.prototype,"label",void 0),I([N({type:Number,range:{min:0,max:1},json:{write:!0}})],vy.prototype,"threshold",void 0),vy=I([De("esri.renderers.support.OthersCategory")],vy);const HFe={base:bx,key:"type",typeMap:{size:sA,opacity:tG}};let Rl=class extends xx(Hs(cm)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new fi([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new vy,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var e;return new Lu({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(gl)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((i,s)=>i+s.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const s of this.attributes)s.valueExpression&&await Ja(e,i,s.valueExpression),s.field&&e.add(s.field)}};I([N({type:[Gfe],json:{write:!0}})],Rl.prototype,"attributes",void 0),I([N(rG)],Rl.prototype,"backgroundFillSymbol",void 0),I([N({type:fi,json:{write:!0}})],Rl.prototype,"defaultColor",void 0),I([N({type:String,json:{write:!0}})],Rl.prototype,"defaultLabel",void 0),I([N({type:Number,range:{min:0,max:1},json:{write:!0}})],Rl.prototype,"holePercentage",void 0),I([N({type:vy,json:{write:!0}})],Rl.prototype,"othersCategory",void 0),I([N({type:oG,json:{write:!0}})],Rl.prototype,"legendOptions",void 0),I([N({type:Ml,json:{default:null,write:!0}})],Rl.prototype,"outline",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],Rl.prototype,"size",void 0),I([ni({pieChart:"pie-chart"})],Rl.prototype,"type",void 0),I([N({types:[HFe]})],Rl.prototype,"visualVariables",void 0),Rl=I([De("esri.renderers.PieChartRenderer")],Rl);const UFe=Rl;var PL;let ey=PL=class extends xx(cm){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new PL({description:this.description,label:this.label,symbol:Ue(this.symbol),visualVariables:Ue(this.visualVariables),authoringInfo:Ue(this.authoringInfo)})}};I([N({type:String,json:{write:!0}})],ey.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],ey.prototype,"label",void 0),I([N(nG)],ey.prototype,"symbol",void 0),I([ni({simple:"simple"})],ey.prototype,"type",void 0),ey=PL=I([De("esri.renderers.SimpleRenderer")],ey);const wx=ey,YFe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function TL(t){return t instanceof Ei}function GJ(t){return t instanceof ui?Object.keys(t.items):TL(t)?wl(t).keys():t?Object.keys(t):[]}function f4(t,e){return t instanceof ui?t.items[e]:t[e]}function XFe(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function OS(t){return t?t.declaredClass:null}function Bfe(t,e){var _;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const s=GJ(t),n=GJ(e);if(s.length===0&&n.length===0)return;if(!s.length||!n.length||XFe(t,e))return{type:"complete",oldValue:t,newValue:e};const r=n.filter(x=>!s.includes(x)),o=s.filter(x=>!n.includes(x)),l=s.filter(x=>n.includes(x)&&f4(t,x)!==f4(e,x)).concat(r,o).sort(),c=OS(t);if(c&&YFe.has(c)&&l.length)return{type:"complete",oldValue:t,newValue:e};let f;const y=TL(t)&&TL(e);for(const x of l){const S=f4(t,x),P=f4(e,x);let A;if((y||typeof S!="function"&&typeof P!="function")&&S!==P&&(S!=null||P!=null)){if(i&&i[x]&&typeof i[x]=="function")A=(_=i[x])==null?void 0:_.call(i,S,P);else if(S instanceof Date&&P instanceof Date){if(S.getTime()===P.getTime())continue;A={type:"complete",oldValue:S,newValue:P}}else A=typeof S=="object"&&typeof P=="object"&&OS(S)===OS(P)?Bfe(S,P):{type:"complete",oldValue:S,newValue:P};A!=null&&(f!=null?f.diff[x]=A:f={type:"partial",diff:{[x]:A}})}}return f}function qmt(t,e){return WFe(t,e)}function WFe(t,e){if(t==null)return!1;const i=e.split(".");let s=t;for(const n of i){if(s.type==="complete")return!0;if(s.type!=="partial")return!1;{const r=s.diff[n];if(!r)return!1;s=r}}return!0}function Vmt(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function Hfe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&OS(t)!==OS(e)?{type:"complete",oldValue:t,newValue:e}:Bfe(t,e)}function p4(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!p4(i))return!1;for(const i of e.removed)if(!p4(i))return!1;for(const i of e.changed)if(!p4(i))return!1;return!0}case"partial":for(const e in t.diff)if(!p4(t.diff[e]))return!1;return!0}}let sb=class extends Hs(wt){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};I([N(a9)],sb.prototype,"value",void 0),I([N(a9)],sb.prototype,"value2",void 0),I([N(a9)],sb.prototype,"value3",void 0),sb=I([De("esri.renderers.support.UniqueValue")],sb);const i2=sb;let b0=class extends Hs(wt){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(s=>new i2({value:s})):i==="object"?e[0]instanceof i2?e:e.map(s=>new i2(s)):null}};I([N({type:String,json:{write:!0}})],b0.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],b0.prototype,"label",void 0),I([N(nA)],b0.prototype,"symbol",void 0),I([N({type:[i2],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new i2({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const s of t){const n=[s.value,s.value2,s.value3].filter(gl).map(r=>r.toString());i.push(n)}e.values=i}}}})],b0.prototype,"values",void 0),I([Sn("values")],b0.prototype,"castValues",null),b0=I([De("esri.renderers.support.UniqueValueClass")],b0);const Ufe=b0;let B3=class extends Hs(wt){constructor(e){super(e),this.heading=null,this.classes=null}};I([N({type:String,json:{write:!0}})],B3.prototype,"heading",void 0),I([N({type:[Ufe],json:{write:!0}})],B3.prototype,"classes",void 0),B3=I([De("esri.renderers.support.UniqueValueGroup")],B3);const IL=B3;var ML;let ty=ML=class extends wt{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new ML({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};I([N({type:String,json:{write:!0}})],ty.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],ty.prototype,"label",void 0),I([N(nG)],ty.prototype,"symbol",void 0),I([N(a9)],ty.prototype,"value",void 0),ty=ML=I([De("esri.renderers.support.UniqueValueInfo")],ty);const RS=ty,jJ=new Map;async function ZFe(t,e){try{return{data:(await eze(t,e)).data,baseUrl:zTe(t),styleUrl:t}}catch(i){return Nh(i),null}}function KFe(t,e,i){var c;const s=e.portal!=null?e.portal:Ou.getDefault();let n;const r=`${s.url} - ${(c=s.user)==null?void 0:c.username} - ${t}`,o=jJ.get(r);if(o)return o;const l=JFe(t,s,i).then(f=>(n=f,f.fetchData())).then(f=>({data:f,baseUrl:n.itemUrl??"",styleName:t}));return jJ.set(r,l),l}function JFe(t,e,i){return e.load(i).then(()=>{const s=new Rh({disableExtraQuery:!0,query:`owner:${BJ} AND type:${HJ} AND typekeywords:"${t}"`});return e.queryItems(s,i)}).then(({results:s})=>{var o;let n=null;const r=t.toLowerCase();if(s&&Array.isArray(s)){for(const l of s)if(((o=l.typeKeywords)==null?void 0:o.some(f=>f.toLowerCase()===r))&&l.type===HJ&&l.owner===BJ){n=l;break}}if(!n)throw new rt("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function QFe(t,e,i){return(t==null?void 0:t.styleUrl)!=null?ZFe(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?KFe(t.styleName,e,i):Promise.reject(new rt("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Hmt(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function Umt(t,e,i=["gltf"]){if(e==="cimRef")return encodeURI(t.cimRef);if(t.formatInfos&&!ht("enable-feature:force-wosr"))for(const s of i){const n=t.formatInfos.find(r=>r.type===s);if(n)return n.href}return encodeURI(t.webRef)}function eze(t,e){const i={responseType:"json",query:{f:"json"},...e};return Qs(Fc(t),i)}const BJ="esri_en",HJ="Style",Ymt="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var H3;const Yfe="esri.renderers.UniqueValueRenderer",s0=()=>zt.getLogger(Yfe),UJ="uvInfos-watcher",YJ="uvGroups-watcher",tze=",",ize=Zo(RS);function sze(t){const{field1:e,field2:i,field3:s,fieldDelimiter:n,uniqueValueInfos:r,valueExpression:o}=t,l=!(!e||!i);return[{classes:(r??[]).map(c=>{var $;const{symbol:f,label:y,value:_,description:x}=c,[S,P,A]=l?(($=_==null?void 0:_.toString())==null?void 0:$.split(n||""))||[]:[_],k=[];return(e||o)&&k.push(S),i&&k.push(P),s&&k.push(A),{symbol:f,label:y,values:[k],description:x}})}]}function M_(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let Bn=H3=class extends xx(cm){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let s=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let r=0;r<i.length;r++){const o=e.find(l=>l.value===i[r].value);o?Hfe(o,i[r])?(n.changed.push({type:"complete",oldValue:o,newValue:i[r]}),s=!0):n.unchanged.push({oldValue:o,newValue:i[r]}):(n.added.push(i[r]),s=!0)}for(let r=0;r<e.length;r++)i.find(o=>o.value===e[r].value)||(n.removed.push(e[r]),s=!0);return s?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:mC(t)}writeField(t,e,i,s){typeof t=="string"?e[i]=t:s!=null&&s.messages?s.messages.push(new rt("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):s0().error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Ou.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const s=fx(e.styleUrl,i);return Object.freeze({styleUrl:s})}}writeStyleOrigin(t,e,i,s){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=MC(t.styleUrl,s))}set uniqueValueGroups(t){this.styleOrigin?s0().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?s0().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var s;if(this.styleOrigin)return void s0().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?ize(t):new RS({value:t,symbol:Ude(e)}),(s=this.uniqueValueInfos)==null||s.push(i),this._valueInfoMap[M_(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void s0().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const s=e[i];if(String(s.value)===String(t)){delete this._valueInfoMap[M_(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await av()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void s0().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await av(),{arcadeUtils:r}=n;r.hasGeometryOperations(this.valueExpression)&&await r.enableGeometryOperations(),i={...i,arcade:n}}const s=this._getUniqueValueInfo(t,i);return(s==null?void 0:s.symbol)||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){var s;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(s=this.uniqueValueInfos)==null?void 0:s.reduce((n,r)=>n+r.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new H3({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Ue(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Ue(this.visualVariables),legendOptions:Ue(this.legendOptions),authoringInfo:Ue(this.authoringInfo),backgroundFillSymbol:Ue(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=Ue(this.uniqueValueInfos),i=Ue(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(Ue(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(t,e)),Ja(t,e,this.valueExpression)];_l(t,e,this.field),_l(t,e,this.field2),_l(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return QFe(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(s=>{const n=new Ov({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:s.name});this.defaultSymbol||s.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const r=new RS({value:s.name,symbol:n});e.push(r),this._valueInfoMap[M_(s.name)]=r}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",tze)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[M_(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(UJ);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(xi(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(s,n)=>{s!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,UJ)}}_watchUniqueValueGroups(){this.removeHandles(YJ);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(xi(()=>({classes:i.classes}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const s of i.classes??[])e.push(xi(()=>({symbol:s.symbol,values:s.values,label:s.label,description:s.description}),(n,r)=>{n!==r&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,YJ)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:s,fieldDelimiter:n,uniqueValueGroups:r,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!e||!i);for(const c of r)for(const f of c.classes??[]){const{symbol:y,label:_,values:x,description:S}=f;for(const P of x??[]){const{value:A,value2:k,value3:$}=P,F=[A];i&&F.push(k),s&&F.push($);const G=l?F.join(n||""):F[0]??void 0;t.push(new RS({symbol:y,label:_,value:G,description:S}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:s,fieldDelimiter:n,uniqueValueInfos:r}=this;if(!e&&!s||!r.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),l=r.map(f=>{var $;const{symbol:y,label:_,value:x,description:S}=f,[P,A,k]=o?(($=x==null?void 0:x.toString())==null?void 0:$.split(n||""))||[]:[x];return new Ufe({symbol:y,label:_,description:S,values:[new i2({value:P,value2:A,value3:k})]})}),c=[new IL({classes:l})];t&&Object.freeze(c),this._set("uniqueValueGroups",c),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:s,spatialReference:n,arcade:r,timeZone:o}=e??{};let l=this._cache.compiledFunc;const c=r.arcadeUtils;if(!l){const y=c.createSyntaxTree(this.valueExpression);l=c.createFunction(y),this._cache.compiledFunc=l}const f=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:s,spatialReference:n}),o));return this._valueInfoMap[M_(f)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let s;if(this.field2){const n=this.field2,r=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),r&&o.push(i[r]),s=o.join(this.fieldDelimiter||"")}else e&&(s=i[e]);return this._valueInfoMap[M_(s)]}static fromPortalStyle(t,e){const i=new H3(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||Ou.getDefault());const s=i.populateFromStyle();return s.catch(n=>{s0().error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),s}static fromStyleUrl(t,e){const i=new H3(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const s=i.populateFromStyle();return s.catch(n=>{s0().error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),s}};I([N({readOnly:!0})],Bn.prototype,"_cache",null),I([ni({uniqueValue:"unique-value"})],Bn.prototype,"type",void 0),I([N(rG)],Bn.prototype,"backgroundFillSymbol",void 0),I([N({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Bn.prototype,"field",null),I([Sn("field")],Bn.prototype,"castField",null),I([Ft("field")],Bn.prototype,"writeField",null),I([N({type:String,value:null,json:{write:!0}})],Bn.prototype,"field2",null),I([N({type:String,value:null,json:{write:!0}})],Bn.prototype,"field3",null),I([N({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Bn.prototype,"orderByClassesEnabled",void 0),I([N({type:String,value:null,json:{write:!0}})],Bn.prototype,"valueExpression",null),I([N({type:String,json:{write:!0}})],Bn.prototype,"valueExpressionTitle",void 0),I([N({type:oG,json:{write:!0}})],Bn.prototype,"legendOptions",void 0),I([N({type:String,json:{write:!0}})],Bn.prototype,"defaultLabel",void 0),I([N(yq({...nA},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Bn.prototype,"defaultSymbol",null),I([N({type:String,value:null,json:{write:!0}})],Bn.prototype,"fieldDelimiter",null),I([N({type:Ou,readOnly:!0})],Bn.prototype,"portal",void 0),I([At("portal",["styleName"])],Bn.prototype,"readPortal",null),I([N({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Bn.prototype,"styleOrigin",void 0),I([At("styleOrigin",["styleName","styleUrl"])],Bn.prototype,"readStyleOrigin",null),I([Ft("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Bn.prototype,"writeStyleOrigin",null),I([N({type:[IL],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||sze(e)).map(s=>IL.fromJSON(s,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Bn.prototype,"uniqueValueGroups",null),I([N({type:[RS],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Bn.prototype,"uniqueValueInfos",null),Bn=H3=I([De(Yfe)],Bn);const pG=Bn,lA={key:"type",base:cm,typeMap:{heatmap:jfe,simple:wx,"unique-value":pG,"class-breaks":cfe,"dot-density":VFe,dictionary:zFe,"pie-chart":UFe},errorContext:"renderer"},nze={key:"type",base:cm,typeMap:{simple:wx,"unique-value":pG,"class-breaks":cfe,heatmap:jfe},errorContext:"renderer",validate:rze};function rze(t){switch(t.type){case"simple":return oze(t);case"unique-value":return aze(t);case"class-breaks":return lze(t);case"heatmap":return t}}function oze(t){if(t.symbol)return t;zt.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function aze(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter(({symbol:s,label:n},r)=>(s||zt.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${r}] ${n}) without a symbol from web scene.`),!!s));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function lze(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter(({symbol:s,label:n},r)=>(s||zt.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${r}] ${n}) without a symbol from web scene.`),!!s));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function Xmt(t,e){return _E(t,null,e)}const uze=ix({types:lA});function _E(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new Jh("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):uze(t,e,i):null}var AL;let iy=AL=class extends wt{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new AL({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};I([N({type:String,json:{write:!0}})],iy.prototype,"expression",void 0),I([N({type:String,json:{write:!0}})],iy.prototype,"name",void 0),I([N({type:["boolean","date","number","string"],json:{write:!0}})],iy.prototype,"returnType",void 0),I([N({type:String,json:{write:!0}})],iy.prototype,"title",void 0),iy=AL=I([De("esri.form.ExpressionInfo")],iy);const cze=iy;let sy=class extends wt{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};I([N({type:String,json:{write:!0}})],sy.prototype,"description",void 0),I([N({type:String,json:{write:!0}})],sy.prototype,"label",void 0),I([N()],sy.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],sy.prototype,"visibilityExpression",void 0),sy=I([De("esri.form.elements.Element")],sy);const uv=sy;let f9=class extends Hs(wt){constructor(e){super(e),this.type=null}};I([N()],f9.prototype,"type",void 0),f9=I([De("esri.form.elements.inputs.attachments.Input")],f9);const Sg=f9,uA=["any","capture","upload"];let nb=class extends Sg{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};I([N({type:["audio"],readOnly:!0,json:{write:!0}})],nb.prototype,"type",void 0),I([N({type:uA,json:{write:!0}})],nb.prototype,"inputMethod",void 0),I([N({type:Number,json:{write:!0}})],nb.prototype,"maxDuration",void 0),nb=I([De("esri.form.elements.inputs.attachments.AudioInput")],nb);const XJ=nb;let U3=class extends Sg{constructor(e){super(e),this.type="document",this.maxFileSize=null}};I([N({type:["document"],readOnly:!0,json:{write:!0}})],U3.prototype,"type",void 0),I([N({type:Number,json:{write:!0}})],U3.prototype,"maxFileSize",void 0),U3=I([De("esri.form.elements.inputs.attachments.DocumentInput")],U3);const WJ=U3;let rb=class extends Sg{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};I([N({type:["image"],readOnly:!0,json:{write:!0}})],rb.prototype,"type",void 0),I([N({type:uA,json:{write:!0}})],rb.prototype,"inputMethod",void 0),I([N({type:Number,json:{write:!0}})],rb.prototype,"maxImageSize",void 0),rb=I([De("esri.form.elements.inputs.attachments.ImageInput")],rb);const ZJ=rb;let Y3=class extends Sg{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};I([N({type:["signature"],readOnly:!0,json:{write:!0}})],Y3.prototype,"type",void 0),I([N({type:uA,json:{write:!0}})],Y3.prototype,"inputMethod",void 0),Y3=I([De("esri.form.elements.inputs.attachments.SignatureInput")],Y3);const KJ=Y3;let ob=class extends Sg{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};I([N({type:["video"],readOnly:!0,json:{write:!0}})],ob.prototype,"type",void 0),I([N({type:uA,json:{write:!0}})],ob.prototype,"inputMethod",void 0),I([N({type:Number,json:{write:!0}})],ob.prototype,"maxDuration",void 0),ob=I([De("esri.form.elements.inputs.attachments.VideoInput")],ob);const JJ=ob;function Xfe(t){return{nestableTypes:{base:Sg,key:"type",typeMap:{audio:XJ,document:WJ,image:ZJ,signature:KJ,video:JJ}},allTypes:{base:Sg,key:"type",typeMap:{attachment:t,audio:XJ,document:WJ,image:ZJ,signature:KJ,video:JJ}}}}function hze(t,e,i){return t?t.map(s=>Bc(e.nestableTypes,s)):null}function dze(t,e,i){if(!t)return null;const s=e.nestableTypes.typeMap;return t.filter(n=>s[n.type]).map(n=>s[n.type].fromJSON(n))}function fze(t,e,i){if(!t)return null;const s=e.nestableTypes.typeMap;return t.filter(n=>s[n.type]).map(n=>n.toJSON())}let zd=class extends Sg{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return hze(e,Dk)}readInputs(e,i){return dze(i.inputTypes,Dk)}writeInputs(e,i){i.inputTypes=fze(e,Dk)}};I([N({type:["attachment"],readOnly:!0,json:{write:!0}})],zd.prototype,"type",void 0),I([N({type:["any","exact","exactOrNone"],json:{write:!0}})],zd.prototype,"attachmentAssociationType",void 0),I([N({json:{write:{isRequired:!0}}})],zd.prototype,"inputTypes",void 0),I([Sn("inputTypes")],zd.prototype,"castInputs",null),I([At("inputTypes")],zd.prototype,"readInputs",null),I([Ft("inputTypes")],zd.prototype,"writeInputs",null),zd=I([De("esri.form.elements.inputs.attachments.AttachmentInput")],zd);const Dk=Xfe(zd),pze=zd;var DL;const mze=Xfe(pze);let pu=DL=class extends uv{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new DL({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};I([N({type:Boolean,json:{write:!0}})],pu.prototype,"allowUserRename",void 0),I([N({type:String,json:{write:{isRequired:!0}}})],pu.prototype,"attachmentKeyword",void 0),I([N({type:Boolean,json:{write:!0}})],pu.prototype,"displayFilename",void 0),I([N({type:String,json:{write:!0}})],pu.prototype,"editableExpression",void 0),I([N({type:String,json:{write:!0}})],pu.prototype,"filenameExpression",void 0),I([N({types:mze.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],pu.prototype,"input",void 0),I([N({type:Number,json:{write:!0}})],pu.prototype,"maxAttachmentCount",void 0),I([N({type:Number,json:{write:!0}})],pu.prototype,"minAttachmentCount",void 0),I([N({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],pu.prototype,"type",void 0),I([N({type:Boolean,json:{write:!0}})],pu.prototype,"useOriginalFilename",void 0),pu=DL=I([De("esri.form.elements.AttachmentElement")],pu);const QJ=pu;let p9=class extends wt{constructor(e){super(e),this.type=null}};I([N()],p9.prototype,"type",void 0),p9=I([De("esri.form.elements.inputs.Input")],p9);const dm=p9;let X3=class extends dm{constructor(e){super(e),this.maxLength=null,this.minLength=0}};I([N({type:Number,json:{write:!0}})],X3.prototype,"maxLength",void 0),I([N({type:Number,json:{write:!0}})],X3.prototype,"minLength",void 0),X3=I([De("esri.form.elements.inputs.TextInput")],X3);const mG=X3;var kL;let m9=kL=class extends mG{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new kL({maxLength:this.maxLength,minLength:this.minLength})}};I([N({type:["barcode-scanner"],json:{read:!1,write:!0}})],m9.prototype,"type",void 0),m9=kL=I([De("esri.form.elements.inputs.BarcodeScannerInput")],m9);const gze=m9;var NL;let ab=NL=class extends dm{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new NL({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};I([N({type:String,json:{write:!0}})],ab.prototype,"noValueOptionLabel",void 0),I([N({type:Boolean,json:{write:!0}})],ab.prototype,"showNoValueOption",void 0),I([N({type:["combo-box"],json:{read:!1,write:!0}})],ab.prototype,"type",void 0),ab=NL=I([De("esri.form.elements.inputs.ComboBoxInput")],ab);const yze=ab;var $L;function eQ(t){return t??null}function tQ(t){return t??null}let Nd=$L=class extends dm{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return eQ(e.max)}writeMax(t,e){e.max=tQ(t)}readMin(t,e){return eQ(e.min)}writeMin(t,e){e.min=tQ(t)}clone(){return new $L({max:this.max,min:this.min})}};I([N({type:String,json:{type:String,write:!0}})],Nd.prototype,"max",void 0),I([At("max")],Nd.prototype,"readMax",null),I([Ft("max")],Nd.prototype,"writeMax",null),I([N({type:String,json:{type:String,write:!0}})],Nd.prototype,"min",void 0),I([At("min")],Nd.prototype,"readMin",null),I([Ft("min")],Nd.prototype,"writeMin",null),I([N({type:["date-picker"],json:{read:!1,write:!0}})],Nd.prototype,"type",void 0),Nd=$L=I([De("esri.form.elements.inputs.DatePickerInput")],Nd);const vze=Nd;var OL;function kk(t){return t??null}function Nk(t){return t??null}let Ll=OL=class extends dm{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return kk(e.max)}writeMax(t,e){e.max=Nk(t)}readMin(t,e){return kk(e.min)}writeMin(t,e){e.min=Nk(t)}readTimeResolution(t,e){return kk(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Nk(t)}clone(){return new OL({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};I([N({type:Boolean,json:{write:!0}})],Ll.prototype,"includeTimeOffset",void 0),I([N({type:String,json:{type:String,write:!0}})],Ll.prototype,"max",void 0),I([At("max")],Ll.prototype,"readMax",null),I([Ft("max")],Ll.prototype,"writeMax",null),I([N({type:String,json:{type:String,write:!0}})],Ll.prototype,"min",void 0),I([At("min")],Ll.prototype,"readMin",null),I([Ft("min")],Ll.prototype,"writeMin",null),I([N({type:String,json:{type:String,write:!0}})],Ll.prototype,"timeResolution",void 0),I([At("timeResolution")],Ll.prototype,"readTimeResolution",null),I([Ft("timeResolution")],Ll.prototype,"writeTimeResolution",null),I([N({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Ll.prototype,"type",void 0),Ll=OL=I([De("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Ll);const _ze=Ll;var RL;function iQ(t){return t!=null?new Date(t):null}function sQ(t){return t?t.getTime():null}let Sh=RL=class extends dm{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return iQ(e.max)}writeMax(t,e){e.max=sQ(t)}readMin(t,e){return iQ(e.min)}writeMin(t,e){e.min=sQ(t)}clone(){return new RL({includeTime:this.includeTime,max:this.max,min:this.min})}};I([N({type:Boolean,json:{write:!0}})],Sh.prototype,"includeTime",void 0),I([N({type:Date,json:{type:Number,write:!0}})],Sh.prototype,"max",void 0),I([At("max")],Sh.prototype,"readMax",null),I([Ft("max")],Sh.prototype,"writeMax",null),I([N({type:Date,json:{type:Number,write:!0}})],Sh.prototype,"min",void 0),I([At("min")],Sh.prototype,"readMin",null),I([Ft("min")],Sh.prototype,"writeMin",null),I([N({type:["datetime-picker"],json:{read:!1,write:!0}})],Sh.prototype,"type",void 0),Sh=RL=I([De("esri.form.elements.inputs.DateTimePickerInput")],Sh);const bze=Sh;var LL;let lb=LL=class extends dm{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new LL({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};I([N({type:String,json:{write:!0}})],lb.prototype,"noValueOptionLabel",void 0),I([N({type:Boolean,json:{write:!0}})],lb.prototype,"showNoValueOption",void 0),I([N({type:["radio-buttons"],json:{read:!1,write:!0}})],lb.prototype,"type",void 0),lb=LL=I([De("esri.form.elements.inputs.RadioButtonsInput")],lb);const xze=lb;var FL;let ub=FL=class extends dm{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new FL({offValue:this.offValue,onValue:this.onValue})}};I([N({type:[String,Number],json:{write:!0}})],ub.prototype,"offValue",void 0),I([N({type:[String,Number],json:{write:!0}})],ub.prototype,"onValue",void 0),I([N({type:["switch"],json:{read:!1,write:!0}})],ub.prototype,"type",void 0),ub=FL=I([De("esri.form.elements.inputs.SwitchInput")],ub);const wze=ub;var zL;let g9=zL=class extends mG{constructor(t){super(t),this.type="text-area"}clone(){return new zL({maxLength:this.maxLength,minLength:this.minLength})}};I([N({type:["text-area"],json:{read:!1,write:!0}})],g9.prototype,"type",void 0),g9=zL=I([De("esri.form.elements.inputs.TextAreaInput")],g9);const Sze=g9;var qL;let y9=qL=class extends mG{constructor(t){super(t),this.type="text-box"}clone(){return new qL({maxLength:this.maxLength,minLength:this.minLength})}};I([N({type:["text-box"],json:{read:!1,write:!0}})],y9.prototype,"type",void 0),y9=qL=I([De("esri.form.elements.inputs.TextBoxInput")],y9);const Eze=y9;var VL;function $k(t){return t??null}function Ok(t){return t??null}let mu=VL=class extends dm{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return $k(e.max)}writeMax(t,e){e.max=Ok(t)}readMin(t,e){return $k(e.min)}writeMin(t,e){e.min=Ok(t)}readTimeResolution(t,e){return $k(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=Ok(t)}clone(){return new VL({max:this.max,min:this.min,timeResolution:this.timeResolution})}};I([N({type:String,json:{type:String,write:!0}})],mu.prototype,"max",void 0),I([At("max")],mu.prototype,"readMax",null),I([Ft("max")],mu.prototype,"writeMax",null),I([N({type:String,json:{type:String,write:!0}})],mu.prototype,"min",void 0),I([At("min")],mu.prototype,"readMin",null),I([Ft("min")],mu.prototype,"writeMin",null),I([N({type:String,json:{type:String,write:!0}})],mu.prototype,"timeResolution",void 0),I([At("timeResolution")],mu.prototype,"readTimeResolution",null),I([Ft("timeResolution")],mu.prototype,"writeTimeResolution",null),I([N({type:["time-picker"],json:{read:!1,write:!0}})],mu.prototype,"type",void 0),mu=VL=I([De("esri.form.elements.inputs.TimePickerInput")],mu);const Cze=mu,Pze={base:dm,key:"type",typeMap:{"barcode-scanner":gze,"combo-box":yze,"date-picker":vze,"datetime-picker":bze,"datetimeoffset-picker":_ze,"radio-buttons":xze,switch:wze,"text-area":Sze,"text-box":Eze,"time-picker":Cze}};var GL;let Py=GL=class extends wt{constructor(t){super(t),this.name=null,this.code=null}clone(){return new GL({name:this.name,code:this.code})}};I([N({type:String,json:{write:!0}})],Py.prototype,"name",void 0),I([N({type:[String,Number],json:{write:!0}})],Py.prototype,"code",void 0),Py=GL=I([De("esri.layers.support.CodedValue")],Py);const Tze=new ps({inherited:"inherited",codedValue:"coded-value",range:"range"});let W3=class extends wt{constructor(e){super(e),this.name=null,this.type=null}};I([N({type:String,json:{write:!0}})],W3.prototype,"name",void 0),I([ni(Tze)],W3.prototype,"type",void 0),W3=I([De("esri.layers.support.Domain")],W3);const cA=W3;var jL;let Z3=jL=class extends cA{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(s=>(String(s.code)===i&&(e=s.name),!!e))}return e}clone(){return new jL({codedValues:Ue(this.codedValues),name:this.name})}};I([N({type:[Py],json:{write:!0}})],Z3.prototype,"codedValues",void 0),I([ni({codedValue:"coded-value"})],Z3.prototype,"type",void 0),Z3=jL=I([De("esri.layers.support.CodedValueDomain")],Z3);const hA=Z3;var BL;let v9=BL=class extends cA{constructor(t){super(t),this.type="inherited"}clone(){return new BL}};I([ni({inherited:"inherited"})],v9.prototype,"type",void 0),v9=BL=I([De("esri.layers.support.InheritedDomain")],v9);const Wfe=v9;var HL;let cb=HL=class extends cA{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new HL({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};I([N({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],cb.prototype,"maxValue",void 0),I([N({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],cb.prototype,"minValue",void 0),I([ni({range:"range"})],cb.prototype,"type",void 0),cb=HL=I([De("esri.layers.support.RangeDomain")],cb);const Zfe=cb,Kfe={key:"type",base:cA,typeMap:{range:Zfe,"coded-value":hA,inherited:Wfe}};function dA(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return Zfe.fromJSON(t);case"codedValue":return hA.fromJSON(t);case"inherited":return Wfe.fromJSON(t)}return null}var UL;let mc=UL=class extends uv{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new UL({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};I([N({types:Kfe,json:{read:{reader:dA},write:!0}})],mc.prototype,"domain",void 0),I([N({type:Boolean,json:{write:!0}})],mc.prototype,"editable",void 0),I([N({type:String,json:{write:!0}})],mc.prototype,"editableExpression",void 0),I([N({type:String,json:{write:!0}})],mc.prototype,"fieldName",void 0),I([N({type:String,json:{write:!0}})],mc.prototype,"hint",void 0),I([N({types:Pze,json:{read:{source:"inputType"},write:{target:"inputType"}}})],mc.prototype,"input",void 0),I([N({type:String,json:{write:!0}})],mc.prototype,"requiredExpression",void 0),I([N({type:String,json:{read:!1,write:!0}})],mc.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],mc.prototype,"valueExpression",void 0),mc=UL=I([De("esri.form.elements.FieldElement")],mc);const nQ=mc;var YL;let op=YL=class extends uv{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new YL({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:Ue(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};I([N({type:Number,json:{write:!0}})],op.prototype,"displayCount",void 0),I([N({type:["list"],json:{write:!0}})],op.prototype,"displayType",void 0),I([N({type:String,json:{write:!0}})],op.prototype,"editableExpression",void 0),I([N({type:[VV],json:{write:!0}})],op.prototype,"orderByFields",void 0),I([N({type:Number,json:{write:!0}})],op.prototype,"relationshipId",void 0),I([N({type:["relationship"],json:{read:!1,write:!0}})],op.prototype,"type",void 0),op=YL=I([De("esri.form.elements.RelationshipElement")],op);const rQ=op;var XL;let hb=XL=class extends uv{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new XL({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};I([N({type:String,json:{write:!0}})],hb.prototype,"text",void 0),I([N({type:String,json:{write:!0}})],hb.prototype,"textFormat",void 0),I([N({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],hb.prototype,"type",void 0),hb=XL=I([De("esri.form.elements.TextElement")],hb);const oQ=hb;function Jfe(t){return{typesWithGroup:{base:uv,key:"type",typeMap:{attachment:QJ,field:nQ,group:t,relationship:rQ,text:oQ}},typesWithoutGroup:{base:uv,key:"type",typeMap:{attachment:QJ,field:nQ,relationship:rQ,text:oQ}}}}function Qfe(t,e,i=!0){if(!t)return null;const s=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>s[n.type]).map(n=>s[n.type].fromJSON(n))}function epe(t,e,i=!0){if(!t)return null;const s=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>s[n.type]).map(n=>n.toJSON())}function tpe(t,e,i=!0){return t?t.map(s=>Bc(i?e.typesWithGroup:e.typesWithoutGroup,s)):null}var WL;let qd=WL=class extends uv{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return tpe(t,Rk,!1)}readElements(t,e){return Qfe(e.formElements,Rk,!1)}writeElements(t,e){e.formElements=epe(t,Rk,!1)}clone(){return new WL({description:this.description,elements:Ue(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};I([N({json:{write:!0}})],qd.prototype,"elements",void 0),I([Sn("elements")],qd.prototype,"castElements",null),I([At("elements",["formElements"])],qd.prototype,"readElements",null),I([Ft("elements")],qd.prototype,"writeElements",null),I([N({type:["collapsed","expanded"],json:{write:!0}})],qd.prototype,"initialState",void 0),I([N({type:String,json:{read:!1,write:!0}})],qd.prototype,"type",void 0),qd=WL=I([De("esri.form.elements.GroupElement")],qd);const Rk=Jfe(qd),Ize=qd,Mze=t=>t.type==="field",Aze=t=>t.type==="group",Dze=t=>t.type==="text",o0t=t=>t.type==="relationship";var ZL;const Lk=Jfe(Ize);let Eh=ZL=class extends wt{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return tpe(t,Lk)}readElements(t,e){return Qfe(e.formElements,Lk)}writeElements(t,e){e.formElements=epe(t,Lk)}clone(){return new ZL({description:this.description,expressionInfos:Ue(this.expressionInfos),elements:Ue(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:s,elements:n,expressionInfos:r,title:o}=this;if(LS(i,t,s),LS(i,t,o),!n)return[];const l=kze(n,r).map(c=>Ja(i,t,c));await Promise.all(l);for(const c of n)ipe(i,{fieldsIndex:t,relationships:e},c);return Array.from(i).sort()}};function ipe(t,e,i){var n;const{fieldsIndex:s}=e;if(!s||s.fields.length!==t.size)switch(LS(t,s,i.label),LS(t,s,i.description),i.type){case"field":_l(t,s,i.fieldName);break;case"group":i.elements.forEach(r=>ipe(t,e,r));break;case"relationship":if(e.relationships){const r=e.relationships.find(o=>o.id===i.relationshipId);r&&_l(t,s,r.keyField)}lv(t,s,(n=i.orderByFields)==null?void 0:n.map(r=>r.field));break;case"text":LS(t,s,i.text)}}function kze(t,e){if(!e||e.length===0)return[];const i=spe(t),s=[];for(const n of e)i.has(n.name)&&s.push(n.expression);return s}function spe(t){const e=new Set;for(const i of t)if(BX(e,i.visibilityExpression),!Dze(i)){if(Aze(i))yI(e,spe(i.elements));else if(BX(e,i.editableExpression),Mze(i)){const{requiredExpression:s,valueExpression:n}=i;yI(e,[s,n])}}return e}function LS(t,e,i){lv(t,e,Ahe(i))}I([N({type:String,json:{write:!0}})],Eh.prototype,"description",void 0),I([N({json:{write:!0}})],Eh.prototype,"elements",void 0),I([Sn("elements")],Eh.prototype,"castElements",null),I([At("elements",["formElements"])],Eh.prototype,"readElements",null),I([Ft("elements")],Eh.prototype,"writeElements",null),I([N({type:[cze],json:{write:!0}})],Eh.prototype,"expressionInfos",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],Eh.prototype,"preserveFieldValuesWhenHidden",void 0),I([N({type:String,json:{write:!0}})],Eh.prototype,"title",void 0),Eh=ZL=I([De("esri.form.FormTemplate")],Eh);const Nze=Eh;let KL=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new SC,this._items=new Set}get length(){return mi(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return mi(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(s=>{e(s)||this._items.delete(s)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){mi(this._observable),yield*this._items}};const npe=new FinalizationRegistry(t=>{t.close()});function $ze(t,e){npe.register(t,e,e)}function Oze(t){npe.unregister(t)}function rpe(t,e){return new Proxy({},{get:(i,s,n)=>(...r)=>{let o,l;const c=r[r.length-1];return Rze(c)&&(o=c.signal,l=c.transferList,r.pop()),t.apply(e?`${e}.${s.toString()}`:s.toString(),r,{transferList:l,signal:o})}})}function Rze(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const Lze={statsWorker:()=>nt(()=>import("./statsWorker-fscfM4Zt.js"),__vite__mapDeps([240,178,52,2,135,136]),import.meta.url),geometryEngineWorker:()=>nt(()=>import("./geometryEngineWorker-DFvTNbFu.js"),__vite__mapDeps([241,239,174]),import.meta.url),CSVSourceWorker:()=>nt(()=>import("./CSVSourceWorker-BE1sebae.js"),__vite__mapDeps([242,196,174,103,104,169,102,105,170,171,22,172,173,12,13,14,15,175,176,177,97,55,133,178,52,2,135,136,179,101,132,111]),import.meta.url),EdgeProcessingWorker:()=>nt(()=>import("./EdgeProcessingWorker-uxNiVkfV.js"),__vite__mapDeps([243,244,245,215,246,247,248,212,211,120,249,25,225,250]),import.meta.url),ElevationSamplerWorker:()=>nt(()=>import("./ElevationSamplerWorker-Dnh6sYN7.js"),__vite__mapDeps([251,171,22,213,128,129,214,215,216]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>nt(()=>import("./FeatureServiceSnappingSourceWorker-DqxQ-ULv.js"),__vite__mapDeps([252,169,102,103,104,105,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,6,7,253,145,146,144,39]),import.meta.url),GeoJSONSourceWorker:()=>nt(()=>import("./GeoJSONSourceWorker-DkSGw66h.js"),__vite__mapDeps([254,102,103,104,105,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,195,196,132,111,197]),import.meta.url),LercWorker:()=>nt(()=>import("./LercWorker-BerEQer_.js"),[],import.meta.url),MemorySourceWorker:()=>nt(()=>import("./MemorySourceWorker-Dl12IaOP.js"),__vite__mapDeps([255,102,103,104,105,189,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,132,111,197,196]),import.meta.url),PBFDecoderWorker:()=>nt(()=>import("./PBFDecoderWorker-CHQBiiHI.js"),__vite__mapDeps([256,257,102,103,104,105,145,146]),import.meta.url),FeaturePipelineWorker:()=>nt(()=>import("./FeaturePipelineWorker-DLD62dQS.js"),__vite__mapDeps([258,6,7,19,20,21,8,22,23,259,260,26,25,261,262,225,263,17,55,264,265,266,104,224,16,267,176,102,103,105,268,126,247,173,12,13,14,15,174,172,269,270,271,210,272,273,175,177,97,133,178,52,2,135,136,179,144,145,146,194,195,196,132,111,197,274,275]),import.meta.url),PointCloudWorker:()=>nt(()=>import("./PointCloudWorker-Bli3fJug.js"),__vite__mapDeps([276,277,201,119,120,127,128,129]),import.meta.url),RasterWorker:()=>nt(()=>import("./RasterWorker-DxE6saLV.js"),__vite__mapDeps([278,154,76,155,159,158]),import.meta.url),SceneLayerSnappingSourceWorker:()=>nt(()=>import("./SceneLayerSnappingSourceWorker-aCkoOKlg.js"),__vite__mapDeps([279,184,280,247,248,212,211,245,215,246,120,249,25,225,250]),import.meta.url),SceneLayerWorker:()=>nt(()=>import("./SceneLayerWorker-C2q9SuZP.js"),__vite__mapDeps([281,214,118,119,120,121,122,123,124,125,126,127,128,129]),import.meta.url),WFSSourceWorker:()=>nt(()=>import("./WFSSourceWorker-Cc4A2FVg.js"),__vite__mapDeps([282,102,103,104,105,169,170,171,22,172,173,12,13,14,15,174,175,176,177,97,55,133,178,52,2,135,136,179,195,196,197,231,232]),import.meta.url),WorkerTileHandler:()=>nt(()=>import("./WorkerTileHandler-DRbuujM6.js"),__vite__mapDeps([283,223,224,267,284,222,146,271,23,285,221,25,225,18,210,265]),import.meta.url),Lyr3DWorker:()=>nt(()=>import("./Lyr3DWorker-B0xLzLig.js"),[],import.meta.url),Feature3DPipelineWorker:()=>nt(()=>import("./Feature3DPipelineWorker-BgFe6z5s.js"),__vite__mapDeps([286,177,12,13,14,15,102,103,104,105,97,55,172,173,174,133,178,52,2,135,136,179,8,171,22,176,144,145,146,211,287,288,127,128,129,124,120,126,247,26,25,289,290,125,183,184,291,215,292,249,225,245,246,293,294,280,295,182,277,296,297,122,262,298,123,299]),import.meta.url)},ope="worker:port-closed";var zo;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(zo||(zo={}));let Fze=0;function ape(){return Fze++}function zze(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function bE(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function gG(t,e,i,s){if(e.type===zo.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==zo.INVOKE&&e.type!==zo.RESPONSE)return void t.postMessage(e);let n;if(zze(i)?(n=aQ(i.transferList),e.data=i.result):(n=aQ(s),e.data=i),n){if(ht("ff")){for(const r of n)if("byteLength"in r&&r.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case zo.INVOKE:throw o;case zo.RESPONSE:return void gG(t,{type:zo.RESPONSE,jobId:e.jobId,error:bE(o)})}}}t.postMessage(e,n)}else t.postMessage(e)}function xE(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function aQ(t){if(!(t!=null&&t.length))return null;if(ht("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!qze(i));return e.length?e:null}function qze(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function l0t(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===ope;if(!(ad(e)||i))throw e;return}}const{CLOSE:lQ,ABORT:uQ,INVOKE:cQ,RESPONSE:Vw,OPEN_PORT:hQ,ON:Vze}=zo,Gze=2;let jze=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===zo.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Eg=class db{static connect(e,i){const s=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const r=new db(s.port1,{channel:s,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=r),db.clients.set(r,n),s.port2}static loadWorker(e){const i=Lze[e];return i?i():Promise.resolve(null)}constructor(e,i,s){this._port=e,this._jobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new jze(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:lQ}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,s){return this.apply(e,[i],s)}apply(e,i,s){const n=s==null?void 0:s.signal,r=s==null?void 0:s.transferList;if(!this._port)return Promise.reject(new rt(ope,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=ape();return new Promise((l,c)=>{if($u(n))return this._processWork(),void c(or());const f=Bl(n,()=>{const _=this._outJobs.get(o);_&&(this._outJobs.delete(o),this._processWork(),bo(_.abortHandle),this._post({type:uQ,jobId:o}),c(or()))}),y={resolve:l,reject:c,abortHandle:f,debugInfo:e};this._outJobs.set(o,y),this._post({type:cQ,jobId:o,methodName:e,abortable:n!=null},i,r)})}createInvokeProxy(e){return rpe(this,e)}on(e,i){const s=new MessageChannel;function n(r){i(r.data)}return this._port.postMessage({type:zo.ON,eventType:e,port:s.port2},[s.port2]),s.port1.addEventListener("message",n),s.port1.start(),ds(()=>{s.port1.postMessage({type:zo.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:hQ,port:e.port2}),e.port1}_processWork(){var o;if(this._outJobs.size>=Gze)return;const e=(o=this._jobQueue)==null?void 0:o.pop();if(!e)return;const{methodName:i,data:s,invokeOptions:n,resolver:r}=e;this.apply(i,s,n).then(l=>r.resolve(l)).catch(l=>r.reject(l))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{bo(e.abortHandle),e.reject(or(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const s=xE(e);if(s)switch(s.type){case Vw:this._onResponseMessage(s);break;case cQ:i?this._onInvokeMessage(s):this._invokeQueue.push(s);break;case uQ:this._onAbortMessage(s);break;case lQ:this._onCloseMessage();break;case hQ:this._onOpenPortMessage(s);break;case Vze:this._onOnMessage(s)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,n=i.get(s);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(s))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&db.clients.get(this)===e&&e.destroy(),db.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:s,data:n=[],abortable:r}=e,o=r?new AbortController:null,l=this._inJobs;let c,f=this._client,y=f[i];try{if(!y&&i&&i.includes(".")){const _=i.split(".");for(let x=0;x<_.length-1;x++)f=f[_[x]],y=f[_[x+1]]}if(typeof y!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:o?o.signal:null}),c=y.apply(f,n)}catch(_){return void this._post({type:Vw,jobId:s,error:bE(_)})}Cv(c)?(l.set(s,{controller:o,promise:c}),c.then(_=>{l.has(s)&&(l.delete(s),this._post({type:Vw,jobId:s},_))},_=>{l.has(s)&&(l.delete(s),ad(_)||this._post({type:Vw,jobId:s,error:bE(_||{message:`Error encountered at method ${i}`})}))})):this._post({type:Vw,jobId:s},c)}_onOpenPortMessage(e){new db(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,s=this._client.on(e.eventType,r=>{i.postMessage(r)}),n=Oy(e.port,"message",r=>{const o=xE(r);(o==null?void 0:o.type)===zo.CLOSE&&(n.remove(),s.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:s,data:n}=e,r=this._outJobs;if(!r.has(i))return;const o=r.get(i);r.delete(i),this._processWork(),bo(o.abortHandle),s?o.reject(rt.fromJSON(JSON.parse(s))):o.resolve(n)}_post(e,i,s){return gG(this._port,e,i,s)}};Eg.kernelInfo={buildDate:wae,fullVersion:Rq,revision:Sae},Eg.clients=new Map;let Bze=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new KL}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((s,n)=>{let r=!0;const o=l=>{Kl(i.signal),r&&(r=!1,l())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let l=0;l<e.length;++l){const c=e[l];Cv(c)?this._clientPromises[l]=c.then(f=>(this._clients[l]=new Eg(f,i,this._ongoingJobsQueue),o(s),this._clients[l]),()=>(o(n),null)):(this._clients[l]=new Eg(c,i,this._ongoingJobsQueue),this._clientPromises[l]=Promise.resolve(this._clients[l]),o(s))}})}broadcast(e,i,s){const n=new Array(this._clientPromises.length);for(let r=0;r<this._clientPromises.length;++r){const o=this._clientPromises[r];n[r]=o.then(l=>l==null?void 0:l.invoke(e,i,s))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(or(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(s=>s==null?void 0:s.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,Oze(this)}invoke(e,i,s){return this.apply(e,[i],s)}apply(e,i,s){const n=Cu();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:s,resolver:n});for(let r=0;r<this._clientPromises.length;r++){const o=this._clients[r];o?o.jobAdded():this._clientPromises[r].then(l=>l==null?void 0:l.jobAdded())}return n.promise}createInvokeProxy(e){return rpe(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>am(this._clients.map(s=>s.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let s=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(r=>{r&&(i[n]=r.openPort()),--s==0&&e(i)})})}get test(){}};const Hze={async request(t,e){var o,l;const i=t.options,s=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&((o=L$(t.url))!=null&&o.after)?s:"array-buffer";const n=await Qs(t.url,i),r={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((l=n.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete r.data.signal,r;case"blob":r.data=await r.data.arrayBuffer();break;case"json":r.data=new TextEncoder().encode(JSON.stringify(r.data)).buffer;break;case"text":r.data=new TextEncoder().encode(r.data).buffer}return{result:r,transferList:[r.data]}}},dQ={};function Uze(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...dQ.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=dQ.baseUrl),e}let Yze=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...s)=>e[i](...s)})}},_9=class{constructor(){this._dispatcher=new Yze,this._workerPostMessage({type:zo.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){y2(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,s){this._dispatcher.addEventListener(e,i,s)}removeEventListener(e,i,s){this._dispatcher.removeEventListener(e,i,s)}_workerPostMessage(e){y2(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=xE(e);if(i&&i.type===zo.OPEN){const{modulePath:s,jobId:n}=i;let r=await Eg.loadWorker(s);r||(r=await import(s));const o=Eg.connect(r);this._workerPostMessage({type:zo.OPENED,jobId:n,data:o})}}};const JL=()=>zt.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Xze}=zo,Wze='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let m4,g4;const fQ="Failed to create Worker. Fallback to execute module in main thread";async function Zze(){if(!ht("esri-workers"))return pQ(new _9);if(!m4&&!g4)try{const e=Wze.split("{CONFIGURATION}").join(Kze());m4=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){g4=e||{}}let t;if(m4)try{t=new Worker(m4,{name:"esri-worker-"+Jze++})}catch{JL().warn(fQ,g4),t=new _9}else JL().warn(fQ,g4),t=new _9;return pQ(t)}async function pQ(t){return new Promise(e=>{function i(n){const r=xE(n);r&&r.type===Xze&&(t.removeEventListener("message",i),t.removeEventListener("error",s),e(t))}function s(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",s),JL().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new _9).addEventListener("message",i),t.addEventListener("error",s)}t.addEventListener("message",i),t.addEventListener("error",s)})}function Kze(){let t;if(Gs.default!=null){const n={...Gs};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Gs));t.assetsPath=pl(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?pl(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Au(),t.has={"esri-csp-restrictions":ht("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ht("esri-2d-update-debug"),"esri-2d-log-updating":ht("esri-2d-log-updating"),"featurelayer-pbf":ht("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ht("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ht("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ht("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ht("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ht("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":ht("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":ht("featurelayer-snapshot-enabled"),"esri-atomics":ht("esri-atomics"),"esri-shared-array-buffer":ht("esri-shared-array-buffer"),"esri-tiles-debug":ht("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ht("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ht("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=pl(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=pl(t.workers.workerPath):t.workers.workerPath=pl(_C("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Gs.workers.loaderConfig,i=Uze({baseUrl:e==null?void 0:e.baseUrl,locale:Au(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:wae,fullVersion:Rq,revision:Sae}})}let Jze=0;const{ABORT:mQ,INVOKE:Qze,OPEN:eqe,OPENED:tqe,RESPONSE:Gw}=zo;let iqe=class lpe{static async create(e){const i=await Zze();return new lpe(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",s=>{s.preventDefault(),zt.getLogger("esri.core.workers.WorkerOwner").error(s)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:s}=i,n=ape();return new Promise((r,o)=>{const l={resolve:r,reject:o,abortHandle:Ooe(s,()=>{this._outJobs.delete(n),this._post({type:mQ,jobId:n})})};this._outJobs.set(n,l),this._post({type:eqe,jobId:n,modulePath:e})})}_onMessage(e){const i=xE(e);if(i)switch(i.type){case tqe:this._onOpenedMessage(i);break;case Gw:this._onResponseMessage(i);break;case mQ:this._onAbortMessage(i);break;case Qze:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,n=i.get(s);n&&(n.controller&&n.controller.abort(),i.delete(s))}_onInvokeMessage(e){const{methodName:i,jobId:s,data:n,abortable:r}=e,o=r?new AbortController:null,l=this._inJobs,c=Hze[i];let f;try{if(typeof c!="function")throw new TypeError(`${i} is not a function`);f=c.call(null,n,{signal:o?o.signal:null})}catch(y){return void this._post({type:Gw,jobId:s,error:bE(y)})}Cv(f)?(l.set(s,{controller:o,promise:f}),f.then(y=>{l.has(s)&&(l.delete(s),this._post({type:Gw,jobId:s},y))},y=>{l.has(s)&&(l.delete(s),y||(y={message:"Error encountered at method"+i}),ad(y)||this._post({type:Gw,jobId:s,error:bE(y||{message:`Error encountered at method ${i}`})}))})):this._post({type:Gw,jobId:s},f)}_onOpenedMessage(e){const{jobId:i,data:s}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),bo(n.abortHandle),n.resolve(s))}_onResponseMessage(e){const{jobId:i,error:s,data:n}=e,r=this._outJobs.get(i);r&&(this._outJobs.delete(i),bo(r.abortHandle),s?r.reject(rt.fromJSON(JSON.parse(s))):r.resolve(n))}_post(e,i,s){return gG(this.worker,e,i,s)}};const gQ=ht("host-browser")?Math.min(navigator.hardwareConcurrency-1,ht("workers-pool-size")??8):0;let Ty=ht("esri-mobile")?Math.min(gQ,3):gQ;Ty||(Ty=ht("safari")&&ht("mac")?7:2);let yQ=0;const b9=[];function f0t(){upe()}async function y4(t,e){const i=new Bze,{registryTarget:s,...n}=e;return await i.open(t,n),s&&$ze(s,i),i}async function sqe(t,e={}){if(typeof t!="string")throw new rt("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ht("host-webworker")&&!ht("esri-workers")&&(i="local"),i==="local"){let s=await Eg.loadWorker(t);s||(s=await import(t)),Kl(e.signal);const n=e.client||s;return y4([Eg.connect(s,e.schedule)],{...e,client:n})}if(await upe(),Kl(e.signal),i==="dedicated"){const s=yQ++%Ty;return y4([await b9[s].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const s=Math.min(e.maxNumWorkers,Ty);if(s<Ty){const n=new Array(s);for(let r=0;r<s;++r){const o=yQ++%Ty;n[r]=b9[o].open(t,e)}return y4(n,e)}}return y4(b9.map(s=>s.open(t,e)),e)}let v4=null;async function upe(){if(v4)return v4;new AbortController;const t=[];for(let e=0;e<Ty;e++){const i=iqe.create(e).then(s=>(b9[e]=s,s));t.push(i)}return v4=Promise.all(t),v4}function vQ(t,e,i){if(t.hasM==null||t.hasZ)for(const s of e)for(const n of s)n.length>2&&(n[2]*=i)}function nqe(t,e,i){if(!t&&!e||!i)return;const s=RI(i);_Q(t,i,s),_Q(e,i,s)}function _Q(t,e,i){if(t)for(const s of t)rqe(s.geometry,e,i)}function rqe(t,e,i){if(!(t!=null&&t.spatialReference)||Ko(t.spatialReference,e))return;const s=RI(t.spatialReference)/i;if(s!==1){if("x"in t)t.z!=null&&(t.z*=s);else if("rings"in t)vQ(t,t.rings,s);else if("paths"in t)vQ(t,t.paths,s);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=s)}}function bQ(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const s=Yhe(i.geometryType,e,t.outSpatialReference);if(s!=null)for(const n of i.features)s(n.geometry)}const oqe=new ps({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var QL;const aqe=new ps({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let La=QL=class extends wt{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?aqe.fromJSON(i.fieldValueType):null}clone(){var t;return new QL({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((t=this.domain)==null?void 0:t.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};I([N({type:String,json:{write:!0}})],La.prototype,"alias",void 0),I([N({type:[String,Number],json:{write:{allowNull:!0}}})],La.prototype,"defaultValue",void 0),I([N()],La.prototype,"description",void 0),I([At("description")],La.prototype,"readDescription",null),I([N({types:Kfe,json:{read:{reader:dA},write:!0}})],La.prototype,"domain",void 0),I([N({type:Boolean,json:{write:!0}})],La.prototype,"editable",void 0),I([N({type:wn,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],La.prototype,"length",void 0),I([N({type:String,json:{write:!0}})],La.prototype,"name",void 0),I([N({type:Boolean,json:{write:!0}})],La.prototype,"nullable",void 0),I([ni(oqe)],La.prototype,"type",void 0),I([N()],La.prototype,"valueType",void 0),I([At("valueType",["description"])],La.prototype,"readValueType",null),I([N({type:Boolean,json:{read:!1}})],La.prototype,"visible",void 0),La=QL=I([De("esri.layers.support.Field")],La);const yG=La;var eF;const tF=new ps({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let No=eF=class extends wt{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){var n;const i=qi.fromJSON(e.spatialReference),s=[];for(let r=0;r<t.length;r++){const o=t[r],l=Xp.fromJSON(o),c=(n=o.geometry)==null?void 0:n.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=i);const f=o.aggregateGeometries,y=l.aggregateGeometries;if(f&&y!=null)for(const _ in y){const x=y[_],S=f[_],P=S==null?void 0:S.spatialReference;x==null||P||(x.spatialReference=i)}s.push(l)}return s}writeGeometryType(t,e,i,s){if(t)return void tF.write(t,e,i,s);const{features:n}=this;if(n){for(const r of n)if((r==null?void 0:r.geometry)!=null)return void tF.write(r.geometry.type,e,i,s)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,s=EC(t);return s&&!i&&e.spatialReference&&(s.spatialReference=qi.fromJSON(e.spatialReference)),s}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const s of i)if(s&&s.geometry!=null&&s.geometry.spatialReference)return void(e.spatialReference=s.geometry.spatialReference.toJSON())}}clone(){return new eF(this.cloneProperties())}cloneProperties(){return Ue({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const s=e.features[i];if(s.geometry){const n=t==null?void 0:t[i];s.geometry=(n==null?void 0:n.toJSON())||s.geometry}}return e}quantize(t){const{scale:[e,i],translate:[s,n]}=t,r=f=>Math.round((f-s)/e),o=f=>Math.round((n-f)/i),l=this.features,c=this._getQuantizationFunction(this.geometryType,r,o);for(let f=0,y=l.length;f<y;f++)c!=null&&c(l[f].geometry)||(l.splice(f,1),f--,y--);return this.transform=t,this}unquantize(){var x,S;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[s,n],scale:[r,o]}=i,l=P=>P*r+s,c=P=>n-P*o;let f=null,y=null;if(this.hasZ&&((x=i==null?void 0:i.scale)==null?void 0:x[2])!=null){const{translate:[,,P],scale:[,,A]}=i;f=k=>k*A+P}if(this.hasM&&((S=i==null?void 0:i.scale)==null?void 0:S[3])!=null){const{translate:[,,,P],scale:[,,,A]}=i;y=k=>k==null?k:k*A+P}const _=this._getHydrationFunction(t,l,c,f,y);for(const{geometry:P}of e)P!=null&&_&&_(P);return this.transform=null,this}_quantizePoints(t,e,i){let s,n;const r=[];for(let o=0,l=t.length;o<l;o++){const c=t[o];if(o>0){const f=e(c[0]),y=i(c[1]);f===s&&y===n||(r.push([f-s,y-n]),s=f,n=y)}else s=e(c[0]),n=i(c[1]),r.push([s,n])}return r.length>0?r:null}_getQuantizationFunction(t,e,i){return t==="point"?s=>(s.x=e(s.x),s.y=i(s.y),s):t==="polyline"||t==="polygon"?s=>{const n=Yb(s)?s.rings:s.paths,r=[];for(let o=0,l=n.length;o<l;o++){const c=n[o],f=this._quantizePoints(c,e,i);f&&r.push(f)}return r.length>0?(Yb(s)?s.rings=r:s.paths=r,s):null}:t==="multipoint"?s=>{const n=this._quantizePoints(s.points,e,i);return n&&n.length>0?(s.points=n,s):null}:t==="extent"?s=>s:null}_getHydrationFunction(t,e,i,s,n){return t==="point"?r=>{r.x=e(r.x),r.y=i(r.y),s&&(r.z=s(r.z))}:t==="polyline"||t==="polygon"?r=>{const o=Yb(r)?r.rings:r.paths;let l,c;for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];x>0?(l+=P[0],c+=P[1]):(l=P[0],c=P[1]),P[0]=e(l),P[1]=i(c)}}if(s&&n)for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];P[2]=s(P[2]),P[3]=n(P[3])}}else if(s)for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];P[2]=s(P[2])}}else if(n)for(let f=0,y=o.length;f<y;f++){const _=o[f];for(let x=0,S=_.length;x<S;x++){const P=_[x];P[2]=n(P[2])}}}:t==="extent"?r=>{r.xmin=e(r.xmin),r.ymin=i(r.ymin),r.xmax=e(r.xmax),r.ymax=i(r.ymax),s&&r.zmax!=null&&r.zmin!=null&&(r.zmax=s(r.zmax),r.zmin=s(r.zmin)),n&&r.mmax!=null&&r.mmin!=null&&(r.mmax=n(r.mmax),r.mmin=n(r.mmin))}:t==="multipoint"?r=>{const o=r.points;let l,c;for(let f=0,y=o.length;f<y;f++){const _=o[f];f>0?(l+=_[0],c+=_[1]):(l=_[0],c=_[1]),_[0]=e(l),_[1]=i(c)}if(s&&n)for(let f=0,y=o.length;f<y;f++){const _=o[f];_[2]=s(_[2]),_[3]=n(_[3])}else if(s)for(let f=0,y=o.length;f<y;f++){const _=o[f];_[2]=s(_[2])}else if(n)for(let f=0,y=o.length;f<y;f++){const _=o[f];_[2]=n(_[2])}}:null}};I([N({type:String,json:{write:!0}})],No.prototype,"displayFieldName",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],No.prototype,"exceededTransferLimit",void 0),I([N({type:[Xp],json:{write:!0}})],No.prototype,"features",void 0),I([At("features")],No.prototype,"readFeatures",null),I([N({type:[yG],json:{write:!0}})],No.prototype,"fields",void 0),I([N({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:tF.read}}})],No.prototype,"geometryType",void 0),I([Ft("geometryType")],No.prototype,"writeGeometryType",null),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],No.prototype,"hasM",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],No.prototype,"hasZ",void 0),I([N({types:CC,json:{write:!0}})],No.prototype,"queryGeometry",void 0),I([At("queryGeometry")],No.prototype,"readQueryGeometry",null),I([N({type:qi,json:{write:!0}})],No.prototype,"spatialReference",void 0),I([Ft("spatialReference")],No.prototype,"writeSpatialReference",null),I([N({json:{write:!0}})],No.prototype,"transform",void 0),No=eF=I([De("esri.rest.support.FeatureSet")],No),No.prototype.toJSON.isDefaultToJSON=!0;const cpe=No;let lqe=0,Sp=class extends vC.LoadableMixin(Lq(ui)){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const s=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);bQ(e,this.layer.spatialReference,s);const n=cpe.fromJSON(s);if(!this._requiresClientGraphicMapping())return n;const r=this.layer.objectIdField;for(const o of n.features){const l=o.attributes[r],c=this._idToClientGraphic.get(l);c&&(o.geometry=c.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new rt("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const s=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return bQ(e,this.layer.spatialReference,s),s}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(s=>({count:s.count,extent:cr.fromJSON(s.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new rt("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let s=null;const n=[],r=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=y=>"objectId"in y&&y.objectId!=null?y.objectId:"attributes"in y&&y.attributes[i]!=null?y.attributes[i]:null;if(e.addFeatures&&(s=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const y of e.deleteFeatures){const _=o(y);_!=null&&n.push(_)}const l=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const y of e.updateFeatures)if(r.push(this._serializeFeature(y)),l){const _=o(y);_!=null&&l.set(_,y)}}nqe(s?s.features:null,r,this.layer.spatialReference);const{fullExtent:c,featureEditResults:f}=await this._connection.invoke("applyEdits",{adds:s?s.features:[],updates:r,deletes:n});return this.fullExtent=c,s&&s.finish(f.uidToObjectId),this._updateClientGraphicIds(l,f),this._createEditsResult(f)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const s=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||s.push(n.load({signal:i}));s.length&&await Promise.all(s)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const s of i.updateResults){if(!s.success)continue;const n=e.get(s.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const s of i.deleteResults)s.success&&this._idToClientGraphic.delete(s.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new rt("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,s=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const l=e[o],c=this._serializeFeature(l);n||l.geometry==null||(n=l.geometry.type),s[o]=c,i.set(`${c.uid}`,l)}const r=this;return{features:s,inferredGeometryType:n,finish(o){const l=r.sourceJSON.objectIdField;for(const c in o){const f=o[c],y=i.get(c);y&&(y.attributes||(y.attributes={}),f===-1?delete y.attributes[l]:y.attributes[l]=f,r._addIdToClientGraphic(y))}}}}_addIdToClientGraphic(e){var n;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,s=(n=e.attributes)==null?void 0:n[i];s!=null&&this._idToClientGraphic.set(s,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,s=this._geometryForSerialization(e),n=(lqe++).toString();return s?{uid:n,geometry:s.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Wa.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await sqe("MemorySourceWorker",{strategy:ht("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:s,objectIdField:n,hasM:r,hasZ:o,timeInfo:l,dateFieldsTimeZone:c}=this.layer,f=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const y=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",P=>{zt.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),P.preventDefault()}));const _={features:y.features,fields:i==null?void 0:i.map(P=>P.toJSON()),geometryType:EZ.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&r,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:f?null:s&&s.toJSON(),timeInfo:(l==null?void 0:l.toJSON())??null,dateFieldsTimeZone:c},x=await this._connection.invoke("load",_,{signal:e});for(const P of x.warnings)zt.getLogger(this.layer).warn("#load()",`${P.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:P});x.featureErrors.length&&zt.getLogger(this.layer).warn("#load()",`Encountered ${x.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:x.featureErrors});const S=x.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(y.inferredGeometryType)&&(S.geometryType=EZ.toJSON(y.inferredGeometryType)),this.sourceJSON=S,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),y.finish(x.assignedObjectIds)}};I([aV({Type:Xp,ensureType:Zo(Xp)})],Sp.prototype,"itemType",void 0),I([N()],Sp.prototype,"type",void 0),I([N({constructOnly:!0})],Sp.prototype,"layer",void 0),I([N({readOnly:!0})],Sp.prototype,"_workerGeometryType",null),I([N()],Sp.prototype,"sourceJSON",void 0),Sp=I([De("esri.layers.graphics.sources.MemorySource")],Sp);function uqe(t){return"portalItem"in t}const cqe=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):uqe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return I([N({type:String})],e.prototype,"apiKey",null),e=I([De("esri.layers.mixins.APIKeyMixin")],e),e},hpe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},dpe=Object.values(hpe),fpe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${dpe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),hqe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${dpe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),dqe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function m0t(t){return fpe.test(t)}function BC(t){if(t==null)return null;const e=yl(t),i=(e==null?void 0:e.path.match(fpe))||(e==null?void 0:e.path.match(hqe));if(!i)return null;const[,s,n,r,o]=i,l=n.indexOf("/");return{title:vG(l!==-1?n.slice(l+1):n),serverType:hpe[r.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:s}}}function fqe(t){const e=yl(t).path.match(dqe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function vG(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function pqe(t,e){const i=[];if(t){const s=BC(t);s!=null&&s.title&&i.push(s.title)}if(e){const s=vG(e);i.push(s)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function ppe(t){let e=zc(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")))}function mqe(t,e){return t&&_ae(bae(t,e))}function gqe(t){let{url:e}=t;if(!e)return{url:e};e=bae(e,t.logger);const i=yl(e),s=BC(i.path);let n;if(s!=null)s.sublayer!=null&&t.layer.layerId==null&&(n=s.sublayer),e=s.url.path;else if(t.nonStandardUrlAllowed){const r=fqe(i.path);r!=null&&(e=r.serviceUrl,n=r.sublayerId)}return{url:_ae(e),layerId:n}}function yqe(t,e,i,s,n){rv(e,s,"url",n),s.url&&t.layerId!=null&&(s.url=v2(s.url,i,t.layerId.toString()))}function g0t(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),s=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),r=e.includes("/wmsserver");return i&&(s||n||r)}function y0t(t){var s;if(!t)return!1;const e=new Hl(pl(t)),i=(s=e.authority)==null?void 0:s.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const vqe=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=BC(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",mqe(i,zt.getLogger(this)))}};return I([N()],e.prototype,"title",null),I([N({type:String})],e.prototype,"url",null),e=I([De("esri.layers.mixins.ArcGISService")],e),e},_qe=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return I([N({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=I([De("esri.layers.mixins.CustomParametersMixin")],e),e},bqe=cAe(),mpe=new Map,gpe=new Map;async function v0t(t,e,i){if(!t||!i)return!1;if(!e)return!0;const s=new URL(t).host;let n=mpe.get(s);if(!n){const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Qs(r,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function _0t(t,e,i=!1){var r,o,l;if(!t||!e)return!0;const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(r=gpe.get(s))==null?void 0:r.entries();if(n){for(const[c,f]of n)if(f.name===e){const y=!((o=f.stack)!=null&&o.hasForwardEdits());if(!y&&i){const[{deleteForwardEdits:_},{default:x}]=await Promise.all([nt(()=>import("./deleteForwardEdits-DPj_AvSp.js"),__vite__mapDeps([300,14]),import.meta.url),nt(()=>import("./DeleteForwardEditsParameters-C4YDZ4mA.js"),[],import.meta.url)]),S=await _(s,c,new x({sessionId:bqe,moment:f.moment}));return S.success&&((l=f.stack)==null||l.clearForwardEdits()),S.success}return y}}return!0}function xqe(t,e){var n;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=(n=gpe.get(i))==null?void 0:n.entries();if(s){for(const[r,o]of s)if(o.name===e)return o.lockType==="edit"}return!1}const _G=new Sa.EventEmitter;function wqe(t){return _G.on("apply-edits",new WeakRef(t))}function Sqe(t){return _G.on("update-moment",new WeakRef(t))}function b0t(t,e,i=null,s=!1){const n=Cu();return s=e==null||s,_G.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:s,result:n.promise}),n}const ype=Symbol();function x0t(t){return t!=null&&typeof t=="object"&&ype in t}function jw(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function Fk(t,e,i){const s=new URL(t).host,n=mpe.get(s),r=o=>!o||o===n;return r(e)&&r(i)||e===i}const Eqe=t=>{var e;let i=class extends t{constructor(...s){super(...s),this[e]=!0,this._applyEditsHandler=n=>{const{serviceUrl:r,layerId:o,gdbVersion:l,mayReceiveServiceEdits:c,result:f}=n,y=r===this.url,_=o!=null&&this.layerId!=null&&o===this.layerId,x=jw(this),S=jw(this)&&Fk(r,l,this.gdbVersion);if(!y||x&&!S||!_&&!c)return;const P=f.then(A=>{var F;if(this.lastEditsEventDate=new Date,_&&(A.addedFeatures.length||A.updatedFeatures.length||A.deletedFeatures.length||A.addedAttachments.length||A.updatedAttachments.length||A.deletedAttachments.length))return this.emit("edits",Ue(A)),A;const k=(F=A.editedFeatures)==null?void 0:F.find(({layerId:G})=>G===this.layerId);if(k){const{adds:G,updates:V,deletes:B}=k.editedFeatures,W={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:G?G.map(({attributes:J})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],deletedFeatures:B?B.map(({attributes:J})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],updatedFeatures:V?V.map(({current:{attributes:J}})=>({objectId:this.objectIdField&&J[this.objectIdField],globalId:this.globalIdField&&J[this.globalIdField]})):[],editedFeatures:Ue(A.editedFeatures),exceededTransferLimit:!1,historicMoment:Ue(A.historicMoment)};return this.emit("edits",W),W}const $={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:Ue(A.editedFeatures),exceededTransferLimit:!1,historicMoment:Ue(A.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(r,l,$.historicMoment)&&this.emit("edits",$),$}).then(A=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(r,l,A.historicMoment)&&(this.historicMoment=A.historicMoment),A));this.emit("apply-edits",{result:P})},this._updateMomentHandler=n=>{const{serviceUrl:r,gdbVersion:o,moment:l}=n,c=r===this.url,f=jw(this),y=jw(this)&&Fk(r,o,this.gdbVersion),_=jw(this)&&!Fk(r,this.gdbVersion,null);c&&f&&y&&_&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then(()=>{this.addHandles(wqe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(Sqe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(s,n,r){return"historicMoment"in this&&this.historicMoment!==r&&xqe(s,n)}};return e=ype,I([N()],i.prototype,"lastEditsEventDate",void 0),i=I([De("esri.layers.mixins.EditBusLayer")],i),i};var iF;let fb=iF=class extends wt{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new iF({mapLayerId:t,gdbVersion:e})}};I([ni({mapLayer:"map-layer"})],fb.prototype,"type",void 0),I([N({type:wn,json:{write:!0}})],fb.prototype,"mapLayerId",void 0),I([N({type:String,json:{write:!0}})],fb.prototype,"gdbVersion",void 0),fb=iF=I([De("esri.layers.support.source.MapLayerSource")],fb);var sF;let ap=sF=class extends wt{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:s,geometryType:n}=this,r={workspaceId:t,query:e,oidFields:i,spatialReference:(s==null?void 0:s.clone())??void 0,geometryType:n};return new sF(r)}};I([ni({queryTable:"query-table"})],ap.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],ap.prototype,"workspaceId",void 0),I([N({type:String,json:{write:!0}})],ap.prototype,"query",void 0),I([N({type:String,json:{write:!0}})],ap.prototype,"oidFields",void 0),I([N({type:qi,json:{write:!0}})],ap.prototype,"spatialReference",void 0),I([ni(MDe)],ap.prototype,"geometryType",void 0),ap=sF=I([De("esri.layers.support.source.QueryTableDataSource")],ap);var nF;let pb=nF=class extends wt{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new nF({workspaceId:t,dataSourceName:e})}};I([ni({raster:"raster"})],pb.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],pb.prototype,"dataSourceName",void 0),I([N({type:String,json:{write:!0}})],pb.prototype,"workspaceId",void 0),pb=nF=I([De("esri.layers.support.source.RasterDataSource")],pb);var rF;let ny=rF=class extends wt{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new rF({workspaceId:t,gdbVersion:e,dataSourceName:i})}};I([ni({table:"table"})],ny.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],ny.prototype,"workspaceId",void 0),I([N({type:String,json:{write:!0}})],ny.prototype,"gdbVersion",void 0),I([N({type:String,json:{write:!0}})],ny.prototype,"dataSourceName",void 0),ny=rF=I([De("esri.layers.support.source.TableDataSource")],ny);var oF,aF;const Cqe=wa()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let gu=oF=class extends wt{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return xQ()(t,e,i)}castLeftTableSource(t){return Bc(lF(),t)}readRightTableSource(t,e,i){return xQ()(t,e,i)}castRightTableSource(t){return Bc(lF(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:s,joinType:n}=this,r={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(s==null?void 0:s.clone())??void 0,joinType:n};return new oF(r)}};I([ni({joinTable:"join-table"})],gu.prototype,"type",void 0),I([N({type:String,json:{write:!0}})],gu.prototype,"leftTableKey",void 0),I([N({type:String,json:{write:!0}})],gu.prototype,"rightTableKey",void 0),I([N({json:{write:!0}})],gu.prototype,"leftTableSource",void 0),I([At("leftTableSource")],gu.prototype,"readLeftTableSource",null),I([Sn("leftTableSource")],gu.prototype,"castLeftTableSource",null),I([N({json:{write:!0}})],gu.prototype,"rightTableSource",void 0),I([At("rightTableSource")],gu.prototype,"readRightTableSource",null),I([Sn("rightTableSource")],gu.prototype,"castRightTableSource",null),I([ni(Cqe)],gu.prototype,"joinType",void 0),gu=oF=I([De("esri.layers.support.source.JoinTableDataSource")],gu);let zk=null;function xQ(){return zk||(zk=ix({types:lF()})),zk}let qk=null;function lF(){return qk||(qk={key:"type",base:null,typeMap:{"data-layer":kh,"map-layer":fb}}),qk}const Pqe={key:"type",base:null,typeMap:{"join-table":gu,"query-table":ap,raster:pb,table:ny}};let kh=aF=class extends wt{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new aF({fields:t,dataSource:e})}};I([ni({dataLayer:"data-layer"})],kh.prototype,"type",void 0),I([N({type:[yG],json:{write:!0}})],kh.prototype,"fields",void 0),I([N({types:Pqe,json:{write:!0}})],kh.prototype,"dataSource",void 0),kh=aF=I([De("esri.layers.support.source.DataLayerSource")],kh),kh.from=Zo(kh);let ry=class extends Hs(wt){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};I([N({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],ry.prototype,"onFields",void 0),I([N({type:String,json:{write:!0}})],ry.prototype,"operator",void 0),I([N({type:String,json:{write:!0}})],ry.prototype,"searchTerm",void 0),I([N({type:String,json:{write:!0}})],ry.prototype,"searchType",void 0),ry=I([De("esri.rest.support.FullTextSearch")],ry);const Tqe=ry;var uF;const wQ=new ps({upperLeft:"upper-left",lowerLeft:"lower-left"});let oy=uF=class extends wt{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new uF(Ue({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};I([N({type:cr,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],oy.prototype,"extent",void 0),I([N({type:["view","edit"],json:{write:!0}})],oy.prototype,"mode",void 0),I([N({type:String,json:{read:wQ.read,write:wQ.write}})],oy.prototype,"originPosition",void 0),I([N({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],oy.prototype,"tolerance",void 0),oy=uF=I([De("esri.rest.support.QuantizationParameters")],oy);const Iqe=oy,Mqe=new ps({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var cF;const SQ=new ps({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Ch=cF=class extends wt{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=Ue(t))}clone(){return new cF({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Ue(this.statisticParameters)})}};I([N({type:Number,json:{write:!0}})],Ch.prototype,"maxPointCount",void 0),I([N({type:Number,json:{write:!0}})],Ch.prototype,"maxRecordCount",void 0),I([N({type:Number,json:{write:!0}})],Ch.prototype,"maxVertexCount",void 0),I([N({type:String,json:{write:!0}})],Ch.prototype,"onStatisticField",void 0),I([N({type:String,json:{write:!0}})],Ch.prototype,"outStatisticFieldName",void 0),I([N({type:String,json:{read:{source:"statisticType",reader:SQ.read},write:{target:"statisticType",writer:SQ.write}}})],Ch.prototype,"statisticType",void 0),I([N({type:Object})],Ch.prototype,"statisticParameters",void 0),I([Ft("statisticParameters")],Ch.prototype,"writeStatisticParameters",null),Ch=cF=I([De("esri.rest.support.StatisticDefinition")],Ch);const Aqe=Ch;var x9;const Dqe=new ps({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let pi=x9=class extends wt{static from(t){return gC(x9,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const s in t){const n=t[s];Array.isArray(n)?i[s]=n.map(r=>r instanceof Date?r.getTime():r):n instanceof Date?i[s]=n.getTime():i[s]=n}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new x9(Ue({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};pi.MAX_MAX_RECORD_COUNT_FACTOR=5,I([N({json:{write:!0}})],pi.prototype,"aggregateIds",void 0),I([N({type:Boolean,json:{write:!0}})],pi.prototype,"cacheHint",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"compactGeometryEnabled",void 0),I([N({json:{write:!0}})],pi.prototype,"datumTransformation",void 0),I([Sn("datumTransformation")],pi.prototype,"castDatumTransformation",null),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"defaultSpatialReferenceEnabled",void 0),I([N({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],pi.prototype,"distance",void 0),I([N({type:kh,json:{write:!0}})],pi.prototype,"dynamicDataSource",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"formatOf3DObjects",void 0),I([N({type:[Tqe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],pi.prototype,"fullText",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"gdbVersion",void 0),I([N({types:CC,json:{read:EC,write:!0}})],pi.prototype,"geometry",void 0),I([N({type:Number,json:{write:!0}})],pi.prototype,"geometryPrecision",void 0),I([N({type:[String],json:{write:!0}})],pi.prototype,"groupByFieldsForStatistics",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"having",void 0),I([N({type:Date})],pi.prototype,"historicMoment",void 0),I([Ft("historicMoment")],pi.prototype,"writeHistoricMoment",null),I([N({type:Number,json:{write:!0}})],pi.prototype,"maxAllowableOffset",void 0),I([N({type:Number,cast:t=>t<1?1:t>pi.MAX_MAX_RECORD_COUNT_FACTOR?pi.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],pi.prototype,"maxRecordCountFactor",void 0),I([N({type:["xyFootprint"],json:{write:!0}})],pi.prototype,"multipatchOption",void 0),I([N({type:Number,json:{read:{source:"resultRecordCount"}}})],pi.prototype,"num",void 0),I([N({json:{write:!0}})],pi.prototype,"objectIds",void 0),I([N({type:[String],json:{write:!0}})],pi.prototype,"orderByFields",void 0),I([N({type:[String],json:{write:!0}})],pi.prototype,"outFields",void 0),I([N({type:qi,json:{name:"outSR",write:!0}})],pi.prototype,"outSpatialReference",void 0),I([N({type:[Aqe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],pi.prototype,"outStatistics",void 0),I([N({json:{write:!0}})],pi.prototype,"parameterValues",void 0),I([Ft("parameterValues")],pi.prototype,"writeParameterValues",null),I([N({type:Hi,json:{write:!0}})],pi.prototype,"pixelSize",void 0),I([N({type:Iqe,json:{write:!0}})],pi.prototype,"quantizationParameters",void 0),I([N({type:[Object],json:{write:!0}})],pi.prototype,"rangeValues",void 0),I([N({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],pi.prototype,"relationParameter",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"resultType",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnCentroid",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnDistinctValues",void 0),I([N({type:Boolean,json:{default:!0,write:!0}})],pi.prototype,"returnExceededLimitFeatures",void 0),I([N({type:Boolean,json:{write:!0}})],pi.prototype,"returnGeometry",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnQueryGeometry",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"returnM",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pi.prototype,"returnZ",void 0),I([N({type:qi,json:{write:!0}})],pi.prototype,"sourceSpatialReference",void 0),I([ni(Mqe,{ignoreUnknown:!1,name:"spatialRel"})],pi.prototype,"spatialRelationship",void 0),I([N({type:Number,json:{read:{source:"resultOffset"}}})],pi.prototype,"start",void 0),I([Ft("start"),Ft("num")],pi.prototype,"writeStart",null),I([N({type:String,json:{write:!0}})],pi.prototype,"sqlFormat",void 0),I([N({type:String,json:{write:!0}})],pi.prototype,"text",void 0),I([N({type:xg,json:{write:!0}})],pi.prototype,"timeExtent",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],pi.prototype,"timeReferenceUnknownClient",void 0),I([ni(Dqe,{ignoreUnknown:!1}),N({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],pi.prototype,"units",void 0),I([N({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],pi.prototype,"where",void 0),I([Ft("where")],pi.prototype,"writeWhere",null),pi=x9=I([De("esri.rest.support.Query")],pi);const Gg=pi;var hF;const Vk=new ps({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Gk=new ps({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let $d=hF=class extends wt{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:s,timeExtent:n,objectIds:r,units:o,distance:l}=this;return new Gg({geometry:Ue(i),objectIds:Ue(r),spatialRelationship:s,timeExtent:Ue(n),where:e,units:o,distance:l,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:s,objectIds:n,units:r,distance:o}=this;return new hF({geometry:Ue(e),objectIds:Ue(n),spatialRelationship:i,timeExtent:Ue(s),where:t,units:r,distance:o})}};I([N({type:String,json:{write:!0}})],$d.prototype,"where",void 0),I([N({types:CC,json:{write:!0}})],$d.prototype,"geometry",void 0),I([N({type:Vk.apiValues,json:{name:"spatialRel",read:{reader:Vk.read},write:{allowNull:!1,writer:Vk.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],$d.prototype,"spatialRelationship",void 0),I([N({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],$d.prototype,"distance",void 0),I([N({type:[Number],json:{write:!0}})],$d.prototype,"objectIds",void 0),I([N({type:Gk.apiValues,json:{read:Gk.read,write:{writer:Gk.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],$d.prototype,"units",void 0),I([N({type:xg,json:{write:!0}})],$d.prototype,"timeExtent",void 0),$d=hF=I([De("esri.layers.support.FeatureFilter")],$d);const kqe=$d;var dF;const EQ={read:{reader:cE},write:{writer:hE,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},CQ={read:{reader:cE},write:{writer:hE,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},PQ={name:"showExcludedLabels",default:!0};let ay=dF=class extends wt{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var s,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return(s=e.messages)==null||s.push(new rt("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new rt("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new dF({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};I([N({type:kqe,json:{write:{allowNull:!0,writer(t,e,i,s){const n=t==null?void 0:t.write({},s);n&&Object.keys(n).length!==0?Ka(i,n,e):Ka(i,null,e)}}}})],ay.prototype,"filter",void 0),I([N({json:{read:cE,write:{writer:hE,allowNull:!0},origins:{"web-map":EQ,"portal-item":EQ}}})],ay.prototype,"includedEffect",void 0),I([N({json:{read:cE,write:{writer:hE,allowNull:!0},origins:{"web-map":CQ,"portal-item":CQ}}})],ay.prototype,"excludedEffect",void 0),I([N({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":PQ,"portal-item":PQ}}})],ay.prototype,"excludedLabelsVisible",void 0),ay=dF=I([De("esri.layers.support.FeatureEffect")],ay);const Nqe=ay,TQ={write:{allowNull:!0}},$qe={type:Nqe,json:{origins:{"web-map":TQ,"portal-item":TQ}}},Oqe=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return I([N($qe)],e.prototype,"featureEffect",void 0),e=I([De("esri.layers.mixins.FeatureEffectLayer")],e),e};var K3;const n6=wa()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),vpe=n6.jsonValues.slice();rPe(vpe,"orthometric");const FS=wa()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Ph=K3=class extends wt{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return n6.write(t,e,i)}readHeightModel(t,e,i){return n6.read(t)||(i!=null&&i.messages&&i.messages.push(Rqe(t,{context:i})),null)}readHeightUnit(t,e,i){return FS.read(t)||(i!=null&&i.messages&&i.messages.push(IQ(t,{context:i})),null)}readHeightUnitService(t,e,i){return jae(t)||FS.read(t)||(i!=null&&i.messages&&i.messages.push(IQ(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new K3({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=Bae(e);return new K3({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new K3;return e.read(t,{origin:"web-scene"}),e}};function IQ(t,e){return new Jh("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function Rqe(t,e){return new Jh("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}I([N({type:n6.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:vpe,default:"ellipsoidal"}}}})],Ph.prototype,"heightModel",void 0),I([Ft("web-scene","heightModel")],Ph.prototype,"writeHeightModel",null),I([At(["web-scene","service"],"heightModel")],Ph.prototype,"readHeightModel",null),I([N({type:FS.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:FS.jsonValues,write:FS.write}}}})],Ph.prototype,"heightUnit",void 0),I([At("web-scene","heightUnit")],Ph.prototype,"readHeightUnit",null),I([At("service","heightUnit")],Ph.prototype,"readHeightUnitService",null),I([N({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Ph.prototype,"vertCRS",void 0),I([At("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Ph.prototype,"readVertCRS",null),Ph=K3=I([De("esri.geometry.HeightModelInfo")],Ph);const Lqe=Ph;let lp=class extends Hs(wt){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};I([N()],lp.prototype,"creatorField",void 0),I([N()],lp.prototype,"creationDateField",void 0),I([N()],lp.prototype,"editorField",void 0),I([N()],lp.prototype,"editDateField",void 0),I([N()],lp.prototype,"realm",void 0),I([N(GI("dateFieldsTimeReference",!0))],lp.prototype,"timeZone",void 0),lp=I([De("esri.layers.support.EditFieldsInfo")],lp);const Fqe=lp;let Vd=class extends Hs(wt){constructor(e){super(e)}};I([N({constructOnly:!0,json:{write:!0}})],Vd.prototype,"name",void 0),I([N({constructOnly:!0,json:{write:!0}})],Vd.prototype,"fields",void 0),I([N({constructOnly:!0,json:{write:!0}})],Vd.prototype,"isAscending",void 0),I([N({constructOnly:!0,json:{write:!0}})],Vd.prototype,"indexType",void 0),I([N({constructOnly:!0,json:{write:!0}})],Vd.prototype,"isUnique",void 0),I([N({constructOnly:!0,json:{write:!0}})],Vd.prototype,"description",void 0),Vd=I([De("esri.layers.support.FeatureIndex")],Vd);async function zqe(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=_pe(t));const s=qqe(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=s;let r=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(r==null?r=o:r.features=r.features.concat(o.features),r.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;e.start+=s}return r}function qqe(t){return _pe(t)*Vqe(t)}function Vqe(t){return t.capabilities.query.maxRecordCount||2e3}function _pe(t){return t.capabilities.query.supportsMaxRecordCountFactor?Gg.MAX_MAX_RECORD_COUNT_FACTOR:1}var fF;let $o=fF=class extends wt{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new fF(Ue({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};I([N({type:[String],json:{write:!0}})],$o.prototype,"attachmentTypes",void 0),I([N({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],$o.prototype,"attachmentsWhere",void 0),I([N({type:Boolean,json:{write:!0}})],$o.prototype,"cacheHint",void 0),I([N({type:[String],json:{write:!0}})],$o.prototype,"keywords",void 0),I([N({type:[String],json:{write:!0}})],$o.prototype,"globalIds",void 0),I([N({json:{write:!0}})],$o.prototype,"name",void 0),I([N({type:Number,json:{read:{source:"resultRecordCount"}}})],$o.prototype,"num",void 0),I([N({type:[Number],json:{write:!0}})],$o.prototype,"objectIds",void 0),I([N({type:Boolean,json:{default:!1,write:!0}})],$o.prototype,"returnMetadata",void 0),I([N({type:[Number],json:{write:!0}})],$o.prototype,"size",void 0),I([N({type:Number,json:{read:{source:"resultOffset"}}})],$o.prototype,"start",void 0),I([Ft("start"),Ft("num")],$o.prototype,"writeStart",null),I([N({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],$o.prototype,"where",void 0),$o=fF=I([De("esri.rest.support.AttachmentQuery")],$o),$o.from=Zo($o);const Gqe=$o;var pF;let tr=pF=class extends wt{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new pF(Ue({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};I([N({type:Boolean,json:{write:!0}})],tr.prototype,"cacheHint",void 0),I([N({type:kh,json:{write:!0}})],tr.prototype,"dynamicDataSource",void 0),I([N({type:String,json:{write:!0}})],tr.prototype,"gdbVersion",void 0),I([N({type:Number,json:{write:!0}})],tr.prototype,"geometryPrecision",void 0),I([N({type:Date})],tr.prototype,"historicMoment",void 0),I([Ft("historicMoment")],tr.prototype,"_writeHistoricMoment",null),I([N({type:Number,json:{write:!0}})],tr.prototype,"maxAllowableOffset",void 0),I([N({json:{write:!0}})],tr.prototype,"objectIds",void 0),I([N({type:[String],json:{write:!0}})],tr.prototype,"orderByFields",void 0),I([N({type:[String],json:{write:!0}})],tr.prototype,"outFields",void 0),I([N({type:qi,json:{read:{source:"outSR"},write:{target:"outSR"}}})],tr.prototype,"outSpatialReference",void 0),I([N({json:{write:!0}})],tr.prototype,"relationshipId",void 0),I([N({type:Number,json:{read:{source:"resultOffset"}}})],tr.prototype,"start",void 0),I([Ft("start"),Ft("num")],tr.prototype,"writeStart",null),I([N({type:Number,json:{read:{source:"resultRecordCount"}}})],tr.prototype,"num",void 0),I([N({json:{write:!0}})],tr.prototype,"returnGeometry",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],tr.prototype,"returnM",void 0),I([N({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],tr.prototype,"returnZ",void 0),I([N({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],tr.prototype,"where",void 0),tr=pF=I([De("esri.rest.support.RelationshipQuery")],tr),tr.from=Zo(tr);const bG=tr,C0t=Object.freeze(Object.defineProperty({__proto__:null,default:bG},Symbol.toStringTag,{value:"Module"})),mF=new ps({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function jqe(t,e,i,s){const n=await jg(t);if(await xG(t,e,s),!n.addAttachment)throw new rt(s,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function xG(t,e,i){var r,o;const{attributes:s}=e,{objectIdField:n}=t;return(o=(r=t.capabilities)==null?void 0:r.data)!=null&&o.supportsAttachment?e?s?n&&s[n]?Promise.resolve():Promise.reject(new rt(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new rt(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new rt(i,"A feature is required to add/delete/update attachments")):Promise.reject(new rt(i,"this layer doesn't support attachments"))}async function Bqe(t,e,i,s,n){const r=await jg(t);if(await xG(t,e,n),!r.updateAttachment)throw new rt(n,"Layer source does not support updateAttachment capability");return r.updateAttachment(e,i,s)}async function Hqe(t,e,i){const{applyEdits:s}=await nt(()=>import("./editingSupport-TNPxOXe0.js"),__vite__mapDeps([141,12,13,14,15,65]),import.meta.url),n=await t.load();let r=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(r={...r,globalIdToObjectId:await hVe(n,e.deleteFeatures,n.globalIdField)}),s(n,n.source,e,i)}async function Uqe(t,e,i){const{uploadAssets:s}=await nt(()=>import("./editingSupport-TNPxOXe0.js"),__vite__mapDeps([141,12,13,14,15,65]),import.meta.url),n=await t.load();return s(n,n.source,e,i)}async function Yqe(t,e,i,s){const n=await jg(t);if(await xG(t,e,s),!n.deleteAttachments)throw new rt(s,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function Xqe(t,e,i){const s=(await t.load({signal:e==null?void 0:e.signal})).source;if(!s.fetchRecomputedExtents)throw new rt(i,"Layer source does not support fetchUpdates capability");return s.fetchRecomputedExtents(e)}async function Wqe(t,e,i,s){var S,P;e=Gqe.from(e),await t.load();const n=t.source,r=t.capabilities;if(!((S=r==null?void 0:r.data)!=null&&S.supportsAttachment))throw new rt(s,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:l,globalIds:c,num:f,size:y,start:_,where:x}=e;if(!((P=r==null?void 0:r.operations)!=null&&P.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(c==null?void 0:c.length)>0||(y==null?void 0:y.length)>0||f||_||x))throw new rt(s,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(l!=null&&l.length||c!=null&&c.length||x))throw new rt(s,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new rt(s,"Layer source does not support queryAttachments capability",e);return n.queryAttachments(e)}async function Zqe(t,e,i,s){const n=await jg(t);if(!n.queryObjectIds)throw new rt(s,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(Gg.from(e)??t.createQuery(),i)}async function Kqe(t,e,i,s){const n=await jg(t);if(!n.queryFeatureCount)throw new rt(s,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(Gg.from(e)??t.createQuery(),i)}async function Jqe(t,e,i,s){const n=await jg(t);if(!n.queryExtent)throw new rt(s,"Layer source does not support queryExtent capability");return n.queryExtent(Gg.from(e)??t.createQuery(),i)}async function Qqe(t,e,i,s){const n=await jg(t);if(!n.queryRelatedFeatures)throw new rt(s,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(bG.from(e),i)}async function eVe(t,e,i,s){const n=await jg(t);if(!n.queryRelatedFeaturesCount)throw new rt(s,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(bG.from(e),i)}async function tVe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:s}=await e.refresh();if(s!=null&&(t.sourceJSON={...t.sourceJSON,...s},t.read(s,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await hhe(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function iVe(t){var o,l;const e=new Gg,i=(o=t.capabilities)==null?void 0:o.data,s=(l=t.capabilities)==null?void 0:l.query;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,s&&(e.compactGeometryEnabled=s.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=s.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:n,timeExtent:r}=t;return e.timeExtent=n!=null&&r!=null?r.offset(-n.value,n.unit):r||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function bpe(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const s of i)if(s.type==="esriFieldTypeGlobalID")return s.name}}function xpe(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const s of i)if(s.type==="esriFieldTypeOID")return s.name}}function sVe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function nVe(t,e){const{subtypes:i,subtypeField:s}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!s)return null;const n=e.attributes[s];return n==null?null:i.find(r=>r.code===n)}function rVe(t,e){var o,l;const{fieldsIndex:i,subtypeField:s}=t,{name:n,type:r}=i.get(e)??{};if(!n)return null;if((s&&((o=i.get(s))==null?void 0:o.name))===n&&((l=t.subtypes)!=null&&l.length)){const c=t.subtypes.map(f=>new Py({code:wpe(f.code,r),name:f.name}));if(c!=null&&c.length)return new hA({codedValues:c})}return null}function oVe(t,e){var r,o;const{fieldsIndex:i}=t,{name:s,type:n}=i.get(e)??{};if(!s)return null;if(("typeIdField"in t?(r=i.get(t.typeIdField))==null?void 0:r.name:null)===s&&"types"in t&&((o=t.types)!=null&&o.length)){const l=t.types.map(c=>new Py({code:wpe(c.id,n),name:c.name}));return new hA({codedValues:l})}return null}function wpe(t,e){return e?Mhe({type:e})&&typeof t=="number"?`${t}`:gNe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function jg(t){return(await t.load()).source}async function aVe(t,e){if(!Li||Li.findCredential(t))return;let i;try{const s=await Vhe(t,e);s&&(i=await Li.checkSignInStatus(`${s}/sharing`))}catch{}if(i)try{const s=e!=null?e.signal:null;await Li.getCredential(t,{signal:s})}catch{}}async function lVe(t,e,i){var n;const s=(n=t.parsedUrl)==null?void 0:n.path;s&&t.authenticationTriggerEvent===e&&await aVe(s,i)}function uVe(t){return!w9(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const jk=ix({types:Hde});function wG(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new pG({defaultSymbol:jk(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(s=>({id:s.id,symbol:jk(s.symbol,s,e)}))}):new wx({symbol:jk(t.defaultSymbol,t,e)})}function cVe(t){var s,n,r;let e=(s=t.sourceJSON)==null?void 0:s.cacheMaxAge;if(!e)return!1;const i=(r=(n=t.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:r.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function hVe(t,e,i){if(e==null)return null;const s=[],{objectIdField:n}=t;if(e.forEach(f=>{let y=null;if("attributes"in f){const{attributes:_}=f;y={globalId:_[i],objectId:_[n]!=null&&_[n]!==-1?_[n]:null}}else y={globalId:f.globalId,objectId:f.objectId!=null&&f.objectId!==-1?f.objectId:null};y.globalId!=null&&(y.objectId!=null&&y.objectId!==-1||s.push(y.globalId))}),s.length===0)return null;const r=t.createQuery();r.where=s.map(f=>`${i}='${f}'`).join(" OR "),r.returnGeometry=!1,r.outFields=[n,i],r.cacheHint=!1;const o=await eAe(zqe(t,r));if(!o.ok)return null;const l=new Map,c=o.value.features;for(const f of c){const y=f.attributes[i],_=f.attributes[n];y!=null&&_!=null&&_!==-1&&l.set(hAe(y),_)}return l}function dVe(t,e,i){if(!e||!i||!t)return null;const s=i.getAttribute(e);return s==null?null:t.find(n=>{const{id:r}=n;return r!=null&&r.toString()===s.toString()})??null}function w9(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||fVe(t)}function fVe(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map(s=>s.trim()).includes("map"))}function pVe(t,e,i){const s=e==null?void 0:e.queryBins;if(!s)throw new rt(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!s.supportsAutoInterval)throw new rt(i,"Layer source does not support auto-interval binning");break;case"date":if(!s.supportsDate)throw new rt(i,"Layer source does not support date binning");break;case"fixed-boundaries":if(!s.supportsFixedBoundaries)throw new rt(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!s.supportsFixedInterval)throw new rt(i,"Layer source does not support fixed-interval binning")}const n=s==null?void 0:s.supportedStatistics;if(t.outStatistics&&n){const r=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const l=r.get(o);if(l&&!n[l])throw new rt(i,`Layer source does not support ${o} statistic type`)}}}let mb=class extends Hs(wt){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};I([N({type:String,json:{read:{source:"shapeAreaFieldName"}}})],mb.prototype,"shapeAreaField",void 0),I([N({type:String,json:{read:{source:"shapeLengthFieldName"}}})],mb.prototype,"shapeLengthField",void 0),I([N({type:String,json:{read:t=>G9e.read(t)||j9e.read(t)}})],mb.prototype,"units",void 0),mb=I([De("esri.layers.support.GeometryFieldsInfo")],mb);const mVe=mb;var gF;let gb=gF=class extends wt{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ui}clone(){return new gF({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};I([N({type:String,json:{write:!0}})],gb.prototype,"floorField",void 0),I([N({json:{read:!1,write:!1}})],gb.prototype,"viewAllMode",void 0),I([N({json:{read:!1,write:!1}})],gb.prototype,"viewAllLevelIds",void 0),gb=gF=I([De("esri.layers.support.LayerFloorInfo")],gb);const gVe=gb,MQ=new ps({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),AQ=new ps({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let gc=class extends Hs(wt){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};I([N({json:{read:MQ.read,write:MQ.write}})],gc.prototype,"cardinality",void 0),I([N({json:{read:!0,write:!0}})],gc.prototype,"composite",void 0),I([N({json:{read:!0,write:!0}})],gc.prototype,"id",void 0),I([N({json:{read:!0,write:!0}})],gc.prototype,"keyField",void 0),I([N({json:{read:!0,write:!0}})],gc.prototype,"keyFieldInRelationshipTable",void 0),I([N({json:{read:!0,write:!0}})],gc.prototype,"name",void 0),I([N({json:{read:!0,write:!0}})],gc.prototype,"relatedTableId",void 0),I([N({json:{read:!0,write:!0}})],gc.prototype,"relationshipTableId",void 0),I([N({json:{read:AQ.read,write:AQ.write}})],gc.prototype,"role",void 0),gc=I([De("esri.layers.support.Relationship")],gc);const yVe=gc;function Jt(t,e,i){return!!Spe(t,e,i)}function J3(t,e,i){return Spe(t,e,i)}function Spe(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const vVe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function _Ve(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(s=>s.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function HC(t,e){var s;const i=(s=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:s.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function bVe(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map(s=>s.toLowerCase());return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_continuous")),percentileDiscrete:!!(e!=null&&e.includes("percentile_discrete")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function Epe(t,e){return{analytics:xVe(t),attachment:wVe(t),data:SVe(t),metadata:EVe(t),operations:CVe(t.capabilities,t,e),query:PVe(t,e),queryBins:MVe(t),queryRelated:TVe(t),queryTopFeatures:IVe(t),editing:AVe(t)}}function xVe(t){return{supportsCacheHint:HC(t.advancedQueryCapabilities,"queryAnalytics")}}function wVe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:HC(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Jt(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(s=>{const n=vVe[s.name];n&&(i[n]=!!s.isEnabled)}),i}function SVe(t){return{isVersioned:Jt(t,"isDataVersioned",!1),isBranchVersioned:Jt(t,"isDataBranchVersioned",!1),supportsAttachment:Jt(t,"hasAttachments",!1),supportsM:Jt(t,"hasM",!1),supportsZ:Jt(t,"hasZ",!1)}}function EVe(t){return{supportsAdvancedFieldProperties:Jt(t,"supportsFieldDescriptionProperty",!1)}}function CVe(t,e,i){const s=t?t.toLowerCase().split(",").map(x=>x.trim()):[],n=i?BC(i):null,r=s.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=s.includes("editing")&&!e.datesInUnknownTimezone;let l=o&&s.includes("create"),c=o&&s.includes("delete"),f=o&&s.includes("update");const y=s.includes("changetracking"),_=e.advancedQueryCapabilities;return o&&!(l||c||f)&&(l=c=f=!0),{supportsCalculate:Jt(e,"supportsCalculate",!1),supportsTruncate:Jt(e,"supportsTruncate",!1),supportsValidateSql:Jt(e,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:c,supportsEditing:o,supportsChangeTracking:y,supportsQuery:r,supportsQueryAnalytics:Jt(_,"supportsQueryAnalytic",!1),supportsQueryAttachments:Jt(_,"supportsQueryAttachments",!1),supportsQueryBins:Jt(_,"supportsQueryBins",!1),supportsQueryTopFeatures:Jt(_,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Jt(e,"supportsAttachmentsResizing",!1),supportsSync:s.includes("sync"),supportsUpdate:f,supportsExceedsLimitStatistics:Jt(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Jt(e,"supportsAsyncConvert3D",!1)}}function PVe(t,e){const i=t.advancedQueryCapabilities,s=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,r=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),l=!o||r>=ht("mapserver-pbf-version-support"),c=ppe(e),f=new Set((t.supportedQueryFormats??"").split(",").map(y=>y.toLowerCase().trim()));return{maxRecordCount:J3(t,"maxRecordCount",void 0),maxRecordCountFactor:J3(t,"maxRecordCountFactor",void 0),standardMaxRecordCount:J3(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:_Ve(i),supportsCacheHint:Jt(i,"supportsQueryWithCacheHint",!1)||HC(i,"query"),supportsCentroid:Jt(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:c,supportsDefaultSpatialReference:Jt(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Jt(i,"supportsDisjointSpatialRel",!1),supportsDistance:Jt(i,"supportsQueryWithDistance",!1),supportsDistinct:Jt(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Jt(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:l&&f.has("pbf"),supportsFullTextSearch:Jt(i,"supportsFullTextSearch",!1),supportsGeometryProperties:Jt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Jt(i,"supportsHavingClause",!1),supportsHistoricMoment:Jt(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Jt(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Jt(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Jt(i,"supportsPagination",!1),supportsPercentileStatistics:Jt(i,"supportsPercentileStatistics",!1),supportsQuantization:Jt(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Jt(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Jt(s,"allowAnonymousToQuery",!0),supportsQueryByOthers:Jt(s,"allowOthersToQuery",!0),supportsQueryGeometry:Jt(t,"supportsReturningQueryGeometry",!1),supportsResultType:Jt(i,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:Jt(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Jt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Jt(t,"useStandardizedQueries",!1),supportsStatistics:Jt(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:Jt(i,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:J3(t,"tileMaxRecordCount",void 0)}}function TVe(t){const e=t.advancedQueryCapabilities,i=Jt(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Jt(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:HC(e,"queryRelated")}}function IVe(t){return{supportsCacheHint:HC(t.advancedQueryCapabilities,"queryTopFilter")}}function MVe(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:Jt(e,"supportsDateBin",!1),supportsFixedInterval:Jt(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:Jt(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Jt(e,"supportsFixedBoundariesBin",!1),supportedStatistics:bVe(e)}}function AVe(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Jt(t,"allowGeometryUpdates",!0),supportsGlobalId:Jt(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Jt(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Jt(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Jt(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Jt(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Jt(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Jt(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Jt(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Jt(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Jt(i,"supportsAsyncApplyEdits",!1),zDefault:J3(t,"zDefault",void 0)}}function I0t(t){var e;return{operations:{supportsAppend:Jt(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:Jt(t,"supportsExportClip",!1),supportsExportFrameset:Jt(t,"supportsExportFrameset",!1),supportsMensuration:Jt(t,"supportsMensuration",!1),supportsUpdate:Jt(t,"supportsUpdate",!1)}}}let up=class extends Hs(wt){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const s of Object.keys(e))i[s]=dA(e[s]);return i}writeDomains(e,i){var n;if(!e)return;const s={};for(const r of Object.keys(e))e[r]&&(s[r]=(n=e[r])==null?void 0:n.toJSON());i.domains=s}};I([N({type:Number,json:{write:!0}})],up.prototype,"code",void 0),I([N({type:Object,json:{write:!0}})],up.prototype,"defaultValues",void 0),I([N({json:{write:!0}})],up.prototype,"domains",void 0),I([At("domains")],up.prototype,"readDomains",null),I([Ft("domains")],up.prototype,"writeDomains",null),I([N({type:String,json:{write:!0}})],up.prototype,"name",void 0),up=I([De("esri.layers.support.Subtype")],up);const DVe=up,kVe=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ui.ofType(Vd)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=qi.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){var n;if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:r,operations:o,editing:l}=i;if(!r.supportsQueryByOthers||!r.supportsQueryByAnonymous||o.supportsEditing&&!(l.supportsUpdateByOthers&&l.supportsUpdateByAnonymous&&l.supportsDeleteByOthers&&l.supportsDeleteByAnonymous))return"load"}if((n=this.serviceDefinitionExpression)!=null&&n.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(cVe(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const s=this.editFieldsInfo;return(s!=null&&s.creatorField||s!=null&&s.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,s){return Epe(s,this.url)}readEditingInfo(i,s){const{editingInfo:n}=s;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const s=Ue(i),{operations:n,editing:r}=s;return w9(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),s):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=r.supportsDeleteByOthers=r.supportsGeometryUpdate=r.supportsUpdateByOthers=!0,s):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=r.supportsGeometryUpdate=!0),s)}readGlobalIdFieldFromService(i,s){return bpe(s)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||w9(this))return!1;const{operations:s,editing:n}=i;return s.supportsEditing&&!(s.supportsAdd&&s.supportsDelete&&s.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:s,editing:n}=i;return w9(this)?!s.supportsQuery:!(s.supportsAdd&&s.supportsDelete&&s.supportsEditing&&s.supportsQuery&&s.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,s){return s.type==="Table"}readMaxScale(i,s){return s.effectiveMaxScale||i||0}readMinScale(i,s){return s.effectiveMinScale||i||0}readObjectIdFieldFromService(i,s){return xpe(s)}readServiceDefinitionExpression(i,s){return s.definitionQuery||s.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const s=gqe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:zt.getLogger(this)});this._set("url",s.url),s.layerId!=null&&this._set("layerId",s.layerId)}writeUrl(i,s,n,r){yqe(this,i,null,s,r)}readVersion(i,s){return sVe(s)}};return I([N({readOnly:!0})],e.prototype,"authenticationTriggerEvent",null),I([N({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),I([N({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),I([At("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),I([N(GI("dateFieldsTimeReference"))],e.prototype,"dateFieldsTimeZone",void 0),I([N({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),I([N({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),I([N({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),I([N({readOnly:!0,type:Fqe})],e.prototype,"editFieldsInfo",void 0),I([N({readOnly:!0})],e.prototype,"editingInfo",void 0),I([At("editingInfo")],e.prototype,"readEditingInfo",null),I([N({readOnly:!0})],e.prototype,"effectiveCapabilities",null),I([N((()=>{const i=Ue(RNe),s=i.json.origins;return s["web-map"]={read:!1,write:!1},s["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),I([N({type:gVe,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:Uo}}}}})],e.prototype,"floorInfo",void 0),I([N({type:cr,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),I([N()],e.prototype,"gdbVersion",void 0),I([N({readOnly:!0,type:mVe,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),I([N({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:mF.read}}}})],e.prototype,"geometryType",void 0),I([N({type:String})],e.prototype,"globalIdField",void 0),I([At("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),I([N({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),I([N({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),I([N({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),I([N({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),I([N({readOnly:!0,type:Lqe})],e.prototype,"heightModelInfo",void 0),I([N({type:Date})],e.prototype,"historicMoment",void 0),I([N({type:ui.ofType(Vd),readOnly:!0})],e.prototype,"indexes",void 0),I([N({readOnly:!0})],e.prototype,"isTable",void 0),I([At("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),I([N({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),I([N(qNe)],e.prototype,"maxScale",void 0),I([At("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),I([N(zNe)],e.prototype,"minScale",void 0),I([At("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),I([N({type:String})],e.prototype,"objectIdField",void 0),I([At("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),I([N(GI("preferredTimeReference"))],e.prototype,"preferredTimeZone",void 0),I([N({type:[yVe],readOnly:!0})],e.prototype,"relationships",void 0),I([N({type:Boolean})],e.prototype,"returnM",void 0),I([N({type:Boolean})],e.prototype,"returnZ",void 0),I([N({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),I([N({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),I([At("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),I([N({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),I([N()],e.prototype,"sourceJSON",void 0),I([N({type:qi,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),I([N({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),I([N({type:[DVe],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"subtypes",void 0),I([N({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),I([N($Ne)],e.prototype,"url",null),I([Ft("url")],e.prototype,"writeUrl",null),I([N({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),I([At("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=I([De("esri.layers.mixins.FeatureLayerBase")],e),e};let yb=class extends Hs(wt){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};I([N({type:String,json:{write:!0}})],yb.prototype,"expression",void 0),I([N({type:String,json:{write:!0}})],yb.prototype,"title",void 0),I([N({type:String,json:{write:!0}})],yb.prototype,"returnType",void 0),yb=I([De("esri.layers.support.ExpressionInfo")],yb);const SG=yb;var yF;let cp=yF=class extends wt{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new yF({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:Ue(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};I([N({type:Boolean,json:{write:!0}})],cp.prototype,"isAutoGenerated",void 0),I([N({type:String,json:{write:!0}})],cp.prototype,"name",void 0),I([N({type:String,json:{write:!0}})],cp.prototype,"alias",void 0),I([N({type:String,json:{write:!0}})],cp.prototype,"onStatisticField",void 0),I([N({type:SG,json:{write:!0}})],cp.prototype,"onStatisticExpression",void 0),I([N({type:String,json:{write:!0}})],cp.prototype,"statisticType",void 0),cp=yF=I([De("esri.layers.support.AggregateField")],cp);const cv=cp;let lg=class extends wt{constructor(){super(...arguments),this.type=null}};I([N({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],lg.prototype,"type",void 0),lg=I([De("esri.layers.support.FeatureReduction")],lg);const EG="__begin__",CG="__end__",NVe=new RegExp(EG,"ig"),$Ve=new RegExp(CG,"ig"),DQ=new RegExp("^"+EG,"i"),kQ=new RegExp(CG+"$","i"),r6='"',OVe=r6+" + ",RVe=" + "+r6;function LVe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function FVe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function PG(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=LVe(t.labelExpression),e.type="conventional"),e}function zVe(t){const e=PG(t);if(!e)return null;switch(e.type){case"conventional":return vF(e.expression);case"arcade":return e.expression}return null}function qVe(t){const e=PG(t);if(!e)return null;switch(e.type){case"conventional":return GVe(e.expression);case"arcade":return Cpe(e.expression)}return null}function vF(t){let e;return t?(e=dM(t,i=>EG+'$feature["'+i+'"]'+CG),e=DQ.test(e)?e.replace(DQ,""):r6+e,e=kQ.test(e)?e.replace(kQ,""):e+r6,e=e.replaceAll(NVe,OVe).replaceAll($Ve,RVe)):e='""',e}const VVe=/^\s*\{([^}]+)\}\s*$/i;function GVe(t){const e=t==null?void 0:t.match(VVe);return(e==null?void 0:e[1].trim())||null}const jVe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,BVe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,HVe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Cpe(t){if(!t)return null;let e=jVe.exec(t)||BVe.exec(t);return e?e[1]||e[3]:(e=HVe.exec(t),e?e[2]:null)}var _F;let x0=_F=class extends wt{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?vF(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=vF(this.value)),t!=null&&(e[i]=t)}clone(){return new _F({expression:this.expression,title:this.title,value:this.value})}};I([N({type:String,json:{write:{writerEnsuresNonNull:!0}}})],x0.prototype,"expression",void 0),I([At("expression",["expression","value"])],x0.prototype,"readExpression",null),I([Ft("expression")],x0.prototype,"writeExpression",null),I([N({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],x0.prototype,"title",void 0),I([N({json:{read:!1,write:!1}})],x0.prototype,"value",void 0),x0=_F=I([De("esri.layers.support.LabelExpressionInfo")],x0);const Ppe=x0;var bF;const _4=new ps({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function b4(t,e,i){return{enabled:!FO(i==null?void 0:i.layer)}}function Tpe(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function UVe(t){return(t==null?void 0:t.type)==="map-image"}function Ipe(t){var e,i;return!!UVe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function YVe(t){return Tpe(t)||Ipe(t==null?void 0:t.layer)}let Mr=bF=class extends wt{static evaluateWhere(t,e){const i=(s,n,r)=>{switch(n){case"=":return s==r;case"<>":return s!=r;case">":return s>r;case">=":return s>=r;case"<":return s<r;case"<=":return s<=r}return!1};try{if(t==null)return!0;const s=t.split(" ");if(s.length===3)return i(e[s[0]],s[1],s[2]);if(s.length===7){const n=i(e[s[0]],s[1],s[2]),r=s[3],o=i(e[s[4]],s[5],s[6]);switch(r){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=YRe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=FVe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=Cpe(this.labelExpressionInfo.expression);s&&(t="["+s+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,s){if(t==null&&this.labelExpression!=null&&Tpe(s))t=new Ppe({expression:this.getLabelExpressionArcade()});else if(!t)return;const n=t.toJSON(s);n.expression&&(e[i]=n)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return PG(this)}getLabelExpressionArcade(){return zVe(this)}getLabelExpressionSingleField(){return qVe(this)}hash(){return JSON.stringify(this)}clone(){return new bF({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Ue(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:Ue(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};I([N({type:String,json:{write:!0}})],Mr.prototype,"name",void 0),I([N({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:b4}}}}})],Mr.prototype,"allowOverrun",void 0),I([N({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:b4}}}}})],Mr.prototype,"deconflictionStrategy",void 0),I([N({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&Ipe(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Mr.prototype,"labelExpression",void 0),I([At("labelExpression")],Mr.prototype,"readLabelExpression",null),I([Ft("labelExpression")],Mr.prototype,"writeLabelExpression",null),I([N({type:Ppe,json:{write:{overridePolicy:(t,e,i)=>YVe(i)?{allowNull:!0}:{enabled:!1}}}})],Mr.prototype,"labelExpressionInfo",void 0),I([Ft("labelExpressionInfo")],Mr.prototype,"writeLabelExpressionInfo",null),I([N({type:_4.apiValues,json:{type:_4.jsonValues,read:_4.read,write:_4.write}})],Mr.prototype,"labelPlacement",void 0),I([N({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Mr.prototype,"labelPosition",void 0),I([N({type:Number})],Mr.prototype,"maxScale",void 0),I([Ft("maxScale")],Mr.prototype,"writeMaxScale",null),I([N({type:Number})],Mr.prototype,"minScale",void 0),I([Ft("minScale")],Mr.prototype,"writeMinScale",null),I([N({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:b4}}}}})],Mr.prototype,"repeatLabel",void 0),I([N({type:Number,cast:fs,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:b4}}}}})],Mr.prototype,"repeatLabelDistance",void 0),I([N({types:sRe,json:{origins:{"web-scene":{types:nRe,write:wK,default:null}},write:wK,default:null}})],Mr.prototype,"symbol",void 0),I([N({type:Boolean,json:{write:!0}})],Mr.prototype,"useCodedValues",void 0),I([N({type:String,json:{write:!0}})],Mr.prototype,"where",void 0),Mr=bF=I([De("esri.layers.support.LabelClass")],Mr);const fA=Mr;var xF;let Fa=xF=class extends lg{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=fs("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const s=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Ka(i,s,e)}readRenderer(t,e,i){var n;const s=(n=e.drawingInfo)==null?void 0:n.renderer;return s?_E(s,e,i)??void 0:wG(e,i)}clone(){return new xF({fields:Ue(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:Ue(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:Ue(this.popupTemplate),renderer:Ue(this.renderer),binType:Ue(this.binType),size:this.size})}};I([ni({binning:"binning"})],Fa.prototype,"type",void 0),I([ni({geohash:"geohash",square:"square"}),N({type:["geohash","square"]})],Fa.prototype,"binType",void 0),I([N({type:Number,json:{write:!0}})],Fa.prototype,"fixedBinLevel",void 0),I([N({type:[fA],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Fa.prototype,"labelingInfo",void 0),I([N($V)],Fa.prototype,"labelsVisible",void 0),I([N({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Fa.prototype,"maxScale",void 0),I([N(NV)],Fa.prototype,"popupEnabled",void 0),I([N({type:NC,json:{name:"popupInfo",write:!0}})],Fa.prototype,"popupTemplate",void 0),I([N({cast:t=>t==="auto"?t:tx(fs(t))})],Fa.prototype,"size",void 0),I([N({type:[cv],json:{write:!0}})],Fa.prototype,"fields",void 0),I([Ft("fields")],Fa.prototype,"writeFields",null),I([N({types:lA,json:{write:{target:"drawingInfo.renderer"}}})],Fa.prototype,"renderer",void 0),I([At("renderer",["drawingInfo.renderer"])],Fa.prototype,"readRenderer",null),Fa=xF=I([De("esri.layers.support.FeatureReductionBinning")],Fa);const Mpe=Fa;var wF;function NQ(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let Qr=wF=class extends wt{constructor(t){super(t),this.type="cluster",this.clusterRadius=fs("80px"),this.clusterMinSize=fs("12px"),this.clusterMaxSize=fs("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){var n,r;const s=(n=e.drawingInfo)==null?void 0:n.renderer;return(r=s==null?void 0:s.authoringInfo)!=null&&r.isAutoGenerated?null:s?NQ(s)?null:_E(s,e,i)??void 0:wG(e,i)}readSymbol(t,e,i){var n,r;const s=(n=e.drawingInfo)==null?void 0:n.renderer;if((r=s==null?void 0:s.authoringInfo)!=null&&r.isAutoGenerated)return null;if(s&&NQ(s)){const o=_E(s,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,s){var r,o;const n=(o=(r=this.renderer)==null?void 0:r.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const l=new wx({symbol:t});e.drawingInfo={renderer:l.write({},s)}}}writeFields(t,e,i){const s=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Ka(i,s,e)}readFields(t,e,i){return t.filter(s=>!s.isAutoGenerated).map(s=>cv.fromJSON(s))}clone(){return new wF({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Ue(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Ue(this.fields),maxScale:this.maxScale,renderer:Ue(this.renderer),symbol:Ue(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:Ue(this.popupTemplate)})}};I([N({type:["cluster"],readOnly:!0,json:{write:!0}})],Qr.prototype,"type",void 0),I([N({cast:t=>t==="auto"?t:tx(fs(t)),json:{write:!0}})],Qr.prototype,"clusterRadius",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],Qr.prototype,"clusterMinSize",void 0),I([N({type:Number,cast:fs,json:{write:!0}})],Qr.prototype,"clusterMaxSize",void 0),I([N({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Qr.prototype,"maxScale",void 0),I([N(NV)],Qr.prototype,"popupEnabled",void 0),I([N({type:NC,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Qr.prototype,"popupTemplate",void 0),I([N({types:lA,json:{write:{target:"drawingInfo.renderer"}}})],Qr.prototype,"renderer",void 0),I([At("renderer",["drawingInfo.renderer"])],Qr.prototype,"readRenderer",null),I([N({types:tRe})],Qr.prototype,"symbol",void 0),I([At("symbol",["drawingInfo.renderer"])],Qr.prototype,"readSymbol",null),I([Ft("symbol")],Qr.prototype,"writeSymbol",null),I([N({type:[fA],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Qr.prototype,"labelingInfo",void 0),I([N($V)],Qr.prototype,"labelsVisible",void 0),I([N({type:[cv],json:{write:!0}})],Qr.prototype,"fields",void 0),I([Ft("fields")],Qr.prototype,"writeFields",null),I([At("fields")],Qr.prototype,"readFields",null),Qr=wF=I([De("esri.layers.support.FeatureReductionCluster")],Qr);const Ape=Qr;var SF;let S9=SF=class extends lg{constructor(t){super(t),this.type="selection"}clone(){return new SF}};I([N({type:["selection"]})],S9.prototype,"type",void 0),S9=SF=I([De("esri.layers.support.FeatureReductionSelection")],S9);const $Q=S9,OQ={key:"type",base:lg,typeMap:{cluster:Ape,binning:Mpe}},XVe={types:{key:"type",base:lg,typeMap:{selection:$Q,cluster:Ape,binning:Mpe}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:OQ},"portal-item":{types:OQ},"web-scene":{types:{key:"type",base:lg,typeMap:{selection:$Q}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Uo}}}}},A_={Base64:0,Hex:1,String:2,Raw:3},s2=8,Dpe=(1<<s2)-1;function K0(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function WVe(t){const e=[];for(let i=0,s=t.length*s2;i<s;i+=s2)e[i>>5]|=(t.charCodeAt(i/s2)&Dpe)<<i%32;return e}function ZVe(t){const e=[];for(let i=0,s=32*t.length;i<s;i+=s2)e.push(String.fromCharCode(t[i>>5]>>>i%32&Dpe));return e.join("")}function KVe(t){const e="0123456789abcdef",i=[];for(let s=0,n=4*t.length;s<n;s++)i.push(e.charAt(t[s>>2]>>s%4*8+4&15)+e.charAt(t[s>>2]>>s%4*8&15));return i.join("")}function JVe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=[];for(let n=0,r=4*t.length;n<r;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let l=0;l<4;l++)8*n+6*l>32*t.length?s.push(e):s.push(i.charAt(o>>6*(3-l)&63))}return s.join("")}function QVe(t,e){return t<<e|t>>>32-e}function pA(t,e,i,s,n,r){return K0(QVe(K0(K0(e,t),K0(s,r)),n),i)}function Da(t,e,i,s,n,r,o){return pA(e&i|~e&s,t,e,n,r,o)}function ka(t,e,i,s,n,r,o){return pA(e&s|i&~s,t,e,n,r,o)}function Na(t,e,i,s,n,r,o){return pA(e^i^s,t,e,n,r,o)}function $a(t,e,i,s,n,r,o){return pA(i^(e|~s),t,e,n,r,o)}function eGe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,s=-271733879,n=-1732584194,r=271733878;for(let o=0;o<t.length;o+=16){const l=i,c=s,f=n,y=r;i=Da(i,s,n,r,t[o],7,-680876936),r=Da(r,i,s,n,t[o+1],12,-389564586),n=Da(n,r,i,s,t[o+2],17,606105819),s=Da(s,n,r,i,t[o+3],22,-1044525330),i=Da(i,s,n,r,t[o+4],7,-176418897),r=Da(r,i,s,n,t[o+5],12,1200080426),n=Da(n,r,i,s,t[o+6],17,-1473231341),s=Da(s,n,r,i,t[o+7],22,-45705983),i=Da(i,s,n,r,t[o+8],7,1770035416),r=Da(r,i,s,n,t[o+9],12,-1958414417),n=Da(n,r,i,s,t[o+10],17,-42063),s=Da(s,n,r,i,t[o+11],22,-1990404162),i=Da(i,s,n,r,t[o+12],7,1804603682),r=Da(r,i,s,n,t[o+13],12,-40341101),n=Da(n,r,i,s,t[o+14],17,-1502002290),s=Da(s,n,r,i,t[o+15],22,1236535329),i=ka(i,s,n,r,t[o+1],5,-165796510),r=ka(r,i,s,n,t[o+6],9,-1069501632),n=ka(n,r,i,s,t[o+11],14,643717713),s=ka(s,n,r,i,t[o],20,-373897302),i=ka(i,s,n,r,t[o+5],5,-701558691),r=ka(r,i,s,n,t[o+10],9,38016083),n=ka(n,r,i,s,t[o+15],14,-660478335),s=ka(s,n,r,i,t[o+4],20,-405537848),i=ka(i,s,n,r,t[o+9],5,568446438),r=ka(r,i,s,n,t[o+14],9,-1019803690),n=ka(n,r,i,s,t[o+3],14,-187363961),s=ka(s,n,r,i,t[o+8],20,1163531501),i=ka(i,s,n,r,t[o+13],5,-1444681467),r=ka(r,i,s,n,t[o+2],9,-51403784),n=ka(n,r,i,s,t[o+7],14,1735328473),s=ka(s,n,r,i,t[o+12],20,-1926607734),i=Na(i,s,n,r,t[o+5],4,-378558),r=Na(r,i,s,n,t[o+8],11,-2022574463),n=Na(n,r,i,s,t[o+11],16,1839030562),s=Na(s,n,r,i,t[o+14],23,-35309556),i=Na(i,s,n,r,t[o+1],4,-1530992060),r=Na(r,i,s,n,t[o+4],11,1272893353),n=Na(n,r,i,s,t[o+7],16,-155497632),s=Na(s,n,r,i,t[o+10],23,-1094730640),i=Na(i,s,n,r,t[o+13],4,681279174),r=Na(r,i,s,n,t[o],11,-358537222),n=Na(n,r,i,s,t[o+3],16,-722521979),s=Na(s,n,r,i,t[o+6],23,76029189),i=Na(i,s,n,r,t[o+9],4,-640364487),r=Na(r,i,s,n,t[o+12],11,-421815835),n=Na(n,r,i,s,t[o+15],16,530742520),s=Na(s,n,r,i,t[o+2],23,-995338651),i=$a(i,s,n,r,t[o],6,-198630844),r=$a(r,i,s,n,t[o+7],10,1126891415),n=$a(n,r,i,s,t[o+14],15,-1416354905),s=$a(s,n,r,i,t[o+5],21,-57434055),i=$a(i,s,n,r,t[o+12],6,1700485571),r=$a(r,i,s,n,t[o+3],10,-1894986606),n=$a(n,r,i,s,t[o+10],15,-1051523),s=$a(s,n,r,i,t[o+1],21,-2054922799),i=$a(i,s,n,r,t[o+8],6,1873313359),r=$a(r,i,s,n,t[o+15],10,-30611744),n=$a(n,r,i,s,t[o+6],15,-1560198380),s=$a(s,n,r,i,t[o+13],21,1309151649),i=$a(i,s,n,r,t[o+4],6,-145523070),r=$a(r,i,s,n,t[o+11],10,-1120210379),n=$a(n,r,i,s,t[o+2],15,718787259),s=$a(s,n,r,i,t[o+9],21,-343485551),i=K0(i,l),s=K0(s,c),n=K0(n,f),r=K0(r,y)}return[i,s,n,r]}function kpe(t,e=A_.Hex){const i=e||A_.Base64,s=eGe(WVe(t),t.length*s2);switch(i){case A_.Raw:return s;case A_.Hex:return KVe(s);case A_.String:return ZVe(s);case A_.Base64:return JVe(s)}}const tGe=()=>zt.getLogger("esri.views.2d.layers.support.clusterUtils");ht.add("esri-cluster-arcade-enabled",!0);const iGe=ht("esri-cluster-arcade-enabled"),sGe=new Set(["simple-line","simple-fill","picture-fill"]);function RQ(t,e){let i=e.clone();if(!nGe(i))return i;if(e.getSymbols().some(s=>sGe.has(s.type))&&(i=new wx({symbol:new Lu})),i.authoringInfo||(i.authoringInfo=new eG),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const s=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");s.forEach(n=>{n.type==="rotation"?n.field?n.field=C1(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=Bw(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=C1(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=C1(t,n.field,"avg","number"):n.valueExpression&&(n.field=Bw(t,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=s}switch(i.type){case"simple":break;case"pie-chart":for(const s of i.attributes)s.field?s.field=C1(t,s.field,"sum","number"):s.valueExpression&&(s.field=Bw(t,s.valueExpression,"sum","number"),s.valueExpression=null);break;case"unique-value":i.field?i.field=C1(t,i.field,"mode","string"):i.valueExpression&&(i.field=Bw(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=C1(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=C1(t,i.field,"avg","number"):i.valueExpression&&(i.field=Bw(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const nGe=t=>{const e=i=>tGe().error(new rt("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!iGe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function rGe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const s=i,n="field",r=e.toLowerCase()+",norm:"+n+","+s.toLowerCase();return"cluster_avg_"+kpe(r)}}}function Bw(t,e,i,s){const n=kpe(e),r=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(o=>o.name===r)||t.push(new cv({name:r,isAutoGenerated:!0,onStatisticExpression:new SG({expression:e,returnType:s}),statisticType:i})),r}function C1(t,e,i,s,n){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const r=rGe(i,e,n);return t.some(o=>o.name===r)||(i==="avg_norm"?t.push(new cv({name:r,isAutoGenerated:!0,onStatisticExpression:new SG({expression:`$feature.${e} / $feature.${n}`,returnType:s}),statisticType:"avg"})):t.push(new cv({name:r,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),r}const oGe=t=>{let e=class extends t{constructor(...i){super(...i),this.addHandles(xi(()=>this.renderer,()=>{if(this.featureReduction){const s=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",s)}},Hp))}set featureReduction(i){const s=this._normalizeFeatureReduction(i);this._set("featureReduction",s)}set renderer(i){}_withClusterVariable(i,s,n){const r=i.clone();return"visualVariables"in r&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.some(o=>o.type==="size")||r.visualVariables.push(new sA({field:"cluster_count",stops:[new s9({value:1}),new s9({useMinValue:!0,size:s}),new s9({useMaxValue:!0,size:n})]}))),r}_normalizeFeatureReduction(i){var _;if((i==null?void 0:i.type)!=="cluster")return i;const s=i.clone(),n=[new cv({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],r=(s.fields??[]).filter(x=>!x.isAutoGenerated),o=i.renderer&&!((_=i.renderer.authoringInfo)!=null&&_.isAutoGenerated),{clusterMinSize:l,clusterMaxSize:c}=s;if(o){s.fields=[...n,...r];const x=this._withClusterVariable(s.renderer,l,c);return s.effectiveFeatureRenderer=x,s.effectiveClusterRenderer=x,s}if(i.symbol){if(s.fields=[...n,...r],s.renderer=null,!this.renderer)return s.effectiveFeatureRenderer=null,s.effectiveClusterRenderer=null,s;const x=RQ(n,this.renderer),S=this._withClusterVariable(x,l,c),P="visualVariables"in S&&S.visualVariables?S.visualVariables:[],A=new wx({symbol:i.symbol,visualVariables:P});return s.fields=[...n,...r],s.effectiveFeatureRenderer=S,s.effectiveClusterRenderer=A,s}if(!this.renderer)return i;const f=RQ(n,this.renderer);s.fields=[...n,...r],s.renderer=f;const y=this._withClusterVariable(f,l,c);return s.effectiveFeatureRenderer=y,s.effectiveClusterRenderer=y,s}};return I([N(XVe)],e.prototype,"featureReduction",null),e=I([De("esri.layers.mixins.FeatureReductionLayer")],e),e};var EF;const x4=new ps({asc:"ascending",desc:"descending"});let vb=EF=class extends wt{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new EF({field:this.field,valueExpression:this.valueExpression,order:this.order})}};I([N({type:String,json:{write:!0}})],vb.prototype,"field",void 0),I([N({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],vb.prototype,"valueExpression",void 0),I([N({type:x4.apiValues,json:{type:x4.jsonValues,read:x4.read,write:x4.write}})],vb.prototype,"order",void 0),vb=EF=I([De("esri.layers.support.OrderByInfo")],vb);const Npe=vb;function aGe(t,e,i){if(!t)return null;const s=t.find(r=>!!r.field);if(!s)return null;const n=new Npe;return n.read(s,i),[n]}function lGe(t,e,i,s){const n=t.find(r=>!!r.field);n&&Ka(i,[n.toJSON()],e)}const uGe={type:[Npe],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:aGe},write:{writer:lGe}}},cGe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return I([N(uGe)],e.prototype,"orderBy",void 0),e=I([De("esri.layers.mixins.OrderedLayer")],e),e};let Q3=class extends Ei{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};I([N()],Q3.prototype,"updating",void 0),I([N()],Q3.prototype,"status",void 0),Q3=I([De("esri.layers.support.PublishingInfo")],Q3);const hGe=Q3,dGe=Symbol(),fGe=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const n=new hGe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(s){let o=0;const l=async f=>{let y;s.updating=!0;try{y=await this.fetchPublishingStatus()}catch{y="unavailable"}y!=="published"&&y!=="unavailable"||(s.status==="publishing"&&this.refresh(),c.remove()),s.status=y,s.updating=!1,c.removed||(o=setTimeout(l,f,f+125))},c={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>c.remove()),l(250),this.addHandles(c)}};return e=dGe,I([N({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=I([De("esri.layers.mixins.PublishableLayer")],i),i},J0=new ui,zS=new WeakMap;function pGe(t){gGe(t)&&J0.push(new WeakRef(t))}function mGe(t){const e=J0.find(i=>i.deref()===t);e&&J0.remove(e)}function gGe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function $pe(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:$pe(e,t%e):0}let Bk=0,w4=0;function yGe(){const t=Date.now();let e=!1;for(const i of J0){const s=i.deref();s?s.refreshInterval&&t-(zS.get(s)??0)+5>=6e4*s.refreshInterval&&(zS.set(s,t),s.refresh(t)):e=!0}if(e)for(let i=J0.length-1;i>=0;i--)J0.at(i).deref()||J0.removeAt(i)}wq(()=>{const t=Date.now();let e=0;for(const i of J0){const s=i.deref();s&&(e=$pe(Math.round(6e4*s.refreshInterval),e),s.refreshInterval?zS.get(s)||zS.set(s,t):zS.delete(s))}if(e!==w4){if(w4=e,clearInterval(Bk),w4===0)return void(Bk=0);Bk=setInterval(yGe,w4)}},Hp);const LQ=.1,vGe=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Pv(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||pGe(this)},()=>{})}destroy(){mGe(this)}castRefreshInterval(i){return i>=LQ?i:i<=0?0:LQ}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Kh(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})},s=>{zt.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}get test(){}};return I([N({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Uo}}}}})],e.prototype,"refreshInterval",void 0),I([Sn("refreshInterval")],e.prototype,"castRefreshInterval",null),I([N({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),I([N({readOnly:!0})],e.prototype,"refreshParameters",null),e=I([De("esri.layers.mixins.RefreshableLayer")],e),e},Ope=wa()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let eS=class extends Hs(wt){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Dce(this.value,this.unit,"milliseconds")}};I([ni(Ope,{nonNullable:!0})],eS.prototype,"unit",void 0),I([N({type:Number,json:{write:!0},nonNullable:!0})],eS.prototype,"value",void 0),eS=I([De("esri.time.TimeInterval")],eS);const o6=eS;function FQ(t,e){return o6.fromJSON({value:t,unit:e})}let ua=class extends Hs(wt){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?xg.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?FQ(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?FQ(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};I([N({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ua.prototype,"cumulative",void 0),I([N({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ua.prototype,"endField",void 0),I([N({type:xg,json:{write:{enabled:!0,allowNull:!0}}})],ua.prototype,"fullTimeExtent",void 0),I([At("fullTimeExtent",["timeExtent"])],ua.prototype,"readFullTimeExtent",null),I([Ft("fullTimeExtent")],ua.prototype,"writeFullTimeExtent",null),I([N({type:Boolean,json:{write:!0}})],ua.prototype,"hasLiveData",void 0),I([N({type:o6,json:{write:{enabled:!0,allowNull:!0}}})],ua.prototype,"interval",void 0),I([At("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ua.prototype,"readInterval",null),I([Ft("interval")],ua.prototype,"writeInterval",null),I([N({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ua.prototype,"startField",void 0),I([N(GI("timeReference",!0))],ua.prototype,"timeZone",void 0),I([N({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ua.prototype,"trackIdField",void 0),I([N({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ua.prototype,"useTime",void 0),I([N({type:[Date],json:{read:!1}})],ua.prototype,"stops",void 0),ua=I([De("esri.layers.support.TimeInfo")],ua);const Rpe=ua,_Ge={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Uo}}},bGe=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,s){const n=s.timeInfo.exportOptions;if(!n)return null;const r=n.timeOffset,o=Ope.fromJSON(n.timeOffsetUnits);return r&&o?new o6({value:r,unit:o}):null}set timeInfo(i){bhe(i,this.fieldsIndex),this._set("timeInfo",i)}};return I([N({type:xg,json:{write:!1}})],e.prototype,"timeExtent",void 0),I([N({type:o6})],e.prototype,"timeOffset",void 0),I([At("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),I([N({value:null,type:Rpe,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),I([N(_Ge)],e.prototype,"useViewTime",void 0),e=I([De("esri.layers.mixins.TemporalLayer")],e),e},zQ=new ps({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let w0=class extends Hs(wt){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};I([N({json:{write:!0}})],w0.prototype,"name",void 0),I([N({json:{write:!0}})],w0.prototype,"description",void 0),I([N({json:{read:zQ.read,write:zQ.write}})],w0.prototype,"drawingTool",void 0),I([N({json:{write:!0}})],w0.prototype,"prototype",void 0),I([N({json:{write:!0}})],w0.prototype,"thumbnail",void 0),w0=I([De("esri.layers.support.FeatureTemplate")],w0);const TG=w0;let hp=class extends Hs(wt){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const s of Object.keys(e))i[s]=dA(e[s]);return i}writeDomains(e,i){var n;const s={};for(const r of Object.keys(e))e[r]&&(s[r]=(n=e[r])==null?void 0:n.toJSON());i.domains=s}};I([N({json:{write:!0}})],hp.prototype,"id",void 0),I([N({json:{write:!0}})],hp.prototype,"name",void 0),I([N({json:{write:!0}})],hp.prototype,"domains",void 0),I([At("domains")],hp.prototype,"readDomains",null),I([Ft("domains")],hp.prototype,"writeDomains",null),I([N({type:[TG],json:{write:!0}})],hp.prototype,"templates",void 0),hp=I([De("esri.layers.support.FeatureType")],hp);const Lpe=hp;function xGe(){return{fields:{type:[yG],value:null,set:function(t){if(t&&ht("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(s=>`'${s.name}'`).join(", ");zt.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return dfe.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||zt.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return jM(this.fieldsIndex,t)}}}}const Hk=()=>zt.getLogger("esri.layers.support.labelingInfo"),wGe=/\[([^[\]]+)\]/gi;function Uk(t,e,i){return t?t.map(s=>{var r;const n=new fA;if(n.read(s,i),n.labelExpression){const o=e.fields||((r=e.layerDefinition)==null?void 0:r.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(wGe,(l,c)=>`[${SGe(c,o)}]`)}return n}):null}function SGe(t,e){if(!e)return t;const i=t.toLowerCase();for(let s=0;s<e.length;s++){const n=e[s].name;if(n.toLowerCase()===i)return n}return t}const EGe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function L0t(t,e){const i=[];for(const s of t){const n=s.labelPlacement,r=EGe[e];if(!s.symbol)return Hk().warn("No ILabelClass symbol specified."),[];if(!r)return Hk().error(new rt("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(r.includes(n))i.push(s);else{const o=r[0];n&&Hk().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${o}`);const l=s.clone();l.labelPlacement=o,i.push(l)}}return i}const _b=[];function CGe(t,e){if(ppe(t.url??""))return!0;const{wkid:i}=e;for(const s of _b){if((t.version??0)>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(i))return!1}return!0}_b.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),_b.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),_b.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),_b.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),_b.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function PGe(t,e,i){const s=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(s&&s.type==="unique-value"&&s.styleOrigin){const n=await oV(s.populateFromStyle());if(Kl(i),n.ok===!1){const r=n.error;e!=null&&e.messages&&e.messages.push(new Jh("renderer:style-reference",`Failed to create unique value renderer from style reference: ${r.message}`,{error:r,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function TGe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:s,title:n},r){if(!i)return null;const o=DGe({editFieldsInfo:e,fields:i,objectIdField:s},r);if(!o.length)return null;const l=$Ge({titleBase:n,fields:i,displayField:t}),c=NGe();return new NC({title:l,content:c,fieldInfos:o})}function F0t(t){var c;const{title:e,graphic:i}=t??{},{attributes:s,sourceLayer:n}=i??{},r=n&&"displayField"in n?n.displayField:null,o=r?s==null?void 0:s[r]:null,l=(c=i==null?void 0:i.getObjectId())==null?void 0:c.toString();return e||o||l||""}const IGe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):sNe(t,e);function MGe({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const s=t;return e&&(t=t.filter(n=>!e.includes(n.type))),t===s&&(t=t.slice()),i!==!0&&t.sort(AGe),t}function AGe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:qQ(t)?-1:qQ(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function DGe(t,e){const i=e==null?void 0:e.visibleFieldNames;return MGe({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||OGe,sortDisabled:e==null?void 0:e.sortDisabled}).map(s=>new zV({fieldName:s.name,isEditable:iNe(s,t),label:s.alias,format:kGe(s),visible:IGe(s,{...t,visibleFieldNames:i})}))}function kGe(t){switch(t.type){case"small-integer":case"integer":case"single":return new FT({digitSeparator:!0,places:0});case"double":return new FT({digitSeparator:!0,places:2});case"string":return TNe(t.name)?new FT({digitSeparator:!0,places:0}):void 0;default:return}}function NGe(){return[new k2,new D2]}function $Ge(t){const e=whe(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function qQ(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const OGe=["geometry","blob","raster","guid","xml"],RGe=1/255.5,ra="FeatureLayer";function S4(t,e){return new rt("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function VQ(t){return t&&t instanceof ui}const Yk=xGe();function Xk(t,e,i){const s=!!(i!=null&&i.writeLayerSchema);return{enabled:s,ignoreOrigin:s}}let Zt=class extends kVe(oGe(Oqe(fGe(Eqe(TV(cGe(bGe(FV(vGe(vqe(Fhe(nde(mV(_qe(cqe(Hs(LM))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=qi.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=Pv(async(i,s,n)=>{const{save:r,saveAs:o}=await nt(()=>import("./featureLayerUtils-D1ndVB9w.js"),__vite__mapDeps([301,113,114,238,32,95]),import.meta.url);switch(i){case sf.SAVE:return r(this,s);case sf.SAVE_AS:return o(this,n,s)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var n;const i=e!=null?e.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(r=>this.initLayerProperties(r))),Promise.resolve(this);const s=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Nh).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstValidLayerId(i);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new rt("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>lVe(this,"load",e));return this.addResolvingPromise(s),Promise.resolve(this)}warnInvisibleDrapedSymbols(){var e,i,s;((e=this.elevationInfo)==null?void 0:e.mode)==="on-the-ground"&&((i=this.renderer)==null?void 0:i.type)==="simple"&&((s=this.renderer.symbol)==null?void 0:s.type)==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(n=>n.type==="fill"&&n.material!=null&&(!n.material.color||n.material.color.a*this.opacity<RGe)&&(this.loadWarnings.push(new Jh("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(e,i){return i=i.layerDefinition||i,Epe(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,s){return this._readEditingEnabled(i,!0,s)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,s,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return uVe(this)}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,s,n){n!=null&&n.writeLayerSchema&&Ka(s,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return bpe(i.layerDefinition||i)}readObjectIdField(e,i){return xpe(i.layerDefinition||i)}get parsedUrl(){const e=yl(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=v2(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=v2(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){LZ(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,s){var r;i=i.layerDefinition||i;const n=(r=i.drawingInfo)==null?void 0:r.renderer;if(n){const o=_E(n,i,s)??void 0;return o||zt.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:s}),o}return wG(i,s)}set source(e){const i=this._get("source");i!==e&&(VQ(i)&&this._resetMemorySource(i),VQ(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ui?new Sp({layer:this,items:e}):e:null}readSource(e,i){const s=cpe.fromJSON(i.featureSet);return new Sp({layer:this,items:(s==null?void 0:s.features)??[]})}readTemplates(e,i){const s=i.editFieldsInfo,n=s==null?void 0:s.creatorField,r=s==null?void 0:s.editorField;return e=e==null?void 0:e.map(o=>TG.fromJSON(o)),this._fixTemplates(e,n),this._fixTemplates(e,r),e}readTitle(e,i){var r,o,l;const s=((r=i.layerDefinition)==null?void 0:r.name)??i.name,n=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(s){const c=(l=this.portalItem)==null?void 0:l.title;if(this.sublayerTitleMode==="item-title")return this.url?pqe(this.url,s):s;let f=s;if(!f&&this.url){const y=BC(this.url);y!=null&&(f=y.title)}return f?(this.sublayerTitleMode==="item-title-and-service-name"&&c&&c!==f&&(f=c+" - "+f),vG(f)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){var s;return i.title||((s=i.layerDefinition)==null?void 0:s.name)}readTypeIdField(e,i){let s=(i=i.layerDefinition||i).typeIdField;if(s&&i.fields){s=s.toLowerCase();const n=i.fields.find(r=>r.name.toLowerCase()===s);n&&(s=n.name)}return s}readTypes(e,i){e=(i=i.layerDefinition||i).types;const s=i.editFieldsInfo,n=s==null?void 0:s.creatorField,r=s==null?void 0:s.editorField;return e==null?void 0:e.map(o=>(o=Lpe.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,r),o))}readVisible(e,i){var s;return((s=i.layerDefinition)==null?void 0:s.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const s=await jqe(this,e,i,ra);return this.lastEditsEventDate=new Date,s}async updateAttachment(e,i,s){const n=await Bqe(this,e,i,s,ra);return this.lastEditsEventDate=new Date,n}async applyEdits(e,i){return Hqe(this,e,i)}async uploadAssets(e,i){return Uqe(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return TGe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await pC(nt(()=>import("./FeatureLayerSource-B2bX4Byd.js"),__vite__mapDeps([137,138,65,139,140,141,12,13,14,15,132,133,111,142,143,144,145,146,104,103,105,147,102]),import.meta.url),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=iVe(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,s=dhe(this.definitionExpression,i);return e.where=s||"1=1",e}async deleteAttachments(e,i){const s=await Yqe(this,e,i,ra);return this.lastEditsEventDate=new Date,s}async fetchRecomputedExtents(e){return Xqe(this,e,ra)}getFeatureType(e){return dVe(this.types,this.typeIdField,e)}getFieldDomain(e,i){var c,f;const s=i==null?void 0:i.feature,n=!!((c=this.subtypes)!=null&&c.length);if(n&&!(i!=null&&i.excludeImpliedDomains)){const y=rVe(this,e);if(y)return y}const r=n&&nVe(this,s);if(r){const y=(f=r==null?void 0:r.domains)==null?void 0:f[e];return(y==null?void 0:y.type)==="inherited"?this._getLayerDomain(e):y}const o=this.getFeatureType(s),l=this._getLayerDomain(e);if(o){const y=o.domains&&o.domains[e];if(y&&(y==null?void 0:y.type)!=="inherited")return y}if(l)return l;if(!(i!=null&&i.excludeImpliedDomains)){const y=oVe(this,e);if(y)return y}return null}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,i){return Wqe(this,e,i,ra)}async queryFeatures(e,i){const s=await this.load(),n=await s.source.queryFeatures(Gg.from(e)??s.createQuery(),i);if(n!=null&&n.features)for(const r of n.features)r.layer=r.sourceLayer=s;return n}async queryObjectIds(e,i){return Zqe(this,e,i,ra)}async queryFeatureCount(e,i){return Kqe(this,e,i,ra)}async queryExtent(e,i){return Jqe(this,e,i,ra)}async queryRelatedFeatures(e,i){return Qqe(this,e,i,ra)}async queryRelatedFeaturesCount(e,i){return eVe(this,e,i,ra)}async queryTopFeatures(e,i){var l;const{source:s,capabilities:n}=await this.load();if(!s.queryTopFeatures||!((l=n==null?void 0:n.query)!=null&&l.supportsTopFeaturesQuery))throw new rt(ra,"Layer source does not support queryTopFeatures capability");const r=await nt(()=>import("./TopFeaturesQuery-yXvc3AGf.js"),[],import.meta.url),o=await s.queryTopFeatures(r.default.from(e),i);if(o!=null&&o.features)for(const c of o.features)c.layer=c.sourceLayer=this;return o}async queryBins(e,i){var l;const{source:s,capabilities:n}=await this.load();if(!s.queryBins||!((l=n==null?void 0:n.operations)!=null&&l.supportsQueryBins))throw new rt(ra,"Layer source does not support queryBins capability");pVe(e,n,ra);const r=await nt(()=>import("./BinsQuery-C5-6Ggx8.js"),__vite__mapDeps([302,173,12,13,14,15,174]),import.meta.url),o=await s.queryBins(r.default.from(e),i);if(o.features)for(const c of o.features)c.layer=c.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:s,capabilities:n}=await this.load();if(!s.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new rt(ra,"Layer source does not support queryTopObjectIds capability");const r=await nt(()=>import("./TopFeaturesQuery-yXvc3AGf.js"),[],import.meta.url);return s.queryTopObjectIds(r.default.from(e),i)}async queryTopFeaturesExtent(e,i){var o;const{source:s,capabilities:n}=await this.load();if(!s.queryTopExtents||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new rt(ra,"Layer source does not support queryTopExtents capability");const r=await nt(()=>import("./TopFeaturesQuery-yXvc3AGf.js"),[],import.meta.url);return s.queryTopExtents(r.default.from(e),i)}async queryTopFeatureCount(e,i){var o;const{source:s,capabilities:n}=await this.load();if(!s.queryTopCount||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new rt(ra,"Layer source does not support queryFeatureCount capability");const r=await nt(()=>import("./TopFeaturesQuery-yXvc3AGf.js"),[],import.meta.url);return s.queryTopCount(r.default.from(e),i)}read(e,i){const s=e.featureCollection;if((s||e.type==="Feature Collection")&&(this.resourceInfo=e),s){const n=s.layers;n&&n.length===1&&(super.read(n[0],i),s.showLegend!=null&&super.read({showLegend:s.showLegend},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:s,layerContainerType:n,messages:r}=i;if(this.dynamicDataSource)return r==null||r.push(S4(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((s==="web-map"||s==="web-scene")&&n!=="tables")return r==null||r.push(S4(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return r==null||r.push(S4(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(s==="web-map"||s==="web-scene")&&n==="tables")return r==null||r.push(S4(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new rt(ra,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||CGe(this,e))}async save(e){return this._debouncedSaveOperations(sf.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(sf.SAVE_AS,i,e)}_readEditingEnabled(e,i,s){var r;let n=(r=e.layerDefinition)==null?void 0:r.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&(s==null?void 0:s.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,s,n){var r,o;if(!e){const l=(o=(r=this.capabilities)==null?void 0:r.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Ka("layerDefinition.capabilities",l,i),s&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=l)}}_getLayerDomain(e){const i=this.fieldsIndex.get(e);return i?i.domain:null}_fetchFirstValidLayerId(e){return Qs(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const s=i.data;if(s)return this.findFirstValidLayerId(s)})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),LZ(this.renderer,this.fieldsIndex),bhe(this.timeInfo,this.fieldsIndex),PGe(this,{origin:"service"})}async hasDataChanged(){return tVe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,s;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(s=this.fields)!=null&&s.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(s=>{var r;const n=(r=s.prototype)==null?void 0:r.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new rt("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new rt("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};I([N(VNe)],Zt.prototype,"attributeTableTemplate",void 0),I([At("service","capabilities")],Zt.prototype,"readCapabilities",null),I([N({json:{origins:{"web-scene":{write:!1}},write:!0}})],Zt.prototype,"charts",void 0),I([N({readOnly:!0})],Zt.prototype,"createQueryVersion",null),I([N({json:{read:{source:"layerDefinition.copyrightText"}}})],Zt.prototype,"copyright",void 0),I([N({json:{read:{source:"layerDefinition.displayField"}}})],Zt.prototype,"displayField",void 0),I([N({types:$c,readOnly:!0})],Zt.prototype,"defaultSymbol",void 0),I([N({type:kh})],Zt.prototype,"dynamicDataSource",void 0),I([N({type:Boolean})],Zt.prototype,"editingEnabled",null),I([At(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Zt.prototype,"readEditingEnabled",null),I([At("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Zt.prototype,"readEditingEnabledFromWebMap",null),I([Ft(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Zt.prototype,"writeEditingEnabled",null),I([Ft("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Zt.prototype,"writeEditingEnabledToWebMap",null),I([N({readOnly:!0})],Zt.prototype,"effectiveEditingEnabled",null),I([N({...Yk.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Xk}}}}})],Zt.prototype,"fields",void 0),I([N(Yk.fieldsIndex)],Zt.prototype,"fieldsIndex",void 0),I([N({type:Nze,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Zt.prototype,"formTemplate",void 0),I([N({json:{read:{source:"layerDefinition.extent"}}})],Zt.prototype,"fullExtent",void 0),I([N({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Xk,writer(t,e,i){const s=t?mF.toJSON(t):null;s&&Ka(i,s,e)}}}},read:{source:"layerDefinition.geometryType",reader:mF.read}}})],Zt.prototype,"geometryType",void 0),I([N({json:{read:{source:"layerDefinition.hasM"}}})],Zt.prototype,"hasM",void 0),I([N({json:{read:{source:"layerDefinition.hasZ"}}})],Zt.prototype,"hasZ",void 0),I([N(FNe)],Zt.prototype,"id",void 0),I([N({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Zt.prototype,"infoFor3D",void 0),I([N({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Zt.prototype,"isTable",void 0),I([At("service","isTable",["type","geometryType"]),At("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Zt.prototype,"readIsTable",null),I([Ft("web-map","isTable")],Zt.prototype,"writeIsTable",null),I([N($V)],Zt.prototype,"labelsVisible",void 0),I([N({type:[fA],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:Uk,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:Uk,write:{enabled:!0,layerContainerTypes:Uo}}},name:"layerDefinition.drawingInfo.labelingInfo",read:Uk,write:!0}})],Zt.prototype,"labelingInfo",void 0),I([N((()=>{const t=Ue(LNe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,s){Ka(s,kV(e),i)}}},t})())],Zt.prototype,"opacity",void 0),I([N(ONe)],Zt.prototype,"legendEnabled",void 0),I([N({type:["show","hide"],json:(()=>{const t=Ue(Lhe.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Zt.prototype,"listMode",void 0),I([At("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Zt.prototype,"readGlobalIdField",null),I([N({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Xk}}}}})],Zt.prototype,"objectIdField",void 0),I([At("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Zt.prototype,"readObjectIdField",null),I([N({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Zt.prototype,"operationalLayerType",void 0),I([N(Yk.outFields)],Zt.prototype,"outFields",void 0),I([N({readOnly:!0})],Zt.prototype,"parsedUrl",null),I([N({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Zt.prototype,"path",void 0),I([N(NV)],Zt.prototype,"popupEnabled",void 0),I([N({type:NC,json:{name:"popupInfo",write:!0}})],Zt.prototype,"popupTemplate",void 0),I([N({readOnly:!0})],Zt.prototype,"defaultPopupTemplate",null),I([N({types:lA,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:nze,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Uo,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Zt.prototype,"renderer",null),I([At("service","renderer",["drawingInfo.renderer","defaultSymbol"]),At("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Zt.prototype,"readRenderer",null),I([N()],Zt.prototype,"resourceInfo",void 0),I([N((()=>{const t=Ue(NNe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Zt.prototype,"screenSizePerspectiveEnabled",void 0),I([N({clonable:!1})],Zt.prototype,"source",null),I([Sn("source")],Zt.prototype,"castSource",null),I([At("portal-item","source",["featureSet"]),At("web-map","source",["featureSet"])],Zt.prototype,"readSource",null),I([N({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Zt.prototype,"spatialReference",void 0),I([N({type:Number})],Zt.prototype,"subtypeCode",void 0),I([N({type:[TG]})],Zt.prototype,"templates",void 0),I([At("templates",["editFieldsInfo","creatorField","editorField","templates"])],Zt.prototype,"readTemplates",null),I([N({type:Rpe})],Zt.prototype,"timeInfo",void 0),I([N()],Zt.prototype,"title",void 0),I([At("service","title",["name"]),At("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Zt.prototype,"readTitle",null),I([At("web-map","title",["layerDefinition.name","title"])],Zt.prototype,"readTitleFromWebMap",null),I([N({type:String})],Zt.prototype,"sublayerTitleMode",void 0),I([N({json:{read:!1}})],Zt.prototype,"type",void 0),I([N({type:String})],Zt.prototype,"typeIdField",void 0),I([At("service","typeIdField"),At("typeIdField",["layerDefinition.typeIdField"])],Zt.prototype,"readTypeIdField",null),I([N({type:[Lpe]})],Zt.prototype,"types",void 0),I([At("service","types",["types"]),At("types",["layerDefinition.types"])],Zt.prototype,"readTypes",null),I([N({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Zt.prototype,"visible",void 0),I([At("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Zt.prototype,"readVisible",null),Zt=I([De("esri.layers.FeatureLayer")],Zt);const mA=Zt,LGe=Object.freeze(Object.defineProperty({__proto__:null,default:mA},Symbol.toStringTag,{value:"Module"}));let bb=class extends Ei{constructor(e){super(e),this.length=null,this.verticalLength=null,this.area=null}};I([N()],bb.prototype,"length",void 0),I([N()],bb.prototype,"verticalLength",void 0),I([N()],bb.prototype,"area",void 0),bb=I([De("esri.views.interactive.sketch.Units")],bb);const a6=bb;let gA=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,s=!1){return GQ(this.range,this.min,this.max,e,i,s)}clamp(e,i=0){return Hc(e-i,this.min,this.max)+i}monotonic(e,i,s){return e<i?i:i+CF(this.range,e-i,s)}minimalMonotonic(e,i,s){return GQ(this.range,e,e+this.range,i,s)}center(e,i,s){return i=this.monotonic(e,i,s),this.normalize((e+i)/2,s)}diff(e,i,s){return this.monotonic(e,i,s)-e}shortestSignedDiff(e,i){e=this.normalize(e);const s=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(s)<Math.abs(n)?s:n}contains(e,i,s){return i=this.minimalMonotonic(e,i),(s=this.minimalMonotonic(e,s))>e&&s<i}};function GQ(t,e,i,s,n=0,r=!1){return(s-=n)<e?s+=CF(t,e-s):s>i&&(s-=CF(t,s-i)),r&&s===i&&(s=e),s+n}function CF(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const G0t=new gA(0,2*Math.PI),j0t=new gA(-Math.PI,Math.PI),FGe=new gA(0,360);function zGe(t,e){return{type:Qy(e),value:t,unit:e}}function B0t(t){return{value:t}}function Fpe(t,e){return{type:Qy(e),value:t,unit:e}}function qGe(t,e){return{type:Qy(e),value:t,unit:e}}function gf(t,e,i="arithmetic"){return{type:Qy(e),value:t,unit:e,rotationType:i}}function H0t(t,e){const i=yA(t,e);return t.type==="angle"?gf(i,e,t.rotationType):zGe(i,e)}function yA(t,e){return un(t.value,t.unit,e)}function U0t(t,e){return t==null?e:e==null||t.value>un(e.value,e.unit,t.unit)?t:e}function Y0t(t,e){return t==null?null:{...t,value:t.value*e}}function IG(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const X0t=Fpe(0,"meters"),W0t=qGe(0,"square-meters");gf(0,"radians");const Z0t=gf(0,"degrees"),K0t=gf(0,"degrees","geographic");function zpe(t,e){return t[0]=e[0],t[1]=e[1],t}function MG(t,e,i){return t[0]=e,t[1]=i,t}function qpe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function xo(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function Vpe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function Gpe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function VGe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function GGe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function jGe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function BGe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function HGe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function jpe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Yh(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t}function UC(t,e){const i=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(i*i+s*s)}function vA(t,e){const i=e[0]-t[0],s=e[1]-t[1];return i*i+s*s}function _A(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function Wp(t){const e=t[0],i=t[1];return e*e+i*i}function UGe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function YGe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Bpe(t,e){const i=e[0],s=e[1];let n=i*i+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function Bg(t,e){return t[0]*e[0]+t[1]*e[1]}function XGe(t,e,i){const s=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=s,t}function AG(t,e,i,s){const n=e[0],r=e[1];return t[0]=n+s*(i[0]-n),t[1]=r+s*(i[1]-r),t}function WGe(t,e=1){const i=2*TC()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function ZGe(t,e,i){const s=e[0],n=e[1];return t[0]=i[0]*s+i[2]*n,t[1]=i[1]*s+i[3]*n,t}function KGe(t,e,i){const s=e[0],n=e[1];return t[0]=i[0]*s+i[2]*n+i[4],t[1]=i[1]*s+i[3]*n+i[5],t}function JGe(t,e,i){const s=e[0],n=e[1];return t[0]=i[0]*s+i[3]*n+i[6],t[1]=i[1]*s+i[4]*n+i[7],t}function QGe(t,e,i){const s=e[0],n=e[1];return t[0]=i[0]*s+i[4]*n+i[12],t[1]=i[1]*s+i[5]*n+i[13],t}function Hpe(t,e,i,s){const n=e[0]-i[0],r=e[1]-i[1],o=Math.sin(s),l=Math.cos(s);return t[0]=n*l-r*o+i[0],t[1]=n*o+r*l+i[1],t}function Upe(t,e){const i=t[0],s=t[1],n=e[0],r=e[1];let o=i*i+s*s;o>0&&(o=1/Math.sqrt(o));let l=n*n+r*r;l>0&&(l=1/Math.sqrt(l));const c=(i*n+s*r)*o*l;return c>1?0:c<-1?Math.PI:Math.acos(c)}function eje(t){return"vec2("+t[0]+", "+t[1]+")"}function PF(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ype(t,e){const i=t[0],s=t[1],n=e[0],r=e[1],o=ro();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(s-r)<=o*Math.max(1,Math.abs(s),Math.abs(r))}function TF(t,e,i,s,n){let r=e[0]-i[0],o=e[1]-i[1];const l=(s[0]*r+s[1]*o)*(n-1);return r=s[0]*l,o=s[1]*l,t[0]=e[0]+r,t[1]=e[1]+o,t}const tje=_A,Xpe=xo,ije=Vpe,sje=Gpe,nje=UC,rje=vA,oje=Wp;Object.freeze(Object.defineProperty({__proto__:null,add:qpe,angle:Upe,ceil:VGe,copy:zpe,cross:XGe,dist:nje,distance:UC,div:sje,divide:Gpe,dot:Bg,equals:Ype,exactEquals:PF,floor:GGe,inverse:YGe,len:tje,length:_A,lerp:AG,max:BGe,min:jGe,mul:ije,multiply:Vpe,negate:UGe,normalize:Bpe,projectAndScale:TF,random:WGe,rotate:Hpe,round:HGe,scale:jpe,scaleAndAdd:Yh,set:MG,sqrDist:rje,sqrLen:oje,squaredDistance:vA,squaredLength:Wp,str:eje,sub:Xpe,subtract:xo,transformMat2:ZGe,transformMat2d:KGe,transformMat3:JGe,transformMat4:QGe},Symbol.toStringTag,{value:"Module"}));function yr(){return[0,0]}function aje(t){return[t[0],t[1]]}function Vc(t,e){return[t,e]}function Wpe(t,e=yr()){const i=Math.min(2,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function lje(t,e){return new Float64Array(t,e,2)}function Zpe(){return yr()}function Kpe(){return Vc(1,1)}function Jpe(){return Vc(1,0)}function Qpe(){return Vc(0,1)}const eme=Zpe(),uje=Kpe(),cje=Jpe(),tme=Qpe();Object.freeze(Object.defineProperty({__proto__:null,ONES:uje,UNIT_X:cje,UNIT_Y:tme,ZEROS:eme,clone:aje,create:yr,createView:lje,fromArray:Wpe,fromValues:Vc,ones:Kpe,unitX:Jpe,unitY:Qpe,zeros:Zpe},Symbol.toStringTag,{value:"Module"}));function td(t){const e=t[0],i=t[1],s=t[2];return Math.sqrt(e*e+i*i+s*s)}function Zl(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Vn(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function Yl(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function kr(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function ime(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function sme(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function hje(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function dje(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function fje(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function pje(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function mje(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function gje(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function yje(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function vje(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Fu(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function qo(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t}function Hg(t,e){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+s*s+n*n)}function $2(t,e){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2];return i*i+s*s+n*n}function bA(t){const e=t[0],i=t[1],s=t[2];return e*e+i*i+s*s}function IF(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function _je(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function _o(t,e){const i=e[0],s=e[1],n=e[2];let r=i*i+s*s+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t}function Es(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Vr(t,e,i){const s=e[0],n=e[1],r=e[2],o=i[0],l=i[1],c=i[2];return t[0]=n*c-r*l,t[1]=r*o-s*c,t[2]=s*l-n*o,t}function bje(t,e,i){const s=e[0],n=e[1],r=e[2],o=i[0],l=i[1],c=i[2],f=n*c-r*l,y=r*o-s*c,_=s*l-n*o,x=Math.sqrt(f*f+y*y+_*_);return t[0]=f/x,t[1]=y/x,t[2]=_/x,t}function Sx(t,e,i,s){const n=e[0],r=e[1],o=e[2];return t[0]=n+s*(i[0]-n),t[1]=r+s*(i[1]-r),t[2]=o+s*(i[2]-o),t}function xje(t,e,i,s,n,r){const o=r*r,l=o*(2*r-3)+1,c=o*(r-2)+r,f=o*(r-1),y=o*(3-2*r);return t[0]=e[0]*l+i[0]*c+s[0]*f+n[0]*y,t[1]=e[1]*l+i[1]*c+s[1]*f+n[1]*y,t[2]=e[2]*l+i[2]*c+s[2]*f+n[2]*y,t}function wje(t,e,i,s,n,r){const o=1-r,l=o*o,c=r*r,f=l*o,y=3*r*l,_=3*c*o,x=c*r;return t[0]=e[0]*f+i[0]*y+s[0]*_+n[0]*x,t[1]=e[1]*f+i[1]*y+s[1]*_+n[1]*x,t[2]=e[2]*f+i[2]*y+s[2]*_+n[2]*x,t}function Sje(t,e=1){const i=TC,s=2*i()*Math.PI,n=2*i()-1,r=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(s)*r,t[1]=Math.sin(s)*r,t[2]=n*e,t}function nme(t,e,i){const s=e[0],n=e[1],r=e[2];return t[0]=i[0]*s+i[4]*n+i[8]*r+i[12],t[1]=i[1]*s+i[5]*n+i[9]*r+i[13],t[2]=i[2]*s+i[6]*n+i[10]*r+i[14],t}function Eje(t,e,i){const s=e[0],n=e[1],r=e[2];return t[0]=s*i[0]+n*i[3]+r*i[6],t[1]=s*i[1]+n*i[4]+r*i[7],t[2]=s*i[2]+n*i[5]+r*i[8],t}function MF(t,e,i){const s=i[0],n=i[1],r=i[2],o=i[3],l=e[0],c=e[1],f=e[2],y=n*f-r*c,_=r*l-s*f,x=s*c-n*l,S=n*x-r*_,P=r*y-s*x,A=s*_-n*y,k=2*o;return t[0]=l+y*k+2*S,t[1]=c+_*k+2*P,t[2]=f+x*k+2*A,t}function Cje(t,e,i,s){const n=[],r=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(s)-n[2]*Math.sin(s),r[2]=n[1]*Math.sin(s)+n[2]*Math.cos(s),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function Pje(t,e,i,s){const n=[],r=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],r[0]=n[2]*Math.sin(s)+n[0]*Math.cos(s),r[1]=n[1],r[2]=n[2]*Math.cos(s)-n[0]*Math.sin(s),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function Tje(t,e,i,s){const n=[],r=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],r[0]=n[0]*Math.cos(s)-n[1]*Math.sin(s),r[1]=n[0]*Math.sin(s)+n[1]*Math.cos(s),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function Ije(t,e){_o(jQ,t),_o(BQ,e);const i=Es(jQ,BQ);return i>1?0:i<-1?Math.PI:Math.acos(i)}const jQ=Nt(),BQ=Nt();function Mje(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function hn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function wE(t,e){if(t===e)return!0;const i=t[0],s=t[1],n=t[2],r=e[0],o=e[1],l=e[2],c=ro();return Math.abs(i-r)<=c*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(s-o)<=c*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(n-l)<=c*Math.max(1,Math.abs(n),Math.abs(l))}function AF(t,e,i){const s=i[0]-e[0],n=i[1]-e[1],r=i[2]-e[2];let o=s*s+n*n+r*r;return o>0?(o=1/Math.sqrt(o),t[0]=s*o,t[1]=n*o,t[2]=r*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const Xl=kr,Aje=ime,Dje=sme,kje=Hg,Nje=$2,rme=td,l6=bA;Object.freeze(Object.defineProperty({__proto__:null,abs:fje,add:Yl,angle:Ije,bezier:wje,ceil:hje,clamp:yje,copy:Zl,cross:Vr,crossAndNormalize:bje,direction:AF,dist:kje,distance:Hg,div:Dje,divide:sme,dot:Es,equals:wE,exactEquals:hn,floor:dje,hermite:xje,inverse:_je,len:rme,length:td,lerp:Sx,max:gje,min:mje,mul:Aje,multiply:ime,negate:IF,normalize:_o,random:Sje,rotateX:Cje,rotateY:Pje,rotateZ:Tje,round:vje,scale:Fu,scaleAndAdd:qo,set:Vn,sign:pje,sqrDist:Nje,sqrLen:l6,squaredDistance:$2,squaredLength:bA,str:Mje,sub:Xl,subtract:kr,transformMat3:Eje,transformMat4:nme,transformQuat:MF},Symbol.toStringTag,{value:"Module"}));function ome(t,e,i,s){if(Yp(t.spatialReference,i)){E4[0]=t.x,E4[1]=t.y;const r=t.z;return E4[2]=r??s??0,px(E4,t.spatialReference,0,e,i,0)}const n=A2(t,i);return!!n&&(e[0]=n==null?void 0:n.x,e[1]=n==null?void 0:n.y,e[2]=(n==null?void 0:n.z)??s??0,!0)}async function J0t(t,e,i,s,n){return await DC(t.spatialReference,i,null,n),ome(t,e,i,s)}const E4=Nt();function Pf(t,e,i,s){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:s,type:"point"}}function ame(t,e,i,s,n){t.x=e,t.y=i,t.z=s,t.hasZ=s!=null,t.spatialReference=n}function Cg(t,e,i,s,n){return!(e==null||s==null||t.length<2)&&(Hw.x=t[0],Hw.y=t[1],Hw.z=t[2],Hw.spatialReference=e,ome(Hw,i,s,n))}const Hw=Pf(0,0,0,qi.WGS84);function lme(t){if(!t)return null;const e=t.wkid;if(e)return i$e[e];const i=t.wkt2??t.wkt;return i?$je(i):null}function $je(t){const e=e$e.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const s=parseFloat(i[1]),n=parseFloat(i[2]);return isNaN(s)||isNaN(n)?null:{a:s,f:n===0?0:1/n}}function xA(t){const e=lme(t);if(Oje(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function Oje(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function C4(t,e,i){const{a:s,eSq:n}=xA(i),r=Math.sqrt(n),o=Math.sin(e[1]*hl),l=s*e[0]*hl;let c;return n>0?c=s*((1-n)*(o/(1-n*(o*o))-1/(2*r)*Math.log((1-r*o)/(1+r*o))))*.5:c=s*o,t[0]=l,t[1]=c,t}function wA(t){return b2(t)&&!!lme(t)}function Q0t(t,e="square-meters"){if(t.some(o=>!wA(o.spatialReference)))throw new rt("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let o=0;o<t.length;o++){const l=t[o],c=l.spatialReference,{radius:f,densificationRatio:y}=xA(c),_=f*y;i.push(Rje(l,_))}const s=[],n=[0,0],r=[0,0];for(let o=0;o<i.length;o++){const{rings:l,spatialReference:c}=i[o];let f=0;for(let y=0;y<l.length;y++){const _=l[y];C4(n,_[0],c),C4(r,_[_.length-1],c);let x=r[0]*n[1]-n[0]*r[1];for(let S=0;S<_.length-1;S++)C4(n,_[S+1],c),C4(r,_[S],c),x+=r[0]*n[1]-n[0]*r[1];f+=x}f=un(f,"square-meters",e),s.push(f/-2)}return s}function egt(t,e="meters"){if(!t)throw new rt("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(s=>!wA(s.spatialReference)))throw new rt("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let s=0;s<t.length;s++){const n=t[s],{spatialReference:r}=n,o=n.type==="polyline"?n.paths:n.rings;let l=0;for(let c=0;c<o.length;c++){const f=o[c];let y=0;for(let _=1;_<f.length;_++){const x=f[_-1][0],S=f[_][0],P=f[_-1][1],A=f[_][1];if(P!==A||x!==S){const k=new YC;XC(k,[x,P],[S,A],r),y+=k.distance}}l+=y}l=un(l,"meters",e),i.push(l)}return i}function Rje(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new rt("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!wA(i))throw new rt("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const s=t.type==="polyline"?t.paths:t.rings,n=[],r=[0,0],o=new YC;for(const c of s){const f=[];n.push(f),f.push([c[0][0],c[0][1]]);let y,_,x=c[0][0],S=c[0][1];for(let P=0;P<c.length-1;P++){if(y=c[P+1][0],_=c[P+1][1],x===y&&S===_)continue;const A=[x,S];XC(o,[x,S],[y,_],i);const{azimuth:k,distance:$}=o,F=$/e;if(F>1){for(let G=1;G<=F-1;G++)ug(r,A,k,G*e,i),f.push(r.slice());ug(r,A,k,($+Math.floor(F-1)*e)/2,i),f.push(r.slice())}ug(r,A,k,$,i),f.push(r.slice()),x=r[0],S=r[1]}}const l=gC(qi,i);return t.type==="polyline"?new Ef({paths:n,spatialReference:l}):new Wa({rings:n,spatialReference:l})}let YC=class{constructor(e=0,i=void 0,s=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=s}};function ug(t,e,i,s,n){const r=e[0],o=e[1],l=r*hl,c=o*hl,f=(i??0)*hl,{a:y,b:_,f:x}=xA(n),S=Math.sin(f),P=Math.cos(f),A=(1-x)*Math.tan(c),k=1/Math.sqrt(1+A*A),$=A*k,F=Math.atan2(A,P),G=k*S,V=G*G,B=1-V,W=B*(y*y-_*_)/(_*_),J=1+W/16384*(4096+W*(W*(320-175*W)-768)),re=W/1024*(256+W*(W*(74-47*W)-128));let se,oe,pe,ue,ce=s/(_*J),ne=2*Math.PI;for(;Math.abs(ce-ne)>1e-12;)pe=Math.cos(2*F+ce),se=Math.sin(ce),oe=Math.cos(ce),ue=re*se*(pe+re/4*(oe*(2*pe*pe-1)-re/6*pe*(4*se*se-3)*(4*pe*pe-3))),ne=ce,ce=s/(_*J)+ue;const de=$*se-k*oe*P,Se=Math.atan2($*oe+k*se*P,(1-x)*Math.sqrt(V+de*de)),Pe=Math.atan2(se*S,k*oe-$*se*P),Re=x/16*B*(4+x*(4-3*B)),Oe=Se/hl,we=(l+(Pe-(1-Re)*x*G*(ce+Re*se*(pe+Re*oe*(2*pe*pe-1)))))/hl;return t[0]=we,t[1]=Oe,t}function XC(t,e,i,s){const n=e[0]*hl,r=e[1]*hl,o=i[0]*hl,l=i[1]*hl,{a:c,b:f,f:y,radius:_}=xA(s),x=o-n,S=Math.atan((1-y)*Math.tan(r)),P=Math.atan((1-y)*Math.tan(l)),A=Math.sin(S),k=Math.cos(S),$=Math.sin(P),F=Math.cos(P);let G,V,B,W,J,re,se,oe,pe,ue,ce=1e3,ne=x;do{if(se=Math.sin(ne),oe=Math.cos(ne),B=Math.sqrt(F*se*(F*se)+(k*$-A*F*oe)*(k*$-A*F*oe)),B===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;J=A*$+k*F*oe,re=Math.atan2(B,J),pe=k*F*se/B,V=1-pe*pe,W=J-2*A*$/V,isNaN(W)&&(W=0),ue=y/16*V*(4+y*(4-3*V)),G=ne,ne=x+(1-ue)*y*pe*(re+ue*B*(W+ue*J*(2*W*W-1)))}while(Math.abs(ne-G)>1e-12&&--ce>0);if(ce===0){const we=_,Fe=Math.acos(Math.sin(r)*Math.sin(l)+Math.cos(r)*Math.cos(l)*Math.cos(o-n))*we,it=o-n,vt=Math.sin(it)*Math.cos(l),ot=Math.cos(r)*Math.sin(l)-Math.sin(r)*Math.cos(l)*Math.cos(it),ct=Math.atan2(vt,ot);return t.azimuth=ct/hl,t.distance=Fe,t.reverseAzimuth=void 0,t}const de=V*(c*c-f*f)/(f*f),Se=de/1024*(256+de*(de*(74-47*de)-128)),Pe=f*(1+de/16384*(4096+de*(de*(320-175*de)-768)))*(re-Se*B*(W+Se/4*(J*(2*W*W-1)-Se/6*W*(4*B*B-3)*(4*W*W-3)))),Re=Math.atan2(F*Math.sin(ne),k*$-A*F*Math.cos(ne)),Oe=Math.atan2(k*Math.sin(ne),k*$*Math.cos(ne)-A*F);return t.azimuth=Re/hl,t.distance=Pe,t.reverseAzimuth=Oe/hl,t}function u6(t){return wA(t)?t:Qh(t)?qi.WGS84:null}var io;function DG(t,e){if(t==null||e==null)return;const i=DF(t,e);return i!=null?gf(i,"radians","geographic"):void 0}(function(t){t.Absolute="absolute",t.Relative="relative",t.RelativeBilateral="relative-bilateral"})(io||(io={}));const DF=(()=>{const t=Nt(),e=Nt();return(i,s)=>(Vn(t,i.x,i.y,i.z??0),Vn(e,s.x,s.y,s.z??0),Lje(t,e,i.spatialReference,s.spatialReference))})(),Lje=(()=>{const t=yr(),e=Nt(),i=Nt();return(s,n,r,o)=>{if(hn(s,n))return;const l=u6(r),c=u6(o);if(l&&c&&Ko(l,c)&&Cg(s,r,e,l)&&Cg(n,o,i,c)){const{azimuth:y}=XC(qje,e,i,l);return y!=null?un(y,"degrees","radians"):void 0}t[0]=n[0]-s[0],t[1]=n[1]-s[1];let f=Upe(tme,t);return t[0]<0&&(f=Vje-f),f}})();function igt(t,e,i,s=io.Absolute){if(e&&i)switch(s){case io.Absolute:return DG(e,i);case io.Relative:return UQ(HQ(t,e,i),io.Relative);case io.RelativeBilateral:return UQ(HQ(t,e,i),io.RelativeBilateral)}}function HQ(t,e,i){if(!t||!e||!i)return;const s=DF(t,e),n=DF(e,i);return s!=null&&n!=null?gf(n-s,"radians","geographic"):void 0}function UQ(t,e){if(t!=null)switch(e){case io.Absolute:return Fje(t);case io.Relative:{const i=yf(t);let s=YQ.normalize(i,0,!0);return s===-180&&(s=180),gf(s,"degrees","geographic")}case io.RelativeBilateral:{const i=yf(t),s=Math.abs(YQ.normalize(i,0,!0));return gf(s,"degrees","geographic")}}}function Fje(t){const e=yf(t),i=Gje.normalize(e,0,!0);return gf(i,"degrees","geographic")}const zje=(()=>{const t=Nt();return(e,i,s,n,r,o="geodesic")=>{Zl(t,i);const l=yf(r);if(o==="geodesic"){const S=u6(s);if(S&&Cg(t,s,t,S))return ug(e,t,l,n,S),e[2]=i[2],!!Cg(e,S,e,s)}const c=IG(l,"geographic","arithmetic"),f=un(c,"degrees","radians"),y=i[0]+n*Math.cos(f),_=i[1]+n*Math.sin(f),x=i[2];return Vn(e,y,_,x),!0}})();function yf(t){if(t!=null)return IG(ume(t),t.rotationType,"geographic")}function sgt(t){if(t!=null)return IG(ume(t),t.rotationType,"arithmetic")}function ume(t){return un(t.value,t.unit,"degrees")}const qje=new YC,Vje=2*Math.PI,Gje=FGe,YQ=new gA(-180,180);let S0=class extends Ei{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?io.RelativeBilateral:io.Relative;case"absolute":return io.Absolute}}get displayUnits(){return this._get("displayUnits")??new a6}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new a6}set inputUnits(e){this._set("inputUnits",e)}};I([N({type:String,nonNullable:!0})],S0.prototype,"directionMode",void 0),I([N({type:Boolean,nonNullable:!0})],S0.prototype,"relativeDirectionIsBilateral",void 0),I([N()],S0.prototype,"effectiveDirectionMode",null),I([N({type:a6,nonNullable:!0})],S0.prototype,"displayUnits",null),I([N({type:a6,nonNullable:!0})],S0.prototype,"inputUnits",null),S0=I([De("esri.views.interactive.sketch.SketchValueOptions")],S0);const SA=S0;let E9=class extends ui{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ui.ofType(this.itemType.Type))(e):new ui(e)}};function jje(t,e){return{type:t,cast:rde,set(i){const s=XM(i,this._get(e),t);s.owner=this,this._set(e,s)}}}I([N()],E9.prototype,"owner",null),E9=I([De("esri.core.support.OwningCollection")],E9);let qS=class extends E9{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};I([aV({Type:Xp,ensureType:Zo(Xp)})],qS.prototype,"itemType",void 0),qS=I([De("esri.support.GraphicsCollection")],qS);let dp=class extends TV(FV(LM)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new qS,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};I([N({type:Dhe})],dp.prototype,"elevationInfo",void 0),I([N(jje(qS,"graphics"))],dp.prototype,"graphics",void 0),I([N({type:["show","hide"]})],dp.prototype,"listMode",void 0),I([N()],dp.prototype,"screenSizePerspectiveEnabled",void 0),I([N({readOnly:!0})],dp.prototype,"type",void 0),I([N({constructOnly:!0})],dp.prototype,"internal",void 0),dp=I([De("esri.layers.GraphicsLayer")],dp);const Rv=dp,Bje=Object.freeze(Object.defineProperty({__proto__:null,default:Rv},Symbol.toStringTag,{value:"Module"}));function XQ(t){switch(t){case _n.SUPPORTED:break;case _n.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case _n.GEOMETRY_MISSING:return"no geometry";case _n.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case _n.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case _n.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var _n;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(_n||(_n={}));function cme(t){return t?Pg:Qje}function Hje(t,e){return e!=null&&e.mode?e.mode:cme(t).mode}function hme(t,e){return e??cme(t)}function dme(t,e){return Hje(t==null||(t.hasZ??!1),e)}function lgt(t,e){return hme(t==null||(t.hasZ??!1),e)}function Uje(t){const e=fme(t);return dme(t.geometry,e)}function Yje(t){const e=fme(t),i=dme(t.geometry,e),s=e!=null&&i!=="on-the-ground"?Jje(e):0,n=e==null?void 0:e.featureExpressionInfo;return{mode:i,offset:s,featureExpressionInfo:n}}function Xje(t){return EA(Yje(t))}function ugt(t){return EA(t)||Wje(t)}function Wje(t){var e;return((e=t==null?void 0:t.featureExpressionInfo)==null?void 0:e.expression)==="0"}function EA(t){if(!t||t.mode==="on-the-ground")return!1;const e=t!=null&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||e==="0")}function fme(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function kG(t,e){if(!(t!=null&&t.offset))return 0;const{offset:i,unit:s}=t;if(s==="decimal-degrees")return 0;const n=s!=="unknown"&&s?s:"meters",r=Uae(e);return r?un(i,n,r):0}function c6(t,e,i){if(!(i!=null&&i.mode))return;const s=t.hasZ?t.z:0,n=kG(i,t.spatialReference);switch(i.mode){case"absolute-height":return s-n;case"on-the-ground":return 0;case"relative-to-ground":return s-((e.elevationProvider.getElevation(t.x,t.y,s,t.spatialReference,"ground")??0)+n);case"relative-to-scene":return s-((e.elevationProvider.getElevation(t.x,t.y,s,t.spatialReference,"scene")??0)+n)}}function NG(t,e,i,s=null){return CA(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,s)}function pme(t,e,i,s,n=null){return CA(t,e[0],e[1],e.length>2?e[2]:0,i,s,n)}function CA(t,e,i,s,n,r,o=null){if(r==null)return;const l=o!=null?o.mode:"absolute-height";if(l==="on-the-ground")return 0;const{absoluteZ:c}=Zje(e,i,s,n,t,r);return Kje(c,e,i,s,n,t,o,l)}function Zje(t,e,i,s,n,r){const o=kG(r,s);switch(r.mode){case"absolute-height":return{absoluteZ:i+o,elevation:0};case"on-the-ground":{const l=n.elevationProvider.getElevation(t,e,0,s,"ground")??0;return{absoluteZ:l,elevation:l}}case"relative-to-ground":{const l=n.elevationProvider.getElevation(t,e,i,s,"ground")??0;return{absoluteZ:i+l+o,elevation:l}}case"relative-to-scene":{const l=n.elevationProvider.getElevation(t,e,i,s,"scene")??0;return{absoluteZ:i+l+o,elevation:l}}}}function Kje(t,e,i,s,n,r,o,l){const c=kG(o,n);switch(l){case"absolute-height":return t-c;case"relative-to-ground":return t-((r.elevationProvider.getElevation(e,i,s,n,"ground")??0)+c);case"relative-to-scene":return t-((r.elevationProvider.getElevation(e,i,s,n,"scene")??0)+c)}}function cgt(t,e){if(e==null)return!1;const{mode:i}=e;return i!=null&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}function hgt(t,e,i){return i&&i.mode!==e?`${t} only support ${e} elevation mode`:null}function dgt(t,e,i){return(i==null?void 0:i.mode)===e?`${t} do not support ${e} elevation mode`:null}function fgt(t,e){return(e==null?void 0:e.featureExpressionInfo)!=null&&e.featureExpressionInfo.expression!=="0"?`${t} do not support featureExpressionInfo`:null}function pgt(t,e){e&&t.warn(".elevationInfo=",e)}function Jje(t){return((t==null?void 0:t.offset)??0)*INe(t==null?void 0:t.unit)}const Pg={mode:"absolute-height",offset:0},Qje={mode:"on-the-ground",offset:null};function eBe(t){var s,n;if(t.graphic&&((s=t.graphic.layer)==null?void 0:s.type)!=="graphics")return _n.GRAPHICS_LAYER_MISSING;const e=(n=t.operations)==null?void 0:n.data.type;if(!e)return _n.GEOMETRY_TYPE_UNSUPPORTED;switch(e){case"polygon":case"point":case"polyline":case"mesh":break;default:return _n.GEOMETRY_TYPE_UNSUPPORTED}const i=t.elevationInfo;return EA(i)?_n.ELEVATION_MODE_UNSUPPORTED:_n.SUPPORTED}function tBe(t){return iBe(t).result}function iBe(t){var s;if(t.graphic&&((s=t.graphic.layer)==null?void 0:s.type)!=="graphics")return{result:_n.GRAPHICS_LAYER_MISSING};if(!t.operations)return{result:_n.GEOMETRY_MISSING};if(EA(t.elevationInfo))return{result:_n.ELEVATION_MODE_UNSUPPORTED};const e=t.operations.data.type,i=t.operations.data.geometry;return e==="point"||e==="mesh"||e==="polyline"||e==="polygon"?{result:_n.SUPPORTED,geometry:i}:{result:_n.GEOMETRY_TYPE_UNSUPPORTED}}function sBe(t){var i;if(((i=t.layer)==null?void 0:i.type)!=="graphics")return _n.GRAPHICS_LAYER_MISSING;if(t.geometry==null)return _n.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return _n.SUPPORTED;default:return _n.GEOMETRY_TYPE_UNSUPPORTED}const e=t.symbol!=null&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return!e||!e.some(s=>s.type==="object")?_n.SYMBOL_TYPE_UNSUPPORTED:Uje(t)!=="on-the-ground"&&Xje(t)?_n.ELEVATION_MODE_UNSUPPORTED:_n.SUPPORTED}function WQ(t,e,i){if(!e||!(t!=null&&t.map))return;const{map:s}=t;s.layers.find(r=>r===e)||s.add(e,i)}function ZQ(t,e){const i=(e==null?void 0:e.type)==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(s=>{const n=s.layer;return n===i||"sublayers"in n&&n.sublayers!=null&&n.sublayers.includes(i)})}const mme=ht("mac")?"Meta":"Control",nBe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),rBe=t=>nBe.has(t);let oBe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const s of this.keyModifiers)if(!i.has(s))return!1;return!0}},gme=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const s of i)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,s){let n;typeof i=="function"?(s=i,n=[]):n=i||[];const r=typeof e=="string"?new oBe(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=y=>{const _=this._incoming[y.match.eventType];if(_){const x=_.indexOf(y);_.splice(x,1),o(),this._manager&&this._manager.updateDependencies()}},c=new aBe(r,s,{onPause:l,onRemove:l,onResume:y=>{const _=this._incoming[y.match.eventType];_&&!_.includes(y)&&(_.push(y),o(),this._manager&&this._manager.updateDependencies())}});let f=this._incoming[r.eventType];return f||(f=[],this._incoming[r.eventType]=f),f.push(c),o(),this._manager&&this._manager.updateDependencies(),c}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new lBe(e,{onEmit:(s,n,r,o)=>{var l;(l=this._manager)==null||l.emit(s.eventType,n,r,o)},onRemove:s=>{var n;delete this._outgoing[s.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var s;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((s=n.callback)==null||s.call(n,e),e.shouldStopPropagation()))break}}},aBe=class{constructor(e,i,s){this.match=e,this._callback=i,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},lBe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,s){this._removed||this._handler.onEmit(this,e,i,s)}remove(){this._removed=!0,this._handler.onRemove(this)}},uBe=class extends gme{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:s,y:n}=e;i===this._value&&this._x===s&&this._y===n||(this._value=i,this._x=s,this._y=n,this._onChange(i,s,n))}},cBe=class{constructor(e,i){this._observable=new SC,this._value=e,this._equalityFunction=i}get value(){return mi(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function h6(t,e=doe){return new cBe(t,e)}let hBe=class extends gme{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=h6(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},dBe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const s in e){const n=e[s],r=new koe(n,void 0,void 0,2,2);this._properties[s]={pool:r,acquired:[]}}this._afterDispatchHandle=v4e(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const s of i.acquired)UX(s)||i.pool.release(s);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),s=this._properties[e];let n=s.pool.acquire();for(s.acquired.push(n);n===i;)s.acquired.push(n),n=s.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let s=0;for(const n of i.acquired)UX(n)?i.acquired[s++]=n:i.pool.release(n);i.acquired.length=s}}},hh=class extends Ei{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=mme,this._latestPointerType="mouse",this._propertiesPool=new dBe({latestPointerLocation:mBe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,s=sr.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map(r=>({handler:r,active:!0,removed:!1,priorityIndex:0,groupPriority:s,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let r=n.handlers.length-1;r>=0;r--){const o=n.handlers[r];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,c,f,y,_)=>{this._emitInputEvent(o.priorityIndex+1,l,c,f,_,y)},setPointerCapture:(l,c)=>{this._setPointerCapture(n,o,l,c)},setEventCallback:l=>{o.eventCallback=l},setUninstallCallback:l=>{o.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(s=>{var n;s.removed=!0,(n=s.uninstallCallback)==null||n.call(s)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):zt.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let s=this._handlers.length-1;s>=0;s--){const n=this._handlers[s];n.priorityIndex=s,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let s=this._handlersPriority.length-1;s>=0;s--){const n=this._handlersPriority[s];n.priorityIndex=s;let r=n.handler.hasSideEffects;if(!r){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){r=!0;break}}if(r)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const l of o.keyModifiers)rBe(l)||i.add(l)}n.active=r}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,s){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==s){const r=this._propertiesPool.get("latestPointerLocation");r.x=i,r.y=s,this._set("latestPointerLocation",r)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const r=i;this._pointerCaptures.delete(r.native.pointerId)}this._updateKeyModifiers(e,i);const s=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,s,n)}_updateKeyModifiers(e,i){if(!i)return;let s=!1;const n=()=>{s||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),s=!0)},r=(l,c)=>{c&&!this._activeKeyModifiers.has(l)?(n(),this._activeKeyModifiers.add(l)):!c&&this._activeKeyModifiers.has(l)&&(n(),this._activeKeyModifiers.delete(l))};if(e==="key-down"||e==="key-up"){const l=i.key;this._keyModifiers.has(l)&&r(l,e==="key-down")}const o=i.native;r("Alt",!!(o!=null&&o.altKey)),r("Control",!!(o!=null&&o.ctrlKey)),r("Ctrl",!!(o!=null&&o.ctrlKey)),r("Shift",!!(o!=null&&o.shiftKey)),r("Meta",!!(o!=null&&o.metaKey)),r("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new uBe((e,i,s)=>this._setLatestPointer(e,i,s)),this._multiTouchHandler=new hBe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],sr.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,sr.INTERNAL)}_setPointerCapture(e,i,s,n){const r=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(s.pointerId)||new Set;this._pointerCaptures.set(s.pointerId,o),n?(o.add(r),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(s,!0)):o.has(r)&&(o.delete(r),o.size===0&&(this._pointerCaptures.delete(s.pointerId),this.eventSource&&this.eventSource.setPointerCapture(s,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,s,n){this._emitInputEvent(0,e,i,s,n)}_emitInputEvent(e,i,s,n,r,o){const l=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),c=r!==void 0&&r,f={event:new fBe(i,s,l,o||this._activeKeyModifiers,c),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(f):this._doNewPropagation(f)}_doNewPropagation(e){this._currentPropagation={events:new KL,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,s,n;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:r,priorityIndex:o}=e.events.pop(),l=(i=r.data)==null?void 0:i.eventId;if(!(l!=null&&this._stoppedPropagationEventIds.has(l)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!r.shouldStopPropagation()&&((n=(s=e.currentHandler).eventCallback)==null||n.call(s,r)),r.shouldStopPropagation()){l!=null&&this._stoppedPropagationEventIds.add(l);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new KL;i.push(e);const s=this._currentPropagation;if(s){for(;s.events.length;)i.push(s.events.pop());s.events=i,s.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const s of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(s.eventType!==n.eventType)continue;const r=s.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(r.length===s.keyModifiers.length!=(r.length===n.keyModifiers.length))return s.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const s of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(s,i[n])>=0;)n++;i.splice(n,0,s)}return i}get debug(){const e=i=>{const s=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=s};return{injectEvent:(i,s)=>{e(()=>this._onEventReceived(i,s))},disablePointerCapture:e}}};I([N({readOnly:!0})],hh.prototype,"hasPendingInputs",null),I([N({constructOnly:!0})],hh.prototype,"eventSource",void 0),I([N({constructOnly:!0})],hh.prototype,"recognizers",void 0),I([N()],hh.prototype,"_latestPointerType",void 0),I([N()],hh.prototype,"latestPointerType",null),I([N()],hh.prototype,"multiTouchActive",null),I([N({readOnly:!0})],hh.prototype,"latestPointerLocation",void 0),I([N()],hh.prototype,"_paused",void 0),I([N({readOnly:!0})],hh.prototype,"updating",null),hh=I([De("esri.views.input.InputManager")],hh);let fBe=class{constructor(e,i,s,n,r){this.type=e,this.data=i,this.timestamp=s,this.modifiers=n,this.cancelable=r,this._propagationState=R0.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=R0.STOPPED}shouldStopPropagation(){return!!(this._propagationState&R0.STOPPED)}async(e){this._propagationState|=R0.PAUSED;const i=(s,n)=>{this._propagationState&=~R0.PAUSED;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),n)throw s;return s};return(typeof e=="function"?e():e).then(s=>i(s,!1),s=>i(s,!0))}shouldPausePropagation(e){return!!(this._propagationState&R0.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var R0;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(R0||(R0={}));const sr={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let pBe=class{};const mBe=pBe,gBe="z",yBe="r",Fn={redo:yBe,undo:gBe,center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},KQ={toggle:"Control"},Pgt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Tgt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:mme,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let Igt=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,s=>{s.type==="key-down"&&i(s)})}addToggle(e,i){const s=vBe.fromDefinition(e,i),n=Sq(this._bindings,s.key,()=>[]);return n.push(s),ds(()=>hM(n,s))}register(e,i=sr.WIDGET){return am([e.on("key-down",s=>this.dispatch(e.inputManager,s),i),e.on("key-up",s=>this.dispatch(e.inputManager,s),i)])}dispatch(e,i){const s=i.key,n=this._bindings.get(s);if(n)for(const r of n)r.process(e,i)}},vBe=class kF{constructor(e,i,s,n,r){this.key=e,this.modifiers=i,this.repeats=s,this.continuePropagation=n,this.callback=r}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const s of this.modifiers)if(!e.isModifierKeyDown(s))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new kF(e,[],!1,!1,i);const{key:s,modifier:n,repeats:r,continuePropagation:o}=e;return new kF(s,n?Array.isArray(n)?n:[n]:[],!!r,!!o,i)}},C9=class extends Ei{constructor(e){super(e),this.enabled=!1}};I([N({type:Boolean,nonNullable:!0})],C9.prototype,"enabled",void 0),C9=I([De("esri.views.interactive.sketch.SketchLabelOptions")],C9);const WC=C9;let VS=class extends Ei{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};I([N({type:String,nonNullable:!0})],VS.prototype,"mode",void 0),VS=I([De("esri.views.interactive.sketch.SketchTooltipElevationOptions")],VS);let za=class extends Ei{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};I([N({type:Boolean,nonNullable:!0})],za.prototype,"area",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"coordinates",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"direction",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"distance",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"elevation",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"header",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"helpMessage",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"orientation",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"radius",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"rotation",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"scale",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"size",void 0),I([N({type:Boolean,nonNullable:!0})],za.prototype,"totalLength",void 0),za=I([De("esri.views.interactive.sketch.SketchTooltipVisibleElements")],za);const yme=za;let al=class extends Ei{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new VS,this.placement="auto",this.offset=null,this.visibleElements=new yme,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};I([N({type:Boolean,nonNullable:!0})],al.prototype,"enabled",void 0),I([N()],al.prototype,"forceEnabled",void 0),I([N()],al.prototype,"effectiveEnabled",null),I([N()],al.prototype,"helpMessage",void 0),I([N()],al.prototype,"helpMessageIcon",void 0),I([N({type:Boolean,nonNullable:!0})],al.prototype,"inputEnabled",void 0),I([N({type:VS,nonNullable:!0})],al.prototype,"elevation",void 0),I([N()],al.prototype,"placement",void 0),I([N()],al.prototype,"offset",void 0),I([N({type:yme,nonNullable:!0})],al.prototype,"visibleElements",void 0),I([N()],al.prototype,"visualVariables",void 0),I([N()],al.prototype,"xyMode",void 0),al=I([De("esri.views.interactive.sketch.SketchTooltipOptions")],al);const $G=al;let xb=class extends Ei{constructor(e){super(e),this.labels=new WC,this.tooltips=new $G,this.values=new SA}};I([N({nonNullable:!0,type:WC})],xb.prototype,"labels",void 0),I([N({nonNullable:!0,type:$G})],xb.prototype,"tooltips",void 0),I([N({nonNullable:!0,type:SA})],xb.prototype,"values",void 0),xb=I([De("esri.views.interactive.sketch.SketchOptions")],xb);const PA=xb;var hv;function vme(t,e,i){return wo(t,e,i)}function wo(t=0,e=0,i=0){return vl(t,e,i)}function Ogt(t){return t}function Rgt(t){return t}function Tg(t,e,i){return vl(t,e,i)}function O2(t){const[e,i,s]=t;return t.length>3?[e,i,s,t[3]]:[e,i,s]}function Wk(t){return t[3]=((t.length>3?t[3]:void 0)??hv.NONE)|hv.TARGET,t}function Lgt(t){return!!(((t.length>3?t[3]:void 0)??hv.NONE)&hv.TARGET)}function JQ(t,e,{coordinateHelper:i,elevationInfo:s},n){return t?Q0(i.vectorToDehydratedPoint(t,_Be),e,s,n):null}function Q0(t,e,i,s=wo()){return s[0]=t.x,s[1]=t.y,s[2]=t.z??0,e==null||(e.type==="2d"?s[2]=0:s[2]=NG(e,t,i,Pg)??0),s}function Fgt(t,e,i){return i?(ame(i,t[0],t[1],t[2],e),i):Pf(t[0],t[1],t[2],e)}function NF(t,e,{z:i,m:s},n,r){const{spatialReference:o,elevationInfo:l}=n;let c;i==null&&s==null?c=void 0:e==null||e.type==="2d"?c=i??void 0:c=pme(e,t,o,Pg,l)??0;const[f,y]=t;return r?ame(r,f,y,c,o):r=Pf(f,y,c,o),s!=null&&(r.m=s,r.hasM=!0),r}function zgt(t,e,i,s,n=wo()){const[r,o]=t;return n[0]=r,n[1]=o,t.length>3&&(n[3]=t[3]??hv.NONE),(i==null?void 0:i.type)!=="3d"?(n[2]=e.value,n):(n[2]=CA(i,r,o,e.value,s,e.elevationInfo,Pg)??0,n)}(function(t){t[t.NONE=0]="NONE",t[t.TARGET=1]="TARGET"})(hv||(hv={}));const _Be=Pf(0,0,0,null);let Gh=class extends wt{constructor(){super(...arguments),this.enabled=!0}};I([N({type:Boolean})],Gh.prototype,"enabled",void 0),Gh=I([De("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],Gh);let Ln=class extends wt{constructor(e){super(e),this.lineSnapper=new Gh,this.parallelLineSnapper=new Gh,this.rightAngleSnapper=new Gh,this.rightAngleTriangleSnapper=new Gh,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new fi([255,127,0]),this.orangeTransparent=new fi([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};I([N({type:Gh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ln.prototype,"lineSnapper",void 0),I([N({type:Gh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ln.prototype,"parallelLineSnapper",void 0),I([N({type:Gh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ln.prototype,"rightAngleSnapper",void 0),I([N({type:Gh,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ln.prototype,"rightAngleTriangleSnapper",void 0),I([N({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Ln.prototype,"shortLineThreshold",void 0),I([N({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Ln.prototype,"distance",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ln.prototype,"pointThreshold",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ln.prototype,"intersectionParallelLineThreshold",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ln.prototype,"parallelLineThreshold",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Ln.prototype,"verticalLineThresholdMeters",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ln.prototype,"touchSensitivityMultiplier",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ln.prototype,"pointOnLineThreshold",void 0),I([N({type:fi,nonNullable:!0})],Ln.prototype,"orange",void 0),I([N({type:fi,nonNullable:!0})],Ln.prototype,"orangeTransparent",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ln.prototype,"lineHintWidthReference",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ln.prototype,"lineHintWidthTarget",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Ln.prototype,"lineHintFadedExtensions",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ln.prototype,"parallelLineHintWidth",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],Ln.prototype,"parallelLineHintLength",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Ln.prototype,"parallelLineHintOffset",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],Ln.prototype,"rightAngleHintSize",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],Ln.prototype,"rightAngleHintOutlineSize",void 0),I([N({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Ln.prototype,"satisfiesConstraintScreenThreshold",void 0),Ln=I([De("esri.views.interactive.snapping.Settings.Defaults")],Ln);const d6=new Ln;var Xa;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(Xa||(Xa={}));let E0=class extends Ei{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new ui}};I([N({constructOnly:!0})],E0.prototype,"layer",void 0),I([N()],E0.prototype,"enabled",void 0),I([N()],E0.prototype,"updating",void 0),I([N()],E0.prototype,"availability",void 0),I([N()],E0.prototype,"sublayerSources",void 0),E0=I([De("esri.views.interactive.snapping.FeatureSnappingLayerSource")],E0);const OG=E0;let Oo=class extends Ei{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new ui,this.distance=d6.distance,this.touchSensitivityMultiplier=d6.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){var c;const e=this.featureSources;e.some(QQ)&&zt.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const i=e.filter(xBe),s=((c=this._get("_effectiveFeatureSources"))==null?void 0:c.filter(QQ))??new ui;for(const f of i){const y=s.find(_=>_.layer===f.layer.parent);if(y)y.sublayerSources.includes(f)||y.sublayerSources.add(f);else if(f.layer.parent){const _=new OG({layer:f.layer.parent});_.sublayerSources.add(f),s.add(_)}}for(const f of s){const y=f.sublayerSources.filter(_=>!i.includes(_));f.sublayerSources.removeMany(y)}s.removeMany(s.filter(f=>f.sublayerSources.length===0));const n=e.filter(bBe),r=this._get("_effectiveFeatureSources")??new ui,{added:o,removed:l}=nPe(r.toArray(),[...n,...s]);return r.removeMany(l),r.addMany(o),r}};I([N()],Oo.prototype,"enabled",void 0),I([N()],Oo.prototype,"enabledToggled",void 0),I([N()],Oo.prototype,"forceDisabled",void 0),I([N()],Oo.prototype,"selfEnabled",void 0),I([N()],Oo.prototype,"featureEnabled",void 0),I([N()],Oo.prototype,"gridEnabled",void 0),I([N()],Oo.prototype,"attributeRulesEnabled",void 0),I([N({type:ui.ofType(OG)})],Oo.prototype,"featureSources",void 0),I([N()],Oo.prototype,"distance",void 0),I([N()],Oo.prototype,"touchSensitivityMultiplier",void 0),I([N({readOnly:!0})],Oo.prototype,"effectiveEnabled",null),I([N({readOnly:!0})],Oo.prototype,"effectiveGridEnabled",null),I([N({readOnly:!0})],Oo.prototype,"effectiveSelfEnabled",null),I([N({readOnly:!0})],Oo.prototype,"effectiveFeatureEnabled",null),I([N({readOnly:!0})],Oo.prototype,"_effectiveFeatureSources",null),Oo=I([De("esri.views.interactive.snapping.SnappingOptions")],Oo);const ZC=Oo;function QQ(t){return t.layer.type==="subtype-group"}function bBe(t){return t.layer.type!=="subtype-group"}function xBe(t){return t.layer.type==="subtype-sublayer"}let wBe=class extends hfe{constructor(e,i){super(e,i,"webmap")}};function SBe(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const Hgt=new wBe(2,32),Ugt=Symbol("grid-placement-graphic");function _me(t,e){const i=t.x-e.x,s=t.y-e.y;return i*i+s*s}function Ygt(t,e){return Math.sqrt(_me(t,e))}function EBe(t,e){e.sort((i,s)=>$2(i.targetPoint,t)-$2(s.targetPoint,t))}var Yc;function Xgt({point:t,distance:e,returnEdge:i,vertexMode:s,coordinateHelper:{spatialReference:n},filter:r},o,l){return l=l!=null?l.clone():new Gg({where:"1=1"}),r&&(l.geometry=r.geometry,l.distance=r.distance,l.spatialRelationship=r.spatialRelationship,l.where=dhe(l.where,r.where),l.timeExtent=kDe(l.timeExtent,r.timeExtent),l.objectIds=CBe(l.objectIds,r.objectIds)),{point:Pf(t[0],t[1],t[2],n.toJSON()),mode:o,distance:e,returnEdge:i,vertexMode:s,query:l.toJSON()}}function CBe(t,e){return t||e?e?t?Array.from(zoe(new Set(t),new Set(e))):e:t:null}function Wgt(t,e,i){return{left:JQ(t.leftVertex.pos,e,i),right:JQ(t.rightVertex.pos,e,i)}}function Zgt(t){return t.createQuery()}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(Yc||(Yc={}));const eee=Symbol("snapping-toggle");function bme(t,e=()=>{}){const i=xi(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:s,snappingOptions:n})=>{if(t.removeHandles(eee),!s||!n)return;const r=sr.TOOL,o=[s.on("key-down",l=>{l.key!==KQ.toggle||l.repeat||(n.enabledToggled=!0,e())},r),s.on("key-up",l=>{l.key===KQ.toggle&&(n.enabledToggled=!1,e())},r),s.on("pointer-move",l=>{const c=l.native.ctrlKey;n.enabledToggled!==c&&(n.enabledToggled=c,e())},r)];t.addHandles(o,eee)},Jl);t.addHandles(i)}function Kgt(t){var e;return SBe(t)&&"utilityNetworks"in t&&!!((e=t.utilityNetworks)!=null&&e.length)}function Jgt(t,e,i){const s=Es(t,e)/Es(t,t);return Fu(i,t,s)}function GS(t,e){return Es(t,e)/td(t)}function xme(t,e){const i=Es(t,e)/(td(t)*td(e));return-gV(i)}function Qgt(t,e,i){_o(P4,t),_o(Zk,e);const s=Es(P4,Zk),n=gV(s),r=Vr(P4,P4,Zk);return Es(r,i)<0?2*Math.PI-n:n}const P4=Nt(),Zk=Nt();function TA(){return[1,0,0,0,1,0,0,0,1]}function PBe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function TBe(t,e,i,s,n,r,o,l,c){return[t,e,i,s,n,r,o,l,c]}function IBe(t,e){return new Float64Array(t,e,9)}const MBe=TA();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:MBe,clone:PBe,create:TA,createView:IBe,fromValues:TBe},Symbol.toStringTag,{value:"Module"}));function RG(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ABe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function DBe(t,e,i,s,n,r,o,l,c,f,y,_,x,S,P,A){return[t,e,i,s,n,r,o,l,c,f,y,_,x,S,P,A]}function kBe(t,e){return new Float64Array(t,e,16)}const NBe=RG();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:NBe,clone:ABe,create:RG,createView:kBe,fromValues:DBe},Symbol.toStringTag,{value:"Module"}));function dv(){return[0,0,0,1]}function $Be(t){return[t[0],t[1],t[2],t[3]]}function OBe(t,e,i,s){return[t,e,i,s]}const RBe=dv();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:RBe,clone:$Be,create:dv,fromValues:OBe},Symbol.toStringTag,{value:"Module"}));let Ex=class ly{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&y2(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new ly(yr)}static createVec3f64(){return new ly(Nt)}static createVec4f64(){return new ly(hm)}static createMat3f64(){return new ly(TA)}static createMat4f64(){return new ly(RG)}static createQuatf64(){return new ly(dv)}get test(){}};const e1t=Ex.createVec2f64(),Yo=Ex.createVec3f64(),LBe=Ex.createVec4f64();Ex.createMat3f64();const FBe=Ex.createMat4f64(),t1t=Ex.createQuatf64();function i1t(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],s=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}function s1t(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),s=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),n=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return Vn(t,i,s,n),t}function LG(t,e,i){Math.abs(t[0])>Math.abs(t[1])?Vn(e,0,1,0):Vn(e,1,0,0),Vr(i,t,e),Vr(e,i,t),_o(i,i),_o(e,e)}function Qa(t=tS){return[t[0],t[1],t[2],t[3]]}function n1t(t=tS[0],e=tS[1],i=tS[2],s=tS[3]){return wme(t,e,i,s,LBe.get())}function P9(t,e){return wme(e[0],e[1],e[2],e[3],t)}function r1t(t){return t}function wme(t,e,i,s,n=Qa()){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n}function Cx(t,e,i){const s=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=Math.abs(s-1)>1e-5&&s>1e-12?1/Math.sqrt(s):1;return i[0]=e[0]*n,i[1]=e[1]*n,i[2]=e[2]*n,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function Sme(t,e,i,s=Qa()){const n=i[0]-e[0],r=i[1]-e[1],o=i[2]-e[2],l=t[0]-e[0],c=t[1]-e[1],f=t[2]-e[2],y=r*f-o*c,_=o*l-n*f,x=n*c-r*l,S=y*y+_*_+x*x,P=Math.abs(S-1)>1e-5&&S>1e-12?1/Math.sqrt(S):1;return s[0]=y*P,s[1]=_*P,s[2]=x*P,s[3]=-(s[0]*t[0]+s[1]*t[1]+s[2]*t[2]),s}function Eme(t,e,i,s=0,n=Math.floor(i*(1/3)),r=Math.floor(i*(2/3))){if(i<3)return!1;e(Uw,s);let o=n,l=!1;for(;o<i-1&&!l;)e(D_,o),o++,l=!hn(Uw,D_);if(!l)return!1;for(o=Math.max(o,r),l=!1;o<i&&!l;)e(_y,o),o++,kr(T4,Uw,D_),_o(T4,T4),kr(I4,D_,_y),_o(I4,I4),l=!hn(Uw,_y)&&!hn(D_,_y)&&Math.abs(Es(T4,I4))<zBe;return l?(Sme(Uw,D_,_y,t),!0):(s!==0||n!==1||r!==2)&&Eme(t,e,i,0,1,2)}function o1t(t,e,i=!0){const s=e.length/3;return Eme(t,(n,r)=>Vn(n,e[3*r+0],e[3*r+1],e[3*r+2]),i?s-1:s)}const zBe=.99619469809,Uw=Nt(),D_=Nt(),_y=Nt(),T4=Nt(),I4=Nt();function a1t(t,e,i){return e!==t&&P9(t,e),t[3]=-Es(t,i),t}function l1t(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function u1t(t,e,i,s){return Vr(_y,e,t),Cx(i,_y,s)}function FG(t,e,i,s){return IA(MA(t,e,kr(Yo.get(),i,e),VBe,s))}function c1t(t,e,i){return e!=null&&IA(MA(t,e.origin,e.direction,GBe,i))}function h1t(t,e,i){return IA(MA(t,e.origin,e.vector,cf.NONE,i))}function d1t(t,e,i){return IA(MA(t,e.origin,e.vector,cf.CLAMP,i))}function Cme(t,e){return Qd(t,e)>=0}function f1t(t,e){const i=Es(t,e.ray.direction),s=-Qd(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return s>0;const n=s/i;return i>0?n<e.c1&&(e.c1=n):n>e.c0&&(e.c0=n),e.c0<=e.c1}function zG(t,e,i){const s=Fu(Yo.get(),t,-t[3]),n=qBe(t,kr(Yo.get(),e,s),Yo.get());return Yl(i,n,s),i}function p1t(t,e,i,s){const n=t,r=Yo.get(),o=Yo.get();LG(n,r,o);const l=kr(Yo.get(),i,e),c=GS(r,l),f=GS(o,l),y=GS(n,l);return Vn(s,c,f,y)}function qBe(t,e,i){const s=Fu(Yo.get(),t,Es(t,e));return kr(i,e,s),i}function $F(t,e){return Math.abs(Qd(t,e))}function Qd(t,e){return Es(t,e)+t[3]}var Wd;function IA(t){return t===Wd.INTERSECTS_INSIDE_OUT||t===Wd.INTERSECTS_OUTSIDE_IN}function MA(t,e,i,s,n){const r=Es(t,i),o=Qd(t,e);if(r===0)return o>=0?Wd.INSIDE:Wd.OUTSIDE;let l=-o/r;return s&cf.CLAMP&&(l=Hc(l,0,1)),!(s&cf.INFINITE_MIN)&&l<0||!(s&cf.INFINITE_MAX)&&l>1?o>=0?Wd.INSIDE:Wd.OUTSIDE:(Yl(n,e,Fu(n,i,l)),o>=0?Wd.INTERSECTS_INSIDE_OUT:Wd.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(Wd||(Wd={}));const tS=[0,0,1,0];var cf;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(cf||(cf={}));const VBe=cf.INFINITE_MIN|cf.INFINITE_MAX,GBe=cf.INFINITE_MAX;let jBe=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&y2(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*tee);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,tee));e++)this._items.push(this._allocator())}};const tee=1024;function BBe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function HBe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function UBe(t,e,i,s,n,r,o,l,c,f){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=r,t[5]=o,t[6]=l,t[7]=c,t[8]=f,t}function YBe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function XBe(t,e){if(t===e){const i=e[1],s=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=s,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function WBe(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8],_=y*o-l*f,x=-y*r+l*c,S=f*r-o*c;let P=i*_+s*x+n*S;return P?(P=1/P,t[0]=_*P,t[1]=(-y*s+n*f)*P,t[2]=(l*s-n*o)*P,t[3]=x*P,t[4]=(y*i-n*c)*P,t[5]=(-l*i+n*r)*P,t[6]=S*P,t[7]=(-f*i+s*c)*P,t[8]=(o*i-s*r)*P,t):null}function ZBe(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8];return t[0]=o*y-l*f,t[1]=n*f-s*y,t[2]=s*l-n*o,t[3]=l*c-r*y,t[4]=i*y-n*c,t[5]=n*r-i*l,t[6]=r*f-o*c,t[7]=s*c-i*f,t[8]=i*o-s*r,t}function KBe(t){const e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],o=t[5],l=t[6],c=t[7],f=t[8];return e*(f*r-o*c)+i*(-f*n+o*l)+s*(c*n-r*l)}function Pme(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=e[8],x=i[0],S=i[1],P=i[2],A=i[3],k=i[4],$=i[5],F=i[6],G=i[7],V=i[8];return t[0]=x*s+S*o+P*f,t[1]=x*n+S*l+P*y,t[2]=x*r+S*c+P*_,t[3]=A*s+k*o+$*f,t[4]=A*n+k*l+$*y,t[5]=A*r+k*c+$*_,t[6]=F*s+G*o+V*f,t[7]=F*n+G*l+V*y,t[8]=F*r+G*c+V*_,t}function JBe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=e[8],x=i[0],S=i[1];return t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=l,t[5]=c,t[6]=x*s+S*o+f,t[7]=x*n+S*l+y,t[8]=x*r+S*c+_,t}function QBe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],y=e[7],_=e[8],x=Math.sin(i),S=Math.cos(i);return t[0]=S*s+x*o,t[1]=S*n+x*l,t[2]=S*r+x*c,t[3]=S*o-x*s,t[4]=S*l-x*n,t[5]=S*c-x*r,t[6]=f,t[7]=y,t[8]=_,t}function eHe(t,e,i){const s=i[0],n=i[1],r=i[2];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=r*e[6],t[7]=r*e[7],t[8]=r*e[8],t}function tHe(t,e,i){const s=i[0],n=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function iHe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function sHe(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function nHe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function rHe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function oHe(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,l=s+s,c=n+n,f=i*o,y=s*o,_=s*l,x=n*o,S=n*l,P=n*c,A=r*o,k=r*l,$=r*c;return t[0]=1-_-P,t[3]=y-$,t[6]=x+k,t[1]=y+$,t[4]=1-f-P,t[7]=S-A,t[2]=x-k,t[5]=S+A,t[8]=1-f-_,t}function aHe(t,e){const i=e[0],s=e[1],n=e[2],r=e[4],o=e[5],l=e[6],c=e[8],f=e[9],y=e[10],_=y*o-l*f,x=-y*r+l*c,S=f*r-o*c,P=i*_+s*x+n*S;if(!P)return null;const A=1/P;return t[0]=_*A,t[1]=(-y*s+n*f)*A,t[2]=(l*s-n*o)*A,t[3]=x*A,t[4]=(y*i-n*c)*A,t[5]=(-l*i+n*r)*A,t[6]=S*A,t[7]=(-f*i+s*c)*A,t[8]=(o*i-s*r)*A,t}function lHe(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5],c=e[6],f=e[7],y=e[8],_=e[9],x=e[10],S=e[11],P=e[12],A=e[13],k=e[14],$=e[15],F=i*l-s*o,G=i*c-n*o,V=i*f-r*o,B=s*c-n*l,W=s*f-r*l,J=n*f-r*c,re=y*A-_*P,se=y*k-x*P,oe=y*$-S*P,pe=_*k-x*A,ue=_*$-S*A,ce=x*$-S*k;let ne=F*ce-G*ue+V*pe+B*oe-W*se+J*re;return ne?(ne=1/ne,t[0]=(l*ce-c*ue+f*pe)*ne,t[1]=(c*oe-o*ce-f*se)*ne,t[2]=(o*ue-l*oe+f*re)*ne,t[3]=(n*ue-s*ce-r*pe)*ne,t[4]=(i*ce-n*oe+r*se)*ne,t[5]=(s*oe-i*ue-r*re)*ne,t[6]=(A*J-k*W+$*B)*ne,t[7]=(k*V-P*J-$*G)*ne,t[8]=(P*W-A*V+$*F)*ne,t):null}function uHe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function cHe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function hHe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function dHe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Tme(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function fHe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function pHe(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t}function mHe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function gHe(t,e){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],l=t[5],c=t[6],f=t[7],y=t[8],_=e[0],x=e[1],S=e[2],P=e[3],A=e[4],k=e[5],$=e[6],F=e[7],G=e[8],V=ro();return Math.abs(i-_)<=V*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-x)<=V*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(n-S)<=V*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-P)<=V*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(o-A)<=V*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(l-k)<=V*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(c-$)<=V*Math.max(1,Math.abs(c),Math.abs($))&&Math.abs(f-F)<=V*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(y-G)<=V*Math.max(1,Math.abs(y),Math.abs(G))}function yHe(t){const e=ro(),i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],l=t[5],c=t[6],f=t[7],y=t[8];return Math.abs(1-(i*i+r*r+c*c))<=e&&Math.abs(1-(s*s+o*o+f*f))<=e&&Math.abs(1-(n*n+l*l+y*y))<=e}const vHe=Pme,_He=Tme;Object.freeze(Object.defineProperty({__proto__:null,add:dHe,adjoint:ZBe,copy:HBe,determinant:KBe,equals:gHe,exactEquals:mHe,frob:hHe,fromMat2d:rHe,fromMat4:BBe,fromQuat:oHe,fromRotation:sHe,fromScaling:nHe,fromTranslation:iHe,identity:YBe,invert:WBe,isOrthoNormal:yHe,mul:vHe,multiply:Pme,multiplyScalar:fHe,multiplyScalarAndAdd:pHe,normalFromMat4:lHe,normalFromMat4Legacy:aHe,projection:uHe,rotate:QBe,scale:eHe,scaleByVec2:tHe,set:UBe,str:cHe,sub:_He,subtract:Tme,translate:JBe,transpose:XBe},Symbol.toStringTag,{value:"Module"}));function AA(t){return t?iee(eu(t.origin),eu(t.direction)):iee(Nt(),Nt())}function iee(t,e){return{origin:t,direction:e}}function g1t(t,e){const i=SHe.get();return i.origin=t,i.direction=e,i}function y1t(t,e=AA()){return xHe(t.origin,t.direction,e)}function bHe(t,e,i=AA()){return Zl(i.origin,t),kr(i.direction,e,t),i}function xHe(t,e,i=AA()){return Zl(i.origin,t),Zl(i.direction,e),i}function v1t(t,e){const i=Vr(Yo.get(),_o(Yo.get(),t.direction),kr(Yo.get(),e,t.origin));return Es(i,i)}function wHe(t,e,i){const s=Es(t.direction,kr(i,e,t.origin));return Yl(i,t.origin,Fu(i,t.direction,s)),i}const SHe=new jBe(()=>AA());function see(t,e){const i=td(t),s=yV(t[2]/i),n=Math.atan2(t[1]/i,t[0]/i);return Vn(e,i,s,n),e}const EHe=qG();function qG(){return hm()}const Ime=zC,CHe=zC;function Mme(t,e){return N2(e,t)}function Ame(t,e){return qc(t[0],t[1],t[2],e)}function PHe(t){return t}function THe(t){t[0]=t[1]=t[2]=t[3]=0}function IHe(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function KC(t){return t[3]}function MHe(t){return t}function AHe(t,e,i,s){return qc(t,e,i,s)}function DHe(t,e,i){return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=t[3]+e,i}function kHe(t,e,i){return t!==i&&Mme(t,i),i}function NHe(t,e){return e}function DA(t,e,i){if(e==null||!kme(t,e,f6))return!1;let{t0:s,t1:n}=f6;if((s<0||n<s&&n>0)&&(s=n),s<0)return!1;if(i){const{origin:r,direction:o}=e;i[0]=r[0]+o[0]*s,i[1]=r[1]+o[1]*s,i[2]=r[2]+o[2]*s}return!0}function Dme(t,e,i){const s=bHe(e,i);if(!kme(t,s,f6))return[];const{origin:n,direction:r}=s,{t0:o,t1:l}=f6,c=f=>{const y=Nt();return qo(y,n,r,f),kA(t,y,y)};return Math.abs(o-l)<ro()?[c(o)]:[c(o),c(l)]}const f6={t0:0,t1:0};function kme(t,e,i){const{origin:s,direction:n}=e,r=$He;r[0]=s[0]-t[0],r[1]=s[1]-t[1],r[2]=s[2]-t[2];const o=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];if(o===0)return!1;const l=2*(n[0]*r[0]+n[1]*r[1]+n[2]*r[2]),c=l*l-4*o*(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]-t[3]*t[3]);if(c<0)return!1;const f=Math.sqrt(c);return i.t0=(-l-f)/(2*o),i.t1=(-l+f)/(2*o),!0}const $He=Nt();function OHe(t,e){return DA(t,e,null)}function RHe(t,e,i){if(DA(t,e,i))return i;const s=Nme(t,e,Yo.get());return Yl(i,e.origin,Fu(Yo.get(),e.direction,Hg(e.origin,s)/td(e.direction))),i}function Nme(t,e,i){const s=Yo.get(),n=FBe.get();Vr(s,e.origin,e.direction);const r=KC(t);Vr(i,s,e.origin),Fu(i,i,1/td(i)*r);const o=$me(t,e.origin),l=xme(e.origin,i);return Yce(n,l+o,s),nme(i,i,n),i}function LHe(t,e,i,s){const n=KC(t),r=n*n,o=e+.5*Math.PI,l=i*i+r-2*Math.cos(o)*i*n,c=Math.sqrt(l),f=l-r;if(f<=0)return .5;const y=Math.sqrt(f),_=Math.acos(y/c)-Math.asin(n/(c/Math.sin(o)));return Math.min(1,(_+.5*s)/s)}function FHe(t,e,i){return DA(t,e,i)?i:(wHe(e,t,i),kA(t,i,i))}function kA(t,e,i){const s=kr(Yo.get(),e,t),n=Fu(Yo.get(),s,t[3]/td(s));return Yl(i,n,t)}function zHe(t,e){const i=kr(Yo.get(),e,t),s=bA(i),n=t[3]*t[3];return Math.sqrt(Math.abs(s-n))}function $me(t,e){const i=kr(Yo.get(),e,t),s=td(i),n=KC(t),r=n+Math.abs(n-s);return gV(n/r)}const Kk=Nt();function Ome(t,e,i,s){const n=kr(Kk,e,t);switch(i){case Hh.X:{const r=see(n,Kk)[2];return Vn(s,-Math.sin(r),Math.cos(r),0)}case Hh.Y:{const r=see(n,Kk),o=r[1],l=r[2],c=Math.sin(o);return Vn(s,-c*Math.cos(l),-c*Math.sin(l),Math.cos(o))}case Hh.Z:return _o(s,n);default:return}}function Rme(t,e){const i=kr(OF,e,t);return td(i)-t[3]}function qHe(t,e,i,s){const n=Rme(t,e),r=Ome(t,e,Hh.Z,OF),o=Fu(OF,r,i-n);return Yl(s,e,o)}function VHe(t,e){const i=$2(t,e),s=KC(t);return i<=s*s}function GHe(t,e,i=hm()){const s=Hg(t,e),n=t[3],r=e[3];return s+r<n?(N2(i,t),i):s+n<r?(N2(i,e),i):(Sx(i,t,e,(s+r-n)/(2*s)),i[3]=(s+n+r)/2,i)}const OF=Nt(),jHe=qG(),_1t=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:EHe,altitudeAt:Rme,angleToSilhouette:$me,axisAt:Ome,cameraFrustumCoverage:LHe,clear:THe,closestPoint:FHe,closestPointOnSilhouette:Nme,containsPoint:VHe,copy:Mme,create:qG,distanceToSilhouette:zHe,elevate:DHe,equals:CHe,exactEquals:Ime,fromCenterAndRadius:Ame,fromRadius:IHe,fromValues:AHe,getCenter:MHe,getExtent:NHe,getRadius:KC,intersectLine:Dme,intersectRay:DA,intersectRayClosestSilhouette:RHe,intersectsRay:OHe,projectPoint:kA,setAltitudeAt:qHe,setExtent:kHe,tmpSphere:jHe,union:GHe,wrap:PHe},Symbol.toStringTag,{value:"Module"}));function Jk(t,e){return t[0]*e[1]-t[1]*e[0]}function BHe(t,e,i){const s=Bg(i,e)/Wp(i);return jpe(t,i,s)}function b1t(t,e,i,s,n=i){return xo(qy,s,i),xo(p6,e,n),BHe(R2,p6,qy),qpe(t,n,R2)}function x1t(t,e,i,s){xo(qy,e,i);const n=s/_A(qy);return Yh(t,i,qy,n)}function HHe(t,e){const i=t.start,s=t.end,n=e.start,r=e.end,o=xo(qy,s,i),l=xo(Lme,r,n),c=Jk(o,l);if(Math.abs(c)<=YHe)return[];const f=xo(p6,i,n),y=Jk(l,f)/c,_=Jk(o,f)/c;if(y>=0){if(_>=0||e.type===qn.LINE)return[Yh(R2,i,o,y)]}else if(t.type===qn.LINE&&(_>=0||e.type===qn.LINE))return[Yh(R2,i,o,y)];return[]}function UHe(t,e,i){const s=[],n=xo(qy,t.end,t.start),r=xo(Lme,t.start,e),o=Wp(n),l=2*Bg(n,r),c=l*l-4*o*(Wp(r)-i*i);if(c===0){const f=-l/(2*o);(t.type===qn.LINE||f>=0)&&s.push(Yh(R2,t.start,n,f))}else if(c>0){const f=Math.sqrt(c),y=(-l+f)/(2*o);(t.type===qn.LINE||y>=0)&&s.push(Yh(R2,t.start,n,y));const _=(-l-f)/(2*o);(t.type===qn.LINE||_>=0)&&s.push(Yh(p6,t.start,n,_))}return s}var qn;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(qn||(qn={}));const YHe=1e-6,qy=yr(),Lme=yr(),p6=yr(),R2=yr();function VG({start:t,end:e,type:i},s,n){const r=[],o=xo(JC,e,t),l=xo(NA,t,s),c=Wp(o),f=2*Bg(o,l),y=f*f-4*c*(Wp(l)-n*n);if(y===0){const _=-f/(2*c);(i===ku.PLANE||_>=0)&&r.push(Yh(yr(),t,o,_))}else if(y>0){const _=Math.sqrt(y),x=(-f+_)/(2*c);(i===ku.PLANE||x>=0)&&r.push(Yh(yr(),t,o,x));const S=(-f-_)/(2*c);(i===ku.PLANE||S>=0)&&r.push(Yh(yr(),t,o,S))}return r}function Fme(t,e){const i=t.start,s=t.end,n=xo(JC,s,i),r=Vn(OA,-n[1],n[0],0),o=e.start,l=e.end,c=Xl(jG,l,o),f=Es(c,r),y=Vn(Ume,i[0],i[1],0),_=Xl(Yme,y,o),x=Es(_,r),S=ro();if(Math.abs(f)<S)return[];const P=qo(Xme,o,c,x/f);if(e.type===qn.RAY){const A=Xl(RF,P,o);if(Es(A,c)<-S)return[]}if(t.type===ku.HALF_PLANE){const A=Xpe(NA,P,i);if(Bg(A,n)<-S)return[]}return[eu(P)]}function XHe(t,e){return ZHe(m6(BG,e[2],t),e)}function zme(t,e){return Bme(m6(BG,0,t),m6(eUe,0,e)).map(([s,n])=>Vc(s,n))}function qme(t,e,i){return Gme(t,m6(BG,t[2],e),i)}function Vme(t,e,i,s=Nt()){const n=xo(JC,t,e),r=_A(n);return Yh(s,e,n,r===0?1:i/r),s[2]=t[2],s}function Gme(t,{start:e,end:i,type:s},n=Nt()){const r=Xl($A,t,e),o=Xl(OA,i,e),l=Es(r,o)/Es(o,o);return qo(n,e,o,s===qn.RAY?Math.max(l,0):l)}const WHe=(()=>{const t=Nt(),e=Nt(),i=Nt();return({start:s,end:n},{center:r,radius:o,normal:l,slicePlane:c})=>{const f=Cx(r,l,QHe);if(An($F(f,s),0)&&An($F(f,n),0)){LG(l,t,e);const _=(P,A)=>(kr(i,A,r),MG(P,Es(i,t),Es(i,e)),P),x=UHe({start:_(JC,s),end:_(NA,n),type:qn.LINE},eme,o),S=[];for(const[P,A]of x){const k=Zl(Nt(),r);qo(k,k,t,P),qo(k,k,e,A),c&&!cg(c,k)||S.push(k)}return S}const y=Nt();return FG(f,s,n,y)?!An(Hg(y,r),o)||c&&!cg(c,y)?[]:[y]:[]}})();function jme({start:t,end:e,type:i},s,n){const r=[],o=kr($A,e,t),l=xo(NA,t,s),c=Wp(o),f=2*Bg(o,l),y=f*f-4*c*(Wp(l)-n*n);if(y===0){const _=-f/(2*c);(i===qn.LINE||_>=0)&&r.push(qo(Nt(),t,o,_))}else if(y>0){const _=Math.sqrt(y),x=(-f+_)/(2*c);(i===qn.LINE||x>=0)&&r.push(qo(Nt(),t,o,x));const S=(-f-_)/(2*c);(i===qn.LINE||S>=0)&&r.push(qo(Nt(),t,o,S))}return r}function Bme(t,e){const i=t.start,s=t.end,n=e.start,r=e.end,o=Xl($A,s,i),l=Xl(OA,r,n),c=Xl(jG,n,i),f=Vr(Ume,o,l);if(!An(Es(c,f),0))return[];const y=l6(f);if(An(y,0))return[];const _=Vr(Yme,c,l),x=Es(_,f)/y,S=qo(Xme,i,o,x);if(t.type===qn.RAY){const P=Xl(RF,S,i);if(Es(o,P)<-ro())return[]}if(e.type===qn.RAY){const P=Xl(RF,S,n);if(Es(l,P)<-ro())return[]}return[eu(S)]}function ZHe({start:t,end:e,type:i},s){const n=Xl($A,s,t),r=Xl(OA,e,t),o=Vr(jG,r,n),l=l6(o)/l6(r),c=ro();if(l<c)switch(i){case qn.LINE:return[eu(s)];case qn.RAY:return Es(r,n)<-c?[]:[eu(s)]}return[]}function GG(t,e,i,s){const[n,r]=t,[o,l]=i,c=o-n,f=l-r,y=c*c+f*f,_=Math.sqrt(y);if(_>e+s)return[];if(_<Math.abs(e-s))return[];if(An(_,0)&&An(e,s))return[];const x=(e*e-s*s+y)/(2*_),S=Math.sqrt(e*e-x*x),P=S*f/_,A=S*c/_,[k,$]=AG(JC,t,i,x/_);return An(P,A)?[Vc(k,$)]:[Vc(k+P,$-A),Vc(k-P,$+A)]}function m6(t,e,{start:i,end:s,type:n}){return Vn(t.start,i[0],i[1],e),Vn(t.end,s[0],s[1],e),t.type=JHe[n],t}function Hme(t,e){return An(t[2],e[2])}function An(t,e){return X0(Math.abs(t-e),0,ro())}function KHe(t,e){return e.filter(i=>cg(t,i))}function cg(t,e){return Cme(t,e)}var ku;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})(ku||(ku={}));const JHe={[ku.PLANE]:qn.LINE,[ku.HALF_PLANE]:qn.RAY},JC=yr(),NA=yr(),$A=Nt(),OA=Nt(),jG=Nt(),Ume=Nt(),Yme=Nt(),Xme=Nt(),RF=Nt(),QHe=Qa(),BG={start:Nt(),end:Nt(),type:qn.LINE},eUe={start:Nt(),end:Nt(),type:qn.LINE};let Kc=class{intersect(e){return fp(this,e)}closestPoints(e){return[this.closestTo(e)]}},Lv=class extends Kc{constructor(e){super(),this.point=e}equals(e){return this===e||bc(e)&&hn(this.point,e.point)}closestTo(){return O2(this.point)}},HG=class extends Kc{constructor(e,i,s){super(),this.start=e,this.end=i,this.lineLike={start:e,end:i,type:s}}equals(e){return this===e||Gd(e)&&this.lineLike.type===e.lineLike.type&&hn(this.start,e.start)&&hn(this.end,e.end)}closestTo(e){const i=wo();return Gme(e,this.lineLike,i),i}},UG=class extends HG{constructor(e,i){super(e,i,qn.LINE)}},tUe=class extends HG{constructor(e,i){super(e,i,qn.RAY)}},Wme=class extends Kc{constructor(e){super(),this.constraints=e}equals(e){return this===e||LF(e)&&df(this.constraints,e.constraints,(i,s)=>i.equals(s))}closestTo(e){let i,s=1/0;for(const n of this.constraints){const r=n.closestTo(e),o=$2(e,r);o<s&&(s=o,i=r)}return O2(i??e)}closestPoints(e){return this.constraints.flatMap(i=>i===this?[]:i.closestPoints(e))}},YG=class extends Kc{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||Bd(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=wo();return Vme(e,this.center,this.radius,i),i}},XG=class extends Kc{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||mp(e)&&hn(this.center,e.center)&&this.radius===e.radius}closestTo(e){const i=wo();return Vme(e,this.center,this.radius,i),i[2]=this.center[2],i}asCircle(){return new WG(O2(this.center),this.radius,Tg(0,0,1))}},WG=class extends Kc{constructor(e,i,s,n=void 0){super(),this.center=e,this.radius=i,this.normal=s,this.slicePlane=n}equals(e){return this===e||C0(e)&&hn(this.center,e.center)&&hn(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:i,radius:s}=this;zG(this.getPlane(iUe),e,Qk);const n=Xl(Qk,Qk,i),r=bA(n);if(An(r,0))return O2(e);const o=s/Math.sqrt(r),l=wo();qo(l,i,n,o);const{slicePlane:c}=this;if(c&&!cg(c,l)){const f=JG(c,this);return(f==null?void 0:f.closestTo(e))??O2(e)}return l}getPlane(e=Qa()){return Cx(this.center,this.normal,e)}};const Qk=Nt(),iUe=Qa();let Zme=class extends Kc{constructor(e){super(),this.z=e}equals(e){return this===e||pp(e)&&this.z===e.z}closestTo(e){return Tg(e[0],e[1],this.z)}getPlane(e=Qa()){return Vn(nee,0,0,this.z),Cx(nee,jce,e)}};const nee=Nt();let ZG=class extends Kc{constructor(e,i,s){super(),this.start=e,this.end=i,this.planeLike={start:e,end:i,type:s}}equals(e){return this===e||jd(e)&&this.planeLike.type===e.planeLike.type&&hn(this.start,e.start)&&hn(this.end,e.end)}closestTo(e){const i=wo();return qme(e,this.planeLike,i),i}closestEndTo(e){const{start:i,end:s}=this.planeLike;return Math.sign(Bg(xo(sUe,s,i),xo(nUe,e,i)))>0?this.end:this.start}getPlane(e=Qa()){const i=Zl(ree,this.end);return i[2]+=1,Sme(this.start,this.end,i,e)}getSlicePlane(e=Qa()){const{start:i,end:s,type:n}=this.planeLike;if(n===ku.PLANE)return;const r=Vn(ree,i[0],i[1],0),o=Vn(oee,s[0],s[1],0),l=kr(oee,o,r);return Cx(r,l,e),e}};const sUe=yr(),nUe=yr(),ree=Nt(),oee=Nt();let rUe=class extends ZG{constructor(e,i){super(e,i,ku.HALF_PLANE)}},Kme=class extends ZG{constructor(e,i){super(e,i,ku.PLANE)}},oUe=class extends Kc{constructor(e,i){super(),this.sphere=Ame(e,i)}equals(e){return this===e||gp(e)&&Ime(this.sphere,e.sphere)}closestTo(e){const i=wo();return kA(this.sphere,e,i),i}get center(){return this.sphere}get radius(){return this.sphere[3]}};class Jme extends Kc{constructor(e,i,s){super(),this.start=e,this.end=i,this.getZ=s,this.planeLike={start:e,end:i,type:ku.PLANE}}equals(e){return this===e||g6(e)&&hn(this.start,e.start)&&hn(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return cUe(this,e)}addIfOnTheGround(e,i){for(const s of i){const n=this.getZ(s[0],s[1])??0;An(s[2],n)&&(s[2]=n,e.push(s))}}}let KG=class extends Kc{constructor(e,i,s){super(),this._x=e,this._y=i,this._z=s}equals(e){return this===e||PUe(e)&&this._x===e._x&&this._y===e._y&&this._z===e._z}closestTo([e,i,s]){return vme(this._x??e,this._y??i,this._z??s)}},Qme=class extends Kc{constructor(e,i,s,n,r){super(),this._origin=e,this._spatialReference=i,this._distanceMeters=s,this._z=n,this._directionDegrees=r}equals(e){return this===e||CUe(e)&&PF(this._origin,e._origin)&&this._spatialReference===e._spatialReference&&this._distanceMeters===e._distanceMeters&&this._z===e._z&&this._directionDegrees===e._directionDegrees}closestTo([e,i,s]){return MG(Yw,e,i),PF(Yw,this._origin)||this._applyDirectionAndDistance(Yw),vme(Yw[0],Yw[1],this._z??s)}_applyDirectionAndDistance(e){if(this._directionDegrees!=null&&this._distanceMeters!=null)ug(e,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)lUe(e,this._origin,this._directionDegrees,e,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:i}=XC(aUe,this._origin,e,this._spatialReference);ug(e,this._origin,i??0,this._distanceMeters,this._spatialReference)}}};const Yw=[0,0],aUe=new YC;function lUe(t,e,i,s,n){let{azimuth:r,distance:o}=XC(uUe,e,s,n);r??(r=0);let l=o*Math.cos((r-i)*hl);l=Math.max(0,l),ug(t,e,i,l,n)}const uUe=new YC;function cUe(t,e){const i=wo();return qme(e,t.planeLike,i),i[2]=t.getZ(i[0],i[1])??t0e,i}function fp(t,e){if(LF(t)){const i=[];for(const s of t.constraints){const n=s.intersect(e);n&&i.push(n)}return QC(i)}if(LF(e))return fp(e,t);if(g6(t))return aee(t,e);if(g6(e))return aee(e,t);if(bc(t)){const{point:i}=t;if(bc(e))return hn(i,e.point)?t:void 0;const s=e.closestTo(i);return wE(s,i)?t:void 0}if(Gd(t)){if(bc(e))return fp(e,t);if(Gd(e))return jh(Bme(t.lineLike,e.lineLike));if(pp(e))return hUe(t,e);if(jd(e))return jh(Fme(e.planeLike,t.lineLike));if(Bd(e))return jh(jme(t.lineLike,e.center,e.radius));if(C0(e))return jh(WHe(t.lineLike,e));if(mp(e))return dUe(t,e);if(gp(e))return fUe(t,e)}else if(pp(t)){if(bc(e)||Gd(e))return fp(e,t);if(pp(e))return pUe(t,e);if(jd(e))return mUe(t,e);if(Bd(e))return gUe(t,e);if(C0(e))return vUe(t,e);if(mp(e))return yUe(t,e);if(gp(e))return _Ue(t,e)}else if(jd(t)){if(bc(e)||Gd(e)||pp(e))return fp(e,t);if(jd(e))return eN(zme(t.planeLike,e.planeLike));if(Bd(e))return eN(VG(t.planeLike,e.center,e.radius));if(C0(e))return xUe(t,e);if(mp(e))return bUe(t,e);if(gp(e))return wUe(t,e)}else if(Bd(t)){if(bc(e)||Gd(e)||pp(e)||jd(e))return fp(e,t);if(Bd(e))return eN(GG(t.center,t.radius,e.center,e.radius));if(C0(e))return void 0;if(mp(e))return SUe(t,e);if(gp(e))return void 0}else if(C0(t)){if(bc(e)||Gd(e)||pp(e)||jd(e)||Bd(e))return fp(e,t);if(C0(e))return void 0;if(mp(e))return e.asCircle(),void 0;if(gp(e))return void 0}else if(mp(t)){if(bc(e)||Gd(e)||pp(e)||jd(e)||Bd(e)||C0(e))return fp(e,t);if(mp(e))return EUe(e,t);if(gp(e))return void 0}else if(gp(t)){if(bc(e)||Gd(e)||pp(e)||jd(e)||Bd(e)||mp(e))return fp(e,t);if(gp(e))return void 0}}const hUe=(()=>{const t=Qa();return(e,i)=>{const{start:s,end:n}=e;if(Hme(s,n)&&An(s[2],i.z))return e;const r=wo();return FG(i.getPlane(t),s,n,r)?new Lv(r):void 0}})();function dUe({lineLike:t},{center:e,radius:i}){const s=e[2];return jh(jme(t,e,i).filter(n=>An(n[2],s)))}function fUe({lineLike:t},{sphere:e}){return jh(Dme(e,t.start,t.end))}const JG=(()=>{const t=hm(),e=Nt(),i=Nt();return(s,n,r)=>{const{normal:o,center:l,radius:c}=n;LG(o,e,i);const f=s,y=c*Es(f,e),_=c*Es(f,i);aG(t,l[0],l[1],l[2],1);const x=cG(s,t),S=Math.hypot(y,_),P=An(S,0);if(An($F(s,l),0)){if(P)return n;if(An(c,0))return!r||cg(r,l)?new Lv(O2(l)):void 0;Vr(e,f,o),_o(e,e);const W=new Array,J=eu(l);qo(J,J,e,c),r&&!cg(r,J)||W.push(J);const re=eu(l);return qo(re,re,e,-c),r&&!cg(r,re)||W.push(re),jh(W)}if(P)return;const A=-x/S;if(Math.abs(A)>1||An(A,1))return;const k=Math.atan(y/_),$=yV(A)-k,F=Math.PI-$,G=new Array,V=Nt();qo(V,l,e,c*Math.cos($)),qo(V,V,i,c*Math.sin($)),G.push(V);const B=Nt();return qo(B,l,e,c*Math.cos(F)),qo(B,B,i,c*Math.sin(F)),G.push(B),jh(r?KHe(r,G):G)}})();function pUe(t,e){return An(t.z,e.z)?t:void 0}function mUe({z:t},{planeLike:e}){const[i,s]=e.start,[n,r]=e.end,o=Tg(i,s,t),l=Tg(n,r,t);return e.type===ku.PLANE?new UG(o,l):new tUe(o,l)}function gUe(t,e){const[i,s]=e.center;return new XG(Tg(i,s,t.z),e.radius)}function yUe(t,e){return An(e.center[2],t.z)?e:void 0}const vUe=(()=>{const t=Qa();return(e,i)=>JG(e.getPlane(t),i,i.slicePlane)})();function _Ue(t,{center:e,radius:i}){const s=Math.abs(e[2]-t.z);if(s>i&&!An(s,i))return;const n=Tg(e[0],e[1],t.z),r=Math.sqrt(i**2-s**2);return An(r,0)?void 0:new XG(n,r)}const bUe=(()=>{const t=Qa();return(e,{center:i,radius:s})=>{const n=VG(e.planeLike,i,s),r=i[2];e.getSlicePlane(t);const o=new Array;for(const[l,c]of n){const f=[l,c,r];cg(t,f)&&o.push(f)}return jh(o)}})(),xUe=(()=>{const t=Qa(),e=Qa();return(i,s)=>JG(i.getPlane(t),s,i.getSlicePlane(e))})(),wUe=(()=>{const t=Qa();return(e,{center:i,radius:s})=>{const n=e.getPlane(t),r=Qd(n,i),o=Math.abs(r);if(o>s&&!An(o,s))return;const l=Math.sqrt(s**2-r**2);if(An(l,0)){const y=wo();return zG(n,i,y),new Lv(y)}const c=wo(),f=eu(n);return qo(c,i,f,r),new WG(c,l,f,e.getSlicePlane())}})();function SUe(t,e){const i=vA(t.center,e.center);return An(i,0)&&An(t.radius,e.radius)?e:e0e(GG(t.center,t.radius,e.center,e.radius),e.center[2])}function EUe(t,e){if(!Hme(t.center,e.center))return;const i=vA(t.center,e.center);return An(i,0)&&An(t.radius,e.radius)?t:e0e(GG(t.center,t.radius,e.center,e.radius),t.center[2])}function aee(t,e){const{planeLike:i,getZ:s}=t,n=new Array;if(bc(e))t.addIfOnTheGround(n,XHe(i,e.point));else if(Gd(e))t.addIfOnTheGround(n,Fme(i,e.lineLike));else if(Bd(e))for(const[r,o]of VG(i,e.center,e.radius)){const l=s(r,o);l!=null&&n.push(vl(r,o,l))}else if(jd(e)||g6(e))for(const[r,o]of zme(i,e.planeLike)){const l=s(r,o)??t0e;n.push(vl(r,o,l))}return jh(n)}function eN(t){return QC(t.map(([e,i])=>{const s=Tg(e,i,0),n=Tg(e,i,1);return new UG(s,n)}))}function jh(t){return QC(t.map(e=>e?new Lv(e):void 0))}function e0e(t,e){return jh(t.map(([i,s])=>[i,s,e]))}function QC(t){if(t.length!==0)return t.length===1?t[0]??void 0:new Wme(t.filter(gl))}function LF(t){return t instanceof Wme}function bc(t){return t instanceof Lv}function Gd(t){return t instanceof HG}function pp(t){return t instanceof Zme}function jd(t){return t instanceof ZG}function Bd(t){return t instanceof YG}function mp(t){return t instanceof XG}function C0(t){return t instanceof WG}function gp(t){return t instanceof oUe}function g6(t){return t instanceof Jme}function CUe(t){return t instanceof Qme}function PUe(t){return t instanceof KG}const t0e=0;let Px=class{constructor(e,i,s,n){this.targetPoint=e,this.constraint=i,this.isDraped=s,this.domain=n}},i0e=class extends Px{constructor({targetPoint:e,objectId:i,constraint:s,isDraped:n}){super(e,s,n,Xa.FEATURE),this.objectId=i}},RA=class{constructor(e,i){this.isDraped=e,this.domain=i}},vf=class s0e extends RA{constructor(e,i,s,n,r=Xa.ALL,o=!0,l=!0){super(n,r),this.type=e,this.lineStart=i,this.lineEnd=s,this.fadeLeft=o,this.fadeRight=l}equals(e){return e instanceof s0e&&this.type===e.type&&hn(this.lineStart,e.lineStart)&&hn(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return Hg(this.lineStart,this.lineEnd)}},TUe=class extends i0e{constructor(e){super({...e,isDraped:!0,constraint:new Jme(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new vf(Yc.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},IUe=class extends i0e{constructor(e){super({...e,constraint:new UG(e.edgeStart,e.edgeEnd)})}get hints(){return[new vf(Yc.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},MUe=class n0e extends RA{constructor(e,i,s=Xa.ALL){super(i,s),this.intersectionPoint=e}equals(e){return e instanceof n0e&&hn(this.intersectionPoint,e.intersectionPoint)}},T9=class extends Px{constructor(e,i,s,n){super(e,new Lv(e),n,Xa.ALL),this.first=i,this.second=s}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new MUe(this.targetPoint,this.isDraped,this.domain)]}},AUe=class extends Px{constructor({lineStart:e,lineEnd:i,targetPoint:s,isDraped:n}){super(s,new Kme(e,i),n,Xa.SELF),this._referenceLineHint=new vf(Yc.REFERENCE_EXTENSION,e,i,n,this.domain)}get hints(){return[this._referenceLineHint,new vf(Yc.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},DUe=class r0e extends RA{constructor(e,i,s,n=Xa.ALL){super(s,n),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof r0e&&hn(this.lineStart,e.lineStart)&&hn(this.lineEnd,e.lineEnd)}},kUe=class extends Px{constructor({referenceLine:e,lineStart:i,targetPoint:s,isDraped:n}){const r=eu(i),{left:o,right:l}=e;kr(r,Yl(r,r,l),o),super(s,new Kme(i,r),n,Xa.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new vf(Yc.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new DUe(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new vf(Yc.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(s=>{hn(e.right,s.edge.left)&&(s.fadeLeft=!1,i.fadeRight=!1),hn(e.right,s.edge.right)&&(s.fadeRight=!1,i.fadeRight=!1),hn(e.left,s.edge.right)&&(s.fadeRight=!1,i.fadeLeft=!1),hn(e.left,s.edge.left)&&(s.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}},o0e=class a0e extends RA{constructor(e,i,s,n,r=Xa.ALL){super(n,r),this.previousVertex=e,this.centerVertex=i,this.nextVertex=s}equals(e){return e instanceof a0e&&hn(this.previousVertex,e.previousVertex)&&hn(this.centerVertex,e.centerVertex)&&hn(this.nextVertex,e.nextVertex)}},NUe=class extends Px{constructor({targetPoint:e,constraint:i,previousVertex:s,otherVertex:n,otherVertexType:r,isDraped:o,selfSnappingType:l,objectId:c,domain:f}){super(e,i,o,f??Xa.SELF),this.previousVertex=s,this.otherVertex=n,this.otherVertexType=r,this.selfSnappingType=l??v6.None,this.objectId=c??null}get hints(){const e=this.previousVertex,i=this.otherVertexType===y6.CENTER?this.otherVertex:this.targetPoint,s=this.otherVertexType===y6.CENTER?this.targetPoint:this.otherVertex;return[new vf(Yc.TARGET,i,s,this.isDraped,this.domain),new vf(Yc.REFERENCE,e,i,this.isDraped,this.domain),new o0e(this.previousVertex,i,s,this.isDraped,this.domain)]}};var y6,v6;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})(y6||(y6={})),function(t){t[t.None=0]="None",t[t.LastVertex=1]="LastVertex",t[t.FirstVertex=2]="FirstVertex",t[t.ExistingEdge=3]="ExistingEdge"}(v6||(v6={}));let $Ue=class extends Px{constructor({targetPoint:e,point1:i,point2:s,isDraped:n}){super(e,new YG(Sx(Nt(),i,s,.5),.5*UC(i,s)),n,Xa.SELF),this._p1=i,this._p2=s}get hints(){return[new vf(Yc.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new vf(Yc.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new o0e(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}};function OUe(t,e,i,s,n=Nt()){const r=Zl(RUe,t);return r[2]=pme(s,r,e,i)||0,s.renderCoordsHelper.toRenderCoords(r,e,n),n}const RUe=Nt();function LUe(t,e,i,s){return s.type==="2d"?(M4.x=t[0],M4.y=t[1],M4.spatialReference=e,s.toScreen(M4)):(OUe(t,e,i,s,lee),s.state.camera.projectToScreen(lee,tN),Up(tN[0],tN[1]))}const M4=Pf(0,0,0,null),lee=Nt(),tN=Rce();let Ih=class extends Sa.EventedMixin(Ei){constructor(e){super(e),this.options=new ZC,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Ep.MAIN}initialize(){this.addHandles([xi(()=>{const{distance:e,touchSensitivityMultiplier:i,effectiveSelfEnabled:s,effectiveFeatureEnabled:n,effectiveGridEnabled:r}=this.options;return{selfEnabled:s,featureEnabled:n,gridEnabled:this.view.type==="2d"&&r,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:e,touchSensitivityMultiplier:i}},(e,i)=>{var s;i&&(this.doneSnapping(),this.emit("changed")),(s=this._loadTask)==null||s.abort(),this._loadTask=DM(n=>this._updateEngines(e,i,n))},Jl),xi(()=>this.options,e=>{for(const i of this._engines)i.options=e},Hp)])}destroy(){this._destroyEngines()}get updating(){var e;return this._engines.some(i=>i.updating)||!((e=this._loadTask)!=null&&e.finished)}_destroyEngines(){this._engineCache.forEach(e=>e.destroy()),this._engineCache.clear(),this._engines=[]}async _updateEngines(e,i,s){if(!e.viewReady)return void this._destroyEngines();(i==null?void 0:i.viewSpatialReference)!==e.viewSpatialReference&&this._destroyEngines();const{_engineCache:n}=this,r=[];e.featureEnabled&&!n.has("feature")&&r.push(this._setupFeatureSnappingEngine(s)),e.selfEnabled&&!n.has("self")&&r.push(this._setupSelfSnappingEngine(s)),e.gridEnabled&&!n.has("grid")&&this.view.type==="2d"&&r.push(this._setupGridSnappingEngine(s)),await Promise.allSettled(r),s.aborted||(this._engines=Array.from(n.values()))}async _setupSelfSnappingEngine(e){const{SelfSnappingEngine:i}=await nt(()=>import("./SelfSnappingEngine-DvMe9m_r.js"),__vite__mapDeps([303,304]),import.meta.url);Kl(e);const s=new i({view:this.view,options:this.options});this._engineCache.set("self",s)}async _setupGridSnappingEngine(e){const{view:i}=this,{GridSnappingEngine:s}=await nt(async()=>{const{GridSnappingEngine:n}=await import("./GridSnappingEngine-CfeGPTJ9.js");return{GridSnappingEngine:n}},__vite__mapDeps([305,12,13,14,15,73,306]),import.meta.url);if(Kl(e),i.type==="2d"){const n=new s({view:i,options:this.options});this._engineCache.set("grid",n)}}async _setupFeatureSnappingEngine(e){const{FeatureSnappingEngine:i}=await nt(()=>import("./FeatureSnappingEngine-CZInL-3_.js"),__vite__mapDeps([307,74]),import.meta.url);Kl(e);const{view:s,options:n,_engineCache:r}=this,o=new i({view:s,options:n,spatialReference:s.spatialReference});r.set("feature",o)}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,s=e*i;return s*s}snap(e){return qUe(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:i,context:s}=e;this._removeVisualization();const n=this._currentMainCandidate;if(n==null)return i;const r=this._selectUpdateInput(e);if(r==null)return i;const{spatialReference:o}=s,l=pf(r,o);if(l==null)return i;const{view:c}=this,{elevationInfo:f,visualizer:y}=s,_=[],x=Q0(l,c,f),S=n.constraint.closestTo(x);if(!this._arePointsWithinScreenThreshold(x,S,s)||!sN(n,s.drawConstraints))return this._resetSnappingState(),i;n.targetPoint=Wk(S),_.push(...n.hints);for(const P of this._currentOtherActiveCandidates)sN(P,s.drawConstraints)&&(P.targetPoint=Wk(S),_.push(...P.hints));return y!=null&&this.addHandles(y.draw(_,{spatialReference:o,elevationInfo:VUe(s),view:c,selfSnappingZ:s.selfSnappingZ}),iN),NF(S,c,i,s)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:i}){switch(this._currentSnappedType){case Ep.MAIN:return e;case Ep.SCENE:return i}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Ep.MAIN}_removeVisualization(){this.removeHandles(iN)}async _snapSinglePoint({point:e,context:i,signal:s}){const{view:n}=this,{elevationInfo:r}=i,o=Q0(e,n,r),l=await this._fetchCandidates(o,Xa.ALL,i,s);return this._createSnapResult(o,Ep.MAIN,l,n,e,i,s)}async _snapMultiPoint({point:e,scenePoint:i,context:s,signal:n}){const{view:r}=this,{coordinateHelper:o,elevationInfo:l,spatialReference:c}=s;await DC(i.spatialReference,c);const f=pf(i,c),y=Q0(f,r,l),_=await this._fetchCandidates(y,Xa.FEATURE,s,n);if(_.length>0){const P=await this._fetchCandidates(y,Xa.SELF,s,n);return this._createSnapResult(y,Ep.SCENE,[..._,...P],r,f,s,n)}const x=Q0(e,r,l),S=await this._fetchCandidates(x,Xa.SELF,s,n);return this._createSnapResult(x,Ep.MAIN,S,r,{z:o.hasZ()&&e.hasZ?e.z??0:void 0,m:o.hasM()&&e.hasM?e.m??0:void 0},s,n)}async _fetchCandidates(e,i,s,n){return(await Promise.all(this._engines.map(r=>r.fetchCandidates(e,i,s,n)))).flat()}_createSnapResult(e,i,s,n,r,o,l){return{get valid(){return!$u(l)},apply:()=>{const{spatialReference:c}=o,{snappedPoint:f,hints:y}=this._processCandidates(e,i,s,o);return this._removeVisualization(),o.visualizer!=null&&this.addHandles(o.visualizer.draw(y,{spatialReference:c,elevationInfo:Pg,view:n,selfSnappingZ:o.selfSnappingZ}),iN),NF(f,n,r,o)}}}_processCandidates(e,i,s,n){if(s.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==i&&this._resetSnappingState(),EBe(e,s);const r=this._currentMainCandidate;if(r!=null){const o=zUe(r,s);if(o>=0){if(!(s[o]instanceof T9))return this._intersectWithOtherCandidates(o,s,e,i,n);if(this._arePointsWithinScreenThreshold(e,r.targetPoint,n))return this._updateSnappingCandidate(r,i,s,n)}}return this._intersectWithOtherCandidates(0,s,e,i,n)}_intersectWithOtherCandidates(e,i,s,n,r){const{coordinateHelper:o}=r,l=i[e],c=[];for(let f=0;f<i.length;++f){if(f===e)continue;const y=i[f],_=l.constraint.intersect(y.constraint);if(_)for(const x of _.closestPoints(l.targetPoint))c.push([new T9(Wk(x),l,y,y.isDraped),this._squaredScreenDistance(s,x,o)])}return c.length>0&&(c.sort((f,y)=>f[1]-y[1]),c[0][1]<this._squaredPointProximityThreshold(r.pointer))?this._updateSnappingCandidate(c[0][0],n,i,r):sN(l,r.drawConstraints)?this._updateSnappingCandidate(l,n,i,r):{snappedPoint:s,hints:[]}}_updateSnappingCandidate(e,i,s,n){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=i;const r=this._currentMainCandidate.targetPoint,o=[];o.push(...e.hints);for(const l of s){if(e instanceof T9){if(l.constraint.equals(e.first.constraint)||l.constraint.equals(e.second.constraint))continue}else if(l.constraint.equals(e.constraint))continue;const c=l.constraint.closestTo(r);this._squaredScreenDistance(c,r,n.coordinateHelper)<FUe()&&(l.targetPoint=r,this._currentOtherActiveCandidates.push(l),o.push(...l.hints))}return{snappedPoint:r,hints:o}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,i,s){return this._squaredScreenDistance(e,i,s.coordinateHelper)<this._squaredPointProximityThreshold(s.pointer)}_squaredScreenDistance(e,i,s){return _me(this._toScreen(e,s),this._toScreen(i,s))}_toScreen(e,i){return LUe(e,i.spatialReference,Pg,this.view)}get test(){}};var Ep;I([N({constructOnly:!0})],Ih.prototype,"view",void 0),I([N()],Ih.prototype,"options",void 0),I([N({readOnly:!0})],Ih.prototype,"updating",null),I([N()],Ih.prototype,"_loadTask",void 0),I([N()],Ih.prototype,"_engines",void 0),I([N()],Ih.prototype,"_squaredMouseProximityThreshold",null),I([N()],Ih.prototype,"_squaredTouchProximityThreshold",null),Ih=I([De("esri.views.interactive.snapping.SnappingManager")],Ih),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(Ep||(Ep={}));const iN="visualization-handle";function FUe(){return d6.satisfiesConstraintScreenThreshold*d6.satisfiesConstraintScreenThreshold}function sN(t,e){return!e||e.direction==null&&e.distance==null||!(t instanceof TUe||t instanceof IUe||t instanceof AUe||t instanceof kUe||t instanceof $Ue)&&(!(t instanceof NUe)||e.direction==null&&t.selfSnappingType===v6.LastVertex)}function zUe(t,e){return t instanceof T9?nN(e,t.first)>=0&&nN(e,t.second)>=0?0:-1:nN(e,t)}function nN(t,e){let i=-1;for(let s=0;s<t.length;++s)if(e.constraint.equals(t[s].constraint)){i=s;break}return i}function qUe(t){return t.scenePoint!=null}function VUe({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?Pg:e}async function W1t(t,e){if(t.type==="2d")return t.hitTest(e);const i=await t.hitTest(e);if(i.results.length===0)return i;const s=i.results[0],n=(s.distance??0)*(1+GUe),r=i.results.findIndex(o=>(o.distance??0)>n);return r!==-1&&(i.results=i.results.slice(0,r)),s&&i.ground.distance>n&&(i.ground.mapPoint=null),i}const GUe=.05;function l0e(t){return(t==null?void 0:t.type)==="graphic"}function jUe(t){return t.find(l0e)??null}function Z1t(t){return t.filter(l0e)}function FF(t){return Up(t.x,t.y)}function BUe(t,e){var s;const i=(s=t instanceof HTMLElement?t:t.surface)==null?void 0:s.getBoundingClientRect();return i?Up(e.clientX-i.left,e.clientY-i.top):Up(0,0)}function K1t(t,e){return e instanceof Event?BUe(t,e):FF(e)}function J1t(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let da=class extends Sa.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;(e=this.activeComponent)==null||e.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};I([N()],da.prototype,"activeComponent",void 0),I([N()],da.prototype,"cancelled",void 0),I([N()],da.prototype,"history",void 0),I([N()],da.prototype,"tool",null),I([N()],da.prototype,"type",void 0),I([N()],da.prototype,"canUndo",null),I([N()],da.prototype,"canRedo",null),I([N()],da.prototype,"onEnd",void 0),I([N()],da.prototype,"undo",null),I([N()],da.prototype,"redo",null),I([N()],da.prototype,"toggleTool",void 0),I([N()],da.prototype,"addToSelection",void 0),I([N()],da.prototype,"removeFromSelection",void 0),da=I([De("esri.widgets.Sketch.support.OperationHandle")],da);let I9=class extends da{};I([N()],I9.prototype,"activeComponent",void 0),I9=I([De("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],I9);let Mp=class extends da{};I([N()],Mp.prototype,"activeComponent",void 0),Mp=I([De("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],Mp);const uee={defaultZ:0},Xw={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};let Zs=class extends Sa.EventedAccessor{constructor(e){var i;super(e),this._numUpdating=0,this._defaultSnappingManager=null,this._internalGraphicsLayer=new Rv({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new Lu({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new um({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Ml({color:[130,130,130,1],width:2}),this.meshSymbol=new vx({symbolLayers:new ui([new qg])}),this.updateGraphics=new ui,this.updateOnGraphicClick=!0,this.vertexSymbol=new Lu({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new PA,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=uee,this.defaultUpdateOptions=Xw,this.snappingOptions=((i=e==null?void 0:e.snappingManager)==null?void 0:i.options)??(e==null?void 0:e.snappingOptions)??new ZC}initialize(){this.addHandles([_g(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),_g(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(this._operationHandle!=null)for(const i of e.removed)this.updateGraphics.includes(i)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(i):this._operationHandle.cancel())}),xi(()=>{var e;return((e=this.layer)==null?void 0:e.elevationInfo)??null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},Jl),xi(()=>this.view,e=>{this._defaultSnappingManager=so(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new Ih({view:e,options:this.snappingOptions})),e.type==="2d"?nt(()=>import("./editingTools-8segTewq.js"),__vite__mapDeps([308,40,41,42,309,310,139,140,10,38,39,37,128,304,62,311,312,210,291,184,183,59,44,313]),import.meta.url):e.type==="3d"&&(nt(()=>import("./ImageMaterial.glsl-C2x-QWsc.js").then(i=>i.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url),nt(()=>import("./LineCallout.glsl-CFI9yhMe.js").then(i=>i.G),__vite__mapDeps([321,11,316,129,295,182,183,184,288,127,128,124,120,126,247,26,25,289,290,125,211,291,215,292,277,296,280,245,246,122,257,77,5,2,299,298,123,121,103,104,175,176,17,102,105,171,22,130,322,99,55,56,100,101,323,33,14,15,324,24]),import.meta.url)))},Jl),xi(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,i)=>{e&&i&&!e.equals(i)&&this.cancel()})]),bme(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=so(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}get updating(){return this._numUpdating>0||this.snappingManager!=null&&this.snappingManager.updating}get activeTool(){var e;return((e=this._operationHandle)==null?void 0:e.tool)??null}get activeTooltip(){const{activeComponent:e,destroyed:i}=this,s=!i&&e&&"tooltip"in e?e.tooltip:null;return s!=null&&s.visible?s:null}get activeComponent(){var e;return((e=this._operationHandle)==null?void 0:e.activeComponent)??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...uee,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...Xw,...e,reshapeOptions:{...Xw.reshapeOptions,...e==null?void 0:e.reshapeOptions},highlightOptions:{...Xw.highlightOptions,...e==null?void 0:e.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){var e;return((e=this.snappingManager)==null?void 0:e.options)??this._get("snappingOptions")}set snappingOptions(e){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=so(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:i}=this;!this._defaultSnappingManager&&i&&(this._defaultSnappingManager=new Ih({options:this.snappingOptions,view:i})),this._clearOverride("snappingManager")}}get state(){var s;const e=!(!((s=this.view)!=null&&s.ready)||!this.layer),i=this._operationHandle;return e&&i?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const i=this._get("view");if(i){const{container:n,map:r}=i;n&&(i.cursor=null),r==null||r.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const s="view-ready";this.removeHandles(s),e&&this.addHandles(vg(()=>e.ready,n=>{this.removeHandles(this._viewHandlesKey),n&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)},Jl),s),this._set("view",e)}cancel(){this._moduleLoaderAbortController=og(this._moduleLoaderAbortController),this._viewReadyAbortController=og(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:i}=this;if(e==="active"&&i.length){const{activeTool:s,layer:n}=this,r=i.toArray();n.removeMany(r),this.cancel(),this._emitDeleteEvent({graphics:r,tool:s})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const e=this.updateGraphics.map(i=>i.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,i){this.cancel(),await this._waitViewReady();const{view:s,layer:n}=this;if(!s||this.state==="disabled")throw n||this._logMissingLayer(),or();if(s.activeTool!=null&&(s.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");WQ(s,this._internalGraphicsLayer);const r=await this._setupCreateOperation(e,i);if(r==null||this.destroyed)return void s.map.remove(this._internalGraphicsLayer);const o=()=>{var l;if(r===this._operationHandle){const c=this.createGraphic,f=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),(l=this.view)!=null&&l.map&&this.view.map.remove(this._internalGraphicsLayer),r.cancelled||c==null||n.add(c),this.emit("create",{graphic:c,state:f?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};r.on("complete",o),this._operationHandle=r,s.ready&&s.focus()}async place(e,i){return this.create("mesh",{mode:"click",hasZ:e.hasZ,geometryToPlace:e,...i})}async update(e,i){this.cancel(),await this._waitViewReady();const{layer:s,view:n,state:r}=this;if(!n||r==="disabled")throw s||this._logMissingLayer(),or();n.activeTool!=null&&(n.activeTool=null);const o=Array.isArray(e)?e:[e];if(e==null||!(o!=null&&o.length))return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(o.some(c=>c.layer!==s?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):c.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const l=await this._setupUpdateOperation(o,i);this.destroyed||l==null||Xr(l)||(WQ(n,this._internalGraphicsLayer),this._setUpdateOperationHandle(l,i),this.emit("update",{graphics:o,state:"start",aborted:!1,tool:l.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const i=this.view;if(i){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const s of e)s.geometry==null||s.geometry.type==="mesh"||Ko(s.geometry.spatialReference,i.spatialReference)||(Yp(s.geometry.spatialReference,i.spatialReference)||mx()||await M2(),s.geometry=pf(s.geometry,i.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var e;this.canUndo()&&((e=this._operationHandle)==null||e.undo())}redo(){var e;this.canRedo()&&((e=this._operationHandle)==null||e.redo())}canUndo(){var e;return!!((e=this._operationHandle)!=null&&e.canUndo())}canRedo(){var e;return!!((e=this._operationHandle)!=null&&e.canRedo())}toggleUpdateTool(){var e;(e=this._operationHandle)==null||e.toggleTool()}async _getFirstHit(e){const i=this.view;if(!i)return this._logMissingView(),null;if(i.type==="2d"){const r=[];i.map.allLayers.forEach(l=>{l.type!=="vector-tile"&&l.type!=="imagery"||r.push(l)});const o=await i.hitTest(e,{exclude:r});return jUe(o.results)}const s=[i.map.ground];i.map.allLayers.forEach(r=>{XNe(r.type)&&s.push(r)});const n=await i.hitTest(e,{exclude:s});if(n.results.length>0){const r=n.results[0];if(r!=null&&r.type==="graphic"&&r.graphic&&(!n.ground.mapPoint||i.map.ground.opacity<1||n.ground.distance-(r.distance??0)>-Math.min(3*n.ground.distance,i.viewingMode==="global"?Bq(i.renderCoordsHelper.spatialReference).radius/i.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return r}return null}_generateViewHandles(e){return[e.on("immediate-click",async i=>{var o;const s=this.state==="active"&&((o=this._operationHandle)==null?void 0:o.type)==="create";if(this.state==="disabled"||s||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const n=await i.async(()=>this._getFirstHit(FF(i)));let r=null;if(n!=null){const l=n.graphic;this.updateGraphics.includes(l)||l.layer===this.layer?(i.stopPropagation(),r=l):e.type!=="2d"||this._isComponentGraphic(l)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();r==null||this.updateGraphics.includes(r)||await this.update([r],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},sr.WIDGET)]}async _setupCreateOperation(e,i){const s=this.view;if(!s)return this._logMissingView(),null;const n={hasZ:s.type==="3d",...this.defaultCreateOptions,...i},r=await this._setupDrawGraphicTool(e,s,n);return r==null?null:(s.tools.add(r),s.activeTool=r,this._setupCreateOperationHandle(r))}async _setupDrawGraphicTool(e,i,s){if(e==="multipoint"&&i.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!i)return this._logMissingView(),null;const{cursor:n,defaultZ:r,hasZ:o,geometryToPlace:l,graphicProperties:c,mode:f,preserveAspectRatio:y}=s,_=e==="rectangle"||e==="circle"?"hybrid":"click",x=y??e!=="rectangle",S={centered:e!=="rectangle"&&!(e==="circle"&&!x),cursor:n,defaultZ:r,forceUniformSize:x,graphicProperties:c,geometryToPlace:l,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:o,mode:f??_,snappingManager:this.snappingManager,snapToScene:!1,view:i};return i.type==="2d"?this._makeDrawGraphicTool2D(S):this._makeDrawGraphicTool3D(S)}async _makeDrawGraphicTool2D(e){const i=await this._requireModule(nt(()=>import("./editingTools-8segTewq.js"),__vite__mapDeps([308,40,41,42,309,310,139,140,10,38,39,37,128,304,62,311,312,210,291,184,183,59,44,313]),import.meta.url));return Xr(i)||this.destroyed?null:new i.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:UUe(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})}async _makeDrawGraphicTool3D(e){const i=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-C2x-QWsc.js").then(n=>n.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Xr(i)||this.destroyed)return null;const{elevationInfo:s}=this.layer;return new i.module.DrawGraphicTool3D({...e,elevationInfo:s,snapToScene:!0,sketchOptions:this.sketchOptions})}_setupCreateOperationHandle(e){const i=this.view;if(!i)return this._logMissingView(),null;let s=null;const n=e.forceUniformSize,r=e.centered,o=[i.on("key-down",c=>{if(c.key===Fn.pan)c.stopPropagation(),c.repeat||(e.enabled=!1);else if(c.key===Fn.complete)c.stopPropagation(),e.completeCreateOperation();else if(c.key!==Fn.vertexAdd||c.repeat)c.key===Fn.undo?(c.stopPropagation(),l.undo()):c.key===Fn.redo?(c.stopPropagation(),l.redo()):c.key!==Fn.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||c.repeat?c.key===Fn.center&&(c.repeat||(e.centered=!r,c.stopPropagation())):(e.forceUniformSize=!n,c.stopPropagation());else{const f=e.drawOperation.geometryType;f!=="polyline"&&f!=="polygon"&&f!=="multipoint"||(c.stopPropagation(),e.drawOperation.commitStagedVertex())}},sr.WIDGET),i.on("key-up",c=>{c.key===Fn.pan?e.enabled=!0:c.key!==Fn.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?c.key===Fn.center&&(e.centered=r,c.stopPropagation()):(e.forceUniformSize=n,c.stopPropagation())},sr.WIDGET),e.on("vertex-add",c=>{switch(s=s==null?"start":"active",c.operation){case"apply":this.emit("create",{graphic:e.graphic,state:s,tool:this.activeTool,toolEventInfo:c,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",c=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:c.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",c=>{switch(c.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:c,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",c=>{this._set("createGraphic",c.graphic),s="complete",c.aborted?l&&l.cancel():l&&l.complete()}),xi(()=>this._getGraphicSymbolFromTool(e.geometryType),c=>{e.graphicSymbol=c})],l=new I9({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var c;_d(o),(c=i.tools)==null||c.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return l}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,i){var l;const{layer:s,view:n}=this;if(!n)return this._logMissingView(),null;const r={...this.defaultUpdateOptions,...i,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...i==null?void 0:i.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...i==null?void 0:i.highlightOptions}};let o=r.tool??Xw.tool;for(const c of e)s.remove(c),s.add(c);if(n.type==="3d"){if(e.length===0)return null;switch(o){case"move":return this._setupMove3DOperation(e,r,n,o);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],r,n);case"transform":return this._setupGraphicTransform3DOperation(e,r,n)}}switch(o){case"move":return this._setupMove2DOperation(e,r,n);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,o,r,n);case"transform":if(e.length===1){const c=(l=e[0].geometry)==null?void 0:l.type;c!=="point"&&c!=="multipoint"||(o="reshape")}return this._setupTransformOrReshape2DOperation(e,o,r,n)}}async _setupMove3DOperation(e,i,s,n,r=!1){const o=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-C2x-QWsc.js").then(P=>P.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Xr(o))return o;const{ManipulatedObject3DGraphic:l,MoveTool3D:c}=o.module,f=new Map,y=()=>{f.forEach(P=>P.destroy()),f.clear()};for(const P of e){const A=new l({view:s,graphic:P}),k=eBe(A);if(k!==_n.SUPPORTED)return y(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${XQ(k)}).`),null;f.set(P,A)}const _=new c({view:s,enableZ:i.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});s.tools.add(_),_.objects.addMany(Array.from(f.values())),r||this.updateGraphics.addMany(e);const x=[],S=new Mp({activeComponent:_,tool:n,type:"update",onEnd:()=>{_d(x),k4(s,_),y()},undo:()=>{hee(this.view,_),A4(S,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{D4(S,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:P=>{this.updateGraphics.push(P);const A=new l({view:s,graphic:P});f.set(P,A),_.objects.push(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[P],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:P=>{const A=this.updateGraphics.indexOf(P);if(S.history.undo.forEach($=>$.updates.splice(A,1)),S.history.redo.forEach($=>$.updates.splice(A,1)),this.updateGraphics.remove(P),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[P],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void S.complete();const k=f.get(P);k&&(_.objects.remove(k),k.destroy(),f.delete(P))},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1||n!=="transform")return;const P=this.updateGraphics.at(0),A=await this._setupReshape3DOperation(P,i,s,!0);A&&!Xr(A)&&(S.onEnd(),S.destroy(),this._setUpdateOperationHandle(A,i))}});return x.push(...this._getHandlesForComponent(S,i),s.on("immediate-click",P=>this._getCommonUpdateOperationClickHandlers(S,P,i),sr.WIDGET),s.on("key-down",P=>{this._getCommonUpdateOperationKeyDownHandlers(S,P)},sr.WIDGET)),S}_setupGraphicTransform3DOperation(e,i,s,n=!1){if(e.length===1&&sBe(e[0])===_n.SUPPORTED){const r=e[0],o=r.geometry;if(o!=null&&(o.type==="point"||o.type==="mesh"))return this._setupPointTransform3DOperation(r,i,s);if(o!=null&&(o.type==="polygon"||o.type==="polyline"))return this._setupPolyTransform3DOperation(r,i,s,n)}return this._setupMove3DOperation(e,i,s,"transform",n)}async _setupPointTransform3DOperation(e,i,s){const n="transform",{enableRotation:r,enableScaling:o,enableZ:l}=i,c=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-C2x-QWsc.js").then(A=>A.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Xr(c))return c;const{TransformTool3D:f,ManipulatedObject3DGraphic:y}=c.module,_=new y({graphic:e,view:s}),x=new f({object:_,view:s,enableRotation:r,enableScaling:o,enableZ:l,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});s.tools.add(x),this.updateGraphics.add(e);const S=[],P=new Mp({activeComponent:x,tool:n,type:"update",onEnd:()=>{_d(S),k4(s,x),_.destroy()},undo:()=>{hee(this.view,x),A4(P,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{D4(P,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:async A=>{this.updateGraphics.add(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[A],removed:[],type:"selection-change"},type:"update"}),P.onEnd(),P.destroy();const k=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,s,"transform",!0);Xr(k)||this._setUpdateOperationHandle(k,i)},removeFromSelection:A=>{this.updateGraphics.remove(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[A],type:"selection-change"},type:"update"}),P.complete()},toggleTool:()=>{}});return S.push(...this._getHandlesForComponent(P,i),s.on("immediate-click",A=>this._getCommonUpdateOperationClickHandlers(P,A,i),sr.WIDGET),s.on("key-down",A=>{this._getCommonUpdateOperationKeyDownHandlers(P,A)},sr.WIDGET)),P}async _setupPolyTransform3DOperation(e,i,s,n=!1){var F,G;const r="transform",{enableRotation:o,enableScaling:l,enableZ:c,preserveAspectRatio:f}=i,y=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-C2x-QWsc.js").then(V=>V.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Xr(y))return y;const{ManipulatedObject3DGraphic:_,ExtentTransformTool:x}=y.module,S=(G=(F=this.view)==null?void 0:F.inputManager)==null?void 0:G.isModifierKeyDown(Fn.constraint),P=new _({view:s,graphic:e}),A=new x({object:P,view:s,enableRotation:o,enableScaling:l,enableZ:c,preserveAspectRatio:!!f!=!!S,sketchOptions:this.sketchOptions});s.tools.add(A),n||this.updateGraphics.add(e);const k=[],$=new Mp({activeComponent:A,tool:r,type:"update",onEnd:()=>{_d(k),k4(s,A),P.destroy()},canUndo:()=>!A.destroyed&&A.canUndo,undo:()=>{A.destroyed||(A.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!A.destroyed&&A.canRedo,redo:()=>{A.destroyed||(A.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async V=>{this.updateGraphics.add(V),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[V],removed:[],type:"selection-change"},type:"update"}),$.onEnd(),$.destroy();const B=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,s,"transform",!0);Xr(B)||this._setUpdateOperationHandle(B,i)},removeFromSelection:V=>{this.updateGraphics.remove(V),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[V],type:"selection-change"},type:"update"}),$.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||i.toggleToolOnClick===!1)return;const V=await this._setupReshape3DOperation(e,i,s,!0);V&&!Xr(V)&&($.onEnd(),$.destroy(),this._setUpdateOperationHandle(V,i))}});return k.push(...this._getHandlesForComponent($,i),s.on("immediate-click",V=>this._getCommonUpdateOperationClickHandlers($,V,i),sr.WIDGET),s.on("key-down",V=>this._getCommonUpdateOperationKeyDownHandlers($,V),sr.WIDGET),s.on("key-down",V=>{V.key!==Fn.constraint||V.repeat||(A.preserveAspectRatio=!A.preserveAspectRatio,V.stopPropagation())},sr.WIDGET),s.on("key-up",V=>{V.key===Fn.constraint&&(A.preserveAspectRatio=!A.preserveAspectRatio,V.stopPropagation())},sr.WIDGET)),$}async _setupMove2DOperation(e,i,s){const n="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const r=await this._getGraphicMover(e,i,s);if(Xr(r))return r;const o=new Mp({activeComponent:r,tool:n,type:"update",onEnd:()=>{var y;this._displayDefaultCursor(),_d(f),_d(c),r.destroy(),(y=this._internalGraphicsLayer)==null||y.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const y=this.updateGraphics.toArray();A4(o,y),o.refreshComponent(),this._emitUndoEvent({graphics:y,tool:n})},redo:()=>{const y=this.updateGraphics.toArray();D4(o,y),o.refreshComponent(),this._emitRedoEvent({graphics:y,tool:n})},addToSelection:async y=>{await this._updateSpatialReference(y),this.updateGraphics.push(y),r.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[y],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:y=>{const _=this.updateGraphics.indexOf(y);o.history.undo.forEach(S=>S.updates.splice(_,1)),o.history.redo.forEach(S=>S.updates.splice(_,1)),this.updateGraphics.remove(y);const x=this.updateGraphics.toArray();this.emit("update",{graphics:x,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[y],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?r.graphics=x:o.complete()}});let l=!1;const c=[s.on("immediate-click",y=>this._getCommonUpdateOperationClickHandlers(o,y,i),sr.WIDGET),s.on("key-down",y=>{this._getCommonUpdateOperationKeyDownHandlers(o,y),y.key!==Fn.constraint||y.repeat||(l=!0,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},sr.WIDGET),s.on("key-up",y=>{y.key===Fn.constraint&&l&&(l=!1,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},sr.WIDGET)],f=this._getHandlesForComponent(o,i);return o}async _setupReshape3DOperation(e,i,s,n=!1){const r="reshape",o=await this._requireModule(nt(()=>import("./ImageMaterial.glsl-C2x-QWsc.js").then(A=>A.e),__vite__mapDeps([314,310,139,140,10,38,39,37,128,304,315,280,247,184,316,129,295,182,183,288,127,124,120,126,26,25,289,290,125,211,291,215,292,277,296,245,246,122,293,294,297,249,225,262,317,209,210,212,24,41,42,63,309,62,311,312,318,319,58,59,9,161,114,162,320,44]),import.meta.url));if(Xr(o))return o;const{ManipulatedObject3DGraphic:l,ReshapeTool3D:c}=o.module,f=new l({view:s,graphic:e}),y=tBe(f);if(y!==_n.SUPPORTED)return f.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${XQ(y)}).`),null;const _=i.reshapeOptions,x=new c({view:s,object:f,enableZVertex:i.enableZ&&(_==null?void 0:_.vertexOperation)==="move",enableZShape:i.enableZ&&(_==null?void 0:_.shapeOperation)==="move",enableMoveObject:(_==null?void 0:_.shapeOperation)==="move"||(_==null?void 0:_.shapeOperation)==="move-xy",enableMidpoints:(_==null?void 0:_.edgeOperation)==="split",enableEdgeOffset:(_==null?void 0:_.edgeOperation)==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});s.tools.add(x),n||this.updateGraphics.add(f.graphic);const S=[],P=new Mp({activeComponent:x,tool:r,type:"update",onEnd:()=>{_d(S),k4(s,x),f.destroy()},canUndo:()=>!x.destroyed&&x.canUndo,undo:()=>{x.destroyed||(x.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!x.destroyed&&x.canRedo,redo:()=>{x.destroyed||(x.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async A=>{this.updateGraphics.add(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[A],removed:[],type:"selection-change"},type:"update"}),P.onEnd(),P.destroy();const k=await this._setupMove3DOperation(this.updateGraphics.toArray(),i,s,"transform",!0);Xr(k)||this._setUpdateOperationHandle(k,i)},removeFromSelection:A=>{this.updateGraphics.remove(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[A],type:"selection-change"},type:"update"}),P.complete()},toggleTool:async()=>{if(i.toggleToolOnClick===!1)return;P.onEnd(),P.destroy();const A=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),i,s,!0);Xr(A)||this._setUpdateOperationHandle(A,i)}});return S.push(...this._getHandlesForComponent(P,i),s.on("immediate-click",A=>this._getCommonUpdateOperationClickHandlers(P,A,i),sr.WIDGET),s.on("key-down",A=>{this._getCommonUpdateOperationKeyDownHandlers(P,A)},sr.WIDGET)),P}async _setupTransformOrReshape2DOperation(e,i,s,n){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const r=i==="transform"?await this._getBox(e,s,n):await this._getReshape(e,s,n);if(Xr(r))return r;const o=new Mp({activeComponent:r,type:"update",onEnd:()=>{_d(c),_d(l),o.activeComponent&&!o.activeComponent.destroyed&&o.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{A4(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},redo:()=>{D4(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},addToSelection:async f=>{let y=o.activeComponent;if((y==null?void 0:y.type)==="reshape"){const _=[...this.updateGraphics,f];this.updateGraphics.removeAll(),o.onEnd(),o.destroy();const x=await this._setupTransformOrReshape2DOperation(_,"transform",s,n);if(Xr(x))return;this._setUpdateOperationHandle(x,s)}else this.updateGraphics.add(f),y.graphics=this.updateGraphics.toArray(),y.refresh(),o.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[f],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async f=>{const y=this.updateGraphics.indexOf(f);o.history.undo.forEach(x=>x.updates.splice(y,1)),o.history.redo.forEach(x=>x.updates.splice(y,1)),this.updateGraphics.remove(f);const _=this.updateGraphics.toArray();if(_.length===0)o.complete();else{const x=_[0].geometry;_.length!==1||x==null||x.type!=="point"&&x.type!=="multipoint"?o.activeComponent.graphics=_:o.toggleTool()}this.emit("update",{graphics:_,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[f],type:"selection-change"},type:"update"})},toggleTool:async()=>{var x;if(this.updateGraphics.length>1)return;const f=this.updateGraphics.at(0),y=f.geometry;if(y!=null&&(o.tool==="reshape"&&(y.type==="point"||y.type==="multipoint")||o.tool==="transform"&&y.type==="extent"))return;let _=null;o.tool==="transform"?_=await this._getReshape([f],s,n):o.tool==="reshape"&&(_=await this._getBox([f],s,n)),Xr(_)||((x=o.activeComponent)==null||x.destroy(),o.activeComponent=_,o.activeComponent&&(_d(c),c=this._getHandlesForComponent(o,s)))}}),l=[n.on("immediate-click",f=>this._getCommonUpdateOperationClickHandlers(o,f,s),sr.WIDGET),n.on("key-down",f=>{if(this._getCommonUpdateOperationKeyDownHandlers(o,f),f.key===Fn.constraint&&!f.repeat&&o){const y=o.activeComponent;y&&y.type==="box"&&(y.preserveAspectRatio=!y.preserveAspectRatio)}},sr.WIDGET),n.on("key-up",f=>{if(f.key===Fn.constraint&&o){const y=o.activeComponent;y&&y.type==="box"&&(y.preserveAspectRatio=!y.preserveAspectRatio)}},sr.WIDGET)];let c=this._getHandlesForComponent(o,s);return o}async _getGraphicMover(e,i,s){const{enableMoveAllGraphics:n,highlightOptions:r}=i,o=await this._requireModule(nt(()=>import("./GraphicMover-DuenV4MN.js"),__vite__mapDeps([325,313,64,51,52,2,44]),import.meta.url));return Xr(o)?o:new o.module.default({enableMoveAllGraphics:n,highlightsEnabled:!!(r!=null&&r.enabled),indicatorsEnabled:!1,graphics:e,view:s,callbacks:{onGraphicMoveStart:({dx:l,dy:c,graphic:f})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:c,mover:f,type:"move-start"},type:"update"})},onGraphicMove:({dx:l,dy:c,graphic:f})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:c,mover:f,type:"move"},type:"update"}),onGraphicMoveStop:({dx:l,dy:c,graphic:f})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:c,mover:f,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,i,s){var y,_;const{enableRotation:n,enableScaling:r,highlightOptions:o,preserveAspectRatio:l}=i,c=await this._requireModule(nt(()=>import("./Box-rJGa6Ea7.js"),__vite__mapDeps([326,313,325,64,51,52,2,44,327,310,139,140,10,38,39,37,128,304,320,319]),import.meta.url));if(Xr(c))return c;const f=(_=(y=this.view)==null?void 0:y.inputManager)==null?void 0:_.isModifierKeyDown(Fn.constraint);return new c.module.default({graphics:e,enableRotation:n,enableScaling:r,highlightsEnabled:!!(o!=null&&o.enabled),preserveAspectRatio:!!l!=!!f,layer:this._internalGraphicsLayer,view:s,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onMove:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onMoveStop:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onScaleStart:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onScale:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onScaleStop:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onRotateStart:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onRotate:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"}),onRotateStop:x=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...x},type:"update"})}})}async _getReshape(e,i,s){var c,f,y;const n=((c=i.reshapeOptions)==null?void 0:c.edgeOperation)==="split",r=((f=i.reshapeOptions)==null?void 0:f.shapeOperation)==="move",o=!!((y=i.highlightOptions)!=null&&y.enabled),l=await this._requireModule(nt(()=>import("./Reshape-BC4CPwFa.js"),__vite__mapDeps([328,40,41,42,313,325,64,51,52,2,44,310,139,140,10,38,39,37,128,304,318,312,210,291,184,319,327]),import.meta.url));return Xr(l)?l:new l.module.default({enableMidpoints:n,enableMovement:r,graphic:e[0],highlightsEnabled:o,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:s,callbacks:{onReshapeStart:_=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{..._},type:"update"}),onReshape:_=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{..._},type:"update"}),onReshapeStop:({mover:_,type:x})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:_,type:x},type:"update"}),onMoveStart:({dx:_,dy:x,mover:S,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:_,dy:x,mover:S,type:P},type:"update"}),onMove:({dx:_,dy:x,mover:S,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:_,dy:x,mover:S,type:P},type:"update"}),onMoveStop:({dx:_,dy:x,mover:S,type:P})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:_,dy:x,mover:S,type:P},type:"update"}),onVertexAdd:({added:_,type:x,vertices:S})=>{const P=_.map(A=>bZ(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:P,vertices:S,type:x},type:"update"})},onVertexRemove:({removed:_,type:x,vertices:S})=>{const P=_.map(A=>bZ(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:P,vertices:S,type:x},type:"update"})}}})}_getHandlesForComponent(e,i){const s=e.activeComponent;if(!s)return[];switch(s.type){case"graphic-mover":return[s.on("graphic-click",({graphic:n,viewEvent:r})=>{var o;(o=r.native)!=null&&o.shiftKey&&(r.stopPropagation(),e.removeFromSelection(n))}),s.on("graphic-move-start",n=>e.addToHistory(n0(n.allGraphics)))];case"box":return[s.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(e,i,n)),s.on("move-start",n=>e.addToHistory(n0(n.graphics))),s.on("rotate-start",n=>e.addToHistory(n0(n.graphics))),s.on("scale-start",n=>e.addToHistory(n0(n.graphics)))];case"reshape":return[s.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(e,i,n)),s.on("move-start",n=>e.addToHistory(n0([n.mover]))),s.on("reshape-start",n=>e.addToHistory(n0([n.graphic]))),s.on("vertex-add",n=>e.addToHistory(n0([n.oldGraphic]))),s.on("vertex-remove",n=>e.addToHistory(n0([n.oldGraphic])))];case"move-3d":return[s.events.on("record-undo",({updates:n})=>{e.addToHistory({updates:n})}),s.events.on("move-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.objects.length>0?n.objects[0].graphic:null,type:"move-start"},type:"update"})}),s.events.on("move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:n.dx,dy:n.dy,mover:n.objects.length>0?n.objects[0].graphic:null,type:"move"},type:"update"})}),s.events.on("move-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.objects.length>0?n.objects[0].graphic:null,type:"move-stop"},type:"update"})}),s.events.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.object.graphic],e,i):e.toggleTool()})];case"transform-3d":return[s.events.on("record-undo",({updates:n})=>{e.addToHistory({updates:n})}),s.events.on("translate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-start"},type:"update"})}),s.events.on("translate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-stop"},type:"update"})}),s.events.on("rotate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,angle:n.angle,type:"rotate-start"},type:"update"})}),s.events.on("rotate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,angle:n.angle,type:"rotate-stop"},type:"update"})}),s.events.on("scale-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-start"},type:"update"})}),s.events.on("scale-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-stop"},type:"update"})}),s.events.on("translate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move"},type:"update"})}),s.events.on("rotate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,angle:n.angle,type:"rotate"},type:"update"})}),s.events.on("scale",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.object.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale"},type:"update"})}),s.events.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.object.graphic],e,i):e.toggleTool()})];case"reshape-3d":return[s.events.on("reshape",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...n,mover:n.object.graphic},type:"update"})}),s.events.on("move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...n,mover:n.object.graphic},type:"update"})}),s.events.on("vertex-add",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),s.events.on("vertex-remove",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),s.events.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.object.graphic],e,i):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,i,s){var o;const{graphic:n,viewEvent:r}=s;return(o=r.native)!=null&&o.shiftKey&&n.layer===this.layer?(r.stopPropagation(),e.removeFromSelection(n)):i.toggleToolOnClick?(r.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,i){var r;this._operationHandle=e;const s=(r=this.view)==null?void 0:r.map;this._disablePopup(i);const n=()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),l=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),s&&s.remove(this._internalGraphicsLayer),this._restorePopup(i),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:l,toolEventInfo:null,type:"update"})}};e.on("complete",n)}async _getCommonUpdateOperationClickHandlers(e,i,s){const n=FF(i),r=await i.async(()=>this._getFirstHit(n));if(r==null)return void e.complete();if(i.native.shiftKey&&this._toggleSelection([r.graphic],e,s))return void i.stopPropagation();this.updateGraphics.includes(r.graphic)?i.stopPropagation():e.complete()}_toggleSelection(e,i,s){const n=!!s.multipleSelectionEnabled;return e.some(r=>r!=null&&!(!n||r.layer!==this.layer)&&(this.updateGraphics.includes(r)?i.removeFromSelection(r):i.addToSelection(r),!0))}_getCommonUpdateOperationKeyDownHandlers(e,i){if(!e)return;const s=i.key;s===Fn.undo&&e.canUndo()?(i.stopPropagation(),e.undo()):s===Fn.redo&&e.canRedo()?(i.stopPropagation(),e.redo()):s===Fn.cancel?(i.stopPropagation(),e.cancel()):this.allowDeleteKey&&Fn.delete.includes(s)&&this._onDeleteKey(i)}_onDeleteKey(e){var n;if(!this._operationHandle||this._operationHandle.type!=="update")return;const i=this.activeComponent,s=this.updateGraphics.toArray();i!=null&&(i.type!=="reshape"||s.length===1&&((n=s[0].geometry)==null?void 0:n.type)==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){var e,i;this._internalGraphicsLayer&&((i=(e=this.view)==null?void 0:e.map)==null||i.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=so(this._internalGraphicsLayer))}_isComponentGraphic(e){var s;const{activeComponent:i}=this;return!(!e||i==null)&&(((s=e.attributes)==null?void 0:s.esriSketchTool)||i.type==="draw-2d"&&i.graphic===e||(i.type==="box"||i.type==="reshape")&&i.isUIGraphic(e))}_displayPointerCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){var e;(e=this.view)!=null&&e.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,i,s){zt.getLogger(this).error(new rt(e,i,s))}async _requireModule(e){const i=new AbortController;this._moduleLoaderAbortController=i;const s=await e;return this._moduleLoaderAbortController!==i||i.signal.aborted?{requireError:"aborted"}:{module:s}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){}wait(){return dO(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var i;return((i=this.view)==null?void 0:i.type)!=="3d"||this.updateOnGraphicClick||((e==null?void 0:e.toggleToolOnClick)??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?(og(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await pC(dO(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",cee("view"))}_logMissingLayer(){this._logError(HUe,cee("layer"))}};I([N()],Zs.prototype,"_defaultSnappingManager",void 0),I([N()],Zs.prototype,"updating",null),I([N()],Zs.prototype,"_operationHandle",void 0),I([N({readOnly:!0})],Zs.prototype,"activeTool",null),I([N()],Zs.prototype,"activeTooltip",null),I([N()],Zs.prototype,"activeFillSymbol",void 0),I([N()],Zs.prototype,"activeLineSymbol",void 0),I([N()],Zs.prototype,"activeVertexSymbol",void 0),I([N()],Zs.prototype,"allowDeleteKey",void 0),I([N({readOnly:!0})],Zs.prototype,"createGraphic",null),I([N()],Zs.prototype,"defaultCreateOptions",null),I([N()],Zs.prototype,"defaultUpdateOptions",null),I([N({type:WC,nonNullable:!0})],Zs.prototype,"labelOptions",null),I([N()],Zs.prototype,"layer",void 0),I([N({types:$c})],Zs.prototype,"pointSymbol",void 0),I([N({types:$c})],Zs.prototype,"polygonSymbol",void 0),I([N({types:$c})],Zs.prototype,"polylineSymbol",void 0),I([N()],Zs.prototype,"meshSymbol",void 0),I([N({type:ZC,nonNullable:!0})],Zs.prototype,"snappingOptions",null),I([N()],Zs.prototype,"snappingManager",null),I([N({readOnly:!0})],Zs.prototype,"state",null),I([N({type:$G,nonNullable:!0})],Zs.prototype,"tooltipOptions",null),I([N({readOnly:!0})],Zs.prototype,"updateGraphics",void 0),I([N()],Zs.prototype,"updateOnGraphicClick",void 0),I([N({type:SA,nonNullable:!0})],Zs.prototype,"valueOptions",null),I([N({types:$c})],Zs.prototype,"vertexSymbol",void 0),I([N({value:null})],Zs.prototype,"view",null),I([N({constructOnly:!0,type:PA})],Zs.prototype,"sketchOptions",void 0),Zs=I([De("esri.widgets.Sketch.SketchViewModel")],Zs);const HUe="sketch:missing-property",cee=t=>`Property '${t}' is missing on SketchViewModel.`;function UUe(t){return t==="polygon"||t==="rectangle"||t==="circle"}function A4(t,e){u0e("undo",t.history.undo,t.history.redo,e)}function D4(t,e){u0e("redo",t.history.redo,t.history.undo,e)}function u0e(t,e,i,s){const n=e.pop();if(!n)return;const r=n.updates,o=[];s.forEach((l,c)=>{const f=r[c];f!=null&&("geometry"in f&&f.geometry!=null&&(o.push({geometry:l.geometry}),l.geometry=f.geometry),"symbol"in f&&f.symbol!=null&&(o.push({symbol:l.symbol}),l.symbol=f.symbol),"undo"in f&&(o.push(f),f[t](l)))}),i.push({updates:o})}function hee(t,e){t!=null&&e.hasGrabbedManipulators&&(t.activeTool=null)}function n0(t){return{updates:t.map(({geometry:e})=>(e==null?void 0:e.type)==="mesh"?{geometry:e.cloneShallow()}:{geometry:e})}}function k4(t,e){var i;(i=t.tools)==null||i.remove(e),e.destroyed||e.destroy()}function Xr(t){return"requireError"in t&&t.requireError==="aborted"}const YUe=Zs;let yc=class extends Ei{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};I([N({type:Boolean,nonNullable:!0})],yc.prototype,"colorSelection",void 0),I([N({type:Boolean,nonNullable:!0})],yc.prototype,"dynamicScaleToggle",void 0),I([N({type:Boolean,nonNullable:!0})],yc.prototype,"gridEnabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],yc.prototype,"numericInputs",void 0),I([N({type:Boolean,nonNullable:!0})],yc.prototype,"gridSnapEnabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],yc.prototype,"lineIntervalInput",void 0),I([N({type:Boolean,nonNullable:!0})],yc.prototype,"outOfScaleWarning",void 0),I([N({type:Boolean,nonNullable:!0})],yc.prototype,"placementButtons",void 0),I([N({type:Boolean,nonNullable:!0})],yc.prototype,"rotateWithMapToggle",void 0),yc=I([De("esri.widgets.support.GridControls.VisibleElements")],yc);const c0e=yc;let vc=class extends Ei{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new c0e({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};I([N({type:Boolean,nonNullable:!0})],vc.prototype,"enabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],vc.prototype,"featureEnabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],vc.prototype,"gridEnabledToggle",void 0),I([N({type:Boolean,nonNullable:!0})],vc.prototype,"header",void 0),I([N({type:Boolean,nonNullable:!0})],vc.prototype,"layerList",void 0),I([N({type:Boolean,nonNullable:!0})],vc.prototype,"gridControls",void 0),I([N({type:c0e,nonNullable:!0})],vc.prototype,"gridControlsElements",void 0),I([N({type:Boolean,nonNullable:!0})],vc.prototype,"layerListToggleLayersButton",void 0),I([N({type:Boolean,nonNullable:!0})],vc.prototype,"selfEnabledToggle",void 0),vc=I([De("esri.widgets.support.SnappingControls.VisibleElements")],vc);const LA=vc;let Mh=class extends Ei{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};I([N({type:Boolean,nonNullable:!0})],Mh.prototype,"point",void 0),I([N({type:Boolean,nonNullable:!0})],Mh.prototype,"polyline",void 0),I([N({type:Boolean,nonNullable:!0})],Mh.prototype,"polygon",void 0),I([N({type:Boolean,nonNullable:!0})],Mh.prototype,"rectangle",void 0),I([N({type:Boolean,nonNullable:!0})],Mh.prototype,"circle",void 0),I([N({type:Boolean,nonNullable:!0})],Mh.prototype,"multipoint",void 0),I([N({type:Boolean,nonNullable:!0})],Mh.prototype,"mesh",void 0),Mh=I([De("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],Mh);let by=class extends Ei{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};I([N({nonNullable:!0})],by.prototype,"rectangle-selection",void 0),I([N({nonNullable:!0})],by.prototype,"lasso-selection",void 0),I([N({nonNullable:!0})],by.prototype,"custom-selection",void 0),by=I([De("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],by);let yu=class extends Ei{constructor(e){super(e),this.createTools=new Mh,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new by,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new LA,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};I([N({type:Mh,nonNullable:!0})],yu.prototype,"createTools",void 0),I([N({type:Boolean,nonNullable:!0})],yu.prototype,"directionModePicker",void 0),I([N({type:Boolean,nonNullable:!0})],yu.prototype,"duplicateButton",void 0),I([N({type:Boolean,nonNullable:!0})],yu.prototype,"labelsToggle",void 0),I([N({type:by,nonNullable:!0})],yu.prototype,"selectionTools",void 0),I([N({type:Boolean,nonNullable:!0})],yu.prototype,"settingsMenu",void 0),I([N({type:Boolean,nonNullable:!0})],yu.prototype,"snappingControls",void 0),I([N({type:LA,nonNullable:!0})],yu.prototype,"snappingControlsElements",void 0),I([N({type:Boolean,nonNullable:!0})],yu.prototype,"tooltipsToggle",void 0),I([N({type:Boolean,nonNullable:!0})],yu.prototype,"undoRedoMenu",void 0),yu=I([De("esri.widgets.Sketch.VisibleElements")],yu);const h0e=yu,SE={anchor:"esri-widget__anchor",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetDisabled:"esri-widget--disabled"};function lyt(t){return t&&typeof t.highlight=="function"}function XUe(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function uyt(t,e){if(e&&t){const{minScale:i,maxScale:s}=t;if(WUe(i,s))return XUe(e,i,s)}return!0}function WUe(t,e){return t!=null&&t>0||e!=null&&e>0}function cyt(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}function M9(t){return t!=null&&typeof t=="object"&&"createQuery"in t&&"queryFeatures"in t&&"layer"in t&&"view"in t}function _6(){return[1,0,0,1,0,0]}function d0e(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function ZUe(t,e,i,s,n,r){return[t,e,i,s,n,r]}function KUe(t,e){return new Float64Array(t,e,6)}const f0e=_6();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:f0e,clone:d0e,create:_6,createView:KUe,fromValues:ZUe},Symbol.toStringTag,{value:"Module"}));function dee(t){let e,i,s=[],n=!1;function r(...o){return n&&e===this&&JUe(o,s)||(i=t.apply(this,o),e=this,s=o,n=!0),i}return r}function JUe(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}let QUe=class{constructor(e){this._observable=new SC,this._set=new Set(e)}get size(){return mi(this._observable),this._set.size}add(e){const i=this._set.size;return this._set.add(e),this._set.size!==i&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const i=this._set.delete(e);return i&&this._observable.notify(),i}entries(){return mi(this._observable),this._set.entries()}forEach(e,i){mi(this._observable),this._set.forEach((s,n)=>e.call(i,s,n,this),i)}has(e){return mi(this._observable),this._set.has(e)}keys(){return mi(this._observable),this._set.keys()}values(){return mi(this._observable),this._set.values()}[Symbol.iterator](){return mi(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}},A9=class extends Ei{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,s={}){return this._installWatch(e,i,s,xi)}addWhen(e,i,s={}){return this._installWatch(e,i,s,vg)}addOnCollectionChange(e,i,{initial:s=!1,final:n=!1}={}){const r=++this._handleId;return this.addHandles([_g(e,"after-changes",this._createSyncUpdatingCallback(),Hp),_g(e,"change",i,{onListenerAdd:s?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],r),ds(()=>this.removeHandles(r))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(ds(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(N4)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const s=()=>this.removeHandles(i);return e.then(s,s),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,s={},n){const r=++this._handleId;s.sync||this._installSyncUpdatingWatch(e,r);const o=n(e,i,s);return this.addHandles(o,r),ds(()=>this.removeHandles(r))}_installSyncUpdatingWatch(e,i){const s=this._createSyncUpdatingCallback(),n=xi(e,s,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(N4),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(bq(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(N4))}),N4)}}};I([N({readOnly:!0})],A9.prototype,"updating",void 0),A9=I([De("esri.core.support.UpdatingHandles")],A9);const N4=-42;function D9(t,e){return t===e||t!=null&&e!=null&&Ko(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}function rN(t,e,i){return t===e||t!=null&&e!=null&&Ko(t.spatialReference,e.spatialReference)&&X0(t.x,e.x,i)&&X0(t.y,e.y,i)&&X0(t.z??0,e.z??0,i)&&X0(t.m??0,e.m??0,i)}var EE;function fyt(t){return t===EE.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(EE||(EE={}));const pyt=["freehand","hybrid","click"],p0e="click";let eYe=class{constructor({consumesClicks:e,grabbableForEvent:i}){this.events=new Sa,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=e,this.grabbableForEvent=i}destroy(){}intersectionDistance(e,i){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}};var Rr;(function(t){t[t.Z=0]="Z",t[t.M=1]="M"})(Rr||(Rr={}));let tYe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(yr())}pointToVector(e){return this._tag(Vc(e.x,e.y))}arrayToVector(e){return this._tag(Vc(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,i=new Hi){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Hi){return i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=void 0,i.m=void 0,i.hasZ=!1,i.hasM=!1,i.spatialReference=this.spatialReference,i}lerp(e,i,s,n){return AG(n,e,i,s)}addDelta(e,i,s){e[0]+=i,e[1]+=s}distance(e,i){return UC(e,i)}getZ(e,i=void 0){return i}hasZ(){return!1}getM(e,i=void 0){return i}hasM(){return!1}clone(e){return this._tag(Wpe(e))}copy(e,i){return zpe(i,e)}fromXYZ(e){return this._tag(Vc(e[0],e[1]))}toXYZ(e,i=Nt()){return Vn(i,e[0],e[1],0)}pointToXYZ(e,i=Nt()){return Vn(i,e.x,e.y,0)}equals(e,i){return Ype(e,i)}_tag(e){return e}},fee=class{constructor(e,i){this._valueType=e,this.spatialReference=i}createVector(){return this._tag(Nt())}pointToVector(e){return this._tag(vl(e.x,e.y,this._valueType===Rr.Z?e.z:e.m))}arrayToVector(e){return this._tag(vl(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===Rr.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,i=new Hi){return i.x=e[0],i.y=e[1],i.z=this._valueType===Rr.Z?e[2]:void 0,i.m=this._valueType===Rr.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Hi){return i.x=e[0],i.y=e[1],i.z=this._valueType===Rr.Z?e[2]:void 0,i.m=this._valueType===Rr.M?e[2]:void 0,i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(!e)return;i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"});const s=this._valueType===Rr.Z,n=this._valueType===Rr.M;return i.x=e[0],i.y=e[1],i.z=s?e[2]:void 0,i.m=n?e[2]:void 0,i.hasZ=s,i.hasM=n,i.spatialReference=this.spatialReference,i}lerp(e,i,s,n){return Sx(n,e,i,s)}addDelta(e,i,s,n){e[0]+=i,e[1]+=s,this._valueType===Rr.Z&&(e[2]+=n)}distance(e,i){return this._valueType===Rr.Z?Hg(e,i):UC(e,i)}getZ(e,i=void 0){return this._valueType===Rr.Z?e[2]:i}hasZ(){return this._valueType===Rr.Z}getM(e,i=void 0){return this._valueType===Rr.M?e[2]:i}hasM(){return this._valueType===Rr.M}clone(e){return this._tag(Lce(e))}copy(e,i){return Zl(i,e)}fromXYZ(e,i=0,s=0){return this._tag(vl(e[0],e[1],this._valueType===Rr.Z?e.length>2?e[2]:i:s))}toXYZ(e,i=Nt()){return Vn(i,e[0],e[1],this._valueType===Rr.Z?e[2]:0)}pointToXYZ(e,i=Nt()){return Vn(i,e.x,e.y,this._valueType===Rr.Z?e.z??0:0)}equals(e,i){return wE(e,i)}_tag(e){return e}},iYe=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(hm())}pointToVector(e){return this._tag(qc(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag(qc(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,i=new Hi){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}arrayToPoint(e,i=new Hi){return i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.spatialReference=this.spatialReference,i}vectorToDehydratedPoint(e,i){if(e)return i??(i={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}),i.x=e[0],i.y=e[1],i.z=e[2],i.m=e[3],i.hasZ=!0,i.hasM=!0,i.spatialReference=this.spatialReference,i}lerp(e,i,s,n){return oA(n,e,i,s)}addDelta(e,i,s,n){e[0]+=i,e[1]+=s,e[2]+=n}distance(e,i){return Hg(e,i)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag(Sfe(e))}copy(e,i){return N2(i,e)}fromXYZ(e,i=0,s=0){return this._tag(qc(e[0],e[1],e.length>2?e[2]:i,s))}toXYZ(e,i=Nt()){return Vn(i,e[0],e[1],e[2])}pointToXYZ(e,i=Nt()){return Vn(i,e.x,e.y,e.z??0)}equals(e,i){return zC(e,i)}_tag(e){return e}};function m0e(t,e,i){return t&&e?new iYe(i):e?new fee(Rr.M,i):t?new fee(Rr.Z,i):new tYe(i)}var zF;let wb=zF=class extends Hs(wt){constructor(t){super(t),this.type="georeferenced",this.origin=null}};wb.absolute=new zF,I([ni({georeferenced:"georeferenced"},{readOnly:!0})],wb.prototype,"type",void 0),I([N({type:[Number],nonNullable:!1,json:{write:!0}})],wb.prototype,"origin",void 0),wb=zF=I([De("esri.geometry.support.MeshGeoreferencedVertexSpace")],wb);const sYe=wb;let iS=class extends Hs(wt){constructor(e){super(e),this.type="local",this.origin=Nt()}};I([ni({local:"local"},{readOnly:!0})],iS.prototype,"type",void 0),I([N({type:[Number],nonNullable:!0,json:{write:!0}})],iS.prototype,"origin",void 0),iS=I([De("esri.geometry.support.MeshLocalVertexSpace")],iS);const nYe=iS;function pee(){return zt.getLogger("esri.geometry.Mesh")}function byt(t){return!QG(t)}function QG(t){return t.origin!=null}function rYe(t){return QG(t.vertexSpace)}function xyt(t,e){if(!QG(t))return null;const[i,s,n]=t.origin;return new Hi({x:i,y:s,z:n,spatialReference:e})}function wyt(t,e){const{x:i,y:s,z:n,spatialReference:r}=t,o=[i,s,n??0];return(e==null?void 0:e.geographic)!==void 0&&(g2(pee(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),e.vertexSpace&&pee().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),((e==null?void 0:e.vertexSpace)??aYe(e==null?void 0:e.geographic)??oYe(r))==="local"?new nYe({origin:o}):new sYe({origin:o})}function oYe(t){return t.isGeographic||t.isWebMercator?"local":"georeferenced"}function aYe(t){return t==null?void 0:t?"local":"georeferenced"}function Syt(t,e){return t.type===e.type&&(t.origin===e.origin||t.origin!=null&&e.origin!=null&&hn(t.origin,e.origin))}function lYe(t){return"declaredClass"in t}function mee(t){return"declaredClass"in t}function uYe(t){return"declaredClass"in t}function Eyt(t,e){return t?uYe(t)?t:new Xp({layer:e,sourceLayer:e,visible:t.visible,symbol:Ue(t.symbol),attributes:Ue(t.attributes),geometry:cYe(t.geometry)}):null}function cYe(t){return t==null?null:lYe(t)?t:EC(hYe(t))}function hYe(t){const{wkid:e,wkt:i,wkt2:s,latestWkid:n}=t.spatialReference,r={wkid:e,wkt:i,wkt2:s,latestWkid:n};switch(t.type){case"point":{const{x:o,y:l,z:c,m:f}=t;return{x:o,y:l,z:c,m:f,spatialReference:r}}case"polygon":{const{rings:o,hasZ:l,hasM:c}=t;return{rings:gee(o),hasZ:l,hasM:c,spatialReference:r}}case"polyline":{const{paths:o,hasZ:l,hasM:c}=t;return{paths:gee(o),hasZ:l,hasM:c,spatialReference:r}}case"extent":{const{xmin:o,xmax:l,ymin:c,ymax:f,zmin:y,zmax:_,mmin:x,mmax:S,hasZ:P,hasM:A}=t;return{xmin:o,xmax:l,ymin:c,ymax:f,zmin:y,zmax:_,mmin:x,mmax:S,hasZ:P,hasM:A,spatialReference:r}}case"multipoint":{const{points:o,hasZ:l,hasM:c}=t;return{points:y0e(o)?g0e(o):o,hasZ:l,hasM:c,spatialReference:r}}default:return}}function gee(t){return dYe(t)?t.map(e=>g0e(e)):t}function g0e(t){return t.map(e=>Array.from(e))}function dYe(t){for(const e of t)if(e.length!==0)return y0e(e);return!1}function y0e(t){return t.length>0&&(lC(t[0])||uC(t[0]))}function FA(t,e){if(!t)return null;let i;if(mee(t)){if(e==null)return t.clone();if(mee(e))return e.copy(t)}return e!=null?(i=e,i.x=t.x,i.y=t.y,i.spatialReference=t.spatialReference,t.hasZ?(i.z=t.z,i.hasZ=t.hasZ):(i.z=void 0,i.hasZ=!1),t.hasM?(i.m=t.m,i.hasM=!0):(i.m=void 0,i.hasM=!1)):(i=Pf(t.x,t.y,t.z,t.spatialReference),t.hasM&&(i.m=t.m,i.hasM=!0)),i}function fYe(t){const{wkid:e,wkt:i,wkt2:s,latestWkid:n}=t,r={wkid:e,wkt:i,wkt2:s,latestWkid:n};return qi.fromJSON(r)}function pYe(t,e){if(!e.supported)return;let i=1/0,s=-1/0;const n=e.upperBoundX-e.lowerBoundX;t.forEach(o=>{let l=o.pos[0];for(;l<e.lowerBoundX;)l+=n;for(;l>e.upperBoundX;)l-=n;i=Math.min(i,l),s=Math.max(s,l),o.pos[0]=l});const r=s-i;n-r<r&&t.forEach(o=>{o.pos[0]<0&&(o.pos[0]+=n)})}function mYe(t,e){const i=jb(t);return e===EE.Global&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}let e5=class{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}},Zp=class{constructor(e,i,s){this.component=e,this.leftVertex=i,this.rightVertex=s,this.type="edge",i.rightEdge=this,s.leftEdge=this}},zA=class{constructor(e,i){this._spatialReference=e,this._viewingMode=i,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||pYe(this.vertices,mYe(this._spatialReference,this._viewingMode))}updateVertexIndex(e,i){if(this.vertices.length===0)return;const s=this.vertices[0];let n=null,r=e,o=i;do n=r,n.index=o++,r=n.rightEdge?n.rightEdge.rightVertex:null;while(r!=null&&r!==s);n.leftEdge&&n!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(n),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(e,i){const s=this.vertices[e];this.vertices[e]=this.vertices[i],this.vertices[i]=s}iterateVertices(e){if(this.vertices.length===0)return;const i=this.vertices[0];let s=i;do e(s,s.index),s=s.rightEdge!=null?s.rightEdge.rightVertex:null;while(s!==i&&s!=null)}},qF=class v0e extends Sa{constructor(e,i){super(),this.type=e,this.coordinateHelper=i,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:this.type}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const e of this.components)for(const i of e.vertices)yield i}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],i=this.coordinateHelper.vectorToArray;for(const s of this.components){if(s.vertices.length<1)continue;const n=[];let r=s.vertices.find(l=>l.leftEdge==null);const o=r;do n.push(i(r.pos)),r=r.rightEdge?r.rightEdge.rightVertex:null;while(r&&r!==o);e.push(n)}return new Ef({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],i=this.coordinateHelper.vectorToArray;for(const s of this.components){if(s.vertices.length<1)continue;const n=[],r=s.vertices[0];let o=r;const l=o;do n.push(i(o.pos)),o=o.rightEdge!=null?o.rightEdge.rightVertex:null;while(o&&o!==l);s.isClosed()&&n.push(i(r.pos)),e.push(n)}return new Wa({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,i){const s=e.spatialReference,n=m0e(e.hasZ,e.hasM,s),r=new v0e(e.type,n);switch(e.type){case"polygon":gYe(r,e,i);break;case"polyline":yYe(r,e,i);break;case"point":yee(r,e,i);break;case"mesh":yee(r,e.origin,i),r._geometry=e,r._dirty=!1}return r}};function gYe(t,e,i){const s=e.spatialReference,n=t.coordinateHelper,r=e.rings;for(let o=0;o<r.length;++o){const l=r[o],c=new zA(s,i);c.index=o;const f=l.length>2&&df(l[0],l[l.length-1]),y=f?l.length-1:l.length;for(let x=0;x<y;++x){const S=n.arrayToVector(l[x]),P=new e5(c);c.vertices.push(P),P.pos=S,P.index=x}const _=c.vertices.length-1;for(let x=0;x<_;++x){const S=c.vertices[x],P=c.vertices[x+1],A=new Zp(c,S,P);c.edges.push(A)}if(f){const x=new Zp(c,c.vertices[c.vertices.length-1],c.vertices[0]);c.edges.push(x)}t.components.push(c)}}function yYe(t,e,i){const s=e.spatialReference,n=t.coordinateHelper,r=e.paths;for(let o=0;o<r.length;++o){const l=r[o],c=new zA(s,i);c.index=o;const f=l.length;for(let _=0;_<f;++_){const x=n.arrayToVector(l[_]),S=new e5(c);c.vertices.push(S),S.pos=x,S.index=_}const y=c.vertices.length-1;for(let _=0;_<y;++_){const x=c.vertices[_],S=c.vertices[_+1],P=new Zp(c,x,S);c.edges.push(P)}t.components.push(c)}}function yee(t,e,i){const s=e.spatialReference,n=t.coordinateHelper,r=new zA(s,i);r.index=0;const o=new e5(r);o.index=0,o.pos=n.pointToVector(e),r.vertices.push(o),t.components.push(r)}function Ww(t){return t.type==="mesh"}var zl;(function(t){t[t.NEW_STEP=0]="NEW_STEP",t[t.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(zl||(zl={}));let vYe=class{constructor(e,i,s){this._editGeometry=e,this._component=i,this._pos=s,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";this._addedVertex==null&&(e="apply",this._addedVertex=new e5(this._component));const i=this._component.getLastVertex();if(i==null)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let s=null;i.rightEdge&&(this._originalEdge=i.rightEdge,s=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._left==null&&(this._left=new Zp(this._component,i,this._addedVertex)),this._component.edges.push(this._left),i.rightEdge=this._left,this._originalEdge!=null&&s!=null&&(this._right==null&&(this._right=new Zp(this._component,this._addedVertex,s)),this._component.edges.push(this._right),s.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,i.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){this._addedVertex!=null&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),this._left!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),this._right!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),this._originalEdge!=null&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),this._left!=null?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}},_Ye=class _0e{constructor(e,i,s){this._editGeometry=e,this._vertices=i,this.operation=s,this._undone=!1}apply(){this._vertices.forEach(e=>this.operation.apply(e)),this._editGeometry.components.forEach(e=>e.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach(e=>this.operation.undo(e)),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let i=0;i<e._vertices.length;++i)if(e._vertices[i]!==this._vertices[i])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof _0e&&this.canAccumulate(e))&&(this._vertices.forEach(i=>this.operation.accumulate(i,e.operation)),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}};var Oc;(function(t){t[t.CUMULATIVE=0]="CUMULATIVE",t[t.REPLACE=1]="REPLACE"})(Oc||(Oc={}));let bYe=class{constructor(e,i,s=0){this._editGeometry=e,this._vertices=i,this._minNumberOfVertices=s,this.removedVertices=null}apply(){let e="redo";if(this.removedVertices==null){const i=this.removedVertices=[];this._vertices.forEach(s=>{const n=this._removeVertex(s);n!=null&&i.push(n)}),e="apply"}else this.removedVertices.forEach(i=>{this._removeVertex(i.removedVertex)});this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){var e;(e=this.removedVertices)==null||e.forEach(i=>{this._undoRemoveVertex(i)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const i=e.component;if(i.vertices.length<=this._minNumberOfVertices)return null;const s={removedVertex:e,createdEdge:null},n=e.leftEdge,r=e.rightEdge;return i.vertices.splice(i.vertices.indexOf(e),1),n&&(i.edges.splice(i.edges.indexOf(n),1),n.leftVertex.rightEdge=null),r&&(i.edges.splice(i.edges.indexOf(r),1),r.rightVertex.leftEdge=null),e.index===0&&r&&this._vertices.length>0&&i.swapVertices(i.vertices.indexOf(r.rightVertex),0),n&&r&&(s.createdEdge=new Zp(i,n.leftVertex,r.rightVertex),i.edges.push(s.createdEdge)),r&&i.updateVertexIndex(r.rightVertex,r.rightVertex.index-1),s}_undoRemoveVertex(e){const i=e.removedVertex,s=e.removedVertex.component,n=i.leftEdge,r=i.rightEdge;e.createdEdge&&s.edges.splice(s.edges.indexOf(e.createdEdge),1),s.vertices.push(i),n&&(s.edges.push(n),n.leftVertex.rightEdge=n),r&&(s.edges.push(r),r.rightVertex.leftEdge=r),s.updateVertexIndex(i,i.index)}},xYe=class{constructor(e,i,s){this._editGeometry=e,this._edge=i,this._t=s,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const i=this._edge,s=i.component,n=i.leftVertex,r=i.rightVertex;s.edges.splice(s.edges.indexOf(i),1),this.createdVertex==null&&(e="apply",this.createdVertex=new e5(i.component)),s.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(i.leftVertex.pos,i.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),this._left==null&&(this._left=new Zp(s,n,this.createdVertex)),this._left.leftVertex.leftEdge?s.edges.push(this._left):s.edges.unshift(this._left),n.rightEdge=this._left,this._right==null&&(this._right=new Zp(s,this.createdVertex,r)),s.edges.push(this._right),r.leftEdge=this._right,s.updateVertexIndex(this.createdVertex,n.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(this.createdVertex==null||this._left==null||this._right==null)return null;const e=this._edge,i=e.component,s=this.createdVertex.leftEdge,n=this.createdVertex.rightEdge,r=s==null?void 0:s.leftVertex,o=n==null?void 0:n.rightVertex;i.vertices.splice(i.vertices.indexOf(this.createdVertex),1),i.edges.splice(i.edges.indexOf(this._left),1),i.edges.splice(i.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?i.edges.push(this._edge):i.edges.unshift(this._edge),r&&(r.rightEdge=e),o&&(o.leftEdge=e),r&&i.updateVertexIndex(r,r.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}},wYe=class b0e{constructor(e,i,s){this._editGeometry=e,this._vertex=i,this._pos=s}apply(){const e=this._originalPosition==null;e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof b0e&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach(i=>i.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}},SYe=class{constructor(e,i){this._editGeometry=e,this._component=i,this._createdEdge=null}apply(){let e="redo";if(this._createdEdge==null){e="apply";const i=this._component.getFirstVertex(),s=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||i==null||s==null)return;this._createdEdge=new Zp(this._component,s,i)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){this._createdEdge!=null&&(hM(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}},vee=class x0e{constructor(e,i,s,n){this._editGeometry=e,this.dx=i,this.dy=s,this.dz=n,this._firstTime=!0}apply(){const e=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(e,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(e){const i=this._editGeometry.geometry;return e instanceof x0e&&e._editGeometry.geometry===i&&(this._apply("apply",e.dx,e.dy,e.dz),this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz,!0)}_apply(e,i,s,n){const r=this._editGeometry.geometry;r.offset(i,s,n);const o=this._editGeometry.components[0].getFirstVertex();if(!o)return;const l=this._editGeometry.coordinateHelper;o.pos=l.pointToVector(r.origin),this._editGeometry.notifyChanges({operation:e,updatedVertices:[o]})}},EYe=class w0e{constructor(e,i,s,n){this._helper=e,this.dx=i,this.dy=s,this.dz=n}_move(e,i,s,n){this._helper.addDelta(e.pos,i,s,n)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof w0e}accumulate(e,i){this._move(e,i.dx,i.dy,i.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}},CYe=class VF{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(e,i,s,n=0,r=jS.IMMEDIATE){this._helper=e,this._planeType=i,this._edge=s,this.distance=n,this._plane=Qa(),this._offsetPlane=Qa(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,r===jS.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){var r,o,l,c;const e=this._toXYZ(this._edge.leftVertex.pos),i=this._toXYZ((o=(r=this._edge.leftVertex.leftEdge)==null?void 0:r.leftVertex)==null?void 0:o.pos),s=this._toXYZ(this._edge.rightVertex.pos),n=this._toXYZ((c=(l=this._edge.rightVertex.rightEdge)==null?void 0:l.rightVertex)==null?void 0:c.pos);this._edgeDirection=AF(Nt(),e,s),i?(this._left=this._computeNeighbor(e,i,this._edgeDirection),this._right=this._computeNeighbor(s,n,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(s,n,this._edgeDirection),this._left=this._computeNeighbor(e,i,this._edgeDirection,this._right))}_toXYZ(e){return e!=null?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,i,s,n){const r=Nt();if(i){AF(r,e,i);const o=!this._passesBisectingAngleThreshold(r,s);return{start:e,end:i,direction:o?this._bisectVectorsPerpendicular(s,r):r,isOriginalDirection:!o}}return this._helper.hasZ()?n&&(Vr(r,s,n.direction),Vr(r,r,s),_o(r,r),Math.sign(r[1])!==Math.sign(s[0])&&Fu(r,r,-1)):Vn(r,-s[1],s[0],0),{start:e,end:i,direction:r,isOriginalDirection:!0}}_passesBisectingAngleThreshold(e,i){const s=Math.abs(xme(i,e));return s>=_ee&&s<=Math.PI-_ee}_bisectVectorsPerpendicular(e,i){const s=Es(e,i)<0?e:IF(Nt(),e),n=Math.abs(Es(s,i));if(!(n<bee||n>1-bee))return this._bisectDirection(s,i);const r=Vr(Nt(),s,[0,0,1]);return _o(r,r)}_bisectDirection(e,i){const s=Yl(Nt(),e,i);return _o(s,s)}_initializePlane(){const e=this._computeNormalDirection(this._left),i=this._computeNormalDirection(this._right);Es(e,i)<0&&IF(i,i),Cx(this._left.start,this._bisectDirection(e,i),this._plane)}_computeNormalDirection(e){const i=Vr(Nt(),e.direction,this._edgeDirection);_o(i,i);const s=Vr(Nt(),this._edgeDirection,i);return this._planeType===GF.XY&&(s[2]=0),_o(s,s)}_initializeDistanceConstraints(){this._left.end==null||this.requiresSplitEdgeLeft||this._updateDistanceConstraint(Qd(this._plane,this._left.end)),this._right.end==null||this.requiresSplitEdgeRight||this._updateDistanceConstraint(Qd(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const i=e,s=this._edgeDirection,n=Yl(Nt(),this._left.start,this._left.direction),r=Yl(Nt(),this._right.start,this._right.direction),o=this._pointInBasis2D(yr(),i,s,this._left.start),l=this._pointInBasis2D(yr(),i,s,n),c=this._pointInBasis2D(yr(),i,s,this._right.start),f=this._pointInBasis2D(yr(),i,s,r),[y]=HHe({start:l,end:o,type:qn.LINE},{start:f,end:c,type:qn.LINE});if(!y)return;const _=xo(yr(),o,l);Bpe(_,_);const x=xo(yr(),y,l),S=Bg(_,x),P=Yl(Nt(),n,Fu(Nt(),this._left.direction,-S)),A=Qd(e,P);this._updateDistanceConstraint(A)}_pointInBasis2D(e,i,s,n){return e[0]=GS(i,n),e[1]=GS(s,n),e}_offset(e,i){Number.isFinite(this._minDistance)&&(i=Math.max(this._minDistance,i)),Number.isFinite(this._maxDistance)&&(i=Math.min(this._maxDistance,i)),P9(this._offsetPlane,this._plane),this._offsetPlane[3]-=i;const s=(r,o,l)=>o!=null&&FG(this._offsetPlane,r,Yl(Nt(),r,o),l),n=Nt();(e===this._edge.leftVertex?s(this._left.start,this._left.direction,n):s(this._right.start,this._right.direction,n))&&this._helper.copy(this._helper.fromXYZ(n,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=Cme(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return Qd(this.plane,this._pointToXYZ(e))}clampedStartAndEnd(e){const i=this._helper.toXYZ(this._helper.pointToVector(e)),s=zG(this._plane,i,Nt()),n=Qd(this._plane,i),r=Hc(n,this._minDistance,this._maxDistance);return Sx(i,s,i,r/n),{start:s,end:i}}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof VF&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&wE(this._plane,e._plane)}accumulate(e,i){const s=this._plane[3]-i._plane[3]+i.distance;this._offset(e,s)}accumulateParams(e){const i=e.distance-e._plane[3];this.distance=i+this._plane[3]}clone(){const e=new VF(this._helper,this._planeType,this._edge,this.distance,jS.DEFERRED);return P9(e._plane,this._plane),P9(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=Zl(Nt(),this._edgeDirection),e}_maybeEqualsVec3(e,i){return e==null&&i==null||e!=null&&i!=null&&wE(e,i)}_cloneNeighbor({start:e,end:i,direction:s,isOriginalDirection:n}){return{start:Zl(Nt(),e),end:i!=null?Zl(Nt(),i):null,direction:Zl(Nt(),s),isOriginalDirection:n}}};const _ee=ace(15),bee=.001;var GF,jS;(function(t){t[t.XYZ=0]="XYZ",t[t.XY=1]="XY"})(GF||(GF={})),function(t){t[t.IMMEDIATE=0]="IMMEDIATE",t[t.DEFERRED=1]="DEFERRED"}(jS||(jS={}));let PYe=class S0e{constructor(e,i,s=Oc.CUMULATIVE){this.origin=e,this.angle=i,this._accumulationType=s}_rotate(e,i){Hpe(e.pos,e.pos,this.origin,i)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof S0e&&df(this.origin,e.origin)}accumulate(e,i){const s=i._accumulationType===Oc.REPLACE;this._rotate(e,s?i.angle-this.angle:i.angle)}accumulateParams(e){const i=e._accumulationType===Oc.REPLACE;this.angle=i?e.angle:this.angle+e.angle}},TYe=class E0e{constructor(e,i,s,n,r=Oc.CUMULATIVE){this.origin=e,this.axis1=i,this.factor1=s,this.factor2=n,this._accumulationType=r,this.axis2=Vc(i[1],-i[0])}_scale(e,i,s){TF(e.pos,e.pos,this.origin,this.axis1,i),TF(e.pos,e.pos,this.origin,this.axis2,s)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof E0e&&df(this.origin,e.origin)&&df(this.axis1,e.axis1)}accumulate(e,i){i._accumulationType===Oc.REPLACE?this._scale(e,i.factor1/this.factor1,i.factor2/this.factor2):this._scale(e,i.factor1,i.factor2)}accumulateParams(e){const i=e._accumulationType===Oc.REPLACE;this.factor1=i?e.factor1:this.factor1*e.factor1,this.factor2=i?e.factor2:this.factor2*e.factor2}},IYe=class C0e{constructor(e,i){this._editGeometry=e,this._newPositions=i}apply(){const e=this._originalPositions==null?"apply":"redo";if(!this._originalPositions){const i=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map(s=>i.clone(s.pos))}this._apply(e,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(e){return e instanceof C0e&&(this._newPositions=e._newPositions,this._apply("apply",this._newPositions),!0)}_apply(e,i){const s=this._editGeometry.coordinateHelper,n=this._editGeometry.allVertices;for(let r=0;r<n.length;r++)s.copy(i[r],n[r].pos);this._editGeometry.components.forEach(r=>r.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:n})}};var P0e;const MYe=Symbol();let AYe=class{constructor(e){this._operations=[],this._closed=!1,this[P0e]=!0,e&&(this._operations=e,this._closed=!0)}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const i=this._operations.length?this._operations[this._operations.length-1]:null;return i&&i.accumulate(e)||(this._operations.push(e),e.apply()),!0}};P0e=MYe;let jF=class T0e extends Sa{constructor(e,i){super(),this.data=e,this.viewingMode=i,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",s=>{s.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:s.addedVertices,operation:s.operation}),s.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:s.removedVertices,operation:s.operation}),s.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:s.updatedVertices,operation:s.operation})})}destroy(){this._listener.remove()}splitEdge(e,i){return this._apply(new xYe(this.data,e,i))}updateVertices(e,i,s=zl.ACCUMULATE_STEPS){return this._apply(new _Ye(this.data,e,i),s)}move(e,i,s,n=zl.ACCUMULATE_STEPS){return Ww(this.data)?this._apply(new vee(this.data,e,i,s),n):this.moveVertices(this.data.allVertices,e,i,s,n)}moveVertices(e,i,s,n,r=zl.ACCUMULATE_STEPS){return Ww(this.data)?this._apply(new vee(this.data,i,s,n),r):this.updateVertices(e,new EYe(this.data.coordinateHelper,i,s,n),r)}scale(e,i,s,n,r=zl.ACCUMULATE_STEPS,o=Oc.CUMULATIVE){return this.scaleVertices(this.data.allVertices,e,i,s,n,r,o)}scaleVertices(e,i,s,n,r,o=zl.ACCUMULATE_STEPS,l=Oc.CUMULATIVE){return this.updateVertices(e,new TYe(i,s,n,r,l),o)}rotate(e,i,s=zl.ACCUMULATE_STEPS,n=Oc.CUMULATIVE){return this.rotateVertices(this.data.allVertices,e,i,s,n)}rotateVertices(e,i,s,n=zl.ACCUMULATE_STEPS,r=Oc.CUMULATIVE){return this.updateVertices(e,new PYe(i,s,r),n)}removeVertices(e){return this._apply(new bYe(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return this.data.components.length===0?null:this._apply(new vYe(this.data,this.data.components[0],e))}setVertexPosition(e,i){return this._apply(new wYe(this.data,e,i))}offsetEdge(e,i,s,n=zl.ACCUMULATE_STEPS){return this.updateVertices([i.leftVertex,i.rightVertex],new CYe(this.data.coordinateHelper,e,i,s),n)}trySetGeometry(e,i=zl.ACCUMULATE_STEPS){const{data:s}=this,{coordinateHelper:n}=s;if(s.type!==e.type||!s.spatialReference.equals(e.spatialReference)||n.hasZ()!==e.hasZ||n.hasM()!==e.hasM||!eDe(s.geometry,e)||Ww(s))return;const r=Array.from(qF.fromGeometry(e,this.viewingMode).iterateVertices(),o=>o.pos);return this.setVertexPositions(r,i)}setVertexPositions(e,i=zl.ACCUMULATE_STEPS){return this._apply(new IYe(this.data,e),i)}createResetState(){if(Ww(this.data))return this._createResetStateMesh();const e=this.data.geometry.clone();return ds(()=>this.trySetGeometry(e))}closeComponent(e){return this.data.components.includes(e)?this._apply(new SYe(this.data,e)):null}canRemoveVertex(e){return e.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new AYe;return this._apply(e),ds(()=>e.close())}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,i=zl.ACCUMULATE_STEPS){return i!==zl.NEW_STEP&&this.lastOperation!=null&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}_createResetStateMesh(){if(!Ww(this.data))return ds();const e=this.data.geometry,{vertexSpace:i}=e;if(i.origin){const n=eu(i.origin);return ds(()=>{e.vertexSpace.origin=n})}const s=e.vertexAttributes.clonePositional();return ds(()=>{e.vertexAttributes=s,e.vertexAttributesChanged()})}static fromGeometry(e,i){return new T0e(qF.fromGeometry(e,i),i)}};function DYe(t,e){let i=null,s=null;return n=>{if(n.action==="cancel")return void(s!=null&&(s.execute({action:"cancel"}),i=null,s=null));const r={action:n.action,screenStart:n.start,screenEnd:n.screenPoint};n.action==="start"&&i==null&&(i=new BF,s=new BF,e(t,i,s,n.pointerType,r)),i!=null&&i.execute(r),n.action==="end"&&i!=null&&(i=null,s=null)}}function oN(t,e){return t.events.on("drag",DYe(t,e))}function Nyt(t,e){const i=[t.x,t.y,t.z??0],s=e,n=[Math.cos(s),Math.sin(s)],r=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(r===0)return null;n[0]/=r,n[1]/=r;const o=l=>{const c=(l.x-i[0])*n[0]+(l.y-i[1])*n[1];l.x=i[0]+c*n[0],l.y=i[1]+c*n[1]};return l=>(o(l.mapStart),o(l.mapEnd),{...l,axis:n})}function kYe(t){let e=null;return i=>{if(i.action==="start"&&(e=NYe(t,i.mapStart.spatialReference)),e==null)return null;const s=i.mapEnd.x-i.mapStart.x,n=i.mapEnd.y-i.mapStart.y,r=(i.mapEnd.z??0)-(i.mapStart.z??0);return e.move(s,n,r,i.action),{...i,translationX:s,translationY:n,translationZ:r}}}function xee(t,e){return t==null?null:t.spatialReference.equals(e)?t.clone():pf(t,e)}function NYe(t,e){const i=t.operations;if(!i)return null;const s=i.data.geometry,n=fYe(e);if(s.spatialReference.equals(n))return aN(t,i,()=>{});if(s.type!=="mesh"){const r=xee(s,n);if(r==null)return null;const o=s.spatialReference;return aN(t,jF.fromGeometry(r,i.viewingMode),()=>{const l=pf(s,o);i.trySetGeometry(l)})}if(rYe(s)){const r=xee(s.origin,n);if(!r)return null;const o=s.spatialReference,l=jF.fromGeometry(r,i.viewingMode);return aN(t,i,()=>{const c=pf(l.data.geometry,o),f=c.x-s.origin.x,y=c.y-s.origin.y,_=(c.z??0)-(s.origin.z??0);i.move(f,y,_)})}return null}function aN(t,e,i){let s=0,n=0,r=0;return{move:(o,l,c,f)=>{var S;f==="start"&&(s=0,n=0,r=0);const y=o-s,_=l-n,x=c-r;e.move(y,_,x),s+=y,n+=_,r+=x,i(),f==="end"&&((S=t.endInteraction)==null||S.call(t))}}}function $yt(t,e=null,i){var o;let s=null;const n=e==null||(o=t.spatialReference)!=null&&o.equals(e)?l=>l:l=>l!=null?pf(l,e):l,r={exclude:[],...i};return l=>{if(l.action==="start"&&(s=n(t.toMap(l.screenStart,r))),s==null)return null;const c=n(t.toMap(l.screenEnd,r));return c!=null?{...l,mapStart:s,mapEnd:c}:null}}function Oyt(t){const e=t.map(i=>kYe(i)).filter(gl);return i=>{const s=i.mapEnd.x-i.mapStart.x,n=i.mapEnd.y-i.mapStart.y,r=i.mapEnd.z-i.mapStart.z;return e.forEach(o=>o(i)),{...i,translationX:s,translationY:n,translationZ:r}}}function $Ye(t){var i;const e=(i=t.operations)==null?void 0:i.createResetState();return s=>(e==null||e.remove(),s)}function Ryt(t){const e=t.map(i=>$Ye(i)).filter(i=>i!=null);return i=>(e.forEach(s=>s(i)),i)}function Lyt(){let t=0,e=0,i=0;return s=>{s.action==="start"&&(t=s.mapStart.x,e=s.mapStart.y,i=s.mapStart.z);const n=s.mapEnd.x-t,r=s.mapEnd.y-e,o=s.mapEnd.z-i;return t=s.mapEnd.x,e=s.mapEnd.y,i=s.mapEnd.z,{...s,mapDeltaX:n,mapDeltaY:r,mapDeltaZ:o,mapDeltaSpatialReference:s.mapStart.spatialReference}}}function Fyt(){let t=0,e=0;return i=>{i.action==="start"&&(t=i.screenStart.x,e=i.screenStart.y);const s=i.screenEnd.x-t,n=i.screenEnd.y-e;return t=i.screenEnd.x,e=i.screenEnd.y,{...i,screenDeltaX:s,screenDeltaY:n}}}function zyt(t,e){let i=null,s=0,n=0;return r=>{var f;if(r.action==="start"&&(i=(f=t.toScreen)==null?void 0:f.call(t,e),i!=null&&(i.x<0||i.x>t.width||i.y<0||i.y>t.height?i=null:(s=r.screenStart.x-i.x,n=r.screenStart.y-i.y))),i==null)return null;const o=Hc(r.screenEnd.x-s,0,t.width),l=Hc(r.screenEnd.y-n,0,t.height),c=Up(o,l);return r.screenStart=i,r.screenEnd=c,r}}const OYe=()=>{};let BF=class I0e{constructor(){this.execute=OYe}next(e,i=new I0e){return e!=null&&(this.execute=s=>{const n=e(s);n!=null&&i.execute(n)}),i}};function RYe(t,e,i=[]){if(t.type==="2d")return n=>n;let s=null;return n=>{n.action==="start"&&(s=t.toMap(n.screenStart,{exclude:i}),s!=null&&(s.z=c6(s,t,e)));const r=t.toMap(n.screenEnd,{exclude:i});r!=null&&(r.z=c6(r,t,e));const o=s!=null&&r!=null?{sceneStart:s,sceneEnd:r}:null;return{...n,scenePoints:o}}}function wee(t,e,i){const s=e.elevationProvider.getElevation(t.x,t.y,t.z??0,t.spatialReference,"scene")??0,n=FA(t);return n.z=s,n.hasZ=!0,n.z=c6(n,e,i),n}function qyt(t,e){if(t.type==="2d")return s=>s;let i=null;return s=>{s.action==="start"&&(i=wee(s.mapStart,t,e));const n=wee(s.mapEnd,t,e),r=i!=null&&n!=null?{sceneStart:i,sceneEnd:n}:null;return{...s,scenePoints:r}}}function Vyt(t,e,i,s,n,r){let o="geodesic",l=u6(i);const c=wo();return Q0(t,e,s,c),c[2]=0,l&&Cg(c,i,c,l)||(o="euclidean",l=i),{mode:o,view:e,elevationInfo:s,hasZ:n,directionMode:r,spatialReference:t.spatialReference,measurementSR:l,origin:c}}function LYe(t,e,i){if(e==null||t==null)return;const s=R9e(i.measurementSR);if(s==null)return;const n=qA(t,i);if(n==null)return;const r=yA(e,s);return new YG(n,r)}function FYe(t,e,i,s){if(i==null||t==null)return;const n=qA(t,s);if(n==null)return;const r=yf(i),o=10,l=f=>{if(f==null)return;const y=wo(),_=gf(f,"degrees","geographic");return zje(y,n,s.measurementSR,o,_,s.mode)?new rUe(n,y):void 0},c=()=>{if(e!=null&&t!=null)return yf(DG(e,t))};switch(s.directionMode){case io.Absolute:return l(r);case io.Relative:{const f=c();return f==null?void 0:l(f+r)}case io.RelativeBilateral:{const f=c();return f==null?void 0:QC([l(f+r),l(f-r)])}}}function M0e(t,e){const i=VA(t,e);return i!=null?new Zme(i):void 0}function A0e(t,e,i){const{context:s,longitude:n,latitude:r,direction:o,distance:l,elevation:c}=i;if(n!=null||r!=null||l!=null||c!=null||o!=null){if(n!=null||r!=null){const f=yf(n),y=yf(r),_=VA(c,s);return new KG(f,y,_)}return zYe(t,e,i)}}function zYe(t,e,{context:i,direction:s,distance:n,elevation:r}){if(e==null)return M0e(r,i);const{view:o,elevationInfo:l,measurementSR:c}=i,f=Q0(e,o,l);if(!c||!Cg(f,e.spatialReference,See,c))return;const[y,_]=See,x=n!=null?yA(n,"meters"):void 0,S=yf(s),P=VA(r,i),A=$=>{const F=new Qme([y,_],c,x,P,$);return x==null||$==null||P==null&&i.hasZ?F:new Lv(F.closestTo(f))};if(S==null)return A(void 0);const k=()=>{if(t!=null&&e!=null)return yf(DG(t,e))};switch(i.directionMode){case io.Absolute:return A(S);case io.Relative:{const $=k();return $==null?void 0:A($+S)}case io.RelativeBilateral:{const $=k();return $==null?void 0:QC([A($+S),A($-S)])}}}function qYe(t){return t.context.mode==="geodesic"?A0e(null,null,t):D0e(t)}function VYe(t,e,i){const{context:s,x:n,y:r,distance:o,direction:l,elevation:c}=i;return s.mode==="geodesic"?A0e(e,t,i):n!=null||r!=null?D0e(i):GYe([LYe(t,o,s),FYe(t,e,l,s),M0e(c,s)])}function D0e({x:t,y:e,elevation:i,context:s}){$4.x=(t==null?void 0:t.value)??0,$4.y=(e==null?void 0:e.value)??0,$4.spatialReference=s.spatialReference;const n=qA($4,s,HYe);return new KG(t!=null&&n!=null?n[0]:void 0,e!=null&&n!=null?n[1]:void 0,VA(i,s))}function GYe(t){let e;for(const i of t)i&&(e=(e==null?void 0:e.intersect(i))??i);return e}function qA(t,e,i=wo()){const{view:s,elevationInfo:n,measurementSR:r,origin:o,mode:l}=e;if(Q0(t,s,n,i),Cg(i,t.spatialReference,i,r))return l!=="geodesic"&&kr(i,i,o),i}function jYe(t,e,i,s){const{view:n,measurementSR:r,spatialReference:o,origin:l,mode:c}=i;if(c==="geodesic"?Zl(Zw,t):Yl(Zw,t,l),Cg(Zw,r,Zw,o))return NF(Zw,n,e,i,s)}function VA(t,e){var i;return((i=BYe(t,e))==null?void 0:i.value)??void 0}function BYe(t,{view:e,origin:i,elevationInfo:s,hasZ:n,measurementSR:r}){if(t==null||!n)return;const o=Uae(r);if(o==null)return;const[l,c]=i,f=yA(t,o),y=(e==null?void 0:e.type)==="3d"?CA(e,l,c,f,r,s):f;return y!=null?Fpe(y,o):void 0}const See=wo(),HYe=wo(),Zw=wo(),$4=Pf(0,0,0,qi.WGS84);let HF=class{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ,this.drawConstraints=e.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}};const k0e=Symbol("Yield");let UYe=class{constructor(){this._tasks=new Array,this._runningTasks=h6(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return k0e;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,s){return++this._runningTasks.value,new Promise((n,r)=>this._tasks.push(new Eee(n,r,e,i,s))).finally(()=>--this._runningTasks.value)}unshift(e,i,s){return++this._runningTasks.value,new Promise((n,r)=>this._tasks.unshift(new Eee(n,r,e,i,s))).finally(()=>--this._runningTasks.value)}_process(e){var s;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const n=$u(i.signal);if(n&&!i.abortCallback)i.reject(or());else{const r=n?(s=i.abortCallback)==null?void 0:s.call(i,or()):i.callback(e);Cv(r)?r.then(i.resolve,i.reject):i.resolve(r)}}catch(n){i.reject(n)}return!0}cancelAll(){const e=or();for(const i of this._tasks)if(i.abortCallback){const s=i.abortCallback(e);i.resolve(s)}else i.reject(e);this._tasks.length=0}},Eee=class{constructor(e,i,s,n=void 0,r=void 0){this.resolve=e,this.reject=i,this.callback=s,this.signal=n,this.abortCallback=r}},sS=class extends Ei{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};I([N()],sS.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),I([N()],sS.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),sS=I([De("esri.views.support.debugFlags")],sS);const YYe=new sS;var _u;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(_u||(_u={}));function Uyt(){return new b6.Scheduler}var Oi;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(Oi||(Oi={}));const xc=0,Cee=new Map([[Oi.RESOURCE_CONTROLLER_IMMEDIATE,xc],[Oi.RESOURCE_CONTROLLER,4],[Oi.SLIDE,xc],[Oi.STREAM_DATA_LOADER,xc],[Oi.ELEVATION_QUERY,xc],[Oi.TERRAIN_SURFACE,1],[Oi.SURFACE_GEOMETRY_UPDATES,1],[Oi.LOD_RENDERER,2],[Oi.GRAPHICS_CORE,2],[Oi.I3S_CONTROLLER,2],[Oi.POINT_CLOUD_LAYER,2],[Oi.FEATURE_TILE_FETCHER,2],[Oi.CLOUDS_GENERATOR,2],[Oi.OVERLAY,4],[Oi.STAGE,4],[Oi.GRAPHICS_DECONFLICTOR,4],[Oi.FILTER_VISIBILITY,4],[Oi.SCALE_VISIBILITY,4],[Oi.FRUSTUM_VISIBILITY,4],[Oi.POINT_OF_INTEREST_FREQUENT,6],[Oi.POINT_OF_INTEREST_INFREQUENT,30],[Oi.LABELER,8],[Oi.FEATURE_QUERY_ENGINE,8],[Oi.FEATURE_TILE_TREE,16],[Oi.FEATURE_TILE_TREE_ACTIVE,xc],[Oi.ELEVATION_ALIGNMENT,12],[Oi.ELEVATION_ALIGNMENT_SCENE,14],[Oi.TEXT_TEXTURE_ATLAS,12],[Oi.TEXTURE_UNLOAD,12],[Oi.LINE_OF_SIGHT_TOOL,16],[Oi.LINE_OF_SIGHT_TOOL_INTERACTIVE,xc],[Oi.SNAPPING,xc],[Oi.SHADOW_ACCUMULATOR,30],[Oi.MAPVIEW_FETCH_QUEUE,xc],[Oi.MAPVIEW_LAYERVIEW_UPDATE,2],[Oi.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,xc]]);function Pee(t){return Cee.has(t)?Cee.get(t):typeof t=="number"?t:1}const XYe=6.5,Tee=1,WYe=30,ZYe=1e3/30,KYe=100,Iee=.9;var b6,P1;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(r=>r.needsUpdate)}constructor(){this._updating=h6(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new yS("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new s,this._state=_u.INTERACTING,this._tasks=new $y,this._runQueue=new $y,this._load=0,this._idleStateCallbacks=new $y,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=xi(()=>YYe.SCHEDULER_LOG_SLOW_TASKS,r=>this._debug=r,Ul);for(const r of Object.keys(Oi))this.performanceInfo.tasks.set(Oi[r],new yS(Oi[r]))}destroy(){this._tasks.toArray().forEach(r=>r.remove()),this._tasks.clear(),bo(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(r){this._updatingChanged(),r&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(r,o){const l=new i(this,r,o);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(r)||this.performanceInfo.tasks.set(r,new yS(r)),l}registerIdleStateCallbacks(r,o){const l={idleBegin:r,idleEnd:o};this._idleStateCallbacks.push(l),this.state===_u.IDLE&&this._idleUpdatesStartFired&&l.idleBegin();const c=this;return{remove:()=>this._removeIdleStateCallbacks(l),set idleBegin(f){c._idleUpdatesStartFired&&(l.idleEnd(),c._state===_u.IDLE&&f()),l.idleBegin=f},set idleEnd(f){l.idleEnd=f}}}get load(){return this._load}set state(r){this._state!==r&&(this._state=r,this.state!==_u.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(r){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=XYe,l=r.frameDuration,c=Tee;switch(this.state){case _u.IDLE:o=0,l=Math.max(KYe,r.frameDuration),c=WYe;break;case _u.INTERACTING:l=Math.max(ZYe,r.frameDuration);case _u.ANIMATING:}return l=l-r.elapsedFrameTime-o,this.state!==_u.IDLE&&l<Tee&&!this._forceTask?(this._forceTask=!0,!1):(l=Math.max(l,c),this._budget.reset(l,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case _u.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(r=>r.idleBegin())),this._runIdle();break;case _u.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(r){this._idleUpdatesStartFired&&r.idleEnd(),this._idleStateCallbacks.removeUnordered(r)}removeTask(r){this._tasks.removeUnordered(r),this._runQueue.removeUnordered(r),this._updatingChanged()}_updateTask(r){this._tasks.forAll(o=>{o.name===r&&o.setPriority(r)})}_getState(r){if(this._runQueue.some(l=>l.name===r))return P1.SCHEDULED;let o=P1.IDLE;return this._tasks.forAll(l=>{l.name===r&&l.needsUpdate&&(l.schedulePriority<=1?o=P1.READY:o!==P1.READY&&(o=P1.WAITING))}),o}_getRuntime(r){let o=0;return this._tasks.forAll(l=>{l.name===r&&(o+=l.runtime)}),o}_resetRuntimes(){this._tasks.forAll(r=>r.runtime=0)}_getRunning(){const r=new Map;if(this._tasks.forAll(l=>{l.needsUpdate&&r.set(l.name,(r.get(l.name)||0)+1)}),r.size===0)return null;let o="";return r.forEach((l,c)=>{o+=l>1?` ${l}x ${c}`:` ${c}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const r=this._tasks.reduce((o,l)=>l.needsUpdate?++o:o,0);this._load=this._load*Iee+r*(1-Iee)}_schedule(){for(this._runQueue.filterInPlace(r=>!!r.needsUpdate||(r.schedulePriority=r.basePriority,!1)),this._tasks.forAll(r=>{r.basePriority===xc&&r.needsUpdate&&!this._runQueue.includes(r)&&r.blockFrame!==this._frameNumber&&this._runQueue.unshift(r)});this._runQueue.length===0;){let r=!1,o=0;if(this._tasks.forAll(l=>{l.needsUpdate&&l.schedulePriority!==0&&l.basePriority!==xc&&l.blockFrame!==this._frameNumber&&(r=!0,o=Math.max(o,l.basePriority),l.schedulePriority===1?(l.schedulePriority=0,this._runQueue.push(l)):--l.schedulePriority)}),!r)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const r=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),l=this._runQueue.pop();this._budget.resetProgress();try{l.task.runTask(this._budget)===k0e&&(l.blockFrame=this._frameNumber)}catch(f){zt.getLogger("esri.views.support.Scheduler").error(`Exception in task "${l.name}"`,f),l.blockFrame=this._frameNumber}!this._budget.hasProgressed&&l.blockFrame!==this._frameNumber&&l.needsUpdate&&(l.name,Oi.I3S_CONTROLLER,l.blockFrame=this._frameNumber),l.schedulePriority=l.basePriority;const c=this._budget.now()-o;if(l.runtime+=c,this._frameTaskTimes.set(l.priority,this._frameTaskTimes.get(l.priority)+c),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-r)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-r)}_startFrameTaskTimes(){for(const r of Object.keys(Oi))this._frameTaskTimes.set(Oi[r],0)}_recordFrameTaskTimes(r){this._frameTaskTimes.forEach((o,l)=>this.performanceInfo.tasks.get(l).push(o)),this.performanceInfo.total.push(r)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(r,o,l){this._scheduler=r,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new UYe,this._handles=new fM,this._basePriority=Pee(o),this.schedulePriority=this._basePriority,this._task=h6(l??this._queue),this._handles.add(vg(()=>this.task.running,c=>r.taskRunningChanged(c)))}remove(){this.processQueue(N0e),this._scheduler.removeTask(this),this.schedule=x6.schedule,this.reschedule=x6.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(r){if(this.name===r)return;this.name=r;const o=Pee(r);this._basePriority!==xc&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(r){this.setPriority(r)}get needsUpdate(){return this.updating||this.task.running}schedule(r,o,l){return this._queue.push(r,o,l)}reschedule(r,o,l){return this._queue.unshift(r,o,l)}processQueue(r){return this._queue.runTask(r)}}class s{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=_u.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(r){return!this.done&&(r()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(r){this._enabled=r}reset(r,o){this._begin=this.now(),this._budget=r,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=s})(b6||(b6={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(P1||(P1={}));const N0e=(()=>{const t=new b6.Budget;return t.enabled=!1,t})();let JYe=class{remove(){}processQueue(){}schedule(e,i,s){try{if($u(i)){const n=or();return s?Promise.resolve(s(n)):Promise.reject(n)}return E$(e(N0e))}catch(n){return Promise.reject(n)}}reschedule(e,i,s){return this.schedule(e,i,s)}};const x6=new JYe;function QYe({predicate:t=()=>!0,snappingManager:e,snappingContext:i,updatingHandles:s,useZ:n=!0}){const r=new BF;if(e==null)return{snappingStep:[Mee,r],cancelSnapping:Mee};let o,l=null,c=null,f=null;const y=()=>{l=og(l),e.doneSnapping(),c==null||c.frameTask.remove(),c=null,o=bo(o),f=null},_=eXe(e,n,r);let x=null,S=null,P=null;return{snappingStep:[A=>{if(!t(A))return A;const{action:k}=A;if(k==="start"){const{info:$}=A,F=tXe(e.view);if(c=iXe(i,A,F),c.context.selfSnappingZ=null,!n&&$!=null){const G=nXe(i.coordinateHelper,$.handle.component);G!=null&&(c.context.selfSnappingZ={value:G,elevationInfo:i.elevationInfo??Pg})}}if(c!=null){const{context:$,originalScenePos:F,originalPos:G}=c,{mapEnd:V,mapStart:B,scenePoints:W}=A,J=$0e(G,UF(V,B)),re=UF(B,G),se={...A,action:"update"},oe=c.context,pe=sXe(F,W),ue=e.update({point:J,scenePoint:pe,context:$});if(P=ue,O0e(V,ue,re,n),x=J,S=pe,k!=="end"){const{frameTask:ce}=c;l==null&&(l=new AbortController),f=ne=>{s.addPromise(Kh(_({frameTask:ce,event:se,context:oe,point:J,scenePoint:pe,delta:re,getLastState:()=>({point:x,scenePoint:S,updatePoint:ne.forceUpdate?null:P})},l.signal)))},f({forceUpdate:!1}),o==null&&(o=xi(()=>e.options.effectiveEnabled,()=>f==null?void 0:f({forceUpdate:!0})))}}return k==="end"&&y(),A},r],cancelSnapping:A=>(y(),A)}}function eXe(t,e,i){return Pv(async({frameTask:s,point:n,scenePoint:r,context:o,event:l,delta:c,getLastState:f},y)=>{const _=await s.schedule(()=>t.snap({point:n,scenePoint:r,context:o,signal:y}),y);if(_.valid){let x=await s.schedule(()=>_.apply(),y);const S=f();S.point!=null&&n!==S.point&&(x=t.update({point:S.point,scenePoint:S.scenePoint,context:o})),S.updatePoint!=null&&D9(x,S.updatePoint)||(O0e(l.mapEnd,x,c,e),i.execute(l))}})}function tXe(t){return t.type==="3d"?t.resourceController.scheduler.registerTask(Oi.SNAPPING):x6}function iXe(t,e,i){return{context:new HF({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:e.info!=null?e.info.handle:null,excludeFeature:t.excludeFeature,feature:t.feature,visualizer:t.visualizer}),originalPos:e.snapOrigin!=null?t.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:e.scenePoints!=null?e.scenePoints.sceneStart:null,frameTask:i}}function $0e(t,[e,i,s]){const n=FA(t);return n.x+=e,n.y+=i,n.hasZ&&(n.z+=s),n}function sXe(t,e){return t==null||e==null?null:$0e(t,UF(e.sceneEnd,e.sceneStart))}function UF(t,e){const i=t.hasZ&&e.hasZ?t.z-e.z:0;return[t.x-e.x,t.y-e.y,i]}function O0e(t,e,[i,s,n],r){t.x=e.x+i,t.y=e.y+s,r&&t.hasZ&&e.hasZ&&(t.z=e.z+n)}function nXe(t,e){if(!t.hasZ())return null;const i=e.vertices;let s=null;for(const n of i){const r=t.getZ(n.pos);if(s!=null&&r!=null&&Math.abs(r-s)>1e-6)return null;s==null&&(s=r)}return s}function Mee(t){return t}let uy=class extends Ei{constructor(e){super(e),this.constrainResult=i=>i,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=Pv(async(i,s,n,r)=>{const o=this._frameTask;if(o==null)return;const l=await o.schedule(()=>s.snap({...i,context:n,signal:r}),r);l.valid&&await o.schedule(()=>{this.stagedPoint=l.apply(),i!==this._snapPoints&&this._snapPoints!=null&&(this.stagedPoint=s.update({...this._snapPoints,context:n}))},r)})}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){var i,s;const e=this.view.type==="3d"?(s=(i=this.view)==null?void 0:i.resourceController)==null?void 0:s.scheduler:null;this._frameTask=e!=null?e.registerTask(Oi.SNAPPING):x6}destroy(){this._abortController=og(this._abortController),this._frameTask=bo(this._frameTask)}update(e,i,s){this._snapPoints=e;const{point:n,scenePoint:r}=e,o=i.update({point:n,scenePoint:r,context:s});return this.stagedPoint=o,o}async snap(e,i,s){const{point:n,scenePoint:r}=e;return this.stagedPoint=i.update({point:n,scenePoint:r,context:s}),this._snapPoints=e,this._abortController==null&&(this._abortController=new AbortController),this._snap(e,i,s,this._abortController.signal)}async snapAgainNearPreviousMapPoint(e,i){this._snapPoints!=null&&await this.snap(this._snapPoints,e,i)}abort(){this._abortController=og(this._abortController),this._snapPoints=null}};I([N({constructOnly:!0})],uy.prototype,"view",void 0),I([N()],uy.prototype,"stagedPoint",null),I([N()],uy.prototype,"constrainResult",void 0),I([N()],uy.prototype,"_stagedPoint",void 0),uy=I([De("esri.views.interactive.snapping.SnappingOperation")],uy);const rXe="crosshair",oXe="progress",Aee=Symbol(),Dee=Symbol();let os=class extends Sa.EventedMixin(Ei){constructor(e){super(e),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new QUe,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new A9,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=dee(qYe),this._getPolylineOrPolygonConstraint=dee(VYe),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new WC,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,e.elevationInfo==null&&(this.elevationInfo=hme(!!e.hasZ))}initialize(){const{geometryType:e,view:i}=this,s=i.spatialReference,n="viewingMode"in i.state?i.state.viewingMode:EE.Local,r=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=m0e(this.hasZ,this.hasM,s),this._editGeometryOperations=new jF(new qF(r,this.coordinateHelper),n),this._snappingOperation=new uy({view:i}),this.addHandles([xi(()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint}),({stagedPoint:c,constraint:f},y)=>{const{snappingOptions:_}=this;if(_&&(_.forceDisabled=f!=null&&bc(f)),y!=null&&c===y.stagedPoint&&f!==y.constraint)return this._onKeyboardBasedChange();this._processCursor(c??this._screenToMap(this._stagedScreenPoint))},{equals:(c,f)=>c.stagedPoint===f.stagedPoint&&_oe(c.constraint,f.constraint)}),xi(()=>this.view.viewpoint,(c,f)=>{c&&f&&Hfe(c,f)&&this._onKeyboardBasedChange()})]),this._activeComponent=new zA(s,n),this._editGeometryOperations.data.components.push(this._activeComponent);const o=this.segmentLabels;o!=null&&(o.context={view:i,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles(xi(()=>this.labelOptions.enabled,c=>{o.visible=c},Jl))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],c=>{var P,A,k,$;const f=c.vertices.map(F=>({componentIndex:0,vertexIndex:F.index,coordinates:this.coordinateHelper.vectorToArray(F.pos)})),y=f.map(F=>F.coordinates),_=this.coordinateHelper.vectorToDehydratedPoint((P=this._activeComponent.getFirstVertex())==null?void 0:P.pos)??null;D9(_,this.firstVertex)||(this.firstVertex=_);const x=this.coordinateHelper.vectorToDehydratedPoint((A=this._activeComponent.getLastVertex())==null?void 0:A.pos)??null;D9(x,this.lastVertex)||(this.lastVertex=x);const S=this.coordinateHelper.vectorToDehydratedPoint(($=(k=this._activeComponent.edges.at(-1))==null?void 0:k.leftVertex)==null?void 0:$.pos)??null;switch(D9(S,this.secondToLastVertex)||(this.secondToLastVertex=S),this._processCursor(this.cursorVertex),c.type){case"vertex-add":this.emit(c.type,{...c,added:y,vertices:f});break;case"vertex-update":this.emit(c.type,{...c,updated:y,vertices:f});break;case"vertex-remove":this.emit(c.type,{...c,removed:y,vertices:f})}}));const l=this._manipulator=new eYe({consumesClicks:!1,grabbableForEvent:c=>this.drawingMode!=="click"||c.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1});this.manipulators.add(l),l.grabbable=e!=="point",this.addHandles([l.events.on("immediate-click",c=>this._onImmediateClick(c)),l.events.on("immediate-double-click",c=>this._onImmediateDoubleClick(c)),xi(()=>this.drawingMode,()=>{this.removeHandles(Aee),this.addHandles(this._createManipulatorDragPipeline(l),Aee)},Jl),xi(()=>({effectiveCursor:this.effectiveCursor}),({effectiveCursor:c})=>{l.cursor=c},Jl)]),bme(this,()=>{const c=this.view.inputManager.latestPointerType??"mouse",f=this._getSnappingContext(c);if(this.snappingManager!=null){const y=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,f);this._updatingHandles.addPromise(Kh(y))}})}destroy(){so(this.segmentLabels),so(this._snappingOperation),this._editGeometryOperations=so(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:e,_manipulator:i}=this;return e!=null&&this._pointerDownStates.has(e)||i.grabbing||!i.interactive}get _snappingEnabled(){return this.snappingManager!=null&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._updateAndGetEffectiveDrawSurface();return this.view.type==="3d"&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}get _constraint(){const{constraints:e,constraintsEnabled:i}=this;if(e&&i)switch(this.geometryType){case"point":return this._getPointConstraint(e);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,e)}}set drawingMode(e){this._set("drawingMode",e??p0e)}get effectiveCursor(){return this.loading?oXe:this._hideDefaultCursor?null:this.cursor||rXe}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return this.snappingManager!=null?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return this._stagedPointerType==="mouse"?this.cursorVertex:null}get committableVertex(){const{cursorVertex:e,lastVertex:i,firstVertex:s,geometryType:n}=this;return n==="polygon"&&rN(e,s)||rN(e,i)?null:e}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:e,committableVertex:i,coordinateHelper:s}=this,n=e.slice();return i!=null&&n.push(s.pointToArray(i)),n}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:e}=this;e!=null&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}complete(e){var o;const i=(e==null?void 0:e.aborted)||!1;this._snappingOperation.abort(),(o=this.snappingManager)==null||o.doneSnapping();const{geometryType:s,numCommittedVertices:n}=this,r=s==="multipoint"&&n===0||s==="polyline"&&n<2||s==="polygon"&&n<3;s!=="segment"&&s!=="point"||this.commitStagedVertex(),this._createOperationCompleted=!r,(this.isCompleted||i)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map((l,c)=>({componentIndex:0,vertexIndex:c,coordinates:l})),aborted:i,type:"complete"}))}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){this.snappingManager!=null&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(e){var l,c;const i=Ue(this.cursorVertex),s=Ue(e),n=s&&(((l=this._updateAndGetEffectiveDrawSurface())==null?void 0:l.constrainZ(s))??s),r=this._snapToClosingVertex(n),o=this._applyConstraints(r);rN(i,o)||(this._set("cursorVertex",o),(c=this.segmentLabels)==null||c.set("stagedVertex",o!=null?this.coordinateHelper.pointToVector(o):null),o==null||this._stagedPointerType!=="mouse"?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(o)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(e){if(e==null||this._isDragging||this.geometryType!=="polygon"||this.numCommittedVertices<=2)return e;const i=this._mapToScreen(e);if(!i)return e;const s=this._activeComponent;return this._vertexWithinPointerDistance(s.vertices[0].pos,i)?this.firstVertex:this._vertexWithinPointerDistance(s.vertices.at(-1).pos,i)?this.lastVertex:e}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return oN(e,(i,s,n,r)=>{const o=r==="touch"&&this._snappingEnabled;if(this.isCompleted||!o)return;const{snappingStep:l,cancelSnapping:c}=QYe({predicate:()=>o,snappingManager:this.snappingManager,snappingContext:new HF({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:r,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});n=n.next(f=>(o&&this.snappingManager!=null&&this.snappingManager.doneSnapping(),f)).next(c),s.next(this._screenToMapDragEventStep()).next(f=>(f.action==="start"&&(this._processCursor(f.mapStart),(this.geometryType==="segment"||o&&!this.numCommittedVertices)&&this.commitStagedVertex()),f)).next(RYe(this.view,this.elevationInfo)).next(...l).next(f=>(o&&(this._processCursor(f.mapEnd),f.action==="end"&&this.commitStagedVertex()),f)).next(f=>(f.action==="end"&&(this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),f))})}_createManipulatorDragPipelineFreehand(e){return oN(e,(i,s)=>{this.isCompleted||s.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(this._snappingOperation.abort(),this.committableVertex==null&&this._processCursor(n.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this._processCursor(n.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return n})})}_createManipulatorDragPipelineHybrid(e){return oN(e,(i,s)=>{this.isCompleted||s.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),Dee),this._processCursor(n.mapStart),this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this._processCursor(n.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.removeHandles(Dee),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return n})})}get _drawAtFixedElevation(){const{constraintsEnabled:e,constraintZ:i,geometryType:s,numCommittedVertices:n}=this;return e?i!=null||s==="segment"&&n>0:(s==="segment"||s==="polygon")&&n>0}_updateAndGetEffectiveDrawSurface(){var f;const{constraintsEnabled:e,coordinateHelper:i,drawSurface:s,elevationDrawSurface:n,snapToSceneEnabled:r}=this;if(n==null)return s;if(!this.hasZ)return n.defaultZ=null,n;const o=(f=this.elevationInfo)==null?void 0:f.mode;let l=this.defaultZ,c=e||o==="absolute-height";return r!=null&&(c=r),o==="on-the-ground"&&(c=!1),this._drawAtFixedElevation&&(l=(e?this.constraintZ:null)??i.getZ(this._activeComponent.vertices[0].pos),c=!1),c?s:(n.defaultZ=l,n)}_mapToScreen(e){var i;return(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&this._processCursor(e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(!(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging))try{const{drawingMode:i,geometryType:s}=this;this._stagedPointerType=e.pointerType,this._stagedScreenPoint=e.screenPoint;const n=this._screenToMap(e.screenPoint);if(n==null||n==null||i==="freehand"&&s!=="point")return;if(this._snappingEnabled&&this.cursorVertex!=null||this._processCursor(n),this.committableVertex==null)return void this.complete();this.commitStagedVertex(),e.pointerType!=="mouse"&&this._processCursor(null),(i==="freehand"||s==="point"||s==="segment"&&this.numCommittedVertices===2||s==="segment"&&i==="hybrid"&&this.numCommittedVertices===1)&&this.complete()}finally{e.stopPropagation()}}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const i=Up(e.x,e.y);this._stagedScreenPoint=i,this._stagedPointerType=e.pointerType,this._stagedPointerId=e.pointerId,this._isDragging?this._snappingOperation.abort():(e.stopPropagation(),this._processCursorMovementRelativeToSurface(i,e.pointerType))}_onKeyboardBasedChange(){this._stagedPointerType==="mouse"&&this._stagedScreenPoint&&this._stagedPointerId!=null&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(e,i){var c;const s=this._snappingOperation,n=this._screenToMap(e),r=this._requiresScenePoint?(c=this.drawSurface)==null?void 0:c.screenToMap(e):null;if(n==null)return this._hideDefaultCursor=!0,this._processCursor(null),void s.abort();this._hideDefaultCursor=!1;const o=this.snappingManager;if(o==null)return this._processCursor(n),void s.abort();const l=this._getSnappingContext(i);this._updatingHandles.addPromise(Kh(s.snap({point:n,scenePoint:r},o,l)))}_applyConstraints(e){const{_constraint:i,constraints:s}=this;if(!e||!s||!i)return e;const{context:n}=s,r=qA(e,n),o=r?i.closestTo(r):void 0;if(!o)return e;const l=jYe(o,e,n),c=this.view.type==="2d"||n.elevationInfo.mode!=="absolute-height";return l!=null&&c&&this.constraintZ!=null&&this.hasZ&&(l.z=this.constraintZ),l}_screenToMap(e){var i;return e?(i=this._updateAndGetEffectiveDrawSurface())==null?void 0:i.screenToMap(e):null}_screenToMapDragEventStep(){let e=null;return i=>{if(i.action==="start"&&(e=this._screenToMap(i.screenStart)),e==null)return null;const s=this._screenToMap(i.screenEnd);return s!=null?{...i,mapStart:e,mapEnd:s}:null}}_vertexWithinPointerDistance(e,i){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return n!=null&&aXe(n,i,25)}_getSnappingContext(e){var s;const i=this._drawAtFixedElevation?(s=this.elevationDrawSurface)==null?void 0:s.defaultZ:null;return new HF({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:i!=null?{value:i,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};function aXe(t,e,i){const s=t.x-e.x,n=t.y-e.y;return s*s+n*n<=i}I([N()],os.prototype,"_hideDefaultCursor",void 0),I([N()],os.prototype,"_stagedPointerId",void 0),I([N()],os.prototype,"_isDragging",null),I([N()],os.prototype,"_snappingOperation",void 0),I([N()],os.prototype,"_snappingEnabled",null),I([N({constructOnly:!0})],os.prototype,"graphic",void 0),I([N()],os.prototype,"constraintsEnabled",void 0),I([N()],os.prototype,"constraints",void 0),I([N()],os.prototype,"_constraint",null),I([N()],os.prototype,"constraintZ",void 0),I([N()],os.prototype,"defaultZ",void 0),I([N()],os.prototype,"isDraped",void 0),I([N({value:p0e})],os.prototype,"drawingMode",null),I([N({constructOnly:!0})],os.prototype,"elevationDrawSurface",void 0),I([N({constructOnly:!0})],os.prototype,"elevationInfo",void 0),I([N({constructOnly:!0,type:WC})],os.prototype,"labelOptions",void 0),I([N({constructOnly:!0})],os.prototype,"geometryType",void 0),I([N({constructOnly:!0})],os.prototype,"hasM",void 0),I([N({constructOnly:!0})],os.prototype,"hasZ",void 0),I([N()],os.prototype,"cursor",void 0),I([N()],os.prototype,"effectiveCursor",null),I([N()],os.prototype,"loading",void 0),I([N({constructOnly:!0})],os.prototype,"manipulators",void 0),I([N({constructOnly:!0})],os.prototype,"drawSurface",void 0),I([N({constructOnly:!0})],os.prototype,"segmentLabels",void 0),I([N({constructOnly:!0})],os.prototype,"snappingManager",void 0),I([N({constructOnly:!0})],os.prototype,"snappingVisualizer",void 0),I([N()],os.prototype,"snapToSceneEnabled",void 0),I([N({readOnly:!0})],os.prototype,"cursorVertex",null),I([N({readOnly:!0})],os.prototype,"visualizationCursorVertex",null),I([N()],os.prototype,"committableVertex",null),I([N()],os.prototype,"firstVertex",void 0),I([N()],os.prototype,"lastVertex",void 0),I([N()],os.prototype,"secondToLastVertex",void 0),I([N()],os.prototype,"updating",null),I([N({constructOnly:!0})],os.prototype,"view",void 0),os=I([De("esri.views.draw.DrawOperation")],os);let Zyt=class{constructor(e,i,s,n=null){this._elevationInfo=e,this.defaultZ=i,this._view=s,this._excludeGraphics=n}screenToMap(e){const{defaultZ:i,_view:s}=this,n=s.sceneIntersectionHelper.intersectElevationFromScreen(Rce(e.x,e.y),this._elevationInfo,i??0,this._excludeGraphics);return i==null&&n!=null&&(n.z=void 0),n}mapToScreen(e){const i=Pf(e.x,e.y,NG(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(i)}constrainZ(e){const{defaultZ:i}=this;return i!=null&&e.z!==i&&((e=FA(e)).z=i),e}},Jyt=class{constructor(e,i,s=[]){this.view=e,this.elevationInfo=i,this.exclude=s}screenToMap(e){const i=this.view.toMap(e,{exclude:this.exclude,excludeLabels:!0});return i!=null&&(i.z=c6(i,this.view,this.elevationInfo)),i}mapToScreen(e){let i=e;return this.elevationInfo!=null&&(i=Pf(e.x,e.y,NG(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(i)}constrainZ(e){return e}},evt=class{constructor(e,i=!1,s=0){this.view=e,this.hasZ=i,this.defaultZ=s,this.mapToScreen=n=>e.toScreen(n),this.screenToMap=i?n=>{const r=e.toMap(n);return r.z=s,r}:n=>e.toMap(n)}constrainZ(e){const{defaultZ:i}=this;return this.hasZ&&e.z!==i&&((e=FA(e)).z=i),e}},YF=class R0e{screenToMap(e){const{x:i,y:s}=e;return new Hi({x:i,y:s,spatialReference:R0e.spatialReference})}mapToScreen(e){return Up(e.x,e.y)}constrainZ(e){return e}};YF.spatialReference=new qi;var XF;let P0=XF=class extends Wa{constructor(t){super(t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=(t==null?void 0:t.hasZ)??!1,this.rings.length!==0||!t)return;const i=un(this.radius,this.radiusUnit,"meters"),s=t.spatialReference;let n,r="geographic";if(s.isWebMercator?r="webMercator":((s.wkid&&Ee[s.wkid])!=null||(s.wkt2||s.wkt)&&SM(s.wkt2||s.wkt))&&(r="projected"),this.geodesic){let o;switch(r){case"webMercator":o=Ib(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=t}n=this._createGeodesicCircle(o,i,e),r==="webMercator"&&(n=vT(n))}else{let o;r==="webMercator"||r==="projected"?o=i/Hq(t.spatialReference):r==="geographic"&&(o=Gae(i,"meters",Bq(t.spatialReference).radius)),n=this._createPlanarCircle(t,o,e)}this.spatialReference=n.spatialReference,this.addRing(n.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:s,geodesic:n}=this;return new XF({center:t==null?void 0:t.clone(),numberOfPoints:e,radius:i,radiusUnit:s,geodesic:n})}_createGeodesicCircle(t,e,i){let s=0;const n=[];for(;s<360;){const r=[0,0],o=[t.x,t.y];ug(r,o,s,e,qi.WGS84),this.hasZ&&r.push(t.z),n.push(r),s+=360/i}return n.push(n[0]),new Wa({rings:[n]})}_createPlanarCircle(t,e,i){const s=[],n=2*Math.PI/i;for(let r=0;r<i;++r){const o=n*r,l=[t.x+Math.cos(-o)*e,t.y+Math.sin(-o)*e];this.hasZ&&l.push(t.z),s.push(l)}return s.push(s[0]),new Wa({spatialReference:t.spatialReference,rings:[s]})}};I([N({type:Hi})],P0.prototype,"center",void 0),I([N()],P0.prototype,"geodesic",void 0),I([N()],P0.prototype,"numberOfPoints",void 0),I([N()],P0.prototype,"radius",void 0),I([N()],P0.prototype,"radiusUnit",void 0),P0=XF=I([De("esri.geometry.Circle")],P0);const lXe=P0;var ivt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uXe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cXe(t,e){for(var i=0;i<e.length;i++){const s=e[i];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const r=Object.getOwnPropertyDescriptor(s,n);r&&Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var kee,Nee={exports:{}};function hXe(){return kee||(kee=1,function(t){function e(){function s(m){if(typeof m=="number")return ye.Tc.Zg(m);if(m==null)return null;if(mn[m]!=null)return ye.Tc.Zg(mn[m]);throw Error("Unrecognised Unit Type")}function n(m){if(typeof m=="number")return ye.Tc.Zg(m);if(m==null)return null;if(jr[m]!=null)return ye.Tc.Zg(jr[m]);throw Error("Unrecognised Unit Type")}function r(m){if(m)switch(m){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function o(m,j,T,p){if(T==null||T.B())return null;switch(T.getType()){case ye.qn.Point:return m.exportPoint(j,T,p);case ye.qn.Polygon:return m.exportPolygon(j,T,p);case ye.qn.Polyline:return m.exportPolyline(j,T,p);case ye.qn.MultiPoint:return m.exportMultipoint(j,T,p);case ye.qn.Envelope:return m.exportExtent(j,T,p)}return null}function l(m,j,T,p){if(T.getType()!==ye.qn.Point)throw Error("Geometry not Point");return m.exportPoint(j,T,p)}function c(m,j,T){return m.convertToGEGeometry(j,T)}function f(m){var j=m.wkid;m=m.wkt2||m.wkt;var T=Cs.get(j||m);return T==null&&(j!==-1&&j!=null?(T=ye.Eg.create(j),Cs.set(j,T)):m&&(T=ye.Eg.qP(m),Cs.set(m,T)),Ys.has(j||m)&&T.VW(Ys.get(j||m))),T}function y(m){var j,T,p;if(m==null)return null;var h=f(m);return m=h.Hd(),h=h.Kn(),(j={}).tolerance=h,j.unitType=m==null?-1:m.od,j.unitID=m==null?-1:m.Ec(),j.unitBaseFactor=m==null?0:m.ai,j.unitSquareDerivative=m==null?0:(p=(T=ye.Tc.aG(m))===null||T===void 0?void 0:T.Ec())!==null&&p!==void 0?p:0,j}function _(m,j,T,p){return T==null?null:(T=ye.$b.clip(c(m,xt,T),c(m,xt,p),f(j)),o(m,xt,T,j))}function x(m,j,T,p){T=ye.$b.dl(c(m,xt,T),c(m,xt,p),f(j)),p=[];for(var h=0;h<T.length;h++)p.push(o(m,xt,T[h],j));return p}function S(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.contains(c(m,xt,T),c(m,xt,p),f(j))}function P(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.BP(c(m,xt,T),c(m,xt,p),f(j))}function A(m,j,T,p,h){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.tb(c(m,xt,T),c(m,xt,p),f(j),s(h))}function k(m,j,T,p){return!(T==null&&p!=null||p==null&&T!=null)&&ye.$b.Nb(c(m,xt,T),c(m,xt,p),f(j))}function $(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.TS(c(m,xt,T),c(m,xt,p),f(j))}function F(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.touches(c(m,xt,T),c(m,xt,p),f(j))}function G(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.qY(c(m,xt,T),c(m,xt,p),f(j))}function V(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.TP(c(m,xt,T),c(m,xt,p),f(j))}function B(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.DU(c(m,xt,T),c(m,xt,p),f(j))}function W(m,j,T,p,h){if(T==null||p==null)throw Error("Illegal Argument Exception");return ye.$b.yB(c(m,xt,T),c(m,xt,p),f(j),h)}function J(m,j,T){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.dT(c(m,xt,T),f(j))}function re(m,j,T){if(T==null)throw Error("Illegal Argument Exception");return T=ye.$b.eC(c(m,xt,T),f(j)),o(m,xt,T,j)}function se(m,j,T,p){if(p===void 0&&(p=!1),T==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){var h=p,a=[];for(p=0;p<T.length;p++)a.push(c(m,xt,T[p]));for(T=ye.$b.jP(a,h),h=Array(T.length),p=0;p<T.length;p++)h[p]=o(m,xt,T[p],j);return h}return p=ye.$b.iP(c(m,xt,T),f(j)),o(m,xt,p,j)}function oe(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){for(var h=[],a=0;a<T.length;a++)h.push(c(m,xt,T[a]));for(T=ye.$b.QP(h,c(m,xt,p),f(j)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,xt,T[a],j);return p}return a=ye.$b.im(c(m,xt,T),c(m,xt,p),f(j)),o(m,xt,a,j)}function pe(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){for(var h=[],a=0;a<T.length;a++)h.push(c(m,xt,T[a]));for(T=ye.$b.VX(h,c(m,xt,p),f(j)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,xt,T[a],j);return p}return a=ye.$b.ep(c(m,xt,T),c(m,xt,p),f(j)),o(m,xt,a,j)}function ue(m,j,T,p){if(T==null||p==null)throw Error("Illegal Argument Exception");if(Array.isArray(T)){for(var h=[],a=0;a<T.length;a++)h.push(c(m,xt,T[a]));for(T=ye.$b.RS(h,c(m,xt,p),f(j)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,xt,T[a],j);return p}return a=ye.$b.Ea(c(m,xt,T),c(m,xt,p),f(j)),o(m,xt,a,j)}function ce(m,j,T,p){if(T==null)return null;var h=[];if(Array.isArray(T)){if(T.length===0)return null;for(p=0;p<T.length;p++)h.push(c(m,xt,T[p]))}else h.push(c(m,xt,T)),p!=null&&h.push(c(m,xt,p));return o(m,xt,ye.$b.jY(h,f(j)),j)}function ne(m,j,T,p,h,a,u,d){var g=0;if(a!=null)switch(a){case"round":g=0;break;case"bevel":g=1;break;case"miter":g=2;break;case"square":g=3}if(Array.isArray(T)){if(T==null)m=null;else if(T.length===0)m=[];else{var v=[];for(a=0;a<T.length;a++)v.push(c(m,xt,T[a]));for(T=ye.$b.BU(v,f(j),p,g,u,d,s(h)),p=Array(T.length),a=0;a<T.length;a++)p[a]=o(m,xt,T[a],j);m=p}return m}return T=ye.$b.offset(c(m,xt,T),f(j),p,g,u,d,s(h)),o(m,xt,T,j)}function de(m,j,T,p,h,a){if(a===void 0&&(a=!1),Array.isArray(T)){if(!Array.isArray(p)){for(var u=[],d=0;d<T.length;d++)u.push(p);p=u}if(p.length!=T.length){if(p.length==0)throw Error("Illegal Argument Exception");u=[];var g=0;for(d=0;d<T.length;d++)p[d]===void 0?u.push(g):(u.push(p[d]),g=p[d]);p=u}return Pe(m,j,T,p,h,!1,a,"geodesic",NaN)}return T=ye.$b.buffer(c(m,xt,T),f(j),p,s(h),!1,0,NaN),o(m,xt,T,j)}function Se(m,j,T,p,h,a,u,d){if(Array.isArray(T)){if(!Array.isArray(p)){for(var g=[],v=0;v<T.length;v++)g.push(p);p=g}if(p.length!==T.length){if(p.length===0)throw Error("Illegal Argument Exception");g=[];var b=0;for(v=0;v<T.length;v++)p[v]===void 0?g.push(b):(g.push(p[v]),b=p[v]);p=g}return Pe(m,j,T,p,h,!0,a,u,d)}return u===void 0&&(u=NaN),T=ye.$b.buffer(c(m,xt,T),f(j),p,s(h),!0,r(a),u),o(m,xt,T,j)}function Pe(m,j,T,p,h,a,u,d,g){if(g===void 0&&(g=NaN),T==null)return null;if(T.length===0)return[];for(var v=[],b=0;b<T.length;b++)v.push(c(m,xt,T[b]));for(T=ye.$b.MN(v,f(j),p,s(h),a,u,r(d),g),p=Array(T.length),b=0;b<T.length;b++)p[b]=o(m,xt,T[b],j);return p}function Re(m,j,T,p,h){var a;return h===void 0&&(h=!0),T=ye.$b.nz(c(m,xt,T),c(m,xt,p),h),(a={}).coordinate=l(m,xt,T.fz(),j),a.distance=T.hz(),a.isRightSide=T.Sz(),a.vertexIndex=T.Ua(),a.isEmpty=T.B(),a}function Oe(m,j,T,p){var h;return T=ye.$b.oz(c(m,xt,T),c(m,xt,p)),(h={}).coordinate=l(m,xt,T.fz(),j),h.distance=T.hz(),h.isRightSide=T.Sz(),h.vertexIndex=T.Ua(),h.isEmpty=T.B(),h}function we(m,j,T,p,h,a){var u;for(T=ye.$b.pz(c(m,xt,T),c(m,xt,p),h,a),p=[],h=0;h<T.length;h++)T[h].B()===!1&&p.push(((u={}).coordinate=l(m,xt,T[h].fz(),j),u.distance=T[h].hz(),u.isRightSide=T[h].Sz(),u.vertexIndex=T[h].Ua(),u.isEmpty=T[h].B(),u));return p}function Fe(m,j,T,p,h,a){return T=ye.$b.QQ(c(m,xt,T),f(j),p,h,s(a)),o(m,xt,T,j)}function it(m,j,T,p,h){return T=ye.$b.Qr(c(m,xt,T),f(j),p,s(h)),o(m,xt,T,j)}function vt(m,j,T,p,h,a){return a===void 0&&(a=0),T=ye.$b.Wy(c(m,xt,T),f(j),p,s(h),a),o(m,xt,T,j)}function ot(m,j,T,p){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.JU(c(m,xt,T),f(j),n(p))}function ct(m,j,T,p){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.KU(c(m,xt,T),f(j),s(p))}function Ct(m,j,T,p,h){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.WQ(c(m,xt,T),f(j),n(p),r(h))}function qt(m,j,T,p,h){if(T==null)throw Error("Illegal Argument Exception");return ye.$b.ZQ(c(m,xt,T),f(j),s(p),r(h))}function Lt(m){ye.NL.bind(m)}function Dt(m,j,T,p,h){var a=null,u=null;if(p){if(!h)throw ye.i.N("AOI missing Spatial Reference");a=c(m,xt,p),u=f(h).fh()}return(m=ye.gu.XR(f(j).fh(),f(T).fh(),a,u))!==null?m:null}function Yi(m,j,T,p,h){var a=null,u=null;if(p){if(!h)throw ye.i.N("AOI missing Spatial Reference");a=c(m,xt,p),u=f(h).fh()}return ye.gu.YR(f(j).fh(),f(T).fh(),a,u)}function cs(m,j,T,p,h,a){if(h===void 0&&(h=null),a===void 0&&(a=null),a){var u=new ye.yC;u.Vu=a.densificationStep,u.Jr=a.centralMeridianOfOutputGCS,a.clipWithInputHorizon&&u.PW(a.clipWithInputHorizon),a.clipWithOutputHorizon&&u.QW(a.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(j.length===0)return[];if(h){if(!(a=h.getCachedGeTransformation(T,p)))e:{if(a=h,h=null,a){var d=a.getGTListEntry();if(d!==null){h=new ye.wC(null);for(var g=0,v=d.steps;g<v.length;g++){d=v[g];var b=new ye.Dx(d.geogtran);d.isInverse&&b.Qz(),h.add(b)}u=ye.vr.Nr(f(T).fh(),f(p).fh(),h,u),a.assignCachedGe(T,p,u),a=u;break e}}if(h===null&&a&&a.steps&&0<a.steps.length){for(h=new ye.wC(null),g=0,v=a.steps;g<v.length;g++)(d=v[g]).wkid!=-1&&d.wkid!=null?h.add(ye.Dx.create(d.wkid,d.isInverse)):h.add(ye.Dx.uP(d.wkt,d.isInverse));u=ye.vr.Nr(f(T).fh(),f(p).fh(),h,u),a.assignCachedGe(T,p,u),a=u}else a=ye.vr.Nr(f(T).fh(),f(p).fh(),h,u)}for(T=[],h=0;h<j.length;h++)u=j[h],T.push(fn(m,u,p,a))}else for(a=ye.vr.Nr(f(T).fh(),f(p).fh(),null),T=[],h=0;h<j.length;h++)u=j[h],T.push(fn(m,u,p,a));return T}function fn(m,j,T,p){return j=ye.$b.zh(c(m,xt,j),p),o(m,xt,j,T)}function Us(m,j){m!=null&&(m=m.wkid||m.wkt2||m.wkt,Ys.has(m),Ys.set(m,j),Cs.has(m)&&Cs.delete(m))}function hr(m){m!=null&&(m=m.wkid||m.wkt2||m.wkt,Ys.has(m)&&(Ys.delete(m),Cs.has(m)&&Cs.delete(m)))}function oo(m,j,T,p){if(T==null||p==null)return[];var h=[],a=0;for(T=ye.$b.QS(c(m,xt,T),c(m,xt,p),f(j))||[];a<T.length;a++)h.push(o(m,xt,T[a],j));return h}var ss,ye,Fi,xr,ri=this&&this.__extends||function(){function m(j,T){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var a in h)h.hasOwnProperty(a)&&(p[a]=h[a])})(j,T)}return function(j,T){function p(){this.constructor=j}m(j,T),j.prototype=T===null?Object.create(T):(p.prototype=T.prototype,new p)}}();(function(m){var j;(j=m.qn||(m.qn={}))[j.Unknown=0]="Unknown",j[j.Point=33]="Point",j[j.Line=322]="Line",j[j.Envelope=197]="Envelope",j[j.MultiPoint=550]="MultiPoint",j[j.Polyline=1607]="Polyline",j[j.Polygon=1736]="Polygon",function(p){p[p.enumMild=0]="enumMild",p[p.enumMedium=1]="enumMedium",p[p.enumHot=2]="enumHot"}(m.YK||(m.YK={}));var T=function(){function p(){this.description=null,this.VA=0}return p.prototype.getType=function(){return 0},p.prototype.Db=function(){return-1},p.prototype.Nf=function(h){this.vc(),h!=this.description&&this.sn(h)},p.prototype.sn=function(){},p.prototype.Jl=function(h){this.vc(),h!=this.description&&(h=m.ee.CR(this.description,h))!=this.description&&this.sn(h)},p.prototype.hasAttribute=function(h){return this.description.hasAttribute(h)},p.prototype.re=function(h){this.vc(),this.description.hasAttribute(h)||(h=m.ee.BR(this.description,h),this.sn(h))},p.prototype.Tg=function(){return null},p.prototype.bn=function(){},p.prototype.A=function(){},p.prototype.Qo=function(){},p.prototype.xc=function(h){this.A(h)},p.prototype.B=function(){return!0},p.prototype.Oa=function(){},p.prototype.Oc=function(){},p.prototype.Ia=function(){return null},p.prototype.copyTo=function(){},p.prototype.Ke=function(){return 0},p.prototype.Qb=function(){return 0},p.prototype.iG=function(){return this.hasAttribute(1)},p.tf=function(h){return 1+((192&h)>>6)>>1},p.Rn=function(h){return!!(32&h)},p.US=function(h){return!!(128&h)},p.yd=function(h){return!!(256&h)},p.xj=function(h){return!!(512&h)},p.Hc=function(h){return!!(1024&h)},p.prototype.Of=function(){var h=this.Ia();return this.copyTo(h),h},p.prototype.mg=function(){return null},p.jg=function(h){var a=h.Ia();return h.copyTo(a),a},p.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},p.Ax=function(h){var a=h.getType();if(p.xj(a))return h.I();if(h.B())return 0;if(a==197)return 4;if(a==33)return 1;if(p.yd(a))return 2;throw m.i.fa("missing type")},p}();m.aa=T})(ye||(ye={})),Fi=ye||(ye={}),xr=function(){function m(){this.y=this.x=0}return m.construct=function(j,T){var p=new m;return p.x=j,p.y=T,p},m.al=function(j){var T=new m;return T.x=j.x,T.y=j.y,T},m.prototype.ma=function(j,T){this.x=j,this.y=T},m.prototype.L=function(j){this.x=j.x,this.y=j.y},m.prototype.fq=function(j,T){return this.x===j&&this.y===T},m.prototype.Rz=function(j){return 2220446049250313e-31>=Math.abs(this.x-j.x)&&2220446049250313e-31>=Math.abs(this.y-j.y)},m.prototype.qb=function(j){return this.x===j.x&&this.y===j.y},m.prototype.Nb=function(j){return j==this||j instanceof m&&this.x==j.x&&this.y==j.y},m.prototype.sub=function(j){this.x-=j.x,this.y-=j.y},m.prototype.uc=function(j,T){this.x=j.x-T.x,this.y=j.y-T.y},m.prototype.add=function(j,T){T!==void 0?(this.x=j.x+T.x,this.y=j.y+T.y):(this.x+=j.x,this.y+=j.y)},m.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},m.prototype.mt=function(j){this.x=-j.x,this.y=-j.y},m.prototype.NS=function(j,T,p){this.x=j.x*(1-p)+T.x*p,this.y=j.y*(1-p)+T.y*p},m.prototype.Ct=function(j,T){this.x=this.x*j+T.x,this.y=this.y*j+T.y},m.prototype.HW=function(j,T,p){this.x=T.x*j+p.x,this.y=T.y*j+p.y},m.prototype.scale=function(j){this.x*=j,this.y*=j},m.prototype.compare=function(j){return this.y<j.y?-1:this.y>j.y?1:this.x<j.x?-1:this.x>j.x?1:0},m.prototype.normalize=function(){var j=this.length();j==0&&(this.x=1,this.y=0),this.x/=j,this.y/=j},m.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},m.prototype.Sk=function(){return this.x*this.x+this.y*this.y},m.tb=function(j,T){return Math.sqrt(this.yc(j,T))},m.Oy=function(j,T,p,h){return j-=p,T-=h,Math.sqrt(j*j+T*T)},m.prototype.Qh=function(j){return this.x*j.x+this.y*j.y},m.prototype.fD=function(j){return Math.abs(this.x*j.x)+Math.abs(this.y*j.y)},m.prototype.wi=function(j){return this.x*j.y-this.y*j.x},m.prototype.Bt=function(j,T){var p=-this.x*T+this.y*j;this.x=this.x*j+this.y*T,this.y=p},m.prototype.Hv=function(){var j=this.x;this.x=-this.y,this.y=j},m.prototype.MG=function(j){this.x=-j.y,this.y=j.x},m.prototype.ar=function(){var j=this.x;this.x=this.y,this.y=-j},m.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},m.nu=function(j,T){var p=j.qu(),h=T.qu();return h==p?0>(j=j.wi(T))?1:0<j?-1:0:p<h?-1:1},m.yc=function(j,T){var p=j.x-T.x;return p*p+(j=j.y-T.y)*j},m.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},m.prototype.Rc=function(){this.y=this.x=NaN},m.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},m.prototype.offset=function(j,T){var p=m.tb(j,T),h=m.construct(this.x,this.y);if(p==0)return m.tb(h,j);var a=new m;return a.L(T),a.sub(j),h.sub(j),h.wi(a)/p},m.Uq=function(j,T,p){var h=new Fi.Wb;h.set(T.x),h.sub(j.x);var a=new Fi.Wb;a.set(p.y),a.sub(j.y);var u=new Fi.Wb;u.set(T.y),u.sub(j.y);var d=new Fi.Wb;return d.set(p.x),d.sub(j.x),h.Ag(a),u.Ag(d),h.sub(u),h.ps()?(h=new Fi.hp(T.x),a=new Fi.hp(j.x),u=new Fi.hp(j.y),h=h.jt(a),j=(j=new Fi.hp(p.y)).jt(u),T=(T=new Fi.hp(T.y)).jt(u),p=(p=new Fi.hp(p.x)).jt(a),h=h.lr(j),T=T.lr(p),(h=h.lr(T)).nT()?-1:h.fS()?1:0):0>(p=h.value())?-1:0<p?1:0},m.prototype.cc=function(){return Fi.O.uj(Fi.O.uj())},m}(),Fi.h=xr,function(m){var j=function(){function T(p){this.Fy=this.Mt=0,this.OX=p}return T.prototype.reset=function(){this.Fy=this.Mt=0},T.prototype.add=function(p){p-=this.Fy;var h=this.Mt+p;this.Fy=h-this.Mt-p,this.Mt=h},T.prototype.sub=function(p){this.add(-p)},T.prototype.rm=function(){return this.OX+this.Mt},T}();m.Fx=j,m.lc=function(){function T(){}return T.Cn=function(p,h){return 0<=h?Math.abs(p):-Math.abs(p)},T.sign=function(p){return 0>p?-1:0<p?1:0},T.RK=function(p){return p-360*Math.floor(p/360)},T.round=function(p){return Math.floor(p+.5)},T.ox=function(p){return p*p},T.hq=function(p,h,a){return .5>=a?p+(h-p)*a:h-(h-p)*(1-a)},T.OG=function(p,h,a,u){.5>=a?(u.x=p.x+(h.x-p.x)*a,u.y=p.y+(h.y-p.y)*a):(u.x=h.x-(h.x-p.x)*(1-a),u.y=h.y-(h.y-p.y)*(1-a))},T.lT=function(p,h,a,u,d,g){.5>=d?(g.x=p+(a-p)*d,g.y=h+(u-h)*d):(g.x=a-(a-p)*(1-d),g.y=u-(u-h)*(1-d))},T}()}(ye||(ye={})),function(m){var j=function(T){function p(){var h=T.call(this)||this;return h.sa=0,h.na=0,h.pa=0,h.la=0,h.ka=null,h}return ri(p,T),p.prototype.ac=function(){return m.h.construct(this.sa,this.na)},p.prototype.Yp=function(h){h.x=this.sa,h.y=this.na},p.prototype.Dc=function(h){this.em(0,h)},p.prototype.ZB=function(h,a){this.em(0,m.h.construct(h,a))},p.prototype.To=function(h){this.hD(0,h)},p.prototype.setStart=function(h){this.uD(0,h)},p.prototype.wv=function(h,a){return this.Od(0,h,a)},p.prototype.YB=function(h,a,u){this.tn(0,h,a,u)},p.prototype.wc=function(){return m.h.construct(this.pa,this.la)},p.prototype.Tr=function(h){h.x=this.pa,h.y=this.la},p.prototype.Qc=function(h){this.em(1,h)},p.prototype.Ql=function(h,a){this.em(1,m.h.construct(h,a))},p.prototype.Po=function(h){this.hD(1,h)},p.prototype.setEnd=function(h){this.uD(1,h)},p.prototype.gv=function(h,a){return this.Od(1,h,a)},p.prototype.OB=function(h,a,u){this.tn(1,h,a,u)},p.prototype.Db=function(){return 1},p.prototype.B=function(){return this.Ac()},p.prototype.Oa=function(){},p.prototype.Ke=function(){return 0},p.prototype.Ea=function(h,a,u,d,g){return this.KM(h,a,u,d,g)},p.prototype.isIntersecting=function(h,a){return this.zr(h,a,!1)!=0},p.prototype.qs=function(h,a){return this.ru(h,a,!1)},p.prototype.ru=function(){return null},p.prototype.Ac=function(){return!1},p.prototype.ay=function(h){if(this.vc(),this.ka==null&&0<h)this.ka=m.O.lg(2*h);else if(this.ka!=null&&this.ka.length<2*h){for(var a=this.ka.slice(0),u=this.ka.length;u<2*h;u++)a[u]=0;this.ka=a}},p.gM=function(h,a,u){if(0<u)var d=0;for(var g=0;g<u;g++)a[0+d]=h[0],d++},p.prototype.em=function(h,a){h!=0?(this.pa=a.x,this.la=a.y):(this.sa=a.x,this.na=a.y)},p.prototype.sn=function(h){if(this.ka!=null){for(var a=m.ee.Iw(h,this.description),u=[],d=p.Gg(this.description,0),g=p.Gg(this.description,1),v=p.Gg(h,0),b=p.Gg(h,1),C=0,M=1,O=h.Aa;M<O;M++){var L=h.kd(M),q=m.ra.Va(L);if(a[M]==-1){var U=m.ra.se(L);for(L=0;L<q;L++)u[v+C]=U,u[b+C]=U,C++}else for(U=this.description.$j(a[M])-2,L=0;L<q;L++)u[v+C]=this.ka[d+U],u[b+C]=this.ka[g+U],C++,U++}this.ka=u}this.description=h},p.prototype.hD=function(h,a){if(this.Ac())throw m.i.fa("empty geometry");a.Nf(this.description),a.Ac()&&a.un();for(var u=0;u<this.description.Aa;u++)for(var d=this.description.Ed(u),g=0,v=m.ra.Va(d);g<v;g++){var b=this.Od(h,d,g);a.setAttribute(d,g,b)}},p.prototype.uD=function(h,a){if(this.vc(),a.Ac())throw m.i.fa("empty geometry");for(var u=a.description,d=0,g=u.Aa;d<g;d++)for(var v=u.Ed(d),b=m.ra.Va(v),C=0;C<b;C++){var M=a.Uc(v,C);this.tn(h,v,C,M)}},p.prototype.Od=function(h,a,u){if(this.Ac())throw m.i.fa("This operation was performed on an Empty Geometry.");if(a==0)return h!=0?u!=0?this.la:this.pa:u!=0?this.na:this.sa;if(u>=m.ra.Va(a))throw m.i.ce();var d=this.description.Pf(a);return 0<=d?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[p.Gg(this.description,h)+this.description.$j(d)-2+u]):m.ra.se(a)},p.prototype.tn=function(h,a,u,d){if(this.vc(),u>=m.ra.Va(a))throw m.i.ce();var g=this.description.Pf(a);0>g&&(this.re(a),g=this.description.Pf(a)),a==0?h!=0?u!=0?this.la=d:this.pa=d:u!=0?this.na=d:this.sa=d:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[p.Gg(this.description,h)+this.description.$j(g)-2+u]=d)},p.prototype.copyTo=function(h){if(h.getType()!=this.getType())throw m.i.N();h.description=this.description,h.ay(this.description.Ae.length-2),p.gM(this.ka,h.ka,2*(this.description.Ae.length-2)),h.sa=this.sa,h.na=this.na,h.pa=this.pa,h.la=this.la,h.vc(),this.op(h)},p.prototype.Tg=function(h,a){var u=new m.Nc;return this.Ac()?(u.Oa(),u):(u.oa=this.Od(0,h,a),u.va=u.oa,u.Lk(this.Od(1,h,a)),u)},p.prototype.ZI=function(h){this.Ac()?h.Oa():(h.oa=this.Od(0,0,0),h.va=h.oa,h.Lk(this.Od(1,0,0)))},p.prototype.Tw=function(h,a){a.Nf(this.description),a.Cb(this.hc(h));for(var u=1,d=this.description.Aa;u<d;u++)for(var g=this.description.Ed(u),v=m.ra.Va(g),b=0;b<v;b++){var C=this.Uc(h,g,b);a.setAttribute(g,b,C)}},p.prototype.FM=function(h){if(this.description!=h.description||this.sa!=h.sa||this.pa!=h.pa||this.na!=h.na||this.la!=h.la)return!1;for(var a=0;a<2*(this.description.Ae.length-2);a++)if(this.ka[a]!=h.ka[a])return!1;return!0},p.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},p.prototype.reverse=function(){var h=this.sa;this.sa=this.pa,this.pa=h,h=this.na,this.na=this.la,this.la=h,h=1;for(var a=this.description.Aa;h<a;h++)for(var u=this.description.kd(h),d=0,g=m.ra.Va(u);d<g;d++){var v=this.Od(0,u,d),b=this.Od(1,u,d);this.tn(0,u,d,b),this.tn(1,u,d,v)}},p.prototype.zr=function(h,a,u){var d=this.getType(),g=h.getType();if(d===322){if(g==322)return m.yb.OM(this,h,a,u);throw m.i.Qa()}throw m.i.Qa()},p.prototype.KM=function(h,a,u,d,g){var v=this.getType(),b=h.getType();if(v===322){if(b==322)return m.yb.Zx(this,h,a,u,d,g);throw m.i.Qa()}throw m.i.Qa()},p.prototype.Tx=function(){return null},p.Gg=function(h,a){return a*(h.Ae.length-2)},p.prototype.hc=function(h,a){if(a===void 0)return a=new m.h,this.hc(h,a),a;m.lc.lT(this.sa,this.na,this.pa,this.la,h,a)},p.prototype.fe=function(){return null},p.prototype.eG=function(){return null},p.prototype.cq=function(){return null},p.prototype.Bi=function(){return null},p.prototype.Pn=function(){return null},p.prototype.kg=function(){return null},p.prototype.Ux=function(h,a){return a!==void 0?this.vx(a)-this.vx(h):this.vx(h)},p.prototype.op=function(){},p.prototype.dl=function(){return null},p.prototype.ah=function(){},p.prototype.Uc=function(){return null},p.prototype.Pe=function(){return null},p.prototype.vx=function(){return null},p.prototype.NG=function(){return null},p.prototype.tb=function(h,a){if(!a&&this.zr(h,0,!1)!=0)return 0;a=17976931348623157e292;var u=this.ac(),d=h.fe(u,!1);return u.sub(h.hc(d)),(u=u.length())<a&&(a=u),u=this.wc(),d=h.fe(u,!1),u.sub(h.hc(d)),(u=u.length())<a&&(a=u),u=h.ac(),d=this.fe(u,!1),u.sub(this.hc(d)),(u=u.length())<a&&(a=u),u=h.wc(),d=this.fe(u,!1),u.sub(this.hc(d)),(u=u.length())<a&&(a=u),a},p.prototype.mg=function(){return m.pi.gm(this,null)},p}(m.aa);m.SC=j}(ye||(ye={})),new ye.h,function(m){var j;(j=m.$K||(m.$K={}))[j.Unknown=-1]="Unknown",j[j.Not=0]="Not",j[j.Weak=1]="Weak",j[j.Strong=2]="Strong",function(p){p[p.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",p[p.IsWeakSimple=2]="IsWeakSimple",p[p.IsStrongSimple=4]="IsStrongSimple",p[p.DirtyOGCFlags=8]="DirtyOGCFlags",p[p.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",p[p.DirtyExactIntervals=64]="DirtyExactIntervals",p[p.DirtyLooseIntervals=128]="DirtyLooseIntervals",p[p.DirtyIntervals=192]="DirtyIntervals",p[p.DirtyIsEnvelope=256]="DirtyIsEnvelope",p[p.DirtyLength2D=512]="DirtyLength2D",p[p.DirtyRingAreas2D=1024]="DirtyRingAreas2D",p[p.DirtyCoordinates=1993]="DirtyCoordinates",p[p.DirtyAllInternal=65535]="DirtyAllInternal",p[p.DirtyAll=16777215]="DirtyAll"}(m.MK||(m.MK={}));var T=function(p){function h(){var a=p.call(this)||this;return a.Hm=65535,a.wa=0,a.Pg=-1,a.Bb=null,a}return ri(h,p),h.prototype.op=function(){},h.prototype.$x=function(){},h.prototype.iy=function(){},h.prototype.I=function(){return this.wa},h.prototype.B=function(){return this.Ac()},h.prototype.Ac=function(){return this.wa==0},h.prototype.ak=function(a){return!!(this.Hm&a)},h.prototype.Lf=function(a,u){this.Hm=u?this.Hm|a:this.Hm&~a},h.prototype.mc=function(){this.ak(32)&&this.bN()},h.prototype.wx=function(){if(this.Ac())throw m.i.fa("This operation was performed on an Empty Geometry.")},h.prototype.ve=function(a,u){if(0>a||a>=this.wa)throw m.i.fa("index out of bounds");this.mc(),u.Nf(this.description),u.B()&&u.un();for(var d=0;d<this.description.Aa;d++)for(var g=this.description.Ed(d),v=0,b=m.ra.Va(g);v<b;v++){var C=this.za[d].eg(b*a+v);u.setAttribute(g,v,C)}},h.prototype.Ht=function(a,u){this.mc();for(var d=u.description,g=0;g<d.Aa;g++)for(var v=d.Ed(g),b=m.ra.Va(v),C=0;C<b;C++){var M=u.Uc(v,C);this.setAttribute(v,a,C,M)}},h.prototype.D=function(a,u){if(0>a||a>=this.I())throw m.i.ce();this.mc(),this.za[0].tc(2*a,u)},h.prototype.Na=function(a){var u=new m.h;return this.D(a,u),u},h.prototype.Gc=function(a,u){this.za[0].tc(2*a,u)},h.prototype.Cb=function(a,u,d){if(0>a||a>=this.wa)throw m.i.ce();this.mc();var g=this.za[0];d!==void 0?(g.write(2*a,u),g.write(2*a+1,d)):g.Tt(2*a,u),this.Pc(1993)},h.prototype.Cz=function(){if(void 0>=this.I())throw m.i.ce();this.mc();var a=this.za[0],u=new m.Nd;return u.x=a.read(NaN),u.y=a.read(NaN),u.z=this.hasAttribute(1)?this.za[1].eg():m.ra.se(1),u},h.prototype.dC=function(a){if(0>a||a>=this.I())throw m.i.ce();this.re(1),this.mc(),this.Pc(1993);var u=this.za[0];u.write(2*a,(void 0).x),u.write(2*a+1,(void 0).y),this.za[1].pr(a,(void 0).z)},h.prototype.Uc=function(a,u,d){if(0>u||u>=this.wa)throw m.i.ce();var g=m.ra.Va(a);if(d>=g)throw m.i.ce();this.mc();var v=this.description.Pf(a);return 0<=v?this.za[v].eg(u*g+d):m.ra.se(a)},h.prototype.yF=function(a,u){return this.Uc(a,u)},h.prototype.setAttribute=function(a,u,d,g){if(0>u||u>=this.wa)throw m.i.ce();var v=m.ra.Va(a);if(d>=v)throw m.i.ce();this.re(a),this.mc(),a=this.description.Pf(a),this.Pc(1993),this.za[a].pr(u*v+d,g)},h.prototype.ub=function(a){return this.wx(),this.re(a),this.mc(),this.za[this.description.Pf(a)]},h.prototype.hn=function(a,u){if(u!=null&&m.ra.Tp(a)!=u.Tp())throw m.i.N();this.re(a),a=this.description.Pf(a),this.za==null&&(this.za=m.Yc.qI(this.description.Aa)),this.za[a]=u,this.Pc(16777215)},h.prototype.sn=function(a){var u=null;if(this.za!=null){var d=m.ee.Iw(a,this.description);u=[];for(var g=0,v=a.Aa;g<v;g++)d[g]!=-1&&(u[g]=this.za[d[g]])}this.description=a,this.za=u,this.Pg=-1,this.Pc(16777215)},h.prototype.AD=function(a){this.wu(!0),a instanceof m.l?this.$.A(a):this.$.Qo(a)},h.prototype.aN=function(a){this.wu(!1),a instanceof m.l?this.$.A(a):this.$.Qo(a)},h.prototype.bn=function(a){this.wu(!0),this.$.copyTo(a)},h.prototype.A=function(a){this.AD(a)},h.prototype.Qo=function(a){this.AD(a)},h.prototype.xc=function(a){this.aN(a)},h.prototype.Tg=function(a,u){var d=new m.Nc;return this.Ac()?(d.Oa(),d):(this.wu(!0),this.$.Tg(a,u))},h.prototype.cc=function(){var a=this.description.cc();if(!this.Ac())for(var u=this.I(),d=0,g=this.description.Aa;d<g;d++)a=this.za[d].An(a,0,u*m.ra.Va(this.description.Ed(d)));return a},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h&&this.description.Nb(a.description))||this.Ac()!=a.Ac())return!1;if(this.Ac())return!0;var u=this.I();if(u!=a.I())return!1;for(var d=0;d<this.description.Aa;d++){var g=this.description.kd(d),v=this.ub(g),b=a.ub(g);if(!v.Nb(b,0,u*m.ra.Va(g)))return!1}return!0},h.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw m.i.N();this.dD(a)},h.prototype.dD=function(a){this.mc(),a.description=this.description,a.za=null;var u=this.description.Aa,d=null;if(this.za!=null){d=[];for(var g=0;g<u;g++)this.za[g]!=null&&(d[g]=this.za[g].GB(this.I()*m.ra.Va(this.description.Ed(g))))}this.$!=null?(a.$=this.$.Ia(),this.$.copyTo(a.$)):a.$=null,a.wa=this.wa,a.Hm=this.Hm,a.za=d;try{this.op(a)}catch{throw a.Oa(),m.i.fu()}},h.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},h.prototype.Pc=function(a){a==16777215&&(this.Pg=-1,this.$x()),this.Hm|=a,this.lM(),this.vc()},h.prototype.wu=function(a){if(this.mc(),this.ak(192))if(this.$==null?this.$=new m.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(a);for(var u=1;u<this.description.Aa;u++)for(var d=this.description.Ed(u),g=m.ra.Va(d),v=this.za[u],b=0;b<g;b++){var C=new m.Nc;C.Oa();for(var M=0;M<this.wa;M++){var O=v.eg(M*g+b);C.Zb(O)}this.$.setInterval(d,b,C)}a&&this.Lf(192,!1)}},h.prototype.hy=function(){this.$.Oa();for(var a=this.za[0],u=new m.h,d=0;d<this.wa;d++)a.tc(2*d,u),this.$.Zb(u)},h.prototype.yp=function(a){a.Oa();for(var u=this.za[0],d=new m.h,g=0;g<this.wa;g++)u.tc(2*g,d),a.Zb(d)},h.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=m.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var a=0;a<this.description.Aa;a++){var u=this.description.Ed(a);if(this.za[a]!=null){var d=m.ra.Va(u),g=m.O.truncate(this.za[a].size/d);g<this.wa&&(g=m.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[a].resize(g*d,m.ra.se(u))),g<this.Pg&&(this.Pg=g)}else this.za[a]=m.Yc.YE(u,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},h.prototype.dm=function(a){if(0>a)throw m.i.N();a!=this.wa&&(this.wa=a,this.Pc(65535))},h.prototype.om=function(a){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=a)return this.ak(8)?1:2}return-1},h.prototype.Ch=function(a,u){if(this.QT=u,a==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),a==0)this.Lf(2,!1),this.Lf(4,!1);else if(a==1)this.Lf(2,!0),this.Lf(4,!1);else{if(a!=2)throw m.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},h.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},h.prototype.kD=function(a,u,d,g){if(0>a||a>=this.wa||0>u||u>=this.wa)throw m.i.fa("index out of bounds");this.mc(),g.Nf(this.description),g.B()&&g.un();for(var v=0;v<this.description.Aa;v++)for(var b=this.description.Ed(v),C=0,M=m.ra.Va(b);C<M;C++){var O=this.za[v].eg(M*a+C),L=this.za[v].eg(M*u+C);g.setAttribute(b,C,m.lc.hq(O,L,d))}},h.prototype.yr=function(a,u){var d=this.za[0].o,g=d[2*a]-d[2*u];return a=d[2*a+1]-d[2*u+1],Math.sqrt(g*g+a*a)},h.prototype.KR=function(a){if(0>a||a>=this.wa)throw m.i.ce();this.mc();var u=new m.Sa;u.Nf(this.description),u.B()&&u.un();for(var d=0;d<this.description.Aa;d++)for(var g=this.description.kd(d),v=0,b=m.ra.Va(g);v<b;v++){var C=this.za[d].eg(b*a+v);u.setAttribute(g,v,C)}return u},h.prototype.Dh=function(a,u){if(0>a||a>=this.wa)throw m.i.ce();if(u.B())throw m.i.N();this.mc();for(var d=u.description,g=0;g<d.Aa;g++)for(var v=d.kd(g),b=m.ra.Va(v),C=0;C<b;C++){var M=u.Uc(v,C);this.setAttribute(v,a,C,M)}},h.prototype.lu=function(){return null},h.prototype.fj=function(){return null},h}(m.aa);m.Gx=T}(ye||(ye={})),function(m){var j=function(){function T(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new m.$c(7),this.Zn=null}return T.prototype.Vo=function(p){this.Zn=p},T.prototype.RP=function(){this.Rv=!1},T.prototype.De=function(p){this.ob.De(p)},T.prototype.Pr=function(p){var h=this.ob.Ce();return this.rX(h),this.uX(p,h),h},T.prototype.MP=function(p){this.ob.jd(p)},T.prototype.addElement=function(p,h){return h==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),h=this.Qe),this.FD(p,0,h)},T.prototype.KD=function(p){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(p,1,this.Qe)},T.prototype.xn=function(p){this.Qe==-1&&(this.Qe=this.Pr(-1));var h=this.Qe,a=this.ob.o;if(h==-1||a[7*h]==-1)return p=this.ob.Ll([-1,-1,-1,p,this.gl(),-1,-1]),(a=this.ob.o)[7*h]=p,this.vp(-1,p,h,a),p;var u=h==-1?-1:a[7*h+2];return p=this.ob.Ll([-1,-1,u,p,this.gl(),-1,-1]),(a=this.ob.o)[7*u+1]=p,this.oy(p,a),a[7*p+2]===-1&&(a[7*h]=p),this.vp(-1,p,h,a),p},T.prototype.zu=function(p,h,a,u){var d=-1;d==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),d=this.Qe);var g=this.ob.o;if(d==-1||g[7*d]==-1)return a=this.ob.Ll([-1,-1,-1,a,this.gl(),-1,-1]),(g=this.ob.o)[7*d]=a,this.vp(-1,a,d,g),a;if(u){u=h!=-1?this.Zn.compare(this,a,h):-1;var v=p!=-1?this.Zn.compare(this,a,p):1}else u=-1,v=1;if(u==0||v==0)return g[7*d+3]=u==0?h:p,-1;for((h!=-1&&p!=-1?this.Tm>m.O.bB(this.Tm)>>1:h!=-1)?p=h:u=v,h=!0;;){if(0>u){if((v=g[7*p])==-1){u=p,a=this.ob.Ll([-1,-1,p,a,this.gl(),-1,-1]),(g=this.ob.o)[7*p]=a;break}p=v}else{if((v=g[7*p+1])==-1){u=g[7*p+6],a=this.ob.Ll([-1,-1,p,a,this.gl(),-1,-1]),(g=this.ob.o)[7*p+1]=a;break}p=v}h&&(u*=-1,h=!1)}return this.oy(a,g),g[7*a+2]===-1&&(g[7*d]=a),this.vp(u,a,d,g),a},T.prototype.FF=function(){return this.iR(this.Qe)},T.prototype.vd=function(p,h){h=h==-1?this.Qe:h,this.Rv?this.LP(p,h):this.iY(p,h)},T.prototype.search=function(p,h){for(h=this.sv(h);h!=-1;){var a=this.Zn.compare(this,p,h);if(a==0)return h;h=0>a?this.ll(h):this.Xp(h)}return-1},T.prototype.IW=function(p){for(var h=this.sv(-1),a=-1;h!=-1;){var u=p.compare(this,h);if(u==0)return h;0>u?h=this.ll(h):(a=h,h=this.Xp(h))}return a},T.prototype.uJ=function(p){for(var h=this.sv(-1),a=-1;h!=-1;){var u=p.compare(this,h);if(u==0)return h;0>u?(a=h,h=this.ll(h)):h=this.Xp(h)}return a},T.prototype.ja=function(p){return this.ob.T(p,3)},T.prototype.ll=function(p){return this.ob.T(p,0)},T.prototype.Xp=function(p){return this.ob.T(p,1)},T.prototype.getParent=function(p){return this.ob.T(p,2)},T.prototype.lb=function(p){return this.ob.T(p,6)},T.prototype.we=function(p){return this.ob.T(p,5)},T.prototype.rc=function(p){return p==-1?this.kl(this.Qe):this.kl(p)},T.prototype.Fc=function(p){return p==-1?this.Zr(this.Qe):this.Zr(p)},T.prototype.ZR=function(p){return p==-1?this.bG(this.Qe):this.bG(p)},T.prototype.Sj=function(p,h){this.NB(p,h)},T.prototype.sv=function(p){return p==-1?this.YF(this.Qe):this.YF(p)},T.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},T.prototype.size=function(p){return p==-1?this.$F(this.Qe):this.$F(p)},T.prototype.KN=function(p,h){for(var a=h[7*p],u=h[7*p+1],d=h[7*p+4];a!=-1||u!=-1;){var g=a!=-1?h[7*a+4]:2147483647;if(u=u!=-1?h[7*u+4]:2147483647,d<=Math.min(g,u))break;g<=u?this.sJ(a,h):this.rJ(p,h),a=h[7*p],u=h[7*p+1]}},T.prototype.oy=function(p,h){if(this.Rv)for(var a=h[7*p+4],u=h[7*p+2];u!=-1&&h[7*u+4]>a;)h[7*u]==p?this.sJ(p,h):this.rJ(u,h),u=h[7*p+2]},T.prototype.rJ=function(p,h){var a=h[7*p+1];h[7*a+2]=h[7*p+2],h[7*p+2]=a;var u=h[7*a];h[7*p+1]=u,u!=-1&&(h[7*u+2]=p),h[7*a]=p,(u=h[7*a+2])!=-1&&(h[7*u]==p?h[7*u]=a:h[7*u+1]=a)},T.prototype.sJ=function(p,h){var a=h[7*p+2];h[7*p+2]=h[7*a+2],h[7*a+2]=p;var u=h[7*p+1];h[7*a]=u,u!=-1&&(h[7*u+2]=a),h[7*p+1]=a,(u=h[7*p+2])!=-1&&(h[7*u]===a?h[7*u]=p:h[7*u+1]=p)},T.prototype.Pk=function(p,h){this.ob.S(p,2,h)},T.prototype.TB=function(p,h){this.ob.S(p,0,h)},T.prototype.XB=function(p,h){this.ob.S(p,1,h)},T.prototype.WB=function(p,h){this.ob.S(p,5,h)},T.prototype.ex=function(p,h){this.ob.S(p,6,h)},T.prototype.XJ=function(p,h){this.ob.S(h,0,p)},T.prototype.rX=function(p){this.ob.S(p,4,0)},T.prototype.uX=function(p,h){this.ob.S(h,5,p)},T.prototype.YF=function(p){return p==-1?-1:this.ob.T(p,0)},T.prototype.kl=function(p){return p==-1?-1:this.ob.T(p,1)},T.prototype.Zr=function(p){return p==-1?-1:this.ob.T(p,2)},T.prototype.iR=function(p){return p==-1?-1:this.ob.T(p,3)},T.prototype.$F=function(p){return p==-1?0:this.ob.T(p,4)},T.prototype.bG=function(p){return this.ob.T(p,5)},T.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},T.prototype.fl=function(p){p!=-1&&this.ob.jd(p)},T.prototype.gl=function(){return this.Tm=m.O.bB(this.Tm),1073741823&this.Tm},T.prototype.FD=function(p,h,a){var u=this.ob.o;if(a==-1||u[7*a]==-1)return p=this.ob.Ll([-1,-1,-1,p,this.gl(),-1,-1]),(u=this.ob.o)[7*a]=p,this.vp(-1,p,a,u),p;for(var d=a==-1?-1:u[7*a];;){var g=h==-1?1:this.Zn.compare(this,p,d);if(0>g){if((g=this.ll(d))==-1){h=d,p=this.ob.Ll([-1,-1,d,p,this.gl(),-1,-1]),(u=this.ob.o)[7*d]=p;break}d=g}else{if(h==1&&g==0)return u[7*a+3]=d,-1;if((g=u[7*d+1])==-1){h=u[7*d+6],p=this.ob.Ll([-1,-1,d,p,this.gl(),-1,-1]),(u=this.ob.o)[7*d+1]=p;break}d=g}}return this.oy(p,u),u[7*p+2]===-1&&(u[7*a]=p),this.vp(h,p,a,u),p},T.prototype.vp=function(p,h,a,u){if(p!=-1){var d=u[7*p+5];u[7*p+5]=h}else d=a==-1?-1:u[7*a+2];u[7*h+5]=d,d!=-1&&(u[7*d+6]=h),u[7*h+6]=p,p==(a==-1?-1:u[7*a+1])&&(u[7*a+1]=h),p==-1&&(u[7*a+2]=h),u[7*a+4]=(a==-1?0:u[7*a+4])+1},T.prototype.AB=function(p,h){var a=this.ob.o,u=a[7*p+5];p=a[7*p+6],u!=-1?a[7*u+6]=p:a[7*h+1]=p,p!=-1?a[7*p+5]=u:a[7*h+2]=u,a[7*h+4]=h===-1?-1:a[7*h+4]-1},T.prototype.iY=function(p,h){this.AB(p,h);var a=this.ll(p),u=this.Xp(p),d=this.getParent(p),g=p;if(a!=-1&&u!=-1){this.Tm=m.O.bB(this.Tm);var v=1073741823<this.Tm?this.lb(p):this.we(p),b=this.getParent(v)==p;this.ob.gC(p,v,0),this.ob.gC(p,v,1),this.ob.gC(p,v,2),d!=-1?this.ll(d)==p?this.TB(d,v):this.XB(d,v):this.XJ(v,h),b?(a==v?(this.TB(v,p),this.Pk(u,v)):u==v&&(this.XB(v,p),this.Pk(a,v)),this.Pk(p,v),d=v):(this.Pk(a,v),this.Pk(u,v),d=this.getParent(p),g=v),a=this.ll(p),u=this.Xp(p),a!=-1&&this.Pk(a,p),u!=-1&&this.Pk(u,p)}a=a!=-1?a:u,d==-1?this.XJ(a,h):this.ll(d)==g?this.TB(d,a):this.XB(d,a),a!=-1&&this.Pk(a,d),this.fl(p)},T.prototype.LP=function(p,h){var a=this.ob.o;a[7*p+4]=2147483647;var u=-1,d=-1,g=h===-1?-1:a[7*h],v=g==p;if(v&&(u=a[7*g],d=a[7*g+1],u==-1&&d==-1))return this.AB(g,h),this.fl(g),void(a[7*h]=-1);this.KN(p,a),(g=a[7*p+2])!=-1&&(a[7*g]==p?a[7*g]=-1:a[7*g+1]=-1),this.AB(p,h),this.fl(p),v&&(a[7*h]=u==-1||a[7*u+2]!=-1?d:u)},T.prototype.NB=function(p,h){this.ob.S(p,3,h)},T}();m.Yj=j}(ye||(ye={})),function(m){var j=function(){function T(p,h){p!==void 0&&this.K(p,h)}return T.prototype.K=function(p,h){this.oa=p,this.va=h,this.normalize()},T.prototype.isIntersecting=function(p){return this.oa<=p.oa?this.va>=p.oa:p.va>=this.oa},T.prototype.move=function(p){this.B()||(this.oa+=p,this.va+=p)},T.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var p=this.oa;this.oa=this.va,this.va=p}isNaN(this.va)&&this.Oa()}},T.prototype.Oa=function(){this.va=this.oa=NaN},T.prototype.B=function(){return isNaN(this.oa)},T.prototype.Zb=function(p){typeof p=="number"?this.B()?this.va=this.oa=p:this.Lk(p):p.B()||(this.B()?(this.oa=p.oa,this.va=p.va):(this.oa>p.oa&&(this.oa=p.oa),this.va<p.va&&(this.va=p.va),this.oa>this.va&&this.Oa()))},T.prototype.Lk=function(p){p<this.oa?this.oa=p:p>this.va&&(this.va=p)},T.prototype.contains=function(p){return typeof p=="number"?p>=this.oa&&p<=this.va:p.oa>=this.oa&&p.va<=this.va},T.prototype.Ea=function(p){this.B()||p.B()?this.Oa():(this.oa<p.oa&&(this.oa=p.oa),this.va>p.va&&(this.va=p.va),this.oa>this.va&&this.Oa())},T.prototype.W=function(p){this.B()||(this.oa-=p,this.va+=p,this.va<this.oa&&this.Oa())},T.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},T.prototype.KB=function(p,h){p>h?(this.oa=h,this.va=p):(this.oa=p,this.va=h)},T.prototype.It=function(p){return m.O.Rk(p,this.oa,this.va)},T.prototype.R=function(){return this.va-this.oa},T.prototype.sf=function(){return .5*(this.oa+this.va)},T.prototype.Nb=function(p){return p==this||p instanceof T&&(!(!this.B()||!p.B())||this.oa==p.oa&&this.va==p.va)},T.prototype.cc=function(){return m.O.uj(m.O.uj())},T}();m.Nc=j}(ye||(ye={})),function(m){var j=new m.Nc,T=new m.Nc,p=function(){this.ne=null,this.pb=-1,this.sb=new m.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new m.Nc,this.Uf.KB(0,0)};m.IY=p;var h=function(){function a(u,d,g){this.g=u,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=d,this.Nq=10*d,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=g,this.TA=new p,this.YH=new p,m.O.truncate(3*u.fd/2)}return a.prototype.mG=function(u,d,g,v){u.ne=v===null?null:v[g[5*d]],u.Tv=u.ne!=null,u.Tv||((v=g[5*d+2])!==-1&&this.g.mW(g[5*d],g[5*v],u.sb),u.ne=u.sb,u.Uf.KB(u.sb.sa,u.sb.pa),u.Uf.va+=this.qa,u.sb.rI(),u.Vv=u.sb.la==u.sb.na,u.Vv||(u.qA=(u.sb.pa-u.sb.sa)/(u.sb.la-u.sb.na)))},a.prototype.OO=function(u,d){var g=u.zr(d,this.qa,!0);return g!=0?g==2?this.Qy():this.xi():(u.Yp(pn),u.Tr(ms),d.Yp(Zi),d.Tr(tn),Ai.ma(this.Kq,this.Hk),pn.qb(Zi)&&this.Hk==pn.y?0>ms.compare(tn)?Ai.L(ms):Ai.L(tn):pn.qb(tn)&&this.Hk==pn.y?0>ms.compare(Zi)?Ai.L(ms):Ai.L(Zi):Zi.qb(ms)&&this.Hk==Zi.y?0>pn.compare(tn)?Ai.L(pn):Ai.L(tn):ms.qb(tn)&&this.Hk==ms.y&&(0>pn.compare(Zi)?Ai.L(pn):Ai.L(Zi)),u.Pe(Ai.y,Ai.x)<d.Pe(Ai.y,Ai.x)?-1:1)},a.prototype.MO=function(u,d){if(u.sb.na==d.sb.na&&u.sb.sa==d.sb.sa)return u.sb.la==d.sb.la&&u.sb.pa==d.sb.pa?this.gA?this.Qy():0:this.PE(u,d);if(u.sb.la==d.sb.la&&u.sb.pa==d.sb.pa)return this.OE(u,d);var g=this.OE(u,d);return u=this.PE(u,d),0>g&&0>u?-1:0<g&&0<u?1:this.xi()},a.prototype.IO=function(u,d){if(u.pa>d.pa){if(d.pa>d.sa&&d.la-d.na<2*this.qa&&u.vi(d.pa,d.la,this.qa))return this.xi()}else if((d.la-d.na)/(d.pa-d.sa)*(u.pa-u.sa)<this.Nq&&d.vi(u.pa,u.la,this.qa))return this.xi();return 1},a.prototype.JO=function(u,d){if(u.sa<d.sa){if(d.pa>d.sa&&d.la-d.na<2*this.qa&&u.vi(d.pa,d.la,this.qa))return this.xi()}else if((d.la-d.na)/(d.pa-d.sa)*(u.sa-u.pa)<this.Nq&&d.vi(u.sa,u.na,this.qa))return this.xi();return-1},a.prototype.KO=function(u,d){var g=new m.h;g.uc(d.wc(),d.ac()),g.ar(),g.normalize();var v=new m.h;v.uc(u.ac(),d.ac());var b=new m.h;b.uc(u.wc(),d.ac()),v=v.Qh(g),g=b.Qh(g),b=Math.abs(v);var C=Math.abs(g);if(b<C){if(b<this.Nq&&d.vi(u.sa,u.na,this.qa))return this.xi()}else if(C<this.Nq&&d.vi(u.pa,u.la,this.qa))return this.xi();return 0>v&&0>g?-1:0<v&&0<g?1:this.xi()},a.prototype.NE=function(u,d){return u.na==d.na&&u.sa==d.sa?this.IO(u,d):u.la==d.la&&u.pa==d.pa?this.JO(u,d):this.KO(u,d)},a.prototype.LO=function(u,d){return u.la==d.la&&u.pa==d.pa&&u.na==d.na&&u.sa==d.sa?this.gA?this.Qy():0:this.xi()},a.prototype.OE=function(u,d){var g=1;if(u.sb.na<d.sb.na){g=-1;var v=u;u=d,d=v}u=u.sb,v=d.sb;var b=u.sa-v.sa;d=d.qA*(u.na-v.na);var C=this.Nq;return b<d-C?-g:b>d+C?g:v.vi(u.sa,u.na,this.qa)?this.xi():b<d?-g:g},a.prototype.PE=function(u,d){var g=1;if(d.sb.la<u.sb.la){g=-1;var v=u;u=d,d=v}u=u.sb,v=d.sb;var b=u.pa-v.sa;d=d.qA*(u.la-v.na);var C=this.Nq;return b<d-C?-g:b>d+C?g:v.vi(u.pa,u.la,this.qa)?this.xi():b<d?-g:g},a.prototype.Qy=function(){return this.rg=!0,this.Ni=new m.Md(5,this.Lo,this.gt),-1},a.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new m.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},a.prototype.NO=function(u,d,g,v){if(this.rg)return-1;var b=this.OH==this.Hk&&this.NH==this.Kq;if(b&&u==this.Ws)var C=this.PH;else C=NaN,this.Ws=-1;return b&&d==this.Xs?b=this.QH:(b=NaN,this.Xs=-1),g.ne.ZI(j),v.ne.ZI(T),j.va<T.oa?-1:T.va<j.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(C)&&(this.Ws=u,this.PH=C=u=g.ne.Pe(this.Hk,this.Kq)),isNaN(b)&&(this.Xs=d,this.QH=b=u=v.ne.Pe(this.Hk,this.Kq)),Math.abs(C-b)<=this.qa?this.OO(g.ne,v.ne):C<b?-1:C>b?1:0)},a.prototype.Kr=function(){this.rg=!1},a.prototype.rm=function(){return this.Ni},a.prototype.$J=function(u,d){this.Hk=u,this.Kq=d,this.gt=this.Lo=this.Xs=this.Ws=-1},a.prototype.compare=function(u,d,g){return this.rg?-1:(u=u.ja(g),this.Dm=g,this.RE(d,d,u,u))},a.prototype.RE=function(u,d,g,v){if(this.Lo==d)var b=this.TA;else this.Lo=d,b=this.TA,this.TA.pb=u,this.mG(b,d,this.g.td.o,this.g.We);if(C==null){this.gt=v;var C=this.YH;this.YH.pb=g,this.mG(C,v,this.g.td.o,this.g.We)}return b.Tv||C.Tv?this.NO(d,v,b,C):b.Uf.va<C.Uf.oa?-1:C.Uf.va<b.Uf.oa?1:(u=b.Vv?1:0,(u|=C.Vv?2:0)==0?this.MO(b,C):u==1?this.NE(b.sb,C.sb):u==2?-1*this.NE(C.sb,b.sb):this.LO(b.sb,C.sb))},a}();m.UC=h}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.g=p,this.qa=h,this.rg=!1,this.Lo=-1,this.Uf=new m.Nc,this.Gq=new m.h,this.Gq.Rc(),this.ie=new m.yb,this.Dm=-1,this.BA=17976931348623157e292}return T.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},T.prototype.Dh=function(p){this.Gq.L(p)},T.prototype.compare=function(p,h){return this.SE(h,p.ja(h))},T.prototype.SE=function(p,h){var a=this.g.bc(h)!=null;if(a||(this.g.ed(h,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),a)throw m.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=p,this.rg=!0,0;this.ie.rI(),a=this.ie.ac(),(h=new m.h).uc(this.ie.wc(),a),h.ar();var u=new m.h;return u.uc(this.Gq,a),a=h.Qh(u),(a/=h.length())<10*-this.qa?-1:a>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((h=Math.abs(a))<this.BA&&(this.Dm=p,this.BA=h),this.rg=!0,h<.25*this.qa)?0:0>a?-1:1},T}();m.aM=j}(ye||(ye={})),function(m){function j(p,h,a,u){a=new Float64Array(p.subarray(a,u)),p.set(a,h)}var T=function(){function p(h){this.Pb=this.pk=!1,this.o=null;var a=h;2>a&&(a=2),this.o=new Float64Array(a),this.size=h}return p.prototype.rotate=function(h,a,u){if(this.Pb)throw m.i.fa("invalid_call");if(a<h||a>u||h>u)throw m.i.N();h!=a&&u!=a&&(this.ni(h,a-h,1),this.ni(a,u-a,1),this.ni(h,u-h,1))},p.qf=function(h,a){var u=new p(h),d=u.o;if(2>h&&(h=2),a!==0)for(var g=0;g<h;g++)d[g]=a;return u},p.Bn=function(h){var a=new p(0);return a.o=new Float64Array(h.o),a.size=h.size,a},p.Lr=function(h,a){var u=new p(0);return u.size=h.size,u.size>a&&(u.size=a),2>(a=u.size)&&(a=2),u.o=new Float64Array(a),u.o.set(h.o.length<=a?h.o:h.o.subarray(0,a),0),u},p.prototype.Jb=function(h){0>=h||(this.o==null?this.o=new Float64Array(h):h<=this.o.length||(0<this.o.length?((h=new Float64Array(h)).set(this.o),this.o=h):this.o=new Float64Array(h)))},p.prototype.read=function(h){return this.o[h]},p.prototype.tc=function(h,a){a.x=this.o[h],a.y=this.o[h+1]},p.prototype.get=function(h){return this.o[h]},p.prototype.write=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.set=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.Tt=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.add=function(h){this.resize(this.size+1),this.o[this.size-1]=h},p.prototype.GB=function(h){return p.Lr(this,h)},p.prototype.eg=function(h){return this.read(h)},p.prototype.resize=function(h,a){if(a===void 0&&(a=0),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(h<=this.size){if(30<this.o.length&&5*h/4<this.o.length){var u=new Float64Array(this.o,0,h);this.o=u}}else{h>this.o.length&&(u=m.O.truncate(64>h?Math.max(2*h,4):5*h/4),(u=new Float64Array(u)).set(this.o),this.o=u),u=this.o;for(var d=this.size;d<h;d++)u[d]=a}this.size=h},p.prototype.Bh=function(h){if((this.o==null||h>this.o.length)&&this.resize(h),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=h},p.prototype.pr=function(h,a){this.write(h,a)},p.prototype.An=function(h,a,u){for(var d=this.size;a<d&&a<u;a++)h=m.O.uj(this.read(a));return h},p.prototype.Nb=function(h,a,u){if(h==null||!(h instanceof p))return!1;var d=this.size,g=h.size;if(u>d||u>g&&d!=g)return!1;for(u>d&&(u=d);a<u;a++)if(this.read(a)!=h.read(a))return!1;return!0},p.prototype.addRange=function(h,a,u,d,g){if(this.Pb)throw m.i.Hb();if(!d&&(1>g||u%g!=0))throw m.i.N();var v=this.size;if(this.resize(v+u),d)this.o.set(h.o.subarray(a,a+u),v);else{d=u;for(var b=0;b<u;b+=g){d-=g;for(var C=0;C<g;C++)this.o[v+b+C]=h.o[a+d+C]}}},p.prototype.Mn=function(h,a,u,d,g,v,b){if(this.Pb)throw m.i.Hb();if(!g&&(1>v||d%v!=0))throw m.i.N();var C=this.size-b;if(C<d&&this.resize(this.size+d-C),j(this.o,h+d,h,h+(b-h)),this.o==a.o&&h<u&&(u+=d),g)this.o.set(a.o.subarray(u,u+d),h);else for(g=d,b=0;b<d;b+=v)for(g-=v,C=0;C<v;C++)this.o[h+b+C]=a.o[u+g+C]},p.prototype.Iz=function(h,a,u,d,g,v){if(this.Pb)throw m.i.Hb();if(0>v&&(v=this.size),this.size+2*d>this.o.length?this.resize(this.size+2*d):this.size+=2*d,j(this.o,h+2*d,h,h+(v-h)),g)for(g=0;g<d;g++)v=a[u++],this.o[h++]=v.x,this.o[h++]=v.y;else{g=0;for(var b=d-1;g<d;++g)v=a[u+b],this.o[h++]=v.x,this.o[h++]=v.y,b--}},p.prototype.Ln=function(h,a,u,d){if(this.Pb)throw m.i.Hb();for(d-=h,j(this.o,h+d,h,h+d),d=0;d<u;d++)this.o[h+d]=a},p.prototype.vj=function(h,a,u){if(this.Pb)throw m.i.Hb();j(this.o,h+2,h,h+(u-h)),this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.Ut=function(h,a,u,d,g,v){if(0>h||0>a||0>d||!g&&(0>=v||a%v!=0)||u.size<d+a)throw m.i.N();if(a!=0)if(this.size<a+h&&this.resize(a+h),u==this)this.Ar(h,a,d,g,v);else if(g)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d++;else if(d=d+a-v,v==1)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d--;else for(g=0,a=m.O.truncate(a/v);g<a;g++){for(var b=0;b<v;b++)this.o[h+b]=u.o[d+b];h+=v,d-=v}},p.prototype.En=function(h,a,u){if(this.Pb||h+a>this.size)throw m.i.Hb();0<u-(h+a)&&j(this.o,h,h+a,h+(u-(h+a))+a),this.size-=a},p.prototype.ni=function(h,a,u){if(this.Pb||1>u||a%u!=0)throw m.i.Hb();for(var d=a>>1,g=0;g<d;g+=u){a-=u;for(var v=0;v<u;v++){var b=this.o[h+g+v];this.o[h+g+v]=this.o[h+a+v],this.o[h+a+v]=b}}},p.prototype.Wj=function(h,a,u){if(0>a||0>u||0>a||u+a>this.size)throw m.i.N();for(var d=a;d<a+u;d++)this.o[d]=h},p.prototype.Ar=function(h,a,u,d,g){if(!(d&&h==u||(this.o.set(this.o.subarray(u,u+a),h),d)))for(u=h,h=h+a-g,d=0,a=m.O.truncate(a/2);d<a;d++){for(var v=0;v<g;v++){var b=this.o[u+v];this.o[u+v]=this.o[h+v],this.o[h+v]=b}u+=g,h-=g}},p.prototype.vC=function(h,a,u,d,g){if(0>h||0>a||0>d)throw m.i.N();if(a!=0)for(this.size<(a<<1)+h&&this.resize((a<<1)+h),g||(h+=a-1<<1),g=g?2:-2,a+=d;d<a;d++)this.o[h]=u[d].x,this.o[h+1]=u[d].y,h+=g},p.prototype.uC=function(h,a,u){if(0>h||0>a)throw m.i.N();if(a!=0){this.size<(a<<1)+h&&this.resize((a<<1)+h),a+=0;for(var d=0;d<a;d++)this.o[h]=u[d][0],this.o[h+1]=u[d][1],h+=2}},p.prototype.Vw=function(h,a,u,d,g){if(0>h||0>a||0>d||this.size<a+h)throw m.i.N();if(g)for(g=0;g<a;g++)u[d+g]=this.o[h+g];else for(d=d+a-1;h<a;h++)u[d]=this.o[h],d--},p.prototype.uB=function(h,a,u){if(0>h||0>a||this.size<(a>>1)+h)throw m.i.N();if(a!=0){a=0+a;for(var d=0;d<a;d++)u[d][0]=this.o[h],u[d][1]=this.o[h+1],h+=2}},p.prototype.clear=function(h){h?this.resize(0):this.Bh(0)},p.prototype.ix=function(){this.pk=this.Pb=!0},p.prototype.Vd=function(h,a,u){Array.prototype.sort.call(this.o.subarray(h,a),u)},p.prototype.Tp=function(){return 1},p}();m.be=T}(ye||(ye={})),function(m){function j(p,h,a,u){a=new Int32Array(p.subarray(a,u)),p.set(a,h)}m.rY=function(){this.random=1973};var T=function(){function p(h){this.Pb=this.pk=!1,this.o=null;var a=h;2>a&&(a=2),this.o=new Int32Array(a),this.size=h}return p.prototype.rotate=function(h,a,u){if(this.Pb)throw m.i.fa("invalid_call");if(a<h||a>u||h>u)throw m.i.N();h!=a&&u!=a&&(this.ni(h,a-h,1),this.ni(a,u-a,1),this.ni(h,u-h,1))},p.qf=function(h,a){var u=new p(h),d=u.o;if(2>h&&(h=2),a!==0)for(var g=0;g<h;g++)d[g]=a;return u},p.Bn=function(h){var a=new p(0);return a.o=new Int32Array(h.o),a.size=h.size,a},p.Lr=function(h,a){var u=new p(0);return u.size=h.size,u.size>a&&(u.size=a),2>(a=u.size)&&(a=2),u.o=new Int32Array(a),u.o.set(h.o.length<=a?h.o:h.o.subarray(0,a),0),u},p.prototype.Jb=function(h){0>=h||(this.o==null?this.o=new Int32Array(h):h<=this.o.length||(0<this.o.length?((h=new Int32Array(h)).set(this.o),this.o=h):this.o=new Int32Array(h)))},p.prototype.read=function(h){return this.o[h]},p.prototype.tc=function(h,a){a.x=this.o[h],a.y=this.o[h+1]},p.prototype.get=function(h){return this.o[h]},p.prototype.write=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.set=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.Tt=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.add=function(h){this.resize(this.size+1),this.o[this.size-1]=h},p.prototype.GB=function(h){return p.Lr(this,h)},p.prototype.eg=function(h){return this.read(h)},p.prototype.resize=function(h,a){if(a===void 0&&(a=0),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(h<=this.size){if(30<this.o.length&&5*h/4<this.o.length){var u=new Int32Array(this.o,0,h);this.o=u}}else{h>this.o.length&&(u=m.O.truncate(64>h?Math.max(2*h,4):5*h/4),(u=new Int32Array(u)).set(this.o),this.o=u),u=this.o;for(var d=this.size;d<h;d++)u[d]=a}this.size=h},p.prototype.Bh=function(h){if((this.o==null||h>this.o.length)&&this.resize(h),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=h},p.prototype.pr=function(h,a){this.write(h,a)},p.prototype.An=function(h,a,u){for(var d=this.size;a<d&&a<u;a++)h=m.O.Th(this.read(a),h);return h},p.prototype.Nb=function(h,a,u){if(h==null||!(h instanceof p))return!1;var d=this.size,g=h.size;if(u>d||u>g&&d!=g)return!1;for(u>d&&(u=d);a<u;a++)if(this.read(a)!=h.read(a))return!1;return!0},p.prototype.addRange=function(h,a,u,d,g){if(this.Pb)throw m.i.Hb();if(!d&&(1>g||u%g!=0))throw m.i.N();var v=this.size;if(this.resize(v+u),d)this.o.set(h.o.subarray(a,a+u),v);else{d=u;for(var b=0;b<u;b+=g){d-=g;for(var C=0;C<g;C++)this.o[v+b+C]=h.o[a+d+C]}}},p.prototype.Mn=function(h,a,u,d,g,v,b){if(this.Pb)throw m.i.Hb();if(!g&&(1>v||d%v!=0))throw m.i.N();if(j(this.o,h+d,h,h+(b-h)),this.o==a.o&&h<u&&(u+=d),g)this.o.set(a.o.subarray(u,u+d),h);else for(g=d,b=0;b<d;b+=v){g-=v;for(var C=0;C<v;C++)this.o[h+b+C]=a.o[u+g+C]}},p.prototype.Iz=function(h,a,u,d,g,v){if(this.Pb)throw m.i.Hb();if(0>v&&(v=this.size),this.size+2*d>this.o.length?this.resize(this.size+2*d):this.size+=2*d,j(this.o,h+2*d,h,h+(v-h)),g)for(g=0;g<d;g++)v=a[u++],this.o[h++]=v.x,this.o[h++]=v.y;else{g=0;for(var b=d-1;g<d;++g)v=a[u+b],this.o[h++]=v.x,this.o[h++]=v.y,b--}},p.prototype.Ln=function(h,a,u,d){if(this.Pb)throw m.i.Hb();for(d-=h,j(this.o,h+d,h,h+d),d=0;d<u;d++)this.o[h+d]=a},p.prototype.vj=function(h,a,u){if(this.Pb)throw m.i.Hb();j(this.o,h+2,h,h+(u-h)),this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.Ut=function(h,a,u,d,g,v){if(0>h||0>a||0>d||!g&&(0>=v||a%v!=0)||u.size<d+a)throw m.i.N();if(a!=0)if(this.size<a+h&&this.resize(a+h),u==this)this.Ar(h,a,d,g,v);else if(g)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d++;else if(d=d+a-v,v==1)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d--;else for(g=0,a=m.O.truncate(a/v);g<a;g++){for(var b=0;b<v;b++)this.o[h+b]=u.o[d+b];h+=v,d-=v}},p.prototype.En=function(h,a,u){if(this.Pb||h+a>this.size)throw m.i.Hb();0<u-(h+a)&&j(this.o,h,h+a,h+(u-(h+a))+a),this.size-=a},p.prototype.ni=function(h,a,u){if(this.Pb||1>u||a%u!=0)throw m.i.Hb();for(var d=a>>1,g=0;g<d;g+=u){a-=u;for(var v=0;v<u;v++){var b=this.o[h+g+v];this.o[h+g+v]=this.o[h+a+v],this.o[h+a+v]=b}}},p.prototype.Wj=function(h,a,u){if(0>a||0>u||0>a||u+a>this.size)throw m.i.N();for(var d=a;d<a+u;d++)this.o[d]=h},p.prototype.Ar=function(h,a,u,d,g){if(!(d&&h==u||(this.o.set(this.o.subarray(u,u+a),h),d)))for(u=h,h=h+a-g,d=0,a=m.O.truncate(a/2);d<a;d++){for(var v=0;v<g;v++){var b=this.o[u+v];this.o[u+v]=this.o[h+v],this.o[h+v]=b}u+=g,h-=g}},p.prototype.vC=function(h,a,u,d,g){if(0>h||0>a||0>d)throw m.i.N();if(a!=0)for(this.size<(a<<1)+h&&this.resize((a<<1)+h),g||(h+=a-1<<1),g=g?2:-2,a+=d;d<a;d++)this.o[h]=u[d].x,this.o[h+1]=u[d].y,h+=g},p.prototype.Vw=function(h,a,u,d,g){if(0>h||0>a||0>d||this.size<a+h)throw m.i.N();if(g)for(g=0;g<a;g++)u[d+g]=this.o[h+g];else for(d=d+a-1;h<a;h++)u[d]=this.o[h],d--},p.prototype.clear=function(h){h?this.resize(0):this.Bh(0)},p.prototype.ix=function(){this.pk=this.Pb=!0},p.prototype.Vd=function(h,a,u){10>a-h?p.rG(this.o,h,a,u):p.qB(this.o,h,a-1,u)},p.prototype.Tp=function(){return 2},p.prototype.Fc=function(){return this.o[this.size-1]},p.prototype.If=function(){this.resize(this.size-1)},p.prototype.bX=function(h){this.o[this.size-1]=h},p.prototype.SV=function(h){h<this.size-1&&(this.o[h]=this.o[this.size-1]),this.resize(this.size-1)},p.prototype.lF=function(h){for(var a=0,u=this.size;a<u;a++)if(this.o[a]==h)return a;return-1},p.prototype.hG=function(h){return 0<=this.lF(h)},p.rG=function(h,a,u,d){for(var g=a;g<u;g++){for(var v=h[g],b=g-1;b>=a&&0<d(h[b],v);)h[b+1]=h[b],b--;h[b+1]=v}},p.tx=function(h,a,u){var d=h[u];h[u]=h[a],h[a]=d},p.qB=function(h,a,u,d){if(!(a>=u))for(;;){if(9>u-a){p.rG(h,a,u+1,d);break}var g=h[a];p.tx(h,a,u);for(var v=a,b=a;b<u;b++)0>=d(h[b],g)&&(p.tx(h,v,b),v+=1);p.tx(h,v,u),v-a<u-v?(p.qB(h,a,v-1,d),a=v+1):(p.qB(h,v+1,u,d),u=v-1)}},p}();m.ia=T}(ye||(ye={})),function(m){function j(p,h,a,u){a=new Int8Array(p.subarray(a,u)),p.set(a,h)}var T=function(){function p(h){this.o=null;var a=h;2>a&&(a=2),this.o=new Int8Array(a),this.size=h}return p.prototype.rotate=function(h,a,u){if(this.Pb)throw m.i.fa("invalid_call");if(a<h||a>u||h>u)throw m.i.N();h!=a&&u!=a&&(this.ni(h,a-h,1),this.ni(a,u-a,1),this.ni(h,u-h,1))},p.qf=function(h,a){var u=new p(h),d=u.o;if(2>h&&(h=2),a!==0)for(var g=0;g<h;g++)d[g]=a;return u},p.Bn=function(h){var a=new p(0);return a.o=new Int8Array(h.o),a.size=h.size,a},p.Lr=function(h,a){var u=new p(0);return u.size=h.size,u.size>a&&(u.size=a),2>(a=u.size)&&(a=2),u.o=new Int8Array(a),u.o.set(h.o.length<=a?h.o:h.o.subarray(0,a),0),u},p.prototype.Jb=function(h){0>=h||(this.o==null?this.o=new Int8Array(h):h<=this.o.length||(0<this.o.length?((h=new Int8Array(h)).set(this.o),this.o=h):this.o=new Int8Array(h)))},p.prototype.read=function(h){return this.o[h]},p.prototype.tc=function(h,a){a.x=this.o[h],a.y=this.o[h+1]},p.prototype.get=function(h){return this.o[h]},p.prototype.write=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.set=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a},p.prototype.Tt=function(h,a){if(this.Pb)throw m.i.Hb();this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.add=function(h){this.resize(this.size+1),this.o[this.size-1]=h},p.prototype.GB=function(h){return p.Lr(this,h)},p.prototype.eg=function(h){return this.read(h)},p.prototype.resize=function(h,a){if(a===void 0&&(a=0),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(h<=this.size){if(30<this.o.length&&5*h/4<this.o.length){var u=new Int8Array(this.o,0,h);this.o=u}}else{h>this.o.length&&(u=m.O.truncate(64>h?Math.max(2*h,4):5*h/4),(u=new Int8Array(u)).set(this.o),this.o=u),u=this.o;for(var d=this.size;d<h;d++)u[d]=a}this.size=h},p.prototype.Bh=function(h){if((this.o==null||h>this.o.length)&&this.resize(h),this.pk)throw m.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=h},p.prototype.pr=function(h,a){this.write(h,a)},p.prototype.An=function(h,a,u){for(var d=this.size;a<d&&a<u;a++)h=m.O.Th(this.read(a),h);return h},p.prototype.Nb=function(h,a,u){if(h==null||!(h instanceof p))return!1;var d=this.size,g=h.size;if(u>d||u>g&&d!=g)return!1;for(u>d&&(u=d);a<u;a++)if(this.read(a)!=h.read(a))return!1;return!0},p.prototype.addRange=function(h,a,u,d,g){if(this.Pb)throw m.i.Hb();if(!d&&(1>g||u%g!=0))throw m.i.N();var v=this.size;if(this.resize(v+u),d)this.o.set(h.o.subarray(a,a+u),v);else{d=u;for(var b=0;b<u;b+=g){d-=g;for(var C=0;C<g;C++)this.o[v+b+C]=h.o[a+d+C]}}},p.prototype.Mn=function(h,a,u,d,g,v,b){if(this.Pb)throw m.i.Hb();if(!g&&(1>v||d%v!=0))throw m.i.N();if(j(this.o,h+d,h,h+(b-h)),this.o==a.o&&h<u&&(u+=d),g)this.o.set(a.o.subarray(u,u+d),h);else for(g=d,b=0;b<d;b+=v){g-=v;for(var C=0;C<v;C++)this.o[h+b+C]=a.o[u+g+C]}},p.prototype.Ln=function(h,a,u,d){if(this.Pb)throw m.i.Hb();for(d-=h,j(this.o,h+d,h,h+d),d=0;d<u;d++)this.o[h+d]=a},p.prototype.Iz=function(h,a,u,d,g,v){if(this.Pb)throw m.i.Hb();if(0>v&&(v=this.size),this.size+2*d>this.o.length?this.resize(this.size+2*d):this.size+=2*d,j(this.o,h+2*d,h,h+(v-h)),g)for(g=0;g<d;g++)v=a[u++],this.o[h++]=v.x,this.o[h++]=v.y;else{g=0;for(var b=d-1;g<d;++g)v=a[u+b],this.o[h++]=v.x,this.o[h++]=v.y,b--}},p.prototype.vj=function(h,a,u){if(this.Pb)throw m.i.Hb();j(this.o,h+2,h,h+(u-h)),this.o[h]=a.x,this.o[h+1]=a.y},p.prototype.Ut=function(h,a,u,d,g,v){if(0>h||0>a||0>d||!g&&(0>=v||a%v!=0)||u.size<d+a)throw m.i.N();if(a!=0)if(this.size<a+h&&this.resize(a+h),u==this)this.Ar(h,a,d,g,v);else if(g)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d++;else if(d=d+a-v,v==1)for(g=0;g<a;g++)this.o[h]=u.o[d],h++,d--;else for(g=0,a=m.O.truncate(a/v);g<a;g++){for(var b=0;b<v;b++)this.o[h+b]=u.o[d+b];h+=v,d-=v}},p.prototype.En=function(h,a,u){if(this.Pb||h+a>this.size)throw m.i.Hb();0<u-(h+a)&&j(this.o,h,h+a,h+(u-(h+a))+a),this.size-=a},p.prototype.ni=function(h,a,u){if(this.Pb||1>u||a%u!=0)throw m.i.Hb();for(var d=a>>1,g=0;g<d;g+=u){a-=u;for(var v=0;v<u;v++){var b=this.o[h+g+v];this.o[h+g+v]=this.o[h+a+v],this.o[h+a+v]=b}}},p.prototype.Wj=function(h,a,u){if(0>a||0>u||0>a||u+a>this.size)throw m.i.N();for(var d=a;d<a+u;d++)this.o[d]=h},p.prototype.Ar=function(h,a,u,d,g){if(!(d&&h==u||(this.o.set(this.o.subarray(u,u+a),h),d)))for(u=h,h=h+a-g,d=0,a=m.O.truncate(a/2);d<a;d++){for(var v=0;v<g;v++){var b=this.o[u+v];this.o[u+v]=this.o[h+v],this.o[h+v]=b}u+=g,h-=g}},p.prototype.vC=function(h,a,u,d,g){if(0>h||0>a||0>d)throw m.i.N();if(a!=0)for(this.size<(a<<1)+h&&this.resize((a<<1)+h),g||(h+=a-1<<1),g=g?2:-2,a+=d;d<a;d++)this.o[h]=u[d].x,this.o[h+1]=u[d].y,h+=g},p.prototype.Vw=function(h,a,u,d,g){if(0>h||0>a||0>d||this.size<a+h)throw m.i.N();if(g)for(g=0;g<a;g++)u[d+g]=this.o[h+g];else for(d=d+a-1;h<a;h++)u[d]=this.o[h],d--},p.prototype.clear=function(h){h?this.resize(0):this.Bh(0)},p.prototype.ix=function(){this.pk=this.Pb=!0},p.prototype.Vd=function(h,a,u){a=this.o.subarray(h,a),Array.prototype.sort.call(a,u),this.o.set(a,h)},p.prototype.zJ=function(h,a){if(this.Pb)throw m.i.fa("invalid call. Attribute Stream is read only.");this.o[h]|=a},p.prototype.KE=function(h,a){if(this.Pb)throw m.i.fa("invalid call. Attribute Stream is read only.");this.o[h]&=~a},p.prototype.Tp=function(){return 1},p}();m.pn=T}(ye||(ye={})),function(m){m.Yc=function(){function j(){}return j.Mr=function(T,p){return m.pn.qf(T,p)},j.Dn=function(T,p){return m.be.qf(T,p)},j.pP=function(T,p,h){switch(T){case 1:T=m.be.qf(p,h);break;case 2:T=m.ia.qf(p,h);break;case 4:T=m.pn.qf(p,h);break;default:throw m.i.Qa()}return T},j.YE=function(T,p){return j.pP(m.ra.Tp(T),p*m.ra.Va(T),m.ra.se(T))},j.Oh=function(T,p){return m.ia.qf(T,p)},j.qI=function(T){var p,h=[];for(p=0;p<T;p++)h.push(null);return h},j}()}(ye||(ye={})),function(m){m.ga=function(j){j===void 0&&(j=0),this.u=j}}(ye||(ye={})),function(m){m.NL=function(){function j(){}return j.bind=function(T){m.Sc=T.PeDefs,m.pf=T.PeFactory,m.NC=T.PeVertcs,m.ej=T.PeCSTransformations,m.MC=T.PeGTTransformations,m.LL=T.PeGeogtran,m.KL=T.PeFactoryCodechange,m.LC=T.PeGCSExtent,m.Cg=T.PePCSInfo,m.ML=T.PeHorizon,m.JL=T.PeCoordsys,m.lp=T.PeGTlistExtended,m.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,m.pf.initialize(null),m.Mx=T.PeGTlistExtendedEntry,m.pf.fromString(m.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},j}(),m.pf=null,m.NC=null,m.JL=null,m.ML=null,m.Cg=null,m.lp=null,m.Mx=null,m.LC=null,m.KL=null,m.LL=null,m.Sc=null,m.MC=null,m.ej=null}(ye||(ye={})),function(m){var j=function(){function T(){}return T.Mb=function(p,h){return 0<=h?T.P(p):-T.P(p)},T.P=function(p){return 0>p?-p:p},T.ti=function(p){return 3552713678800501e-30>p},T.KC=function(p,h,a){return T.P(p-h)<=a*(1+(T.P(p)+T.P(h))/2)},T.Y=function(p,h){return T.KC(p,h,3552713678800501e-30)},T.FL=function(p){return 3552713678800501e-30>=T.P(p)},T.Cd=function(p){return T.FL(p)},T}();m.s=j,m.F=function(){function T(){}return T.gp=function(p,h){var a=0;return(p=j.P(p))+(h=j.P(h))!=0&&(p>h?(a=h/p,a=p*Math.sqrt(1+a*a)):(a=p/h,a=h*Math.sqrt(1+a*a))),a},T.Wq=function(p,h,a,u,d){for(var g=[0,0,0],v=[0,0,0],b=0;2>=b;b++)h[b]-=p[b],a[b]-=h[b];a=g[1]*v[2]-g[2]*v[1],h=g[2]*v[0]-g[0]*v[2],g=g[0]*v[1]-g[1]*v[0],p=-1*(a*p[0]+h*p[1]+g*p[2]),u[0]=a,u[1]=h,u[2]=g,u[3]=p,v=T.on(u),u[0]/=v,u[1]/=v,u[2]/=v,u[3]/=v,d!=0&&(v=j.Cd(g)?j.Cd(p)?j.Mb(1,h):-j.Mb(1,p):j.Mb(1,g),v*=j.Mb(1,d),u[0]*=v,u[1]*=v,u[2]*=v,u[3]*=v)},T.zx=function(p,h,a){a[0]=p[1]*h[2]-h[1]*p[2],a[1]=p[2]*h[0]-h[2]*p[0],a[2]=p[0]*h[1]-h[0]*p[1]},T.St=function(p,h){return p[0]*h[0]+p[1]*h[1]+p[2]*h[2]},T.on=function(p){return T.gp(T.gp(p[0],p[1]),p[2])},T.cl=function(p,h,a,u,d,g,v,b){p=T.n(p,h,a);var C=Math.cos(a);g.u=(p+d)*C*Math.cos(u),v.u=(p+d)*C*Math.sin(u),b.u=(p*(1-h)+d)*Math.sin(a)},T.jO=function(p,h,a,u,d,g,v){var b=T.gp(h,a),C=1*Math.sqrt(1-p),M=C/1;if(j.Y(b,0))g.u=0,d.u=j.Mb(1.570796326794897,u),v.u=j.P(u)-C;else{g.u=Math.atan2(a,h),a=Math.atan2(1*u,C*b),g=Math.cos(a);var O=Math.sin(a);h=C*p/(1-p),p*=1,a=Math.atan2(u+h*O*O*O,b-p*g*g*g),3.141592653589793<j.P(a)&&(a=j.Mb(3.141592653589793,a)-a),a=Math.atan(M*Math.tan(a)),O=Math.sin(a),g=Math.cos(a),d.u=Math.atan2(u+h*O*O*O,b-p*g*g*g),1.570796326794897<j.P(d.u)&&(d.u=j.Mb(3.141592653589793,d.u)-d.u),a=Math.atan(M*Math.tan(d.u)),O=Math.sin(a),g=Math.cos(a),v.u=(u-C*O)*Math.sin(d.u)+(b-1*g)*Math.cos(d.u)}},T.n=function(p,h,a){return a=Math.sin(a),p/Math.sqrt(1-h*a*a)},T.ot=function(p,h){return Math.atan2(Math.sin(h)*(1-p),Math.cos(h))},T.Qj=function(p,h){return Math.atan2(Math.sin(h),Math.cos(h)*(1-p))},T.Rq=function(p,h){if(j.ti(p)||h==0||j.Y(j.P(h),1.570796326794897))return h;if(.006884661117170036>p){var a=Math.sqrt(1-p),u=(1-a)/(1+a),d=u*u,g=u*d,v=u*g,b=u*v,C=u*b,M=u*C,O=1.572916666666667*g-3.2578125*b+4.295068359375*M;p=2.142578125*v-6.071484375*C,a=3.129296875*b-11.249837239583334*M;var L=4.775276692708333*C,q=7.958636765252976*M,U=Math.cos(2*h);return h+Math.sin(2*h)*(1.5*u-.84375*g+.525390625*b-.2688395182291667*M-O+a-q+U*(2*(1.3125*d-1.71875*v+1.650146484375*C)-4*p+6*L+U*(4*O-12*a+24*q+U*(8*p-32*L+U*(16*a-80*q+U*(32*L+64*U*q))))))}for(a=1-p,u=p/2,g=(d=j.P(h))*T.Zu(p)/(1.570796326794897*a),v=9999,C=d,d=0;1e-16<v&&50>d;d++)M=T.w(p,C),b=C-(O=(b=(T.kG(C,p)-u*Math.sin(2*C)/M)/a-g)/(M=1/(M*M*M))),v=j.P(O),C=b;return 0<=h?C:-C},T.qW=function(p,h){return j.ti(h)?p:p*T.Zu(h)/1.570796326794897},T.ba=function(p){return 0>(p=T.pF(p,6.283185307179586))?p+6.283185307179586:3.141592653589793>j.P(p)||j.Y(j.P(p),3.141592653589793)?p:p-6.283185307179586},T.pF=function(p,h){return p-Math.floor(p/h)*h},T.Ah=function(p,h){if(.006884661117170036>h){var a=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h,u=a*a;return p/(1+h)*(1+.25*a+.015625*u+.00390625*a*u)*1.570796326794897}return p*T.Zu(h)},T.Vq=function(p,h){var a=j.Mb(1,Math.sin(h));return h=1.570796326794897>=(h=j.P(T.pF(h,3.141592653589793)))?h:3.141592653589793-h,(j.Y(h,1.570796326794897)?h:Math.atan(Math.sqrt(1-p)*Math.tan(h)))*a},T.q=function(p,h,a){if(.006884661117170036>h){var u=(h=(1-(h=Math.sqrt(1-h)))/(1+h))*h,d=h*u,g=h*d,v=h*g,b=h*v,C=h*b,M=-.7291666666666666*d+.2278645833333333*v+.03987630208333334*C,O=.615234375*g-.21533203125*b,L=-.54140625*v+.20302734375*C,q=.48876953125*b,U=-.4488699776785715*C,ee=Math.cos(2*a);return p/(1+h)*((1+.25*u+.015625*g+.00390625*b)*a+Math.sin(2*a)*(-1.5*h+.1875*d+.0234375*v+.00732421875*C-M+L-U+ee*(2*(.9375*u-.234375*g-.03662109375*b)-4*O+6*q+ee*(4*M-12*L+24*U+ee*(8*O-32*q+ee*(16*L-80*U+ee*(32*q+64*ee*U)))))))}return p*(T.kG(a,h)-.5*h*Math.sin(2*a)/T.w(h,a))},T.w=function(p,h){return h=Math.sin(h),Math.sqrt(1-p*h*h)},T.Zu=function(p){return j.KC(p,1,2220446049250313e-31)?1:1>p?T.Xw(0,1-p)-p/3*T.Uw(0,1-p):NaN},T.kG=function(p,h){var a=j.Mb(1,p);p=j.P(p);var u=Math.floor(p/1.570796326794897);if(1<h)h=p==0?0:NaN;else if(j.Cd(u))h=(p=T.sin(p))*T.Xw(1-p*p,1-h*p*p)-h/3*p*p*p*T.Uw(1-p*p,1-h*p*p);else{var d=m.O.truncate(u%2),g=T.Zu(h);0<d?(p=1.570796326794897*(u+1)-p,h=g*(u+1)-(h=(p=Math.sin(p))*T.Xw(1-p*p,1-h*p*p)-h/3*p*p*p*T.Uw(1-p*p,1-h*p*p))):(p-=1.570796326794897*u,h=g*u+(h=(p=Math.sin(p))*T.Xw(1-p*p,1-h*p*p)-h/3*p*p*p*T.Uw(1-p*p,1-h*p*p)))}return h*a},T.sin=function(p){p=T.ba(p);var h=j.Mb(1,p);return p=j.P(p),j.Y(p,3.141592653589793)?0:j.Y(p,1.570796326794897)?1*h:Math.sin(p)*h},T.Uw=function(p,h){var a,u,d,g,v=p,b=h,C=1;for(h=0,p=1;u=((a=.2*(v+b+3*C))-v)/a,d=(a-b)/a,g=(a-C)/a,!(1e-4>j.P(u)&&1e-4>j.P(d)&&1e-4>j.P(g));)g=Math.sqrt(b),h+=p/((a=Math.sqrt(C))*(C+(g=Math.sqrt(v)*(g+a)+g*a))),p*=.25,v=.25*(v+g),b=.25*(b+g),C=.25*(C+g);return b=(v=u*d)-(C=g*g),3*h+p*(1+(C=v-6*C)*(.10227272727272728*C-.2142857142857143-.1730769230769231*g*(u=C+b+b))+g*(.1666666666666667*u+g*(-.4090909090909091*b+.1153846153846154*g*v)))/(a*Math.sqrt(a))},T.Xw=function(p,h){for(var a,u,d,g,v=1;u=2-((a=(p+h+v)/3)+p)/a,d=2-(a+h)/a,g=2-(a+v)/a,!(1e-4>j.P(u)&&1e-4>j.P(d)&&1e-4>j.P(g));v=.25*(v+a))a=Math.sqrt(h),u=Math.sqrt(v),p=.25*(p+(a=Math.sqrt(p)*(a+u)+a*u)),h=.25*(h+a);return(1+(.04166666666666666*(p=u*d-g*g)-.1-.06818181818181818*(h=u*d*g))*p+.07142857142857142*h)/Math.sqrt(a)},T.Qw=function(p,h){if(j.ti(p)||h==0||j.Y(j.P(h),1.570796326794897))return h;if(.006884661117170036>p){var a=p*p,u=p*a,d=p*u,g=p*d,v=p*g,b=p*v,C=-(.02708333333333333*u+.03430059523809524*d+.03149181547619048*g+.02634359154541446*v+.02156896735835538*b),M=.007669890873015873*d+.01299603174603175*g+.0148051353064374*v+.01454454953803912*b,O=-(.002275545634920635*g+.004830845032667949*v+.006558395368616723*b),L=.0006957236677288761*v+.001775193002406544*b,q=-.000217324089394402*b,U=Math.cos(2*h);return h+Math.sin(2*h)*(-(.5*p+.2083333333333333*a+.09375*u+.04878472222222222*d+.02916666666666667*g+.01938905423280423*v+.01388255931712963*b)-C+O-q+U*(2*(.1041666666666667*a+.0875*u+.06050347222222222*d+.04151785714285714*g+.02958958540013228*v+.02203667534722222*b)-4*M+6*L+U*(4*C-12*O+24*q+U*(8*M-32*L+U*(16*O-80*q+U*(32*L+64*U*q))))))}return h==0||j.Y(j.P(h),1.570796326794897)?a=h:(d=(u=Math.sqrt(p))*Math.sin(h),a=Math.tan(.7853981633974483+h/2)*Math.pow((1-d)/(1+d),u/2),a=2*Math.atan(a)-1.570796326794897),a},T.yO=function(p,h){if(j.ti(p)||h==0||j.Y(j.P(h),1.570796326794897))return h;if(.006884661117170036>p){var a=p*(L=p*(O=p*(U=p*p))),u=p*(q=p*a),d=.05833333333333333*O+.07232142857142858*L+.05634300595238095*a+.0355325796406526*q+.020235546186067*u,g=.02653149801587302*L+.04379960317460317*a+.0429211791776896*q+.03255384637546096*u,v=.01294022817460318*a+.02668104344536636*q+.03155651254609588*u,b=.00659454790965208*q+.0163075268674227*u,C=.003463473736911237*u,M=Math.cos(2*h);return h+Math.sin(2*h)*(.5*p+.2083333333333333*U+.08333333333333333*O+.03611111111111111*L+.01875*a+.01195601851851852*q+.008863673941798942*u-d+v-C+M*(2*(.1458333333333333*U+.1208333333333333*O+.07039930555555556*L+.03616071428571429*a+.01839451058201058*q+.01017113095238095*u)-4*g+6*b+M*(4*d-12*v+24*C+M*(8*g-32*b+M*(16*v-80*C+M*(32*b+64*M*C))))))}var O=Math.sqrt(p),L=O/2,q=Math.tan(.7853981633974483+h/2);p=0,d=1;for(var U=h;d!=0;U=u)a=O*Math.sin(U),u=q*Math.pow((1+a)/(1-a),L),u=2*Math.atan(u)-1.570796326794897,p++,(j.Y(u,U)||3e4<p)&&(d=0);return U},T}()}(ye||(ye={})),function(m){var j=function(){function T(p){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new m.h,this.XH=new m.h,this.KA=!1,this.vq=new m.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=p,this.As=m.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var h=p.getCode();0<h?(this.Kk=h,m.pf.getCode(p)):this.Kk=m.pf.getCode(p),0>this.Kk&&(this.Kk=0);var a=this.Ue.getType();if(this.jH=a==m.Sc.PE_TYPE_PROJCS?2:1,a==m.Sc.PE_TYPE_PROJCS&&!p.loadConstants())throw m.i.N("PeProjcs.loadConstants failed");h=a==m.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),a!=m.Sc.PE_TYPE_GEOGCS&&m.pf.getCode(h),this.Eo=p.getUnit(),this.RH=h.getPrimem().getLongitude(),this.wH=p=h.getUnit().getUnitFactor(),p=Math.PI/(180*p),1e-10>Math.abs(p-1)&&(p=1),this.GA=p,a&m.Sc.PE_TYPE_PROJCS?(h=this.Ue,this.HA=1/h.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=m.Cg.generate(h,m.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=m.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,a=1/h.getUnit().getUnitFactor(),this.sw=.001/h.getDatum().getSpheroid().getAxis()*a,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return T.prototype.$r=function(){return this.Kk},T.prototype.kk=function(){return this.tw},T.Py=function(p,h){return p==h||p!=null&&h!=null&&p.Kk==0&&h.Kk==0&&p.As===h.As},T.prototype.Wc=function(){return this.zl},T.prototype.gh=function(p){p.K(this.so)},T.prototype.pv=function(){return this.so.v},T.prototype.ov=function(){return this.so.C},T.prototype.GR=function(p){p.K(this.uw)},T.prototype.lY=function(){var p=this.Ue.getType();if(p==m.Sc.PE_TYPE_PROJCS){p=this.Ue;var h=this.kk().getCentralMeridian(),a=p.getGeogcs();if(a==null)throw m.i.fa("internal error");h=[[h+(a=1/a.getUnit().getUnitFactor()*Math.PI),0]],m.ej.geogToProj(p,1,h),h=h[0][0],a=p.getParameters()[m.Sc.PE_PARM_X0].getValue();var u=this.ml();p=new m.l,u.A(p),h=(u=Math.abs(h-a))+a,a=-1*u+a,u=p.H,p=p.G;var d=new m.l;d.K(a,p,h,u),this.so==null&&(this.so=d)}else{if(p!=m.Sc.PE_TYPE_GEOGCS)throw m.i.fa("internal error");a=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(p=new m.l).K(-a,-a/2,a,a/2),this.so==null&&(this.so=p)}},T.prototype.mY=function(){var p=this.Ue.getType();if(p==m.Sc.PE_TYPE_PROJCS){var h=this.Ue;if(p=this.kk().getCentralMeridian(),(h=h.getGeogcs())==null)throw m.i.fa("internal error");h=1/h.getUnit().getUnitFactor()*Math.PI;var a=this.Vr(),u=new m.l;a.A(u),(a=new m.l).K(p-h,u.G,p+h,u.H),this.uw==null&&(this.uw=a)}else{if(p!=m.Sc.PE_TYPE_GEOGCS)throw m.i.fa("internal error");h=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(p=new m.l).K(-h,-h/2,h,h/2),this.uw==null&&(this.uw=p)}},T.prototype.bf=function(){return this.GA},T.prototype.pm=function(){return this.HA},T.prototype.Vr=function(){if(this.zl)return this.ul;var p=this.ul;return p??(this.xx(),this.ul)},T.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},T.prototype.xx=function(){if(this.Ue.getType()==m.Sc.PE_TYPE_PROJCS){var p=this.Ue,h=p.getGeogcs(),a=p.horizonGcsGenerate();if(a!=null){var u=a[0].getNump(),d=a[0].getKind();p=0<a[0].getInclusive();var g=this.bf(),v=90*g,b=360*g,C=370*g,M=180*g*m.Sc.PE_HORIZON_DELTA/Math.PI,O=new m.l,L=null;if(1<u){for(var q=1;q<u;q++)if(a[q].getKind()==m.Sc.PE_HORIZON_LINE){L==null&&(L=new m.Ta);var U=a[q].getCoord();L.sx(U[0][0],U[0][1]),L.yj(U[1][0],U[1][1])}}if(d==m.Sc.PE_HORIZON_RECT)a=a[0].getCoord(),O.K(a[0][0],a[0][1]),O.Zb(a[1][0],a[1][1]),Math.abs(O.H-v)<1e-7*M&&(O.H=v),Math.abs(O.G+v)<1e-7*M&&(O.G=-v),O.R()>C&&(a=-400*g,O.K(a,O.G,a+5*b,O.H)),a=new m.Fh(O),this.ul==null&&(this.ul=a,this.Iv=p);else{if(C=new m.Da,b=this.kk().isGcsHorizonMultiOverlap(),O=m.gu.bF(h,m.hu.Integer64),b){for(C=new m.gL,M=m.Gh.local().V(C,O,null),q=0;q<u;q++)if(a[q].getKind()==m.Sc.PE_HORIZON_POLY){for(h=a[q].getSize(),g=a[q].getCoord(),d=[],v=0;v<h;v++)d[v]=m.h.construct(g[v][0],g[v][1]);a[q].getInclusive(),b&&((g=new m.Da).Yk(d,h-1),C.ZX(g),M.qe())}C=M.next()}else for(q=0;q<u;q++)if(a[q].getKind()==m.Sc.PE_HORIZON_POLY){for(h=a[q].getSize(),g=a[q].getCoord(),b=[],v=0;v<h;v++)b[v]=m.h.construct(g[v][0],g[v][1]);a[q].getInclusive(),C.Yk(b,h-1)}p?m.Xj.local().wn(C,O,1):m.kp.local().wn(C,O,1),m.dj.local().wn(C,O,1),this.ul==null&&(this.ul=C,this.Iv=p,this.YG=L)}}}},T.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},T.prototype.DK=function(){if(this.jH==2){var p=this.Ue.horizonPcsGenerate();if(p!=null){var h=p[0].getKind();p[0].getInclusive();var a=p[0].getNump(),u=!1;if(h==m.Sc.PE_HORIZON_RECT)p=p[0].getCoord(),(a=new m.l).K(p[0][0],p[0][1]),a.Zb(p[1][0],p[1][1]),p=new m.Fh(a);else{for(h=-1,u=0;u<a;u++)p[u].getKind()==m.Sc.PE_HORIZON_POLY&&(h=u);for(u=p[h].getSize()-1,p=p[h].getCoord(),a=[],h=0;h<u;h++)a[h]=m.h.construct(p[h][0],p[h][1]);p=h=new m.Da,h.Yk(a,u),u=!0}this.kk().isDensificationNeeded()&&(a=1e5*this.pm(),p=m.Xl.local().V(p,a,null)),u&&(u=new m.Fh,p.bn(u),p.Ke(),p.Qb(),p.qR(),m.Xj.local().wn(p,null,1)),this.Us==null&&(this.Us=p)}}},T.prototype.ml=function(){if(this.zl)return this.Us;var p=this.Us;return p??(this.DK(),this.Us)},T.prototype.nY=function(){if(this.Ue.getType()==m.Sc.PE_TYPE_PROJCS){var p=90*this.bf();p=[[0,p],[0,-p]],m.ej.geogToProj(this.Ue,2,p);var h=this.kk(),a=h.getNorthPoleLocation()!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY;h=h.getSouthPoleLocation()!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(a&&this.HH.ma(p[0][0],p[0][1]),h&&this.XH.ma(p[1][0],p[1][1]))}this.KA=!0},T.prototype.CK=function(){if(this.jH==1){var p=400*this.bf();this.vq.K(-p,-p,p,p)}else p=m.Cg.generate(this.Ue,m.Cg.PE_PCSINFO_OPTION_DOMAIN),p=m.l.construct(p.getDomainMinx(),p.getDomainMiny(),p.getDomainMaxx(),p.getDomainMaxy()),this.vq.B()&&this.vq.K(p)},T.prototype.hR=function(p){this.zl&&p.K(this.vq),this.vq.B()&&this.CK(),p.K(this.vq)},T.prototype.Up=function(){return this.RH},T.prototype.zi=function(){return this.bA},T.prototype.Hd=function(){return this.Eo},T.prototype.Xr=function(){return this.wH},T}();m.OC=j}(ye||(ye={})),function(m){var j=function(){function T(p){this.KT=p,this.As=m.zb.xv(p,0,!0);var h=p.getCode();this.ss=0<h?h:m.pf.getCode(p),0>this.ss&&(this.ss=0),this.Eo=h=this.KT.getUnit(),this.IH=1/h.getUnitFactor(),m.pf.getCode(p)}return T.Py=function(p,h){return p==h||p!=null&&h!=null&&p.ss==0&&h.ss==0&&p.As===h.As},T.prototype.$r=function(){return this.ss},T}();m.PL=j}(ye||(ye={})),function(m){m.Yg=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v){if(d!=null||g!=null||v!=null){a=m.F.ba(a),p=m.F.ba(p),h=m.F.ba(h),u=m.F.ba(u),1.570796326794897<m.s.P(h)&&(h=m.s.Mb(3.141592653589793,h)-h,p=m.F.ba(p+3.141592653589793)),1.570796326794897<m.s.P(u)&&(u=m.s.Mb(3.141592653589793,u)-u,a=m.F.ba(a+3.141592653589793));var b=m.F.ba(a-p);if(m.s.Y(h,u)&&(m.s.Y(p,a)||m.s.Y(m.s.P(h),1.570796326794897)))d!=null&&(d.u=0),g!=null&&(g.u=0),v!=null&&(v.u=0);else{if(m.s.Y(h,-u)){if(m.s.Y(m.s.P(h),1.570796326794897))return d!=null&&(d.u=3.141592653589793*T),g!=null&&(g.u=0<h?m.F.ba(3.141592653589793-m.F.ba(a)):m.F.ba(a)),void(v!=null&&(v.u=0<h?m.F.ba(a):m.F.ba(3.141592653589793-m.F.ba(a))));if(m.s.Y(m.s.P(b),3.141592653589793))return d!=null&&(d.u=3.141592653589793*T),g!=null&&(g.u=0),void(v!=null&&(v.u=0))}var C=m.s.P(h)==1.570796326794897?0:Math.cos(h),M=Math.sin(h),O=m.s.P(u)==1.570796326794897?0:Math.cos(u),L=Math.sin(u),q=m.s.P(b)==1.570796326794897?0:Math.cos(b),U=m.s.P(b)==3.141592653589793?0:Math.sin(b);if(d!=null){var ee=Math.sin((u-h)/2);b=Math.sin(b/2),d.u=2*Math.asin(Math.sqrt(ee*ee+C*O*b*b))*T}g!=null&&(g.u=m.s.Y(m.s.P(h),1.570796326794897)?0>h?a:m.F.ba(3.141592653589793-a):Math.atan2(O*U,C*L-M*O*q)),v!=null&&(m.s.Y(m.s.P(u),1.570796326794897)?v.u=0>u?p:m.F.ba(3.141592653589793-p):(v.u=Math.atan2(C*U,L*C*q-O*M),v.u=m.F.ba(v.u+3.141592653589793)))}}},j.rf=function(T,p,h,a,u,d,g){if(d!=null||g!=null){p=m.F.ba(p),h=m.F.ba(h),1.570796326794897<m.s.P(h)&&(h=m.s.Mb(3.141592653589793,h)-h,p=m.F.ba(p+3.141592653589793)),m.s.Y(m.s.P(h),1.570796326794897)&&(p=0),u=m.F.ba(u);var v=m.s.Y(m.s.P(u),1.570796326794897)?0:Math.cos(u),b=m.s.Y(m.s.P(u),3.141592653589793)?0:Math.sin(u),C=m.s.Y(m.s.P(h),1.570796326794897)?0:Math.cos(h),M=Math.sin(h);T=a/T,a=m.s.Y(m.s.P(T),1.570796326794897)?0:Math.cos(T);var O=m.s.Y(m.s.P(T),3.141592653589793)?0:Math.sin(T),L=Math.asin(M*a+C*O*v);g!=null&&(g.u=L),d!=null&&(d.u=m.s.Y(m.s.P(L),1.570796326794897)?m.s.Y(h,-L)?0>L?u:m.F.ba(3.141592653589793-u):p:m.s.Y(m.s.P(h),1.570796326794897)&&m.s.Y(T,3.141592653589793)?0>h?u:m.F.ba(3.141592653589793-u):m.F.ba(p+Math.atan2(O*b,C*a-M*O*v)))}},j}()}(ye||(ye={})),function(m){m.Wk=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v,b){var C=new m.ga(0),M=new m.ga(0),O=[0,0,0],L=[0,0,0],q=[0,0,0],U=new m.ga(0),ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0),ve=new m.ga(0);if(g!=null||v!=null||b!=null)if(m.s.ti(p))m.Yg.tb(T,h,a,u,d,g,v,b);else{u=m.F.ba(u),h=m.F.ba(h);var fe=m.F.ba(u-h);if(m.s.Y(a,d)&&(m.s.Y(h,u)||m.s.Y(m.s.P(a),1.570796326794897)))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.Y(a,-d)){if(m.s.Y(m.s.P(a),1.570796326794897))return g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0<a?m.F.ba(3.141592653589793-m.F.ba(u)):m.F.ba(u)),void(b!=null&&(b.u=0<a?m.F.ba(u):m.F.ba(3.141592653589793-m.F.ba(u))));m.s.Y(m.s.P(fe),3.141592653589793)&&(g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0),b!=null&&(b.u=0))}else(m.s.Y(m.s.P(a),1.570796326794897)||m.s.Y(m.s.P(d),1.570796326794897))&&(m.s.Y(m.s.P(a),1.570796326794897)?h=u:u=h);var Ce=0;if(0>fe){Ce=1;var Ie=h;h=u,u=Ie,Ie=a,a=d,d=Ie}fe=m.F.ot(p,a);var Ne=m.F.ot(p,d);v==null&&b==null||(m.Yg.tb(T,h,fe,u,Ne,null,C,M),C=Math.atan2(Math.sin(C.u)*Math.cos(a-fe),Math.cos(C.u)),M=Math.atan2(Math.sin(M.u)*Math.cos(d-Ne),Math.cos(M.u)),Ce!=0&&(Ie=C,C=M,M=Ie),v!=null&&(v.u=C),b!=null&&(b.u=M)),g!=null&&(m.F.cl(1,p,a,h,0,Q,ge,ve),O[0]=Q.u,O[1]=ge.u,O[2]=ve.u,m.F.cl(1,p,d,u,0,Q,ge,ve),L[0]=Q.u,L[1]=ge.u,L[2]=ve.u,q[0]=O[1]*L[2]-L[1]*O[2],q[1]=-(O[0]*L[2]-L[0]*O[2]),q[2]=O[0]*L[1]-L[0]*O[1],p=1-m.F.w(p,m.F.Vq(p,m.F.Qj(p,Math.acos(q[2]/Math.sqrt(q[0]*q[0]+q[1]*q[1]+q[2]*q[2]))))),p*=2-p,v=Math.atan2(-q[1],-q[0]),q=m.F.ba(v-1.570796326794897),v=m.F.ba(v+1.570796326794897),q=m.s.P(m.F.ba(h-q))<=m.s.P(m.F.ba(h-v))?q:v,m.Yg.tb(1,q,0,h,fe,U,null,null),m.Yg.tb(1,q,0,u,Ne,ee,null,null),3.141592653589793<U.u+ee.u&&(q=m.F.ba(q+3.141592653589793),m.Yg.tb(1,q,0,h,fe,U,null,null),m.Yg.tb(1,q,0,u,Ne,ee,null,null)),U.u*=m.s.Mb(1,a),ee.u*=m.s.Mb(1,d),U.u=m.F.Qj(p,U.u),ee.u=m.F.Qj(p,ee.u),h=m.F.q(T,p,U.u),T=m.F.q(T,p,ee.u),g.u=m.s.P(T-h))}}},j.rf=function(T,p,h,a,u,d,g,v){var b=0,C=new m.ga(0),M=new m.ga(0),O=[0,0,0],L=[0,0,0],q=new m.ga(0),U=new m.ga(0),ee=new m.ga(0);if(g!=null||v!=null)if(m.s.ti(p))m.Yg.rf(T,h,a,u,d,g,v);else if(m.s.Cd(u))g!=null&&(g.u=h),v!=null&&(v.u=a);else if(d=m.F.ba(d),0>u&&(u=m.s.P(u),d=m.F.ba(d+3.141592653589793)),h=m.F.ba(h),a=m.F.ba(a),1.570796326794897<m.s.P(a)&&(h=m.F.ba(h+3.141592653589793),a=m.s.Mb(3.141592653589793,a)-a),m.s.Y(m.s.P(a),1.570796326794897)&&(h=0),m.s.Cd(a)){var Q=m.s.P(1.570796326794897-m.s.P(d));Q=m.F.Qj(p,Q),Q=1-m.F.w(p,m.F.Vq(p,Q)),Q*=2-Q,T=u/m.F.Ah(T,Q)*1.570796326794897,T=m.F.Rq(Q,T),T=m.F.ot(Q,T),m.Yg.rf(1,h,a,T,d,g,C),v!=null&&(b=C.u),v!=null&&(v.u=m.F.Qj(p,b))}else if(m.s.Y(m.s.P(a),1.570796326794897))C=2*(b=m.F.Ah(T,p)),d=0<(T=m.s.Mb(1.570796326794897,a))?m.F.ba(3.141592653589793-d):d,a=b-u,m.s.P(a)<=b?g!=null&&(g.u=d):(a=Math.floor(u/C),m.O.truncate(a%2)==0?(g!=null&&(g.u=d),u-=a*C):(g!=null&&(g.u=m.F.ba(d+3.141592653589793)),u=(a+1)*C-u),a=b-u),v!=null&&(v.u=m.F.Rq(p,a/b*T));else{Q=m.F.ot(p,a),d=Math.atan2(Math.sin(d),Math.cos(d)*Math.cos(a-Q));var ge=m.O.truncate(m.s.Mb(1,Q))*(1.570796326794897>=m.s.P(d)?1:-1);d=m.F.ba(h+Math.atan(Math.tan(d)*-Math.sin(Q))),m.Yg.tb(T,d,0,h,Q,null,M,null),Q=m.s.P(1.570796326794897-m.s.P(M.u)),Q=m.F.Qj(p,Q),Q=1-m.F.w(p,m.F.Vq(p,Q)),Q*=2-Q,m.F.cl(1,p,0,d,0,q,U,ee),O[0]=q.u,O[1]=U.u,O[2]=ee.u,m.F.cl(1,p,a,h,0,q,U,ee),L[0]=q.u,L[1]=U.u,L[2]=ee.u,a=Math.acos((O[0]*L[0]+O[1]*L[1]+O[2]*L[2])/Math.sqrt(L[0]*L[0]+L[1]*L[1]+L[2]*L[2])),a=m.F.Qj(Q,a),u=0<(a=m.F.q(T,Q,a)+u*ge)?M.u:m.F.ba(M.u+3.141592653589793),T=m.s.P(a)/m.F.Ah(T,Q)*1.570796326794897,T=m.F.Rq(Q,T),T=m.F.ot(Q,T),m.Yg.rf(1,d,0,T,u,g,C),v!=null&&(b=C.u),v!=null&&(v.u=m.F.Qj(p,b))}},j}()}(ye||(ye={})),function(m){m.cu=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v,b){var C=0,M=0,O=0;if(g!=null||v!=null||b!=null)if(m.s.ti(p))m.Yg.tb(T,h,a,u,d,g,v,b);else{var L=m.F.ba(u-h);if(m.s.Y(a,d)&&(m.s.Cd(L)||m.s.Y(m.s.P(a),1.570796326794897)))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.Y(a,-d)){if(m.s.Y(m.s.P(a),1.570796326794897))return g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0<a?m.F.ba(3.141592653589793-m.F.ba(u)):m.F.ba(u)),void(b!=null&&(b.u=0<a?m.F.ba(u):m.F.ba(3.141592653589793-m.F.ba(u))));m.s.Y(m.s.P(L),3.141592653589793)&&(g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0),b!=null&&(b.u=0))}else if(m.s.Y(m.s.P(a),1.570796326794897)||m.s.Y(m.s.P(d),1.570796326794897)||m.s.Cd(L)||m.s.Y(m.s.P(L),3.141592653589793))return void m.Wk.tb(T,p,h,a,u,d,g,v,b);var q=1-Math.sqrt(1-p),U=p/(1-p),ee=T*(1-q);T=m.F.Vq(p,a);var Q=m.F.Vq(p,d);p=m.s.P(T)==1.570796326794897?0:Math.cos(T);var ge=Math.sin(T),ve=m.s.P(Q)==1.570796326794897?0:Math.cos(Q),fe=Math.sin(Q),Ce=L,Ie=Math.cos(Ce),Ne=Math.sin(Ce),Ve=1,Xe=0;do{var et=Ce,dt=Math.sqrt(Math.pow(ve*Ne,2)+Math.pow(p*fe-ge*ve*Ie,2)),ut=ge*fe+p*ve*Ie,mt=Math.atan2(dt,ut);if(dt==0){Ve=0;break}var lt=p*ve*Ne/dt;if(C=Math.cos(Math.asin(lt)),M=ut-2*ge*fe/(C*=C),1<m.s.P(M)&&(M=m.s.Mb(1,M)),Ce=L+(1-(Ce=q/16*C*(4+q*(4-3*C))))*q*lt*(mt+Ce*dt*(M+Ce*ut*(2*(O=M*M)-1))),Ie=Math.cos(Ce),Ne=Math.sin(Ce),Xe++,3.141592653589793<m.s.P(Ce)&&30<Xe){Ve=0;break}}while(5e3>=Xe&&!m.s.Y(et,Ce));if(Ve!=0)q=(U*=C)*(256+U*(U*(74-47*U)-128))/1024,g!=null&&(g.u=ee*(1+U*(4096+U*(U*(320-175*U)-768))/16384)*(mt-q*dt*(M+q/4*(ut*(2*O-1)-q/6*M*(4*dt*dt-3)*(4*O-3))))),v!=null&&(v.u=m.s.Y(m.s.P(a),1.570796326794897)?0>a?u:m.F.ba(3.141592653589793-u):Math.atan2(ve*Ne,p*fe-ge*ve*Ie)),b!=null&&(m.s.Y(m.s.P(d),1.570796326794897)?b.u=0>d?h:m.F.ba(3.141592653589793-h):(b.u=Math.atan2(p*Ne,p*fe*Ie-ge*ve),b.u=m.F.ba(b.u+3.141592653589793)));else{Ce=m.s.Mb(3.141592653589793,L),ut=ge*fe-p*ve,mt=Math.acos(ut),dt=Math.sin(mt),C=1,Xe=lt=0;do O=lt,Ie=1-.25*(lt=q*(C*=C)*(1+q+q*q))+.1875*(M=q*q*(Ie=C*C)*(1+2.25*q))-.1953125*(Ve=q*q*q*Ie*C),lt=.25*lt-.25*M+.29296875*Ve,Ne=.03125*M-.05859375*Ve,Ve*=.00651041666666667,M=ut-2*ge*fe/C,1<m.s.P(M)&&(M=m.s.Mb(1,M)),C=Math.acos(M),ut=Math.cos(2*C),et=Math.cos(3*C),Ne=(lt=m.s.Y(a,-d)?m.F.ba(3.141592653589793-L)/(3.141592653589793*q*Ie):m.F.ba(Ce-L)/(q*(Ie*mt+lt*dt*M+Ne*Math.sin(2*mt)*ut+Ve*Math.sin(3*mt)*et)))*dt/(p*ve),Ce=1.570796326794897<m.s.P(L)?m.s.Mb(3.141592653589793,Ne)-Math.asin(Ne):Math.asin(Ne),Ie=Math.cos(Ce),dt=Math.sqrt(Math.pow(ve*Ne,2)+Math.pow(p*fe-ge*ve*Ie,2)),mt=3.141592653589793-Math.asin(m.s.P(dt)),ut=Math.cos(mt),C=Math.cos(Math.asin(lt)),Xe++;while(70>=Xe&&!m.s.Y(O,lt));g!=null&&(Ie=1+(U*=C*=C)*(4096+U*(U*(320-175*U)-768))/16384,m.s.Y(a,-d)?g.u=3.141592653589793*ee*Ie:(M=ut-2*ge*fe/C,C=Math.acos(M),ut=Math.cos(2*C),et=Math.cos(3*C),g.u=ee*(Ie*mt+U*(U*(128+U*(35*U-60))-512)/2048*dt*M+U*(5*U-4)/6144*U*U*Math.sin(2*mt)*ut+Ve*Math.sin(3*mt)*et+-762939453125e-16*U*U*U*U*Math.sin(4*mt)*Math.cos(4*C)))),v!=null&&(m.s.Cd(a)&&m.s.Cd(d)?(C=Math.sqrt(1-lt*lt),v.u=Math.acos(C),0>L&&(v.u*=-1)):m.s.Y(m.s.P(a),1.570796326794897)?v.u=0>a?u:m.F.ba(3.141592653589793-u):(g=lt/p,ee=Math.sqrt(1-g*g),0>p*fe-ge*ve*Math.cos(Ce)&&(ee*=-1),v.u=Math.atan2(g,ee),m.s.Y(a,-d)&&m.s.P(m.F.ba(h-u))>3.141592653589793*(1-q*Math.cos(a))&&(0<a&&1.570796326794897>m.s.P(v.u)||0>a&&1.570796326794897<m.s.P(v.u))&&(v.u=m.s.Mb(3.141592653589793,v.u)-v.u))),b!=null&&(m.s.Cd(a)&&m.s.Cd(d)?(C=Math.sqrt(1-lt*lt),b.u=Math.acos(C),0<=L&&(b.u*=-1)):m.s.Y(m.s.P(d),1.570796326794897)?b.u=0>d?h:m.F.ba(3.141592653589793-h):(L=lt/ve,g=Math.sqrt(1-L*L),ee=Math.sin(Ce/2),0>Math.sin(Q-T)-2*p*fe*ee*ee&&(g*=-1),b.u=Math.atan2(L,g),b.u=m.F.ba(b.u+3.141592653589793),m.s.Y(a,-d)&&!m.s.Cd(a)&&!m.s.Y(m.s.P(a),1.570796326794897)&&m.s.P(m.F.ba(h-u))>3.141592653589793*(1-q*Math.cos(a))&&(v!=null?ee=v.u:(g=lt/p,ee=Math.sqrt(1-g*g),0>p*fe-ge*ve*Math.cos(Ce)&&(ee*=-1),ee=Math.atan2(g,ee),m.s.Y(a,-d)&&m.s.P(m.F.ba(h-u))>3.141592653589793*(1-q*Math.cos(a))&&(0<a&&1.570796326794897>m.s.P(ee)||0>a&&1.570796326794897<m.s.P(ee))&&(ee=m.s.Mb(3.141592653589793,ee)-ee)),1.570796326794897>=m.s.P(ee)&&1.570796326794897<m.s.P(b.u)||1.570796326794897<=m.s.P(ee)&&1.570796326794897>m.s.P(b.u))&&(b.u=-1*m.F.ba(b.u+3.141592653589793))))}}}},j.rf=function(T,p,h,a,u,d,g,v){if(g!=null||v!=null)if(m.s.ti(p))m.Yg.rf(T,h,a,u,d,g,v);else if(d=m.F.ba(d),m.s.Y(m.s.P(a),1.570796326794897)||m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))m.Wk.rf(T,p,h,a,u,d,g,v);else{var b=m.s.P(d)==1.570796326794897?0:Math.cos(d),C=m.s.P(d)==3.141592653589793?0:Math.sin(d);m.s.Y(m.s.P(a),1.570796326794897)&&(h=0),d=1-Math.sqrt(1-p);var M=m.F.Vq(p,a);a=m.s.P(M)==1.570796326794897?0:Math.cos(M);var O=Math.sin(M);M=Math.atan2(Math.tan(M),b);var L=a*C,q=L*L,U=1-q,ee=p/(1-p)*U,Q=(p=ee*(256+ee*(ee*(74-47*ee)-128))/1024)/4,ge=p/6,ve=u/(T*(1-d)*(1+ee*(4096+ee*(ee*(320-175*ee)-768))/16384)),fe=ve;do{var Ce=fe;u=m.s.P(fe)==1.570796326794897?0:Math.cos(fe);var Ie=(ee=m.s.P(fe)==3.141592653589793?0:Math.sin(fe))*ee;fe=p*ee*((T=Math.cos(2*M+fe))+Q*(u*(2*(fe=T*T)-1)-ge*T*(4*Ie-3)*(4*fe-3)))+ve}while(!m.s.Y(Ce,fe));u=m.s.P(fe)==1.570796326794897?0:Math.cos(fe),ee=m.s.P(fe)==3.141592653589793?0:Math.sin(fe),g!=null&&(C=Math.atan2(ee*C,a*u-O*ee*b),U=d/16*U*(4+d*(4-3*U)),T=Math.cos(2*M+fe),g.u=m.F.ba(h+(C-(1-U)*d*L*(fe+U*ee*(T+U*u*(2*T*T-1)))))),v!=null&&(U=O*ee-a*u*b,U=(1-d)*Math.sqrt(q+U*U),v.u=Math.atan2(O*u+a*ee*b,U))}},j}()}(ye||(ye={})),function(m){m.PC=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v,b){var C=m.F.ba(u-h),M=m.s.Y(m.s.P(a),1.570796326794897),O=m.s.Y(m.s.P(d),1.570796326794897);if(m.s.Y(a,d)&&(m.s.Cd(C)||M))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.ti(p)){var L=Math.sin(a),q=Math.sin(d);L=Math.sqrt((1+L)/(1-L)),q=Math.sqrt((1+q)/(1-q)),L=Math.log(q)-Math.log(L),L=Math.atan2(C,L),g!=null&&(g.u=m.s.Y(a,d)?m.s.P(T*Math.cos(a)*C):m.s.P((T*d-T*a)/Math.cos(L)))}else q=m.F.Qw(p,d),L=Math.sin(m.F.Qw(p,a)),q=Math.sin(q),L=Math.sqrt((1+L)/(1-L)),q=Math.sqrt((1+q)/(1-q)),L=Math.log(q)-Math.log(L),L=Math.atan2(C,L),g!=null&&(m.s.Y(a,d)?g.u=m.s.P(T*C*Math.cos(a)/m.F.w(p,a)):(C=m.F.q(T,p,a),T=m.F.q(T,p,d),g.u=m.s.P((T-C)/Math.cos(L))));v==null&&b==null||(g=m.F.ba(L+3.141592653589793),M&&O||!M&&!O||(M?L=0>a?u:m.F.ba(3.141592653589793-u):O&&(g=0>d?h:m.F.ba(3.141592653589793-h))),v!=null&&(v.u=L),b!=null&&(b.u=g))}},j.rf=function(T,p,h,a,u,d,g,v){d=m.F.ba(d),0>u&&(u=m.s.P(u),d=m.F.ba(d+3.141592653589793)),m.s.ti(p)?m.s.Y(m.s.P(a),1.570796326794897)?(h=0>a?d:m.F.ba(3.141592653589793-d),3.141592653589793>=(d=u/T%6.283185307179586)?T=a-m.s.Mb(d,a):(h=m.F.ba(h+3.141592653589793),T=-a+m.s.Mb(d-3.141592653589793,a))):m.s.Y(m.s.P(d),1.570796326794897)?(h=m.F.ba(h+m.s.Mb(u,d)/(T*Math.cos(a))),T=a):(T=a+u*Math.cos(d)/T,1.570796326794897<m.s.P(T)&&(T=1.570796326794897),m.s.Y(m.s.P(T),1.570796326794897)&&(m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))||(1.570796316258184<m.s.P(T)&&(T=m.s.Mb(1.570796316258184,T)),p=Math.sin(a),a=Math.sin(T),p=Math.sqrt((1+p)/(1-p)),a=Math.sqrt((1+a)/(1-a)),p=Math.log(a)-Math.log(p),h=m.F.ba(h+Math.tan(d)*p))):m.s.Y(m.s.P(a),1.570796326794897)?(h=0>a?d:m.F.ba(3.141592653589793-d),d=u/m.F.qW(T,p),3.141592653589793>=(d%=6.283185307179586)?T=a-m.s.Mb(d,a):(h=m.F.ba(h+3.141592653589793),T=-a+m.s.Mb(d-3.141592653589793,a)),T=m.F.Rq(p,T)):m.s.Y(m.s.P(d),1.570796326794897)?(h=m.F.ba(h+m.s.Mb(u,d)*m.F.w(p,a)/(T*Math.cos(a))),T=a):(T=1.570796326794897*(u*Math.cos(d)+m.F.q(T,p,a))/m.F.Ah(T,p),1.570796326794897<m.s.P(T)&&(T=m.s.Mb(1.570796326794897,T)),T=m.F.Rq(p,T),m.s.Y(m.s.P(T),1.570796326794897)&&(m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))||(u=m.F.Qw(p,a),a=m.F.Qw(p,T),1.570796316258184<m.s.P(a)&&(a=m.s.Mb(1.570796316258184,T),T=m.F.yO(p,a)),p=Math.sin(u),a=Math.sin(a),p=Math.sqrt((1+p)/(1-p)),a=Math.sqrt((1+a)/(1-a)),p=Math.log(a)-Math.log(p),h=m.F.ba(h+Math.tan(d)*p))),g!=null&&(g.u=h),v!=null&&(v.u=T)},j}()}(ye||(ye={})),function(m){m.kb=function(){function j(){}return j.Xy=function(T,p,h,a,u,d,g){m.cu.tb(T,p,h,a,u,d,null,g,null)},j.yi=function(T,p,h,a,u,d,g,v){m.cu.rf(T,p,h,a,u,d,g,v)},j.wd=function(T,p,h,a,u,d,g,v,b,C){switch(C){case 2:m.Wk.tb(T,p,h,a,u,d,g,v,b);break;case 3:m.QC.tb(T,p,h,a,u,d,g,v,b);break;case 1:m.PC.tb(T,p,h,a,u,d,g,v,b);break;default:m.cu.tb(T,p,h,a,u,d,g,v,b)}},j.oj=function(T,p,h,a,u,d,g,v,b){switch(b){case 2:m.Wk.rf(T,p,h,a,u,d,g,v);break;case 3:m.QC.rf(T,p,h,a,u,d,g,v);break;case 1:m.PC.rf(T,p,h,a,u,d,g,v);break;default:m.cu.rf(T,p,h,a,u,d,g,v)}},j}()}(ye||(ye={})),function(m){var j=function(){function p(){this.y=this.x=null}return p.construct=function(h){var a=new p;return a.x=new m.Wb,a.x.set(h.x),a.y=new m.Wb,a.y.set(h.y),a},p.VE=function(h,a){var u=new p;return u.x=new m.Wb,u.x.set(h),u.y=new m.Wb,u.y.set(a),u},p.prototype.qg=function(){return this.x.qg()&&this.y.qg()},p.prototype.value=function(){return m.h.construct(this.x.value(),this.y.value())},p}();m.vY=j;var T=function(){function p(){this.z=this.y=this.x=null}return p.construct=function(h){var a=new p;return a.x=new m.Wb,a.x.set(h.x),a.y=new m.Wb,a.y.set(h.y),a.z=new m.Wb,a.z.set(h.z),a},p.VE=function(h,a,u){var d=new p;return d.x=new m.Wb,d.x.set(h),d.y=new m.Wb,d.y.set(a),d.z=new m.Wb,d.z.set(u),d},p.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},p.prototype.value=function(){return new m.Nd(this.x.value(),this.y.value(),this.z.value())},p.prototype.Qh=function(h){var a=new m.Wb,u=new m.Wb,d=new m.Wb;return a.Kl(this.x,h.x),u.Kl(this.y,h.y),d.Kl(this.z,h.z),(h=new m.Wb).dN(a,u),h.add(d),h},p.prototype.cF=function(h){var a=new p;a.x.Kl(this.y,h.z),a.y.Kl(this.z,h.x),a.z.Kl(this.x,h.y);var u=new m.Wb,d=new m.Wb,g=new m.Wb;return u.Kl(this.z,h.y),d.Kl(this.x,h.z),g.Kl(this.y,h.x),a.x.sub(u),a.y.sub(d),a.z.sub(g),a},p}();m.wY=T,m.Ox=function(){function p(){}return p.EP=function(h,a,u){var d=a.x;a=a.y,p.cl(1,h,Math.cos(d),Math.sin(d),Math.cos(a),Math.sin(a),u)},p.DP=function(h,a){var u=new m.Nd;return p.EP(h,a,u),u},p.cl=function(h,a,u,d,g,v,b){h/=Math.sqrt(1-a*v*v),b.K(h*g*u,h*g*d,h*(1-a)*v)},p.Yu=function(h,a){var u=new m.Wb,d=new m.Wb,g=new m.Wb,v=new m.Wb;u.cos(a.x),d.sin(a.x),g.cos(a.y),v.sin(a.y);var b=new m.Wb;return b.set(v),b.Ag(v),b.No(h),b.No(-1),b.kN(),b.sqrt(),(a=new m.Wb).set(1),a.jm(b),(b=new m.Wb).set(a),b.Ag(g),b.Ag(u),(u=new m.Wb).set(a),u.Ag(g),u.Ag(d),(d=new m.Wb).set(a),d.No(1-h),d.Ag(v),T.VE(b,u,d)},p.SS=function(h,a,u,d){if(Math.abs(a.x-u.x)>Math.PI||Math.abs(a.y)>.5*Math.PI||Math.abs(u.y)>.5*Math.PI||(Math.abs(a.y)==.5*Math.PI||Math.abs(u.y)==.5*Math.PI)&&a.x!=u.x)return NaN;if(d=p.cB(d,Math.min(a.x,u.x),Math.max(a.x,u.x)),!new m.Nc(a.x,u.x).contains(d))return NaN;var g=j.construct(a);if(u=j.construct(u),g=p.Yu(h,g),u=p.Yu(h,u),(u=g.cF(u)).z.qg())return a.y;var v=new m.Wb;v.set(u.x),v.jm(u.z),v.No(-1);var b=new m.Wb;b.set(u.y),b.jm(u.z),b.No(-1);var C=new m.Wb;return C.set(b),C.Ag(b),(g=new m.Wb).set(v),g.Ag(v),g.add(C),g.sqrt(),g.qg()||v.qg()&&b.qg()?a.y:(a=Math.atan2(b.value(),v.value()),a=Math.atan2(g.value()*Math.cos(a-d),1-h),d=p.DP(h,m.h.construct(d,a)),h=new m.Nd(d.x,d.y,-d.z),d=u.value().Qh(d),h=u.value().Qh(h),Math.abs(h)<Math.abs(d)&&(a=-a),a)},p.Oz=function(h,a,u,d,g){if(g[0]=NaN,g[1]=NaN,Math.abs(a.x-u.x)>Math.PI||Math.abs(a.y)>.5*Math.PI||Math.abs(u.y)>.5*Math.PI||(Math.abs(a.y)==.5*Math.PI||Math.abs(u.y)==.5*Math.PI)&&a.x!=u.x||Math.abs(d)>=.5*Math.PI||0<a.y&&0<u.y&&a.y>d&&u.y>d||0>a.y&&0>u.y&&a.y<d&&u.y<d)return 0;var v=j.construct(a),b=j.construct(u);v=p.Yu(h,v),b=p.Yu(h,b);var C=v.cF(b);if(C.z.qg())return new m.Nc(a.y,u.y).contains(d)?(g[0]=a.x,1):0;(b=new m.Wb).set(C.x),b.jm(C.z),b.No(-1),(v=new m.Wb).set(C.y),v.jm(C.z),v.No(-1),(C=new m.Wb).set(v),C.Ag(v);var M=new m.Wb;return M.set(b),M.Ag(b),M.add(C),M.sqrt(),M.qg()||b.qg()&&v.qg()?d==0?(g[0]=a.x,g[1]=u.x,2):0:(h=(1-h)*Math.tan(d)/M.value(),1<Math.abs(h)?0:(h=Math.acos(h),C=Math.atan2(v.value(),b.value()),b=Math.min(a.x,u.x),v=Math.max(a.x,u.x),u=p.cB(C-h,b,v),h=d!=0?p.cB(C+h,b,v):u,d=0,b<=u&&u<=v&&(g[d]=u,d++),h!=u&&b<=h&&h<=v&&(g[d]=h,++d==2&&Math.abs(g[0]-a.x)>Math.abs(g[1]-a.x)&&(a=g[0],g[0]=g[1],g[1]=a)),d))},p.cB=function(h,a,u){return h>u?h-=2*(a=Math.ceil((h-u)/(2*Math.PI)))*Math.PI:h<a&&(h+=2*(a=Math.ceil((a-h)/(2*Math.PI)))*Math.PI),h},p}()}(ye||(ye={})),function(m){m.XK=function(){function j(){}return j.$X=function(T,p){var h=8,a=[0,0,0,0],u=new m.h;u.L(p),u.scale(m.cb.sc(T).Hd().Ec()==9102?1:m.cb.sc(T).Hd().ai/3.141592653589793*180),-180>u.x?(u.x-=u.x%360,-180>u.x&&(u.x+=360)):180<u.x&&(u.x-=u.x%360,180<u.x&&(u.x-=360)),90<u.y&&(u.y=90),-90>u.y&&(u.y=-90);for(var d=-180,g=180,v=(T=5*h)-1,b=(p=(T+31)/32)-1;0<=b;b--)for(var C=v-32*b,M=Math.min(32,T-32*b),O=1;O<M;O+=2){var L=.5*(g+d);u.x>=L?(a[b]|=1<<C,d=L):g=L,C-=2,v-=2}for(d=-90,g=90,v=T-2,b=p-1;0<=b;b--)for(C=v-32*b,M=Math.min(32,T-32*b),O=0;O<M;O+=2)L=.5*(g+d),u.y>=L?(a[b]|=1<<C,d=L):g=L,C-=2,v-=2;return j.$P(a,h,h)},j.$P=function(T,p,h){for(var a=[],u=0;u<p;u++)a[u]="";for(var d=u=0,g=0;g<p;g++){var v=T[u]>>d&31;if(31<(d+=5)){var b=37-d;v&=(1<<b)-1,d-=32,v|=(T[++u]&(1<<d)-1)<<b}a[p-1-g]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[v]}if(h>p)for(g=0;g<h-p;g++)a.push("0");else h<p&&(a.length=h);return a.join("")},j}()}(ye||(ye={})),function(m){var j={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},T={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};m.wr=function(){function p(){}return p.Sy=function(h){p.xp===!1&&p.yt();var a=p.FQ(h);if(a==-1){var u=p.Bx(h);u!=h&&(a=p.Sy(u))}return a==-1&&(u=p.FK(h))!=h&&(a=p.Sy(u)),a},p.FQ=function(h){return p.Fw[h]!==void 0?p.Fw[h]:-1},p.CQ=function(h){p.xp===!1&&p.yt();var a=p.nF(h);if(a==1e38){var u=p.Bx(h);if(u!=h&&(a=p.nF(u)),a==1e38)return 1e-10}return a},p.ZS=function(h){if(p.Is[h]!==void 0)return!0;var a=p.Bx(h);return a!=h&&p.Is[a]!==void 0},p.aT=function(h){if(p.xo[h]!==void 0)return!0;var a=p.Bx(h);return a!=h&&p.xo[a]!==void 0},p.nF=function(h){return p.xp===!1&&p.yt(),p.Is[h]!==void 0?p.Is[h]:p.xo[h]!==void 0?p.xo[h]:1e38},p.FK=function(h){return p.xp===!1&&p.yt(),p.WA[h]!==void 0?p.WA[h]:h},p.Bx=function(h){return p.xp===!1&&p.yt(),p.XA[h]!==void 0?p.XA[h]:h},p.yt=function(){for(var h,a=j,u=0;u<a.pcsid.length;u+=2)p.xo[a.pcsid[u]]=a.pcstol[2*a.pcsid[u+1]+1];for(u=0;u<a.pcsidc.length;u+=1)for(var d=(h=a.pcsidc[u])[0];d<=h[1];d++)p.xo[d]=a.pcstol[2*h[2]+1];for(u=0;u<a.gcsid.length;u+=2)p.Is[a.gcsid[u]]=a.gcstol[2*a.gcsid[u+1]+1];for(u=0;u<a.gcsidc.length;u+=1)for(d=(h=a.gcsidc[u])[0];d<=h[1];d++)p.xo[d]=a.gcstol[2*h[2]+1];for(u=0;u<T.c.length;u+=1)for(d=(h=T.c[u])[0];d<=h[1];d++)p.Fw[d]=h[2];for(u=0;u<T.nc.length;u+=2)p.Fw[T.nc[u]]=T.nc[u+1];for(T=null,u=0;u<a.newtoold.length;u+=2)p.WA[a.newtoold[u+1]]=a.newtoold[u],p.XA[a.newtoold[u]]=a.newtoold[u+1];j=null,p.xp=!0},p.xp=!1,p.Is=[],p.xo=[],p.WA=[],p.XA=[],p.Fw=[],p}()}(ye||(ye={})),function(m){function j(p){return p.length===0?'""':p[0]=='"'||p[0]=="."||"0"<=p[0]&&"9">=p[0]?p:'"'+p.trim()+'"'}var T=[];m.XC=function(){function p(){}return p.EQ=function(h){try{for(var a=0;a<T.length;a++)if(T[a].wkttext===h)return T[a].unit;for(var u,d=a="",g=!1,v=0;v<h.length;v++){var b=h[v];g===!0?b=='"'?h[v+1]=='"'?a+=b:g=g=!1:a+=b:/[\s]/.test(b)||(b==","?(d=a!==""?d+(j(a)+","):d+",",a=""):b==")"||b=="]"?(d=a!==""?d+(j(a)+"]}"):d+"]}",a=""):b=="("||b=="["?(d+='{ "entity": "'+a.toUpperCase().trim()+'", "values":[',a=""):b=='"'?(g=!0,a=""):a+=b)}u=JSON.parse(d);var C=p.mF(u);if(C===null)return null;for(u=null,b=0;b<C.values.length;b++)if(typeof C.values[b]=="object"&&(C.values[b].entity==="UNIT"||C.values[b].entity==="ANGLEUNIT"||C.values[b].entity==="LENGTHUNIT")){u=C.values[b];break}if(u===null)return null;var M=m.Tc.ZO(C.entity==="GEOGCS"||C.entity==="GEOGCRS"?1:0,u.values[1],u.values[2]);return T.push({wkttext:h,unit:M}),10<T.length&&T.shift(),M}catch{return null}},p.mF=function(h){if(h===null)return null;switch(h.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return h}for(var a=[],u=0;u<h.values.length;u++)if(typeof h.values[u]=="object"&&h.values[u].entity!==void 0)switch(h.values[u].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return h.values[u];default:a.push(h.values[u])}for(h=0;h<a.length;h++)if((u=p.mF(a[h]))!==null)return u;return null},p.DQ=function(h){var a=-1;if(h!=null&&0<h.length){var u=h.search(/PROJCR?S/);if(0<=u){var d=0;if(0<=(u=h.lastIndexOf("UNIT"))&&0<(u=h.indexOf(",",u+4))){u++;var g=h.indexOf("]",u+1);if(0<g)try{d=parseFloat(h.substring(u,g))}catch{d=0}}0<d&&(a=.001/d)}else if(0<=(u=h.search(/GEOGCR?S/))){var v=0;if(d=0,(u=h.indexOf("SPHEROID",u+6))===-1&&(u=h.indexOf("ELLIPSOID",u+7)),0<u&&0<(u=h.indexOf(",",u+8))){if(u++,0<(g=h.indexOf(",",u+1)))try{v=parseFloat(h.substring(u,g))}catch{v=0}if(0<v&&((u=h.lastIndexOf("ANGLEUNIT",g+1))===-1&&(u=h.lastIndexOf("UNIT",g+1)),0<=u&&0<(u=h.indexOf(",",u+4))&&(u++,0<(g=h.indexOf("]",u+1)))))try{d=parseFloat(h.substring(u,g))}catch{d=0}}0<v&&0<d&&(a=.001/(v*d))}}return a},p}()}(ye||(ye={})),function(m){var j;(j=m.eL||(m.eL={}))[j.NONE=0]="NONE",j[j.LINEAR=1]="LINEAR",j[j.ANGULAR=2]="ANGULAR",function(p){p[p.enumFloat=0]="enumFloat",p[p.enumDouble=1]="enumDouble",p[p.enumInt32=2]="enumInt32",p[p.enumInt64=3]="enumInt64",p[p.enumInt8=4]="enumInt8",p[p.enumInt16=5]="enumInt16"}(m.QL||(m.QL={})),function(p){p[p.POSITION=0]="POSITION",p[p.Z=1]="Z",p[p.M=2]="M",p[p.ID=3]="ID",p[p.NORMAL=4]="NORMAL",p[p.TEXTURE1D=5]="TEXTURE1D",p[p.TEXTURE2D=6]="TEXTURE2D",p[p.TEXTURE3D=7]="TEXTURE3D",p[p.ID2=8]="ID2",p[p.MAXSEMANTICS=10]="MAXSEMANTICS"}(m.Ih||(m.Ih={}));var T=function(){function p(h,a){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,a!==void 0){for(this.Aa=a.Aa,this.Oq=a.Oq,this.bg=a.bg.slice(0),this.uh=a.uh.slice(0),this.wl=a.wl,this.Vs=[],h=a=0;h<this.Aa;h++)this.Vs[h]=a,a+=p.Va(this.bg[h]);for(this.Oq=a,this.Ae=[],h=0;h<this.Aa;h++){a=p.Va(this.kd(h));for(var u=p.se(this.kd(h)),d=0;d<a;d++)this.Ae[this.Vs[h]+d]=u}}else this.Oq=this.Aa=0}return p.prototype.kd=function(h){if(0>h||h>this.Aa)throw m.i.N();return this.bg[h]},p.prototype.Pf=function(h){return this.uh[h]},p.lz=function(h){return p.JM[h]},p.Tp=function(h){return p.SM[h]},p.Va=function(h){return p.rM[h]},p.prototype.hasAttribute=function(h){return 0<=this.uh[h]},p.prototype.iG=function(){return this.hasAttribute(1)},p.se=function(h){return p.eD[h]},p.prototype.LR=function(h){return this.Vs[h]},p.DG=function(h,a){return p.eD[h]===a},p.prototype.Nb=function(h){return this===h},p.prototype.An=function(){for(var h=m.O.Th(this.bg[0]),a=1;a<this.Aa;a++)h=m.O.Th(this.bg[a],h);return h},p.prototype.$j=function(h){return this.Vs[h]},p.prototype.cc=function(){return this.wl},p.prototype.Ed=function(h){return this.bg[h]},p.eD=[0,0,NaN,0,0,0,0,0,0],p.JM=[1,1,1,0,2,1,1,1,0],p.SM=[1,1,1,2,0,0,0,0,2],p.rM=[2,1,1,1,3,1,2,3,2],p}();m.ra=T}(ye||(ye={})),function(m){function j(g,v,b){var C=v-(g=new d(g)).e,M=g.c;for(M.length>++v&&T(g,C,d.eu),M[0]?b?C=v:(M=g.c,C=g.e+C+1):++C;M.length<C;M.push(0));return C=g.e,b===1||b&&(v<=C||C<=h)?(0>g.Bd&&M[0]?"-":"")+(1<M.length?M[0]+"."+M.join("").slice(1):M[0])+(0>C?"e":"e+")+C:g.toString()}function T(g,v,b,C){var M=g.c,O=g.e+v+1;if(b===1?C=5<=M[O]:b===2?C=5<M[O]||M[O]==5&&(C||0>O||M[O+1]!==void 0||1&M[O-1]):b===3?C=C||M[O]!==void 0||0>O:(C=!1,b!==0&&p("!Big.RM!")),1>O||!M[0])C?(g.e=-v,g.c=[1]):g.c=[g.e=0];else{if(M.length=O--,C)for(;9<++M[O];)M[O]=0,O--||(++g.e,M.unshift(1));for(O=M.length;!M[--O];M.pop());}return g}function p(g){throw(g=Error(g)).name="BigError",g}var h=-7,a=21,u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,d=function(){function g(v){if(v instanceof g)this.Bd=v.Bd,this.e=v.e,this.c=v.c.slice();else{var b,C,M;for(v===0&&0>1/v?v="-0":u.test(v+="")||p(NaN),this.Bd=v.charAt(0)=="-"?(v=v.slice(1),-1):1,-1<(b=v.indexOf("."))&&(v=v.replace(".","")),0<(C=v.search(/e/i))?(0>b&&(b=C),b+=+v.slice(C+1),v=v.substring(0,C)):0>b&&(b=v.length),C=0;v.charAt(C)=="0";C++);if(C==(M=v.length))this.c=[this.e=0];else{for(;v.charAt(--M)=="0";);for(this.e=b-C-1,this.c=[],b=0;C<=M;this.c[b++]=+v.charAt(C++));}}}return g.prototype.abs=function(){var v=new g(this);return v.Bd=1,v},g.prototype.cmp=function(v){var b=this.c,C=(v=new g(v)).c,M=this.Bd,O=v.Bd,L=this.e,q=v.e;if(!b[0]||!C[0])return b[0]?M:C[0]?-O:0;if(M!=O)return M;if(v=0>M,L!=q)return L>(q^v)?1:-1;for(M=-1,O=(L=b.length)<(q=C.length)?L:q;++M<O;)if(b[M]!=C[M])return b[M]>(C[M]^v)?1:-1;return L==q?0:L>(q^v)?1:-1},g.prototype.jm=function(v){var b=this.c,C=(v=new g(v)).c,M=this.Bd==v.Bd?1:-1,O=g.rr;if((O!==~~O||0>O||1e6<O)&&p("!Big.DP!"),!b[0]||!C[0])return b[0]==C[0]&&p(NaN),C[0]||p(M/0),new g(0*M);var L,q,U=C.slice(),ee=L=C.length,Q=b.length,ge=b.slice(0,L),ve=ge.length,fe=v,Ce=fe.c=[],Ie=0,Ne=O+(fe.e=this.e-v.e)+1;for(fe.Bd=M,M=0>Ne?0:Ne,U.unshift(0);ve++<L;ge.push(0));do{for(q=0;10>q;q++){if(L!=(ve=ge.length))var Ve=L>ve?1:-1;else{var Xe=-1;for(Ve=0;++Xe<L;)if(C[Xe]!=ge[Xe]){Ve=C[Xe]>ge[Xe]?1:-1;break}}if(!(0>Ve))break;for(v=ve==L?C:U;ve;){if(ge[--ve]<v[ve]){for(Xe=ve;Xe&&!ge[--Xe];ge[Xe]=9);--ge[Xe],ge[ve]+=10}ge[ve]-=v[ve]}for(;!ge[0];ge.shift());}Ce[Ie++]=Ve?q:++q,ge[0]&&Ve?ge[ve]=b[ee]||0:ge=[b[ee]]}while((ee++<Q||ge[0]!==void 0)&&M--);return Ce[0]||Ie==1||(Ce.shift(),fe.e--),Ie>Ne&&T(fe,O,g.eu,ge[0]!==void 0),fe},g.prototype.fS=function(){return 0<this.cmp(0)},g.prototype.nT=function(){return 0>this.cmp(0)},g.prototype.jt=function(v){var b,C=this.Bd,M=(v=new g(v)).Bd;if(C!=M)return v.Bd=-M,this.tI(v);var O=this.c.slice(),L=this.e,q=v.c,U=v.e;if(!O[0]||!q[0])return q[0]?(v.Bd=-M,v):new g(O[0]?this:0);if(C=L-U){for((b=0>C)?(C=-C,L=O):(U=L,L=q),L.reverse(),M=C;M--;L.push(0));L.reverse()}else for(L=((b=O.length<q.length)?O:q).length,C=M=0;M<L;M++)if(O[M]!=q[M]){b=O[M]<q[M];break}if(b&&(L=O,O=q,q=L,v.Bd=-v.Bd),0<(M=(L=q.length)-(b=O.length)))for(;M--;O[b++]=0);for(M=b;L>C;){if(O[--L]<q[L]){for(b=L;b&&!O[--b];O[b]=9);--O[b],O[L]+=10}O[L]-=q[L]}for(;O[--M]==0;O.pop());for(;O[0]==0;)O.shift(),--U;return O[0]||(v.Bd=1,O=[U=0]),v.c=O,v.e=U,v},g.prototype.tI=function(v){var b=this.Bd,C=(v=new g(v)).Bd;if(b!=C)return v.Bd=-C,this.jt(v);C=this.e;var M=this.c,O=v.e,L=v.c;if(!M[0]||!L[0])return L[0]?v:new g(M[0]?this:0*b);if(M=M.slice(),b=C-O){for(0<b?(O=C,C=L):(b=-b,C=M),C.reverse();b--;C.push(0));C.reverse()}for(0>M.length-L.length&&(C=L,L=M,M=C),b=L.length,C=0;b;)C=(M[--b]=M[b]+L[b]+C)/10|0,M[b]%=10;for(C&&(M.unshift(C),++O),b=M.length;M[--b]==0;M.pop());return v.c=M,v.e=O,v},g.prototype.pow=function(v){var b=this,C=new g(1),M=C,O=0>v;for((v!==~~v||-1e6>v||1e6<v)&&p("!pow!"),v=O?-v:v;1&v&&(M=M.lr(b)),v>>=1;)b=b.lr(b);return O?C.jm(M):M},g.prototype.round=function(v,b){var C=this;return v==null?v=0:(v!==~~v||0>v||1e6<v)&&p("!round!"),T(C=new g(C),v,b??g.eu),C},g.prototype.sqrt=function(){var v=this.c,b=this.Bd,C=this.e,M=new g("0.5");if(!v[0])return new g(this);0>b&&p(NaN),(b=Math.sqrt(this.toString()))==0||b==1/0?((b=v.join("")).length+C&1||(b+="0"),(v=new g(Math.sqrt(b).toString())).e=((C+1)/2|0)-(0>C||1&C)):v=new g(b.toString()),b=v.e+(g.rr+=4);do C=v,v=M.lr(C.tI(this.jm(C)));while(C.c.slice(0,b).join("")!==v.c.slice(0,b).join(""));return T(v,g.rr-=4,g.eu),v},g.prototype.lr=function(v){var b=this.c,C=(v=new g(v)).c,M=b.length,O=C.length,L=this.e,q=v.e;if(v.Bd=this.Bd==v.Bd?1:-1,!b[0]||!C[0])return new g(0*v.Bd);if(v.e=L+q,M<O){var U=b;b=C,C=U,q=M,M=O,O=q}for(U=Array(q=M+O);q--;U[q]=0);for(L=O;L--;){for(O=0,q=M+L;q>L;)O=U[q]+C[L]*b[q-L-1]+O,U[q--]=O%10,O=O/10|0;U[q]=(U[q]+O)%10}for(O&&++v.e,U[0]||U.shift(),L=U.length;!U[--L];U.pop());return v.c=U,v},g.prototype.toString=function(){var v=this.e,b=this.c.join(""),C=b.length;if(v<=h||v>=a)b=b.charAt(0)+(1<C?"."+b.slice(1):"")+(0>v?"e":"e+")+v;else if(0>v){for(;++v;b="0"+b);b="0."+b}else if(0<v)if(++v>C)for(v-=C;v--;b+="0");else v<C&&(b=b.slice(0,v)+"."+b.slice(v));else 1<C&&(b=b.charAt(0)+"."+b.slice(1));return 0>this.Bd&&this.c[0]?"-"+b:b},g.prototype.toExponential=function(v){return v==null?v=this.c.length-1:(v!==~~v||0>v||1e6<v)&&p("!toExp!"),j(this,v,1)},g.prototype.toFixed=function(v){var b=h,C=a;if(h=-(a=1/0),v==null)var M=this.toString();else v===~~v&&0<=v&&1e6>=v&&(M=j(this,this.e+v),0>this.Bd&&this.c[0]&&0>M.indexOf("-")&&(M="-"+M));return h=b,a=C,M||p("!toFix!"),M},g.prototype.toPrecision=function(v){return v==null?this.toString():((v!==~~v||1>v||1e6<v)&&p("!toPre!"),j(this,v-1,2))},g.rr=20,g.eu=1,g}();m.hp=d}(ye||(ye={})),function(m){var j=function(){function T(p){this.lf=p}return T.prototype.nr=function(p,h,a){var u=new m.h,d=new m.h,g=this.lf;a.Vd(p,h,function(v,b){return g.tc(2*v,u),g.tc(2*b,d),u.compare(d)})},T.prototype.$p=function(p){return this.lf.read(2*p+1)},T}();m.pi=function(){function T(){}return T.aq=function(p){if(p.B())return!1;var h=p.getType();return h==1736?p.Ke()!=0:h==1607?(h=[!1],T.sE(p,!0,h),h[0]):!(h!=197&&(!m.aa.yd(h)||p.BG()))},T.gm=function(p){var h=p.getType();if(h==1736)return h=new m.Ta(p.description),p.B()||p.dD(h),h;if(h==1607)return T.sE(p,!1,null);if(h==197)return h=new m.Ta(p.description),p.B()||h.ad(p,!1),h;if(m.aa.yd(h)){if(h=new m.de(p.description),!p.B()&&!p.BG()){var a=new m.Sa;p.To(a),h.add(a),p.Po(a),h.add(a)}return h}if(m.aa.Rn(h))return null;throw m.i.N()},T.sE=function(p,h,a){a!=null&&(a[0]=!1);var u=null;if(h||(u=new m.de(p.description)),!p.B()){var d=new m.ia(0);d.Jb(2*p.da());for(var g=0,v=p.da();g<v;g++)if(0<p.Ja(g)&&!p.Nn(g)){var b=p.Ba(g);d.add(b),b=p.Vc(g)-1,d.add(b)}if(0<d.size){v=new m.Xt,g=p.ub(0),v.sort(d,0,d.size,new j(g)),v=new m.h,g.tc(2*d.get(0),v),b=0;for(var C=1,M=new m.Sa,O=new m.h,L=1,q=d.size;L<q;L++)if(g.tc(2*d.get(L),O),O.qb(v))d.get(b)>d.get(L)?(d.set(b,2147483647),b=L):d.set(L,2147483647),C++;else{if(1&C){if(h)return a!=null&&(a[0]=!0),null}else d.set(b,2147483647);v.L(O),b=L,C=1}if(1&C){if(h)return a!=null&&(a[0]=!0),null}else d.set(b,2147483647);if(!h)for(d.Vd(0,d.size,function(U,ee){return U-ee}),L=0,q=d.size;L<q&&d.get(L)!=2147483647;L++)p.ve(d.get(L),M),u.add(M)}}return h?null:u},T}()}(ye||(ye={})),function(m){var j=function(){function T(){this.yf=new m.ia(0),this.ys=new m.ia(0),this.EH=1,this.Es=NaN}return T.prototype.sort=function(p,h,a,u){if(32>a-h)u.nr(h,a,p);else{var d=!0;try{for(var g=1/0,v=-1/0,b=h;b<a;b++){var C=u.$p(p.get(b));C<g&&(g=C),C>v&&(v=C)}if(this.reset(a-h,g,v,a-h)){for(b=h;b<a;b++){var M=p.get(b);C=u.$p(M);var O=this.zF(C);this.yf.set(O,this.yf.get(O)+1),this.ys.write(b-h,M)}var L=this.yf.get(0);this.yf.set(0,0),b=1;for(var q=this.yf.size;b<q;b++){var U=this.yf.get(b);this.yf.set(b,L),L+=U}for(b=h;b<a;b++){M=this.ys.read(b-h),C=u.$p(M),O=this.zF(C);var ee=this.yf.get(O);p.set(ee+h,M),this.yf.set(O,ee+1)}d=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(d)u.nr(h,a,p);else{for(b=a=0,q=this.yf.size;b<q;b++)d=a,(a=this.yf.get(b))>d&&u.nr(h+d,h+a,p);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},T.prototype.reset=function(p,h,a,u){return!(2>p||a==h)&&(p=Math.min(T.hL,p),this.yf.Jb(p),this.yf.resize(p),this.yf.Wj(0,0,this.yf.size),this.EH=h,this.ys.resize(u),this.Es=(a-h)/(p-1),!0)},T.prototype.zF=function(p){return m.O.truncate((p-this.EH)/this.Es)},T.hL=65536,T}();m.Xt=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.enum_line=1]="enum_line",T[T.enum_arc=2]="enum_arc",T[T.enum_dummy=4]="enum_dummy",T[T.enum_concave_dip=8]="enum_concave_dip",T[T.enum_connection=3]="enum_connection";var p=function(){function g(){}return g.Qu=function(v,b,C,M,O,L){var q=new g;return q.Im=new m.h,q.Vm=new m.h,q.aw=new m.h,q.Im.L(v),q.Vm.L(b),q.aw.L(C),q.Co=M,q.qh=O,q.sh=L,q},g.construct=function(v,b,C,M){var O=new g;return O.Im=new m.h,O.Vm=new m.h,O.aw=new m.h,O.Im.L(v),O.Vm.L(b),O.aw.Rc(),O.Co=4,O.qh=C,O.sh=M,O},g}(),h=function(){function g(v,b,C,M,O,L){this.Yv=null,this.ya=0,this.EA=v,this.bI=this.$H=0,this.Ka=b,this.Mj=C,this.vk=M,this.Dq=O,this.Ub=L}return g.prototype.next=function(){for(var v=new m.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,v),this.ya++,!v.B())break}var b=!1;if(this.Yv==null&&(this.$H=v.Lg(),this.bI=v.ih(),this.Yv=d.buffer(v,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),b=!0),this.ya<this.EA.I()){var C=new m.Da;this.Yv.copyTo(C)}else C=this.Yv;if(!b){b=new m.Dd;var M=v.Lg()-this.$H;v=v.ih()-this.bI,b.gg(M,v),C.Oc(b)}return C},g.prototype.La=function(){return 0},g.prototype.qe=function(){},g}(),a=function(){function g(v,b){this.Wa=v,this.ya=0,this.oq=b}return g.prototype.next=function(){var v=this.Wa.X;if(this.ya<v.da()){var b=this.ya;if(this.ya++,!v.Nn(b))for(var C=v.Na(v.Vc(b)-1);this.ya<v.da();){var M=v.Na(v.Ba(this.ya));if(v.Nn(this.ya)||M!=C)break;C=v.Na(v.Vc(this.ya)-1),this.ya++}if(this.ya-b==1)return this.Wa.kE(this.Wa.X,b,this.oq);for((C=new m.Ta(this.Wa.X.description)).addPath(this.Wa.X,b,!0),b+=1;b<this.ya;b++)C.Dr(this.Wa.X,b,0,v.rv(b),!1);return this.Wa.kE(C,0,this.oq)}return null},g.prototype.La=function(){return 0},g.prototype.qe=function(){},g}(),u=function(){function g(v){this.Wa=v,this.ya=0}return g.prototype.next=function(){var v=this.Wa.X;if(this.ya<v.da()){var b=this.ya;for(v.Ir(this.ya),this.ya++;this.ya<v.da()&&!(0<v.Ir(this.ya));)this.ya++;return b==0&&this.ya==v.da()?this.Wa.py(v,0,v.da()):this.Wa.py(v,b,this.ya)}return null},g.prototype.La=function(){return 0},g.prototype.qe=function(){},g}(),d=function(){function g(v){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=v,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return g.buffer=function(v,b,C,M,O,L){if(v==null||0>M)throw m.i.N();if(v.B())return new m.Da(v.description);var q=new m.l;return v.xc(q),0<b&&q.W(b,b),(L=new g(L)).Mj=C,L.X=v,L.qa=m.ta.Wd(C,q,!0),L.ct=m.ta.Wd(null,q,!0),L.Ka=b,L.JT=v.getType(),0>=O&&(O=96),L.rb=Math.abs(L.Ka),L.Kv=L.rb!=0?1/L.rb:0,isNaN(M)||M==0?M=1e-5*L.rb:M>.5*L.rb&&(M=.5*L.rb),12>O&&(O=12),(v=Math.abs(b)*(1-Math.cos(Math.PI/O)))>M?M=v:(v=Math.PI/Math.acos(1-M/Math.abs(b)))<O-1&&12>(O=m.O.truncate(v))&&(O=12,M=Math.abs(b)*(1-Math.cos(Math.PI/O))),L.vk=M,L.Dq=O,L.tA=Math.min(L.ct,.25*M),L.lE()},g.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var v=this.qE();v=m.O.truncate((v+3)/4);var b=.5*Math.PI/v;this.oA=b;for(var C=0;C<4*v;C++)this.Id.push(null);var M=Math.cos(b);b=Math.sin(b);var O=m.h.construct(0,1);for(C=0;C<v;C++)this.Id[C+0*v]=m.h.construct(O.y,-O.x),this.Id[C+1*v]=m.h.construct(-O.x,-O.y),this.Id[C+2*v]=m.h.construct(-O.y,O.x),this.Id[C+3*v]=O,(O=m.h.construct(O.x,O.y)).Bt(M,b)},g.prototype.lE=function(){var v=this.X.getType();if(m.aa.yd(v))return(v=new m.Ta(this.X.description)).oc(this.X,!0),this.X=v,this.lE();if(this.Ka<=this.qa){if(!m.aa.US(v))return new m.Da(this.X.description);if(0>=this.Ka&&(v=new m.l,this.X.A(v),v.R()<=2*-this.Ka||v.ca()<=2*this.Ka))return new m.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw m.i.Qa()}},g.prototype.RN=function(){if(this.EG(this.X)){var v=new m.Sa;this.X.ve(0,v);var b=new m.l;return this.X.A(b),v.Cb(b.sf()),this.Gu(v)}return this.X=this.WV(this.X),v=new a(this,this.oq),m.Gh.local().V(v,this.Mj,this.Ub).next()},g.prototype.QN=function(){if(this.Ka==0)return this.X;var v=m.Yl.local();if(this.cv(),this.X=v.V(this.X,null,!1,this.Ub),0>this.Ka){var b=this.X;return b=this.py(b,0,b.da()),v.V(b,this.Mj,!1,this.Ub)}return this.EG(this.X)?(v=new m.Sa,this.X.ve(0,v),b=new m.l,this.X.A(b),v.Cb(b.sf()),this.Gu(v)):(v=new u(this),m.Gh.local().V(v,this.Mj,this.Ub).next())},g.prototype.py=function(v,b,C){for(var M=new m.Da(v.description);b<C;b++)if(!(1>v.Ja(b))){var O=v.Ir(b),L=new m.l;if(v.Rj(b,L),0<this.Ka){if(0<O)if(this.FG(v,b))O=new m.Sa,v.ve(v.Ba(b),O),O.Cb(L.sf()),this.yu(M,O);else{var q=O=new m.Ta(v.description);q=m.Zt.JG(this.X,b)||this.zn(this.X,b,q,!0,1)==2?this.jE(v,b):this.yn(O),M.add(q,!1)}else if(!(L.R()+this.qa<=2*this.rb||L.ca()+this.qa<=2*this.rb||(q=O=new m.Ta(v.description),this.zn(this.X,b,q,!0,1),O.B()))){var U=new m.l;for(U.K(L),U.W(this.rb,this.rb),q.tp(U),L=1,O=(q=this.yn(O)).da();L<O;L++)M.addPath(q,L,!0)}}else if(0<O){if(!(L.R()+this.qa<=2*this.rb||L.ca()+this.qa<=2*this.rb||(q=O=new m.Ta(v.description),this.zn(this.X,b,q,!0,-1),O.B())))for(U=new m.l,q.xc(U),U.W(this.rb,this.rb),q.tp(U),L=1,O=(q=this.yn(O)).da();L<O;L++)M.addPath(q,L,!0)}else for(q=O=new m.Ta(v.description),this.zn(this.X,b,q,!0,-1),L=0,O=(q=this.yn(O)).da();L<O;L++)M.addPath(q,L,!0)}if(0<this.Ka)return 1<M.da()?M=this.yn(M):g.kx(M);if(v=new m.l,M.xc(v),M.B())return g.kx(M);for(v.W(this.rb,this.rb),M.tp(v),M=this.yn(M),v=new m.Da(M.description),L=1,O=M.da();L<O;L++)v.addPath(M,L,!1);return g.kx(v)},g.prototype.PN=function(){return this.Gu(this.X)},g.prototype.Gu=function(v){var b=new m.Da(this.X.description);return this.yu(b,v),this.sX(b)},g.prototype.ON=function(){var v=new h(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return m.Gh.local().V(v,this.Mj,this.Ub).next()},g.prototype.LN=function(){var v=new m.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)v.ad(this.X,!1);else{var b=new m.Fh;this.X.bn(b),b.W(this.Ka,this.Ka),v.ad(b,!1)}return v}return v.ad(this.X,!1),this.X=v,this.jE(v,0)},g.prototype.jE=function(v,b){this.cv();var C=new m.Da(v.description),M=new m.h,O=new m.h,L=new m.h,q=new m.h,U=new m.h,ee=new m.h,Q=new m.h,ge=new m.h,ve=v.Ja(b),fe=v.Ba(b),Ce=0;for(b=v.Ja(b);Ce<b;Ce++){if(v.D(fe+Ce,O),v.D(fe+(Ce+1)%ve,q),v.D(fe+(Ce+2)%ve,ee),Q.uc(q,O),Q.length()==0||(Q.Hv(),Q.normalize(),Q.scale(this.rb),M.add(Q,O),L.add(Q,q),Ce==0?C.Lt(M):C.Ci(M),C.Ci(L),ge.uc(ee,q),ge.length()==0))throw m.i.Qa();ge.Hv(),ge.normalize(),ge.scale(this.rb),U.add(ge,q),this.GD(C,q,L,U,!1)}return g.kx(C)},g.prototype.kE=function(v,b,C){if(this.cv(),1>v.Ja(b))return null;if(this.FG(v,b)&&0<this.Ka){C=new m.Sa,v.ve(v.Ba(b),C);var M=new m.l;return v.Rj(b,M),C.Cb(M.sf()),this.Gu(C)}if(M=new m.Ta(v.description),v.Nn(b))this.zn(v,b,M,C,1),this.zn(v,b,M,C,-1);else{var O=new m.Ta(v.description);O.addPath(v,b,!1),O.Dr(v,b,0,v.rv(b),!1),this.zn(O,0,M,C,1)}return this.yn(M)},g.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw m.i.fu("user_canceled")},g.prototype.yn=function(v){return m.Fg.Mk(v,this.ct,!0,!0,this.Ub)},g.prototype.qE=function(){if(this.vk==0)return this.Dq;var v=1-this.vk*Math.abs(this.Kv);return 4>(v=-1>v?4:2*Math.PI/Math.acos(v)+.5)?v=4:v>this.Dq&&(v=this.Dq),m.O.truncate(v)},g.prototype.GD=function(v,b,C,M,O){this.cv();var L=new m.h;L.uc(C,b),L.scale(this.Kv);var q=new m.h;q.uc(M,b),q.scale(this.Kv),0>(L=Math.atan2(L.y,L.x)/this.oA)&&(L=this.Id.length+L),L=this.Id.length-L,0>(q=Math.atan2(q.y,q.x)/this.oA)&&(q=this.Id.length+q),(q=this.Id.length-q)<L&&(q+=this.Id.length);var U=m.O.truncate(q);q=m.O.truncate(Math.ceil(L)),(L=new m.h).L(this.Id[q%this.Id.length]),L.Ct(this.rb,b);var ee=10*this.qa;for(L.sub(C),L.length()<ee&&(q+=1),L.L(this.Id[U%this.Id.length]),L.Ct(this.rb,b),L.sub(M),L.length()<ee&&--U,C=U-q,C++,U=0,q%=this.Id.length;U<C;U++,q=(q+1)%this.Id.length)L.L(this.Id[q]),L.Ct(this.rb,b),v.Ci(L),this.Xq();O&&v.Ci(M)},g.prototype.zn=function(v,b,C,M,O){var L=new m.gd,q=L.mN(v,b);if(L.Gp(this.tA,!1,!1),2>L.I(q))return 0>O||(O=v,L=new m.Sa,O.ve(O.Ba(b),L),this.yu(C,L)),1;var U=L.Na(L.Xa(L.Ob(q))),ee=new m.Dd;if(ee.gg(-U.x,-U.y),L.Oc(ee),M&&(this.tQ(L,q,O),2>L.I(q)))return 0>O||(O=v,L=new m.Sa,O.ve(O.Ba(b),L),this.yu(C,L)),1;this.Zd.length=0;var Q=L.Ob(q);b=L.Xa(Q);var ge=O==1?L.Ma(b):L.U(b);v=O==1?L.U(b):L.Ma(b);var ve=!0;M=new m.h,q=new m.h;var fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=new m.h,Ve=new m.h,Xe=new m.h,et=new m.h,dt=new m.h,ut=this.rb;Q=L.Ja(Q);for(var mt=0;mt<Q;mt++)L.D(v,q),ve&&(L.D(b,M),L.D(ge,fe),Xe.uc(M,fe),Xe.normalize(),dt.MG(Xe),dt.scale(ut),Ce.add(dt,M)),Ve.uc(q,M),Ve.normalize(),et.MG(Ve),et.scale(ut),Ie.add(M,et),ge=Xe.wi(Ve),ve=Xe.Qh(Ve),0>ge||0>ve&&ge==0?this.Zd.push(p.Qu(Ce,Ie,M,2,this.Zd.length+1,this.Zd.length-1)):Ce.qb(Ie)||(this.Zd.push(p.construct(Ce,M,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(p.construct(M,Ie,this.Zd.length+1,this.Zd.length-1,"dummy"))),Ne.add(q,et),this.Zd.push(p.Qu(Ie,Ne,M,1,this.Zd.length+1,this.Zd.length-1)),Ce.L(Ne),dt.L(et),fe.L(M),M.L(q),Xe.L(Ve),ge=b,b=v,ve=!1,v=O==1?L.U(b):L.Ma(b);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(C),ee.gg(U.x,U.y),C.YD(ee,C.da()-1),1},g.prototype.YV=function(v){for(var b=this.zO(),C=!0,M=b+1,O=b;M!=b;O=M){var L=this.Zd[O];M=L.qh!=-1?L.qh:(O+1)%this.Zd.length,L.Co!=0&&(C&&v.Lt(L.Im),L.Co==2?this.GD(v,L.aw,L.Im,L.Vm,!0):v.Ci(L.Vm),C=!1)}},g.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var v=0,b=0,C=this.Zd.length;b<C;){var M=this.Zd[b];if(3&M.Co){v=b;break}b=M.qh}for(C=v+1,b=v;C!=v;b=C){C=(M=this.Zd[b]).qh;for(var O=1,L=null;C!=b&&!(3&(L=this.Zd[C]).Co);)C=L.qh,O++;O!=1&&(M.Co&L.Co)==1&&(this.Ls==null&&(this.Ls=new m.yb,this.lw=new m.yb),this.Ls.Dc(M.Im),this.Ls.Qc(M.Vm),this.lw.Dc(L.Im),this.lw.Qc(L.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(M.Vm.L(this.Ks[0]),L.Im.L(this.Ks[0]),M.qh=C,L.sh=b))}return v},g.prototype.Fv=function(v,b,C){var M=new m.h;if(M.uc(C,v),C=M.length(),0<(C=this.rb*this.rb-C*C*.25)){C=Math.sqrt(C),M.normalize(),M.ar();var O=new m.h;if(O.uc(b,v),O.Qh(M)+C>=this.rb)return!0}return!1},g.prototype.tQ=function(v,b,C){for(var M=0;1>M;M++){var O=!1,L=v.Ob(b),q=v.Ja(L);if(q==0)break;var U=q;if(3>q)break;!v.dc(L)&&(U=q-1),L=v.Xa(L),q=0<C?v.Ma(L):v.U(L);for(var ee=0<C?v.U(L):v.Ma(L),Q=q,ge=!0,ve=new m.h,fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=new m.h,Ve=m.h.construct(0,0),Xe=new m.h,et=new m.h,dt=new m.h,ut=new m.h,mt=this.rb,lt=0,gi=0;gi<U&&(v.D(ee,fe),ge&&(v.D(L,ve),v.D(q,Ce),Q=q),et.uc(ve,Ce),et.normalize(),Xe.uc(fe,ve),Xe.normalize(),Q!=ee);){var oi=et.wi(Xe),Ni=et.Qh(Xe),Ki=!0;if(0>oi||0>Ni&&oi==0||!this.Fv(Ce,ve,fe)||(Ve.L(fe),Ki=!1,++lt,O=!0),Ki){if(0<lt)for(;(oi=0<C?v.Ma(Q):v.U(Q))!=L;){if(v.D(oi,Ie),!this.Fv(Ie,Ce,Ve)){oi!=ee&&this.Fv(Ie,Ce,fe)&&this.Fv(Ie,ve,fe)&&(Ce.L(Ie),Q=oi,Ki=!1,++lt);break}Ce.L(Ie),Q=oi,Ki=!1,++lt}if(!Ki)continue;if(0<lt){for(Q=0<C?v.Ma(q):v.U(q),ge=1;ge<lt;ge++)Ki=0<C?v.Ma(Q):v.U(Q),v.pd(Q,!0),Q=Ki;dt.uc(ve,Ce),lt=mt*mt-(lt=dt.length())*lt*.25,mt-(lt=Math.sqrt(lt))>.5*this.vk?(Ne.add(Ce,ve),Ne.scale(.5),dt.normalize(),dt.ar(),ut.L(dt),ut.scale(mt-lt),Ne.add(ut),v.mf(q,Ne)):v.pd(q,!0),lt=0}Ce.L(ve),Q=L}ve.L(fe),q=L,L=ee,ee=0<C?v.U(L):v.Ma(L),gi++,ge=!1}if(0<lt){for(Q=0<C?v.Ma(q):v.U(q),ge=1;ge<lt;ge++)Ki=0<C?v.Ma(Q):v.U(Q),v.pd(Q,!0),Q=Ki;Ne.add(Ce,ve),Ne.scale(.5),dt.uc(ve,Ce),lt=mt*mt-(lt=dt.length())*lt*.25,lt=Math.sqrt(lt),dt.normalize(),dt.ar(),ut.L(dt),ut.scale(mt-lt),Ne.add(ut),v.mf(q,Ne)}if(v.Gp(this.tA,!1,!1),!O)break}},g.prototype.FG=function(v,b){if(v.Ja(b)==1)return!0;var C=new m.l;return v.Rj(b,C),Math.max(C.R(),C.ca())<.5*this.vk},g.prototype.EG=function(v){var b=new m.l;return v.A(b),Math.max(b.R(),b.ca())<.5*this.vk},g.prototype.WV=function(v){for(var b=0,C=0,M=(v=m.EC.local().V(v,.25*this.vk,!1,this.Ub)).da();C<M;C++)b=Math.max(v.Ja(C),b);return 32>b?(this.oq=!1,v):(this.oq=!0,m.Fg.Mk(v,this.ct,!1,!0,this.Ub))},g.prototype.yu=function(v,b){if(b=b.D(),this.Id!=null&&this.Id.length!==0){var C=new m.h;C.L(this.Id[0]),C.Ct(this.rb,b),v.Lt(C);for(var M=1,O=this.Id.length;M<O;M++)C.L(this.Id[M]),C.Ct(this.rb,b),v.Ci(C)}else{M=this.qE(),C=m.O.truncate((M+3)/4),M=.5*Math.PI/C,O=Math.cos(M);for(var L=Math.sin(M),q=new m.h,U=3;0<=U;U--){switch(q.ma(0,this.rb),U){case 0:for(M=0;M<C;M++)v.yj(q.x+b.x,q.y+b.y),q.Bt(O,L);break;case 1:for(M=0;M<C;M++)v.yj(-q.y+b.x,q.x+b.y),q.Bt(O,L);break;case 2:for(M=0;M<C;M++)v.yj(-q.x+b.x,-q.y+b.y),q.Bt(O,L);break;default:for(v.sx(q.y+b.x,-q.x+b.y),M=1;M<C;M++)q.Bt(O,L),v.yj(q.y+b.x,-q.x+b.y)}this.Xq()}}},g.kx=function(v){return v.Ch(1,0),v},g.prototype.sX=function(v){return v.Ch(2,this.qa),v.fm(),v},g}();m.HK=d}(ye||(ye={})),function(m){var j=function(){function T(p){this.Ca=p,this.g=new m.gd,this.dd=new m.ia(0)}return T.prototype.Lh=function(p,h,a){switch(h){case 0:if(p.v<a&&p.C<=a)break;return p.v>=a?1:-1;case 1:if(p.G<a&&p.H<=a)break;return p.G>=a?1:-1;case 2:if(p.v>=a&&p.C>a)break;return p.C<=a?1:-1;case 3:if(!(p.G>=a&&p.H>a))return p.H<=a?1:-1}return 0},T.prototype.Ay=function(p,h){return p.getType()==1736?this.Cy(p,h):this.Dy(p)},T.prototype.Cy=function(p,h){if(this.Ca.R()==0||this.Ca.ca()==0)return p.Ia();var a=new m.l;p.xc(a),this.X=this.g.Ib(p);var u=new m.l,d=new m.l,g=new m.h,v=new m.h,b=[0,0,0,0,0,0,0,0,0],C=[0,0,0,0,0,0,0,0,0];new m.ig;var M=new m.yb,O=new m.ia(0);O.Jb(Math.min(100,p.I()));for(var L=!1,q=0;!L&&4>q;q++){var U=!1,ee=!!(1&q),Q=0;switch(q){case 0:Q=this.Ca.v,U=a.v<=Q&&a.C>=Q;break;case 1:Q=this.Ca.G,U=a.G<=Q&&a.H>=Q;break;case 2:Q=this.Ca.C,U=a.v<=Q&&a.C>=Q;break;case 3:Q=this.Ca.H,U=a.G<=Q&&a.H>=Q}if(U)for(L=!0,U=this.g.Ob(this.X);U!=-1;){var ge=-1,ve=-1,fe=this.g.Xa(U),Ce=fe;do{var Ie=this.g.bc(Ce);Ie==null&&(Ie=M,this.g.D(Ce,g),Ie.Dc(g),this.g.D(this.g.U(Ce),v),Ie.Qc(v)),Ie.A(u);var Ne=this.Lh(u,q,Q),Ve=0,Xe=-1;if(Ne==-1){Ve=0<(Ie=Ie.cq(ee,Q,b,C))?this.g.Ul(Ce,C,Ie):0,Ve+=1;var et=Ce,dt=this.g.U(et);for(Ie=0;Ie<Ve;Ie++){if(this.g.D(et,g),this.g.D(dt,v),(Xe=this.g.bc(et))==null&&((Xe=M).Dc(g),Xe.Qc(v)),Xe.A(d),(Xe=this.Lh(d,q,Q))==-1){if(ee)(Xe=Math.abs(g.y-Q))<(ut=Math.abs(v.y-Q))?(g.y=Q,this.g.mf(et,g)):(v.y=Q,this.g.mf(dt,v));else{Xe=Math.abs(g.x-Q);var ut=Math.abs(v.x-Q);Xe<ut?(g.x=Q,this.g.mf(et,g)):(v.x=Q,this.g.mf(dt,v))}(Xe=this.g.bc(et))==null&&((Xe=M).Dc(g),Xe.Qc(v)),Xe.A(d),Xe=this.Lh(d,q,Q)}ut=ge,ge=Xe,ve==-1&&(ve=ge),ut==0&&ge==1||ut==1&&ge==0||ut!=0||ge!=0||O.add(et),ge==1&&(L=!1),Xe=et=dt,dt=this.g.U(dt)}}Ve==0&&(ut=ge,ge=Ne,ve==-1&&(ve=ge),ut==0&&ge==1||ut==1&&ge==0||ut!=0||ge!=0||O.add(Ce),ge==1&&(L=!1),Xe=this.g.U(Ce)),Ce=Xe}while(Ce!=fe);for(ve==0&&ge==0&&O.add(fe),Ie=0,ge=O.size;Ie<ge;Ie++)ve=O.get(Ie),this.g.pd(ve,!1);O.clear(!1),U=3>this.g.Ja(U)?this.g.Zq(U):this.g.Rb(U)}}return L?p.Ia():(this.FB(),0<h&&this.My(h),this.g.Ne(this.X))},T.prototype.Dy=function(p){var h=new m.l,a=new m.l,u=[0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0],g=new m.ig,v=p,b=new m.l;p.xc(b);for(var C=0;4>C;C++){var M=!1,O=!!(1&C),L=0;switch(C){case 0:L=this.Ca.v,M=b.v<=L&&b.C>=L;break;case 1:L=this.Ca.G,M=b.G<=L&&b.H>=L;break;case 2:L=this.Ca.C,M=b.v<=L&&b.C>=L;break;case 3:L=this.Ca.H,M=b.G<=L&&b.H>=L}if(M){M=v,v=p.Ia(),(M=M.Ga()).Zi();for(var q,U=new m.h;M.$a();)for(var ee,Q=!0;M.Ha();){var ge=M.ha();ge.A(h);var ve=this.Lh(h,C,L);if(ve==-1){if(0<(ve=ge.cq(O,L,u,d))){var fe=0;q=ge.ac();for(var Ce=0;Ce<=ve;Ce++)if(fe!=(ee=Ce<ve?d[Ce]:1)){ge.ah(fe,ee,g);var Ie=g.get();Ie.Dc(q),Ce<ve&&(O?(U.x=u[Ce],U.y=L):(U.x=L,U.y=u[Ce]),Ie.Qc(U)),Ie.A(a);var Ne=this.Lh(a,C,L);if(Ne==-1){if(q=Ie.ac(),fe=Ie.wc(),O)(Ne=Math.abs(q.y-L))<(Ve=Math.abs(fe.y-L))?(q.y=L,Ie.Dc(q)):(fe.y=L,Ie.Qc(fe));else{Ne=Math.abs(q.x-L);var Ve=Math.abs(fe.x-L);Ne<Ve?(q.x=L,Ie.Dc(q)):(fe.x=L,Ie.Qc(fe))}Ie.A(a),Ne=this.Lh(a,C,L)}q=Ie.wc(),fe=ee,(ee=Ne)==1?(v.oc(Ie,Q),Q=!1):Q=!0}}}else(ee=ve)==1?(v.oc(ge,Q),Q=!1):Q=!0}}}return v},T.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var p=new m.h,h=this.g.Ob(this.X);h!=-1;h=this.g.Rb(h))for(var a=this.g.Xa(h),u=0,d=this.g.Ja(h);u<d;u++,a=this.g.U(a))this.g.D(a,p),(this.Ca.v==p.x||this.Ca.C==p.x||this.Ca.G==p.y||this.Ca.H==p.y)&&(this.g.Ra(a,this.ji,this.dd.size),this.dd.add(a));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},T.prototype.My=function(p){for(var h=new m.h,a=new m.h,u=m.O.lg(2048,0),d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d)){var g=this.g.Xa(d),v=g;do{var b=this.g.U(v);this.g.D(v,h);var C=-1;if(h.x==this.Ca.v?(this.g.D(b,a),a.x==this.Ca.v&&(C=1)):h.x==this.Ca.C&&(this.g.D(b,a),a.x==this.Ca.C&&(C=1)),h.y==this.Ca.G?(this.g.D(b,a),a.y==this.Ca.G&&(C=0)):h.y==this.Ca.H&&(this.g.D(b,a),a.y==this.Ca.H&&(C=0)),C!=-1&&(C=m.h.tb(h,a),!(1>=(C=m.O.truncate(Math.min(Math.ceil(C/p),2048)))))){for(var M=1;M<C;M++)u[M-1]=1*M/C;this.g.Ul(v,u,C-1)}v=b}while(v!=g)}},T.prototype.Vl=function(p,h){var a=this.g.Gd(),u=new m.h,d=new m.ia(0);d.Jb(100);for(var g=this.g.Ob(this.X);g!=-1;g=this.g.Rb(g))for(var v=this.g.Xa(g),b=0,C=this.g.Ja(g);b<C;b++){var M=this.g.U(v);this.g.D(v,u),(p?u.y==h:u.x==h)&&(this.g.D(M,u),(p?u.y==h:u.x==h)&&(this.g.Pa(v,a)!=1&&(d.add(v),this.g.Ra(v,a,1)),this.g.Pa(M,a)!=1&&(d.add(M),this.g.Ra(M,a,1)))),v=M}if(this.g.Td(a),!(3>d.size)){var O=this;d.Vd(0,d.size,function(Ne,Ve){return O.Mh(Ne,Ve)}),a=new m.h,g=new m.h,v=new m.h,g.Rc();var L=-1;b=new m.ia(0),C=new m.ia(0),M=this.g.Gd();for(var q=this.g.Gd(),U=0,ee=d.size;U<ee;U++){var Q=d.get(U);if(this.g.D(Q,u),!u.qb(g)){if(L!=-1){for(var ge=L;ge<U;ge++){L=d.get(ge);var ve=this.g.U(L);Q=this.g.Ma(L);var fe=!1;0>this.Mh(L,ve)&&(this.g.D(ve,a),p?a.y==h:a.x==h)&&(b.add(L),fe=!0,this.g.Ra(L,q,1)),0>this.Mh(L,Q)&&(this.g.D(Q,a),p?a.y==h:a.x==h)&&(fe||b.add(L),this.g.Ra(L,M,1))}for(ge=0,fe=b.size;ge<fe;ge++){if(L=b.get(ge),Q=this.g.Pa(L,M),ve=this.g.Pa(L,q),Q==1){Q=this.g.Ma(L),this.g.D(Q,v);var Ce=[0];if(Ce[0]=0,!v.qb(u)){var Ie=m.h.tb(g,v);Ce[0]=m.h.tb(v,u)/Ie,Ce[0]==0?Ce[0]=2220446049250313e-31:Ce[0]==1&&(Ce[0]=.9999999999999998),this.g.Ul(Q,Ce,1),Q=this.g.Ma(L),this.g.mf(Q,u),C.add(Q),this.g.Ra(Q,M,1),this.g.Ra(Q,q,-1)}}ve==1&&(ve=this.g.U(L),this.g.D(ve,v),(Ce=[0])[0]=0,v.qb(u)||(Ie=m.h.tb(g,v),Ce[0]=m.h.tb(g,u)/Ie,Ce[0]==0?Ce[0]=2220446049250313e-31:Ce[0]==1&&(Ce[0]=.9999999999999998),this.g.Ul(L,Ce,1),Q=this.g.U(L),this.g.mf(Q,u),C.add(Q),this.g.Ra(Q,M,-1),this.g.Ra(Q,q,1)))}L=b,b=C,(C=L).clear(!1)}L=U,g.L(u)}}this.g.Td(M),this.g.Td(q)}},T.prototype.Nl=function(p,h){var a=new m.h,u=new m.ia(0);u.Jb(100);for(var d=this.g.Gd(),g=0,v=this.dd.size;g<v;g++){var b=this.dd.get(g);if(b!=-1){var C=this.g.U(b);this.g.D(b,a),(p?a.y==h:a.x==h)&&(this.g.D(C,a),(p?a.y==h:a.x==h)&&(this.g.Pa(b,d)!=-2&&(u.add(b),this.g.Ra(b,d,-2)),this.g.Pa(C,d)!=-2&&(u.add(C),this.g.Ra(C,d,-2))))}}if(u.size!=0){var M=this;for(u.Vd(0,u.size,function(Ve,Xe){return M.Mh(Ve,Xe)}),g=0,v=u.size;g<v;g++){var O=u.get(g);this.g.Ra(O,d,g)}b=new m.h,(C=new m.h).Rc();var L=-1;for(g=0,v=u.size;g<v;g++)if((O=u.get(g))!=-1&&(this.g.D(O,a),!a.qb(C))){if(L!=-1)for(;;){O=!1;for(var q=1<g-L?g-1:g,U=L;U<q;U++){var ee=u.get(U);if(ee!=-1){var Q=-1,ge=this.g.U(ee);0>this.Mh(ee,ge)&&(this.g.D(ge,b),p?b.y==h:b.x==h)&&(Q=ge),ge=-1;var ve=this.g.Ma(ee);if(0>this.Mh(ee,ve)&&(this.g.D(ve,b),p?b.y==h:b.x==h)&&(ge=ve),Q!=-1&&ge!=-1)this.Kh(ee,u,d),this.g.pd(ee,!1),this.Kh(Q,u,d),this.g.pd(Q,!1),O=!0;else if(Q!=-1||ge!=-1){for(ve=U+1;ve<g;ve++){var fe=u.get(ve);if(fe!=-1){var Ce=this.g.U(fe),Ie=-1;0>this.Mh(fe,Ce)&&(this.g.D(Ce,b),p?b.y==h:b.x==h)&&(Ie=Ce),Ce=this.g.Ma(fe);var Ne=-1;if(0>this.Mh(fe,Ce)&&(this.g.D(Ce,b),p?b.y==h:b.x==h)&&(Ne=Ce),Ie!=-1&&Ne!=-1){this.Kh(fe,u,d),this.g.pd(fe,!1),this.Kh(Ie,u,d),this.g.pd(Ie,!1),O=!0;break}if(Q!=-1&&Ne!=-1){this.zt(u,ee,Q,fe,Ne,d),O=!0;break}if(ge!=-1&&Ie!=-1){this.zt(u,fe,Ie,ee,ge,d),O=!0;break}}}if(O)break}}}if(!O)break}L=g,C.L(a)}}this.g.Td(d)},T.prototype.Kh=function(p,h,a){a=this.g.Pa(p,a),h.set(a,-1),a=this.g.Pa(p,this.ji),this.dd.set(a,-1),(h=this.g.bd(p))!=-1&&this.g.Xa(h)==p&&(this.g.Jf(h,-1),this.g.Wg(h,-1))},T.prototype.zt=function(p,h,a,u,d,g){this.g.Bc(h,u),this.g.Cc(u,h),this.g.Cc(a,d),this.g.Bc(d,a),this.Kh(u,p,g),this.g.mi(u,!1),this.Kh(d,p,g),this.g.mi(d,!0)},T.prototype.Ty=function(){for(var p=0,h=this.dd.size;p<h;p++){var a=this.dd.get(p);a!=-1&&this.g.aj(a,-1)}for(var u=0,d=0,g=this.g.Ob(this.X);g!=-1;){var v=this.g.Xa(g);if(v==-1||g!=this.g.bd(v)){var b=g;g=this.g.Rb(g),this.g.Jf(b,-1),this.g.$q(b)}else{a=v,b=0;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);2>=b?(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),v=this.g.pd(v,!1),b==2&&(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),this.g.pd(v,!1)),b=g,g=this.g.Rb(g),this.g.Jf(b,-1),this.g.$q(b)):(this.g.cp(g,!1),this.g.Wg(g,this.g.Ma(v)),this.g.Vj(g,b),d+=b,u++,g=this.g.Rb(g))}}for(p=0,h=this.dd.size;p<h;p++)if((a=this.dd.get(p))!=-1&&(g=this.g.bd(a))==-1){g=this.g.vf(this.X,-1),b=0,v=a;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);2>=b?(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),v=this.g.pd(v,!1),b==2&&(0<=(a=this.g.Pa(v,this.ji))&&this.dd.set(a,-1),this.g.pd(v,!1)),b=g,this.g.Jf(b,-1),this.g.$q(b)):(this.g.kn(g,!0),this.g.Vj(g,b),this.g.Jf(g,v),this.g.Wg(g,this.g.Ma(v)),this.g.cp(g,!1),d+=b,u++)}for(this.g.Rl(this.X,u),this.g.Tj(this.X,d),p=0,h=this.g.ld;h!=-1;h=this.g.ue(h))p+=this.g.I(h);this.g.bC(p)},T.By=function(p,h,a){return new T(h).Ay(p,a)},T.clip=function(p,h,a,u){if(p.B())return p;if(h.B())return p.Ia();if((a=p.getType())==33)return u=p.D(),h.contains(u)?p:p.Ia();if(a==197)return u=new m.l,p.A(u),u.Ea(h)?(h=new m.Fh,p.copyTo(h),h.Xo(u),h):p.Ia();var d=new m.l;if(p.xc(d),h.contains(d))return p;if(!h.isIntersecting(d))return p.Ia();if((d=p.Bb)!=null&&(d=d.Fk)!=null){if((d=d.Ro(h))==1){if(a!=1736)throw m.i.Qa();return(p=new m.Da(p.description)).tp(h),p}if(d==0)return p.Ia()}switch(a){case 550:a=null,d=p.I();for(var g=p.ub(0),v=0,b=0;b<d;b++)u=new m.h,g.tc(2*b,u),h.contains(u)||(v==0&&(a=p.Ia()),v<b&&a.Fd(p,v,b),v=b+1);return 0<v&&a.Fd(p,v,d),v==0?p:a;case 1736:case 1607:return T.By(p,h,u);default:throw m.i.Qa()}},T.prototype.Mh=function(p,h){var a=new m.h;return this.g.D(p,a),p=new m.h,this.g.D(h,p),a.compare(p)},T}();m.Ud=j}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.Ca=p,this.g=new m.gd,this.dd=new m.ia(0),this.nd=h}return T.prototype.Lh=function(p,h,a){switch(h){case 0:if(p.v<a&&p.C<=a)break;return p.v>=a?1:-1;case 1:if(p.G<a&&p.H<=a)break;return p.G>=a?1:-1;case 2:if(p.v>=a&&p.C>a)break;return p.C<=a?1:-1;case 3:if(!(p.G>=a&&p.H>a))return p.H<=a?1:-1}return 0},T.prototype.Ay=function(p,h){return p.getType()==1736?this.Cy(p,h):this.Dy(p)},T.prototype.Cy=function(p,h){if(this.Ca.R()==0||this.Ca.ca()==0)return p.Ia();var a=new m.l;p.xc(a),this.X=this.g.Ib(p);var u=new m.l,d=new m.l,g=new m.h,v=new m.h,b=[0,0,0,0,0,0,0,0,0],C=[0,0,0,0,0,0,0,0,0],M=new m.yb,O=new m.ia(0);O.Jb(256);for(var L=!1,q=0;!L&&4>q;q++){var U=!1,ee=!!(1&q),Q=0;switch(q){case 0:Q=this.Ca.v,U=a.v<=Q&&a.C>=Q;break;case 1:Q=this.Ca.G,U=a.G<=Q&&a.H>=Q;break;case 2:Q=this.Ca.C,U=a.v<=Q&&a.C>=Q;break;case 3:Q=this.Ca.H,U=a.G<=Q&&a.H>=Q}if(U)for(L=!0,U=this.g.Ob(this.X);U!=-1;){var ge=!0,ve=-1,fe=-1,Ce=this.g.Xa(U),Ie=Ce;do{var Ne=this.g.bc(Ie);Ne==null&&(Ne=M,this.g.D(Ie,g),Ne.Dc(g),this.g.D(this.g.U(Ie),v),Ne.Qc(v)),Ne.A(u);var Ve=this.Lh(u,q,Q),Xe=0,et=-1;if(Ve==-1){Xe=0<(Ne=Ne.cq(ee,Q,b,C))?this.g.LX(Ie,C,Ne):0,Xe+=1;var dt=Ie,ut=this.g.U(dt);for(Ne=0;Ne<Xe;Ne++){if(this.g.D(dt,g),this.g.D(ut,v),(et=this.g.bc(dt))==null&&((et=M).Dc(g),et.Qc(v)),et.A(d),(et=this.Lh(d,q,Q))==-1){if(ee)(et=Math.abs(g.y-Q))<(mt=Math.abs(v.y-Q))?(g.y=Q,this.g.mf(dt,g)):(v.y=Q,this.g.mf(ut,v));else{et=Math.abs(g.x-Q);var mt=Math.abs(v.x-Q);et<mt?(g.x=Q,this.g.mf(dt,g)):(v.x=Q,this.g.mf(ut,v))}(et=this.g.bc(dt))==null&&((et=M).Dc(g),et.Qc(v)),et.A(d),et=this.Lh(d,q,Q)}mt=ve,ve=et,fe==-1&&(fe=ve),mt==0&&ve==1||mt==1&&ve==0||mt!=0||ve!=0||O.add(dt),ve==1&&(ge=L=!1),et=dt=ut,ut=this.g.U(ut)}}if(Xe==0&&(mt=ve,ve=Ve,fe==-1&&(fe=ve),mt==0&&ve==1||mt==1&&ve==0||mt!=0||ve!=0||O.add(Ie),ve==1&&(ge=L=!1),et=this.g.U(Ie)),Ie=et,256<=O.size){for(Ne=1,Ve=O.size-1;Ne<Ve;Ne++)Xe=O.get(Ne),this.g.pd(Xe,!1);O.set(1,O.Fc()),O.Bh(2)}}while(Ie!=Ce);if(!ge)for(fe==0&&ve==0&&O.add(Ce),Ne=0,Ve=O.size;Ne<Ve;Ne++)Xe=O.get(Ne),this.g.pd(Xe,!1);O.clear(!1),U=ge||this.g.Ja(U)==0?this.g.Zq(U):this.g.Rb(U)}}return L?p.Ia():(this.FB(),0<h&&this.My(h),this.g.Ne(this.X))},T.prototype.Dy=function(p){var h=new m.l,a=new m.l,u=[0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0],g=new m.ig,v=p,b=new m.l;p.xc(b);for(var C=new m.h,M=new m.h,O=null,L=null,q=0;4>q;q++){var U=!1,ee=!!(1&q),Q=0;switch(q){case 0:Q=this.Ca.v,U=b.v<=Q&&b.C>=Q;break;case 1:Q=this.Ca.G,U=b.G<=Q&&b.H>=Q;break;case 2:Q=this.Ca.C,U=b.v<=Q&&b.C>=Q;break;case 3:Q=this.Ca.H,U=b.G<=Q&&b.H>=Q}if(U)for(U=v,v=p.Ia(),(U=U.Ga()).Zi();U.$a();)for(var ge,ve=!0;U.Ha();){var fe=U.ha();fe.A(h);var Ce=this.Lh(h,q,Q);if(Ce==-1){if(0<(Ce=fe.cq(ee,Q,u,d))){var Ie=0;fe.Yp(C);for(var Ne=0;Ne<=Ce;Ne++)if(Ie!=(ge=Ne<Ce?d[Ne]:1)){fe.ah(Ie,ge,g);var Ve=g.get();Ve.Dc(C),Ne<Ce&&(ee?(M.x=u[Ne],M.y=Q):(M.x=Q,M.y=u[Ne]),Ve.Qc(M)),Ve.A(a);var Xe=this.Lh(a,q,Q);Xe==-1&&(O==null&&(O=new m.h),L==null&&(L=new m.h),Ve.Yp(O),Ve.Tr(L),ee?(Ie=Math.abs(O.y-Q))<(Xe=Math.abs(L.y-Q))?(O.y=Q,Ve.Dc(O)):(L.y=Q,Ve.Qc(L)):(Ie=Math.abs(O.x-Q))<(Xe=Math.abs(L.x-Q))?(O.x=Q,Ve.Dc(O)):(L.x=Q,Ve.Qc(L)),Ve.A(a),Xe=this.Lh(a,q,Q)),Ve.Tr(C),Ie=ge,(ge=Xe)==1?(v.oc(Ve,ve),ve=!1):ve=!0}}}else(ge=Ce)==1?(v.oc(fe,ve),ve=!1):ve=!0}}return v},T.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var p=new m.h,h=this.g.Ob(this.X);h!=-1;h=this.g.Rb(h))for(var a=this.g.Xa(h),u=0,d=this.g.Ja(h);u<d;u++,a=this.g.U(a))this.g.D(a,p),(this.Ca.v==p.x||this.Ca.C==p.x||this.Ca.G==p.y||this.Ca.H==p.y)&&(this.g.Ra(a,this.ji,this.dd.size),this.dd.add(a));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},T.prototype.My=function(p){for(var h=new m.h,a=new m.h,u=null,d=null,g=m.O.lg(2048,0),v=this.g.Ob(this.X);v!=-1;v=this.g.Rb(v)){var b=this.g.Xa(v),C=b;do{var M=this.g.U(C);this.g.D(C,h);var O=-1;if(h.x==this.Ca.v?(this.g.D(M,a),a.x==this.Ca.v&&(O=1)):h.x==this.Ca.C&&(this.g.D(M,a),a.x==this.Ca.C&&(O=1)),h.y==this.Ca.G?(this.g.D(M,a),a.y==this.Ca.G&&(O=0)):h.y==this.Ca.H&&(this.g.D(M,a),a.y==this.Ca.H&&(O=0)),O!=-1){if(u==null&&(u=new m.h),d==null&&(d=new m.h),u.L(h),d.ma(0,0),O==0){var L=h.x-this.Ca.v;d.x=m.lc.sign(a.x-h.x),u.x=p*m.lc.Cn(Math.floor(Math.abs(L/p)),L)+this.Ca.v,0>u.x&&(u.x+=p)}else L=h.y-this.Ca.G,d.y=m.lc.sign(a.y-h.y),u.y=p*m.lc.Cn(Math.floor(Math.abs(L/p)),L)+this.Ca.G,0>u.y&&(u.y+=p);L=O!=0?a.y-h.y:a.x-h.x;var q=Math.abs(L);if(65536<q/p)throw m.i.fa("internal error");if(0<q){q=m.O.truncate(q/p)+2,g.length<q&&(g=m.O.lg(q));for(var U=q=0;;U++){var ee=new m.h;if(ee.x=u.x+d.x*U*p,ee.y=u.y+d.y*U*p,1<=(ee=(O!=0?ee.y-h.y:ee.x-h.x)/L))break;0>=ee||(g[q]=ee,q++)}q!=0&&this.g.Ul(C,g,q)}}C=M}while(C!=b)}},T.prototype.Vl=function(p,h){for(var a=-1,u=new m.h,d=null,g=this.g.Ob(this.X);g!=-1;g=this.g.Rb(g))for(var v=this.g.Xa(g),b=0,C=this.g.Ja(g);b<C;b++){var M=this.g.U(v);this.g.D(v,u),(p?u.y==h:u.x==h)&&(this.g.D(M,u),(p?u.y==h:u.x==h)&&(a==-1&&(a=this.g.Gd()),d==null&&(d=new m.ia(0)).Jb(100),this.g.Pa(v,a)!=1&&(d.add(v),this.g.Ra(v,a,1)),this.g.Pa(M,a)!=1&&(d.add(M),this.g.Ra(M,a,1)))),v=M}if(a!=-1&&this.g.Td(a),!(d==null||3>d.size)){var O=this;d.Vd(0,d.size,function(Ne,Ve){return O.Mh(Ne,Ve)}),a=new m.h,g=new m.h,v=new m.h,g.Rc();var L=-1;b=new m.ia(0),C=new m.ia(0),M=null;for(var q=this.g.Gd(),U=this.g.Gd(),ee=0,Q=d.size;ee<Q;ee++){var ge=d.get(ee);if(this.g.D(ge,u),!u.qb(g)){if(L!=-1){for(var ve=L;ve<ee;ve++){L=d.get(ve);var fe=this.g.U(L);ge=this.g.Ma(L);var Ce=!1;this.g.D(fe,a),0>g.compare(a)&&(p?a.y==h:a.x==h)&&(b.add(L),Ce=!0,this.g.Ra(L,U,1)),this.g.D(ge,a),0>g.compare(a)&&(p?a.y==h:a.x==h)&&(Ce||b.add(L),this.g.Ra(L,q,1))}for(ve=0,Ce=b.size;ve<Ce;ve++){if(L=b.get(ve),ge=this.g.Pa(L,q),fe=this.g.Pa(L,U),ge==1&&(ge=this.g.Ma(L),this.g.D(ge,v),!v.qb(u))){M==null&&(M=[]);var Ie=m.h.tb(g,v);M[0]=m.h.tb(v,u)/Ie,M[0]==0?M[0]=2220446049250313e-31:M[0]==1&&(M[0]=.9999999999999998),this.g.Ul(ge,M,1),ge=this.g.Ma(L),this.g.mf(ge,u),C.add(ge),this.g.Ra(ge,q,1),this.g.Ra(ge,U,-1)}fe==1&&(fe=this.g.U(L),this.g.D(fe,v),v.qb(u)||(M==null&&(M=[]),Ie=m.h.tb(g,v),M[0]=m.h.tb(g,u)/Ie,M[0]==0?M[0]=2220446049250313e-31:M[0]==1&&(M[0]=.9999999999999998),this.g.Ul(L,M,1),ge=this.g.U(L),this.g.mf(ge,u),C.add(ge),this.g.Ra(ge,q,-1),this.g.Ra(ge,U,1)))}L=b,b=C,(C=L).clear(!1)}L=ee,g.L(u)}}this.g.Td(q),this.g.Td(U)}},T.prototype.Nl=function(p,h){for(var a=new m.h,u=null,d=-1,g=0,v=this.dd.size;g<v;g++){var b=this.dd.get(g);if(b!=-1){var C=this.g.U(b);this.g.D(b,a),(p?a.y==h:a.x==h)&&(this.g.D(C,a),(p?a.y==h:a.x==h)&&(d==-1&&(d=this.g.Gd()),u==null&&(u=new m.ia(0)).Jb(100),this.g.Pa(b,d)!=-2&&(u.add(b),this.g.Ra(b,d,-2)),this.g.Pa(C,d)!=-2&&(u.add(C),this.g.Ra(C,d,-2))))}}if(u==null)d!=-1&&this.g.Td(d);else{var M=this;for(u.Vd(0,u.size,function(Ve,Xe){return M.Mh(Ve,Xe)}),g=0,v=u.size;g<v;g++){var O=u.get(g);this.g.Ra(O,d,g)}b=new m.h,(C=new m.h).Rc();var L=-1;for(g=0,v=u.size;g<v;g++)if((O=u.get(g))!=-1&&(this.g.D(O,a),!a.qb(C))){if(L!=-1)for(;;){O=!1;for(var q=1<g-L?g-1:g,U=L;U<q;U++){var ee=u.get(U);if(ee!=-1){var Q=-1,ge=this.g.U(ee);this.g.D(ge,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(Q=ge),ge=-1;var ve=this.g.Ma(ee);if(this.g.D(ve,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(ge=ve),Q!=-1&&ge!=-1)this.Kh(ee,u,d),this.g.pd(ee,!1),this.Kh(Q,u,d),this.g.pd(Q,!1),O=!0;else if(Q!=-1||ge!=-1){for(ve=U+1;ve<g;ve++){var fe=u.get(ve);if(fe!=-1){var Ce=this.g.U(fe),Ie=-1;this.g.D(Ce,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(Ie=Ce),Ce=this.g.Ma(fe);var Ne=-1;if(this.g.D(Ce,b),0>C.compare(b)&&(p?b.y==h:b.x==h)&&(Ne=Ce),Ie!=-1&&Ne!=-1){this.Kh(fe,u,d),this.g.pd(fe,!1),this.Kh(Ie,u,d),this.g.pd(Ie,!1),O=!0;break}if(Q!=-1&&Ne!=-1){this.zt(u,ee,Q,fe,Ne,d),O=!0;break}if(ge!=-1&&Ie!=-1){this.zt(u,fe,Ie,ee,ge,d),O=!0;break}}}if(O)break}}}if(!O)break}L=g,C.L(a)}this.g.Td(d)}},T.prototype.Kh=function(p,h,a){a=this.g.Pa(p,a),h.set(a,-1),a=this.g.Pa(p,this.ji),this.dd.set(a,-1),(h=this.g.bd(p))!=-1&&this.g.Xa(h)==p&&(this.g.Jf(h,-1),this.g.Wg(h,-1))},T.prototype.zt=function(p,h,a,u,d,g){this.g.Bc(h,u),this.g.Cc(u,h),this.g.Cc(a,d),this.g.Bc(d,a),this.Kh(u,p,g),this.g.mi(u,!1),this.Kh(d,p,g),this.g.mi(d,!0)},T.prototype.Ty=function(){for(var p=0,h=this.dd.size;p<h;p++){var a=this.dd.get(p);a!=-1&&this.g.aj(a,-1)}for(var u=0,d=0,g=this.g.Ob(this.X);g!=-1;){var v=this.g.Xa(g);if(v==-1||g!=this.g.bd(v)){var b=g;g=this.g.Rb(g),this.g.Jf(b,-1),this.g.$q(b)}else{a=v,b=0;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);this.g.cp(g,!1),this.g.Wg(g,this.g.Ma(v)),this.g.Vj(g,b),d+=b,u++,g=this.g.Rb(g)}}for(p=0,h=this.dd.size;p<h;p++)if((a=this.dd.get(p))!=-1&&(g=this.g.bd(a))==-1){g=this.g.vf(this.X,-1),b=0,v=a;do this.g.aj(a,g),b++,a=this.g.U(a);while(a!=v);2>=b?(a=this.g.Pa(v,this.ji),this.dd.set(a,-1),v=this.g.pd(v,!1),b==2&&(0<=(a=this.g.Pa(v,this.ji))&&this.dd.set(a,-1),this.g.pd(v,!1)),b=g,this.g.Jf(b,-1),this.g.$q(b)):(this.g.kn(g,!0),this.g.Vj(g,b),this.g.Jf(g,v),this.g.Wg(g,this.g.Ma(v)),this.g.cp(g,!1),d+=b,u++)}for(this.g.Rl(this.X,u),this.g.Tj(this.X,d),p=0,h=this.g.ld;h!=-1;h=this.g.ue(h))p+=this.g.I(h);this.g.bC(p)},T.By=function(p,h,a,u){return new T(h,u).Ay(p,a)},T.clip=function(p,h,a,u,d){return T.Nu(p,h,null,a,u,d)},T.Nu=function(p,h,a,u,d,g){var v=p.getType();if(v==33)return d=p.D(),h.contains(d)?p:p.Ia();if(v==197)return d=new m.l,p.A(d),d.Ea(h)?(h=new m.Fh,p.copyTo(h),h.Xo(d),h):p.Ia();if(p.B())return p;if(h.B())return p.Ia();var b=new m.l;if(p.xc(b),h.contains(b))return p;if(!h.isIntersecting(b))return p.Ia();if((a!=null||isNaN(u))&&m.ta.ty(a,h,!1),!m.aa.xj(v))throw m.i.N();if((a=p.Bb)!=null&&(a=a.Fk)!=null){if((a=a.Ro(h))==1){if(v!=1736)throw m.i.fa("internal error");return(p=new m.Da(p.description)).tp(h),p}if(a==0)return p.Ia()}switch(v){case 550:for(g=null,v=p.I(),a=p.ub(0),u=0,d=new m.h,b=0;b<v;b++)a.tc(2*b,d),h.contains(d)||(u==0&&(g=p.Ia()),u<b&&g.Fd(p,u,b),u=b+1);return 0<u&&g.Fd(p,u,v),u==0?p:g;case 1736:case 1607:return T.By(p,h,d,g);default:throw m.i.fa("internal error")}},T.prototype.Mh=function(p,h){var a=new m.h;return this.g.D(p,a),p=new m.h,this.g.D(h,p),a.compare(p)},T}();m.ri=j}(ye||(ye={})),function(m){var j=new m.h,T=function(){function h(a,u,d,g,v){this.Pm=new m.h,this.Dk=new m.h,this.Pi=new m.h,this.g=a,this.Aw=d,this.no=g,this.Pm=u,this.yl=v,this.Dk.Rc(),this.Pi.Rc()}return h.prototype.xE=function(a){this.g.D(a,this.Dk),a=m.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var u=m.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return p.jG(a,u)},h.prototype.jz=function(a){return this.g.Pa(a,this.yl)},h.prototype.Py=function(a,u){return this.g.D(a,this.Dk),this.g.D(u,this.Pi),p.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},h}();m.sY=function(){};var p=function(){function h(){this.Pm=new m.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return h.iQ=function(a,u){var d=new h;return d.g=a,d.qa=u,d.Aw=u*u,d.$v=2*u,d.no=1/d.$v,d.BO()},h.Cv=function(a,u,d,g,v){return(a-=d)*a+(u-=g)*u<=v},h.jG=function(a,u){return m.O.Th(u,m.O.Th(a))},h.prototype.DO=function(a,u){this.g.Gc(a,j);for(var d=(j.y-this.Pm.y)*this.no,g=m.O.truncate((j.x-this.Pm.x)*this.no),v=m.O.truncate(d),b=d=0;1>=b;b+=1)for(var C=0;1>=C;C+=1){var M=h.jG(g+b,v+C),O=this.xl.rR(M);O!=-1&&(this.pq[d]=O,this.xs[d]=M,d++)}for(g=d-1;1<=g;g--)for(O=this.pq[g],v=g-1;0<=v;v--)if(O==this.pq[v]){this.xs[v]=-1,g!=--d&&(this.xs[g]=this.xs[d],this.pq[g]=this.pq[d]);break}for(v=0;v<d;v++)this.EO(a,this.xs[v],j,this.pq[v],u)},h.prototype.EO=function(a,u,d,g,v){for(var b=new m.h;g!=-1;g=this.xl.ER(g)){var C=this.xl.ja(g);a==C||u!=-1&&this.g.Pa(C,this.yl)!=u||(this.g.Gc(C,b),h.Cv(d.x,d.y,b.x,b.y,this.Aw)&&v.add(g))}},h.prototype.Xm=function(a,u,d){var g=this.g.Pa(a,this.qo),v=this.g.Pa(u,this.qo);return g==-1&&(g=this.zd.Ph(),this.zd.addElement(g,a),this.g.Ra(a,this.qo,g)),v==-1?this.zd.addElement(g,u):this.zd.Hy(g,v),this.g.Ra(u,this.qo,-2),u=this.YT(a,u),d&&(d=this.kw.xE(a),this.g.Ra(a,this.yl,d)),u},h.WT=function(a,u,d){a.Nb(u),d=a;var g=new m.h;h.XT(a.D(),u.D(),g),d.Cb(g)},h.XT=function(a,u,d){var g=a.x;a.x!=u.x&&(g=(1*a.x+1*u.x)/2);var v=a.y;a.y!=u.y&&(v=(1*a.y+1*u.y)/2),d.ma(g,v)},h.prototype.YT=function(a,u){var d=new m.h;this.g.D(a,d);var g=new m.h;this.g.D(u,g);var v=this.g.cG(a),b=v+(u=this.g.cG(u)),C=0,M=d.x;d.x!=g.x&&(M=(d.x*v+g.x*u)/b,C++);var O=d.y;return d.y!=g.y&&(O=(d.y*v+g.y*u)/b,C++),0<C&&this.g.Cb(a,M,O),this.g.vX(a,b),C!=0},h.prototype.BO=function(){var a=this.g.fd,u=this.g.IF();for(this.Pm=u.mz(),u=Math.max(u.ca(),u.R())/2147483646,this.$v<u&&(this.$v=u,this.no=1/this.$v),this.zd=new m.au,this.zd.At(m.O.truncate(this.g.fd/3+1)),this.zd.fn(m.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new T(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new m.dL(m.O.truncate(4*a/3),this.kw),this.xl.AW(this.g.fd),a=!1,u=this.g.ld;u!=-1;u=this.g.ue(u))for(var d=this.g.Ob(u);d!=-1;d=this.g.Rb(d))for(var g=this.g.Xa(d),v=0,b=this.g.Ja(d);v<b;v++){var C=this.kw.xE(g);this.g.Ra(g,this.yl,C),this.xl.addElement(g,C),g=this.g.U(g)}var M=new m.ia(0);for(M.Jb(10),u=this.g.ld;u!=-1;u=this.g.ue(u))for(d=this.g.Ob(u);d!=-1;d=this.g.Rb(d))for(g=this.g.Xa(d),v=0,b=this.g.Ja(d);v<b;v++){if(this.g.Pa(g,this.qo)!=-2)for(C=this.g.Pa(g,this.yl),this.xl.jd(g,C);this.DO(g,M),M.size!=0;){C=!1;for(var O=0,L=M.size;O<L;O++){var q=M.get(O),U=this.xl.ja(q);this.xl.vd(q),C=this.Xm(g,U,O+1==L)||C}if(a=a||C,M.clear(!1),!C)break}g=this.g.U(g)}return a&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),a},h.prototype.vN=function(){for(var a=new m.h,u=this.zd.je;u!=-1;u=this.zd.qz(u)){var d=this.zd.rc(u);for(this.g.D(this.zd.ja(d),a),d=this.zd.lb(d);d!=-1;d=this.zd.lb(d))this.g.mf(this.zd.ja(d),a)}},h}();m.Yt=p}(ye||(ye={})),function(m){var j=function(){function T(p){p===void 0&&(p=null),this.yg=null,this.Pb=!1,this.yg=p===null?[]:p}return T.prototype.copyTo=function(p){if(p.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");for(var h=0;h<this.yg.length;h++)p.yg.push(this.yg[h].Of())},T.prototype.count=function(){return this.yg.length},T.prototype.add=function(p){if(this.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(p.Of())},T.prototype.clear=function(){if(this.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},T.prototype.remove=function(p){if(this.Pb)throw m.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(p,1)},T.prototype.jg=function(){var p=new T;return this.copyTo(p),p},T.prototype.Of=function(){return this.jg()},T.prototype.transform=function(p,h,a,u){if(p.length<h)throw m.i.fa("invalid Argument");var d=a;for(a=0;a<this.yg.length;a++){var g=this.yg[a];if(g.qm()!=null){var v=g.Un,b=v?1:0,C=v?g.qm().getGeogcs2():g.qm().getGeogcs1();if(C=d/(C=C.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(C-1))for(d=0;d<h;d++)p[d][0]*=C,p[d][1]*=C;m.MC.geogToGeog(g.qm(),h,p,null,b),d=(v?g.qm().getGeogcs1():g.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(C=d/u,3552713678800501e-30<Math.abs(C-1))for(d=0;d<h;d++)p[d][0]*=C,p[d][1]*=C;return h},T.prototype.Nb=function(p){if(p==this)return!0;if(!(p instanceof T)||this.yg.length!=p.yg.length)return!1;for(var h=0;h<this.yg.length;h++)if(!this.yg[h].Nb(p.yg[h]))return!1;return!0},T.prototype.ix=function(){this.Pb=!0},T.prototype.toString=function(){for(var p="CGT ("+this.count()+") ",h=0,a=this.count();h<a;++h)p+=this.yg[h].toString()+", ";return 200<p.length?p.substring(0,197)+"... ("+p.length.toString()+" characters)":p},T.create=function(){return new T},T}();m.wC=j}(ye||(ye={})),function(m){var j,T=Math.PI,p=2*Math.PI,h=Math.PI/2,a=function(){function g(){}return g.TO=function(v,b){var C=new g;return C.x=v,C.y=b,C.type=0,C.Uh=0,C},g.al=function(v){var b=new g;return b.x=v.x,b.y=v.y,b.type=0,b.Uh=0,b},g.SO=function(v){var b=new g;return b.x=v.x,b.y=v.y,b.type=v.type,b.Uh=v.Uh,b},g.Pd=function(v,b,C){var M=new g;return M.x=v.x+b*Math.cos(C),M.y=v.y+b*Math.sin(C),M.type=v.type,M.Uh=v.Uh,M},g.Pu=function(v,b){var C=new g;return C.x=.5*(v.x+b.x),C.y=.5*(v.y+b.y),C.type=v.type,C.Uh=v.Uh,C},g.TE=function(v,b){var C=new g;return C.x=v.x+.001*(b.x-v.x),C.y=v.y+.001*(b.y-v.y),C.type=v.type,C.Uh=v.Uh,C},g}(),u=function(){};(j=m.fL||(m.fL={}))[j.Round=0]="Round",j[j.Bevel=1]="Bevel",j[j.Miter=2]="Miter",j[j.Square=3]="Square";var d=function(){function g(v){this.NA=this.Yb=this.wg=null,this.nd=v}return g.V=function(v,b,C,M,O,L){if(v==null||1>v.Db())throw m.i.N();return b==0||v.B()?v:((L=new g(L)).ko=v,L.Ka=b,L.qa=O,L.Ki=C,L.CA=M,L.Rx())},g.prototype.eM=function(){var v=this.ko,b=v.ac(),C=v.wc(),M=new m.h;return M.uc(C,b),M.normalize(),M.Hv(),M.scale(this.Ka),b.add(M),C.add(M),M=v.Ia(),v.Dc(b),v.Qc(C),M},g.prototype.dM=function(){var v=this.ko;if(0<this.Ka&&this.Ki!=2){var b=new m.Da;return b.ad(v,!1),this.ko=b,this.Rx()}return(v=new m.Fh(v.$)).W(this.Ka,this.Ka),v},g.prototype.tJ=function(v,b,C,M){return(b.x-v.x)*(M.x-C.x)+(b.y-v.y)*(M.y-C.y)},g.prototype.fc=function(v,b){if(b===void 0)this.Yb.push(v),this.gf++;else if(this.gf==0)this.fc(v);else{var C=this.Bw,M=this.wg[b==0?C-1:b-1],O=this.wg[b],L=this.tJ(M,O,this.Yb[this.gf-1],v);0<L?this.fc(v):0>L&&(0<this.tJ(M,O,O,this.Yb[this.gf-1])?(O=this.wg[b==0?C-2:b==1?C-1:b-2],C=a.Pd(M,this.Ka,Math.atan2(M.y-O.y,M.x-O.x)-h),this.Yb[this.gf-1]=C,this.Ki==1||this.Ki==2?(C=a.Pu(C,M),this.fc(C),C=a.Pd(M,this.Ka,this.Jv+h),(M=a.Pu(C,M)).type|=256,this.fc(M)):(C=a.Pd(M,this.Ka,this.Jv+h)).type|=256,this.fc(C),this.fc(v,b)):(C=a.Pd(O,this.Ka,this.Jv+h),this.fc(C),this.Ki==1||this.Ki==2?(C=a.Pu(C,O),this.fc(C),C=a.Pd(O,this.Ka,this.aA-h),(M=a.Pu(C,O)).type|=256,this.fc(M)):(C=a.Pd(O,this.Ka,this.aA-h)).type|=256,this.fc(C)))}},g.prototype.mE=function(){var v,b=this.Bw;this.gf=0;var C=.5*this.qa,M=0,O=0;for(v=0;v<b;v++){var L=this.wg[v],q=v==0?this.wg[b-1]:this.wg[v-1],U=v==b-1?this.wg[0]:this.wg[v+1],ee=q.x-L.x,Q=q.y-L.y,ge=U.x-L.x,ve=U.y-L.y,fe=Math.atan2(Q,ee),Ce=Math.atan2(ve,ge);if(this.Jv=fe,this.aA=Ce,v==0&&(M=fe,O=Ce),ee=ee*ve-ge*Q,Q=Ce,Ce<fe&&(Ce+=p),0<ee*this.Ka)this.Ki==1||this.Ki==2?(fe=a.Pd(L,this.Ka,fe+h),this.fc(fe),fe=a.TE(L,fe),this.fc(fe),fe=a.Pd(L,this.Ka,Ce-h),(L=a.TE(L,fe)).type|=256,this.fc(L),this.fc(fe)):(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),fe=a.Pd(L,ee,.5*(fe+Ce)),this.fc(fe,v));else if(512&L.type){for(ee=1-C/Math.abs(this.Ka),q=1,U=0>this.Ka?-T:T,-1<ee&&1>ee&&(.017453292519943295>(Q=2*Math.acos(ee))&&(Q=.017453292519943295),1<(q=m.O.truncate(T/Q+1.5))&&(U/=q)),Q=fe+h,fe=a.Pd(L,this.Ka,Q),v==0&&(fe.type|=1024),this.fc(fe,v),ee=this.Ka/Math.cos(U/2),Q+=U/2,(fe=a.Pd(L,ee,Q)).type|=1024,this.fc(fe);0<--q;)Q+=U,(fe=a.Pd(L,ee,Q)).type|=1024,this.fc(fe);(fe=a.Pd(L,this.Ka,Ce-h)).type|=1024,this.fc(fe)}else if(this.Ki==1)fe=a.Pd(L,this.Ka,fe+h),this.fc(fe,v),fe=a.Pd(L,this.Ka,Ce-h),this.fc(fe);else if(this.Ki==0)for(ee=1-C/Math.abs(this.Ka),q=1,U=Ce-h-(fe+h),-1<ee&&1>ee&&(.017453292519943295>(Q=2*Math.acos(ee))&&(Q=.017453292519943295),1<(q=m.O.truncate(Math.abs(U)/Q+1.5))&&(U/=q)),ee=this.Ka/Math.cos(.5*U),Q=fe+h+.5*U,fe=a.Pd(L,ee,Q),this.fc(fe,v);0<--q;)Q+=U,fe=a.Pd(L,ee,Q),this.fc(fe);else this.Ki==2?(ee=q.x-L.x,Q=q.y-L.y,.99999999<(q=(ee*(ge=U.x-L.x)+Q*(ve=U.y-L.y))/Math.sqrt(ee*ee+Q*Q)/Math.sqrt(ge*ge+ve*ve))?(fe=a.Pd(L,1.4142135623730951*this.Ka,Ce-.25*T),this.fc(fe,v),fe=a.Pd(L,1.4142135623730951*this.Ka,Ce+.25*T),this.fc(fe)):(q=Math.abs(this.Ka/Math.sin(.5*Math.acos(q))))>(U=Math.abs(this.CA*this.Ka))?(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),fe=a.Pd(L,ee,.5*(fe+Ce)),Ce=m.h.construct(fe.x,fe.y),fe=m.h.construct(L.x,L.y),(L=new m.h).uc(Ce,fe),(Ce=new m.h).HW(U/L.length(),L,fe),fe=(q-U)*Math.abs(this.Ka)/Math.sqrt(q*q-this.Ka*this.Ka),0<this.Ka?L.Hv():L.ar(),L.scale(fe/L.length()),(fe=new m.h).add(Ce,L),(q=new m.h).uc(Ce,L),fe=a.al(fe),this.fc(fe,v),fe=a.al(q),this.fc(fe)):(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),fe=a.Pd(L,ee,.5*(fe+Ce)),this.fc(fe,v))):(Ce=Q,0<this.Ka?(Ce>fe&&(Ce-=p),q=fe-Ce<h):(Ce<fe&&(Ce+=p),q=Ce-fe<h),q?(Q=0>(ee=1.4142135623730951*this.Ka)?fe+.25*T:fe+.75*T,fe=a.Pd(L,ee,Q),this.fc(fe,v),Q=0>ee?Ce-.25*T:Ce-.75*T,fe=a.Pd(L,ee,Q),this.fc(fe)):(ee=.5*(Ce-fe),ee=this.Ka/Math.abs(Math.sin(ee)),Ce<fe&&(Ce+=p),fe=a.Pd(L,ee,(fe+Ce)/2),this.fc(fe,v)))}return this.Jv=M,this.aA=O,this.fc(this.Yb[0],0),L=a.SO(this.Yb[this.gf-1]),this.Yb[0]=L,this.wW()},g.prototype.Au=function(v,b){if(!(2>b))for(var C=0;C<b;C++){var M=this.Yb[v+C];C!=0?this.NA.Ci(m.h.construct(M.x,M.y)):this.NA.Lt(m.h.construct(M.x,M.y))}},g.prototype.fM=function(v,b,C){var M=v.Ba(b),O=v.Vc(b);if(this.Yb=[],this.NA=C,v.dc(b)){for(b=v.Na(M);v.Na(O-1).qb(b);)O--;if(2<=O-M){for(this.Bw=O-M,this.wg=[],b=M;b<O;b++)this.wg.push(a.al(v.Na(b)));this.mE()&&this.Au(0,this.gf-1)}}else{for(b=v.Na(M);M<O&&v.Na(M+1).qb(b);)M++;for(b=v.Na(O-1);M<O&&v.Na(O-2).qb(b);)O--;if(2<=O-M){for(this.Bw=2*(O-M)-2,this.wg=[],(C=a.al(v.Na(M))).type|=1536,this.wg.push(C),b=M+1;b<O-1;b++)C=a.al(v.Na(b)),this.wg.push(C);for((C=a.al(v.Na(O-1))).type|=512,this.wg.push(C),b=O-2;b>=M+1;b--)(C=a.al(v.Na(b))).type|=1024,this.wg.push(C);if(this.mE())if(2<=this.Yb.length){for(v=-1,(O=!!(1024&this.Yb[this.gf-1].type))||(v=0),b=1;b<this.gf;b++)(M=!!(1024&this.Yb[b].type))?O||1<(O=b-1)-v+1&&this.Au(v,O-v+1):O&&(v=b-1),O=M;O||1<(O=this.gf-1)-v+1&&this.Au(v,O-v+1)}else v=0,O=this.gf-1,0<=v&&1<=O-v&&this.Au(v,O-v+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},g.prototype.wW=function(){for(var v=!1,b=0;b<this.gf;b++){var C=this.Yb[b];C.qh=b+1,C.sh=b-1,this.Yb[b]=C}for((C=this.Yb[0]).sh=this.gf-2,this.Yb[0]=C,(C=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=C,b=C=0;b<this.gf;b++)if(256&this.Yb[C].type){var M=this.GP(C);if(M==-1){v=!0;break}C=M}else C=this.Yb[C].qh;return!v&&(this.QO(C),!0)},g.prototype.GP=function(v){for(var b,C,M=this.gf-1,O=v,L=1;L<=M-2;L++){b=O=this.Yb[O].qh,C=v;for(var q=1;q<=L;q++){if(C=this.Yb[C].sh,!(256&this.Yb[C].type||256&this.Yb[b].type)){var U=this.gS(C,b);if(U!=-1)return U}b=this.Yb[b].sh}}return-1},g.prototype.gS=function(v,b){var C=this.Yb[this.Yb[v].sh],M=this.Yb[v],O=this.Yb[this.Yb[b].sh],L=this.Yb[b];if(!this.JW(C,M,O,L))return-1;var q=new u;return this.xQ(C,M,O,L,q)&&!q.bE&&m.O.bK((M.x-C.x)*(L.y-O.y)-(M.y-C.y)*(L.x-O.x))!=m.O.bK(this.Ka)?(C=this.Yb[v].sh,q.an.type=M.type,q.an.qh=b,q.an.sh=C,this.Yb[v]=q.an,q.an=this.Yb[b],q.an.sh=v,this.Yb[b]=q.an,b):-1},g.prototype.JW=function(v,b,C,M){return Math.max(v.x,b.x)>=Math.min(C.x,M.x)&&Math.max(C.x,M.x)>=Math.min(v.x,b.x)&&Math.max(v.y,b.y)>=Math.min(C.y,M.y)&&Math.max(C.y,M.y)>=Math.min(v.y,b.y)},g.prototype.xQ=function(v,b,C,M,O){O.bE=!1;var L=(b.y-v.y)*(M.x-C.x)-(b.x-v.x)*(M.y-C.y),q=(C.y-v.y)*(b.x-v.x)-(C.x-v.x)*(b.y-v.y);if(0<=(L=L==0?2:q/L)&&1>=L){var U=L;if(L=(M.y-C.y)*(b.x-v.x)-(M.x-C.x)*(b.y-v.y),q=(v.y-C.y)*(M.x-C.x)-(v.x-C.x)*(M.y-C.y),0<=(L=L==0?2:q/L)&&1>=L)return O.an=a.TO(v.x+L*(b.x-v.x),v.y+L*(b.y-v.y)),O.an.Uh=C.Uh+U*(M.Uh-C.Uh),U!=0&&U!=1||L!=0&&L!=1||(O.bE=!0),O.VY=L,O.WY=U,!((U==0||U==1)&&0<L&&1>L||(L==0||L==1)&&0<U&&1>U)}return!1},g.prototype.QO=function(v){for(;this.Yb[v].sh<v;)v=this.Yb[v].sh;var b=0,C=v;do C=this.Yb[C],this.Yb[b]=C,C=C.qh,b++;while(C!=v);this.Yb[b]=this.Yb[0],this.gf=b+1},g.prototype.$C=function(v){var b=this.ko,C=b.Ga();if(C!=null){C.Zi();for(var M=-1;C.$a();)M++,this.fM(b,M,v)}},g.prototype.Rx=function(){var v=this.ko.getType();return v==322?this.eM():v==197?this.dM():m.aa.yd(v)?((v=new m.Ta).oc(this.ko,!0),this.ko=v,this.Rx()):v==1607?(v=new m.Ta,this.$C(v),v):v==1736?(v=new m.Da,this.$C(v),v):null},g}();m.IK=d}(ye||(ye={})),function(m){var j=function(){function a(u){this.qk=u}return a.prototype.D=function(u,d){this.qk.g.D(u,d)},a.prototype.vd=function(u){var d=this.qk.Fa.ja(u);this.qk.Fa.vd(u,-1),this.qk.g.pd(d,!1)},a}(),T=function(){function a(u){this.qk=u}return a.prototype.D=function(u,d){this.qk.IT.D(u,d)},a.prototype.vd=function(u){this.qk.Fa.vd(u,-1)},a}(),p=function(){function a(u){this.qk=u}return a.prototype.D=function(u,d){d.L(this.qk.LT[u])},a.prototype.vd=function(u){this.qk.Fa.vd(u,-1)},a}(),h=function(){function a(u){u===void 0?(this.Fa=new m.Yj,this.Fa.De(20),this.g=new m.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new j(this)):u instanceof Array?(this.Fa=new m.Yj,this.Fa.De(20),this.LT=u,this.Xh=new p(this)):(this.Fa=new m.Yj,this.Fa.De(20),this.IT=u,this.Xh=new T(this))}return a.prototype.Ib=function(u){var d=u.getType();if(m.Gx.xj(d))this.jN(u);else if(m.Vk.yd(d))this.oN(u);else if(d==197)this.gN(u);else{if(d!=33)throw m.i.N("invalid shape type");this.nN(u)}},a.prototype.cR=function(){var u=new m.Sa,d=this.Fa.rc(-1),g=new m.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(d),u),g.nf(u),d=this.Fa.lb(d);d!=-1;d=this.Fa.lb(d))this.g.Vi(this.Fa.ja(d),u),g.lineTo(u);return g},a.RO=function(u){var d=new a(u),g=u.I(),v=1,b=new m.h,C=new m.h,M=new m.h;for(u.D(0,b);u.D(v,C),C.Rz(b)&&v<g-1;)v++;for(d.Fa.addElement(0,-1),d.Fa.xn(v),g=v+1;g<u.I();g++)u.D(g,M),(v=d.pC(M))!=-1&&d.Fa.Sj(v,g);for(M=new m.Sa,v=d.Fa.rc(-1),g=new m.Da(u.description),u.ve(d.Fa.ja(v),M),g.nf(M),v=d.Fa.lb(v);v!=-1;v=d.Fa.lb(v))u.ve(d.Fa.ja(v),M),g.lineTo(M);return g},a.construct=function(u,d,g){for(var v=new a(u),b=1,C=u[0];u[b].Rz(C)&&b<d-1;)b++;for(v.Fa.addElement(0,-1),v.Fa.xn(b),b+=1;b<d;b++)(C=v.pC(u[b]))!=-1&&v.Fa.Sj(C,b);for(u=0,d=v.Fa.rc(-1);d!=-1;d=v.Fa.lb(d))g[u++]=v.Fa.ja(d);return u},a.JG=function(u,d){var g=u.Ba(d),v=u.Vc(d);if(d=!u.dc(d)&&u.Nn(d),u=u.ub(0),v*=2,d&&(v-=2),6>v-(g*=2))return!0;d=new m.h;var b=new m.h,C=new m.h;u.tc(g,d),u.tc(g+2,b),u.tc(g+4,C);var M=a.Wu(b,C,d);if(M.ps()||!a.um(M.value()))return!1;var O=m.h.construct(b.x,b.y),L=new m.h;for(g+=6;g<v;g+=2)if(L.L(b),b.L(C),u.tc(g,C),(M=a.Wu(b,C,d)).ps()||!a.um(M.value())||(M=a.Wu(O,C,d)).ps()||!a.um(M.value())||(M=a.Wu(b,C,L)).ps()||!a.um(M.value()))return!1;return!0},a.prototype.jN=function(u){for(var d=new m.Sa,g=new m.h,v=0;v<u.I();v++){u.D(v,g);var b=this.Cr(g);if(b!=-1){u.ve(v,d);var C=this.g.fc(this.Ss,d);this.Fa.Sj(b,C)}}},a.prototype.gN=function(u){for(var d=new m.Sa,g=new m.h,v=0;4>v;v++){u.mB(v,g);var b=this.Cr(g);if(b!=-1){u.Hf(v,d);var C=this.g.fc(this.Ss,d);this.Fa.Sj(b,C)}}},a.prototype.oN=function(u){var d=new m.Sa,g=u.ac();if((g=this.Cr(g))!=-1){u.To(d);var v=this.g.fc(this.Ss,d);this.Fa.Sj(g,v)}g=u.wc(),(g=this.Cr(g))!=-1&&(u.Po(d),u=this.g.fc(this.Ss,d),this.Fa.Sj(g,u))},a.prototype.nN=function(u){var d=u.D();(d=this.Cr(d))!=-1&&(u=this.g.fc(this.Ss,u),this.Fa.Sj(d,u))},a.prototype.Cr=function(u){var d=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var g=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return u.Rz(g)||(d=this.Fa.xn(-5)),d}return this.pC(u)},a.prototype.pC=function(u){var d=-1;do{var g=this.Fa.rc(-1),v=this.Fa.Fc(-1),b=this.Fa.ja(g),C=this.Fa.ja(v),M=new m.h,O=new m.h;if(this.Xh.D(b,M),this.Xh.D(C,O),b=m.h.Uq(O,u,M),a.um(b))d=this.Fa.xn(-1),(M=this.nC(u,v,g))!=g&&this.oC(u,g,this.Fa.we(M));else if(a.CG(b)){O=this.Fa.sv(-1);var L=this.Fa.rc(-1),q=this.Fa.Fc(-1);for(b=new m.h,C=new m.h;L!=this.Fa.we(q);){var U=this.Fa.ja(O);this.Xh.D(U,b),U=m.h.Uq(b,u,M),a.CG(U)?(q=O,O=this.Fa.ll(O)):(L=O,O=this.Fa.Xp(O))}if(O=q,M=L,U=this.Fa.ja(O),L=this.Fa.ja(M),this.Xh.D(U,b),this.Xh.D(L,C),M!=g&&(b=m.h.Uq(C,u,b),!a.um(b)))continue;d=this.Fa.zu(M,O,-2,!1),this.oC(u,O,v),this.nC(u,M,g)}else this.sb==null&&(this.sb=new m.yb),this.sb.Dc(O),this.sb.Qc(M),0>(M=this.sb.fe(u,!0))?(M=this.Fa.we(v),this.Fa.vd(v,-1),d=this.Fa.xn(-3),this.nC(u,M,g)):1<M&&(M=this.Fa.lb(g),this.Fa.vd(g,-1),d=this.Fa.zu(-1,M,-3,!1),this.oC(u,M,v))}while(!1);return d},a.prototype.oC=function(u,d,g){if(d!=g){var v=this.Fa.ja(d),b=this.Fa.lb(d),C=new m.h,M=new m.h;for(this.Xh.D(v,C);d!=g&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(b),M),v=m.h.Uq(M,u,C),!a.um(v));)v=d,d=b,C.L(M),b=this.Fa.lb(d),this.Xh.vd(v)}},a.prototype.nC=function(u,d,g){if(d==g)return g;var v=this.Fa.ja(d),b=this.Fa.we(d),C=new m.h,M=new m.h;for(this.Xh.D(v,C);d!=g&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(b),M),v=m.h.Uq(C,u,M),!a.um(v));)v=d,d=b,C.L(M),b=this.Fa.we(d),this.Xh.vd(v);return d},a.Wu=function(u,d,g){var v=new m.Wb;v.set(d.x),v.sub(u.x);var b=new m.Wb;b.set(g.y),b.sub(u.y);var C=new m.Wb;return C.set(d.y),C.sub(u.y),(d=new m.Wb).set(g.x),d.sub(u.x),v.Ag(b),C.Ag(d),v.sub(C),v},a.um=function(u){return 0>u},a.CG=function(u){return 0<u},a}();m.Zt=h}(ye||(ye={})),function(m){var j=function(){function T(p){this.g=null,this.tH=!0,this.nd=p}return T.zU=function(p,h,a){return p=m.ta.Er(p),m.Yt.Cv(h.Lg(),h.ih(),a.Lg(),a.ih(),m.lc.ox(p))},T.CO=function(p,h){var a=new m.Sa;return m.Yt.WT(p,h,a),a},T.V=function(p,h,a,u){return(a=new T(a)).g=p,a.qa=h,a.tH=u,a.EM()},T.prototype.nM=function(p){return m.Yt.iQ(this.g,p)},T.prototype.sM=function(p){return m.$t.V(this.g,p,this.nd)},T.prototype.EM=function(){var p=this.qa,h=m.ta.Er(p),a=1.00001*(p=m.ta.rN(p));p*=1.000001;for(var u=!1,d=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),g=0,v=this.g.jS();;g++){if(g>d)throw m.i.fa("Internal Error: max number of iterations exceeded");var b=this.nM(h);if(u=u||b,this.tH&&(b=this.g.Gp(h,!0,!1)!=0,u=u||b),b=!1,(g==0||v||m.$t.kI(!0,this.g,p,null,this.nd))&&(b=this.sM(a),u=u||b),!b)break;m.mp.zp(this.nd)}return u},T}();m.Tk=j}(ye||(ye={})),function(m){var j=function(){function p(h){this.$d=this.Mc=null,this.Ys=0,this.Ub=h,this.cA=!0}return p.prototype.uv=function(h,a){var u=this.g.bc(h);if(u==null){if(!this.g.ed(h,a))return null;u=a}return u},p.prototype.Xq=function(){var h;h===void 0&&(h=!1),this.Ys++,!h&&4095&this.Ys||(this.Ys=0,m.mp.zp(this.Ub))},p.prototype.nP=function(){var h=this.g.Yq(!1),a=!1,u=new m.yb,d=new m.yb,g=new m.l;g.Oa();var v=new m.l;v.Oa();for(var b=new m.Sa,C=new m.TC,M=h.next();M!=-1;M=h.next()){m.mp.zp(this.Ub);var O=null,L=!1;if(!m.aa.Rn(this.g.ic(h.ck))){if((O=this.uv(M,u))==null)continue;if(O.A(g),g.W(this.qa,this.qa),O.Bi(this.qa)){if(!O.Bi(0))continue;L=!0,O=null}}var q=this.g.Yq(h),U=q.next();for(U!=-1&&(U=q.next());U!=-1;U=q.next()){var ee=null,Q=!1;if(!m.aa.Rn(this.g.ic(q.ck))){if((ee=this.uv(U,d))==null)continue;if(ee.A(v),ee.Bi(this.qa)){if(!ee.Bi(0))continue;Q=!0,ee=null}}var ge=0,ve=0;if(O!=null&&ee!=null)g.HG(v)&&(C.Oo(O),C.Oo(ee),C.Ea(this.qa,!1),0<(ge=C.ol(0))+(ve=C.ol(1))&&(this.g.jr(M,C,0,!0),this.g.jr(U,C,1,!0)),C.clear());else if(O!=null){var fe=new m.h;if(this.g.D(U,fe),g.contains(fe)){if(C.Oo(O),this.g.Vi(U,b),C.Kz(this.qa,b,!1),0<(ge=C.ol(0)))if(this.g.jr(M,C,0,!0),Q){for(Q=-1,fe=this.g.U(U);fe!=-1&&fe!=U&&(Q=fe,(ee=this.uv(fe,d))!=null&&ee.Bi(0));fe=this.g.U(fe));for(fe=U;fe!=-1&&(this.g.Dh(fe,C.Bf),fe!=Q);fe=this.g.U(fe));}else this.g.Dh(U,C.Bf);C.clear()}}else{if(ee==null)continue;if(fe=new m.h,this.g.D(M,fe),v.W(this.qa,this.qa),v.contains(fe)){if(C.Oo(ee),this.g.Vi(M,b),C.Kz(this.qa,b,!1),0<(ve=C.ol(0)))if(this.g.jr(U,C,0,!0),L){for(Q=-1,fe=this.g.U(M);fe!=-1&&fe!=M&&(Q=fe,(ee=this.uv(fe,d))!=null&&ee.Bi(0));fe=this.g.U(fe));for(fe=M;fe!=-1&&(this.g.Dh(fe,C.Bf),fe!=Q);fe=this.g.U(fe));}else this.g.Dh(M,C.Bf);C.clear()}}if(ge+ve!=0){if(ge!=0){if((O=this.g.bc(M))==null){if(!this.g.ed(M,u))continue;O=u,u.A(g)}else O.A(g);if(O.Bi(this.qa))break}a=!0}}}return a},p.prototype.oP=function(){return this.QU()},p.prototype.QU=function(){return new m.RC().PX(this.g,this.qa)},p.prototype.lI=function(){var h=!1;this.Mc==null&&(this.Mc=new m.Yj);var a=new m.ia(0);a.Jb(this.g.fd+1);for(var u=this.g.Yq(),d=u.next();d!=-1;d=u.next())a.add(d);this.g.nx(a,a.size),a.add(-1),u=this.g.Gd(),d=this.g.Gd(),this.$d=new m.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var g=new m.ia(0),v=new m.ia(0),b=0;new m.h;var C=this.g.td;this.g.vb.mc();for(var M,O,L=this.g.vb.za[0].o,q=a.get(b++);q!=-1;){var U=M=L[2*(O=C.T(q,0))],ee=O=L[2*O+1];do{var Q=C.T(q,2),ge=C.T(q,1);if(Q!=-1){var ve=C.T(Q,0),fe=L[2*ve];0>(ee<(ve=L[2*ve+1])?-1:ee>ve?1:U<fe?-1:U>fe?1:0)&&(v.add(q),v.add(Q))}ge!=-1&&(fe=L[2*(ve=C.T(ge,0))],0>(ee<(ve=L[2*ve+1])?-1:ee>ve?1:U<fe?-1:U>fe?1:0)&&(v.add(ge),v.add(ge))),(fe=this.g.Pa(q,u))!=-1&&(g.add(fe),this.g.Ra(q,u,-1)),(fe=this.g.Pa(q,d))!=-1&&(g.add(fe),this.g.Ra(q,d,-1)),(q=a.get(b++))!==-1&&(U=L[2*(ee=C.T(q,0))],ee=L[2*ee+1])}while(q!=-1&&U===M&&ee===O);for(U=g.size==1&&v.size==2,fe=ee=-1,Q=0,ge=g.size;Q<ge;Q++){ve=g.get(Q);var Ce=this.Mc.we(ve);if(Ce==-1||g.hG(Ce)||(ee=Ce),(ve=this.Mc.lb(ve))==-1||g.hG(ve)||(fe=ve),ee!=-1&&fe!=-1)break}for(this.$d.$J(O,M),Q=0,ge=g.size;Q<ge;Q++)ve=g.get(Q),this.Mc.vd(ve,-1);if(g.clear(!1),!U&&ee!=-1&&fe!=-1&&this.qO(ee,fe)){h=!0,this.Ni=this.$d.rm();break}for(Q=0,ge=v.size;Q<ge;Q+=2){if(O=v.get(Q),M=v.get(Q+1),U?(O=this.Mc.zu(ee,fe,O,!0),U=!1):O=this.Mc.addElement(O,-1),this.$d.rg){this.Ni=this.$d.rm(),h=!0;break}this.g.Pa(M,u)==-1?this.g.Ra(M,u,O):this.g.Ra(M,d,O)}if(h)break;v.Bh(0)}return this.g.Td(u),this.g.Td(d),h},p.prototype.qO=function(h,a){return this.$d.compare(this.Mc,this.Mc.ja(h),a),h=this.$d.rg,this.$d.Kr(),h},p.yE=function(h){for(var a=h.ld;a!=-1;a=h.ue(a))if(m.aa.Hc(h.ic(a)))return!0;return!1},p.fQ=function(h,a,u,d){return!!p.yE(h)&&((a=new p(d)).g=h,a.qa=u,15>h.fd?h=a.nP():a.oP())},p.V=function(h,a,u){return p.fQ(h,h.IF(),a,u)},p.kI=function(h,a,u,d,g){if(!p.yE(a))return!1;var v=new p(g);if(v.g=a,v.qa=u,v.cA=h,v.lI())return d!=null&&d.Wt(v.Ni),!0;var b=new m.Dd;return b.$B(),a.Oc(b),(v=new p(g)).g=a,v.qa=u,v.cA=h,h=v.lI(),b.$B(),a.Oc(b),!!h&&(d!=null&&d.Wt(v.Ni),!0)},p.Ml=function(h,a){return!(16>(h=h.I()))&&2*h+Math.log(h)*Math.LOG10E/Math.log(2)*a<1*h*a},p.lP=function(h,a,u,d){var g=a.getType();if(m.aa.Hc(g))return new p(d).mP(h,a,u);throw m.i.fa("crack_A_with_B")},p.prototype.mP=function(h,a,u){var d=new m.l;h.xc(d);var g=new m.l;if(a.xc(g),g.W(u,u),!g.isIntersecting(d))return h;var v=h.Bb,b=null;v!=null&&(b=v.Fb),p.Ml(h,h.I())&&(b=m.ta.jj(h,g));var C=b!=null?b.getIterator():null,M=a.Ga();a=h.Ga();var O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(g=[];M.$a();)for(;M.Ha();){var L=M.ha();if(b!=null){for(C.Uo(L,u),v=C.next();v!=-1;v=C.next())if(this.Xq(),a.Vb(b.ja(v),-1),a.Ha()){var q=(v=a.ha()).Ea(L,null,O,null,u);for(v=0;v<q;++v){var U=O[v];if(U!=0&&U!=1){var ee=a.wb(),Q=new T;Q.t=U,Q.index=ee,g.push(Q)}}}}else{var ge=new m.l;if(L.xc(ge),ge.W(u,u),d.isIntersecting(ge)){for(a.Zi();a.$a();)for(;a.Ha();)if(this.Xq(),v=a.ha(),U=new m.l,v.xc(U),U.isIntersecting(ge))for(q=v.Ea(L,null,O,null,u),v=0;v<q;++v)(U=O[v])!=0&&U!=1&&(ee=a.wb(),(Q=new T).t=U,Q.index=ee,g.push(Q))}}}if(g.length==0)return h;for(g=g.sort(T.Ey),h=h.Ia(),a.Zi();a.$a()&&!a.Ha(););for(u=a.ha(),d=new m.ig,b=-1,v=0,C=g.length;v<C;){for(O=g[v].index,M=v+1;M<C&&g[M].index==O;)++M;for(;a.wb()<O;){if(this.Xq(),L=a.Ha(),U=a.gb,(ge=L||!a.On()||a.Pn())&&h.oc(u,b!=U),b=U,!L)for(;a.$a()&&!a.Ha(););u=a.ha()}for(O=0;v<M;v++)(U=g[v].t)!=O&&(u.ah(O,U,d),O=U,U=a.gb,h.oc(d.get(),b!=U),b=U);if((ge=(L=a.Ha())||!a.On()||a.Pn())&&(u.ah(O,1,d),h.oc(d.get(),!1)),L)u=a.ha();else{for(;a.$a()&&!a.Ha(););u=a.Ha()?a.ha():null}v=M}for(u!=null&&(U=a.gb,(ge=(L=a.Ha())||!a.On()||a.Pn())&&h.oc(u,b!=U),b=U),L=a.Ha();;){if(!L){for(;a.$a()&&!(L=a.Ha()););if(!L)break}u=a.ha(),U=a.gb,(ge=(L=a.Ha())||!a.On()||a.Pn())&&h.oc(u,b!=U),b=U}return h},p}();m.$t=j;var T=function(){function p(){}return p.Ey=function(h,a){return h.index==a.index?h.t>a.t?1:h.t<a.t?-1:0:h.index>a.index?1:-1},p}()}(ye||(ye={})),function(m){var j;(j=m.KK||(m.KK={}))[j.Left=0]="Left",j[j.Right=1]="Right",j[j.Coincident=2]="Coincident",j[j.Undefined=3]="Undefined",j[j.Uncut=4]="Uncut";var T=function(a,u,d,g,v,b,C,M,O,L,q){this.X=a,this.bt=u,this.Ns=d,this.tg=g,this.Lm=L,this.Al=q};m.uY=T;var p=function(){function a(u,d){this.JH=u,this.Hi=d}return a.prototype.qM=function(u,d){var g=new m.h;this.Hi.D(u,g);var v=new m.h;return this.Hi.D(d,v),(g=g.compare(v))!=0?g:(u=this.Hi.Pa(u,this.JH))<(d=this.Hi.Pa(d,this.JH))?-1:u==d?0:1},a}(),h=function(a,u,d,g,v,b,C,M,O){this.tg=a,this.Ns=u,this.OA=d,this.UH=g,this.Ei=v,this.Al=b,this.Lm=C,this.VH=M,this.OT=O};m.tY=h,m.LK=function(){function a(){}return a.JK=function(u,d,g,v,b,C){if(d.B())u=new T(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),b.push(u);else if(g.B())u=new T(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),b.push(u);else{var M=new m.gd;if(M.Ib(d),M.Ib(g),m.Tk.V(M,v,C,!0),M.fd==0)u=new T(d.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),b.push(u);else{for(d=0,g=M.Gd(),v=M.ld;v!=-1;v=M.ue(v))for(C=M.Ob(v);C!=-1;C=M.Rb(C))for(var O=M.Xa(C),L=0,q=M.Ja(C);L<q;O=M.U(O),L++)M.Ra(O,g,d++);d=a.HM(g,M),a.cM(u,d,M,b)}}},a.HM=function(u,d){for(var g=d.fd,v=new m.ia(0),b=d.ld;b!=-1;b=d.ue(b))for(var C=d.Ob(b);C!=-1;C=d.Rb(C))for(var M=d.Xa(C),O=0,L=d.Ja(C);O<L;M=d.U(M),O++)v.add(M);var q=new p(u,d);v.Vd(0,g,function(dt,ut){return q.qM(dt,ut)}),u=[];var U=[],ee=d.Gd(),Q=d.Gd();b=d.ld,C=d.ue(b),L=new m.h;var ge=new m.h,ve=v.get(0),fe=d.bd(ve),Ce=d.Qf(fe);d.D(ve,L);var Ie=1;for(M=0;Ie<g-1;){var Ne=!1;for(O=Ie;O<g;O++)if(O!=M){var Ve=v.get(O),Xe=d.bd(Ve),et=d.Qf(Xe);if(d.D(Ve,ge),!L.qb(ge))break;Ce==b&&et==C&&(Ne=a.uM(ee,Q,d,u,U,fe,ve,Xe,Ve))}if(Ne||M==Ie-1){if(Ne&&M==Ie-1&&Ie--,++M==g)break;ve=v.get(M),fe=d.bd(ve),Ce=d.Qf(fe),d.D(ve,L)}Ne||(Ie=M+1)}for(g=[],b=d.ld;b!=-1;b=d.ue(b))for(C=d.Ob(b);C!=-1;C=d.Rb(C))for(v=d.Xa(C),O=0,L=d.Ja(C);O<L;v=d.U(v),O++){if(0<=(M=d.Pa(v,Q)))for(;M<U.length&&U[M].tg==v;)g.push(U[M++]);if(0<=(M=d.Pa(v,ee)))for(;M<u.length&&u[M].tg==v;)g.push(u[M++])}return d.Td(ee),d.Td(Q),g},a.uM=function(u,d,g,v,b,C,M,O,L){var q=g.rj(C),U=g.rj(O),ee=g.Xa(C),Q=g.Xa(O),ge=g.Ma(M),ve=g.Ma(L),fe=!1,Ce=!1,Ie=!1,Ne=!1;return M!=ee&&(L!=Q&&(fe=a.vM(u,g,v,C,ge,O,ve)),L!=U&&(Ce=a.wM(u,g,v,C,ge,O,L))),M!=q&&(L!=Q&&(Ie=a.xM(d,g,b,C,M,O,ve,ee)),L!=U&&(Ne=a.yM(d,g,b,C,M,O,L,ee))),fe&&Ce&&Ie?(u=v.length-1,b[Ne?b.length-2:b.length-1].Ei==2&&(v[u-1]=v[u],--v.length)):fe&&Ce&&Ne&&b[b.length-1].Ei==2&&(b=v[v.length-1],--v.length,g.Pa(b.tg,u)==v.length&&g.Ra(b.tg,u,-1)),fe||Ce||Ie||Ne},a.vM=function(u,d,g,v,b,C,M){var O=new m.yb,L=new m.yb,q=[0,0],U=[0,0],ee=d.bc(b);return ee==null&&(d.ed(b,O),ee=O),(O=d.bc(M))==null&&(d.ed(M,L),O=L),2>(ee=ee.Ea(O,null,q,U,0))&&(v=new h(b,v,q[0],NaN,ee,M,C,U[0],NaN),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1)),!0},a.wM=function(u,d,g,v,b,C,M){var O=new m.yb,L=new m.yb,q=[0,0],U=[0,0],ee=d.bc(b);return ee==null&&(d.ed(b,O),ee=O),(O=d.bc(M))==null&&(d.ed(M,L),O=L),2>(ee=ee.Ea(O,null,q,U,0))&&(v=new h(b,v,q[0],NaN,ee,M,C,U[0],NaN),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),!0)},a.xM=function(u,d,g,v,b,C,M,O){var L=new m.yb,q=new m.yb,U=[0,0],ee=[0,0],Q=d.bc(b);return Q==null&&(d.ed(b,L),Q=L),(L=d.bc(M))==null&&(d.ed(M,q),L=q),(Q=Q.Ea(L,null,U,ee,0))==2?(v=new h(b,v,U[0],U[1],Q,M,C,ee[0],ee[1]),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),!0):(q=!1,b==O&&(v=new h(b,v,U[0],NaN,Q,M,C,ee[0],NaN),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),q=!0),q)},a.yM=function(u,d,g,v,b,C,M,O){var L=new m.yb,q=new m.yb,U=[0,0],ee=[0,0],Q=d.bc(b);return Q==null&&(d.ed(b,L),Q=L),(L=d.bc(M))==null&&(d.ed(M,q),L=q),(Q=Q.Ea(L,null,U,ee,0))==2?(v=new h(b,v,U[0],U[1],Q,M,C,ee[0],ee[1]),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),!0):(q=!1,b==O&&(v=new h(b,v,U[0],NaN,Q,M,C,ee[0],NaN),g.push(v),0>(v=d.Pa(b,u))&&d.Ra(b,u,g.length-1),q=!0),q)},a.cM=function(u,d,g,v){var b=[];b[0]=new m.h,b[1]=new m.h,b[2]=new m.h,b[3]=new m.h;var C=new m.h,M=new m.h,O=new m.h,L=new m.h,q=null;v!=null&&(q=new m.ig).Or();var U=0,ee=null,Q=new m.yb;new m.yb;for(var ge=g.Ob(g.ld);ge!=-1;ge=g.Rb(ge)){for(var ve=4,fe=-1,Ce=-1,Ie=-1,Ne=-1,Ve=NaN,Xe=!0,et=!1,dt=!0,ut=!0,mt=!0,lt=0,gi=ge,oi=0,Ni=g.Xa(ge),Ki=g.Ja(ge),_s=0;_s<Ki;Ni=g.U(Ni),_s++){var as=g.bc(Ni);if(as==null){if(!g.ed(Ni,Q))continue;as=Q}Ce==-1&&(Ce=Ni);for(var $i=0;U<d.length&&Ni==d[U].tg;){fe=d[U].Ns;var ci=d[U].tg,Kt=d[U].OA,Xs=d[U].Lm,Ps=d[U].Al,Qn=d[U].VH;if(d[U].Ei==2){if(et||(gi=fe,Ce=ci,oi=Kt,Ie=Xs,Ne=Ps,Ve=Qn,ve=2,v!=null?ee=new m.Ta:lt=0,mt=!1,ut=!0),Kt=d[U].UH,Qn=d[U].OT,v!=null?(as.ah($i,d[U].UH,q),ee.oc(q.get(),ut)):lt++,$i=Kt,et=!0,ut=Xe=!1,U+1==d.length||d[U+1].Ei!=2||d[U+1].tg==ci&&d[U+1].OA!=$i){if(v!=null){var wi=new T(ee,2,fe,ci,Kt,ve,gi,Ce,oi,Xs,Ps);v.push(wi)}else null.add(lt);gi=fe,Ce=ci,oi=Kt,Ie=Xs,Ne=Ps,Ve=Qn,ve=2,et=Xe=!1,ut=mt=!0}}else{var sn=g.U(ci);if(U<d.length-1&&d[U+1].tg==sn&&d[U+1].Al==Ps&&d[U+1].Ei==2)Kt!=$i&&(mt&&(v!=null?ee=new m.Ta:lt=0),Xe=0<U&&d[U-1].Ns==fe?ve==1?0:ve==0?1:3:3,v!=null?(as.ah($i,Kt,q),ee.oc(q.get(),ut),wi=new T(ee,Xe,fe,ci,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):(lt++,null.add(lt)),$i=Kt,gi=fe,Ce=ci,oi=Kt,Ie=Xs,Ne=Ps,Ve=Qn,ve=Xe,Xe=dt=!1,ut=mt=!0);else if(!a.CM(u,g,d,U,C,M)){a.zM(g,d,U,ge,Ni,O,L);var ns=!1;if(sn=!1,wi=!0,!(C.qb(O)||M.qb(O)||C.qb(L)||M.qb(L))){b[0].L(C),b[1].L(M),b[2].L(O),b[3].L(L),b.sort(m.h.nu);var dr=b[0],Jc=b[1],Yu=b[2],ze=b[3];dr.qb(C)?Jc.qb(M)?u?(sn=ns=!0,wi=!1):ns=!1:ze.qb(M)?u?wi=sn=ns=!0:ns=!1:(ns=!0,wi=Jc.qb(O)):Jc.qb(C)?Yu.qb(M)?u?(sn=ns=!0,wi=!1):ns=!1:dr.qb(M)?u?wi=sn=ns=!0:ns=!1:(ns=!0,wi=Yu.qb(O)):Yu.qb(C)?ze.qb(M)?u?(sn=ns=!0,wi=!1):ns=!1:Jc.qb(M)?u?wi=sn=ns=!0:ns=!1:(ns=!0,wi=ze.qb(O)):dr.qb(M)?u?(sn=ns=!0,wi=!1):ns=!1:Yu.qb(M)?u?wi=sn=ns=!0:ns=!1:(ns=!0,wi=dr.qb(O))}ns&&(ns=Ni==ci,(Kt!=$i||ns&&$i==0)&&(mt&&(v!=null?ee=new m.Ta:lt=0),v!=null?(as.ah($i,Kt,q),ee.oc(q.get(),ut)):lt++),wi?ve!=1?((Kt!=$i||ns&&$i==0)&&(v!=null?(wi=new T(ee,1,fe,ci,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)),sn?(U>=d.length-2||d[U+2].Ns!=fe)&&(ve=0):ve=1):((Kt!=$i||ns&&$i==0)&&(v!=null?(wi=new T(ee,3,fe,ci,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)),ve=1):ve!=0?((Kt!=$i||ns&&$i==0)&&(v!=null?(wi=new T(ee,0,fe,ci,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)),sn?(U>=d.length-2||d[U+2].Ns!=fe)&&(ve=1):ve=0):((Kt!=$i||ns&&$i==0)&&(v!=null?(wi=new T(ee,3,fe,ci,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)),ve=0),(Kt!=$i||ns&&$i==0)&&($i=Kt,gi=fe,Ce=ci,oi=Kt,Ie=Xs,Ne=Ps,Ve=Qn,Xe=dt=!1,ut=mt=!0))}}U++}$i!=1&&(mt&&(v!=null?ee=new m.Ta:lt=0),v!=null?(as.ah($i,1,q),ee.oc(q.get(),ut)):lt++,ut=mt=!1,dt=!0)}dt&&(Kt=1,ci=g.rj(ge),ci=g.Ma(ci),Ps=Xs=-1,Qn=NaN,Xe?v!=null?(wi=new T(ee,4,fe,ci,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt):(Xe=ve==1?0:ve==0?1:3,v!=null?(wi=new T(ee,Xe,fe,ci,Kt,ve,gi,Ce,oi,Xs,Ps),v.push(wi)):null.add(lt)))}},a.CM=function(u,d,g,v,b,C){var M=g[v].VH;if(M==1)return a.AM(u,d,g,v,b,C);if(M==0)return a.BM(u,d,g,v,b,C);throw m.i.Qa()},a.AM=function(u,d,g,v,b,C){var M=new m.yb,O=g[v].tg,L=g[v].Lm,q=g[v].Al,U=-1,ee=-1,Q=-1,ge=-1;if(!u&&0<v){var ve=g[v-1];U=ve.tg,ee=ve.Lm,Q=ve.Al,ge=ve.Ei}var fe=-1,Ce=-1,Ie=-1,Ne=-1;v<g.length-1&&(fe=(ve=g[v+1]).tg,Ce=ve.Lm,Ie=ve.Al,Ne=ve.Ei);var Ve=d.U(O);return ve=d.U(q),u?v==g.length-1||fe!=O||Ce!=L||Ie!=ve||Ne==2?((u=d.bc(q))==null&&(d.ed(q,M),u=M),C.L(u.kg()),b.mt(C),C.normalize(),b.normalize(),!1):((u=d.bc(q))==null&&(d.ed(q,M),u=M),b.L(u.kg()),(u=d.bc(ve))==null&&(d.ed(ve,M),u=M),C.L(u.kg()),b.Sq(),C.normalize(),b.normalize(),!1):0<v&&U==O&&ee==L&&Q==ve&&ge==2||v<g.length-1&&fe==Ve&&Ce==L&&Ie==ve&&Ne==2?((u=d.bc(q))==null&&(d.ed(q,M),u=M),C.L(u.kg()),b.mt(C),C.normalize(),b.normalize(),!1):!(v<g.length-1&&fe==O&&Ce==L&&Ie==ve)||((u=d.bc(q))==null&&(d.ed(q,M),u=M),b.L(u.kg()),(u=d.bc(ve))==null&&(d.ed(ve,M),u=M),C.L(u.kg()),b.Sq(),C.normalize(),b.normalize(),!1)},a.BM=function(u,d,g,v,b,C){var M=new m.yb,O=g[v].tg,L=g[v].Lm,q=g[v].Al,U=-1,ee=-1,Q=-1,ge=-1;if(!u&&v<g.length-1){var ve=g[v+1];U=ve.tg,ee=ve.Lm,Q=ve.Al,ge=ve.Ei}var fe=-1,Ce=-1,Ie=-1;ve=-1,0<v&&(fe=(ve=g[v-1]).tg,Ce=ve.Lm,Ie=ve.Al,ve=ve.Ei);var Ne=d.U(O),Ve=d.Ma(q);return u?v!=0&&fe==O&&Ce==L&&Ie==Ve&&ve!=2||((u=d.bc(q))==null&&(d.ed(q,M),u=M),C.L(u.kg()),b.mt(C),C.normalize(),b.normalize(),!1):!(0<v&&fe==O&&Ce==L&&Ie==Ve&&ve==2||v<g.length-1&&U==Ne&&ee==L&&Q==Ve&&ge==2)||((u=d.bc(q))==null&&(d.ed(q,M),u=M),C.L(u.kg()),b.mt(C),C.normalize(),b.normalize(),!1)},a.zM=function(u,d,g,v,b,C,M){var O=new m.yb,L=u.bc(b);if(L==null&&(u.ed(b,O),L=O),d=(g=d[g]).tg,g=g.OA,b=u.U(d),g==1)C.L(L.kg()),b!=-1&&b!=u.rj(v)?((L=u.bc(b))==null&&(u.ed(b,O),L=O),M.L(L.kg()),(L=u.bc(d))==null&&u.ed(d,O)):M.L(C),C.Sq(),M.normalize(),C.normalize();else{if(g!=0)throw m.i.Qa();M.L(L.kg()),C.mt(M),M.normalize(),C.normalize()}},a}()}(ye||(ye={})),function(m){var j;(j=m.bM||(m.bM={}))[j.Linear=0]="Linear",j[j.Angular=1]="Angular",j[j.Area=2]="Area";var T=function(){function v(b,C,M){this.od=C,this.ai=M,this.vA=b}return v.prototype.Nb=function(b){return b instanceof v&&this.ai===b.ai},v.aG=function(b){return b.od!==0?null:b.vA===-1?new v(-1,2,b.ai*b.ai):v.Zg(d[b.vA])},v.Zg=function(b){return(b=u[b])===void 0?null:b},v.ZO=function(b,C,M){var O=null;if(M!=null)try{M.values[0]==="EPSG"&&(O=v.Zg(parseInt(M.values[1])))}catch{}return O===null&&(O=new v(-1,b,C)),O},v.prototype.Ec=function(){return this.vA},v.prototype.CF=function(b){if(b.od!=this.od)throw m.i.Hb();return this.ai/b.ai},v.Nh=function(b,C,M){return C.CF(M)*b},v.XE=function(b,C,M,O,L){for(M=M.CF(O),O=0;O<C;O++)L[O]=b[O]*M},v}();m.Tc=T;for(var p=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],h=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],a=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],u=[],d=[],g=0;g<p.length;g+=2)u[p[g]]=new T(p[g],2,p[g+1]);for(p=null,g=0;g<h.length;g+=2)u[h[g]]=new T(h[g],1,h[g+1]);for(h=null,g=0;g<a.length;g+=3)u[a[g]]=new T(a[g],0,a[g+1]),d[a[g]]=a[g+2];a=null}(ye||(ye={})),function(m){var j=function(){function T(){this.xb=this.pb=0}return T.prototype.set=function(p,h){h!==void 0?(this.pb=p,this.xb=h):typeof p=="number"?(this.pb=p,this.xb=0):(this.pb=p.pb,this.xb=p.xb)},T.prototype.value=function(){return this.pb},T.prototype.add=function(p){var h=this.pb+p.pb;p=this.xb+p.xb+2220446049250313e-31*Math.abs(h),this.pb=h,this.xb=p},T.prototype.kN=function(){var p=this.pb+1,h=this.xb+2220446049250313e-31*Math.abs(p);this.pb=p,this.xb=h},T.prototype.dN=function(p,h){this.pb=p.pb+h.pb,this.xb=p.xb+h.xb+2220446049250313e-31*Math.abs(this.pb)},T.prototype.sub=function(p){if(typeof p=="number"){var h=this.pb-p;p=this.xb+2220446049250313e-31*Math.abs(h)}else h=this.pb-p.pb,p=this.xb+p.xb+2220446049250313e-31*Math.abs(h);this.pb=h,this.xb=p},T.prototype.Ag=function(p){var h=this.pb*p.pb;this.xb=this.xb*Math.abs(p.pb)+p.xb*Math.abs(this.pb)+this.xb*p.xb+2220446049250313e-31*Math.abs(h),this.pb=h},T.prototype.No=function(p){var h=this.pb*p;this.xb=this.xb*Math.abs(p)+2220446049250313e-31*Math.abs(h),this.pb=h},T.prototype.Kl=function(p,h){var a=Math.abs(p.pb)*Math.abs(h.pb);this.xb=p.xb*Math.abs(h.pb)+h.xb*Math.abs(p.pb)+p.xb*h.xb+2220446049250313e-31*Math.abs(a),this.pb=a},T.prototype.jm=function(p){var h=Math.abs(p.pb),a=this.pb/p.pb,u=(this.xb+Math.abs(a)*p.xb)/h;p.xb>.01*h&&(u*=1+(1+(p=p.xb/h))*p),this.pb=a,this.xb=u+2220446049250313e-31*Math.abs(a)},T.prototype.sqrt=function(){if(0<=this.pb){var p=Math.sqrt(this.pb),h=this.pb>10*this.xb?.5*this.xb/p:this.pb>this.xb?p-Math.sqrt(this.pb-this.xb):Math.max(p,Math.sqrt(this.pb+this.xb)-p);h+=2220446049250313e-31*Math.abs(p)}else this.pb<-1*this.xb?h=p=NaN:(p=0,h=Math.sqrt(this.xb));this.pb=p,this.xb=h},T.prototype.sin=function(p){var h=Math.sin(p.pb),a=Math.cos(p.pb);this.pb=h,h=Math.abs(h),this.xb=(Math.abs(a)+.5*h*p.xb)*p.xb+2220446049250313e-31*h},T.prototype.cos=function(p){var h=Math.sin(p.pb),a=Math.cos(p.pb);this.pb=a,a=Math.abs(a),this.xb=(Math.abs(h)+.5*a*p.xb)*p.xb+2220446049250313e-31*a},T.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},T.prototype.ps=function(){return this.qg()&&this.xb!=0},T}();m.Wb=j}(ye||(ye={}));var Ai=new ye.h,pn=new ye.h,ms=new ye.h,Zi=new ye.h,tn=new ye.h;(function(m){var j,T;(T=j||(j={}))[T.closedPath=1]="closedPath",T[T.exteriorPath=2]="exteriorPath",T[T.ringAreaValid=4]="ringAreaValid";var p=function(){function h(a,u,d,g,v,b,C){u!==void 0?(this.ib=a,this.ck=u,this.bl=d,this.ii=g,this.ya=b,this.hA=C,this.ew=v):(this.ib=a.ib,this.ck=a.ck,this.bl=a.bl,this.ii=a.ii,this.ya=a.ya,this.hA=a.hA,this.ew=a.ew),this.bH=!0}return h.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},h.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!m.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},h.AP=function(a,u,d,g,v,b,C){return new h(a,u,d,g,v,b,C)},h}();m.zY=p,j=function(){function h(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return h.prototype.Sh=function(a){return this.We!=null?this.We[a]:null},h.prototype.Xg=function(a,u){if(this.We==null){if(u==null)return;this.We=[];for(var d=0,g=this.vb.I();d<g;d++)this.We.push(null)}this.We[a]=u},h.prototype.bp=function(a,u){this.md.S(a,1,u)},h.prototype.ap=function(a,u){this.md.S(a,2,u)},h.prototype.VB=function(a,u){this.md.S(a,6,u)},h.prototype.Sp=function(a){return this.md.T(a,6)},h.prototype.gx=function(a,u){this.md.S(a,7,u)},h.prototype.qv=function(a){return this.md.T(a,0)},h.prototype.OJ=function(a,u){this.cd.S(a,1,u)},h.prototype.SJ=function(a,u){this.cd.S(a,0,u)},h.prototype.JF=function(a){return this.cd.T(a,7)},h.prototype.Zo=function(a,u){this.cd.S(a,3,u)},h.prototype.$o=function(a,u){this.cd.S(a,4,u)},h.prototype.uU=function(a){this.cd==null&&(this.cd=new m.$c(8));var u=this.cd.Ce();return this.cd.S(u,2,a),this.cd.S(u,5,0),this.cd.S(u,6,0),this.cd.S(u,7,u),u},h.prototype.OQ=function(a){this.cd.jd(a)},h.prototype.wU=function(a){this.md==null&&(this.md=new m.$c(8),this.td=new m.$c(5),this.Oi=new m.be(0),this.vo=new m.be(0));var u=this.md.Ce();return this.md.S(u,0,u),this.md.S(u,3,0),this.md.S(u,6,0),this.gx(u,a),u>=this.Oi.size&&(a=16>u?16:m.O.truncate(3*u/2),this.Oi.resize(a),this.vo.resize(a)),this.Oi.set(u,0),this.vo.set(u,0),u},h.prototype.sF=function(a){this.md.jd(a)},h.prototype.Vy=function(a){this.td.jd(a),this.fd--},h.prototype.oI=function(a){this.md==null&&(this.md=new m.$c(8),this.td=new m.$c(5),this.Oi=new m.be(0),this.vo=new m.be(0));var u=this.td.Ce(),d=0<=a?a:u;if(this.td.S(u,0,d),0>a){if(d>=this.vb.I()){if(a=16>d?16:m.O.truncate(3*d/2),this.vb.resize(a),this.We!=null)for(var g=0;g<a;g++)this.We.push(null);this.Sg!=null&&this.Sg.resize(a),this.it=this.vb.ub(0)}this.vb.Cb(d,-1e38,-1e38),this.We!=null&&(this.We[d]=null),this.Sg!=null&&this.Sg.write(d,1)}return this.td.S(u,4,2*d),this.fd++,u},h.prototype.wj=function(a,u,d){var g=u!=-1?this.Ma(u):this.rj(a),v=g!=-1?this.U(g):-1,b=this.oI(d==null?this.fd:-1),C=this.Ua(b);return d!=null&&this.vb.Ht(C,d),this.aj(b,a),this.Bc(b,v),this.Cc(b,g),v!=-1&&this.Cc(v,b),g!=-1&&this.Bc(g,b),d=this.dc(a),g=this.Xa(a),u==-1&&this.Wg(a,b),u==g&&this.Jf(a,b),d&&v==-1&&(this.Bc(b,b),this.Cc(b,b)),this.Vj(a,this.Ja(a)+1),a=this.Qf(a),this.Tj(a,this.I(a)+1),b},h.prototype.nm=function(){return this.jo==null&&(this.jo=new m.Sa(this.vb.description)),this.jo},h.prototype.Yo=function(a,u){this.cd.S(a,2,-134217729&this.cd.T(a,2)||(u==1?134217728:0))},h.prototype.In=function(a){return 134217728&this.cd.T(a,2)?1:0},h.prototype.hN=function(a){var u=this.Ig(a.getType(),a.description);return a.getType()==1736&&this.Yo(u,a.In()),this.UD(u,a),u},h.prototype.iN=function(a){var u=this.Ig(a.getType(),a.description);return this.VD(u,a),u},h.prototype.XV=function(a,u){this.md==null&&(this.md=new m.$c(8),this.td=new m.$c(5),this.Oi=new m.be(0),this.vo=new m.be(0)),this.md.De(this.md.Hg+a),this.td.De(this.td.Hg+u),this.Oi.Jb(this.Oi.size+a),this.vo.Jb(this.vo.size+a)},h.prototype.UD=function(a,u){this.XV(u.da(),u.I()),this.Il.Fd(u,0,u.I()),this.it=this.vb.ub(0);for(var d=this.We!=null&&u.Ve!=null,g=0,v=u.da();g<v;g++)if(!(2>u.Ja(g))){var b=this.vf(a,-1);this.kn(b,u.dc(g));for(var C=u.Ba(g),M=u.Vc(g);C<M;C++){var O=this.wj(b,-1,null);if(d)if(O=this.Ua(O),1&u.ZF(C))this.Xg(O,null);else{var L=new m.ig;u.bc(C,L,!0),this.Xg(O,L.get())}}}},h.prototype.VD=function(a,u){this.Il.Fd(u,0,u.I()),this.it=this.vb.ub(0),a=this.vf(a,-1);var d=0;for(u=u.I();d<u;d++)this.wj(a,-1,null)},h.prototype.NX=function(a,u,d){var g=this.U(a);if(g==-1)throw m.i.Qa();for(var v=this.nm(),b=this.bd(a),C=0,M=u.ol(d);C<M;C++){var O=this.Ua(a),L=this.U(a),q=u.Vp(d,C);C==0&&(q.To(v),this.Dh(a,v)),q.getType()==322?this.Xg(O,null):this.Xg(O,m.aa.jg(q)),q.Po(v),C<M-1?a=this.wj(b,L,v):this.Dh(g,v)}},h.prototype.MX=function(a,u,d){var g=this.U(a);if(g==-1)throw m.i.Qa();for(var v=this.nm(),b=this.bd(a),C=0,M=u.ol(d);C<M;C++){var O=this.Ua(a),L=this.U(a),q=u.Vp(d,M-C-1);C==0&&(q.Po(v),this.Dh(a,v)),q.getType()==322?this.Xg(O,null):this.Xg(O,m.aa.jg(q)),q.To(v),C<M-1?a=this.wj(b,L,v):this.Dh(g,v)}},h.prototype.IF=function(){var a=new m.l;a.Oa();for(var u=this.Yq(),d=new m.h,g=!0,v=u.next();v!=-1;v=u.next())this.D(v,d),g?a.Zb(d.x,d.y):a.Lk(d.x,d.y),g=!1;return a},h.prototype.Ib=function(a){var u=a.getType();if(m.aa.Hc(u))return this.hN(a);if(u==550)return this.iN(a);throw m.i.Qa()},h.prototype.uN=function(a,u){var d=u.getType();if(m.aa.Hc(d))this.UD(a,u);else{if(d!=550)throw m.i.Qa();this.VD(a,u)}},h.prototype.mN=function(a,u){var d=this.Ig(1736,a.description);if(2>a.Ja(u))return d;this.Il.Fd(a,a.Ba(u),a.Vc(u)),this.it=this.vb.ub(0);var g=this.vf(d,-1);this.kn(g,a.dc(u)||!0);var v=this.We!=null&&a.Ve!=null,b=a.Ba(u);for(u=a.Vc(u);b<u;b++){var C=this.wj(g,-1,null);if(v)if(C=this.Ua(C),1&a.ZF(b))this.Xg(C,null);else{var M=new m.ig;a.bc(b,M,!0),this.Xg(C,M.get())}}return d},h.prototype.Ne=function(a){var u=this.ic(a),d=m.ZK.Ig(u,this.Il.description),g=this.I(a);if(g==0)return d;if(m.aa.Hc(u)){u=this.da(a);for(var v=m.Yc.Oh(u+1),b=m.Yc.Mr(u+1,0),C=d.description,M=0,O=C.Aa;M<O;M++){for(var L=C.kd(M),q=m.ra.Va(L),U=m.Yc.YE(L,g),ee=this.vb.ub(L),Q=0,ge=0,ve=0,fe=this.Ob(a);fe!=-1;fe=this.Rb(fe)){var Ce=0;this.dc(fe)&&(Ce|=1),this.YS(fe)&&(Ce|=4),Ce!=0&&b.zJ(ge,Ce);var Ie=this.Ja(fe);if(v.write(ge++,ve),ve+=Ie,L==0){Ie=ee;var Ne=U,Ve=new m.h;for(Ce=this.Xa(fe);Q<ve;Ce=this.U(Ce),Q++){var Xe=this.Ua(Ce);Ie.tc(2*Xe,Ve),Ne.Tt(2*Q,Ve)}}else for(Ce=this.Xa(fe);Q<ve;Ce=this.U(Ce),Q++)for(Xe=this.Ua(Ce),Ne=0;Ne<q;Ne++)Ve=ee.eg(Xe*q+Ne),U.pr(Q*q+Ne,Ve)}d.hn(L,U),v.write(u,g)}d.PJ(b),d.QJ(v),d.Pc(16777215)}else if(u==550){for(C=d.description,d.resize(g),M=0,O=C.Aa;M<O;M++){for(L=C.kd(M),q=m.ra.Va(L),U=d.ub(L),ee=this.vb.ub(L),Q=0,fe=this.Ob(a),Ie=this.Ja(fe),Ce=this.Xa(fe);Q<Ie;Ce=this.U(Ce),Q++)for(Xe=this.Ua(Ce),Ne=0;Ne<q;Ne++)Ve=ee.eg(Xe*q+Ne),U.pr(Q*q+Ne,Ve);d.hn(L,U)}d.Pc(16777215)}return d},h.prototype.BB=function(a){for(var u=this.Ob(a);u!=-1;u=this.Zq(u));u=this.PR(a);var d=this.ue(a);u!=-1?this.OJ(u,d):this.ld=d,d!=-1?this.SJ(d,u):this.qw=u,this.OQ(a)},h.prototype.Ig=function(a,u){return u===void 0?this.$E(a,m.ee.og()):this.$E(a,u)},h.prototype.$E=function(a,u){return a=this.uU(a),this.vb==null?this.vb=this.Il=new m.de(u):this.Il.Jl(u),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=a:(this.SJ(a,this.qw),this.OJ(this.qw,a)),this.qw=a},h.prototype.ue=function(a){return this.cd.T(a,1)},h.prototype.PR=function(a){return this.cd.T(a,0)},h.prototype.ic=function(a){return 2147483647&this.cd.T(a,2)},h.prototype.HJ=function(a,u,d){u=this.wk[u],(a=this.JF(a))>=u.size&&u.resize(Math.max(m.O.truncate(1.25*a),16),-1),u.write(a,d)},h.prototype.KF=function(a,u){return(a=this.JF(a))<(u=this.wk[u]).size?u.read(a):-1},h.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var a=0;a<this.wk.length;a++)if(this.wk[a]==null)return this.wk[a]=m.Yc.Oh(0),a;return this.wk.push(m.Yc.Oh(0)),this.wk.length-1},h.prototype.xW=function(a){this.wk[a]=null},h.prototype.Ob=function(a){return this.cd.T(a,3)},h.prototype.kv=function(a){return this.cd.T(a,4)},h.prototype.I=function(a){return this.cd.T(a,5)},h.prototype.da=function(a){return this.cd.T(a,6)},h.prototype.Gp=function(a,u,d){for(var g=0,v=this.ld;v!=-1;v=this.ue(v)){var b=this.ic(v);if(m.aa.Hc(b)&&(!d||b==1736)){b=this.ic(v)==1736;for(var C=this.Ob(v);C!=-1;){for(var M=0,O=this.Xa(C);M<m.O.truncate(this.Ja(C)/2);){var L=this.U(O);if(L==-1)break;var q=this.Ua(O),U=this.Sh(q);U!=null?q=U.Qb():(U=this.Ua(L),q=this.vb.yr(q,U)),q<=a?(q==0?g==0&&(g=-1):g=1,L!=this.rj(C)&&(this.lC(L,O),this.pd(L,!0))):O=this.U(O),M++}for(M=this.Xa(C),O=this.dc(C)?M:this.rj(C);0<this.Ja(C);){if((L=this.Ma(O))==-1){this.pd(O,!0),g==0&&(g=-1);break}var ee=this.Ua(L);if((U=this.Sh(ee))!=null?q=U.Qb():(q=this.Ua(O),q=this.vb.yr(q,ee)),q<=a)q==0?g==0&&(g=-1):g=1,this.lC(L,O),this.pd(L,!1),M==L&&(M=this.Xa(C));else if((O=this.Ma(O))==M)break}O=this.Ja(C),u&&(b?3>O:2>O)?(C=this.Zq(C),g=0<O?1:g==0?-1:g):C=this.Rb(C)}}}return g},h.prototype.lC=function(a,u){var d=this.Ua(a),g=this.Ua(u);if(this.Sg!=null&&(d=this.Sg.read(d),this.Sg.write(g,d)),this.bi!=null){for(g=0,d=this.bi.length;g<d;g++)if(this.bi[g]!=null){var v=this.Pa(a,g);v!=-1&&this.Ra(u,g,v)}}},h.prototype.Ul=function(a,u,d){var g=0,v=this.U(a);if(v==-1)throw m.i.Qa();for(var b=this.Ua(a),C=this.Ua(v),M=this.Sh(b),O=M==null?this.vb.yr(b,C):M.Qb(),L=0;L<d;L++){var q=u[L];if(0<q&&1>q){var U=q;M!=null&&(U=0<O?M.Ux(q)/O:0),this.vb.kD(b,C,U,this.nm());var ee=this.wj(this.bd(a),v,this.nm());if(g++,M!=null){var Q=M.dl(0,q);U=this.Ua(this.Ma(ee)),this.Xg(U,Q),this.mf(ee,Q.wc()),L!=d-1&&u[L+1]!=1||(q=M.dl(q,1),this.Xg(U,q))}}}return g},h.prototype.LX=function(a,u,d){var g=0,v=this.U(a);if(v==-1)throw m.i.fa("internal error");var b=this.Ua(a),C=this.Ua(v),M=this.Sh(b),O=M==null?this.vb.yr(b,C):M.Qb(),L=0;a=this.bd(a);for(var q=0;q<d;q++){var U=u[q];if(L<U&&1>U){var ee=U;if(M!=null&&(ee=0<O?M.Ux(U)/O:0),this.vb.kD(b,C,ee,this.nm()),ee=this.yS(a,v,this.nm()),g++,M!=null){L=M.dl(L,U);var Q=this.Ua(this.Ma(ee));this.Xg(Q,L),this.Cb(ee,L.pa,L.la),q!=d-1&&u[q+1]!=1||(L=M.dl(U,1),ee=this.Ua(ee),this.Xg(ee,L))}}L=U}return g},h.prototype.yS=function(a,u,d){var g=u!=-1?this.Ma(u):this.rj(a),v=g!=-1?this.U(g):-1,b=this.oI(d==null?this.fd:-1),C=this.Ua(b);return d!=null&&this.vb.Ht(C,d),this.aj(b,a),this.Bc(b,v),this.Cc(b,g),v!=-1&&this.Cc(v,b),g!=-1&&this.Bc(g,b),d=this.dc(a),g=this.Xa(a),u==-1&&this.Wg(a,b),u==g&&(d&&g!=-1||this.Jf(a,b)),d&&v==-1&&(this.Bc(b,b),this.Cc(b,b)),this.Vj(a,this.Ja(a)+1),a=this.Qf(a),this.Tj(a,this.I(a)+1),b},h.prototype.uE=function(a,u,d){var g=this.Ua(u),v=this.Ua(d);if(0>g||v>this.fd-1)throw m.i.N("invalid call");if(g>v&&!this.dc(a))throw m.i.N("cannot iterate across an open path");for(a=0;u!=d;u=this.U(u))g=this.Ua(u),(v=this.Sh(g))!=null?a+=v.Qb():(v=this.Ua(this.U(u)),a+=this.vb.yr(g,v));return a},h.prototype.Dh=function(a,u){var d=this.Ua(a);this.vb.Ht(d,u),(d=this.Sh(d))!=null&&d.setStart(u),(a=this.Ma(a))!=-1&&(a=this.Ua(a),this.Sh(a)!=null&&d.setEnd(u))},h.prototype.Vi=function(a,u){a=this.Ua(a),this.vb.ve(a,u)},h.prototype.mf=function(a,u){this.Cb(a,u.x,u.y)},h.prototype.Cb=function(a,u,d){var g=this.Ua(a);this.vb.Cb(g,u,d),(g=this.Sh(g))!=null&&g.ZB(u,d),(a=this.Ma(a))!=-1&&(a=this.Ua(a),this.Sh(a)!=null&&g.Ql(u,d))},h.prototype.D=function(a,u){this.vb.D(this.td.T(a,0),u)},h.prototype.Gc=function(a,u){this.vb.za[0].tc(2*this.td.T(a,0),u)},h.prototype.Na=function(a){var u=new m.h;return this.vb.D(this.td.T(a,0),u),u},h.prototype.dG=function(a,u){this.it.tc(2*a,u)},h.prototype.Uc=function(a,u,d){return this.vb.Uc(a,this.Ua(u),d)},h.prototype.setAttribute=function(a,u,d,g){this.vb.setAttribute(a,this.Ua(u),d,g)},h.prototype.Ua=function(a){return this.td.T(a,0)},h.prototype.ih=function(){var a=new m.h;return this.D(void 0,a),a.y},h.prototype.fq=function(a,u){a=this.Ua(a),u=this.Ua(u);var d=this.vb.za[0].o;return d[2*a]===d[2*u]&&d[2*a+1]===d[2*u+1]},h.prototype.Dv=function(a,u){a=this.Ua(a);var d=this.vb.za[0].o;return d[2*a]===u.x&&d[2*a+1]===u.y},h.prototype.vX=function(a,u){if(1>u&&(u=1),this.Sg==null){if(u==1)return;this.Sg=m.Yc.Dn(this.vb.I(),1)}(a=this.Ua(a))>=this.Sg.size&&this.Sg.resize(a+1,1),this.Sg.write(a,u)},h.prototype.cG=function(a){return a=this.Ua(a),this.Sg==null||a>=this.Sg.size?1:this.Sg.read(a)},h.prototype.Ra=function(a,u,d){u=this.bi[u],a=this.Ua(a),u.size<this.vb.I()&&u.resize(this.vb.I(),-1),u.write(a,d)},h.prototype.Pa=function(a,u){return(a=this.Ua(a))<(u=this.bi[u]).size?u.read(a):-1},h.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var a=0;a<this.bi.length;a++)if(this.bi[a]==null)return this.bi[a]=m.Yc.Oh(0,-1),a;return this.bi.push(m.Yc.Oh(0,-1)),this.bi.length-1},h.prototype.Td=function(a){this.bi[a]=null},h.prototype.bc=function(a){return this.We!=null?(a=this.Ua(a),this.We[a]):null},h.prototype.ed=function(a,u){var d=this.td.T(a,2);if(d==-1)return!1;if(this.fA){var g=new m.Sa;this.Vi(a,g),u.setStart(g),this.Vi(d,g),u.setEnd(g)}else this.vb.Gc(this.td.T(a,0),Ai),u.em(0,Ai),this.vb.Gc(this.td.T(d,0),Ai),u.em(1,Ai);return!0},h.prototype.mW=function(a,u,d){if(this.fA){var g=new m.Sa;this.Vi(a,g),d.setStart(g),this.Vi(u,g),d.setEnd(g)}else this.vb.Gc(a,Ai),d.em(0,Ai),this.vb.Gc(u,Ai),d.em(1,Ai)},h.prototype.vf=function(a,u){if(u!=-1){if(a!=this.Qf(u))throw m.i.Qa();var d=this.cs(u)}else d=this.kv(a);var g=this.wU(a);return u!=-1&&this.bp(u,g),this.ap(g,u),this.bp(g,d),d!=-1?this.ap(d,g):this.Zo(a,g),u==-1&&this.$o(a,g),this.Rl(a,this.da(a)+1),g},h.prototype.nG=function(a,u,d,g){a=this.vf(a,-1);for(var v=0,b=u,C=!1;b==d&&(C=!0),this.aj(b,a),v++,(b=this.U(b))!=u;);return this.kn(a,!0),this.Vj(a,v),C&&(u=d),this.Jf(a,u),this.Wg(a,this.Ma(u)),this.cp(a,!1),g!=null&&(g[0]=C),a},h.prototype.Zq=function(a){var u=this.cs(a),d=this.Rb(a),g=this.Qf(a);return u!=-1?this.ap(u,d):this.Zo(g,d),d!=-1?this.bp(d,u):this.$o(g,u),this.AO(a),this.Rl(g,this.da(g)-1),this.sF(a),d},h.prototype.AO=function(a){var u=this.Xa(a);if(u!=-1){for(var d=0,g=this.Ja(a);d<g;d++){var v=u;u=this.U(u),this.Vy(v)}u=this.Qf(a),this.Tj(u,this.I(u)-this.Ja(a))}this.Vj(a,0)},h.prototype.Rb=function(a){return this.md.T(a,2)},h.prototype.cs=function(a){return this.md.T(a,1)},h.prototype.Ja=function(a){return this.md.T(a,3)},h.prototype.dc=function(a){return!!(1&this.Sp(a))},h.prototype.kn=function(a,u){if(this.dc(a)!=u){if(0<this.Ja(a)){var d=this.Xa(a),g=this.rj(a);u?(this.Bc(g,d),this.Cc(d,g),d=this.Ua(g)):(this.Bc(g,-1),this.Cc(d,-1),d=this.Ua(g)),this.Xg(d,null)}this.VB(a,(1|this.Sp(a))-1|(u?1:0))}},h.prototype.Qf=function(a){return this.md.T(a,7)},h.prototype.YS=function(a){return!!(2&this.Sp(a))},h.prototype.PB=function(a,u){this.VB(a,(2|this.Sp(a))-2|(u?2:0))},h.prototype.wz=function(a){if(this.cT(a))return this.Oi.get(this.qv(a));var u=new m.yb,d=this.Xa(a);if(d==-1)return 0;var g=new m.h;this.D(d,g);for(var v=0,b=0,C=this.Ja(a);b<C;b++,d=this.U(d)){var M=this.bc(d);if(M==null){if(!this.ed(d,u))continue;M=u}v+=M.Tx(g.x,g.y)}return this.cp(a,!0),this.Oi.set(this.qv(a),v),v},h.prototype.gr=function(a,u,d){u=this.Ck[u],a=this.qv(a),u.size<this.Oi.size&&u.resize(this.Oi.size,-1),u.write(a,d)},h.prototype.sj=function(a,u){return(a=this.qv(a))<(u=this.Ck[u]).size?u.read(a):-1},h.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var a=0;a<this.Ck.length;a++)if(this.Ck[a]==null)return this.Ck[a]=m.Yc.Oh(0),a;return this.Ck.push(m.Yc.Oh(0)),this.Ck.length-1},h.prototype.CB=function(a){this.Ck[a]=null},h.prototype.ZT=function(a,u,d){if(d==-1)throw m.i.N();if(u!=d){var g=this.Rb(d),v=this.cs(d),b=this.Qf(d);v==-1?this.Zo(b,g):this.ap(v,g),g==-1?this.$o(b,v):this.bp(g,v),this.Tj(b,this.I(b)-this.Ja(d)),this.Rl(b,this.da(b)-1),v=u==-1?this.kv(a):this.cs(u),this.bp(d,v),this.ap(d,u),u==-1?this.$o(a,d):this.bp(u,d),v==-1?this.Zo(a,d):this.ap(v,d),this.Tj(a,this.I(a)+this.Ja(d)),this.Rl(a,this.da(a)+1),this.gx(d,a)}},h.prototype.ij=function(a,u){this.vb.ve(this.Ua(u),this.nm()),this.wj(a,-1,this.nm())},h.prototype.pd=function(a,u){var d=this.bd(a),g=this.Ma(a),v=this.U(a);g!=-1&&this.Bc(g,v);var b=this.Ja(d);if(a==this.Xa(d)&&this.Jf(d,1<b?v:-1),v!=-1&&this.Cc(v,g),a==this.rj(d)&&this.Wg(d,1<b?g:-1),g!=-1&&v!=-1){g=this.Ua(g);var C=this.Ua(v);u?(u=this.Sh(g))!=null&&(g=new m.h,this.vb.D(C,g),u.Qc(g)):(C=this.Ua(a),u=this.Sh(C),this.Xg(g,u),u!=null&&(g=this.vb.Na(g),u.Dc(g)))}return this.Vj(d,b-1),d=this.Qf(d),this.Tj(d,this.I(d)-1),this.Vy(a),v},h.prototype.Xa=function(a){return this.md.T(a,4)},h.prototype.rj=function(a){return this.md.T(a,5)},h.prototype.U=function(a){return this.td.T(a,2)},h.prototype.Ma=function(a){return this.td.T(a,1)},h.prototype.bd=function(a){return this.td.T(a,3)},h.prototype.fc=function(a,u){return this.wj(a,-1,u)},h.prototype.Yq=function(a){if(a===void 0)return this.Yq(!1);if(a instanceof p)return new p(a);var u,d=-1,g=-1,v=-1,b=0,C=!1;for(u=this.ld;u!=-1;u=this.ue(u))if(!a||m.aa.Hc(this.ic(u))){for(d=this.Ob(u);d!=-1;d=this.Rb(d))if(v=g=this.Xa(d),b=0,g!=-1){C=!0;break}if(C)break}return p.AP(this,u,d,g,v,b,a)},h.prototype.Oc=function(a){if(this.Il.Oc(a),this.We!=null)for(var u=0,d=this.We.length;u<d;u++)this.We[u]!=null&&this.We[u].Oc(a)},h.prototype.jr=function(a,u,d,g){g?this.NX(a,u,d):this.MX(a,u,d)},h.prototype.Cc=function(a,u){this.td.S(a,1,u)},h.prototype.Bc=function(a,u){this.td.S(a,2,u)},h.prototype.aj=function(a,u){this.td.S(a,3,u)},h.prototype.Vj=function(a,u){this.md.S(a,3,u)},h.prototype.Jf=function(a,u){this.md.S(a,4,u)},h.prototype.Wg=function(a,u){this.md.S(a,5,u)},h.prototype.Rl=function(a,u){this.cd.S(a,6,u)},h.prototype.Tj=function(a,u){this.cd.S(a,5,u)},h.prototype.pJ=function(a){var u=a;do{var d=this.U(u);this.Bc(u,this.Ma(u)),this.Cc(u,d),u=d}while(u!=a)},h.prototype.bC=function(a){this.fd=a},h.prototype.$q=function(a){var u=this.cs(a),d=this.Rb(a),g=this.Qf(a);u!=-1?this.ap(u,d):this.Zo(g,d),d!=-1?this.bp(d,u):this.$o(g,u),this.Jf(a,-1),this.Wg(a,-1),this.sF(a)},h.prototype.mi=function(a,u){var d=this.Ma(a),g=this.U(a);if(d!=-1&&this.Bc(d,g),g!=-1&&this.Cc(g,d),d!=-1&&g!=-1)if(d=this.Ua(d),g=this.Ua(g),u){if((u=this.Sh(d))!=null){var v=new m.h;this.vb.D(g,v),u.Qc(v)}}else u=this.Ua(a),u=this.Sh(u),this.Xg(d,u),u!=null&&(v=new m.h,this.vb.D(d,v),u.Dc(v));this.Vy(a)},h.prototype.cT=function(a){return!!(4&this.Sp(a))},h.prototype.cp=function(a,u){this.VB(a,(4|this.Sp(a))-4|(u?4:0))},h.prototype.nx=function(a,u){var d=this.td.o;this.vb.mc();var g=this.vb.za[0].o;a.Vd(0,u,function(v,b){var C=d[5*v];v=d[5*b],b=g[2*C],C=g[2*C+1];var M=g[2*v];return C<(v=g[2*v+1])?-1:C>v?1:b<M?-1:b>M?1:0})},h.prototype.jS=function(){for(var a=this.ld;a!=-1;a=this.ue(a))if(!m.aa.Hc(this.ic(a)))return!0;return!1},h.prototype.hC=function(a,u){for(var d=this.Ob(a),g=this.Ob(u),v=this.kv(a),b=this.kv(u),C=this.Ob(a);C!=-1;C=this.Rb(C))this.gx(C,u);for(C=this.Ob(u);C!=-1;C=this.Rb(C))this.gx(C,a);this.Zo(a,g),this.Zo(u,d),this.$o(a,b),this.$o(u,v),d=this.I(a),g=this.da(a),v=this.da(u),this.Tj(a,this.I(u)),this.Tj(u,d),this.Rl(a,v),this.Rl(u,g),d=this.cd.T(a,2),this.cd.S(a,2,this.cd.T(u,2)),this.cd.S(u,2,d)},h}(),m.gd=j})(ye||(ye={})),function(m){var j=function(T){function p(h,a,u,d){var g=T.call(this)||this;return g.$=new m.l,h===void 0?g.UE():typeof h=="number"?g.VO(h,a,u,d):h instanceof m.Sa?a!==void 0?g.Qu(h,a,u):g.WO(h):h instanceof m.ra?a!==void 0?g.YO(h,a):g.XO(h):h instanceof m.l?g.UO(h):g.UE(),g}return ri(p,T),p.prototype.Qu=function(h,a,u){this.description=m.ee.og(),this.$.Oa(),h.B()||this.tu(h,a,u)},p.prototype.UO=function(h){this.description=m.ee.og(),this.$.K(h),this.$.normalize()},p.prototype.XO=function(h){if(h==null)throw m.i.N();this.description=h,this.$.Oa()},p.prototype.YO=function(h,a){if(h==null)throw m.i.N();this.description=h,this.$.K(a),this.$.normalize()},p.prototype.UE=function(){this.description=m.ee.og(),this.$.Oa()},p.prototype.WO=function(h){this.description=m.ee.og(),this.$.Oa(),h.B()||this.tu(h)},p.prototype.VO=function(h,a,u,d){this.description=m.ee.og(),this.K(h,a,u,d)},p.prototype.K=function(h,a,u,d){if(this.vc(),typeof h=="number")this.$.K(h,a,u,d);else for(this.Oa(),a=0,u=h.length;a<u;a++)this.Zb(h[a])},p.prototype.Xo=function(h){if(this.vc(),!h.fT())throw m.i.N();this.$.K(h)},p.prototype.Oa=function(){this.vc(),this.$.Oa()},p.prototype.B=function(){return this.$.B()},p.prototype.R=function(){return this.$.R()},p.prototype.ca=function(){return this.$.ca()},p.prototype.gk=function(){return this.$.gk()},p.prototype.Jp=function(){return this.$.Jp()},p.prototype.Ip=function(){return this.$.sf()},p.prototype.Zb=function(h){if(h instanceof m.h)this.vc(),this.$.Zb(h);else if(h instanceof m.l)this.vc(),this.$.Zb(h);else if(h instanceof m.Sa){if(this.vc(),!h.Ac()){var a=h.description;if(this.description!=a&&this.Jl(a),this.B())this.tu(h);else{this.$.Zb(h.D());for(var u=1,d=a.Aa;u<d;u++)for(var g=a.Ed(u),v=m.ra.Va(g),b=0;b<v;b++){var C=h.Uc(g,b),M=this.Tg(g,b);M.Zb(C),this.setInterval(g,b,M)}}}}else if(h instanceof p&&!h.B())for((a=h.description)!=this.description&&this.Jl(a),this.$.Zb(h.$),u=1,d=a.Aa;u<d;u++)for(g=a.kd(u),v=m.ra.Va(g),b=0;b<v;b++)C=h.Tg(g,b),(M=this.Tg(g,b)).Zb(C),this.setInterval(g,b,M)},p.prototype.tu=function(h,a,u){if(a!==void 0){this.$.K(h.D(),a,u),u=1;for(var d=(a=h.description).Aa;u<d;u++)for(var g=a.Ed(u),v=m.ra.Va(g),b=0;b<v;b++){var C=h.Uc(g,b);this.setInterval(g,b,C,C)}}else for(this.$.K(h.ka[0],h.ka[1]),u=1,d=(a=h.description).Aa;u<d;u++)for(g=a.Ed(u),v=m.ra.Va(g),b=0;b<v;b++)C=h.Uc(g,b),this.setInterval(g,b,C,C)},p.prototype.setInterval=function(h,a,u,d){if(u=typeof u=="number"?new m.Nc(u,d):u,this.vc(),h==0)if(a==0)this.$.v=u.oa,this.$.C=u.va;else{if(a!=1)throw m.i.ce();this.$.G=u.oa,this.$.H=u.va}else this.vD(0,h,a,u.oa),this.vD(1,h,a,u.va)},p.prototype.W=function(h,a){this.vc(),this.$.W(h,a)},p.prototype.Oc=function(h){if(h instanceof m.Dd)this.vc(),h.mC(this.$);else if(this.vc(),!this.$.B()){var a=new m.OK;this.Qo(a),a.XS()?a.Oa():h.mC(a)}},p.prototype.copyTo=function(h){if(h.getType()!=this.getType())throw m.i.N();if(h.vc(),h.description=this.description,h.$.K(this.$),h.ka=null,this.ka!=null){h.ou();for(var a=0;a<2*(this.description.Ae.length-2);a++)h.ka[a]=this.ka[a]}},p.prototype.Ia=function(){return new p(this.description)},p.prototype.Ke=function(){return this.$.wF()},p.prototype.Qb=function(){return this.$.yR()},p.prototype.getType=function(){return 197},p.prototype.Db=function(){return 2},p.prototype.bn=function(h){this.copyTo(h)},p.prototype.A=function(h){h.v=this.$.v,h.G=this.$.G,h.C=this.$.C,h.H=this.$.H},p.prototype.Qo=function(h){h.v=this.$.v,h.G=this.$.G,h.C=this.$.C,h.H=this.$.H,h.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},p.prototype.Tg=function(h,a){var u=new m.Nc;return u.K(this.Od(0,h,a),this.Od(1,h,a)),u},p.prototype.Hf=function(h,a){a.Nf(this.description);var u=this.description.Aa-1;switch(h){case 0:for(h=0;h<u;h++)for(var d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(0,d,v));a.Cb(this.$.v,this.$.G);break;case 1:for(h=0;h<u;h++)for(d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(1,d,v));a.Cb(this.$.v,this.$.H);break;case 2:for(h=0;h<u;h++)for(d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(0,d,v));a.Cb(this.$.C,this.$.H);break;case 3:for(h=0;h<u;h++)for(d=this.description.kd(h),g=m.ra.Va(d),v=0;v<g;v++)a.setAttribute(d,v,this.Od(1,d,v));a.Cb(this.$.C,this.$.G);break;default:throw m.i.ce()}},p.prototype.mB=function(h,a){h=this.$.mB(h),a.ma(h.x,h.y)},p.prototype.kR=function(h,a){return a*(h.Oq-2)},p.prototype.xF=function(h,a,u){if(this.$.B())throw m.i.fa("empty geometry");if(a==0)return h!=0?u!=0?this.$.H:this.$.C:u!=0?this.$.G:this.$.v;if(u>=m.ra.Va(a))throw m.i.N();var d=this.description.Pf(a);return this.ou(),0<=d?this.ka[this.kR(this.description,h)+this.description.LR(d)-2+u]:m.ra.se(a)},p.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var h=p.Gg(this.description,0),a=p.Gg(this.description,1),u=0,d=1,g=this.description.Aa;d<g;d++){var v=this.description.kd(d),b=m.ra.Va(v);v=m.ra.se(v);for(var C=0;C<b;C++)this.ka[h+u]=v,this.ka[a+u]=v,u++}}},p.prototype.sn=function(h){if(this.ka!=null)if(2<h.Ae.length){for(var a=m.ee.Iw(h,this.description),u=[],d=p.Gg(this.description,0),g=p.Gg(this.description,1),v=p.Gg(h,0),b=p.Gg(h,1),C=0,M=1,O=h.Aa;M<O;M++){var L=h.kd(M),q=m.ra.Va(L);if(a[M]==-1){var U=m.ra.se(L);for(L=0;L<q;L++)u[v+C]=U,u[b+C]=U,C++}else for(U=this.description.$j(a[M])-2,L=0;L<q;L++)u[v+C]=this.ka[d+U],u[b+C]=this.ka[g+U],C++,U++}this.ka=u}else this.ka=null;this.description=h},p.prototype.Od=function(h,a,u){if(this.$.B())throw m.i.fa("This operation was performed on an Empty Geometry.");if(a==0)return h!=0?u!=0?this.$.H:this.$.C:u!=0?this.$.G:this.$.v;if(u>=m.ra.Va(a))throw m.i.ce();var d=this.description.Pf(a);return 0<=d?(this.ou(),this.ka[p.Gg(this.description,h)+this.description.$j(d)-2+u]):m.ra.se(a)},p.prototype.vD=function(h,a,u,d){if(this.vc(),a==0)h!=0?u!=0?this.$.H=d:this.$.C=d:u!=0?this.$.G=d:this.$.v=d;else{if(u>=m.ra.Va(a))throw m.i.ce();if(!this.hasAttribute(a)){if(m.ra.DG(a,d))return;this.re(a)}a=this.description.Pf(a),this.ou(),this.ka[p.Gg(this.description,h)+this.description.$j(a)-2+u]=d}},p.Gg=function(h,a){return a*(h.Ae.length-2)},p.prototype.Ea=function(h){this.vc();var a=new m.l;return h.A(a),this.$.Ea(a)},p.prototype.isIntersecting=function(h){return h instanceof m.l?this.$.isIntersecting(h):this.$.isIntersecting(h.$)},p.prototype.Ju=function(h,a){this.vc(),h.B()?this.Oa():a!==void 0?this.tu(h,a):this.$.Ju(h.Lg(),h.ih())},p.prototype.offset=function(h,a){this.vc(),this.$.offset(h,a)},p.prototype.normalize=function(){this.vc(),this.$.normalize()},p.prototype.sf=function(h){if(h===void 0){if(h=new m.Sa(this.description),this.B())return h;for(a=this.description.Aa,u=1;u<a;u++)for(d=this.description.Ed(u),g=m.ra.Va(d),v=0;v<g;v++)b=.5*(this.Od(0,d,v)+this.Od(1,d,v)),h.setAttribute(d,v,b);return h.Cb(this.$.gk(),this.$.Jp()),h}if(h.Nf(this.description),this.B())h.Oa();else{for(var a=this.description.Aa,u=1;u<a;u++)for(var d=this.description.kd(u),g=m.ra.Va(d),v=0;v<g;v++){var b=.5*(this.xF(0,d,v)+this.xF(1,d,v));h.setAttribute(d,v,b)}h.Cb(this.$.sf())}},p.prototype.mz=function(){return new m.Sa(this.$.mz())},p.prototype.contains=function(h){return h instanceof m.Sa?!h.B()&&this.$.contains(h.Lg(),h.ih()):this.$.contains(h.$)},p.prototype.dP=function(h){return this.$.contains(h)},p.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof p)||this.description!=h.description)return!1;if(this.B())return!!h.B();if(!this.$.Nb(h.$))return!1;for(var a=0,u=2*(this.description.Ae.length-2);a<u;a++)if(this.ka[a]!=h.ka[a])return!1;return!0},p.prototype.cc=function(){var h=this.description.cc();if(h=m.O.Th(h,this.$.cc()),!this.B()&&this.ka!=null)for(var a=0,u=2*(this.description.Ae.length-2);a<u;a++)h=m.O.Th(h,this.ka[a]);return h},p.prototype.es=function(){return this.$.v},p.prototype.gs=function(){return this.$.G},p.prototype.ds=function(){return this.$.C},p.prototype.fs=function(){return this.$.H},p.prototype.mg=function(){return m.pi.gm(this,null)},p.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},p}(m.aa);m.Fh=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){p===void 0?this.Oa():(this.v=p,this.G=h,this.C=a,this.H=u)}return T.construct=function(p,h,a,u){var d=new T;return d.v=p,d.G=h,d.C=a,d.H=u,d},T.prototype.K=function(p,h,a,u){typeof p=="number"?a!==void 0?(this.v=p,this.G=h,this.C=a,this.H=u,this.normalize()):(this.v=p,this.G=h,this.C=p,this.H=h):p instanceof m.h?h!==void 0?(this.v=p.x-.5*h,this.C=this.v+h,this.G=p.y-.5*a,this.H=this.G+a,this.normalize()):(this.v=p.x,this.G=p.y,this.C=p.x,this.H=p.y):p instanceof T?this.K(p.v,p.G,p.C,p.H):p instanceof m.Nc&&(p.B()||h.B()?this.Oa():(this.v=p.oa,this.C=p.va,this.G=h.oa,this.H=h.va))},T.prototype.Zw=function(p,h){if(h!==void 0)if(h==0)this.Oa();else{this.v=p[0].x,this.G=p[0].y,this.C=this.v,this.H=this.G;for(var a=1;a<h;a++){var u=p[a];u.x<this.v?this.v=u.x:u.x>this.C&&(this.C=u.x),u.y<this.G?this.G=u.y:u.y>this.H&&(this.H=u.y)}}else if(p==null||p.length==0)this.Oa();else for(u=p[0],this.K(u.x,u.y),a=1;a<p.length;a++)h=p[a],this.Lk(h.x,h.y)},T.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},T.prototype.B=function(){return isNaN(this.v)},T.prototype.Zb=function(p,h){typeof p=="number"?this.B()?(this.v=p,this.G=h,this.C=p,this.H=h):(this.v>p?this.v=p:this.C<p&&(this.C=p),this.G>h?this.G=h:this.H<h&&(this.H=h)):p instanceof m.h||p instanceof m.Nd?this.Zb(p.x,p.y):p instanceof T&&!p.B()&&(this.Zb(p.v,p.G),this.Zb(p.C,p.H))},T.prototype.Lk=function(p,h){this.v>p?this.v=p:this.C<p&&(this.C=p),this.G>h?this.G=h:this.H<h&&(this.H=h)},T.prototype.W=function(p,h){this.B()||(this.v-=p,this.C+=p,this.G-=h,this.H+=h,(this.v>this.C||this.G>this.H)&&this.Oa())},T.prototype.scale=function(p){0>p&&this.Oa(),this.B()||(this.v*=p,this.C*=p,this.G*=p,this.H*=p)},T.prototype.zoom=function(p,h){this.B()||this.K(this.sf(),p*this.R(),h*this.ca())},T.prototype.isIntersecting=function(p){return!this.B()&&!p.B()&&(this.v<=p.v?this.C>=p.v:p.C>=this.v)&&(this.G<=p.G?this.H>=p.G:p.H>=this.G)},T.prototype.HG=function(p){return(this.v<=p.v?this.C>=p.v:p.C>=this.v)&&(this.G<=p.G?this.H>=p.G:p.H>=this.G)},T.prototype.Ea=function(p){return!this.B()&&!p.B()&&(p.v>this.v&&(this.v=p.v),p.C<this.C&&(this.C=p.C),p.G>this.G&&(this.G=p.G),p.H<this.H&&(this.H=p.H),(p=this.v<=this.C&&this.G<=this.H)||this.Oa(),p)},T.prototype.mB=function(p){switch(p){case 0:return m.h.construct(this.v,this.G);case 1:return m.h.construct(this.v,this.H);case 2:return m.h.construct(this.C,this.H);case 3:return m.h.construct(this.C,this.G);default:throw m.i.ce()}},T.prototype.nB=function(p){if(p==null||4>p.length)throw m.i.N();p[0]!=null?p[0].ma(this.v,this.G):p[0]=m.h.construct(this.v,this.G),p[1]!=null?p[1].ma(this.v,this.H):p[1]=m.h.construct(this.v,this.H),p[2]!=null?p[2].ma(this.C,this.H):p[2]=m.h.construct(this.C,this.H),p[3]!=null?p[3].ma(this.C,this.G):p[3]=m.h.construct(this.C,this.G)},T.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},T.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},T.prototype.gk=function(){return(this.C+this.v)/2},T.prototype.Jp=function(){return(this.H+this.G)/2},T.prototype.R=function(){return this.C-this.v},T.prototype.ca=function(){return this.H-this.G},T.prototype.move=function(p,h){this.B()||(this.v+=p,this.G+=h,this.C+=p,this.H+=h)},T.prototype.Ju=function(p,h){if(h!==void 0)this.move(p-this.gk(),h-this.Jp());else if(p instanceof m.h)this.Ju(p.x,p.y);else{if(!(p instanceof m.Sa))throw m.i.N();h=(this.C-this.v)/2;var a=(this.H-this.G)/2;this.v=p.Lg()-h,this.C=p.Lg()+h,this.G=p.ih()-a,this.H=p.ih()+a}},T.prototype.offset=function(p,h){this.v+=p,this.C+=p,this.G+=h,this.H+=h},T.prototype.normalize=function(){if(!this.B()){var p=Math.min(this.v,this.C),h=Math.max(this.v,this.C);this.v=p,this.C=h,p=Math.min(this.G,this.H),h=Math.max(this.G,this.H),this.G=p,this.H=h}},T.prototype.dn=function(p){p.ma(this.v,this.G)},T.prototype.$I=function(p){p.ma(this.C,this.G)},T.prototype.cJ=function(p){p.ma(this.v,this.H)},T.prototype.en=function(p){p.ma(this.C,this.H)},T.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},T.prototype.sf=function(){return m.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},T.prototype.mz=function(){return m.h.construct(this.v,this.G)},T.prototype.contains=function(p,h){if(h!==void 0)return p>=this.v&&p<=this.C&&h>=this.G&&h<=this.H;if(p instanceof m.Sa)return this.contains(p.Lg(),p.ih());if(p instanceof m.h)return this.contains(p.x,p.y);if(p instanceof T)return p.v>=this.v&&p.C<=this.C&&p.G>=this.G&&p.H<=this.H;throw m.i.N()},T.prototype.hm=function(p,h){if(h!==void 0)return p>this.v&&p<this.C&&h>this.G&&h<this.H;if(p instanceof m.h)return this.hm(p.x,p.y);if(p instanceof T)return p.v>this.v&&p.C<this.C&&p.G>this.G&&p.H<this.H;throw m.i.N()},T.prototype.Nb=function(p){return p==this||p instanceof T&&(!(!this.B()||!p.B())||this.v==p.v&&this.G==p.G&&this.C==p.C&&this.H==p.H)},T.prototype.cc=function(){var p=this.v;p=m.O.truncate(p^p>>>32);var h=m.O.Th(p);return p=this.C,p=m.O.truncate(p^p>>>32),h=m.O.Th(p,h),p=this.G,p=m.O.truncate(p^p>>>32),h=m.O.Th(p,h),p=this.H,p=m.O.truncate(p^p>>>32),m.O.Th(p,h)},T.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},T.prototype.zy=function(p,h){var a=this.Zj(p),u=this.Zj(h);if(a&u)return 0;if(!(a|u))return 4;var d=(a!=0?1:0)|(u!=0?2:0);do{var g=h.x-p.x,v=h.y-p.y;if(g>v?a&T.YC?(a&T.ju?(p.y+=v*(this.v-p.x)/g,p.x=this.v):(p.y+=v*(this.C-p.x)/g,p.x=this.C),a=this.Zj(p)):u&T.YC?(u&T.ju?(h.y+=v*(this.v-h.x)/g,h.x=this.v):(h.y+=v*(this.C-h.x)/g,h.x=this.C),u=this.Zj(h)):a!=0?(a&T.ku?(p.x+=g*(this.G-p.y)/v,p.y=this.G):(p.x+=g*(this.H-p.y)/v,p.y=this.H),a=this.Zj(p)):(u&T.ku?(h.x+=g*(this.G-h.y)/v,h.y=this.G):(h.x+=g*(this.H-h.y)/v,h.y=this.H),u=this.Zj(h)):a&T.ZC?(a&T.ku?(p.x+=g*(this.G-p.y)/v,p.y=this.G):(p.x+=g*(this.H-p.y)/v,p.y=this.H),a=this.Zj(p)):u&T.ZC?(u&T.ku?(h.x+=g*(this.G-h.y)/v,h.y=this.G):(h.x+=g*(this.H-h.y)/v,h.y=this.H),u=this.Zj(h)):a!=0?(a&T.ju?(p.y+=v*(this.v-p.x)/g,p.x=this.v):(p.y+=v*(this.C-p.x)/g,p.x=this.C),a=this.Zj(p)):(u&T.ju?(h.y+=v*(this.v-h.x)/g,h.x=this.v):(h.y+=v*(this.C-h.x)/g,h.x=this.C),u=this.Zj(h)),a&u)return 0}while(a|u);return d},T.prototype.Zj=function(p){return(p.x<this.v?1:0)|(p.x>this.C?1:0)<<1|(p.y<this.G?1:0)<<2|(p.y>this.H?1:0)<<3},T.prototype.Bi=function(p){return!this.B()&&(this.R()<=p||this.ca()<=p)},T.prototype.tb=function(p){return p instanceof m.h?Math.sqrt(this.iK(p)):Math.sqrt(this.px(p))},T.prototype.px=function(p){var h=0,a=0,u=this.v-p.C;return u>h&&(h=u),(u=this.G-p.H)>a&&(a=u),(u=p.v-this.C)>h&&(h=u),(u=p.G-this.H)>a&&(a=u),h*h+a*a},T.prototype.iK=function(p){var h=0,a=0,u=this.v-p.x;return u>h&&(h=u),(u=this.G-p.y)>a&&(a=u),(u=p.x-this.C)>h&&(h=u),(u=p.y-this.H)>a&&(a=u),h*h+a*a},T.prototype.cn=function(p){this.B()?p.Oa():p.K(this.v,this.C)},T.ju=1,T.ku=4,T.YC=3,T.ZC=12,T}();m.l=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.initialize=0]="initialize",T[T.initializeRed=1]="initializeRed",T[T.initializeBlue=2]="initializeBlue",T[T.initializeRedBlue=3]="initializeRedBlue",T[T.sweep=4]="sweep",T[T.sweepBruteForce=5]="sweepBruteForce",T[T.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",T[T.sweepRedBlue=7]="sweepRedBlue",T[T.sweepRed=8]="sweepRed",T[T.sweepBlue=9]="sweepBlue",T[T.iterate=10]="iterate",T[T.iterateRed=11]="iterateRed",T[T.iterateBlue=12]="iterateBlue",T[T.iterateBruteForce=13]="iterateBruteForce",T[T.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",T[T.resetRed=15]="resetRed",T[T.resetBlue=16]="resetBlue";var p=function(){function h(a,u){this.ci=a,this.dH=u}return h.prototype.nr=function(a,u,d){this.ci.JX(d,a,u,this.dH)},h.prototype.$p=function(a){return this.ci.Rr(a,this.dH)},h}();j=function(){function h(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new m.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return h.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new m.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},h.prototype.ad=function(a,u){if(!this.Pv)throw m.i.Hb();var d=new m.l;d.K(u),this.fo.add(a),this.Eb.push(d)},h.prototype.Fp=function(){if(!this.Pv)throw m.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},h.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new m.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},h.prototype.JD=function(a,u){if(!this.Ov)throw m.i.Hb();var d=new m.l;d.K(u),this.fo.add(a),this.Eb.push(d)},h.prototype.iF=function(){if(!this.Ov)throw m.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},h.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new m.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},h.prototype.ED=function(a,u){if(!this.Nv)throw m.i.Hb();var d=new m.l;d.K(u),this.cw.add(a),this.qd.push(d)},h.prototype.hF=function(){if(!this.Nv)throw m.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},h.prototype.next=function(){if(this.Ic)return!1;for(var a=!0;a;)switch(this.Xb){case 0:a=this.Gz();break;case 1:a=this.rS();break;case 2:a=this.oS();break;case 3:a=this.qS();break;case 4:a=this.UX();break;case 5:a=this.QX();break;case 6:a=this.RX();break;case 7:a=this.SX();break;case 8:a=this.ux();break;case 9:a=this.iC();break;case 10:a=this.Uz();break;case 11:a=this.jT();break;case 12:a=this.gT();break;case 13:a=this.hT();break;case 14:a=this.iT();break;case 15:a=this.kJ();break;case 16:a=this.jJ();break;default:throw m.i.Qa()}return!this.Ic},h.prototype.aC=function(a){this.qa=a},h.prototype.uz=function(a){return this.Eb[a]},h.prototype.az=function(a){return this.qd[a]},h.prototype.nl=function(a){return this.fo.read(a)},h.prototype.hl=function(a){return this.cw.read(a)},h.Tz=function(a){return!(1&~a)},h.eq=function(a){return!(1&a)},h.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},h.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new m.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new m.ia(0)),this.rd.kr();for(var a=0;a<this.Eb.length;a++){var u=this.Eb[a];this.rd.Br(u.v,u.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),a=0;a<2*this.Eb.length;a++)this.Ld.add(a);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},h.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new m.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new m.ia(0)),this.rd.kr();for(var a=0;a<this.Eb.length;a++){var u=this.Eb[a];this.rd.Br(u.v,u.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),a=0;a<2*this.Eb.length;a++)this.Ld.add(a);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},h.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new m.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new m.ia(0)),this.ff.kr();for(var a=0;a<this.qd.length;a++){var u=this.qd[a];this.ff.Br(u.v,u.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),a=0;a<2*this.qd.length;a++)this.Ef.add(a);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},h.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new m.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new m.ia(0)),this.ff==null&&(this.ff=new m.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new m.ia(0)),this.rd.kr();for(var a=0;a<this.Eb.length;a++){var u=this.Eb[a];this.rd.Br(u.v,u.C)}for(this.rd.Fp(),this.ff.kr(),a=0;a<this.qd.length;a++)u=this.qd[a],this.ff.Br(u.v,u.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),a=0;a<2*this.Eb.length;a++)this.Ld.add(a);for(a=0;a<2*this.qd.length;a++)this.Ef.add(a);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},h.prototype.UX=function(){var a=this.Ld.get(--this.pe),u=a>>1;return h.eq(a)?(this.rd.remove(u),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[u].v,this.Eb[u].C,this.qa),this.Vf=u,this.Xb=10,!0)},h.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},h.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},h.prototype.SX=function(){var a=this.Ld.get(this.pe-1),u=this.Ef.get(this.Rg-1),d=this.Rr(a,!0),g=this.Rr(u,!1);return d>g?this.ux():d<g?this.iC():h.Tz(a)?this.ux():h.Tz(u)?this.iC():this.ux()},h.prototype.ux=function(){var a=this.Ld.get(--this.pe),u=a>>1;if(h.eq(a))return this.Df!=-1&&this.Ij.get(u)!=-1?(this.Ad.jd(this.Df,this.Ij.get(u)),this.Ij.set(u,-1)):this.rd.remove(u),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(a=this.Ad.rc(this.Cf);a!=-1;){var d=this.Ad.getData(a);this.ff.vj(d),this.Hj.set(d,-1),d=this.Ad.lb(a),this.Ad.jd(this.Cf,a),a=d}return 0<this.ff.size()?(this.ow.EB(this.Eb[u].v,this.Eb[u].C,this.qa),this.Vf=u,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new m.jp),this.Ij=new m.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(u,this.Ad.addElement(this.Df,u)),this.Xb=7),!0},h.prototype.iC=function(){var a=this.Ef.get(--this.Rg),u=a>>1;if(h.eq(a))return this.Cf!=-1&&this.Hj.get(u)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(u)),this.Hj.set(u,-1)):this.ff.remove(u),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(a=this.Ad.rc(this.Df);a!=-1;){var d=this.Ad.getData(a);this.rd.vj(d),this.Ij.set(d,-1),d=this.Ad.lb(a),this.Ad.jd(this.Df,a),a=d}return 0<this.rd.size()?(this.oo.EB(this.qd[u].v,this.qd[u].C,this.qa),this.Af=u,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new m.jp),this.Hj=new m.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(u,this.Ad.addElement(this.Cf,u)),this.Xb=7),!0},h.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var a=this.Ld.get(this.pe)>>1;return this.rd.vj(a),this.Xb=4,!0},h.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var a=this.Ef.get(this.Rg)>>1;return this.ff.vj(a),this.Xb=7,!0},h.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var a=this.Ld.get(this.pe)>>1;return this.rd.vj(a),this.Xb=7,!0},h.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var a=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(a)||(this.Af=this.Rg,!1)},h.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var a=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(a)||(this.Af=this.Rg,!1)},h.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},h.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},h.prototype.Kt=function(a,u,d){this.Am==null&&(this.Am=new m.Xt),d=new p(this,d),this.Am.sort(a,0,u,d)},h.prototype.JX=function(a,u,d,g){var v=this;a.Vd(u,d,function(b,C){var M=v.Rr(b,g),O=v.Rr(C,g);return M<O||M==O&&h.eq(b)&&h.Tz(C)?-1:1})},h.prototype.Rr=function(a,u){var d=.5*this.qa;return u?(u=this.Eb[a>>1],h.eq(a)?u.G-d:u.H+d):(u=this.qd[a>>1],h.eq(a)?u.G-d:u.H+d)},h}(),m.xC=j}(ye||(ye={})),function(m){var j=function(){function T(){}return T.construct=function(p,h,a,u,d,g){var v=new T;return v.v=p,v.G=h,v.Ye=a,v.C=u,v.H=d,v.Bg=g,v},T.prototype.Oa=function(){this.Ye=this.v=NaN},T.prototype.B=function(){return isNaN(this.v)},T.prototype.XS=function(){return isNaN(this.Ye)},T.prototype.K=function(p,h,a,u,d,g){u!==void 0?typeof p=="number"?(this.v=p,this.G=h,this.Ye=a,this.C=u,this.H=d,this.Bg=g):(this.v=p.x-.5*h,this.C=this.v+h,this.G=p.y-.5*a,this.H=this.G+a,this.Ye=p.z-.5*u,this.Bg=this.Ye+u):(this.v=p,this.G=h,this.Ye=a,this.C=p,this.H=h,this.Bg=a)},T.prototype.move=function(p){this.v+=p.x,this.G+=p.y,this.Ye+=p.z,this.C+=p.x,this.H+=p.y,this.Bg+=p.z},T.prototype.copyTo=function(p){p.v=this.v,p.G=this.G,p.C=this.C,p.H=this.H},T.prototype.Lk=function(p,h,a){this.v>p?this.v=p:this.C<p&&(this.C=p),this.G>h?this.G=h:this.H<h&&(this.H=h),isNaN(this.Ye)==0?this.Ye>a?this.Ye=a:this.Bg<a&&(this.Bg=a):this.Bg=this.Ye=a},T.prototype.Zb=function(p,h,a){if(typeof p=="number")this.B()?(this.v=p,this.G=h,this.Ye=a,this.C=p,this.H=h,this.Bg=a):this.Lk(p,h,a);else if(p instanceof m.Nd)this.Zb(p.x,p.y,p.z);else{if(!(p instanceof T))throw m.i.N();p.B()||(this.Zb(p.v,p.G,p.Ye),this.Zb(p.C,p.H,p.Bg))}},T.prototype.construct=function(p,h,a){p.B()||h.B()?this.Oa():(this.v=p.oa,this.C=p.va,this.G=h.oa,this.H=h.va,this.Ye=a.oa,this.Bg=a.va)},T.prototype.nB=function(p){if(p==null||8>p.length)throw m.i.N();p[0]=new m.Nd(this.v,this.G,this.Ye),p[1]=new m.Nd(this.v,this.H,this.Ye),p[2]=new m.Nd(this.C,this.H,this.Ye),p[3]=new m.Nd(this.C,this.G,this.Ye),p[4]=new m.Nd(this.v,this.G,this.Bg),p[5]=new m.Nd(this.v,this.H,this.Bg),p[6]=new m.Nd(this.C,this.H,this.Bg),p[7]=new m.Nd(this.C,this.G,this.Bg)},T.prototype.Zw=function(p){if(p==null||p.length==0)this.Oa();else{var h=p[0];for(this.K(h.x,h.y,h.z),h=1;h<p.length;h++){var a=p[h];this.Lk(a.x,a.y,a.z)}}},T}();m.OK=j}(ye||(ye={})),function(m){(function(j){j.Qa=function(){var T=Error();return T.message="Internal Error",T},j.Ie=function(){var T=Error();return T.message="Not Implemented",T},j.Xk=function(){var T=Error();return T.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",T},j.Hb=function(){var T=Error();return T.message="Invalid Call",T},j.N=function(T){var p=Error();return p.message="Illegal Argument Exception",T!==void 0&&(p.message+=": "+T),p},j.fu=function(T){var p=Error();return p.message=T!==void 0?"Runtime Exception: "+T:"Runtime Exception.",p},j.fa=function(T){var p=Error();return p.message="Geometry Exception: "+T,p},j.GK=function(){var T=Error();return T.message="Assert Failed Exception",T},j.ce=function(){var T=Error();return T.message="IndexOutOfBoundsException",T},j.WC=function(){var T=Error();return T.message="UserCancelException",T}})(m.i||(m.i={}))}(ye||(ye={})),function(m){(m=m.bm||(m.bm={}))[m.forward=0]="forward",m[m.reverse=1]="reverse"}(ye||(ye={})),function(m){var j=function(){function h(a,u){this.Wa=a,this.FH=u,this.LH=-1,this.sl=!1}return h.prototype.qe=function(){},h.prototype.next=function(){if(++this.LH==this.FH.I())return null;var a=this.FH.Na(this.LH);a.scale(this.Wa.ec);var u=new m.Da;return this.Wa.sy(a,this.sl,u),u},h.prototype.La=function(){return 0},h}(),T=function(){function h(a,u,d){this.Wa=a,this.rw=u,this.Xn=!1,this.co=d,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new m.Da,this.uk=[]}return h.prototype.qe=function(){},h.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var a=m.aa.jg(this.qq);return m.Fg.Mk(a,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}a=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var u=this.uk.length=0,d=new m.h,g=new m.h,v=[0];this.sd.Ha()&&8>this.FA;){var b=this.sd.ha();if(d.L(b.ac()),g.L(b.wc()),d.scale(this.Wa.ec),g.scale(this.Wa.ec),m.cj.Mu(d,g)?d.x=g.x:m.cj.Ku(d,g)&&(g.x=d.x),this.uk.length=0,m.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,d,g,this.Wa.QA,this.Wa.Zs,v,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(b=this.uk.slice(0),this.co.qG(this.co.da()-1,b,b.length-1)),m.cj.Lu(d,g)?(this.qq.Oa(),this.Wa.sy(d,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(v[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}a==null&&(a=new m.Da).Yk(null,0),this.OD(a),u++}if(this.bw[0]=0,0<u){for(v=this.sd.wb();0<u;)this.sd.li(),d.L(this.rw.Na(this.sd.wb())),g.L(this.rw.Na(this.sd.ik())),d.scale(this.Wa.ec),g.scale(this.Wa.ec),this.sl&&(m.cj.Mu(d,g)?d.x=g.x:m.cj.Ku(d,g)&&(g.x=d.x)),this.uk.length=0,m.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,g,d,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(a),u--;return d.L(this.rw.Na(this.sd.wb())),d.scale(this.Wa.ec),p.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,d,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,a,NaN,NaN),this.sd.Vb(v),this.sd.ha(),u=m.ta.kj(null,a,!0),m.Fg.Mk(a,u,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),a=m.aa.jg(this.qq),m.Fg.Mk(a,this.Wa.Aq,!0,!0,this.Wa.Ub)},h.prototype.OD=function(a){var u=this.uk[0],d=this.Nj[0]-1.570796326794897,g=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var v=this.di+1.570796326794897;d=v+3.141592653589793-(this.di-this.Nj[0])}else d=(v=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var b=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),C=!1;if(Math.abs(d-v)<=.5*this.Wa.ao)if(b){var M=a.Na(a.I()-2);M.scale(this.Wa.ec);var O=new m.ga(0);for(m.kb.Xy(this.Wa.Tb,this.Wa.kc,u.x,u.y,M.x,M.y,O),M=O.u;M<=v;)M+=6.283185307179586;for(;M>v;)M-=6.283185307179586;M<d&&(C=!0)}else C=!0;C?(a.DB(0,a.I()-1),this.sl||((u=new m.h).L(a.Na(a.I()-1)),u.scale(this.Wa.ec),-3.141592653589793>u.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<u.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),b||(d=.5*(d+v))):(b?((v=new m.h).L(u),v.scale(1/this.Wa.ec),a.wf(0,-1,v)):p.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],v,d,this.Wa.ao,this.sl,this.sk,a,NaN,NaN),this.FA+=1)}p.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,d,g,this.sl,this.sk,a),this.di=this.Gs[0]},h.prototype.xy=function(a,u){return this.Wa.xy(this.uk,a,this.Nj[0],this.Gs[0],this.sl,u)},h.prototype.La=function(){return 0},h}(),p=function(){function h(){}return h.buffer=function(a,u,d,g,v,b){if(a==null)throw m.i.N("Geometry::Geodesic_bufferer::buffer");if(a.B())return new m.Da(a.description);var C=new h;C.Qg=u,C.Jc=m.cb.sc(u);var M=m.cb.vv(C.Jc);if(C.Ub=b,C.Tb=m.cb.ev(C.Jc),C.kc=M*(2-M),C.ec=C.Jc.Hd().ai,C.qa=C.Qg.Kn(),C.Aq=C.Jc.Kn(),C.Zs=C.Aq*C.ec,C.zq=1.570796326794897/C.ec,C.OY=3.141592653589793/C.ec,C.Js=6.283185307179586/C.ec,C.PY=C.Js/6,C.LA=0,C.NY=1.5707963267948966*C.Tb/C.LA,d==4?(C.ze=2,C.Wv=!0):(C.ze=d,C.Wv=!1),C.Ka=g,C.rb=Math.abs(g),isNaN(v)||.001>v?C.xX():C.$n=v,d=a.getType(),m.aa.yd(d)?((d=new m.Ta(a.description)).oc(a,!0),a=d,d=1607):d==197&&(d=new m.l,a.A(d),d.R()<=C.qa||d.ca()<=C.qa?((d=new m.Ta(a.description)).ad(a,!1),a=d,d=1607):((d=new m.Da(a.description)).ad(a,!1),a=d,d=1736)),C.yX(),m.aa.Rn(d)||C.zX(),C.rb<=.5*C.$n)return d!=1736?new m.Da(a.description):C.Wv?a:m.cj.Qr(a,C.Qg,C.ze,C.QA,-1,b);if(0>C.Ka&&d!=1736)return new m.Da(a.description);if(C.Wv&&m.aa.Hc(d)?(u=m.cj.Qr(a,u,4,NaN,C.$n,b),a=m.cb.zh(u,C.Qg,C.Jc)):a=m.cb.zh(a,C.Qg,C.Jc),(a=m.Hh.lj(a,C.Jc)).B())return new m.Da(a.description);switch(!C.Wv&&m.aa.Hc(d)&&(a=m.cj.pI(C.ec,a)),a=h.KX(a,C.Jc),d){case 1736:u=C.UN(a);break;case 1607:u=C.VN(a);break;case 550:u=C.SN(a);break;case 33:u=C.TN(a);break;default:throw m.i.fa("corrupted_geometry")}return(C=m.cb.zh(u,C.Jc,C.Qg)).Jl(a.description),C},h.prototype.UN=function(a){var u=new m.Da;a=new T(this,a,u),a=m.Gh.local().V(a,this.Jc,this.Ub).next(),a=m.ip.nj(a,this.Jc,2);var d=new m.Dd;return d.scale(1/this.ec,1/this.ec),u.Oc(d),u=m.ip.nj(u,this.Jc,2),0<=this.Ka?m.Gh.local().V(u,a,this.Jc,this.Ub):m.kp.local().V(u,a,this.Jc,this.Ub)},h.prototype.VN=function(a){return a=new T(this,a,null),a=m.Gh.local().V(a,this.Jc,this.Ub).next(),m.ip.nj(a,this.Jc,2)},h.prototype.SN=function(a){return a=new j(this,a),a=m.Gh.local().V(a,this.Jc,this.Ub).next(),m.ip.nj(a,this.Jc,2)},h.prototype.TN=function(a){(a=a.D()).scale(this.ec);var u=new m.Da;return this.sy(a,!1,u),m.ip.nj(u,this.Jc,2)},h.prototype.xy=function(a,u,d,g,v,b){var C=a[0],M=a[a.length-1],O=C.y>M.y?C.y:M.y,L=m.F.q(this.Tb,this.kc,C.y<M.y?C.y:M.y);if(O=m.F.q(this.Tb,this.kc,O),.001<this.LA-(L+u+this.rb)&&.001<this.LA+(O-u-this.rb))return!1;L=(u=d-1.570796326794897)-3.141592653589793,O=u+3.141592653589793;var q=(d=g+1.570796326794897)+3.141592653589793,U=[NaN],ee=[NaN],Q=[NaN],ge=[NaN];if(g=!1,h.dJ(this.Tb,this.kc,this.rb,C,u,L,M,d,U,ee),h.dJ(this.Tb,this.kc,this.rb,M,q,d,C,L,Q,ge),(d<U[0]&&U[0]<q||d<ee[0]&&ee[0]<q)&&(g=!0),g||(L<Q[0]&&Q[0]<u||L<ge[0]&&ge[0]<u)&&(g=!0),!g&&v)return!1;for(var ve=[],fe=a.length-1;0<=fe;fe--)ve.push(a[fe]);return b.Oa(),b.Yk(null,0),fe=[0],h.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,a,u,d,v,fe,b),h.Hr(this.Tb,this.kc,this.ec,this.rb,M,d,q,this.ao,v,fe,b,U[0],ee[0]),h.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,ve,q,O,v,fe,b),h.Hr(this.Tb,this.kc,this.ec,this.rb,C,L,u,this.ao,v,fe,b,Q[0],ge[0]),a=!1,v||(a=this.IE(this.ec,b)),g||a},h.prototype.sy=function(a,u,d){d.Oa(),d.Yk(null,0),h.Hr(this.Tb,this.kc,this.ec,this.rb,a,-this.ao,6.283185307179586,this.ao,u,[0],d,NaN,NaN),u||this.IE(this.ec,d)},h.prototype.IE=function(a,u){var d=this.vO(a,u);return a=this.wO(a,u),d||a},h.prototype.vO=function(a,u){var d=u.I(),g=!1,v=new m.l;if(u.A(v),!m.s.Y(v.H*a,1.570796326794897)&&!m.s.Y(v.G*a,-1.570796326794897))return!1;var b=new m.h;for(--d;0<=d;d--)u.D(d,b),(b.y==v.H&&m.s.Y(b.y*a,1.570796326794897)||b.y==v.G&&m.s.Y(b.y*a,-1.570796326794897))&&(g=!0,this.OI(b,d,u));return g},h.prototype.wO=function(a,u){var d=u.Na(0),g=u.Na(u.I()-1);return 3.141592653589793<Math.abs(d.x-g.x)*a?(this.VV(u),!0):this.uO(u)},h.prototype.uO=function(a){return 0>a.Ke()&&(this.UV(a),!0)},h.prototype.OI=function(a,u,d){var g=d.I(),v=0<u?u-1:g-1;if(g=d.Na(u<g-1?u+1:0),v=d.Na(v),!m.s.Y(g.y,a.y)&&!m.s.Y(g.x,a.x)){var b=new m.h;b.ma(g.x,a.y),d.Cb(u,b)}m.s.Y(v.y,a.y)||m.s.Y(v.x,a.x)||((g=new m.h).ma(v.x,a.y),d.wf(0,u,g))},h.prototype.VV=function(a){var u=new m.Da,d=new m.Da,g=new m.Dd,v=a.Na(0),b=a.Na(a.I()-1),C=new m.h;v.x>b.x?(b=this.zq,g.gg(-this.Js,0)):(b=-this.zq,g.gg(this.Js,0)),u.add(a,!1),a.Oa(),d.add(u,!1),d.Oc(g),v=new m.l,d.A(v),v.W((this.Js-v.R())/2,0),v.G=-this.zq,v.H=this.zq;for(var M=0;M<d.I();M++)d.D(M,C),u.wf(0,-1,C);for(d.Oc(g),M=0;M<d.I();M++)d.D(M,C),u.wf(0,-1,C);d=u.Na(0),g=u.Na(u.I()-1),C.ma(g.x,b),u.wf(0,-1,C),C.ma(.5*(g.x+d.x),b),u.wf(0,-1,C),C.ma(d.x,b),u.wf(0,-1,C),u=m.Hh.ks(u,this.Jc,2,!0,v.v),u=m.Hh.ks(u,this.Jc,2,!0,v.C),u=m.Ud.clip(u,v,this.Aq,NaN),a.add(u,!1)},h.prototype.UV=function(a){var u=new m.l;a.A(u),u.W((this.Js-u.R())/2,0),u.G=-this.zq,u.H=this.zq,a.Yk(null,0);var d=new m.h;d.ma(u.v,u.G),a.wf(1,-1,d),d.ma(u.v,u.H),a.wf(1,-1,d),d.ma(.5*(u.v+u.C),u.H),a.wf(1,-1,d),d.ma(u.C,u.H),a.wf(1,-1,d),d.ma(u.C,u.G),a.wf(1,-1,d),d.ma(.5*(u.v+u.C),u.G),a.wf(1,-1,d)},h.qy=function(a,u,d,g,v,b,C,M,O,L,q){var U=null;O||((U=new m.h).Rc(),0<q.I()&&(U.L(q.Na(q.I()-1)),U.scale(d)));var ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0),ve=new m.h,fe=new m.h,Ce=b[b.length-1];d=1/d;for(var Ie=0;Ie<b.length;Ie++){var Ne=b[Ie];if(Ie==0)var Ve=C;else Ie==b.length-1?Ve=M:(m.kb.wd(a,u,Ce.x,Ce.y,Ne.x,Ne.y,null,null,ee,v),Ve=ee.u-1.570796326794897);m.kb.yi(a,u,Ne.x,Ne.y,g,Ve,Q,ge),O?fe.ma(Q.u,ge.u):(ve.ma(Q.u,ge.u),h.gJ(Ne.x,ve.x,U.x,L),fe.ma(L[0]+ve.x,ve.y),U.L(fe)),fe.scale(d),q.wf(0,-1,fe)}},h.Hr=function(a,u,d,g,v,b,C,M,O,L,q,U,ee){if(!(C-b<M)){var Q=new m.ga(0),ge=new m.ga(0),ve=new m.h,fe=new m.h,Ce=null;O||((Ce=new m.h).Rc(),0<q.I()&&(Ce.L(q.Na(q.I()-1)),Ce.scale(d)));var Ie=m.O.truncate(Math.ceil(b/M)),Ne=Ie++*M;for(Ne==b&&(Ne=Ie++*M),d=1/d;Ne<C+M&&(b<U&&U<Ne?(Ne=U,Ie--):b<ee&&ee<Ne&&(Ne=ee,Ie--),!(Ne>=C));)m.kb.yi(a,u,v.x,v.y,g,Ne,Q,ge),O?fe.ma(Q.u,ge.u):(ve.ma(Q.u,ge.u),h.gJ(v.x,ve.x,Ce.x,L),fe.ma(L[0]+ve.x,ve.y),Ce.L(fe)),fe.scale(d),q.wf(0,-1,fe),b=Ne,Ne=Ie++*M}},h.dJ=function(a,u,d,g,v,b,C,M,O,L){var q=new m.h,U=new m.h,ee=new m.ga(0),Q=new m.ga(0);for(m.kb.yi(a,u,g.x,g.y,d,v,ee,Q),q.ma(ee.u,Q.u),m.kb.yi(a,u,g.x,g.y,d,b,ee,Q),U.ma(ee.u,Q.u),d=new m.ga(0),m.kb.Xy(a,u,C.x,C.y,q.x,q.y,d),O[0]=d.u,m.kb.Xy(a,u,C.x,C.y,U.x,U.y,d),L[0]=d.u;O[0]<=L[0];)O[0]+=6.283185307179586;for(;O[0]>L[0];)O[0]-=6.283185307179586;for(;O[0]>=M;)O[0]-=6.283185307179586,L[0]-=6.283185307179586;for(;O[0]<M;)O[0]+=6.283185307179586,L[0]+=6.283185307179586},h.gJ=function(a,u,d,g){if(isNaN(d)){for(;3.141592653589793<g[0]+u-a;)g[0]-=6.283185307179586;for(;3.141592653589793<a-(g[0]+u);)g[0]+=6.283185307179586}else 3.141592653589793<g[0]+u-d?g[0]-=6.283185307179586:3.141592653589793<d-(g[0]+u)&&(g[0]+=6.283185307179586)},h.KX=function(a,u){var d=a.getType(),g=m.aa.Hc(d)?a.da():d==550?a.I():1;if(g==1)return a;var v=new m.ia(0);v.resize(g);for(var b=[],C=new m.l,M=0;M<g;M++){if(v.write(M,M),m.aa.Hc(d)){a.Rj(M,C);var O=C.sf()}else O=a.Na(M);O=m.XK.$X(u,O),b[M]=O}for(v.Vd(0,v.size,function(L,q){return b[L]<b[q]?-1:b[L]>b[q]?1:0}),u=a.Ia(),M=0;M<g;M++)C=v.read(M),m.aa.Hc(d)?u.addPath(a,C,!0):u.Fd(a,C,C+1);return u},h.prototype.yX=function(){var a=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);a=Math.min(a,.39269908169872414*this.Tb);var u=new m.h;u.ma(0,10*this.ec);var d=45*this.ec,g=new m.ga(0),v=new m.ga(0),b=new m.ga(0),C=new m.ga(0),M=new m.ga(0),O=new m.ga(0),L=new m.ga(0),q=new m.ga(0),U=new m.h,ee=new m.h,Q=new m.h,ge=new m.h;m.kb.yi(this.Tb,this.kc,u.x,u.y,a,0,g,v),U.ma(g.u,v.u),m.kb.yi(this.Tb,this.kc,u.x,u.y,a,d,b,C),ee.ma(b.u,C.u),g=new m.ga(0),v=new m.ga(0);for(var ve=new m.ga(0);m.kb.yi(this.Tb,this.kc,u.x,u.y,a,.5*(0+d),M,O),Q.ma(M.u,O.u),m.kb.wd(this.Tb,this.kc,U.x,U.y,ee.x,ee.y,g,v,null,2),m.kb.oj(this.Tb,this.kc,U.x,U.y,.5*g.u,v.u,L,q,2),ge.ma(L.u,q.u),m.kb.wd(this.Tb,this.kc,Q.x,Q.y,ge.x,ge.y,ve,null,null,2),!(ve.u<=this.$n);)d*=.9,m.kb.yi(this.Tb,this.kc,u.x,u.y,a,d,b,C),ee.ma(b.u,C.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(d-0))},h.prototype.zX=function(){var a=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);a=Math.min(a,.39269908169872414*this.Tb);var u=new m.h,d=new m.h;u.ma(0,10*this.ec),d.ma(10*this.ec,10*this.ec);var g=new m.ga(0),v=new m.ga(0),b=new m.ga(0);m.kb.wd(this.Tb,this.kc,u.x,u.y,d.x,d.y,b,g,v,this.ze);var C=new m.ga(0),M=new m.ga(0),O=new m.ga(0),L=new m.ga(0),q=new m.h,U=new m.ga(0),ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0),ve=new m.ga(0),fe=new m.ga(0),Ce=new m.ga(0),Ie=new m.ga(0),Ne=new m.ga(0),Ve=new m.h,Xe=new m.h,et=new m.h,dt=new m.h,ut=1;g=g.u,v=v.u+1.570796326794897,b=b.u,m.kb.yi(this.Tb,this.kc,u.x,u.y,a,g-1.570796326794897,ee,Q),Ve.ma(ee.u,Q.u),m.kb.yi(this.Tb,this.kc,d.x,d.y,a,v,ge,ve),Xe.ma(ge.u,ve.u),ee=new m.ga(0),Q=new m.ga(0),v=new m.ga(0);for(var mt=new m.ga(0);m.kb.oj(this.Tb,this.kc,u.x,u.y,.5*(0+ut)*b,g,C,M,this.ze),q.ma(C.u,M.u),m.kb.wd(this.Tb,this.kc,u.x,u.y,q.x,q.y,null,null,U,this.ze),m.kb.yi(this.Tb,this.kc,q.x,q.y,a,U.u+1.570796326794897,fe,Ce),et.ma(fe.u,Ce.u),m.kb.wd(this.Tb,this.kc,Ve.x,Ve.y,Xe.x,Xe.y,ee,Q,null,2),m.kb.oj(this.Tb,this.kc,Ve.x,Ve.y,.5*ee.u,Q.u,Ie,Ne,2),dt.ma(Ie.u,Ne.u),m.kb.wd(this.Tb,this.kc,et.x,et.y,dt.x,dt.y,v,null,null,2),!(v.u<=this.$n);)ut*=.9,m.kb.oj(this.Tb,this.kc,u.x,u.y,ut*b,g,O,L,this.ze),d.ma(O.u,L.u),m.kb.wd(this.Tb,this.kc,u.x,u.y,d.x,d.y,null,null,mt,this.ze),m.kb.yi(this.Tb,this.kc,d.x,d.y,a,mt.u+1.570796326794897,ge,ve),Xe.ma(ge.u,ve.u);1e5<(a=ut*b)&&(a=1e5),this.QA=a},h.prototype.xX=function(){var a=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/a&&(a=this.rb/500),.01>a&&(a=.01),this.$n=a},h}();m.VK=p}(ye||(ye={})),function(m){var j=function(){function T(){}return T.Mf=function(p,h){var a=new m.h;a.L(h),p.push(a)},T.up=function(p,h){p.add(h.x),p.add(h.y)},T.hB=function(p){p.Bh(p.size-2)},T.oB=function(p,h){h.ma(p.get(p.size-2),p.get(p.size-1))},T.Qr=function(p,h,a,u,d,g){if(p==null)throw m.i.N();var v=p.getType();if(p.B()||m.aa.Rn(v))return p;var b=new T;b.Qg=h,b.Jc=m.cb.sc(h);var C=m.cb.vv(b.Jc);if(b.Ub=g,b.Tb=m.cb.ev(b.Jc),b.kc=C*(2-C),b.ec=b.Jc.Hd().ai,b.Aq=b.Jc.Kn(),b.Zs=b.Aq*b.ec,b.AA=u,b.zA=d,b.ze=a,v==197?(a=new m.Da(p.description)).ad(p,!1):m.aa.yd(v)?(a=new m.Ta(p.description)).oc(p,!0):a=p,b.ze!=4){if((h=b.Qg.Nb(b.Jc)==0?m.cb.zh(a,b.Qg,b.Jc):m.Hh.lj(a,b.Jc)).B())return h;h=T.pI(b.ec,h),h=b.Zy(h),h=m.ip.nj(h,b.Jc,b.ze),b=m.cb.zh(h,b.Jc,b.Qg)}else{if(m.Eg.Sb(h)==2?(p=m.cb.ml(),(h=m.Xj.local().V(a,p,h,g))==p&&(h=new m.Da,p.copyTo(h))):h=m.Hh.lj(a,b.Jc),h.B())return h;b=b.CX(h)}return b},T.pI=function(p,h){var a=new m.l;if(h.xc(a),3.141592653589793>a.R()*p)return h;var u=!1;a=h.Ga();for(var d=new m.h,g=new m.h;a.$a();)for(;a.Ha();){var v=a.ha();if(d.L(v.ac()),g.L(v.wc()),d.scale(p),g.scale(p),3.141592653589793<Math.abs(d.x-g.x)){var b=T.Lu(d,g);if(!b){u=!0;break}if(6.283185307179586<Math.abs(d.x-g.x)){u=!0;break}}}if(!u)return h;u=h.Ia();var C=1<h.description.Aa,M=new m.h,O=new m.h,L=new m.h,q=new m.h,U=new m.Sa;for(a.Zi();a.$a();)for(var ee=NaN,Q=[0];a.Ha();){if(v=a.ha(),d.L(v.ac()),g.L(v.wc()),d.scale(p),g.scale(p),isNaN(ee)?(T.Wi(d.x,NaN,Q),O.L(d)):O.L(L),ee=O.x,b=T.Lu(d,g)){if(6.283185307179586<g.x-d.x)for(;6.283185307179586<g.x-d.x;)g.x-=6.283185307179586;if(-6.283185307179586>g.x-d.x)for(;-6.283185307179586>g.x-d.x;)g.x+=6.283185307179586;T.Wi(g.x,NaN,Q),L.L(g)}else M.L(g),T.AU(M),T.Wi(M.x,ee,Q),L.ma(Q[0]+M.x,M.y);.5>Math.abs(L.x-g.x)&&L.L(g),C?(v.Tw(0,U),q.L(O),q.scale(1/p),U.Cb(q),(b=a.vm())?u.nf(U):u.lineTo(U),a.Qn()&&!h.dc(a.gb)&&(v.Tw(1,U),q.L(L),q.scale(1/p),U.Cb(q),u.lineTo(U))):((b=a.vm())&&u.Hz(null,0),v=u.da()-1,q.L(O),q.scale(1/p),u.wf(v,-1,q),a.Qn()&&!h.dc(a.gb)&&(q.L(L),q.scale(1/p),u.wf(v,-1,q)))}return u},T.tF=function(p,h,a,u,d,g,v,b,C,M,O,L){var q=new m.h,U=new m.h,ee=0<u.compare(d);T.fJ(ee,u,d,q,U),T.uF(p,h,a,q,U,g,NaN,v,b,C,M,null,O,L),ee&&T.fC(C,M,null,O)},T.prototype.Zy=function(p){var h=p.Ia(),a=p.Ga(),u=[],d=null,g=null,v=1<p.description.Aa;v&&(d=new m.be(0),g=new m.ig);for(var b=[0],C=new m.h,M=new m.h,O=new m.h,L=new m.h;a.$a();)for(b[0]=0;a.Ha();){var q=a.ha();C.L(q.ac()),M.L(q.wc()),C.scale(this.ec),M.scale(this.ec);var U=0<C.compare(M);T.fJ(U,C,M,O,L),u.length=0,d!=null&&d.Bh(0),0<this.AA?T.uF(this.Tb,this.kc,this.ze,O,L,this.AA,this.zA,this.Zs,null,null,null,v?d:null,u,b):T.aR(this.Tb,this.kc,this.ze,O,L,this.zA,this.Zs,v?d:null,u,b),U&&T.fC(null,null,v?d:null,u),u[0].L(q.ac()),u[u.length-1].L(q.wc());for(var ee=1;ee<u.length-1;ee++)u[ee].scale(1/this.ec);v?(U=T.eJ(U,q,g),T.TD(a.vm(),a.Qn()&&!p.dc(a.gb),q,U,d,u,h)):T.SD(a.vm(),a.Qn()&&!p.dc(a.gb),u,h)}return h},T.prototype.CX=function(p){var h=p.Ia(),a=p.Ga(),u=[],d=null,g=new m.ig,v=1<p.description.Aa;for(v&&(d=new m.be(0));a.$a();)for(;a.Ha();){var b=a.ha(),C=b.ac(),M=b.wc();C=0<C.compare(M),M=T.eJ(C,b,g),u.length=0,d!=null&&d.Bh(0),T.BX(this.Tb,this.kc,this.ec,M,this.Qg,this.AA,this.zA,v?d:null,u),C&&T.fC(null,null,v?d:null,u),v?T.TD(a.vm(),a.Qn()&&!p.dc(a.gb),b,M,d,u,h):T.SD(a.vm(),a.Qn()&&!p.dc(a.gb),u,h)}return h},T.SD=function(p,h,a,u){p&&u.Hz(null,0),p=u.da()-1;var d=a.slice(0);u.qG(p,d,d.length-1),h&&u.wf(p,-1,a[a.length-1])},T.TD=function(p,h,a,u,d,g,v){var b=new m.Sa;if(a.To(b),p?v.nf(b):v.lineTo(b),2<g.length){p=u.Qb();for(var C=1;C<g.length-1;C++){var M=u.NG(d.get(C)*p);u.Tw(M,b),b.Cb(g[C]),v.lineTo(b)}}h&&(a.Po(b),v.lineTo(b))},T.uF=function(p,h,a,u,d,g,v,b,C,M,O,L,q,U){var ee=new m.ga(0),Q=new m.ga(0),ge=new m.ga(0);m.kb.wd(p,h,u.x,u.y,d.x,d.y,ge,ee,Q,a),ge=ge.u;var ve=ee=ee.u;0>ve&&(ve+=6.283185307179586),0>(Q=Q.u)&&(Q+=6.283185307179586),C!=null&&(C[0]=ge),M!=null&&(M[0]=ve),O!=null&&(O[0]=Q),M=C=NaN,L!=null&&(C=((M=m.F.Ah(p,h))-(O=m.F.q(p,h,u.y)))/ge,M=(M+O)/ge),O=T.Mu(u,d),Q=T.Ku(u,d),ve=O||Q;var fe=T.FE(u,d,b),Ce=new m.ga(0),Ie=new m.ga(0),Ne=new m.h,Ve=new m.h,Xe=new m.h;T.Wi(u.x,NaN,U);var et=[U[0]];if(ge<=g)T.Mf(q,u),T.Wi(d.x,NaN,U),L!=null&&L.add(0),ve?(O&&T.kB(u,d,L,q),Q&&T.iB(u,d,L,q)):fe?T.jB(u,d,ee,C,M,L,q):0<v&&(Ve.ma(u.x-et[0],u.y),Ne.ma(d.x-U[0],d.y),T.Yy(p,h,a,u,ge,ee,Ve,Ne,0,1,v,L,q,et)),T.Mf(q,d);else{var dt=ge/((g=1+m.O.truncate(Math.ceil(ge/g)))-1),ut=new m.h,mt=0;T.Mf(q,u),ut.L(u),Ve.ma(u.x-U[0],u.y),L!=null&&L.add(0);for(var lt=1;lt<g;lt++){if(lt<g-1){m.kb.oj(p,h,u.x,u.y,lt*dt,ee,Ce,Ie,a),Ne.ma(Ce.u,Ie.u),T.Wi(Ne.x,ut.x,U),Xe.ma(U[0]+Ne.x,Ne.y);var gi=lt/(g-1)}else T.Wi(d.x,NaN,U),Ne.ma(d.x-U[0],d.y),Xe.L(d),gi=1;ve?(lt==1&&O&&T.kB(u,Xe,L,q),lt==g-1&&Q&&T.iB(ut,d,L,q)):fe?T.EE(ut,Xe,b)&&(u.x<d.x?ut.x>Xe.x&&(U[0]+=6.283185307179586,Xe.ma(U[0]+Ne.x,Ne.y)):ut.x<Xe.x&&(U[0]-=6.283185307179586,Xe.ma(U[0]+Ne.x,Ne.y)),T.jB(ut,Xe,ee,C,M,L,q)):0<v&&T.Yy(p,h,a,u,ge,ee,Ve,Ne,mt,gi,v,L,q,et),T.Mf(q,Xe),L!=null&&L.add(gi),ut.L(Xe),Ve.L(Ne),et[0]=U[0],mt=gi}}},T.aR=function(p,h,a,u,d,g,v,b,C,M){var O=new m.ga(0),L=new m.ga(0),q=new m.ga(0);m.kb.wd(p,h,u.x,u.y,d.x,d.y,q,O,L,a),L=q.u,O=O.u;var U=q=NaN;if(b!=null){U=m.F.Ah(p,h);var ee=m.F.q(p,h,u.y);q=(U-ee)/L,U=(U+ee)/L}ee=T.Mu(u,d);var Q=T.Ku(u,d),ge=ee||Q;v=T.FE(u,d,v);var ve=T.Lu(u,d);ve=ge||v||ve,T.Wi(u.x,NaN,M);var fe=new m.h;T.Mf(C,u),fe.L(u),b!=null&&b.add(0),ve?(ge?(ee&&T.kB(u,d,b,C),Q&&T.iB(u,d,b,C)):v&&T.jB(u,d,O,q,U,b,C),T.Wi(d.x,NaN,M),T.Mf(C,d)):L<=g?(T.Wi(d.x,NaN,M),T.Mf(C,d)):(q=new m.h,v=new m.h,q.L(u),v.L(d),q.x-=M[0],v.x-=M[0],-3.141592653589793>v.x?v.x+=6.283185307179586:3.141592653589793<v.x&&(v.x-=6.283185307179586),T.Yy(p,h,a,u,L,O,q,v,0,1,g,b,C,M),T.Mf(C,d),T.Wi(d.x,NaN,M)),b!=null&&b.add(1)},T.Yy=function(p,h,a,u,d,g,v,b,C,M,O,L,q,U){var ee=new m.h,Q=new m.h;ee.ma(v.x+U[0],v.y),new m.ga(0),new m.ga(0),new m.ga(0),new m.ga(0);var ge=new m.ga(0),ve=new m.ga(0),fe=new m.ga(0),Ce=new m.h,Ie=new m.h,Ne=new m.h,Ve=new m.h;Ce.L(v),Ie.L(b),v=new m.be(0),b=new m.be(0),T.up(v,Ie),b.add(M);var Xe=new m.h,et=new m.yb,dt=[];for(T.YJ(4,dt);0<v.size;){for(var ut,mt=!1,lt=NaN,gi=0;3>gi;gi++)if(ut=dt[gi]*M+(1-dt[gi])*C,m.kb.oj(p,h,u.x,u.y,ut*d,g,ge,ve,a),Ne.ma(ge.u,ve.u),gi==0&&(lt=ut,Ve.L(Ne)),T.WW(Ce,Ne,Ie,et),et.hc(et.fe(Ne,!0),Xe),m.kb.wd(p,h,Ne.x,Ne.y,Xe.x,Xe.y,fe,null,null,2),fe.u>O){mt=!0;break}mt?(Ie.L(Ve),M=lt,T.up(v,Ie),b.add(M)):(T.hB(v),b.En(b.size-1,1,b.size-1),0<v.size&&(T.Wi(Ie.x,ee.x,U),Q.ma(U[0]+Ie.x,Ie.y),T.Mf(q,Q),ee.L(Q),L!=null&&L.add(M),Ce.L(Ie),C=M,T.oB(v,Ie),M=b.get(b.size-1)))}},T.BX=function(p,h,a,u,d,g,v,b,C){var M=new m.h,O=new m.h,L=new m.h,q=new m.h,U=new m.h,ee=new m.h,Q=new m.h,ge=new m.h,ve=new m.h,fe=new m.h,Ce=new m.ga(0),Ie=new m.ga(0),Ne=new m.h,Ve=[[],[]],Xe=m.Eg.Sb(d)==1;d=d.Xd(0);var et=u.ac(),dt=u.wc();Xe?(ee.ma(et.x*a,et.y*a),Q.ma(dt.x*a,dt.y*a)):(Ve[0][0]=et.x,Ve[0][1]=et.y,Ve[1][0]=dt.x,Ve[1][1]=dt.y,m.cb.vt(),ee.x=Ve[0][0]*a,ee.y=Ve[0][1]*a,Q.x=Ve[1][0]*a,Q.y=Ve[1][1]*a);var ut=0,mt=0,lt=1,gi=u.Pn();M.L(et),O.L(dt),dt=new m.be(0);var oi=new m.be(0),Ni=new m.be(0);T.up(dt,O),T.up(oi,Q),Ni.add(lt),T.Mf(C,M),b!=null&&b.add(mt);var Ki=[],_s=0<v?gi?5:3:gi?5:1;T.YJ(_s,Ki);for(var as=new m.ga(0),$i=new m.ga(0),ci=new m.ga(0),Kt=new m.ga(0),Xs=new m.ga(0),Ps=new m.ga(0),Qn=new m.ga(0);0<oi.size;){var wi=!1,sn=NaN;for(m.kb.wd(p,h,ee.x,ee.y,Q.x,Q.y,as,$i,null,2),et=0;et<_s&&!(et==0&&(!gi&&0>=v&&as.u<=g&&3.141592653589793>Math.abs(ee.x-Q.x)||u.Ux(mt,lt)<=d));et++){var ns=Ki[et]*lt+(1-Ki[et])*mt;if(u.hc(ns,L),Xe?ge.ma(L.x*a,L.y*a):(Ve[0][0]=L.x,Ve[0][1]=L.y,m.cb.vt(),ge.x=Ve[0][0]*a,ge.y=Ve[0][1]*a),et==0&&(sn=ns,U.L(L),fe.L(ge),0<g&&(as.u>g||3.141592653589793<=Math.abs(ee.x-Q.x)))){wi=!0;break}if(gi&&0<g){if(m.kb.wd(p,h,ee.x,ee.y,ge.x,ge.y,ci,null,null,2),ci.u>g||3.141592653589793<=Math.abs(ee.x-ge.x)){wi=!0;break}}else if(0<v){if(gi?(q.NS(M,O,Ki[et]),Xe?ve.ma(q.x*a,q.y*a):(Ve[0][0]=q.x,Ve[0][1]=q.y,m.cb.vt(),ve.x=Ve[0][0]*a,ve.y=Ve[0][1]*a)):(q.L(L),ve.L(ge)),m.kb.wd(p,h,ee.x,ee.y,ve.x,ve.y,Kt,null,null,2),!(Kt.u<=as.u)){wi=!0;break}if(m.kb.oj(p,h,ee.x,ee.y,Kt.u,$i.u,Ce,Ie,2),Ne.ma(Ce.u,Ie.u),m.kb.wd(p,h,Ne.x,Ne.y,ge.x,ge.y,Xs,null,null,2),Xs.u>v){wi=!0;break}if(gi){if(m.kb.wd(p,h,Ne.x,Ne.y,ve.x,ve.y,Ps,null,null,2),Ps.u>v){wi=!0;break}if(m.kb.wd(p,h,ve.x,ve.y,ge.x,ge.y,Qn,null,null,2),Qn.u>v){wi=!0;break}}}}wi?(O.L(U),Q.L(fe),lt=sn,T.up(dt,O),T.up(oi,Q),Ni.add(lt)):(T.hB(dt),T.hB(oi),Ni.En(Ni.size-1,1,Ni.size-1),T.Mf(C,O),ut+=as.u,b!=null&&b.add(ut),0<oi.size&&(M.L(O),ee.L(Q),mt=lt,T.oB(dt,O),T.oB(oi,Q),lt=Ni.get(Ni.size-1)))}if(b!=null)for(p=1/ut,et=0;et<b.size;et++)b.write(et,b.read(et)*p)},T.fC=function(p,h,a,u){u.reverse(),a!=null&&a.ni(0,a.size,1),a=p!=null?p[0]:NaN,u=h!=null?h[0]:NaN,p!=null&&(p[0]=u),h!=null&&(h[0]=a)},T.fJ=function(p,h,a,u,d){p?(u.L(a),d.L(h)):(u.L(h),d.L(a))},T.eJ=function(p,h,a){return p?(a.create(h.getType()),h.copyTo(a.get()),a.get().reverse(),a.get()):h},T.Wi=function(p,h,a){if(isNaN(h)){for(;3.141592653589793<a[0]-p;)a[0]-=6.283185307179586;for(;3.141592653589793<p-a[0];)a[0]+=6.283185307179586}else 3.141592653589793<a[0]+p-h?a[0]-=6.283185307179586:3.141592653589793<h-(a[0]+p)&&(a[0]+=6.283185307179586)},T.WW=function(p,h,a,u){3.141592653589793>Math.abs(h.x-p.x)?(u.Dc(p),3.141592653589793<=a.x-p.x?u.Ql(a.x-6.283185307179586,a.y):3.141592653589793<=p.x-a.x?u.Ql(a.x+6.283185307179586,a.y):u.Ql(a.x,a.y)):(u.Dc(a),3.141592653589793<=p.x-a.x?u.Ql(p.x-6.283185307179586,p.y):3.141592653589793<=a.x-p.x?u.Ql(p.x+6.283185307179586,p.y):u.Ql(p.x,p.y))},T.YJ=function(p,h){for(var a=0;a<p;a++){var u=Math.ceil(a/2)/(p+1);a%2!=0&&(u=-u),h[a]=.5+u}},T.Mu=function(p,h){return!!(m.s.Y(p.y,1.570796326794897)&&!m.s.Y(h.y,1.570796326794897)||m.s.Y(p.y,-1.570796326794897)&&!m.s.Y(h.y,-1.570796326794897))},T.Ku=function(p,h){return!!(m.s.Y(h.y,1.570796326794897)&&!m.s.Y(p.y,1.570796326794897)||m.s.Y(h.y,-1.570796326794897)&&!m.s.Y(p.y,-1.570796326794897))},T.FE=function(p,h,a){return!(!T.EE(p,h,a)||m.s.Y(p.y,1.570796326794897)||m.s.Y(p.y,-1.570796326794897)||m.s.Y(h.y,1.570796326794897)||m.s.Y(h.y,-1.570796326794897))},T.EE=function(p,h,a){return Math.abs(Math.abs(p.x-h.x)-3.141592653589793)<=a},T.Lu=function(p,h){return!!(m.s.Y(p.y,1.570796326794897)&&m.s.Y(h.y,1.570796326794897)||m.s.Y(p.y,-1.570796326794897)&&m.s.Y(h.y,-1.570796326794897))},T.kB=function(p,h,a,u){if(0<p.y){var d=new m.h;d.ma(h.x,1.570796326794897)}else(d=new m.h).ma(h.x,-1.570796326794897);m.s.Y(p.x,d.x)||m.s.Y(h.y,d.y)||(T.Mf(u,d),a!=null&&a.add(0))},T.iB=function(p,h,a,u){if(0<h.y){var d=new m.h;d.ma(p.x,1.570796326794897)}else(d=new m.h).ma(p.x,-1.570796326794897);m.s.Y(h.x,d.x)||m.s.Y(p.y,d.y)||(T.Mf(u,d),a!=null&&a.add(1))},T.jB=function(p,h,a,u,d,g,v){m.s.Cd(a)?(0<1.570796326794897-p.y&&((a=new m.h).ma(p.x,1.570796326794897),T.Mf(v,a),g!=null&&g.add(u)),0<1.570796326794897-h.y&&((a=new m.h).ma(h.x,1.570796326794897),T.Mf(v,a),g!=null&&g.add(u))):(0<1.570796326794897+p.y&&((a=new m.h).ma(p.x,-1.570796326794897),T.Mf(v,a),g!=null&&g.add(d)),0<1.570796326794897+h.y&&((a=new m.h).ma(h.x,-1.570796326794897),T.Mf(v,a),g!=null&&g.add(d)))},T.AU=function(p){if(-3.141592653589793>p.x)for(;-3.141592653589793>p.x;)p.x+=6.283185307179586;if(3.141592653589793<p.x)for(;3.141592653589793<p.x;)p.x-=6.283185307179586},T}();m.cj=j}(ye||(ye={})),function(m){m.ip=function(){function j(){}return j.nj=function(T,p,h){if(T==null||p==null||!m.cb.Wc(p))throw m.i.N();if(T.B())return T;var a=T,u=a.getType();if(m.aa.Hc(u)){a=m.Hh.lj(T,p),T=new m.l,a.A(T),u=m.ta.Wd(p,T,!1);for(var d=m.cb.gh(p),g=Math.floor((T.v-d.v)/d.R())*d.R()+d.v;g<T.C;)g>T.v+u&&g<T.C-u&&(a=m.Hh.ks(a,p,h,!0,g)),g+=d.R()}else{if(u==197)return(T=new m.Da(a.description)).ad(a,!1),j.nj(T,p,h);if(m.aa.yd(u))return(T=new m.Ta(a.description)).oc(a,!0),j.nj(T,p,h)}return j.Uy(a,p)},j.Uy=function(T,p){if(T==null||p==null||!m.cb.Wc(p))throw m.i.N();if(T.B())return T;var h=T.getType();return h==197?(h=new m.Da(T.description)).ad(T,!1):m.aa.yd(h)?(h=new m.Ta(T.description)).oc(T,!0):h=T,(h=m.Hh.lj(h,p)).B()?h:m.Eg.Sb(p)==1?m.Hh.Fn(h,p,0,h!=T,0):j.NQ(h,p,h!=T)},j.NQ=function(T,p,h){if(!m.cb.Wc(p))throw m.i.N();if(T.B())return T;var a=m.cb.bf(p),u=-180*a;return a*=360,m.Eg.Sb(p)==2&&(a=(u=m.cb.gh(p)).C,a-=u=u.v),m.Hh.Hp(T,u,a,p,h,0,!0)},j}()}(ye||(ye={})),function(m){m.BY=function(){function j(){}return j.P=function(T){return 0>T?-T:T},j.Mb=function(T,p){return 0<=p?j.P(T):-j.P(T)},j.Y=function(T,p){return T==p||j.P(T-p)<=j.JC*(1+(j.P(T)+j.P(p))/2)},j.Cd=function(T){return T==0||j.P(T)<=j.JC},j.Ah=function(T,p){var h=(p=(1-(p=Math.sqrt(1-p)))/(1+p))*p;return T/(1+p)*(1+h*(.25+h*(.015625+1/256*h)))*j.EL},j.EL=1.5707963267948966,j.JC=3552713678800501e-30,j}()}(ye||(ye={})),function(m){var j=function(p){this.Wf=p,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};m.DY=j;var T=function(){function p(h){h===void 0&&(h=null),this.Cj=null,this.Un=!1,h!==null&&(this.Cj=new j(h))}return p.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},p.prototype.Of=function(){var h=new p;return this.copyTo(h),h},p.prototype.copyTo=function(h){h.Cj=this.Cj,h.Un=this.Un},p.prototype.Qz=function(){this.Un=!this.Un},p.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},p.prototype.LJ=function(h){if(0>=h)throw m.i.N();if(h!=this.Ec()){if((h=m.pf.geogtran(h))==null)throw m.i.N("Geogtran not found.");this.Cj=new j(h)}},p.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},p.prototype.tX=function(h){if(h==null)throw m.i.N();var a=null;try{a=m.pf.fromString(m.Sc.PE_TYPE_GEOGTRAN,h)}catch{throw m.i.N()}this.Cj=new j(a)},p.prototype.Nb=function(h){return h==this||!(!(h instanceof p)||(0>=this.Ec()||this.Ec()!=h.Ec())&&!this.qm().isEqual(h.qm()))&&this.Un==h.Un},p.prototype.toString=function(){var h="GeographicTransformation: "+this.Bz();return 200<h.length?h.substring(0,197)+"... ("+h.length.toString()+" characters)":h},p.create=function(h,a){var u=new p;return u.LJ(h),a&&u.Qz(),u},p.uP=function(h,a){var u=new p;return u.tX(h),a&&u.Qz(),u},p}();m.Dx=T}(ye||(ye={})),function(m){var j=function(){function p(){}return p.construct=function(h,a,u,d){var g=new p;return g.hw=h,g.iw=a,g.QY=u,g.RY=d,g},p.Ey=function(h,a){return h.hw==a.hw?h.iw==a.iw?0:h.iw<a.iw?-1:1:h.hw<a.hw?-1:1},p}(),T=function(){function p(){this.yT=[],this.zT=[],this.qp()}return p.kz=function(){return p.jK==null&&(p.jK=new p),p.jK},p.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},p.prototype.iD=function(h){try{var a=[];a=a.sort(j.Ey);for(var u=0;u<a.length;u++)h.push(a[u])}catch{}},p}();m.CY=T}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.yD=function(p){this.Fk=p},T.prototype.WM=function(p){this.Fb=p},T.prototype.xD=function(p){this.zo=p},T.CE=function(p){return!(p.B()||p.getType()!=1607&&p.getType()!=1736)},T.AE=function(p){return!(p.B()||p.getType()!=1607&&p.getType()!=1736||20>p.I())},T.BE=function(p){return!(p.B()||p.getType()!=1607&&p.getType()!=1736||20>p.I())},T}();m.Uk=j}(ye||(ye={})),function(m){m.$b=function(){function j(){}return j.TT=function(T){var p=new m.Da;return p.sx(T.es(),T.gs()),p.yj(T.es(),T.fs()),p.yj(T.ds(),T.fs()),p.yj(T.ds(),T.gs()),p},j.zh=function(T,p){return T===null?null:m.Hx.local().V(T,p,null)},j.jY=function(T,p){var h=m.Gh.local();return T=new m.Zc(T),h.V(T,p,null).next()},j.im=function(T,p,h){return m.kp.local().V(T,p,h,null)},j.ep=function(T,p,h){return m.Kx.local().V(T,p,h,null)},j.VX=function(T,p,h){var a=m.Kx.local();for(T=new m.Zc(T),p=new m.Zc(p),h=a.V(T,p,h,null),a=[];(p=h.next())!=null;)a.push(p);return a},j.Nb=function(T,p,h){return m.dj.local().V(3,T,p,h,null)},j.TP=function(T,p,h){return m.dj.local().V(4,T,p,h,null)},j.RS=function(T,p,h){var a=m.Xj.local();for(T=new m.Zc(T),p=new m.Zc(p),h=a.V(T,p,h,null),a=[];(p=h.next())!=null;)a.push(p);return a},j.QP=function(T,p,h){var a=m.kp.local();for(T=new m.Zc(T),p=new m.Zc(p),h=a.V(T,p,h,null),a=[];(p=h.next())!=null;)a.push(p);return a},j.Ea=function(T,p,h){return m.Xj.local().V(T,p,h,null)},j.QS=function(T,p,h){if((T=m.Xj.local().V(T,p,h,null,1))===null)return[];if(T.getType()===550){for(p=[],h=0;h<T.wa;h++)p.push(T.KR(h));return p}return T.getType()===33?[T]:[]},j.qY=function(T,p,h){return m.dj.local().V(2,T,p,h,null)},j.contains=function(T,p,h){return m.dj.local().V(1,T,p,h,null)},j.BP=function(T,p,h){return m.dj.local().V(16,T,p,h,null)},j.touches=function(T,p,h){return m.dj.local().V(8,T,p,h,null)},j.DU=function(T,p,h){return m.dj.local().V(32,T,p,h,null)},j.TS=function(T,p,h){return m.dj.local().V(1073741824,T,p,h,null)},j.yB=function(T,p,h,a){return m.zL.local().V(T,p,h,a,null)},j.tb=function(T,p,h,a){var u=null;if(h!=null){if(u=h.Hd(),a!=null&&u.Ec()!=a.Ec()&&u.od!=a.od)throw m.i.Xk()}else if(a!=null)throw m.i.N();return T=m.rL.local().V(T,p,null),u!==null&&a!==null&&(T=m.Tc.Nh(T,u,a)),T},j.clip=function(T,p,h){return m.kL.local().V(T,m.l.construct(p.es(),p.gs(),p.ds(),p.fs()),h,null)},j.dl=function(T,p,h){if(T==null||p==null)return null;for(T=m.mL.local().V(!0,T,p,h,null),p=[];(h=T.next())!=null;)h.B()||p.push(h);return p.slice(0)},j.MN=function(T,p,h,a,u,d,g,v){if(u===!0)return j.NN(T,p,h,a,d,g,v);if(u=h,p!=null){if(g=p.Hd(),a!=null&&g.Ec()!=a.Ec()){if(g.od!=a.od)throw m.i.Xk();u=[],m.Tc.XE(h,h.length,a,g,u)}}else if(a!=null)throw m.i.N();if(h=m.AC.local(),d){for(T=new m.Zc(T),p=h.V(T,p,u,d,null),T=[];(d=p.next())!=null;)T.push(d);d=T.slice(0)}else for(d=[],a=0;a<T.length;a++)d[a]=h.V(T[a],p,u[a],null);return d},j.NN=function(T,p,h,a,u,d,g){if(p===null||(a==null&&(a=p.Ec()!==4326?p.Hd():m.Tc.Zg(9001)),a.od!==0))throw m.i.N();if(m.Tc.XE(h,h.length,a,m.Tc.Zg(9001),h),a=m.FC.local(),u){for(T=new m.Zc(T),p=a.V(T,p,d,h,g,!1,u,null),h=[];(d=p.next())!=null;)h.push(d);u=h.slice(0)}else{u=[];for(var v=0;v<T.length;v++)u[v]=a.V(T[v],p,d,h[v],g,!1,null)}return u},j.buffer=function(T,p,h,a,u,d,g){var v=h;if(u===!1){if(p!=null){if(u=p.Hd(),a!=null&&u.Ec()!=a.Ec()){if(u.od!=a.od)throw m.i.Xk();v=m.Tc.Nh(h,a,u)}}else if(a!=null)throw m.i.N();T=m.AC.local().V(T,p,v,null)}else{if(p===null||(a==null&&(a=p.Ec()!==4326?p.Hd():m.Tc.Zg(9001)),a.od!==0))throw m.i.N();v=m.Tc.Nh(h,a,m.Tc.Zg(9001)),T=m.FC.local().V(T,p,d,v,g,!1,null)}return T},j.BU=function(T,p,h,a,u,d,g){if(p!=null){var v=p.Hd();if(g!=null&&v.Ec()!=g.Ec()){if(v.od!=g.od)throw m.i.Xk();h=m.Tc.Nh(h,g,v)}}else if(g!=null)throw m.i.N();for(T=new m.Zc(T),p=m.IC.local().V(T,p,h,a,u,d,null),h=[];(a=p.next())!=null;)h.push(a);return h.slice(0)},j.offset=function(T,p,h,a,u,d,g){if(p!=null){var v=p.Hd();if(g!=null&&v.Ec()!=g.Ec()){if(v.od!=g.od)throw m.i.Xk();h=m.Tc.Nh(h,g,v)}}else if(g!=null)throw m.i.N();return m.IC.local().V(T,p,h,a,u,d,null)},j.iP=function(T){return m.CC.local().V(T,null)},j.jP=function(T,p){var h=m.CC.local();for(T=new m.Zc(T),p=h.V(T,p,null),h=[];(T=p.next())!=null;)h.push(T);return h},j.nz=function(T,p,h){return m.Ix.local().nz(T,p,h)},j.oz=function(T,p){return m.Ix.local().oz(T,p)},j.pz=function(T,p,h,a){return m.Ix.local().pz(T,p,h,a)},j.eC=function(T,p){return m.Yl.local().V(T,p,!1,null)},j.dT=function(T,p){return m.Yl.local().rs(T,p,null)},j.QQ=function(T,p,h,a,u){var d=m.EC.local();if(p!=null){if(p=p.Hd(),u!=null&&p.Ec()!=u.Ec()){if(p.od!=u.od)throw m.i.Xk();h=m.Tc.Nh(h,u,p)}}else if(u!=null)throw m.i.N();return d.V(T,h,a,null)},j.Qr=function(T,p,h,a){var u=m.Xl.local();if(p!=null){if(p=p.Hd(),a!=null&&p.Ec()!=a.Ec()){if(p.od!=a.od)throw m.i.Xk();h=m.Tc.Nh(h,a,p)}}else if(a!=null)throw m.i.N();return u.V(T,h,null)},j.Wy=function(T,p,h,a,u){u===void 0&&(u=0);var d=m.tL.local();if(u==4||u!==0)throw m.i.Ie();if(a!==null){if(a.od!==0)throw m.i.N("Unit must be a linear unit type");h=m.Tc.Nh(h,a,m.Tc.Zg(9001))}return d.V(T,h,p,u,null)},j.WQ=function(T,p,h,a){if(T===null)return 0;if(a==4||a!==0)throw m.i.Ie();if(T.getType()==197)T=j.TT(T);else if(T.getType()!=1736)return 0;if(a=m.cb.sc(p),T=m.cb.zh(T,p,a),T=m.UK.XQ([T])[0],h!==null){if(h.od!==2)throw m.i.N("Unit must be a area unit type");T=m.Tc.Nh(T,m.Tc.Zg(109404),h)}return T},j.ZQ=function(T,p,h,a){if(T=m.vL.local().V(T,p,a,null),h!==null){if(h.od!==0)throw m.i.N("Unit must be a linear unit type");T=m.Tc.Nh(T,m.Tc.Zg(9001),h)}return T},j.JU=function(T,p,h){if(T===null)return 0;var a=null;if(p!=null){if((a=p.Hd()).od==0&&(a=m.Tc.aG(a))==null&&h!==null)throw m.i.N();if(h!=null&&a.Ec()!=h.Ec()&&a.od!=h.od)throw m.i.Xk()}else if(h!=null)throw m.i.N();return T.getType()==1736||T.getType()==197?(T=T.Ke(),h!==null?m.Tc.Nh(T,a,h):T):0},j.KU=function(T,p,h){if(T===null||T.B()||1>T.Db())return 0;var a=null;if(p!=null){if(a=p.Hd(),h!=null&&a.Ec()!=h.Ec()&&a.od!=h.od)throw m.i.Xk()}else if(h!=null)throw m.i.N();T.getType()==1736||T.getType()==197?p=T.mg():m.aa.yd(T.getType())?(p=new m.Ta(T.description)).oc(T,!0):p=T,T=0,p=p.Ga();for(var u=new m.h,d=new m.h;p.$a();)for(;p.Ha();){var g=p.ha();g.Yp(u),g.Tr(d),T+=m.h.tb(u,d)}return a!==null&&h!==null&&(T=m.Tc.Nh(T,a,h)),T},j.fP=function(T){return T.points!==void 0?j.mS(T,T.hasZ!==void 0&&T.hasZ,T.hasM!==void 0&&T.hasM):T.rings!==void 0?j.lG(T.rings,T.hasZ!==void 0&&T.hasZ,T.hasM!==void 0&&T.hasM,"P"):T.paths!==void 0?j.lG(T.paths,T.hasZ!==void 0&&T.hasZ,T.hasM!==void 0&&T.hasM,"L"):T.x!==void 0?j.nS(T):T.xmin!==void 0?j.lS(T):null},j.nS=function(T){if(T.x==null||T.x=="NaN")return new m.Sa;var p=new m.Sa(T.x,T.y);return T.z!==void 0&&T.z!==null&&p.wX(T.z),T.m!==void 0&&T.m!==null&&p.hX(T.m),p},j.lS=function(T){if(T.xmin==null||T.xmin=="NaN")return new m.Fh;var p=new m.Fh(T.xmin,T.ymin,T.xmax,T.ymax);return T.zmin!==void 0&&T.zmin!==null&&p.setInterval(1,0,T.zmin,T.zmax),T.mmin!==void 0&&T.mmin!==null&&p.setInterval(2,0,T.mmin,T.mmax),p},j.mS=function(T,p,h){var a=0,u=new m.de,d=3*T.points.length;d%2!=0&&d++,2>d&&(d=2);var g=m.O.truncate(3*T.points.length/2);4>g?g=4:16>g&&(g=16),d=m.Yc.Dn(d,0);var v=m.Yc.Dn(g);g=m.Yc.Dn(g);for(var b=0;b<T.points.length;b++)d.write(2*b,T.points[b][0]),d.write(2*b+1,T.points[b][1]),v.write(b,p||h?T.points[b][2]:NaN),g.write(b,h&&p?T.points[b][3]:NaN),a++;return a!=0&&(u.resize(a),u.hn(0,d)),p&&(u.re(1),u.hn(1,v)),h&&(u.re(2),u.hn(2,p==0?v:g)),u.Pc(16777215),u},j.lG=function(T,p,h,a){var u=0,d=2;if(a=="P"){var g=new m.Da;u=1,d=3}else g=new m.Ta;for(var v=m.Yc.Oh(0),b=m.Yc.Mr(0),C=0,M=0,O=[],L=[],q=0;q<T.length;q++){var U=T[q].length;if(O[q]=!1,a==="P"&&T[q][0][0]===T[q][T[q].length-1][0]&&T[q][0][1]===T[q][T[q].length-1][1]){var ee=h==0||T[q][0][3]===T[q][T[q].length-1][3]||T[q][0][3]===void 0&&T[q][T[q].length-1][3]===void 0;(p==0||T[q][0][2]===T[q][T[q].length-1][2]||T[q][0][2]===void 0&&T[q][T[q].length-1][2]===void 0)&&ee&&(O[q]=!0,--U)}U>=d?(L[q]=!1,M+=1,v.add(C),b.add(u),C+=U):L[q]=!0}for((a=3*C)%2!=0&&a++,2>a&&(a=2),4>(q=m.O.truncate(3*C/2))?q=4:16>q&&(q=16),a=m.Yc.Dn(a,0),u=m.Yc.Dn(q),d=m.Yc.Dn(q),q=U=0;q<T.length;q++)if(L[q]===!1)for(ee=0;ee<T[q].length;ee++){var Q=!1;ee===T[q].length-1&&O[q]===!0&&(Q=!0),Q||(a.write(2*U,T[q][ee][0]),a.write(2*U+1,T[q][ee][1]),u.write(U,p||h?T[q][ee][2]:NaN),d.write(U,h&&p?T[q][ee][3]:NaN),U++)}return C!=0&&(T=g,v.resize(M),b.resize(M),0<C&&(v.add(C),b.add(0)),T.hn(0,a),T.PJ(b),T.QJ(v)),p&&(g.re(1),g.hn(1,u)),h&&(g.re(2),g.hn(2,p==0?u:d)),g.Pc(16777215),g},j}()}(ye||(ye={})),function(m){m.Ex=function(){function j(){}return j.br=function(T){var p,h=0,a=T.length,u=T[0];for(p=0;p<a-1;p++){var d=T[p+1];h+=(d[0]-u[0])*(d[1]+u[1]),u=d}return 0<=h},j.rotate=function(T,p,h){p=p*Math.PI/180;var a=Math.cos(p),u=Math.sin(p);if(T.paths!==void 0){p={paths:[]};for(var d=0;d<T.paths.length;d++){for(var g=T.paths[d],v=[],b=0;b<g.length;b++){var C=g[b].slice(0);v.push(C);var M=a*(g[b][0]-h.x)-u*(g[b][1]-h.y)+h.x,O=u*(g[b][0]-h.x)+a*(g[b][1]-h.y)+h.y;C[0]=M,C[1]=O}p.paths.push(v),T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM)}return p}if(T.rings!==void 0){for(p={rings:[]},d=0;d<T.rings.length;d++){g=T.rings[d],v=[];var L=j.br(g);for(b=0;b<g.length;b++)C=g[b].slice(0),v.push(C),M=a*(g[b][0]-h.x)-u*(g[b][1]-h.y)+h.x,O=u*(g[b][0]-h.x)+a*(g[b][1]-h.y)+h.y,C[0]=M,C[1]=O;j.br(v)!==L&&v.reverse(),p.rings.push(v),T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM)}return p}if(T.x!==void 0)return p={x:a*(T.x-h.x)-u*(T.y-h.y)+h.x,y:u*(T.x-h.x)+a*(T.y-h.y)+h.y},T.z!==void 0&&(p.z=T.z),T.m!==void 0&&(p.m=T.m),T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM),p;if(T.points!==void 0){for(p={points:[]},d=T.points,b=0;b<d.length;b++)(g=d[b].slice(0))[0]=a*(d[b][0]-h.x)-u*(d[b][1]-h.y)+h.x,g[1]=u*(d[b][0]-h.x)+a*(d[b][1]-h.y)+h.y,p.points.push(g);return T.hasZ!==void 0&&(p.hasZ=T.hasZ),T.hasM!==void 0&&(p.hasM=T.hasM),p}return null},j.JQ=function(T,p){if(T.paths!==void 0){for(var h={paths:[]},a=0;a<T.paths.length;a++){for(var u=T.paths[a],d=[],g=0;g<u.length;g++){var v=u[g].slice(0);d.push(v);var b=p.x-u[g][0];v[0]=u[g][0]+2*b}h.paths.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.rings!==void 0){for(h={rings:[]},a=0;a<T.rings.length;a++){u=T.rings[a];var C=j.br(u);for(d=[],g=0;g<u.length;g++)v=u[g].slice(0),d.push(v),b=p.x-u[g][0],v[0]=u[g][0]+2*b;j.br(d)!==C&&d.reverse(),h.rings.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.x!==void 0)return b=p.x-T.x,h={x:T.x+2*b,y:T.y},T.z!==void 0&&(h.z=T.z),T.m!==void 0&&(h.m=T.m),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h;if(T.points!==void 0){for(h={points:[]},a=T.points,g=0;g<a.length;g++)u=a[g].slice(0),b=p.x-u[0],u[0]+=2*b,h.points.push(u);return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}return T.xmin!==void 0?(h={v:T.xmin,G:T.ymin,C:T.xmax,H:T.ymax},T.zmin!==void 0&&(h.zmin=T.zmin,h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin,h.mmax=T.mmax),b=p.x-T.xmin,h.xmax=T.xmin+2*b,b=p.x-T.xmax,h.xmin=T.xmax+2*b,T.zmin!==void 0&&(h.zmin=T.zmin),T.zmax!==void 0&&(h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin),T.mmax!==void 0&&(h.mmax=T.mmax),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h):null},j.KQ=function(T,p){if(T.paths!==void 0){for(var h={paths:[]},a=0;a<T.paths.length;a++){for(var u=T.paths[a],d=[],g=0;g<u.length;g++){var v=u[g].slice(0);d.push(v);var b=p.y-u[g][1];v[1]=u[g][1]+2*b}h.paths.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.rings!==void 0){for(h={rings:[]},a=0;a<T.rings.length;a++){u=T.rings[a];var C=j.br(u);for(d=[],g=0;g<u.length;g++)v=u[g].slice(0),d.push(v),b=p.y-u[g][1],v[1]=u[g][1]+2*b;j.br(d)!==C&&d.reverse(),h.rings.push(d)}return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}if(T.x!==void 0)return b=p.y-T.y,h={y:T.y+2*b,x:T.x},T.z!==void 0&&(h.z=T.z),T.m!==void 0&&(h.m=T.m),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h;if(T.points!==void 0){for(h={points:[]},a=T.points,g=0;g<a.length;g++)u=a[g].slice(0),b=p.y-u[1],u[1]+=2*b,h.points.push(u);return T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h}return T.xmin!==void 0?(h={v:T.xmin,G:T.ymin,C:T.xmax,H:T.ymax},T.zmin!==void 0&&(h.zmin=T.zmin,h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin,h.mmax=T.mmax),b=p.y-T.ymin,h.ymax=T.ymin+2*b,b=p.y-T.ymax,h.ymin=T.ymax+2*b,T.zmin!==void 0&&(h.zmin=T.zmin),T.zmax!==void 0&&(h.zmax=T.zmax),T.mmin!==void 0&&(h.mmin=T.mmin),T.mmax!==void 0&&(h.mmax=T.mmax),T.hasZ!==void 0&&(h.hasZ=T.hasZ),T.hasM!==void 0&&(h.hasM=T.hasM),h):null},j}()}(ye||(ye={})),function(m){m.ZK=function(){function j(){}return j.Ig=function(T,p){switch(p==null&&(p=m.ee.og()),T){case 33:return new m.Sa(p);case 322:return new m.yb(p);case 197:return new m.Fh(p);case 550:return new m.de(p);case 1607:return new m.Ta(p);case 1736:return new m.Da(p);default:throw m.i.fa("invalid argument.")}},j}()}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.Te=m.ia.qf(p,-1),this.ua=new m.au,this.wl=h}return T.prototype.AW=function(p){this.ua.At(Math.min(this.Te.size,p)),this.ua.fn(p)},T.prototype.addElement=function(p,h){if(h===void 0)return this.eN(p);h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);return a==-1&&(a=this.ua.Ph(),this.Te.set(h,a)),this.ua.addElement(a,p)},T.prototype.eN=function(p){var h=this.wl.jz(p);h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);return a==-1&&(a=this.ua.Ph(),this.Te.set(h,a)),this.ua.addElement(a,p)},T.prototype.jd=function(p,h){if(h===void 0)this.KP(p);else{h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);if(a==-1)throw m.i.N();for(var u=this.ua.rc(a),d=-1;u!=-1;){var g=this.ua.lb(u);this.ua.ja(u)==p?(this.ua.jd(a,d,u),this.ua.rc(a)==-1&&(this.ua.bh(a),this.Te.set(h,-1))):d=u,u=g}}},T.prototype.KP=function(p){var h=this.wl.jz(p);h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);if(a==-1)throw m.i.N();for(var u=this.ua.rc(a),d=-1;u!=-1;){var g=this.ua.lb(u);this.ua.ja(u)==p?(this.ua.jd(a,d,u),this.ua.rc(a)==-1&&(this.ua.bh(a),this.Te.set(h,-1))):d=u,u=g}},T.prototype.rR=function(p){return p=m.O.truncate(p%this.Te.size),(p=this.Te.get(p))==-1?-1:this.ua.rc(p)},T.prototype.ER=function(p){return this.ua.lb(p)},T.prototype.vd=function(p){var h=this.wl.jz(this.ja(p));h=m.O.truncate(h%this.Te.size);var a=this.Te.get(h);if(a==-1)throw m.i.N();for(var u=this.ua.rc(a),d=-1;u!=-1;){if(u==p)return this.ua.jd(a,d,u),void(this.ua.rc(a)==-1&&(this.ua.bh(a),this.Te.set(h,-1)));d=u,u=this.ua.lb(u)}throw m.i.N()},T.prototype.ja=function(p){return this.ua.ja(p)},T.prototype.clear=function(){this.Te=m.ia.qf(this.Te.size,-1),this.ua.clear()},T.prototype.size=function(){return this.ua.TF()},T}();m.dL=j}(ye||(ye={})),function(m){var j=function(){function T(){this.Li=new m.$c(3),this.ua=new m.$c(6),this.sT=!1,this.je=-1}return T.prototype.fl=function(p){this.Li.jd(p)},T.prototype.Pw=function(){return this.Li.Ce()},T.prototype.bv=function(p){this.ua.jd(p)},T.prototype.$A=function(){return this.ua.Ce()},T.prototype.WB=function(p,h){this.Li.S(p,1,h)},T.prototype.ex=function(p,h){this.Li.S(p,2,h)},T.prototype.gX=function(p,h){this.Li.S(p,3,h)},T.prototype.UB=function(p,h){this.ua.S(p,4,h)},T.prototype.jX=function(p,h){this.ua.S(p,3,h)},T.prototype.TJ=function(p,h){this.ua.S(p,2,h)},T.prototype.Ph=function(p){var h=this.$A();return this.ua.S(h,3,this.je),this.ua.S(h,4,0),this.ua.S(h,5,p),this.je!=-1&&this.TJ(this.je,h),this.je=h},T.prototype.bh=function(p){this.LE(p);var h=this.ua.T(p,2),a=this.ua.T(p,3);return h!=-1?this.jX(h,a):this.je=a,a!=-1&&this.TJ(a,h),this.bv(p),a},T.prototype.At=function(p){this.ua.De(p)},T.prototype.PF=function(p){return this.ua.T(p,5)},T.prototype.fX=function(p,h){this.ua.S(p,5,h)},T.prototype.addElement=function(p,h){return this.tS(p,h)},T.prototype.tS=function(p,h){var a=this.Pw();this.ex(a,-1),this.ua.T(p,0)==-1&&this.ua.S(p,0,a);var u=this.ua.T(p,1);return this.WB(a,u),u!=-1&&this.ex(u,a),this.ua.S(p,1,a),this.setData(a,h),this.UB(p,this.bs(p)+1),this.sT&&this.gX(a,p),a},T.prototype.jd=function(p,h){var a=this.we(h),u=this.lb(h);return a!=-1?this.ex(a,u):this.ua.S(p,0,u),u!=-1?this.WB(u,a):this.ua.S(p,1,a),this.fl(h),this.UB(p,this.bs(p)-1),u},T.prototype.fn=function(p){this.Li.De(p)},T.prototype.getData=function(p){return this.Li.T(p,0)},T.prototype.setData=function(p,h){this.Li.S(p,0,h)},T.prototype.lb=function(p){return this.Li.T(p,2)},T.prototype.we=function(p){return this.Li.T(p,1)},T.prototype.rc=function(p){return this.ua.T(p,0)},T.prototype.Fc=function(p){return this.ua.T(p,1)},T.prototype.clear=function(){for(var p=this.je;p!=-1;)p=this.bh(p)},T.prototype.LE=function(p){for(var h=this.Fc(p);h!=-1;){var a=h;h=this.we(a),this.fl(a)}this.ua.S(p,0,-1),this.ua.S(p,1,-1),this.UB(p,0)},T.prototype.B=function(){return this.Li.size==0},T.prototype.TF=function(){return this.Li.size},T.prototype.bs=function(p){return this.ua.T(p,4)},T.prototype.qz=function(p){return this.ua.T(p,3)},T}();m.jp=j}(ye||(ye={})),function(m){var j=function(){function T(p){p===void 0?(this.ug=new m.$c(2),this.ua=new m.$c(4),this.je=-1,this.Qv=!0):(this.ug=new m.$c(2),this.ua=new m.$c(p?4:2),this.je=-1,this.Qv=p)}return T.prototype.fl=function(p){this.ug.jd(p)},T.prototype.Pw=function(){return this.ug.Ce()},T.prototype.bv=function(p){this.ua.jd(p)},T.prototype.$A=function(){return this.ua.Ce()},T.prototype.Ph=function(){var p=this.$A();return this.Qv&&(this.ua.S(p,3,this.je),this.je!=-1&&this.ua.S(this.je,2,p),this.je=p),p},T.prototype.bh=function(p){for(var h=this.rc(p);h!=-1;){var a=h;h=this.lb(h),this.fl(a)}this.Qv&&(h=this.ua.T(p,2),a=this.ua.T(p,3),h!=-1?this.ua.S(h,3,a):this.je=a,a!=-1&&this.ua.S(a,2,h)),this.bv(p)},T.prototype.At=function(p){this.ua.De(p)},T.prototype.addElement=function(p,h){var a=this.ua.T(p,1),u=this.Pw();return a!=-1?this.ug.S(a,1,u):this.ua.S(p,0,u),this.ua.S(p,1,u),this.ug.S(u,0,h),u},T.prototype.fn=function(p){this.ug.De(p)},T.prototype.jd=function(p,h,a){h!=-1?(this.ug.S(h,1,this.ug.T(a,1)),this.ua.T(p,1)==a&&this.ua.S(p,1,h)):(this.ua.S(p,0,this.ug.T(a,1)),this.ua.T(p,1)==a&&this.ua.S(p,1,-1)),this.fl(a)},T.prototype.Hy=function(p,h){var a=this.ua.T(p,1),u=this.ua.T(h,0);u!=-1&&(a!=-1?this.ug.S(a,1,u):this.ua.S(p,0,u),this.ua.S(p,1,this.ua.T(h,1))),this.Qv&&(p=this.ua.T(h,2),a=this.ua.T(h,3),p!=-1?this.ua.S(p,3,a):this.je=a,a!=-1&&this.ua.S(a,2,p)),this.bv(h)},T.prototype.ja=function(p){return this.ug.T(p,0)},T.prototype.Sj=function(p,h){this.ug.S(p,0,h)},T.prototype.lb=function(p){return this.ug.T(p,1)},T.prototype.rc=function(p){return this.ua.T(p,0)},T.prototype.Jn=function(p){return this.ja(this.rc(p))},T.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},T.prototype.B=function(){return this.ug.size==0},T.prototype.TF=function(){return this.ug.size},T.prototype.qz=function(p){return this.ua.T(p,3)},T}();m.au=j}(ye||(ye={})),function(m){m.ta=function(){function j(){}return j.Wd=function(T,p,h){return p=p.xr(),T=T!=null&&T.Xd!==void 0?T.Xd(0):0,h&&(p*=4,T*=1.1),Math.max(T,p)},j.Er=function(T){return 2*Math.sqrt(2)*T},j.rN=function(T){return Math.sqrt(2)*T},j.kj=function(T,p,h){var a=new m.l;return p.A(a),j.Wd(T,a,h)},j.wE=function(T,p,h){return p=p.Tg(1,0).xr(),T=T!=null?T.Xd(1):0,h&&(p*=4,T*=1.1),Math.max(T,p)},j.mv=function(T,p){var h=new m.l;return T.xc(h),T=new m.l,p.xc(T),h.Zb(T),h},j.YN=function(T){var p=new m.l;if(T.xc(p),p.B())return null;var h=new m.du(p,8),a=-1,u=new m.l,d=!1;do for(var g=0,v=T.da();g<v;g++){if(T.Rj(g,u),(a=h.Jz(g,u,a))==-1){if(d)throw m.i.fa("internal error");T.yp(p,!1),d=!0,h.reset(p,8);break}d=!1}while(d);return h},j.nE=function(T){var p=new m.l;T.xc(p);for(var h=new m.du(p,8),a=-1,u=T.Ga(),d=new m.l,g=!1;u.$a();)for(;u.Ha();){var v=u.ha(),b=u.wb();if(v.A(d),(a=h.Jz(b,d,a))==-1){if(g)throw m.i.Qa();T.yp(p,!1),g=!0,h.reset(p,8),u.Zi();break}}return h},j.jj=function(T,p){var h=new m.l;T.xc(h);for(var a=new m.du(h,8),u=-1,d=new m.l,g=T.Ga(),v=!1;g.$a();)for(;g.Ha();){var b=g.ha(),C=g.wb();if(b.A(d),d.isIntersecting(p)&&(u=a.Jz(C,d,u))==-1){if(v)throw m.i.fa("internal error.");T.yp(h,!1),v=!0,a.reset(h,8),g.Zi();break}}return a},j.oE=function(T,p){for(var h=new m.du(p,8),a=new m.h,u=!1,d=new m.l,g=0;g<T.I();g++)if(T.D(g,a),p.contains(a)&&(d.K(a),h.vj(g,d)==-1)){if(u)throw m.i.Qa();u=!0,g=new m.l,T.yp(g,!1),h.reset(g,8),g=-1}return h},j.lR=function(T,p,h){var a=new m.l,u=new m.l;T.xc(a),p.xc(u),a.W(h,h),u.W(h,h);var d=new m.l;d.K(a),d.Ea(u),T=T.Ga(),p=p.Ga();var g=new m.xC;g.aC(h);var v=!1;for(g.pK();T.$a();)for(;T.Ha();)T.ha().A(a),a.isIntersecting(d)&&(v=!0,(h=new m.l).K(a),g.JD(T.wb(),h));if(g.iF(),!v)return null;for(a=!1,g.oK();p.$a();)for(;p.Ha();)p.ha().A(u),u.isIntersecting(d)&&(a=!0,(h=new m.l).K(u),g.ED(p.wb(),h));return g.hF(),a?g:null},j.mR=function(T,p,h,a,u){var d=T.getType(),g=p.getType(),v=new m.l,b=new m.l;T.xc(v),p.xc(b),v.W(h,h),b.W(h,h);var C=new m.l;C.K(v),C.Ea(b);var M=new m.xC;M.aC(h);var O=!1;M.pK();var L=0;for(h=T.da();L<h;L++)a&&d==1736&&!T.Ev(L)||(T.Rj(L,v),v.isIntersecting(C)&&(O=!0,M.JD(L,v)));if(M.iF(),!O)return null;for(T=!1,M.oK(),a=0,h=p.da();a<h;a++)u&&g==1736&&!p.Ev(a)||(p.Rj(a,b),b.isIntersecting(C)&&(T=!0,M.ED(a,b)));return M.hF(),T?M:null},j.Ru=function(T,p,h){if(T!=p)for(var a=0;a<h;a++)T[a]==null?T[a]=m.h.al(p[a]):T[a].L(p[a])},j.Jy=function(T,p,h,a){var u=0;for(a+=0;u<a;h++,u++)T[u]==null&&(T[u]=[0,0]),T[u][0]=p[h].x,T[u][1]=p[h].y},j.Iy=function(T,p,h,a){var u=p,d=0;for(p=a+p;u<p;d++,u++)T[u]==null?T[u]=m.h.construct(h[d][0],h[d][1]):T[u].ma(h[d][0],h[d][1])},j.kP=function(T,p,h){if(T!=p)for(var a=0;a<h;a++)T[a]==null?T[a]=new m.Sa(p[a]):p[a].copyTo(T[a])},j.vE=function(T,p,h,a){var u=0;return T!=null&&(u=T.Xd(0),a&&!h||T==null||(u+=1.01*T.vz(0))),h&&(p*=4,u*=1.01),Math.max(u,p)},j.ty=function(T,p,h){return j.vE(T,p.xr(),h,!1)},j.gO=function(T,p){var h=new m.l;return p.A(h),j.ty(T,h,!0)},j.uy=function(T,p){return j.vE(T,p.xr(),!1,!0)},j.Hu=function(T,p){var h=new m.l;return p.A(h),j.uy(T,h)},j.AG=function(T,p,h,a){a*=a;var u=new m.h;if(u.uc(T,p),(T=new m.h).uc(h,p),p=u.Sk(),h=T.Sk(),p<=a&&h<=a)return!0;var d=m.lc.ox(u.wi(T));return(d<=a*p||d<=a*h)&&0<=u.Qh(T)},j.dK=function(T,p,h,a){for(var u=0;u<p;u++){var d=T[u].y,g=m.O.Rk(d,h,a);g!=d&&(T[u].y=g)}},j}()}(ye||(ye={})),function(m){var j,T,p=function(){function d(g){this.Ya=g}return d.prototype.compare=function(g,v,b){g=g.ja(b),b=this.Ya.nk(v);var C=this.Ya.nk(g);return b<C?-1:b==C?u.gq(v)&&u.Gv(g)?-1:u.gq(g)&&u.Gv(v)?1:0:1},d}(),h=function(){function d(g){this.Ya=g}return d.prototype.nr=function(g,v,b){this.Ya.GX(b,g,v)},d.prototype.$p=function(g){return this.Ya.nk(g)},d}();(T=j||(j={}))[T.initialize=0]="initialize",T[T.pIn=1]="pIn",T[T.pL=2]="pL",T[T.pR=3]="pR",T[T.pT=4]="pT",T[T.right=5]="right",T[T.left=6]="left",T[T.all=7]="all";var a=function(){function d(){this.Ya=null,this.Qi=new m.Nc,this.hi=new m.ia(0),this.sg=[0,0]}return d.prototype.Xi=function(g,v){this.Qi.oa=g.oa-v,this.Qi.va=g.va+v,this.hi.resize(0),this.he=0,this.sg[0]=0},d.prototype.EB=function(g,v,b){if(g>v)throw m.i.N();this.Qi.oa=g-b,this.Qi.va=v+b,this.hi.resize(0),this.he=0,this.sg[0]=0},d.prototype.Uo=function(g,v){this.Qi.oa=g-v,this.Qi.va=g+v,this.hi.resize(0),this.he=0,this.sg[0]=0},d.prototype.next=function(){if(!this.Ya.lq)throw m.i.Hb();if(0>this.he)return-1;for(var g=!0;g;)switch(this.sg[this.he]){case 1:g=this.FU();break;case 2:g=this.GU();break;case 3:g=this.HU();break;case 4:g=this.IU();break;case 5:g=this.GW();break;case 6:g=this.kT();break;case 7:g=this.tN();break;case 0:g=this.Gz();break;default:throw m.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},d.construct=function(g){var v=new d;return v.Ya=g,v.hi.Jb(20),v.he=-1,v},d.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},d.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var g=this.Ya.Np(this.Lc);return this.Qi.va<g?(g=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=6),!0):g<this.Qi.oa?(g=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),g!=-1&&(this.ei=this.Ya.Zr(g),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,g=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),!0)},d.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var g=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),g!=-1&&(this.ei=this.Ya.Zr(g),this.sg[++this.he]=5),!0}return g=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),(g=this.Ya.lk(this.Lc))!=-1&&this.hi.add(g),!0},d.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var g=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=6),!0}return g=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),(g=this.Ya.qj(this.Lc))!=-1&&this.hi.add(g),!0},d.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var g=this.Ya.mk(this.Lc);return g!=-1&&(this.ei=this.Ya.kl(g),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},d.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&u.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},d.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&u.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},d.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&u.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},d.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},d.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},d.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},d}();m.EY=a;var u=function(){function d(g){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=g,this.lq=this.Sv=!1}return d.prototype.kr=function(){this.Nk(!0)},d.prototype.Br=function(g,v){if(!this.Sv)throw m.i.Hb();this.Fj.push(new m.Nc(g,v))},d.prototype.Fp=function(){if(!this.Sv)throw m.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},d.prototype.vj=function(g){if(!this.Sf||!this.lq)throw m.i.N("invalid call");if(this.kf==-1){var v=this.Fj.length;if(this.iA){var b=new m.ia(0);b.Jb(2*v),this.bJ(b),this.$h.Jb(2*v),this.$h.resize(0),this.aJ(b),this.Km.resize(v,-1),this.Km.Wj(-1,0,v),this.iA=!1}else this.Km.Wj(-1,0,v);this.kf=this.Tu()}v=this.pG(g<<1,this.kf),b=this.$f.addElement(1+(g<<1),this.xz(v)),this.VJ(v,b),this.Km.set(g,v),this.Zv++},d.prototype.remove=function(g){if(!this.Sf||!this.lq)throw m.i.fa("invalid call");var v=this.Km.get(g);if(v==-1)throw m.i.N("the interval does not exist in the interval tree");this.Km.set(g,-1),this.Zv--;var b=this.xz(v),C=this.$f.ZR(b);this.$f.vd(this.wR(v),b),this.$f.vd(this.TR(v),b),(g=this.$f.size(b))==0&&(this.$f.MP(b),this.ZJ(C,-1)),this.Ej.jd(v),b=this.UF(C);var M=this.qj(C),O=this.lk(C);for(v=0;!(0<g||C==this.kf||M!=-1&&O!=-1);)C==this.qj(b)?M!=-1?(this.Ok(b,M),this.Uj(M,b),this.Ok(C,-1)):O!=-1?(this.Ok(b,O),this.Uj(O,b),this.Qk(C,-1)):this.Ok(b,-1):M!=-1?(this.Qk(b,M),this.Uj(M,b),this.Ok(C,-1)):O!=-1?(this.Qk(b,O),this.Uj(O,b),this.Qk(C,-1)):this.Qk(b,-1),this.Uj(C,-1),v++,C=b,g=(b=this.mk(C))!=-1?this.$f.size(b):0,M=this.qj(C),O=this.lk(C),b=this.UF(C)},d.prototype.reset=function(){if(!this.Sf||!this.lq)throw m.i.N("invalid call");this.Nk(!1)},d.prototype.size=function(){return this.Zv},d.prototype.getIterator=function(){return a.construct(this)},d.prototype.bJ=function(g){for(var v=this.Fj.length,b=0;b<2*v;b++)g.add(b);this.HX(g,2*v)},d.prototype.aJ=function(g){for(var v=NaN,b=0;b<g.size;b++){var C=g.get(b),M=this.nk(C);M!=v&&(this.$h.add(C),v=M)}},d.prototype.vS=function(){var g=this.Fj.length,v=new m.ia(0);v.Jb(2*g),this.bJ(v),this.$h.Jb(2*g),this.$h.resize(0),this.aJ(v),this.Ej.De(g),this.Ti.fn(2*g);var b=m.Yc.Oh(g);for(b.Wj(-1,0,g),this.kf=this.Tu(),g=0;g<v.size;g++){var C=v.get(g),M=b.get(C>>1);M!=-1?this.VJ(M,this.Ti.addElement(this.xz(M),C)):(M=this.pG(C,this.kf),b.set(C>>1,M))}},d.prototype.pG=function(g,v){var b=v,C=v,M=-1,O=0,L=this.$h.size-1,q=0,U=g>>1,ee=NaN,Q=NaN,ge=!0,ve=this.DR(U);for(U=this.AR(U);ge;){O<L?(q=O+m.O.truncate((L-O)/2),this.gz(b)==-1&&this.FJ(b,this.$h.get(q),this.$h.get(q+1))):this.gz(b)==-1&&this.FJ(b,this.$h.get(O),this.$h.get(O));var fe=this.Np(b);if(U<fe)v!=-1&&(v==b?(C=b,ee=fe,Q=(v=this.qj(b))!=-1?this.Np(v):NaN):Q>fe&&(fe<ee?this.Ok(C,b):this.Qk(C,b),this.Qk(b,v),this.Sf&&(this.Uj(b,C),this.Uj(v,b)),C=b,ee=fe,v=-1,Q=NaN)),(L=this.xR(b))==-1&&(L=this.Tu(),this.dX(b,L)),b=L,L=q;else if(ve>fe)v!=-1&&(v==b?(C=b,ee=fe,Q=(v=this.lk(b))!=-1?this.Np(v):NaN):Q<fe&&(fe<ee?this.Ok(C,b):this.Qk(C,b),this.Ok(b,v),this.Sf&&(this.Uj(b,C),this.Uj(v,b)),C=b,ee=fe,v=-1,Q=NaN)),(O=this.UR(b))==-1&&(O=this.Tu(),this.oX(b,O)),b=O,O=q+1;else{(ge=this.mk(b))==-1&&(ge=this.zP(b),this.ZJ(b,ge));var Ce=this.fN(ge,g);M=this.xP(),this.qX(M,ge),this.cX(M,Ce),b!=v&&(fe<ee?this.Ok(C,b):this.Qk(C,b),this.Sf&&this.Uj(b,C),v!=-1&&(Q<fe?this.Ok(b,v):this.Qk(b,v),this.Sf&&this.Uj(v,b))),ge=!1}}return M},d.prototype.Tu=function(){return this.me.Ce()},d.prototype.zP=function(g){return this.Sf?this.$f.Pr(g):this.Ti.Ph(g)},d.prototype.xP=function(){return this.Ej.Ce()},d.prototype.Nk=function(g){g?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=m.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=m.Yc.Oh(0),this.$f=new m.Yj,this.$f.Vo(new p(this))):this.$f.clear():this.Ti==null?this.Ti=new m.jp:this.Ti.clear(),this.me==null?(this.Ej=new m.$c(3),this.me=new m.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},d.prototype.FJ=function(g,v,b){this.XW(g,v),this.YW(g,b)},d.prototype.Np=function(g){var v=this.gz(g);return v==-1?NaN:(v=this.nk(v))==(g=this.nk(this.gR(g)))?v:.5*(v+g)},d.prototype.XW=function(g,v){this.me.S(g,0,v)},d.prototype.YW=function(g,v){this.me.S(g,1,v)},d.prototype.dX=function(g,v){this.me.S(g,3,v)},d.prototype.oX=function(g,v){this.me.S(g,4,v)},d.prototype.ZJ=function(g,v){this.me.S(g,2,v)},d.prototype.Ok=function(g,v){this.me.S(g,5,v)},d.prototype.Qk=function(g,v){this.me.S(g,6,v)},d.prototype.Uj=function(g,v){this.me.S(g,7,v)},d.prototype.qX=function(g,v){this.Ej.S(g,0,v)},d.prototype.fN=function(g,v){return this.Sf?this.$f.addElement(v,g):this.Ti.addElement(g,v)},d.prototype.cX=function(g,v){this.Ej.S(g,1,v)},d.prototype.VJ=function(g,v){this.Ej.S(g,2,v)},d.prototype.kl=function(g){return this.Sf?this.$f.rc(g):this.Ti.rc(g)},d.prototype.Zr=function(g){return this.Sf?this.$f.Fc(g):this.Ti.Fc(g)},d.gq=function(g){return!(1&g)},d.Gv=function(g){return!(1&~g)},d.prototype.gz=function(g){return this.me.T(g,0)},d.prototype.gR=function(g){return this.me.T(g,1)},d.prototype.mk=function(g){return this.me.T(g,2)},d.prototype.xR=function(g){return this.me.T(g,3)},d.prototype.UR=function(g){return this.me.T(g,4)},d.prototype.qj=function(g){return this.me.T(g,5)},d.prototype.lk=function(g){return this.me.T(g,6)},d.prototype.UF=function(g){return this.me.T(g,7)},d.prototype.xz=function(g){return this.Ej.T(g,0)},d.prototype.wR=function(g){return this.Ej.T(g,1)},d.prototype.TR=function(g){return this.Ej.T(g,2)},d.prototype.DR=function(g){return this.Fj[g].oa},d.prototype.AR=function(g){return this.Fj[g].va},d.prototype.HX=function(g,v){this.Am==null&&(this.Am=new m.Xt);var b=new h(this);this.Am.sort(g,0,v,b)},d.prototype.GX=function(g,v,b){var C=this;g.Vd(v,b,function(M,O){var L=C.nk(M),q=C.nk(O);return L<q||L==q&&d.gq(M)&&d.Gv(O)?-1:1})},d.prototype.nk=function(g){var v=this.Fj[g>>1];return d.gq(g)?v.oa:v.va},d}();m.sr=u}(ye||(ye={})),function(m){var j=function(){function T(p){if(p==null)throw m.i.fa("Invalid arguement");this.hf=p;var h=p.nR();h.hS()?p.ef.IG()?this.lo=m.si.PannableFold:this.lo=m.si.Clip:this.lo=m.si.DontClip,h.iS()?p.Yf.IG()?this.Qm=m.si.PannableFold:this.Qm=m.si.Clip:this.Qm=m.si.DontClip,this.Bm=h.Jr,this.mH=h.Vu,p=this.hf.sH,this.aH=p.hs(2147483648),this.Uv=p.hs(1073741824)}return T.zh=function(p,h,a){return h.ww.zh(p,a)},T.Rt=function(p,h,a,u){return p.ww.Rt(h,a,u)},T.Qt=function(p,h,a,u){if(a=0>a?h.length:a,(p=p.ww.Rt(h,a,u))==a)return p;for(var d=h=0;d<a;d++){var g=u[d];g.isNaN()||(h<d&&u[h].L(g),h++)}for(;h<a;h++)u[h].Rc();return p},T.transform=function(p,h,a,u,d){if(p.isIdentity())return m.ta.kP(u,h,a),a;for(var g=[],v=0,b=0;b<a;){for(var C=Math.min(g.length,a-b),M=b,O=0;M<C;M++,O++)g[O]==null?g[O]=h[M].D():h[M].D(g[O]);var L=d?T.Qt(p,g,C,g):T.Rt(p,g,C,g);for(O=M=0;M<L;M++,O++)u[b]==null&&(u[b]=new m.Sa(h[b])),u[b].Cb(g[O]);b+=C,v+=L}return v},T.prototype.Rt=function(p,h,a){if(this.hf.isIdentity())return p!=a&&m.ta.Ru(a,p,h),h;var u=this.hf.ef,d=this.hf.Yf,g=u.Sb(),v=d.Sb();if(g==0&&g===v){var b=u.Qp();return d=b/(d=d.Qp()),(b=new m.Dd).setScale(d,d),b.eY(p,h,a),h}if(b=m.O.Fu(Math.min(h,64)),g==3){var C=u.Ji;g=(u=C.fk()).Sb(),a!=p&&m.ta.Ru(a,p,h),m.zb.$k(C,a,h,!0),C.Qt(m.bm.forward,a,h),m.zb.Zk(C,a,h,!0)}if(g==3||v===3)throw m.i.fa("image: transform_in_place_");if(g==2)this.lo==m.si.Clip?(a!=p&&m.ta.Ru(a,p,h),p=u.ml(),m.zb.OS(p,u,a,h)):(a!=p&&m.ta.Ru(a,p,h),u.Wc()&&(g=u.Xd(0),C=u.Oe(),m.zb.EX(a,h,C,g),m.zb.qF(a,h,u,0))),m.zb.IL(u,a,h,b);else for(g=u.Xd(0),C=u.Oe(),u=0;u<h;u++)m.zb.FX(p[u],C,g,a[u]);for(m.zb.GL(this.hf,a,h,b),p=0,(v=v==2)?p=d.zi():isNaN(this.Bm)||(p=this.Bm),v&&this.Qm!=m.si.Clip||m.zb.qF(a,h,d.sc(),p),v&&(m.zb.yG(a,h,d,this.Qm),m.zb.HL(d,a,h,b)),p=h,u=0;u<h;++u)a[u].isNaN()&&p--;return p},T.prototype.zh=function(p,h){if(this.hf.isIdentity()||p.B())return p;if(p.getType()==33)return this.XI(p);var a=this.hf.ef,u=this.hf.Yf,d=a.Sb(),g=u.Sb();if(d==0&&d==g)return h=a.Qp(),h/=u=u.Qp(),(u=new m.Dd).setScale(h,h),(p=m.aa.jg(p)).Oc(u),p;switch(p.getType()){case 1607:case 1736:p=this.VI(p,h);break;case 550:p=this.fW(p,h);break;case 197:p=this.eW(p,h);break;default:throw m.i.fa("")}return p},T.prototype.XI=function(p){var h=p.D(),a=[];return a[0]=h,this.Rt(a,1,a),(p=new m.Sa(p)).Cb(a[0]),p},T.prototype.VI=function(p,h){if(p.tm())throw m.i.fa("curves not supported");var a=p.getType();if(a==1736)return this.gW(p,h);if(a==1607)return this.hW(p,h);throw m.i.fa("projectMultiPath")},T.prototype.gW=function(p,h){var a=this.hf.ef,u=this.hf.Yf,d=a.Sb(),g=u.Sb(),v=m.O.Fu(Math.min(p.I(),64)),b=m.Da.jg(p);d==3&&(d=(a=(p=a.Ji).fk()).Sb(),b=p.$k(b,!0),this.wp(p,m.bm.forward,b),b=p.Zk(b,!0)),p=null,g==3&&(g=(u=(p=u.Ji).fk()).Sb());var C=d==2,M=g==2,O=M?u.sc():u,L=!M&&!this.Uv;g=!1;var q=b;if(C){if((q=m.zb.UI(q,a,this.lo,h)).B())return q}else{if(b=new m.l,q.xc(b),d=a.Oe(),b.G<d.G||b.H>d.H){var U=m.l.construct(b.v-1,d.G,b.C+1,d.H);if((q=m.ri.Nu(q,U,a,NaN,0,h)).B())return q}b.R()>2*d.R()&&(q=m.zb.Hp(q,-2*d.R(),2*d.R(),a,!0,0,!0,h))}b=this.mH,(d=!isNaN(b))&&(q=m.Xl.local().V(q,b,h)),U=M?u.kk():null;var ee=NaN;C&&(ee=a.zi());var Q=u.Wr()!=null;if(this.aH)C&&(m.zb.ur(a,ee,q,v),d&&(C=a.hh(),b*=(ee=a.sc().hh())/C)),m.zb.tr(this.hf,q,L,v),d&&(C=a.sc().hh(),b*=(ee=u.sc().hh())/C),a=q;else{var ge=new m.Ta(q.description);ge.DD(q),C&&(m.zb.ur(a,ee,ge,v),d&&(C=a.hh(),b*=(ee=a.sc().hh())/C)),m.zb.tr(this.hf,ge,L,v),d&&(C=a.sc().pm(),b*=(ee=u.sc().pm())/C),L=NaN,M?(U=u.kk(),L=u.zi()):isNaN(this.Bm)||(L=this.Bm),C=T.tv(a)|T.tv(u),ee=10*O.Xd(0),this.Uv&&(C=3,ee=0),a=m.zb.UQ(q,a,ge,O,L,h,C,ee)}return Q&&(a=m.zb.XD(a,u,h)),M&&(g||(M=O.Oe().R(),a.Tg(0,0).R()>=M-O.Xd(0)&&(O=U.getNorthPoleLocation(),M=U.getSouthPoleLocation(),q=U.getNorthPoleGeometry(),U=U.getSouthPoleGeometry(),L=0,q==m.Cg.PE_POLE_POINT&&O!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(L=1),U==m.Cg.PE_POLE_POINT&&M!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(L|=2),L!==0&&(g=!0))),a=m.zb.Mz(a,u,this.Qm,h),d&&(a=m.Xl.local().V(a,b,h)),m.zb.Lx(u,a,v)),a.B()||(g&&(a=m.Yl.local().V(a,u,!1,h)),p!=null&&(a=p.Zk(a,!1),this.wp(p,m.bm.reverse,a),a=p.$k(a,!1))),a},T.tv=function(p){if(p.Sb()!=2)return 0;var h=0,a=p.kk();p=a.getNorthPoleLocation();var u=a.getSouthPoleLocation(),d=a.getNorthPoleGeometry();return a=a.getSouthPoleGeometry(),d==m.Cg.PE_POLE_POINT&&p!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(h=1),a==m.Cg.PE_POLE_POINT&&u!=m.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(h|=2),h},T.prototype.hW=function(p,h){var a=this.hf.ef,u=this.hf.Yf,d=a.Sb(),g=u.Sb(),v=m.O.Fu(Math.min(p.I(),64)),b=m.Ta.jg(p);d==3&&(d=(a=(p=a.Ji).fk()).Sb(),b=p.$k(b,!0),this.wp(p,m.bm.forward,b),b=p.Zk(b,!0)),p=null,g==3&&(g=(u=(p=u.Ji).fk()).Sb());var C=d==2;d=(g=g==2)?u.sc():u;var M=!g&&!this.Uv;if(C){if((b=m.zb.UI(b,a,this.lo,h)).B())return b}else{var O=new m.l;b.xc(O);var L=a.Oe();if((O.G<L.G||O.H>L.H)&&(O=m.l.construct(O.v-1,L.G,O.C+1,L.H),(b=m.ri.Nu(b,O,a,NaN,0,h)).B()))return b}var q=NaN;C&&(q=a.zi()),O=u.Wr()!=null,L=this.mH;var U=!isNaN(L);if(U&&(b=m.Xl.local().V(b,L,h)),this.aH)C&&m.zb.ur(a,q,b,v),U&&(C=a.hh(),L*=(q=a.sc().hh())/C),m.zb.tr(this.hf,b,M,v),U&&(C=a.sc().hh(),L*=(q=u.sc().hh())/C),a=b;else{var ee=new m.Ta(b.description);ee.DD(b),C&&(m.zb.ur(a,q,ee,v),U&&(C=a.hh(),L*=(q=a.sc().hh())/C)),m.zb.tr(this.hf,ee,M,v),U&&(C=a.sc().hh(),L*=(q=u.sc().hh())/C),M=NaN,g?M=u.zi():isNaN(this.Bm)||(M=this.Bm),C=T.tv(a)|T.tv(u),q=10*d.Xd(0),this.Uv&&(C=3,q=0),a=m.zb.VQ(b,a,ee,d,M,h,C,q)}return O&&(a=m.zb.XD(a,u,h)),g&&(a=m.zb.Mz(a,u,this.Qm,h),U&&(a=m.Xl.local().V(a,L,h)),m.zb.Lx(u,a,v)),a.B()||p!=null&&(a=p.Zk(a,!1),this.wp(p,m.bm.reverse,a),a=p.$k(a,!1)),a},T.prototype.eW=function(p,h){var a=(p.ca()+p.R())/400;return a!=0?(a=m.Xl.local().V(p,a,h),a=this.VI(a,h),h=p.Ia(),a.bn(h)):(h=new m.Sa(p.Ip()),a=this.XI(h),h=p.Ia(),a.B()?h.Oa():(p.copyTo(h),p=a.D(),h.K(p.x,p.y,p.x,p.y))),h},T.prototype.fW=function(p,h){p=m.aa.jg(p);var a=this.hf.ef,u=this.hf.Yf,d=a.Sb(),g=u.Sb(),v=m.O.Fu(Math.min(p.I(),64));if(d==3){var b=a.Ji;d=(a=b.fk()).Sb(),p=b.Zk(p,!0),this.wp(b,m.bm.forward,p),p=b.$k(p,!0)}if(d==2){if(this.lo==m.si.Clip?p=m.Xj.local().V(p,a.ml(),a,h):a.Wc()&&(d=new m.l,p.xc(d),a.Oe().contains(d)||(this.lo==m.si.PannableFold&&(p=m.zb.lj(p,a)),m.zb.Jt(p,a.Oe(),a.Xd(0),!0),p=m.zb.Fn(p,a,0,!0,0,h))),p.B())return p;m.zb.ur(a,0,p,v)}else m.zb.Jt(p,a.Oe(),a.Xd(0),!0);return m.zb.tr(this.hf,p,!1,v),a=0,d=!1,b=null,g==3&&(d=!0,g=(u=(b=u.Ji).fk()).Sb()),(g=g==2)?a=u.zi():isNaN(this.Bm)||(a=this.Bm),g&&this.Qm!=m.si.Clip||(p=m.zb.Fn(p,u.sc(),a,!1,0,h)),g&&(p=m.zb.Mz(p,u,this.Qm,h),m.zb.Lx(u,p,v),p.B())||d&&(p=b.Zk(p,!0),this.wp(b,m.bm.reverse,p),p=b.$k(p,!0)),p},T.prototype.wp=function(p,h,a){var u=a.I();if(u!=0){for(var d=a.ub(0),g=m.O.lg(200,0),v=[],b=0;b<u;){var C=Math.min(100,u-b);d.Vw(2*b,2*C,g,2,!0);for(var M=0;M<C;++M)v[M]=m.h.construct(g[2*b],g[2*b+1]);p.Qt(h,v,C),b+=C}a.Pc(1993)}},T.Uy=function(p,h,a){if(p==null||h==null||!h.Wc())throw m.i.fa("Invalid Arguement");if(p.B())return p;var u=p.getType();return u==197?(u=new m.Da(p.description)).ad(p,!1):m.aa.yd(u)?(u=new m.Ta(p.description)).oc(p,!0):u=p,(u=m.zb.lj(u,h)).B()?u:m.zb.Fn(u,h,0,u!=p,0,a)},T.nj=function(p,h,a,u){if(p==null||h==null||!h.Wc())throw m.i.fa("Invalid Arguement");if(p.B())return p;var d=p.getType();if(m.aa.Hc(d)){p=m.zb.lj(p,h),d=new m.l,p.A(d);for(var g=m.ta.ty(h,d,!1),v=h.gh(),b=Math.floor((d.v-v.v)/v.R())*v.R()+v.v;b<d.C;)b>d.v+g&&b<d.C-g&&(p=m.zb.uS(p,h,a,b)),b+=v.R()}else{if(d==197)return(d=new m.Da(p.description)).ad(p,!1),T.nj(d,h,a,u);if(m.aa.yd(d))return(d=new m.Ta(p.description)).oc(p,!0),T.nj(d,h,a,u)}return T.Uy(p,h,u)},T}();m.bu=j}(ye||(ye={})),function(m){var j=function(T){function p(h,a,u,d){var g=T.call(this)||this;return h===void 0?g.description=m.ee.og():u===void 0?g.description=h:(g.description=m.ee.og(),g.ZB(h,a),g.Ql(u,d)),g}return ri(p,T),p.prototype.getType=function(){return 322},p.prototype.Qb=function(){var h=this.sa-this.pa,a=this.na-this.la;return Math.sqrt(h*h+a*a)},p.prototype.Bi=function(h){var a=this.sa-this.pa,u=this.na-this.la;return Math.sqrt(a*a+u*u)<=h},p.prototype.Pn=function(){return!1},p.prototype.kg=function(){var h=new m.h;return h.uc(this.wc(),this.ac()),h},p.cP=function(h,a){return new p(h.x,h.y,a.x,a.y)},p.prototype.bn=function(h){h.Oa(),h.Nf(this.description);var a=new m.l;this.A(a),h.Xo(a),a=1;for(var u=this.description.Aa;a<u;a++)for(var d=this.description.kd(a),g=m.ra.Va(d);a<g;a++){var v=this.Tg(d,0);h.setInterval(d,0,v)}},p.prototype.A=function(h){h.K(this.sa,this.na,this.pa,this.la),h.normalize()},p.prototype.Qo=function(h){h.Oa(),h.Zb(this.sa,this.na,this.Od(0,1,0)),h.Zb(this.pa,this.la,this.Od(1,1,0))},p.prototype.Oc=function(h){if(h instanceof m.Dd){this.vc();var a=new m.h;a.x=this.sa,a.y=this.na,h.Eh(a,a),this.sa=a.x,this.na=a.y,a.x=this.pa,a.y=this.la,h.Eh(a,a),this.pa=a.x,this.la=a.y}else this.vc(),(a=new m.Nd).x=this.sa,a.y=this.na,a.z=this.Od(0,1,0),a=h.fp(a),this.sa=a.x,this.na=a.y,this.tn(0,1,0,a.z),a.x=this.pa,a.y=this.la,a.z=this.Od(1,1,0),a=h.fp(a),this.pa=a.x,this.la=a.y,this.tn(1,1,0,a.z)},p.prototype.Ia=function(){return new p(this.description)},p.prototype.Tx=function(h,a){return(this.pa-h-(this.sa-h))*(this.la-a+(this.na-a))*.5},p.prototype.vx=function(h){return h*this.Qb()},p.prototype.NG=function(h){return h/this.Qb()},p.prototype.DF=function(h){return m.lc.hq(this.sa,this.pa,h)},p.prototype.fR=function(h){return m.lc.hq(this.na,this.la,h)},p.prototype.dl=function(h,a){var u=new m.ig;return this.ah(h,a,u),u.get()},p.prototype.ah=function(h,a,u){if(u==null)throw m.i.N();u.Or(),(u=u.get()).Nf(this.description);var d=new m.h;this.hc(h,d),u.ZB(d.x,d.y),this.hc(a,d),u.Ql(d.x,d.y),d=1;for(var g=this.description.Aa;d<g;d++)for(var v=this.description.Ed(d),b=m.ra.Va(v),C=0;C<b;C++){var M=this.Uc(h,v,C);u.YB(v,C,M),M=this.Uc(a,v,C),u.OB(v,C,M)}},p.prototype.Uc=function(h,a,u){if(a==0)return u==0?this.hc(h).x:this.hc(h).y;switch(m.ra.lz(a)){case 0:return .5>h?this.wv(a,u):this.gv(a,u);case 1:var d=this.wv(a,u);return a=this.gv(a,u),m.lc.hq(d,a,h);case 2:throw m.i.fa("not implemented")}throw m.i.Qa()},p.prototype.fe=function(h,a){var u=this.pa-this.sa,d=this.la-this.na,g=u*u+d*d;return g==0?.5:(h=((h.x-this.sa)*u+(h.y-this.na)*d)/g,a||(0>h?h=0:1<h&&(h=1)),h)},p.prototype.cq=function(h,a,u,d){if(h){if((h=this.la-this.na)==0)return a==this.la?-1:0;if(0>(a=(a-this.na)/h)||1<a)return 0;u!=null&&(u[0]=this.DF(a))}else{if((h=this.pa-this.sa)==0)return a==this.pa?-1:0;if(0>(a=(a-this.sa)/h)||1<a)return 0;u!=null&&(u[0]=this.fR(a))}return d!=null&&(d[0]=a),1},p.prototype.Pe=function(h,a){var u=this.la-this.na;return u==0?h==this.la?a:NaN:(h=(h-this.na)/u,a=this.DF(h),h==1&&(a=this.pa),a)},p.prototype.ru=function(h,a,u){return 0<=this.rp(h.x,h.y,a,u)},p.prototype.vi=function(h,a,u){return 0<=this.rp(h,a,u,!0)},p.prototype.qs=function(h,a){return this.ru(h,a,!1)},p.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var h=this.sa;this.sa=this.pa,this.pa=h,h=this.na,this.na=this.la,this.la=h,h=0;for(var a=this.description.Oq-2;h<a;h++){var u=this.ka[h];this.ka[h]=this.ka[h+a],this.ka[h+a]=u}}},p.prototype.uu=function(h,a){(a=m.h.construct(h,a)).sub(this.ac());var u=new m.h;return u.uc(this.wc(),this.ac()),(h=u.wi(a))>(a=8881784197001252e-31*(Math.abs(u.x*a.y)+Math.abs(u.y*a.x)))?-1:h<-a?1:0},p.prototype.rp=function(h,a,u,d){var g=this.sa,v=this.na,b=h-g,C=a-v;if((b=Math.sqrt(b*b+C*C))<=Math.max(u,6661338147750939e-31*b))return d&&b==0?NaN:0;if(b=h-this.pa,C=a-this.la,(b=Math.sqrt(b*b+C*C))<=Math.max(u,6661338147750939e-31*b))return d&&b==0?NaN:1;if(b=this.pa-this.sa,C=this.la-this.na,0<(d=Math.sqrt(b*b+C*C))){var M=1/d,O=h-g,L=a-v,q=O*(b*=M)+L*(C*=M),U=17763568394002505e-31*(Math.abs(O*b)+Math.abs(L*C)),ee=b;if(b=-C,C=ee,q<-(U=Math.max(u,U))||q>d+U)return NaN;if(Math.abs(O*b+L*C)<=Math.max(u,17763568394002505e-31*(Math.abs(O*b)+Math.abs(L*C)))&&(.5>=(b=m.O.Rk(q*M,0,1))?(C=this.sa+(this.pa-this.sa)*b,d=this.na+(this.la-this.na)*b):(C=this.pa-(this.pa-this.sa)*(1-b),d=this.la-(this.la-this.na)*(1-b)),m.h.Oy(C,d,h,a)<=u)){if(.5>b){if(m.h.Oy(C,d,g,v)<=u)return 0}else if(m.h.Oy(C,d,this.pa,this.la)<=u)return 1;return b}}return NaN},p.prototype.Nb=function(h){return h!=null&&(h==this||h.constructor===this.constructor&&this.FM(h))},p.prototype.rD=function(h,a,u){var d=u?this.sa:this.pa;u=u?this.na:this.la;var g=new m.h;return g.x=h.pa-d,g.y=h.la-u,!(a.Qh(g)>6661338147750939e-31*a.fD(g))||(g.x=h.sa-d,g.y=h.na-u,a.Qh(g)<=6661338147750939e-31*a.fD(g))},p.prototype.qD=function(h){var a=new m.h;return a.x=this.pa-this.sa,a.y=this.la-this.na,!!this.rD(h,a,!1)&&(a.Sq(),!!this.rD(h,a,!0))},p.NM=function(h,a){var u=h.uu(a.sa,a.na),d=h.uu(a.pa,a.la);return!(0>u&&0>d||0<u&&0<d)&&(u=a.uu(h.sa,h.na),d=a.uu(h.pa,h.la),!(0>u&&0>d||0<u&&0<d)&&((u=h.Qb())>(d=a.Qb())?h.qD(a):a.qD(h)))},p.LM=function(h,a,u){var d=m.h.construct(NaN,NaN),g=h.pa-h.sa,v=h.la-h.na,b=a.pa-a.sa,C=a.la-a.na,M=b*v-g*C;if(M==0)return d;var O=8881784197001252e-31*(Math.abs(b*v)+Math.abs(g*C)),L=a.sa-h.sa,q=a.na-h.na,U=b*q-L*C,ee=U/M,Q=Math.abs(M);return ee<-(b=(8881784197001252e-31*(Math.abs(b*q)+Math.abs(L*C))*Q+O*Math.abs(U))/(M*M)+2220446049250313e-31*Math.abs(ee))||ee>1+b||(b=(C=g*q-L*v)/M)<-(g=(8881784197001252e-31*(Math.abs(g*q)+Math.abs(L*v))*Q+O*Math.abs(C))/(M*M)+2220446049250313e-31*Math.abs(b))||b>1+g||(ee=m.O.Rk(ee,0,1),g=m.O.Rk(b,0,1),v=h.hc(ee),M=a.hc(g),(O=new m.h).uc(v,M),O.length()>u&&(O.add(v,M),O.scale(.5),ee=h.fe(O,!1),g=a.fe(O,!1),h=h.hc(ee),a=a.hc(g),h.sub(a),h.length()>u)||d.ma(ee,g)),d},p.OM=function(h,a,u,d){var g=0;if((h.sa==a.sa&&h.na==a.na||h.sa==a.pa&&h.na==a.la)&&(g++,!d))return 1;if(h.pa==a.sa&&h.la==a.na||h.pa==a.pa&&h.la==a.la){if(++g==2)return 2;if(!d)return 1}return a.vi(h.sa,h.na,u)||a.vi(h.pa,h.la,u)||h.vi(a.sa,a.na,u)||h.vi(a.pa,a.la,u)?1:d&&g!=0||p.NM(h,a)==0?0:1},p.Zx=function(h,a,u,d,g,v){var b=0,C=h.rp(a.sa,a.na,v,!1),M=h.rp(a.pa,a.la,v,!1),O=a.rp(h.sa,h.na,v,!1),L=a.rp(h.pa,h.la,v,!1);return isNaN(C)||(d!=null&&(d[b]=C),g!=null&&(g[b]=0),u!=null&&(u[b]=m.h.construct(a.sa,a.na)),b++),isNaN(M)||(d!=null&&(d[b]=M),g!=null&&(g[b]=1),u!=null&&(u[b]=m.h.construct(a.pa,a.la)),b++),b==2||isNaN(O)||C==0&&O==0||M==0&&O==1||(d!=null&&(d[b]=0),g!=null&&(g[b]=O),u!=null&&(u[b]=m.h.construct(h.sa,h.na)),b++),b==2||isNaN(L)||C==1&&L==0||M==1&&L==1||(d!=null&&(d[b]=1),g!=null&&(g[b]=L),u!=null&&(u[b]=m.h.construct(a.pa,a.la)),b++),0<b?(b==2&&d!=null&&d[0]>d[1]&&(h=d[0],d[0]=d[1],d[1]=h,g!=null&&(d=g[0],g[0]=g[1],g[1]=d),u!=null&&(g=m.h.construct(u[0].x,u[0].y),u[0]=u[1],u[1]=g)),b):(b=p.LM(h,a,v),isNaN(b.x)?0:(u!=null&&(u[0]=h.hc(b.x)),d!=null&&(d[0]=b.x),g!=null&&(g[0]=b.y),1))},p.prototype.eG=function(){return 0},p.prototype.op=function(){},p.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},p}(m.SC);m.yb=j}(ye||(ye={})),function(m){var j=function(){function T(){this.Jm=[],this.ya=-1}return T.prototype.La=function(){return this.ya},T.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var p=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),p}return this.Jm=null},T.prototype.ZX=function(p){this.Jm.push(p)},T.prototype.qe=function(){},T}();m.gL=j}(ye||(ye={})),function(m){var j;(j=m.SL||(m.SL={}))[j.enumFillRuleOddEven=0]="enumFillRuleOddEven",j[j.enumFillRuleWinding=1]="enumFillRuleWinding";var T=function(p){function h(a,u){var d=p.call(this)||this;if(d.xf=!1,d.Eq=null,d.sq=0,d.rq=0,d.Aj=null,d.Mg=!1,d.nb=null,d.mb=null,d.Ve=null,d.Lj=null,d.Sd=null,d.tq=0,d.gb=0,d.xq=0,u===void 0)d.xf=a,d.Mg=!1,d.tq=0,d.sq=0,d.rq=0,d.wa=0,d.description=m.ee.og();else{if(u==null)throw m.i.N();d.xf=a,d.Mg=!1,d.tq=0,d.sq=0,d.rq=0,d.wa=0,d.description=u}return d.Aj=null,d.gb=0,d}return ri(h,p),h.prototype.tm=function(){return 0<this.tq},h.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new m.Sa(this.description):this.Eq.Nf(this.description)},h.prototype.sx=function(a,u){var d=new m.h;d.x=a,d.y=u,this.Lt(d)},h.prototype.Lt=function(a){this.Yx(),this.Eq.Cb(a),this.Mg=!0},h.prototype.nf=function(a){if(a.B())throw m.i.N();this.Jl(a.description),this.Yx(),a.copyTo(this.Eq),this.Mg=!0},h.prototype.Sx=function(){var a=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=m.Yc.Oh(2),this.nb.write(0,0),this.mb=m.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),a++);var u=this.wa;this.nb.write(this.nb.size-1,this.wa+a),this.dm(u+a),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(u,this.Eq),this.Mg=!1)},h.prototype.yj=function(a,u){this.Sx(),this.Cb(this.wa-1,a,u)},h.prototype.Ci=function(a){this.Sx(),this.Cb(this.wa-1,a)},h.prototype.lineTo=function(a){this.Sx(),this.Ht(this.wa-1,a)},h.prototype.CU=function(a){if(this.vc(),this.xf)throw m.i.Qa();var u=this.da();if(a>u)throw m.i.Qa();if(this.dc(a)){if(this.mb==null)throw m.i.Qa();var d=this.wa,g=this.Ba(a),v=this.Vc(a);this.dm(this.wa+1),this.mc();for(var b=0,C=this.description.Aa;b<C;b++)if(this.za[b]!=null){var M=m.ra.Va(this.description.Ed(b));this.za[b].Mn(M*v,this.za[b],M*g,M,!0,1,M*d)}for(;u>a;u--)d=this.nb.read(u),this.nb.write(u,d+1);this.mb.KE(a,1)}},h.prototype.Ap=function(){if(this.wx(),a===void 0){this.Mg=!1;var a=this.da()-1}var u=this.mb.read(a);this.mb.write(a,1|u),this.Ve!=null&&(a=this.Vc(a)-1,this.Ve.write(a,1),this.Lj.write(a,-1))},h.prototype.dc=function(a){return!!(1&this.mb.read(a))},h.prototype.Nn=function(a){if(this.dc(a))return!0;var u=this.Ba(a);return!(u>(a=this.Vc(a)-1))&&(u=this.Na(u),a=this.Na(a),u.qb(a))},h.prototype.yv=function(a){return!!(2&this.mb.read(a))},h.prototype.oc=function(a,u){if(this.Jl(a.description),a.getType()!=322)throw m.i.Qa();var d=new m.Sa;(u||this.B())&&(a.To(d),this.nf(d)),a.Po(d),this.lineTo(d)},h.prototype.tp=function(a){var u=this.wa==0;this.sx(a.v,a.G),this.yj(a.v,a.H),this.yj(a.C,a.H),this.yj(a.C,a.G),this.Ap(),this.Mg=!1,u&&this.Lf(256,!1)},h.prototype.ad=function(a,u){if(!a.B()){for(var d=this.wa==0,g=new m.Sa(this.description),v=0;4>v;v++)a.Hf(u?4-v-1:v,g),v==0?this.nf(g):this.lineTo(g);this.Ap(),this.Mg=!1,d&&!u&&this.Lf(256,!1)}},h.prototype.add=function(a,u){for(var d=0;d<a.da();d++)this.addPath(a,d,!u)},h.prototype.addPath=function(a,u,d){this.vf(-1,a,u,d)},h.prototype.Yk=function(a,u){this.Hz(a,u)},h.prototype.Dr=function(a,u,d,g,v){if(v||this.da()!=0||(v=!0),0>u&&(u=a.da()-1),u>=a.da()||0>d||0>g||g>a.rv(u))throw m.i.fa("index out of bounds");if(g!=0){var b=a.dc(u)&&d+g==a.rv(u);if(!b||g!=1){if(this.Mg=!1,this.Jl(a.description),d=a.Ba(u)+d+1,v&&(g++,d--),b&&g--,b=this.wa,this.dm(this.wa+g),this.mc(),v){if(g==0)return;this.nb.add(this.wa),v=a.mb.read(u),v&=-5,this.xf&&(v|=1),this.mb.write(this.mb.size-1,v),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);v=0;for(var C=this.description.Aa;v<C;v++){var M=this.description.kd(v),O=m.ra.Va(M),L=a.description.Pf(M);0>L||a.za[L]==null?this.za[v].Ln(O*b,m.ra.se(M),g*O,O*b):this.za[v].Mn(O*b,a.za[L],O*d,g*O,!0,O,O*b)}if(this.tm()||a.yv(u))throw m.i.Qa();this.Pc(1993)}}},h.prototype.oJ=function(){for(var a=0,u=this.da();a<u;a++)this.FW(a)},h.prototype.FW=function(a){if(this.mc(),a>=this.da())throw m.i.N();var u=this.Ba(a),d=this.Ja(a);a=this.dc(a)?1:0;for(var g=0,v=this.description.Aa;g<v;g++)if(this.za[g]!=null){var b=m.ra.Va(this.description.Ed(g));this.za[g].ni(b*(u+a),b*(d-a),b)}this.Pc(1993)},h.prototype.Zq=function(a){this.mc();var u=this.da();if(0>a&&(a=u-1),a>=u)throw m.i.N();for(var d=this.Ba(a),g=this.Ja(a),v=0,b=this.description.Aa;v<b;v++)if(this.za[v]!=null){var C=m.ra.Va(this.description.Ed(v));this.za[v].En(C*d,C*g,C*this.wa)}for(d=a+1;d<=u;d++)v=this.nb.read(d),this.nb.write(d-1,v-g);if(this.mb==null)for(d=a+1;d<=u;d++)a=this.mb.read(d),this.mb.write(d-1,a);this.nb.resize(u),this.mb.resize(u),this.wa-=g,this.Pg-=g,this.Pc(1993)},h.prototype.vf=function(a,u,d,g){if(u==this||d>=u.da())throw m.i.N();var v=this.da();if(a>v)throw m.i.N();0>a&&(a=v),0>d&&(d=u.da()-1),this.Mg=!1,this.Jl(u.description),u.mc();var b=u.Ba(d),C=u.Ja(d),M=this.wa,O=u.dc(d)&&!g?1:0;this.dm(this.wa+C),this.mc();for(var L=a<v?this.Ba(a):M,q=0,U=this.description.Aa;q<U;q++){var ee=this.description.Ed(q),Q=u.description.Pf(ee),ge=m.ra.Va(ee);0<=Q&&u.za[Q]!=null?(O!=0&&this.za[q].Mn(L*ge,u.za[Q],ge*b,ge,!0,ge,ge*M),this.za[q].Mn((L+O)*ge,u.za[Q],ge*(b+O),ge*(C-O),g,ge,ge*(M+O))):this.za[q].Ln(L*ge,m.ra.se(ee),ge*C,ge*M)}for(this.nb.add(M+C),g=v;g>=a+1;g--)b=this.nb.read(g-1),this.nb.write(g,b+C);for(u.yv(d),this.mb.add(0),g=v-1;g>=a+1;g--)v=this.mb.read(g),v&=-5,this.mb.write(g+1,v);v=u.JR().read(d),v&=-5,this.xf&&(v|=1),this.mb.write(a,v)},h.prototype.Hz=function(a,u){var d=-1,g=this.da();if(d>g)throw m.i.N();0>d&&(d=g),this.Mg=!1;var v=this.wa;this.dm(this.wa+u),this.mc();var b=d<g?this.Ba(d):v;if(a!=null)this.za[0].Iz(2*b,a,0,u,!0,2*v);else{var C=m.ra.se(0);this.za[0].Ln(2*b,C,2*u,2*v)}a=1;for(var M=this.description.Aa;a<M;a++){C=this.description.kd(a);var O=m.ra.Va(C);C=m.ra.se(C),this.za[a].Ln(b*O,C,O*u,O*v)}for(this.nb.add(this.wa),v=g;v>=d+1;v--)b=this.nb.read(v-1),this.nb.write(v,b+u);for(this.mb.add(0),v=g-1;v>=d+1;v--)u=this.mb.read(v),u&=-5,this.mb.write(v+1,u);this.xf&&this.mb.write(d,1)},h.prototype.qG=function(a,u,d){var g=-1;if(0>a&&(a=this.da()),a>this.da()||g>this.Ja(a)||d>u.length)throw m.i.fa("index out of bounds");if(d!=0){a==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>g&&(g=this.Ja(a)),this.mc();var v=this.wa;this.dm(this.wa+d),this.mc();for(var b=0,C=this.description.Aa;b<C;b++){var M=this.description.Ed(b),O=m.ra.Va(M);this.za[b].Ut(O*(this.Ba(a)+g+d),(v-this.Ba(a)-g)*O,this.za[b],O*(this.Ba(a)+g),!0,O),b==0?this.za[b].vC(O*(this.Ba(a)+g),d,u,0,!0):this.za[b].Wj(m.ra.se(M),(this.Ba(a)+g)*O,d*O)}for(this.tm()&&(this.Ve.Ut(this.Ba(a)+g+d,v-this.Ba(a)-g,this.Ve,this.Ba(a)+g,!0,1),this.Lj.Ut(this.Ba(a)+g+d,v-this.Ba(a)-g,this.Lj,this.Ba(a)+g,!0,1),this.Ve.Wj(1,this.Ba(a)+g,d),this.Lj.Wj(-1,this.Ba(a)+g,d)),a+=1,u=this.da();a<=u;a++)this.nb.write(a,this.nb.read(a)+d)}},h.prototype.wf=function(a,u,d){var g=this.da();if(0>a&&(a=this.da()),a>=g||u>this.Ja(a))throw m.i.fa("index out of bounds");a==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>u&&(u=this.Ja(a));var v=this.wa;this.dm(this.wa+1),this.mc();var b=this.Ba(a);this.za[0].vj(2*(b+u),d,2*v),d=1;for(var C=this.description.Aa;d<C;d++){var M=this.description.Ed(d),O=m.ra.Va(M);this.za[d].Ln(O*(b+u),m.ra.se(M),O,O*v)}for(a+=1;a<=g;a++)this.nb.write(a,this.nb.read(a)+1)},h.prototype.DB=function(a,u){var d=this.da();if(0>a&&(a=d-1),a>=d||u>=this.Ja(a))throw m.i.fa("index out of bounds");this.mc();var g=this.Ba(a);0>u&&(u=this.Ja(a)-1),u=g+u,g=0;for(var v=this.description.Aa;g<v;g++)if(this.za[g]!=null){var b=m.ra.Va(this.description.Ed(g));this.za[g].En(b*u,b,b*this.wa)}for(;d>=a+1;d--)u=this.nb.read(d),this.nb.write(d,u-1);this.wa--,this.Pg--,this.Pc(1993)},h.prototype.uE=function(a,u,d){var g=this.Ba(a)+u;if((d=this.Ba(d)+void 0)<g||0>g||d>this.I()-1)throw m.i.N();u=0,(a=this.Ga()).Vb(g);do{for(;a.Ha()&&(g=a.ha(),a.wb()!=d);)u+=g=g.Qb();if(a.wb()==d)break}while(a.$a());return u},h.prototype.fO=function(a,u,d){if(u=this.Ba(a)+u,d=this.Ba(a)+d,0>u||d>this.I()-1)throw m.i.N();var g=this.Ga();if(u>d){if(!this.dc(a))throw m.i.N("cannot iterate across an open path");g.JB()}var v=a=0;g.Vb(u);do v+=a,a=g.ha().Qb();while(g.wb()!=d);return v},h.prototype.mg=function(){return m.pi.gm(this,null)},h.prototype.KS=function(a,u,d){for(var g=a;g<d-1;g++)if(this.dc(g))throw m.i.N("cannot interpolate across closed paths");if((g=this.description.Aa)!=1){var v=this.uE(a,u,d);if(v!=0)for(var b=1;b<g;b++){var C=this.description.kd(b);if(m.ra.lz(C)!=2)for(var M=m.ra.Va(C),O=0;O<M;O++)this.MS(C,a,u,d,v,O)}}},h.prototype.JS=function(a,u,d){var g=this.description.Aa;if(g!=1){var v=this.fO(a,u,d);if(v!=0)for(var b=1;b<g;b++){var C=this.description.kd(b);if(m.ra.lz(C)!=2)for(var M=m.ra.Va(C),O=0;O<M;O++)this.LS(C,a,u,d,v,O)}}},h.prototype.MS=function(a,u,d,g,v,b){var C=this.Ga(),M=this.Ba(u)+d;g=this.Ba(g)+void 0,u=this.Uc(a,M,b),d=this.Uc(a,g,b);var O=u,L=0;C.Vb(M);do if(C.Ha()){if(C.ha(),C.wb()==g)break;this.setAttribute(a,C.wb(),b,O),C.li();do{if(M=C.ha(),C.ik()==g)return;L+=M=M.Qb(),O=m.lc.hq(u,d,L/v),C.On()||this.setAttribute(a,C.ik(),b,O)}while(C.Ha())}while(C.$a())},h.prototype.LS=function(a,u,d,g,v,b){var C=this.Ga(),M=this.Ba(u)+d;if((u=this.Ba(u)+g)!=M){g=this.Uc(a,M,b),d=this.Uc(a,u,b);var O=0;C.Vb(M),C.JB(),M=g;do{var L=C.ha();this.setAttribute(a,C.wb(),b,M),O+=M=L.Qb(),M=m.lc.hq(g,d,O/v)}while(C.ik()!=u)}},h.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},h.prototype.Oc=function(a){a instanceof m.Dd?this.YD(a,-1):this.wN(a)},h.prototype.YD=function(a,u){if(!this.B()&&!a.isIdentity()){this.mc();var d=this.za[0],g=new m.h,v=new m.h;if(0>u){var b=this.tm(),C=0;u=this.wa}else b=this.yv(u),C=this.Ba(u),u=this.Vc(u);for(;C<u;C++){if(g.x=d.read(2*C),g.y=d.read(2*C+1),b){var M=this.Lj.read(C);if(0<=M)switch(7&this.Ve.read(C)){case 2:v.x=this.Sd.read(M),v.y=this.Sd.read(M+1),a.Eh(v,v),this.Sd.write(M,v.x),this.Sd.write(M+1,v.y),v.x=this.Sd.read(M+3),v.y=this.Sd.read(M+4),a.Eh(v,v),this.Sd.write(M+3,v.x),this.Sd.write(M+4,v.y);break;case 4:throw m.i.Qa()}}a.Eh(g,g),d.write(2*C,g.x),d.write(2*C+1,g.y)}this.Pc(1993)}},h.prototype.wN=function(a){if(!this.B()){this.re(1),this.mc();for(var u=this.za[0],d=this.za[1],g=new m.Nd,v=new m.Nd,b=this.tm(),C=0;C<this.wa;C++){if(g.x=u.read(2*C),g.y=u.read(2*C+1),g.z=d.read(C),b){var M=this.Lj.read(C);if(0<=M)switch(7&this.Ve.read(C)){case 2:v.x=this.Sd.read(M),v.y=this.Sd.read(M+1),v.z=this.Sd.read(M+2),v=a.fp(v),this.Sd.write(M,v.x),this.Sd.write(M+1,v.y),this.Sd.write(M+1,v.z),v.x=this.Sd.read(M+3),v.y=this.Sd.read(M+4),v.z=this.Sd.read(M+5),v=a.fp(v),this.Sd.write(M+3,v.x),this.Sd.write(M+4,v.y),this.Sd.write(M+5,v.z);break;case 4:throw m.i.Qa()}}g=a.fp(g),u.write(2*C,g.x),u.write(2*C+1,g.y),d.write(C,g.z)}this.Pc(1993)}},h.prototype.iy=function(){this.nb==null&&(this.nb=m.Yc.Oh(1,0),this.mb=m.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},h.prototype.op=function(a){a.Mg=!1,a.tq=this.tq,a.xq=this.xq,a.nb=this.nb!=null?m.ia.Bn(this.nb):null,a.mb=this.mb!=null?m.pn.Bn(this.mb):null,a.Lj=this.Lj!=null?m.ia.Bn(this.Lj):null,a.Ve=this.Ve!=null?m.pn.Bn(this.Ve):null,a.Sd=this.Sd!=null?m.be.Bn(this.Sd):null,a.sq=this.sq,a.rq=this.rq,a.Aj=this.ak(1024)?null:this.Aj},h.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var a=this.Ga(),u=new m.Fx(0);a.$a();)for(;a.Ha();)u.add(a.ha().Qb());return this.sq=u.rm(),this.Lf(512,!1),u.rm()},h.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof h&&p.prototype.Nb.call(this,a)))return!1;var u=this.da();return!(u!=a.da()||this.nb!=null&&!this.nb.Nb(a.nb,0,u+1)||this.xq!=a.xq||this.mb!=null&&!this.mb.Nb(a.mb,0,u))&&p.prototype.Nb.call(this,a)},h.prototype.Ga=function(){return new m.YL(this)},h.prototype.hy=function(a){if(p.prototype.hy.call(this,a),this.tm())for(a=this.Ga();a.$a();)a.Ha()},h.prototype.yp=function(a,u){if(p.prototype.yp.call(this,a,u),this.tm())for(a=this.Ga();a.$a();)a.Ha()},h.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},h.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},h.prototype.Ev=function(a){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(a)):!!(4&this.mb.read(a)))},h.prototype.Ir=function(a){return this.xf?(this.xu(),this.Aj.read(a)):0},h.prototype.xu=function(){if(this.ak(1024)){var a=this.da();this.Aj==null?this.Aj=new m.be(a):this.Aj.size!=a&&this.Aj.resize(a),a=new m.Fx(0);for(var u=new m.Fx(0),d=new m.h,g=0,v=this.Ga();v.$a();){for(u.reset(),this.D(this.Ba(v.gb),d);v.Ha();)u.add(v.ha().Tx(d.x,d.y));a.add(u.rm());var b=g++;this.Aj.write(b,u.rm())}this.rq=a.rm(),this.Lf(1024,!1)}},h.prototype.FR=function(){if(this.xf){this.fm();for(var a=this.da(),u=0;u<a;u++)4&this.mb.read(u)}},h.prototype.fm=function(){if(this.ak(8)){this.xu();var a=this.da();(this.mb==null||this.mb.size<a)&&(this.mb=m.Yc.Mr(a+1));for(var u=1,d=0;d<a;d++){var g=this.Aj.read(d);d==0&&(u=0<g?1:-1),0<g*u?this.mb.zJ(d,4):this.mb.KE(d,4)}this.Lf(8,!1)}},h.prototype.sz=function(a){var u=this.gb,d=this.da();if(0<=u&&u<d){if(a<this.Vc(u)){if(a>=this.Ba(u))return u;u--}else u++;if(0<=u&&u<d&&a>=this.Ba(u)&&a<this.Vc(u))return this.gb=u}if(5>d){for(u=0;u<d;u++)if(a<this.Vc(u))return this.gb=u;throw m.i.fa("corrupted geometry")}for(u=0,--d;d>u;){var g=u+(d-u>>1);if(a<this.Ba(g))d=g-1;else{if(!(a>=(u=this.Vc(g))))return this.gb=g;u=g+1}}return this.gb=u},h.prototype.yz=function(){var a=this.I();if(!this.xf){a-=this.da();for(var u=0,d=this.da();u<d;u++)this.dc(u)&&a++}return a},h.prototype.rv=function(a){var u=this.Ja(a);return this.dc(a)||u--,u},h.prototype.Ia=function(){return new h(this.xf,this.description)},h.prototype.Db=function(){return this.xf?2:1},h.prototype.getType=function(){return this.xf?1736:1607},h.prototype.QJ=function(a){this.nb=a,this.Pc(16777215)},h.prototype.VR=function(){return this.wx(),this.Ve},h.prototype.JR=function(){return this.wx(),this.mb},h.prototype.PJ=function(a){this.mb=a,this.Pc(16777215)},h.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},h.prototype.Vc=function(a){return this.nb.read(a+1)},h.prototype.Ja=function(a){return this.nb.read(a+1)-this.nb.read(a)},h.prototype.Ba=function(a){return this.nb.read(a)},h.prototype.lu=function(a,u){this.Bb==null&&(this.Bb=new m.Uk),u=m.Nx.pW(u);var d=this.Bb.Fk;if(d!=null){if(!(d.Ik<a||u>d.RR()))return!0;this.Bb.yD(null)}return d=m.Nx.create(this,a,u),this.Bb.yD(d),!0},h.prototype.cc=function(){var a=p.prototype.cc.call(this);if(!this.Ac()){var u=this.da();this.nb!=null&&this.nb.An(a,0,u+1),this.mb!=null&&this.mb.An(a,0,u)}return a},h.prototype.ZF=function(a){return this.Ve!=null?this.Ve.read(a):1},h.prototype.bc=function(a,u,d){var g=this.sz(a);if(a==this.Vc(g)-1&&!this.dc(g))throw m.i.fa("index out of bounds");this.mc();var v=this.Ve,b=1;if(v!=null&&(b=7&v.read(a)),b!==1)throw m.i.Qa();if(u.Or(),u=u.get(),d?u.Nf(m.ee.og()):u.Nf(this.description),g=a==this.Vc(g)-1&&this.dc(g)?this.Ba(g):a+1,v=new m.h,this.D(a,v),u.Dc(v),this.D(g,v),u.Qc(v),!d)for(d=1,v=this.description.Aa;d<v;d++){b=this.description.Ed(d);for(var C=m.ra.Va(b),M=0;M<C;M++){var O=this.Uc(b,a,M);u.YB(b,M,O),O=this.Uc(b,g,M),u.OB(b,M,O)}}},h.prototype.Rj=function(a,u){if(a>=this.da())throw m.i.N();if(this.B())u.Oa();else{if(this.yv(a))throw m.i.fa("not implemented");var d=this.ub(0),g=new m.h,v=new m.l;v.Oa();var b=this.Ba(a);for(a=this.Vc(a);b<a;b++)d.tc(2*b,g),v.Zb(g);u.K(v)}},h.prototype.fj=function(a){return this.Bb==null&&(this.Bb=new m.Uk),!(a==0||16>this.I())&&(a=m.ta.nE(this),this.Bb.WM(a),!0)},h.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new m.Uk),this.Bb.zo==null){this.Bb.xD(null);var a=m.ta.YN(this);this.Bb.xD(a)}},h.prototype.Yo=function(a){this.xq=a},h.prototype.In=function(){return this.xq},h.prototype.DD=function(a){if(this==a)throw m.i.fa("MultiPathImpl.add");for(var u=this.da(),d=0;d<a.da();d++)this.addPath(a,d,!0),this.CU(u),u++},h.prototype.kO=function(a){var u=this.sz(a),d=this.Ba(u);if(d!=a){if(a>=(u=this.Vc(u))||a<d)throw m.i.fa("change_ring_start_point");for(var g=0,v=this.description.Aa;g<v;g++){var b=this.description.kd(g);b=m.ra.Va(b),this.za[g].rotate(d*b,a*b,u*b)}}},h}(m.Gx);m.Vk=T}(ye||(ye={})),function(m){var j=function(T){function p(h){var a=T.call(this)||this;if(h!==void 0){if(h==null)throw m.i.N();a.description=h}else a.description=m.ee.og();return a.wa=0,a}return ri(p,T),p.prototype.Ia=function(){return new p(this.description)},p.prototype.add=function(h){this.resize(this.wa+1),this.Dh(this.wa-1,h)},p.prototype.Bu=function(h,a){this.resize(this.wa+1);var u=new m.h;u.ma(h,a),this.Cb(this.wa-1,u)},p.prototype.Fd=function(h,a,u){if(u=0>u?h.I():u,0>a||a>h.I()||u<a)throw m.i.N();if(a!=u){this.Jl(h.description),u-=a;var d=this.wa;this.resize(this.wa+u),this.mc();for(var g=0,v=h.description.Aa;g<v;g++){var b=h.description.Ed(g),C=m.ra.Va(b),M=this.ub(b);b=h.ub(b),M.Mn(d*C,b,a*C,u*C,!0,1,d*C)}}},p.prototype.HD=function(h,a){var u=h.length;if(a=0>a?u:a,0>u||0>a)throw m.i.N();if(a!=0){u=a-0,a=this.wa,this.resize(this.wa+u);for(var d=0;d<u;d++)this.Cb(a+d,h[0+d])}},p.prototype.DB=function(h){if(0>h||h>=this.I())throw m.i.fa("index out of bounds");this.mc();for(var a=0,u=this.description.Aa;a<u;a++)if(this.za[a]!=null){var d=m.ra.Va(this.description.Ed(a));this.za[a].En(d*h,d,d*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},p.prototype.resize=function(h){this.dm(h)},p.prototype.op=function(){},p.prototype.Oa=function(){T.prototype.wD.call(this)},p.prototype.Oc=function(h){if(h instanceof m.Dd){if(this.B())return;this.mc();for(var a=this.za[0],u=new m.h,d=0;d<this.wa;d++)u.x=a.read(2*d),u.y=a.read(2*d+1),h.Eh(u,u),a.write(2*d,u.x),a.write(2*d+1,u.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),a=this.za[0],u=this.za[1];var g=new m.Nd;for(d=0;d<this.wa;d++){g.x=a.read(2*d),g.y=a.read(2*d+1),g.z=u.read(d);var v=h.fp(g);a.write(2*d,v.x),a.write(2*d+1,v.y),u.write(d,v.z)}}this.Pc(1993)},p.prototype.Db=function(){return 0},p.prototype.getType=function(){return 550},p.prototype.Ke=function(){return 0},p.prototype.Qb=function(){return 0},p.prototype.Nb=function(h){return h==this||h instanceof p&&T.prototype.Nb.call(this,h)},p.prototype.lW=function(h,a){var u=this.wa;if(u=Math.min(u,a+1e3),0>a||a>=this.wa||u<a||h.length!=1e3)throw m.i.N();var d=u-a,g=[];for(this.ub(0).Vw(2*a,2*d,g,0,!0),a=0;a<d;a++)h[a]=m.h.construct(g[2*a],g[2*a+1]);return u},p.prototype.$x=function(){},p.prototype.iy=function(){},p.prototype.lu=function(){return!1},p.prototype.fj=function(){return!1},p.prototype.mg=function(){return null},p}(m.Gx);m.de=j}(ye||(ye={})),function(m){var j;(j=m.iL||(m.iL={}))[j.NotDetermined=0]="NotDetermined",j[j.Structure=1]="Structure",j[j.DegenerateSegments=2]="DegenerateSegments",j[j.Clustering=3]="Clustering",j[j.Cracking=4]="Cracking",j[j.CrossOver=5]="CrossOver",j[j.RingOrientation=6]="RingOrientation",j[j.RingOrder=7]="RingOrder",j[j.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",j[j.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",j[j.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var T=function(){function p(h,a,u){h===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=h,this.Jo=a,this.Ko=u)}return p.prototype.Wt=function(h){this.Jj=h.Jj,this.Jo=h.Jo,this.Ko=h.Ko},p}();m.Md=T}(ye||(ye={})),function(m){m.O=function(){function j(){}return j.assert=function(T){if(T===!1)throw m.i.GK()},j.bK=function(T){return isNaN(T)?NaN:T===0?T:0<T?1:-1},j.Fu=function(T){var p;p===void 0&&(p=0);for(var h=[],a=0;a<T;a++)h[a]=j.lg(2,p);return h},j.lg=function(T,p){p===void 0&&(p=0);for(var h=[],a=0;a<T;a++)h[a]=p;return h},j.$u=function(T,p){var h,a;for(h===void 0&&(h=0),a===void 0&&(a=T.length-1);h<=a;h++)T[h]=p},j.Rk=function(T,p,h){return T<p?p:T>h?h:T},j.Th=function(T,p){var h=5381;return((h=((h=((h=p!==void 0?(p<<5)+p+(255&T):(h<<5)+h+(255&T))<<5)+h+(T>>8&255))<<5)+h+(T>>16&255))<<5)+h+(T>>24&255)&2147483647},j.uj=function(){throw Error("Not Implemented")},j.bB=function(T){return j.aU(T)+12345&2147483647},j.XG=function(T){var p=32,h=T%j.Qx|0,a=T/j.Qx|0;return(p&=63)==0?T:(32>p?(T=h>>>p|a<<32-p,p=a>>p):(T=a>>p-32,p=0<=a?0:-1),p*j.Qx+(T>>>0))},j.aU=function(T){var p=1103515245,h=65535&p;return((p-h)*(T|=0)|0)+(h*T|0)|0},j.truncate=function(T){return 0>T?-1*Math.floor(Math.abs(T)):Math.floor(T)},j.MAX_SAFE_INTEGER=Math.pow(2,53)-1,j.MIN_SAFE_INTEGER=-j.MAX_SAFE_INTEGER,j.VC=65536,j.Qx=j.VC*j.VC,j}()}(ye||(ye={})),function(m){var j;(j=m.CL||(m.CL={}))[j.Project=0]="Project",j[j.Union=1]="Union",j[j.Difference=2]="Difference",j[j.Proximity2D=3]="Proximity2D",j[j.Relate=4]="Relate",j[j.Equals=5]="Equals",j[j.Disjoint=6]="Disjoint",j[j.Intersects=7]="Intersects",j[j.Within=8]="Within",j[j.Contains=9]="Contains",j[j.Crosses=10]="Crosses",j[j.Touches=11]="Touches",j[j.Overlaps=12]="Overlaps",j[j.Buffer=13]="Buffer",j[j.Distance=14]="Distance",j[j.Intersection=15]="Intersection",j[j.Clip=16]="Clip",j[j.Cut=17]="Cut",j[j.DensifyByLength=18]="DensifyByLength",j[j.DensifyByAngle=19]="DensifyByAngle",j[j.LabelPoint=20]="LabelPoint",j[j.GeodesicBuffer=21]="GeodesicBuffer",j[j.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",j[j.ShapePreservingDensify=23]="ShapePreservingDensify",j[j.GeodeticLength=24]="GeodeticLength",j[j.GeodeticArea=25]="GeodeticArea",j[j.Simplify=26]="Simplify",j[j.SimplifyOGC=27]="SimplifyOGC",j[j.Offset=28]="Offset",j[j.Generalize=29]="Generalize",j[j.SymmetricDifference=30]="SymmetricDifference",j[j.ConvexHull=31]="ConvexHull",j[j.Boundary=32]="Boundary",j[j.SimpleRelation=33]="SimpleRelation";var T=function(){function p(){}return p.prototype.getType=function(){return null},p.prototype.wn=function(){},p.prototype.Iu=function(){return!1},p}();m.Je=T}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 13},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g){return h instanceof m.aa?(g=new m.Zc(h),this.V(g,a,[u],!1,d).next()):d===!0?(u=new m.BC(h,a,u,!1,g),m.Gh.local().V(u,a,g)):new m.BC(h,a,u,!1,g)},p.instance=null,p}(m.Je);m.AC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d){this.ya=-1,this.Rd=p,this.$z=h,this.Cs=a,this.tT=new m.l,this.tT.Oa(),this.eo=-1,this.Ub=d}return T.prototype.next=function(){for(var p;(p=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(p,this.Cs[this.eo]);return null},T.prototype.La=function(){return this.ya},T.prototype.buffer=function(p,h){return m.HK.buffer(p,h,this.$z,NaN,96,this.Ub)},T.prototype.qe=function(){},T}();m.BC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 16},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d).next()):new m.lL(h,a,u,d)},p.instance=null,p}(m.Je);m.kL=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){if(this.ya=-1,p==null)throw m.i.N();this.$=h,this.yk=p,this.qa=m.ta.Wd(a,h,!1)}return T.prototype.next=function(){var p;return(p=this.yk.next())!=null?(this.ya=this.yk.La(),m.Ud.clip(p,this.$,this.qa,0)):null},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.lL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 31},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u){return h instanceof m.aa?m.DC.rE(h):new m.DC(a,h,u)},p.instance=null,p}(m.Je);m.CC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){if(this.uA=new m.Zt,this.ya=-1,h==null)throw m.i.N();this.cH=p,this.Ic=!1,this.yk=h,this.Ub=a}return T.prototype.next=function(){if(this.cH){if(!this.Ic){var p=this.dO(this.yk);return this.Ic=!0,p}return null}if(!this.Ic){if((p=this.yk.next())!=null)return this.ya=this.yk.La(),T.rE(p);this.Ic=!0}return null},T.prototype.La=function(){return this.ya},T.prototype.dO=function(p){for(var h;(h=p.next())!=null;)this.uA.Ib(h);return this.uA.cR()},T.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw m.i.fa("Invalid call for non merging convex hull.");var p=this.yk.next();if(p==null)throw m.i.fa("Expects a non-null geometry.");this.uA.Ib(p)}},T.rE=function(p){if(T.VS(p))return p;var h=p.getType();if(m.Vk.yd(h))return(h=new m.Ta(p.description)).oc(p,!0),h;if(h==550&&p.I()==2){var a=new m.Sa;return h=new m.Ta(p.description),p.ve(0,a),h.nf(a),p.ve(1,a),h.lineTo(a),h}return m.Zt.RO(p)},T.VS=function(p){if(p.B())return!0;var h=p.getType();return h==33||h==197||!m.Vk.yd(h)&&(h==550?p.I()==1:h==1607?p.da()==1&&2>=p.I():p.da()==1&&(2>=p.I()||m.Zt.JG(p,0)))},T}();m.DC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 17},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g){return new m.nL(h,a,u,d,g)},p.instance=null,p}(m.Je);m.mL=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d){if(this.Tf=null,h==null||a==null)throw m.i.fa("invalid argument");this.qT=p,this.nA=h,this.lH=a,p=m.ta.mv(h,a),this.qa=m.ta.Wd(u,p,!0),this.kH=-1,this.nd=d}return T.prototype.La=function(){return 0},T.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},T.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},T.prototype.TQ=function(){var p=new m.Ta,h=new m.Ta,a=new m.Ta;this.Tf.push(p),this.Tf.push(h);var u=[];m.LK.JK(this.qT,this.nA,this.lH,this.qa,u,this.nd);for(var d=0;d<u.length;d++){var g=u[d];if(g.bt==0)p.add(g.X,!1);else if(g.bt==1||g.bt==2)h.add(g.X,!1);else if(g.bt==3)this.Tf.push(g.X);else{if(g.bt!=4)throw m.i.fa("internal");a.add(g.X,!1)}}a.B()||p.B()&&h.B()&&!(3<=this.Tf.length)||this.Tf.push(a),p.B()&&h.B()&&3>this.Tf.length&&(this.Tf.length=0)},T.prototype.SQ=function(){var p=new m.ia(0),h=new m.gd,a=h.aF(),u=h.Ib(this.nA),d=h.Ib(this.lH),g=new m.Fg;try{g.Ft(h,this.qa,this.nd),g.dl(a,u,d,p);var v=h.Ne(u),b=new m.Da,C=new m.Da;for(this.Tf.length=0,this.Tf.push(b),this.Tf.push(C),u=0;u<p.size;u++){var M=new m.gd,O=M.Ib(v),L=M.Ib(h.Ne(p.get(u)));g.dr(M,this.nd);var q=g.Av(O,L),U=M.Ne(q);if(!U.B()){var ee=h.KF(p.get(u),a);ee==2?b.add(U,!1):ee==1?C.add(U,!1):this.Tf.push(U);var Q=new m.gd;O=Q.Ib(v),L=Q.Ib(h.Ne(p.get(u))),g.dr(Q,this.nd),v=Q.Ne(g.im(O,L))}}!v.B()&&0<p.size&&this.Tf.push(v),b.B()&&C.B()&&(this.Tf.length=0)}finally{g.Ug()}},T.prototype.qe=function(){},T}();m.nL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 18},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u){if(h instanceof m.aa)return h=new m.Zc(h),this.V(h,a,u).next();if(0>=a)throw m.i.N();return new m.oL(h,a,u)},p.instance=null,p}(m.Je);m.Xl=j}(ye||(ye={})),function(m){var j=function(){function T(p,h){this.ya=-1,this.Rd=p,this.Ps=h}return T.prototype.La=function(){return this.ya},T.prototype.next=function(){var p;return(p=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(p)):null},T.prototype.NP=function(p){if(p.B()||1>p.Db())return p;var h=p.getType();if(h==1736||h==1607)return this.Ny(p);if(m.aa.yd(h))return this.PP(p);if(h==197)return this.OP(p);throw m.i.Qa()},T.prototype.PP=function(p){if(p.Qb()<=this.Ps)return p;var h=new m.Ta(p.description);return h.oc(p,!0),this.Ny(h)},T.prototype.OP=function(p){var h=new m.Da(p.description);h.ad(p,!1);var a=new m.l;return p.A(a),p=a.ca(),a.R()<=this.Ps&&p<=this.Ps?h:this.Ny(h)},T.prototype.Ny=function(p){for(var h=p.Ia(),a=p.Ga();a.$a();)for(var u=!0;a.Ha();){var d=a.ha();if(d.getType()!=322)throw m.i.fa("not implemented");var g=a.On(),v=d.Qb();if(v>this.Ps){var b=Math.ceil(v/this.Ps);v=new m.Sa(p.description),u&&(d.To(v),h.nf(v));var C=u=1/b,M=0;for(--b;M<b;M++)d.Tw(C,v),h.lineTo(v),C+=u;g?h.Ap():(d.Po(v),h.lineTo(v))}else g?h.Ap():h.oc(d,u);u=!1}return h},T.prototype.qe=function(){},T}();m.oL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.getType=function(){return 2},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),a=new m.Zc(a),this.V(h,a,u,d).next()):new m.qL(h,a,u,d)},p.im=function(h,a,u,d){if(h.B()||a.B())return h;var g=h.Db(),v=a.Db();if(g>v)return h;var b=h.getType(),C=a.getType(),M=new m.l,O=new m.l,L=new m.l;h.A(M),a.A(O),L.K(M),L.Zb(O);var q=(L=m.ta.Wd(u,L,!0))*Math.sqrt(2)*1.00001,U=new m.l;if(U.K(M),U.W(q,q),!U.isIntersecting(O))return h;if(g==1&&v==2)return p.KV(h,a,C,u,d);if(b==33)switch(m.Vk.yd(C)?(u=new m.Ta(a.description),u.oc(a,!0)):u=a,C){case 1736:return p.XU(h,u,L);case 1607:return p.YU(h,u,L);case 550:return p.VU(h,u,L);case 197:return p.UU(h,u,L);case 33:return p.WU(h,u,L);default:throw m.i.N()}else if(b==550)switch(C){case 1736:return p.nU(h,a,L);case 197:return p.lU(h,a,L);case 33:return p.mU(h,a,L)}return m.Fg.im(h,a,u,d)},p.XU=function(h,a,u){return m.hd.KG(a,h,u)==0?h:h.Ia()},p.YU=function(h,a,u){var d=h.D();a=a.Ga();for(var g=u*Math.sqrt(2)*1.00001,v=g*g,b=new m.l;a.$a();)for(;a.Ha();){var C=a.ha();if(C.A(b),b.W(g,g),b.contains(d)){if(C.qs(d,u))return h.Ia();var M=C.ac();if(m.h.yc(d,M)<=v||(M=C.wc(),m.h.yc(d,M)<=v))return h.Ia()}}return h},p.VU=function(h,a,u){var d=a.ub(0);a=a.I();var g=h.D(),v=new m.h;u=u*Math.sqrt(2)*1.00001,u*=u;for(var b=0;b<a;b++)if(d.tc(2*b,v),m.h.yc(v,g)<=u)return h.Ia();return h},p.UU=function(h,a,u){var d=new m.l;return a.A(d),d.W(u,u),a=h.D(),d.contains(a)?h.Ia():h},p.WU=function(h,a,u){u=u*Math.sqrt(2)*1.00001,u*=u;var d=h.D();return a=a.D(),m.h.yc(d,a)<=u?h.Ia():h},p.nU=function(h,a,u){var d=new m.l;a.A(d),d.W(u,u);for(var g=h.I(),v=!1,b=[],C=0;C<g;C++)b[C]=!1;var M=new m.h;for(C=0;C<g;C++)h.D(C,M),d.contains(M)&&m.hd.Yd(a,M,u)!=0&&(v=!0,b[C]=!0);if(!v)return h;for(a=h.Ia(),C=0;C<g;C++)b[C]||a.Fd(h,C,C+1);return a},p.lU=function(h,a,u){var d=new m.l;a.A(d),d.W(u,u),a=h.I();var g=!1;u=[];for(var v=0;v<a;v++)u[v]=!1;var b=new m.h;for(v=0;v<a;v++)h.D(v,b),d.contains(b)&&(g=!0,u[v]=!0);if(!g)return h;for(d=h.Ia(),v=0;v<a;v++)u[v]||d.Fd(h,v,v+1);return d},p.mU=function(h,a,u){var d=h.ub(0),g=h.I(),v=a.D(),b=new m.h,C=!1;a=[];for(var M=0;M<g;M++)a[M]=!1;for(u=(M=u*Math.sqrt(2)*1.00001)*M,M=0;M<g;M++)d.tc(2*M,b),m.h.yc(b,v)<=u&&(C=!0,a[M]=!0);if(!C)return h;for(d=h.Ia(),M=0;M<g;M++)a[M]||d.Fd(h,M,M+1);return d},p.KV=function(h,a,u,d,g){var v=new m.Fh;h.bn(v);var b=new m.l;return a.A(b),v.Zb(b),v.W(.1*v.R(),.1*v.ca()),(b=new m.Da).ad(v,!1),u==1736?b.add(a,!0):b.ad(a,!0),m.Xj.local().V(h,b,d,g)},p.instance=null,p}(m.Je);m.kp=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){this.ts=h==null,this.ya=-1,this.Rd=p,this.$z=a,this.wT=h.next(),this.Ub=u}return T.prototype.next=function(){return this.ts?null:(p=this.Rd.next())!=null?(this.ya=this.Rd.La(),m.kp.im(p,this.wT,this.$z,this.Ub)):null;var p},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.qL=j}(ye||(ye={})),function(m){var j=function(){function p(h){this.nd=h,this.Bj=new m.l,this.Bj.Oa(),this.oh=new m.l,this.oh.Oa()}return p.prototype.Nt=function(){var h=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=h,h=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=h,h=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=h,h=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=h},p.prototype.eQ=function(h,a){if(this.nd!=null&&!this.nd.progress(-1,-1))throw m.i.fu("user_canceled");var u=!this.Bj.isIntersecting(this.oh);return m.aa.Hc(h.getType())&&m.aa.Hc(a.getType())?h.I()>a.I()?this.gE(h,a,u):(this.Nt(),h=this.gE(a,h,u),this.Nt(),h):h.getType()==550&&m.aa.Hc(a.getType())?(h=this.hE(a,h,u),this.Nt(),h):a.getType()==550&&m.aa.Hc(h.getType())?this.hE(h,a,u):h.getType()==550&&a.getType()==550?h.I()>a.I()?this.iE(h,a):(this.Nt(),h=this.iE(a,h),this.Nt(),h):0},p.prototype.gE=function(h,a,u){var d=h.Ga(),g=a.Ga(),v=new m.l,b=new m.l,C=17976931348623157e292;if(!u&&this.pY(h,a,d,g))return 0;for(;d.$a();)for(;d.Ha();)if((h=d.ha()).A(v),!(v.px(this.oh)>C)){for(;g.$a();)for(;g.Ha();)if((a=g.ha()).A(b),v.px(b)<C&&(a=h.tb(a,u),(a*=a)<C)){if(a==0)return 0;C=a}g.Zi()}return Math.sqrt(C)},p.prototype.hE=function(h,a,u){var d=h.Ga(),g=new m.l,v=17976931348623157e292,b=new m.h,C=a.I();for(u=!u&&h.getType()==1736;d.$a();)for(;d.Ha();){var M=d.ha();if(M.A(g),!(1<C&&g.px(this.oh)>v)){for(var O=0;O<C;O++){if(a.D(O,b),u&&m.hd.Yd(h,b,0)!=0)return 0;var L=M.fe(b,!1);if(b.sub(M.hc(L)),(L=b.Sk())<v){if(L==0)return 0;v=L}}u=!1}}return Math.sqrt(v)},p.prototype.iE=function(h,a){for(var u,d=17976931348623157e292,g=new m.h,v=new m.h,b=h.I(),C=a.I(),M=0;M<b;M++)if(h.D(M,g),!(1<C&&this.oh.iK(g)>d)){for(var O=0;O<C;O++)if(a.D(O,v),(u=m.h.yc(g,v))<d){if(u==0)return 0;d=u}}return Math.sqrt(d)},p.prototype.pY=function(h,a,u,d){if(h.getType()==1736){for(;d.$a();)if(d.Ha()){var g=d.ha();if(m.hd.Yd(h,g.wc(),0)!=0)return!0}d.Zi()}if(a.getType()==1736){for(;u.$a();)if(u.Ha()&&(h=u.ha(),m.hd.Yd(a,h.wc(),0)!=0))return!0;u.Zi()}return!1},p.prototype.gm=function(h,a){return h.B()||a.B()?NaN:(h.A(this.Bj),a.A(this.oh),this.eQ(h,a))},p}(),T=function(p){function h(){return p!==null&&p.apply(this,arguments)||this}return ri(h,p),h.prototype.V=function(a,u,d){if(a==null||u==null)throw m.i.N();if(a.B()||u.B())return NaN;var g=a.getType(),v=u.getType();if(g==33){if(v==33)return m.h.tb(a.D(),u.D());if(v==197)return d=new m.l,u.A(d),d.tb(a.D());(g=new m.de).add(a),a=g}else if(g==197){if(v==197)return v=new m.l,a.A(v),d=new m.l,u.A(d),d.tb(v);(g=new m.Da).ad(a,!1),a=g}return v==33?((v=new m.de).add(u),u=v):v==197&&((v=new m.Da).ad(u,!1),u=v),new j(d).gm(a,u)},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 14},h.instance=null,h}(m.Je);m.rL=T}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){this.zH=p,this.DH=h,this.nd=u,this.$G=a}return T.prototype.next=function(){var p=this.zH.next();return p==null?null:this.zC(p)},T.prototype.La=function(){return this.zH.La()},T.prototype.zC=function(p){var h=p.getType();if(m.aa.Rn(h))return p;if(h==197)return(h=new m.Da(p.description)).ad(p,!1),this.zC(h);if(p.B())return p;if(p==null)throw m.i.Qa();h=p.Ia();for(var a=new m.yb,u=0,d=p.da();u<d;u++)this.TK(p,u,h,a);return h},T.prototype.TK=function(p,h,a,u){if(!(2>p.Ja(h))){var d=p.Ba(h),g=p.Vc(h)-1,v=p.ub(0),b=p.dc(h),C=new m.ia(0);C.Jb(p.Ja(h)+1);var M=new m.ia(0);for(M.Jb(p.Ja(h)+1),C.add(b?d:g),C.add(d),d=new m.h;1<C.size;){var O=C.Fc();C.If();var L=C.Fc();p.D(O,d),u.Dc(d),p.D(L,d),u.Qc(d),0<=(L=this.SK(u,d,v,O,L,g))?(C.add(L),C.add(O)):M.add(O)}if(b||M.add(C.get(0)),M.size==C.size)a.addPath(p,h,!0);else if(2<=M.size&&(!this.$G||M.size!=2||!(b||m.h.tb(p.Na(M.get(0)),p.Na(M.get(1)))<=this.DH))){for(h=new m.Sa,u=0,g=M.size;u<g;u++)p.ve(M.get(u),h),u==0?a.nf(h):a.lineTo(h);b&&(this.$G||M.size!=2||a.lineTo(h),a.Ap())}}},T.prototype.SK=function(p,h,a,u,d,g){var v=d-1;for(d<=u&&(v=g),g=d=-1,u+=1;u<=v;u++){a.tc(2*u,h);var b=h.x,C=h.y;p.hc(p.fe(h,!1),h),h.x-=b,h.y-=C,(b=h.length())>this.DH&&b>g&&(d=u,g=b)}return d},T.prototype.qe=function(){},T}();m.sL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 29},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d).next()):new m.sL(h,a,u,d)},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.instance=null,p}(m.Je);m.EC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 21},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g,v,b,C){return h instanceof m.aa?(C=new m.Zc(h),this.V(C,a,u,[d],g,v,!1,b).next()):b===!0?(u=new m.GC(h,a,u,d,g,!1,!1,C),m.Gh.local().V(u,a,C)):new m.GC(h,a,u,d,g,!1,!1,C)},p.instance=null,p}(m.Je);m.FC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d,g,v,b){if(g)throw m.i.Ie();if(h==null)throw m.i.N();this.ya=-1,this.Ms=p,this.vg=h,this.ze=a,this.Cs=u,this.$n=d,this.eo=-1,this.Ub=b,this.uT=new m.l,this.uT.Oa()}return T.prototype.next=function(){for(var p;(p=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(p,this.Cs[this.eo]);return null},T.prototype.La=function(){return this.ya},T.prototype.$Q=function(p,h){return m.VK.buffer(p,this.vg,this.ze,h,this.$n,this.Ub)},T.prototype.qe=function(){},T}();m.GC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 24},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u){if(a==null)throw m.i.N();if(h.B()||1>h.Db())return 0;if(u==4)throw m.i.Ie();var d=m.cb.sc(a),g=m.cb.vv(d),v=m.cb.ev(d);g*=2-g;var b=d.Hd().ai,C=h.getType();if(C==1736||C==197)var M=h.mg();else m.aa.yd(C)?(M=new m.Ta(h.description)).oc(h,!0):M=h;if(d.Nb(a)==0){if(m.cb.Wc(a)){M=m.Hh.lj(M,a),C==1607&&M==h&&(M=m.aa.jg(h)),h=new m.Nc,m.cb.gh(a).cn(h),C=0;for(var O=M.I();C<O;C++){var L=M.Na(C);L.x=m.Hh.Zm(L.x,h),M.Cb(C,L)}}h=M.Ia(),M=m.Hh.WI(a,d,M,h)?h:m.cb.zh(M,a,d)}return this.hQ(M,u,v,g,b)},p.prototype.hQ=function(h,a,u,d,g){var v=new m.ga(0),b=0;for(h=h.Ga();h.$a();)for(;h.Ha();){var C=h.ha(),M=C.ac();C=C.wc(),M.scale(g),C.scale(g),m.kb.wd(u,d,M.x,M.y,C.x,C.y,v,null,null,a),b+=v.u}return b},p.instance=null,p}(m.Je);m.vL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 18},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d,g).next()):new m.uL(h,u,d,a,-1,-1,g)},p.instance=null,p}(m.Je);m.tL=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d,g){if(0<g||a!=4&&0<d)throw m.i.Ie();if(h==null)throw m.i.N();this.ya=-1,this.Ms=p,this.vg=h,this.ze=a,this.DT=u,this.CT=d}return T.prototype.next=function(){for(var p;(p=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(p);return null},T.prototype.La=function(){return this.ya},T.prototype.Zy=function(p){return m.cj.Qr(p,this.vg,this.ze,this.DT,this.CT,this.Ub)},T.prototype.qe=function(){},T}();m.uL=j}(ye||(ye={})),function(m){(function(j){j[j.Unknown=0]="Unknown",j[j.Contains=1]="Contains",j[j.Within=2]="Within",j[j.Equals=3]="Equals",j[j.Disjoint=4]="Disjoint",j[j.Touches=8]="Touches",j[j.Crosses=16]="Crosses",j[j.Overlaps=32]="Overlaps",j[j.NoThisRelation=64]="NoThisRelation",j[j.Intersects=1073741824]="Intersects",j[j.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(m.cL||(m.cL={})),m.wL=function(){function j(){}return j.nW=function(T,p){var h=T.getType(),a=p.getType();if(m.aa.xj(h)){var u=T.Bb;if(u!=null&&(u=u.Fk)!=null){if(a==33){var d=p.D();u=u.So(d.x,d.y)}else d=new m.l,p.A(d),u=u.Ro(d);if(u==1)return 1;if(u==0)return 4}}if(m.aa.xj(a)&&(u=p.Bb)!=null&&(u=u.Fk)!=null){if(h==33?(T=T.D(),u=u.So(T.x,T.y)):(p=new m.l,T.A(p),u=u.Ro(p)),u==1)return 2;if(u==0)return 4}return 0},j}()}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.getType=function(){return 15},p.prototype.V=function(h,a,u,d,g){return h instanceof m.aa?(h=new m.Zc(h),a=new m.Zc(a),this.V(h,a,u,d,g===void 0?-1:g).next()):g===void 0?new m.HC(h,a,u,d,-1):new m.HC(h,a,u,d,g)},p.prototype.wn=function(h,a,u){this.Iu(h)&&(a=m.ta.kj(a,h,!1),h.fj(u)||h.lu(a,u))},p.prototype.Iu=function(h){return m.Nx.zE(h)},p.instance=null,p}(m.Je);m.Xj=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d){if(this.ts=h==null,this.ya=-1,this.Rd=p,this.vg=a,this.Se=h.next(),this.Dj=this.Se.getType(),this.Ub=u,this.Fi=d,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw m.i.N("bad dimension mask")}return T.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var p=this.zw.next();if(p!=null)return p;this.zw=null}for(;(p=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?p=this.Ea(p):(this.zw=this.PS(p),p=this.zw.next()),p;return null},T.prototype.La=function(){return this.ya},T.prototype.Ea=function(p){var h=this.zK(p);if(h!=null)return h;h=m.ta.mv(this.Se,p);var a=m.ta.Wd(this.vg,h,!0);h=new m.l,this.Se.A(h);var u=new m.l;return p.A(u),h.W(2*a,2*a),h.Ea(u),h.W(100*a,100*a),a=m.Ud.clip(this.Se,h,0,0),p=m.Ud.clip(p,h,0,0),m.Fg.Av(p,a,this.vg,this.Ub)},T.prototype.QI=function(p,h,a){var u=0;if(1&h)a[0]==null&&(a[0]=new m.de(p)),u++;else for(var d=0;d<a.length-1;d++)a[d]=a[d+1];if(2&h)a[u]==null&&(a[u]=new m.Ta(p)),u++;else for(d=u;d<a.length-1;d++)a[d]=a[d+1];if(4&h)a[u]==null&&(a[u]=new m.Da(p)),u++;else for(d=u;d<a.length-1;d++)a[d]=a[d+1];if(u!=3){for(p=[],d=0;d<u;d++)p[d]=a[d];return new m.Zc(p)}return new m.Zc(a)},T.prototype.PS=function(p){var h=this.zK(p);if(h!=null){var a=[null,null,null];return a[h.Db()]=h,this.QI(p.description,this.Fi,a)}h=m.ta.mv(this.Se,p),a=m.ta.Wd(this.vg,h,!0),h=new m.l,this.Se.A(h),h.W(2*a,2*a);var u=new m.l;return p.A(u),h.Ea(u),h.W(100*a,100*a),a=m.Ud.clip(this.Se,h,0,0),h=m.Ud.clip(p,h,0,0),a=m.Fg.Pz(h,a,this.vg,this.Ub),this.QI(p.description,this.Fi,a)},T.prototype.zK=function(p){var h=m.ta.mv(p,this.Se),a=m.ta.Wd(this.vg,h,!0);h=p.getType();var u=p.B(),d=this.Se.B();if(!(d=u||d)){d=new m.l,p.A(d);var g=new m.l;this.Se.A(g),g.W(2*a,2*a),d=!d.isIntersecting(g)}if(!d)if((g=m.wL.nW(this.Se,p))==4)d=!0;else{if(2&g)return this.Se;if(1&g)return p}if(d)return(a=m.aa.tf(h))<(d=m.aa.tf(this.Dj))?T.HB(p,u):a>d||a==0&&h==550&&this.Dj==33?this.nJ():T.HB(p,u);if((this.Fi==-1||this.Fi==4)&&h==197&&this.Dj==197)return a=this.Se,h=new m.l,p.A(h),u=new m.l,a.A(u),h.Ea(u),a=new m.Fh,p.copyTo(a),a.Xo(h),a;if(h==197&&m.aa.tf(this.Dj)==0||this.Dj==197&&m.aa.tf(h)==0)return u=h==197?p:this.Se,p=h==197?this.Se:p,h=new m.l,u.A(h),m.Ud.clip(p,h,a,0);if(m.aa.tf(h)==0&&0<m.aa.tf(this.Dj)||0<m.aa.tf(h)&&m.aa.tf(this.Dj)==0){if(a=m.ta.kj(this.vg,p,!1),h==550||h==33)return m.Fg.zG(p,this.Se,a);if(this.Dj==550||this.Dj==33)return m.Fg.zG(this.Se,p,a);throw m.i.Qa()}return this.Fi!=-1&&this.Fi!=2||h!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||h!=1736||this.Dj!=1607?null:this.wK(this.Se,p):this.wK(p,this.Se)},T.prototype.wK=function(p,h){var a=p,u=h,d=m.ta.kj(this.vg,h,!1),g=new m.l;u.A(g);var v=new m.l;a.A(v),v.W(2*d,2*d),g.Ea(v),g.W(10*d,10*d),a=p=m.Ud.clip(p,g,0,0),v=new m.ia(0);var b=-1,C=u.Bb;if(C!=null){var M=C.Fk;if(M!=null){b=0,v.Jb(a.I()+a.da());for(var O=new m.l,L=a.Ga();L.$a();)for(;L.Ha();){L.ha().A(O);var q=M.Ro(O);q==1?v.add(1):q==0?v.add(0):(v.add(-1),b++)}}}if(5<h.I()&&(C=(u=h=m.Ud.clip(h,g,0,0)).Bb),0>b&&(b=a.yz()),g=a.I()+u.I(),b*u.I()>Math.log(g)*g*4)return null;g=null,b=u.Ga(),C!=null&&C.Fb!=null&&(g=C.Fb),g==null&&20<u.I()&&(g=m.ta.nE(u)),p=p.Ia(),u=null,C=a.Ga(),M=[0,0,0,0,0,0,0,0,0],O=new m.be(0),L=new m.ig,q=-1;for(var U=0,ee=0,Q=0<v.size,ge=-1;C.$a();){ge=C.gb;var ve=0;for(q=-1,U=0;C.Ha();){var fe=Q?m.O.truncate(v.get(ee)):-1;ee++;var Ce=C.ha();if(0>fe){if(g!=null)for(u==null?u=g.vR(Ce,d):u.Uo(Ce,d),fe=u.next();fe!=-1;fe=u.next()){b.Vb(g.ja(fe)),fe=b.ha();var Ie=Ce.Ea(fe,null,M,null,d);for(fe=0;fe<Ie;fe++)O.add(M[fe])}else for(b.Zi();b.$a();)for(;b.Ha();)for(fe=b.ha(),Ie=Ce.Ea(fe,null,M,null,d),fe=0;fe<Ie;fe++)O.add(M[fe]);if(0<O.size){O.Vd(0,O.size,function(dt,ut){return dt-ut});var Ne=0;O.add(1),Ie=-1,fe=0;for(var Ve=O.size;fe<Ve;fe++){var Xe=O.get(fe);if(Xe!=Ne){var et=!1;if(Ne!=0||Xe!=1?(Ce.ah(Ne,Xe,L),Ne=L.get()):(Ne=Ce,et=!0),2<=ve){if(p.Dr(a,ge,q,U,ve==3),this.QD(h,Ne.ac(),d)!=1&&this.RD(h,Ne,d)!=1)return null;p.oc(Ne,!1),ve=1,U=0}else switch(Ie=this.RD(h,Ne,d),Ie){case 1:et?2>ve?(q=C.wb()-a.Ba(ge),U=1,ve=ve==0?3:2):U++:(p.oc(Ne,ve==0),ve=1);break;case 0:ve=0,q=-1,U=0;break;default:return null}Ne=Xe}}}else{if(0>(fe=this.QD(h,Ce.ac(),d)))return null;fe==1?(2>ve&&(q=C.wb()-a.Ba(ge),ve=ve==0?3:2),U++):(q=-1,U=0)}O.clear(!1)}else fe!=0&&fe==1&&(ve==0?(ve=3,q=C.wb()-a.Ba(ge)):ve==1?(ve=2,q=C.wb()-a.Ba(ge)):U++)}2<=ve&&(p.Dr(a,ge,q,U,ve==3),q=-1)}return p},T.prototype.QD=function(p,h,a){return m.Dg.wm(p,h,a)},T.prototype.RD=function(p,h,a){var u=h.ac();h=h.wc();var d=m.Dg.wm(p,u,a),g=m.Dg.wm(p,h,a);return d==1&&g==0||d==0&&g==1?-1:d==0||g==0?0:d==1||g==1?1:((d=new m.h).add(u,h),d.scale(.5),(p=m.Dg.wm(p,d,a))==0?0:p==1?1:-1)},T.HB=function(p,h){return h?p:p.Ia()},T.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},T.prototype.qe=function(){},T}();m.HC=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 28},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d,g,v,b){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d,g,v,b).next()):new m.xL(h,a,u,d,g,v,b)},p.instance=null,p}(m.Je);m.IC=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u,d,g,v){this.ya=-1,this.Rd=p,this.Mj=h,this.Ka=a,this.Ki=u,this.CA=d,this.uH=g,this.nd=v}return T.prototype.next=function(){var p=this.Rd.next();return p!=null?(this.ya=this.Rd.La(),this.jL(p)):null},T.prototype.La=function(){return this.ya},T.prototype.jL=function(p){var h=0>=this.uH?m.ta.kj(this.Mj,p,!1):this.uH;return m.IK.V(p,this.Ka,this.Ki,this.CA,h,this.nd)},T.prototype.qe=function(){},T}();m.xL=j}(ye||(ye={})),function(m){var j;(j=m.NK||(m.NK={}))[j.clipToDomainOnly=1]="clipToDomainOnly",j[j.clipWithHorizon=2]="clipWithHorizon",j[j.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var T=function(p){function h(){return p!==null&&p.apply(this,arguments)||this}return ri(h,p),h.prototype.getType=function(){return 0},h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.V=function(a,u,d){return a instanceof m.aa?(a=new m.Zc(a),this.V(a,u,d).next()):new m.yL(a,u,d)},h.prototype.transform=function(a,u,d,g){return m.bu.transform(a,u,d,g,!0)},h.prototype.Qt=function(a,u,d,g){return m.bu.Qt(a,u,d,g)},h.instance=null,h}(m.Je);m.Hx=T}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){this.ya=-1,this.Rd=p,this.MT=h,this.nd=a}return T.prototype.next=function(){var p=this.Rd.next();return p!=null?(this.ya=this.Rd.La(),m.bu.zh(p,this.MT,this.nd)):null},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.yL=j}(ye||(ye={})),function(m){var j=function(){function p(){}return p.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},p.prototype.AQ=function(h,a,u){for(h.Vb(a,u);h.Ha();){var d=h.ha();if((d=d.Qb())!=0)return h.wb()}for(h.Vb(a,u);h.Ez();)if((d=(d=h.li()).Qb())!=0)return h.wb();return-1},p.prototype.BQ=function(h,a){for(h.Vb(a,-1);h.Ez();)if(h.li().Qb()!=0)return h.wb();return-1},p.prototype.zQ=function(h,a){for(h.Vb(a,-1),h.ha();h.Ha();)if(h.ha().Qb()!=0)return h.wb();return-1},p.prototype.yQ=function(h,a,u,d){if(this.xk=this.AQ(a,u,d),this.xk!=-1){a.Vb(this.xk,-1);var g=a.ha(),v=g.hc(g.fe(h,!1));if(u=m.h.yc(v,h),(d=new m.h).L(v),d.sub(g.ac()),(v=new m.h).L(h),v.sub(g.ac()),this.kq=0>d.wi(v),this.ph=this.zQ(a,this.xk),this.ph!=-1){a.Vb(this.ph,-1);var b=(g=a.ha()).fe(h,!1);b=g.hc(b);var C=m.h.yc(b,h);C>u?this.ph=-1:(d.L(b),d.sub(g.ac()),v.L(h),v.sub(g.ac()),this.us=0>d.wi(v))}this.ph==-1&&(this.ph=this.BQ(a,this.xk),this.ph!=-1&&(a.Vb(this.ph,-1),b=(g=a.ha()).fe(h,!1),b=g.hc(b),(C=m.h.yc(b,h))>u?this.ph=-1:(d.L(b),d.sub(g.ac()),v.L(h),v.sub(g.ac()),this.us=0>d.wi(v),h=this.xk,this.xk=this.ph,this.ph=h,h=this.kq,this.kq=this.us,this.us=h)))}},p.prototype.cO=function(h,a,u,d,g){return u=u.Ga(),this.yQ(h,u,d,g),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(u.Vb(this.xk,-1),h=u.ha().kg(),u.Vb(this.ph,-1),a=u.ha().kg(),0<=h.wi(a)):a},p}(),T=function(p){function h(){return p!==null&&p.apply(this,arguments)||this}return ri(h,p),h.local=function(){return h.instance===null&&(h.instance=new h),h.instance},h.prototype.getType=function(){return 3},h.prototype.nz=function(a,u,d){var g;if(g===void 0&&(g=!1),a.B())return new m.$l;u=u.D();var v=a,b=a.getType();switch(b==197&&((v=new m.Da).ad(a,!1),b=1736),b){case 33:return this.xI(v,u);case 550:return this.jI(v,u);case 1607:case 1736:return this.bU(v,u,d,g);default:throw m.i.fa("not implemented")}},h.prototype.oz=function(a,u){if(a.B())return new m.$l;u=u.D();var d=a,g=a.getType();switch(g==197&&((d=new m.Da).ad(a,!1),g=1736),g){case 33:return this.xI(d,u);case 550:case 1607:case 1736:return this.jI(d,u);default:throw m.i.fa("not implemented")}},h.prototype.pz=function(a,u,d,g){if(0>g)throw m.i.N();if(a.B())return[];u=u.D();var v=a,b=a.getType();switch(b==197&&((v=new m.Da).ad(a,!1),b=1736),b){case 33:return this.TU(v,u,d,g);case 550:case 1607:case 1736:return this.tU(v,u,d,g);default:throw m.i.fa("not implemented")}},h.prototype.bU=function(a,u,d,g){if(a.getType()==1736&&d&&(d=new m.l,a.A(d),d=m.ta.Wd(null,d,!1),(g?m.hd.Yd(a,u,0):m.hd.Yd(a,u,d))!=0)){var v=new m.$l(u,0,0);return g&&v.WJ(!0),v}var b=a.Ga();v=new m.h;for(var C=d=-1,M=17976931348623157e292,O=0;b.$a();)for(;b.Ha();){var L=b.ha();L=L.hc(L.fe(u,!1));var q=m.h.yc(L,u);q<M?(O=1,v=L,d=b.wb(),C=b.gb,M=q):q==M&&O++}return v=new m.$l(v,d,Math.sqrt(M)),g&&(b.Vb(d,C),L=b.ha(),g=0>m.h.Uq(u,L.ac(),L.wc()),1<O&&((O=new j).reset(),g=O.cO(u,g,a,d,C)),v.WJ(g)),v},h.prototype.xI=function(a,u){return a=a.D(),u=m.h.tb(a,u),new m.$l(a,0,u)},h.prototype.jI=function(a,u){for(var d=a.ub(0),g=a.I(),v=a=0,b=0,C=17976931348623157e292,M=0;M<g;M++){var O=new m.h;d.tc(2*M,O);var L=m.h.yc(O,u);L<C&&(v=O.x,b=O.y,a=M,C=L)}return(u=new m.$l).ey(v,b,a,Math.sqrt(C)),u},h.prototype.TU=function(a,u,d,g){return g==0?[]:(d*=d,a=a.D(),(u=m.h.yc(a,u))<=d?(d=[],(g=new m.$l).ey(a.x,a.y,0,Math.sqrt(u)),d[0]=g):d=[],d)},h.prototype.tU=function(a,u,d,g){if(g==0)return[];var v=a.ub(0),b=a.I();a=[],d*=d;for(var C=0;C<b;C++){var M=v.read(2*C),O=v.read(2*C+1),L=u.x-M,q=u.y-O;(L=L*L+q*q)<=d&&((q=new m.$l).ey(M,O,C,Math.sqrt(L)),a.push(q))}return u=a.length,a.sort(function(U,ee){return U.Ka<ee.Ka?-1:U.Ka==ee.Ka?0:1}),g>=u||(a.length=g),a.slice(0)},h.instance=null,h}(m.Je);m.Ix=T}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 4},p.prototype.V=function(h,a,u,d,g){return m.am.yB(h,a,u,d,g)},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.Iu=function(h){return m.Vt.wy(h)},p.prototype.wn=function(h,a,u){m.Vt.CD(h,a,u)},p.instance=null,p}(m.Je);m.zL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 33},p.prototype.V=function(h,a,u,d,g){return h===1073741824?!m.ud.zB(a,u,d,4,g):m.ud.zB(a,u,d,h,g)},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.Iu=function(h){return m.Vt.wy(h)},p.prototype.wn=function(h,a,u){m.Vt.CD(h,a,u)},p.instance=null,p}(m.Je);m.dj=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){if(this.nd=u,this.rT=a,this.ya=-1,p==null)throw m.i.N();this.yk=p,this.Mj=h}return T.prototype.next=function(){var p;if((p=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw m.i.fu("user_canceled");return this.eC(p)}return null},T.prototype.La=function(){return this.ya},T.prototype.eC=function(p){if(p==null)throw m.i.N();return m.Jx.cK(p,this.Mj,this.rT,this.nd)},T.prototype.qe=function(){},T}();m.AL=j}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 26},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),this.V(h,a,u,d).next()):new m.AL(h,a,u,d)},p.prototype.rs=function(h,a,u,d,g){return 0<(d!==void 0?m.Jx.rs(h,a,u,d,g):m.Jx.rs(h,a,!1,null,u))},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.instance=null,p}(m.Je);m.Yl=j}(ye||(ye={})),function(m){var j=function(){function g(){this.yq=0}return g.prototype.nX=function(v){this.yq&=-2,this.yq|=v?1:0},g.prototype.Wp=function(){return!!(1&this.yq)},g.prototype.XF=function(){return this.Wp()?0:1},g}();m.xY=j;var T=function(){},p=function(g,v,b,C){this.x=g,this.y=v,this.Ai=b,this.xm=C},h=function(){function g(v){this.Be=v}return g.prototype.compare=function(v,b,C){return v=v.ja(C),b=this.Be.lf.read(2*b),0>(b-=v=this.Be.lf.read(2*v))?-1:0<b?1:0},g}(),a=function(){function g(v){this.Be=v}return g.prototype.compare=function(v,b,C){b=this.Be.hb[b],v=this.Be.hb[v.ja(C)];var M=b.Wp(),O=v.Wp();C=b.ne.Pe(this.Be.Mo,0);var L=v.ne.Pe(this.Be.Mo,0);return C==L&&((M=.5*((C=Math.min(M?b.ne.na:b.ne.la,O?v.ne.na:v.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(M=C),C=b.ne.Pe(M,0),L=v.ne.Pe(M,0)),C<L?-1:C>L?1:0},g}(),u=function(){function g(v,b){this.YI=new m.h,this.parent=v,this.dS=b}return g.prototype.nr=function(v,b,C){var M=this.parent,O=this.dS;C.Vd(v,b,function(L,q){return M.Mh(L,q,O)})},g.prototype.$p=function(v){return v=this.parent.gi.get(v),this.parent.lf.tc(2*(v>>1),this.YI),this.YI.y+(1&v?this.parent.Oj:-this.parent.Oj)},g}(),d=function(){function g(v,b,C,M,O){this.nH=v.description,this.X=v,this.Qg=b,this.Oj=m.ta.kj(this.Qg,v,!1),this.Bo=m.ta.kj(this.Qg,v,!0),this.xA=C,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new m.jp,this.fb=new m.Yj,this.ke=new m.Md,this.ZG=this.ql=O}return g.prototype.eT=function(){return this.ZG=!0,(!m.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?m.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},g.prototype.kC=function(v,b){var C=this.lf.read(2*v);v=this.lf.read(2*v+1);var M=this.lf.read(2*b);b=this.lf.read(2*b+1);var O=!m.Yt.Cv(C,v,M,b,this.Oj*this.Oj);return O||this.X.Db()!=0&&C==M&&v==b},g.prototype.GE=function(){for(var v=this.X,b=v.xf?3:2,C=0,M=v.da();C<M;C++)if(v.Ja(C)<b)return this.ke=new m.Md(1,C,0),!1;return!0},g.prototype.DE=function(v){var b=this.X,C=b.Ga(),M=b.hasAttribute(1);for(b=M?m.ta.wE(this.Qg,b,!1):0;C.$a();)for(;C.Ha();){var O=C.ha();if(!(O.Qb()>this.Oj)){if(v&&M){var L=O.wv(1,0);if(O=O.wv(1,0),Math.abs(O-L)>b)continue}return this.ke=new m.Md(2,C.wb(),-1),!1}}return!0},g.prototype.mO=function(){var v=this.X,b=null;m.aa.Hc(this.X.getType())&&(b=this.X);var C=(this.ZG||this.ql)&&b!=null,M=v.I();this.lf=v.ub(0),this.gi=new m.ia(0),this.gi.Jb(2*M),this.fi=new m.ia(0),this.fi.Jb(2*M),C&&(this.Fl==null&&(this.Fl=new m.ia(0)),this.Fl.Jb(M));for(var O=v=0;O<M;O++)if(this.gi.add(2*O),this.gi.add(2*O+1),this.fi.add(2*O),this.fi.add(2*O+1),C){for(;O>=b.Vc(v);)v++;this.Fl.add(v)}for(new m.Xt().sort(this.fi,0,2*M,new u(this,C)),this.fb.clear(),this.fb.Vo(new h(this)),this.fb.De(M),b=0,M*=2;b<M;b++)if(C=this.fi.get(b),C=(v=this.gi.get(C))>>1,1&v){if(v=this.fb.search(C,-1),O=this.fb.we(v),L=this.fb.lb(v),this.fb.vd(v,-1),O!=-1&&L!=-1&&!this.kC(this.fb.ja(O),this.fb.ja(L)))return this.ke=new m.Md(3,this.fb.ja(O),this.fb.ja(L)),!1}else{if(v=this.fb.addElement(C,-1),(O=this.fb.we(v))!=-1&&!this.kC(this.fb.ja(O),C))return this.ke=new m.Md(3,C,this.fb.ja(O)),!1;var L=this.fb.lb(v);if(L!=-1&&!this.kC(this.fb.ja(L),C))return this.ke=new m.Md(3,C,this.fb.ja(L)),!1}return!0},g.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},g.prototype.oO=function(){var v=new m.gd;v.Ib(this.X);var b=new m.Md;return!m.$t.kI(!1,v,this.Oj,b,this.nd)||(b.Jo=v.Ua(b.Jo),b.Ko=v.Ua(b.Ko),this.ke.Wt(b),!1)},g.prototype.nO=function(){var v=this.X,b=v.Ga();for(v=v.Ga();b.$a();)for(;b.Ha();){var C=b.ha();if(!b.Qn()||!b.$S()){v.BW(b);do for(;v.Ha();){var M=v.ha();if((M=C.zr(M,this.Oj,!0))!=0)return this.ke=new m.Md(M==2?5:4,b.wb(),v.wb()),!1}while(v.$a())}}return!0},g.prototype.sO=function(){var v=this.X;this.hb.length=0,this.po.length=0,this.Zf=v.Ga(),this.Zf.JB();var b=new m.ia(0);b.Jb(10);var C=NaN,M=0,O=0;for(v=2*v.I();O<v;O++){var L=this.fi.get(O);if(!(1&(L=this.gi.get(L)))){L>>=1;var q=this.lf.read(2*L),U=this.lf.read(2*L+1);if(b.size!=0&&(q!=C||U!=M)){if(!this.RI(b))return!1;b!=null&&b.clear(!1)}b.add(L),C=q,M=U}}return!!this.RI(b)},g.prototype.rO=function(){for(var v=this.X,b=Array(v.da()),C=0,M=v.da();C<M;C++)b[C]=v.Nn(C);M=new T;var O=new m.h;C=this.fi.get(0);var L=(C=this.gi.get(C))>>1;this.lf.tc(2*L,O);var q=b[C=this.Fl.get(L)],U=v.Ba(C),ee=v.Vc(C)-1;M.el=L==U||L==ee,M.ny=this.ql?!q&&M.el:M.el,M.Ai=C,M.x=O.x,M.y=O.y,M.xm=L;for(var Q=new T,ge=1,ve=this.fi.size;ge<ve;ge++)if(C=this.fi.get(ge),!(1&(C=this.gi.get(C)))){L=C>>1,this.lf.tc(2*L,O),(C=this.Fl.get(L))!=M.Ai&&(q=b[C],U=v.Ba(C),ee=v.Vc(C)-1);var fe=L==U||L==ee,Ce=this.ql?!q&&M.el:M.el;if(Q.x=O.x,Q.y=O.y,Q.Ai=C,Q.xm=L,Q.ny=Ce,Q.el=fe,Q.x==M.x&&Q.y==M.y){if(this.ql){if(!(Q.ny&&M.ny||Q.Ai==M.Ai&&(Q.el||M.el)))return this.ke=new m.Md(8,Q.xm,M.xm),!1}else if(!Q.el||!M.el)return this.ke=new m.Md(5,Q.xm,M.xm),!1}C=M,M=Q,Q=C}return!0},g.prototype.JE=function(){for(var v=this.X,b=[],C=-1,M=!1,O=0,L=v.da();O<L;O++)v.Ev(O)&&(M=!1,C++,O<L-1&&(v.Ev(O+1)||(M=!0))),b[O]=M?C:-1;M=new m.h,O=this.fi.get(0);var q=(O=this.gi.get(O))>>1;this.lf.tc(2*q,M),O=this.Fl.get(q),C=new p(M.x,M.y,O,q,b[O]),v=[];var U=1;for(L=this.fi.size;U<L;U++)if(O=this.fi.get(U),!(1&(O=this.gi.get(O)))){if(q=O>>1,this.lf.tc(2*q,M),O=this.Fl.get(q),(O=new p(M.x,M.y,O,q,b[O])).x==C.x&&O.y==C.y){if(O.Ai==C.Ai)return this.ke=new m.Md(9,O.xm,C.xm),!1;0<=b[O.Ai]&&b[O.Ai]==b[C.Ai]&&(v.length!=0&&v[v.length-1]==C||v.push(C),v.push(O))}C=O}if(v.length==0)return!0;for(O=new m.jp(!0),m.O.$u(b,-1),M=-1,(U=new m.h).Rc(),C=0,L=v.length;C<L;C++){(q=v[C]).x==U.x&&q.y==U.y||(M=O.Ph(0),U.x=q.x,U.y=q.y);var ee=b[q.Ai];ee==-1&&(ee=O.Ph(2),b[q.Ai]=ee),O.addElement(ee,M),O.addElement(M,ee)}for((L=new m.ia(0)).Jb(10),C=O.je;C!=-1;C=O.qz(C))if(!(1&(v=O.PF(C)))&&2&v){for(v=-1,L.add(C),L.add(-1);0<L.size;){if(M=L.Fc(),L.If(),U=L.Fc(),L.If(),1&(q=O.PF(U))){v=2&q?U:M;break}for(O.fX(U,1|q),q=O.rc(U);q!=-1;q=O.lb(q))(ee=O.getData(q))!=M&&(L.add(ee),L.add(U))}if(v!=-1){for(O=-1,C=0,L=b.length;C<L;C++)if(b[C]==v){O=C;break}return this.ke=new m.Md(10,O,-1),!1}}return!0},g.prototype.tO=function(){var v=this.X;if(0>=v.Ke())return this.ke=new m.Md(6,v.da()==1?1:-1,-1),0;if(v.da()==1)return this.ql&&!this.JE()?0:2;this.to=m.ia.qf(v.da(),0),this.JA=m.ia.qf(v.da(),-1);for(var b=-1,C=0,M=0,O=v.da();M<O;M++){var L=v.Ir(M);if(this.to.write(M,0>L?0:256),0<L)b=M,C=L;else{if(L==0)return this.ke=new m.Md(6,M,-1),0;if((0>b||C<Math.abs(L))&&(this.ke=new m.Md(7,M,-1),this.ql))return 0;this.JA.write(M,b)}}for(this.dt=v.da(),this.Om=new m.ia(0),this.Om.Jb(10),O=v.I(),this.Mo=NaN,(v=new m.ia(0)).Jb(10),this.Qq=m.ia.qf(O,-1),this.Hw=m.ia.qf(O,-1),this.zj!=null?this.zj.clear(!1):this.zj=new m.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new a(this)),b=0,O*=2;0<this.dt&&b<O;b++)if(C=this.fi.get(b),!(1&(C=this.gi.get(C)))){if(C>>=1,(M=this.lf.read(2*C+1))!=this.Mo&&v.size!=0){if(!this.ut(v))return 0;v!=null&&v.clear(!1)}v.add(C),this.Mo=M}return 0<this.dt&&!this.ut(v)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},g.prototype.RI=function(v){if(v.size==1)return!0;for(var b=0,C=v.size;b<C;b++){var M=v.get(b);this.Zf.Vb(M);var O=this.Zf.li();this.hb.push(this.Su(O,M,this.Zf.gb,!0)),this.Zf.ha(),O=this.Zf.ha(),this.hb.push(this.Su(O,M,this.Zf.gb,!1))}var L=this;for(this.hb.sort(function(ee,Q){return L.XP(ee,Q)}),(M=this.mh.je)==-1&&(M=this.mh.Ph(0)),this.mh.fn(this.hb.length),b=0,C=this.hb.length;b<C;b++)this.mh.addElement(M,b);b=!0;for(var q=C=-1;b&&(b=!1,(O=this.mh.rc(M))!=-1);)for(var U=this.mh.lb(O);U!=-1;)if(C=this.mh.getData(O),q=this.mh.getData(U),(C=this.hb[C].Io)!=(q=this.hb[q].Io))O=U,U=this.mh.lb(O);else if(b=!0,this.mh.jd(M,O),O=this.mh.we(U),(U=this.mh.jd(M,U))==-1||O==-1)break;if(b=this.mh.bs(M),this.mh.LE(M),0<b)return this.ke=new m.Md(5,C,q),!1;for(b=0,C=v.size;b<C;b++)this.vB(this.hb[b]);return this.hb.length=0,!0},g.prototype.ut=function(v){for(var b=0,C=v.size;b<C;b++){var M=v.get(b),O=this.Qq.read(M);if(O!=-1){var L=this.fb.ja(O);this.zj.add(L),this.fb.vd(O,-1),this.vB(this.hb[L]),this.hb[L]=null,this.Qq.write(M,-1)}(O=this.Hw.read(M))!=-1&&(L=this.fb.ja(O),this.zj.add(L),this.fb.vd(O,-1),this.vB(this.hb[L]),this.hb[L]=null,this.Hw.write(M,-1))}for(b=0,C=v.size;b<C;b++){if(M=v.get(b),this.Zf.Vb(M),(O=this.Zf.li()).na>O.la){var q=this.Zf.wb(),U=this.Su(O,M,this.Zf.gb,!0);0<this.zj.size?(L=this.zj.Fc(),this.zj.If(),this.hb[L]=U):(L=this.hb.length,this.hb.push(U)),O=this.fb.addElement(L,-1),this.Qq.read(q)==-1?this.Qq.write(q,O):this.Hw.write(q,O),!(3&this.to.read(this.Zf.gb))&&this.Om.add(O)}this.Zf.ha(),(O=this.Zf.ha()).na<O.la&&(q=this.Zf.ik(),U=this.Su(O,M,this.Zf.gb,!1),0<this.zj.size?(L=this.zj.Fc(),this.zj.If(),this.hb[L]=U):(L=this.hb.length,this.hb.push(U)),O=this.fb.addElement(L,-1),this.Qq.read(q)==-1?this.Qq.write(q,O):this.Hw.write(q,O),!(3&this.to.read(this.Zf.gb))&&this.Om.add(O))}for(b=0,C=this.Om.size;b<C&&0<this.dt;b++)if(O=this.Om.get(b),!(3&this.to.read(this.hb[this.fb.ja(O)].IA))){v=-1,M=this.fb.we(O);var ee=O;U=null,L=-1;for(var Q=0;M!=-1&&(L=this.fb.ja(M),L=(U=this.hb[L]).IA,!(3&(Q=this.to.read(L))));)ee=M,M=this.fb.we(M);M==-1?(q=1,M=ee):(v=(3&Q)==1?L:this.JA.read(L),q=U.XF()!=0?0:1,M=this.fb.lb(M));do{if(L=this.fb.ja(M),L=(U=this.hb[L]).IA,!(3&(ee=this.to.read(L)))){if(q!=U.XF())return this.ke=new m.Md(6,L,-1),!1;if(ee=252&ee|(Q=q==0||U.Wp()?2:1),this.to.write(L,Q),Q==2&&this.ke.Jj==0&&this.JA.read(L)!=v&&(this.ke=new m.Md(7,L,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&ee)==1&&(v=L),ee=M,M=this.fb.lb(M),q=q!=0?0:1}while(ee!=O)}return this.Om!=null?this.Om.clear(!1):this.Om=new m.ia(0),!0},g.prototype.Su=function(v,b,C,M){if(v.getType()!=322)throw m.i.Qa();return(v=this.sP(v)).Io=b,v.IA=C,v.yq=0,v.nX(M),v},g.prototype.sP=function(v){if(0<this.po.length){var b=this.po[this.po.length-1];--this.po.length,v.copyTo(b.ne)}else(b=new j).ne=m.SC.jg(v);return b},g.prototype.vB=function(v){v.ne.getType()==322&&this.po.push(v)},g.prototype.kU=function(){for(var v=this.X.I(),b=new m.ia(0),C=0;C<v;C++)b.add(C);var M=this;for(b.Vd(0,v,function(O,L){return M.Ou(O,L)}),C=1;C<v;C++)if(this.Ou(b.get(C-1),b.get(C))==0)return this.ke=new m.Md(3,b.get(C-1),b.get(C)),0;return 2},g.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},g.prototype.oV=function(){return this.eT()},g.prototype.pU=function(){for(var v=this.X.I(),b=new m.ia(0),C=0;C<v;C++)b.add(C);var M=this;b.Vd(0,v,function(ee,Q){return M.PO(ee,Q)});var O=Array(v);for(m.O.$u(O,!1),O[b.get(0)]=!0,C=1;C<v;C++){var L=b.get(C-1),q=b.get(C);this.Ou(L,q)==0?O[q]=!1:O[q]=!0}b=this.X.Ia(),L=this.X,q=0;var U=1;for(C=0;C<v;C++)O[C]?U=C+1:(q<U&&b.Fd(L,q,U),q=C+1);return q<U&&b.Fd(L,q,U),b.Ch(2,this.Bo),b},g.prototype.NV=function(){var v=this.X,b=v.Ga(),C=v.Ga(),M=this.X.Ia(),O=this.X,L=v.hasAttribute(1),q=L?m.ta.wE(this.Qg,v,!0):0,U=new m.ia(0),ee=new m.ia(0);for(U.Jb(m.O.truncate(v.I()/2+1)),ee.Jb(m.O.truncate(v.I()/2+1));b.$a();)if(C.$a(),!(2>v.Ja(b.gb))){C.EW();for(var Q,ge,ve=!0;b.Ha();){var fe=b.ha(),Ce=C.li();if(b.wb()>C.wb())break;ve&&(U.add(b.wb()),ee.add(C.ik()),ve=!1),ge=U.Fc();var Ie=b.ik();if(1<Ie-ge){var Ne=new m.h;Ne.uc(v.Na(ge),v.Na(Ie)),Q=Ne.length()}else Q=fe.Qb();ge=ee.Fc(),1<(Ie=C.wb())-ge?((Ne=new m.h).uc(v.Na(ge),v.Na(Ie)),ge=Ne.length()):ge=Ce.Qb(),Q>this.Bo?U.add(b.ik()):L&&(Q=v.Uc(1,U.Fc(),0),fe=fe.gv(1,0),Math.abs(fe-Q)>q&&U.add(b.ik())),ge>this.Bo?ee.add(C.wb()):L&&(Q=v.Uc(1,ee.Fc(),0),fe=Ce.gv(1,0),Math.abs(fe-Q)>q&&ee.add(C.wb()))}if(U.Fc()<ee.Fc()?U.size>ee.size?U.If():ee.If():(U.Fc()!=ee.Fc()&&ee.If(),ee.If()),2<=ee.size+U.size){for(ve=new m.Sa,Ce=0,fe=U.size;Ce<fe;Ce++)O.ve(U.get(Ce),ve),Ce==0?M.nf(ve):M.lineTo(ve);for(Ce=ee.size-1;0<Ce;Ce--)O.ve(ee.get(Ce),ve),M.lineTo(ve);O.dc(b.gb)?M.Ap():0<ee.size&&(O.ve(ee.get(0),ve),M.lineTo(ve))}U!=null&&U.clear(!1),ee!=null&&ee.clear(!1)}return M.Ch(2,this.Bo),M},g.prototype.rV=function(){return this.DX()},g.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?m.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new m.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&m.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&m.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},g.rs=function(v,b,C,M,O){if(M!=null&&(M.Jj=0,M.Jo=-1,M.Ko=-1),v.B())return 1;var L=v.getType();if(L==33)return 1;var q=m.ta.kj(b,v,!1);if(L==197)return b=new m.l,v.A(b),b.Bi(q)?(M!=null&&(M.Jj=2,M.Jo=-1,M.Ko=-1),0):1;if(m.aa.yd(L))return(q=new m.Ta(v.description)).oc(v,!0),g.rs(q,b,C,M,O);var U=v.om(q);if((C=C?-1:U)!=-1)return C;if(b=new g(v,b,C,O,!1),L==550)C=b.kU();else if(L==1607)C=b.JV();else{if(L!=1736)throw m.i.Qa();C=b.oV()}return v.Ch(C,q),M!=null&&C==0&&M.Wt(b.ke),C},g.cK=function(v,b,C,M){if(v.B())return v;var O=v.getType();if(O==33)return v;var L=m.ta.kj(b,v,!1);if(O==197)return b=new m.l,v.A(b),b.Bi(L)?v.Ia():v;if(m.aa.yd(O))return(O=new m.Ta(v.description)).oc(v,!0),g.cK(O,b,C,M);if(L=v.om(L),(C=C?-1:L)==2)return v;if(v=new g(v,b,C,M,!1),O==550)v=v.pU();else if(O==1607)v=v.NV();else{if(O!=1736)throw m.i.Qa();v=v.rV()}return v},g.prototype.Mh=function(v,b,C){if(v==b)return 0;v=this.gi.get(v);var M=this.gi.get(b);b=v>>1;var O=M>>1,L=new m.h,q=new m.h;return this.lf.tc(2*b,L),L.y+=1&v?this.Oj:-this.Oj,this.lf.tc(2*O,q),q.y+=1&M?this.Oj:-this.Oj,(v=L.compare(q))==0&&C?0>(C=this.Fl.get(b)-this.Fl.get(O))?-1:0<C?1:0:v},g.prototype.Ou=function(v,b){if(v==b)return 0;var C=this.X,M=C.Na(v),O=C.Na(b);if(M.x<O.x)return-1;if(M.x>O.x)return 1;if(M.y<O.y)return-1;if(M.y>O.y)return 1;for(M=1;M<this.oT;M++){O=this.nH.kd(M);for(var L=m.ra.Va(O),q=0;q<L;q++){var U=C.Uc(O,v,q),ee=C.Uc(O,b,q);if(U<ee)return-1;if(U>ee)return 1}}return 0},g.prototype.PO=function(v,b){var C=this.Ou(v,b);return C==0?v<b?-1:1:C},g.prototype.XP=function(v,b){if(v===b)return 0;var C=v.ne.kg();v.Wp()&&C.Sq(),v=b.ne.kg(),b.Wp()&&v.Sq(),b=C.qu();var M=v.qu();return M==b?(b=C.wi(v),Math.abs(b)<=8881784197001252e-31*(Math.abs(v.x*C.y)+Math.abs(v.y*C.x))&&(b--,b++),0>b?1:0<b?-1:0):b<M?-1:1},g}();m.Jx=d}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 30},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.prototype.V=function(h,a,u,d){return h instanceof m.aa?(h=new m.Zc(h),a=new m.Zc(a),this.V(h,a,u,d).next()):new m.BL(h,a,u,d)},p.ep=function(h,a,u,d){var g=h.Db(),v=a.Db();if(h.B()&&a.B())return g>v?h:a;if(h.B())return a;if(a.B())return h;var b=new m.l,C=new m.l,M=new m.l;return h.A(b),a.A(C),M.K(b),M.Zb(C),b=m.ta.Wd(u,M,!0),C=h.getType(),M=a.getType(),C==33&&M==33?p.aV(h,a,b):C!=M?0<g||0<v?g>v?h:a:C==550?p.iI(h,a,b):p.iI(a,h,b):m.Fg.ep(h,a,u,d)},p.aV=function(h,a,u){u=u*Math.sqrt(2)*1.00001,u*=u;var d=h.D(),g=a.D(),v=new m.de(h.description);return m.h.yc(d,g)>u&&(v.add(h),v.add(a)),v},p.iI=function(h,a,u){var d=h.ub(0),g=h.I(),v=a.D(),b=h.Ia();u=u*Math.sqrt(2)*1.00001;var C=new m.l;if(h.A(C),C.W(u,u),C.contains(v)){u*=u,C=!1;for(var M=[],O=0;O<g;O++)M[O]=!1;for(O=0;O<g;O++){var L=d.read(2*O),q=d.read(2*O+1);(L-=v.x)*L+(q-=v.y)*q<=u&&(C=!0,M[O]=!0)}if(C)for(O=0;O<g;O++)M[O]||b.Fd(h,O,O+1);else b.Fd(h,0,g),b.add(a)}else b.Fd(h,0,g),b.add(a);return b},p.instance=null,p}(m.Je);m.Kx=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a,u){this.ts=h==null,this.ya=-1,this.Rd=p,this.vg=a,this.NT=h.next(),this.Ub=u}return T.prototype.next=function(){return this.ts?null:(p=this.Rd.next())!=null?(this.ya=this.Rd.La(),m.Kx.ep(p,this.NT,this.vg,this.Ub)):null;var p},T.prototype.La=function(){return this.ya},T.prototype.qe=function(){},T}();m.BL=j}(ye||(ye={})),function(m){var j=function(){function h(){}return h.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},h}(),T=function(){function h(){this.Gr=0,this.pj=[]}return h.prototype.pN=function(a){this.Gr+=a.Ax,this.pj.push(a)},h.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},h.prototype.my=function(){return this.pj[this.pj.length-1]},h.prototype.Nb=function(a){return a===this},h}(),p=function(){function h(a,u,d){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=a,this.vg=u,this.Ub=d}return h.dE=function(a){var u=[],d=0;for(a=Object.keys(a);d<a.length;d++)u.push(Number(a[d]));return u.sort(function(g,v){return g-v}),u},h.prototype.fG=function(a){var u=this.Do[a],d=h.dE(u)[0],g=u[d],v=g.my().$y;return g=g.my().AK,delete u[d],g&&(v=m.Yl.local().V(v,this.vg,!1,this.Ub),a==0&&v.getType()==33&&(a=new m.de(v.description),v.B()||a.add(v),v=a)),v},h.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw m.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},h.prototype.La=function(){return this.ya},h.prototype.qK=function(){if(this.Ic)return!0;var a=null;if(this.Rd!=null&&(a=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),m.mp.zp(this.Ub),a!=null){var u=a.Db();this.AH[u]=!0,u>=this.zk&&!this.jA&&(this.ND(u,!1,a),u>this.zk&&!this.jA&&this.zW(u))}if(0<this.iq)for(u=0;u<=this.zk;u++)for(;1<this.uq[u]&&(a=this.FO(u)).length!=0;)a=m.Fg.VP(a,this.vg,this.Ub),this.ND(u,!0,a);return this.Ic},h.prototype.FO=function(a){for(var u=[],d=[],g=this.Do[a],v=h.dE(g),b=0;b<v.length;b++){var C=v[b],M=g[C];if(this.Ic||1e4<M.Gr&&1<M.pj.length){for(this.uq[a]-=M.pj.length,this.iq-=M.pj.length;0<M.pj.length;)u.push(M.my().$y),M.TV();d.push(C)}}for(b=0;b<d.length;b++)delete g[d[b]];return u},h.prototype.zW=function(a){for(var u=0;u<a;u++)this.Do[u]=[],this.iq-=this.uq[u],this.uq[u]=0},h.prototype.ND=function(a,u,d){var g=new j;if(g.Fz(),g.$y=d,d=h.eS(d),g.Ax=d,d=h.cS(d),a+1>this.Do.length)for(var v=0,b=Math.max(2,a+1);v<b;v++)this.Do.push([]);(v=this.Do[a][d])===void 0&&(v=new T,this.Do[a][d]=v),g.AK=u,v.pN(g),this.uq[a]++,this.iq++,this.zk=Math.max(this.zk,a)},h.cS=function(a){return 0<a?m.O.truncate(Math.log(a)/Math.log(4)+.5):0},h.eS=function(a){var u=a.getType();if(m.aa.xj(u))return a.I();if(u==33)return 1;if(u==197)return 4;if(m.aa.yd(u))return 2;throw m.i.Qa()},h.prototype.qe=function(){this.qK()},h}();m.DL=p}(ye||(ye={})),function(m){var j=function(T){function p(){return T!==null&&T.apply(this,arguments)||this}return ri(p,T),p.prototype.getType=function(){return 1},p.prototype.V=function(h,a,u,d){return d===void 0?new m.DL(h,a,u):this.gQ(h,a,u,d)},p.prototype.gQ=function(h,a,u,d){return h=new m.Zc([h,a]),this.V(h,u,d).next()},p.local=function(){return p.instance===null&&(p.instance=new p),p.instance},p.instance=null,p}(m.Je);m.Gh=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.nextPath=0]="nextPath",T[T.nextSegment=1]="nextSegment",T[T.iterate=2]="iterate",j=function(){function p(h,a,u,d){this.Ts=new m.l,this.GT=h,this.HT=a,this.mq=d,this.uo=-1,this.rl=!1;var g=h.Bb;g!=null&&(g=d?g.zo:g.Fb)!=null&&(this.Ic=!1,this.qa=u,this.Fb=g,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,d?this.uo=a.da():this.sd=a.Ga()),this.rl||(g=a.Bb)!=null&&(g=d?g.zo:g.Fb)!=null&&(this.Ic=!1,this.qa=u,this.Fb=g,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,d?this.uo=h.da():this.sd=h.Ga()),this.rl||(this.ci=d?m.ta.mR(h,a,u,1<=h.om(0),1<=a.om(0)):m.ta.lR(h,a,u))}return p.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var h=!0;h;)switch(this.Xb){case 0:h=this.xU();break;case 1:h=this.yU();break;case 2:h=this.Uz();break;default:throw m.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},p.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},p.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},p.prototype.uz=function(){if(!this.mq)throw m.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},p.prototype.az=function(){if(!this.mq)throw m.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},p.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},p.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var h=this.sd.ha();return this.xw.Uo(h,this.qa),this.Xb=2,!0},p.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},p}(),m.Zl=j}(ye||(ye={})),function(m){(m=m.OL||(m.OL={}))[m.enumClosed=1]="enumClosed",m[m.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",m[m.enumOGCStartPolygon=4]="enumOGCStartPolygon",m[m.enumCalcMask=4]="enumCalcMask"}(ye||(ye={})),function(m){m.QC=function(){function j(){}return j.tb=function(T,p,h,a,u,d,g,v,b){var C=[0,0,0],M=[0,0,0],O=[0,0,0],L=[0,0,0,0],q=new m.ga(0),U=new m.ga(0),ee=new m.ga(0);if(g!=null||v!=null||b!=null)if(m.s.ti(p))m.Yg.tb(T,h,a,u,d,g,v,b);else{u=m.F.ba(u),h=m.F.ba(h);var Q=m.F.ba(u-h);if(m.s.Y(a,d)&&(m.s.Y(h,u)||m.s.Y(m.s.P(a),1.570796326794897)))g!=null&&(g.u=0),v!=null&&(v.u=0),b!=null&&(b.u=0);else{if(m.s.Y(a,-d)){if(m.s.Y(m.s.P(a),1.570796326794897))return g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0<a?m.F.ba(3.141592653589793-m.F.ba(u)):m.F.ba(u)),void(b!=null&&(b.u=0<a?m.F.ba(u):m.F.ba(3.141592653589793-m.F.ba(u))));m.s.Y(m.s.P(Q),3.141592653589793)&&(g!=null&&(g.u=2*m.F.Ah(T,p)),v!=null&&(v.u=0),b!=null&&(b.u=0))}else if(m.s.Y(m.s.P(a),1.570796326794897)||m.s.Y(m.s.P(d),1.570796326794897)||m.s.Y(h,u)||m.s.Y(m.s.P(Q),3.141592653589793)||m.s.Cd(a))return void m.Wk.tb(T,p,h,a,u,d,g,v,b);var ge=Math.sqrt(1-p);u=m.F.ba(u-h),h=0,m.F.cl(1,p,a,h,0,q,U,ee),C[0]=q.u,C[1]=U.u,C[2]=ee.u,m.F.cl(1,p,d,u,0,q,U,ee),M[0]=q.u,M[1]=U.u,M[2]=ee.u,O[0]=0,O[1]=0,O[2]=-1*p*m.F.n(1,p,a)*Math.sin(a),0>u?m.F.Wq(O,M,C,L,0):m.F.Wq(O,C,M,L,0),U=[0,0,0],ee=[0,0,0];var ve=[0,0,0];C=[0,0,0],q=[0,0,0];var fe=Math.acos(L[2]/1),Ce=1-p,Ie=Math.tan(fe),Ne=1+Ie*Ie/Ce,Ve=2*O[2]*Ie/Ce;for(Ce=(-Ve+(Ie=Math.sqrt(Ve*Ve-4*Ne*(O[2]*O[2]/Ce-1))))/(Ne*=2),Ve=(-Ve-Ie)/Ne,Ie=Math.tan(fe),fe=(Ce+Ve)/2,O=((Ne=Ie*Ce+O[2])+(Ie*Ve+O[2]))/2,Ie=m.F.gp(Ce-fe,Ne-O),Ce=O/ge*1.570796326794897,Ve=0;100>Ve&&(Ne=(Ne=m.F.w(p,Ce))*Ne/Math.cos(Ce)*(Math.sin(Ce)-O*Ne/(1-p)),!m.s.Cd(Ne));Ve++)Ce-=Ne;O=m.F.n(1,p,Ce)*Math.cos(Ce),Ie=1-Ie/(O=Math.sqrt((O-fe)*(O+fe))),Ie*=2-Ie,Ne=m.F.on(U),fe=m.F.on(ee),Ce=m.F.on(ve);var Xe=m.F.St(ve,U);Ve=m.F.St(ve,ee),m.F.zx(ve,U,C),m.F.zx(ve,ee,q),U=Math.acos(Xe/(Ce*Ne)),ee=Math.acos(Ve/(Ce*fe)),ee*=m.s.Mb(1,m.F.St(C,q)),(1.570796326794897<=m.s.P(U)&&1.570796326794897<=m.s.P(ee)||3.141592653589793<m.s.P(U-ee))&&(U=(3.141592653589793-m.s.P(U))*m.s.Mb(1,U),ee=(3.141592653589793-m.s.P(ee))*m.s.Mb(1,ee)),C=m.F.Qj(Ie,ee),q=m.F.q(O,Ie,m.F.Qj(Ie,U)),C=m.F.q(O,Ie,C),C=m.s.P(C-q)*T,U=new m.ga(0),ee=new m.ga(0),ve=L[1]/1,ve*=-m.s.Mb(1,Q),q=Math.acos(ve)*m.s.Mb(1,Q),j.rf(T,p,h,a,C,q,U,ee),m.s.Y(u,U.u)&&m.s.Y(d,ee.u)||(Ie=m.F.gp(m.F.ba(u-U.u),d-ee.u),j.rf(T,p,h,a,C,m.F.ba(q+3.141592653589793),U,ee),(Ne=m.F.gp(m.F.ba(u-U.u),d-ee.u))<Ie&&(q=m.F.ba(q+3.141592653589793))),U=[0,0,0,0],ee=[0,0,0,0],Ie=[0,0,0],T=[0,0,0],h=[0,0,0],a=[0,0,0],ve=[0,0,0],(O=[0,0,0])[0]=0,O[1]=0,O[2]=ge,Ie[0]=0,Ie[1]=0,Ie[2]=0,m.F.Wq(Ie,O,M,U,0),m.s.Cd(d)?(T[0]=M[0],T[1]=M[1],T[2]=1,h[0]=1*Math.cos(u)-1*Math.sin(u),h[1]=1*Math.sin(u)+1*Math.cos(u)):(p=m.F.n(1,p,d)*Math.cos(d),T[0]=0,T[1]=0,M[2]+=Math.tan(1.570796326794897-m.s.P(d))*p*m.s.Mb(1,d),h[0]=p*Math.cos(u)-p*Math.sin(u),h[1]=p*Math.sin(u)+p*Math.cos(u)),h[2]=M[2],m.F.Wq(M,h,T,ee,1),m.F.zx(ee,U,a),m.F.zx(ee,L,ve),ve=m.F.St(a,ve)/(m.F.on(a)*m.F.on(ve)),ve*=m.s.Mb(1,Q),u=Math.acos(ve)*-m.s.Mb(1,Q),(0<q&&0<u||0>q&&0>u)&&(u=m.F.ba(u+3.141592653589793)),g!=null&&(g.u=C),v!=null&&(v.u=q),b!=null&&(b.u=u)}}},j.rf=function(T,p,h,a,u,d,g,v){var b=[0,0,0],C=[0,0,0],M=[0,0,0],O=[0,0,0],L=[0,0,0],q=[0,0,0],U=[0,0,0],ee=[0,0,0,0],Q=new m.ga(0),ge=new m.ga(0),ve=new m.ga(0),fe=new m.ga(0),Ce=new m.ga(0),Ie=new m.ga(0);if(g!=null&&v!=null)if(m.s.ti(p))m.Yg.rf(T,h,a,u,d,g,v);else if(m.s.Cd(u))g!=null&&(g.u=h),v!=null&&(v.u=a);else if(d=m.F.ba(d),0>u&&(u=m.s.P(u),d=m.F.ba(d+3.141592653589793)),h=m.F.ba(h),a=m.F.ba(a),1.570796326794897<m.s.P(a)&&(h=m.F.ba(h+3.141592653589793),a=m.s.Mb(3.141592653589793,a)-a),m.s.Y(m.s.P(a),1.570796326794897)||m.s.Cd(a)||m.s.Cd(d)||m.s.Y(m.s.P(d),3.141592653589793))m.Wk.rf(T,p,h,a,u,d,g,v);else{var Ne=Math.sqrt(1-p);for(T=u/T,m.F.cl(1,p,a,0,0,fe,Ce,Ie),b[0]=fe.u,b[1]=Ce.u,b[2]=Ce.u,U[0]=0,U[1]=0,U[2]=-1*p*m.F.n(1,p,a)*Math.sin(a),fe=m.F.n(1,p,a),Ce=m.F.ba(1.570796326794897-d),Ie=Math.sin(Ce),u=Math.cos(a),a=Math.sin(a),L[0]=fe*u-a*Ie,L[1]=Math.cos(Ce),L[2]=(1-p)*fe*a+u*Ie,0>d?m.F.Wq(U,L,b,ee,0):m.F.Wq(U,b,L,ee,0),b=Math.acos(ee[2]/1),ee=Math.atan2(-ee[1],-ee[0]),a=1-p,Ce=1+(L=Math.tan(b))*L/a,a=(-(fe=2*U[2]*L/a)+(L=Math.sqrt(fe*fe-4*Ce*(U[2]*U[2]/a-1))))/(Ce*=2),fe=(-fe-L)/Ce,L=Math.tan(b),b=(a+fe)/2,U=((Ce=L*a+U[2])+(L*fe+U[2]))/2,L=m.F.gp(a-b,Ce-U),Ne=U/Ne*1.570796326794897,a=0;100>a&&(fe=(fe=m.F.w(p,Ne))*fe/Math.cos(Ne)*(Math.sin(Ne)-U*fe/(1-p)),!m.s.Cd(fe));a++)Ne-=fe;Ne=m.F.n(1,p,Ne)*Math.cos(Ne),U=1-L/(Ne=Math.sqrt((Ne-b)*(Ne+b))),U*=2-U,q=Math.acos(m.F.St(q,C)/(m.F.on(q)*m.F.on(C))),q*=m.s.Mb(1,C[0]),d=(m.F.q(Ne,U,m.F.Qj(U,q))+T*m.s.Mb(1,d))/m.F.Ah(Ne,U),d=m.F.ba(1.570796326794897*d),d=m.F.Rq(U,d),m.F.n(Ne,U,d),L=m.F.ba(ee+h),h=Math.cos(L),d=Math.sin(L),M[0]=O[0]*h+O[1]*-d,M[1]=O[0]*d+O[1]*h,M[2]=O[2],m.F.jO(p,M[0],M[1],M[2],ve,ge,Q),g!=null&&(g.u=ge.u),v!=null&&(v.u=ve.u)}},j}()}(ye||(ye={})),function(m){var j=function(){function u(d){this.Ya=null,this.wt=new m.h,this.xt=new m.h,this.g=d}return u.prototype.compare=function(d,g,v){return this.g.Gc(g,this.wt),this.g.Gc(d.ja(v),this.xt),this.wt.compare(this.xt)},u}(),T=function(){function u(d){this.Bf=new m.h,this.Dk=new m.h,this.g=d}return u.prototype.Dh=function(d){this.Bf.L(d)},u.prototype.compare=function(d,g){return this.g.Gc(d.ja(g),this.Dk),this.Bf.compare(this.Dk)},u}(),p=function(u){function d(g){var v=u.call(this,g.g,g.qa,!1)||this;return v.ib=g,v}return ri(d,u),d.prototype.compare=function(g,v,b){if(this.rg)return-1;var C=this.ib.Qd.Jn(this.ib.Rh(v));g=g.ja(b);var M=this.ib.Qd.Jn(this.ib.Rh(g));return this.Dm=b,this.RE(v,C,g,M)},d}(m.UC),h=function(u){function d(g){var v=u.call(this,g.g,g.qa)||this;return v.ib=g,v}return ri(d,u),d.prototype.compare=function(g,v){return this.rg?-1:(g=this.ib.Qd.Jn(this.ib.Rh(g.ja(v))),this.Dm=v,this.SE(v,g))},d}(m.aM),a=function(){function u(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new m.h,this.Pi=new m.h,this.hb=new m.$c(8),this.zd=new m.$c(5),this.lh=new m.au,this.Qd=new m.au,this.Ng=!1,this.vh=new m.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new m.Yj,this.Mc=new m.Yj,this.nh=new m.ia(0),this.Gk=new m.TC,this.Ff=new m.ia(0),this.Ak=new m.ia(0),this.jo=new m.Sa}return u.prototype.PX=function(d,g){var v=new m.Dd;return v.$B(),d.Oc(v),this.er(d),this.Wn=!1,this.qa=g,this.UA=g*g,g=this.jC(),d.Oc(v),g||(this.qQ(),g||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},u.prototype.TX=function(d,g){this.er(d),this.Wn=!1,this.qa=g,this.UA=g*g,this.Ng=!1,this.jC(),this.Ng||(this.Ng=d.Gp(g,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},u.prototype.pg=function(d,g){return this.hb.T(d,0+g)},u.prototype.LB=function(d,g,v){this.hb.S(d,0+g,v)},u.prototype.Rh=function(d){return this.hb.T(d,2)},u.prototype.ZW=function(d,g){this.hb.S(d,2,g)},u.prototype.RF=function(d,g){return this.hb.T(d,3+g)},u.prototype.Pp=function(d){return this.hb.T(d,7)},u.prototype.Pl=function(d,g){this.hb.S(d,7,g)},u.prototype.Rp=function(d,g){return this.hb.T(d,3+this.Op(d,g))},u.prototype.fr=function(d,g,v){this.hb.S(d,3+this.Op(d,g),v)},u.prototype.NR=function(d,g){return this.hb.T(d,5+this.Op(d,g))},u.prototype.hr=function(d,g,v){this.hb.S(d,5+this.Op(d,g),v)},u.prototype.Sr=function(d){return this.zd.T(d,0)},u.prototype.UW=function(d,g){this.zd.S(d,0,g)},u.prototype.ez=function(d){return this.zd.T(d,4)},u.prototype.cr=function(d,g){this.zd.S(d,4,g)},u.prototype.il=function(d){return this.zd.T(d,1)},u.prototype.ln=function(d,g){this.zd.S(d,1,g)},u.prototype.dz=function(d){return this.zd.T(d,3)},u.prototype.Et=function(d,g){this.zd.S(d,3,g)},u.prototype.Ym=function(d){var g=this.zd.Ce(),v=this.lh.Ph();return this.UW(g,v),d!=-1?(this.lh.addElement(v,d),this.g.Ra(d,this.xh,g),this.cr(g,this.g.Ua(d))):this.cr(g,-1),g},u.prototype.HP=function(d){this.zd.jd(d)},u.prototype.LD=function(d,g){this.lh.addElement(this.Sr(d),g),this.g.Ra(g,this.xh,d)},u.prototype.nt=function(d){var g=this.hb.Ce(),v=this.Qd.Ph();return this.ZW(g,v),d!=-1&&this.Qd.addElement(v,d),g},u.prototype.MD=function(d,g){this.Qd.addElement(this.Rh(d),g)},u.prototype.Uu=function(d){this.hb.jd(d),0<=(d=this.nh.lF(d))&&this.nh.SV(d)},u.prototype.hj=function(d,g){if(this.pg(d,0)==-1)this.LB(d,0,g);else{if(this.pg(d,1)!=-1)throw m.i.Qa();this.LB(d,1,g)}this.ky(d,g)},u.prototype.ky=function(d,g){var v=this.il(g);if(v!=-1){var b=this.Rp(v,g);this.hr(b,g,d),this.fr(d,g,b),this.fr(v,g,d),this.hr(d,g,v)}else this.hr(d,g,d),this.fr(d,g,d),this.ln(g,d)},u.prototype.Op=function(d,g){return this.pg(d,0)==g?0:1},u.prototype.Xm=function(d,g){var v,b=this.dz(g);if(b!=-1&&(this.df.vd(b,-1),this.Et(g,-1)),(b=this.il(g))!=-1){var C=v=b;do{var M=!1,O=this.Op(v,g),L=this.RF(v,O);if(this.pg(v,O+1&1)==d){if(this.Xu(v),this.Qd.bh(this.Rh(v)),this.Uu(v),v==L){b=-1;break}b==v&&(b=this.il(g),C=L,M=!0)}v=L}while(v!=C||M);if(b!=-1){do O=this.Op(v,g),L=this.RF(v,O),this.LB(v,O,d),v=L;while(v!=C);(v=this.il(d))!=-1?(C=this.Rp(v,d),M=this.Rp(b,d),C==v?(this.ln(d,b),this.ky(v,d),this.ln(d,v)):M==b&&this.ky(b,d),this.fr(b,d,C),this.hr(C,d,b),this.fr(v,d,M),this.hr(M,d,v)):this.ln(d,b)}}for(b=this.Sr(d),v=this.Sr(g),C=this.lh.rc(v);C!=-1;C=this.lh.lb(C))this.g.Ra(this.lh.ja(C),this.xh,d);this.lh.Hy(b,v),this.HP(g)},u.prototype.UT=function(d,g){var v=this.pg(d,0),b=this.pg(d,1),C=this.pg(g,0),M=this.pg(g,1);this.Qd.Hy(this.Rh(d),this.Rh(g)),g==this.il(v)&&this.ln(v,d),g==this.il(b)&&this.ln(b,d),this.Xu(g),this.Uu(g),v==C&&b==M||b==C&&v==M||(this.Hn(v,this.yo),this.Hn(C,this.Pi),this.yo.qb(this.Pi)?(v!=C&&this.Xm(v,C),b!=M&&this.Xm(b,M)):(b!=C&&this.Xm(b,C),v!=M&&this.Xm(v,M)))},u.prototype.Xu=function(d){var g=this.pg(d,1);this.dF(d,this.pg(d,0)),this.dF(d,g)},u.prototype.dF=function(d,g){var v=this.Rp(d,g),b=this.NR(d,g),C=this.il(g);v!=d?(this.fr(b,g,v),this.hr(v,g,b),C==d&&this.ln(g,v)):this.ln(g,-1)},u.prototype.WD=function(d,g,v){var b=this.Qd.rc(d),C=this.Qd.ja(b);d=this.Le(C);var M=this.Le(this.g.U(C));for(this.g.jr(C,g,v,!0),b=this.Qd.lb(b);b!=-1;b=this.Qd.lb(b)){C=this.Qd.ja(b);var O=this.Le(C)==d;this.g.jr(C,g,v,O)}b=g.Vp(v,0).ac(),g=g.Vp(v,g.ol(v)-1).wc(),this.BK(d,b),this.BK(M,g)},u.prototype.ZE=function(d,g,v){var b=this.Rh(d),C=this.pg(d,0),M=this.pg(d,1),O=this.nt(-1);for(this.nh.add(O),this.Pl(O,-3),this.Ff.add(O),this.hj(O,C),d=1,g=g.ol(v);d<g;d++)v=this.Ym(-1),this.Ak.add(v),this.Ff.add(v),this.hj(O,v),O=this.nt(-1),this.nh.add(O),this.Pl(O,-3),this.Ff.add(O),this.hj(O,v);for(this.hj(O,M),b=this.Qd.rc(b);b!=-1;b=this.Qd.lb(b))if(M=this.Qd.ja(b),this.Le(M)==C){d=0;do 0<d&&(O=this.Ff.get(d-1),this.LD(O,M),this.ez(O)==-1&&this.cr(O,this.g.Ua(M))),O=this.Ff.get(d),d+=2,this.MD(O,M),M=this.g.U(M);while(d<this.Ff.size)}else{d=this.Ff.size-1;do d<this.Ff.size-2&&(O=this.Ff.get(d+1),this.LD(O,M),0>this.ez(O)&&this.cr(O,this.g.Ua(M))),O=this.Ff.get(d),d-=2,this.MD(O,M),M=this.g.U(M);while(0<=d)}this.Ff.clear(!1)},u.prototype.Le=function(d){return this.g.Pa(d,this.xh)},u.prototype.TI=function(d,g,v){var b=this.pg(g,0),C=new m.h;this.Hn(b,C);var M=new m.h,O=this.pg(g,1);this.Hn(O,M);var L=v.ol(d),q=v.Vp(d,0),U=new m.h;if(q.Yp(U),!C.qb(U)){if(!this.Ng){var ee=C.compare(this.vh);0>ee*(U=U.compare(this.vh))&&(this.Ng=!0)}this.vF(b,this.Ff),this.Ak.add(b)}for(!this.Ng&&1<L&&(ee=C.compare(M),q=q.wc(),(C.compare(q)!=ee||q.compare(M)!=ee||0>q.compare(this.vh))&&(this.Ng=!0)),d=(q=v.Vp(d,L-1)).wc(),M.qb(d)||(this.Ng||0>(ee=M.compare(this.vh))*(U=d.compare(this.vh))&&(this.Ng=!0),this.vF(O,this.Ff),this.Ak.add(O)),this.Ff.add(g),M=0,O=this.Ff.size;M<O;M++)d=this.Ff.get(M),v=this.Pp(d),m.$c.LG(v)&&(this.Mc.vd(v,-1),this.Pl(d,-1)),d!=g&&this.Pp(d)!=-3&&(this.nh.add(d),this.Pl(d,-3));this.Ff.clear(!1)},u.prototype.lO=function(d,g){this.$d.compare(this.Mc,this.Mc.ja(d),g),this.$d.rg&&(this.$d.Kr(),this.oF(d,g))},u.prototype.oF=function(d,g){this.Wn=!0,d=this.Mc.ja(d),g=this.Mc.ja(g);var v=this.Qd.Jn(this.Rh(d)),b=this.Qd.Jn(this.Rh(g)),C=this.g.bc(v);C==null&&(this.ie==null&&(this.ie=new m.yb),this.g.ed(v,this.ie),C=this.ie),(v=this.g.bc(b))==null&&(this.Nm==null&&(this.Nm=new m.yb),this.g.ed(b,this.Nm),v=this.Nm),this.Gk.Oo(C),this.Gk.Oo(v),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(d,g,-1,this.Gk),this.Gk.clear()},u.prototype.GQ=function(d,g){this.Wn=!0,g=this.Mc.ja(g);var v=this.Qd.Jn(this.Rh(g)),b=this.g.bc(v);b==null&&(this.ie==null&&(this.ie=new m.yb),this.g.ed(v,this.ie),b=this.ie),v=this.BF(d),this.Gk.Oo(b),this.g.Vi(v,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(g,-1,d,this.Gk),this.Gk.clear()},u.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var d=this.nh.Fc();this.nh.If(),this.Pl(d,-1),this.WS(d)!=-1&&this.wS(d),this.Vn=!1}},u.prototype.wS=function(d){if(this.Vn){var g=this.Mc.zu(this.MH,this.GH,d,!0);this.Vn=!1}else g=this.Mc.KD(d);g==-1?this.UT(this.Mc.ja(this.Mc.FF()),d):(this.Pl(d,g),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,g)))},u.prototype.WS=function(d){var g=this.pg(d,0);if(d=this.pg(d,1),this.Hn(g,this.yo),this.Hn(d,this.Pi),m.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var v=this.yo.compare(this.vh),b=this.Pi.compare(this.vh);return 0>=v&&0<b?d:0>=b&&0<v?g:-1},u.prototype.oQ=function(){var d=new m.ia(0);d.Jb(this.g.fd);for(var g=this.g.Yq(),v=g.next();v!=-1;v=g.next())this.g.Pa(v,this.xh)!=-1&&d.add(v);this.g.nx(d,d.size),this.pQ(d)},u.prototype.pQ=function(d){this.df.clear(),this.df.De(d.size),this.df.Vo(new j(this.g));var g=new m.h;g.Rc();for(var v=-1,b=new m.h,C=0,M=d.size;C<M;C++){var O=d.get(C);this.g.Gc(O,b),b.qb(g)?(O=this.g.Pa(O,this.xh),this.Xm(v,O)):(v=this.Le(O),this.g.Gc(O,g),O=this.df.xn(O),this.Et(v,O))}},u.prototype.qQ=function(){var d=new m.ia(0);d.Jb(this.g.fd);for(var g=this.df.rc(-1);g!=-1;g=this.df.lb(g))d.add(this.df.ja(g));this.df.clear(),this.g.nx(d,d.size),g=0;for(var v=d.size;g<v;g++){var b=d.get(g),C=this.Le(b);b=this.df.xn(b),this.Et(C,b)}},u.prototype.vF=function(d,g){var v=this.il(d);if(v!=-1){var b=v;do m.$c.LG(this.Pp(b))&&g.add(b),b=this.Rp(b,d);while(b!=v)}},u.prototype.BK=function(d,g){for(d=this.lh.rc(this.Sr(d));d!=-1;d=this.lh.lb(d))this.g.mf(this.lh.ja(d),g)},u.prototype.hK=function(d,g,v,b){this.Xu(d),g!=-1&&this.Xu(g),this.TI(0,d,b),g!=-1&&this.TI(1,g,b),v!=-1&&(b.Bf.D(this.yo),this.Hn(v,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(v)),v=0;for(var C=this.Ak.size;v<C;v++){var M=this.Ak.get(v),O=this.dz(M);O!=-1&&(this.df.vd(O,-1),this.Et(M,-1))}for(v=this.Rh(d),C=g!=-1?this.Rh(g):-1,this.WD(v,b,0),g!=-1&&this.WD(C,b,1),this.ZE(d,b,0),g!=-1&&this.ZE(g,b,1),this.Qd.bh(v),this.Uu(d),g!=-1&&(this.Qd.bh(C),this.Uu(g)),v=0,C=this.Ak.size;v<C;v++)(M=this.Ak.get(v))==this.Jq&&(this.Xv=!0),(O=this.dz(M))==-1&&((O=this.df.KD(this.BF(M)))==-1?(d=this.Le(this.df.ja(this.df.FF())),this.Xm(d,M)):this.Et(M,O));this.Ak.clear(!1)},u.prototype.Hn=function(d,g){this.g.dG(this.ez(d),g)},u.prototype.BF=function(d){return this.lh.Jn(this.Sr(d))},u.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new p(this),this.Mc.Zn=this.$d);var d=new m.ia(0),g=null,v=null;this.GH=this.MH=-1,this.Vn=!1;for(var b=this.df.rc(-1);b!=-1;){this.Vn=!1;var C=this.df.ja(b);this.Jq=this.Le(C),this.g.Gc(C,this.vh),this.$d.$J(this.vh.y,this.vh.x);var M=this.il(this.Jq),O=M==-1;if(!O){C=M;do{var L=this.Pp(C);L==-1?(this.nh.add(C),this.Pl(C,-3)):L!=-3&&d.add(L),C=this.Rp(C,this.Jq)}while(C!=M)}if(0<d.size){for(this.Vn=d.size==1&&this.nh.size==1,O=0,M=d.size;O<M;O++)C=this.Mc.ja(d.get(O)),this.Pl(C,-2);var q=-2,U=-2;for(O=0,M=d.size;O<M;O++){if(L=d.get(O),q==-2){var ee=this.Mc.we(L);ee!=-1?(C=this.Mc.ja(ee),(C=this.Pp(C))!=-2&&(q=ee)):q=-1}if(U==-2&&((L=this.Mc.lb(L))!=-1?(C=this.Mc.ja(L),(C=this.Pp(C))!=-2&&(U=L)):U=-1),q!=-2&&U!=-2)break}for(O=0,M=d.size;O<M;O++)L=d.get(O),C=this.Mc.ja(L),this.Mc.vd(L,-1),this.Pl(C,-1);d.clear(!1),this.MH=q!=-1?q:-1,this.GH=U!=-1?U:-1,q!=-1&&U!=-1?this.Vn||this.lO(q,U):q==-1&&U==-1&&(this.Vn=!1)}else O&&(g==null&&(g=new h(this)),g.Dh(this.vh),this.Mc.uJ(g),g.rg&&(g.Kr(),this.GQ(this.Jq,g.Dm)));this.xS(),this.Xv?(this.Xv=!1,v==null&&(v=new T(this.g)),v.Dh(this.vh),b=this.df.uJ(v)):b=this.df.lb(b)}return this.Wn},u.prototype.er=function(d){for(this.g=d,this.xh=this.g.Gd(),this.hb.De(d.fd+32),this.zd.De(d.fd),this.lh.At(d.fd),this.lh.fn(d.fd),this.Qd.At(d.fd+32),this.Qd.fn(d.fd+32),d=this.g.ld;d!=-1;d=this.g.ue(d))if(m.aa.Hc(this.g.ic(d)))for(L=this.g.Ob(d);L!=-1;L=this.g.Rb(L)){var g=this.g.Ja(L),v=this.g.Xa(L),b=this.Ym(v),C=this.nt(v);for(this.hj(C,b),q=this.g.U(v),v=0,g-=2;v<g;v++){var M=this.g.U(q),O=this.Ym(q);this.hj(C,O),C=this.nt(q),this.hj(C,O),q=M}this.g.dc(L)?(O=this.Ym(q),this.hj(C,O),C=this.nt(q),this.hj(C,O),this.hj(C,b)):(O=this.Ym(q),this.hj(C,O))}else for(var L=this.g.Ob(d);L!=-1;L=this.g.Rb(L)){var q=this.g.Xa(L);for(b=0,g=this.g.Ja(L);b<g;b++)this.Ym(q),q=this.g.U(q)}this.oQ()},u}();m.RC=a}(ye||(ye={})),function(m){var j=function(T){function p(h,a,u){var d=T.call(this)||this;if(h!==void 0)if(u!==void 0){d.description=m.ee.og();var g=new m.Nd;g.K(h,a,u),d.dC(g)}else if(a!==void 0)d.description=m.ee.og(),d.Cb(h,a);else if(h instanceof m.ra)d.description=h;else if(h instanceof m.h)d.description=m.ee.og(),d.Cb(h);else{if(!(h instanceof p))throw m.i.N();d.description=h.description,d.Cb(h.Lg(),h.ih()),h.ka!==null&&(d.ka=h.ka.slice(0))}else d.description=m.ee.og();return d}return ri(p,T),p.prototype.D=function(h){if(h===void 0){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");return(h=new m.h).ma(this.ka[0],this.ka[1]),h}if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");h.ma(this.ka[0],this.ka[1])},p.prototype.Cb=function(h,a){typeof h=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=h,this.ka[1]=a):(this.vc(),this.Cb(h.x,h.y))},p.prototype.Cz=function(){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");var h=new m.Nd;return h.x=this.ka[0],h.y=this.ka[1],h.z=this.description.iG()?this.ka[2]:m.ra.se(1),h},p.prototype.dC=function(h){this.vc();var a=this.hasAttribute(1);a||m.ra.DG(1,h.z)||(this.re(1),a=!0),this.ka==null&&this.un(),this.ka[0]=h.x,this.ka[1]=h.y,a&&(this.ka[2]=h.z)},p.prototype.Lg=function(){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},p.prototype.cC=function(h){this.setAttribute(0,0,h)},p.prototype.ih=function(){if(this.Ac())throw m.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},p.prototype.aK=function(h){this.setAttribute(0,1,h)},p.prototype.bS=function(){return this.Uc(1,0)},p.prototype.wX=function(h){this.setAttribute(1,0,h)},p.prototype.zR=function(){return this.Uc(2,0)},p.prototype.hX=function(h){this.setAttribute(2,0,h)},p.prototype.Ec=function(){return this.yF(3,0)},p.prototype.LJ=function(h){this.setAttribute(3,0,h)},p.prototype.Uc=function(h,a){var u=this.description.Pf(h);return 0<=u?this.ka[this.description.$j(u)+a]:m.ra.se(h)},p.prototype.yF=function(h,a){var u=this.description.Pf(h);return 0<=u?this.ka[this.description.$j(u)+a]:m.ra.se(h)},p.prototype.setAttribute=function(h,a,u){this.vc();var d=this.description.Pf(h);0>d&&(this.re(h),d=this.description.Pf(h)),this.ka==null&&this.un(),this.ka[this.description.$j(d)+a]=u},p.prototype.getType=function(){return 33},p.prototype.Db=function(){return 0},p.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},p.prototype.sn=function(h){if(this.ka!=null){for(var a=m.ee.Iw(h,this.description),u=[],d=0,g=0,v=h.Aa;g<v;g++){var b=h.kd(g),C=m.ra.Va(b);if(a[g]==-1){var M=m.ra.se(b);for(b=0;b<C;b++)u[d]=M,d++}else for(M=this.description.$j(a[g]),b=0;b<C;b++)u[d]=this.ka[M],d++,M++}this.ka=u}this.description=h},p.prototype.un=function(){this.lJ(this.description.Ae.length),p.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},p.prototype.Oc=function(h){if(h instanceof m.Dd){if(!this.Ac()){var a=this.D();h.Eh(a,a),this.Cb(a)}}else this.Ac()||(this.re(1),a=this.Cz(),this.dC(h.fp(a)))},p.prototype.copyTo=function(h){if(h.getType()!=33)throw m.i.N();h.vc(),this.ka==null?(h.Oa(),h.ka=null,h.Nf(this.description)):(h.Nf(this.description),h.lJ(this.description.Ae.length),p.cE(this.ka,h.ka,this.description.Ae.length))},p.prototype.Ia=function(){return new p(this.description)},p.prototype.B=function(){return this.Ac()},p.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},p.prototype.bn=function(h){h.Oa(),this.description!=h.description&&h.Nf(this.description),h.Zb(this)},p.prototype.A=function(h){this.Ac()?h.Oa():(h.v=this.ka[0],h.G=this.ka[1],h.C=this.ka[0],h.H=this.ka[1])},p.prototype.Qo=function(h){if(this.Ac())h.Oa();else{var a=this.Cz();h.v=a.x,h.G=a.y,h.Ye=a.z,h.C=a.x,h.H=a.y,h.Bg=a.z}},p.prototype.Tg=function(h,a){var u=new m.Nc;return this.Ac()?(u.Oa(),u):(h=this.Uc(h,a),u.oa=h,u.va=h,u)},p.prototype.lJ=function(h){if(this.ka==null)this.ka=m.O.lg(h);else if(this.ka.length<h){for(var a=this.ka.slice(0),u=this.ka.length;u<h;u++)a[u]=0;this.ka=a}},p.cE=function(h,a,u){if(0<u)for(u=0;u<h.length;u++)a[u]=h[u]},p.prototype.Nb=function(h){if(h==this)return!0;if(!(h instanceof p)||this.description!=h.description)return!1;if(this.Ac())return!!h.Ac();for(var a=0,u=this.description.Ae.length;a<u;a++)if(this.ka[a]!=h.ka[a])return!1;return!0},p.prototype.cc=function(){var h=this.description.cc();if(!this.Ac())for(var a=0,u=this.description.Ae.length;a<u;a++){var d=this.ka[a];d=m.O.truncate(d^d>>>32),h=m.O.Th(d,h)}return h},p.prototype.mg=function(){return null},p}(m.aa);m.Sa=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){p!==void 0&&(this.x=p,this.y=h,this.z=a)}return T.construct=function(p,h,a){var u=new T;return u.x=p,u.y=h,u.z=a,u},T.prototype.K=function(p,h,a){this.x=p,this.y=h,this.z=a},T.prototype.lx=function(){this.z=this.y=this.x=0},T.prototype.normalize=function(){var p=this.length();p==0&&(this.x/=p,this.y/=p,this.z/=p)},T.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},T.prototype.sub=function(p){return new T(this.x-p.x,this.y-p.y,this.z-p.z)},T.prototype.Ag=function(p){new T(this.x*p,this.y*p,this.z*p)},T.prototype.Qh=function(p){return this.x*p.x+this.y*p.y+this.z*p.z},T}();m.Nd=j}(ye||(ye={})),function(m){var j=function(){function T(p,h,a){this.Gw=this.DA=null,this.Xf=h,this.FT=h.y-a,this.ET=h.y+a,this.Ew=0,this.dA=p,this.qa=a,this.RT=a*a,this.eA=a!=0,this.Lv=!1}return T.prototype.result=function(){return this.Ew!=0?1:0},T.prototype.ZM=function(p){return p=p.hc(p.fe(this.Xf,!1)),m.h.yc(p,this.Xf)<=this.RT},T.prototype.fF=function(p){if(!this.eA&&(this.dA&&this.Xf.qb(p.ac())||this.Xf.qb(p.wc())))this.Lv=!0;else if(p.na==this.Xf.y&&p.na==p.la){if(this.dA&&!this.eA){var h=Math.max(p.sa,p.pa);this.Xf.x>Math.min(p.sa,p.pa)&&this.Xf.x<h&&(this.Lv=!0)}}else{var a=!1;if(h=Math.max(p.sa,p.pa),this.Xf.x>h?a=!0:this.Xf.x>=Math.min(p.sa,p.pa)&&(a=0<p.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),a){if(this.Xf.y==p.ac().y){if(this.Xf.y<p.wc().y)return}else if(this.Xf.y==p.wc().y&&this.Xf.y<p.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(p.ac().y>p.wc().y?1:-1)}}},T.prototype.SI=function(p){var h=p.Tg(0,1);if(h.oa>this.ET||h.va<this.FT)return!1;if(this.eA&&this.ZM(p))return!0;if(h.oa>this.Xf.y||h.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(h=p.eG()))for(p=0;p<h;p++){var a=this.DA[p].get();if(this.fF(a),this.Lv)return!0}else if(this.fF(p),this.Lv)return!0;return!1},T.PM=function(p,h,a){for(h=new T(p.In()==0,h,a),p=p.Ga();p.$a();)for(;p.Ha();)if(a=p.ha(),h.SI(a))return-1;return h.result()},T.QM=function(p,h,a,u){var d=new m.l;p.xc(d),d.W(u,u);var g=new T(p.In()==0,a,u);p=p.Ga();var v=new m.l;for(v.K(d),v.C=a.x+u,v.G=a.y-u,v.H=a.y+u,u=(a=h.MF(v,u)).next();u!=-1;u=a.next())if(p.Vb(h.ja(u)),p.Ha()&&(u=p.ha(),g.SI(u)))return-1;return g.result()},T.wm=function(p,h,a){if(p.B())return 0;var u=new m.l;if(p.xc(u),u.W(a,a),!u.contains(h))return 0;if((u=p.Bb)!=null){var d=u.Fk;if(d!=null){if((d=d.So(h.x,h.y))==1)return 1;if(d==0)return 0}if((u=u.Fb)!=null)return T.QM(p,u,h,a)}return T.PM(p,h,a)},T.bT=function(p,h,a){return h.B()?0:T.wm(p,h.D(),a)},T.Ml=function(p,h){return!(16>(p=p.I()))&&2*p+Math.log(p)/Math.log(2)*h<1*p*h},T}();m.Dg=j}(ye||(ye={})),function(m){var j=function(T){function p(h){return T.call(this,!0,h)||this}return ri(p,T),p.prototype.Ia=function(){return new p(this.description)},p.prototype.Db=function(){return 2},p.prototype.getType=function(){return 1736},p.prototype.xG=function(h,a,u){this.JS(h,a,u)},p.prototype.qR=function(){this.FR()},p}(m.Vk);m.Da=j}(ye||(ye={})),function(m){(function(j){j[j.PiPOutside=0]="PiPOutside",j[j.PiPInside=1]="PiPInside",j[j.PiPBoundary=2]="PiPBoundary"})(m.RL||(m.RL={})),m.hd=function(){function j(){}return j.KG=function(T,p,h){return(T=m.Dg.bT(T,p,h))==0?0:T==1?1:2},j.Yd=function(T,p,h){return(T=m.Dg.wm(T,p,h))==0?0:T==1?1:2},j.WX=function(T,p,h,a,u){if(p.length<h||u.length<h)throw m.i.N();for(var d=0;d<h;d++)u[d]=j.Yd(T,p[d],a)},j.sK=function(T,p,h,a,u){if(T.getType()==1736)j.WX(T,p,h,a,u);else{if(T.getType()!=197)throw m.i.fa("invalid_call");var d=new m.l;T.A(d),j.$M(d,p,h,a,u)}},j.$M=function(T,p,h,a,u){if(p.length<h||u.length<h)throw m.i.N();if(T.B())for(a=0;a<h;a++)u[a]=0;else for(T.W(.5*-a,.5*-a),T.W(.5*a,.5*a),a=0;a<h;a++)T.contains(p[a])?u[a]=1:T.contains(p[a])?u[a]=2:u[a]=0},j.YX=function(T,p,h,a,u){for(var d=0;d<h;d++)u[d]=T.qs(p[d],a)?2:0},j.XX=function(T,p,h,a,u){var d=T.Bb,g=null;d!=null&&(g=d.Fk),d=h;for(var v=0;v<h;v++)if(u[v]=1,g!=null){var b=p[v];g.So(b.x,b.y)==0&&(u[v]=0,d--)}if(d!=0)for(T=T.Ga();T.$a()&&d!=0;)for(;T.Ha()&&d!=0;)for(g=T.ha(),v=0;v<h&&d!=0;v++)u[v]==1&&g.qs(p[v],a)&&(u[v]=2,d--);for(v=0;v<h;v++)u[v]==1&&(u[v]=0)},j.tK=function(T,p,h,a,u){var d=T.getType();if(d==1607)j.XX(T,p,h,a,u);else{if(!m.aa.yd(d))throw m.i.fa("Invalid call.");j.YX(T,p,h,a,u)}},j}()}(ye||(ye={})),function(m){var j=function(T){function p(h,a){if(arguments.length==2){var u=T.call(this,!1,h.description)||this;u.nf(h),u.lineTo(a)}else u=T.call(this,!1,h)||this;return u}return ri(p,T),p.prototype.Ia=function(){return new p(this.description)},p.prototype.Db=function(){return 1},p.prototype.getType=function(){return 1607},p.prototype.xG=function(h,a,u){this.KS(h,a,u)},p}(m.Vk);m.Ta=j}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.progress=function(){return!0},T.zp=function(p){if(p!=null&&!p.progress(-1,-1))throw m.i.WC()},T}();m.mp=j}(ye||(ye={})),function(m){var j;(j=m.PK||(m.PK={}))[j.clipWithInputHorizon=1]="clipWithInputHorizon",j[j.clipWithOutputHorizon=2]="clipWithOutputHorizon";var T=function(){function a(){this.Kg=3,this.Vu=this.Jr=NaN}return a.prototype.PW=function(u){this.QB(1,u)},a.prototype.QW=function(u){this.QB(2,u)},a.prototype.hS=function(){return this.hs(1)},a.prototype.iS=function(){return this.hs(2)},a.prototype.QB=function(u,d){this.Kg=d?this.Kg|u:this.Kg&~u},a.prototype.hs=function(u){return!!(this.Kg&u)},a.prototype.Of=function(){var u=new a;return u.Jr=this.Jr,u.Vu=this.Vu,u.Kg=this.Kg,u},a}();m.yC=T,function(a){a[a.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",a[a.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(m.QK||(m.QK={}));var p=function(){function a(){this.Kg=0}return a.prototype.QB=function(u,d){this.Kg=d?this.Kg|u:this.Kg&~u},a.prototype.hs=function(u){return!!(this.Kg&u)},a.jg=function(u){var d=new a;return d.Kg=u.Kg,d},a.prototype.mM=function(u){this.Kg=u.Kg},a}();m.AY=p;var h=function(){function a(u,d,g){this.ef=u,this.Yf=d,this.Uf=new m.l,this.Uf.K(g),this.AT=u.cc()+d.cc()+this.Uf.cc().toString()}return a.prototype.cc=function(){return this.AT},a.prototype.Nb=function(u){return this==u||this.ef.Nb(u.ef)&&this.Yf.Nb(u.Yf)&&this.Uf.Nb(u.Uf)},a}();m.FY=h,h=function(){function a(){this.Yf=this.ef=null,this.rH=new T,this.sH=new p,this.ww=this.Wf=null,this.mw=this.Tn=!0}return a.Nr=function(u,d,g,v){var b;v===void 0&&(v=null),b===void 0&&(b=null);var C=new a;return C.qp(u,d,g,v,b),C},a.prototype.qp=function(u,d,g,v,b){if(u==null||d==null)throw m.i.fa("invalidArgument");if(this.ef=u,this.Yf=d,this.mw=this.Tn=!1,v!=null&&(this.rH=v.Of()),b!=null&&this.sH.mM(b),b=!1,d.Sb()==1&&v!=null&&(v=v.Jr,isNaN(v)||v==0||(b=!0)),u==d)this.Tn=!b,this.mw=!0;else{v=u.Sb();var C=d.Sb();if(v==0||C==0){if(g!=null)throw m.i.N();u.Hd()!=null&&d.Hd()!=null&&(this.Tn=u.Hd().Nb(d.Hd()))}else v==3||C==3?this.Tn=u.Nb(d):this.ef.kS(this.Yf)?this.Tn=!b:this.Tn=!1,this.Wf=g,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},a.prototype.isIdentity=function(){return this.Tn},a.prototype.nR=function(){return this.rH.Of()},a.prototype.Nb=function(u){return u==this||!!(u instanceof a&&this.ef.Nb(u.ef)&&this.Yf.Nb(u.Yf))&&(this.Wf==u.Wf||!(this.Wf==null||u.Wf==null||!this.Wf.Nb(u.Wf)))},a.prototype.oY=function(){this.ww=new m.bu(this)},a}(),m.vr=h}(ye||(ye={})),function(m){var j=function(){function T(){}return T.Cp=function(p){return p*T.oW},T.mx=function(p,h){return T.gP(h-p)},T.hP=function(p){return-360<=p&&720>p?(0>p?p+=360:360<=p&&(p-=360),p):(0>(p=m.lc.RK(p))&&(p+=360),p)},T.gP=function(p){return 180<(p=T.hP(p))&&(p-=360),p},T.oW=57.29577951308232,T}();m.qr=j,m.Hh=function(){function T(){}return T.lj=function(p,h){var a=new m.l;p.A(a);var u=m.cb.gh(h),d=new m.l;return d.K(u),d.v=a.v,d.C=a.C,d.W(.01*d.ca(),0),h=m.ta.Wd(h,a,!1),d.contains(a)?p:m.Ud.clip(p,d,h,0)},T.ks=function(p,h,a,u,d){if(!m.cb.Wc(h))throw m.i.N();var g=m.ta.kj(h,p,!1),v=m.cb.gh(h),b=m.cb.sc(h),C=b.Hd().ai,M=m.cb.vv(b);b=m.cb.ev(b),M*=2-M;var O=new m.Nc;v.cn(O);var L=[[0,0],[0,0]];if(m.Eg.Sb(h)==2?u?(L[0][0]=T.Zm(d,O),L[0][1]=v.Jp(),m.cb.vt(),v=L[0][0]*C):(L[0][0]=v.gk(),L[0][1]=d,m.cb.vt(),v=L[0][1]*C):v=d*C,!u&&v!=0)throw m.i.N();var q=new m.ga,U=new m.gd;p=U.Ib(p);for(var ee=[0],Q=new m.h,ge=new m.h,ve=new m.h,fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=U.Ob(p);Ne!=-1;Ne=U.Rb(Ne)){var Ve=U.Xa(Ne);U.D(Ve,ve);for(var Xe=!1,et=Ve=U.U(Ve);et!=-1;et=U.U(et)){if(et==Ve){if(Xe)break;Xe=!0}if(U.D(et,fe),u&&g<d-ve.x&&fe.x-d>g||g<d-fe.x&&ve.x-d>g||!u&&g<-ve.y&&fe.y>g||g<-fe.y&&ve.y>g)do if(!(Math.abs(ve.x-fe.x)>=.5*O.R())){if(m.Eg.Sb(h)==2?(L[0][0]=T.Zm(ve.x,O),L[0][1]=ve.y,L[1][0]=T.Zm(fe.x,O),L[1][1]=fe.y,m.cb.dW(),Ce.x=L[0][0]*C,Ce.y=L[0][1]*C,Ie.x=L[1][0]*C,Ie.y=L[1][1]*C):(Ce.x=ve.x*C,Ce.y=ve.y*C,Ie.x=fe.x*C,Ie.y=fe.y*C),Ie.x=6.283185307179586*(fe.x-ve.x)/O.R()+Ce.x,u){if(ge.x=v,ge.y=T.Nz(b,M,Ce,Ie,v,a),isNaN(ge.y))break}else{if(ge.x=T.Lz(b,M,Ce,Ie,a),isNaN(ge.x))break;ge.y=0}m.kb.wd(b,M,Ce.x,Ce.y,Ie.x,Ie.y,q,null,null,a);var dt=q.u;m.kb.wd(b,M,Ce.x,Ce.y,ge.x,ge.y,q,null,null,a);var ut=q.u;m.Eg.Sb(h)==2?(L[0][0]=ge.x/C,L[0][1]=ge.y/C,m.cb.bR(),u?(Q.y=L[0][1],Q.x=d):(Q.x=T.os(L[0][0],ve.x,fe.x,O),Q.y=d)):u?(Q.x=d,Q.y=ge.y/C):(Q.x=T.os(ge.x/C,ve.x,fe.x,O),Q.y=d),ee[0]=0<dt?m.O.Rk(ut/dt,0,1):.5,ee[0]!=0&&ee[0]!=1&&(dt=U.Ma(et),U.Ul(dt,ee,1),U.Cb(U.U(dt),Q.x,Q.y))}while(!1);ve.L(fe)}}return U.Ne(p)},T.Fn=function(p,h,a,u,d){if(p.B())return p;var g=m.cb.bf(h);return T.Hp(p,a-180*g,360*g,h,u,d,!0)},T.Nz=function(p,h,a,u,d,g){if(3.141592653589793<=Math.abs(a.x-u.x)||!T.Sn(a.x,u.x,d))return NaN;if(a.x>u.x)var v=u;else v=a,a=u;u=new m.ga(0);var b=new m.ga(0),C=new m.ga(0);m.kb.wd(p,h,v.x,v.y,a.x,a.y,b,u,null,g);var M=b.u,O=0,L=1,q=new m.h;for(q.L(v);M*(L-O)>1e-12*p;){var U=.5*(O+L);if(m.kb.oj(p,h,v.x,v.y,M*U,u.u,b,C,g),q.x=b.u,q.y=C.u,q.x==d)break;if(T.Sn(v.x,q.x,d))L=U;else{if(!T.Sn(a.x,q.x,d))return NaN;O=U}}return q.y},T.Sn=function(p,h,a){return p=j.Cp(p),h=j.mx(p,j.Cp(h)),(a=j.mx(p,j.Cp(a)))==0||0<h&&0<a&&a<=h||0>h&&0>a&&a>=h},T.Zm=function(p,h){var a=h.va-h.oa;return h.It(p-Math.floor((p-h.oa)/a)*a)},T.os=function(p,h,a,u){var d=new m.Nc;for(d.K(h,a),a=u.R(),p=Math.floor((p-h)/a)*a+p,d=d.sf();Math.abs(p-d)>Math.abs(p+a-d);)p+=a;return p},T.Lz=function(p,h,a,u,d){if(a.y>u.y)var g=u;else g=a,a=u;if((u=new m.Nc).K(g.y,a.y),!u.contains(0)||3.141592653589793<=Math.abs(g.x-a.x))return NaN;if(g.x==a.x)return g.x;var v=new m.ga(0),b=new m.ga(0),C=new m.ga(0);m.kb.wd(p,h,g.x,g.y,a.x,a.y,b,v,null,d);var M=b.u,O=0,L=1,q=new m.h;for(q.L(g);M*(L-O)>1e-12*p;){var U=.5*(O+L);if(m.kb.oj(p,h,g.x,g.y,M*U,v.u,b,C,d),q.x=b.u,q.y=C.u,u.K(g.y,q.y),q.y==0)break;if(u.contains(0))L=U;else{if(u.K(a.y,q.y),!u.contains(0))return NaN;O=U}}return q.x},T.Hp=function(p,h,a,u,d,g,v){var b=new m.l;if(p.A(b),b.B())return p;var C=new m.Nc;b.cn(C);var M=new m.Nc;if(M.K(h,h+a),M.contains(C)&&M.va!=C.va)return p;var O=new m.l;O.K(b);var L=p.getType();if(L==33)return((b=(O=d?p:p.Of()).Lg())<M.oa||b>=M.va||v&&b==M.va)&&(b+=Math.ceil((M.oa-b)/a)*a,b=M.It(b),O.cC(b)),O;if(L==550){for(u=(O=d?p:p.Of()).ub(0),L=2*O.I(),p=!1,d=0;d<L;d+=2)((b=u.read(d))<M.oa||b>=M.va||v&&b==M.va)&&(p=!0,b+=Math.ceil((M.oa-b)/a)*a,b=M.It(b),u.write(d,b));return p&&O.Pc(1993),O}if(M.contains(C))return p;if(L==197)return a=d?p:p.Of(),b.Ea(O),a.Xo(b),a;var q=.1*Math.max(b.ca(),b.R());for(O.W(0,q),v=p,M=u.Xd(0),p=m.Gh.local(),d=new m.Dd;;){var U=Math.floor((C.oa-h)/a),ee=Math.ceil((C.va-h)/a);if(!(3<ee-U))break;U=Math.floor(.5*(ee+U)),O.v=b.v-q,O.C=h+a*U;var Q=m.Ud.clip(v,O,M,g);O.v=O.C,O.C=b.C+q;var ge=m.Ud.clip(v,O,M,g);d.gg((U-ee)*a,0),ge.Oc(d),L==1736?v=p.V(Q,ge,u,null):(v=Q).add(ge,!1),v.A(b),b.cn(C)}for(O.v=h,O.C=h+a,(h=new m.l).K(O),h.W(M,0),(h=Math.floor((b.v-O.v)/a)*a)!=0?(O.move(h,0),d.gg(-h,0)):d.RB(),h=L==1607?new m.Ta(v.description):new m.Da(v.description),g=new m.l,C=new m.l;b.C>O.v;)(q=m.Ud.clip(v,O,M,0)).A(C),(L==1607?!q.B()&&(C.R()>M||C.ca()>M):!q.B()&&(L!=1736||C.R()>M))&&(q.Oc(d),q.A(C),h.A(g),g.W(M,M),g.isIntersecting(C)&&L==1736?h=p.V(h,q,u,null):h.add(q,!1)),O.move(a,0),d.shift(-a,0);return h},T.WI=function(p,h,a,u){var d=new m.de(a.description);d.Fd(a,0,-1),d=m.cb.zh(d,p,h);var g=a.I();if(u.Oa(),!m.cb.Wc(p)||g!=d.I())return!1;var v=new m.l;a.A(v);var b=new m.l;if(d.A(b),v=v.R(),b=b.R(),v!=0&&b!=0){if(b/=v,p=m.cb.gh(h).R()/m.cb.gh(p).R(),1e-10<Math.abs(b/p-1))return!1}else if(v!=0||b!=0)return!1;for(u.add(a,!1),a=0;a<g;a++)p=d.Na(a),u.Cb(a,p);return!0},T.Oz=function(){throw m.i.Ie()},T}()}(ye||(ye={})),function(m){var j,T,p;(T=j=m.si||(m.si={}))[T.Clip=0]="Clip",T[T.DontClip=1]="DontClip",T[T.PannableFold=2]="PannableFold",function(h){h[h.Geodesic=0]="Geodesic",h[h.Loxodrome=1]="Loxodrome",h[h.GreatElliptic=2]="GreatElliptic",h[h.NormalSection=3]="NormalSection",h[h.ShapePreserving=4]="ShapePreserving"}(p=m.WK||(m.WK={})),m.zb=function(){function h(){}return h.xv=function(a,u,d){if(d||0<u){for(a=a.toString(m.Sc.PE_STR_NAME_CANON|m.Sc.PE_STR_AUTH_NONE),u=[],d=0;d<a.length;d++)u[d]="a"<=a[d]&&"z">=a[d]?u[d]=a[d].toUpperCase():a[d];return u.join()}return a.toString(m.Sc.PE_STR_AUTH_TOP)},h.ur=function(a,u,d,g){var v=g.length,b=d.I();if(b!=0){var C=d.ub(0),M=Math.min(b,v),O=0,L=a.eh();isNaN(u)&&(u=0);for(var q=a.Wc(),U=179*(a=q?a.sc().Oe().R():0)/360;0<b;){if(C.uB(O<<1,M,g),m.ej.projToGeogCenter(L,M,g,u),q)for(var ee=0;ee<M;ee++){var Q=g[ee][0]-u,ge=m.lc.sign(Q),ve=C.read(2*(O+ee));0>ge*m.lc.sign(ve)&&Math.abs(Q)>U&&(g[ee][0]+=-ge*a)}C.uC(O<<1,M,g),O+=M,b-=M,M=Math.min(b,v)}d.Pc(1993)}},h.IL=function(a,u,d,g){var v=0,b=a.eh();isNaN(v)&&(v=0);var C=a.Wc(),M=a.bf();a=360*M,M*=179;for(var O=g.length,L=0;L<d;){for(var q=L;q<d&&u[q].isNaN();++q)L++;var U=Math.min(O,d-L);if(0<U){q=1;for(var ee=L+1;q<U;++q,++ee)if(u[ee].isNaN()){U=q;break}if(m.ta.Jy(g,u,L,U),m.ej.projToGeogCenter(b,U,g,v),C)for(q=0,ee=L;q<U;++q,++ee){var Q=u[ee].x,ge=g[q][0]-v,ve=m.lc.sign(ge);0>ve*m.lc.sign(Q)&&Math.abs(ge)>M&&(g[q][0]-=ve*a)}m.ta.Iy(u,L,g,U),L+=U}}},h.Lx=function(a,u,d){var g=d.length,v=u.I();if(!(1>v)){var b=u.ub(0),C=Math.min(v,g),M=0,O=a.eh(),L=a.Wc(),q=L?a.Oe().R():0,U=179*q/360,ee=0;for(L&&(ee=a.zi());0<v;){if(b.uB(M<<1,C,d),m.ej.geogToProj(O,C,d),L)for(a=0;a<C;a++){var Q=d[a][0],ge=m.lc.sign(Q),ve=b.read(2*(M+a))-ee;0>ge*m.lc.sign(ve)&&Math.abs(Q)>U&&(d[a][0]+=-ge*q)}b.uC(M<<1,C,d),M+=C,v-=C,C=Math.min(v,g)}u.Pc(1993)}},h.HL=function(a,u,d,g){if(d!=0){var v=a.eh(),b=a.Wc(),C=b?a.Oe().R():0,M=179*C/360,O=0;for(b&&(O=a.zi()),a=0;a<d;){for(var L=a;L<d&&u[L].isNaN();++L)a++;var q=Math.min(g.length,d-a);if(0<q){L=1;for(var U=a+1;L<q;++L,++U)if(u[U].isNaN()){q=L;break}if(m.ta.Jy(g,u,a,q),m.ej.geogToProj(v,q,g),b)for(L=0,U=a;L<q;L++){var ee=g[L][0],Q=m.lc.sign(ee);0>Q*m.lc.sign(u[U].x-O)&&Math.abs(ee)>M&&(g[L][0]-=Q*C)}m.ta.Iy(u,a,g,q),a+=q}}}},h.tr=function(a,u,d,g){var v=u.I();if(v!=0){var b=u.ub(0),C=a.ef,M=a.Yf,O=C.sc().Qp(),L=M.sc().Qp(),q=C.bf(),U=M.bf();if((a=a.Wf)==null||a.count()==0){for(d=O/L,g=(C.Up()-M.Up())*U,L=-90*q,a=90*q,O=!1,U=1,C=2*v;U<C;)q=b.get(U),(M=m.O.Rk(q,L,a))!=q&&(b.set(U,M),O=!0),U+=2;if(g!=0||d!=1)for(O=!0,L=new m.h,U=0;U<v;U++)b.tc(2*U,L),L.x*=d,L.x+=g,L.y*=d,b.Tt(2*U,L);O&&u.Pc(1993)}else{C=g.length,M=Math.min(v,C);var ee=m.O.lg(M),Q=null,ge=0,ve=NaN,fe=NaN,Ce=360*U,Ie=U/q;d&&(fe=90*U,ve=89.9*q,Q=m.O.lg(M));for(var Ne=!0,Ve=0;v!=0;){for(q=!1,b.uB(ge<<1,M,g),U=0;U<M;U++)ee[U]=g[U][0];if(d)for(U=0;U<M;U++){var Xe=Math.abs(g[U][1])-ve;0<Xe&&(q=g[U][1],g[U][1]=m.lc.Cn(ve,q),Q[U]=m.lc.Cn(Xe,q),q=!0)}for(U=g[0][0],a.transform(g,M,O,L),Ne&&(Ve=g[0][0]-Ie*U,Ne=!1),U=0;U<M;U++)Xe=g[U][0]-ee[U]*Ie-Ve,200<Math.abs(Xe)&&(g[U][0]=0<Xe?g[U][0]-Ce:g[U][0]+Ce);if(q){for(U=0;U<M;U++)Q[U]!=0&&(g[U][1]+=Ie*Q[U],g[U][1]>fe?g[U][1]=fe:g[U][1]<-fe&&(g[U][1]=-fe));for(q=0;q<M;q++)Q[q]=0}b.uC(ge<<1,M,g),ge+=M,v-=M,M=Math.min(v,C)}u.Pc(1993)}}},h.GL=function(a,u,d,g){if(a.mw)g=90*a.ef.bf(),m.ta.dK(u,d,-g,g);else{var v=a.Wf,b=a.ef,C=a.Yf;a=b.Xr();var M=C.Xr(),O=b.bf(),L=90*O,q=C.bf();if(v==null||v.count()==0){if(g=a/M,v=(b.Up()-C.Up())*q,m.ta.dK(u,d,-L,L),v!=0||g!=1)for(q=0;q<d;q++)u[q].x*=g,u[q].x+=v,u[q].y*=g}else{b=Math.min(d,g.length),L=m.O.lg(b),C=360*q,O=q/O;for(var U=!0,ee=0,Q=0;d!=0;){for(q=0;q<b;q++)L[q]=u[q+Q].x;for(q=u[0].x,m.ta.Jy(g,u,Q,b),v.transform(g,b,a,M),m.ta.Iy(u,Q,g,b),U&&(ee=u[0].x-O*q,U=!1),q=0;q<b;q++){var ge=u[Q+q].x-L[q]*O-ee;200<Math.abs(ge)&&(u[Q+q].x=0<ge?u[Q+q].x-C:u[Q+q].x+C)}Q+=b,d-=b,b=Math.min(d,g.length)}}}},h.dv=function(a,u){return a=a.gh(),isNaN(u)||a.Ju(u,0),a},h.UQ=function(a,u,d,g,v,b,C,M){for(var O=h.dv(g,v),L=O.R(),q=L/360,U=h.pE*q,ee=a.ub(0),Q=u.Wc(),ge=Q?L/u.Oe().R():0,ve=!1,fe=new m.Da(d.description),Ce=0,Ie=d.da();Ce<Ie;++Ce){var Ne=Q,Ve=new m.Ta(d.description);if(Ve.addPath(d,Ce,!0),C!=0){var Xe=h.PD(!0,Ve,O.H-M,O.H,C);(ve=ve||Xe)&&(Ne=!1)}var et=-1;Ne&&(et=a.Ba(Ce));var dt=Ve.ub(0),ut=Ve.I(),mt=0,lt=dt.read(0),gi=0;Xe=3*g.Xd(0);var oi=!1,Ni=new m.h;Ni.Rc();var Ki=new m.h;Ki.Rc();for(var _s=!1,as=1;as<ut;++as){var $i=m.h.construct(dt.eg(2*as),dt.eg(2*as+1)),ci=$i.x,Kt=ci+mt,Xs=Kt-lt;if($i.x=Kt,Math.abs(Xs)>U){if(Ne){var Ps=et+(as+1<ut?as:0),Qn=ee.read(2*(et+as-1));Ps=(ee.read(2*Ps)-Qn)*ge,Math.abs(Xs-Ps)>1*q&&(Ne=!1)}Ne||(Kt=ci+(mt-=m.lc.Cn(L,Kt-lt)),++gi,_s=mt!=0,$i.x=Kt)}else oi||m.ta.AG(Ki,Ni,$i,Xe)&&(oi=!0);_s&&dt.write(2*as,Kt),lt=Kt,Ki.L(Ni),Ni.L($i)}0<gi&&Ve.Pc(1993),Ne=Ve.Na(0),ut=Ve.Na(ut-1),Ve=m.h.tb(Ne,ut)<Xe?h.uQ(Ve,g,v,b,oi):h.vQ(a,Ce,Ve,g,v),fe.add(Ve,!1)}return v=g.Xd(0),d=O.R()/180,h.Jt(fe,O,.1*v,!1),fe=fe!=(v=m.ri.clip(fe,O,v,d,b)),a=a.Ke(),C=0,0<(M=v.Ke())&&0>a?C=1:0>=M&&0<a&&(M==0?(M=NaN,u.Sb()==2?M=u.ml().Ke():u.Sb()==1&&(M=u.Oe().wF()),a>.99*M&&(C=-1)):C=-1),C!=0&&((u=new m.Da(v.description)).tp(O),(u=m.Xl.local().V(u,d,b)).add(v,!1),fe=!0,v=u),fe&&(v=m.Yl.local().V(v,g,!1,b)),v},h.vQ=function(a,u,d,g,v){var b=d.I(),C=d.Na(0),M=d.Na(b-1);v=(g=h.dv(g,v)).R(),C=m.lc.sign(M.x-C.x);var O=new m.l;d.xc(O);var L=g.gk();if(M=L-v,L+=v,0<=C){var q=Math.ceil((M-O.v)/v);for(q*=v;M>O.v+q;)q+=v;for(;M<O.C+q;)q-=v;var U=q;720<O.R()&&(L=M+360*Math.ceil(O.R()/360))}else{for(q=Math.ceil((L-O.C)/v),q*=v;L<O.C+q;)q-=v;for(;L>O.v+q;)q+=v;U=q,720<O.R()&&(M=L-360*Math.ceil(O.R()/360))}q=C*v;var ee=m.l.construct(O.v,O.G,O.C,O.H);ee.move(U,0);var Q=new m.Dd;Q.gg(U,0),d.Oc(Q),(O=new m.Ta(d.description)).add(d,!1),U=d.Na(b-1),v=0;for(var ge=O.Na(0).x,ve=0;0<C?ee.C<L:ee.v>M;)1024<=ve&&(ve=0),ee.move(q,0),Q.Gb=q,d.Oc(Q),ge+=q,g.v<=ge&&g.C>=ge&&(v=O.I()-1),d.Cb(0,U),U=d.Na(b-1),O.Dr(d,0,0,b-1,!1);return d=new m.Da(O.description),b=0<a.Ir(u),d.add(O,!1),a=O.Na(0),M=O.Na(O.I()-1),u=d.da()-1,(0>C?b:!b)?(C=m.h.construct(M.x,g.H),d.Ci(C),C=m.h.construct(g.gk(),g.H),d.Ci(C),g=m.h.construct(a.x,g.H)):(C=m.h.construct(M.x,g.G),d.Ci(C),C=m.h.construct(g.gk(),g.G),d.Ci(C),g=m.h.construct(a.x,g.G)),d.Ci(g),d.xG(0,u,0),d.kO(v),d},h.uQ=function(a,u,d,g,v){var b=new m.Da(a.description);b.add(a,!1),b.DB(0,b.I()-1);var C=new m.l;b.xc(C);var M=(d=h.dv(u,d)).R(),O=Math.ceil((d.v-C.v)/M);for(O*=M;d.v>C.v+O;)O+=M;for(;d.v<C.C+O;)O-=M;if((O+=M)!=0){C.move(O,0);var L=new m.Dd;L.gg(O,0),b.Oc(L)}if(d.v<=C.v&&d.C>C.C)return v&&(v=b.Ke(),u=(b=m.Yl.local().V(b,u,!0,g)).Ke(),(u=m.lc.sign(v)!=m.lc.sign(u))&&b.oJ()),b;for((a=new m.Da(a.description)).add(b,!1),v=v||C.R()>M-u.Xd(0);C.v<d.C;)C.move(M,0),(L=new m.Dd).gg(M,0),b.Oc(L),a.add(b,!1);return v&&(v=a.Ke(),a.Yo(1),u=(a=m.Yl.local().V(a,u,!0,g)).Ke(),(u=m.lc.sign(v)!=m.lc.sign(u))&&a.oJ()),a},h.PD=function(a,u,d,g,v){for(var b=u.ub(0),C=u.I(),M=!1,O=0;O<C;O++){var L=m.h.construct(b.eg(2*O),b.eg(2*O+1));if(1&v&&L.y>=d){M=!0;break}if(2&v&&L.y<=-d){M=!0;break}}if(!M)return!1;b=!1,a&&(b=u.Nn(0)),C=(a=new m.gd).Ib(u),M=a.Ob(C);var q=-1,U=!0,ee=new m.h;ee.Rc(),O=new m.Sa;for(var Q=-1,ge=a.Xa(M);ge!=-1;ge=a.U(ge)){L=a.Na(ge);var ve=1&v&&90<=L.y?1:0;if(ve|=2&v&&L.y<=-d?2:0,0<q&&q!=ve){if(ee.x!=L.x){ee.x=L.x,a.Vi(a.Ma(ge),O);var fe=a.wj(M,ge,O);a.mf(fe,ee)}if(b)for(Q=Q!=-1?a.U(Q):a.Xa(M),fe=a.Ma(ge);Q!=fe;)Q=a.pd(Q,!1);Q=-1}0<ve&&(L.y=m.lc.Cn(g,L.y),a.mf(ge,L),U||q==ve||(L.x!=ee.x?(a.Vi(ge,O),fe=a.wj(M,ge,O),a.Cb(fe,ee.x,L.y),Q=fe):Q=ge)),q=ve,ee=L,U=!1}if(b){if(Q!=-1)for(Q=a.U(Q);Q!=-1;)Q=a.pd(Q,!1);d=a.Xa(M),a.fq(d,a.rj(M))||(a.Vi(d,O),a.wj(M,-1,O))}return a.Ne(C).copyTo(u),!0},h.Mz=function(a,u,d,g){var v=a;if(v.B()||d==j.DontClip)return v;var b=v.getType();if(b==33)return v=[(g=v).D()],h.yG(v,1,u,d),v[0].isNaN()?g.Oa():g.Cb(v[0]),a;var C=(a=u.sc()).bf(),M=90*C,O=180*C,L=360*C,q=u.zi(),U=.5*C,ee=new m.l;v.A(ee);var Q=u.Vr(),ge=u.PQ(),ve=Q.getType()==197;if(u=new m.l,Q.A(u),d==j.PannableFold&&(d=a.Oe().R(),u.v=q-.5*d,u.C=u.v+d),ee.G<-M||ee.H>M){if(new m.l().K(ee.v-C,-M,ee.C+C,M),(v=m.ri.Nu(v,u,a,NaN,0,g)).B())return v;v.A(ee)}if(ge&&(u.H<ee.G||u.G>ee.H))return v.Ia();if(ee.R()>L&&(v=h.Hp(v,q-O,L,a,!0,0,!0,g)).A(ee),(M=h.eO(ee.v,ee.C,u.v,u.C,L))!=0&&ee.move(M,0),ee.C>u.C||ee.v<u.v){if(ee.C>u.C)for(;ee.v>=u.C;)ee.move(-L,0),M-=L;for(;ee.v<u.C-L;)ee.move(L,0),M+=L}if(d=m.ta.Hu(a,Q),M!=0&&((C=new m.Dd).gg(M,0),v.Oc(C)),ge){if(ve&&u.contains(ee))return v;for(ge=[null,null],M=0;2>M;M++){if(ve?C=m.aa.Hc(b)?m.ri.clip(v,u,d,U,g):m.ri.clip(v,u,d,0,g):(C=m.Xj.local().V(v,Q,a,g))==Q&&(C=m.aa.jg(C)),u.v<=ee.v&&u.C>=ee.C||u.v>=ee.v&&u.C<=ee.C)return C;ge[M]=C,M==0&&(ee.move(-L,0),(C=new m.Dd).gg(-L,0),v.Oc(C))}if(b==550)ge[0].Fd(ge[1],0,-1);else if(m.aa.Hc(b))ge[0].add(ge[1],!1);else{if(b!=33)throw m.i.fa("intersect_with_GCS_horizon: unexpected geometry type");ge[0].B()&&(ge[0]=ge[1])}return ge[0]}if(u.H<ee.G||u.G>ee.H)return v;for(b=0;!v.B()&&ee.C>u.v;)b!=0&&((C=new m.Dd).gg(b,0),v.Oc(C)),m.dj.local().V(4,v,Q,a,g)||Q==(v=m.kp.local().V(v,Q,a,g))&&(v=m.aa.jg(v)),b!=0&&((U=new m.Dd).gg(-b,0),v.Oc(U)),b-=L,ee.move(-L,0);return v},h.yG=function(a,u,d,g){if(u!=0&&g!=j.DontClip)if(g==j.PannableFold){g=d.HR();for(var v=u,b=0;b<u;b++)(a[b].y>g.H||a[b].y<g.G)&&(a[b].Rc(),v--);v!=0&&h.av(a,u,g.v,g.R())}else{var C=90*(g=d.bf()),M=180*g;for(g*=360,v=u,b=0;b<u;b++)(a[b].y>C||a[b].y<-C)&&(a[b].Rc(),v--);if(v!=0){(v=new m.l).Zw(a,u),C=d.Vr();var O=d.hv();b=C.getType()==197;var L=new m.l;if(C.A(L),!O||!(L.H<v.G||L.G>v.H))if(O)if(h.av(a,u,L.gk()-M,g),v=u,b)for(b=0;b<u;b++)L.contains(a[b])||(a[b].Rc(),v--);else for(d=m.ta.Hu(d.sc(),C),b=0;b<u;b++)(M=m.hd.Yd(C,a[b],d)!=0)||(a[b].Rc(),v--);else for(h.av(a,u,-M,g),v=u,d=m.ta.Hu(d.sc(),C),b=0;b<u;b++)(M=a[b]).isNaN()&&v--,O=h.tE(M.x,L.v,L.C,g),M.x+=O,(M=m.hd.Yd(C,M,d)!=0)&&(a[b].Rc(),v--)}}},h.Hp=function(a,u,d,g,v,b,C,M){var O=a.getType(),L=u+d;if(O===33){var q=(g=v?a:a.Of()).Lg();return(q<u||q>=L||C&&q==L)&&(q+=Math.ceil((u-q)/d)*d,q=m.O.Rk(q,u,L),g.cC(q)),g}if(a.B()||(q=new m.l,a.A(q),q.B()))return a;var U=new m.Nc;q.cn(U);var ee=new m.Nc;if(ee.K(u,L),ee.contains(U))return a;if((L=new m.l).K(q),O===550){for(M=(g=v?a:a.Of()).ub(0),O=2*g.I(),L=!1,u=0;u<O;u+=2)((q=M.read(u))<ee.oa||q>=ee.va||C&&q==ee.va)&&(L=!0,q+=Math.ceil((ee.oa-q)/d)*d,q=ee.It(q),M.write(u,q));return L&&g.Pc(1993),g}if(O==197)return d=v?a:a.Of(),q.Ea(L),d.Xo(q),d;var Q=.1*Math.max(q.ca(),q.R());for(L.W(0,Q),C=a,ee=g.Xd(0),a=m.Gh.local(),v=new m.Dd;;){var ge=Math.floor((U.oa-u)/d),ve=Math.ceil((U.va-u)/d);if(!(3<ve-ge))break;ge=Math.floor(.5*(ve+ge)),L.v=q.v-Q,L.C=u+d*ge;var fe=m.ri.clip(C,L,ee,b,M);L.v=L.C,L.C=q.C+Q;var Ce=m.ri.clip(C,L,ee,b,M);v.gg((ge-ve)*d,0),Ce.Oc(v),O==1736?C=a.V(fe,Ce,g,null):(C=fe).add(Ce,!1),C.A(q),q.cn(U)}for(L.v=u,L.C=u+d,(u=new m.l).K(L),u.W(ee,0),(u=Math.floor((q.v-L.v)/d)*d)!=0?(L.move(u,0),v.gg(-u,0)):v.RB(),u=O==1607?new m.Ta(C.description):new m.Da(C.description),b=new m.l,U=new m.l;q.C>L.v;)(Q=m.ri.clip(C,L,ee,0,M)).A(U),(O==1607?!Q.B()&&(U.R()>ee||U.ca()>ee):!Q.B()&&(O!=1736||U.R()>ee))&&(Q.Oc(v),Q.A(U),u.A(b),b.W(ee,ee),b.isIntersecting(U)&&O==1736?u=a.V(u,Q,g,null):u.add(Q,!1)),L.move(d,0),v.shift(-d,0);return u},h.av=function(a,u,d,g){for(var v=d+g,b=0;b<u;b++){var C=a[b].x;d<=C&&C<v||!(C<d||C>v||C==v)||(C+=Math.ceil((d-C)/g)*g,C=m.O.Rk(C,d,v),a[b].x=C)}},h.Fn=function(a,u,d,g,v,b){if(!u.Wc())throw m.i.fa("fold_into_360_degree_range");if(a.B())return a;if(u.Sb()==2){d=u.pv();var C=u.ov()-d}else{var M=u.bf();C=360*M,d-=180*M}return h.Hp(a,d,C,u,g,v,!0,b)},h.qF=function(a,u,d,g){if(d.Sb()==2)g=d.pv(),d=d.ov()-g;else{var v=d.bf();d=360*v,g-=180*v}h.av(a,u,g,d)},h.lj=function(a,u){var d=u.Oe();if(a.getType()==33){var g=a.ih();return d.G<=g&&g<=d.H?a:a.Ia()}g=new m.l,a.A(g);var v=new m.l;return v.K(d),v.v=g.v,v.C=g.C,v.W(.01*v.ca(),0),d=m.ta.uy(u,g),v.contains(g)?a:m.ri.clip(a,v,d,0,null)},h.ir=function(a,u,d){return a>u.C&&a-u.C<d?u.C:a<u.v&&u.v-a<d?u.v:a},h.FX=function(a,u,d,g){g.x=h.ir(a.x,u,d),g.y=a.y},h.EX=function(a,u,d,g){for(var v=0;v<u;v++)a[v].y<d.G||a[v].y>d.H?a[v].Rc():a[v].x=h.ir(a[v].x,d,g)},h.Jt=function(a,u,d,g){if(!a.B()){var v=a.getType();if(!g||v!=1736)if(m.aa.xj(v)){g=a.ub(0),v=0;for(var b=a.I();v<b;v++){var C=g.read(2*v),M=h.ir(C,u,d);M!=C&&g.write(2*v,M)}a.Pc(1993)}else if(v==197)g=new m.l,a.A(g),g.v=h.ir(g.v,u,d),g.C=h.ir(g.C,u,d),a.Xo(g);else{if(v!=33)throw m.i.fa("internal error");a.cC(h.ir(a.Lg(),u,d))}}},h.uS=function(a,u,d,g){var v=new m.gd,b=v.Ib(a);return a=m.ta.Hu(u,a),h.ks(v,b,u,a,d,!0,g),v.Ne(b)},h.ks=function(a,u,d,g,v,b,C){if(!d.Wc())throw m.i.N("invalid call");var M=d.Oe(),O=d.sc(),L=O.eh().getDatum().getSpheroid();O=O.Hd().ai;var q=L.getFlattening();L=L.getAxis(),q*=2-q;var U=new m.Nc;M.cn(U);var ee=null,Q=[[0,0],[0,0]];if(d.Sb()==2?(ee=d.eh(),b?(Q[0][0]=h.Zm(C,U),Q[0][1]=M.Jp(),m.ej.projToGeog(ee,1,Q),M=Q[0][0]*O):(Q[0][0]=M.gk(),Q[0][1]=C,m.ej.projToGeog(ee,1,Q),M=Q[0][1]*O)):M=C*O,!b&&M!=0&&v!=p.GreatElliptic)throw m.i.fa("invalid argument");var ge=new m.ga,ve=[0],fe=new m.h,Ce=new m.h,Ie=new m.h,Ne=[null,null],Ve=new m.h,Xe=new m.h,et=new m.h,dt=new m.h;for(u=a.Ob(u);u!=-1;u=a.Rb(u)){var ut=a.Xa(u);a.D(ut,Ve);for(var mt=!1,lt=ut=a.U(ut);lt!=-1;lt=a.U(lt)){if(lt==ut){if(mt)break;mt=!0}if(a.D(lt,Xe),b&&(g<C-Ve.x&&Xe.x-C>g||g<C-Xe.x&&Ve.x-C>g)||!b&&(C!=0||g<-Ve.y&&Xe.y>g||g<-Xe.y&&Ve.y>g))do if(!(Math.abs(Ve.x-Xe.x)>=.5*U.R())){if(d.Sb()==2?(Q[0][0]=h.Zm(Ve.x,U),Q[0][1]=Ve.y,Q[1][0]=h.Zm(Xe.x,U),Q[1][1]=Xe.y,m.ej.projToGeogCenter(ee,2,Q,0),et.x=Q[0][0]*O,et.y=Q[0][1]*O,dt.y=Q[1][1]*O):(et.x=Ve.x*O,et.y=Ve.y*O,dt.y=Xe.y*O),dt.x=2*(Xe.x-Ve.x)*Math.PI/U.R()+et.x,b){if(Ce.x=M,Ce.y=h.Nz(L,q,et,dt,M,v),isNaN(Ce.y))break;Ne[0]=Ce;var gi=1}else if(v==p.GreatElliptic){var oi=[0,0];if((gi=m.Ox.Oz(q,et,dt,M,oi))==0)break;Ce.x=oi[0],Ce.y=M,Ne[0]=Ce,gi==2&&(Ie.x=oi[1],Ie.y=M,Ne[1]=Ie)}else{if(Ce.x=h.Lz(L,q,et,dt,v),isNaN(Ce.x))break;Ce.y=0,Ne[0]=Ce,gi=1}var Ni=-1;for(oi=0;oi<gi;oi++){m.kb.wd(L,q,et.x,et.y,dt.x,dt.y,ge,null,null,v);var Ki=ge.u;m.kb.wd(L,q,et.x,et.y,Ne[oi].x,Ne[oi].y,ge,null,null,v);var _s=ge.u;if(d.Sb()==2?(Q[0][0]=Ne[oi].x/O,Q[0][1]=Ne[oi].y/O,m.ej.geogToProj(ee,1,Q),b?(fe.y=Q[0][1],fe.x=C):(fe.x=h.os(Q[0][0],Ve.x,Xe.x,U),fe.y=C)):b?(fe.x=C,fe.y=Ne[oi].y/O):(fe.x=h.os(Ne[oi].x/O,Ve.x,Xe.x,U),fe.y=C),ve[0]=0<Ki?m.O.Rk(_s/Ki,0,1):.5,ve[0]==0||ve[0]==1)break;Ni>ve[0]||(Ni=a.Ma(lt),a.Ul(Ni,ve,1),a.Cb(a.U(Ni),fe.x,fe.y),Ni=ve[0])}}while(!1);Ve.L(Xe)}}},h.Zm=function(a,u){var d=u.va-u.oa;return u.It(a-Math.floor((a-u.oa)/d)*d)},h.os=function(a,u,d,g){var v=new m.Nc;for(v.K(u,d),d=g.R(),a=Math.floor((a-u)/d)*d+a,v=v.sf();Math.abs(a-v)>Math.abs(a+d-v);)a+=d;return a},h.Sn=function(a,u,d){return a=m.qr.Cp(a),u=m.qr.mx(a,m.qr.Cp(u)),(d=m.qr.mx(a,m.qr.Cp(d)))==0||0<u&&0<d&&d<=u||0>u&&0>d&&d>=u},h.Nz=function(a,u,d,g,v,b){if(b==p.GreatElliptic)return m.Ox.SS(u,d,g,v);if(Math.abs(d.x-g.x)>=Math.PI||!h.Sn(d.x,g.x,v))return NaN;if(d.x>g.x)var C=g;else C=d,d=g;g=new m.ga;var M=new m.ga,O=new m.ga;m.kb.wd(a,u,C.x,C.y,d.x,d.y,M,g,null,b);var L=M.u,q=0,U=1,ee=new m.h;for(ee.L(C);L*(U-q)>1e-12*a;){var Q=.5*(q+U);if(m.kb.oj(a,u,C.x,C.y,L*Q,g.u,M,O,b),ee.x=M.u,ee.y=O.u,ee.x==v)break;if(h.Sn(C.x,ee.x,v))U=Q;else{if(!h.Sn(d.x,ee.x,v))return NaN;q=Q}}return ee.y},h.Lz=function(a,u,d,g,v){if(v==p.GreatElliptic)return a=[0,0],m.Ox.Oz(u,d,g,0,a),a[0];if(d.y>g.y)var b=g;else b=d,d=g;if((g=new m.Nc).K(b.y,d.y),!g.contains(0)||Math.abs(b.x-d.x)>=Math.PI)return NaN;if(b.x==d.x)return b.x;var C=new m.ga,M=new m.ga,O=new m.ga;m.kb.wd(a,u,b.x,b.y,d.x,d.y,M,C,null,v);var L=M.u,q=0,U=1,ee=new m.h;for(ee.L(b);L*(U-q)>1e-12*a;){var Q=.5*(q+U);if(m.kb.oj(a,u,b.x,b.y,L*Q,C.u,M,O,v),ee.x=M.u,ee.y=O.u,g.K(b.y,ee.y),ee.y==0)break;if(g.contains(0))U=Q;else{if(g.K(d.y,ee.y),!g.contains(0))return NaN;q=Q}}return ee.x},h.WI=function(a,u,d,g){if(!a.ef.Wc())return!1;var v=new m.de(u.description);if(v.Fd(u,0,-1),g=m.Hx.local().V(v,a,g),v=u.I(),d.Oa(),v!=g.I())return!1;var b=new m.l;u.A(b);var C=new m.l;if(g.A(C),b=b.R(),C=C.R(),b!=0&&C!=0){if(C/=b,a=a.Yf.gh().R()/a.ef.gh().R(),1e-10<Math.abs(C/a-1))return!1}else if(b!=0||C!=0)return!1;for(d.add(u,!1),u=new m.h,a=0;a<v;a++)g.D(a,u),d.Cb(a,u);return!0},h.qN=function(a,u){return(a%=360*u)>=180*u&&(a-=360*u),a},h.UI=function(a,u,d,g){if(d==j.Clip){var v=u.ml();v.getType()==197?(d=new m.l,v.A(d),v=m.ta.uy(u,d),a=m.ri.clip(a,d,v,5e4*u.pm(),g)):m.dj.local().V(1,v,a,u,g)||(a=m.Xj.local().V(a,v,u,g))==v&&(a=m.Vk.jg(a))}else u.Wc()&&(g=new m.l,a.xc(g),u.Oe().contains(g)||(h.Jt(a,u.Oe(),u.Xd(0),!0),d==j.PannableFold&&(a=h.lj(a,u)),a=h.Fn(a,u,0,!0,1e5*u.pm(),null)));return a},h.XD=function(a,u,d){var g=u.Wr();if(g==null)return a;var v=(u=u.sc()).Oe().R(),b=new m.l;a.xc(b);var C=new m.Nc;b.cn(C),b=g.Ga(),g=null;for(var M=new m.Dd;b.$a();)for(;b.Ha();){var O=b.ha(),L=O.Tg(0,0),q=new m.Nc;for(q.K(L.oa,L.va),L=0;q.va>C.oa;)q.move(-v),--L;for(;q.oa<=C.va;){if(q.isIntersecting(C)){g==null&&(g=new m.Ta);var U=m.yb.cP(O.ac(),O.wc());L!=0&&(M.gg(L*v,0),U.Oc(M)),g.oc(U,!0)}q.move(v),++L}}return g!=null?(u=m.ta.gO(u,g),u=m.ta.Er(u),m.$t.lP(a,g,u,d)):a},h.eO=function(a,u,d,g,v){return a>=d&&u<=g?0:h.tE(.5*(u+a),d,g,v)},h.tE=function(a,u,d,g){return m.lc.round((.5*(d+u)-a)/g)*g},h.VQ=function(a,u,d,g,v,b,C,M){var O=h.dv(g,v),L=O.R(),q=L/360,U=h.pE*q,ee=a.ub(0),Q=u.Wc(),ge=Q?L/u.Oe().R():0;u=a.Ia();for(var ve=0,fe=d.da();ve<fe;++ve){var Ce=Q,Ie=new m.Ta(d.description);Ie.addPath(d,ve,!0);var Ne=d.dc(ve);C!=0&&(Ne=h.PD(Ne,Ie,O.H-M,O.H,C))&&(Ce=!1);var Ve=-1;Ne=Ie.I();var Xe=!1;Ce&&(Ve=a.Ba(ve),Xe=a.dc(ve));var et=Ie.ub(0),dt=0,ut=et.read(0),mt=0,lt=3*g.Xd(0),gi=!1,oi=new m.h;oi.Rc();var Ni=new m.h;Ni.Rc();for(var Ki=!1,_s=1;_s<Ne;++_s){var as=m.h.construct(et.eg(2*_s),et.eg(2*_s+1)),$i=as.x,ci=$i+dt,Kt=ci-ut;if(as.x=ci,Math.abs(Kt)>U){if(Ce){var Xs=Ve+_s-1,Ps=Ve;(!Xe||_s+1<Ne)&&(Ps+=_s),Xs=ee.read(2*Xs),Ps=(ee.read(2*Ps)-Xs)*ge,Math.abs(Kt-Ps)>1*q&&(Q=!1)}Ce||(ci=$i+(dt-=m.lc.Cn(L,ci-ut)),++mt,Ki=dt!=0,as.x=ci)}else gi||m.ta.AG(oi,Ni,as,lt)&&(gi=!0);Ki&&et.write(2*_s,ci),ut=ci,oi.L(Ni),Ni.L(as)}mt!=0&&Ie.Pc(1993),Ce=Ie.Na(0),Ne=Ie.Na(Ne-1),m.h.tb(Ce,Ne),Ie=h.wQ(Ie,g,isNaN(v)?0:v,b),u.add(Ie,!1)}return a=g.Xd(0),d=O.R()/180,h.Jt(u,O,.1*a,!1),m.ri.clip(u,O,a,d,b)},h.wQ=function(a,u,d,g){return h.Fn(a,u,d,!0,0,g)},h.OS=function(a,u,d,g){var v=a.getType();if(v==1736)for(u=u!=null?u.Xd(0):0,v=0;v<g;v++)m.hd.Yd(a,d[v],u)!=1&&d[v].Rc();else{if(v!=197)throw m.i.N();for(v=0;v<g;v++)a.dP(d[v])||d[v].Rc()}},h.$k=function(a,u,d,g){if(32>d)for(var v=new m.Sa,b=0;b<d;b++)v.Cb(u[b]),a.$k(v,g).D(u[b]);else{var C=new m.de;for(C.re(3),C.HD(u,d),v=C.ub(3),b=0;b<d;b++)v.write(b,b);for(b=a.$k(C,g),a=b.ub(0),v=b.ub(3),g=m.h.construct(NaN,NaN),C=0;C<d;C++)u[C]=g;for(d=b.I(),b=0;b<d;b++)g=v.read(b),a.tc(2*b,u[g])}},h.Zk=function(a,u,d,g){if(32>d)for(var v=new m.Sa,b=0;b<d;b++)v.Cb(u[b]),a.Zk(v,g).D(u[b]);else{var C=new m.de;for(C.re(3),C.HD(u,d),v=C.ub(3),b=0;b<d;b++)v.write(b,b);for(b=a.Zk(C,g),a=b.ub(0),v=b.ub(3),g=m.h.construct(NaN,NaN),C=0;C<d;C++)u[C]=g;for(d=b.I(),b=0;b<d;b++)g=v.read(b),a.tc(2*b,u[g])}},h.pE=210,h}()}(ye||(ye={})),function(m){var j;(j=m.UL||(m.UL={}))[j.rightSide=1]="rightSide";var T=function(){function p(h,a,u){this.Bs=new m.h,h===void 0?this.Io=-1:(this.Bs.L(h),this.Io=a,this.Ka=u,this.nw=0)}return p.prototype.WJ=function(h){this.nw=h?1|this.nw:-2&this.nw},p.prototype.B=function(){return 0>this.Io},p.prototype.fz=function(){if(this.B())throw m.i.fa("invalid call");return new m.Sa(this.Bs.x,this.Bs.y)},p.prototype.Ua=function(){if(this.B())throw m.i.fa("invalid call");return this.Io},p.prototype.hz=function(){if(this.B())throw m.i.fa("invalid call");return this.Ka},p.prototype.Sz=function(){return!!(1&this.nw)},p.prototype.ey=function(h,a,u,d){this.Bs.x=h,this.Bs.y=a,this.Io=u,this.Ka=d},p}();m.$l=T}(ye||(ye={})),function(m){var j=function(){function p(){}return p.prototype.Uo=function(h,a){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,h.xc(this.Ek),this.Ek.W(a,a),this.Ek.isIntersecting(this.Fb.Ca)){var u=h.getType();(this.vs=m.aa.yd(u))?(this.TH=h.ac(),this.SH=h.wc(),this.qa=a):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},p.prototype.Xi=function(h,a){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(h),this.Ek.W(a,a),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},p.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var h=null,a=null,u=null,d=null;this.vs&&(h=new m.h,a=new m.h,u=new m.l);for(var g=!1;!g;){for(;this.tk!=-1;){var v=this.Fb.bz(this.Fb.fv(this.tk));if(v.isIntersecting(this.Ek)){if(!this.vs){g=!0;break}if(h.L(this.TH),a.L(this.SH),u.K(v),u.W(this.qa,this.qa),0<u.zy(h,a)){g=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){v=this.th.Fc();var b=this.Ii[this.Ii.length-1];for(d==null&&((d=[])[0]=new m.l,d[1]=new m.l,d[2]=new m.l,d[3]=new m.l),T.EJ(b,d),this.th.If(),--this.Ii.length,b=0;4>b;b++){var C=this.Fb.Lp(v,b);if(C!=-1&&0<this.Fb.WR(C)&&d[b].isIntersecting(this.Ek))if(this.vs){if(h.L(this.TH),a.L(this.SH),u.K(d[b]),u.W(this.qa,this.qa),0<u.zy(h,a)){var M=new m.l;M.K(d[b]),this.th.add(C),this.Ii.push(M)}}else(M=new m.l).K(d[b]),this.th.add(C),this.Ii.push(M)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},p.bP=function(h,a,u){var d=new p;return d.Fb=h,d.Ek=new m.l,d.th=new m.ia(0),d.Ii=[],d.Uo(a,u),d},p.aP=function(h,a,u){var d=new p;return d.Fb=h,d.Ek=new m.l,d.th=new m.ia(0),d.Ii=[],d.Xi(a,u),d},p.$O=function(h){var a=new p;return a.Fb=h,a.Ek=new m.l,a.th=new m.ia(0),a.Ii=[],a},p}();m.GY=j;var T=function(){function p(h,a){this.jf=new m.$c(11),this.Zh=new m.$c(5),this.ws=[],this.gw=new m.ia(0),this.Ca=new m.l,this.Nk(h,a)}return p.prototype.reset=function(h,a){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(h,a)},p.prototype.vj=function(h,a){return this.zv(h,a,0,this.Ca,this.kf,!1,-1)},p.prototype.Jz=function(h,a,u){u=u==-1?this.kf:this.WF(u);var d=this.ca(u),g=this.oR(u);return this.zv(h,a,d,g,u,!1,-1)},p.prototype.ja=function(h){return this.jR(h)},p.prototype.GF=function(h){return this.bz(this.fv(h))},p.prototype.ca=function(h){return this.jv(h)},p.prototype.oR=function(h){var a=new m.l;a.K(this.Ca);var u=this.jv(h);h=this.QF(h);for(var d=0;d<2*u;d+=2){var g=m.O.truncate(3&h>>d);g==0?(a.v=.5*(a.v+a.C),a.G=.5*(a.G+a.H)):g==1?(a.C=.5*(a.v+a.C),a.G=.5*(a.G+a.H)):(g==2?a.C=.5*(a.v+a.C):a.v=.5*(a.v+a.C),a.H=.5*(a.G+a.H))}return a},p.prototype.WR=function(h){return this.Az(h)},p.prototype.vR=function(h,a){return j.bP(this,h,a)},p.prototype.MF=function(h,a){return j.aP(this,h,a)},p.prototype.getIterator=function(){return j.$O(this)},p.prototype.Nk=function(h,a){if(0>a||32<2*a)throw m.i.N("invalid height");this.BT=a,this.Ca.K(h),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},p.prototype.zv=function(h,a,u,d,g,v,b){if(!d.contains(a))return u==0?-1:this.zv(h,a,0,this.Ca,this.kf,v,b);if(!v)for(var C=g;C!=-1;C=this.IR(C))this.jx(C,this.Az(C)+1);(C=new m.l).K(d),d=g;var M=[];for(M[0]=new m.l,M[1]=new m.l,M[2]=new m.l,M[3]=new m.l;u<this.BT&&this.iO(d);u++){p.EJ(C,M);for(var O=!1,L=0;4>L;L++)if(M[L].contains(a)){O=!0;var q=this.Lp(d,L);q==-1&&(q=this.rP(d,L)),this.jx(q,this.Az(q)+1),d=q,C.K(M[L]);break}if(!O)break}return this.sS(h,a,u,C,d,v,g,b)},p.prototype.sS=function(h,a,u,d,g,v,b,C){var M=this.NF(g);if(v){if(g==b)return C;this.SP(C),v=C}else v=this.tP(),this.NB(v,h),this.KW(this.fv(v),a);return this.mX(v,g),M!=-1?(this.hx(v,M),this.bx(M,v)):this.GJ(g,v),this.SB(g,v),this.ax(g,this.lv(g)+1),this.hO(g)&&this.MQ(u,d,g),v},p.prototype.SP=function(h){var a=this.WF(h),u=this.NF(a),d=this.OR(h),g=this.nv(h);this.Ur(a)==h?(g!=-1?this.hx(g,-1):this.SB(a,-1),this.GJ(a,g)):u==h?(this.bx(d,-1),this.SB(a,d)):(this.hx(g,d),this.bx(d,g)),this.hx(h,-1),this.bx(h,-1),this.ax(a,this.lv(a)-1)},p.EJ=function(h,a){var u=.5*(h.v+h.C),d=.5*(h.G+h.H);a[0].K(u,d,h.C,h.H),a[1].K(h.v,d,u,h.H),a[2].K(h.v,h.G,u,d),a[3].K(u,h.G,h.C,d)},p.prototype.hO=function(h){return this.lv(h)==8&&!this.gG(h)},p.prototype.MQ=function(h,a,u){var d=this.Ur(u);do{var g=this.fv(d),v=this.Zh.T(d,0);g=this.bz(g),this.zv(v,g,h,a,u,!0,d),d=v=this.nv(d)}while(d!=-1)},p.prototype.iO=function(h){return 8<=this.lv(h)||this.gG(h)},p.prototype.gG=function(h){return this.Lp(h,0)!=-1||this.Lp(h,1)!=-1||this.Lp(h,2)!=-1||this.Lp(h,3)!=-1},p.prototype.rP=function(h,a){var u=this.jf.Ce();return this.OW(h,a,u),this.jx(u,0),this.ax(u,0),this.Pk(u,h),this.KJ(u,this.jv(h)+1),this.NJ(u,a<<2*this.jv(h)|this.QF(h)),u},p.prototype.tP=function(){var h=this.Zh.Ce();if(0<this.gw.size){var a=this.gw.Fc();this.gw.If()}else a=this.ws.length,this.ws.push(new m.l);return this.LW(h,a),h},p.prototype.Lp=function(h,a){return this.jf.T(h,a)},p.prototype.OW=function(h,a,u){this.jf.S(h,a,u)},p.prototype.Ur=function(h){return this.jf.T(h,4)},p.prototype.GJ=function(h,a){this.jf.S(h,4,a)},p.prototype.NF=function(h){return this.jf.T(h,5)},p.prototype.SB=function(h,a){this.jf.S(h,5,a)},p.prototype.QF=function(h){return this.jf.T(h,6)},p.prototype.NJ=function(h,a){this.jf.S(h,6,a)},p.prototype.lv=function(h){return this.jf.T(h,7)},p.prototype.Az=function(h){return this.jf.T(h,8)},p.prototype.ax=function(h,a){this.jf.S(h,7,a)},p.prototype.jx=function(h,a){this.jf.S(h,8,a)},p.prototype.IR=function(h){return this.jf.T(h,9)},p.prototype.Pk=function(h,a){this.jf.S(h,9,a)},p.prototype.jv=function(h){return this.jf.T(h,10)},p.prototype.KJ=function(h,a){this.jf.S(h,10,a)},p.prototype.jR=function(h){return this.Zh.T(h,0)},p.prototype.NB=function(h,a){this.Zh.S(h,0,a)},p.prototype.OR=function(h){return this.Zh.T(h,1)},p.prototype.nv=function(h){return this.Zh.T(h,2)},p.prototype.hx=function(h,a){this.Zh.S(h,1,a)},p.prototype.bx=function(h,a){this.Zh.S(h,2,a)},p.prototype.WF=function(h){return this.Zh.T(h,3)},p.prototype.mX=function(h,a){this.Zh.S(h,3,a)},p.prototype.fv=function(h){return this.Zh.T(h,4)},p.prototype.LW=function(h,a){this.Zh.S(h,4,a)},p.prototype.bz=function(h){return this.ws[h]},p.prototype.KW=function(h,a){this.ws[h].K(a)},p}();m.du=T}(ye||(ye={})),function(m){var j;(j=m.aL||(m.aL={}))[j.Outside=0]="Outside",j[j.Inside=1]="Inside",j[j.Border=2]="Border";var T=function(){function h(a,u){this.PT=u,this.Vh=a}return h.prototype.setColor=function(a,u){this.iH!=u&&a.flush(),this.iH=u},h.prototype.gF=function(a,u){for(var d=0;d<u;)for(var g=a[d++],v=a[d++],b=a[d++]*this.PT;g<v;g++)this.Vh[b+(g>>4)]|=this.iH<<2*(15&g)},h}();m.HY=T;var p=function(){function h(a,u,d){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(a,u,d)}return h.create=function(a,u,d){if(!h.zE(a))throw m.i.N();return h.wP(a,u,d)},h.pW=function(a){switch(a){case 0:a=1024;break;case 1:a=16384;break;case 2:a=262144;break;default:throw m.i.fa("Internal Error")}return a},h.zE=function(a){return!(a.B()||a.getType()!=1607&&a.getType()!=1736)},h.prototype.rQ=function(a,u){u=u.Ga();for(var d=new m.h,g=new m.h;u.$a();)for(;u.Ha();){var v=u.ha();if(v.getType()!=322)throw m.i.fa("Internal Error");a.Eh(v.ac(),d),a.Eh(v.wc(),g),this.Ri.jy(d.x,d.y,g.x,g.y)}this.Ri.iJ(m.Px.Cx)},h.prototype.sQ=function(){throw m.i.fa("Internal Error")},h.prototype.Ry=function(a,u){for(var d=1;4>d;d++)a.jy(u[d-1].x,u[d-1].y,u[d].x,u[d].y);a.jy(u[3].x,u[3].y,u[0].x,u[0].y),this.Ri.iJ(m.Px.Cx)},h.prototype.rK=function(a,u,d){for(var g=[null,null,null,null],v=0;v<g.length;v++)g[v]=new m.h;u=u.Ga(),d=this.Jk.dY(d)+1.5,v=new m.h;for(var b=new m.h,C=new m.h,M=new m.h,O=new m.h,L=new m.l,q=new m.h;u.$a();){var U=!1,ee=!0;for(q.ma(0,0);u.Ha();){var Q=u.ha();if(M.x=Q.sa,M.y=Q.na,O.x=Q.pa,O.y=Q.la,L.Oa(),L.Zb(M.x,M.y),L.Lk(O.x,O.y),this.vl.HG(L)){this.Jk.Eh(O,O),ee?(this.Jk.Eh(M,M),q.L(M),ee=!1):M.L(q),v.uc(O,M);var ge=.5>(Q=v.length());Q==0?v.ma(1,0):(ge||q.L(O),v.scale(d/Q),b.ma(-v.y,v.x),C.ma(v.y,-v.x),M.sub(v),O.add(v),g[0].add(M,b),g[1].add(M,C),g[2].add(O,C),g[3].add(O,b),ge?U=!0:this.Ry(a,g))}else U&&(this.Ry(a,g),U=!1),ee=!0}U&&this.Ry(a,g)}},h.prototype.sC=function(a){return m.O.truncate(a*this.qH+this.aI)},h.prototype.tC=function(a){return m.O.truncate(a*this.Es+this.cI)},h.wP=function(a,u,d){return new h(a,u,d)},h.prototype.Fz=function(a,u,d){this.Gf=Math.max(m.O.truncate(2*Math.sqrt(d)+.5),64),this.Um=m.O.truncate((2*this.Gf+31)/32),this.vl=new m.l,this.Ik=u,d=0;for(var g=this.Gf,v=this.Um;8<=g;)d+=g*v,g=m.O.truncate(g/2),v=m.O.truncate((2*g+31)/32);this.Vh=m.O.lg(d,0),this.Ri=new m.Px,d=new T(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,d),a.A(this.vl),this.vl.W(u,u),g=new m.l;var b=u*(v=m.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(u*=v.ca(),g.K(this.vl.sf(),Math.max(b,this.vl.R()),Math.max(u,this.vl.ca())),this.SA=this.Ik,this.Jk=new m.Dd,this.Jk.pS(g,v),new m.Dd,a.getType()){case 550:d.setColor(this.Ri,2),this.sQ();break;case 1607:d.setColor(this.Ri,2),this.rK(this.Ri,a,this.SA);break;case 1736:d.setColor(this.Ri,1),this.rQ(this.Jk,a),d.setColor(this.Ri,2),this.rK(this.Ri,a,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},h.prototype.XN=function(){this.Ri.flush();for(var a=0,u=this.Gf*this.Um,d=this.Gf,g=m.O.truncate(this.Gf/2),v=this.Um,b=m.O.truncate((2*g+31)/32);8<d;){for(d=0;d<g;d++)for(var C=2*d,M=2*d+1,O=0;O<g;O++){var L=2*O,q=2*O+1,U=L>>4;L=2*(15&L);var ee=q>>4;q=2*(15&q);var Q=this.Vh[a+v*C+U]>>L&3;Q|=this.Vh[a+v*C+ee]>>q&3,Q|=this.Vh[a+v*M+U]>>L&3,Q|=this.Vh[a+v*M+ee]>>q&3,this.Vh[u+b*d+(O>>4)]|=Q<<2*(15&O)}d=g,v=b,a=u,g=m.O.truncate(d/2),b=m.O.truncate((2*g+31)/32),u=a+v*d}},h.prototype.So=function(a,u){return this.vl.contains(a,u)?(a=this.sC(a),u=this.tC(u),0>a||a>=this.Gf||0>u||u>=this.Gf||(u=this.Vh[this.Um*u+(a>>4)]>>2*(15&a)&3)==0?0:u==1?1:2):0},h.prototype.Ro=function(a){if(!a.Ea(this.vl))return 0;var u=this.sC(a.v),d=this.sC(a.C),g=this.tC(a.G);if(a=this.tC(a.H),0>u&&(u=0),0>g&&(g=0),d>=this.Gf&&(d=this.Gf-1),a>=this.Gf&&(a=this.Gf-1),u>d||g>a)return 0;for(var v=Math.max(d-u,1)*Math.max(a-g,1),b=0,C=this.Um,M=this.Gf,O=0;;){if(32>v||16>M){for(v=g;v<=a;v++)for(var L=u;L<=d;L++)if(1<(O=this.Vh[b+C*v+(L>>4)]>>2*(15&L)&3))return 2;if(O==0)return 0;if(O==1)return 1}b+=C*M,M=m.O.truncate(M/2),C=m.O.truncate((2*M+31)/32),u=m.O.truncate(u/2),g=m.O.truncate(g/2),d=m.O.truncate(d/2),a=m.O.truncate(a/2),v=Math.max(d-u,1)*Math.max(a-g,1)}},h.prototype.RR=function(){return this.Gf*this.Um},h}();m.Nx=p}(ye||(ye={})),function(m){var j;(j=m.VL||(m.VL={}))[j.contains=1]="contains",j[j.within=2]="within",j[j.equals=3]="equals",j[j.disjoint=4]="disjoint",j[j.touches=8]="touches",j[j.crosses=16]="crosses",j[j.overlaps=32]="overlaps",j[j.unknown=0]="unknown",j[j.intersects=1073741824]="intersects";var T=function(){function h(){}return h.construct=function(a,u,d,g,v,b,C,M){var O=new h;return O.pw=a,O.Mm=u,O.Kj=d,O.Si=g,O.BH=v,O.SY=b,O.TY=C,O.UY=M,O},h}();m.Vt=function(){function h(){}return h.CD=function(a,u,d){if(h.wy(a)){var g=m.ta.kj(u,a,!1);u=!1,m.Uk.CE(a)&&(u=u||a.lu(g,d)),(g=a.getType())!=1736&&g!=1607||!m.Uk.AE(a)||d==0||(u=u||a.fj(d)),g!=1736&&g!=1607||!m.Uk.BE(a)||d==0||u||a.hM()}},h.wy=function(a){return m.Uk.CE(a)||m.Uk.AE(a)||m.Uk.BE(a)},h}();var p=function(){function h(){this.rh=[]}return h.zB=function(a,u,d,g,v){var b=a.getType(),C=u.getType();if(b==197){if(C==197)return h.tW(a,u,d,g);if(C==33)return g==2?g=1:g==1&&(g=2),h.hJ(u,a,d,g)}else if(b==33){if(C==197)return h.hJ(a,u,d,g);if(C==33)return h.vW(a,u,d,g)}if(a.B()||u.B())return g==4;var M=new m.l;a.A(M);var O=new m.l;u.A(O);var L=new m.l;if(L.K(M),L.Zb(O),d=m.ta.Wd(d,L,!1),h.dk(M,O,d))return g==4;switch(M=!1,m.Vk.yd(b)&&((b=new m.Ta(a.description)).oc(a,!0),a=b,b=1607),m.Vk.yd(C)&&((C=new m.Ta(u.description)).oc(u,!0),u=C,C=1607),b!=197&&C!=197?(a.Db()<u.Db()||b==33&&C==550)&&(g==2?g=1:g==1&&(g=2)):b!=1736&&C!=197&&(g==2?g=1:g==1&&(g=2)),b){case 1736:switch(C){case 1736:M=h.rt(a,u,d,g,v);break;case 1607:M=h.$m(a,u,d,g,v);break;case 33:M=h.qt(a,u,d,g);break;case 550:M=h.pt(a,u,d,g,v);break;case 197:M=h.GI(a,u,d,g,v)}break;case 1607:switch(C){case 1736:M=h.$m(u,a,d,g,v);break;case 1607:M=h.gB(a,u,d,g,v);break;case 33:M=h.tt(a,u,d,g,v);break;case 550:M=h.st(a,u,d,g,v);break;case 197:M=h.MI(a,u,d,g)}break;case 33:switch(C){case 1736:M=h.qt(u,a,d,g);break;case 1607:M=h.tt(u,a,d,g,v);break;case 550:M=h.lt(u,a,d,g)}break;case 550:switch(C){case 1736:M=h.pt(u,a,d,g,v);break;case 1607:M=h.st(u,a,d,g,v);break;case 550:M=h.ZA(a,u,d,g,v);break;case 33:M=h.lt(a,u,d,g);break;case 197:M=h.hI(a,u,d,g)}break;case 197:switch(C){case 1736:M=h.GI(u,a,d,g,v);break;case 1607:M=h.MI(u,a,d,g);break;case 550:M=h.hI(u,a,d,g)}}return M},h.tW=function(a,u,d,g){if(a.B()||u.B())return g==4;var v=new m.l,b=new m.l,C=new m.l;switch(a.A(v),u.A(b),C.K(v),C.Zb(b),a=m.ta.Wd(d,C,!1),g){case 4:return h.dk(v,b,a);case 2:return h.jF(b,v,a);case 1:return h.jF(v,b,a);case 3:return h.ek(v,b,a);case 8:return h.cQ(v,b,a);case 32:return h.bQ(v,b,a);case 16:return h.aQ(v,b,a)}return!1},h.hJ=function(a,u,d,g){if(a.B()||u.B())return g==4;a=a.D();var v=new m.l,b=new m.l;switch(u.A(v),b.K(a),b.Zb(v),u=m.ta.Wd(d,b,!1),g){case 4:return h.Rw(a,v,u);case 2:return h.eB(a,v,u);case 1:return h.RU(a,v,u);case 3:return h.vI(a,v,u);case 8:return h.dB(a,v,u)}return!1},h.vW=function(a,u,d,g){if(a.B()||u.B())return g==4;a=a.D(),u=u.D();var v=new m.l;switch(v.K(a),v.Zb(u),d=m.ta.Wd(d,v,!1),g){case 4:return h.SU(a,u,d);case 2:return h.uI(u,a,d);case 1:return h.uI(a,u,d);case 3:return h.wI(a,u,d)}return!1},h.rt=function(a,u,d,g,v){switch(g){case 4:return h.kV(a,u,d);case 2:return h.Sw(u,a,d,v);case 1:return h.Sw(a,u,d,v);case 3:return h.nV(a,u,d);case 8:return h.vV(a,u,d);case 32:return h.qV(a,u,d,v)}return!1},h.$m=function(a,u,d,g,v){switch(g){case 4:return h.lV(a,u,d);case 1:return h.fB(a,u,d,v);case 8:return h.wV(a,u,d,v);case 16:return h.gV(a,u,d)}return!1},h.qt=function(a,u,d,g){switch(g){case 4:return h.jV(a,u,d);case 1:return h.dV(a,u,d);case 8:return h.uV(a,u,d)}return!1},h.pt=function(a,u,d,g){switch(g){case 4:return h.iV(a,u,d);case 1:return h.cV(a,u,d);case 8:return h.tV(a,u,d);case 16:return h.fV(a,u,d)}return!1},h.GI=function(a,u,d,g,v){if(h.hV(a,u,d))return g==4;if(g==4)return!1;switch(g){case 2:return h.xV(a,u,d);case 1:return h.bV(a,u,d);case 3:return h.mV(a,u,d);case 8:return h.sV(a,u,d,v);case 32:return h.pV(a,u,d,v);case 16:return h.eV(a,u,d,v)}return!1},h.gB=function(a,u,d,g){switch(g){case 4:return h.GV(a,u,d);case 2:return h.KI(u,a,d);case 1:return h.KI(a,u,d);case 3:return h.IV(a,u,d);case 8:return h.NI(a,u,d);case 32:return h.MV(a,u,d);case 16:return h.LI(a,u,d)}return!1},h.tt=function(a,u,d,g){switch(g){case 4:return h.FV(a,u,d);case 1:return h.AV(a,u,d);case 8:return h.QV(a,u,d)}return!1},h.st=function(a,u,d,g){switch(g){case 4:return h.EV(a,u,d);case 1:return h.zV(a,u,d);case 8:return h.PV(a,u,d);case 16:return h.CV(a,u,d)}return!1},h.MI=function(a,u,d,g){if(h.DV(a,u,d))return g==4;if(g==4)return!1;switch(g){case 2:return h.RV(a,u,d);case 1:return h.yV(a,u,d);case 3:return h.HV(a,u,d);case 8:return h.OV(a,u,d);case 32:return h.LV(a,u,d);case 16:return h.BV(a,u,d)}return!1},h.ZA=function(a,u,d,g){switch(g){case 4:return h.gU(a,u,d);case 2:return h.eI(u,a,d);case 1:return h.eI(a,u,d);case 3:return h.iU(a,u,d);case 32:return h.oU(a,u,d)}return!1},h.lt=function(a,u,d,g){switch(g){case 4:return h.fI(a,u,d);case 2:return h.sU(a,u,d);case 1:return h.dU(a,u,d);case 3:return h.Nw(a,u,d)}return!1},h.hI=function(a,u,d,g){switch(g){case 4:return h.fU(a,u,d);case 2:return h.rU(a,u,d);case 1:return h.cU(a,u,d);case 3:return h.hU(a,u,d);case 8:return h.qU(a,u,d);case 16:return h.eU(a,u,d)}return!1},h.nV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.ek(g,v,d)&&(g=h.qc(a,u,!1))!=4&&g!=1&&g!=2&&(!!h.dI(a,u,d)||(g=a.Qb(),v=u.Qb(),!(Math.abs(g-v)>4*Math.max(a.I(),u.I())*d)&&h.Wz(a,u,d,!0)))},h.kV=function(a,u,d){var g=h.qc(a,u,!0);return g==4||g!=1&&g!=2&&g!=1073741824&&h.EI(a,u,d)},h.vV=function(a,u,d){var g=h.qc(a,u,!1);return g!=4&&g!=1&&g!=2&&h.II(a,u,d,null)},h.qV=function(a,u,d,g){var v=h.qc(a,u,!1);return v!=4&&v!=1&&v!=2&&h.FI(a,u,d,g)},h.Sw=function(a,u,d,g){var v=new m.l,b=new m.l;return a.A(v),u.A(b),!!h.zc(v,b,d)&&(v=h.qc(a,u,!1))!=4&&v!=2&&(v==1||h.BI(a,u,d,g))},h.lV=function(a,u,d){var g=h.qc(a,u,!0);return g==4||g!=1&&g!=1073741824&&h.EI(a,u,d)},h.wV=function(a,u,d,g){var v=h.qc(a,u,!1);return v!=4&&v!=1&&h.JI(a,u,d,g)},h.gV=function(a,u,d){var g=h.qc(a,u,!1);return g!=4&&g!=1&&h.DI(a,u,d,null)},h.fB=function(a,u,d,g){var v=new m.l,b=new m.l;return a.A(v),u.A(b),!!h.zc(v,b,d)&&(v=h.qc(a,u,!1))!=4&&(v==1||h.CI(a,u,d,g))},h.jV=function(a,u,d){return m.hd.KG(a,u,d)==0},h.uV=function(a,u,d){return u=u.D(),h.HI(a,u,d)},h.dV=function(a,u,d){return u=u.D(),h.AI(a,u,d)},h.iV=function(a,u,d){var g=h.qc(a,u,!1);if(g==4)return!0;if(g==1)return!1;g=new m.l,a.A(g),g.W(d,d);for(var v=new m.h,b=0;b<u.I();b++)if(u.D(b,v),g.contains(v)){var C=m.hd.Yd(a,v,d);if(C==1||C==2)return!1}return!0},h.tV=function(a,u,d){var g=this.qc(a,u,!1);if(g==4||g==1)return!1;g=new m.l,a.A(g),g.W(d,d);for(var v=!1,b=a,C=!1,M=0;M<u.I();M++){var O=u.Na(M);if(g.contains(O)){if((O=m.hd.Yd(b,O,d))==2)v=!0;else if(O==1)return!1}C||(!m.Dg.Ml(a,u.I()-1)||a.Bb!=null&&a.Bb.Fb!=null?b=a:(b=new m.Da,a.copyTo(b),b.fj(1)),C=!0)}return!!v},h.fV=function(a,u,d){var g=this.qc(a,u,!1);if(g==4||g==1)return!1;var v=new m.l;g=new m.l;var b=new m.l;a.A(v),u.A(b),g.K(v),g.W(d,d),b=v=!1;for(var C=a,M=!1,O=0;O<u.I();O++){var L=u.Na(O);if(g.contains(L)?(L=m.hd.Yd(C,L,d))==0?b=!0:L==1&&(v=!0):b=!0,v&&b)return!0;M||(!m.Dg.Ml(a,u.I()-1)||a.Bb!=null&&a.Bb.Fb!=null?C=a:(C=new m.Da,a.copyTo(C),C.fj(1)),M=!0)}return!1},h.cV=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),!this.zc(g,v,d)||(v=this.qc(a,u,!1))==4)return!1;if(v==1)return!0;v=!1;for(var b=a,C=!1,M=0;M<u.I();M++){var O=u.Na(M);if(!g.contains(O))return!1;if((O=m.hd.Yd(b,O,d))==1)v=!0;else if(O==0)return!1;C||(!m.Dg.Ml(a,u.I()-1)||a.Bb!=null&&a.Bb.Fb!=null?b=a:(b=new m.Da,a.copyTo(b),b.fj(1)),C=!0)}return v},h.mV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.ek(g,v,d)&&((g=new m.Da).ad(u,!1),h.Wz(a,g,d,!0))},h.hV=function(a,u,d){var g=h.qc(a,u,!1);if(g==4)return!0;if(g==1||g==2)return!1;var v=new m.l;if(g=new m.l,a.A(v),u.A(g),h.zc(g,v,d)||(v=new m.h,g.dn(v),(u=m.hd.Yd(a,v,d))!=0)||(g.$I(v),(u=m.hd.Yd(a,v,d))!=0)||(g.en(v),(u=m.hd.Yd(a,v,d))!=0)||(g.cJ(v),(u=m.hd.Yd(a,v,d))!=0))return!1;u=a.ub(0),(v=new m.l).K(g),v.W(d,d);for(var b=0,C=a.I();b<C;b++){var M=u.read(2*b),O=u.read(2*b+1);if(v.contains(M,O))return!1}return!h.TG(a,g,d)},h.sV=function(a,u,d,g){var v=h.qc(a,u,!1);if(v==4||v==1||v==2)return!1;v=new m.l;var b=new m.l;return a.A(v),u.A(b),!h.zc(b,v,d)&&(b.R()<=d&&b.ca()<=d?(u=u.Ip(),h.HI(a,u,d)):b.R()<=d||b.ca()<=d?(v=new m.Ta,b=new m.Sa,u.Hf(0,b),v.nf(b),u.Hf(2,b),v.lineTo(b),h.JI(a,v,d,g)):((v=new m.Da).ad(u,!1),h.II(a,v,d,g)))},h.pV=function(a,u,d,g){var v=h.qc(a,u,!1);if(v==4||v==1||v==2)return!1;v=new m.l;var b=new m.l;return a.A(v),u.A(b),!(h.zc(b,v,d)||b.R()<=d||b.ca()<=d)&&((v=new m.Da).ad(u,!1),h.FI(a,v,d,g))},h.xV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),h.zc(v,g,d)},h.bV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.zc(g,v,d)&&(g=h.qc(a,u,!1))!=4&&g!=2&&(g==1||(v.R()<=d&&v.ca()<=d?(u=u.Ip(),h.AI(a,u,d)):v.R()<=d||v.ca()<=d?(v=new m.Ta,g=new m.Sa,u.Hf(0,g),v.nf(g),u.Hf(2,g),v.lineTo(g),h.CI(a,v,d,null)):((v=new m.Da).ad(u,!1),h.BI(a,v,d,null))))},h.eV=function(a,u,d,g){var v=new m.l,b=new m.l;return a.A(v),u.A(b),!(h.zc(b,v,d)||b.ca()>d&&b.R()>d||b.ca()<=d&&b.R()<=d)&&(v=new m.Ta,b=new m.Sa,u.Hf(0,b),v.nf(b),u.Hf(2,b),v.lineTo(b),h.DI(a,v,d,g))},h.IV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(!h.ek(g,v,d)||h.qc(a,u,!1)==4)&&(!!h.dI(a,u,d)||h.Wz(a,u,d,!1))},h.GV=function(a,u,d){return this.qc(a,u,!1)==4||!!new m.Zl(a,u,d,!0).next()&&!this.UG(a,u,d)},h.NI=function(a,u,d){if(h.qc(a,u,!1)==4)return!1;var g=new m.be(0);if(h.Xz(a,u,d,g)!=0)return!1;for(var v=new m.de,b=0;b<g.size;b+=2){var C=g.read(b),M=g.read(b+1);v.Bu(C,M)}return a=a.mg(),u=u.mg(),a.Fd(u,0,u.I()),h.Mw(a,v,d)},h.LI=function(a,u,d){if(h.qc(a,u,!1)==4)return!1;var g=new m.be(0);if(h.Xz(a,u,d,g)!=0)return!1;for(var v=new m.de,b=0;b<g.size;b+=2){var C=g.read(b),M=g.read(b+1);v.Bu(C,M)}return a=a.mg(),u=u.mg(),a.Fd(u,0,u.I()),!h.Mw(a,v,d)},h.MV=function(a,u,d){return h.qc(a,u,!1)!=4&&h.WG(a,u,d)},h.KI=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(!h.zc(g,v,d)||h.qc(a,u,!1)==4)&&h.ym(u,a,d,!1)},h.FV=function(a,u,d){return h.qc(a,u,!1)==4||(u=u.D(),!h.Yz(a,u,d))},h.QV=function(a,u,d){return h.qc(a,u,!1)!=4&&(u=u.D(),h.Zz(a,u,d))},h.AV=function(a,u,d){return h.qc(a,u,!1)!=4&&(u=u.D(),h.SG(a,u,d))},h.EV=function(a,u,d){return h.qc(a,u,!1)==4||!h.VG(a,u,d,!1)},h.PV=function(a,u,d){if(this.qc(a,u,!1)==4)return!1;var g=a.Ga(),v=new m.l,b=new m.l,C=new m.l;a.A(v),u.A(b),v.W(d,d),b.W(d,d),C.K(v),C.Ea(b),v=null;var M=a.Bb;if(M!=null){var O=M.Fb;v=M.zo,O==null&&(O=M=m.ta.jj(a,C))}else O=M=m.ta.jj(a,C);var L=O.getIterator(),q=null;v!=null&&(q=v.getIterator());var U=new m.h,ee=new m.h,Q=!1,ge=d*d;for(v=new m.pn(u.I()),M=0;M<u.I();M++)v.write(M,0);for(M=0;M<u.I();M++)if(u.D(M,U),C.contains(U)){if(b.K(U.x,U.y,U.x,U.y),q!=null&&(q.Xi(b,d),q.next()==-1))continue;L.Xi(b,d);for(var ve=L.next();ve!=-1;ve=L.next())if(g.Vb(O.ja(ve)),(ve=g.ha()).hc(ve.fe(U,!1),ee),m.h.yc(U,ee)<=ge){v.write(M,1),Q=!0;break}}if(!Q)return!1;for(a=a.mg(),g=new m.de,b=new m.h,M=0;M<u.I();M++)v.read(M)!=0&&(u.D(M,b),g.Bu(b.x,b.y));return this.Mw(a,g,d)},h.CV=function(a,u,d){if(this.qc(a,u,!1)==4)return!1;var g=a.Ga(),v=new m.l,b=new m.l,C=new m.l;a.A(v),u.A(b),v.W(d,d),b.W(d,d),C.K(v),C.Ea(b),v=null;var M=a.Bb;if(M!=null){var O=M.Fb;v=M.zo,O==null&&(O=M=m.ta.jj(a,C))}else O=M=m.ta.jj(a,C);var L=O.getIterator(),q=null;v!=null&&(q=v.getIterator());var U=new m.h,ee=new m.h,Q=!1,ge=!1,ve=d*d;for(v=new m.pn(u.I()),M=0;M<u.I();M++)v.write(M,0);for(M=0;M<u.I();M++)if(u.D(M,U),C.contains(U)){if(b.K(U.x,U.y,U.x,U.y),q!=null&&(q.Xi(b,d),q.next()==-1)){ge=!0;continue}L.Xi(b,d);for(var fe=!1,Ce=L.next();Ce!=-1;Ce=L.next())if(g.Vb(O.ja(Ce)),(Ce=g.ha()).hc(Ce.fe(U,!1),ee),m.h.yc(U,ee)<=ve){v.write(M,1),fe=Q=!0;break}fe||(ge=!0)}else ge=!0;if(!Q||!ge)return!1;for(a=a.mg(),g=new m.de,b=new m.h,M=0;M<u.I();M++)v.read(M)!=0&&(u.D(M,b),g.Bu(b.x,b.y));return!this.Mw(a,g,d)},h.zV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(!h.zc(g,v,d)||h.qc(a,u,!1)==4||!h.VG(a,u,d,!0))&&(a=a.mg(),!h.gI(a,u,d))},h.HV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(v.ca()>d&&v.R()>d)&&h.ek(g,v,d)},h.DV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!h.zc(v,g,d)&&!h.TG(a,v,d)},h.OV=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),v.ca()<=d&&v.R()<=d)return v=u.Ip(),h.Zz(a,v,d);if(v.ca()<=d||v.R()<=d)return v=new m.Ta,g=new m.Sa,u.Hf(0,g),v.nf(g),u.Hf(2,g),v.lineTo(g),h.NI(a,v,d);a=a.Ga(),u=new m.l,g=new m.l,u.K(v),g.K(v),u.W(-d,-d),g.W(d,d),v=!1;for(var b=new m.l,C=new m.l;a.$a();)for(;a.Ha();){if(a.ha().A(b),C.K(u),C.Ea(b),!C.B()&&(C.ca()>d||C.R()>d))return!1;C.K(g),C.Ea(b),C.B()||(v=!0)}return v},h.LV=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(h.zc(g,v,d)||h.zc(v,g,d)||h.zc(v,g,d)||v.ca()>d&&v.R()>d||v.ca()<=d&&v.R()<=d)&&(g=new m.Ta,v=new m.Sa,u.Hf(0,v),g.nf(v),u.Hf(2,v),g.lineTo(v),h.WG(a,g,d))},h.RV=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),!h.zc(v,g,d)||v.ca()<=d&&v.R()<=d)return!1;if(v.ca()<=d||v.R()<=d)return h.zc(v,g,d);a=a.Ga(),(u=new m.l).K(v),u.W(-d,-d),v=!1,g=new m.l;for(var b=new m.l;a.$a();)for(;a.Ha();)a.ha().A(g),u.hm(g)?v=!0:(b.K(u),b.Ea(g),!b.B()&&(b.ca()>d||b.R()>d)&&(v=!0));return v},h.yV=function(a,u,d){var g=new m.l,v=new m.l;return u.A(v),a.A(g),!(!h.zc(g,v,d)||v.ca()>d&&v.R()>d)&&(v.ca()<=d&&v.R()<=d?(u=u.Ip(),h.SG(a,u,d)):(g=new m.Ta,v=new m.Sa,u.Hf(0,v),g.nf(v),u.Hf(2,v),g.lineTo(v),h.ym(g,a,d,!1)))},h.BV=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),h.zc(v,g,d)||v.ca()<=d&&v.R()<=d)return!1;if(v.ca()<=d||v.R()<=d)return g=new m.Ta,v=new m.Sa,u.Hf(0,v),g.nf(v),u.Hf(2,v),g.lineTo(v),h.LI(a,g,d);a=a.Ga(),u=new m.l,(g=new m.l).K(v),u.K(v),g.W(-d,-d),u.W(d,d);for(var b=v=!1,C=new m.l,M=new m.l;a.$a();)for(;a.Ha();)if(a.ha().A(C),b||u.contains(C)||(b=!0),v||(M.K(g),M.Ea(C),!M.B()&&(M.ca()>d||M.R()>d)&&(v=!0)),v&&b)return!0;return!1},h.iU=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.ek(g,v,d)&&(!!h.jU(a,u,d)||h.YA(a,u,d,!1,!0,!1))},h.gU=function(a,u,d){return!h.gI(a,u,d)},h.oU=function(a,u,d){return h.YA(a,u,d,!1,!1,!0)},h.eI=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!!h.zc(g,v,d)&&h.YA(u,a,d,!0,!1,!1)},h.Mw=function(a,u,d){d*=d;for(var g=new m.h,v=new m.h,b=0;b<u.I();b++){u.D(b,v);for(var C=!1,M=0;M<a.I();M++)if(a.D(M,g),m.h.yc(g,v)<=d){C=!0;break}if(!C)return!1}return!0},h.Nw=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),h.ek(g,v,d)},h.fI=function(a,u,d){return u=u.D(),h.kt(a,u,d)},h.sU=function(a,u,d){return h.Nw(a,u,d)},h.dU=function(a,u,d){return!h.fI(a,u,d)},h.hU=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(v.ca()>d||v.R()>d)&&h.ek(g,v,d)},h.fU=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),h.zc(v,g,d))return!1;for((u=new m.l).K(v),u.W(d,d),d=new m.h,v=0;v<a.I();v++)if(a.D(v,d),u.contains(d))return!1;return!0},h.qU=function(a,u,d){var g=new m.l,v=new m.l,b=new m.l;if(u.A(g),g.ca()<=d&&g.R()<=d)return!1;if(g.ca()<=d||g.R()<=d){u=new m.h;var C=!1;v.K(g),b.K(g),v.W(d,d),g.ca()>d?b.W(0,-d):b.W(-d,0);for(var M=0;M<a.I();M++)if(a.D(M,u),v.contains(u)){if(g.ca()>d){if(u.y>b.G&&u.y<b.H)return!1}else if(u.x>b.v&&u.x<b.C)return!1;C=!0}return C}for(v.K(g),b.K(g),v.W(d,d),b.W(-d,-d),u=new m.h,C=!1,M=0;M<a.I();M++)if(a.D(M,u),v.contains(u)){if(b.hm(u))return!1;C=!0}return C},h.rU=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),!h.zc(v,g,d))return!1;if(v.ca()<=d&&v.R()<=d)return h.ek(g,v,d);if(v.ca()<=d||v.R()<=d){u=!1,g=new m.l;var b=new m.l;g.K(v),b.K(v),v.ca()>d?g.W(0,-d):g.W(-d,0),b.W(d,d);for(var C=new m.h,M=0;M<a.I();M++){if(a.D(M,C),!b.contains(C))return!1;v.ca()>d?C.y>g.G&&C.y<g.H&&(u=!0):C.x>g.v&&C.x<g.C&&(u=!0)}return u}for(u=!1,g=new m.l,b=new m.l,g.K(v),b.K(v),g.W(-d,-d),b.W(d,d),C=new m.h,M=0;M<a.I();M++){if(a.D(M,C),!b.contains(C))return!1;g.hm(C)&&(u=!0)}return u},h.cU=function(a,u,d){var g=new m.l,v=new m.l;return a.A(g),u.A(v),!(!h.zc(g,v,d)||v.ca()>d||v.R()>d)&&(u=u.Ip(),!h.kt(a,u,d))},h.eU=function(a,u,d){var g=new m.l,v=new m.l;if(a.A(g),u.A(v),h.zc(v,g,d)||v.ca()<=d&&v.R()<=d)return!1;if(v.ca()<=d||v.R()<=d){u=new m.l,g=new m.l,u.K(v),v.ca()>d?u.W(0,-d):u.W(-d,0),g.K(v),g.W(d,d);for(var b=new m.h,C=!1,M=!1,O=0;O<a.I();O++)if(a.D(O,b),C||(v.ca()>d?b.y>u.G&&b.y<u.H&&(C=!0):b.x>u.v&&b.x<u.C&&(C=!0)),M||g.contains(b)||(M=!0),C&&M)return!0;return!1}for(u=new m.l,g=new m.l,u.K(v),u.W(-d,-d),g.K(v),g.W(d,d),b=new m.h,M=C=!1,O=0;O<a.I();O++)if(a.D(O,b),!C&&u.hm(b)&&(C=!0),M||g.contains(b)||(M=!0),C&&M)return!0;return!1},h.wI=function(a,u,d){return m.h.yc(a,u)<=d*d},h.SU=function(a,u,d){return m.h.yc(a,u)>d*d},h.uI=function(a,u,d){return h.wI(a,u,d)},h.vI=function(a,u,d){var g=new m.l;return g.K(a),h.ek(g,u,d)},h.Rw=function(a,u,d){var g=new m.l;return g.K(u),g.W(d,d),!g.contains(a)},h.dB=function(a,u,d){if(u.ca()<=d&&u.R()<=d)return!1;var g=new m.l,v=new m.l;if(g.K(u),g.W(d,d),!g.contains(a))return!1;if(u.ca()<=d||u.R()<=d){if(v.K(u),u.ca()>d?v.W(0,-d):v.W(-d,0),u.ca()>d){if(a.y>v.G&&a.y<v.H)return!1}else if(a.x>v.v&&a.x<v.C)return!1;return!0}return v.K(u),v.W(-d,-d),!v.hm(a)},h.eB=function(a,u,d){if(u.ca()<=d&&u.R()<=d)return!0;if(u.ca()<=d||u.R()<=d){var g=new m.l;g.K(u),u.ca()>d?g.W(0,-d):g.W(-d,0);var v=!1;return u.ca()>d?a.y>g.G&&a.y<g.H&&(v=!0):a.x>g.v&&a.x<g.C&&(v=!0),v}return(g=new m.l).K(u),g.W(-d,-d),g.hm(a)},h.RU=function(a,u,d){return h.vI(a,u,d)},h.ek=function(a,u,d){return h.zc(a,u,d)&&h.zc(u,a,d)},h.dk=function(a,u,d){var g=new m.l;return g.K(u),g.W(d,d),!a.isIntersecting(g)},h.cQ=function(a,u,d){if(a.ca()<=d&&a.R()<=d){var g=a.sf();return h.dB(g,u,d)}if(u.ca()<=d&&u.R()<=d)return g=u.sf(),h.dB(g,a,d);if(a.ca()>d&&a.R()>d&&(u.ca()<=d||u.R()<=d)?g=u:(g=a,a=u),g.ca()<=d||g.R()<=d){if(a.ca()<=d||a.R()<=d){u=new m.yb;var v=new m.yb,b=[0,0],C=[0,0],M=new m.h;return g.dn(M),u.Dc(M),g.en(M),u.Qc(M),a.dn(M),v.Dc(M),a.en(M),v.Qc(M),u.Ea(v,null,b,C,d),u.Ea(v,null,null,null,d)==1&&(b[0]==0||b[1]==1||C[0]==0||C[1]==1)}return u=new m.l,v=new m.l,u.K(a),u.W(-d,-d),v.K(u),v.Ea(g),!(!v.B()&&(v.ca()>d||v.R()>d))}return a.W(d,d),(v=new m.l).K(g),v.Ea(a),!(v.B()||!v.B()&&v.ca()>d&&v.R()>d)},h.bQ=function(a,u,d){if(h.zc(a,u,d)||h.zc(u,a,d)||a.ca()<=d&&a.R()<=d||u.ca()<=d&&u.R()<=d)return!1;if(a.ca()<=d||a.R()<=d){if(u.ca()>d&&u.R()>d)return!1;var g=new m.yb,v=new m.yb,b=[0,0],C=[0,0],M=new m.h;return a.dn(M),g.Dc(M),a.en(M),g.Qc(M),u.dn(M),v.Dc(M),u.en(M),v.Qc(M),g.Ea(v,null,b,C,d),g.Ea(v,null,null,null,d)==2&&(0<b[0]||1>b[1])&&(0<C[0]||1>C[1])}return!(u.ca()<=d||u.R()<=d)&&((g=new m.l).K(a),g.Ea(u),!(g.B()||g.ca()<=d||g.R()<=d))},h.jF=function(a,u,d){if(!h.zc(a,u,d))return!1;if(a.ca()<=d&&a.R()<=d)return a=a.sf(),h.eB(a,u,d);if(u.ca()<=d&&u.R()<=d)return u=u.sf(),h.eB(u,a,d);if(a.ca()<=d||a.R()<=d)return h.zc(a,u,d);if(u.ca()<=d||u.R()<=d){var g=new m.l;return g.K(a),g.W(-d,-d),g.hm(u)?!0:((a=new m.l).K(g),a.Ea(u),!(a.B()||a.ca()<=d&&a.R()<=d))}return h.zc(a,u,d)},h.aQ=function(a,u,d){if(h.zc(a,u,d)||h.zc(u,a,d)||a.ca()<=d&&a.R()<=d||u.ca()<=d&&u.R()<=d||u.ca()>d&&u.R()>d&&a.ca()>d&&a.R()>d)return!1;if(a.ca()>d&&a.R()>d)var g=u;else g=a,a=u;if(a.ca()>d&&a.R()>d){u=new m.l;var v=new m.l;return v.K(a),v.W(-d,-d),u.K(v),u.Ea(g),!(u.B()||u.ca()<=d&&u.R()<=d)}u=new m.yb,v=new m.yb;var b=[0,0],C=[0,0],M=new m.h;return g.dn(M),u.Dc(M),g.en(M),u.Qc(M),a.dn(M),v.Dc(M),a.en(M),v.Qc(M),u.Ea(v,null,b,C,d),u.Ea(v,null,null,null,d)==1&&0<b[0]&&1>b[1]&&0<C[0]&&1>C[1]},h.EI=function(a,u,d){var g=new m.l,v=new m.l,b=new m.Zl(a,u,d,!0);if(!b.next())return!0;if(this.UG(a,u,d))return!1;var C=a,M=null;u.getType()==1736&&(M=u);var O=!1,L=!1;do{var q=b.nl(),U=b.hl();if(U=u.Na(u.Ba(U)),g.K(b.uz()),g.W(d,d),g.contains(U)&&(U=m.hd.Yd(C,U,0))!=0||u.getType()==1736&&(q=a.Na(a.Ba(q)),v.K(b.az()),v.W(d,d),v.contains(q)&&(U=m.hd.Yd(M,q,0))!=0))return!1;O||(!m.Dg.Ml(a,u.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?C=a:(C=new m.Da,a.copyTo(C),C.fj(1)),O=!0),u.getType()!=1736||L||(L=u,!m.Dg.Ml(L,a.da()-1)||u.Bb!=null&&u.Bb.Fb!=null?M=u:(M=new m.Da,L.copyTo(M),M.fj(1)),L=!0)}while(b.next());return!0},h.zc=function(a,u,d){var g=new m.l;return g.K(a),g.W(d,d),g.contains(u)},h.ls=function(a,u,d){var g=new m.l;return g.K(u),g.W(d,d),u=new m.h,a.dn(u),!g.contains(u)||(a.$I(u),!g.contains(u)||(a.cJ(u),!g.contains(u)||(a.en(u),!g.contains(u))))},h.dI=function(a,u,d){if(a.da()!=u.da()||a.I()!=u.I())return!1;var g=new m.h,v=new m.h,b=!0;d*=d;for(var C=0;C<a.da();C++){if(a.Vc(C)!=u.Vc(C)){b=!1;break}for(var M=a.Ba(C);M<u.Vc(C);M++)if(a.D(M,g),u.D(M,v),m.h.yc(g,v)>d){b=!1;break}if(!b)break}return!!b},h.jU=function(a,u,d){if(a.I()!=u.I())return!1;var g=new m.h,v=new m.h,b=!0;d*=d;for(var C=0;C<a.I();C++)if(a.D(C,g),u.D(C,v),m.h.yc(g,v)>d){b=!1;break}return!!b},h.YA=function(a,u,d,g,v,b){var C=!1;if(a.I()>u.I()){g&&(g=!1,C=!0);var M=u}else M=a,a=u;if(u=null,v||b||C){u=new m.pn(a.I());for(var O=0;O<a.I();O++)u.write(O,0)}O=new m.l;var L=new m.l,q=new m.l;M.A(O),a.A(L),O.W(d,d),L.W(d,d),q.K(O),q.Ea(L),L=new m.h;for(var U=new m.h,ee=!0,Q=m.ta.oE(a,q),ge=Q.getIterator(),ve=d*d,fe=0;fe<M.I();fe++)if(M.D(fe,L),q.contains(L)){var Ce=!1;O.K(L.x,L.y,L.x,L.y),ge.Xi(O,d);for(var Ie=ge.next();Ie!=-1&&(Ie=Q.ja(Ie),a.D(Ie,U),!(m.h.yc(L,U)<=ve&&((v||b||C)&&u.write(Ie,1),Ce=!0,g)));Ie=ge.next());if(!Ce&&(ee=!1,v||g))return!1}else{if(v||g)return!1;ee=!1}if(b&&ee)return!1;if(g)return!0;for(O=0;O<a.I();O++)if(u.read(O)==1){if(b)return!0}else if(v||C)return!1;return!b},h.gI=function(a,u,d){if(a.I()>u.I())var g=u;else g=a,a=u;u=new m.l;var v=new m.l,b=new m.l;g.A(u),a.A(v),u.W(d,d),v.W(d,d),b.K(u),b.Ea(v),v=new m.h;for(var C=new m.h,M=d*d,O=m.ta.oE(a,b),L=O.getIterator(),q=0;q<g.I();q++)if(g.D(q,v),b.contains(v)){u.K(v.x,v.y,v.x,v.y),L.Xi(u,d);for(var U=L.next();U!=-1;U=L.next())if(a.D(O.ja(U),C),m.h.yc(v,C)<=M)return!0}return!1},h.Wz=function(a,u,d,g){return h.ym(a,u,d,g)&&h.ym(u,a,d,g)},h.ym=function(a,u,d,g){function v(mt,lt){return U.QE(mt,lt)}var b,C=!0,M=[0,0],O=[0,0],L=0,q=new m.ia(0),U=new h,ee=new m.l,Q=new m.l,ge=new m.l;a.A(ee),u.A(Q),ee.W(d,d),Q.W(d,d),ge.K(ee),ge.Ea(Q),a=a.Ga(),Q=u.Ga();var ve=null,fe=ve=null,Ce=u.Bb;for(Ce!=null?(ve=Ce.Fb,fe=Ce.zo,ve==null&&(ve=m.ta.jj(u,ge))):ve=m.ta.jj(u,ge),u=ve.getIterator(),Ce=null,fe!=null&&(Ce=fe.getIterator());a.$a();)for(;a.Ha();){var Ie=!1,Ne=a.ha();if(Ne.A(ee),!ee.isIntersecting(ge)||Ce!=null&&(Ce.Xi(ee,d),Ce.next()==-1))return!1;for(fe=Ne.Qb(),u.Uo(Ne,d),b=u.next();b!=-1;b=u.next()){Q.Vb(ve.ja(b)),b=Q.ha();var Ve=Ne.Ea(b,null,M,O,d);if(Ve==2&&(!g||O[0]<=O[1])){Ve=M[0];var Xe=M[1],et=O[0],dt=O[1];if(Ve*fe<=d&&(1-Xe)*fe<=d){Ie=!0,L=0,q.resize(0),U.rh.length=0;var ut=a.wb();for(et=!0;et;){if(a.Ha()){if(fe=(Ne=a.ha()).Qb(),(Ve=Ne.Ea(b,null,M,O,d))==2&&(!g||O[0]<=O[1])&&(Ve=M[0],Xe=M[1],Ve*fe<=d&&(1-Xe)*fe<=d)){ut=a.wb();continue}if(Q.Ha()&&(b=Q.ha(),(Ve=Ne.Ea(b,null,M,O,d))==2&&(!g||O[0]<=O[1])&&(Ve=M[0],Xe=M[1],Ve*fe<=d&&(1-Xe)*fe<=d))){ut=a.wb();continue}}et=!1}ut!=a.wb()&&(a.Vb(ut),a.ha());break}ut=a.wb(),b=T.construct(ut,a.gb,Ve,Xe,Q.wb(),Q.gb,et,dt),U.rh.push(b),q.add(q.size)}}if(!Ie){if(L==U.rh.length)return!1;for(1<q.size-L&&q.Vd(L,q.size,v),Ie=0;L<U.rh.length;L++)if(!((b=U.rh[q.get(L)]).Kj<Ie&&b.Si<Ie)){if(fe*(b.Kj-Ie)>d)return!1;if(fe*(1-(Ie=b.Si))<=d||Ie==1)break}if(fe*(1-Ie)>d)return!1;L=0,q.resize(0),U.rh.length=0}}return C},h.WG=function(a,u,d){if(1>h.Xz(a,u,d,null))return!1;var g=new m.l,v=new m.l;a.A(g),u.A(v);var b=h.ls(g,v,d);return g=h.ls(v,g,d),!(!b||!g)||(b&&!g?!h.ym(u,a,d,!1):g&&!b?!h.ym(a,u,d,!1):!h.ym(a,u,d,!1)&&!h.ym(u,a,d,!1))},h.Xz=function(a,u,d,g){function v(Ni,Ki){return ee.QE(Ni,Ki)}if(a.yz()>u.yz())var b=u,C=a;else b=a,C=u;a=b.Ga(),u=C.Ga();var M=[0,0],O=[0,0],L=-1,q=0,U=new m.ia(0),ee=new h,Q=new m.l,ge=new m.l,ve=new m.l;b.A(Q),C.A(ge),Q.W(d,d),ge.W(d,d),ve.K(Q),ve.Ea(ge),b=null,g!=null&&(b=new m.h);var fe=ge=ge=null,Ce=C.Bb;for(Ce!=null?(ge=Ce.Fb,fe=Ce.zo,ge==null&&(ge=m.ta.jj(C,ve))):ge=m.ta.jj(C,ve),C=ge.getIterator(),Ce=null,fe!=null&&(Ce=fe.getIterator());a.$a();)for(fe=0;a.Ha();){var Ie=a.ha();if(Ie.A(Q),Q.isIntersecting(ve)){if(Ce!=null&&(Ce.Xi(Q,d),Ce.next()==-1))continue;var Ne=Ie.Qb();C.Uo(Ie,d);for(var Ve=C.next();Ve!=-1;Ve=C.next()){var Xe=ge.ja(Ve);u.Vb(Xe);var et=u.ha(),dt=et.Qb(),ut=Ie.Ea(et,null,M,O,d);if(0<ut){Ve=M[0],L=O[0];var mt=ut==2?M[1]:NaN,lt=ut==2?O[1]:NaN;if(ut==2){if(Ne*(mt-Ve)>d)return 1;var gi=Ne*(mt-Ve);if(u.Ha()){if(et=u.ha(),(ut=Ie.Ea(et,null,M,null,d))==2){ut=M[0];var oi=M[1];if(gi+(ut=Ne*(oi-ut))>d)return 1}u.Vb(Xe),u.ha()}if(!u.vm()){if(u.li(),et=u.li(),(ut=Ie.Ea(et,null,M,null,d))==2&&(ut=M[0],gi+(ut=Ne*((oi=M[1])-ut))>d))return 1;u.Vb(Xe),u.ha()}if(a.Ha()){if(Xe=a.wb(),(ut=(Ie=a.ha()).Ea(et,null,M,null,d))==2&&(ut=M[0],gi+(ut=Ne*((oi=M[1])-ut))>d))return 1;a.Vb(Xe),a.ha()}if(!a.vm()){if(Xe=a.wb(),a.li(),(ut=(Ie=a.li()).Ea(et,null,M,null,d))==2&&(ut=M[0],gi+(ut=dt*((oi=M[1])-ut))>d))return 1;a.Vb(Xe),a.ha()}et=T.construct(a.wb(),a.gb,Ve,mt,u.wb(),u.gb,L,lt),ee.rh.push(et),U.add(U.size)}L=0,g!=null&&(Ie.hc(Ve,b),g.add(b.x),g.add(b.y))}}if(q<ee.rh.length){for(U.Vd(q,U.size,v),Ie=0,Ve=ee.rh[U.get(q)].Mm;q<ee.rh.length;q++)if(!((et=ee.rh[U.get(q)]).Kj<Ie&&et.Si<Ie))if(Ne*(et.Kj-Ie)>d)fe=Ne*(et.Si-et.Kj),Ie=et.Si,Ve=et.Mm;else{if(et.Mm!=Ve?(fe=Ne*(et.Si-et.Kj),Ve=et.Mm):fe+=Ne*(et.Si-et.Kj),fe>d)return 1;if((Ie=et.Si)==1)break}Ne*(1-Ie)>d&&(fe=0),q=0,U.resize(0),ee.rh.length=0}}}return L},h.UG=function(a,u,d){var g=a.Ga(),v=u.Ga();for(a=new m.Zl(a,u,d,!1);a.next();){u=a.nl();var b=a.hl();if(g.Vb(u),v.Vb(b),u=g.ha(),0<v.ha().Ea(u,null,null,null,d))return!0}return!1},h.VG=function(a,u,d,g){var v=a.Ga(),b=new m.l,C=new m.l,M=new m.l;a.A(b),u.A(C),b.W(d,d),b.contains(C),C.W(d,d),M.K(b),M.Ea(C),(b=a.Bb)!=null?(b=b.Fb)==null&&(b=m.ta.jj(a,M)):b=m.ta.jj(a,M),a=b.getIterator();for(var O=new m.h,L=new m.h,q=d*d,U=0;U<u.I();U++)if(u.D(U,O),M.contains(O)){C.K(O.x,O.y,O.x,O.y),a.Xi(C,d);for(var ee=!1,Q=a.next();Q!=-1;Q=a.next())if(v.Vb(b.ja(Q)),(Q=v.ha()).hc(Q.fe(O,!1),L),m.h.yc(L,O)<=q){ee=!0;break}if(g){if(!ee)return!1}else if(ee)return!0}return!!g},h.Yz=function(a,u,d){var g=new m.h,v=d*d,b=a.Ga();if((a=a.Bb)!=null&&(a=a.Fb)!=null){var C=new m.l;for(C.K(u),C=(d=a.MF(C,d)).next();C!=-1;C=d.next())if(b.Vb(a.ja(C)),b.Ha()){var M=(C=b.ha()).fe(u,!1);if(C.hc(M,g),m.h.yc(u,g)<=v)return!0}return!1}for(a=new m.l;b.$a();)for(;b.Ha();)if((C=b.ha()).A(a),a.W(d,d),a.contains(u)&&(M=C.fe(u,!1),C.hc(M,g),m.h.yc(u,g)<=v))return!0;return!1},h.SG=function(a,u,d){return h.Yz(a,u,d)&&!h.Zz(a,u,d)},h.Zz=function(a,u,d){return a=a.mg(),!h.kt(a,u,d)},h.TG=function(a,u,d){if(a.tm()){var g=new m.yb(u.v,u.G,u.v,u.H),v=new m.yb(u.v,u.H,u.C,u.H),b=new m.yb(u.C,u.H,u.C,u.G);for(u=new m.yb(u.C,u.G,u.v,u.G),a=a.Ga();a.$a();)for(;a.Ha();){var C=a.ha();if(C.isIntersecting(g,d)||C.isIntersecting(v,d)||C.isIntersecting(b,d)||C.isIntersecting(u,d))return!0}}else{(g=new m.l).K(u),g.W(d,d),d=a.ub(0),v=new m.h,b=new m.h,u=new m.h,C=new m.h;for(var M=0,O=a.da();M<O;M++)for(var L=!0,q=a.Ba(M),U=a.Vc(M);q<U;q++)if(L)d.tc(2*q,b),L=!1;else{if(d.tc(2*q,v),u.L(b),C.L(v),g.zy(u,C)!=0)return!0;b.L(v)}}return!1},h.qc=function(a,u,d){var g=a.getType(),v=u.getType();if(m.aa.xj(g)){var b=a.Bb;if(b!=null&&(b=b.Fk)!=null)if(v==33){var C=u.D();if((C=b.So(C.x,C.y))==1)return 1;if(C==0)return 4}else{if(C=new m.l,u.A(C),(C=b.Ro(C))==1)return 1;if(C==0)return 4;if(d&&m.aa.xj(v)&&h.HE(u,b))return 1073741824}}if(m.aa.xj(v)&&(b=u.Bb)!=null&&(b=b.Fk)!=null)if(g==33){if(a=a.D(),(C=b.So(a.x,a.y))==1)return 2;if(C==0)return 4}else{if(u=new m.l,a.A(u),(C=b.Ro(u))==1)return 2;if(C==0)return 4;if(d&&m.aa.xj(g)&&h.HE(a,b))return 1073741824}return 0},h.HE=function(a,u){for(var d=a.I(),g=new m.h,v=0;v<d;v++)if(a.D(v,g),u.So(g.x,g.y)==1)return!0;return!1},h.II=function(a,u,d,g){for(var v=1<=a.om(0)&&1<=u.om(0),b=a.Ga(),C=u.Ga(),M=[0,0],O=[0,0],L=new m.Zl(a,u,d,!1),q=!1;L.next();){var U=L.nl(),ee=L.hl();if(b.Vb(U),C.Vb(ee),U=b.ha(),(ee=C.ha().Ea(U,null,O,M,d))==2){if(q=M[0],ee=M[1],U=U.Qb(),v&&(ee-q)*U>d)return!1;q=!0}else if(ee!=0){if(q=M[0],U=O[0],0<q&&1>q&&0<U&&1>U)return!1;q=!0}}return!!q&&(b=new m.l,C=new m.l,v=new m.l,a.A(b),u.A(C),b.W(1e3*d,1e3*d),C.W(1e3*d,1e3*d),v.K(b),v.Ea(C),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B())||10<u.I()&&(u=m.Ud.clip(u,v,d,0),u.B()))&&m.am.rt(a,u,d,"F********",g))},h.FI=function(a,u,d,g){var v=1<=a.om(0)&&1<=u.om(0),b=new m.l,C=new m.l,M=new m.l;a.A(b),u.A(C);for(var O=!1,L=h.ls(b,C,d),q=h.ls(C,b,d),U=a.Ga(),ee=u.Ga(),Q=[0,0],ge=[0,0],ve=new m.Zl(a,u,d,!1);ve.next();){var fe=ve.nl(),Ce=ve.hl();if(U.Vb(fe),ee.Vb(Ce),Ce=U.ha(),(fe=ee.ha().Ea(Ce,null,ge,Q,d))==2){fe=Q[0];var Ie=Q[1];if(Ce=Ce.Qb(),v&&(Ie-fe)*Ce>d&&(O=!0,L&&q))return!0}else if(fe!=0&&(fe=Q[0],Ce=ge[0],0<fe&&1>fe&&0<Ce&&1>Ce))return!0}if(v=new m.l,U=new m.l,v.K(b),v.W(1e3*d,1e3*d),U.K(C),U.W(1e3*d,1e3*d),M.K(v),M.Ea(U),b="",b=O?b+"**":b+"T*",L){if(10<u.I()&&(u=m.Ud.clip(u,M,d,0)).B())return!1;b+="****"}else b+="T***";if(q){if(10<a.I()&&(a=m.Ud.clip(a,M,d,0)).B())return!1;b+="***"}else b+="T**";return m.am.rt(a,u,d,b.toString(),g)},h.BI=function(a,u,d,g){var v=[!1],b=h.zI(a,u,d,v);return v[0]?b:(v=new m.l,u.A(v),v.W(1e3*d,1e3*d),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B()))&&m.am.Sw(a,u,d,g))},h.zI=function(a,u,d,g){g[0]=!1;for(var v=a.Ga(),b=u.Ga(),C=[0,0],M=[0,0],O=new m.Zl(a,u,d,!1),L=!1;O.next();){var q=O.nl(),U=O.hl();if(v.Vb(q,-1),b.Vb(U,-1),q=v.ha(),(q=b.ha().Ea(q,null,M,C,d))!=0&&(L=!0,q==1&&(q=C[0],U=M[0],0<q&&1>q&&0<U&&1>U)))return g[0]=!0,!1}if(!L){for(g[0]=!0,C=new m.l,a.A(C),C.W(d,d),O=a,L=!1,M=new m.l,g=0,v=u.da();g<v;g++)if(0<u.Ja(g)){if(u.Rj(g,M),!C.isIntersecting(M)||(b=u.Na(u.Ba(g)),(b=m.Dg.wm(O,b,0))==0))return!1;L||(!m.Dg.Ml(a,u.da()-1)||a.Bb!=null&&a.Bb.Fb!=null?O=a:(b=new m.Da,a.copyTo(b),b.fj(1),O=b),L=!0)}if(a.da()==1||u.getType()==1607)return!0;for(C=new m.l,u.A(C),C.W(d,d),M=u,O=!1,d=new m.l,g=0,v=a.da();g<v;g++)if(0<a.Ja(g)){if(a.Rj(g,d),C.isIntersecting(d)&&(b=a.Na(a.Ba(g)),(b=m.Dg.wm(M,b,0))==1))return!1;O||(!m.Dg.Ml(u,a.da()-1)||u.Bb!=null&&u.Bb.Fb!=null?M=u:(b=new m.Da,u.copyTo(b),b.fj(1),M=b),O=!0)}return!0}return!1},h.JI=function(a,u,d,g){for(var v=a.Ga(),b=u.Ga(),C=[0,0],M=[0,0],O=new m.Zl(a,u,d,!1),L=!1;O.next();){var q=O.nl(),U=O.hl();if(v.Vb(q),b.Vb(U),q=v.ha(),(q=b.ha().Ea(q,null,M,C,d))==2)L=!0;else if(q!=0){if(L=C[0],q=M[0],0<L&&1>L&&0<q&&1>q)return!1;L=!0}}return!!L&&(b=new m.l,C=new m.l,v=new m.l,a.A(b),u.A(C),b.W(1e3*d,1e3*d),C.W(1e3*d,1e3*d),v.K(b),v.Ea(C),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B())||10<u.I()&&(u=m.Ud.clip(u,v,d,0),u.B()))&&m.am.$m(a,u,d,"F********",g))},h.DI=function(a,u,d,g){for(var v=a.Ga(),b=u.Ga(),C=[0,0],M=[0,0],O=new m.Zl(a,u,d,!1),L=!1;O.next();){var q=O.nl(),U=O.hl();if(v.Vb(q),b.Vb(U),q=v.ha(),(q=b.ha().Ea(q,null,M,C,d))==2)L=!0;else if(q!=0){if(L=C[0],q=M[0],0<L&&1>L&&0<q&&1>q)return!0;L=!0}}return!!L&&(b=new m.l,C=new m.l,M=new m.l,O=new m.l,v=new m.l,a.A(b),u.A(C),h.ls(C,b,d)?(M.K(b),M.W(1e3*d,1e3*d),O.K(C),O.W(1e3*d,1e3*d),v.K(M),v.Ea(O),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B())||10<u.I()&&(u=m.Ud.clip(u,v,d,0),u.B()))&&(d=m.am.$m(a,u,d,"T********",g))):d=m.am.$m(a,u,d,"T*****T**",g))},h.CI=function(a,u,d,g){var v=[!1],b=h.zI(a,u,d,v);return v[0]?b:(v=new m.l,u.A(v),v.W(1e3*d,1e3*d),!(10<a.I()&&(a=m.Ud.clip(a,v,d,0),a.B()))&&m.am.fB(a,u,d,g))},h.AI=function(a,u,d){return m.hd.Yd(a,u,d)==1},h.HI=function(a,u,d){return m.hd.Yd(a,u,d)==2},h.kt=function(a,u,d){var g=new m.h;d*=d;for(var v=0;v<a.I();v++)if(a.D(v,g),m.h.yc(g,u)<=d)return!1;return!0},h.prototype.QE=function(a,u){return a=this.rh[a],u=this.rh[u],a.Mm<u.Mm||a.Mm==u.Mm&&(a.pw<u.pw||a.pw==u.pw&&(a.Kj<u.Kj||a.Kj==u.Kj&&(a.Si<u.Si||a.Si==u.Si&&a.BH<u.BH)))?-1:1},h}();m.ud=p}(ye||(ye={})),function(m){var j,T,p;(T=j||(j={}))[T.InteriorInterior=0]="InteriorInterior",T[T.InteriorBoundary=1]="InteriorBoundary",T[T.InteriorExterior=2]="InteriorExterior",T[T.BoundaryInterior=3]="BoundaryInterior",T[T.BoundaryBoundary=4]="BoundaryBoundary",T[T.BoundaryExterior=5]="BoundaryExterior",T[T.ExteriorInterior=6]="ExteriorInterior",T[T.ExteriorBoundary=7]="ExteriorBoundary",T[T.ExteriorExterior=8]="ExteriorExterior",function(h){h[h.AreaAreaPredicates=0]="AreaAreaPredicates",h[h.AreaLinePredicates=1]="AreaLinePredicates",h[h.LineLinePredicates=2]="LineLinePredicates",h[h.AreaPointPredicates=3]="AreaPointPredicates",h[h.LinePointPredicates=4]="LinePointPredicates",h[h.PointPointPredicates=5]="PointPointPredicates"}(p||(p={})),j=function(){function h(){this.le=0,this.j=new m.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return h.yB=function(a,u,d,g,v){if(g.length!=9)throw m.i.fa("relation string length has to be 9 characters");for(var b=0;9>b;b++){var C=g.charAt(b);if(C!="*"&&C!="T"&&C!="F"&&C!="0"&&C!="1"&&C!="2")throw m.i.fa("relation string")}if((b=this.MR(g,a.Db(),u.Db()))!=0)return m.ud.zB(a,u,d,b,v);b=new m.l,a.A(b),C=new m.l,u.A(C);var M=new m.l;if(M.K(b),M.Zb(C),d=m.ta.Wd(d,M,!1),a=this.WE(a,d),u=this.WE(u,d),a.B()||u.B())return this.uW(a,u,g);switch(b=a.getType(),C=u.getType(),M=!1,b){case 1736:switch(C){case 1736:M=this.rt(a,u,d,g,v);break;case 1607:M=this.$m(a,u,d,g,v);break;case 33:M=this.qt(a,u,d,g);break;case 550:M=this.pt(a,u,d,g,v)}break;case 1607:switch(C){case 1736:M=this.$m(u,a,d,this.Zp(g),v);break;case 1607:M=this.gB(a,u,d,g,v);break;case 33:M=this.tt(a,u,d,g,v);break;case 550:M=this.st(a,u,d,g,v)}break;case 33:switch(C){case 1736:M=this.qt(u,a,d,this.Zp(g));break;case 1607:M=this.tt(u,a,d,this.Zp(g),v);break;case 33:M=this.$U(a,u,d,g);break;case 550:M=this.lt(u,a,d,this.Zp(g))}break;case 550:switch(C){case 1736:M=this.pt(u,a,d,this.Zp(g),v);break;case 1607:M=this.st(u,a,d,this.Zp(g),v);break;case 550:M=this.ZA(a,u,d,g,v);break;case 33:M=this.lt(a,u,d,g)}break;default:M=!1}return M},h.rt=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.xJ();var C=new m.l,M=new m.l;return a.A(C),u.A(M),g=!1,m.ud.dk(C,M,d)&&(b.Cu(a,u),g=!0),g||((C=m.ud.qc(a,u,!1))==4?(b.Cu(a,u),g=!0):C==1?(b.ly(u),g=!0):C==2&&(b.ZD(a),g=!0)),g||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Bp(a,u),b.j.Ug()),h.fg(b.J,b.Xc)},h.Sw=function(a,u,d,g){var v=new h;v.Yi(),v.bj("T*****F**"),v.xJ();var b=new m.l,C=new m.l;a.A(b),u.A(C);var M=!1;return m.ud.dk(b,C,d)&&(v.Cu(a,u),M=!0),M||((b=m.ud.qc(a,u,!1))==4?(v.Cu(a,u),M=!0):b==1?(v.ly(u),M=!0):b==2&&(v.ZD(a),M=!0)),M?this.fg(v.J,v.Xc):(a=(M=new m.gd).Ib(a),b=M.Ib(u),m.Tk.V(M,d,g,!1),d=M.Ne(b).mg(),M.Gp(0,!0,!0),m.rn.V(M,a,-1,!1,g),M.I(a)!=0&&(m.rn.V(M,b,-1,!1,g),v.er(M,g),(u=M.I(b)==0)||(v.Bp(a,b),v.j.Ug(),b=this.fg(v.J,v.Xc))?(a=M.Ne(a),a=(M=new m.gd).Ib(a),b=M.Ib(d),v.er(M,g),v.le=0,v.Yi(),v.bj(u?"T*****F**":"******F**"),v.IB(),v.Bp(a,b),v.j.Ug(),this.fg(v.J,v.Xc)):b))},h.$m=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.IB();var C=new m.l,M=new m.l;return a.A(C),u.A(M),g=!1,m.ud.dk(C,M,d)&&(b.Du(a,u),g=!0),g||((C=m.ud.qc(a,u,!1))==4?(b.Du(a,u),g=!0):C==1&&(b.$D(u),g=!0)),g||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.kh=b.j.Dp(),h.Jw(u,b.j,b.kh),b.Bp(a,u),b.j.Ep(b.kh),b.j.Ug()),h.fg(b.J,b.Xc)},h.fB=function(a,u,d,g){var v=new h;v.Yi(),v.bj("T*****F**"),v.IB();var b=new m.l,C=new m.l;a.A(b),u.A(C);var M=!1;return m.ud.dk(b,C,d)&&(v.Du(a,u),M=!0),M||((b=m.ud.qc(a,u,!1))==4?(v.Du(a,u),M=!0):b==1&&(v.$D(u),M=!0)),M?this.fg(v.J,v.Xc):(a=(M=new m.gd).Ib(a),u=M.Ib(u),v.Wo(M,d,g),M.I(a)!=0&&(v.Bp(a,u),v.j.Ug(),this.fg(v.J,v.Xc)))},h.pt=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.yJ();var C=new m.l,M=new m.l;return a.A(C),u.A(M),g=!1,m.ud.dk(C,M,d)&&(b.Eu(a),g=!0),g||((C=m.ud.qc(a,u,!1))==4?(b.Eu(a),g=!0):C==1&&(b.zN(),g=!0)),g||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Gy(a,u),b.j.Ug()),h.fg(b.J,b.Xc)},h.gB=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.eX(),g=new m.l;var C=new m.l;a.A(g),u.A(C);var M=!1;return m.ud.dk(g,C,d)&&(b.PG(a,u),M=!0),M||m.ud.qc(a,u,!1)!=4||(b.PG(a,u),M=!0),M||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Yh=b.j.Dp(),b.kh=b.j.Dp(),h.Jw(a,b.j,b.Yh),h.Jw(u,b.j,b.kh),b.Bp(a,u),b.j.Ep(b.Yh),b.j.Ep(b.kh),b.j.Ug()),h.fg(b.J,b.Xc)},h.st=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.MJ(),g=new m.l;var C=new m.l;a.A(g),u.A(C);var M=!1;return m.ud.dk(g,C,d)&&(b.Vz(a),M=!0),M||m.ud.qc(a,u,!1)!=4||(b.Vz(a),M=!0),M||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Yh=b.j.Dp(),h.Jw(a,b.j,b.Yh),b.Gy(a,u),b.j.Ep(b.Yh),b.j.Ug()),h.fg(b.J,b.Xc)},h.ZA=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.RJ(),g=new m.l;var C=new m.l;a.A(g),u.A(C);var M=!1;return m.ud.dk(g,C,d)&&(b.yI(),M=!0),M||(a=(g=new m.gd).Ib(a),u=g.Ib(u),b.Wo(g,d,v),b.Gy(a,u),b.j.Ug()),h.fg(b.J,b.Xc)},h.qt=function(a,u,d,g){var v=new h;v.Yi(),v.bj(g),v.yJ();var b=new m.l;a.A(b),u=u.D();var C=!1;return m.ud.Rw(u,b,d)&&(v.Eu(a),C=!0),C||((d=m.hd.Yd(a,u,d))==1?(v.J[0]=0,v.J[2]=2,v.J[3]=-1,v.J[5]=1,v.J[6]=-1):d==2?(v.J[6]=-1,a.Ke()!=0?(v.J[0]=-1,v.J[3]=0,v.J[2]=2,v.J[5]=1):(v.J[0]=0,v.J[3]=-1,v.J[5]=-1,d=new m.l,a.A(d),v.J[2]=d.ca()==0&&d.R()==0?-1:1)):v.Eu(a)),this.fg(v.J,g)},h.tt=function(a,u,d,g,v){var b=new h;b.Yi(),b.bj(g),b.MJ();var C=new m.l;a.A(C),g=u.D();var M=!1;if(m.ud.Rw(g,C,d)&&(b.Vz(a),M=!0),!M){C=null;var O=M=!1;(b.ea[0]||b.ea[6])&&(m.ud.Yz(a,g,d)?(b.ea[0]&&(C=m.pi.gm(a,v),O=!m.ud.kt(C,g,d),M=!0,b.J[0]=O?-1:0),b.J[6]=-1):(b.J[0]=-1,b.J[6]=0)),b.ea[3]&&(C!=null&&C.B()?b.J[3]=-1:(M||(C==null&&(C=m.pi.gm(a,v)),O=!m.ud.kt(C,g,d),M=!0),b.J[3]=O?0:-1)),b.ea[5]&&(C!=null&&C.B()?b.J[5]=-1:M&&!O?b.J[5]=0:(C==null&&(C=m.pi.gm(a,v)),v=m.ud.Nw(C,u,d),b.J[5]=v?-1:0)),b.ea[2]&&(a.Qb()!=0?b.J[2]=1:((v=new m.de(a.description)).Fd(a,0,a.I()),a=m.ud.Nw(v,u,d),b.J[2]=a?-1:0))}return this.fg(b.J,b.Xc)},h.lt=function(a,u,d,g){var v=new h;v.Yi(),v.bj(g),v.RJ();var b=new m.l;a.A(b),u=u.D();var C=!1;if(m.ud.Rw(u,b,d)&&(v.yI(),C=!0),!C){b=!1,C=!0,d*=d;for(var M=0;M<a.I();M++){var O=a.Na(M);if(m.h.yc(O,u)<=d?b=!0:C=!1,b&&!C)break}b?(v.J[0]=0,v.J[2]=C?-1:0,v.J[6]=-1):(v.J[0]=-1,v.J[2]=0,v.J[6]=0)}return h.fg(v.J,g)},h.$U=function(a,u,d,g){a=a.D(),u=u.D();for(var v=[],b=0;9>b;b++)v[b]=-1;return m.h.yc(a,u)<=d*d?v[0]=0:(v[2]=0,v[6]=0),v[8]=2,h.fg(v,g)},h.fg=function(a,u){for(var d=0;9>d;d++)switch(u.charAt(d)){case"T":if(a[d]==-1)return!1;break;case"F":if(a[d]!=-1)return!1;break;case"0":if(a[d]!=0)return!1;break;case"1":if(a[d]!=1)return!1;break;case"2":if(a[d]!=2)return!1}return!0},h.uW=function(a,u,d){var g=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(a.B()&&u.B()){for(var v=0;9>v;v++)g[v]=-1;return this.fg(g,d)}return v=!1,a.B()&&(a=u,v=!0),g[0]=-1,g[1]=-1,g[3]=-1,g[4]=-1,g[6]=-1,g[7]=-1,g[8]=2,u=a.getType(),m.aa.Hc(u)?u==1736?a.Ke()!=0?(g[2]=2,g[5]=1):(g[5]=-1,u=new m.l,a.A(u),g[2]=u.ca()==0&&u.R()==0?0:1):(u=a.Qb()!=0,g[2]=u?1:0,g[5]=m.pi.aq(a)?0:-1):(g[2]=0,g[5]=-1),v&&this.vK(g),this.fg(g,d)},h.MR=function(a,u,d){return h.dQ(a)?3:h.UP(a)?4:h.cY(a,u,d)?8:h.CP(a,u,d)?16:h.eP(a)?1:h.EU(a,u,d)?32:0},h.dQ=function(a){return a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="F"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="F"&&a.charAt(6)=="F"&&a.charAt(7)=="F"&&a.charAt(8)=="*"},h.UP=function(a){return a.charAt(0)=="F"&&a.charAt(1)=="F"&&a.charAt(2)=="*"&&a.charAt(3)=="F"&&a.charAt(4)=="F"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*"},h.cY=function(a,u,d){return(u!=0||d!=0)&&((u!=2||d!=2)&&(a.charAt(0)=="F"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="T"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*"||u==1&&d==1&&a.charAt(0)=="F"&&a.charAt(1)=="T"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*")||d!=0&&a.charAt(0)=="F"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="T"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*")},h.CP=function(a,u,d){return u>d?a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="T"&&a.charAt(7)=="*"&&a.charAt(8)=="*":u==1&&d==1&&a.charAt(0)=="0"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="*"&&a.charAt(7)=="*"&&a.charAt(8)=="*"},h.eP=function(a){return a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="*"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="F"&&a.charAt(7)=="F"&&a.charAt(8)=="*"},h.EU=function(a,u,d){if(u==d){if(u!=1)return a.charAt(0)=="T"&&a.charAt(1)=="*"&&a.charAt(2)=="T"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="T"&&a.charAt(7)=="*"&&a.charAt(8)=="*";if(a.charAt(0)=="1"&&a.charAt(1)=="*"&&a.charAt(2)=="T"&&a.charAt(3)=="*"&&a.charAt(4)=="*"&&a.charAt(5)=="*"&&a.charAt(6)=="T"&&a.charAt(7)=="*"&&a.charAt(8)=="*")return!0}return!1},h.Jw=function(a,u,d){a=u.La(a);for(var g=u.Re;g!=-1;g=u.Rf(g))if(u.xd(g)&a){var v=u.Me(g);if(v==-1)u.nn(g,d,0);else{var b=v,C=0;do u.dh(b)&a&&C++,b=u.jc(u.xa(b));while(b!=v);u.nn(g,d,C)}}},h.Zp=function(a){var u=""+a.charAt(0);return u+=a.charAt(3),u+=a.charAt(6),u+=a.charAt(1),u+=a.charAt(4),u+=a.charAt(7),u+=a.charAt(2),(u+=a.charAt(5))+a.charAt(8)},h.prototype.Yi=function(){for(var a=0;9>a;a++)this.J[a]=-2,this.Za[a]=-2},h.vK=function(a){var u=a[1],d=a[2],g=a[5];a[1]=a[3],a[2]=a[6],a[5]=a[7],a[3]=u,a[6]=d,a[7]=g},h.prototype.bj=function(a){for(this.Xc=a,a=0;9>a;a++)this.Xc.charAt(a)!="*"?(this.ea[a]=!0,this.le++):this.ea[a]=!1},h.prototype.UJ=function(){for(var a=0;9>a;a++)this.ea[a]&&this.J[a]==-2&&(this.J[a]=-1,this.ea[a]=!1)},h.prototype.pc=function(a){return this.J[a]!=-2&&(this.J[a]==-1?(this.ea[a]=!1,this.le--,!0):this.Xc.charAt(a)!="T"&&this.Xc.charAt(a)!="F"?!(this.J[a]<this.Za[a])&&(this.ea[a]=!1,this.le--,!0):(this.ea[a]=!1,this.le--,!0))},h.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},h.prototype.xN=function(a,u,d){var g=!0;return this.ea[0]&&(this.CS(a,u,d),g=g&&this.pc(0)),this.ea[1]&&(this.sG(a,u,1),g=g&&this.pc(1)),this.ea[2]&&(this.tG(a,u,d,2),g=g&&this.pc(2)),this.ea[3]&&(this.sG(a,d,3),g=g&&this.pc(3)),this.ea[4]&&(this.BN(a,u,d),g=g&&this.pc(4)),this.ea[5]&&(this.eE(a,d,5),g=g&&this.pc(5)),this.ea[6]&&(this.tG(a,d,u,6),g=g&&this.pc(6)),this.ea[7]&&(this.eE(a,u,7),g=g&&this.pc(7)),g},h.prototype.Cu=function(a,u){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(u,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},h.prototype.Fr=function(a,u,d,g,v){u==-1&&g==-1||((d!="T"&&d!="F"&&u!=-1||v!="T"&&v!="F"&&g!=-1)&&a.Ke()==0?(g!=-1&&(this.J[g]=-1),u!=-1&&(d=new m.l,a.A(d),this.J[u]=d.ca()==0&&d.R()==0?0:1)):(u!=-1&&(this.J[u]=2),g!=-1&&(this.J[g]=1)))},h.prototype.ly=function(a){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(a,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},h.prototype.ZD=function(a){this.ly(a),h.vK(this.J)},h.prototype.Du=function(a,u){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var d=this.Xc.charAt(6);d=d=="T"||d=="F"||u.Qb()!=0,this.J[6]=d?1:0}this.ea[7]&&(u=m.pi.aq(u),this.J[7]=u?0:-1),this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},h.prototype.$D=function(a){if(this.ea[0]){var u=this.Xc.charAt(0);u=u=="T"||u=="F"||a.Qb()!=0,this.J[0]=u?1:0}this.ea[1]&&(a=m.pi.aq(a),this.J[1]=a?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},h.prototype.Eu=function(a){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},h.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},h.prototype.PG=function(a,u){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var d=this.Xc.charAt(2);d=d=="T"||d=="F"||a.Qb()!=0,this.J[2]=d?1:0}this.ea[5]&&(a=m.pi.aq(a),this.J[5]=a?0:-1),this.ea[6]&&(d=(d=this.Xc.charAt(6))=="T"||d=="F"||u.Qb()!=0,this.J[6]=d?1:0),this.ea[7]&&(u=m.pi.aq(u),this.J[7]=u?0:-1)},h.prototype.Vz=function(a){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var u=this.Xc.charAt(2);u=u=="T"||u=="F"||a.Qb()!=0,this.J[2]=u?1:0}this.ea[5]&&(a=m.pi.aq(a),this.J[5]=a?0:-1),this.J[6]=0},h.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},h.prototype.yN=function(a,u,d){var g=!0;return this.ea[0]&&(this.DS(a,u),g=g&&this.pc(0)),this.ea[1]&&(this.zS(a,u,d,this.kh),g=g&&this.pc(1)),this.ea[2]&&(this.AS(a,u),g=g&&this.pc(2)),this.ea[3]&&(this.FN(a,u,d,this.kh),g=g&&this.pc(3)),this.ea[4]&&(this.CN(a,u,d,this.kh),g=g&&this.pc(4)),this.ea[5]&&(this.DN(a,u,d),g=g&&this.pc(5)),this.ea[6]&&(this.lQ(a,u),g=g&&this.pc(6)),this.ea[7]&&(this.kQ(a,u,d,this.kh),g=g&&this.pc(7)),g},h.prototype.mT=function(a,u,d){var g=!0;return this.ea[0]&&(this.GS(a,u,d,this.Yh,this.kh),g=g&&this.pc(0)),this.ea[1]&&(this.uG(a,u,d,this.Yh,this.kh,1),g=g&&this.pc(1)),this.ea[2]&&(this.vG(a,u,d,2),g=g&&this.pc(2)),this.ea[3]&&(this.uG(a,d,u,this.kh,this.Yh,3),g=g&&this.pc(3)),this.ea[4]&&(this.HN(a,u,d,this.Yh,this.kh),g=g&&this.pc(4)),this.ea[5]&&(this.fE(a,d,this.Yh,5),g=g&&this.pc(5)),this.ea[6]&&(this.vG(a,d,u,6),g=g&&this.pc(6)),this.ea[7]&&(this.fE(a,u,this.kh,7),g=g&&this.pc(7)),g},h.prototype.aE=function(a,u,d){var g=!0;return this.ea[0]&&(this.ES(a,u),g=g&&this.pc(0)),this.ea[2]&&(this.BS(a,u),g=g&&this.pc(2)),this.ea[3]&&(this.GN(a,u,d),g=g&&this.pc(3)),this.ea[5]&&(this.EN(a,u),g=g&&this.pc(5)),this.ea[6]&&(this.mQ(a,u),g=g&&this.pc(6)),g},h.prototype.QG=function(a,u,d){var g=!0;return this.ea[0]&&(this.HS(a,u,d,this.Yh),g=g&&this.pc(0)),this.ea[2]&&(this.FS(a,d),g=g&&this.pc(2)),this.ea[3]&&(this.JN(a,u,d,this.Yh),g=g&&this.pc(3)),this.ea[5]&&(this.IN(a,u,d,this.Yh),g=g&&this.pc(5)),this.ea[6]&&(this.nQ(a,u,d),g=g&&this.pc(6)),g},h.prototype.ZU=function(a,u,d){var g=!0;return this.ea[0]&&(this.IS(a,u,d),g=g&&this.pc(0)),this.ea[2]&&(this.wG(a,u,d,2),g=g&&this.pc(2)),this.ea[6]&&(this.wG(a,d,u,6),g=g&&this.pc(6)),g},h.prototype.CS=function(a,u,d){this.J[0]!=2&&(a=this.j.af(a))&u&&a&d&&(this.J[0]=2)},h.prototype.sG=function(a,u,d){if(this.J[d]!=1){var g=this.j.af(this.j.xa(a));this.j.af(a)&u&&g&u&&(this.J[d]=1)}},h.prototype.tG=function(a,u,d,g){this.J[g]!=2&&(a=this.j.af(a))&u&&!(a&d)&&(this.J[g]=2)},h.prototype.BN=function(a,u,d){if(this.J[4]!=1){var g=this.j.dh(a);g&u&&g&d?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(a=this.j.xd(this.j.uf(a)))&u&&a&d&&(this.J[4]=0)}},h.prototype.eE=function(a,u,d){if(this.J[d]!=1){var g=this.j.af(this.j.xa(a));!(this.j.af(a)&u)&&!(g&u)&&(this.J[d]=1)}},h.prototype.DS=function(a,u){if(this.J[0]!=1){var d=this.j.af(this.j.xa(a));this.j.af(a)&u&&d&u&&(this.J[0]=1)}},h.prototype.zS=function(a,u,d,g){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){var v=this.j.uf(a),b=this.j.xd(v);!(b&u)&&this.j.af(a)&u&&(a=this.j.ng(v,g),b&d&&a%2!=0&&(this.J[1]=0))}},h.prototype.AS=function(a,u){this.J[2]!=2&&this.j.dh(a)&u&&(this.J[2]=2)},h.prototype.FN=function(a,u,d,g){if(this.J[3]!=1){var v=this.j.dh(a);v&u&&v&d?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(v=this.j.uf(a),(a=this.j.xd(v))&u&&(u=this.j.ng(v,g),a&d&&u%2==0&&(this.J[3]=0)))}},h.prototype.CN=function(a,u,d,g){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){var v=this.j.uf(a);(a=this.j.xd(v))&u&&(u=this.j.ng(v,g),a&d&&u%2!=0&&(this.J[4]=0))}},h.prototype.DN=function(a,u,d){this.J[5]!=1&&(a=this.j.dh(a))&u&&!(a&d)&&(this.J[5]=1)},h.prototype.lQ=function(a,u){if(this.J[6]!=1){var d=this.j.af(this.j.xa(a));!(this.j.af(a)&u)&&!(d&u)&&(this.J[6]=1)}},h.prototype.kQ=function(a,u,d,g){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){var v=this.j.uf(a),b=this.j.xd(v);!(b&u)&&!(this.j.af(a)&u)&&(a=this.j.ng(v,g),b&d&&a%2!=0&&(this.J[7]=0))}},h.prototype.GS=function(a,u,d,g,v){if(this.J[0]!=1){var b=this.j.dh(a);b&u&&b&d?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(a=this.j.uf(a),(b=this.j.xd(a))&u&&b&d&&(u=this.j.ng(a,g),v=this.j.ng(a,v),u%2==0&&v%2==0&&(this.J[0]=0)))}},h.prototype.uG=function(a,u,d,g,v,b){if(this.J[b]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){a=this.j.uf(a);var C=this.j.xd(a);C&u&&C&d&&(u=this.j.ng(a,g),v=this.j.ng(a,v),u%2==0&&v%2!=0&&(this.J[b]=0))}},h.prototype.vG=function(a,u,d,g){this.J[g]!=1&&(a=this.j.dh(a))&u&&!(a&d)&&(this.J[g]=1)},h.prototype.HN=function(a,u,d,g,v){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1){a=this.j.uf(a);var b=this.j.xd(a);b&u&&b&d&&(u=this.j.ng(a,g),v=this.j.ng(a,v),u%2!=0&&v%2!=0&&(this.J[4]=0))}},h.prototype.fE=function(a,u,d,g){this.J[g]!=0&&this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)!=1&&(a=this.j.uf(a),!(this.j.xd(a)&u)&&this.j.ng(a,d)%2!=0&&(this.J[g]=0))},h.prototype.ES=function(a,u){this.J[0]!=0&&!(this.j.xd(a)&u)&&this.j.hk(this.j.cz(a))&u&&(this.J[0]=0)},h.prototype.BS=function(a,u){this.J[2]!=2&&this.j.xd(a)&u&&(this.J[2]=2)},h.prototype.GN=function(a,u,d){this.J[3]!=0&&(a=this.j.xd(a))&u&&a&d&&(this.J[3]=0)},h.prototype.EN=function(a,u){this.J[5]!=1&&this.j.xd(a)&u&&(this.J[5]=1)},h.prototype.mQ=function(a,u){this.J[6]!=0&&!(this.j.xd(a)&u)&&!(this.j.hk(this.j.cz(a))&u)&&(this.J[6]=0)},h.prototype.HS=function(a,u,d,g){if(this.J[0]!=0){var v=this.j.xd(a);v&u&&v&d&&this.j.ng(a,g)%2==0&&(this.J[0]=0)}},h.prototype.FS=function(a,u){this.J[2]!=1&&(this.j.Me(a)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.xd(a)&u)&&(this.J[2]=0))},h.prototype.JN=function(a,u,d,g){if(this.J[3]!=0){var v=this.j.xd(a);v&u&&v&d&&this.j.ng(a,g)%2!=0&&(this.J[3]=0)}},h.prototype.IN=function(a,u,d,g){if(this.J[5]!=0){var v=this.j.xd(a);v&u&&!(v&d)&&this.j.ng(a,g)%2!=0&&(this.J[5]=0)}},h.prototype.nQ=function(a,u,d){this.J[6]!=0&&!((a=this.j.xd(a))&u)&&a&d&&(this.J[6]=0)},h.prototype.IS=function(a,u,d){this.J[0]!=0&&(a=this.j.xd(a))&u&&a&d&&(this.J[0]=0)},h.prototype.wG=function(a,u,d,g){this.J[g]!=0&&(a=this.j.xd(a))&u&&!(a&d)&&(this.J[g]=0)},h.prototype.Bp=function(a,u){var d=!1;a=this.j.La(a),u=this.j.La(u),this.Ui=this.j.$g();for(var g=this.j.Re;g!=-1;g=this.j.Rf(g)){var v=this.j.Me(g);if(v==-1){if(this.Sm!=-1)switch(this.Sm){case 3:d=this.aE(g,a,u);break;case 4:d=this.QG(g,a,u);break;default:throw m.i.fa("internal error")}}else{var b=v;do{var C=b;if(this.j.Ab(C,this.Ui)!=1)do{switch(this.vw){case 0:d=this.xN(C,a,u);break;case 1:d=this.yN(C,a,u);break;case 2:d=this.mT(C,a,u);break;default:throw m.i.fa("internal error")}if(d)break;this.j.Kb(C,this.Ui,1),C=this.j.jc(C)}while(C!=b&&!d);if(d)break;b=this.j.jc(this.j.xa(C))}while(b!=v);if(d)break}}d||this.UJ(),this.j.Jg(this.Ui)},h.prototype.Gy=function(a,u){var d=!1;a=this.j.La(a),u=this.j.La(u);for(var g=this.j.Re;g!=-1;g=this.j.Rf(g)){switch(this.Sm){case 3:d=this.aE(g,a,u);break;case 4:d=this.QG(g,a,u);break;case 5:d=this.ZU(g,a,u);break;default:throw m.i.Qa()}if(d)break}d||this.UJ()},h.prototype.er=function(a,u){this.j.dr(a,u)},h.prototype.Wo=function(a,u,d){this.YP(a,u,d),this.er(a,d)},h.prototype.YP=function(a,u,d){for(m.Tk.V(a,u,d,!1),a.Gp(0,!0,!0),u=a.ld;u!=-1;u=a.ue(u))a.ic(u)==1736&&m.rn.V(a,u,-1,!1,d)},h.WE=function(a,u){var d=a.getType();return m.aa.yd(d)?((u=new m.Ta(a.description)).oc(a,!0),u):d==197?(d=new m.l,a.A(d),d.ca()<=u&&d.R()<=u?(u=new m.Sa(a.description),a.sf(u),u):d.ca()<=u||d.R()<=u?(u=new m.Ta(a.description),d=new m.Sa,a.Hf(0,d),u.nf(d),a.Hf(2,d),u.lineTo(d),u):((u=new m.Da(a.description)).ad(a,!1),u)):a},h}(),m.am=j}(ye||(ye={})),function(m){var j=function(){function h(a){this.Em=new m.ia(0),this.dw=new m.ia(0),this.wt=new m.h,this.xt=new m.h,this.g=a,this.Hs=-1}return h.prototype.bc=function(a){return this.g.bc(this.zz(a))},h.prototype.Bv=function(a){var u=this.iz(a);if(a=this.HF(a),this.g.Ma(u)==a){var d=u;u=a,a=d}return this.g.Gc(u,this.wt),this.g.Gc(a,this.xt),this.wt.y<this.xt.y},h.prototype.zz=function(a){var u=this.iz(a);return a=this.HF(a),this.g.U(u)==a?u:a},h.prototype.iz=function(a){return this.Em.get(a)},h.prototype.HF=function(a){return this.dw.get(a)},h.prototype.rF=function(a){this.Em.set(a,this.Hs),this.Hs=a},h.prototype.nI=function(a){if(this.Hs!=-1){var u=this.Hs;return this.Hs=this.Em.get(u),this.Em.set(u,a),this.dw.set(u,this.g.U(a)),u}return this.Em==null&&(this.Em=new m.ia(0),this.dw=new m.ia(0)),u=this.Em.size,this.Em.add(a),this.dw.add(this.g.U(a)),u},h.prototype.rz=function(a){return this.g.bd(this.iz(a))},h}();m.yY=j;var T=function(){function h(a){this.Be=a,this.ie=new m.yb,this.Nm=new m.yb,this.CH=0,this.Ao=null,this.yA=-1}return h.prototype.compare=function(a,u,d){d=a.ja(d);var g=this.Be.hb;if(this.yA==u)var v=this.CH;else this.Ao=g.bc(u),this.Ao==null?((a=g.g).ed(g.zz(u),this.ie),this.Ao=this.ie,v=this.ie.Pe(this.Be.yh,0)):v=this.Ao.Pe(this.Be.yh,0),this.CH=v,this.yA=u;if((a=g.bc(d))==null){(a=g.g).ed(g.zz(d),this.Nm),a=this.Nm;var b=this.Nm.Pe(this.Be.yh,0)}else b=a.Pe(this.Be.yh,0);return v==b&&(u=g.Bv(u),d=g.Bv(d),(u=.5*((d=Math.min(u?this.Ao.la:this.Ao.na,d?a.la:a.na))+this.Be.yh))==this.Be.yh&&(u=d),v=this.Ao.Pe(u,0),b=a.Pe(u,0)),v<b?-1:v>b?1:0},h.prototype.reset=function(){this.yA=-1},h}(),p=function(){function h(){this.Wm=this.Gl=null,this.fb=new m.Yj,this.fb.RP(),this.$d=new T(this),this.fb.Vo(this.$d)}return h.prototype.HQ=function(){var a=!1;if(this.fw&&(a=this.IQ()),this.g.da(this.X)==1){var u=this.g.Ob(this.X);return a=this.g.wz(u),this.g.PB(u,!0),0>a&&(a=this.g.Xa(u),this.g.pJ(a),this.g.Wg(u,this.g.Ma(a)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),u=this.g.Ob(this.X);u!=-1;u=this.g.Rb(u))this.g.gr(u,this.El,0),this.g.gr(u,this.wo,-1);u=new m.ia(0),this.yh=NaN;var d=new m.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var g=this.Gl.rc(this.Gl.je);g!=-1;g=this.Gl.lb(g)){var v=this.Gl.getData(g);if(this.g.Gc(v,d),d.y!=this.yh&&u.size!=0&&(a=this.ut(u)||a,this.$d.reset(),u.clear(!1)),u.add(v),this.yh=d.y,this.et==0)break}for(0<this.et&&(a=this.ut(u)||a,u.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),u=this.g.Ob(this.X);u!=-1;)if(this.g.sj(u,this.El)==3){for(this.g.PB(u,!0),d=u,u=this.g.sj(u,this.wo);u!=-1;)g=this.g.sj(u,this.wo),this.g.ZT(this.X,this.g.Rb(d),u),d=u,u=g;u=this.g.Rb(d)}else this.g.PB(u,!1),u=this.g.Rb(u);return this.g.CB(this.El),this.g.CB(this.wo),a},h.prototype.ut=function(a){return this.$V(a)},h.prototype.$V=function(a){var u=!1;this.hb==null&&(this.hb=new j(this.g)),this.Wm==null?(this.Wm=new m.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(a);for(var d=0,g=a.size;d<g;d++){var v=a.get(d);v!=-1&&this.oG(v,-1)}for(d=0;d<this.Wm.size&&0<this.et;d++)if(a=this.Wm.get(d),v=this.hb.rz(this.fb.ja(a)),g=-1,this.g.sj(v,this.El)==0){v=this.fb.we(a);for(var b,C=a;v!=-1;){var M=this.fb.ja(v),O=this.hb.rz(M),L=this.g.sj(O,this.El);if(L!=0){g=O;break}C=v,v=this.fb.we(v)}v==-1?(b=!0,v=C):(M=this.fb.ja(v),b=this.hb.Bv(M),v=this.fb.lb(v),b=!b);do{if(M=this.fb.ja(v),O=this.hb.rz(M),(L=this.g.sj(O,this.El))==0&&(b!=this.hb.Bv(M)&&(u=this.g.Xa(O),this.g.pJ(u),this.g.Wg(O,this.g.Ma(u)),u=!0),this.g.gr(O,this.El,b?3:2),b||(C=this.g.sj(g,this.wo),this.g.gr(g,this.wo,O),this.g.gr(O,this.wo,C)),this.et--,this.et==0))return u;g=O,C=v,v=this.fb.lb(v),b=!b}while(C!=a)}return u},h.prototype.ZV=function(a){for(var u=0,d=a.size;u<d;u++){var g=a.get(u),v=this.g.Pa(g,this.ro),b=this.g.Pa(g,this.Rs);if(v!=-1){var C=this.fb.ja(v);this.hb.rF(C),this.g.Ra(g,this.ro,-1)}b!=-1&&(C=this.fb.ja(b),this.hb.rF(C),this.g.Ra(g,this.Rs,-1)),C=-1,v!=-1&&b!=-1?(this.fb.vd(v,-1),this.fb.vd(b,-1),a.set(u,-1)):C=v!=-1?v:b,C!=-1&&(this.oG(g,C)||this.fb.vd(C,-1),a.set(u,-1))}},h.prototype.oG=function(a,u){var d=new m.h,g=new m.h;this.g.Gc(a,d);var v=this.g.U(a);this.g.Gc(v,g);var b=!1;if(d.y<g.y){b=!0;var C=this.hb.nI(a);if(u==-1)var M=this.fb.addElement(C,-1);else M=u,this.fb.Sj(M,C);(C=this.g.Pa(v,this.ro))==-1?this.g.Ra(v,this.ro,M):this.g.Ra(v,this.Rs,M),v=this.g.bd(a),this.g.sj(v,this.El)==0&&this.Wm.add(M)}return v=this.g.Ma(a),this.g.Gc(v,g),d.y<g.y&&(b=!0,C=this.hb.nI(v),u==-1?M=this.fb.addElement(C,-1):(M=u,this.fb.Sj(M,C)),(C=this.g.Pa(v,this.ro))==-1?this.g.Ra(v,this.ro,M):this.g.Ra(v,this.Rs,M),v=this.g.bd(a),this.g.sj(v,this.El)==0&&this.Wm.add(M)),b},h.V=function(a,u,d,g){var v=new h;return v.g=a,v.X=u,v.Gl=d,v.fw=g,v.HQ()},h.prototype.IQ=function(){var a=new m.ia(0),u=new m.ia(0),d=-1,g=-1,v=new m.h;v.Rc();for(var b=-1,C=-1,M=-1,O=new m.h,L=this.Gl.rc(this.Gl.je);L!=-1;L=this.Gl.lb(L)){var q=this.Gl.getData(L);this.g.Gc(q,O);var U=this.g.bd(q);v.qb(O)&&C==U?(g==-1&&(d=this.g.Ky(),g=this.g.Gd()),M==-1&&(M=u.size,this.g.Ra(b,g,M),u.add(1),this.g.sj(U,d)==-1&&(this.g.gr(U,d,b),a.add(U))),this.g.Ra(q,g,M),u.bX(u.Fc()+1)):(M=-1,v.L(O)),b=q,C=U}if(a.size==0)return!1;for(v=new m.ia(0),b=new m.ia(0),C=0,M=a.size;C<M;C++){U=a.get(C);var ee=this.g.sj(U,d);for(q=this.g.Pa(ee,g),v.clear(!1),b.clear(!1),v.add(ee),b.add(q),q=this.g.U(ee);q!=ee;q=this.g.U(q)){var Q=q;if((O=this.g.Pa(Q,g))!=-1)if(b.size==0)b.add(O),v.add(Q);else if(b.Fc()==O){L=v.Fc();var ge=this.g.U(L);ee=this.g.U(Q),this.g.Bc(L,ee),this.g.Cc(ee,L),this.g.Bc(Q,ge),this.g.Cc(ge,Q),Q=[!1],ge=this.g.nG(this.X,ge,this.g.Xa(U),Q),this.g.Ra(q,g,-1),Q[0]&&this.g.Jf(U,ee),q=this.g.Ja(U),q-=ee=this.g.Ja(ge),this.g.Vj(U,q),u.set(O,u.get(O)-1),u.get(O)==1&&(u.set(O,0),b.If(),v.If()),q=ee=L}else v.add(q),b.add(O)}}return this.g.CB(d),this.g.Td(g),!0},h}();m.WL=p}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.ig=function(){this.PA=this.sb=null},T.prototype.get=function(){return this.PA},T.prototype.set=function(p){if(this.PA=p,p!=null)throw p.getType()==322&&(this.sb=p),m.i.Qa()},T.prototype.create=function(p){if(p!=322)throw m.i.fa("Not Implemented");this.Or()},T.prototype.Or=function(){this.sb==null&&(this.sb=new m.yb),this.PA=this.sb},T}();m.ig=j}(ye||(ye={})),function(m){(m=m.XL||(m.XL={}))[m.enumLineSeg=1]="enumLineSeg",m[m.enumBezierSeg=2]="enumBezierSeg",m[m.enumArcSeg=4]="enumArcSeg",m[m.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",m[m.enumSegmentMask=7]="enumSegmentMask",m[m.enumDensified=8]="enumDensified"}(ye||(ye={})),function(m){var j=function(p){this.$i=p,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},T=function(){function p(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new m.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return p.prototype.wB=function(h){if(h!=null){for(var a=0,u=h.length;a<u;a++)this.rW(h[a]);h.length=0}},p.prototype.rW=function(h){h.$i=null,this.Iq.push(h)},p.prototype.Ow=function(h){if(this.Iq.length===0)var a=new j(h);else(a=this.Iq[this.Iq.length-1]).$i=h,--this.Iq.length;return a},p.prototype.SR=function(h,a){return h==0?this.$s[a]:this.yw[a]},p.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new m.ig);var h=this.MA[this.Cw];return this.Cw++,h},p.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},p.prototype.Oo=function(h){this.mo.push(this.Ow(h))},p.prototype.ol=function(h){return h==0?this.$s.length:this.yw.length},p.prototype.Vp=function(h,a){return this.SR(h,a).$i},p.prototype.Ea=function(h,a){if(this.mo.length!=2)throw m.i.Qa();this.qa=h;var u=m.lc.ox(.01*h),d=!1,g=this.mo[0],v=this.mo[1];if(a||5&g.$i.zr(v.$i,h,!0)){if(g.$i.getType()==322){var b=g.$i;if(v.$i.getType()==322){a=v.$i;var C=m.yb.Zx(b,a,null,this.Fq,this.Bk,h);if(C==0)throw m.yb.Zx(b,a,null,this.Fq,this.Bk,h),m.i.Qa();h=Array(9),m.O.$u(h,null);for(var M=0;M<C;M++){var O=this.Fq[M],L=this.Bk[M],q=g.sB,U=1;O==0?(q=g.tB,U=g.rC):O==1&&(q=g.rB,U=g.qC);var ee=v.sB,Q=1;L==0?(ee=v.tB,Q=v.rC):L==1&&(ee=v.rB,Q=v.qC);var ge=new m.h;q==ee?(q=new m.h,b.hc(O,q),O=new m.h,a.hc(L,O),Q/=L=U+Q,m.lc.OG(q,O,Q,ge),m.h.yc(ge,q)+m.h.yc(ge,O)>u&&(d=!0)):q>ee?(b.hc(O,ge),O=new m.h,a.hc(L,O),m.h.yc(ge,O)>u&&(d=!0)):(a.hc(L,ge),q=new m.h,b.hc(O,q),m.h.yc(ge,q)>u&&(d=!0)),h[M]=ge}for(g=0,v=-1,M=0;M<=C;M++)(Q=M<C?this.Fq[M]:1)!=g&&(u=this.aB(),b.ah(g,Q,u),v!=-1&&u.get().Dc(h[v]),M!=C&&u.get().Qc(h[M]),g=Q,this.$s.push(this.Ow(u.get()))),v=M;for(b=[0,0,0,0,0,0,0,0,0],M=0;M<C;M++)b[M]=M;for(1<C&&this.Bk[0]>this.Bk[1]&&(Q=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=Q,M=b[0],b[0]=b[1],b[1]=M),g=0,v=-1,M=0;M<=C;M++)(Q=M<C?this.Bk[M]:1)!=g&&(u=this.aB(),a.ah(g,Q,u),v!=-1&&(g=b[v],u.get().Dc(h[g])),M!=C&&(g=b[M],u.get().Qc(h[g])),g=Q,this.yw.push(this.Ow(u.get()))),v=M;return d}}throw m.i.Qa()}return!1},p.prototype.Kz=function(h,a,u){if(a.copyTo(this.Bf),this.mo.length!=1)throw m.i.Qa();this.qa=h;var d=this.mo[0];if(u||d.$i.ru(a.D(),h,!0)){if(d.$i.getType()!=322)throw m.i.Qa();var g=(h=d.$i).fe(a.D(),!1);this.Fq[0]=g;var v=d.sB;for(u=1,g==0?(v=d.tB,u=d.rC):g==1&&(v=d.rB,u=d.qC),d=new m.h,v==0?(v=new m.h,h.hc(g,v),a=a.D(),m.lc.OG(v,a,1/(u+1),d)):0<v?(d=new m.h,h.hc(g,d)):d=a.D(),u=0,g=-1,v=0;1>=v;v++){if((a=1>v?this.Fq[v]:1)!=u){var b=this.aB();h.ah(u,a,b),g!=-1&&b.get().Dc(d),v!=1&&b.get().Qc(d),u=a,this.$s.push(this.Ow(b.get()))}g=v}this.Bf.Cb(d)}},p}();m.TC=T}(ye||(ye={})),function(m){var j=function(){function T(p){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=p,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new m.h}return T.prototype.BW=function(p){if(this.ib!=p.ib)throw m.i.Hb();this.zf=p.zf,this.Jd=p.Jd,this.gb=p.gb,this.Cl=p.Cl,this.ag=p.ag,this.zm=p.zm,this.rk=null},T.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw m.i.ce();this.Jd++}return this.rk},T.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw m.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},T.prototype.DW=function(){this.zf=-1,this.Jd=0},T.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},T.prototype.Vb=function(p,h){if(h===void 0&&(h=-1),0<=this.gb&&this.gb<this.ib.da()){var a=this.IM();if(p>=a&&p<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=p-a)}h=0<=h&&h<this.ib.da()&&p>=this.ib.Ba(h)&&p<this.ib.Vc(h)?h:this.ib.sz(p),this.Cl=h+1,this.gb=h,this.zf=-1,this.Jd=p-this.ib.Ba(h),this.ag=this.Wx(h),this.ib.Ba(this.gb),this.ib.dc(this.gb)},T.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},T.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},T.prototype.Wx=function(p){if(this.ib.Ac())return 0;var h=1;return this.ib.dc(p)&&(h=0),this.ib.Ja(p)-h},T.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},T.prototype.JB=function(){this.zm=!0},T.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},T.prototype.IM=function(){return this.ib.Ba(this.gb)},T.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},T.prototype.vm=function(){return this.zf==0},T.prototype.Qn=function(){return this.zf==this.ag-1},T.prototype.Ha=function(){return this.Jd<this.ag},T.prototype.Ez=function(){return 0<this.Jd},T.prototype.Of=function(){var p=new T(this.ib);return p.zf=this.zf,p.Jd=this.Jd,p.ag=this.ag,p.gb=this.gb,p.Cl=this.Cl,p.ib=this.ib,p.zm=this.zm,p},T.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw m.i.ce();this.zf=this.Jd;var p=this.wb();this.ib.mc();var h=this.ib.Ve,a=1;switch(h!=null&&(a=7&h.read(p)),h=this.ib.description,a){case 1:this.sb==null&&(this.sb=new m.yb),this.rk=this.sb;break;case 2:throw m.i.fa("internal error");default:throw m.i.Qa()}this.rk.Nf(h),a=this.ik(),this.ib.Gc(p,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(a,this.Ds),this.rk.Qc(this.Ds);for(var u=1,d=h.Aa;u<d;u++)for(var g=h.kd(u),v=m.ra.Va(g),b=0;b<v;b++){var C=this.ib.Uc(g,p,b);this.rk.YB(g,b,C),C=this.ib.Uc(g,a,b),this.rk.OB(g,b,C)}},T.prototype.$S=function(){return this.gb==this.ib.da()-1},T.prototype.Pn=function(){var p=this.ib.VR();return p!=null&&(7&p.read(this.zf))!=1},T}();m.YL=j}(ye||(ye={})),function(m){var j=function(){function T(p){p instanceof m.aa?(this.xH=p,this.ya=-1,this.Ei=1):(this.vT=p.slice(0),this.ya=-1,this.Ei=p.length)}return T.prototype.La=function(){return this.ya},T.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},T.prototype.qe=function(){},T}();m.Zc=j}(ye||(ye={})),function(m){var j=function(){this.next=null},T=function(){function p(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return p.prototype.AX=function(h,a,u){this.oi=h,this.pl=a,this.Jh=this.Wl=null,this.Tq=0,this.vy=u,this.gn==null&&(this.gn=m.O.lg(384,0)),this.nK()},p.prototype.R=function(){return this.oi},p.prototype.ca=function(){return this.pl},p.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},p.prototype.nK=function(){if(0<this.Tq){for(var h=0;h<this.pl;h++){for(var a=this.Wl[h];a!=null;){var u=a;a=a.next,u.next=null}this.Wl[h]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},p.prototype.iJ=function(h){for(this.kF=h==p.Cx,h=this.Lw;h<=this.Kw;h++)this.sN(),this.lN(h),this.ZP();this.nK()},p.prototype.jy=function(h,a,u,d){if(a!=d){var g=1;if(a>d&&(g=h,h=u,u=g,g=a,a=d,d=g,g=-1),!(0>d||a>=this.pl)){0>h&&0>u?u=h=-1:h>=this.oi&&u>=this.oi&&(u=h=this.oi);var v=(u-h)/(d-a);d>this.pl&&(u=v*((d=this.pl)-a)+h),0>a&&(h=v*(0-a)+h,a=0);var b=Math.max(this.oi+1,8388607);-8388607>h?(a=(0-h)/v+a,h=0):h>b&&(a=(this.oi-h)/v+a,h=this.oi),-8388607>u?d=(0-h)/v+a:u>b&&(d=(this.oi-h)/v+a),(a=m.O.truncate(a))!=(d=m.O.truncate(d))&&((u=new j).x=m.O.truncate(4294967296*h),u.y=a,u.H=d,u.WP=m.O.truncate(4294967296*v),u.dir=g,this.Wl==null&&(this.Wl=m.O.lg(this.pl,null)),u.next=this.Wl[u.y],this.Wl[u.y]=u,u.y<this.Lw&&(this.Lw=u.y),u.H>this.Kw&&(this.Kw=u.H),this.Tq++)}}},p.prototype.sN=function(){if(this.Jh!=null){for(var h=!1,a=null,u=this.Jh;u!=null;)if(u.y++,u.y==u.H){var d=u;u=u.next,a!=null?a.next=u:this.Jh=u,d.next=null}else u.x+=u.WP,a!=null&&a.x>u.x&&(h=!0),a=u,u=u.next;h&&(this.Jh=this.fK(this.Jh))}},p.prototype.lN=function(h){if(!(h>=this.pl)){var a=this.Wl[h];if(a!=null){this.Wl[h]=null,a=this.fK(a),this.Tq-=this.gK,h=this.Jh;for(var u=!0,d=a,g=null;h!=null&&d!=null;)h.x>d.x?(u&&(this.Jh=d),u=d.next,d.next=h,g!=null&&(g.next=d),g=d,d=u):(u=h.next,h.next=d,g!=null&&(g.next=h),g=h,h=u),u=!1;this.Jh==null&&(this.Jh=a)}}},p.eK=function(h,a){return 0>h?0:h>a?a:h},p.prototype.ZP=function(){if(this.Jh!=null){for(var h=0,a=this.Jh,u=m.O.truncate(m.O.XG(a.x)),d=a.next;d!=null;d=d.next)if(h=this.kF?1^h:h+d.dir,d.x>a.x){var g=m.O.truncate(m.O.XG(d.x));h!=0&&(a=p.eK(u,this.oi),(u=p.eK(g,this.oi))>a&&a<this.oi&&(this.gn[this.Ol++]=a,this.gn[this.Ol++]=u,this.gn[this.Ol++]=d.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),a=d,u=g}}},p.prototype.fK=function(h){for(var a=0,u=h;u!=null;u=u.next)a++;if(this.gK=a,a==1)return h;this.Kf==null?this.Kf=m.O.lg(Math.max(a,16),null):this.Kf.length<a&&(this.Kf=m.O.lg(Math.max(a,2*this.Kf.length),null));var d=0;for(u=h;u!=null;u=u.next)this.Kf[d++]=u;for(a==2?this.Kf[0].x>this.Kf[1].x&&(h=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=h):p.AN(this.Kf,a,function(g,v){return g==v?0:g.x<v.x?-1:g.x>v.x?1:0}),h=this.Kf[0],this.Kf[0]=null,u=h,d=1;d<a;d++)u.next=this.Kf[d],u=this.Kf[d],this.Kf[d]=null;return u.next=null,h},p.AN=function(h,a,u){if(a==h.length)h.sort(u);else{var d=h.slice(0,0),g=h.slice(a);a=h.slice(0,a).sort(u),h.length=0,h.push.apply(h,d.concat(a).concat(g))}},p.Cx=0,p}();m.Px=T}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.ui=function(p,h){var a=this.g.Pa(p,this.Pq);if(this.Dl==a&&(this.Dl=this.oe.lb(this.Dl)),this.ho==a&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,a),this.bk(p),h&&(h=this.g.bd(p))!=-1&&this.g.Xa(h)==p){var u=this.g.U(p);if(u!=p){if((a=this.g.bd(u))==h)return void this.g.Jf(h,u);if((u=this.g.Ma(p))!=p&&(a=this.g.bd(u))==h)return void this.g.Jf(h,u)}this.g.Jf(h,-1),this.g.Wg(h,-1)}},T.prototype.pD=function(){for(var p=!1,h=new m.h;;){this.Wh==null?(this.Wh=new m.ia(0),this.zs=new m.ia(0),this.xe=new m.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var a=this.ho,u=0,d=!0;a!=this.Dl;){var g=this.oe.getData(a),v=new m.h;this.g.Gc(g,v),d&&(this.g.Gc(g,h),d=!1),v=this.g.Ma(g);var b=this.g.U(g);this.g.Pa(v,this.zg)!=-559038737&&(this.Wh.add(v),this.g.Ra(v,this.zg,-559038737),this.zs.add(g),this.xe.add(u++)),this.g.Pa(b,this.zg)!=-559038737&&(this.Wh.add(b),this.g.Ra(b,this.zg,-559038737),this.zs.add(g),this.xe.add(u++)),a=this.oe.lb(a)}if(2>this.Wh.size)break;var C=this;for(this.xe.Vd(0,this.xe.size,function(M,O){return C.pM(M,O)}),a=0,u=this.xe.size;a<u;a++)d=this.xe.get(a),d=this.Wh.get(d),this.g.Ra(d,this.zg,a),v=new m.h,this.g.Gc(d,v);for(v=this.TM(h),a=0,u=this.xe.size;a<u;a++)(d=this.xe.get(a))!=-1&&(d=this.Wh.get(d),this.g.Ra(d,this.zg,-1));if(!v)break;p=!0}return p},T.prototype.TM=function(p){for(var h=!1,a=!0;a;){a=!1;var u=0;this.xe.get(u)==-1&&(u=this.cm(u));for(var d=this.cm(u),g=0,v=this.xe.size;g<v&&u!=-1&&d!=-1&&u!=d;g++){var b=this.xe.get(u);d=this.xe.get(d),b=this.Wh.get(b),d=this.Wh.get(d);var C=this.g.U(b);this.g.Dv(C,p)||(C=this.g.Ma(b));var M=this.g.U(d);this.g.Dv(M,p)||(M=this.g.Ma(d));var O=this.pu(C,b),L=this.pu(M,d),q=O?this.g.Ma(C):this.g.U(C),U=L?this.g.Ma(M):this.g.U(M),ee=!1;(this.sp(C)||this.sp(M)||this.sp(b)||this.sp(d)||this.sp(q)||this.sp(U))&&(ee=!0),!ee&&this.g.fq(b,d)&&(ee=!0,this.tD(O,L,C,b,M,d)),!ee&&this.g.fq(q,U)&&(ee=!0,this.tD(!O,!L,C,q,M,U)),ee&&(h=!0),a=a||ee,u=this.cm(u),d=this.cm(u)}}if(!h)for(u=0,this.xe.get(u)==-1&&(u=this.cm(u)),d=this.cm(u),g=0,v=this.xe.size;g<v&&u!=-1&&d!=-1&&u!=d;g++)b=this.xe.get(u),d=this.xe.get(d),b=this.Wh.get(b),d=this.Wh.get(d),C=this.g.U(b),this.g.Dv(C,p)||(C=this.g.Ma(b)),M=this.g.U(d),this.g.Dv(M,p)||(M=this.g.Ma(d)),O=this.pu(C,b),L=this.pu(M,d),q=O?this.g.Ma(C):this.g.U(C),U=L?this.g.Ma(M):this.g.U(M),this.DM(O,L,b,C,q,d,M,U)&&(h=!0),u=this.cm(u),d=this.cm(u);return h},T.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new m.Fg().MU(this.fw,this.g,this.X,this.nd);var p=!1,h=!0;this.zg=this.Pq=-1;var a=this.g.I(this.X),u=new m.ia(0);u.Jb(a);for(var d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d))for(var g=this.g.Xa(d),v=0,b=this.g.Ja(d);v<b;v++)u.add(g),g=this.g.U(g);var C=this.g.td.o,M=this.g.td.stride;this.g.vb.mc();var O=this.g.vb.za[0].o;for(u.Vd(0,a,function(q,U){var ee=C[M*q],Q=C[M*U],ge=O[2*ee];ee=O[2*ee+1];var ve=O[2*Q];return(ge=ee<(Q=O[2*Q+1])?-1:ee>Q?1:ge<ve?-1:ge>ve?1:0)==0&&(ge=(q=C[M*q+3])<(U=C[M*U+3])?-1:q==U?0:1),ge}),this.Pq=this.g.Gd(),this.oe=new m.jp,this.RA=this.oe.Ph(0),this.oe.fn(a),d=0;d<a;d++)g=u.get(d),v=this.oe.addElement(this.RA,g),this.g.Ra(g,this.Pq,v);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(p=!0);h;){h=!1,a=0,u=!1;do{u=!1,this.ho=-1,b=0,d=new m.h,v=new m.h;for(var L=this.oe.rc(this.RA);L!=-1;)g=this.oe.getData(L),this.ho!=-1?(this.g.Gc(g,v),d.qb(v)?b++:(d.L(v),this.Dl=L,0<b&&(g=this.pD())&&(u=!0,this.Dl!=-1&&(g=this.oe.getData(this.Dl),this.g.Gc(g,d))),this.ho=L=this.Dl,b=0)):(this.ho=L,this.g.Gc(this.oe.getData(L),d),b=0),L!=-1&&(L=this.oe.lb(L));if(this.Dl=-1,0<b&&(g=this.pD())&&(u=!0),10<a++)throw m.i.Qa();u&&this.GM(),this.cD()&&(u=!0),h=h||u&&!1,p=p||u}while(u)}return this.g.Td(this.Pq),this.g.Td(this.zg),m.WL.V(this.g,this.X,this.oe,this.fw)||p},T.prototype.pu=function(p,h){return this.g.U(h)!=p},T.prototype.DM=function(p,h,a,u,d,g,v,b){if(u==v)return this.bk(a),this.bk(g),!1;var C=this.g.Pa(a,this.zg),M=this.g.Pa(d,this.zg),O=this.g.Pa(g,this.zg),L=this.g.Pa(b,this.zg),q=[0,0,0,0];for((a=[0,0,0,0,0,0,0,0])[0]=0,q[0]=C,a[1]=0,q[1]=M,a[2]=1,q[2]=O,a[3]=1,q[3]=L,C=1;4>C;C++){for(M=q[C],O=a[C],L=C-1;0<=L&&q[L]>M;)q[L+1]=q[L],a[L+1]=a[L],L--;q[L+1]=M,a[L+1]=O}return q=0,a[0]!=0&&(q|=1),a[1]!=0&&(q|=2),a[2]!=0&&(q|=4),a[3]!=0&&(q|=8),(q==5||q==10)&&(p==h?p?(this.g.Bc(b,u),this.g.Cc(u,b),this.g.Bc(d,v),this.g.Cc(v,d)):(this.g.Cc(b,u),this.g.Bc(u,b),this.g.Cc(d,v),this.g.Bc(v,d)):p?(this.g.Cc(u,g),this.g.Bc(g,u),this.g.Cc(v,d),this.g.Bc(d,v)):(this.g.Bc(u,g),this.g.Cc(g,u),this.g.Bc(v,d),this.g.Cc(d,v)),!0)},T.prototype.tD=function(p,h,a,u,d,g){this.MY?this.VM():this.UM(p,h,a,u,d,g)},T.prototype.VM=function(){throw m.i.fa("not implemented.")},T.prototype.UM=function(p,h,a,u,d,g){if(p!=h)p?(this.g.Bc(a,d),this.g.Cc(d,a),this.g.Bc(g,u),this.g.Cc(u,g),this.vn(d,a),this.ui(d,!0),this.g.mi(d,!0),this.bk(a),this.vn(g,u),this.ui(g,!0),this.g.mi(g,!1)):(this.g.Bc(d,a),this.g.Cc(a,d),this.g.Bc(u,g),this.g.Cc(g,u),this.vn(d,a),this.ui(d,!0),this.g.mi(d,!1),this.bk(a),this.vn(g,u),this.ui(g,!0),this.g.mi(g,!0)),this.bk(u);else{var v=p?a:u,b=h?d:g;for(p=p?u:a,h=h?g:d,d=!1,this.g.Bc(v,b),this.g.Bc(b,v),this.g.Cc(p,h),this.g.Cc(h,p),g=h;g!=b;)a=this.g.Ma(g),u=this.g.U(g),this.g.Cc(g,u),this.g.Bc(g,a),d=d||g==v,g=u;d||(a=this.g.Ma(b),u=this.g.U(b),this.g.Cc(b,u),this.g.Bc(b,a)),this.vn(b,v),this.ui(b,!0),this.g.mi(b,!1),this.bk(v),this.vn(h,p),this.ui(h,!0),this.g.mi(h,!1),this.bk(p)}},T.prototype.cD=function(){for(var p=!1,h=this.g.Ob(this.X);h!=-1;){for(var a=this.g.Xa(h),u=0,d=this.g.Ja(h);u<d&&1<d;){var g=this.g.Ma(a),v=this.g.U(a);this.g.fq(g,v)?(p=!0,this.ui(a,!1),this.g.pd(a,!0),this.ui(v,!1),this.g.pd(v,!0),a=g,u=0,d=this.g.Ja(h)):(a=v,u++)}if(2>this.g.Ja(h)){for(p=this.g.Xa(h),u=0,d=this.g.Ja(h);u<d;u++)this.ui(p,!1),p=this.g.U(p);h=this.g.Zq(h),p=!0}else h=this.g.Rb(h)}return p},T.prototype.sp=function(p){for(var h=!1;;){var a=this.g.U(p),u=this.g.Ma(p);if(a==p)return this.ui(p,!0),this.g.mi(p,!1),!0;if(!this.g.fq(a,u)||(h=!0,this.bk(u),this.bk(a),this.ui(p,!0),this.g.mi(p,!1),this.vn(a,u),this.ui(a,!0),this.g.mi(a,!0),a==u))break;p=u}return h},T.prototype.GM=function(){for(var p=0,h=this.oe.rc(this.oe.je);h!=-1;h=this.oe.lb(h)){var a=this.oe.getData(h);this.g.aj(a,-1)}for(var u=0,d=this.g.Ob(this.X);d!=-1;)if((h=this.g.Xa(d))==-1||this.g.bd(h)!=-1)a=d,d=this.g.Rb(d),this.g.$q(a);else{this.g.aj(h,d);var g=1;for(a=this.g.U(h);a!=h;a=this.g.U(a))this.g.aj(a,d),g++;this.g.cp(d,!1),this.g.Vj(d,g),this.g.Wg(d,this.g.Ma(h)),u+=g,p++,d=this.g.Rb(d)}for(h=this.oe.rc(this.oe.je);h!=-1;h=this.oe.lb(h))a=this.oe.getData(h),this.g.bd(a)==-1&&(d=this.g.nG(this.X,a,a,null),u+=this.g.Ja(d),p++);for(this.g.Rl(this.X,p),this.g.Tj(this.X,u),p=0,u=this.g.ld;u!=-1;u=this.g.ue(u))p+=this.g.I(u);this.g.bC(p)},T.prototype.cm=function(p){for(var h=0,a=this.xe.size-1;h<a;h++)if(p=(p+1)%this.xe.size,this.xe.get(p)!=-1)return p;return-1},T.prototype.vn=function(p,h){var a=this.g.Pa(h,this.Pq),u=this.g.Pa(h,this.zg);this.g.lC(p,h),this.g.Ra(h,this.Pq,a),this.g.Ra(h,this.zg,u)},T.prototype.bk=function(p){var h=this.g.Pa(p,this.zg);h!=-1&&(this.xe.set(h,-1),this.g.Ra(p,this.zg,-1))},T.V=function(p,h,a,u,d){var g=new T;return g.g=p,g.X=h,g.xA=a,g.fw=u,g.nd=d,g.XM()},T.prototype.pM=function(p,h){var a=this.Wh.get(p),u=new m.h;this.g.Gc(a,u),a=new m.h;var d=this.Wh.get(h);return this.g.Gc(d,a),u.qb(a)?0:(d=this.zs.get(p),p=new m.h,this.g.Gc(d,p),d=this.zs.get(h),h=new m.h,this.g.Gc(d,h),(d=new m.h).uc(u,p),(u=new m.h).uc(a,h),m.h.nu(d,u))},T}();m.rn=j}(ye||(ye={})),function(m){var j;(j=m.$L||(m.$L={}))[j.Local=0]="Local",j[j.Geographic=1]="Geographic",j[j.Projected=2]="Projected",j[j.Image=3]="Image",j[j.Unknown=4]="Unknown",function(p){p[p.Integer32=0]="Integer32",p[p.Integer64=1]="Integer64",p[p.FloatingPoint=2]="FloatingPoint"}(m.TL||(m.TL={}));var T=function(){function p(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return p.prototype.Ec=function(){return this.dg},p.prototype.VF=function(){return 1},p.prototype.VW=function(h){this.mA=h},p.prototype.Xd=function(){if(this.mA!==null)return this.mA;var h=.001;return this.dg!=0?h=m.wr.CQ(this.dg):this.wh!=null&&(h=m.XC.DQ(this.wh)),h},p.prototype.Bz=function(){return this.wh},p.prototype.Hd=function(){return this.dg!=0?m.Tc.Zg(m.wr.Sy(this.dg)):this.wh!=null?m.XC.EQ(this.wh):void 0},p.Sb=function(h){if(h.dg!=0){if(m.wr.ZS(h.dg)===!0)return 1;if(m.wr.aT(h.dg)===!0)return 2}return 4},p.prototype.$r=function(){var h=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=m.wr.FK(h),this.Ho!=-1?this.Ho:h)},p.create=function(h){if(0>=h)throw m.i.N("Invalid or unsupported wkid: "+h);var a=new p;return a.dg=h,a},p.qP=function(h){if(h==null||h.length==0)throw m.i.N("Cannot create SpatialReference from null or empty text.");var a=new p;return a.wh=h,a},p.prototype.Nb=function(h){return this==h||h!=null&&this.constructor==h.constructor&&this.dg==h.dg&&(this.dg!=0||this.wh===h.wh)},p.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},p.prototype.cc=function(){if(this.pp!=="")return this.pp;var h=this.toString();if(Array.prototype.reduce)return this.pp="S"+h.split("").reduce(function(d,g){return 0|(d=(d<<5)-d+g.charCodeAt(0))},0);var a=0;if(h.length===0)return"";for(var u=0;u<h.length;u++)a=(a<<5)-a+h.charCodeAt(u),a&=a;return this.pp="S"+a},p.prototype.Kn=function(){return this.Xd(0)},p.prototype.fh=function(){return this.su!==null?this.su:this.su=m.gu.yP(this)},p.ZN=2147483645,p.$N=9007199254740990,p}();m.Eg=T}(ye||(ye={})),function(m){var j=function(T){function p(){var h=T!==null&&T.apply(this,arguments)||this;return h.Ji=null,h.ST=null,h.Hq=new m.ZL,h.Eo=null,h.jw=null,h}return ri(p,T),p.yP=function(h){var a=new p;if(a.dg=h.dg,a.Ho=h.Ho,a.ZH=h.ZH,a.wh=h.wh,a.wh!==""&&a.wh!==null){h=p.kM(a.wh);var u=p.iM(a.wh);a.Hq.Xx(h,u,m.hu.Integer64),a.by(h),a.gy(u),a.dg=h.$r()}else h=p.jM(a.dg),a.by(h),a.gy(null),a.Hq.Xx(h,null,m.hu.Integer64);return a},p.prototype.Xd=function(h){return this.Hq.Kn(h)},p.iM=function(h){if(0>=h.length)throw m.i.N();var a=null;try{a=m.NC.fromString(h)}catch{a=null}return a==null?null:p.bD(a,!0)},p.prototype.by=function(h){this.Kd=h,this.Eo=this.Kd.Hd()},p.prototype.gy=function(h){this.KH=h,this.ST=this.KH!=null?this.KH.Eo:null},p.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},p.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},p.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},p.prototype.pm=function(){return this.Kd.pm()},p.prototype.bf=function(){return this.Kd.bf()},p.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},p.prototype.Up=function(){return this.Kd.Up()},p.prototype.Wr=function(){return this.Kd.Wr()},p.prototype.kk=function(){return this.Kd.kk()},p.prototype.kS=function(h){return m.OC.Py(this.Kd,h.Kd)},p.prototype.ml=function(){return this.Kd.ml()},p.prototype.Vr=function(){return this.Kd.Vr()},p.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},p.prototype.gh=function(){if(!this.Wc())throw m.i.N("!isPannable()");var h=new m.l;return this.Kd.gh(h),h},p.prototype.Oe=function(){if(!this.Wc())throw m.i.N("!isPannable()");return this.Kd.so},p.prototype.HR=function(){if(!this.Wc())throw m.i.N("!isPannable()");var h=new m.l;return this.Kd.GR(h),h},p.prototype.pv=function(){if(!this.Wc())throw m.i.N("!isPannable()");return this.Kd.pv()},p.prototype.ov=function(){if(!this.Wc())throw m.i.N("!isPannable()");return this.Kd.ov()},p.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},p.prototype.PQ=function(){return this.Kd.hv()},p.prototype.Qp=function(){return this.Eo.getUnitFactor()},p.prototype.vz=function(h){return this.Hq.vz(h)},p.prototype.sc=function(){var h=this.Sb();if(h==1)return this;if(h==3)return this.Ji.fk().sc();if(h==0||h===4)throw m.i.fa("invalid call");if(this.jw!==null)return this.jw;if((h=this.eh().getGeogcs())==null)throw m.i.Qa();return this.jw=p.bF(h,this.Hq.VF())},p.bF=function(h,a){if(h==null)throw m.i.N("null pointer.");var u=new p;return h=p.mu(h,!0),u.Hq.Xx(h,null,a),u.by(h),u.gy(null),u.dg=h.$r(),u},p.prototype.Sb=function(){var h=this.eh();if(h!=null)switch(h.getType()){case m.Sc.PE_TYPE_GEOGCS:return 1;case m.Sc.PE_TYPE_PROJCS:return 2}return 4},p.prototype.hv=function(){return this.Kd.hv()},p.mu=function(h,a){var u=h.getCode();if(0>=u&&0<(u=m.pf.getCode(h))){if((h=m.pf.coordsys(u))==null)throw m.i.N("Text to wkid mapping had failed: "+u);return p.mu(h,a)}if(a&&0<u&&(a=p.qx[u]))return a;a=m.zb.xv(h,u,!1);var d=p.lK[a];return d||(h=0>=u?h:m.pf.coordsys(u),h=new m.OC(h),p.lK[a]=h,0<u&&(p.qx[u]=h),h)},p.jM=function(h){if(0>=h)throw m.i.N("Invalid or unsupported wkid: "+h);var a=p.qx[h];if(a!=null)return a;if((a=m.pf.coordsys(h))==null)throw m.i.N("Invalid or unsupported wkid: "+h);return(a=p.mu(a,!1)).$r()!=h&&(p.qx[h]=a),a},p.kM=function(h){if(h==null||h===void 0||h.length==0)throw m.i.N("Cannot create SpatialReference from null or empty text.");var a=null;try{a=m.pf.fromString(m.Sc.PE_TYPE_COORDSYS,h)}catch(u){throw m.i.N("Cannot create SpatialReference from text. "+u.message)}if(a===null)throw m.i.N("Cannot create SpatialReference from text. ");return p.mu(a,!0)},p.bD=function(h,a){var u,d=h.getCode();if(0>=d&&0<(d=m.pf.getCode(h))){if((d=m.pf.vertcs(d))===null)throw m.i.N();return p.bD(d,a)}if(a&&0<d&&(a=p.kK[d])||(h=m.zb.xv(h,d,!1),a=p.mK[h]))return a;if(0>=d||(u=m.pf.vertcs(d)),u===null)throw m.i.N();return u=new m.PL(u),p.mK[h]=u,0<d&&(p.kK[d]=u),u},p.sI=function(h,a){if(a===null||a.B())return null;var u=new m.l;if(a!==null&&h.Sb()!=1){var d=h.sc(),g=d.eh();h=m.vr.Nr(h,d,null,null),(a=m.Hx.local().V(a,h,null)).A(u)}else g=h.eh(),a.A(u);return a=g.getPrimem().getLongitude(),g=g.getUnit().getUnitFactor(),new m.LC(u.v,u.G,u.C,u.H,a,g)},p.lD=function(h){var a={name:"",steps:[],_pt:null,_entry:null},u=0;for(h=h.getEntries();u<h.length;u++){var d=h[u],g={LY:!1,ZY:"",YY:-1,geogtran:null};d.getDirection()===0?g.isInverse=!1:g.isInverse=!0;var v=d.getGeogtran().getCode();-1<v?g.wkid=v:g.wkt=d.getGeogtran().toString(),a.steps.push(g)}return a},p.XR=function(h,a,u,d){return u===void 0&&(u=null),u=p.sI(d,u),h=m.lp.getGTlist(h.eh(),a.eh(),2,m.lp.PE_GTLIST_OPTS_COMMON,u,1),a=null,h&&0<h.length&&(a=this.lD(h[0]),m.Mx.destroy(h)),u!==null&&u.destroy(),a},p.YR=function(h,a,u,d){var g;if(u===void 0&&(u=null),d===void 0&&(d=null),g===void 0&&(g=30),u=p.sI(d,u),h=m.lp.getGTlist(h.eh(),a.eh(),2,m.lp.PE_GTLIST_OPTS_COMMON,u,g),a=[],h&&0<h.length){for(g=0;g<h.length;g++)a.push(this.lD(h[g]));m.Mx.destroy(h)}return u!==null&&u.destroy(),a},p.qx={},p.lK={},p.kK={},p.mK={},p}(m.Eg);m.gu=j}(ye||(ye={})),function(m){var j,T;(T=j=m.hu||(m.hu={}))[T.Integer32=0]="Integer32",T[T.Integer64=1]="Integer64",T[T.FloatingPoint=2]="FloatingPoint";var p=function(){function h(){this.qp()}return h.prototype.assign=function(a){this.Fm=a.Fm,this.Gm=a.Gm,this.Pj=a.Pj,this.sA=a.sA,this.Fo=a.Fo,this.rA=a.rA,this.Ik=a.Ik,this.Mq=a.Mq,this.Lq=a.Lq,this.Rm=a.Rm},h.prototype.VF=function(){return this.Rm},h.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=j.FloatingPoint},h.prototype.Xx=function(a,u,d){if(this.qp(),this.Rm=d,d!=j.FloatingPoint){var g=new m.l;a.hR(g),this.Fm=g.v,this.Gm=g.G}else this.Gm=this.Fm=-17976931348623157e292;(g=a.Ue.getType())==m.Sc.PE_TYPE_GEOGCS?(g=(d==j.Integer64?1e-9:1/18e5)*a.bf(),this.Pj=1/g):g==m.Sc.PE_TYPE_PROJCS&&(g=(d==j.Integer64?1e-4:.001)*a.pm(),this.Pj=1/g),u!=null?(g=(d==j.Integer32?.001:1e-4)*u.IH,this.Fo=1/g):this.Fo=1e4,this.YM(),this.Ik=a.sw,this.Mq=u!=null?.001*u.IH:.001,this.Lq=2220446049250313e-29},h.prototype.YM=function(){if(this.Rm!=j.FloatingPoint){var a=this.Rm==j.Integer64?m.Eg.$N:m.Eg.ZN,u=a/this.Pj,d=this.Fm+u,g=m.O.truncate((d-this.Fm)*this.Pj);g>a&&(this.Pj=a/(d-this.Fm)),u=this.Gm+u,(g=m.O.truncate((u-this.Gm)*this.Pj))>a&&(this.Pj=a/(u-this.Gm))}},h.prototype.aC=function(a){switch(a){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},h.prototype.Kn=function(a){switch(a){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},h.prototype.vz=function(a){if(this.Rm==j.FloatingPoint)return 0;switch(a){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},h.prototype.toString=function(){var a="SRPD [m_toleranceXY: "+this.Ik.toString();return(a=(a=(a=(a=(a=(a=(a=(a=(a=a+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},h}();m.ZL=p}(ye||(ye={})),function(m){function j(d,g){return 89.99999<g?g=89.99999:-89.99999>g&&(g=-89.99999),g*=.017453292519943,[111319.49079327169*d,31890685e-1*Math.log((1+Math.sin(g))/(1-Math.sin(g)))]}function T(d,g,v){return d=d/6378137*57.29577951308232,v?[d,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]:[d-360*Math.floor((d+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]}function p(d,g,v){var b=d.Of();if(d.getType()===33)g=g(b.Lg(),b.ih()),b.Cb(g[0],g[1]);else if(d.getType()===197){var C=g(d.es(),d.gs(),v);g=g(d.ds(),d.fs(),v),b.K(C[0],C[1],g[0],g[1])}else for(C=new m.h,d=0;d<b.I();d++){b.D(d,C);var M=g(C.x,C.y,v);C.ma(M[0],M[1]),b.Cb(d,C)}return b}function h(d){return p(d,T,!0)}function a(d){return p(d,j,!0)}var u=Math.PI/180;m.UK=function(){function d(){}return d.vu=function(g){var v=Math.sqrt(.006694379990197414),b=Math.sin(g.y*u);return m.h.construct(6378137*g.x*u,3.1677196636462314e6*(b/(1-.006694379990197414*b*b)-1/(2*v)*Math.log((1-v*b)/(1+v*b))))},d.Vx=function(g,v,b,C){var M=.0033528106647474805,O=Math.sin(b);b=Math.cos(b);var L=(1-M)*Math.tan(g),q=L*(g=1/Math.sqrt(1+L*L)),U=Math.atan2(L,b),ee=(L=g*O)*L,Q=1-ee,ge=27233160610754688e-5*Q/4040829998466145e-2,ve=1+ge/16384*(4096+ge*(ge*(320-175*ge)-768)),fe=ge/1024*(256+ge*(ge*(74-47*ge)-128));ge=C/(635675231424518e-8*ve);for(var Ce,Ie,Ne,Ve=2*Math.PI;1e-12<Math.abs(ge-Ve);)Ne=Math.cos(2*U+ge),Ve=ge,ge=C/(635675231424518e-8*ve)+fe*(Ce=Math.sin(ge))*(Ne+fe/4*((Ie=Math.cos(ge))*(2*Ne*Ne-1)-fe/6*Ne*(4*Ce*Ce-3)*(4*Ne*Ne-3)));return C=q*Ce-g*Ie*b,Q=M/16*Q*(4+M*(4-3*Q)),m.h.construct((v+(Math.atan2(Ce*O,g*Ie-q*Ce*b)-(1-Q)*M*L*(ge+Q*Ce*(Ne+Q*Ie*(2*Ne*Ne-1)))))/u,Math.atan2(q*Ie+g*Ce*b,(1-M)*Math.sqrt(ee+C*C))/u)},d.MM=function(g,v,b,C){var M=.0033528106647474805,O=C-v,L=Math.atan((1-M)*Math.tan(g)),q=Math.atan((1-M)*Math.tan(b)),U=Math.sin(L);L=Math.cos(L);var ee=Math.sin(q);q=Math.cos(q);var Q=O,ge=1e3;do{var ve=Math.sin(Q),fe=Math.cos(Q),Ce=Math.sqrt(q*ve*q*ve+(L*ee-U*q*fe)*(L*ee-U*q*fe));if(Ce===0)return 0;fe=U*ee+L*q*fe;var Ie=Math.atan2(Ce,fe),Ne=L*q*ve/Ce,Ve=1-Ne*Ne;ve=fe-2*U*ee/Ve,isNaN(ve)&&(ve=0);var Xe=M/16*Ve*(4+M*(4-3*Ve)),et=Q;Q=O+(1-Xe)*M*Ne*(Ie+Xe*Ce*(ve+Xe*fe*(2*ve*ve-1)))}while(1e-12<Math.abs(Q-et)&&0<--ge);return ge===0?(U=C-v,{azimuth:Math.atan2(Math.sin(U)*Math.cos(b),Math.cos(g)*Math.sin(b)-Math.sin(g)*Math.cos(b)*Math.cos(U)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(g)*Math.sin(b)+Math.cos(g)*Math.cos(b)*Math.cos(C-v))}):(v=(g=27233160610754688e-5*Ve/4040829998466145e-2)/1024*(256+g*(g*(74-47*g)-128)),{azimuth:Math.atan2(q*Math.sin(Q),L*ee-U*q*Math.cos(Q)),YQ:635675231424518e-8*(1+g/16384*(4096+g*(g*(320-175*g)-768)))*(Ie-v*Ce*(ve+v/4*(fe*(2*ve*ve-1)-v/6*ve*(4*Ce*Ce-3)*(4*ve*ve-3)))),XY:Math.atan2(L*Math.sin(Q),L*ee*Math.cos(Q)-U*q)})},d.jQ=function(g){var v=g.hasAttribute(1),b=g.hasAttribute(2),C=[],M=g.da(),O=null,L=null;v&&(O=g.ub(1)),b&&(L=g.ub(2));for(var q=new m.h,U=0;U<M;U++){for(var ee=g.Ba(U),Q=g.Ja(U),ge=0,ve=0,fe=NaN,Ce=NaN,Ie=NaN,Ne=NaN,Ve=g.dc(U),Xe=[],et=ee;et<ee+Q;et++){g.D(et,q),Ne=Ie=NaN;var dt=[q.x,q.y];v&&(Ie=O.get(et),dt.push(Ie)),b&&(M=L.get(et),dt.push(Ne)),et==ee&&Ve&&(ge=q.x,ve=q.y,fe=Ie,Ce=Ne),Xe.push(dt)}!Ve||ge==q.x&&ve==q.y&&(!v||isNaN(fe)&&isNaN(Ie)||fe==Ie)&&(!b||isNaN(Ce)&&isNaN(Ne)||Ce==Ne)||Xe.push(Xe[0].slice(0)),C.push(Xe)}return C},d.Wy=function(g,v){g=d.jQ(g),637.100877141506>v&&(v=637.100877141506);for(var b,C=[],M=0;M<g.length;M++){var O,L,q=g[M];C.push(b=[]),b.push([q[0][0],q[0][1]]);var U=q[0][0]*u,ee=q[0][1]*u;for(O=0;O<q.length-1;O++){var Q=q[O+1][0]*u,ge=q[O+1][1]*u;if(U!==Q||ee!==ge){Q=(ge=d.MM(ee,U,ge,Q)).azimuth;var ve=(ge=ge.YQ)/v;if(1<ve){for(L=1;L<=ve-1;L++){var fe=d.Vx(ee,U,Q,L*v);b.push([fe.x,fe.y])}L=d.Vx(ee,U,Q,(ge+Math.floor(ve-1)*v)/2),b.push([L.x,L.y])}ee=d.Vx(ee,U,Q,ge),b.push([ee.x,ee.y]),U=ee.x*u,ee=ee.y*u}}}return{qJ:C}},d.XQ=function(g){for(var v=[],b=0;b<g.length;b++){var C=g[b];C=d.Wy(C,1e4),v.push(C)}g=[];for(var M=0;M<v.length;M++){C=v[M];var O=0;for(b=0;b<C.qJ.length;b++){var L,q=C.qJ[b],U=d.vu(m.h.construct(q[0][0],q[0][1])),ee=d.vu(m.h.construct(q[q.length-1][0],q[q.length-1][1])),Q=ee.x*U.y-U.x*ee.y;for(L=0;L<q.length-1;L++)U=d.vu(m.h.construct(q[L+1][0],q[L+1][1])),Q+=(ee=d.vu(m.h.construct(q[L][0],q[L][1]))).x*U.y-U.x*ee.y;O+=Q}O/=1,g.push(O/-2)}return g},d}(),m.cb=function(){function d(){}return d.xB=function(g,v,b,C,M,O,L){d.gD[g.cc()]=v,isNaN(b)==0&&(d.mD[g.cc()]=b),isNaN(C)==0&&(d.zD[g.cc()]=C),isNaN(M)==0&&(d.aD[g.cc()]=M),d.nD[g.cc()]=O,L!==null&&(d.oD[g.cc()]=L)},d.Ww=function(g,v,b){d.sD[g.cc()+"-"+v.cc()]=b},d.sc=function(g){if((g=d.gD[g.cc()])==null)throw m.i.Ie();return g},d.bf=function(g){if((g=d.mD[g.cc()])==null)throw m.i.Ie();return g},d.vv=function(g){if((g=d.zD[g.cc()])==null)throw m.i.Ie();return g},d.ev=function(g){if((g=d.aD[g.cc()])==null)throw m.i.Ie();return g},d.gh=function(g){if((g=d.oD[g.cc()])==null)throw m.i.Ie();return m.l.construct(g[0],g[1],g[2],g[3])},d.Wc=function(g){if((g=d.nD[g.cc()])==null)throw m.i.Ie();return g},d.zh=function(g,v,b){if(v.Nb(b))return g;var C=d.sD[v.cc()+"-"+b.cc()];if(C!==void 0)return C(g,v,b);throw m.i.Ie()},d.vt=function(){throw m.i.Ie()},d.bR=function(){throw m.i.Ie()},d.dW=function(){throw m.i.Ie()},d.ml=function(){throw m.i.Ie()},d.sW=function(){var g=m.Eg.create(102100),v=m.Eg.create(3857),b=m.Eg.create(4326);m.cb.xB(g,b,NaN,NaN,NaN,!1,null),m.cb.xB(b,b,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),m.cb.xB(v,b,NaN,NaN,NaN,!1,null),m.cb.Ww(g,b,h),m.cb.Ww(b,g,a),m.cb.Ww(v,b,h),m.cb.Ww(b,v,a)},d.gD=[],d.mD=[],d.zD=[],d.aD=[],d.nD=[],d.oD=[],d.sD=[],d}()}(ye||(ye={})),ye.cb.sW(),function(m){var j=function(){function T(p){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=p}return T.prototype.jd=function(p){p<this.Bl?(this.o[p*this.stride]=this.io,this.io=p):this.Bl--,this.size--},T.prototype.T=function(p,h){return this.o[p*this.stride+h]},T.prototype.S=function(p,h,a){this.o[p*this.stride+h]=a},T.prototype.Ce=function(){var p=this.io;if(p==-1){if(this.Bl==this.Hg){if(2147483647<(p=this.Hg!=0?m.O.truncate(3*(this.Hg+1)/2):1)&&(p=2147483647),p==this.Hg)throw m.i.ce();this.Dz(p)}p=this.Bl,this.Bl++}else this.io=this.o[p*this.stride];this.size++;for(var h=p*this.stride;h<p*this.stride+this.stride;h++)this.o[h]=-1;return p},T.prototype.Ll=function(p){var h=this.io;if(h==-1){if(this.Bl==this.Hg){if(2147483647<(h=this.Hg!=0?m.O.truncate(3*(this.Hg+1)/2):1)&&(h=2147483647),h==this.Hg)throw m.i.ce();this.Dz(h)}h=this.Bl,this.Bl++}else this.io=this.o[h*this.stride];this.size++;for(var a=h*this.stride,u=0;u<p.length;u++)this.o[a+u]=p[u];return h},T.prototype.mj=function(p){this.io=-1,this.size=this.Bl=0,p&&(this.o=null,this.Hg=0)},T.prototype.De=function(p){p>this.Hg&&this.Dz(p)},T.prototype.tx=function(p,h){p*=this.stride,h*=this.stride;for(var a=0;a<this.stride;a++){var u=this.o[h+a];this.o[h+a]=this.o[p+a],this.o[p+a]=u}},T.prototype.gC=function(p,h,a){var u=this.o[this.stride*h+a];this.o[this.stride*h+a]=this.o[this.stride*p+a],this.o[this.stride*p+a]=u},T.LG=function(p){return 0<=p},T.prototype.Dz=function(p){this.o==null&&(this.o=new Int32Array(0));var h=new Int32Array(this.stride*p);h.set(this.o,0),this.o=h,this.Hg=p},T}();m.$c=j}(ye||(ye={})),function(m){var j,T;(T=j||(j={}))[T.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",T[T.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",T[T.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",T[T.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var p=function(){function a(u){this.Be=u,this.yh=NaN,this.eH=new m.ig,this.fH=new m.ig,this.ms=new m.Nc,this.ns=new m.Nc}return a.prototype.compare=function(u,d,g){if(u=u.ja(g),this.Be.pB(d,this.eH),this.Be.pB(u,this.fH),d=this.eH.get(),u=this.fH.get(),this.ms.K(d.sa,d.pa),this.ns.K(u.sa,u.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;g=d.na==d.la;var v=u.na==u.la;if(g||v){if(g&&v)return 0;if(d.na==u.na&&d.sa==u.sa)return g?1:-1;if(d.la==u.la&&d.pa==u.pa)return g?-1:1}return(g=d.Pe(this.yh,this.ms.oa))==(v=u.Pe(this.yh,this.ns.oa))&&((v=.5*((g=Math.min(d.la,u.la))+this.yh))==this.yh&&(v=g),g=d.Pe(v,this.ms.oa),v=u.Pe(v,this.ns.oa)),g<v?-1:g>v?1:0},a.prototype.aK=function(u){this.yh=u},a}(),h=function(){function a(u){this.ib=u,this.WH=new m.ig,this.Bf=new m.h,this.wA=new m.Nc}return a.prototype.kX=function(u){this.Bf.L(u)},a.prototype.compare=function(u,d){return this.ib.pB(u.ja(d),this.WH),u=this.WH.get(),this.wA.K(u.sa,u.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(u=u.Pe(this.Bf.y,this.Bf.x),this.Bf.x<u?-1:this.Bf.x>u?1:0)},a}();j=function(){function a(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new m.Md,this.bO=2147483647,this.aO=m.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return a.prototype.yy=function(u){this.lA=u},a.prototype.Ym=function(){this.ge==null&&(this.ge=new m.$c(8));var u=this.ge.Ce();return this.ge.S(u,1,0),u},a.prototype.vU=function(){this.Kc==null&&(this.Kc=new m.$c(8));var u=this.Kc.Ce();this.Kc.S(u,2,0),this.Kc.S(u,3,0);var d=this.Kc.Ce();return this.Kc.S(d,2,0),this.Kc.S(d,3,0),this.JJ(u,d),this.JJ(d,u),u},a.prototype.mI=function(){this.ye==null&&(this.ye=new m.$c(8));var u=this.ye.Ce();return this.ye.S(u,2,0),u},a.prototype.TW=function(u,d){this.ge.S(u,7,d)},a.prototype.mn=function(u,d){this.ge.S(u,2,d)},a.prototype.SW=function(u,d){this.ge.S(u,1,d)},a.prototype.lX=function(u,d){this.ge.S(u,3,d)},a.prototype.iX=function(u,d){this.ge.S(u,4,d)},a.prototype.cr=function(u,d){this.ge.S(u,5,d)},a.prototype.eR=function(u){return this.ge.T(u,5)},a.prototype.RW=function(u,d){this.ge.S(u,6,d)},a.prototype.cN=function(u,d){this.RW(d,u)},a.prototype.IJ=function(u,d){this.Kc.S(u,1,d)},a.prototype.JJ=function(u,d){this.Kc.S(u,4,d)},a.prototype.Tl=function(u,d){this.Kc.S(u,5,d)},a.prototype.Sl=function(u,d){this.Kc.S(u,6,d)},a.prototype.$W=function(u,d){this.Kc.S(u,2,d)},a.prototype.$w=function(u,d){this.Kc.S(u,3,d)},a.prototype.LF=function(u){return this.Kc.T(u,3)},a.prototype.Gt=function(u,d){this.Kc.S(u,7,d)},a.prototype.EK=function(u,d){if(this.mm(u)!=-1)for(d=d?-1:u,u=this.mm(u);u!=-1;u=this.js(u))this.g.Ra(this.tj(u),this.Cq,d)},a.prototype.yx=function(u,d){u!=-1&&(this.EK(u,d),this.EK(this.xa(u),d))},a.prototype.Dt=function(u,d){this.ye.S(u,1,d)},a.prototype.Vg=function(u,d){this.ye.S(u,2,d)},a.prototype.jn=function(u,d){this.ye.S(u,3,d),this.NW(u,this.dR(d)),this.MW(d,u)},a.prototype.MW=function(u,d){this.ye.S(u,4,d)},a.prototype.NW=function(u,d){this.ye.S(u,5,d)},a.prototype.DJ=function(u,d){this.ye.S(u,6,d)},a.prototype.BJ=function(u,d){this.ye.S(u,7,d)},a.prototype.AJ=function(u,d){this.Yn.write(u,d)},a.prototype.CJ=function(u,d){this.kA.write(u,d)},a.prototype.kY=function(u){var d=0,g=0,v=this.AF(u),b=new m.h,C=new m.h,M=new m.h;this.Yr(v,b),C.L(b);var O=v;do this.lm(O,M),g+=m.h.tb(C,M),this.$e(this.xa(O))!=u&&(d+=(M.x-b.x-(C.x-b.x))*(M.y-b.y+(C.y-b.y))*.5),C.L(M),O=this.jc(O);while(O!=v);this.Yn.write(u,d),this.kA.write(u,g)},a.prototype.PU=function(u,d){var g=new p(this),v=new m.Yj;v.De(m.O.truncate(this.wa/2)),v.Vo(g);for(var b=new m.ia(0),C=this.$g(),M=null,O=0,L=new m.h,q=this.Re;q!=-1;q=this.Rf(q)){if(!(255&++O||d==null||d.progress(-1,-1)))throw m.i.WC();var U=this.Me(q);if(U!=-1){if(b.Bh(0),!this.gY(v,C,b,U)){this.D(q,L),g.aK(L.y);var ee=U;do{var Q=this.Ab(ee,C);Q!=-1&&(v.vd(Q,-1),this.Kb(ee,C,-2)),ee=this.jc(this.xa(ee))}while(U!=ee);ee=U;do(Q=this.Ab(ee,C))==-1&&(Q=v.addElement(ee,-1),b.add(Q)),ee=this.jc(this.xa(ee));while(U!=ee)}for(U=b.size-1;0<=U;U--)Q=b.get(U),ee=v.ja(Q),this.Kb(this.xa(ee),C,Q),this.OU(v,Q,u)}else this.cz(q)==-1&&(M==null&&(M=new h(this)),this.D(q,L),M.kX(L),ee=v.IW(M),U=this.Hl,ee!=-1&&(Q=v.ja(ee),this.$e(Q)==this.$e(this.xa(Q))&&(Q=this.OF(v,ee)),Q!=-1&&(U=this.$e(Q))),this.cN(U,q))}this.Jg(C)},a.prototype.OU=function(u,d,g){var v=u.ja(d),b=this.$e(v);if(this.Gn(b)==-1){var C=this.OF(u,d),M=this.xa(v),O=this.$e(M);this.Kp(b),this.Kp(O);var L=this.Gn(b),q=this.Gn(O);if(C==-1&&L==-1&&(O==b?(this.jn(O,this.Hl),L=q=this.Hl):(q==-1&&(this.jn(O,this.Hl),q=this.Hl),this.jn(b,O),L=O)),C!=-1){var U=this.$e(C);q==-1&&(0>=this.Kp(U)?(q=this.Gn(U),this.jn(O,q)):(this.jn(O,U),q=U),O==b&&(L=q))}L==-1&&this.hY(b,O),g==0?this.jW(u,d,v,C,b,O):g==5?this.kW(u,d,v,M,b,O):g==4&&this.iW(v,C,b,O)}},a.prototype.jW=function(u,d,g,v,b,C){var M=this.hk(b);if(v!=-1){var O=this.hk(C),L=this.hk(this.$e(v));v=M&O&L,L^=L&this.dh(g),(L|=v)!=0&&(this.Vg(C,O|L),this.Vg(b,L|M),M=M||L)}for(d=u.lb(d);d!=-1&&(v=u.ja(d),g=this.$e(this.xa(v)),b=this.hk(g),C=this.dh(v),O=this.$e(v),v=b&(L=this.hk(O))&M,M^=M&C,(M|=v)!=0);d=u.lb(d))this.Vg(g,b|M),this.Vg(O,L|M)},a.prototype.kW=function(u,d,g,v,b,C){if(b!=C){g=this.Ab(g,this.cg),g+=this.Ab(v,this.cg),v=0;var M=new m.ia(0),O=new m.ia(0);O.add(0);for(var L=u.rc(-1);L!=d;L=u.lb(L)){var q=u.ja(L),U=this.xa(q),ee=this.$e(q),Q=this.$e(U);if(ee!=Q){if(q=this.Ab(q,this.cg),v+=q+=this.Ab(U,this.cg),U=!1,M.size!=0&&M.Fc()==Q&&(O.If(),M.If(),U=!0),this.Gn(Q)==-1)throw m.i.Qa();U&&this.Gn(Q)==ee||(O.add(v),M.add(ee))}}v+=g,M.size!=0&&M.Fc()==C&&(O.If(),M.If()),v!=0?O.Fc()==0&&(u=this.g.ld,u=this.La(u),this.Vg(b,u)):O.Fc()!=0&&(u=this.g.ld,u=this.La(u),this.Vg(b,u))}},a.prototype.iW=function(u,d,g,v){var b=this.La(this.g.ld);if(d==-1)this.Vg(v,this.Go),1&(u=this.Ab(u,this.xg))?this.Vg(g,b):this.Vg(g,this.Go);else{var C=this.hk(v);C==0?(C=this.hk(this.$e(d)),this.Vg(v,C),1&(u=this.Ab(u,this.xg))?this.Vg(g,C==b?this.Go:b):this.Vg(g,C)):1&(u=this.Ab(u,this.xg))?this.Vg(g,C==b?this.Go:b):this.Vg(g,C)}},a.prototype.gY=function(u,d,g,v){var b=v,C=-1,M=-1,O=0;do{if(O==2)return!1;var L=this.Ab(b,d);if(L!=-1){if(C!=-1)return!1;C=L}else{if(M!=-1)return!1;M=b}O++,b=this.jc(this.xa(b))}while(v!=b);return M!=-1&&C!=-1&&(this.Kb(u.ja(C),d,-2),u.Sj(C,M),g.add(C),!0)},a.prototype.hY=function(u,d){var g=this.Kp(u);if(g!=0){var v=this.Kp(d);0<g&&0>v||0>g&&0<v?this.jn(u,d):(d=this.Gn(d))!=-1&&this.jn(u,d)}},a.prototype.vP=function(u,d){this.Cq=this.g.Gd();for(var g=0,v=d.size;g<v;g++){var b=d.get(g),C=this.g.Pa(b,this.Cm),M=this.g.Qf(this.g.bd(b)),O=this.g.ic(M);if(m.aa.Hc(O)){var L=this.g.U(b);if(L!=-1){var q=this.g.Pa(L,this.Cm);if(C!=q){var U=this.vU(),ee=this.xa(U),Q=this.jh.Ce();this.jh.S(Q,0,b),this.jh.S(Q,1,-1),this.Gt(U,Q),this.IJ(U,C),(Q=this.Me(C))==-1?(this.mn(C,U),this.Tl(U,ee),this.Sl(ee,U)):(C=this.te(Q),this.Tl(Q,ee),this.Sl(ee,Q),this.Sl(C,U),this.Tl(U,C)),this.IJ(ee,q),(C=this.Me(q))==-1?(this.mn(q,ee),this.Sl(U,ee),this.Tl(ee,U)):(q=this.te(C),this.Tl(C,U),this.Sl(U,C),this.Sl(q,ee),this.Tl(ee,q)),M=this.La(M),u==0?(this.Kb(ee,this.ae,0),this.Kb(U,this.ae,O==1736?M:0)):u==5?(q=new m.h,this.g.D(b,q),b=new m.h,this.g.D(L,b),C=L=0,0>q.compare(b)?L=1:C=-1,this.Kb(ee,this.ae,0),this.Kb(U,this.ae,0),this.Kb(U,this.cg,L),this.Kb(ee,this.cg,C)):u==7?(this.Kb(ee,this.ae,this.Go),this.Kb(U,this.ae,O==1736?M:0)):u==4&&(this.Kb(ee,this.ae,0),this.Kb(U,this.ae,0),this.Kb(U,this.xg,1),this.Kb(ee,this.xg,1)),O=O==1736?this.aO:0,this.$w(U,M|O),this.$w(ee,M|O)}}}}},a.prototype.VT=function(u,d){var g=this.mm(d);if(g!=-1){var v=this.mm(u);this.jh.S(g,1,v),this.Gt(u,g),this.Gt(d,-1)}u=this.xa(u),d=this.xa(d),(g=this.mm(d))!=-1&&(v=this.mm(u),this.jh.S(g,1,v),this.Gt(u,g),this.Gt(d,-1))},a.prototype.IX=function(u){function d(Ie,Ne){return v.HO(Ie,Ne)}var g=new m.ia(0);g.Jb(10);for(var v=this,b=this.Re;b!=-1;b=this.Rf(b)){g.clear(!1);var C=this.Me(b);if(C!=-1){var M=C;do g.add(M),M=this.jc(this.xa(M));while(M!=C);if(1<g.size){if(M=!0,2<g.size)g.Vd(0,g.size,d),g.add(g.get(0));else if(0<this.GO(g.get(0),g.get(1))){var O=g.get(0);g.set(0,g.get(1)),g.set(1,O)}else M=!1;for(var L=O=g.get(0),q=this.uf(L),U=this.xa(L),ee=-1,Q=1,ge=g.size;Q<ge;Q++){var ve=g.get(Q),fe=this.xa(ve),Ce=this.jk(fe);if(Ce==q&&ve!=L){if(u==0)ee=this.LF(L)|this.LF(ve),this.$w(L,ee),this.$w(U,ee),this.Kb(L,this.ae,this.Ab(L,this.ae)|this.Ab(ve,this.ae)),this.Kb(U,this.ae,this.Ab(U,this.ae)|this.Ab(fe,this.ae));else if(this.cg!=-1)ee=this.Ab(L,this.cg)+this.Ab(ve,this.cg),fe=this.Ab(U,this.cg)+this.Ab(fe,this.cg),this.Kb(L,this.cg,ee),this.Kb(U,this.cg,fe);else{if(u==7)return void(this.Ni=new m.Md(5,b,-1));this.xg!=-1&&(ee=this.Ab(L,this.xg)+this.Ab(ve,this.xg),fe=this.Ab(U,this.xg)+this.Ab(fe,this.xg),this.Kb(L,this.xg,ee),this.Kb(U,this.xg,fe))}this.VT(L,ve),this.Ly(ve),ee=L,g.set(Q,-1),ve==O&&(g.set(0,-1),O=-1)}else this.yx(ee,!1),ee=-1,L=ve,q=Ce,U=fe}if(this.yx(ee,!1),ee=-1,M){for(O=-1,Q=0,ge=g.size;Q<ge;Q++)if((ve=g.get(Q))!=-1){if(O==-1)L=O=ve,q=this.uf(L),U=this.xa(L);else if(ve!=L&&(fe=this.xa(ve),Ce=this.jk(fe),this.Sl(U,ve),this.Tl(ve,U),L=ve,q=Ce,U=fe,u==7&&(this.Ab(ve,this.ae)|this.Ab(this.te(ve),this.ae))==(1|this.Go)))return void(this.Ni=new m.Md(5,b,-1))}this.mn(b,O)}else{for(O=-1,Q=0,ge=g.size;Q<ge;Q++)if((ve=g.get(Q))!=-1){O=ve;break}C!=O&&this.mn(b,O)}}}}},a.prototype.WN=function(){for(var u=-1,d=this.$g(),g=this.Re;g!=-1;g=this.Rf(g)){var v=this.Me(g);if(v!=-1){var b=v;do{if(this.Ab(b,d)!=1){var C=this.mI();this.Dt(C,b),this.BJ(C,u),u!=-1&&this.DJ(u,C),u=C;var M=0,O=b;do M|=this.Ab(O,this.ae),this.$W(O,C),this.Kb(O,d,1),O=this.jc(O);while(O!=b);this.Vg(C,M)}b=this.jc(this.xa(b))}while(b!=v)}}C=this.mI(),this.Dt(C,-1),this.BJ(C,u),u!=-1&&this.DJ(u,C),this.Hl=C,this.Yn=m.be.qf(this.ye.size,NaN),this.kA=m.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(d)},a.prototype.sR=function(u,d,g){if((d=d!=-1?d:this.Me(u))==-1)return-1;for(u=d;;){if(this.Ab(d,g)!=1)return d;if((d=this.jc(this.xa(d)))==u)return-1}},a.prototype.yW=function(){for(var u=this.$g(),d=this.Re;d!=-1;d=this.Rf(d))for(var g=-1;;){var v=this.sR(d,g,u);if(v==-1)break;g=this.jc(this.xa(v));for(var b=v;;){var C=this.jc(b),M=this.te(b),O=this.xa(b);if(M==O){if(this.IP(b),g!=b&&g!=O||(g=-1),b==v||M==v){if(b==(v=C)||M==v)break;b=C;continue}}else this.Kb(b,u,1);if((b=C)==v)break}}this.Jg(u)},a.prototype.MB=function(u,d,g,v,b){this.Ug(),this.gH=b,this.g=u,this.Bq=this.g.aF(),(u=new m.ia(0)).Jb(g!=null?this.g.I(g.get(0)):this.g.fd);var C=0,M=1,O=g!=null?g.get(0):this.g.ld;for(b=1;O!=-1;){this.g.HJ(O,this.Bq,M),M<<=1;for(var L=this.g.Ob(O);L!=-1;L=this.g.Rb(L))for(var q=this.g.Xa(L),U=0,ee=this.g.Ja(L);U<ee;U++)u.add(q),q=this.g.U(q);m.aa.Rn(this.g.ic(O))||(C+=this.g.da(O)),g!=null?(O=b<g.size?g.get(b):-1,b++):O=this.g.ue(O)}for(this.Go=M,this.wa=u.size,this.g.nx(u,this.wa),this.jh==null&&(this.jh=new m.$c(2),this.ge=new m.$c(8),this.Kc=new m.$c(8),this.ye=new m.$c(8)),this.jh.De(this.wa),m.mp.zp(v),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,C)),this.Cm=this.g.Gd(),g=new m.h,b=0,C=new m.h,g.Rc(),M=0;M<=this.wa;M++)if(M<this.wa?(q=u.get(M),this.g.D(q,C)):C.Rc(),!g.qb(C)){if(b<M){for(q=this.Ym(),ee=U=-1;b<M;b++)ee=u.get(b),this.g.Ra(ee,this.Cm,q),O=this.jh.Ce(),this.jh.S(O,0,ee),this.jh.S(O,1,U),U=O,L=this.g.bd(ee),O=this.g.Qf(L),O=this.La(O),this.SW(q,this.xd(q)|O);this.TW(q,U),this.cr(q,this.g.Ua(ee)),this.Os!=-1&&this.iX(this.Os,q),this.lX(q,this.Os),this.Os=q,this.Re==-1&&(this.Re=q)}b=M,g.L(C)}m.mp.zp(v),this.ae=this.$g(),d==5&&(this.cg=this.$g()),d==4&&(this.xg=this.$g()),this.vP(d,u),this.Ni.Jj==0&&(this.IX(d),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(d,v))):this.pA=!0))},a.prototype.Ly=function(u){var d=this.jc(u),g=this.te(u),v=this.xa(u),b=this.jc(v),C=this.te(v);d!=v&&(this.Sl(C,d),this.Tl(d,C)),g!=v&&(this.Sl(g,b),this.Tl(b,g)),g=this.jk(u),this.Me(g)==u&&(b!=u?this.mn(g,b):this.mn(g,-1)),b=this.jk(v),this.Me(b)==v&&(d!=v?this.mn(b,d):this.mn(b,-1)),this.Kc.jd(u),this.Kc.jd(v)},a.prototype.OF=function(u,d){for(;;){if((d=u.we(d))==-1)return-1;var g=u.ja(d);if(this.$e(g)!=this.$e(this.xa(g)))return g}},a.prototype.dr=function(u,d){var g;g===void 0&&(g=!0),this.MB(u,0,null,d,g)},a.prototype.vJ=function(u,d,g){var v=new m.ia(0);v.add(d),this.MB(u,4,v,g,u.ic(d)==1736)},a.prototype.wJ=function(u,d,g){var v=new m.ia(0);v.add(d),this.MB(u,5,v,g,!0)},a.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},a.prototype.Me=function(u){return this.ge.T(u,2)},a.prototype.D=function(u,d){this.g.dG(this.eR(u),d)},a.prototype.xd=function(u){return this.ge.T(u,1)},a.prototype.Rf=function(u){return this.ge.T(u,4)},a.prototype.cz=function(u){return this.ge.T(u,6)},a.prototype.km=function(u){return this.ge.T(u,7)},a.prototype.js=function(u){return this.jh.T(u,1)},a.prototype.tj=function(u){return this.jh.T(u,0)},a.prototype.ng=function(u,d){return(d=this.Di[d]).size<=u?-1:d.read(u)},a.prototype.nn=function(u,d,g){(d=this.Di[d]).size<=u&&d.resize(this.ge.size,-1),d.write(u,g)},a.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var u=m.ia.qf(this.ge.Hg,-1),d=0,g=this.Di.length;d<g;d++)if(this.Di[d]==null)return this.Di[d]=u,d;return this.Di.push(u),this.Di.length-1},a.prototype.Ep=function(u){this.Di[u]=null},a.prototype.jk=function(u){return this.Kc.T(u,1)},a.prototype.uf=function(u){return this.jk(this.xa(u))},a.prototype.xa=function(u){return this.Kc.T(u,4)},a.prototype.te=function(u){return this.Kc.T(u,5)},a.prototype.jc=function(u){return this.Kc.T(u,6)},a.prototype.$e=function(u){return this.Kc.T(u,2)},a.prototype.af=function(u){return this.hk(this.Kc.T(u,2))},a.prototype.mm=function(u){return this.Kc.T(u,7)},a.prototype.Yr=function(u,d){this.D(this.jk(u),d)},a.prototype.lm=function(u,d){this.D(this.uf(u),d)},a.prototype.dh=function(u){return this.Kc.T(u,3)&this.bO},a.prototype.Ab=function(u,d){return(d=this.Gi[d]).size<=u?-1:d.read(u)},a.prototype.Kb=function(u,d,g){(d=this.Gi[d]).size<=u&&d.resize(this.Kc.size,-1),d.write(u,g)},a.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var u=m.ia.qf(this.Kc.Hg,-1),d=0,g=this.Gi.length;d<g;d++)if(this.Gi[d]==null)return this.Gi[d]=u,d;return this.Gi.push(u),this.Gi.length-1},a.prototype.Jg=function(u){this.Gi[u]=null},a.prototype.IP=function(u){var d=this.$e(u),g=this.xa(u),v=this.jc(u);v==g&&(v=this.jc(v))==u&&(v=-1);var b=this.AF(d);b!==u&&b!=g||this.Dt(d,v),g=this.Yn.read(d),isNaN(g)||(this.AJ(d,NaN),this.CJ(d,NaN)),this.yx(u,!0),this.Ly(u)},a.prototype.JP=function(u){for(var d=0,g=u.size;d<g;d++){var v=u.get(d),b=this.$e(this.xa(v));this.Dt(this.$e(v),-1),this.Dt(b,-1),this.yx(v,!0),this.Ly(v)}},a.prototype.AF=function(u){return this.ye.T(u,1)},a.prototype.hk=function(u){return this.ye.T(u,2)},a.prototype.Gn=function(u){return this.ye.T(u,3)},a.prototype.dR=function(u){return this.ye.T(u,4)},a.prototype.Kp=function(u){var d=this.Yn.read(u);return isNaN(d)&&(this.kY(u),d=this.Yn.read(u)),d},a.prototype.La=function(u){return this.g.KF(u,this.Bq)},a.prototype.Le=function(u){return this.g.Pa(u,this.Cm)},a.prototype.uR=function(u){return this.g.Pa(u,this.Cq)},a.prototype.tR=function(u,d){var g=this.Me(u);if(g==-1)return-1;var v=g,b=-1,C=-1;do{if(this.uf(v)==d)return v;if(b==-1){if((b=this.Me(d))==-1)break;C=b}if(this.uf(C)==u)return this.xa(C);v=this.jc(this.xa(v)),C=this.jc(this.xa(C))}while(v!=g&&C!=b);return-1},a.prototype.pB=function(u,d){d.Or(),d=d.get();var g=new m.h;this.Yr(u,g),d.Dc(g),this.lm(u,g),d.Qc(g)},a.prototype.HO=function(u,d){if(u==d)return 0;var g=new m.h;this.lm(u,g);var v=new m.h;return this.lm(d,v),g.qb(v)?0:(d=new m.h,this.Yr(u,d),(u=new m.h).uc(g,d),(g=new m.h).uc(v,d),m.h.nu(u,g))},a.prototype.GO=function(u,d){if(u==d)return 0;var g=new m.h;this.lm(u,g);var v=new m.h;return this.lm(d,v),g.qb(v)?0:(d=new m.h,this.Yr(u,d),(u=new m.h).uc(g,d),(g=new m.h).uc(v,d),0<=g.y&&0<u.y?m.h.nu(u,g):0)},a.prototype.xO=function(){for(var u=m.lc.ox(this.lA),d=new m.h,g=new m.h,v=new m.h,b=new m.h,C=new m.h,M=this.Re;M!=-1;M=this.Rf(M)){var O=this.Me(M);if(O!=-1){var L=O;this.Yr(L,d),this.lm(L,g),C.uc(g,d);var q=C.Sk();do{var U=L;if((L=this.jc(this.xa(L)))!=U){this.lm(L,v),b.uc(v,d),U=b.Sk();var ee=b.wi(C);if(ee*ee/(U*q)*Math.min(U,q)<=u)return!1;C.L(b),q=U,g.L(v)}}while(L!=O)}}return!0},a}(),m.iu=j}(ye||(ye={})),function(m){var j=function(){function T(){this.j=null,this.oH=new m.h,this.pH=new m.h,this.Gj=null,this.Mv=!1,this.tl=-1}return T.prototype.cf=function(p){return p<this.Gj.length&&this.Gj[p]},T.prototype.dl=function(p,h,a,u){var d=m.aa.tf(this.j.g.ic(a));if(m.aa.tf(this.j.g.ic(h))!=2||d!=1)throw m.i.Qa();this.FP(p,h,a,u)},T.prototype.dr=function(p,h){this.j==null&&(this.j=new m.iu),this.j.dr(p,h)},T.prototype.Ft=function(p,h,a){for(m.Tk.V(p,h,a,!0),h=p.ld;h!=-1;h=p.ue(h))p.ic(h)==1736&&m.rn.V(p,h,-1,this.Mv,a);this.dr(p,a)},T.prototype.ME=function(p,h,a,u,d){var g=this.j.g;if(g.ic(p)==1736)for(p=g.Ob(p);p!=-1;p=g.Rb(p)){var v=g.Xa(p);this.j.Le(v),this.j.Le(g.U(v));var b=this.j.uR(v);if(b!=-1){var C=this.j.Ab(b,a);if(C!=1&&C!=2)if(this.cf(this.j.af(b))){this.j.Kb(b,a,1),C=g.vf(h,-1);var M=b,O=this.j.Le(v),L=1;do{var q=this.sm(v,d);g.ij(C,q),u!=-1&&this.j.nn(O,u,1),this.j.Kb(M,a,1),M=this.j.jc(M);do var U=(q=L==1?g.U(v):g.Ma(v))!=-1?this.j.Le(q):-1;while(U==O);var ee=this.j.jk(M);if(ee!=U){do U=(q=L==1?g.Ma(v):g.U(v))!=-1?this.j.Le(q):-1;while(U==O);ee!=U?(U=ee,q=this.j.tj(this.j.km(U))):L=-L}O=U,v=q}while(M!=b);g.kn(C,!0)}else this.j.Kb(b,a,2)}}},T.prototype.eF=function(){for(var p=this.j.$g(),h=new m.ia(0),a=this.j.Re;a!=-1;a=this.j.Rf(a)){var u=this.j.Me(a),d=u;if(u!=-1)do{if(this.j.Ab(d,p)!=1){var g=this.j.xa(d);this.j.Kb(g,p,1),this.j.Kb(d,p,1),this.cf(this.j.af(d))&&this.cf(this.j.af(g))&&h.add(d)}d=this.j.jc(this.j.xa(d))}while(d!=u)}this.j.Jg(p),this.j.JP(h)},T.prototype.sm=function(p,h){return h==-1?p:this.aS(p,h)},T.prototype.aS=function(p,h){var a=this.j.g,u=this.j.km(this.j.Le(p));do{var d=this.j.tj(u);if(a.Qf(a.bd(d))==h)return d;u=this.j.js(u)}while(u!=-1);return p},T.prototype.Ot=function(p,h,a){this.eF();var u=this.j.g,d=u.Ig(1736),g=this.j.$g();return this.uK(p,h,d,a,g,-1),this.j.Jg(g),m.rn.V(u,d,1,this.Mv,null),d},T.prototype.uK=function(p,h,a,u,d,g){for(this.ME(p,a,d,g,u),h!=-1&&this.ME(h,a,d,g,u),p=this.j.g,h=this.j.Re;h!=-1;h=this.j.Rf(h)){var v=this.j.Me(h);if(v!=-1){var b=v;do{var C=this.j.Ab(b,d);if(C!=1&&C!=2)if(this.cf(this.j.af(b))){C=p.vf(a,-1);var M=b;do{var O=this.j.mm(M);O!=-1?O=this.j.tj(O):(O=this.j.tj(this.j.mm(this.j.xa(M))),O=this.j.g.U(O)),O=this.sm(O,u),p.ij(C,O),this.j.Kb(M,d,1),g!=-1&&(O=this.j.Le(O),this.j.nn(O,g,1)),M=this.j.jc(M)}while(M!=b);p.kn(C,!0)}else this.j.Kb(b,d,2);b=this.j.jc(this.j.xa(b))}while(b!=v)}}},T.prototype.aY=function(p,h,a){var u=this.j.g,d=u.Ig(1736),g=u.Ig(1607),v=u.Ig(550);this.eF();var b=-1,C=this.j.$g(),M=this.j.Dp();for(this.uK(p,h,d,a,C,M),p=this.j.Re;p!=-1;p=this.j.Rf(p))if((h=this.j.Me(p))!=-1){var O=h;do{var L=this.j.Ab(O,C),q=this.j.Ab(this.j.xa(O),C);if((L|=q)==2)if(L=this.j.dh(O),this.cf(L)){var U=u.vf(g,-1),ee=O;L=this.Yw(p,u),L=this.sm(L,a),u.ij(U,L),this.j.nn(p,M,1);do{if(L=this.j.uf(ee),q=this.Yw(L,u),q=this.sm(q,a),u.ij(U,q),this.j.Kb(ee,C,1),this.j.Kb(this.j.xa(ee),C,1),this.j.nn(L,M,1),ee=this.j.jc(ee),L=this.j.Ab(ee,C),(L|=q=this.j.Ab(this.j.xa(ee),C))!=2)break;if(L=this.j.dh(ee),!this.cf(L)){this.j.Kb(ee,C,1),this.j.Kb(this.j.xa(ee),C,1);break}}while(ee!=O)}else this.j.Kb(O,C,1),this.j.Kb(this.j.xa(O),C,1);O=this.j.jc(this.j.xa(O))}while(O!=h)}for(p=this.j.Re;p!=-1;p=this.j.Rf(p))(L=this.j.ng(p,M))!=1&&(L=this.j.xd(p),this.cf(L)&&(b==-1&&(b=u.vf(v,-1)),(h=this.j.km(p))!=-1&&(h=this.j.tj(h),L=this.sm(h,a),u.ij(b,L))));return this.j.Ep(M),this.j.Jg(C),m.rn.V(u,d,1,this.Mv,null),(a=[])[0]=v,a[1]=g,a[2]=d,a},T.prototype.Yw=function(p,h){var a=-1;for(p=this.j.km(p);p!=-1;p=this.j.js(p)){var u=this.j.tj(p);a==-1&&(a=u);var d=this.j.La(h.Qf(h.bd(u)));if(this.cf(d)){a=u;break}}return a},T.prototype.lB=function(p,h){for(var a=this.jl(h),u=this.j.jk(h),d=this.j.uf(h),g=0,v=0,b=this.j.km(u);b!=-1;b=this.j.js(b)){var C=this.j.tj(b),M=p.bd(C),O=this.j.La(p.Qf(M));M=p.Xa(M),(O=!!(O&a))&&M==C&&(this.tl=h);var L=p.U(C);L!=-1&&this.j.Le(L)==d?(g++,O&&(this.tl===-1&&M==L&&(C=this.j.jc(h),this.cf(this.jl(C))&&(this.tl=C)),v++)):(C=p.Ma(C))!=-1&&this.j.Le(C)==d&&(g--,O&&(this.tl===-1&&M===C&&(C=this.j.jc(h),this.cf(this.jl(C))&&(this.tl=C)),v--))}return this.j.D(u,this.oH),this.j.D(d,this.pH),(v!=0?v:g)*(p=m.h.tb(this.oH,this.pH))},T.prototype.jl=function(p){return this.j.dh(p)|this.j.af(p)|this.j.af(this.j.xa(p))},T.prototype.xK=function(p){for(var h=this.j.xa(this.j.te(p)),a=-1;h!=p;){if(this.cf(this.jl(h))){if(a!=-1)return-1;a=h}h=this.j.xa(this.j.te(h))}return a!=-1?this.j.xa(a):-1},T.prototype.yK=function(p){for(var h=this.j.xa(this.j.jc(p)),a=-1;h!=p;){if(this.cf(this.jl(h))){if(a!=-1)return-1;a=h}h=this.j.xa(this.j.jc(h))}return a!=-1?this.j.xa(a):-1},T.prototype.mJ=function(p,h,a,u,d){var g=this.j.g,v=p,b=this.j.xa(v);this.j.Kb(v,a,1),this.j.Kb(b,a,1),this.tl=-1;for(var C=this.lB(g,v),M=v,O=-1,L=!1,q=1;;){var U=this.j.te(v);if(U==b)break;if(b=this.j.jc(b),this.j.xa(U)!=b){if((v=this.xK(v))==-1){L=!0;break}b=this.j.xa(v)}else v=U;if(v==p){O=p;break}if(U=this.jl(v),!this.cf(U))break;this.j.Kb(v,a,1),this.j.Kb(b,a,1),M=v,C+=this.lB(g,v),q++}if(O==-1)for(v=p,b=this.j.xa(v),O=v;(p=this.j.jc(v))!=b;){if(b=this.j.te(b),this.j.xa(p)!=b){if((v=this.yK(v))==-1){L=!0;break}b=this.j.xa(v)}else v=p;if(U=this.jl(v),!this.cf(U))break;this.j.Kb(v,a,1),this.j.Kb(b,a,1),O=v,C+=this.lB(g,v),q++}else if(this.tl!=-1&&(M=this.tl,O=this.j.te(this.tl),this.j.xa(O)!=this.j.jc(this.j.xa(M))&&(O=this.xK(M))==-1))throw m.i.Qa();for(0<=C||(v=O,O=this.j.xa(M),M=this.j.xa(v)),a=g.vf(h,-1),v=M,M=this.j.jk(M),L=this.j.uf(O)==M&&L,C=this.Yw(M,g),C=this.sm(C,d),g.ij(a,C),u!=-1&&this.j.nn(M,u,1),M=0,q=L?m.O.truncate((q+1)/2):-1;p=this.j.uf(v),C=this.Yw(p,g),C=this.sm(C,d),g.ij(a,C),M++,u!=-1&&this.j.nn(p,u,1),L&&M==q&&(a=g.vf(h,-1),g.ij(a,C)),v!=O;)if(p=this.j.jc(v),this.j.te(this.j.xa(v))!=this.j.xa(p)){if((v=this.yK(v))==-1)throw m.i.Qa()}else v=p},T.prototype.Pt=function(p){for(var h=this.j.g.Ig(1607),a=this.j.$g(),u=this.j.Re;u!=-1;u=this.j.Rf(u)){var d=this.j.Me(u),g=d;do this.j.Ab(g,a)!=1&&this.cf(this.jl(g))&&this.mJ(g,h,a,-1,p),g=this.j.jc(this.j.xa(g));while(g!=d)}return this.j.Jg(a),h},T.prototype.bY=function(p){for(var h=this.j.g,a=h.Ig(1607),u=h.Ig(550),d=this.j.$g(),g=this.j.Dp(),v=-1,b=this.j.Re;b!=-1;b=this.j.Rf(b)){var C=this.j.Me(b),M=C;do{var O=this.j.Ab(M,d);O!=1&&(O=this.jl(M),this.cf(O)&&this.mJ(M,a,d,g,p)),M=this.j.jc(this.j.xa(M))}while(M!=C)}for(b=this.j.Re;b!=-1;b=this.j.Rf(b))(O=this.j.ng(b,g))!=1&&(O=this.j.xd(b),this.cf(O)&&(v==-1&&(v=h.vf(u,-1)),(C=this.j.km(b))!=-1&&(C=this.j.tj(C),C=this.sm(C,p),h.ij(v,C))));return this.j.Jg(d),this.j.Ep(g),(p=[])[0]=u,p[1]=a,p},T.prototype.mr=function(){for(var p=this.j.g,h=p.Ig(550),a=p.vf(h,-1),u=this.j.Re;u!=-1;u=this.j.Rf(u))if(this.cf(this.j.xd(u))){for(var d=-1,g=this.j.km(u);g!=-1;g=this.j.js(g)){var v=this.j.tj(g);d==-1&&(d=v);var b=this.j.La(p.Qf(p.bd(v)));if(this.cf(b)){d=v;break}}p.ij(a,d)}return h},T.prototype.bq=function(p){this.Gj=[];for(var h=0;h<p;h++)this.Gj[h]=!1},T.aW=function(p,h,a){var u=p.Ia(),d=Array(1e3);m.O.$u(d,null);var g=m.O.lg(1e3,0),v=p.I(),b=!0,C=h.Db()==2;if(h.Db()!=1&&h.Db()!=2)throw m.i.Qa();for(var M=0;M<v;){var O=m.O.truncate(p.lW(d,M)-M);C?m.hd.sK(h,d,O,a,g):m.hd.tK(h,d,O,a,g);for(var L=0,q=0;q<O;q++)g[q]==0&&(b&&(b=!1,u.Fd(p,0,M)),L!=q&&u.Fd(p,M+L,M+q),L=q+1);b||L==O||u.Fd(p,M+L,M+O),M+=O}return b?p:u},T.zG=function(p,h,a){return p instanceof m.de?T.aW(p,h,a):h instanceof m.Sa?p.B()||h.B()?p.Ia():m.Tk.zU(a,p,h)?m.Tk.CO(p,h):p.Ia():T.bW(p,h,a)},T.Av=function(p,h,a,u){var d=new m.l;p.A(d);var g=new m.l;h.A(g);var v=new m.l;if(v.K(d),v.Zb(g),a=m.ta.Wd(a,v,!0),(v=new m.l).K(g),g=m.ta.Er(a),v.W(g,g),!d.isIntersecting(v)){if(p.Db()<=h.Db())return T.ki(T.Xe(p.Ia()),p,"&");if(p.Db()>h.Db())return T.ki(T.Xe(h.Ia()),p,"&")}return g=new T,v=(d=new m.gd).Ib(T.Xe(p)),h=d.Ib(T.Xe(h)),g.Ft(d,a,u),u=g.Av(v,h),p=T.ki(d.Ne(u),p,"&"),m.aa.Hc(p.getType())&&(p.Ch(2,a),p.getType()==1736&&p.fm()),p},T.bW=function(p,h,a){if(p.B()||h.B())return p.Ia();var u=[null],d=[0],g=h.Db()==2;if(h.Db()!=1&&h.Db()!=2)throw m.i.Qa();return u[0]=p.D(),g?m.hd.sK(h,u,1,a,d):m.hd.tK(h,u,1,a,d),d[0]==0?p.Ia():p},T.prototype.LU=function(p,h,a,u,d){if(p.B())return p;var g=new m.gd;return p=g.Ib(p),this.Mk(g,p,h,a,u,d)},T.prototype.NU=function(p,h,a,u,d,g){if(d&&p.ic(h)!=550){var v=new m.RC;v.TX(p,a),v.Ng?(m.Tk.V(p,a,g,!0),d=!1):this.j.yy(a)}else m.Tk.V(p,a,g,!0),d=!1;if(u&&p.ic(h)!=550?this.j.wJ(p,h,g):this.j.vJ(p,h,g),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(p,h,a,u,!1,g);if(this.j.yy(NaN),g=this.j.La(h),this.bq(g+1),this.Gj[g]=!0,p.ic(h)==1736||u&&p.ic(h)!=550)return p.Yo(h,0),h=this.Ot(h,-1,-1),(p=p.Ne(h)).Yo(0),d?p.Ch(1,0):(p.Ch(2,a),p.fm()),p;if(p.ic(h)==1607)return h=this.Pt(-1),p=p.Ne(h),d||p.Ch(2,a),p;if(p.ic(h)==550)return h=this.mr(),p=p.Ne(h),d||p.Ch(2,a),p;throw m.i.Qa()},T.prototype.Mk=function(p,h,a,u,d,g){this.j=new m.iu;try{return this.NU(p,h,a,u,d,g)}finally{this.j.Ug()}},T.Mk=function(p,h,a,u,d){return new T().LU(p,h,a,u,d)},T.prototype.MU=function(p,h,a,u){this.Mv=p,this.j=new m.iu,p=h.In(a);var d=h.ic(a);if(p!=1||d==550?this.j.vJ(h,a,u):this.j.wJ(h,a,u),!this.j.pA)if(this.j.yy(NaN),u=this.j.La(a),this.bq(u+1),this.Gj[u]=!0,h.ic(a)==1736||p==1&&h.ic(a)!=550)h.Yo(a,0),u=this.Ot(a,-1,-1),h.hC(u,a),h.BB(u);else if(h.ic(a)==1607)u=this.Pt(-1),h.hC(u,a),h.BB(u);else{if(h.ic(a)!=550)throw m.i.fa("internal error");u=this.mr(),h.hC(u,a),h.BB(u)}},T.prototype.im=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),u=m.aa.tf(this.j.g.ic(h));if(a>u)return p;var d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)]=!0,a==2&&u==2)return this.Ot(p,h,-1);if(a==1&&u==2||a==1&&u==1)return this.Pt(-1);if(a==0)return this.mr();throw m.i.Qa()},T.prototype.Av=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),u=m.aa.tf(this.j.g.ic(h)),d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)|this.j.La(h)]=!0,d=-1,1<this.j.g.ht.Aa&&(d=p),a==2&&u==2)return this.Ot(p,h,d);if(a==1&&0<u||u==1&&0<a)return this.Pt(d);if(a==0||u==0)return this.mr();throw m.i.Qa()},T.prototype.Pz=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),u=m.aa.tf(this.j.g.ic(h)),d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)|this.j.La(h)]=!0,d=-1,1<this.j.g.ht.Aa&&(d=p),a==2&&u==2)return this.aY(p,h,d);if(a==1&&0<u||u==1&&0<a)return this.bY(d);if(a==0||u==0)return(p=[])[0]=this.mr(),p;throw m.i.Qa()},T.prototype.ep=function(p,h){var a=m.aa.tf(this.j.g.ic(p)),u=m.aa.tf(this.j.g.ic(h)),d=this.j.La(p),g=this.j.La(h);if(this.bq(1+(d|g)),this.Gj[this.j.La(p)]=!0,this.Gj[this.j.La(h)]=!0,a==2&&u==2)return this.Ot(p,h,-1);if(a==1&&u==1)return this.Pt(-1);if(a==0&&u==0)return this.mr();throw m.i.Qa()},T.Xe=function(p){var h=p.getType();return h==197?(h=new m.Da(p.description),p.B()||h.ad(p,!1),h):h==33?(h=new m.de(p.description),p.B()||h.add(p),h):h==322?(h=new m.Ta(p.description),p.B()||h.oc(p,!0),h):p},T.ki=function(p,h,a){var u=p.getType();return u==197?(h=new m.Da(p.description),p.B()||h.ad(p,!1),h):u!=33||a!="|"&&a!="^"?u==322?(h=new m.Ta(p.description),p.B()||h.oc(p,!0),h):u==33&&a=="-"&&h.getType()==33||u==550&&a=="&"&&h.getType()==33?(h=new m.Sa(p.description),p.B()||p.ve(0,h),h):p:(h=new m.de(p.description),p.B()||h.add(p),h)},T.im=function(p,h,a,u){if(p.B()||h.B()||p.Db()>h.Db())return T.ki(T.Xe(p),p,"-");var d=new m.l;p.A(d);var g=new m.l;if(h.A(g),!d.isIntersecting(g))return T.ki(T.Xe(p),p,"-");var v=new m.l;return v.K(d),v.Zb(g),a=m.ta.Wd(a,v,!0),g=new T,v=(d=new m.gd).Ib(T.Xe(p)),h=d.Ib(T.Xe(h)),g.Ft(d,a,u),u=g.im(v,h),u=d.Ne(u),p=T.ki(u,p,"-"),m.aa.Hc(p.getType())&&(p.Ch(2,a),p.getType()==1736&&p.fm()),p},T.VP=function(p,h,a){if(2>p.length)throw m.i.N("not enough geometries to dissolve");for(var u=0,d=0,g=p.length;d<g;d++)u=Math.max(p[d].Db(),u);var v=new m.l;v.Oa();var b=new m.gd,C=-1,M=0,O=-1;for(d=0,g=p.length;d<g;d++)if(p[d].Db()==u)if(p[d].B())O==-1&&(O=d);else{O=d,C==-1?C=b.Ib(T.Xe(p[d])):b.uN(C,T.Xe(p[d]));var L=new m.l;p[d].xc(L),v.Zb(L),M++}return 2>M?T.Xe(p[O]):(p=u==2,h=m.ta.Wd(u==0?h:null,v,!0),new T().Mk(b,C,h,p,!0,a))},T.Pz=function(p,h,a,u){var d=[null,null,null],g=new m.l;p.A(g);var v=new m.l;h.A(v);var b=new m.l;if(b.K(g),b.Zb(v),a=m.ta.Wd(a,b,!0),(b=new m.l).K(v),v=m.ta.Er(a),b.W(v,v),!g.isIntersecting(b)){if(p.Db()<=h.Db())return d[(p=T.ki(T.Xe(p.Ia()),p,"&")).Db()]=p,d;if(p.Db()>h.Db())return d[(p=T.ki(T.Xe(h.Ia()),p,"&")).Db()]=p,d}for(v=new T,b=(g=new m.gd).Ib(T.Xe(p)),h=g.Ib(T.Xe(h)),v.Ft(g,a,u),u=v.Pz(b,h),h=0;h<u.length;h++)v=T.ki(g.Ne(u[h]),p,"&"),m.aa.Hc(v.getType())&&(v.Ch(2,a),v.getType()==1736&&v.fm()),d[v.Db()]=v;return d},T.ep=function(p,h,a,u){if(p.Db()>h.Db())return T.ki(T.Xe(p),p,"^");if(p.Db()<h.Db()||p.B())return T.ki(T.Xe(h),p,"^");if(h.B())return T.ki(T.Xe(p),p,"^");var d=new m.l;p.A(d);var g=new m.l;h.A(g);var v=new m.l;return v.K(d),v.Zb(g),a=m.ta.Wd(a,v,!0),g=new T,v=(d=new m.gd).Ib(T.Xe(p)),h=d.Ib(T.Xe(h)),g.Ft(d,a,u),u=g.ep(v,h),p=T.ki(d.Ne(u),p,"^"),m.aa.Hc(p.getType())&&(p.Ch(2,a),p.getType()==1736&&p.fm()),p},T.prototype.LQ=function(p,h){var a=this.j.g;p=a.vf(p,-1);for(var u=h.size,d=0;d<u;d++){var g=h.get(d);a.ij(p,g)}a.kn(p,!0)},T.prototype.aX=function(p,h){for(var a=this.j.g,u=a.ld;u!=-1;u=a.ue(u))if(u==h)for(var d=a.Ob(u);d!=-1;d=a.Rb(d)){var g=a.Xa(d);if(g!=-1)for(var v=a.U(g);v!=-1;){g=this.j.Le(g);var b=this.j.Le(v);(g=this.j.tR(g,b))!=-1&&(b=this.j.xa(g),this.j.Kb(g,p,1),this.j.Kb(b,p,2)),g=v,v=a.U(g)}}},T.prototype.cW=function(p,h,a,u){a=this.j.La(a),u=this.j.La(u);var d=new m.ia(0);d.Jb(256);for(var g=this.j.g,v=this.j.$g(),b=this.j.Re;b!=-1;b=this.j.Rf(b)){var C=this.j.Me(b);if(C!=-1){var M=C;do{if(this.j.Ab(M,v)!=1){var O=M,L=M,q=!1,U=0;do{if(this.j.Kb(O,v,1),!q){var ee=this.j.dh(O);ee&u&&this.j.af(O)&a&&(L=O,q=!0)}q&&(d.add(this.j.tj(this.j.km(this.j.jk(O)))),p!=-1&&(ee=this.j.dh(O))&u&&(U|=ee=this.j.Ab(O,p))),O=this.j.jc(O)}while(O!=L);q&&0<this.j.Kp(this.j.$e(L))&&(O=g.Ig(1736),this.LQ(O,d),h!=-1&&g.HJ(O,h,U)),d.clear(!1)}M=this.j.jc(this.j.xa(M))}while(M!=C)}}this.j.Jg(v)},T.prototype.FP=function(p,h,a,u){this.j.yW();var d=-1;p!=-1&&(d=this.j.$g(),this.aX(d,a)),this.cW(d,p,h,a),d!=-1&&(this.j.Jg(d),d=-1);var g=this.j.g;for(p=0,d=g.ld;d!=-1;d=g.ue(d))d!=h&&d!=a&&(u.add(d),p++);u.Vd(0,p,function(v,b){return(v=g.wz(g.Ob(v)))<(b=g.wz(g.Ob(b)))?-1:v==b?0:1})},T.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},T}();m.Fg=j}(ye||(ye={})),function(m){var j=function(){function T(p){p!==void 0?this.setScale(p):this.RB()}return T.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},T.prototype.Nb=function(p){return this==p||p instanceof T&&this.bb==p.bb&&this.eb==p.eb&&this.Gb==p.Gb&&this.jb==p.jb&&this.ab==p.ab&&this.Lb==p.Lb},T.prototype.cc=function(){return m.O.uj(),m.O.uj(),m.O.uj(),m.O.uj(),m.O.uj(),m.O.uj()},T.prototype.Eh=function(p,h){var a=this.jb*p.x+this.ab*p.y+this.Lb;h.x=this.bb*p.x+this.eb*p.y+this.Gb,h.y=a},T.prototype.eY=function(p,h,a){for(var u=0;u<h;u++){var d=p[u].x,g=p[u].y,v=this.bb*d+this.eb*g+this.Gb;d=this.jb*d+this.ab*g+this.Lb,a[u]!=null?a[u].ma(v,d):a[u]=m.h.construct(v,d)}},T.prototype.multiply=function(p){T.multiply(this,p,this)},T.multiply=function(p,h,a){var u=p.bb*h.bb+p.jb*h.eb,d=p.eb*h.bb+p.ab*h.eb,g=p.Gb*h.bb+p.Lb*h.eb+h.Gb,v=p.bb*h.jb+p.jb*h.ab,b=p.eb*h.jb+p.ab*h.ab;p=p.Gb*h.jb+p.Lb*h.ab+h.Lb,a.bb=u,a.eb=d,a.Gb=g,a.jb=v,a.ab=b,a.Lb=p},T.prototype.Of=function(){var p=new T;return p.bb=this.bb,p.eb=this.eb,p.Gb=this.Gb,p.jb=this.jb,p.ab=this.ab,p.Lb=this.Lb,p},T.prototype.mC=function(p){if(!p.B()){for(var h=[],a=0;4>a;a++)h[a]=new m.h;p.nB(h),this.fY(h,h),p.Zw(h,4)}},T.prototype.fY=function(p,h){for(var a=0;a<p.length;a++){var u=new m.h,d=p[a];u.x=this.bb*d.x+this.eb*d.y+this.Gb,u.y=this.jb*d.x+this.ab*d.y+this.Lb,h[a]=u}},T.prototype.pS=function(p,h){p.B()||h.B()||p.R()==0||p.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=h.R()/p.R(),this.ab=h.ca()/p.ca(),this.Gb=h.v-p.v*this.bb,this.Lb=h.G-p.G*this.ab)},T.prototype.dY=function(p){var h=new m.h,a=new m.h;h.ma(this.bb,this.jb),a.ma(this.eb,this.ab),h.sub(h);var u=.5*h.Sk();return h.ma(this.bb,this.jb),a.ma(this.eb,this.ab),h.add(a),p*(u>(h=.5*h.Sk())?Math.sqrt(u):Math.sqrt(h))},T.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},T.prototype.isIdentity=function(p){if(p!==void 0){var h=m.h.construct(0,1);return this.Eh(h,h),h.sub(m.h.construct(0,1)),h.Sk()>p*p?!1:(h.ma(0,0),this.Eh(h,h),!(h.Sk()>p*p)&&(h.ma(1,0),this.Eh(h,h),h.sub(m.h.construct(1,0)),h.Sk()<=p*p))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},T.prototype.Bi=function(p){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*p*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},T.prototype.gg=function(p,h){this.bb=1,this.eb=0,this.Gb=p,this.jb=0,this.ab=1,this.Lb=h},T.prototype.setScale=function(p,h){h!==void 0?(this.bb=p,this.jb=this.Gb=this.eb=0,this.ab=h,this.Lb=0):this.setScale(p,p)},T.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},T.prototype.setRotate=function(p){this.pX(Math.cos(p),Math.sin(p))},T.prototype.pX=function(p,h){this.bb=p,this.eb=-h,this.Gb=0,this.jb=h,this.ab=p,this.Lb=0},T.prototype.shift=function(p,h){this.Gb+=p,this.Lb+=h},T.prototype.scale=function(p,h){this.bb*=p,this.eb*=p,this.Gb*=p,this.jb*=h,this.ab*=h,this.Lb*=h},T.prototype.flipX=function(p,h){this.bb=-this.bb,this.eb=-this.eb,this.Gb=p+h-this.Gb},T.prototype.flipY=function(p,h){this.jb=-this.jb,this.ab=-this.ab,this.Lb=p+h-this.Lb},T.prototype.rotate=function(p){var h=new T;h.setRotate(p),this.multiply(h)},T.prototype.inverse=function(p){if(p!==void 0){var h=this.bb*this.ab-this.eb*this.jb;h==0?p.lx():(h=1/h,p.Gb=(this.eb*this.Lb-this.Gb*this.ab)*h,p.Lb=(this.Gb*this.jb-this.bb*this.Lb)*h,p.bb=this.ab*h,p.eb=-this.eb*h,p.jb=-this.jb*h,p.ab=this.bb*h)}else this.inverse(this)},T}();m.Dd=j}(ye||(ye={})),function(m){var j=function(){function T(){}return T.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},T.prototype.setScale=function(p,h,a){this.bb=p,this.eb=this.Ze=this.jb=0,this.ab=h,this.Fe=this.Ee=this.Ge=0,this.He=a,this.hg=this.Lb=this.Gb=0},T.prototype.setTranslate=function(p,h,a){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=p,this.Lb=h,this.hg=a},T.prototype.translate=function(p,h,a){this.Gb+=p,this.Lb+=h,this.hg+=a},T.prototype.mC=function(p){if(!p.B()){for(var h=new m.Nd[8],a=0;8>a;a++)h[a]=new m.Nd;p.nB(h),this.transform(h,8,h),p.Zw(h)}},T.prototype.transform=function(p,h,a){for(var u=0;u<h;u++){var d=new m.Nd,g=p[u];d.x=this.bb*g.x+this.eb*g.y+this.Ee*g.z+this.Gb,d.y=this.jb*g.x+this.ab*g.y+this.Fe*g.z+this.Lb,d.z=this.Ze*g.x+this.Ge*g.y+this.He*g.z+this.hg,a[u]=d}},T.prototype.fp=function(p){var h=new m.Nd;return h.x=this.bb*p.x+this.eb*p.y+this.Ee*p.z+this.Gb,h.y=this.jb*p.x+this.ab*p.y+this.Fe*p.z+this.Lb,h.z=this.Ze*p.x+this.Ge*p.y+this.He*p.z+this.hg,h},T.prototype.Ag=function(p){T.multiply(this,p,this)},T.multiply=function(p,h,a){var u=p.bb*h.bb+p.jb*h.eb+p.Ze*h.Ee,d=p.bb*h.jb+p.jb*h.ab+p.Ze*h.Fe,g=p.bb*h.Ze+p.jb*h.Ge+p.Ze*h.He,v=p.eb*h.bb+p.ab*h.eb+p.Ge*h.Ee,b=p.eb*h.jb+p.ab*h.ab+p.Ge*h.Fe,C=p.eb*h.Ze+p.ab*h.Ge+p.Ge*h.He,M=p.Ee*h.bb+p.Fe*h.eb+p.He*h.Ee,O=p.Ee*h.jb+p.Fe*h.ab+p.He*h.Fe,L=p.Ee*h.Ze+p.Fe*h.Ge+p.He*h.He,q=p.Gb*h.bb+p.Lb*h.eb+p.hg*h.Ee+h.Gb,U=p.Gb*h.jb+p.Lb*h.ab+p.hg*h.Fe+h.Lb;p=p.Gb*h.Ze+p.Lb*h.Ge+p.hg*h.He+h.hg,a.bb=u,a.jb=d,a.Ze=g,a.eb=v,a.ab=b,a.Ge=C,a.Ee=M,a.Fe=O,a.He=L,a.Gb=q,a.Lb=U,a.hg=p},T.inverse=function(p,h){var a=p.bb*(p.ab*p.He-p.Ge*p.Fe)-p.jb*(p.eb*p.He-p.Ge*p.Ee)+p.Ze*(p.eb*p.Fe-p.ab*p.Ee);if(a==0)throw m.i.fa("math singularity");var u=1/a;a=(p.ab*p.He-p.Ge*p.Fe)*u;var d=-(p.eb*p.He-p.Ge*p.Ee)*u,g=(p.eb*p.Fe-p.ab*p.Ee)*u,v=-(p.jb*p.He-p.Fe*p.Ze)*u,b=(p.bb*p.He-p.Ze*p.Ee)*u,C=-(p.bb*p.Fe-p.jb*p.Ee)*u,M=(p.jb*p.Ge-p.Ze*p.ab)*u,O=-(p.bb*p.Ge-p.Ze*p.eb)*u;u*=p.bb*p.ab-p.jb*p.eb;var L=-(p.Gb*a+p.Lb*d+p.hg*g),q=-(p.Gb*v+p.Lb*b+p.hg*C);p=-(p.Gb*M+p.Lb*O+p.hg*u),h.bb=a,h.jb=v,h.Ze=M,h.eb=d,h.ab=b,h.Ge=O,h.Ee=g,h.Fe=C,h.He=u,h.Gb=L,h.Lb=q,h.hg=p},T.prototype.Of=function(){var p=new T;return p.bb=this.bb,p.jb=this.jb,p.Ze=this.Ze,p.eb=this.eb,p.ab=this.ab,p.Ge=this.Ge,p.Ee=this.Ee,p.Fe=this.Fe,p.He=this.He,p.Gb=this.Gb,p.Lb=this.Lb,p.hg=this.hg,p},T}();m.JY=j}(ye||(ye={})),function(m){var j=function(p){function h(a){if(a!==void 0)a=p.call(this,a.cc(),a)||this;else{(a=p.call(this)||this).bg=[],a.bg[0]=0,a.Aa=1,a.uh=[];for(var u=0;10>u;u++)a.uh[u]=-1;a.uh[a.bg[0]]=0}return a.jq=!0,a}return ri(h,p),h.prototype.re=function(a){this.hasAttribute(a)||(this.uh[a]=0,this.jD())},h.prototype.removeAttribute=function(a){if(a==0)throw m.i.N("Position attribue cannot be removed");this.hasAttribute(a)&&(this.uh[a]=-1,this.jD())},h.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var a=0;a<this.uh.length;a++)this.uh[a]=-1;this.uh[this.bg[0]]=0,this.jq=!0},h.prototype.EF=function(){return T.kz().add(this)},h.og=function(){return T.kz().$R()},h.prototype.tM=function(){var a=this.cc();return new m.ra(a,this)},h.prototype.jD=function(){for(var a=this.Aa=0,u=0;10>a;a++)0<=this.uh[a]&&(this.bg[u]=a,this.uh[a]=u,u++,this.Aa++);this.jq=!0},h.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},h.prototype.Nb=function(a){if(a==null)return!1;if(a==this)return!0;if(!(a instanceof h)||a.Aa!=this.Aa)return!1;for(var u=0;u<this.Aa;u++)if(this.bg[u]!=a.bg[u])return!1;return this.jq==a.jq},h.prototype.GG=function(a){if(a.Aa!=this.Aa)return!1;for(var u=0;u<this.Aa;u++)if(this.bg[u]!=a.bg[u])return!1;return!0},h.Iw=function(a,u){for(var d=[],g=0;g<a.Aa;g++)d[g]=-1;g=0;for(var v=a.Aa;g<v;g++)d[g]=u.Pf(a.kd(g));return d},h.BR=function(a,u){return(a=new h(a)).re(u),a.EF()},h.CR=function(a,u){for(var d=null,g=0;10>g;g++)!a.hasAttribute(g)&&u.hasAttribute(g)&&(d==null&&(d=new h(a)),d.re(g));return d!=null?d.EF():a},h}(m.ra);m.ee=j;var T=function(){function p(){this.map=[];var h=new j;this.add(h),(h=new j).re(1),this.add(h)}return p.kz=function(){return p.bL},p.prototype.$R=function(){return p.ft},p.prototype.add=function(h){var a=h.cc();if(p.ft!=null&&p.ft.cc()==a&&h.GG(p.ft))return p.ft;if(p.Dw!=null&&p.Dw.cc()==a&&h.GG(p.Dw))return p.Dw;var u=null;return this.map[a]!==void 0&&(u=this.map[a]),u==null&&((u=h.tM()).Aa==1?p.ft=u:u.Aa==2&&u.kd(1)==1?p.Dw=u:this.map[a]=u),u},p.bL=new p,p}()}(ye||(ye={}));var mn={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},jr={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Cs=new(function(){function m(){this.RM=50,this.np=new Map,this.gj=[]}return m.prototype.clear=function(){this.gj.length=0,this.np.clear()},m.prototype.delete=function(j){return!!this.np.delete(j)&&(this.gj.splice(this.gj.indexOf(j),1),!0)},m.prototype.get=function(j){var T=this.np.get(j);if(T!==void 0)return this.gj[0]!==j&&(this.gj.splice(this.gj.indexOf(j),1),this.gj.unshift(j)),T},m.prototype.has=function(j){return this.np.has(j)},m.prototype.set=function(j,T){return this.get(j)!==void 0&&this.delete(j),this.gj.unshift(j),this.np.set(j,T),this.oM(),this},m.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var j=this.gj.pop();this.np.delete(j)}},m}()),xt=((ss={}).convertJSONToGeometry=function(m){return ye.$b.fP(m)},ss.hasM=function(m){return m.hasAttribute(ye.Ih.M)},ss.hasZ=function(m){return m.hasAttribute(ye.Ih.Z)},ss.getPointX=function(m){return m.Lg()},ss.getPointY=function(m){return m.ih()},ss.getPointZ=function(m){return m.bS()},ss.getPointM=function(m){return m.zR()},ss.getXMin=function(m){return m.es()},ss.getYMin=function(m){return m.gs()},ss.getXMax=function(m){return m.ds()},ss.getYMax=function(m){return m.fs()},ss.getZExtent=function(m){return m.Tg(ye.Ih.Z,0)},ss.getMExtent=function(m){return m.Tg(ye.Ih.M,0)},ss.exportPaths=function(m){var j=[],T=m.da(),p=null,h=null,a=m.hasAttribute(ye.Ih.Z),u=m.hasAttribute(ye.Ih.M);a&&(p=m.ub(ye.Ih.Z)),u&&(h=m.ub(ye.Ih.M));for(var d=new ye.h,g=0;g<T;g++){for(var v=m.Ba(g),b=m.Ja(g),C=0,M=0,O=NaN,L=NaN,q=NaN,U=NaN,ee=m.dc(g),Q=[],ge=v;ge<v+b;ge++){m.D(ge,d),U=q=NaN;var ve=[d.x,d.y];a&&(q=p.get(ge),ve.push(q)),u&&(U=h.get(ge),ve.push(U)),ge==v&&ee&&(C=d.x,M=d.y,O=q,L=U),Q.push(ve)}!ee||C==d.x&&M==d.y&&(!a||isNaN(O)&&isNaN(q)||O==q)&&(!u||isNaN(L)&&isNaN(U)||L==U)||Q.push(Q[0].slice(0)),j.push(Q)}return j},ss.exportPathsFlat=function(){},ss.exportPoints=function(m){var j=m.hasAttribute(ye.Ih.Z),T=m.hasAttribute(ye.Ih.M),p=null,h=null;j&&(p=m.ub(ye.Ih.Z)),T&&(h=m.ub(ye.Ih.M));for(var a=new ye.h,u=m.I(),d=[],g=0;g<u;g++){m.D(g,a);var v=[a.x,a.y];j&&v.push(p.get(g)),T&&v.push(h.get(g)),d.push(v)}return d},ss.exportPointsFlat=function(){},ss),Ys=new Map;return function(){function m(){}return m.buffer=de,m.clip=_,m.contains=S,m.convexHull=se,m.crosses=P,m.cut=x,m.densify=it,m.difference=oe,m.disjoint=V,m.distance=A,m.equals=k,m.extendedSpatialReferenceInfo=y,m.generalize=Fe,m.geodesicArea=Ct,m.geodesicBuffer=Se,m.geodesicDensify=vt,m.geodesicLength=qt,m.intersect=ue,m.intersects=$,m.isSimple=J,m.nearestCoordinate=Re,m.nearestVertex=Oe,m.nearestVertices=we,m.offset=ne,m.overlaps=B,m.planarArea=ot,m.planarLength=ct,m.relate=W,m.simplify=re,m.symmetricDifference=pe,m.touches=F,m.union=ce,m.within=G,m.rotate=ye.Ex.rotate,m.flipHorizontal=ye.Ex.JQ,m.flipVertical=ye.Ex.KQ,m.intersectLinesToPoints=oo,m.ExtendedParams=ye.yC,m.clearDefaultSpatialReferenceTolerance=hr,m.changeDefaultSpatialReferenceTolerance=Us,m._enableProjection=Lt,m._project=cs,m._getTransformation=Dt,m._getTransformationBySuitability=Yi,m}()}var i=e();i!==void 0&&(t.exports=i)}(Nee)),Nee.exports}var L0e=hXe();const Wi=uXe(L0e),dXe=cXe({__proto__:null,default:Wi},[L0e]),fXe=Object.freeze(Object.defineProperty({__proto__:null,G:Wi,g:dXe},Symbol.toStringTag,{value:"Module"})),Ms={convertToGEGeometry:pXe,exportPoint:mXe,exportPolygon:gXe,exportPolyline:yXe,exportMultipoint:vXe,exportExtent:_Xe};function pXe(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function mXe(t,e,i){const s=t.hasZ(e),n=t.hasM(e),r=new Hi({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return s&&(r.z=t.getPointZ(e)),n&&(r.m=t.getPointM(e)),r.cache._geVersion=e,r}function gXe(t,e,i){const s=new Wa({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function yXe(t,e,i){const s=new Ef({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function vXe(t,e,i){const s=new Dv({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return s.cache._geVersion=e,s}function _Xe(t,e,i){const s=t.hasZ(e),n=t.hasM(e),r=new cr({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(s){const o=t.getZExtent(e);r.zmin=o.vmin,r.zmax=o.vmax}if(n){const o=t.getMExtent(e);r.mmin=o.vmin,r.mmax=o.vmax}return r.cache._geVersion=e,r}const bXe=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Ms},Symbol.toStringTag,{value:"Module"}));function $s(t){const e=Array.isArray(t)?t[0].spatialReference:t.spatialReference;return e?gC(qi,e):qi.WGS84}function xXe(t){return Wi.extendedSpatialReferenceInfo(t)}function wXe(t,e){return Wi.clip(Ms,$s(t),t,e)}function SXe(t,e){return Wi.cut(Ms,$s(t),t,e)}function EXe(t,e){return Wi.contains(Ms,$s(t),t,e)}function CXe(t,e){return Wi.crosses(Ms,$s(t),t,e)}function F0e(t,e,i){return Wi.distance(Ms,$s(t),t,e,i)}function PXe(t,e){return Wi.equals(Ms,$s(t),t,e)}function TXe(t,e){return Wi.intersects(Ms,$s(t),t,e)}function IXe(t,e){return Wi.touches(Ms,$s(t),t,e)}function MXe(t,e){return Wi.within(Ms,$s(t),t,e)}function AXe(t,e){return Wi.disjoint(Ms,$s(t),t,e)}function DXe(t,e){return Wi.overlaps(Ms,$s(t),t,e)}function kXe(t,e,i){return Wi.relate(Ms,$s(t),t,e,i)}function NXe(t){return Wi.isSimple(Ms,$s(t),t)}function z0e(t){return Wi.simplify(Ms,$s(t),t)}function $Xe(t,e=!1){return Wi.convexHull(Ms,$s(t),t,e)}function OXe(t,e){return Wi.difference(Ms,$s(t),t,e)}function RXe(t,e){return Wi.symmetricDifference(Ms,$s(t),t,e)}function LXe(t,e){return Wi.intersect(Ms,$s(t),t,e)}function FXe(t,e=null){return Wi.union(Ms,$s(t),t,e)}function zXe(t,e,i,s,n,r){return Wi.offset(Ms,$s(t),t,e,i,s,n,r)}function qXe(t,e,i,s=!1){return Wi.buffer(Ms,$s(t),t,e,i,s)}function VXe(t,e,i,s,n,r){return Wi.geodesicBuffer(Ms,$s(t),t,e,i,s,n,r)}function GXe(t,e,i=!0){return Wi.nearestCoordinate(Ms,$s(t),t,e,i)}function jXe(t,e){return Wi.nearestVertex(Ms,$s(t),t,e)}function BXe(t,e,i,s){return Wi.nearestVertices(Ms,$s(t),t,e,i,s)}function ej(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function HXe(t,e,i){if(t==null)throw new L2;const s=t.spatialReference;if((i=i??ej(t))==null)throw new L2;const n=t.constructor.fromJSON(Wi.rotate(t,e,i));return n.spatialReference=s,n}function UXe(t,e){if(t==null)throw new L2;const i=t.spatialReference;if((e=e??ej(t))==null)throw new L2;const s=t.constructor.fromJSON(Wi.flipHorizontal(t,e));return s.spatialReference=i,s}function YXe(t,e){if(t==null)throw new L2;const i=t.spatialReference;if((e=e??ej(t))==null)throw new L2;const s=t.constructor.fromJSON(Wi.flipVertical(t,e));return s.spatialReference=i,s}function XXe(t,e,i,s){return Wi.generalize(Ms,$s(t),t,e,i,s)}function WXe(t,e,i){return Wi.densify(Ms,$s(t),t,e,i)}function ZXe(t,e,i,s=0){return Wi.geodesicDensify(Ms,$s(t),t,e,i,s)}function KXe(t,e){return Wi.planarArea(Ms,$s(t),t,e)}function JXe(t,e){return Wi.planarLength(Ms,$s(t),t,e)}function QXe(t,e,i){return Wi.geodesicArea(Ms,$s(t),t,e,i)}function eWe(t,e,i){return Wi.geodesicLength(Ms,$s(t),t,e,i)}function tWe(t,e){return Wi.intersectLinesToPoints(Ms,$s(t),t,e)}function iWe(t,e){Wi.changeDefaultSpatialReferenceTolerance(t,e)}function sWe(t){Wi.clearDefaultSpatialReferenceTolerance(t)}let L2=class extends Error{constructor(){super("Illegal Argument Exception")}};const nvt=Object.freeze(Object.defineProperty({__proto__:null,buffer:qXe,changeDefaultSpatialReferenceTolerance:iWe,clearDefaultSpatialReferenceTolerance:sWe,clip:wXe,contains:EXe,convexHull:$Xe,crosses:CXe,cut:SXe,densify:WXe,difference:OXe,disjoint:AXe,distance:F0e,equals:PXe,extendedSpatialReferenceInfo:xXe,flipHorizontal:UXe,flipVertical:YXe,generalize:XXe,geodesicArea:QXe,geodesicBuffer:VXe,geodesicDensify:ZXe,geodesicLength:eWe,intersect:LXe,intersectLinesToPoints:tWe,intersects:TXe,isSimple:NXe,nearestCoordinate:GXe,nearestVertex:jXe,nearestVertices:BXe,offset:zXe,overlaps:DXe,planarArea:KXe,planarLength:JXe,relate:kXe,rotate:HXe,simplify:z0e,symmetricDifference:RXe,touches:IXe,union:FXe,within:MXe},Symbol.toStringTag,{value:"Module"}));function nWe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function rWe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function oWe(t,e,i,s,n,r,o){return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t[4]=r,t[5]=o,t}function q0e(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],l=e[5];let c=i*r-s*n;return c?(c=1/c,t[0]=r*c,t[1]=-s*c,t[2]=-n*c,t[3]=i*c,t[4]=(n*l-r*o)*c,t[5]=(s*o-i*l)*c,t):null}function aWe(t){return t[0]*t[3]-t[1]*t[2]}function V0e(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=i[0],y=i[1],_=i[2],x=i[3],S=i[4],P=i[5];return t[0]=s*f+r*y,t[1]=n*f+o*y,t[2]=s*_+r*x,t[3]=n*_+o*x,t[4]=s*S+r*P+l,t[5]=n*S+o*P+c,t}function lWe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=Math.sin(i),y=Math.cos(i);return t[0]=s*y+r*f,t[1]=n*y+o*f,t[2]=s*-f+r*y,t[3]=n*-f+o*y,t[4]=l,t[5]=c,t}function uWe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=i[0],y=i[1];return t[0]=s*f,t[1]=n*f,t[2]=r*y,t[3]=o*y,t[4]=l,t[5]=c,t}function cWe(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=i[0],y=i[1];return t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=s*f+r*y+l,t[5]=n*f+o*y+c,t}function hWe(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t}function dWe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function fWe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function pWe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function mWe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function gWe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function G0e(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function yWe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function vWe(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t}function _We(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function bWe(t,e){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],l=t[5],c=e[0],f=e[1],y=e[2],_=e[3],x=e[4],S=e[5],P=ro();return Math.abs(i-c)<=P*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(s-f)<=P*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(n-y)<=P*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-_)<=P*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(o-x)<=P*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(l-S)<=P*Math.max(1,Math.abs(l),Math.abs(S))}const xWe=V0e,wWe=G0e;Object.freeze(Object.defineProperty({__proto__:null,add:gWe,copy:nWe,determinant:aWe,equals:bWe,exactEquals:_We,frob:mWe,fromRotation:hWe,fromScaling:dWe,fromTranslation:fWe,identity:rWe,invert:q0e,mul:xWe,multiply:V0e,multiplyScalar:yWe,multiplyScalarAndAdd:vWe,rotate:lWe,scale:uWe,set:oWe,str:pWe,sub:wWe,subtract:G0e,translate:cWe},Symbol.toStringTag,{value:"Module"}));function SWe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function j0e(t,e,i){i*=.5;const s=Math.sin(i);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(i),t}function EWe(t,e){const i=2*Math.acos(e[3]),s=Math.sin(i/2);return s>ro()?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),i}function B0e(t,e,i){const s=e[0],n=e[1],r=e[2],o=e[3],l=i[0],c=i[1],f=i[2],y=i[3];return t[0]=s*y+o*l+n*f-r*c,t[1]=n*y+o*c+r*l-s*f,t[2]=r*y+o*f+s*c-n*l,t[3]=o*y-s*l-n*c-r*f,t}function CWe(t,e,i){i*=.5;const s=e[0],n=e[1],r=e[2],o=e[3],l=Math.sin(i),c=Math.cos(i);return t[0]=s*c+o*l,t[1]=n*c+r*l,t[2]=r*c-n*l,t[3]=o*c-s*l,t}function PWe(t,e,i){i*=.5;const s=e[0],n=e[1],r=e[2],o=e[3],l=Math.sin(i),c=Math.cos(i);return t[0]=s*c-r*l,t[1]=n*c+o*l,t[2]=r*c+s*l,t[3]=o*c-n*l,t}function TWe(t,e,i){i*=.5;const s=e[0],n=e[1],r=e[2],o=e[3],l=Math.sin(i),c=Math.cos(i);return t[0]=s*c+n*l,t[1]=n*c-s*l,t[2]=r*c+o*l,t[3]=o*c-r*l,t}function IWe(t,e){const i=e[0],s=e[1],n=e[2];return t[0]=i,t[1]=s,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-s*s-n*n)),t}function k9(t,e,i,s){const n=e[0],r=e[1],o=e[2],l=e[3];let c,f,y,_,x,S=i[0],P=i[1],A=i[2],k=i[3];return f=n*S+r*P+o*A+l*k,f<0&&(f=-f,S=-S,P=-P,A=-A,k=-k),1-f>ro()?(c=Math.acos(f),y=Math.sin(c),_=Math.sin((1-s)*c)/y,x=Math.sin(s*c)/y):(_=1-s,x=s),t[0]=_*n+x*S,t[1]=_*r+x*P,t[2]=_*o+x*A,t[3]=_*l+x*k,t}function MWe(t){const e=TC,i=e(),s=e(),n=e(),r=Math.sqrt(1-i),o=Math.sqrt(i);return t[0]=r*Math.sin(2*Math.PI*s),t[1]=r*Math.cos(2*Math.PI*s),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t}function H0e(t,e){const i=e[0],s=e[1],n=e[2],r=e[3],o=i*i+s*s+n*n+r*r,l=o?1/o:0;return t[0]=-i*l,t[1]=-s*l,t[2]=-n*l,t[3]=r*l,t}function AWe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function U0e(t,e){const i=e[0]+e[4]+e[8];let s;if(i>0)s=Math.sqrt(i+1),t[3]=.5*s,s=.5/s,t[0]=(e[5]-e[7])*s,t[1]=(e[6]-e[2])*s,t[2]=(e[1]-e[3])*s;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const r=(n+1)%3,o=(n+2)%3;s=Math.sqrt(e[3*n+n]-e[3*r+r]-e[3*o+o]+1),t[n]=.5*s,s=.5/s,t[3]=(e[3*r+o]-e[3*o+r])*s,t[r]=(e[3*r+n]+e[3*n+r])*s,t[o]=(e[3*o+n]+e[3*n+o])*s}return t}function DWe(t,e,i,s){const n=.5*Math.PI/180;e*=n,i*=n,s*=n;const r=Math.sin(e),o=Math.cos(e),l=Math.sin(i),c=Math.cos(i),f=Math.sin(s),y=Math.cos(s);return t[0]=r*c*y-o*l*f,t[1]=o*l*y+r*c*f,t[2]=o*c*f-r*l*y,t[3]=o*c*y+r*l*f,t}function kWe(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const NWe=N2,$We=aG,OWe=pfe,RWe=B0e,LWe=vfe,FWe=cG,zWe=oA,Y0e=lG,qWe=Y0e,X0e=uG,VWe=X0e,tj=xfe,GWe=wfe,jWe=zC;function W0e(t,e,i){const s=Es(e,i);return s<-.999999?(Vr(wd,BWe,e),rme(wd)<1e-6&&Vr(wd,HWe,e),_o(wd,wd),j0e(t,wd,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Vr(wd,e,i),t[0]=wd[0],t[1]=wd[1],t[2]=wd[2],t[3]=1+s,tj(t,t))}const wd=Nt(),BWe=vl(1,0,0),HWe=vl(0,1,0);function UWe(t,e,i,s,n,r){return k9($ee,e,n,r),k9(Oee,i,s,r),k9(t,$ee,Oee,2*r*(1-r)),t}const $ee=dv(),Oee=dv();function YWe(t,e,i,s){const n=XWe;return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=s[0],n[4]=s[1],n[7]=s[2],n[2]=-e[0],n[5]=-e[1],n[8]=-e[2],tj(t,U0e(t,n))}const XWe=TA();Object.freeze(Object.defineProperty({__proto__:null,add:OWe,calculateW:IWe,conjugate:AWe,copy:NWe,dot:FWe,equals:jWe,exactEquals:GWe,fromEuler:DWe,fromMat3:U0e,getAxisAngle:EWe,identity:SWe,invert:H0e,len:qWe,length:Y0e,lerp:zWe,mul:RWe,multiply:B0e,normalize:tj,random:MWe,rotateX:CWe,rotateY:PWe,rotateZ:TWe,rotationTo:W0e,scale:LWe,set:$We,setAxes:YWe,setAxisAngle:j0e,slerp:k9,sqlerp:UWe,sqrLen:VWe,squaredLength:X0e,str:kWe},Symbol.toStringTag,{value:"Module"}));function w6(t,e,i=null){return i!=null?[t,e,i]:[t,e]}function In(t,e,i=null){return i!=null?{x:t,y:e,z:i}:{x:t,y:e}}let Z0e=class{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map(i=>this.mapToLocal(i)).filter(gl)}get doUnnormalization(){return!1}},K0e=class extends Z0e{constructor(e,i,s=null){super(i),this._defaultZ=s,this.transform=_6(),this.transformInv=_6(),this.transform=d0e(e),q0e(this.transformInv,this.transform)}makeMapPoint(e,i){return w6(e,i,this._defaultZ)}mapToLocal(e){return In(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return w6(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}},WWe=class extends Z0e{constructor(e,i){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=Nt(),this.tangentFrameUpWS=Nt(),this.tangentFrameRightWS=Nt(),this.tangentFrameForwardWS=Nt(),this.localFrameRightWS=Nt(),this.localFrameUpWS=Nt(),this.worldToLocalTransform=dv(),this.localToWorldTransform=dv(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const s=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Hh.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Hh.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Hh.Z,this.tangentFrameForwardWS);const n=Nt();Fu(n,this.tangentFrameForwardWS,Es(s,this.tangentFrameForwardWS)),kr(this.localFrameRightWS,s,n),_o(this.localFrameRightWS,this.localFrameRightWS),Vr(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),W0e(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),H0e(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(e,i){return w6(e,i,this.defaultZ)}mapToLocal(e){const i=Nt();this.view.renderCoordsHelper.toRenderCoords(new Hi({x:e[0],y:e[1],spatialReference:this.spatialReference}),i),MF(i,i,this.worldToLocalTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(i,new Hi({spatialReference:this.view.spatialReference}));return s!=null?In(s.x/this.scale,s.y/this.scale):null}localToMap(e){const i=Nt();this.view.renderCoordsHelper.toRenderCoords(new Hi({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),i),MF(i,i,this.localToWorldTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(i,new Hi({spatialReference:this.view.spatialReference}));return s!=null?w6(s.x,s.y,this.defaultZ):null}};function lvt(t,e){if(t.type==="2d")return new K0e(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if(t.type==="3d"){const i=e.length>2?new Hi({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new Hi({x:e[0],y:e[1],spatialReference:t.spatialReference});return new WWe(t,i)}return null}function Iy(t,e){const i=new Hi({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(i.z=t[2]),i}function uvt(t,e){return new Dv({points:t,spatialReference:e})}function cvt(t,e,i){const s=new Ef({paths:t,spatialReference:e});return i&&nce(s),s}function GA(t,e,i,s=!0){const n=Ue(t);n.forEach(o=>{const l=o[0],c=o[o.length-1];df(l,c)&&o.length!==1||o.push(o[0])});let r=new Wa({rings:n,spatialReference:e});return r.rings.forEach(o=>{RM(o)||o.reverse()}),i&&nce(r),s&&r.isSelfIntersecting&&Dc(e)&&(r=z0e(r)),r}function ZWe(t,e,i){const s=e.mapToLocalMultiple(t),n=[],r={x:s[0].x,y:s[0].y},o={x:s[1].x,y:s[1].y},l=Math.round(o.x-r.x),c=Math.round(o.y-r.y),f=Math.max(Math.abs(l),Math.abs(c));if(i){const y={x:r.x+f,y:r.y+f},_={x:r.x-f,y:r.y-f};n.push(In(y.x,_.y),In(_.x,_.y),In(_.x,y.y),In(y.x,y.y))}else{const y={x:l>0?r.x+f:r.x-f,y:c>0?r.y+f:r.y-f};n.push(In(r.x,r.y),In(y.x,r.y),In(y.x,y.y),In(r.x,y.y))}return J0e(GA([n.map(y=>e.localToMap(y)).filter(gl)],e.spatialReference,e.doUnnormalization,!0),n,e)}function KWe(t,e,i){let s=e.mapToLocalMultiple(t);if(s.length===1){const c=s[0];s=[In(c.x-48,c.y+48),In(c.x+48,c.y-48),In(c.x+48,c.y-48),In(c.x-48,c.y+48)]}const n=[],r={x:s[0].x,y:s[0].y},o={x:s[1].x,y:s[1].y};if(i){const l=Math.round(o.x-r.x),c=Math.round(o.y-r.y);n.push(In(r.x-l,r.y-c),In(o.x,r.y-c),In(o.x,o.y),In(r.x-l,o.y))}else n.push(In(r.x,r.y),In(o.x,r.y),In(o.x,o.y),In(r.x,o.y));return J0e(GA([n.map(l=>e.localToMap(l)).filter(gl)],e.spatialReference,e.doUnnormalization,!0),n,e)}function J0e(t,e,i){const s=O4(e[3],e[2],i),n=O4(e[1],e[2],i),r=O4(e[0],e[1],i),o=O4(e[0],e[3],i);return{geometry:t,midpoints:s!=null&&n!=null&&r!=null&&o!=null?{top:s,right:n,bottom:r,left:o}:null}}function O4(t,e,i){k_[0]=t.x,k_[1]=t.y,k_[2]=0,N_[0]=e.x,N_[1]=e.y,N_[2]=0,Sx(k_,k_,N_,.5),R4.x=k_[0],R4.y=N_[1],R4.z=N_[2];const s=i.localToMap(R4);return s!=null?Iy(s,i.spatialReference):null}const R4=In(0,0,0),k_=Nt(),N_=Nt();function JWe(t,e,i,s){const n=e.mapToLocalMultiple(t);let r=null,o=null;if(i)r=n[0],o=n[1];else{const P=n[0],A=n[1],k=Math.round(A.x-P.x),$=Math.round(A.y-P.y),F=Math.max(Math.abs(k),Math.abs($));r=In(k>0?P.x+F/2:P.x-F/2,$>0?P.y+F/2:P.y-F/2),o=In(Math.abs(k)>Math.abs($)?r.x-F/2:r.x,Math.abs(k)>Math.abs($)?r.y:r.y-F/2)}const l=e.localToMap(r),c=e.localToMap(o);if(l==null||c==null)return null;e.doUnnormalization&&rce([[l,c]],e.spatialReference);const f=Iy(l,e.spatialReference),y=Iy(c,e.spatialReference),_=jp(e.spatialReference);let x=0;if(Dc(e.spatialReference))x=_*F0e(f,y,null);else{const P=r.x-o.x,A=r.y-o.y;x=_*Math.sqrt(P*P+A*A)*(s||1)}const S=new lXe({center:f,radius:x,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:GA(S.rings,S.spatialReference,!1),center:f,edge:y}}function QWe(t,e,i){const s=e.mapToLocalMultiple(t),n=s[0],r=s[1],o=Math.round(r.x-n.x),l=Math.round(r.y-n.y),c=In(i?n.x:n.x+o/2,i?n.y:n.y+l/2),f=i?o:o/2,y=i?l:l/2,_=60,x=[],S=2*Math.PI/_;function P(W){const J=Math.cos(W),re=Math.sin(W);return In(f*J+c.x,y*re+c.y)}for(let W=0;W<_;W++)x.push(P(W*S));x.push(x[0]);const{spatialReference:A,doUnnormalization:k}=e,$=GA([x.map(W=>e.localToMap(W)).filter(gl)],A,k,!1),F=e.localToMap(P(Math.PI/2)),G=e.localToMap(P(0)),V=e.localToMap(P(-Math.PI/2)),B=e.localToMap(P(Math.PI));return{geometry:$,midpoints:F!=null&&G!=null&&V!=null&&B!=null?{top:Iy(F,A),right:Iy(G,A),bottom:Iy(V,A),left:Iy(B,A)}:null}}var Cp,Ree,Lee;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(Cp||(Cp={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(Ree||(Ree={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(Lee||(Lee={}));var xy;(function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"})(xy||(xy={}));let eZe=class{constructor(){this._isToolEditable=!0,this._manipulators=new ui,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,i=xy.WhenToolEditable){this.addMany([e],i)}addMany(e,i=xy.WhenToolEditable){for(const s of e){const n={manipulator:s,visibilityPredicate:i,attached:!1};this._manipulators.add(n),this._attached&&this._updateManipulatorAttachment(n)}}remove(e){for(let i=0;i<this._manipulators.length;i++)if(this._manipulators.at(i).manipulator===e){const s=this._manipulators.splice(i,1)[0];this._detachManipulator(s);break}}removeAll(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(e=>{this._updateManipulatorAttachment(e)}),this._attached=!0}detach(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach(({manipulator:e})=>e.destroy()),this._manipulators.destroy(),this._resourceContexts=null}on(e,i){return this._manipulators.on(e,s=>{i(s)})}forEach(e){for(const i of this._manipulators.items)e(i)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach(i=>e.push(i.manipulator)),e}intersect(e,i){let s=null,n=Number.MAX_VALUE;return this._manipulators.forEach(({manipulator:r,attached:o})=>{if(!o||!r.interactive)return;const l=r.intersectionDistance(e,i);l!=null&&l<n&&(n=l,s=r)}),s}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const i=e.manipulator;i.grabbing=!1,i.dragging=!1,i.hovering=!1,i.selected=!1,i.detach&&i.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===xy.Always||(this._isToolEditable?e.visibilityPredicate===xy.WhenToolEditable:e.visibilityPredicate===xy.WhenToolNotEditable)}},ca=class extends Ei{constructor(e){super(e),this.manipulators=new eZe,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[Cp.MANAGER,!0],[Cp.USER,!0]]),this._creationFinishedResolver=Cu()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(Cp.USER)}set editable(e){this.setEditableFlag(Cp.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){this.view!=null&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,i){this._editableFlags.set(e,i),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===Cp.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)??!1}endDrag(){const e=this.view.inputManager.latestPointerLocation;if(!e)return;let i=!1;this.manipulators.forEach(({manipulator:s})=>{s.dragging&&(i=!0,s.events.emit("drag",{action:"end",start:e,screenPoint:e}))}),i&&(this.view.toolViewManager.activeTool=null)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(Cp.USER)&&this.getEditableFlag(Cp.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};I([N({constructOnly:!0})],ca.prototype,"view",void 0),I([N({readOnly:!0})],ca.prototype,"active",null),I([N({value:!0})],ca.prototype,"visible",null),I([N({value:!0})],ca.prototype,"editable",null),I([N({readOnly:!0})],ca.prototype,"manipulators",void 0),I([N({readOnly:!0})],ca.prototype,"updating",null),I([N()],ca.prototype,"cursor",null),I([N({readOnly:!0})],ca.prototype,"automaticManipulatorSelection",void 0),I([N()],ca.prototype,"hasFocusedManipulators",null),I([N()],ca.prototype,"hasGrabbedManipulators",void 0),I([N()],ca.prototype,"hasHoveredManipulators",void 0),I([N()],ca.prototype,"firstGrabbedManipulator",void 0),I([N({readOnly:!0})],ca.prototype,"created",void 0),I([N({readOnly:!0})],ca.prototype,"removeIncompleteOnCancel",void 0),ca=I([De("esri.views.interactive.InteractiveToolBase")],ca);let ll=class extends Ei{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:ZI};const i=pDe(fDe(kv(ZI),this.coordinates),2*this.strokeWidth);i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]+.5),i[3]=Math.ceil(i[3]+.5);for(const s of this.coordinates)e.push([Math.floor(s[0]-i[0])+.5,Math.floor(s[1]-i[1])+.5]);return e.reverse(),{coordinates:e,rect:i}}render(){const{coordinates:e,rect:i}=this._renderCoordinates,s=hce(i),n=dce(i);return kt("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:i[0]+"px",top:i[1]+"px",width:s+"px",height:n+"px",visibility:this.visible?"visible":"hidden"}},kt("svg",{height:n,styles:{display:"block"},width:s},kt("polygon",{fill:this._fillStyle,points:e.map(([r,o])=>`${r},${o}`).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),kt("polygon",{fill:"transparent",points:e.map(([r,o])=>`${r},${o}`).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};I([N()],ll.prototype,"coordinates",void 0),I([N()],ll.prototype,"strokeDash",void 0),I([N()],ll.prototype,"strokeWidth",void 0),I([N()],ll.prototype,"strokeColor",void 0),I([N()],ll.prototype,"strokeDashColor",void 0),I([N()],ll.prototype,"fillColor",void 0),I([N()],ll.prototype,"visible",void 0),I([N()],ll.prototype,"isDecoration",void 0),I([N({readOnly:!0})],ll.prototype,"_strokeStyle",null),I([N({readOnly:!0})],ll.prototype,"_strokeBackgroundStyle",null),I([N({readOnly:!0})],ll.prototype,"_fillStyle",null),I([N({readOnly:!0})],ll.prototype,"_renderCoordinates",null),ll=I([De("esri.views.overlay.OutlineOverlayItem")],ll);const tZe=ll;let vu=class extends Sa.EventedMixin(ca){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=i=>this.drawOperation.on(i,s=>{this._updateVisuals(),this.emit(i,s)});this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=so(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){var e;return((e=this.drawOperation)==null?void 0:e.updating)??!1}get cursor(){return this.geometryType==="point"?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new os({view:e,manipulators:this.manipulators,geometryType:iZe(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new YF,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){var o,l,c;const{drawOperation:e}=this;if(!(e!=null&&e.geometryIncludingUncommittedVertices.length))return[];const{coordinateHelper:i}=e,s=e.committableVertex,n=e.committedVertices.slice();s!=null&&n.push(i.pointToArray(s));const r=n.length;switch(this.geometryType){case"circle":case"rectangle":{const f=new K0e(f0e,YF.spatialReference),y=this.geometryType==="circle"?JWe:ZWe,_=this.geometryType==="circle"?QWe:KWe;if(r===1&&e.isCompleted){const x=n[0],S=f.makeMapPoint(x[0]+sZe,x[1]);return((o=y([x,S],f,!0))==null?void 0:o.geometry.rings[0])??[]}if(r===2){const x=this.geometryType!=="rectangle",S=this.centeredToggled!==x,P=this.geometryType!=="rectangle";return(this.uniformSizeToggled!==P?(l=y(n,f,S))==null?void 0:l.geometry.rings[0]:(c=_(n,f,S))==null?void 0:c.geometry.rings[0])??[]}return[]}}return n}_updateVisuals(){var e;if(!this._overlayItem){const i=new tZe({strokeDash:[5],strokeDashColor:[255,255,255,255]});(e=this.view.overlay)==null||e.addItem(i),this.addHandles(ds(()=>{var s;(s=this.view.overlay)==null||s.removeItem(i),i==null||i.destroy(),this._overlayItem=void 0})),this._overlayItem=i}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function iZe(t){switch(t){case"polygon":case"point":return t;case"circle":case"rectangle":return"segment"}}I([N({value:!1})],vu.prototype,"centeredToggled",null),I([N()],vu.prototype,"drawOperation",void 0),I([N({value:!0})],vu.prototype,"enabled",null),I([N({value:!1})],vu.prototype,"uniformSizeToggled",null),I([N({constructOnly:!0})],vu.prototype,"geometryType",void 0),I([N({constructOnly:!0})],vu.prototype,"mode",void 0),I([N({readOnly:!0})],vu.prototype,"type",void 0),I([N({readOnly:!0})],vu.prototype,"updating",null),I([N({constructOnly:!0,nonNullable:!0})],vu.prototype,"view",void 0),I([N()],vu.prototype,"cursor",null),vu=I([De("esri.views.draw.DrawScreenTool")],vu);const sZe=48;function lN(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function nZe(t){let e=0,i=0;for(let s=0;s<t.length;s++){const n=t[s].size;typeof n=="number"&&(e+=n,i++)}return e/i}function Fee(t,e){var i;return typeof t=="number"?t:(i=t==null?void 0:t.stops)!=null&&i.length?nZe(t.stops):e}function rZe(t,e){if(!e)return t;const i=e.filter(o=>o.type==="size").map(o=>{const{maxSize:l,minSize:c}=o;return(Fee(l,t)+Fee(c,t))/2});let s=0;const n=i.length;if(n===0)return t;for(let o=0;o<n;o++)s+=i[o];const r=Math.floor(s/n);return Math.max(r,t)}function Q0e(t){var r;const e=t==null?void 0:t.renderer,i=t==null?void 0:t.pointerType,s=i==="touch"?9:6;if(!e)return s;const n="visualVariables"in e?rZe(s,e.visualVariables):s;if(e.type==="simple")return lN(n,e.symbol);if(e.type==="unique-value"){let o=n;return(r=e.uniqueValueInfos)==null||r.forEach(l=>{o=lN(o,l.symbol)}),o}if(e.type==="class-breaks"){let o=n;return e.classBreakInfos.forEach(l=>{o=lN(o,l.symbol)}),o}return e.type==="dot-density"||e.type,n}function ege(t,e,i,s=new cr){let n=0;if(i.type==="2d")n=e*(i.resolution??0);else if(i.type==="3d"){const y=i.overlayPixelSizeInMapUnits(t),_=i.basemapSpatialReference;n=_==null||_.equals(i.spatialReference)?e*y:jp(_)/jp(i.spatialReference)}const r=t.x-n,o=t.y-n,l=t.x+n,c=t.y+n,{spatialReference:f}=i;return s.xmin=Math.min(r,l),s.ymin=Math.min(o,c),s.xmax=Math.max(r,l),s.ymax=Math.max(o,c),s.spatialReference=f,s}function mvt(t,e,i){const s=i.toMap(t);return s==null?!1:ege(s,Q0e(),i,oZe).intersects(e)}const oZe=new cr;async function aZe(){return nt(()=>import("./geometryEngineJSON-Dp-J5E7L.js").then(t=>t.g),__vite__mapDeps([239,174]),import.meta.url)}async function lZe(){return aZe().then(({contains:t,intersects:e,overlaps:i,simplify:s})=>({contains:t,intersects:e,overlaps:i,simplify:s}))}async function uZe(t){const{currentSelection:e,selector:i,signal:s,sources:n,view:r}=t;if(!(n!=null&&n.length))return{added:[],removed:[]};const{layers:o,layerViews:l,graphicsLayers:c}=fZe(n),f=(await pC(Promise.all([hZe(i,o,r,s),dZe(i,l,r,s),cZe(i,c,r)]),s)).flat();if(!e)return{added:f,removed:[]};const y=e.toArray(),_=f.filter(S=>!zee(y,S)),x=y.filter(S=>!zee(f,S));return e.removeMany(x),e.addMany(_),{added:_,removed:x}}const cZe=async(t,e,i)=>yZe({candidates:e.flatMap(s=>s.graphics.toArray())??[],selector:t,view:i}),hZe=async(t,e,i,s)=>{const n=await Kh(mZe({selector:t,signal:s,layers:e,view:i}));return n?tge(n):[]},dZe=async(t,e,i,s)=>{const n=await Kh(pZe({selector:t,signal:s,layerViews:e,view:i}));return n?tge(n):[]};function tge(t){const e=[];for(let i=0;i<t.length;i++){const s=t[i];s.status==="fulfilled"&&e.push(...s.value)}return e}function fZe(t){const e=[],i=[],s=[];return t.forEach(n=>{var r,o;GNe(n)?e.push(n):(zhe(n)||qhe(n))&&((r=n.layers)!=null&&r.length)?e.push(...n.layers.toArray()):BNe(n)&&((o=n.sublayers)!=null&&o.length)?s.push(...n.sublayers.toArray()):jNe(n)?s.push(n):M9(n)&&i.push(n)}),{layers:e,layerViews:i,graphicsLayers:s}}function zee(t,e){if(t.includes(e))return!0;const i=e.getObjectId(),s=i!=null,{layer:n,uid:r}=e;return s?t.some(o=>{if(n===o.layer)return i===o.getObjectId()}):t.some(o=>{if(n===o.layer)return r===o.uid})}async function pZe(t){const{layerViews:e,selector:i,signal:s,view:n}=t;return pC(Promise.allSettled(e.map(async r=>{const o=r.createQuery(),{geometry:l}=ige(i,r.layer,n);return o.outFields=["*"],o.geometry=l,o.returnGeometry=!0,o.outSpatialReference=n.spatialReference,r.queryFeatures(o,{signal:s}).then(({features:c})=>c)})),s)}async function mZe(t){const{layers:e,selector:i,signal:s,view:n}=t;return pC(Promise.allSettled(e.map(async r=>r.queryFeatures(gZe(r.createQuery(),i,r,n),{signal:s}).then(({features:o})=>o))),s)}function ige(t,e,i){const s="displayField"in e?e.displayField:null,n=whe({displayField:s,fields:e.fields}),r=[e.objectIdField];n!=null&&e.fieldsIndex.has(n)&&r.push(n);const o="renderer"in e?Q0e({renderer:e.renderer}):0;return{geometry:t.type==="point"?ege(t,o,i):t,outFields:r}}function gZe(t,e,i,s){const{outFields:n,geometry:r}=ige(e,i,s);return t.outFields=n,t.geometry=r,t.returnGeometry=!0,t.outSpatialReference=s.spatialReference,t}async function yZe(t){const{selector:e,candidates:i,view:s}=t;if(!(i!=null&&i.length)||!e)return[];const{spatialReference:n}=s,r=e,o=await lZe();return i.filter(l=>o.intersects(n,r,l.geometry))}const vZe=100;let cy=class extends Sa.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new ui,this.sources=null,this._process=Pv(async(i,s)=>{const{callback:n,selector:r,completed:o}=i,l=DM(async c=>{var x;const{sources:f,selection:y,view:_}=this;if(!(!(f!=null&&f.length)&&!(_!=null&&_.selectionManager.sources.length))&&_){if(r&&f!=null){const S=await uZe({currentSelection:y,selector:r,signal:c,sources:f,view:_});o&&((x=_.selectionManager)==null||x.updateSelection({current:y.toArray(),...S}))}n&&n()}else y.removeAll()});return Bl(s,()=>l.abort()),this._processTask=l,l.promise},vZe)}initialize(){this._setup()}cancel(){var e;this.removeAllHandles(),(e=this._processTask)==null||e.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const i=this.options,s=(i==null?void 0:i.createTool)??"rectangle",n=(i==null?void 0:i.mode)??(s==="polygon"?"click":"hybrid"),r=Symbol();this._tool=new vu({view:e,mode:n,geometryType:s}),i!=null&&i.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>Kh(this._process({selector:this._selectionArea}))),r),this.addHandles([e.on("key-down",o=>{if(!o.repeat)switch(o.key){case Fn.constraint:this._tool.uniformSizeToggled=!0,o.stopPropagation();break;case Fn.center:this._tool.centeredToggled=!0,o.stopPropagation()}}),e.on("key-up",o=>{switch(o.key){case Fn.constraint:this._tool.uniformSizeToggled=!1,o.stopPropagation();break;case Fn.center:this._tool.centeredToggled=!1,o.stopPropagation()}}),this._tool.on("complete",async o=>{this.removeHandles(r);const l=()=>{this.removeAllHandles(),this.emit("complete",{aborted:o.aborted,selection:this.selection.toArray()})};o.aborted?(this.cancel(),this.selection.removeAll(),l()):await this._process({selector:this._selectionArea,callback:l,completed:!0})})],r),this.addHandles(ds(()=>e.tools.remove(this._tool))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=Up(),i=this._tool.coordinates,s=this.view.spatialReference,n=o=>{e.x=o[0],e.y=o[1];const{x:l,y:c}=this.view.toMap(e);return[l,c]};if(i.length===1){const[o,l]=n(i[0]);return new Hi({x:o,y:l,spatialReference:s})}const r=this._tool.coordinates.map(n);if(r.length!==0)return RM(r)||r.reverse(),new Wa({spatialReference:s,rings:[r]})}};I([N()],cy.prototype,"options",void 0),I([N({readOnly:!0})],cy.prototype,"selection",void 0),I([N()],cy.prototype,"sources",void 0),I([N({constructOnly:!0})],cy.prototype,"view",void 0),cy=I([De("esri.widgets.support.Selector2D.SelectionOperation")],cy);const _Ze=cy;let yp=class extends Sa.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([xi(()=>this._sources,e=>{this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=bo(this._operationHandlesGroup)}get _sources(){const{sources:e,view:i}=this;return i&&(e!=null&&e.length)?e.flatMap(s=>{if(M9(s))return s;if(zhe(s)||qhe(s)){const r=s.layers||[],o=r.map(l=>{const c=ZQ(i,l)||void 0;return M9(c)?c:l});return o.length?o.toArray():r.length?r.toArray():s}const n=ZQ(i,s)||void 0;return M9(n)?n:s}):[]}get layers(){return hI(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){hI(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:i}=this,s=!(e!=null&&e.length)&&!(i!=null&&i.selectionManager.sources.length);return this.activeOperation?"active":i!=null&&i.ready&&!s?"ready":"disabled"}cancel(){var e;this.state==="active"&&((e=this.activeOperation)==null||e.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:i,state:s,view:n}=this,r=!(i!=null&&i.length)&&!(n!=null&&n.selectionManager.sources.length);if(s==="disabled"||r||!this.view)return;s==="active"&&this.cancel();const o=new _Ze({view:this.view,sources:i,options:e});return this._operationHandlesGroup=am([o.selection.on("change",l=>this.emit("selection-change",l)),o.once("complete",l=>this._onOperationComplete(l))]),this._set("activeOperation",o),o}_onOperationComplete(e){this._operationHandlesGroup=bo(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};I([N()],yp.prototype,"_sources",null),I([N({readOnly:!0})],yp.prototype,"activeOperation",void 0),I([N()],yp.prototype,"layers",null),I([N()],yp.prototype,"sources",void 0),I([N({readOnly:!0})],yp.prototype,"state",null),I([N()],yp.prototype,"view",void 0),yp=I([De("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],yp);const bZe=yp,qee={lassoTool:!0,rectangleTool:!0},xZe={createTool:"polygon",mode:"freehand"},wZe={createTool:"rectangle"},uN="esri-selection-toolbar",cN={base:uN,container:`${uN}__container`,toolButton:`${uN}__tool-button`};let Fl=class extends hx{constructor(e,i){super(e,i),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new bZe,this.visibleElements={...qee},this._viewModelHandlesGroup=am([this.viewModel.on("complete",s=>{this._set("activeToolInfo",null),this.emit("complete",s)})])}destroy(){this._viewModelHandlesGroup=bo(this._viewModelHandlesGroup)}loadDependencies(){return cx({action:()=>nt(()=>import("./calcite-action-txGY56Nb.js"),[],import.meta.url),icon:()=>nt(()=>import("./calcite-icon-Bsr1azWo.js"),[],import.meta.url)})}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layers(){return hI(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){hI(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...qee,...e}}get visibleToolCount(){const{view:e,toolConfigs:i,visibleElements:s}=this;return((i==null?void 0:i.length)??0)+((e==null?void 0:e.type)==="2d"?(s.lassoTool?1:0)+(s.rectangleTool?1:0):0)}activate(e){if(this.cancel(),this.viewModel.state!=="disabled")switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return kt("div",{"aria-label":this.label,class:this.classes(cN.base,SE.widget)},kt("div",{class:cN.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){var e;if(((e=this.view)==null?void 0:e.type)==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){var e;if((e=this.toolConfigs)!=null&&e.length)return this.toolConfigs.map(({toolName:i,icon:s})=>{var n;return kt("calcite-action",{active:((n=this.activeToolInfo)==null?void 0:n.toolName)===i,bind:this,class:cN.toolButton,disabled:this.viewModel.state==="disabled",onclick:()=>this._onCustomToolClick(i),scale:"s",text:i,title:i},kt("calcite-icon",{icon:s||"selection",scale:"s"}))})}_renderLassoTool(){const{activeToolInfo:e,messages:i,visibleElements:s}=this;if(!s.lassoTool)return;const n=i.selectByLasso;return kt("calcite-action",{active:(e==null?void 0:e.toolName)==="lasso",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onLassoToolClick,scale:"s",text:n,title:n},kt("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){const{activeToolInfo:e,messages:i,visibleElements:s}=this;if(!s.rectangleTool)return;const n=i.selectByRectangle;return kt("calcite-action",{active:(e==null?void 0:e.toolName)==="rectangle",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onRectangleToolClick,scale:"s",text:n,title:n},kt("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){const i=this._getToolOptions(e);if(!i)return;const s=this.viewModel.activate(i);s&&this._set("activeToolInfo",{toolName:e,operation:s})}_toggleTool(e){if(this.activeToolInfo){const i=this.activeToolInfo.toolName;if(this.cancel(),i===e)return}this._activateTool(e)}_getToolOptions(e){return e==="lasso"?xZe:e==="rectangle"?wZe:this.toolConfigs.find(i=>i.toolName===e)}};I([N({readOnly:!0})],Fl.prototype,"activeToolInfo",void 0),I([N()],Fl.prototype,"label",null),I([N()],Fl.prototype,"layers",null),I([N(),bg("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],Fl.prototype,"messages",void 0),I([N()],Fl.prototype,"sources",null),I([N()],Fl.prototype,"toolConfigs",void 0),I([N()],Fl.prototype,"view",null),I([N()],Fl.prototype,"viewModel",void 0),I([N()],Fl.prototype,"visibleElements",void 0),I([Sn("visibleElements")],Fl.prototype,"castVisibleElements",null),I([N()],Fl.prototype,"visibleToolCount",null),Fl=I([De("esri.widgets.support.SelectionToolbar")],Fl);const SZe=Fl,EZe={absolute:"absolute-direction",relative:"relative-direction"},sge=()=>cx({icon:()=>nt(()=>import("./calcite-icon-Bsr1azWo.js"),[],import.meta.url),label:()=>nt(()=>import("./calcite-label-D4re2yoh.js"),[],import.meta.url),switch:()=>nt(()=>import("./calcite-switch-gkvsEGDN.js"),[],import.meta.url),tooltip:()=>nt(()=>Promise.resolve().then(()=>AEe),void 0,import.meta.url)}),Kw="esri-labeled-switch",Jw={label:`${Kw}__label`,labelContent:`${Kw}__label-content`,iconInfo:`${Kw}__icon_info`,iconWarning:`${Kw}__icon_warning`,tooltip:`${Kw}__tooltip`};function Nb({checked:t,disabled:e,hint:i,key:s,label:n,onChange:r,hintIcon:o,hintKind:l}){return kt("calcite-label",{class:Jw.label,disabled:e,key:s,layout:"inline-space-between",scale:"s"},kt("div",{class:Jw.labelContent,key:"label-content"},i?kt(L7e,null,kt("div",null,n),kt("calcite-icon",{class:l!=="warning"?Jw.iconInfo:Jw.iconWarning,icon:o??"information",id:s,scale:"s",tabIndex:0}),kt("calcite-tooltip",{class:Jw.tooltip,referenceElement:s},i)):n),kt("calcite-switch",{checked:t,disabled:e,scale:"s",onCalciteSwitchChange:c=>r(c.target.checked)}))}let hy=class extends Ei{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};I([N({type:Boolean,nonNullable:!0})],hy.prototype,"directionModePicker",void 0),I([N({type:Boolean,nonNullable:!0})],hy.prototype,"header",void 0),I([N({type:Boolean,nonNullable:!0})],hy.prototype,"labelsToggle",void 0),I([N({type:Boolean,nonNullable:!0})],hy.prototype,"tooltipsToggle",void 0),hy=I([De("esri.widgets.support.SketchTooltipControls.VisibleElements")],hy);const nge=hy,L4="esri-sketch-tooltip-controls",F4={base:L4,block:`${L4}__block`,blockContent:`${L4}__block-content`,radioButtonLabelWrapper:`${L4}__radio-button-label-wrapper`};let T0=class extends hx{constructor(e,i){super(e,i),this.viewModel=null,this.visibleElements=new nge,this.sketchOptions=new PA,this.viewType=void 0,this._onTooltipsEnabledChange=s=>{this.sketchOptions.tooltips.enabled=s},this._onLabelsEnabledChange=s=>{this.sketchOptions.labels.enabled=s},this._onDirectionModeChange=s=>{this.sketchOptions.values.directionMode=s.target.selectedItem.value}}loadDependencies(){return Promise.all([cx({block:()=>nt(()=>import("./calcite-block-DggrRWOL.js"),__vite__mapDeps([329,330]),import.meta.url),label:()=>nt(()=>import("./calcite-label-D4re2yoh.js"),[],import.meta.url),icon:()=>nt(()=>import("./calcite-icon-Bsr1azWo.js"),[],import.meta.url),"radio-button":()=>nt(()=>import("./calcite-radio-button-Bi4a9hHD.js"),[],import.meta.url),"radio-button-group":()=>nt(()=>import("./calcite-radio-button-group-D_O_wGif.js"),__vite__mapDeps([331,89,91]),import.meta.url)}),sge()])}render(){const{label:e,visibleElements:i}=this,s=this._renderContent();return kt("div",{"aria-label":e,class:this.classes(F4.base,SE.widget)},s?kt("calcite-block",{class:F4.block,heading:i.header?this.label:"",key:"content-block",open:!0},kt("div",{class:F4.blockContent,key:"content"},s)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:i}=this,s=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&i!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(gl);return s.length===0?null:s}_renderTooltipsToggle(){const{messages:e,sketchOptions:i}=this;return kt(Nb,{checked:i.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:i}=this;return kt(Nb,{checked:i.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:i}=this,{directionMode:s}=i.values;return kt("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,kt("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:s,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",s,e.directionModeRelative),this._renderDirectionModeOption("absolute",s,e.directionModeAbsolute)))}_renderDirectionModeOption(e,i,s){return kt("calcite-label",{key:e,layout:"inline",scale:"s"},kt("calcite-radio-button",{checked:e===i,scale:"s",value:e}),kt("div",{class:F4.radioButtonLabelWrapper,key:"label-wrapper"},kt("calcite-icon",{icon:EZe[e],scale:"s"}),s))}};I([N()],T0.prototype,"label",null),I([N({type:nge,nonNullable:!0})],T0.prototype,"visibleElements",void 0),I([N(),bg("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],T0.prototype,"messages",void 0),I([N({nonNullable:!0,type:PA})],T0.prototype,"sketchOptions",void 0),I([N({type:String})],T0.prototype,"viewType",void 0),T0=I([De("esri.widgets.support.SketchTooltipControls")],T0);const CZe=T0,rge={hide:"hide",hideChildren:"hide-children"},xvt=10,wvt=2;function Svt({exclusive:t,visible:e,visibilityAppearance:i}){const s=i==="checkbox";return e?t?"circle-f":s?"check-square-f":"view-visible":t?"circle":s?"square":"view-hide"}function Evt({connectionStatus:t,publishing:e}){return t?t==="connected"?"beacon":"offline":e?"square":"bullet-point"}function Cvt(t){return(t==null?void 0:t.listMode)===rge.hideChildren}function S6(t){return(t==null?void 0:t.listMode)??void 0}function PZe(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function TZe(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function IZe(t){if(!t)return"inherited";const e=DZe(nj(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function ij(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function Pvt(t){const e=(t!=null&&t.layer&&nj(t.layer)?t.layer.layer:void 0)??(t==null?void 0:t.layer);return!!e&&e.type!=="catalog"&&(kZe(e)??!0)}function sj(t){return S6(t)!==rge.hide}function MZe(t,e){if(!t||e==null||isNaN(e))return!1;const i=PZe(t),s=TZe(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,r=s!=null&&!isNaN(s)&&s>0&&e<s;return n||r}function AZe(t,e){t==null||t.sort((i,s)=>{const n="uid"in i?e.indexOf(i.uid):-1,r="uid"in s?e.indexOf(s.uid):-1;return n>r?-1:n<r?1:0})}function Tvt(t,e){const i=t==null?void 0:t.layer;if(!i)return;const s=ij(i);if(!s)return;let n;s==="layers"&&"layers"in i?n=i.layers:s==="sublayers"&&"sublayers"in i&&(n=i.sublayers),AZe(n,e)}function Vee(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function nj(t){return t!=null&&"layer"in t&&t.layer!=null}function DZe(t){const e=oge(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function kZe(t){const e=oge(t);return e!=null&&"supportsDynamicLayers"in e?e.supportsDynamicLayers:void 0}function oge(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}function Ivt(t){return t==null?void 0:t["data-item"]}function Mvt(t){return t==null?void 0:t.getAttribute("data-layer-type")}function Avt({children:t,error:e,incompatible:i}){return!!(t!=null&&t.filter(s=>!s.hidden).length)&&!e&&!i}function Dvt(t){for(const e of t)for(const i of e)if(i.type==="button"||i.type==="toggle")return i}function Gee(t){return t!=null&&typeof t=="object"&&t.type==="2d"&&t.view2dType==="linkchart"}var WF;let I0=WF=class extends kC{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new WF({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};I([N()],I0.prototype,"displayValueEnabled",void 0),I([N()],I0.prototype,"max",void 0),I([N()],I0.prototype,"min",void 0),I([N()],I0.prototype,"step",void 0),I([N()],I0.prototype,"value",void 0),I0=WF=I([De("esri.support.actions.ActionSlider")],I0);const NZe=I0;function $Ze(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,s=Array.isArray(t)?t:OZe(t);i.push(...s)}}function OZe(t){return t.split(",").map(e=>e.trim())}function jee(t){return t&&typeof t.render=="function"}function kvt(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}let ha=class extends PC(hx){constructor(e,i){super(e,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([xi(()=>this._canCreateLegend,()=>this._createLegend(),Ul),xi(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),Ul)])}destroy(){this._legend=so(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const s="legend";return e===s||e!=null&&!!Array.isArray(e)&&e.includes(s)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,s=e==null?void 0:e.view;return i&&s?{view:s,layerInfos:[i]}:{}}get _legendLayerInfo(){var o;const e=(o=this.listItem)==null?void 0:o.layer;if(!e||e.type==="subtype-sublayer")return null;const i=nj(e)?e:null,s=e==null?void 0:e.parent,n=s!=null&&"type"in s&&s.type==="map-image"?i==null?void 0:i.source:null,r="";return n&&s?{layer:s,title:r,sublayerIds:[n.mapLayerId]}:{layer:e,title:r}}get disabled(){var n;const{listItem:e,_legend:i,content:s}=this;return!e||!(Array.isArray(s)&&s.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return kt("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:s,open:n}=this;return e&&!s&&n?e==="legend"&&i?kt("div",{key:"legend-widget"},i.render()):typeof e=="string"?kt("div",{innerHTML:e,key:e}):jee(e)?kt("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?kt("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(s=>this._renderContent(s)):this._renderContent(e):null}async _createLegend(){if(so(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await nt(()=>import("./Legend-B6FVYWij.js"),__vite__mapDeps([69,70,71,72,73,74,75,76,77,59,57,58,16,60,61,78,52,2,46,29]),import.meta.url),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:jee(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};I([N()],ha.prototype,"_legend",void 0),I([N()],ha.prototype,"_canCreateLegend",null),I([N()],ha.prototype,"_legendOptions",null),I([N()],ha.prototype,"_legendLayerInfo",null),I([N()],ha.prototype,"className",void 0),I([N()],ha.prototype,"content",void 0),I([N()],ha.prototype,"disabled",null),I([N()],ha.prototype,"flowEnabled",void 0),I([N()],ha.prototype,"icon",null),I([N()],ha.prototype,"image",void 0),I([N()],ha.prototype,"listItem",void 0),I([N()],ha.prototype,"open",void 0),I([N()],ha.prototype,"title",null),I([N()],ha.prototype,"visible",void 0),ha=I([De("esri.widgets.LayerList.ListItemPanel")],ha);const age=ha;var nS;const RZe=ui.ofType({key:"type",defaultKeyValue:"button",base:kC,typeMap:{button:dde,toggle:fde,slider:NZe}}),lge=ui.ofType(RZe),hN="layer",z4="child-list-mode",LZe="hide";let an=nS=class extends PC(Ei){constructor(t){super(t),this.actionsSections=new lge,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(ui.ofType(nS)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([xi(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),Ul),xi(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),Ul),xi(()=>this.view,t=>this._updateChildrenView(t),Ul),xi(()=>this.panel,t=>this._setListItemOnPanel(t),Ul)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(s=>s.layer===i)??null}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new age(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=Ac(this,"layer.layer");return(!t||t&&Ac(this,"layer.layer.loaded"))&&Ac(this,"layer.title")||Ac(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:s}=this;return!s&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t,e;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!MZe(this.layer,(e=this.view)==null?void 0:e.scale)}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return IZe(this.layer)}clone(){return new nS({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,s=t.filter(n=>!i.some(r=>r.layer===n));i.addMany(this._createChildItems(s,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(s=>!t.includes(s.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(z4),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(z4),this.listModeDisabled||this.addHandles(t.toArray().map(e=>xi(()=>e.listMode,()=>this._compileChildren(t))),z4)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>S6(i)!==LZe);e!=null&&e.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),hN)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.map(i=>e||sj(i)?new nS({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(gl).reverse()}_watchLayerProperties(t){if(this.removeHandles(hN),this.removeHandles(z4),!t)return;if((!this.listModeDisabled&&S6(t))==="hide-children")return void this.children.destroyAll();const e=ij(t);e&&this.addHandles(xi(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},Ul),hN)}};I([N({type:lge})],an.prototype,"actionsSections",void 0),I([N()],an.prototype,"actionsOpen",void 0),I([N()],an.prototype,"checkPublishStatusEnabled",void 0),I([N({type:ui})],an.prototype,"children",void 0),I([N()],an.prototype,"childrenSortable",void 0),I([N({readOnly:!0})],an.prototype,"connectionStatus",null),I([N({readOnly:!0})],an.prototype,"error",null),I([N()],an.prototype,"hidden",void 0),I([N({readOnly:!0})],an.prototype,"incompatible",null),I([N()],an.prototype,"layer",void 0),I([N({readOnly:!0})],an.prototype,"layerView",null),I([N()],an.prototype,"listItemCreatedFunction",void 0),I([N({nonNullable:!0})],an.prototype,"listModeDisabled",void 0),I([N()],an.prototype,"open",void 0),I([N({type:age})],an.prototype,"panel",void 0),I([Sn("panel")],an.prototype,"castPanel",null),I([N()],an.prototype,"parent",void 0),I([N({value:!0})],an.prototype,"sortable",null),I([N()],an.prototype,"title",null),I([N({readOnly:!0})],an.prototype,"publishing",null),I([N({readOnly:!0})],an.prototype,"updating",null),I([N()],an.prototype,"view",void 0),I([N()],an.prototype,"visible",null),I([N({readOnly:!0})],an.prototype,"visibleAtCurrentScale",null),I([N({readOnly:!0})],an.prototype,"visibleAtCurrentTimeExtent",null),I([N({readOnly:!0})],an.prototype,"visibilityMode",null),an=nS=I([De("esri.widgets.LayerList.ListItem")],an);const rj=an,dh={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},FZe="hide",uge=ui.ofType(rj);let Od=class extends Sa.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new uge,this.view=null}initialize(){this.addHandles([xi(()=>{var e;return((e=this.view)==null?void 0:e.ready)===!0},()=>this._viewHandles(),Ul),xi(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),xi(()=>Gee(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],dh.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,s,n){var S,P;const r=e==null?void 0:e.layer;if(!r||r.type==="subtype-sublayer"||r.type==="sublayer")return;const o=(P=(S=this.view)==null?void 0:S.map)==null?void 0:P.layers,l=i?Vee(i):o,c=s?Vee(s):o;if(!l||!c)return;const{operationalItems:f}=this,y=(i==null?void 0:i.children)||f,_=(s==null?void 0:s.children)||f,x=c.length-n;e.parent=s||null,y.remove(e),l.remove(r),_.includes(e)||_.add(e,x),c.includes(r)||c.add(r,x),this._compileList()}_createLayerViewHandles(e){this.removeHandles(dh.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),dh.layerViews)}_createMapLayerHandles(e){this.removeHandles(dh.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),dh.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:s,checkPublishStatusEnabled:n,listModeDisabled:r}=this;return new rj({checkPublishStatusEnabled:n,listModeDisabled:r,layer:e,listItemCreatedFunction:s,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>S6(i)!==FZe):void 0}_watchLayersListMode(e){this.removeHandles(dh.layerListMode),e&&!this.listModeDisabled&&this.addHandles(xi(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),dh.layerListMode)}_compileList(){var n,r;const e=(r=(n=this.view)==null?void 0:n.map)==null?void 0:r.layers,i=Gee(this.view)&&!this.view.inGeographicLayout?e==null?void 0:e.filter(({type:o})=>o==="link-chart"):e;this._watchLayersListMode(i);const s=this._getViewableLayers(i);s!=null&&s.length?(this._createNewItems(s),this._removeItems(s),this._sortItems(s)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(s=>{i.some(n=>n.layer===s)||i.add(this._createListItem(s))})}_removeItems(e){const{operationalItems:i}=this,s=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||s.push(n)}),i.destroyMany(s)}_sortItems(e){const{operationalItems:i}=this;i.sort((s,n)=>{const r=e.indexOf(s.layer),o=e.indexOf(n.layer);return r>o?-1:r<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([dh.mapLayers,dh.layerViews,dh.viewLayers]),e!=null&&e.ready?this.addHandles([xi(()=>{var i,s;return(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.allLayers},i=>this._createMapLayerHandles(i),Ul),xi(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),Ul)],dh.viewLayers):this._removeAllItems()}};I([N()],Od.prototype,"checkPublishStatusEnabled",void 0),I([N()],Od.prototype,"listItemCreatedFunction",void 0),I([N({nonNullable:!0})],Od.prototype,"listModeDisabled",void 0),I([N({type:uge})],Od.prototype,"operationalItems",void 0),I([N({readOnly:!0})],Od.prototype,"state",null),I([N()],Od.prototype,"totalItems",null),I([N()],Od.prototype,"view",void 0),Od=I([De("esri.widgets.LayerList.LayerListViewModel")],Od);const zZe=Od,oj=t=>qZe(t)||VZe(t),qZe=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},VZe=t=>{const e=ij(t);if(e!=null&&t.hasOwnProperty(e)&&t[e]!=null){for(const i of t[e])if(oj(i))return!0}return!1},N9=(t,e)=>e!=null&&t!=null&&(e.test(t.title)?"self":!!t.children.some(i=>N9(i,e)!==!1)&&"children");var ZF;let vp=ZF=class extends rj{constructor(t){super(t),this.children=new ui,this.parent=null}get enabled(){const{children:t}=this;if(t.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let e=!1,i=!1;for(const s of t){if(s.enabled==="indeterminate")return s.enabled;if(s.enabled==="enabled"?e=!0:s.enabled==="disabled"&&(i=!0),i&&e)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(t=>[t.layer.id,...t.childLayerIds])}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(i=>i.layer===t)}_initializeChildLayers(t){if(!t)return;const e=t.filter(oj);super._initializeChildLayers(e)}_createChildItems(t){return t.map(e=>sj(e)?new ZF({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(gl).reverse()}};I([N()],vp.prototype,"enabled",null),I([N()],vp.prototype,"children",void 0),I([N()],vp.prototype,"childLayerIds",null),I([N()],vp.prototype,"featureSource",null),I([N({constructOnly:!0})],vp.prototype,"getFeatureSnappingSources",void 0),I([N()],vp.prototype,"parent",void 0),vp=ZF=I([De("esri.widgets.support.SnappingControls.SnappingListItem")],vp);let dy=class extends zZe{constructor(){super(...arguments),this.featureSnappingSources=new ui}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>{var i;return!((i=e.children)!=null&&i.length)})}_compileList(){var n,r;const e=(r=(n=this.view)==null?void 0:n.map)==null?void 0:r.layers;if(!e)return;const i=e.filter(oj);this._watchLayersListMode(i);const s=this._getViewableLayers(i);s!=null&&s.length?(this._createNewItems(s),this._removeItems(s),this._sortItems(s)):this._removeAllItems()}_createListItem(e){return new vp({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};I([N()],dy.prototype,"featureSnappingSources",void 0),I([N()],dy.prototype,"operationalItems",void 0),I([N()],dy.prototype,"operationalItemsFlat",null),I([N()],dy.prototype,"selectableItems",null),dy=I([De("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],dy);let Rd=class extends Ei{constructor(e){super(e),this.layerListViewModel=new dy,this.snappingOptions=new ZC,this.view=null}initialize(){this.addHandles([xi(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:i})=>{e.view=i},Ul),xi(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:i})=>{e.featureSnappingSources=i},Ul)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>i.enabled==="enabled")}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(i=>!i.enabled)}get layersEnabledCount(){var e,i;return((i=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:i.filter(s=>s.enabled==="enabled").length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,i){e==null||e.forEach(s=>i?this.enableSnappingForLayer(s):this.disableSnappingForLayer(s))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:{id:i}})=>{e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i)})}enableSnappingForLayer(e){const i=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);i&&(i.enabled=!0)}disableSnappingForLayer(e){const i=this._findSnappingSourceForLayer(e);i&&(i.enabled=!1)}updateEnabledFeatureSources(e){for(const i of this.snappingOptions.featureSources)sj(i.layer)&&(i.enabled=e.includes(i.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(i=>i.layer.id===e)}_makeSnappingSourceForLayer(e){var n;const i=(n=this.layerListViewModel.operationalItemsFlat.find(r=>r.layer.id===e))==null?void 0:n.layer;if(!i)throw new rt("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(i.type==="group")return;const s=new OG({layer:i});return this.snappingOptions.featureSources.add(s),s}};I([N()],Rd.prototype,"allLayersEnabled",null),I([N()],Rd.prototype,"allLayersDisabled",null),I([N({constructOnly:!0})],Rd.prototype,"layerListViewModel",void 0),I([N()],Rd.prototype,"layersEnabledCount",null),I([N({type:ZC,nonNullable:!0})],Rd.prototype,"snappingOptions",void 0),I([N()],Rd.prototype,"state",null),I([N()],Rd.prototype,"view",void 0),Rd=I([De("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],Rd);const GZe=Rd,Sd="esri-snapping-controls",fh={base:Sd,container:`${Sd}__container`,toggleBlock:`${Sd}__toggle-block`,layerListBlock:`${Sd}__layer-list-block`,layerList:`${Sd}__layer-list`,layerListFilter:`${Sd}__layer-list__filter`,layerListButton:`${Sd}__layer-list__button`,layerListItem:`${Sd}__layer-list__item`,layerListGroup:`${Sd}__layer-list__group`,nestedContainer:`${Sd}__nested-container`};let mo=class extends hx{constructor(e,i){super(e,i),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new LA,this._enableSnappingSwitchChange=o=>{this.snappingOptions.enabled=o},this._featureEnabledSwitchChange=o=>{this.snappingOptions.featureEnabled=o},this._gridEnabledSwitchChange=o=>{this.snappingOptions.gridEnabled=o,o&&this._startLoadGrid()},this._selfEnabledSwitchChange=o=>{this.snappingOptions.selfEnabled=o},this._onToggleLayersButtonClick=o=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),kue(o.target)};const{snappingOptions:s,view:n,viewModel:r}=e;this.viewModel=r??(this._defaultViewModel=new GZe({snappingOptions:s,view:n}))}normalizeCtorArgs(e){const{snappingOptions:i,view:s,viewModel:n,...r}=e;return r}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=so(this._defaultViewModel))}loadDependencies(){return Promise.all([cx({block:()=>nt(()=>import("./calcite-block-DggrRWOL.js"),__vite__mapDeps([329,330]),import.meta.url),button:()=>nt(()=>import("./calcite-button-h_yn8oa6.js"),[],import.meta.url),input:()=>nt(()=>import("./calcite-input-DlolSDaM.js"),__vite__mapDeps([87,88,89,90,91,92]),import.meta.url),list:()=>nt(()=>import("./calcite-list-CfHydLti.js"),__vite__mapDeps([332,333,334,335,88,89,90,91,92]),import.meta.url),"list-item":()=>nt(()=>import("./calcite-list-item-DL1xKK9f.js"),__vite__mapDeps([336,334,333,330]),import.meta.url),checkbox:()=>nt(()=>import("./calcite-checkbox-BSBY9LwI.js"),[],import.meta.url),loader:()=>nt(()=>import("./calcite-loader-DletheWt.js"),[],import.meta.url)}),sge()])}initialize(){this.addHandles(xi(()=>{var e;return((e=this.view)==null?void 0:e.type)==="2d"&&!!this.view.grid},e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=so(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return kt("div",{"aria-label":e,class:this.classes(fh.base,SE.widget)},kt("div",{class:fh.container},this._renderContent()))}_renderContent(){var e;return[this._renderToggles(),this._renderLayerList(),((e=this.view)==null?void 0:e.type)==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:i}=this,s=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&(i==null?void 0:i.type)==="2d"?this._renderGridEnabledToggle():null].filter(gl),n=[e.enabledToggle?this._renderEnabledToggle():null,s.length>0?kt("div",{class:fh.nestedContainer},s):null].filter(gl);return n.length===0?null:kt("calcite-block",{class:fh.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",open:!0},n)}_renderEnabledToggle(){return kt(Nb,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return kt(Nb,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return kt(Nb,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return kt(Nb,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:i}=this,s=({target:{value:l}})=>{this._layerListFilter=l===""?null:new RegExp(l,"i")},n=i.layerListViewModel.operationalItems.length>9?kt("calcite-input",{class:fh.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:s}):null,r=this._secondaryElementsDisabled,o=this.layerListOpen&&!r;return kt("calcite-block",{class:fh.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:o,onCalciteBlockToggle:l=>this.layerListOpen=l.target.open},n,this._renderToggleLayersButton(),kt("calcite-list",{class:fh.layerList,selectionMode:"none"},this._renderLayerListItemCollection(i.layerListViewModel.operationalItems)))}_renderGridOptions(){var y;const{view:e,visibleElements:i,snappingManager:s,snappingOptions:n,_openAndReady:r}=this,{gridEnabled:o,enabled:l}=n;(r||(e==null?void 0:e.type)==="2d"&&e.grid)&&this._startLoadGrid();const c=(y=this._gridLoadTask)==null?void 0:y.value,f=c&&(e==null?void 0:e.type)==="2d"&&kt(c,{snappingManager:s,snappingOptions:n,view:e,visibleElements:i.gridControlsElements});return kt("calcite-block",{class:fh.layerListBlock,collapsible:!0,disabled:!o||!l,heading:this.messages.gridOptionsHeading,key:"grid-block",open:r,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},f??kt("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){var e;!this._gridLoadTask&&this.visibleElements.gridControls&&((e=this.view)==null?void 0:e.type)==="2d"&&(this._gridLoadTask=DM(async()=>(await nt(async()=>{const{default:i}=await import("./GridControls-B9_ktwNn.js");return{default:i}},__vite__mapDeps([337,38,39,73,36,37,306,12,13,14,15,308,40,41,42,309,310,139,140,10,128,304,62,311,312,210,291,184,183,59,44,313,315,101]),import.meta.url)).default))}_renderLayerListItemCollection(e){const i=this._layerListFilter;return e.map(s=>{switch(i?N9(s,i):null){case"children":{const n=s.children.filter(r=>N9(r,i)!==!1);return this._renderLayerListItemGroup(s,n)}case"self":case null:return this._renderLayerListItemOrGroup(s);case!1:return N9(s.parent,i)==="self"?this._renderLayerListItemOrGroup(s):null}}).toArray().filter(gl)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:i}=this,s=e?i.disableAllLayers:i.enableAllLayers;return kt("calcite-button",{appearance:"transparent",class:fh.layerListButton,label:s,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},s)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:i}}=this,s=e.title||i,n=()=>{this.viewModel.toggleSnappingForLayers([e.layer.id],e.enabled!=="enabled")};return kt("calcite-list-item",{class:fh.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:s,onCalciteListItemSelect:r=>{r.stopPropagation(),n()}},kt("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:n}))}_renderLayerListItemGroup(e,i){const{children:s,title:n}=e,r=n||this.messages.untitledLayer,o=n&&n!==""?n:vS(),l=!!(i!=null&&i.length),c=i??s,f=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")};return kt("calcite-list-item",{class:fh.layerListGroup,key:o,label:r,open:l,onCalciteListItemSelect:y=>{y.stopPropagation(),f()}},kt("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:f}),kt("calcite-list",null,this._renderLayerListItemCollection(c)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};I([N()],mo.prototype,"_defaultViewModel",void 0),I([N()],mo.prototype,"_layerListFilter",void 0),I([N()],mo.prototype,"_gridLoadTask",void 0),I([N()],mo.prototype,"_openAndReady",null),I([N()],mo.prototype,"label",null),I([N({type:Boolean,nonNullable:!0})],mo.prototype,"layerListOpen",void 0),I([N({type:Boolean,nonNullable:!0})],mo.prototype,"gridOptionsOpen",void 0),I([N(),bg("esri/widgets/support/SnappingControls/t9n/SnappingControls")],mo.prototype,"messages",void 0),I([N(),bg("esri/t9n/common")],mo.prototype,"messagesCommon",void 0),I([N()],mo.prototype,"snappingOptions",null),I([N()],mo.prototype,"snappingManager",void 0),I([N()],mo.prototype,"view",null),I([N()],mo.prototype,"viewModel",null),I([N({type:LA,nonNullable:!0})],mo.prototype,"visibleElements",void 0),I([N()],mo.prototype,"_enabledToggleDisabled",null),I([N()],mo.prototype,"_secondaryElementsDisabled",null),mo=I([De("esri.widgets.support.SnappingControls")],mo);const jZe=mo,kl="esri-sketch",ho={base:kl,verticalLayout:`${kl}--vertical`,horizontalLayout:`${kl}--horizontal`,panel:`${kl}__panel`,infoPanel:`${kl}__info-panel`,section:`${kl}__section`,toolSection:`${kl}__tool-section`,infoSection:`${kl}__info-section`,infoCountSection:`${kl}__info-count-section`,menuContainer:`${kl}__menu-container`,menuHeader:`${kl}__menu-header`,menuTitle:`${kl}__menu-title`,featureCountBadge:`${kl}__feature-count-badge`,featureCountNumber:`${kl}__feature-count-number`};let ln=class extends hx{constructor(e,i){super(e,i),this._activeCustomToolOptions=null,this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.customToolOptions=null,this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new h0e,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=(e==null?void 0:e.viewModel)||new YUe}initialize(){const{layer:e,view:i}=this,s=new SZe({view:(i==null?void 0:i.type)==="2d"?i:null,sources:e?[e]:null});this.addHandles([xi(()=>this.viewModel,n=>{this._viewModelHandlesGroup=bo(this._viewModelHandlesGroup),n&&(this._viewModelHandlesGroup=am([n.on("create",r=>{this.scheduleRender(),this._onCreateOperation(r)}),n.on("update",()=>this.scheduleRender()),n.on("delete",r=>this.emit("delete",r)),n.on("undo",()=>this.scheduleRender()),n.on("redo",()=>this.scheduleRender()),xi(()=>n.layer,r=>{this._selectionToolbar&&(this._selectionToolbar.sources=r?[r]:null)}),xi(()=>n.view,r=>{this._selectionToolbar&&(this._selectionToolbar.view=(r==null?void 0:r.type)==="2d"?r:null)}),xi(()=>n.state,()=>this.notifyChange("state"))]))},Jl),vg(()=>s.activeToolInfo,()=>this.viewModel.cancel()),s.on("complete",n=>this._onSelectionOperationComplete(n)),xi(()=>{const{selectionTools:n}=this.visibleElements;return{lassoTool:!!(n!=null&&n["lasso-selection"]),rectangleTool:!!(n!=null&&n["rectangle-selection"])}},n=>{Object.assign(s.visibleElements,n)},Jl)]),this._selectionToolbar=s}loadDependencies(){return cx({action:()=>nt(()=>import("./calcite-action-txGY56Nb.js"),[],import.meta.url),icon:()=>nt(()=>import("./calcite-icon-Bsr1azWo.js"),[],import.meta.url)})}destroy(){var e;(e=this._selectionToolbar)==null||e.destroy(),this._viewModelHandlesGroup=bo(this._viewModelHandlesGroup)}get activeTool(){var i;const e=(i=this._selectionToolbar)==null?void 0:i.activeToolInfo;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){var e;return(e=this._selectionToolbar)!=null&&e.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const i=this._get("viewModel");e!==i&&(i&&so(i),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,visibleElements:i}=this;return e==null?void 0:e.filter(s=>{var n;return!!((n=i.createTools)!=null&&n[s])})}create(e,i,s){const n=(s==null?void 0:s.createOptions)??i;return this._activeCreateOptions=n||null,this._activeCustomToolOptions=s,Kh(this.viewModel.create(e,n))}update(e,i){return Kh(this.viewModel.update(e,i))}complete(){this.viewModel.complete()}cancel(){var e;(e=this._selectionToolbar)==null||e.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){var e;this.viewModel.undo(),(e=this.view)==null||e.focus()}redo(){var e;this.viewModel.redo(),(e=this.view)==null||e.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){const{label:e,layout:i,viewModel:{state:s}}=this;return kt("div",{"aria-label":e,class:this.classes(ho.base,SE.widget,{[SE.disabled]:s==="disabled",[ho.verticalLayout]:i==="vertical",[ho.horizontalLayout]:i==="horizontal"})},kt("div",{class:ho.panel,role:"toolbar"},this._renderTopPanelContents()),kt("div",{class:this.classes(ho.panel,ho.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){var c;const e=this.classes(ho.section,ho.toolSection),{_effectiveAvailableCreateTools:i,customToolOptions:s,visibleElements:n,viewModel:r}=this,o=r.updateOnGraphicClick||((c=this._selectionToolbar)==null?void 0:c.visibleToolCount),l=!(!(i!=null&&i.length)&&!(s!=null&&s.length));return[o?kt("div",{class:e,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,l?kt("div",{class:e,role:"menu"},this._renderDrawActions(),this._renderCustomToolActions()):null,n.undoRedoMenu?kt("div",{class:e,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,n.settingsMenu?kt("div",{class:ho.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[kt("div",{class:this.classes(ho.section,ho.infoSection,ho.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),kt("div",{class:this.classes(ho.section,ho.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){const{messagesCommon:e,snappingOptions:i,view:s,viewModel:n,visibleElements:r}=this,o={directionModePicker:r.directionModePicker,labelsToggle:r.labelsToggle,tooltipsToggle:r.tooltipsToggle};return kt("div",{class:ho.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},kt("header",{class:ho.menuHeader,key:"settings-menu-header"},kt("span",{class:ho.menuTitle},e.settings)),Object.values(o).includes(!0)?kt(CZe,{sketchOptions:n.sketchOptions,viewType:s==null?void 0:s.type,visibleElements:o}):void 0,r.snappingControls&&s&&i?kt(jZe,{snappingManager:this.viewModel.snappingManager,snappingOptions:i,view:s,visibleElements:r.snappingControlsElements}):void 0)}_renderFeatureCount(){const{layout:e,messages:i,updateGraphics:{length:s}}=this,n=uue(i.selectedCount,{count:s});return kt("div",{"aria-label":n,class:ho.featureCountBadge},kt("span",{class:ho.featureCountNumber},e==="vertical"?s:n))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;const e=this.messages,i=this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature;return kt("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:i,title:i},kt("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){const e=this.messages,i=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return kt("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:i,title:i},kt("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const{messages:e,state:i}=this,s=e.selectFeature;return kt("calcite-action",{active:i==="ready",bind:this,disabled:i==="disabled",onclick:this._activateDefaultSelectTool,scale:"s",text:s,title:s},kt("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){var e;if(((e=this.view)==null?void 0:e.type)==="2d"&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){var i;const{messages:e}=this;return(i=this._effectiveAvailableCreateTools)==null?void 0:i.map(s=>{switch(s){case"point":return this._renderAction(s,e.drawPoint,"pin");case"polyline":return this._renderAction(s,e.drawPolyline,"line");case"polygon":return this._renderAction(s,e.drawPolygon,"polygon");case"rectangle":return this._renderAction(s,e.drawRectangle,"rectangle");case"circle":return this._renderAction(s,e.drawCircle,"circle");default:return}})}_renderCustomToolActions(){var e;return(e=this.customToolOptions)==null?void 0:e.map(i=>this._renderCustomToolAction(i))}_renderCustomToolAction(e){var o;const{icon:i,label:s,toolKey:n,toolName:r}=e;return kt("calcite-action",{active:((o=this._activeCustomToolOptions)==null?void 0:o.toolKey)===n,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(r,null,e),scale:"s",text:s,title:s},kt("calcite-icon",{icon:i,scale:"s"}))}_renderAction(e,i,s){return kt("calcite-action",{active:this.activeTool===e&&!this._activeCustomToolOptions,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(e),scale:"s",text:i,title:i},kt("calcite-icon",{icon:s,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){const e=this.messages.undo;return kt("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||this.state==="disabled",onclick:this.undo,scale:"s",text:e,title:e},kt("calcite-icon",{icon:lZ(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){const e=this.messages.redo;return kt("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||this.state==="disabled",onclick:this.redo,scale:"s",text:e,title:e},kt("calcite-icon",{icon:lZ(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){const e=this.messagesCommon.settings;return kt("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:this.state==="disabled",onclick:this._toggleMenu,scale:"s",text:e,title:e},kt("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(e,i,s){var r;const n=this._activeCustomToolOptions;if(s||n){if((s==null?void 0:s.toolKey)===(n==null?void 0:n.toolKey))return void this.cancel()}else if(this.activeTool===e)return void this.cancel();(r=this._selectionToolbar)==null||r.cancel(),this.create(e,i,s)}_onCreateOperation(e){if(e.state!=="complete")return;const{creationMode:i}=this,{type:s}=e;if(s==="create"){const{tool:n,graphic:r}=e,o=this._activeCreateOptions;this._activeCreateOptions=null,i==="continuous"?this.create(n,o,this._activeCustomToolOptions):(this._activeCustomToolOptions=null,i==="update"&&this.update([r]))}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){const e=this.duplicate(),i=this.viewModel.activeTool;i!=="transform"&&i!=="reshape"||this.update(e,{tool:i})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:i}}=this,{selection:s}=e;if(!e.aborted&&s.length){const n=i.tool,r=s.length>1&&n==="reshape"?"transform":n;this.update(s,{...i,tool:r})}this.notifyChange("state")}_activateDefaultSelectTool(){var e;this.cancel(),(e=this.view)==null||e.focus()}};I([N()],ln.prototype,"_activeCustomToolOptions",void 0),I([N()],ln.prototype,"_activeCreateOptions",void 0),I([N()],ln.prototype,"activeTool",null),I([N({readOnly:!0})],ln.prototype,"activeTooltip",null),I([N({cast:t=>{if(!(t!=null&&t.length))return null;const e=new Set(["point","polyline","polygon","rectangle","circle"]);return t.filter(i=>e.has(i))}})],ln.prototype,"availableCreateTools",void 0),I([N({readOnly:!0})],ln.prototype,"createGraphic",null),I([N()],ln.prototype,"creationMode",void 0),I([N()],ln.prototype,"customToolOptions",void 0),I([N()],ln.prototype,"defaultCreateOptions",null),I([N()],ln.prototype,"defaultUpdateOptions",null),I([N()],ln.prototype,"icon",null),I([N()],ln.prototype,"label",null),I([N()],ln.prototype,"labelOptions",null),I([N()],ln.prototype,"layer",null),I([N({type:["horizontal","vertical"]})],ln.prototype,"layout",void 0),I([N(),bg("esri/widgets/Sketch/t9n/Sketch")],ln.prototype,"messages",void 0),I([N(),bg("esri/t9n/common")],ln.prototype,"messagesCommon",void 0),I([N()],ln.prototype,"snappingOptions",null),I([N()],ln.prototype,"state",null),I([N()],ln.prototype,"tooltipOptions",null),I([N({readOnly:!0})],ln.prototype,"updateGraphics",null),I([N({type:SA,nonNullable:!0})],ln.prototype,"valueOptions",null),I([N()],ln.prototype,"view",null),I([N(),$Ze(["create","update","undo","redo"])],ln.prototype,"viewModel",null),I([N({type:h0e,nonNullable:!0})],ln.prototype,"visibleElements",void 0),I([N()],ln.prototype,"_effectiveAvailableCreateTools",null),ln=I([De("esri.widgets.Sketch")],ln);const jA=ln,BZe=Object.freeze(Object.defineProperty({__proto__:null,default:jA},Symbol.toStringTag,{value:"Module"}));let Ca=class{*[Symbol.iterator](){let e=this.next();for(;e;)yield e,e=this.next()}},id=class extends Ca{constructor(e){super(),this.m_iGeom=-1,this.m_aGeoms=e?e.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const e=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,e}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}};function HZe(t){switch(t){case 1:return"Unknown error";case 2:return"Corrupted geometry";case 3:return"Empty geometry";case 4:return"Math singularity";case 5:return"Buffer is too small";case 6:return"Invalid shape type";case 7:return"Projection out of supported range";case 8:return"Non simple geometry";case 9:return"Cannot calculate geodesic";case 10:return"Notation conversion";case 11:return"Missing grid file";case 12:return"Invalid call";case 13:return"Internal error";case 14:return"Not implemented";case 15:return"IO error";case 16:return"Invalid 3D";case 17:return"An ambiguous geography edge with antipodal points";case 18:return"Geocentric coordinates require ellipsoidal height";case 19:return"Geography cannot be projected into a gnomonic plane or a result of an operation cannot fit into a gnomonic plane";case 20:return"Geometry is too large to be exported in to a given format";case 21:return"Operation is canceled by the user";default:return"unknown error"}}function K(t,e){try{if(!t)throw new Error(e)}catch(i){throw i}}class Fv extends Error{constructor(e,i){super(),this.m_AdditionalMessage=i,this.m_ErrorType=e}what(){return HZe(this.m_ErrorType)}additionalMessage(){return this.m_AdditionalMessage?this.m_AdditionalMessage:""}code(){return this.m_ErrorType}}let UZe=class extends Fv{constructor(e){super(2,e),this.name="corrupted geometry exception"}},YZe=class extends Fv{constructor(e){super(3,e),this.name="empty gemetry exception"}},XZe=class extends Fv{constructor(e){super(4,e),this.name="match singularity exception"}},WZe=class extends Fv{constructor(e){super(8,e),this.name="non simple geometry exception"}};var me;(function(t){t[t.enumUnknown=0]="enumUnknown",t[t.enumPoint=513]="enumPoint",t[t.enumLine=5122]="enumLine",t[t.enumBezier=5123]="enumBezier",t[t.enumEllipticArc=5124]="enumEllipticArc",t[t.enumEnvelope=3077]="enumEnvelope",t[t.enumMultiPoint=8710]="enumMultiPoint",t[t.enumPolyline=25607]="enumPolyline",t[t.enumPolygon=27656]="enumPolygon",t[t.enumMultipatch=40969]="enumMultipatch",t[t.enumGeometryCollection=3594]="enumGeometryCollection",t[t.enumRationalBezier2=5134]="enumRationalBezier2",t[t.enumBezier2=5135]="enumBezier2",t[t.enumRationalBezier23d=5392]="enumRationalBezier23d",t[t.enumGreatArc3d=5393]="enumGreatArc3d"})(me||(me={}));const ZZe=[0,0,1,1,1,2,0,1,2,3,-1,-1,-1,-1,1,1];function cl(t){return ZZe[15&t]}function Ig(t){return!!(512&t)}function cge(t){return!!(1024&t)}function Bee(t){return!!(2048&t)}function Dn(t){return!!(4096&t)}function el(t){return!!(8192&t)}function bi(t){return!!(16384&t)}function BA(t){return!!(32768&t)}function CE(t){const e=t.getGeometryType();return el(e)?t.getPointCount():t.isEmpty()?0:e===me.enumEnvelope?4:e===me.enumPoint?1:Dn(e)?2:void bt("missing type")}function aj(t){const e=t.getGeometryType();if(bi(e))return t.hasNonLinearSegments();if(e===me.enumGeometryCollection){const i=t;for(let s=0,n=i.getGeometryCount();s<n;s++)if(aj(i.getGeometry(s)))return!0;return!1}return!!Dn(e)&&e!==me.enumLine}function hge(t){throw new UZe(t)}function Je(t){const e=new Error(t);throw e.name="invalid argument exception",e}function KF(t){const e=new XZe(t);throw e.name="invalid argument exception",e}function KZe(){Je("Geometry type is not supported for 3D operations.")}function bn(t){throw new Fv(12,t)}function HA(t){throw new YZe(t)}function js(t){const e=new Fv(14,t);throw e.name="not implemented",e}function Mi(t){const e=new Error(t);throw e.name="out of range exception",e}function bt(t){const e=new Fv(13,t);throw e.name="internal error",e}function JZe(t){const e=new Error(t);throw e.name="logic error exception",e}function JF(t){throw new WZe(t)}function QZe(){js("operation does not support curves yet")}function F2(t){t&&aj(t)&&QZe()}function Xc(t){t&&BA(t.getGeometryType())&&js("Unsupported geometry type.")}function UA(t){t===me.enumGeometryCollection&&Je("Geometry_collection instances are not supported in this operation")}function eKe(t){UA(t.getGeometryType())}function PE(t,e){t||Je(e)}class Fr{constructor(e){this.sum=e,this.compensation=0}assign(e){return this.compensation=e.compensation,this.sum=e.sum,this}reset(){this.sum=this.compensation=0}resetToStart(e){this.sum=e,this.compensation=0}normalize(){K(0)}add(e){const i=this.sum+e;let s;if(Math.abs(this.sum)>=Math.abs(e)){const n=this.sum-i+e;s=this.compensation+n}else{const n=e-i+this.sum;s=this.compensation+n}this.sum=i,this.compensation=s}sub(e){this.add(-e)}addProduct(e,i){const s=[0],n=dge(e,i,s);this.add(n),this.add(s[0])}addKahan(e){K(0)}subKahan(e){K(0)}mulKahan(e){K(0)}mul(e){const i=new Fr(0);i.addProduct(this.sum,e),i.addProduct(this.compensation,e),this.assign(i)}getResult(){return this.sum+this.compensation}pe(e){return this.add(e),this}me(e){return this.add(-e),this}meKahan(e){return this.subKahan(e),this}peKahan(e){return this.addKahan(e),this}}const tKe=0x00000000ffffffffn,iKe=0x0000ffffn,sKe=0x000000ffn,nKe=0x0fn,rKe=0xffff0000n,oKe=0xff00n,aKe=0xf0n,lKe=[5,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1],uKe=[-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3];function QF(t){let e=0;return t&iKe||(e+=16,t>>=16n),t&sKe||(e+=8,t>>=8n),t&nKe||(e+=4,t>>=4n),e+lKe[Number(BigInt.asUintN(4,t))]}function cKe(t){let e=0;return t&rKe&&(e+=16,t>>=16n),t&oKe&&(e+=8,t>>=8n),t&aKe&&(e+=4,t>>=4n),e+uKe[Number(BigInt.asUintN(4,t))]+1}function Hee(t){let e=0;return t&tKe||(e=32,t>>=32n),e+QF(BigInt.asUintN(32,t))}function hKe(t){let e=0;return 0xffffffff00000000n&t&&(e=32,t>>=32n),e+cKe(t)}class Ze{constructor(e,i){if(e!==void 0){if(e instanceof Ze)return this.vmin=e.vmin,void(this.vmax=e.vmax);this.vmin=e,this.vmax=i,this.normalize()}else this.setEmpty()}static construct(e,i){return new Ze(e,i)}static constructEmpty(){return new Ze}setCoords(e,i){this.vmin=e,this.vmax=i,this.normalize()}setCoordsFromEnvelope(e){this.vmin=e.vmin,this.vmax=e.vmax}setEmpty(){this.vmin=Number.NaN,this.vmax=Number.NaN}getCenter(){return .5*(this.vmin+this.vmax)}equalsRange(e,i){return ga(this.vmin,e)&&ga(this.vmax,i)}equals(e,i){return!(!this.isEmpty()||!e.isEmpty())||(i!==void 0?Math.abs(this.vmin-e.vmin)<=i&&Math.abs(this.vmax-e.vmax)<=i:this.vmin===e.vmin&&this.vmax===e.vmax)}width(){return this.vmax-this.vmin}isEmpty(){return Number.isNaN(this.vmin)||Number.isNaN(this.vmax)}isZero(){return K(0),!0}setInfinite(){this.vmin=Number.NEGATIVE_INFINITY,this.vmax=Number.POSITIVE_INFINITY}move(e){this.isEmpty()||(this.vmin+=e,this.vmax+=e)}contains(e){return e.vmin>=this.vmin&&e.vmax<=this.vmax}containsCoordinate(e){return e>=this.vmin&&e<=this.vmax}containsRightExclusive(e){return e>=this.vmin&&e<this.vmax}containsExclusiveCoordinate(e){return e>this.vmin&&e<this.vmax}containsExclusive(e){return K(0),!0}isIntersecting(e){return this.vmin<=e.vmin?this.vmax>=e.vmin:e.vmax>=this.vmin}mergeCoordinate(e){if(this.isEmpty())return this.vmin=e,void(this.vmax=e);this.mergeNeCoordinate(e)}merge(e){if(e.isEmpty())return;const i=e.vmin,s=e.vmax;this.mergeCoordinate(i),this.mergeCoordinate(s)}mergeNe(e){const i=e.vmin,s=e.vmax;this.mergeNeCoordinate(i),this.mergeNeCoordinate(s)}mergeNeCoordinate(e){e<this.vmin?this.vmin=e:e>this.vmax&&(this.vmax=e)}intersect(e){this.isEmpty()||e.isEmpty()?this.setEmpty():(this.vmin<e.vmin&&(this.vmin=e.vmin),this.vmax>e.vmax&&(this.vmax=e.vmax),this.vmin>this.vmax&&this.setEmpty())}inflate(e){K(0)}normalize(){this.vmin<=this.vmax||(this.vmin>this.vmax?this.vmax=St(this.vmin,this.vmin=this.vmax):this.setEmpty())}isValid(){return this.isEmpty()||this.vmin<=this.vmax}snapClip(e){return cn(e,this.vmin,this.vmax)}calculateToleranceFromEnvelope(){return this.isEmpty()?pv():(Math.abs(this.vmin)+Math.abs(this.vmax)+1)*pv()}static unit(){return dKe}normalizeNoNAN(){this.vmin>this.vmax&&(this.vmax=St(this.vmin,this.vmin=this.vmax))}setCoordsNoNAN(e,i){this.vmin=e,this.vmax=i,this.normalizeNoNAN()}clone(){return new Ze(this.vmin,this.vmax)}}const dKe=new Ze(0,1);let Be=class Fs{static getNAN(){return new Fs(Number.NaN)}constructor(e,i){this.m_value=e??0,this.m_eps=i??0}[Symbol.toPrimitive](e){return this}clone(){return new Fs(this.m_value,this.m_eps)}assign(e){return this.m_value=e.m_value,this.m_eps=e.m_eps,this}scaleError(e){this.m_eps*=e}setError(e){this.m_eps=e}set(e,i){return this.m_value=e,this.m_eps=i??0,this}setWithEps(e,i){return i===void 0&&(i=1),this.m_value=e,this.m_eps=Fs.ulp(e)*i,this}setE(e){return this.m_value=e.m_value,this.m_eps=e.m_eps,this}precise(){return new Fs(this.m_value)}value(){return this.m_value}toDouble(){return this.m_value}eps(){return this.m_eps}resetError(){return this.m_eps=0,this}absThis(){return this.m_value=Math.abs(this.m_value),this}add(e){return this.clone().addThis(e)}addE(e){return this.clone().addThisE(e)}addThisE(e){const i=this.m_value+e.m_value,s=this.m_eps+e.m_eps+Fs.ulp(i);return this.m_value=i,this.m_eps=s,this}addThis(e){const i=this.m_value+e,s=this.m_eps+Fs.ulp(i);return this.m_value=i,this.m_eps=s,this}subE(e){return this.clone().subThisE(e)}sub(e){return this.clone().subThis(e)}subThisE(e){const i=this.m_value-e.m_value,s=this.m_eps+e.m_eps+Fs.ulp(i);return this.m_value=i,this.m_eps=s,this}subThis(e){const i=this.m_value-e,s=this.m_eps+Fs.ulp(i);return this.m_value=i,this.m_eps=s,this}setAddE(e,i){return this.m_value=e.m_value+i.m_value,this.m_eps=e.m_eps+i.m_eps+Fs.ulp(this.m_value),this}setAdd(e,i){return this.m_value=e+i,this.m_eps=Fs.ulp(this.m_value),this}setAddEN(e,i){return this.m_value=e.m_value+i,this.m_eps=e.m_eps+Fs.ulp(this.m_value),this}setAddNE(e,i){return this.m_value=e+i.m_value,this.m_eps=i.m_eps+Fs.ulp(this.m_value),this}setSubE(e,i){return this.m_value=e.m_value-i.m_value,this.m_eps=e.m_eps+i.m_eps+Fs.ulp(this.m_value),this}setSub(e,i){return this.m_value=e-i,this.m_eps=Fs.ulp(this.m_value),this}setSubEN(e,i){return this.m_value=e.m_value-i,this.m_eps=e.m_eps+Fs.ulp(this.m_value),this}setSubNE(e,i){return this.m_value=e-i.m_value,this.m_eps=i.m_eps+Fs.ulp(this.m_value),this}mulThisE(e){const i=this.m_value*e.m_value;return this.m_eps=this.m_eps*Math.abs(e.m_value)+e.m_eps*Math.abs(this.m_value)+this.m_eps*e.m_eps+Fs.ulp(i),this.m_value=i,this}mulThis(e){const i=this.m_value*e;return this.m_eps=this.m_eps*Math.abs(e)+Fs.ulp(i),this.m_value=i,this}mul(e){return this.clone().mulThis(e)}mulE(e){return this.clone().mulThisE(e)}setMulE(e,i){const s=e.m_value*i.m_value;return this.m_eps=e.m_eps*Math.abs(i.m_value)+i.m_eps*Math.abs(e.m_value)+e.m_eps*i.m_eps+Fs.ulp(s),this.m_value=s,this}setMul(e,i){return this.m_value=e*i,this.m_eps=Fs.ulp(this.m_value),this}setMulEN(e,i){return this.setE(e),this.mulThis(i)}setMulNE(e,i){return this.setE(i),this.mulThis(e)}mulThisByPower2(e){return this.m_value*=e,this.m_eps*=Math.abs(e),this}static st_mulByPower2(e,i){return new Fs(e.m_value,e.m_eps).mulThisByPower2(i)}divE(e){return this.clone().divThisE(e)}divThisE(e){const i=Math.abs(e.m_value),s=this.m_value/e.m_value;let n=(this.m_eps+Math.abs(s)*e.m_eps)/i;if(e.m_eps>.01*i){const r=e.m_eps/i;n*=1+(1+r)*r}return this.m_value=s,this.m_eps=n+Fs.ulp(s),this}divThis(e){const i=Math.abs(e);return this.m_value/=e,this.m_eps=this.m_eps/i+Fs.ulp(this.m_value),this}setDivE(e,i){return this.setE(e),this.divThisE(i)}setDiv(e,i){return this.m_value=e/i,this.m_eps=Fs.ulp(this.m_value),this}setDivEN(e,i){return this.setE(e),this.divThis(i)}setDivNE(e,i){return this.set(e),this.divThisE(i)}divThisByPower2(e){return this.m_value/=e,this.m_eps/=Math.abs(e),this}invThis(){return this.setE(Kp.clone().divThisE(this)),this}sqrt(){return this.clone().sqrtThis()}sqrtThis(){let e,i;return this.m_value>=0?(e=Math.sqrt(this.m_value),i=this.m_value>10*this.m_eps?.5*this.m_eps/e:this.m_value>this.m_eps?e-Math.sqrt(this.m_value-this.m_eps):Math.max(e,Math.sqrt(this.m_value+this.m_eps)-e),i+=Fs.ulp(e)):this.m_value<-this.m_eps?(e=Number.NaN,i=Number.NaN):(e=0,i=Math.sqrt(this.m_eps)),this.m_value=e,this.m_eps=i,this}sqr(){return this.clone().sqrThis()}sqrThis(){const e=this.m_value*this.m_value;return this.m_eps=2*this.m_eps*Math.abs(this.m_value)+this.m_eps*this.m_eps+Fs.ulp(e),this.m_value=e,this}cubeThis(){return K(0),this}setSin(e){const i=Math.sin(e.m_value),s=Math.cos(e.m_value);this.m_value=i;const n=Math.abs(i),r=Math.abs(e.value());return this.m_eps=(Math.abs(s)+.5*n*e.m_eps)*e.m_eps+Fs.ulp(n+r),this}static ulp(e){let i=ZA(e);const s=((0x7ff0000000000000n&i)>>52n)-1075n;return s>-1023n?(i=s+0x3ffn<<52n,TKe(i)):e===0?0:Number.MIN_VALUE}setCos(e){const i=Math.sin(e.m_value),s=Math.cos(e.m_value);this.m_value=s;const n=Math.abs(s),r=Math.abs(e.value());return this.m_eps=(Math.abs(i)+.5*n*e.m_eps)*e.m_eps+Fs.ulp(n+r),this}static st_cosAndSin(e,i,s){const n=Math.sin(e.m_value),r=Math.cos(e.m_value);s.m_value=n,i.m_value=r;const o=Math.abs(n),l=Math.abs(r),c=Math.abs(e.value());s.m_eps=(Math.abs(r)+.5*o*e.m_eps)*e.m_eps+Fs.ulp(o+c),i.m_eps=(Math.abs(n)+.5*l*e.m_eps)*e.m_eps+Fs.ulp(l+c)}setLog(e){return K(0),this}negate(){return this.clone().negateThis()}negateThis(){return this.m_value=-this.m_value,this}setAbs(){return this.m_value=Math.abs(this.m_value),this}static atan2(e,i){return K(0),new Fs}acosThis(){return K(0),this}asinThis(){return K(0),this}isInInterval(e){return Ze.construct(this.m_value-this.m_eps,this.m_value+this.m_eps).isIntersecting(e)}eq(e){return Math.abs(this.m_value-e.m_value)<=this.m_eps+e.m_eps}ne(e){return!this.eq(e)}gt(e){return this.m_value-e.m_value>this.m_eps+e.m_eps}lt(e){return e.m_value-this.m_value>this.m_eps+e.m_eps}ge(e){return!this.lt(e)}le(e){return!this.gt(e)}tolEQ(e,i){return Math.abs(this.m_value-e.m_value)<=i||this.eq(e)}tolNE(e,i){return!this.tolEQ(e,i)}tolGT(e,i){return this.m_value-e.m_value>i&&this.gt(e)}tolLT(e,i){return e.m_value-this.m_value>i&&this.lt(e)}tolGE(e,i){return!this.tolLT(e,i)}tolLE(e,i){return!this.tolGT(e,i)}isZero(){return Math.abs(this.m_value)<=this.m_eps}isFuzzyZero(){return this.isZero()&&this.m_eps!==0}tolIsZero(e){return Math.abs(this.m_value)<=Math.max(this.m_eps,e)}setPi(){this.setE(fKe)}setEuler(){this.set(2.718281828459045,lj())}cubicRootThis(){return K(0),this}powerThis(e){return K(0),this}setPower(e,i){return this.setE(e),this.powerThis(i)}static size(){return 1}};function oa(t,e){const i=P6(t),s=P6(e),n=53-Hee(i),r=53-Hee(s);return(n>=0?n:0)+(r>=0?r:0)<=52}function q4(t,e){const i=t+e;return i-t===e&&i-e===t}function nl(t,e){const i=t-e;return t-i===e&&e+i===t}function lj(){return en()}Be.dimensions=1;const fKe=new Be(Math.PI,.5*lj()),Tx=new Be(0,0),Kp=new Be(1,0),pKe=new Be(4,0);function wc(t,e,i){return t.addE(e.subE(t).mulE(i))}function Sc(t,e,i){return e.subE(e.subE(t).mulE(Kp.subE(i)))}function mKe(t,e){return t<e?rr(t,e):rr(e,t)}function Jp(t,e){const i=Math.abs(t);return e>=0?i:-i}function fv(t){return Math.round(t)}function Wn(t,e,i,s,n){n[0]=e[0]+(i[0]-e[0])*s,n[1]=e[1]+(i[1]-e[1])*s,t===3&&(n[2]=e[2]+(i[2]-e[2])*s)}function Zn(t,e,i,s,n){n[0]=i[0]-(i[0]-e[0])*(1-s),n[1]=i[1]-(i[1]-e[1])*(1-s),t===3&&(n[2]=i[2]-(i[2]-e[2])*(1-s))}function BS(t,e,i,s,n){s<=.5?Wn(t,e,i,s,n):Zn(t,e,i,s,n)}function Zd(t,e,i,s,n){n[0]=e[0].addE(i[0].subE(e[0]).mulE(s)),n[1]=e[1].addE(i[1].subE(e[1]).mulE(s))}function Kd(t,e,i,s,n){n[0]=i[0].subE(i[0].subE(e[0]).mulE(Kp.subE(s))),n[1]=i[1].subE(i[1].subE(e[1]).mulE(Kp.subE(s)))}function ji(t,e,i){let s;return s=i<=.5?t+(e-t)*i:e-(e-t)*(1-i),s}function yo(t,e,i){return t+(e-t)*i}function Lr(t,e,i){return e-(e-t)*(1-i)}function ar(t,e,i,s){i<=.5?(s.x=t.x+(e.x-t.x)*i,s.y=t.y+(e.y-t.y)*i):(s.x=e.x-(e.x-t.x)*(1-i),s.y=e.y-(e.y-t.y)*(1-i))}function gKe(t,e,i,s){i<=.5?(s.x=t.x+(e.x-t.x)*i,s.y=t.y+(e.y-t.y)*i,s.z=t.z+(e.z-t.z)*i):(s.x=e.x-(e.x-t.x)*(1-i),s.y=e.y-(e.y-t.y)*(1-i),s.z=e.z-(e.z-t.z)*(1-i))}function Ui(t){return t*t}function Uee(t){return t*t*t}function yKe(t){return 1/Math.sqrt(t)}function xn(t){return t<0?-1:t>0?1:0}const Yee=[0],vKe=[0];function Xee(t,e,i){return _Ke(dge(t,e,Yee),i,Yee[0],vKe)}const dN=[0],fN=[0],pN=[0],mN=[0];function dge(t,e,i){const s=t*e;return Wee(t,dN,fN),Wee(e,pN,mN),i[0]=fN[0]*mN[0]-(s-dN[0]*pN[0]-fN[0]*pN[0]-dN[0]*mN[0]),s}function Wee(t,e,i){const s=134217729*t;e[0]=s-(s-t),i[0]=t-e[0]}const Zee=[0],Kee=[0];function _Ke(t,e,i,s){const n=gN(t,e,Zee),r=gN(n,i,Kee);return gN(r,Zee[0]+Kee[0],s)}function gN(t,e,i){const s=t+e;return Math.abs(t)>Math.abs(e)?i[0]=t-s+e:i[0]=e-s+t,s}function Mg(t,e){return t%e}function uj(t){const e=1-t;if(e===0)return 1;let i;if(e<=.01){const s=e,n=Math.log(s);i=1+s*(.4431471805599453-.25*n+s*(.05680519270997949-.09375*n+s*(.02183137044373718-.05859375*n+s*(.011544521417308362-.042724609375*n+s*(.00714200031339596-.0336456298828125*n+s*(.004854743337164948-.027757644653320312*n+s*(.003514687963781376-.023627042770385742*n)))))))}else{if(t<.016){const s=t;return _a()*(1-s*(.25+s*(.046875+s*(.01953125+s*(.01068115234375+s*(.0067291259765625+s*(.004626274108886719+s*(.0033752918243408203+s*.0025710230693221092))))))))}i=fge(0,e,1)-t*pge(0,e,1)/3}return cn(i,1,_a())}function cj(t,e,i=Number.NaN){if(K(e>=0&&e<=1),e===0)return t;let s=1,n=t;if(n<0&&(n=-n,s=-1),e===1){const y=Math.round(n/ki()),_=n-y*ki();return s*(2*y+Math.sin(_))}const r=_a(),o=Math.floor(n/r);1&o?n=(o+1)*r-n:n-=o*r;const l=Math.sin(n),c=Number.isNaN(i)?uj(e):i;let f;if(l===1)f=c+Math.sqrt(1-e)*(n-r);else{const y=n*n;if(.01424*Math.pow(y,4)<=2*en())f=n*(1+y*e*(-1/6+y*((4-3*e)/120-(16+(45*e-60)*e)/5040*y)));else if(e<=.01){const _=Math.sin(2*n),x=Math.sin(4*n),S=Math.sin(6*n),P=Math.sin(8*n),A=Math.sin(10*n);f=n+e*((2*-n+_)/8+e*((-3*n+2*_-.25*x)/64+e*((-20*n+15*_-3*x+S/3)/1024+e*(5*(-140*n+112*_-28*x+16/3*S-.5*P)/65536+7*e*((-63*n+52.5*_-15*x+3.75*S-.625*P+.05*A)/65536+e*(-693*n+594*_-185.625*x+1.375*S-12.375*P+1.8*A-.125*Math.sin(12*n))/1048576)))))}else{const _=l*l,x=Math.cos(n),S=x*x,P=mge(l,x,e);f=l*(fge(S,P,1)-e*_*pge(S,P,1)/3)}}return 1&o?f=c*(o+1)-f:f+=c*o,s*f}function bKe(t,e,i=Number.NaN){if(t===0)return 0;let s=1,n=t;t<0&&(n=-n,s=-1);const r=Number.isNaN(i)?uj(e):i,o=Math.floor(n/r);1&o?n=(o+1)*r-n:n-=o*r;let l=n<=0?0:n>=r?_a():xKe(n,e,r);return 1&o?l=_a()*(o+1)-l:l+=_a()*o,s*l}function fge(t,e,i){K((t!==0?1:0)+(e!==0?1:0)+1>1);let s=t,n=e,r=i;for(;;){const o=Math.sqrt(s*n)+Math.sqrt(n*r)+Math.sqrt(r*s);s=.25*(s+o),n=.25*(n+o),r=.25*(r+o);const l=(s+n+r)/3,c=(l-s)/l,f=(l-n)/l,y=(l-r)/l;if(Math.abs(c)<=.0024&&Math.abs(f)<=.0024&&Math.abs(y)<=.0024){const _=c*f-y*y,x=c*f*y;return(1+(1/24*_-.1-3/44*x-5*_*_/208+_*x/16)*_+(1/14+3*x/104)*x)/Math.sqrt(l)}}}function pge(t,e,i){K(t!==0||e!==0);let s=t,n=e,r=i;const o=new Fr(0);let l=1;for(;;){const c=.2*(s+n+3*r),f=(c-s)/c,y=(c-n)/c,_=(c-r)/c;if(Math.abs(f)<=.0015&&Math.abs(y)<=.0015&&Math.abs(_)<=.0015){const k=f*y,$=_*_,F=k-$,G=k-6*$,V=G+F+F,B=9/22,W=3/26,J=G*(.25*B*G-3/14-1.5*W*_*V),re=_*(1/6*V+_*(-.4090909090909091*F+_*W*k));return 3*o.getResult()+l*(1+J+re)/(c*Math.sqrt(c))}const x=Math.sqrt(s),S=Math.sqrt(n),P=Math.sqrt(r),A=x*(S+P)+S*P;o.add(l/(P*(r+A))),l*=.25,s=.25*(s+A),n=.25*(n+A),r=.25*(r+A)}}function mge(t,e,i){return t<.999?1-i*Ui(t):1-i+i*Ui(e)}function xKe(t,e,i){if(e===0)return t;if(e===1)return Math.asin(t);let s=0,n=!0;if(t<.2){const o=t*t,l=t*(1+o*e*(1/6+o*((13*e-4)/120+(16-284*e+493*e*e)/5040*o))),c=Math.abs(e*(4944*e-64-31224*e*e+37369*e*e*e)/362880*Math.pow(t,9));if(c<Math.abs(l)*en())return l;s=l,n=c>.1*l}if(n){const o=1-e,l=1-t/i,c=Math.sqrt(l*l+o*o),f=Math.atan2(o,t+en());s=_a()+Math.sqrt(c)*(f-_a())}let r=0;for(let o=0;o<7;o++){r=cj(s,e,i);const l=mge(Math.sin(s),Math.cos(s),e);if(s-=(r-t)/Math.sqrt(l),o>0&&Math.abs(r-t)<=4*en()*t)break}return s}function YA(t,e,i,s,n){return t===0?s===0?e:s===1?i:n:t===1?s===0?e:s===1?i:ji(e,i,s):(t===2&&js("angular interpolation"),void js(""))}function ez(t,e,i,s,n,r,o,l){if(t===0)for(let c=0;c<r;++c)s[c+n]=o===0?e[c]:o===1?i[c]:l;else if(t===1)if(o===0)dn(s,e,n,0,r);else if(o===1)dn(s,i,n,0,r);else for(let c=0;c<r;++c)s[c+n]=ji(e[c],i[c],o);else if(t===2)if(o===0)dn(s,e,n,0,r);else if(o===1)dn(s,i,n,0,r);else{let c=0;for(let f=0,y=n;f<r;++f,++y)s[y]=ji(e[f],i[f],o),c+=s[y]*s[y];if(c>0){c=Math.sqrt(c);for(let f=n;f<n+r;++f)s[f]/=c}else{for(let f=n;f<n+r;++f)s[f]=0;s[n]=1}}else js("")}function dn(t,e,i,s,n){if(n===0)return;let r=0,o=i,l=s;for(;r++<n;)t[o++]=e[l++]}function St(t,e){return t}function Ix(t){t.sort((e,i)=>e<i?-1:e>i?1:0)}function tz(t,e){const i=t.slice(0,e);Ix(i),dn(t,i,0,0,e)}function sd(t,e,i,s){const n=t.slice(e,e+i);n.sort(s),dn(t,n,e,0,i)}function _f(t,e){return t<e?-1:t>e?1:0}function Jee(t,e,i,s){return t<i?-1:t>i?1:e<s?-1:e>s?1:0}function gge(t,e){if(t.length<2)return t.length;let i=0;for(let s=1;s<t.length;++s)e(t[s],t[i])||(i++,t[s]=St(t[i],t[i]=t[s]));return 1+i}function wKe(t,e){t[e]=t.at(-1),t.pop()}function XA(t,e=!1){return{[Symbol.dispose](){this.bForget||t()},bForget:e}}function Ge(t,e){return Array.from({length:e},()=>new t)}function E6(t,e,i){for(let s=0;s<i;++s)t[s].assign(e[s]);return i}function C6(t,e){const i=t.slice(0,e);for(let s=0;s<e;++s)i[s]=i[s].clone();return i}function HS(t){return Array.from({length:t},()=>null)}function Qee(t,e){return Array.from({length:e},()=>t())}function Vi(t,e){return Array.from({length:t},()=>e)}function WA(t,e){return e in t&&Object.getOwnPropertyNames(t).length===1}class SKe{constructor(...e){this.m_elts=e}get length(){return this.m_elts.length}at(e){return this.m_elts[e]}[Symbol.dispose](){for(const e of this.m_elts)e[Symbol.dispose]()}}function rr(t,e){return{first:t,second:e}}const hj=Math.PI,rS=2*Math.PI,Ss=.5*Math.PI,yge=new ArrayBuffer(8),vge=new Float64Array(yge),_ge=new BigUint64Array(yge),EKe=0x0fffffffffffffn,CKe=0x7ff0000000000000n;function PKe(){return Number.EPSILON*zKe}function ZA(t){return vge[0]=t,_ge[0]}function TKe(t){return _ge[0]=t,vge[0]}function P6(t){return ZA(t)&EKe}function ete(t){return Number((ZA(t)&CKe)>>52n)}function T1(t){if(t===0n)return-1n;if(t===1n||-1n===t)return 0n;t<0n&&(t=-t);let e=0n,i=512n,s=1n<<e+i;for(;t>=s;)e+=i,i<<=1n,s<<=i;let n=e;i>>=1n;let r=n+i;for(;i>0n;)t<1n<<r||(n=r),i>>=1n,r=n+i;return n}function ga(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function t5(t,e,i){return t===e||Math.abs(t-e)<=i||Number.isNaN(t)&&Number.isNaN(e)}function Js(t,e){return t<e?-1:t>e?1:0}function IKe(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;{const i=Number.isNaN(t),s=Number.isNaN(e);return i<s?-1:i>s?1:0}}function ya(){return 2147483647}function tte(){return 32767}function vo(){return 2147483647}const KA=vo(),MKe=BigInt(KA),bge=2166136261,oS=16777619;function AKe(t){let e=bge,i=t;return e=(e^255&i)*oS,i>>=8,e=(e^255&i)*oS,i>>=8,e=(e^255&i)*oS,i>>=8,e=(e^255&i)*oS,e&KA}const DKe=14695981039346656037n,I1=1099511628211n;function kKe(t){let e=DKe,i=t;return e=(e^0xffn&i)*I1,i>>=8n,e=(e^0xffn&i)*I1,i>>=8n,e=(e^0xffn&i)*I1,i>>=8n,e=(e^0xffn&i)*I1,i>>=8n,e=(e^0xffn&i)*I1,i>>=8n,e=(e^0xffn&i)*I1,i>>=8n,e=(e^0xffn&i)*I1,e&MKe}function NKe(t){return 1103515245*t+12345&2147483647}function $Ke(t){let e=bge;for(let i=0,s=t.length;i<s;++i)e=(e^t.charCodeAt(i))*oS;return e&KA}function Va(t,e){return e+2654435769+(t<<6)+(t>>2)&KA}function OKe(t,e){return Va(t,LKe(e))}function xge(t){return Va(3735928559,t)}function RKe(t,e){return Va(t,xge(e))}function ef(t){return AKe(t)}function LKe(t){return Number(kKe(t))}function n2(t){return NKe(t)}const FKe=100,zKe=100;function pv(){return Number.EPSILON*FKe}function iz(){return .38196601125010515}function qKe(){return 1.4142135623730951}function en(){return Number.EPSILON}function Is(t,e,i){return t===e||t===i}function cn(t,e,i){return t>=e?t<=i?t:i:e}function sz(t,e,i){const s=t[0];if(s>=e){if(s<=i)return!1;t[0]=i}else t[0]=e;return!0}function VKe(t,e){return t>=e?e:t<-e?-e:t}function ki(){return hj}function Vo(){return rS}function _a(){return Ss}const GKe=3*_a();function jKe(){return GKe}function BKe(t){return t+0}function ite(t){return{v:t}}let _t=class ir{constructor(){this.m_rn=ite(0n),this.m_rd=ite(1n),this.m_bNaN=!1,this.m_bNormalized=!1,this.m_power=0,this.m_sign=0}static constructAssign(e,i){const s=e.clone();return i!==void 0&&s.limitPrecisionThis(i),s}static constructDouble(e){return new ir().setDouble(e)}static constructInt64(e){return new ir().setInt64(e)}static constructRational(e,i){return new ir().setRational(e,i)}static constructInt32(e){return this.constructInt64(BigInt(Math.trunc(e)))}[Symbol.toPrimitive](e){return this}compare(e){return this.lt(e)?-1:this.gt(e)?1:0}assignCopy(e){return this.setThis(e)}abs(){return this.clone().absThis()}absThis(){return this.isNAN()||(this.m_sign*=this.m_sign),this}clone(){return new ir().setThis(this)}setThis(e){return this.m_bNaN=e.m_bNaN,this.m_bNormalized=e.m_bNormalized,this.m_rn.v=e.m_rn.v,this.m_rd.v=e.m_rd.v,this.m_power=e.m_power,this.m_sign=e.m_sign,this}setZero(){return this.m_rn.v=0n,this.m_rd.v=1n,this.m_bNaN=!1,this.m_power=0,this.m_bNormalized=!0,this.m_sign=0,this}setDouble(e){if(this.setZero(),e===0)return this;if(Number.isInteger(e)&&Math.abs(e)<vo())return this.setInt32(e);const i=ZA(e),s=(i&ir.s_em)>>52n,n=!!(i&ir.s_sm),r=i&ir.s_fm;if(s===ir.s_emax)return r?(this.m_rn.v=this.m_rd.v=0n,this.m_bNaN=!0,this):(this.m_rn.v=n?-1n:1n,this.m_rd.v=0n,this);s===0n&&js("denormalized numbers not yet implemented");const o=s-1023n,l=o>=0n?o:0n,c=o<0n?-o:0n;return this.m_rn.v=(1n<<52n|r)<<l,this.m_rd.v=1n<<52n+c,this.m_sign=n?-1:1,this.m_bNormalized=!1,this.normalizeThis()}setInt64(e){return e===0n?this.setZero():(this.m_bNaN=!1,this.m_sign=e>0n?1:-1,this.m_rn.v=e>0n?e:-e,this.m_rd.v=1n,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setRational(e,i){return e===0n?i===0n?this.setNAN():this.setZero():i===0n?e>0n?this.setPositiveInf():this.setNegativeInf():(this.m_sign=(e>0n?1:-1)*(i>0n?1:-1),this.m_rn.v=e>0n?e:-e,this.m_rd.v=i>0n?i:-i,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setInt32(e){return this.setInt64(BigInt(Math.trunc(e)))}getDouble(){return this.convertToDouble()}toDouble(){return this.convertToDouble()}value(){return this.convertToDouble()}isNAN(){return this.m_bNaN}isPositiveInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===1}isNegativeInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===-1}isFinite(){return!this.isNAN()&&this.m_rd.v!==0n}setNAN(){return this.m_bNaN=!0,this.m_rn.v=0n,this.m_rd.v=0n,this.m_power=0,this.m_bNormalized=!0,this}setPositiveInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=1,this.m_power=0,this}setNegativeInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=-1,this.m_power=0,this}subThis(e){if(e.isNAN()&&this.setNAN(),this.isPositiveInf()&&e.isPositiveInf())this.setNAN();else{if(this.isPositiveInf()&&e.isNegativeInf())return this.setPositiveInf(),this;if(this.isNegativeInf()&&e.isNegativeInf())this.setNAN();else if(this.isNegativeInf()&&e.isPositiveInf())return this.setNegativeInf(),this}return this.isNAN()?this:this.opPlusMinus(e,!1)}thisSubAbs(e){return K(0),this}mulThis(e){return e.isNAN()&&this.setNAN(),this.isNAN()?this:(this.m_sign*=e.m_sign,this.m_sign===0?this.setZero():(this.m_rn.v*=e.m_rn.v,this.m_rd.v*=e.m_rd.v,this.m_power+=e.m_power,this.m_bNormalized=!1,this.normalizeThis(),this))}mulDoubleThis(e){return this.mulThis(ir.constructDouble(e))}thisMulInt64(e){return K(0),this}thisMulInt32(e){return K(0),this}divThis(e){return this.mulThis(e.clone().invertThis())}divDoubleThis(e){return this.divThis(ir.constructDouble(e))}addDoubleThis(e){return this.addThis(ir.constructDouble(e))}subDoubleThis(e){return this.subThis(ir.constructDouble(e))}mul(e){return this.clone().mulThis(e)}mulBigIntThis(e){return this.mulThis(ir.constructInt64(e))}mulDouble(e){return this.clone().mulThis(ir.constructDouble(e))}div(e){return this.clone().divThis(e)}divDouble(e){return this.clone().divDoubleThis(e)}add(e){return this.clone().addThis(e)}fmSubThis(e,i){return this.subThis(e.clone().mulThis(i))}fmAddThis(e,i){return this.addThis(e.clone().mulThis(i))}addThis(e){if(e.isNAN()&&this.setNAN(),this.isPositiveInf()&&e.isPositiveInf())return this.setPositiveInf(),this;if(this.isPositiveInf()&&e.isNegativeInf())this.setNAN();else{if(this.isNegativeInf()&&e.isNegativeInf())return this.setNegativeInf(),this;this.isNegativeInf()&&e.isPositiveInf()&&this.setNAN()}return this.isNAN()?this:this.opPlusMinus(e,!0)}addDouble(e){return this.clone().addThis(ir.constructDouble(e))}sub(e){return this.clone().subThis(e)}subDouble(e){return this.clone().subThis(ir.constructDouble(e))}isZero(){return this.m_sign===0}equals(e){return this.clone().subThis(e).isZero()}lt(e){return!this.isNAN()&&!e.isNAN()&&!(this.isPositiveInf()&&e.isPositiveInf()||this.isNegativeInf()&&e.isNegativeInf())&&!this.isPositiveInf()&&(!!e.isPositiveInf()||this.clone().sub(e).LZ())}absLessAbs(e){return this.abs().lt(e.abs())}gt(e){return this.clone().sub(e).GZ()}lte(e){return this.sub(e).LEZ()}gte(e){return this.sub(e).GEZ()}normalizeThis(){if(this.m_bNormalized)return this;if(this.m_rn.v===0n)return this.setZero();let e=0,i=0xffffffffn;for(;(this.m_rn.v&i)===0n&&i<=this.m_rn.v;)i<<=32n,e+=32;i&=this.m_rn.v,i>>=BigInt(e),e+=QF(BigInt.asUintN(32,i))-1;let s=0;for(i=0xffffffffn;(this.m_rd.v&i)===0n&&i<=this.m_rd.v;)i<<=32n,s+=32;return i&=this.m_rd.v,i>>=BigInt(s),s+=QF(BigInt.asUintN(32,i))-1,this.m_rn.v>>=BigInt(e),this.m_rd.v>>=BigInt(s),this.m_power+=e-s,this.m_rn.v>1n&&this.m_rd.v>1n&&(this.m_rn.v%this.m_rd.v===0n?(this.m_rn.v/=this.m_rd.v,this.m_rd.v=1n):this.m_rd.v%this.m_rn.v===0n&&(this.m_rd.v/=this.m_rn.v,this.m_rn.v=1n)),this.m_bNormalized=!0,this}negateThis(){return this.isNAN()||(this.m_sign*=-1),this}negate(){return this.clone().negateThis()}invertThis(){return this.isNAN()?this:this.isPositiveInf()||this.isNegativeInf()?(this.setZero(),this):this.m_rn.v===0n?(this.setPositiveInf(),this):(this.m_rd=St(this.m_rn,this.m_rn=this.m_rd),this.m_power=-this.m_power,this)}limitPrecisionThis(e){if(e===0)return this;if(this.isZero())return this.setZero();if(!this.isFinite())return this;this.normalizeThis();let i=Number(T1(this.m_rn.v));if(i>e){const s=i-e;this.m_rn.v>>=BigInt(i-e),this.m_power+=s}if(i=Number(T1(this.m_rd.v)),i>e){const s=i-e;this.m_rd.v>>=BigInt(i-e),this.m_power-=s}return this}hiBitIndex(){return Math.max(Number(T1(this.m_rn.v)),Number(T1(this.m_rd.v)))}ldexp(e){return this.clone().ldexpThis(e)}ldexpThis(e){return e&&(this.m_bNormalized=!1,this.m_power+=e,this.normalizeThis()),this}LZ(){return!this.isNAN()&&this.m_sign===-1}GZ(){return!this.isNAN()&&this.m_sign===1}LEZ(){return!this.isNAN()&&this.m_sign<=0}GEZ(){return!this.isNAN()&&this.m_sign>=0}toString(){return this.toDouble().toString()}sqr(){return this.clone().sqrThis()}sqrThis(){return this.mulThis(this.clone())}static sqrt(e,i){if(e.m_sign<0n&&Mi("MP_value: sqrt(-1)"),e.isZero())return e.clone();let s=52,n=2220446049250313e-31;for(;s<i;)2*s<=i?(n*=n,s*=2):(n*=2220446049250313e-31,s+=52);s+=52;const r=T1(e.m_rn.v),o=T1(e.m_rd.v);let l,c=e.m_power+Number(r-o);const f=new ir;Math.abs(c)>200?(1&Math.abs(c)&&(c+=1),l=ir.constructAssign(e,53).ldexpThis(-c).value(),f.setThis(e).ldexpThis(-c),K(Number.isFinite(l))):(f.setThis(e),l=f.value(),K(Number.isFinite(l)),c=0),l=Math.sqrt(l);const y=ir.constructDouble(l),_=ir.constructDouble(n);_.mulThis(y).ldexpThis(1);const x=n*l*2,S=y.clone(),P=new ir;let A;for(let k=0;k<10;++k){S.mulThis(y),P.setThis(f).subThis(S).absThis();let $=P.value();if(A=1,$<.9)for(;$>x;)$*=$,++A;else A=4;if(P.lte(_))break;for(let F=0;F<A;F++)S.setThis(y).divThis(f).invertThis().addThis(y).ldexpThis(-1).limitPrecisionThis(s),y.setThis(S)}return y.ldexpThis(c/2)}static cubicRoot(e,i){if(e.isZero())return e.clone();let s=52,n=2220446049250313e-31;for(;s<i;)2*s<=i?(n*=n,s*=2):(n*=2220446049250313e-31,s+=52);s+=52;const r=Math.pow(Math.abs(e.value()),1/3),o=ir.constructDouble(r),l=o.clone();l.sqrThis().mulDoubleThis(3).mulDoubleThis(n),l.limitPrecisionThis(32),e.LZ()&&o.negateThis();for(let c=0;c<10;++c){const f=o.clone();f.sqrThis().mulThis(o);const y=f.clone();if(y.subThis(e),y.absThis().limitPrecisionThis(32),y.lte(l))break;y.setThis(e),y.ldexpThis(1),y.addThis(f);const _=f.clone();_.ldexpThis(1),_.addThis(e),y.divThis(_),o.mulThis(y),o.limitPrecisionThis(s)}return o}isInTheRangeOfDouble(){return K(0),!1}sign(){return this.m_sign}cosAndSin(e,i){K(0)}static nan(){return K(0),new ir}convertToDouble(){if(this.m_bNaN)return Number.NaN;if(this.isZero())return 0;if(this.m_rd.v===0n)return this.m_sign===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;const e=this.m_sign===-1,i=this.m_rn.v<<(this.m_power>=0?BigInt(this.m_power):0n);let s=this.m_rd.v<<(this.m_power<0?BigInt(-this.m_power):0n);const n=i/s;let r=Number(n);if(BigInt(r)!==n)return e?-r:r;let o=i-n*s;if(o){let l=T1(s)-1023n;l>0n&&(s>>=l,o<<=52n,o>>=l);let c=Number(o);Number.isFinite(c)||(o>>=52n,c=Number(o),l=0n),l>0n&&(c/=Math.pow(2,52)),r+=c/Number(s)}return e?-r:r}signVal(){return this.m_sign===1?1n:this.m_sign===-1?-1n:0n}opPlusMinus(e,i){const s=Math.min(this.m_power,e.m_power);let n,r;this.m_power>s?(n=BigInt(this.m_power-s),r=0n):(n=0n,r=BigInt(e.m_power-s));const o=this.signVal()*this.m_rn.v*e.m_rd.v<<n,l=e.signVal()*e.m_rn.v*this.m_rd.v<<r;return this.m_rn.v=i?o+l:o-l,this.m_rd.v*=e.m_rd.v,this.m_power=s,this.m_sign=1,this.m_rn.v<0n&&(this.m_sign=-1,this.m_rn.v=-this.m_rn.v),this.m_bNormalized=!1,this.normalizeThis(),this}};_t.s_sm=0x8000000000000000n,_t.s_em=0x7ff0000000000000n,_t.s_fm=0x000fffffffffffffn,_t.s_emax=0x7ffn;const Lh=_t.constructInt32(1),Go=_t.constructInt32(0);function HKe(t,e){return hKe(t^e)}function UKe(t,e){let i=ete(t);const s=ete(e);return i===s?(i-=53-HKe(P6(t),P6(e)),i):i>s?i:s}function $_(t){const e=Ge(Y,t.length);for(let i=0,s=t.length;i<s;++i)e[i].setCoords(t[i][0],t[i][1]);return e}let Y=class us{static construct(e,i){return new us(e,i)}constructor(e,i){e!==void 0?(this.x=e,this.y=i):this.x=this.y=Number.NaN}clone(){return new us(this.x,this.y)}assign(e){this.setCoordsPoint2D(e)}setCoords(e,i){return this.x=e,this.y=i,this}setCoordsPoint2D(e){this.x=e.x,this.y=e.y}isEqualPoint2D(e,i){return i!==void 0?Math.abs(this.x-e.x)<=i&&Math.abs(this.y-e.y)<=i:this.x===e.x&&this.y===e.y}isEqual(e,i,s){return s!==void 0?Math.abs(this.x-e)<=s&&Math.abs(this.y-i)<=s:this.x===e&&this.y===i}equalsPoint2D(e,i){return this.isEqualPoint2D(e,i)}setSub(e,i){this.x=e.x-i.x,this.y=e.y-i.y}addThis(e){return this.x+=e.x,this.y+=e.y,this}setAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}absoluteOther(e){}absolute(){return K(0),this}setNegate(){this.x=-this.x,this.y=-this.y}setNegateOther(e){this.x=-e.x,this.y=-e.y}interpolateThis(e,i){}interpolate(e,i,s){K(0)}scaleAddThis(e,i){this.x=this.x*e+i.x,this.y=this.y*e+i.y}scaleAddOther(e,i,s){K(0)}scaleOther(e,i){K(0)}scale(e){this.x*=e,this.y*=e}compare(e){return this.y<e.y?-1:this.y>e.y?1:this.x<e.x?-1:this.x>e.x?1:0}compareX(e){return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}normalizeOther(e){K(0)}normalize(){const e=this.length();return e?(this.x/=e,this.y/=e):(this.x=1,this.y=0),this}getUnitVector(){return this.clone().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}sqrLength(){return this.x*this.x+this.y*this.y}static averageFast(e,i){return K(0),{}}static average(e,i){const s=new us;if(i===0)return s.setNAN(),s;if(i===1)return s.assign(e[0]),s;const n=new Fr(e[0].x),r=new Fr(e[0].y);for(let o=1;o<i;o++)n.add(e[o].x),r.add(e[o].y),255&o||(n.normalize(),r.normalize());return s.x=n.getResult()/i,s.y=r.getResult()/i,s}offset(e,i){const s=us.distance(e,i),n=us.construct(this.x,this.y);if(s===0)return us.distance(n,e);const r=i.clone();return r.subThis(e),n.subThis(e),n.crossProduct(r)/s}side(e,i){return K(0),0}static sqrDistance(e,i){const s=e.x-i.x,n=e.y-i.y;return s*s+n*n}static sqrDistanceCoords(e,i,s,n){const r=s-e,o=n-i;return r*r+o*o}static distance(e,i){return Math.sqrt(us.sqrDistance(e,i))}dotProduct(e){return this.x*e.x+this.y*e.y}dotProductAbs(e){return Math.abs(this.x*e.x)+Math.abs(this.y*e.y)}crossProduct(e){return this.x*e.y-this.y*e.x}crossProductAbs(e){return K(0),0}rotateDirect(e,i){const s=this.x*e-this.y*i,n=this.x*i+this.y*e;this.x=s,this.y=n}rotateReverse(e,i){const s=this.x*e+this.y*i,n=-this.x*i+this.y*e;this.x=s,this.y=n}leftPerpendicularThis(){const e=this.x;this.x=-this.y,this.y=e}leftPerpendicularOther(e){const i=e.x;this.x=-e.y,this.y=i}rightPerpendicularThis(){const e=this.x;this.x=this.y,this.y=-e}rightPerpendicularOther(e){const i=e.x;this.x=e.y,this.y=-i}equals(e){return this.x===e.x&&this.y===e.y}notequals(e){return this.x!==e.x||this.y!==e.y}not(){return!this.x&&!this.y}gt(e){return this.y>e.y||this.y===e.y&&this.x>e.x}gte(e){return!this.lt(e)}lt(e){return this.y<e.y||this.y===e.y&&this.x<e.x}lte(e){return!this.gt(e)}subThis(e){return this.x-=e.x,this.y-=e.y,this}divThis(e){return this.x/=e,this.y/=e,this}add(e){return new us(this.x+e.x,this.y+e.y)}sub(e){return new us(this.x-e.x,this.y-e.y)}negateThis(){return this.x=-this.x,this.y=-this.y,this}negate(){return new us(-this.x,-this.y)}mul(e){return new us(this.x*e,this.y*e)}mulThis(e){return this.x*=e,this.y*=e,this}divide(e){return new us(this.x/e,this.y/e)}setNAN(){this.x=this.y=Number.NaN}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)}static getNAN(){return new us(Number.NaN,Number.NaN)}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}isZero(){return this.x===0&&this.y===0}norm(e){switch(e){case 0:{const i=Math.abs(this.x),s=Math.abs(this.y),n=i-s;return n>=0?i:n<=0?s:Number.NaN}case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:Je("norm")}}getQuarter(){return us.getQuarterCoords(this.x,this.y)}static getQuarterCoords(e,i){return e>0?i>=0?1:4:i>0?2:e===0?4:3}static compareVectors(e,i){const s=e.getQuarter(),n=i.getQuarter();return n===s?us.orientationRobustImpl(us.construct(0,0),i,e,!0):s<n?-1:1}static compareVectorsOrigin(e,i,s){const n=i.sub(e),r=s.sub(e),o=n.getQuarter(),l=r.getQuarter();return l===o?us.orientationRobustImpl(e,s,i,!0):o<l?-1:1}static orientationRobust(e,i,s){return us.orientationRobustImpl(e,i,s,!1)}static orientationRobustEx(e,i,s,n){if(e.equals(i)||s.equals(n))return 0;const r=i.x-e.x,o=i.y-e.y,l=n.x-s.x,c=n.y-s.y;{const S=us.getQuarterCoords(r,o)-1,P=us.getQuarterCoords(l,c)-1,A=us.d[S][P];if(A!==0)return A}const f=r*c,y=o*l,_=4*en()*(Math.abs(f)+Math.abs(y)),x=f-y;return Math.abs(x)>=_?x<0?-1:x>0?1:0:us.orientationRobustExMp(e,i,s,n)}static orientationRobustExMp(e,i,s,n){const r=_t.constructDouble(i.x),o=_t.constructDouble(n.x);r.subThis(_t.constructDouble(e.x)),o.subThis(_t.constructDouble(s.x));const l=_t.constructDouble(i.y),c=_t.constructDouble(n.y);return l.subThis(_t.constructDouble(e.y)),c.subThis(_t.constructDouble(s.y)),r.mulThis(c),l.mulThis(o),r.subThis(l),r.LZ()?-1:r.GZ()?1:0}static orientationNonRobust(e,i,s){const n=i.sub(e).crossProduct(s.sub(e));return n<0?-1:n>0?1:0}static orientationRobustImpl(e,i,s,n){if(i.isEqualPoint2D(e)||s.isEqualPoint2D(e)||i.isEqualPoint2D(s))return 0;const r=i.x-e.x,o=i.y-e.y,l=s.x-e.x,c=s.y-e.y;if(!n){const _=us.getQuarterCoords(r,o)-1,x=us.getQuarterCoords(l,c)-1,S=us.d[_][x];if(S!==0)return S}const f=(Math.abs(r)+Math.abs(o)+Math.abs(l)+Math.abs(c))*(Math.abs(i.x)+Math.abs(i.y)+Math.abs(s.x)+Math.abs(s.y))*8*lj(),y=r*c-o*l;if(Math.abs(y)>f)return y<0?-1:1;if(nl(i.x,e.x)&&nl(s.y,e.y)&&nl(i.y,e.y)&&nl(s.x,e.x)&&oa(r,c)&&oa(o,l)){const _=r*c,x=o*l;if(nl(_,x)){const S=_-x;return S<0?-1:S>0?1:0}}return us.orientationRobustMp(e,i,s)}static orientationRobustMp(e,i,s){const n=_t.constructDouble(i.x),r=_t.constructDouble(s.x);{const c=_t.constructDouble(e.x);n.subThis(c),r.subThis(c)}const o=_t.constructDouble(s.y),l=_t.constructDouble(i.y);{const c=_t.constructDouble(e.y);o.subThis(c),l.subThis(c)}return n.mulThis(o),l.mulThis(r),n.subThis(l),n.LZ()?-1:n.GZ()?1:0}static inCircleRobust(e,i,s,n){const r=new Be,o=new Be;r.set(e.x),r.subThis(n.x),o.set(e.y),o.subThis(n.y);const l=new Be,c=new Be;l.set(i.x),l.subThis(n.x),c.set(i.y),c.subThis(n.y);const f=new Be,y=new Be;f.set(s.x),f.subThis(n.x),y.set(s.y),y.subThis(n.y);const _=r.mulE(c).subE(o.mulE(l)),x=l.mulE(y).subE(c.mulE(f)),S=r.mulE(y).subE(o.mulE(f)),P=r.mulE(r).addE(o.mulE(o)),A=l.mulE(l).addE(c.mulE(c)),k=f.mulE(f).addE(y.mulE(y)),$=P.mulE(x).subE(A.mulE(S)).addE(k.mulE(_));if(!$.isFuzzyZero()){const F=$.value();return F<0?-1:F>0?1:0}return us.inCircleRobustMp(e,i,s,n)}static inCircleRobustMp(e,i,s,n){do{if(!nl(e.x,n.x)||!nl(e.y,n.y)||!nl(i.x,n.x)||!nl(i.y,n.y)||!nl(s.x,n.x)||!nl(s.y,n.y))break;const V=e.x-n.x,B=e.y-n.y,W=i.x-n.x,J=i.y-n.y,re=s.x-n.x,se=s.y-n.y;if(!oa(V,J)||!oa(B,W)||!oa(W,se)||!oa(J,re)||!oa(V,se)||!oa(B,re)||!oa(V,V)||!oa(B,B)||!oa(W,W)||!oa(J,J)||!oa(re,re)||!oa(se,se))break;const oe=V*J,pe=B*W,ue=W*se,ce=J*re,ne=V*se,de=B*re,Se=V*V,Pe=B*B,Re=W*W,Oe=J*J,we=re*re,Fe=se*se;if(!nl(oe,pe)||!nl(ue,ce)||!nl(ne,de)||!q4(Se,Pe)||!q4(Re,Oe)||!q4(we,Fe))break;const it=oe-pe,vt=ue-ce,ot=ne-de,ct=Se+Pe,Ct=Re+Oe,qt=we+Fe;if(!oa(ct,vt)||!oa(Ct,ot)||!oa(qt,it))break;const Lt=ct*vt,Dt=Ct*ot,Yi=qt*it;if(!nl(Lt,Dt))break;const cs=Lt-Dt;if(!q4(cs,Yi))break;const fn=cs+Yi;return fn<0?-1:fn>0?1:0}while(!1);const r=_t.constructDouble(n.x),o=_t.constructDouble(n.y),l=_t.constructDouble(e.x),c=_t.constructDouble(e.y);l.subThis(r),c.subThis(o);const f=_t.constructDouble(i.x),y=_t.constructDouble(i.y);f.subThis(r),y.subThis(o);const _=_t.constructDouble(s.x),x=_t.constructDouble(s.y);_.subThis(r),x.subThis(o);const S=l.mul(y).sub(c.mul(f)),P=f.mul(x).sub(y.mul(_)),A=l.mul(x).sub(c.mul(_)),k=l.mul(l).add(c.mul(c)),$=f.mul(f).add(y.mul(y)),F=_.mul(_).add(x.mul(x)),G=k.mul(P).sub($.mul(A)).add(F.mul(S));return G.LZ()?-1:G.GZ()?1:0}static inCircleRobustMp3Point(e,i,s){const n=_t.constructDouble(e.x),r=_t.constructDouble(e.y),o=_t.constructDouble(i.x),l=_t.constructDouble(i.y),c=_t.constructDouble(s.x),f=_t.constructDouble(s.y),y=c.mul(c).add(f.mul(f)).sub(c.mul(n).add(f.mul(r)).add(c.mul(o)).add(f.mul(l))).add(n.mul(o).add(r.mul(l)));return y.LZ()?-1:y.GZ()?1:0}static inCircleRobust3Point(e,i,s){const n=new Be(e.x),r=new Be(e.y),o=new Be(i.x),l=new Be(i.y),c=new Be(s.x),f=new Be(s.y),y=c.mulE(c).addE(f.mulE(f)).subE(c.mulE(n).addE(f.mulE(r)).addE(c.mulE(o)).addE(f.mulE(l))).addE(n.mulE(o).addE(r.mulE(l)));if(!y.isFuzzyZero()){const _=y.value();return _<0?-1:_>0?1:0}return us.inCircleRobustMp3Point(e,i,s)}static calculateCircleCenterFromThreePoints(e,i,s){if(e.equals(s)||e.equals(i)||s.equals(i))return us.getNAN();const n=YKe(e,i,s);return n.isNAN()?XKe(e,i,s):n}static calculateAngle(e,i){return Math.atan2(e.crossProduct(i),e.dotProduct(i))}static isBisectorRobust(e,i,s){return K(0),!1}static size(){return 2}get 0(){return this.x}get 1(){return this.y}set 0(e){this.x=e}set 1(e){this.y=e}static compareZorder(e,i){const s=us.c_compare_zorder_xx[e.x<0?1:0]|us.c_compare_zorder_yy[e.y<0?1:0],n=us.c_compare_zorder_xx[i.x<0?1:0]|us.c_compare_zorder_yy[i.y<0?1:0];if(s===n){let r=0,o=0;for(let l=0;l<2;++l){const c=UKe(e[l],i[l]);c>r&&(r=c,o=l)}return e[o]<i[o]}return s<n}static lerp(e,i,s){const n=new us;return ar(e,i,s,n),n}static getClosestCoordinate(e,i,s,n=!1){const r=us.getNAN();r.setSub(i,e);const o=r.sqrLength();if(o===0)return .5;if(i.isEqualPoint2D(s))return 1;const l=us.getNAN();l.setSub(s,e);let c=l.dotProduct(r)/o;return n||(c<0?c=0:c>1&&(c=1)),c}static intersectLinesAtOnePoint(e,i,s,n){return K(0),new us(0,0)}toString(){return`[${this.x},${this.y}]`}};function YKe(t,e,i){const s=new Be(e.x);s.subThis(t.x);const n=new Be(e.y);n.subThis(t.y);const r=new Be(i.x);r.subThis(t.x);const o=new Be(i.y);o.subThis(t.y);const l=s.clone();l.mulThisE(o);let c=n.clone();if(c.mulThisE(r),l.subThisE(c),l.value()===0)return Y.getNAN();l.mulThis(2);const f=s.clone();f.mulThisE(s);const y=n.clone();y.mulThisE(n);const _=f.clone();_.addThisE(y);const x=r.clone();x.mulThisE(r);const S=o.clone();S.mulThisE(o);const P=x.clone();P.addThisE(S);const A=n.clone();A.mulThisE(P),c=o.clone(),c.mulThisE(_),A.subThisE(c),A.divThisE(l);const k=s.clone();k.mulThisE(P),c=r.clone(),c.mulThisE(_),k.subThisE(c),k.divThisE(l);const $=Y.construct(t.x-A.value(),t.y+k.value()),F=t.sub($).length(),G=e.sub($).length(),V=i.sub($).length(),B=1e-15*(F+Math.abs(t.x)+Math.abs(e.x)+Math.abs(i.x)+Math.abs(t.y)+Math.abs(e.y)+Math.abs(i.y));return Math.abs(F-G)<=B&&Math.abs(F-V)<=B&&A.eps()<B&&k.eps()<B?$:Y.getNAN()}function XKe(t,e,i){const s=_t.constructDouble(e.x);s.subDoubleThis(t.x);const n=_t.constructDouble(e.y);n.subDoubleThis(t.y);const r=_t.constructDouble(i.x);r.subDoubleThis(t.x);const o=_t.constructDouble(i.y);o.subDoubleThis(t.y);const l=s.clone();l.mulThis(o);let c=n.clone();if(c.mulThis(r),l.subThis(c),l.isZero())return Y.getNAN();l.mulDouble(2);const f=s.clone();f.mulThis(s);const y=n.clone();y.mulThis(n);const _=f.clone();_.addThis(y);const x=r.clone();x.mulThis(r);const S=o.clone();S.mulThis(o);const P=x.clone();P.addThis(S);const A=n.clone();A.mulThis(P),c=o.clone(),c.mulThis(_),A.subThis(c),A.divThis(l);const k=s.clone();return k.mulThis(P),c=r.clone(),c.mulThis(_),k.subThis(c),k.divThis(l),Y.construct(t.x-A.value(),t.y+k.value())}Y.dimensions=2,Y.d=[[0,1,0,-1],[-1,0,1,0],[0,-1,0,1],[1,0,-1,0]],Y.c_compare_zorder_xx=[2,0],Y.c_compare_zorder_yy=[1,0];class gr{constructor(e,i,s){if(e instanceof gr)return this.data=e.data,this.N=e.N,this.M=e.M,e.data=null,e.N=0,void(e.M=0);this.data=e,this.N=i,this.M=s}assignMove(e){return K(0),this}assignCopy(e){return this===e||(K(this.N*this.M==e.N*e.M),this.data.set(e.data),this.N=e.N,this.M=e.M),this}setZero(){var e;return(e=this.data)==null||e.fill(0),this}setIdentity(){for(let s=0;s<this.N;s++)for(let n=0;n<this.M;n++)this.setRowCol(s,n,s===n?1:0);return this}rows(){return this.N}cols(){return this.M}row(e){return K(0),{}}set(e,i){return this.data[e]=i,this}setRowCol(e,i,s){return this.data[e*this.M+i]=s,this}at(e){return this.data[e]}atRowCol(e,i){return this.data[e*this.M+i]}mulScalar(e,i){K(0)}mul(e,i){if(K(this.M===e.rows()),K(this.N===i.rows()),K(e.cols()===i.cols()),i===this){const n=new Float64Array(this.N*this.M),r=new gr(n,this.N,this.M);return this.mul(e,r),void i.assignCopy(r)}if(i===e){const n=new Float64Array(e.N*e.M),r=new gr(n,e.N,e.M);return this.mul(e,r),void i.assignCopy(r)}const s=e.cols();for(let n=0;n<this.N;n++)for(let r=0;r<s;r++){let o=0;for(let l=0;l<this.M;l++)o+=this.atRowCol(n,l)*e.atRowCol(l,r);i.setRowCol(n,r,o)}}mulTranspose(e,i){if(K(this.M===e.cols()),K(this.N===i.rows()),K(e.rows()===i.cols()),i===this){const n=new Float64Array(this.N*this.M),r=new gr(n,this.N,this.M);return this.mulTranspose(e,r),void i.assignCopy(r)}if(i===e){const n=new Float64Array(e.N*e.M),r=new gr(n,e.N,e.M);return this.mulTranspose(e,r),void i.assignCopy(r)}const s=e.rows();for(let n=0;n<this.N;n++)for(let r=0;r<s;r++){let o=0;for(let l=0;l<this.M;l++)o+=this.atRowCol(n,l)*e.atRowCol(r,l);i.setRowCol(n,r,o)}}mulLeft(e,i){K(0)}mulLeftTranspose(e,i){K(0)}mulDiag(e,i){if(K(this.M===e.N*e.M),K(this.N===i.rows()),K(this.M===i.cols()),i===this){const n=new Float64Array(this.N*this.M),r=new gr(n,this.N,this.M);return this.mulDiag(e,r),void i.assignCopy(r)}const s=this.M;for(let n=0;n<this.N;n++)for(let r=0;r<s;r++)i.setRowCol(n,r,this.atRowCol(n,r)*e.at(r))}transposeInPlace(){if(this.N===this.M){for(let s=0;s<this.N;s++)for(let n=s+1;n<this.M;n++){const r=this.atRowCol(s,n);this.setRowCol(s,n,this.atRowCol(n,s)),this.setRowCol(n,s,r)}return this}const e=new Float64Array(this.N*this.M),i=new gr(e,this.N,this.M);return i.assignCopy(this),this.M=St(this.N,this.N=this.M),i.transpose(this),this}transpose(e){if(this!==e){gr.checkDims(e,this.M,this.N);for(let i=0;i<this.N;i++)for(let s=0;s<this.M;s++)e.setRowCol(s,i,this.atRowCol(i,s))}else e.transposeInPlace()}add(e,i){}svd(e,i,s,n=!1){if(gr.checkDims(e,this.N,this.M),gr.checkDims(i,this.M,1),gr.checkDims(s,this.M,this.M),n){if(K(this.N===this.M),!this.symmetricEigen(i,s))return!1;for(let ue=0;ue<this.M;++ue)i.at(ue)<0&&i.set(ue,0);return e.assignCopy(s),!0}let r,o,l,c,f,y,_,x=0,S=0,P=0,A=0,k=0;const $=this.M,F=this.N;e.assignCopy(this);const G=new Float64Array($),V=new gr(G,$,1),B=(ue,ce)=>ce>=0?Math.abs(ue):-Math.abs(ue),W=(ue,ce)=>{if((ue=Math.abs(ue))>(ce=Math.abs(ce))){const ne=ce/ue;return ue*Math.sqrt(ne*ne+1)}if(ce>0){const ne=ue/ce;return ce*Math.sqrt(ne*ne+1)}return 0};for(let ue=0;ue<$;ue++){if(x=ue+1,V.set(ue,A*P),P=c=A=0,ue<F){for(let ne=ue;ne<F;ne++)A+=Math.abs(e.atRowCol(ne,ue));if(A){for(let ne=ue;ne<F;ne++)e.setRowCol(ne,ue,e.atRowCol(ne,ue)/A),c+=e.atRowCol(ne,ue)*e.atRowCol(ne,ue);o=e.atRowCol(ue,ue),P=-B(Math.sqrt(c),o),l=o*P-c,e.setRowCol(ue,ue,o-P);for(let ne=x;ne<$;ne++){c=0;for(let de=ue;de<F;de++)c+=e.atRowCol(de,ue)*e.atRowCol(de,ne);o=c/l;for(let de=ue;de<F;de++)e.setRowCol(de,ne,e.atRowCol(de,ne)+o*e.atRowCol(de,ue))}for(let ne=ue;ne<F;ne++)e.setRowCol(ne,ue,e.atRowCol(ne,ue)*A)}}if(i.set(ue,A*P),P=c=A=0,ue<F&&ue!==$-1){for(let ne=x;ne<$;ne++)A+=Math.abs(e.atRowCol(ue,ne));if(A){for(let ne=x;ne<$;ne++)e.setRowCol(ue,ne,e.atRowCol(ue,ne)/A),c+=e.atRowCol(ue,ne)*e.atRowCol(ue,ne);o=e.atRowCol(ue,x),P=-B(Math.sqrt(c),o),l=o*P-c,e.setRowCol(ue,x,o-P);for(let ne=x;ne<$;ne++)V.set(ne,e.atRowCol(ue,ne)/l);for(let ne=x;ne<F;ne++){c=0;for(let de=x;de<$;de++)c+=e.atRowCol(ne,de)*e.atRowCol(ue,de);for(let de=x;de<$;de++)e.setRowCol(ne,de,e.atRowCol(ne,de)+c*V.at(de))}for(let ne=x;ne<$;ne++)e.setRowCol(ue,ne,e.atRowCol(ue,ne)*A)}}const ce=Math.abs(i.at(ue))+Math.abs(V.at(ue));k=ce>k?ce:k}for(let ue=$-1;ue>=0;ue--){if(ue<$-1){if(P){for(let ce=x;ce<$;ce++)s.setRowCol(ce,ue,e.atRowCol(ue,ce)/e.atRowCol(ue,x)/P);for(let ce=x;ce<$;ce++){c=0;for(let ne=x;ne<$;ne++)c+=e.atRowCol(ue,ne)*s.atRowCol(ne,ce);for(let ne=x;ne<$;ne++)s.setRowCol(ne,ce,s.atRowCol(ne,ce)+c*s.atRowCol(ne,ue))}}for(let ce=x;ce<$;ce++)s.setRowCol(ue,ce,0),s.setRowCol(ce,ue,0)}s.setRowCol(ue,ue,1),P=V.at(ue),x=ue}for(let ue=(F<$?F:$)-1;ue>=0;ue--){x=ue+1,P=i.at(ue);for(let ce=x;ce<$;ce++)e.setRowCol(ue,ce,0);if(P){P=1/P;for(let ce=x;ce<$;ce++){c=0;for(let ne=x;ne<F;ne++)c+=e.atRowCol(ne,ue)*e.atRowCol(ne,ce);o=c/e.atRowCol(ue,ue)*P;for(let ne=ue;ne<F;ne++)e.setRowCol(ne,ce,e.atRowCol(ne,ce)+o*e.atRowCol(ne,ue))}for(let ce=ue;ce<F;ce++)e.setRowCol(ce,ue,e.atRowCol(ce,ue)*P)}else for(let ce=ue;ce<F;ce++)e.setRowCol(ce,ue,0);e.setRowCol(ue,ue,e.atRowCol(ue,ue)+1)}for(let ue=$-1;ue>=0;ue--)for(let ce=1;;ce++){let ne=1;for(x=ue;x>=0;x--){if(S=x-1,Math.abs(V.at(x))+k===k){ne=0;break}if(Math.abs(i.at(S))+k===k)break}if(ne){r=0,c=1;for(let de=x;de<=ue&&(o=c*V.at(de),V.set(de,V.at(de)*r),Math.abs(o)+k!==k);de++){P=i.at(de),l=W(o,P),i.set(de,l),l=1/l,r=P*l,c=-o*l;for(let Se=0;Se<F;Se++)y=e.atRowCol(Se,S),_=e.atRowCol(Se,de),e.setRowCol(Se,S,y*r+_*c),e.setRowCol(Se,de,_*r-y*c)}}if(_=i.at(ue),x===ue){if(_<0){i.set(ue,-_);for(let de=0;de<$;de++)s.setRowCol(de,ue,-s.atRowCol(de,ue))}break}if(ce===100)return!1;f=i.at(x),S=ue-1,y=i.at(S),P=V.at(S),l=V.at(ue),o=((y-_)*(y+_)+(P-l)*(P+l))/(2*l*y),P=W(o,1),o=((f-_)*(f+_)+l*(y/(o+B(P,o))-l))/f,r=c=1;for(let de=x;de<=S;de++){const Se=de+1;P=V.at(Se),y=i.at(Se),l=c*P,P*=r,_=W(o,l),V.set(de,_),r=o/_,c=l/_,o=f*r+P*c,P=P*r-f*c,l=y*c,y*=r;for(let Pe=0;Pe<$;Pe++)f=s.atRowCol(Pe,de),_=s.atRowCol(Pe,Se),s.setRowCol(Pe,de,f*r+_*c),s.setRowCol(Pe,Se,_*r-f*c);_=W(o,l),i.set(de,_),_&&(_=1/_,r=o*_,c=l*_),o=r*P+c*y,f=r*y-c*P;for(let Pe=0;Pe<F;Pe++)y=e.atRowCol(Pe,de),_=e.atRowCol(Pe,Se),e.setRowCol(Pe,de,y*r+_*c),e.setRowCol(Pe,Se,_*r-y*c)}V.set(x,0),V.set(ue,o),i.set(ue,f)}const J=new Float64Array(this.N),re=new Float64Array(this.M),se=new gr(J,this.N,1),oe=new gr(re,this.M,1);let pe=1;do pe*=3,pe++;while(pe<=this.M);do{pe/=3,pe=Math.trunc(pe);for(let ue=pe;ue<this.M;ue++){const ce=i.at(ue);for(let de=0;de<this.N;de++)se.set(de,e.atRowCol(de,ue));for(let de=0;de<this.M;de++)oe.set(de,s.atRowCol(de,ue));let ne=ue;for(;i.at(ne-pe)<ce;){i.set(ne,i.at(ne-pe));for(let de=0;de<this.N;de++)e.setRowCol(de,ne,e.atRowCol(de,ne-pe));for(let de=0;de<this.M;de++)s.setRowCol(de,ne,s.atRowCol(de,ne-pe));if(ne-=pe,ne<pe)break}i.set(ne,ce);for(let de=0;de<this.N;de++)e.setRowCol(de,ne,se.at(de));for(let de=0;de<this.M;de++)s.setRowCol(de,ne,oe.at(de))}}while(pe>1);for(let ue=0;ue<this.M;ue++){let ce=0;for(let ne=0;ne<this.N;ne++)e.atRowCol(ne,ue)<0&&ce++;for(let ne=0;ne<this.M;ne++)s.atRowCol(ne,ue)<0&&ce++;if(ce>Math.trunc((this.N+this.M)/2)){for(let ne=0;ne<this.N;ne++)e.setRowCol(ne,ue,-e.atRowCol(ne,ue));for(let ne=0;ne<this.M;ne++)s.setRowCol(ne,ue,-s.atRowCol(ne,ue))}}return!0}isSymmetric(){if(this.N!==this.M)return!1;for(let e=0;e<this.N;e++)for(let i=e+1;i<this.M;i++)if(this.atRowCol(e,i)!==this.atRowCol(i,e))return!1;return!0}isZero(){return K(0),!1}isIdentity(){return K(0),!1}equals(e,i){if(i!==void 0&&K(0),this.N!==e.N||this.M!==e.M)return!1;for(let s=0;s<this.N*this.M;s++)if(this.data[s]!==e.data[s])return!1;return!0}maxElement(){return K(0),0}min_element(){return K(0),0}determinant(){if(K(this.N===this.M),this.N===1)return this.data[0];if(this.N===2)return this.data[0]*this.data[3]-this.data[1]*this.data[2];if(this.N===3){const r=this;return r.atRowCol(0,0)*(r.atRowCol(1,1)*r.atRowCol(2,2)-r.atRowCol(1,2)*r.atRowCol(2,1))-r.atRowCol(0,1)*(r.atRowCol(1,0)*r.atRowCol(2,2)-r.atRowCol(2,0)*r.atRowCol(1,2))+r.atRowCol(0,2)*(r.atRowCol(1,0)*r.atRowCol(2,1)-r.atRowCol(1,1)*r.atRowCol(2,0))}const e=new Float64Array(this.N*this.N),i=new gr(e,this.N,this.N),s=new Float64Array(this.N);if(!this.luDecomposition(i,s))return 0;let n=1;for(let r=0;r<this.N;r++)n*=i.atRowCol(r,r),s[r]!==r&&(n=-n);return n}submatrix(e,i,s){K(0)}inverse(e){K(0)}pseudoInverse(e,i=!1,s=2220446049250313e-31){if(e.setZero(),this.N===1&&this.M===1)return this.atRowCol(0,0)!==0?e.setRowCol(0,0,1/this.atRowCol(0,0)):e.setRowCol(0,0,0),!0;if(this.N===2&&this.M===2){const x=this.atRowCol(0,0)*this.atRowCol(1,1)-this.atRowCol(0,1)*this.atRowCol(1,0),S=1e-5*(Math.abs(this.atRowCol(0,0)*this.atRowCol(1,1))+Math.abs(this.atRowCol(0,1)*this.atRowCol(1,0)));if(Math.abs(x)>S)return e.setRowCol(0,0,this.atRowCol(1,1)/x),e.setRowCol(0,1,-this.atRowCol(0,1)/x),e.setRowCol(1,0,-this.atRowCol(1,0)/x),e.setRowCol(1,1,this.atRowCol(0,0)/x),!0}const n=new Float64Array(this.N*this.M),r=new gr(n,this.N,this.M),o=new Float64Array(this.M),l=new gr(o,this.M,1),c=new Float64Array(this.M*this.M),f=new gr(c,this.M,this.M);if(!this.svd(r,l,f,i))return!1;const y=Math.max(this.N,this.M),_=s*Math.abs(l.at(0))*y;for(let x=0;x<this.M;x++)l.at(x)>_?l.set(x,1/l.at(x)):l.set(x,0);return f.mulDiag(l,e),e.mulTranspose(r,e),!0}luDecomposition(e,i){return K(0),!1}symmetricEigen(e,i){K(this.rows()===this.cols()),K(this.rows()===e.rows()),K(i.rows()===i.cols()&&i.rows()===this.rows()),K(this.isSymmetric());const s=new Float64Array(this.N*this.M),n=new gr(s,this.N,this.M);n.assignCopy(this);const r=100/Number.EPSILON,o=this.rows(),l=new Float64Array(o),c=new Float64Array(o),f=new gr(l,o,1),y=new gr(c,o,1);for(let x=0;x<o;x++)f.set(x,n.atRowCol(x,x)),e.set(x,n.atRowCol(x,x)),y.set(x,0);i.setIdentity();const _=()=>{const x=f;i.transposeInPlace();let S=1;do S*=3,S++;while(S<=o);do{S/=3,S=Math.trunc(S);for(let P=S;P<o;P++){const A=e.at(P),k=Math.abs(A);for(let F=0;F<this.M;F++)x.set(F,i.atRowCol(F,P));let $=P;for(;Math.abs(e.at($-S))<k;){e.set($,e.at($-S));for(let F=0;F<this.M;F++)i.setRowCol(F,$,i.atRowCol(F,$-S));if($-=S,$<S)break}if($!==P){e.set($,A);for(let F=0;F<this.M;F++)i.setRowCol(F,$,x.at(F))}}}while(S>1)};for(let x=1;;x++){let S=0;for(let A=1;A<o;A++)for(let k=0;k<A;k++)S+=Math.abs(n.atRowCol(A,k));if(S===0)return _(),!0;const P=x<4?.2*S/(o*o):0;for(let A=0;A<o;A++)for(let k=A+1;k<o;k++){let $=r*Math.abs(n.atRowCol(k,A));if(x>4&&$<=Math.abs(e.at(A))&&$<=Math.abs(e.at(k)))n.setRowCol(k,A,0);else if(Math.abs(n.atRowCol(k,A))>P){let F,G=e.at(k)-e.at(A);if($<Math.abs(G))F=n.atRowCol(k,A)/G;else{const re=.5*G/n.atRowCol(k,A);F=1/(Math.abs(re)+Math.sqrt(1+re*re)),re<0&&(F=-F)}const V=1/Math.sqrt(1+F*F),B=F*V,W=B/(1+V);G=F*n.atRowCol(k,A),y.set(A,y.at(A)-G),y.set(k,y.at(k)+G),e.set(A,e.at(A)-G),e.set(k,e.at(k)+G),n.setRowCol(k,A,0);let J=0;for(;J<A;J++)$=n.atRowCol(A,J),G=n.atRowCol(k,J),n.setRowCol(A,J,$-B*(G+$*W)),n.setRowCol(k,J,G+B*($-G*W));for(J++;J<k;J++)$=n.atRowCol(J,A),G=n.atRowCol(k,J),n.setRowCol(J,A,$-B*(G+$*W)),n.setRowCol(k,J,G+B*($-G*W));for(J++;J<o;J++)$=n.atRowCol(J,A),G=n.atRowCol(J,k),n.setRowCol(J,A,$-B*(G+$*W)),n.setRowCol(J,k,G+B*($-G*W));for(J=0;J<o;J++)$=i.atRowCol(A,J),G=i.atRowCol(k,J),i.setRowCol(A,J,$-B*(G+$*W)),i.setRowCol(k,J,G+B*($-G*W))}}for(let A=0;A<o;A++)f.set(A,f.at(A)+y.at(A)),e.set(A,f.at(A)),y.set(A,0)}}static checkDims(e,i,s){K(e.rows()===i&&e.cols()===s)}}let Ap=class extends gr{constructor(e){if(e.copy){const s=new Float64Array(e.copy.N*e.copy.M);return super(s,e.copy.N,e.copy.M),this.buffer=s,void this.assignCopy(e.copy)}const i=new Float64Array(e.NN*e.MM);super(i,e.NN,e.MM),this.buffer=i,e.initializerList&&dn(this.buffer,e.initializerList,0,0,e.initializerList.length)}assignCopy(e){return this===e||super.assignCopy(e),this}},_i=class Sb{constructor(e){e===void 0?this.setIdentity():e instanceof Sb?this.set(e):this.setScale(e)}set(e){return this.xx=e.xx,this.xy=e.xy,this.xd=e.xd,this.yx=e.yx,this.yy=e.yy,this.yd=e.yd,this}clone(){return new Sb().set(this)}setZero(){this.xx=0,this.yy=0,this.xy=0,this.yx=0,this.xd=0,this.yd=0}isEqual(e){return this===e||this.xx===e.xx&&this.xy===e.xy&&this.xd===e.xd&&this.yx===e.yx&&this.yy===e.yy&&this.yd===e.yd}transformInPlace(e){const i=this.xx*e.x+this.xy*e.y+this.xd,s=this.yx*e.x+this.yy*e.y+this.yd;e.x=i,e.y=s}transform(e){const i=e.clone();return this.transformInPlace(i),i}queryTransform(e,i){const s=this.xx*e.x+this.xy*e.y+this.xd,n=this.yx*e.x+this.yy*e.y+this.yd;i.setCoords(s,n)}transformEnvInPlace(e){if(e.isEmpty())return;const i=Ge(Y,4);e.queryCorners(i),this.transformPoints2D(i,4,i),e.setFromPoints(i,4)}queryTransformEnv(e,i){K(0)}transformInterleaved(e,i,s){K(0)}transformPoints2D(e,i,s){for(let n=0;n<i;++n)this.queryTransform(e[n],s[n])}transformInterleavedPoints(e,i,s){i*=2;const n=Y.getNAN();for(let r=0;r<i;r+=2)n.x=e[r],n.y=e[r+1],this.transformInPlace(n),s[r]=n.x,s[r+1]=n.y}multiply(e){return Sb.st_multiply(this,e,this),this}mulLeft(e){return K(0),this}static st_multiply(e,i,s){const n=e.xx*i.xx+e.yx*i.xy,r=e.xy*i.xx+e.yy*i.xy,o=e.xd*i.xx+e.yd*i.xy+i.xd,l=e.xx*i.yx+e.yx*i.yy,c=e.xy*i.yx+e.yy*i.yy,f=e.xd*i.yx+e.yd*i.yy+i.yd;s.xx=n,s.xy=r,s.xd=o,s.yx=l,s.yy=c,s.yd=f}getCoefficients(e){K(0)}setCoefficients(e){this.xx=e[0],this.xy=e[1],this.xd=e[2],this.yx=e[3],this.yy=e[4],this.yd=e[5]}copyTo(e){K(0)}initializeFromRect(e,i){e.isEmpty()||i.isEmpty()||!e.width()||!e.height()?this.setZero():(this.xy=this.yx=0,this.xx=i.width()/e.width(),this.yy=i.height()/e.height(),this.xd=i.xmin-e.xmin*this.xx,this.yd=i.ymin-e.ymin*this.yy)}initializeFromRectIsotropic(e,i){if(e.isEmpty()||!e.width()||!e.height()||i.isEmpty())this.setZero();else{this.yx=0,this.xy=0,this.xx=i.width()/e.width(),this.yy=i.height()/e.height(),this.xx>this.yy?this.xx=this.yy:this.yy=this.xx;const s=i.getCenter(),n=e.getCenter();this.xd=s.x-n.x*this.xx,this.yd=s.y-n.y*this.yy}}initializeFromCurveParameters(e,i,s){K(0)}initializeFromTwoPointsArray(e,i){if(e[0].equals(i[0])&&e[1].equals(i[1]))return void this.setIdentity();if(e[0].equals(e[1])){if(i[0].equals(i[1]))return void this.setShift(i[0].sub(e[0]));Je("")}if(!e[0].equals(e[1])&&i[0].equals(i[1]))return this.setZero(),void this.shift(i[0]);this.setShiftCoords(-e[0].x,-e[0].y);const s=Y.distance(e[0],e[1]),n=Y.distance(i[0],i[1]),r=n/s;this.scale(r,r);const o=e[1].sub(e[0]);o.divThis(s);const l=i[1].sub(i[0]);l.divThis(n);const c=o.crossProduct(l),f=o.dotProduct(l);this.rotate(f,c),this.shiftCoords(i[0].x,i[0].y)}initializeFromTwoPoints(e,i,s,n){const r=[e,i],o=[s,n];this.initializeFromTwoPointsArray(r,o)}transformSizeInPlace(e){K(0)}transformSize(e,i){K(0)}transformTol(e){return K(0),0}transformWithoutTranslateArray(e,i,s){for(let n=0;n<i;++n)this.transformWithoutTranslate(e[n],s[n])}transformWithoutTranslateInPlace(e){const i=this.xx*e.x+this.xy*e.y,s=this.yx*e.x+this.yy*e.y;e.setCoords(i,s)}transformWithoutTranslate(e,i){const s=this.xx*e.x+this.xy*e.y,n=this.yx*e.x+this.yy*e.y;i.setCoords(s,n)}setIdentity(){this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=1,this.yd=0}isIdentity(){return!(this.xx!==1||this.yy!==1||this.xy||this.xd||this.yx||this.yd)}isIdentityTol(e){const i=e*e;return!(Ui(this.xd)+Ui(this.yd)>i)&&!(Ui(this.xy+this.xd)+Ui(this.yy+this.yd-1)>i)&&!(Ui(this.xx+this.xd-1)+Ui(this.yx+this.yd)>i)}isReflective(){return this.xx*this.yy-this.yx*this.xy<0}isUniform(e){const i=this.xx*this.xx+this.yx*this.yx,s=this.xy*this.xy+this.yy*this.yy,n=(i+s)*e;return Math.abs(i-s)<=n&&Math.abs(this.xx*this.xy+this.yx*this.yy)<=n}isUniformNoRotation(){return this.xx!==0&&Math.abs(this.xx)===Math.abs(this.yy)&&this.xy===0&&this.yx===0}isTranslate(){return K(0),!1}isTranslateTol(e){return K(0),!1}isOrthonormal(e){return K(0),!1}isDegenerate(e){return Math.abs(this.xx*this.yy-this.yx*this.xy)<=2*e*(Math.abs(this.xx*this.yy)+Math.abs(this.yx*this.xy))}isZero(){return this.xx===0&&this.yy===0&&this.xy===0&&this.yx===0&&this.xd===0&&this.yd===0}isScaleAndTranslate(e){return K(0),!1}setTranslate(e,i){return this.xx=1,this.xy=0,this.xd=e,this.yx=0,this.yy=1,this.yd=i,this}setShiftCoords(e,i){return this.xx=1,this.xy=0,this.xd=e,this.yx=0,this.yy=1,this.yd=i,this}setShift(e){return this.xx=1,this.xy=0,this.xd=e.x,this.yx=0,this.yy=1,this.yd=e.y,this}setScaleCoords(e,i){return this.xx=e,this.xy=0,this.xd=0,this.yx=0,this.yy=i,this.yd=0,this}setScale(e){return this.setScaleCoords(e,e),this}setFlipX(e,i){return this.xx=-1,this.xy=0,this.xd=e+i,this.yx=0,this.yy=1,this.yd=0,this}setFlipY(e,i){return this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=-1,this.yd=e+i,this}setShear(e,i){return K(0),this}scale(e,i){return this.xx*=e,this.xy*=e,this.xd*=e,this.yx*=i,this.yy*=i,this.yd*=i,this}setRotateAngle(e){return this.setRotate(Math.cos(e),Math.sin(e))}setRotate(e,i){return this.xx=e,this.xy=-i,this.xd=0,this.yx=i,this.yy=e,this.yd=0,this}setRotateAngleAbout(e,i){return this.setRotateAbout(Math.cos(e),Math.sin(e),i)}setRotateAbout(e,i,s){return this.setTranslate(-s.x,-s.y),this.rotate(e,i),this.translate(s.x,s.y)}setSwapCoordinates(){return this.xx=0,this.xy=1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}setRotateCw90(){return this.xx=0,this.xy=1,this.xd=0,this.yx=-1,this.yy=0,this.yd=0,this}setRotateCcw90(){return this.xx=0,this.xy=-1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}shiftCoords(e,i){return this.xd+=e,this.yd+=i,this}shift(e){return this.xd+=e.x,this.yd+=e.y,this}translate(e,i){return this.xd+=e,this.yd+=i,this}flipX(e,i){return this.xx=-this.xx,this.xy=-this.xy,this.xd=e+i-this.xd,this}flipY(e,i){return this.yx=-this.yx,this.yy=-this.yy,this.yd=e+i-this.yd,this}shear(e,i){return K(0),this}rotateAngle(e){const i=new Sb;return i.setRotateAngle(e),this.multiply(i)}rotate(e,i){const s=new Sb;return s.setRotate(e,i),this.multiply(s)}rotateAbout(e,i,s){return this.translate(-s.x,-s.y),this.rotate(e,i),this.translate(s.x,s.y)}rotateAngleAbout(e,i){return this.rotateAbout(Math.cos(e),Math.sin(e),i)}setInvert(e){return this.set(e),this.invertThis()}invertThis(){let e=this.xx*this.yy-this.xy*this.yx;if(e===0)return this.setZero(),this;e=1/e;const i=(this.xy*this.yd-this.xd*this.yy)*e,s=(this.xd*this.yx-this.xx*this.yd)*e,n=this.yy*e,r=-this.xy*e,o=-this.yx*e,l=this.xx*e;return this.xd=i,this.yd=s,this.xx=n,this.yy=l,this.xy=r,this.yx=o,this}invertPrecise(e){return this.set(e),this.invertPreciseThis()}invertPreciseThis(){const e=_t.constructDouble(this.xy),i=_t.constructDouble(this.xx),s=i.mulDouble(this.yy).sub(e.mulDouble(this.yx));if(s.isZero())return this.setZero(),this;const n=s.clone();n.invertThis();const r=_t.constructDouble(this.xd),o=e.mulDouble(this.yd).sub(r.mulDouble(this.yy)).mul(n).toDouble(),l=r.mulDouble(this.yx).sub(i.mulDouble(this.yd)).mul(n).toDouble(),c=n.mulDouble(this.yy).toDouble(),f=n.mulDouble(-this.xy).toDouble(),y=n.mulDouble(-this.yx).toDouble(),_=n.mulDouble(this.xx).toDouble();return this.xd=o,this.yd=l,this.xx=c,this.yy=_,this.xy=f,this.yx=y,this}extractScaleTransform(e,i){K(0)}setFromTwoTriangles(e,i){let s=!0;for(let y=0;y<3;++y)s=s&&e[y].equals(i[y]);if(s)return this.setIdentity(),!0;const n=new Y;n.setSub(e[0],e[1]);const r=new Y;r.setSub(e[0],e[2]);const o=new Y;o.setSub(i[0],i[1]);const l=new Y;l.setSub(i[0],i[2]);const c=4*Number.EPSILON*(Math.abs(n.x*r.y)+Math.abs(r.x*n.y));let f=n.x*r.y-n.y*r.x;return Math.abs(f)>c?(f=1/f,this.xx=(o.x*r.y-n.y*l.x)*f,this.xy=(n.x*l.x-o.x*r.x)*f,this.yx=(o.y*r.y-n.y*l.y)*f,this.yy=(n.x*l.y-o.y*r.x)*f,this.xd=i[0].x-(this.xx*e[0].x+this.xy*e[0].y),this.yd=i[0].y-(this.yx*e[0].x+this.yy*e[0].y),!0):(this.setZero(),!1)}initializeFromControlPoints(e,i,s,n,r=null){return i===0?(this.setIdentity(),void(r&&r.setIdentity())):i===1?(this.setShift(n[0].sub(s[0])),void(r&&r.setShift(s[0].sub(n[0])))):(i<3&&(e=1),void(e===4&&i>2?WKe(this,i,s,n,r):ZKe(e,this,i,s,n,r)))}calculateErrors(e,i,s,n){K(e>0&&i!==null&&s!==null);let r=0;for(let o=0;o<e;++o){const l=this.transform(i[o]),c=Y.sqrDistance(s[o],l);r+=c,n&&(n[o]=Math.sqrt(c))}return Math.sqrt(r/e)}};const Qw=[43,11,41,9,61];function nz(t,e){K(!(e.rows()!==2&&e.rows()!==3||e.cols()!==2&&e.rows()!==3)),t.xx=e.atRowCol(0,0),t.xy=e.atRowCol(0,1),t.yx=e.atRowCol(1,0),t.yy=e.atRowCol(1,1),e.cols()===3?(t.xd=e.atRowCol(0,2),t.yd=e.atRowCol(1,2)):(t.xd=0,t.yd=0)}function WKe(t,e,i,s,n){const r=Y.average(i,e),o=Y.average(s,e),l=new Ap({NN:2,MM:2});l.setZero();const c=new Ap({NN:2,MM:2});c.setZero();for(let _=0;_<e;++_)l.setRowCol(0,0,l.atRowCol(0,0)+(i[_].x-r.x)*(i[_].x-r.x)),l.setRowCol(0,1,l.atRowCol(0,1)+(i[_].x-r.x)*(i[_].y-r.y)),l.setRowCol(1,1,l.atRowCol(1,1)+(i[_].y-r.y)*(i[_].y-r.y)),c.setRowCol(0,0,c.atRowCol(0,0)+(s[_].x-o.x)*(i[_].x-r.x)),c.setRowCol(0,1,c.atRowCol(0,1)+(s[_].x-o.x)*(i[_].y-r.y)),c.setRowCol(1,0,c.atRowCol(1,0)+(s[_].y-o.y)*(i[_].x-r.x)),c.setRowCol(1,1,c.atRowCol(1,1)+(s[_].y-o.y)*(i[_].y-r.y));l.setRowCol(1,0,l.atRowCol(0,1));const f=new Ap({NN:2,MM:2});l.pseudoInverse(f,!0)||KF("Failed to compute pseudo inverse"),c.mul(f,c),nz(t,c);const y=r.clone();t.transformInPlace(y),t.xd=o.x-y.x,t.yd=o.y-y.y,n&&(c.pseudoInverse(f,!1)||KF("Failed to compute pseudo inverse"),nz(n,f),n.transformInPlace(o),n.xd=r.x-o.x,n.yd=r.y-o.y)}function ZKe(t,e,i,s,n,r){K(t===1||t===0||t===2||t===3),e.setIdentity();const o=Y.average(s,i),l=Y.average(n,i);if(K(t<Qw.length&&t>0),8&Qw[t]){const f=new Ap({NN:2,MM:2});f.setZero();for(let k=0;k<i;++k)f.setRowCol(0,0,f.atRowCol(0,0)+(n[k].x-l.x)*(s[k].x-o.x)),f.setRowCol(1,0,f.atRowCol(1,0)+(n[k].x-l.x)*(s[k].y-o.y)),f.setRowCol(0,1,f.atRowCol(0,1)+(n[k].y-l.y)*(s[k].x-o.x)),f.setRowCol(1,1,f.atRowCol(1,1)+(n[k].y-l.y)*(s[k].y-o.y));const y=new Ap({NN:2,MM:2}),_=new Ap({NN:2,MM:1}),x=new Ap({NN:2,MM:2});f.svd(y,_,x)||KF("Failed to compute svd");const S=new Ap({NN:2,MM:2});y.transpose(S);const P=new Ap({NN:2,MM:2});x.mul(S,P),!(32&Qw[t])&&P.determinant()<0&&(S.setRowCol(1,0,-S.atRowCol(1,0)),S.setRowCol(1,1,-S.atRowCol(1,1)),x.mul(S,P));const A=new _i;nz(A,P),e.set(A)}if(2&Qw[t]){let f=0,y=0;for(let _=0;_<i;++_){const x=s[_].sub(o);f+=x.sqrLength(),e.transformInPlace(x),y+=x.dotProduct(n[_].sub(l))}if(f===0)y===0?e.setIdentity():e.setZero();else{const _=y/f;e.scale(_,_)}}else K(!(4&Qw[t]));const c=o.clone();e.transformInPlace(c),e.xd=l.x-c.x,e.yd=l.y-c.y,r&&(r.set(e),r.invertThis(),r.isZero()&&(r.xd=o.x,r.yd=o.y))}class xe{static construct(e,i,s,n){return new xe(e,i,s,n)}constructor(e,i,s,n){e===void 0?(this.xmin=Number.NaN,this.ymin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN):typeof e=="number"?(this.xmin=e,this.ymin=i,this.xmax=s,this.ymax=n):(this.xmin=e.xmin,this.ymin=e.ymin,this.xmax=e.xmax,this.ymax=e.ymax),this.normalize()}static constructEmpty(){return new xe(Number.NaN,Number.NaN,Number.NaN,Number.NaN)}clone(){return new xe(this)}assign(e){return this.xmin=e.xmin,this.xmax=e.xmax,this.ymin=e.ymin,this.ymax=e.ymax,this}width(){return this.xmax-this.xmin}height(){return this.ymax-this.ymin}maxDimension(){return Math.max(this.width(),this.height())}minDimension(){return Math.min(this.width(),this.height())}sqrDiagonal(){return K(0),0}diagonal(){return K(0),0}getCenterX(){return .5*(this.xmin+this.xmax)}getCenterY(){return .5*(this.ymin+this.ymax)}getCenter(){return Y.construct(this.getCenterX(),this.getCenterY())}queryCenter(e){K(0)}setEmpty(){this.xmin=Number.NaN,this.ymin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN}setInfinite(){K(0)}isDegenerate(e){return!this.isEmpty()&&(this.width()<=e||this.height()<=e)}isZero(){return K(0),!1}isEmpty(){return Number.isNaN(this.xmin)||Number.isNaN(this.ymin)||Number.isNaN(this.xmax)||Number.isNaN(this.ymax)}mergeNeCoords(e,i){this.xmin>e?this.xmin=e:this.xmax<e&&(this.xmax=e),this.ymin>i?this.ymin=i:this.ymax<i&&(this.ymax=i)}mergeNe(e){this.mergeNeCoords(e.x,e.y)}mergeCoords(e,i){this.isEmpty()?(this.xmin=e,this.ymin=i,this.xmax=e,this.ymax=i):(this.xmin>e?this.xmin=e:this.xmax<e&&(this.xmax=e),this.ymin>i?this.ymin=i:this.ymax<i&&(this.ymax=i))}merge(e){this.mergeCoords(e.x,e.y)}mergeEnvelope2D(e){e.isEmpty()||(this.mergeCoords(e.xmin,e.ymin),this.mergeNeCoords(e.xmax,e.ymax))}mergePoints(e,i){for(let s=0;s<i;){if(!this.isEmpty()){for(let n=s;n<i;n++)this.mergeNe(e[n]);break}this.setCoords(e[s]),s++}}mergePointsInterleaved(e,i,s){for(let n=2*i,r=n+2*s;n<r;n+=2)this.mergeCoords(e.read(n),e.read(n+1))}inflateCoords(e,i){this.isEmpty()||(this.xmin-=e,this.xmax+=e,this.ymin-=i,this.ymax+=i,(this.xmin>this.xmax||this.ymin>this.ymax)&&this.setEmpty())}getInflatedCoords(e,i){return K(0),new xe(0,0,0,0)}inflate(e){this.inflateCoords(e,e)}getInflated(e){return K(0),new xe(0,0,0,0)}zoom(e,i){K(0)}scale(e){K(0)}equals(e,i){return!(!this.isEmpty()||!e.isEmpty())||(i?Math.abs(this.xmin-e.xmin)<=i&&Math.abs(this.ymin-e.ymin)<=i&&Math.abs(this.xmax-e.xmax)<=i&&Math.abs(this.ymax-e.ymax)<=i:this.xmin===e.xmin&&this.ymin===e.ymin&&this.xmax===e.xmax&&this.ymax===e.ymax)}setCoords(e){e.xmin!==void 0?(this.xmin=e.xmin,this.xmax=e.xmax,this.ymin=e.ymin,this.ymax=e.ymax):e.x!==void 0?(this.xmin=e.x,this.xmax=e.x,this.ymin=e.y,this.ymax=e.y):e.pt1!==void 0?(this.xmin=e.pt1.x,this.ymin=e.pt1.y,this.xmax=e.pt2.x,this.ymax=e.pt2.y,this.normalize()):e.env2D!==void 0?(this.xmin=e.env2D.xmin,this.xmax=e.env2D.xmax,this.ymin=e.env2D.ymin,this.ymax=e.env2D.ymax,this.normalize()):e.pt!==void 0?(this.xmin=e.pt.x,this.xmax=e.pt.x,this.ymin=e.pt.y,this.ymax=e.pt.y):e.center!==void 0?(this.xmin=e.center.x-.5*e.width,this.xmax=this.xmin+e.width,this.ymin=e.center.y-.5*e.height,this.ymax=this.ymin+e.height,this.normalize()):K(0),this.normalize()}queryIntervalX(e){this.isEmpty()?e.setEmpty():e.setCoords(this.xmin,this.xmax)}queryIntervalY(e){this.isEmpty()?e.setEmpty():e.setCoords(this.ymin,this.ymax)}setFromPoints(e,i){if(i===0)return void this.setEmpty();if(Array.isArray(e)){const n=e;this.setCoords(n[0]);for(let r=1;r<i;){if(!this.isEmpty()){for(let o=r;o<i;o++)this.mergeNe(n[o]);return}this.setCoords(n[r]),r++}return}const s=e;this.setCoords({x:s[0],y:s[1]});for(let n=1,r=2*i;n<r;n+=2){if(!this.isEmpty()){for(let o=n,l=2*i;o<l;o+=2)this.mergeNeCoords(s[o],s[o+1]);return}this.setCoords({x:s[n],y:s[n+1]}),n+=2}}normalize(){let e=!1;this.xmin<=this.xmax||([this.xmin,this.xmax]=[this.xmax,this.xmin],e=!0),this.ymin<=this.ymax||([this.ymin,this.ymax]=[this.ymax,this.ymin],e=!0),!e||this.xmin<=this.xmax&&this.ymin<=this.ymax||this.setEmpty()}isValid(){return this.isEmpty()||this.xmin<=this.xmax&&this.ymin<=this.ymax}getLowerLeft(){return new Y(this.xmin,this.ymin)}getLowerRight(){return new Y(this.xmax,this.ymin)}getUpperLeft(){return new Y(this.xmin,this.ymax)}getUpperRight(){return new Y(this.xmax,this.ymax)}move(e,i){this.isEmpty()||(this.xmin+=e,this.ymin+=i,this.xmax+=e,this.ymax+=i)}centerAtCoords(e,i){this.move(e-this.getCenterX(),i-this.getCenterY())}centerAt(e){this.centerAtCoords(e.x,e.y)}containsCoords(e,i){return e>=this.xmin&&e<=this.xmax&&i>=this.ymin&&i<=this.ymax}contains(e){return this.containsCoords(e.x,e.y)}containsEnvelope(e){return e.xmin>=this.xmin&&e.xmax<=this.xmax&&e.ymin>=this.ymin&&e.ymax<=this.ymax}containsExclusiveCoords(e,i){return e>this.xmin&&e<this.xmax&&i>this.ymin&&i<this.ymax}containsExclusive(e){return this.containsExclusiveCoords(e.x,e.y)}containsExclusiveEnvelope(e){return e.xmin>this.xmin&&e.xmax<this.xmax&&e.ymin>this.ymin&&e.ymax<this.ymax}isIntersecting(e){return(this.xmin<=e.xmin?this.xmax>=e.xmin:e.xmax>=this.xmin)&&(this.ymin<=e.ymin?this.ymax>=e.ymin:e.ymax>=this.ymin)}isIntersectingNe(e){return(this.xmin<=e.xmin?this.xmax>=e.xmin:e.xmax>=this.xmin)&&(this.ymin<=e.ymin?this.ymax>=e.ymin:e.ymax>=this.ymin)}intersect(e){if(this.isEmpty())return!1;if(e.isEmpty())return this.setEmpty(),!1;e.xmin>this.xmin&&(this.xmin=e.xmin),e.xmax<this.xmax&&(this.xmax=e.xmax),e.ymin>this.ymin&&(this.ymin=e.ymin),e.ymax<this.ymax&&(this.ymax=e.ymax);const i=this.xmin<=this.xmax&&this.ymin<=this.ymax;return i||this.setEmpty(),i}queryCorner(e){switch(3&e){case 0:return new Y(this.xmin,this.ymin);case 1:return new Y(this.xmin,this.ymax);case 2:return new Y(this.xmax,this.ymax);default:return new Y(this.xmax,this.ymin)}}queryCorners(e){e[0].setCoords(this.xmin,this.ymin),e[1].setCoords(this.xmin,this.ymax),e[2].setCoords(this.xmax,this.ymax),e[3].setCoords(this.xmax,this.ymin)}queryCornersReversed(e){e[0].setCoords(this.xmin,this.ymin),e[1].setCoords(this.xmax,this.ymin),e[2].setCoords(this.xmax,this.ymax),e[3].setCoords(this.xmin,this.ymax)}reaspect(e,i){K(0)}getArea(){return this.isEmpty()?0:this.width()*this.height()}getLength(){return K(0),0}clipCode(e){return(e.x<this.xmin?1:0)|(e.x>this.xmax?1:0)<<1|(e.y<this.ymin?1:0)<<2|(e.y>this.ymax?1:0)<<3}clipLine(e,i){let s=this.clipCode(e),n=this.clipCode(i);if(s&n)return 0;if(!(s|n))return 4;const r=(s?1:0)|(n?2:0);do{const o=i.x-e.x,l=i.y-e.y;if(Math.abs(o)>Math.abs(l)?s&xe.XMASK?(s&xe.XLESSXMIN?(e.y+=l*(this.xmin-e.x)/o,e.x=this.xmin):(e.y+=l*(this.xmax-e.x)/o,e.x=this.xmax),s=this.clipCode(e)):n&xe.XMASK?(n&xe.XLESSXMIN?(i.y+=l*(this.xmin-i.x)/o,i.x=this.xmin):(i.y+=l*(this.xmax-i.x)/o,i.x=this.xmax),n=this.clipCode(i)):s?(s&xe.YLESSYMIN?(e.x+=o*(this.ymin-e.y)/l,e.y=this.ymin):(e.x+=o*(this.ymax-e.y)/l,e.y=this.ymax),s=this.clipCode(e)):(n&xe.YLESSYMIN?(i.x+=o*(this.ymin-i.y)/l,i.y=this.ymin):(i.x+=o*(this.ymax-i.y)/l,i.y=this.ymax),n=this.clipCode(i)):s&xe.YMASK?(s&xe.YLESSYMIN?(e.x+=o*(this.ymin-e.y)/l,e.y=this.ymin):(e.x+=o*(this.ymax-e.y)/l,e.y=this.ymax),s=this.clipCode(e)):n&xe.YMASK?(n&xe.YLESSYMIN?(i.x+=o*(this.ymin-i.y)/l,i.y=this.ymin):(i.x+=o*(this.ymax-i.y)/l,i.y=this.ymax),n=this.clipCode(i)):s?(s&xe.XLESSXMIN?(e.y+=l*(this.xmin-e.x)/o,e.x=this.xmin):(e.y+=l*(this.xmax-e.x)/o,e.x=this.xmax),s=this.clipCode(e)):(n&xe.XLESSXMIN?(i.y+=l*(this.xmin-i.x)/o,i.x=this.xmin):(i.y+=l*(this.xmax-i.x)/o,i.x=this.xmax),n=this.clipCode(i)),s&n)return 0}while(s|n);return r}distanceFromEnvelope(e){return Math.sqrt(this.sqrDistanceEnvelope(e,null,null))}distance(e){return Math.sqrt(this.sqrDistance(e))}sqrDistanceEnvelope(e,i,s){if(!i&&!s){if(this.isEmpty()||e.isEmpty())return Number.NaN;let f,y=0,_=0;return f=this.xmin-e.xmax,f>y&&(y=f),f=this.ymin-e.ymax,f>_&&(_=f),f=e.xmin-this.xmax,f>y&&(y=f),f=e.ymin-this.ymax,f>_&&(_=f),y*y+_*_}if(this.isEmpty()||e.isEmpty())return i&&i.setNAN(),s&&s.setNAN(),Number.NaN;let n,r=0,o=0;const l=Math.max(this.xmin,e.xmin),c=Math.max(this.ymin,e.ymin);return i&&i.setCoords(l,c),s&&s.setCoords(l,c),n=this.xmin-e.xmax,n>r&&(r=n,i&&(i.x=this.xmin),s&&(s.x=e.xmax)),n=this.ymin-e.ymax,n>o&&(o=n,i&&(i.y=this.ymin),s&&(s.y=e.ymax)),n=e.xmin-this.xmax,n>r&&(r=n,i&&(i.x=this.xmax),s&&(s.x=e.xmin)),n=e.ymin-this.ymax,n>o&&(o=n,i&&(i.y=this.ymax),s&&(s.y=e.ymin)),r*r+o*o}sqrDistance(e,i){if(i===void 0){if(this.isEmpty()||e.isNAN())return Number.NaN;let o,l=0,c=0;return o=this.xmin-e.x,o>l&&(l=o),o=this.ymin-e.y,o>c&&(c=o),o=e.x-this.xmax,o>l&&(l=o),o=e.y-this.ymax,o>c&&(c=o),l*l+c*c}if(this.isEmpty()||e.isNAN())return i.setNAN(),Number.NaN;i.assign(e);let s,n=0,r=0;return s=this.xmin-e.x,s>n&&(n=s,i.x=this.xmin),s=this.ymin-e.y,s>r&&(r=s,i.y=this.ymin),s=e.x-this.xmax,s>n&&(n=s,i.x=this.xmax),s=e.y-this.ymax,s>r&&(r=s,i.y=this.ymax),n*n+r*r}sqrMaxMinDistanceEnvelope(e){if(this.isEmpty()||e.isEmpty())return Number.NaN;let i=Number.MAX_VALUE;{const s=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmax,e.ymin),n=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmax,e.ymax),r=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmax,e.ymin),o=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmax,e.ymax),l=Math.max(s,n),c=Math.max(r,o),f=Math.max(l,c);i=Math.min(f,i)}{const s=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmin,e.ymax),n=Y.sqrDistanceCoords(this.xmin,this.ymin,e.xmax,e.ymax),r=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmin,e.ymax),o=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmax,e.ymax),l=Math.max(s,n),c=Math.max(r,o),f=Math.max(l,c);i=Math.min(f,i)}{const s=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmin,e.ymin),n=Y.sqrDistanceCoords(this.xmax,this.ymin,e.xmin,e.ymax),r=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmin,e.ymin),o=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmin,e.ymax),l=Math.max(s,n),c=Math.max(r,o),f=Math.max(l,c);i=Math.min(f,i)}{const s=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmin,e.ymin),n=Y.sqrDistanceCoords(this.xmin,this.ymax,e.xmax,e.ymin),r=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmin,e.ymin),o=Y.sqrDistanceCoords(this.xmax,this.ymax,e.xmax,e.ymin),l=Math.max(s,n),c=Math.max(r,o),f=Math.max(l,c);i=Math.min(f,i)}return i}sqrMaxDistanceEnvelope(e){if(this.isEmpty()||e.isEmpty())return Number.NaN;let i=0;const s=Ge(Y,4);this.queryCorners(s);const n=Ge(Y,4);e.queryCorners(n);for(let r=0;r<4;r++)for(let o=0;o<4;o++){const l=Y.sqrDistance(s[r],n[o]);l>i&&(i=l)}return i}sqrMaxMinDistance(e){const i=Y.sqrDistance(e,this.getLowerLeft()),s=Y.sqrDistance(e,this.getUpperLeft()),n=Y.sqrDistance(e,this.getLowerRight()),r=Y.sqrDistance(e,this.getUpperRight());let o,l=Math.max(i,s);return o=Math.max(i,n),l>o&&(l=o),o=Math.max(s,r),l>o&&(l=o),o=Math.max(n,r),l>o&&(l=o),l}sqrMinDistance(e){return K(0),0}sqrMaxDistance(e){return K(0),0}snapToBoundary(e){return K(0),!1}snapClip(e){const i=cn(e.x,this.xmin,this.xmax),s=cn(e.y,this.ymin,this.ymax);return Y.construct(i,s)}boundaryDistance(e){return K(0),0}envelopeSide(e){return K(0),0}querySide(e,i){switch(e){case 0:i.constructFromCoords(this.xmin,this.ymin,this.xmin,this.ymax);break;case 1:i.constructFromCoords(this.xmin,this.ymax,this.xmax,this.ymax);break;case 2:i.constructFromCoords(this.xmax,this.ymax,this.xmax,this.ymin);break;case 3:i.constructFromCoords(this.xmax,this.ymin,this.xmin,this.ymin);break;default:Je("query_side")}return i}isPointOnBoundary(e,i){return K(0),!1}calculateToleranceFromEnvelope(){return this.isEmpty()?pv():(Math.abs(this.xmin)+Math.abs(this.xmax)+Math.abs(this.ymin)+Math.abs(this.ymax)+1)*pv()}notEquals(e){return K(0),!1}toString(){return`[${this.xmin}, ${this.ymin}, ${this.xmax}, ${this.ymax}]`}}xe.XLESSXMIN=1,xe.YLESSYMIN=4,xe.XMASK=3,xe.YMASK=12;class tl{static constructEmpty(){return new tl(Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN)}constructor(e,i,s,n,r,o){this.xmin=e,this.ymin=i,this.zmin=s,this.xmax=n,this.ymax=r,this.zmax=o,this.normalize()}inflate(e){this.inflateCoords(e,e,e)}inflateCoords(e,i,s){K(0)}getEnvelope2D(){return new xe(this.xmin,this.ymin,this.xmax,this.ymax)}getEnvelopeZs(){return new Ze(this.zmin,this.zmax)}setEmptyZ(){this.zmin=Number.NaN,this.zmax=Number.NaN}normalize(){let e=!1;this.xmin<=this.xmax||(this.xmax=St(this.xmin,this.xmin=this.xmax),e=!0),this.ymin<=this.ymax||(this.ymax=St(this.ymin,this.ymin=this.ymax),e=!0),!e||this.xmin<=this.xmax&&this.ymin<=this.ymax?this.zmin<=this.zmax||(this.zmax=St(this.zmin,this.zmin=this.zmax),this.zmin<=this.zmax||this.setEmptyZ()):this.setEmpty()}isEmpty(){return Number.isNaN(this.xmin)||Number.isNaN(this.ymin)||Number.isNaN(this.xmax)||Number.isNaN(this.ymax)}isEmptyZ(){return Number.isNaN(this.zmin)||Number.isNaN(this.zmax)}setEmpty(){this.xmin=Number.NaN,this.ymin=Number.NaN,this.zmin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN,this.zmax=Number.NaN}mergeEnv3D(e){e.isEmpty()||(this.mergeCoords(e.xmin,e.ymin,e.zmin),this.mergeCoords(e.xmax,e.ymax,e.zmax))}mergeNe(e){this.mergeNeCoords(e.x,e.y,e.z)}mergeNeCoords(e,i,s){this.xmin>e?this.xmin=e:this.xmax<e&&(this.xmax=e),this.ymin>i?this.ymin=i:this.ymax<i&&(this.ymax=i),this.zmin>s?this.zmin=s:this.zmax<s&&(this.zmax=s)}mergeCoords(e,i,s){this.isEmpty()?(this.xmin=e,this.xmax=e,this.ymin=i,this.ymax=i,this.zmin=s,this.zmax=s):(this.isEmptyZ()&&(this.zmin=s,this.zmax=s),this.mergeNeCoords(e,i,s))}setCoords(e,i,s,n,r,o){this.xmin=e,this.ymin=i,this.zmin=s,this.xmax=n,this.ymax=r,this.zmax=o,this.normalize()}sqrDistance(e,i=1){return K(0),0}sqrDistanceAndPoint(e,i,s=1){return K(0),0}sqrDistanceEnvelope3D(e,i=1){return K(0),0}sqrDistanceEnvelope3DAndPoints(e,i,s,n=1){return K(0),0}sqrMaxDistance(e,i=1){return K(0),0}}const ste=[0,0,Number.NaN,0,0,0,0,0,-1,-1,0,0,0,0],KKe=[2,1,1,1,3,1,2,3,2,4,1,1,2,1],JKe=[1,1,1,0,2,1,1,1,0,0,0,0,0,1],QKe=[1,1,1,2,0,0,0,0,2,2,4,2,2,1],eJe=[4,8,4,8,1],dj=25;function fy(){return new Array(dj)}let vr=class _p{getAttributeCount(){return this.m_attributeCount}getSemantics(e){return this.m_indexToSemantics[e]}getSemanticsBitArray(){return this.m_semanticsBitArray}getAttributeIndex(e){return this.m_semanticsToIndexMap[e]}static getInterpolation(e){return JKe[e]}static getPersistence(e){return QKe[e]}static getPersistenceSize(e){return eJe[e]}static getPersistenceSizeFromSemantics(e){return _p.getPersistenceSize(_p.getPersistence(e))*_p.getComponentCount(e)}static getComponentCount(e){return KKe[e]}static maxComponentCount(){return 4}static isInteger(e){return e===2||e===3||e===4}static isIntegerSemantics(e){return _p.isInteger(_p.getPersistence(e))}static isTexture(e){return e===5||e===6||e===7}hasAttribute(e){return!!(this.m_semanticsBitArray&1<<e)}hasAttributesFrom(e){return(this.m_semanticsBitArray&e.m_semanticsBitArray)===e.m_semanticsBitArray}hasZ(){return this.hasAttribute(1)}hasM(){return this.hasAttribute(2)}hasID(){return this.hasAttribute(3)}getTotalComponentCount(){return this.m_totalComponentCount}static getDefaultValue(e){return ste[e]}static isDefaultValue(e,i){return ga(ste[e],i)}equals(e){return this===e}getDefaultPointAttributes(){return this.m_defaultPointAttributes}getPointAttributeOffset(e){return this.m_pointAttributeOffsets[e]}constructor(e){this.m_semanticsBitArray=e,this.m_attributeCount=0,this.m_totalComponentCount=0,this.m_semanticsToIndexMap=new Int32Array(14),this.m_indexToSemantics=new Int32Array(14),this.m_pointAttributeOffsets=new Int32Array(14),this.m_defaultPointAttributes=new Array(dj),this.m_semanticsToIndexMap.fill(-1),this.m_indexToSemantics.fill(-1);let i=0,s=1,n=14;for(;i<n;i++)e&s&&(this.m_semanticsToIndexMap[i]=this.m_attributeCount,this.m_indexToSemantics[this.m_attributeCount]=i,this.m_attributeCount++,this.m_totalComponentCount+=_p.getComponentCount(i)),s<<=1;let r=0;for(i=0,n=this.getAttributeCount();i<n;i++){const o=this.getSemantics(i),l=_p.getComponentCount(o),c=_p.getDefaultValue(o);this.m_pointAttributeOffsets[i]=r;for(let f=0;f<l;f++)this.m_defaultPointAttributes[r]=c,r++}}};var yN=vr;function JA(){return new Array(14)}class mv{static getInstance(){return mv.s_thisInstance}constructor(){this.m_map=new Map,this.m_vd2D=new yN(1),this.m_map.set(1,this.m_vd2D),this.m_vd3D=new yN(3),this.m_map.set(3,this.m_vd2D)}GetVD2D(){return this.m_vd2D}GetVD3D(){return this.m_vd3D}FindOrAdd(e){if(e===1)return this.GetVD2D();if(e===3)return this.GetVD3D();const i=this.m_map.get(e);if(i)return i;const s=new yN(e);return this.m_map.set(e,s),s}}function fj(t){return mv.getInstance().FindOrAdd(t)}function i5(t,e){if(!t||!e)return e||t;const i=t.getSemanticsBitArray()|e.getSemanticsBitArray();return(i&t.getSemanticsBitArray())===i?t:(i&e.getSemanticsBitArray())===i?e:fj(i)}function s5(t,e){const i=t.getSemanticsBitArray()|1<<e;return(i&t.getSemanticsBitArray())===i?t:fj(i)}function pj(t,e){const i=(t.getSemanticsBitArray()|1<<e)-(1<<e);return i===t.getSemanticsBitArray()?(K(0),t):fj(i)}function jo(){return mv.getInstance().GetVD2D()}function TE(){return mv.getInstance().GetVD3D()}function QA(t,e,i){if(i.fill(-1),t!==null&&e!==null)for(let s=0,n=t.getAttributeCount();s<n;s++)i[s]=e.getAttributeIndex(t.getSemantics(s))}mv.s_thisInstance=new mv;class ii{static construct(e,i,s){return new ii(e,i,s)}constructor(e,i,s){e!==void 0?(this.x=e,this.y=i,this.z=s):this.x=this.y=this.z=Number.NaN}get 0(){return this.x}get 1(){return this.y}get 2(){return this.z}set 0(e){this.x=e}set 1(e){this.y=e}set 2(e){this.z=e}clone(){return new ii(this.x,this.y,this.z)}assign(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}setCoords(e,i,s){return this.x=e,this.y=i,this.z=s,this}setCoordsPoint2DZ(e,i){return this.setCoords(e.x,e.y,i)}setCoordsPoint3D(e){this.x=e.x,this.y=e.y,this.z=e.z}setZero(){this.x=0,this.y=0,this.z=0}setNormalized(e){this.assign(e),this.normalizeThis()}normalizeThis(){const e=this.length();return e?(this.x/=e,this.y/=e,this.z/=e):(this.x=1,this.y=0,this.z=0),this}getUnitVector(){const e=new ii;return e.setNormalized(this),e}sqrLength(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthXY(){return K(0),0}static sqrDistance(e,i){return Ui(e.x-i.x)+Ui(e.y-i.y)+Ui(e.z-i.z)}static sqrDistanceCoords(e,i,s,n,r,o){return K(0),0}static distance(e,i){return Math.sqrt(ii.sqrDistance(e,i))}isEqual(e,i){return i===void 0&&(i=0),Math.abs(this.x-e.x)<=i&&Math.abs(this.y-e.y)<=i&&t5(this.z,e.z,i)}static compareByLength(e,i,s,n){return K(0),0}isEqualCoords(e,i,s,n){return K(0),this.x===e&&this.y===i&&this.z===s}isEqualsTols(e,i,s){return K(0),!1}isEqualCoordsTols(e,i,s,n,r){return K(0),!1}static st_isEqual(e,i,s,n){return K(0),!1}equals(e,i){return K(0),!1}equalsTols(e,i,s){return K(0),!1}divThis(e){return this.x/=e,this.y/=e,this.z/=e,this}subThis(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}setSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}sub(e){return ii.construct(this.x-e.x,this.y-e.y,this.z-e.z)}addThis(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}add(e){return this.clone().addThis(e)}setAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}mul(e){return ii.construct(this.x*e,this.y*e,this.z*e)}dotProduct(e){return this.x*e.x+this.y*e.y+this.z*e.z}crossProductVector(e){const i=this.y*e.z-e.y*this.z,s=e.x*this.z-this.x*e.z,n=this.x*e.y-e.x*this.y;return new ii(i,s,n)}setCrossProductVector(e,i){const s=e.y*i.z-i.y*e.z,n=i.x*e.z-e.x*i.z,r=e.x*i.y-i.x*e.y;return this.x=s,this.y=n,this.z=r,this}setScaled(e,i){return this.x=e*i.x,this.y=e*i.y,this.z=e*i.z,this}scaleThis(e){return this.x*=e,this.y*=e,this.z*=e,this}scaleZThis(e){return this.z*=e,this}setNAN(){return K(0),this}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)||Number.isNaN(this.z)}static getNAN(){return ii.construct(Number.NaN,Number.NaN,Number.NaN)}isFinite(){return K(0),!1}isZero(){return this.x===0&&this.y===0&&this.z===0}norm(e){return K(0),0}sqrDistanceFromCenterToSpheroidSurface(e,i){return K(0),0}distanceFromCenterToSpheroidSurface(e,i){return Math.sqrt(this.sqrDistanceFromCenterToSpheroidSurface(e,i))}static getClosestCoordinate(e,i,s,n=!1){return K(0),0}compare(e){return K(0),0}compareXYZ(e){return K(0),0}negateThis(){this.x=-this.x,this.y=-this.y,this.z=-this.z}static averageFast(e,i){return K(0),{}}static average(e,i){return K(0),{}}static size(){return ii.dimensions}static lerp(e,i,s){const n=new ii;return gKe(e,i,s,n),n}static slerp(e,i,s){return K(0),{}}static compareVectors(e,i){return K(0),0}static selectRightHandedBasisFromNormal(e,i,s){const n=e.getUnitVector(),r=n.createAPerpendicular(),o=new ii;o.setCrossProductVector(n,r),o.normalizeThis(),i.setCoordsPoint3D(r),s.setCoordsPoint3D(o)}createAPerpendicular(){const e=[this.crossProductVector(new ii(0,0,1)),this.crossProductVector(new ii(1,0,0)),this.crossProductVector(new ii(0,1,0))],i=[e[0].sqrLength(),e[1].sqrLength(),e[2].sqrLength()],s=e[i.reduce((n,r,o)=>i[n]>i[o]?n:o,0)];return s.normalizeThis(),s}calculateAngle(e){return K(0),0}static crossDotSign(e,i,s){return K(0),0}static isBisectorRobust(e,i,s){return K(0),0}static compareZOrder(e,i){return K(0),!1}}ii.dimensions=3;var M1=vr;class Ht{constructor(e){if(this.m_description=null,this.x=Number.NaN,this.y=Number.NaN,this.m_attribs=null,e){if(!e.copy)return e.move?(this.m_description=e.move.m_description,e.move.m_description=null,this.m_attribs=e.move.m_attribs,e.move.m_attribs=null,this.x=e.move.x,void(this.y=e.move.y)):e.vd?(this.m_description=e.vd,void(e.attribBuffer?(this.m_attribs=e.attribBuffer,e.initDefaultValues&&this.setDefaultAttributeValues()):this.ensureAttributes())):e.pt?(this.m_description=jo(),void this.setXY(e.pt)):void("x"in e&&("z"in e?(this.m_description=TE(),this.ensureAttributes(),this.setXYZ(new ii(e.x,e.y,e.z))):(this.m_description=jo(),this.setXYCoords(e.x,e.y))));e.copy.copyTo(this)}else this.m_description=jo()}assignCopy(e){return this.m_attribs=null,e.copyTo(this),this}assignMove(e){return K(0),this}vertexCount(){return K(0),1}getXY(){return new Y(this.x,this.y)}setXY(e){this.x=e.x,this.y=e.y}setXYCoords(e,i){this.x=e,this.y=i}getXYZ(){const e=new ii;return e.x=this.x,e.y=this.y,e.z=this.getZ(),e}setXYZ(e){this.addAttribute(1),this.x=e.x,this.y=e.y,this.m_attribs[0]=e.z}getX(){return this.x}setX(e){this.x=e}getY(){return this.y}setY(e){this.y=e}getZ(){return this.m_description.hasZ()?this.m_attribs[0]:M1.getDefaultValue(1)}setZ(e){this.addAttribute(1),this.m_attribs[0]=e}getM(){return this.getAttributeAsDbl(2,0)}setM(e){this.addAttribute(2),this.m_description.hasZ()?this.m_attribs[1]=e:this.m_attribs[0]=e}getID(){return this.getAttributeAsInt(3,0)}setID(e){this.setAttributeBasic(3,0,e)}isEqualXY(e,i){return K(0),!1}isEqualXYCoords(e,i,s){return s===void 0&&(s=0),Math.abs(e-this.x)<=s&&Math.abs(i-this.y)<=s}getAttributeAsDbl(e,i){if(e===0){if(i===0)return this.x;if(i===1)return this.y;Mi("")}const s=M1.getComponentCount(e);(i<0||i>=s)&&Mi("");const n=this.m_description.getAttributeIndex(e);return n>=0?this.m_attribs[this.m_description.getPointAttributeOffset(n)-2+i]:M1.getDefaultValue(e)}getAttributeAsInt(e,i){return Math.trunc(this.getAttributeAsDbl(e,i))}setAttributeBasic(e,i,s){if(e===0)return void(i===0?this.x=s:i===1?this.y=s:Mi(""));const n=M1.getComponentCount(e);(i<0||i>=n)&&Mi("");let r=this.m_description.getAttributeIndex(e);r<0&&(this.addAttribute(e),r=this.m_description.getAttributeIndex(e)),this.m_attribs[this.m_description.getPointAttributeOffset(r)-2+i]=s}copyAttributesFrom(e,i){K(0)}getAttributeArray(){return this.m_attribs}getDescription(){return this.m_description}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}mergeVertexDescription(e){K(0)}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=s5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){K(0)}dropAllAttributes(){const e=jo();e!==this.m_description&&this.assignVertexDescription(e)}getGeometryType(){return me.enumPoint}getDimension(){return 0}queryEnvelope(e){if(e instanceof lr)return e.setEmpty(),e.assignVertexDescription(this.m_description),void e.merge(this);if(e instanceof tl){if(this.isEmpty())return void e.setEmpty();const i=this.getXYZ();return e.xmin=i.x,e.ymin=i.y,e.zmin=i.z,e.xmax=i.x,e.ymax=i.y,void(e.zmax=i.z)}this.isEmpty()?e.setEmpty():(e.xmin=this.x,e.ymin=this.y,e.xmax=this.x,e.ymax=this.y)}queryLooseEnvelope(e){this.queryEnvelope(e)}queryInterval(e,i){const s=new Ze;if(this.isEmpty())return s.setEmpty(),s;const n=this.getAttributeAsDbl(e,i);return s.vmin=n,s.vmax=n,s}applyTransformation(e){if(!this.isEmpty()){if(e instanceof _i){const i=this.getXY();return e.transformInPlace(i),void this.setXY(i)}K(0)}}transformAttribute(e,i,s,n,r){K(0)}createInstance(){return new Ht({vd:this.m_description})}copyTo(e){if(this===e)return;e.getGeometryType()!==me.enumPoint&&Je();const i=e;i.x=this.x,i.y=this.y,this.m_attribs?(i.assignVertexDescription(this.m_description),i.m_attribs=this.m_attribs.slice()):(i.releaseAttributes(),i.assignVertexDescription(this.m_description))}isEmpty(){return Number.isNaN(this.x)||Number.isNaN(this.y)}setEmpty(){this.m_description||(this.m_description=jo(),this.releaseAttributes()),this.x=Number.NaN,this.y=Number.NaN,this.m_attribs&&dn(this.m_attribs,this.m_description.getDefaultPointAttributes(),0,2,this.m_description.getTotalComponentCount()-2)}calculateArea2D(){return 0}calculateLength2D(){return 0}calculateLength3D(e){return 0}equals(e,i){if(e===this)return!0;if(e.getGeometryType()!==me.enumPoint)return!1;const s=e;if(this.m_description!==s.m_description||this.isEmpty()!==s.isEmpty())return!1;if(this.isEmpty())return!0;if(i===void 0&&(i=0),Math.abs(this.x-s.x)>i||Math.abs(this.y-s.y)>i)return!1;for(let n=0,r=this.m_description.getTotalComponentCount()-2;n<r;n++)if(!t5(this.m_attribs[n],s.m_attribs[n],i))return!1;return!0}getBoundary(){return null}clone(){const e=new Ht({vd:this.m_description});return this.copyTo(e),e}swap(e){K(0)}replaceNaNs(e,i){K(0)}lerp(e,i,s){return K(0),new Ht({x:0,y:0})}setDefaultAttributeValues(){const e=this.m_description.getTotalComponentCount()-2;e>0&&(this.m_attribs?dn(this.m_attribs,this.m_description.getDefaultPointAttributes(),0,2,e):this.m_attribs=this.m_description.getDefaultPointAttributes().slice(2))}static sqrDistance2D(e,i){return K(0),0}getImpl(){return this}hasNonLinearSegments(){return K(0),!1}mergeVertexDescriptionImpl(e){K(0)}releaseAttributes(){this.m_attribs=null}assignVertexDescriptionImpl(e){this.m_description||(this.m_description=jo());const i=JA();QA(e,this.m_description,i);let s=null;e.getTotalComponentCount()-2>0&&(s=e.getDefaultPointAttributes().slice(2));for(let n=1,r=e.getAttributeCount();n<r;n++){const o=i[n];if(o!==-1){const l=this.m_description.getPointAttributeOffset(o)-2,c=e.getPointAttributeOffset(n)-2,f=M1.getComponentCount(e.getSemantics(n));for(let y=0;y<f;y++)s[c+y]=this.m_attribs[l+y]}}this.m_attribs=s,this.m_description=e}ensureAttributes(){this.m_description.getTotalComponentCount()-2>0&&this.m_attribs===null&&(this.m_attribs=this.m_description.getDefaultPointAttributes().slice(2))}queryValues(e,i){}copyCommonAttributesTo(e){e.x=this.x,e.y=this.y;const i=e.getDescription();if(i===this.m_description)this.m_attribs&&dn(e.m_attribs,this.m_attribs,0,0,this.m_description.getTotalComponentCount()-2);else{let s=0;for(let n=1,r=i.getAttributeCount();n<r;n++){const o=i.getSemantics(n);let l=M1.getComponentCount(o);if(this.m_description.hasAttribute(o)){let c=this.m_description.getPointAttributeOffset(this.m_description.getAttributeIndex(o))-2;for(;l!==0;)e.m_attribs[s++]=this.m_attribs[c++],l--}else{const c=M1.getDefaultValue(o);for(;l!==0;)e.m_attribs[s++]=c,l--}}}}setValues(e,i){}dbgDefaultAttribs(){}}Ht.type=me.enumPoint;var _c=vr;function T6(t,e){return e*(t.getTotalComponentCount()-2)}class Ec{constructor(e){if(this.m_attributes=null,e)if(e.xmin!==void 0)this.m_envelope2D=new xe(e.xmin,e.ymin,e.xmax,e.ymax);else if(e.env2D!==void 0)this.m_envelope2D=new xe(e.env2D);else if(e.move)this.m_envelope2D=new xe(e.move.m_envelope2D),this.m_attributes=e.move.m_attributes,e.move.m_attributes=null;else{if(!e.moveEnv)throw new Error("unrecognized EnvelopeData constructor options");{const i=e.moveEnv.accessEnvelopeData();this.m_envelope2D=new xe(i.m_envelope2D),this.m_attributes=i.m_attributes,i.m_attributes=null}}else this.m_envelope2D=xe.constructEmpty()}ensureAttributes(e){const i=e.getTotalComponentCount()-2;!this.m_attributes&&i&&(this.m_attributes=new Array(2*i),this.m_attributes.fill(Number.NaN))}copyTo(e,i){const s=i,n=e.getTotalComponentCount()-2;if(s.m_description!==e&&(s.releaseAttributes_(),s.m_description=e,n&&(s.m_data.m_attributes=new Array(2*n))),n){K(this.m_attributes&&s.m_data.m_attributes);const r=2*n;dn(s.m_data.m_attributes,this.m_attributes,0,0,r)}s.m_data.m_envelope2D=new xe(this.m_envelope2D)}copyToIfNotNull(e,i){i.m_envelope2D=new xe(this.m_envelope2D),i.releaseAttributes(),e.getTotalComponentCount()-2&&this.m_attributes&&(i.m_attributes=this.m_attributes.slice())}releaseAttributes(){this.m_attributes=null}isEmpty(){return this.m_envelope2D.isEmpty()}transformAttribute(e,i,s,n,r){K(0)}queryInterval(e,i,s,n){if(this.isEmpty())return void n.setEmpty();if(i===0)return void(s===0?this.m_envelope2D.queryIntervalX(n):s===1?this.m_envelope2D.queryIntervalY(n):Mi(""));const r=_c.getComponentCount(i);(s<0||s>=r)&&Mi("");const o=e.getAttributeIndex(i);if(o>=0)return n.vmin=this.m_attributes[T6(e,0)+e.getPointAttributeOffset(o)-2+s],void(n.vmax=this.m_attributes[T6(e,1)+e.getPointAttributeOffset(o)-2+s]);{const l=_c.getDefaultValue(i);return void n.setCoords(l,l)}}queryEnvelope3D(e,i){const s=new Ze;this.queryInterval(e,1,0,s),i.setCoords(this.m_envelope2D.xmin,this.m_envelope2D.ymin,s.vmin,this.m_envelope2D.xmax,this.m_envelope2D.ymax,s.vmax)}setEmpty(e){this.m_envelope2D.setEmpty();const i=e.getTotalComponentCount()-2;i&&(this.m_attributes?this.dbgAssertSize(i):this.m_attributes=new Array(2*i),this.m_attributes.fill(Number.NaN))}dbgAssertSize(e){}}class lr{constructor(e){if(this.m_description=jo(),e===void 0)this.m_data=new Ec;else if(e.vd!==void 0)this.m_description=e.vd,this.m_data=new Ec,this.ensureAttributes_();else if(e!=null&&e.env2D)this.m_data=new Ec({env2D:e.env2D});else if(e.xmin!==void 0)this.m_data=new Ec({xmin:e.xmin,ymin:e.ymin,xmax:e.xmax,ymax:e.ymax});else if(e.copy)this.m_data=new Ec,e.copy.copyTo(this);else if(e.move)this.m_description=e.move.m_description,e.move.m_description=null,this.m_data=new Ec({move:e.move.m_data});else{if(!e.centerPoint)throw new Error("unrecognized Envelope constructor options");this.m_description=e.centerPoint.getDescription(),this.m_data=new Ec,this.ensureAttributes_(),this.setFromPoint(e.centerPoint,e.width,e.height)}}accessEnvelopeData(){return this.m_description=null,this.m_data}assignMove(e){return this===e||(this.m_description=e.m_description,e.m_description=null,this.m_data=new Ec({move:e.m_data})),this}assignCopy(e){return this===e||e.copyTo(this),this}transformAttribute(e,i,s,n,r){K(0)}vertexCount(){return K(0),0}setAttributeBasic(e,i,s){if(this.addAttribute(e),this.m_data.isEmpty())return;const n=this.queryInterval(e,i);n.vmin=s,n.vmax=s,this.setIntervalEnvelope(e,i,n)}hasNonLinearSegments(){return K(0),!0}mergeVertexDescriptionImpl(e){const i=i5(this.getDescription(),e);this.assignVertexDescription(i)}asEnvelope2D(){return new xe(this.m_data.m_envelope2D)}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}getGeometryType(){return me.enumEnvelope}getDimension(){return 2}getXMin(){return this.m_data.m_envelope2D.xmin}getYMin(){return this.m_data.m_envelope2D.ymin}getXMax(){return this.m_data.m_envelope2D.xmax}getYMax(){return this.m_data.m_envelope2D.ymax}width(){return this.m_data.isEmpty()?Number.NaN:this.m_data.m_envelope2D.width()}height(){return this.m_data.isEmpty()?Number.NaN:this.m_data.m_envelope2D.height()}getCenterX(){return K(0),0}getCenterY(){return K(0),0}getCenterXY(){return this.m_data.isEmpty()?new Y:this.m_data.m_envelope2D.getCenter()}getCenter(e){if(e.assignVertexDescription(this.m_description),this.m_data.isEmpty())return void e.setEmpty();const i=this.m_description.getAttributeCount();for(let s=1;s<i;s++){const n=this.m_description.getSemantics(s),r=_c.getComponentCount(n);for(let o=0;o<r;o++){const l=.5*(this.getAttributeAsDblImpl(0,n,o)+this.getAttributeAsDblImpl(1,n,o));e.setAttributeBasic(n,o,l)}}e.setXY(this.m_data.m_envelope2D.getCenter())}setCoords(e,i,s,n){this.m_data.m_envelope2D.setCoords({xmin:e,ymin:i,xmax:s,ymax:n})}setEnvelope(e){if(e instanceof xe)this.m_data.m_envelope2D=new xe(e),this.m_data.m_envelope2D.normalize();else{this.addAttribute(1),this.m_data.m_envelope2D=e.getEnvelope2D(),this.m_data.m_envelope2D.normalize();const i=Ze.constructEmpty();i.setCoords(e.zmin,e.zmax),this.setInterval(1,0,i.vmin,i.vmax)}}merge(e){if(e instanceof xe)return e.isValid()||Je(""),void this.m_data.m_envelope2D.mergeEnvelope2D(e);if(e instanceof lr){if(e.m_data.isEmpty())return;const i=e.getDescription();this.mergeVertexDescription(i),this.m_data.m_envelope2D.mergeEnvelope2D(e.m_data.m_envelope2D);for(let s=1,n=i.getAttributeCount();s<n;s++){const r=i.getSemantics(s),o=_c.getComponentCount(r);for(let l=0;l<o;l++){const c=e.queryInterval(r,l),f=this.queryInterval(r,l);f.merge(c),this.setIntervalEnvelope(r,l,f)}}}else if(e instanceof Ht){const i=e;if(i.isEmpty())return;const s=i.getDescription();if(this.mergeVertexDescription(s),this.m_data.isEmpty())return void this.setFromPoint(i);this.m_data.m_envelope2D.merge(i.getXY());for(let n=1,r=s.getAttributeCount();n<r;n++){const o=s.getSemantics(n),l=_c.getComponentCount(o);for(let c=0;c<l;c++){const f=i.getAttributeAsDbl(o,c),y=this.queryInterval(o,c);y.mergeCoordinate(f),this.setIntervalEnvelope(o,c,y)}}}else K(0)}intersect(e){if(!this.m_data.m_envelope2D.intersect(e.m_data.m_envelope2D))return this.setEmpty(),!1;const i=e.getDescription();this.mergeVertexDescription(i);for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s),o=_c.getComponentCount(r);for(let l=0;l<o;l++){const c=e.queryInterval(r,l),f=this.queryInterval(r,l);f.intersect(c),this.setIntervalEnvelope(r,l,f)}}return!0}intersectCommonAttributes(e){if(!this.m_data.m_envelope2D.intersect(e.m_data.m_envelope2D))return this.setEmpty(),!1;const i=e.getDescription();for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s);if(!i.hasAttribute(r))continue;const o=_c.getComponentCount(r);for(let l=0;l<o;l++){const c=e.queryInterval(r,l),f=this.queryInterval(r,l);f.intersect(c),this.setIntervalEnvelope(r,l,f)}}return!0}move(e,i){K(0)}centerAt(e,i){this.m_data.m_envelope2D.centerAtCoords(e,i)}centerAtPoint(e){}reaspect(e,i){K(0)}inflateCoords(e,i){this.m_data.m_envelope2D.inflateCoords(e,i)}containsCoords(e,i){return K(0),!1}contains(e){return K(0),!1}containsPoint(e){return K(0),!1}containsEnvelope(e){return K(0),!1}setIntervalEnvelope(e,i,s){if(this.addAttribute(e),this.m_data.isEmpty())return;const n=new Ze(s);if(n.normalize(),e===0){if(n.isEmpty())return void this.setEmpty();i===0?(this.m_data.m_envelope2D.xmin=n.vmin,this.m_data.m_envelope2D.xmax=n.vmax):i===1?(this.m_data.m_envelope2D.ymin=n.vmin,this.m_data.m_envelope2D.ymax=n.vmax):Mi("")}else this.setAttributeAsDblImpl(0,e,i,n.vmin),this.setAttributeAsDblImpl(1,e,i,n.vmax)}setInterval(e,i,s,n){this.setIntervalEnvelope(e,i,new Ze(s,n))}queryInterval(e,i){const s=new Ze;return this.m_data.queryInterval(this.m_description,e,i,s),s}queryEnvelope(e){e instanceof xe?e.setCoords({env2D:this.m_data.m_envelope2D}):e instanceof tl?this.m_data.queryEnvelope3D(this.m_description,e):e instanceof lr?this.copyTo(e):K(0)}applyTransformation(e){e instanceof _i?e.transformEnvInPlace(this.m_data.m_envelope2D):K(0)}createInstance(){return K(0),this}copyTo(e){e!==this&&this.m_data.copyTo(this.m_description,e)}isEmpty(){return this.m_data.isEmpty()}setEmpty(){this.m_description||(this.m_description=jo()),this.m_data.setEmpty(this.m_description)}calculateArea2D(){return this.m_data.m_envelope2D.getArea()}calculateLength2D(){return K(0),0}calculateLength3D(e){return K(0),0}equals(e,i){if(e===this)return!0;const s=e;if(this.m_description!==s.m_description||this.m_data.isEmpty()!==s.m_data.isEmpty())return!1;if(this.m_data.isEmpty())return!0;if(i===void 0&&(i=0),Math.abs(this.m_data.m_envelope2D.xmin-s.m_data.m_envelope2D.xmin)>i||Math.abs(this.m_data.m_envelope2D.ymin-s.m_data.m_envelope2D.ymin)>i||Math.abs(this.m_data.m_envelope2D.xmax-s.m_data.m_envelope2D.xmax)>i||Math.abs(this.m_data.m_envelope2D.ymax-s.m_data.m_envelope2D.ymax)>i)return!1;for(let n=0,r=2*(this.m_description.getTotalComponentCount()-2);n<r;n++)if(!t5(this.m_data.m_attributes[n],s.m_data.m_attributes[n],i))return!1;return!0}getBoundary(){return js("getBoundary not available in this context. Use the boundary operator with an envelope parameter"),null}clone(){return new lr({copy:this})}swap(e){K(0)}queryCoordinates(e){K(0)}queryCornerByVal(e,i){(e<0||e>3)&&Mi(""),i.assignVertexDescription(this.m_description);const s=this.getDescription().getAttributeCount();for(let n=1;n<s;n++){const r=this.m_description.getSemantics(n),o=_c.getComponentCount(r);for(let l=0;l<o;l++)i.setAttributeBasic(r,l,this.getAttributeAsDblImpl(e%2,r,l))}i.setXY(this.m_data.m_envelope2D.queryCorner(e))}queryCorner(e,i){i.assign(this.m_data.m_envelope2D.queryCorner(e))}getDescription(){return this.m_description}mergeVertexDescription(e){this.m_description!==e&&(this.m_description&&this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=s5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){if(!this.m_description.hasAttribute(e))return;const i=pj(this.m_description,e);this.assignVertexDescription(i)}dropAllAttributes(){K(0)}queryLooseEnvelope(e){this.queryEnvelope(e)}replaceNaNs(e,i){K(0)}getImpl(){return this}setFromPoint(e,i,s){this.m_data.m_envelope2D.setCoords({center:e.getXY(),width:i??0,height:s??0});const n=e.getDescription();for(let r=1,o=n.getAttributeCount();r<o;r++){const l=n.getSemantics(r),c=_c.getComponentCount(l);for(let f=0;f<c;f++){const y=e.getAttributeAsDbl(l,f);this.setInterval(l,f,y,y)}}}assignVertexDescriptionImpl(e){const i=JA();QA(e,this.m_description,i);let s=null;const n=e.getTotalComponentCount()-2,r=this.m_description?this.m_description.getTotalComponentCount()-2:0;n>0&&(s=new Array(2*n),s.fill(Number.NaN));for(let o=1;o<e.getAttributeCount();o++){const l=i[o];if(l!==-1){const c=e.getPointAttributeOffset(o)-2,f=_c.getComponentCount(e.getSemantics(o)),y=this.m_description.getPointAttributeOffset(l)-2;dn(s,this.m_data.m_attributes,c,y,f),dn(s,this.m_data.m_attributes,n+c,r+y,f)}}this.releaseAttributes_(),this.m_data.m_attributes=s,this.m_description=e}getAttributeAsDblImpl(e,i,s){if(this.m_data.isEmpty()&&HA(""),i===0)return e?s?this.m_data.m_envelope2D.ymax:this.m_data.m_envelope2D.xmax:s?this.m_data.m_envelope2D.ymin:this.m_data.m_envelope2D.xmin;s>=_c.getComponentCount(i)&&Mi("");const n=this.m_description.getAttributeIndex(i);return n>=0?this.m_data.m_attributes[T6(this.m_description,e)+this.m_description.getPointAttributeOffset(n)-2+s]:vr.getDefaultValue(i)}setAttributeAsDblImpl(e,i,s,n){i===0&&(e?s===1?this.m_data.m_envelope2D.ymax=n:s===0?this.m_data.m_envelope2D.xmax=n:Mi(""):s===1?this.m_data.m_envelope2D.ymin=n:s===0?this.m_data.m_envelope2D.xmin=n:Mi(""));const r=_c.getComponentCount(i);(s<0||s>=r)&&Mi(""),this.addAttribute(i);const o=this.m_description.getAttributeIndex(i);this.m_data.m_attributes[T6(this.m_description,e)+this.m_description.getPointAttributeOffset(o)-2+s]=n}releaseAttributes_(){this.m_data.releaseAttributes()}ensureAttributes_(){this.m_data.ensureAttributes(this.m_description)}}lr.type=me.enumEnvelope;const $b=-559038737;var r2=vr;function wge(t,e,i){switch(t){case 0:return new I6(e,i);case 1:return new nd(e,i);case 2:return new Ns(e,i);case 3:throw new Error("64 bit int attribute stream not implemented");case 4:return new gv(e,i);default:Je("")}}function Sge(t,e){const i=r2.getComponentCount(t);return wge(r2.getPersistence(t),e*i,r2.getDefaultValue(t))}function $9(t,e){const i=r2.getComponentCount(t);return wge(r2.getPersistence(t),e*i)}function Ga(t,e){return new Ns(t,e)}function M0(t,e){return new gv(t,e)}function My(t,e){return new nd(t,e)}class Qp{size(){return this.m_size}checkResize(e,i){e>this.m_size&&this.resize(e,i)}resize(e,i){if((e=Math.trunc(e))===this.m_size)return;const s=!!i||Number.isNaN(i);if(e<this.m_a.length)this.m_a.length>Qp.s_resizeMin&&1.25*e<this.m_a.length&&(this.m_a=this.m_a.slice(0,e)),s&&e>this.m_size&&this.m_a.fill(i,this.m_size,e);else if(e>=this.m_a.length){const n=1.25*e,r=new this.m_a.constructor(n);r.set(this.m_a),this.m_a=r,s&&this.m_a.fill(i,this.m_size,e)}this.m_size=e}resizeRounded(e,i){return this.resize(e,i)}reserve(e){}read(e){return K(e>=0&&e<this.m_size),this.m_a[e]}readAsDbl(e){return this.read(e)}write(e,i){this.m_a[e]=i}writeAsDbl(e,i){this.write(e,i)}setRange(e,i,s){(i<0||s<0||s+i>this.size())&&Je(),this.m_a.fill(e,i,i+s)}add(e){this.resize(this.m_size+1),this.m_a[this.m_size-1]=e}addArray(e,i){const s=this.m_size;i===void 0?(this.resize(this.m_size+e.length),this.m_a.set(e,s)):(this.resize(this.m_size+i),this.m_a.set(e.slice(0,i),s))}equals(e,i,s,n){return this.getPersistence()!==e.getPersistence()?!1:tJe(this,e,i,s,n)}insertRange(e,i,s,n){s&&this.checkResize(n+s),this.m_a.copyWithin(e+s,e,n||this.m_size),this.m_a.fill(i,e,e+s)}readRange(e,i){return this.m_a.slice(e,e+i)}insertRangeFromStream(e,i,s,n,r,o,l){K(this.getPersistence()===i.getPersistence());const c=i;n&&this.checkResize(l+n),this.m_a.copyWithin(e+n,e,l||this.m_size),this.m_a.set(c.readRange(s,n),e),r||this.reverseRange(e,n,o)}writeRange(e,i,s,n,r,o){K(this.getPersistence()===s.getPersistence());const l=s;if((e<0||i<0||n<0)&&Je(),l.size()<n+i&&Je(),i===0)return;this.size()<i+e&&this.resize(i+e);const c=l.m_a.subarray(n,n+i);iJe(this.m_a,e,i,c)}insertAttributes(e,i,s,n){const r=r2.getComponentCount(s);this.m_a.copyWithin(e+r,e,n||this.m_size);for(let o=0;o<r;o++)this.m_a[e+o]=i.getAttributeAsDbl(s,o)}insertAttributesFromPoints(e,i,s,n,r){K(0)}eraseRange(e,i,s){this.m_size<e+i&&Je(),this.m_a.copyWithin(e,e+i),this.m_size-=i}reverseRange(e,i,s){if((s<1||i%s!=0)&&Je(),this.m_a.subarray(e,e+i).reverse(),s>1)for(let n=e,r=e+i;n<r;n+=s){let o=n,l=n+s-1;for(;o<l;){const c=this.m_a[o];this.m_a[o]=this.m_a[l],this.m_a[l]=c,o++,l--}}}rotate(e,i,s){(i<e||i>s||e>s)&&Mi("rotate"),i!==e&&i!==s&&(this.reverseRange(e,i-e,1),this.reverseRange(i,s-i,1),this.reverseRange(e,s-e,1))}adjacentDifference(e,i,s){return K(0),0}sort(e,i,s){this.m_a.subarray(e,i).sort(s)}constructor(e){if(e.move)this.m_a=e.move.m_a,this.m_size=e.move.m_size,e.move.m_a=e.move.m_a.slice(0,0),e.move.m_size=0;else if(e.copy)this.m_size=e.copy.m_size,e.maxSize&&(this.m_size=Math.min(e.maxSize,this.m_size)),this.m_a=e.copy.m_a.slice(0,this.m_size);else{const i=Math.max(e.size,Qp.s_constructMin);this.m_a=new e.ctor(i),(e.defaultValue||Number.isNaN(e.defaultValue))&&this.m_a.fill(e.defaultValue),this.m_size=e.size}}}Qp.s_constructMin=2,Qp.s_resizeMin=30;class gv extends Qp{setBits(e,i){this.m_a[e]|=i}clearBits(e,i){this.m_a[e]&=~i}getPersistence(){return 4}clone(){return new gv({ctor:Int8Array,copy:this})}restrictedClone(e){return new gv({ctor:Int8Array,copy:this,maxSize:e})}constructor(e,i){super(typeof e=="number"?{ctor:Int8Array,size:e,defaultValue:i}:e)}}class Ns extends Qp{getPersistence(){return 2}clone(){return new Ns({ctor:Int32Array,copy:this})}restrictedClone(e){return new Ns({ctor:Int32Array,copy:this,maxSize:e})}write(e,i){K(i<=vo()),super.write(e,i)}constructor(e,i){super(typeof e=="number"?{ctor:Int32Array,size:e,defaultValue:i}:e)}}class I6 extends Qp{getPersistence(){return 0}clone(){return new I6({ctor:Float32Array,copy:this})}restrictedClone(e){return new I6({ctor:Float32Array,copy:this,maxSize:e})}constructor(e,i){super(typeof e=="number"?{ctor:Float32Array,size:e,defaultValue:i}:e)}}class nd extends Qp{getPersistence(){return 1}getArray(){return this.m_a}applyTransformation(e,i,s){(1&i||i+2*s>this.size())&&Je();const n=i===0?this.m_a:this.m_a.subarray(i);e.transformInterleavedPoints(n,s,n)}readPoint2D(e){const i=this.m_a[e],s=this.m_a[e+1];return new Y(i,s)}queryPoint2D(e,i){return i.x=this.m_a[e],i.y=this.m_a[e+1],i}writePoint2D(e,i){this.write(e,i.x),this.write(e+1,i.y)}insert(e,i,s){if(s+2>=this.m_a.length)throw RangeError("AttributeStreamOfDbl::insert");this.m_a.copyWithin(e+2,e,s||this.m_size),this.m_a[e]=i.x,this.m_a[e+1]=i.y}insertRangeFromPoints(e,i,s,n,r,o){if(this.m_a.copyWithin(e+2*n,e,o||this.m_size),r)for(let l=s,c=e,f=0;f<n;++f,++l){const y=i[l];this.m_a[c++]=y.x,this.m_a[c++]=y.y}else for(let l=s+n-1,c=e,f=0;f<n;++f,--l){const y=i[l];this.m_a[c++]=y.x,this.m_a[c++]=y.y}}queryRange(e,i,s,n,r){if((e<0||i<0)&&Je(),!n&&(r<=0||i%r!=0)&&Je(),i===0)return;if(i===1)return void(s[0]=this.m_a[e]);const o=this.m_a.subarray(e,e+i);s.set(o)}writeRangeFromArray(e,i,s,n,r){if((e<0||i<0)&&Je(),i===0)return;if(i===1)return void(this.m_a[e]=s[0]);let o=s;i<s.length&&(o=s.subarray(0,i)),this.m_a.set(o,e)}clone(){return new nd({ctor:Float64Array,copy:this})}restrictedClone(e){return new nd({ctor:Float64Array,copy:this,maxSize:e})}constructor(e,i){super(typeof e=="number"?{ctor:Float64Array,size:e,defaultValue:i}:e)}}function tJe(t,e,i,s,n){if(t.getPersistence()!==e.getPersistence())return!1;const r=t.getPersistence()<=1,o=t.size(),l=e.size();if(s>o||s>l)return!1;if(n)for(let c=i;c<s;c++){let f=t.read(c)-e.read(c);if(f<0&&(f=-f),f>n)return!1}else for(let c=i;c<s;c++){const f=t.read(c),y=e.read(c);if(f!==y){if(r&&Number.isNaN(f)&&Number.isNaN(y))continue;return!1}}return!0}function iJe(t,e,i,s,n,r){if((e<0||i<0)&&Je(),i===0)return;if(i===1)return void(t[e]=s[0]);let o=s;i<s.length&&(o=s.subarray(0,i)),t.set(o,e)}class V4{constructor(e){this.posStream=null,this.streams=null,e!==void 0&&K(0)}assignMove(e){return K(0),this}get(e){return e>0?this.streams[e-1]:this.posStream}set(e,i){e>0?this.streams[e-1]=i:this.posStream=i}destroyAndSetSize(e){if(this.streams=null,e>1){this.streams=new Array(e-1);for(let i=0;i<e-1;++i)this.streams[i]=null}this.posStream=null}swap(e){[this.streams,e.streams]=[e.streams,this.streams],[this.posStream,e.posStream]=[e.posStream,this.posStream]}empty(){return this.posStream===null&&this.streams===null}}class rd{constructor(){this.m_minValue=-1,this.m_maxValue=-1,this.m_dy=Number.NaN,this.m_buckets=new Ns(0),this.m_bucketedIndices=new Ns(0)}static sortEx(e,i,s,n,r=32){if(s-i<=r)return void n.userSort(i,s,e);new rd().sort(e,i,s,n,r)}sort(e,i,s,n,r=32){if(s-i<=r)return void n.userSort(i,s,e);let o=!0,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(let y=i;y<s;y++){const _=n.getValue(e.read(y));_<l&&(l=_),_>c&&(c=_)}if(this.reset(s-i,l,c,s-i)){for(let _=i;_<s;_++){const x=e.read(_),S=n.getValue(x),P=this.getBucket(S);this.m_buckets.write(P,this.m_buckets.read(P)+1),this.m_bucketedIndices.write(_-i,x)}let y=this.m_buckets.read(0);this.m_buckets.write(0,0);for(let _=1,x=this.m_buckets.size();_<x;_++){const S=this.m_buckets.read(_);this.m_buckets.write(_,y),y+=S}for(let _=i;_<s;_++){const x=this.m_bucketedIndices.read(_-i),S=n.getValue(x),P=this.getBucket(S),A=this.m_buckets.read(P);e.write(A+i,x),this.m_buckets.write(P,A+1)}o=!1}if(o)return void n.userSort(i,s,e);let f=0;for(let y=0,_=this.m_buckets.size();y<_;y++){const x=f;f=this.m_buckets.read(y),f>x&&n.userSort(i+x,i+f,e)}this.m_buckets.size()>100&&(this.m_buckets.resize(0),this.m_bucketedIndices.resize(0))}reset(e,i,s,n){if(e<2||s===i)return!1;const r=Math.min(rd.c_maxBuckets,e);return this.m_buckets.resize(r),this.m_buckets.setRange(0,0,this.m_buckets.size()),this.m_minValue=i,this.m_maxValue=s,this.m_bucketedIndices.resize(n),this.m_dy=(s-i)/(r-1),!0}getBucket(e){return Math.trunc((e-this.m_minValue)/this.m_dy)}getBucketCount(){return this.m_buckets.size()}}rd.c_maxBuckets=65536;class Ut{constructor(e){this.m_buffer=null,this.m_firstFree=-1,this.m_last=0,this.m_size=0,this.m_capacity=0,this.m_bufferSize=0,this.m_stride=0,this.m_stride=e,this.m_realStride=e,this.m_blockSize=Math.trunc(Ut.st_realBlockSize/this.m_realStride)}dbgdelete_(e){return this.m_buffer[e>>Ut.st_blockPower][1+(e&Ut.st_blockMask)]=Ut.st_deadVertex,!0}deleteElement(e){(e>>Ut.st_blockPower)*this.m_blockSize*this.m_realStride+(e&Ut.st_blockMask)<this.m_last*this.m_realStride?(this.m_buffer[e>>Ut.st_blockPower][e&Ut.st_blockMask]=this.m_firstFree,this.m_firstFree=e):this.m_last--,this.m_size--}getField(e,i){return this.m_buffer[e>>Ut.st_blockPower][(e&Ut.st_blockMask)+i]}setField(e,i,s){this.m_buffer[e>>Ut.st_blockPower][(e&Ut.st_blockMask)+i]=s}getStride(){return this.m_stride}newElement(){let e=this.m_firstFree;if(e===-1){if(this.m_last===this.m_capacity){const n=this.m_capacity!==0?Math.trunc(2*(this.m_capacity+1)):1;this.grow(n)}e=(this.m_last/this.m_blockSize<<Ut.st_blockPower)+this.m_last%this.m_blockSize*this.m_realStride,this.m_last++}else this.m_firstFree=this.m_buffer[e>>Ut.st_blockPower][e&Ut.st_blockMask];this.m_size++;const i=this.m_buffer[e>>Ut.st_blockPower],s=e&Ut.st_blockMask;for(let n=0;n<this.m_stride;n++)i[s+n]=-1;return e}elementToIndex(e){return(e>>Ut.st_blockPower)*this.m_blockSize+(e&Ut.st_blockMask)/this.m_realStride}deleteAll(e){this.m_firstFree=-1,this.m_last=0,this.m_size=0,e&&(this.m_buffer=null,this.m_capacity=0)}size(){return this.m_size}setCapacity(e){e>this.m_capacity&&this.grow(e)}capacity(){return this.m_capacity}swap(e,i){const s=this.m_buffer[e>>Ut.st_blockPower],n=this.m_buffer[i>>Ut.st_blockPower],r=e&Ut.st_blockMask,o=i&Ut.st_blockMask;for(let l=0;l<this.m_stride;l++){const c=s[r+l];s[r+l]=n[o+l],n[o+l]=c}}swapField(e,i,s){const n=this.m_buffer[e>>Ut.st_blockPower],r=this.m_buffer[i>>Ut.st_blockPower],o=(e&Ut.st_blockMask)+s,l=(i&Ut.st_blockMask)+s,c=n[o];n[o]=r[l],r[l]=c}static impossibleIndex2(){return-2}static impossibleIndex3(){return-3}static isValidElement(e){return e>=0}ensureBufferBlocksCapacity(e){if(this.m_buffer.length<e){const i=new Array(e);for(let s=0;s<this.m_buffer.length;s++)i[s]=this.m_buffer[s];this.m_buffer=i}}grow(e){this.m_buffer===null&&(this.m_bufferSize=0,this.m_buffer=new Array(8));const i=Math.trunc((e+this.m_blockSize-1)/this.m_blockSize);if(this.ensureBufferBlocksCapacity(i),i===1){let s=0;const n=e*this.m_realStride;for(;n>Ut.st_sizes[s];)s++;const r=new Int32Array(Ut.st_sizes[s]);this.m_bufferSize===1?(r.set(this.m_buffer[0]),this.m_buffer[0]=r):(this.m_buffer[this.m_bufferSize]=r,this.m_bufferSize++),this.m_capacity=Math.trunc(r.length/this.m_realStride)}else{if(this.m_bufferSize===1&&this.m_buffer[0].length<Ut.st_realBlockSize){const s=new Int32Array(Ut.st_realBlockSize);s.set(this.m_buffer[0]),this.m_buffer[0]=s,this.m_capacity=this.m_blockSize}for(;this.m_bufferSize<i;)this.m_buffer[this.m_bufferSize++]=new Int32Array(Ut.st_realBlockSize),this.m_capacity+=this.m_blockSize}}}function sJe(t,e){return{element:t,box:e.clone()}}Ut.st_realBlockSize=16384,Ut.st_blockMask=16383,Ut.st_blockPower=14,Ut.st_sizes=[16,32,64,128,256,512,1024,2048,4096,8192,16384],Ut.st_deadVertex=-2125315821;class Lo{constructor(e,i,s){this.m_extent=new xe,this.m_dataExtent=new xe,this.m_childExtents=[new xe,new xe,new xe,new xe],this.m_elementNodes=new Ut(4),this.m_data=[],this.m_freeData=[],this.m_root=-1,this.m_height=8,s===void 0&&(s=!1),this.m_quadTreeNodes=new Ut(s?11:10),this.m_bStoreDuplicates=s,this.reset_(e,i)}reset(e,i){K(0)}insert(e,i){if(this.m_root===-1&&this.createRoot_(),this.m_bStoreDuplicates){const n=this.insertDuplicates_(e,i,0,this.m_extent,this.m_root,!1,-1);return n!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),n}const s=this.insert_(e,i,0,this.m_extent,this.m_root,!1,-1);return s!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),s}insertEx(e,i,s){if(this.m_root===-1&&this.createRoot_(),this.m_bStoreDuplicates){const c=this.insertDuplicates_(e,i,0,this.m_extent,this.m_root,!1,-1);return c!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),c}let n;n=s===-1?this.m_root:this.getQuad_(s);const r=this.getHeight(n),o=this.getExtent(n),l=this.insert_(e,i,r,o,n,!1,-1);return l!==-1&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:i}):this.m_dataExtent.mergeEnvelope2D(i)),l}removeElement(e){K(0)}getElement(e){return this.getElementValue_(this.getData_(e))}getElementAtIndex(e){return K(0),0}getElementExtent(e){const i=this.getData_(e);return this.getBoundingBoxValue_(i).clone()}getElementExtentAtIndex(e){return K(0),{}}getDataExtent(){return this.m_dataExtent.clone()}getQuadTreeExtent(){return K(0),{}}getHeight(e){return this.m_quadTreeNodes.getField(e,6)>>Lo.m_heightBitShift}getMaxHeight(){return this.m_height}getExtent(e){const i=new xe;if(i.setCoords({env2D:this.m_extent}),e===this.m_root)return i;const s=[];let n=e;do s.push(this.getQuadrant_(n)),n=this.getParent_(n);while(n!==this.m_root);const r=s.length;for(let o=0;o<r;o++){const l=s.at(-1);s.pop(),l===0?(i.xmin=.5*(i.xmin+i.xmax),i.ymin=.5*(i.ymin+i.ymax)):l===1?(i.xmax=.5*(i.xmin+i.xmax),i.ymin=.5*(i.ymin+i.ymax)):l===2?(i.xmax=.5*(i.xmin+i.xmax),i.ymax=.5*(i.ymin+i.ymax)):(i.xmin=.5*(i.xmin+i.xmax),i.ymax=.5*(i.ymin+i.ymax))}return i}getQuad(e){return this.getQuad_(e)}getElementCount(){return this.m_root===-1?0:this.getSubTreeElementCount_(this.m_root)}getSubTreeElementCount(e){return this.getSubTreeElementCount_(e)}getContainedSubTreeElementCount(e){return this.m_bStoreDuplicates?this.getContainedSubTreeElementCount_(e):this.getSubTreeElementCount_(e)}getIntersectionCount(e,i,s){if(this.m_root===-1)return 0;const n=new xe;n.setCoords({env2D:e}),n.inflateCoords(i,i);const r=[],o=[];r.push(this.m_root),o.push(this.m_extent.clone());const l=Ge(xe,4);let c=0;for(;r.length>0;){let f=!1;const y=r.at(-1),_=o.at(-1);if(r.pop(),o.pop(),n.containsEnvelope(_)){if(c+=this.getSubTreeElementCount(y),s>0&&c>=s)return s}else if(n.isIntersecting(_)){for(let x=this.getFirstElement_(y);x!==-1;x=this.getNextElement_(x)){const S=this.getData_(x);if(this.getBoundingBoxValue_(S).isIntersecting(n)&&(c++,s>0&&c>=s))return s}f=this.getHeight(y)+1<=this.m_height}if(f){Lo.setChildExtents_(_,l);for(let x=0;x<4;x++){const S=this.getChild_(y,x);S!==-1&&this.getSubTreeElementCount_(S)>0&&n.isIntersecting(l[x])&&(r.push(S),o.push(l[x].clone()))}}}return c}hasData(e,i){return this.getIntersectionCount(e,i,1)>=1}getIterator(e,i){return new nte(this,e,i)}getIteratorForQT(){return new nte(this)}getSortedIterator(e,i){return new rte(this.getIterator(e,i))}getSortedIteratorForQT(){return new rte(this.getIteratorForQT())}visitLeavesNearest(e,i,s,n){K(0)}reset_(e,i){(i<0||i>127)&&Je("invalid height"),this.m_height=i,this.m_extent.setCoords({env2D:e}),this.m_dataExtent.setEmpty(),this.m_root=-1}insert_(e,i,s,n,r,o,l){if(!n.containsEnvelope(i))return s===0?-1:this.insert_(e,i,0,this.m_extent,this.m_root,o,l);if(!o)for(let _=r;_!==-1;_=this.getParent_(_))this.setSubTreeElementCount_(_,this.getSubTreeElementCount_(_)+1);const c=new xe;c.setCoords({env2D:n});let f,y=r;for(f=s;f<this.m_height&&this.canPushDown_(y);f++){Lo.setChildExtents_(c,this.m_childExtents);let _=!1;for(let x=0;x<4;x++)if(this.m_childExtents[x].containsEnvelope(i)){_=!0;let S=this.getChild_(y,x);S===-1&&(S=this.createChild_(y,x)),this.setSubTreeElementCount_(S,this.getSubTreeElementCount_(S)+1),y=S,c.setCoords({env2D:this.m_childExtents[x]});break}if(!_)break}return this.insertAtQuad_(e,i,f,c,y,o,r,l,-1)}insertDuplicates_(e,i,s,n,r,o,l){if(!o){if(!n.containsEnvelope(i))return-1;this.setSubTreeElementCount_(r,this.getSubTreeElementCount_(r)+1),this.setContainedSubTreeElementCount_(r,this.getContainedSubTreeElementCount_(r)+1)}const c=Math.max(i.width(),i.height());let f=-1;const y=[],_=[],x=[];y.push(r),_.push(n.clone()),x.push(s);const S=Ge(xe,4);for(;y.length>0;){let P=!1;const A=y.at(-1),k=_.at(-1),$=x.at(-1);if(y.pop(),_.pop(),x.pop(),$+1<this.m_height&&this.canPushDown_(A)&&c<=Math.max(k.width(),k.height())/2&&(P=!0),P){Lo.setChildExtents_(k,S);let F=!1;for(let G=0;G<4;G++)if(F=S[G].containsEnvelope(i),F){let V=this.getChild_(A,G);V===-1&&(V=this.createChild_(A,G)),y.push(V),_.push(S[G].clone()),x.push($+1),this.setSubTreeElementCount_(V,this.getSubTreeElementCount_(V)+1),this.setContainedSubTreeElementCount_(V,this.getContainedSubTreeElementCount_(V)+1);break}if(!F){for(let G=0;G<4;G++)if(S[G].isIntersecting(i)){let V=this.getChild_(A,G);V===-1&&(V=this.createChild_(A,G)),y.push(V),_.push(S[G].clone()),x.push($+1),this.setSubTreeElementCount_(V,this.getSubTreeElementCount_(V)+1)}}}else f=this.insertAtQuad_(e,i,$,k,A,o,r,l,f),o=!1}return 0}insertAtQuad_(e,i,s,n,r,o,l,c,f){this.getFirstElement_(r);const y=this.getLastElement_(r);let _=-1;if(o){if(r===l)return c;this.disconnectElementHandle_(c),_=c}else f===-1?(_=this.createElement_(),this.setDataValues_(this.getData_(_),e,i)):_=this.createElementFromDuplicate_(f);return this.setQuad_(_,r),y!==-1?(this.setPrevElement_(_,y),this.setNextElement_(y,_)):this.setFirstElement_(r,_),this.setLastElement_(r,_),this.setLocalElementCount_(r,this.getLocalElementCount_(r)+1),this.canFlush_(r)&&this.flush_(s,n,r),_}static setChildExtents_(e,i){const s=.5*(e.xmin+e.xmax),n=.5*(e.ymin+e.ymax);i[0].setCoords({xmin:s,ymin:n,xmax:e.xmax,ymax:e.ymax}),i[1].setCoords({xmin:e.xmin,ymin:n,xmax:s,ymax:e.ymax}),i[2].setCoords({xmin:e.xmin,ymin:e.ymin,xmax:s,ymax:n}),i[3].setCoords({xmin:s,ymin:e.ymin,xmax:e.xmax,ymax:n})}disconnectElementHandle_(e){const i=this.getQuad_(e),s=this.getFirstElement_(i),n=this.getLastElement_(i),r=this.getPrevElement_(e),o=this.getNextElement_(e);s===e?(o!==-1?this.setPrevElement_(o,-1):this.setLastElement_(i,-1),this.setFirstElement_(i,o)):n===e?(this.setNextElement_(r,-1),this.setLastElement_(i,r)):(this.setPrevElement_(o,r),this.setNextElement_(r,o)),this.setPrevElement_(e,-1),this.setNextElement_(e,-1),this.setLocalElementCount_(i,this.getLocalElementCount_(i)-1)}canFlush_(e){return this.getLocalElementCount_(e)===Lo.m_flushingCount&&!this.hasChildren_(e)}flush_(e,i,s){let n;const r=new xe;let o=this.getFirstElement_(s),l=-1,c=-1;do c=this.getData_(o),n=this.getElementValue_(c),r.setCoords({env2D:this.getBoundingBoxValue_(c)}),l=this.getNextElement_(o),this.m_bStoreDuplicates?this.insertDuplicates_(n,r,e,i,s,!0,o):this.insert_(n,r,e,i,s,!0,o),o=l;while(o!==-1)}canPushDown_(e){return this.getLocalElementCount_(e)>=Lo.m_flushingCount||this.hasChildren_(e)}hasChildren_(e){return this.getChild_(e,0)!==-1||this.getChild_(e,1)!==-1||this.getChild_(e,2)!==-1||this.getChild_(e,3)!==-1}createChild_(e,i){const s=this.m_quadTreeNodes.newElement();return this.setChild_(e,i,s),this.setSubTreeElementCount_(s,0),this.setLocalElementCount_(s,0),this.setParent_(s,e),this.setHeightAndQuadrant_(s,this.getHeight_(e)+1,i),this.m_bStoreDuplicates&&this.setContainedSubTreeElementCount_(s,0),s}createRoot_(){this.m_root=this.m_quadTreeNodes.newElement(),this.setSubTreeElementCount_(this.m_root,0),this.setLocalElementCount_(this.m_root,0),this.setHeightAndQuadrant_(this.m_root,0,0),this.m_bStoreDuplicates&&this.setContainedSubTreeElementCount_(this.m_root,0)}createElement_(){const e=this.m_elementNodes.newElement();let i;return this.m_freeData.length>0?(i=this.m_freeData.at(-1),this.m_freeData.pop()):(i=this.m_data.length,this.m_data.length=i+1),this.setData_(e,i),e}createElementFromDuplicate_(e){const i=this.m_elementNodes.newElement(),s=this.getData_(e);return this.setData_(i,s),i}freeElementAndBoxNode_(e){K(0)}getChild_(e,i){return this.m_quadTreeNodes.getField(e,i)}setChild_(e,i,s){this.m_quadTreeNodes.setField(e,i,s)}getFirstElement_(e){return this.m_quadTreeNodes.getField(e,4)}setFirstElement_(e,i){this.m_quadTreeNodes.setField(e,4,i)}getLastElement_(e){return this.m_quadTreeNodes.getField(e,5)}setLastElement_(e,i){this.m_quadTreeNodes.setField(e,5,i)}getQuadrant_(e){return this.m_quadTreeNodes.getField(e,6)&Lo.m_quadrantMask}getHeight_(e){return this.m_quadTreeNodes.getField(e,6)>>Lo.m_heightBitShift}setHeightAndQuadrant_(e,i,s){const n=i<<Lo.m_heightBitShift|s;this.m_quadTreeNodes.setField(e,6,n)}getLocalElementCount_(e){return this.m_quadTreeNodes.getField(e,7)}setLocalElementCount_(e,i){this.m_quadTreeNodes.setField(e,7,i)}getSubTreeElementCount_(e){return this.m_quadTreeNodes.getField(e,8)}setSubTreeElementCount_(e,i){this.m_quadTreeNodes.setField(e,8,i)}getParent_(e){return this.m_quadTreeNodes.getField(e,9)}setParent_(e,i){this.m_quadTreeNodes.setField(e,9,i)}getContainedSubTreeElementCount_(e){return this.m_quadTreeNodes.getField(e,10)}setContainedSubTreeElementCount_(e,i){this.m_quadTreeNodes.setField(e,10,i)}getData_(e){return this.m_elementNodes.getField(e,0)}setData_(e,i){this.m_elementNodes.setField(e,0,i)}getPrevElement_(e){return this.m_elementNodes.getField(e,1)}getNextElement_(e){return this.m_elementNodes.getField(e,2)}setPrevElement_(e,i){this.m_elementNodes.setField(e,1,i)}setNextElement_(e,i){this.m_elementNodes.setField(e,2,i)}getQuad_(e){return this.m_elementNodes.getField(e,3)}setQuad_(e,i){this.m_elementNodes.setField(e,3,i)}getElementValue_(e){return this.m_data[e].element}getBoundingBoxValue_(e){return this.m_data[e].box}setDataValues_(e,i,s){this.m_data[e]=sJe(i,s)}}Lo.m_quadrantMask=3,Lo.m_heightBitShift=2,Lo.m_flushingCount=5;class nte{constructor(e,i,s){this.m_bLinear=!1,this.m_queryStart=new Y,this.m_queryEnd=new Y,this.m_queryBox=new xe,this.m_tolerance=0,this.m_currentElementHandle=-1,this.m_nextElementHandle=-1,this.m_quadsStack=[],this.m_extentsStack=[],this.m_childExtents=[new xe,new xe,new xe,new xe],this.m_quadTree=e,i&&this.resetIterator(i,s)}resetIterator(e,i){if(i===void 0&&(i=0),e instanceof xe)return this.m_quadsStack.length=0,this.m_extentsStack.length=0,this.m_currentElementHandle=-1,this.m_queryBox.setCoords({env2D:e}),this.m_queryBox.inflateCoords(i,i),this.m_tolerance=Number.NaN,void(this.m_quadTree.m_root!==-1&&this.m_queryBox.isIntersecting(this.m_quadTree.m_extent)?(this.m_quadsStack.push(this.m_quadTree.m_root),this.m_extentsStack.push(this.m_quadTree.m_extent.clone()),this.m_nextElementHandle=this.m_quadTree.getFirstElement_(this.m_quadTree.m_root),this.m_bLinear=!1):this.m_nextElementHandle=-1);if(this.m_quadsStack.length=0,this.m_extentsStack.length=0,this.m_currentElementHandle=-1,e.queryLooseEnvelope(this.m_queryBox),this.m_queryBox.inflateCoords(i,i),this.m_quadTree.m_root!==-1&&this.m_queryBox.isIntersecting(this.m_quadTree.m_extent)){const s=e.getGeometryType();if(this.m_bLinear=s===me.enumLine,this.m_bLinear){const n=e;this.m_queryStart.assign(n.getStartXY()),this.m_queryEnd.assign(n.getEndXY()),this.m_tolerance=i}else this.m_tolerance=Number.NaN;this.m_quadsStack.push(this.m_quadTree.m_root),this.m_extentsStack.push(this.m_quadTree.m_extent.clone()),this.m_nextElementHandle=this.m_quadTree.getFirstElement_(this.m_quadTree.m_root)}else this.m_nextElementHandle=-1}next(){if(this.m_quadsStack.length===0)return-1;this.m_currentElementHandle=this.m_nextElementHandle;const e=new Y,i=new Y,s=new xe;let n=!1;for(;!n;){for(;this.m_currentElementHandle!==-1;){const r=this.m_quadTree.getData_(this.m_currentElementHandle);if(s.setCoords({env2D:this.m_quadTree.getBoundingBoxValue_(r)}),s.isIntersecting(this.m_queryBox)){if(!this.m_bLinear){n=!0;break}if(e.setCoordsPoint2D(this.m_queryStart),i.setCoordsPoint2D(this.m_queryEnd),s.inflateCoords(this.m_tolerance,this.m_tolerance),s.clipLine(e,i)>0){n=!0;break}}this.m_currentElementHandle=this.m_quadTree.getNextElement_(this.m_currentElementHandle)}if(this.m_currentElementHandle===-1){const r=this.m_quadsStack.at(-1),o=this.m_extentsStack.at(-1);Lo.setChildExtents_(o,this.m_childExtents),this.m_quadsStack.pop(),this.m_extentsStack.pop();for(let l=0;l<4;l++){const c=this.m_quadTree.getChild_(r,l);if(c!==-1&&this.m_quadTree.getSubTreeElementCount(c)>0&&this.m_childExtents[l].isIntersecting(this.m_queryBox))if(this.m_bLinear){e.setCoordsPoint2D(this.m_queryStart),i.setCoordsPoint2D(this.m_queryEnd);const f=new xe;f.setCoords({env2D:this.m_childExtents[l]}),f.inflateCoords(this.m_tolerance,this.m_tolerance),f.clipLine(e,i)>0&&(this.m_quadsStack.push(c),this.m_extentsStack.push(this.m_childExtents[l].clone()))}else this.m_quadsStack.push(c),this.m_extentsStack.push(this.m_childExtents[l].clone())}if(this.m_quadsStack.length===0)return-1;this.m_currentElementHandle=this.m_quadTree.getFirstElement_(this.m_quadsStack.at(-1))}}return this.m_nextElementHandle=this.m_quadTree.getNextElement_(this.m_currentElementHandle),this.m_currentElementHandle}clone(){return K(0),{}}}class rte{constructor(e){this.m_bucketSort=new rd,this.m_sortedHandles=new Ns(0),this.m_index=-1,this.m_quadTreeIteratorImpl=e}resetIterator(e,i){this.m_quadTreeIteratorImpl.resetIterator(e,i),this.m_sortedHandles.resize(0),this.m_index=-1}next(){if(this.m_index===-1){let e=-1;for(;(e=this.m_quadTreeIteratorImpl.next())!==-1;)this.m_sortedHandles.add(e);const i=this,s={userSort(n,r,o){o.sort(n,r,(l,c)=>i.m_quadTreeIteratorImpl.m_quadTree.getElement(l)-i.m_quadTreeIteratorImpl.m_quadTree.getElement(c))},getValue:n=>i.m_quadTreeIteratorImpl.m_quadTree.getElement(n)};this.m_bucketSort.sort(this.m_sortedHandles,0,this.m_sortedHandles.size(),s)}return this.m_index===this.m_sortedHandles.size()-1?-1:(this.m_index++,this.m_sortedHandles.read(this.m_index))}clone(){return K(0),{}}}class zv{constructor(e=!1){this.m_bNotifyOnActions=e}onDelete(e){}onSet(e){}onEndSearch(e){}onAddUniqueElementFailed(e){}onDeleteImpl(e,i){this.m_bNotifyOnActions&&this.onDelete(e.getElement(i))}onSetImpl(e,i){this.m_bNotifyOnActions&&this.onSet(e.getElement(i))}onAddUniqueElementFailedImpl(e){this.m_bNotifyOnActions&&this.onAddUniqueElementFailed(e)}onEndSearchImpl(e){this.m_bNotifyOnActions&&this.onEndSearch(e)}}class Gt{static st_nullNode(){return-1}constructor(){this.m_defaultTreap=-1,this.m_random=124234251,this.m_comparator=null,this.m_treapData=new Ut(7),this.m_treapCount=0,this.m_maxDepthEver=0,this.m_bBalancing=!0}setComparator(e){this.m_comparator=e}getComparator(){return this.m_comparator}disableBalancing(){this.m_bBalancing=!1}enableBalancing(){this.m_bBalancing||(K(this.m_treapCount<=1),this.rebalance(-1),this.m_bBalancing=!0)}isAutoBalancing(){return this.m_bBalancing}rebalance(e){if(this.m_bBalancing||(e===-1&&(e=this.m_defaultTreap),this.size(e)===0))return;const i=[];for(let s=this.getFirst(e);s!==-1;s=this.getNext(s))i.push(s),this.setParent_(s,-1),this.setRight_(s,-1),this.setLeft_(s,-1);this.setRoot_(-1,e),this.setFirst_(-1,e),this.setLast_(-1,e),this.setSize_(0,e),this.m_bBalancing=!0;for(const s of i)this.addBiggestElement_(s,e);this.m_bBalancing=!1}setCapacity(e){this.m_treapData.setCapacity(e)}createTreap(e){const i=this.m_treapData.newElement();return this.setSize_(0,i),this.setTreapData_(e,i),this.m_treapCount++,i}deleteTreap(e){this.m_treapData.deleteElement(e),this.m_treapCount--}addElement(e,i=-1){return i===-1&&(this.m_defaultTreap===Gt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),i=this.m_defaultTreap),this.addElement_(e,0,i)}addUniqueElement(e,i=-1){return i===-1&&(this.m_defaultTreap===Gt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),i=this.m_defaultTreap),this.addElement_(e,1,i)}addBiggestElement(e,i=-1){i===-1&&(this.m_defaultTreap===Gt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),i=this.m_defaultTreap);const s=this.newNode_(e);return this.addBiggestElement_(s,i),s}addElementAtPosition(e,i,s,n,r,o=-1){if(o===-1&&(this.m_defaultTreap===Gt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),o=this.m_defaultTreap),this.getRoot_(o)===Gt.st_nullNode()){const A=this.newNode_(s);return this.setRoot_(A,o),this.addToList_(-1,A,o),A}let l,c,f,y,_;if(r?(l=i!==Gt.st_nullNode()?this.m_comparator.compare(this,s,i):-1,c=e!==Gt.st_nullNode()?this.m_comparator.compare(this,s,e):1):(l=-1,c=1),n&&(l===0||c===0)){this.m_comparator.onAddUniqueElementFailedImpl(s);const A=l===0?i:e;return this.setDuplicateElement_(A,o),-1}_=i!==Gt.st_nullNode()&&e!==Gt.st_nullNode()?this.m_random>n2(this.m_random)>>1:i!==Gt.st_nullNode(),_?(y=l,f=i):(y=c,f=e);let x=-1,S=-1,P=!0;for(;;){if(y<0){const A=this.getLeft(f);if(A===Gt.st_nullNode()){S=f,x=this.newNode_(s),this.setLeft_(f,x),this.setParent_(x,f);break}f=A}else{const A=this.getRight(f);if(A===Gt.st_nullNode()){S=this.getNext(f),x=this.newNode_(s),this.setRight_(f,x),this.setParent_(x,f);break}f=A}P&&(y*=-1,P=!1)}return this.bubbleUp_(x),this.getParent(x)===Gt.st_nullNode()&&this.setRoot_(x,o),this.addToList_(S,x,o),x}replaceElementAtPosition(e,i,s,n,r=-1){if(n){const o=this.getNext(e);let l=-1;o!==Gt.st_nullNode()&&(l=this.m_comparator.compare(this,i,o));const c=this.getPrev(e);let f=-1;if(c!==Gt.st_nullNode()&&(f=this.m_comparator.compare(this,i,c)),s&&(l===0||f===0)){this.m_comparator.onAddUniqueElementFailedImpl(i);const y=l===0?o:c;return r===Gt.st_nullNode()&&(this.m_defaultTreap===Gt.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),r=this.m_defaultTreap),this.setDuplicateElement_(y,r),-1}}return this.setElement_(e,i),e}getDuplicateElement(e=-1){return e===-1?this.getDuplicateElement_(this.m_defaultTreap):this.getDuplicateElement_(e)}deleteNode(e,i=-1){this.m_comparator&&this.m_comparator.onDeleteImpl(this,e),i===-1&&(i=this.m_defaultTreap),this.m_bBalancing?this.deleteNode_(e,i):this.unbalancedDelete_(e,i)}search(e,i=-1){let s=this.getRoot(i);for(;s!==Gt.st_nullNode();){const n=this.m_comparator.compare(this,e,s);if(!n)return s;s=n<0?this.getLeft(s):this.getRight(s)}return this.m_comparator.onEndSearchImpl(e),Gt.st_nullNode()}searchLowerBound(e,i=-1){let s=this.getRoot(i),n=-1;for(;s!==Gt.st_nullNode();){const r=e.compare(this,s);if(!r)return s;r<0?s=this.getLeft(s):(n=s,s=this.getRight(s))}return n}searchUpperBound(e,i=-1){let s=this.getRoot(i),n=-1;for(;s!==Gt.st_nullNode();){const r=e.compare(this,s);if(!r)return s;r<0?(n=s,s=this.getLeft(s)):s=this.getRight(s)}return n}getElement(e){return this.m_treapData.getField(e,3)}getLeft(e){return this.m_treapData.getField(e,0)}getRight(e){return this.m_treapData.getField(e,1)}getParent(e){return this.m_treapData.getField(e,2)}getNext(e){return this.m_treapData.getField(e,6)}getPrev(e){return this.m_treapData.getField(e,5)}getFirst(e=-1){return e===-1?this.getFirst_(this.m_defaultTreap):this.getFirst_(e)}getLast(e=-1){return e===-1?this.getLast_(this.m_defaultTreap):this.getLast_(e)}getTreapData(e=-1){return e===-1?this.getTreapData_(this.m_defaultTreap):this.getTreapData_(e)}setElement(e,i){this.m_comparator!==null&&this.m_comparator.onSetImpl(this,e),this.setElement_(e,i)}getRoot(e=-1){return e===-1?this.getRoot_(this.m_defaultTreap):this.getRoot_(e)}clear(){this.m_treapData.deleteAll(!1),this.m_defaultTreap=Gt.st_nullNode(),this.m_treapCount=0,this.m_maxDepthEver=0}addToList_(e,i,s){let n;e!==-1?(n=this.getPrev(e),this.setPrev_(e,i)):n=this.getLast_(s),this.setPrev_(i,n),n!==-1&&this.setNext_(n,i),this.setNext_(i,e),e===this.getFirst_(s)&&this.setFirst_(i,s),e===-1&&this.setLast_(i,s),this.setSize_(this.getSize_(s)+1,s)}size(e=-1){return e===-1?this.getSize_(this.m_defaultTreap):this.getSize_(e)}getMaxDepth(e=-1){return this.getMaxDepthHelper_(this.getRoot(e))}getMaxDepthEver(){return this.m_maxDepthEver}static st_isValidNode(e){return Ut.isValidElement(e)}dbgCheck_(e){K(0)}getPriority_(e){return this.m_treapData.getField(e,4)}bubbleDown_(e){let i=this.getLeft(e),s=this.getRight(e);const n=this.getPriority_(e);for(;i!==Gt.st_nullNode()||s!==Gt.st_nullNode();){const r=i!==Gt.st_nullNode()?this.getPriority_(i):ya(),o=s!==Gt.st_nullNode()?this.getPriority_(s):ya();if(n<=Math.min(r,o))return;r<=o?this.rotateRight_(i):this.rotateLeft_(e),i=this.getLeft(e),s=this.getRight(e)}}bubbleUp_(e){if(!this.m_bBalancing)return;const i=this.getPriority_(e);let s=this.getParent(e);for(;s!==Gt.st_nullNode()&&this.getPriority_(s)>i;)this.getLeft(s)===e?this.rotateRight_(e):this.rotateLeft_(s),s=this.getParent(e)}rotateLeft_(e){const i=e,s=this.getRight(e);let n;this.setParent_(s,this.getParent(i)),this.setParent_(i,s),n=this.getLeft(s),this.setRight_(i,n),n!==Gt.st_nullNode()&&this.setParent_(n,i),this.setLeft_(s,i),n=this.getParent(s),n!==Gt.st_nullNode()&&(this.getLeft(n)===i?this.setLeft_(n,s):this.setRight_(n,s))}rotateRight_(e){const i=this.getParent(e),s=e;let n;this.setParent_(s,this.getParent(i)),this.setParent_(i,s),n=this.getRight(s),this.setLeft_(i,n),n!==Gt.st_nullNode()&&this.setParent_(n,i),this.setRight_(s,i),n=this.getParent(s),n!==Gt.st_nullNode()&&(this.getLeft(n)===i?this.setLeft_(n,s):this.setRight_(n,s))}setParent_(e,i){this.m_treapData.setField(e,2,i)}setLeft_(e,i){this.m_treapData.setField(e,0,i)}setRight_(e,i){this.m_treapData.setField(e,1,i)}setPriority_(e,i){this.m_treapData.setField(e,4,i)}setPrev_(e,i){this.m_treapData.setField(e,5,i)}setNext_(e,i){this.m_treapData.setField(e,6,i)}setRoot_(e,i){this.m_treapData.setField(i,0,e)}setFirst_(e,i){this.m_treapData.setField(i,1,e)}setLast_(e,i){this.m_treapData.setField(i,2,e)}setDuplicateElement_(e,i){this.m_treapData.setField(i,3,e)}setSize_(e,i){this.m_treapData.setField(i,4,e)}setTreapData_(e,i){this.m_treapData.setField(i,5,e)}getRoot_(e){return e===-1?Gt.st_nullNode():this.m_treapData.getField(e,0)}getFirst_(e){return e===-1?Gt.st_nullNode():this.m_treapData.getField(e,1)}getLast_(e){return e===-1?Gt.st_nullNode():this.m_treapData.getField(e,2)}getDuplicateElement_(e){return e===-1?Gt.st_nullNode():this.m_treapData.getField(e,3)}getSize_(e){return e===-1?0:this.m_treapData.getField(e,4)}getTreapData_(e){return this.m_treapData.getField(e,5)}newNode_(e){const i=this.m_treapData.newElement();return this.setPriority_(i,this.generatePriority_()),this.setElement_(i,e),i}freeNode_(e,i){e!==Gt.st_nullNode()&&this.m_treapData.deleteElement(e)}generatePriority_(){return this.m_random=n2(this.m_random),this.m_random&ya()>>1}maxPriority(){return K(0),0}getMaxDepthHelper_(e){return e===Gt.st_nullNode()?0:1+Math.max(this.getMaxDepthHelper_(this.getLeft(e)),this.getMaxDepthHelper_(this.getRight(e)))}addElement_(e,i,s){if(this.getRoot(s)===Gt.st_nullNode()){const c=this.newNode_(e);return this.setRoot_(c,s),this.addToList_(-1,c,s),this.m_maxDepthEver=Math.max(this.m_maxDepthEver,1),c}let n=this.getRoot_(s),r=-1,o=-1,l=1;for(;;){const c=i===-1?1:this.m_comparator.compare(this,e,n);if(c<0){const f=this.getLeft(n);if(f===Gt.st_nullNode()){o=n,r=this.newNode_(e),this.setLeft_(n,r),this.setParent_(r,n);break}n=f}else{if(i===1&&c===0)return this.m_comparator.onAddUniqueElementFailedImpl(e),this.setDuplicateElement_(n,s),-1;const f=this.getRight(n);if(f===Gt.st_nullNode()){o=this.getNext(n),r=this.newNode_(e),this.setRight_(n,r),this.setParent_(r,n);break}n=f}l++}return this.bubbleUp_(r),this.getParent(r)===Gt.st_nullNode()&&this.setRoot_(r,s),this.addToList_(o,r,s),this.m_maxDepthEver=Math.max(l,this.m_maxDepthEver),r}removeFromList_(e,i){const s=this.getPrev(e),n=this.getNext(e);s!==-1?this.setNext_(s,n):this.setFirst_(n,i),n!==-1?this.setPrev_(n,s):this.setLast_(s,i),this.setSize_(this.getSize_(i)-1,i)}unbalancedDelete_(e,i){this.removeFromList_(e,i);let s=this.getLeft(e),n=this.getRight(e),r=this.getParent(e),o=e;if(s!==-1&&n!==-1){let c;this.m_random=n2(this.m_random),c=this.m_random>ya()>>1?this.getNext(e):this.getPrev(e);const f=this.getParent(c)===e;this.m_treapData.swapField(e,c,0),this.m_treapData.swapField(e,c,1),this.m_treapData.swapField(e,c,2),r!==-1?this.getLeft(r)===e?this.setLeft_(r,c):this.setRight_(r,c):this.setRoot_(c,i),f?(s===c?(this.setLeft_(c,e),this.setParent_(n,c)):n===c&&(this.setRight_(c,e),this.setParent_(s,c)),this.setParent_(e,c),r=c):(this.setParent_(s,c),this.setParent_(n,c),r=this.getParent(e),o=c),s=this.getLeft(e),n=this.getRight(e),s!==-1&&this.setParent_(s,e),n!==-1&&this.setParent_(n,e)}const l=s!==-1?s:n;r===-1?this.setRoot_(l,i):this.getLeft(r)===o?this.setLeft_(r,l):this.setRight_(r,l),l!==-1&&this.setParent_(l,r),this.freeNode_(e,i)}deleteNode_(e,i){this.setPriority_(e,ya());let s=Gt.st_nullNode(),n=Gt.st_nullNode();const r=this.getRoot_(i),o=r===e;if(o&&(s=this.getLeft(r),n=this.getRight(r),s===Gt.st_nullNode()&&n===Gt.st_nullNode()))return this.removeFromList_(r,i),this.freeNode_(r,i),void this.setRoot_(Gt.st_nullNode(),i);this.bubbleDown_(e);const l=this.getParent(e);l!==Gt.st_nullNode()&&(this.getLeft(l)===e?this.setLeft_(l,Gt.st_nullNode()):this.setRight_(l,Gt.st_nullNode())),this.removeFromList_(e,i),this.freeNode_(e,i),o&&this.setRoot_(s===Gt.st_nullNode()||this.getParent(s)!==Gt.st_nullNode()?n:s,i)}setElement_(e,i){this.m_treapData.setField(e,3,i)}addBiggestElement_(e,i){if(this.getRoot_(i)===Gt.st_nullNode())return this.setRoot_(e,i),void this.addToList_(-1,e,i);const s=this.getLast_(i);this.setRight_(s,e),this.setParent_(e,s),this.bubbleUp_(e),this.getParent(e)===Gt.st_nullNode()&&this.setRoot_(e,i),this.addToList_(-1,e,i)}}class eo{constructor(e){this.m_lists=new Ut(6),this.m_listOfLists=eo.st_nullNode(),e===void 0?(this.m_listNodes=new Ut(3),this.m_bStoreListIndexWithNode=!1):(this.m_listNodes=new Ut(e?4:3),this.m_bStoreListIndexWithNode=e)}freeNode_(e){this.m_listNodes.deleteElement(e)}newNode_(){return this.m_listNodes.newElement()}freeList_(e){K(0)}newList_(){return this.m_lists.newElement()}setPrev_(e,i){this.m_listNodes.setField(e,1,i)}setNext_(e,i){this.m_listNodes.setField(e,2,i)}setData_(e,i){K(0)}setList_(e,i){return this.m_listNodes.setField(e,3,i)}setListSize_(e,i){this.m_lists.setField(e,4,i)}setNextList_(e,i){K(0)}setPrevList_(e,i){this.m_lists.setField(e,2,i)}createList(e){const i=this.newList_();return this.m_lists.setField(i,3,this.m_listOfLists),this.m_lists.setField(i,4,0),this.m_lists.setField(i,5,e),this.m_listOfLists!==eo.st_nullNode()&&this.setPrevList_(this.m_listOfLists,i),this.m_listOfLists=i,i}deleteList(e){this.clear(e);const i=this.m_lists.getField(e,2),s=this.m_lists.getField(e,3);return i!==eo.st_nullNode()?this.setNextList_(i,s):this.m_listOfLists=s,s!==eo.st_nullNode()&&this.setPrevList_(s,i),this.freeList_(e),s}reserveLists(e){K(0)}getListData(e){return this.m_lists.getField(e,5)}getList(e){return K(0),0}setListData(e,i){this.m_lists.setField(e,5,i)}addElement(e,i){return this.insertElement(e,-1,i)}insertElement(e,i,s){const n=this.newNode_();let r=-1;if(i!==eo.st_nullNode()&&(r=this.getPrev(i),this.setPrev_(i,n)),this.setNext_(n,i),r!==eo.st_nullNode()&&this.setNext_(r,n),i===this.m_lists.getField(e,0)&&this.m_lists.setField(e,0,n),i===eo.st_nullNode()){const o=this.m_lists.getField(e,1);this.setPrev_(n,o),o!==-1&&this.setNext_(o,n),this.m_lists.setField(e,1,n)}return this.setData(n,s),this.setListSize_(e,this.getListSize(e)+1),this.m_bStoreListIndexWithNode&&this.setList_(n,e),n}deleteElement(e,i){const s=this.getPrev(i),n=this.getNext(i);return s!==eo.st_nullNode()?this.setNext_(s,n):this.m_lists.setField(e,0,n),n!==eo.st_nullNode()?this.setPrev_(n,s):this.m_lists.setField(e,1,s),this.freeNode_(i),this.setListSize_(e,this.getListSize(e)-1),n}reserveNodes(e){this.m_listNodes.setCapacity(e)}getData(e){return this.m_listNodes.getField(e,0)}getElement(e){return this.getData(e)}setData(e,i){this.m_listNodes.setField(e,0,i)}getNext(e){return this.m_listNodes.getField(e,2)}getPrev(e){return this.m_listNodes.getField(e,1)}getFirst(e){return this.m_lists.getField(e,0)}getLast(e){return this.m_lists.getField(e,1)}static st_nullNode(){return-1}clear(e){if(e!==void 0){let i=this.getLast(e);for(;i!==eo.st_nullNode();){const s=i;i=this.getPrev(s),this.freeNode_(s)}return this.m_lists.setField(e,0,-1),this.m_lists.setField(e,1,-1),void this.setListSize_(e,0)}for(let i=this.getFirstList();i!==-1;)i=this.deleteList(i)}isEmpty(e){return K(0),!1}getNodeCount(){return this.m_listNodes.size()}getListCount(){return this.m_lists.size()}getListSize(e){return this.m_lists.getField(e,4)}getFirstList(){return this.m_listOfLists}getNextList(e){return this.m_lists.getField(e,3)}}class nJe extends zv{constructor(e){super(),this.m_intervalTree=e}compare(e,i,s){const n=e.getElement(s),r=this.m_intervalTree.getValue_(i),o=this.m_intervalTree.getValue_(n);return r<o?-1:r===o?va.isLeft_(i)&&va.isRight_(n)?-1:va.isLeft_(n)&&va.isRight_(i)?1:0:1}}class va{constructor(e){this.m_bEnvelopesRef=!1,this.m_intervals=[],this.m_envelopesRef=null,this.m_intervalNodes=new Ut(3),this.m_intervalHandles=[],this.m_endIndicesUnique=[],this.m_cCount=-1,this.m_root=-1,this.m_bSortIntervals=!1,this.m_bConstructing=!1,this.m_bConstructionEnded=!1,this.m_bOfflineDynamic=e,this.m_tertiaryNodes=new Ut(this.m_bOfflineDynamic?5:4),this.m_secondaryTreaps=new Gt,this.m_secondaryTreaps.setComparator(new nJe(this)),this.m_secondaryLists=new eo}addEnvelopesRef(e){this.reset_(!0,!0),this.m_bEnvelopesRef=!0,this.m_envelopesRef=e,this.m_bConstructing=!1,this.m_bConstructionEnded=!0,this.m_bOfflineDynamic||(this.insertIntervalsStatic_(),this.m_cCount=this.m_envelopesRef.length)}startConstruction(){this.reset_(!0,!1)}addInterval(e){this.m_bConstructing||bn(""),this.m_intervals.push(e.clone())}addIntervalCoords(e,i){K(0)}endConstruction(){this.m_bConstructing||bn(""),this.m_bConstructing=!1,this.m_bConstructionEnded=!0,this.m_bOfflineDynamic||(this.insertIntervalsStatic_(),this.m_cCount=this.m_intervals.length)}insert(e){if(this.m_bOfflineDynamic&&this.m_bConstructionEnded||bn(""),this.m_root===-1){const r=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length;if(this.m_bSortIntervals){const o=new Ns(0);this.querySortedEndPointIndices_(o),this.m_endIndicesUnique.length=0,this.querySortedDuplicatesRemoved_(o),this.m_intervalHandles.length=r,this.m_intervalHandles.fill(-1),this.m_bSortIntervals=!1}else this.m_intervalHandles.fill(-1,0,r);this.m_root=this.createRoot_()}const i=this.insertIntervalEnd_(e<<1,this.m_root),s=this.getSecondaryFromInterval_(i),n=this.m_secondaryTreaps.addElement(1+(e<<1),s);this.setRightEnd_(i,n),this.m_intervalHandles[e]=i,this.m_cCount++}remove(e){this.m_bOfflineDynamic&&this.m_bConstructionEnded||bn("");const i=this.m_intervalHandles[e];let s;i===-1&&Je("the interval does not exist in the interval tree"),this.m_intervalHandles[e]=-1,this.m_cCount--;let n=this.getSecondaryFromInterval_(i),r=-1;r=this.m_secondaryTreaps.getTreapData(n),this.m_secondaryTreaps.deleteNode(this.getLeftEnd_(i),n),this.m_secondaryTreaps.deleteNode(this.getRightEnd_(i),n),s=this.m_secondaryTreaps.size(n),s===0&&(this.m_secondaryTreaps.deleteTreap(n),this.setSecondaryToTertiary_(r,-1)),this.m_intervalNodes.deleteElement(i);let o=this.getPptr_(r),l=this.getLptr_(r),c=this.getRptr_(r);for(;!(s>0||r===this.m_root||l!==-1&&c!==-1);)r===this.getLptr_(o)?l!==-1?(this.setLptr_(o,l),this.setPptr_(l,o),this.setLptr_(r,-1),this.setPptr_(r,-1)):c!==-1?(this.setLptr_(o,c),this.setPptr_(c,o),this.setRptr_(r,-1),this.setPptr_(r,-1)):(this.setLptr_(o,-1),this.setPptr_(r,-1)):l!==-1?(this.setRptr_(o,l),this.setPptr_(l,o),this.setLptr_(r,-1),this.setPptr_(r,-1)):c!==-1?(this.setRptr_(o,c),this.setPptr_(c,o),this.setRptr_(r,-1),this.setPptr_(r,-1)):(this.setRptr_(o,-1),this.setPptr_(r,-1)),this.m_tertiaryNodes.deleteElement(r),r=o,n=this.getSecondaryFromTertiary_(r),s=n!==-1?this.m_secondaryTreaps.size(n):0,l=this.getLptr_(r),c=this.getRptr_(r),o=this.getPptr_(r)}size(){return this.m_cCount}getIteratorQuery(e,i){return e instanceof Ze?new ote(this,e,i):(K(0),{})}getIterator(){return new ote(this)}querySortedEndPointIndices_(e){const i=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length;for(let s=0;s<2*i;s++)e.add(s);this.sortEndIndices_(e,0,2*i)}querySortedDuplicatesRemoved_(e){let i=Number.NaN;for(let s=0;s<e.size();s++){const n=e.read(s),r=this.getValue_(n);r!==i&&(this.m_endIndicesUnique.push(n),i=r)}}insertIntervalsStatic_(){const e=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length,i=new Ns(0);this.querySortedEndPointIndices_(i),this.m_endIndicesUnique.length=0,this.querySortedDuplicatesRemoved_(i),this.m_intervalNodes.setCapacity(e),this.m_secondaryLists.reserveNodes(2*e);const s=Vi(e,-1);this.m_root=this.createRoot_();for(let n=0;n<i.size();n++){const r=i.read(n);let o=s[r>>1];if(o!==-1){const l=this.getSecondaryFromInterval_(o);this.setRightEnd_(o,this.m_secondaryLists.addElement(l,r))}else o=this.insertIntervalEnd_(r,this.m_root),s[r>>1]=o}}createRoot_(){const e=this.calculateDiscriminantIndex1_(0,this.m_endIndicesUnique.length-1);return this.createTertiaryNode_(e)}insertIntervalEnd_(e,i){let s=-1,n=i,r=-1,o=-1,l=0,c=this.m_endIndicesUnique.length-1,f=0;const y=e>>1;let _=Number.NaN,x=Number.NaN,S=!0;const P=this.getMin_(y),A=this.getMax_(y);let k=-1;for(;S;){f=l+(c-l>>1),k=this.calculateDiscriminantIndex1_(l,c);const $=this.getDiscriminantFromIndex1_(k);if(A<$){if(n!==-1){if(k===this.getDiscriminantIndex1_(n))s=n,_=$,n=this.getLptr_(n),x=n!==-1?this.getDiscriminant_(n):Number.NaN;else if(x>$){const V=this.createTertiaryNode_(k);$<_?this.setLptr_(s,V):this.setRptr_(s,V),this.setRptr_(V,n),this.m_bOfflineDynamic&&(this.setPptr_(V,s),this.setPptr_(n,V)),s=V,_=$,n=-1,x=Number.NaN}}c=f;continue}if(P>$){if(n!==-1){if(k===this.getDiscriminantIndex1_(n))s=n,_=$,n=this.getRptr_(n),x=n!==-1?this.getDiscriminant_(n):Number.NaN;else if(x<$){const V=this.createTertiaryNode_(k);$<_?this.setLptr_(s,V):this.setRptr_(s,V),this.setLptr_(V,n),this.m_bOfflineDynamic&&(this.setPptr_(V,s),this.setPptr_(n,V)),s=V,_=$,n=-1,x=Number.NaN}}l=f+1;continue}let F=-1;F=n===-1||k!==this.getDiscriminantIndex1_(n)?this.createTertiaryNode_(k):n,r=this.getSecondaryFromTertiary_(F),r===-1&&(r=this.createSecondary_(F),this.setSecondaryToTertiary_(F,r));const G=this.addEndIndex_(r,e);o=this.createIntervalNode_(),this.setSecondaryToInterval_(o,r),this.setLeftEnd_(o,G),n!==-1&&k===this.getDiscriminantIndex1_(n)||($<_?this.setLptr_(s,F):this.setRptr_(s,F),this.m_bOfflineDynamic&&this.setPptr_(F,s),n!==-1&&(x<$?this.setLptr_(F,n):this.setRptr_(F,n),this.m_bOfflineDynamic&&this.setPptr_(n,F))),S=!1;break}return o}createTertiaryNode_(e){const i=this.m_tertiaryNodes.newElement();return this.setDiscriminantIndex1_(i,e),i}createSecondary_(e){return this.m_bOfflineDynamic?this.m_secondaryTreaps.createTreap(e):this.m_secondaryLists.createList(e)}createIntervalNode_(){return this.m_intervalNodes.newElement()}reset(){this.m_bOfflineDynamic&&this.m_bConstructionEnded||bn(""),this.reset_(!1,this.m_bEnvelopesRef)}reset_(e,i){e?(this.m_bEnvelopesRef=!1,this.m_envelopesRef=null,this.m_bSortIntervals=!0,this.m_bConstructing=!0,this.m_bConstructionEnded=!1,this.m_endIndicesUnique.length=0,i?(this.m_intervals.length=0,this.m_bEnvelopesRef=!0):this.m_intervals.length=0):this.m_bSortIntervals=!1,this.m_bOfflineDynamic?this.m_secondaryTreaps.clear():this.m_secondaryLists.clear(),this.m_intervalNodes.deleteAll(!1),this.m_tertiaryNodes.deleteAll(!1),this.m_root=-1,this.m_cCount=0}getDiscriminant_(e){const i=this.getDiscriminantIndex1_(e);return this.getDiscriminantFromIndex1_(i)}getDiscriminantFromIndex1_(e){if(e===-1)return Number.NaN;if(e>0){const n=e-2,r=this.m_endIndicesUnique[n],o=this.m_endIndicesUnique[n+1];return .5*(this.getValue_(r)+this.getValue_(o))}const i=-e-2,s=this.m_endIndicesUnique[i];return this.getValue_(s)}calculateDiscriminantIndex1_(e,i){let s;return e<i?s=e+(i-e>>1)+2:s=-(e+2),s}setDiscriminantIndex1_(e,i){this.m_tertiaryNodes.setField(e,0,i)}setSecondaryToTertiary_(e,i){this.m_tertiaryNodes.setField(e,1,i)}setLptr_(e,i){this.m_tertiaryNodes.setField(e,2,i)}setRptr_(e,i){this.m_tertiaryNodes.setField(e,3,i)}setPptr_(e,i){this.m_tertiaryNodes.setField(e,4,i)}setSecondaryToInterval_(e,i){this.m_intervalNodes.setField(e,0,i)}addEndIndex_(e,i){let s=-1;return s=this.m_bOfflineDynamic?this.m_secondaryTreaps.addElement(i,e):this.m_secondaryLists.addElement(e,i),s}setLeftEnd_(e,i){this.m_intervalNodes.setField(e,1,i)}setRightEnd_(e,i){this.m_intervalNodes.setField(e,2,i)}getFirst_(e){return this.m_bOfflineDynamic?this.m_secondaryTreaps.getFirst(e):this.m_secondaryLists.getFirst(e)}getLast_(e){return this.m_bOfflineDynamic?this.m_secondaryTreaps.getLast(e):this.m_secondaryLists.getLast(e)}static isLeft_(e){return!(1&e)}static isRight_(e){return!(1&~e)}getDiscriminantIndex1_(e){return this.m_tertiaryNodes.getField(e,0)}getSecondaryFromTertiary_(e){return this.m_tertiaryNodes.getField(e,1)}getLptr_(e){return this.m_tertiaryNodes.getField(e,2)}getRptr_(e){return this.m_tertiaryNodes.getField(e,3)}getPptr_(e){return this.m_tertiaryNodes.getField(e,4)}getSecondaryFromInterval_(e){return this.m_intervalNodes.getField(e,0)}getLeftEnd_(e){return this.m_intervalNodes.getField(e,1)}getRightEnd_(e){return this.m_intervalNodes.getField(e,2)}getMin_(e){return this.m_bEnvelopesRef?this.m_envelopesRef[e].xmin:this.m_intervals[e].vmin}getMax_(e){return this.m_bEnvelopesRef?this.m_envelopesRef[e].xmax:this.m_intervals[e].vmax}sortEndIndices_(e,i,s){const n=this,r={userSort(o,l,c){n.sortEndIndicesHelper_(c,o,l)},getValue:o=>n.getValue_(o)};new rd().sort(e,i,s,r)}sortEndIndicesHelper_(e,i,s){e.sort(i,s,(n,r)=>{const o=this.getValue_(n),l=this.getValue_(r);return o<l||o===l&&va.isLeft_(n)&&va.isRight_(r)?-1:1})}getValue_(e){if(!this.m_bEnvelopesRef){const s=this.m_intervals[e>>1];return va.isLeft_(e)?s.vmin:s.vmax}const i=this.m_envelopesRef[e>>1];return va.isLeft_(e)?i.xmin:i.xmax}checkValidation_(){return K(0),!1}checkValidationHelper_(e){return K(0),0}}class ote{constructor(e,i,s){this.m_query=Ze.constructEmpty(),this.m_tertiaryHandle=-1,this.m_nextTertiaryHandle=-1,this.m_forkedHandle=-1,this.m_currentEndHandle=-1,this.m_nextEndHandle=-1,this.m_tertiaryStack=[],this.m_functionIndex=0,this.m_intervalTree=e,this.m_functionStack=new Array(2),this.m_functionStack[0]=this.nullFunc_,this.m_functionStack[1]=this.nullFunc_,i!==void 0&&this.resetIterator(i,s)}nullFunc_(){return K(0),!1}resetIterator(e,i){if(typeof e=="number"){const s=new Ze;s.setCoords(e,e),this.resetIterator(s,i)}else i===void 0&&(i=0),this.m_query.vmin=e.vmin-i,this.m_query.vmax=e.vmax+i,this.m_tertiaryStack.length=0,this.m_functionIndex=0,this.m_functionStack[0]=this.initialize_}next(){if(this.m_intervalTree.m_bConstructionEnded||bn(""),this.m_functionIndex<0)return-1;for(;this.m_fi=this.m_functionStack[this.m_functionIndex],this.m_fi(););return this.m_currentEndHandle!==-1?this.getCurrentEndIndex_()>>1:-1}initialize_(){return this.m_tertiaryHandle=-1,this.m_nextTertiaryHandle=-1,this.m_forkedHandle=-1,this.m_currentEndHandle=-1,this.m_intervalTree.m_tertiaryNodes.size()>0?(this.m_functionStack[0]=this.pIn_,this.m_nextTertiaryHandle=this.m_intervalTree.m_root,!0):(this.m_functionIndex=-1,!1)}pIn_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,this.m_tertiaryHandle===-1)return this.m_functionIndex=-1,this.m_currentEndHandle=-1,!1;const e=this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle);if(this.m_query.vmax<e){const s=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),s!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(s),this.m_functionStack[++this.m_functionIndex]=this.left_),!0}if(e<this.m_query.vmin){const s=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),s!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getLast_(s),this.m_functionStack[++this.m_functionIndex]=this.right_),!0}this.m_functionStack[this.m_functionIndex]=this.pL_,this.m_forkedHandle=this.m_tertiaryHandle;const i=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),i!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(i),this.m_functionStack[++this.m_functionIndex]=this.all_),!0}pL_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,this.m_tertiaryHandle===-1)return this.m_functionStack[this.m_functionIndex]=this.pR_,this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_forkedHandle),!0;if(this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle)<this.m_query.vmin){const s=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),s!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getLast_(s),this.m_functionStack[++this.m_functionIndex]=this.right_),!0}const e=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),e!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(e),this.m_functionStack[++this.m_functionIndex]=this.all_);const i=this.m_intervalTree.getRptr_(this.m_tertiaryHandle);return i!==-1&&this.m_tertiaryStack.push(i),!0}pR_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,this.m_tertiaryHandle===-1)return this.m_functionStack[this.m_functionIndex]=this.pT_,!0;const e=this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle);if(this.m_query.vmax<e){const n=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),n!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(n),this.m_functionStack[++this.m_functionIndex]=this.left_),!0}const i=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),i!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(i),this.m_functionStack[++this.m_functionIndex]=this.all_);const s=this.m_intervalTree.getLptr_(this.m_tertiaryHandle);return s!==-1&&this.m_tertiaryStack.push(s),!0}pT_(){if(this.m_tertiaryStack.length===0)return this.m_functionIndex=-1,this.m_currentEndHandle=-1,!1;this.m_tertiaryHandle=this.m_tertiaryStack.at(-1),this.m_tertiaryStack.pop();const e=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return e!==-1&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(e),this.m_functionStack[++this.m_functionIndex]=this.all_),this.m_intervalTree.getLptr_(this.m_tertiaryHandle)!==-1&&this.m_tertiaryStack.push(this.m_intervalTree.getLptr_(this.m_tertiaryHandle)),this.m_intervalTree.getRptr_(this.m_tertiaryHandle)!==-1&&this.m_tertiaryStack.push(this.m_intervalTree.getRptr_(this.m_tertiaryHandle)),!0}left_(){return this.m_currentEndHandle=this.m_nextEndHandle,this.m_currentEndHandle!==-1&&va.isLeft_(this.getCurrentEndIndex_())&&this.m_intervalTree.getValue_(this.getCurrentEndIndex_())<=this.m_query.vmax?(this.m_nextEndHandle=this.getNext_(),!1):(this.m_functionIndex--,!0)}right_(){return this.m_currentEndHandle=this.m_nextEndHandle,this.m_currentEndHandle!==-1&&va.isRight_(this.getCurrentEndIndex_())&&this.m_intervalTree.getValue_(this.getCurrentEndIndex_())>=this.m_query.vmin?(this.m_nextEndHandle=this.getPrev_(),!1):(this.m_functionIndex--,!0)}all_(){return this.m_currentEndHandle=this.m_nextEndHandle,this.m_currentEndHandle!==-1&&va.isLeft_(this.getCurrentEndIndex_())?(this.m_nextEndHandle=this.getNext_(),!1):(this.m_functionIndex--,!0)}getNext_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getNext(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getNext(this.m_currentEndHandle)}getPrev_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getPrev(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getPrev(this.m_currentEndHandle)}getCurrentEndIndex_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getElement(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getData(this.m_currentEndHandle)}}class n5{constructor(){this.m_tolerance=0,this.m_sweepIndexRed=-1,this.m_sweepIndexBlue=-1,this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_intervalTreeRed=null,this.m_intervalTreeBlue=null,this.m_iteratorRed=null,this.m_iteratorBlue=null,this.m_envelopesRed=[],this.m_envelopesBlue=[],this.m_elementsRed=[],this.m_elementsBlue=[],this.m_sortedEndIndicesRed=new Ns(0),this.m_sortedEndIndicesBlue=new Ns(0),this.m_queuedListRed=-1,this.m_queuedListBlue=-1,this.m_queuedEnvelopes=new eo,this.m_queuedIndicesRed=[],this.m_queuedIndicesBlue=[],this.m_bAddRed=!1,this.m_bAddBlue=!1,this.m_bAddRedRed=!1,this.m_bDone=!0,this.m_function=this.nullFunc_,this.reset_()}startConstruction(){this.reset_(),this.m_bAddRedRed=!0,this.m_elementsRed.length=0,this.m_envelopesRed.length=0}addEnvelope(e,i){this.m_bAddRedRed||bn(""),this.m_elementsRed.push(e),this.m_envelopesRed.push(new xe(i))}endConstruction(){this.m_bAddRedRed||bn(""),this.m_bAddRedRed=!1,this.m_envelopesRed.length>0&&(this.m_function=this.initialize_,this.m_bDone=!1)}startRedConstruction(){this.reset_(),this.m_bAddRed=!0,this.m_elementsRed.length=0,this.m_envelopesRed.length=0}addRedEnvelope(e,i){this.m_bAddRed||bn(""),this.m_elementsRed.push(e),this.m_envelopesRed.push(i.clone())}endRedConstruction(){this.m_bAddRed||bn(""),this.m_bAddRed=!1,this.m_envelopesRed.length>0&&this.m_envelopesBlue.length>0&&(this.m_function===this.nullFunc_||this.m_function===this.initializeBlue_?this.m_function=this.initializeRedBlue_:this.m_function!==this.initializeRedBlue_&&(this.m_function=this.initializeRed_),this.m_bDone=!1)}startBlueConstruction(){this.reset_(),this.m_bAddBlue=!0,this.m_elementsBlue.length=0,this.m_envelopesBlue.length=0}addBlueEnvelope(e,i){this.m_bAddBlue||bn(""),this.m_elementsBlue.push(e),this.m_envelopesBlue.push(i.clone())}endBlueConstruction(){this.m_bAddBlue||bn(""),this.m_bAddBlue=!1,this.m_envelopesRed.length>0&&this.m_envelopesBlue.length>0&&(this.m_function===this.nullFunc_||this.m_function===this.initializeRed_?this.m_function=this.initializeRedBlue_:this.m_function!==this.initializeRedBlue_&&(this.m_function=this.initializeBlue_),this.m_bDone=!1)}next(){if(this.m_bDone)return!1;for(;this.m_function(););return!this.m_bDone}getHandleA(){return this.m_envelopeHandleA}getHandleB(){return this.m_envelopeHandleB}setTolerance(e){this.m_tolerance=e}getEnvelope(e){return K(0),{}}getElement(e){return this.m_elementsRed[e]}getRedEnvelope(e){return this.m_envelopesRed[e]}getBlueEnvelope(e){return this.m_envelopesBlue[e]}getRedElement(e){return this.m_elementsRed[e]}getBlueElement(e){return this.m_elementsBlue[e]}isTop_(e){return!(1&~e)}isBottom_(e){return!(1&e)}reset_(){this.m_bAddRed=!1,this.m_bAddBlue=!1,this.m_bAddRedRed=!1,this.m_sweepIndexRed=-1,this.m_sweepIndexBlue=-1,this.m_queuedListRed=-1,this.m_queuedListBlue=-1,this.m_bDone=!0}initialize_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new va(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_iteratorRed===null&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_sortedEndIndicesRed.resize(0);for(let e=0;e<2*this.m_envelopesRed.length;e++)this.m_sortedEndIndicesRed.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,2*this.m_envelopesRed.length,!0),this.m_sweepIndexRed=2*this.m_envelopesRed.length,this.m_function=this.sweep_,!0}initializeRed_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new va(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_iteratorRed===null&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_sortedEndIndicesRed.resize(0);for(let e=0;e<2*this.m_envelopesRed.length;e++)this.m_sortedEndIndicesRed.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,this.m_sortedEndIndicesRed.size(),!0),this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_queuedListRed!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_function=this.sweepRedBlue_,this.resetBlue_()}initializeBlue_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeBlue||(this.m_intervalTreeBlue=new va(!0)),this.m_intervalTreeBlue.addEnvelopesRef(this.m_envelopesBlue),this.m_iteratorBlue==null&&(this.m_iteratorBlue=this.m_intervalTreeBlue.getIterator()),this.m_sortedEndIndicesBlue.resize(0);for(let e=0;e<2*this.m_envelopesBlue.length;e++)this.m_sortedEndIndicesBlue.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesBlue,0,this.m_sortedEndIndicesBlue.size(),!1),this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_queuedListBlue!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_function=this.sweepRedBlue_,this.resetRed_()}initializeRedBlue_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new va(!0)),this.m_intervalTreeBlue||(this.m_intervalTreeBlue=new va(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_intervalTreeBlue.addEnvelopesRef(this.m_envelopesBlue),this.m_iteratorRed===null&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_iteratorBlue===null&&(this.m_iteratorBlue=this.m_intervalTreeBlue.getIterator()),this.m_sortedEndIndicesRed.resize(0),this.m_sortedEndIndicesBlue.resize(0);for(let e=0;e<2*this.m_envelopesRed.length;e++)this.m_sortedEndIndicesRed.add(e);for(let e=0;e<2*this.m_envelopesBlue.length;e++)this.m_sortedEndIndicesBlue.add(e);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,this.m_sortedEndIndicesRed.size(),!0),this.sortYEndIndices_(this.m_sortedEndIndicesBlue,0,this.m_sortedEndIndicesBlue.size(),!1),this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_queuedListRed!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_queuedListBlue!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_function=this.sweepRedBlue_,!0}sweep_(){const e=this.m_sortedEndIndicesRed.read(--this.m_sweepIndexRed),i=e>>1;if(this.isBottom_(e))return this.m_intervalTreeRed.remove(i),this.m_sweepIndexRed!==0||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);const s=Ze.construct(this.m_envelopesRed[i].xmin,this.m_envelopesRed[i].xmax);return this.m_iteratorRed.resetIterator(s,this.m_tolerance),this.m_envelopeHandleA=i,this.m_function=this.iterate_,!0}sweepBruteForce_(){return--this.m_sweepIndexRed==-1?(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1):(this.m_envelopeHandleA=this.m_sweepIndexRed,this.m_sweepIndexBlue=this.m_sweepIndexRed,this.m_function=this.iterateBruteForce_,!0)}sweepRedBlueBruteForce_(){return--this.m_sweepIndexRed==-1?(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1):(this.m_envelopeHandleA=this.m_sweepIndexRed,this.m_sweepIndexBlue=this.m_envelopesBlue.length,this.m_function=this.iterateRedBlueBruteForce_,!0)}sweepRedBlue_(){const e=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed-1),i=this.m_sortedEndIndicesBlue.read(this.m_sweepIndexBlue-1),s=this.getAdjustedValue_(e,!0),n=this.getAdjustedValue_(i,!1);return s>n?this.sweepRed_():s<n?this.sweepBlue_():this.isTop_(e)?this.sweepRed_():this.isTop_(i)?this.sweepBlue_():this.sweepRed_()}sweepRed_(){const e=this.m_sortedEndIndicesRed.read(--this.m_sweepIndexRed),i=e>>1;if(this.isBottom_(e))return this.m_queuedListRed!==-1&&this.m_queuedIndicesRed[i]!==-1?(this.m_queuedEnvelopes.deleteElement(this.m_queuedListRed,this.m_queuedIndicesRed[i]),this.m_queuedIndicesRed[i]=-1):this.m_intervalTreeRed.remove(i),this.m_sweepIndexRed!==0||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);if(this.m_queuedListBlue!==-1&&this.m_queuedEnvelopes.getListSize(this.m_queuedListBlue)>0){let s=this.m_queuedEnvelopes.getFirst(this.m_queuedListBlue);for(;s!==-1;){const n=this.m_queuedEnvelopes.getData(s);this.m_intervalTreeBlue.insert(n),this.m_queuedIndicesBlue[n]=-1;const r=this.m_queuedEnvelopes.getNext(s);this.m_queuedEnvelopes.deleteElement(this.m_queuedListBlue,s),s=r}}if(this.m_intervalTreeBlue.size()>0){const s=Ze.construct(this.m_envelopesRed[i].xmin,this.m_envelopesRed[i].xmax);this.m_iteratorBlue.resetIterator(s,this.m_tolerance),this.m_envelopeHandleA=i,this.m_function=this.iterateBlue_}else this.m_queuedListRed===-1&&(this.m_queuedIndicesRed.length=this.m_envelopesRed.length,this.m_queuedIndicesRed.fill(-1),this.m_queuedListRed=this.m_queuedEnvelopes.createList(1)),this.m_queuedIndicesRed[i]=this.m_queuedEnvelopes.addElement(this.m_queuedListRed,i),this.m_function=this.sweepRedBlue_;return!0}sweepBlue_(){const e=this.m_sortedEndIndicesBlue.read(--this.m_sweepIndexBlue),i=e>>1;if(this.isBottom_(e))return this.m_queuedListBlue!==-1&&this.m_queuedIndicesBlue[i]!==-1?(this.m_queuedEnvelopes.deleteElement(this.m_queuedListBlue,this.m_queuedIndicesBlue[i]),this.m_queuedIndicesBlue[i]=-1):this.m_intervalTreeBlue.remove(i),this.m_sweepIndexBlue!==0||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);if(this.m_queuedListRed!==-1&&this.m_queuedEnvelopes.getListSize(this.m_queuedListRed)>0){let s=this.m_queuedEnvelopes.getFirst(this.m_queuedListRed);for(;s!==-1;){const n=this.m_queuedEnvelopes.getData(s);this.m_intervalTreeRed.insert(n),this.m_queuedIndicesRed[n]=-1;const r=this.m_queuedEnvelopes.getNext(s);this.m_queuedEnvelopes.deleteElement(this.m_queuedListRed,s),s=r}}if(this.m_intervalTreeRed.size()>0){const s=Ze.construct(this.m_envelopesBlue[i].xmin,this.m_envelopesBlue[i].xmax);this.m_iteratorRed.resetIterator(s,this.m_tolerance),this.m_envelopeHandleB=i,this.m_function=this.iterateRed_}else this.m_queuedListBlue===-1&&(this.m_queuedIndicesBlue.length=this.m_envelopesBlue.length,this.m_queuedIndicesBlue.fill(-1),this.m_queuedListBlue=this.m_queuedEnvelopes.createList(0)),this.m_queuedIndicesBlue[i]=this.m_queuedEnvelopes.addElement(this.m_queuedListBlue,i),this.m_function=this.sweepRedBlue_;return!0}iterate_(){if(this.m_envelopeHandleB=this.m_iteratorRed.next(),this.m_envelopeHandleB!==-1)return!1;const e=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed)>>1;return this.m_intervalTreeRed.insert(e),this.m_function=this.sweep_,!0}iterateRed_(){if(this.m_envelopeHandleA=this.m_iteratorRed.next(),this.m_envelopeHandleA!==-1)return!1;this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1;const e=this.m_sortedEndIndicesBlue.read(this.m_sweepIndexBlue)>>1;return this.m_intervalTreeBlue.insert(e),this.m_function=this.sweepRedBlue_,!0}iterateBlue_(){if(this.m_envelopeHandleB=this.m_iteratorBlue.next(),this.m_envelopeHandleB!==-1)return!1;const e=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed)>>1;return this.m_intervalTreeRed.insert(e),this.m_function=this.sweepRedBlue_,!0}iterateBruteForce_(){if(--this.m_sweepIndexBlue==-1)return this.m_function=this.sweepBruteForce_,!0;const e=this.m_envelopesRed[this.m_sweepIndexRed].clone(),i=this.m_envelopesRed[this.m_sweepIndexBlue];return e.inflateCoords(this.m_tolerance,this.m_tolerance),!e.isIntersecting(i)||(this.m_envelopeHandleB=this.m_sweepIndexBlue,!1)}iterateRedBlueBruteForce_(){if(--this.m_sweepIndexBlue==-1)return this.m_function=this.sweepRedBlueBruteForce_,!0;const e=this.m_envelopesRed[this.m_sweepIndexRed].clone(),i=this.m_envelopesBlue[this.m_sweepIndexBlue];return e.inflateCoords(this.m_tolerance,this.m_tolerance),!e.isIntersecting(i)||(this.m_envelopeHandleB=this.m_sweepIndexBlue,!1)}resetRed_(){return this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_intervalTreeRed.size()>0&&this.m_intervalTreeRed.reset(),this.m_queuedListRed!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_bDone=!1,!0}resetBlue_(){return this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_intervalTreeBlue.size()>0&&this.m_intervalTreeBlue.reset(),this.m_queuedListBlue!==-1&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_bDone=!1,!0}nullFunc_(){return K(0),!1}sortYEndIndices_(e,i,s,n){const r=this,o={userSort(l,c,f){r.sortYEndIndicesHelper_(f,l,c,n)},getValue:l=>r.getAdjustedValue_(l,n)};new rd().sort(e,i,s,o)}sortYEndIndicesHelper_(e,i,s,n){e.sort(i,s,(r,o)=>{const l=this.getAdjustedValue_(r,n),c=this.getAdjustedValue_(o,n);return l<c||l===c&&this.isBottom_(r)&&this.isTop_(o)?-1:1})}getAdjustedValue_(e,i){const s=.5*this.m_tolerance;if(i){const r=this.m_envelopesRed[e>>1];return this.isBottom_(e)?r.ymin-s:r.ymax+s}const n=this.m_envelopesBlue[e>>1];return this.isBottom_(e)?n.ymin-s:n.ymax+s}}var ate=vr;class Jo{constructor(e,i){this.tolerance=e!==void 0?e:Number.NaN,this.resolution=i!==void 0?i:Number.NaN}add(e){return new Jo(this.tolerance+e,this.resolution)}scale(e){return new Jo(this.tolerance*e,this.resolution*e)}total(){return this.tolerance+this.resolution}}function rJe(t,e,i,s,n){const r=s*s,o=t.sub(e),l=i.sub(e),c=o.sqrLength(),f=l.sqrLength();if(c<=r||f<=r)return!0;const y=Ui(o.crossProduct(l));return y<=r*c||y<=r*f?o.dotProduct(l)>=0:!1}function oJe(t,e,i){return s=>i===0?(s+t)*e:1*(s-t*e)/e}function mj(t,e){const i=new xe;return t.queryLooseEnvelope(i),i.mergeEnvelope2D(e),i}function G4(t,e){const i=xe.constructEmpty();t.queryLooseEnvelope(i);const s=xe.constructEmpty();return e.queryLooseEnvelope(s),i.mergeEnvelope2D(s),i}function Ege(t,e,i){const s=xe.constructEmpty();return s.setFromPoints(t,e),e7(0,null,s.calculateToleranceFromEnvelope(),i,!1)}function Kn(t,e,i){return e7(0,t,e.calculateToleranceFromEnvelope(),i,!1)}function IE(t,e,i){return e7(1,t,e.calculateToleranceFromEnvelope(),i,!1)}function lte(t,e,i){return IE(t,e.queryInterval(1,0),i)}function bl(t,e,i){const s=xe.constructEmpty();return e.queryEnvelope(s),Kn(t,s,i)}function Ug(t,e,i=!1){return e7(0,t,e.calculateToleranceFromEnvelope(),i,!0).total()}function ME(t,e,i){const s=xe.constructEmpty();return e.queryEnvelope(s),Ug(t,s,i)}function e7(t,e,i,s,n){const r=new Jo(0,0);if(e!==null&&(r.tolerance=e.getTolerance(t),(!n||s)&&e!==null)){const o=e.getResolution(t);r.resolution=o,s&&(r.resolution*=2)}return s&&(i*=4,r.tolerance*=1.01,r.resolution*=1.01),r.total()<i?new Jo(i,0):r}function Bu(t){return Math.sqrt(2)*(2*t.tolerance+t.resolution)}function Cge(t){return Math.sqrt(2)*(t.tolerance+t.resolution)}function bf(t){return t>=3}function aJe(t,e){const i=[0];return t.getImpl().getIsSimple(e,i)>=3}function Pge(t,e){t.getImpl().setIsSimple(3,e)}function lJe(t,e,i,s){if(Ui(e.x-t.x)+Ui(e.y-t.y)<=i*i){const n=t.z,r=e.z;return t5(n,r,s)}return!1}function hg(t){return t>=4}function uJe(t,e){return t===me.enumPolygon?bf(e):e>=1}function cJe(t,e,i){const s=xe.constructEmpty(),n=xe.constructEmpty();t.queryLooseEnvelope(s),e.queryLooseEnvelope(n),s.inflateCoords(i,i),n.inflateCoords(i,i);const r=xe.constructEmpty();r.setCoords({env2D:s}),r.intersect(n);const o=t.querySegmentIterator(),l=e.querySegmentIterator(),c=xe.constructEmpty(),f=xe.constructEmpty(),y=new n5;y.setTolerance(i);let _=!1;for(y.startRedConstruction();o.nextPath();)for(;o.hasNextSegment();)o.nextSegment().queryLooseEnvelope(c),c.isIntersecting(r)&&(_=!0,y.addRedEnvelope(o.getStartPointIndex(),c));if(y.endRedConstruction(),!_)return null;let x=!1;for(y.startBlueConstruction();l.nextPath();)for(;l.hasNextSegment();)l.nextSegment().queryLooseEnvelope(f),f.isIntersecting(r)&&(x=!0,y.addBlueEnvelope(l.getStartPointIndex(),f));return y.endBlueConstruction(),x?y:null}function hJe(t,e,i,s,n){t.getGeometryType(),e.getGeometryType();const r=xe.constructEmpty(),o=xe.constructEmpty();t.queryLooseEnvelope(r),e.queryLooseEnvelope(o),r.inflateCoords(i,i),o.inflateCoords(i,i);const l=xe.constructEmpty();l.setCoords({env2D:r}),l.intersect(o);const c=new n5;c.setTolerance(i);let f=!1;c.startRedConstruction();for(let _=0,x=t.getPathCount();_<x;_++)t.queryLoosePathEnvelope(_,r),r.isIntersecting(l)&&(f=!0,c.addRedEnvelope(_,r));if(c.endRedConstruction(),!f)return null;let y=!1;c.startBlueConstruction();for(let _=0,x=e.getPathCount();_<x;_++)e.queryLoosePathEnvelope(_,o),o.isIntersecting(l)&&(y=!0,c.addBlueEnvelope(_,o));return c.endBlueConstruction(),y?c:null}function ute(t,e,i){const s=xe.constructEmpty(),n=xe.constructEmpty();t.queryLooseEnvelope(s),e.queryEnvelope(n),s.inflateCoords(i,i),n.inflateCoords(i,i);const r=xe.constructEmpty();r.setCoords({env2D:s}),r.intersect(n);const o=t.querySegmentIterator(),l=new n5;l.setTolerance(i);let c=!1;for(l.startRedConstruction();o.nextPath();)for(;o.hasNextSegment();)o.nextSegment().queryLooseEnvelope(s),s.isIntersecting(r)&&(c=!0,l.addRedEnvelope(o.getStartPointIndex(),s));if(l.endRedConstruction(),!c)return null;let f=!1;l.startBlueConstruction();for(let y=0,_=e.getPointCount();y<_;y++){const x=e.getXY(y);r.contains(x)&&(f=!0,l.addBlueEnvelope(y,xe.construct(x.x,x.y,x.x,x.y)))}return l.endBlueConstruction(),f?l:null}function dJe(t,e,i){const s=xe.constructEmpty(),n=xe.constructEmpty();t.queryEnvelope(s),e.queryEnvelope(n),s.inflateCoords(i,i),n.inflateCoords(i,i);const r=xe.constructEmpty();r.setCoords({env2D:s}),r.intersect(n);const o=new n5;o.setTolerance(i);let l=!1;o.startRedConstruction();const c=new Y;for(let _=0,x=t.getPointCount();_<x;_++)t.queryXY(_,c),r.contains(c)&&(l=!0,o.addRedEnvelope(_,xe.construct(c.x,c.y,c.x,c.y)));if(o.endRedConstruction(),!l)return null;let f=!1;o.startBlueConstruction();const y=new Y;for(let _=0,x=e.getPointCount();_<x;_++)e.queryXY(_,y),r.contains(y)&&(f=!0,o.addBlueEnvelope(_,xe.construct(y.x,y.y,y.x,y.y)));return o.endBlueConstruction(),f?o:null}function fJe(t){const e=new xe;return t.queryLooseEnvelope(e),e.inflateCoords(1,1),pJe(t,e)}function pJe(t,e,i){const s=new xe;if(t.queryLooseEnvelope(s),s.isEmpty())return null;t.getGeometryType();const n=new Lo(s,8);let r=-1;const o=new xe;let l=!1;do for(let c=0,f=t.getPathCount();c<f;c++)if(t.queryLoosePathEnvelope(c,o),o.isIntersecting(e)){if(r=n.insertEx(c,o,r),r===-1){l&&bt("build_quad_tree_for_paths"),s.assign(t.calculateEnvelope2D(!1)),l=!0,n.reset(s,8);break}l=!1}while(l);return n}function z2(t,e){if(!e){const c=new xe;t.queryLooseEnvelope(c);const f=new Lo(c,8);let y=-1;const _=new xe,x=t.querySegmentIterator();let S=!1;for(;x.nextPath();)for(;x.hasNextSegment();){const P=x.nextSegment(),A=x.getStartPointIndex();if(P.queryLooseEnvelope(_),y=f.insertEx(A,_,y),y===-1){S&&bt(""),c.assign(t.calculateEnvelope2D(!1)),S=!0,f.reset(c,8),x.resetToFirstPath();break}}return f}const i=new xe;t.queryLooseEnvelope(i);const s=new Lo(i,8);let n=-1;const r=new xe,o=t.querySegmentIterator();let l=!1;for(;o.nextPath();)for(;o.hasNextSegment();){const c=o.nextSegment(),f=o.getStartPointIndex();if(c.queryLooseEnvelope(r),r.isIntersecting(e)&&(n=s.insertEx(f,r,n),n===-1)){l&&bt(""),i.assign(t.calculateEnvelope2D(!1)),l=!0,s.reset(i,8),o.resetToFirstPath();break}}return s}function cte(t,e){if(e){const i=new Lo(e,8),s=new Y,n=new xe;let r=!1;for(let o=0;o<t.getPointCount();o++)s.setCoordsPoint2D(t.getXY(o)),e.contains(s)&&(n.setCoords({pt:s}),i.insert(o,n)!==-1||(r&&bt(""),r=!0,i.reset(t.calculateEnvelope2D(),8),o=-1));return i}return K(0),null}function hte(t,e,i,s,n){let r=!1;const o=n.vmin,l=n.vmax;for(let c=i;c<e;c+=s){const f=t.read(c);f<o?(r=!0,t.write(c,o)):f>l&&(r=!0,t.write(c,l))}return r}function rz(t,e,i,s){if(!t.hasAttribute(i))return!1;const n=t.getGeometryType();if(n===me.enumGeometryCollection){const r=t,o=r.getGeometryCount();let l=0;for(let c=0;c<o;++c)l|=rz(r.getGeometry(c),e,i,s)?1:0;return!!l}if(el(n)){const r=t,o=ate.getPersistence(i),l=ate.getComponentCount(i),c=r.getPointCount();if(o===1){const f=hte(r.getAttributeStreamRef(i),c*l,s,l,e);return f&&r.notifyModified(),f}if(o===2){const f=hte(r.getAttributeStreamRef(i),c*l,s,l,e);return f&&r.notifyModified(),f}bt("snap_coordinate not implemented")}if(n===me.enumEnvelope){const r=t,o=r.queryInterval(i,s);let l=!1;return o.vmin<e.vmin&&(l=!0,o.vmin=e.vmin),o.vmax>e.vmax&&(l=!0,o.vmax=e.vmax),l&&r.setIntervalEnvelope(i,s,o),l}if(n===me.enumPoint){const r=t;let o=r.getAttributeAsDbl(i,s),l=!1;return o<e.vmin&&(l=!0,o=e.vmin),o>e.vmax&&(l=!0,o=e.vmax),l&&r.setAttributeBasic(i,s,o),l}if(Dn(n)){const r=t;let o=r.getStartAttributeAsDbl(i,s),l=!1;return o<e.vmin&&(l=!0,o=e.vmin),o>e.vmax&&(l=!0,o=e.vmax),l&&r.setStartAttribute(i,s,o),o=r.getEndAttributeAsDbl(i,s),o<e.vmin&&(l=!0,o=e.vmin),o>e.vmax&&(l=!0,o=e.vmax),l&&r.setEndAttribute(i,s,o),l}bt("snap_coordinate not implemented")}function mJe(t,e,i,s,n){(e<0||i<0||s<1||e+s*(i-1)+1>t.size())&&Je("Index out of bound");for(let r=e,o=e+s*(i-1)+1;r<o;r+=s)t.writeAsDbl(r,n(t.readAsDbl(r)))}function gJe(t,e){let i=n2(t);const s=e.length/vo();for(let n=0;n<e.length;++n){const r=Math.trunc(i*s);i=n2(i);const o=Math.trunc(i*s),l=e[r];e[r]=e[o],e[o]=l}}function yJe(t,e,i){const s=t.getDescription().getTotalComponentCount();K(s<=i),t.setX(e[0]),t.setY(e[1]),dn(t.getAttributeArray(),e,0,2,s-2)}var Gn=vr;const Tge="can not assign an empty point to a vertex";class Ige{constructor(e){if(this.m_accelerators=null,e!==void 0&&e.move)this.m_description=e.move.m_description,e.move.m_description=jo(),this.m_vertexAttributes=e.move.m_vertexAttributes,e.move.m_vertexAttributes=new V4,this.m_envelopeData=e.move.m_envelopeData,e.move.m_envelopeData=new Ec,this.m_pointCount=e.move.m_pointCount,this.m_reservedPointCount=e.move.m_reservedPointCount,this.m_flags=e.move.m_flags,this.m_bFillRule=e.move.m_bFillRule,this.m_bPathStarted=e.move.m_bPathStarted,this.m_bPolygon=e.move.m_bPolygon,this.m_simpleTolerance=e.move.m_simpleTolerance;else{const i=e!==void 0&&e.vd?e.vd:jo();this.m_description=i,this.m_vertexAttributes=new V4,this.m_envelopeData=new Ec,this.m_pointCount=0,this.m_reservedPointCount=-1,this.m_flags=4063,this.m_bFillRule=this.m_bPathStarted=this.m_bPolygon=!1,this.m_simpleTolerance=0,e!==void 0&&e.copy&&e.copy.copyTo(this)}}equalsBase(e,i){if(!el(e.getGeometryType()))return!1;const s=e;if(this===s)return!0;if(!this.m_description.equals(s.getDescription())||this.isEmptyImpl()!==s.isEmptyImpl())return!1;if(this.isEmptyImpl())return!0;const n=this.getPointCount();if(n!==s.getPointCount())return!1;for(let r=0;r<this.m_description.getAttributeCount();r++){const o=this.m_description.getSemantics(r),l=this.getAttributeStreamRef(o),c=s.getAttributeStreamRef(o),f=Gn.getComponentCount(o);if(!l.equals(c,0,n*f,i))return!1}if(i){if(!this.equalsImplTol(e,i))return!1}else if(!this.equalsImpl(e))return!1;return!0}vertexCount(){return K(0),0}transformAttribute(e,i,s,n,r){this.addAttribute(e),this.isEmpty()||s===0&&n===1||(mJe(this.getAttributeStreamRef(e),i,this.getPointCount(),Gn.getComponentCount(e),oJe(s,n,r)),this.notifyModified())}getDescription(){return this.m_description}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}mergeVertexDescriptionImpl(e){const i=i5(this.getDescription(),e);this.assignVertexDescription(i)}mergeVertexDescription(e){this.m_description!==e&&(this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=s5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){if(!this.m_description.hasAttribute(e))return;const i=pj(this.m_description,e);this.assignVertexDescription(i)}dropAllAttributes(){const e=jo();e!==this.m_description&&this.assignVertexDescription(e)}getAttributeStreamRef(e){this.throwIfEmpty(),this.m_description.hasAttribute(e)||Je("AttributeStream : Geometry does not have the attribute");const i=this.m_description.getAttributeIndex(e);return this.m_vertexAttributes.get(i)}setAttributeStreamRef(e,i){i||Je("stream"),i&&Gn.getPersistence(e)!==i.getPersistence()&&Je(""),this.addAttribute(e);const s=this.m_description.getAttributeIndex(e);this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),this.m_vertexAttributes.set(s,i),this.notifyModifiedFlags(2001)}notifyModifiedFlags(e){e===65535&&(this.m_reservedPointCount=-1,this.notifyModifiedAllImpl()),this.setDirtyFlagProtected(e,!0),this.clearAccelerators(),32&e&&this.verifyAllStreamsAfterSizeChange()}notifyModified(){this.notifyModifiedFlags(2001)}getPointCount(){return this.m_pointCount}getPointByVal(e,i){const s=i;s.assignVertexDescription(this.m_description);for(let n=0;n<this.m_description.getAttributeCount();n++){const r=this.m_description.getSemantics(n);for(let o=0,l=Gn.getComponentCount(r);o<l;o++){const c=this.m_vertexAttributes.get(n).readAsDbl(l*e+o);s.setAttributeBasic(r,o,c)}}}setPointByVal(e,i){const s=i;s.isEmpty()&&Je(Tge);const n=s.getDescription();n!==this.m_description&&this.mergeVertexDescription(n);const r=this.m_vertexAttributes.get(0);r.write(2*e,s.getX()),r.write(2*e+1,s.getY());for(let o=1,l=this.m_description.getAttributeCount();o<l;o++){const c=this.m_description.getSemantics(o),f=Gn.getComponentCount(c);for(let y=0;y<f;y++){const _=s.getAttributeAsDbl(c,y);this.m_vertexAttributes.get(o).writeAsDbl(e*f+y,_)}}this.notifyModifiedFlags(2001)}setPointByValFromArray(e,i,s,n){K(0)}getPointByValAsArray(e,i,s,n){K(0)}isEmpty(){return this.isEmptyImpl()}isEmptyImpl(){return this.m_pointCount===0}getAttributeAsDbl(e,i,s){const n=Gn.getComponentCount(e);s>=n&&Mi("");const r=this.m_description.getAttributeIndex(e);return r>=0?this.m_vertexAttributes.get(r).readAsDbl(i*n+s):Gn.getDefaultValue(e)}queryAttributeAsDbl(e,i,s,n){const r=Gn.getComponentCount(e);n<r&&Mi("");const o=this.m_description.getAttributeIndex(e);if(o>=0){const l=i*r,c=this.m_vertexAttributes.get(o);for(let f=0;f<r;f++)s[f]=c.readAsDbl(l+f)}else{const l=Gn.getDefaultValue(e);for(let c=0;c<r;c++)s[c]=l}}getAttributeAsInt(e,i,s){return Math.trunc(this.getAttributeAsDbl(e,i,s))}queryAttributeAsInt(e,i,s,n){K(0)}setAttribute(e,i,s,n){const r=Gn.getComponentCount(e);s>=r&&Mi(""),this.addAttribute(e);const o=this.m_description.getAttributeIndex(e);this.notifyModifiedFlags(2001),this.m_vertexAttributes.get(o).writeAsDbl(i*r+s,n)}setAttributeFromArray(e,i,s,n){(i<0||i>=this.m_pointCount)&&Mi("");const r=Gn.getComponentCount(e);n!==r&&Mi(""),this.addAttribute(e);const o=this.m_description.getAttributeIndex(e);this.notifyModifiedFlags(2001);const l=this.m_vertexAttributes.get(o);for(let c=0;c<r;++c)l.writeAsDbl(i*r+c,s[c])}getXY(e){return this.m_vertexAttributes.get(0).readPoint2D(2*e)}queryXY(e,i){return this.m_vertexAttributes.get(0).queryPoint2D(2*e,i)}setXY(e,i){this.m_vertexAttributes.get(0).writePoint2D(2*e,i),this.notifyModifiedFlags(2001)}setXYCoords(e,i,s){const n=this.m_vertexAttributes.get(0);n.write(2*e,i),n.write(2*e+1,s),this.notifyModifiedFlags(2001)}getXYZ(e){const i=this.m_vertexAttributes.get(0),s=ii.getNAN();return s.x=i.read(2*e),s.y=i.read(2*e+1),this.m_description.hasAttribute(1)?s.z=this.m_vertexAttributes.get(1).read(e):s.z=Gn.getDefaultValue(1),s}setXYZ(e,i){this.addAttribute(1),this.notifyModifiedFlags(2001);const s=this.m_vertexAttributes.get(0);s.write(2*e,i.x),s.write(2*e+1,i.y),this.m_vertexAttributes.get(1).write(e,i.z)}queryEnvelope(e){e instanceof xe||e instanceof tl?this.updateEnvelope(e):(this.updateAllDirtyIntervals(!0),this.m_envelopeData.copyTo(this.m_description,e))}queryLooseEnvelope(e){this.updateLooseEnvelope(e)}queryInterval(e,i){const s=Ze.constructEmpty();return this.isEmptyImpl()||(this.updateAllDirtyIntervals(!0),this.m_envelopeData.queryInterval(this.m_description,e,i,s)),s}setAttributeBasic(e,i,s){this.setAttributeImpl(e,i,s)}setAttributeImpl(e,i,s){if(this.addAttribute(e),this.isEmpty())return;let n=!1;const r=Gn.getComponentCount(e),o=this.getAttributeStreamRef(e),l=Number.isNaN(s);if(o.getPersistence()===1){const c=o;for(let f=i,y=this.m_pointCount*r;f<y;f+=r){const _=c.read(f);(l||_===s)&&Number.isNaN(_)||(c.write(f,s),n=!0)}}else for(let c=i,f=this.m_pointCount*r;c<f;c+=r)o.readAsDbl(c)!==s&&(o.writeAsDbl(c,s),n=!0);n&&this.notifyModifiedFlags(2001)}replaceNaNs(e,i){if(this.addAttribute(e),this.isEmpty())return;let s=!1;const n=Gn.getComponentCount(e),r=this.getAttributeStreamRef(e);for(let o=0;o<n;o++)if(r.getPersistence()===1){const l=r;for(let c=0,f=this.m_pointCount*n;c<f;c++){const y=l.read(c);Number.isNaN(y)&&(l.write(c,i),s=!0)}}else for(let l=0,c=this.m_pointCount*n;l<c;l++){const f=r.readAsDbl(l);Number.isNaN(f)&&(r.writeAsDbl(l,i),s=!0)}s&&this.notifyModifiedFlags(2001)}calculateLength3D(e){return K(0),0}setEnvelopeForImport(e){this.m_description.equals(e.getDescription())||Je(""),this.m_envelopeData=new Ec({moveEnv:e}),this.setDirtyFlagProtected(192,!1)}copyTo(e){e.getGeometryType()!==this.getGeometryType()&&Je(""),this!==e&&this.copyToUnchecked(e,!1)}queryCoordinates(e,i,s,n){let r=n<0?this.m_pointCount:n;if(r=Math.min(r,s+i),(s<0||r<s||this.m_pointCount>0&&s>=this.m_pointCount)&&Je(""),this.m_pointCount===0)return r;const o=this.getAttributeStreamRef(0);for(let l=2*s,c=2*r,f=0;l<c;l+=2,f++)o.queryPoint2D(l,e[f]);return r}queryCoordinates3D(e,i,s,n){let r=n<0?this.m_pointCount:n;if(r=Math.min(r,s+i),(s<0||r<s||this.m_pointCount>0&&s>=this.m_pointCount)&&Je(""),this.m_pointCount===0)return r;const o=this.getAttributeStreamRef(0);let l=null;const c=Gn.getDefaultValue(1),f=this.m_description.hasAttribute(1);f&&(l=this.getAttributeStreamRef(1));let y=0;for(let _=s;_<r;_++,y++)e[y].x=o.read(2*_),e[y].y=o.read(2*_+1),e[y].z=f?l.read(_):c;return r}clearAndSetDirtyFlagProtected(e,i){let s=0;const n=e&~i,r=i|n;s=this.m_flags,(s&r)!==i&&(this.m_flags=s&~n|i)}getIsSimple(e,i){i[0]=0;let s=-1;const n=this.m_flags,r=this.m_simpleTolerance;return 1&n||(s=(14&n)>>1,i[0]=r,r<e&&(s=-1)),s}setIsSimple(e,i,s=!1){if(e===2?K(this.getGeometryType()===me.enumPolyline):e===1?K(this.getGeometryType()===me.enumMultiPoint||this.getGeometryType()===me.enumPolyline):e===3&&K(this.getGeometryType()===me.enumPolygon),e===-1)this.setDirtyFlagProtected(17,!0);else{let n=e<<1;s||(n|=16),this.clearAndSetDirtyFlagProtected(31,n),this.m_simpleTolerance!==i&&(this.m_simpleTolerance=i)}}attributeStreamIsAllocated(e){this.throwIfEmpty();const i=this.m_description.getAttributeIndex(e);return i>=0&&this.m_vertexAttributes.get(i)!==null}capacity(){return this.m_reservedPointCount===-1&&this.m_pointCount===0?0:this.m_reservedPointCount}getDescriptionImpl(){return this.m_description}copyToUnchecked(e,i=!1){i&&this.hasDirtyFlag(32)&&JZe("Cannot do shallow clone on unprepared geometry");const s=e,n=this.getGeometryType(),r=s.getGeometryType();K(n===r||n===me.enumPolygon&&r===me.enumPolyline,"failure in copyToUnchcked"),s.clearAccelerators(),s.m_description=this.m_description,s.m_vertexAttributes.destroyAndSetSize(0),s.m_envelopeData.releaseAttributes();const o=this.m_description.getAttributeCount(),l=new V4;if(!this.m_vertexAttributes.empty()){l.destroyAndSetSize(o);for(let c=0;c<o;c++)if(this.m_vertexAttributes.get(c))if(i)l.set(c,this.m_vertexAttributes.get(c));else{const f=Gn.getComponentCount(this.m_description.getSemantics(c));l.set(c,this.m_vertexAttributes.get(c).restrictedClone(this.getPointCount()*f))}}if(this.m_envelopeData.copyToIfNotNull(this.m_description,s.m_envelopeData),s.m_flags=this.m_flags,s.m_simpleTolerance=this.m_simpleTolerance,n!==r){const c=[0];s.getIsSimple(0,c)>=3?s.setIsSimple(1,c[0]):s.setIsSimple(-1,0)}s.m_vertexAttributes.swap(l),l.destroyAndSetSize(0),s.m_pointCount=this.m_pointCount,s.hasDirtyFlag(32)?(K(!i),s.m_reservedPointCount=-1):s.m_reservedPointCount=s.m_pointCount;try{this.copyToImpl(s,i)}catch(c){throw s.setEmpty(),c}s.verifyAllStreamsAfterSizeChange()}buildRasterizedGeometryAccelerator(e,i){return!1}getAccelerators(){return this.m_accelerators}clearAccelerators(){this.m_accelerators&&this.m_accelerators.release(),this.m_accelerators=null}ensureUniqueAccelerators(){if(this.m_accelerators&&!this.m_accelerators.uniqueUse()){const e=this.m_accelerators.clone();this.m_accelerators.release(),this.m_accelerators=e}}interpolateTwoVertices(e,i,s,n){(e<0||e>=this.m_pointCount)&&Mi(""),(i<0||i>=this.m_pointCount)&&Mi(""),n.assignVertexDescription(this.m_description);const r=new Array(Gn.maxComponentCount()),o=new Array(Gn.maxComponentCount()),l=fy();let c=0;for(let f=0;f<this.m_description.getAttributeCount();f++){const y=this.m_description.getSemantics(f),_=Gn.getInterpolation(y),x=Gn.getComponentCount(y),S=Gn.getDefaultValue(y);this.queryAttributeAsDbl(y,e,r,x),this.queryAttributeAsDbl(y,i,o,x),K(c+x<=dj),ez(_,r,o,l,c,x,s,S),c+=x}yJe(n,l,c)}getShortestDistance(e,i){return Y.distance(this.getXY(e),this.getXY(i))}getShortestSqrDistance(e,i){return Y.sqrDistance(this.getXY(e),this.getXY(i))}resizeImpl(e){if(e<0&&Je(),(e=Math.ceil(e))===this.m_pointCount)return;this.m_pointCount=e;const i=this.m_pointCount<=this.m_reservedPointCount?2001:4095;this.notifyModifiedFlags(i)}verifyPointIndex(e){K(0)}assignVertexDescriptionImpl(e){if(!this.m_vertexAttributes.empty()){const i=JA();QA(e,this.m_description,i);const s=new V4;s.destroyAndSetSize(e.getAttributeCount());for(let n=0;n<e.getAttributeCount();n++){const r=i[n];r!==-1?s.set(n,this.m_vertexAttributes.get(r)):this.m_reservedPointCount=-1}s.swap(this.m_vertexAttributes)}this.m_description=e,this.m_envelopeData.releaseAttributes(),this.notifyModifiedFlags(4095)}hasDirtyFlag(e){return!!(this.m_flags&e)}setDirtyFlagProtected(e,i){i?this.m_flags|=e:this.m_flags&=~e}notifyModifiedAllImpl(){}verifyAllStreamsAfterSizeChange(){this.hasDirtyFlag(32)&&this.verifyAllStreamsAfterSizeChangeImpl()}verifyAllStreamsAfterSizeChangeImpl(){if(this.hasDirtyFlag(32)){if(this.m_reservedPointCount<this.m_pointCount){this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),this.m_reservedPointCount=Number.MAX_SAFE_INTEGER;let e=0;e=this.m_pointCount<4?3:this.m_pointCount<=128?2*this.m_pointCount:(4*this.m_pointCount+2)/3;for(let i=0;i<this.m_description.getAttributeCount();i++){const s=this.m_description.getSemantics(i);let n=0;if(this.m_vertexAttributes.get(i)!==null){const r=Gn.getComponentCount(s);n=this.m_vertexAttributes.get(i).size()/r,n<this.m_pointCount&&(this.m_vertexAttributes.get(i).resize(e*r,Gn.getDefaultValue(s)),n=e)}else this.m_vertexAttributes.set(i,Sge(s,e)),n=e;n<this.m_reservedPointCount&&(this.m_reservedPointCount=n)}}this.verifyStreamsAfterSizeChangeExtraImpl(),this.setDirtyFlagProtected(32,!1)}}verifyStreamsAfterSizeChangeExtraImpl(){}updateAllDirtyIntervals(e){if(e?this.hasDirtyFlag(192):this.hasDirtyFlag(128)){if(this.isEmpty())return this.hasDirtyFlag(192)&&this.m_envelopeData.setEmpty(this.m_description),void this.setDirtyFlagProtected(192,!1);const i=this.updateXYImpl(e),s=new lr({vd:this.m_description});s.setEnvelope(i);for(let n=1;n<this.m_description.getAttributeCount();n++){const r=this.m_description.getSemantics(n),o=Gn.getComponentCount(r),l=this.m_vertexAttributes.get(n);for(let c=0;c<o;c++){const f=new Ze;f.setEmpty();for(let y=0;y<this.m_pointCount;y++){const _=l.readAsDbl(y*o+c);f.mergeCoordinate(_)}s.setIntervalEnvelope(r,c,f)}}(e?this.hasDirtyFlag(192):this.hasDirtyFlag(128))&&(this.m_envelopeData=new Ec({moveEnv:s}),this.clearDirtyIntervalsFlag(e))}}updateXYImpl(e){const i=xe.constructEmpty(),s=this.m_vertexAttributes.get(0);return i.mergePointsInterleaved(s,0,this.m_pointCount),i}updateEnvelope3D(e){K(0)}updateLooseEnvelope(e){this.updateAllDirtyIntervals(!1),e instanceof xe?e.assign(this.m_envelopeData.m_envelope2D):this.m_envelopeData.queryEnvelope3D(this.m_description,e)}updateEnvelope(e){this.updateAllDirtyIntervals(!0),e.assign(this.m_envelopeData.m_envelope2D)}setEmptyImpl(){this.m_pointCount=0,this.m_reservedPointCount=-1,this.m_vertexAttributes.destroyAndSetSize(0),this.notifyModifiedFlags(4095)}clearDirtyIntervalsFlag(e){this.setDirtyFlagProtected(192,!1)}reserveImpl(e,i){if(e<0&&Je(""),e===0)return;let s=e=Math.ceil(e);if(this.m_reservedPointCount<s){this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),i?(this.m_vertexAttributes.get(0)===null&&this.m_vertexAttributes.set(0,$9(0,0)),this.m_vertexAttributes.get(0).resizeRounded(2*s),s=this.m_vertexAttributes.get(0).size()>>1):this.m_vertexAttributes.get(0)===null?this.m_vertexAttributes.set(0,$9(0,s)):this.m_vertexAttributes.get(0).resize(2*s);for(let n=1;n<this.m_description.getAttributeCount();n++){const r=this.m_description.getSemantics(n),o=Gn.getComponentCount(r);this.m_vertexAttributes.get(n)!==null?this.m_vertexAttributes.get(n).resize(s*o):this.m_vertexAttributes.set(n,$9(r,s))}this.reserveImplImpl(s,i),this.m_reservedPointCount=s}}reserveRounded(e){e<0&&Je(),e=Math.ceil(e),this.reserveImpl(e,!0)}reserveImplImpl(e,i){}throwIfEmpty(){this.isEmptyImpl()&&HA("")}}class Jn extends Ige{constructor(e){super(e),e&&(e.points?this.addPoints2D(e.points,e.pointsSize,0,-1):e.point&&this.add(e.point))}assignCopy(e){return K(0),this}assignMove(e){return K(0),this}insertPoint2D(e,i){K(0)}insertPoint(e,i){K(0)}insertPoints(e,i,s){K(0)}insertPoints2D(e,i,s){K(0)}removePoints(e,i){K(0)}removePoint(e){for(let i=0,s=this.m_description.getAttributeCount();i<s;i++)if(this.m_vertexAttributes.get(i)){const n=this.m_description.getSemantics(i),r=vr.getComponentCount(n);this.m_vertexAttributes.get(i).eraseRange(r*e,r,r*this.m_pointCount)}this.m_pointCount--,this.m_reservedPointCount>0&&this.m_reservedPointCount--,this.notifyModifiedFlags(2001)}calculateEnvelope2D(){return K(0),new xe(0,0,0,0)}resizeNoInit(e){this.resizeImpl(e)}resizeAndInitNonPositionAttributes(e){const i=this.m_pointCount;if(this.resizeImpl(e),this.m_pointCount>i)for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s),o=vr.getDefaultValue(r),l=vr.getComponentCount(r);this.m_vertexAttributes.get(s).insertRange(l*i,o,l*(this.m_pointCount-i),l*i)}}queryCoordinates3D(e,i,s,n){return K(0),0}queryAttributeAsInt(e,i,s,n){K(0)}add(e){e.isEmpty()&&Je(Tge),this.resizeAndInitNonPositionAttributes(this.m_pointCount+1),this.setPointByVal(this.m_pointCount-1,e)}addXY(e,i){this.resizeAndInitNonPositionAttributes(this.m_pointCount+1);const s=new Y(e,i);this.setXY(this.m_pointCount-1,s)}addXYZ(e,i,s){this.resizeAndInitNonPositionAttributes(this.m_pointCount+1);const n=new ii;n.setCoords(e,i,s),this.setXYZ(this.m_pointCount-1,n)}addPoint2D(e){this.addXY(e.x,e.y)}addPoint3D(e){this.addXYZ(e.x,e.y,e.z)}addPoints(e,i,s){this===e&&Je("Multi_point_impl.add");const n=s<0?e.getPointCount():s;if((i<0||i>e.getPointCount()||n<i)&&Je(""),i===n)return;const r=e.getDescription();this.mergeVertexDescription(r);const o=n-i,l=this.m_pointCount;this.resizeNoInit(this.m_pointCount+o);for(let c=0,f=this.m_description.getAttributeCount();c<f;c++){const y=this.m_description.getSemantics(c),_=vr.getComponentCount(y),x=this.getAttributeStreamRef(y);if(r.hasAttribute(y)){const S=e.getAttributeStreamRef(y);x.insertRangeFromStream(l*_,S,i*_,o*_,!0,1,l*_)}else{const S=vr.getDefaultValue(y);x.insertRange(l*_,S,o*_,l*_)}}}addPoints2D(e,i,s,n){let r=i;const o=n<0?r:n;if((r<0||s<0||s>r||o<s)&&Je(""),s===o)return;r=o-s;const l=this.m_pointCount;this.resizeAndInitNonPositionAttributes(this.m_pointCount+r);const c=this.getAttributeStreamRef(0);for(let f=0;f<r;++f)c.writePoint2D(2*(l+f),e[s+f]);this.notifyModifiedFlags(2001)}addPoints3D(e,i,s,n){K(0)}getGeometryType(){return me.enumMultiPoint}getDimension(){return 0}createInstance(){return new Jn({vd:this.getDescription()})}setEmpty(){this.setEmptyImpl()}applyTransformation(e){if(this.isEmpty()||e.isIdentity())return;const i=this.m_vertexAttributes.get(0);e instanceof _i?i.applyTransformation(e,0,this.m_pointCount):K(0),this.notifyModifiedFlags(2001)}calculateArea2D(){return K(0),0}calculateLength2D(){return K(0),0}calculateLength3D(e){return K(0),0}equals(e,i){return e.getGeometryType()===me.enumMultiPoint&&this.equalsBase(e,i)}queryEnvelope(e){e instanceof lr?(this.updateAllDirtyIntervals(!0),this.m_envelopeData.copyTo(this.m_description,e)):e instanceof xe?this.updateEnvelope(e):K(0)}getImpl(){return this}getBoundary(){return null}reserve(e){this.reserveImpl(e)}clone(){const e=this.createInstance();return this.copyTo(e),e}swap(e){K(0)}buildQuadTreeAccelerator(e){return!1}getHashCodeImpl(){return K(0),0}equalsImpl(e){return!0}equalsImplTol(e,i){return!0}copyToImpl(e,i){}}Jn.type=me.enumMultiPoint;class Gr{constructor(){this.envAabb=xe.constructEmpty(),this.envRot=xe.constructEmpty()}static constructEmpty(){return new Gr}width(){return this.envAabb.width()}height(){return this.envAabb.height()}maxDim(){return Math.max(this.width(),this.height())}isEmpty(){return K(0),!1}setEmpty(){this.envAabb.setEmpty(),this.envRot.setEmpty()}setCoords(e){this.envAabb.setCoords(e),this.envRot.setCoords({x:e3(e),y:t3(e)})}setFromPoints(e,i){this.setEmpty(),this.mergePoints(e,i)}mergePoint2D(e){K(0)}mergeNe(e){this.envAabb.mergeNe(e),this.envRot.mergeNeCoords(e3(e),t3(e))}mergeCoords(e,i){K(0)}mergeW(e){K(0)}mergeE2D(e){K(0)}mergePoints(e,i){this.envAabb.mergePoints(e,i);for(let s=0;s<i;){if(!this.envRot.isEmpty()){for(let n=s;n<i;n++){const r=e3(e[n]),o=t3(e[n]);this.envRot.mergeNeCoords(r,o)}break}{const n=e3(e[s]),r=t3(e[s]);this.envRot.setCoords({x:n,y:r}),s++}}}isIntersectingPoint2D(e){return!(!this.envAabb.contains(e)||!this.envRot.containsCoords(e3(e),t3(e)))}isIntersectingW(e){return this.envAabb.isIntersecting(e.envAabb)&&this.envRot.isIntersecting(e.envRot)}containsW(e){return!(!this.envAabb.containsEnvelope(e.envAabb)||!this.envRot.containsEnvelope(e.envRot))}containsPoint2D(e){return this.isIntersectingPoint2D(e)}intersectW(e){const i=this.envAabb.intersect(e.envAabb),s=this.envRot.intersect(e.envRot);return i&&!s&&this.envAabb.setEmpty(),s&&!i&&this.envRot.setEmpty(),i&&s}inflate(e){this.envAabb.inflateCoords(e,e);const i=e*qKe();this.envRot.inflateCoords(i,i),i<0&&Gr.st_reduceEmpty(this)}sqrMaxMinDistance(e){return K(0),0}sqrMinDistance(e){return K(0),0}sqrMaxDistance(e){return K(0),0}getEnvelope2D(){return K(0),new xe(this.envAabb)}static st_reduceEmpty(e){const i=e.envAabb.isEmpty(),s=e.envRot.isEmpty();i&&!s?e.envRot.setEmpty():s&&!i&&e.envAabb.setEmpty()}}function e3(t){return t.x-t.y}function t3(t){return t.x+t.y}class vJe{isIdentity(){return K(0),!0}}class Mge{constructor(e){this.m_factor=1,this.m_wkid=0,this.m_peUnit=null,e&&(this.m_peUnit=e,this.m_factor=e.getUnitFactor(),this.m_wkid=e.getCode(),this.m_wkid<0&&(this.m_wkid=0))}getName(){return this.m_peUnit.getName()}getID(){return this.m_wkid}getConversionFactor(e){return this.getUnitType()!==e.getUnitType()&&Je("unit type mismatch"),this.getUnitToBaseFactor()/e.getUnitToBaseFactor()}getUnitToBaseFactor(){return this.m_factor}getHashCode(){return Va(ef(this.getUnitType()),ef(this.getUnitToBaseFactor()))}equals(e){return!!e&&this.getUnitType()===e.getUnitType()&&this.getUnitToBaseFactor()===e.getUnitToBaseFactor()&&this.getID()===e.getID()&&this.getName()===e.getName()}static isValidWkid(e){return!1}}class _Je extends Ca{constructor(e,i){super(),this.m_index=-1,this.gc=e,this.dim=i}next(){for(;;){if(this.m_index>=this.gc.getGeometryCount()||(this.m_index++,this.m_index===this.gc.getGeometryCount()))return null;const e=this.gc.getGeometry(this.m_index);if(this.dim===-1||1<<e.getDimension()&this.dim)return e}return null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}class AE{constructor(e){this.m_geoms=[],this.m_description=jo(),e&&(e.vd?this.m_description=e.vd:e.copy?e.copy.copyTo(this):K(0))}assignCopy(e){return K(0),this}assignMove(e){return K(0),this}getGeometryCount(){return this.m_geoms.length}reserve(e){K(0)}addGeometry(e){if(e.getGeometryType()===me.enumGeometryCollection){const i=e;for(let s=0,n=i.getGeometryCount();s<n;s++)this.addGeometry(i.getGeometry(s))}else this.m_geoms.push(e.clone()),this.mergeVertexDescription(e.getDescription())}addGeometryMove(e){K(0)}addCursor(e){K(0)}getGeometry(e){return(e<0||e>=this.m_geoms.length)&&Je("Geometry_collection.get_geometry"),this.m_geoms[e]}modifiedElementIndex(e){K(0)}modifiedElement(e){K(0)}getGeometryType(){return me.enumGeometryCollection}getDimension(){let e=0;for(const i of this.m_geoms)e=Math.max(e,i.getDimension());return e}getDescription(){return this.m_description}assignVertexDescription(e){this.m_description!==e&&this.assignVertexDescriptionImpl(e)}assignVertexDescriptionImpl(e){for(const i of this.m_geoms)i.assignVertexDescription(e);this.m_description=e}mergeVertexDescription(e){this.m_description!==e&&(this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=s5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){K(0)}dropAllAttributes(){K(0)}queryInterval(e,i){return K(0),new Ze(0,0)}queryEnvelope(e){K(0)}queryLooseEnvelope(e){K(0)}isEmpty(){return this.m_geoms.length===0}setEmpty(){K(0)}applyTransformation(e){if(e instanceof _i)for(const i of this.m_geoms)i.applyTransformation(e);K(0)}transformAttribute(e,i,s,n,r){K(0)}createInstance(){return new AE({vd:this.getDescription()})}copyTo(e){e.getGeometryType()!==me.enumGeometryCollection&&Je("");const i=e;if(i!==this){i.m_geoms.length=0,i.assignVertexDescription(this.m_description);for(const s of this.m_geoms)i.m_geoms.push(s.clone())}}calculateArea2D(){return K(0),0}calculateLength2D(){return K(0),0}calculateLength3D(e){return K(0),0}getBoundary(){return K(0),this}clone(){return new AE({copy:this})}equals(e,i){if(e===this)return!0;if(e.getGeometryType()!==me.enumGeometryCollection)return!1;const s=e;if(this.m_description!==s.m_description||this.m_geoms.length!==s.m_geoms.length)return!1;for(let n=0;n<this.m_geoms.length;++n)if(!this.m_geoms[n].equals(s.m_geoms[n],i))return!1;return!0}swap(e){K(0)}setAttributeBasic(e,i,s){K(0)}replaceNaNs(e,i){K(0)}getImpl(){return this}vertexCount(){return K(0),0}hasNonLinearSegments(){return K(0),!1}mergeVertexDescriptionImpl(e){const i=i5(this.getDescription(),e);this.assignVertexDescription(i)}}function bJe(t,e=-1){return new _Je(t,e)}AE.type=me.enumGeometryCollection;class xs{assign(e){this.m_reason=e.m_reason,this.m_vertexIndex1=e.m_vertexIndex1,this.m_vertexIndex2=e.m_vertexIndex2}constructor(e,i,s){e!==void 0?(this.m_reason=e,this.m_vertexIndex1=i,this.m_vertexIndex2=s):(this.m_reason=0,this.m_vertexIndex1=-1,this.m_vertexIndex2=-2)}clear(){K(0)}}class dte{constructor(e){if(this.m_geom=this.m_sr=null,e){if(e.move)return this.m_geom=e.move.m_geom,e.move.m_geom=null,this.m_sr=e.move.m_sr,void(e.move.m_sr=null);if(e.copy)return this.m_geom=e.copy.m_geom?e.copy.m_geom.clone():null,void(this.m_sr=e.copy.m_sr);e.geom&&(this.m_geom=e.geom),e.sr&&(this.m_sr=e.sr)}}assignCopy(e){return K(0),this}assignMove(e){return K(0),this}getGeometry(){return this.m_geom}getSpatialReference(){return this.m_sr}setGeometry(e){this.m_geom=e}setSpatialReference(e){this.m_sr=e}getHashCode(){return K(0),0}equals(e,i){return K(0),!1}clone(){return K(0),this}hasGeom(){return!!this.m_geom}}const M6={330:104878,500:104879,1300:104899,1450:104986,2230:104988,3800:104978,5e3:104919,6200:104906,8200:104909,9500:104927,9600:104977,1e4:[104911,104936],11e3:104941,11080:104872,11100:104907,12e3:104920,12400:104995,13e3:104948,14e3:[104923,104989],15e3:[104913,104954],15100:104976,16e3:[104926,104931],18e3:[104922,104982],21e3:104947,21500:104877,27e3:[104950,104957],29e3:104964,3e4:104921,31e3:104949,33e3:104946,4e4:[104914,104967],40600:104897,41900:104937,42e3:104951,43100:104993,49300:104924,50100:104939,54e3:104955,58200:104981,59500:104930,74e3:104961,77e3:104956,79e3:104962,83500:104910,85e3:104917,88800:104934,89200:104985,96e3:104997,104e3:104963,106500:104898,11e4:104938,133e3:104932,135e3:104983,17e4:104965,198200:104987,198630:104935,208e3:104966,235800:104952,249400:104929,252100:104980,255e3:104973,47e4:104972,529800:104942,531e3:104996,56e4:104928,561400:104979,578900:104945,584700:104959,593e3:104970,606e3:104999,718e3:104933,745700:104984,761400:104953,763500:104994,764e3:104940,788900:104958,1188300:104998,1195e3:104969,1352600:104968,1560800:104874,1562090:104915,1737400:104903,1821460:104918,1821490:104876,2409300:104912,2410300:104873,2439400:104974,2439700:104900,2575e3:104943,2631200:104875,2632345:104916,3393400:104904,3396190:[104905,104971],6051e3:104901,6051800:104902,637e4:104128,6370997:[4052,37008],6371e3:4035,6371007:4047,6371228:[4053,10346],6376045:[8042,8043],6376523:[4027,4901,4902],6376896:37007,6378135:[4122,4322,4324,4720,4985,4987],6378136:[4740,4923,7678,7680,9474,9475,104017,104018],6378137:[3823,3824,3888,3889,4017,4019,4023,4031,4040,4046,4055,4074,4075,4080,4081,4121,4126,4130,4133,4140,4141,4148,4151,4152,4163,4166,4167,4170,4171,4172,4173,4176,4180,4189,4190,4258,4269,4283,4318,4319,4326,4463,4466,4469,4470,4480,4482,4483,4490,4557,4558,4612,4617,4619,4624,4627,4659,4661,4667,4669,4670,4674,4686,4687,4693,4694,4702,4737,4742,4747,4749,4750,4755,4756,4757,4758,4759,4761,4762,4763,4764,4765,4883,4885,4887,4889,4893,4895,4898,4907,4909,4921,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4971,4975,4977,4979,4981,4983,4989,4997,4999,5012,5013,5245,5246,5251,5252,5263,5264,5323,5324,5340,5342,5353,5354,5359,5360,5364,5365,5370,5371,5372,5373,5380,5381,5392,5393,5488,5489,5545,5546,5592,5593,5885,5886,6134,6135,6310,6311,6318,6319,6321,6322,6324,6325,6364,6365,6667,6668,6705,6706,6782,6783,6980,6982,6983,6987,6989,6990,7034,7035,7036,7037,7038,7039,7040,7041,7042,7072,7073,7084,7085,7086,7087,7133,7135,7136,7138,7139,7372,7373,7657,7659,7661,7663,7665,7685,7686,7797,7798,7816,7843,7844,7880,7881,7885,7886,7900,7901,7902,7903,7904,7905,7906,7907,7908,7909,7910,7911,7912,7915,7917,7919,7921,7923,7925,7927,7929,7931,8085,8086,8231,8232,8235,8237,8239,8240,8244,8246,8248,8249,8251,8252,8254,8255,8399,8403,8426,8427,8449,8542,8544,8545,8684,8685,8698,8699,8817,8818,8860,8888,8899,8900,8901,8902,8906,8907,8916,8918,8920,8922,8924,8926,8928,8930,8932,8934,8936,8938,8940,8942,8944,8946,8948,8949,8972,8973,8974,8975,8976,8977,8978,8979,8980,8981,8982,8983,8984,8985,8986,8987,8988,8989,8990,8991,8992,8993,8994,8995,8996,8997,8998,8999,9e3,9002,9003,9005,9006,9008,9009,9011,9012,9013,9014,9016,9017,9018,9019,9053,9054,9055,9056,9057,9059,9060,9061,9062,9063,9064,9065,9066,9067,9068,9069,9071,9072,9074,9075,9139,9140,9147,9148,9152,9153,9183,9184,9293,9294,9299,9308,9309,9332,9333,9364,9372,9379,9380,9384,9453,9469,9470,9546,9547,9695,9696,9701,9702,9739,9754,9755,9758,9763,9776,9777,9778,9779,9781,9782,9783,9784,9866,9871,9939,9964,9969,9974,9989,9990,10175,10177,10178,10185,10191,10196,10204,10209,10214,10219,10224,10229,10237,10272,10277,10283,10284,10298,10299,10300,10304,10305,10307,10309,10310,10311,10312,10327,10328,10413,10414,10468,10474,10475,10570,10571,10605,10606,10623,10628,20033,20040,20041,20045,20046,104009,104010,104011,104012,104013,104014,104015,104016,104019,104020,104021,104022,104024,104027,104028,104050,104100,104107,104108,104110,104111,104114,104115,104116,104117,104118,104119,104120,104121,104122,104123,104124,104129,104133,104134,104137,104141,104142,104143,104144,104145,104179,104180,104181,104182,104183,104184,104185,104186,104199,104223,104257,104258,104259,104260,104286,104287,104602,104613,104644,104645,104646,104647,104653,104804,104896,104991],6378140:4610,6378145:[4025,4276,4760,4891,37001],6378150:37003,6378155:[37004,37207],6378160:[3821,4003,4021,4036,4202,4203,4237,4238,4291,4618,4708,5527,37231,104023,104136],6378166:37002,6378200:[4020,4229,4286,4303,4706],6378245:[4024,4147,4164,4178,4179,4191,4200,4205,4214,4284,4317,4555,4676,4677,4678,4991,4993,5560,5561,37257,104135],6378270:[4732,37005,37229],6378273:[4054,10345],6378300:[4029,4168,4174],6378388:[4022,4123,4153,4154,4158,4159,4160,4161,4165,4181,4182,4183,4184,4185,4192,4194,4195,4196,4199,4204,4207,4208,4215,4218,4221,4224,4225,4230,4231,4233,4235,4236,4247,4248,4249,4254,4255,4259,4264,4265,4271,4272,4274,4285,4287,4288,4292,4297,4309,4311,4313,4316,4472,4475,4611,4614,4615,4616,4621,4622,4623,4625,4626,4628,4629,4630,4631,4632,4633,4636,4637,4639,4641,4642,4643,4644,4645,4646,4658,4660,4662,4663,4664,4665,4668,4672,4673,4684,4688,4689,4690,4691,4692,4698,4704,4705,4707,4709,4710,4711,4712,4714,4715,4716,4718,4719,4721,4722,4724,4725,4727,4728,4729,4730,4733,4734,4735,4739,4741,4753,4754,4802,4803,4806,4809,4810,4823,4824,4900,5524,6883,8428,8430,8431,9248,9251,9253,9403,9893,10158,10249,10252,37201,37204,37205,37212,37213,37214,37215,37216,37217,37218,37219,37221,37222,37224,37226,37227,37230,37232,37233,37234,37235,37237,37238,37241,37242,37245,37246,37247,37249,37250,37251,37253,37259,104104,104106,104125,104126,104127,104130,104138,104248],6378523:104786,24764e3:104960,25559e3:104944,60268e3:104925,71492e3:104908,6957e5:104975,6377397155e-3:[3819,3906,4004,4120,4124,4125,4149,4150,4156,4162,4211,4219,4257,4262,4280,4289,4294,4295,4301,4306,4308,4312,4314,4613,4666,4745,4746,4801,4804,4805,4808,4813,4814,4815,4818,4820,4904,5132,5228,5229,5681,5830,8351,9267,10268,37255,104101,104102,104105,104131,104648,104696,104697,104990,104992],6377563396e-3:[4001,4188,4277,4278,4279],6377340189e-3:[4002,4299,4300],6377492018e-3:[4005,4273,4817],6377483865280418e-9:[4006,4293],6378293645208759e-9:[4007,4157,4302,4738,5464],63782064e-1:[4008,4127,4128,4129,4135,4136,4137,4138,4139,4169,4216,4242,4253,4267,4608,4609,4638,4675,4683,4695,4717,4723,4726,4995,5451,5467,37220,37239,37243,37252,37260,104e3,104109,104112,104113,104132],6378450047e-3:[4009,4268],6378300789e-3:[4010,4281],63782492e-1:[4011,4014,4155,4193,4206,4213,4223,4226,4227,4228,4252,4261,4266,4275,4282,4296,4304,4310,4315,4671,4807,4811,4816,4821,37223,37225,104139,104140,104261,104304],6378249145e-3:[4012,4013,4132,4134,4142,4143,4175,4197,4198,4201,4209,4210,4212,4220,4222,4232,4234,4246,4250,4251,4256,4260,4263,4270,4305,4307,4600,4601,4602,4603,4604,4605,4606,4607,4620,4679,4680,4696,4697,4699,4700,4701,4703,4713,4731,4736,4743,4744,4812,4819,6881,6882,6892,6894,8694,37206,37208,37211,37228,37240,37254,104025,104026,104103,104305],6377276345e-3:[4015,4131,4144,4239,4240,4244,4682,5233,6207,37202,104256,104664,104693],6377298556e-3:[4016,4298],6377304063e-3:[4018,4245],63782983e-1:[4028,4903],63781362e-1:4032,63781363e-1:4033,6378249144808011e-9:[4034,4241],209229318e-1:[4042,4243],6377301243e-3:[4044,4145,37203],6377299151e-3:[4045,4146],637701927e-2:[4657,10256,10260,10265],63783063696e-4:[4748,4752],6377295664e-3:[4751,37006],63781365e-1:[7682,7683],63710087714e-4:104047,6378418941e-3:[104700,104726,104760],6378586581e-3:[104701,104743],6378505809e-3:104702,6378544823e-3:104703,6378490569e-3:104704,6378470757e-3:[104705,104776],6378403701e-3:[104706,104750],6378434181e-3:[104707,104724,104739,104764],6378454907e-3:104708,6378400653e-3:104709,6378567378e-3:104710,6378546957e-3:[104711,104717,104780],6378476853e-3:[104712,104736],6378411321e-3:[104713,104728],6378647541e-3:[104714,104715],6378514953e-3:[104716,104782],6378421989e-3:[104718,104770],6378481425e-3:[104719,104753,104774,104781],6378518001e-3:[104720,104725],6378521049e-3:[104721,104723,104731,104745,104748],6378464661e-3:104722,6378436619e-3:104727,6378574389e-3:[104729,104730],6378472281e-3:[104732,104756],6378498189e-3:[104733,104746],6378449421e-3:[104734,104766],6378525621e-3:[104735,104754],6378466185e-3:104737,6378496665e-3:104738,6378643579e-3:104740,6378559758e-3:104741,6378414369e-3:[104742,104763,104772],6378441801e-3:104744,6378502761e-3:[104747,104759,104773,104775],6378617061e-3:104749,6378624681e-3:[104751,104765],6378468623e-3:104752,6378445763e-3:[104755,104758,104761],6378670401e-3:104757,6378438753e-3:104762,6378543909e-3:104767,6378605783e-3:104768,6378540861e-3:104769,6378443325e-3:[104771,104784],6378548481e-3:104777,6378463746e-3:104778,6378426561e-3:104779,6378453688e-3:104783,6378530193e-3:104785,6378376271e-3:[104800,104828],637847192e-2:104801,6378472931e-3:104802,6378411351e-3:104803,6378380991e-3:104805,637841496e-2:104806,637834509e-2:[104807,104819,104844,104870],6378412542e-3:104808,6378470401e-3:104809,6378376331e-3:104810,6378379031e-3:104811,6378407621e-3:104812,6378376811e-3:[104813,104827],637831392e-2:104814,637841493e-2:104815,6378413021e-3:104816,6378380381e-3:104817,6378530851e-3:104818,6378591521e-3:104820,6378378881e-3:104821,6378408481e-3:[104822,104832],6378375601e-3:[104823,104838],6378408041e-3:104824,6378655071e-3:104825,6378409151e-3:104826,63783157e-1:[104829,104840,104845,104851],637828586e-2:[104830,104835,104859],6378379301e-3:104831,6378560121e-3:104833,6378531821e-3:104834,63785006e-1:104836,6378376041e-3:104837,6378406601e-3:104839,6378438991e-3:104841,637834542e-2:104842,637859386e-2:104843,6378381271e-3:[104846,104847],6378413671e-3:104848,6378344377e-3:104849,6378563891e-3:104850,6378408091e-3:104852,6378377671e-3:104853,6378472751e-3:104854,6378412511e-3:104855,6378407281e-3:104856,6378534451e-3:104857,6378406051e-3:104858,6378532921e-3:104860,6378380091e-3:104861,6378408941e-3:104862,6378624171e-3:104863,6378377411e-3:104864,6378474591e-3:104865,6378407141e-3:104866,6378376871e-3:104867,6378375251e-3:104868,6378405971e-3:104869,6378437651e-3:104871};function xJe(){for(const t in M6)delete M6[t]}class Bt{constructor(){this.x=Be.getNAN(),this.y=Be.getNAN()}static getNAN(){return new Bt}static constructPoint2D(e){const i=new Bt;return i.x.set(e.x),i.y.set(e.y),i}static constructCoords(e,i){const s=new Bt;return s.x.set(e),s.y.set(i),s}static constructCoordsE(e,i){const s=new Bt;return s.setCoordsE(e,i),s}get 0(){return this.x.clone()}set 0(e){this.x.setE(e)}get 1(){return this.y.clone()}set 1(e){this.y.setE(e)}clone(){return new Bt().setE(this)}setCoords(e,i){return this.x.set(e),this.y.set(i),this}setCoordsE(e,i){return this.x.setE(e),this.y.setE(i),this}set(e){return this.x.set(e.x),this.y.set(e.y),this}setE(e){return this.x.setE(e.x),this.y.setE(e.y),this}setWithEps(e,i){return this.x.setWithEps(e.x,i),this.y.setWithEps(e.y,i),this}getUnitVector(){const e=this.clone();return e.normalize(),e}sqrLength(){return this.x.sqr().addE(this.y.sqr())}length(){return this.sqrLength().sqrt()}mulE(e){const i=new Bt;return i.setCoordsE(this.x.mulE(e),this.y.mulE(e)),i}mul(e){const i=new Bt;return i.setCoordsE(this.x.mul(e),this.y.mul(e)),i}mulThis(e){return this.x.mulThis(e),this.y.mulThis(e),this}divE(e){return this.clone().divThisE(e)}divThisE(e){return this.x.divThisE(e),this.y.divThisE(e),this}normalize(){const e=this.length();e.value()===0?(this.x=Kp.clone(),this.y=Tx.clone()):(this.x.divThisE(e),this.y.divThisE(e))}addE(e){return this.clone().addThisE(e)}addThisE(e){return this.x.addThisE(e.x),this.y.addThisE(e.y),this}subE(e){return this.clone().subThisE(e)}subThisE(e){return this.x.subThisE(e.x),this.y.subThisE(e.y),this}static distance(e,i){return e.subE(i).length()}negateThis(){return this.x.negateThis(),this.y.negateThis(),this}eq(e){return this.x.eq(e.x)&&this.y.eq(e.y)}isZero(){return this.x.isZero()&&this.y.isZero()}isTrueZero(){return!this.x.value()&&!this.y.value()}rotateDirect(e,i){const s=this.x.mulE(e).subThisE(this.y.mulE(i)),n=this.x.mulE(i).addThisE(this.y.mulE(e));return this.x.setE(s),this.y.setE(n),this}rotateReverse(e,i){const s=this.x.mulE(e).addThisE(this.y.mulE(i)),n=this.x.negate().mulThisE(i).addThisE(this.y.mulE(e));return this.x.setE(s),this.y.setE(n),this}dotProduct(e){return this.x.mulE(e.x).addE(this.y.mulE(e.y))}crossProduct(e){return this.x.mulE(e.y).subE(this.y.mulE(e.x))}value(){return Y.construct(this.x.value(),this.y.value())}}class DE{constructor(){this.a11=new Be(1),this.a12=new Be(0),this.a21=new Be(0),this.a22=new Be(1)}clone(){const e=new DE;return e.a11.setE(this.a11),e.a12.setE(this.a12),e.a21.setE(this.a21),e.a22.setE(this.a22),e}assign(e){return this.a11.setE(e.a11),this.a12.setE(e.a12),this.a21.setE(e.a21),this.a22.setE(e.a22),this}mulThis(e){const i=this.a11.mulE(e.a11).addThisE(this.a12.mulE(e.a21)),s=this.a11.mulE(e.a12).addThisE(this.a12.mulE(e.a22)),n=this.a21.mulE(e.a11).addThisE(this.a22.mulE(e.a21)),r=this.a21.mulE(e.a12).addThisE(this.a22.mulE(e.a22));return this.a11=i,this.a12=s,this.a21=n,this.a22=r,this}mulLeftThis(e){const i=e.clone();return this.assign(i.mulThis(this)),this}det(){return this.a11.mulE(this.a22).subThisE(this.a12.mulE(this.a21))}invertThis(){const e=this.det();if(e.value()!==0){const i=this.a22.divE(e),s=this.a12.negate().divThisE(e),n=this.a21.negate().divThisE(e),r=this.a11.divE(e);this.a11=i,this.a12=s,this.a21=n,this.a22=r}else this.setZero();return!e.isZero()}transposeThis(){return this.a21=St(this.a12,this.a12=this.a21),this}transformPoint(e){return K(0),new Bt}eigenValues(e){return K(0),0}eigenVectors(e,i){return K(0),0}eigenSymmetric(e,i){const s=this.a12.clone();s.addThisE(this.a21),s.mulThisByPower2(.5);let n=new Be(1),r=new Be(0);if(s.isZero())e[0].setE(this.a11),e[1].setE(this.a22);else{const o=new Be(1);if(this.a11.ne(this.a22)){const l=this.a11.subE(this.a22).divE(s);l.mulThisByPower2(.5);const c=l.sqr();o.setE(l),o.absThis(),o.subThisE(c.add(1).sqrtThis()),l.gt(Tx)&&o.negateThis();const f=o.sqr().addThis(1).sqrtThis().invThis();r=o.mulE(f),n.setE(f);const y=o.mulE(s);e[0]=this.a11.addE(y),e[1]=this.a22.subE(y)}else n=new Be(1/Math.sqrt(2)),r=n.clone(),e[0]=this.a11.addE(s),e[1]=this.a22.subE(s)}i[0].x=n.toDouble(),i[0].y=r.toDouble(),i[1].x=r.negate().toDouble(),i[1].y=n.toDouble(),Math.abs(e[0].toDouble())>Math.abs(e[1].toDouble())&&(e[1]=St(e[0],e[0]=e[1]),i[1]=St(i[0],i[0]=i[1]))}setZero(){this.a11.set(0),this.a21.set(0),this.a12.set(0),this.a22.set(0)}}var yv=vr;function Yg(t,e){const i=t.getStartXY();if(i.equals(e.getStartXY())||i.equals(e.getEndXY()))return!0;const s=t.getEndXY();return!!s.equals(e.getStartXY())||!!s.equals(e.getEndXY())}function t7(t,e){let i=t.calculateLowerLength2D();return!(i>e)&&(!!t.isLine()||(i=t.calculateUpperLength2D(),i<=e||e!==0&&t.calculateLength2D()<=e))}function gj(t,e){const i=t.getEndXY().sub(t.getStartXY()).length(),s=t.calculateUpperLength2D()-i<=e[0];return e[0]*=.1,s}function Age(t,e,i,s,n,r,o,l){let c=t.calculateUpperLength2D(),f=e.calculateUpperLength2D(),y=t,_=e,x=!1;c>f&&(_=St(y,y=_),s=St(i,i=s),f=St(c,c=f),x=!0);const S=i===0;{o[0]=S?1:0;const W=y.getCoord2D(o[0]);l[0]=_.getClosestCoordinate(W,!1);const J=_.getCoord2D(l[0]);if(Y.distance(W,J)<=n){const re=[.5,.75,.25,.1,.9];let se=!0;for(let oe=0;oe<re.length;oe++)if(W.assign(y.getCoord2D(re[oe])),!_.isCloserThanDistance(W,new Ze(0,1),n)){se=!1;break}if(se)return x&&(l[0]=St(o[0],o[0]=l[0])),1}}if(c<=3*n)return 0;let P=cn(Math.max(n/c,.1),0,.5),A=.01*n,k=0,$=0,F=P,G=-1,V=0,B=1/32;for(let W=0;;W++){K(W<4095);const J=S?P:1-P,re=y.getCoord2D(J),se=_.getClosestCoordinate(re,!1);if(se===s)return V;const oe=_.getCoord2D(se),pe=Y.distance(re,oe);if(W===0&&(G=pe),pe<=A?(B=.5,$=pe,k=P):(F=P,G=pe),Math.abs($-G)>.1*A&&F-k>1e-16)P=ji(k,F,B);else{if(o[V]=J,l[V]=se,x&&(l[V]=St(o[V],o[V]=l[V])),r===1||V===1)return V===1&&o[0]>o[1]&&(o[1]=St(o[0],o[0]=o[1]),l[1]=St(l[0],l[0]=l[1])),V+1;V++,k=F,$=G,F=.8,G=-1,P=.8,B=1/32,A=10*n,W=0}}}function aS(t,e,i,s,n,r,o,l,c){if(Is(i,0,1)&&Is(s,0,1)&&Y.distance(t.getCoord2D(i),e.getCoord2D(s))===0){const y=new Bt,_=en();if(t.queryDerivative(new Be(i,_),y),y.isTrueZero()){const k=i===1?-1e-12:1e-12;t.queryDerivative(new Be(i,_).add(k),y)}i===1&&y.negateThis();const x=new Bt;if(e.queryDerivative(new Be(s,_),x),x.isTrueZero()){const k=i===1?-1e-12:1e-12;e.queryDerivative(new Be(s,_).add(k),x)}s===1&&x.negateThis(),y.isZero()||y.normalize(),x.isZero()||x.normalize();const S=y.dotProduct(x),P=y.crossProduct(x);P.scaleError(3);const A=()=>{{const k=t.calculateUpperLength2D(),$=e.calculateUpperLength2D();return Math.min(.01*n/Math.min(k,$),1e-10)}};if(S.ge(Tx)&&(P.isZero()||Math.abs(P.value())<A()))return Age(t,e,i,s,n,r,o,l)}return 0}function wJe(t,e,i){return K(t.isCurve()||e.isCurve()),!!(t.getStartXY().equals(e.getStartXY())&&aS(t,e,0,0,i,2,[0,0],[0,0])||t.getEndXY().equals(e.getEndXY())&&aS(t,e,1,1,i,2,[0,0],[0,0])||t.getStartXY().equals(e.getEndXY())&&aS(t,e,0,1,i,2,[0,0],[0,0])||t.getEndXY().equals(e.getStartXY())&&aS(t,e,1,0,i,2,[0,0],[0,0]))}function yj(t,e){t.m_XStart=e.x,t.m_YStart=e.y}function fte(t,e,i){t.m_XStart=e,t.m_YStart=i}function vj(t,e){t.m_XEnd=e.x,t.m_YEnd=e.y}function pte(t,e,i){t.m_XEnd=e,t.m_YEnd=i}function SJe(t,e,i){e?t.m_XEnd===i.x&&t.m_YEnd===i.y||(t.m_XEnd=i.x,t.m_YEnd=i.y,t.endPointModified()):t.m_XStart===i.x&&t.m_YStart===i.y||(t.m_XStart=i.x,t.m_YStart=i.y,t.endPointModified())}function mte(t,e,i){t.m_description.hasZ()||t.addAttribute(1),e?t.m_XEnd===i.x&&t.m_YEnd===i.y||(t.m_XEnd=i.x,t.m_YEnd=i.y,t.endPointModified()):t.m_XStart===i.x&&t.m_YStart===i.y||(t.m_XStart=i.x,t.m_YStart=i.y,t.endPointModified()),t.m_attributes[(t.m_description.getTotalComponentCount()-2)*e]=i.z}function gte(t,e,i){i.assignVertexDescription(t.m_description);const s=e===0?t.m_XStart:t.m_XEnd,n=e===0?t.m_YStart:t.m_YEnd;i.setXYCoords(s,n);for(let r=1;r<t.m_description.getAttributeCount();r++){const o=t.m_description.getSemantics(r);for(let l=0,c=yv.getComponentCount(o);l<c;l++){const f=$h(t,e,o,l);i.setAttributeBasic(o,l,f)}}}function yte(t,e,i){i.isEmpty()&&HA(""),SJe(t,e,i.getXY());const s=i.getDescription();s!==t.m_description&&t.mergeVertexDescription(s);for(let n=1,r=s.getAttributeCount();n<r;n++){const o=s.getSemantics(n),l=yv.getComponentCount(o);for(let c=0;c<l;c++)Dp(t,e,o,c,i.getAttributeAsDbl(o,c))}}function $h(t,e,i,s){if((e<0||e>1)&&Mi(""),i===0)return(s<0||s>=2)&&Mi(""),e===0?s===0?t.m_XStart:t.m_YStart:s===0?t.m_XEnd:t.m_YEnd;const n=yv.getComponentCount(i);(s<0||s>=n)&&Mi("");const r=t.m_description.getAttributeIndex(i);return r>=0?t.m_attributes[e*(t.m_description.getTotalComponentCount()-2)+t.m_description.getPointAttributeOffset(r)-2+s]:yv.getDefaultValue(i)}function Dp(t,e,i,s,n){if((e<0||e>1)&&Mi(""),i===0)return e===0?s===0?t.m_XStart=n:s===1?t.m_YStart=n:Mi(""):e===1?s===0?t.m_XEnd=n:s===1?t.m_YEnd=n:Mi(""):Mi(""),void t.endPointModified();const r=yv.getComponentCount(i);(s<0||s>=r)&&Mi("");let o=t.m_description.getAttributeIndex(i);o<0&&(t.addAttribute(i),o=t.m_description.getAttributeIndex(i)),t.m_attributes[e*(t.m_description.getTotalComponentCount()-2)+t.m_description.getPointAttributeOffset(o)-2+s]=n}function EJe(t,e){if(t===e)return;e.isEmpty()&&HA("");const i=e.getDescription();i!==t.m_description&&t.mergeVertexDescription(i);for(let s=1,n=i.getAttributeCount();s<n;s++){const r=i.getSemantics(s),o=yv.getComponentCount(r);for(let l=0;l<o;l++){let c=$h(e,0,r,l);Dp(t,0,r,l,c),c=$h(e,1,r,l),Dp(t,1,r,l,c)}}}function CJe(t,e){const i=JA();QA(e,t.m_description,i);let s=null;const n=e.getTotalComponentCount()-2,r=t.m_description?t.m_description.getTotalComponentCount()-2:0;if(n>0&&(s=new Array(2*n),dn(s,e.getDefaultPointAttributes(),0,2,n),dn(s,e.getDefaultPointAttributes(),n,2,n),t.m_description!==null))for(let o=1;o<e.getAttributeCount();o++){const l=i[o];if(l!==-1){const c=t.m_description.getPointAttributeOffset(l)-2,f=e.getPointAttributeOffset(o)-2,y=yv.getComponentCount(e.getSemantics(o));for(let _=0;_<y;++_)s[f]=t.m_attributes[c],s[n+f]=t.m_attributes[r+c]}}t.m_attributes=s,t.m_description=e}function nf(t){return t.absNorm()*pv()}function Al(t,e){return Math.max(t.absNorm(),e.absNorm())*pv()}function Hu(t,e,i){const s=new Gr;t.queryEnvelopeW(Ze.unit(),s);const n=new Gr;return e.queryEnvelopeW(Ze.unit(),n),n.inflate(i),!s.isIntersectingW(n)}function _j(t,e,i){const s=C6(t,i),n=C6(e,i);s.sort((r,o)=>r.compare(o)),n.sort((r,o)=>r.compare(o));for(let r=0;r<3;r++){if(s[r].compare(n[r])<0)return-1;if(s[r].compare(n[r])!==0)return 1}return 0}var vN=vr;class r5{constructor(e){if(e.copy)this.m_XStart=e.copy.m_XStart,this.m_YStart=e.copy.m_YStart,this.m_XEnd=e.copy.m_XEnd,this.m_YEnd=e.copy.m_YEnd,this.m_description=e.copy.m_description,this.m_attributes=null,this.m_description&&this.m_description.getTotalComponentCount()-2&&(this.m_attributes=e.copy.m_attributes.slice());else{if(e.move)return this.m_description=e.move.m_description,e.move.m_description=null,this.m_attributes=e.move.m_attributes,e.move.m_attributes=null,this.m_XStart=e.move.m_XStart,this.m_YStart=e.move.m_YStart,this.m_XEnd=e.move.m_XEnd,void(this.m_YEnd=e.move.m_YEnd);if(e.XStart!==void 0)return this.m_XStart=e.XStart,this.m_YStart=e.YStart,this.m_XEnd=e.XEnd,this.m_YEnd=e.YEnd,this.m_attributes=null,this.m_description=e.vd?e.vd:jo(),void(e.vd&&this.setDefaultAttributeValues());if(e.ZStart!==void 0)return this.m_XStart=e.XStart,this.m_YStart=e.YStart,this.m_XEnd=e.XEnd,this.m_YEnd=e.YEnd,this.m_description=e.vd?e.vd:TE(),void(e.vd?(this.setDefaultAttributeValues(),this.addAttribute(1),this.m_attributes[0]=e.ZStart,this.m_attributes[this.m_description.getTotalComponentCount()-2]=e.ZEnd):this.m_attributes=[e.ZStart,e.ZEnd]);if(e.start)return this.m_XStart=e.start.x,this.m_YStart=e.start.y,this.m_XEnd=e.end.x,this.m_YEnd=e.end.y,this.m_attributes=null,void(this.m_description=jo());if(e.start3D)return this.m_XStart=e.start3D.x,this.m_YStart=e.start3D.y,this.m_XEnd=e.end3D.x,this.m_YEnd=e.end3D.y,this.m_description=e.vd?e.vd:TE(),void(e.vd?(this.setDefaultAttributeValues(),this.addAttribute(1),this.m_attributes[0]=e.start3D.z,this.m_attributes[this.m_description.getTotalComponentCount()-2]=e.end3D.z):this.m_attributes=[e.start3D.z,e.end3D.z]);K(0),this.m_XStart=this.m_YStart=this.m_XEnd=this.m_YEnd=Number.NaN}}setDefaultAttributeValues(){const e=this.m_description.getTotalComponentCount()-2;e>0&&(this.m_attributes===null&&(this.m_attributes=Vi(2*e,Number.NaN)),dn(this.m_attributes,this.m_description.getDefaultPointAttributes(),0,2,e),dn(this.m_attributes,this.m_description.getDefaultPointAttributes(),e,2,e))}absNormXYZ(e){return js("not implemented"),0}snapControlPoints3D(){return js("not implemented"),!1}setCoordsForIntersector3D(e,i,s){js("not implemented")}transformAttribute(e,i,s,n,r){js("")}mergeVertexDescriptionImpl(e){const i=i5(this.getDescription(),e);this.assignVertexDescription(i)}changeEndPoints(e,i){const s=e.getXY(),n=i.getXY();this.changeEndPoints2D(s,n);let r=e.getDescription();r!==this.getDescription()&&this.mergeVertexDescription(r),r=i.getDescription(),r!==this.getDescription()&&this.mergeVertexDescription(r);for(let o=1,l=r.getAttributeCount();o<l;o++){const c=r.getSemantics(o),f=vN.getComponentCount(c);for(let y=0;y<f;y++)Dp(this,0,c,y,e.getAttributeAsDbl(c,y)),Dp(this,1,c,y,i.getAttributeAsDbl(c,y))}}getStartXY(){return new Y(this.m_XStart,this.m_YStart)}setStartXY(e){this.m_XStart=e.x,this.m_YStart=e.y,this.endPointModified()}setStartXYCoords(e,i){this.m_XStart=e,this.m_YStart=i,this.endPointModified()}getStartXYZ(){return K(0),new ii(0,0,0)}setStartXYZ(e){K(0)}setStartXYZCoords(e,i,s){mte(this,0,ii.construct(e,i,s))}queryStart(e){gte(this,0,e)}setStart(e){yte(this,0,e)}setStart2D(e){this.setStartXY(e)}getStartAttributeAsDbl(e,i){return $h(this,0,e,i)}getStartAttributeAsInt(e,i){return K(0),0}setStartAttribute(e,i,s){Dp(this,0,e,i,s)}setStartAttributesFromPoint(e,i){K(0)}setEndAttributesFromPoint(e,i){K(0)}getStartX(){return this.m_XStart}getStartY(){return this.m_YStart}getStartZ(){return K(0),0}getEndX(){return this.m_XEnd}getEndY(){return this.m_YEnd}getEndZ(){return K(0),0}getEndXY(){return new Y(this.m_XEnd,this.m_YEnd)}setEndXY(e){this.m_XEnd=e.x,this.m_YEnd=e.y,this.endPointModified()}setEndXYCoords(e,i){this.m_XEnd=e,this.m_YEnd=i,this.endPointModified()}getEndXYZ(){return K(0),new ii(0,0,0)}setEndXYZ(e){K(0)}setEndXYZCoords(e,i,s){mte(this,1,ii.construct(e,i,s))}queryEnd(e){gte(this,1,e)}setEnd(e){yte(this,1,e)}setEnd2D(e){this.setEndXY(e)}getEndAttributeAsDbl(e,i){return $h(this,1,e,i)}getEndAttributeAsInt(e,i){return K(0),Math.trunc(0)}setEndAttribute(e,i,s){Dp(this,1,e,i,s)}getDimension(){return 1}copyTo(e){if(this===e)return;e.getGeometryType()!==this.getGeometryType()&&Je("");const i=e;i.assignVertexDescription(this.m_description),i.m_attributes&&dn(i.m_attributes,this.m_attributes,0,0,2*(this.m_description.getTotalComponentCount()-2)),i.m_XStart=this.m_XStart,i.m_YStart=this.m_YStart,i.m_XEnd=this.m_XEnd,i.m_YEnd=this.m_YEnd,this.copyToImpl(i)}isEmpty(){return this.isEmptyImpl()}isClosed(){return this.m_XStart===this.m_XEnd&&this.m_YStart===this.m_YEnd}setEmpty(){}calculateArea2D(){return 0}queryInterval(e,i){const s=Ze.constructEmpty();return s.vmin=$h(this,0,e,i),s.vmax=s.vmin,s.mergeNeCoordinate($h(this,1,e,i)),s}calculateLength3D(e){return K(0),0}getCoord3D(e){return K(0),{}}getCoord2D(e){const i=Y.getNAN();return this.queryCoord2D(e,i),i}queryCoord3D(e,i){K(0)}getCoordZ(e){return K(0),0}queryCoord(e,i){i.assignVertexDescription(this.m_description),i.setXY(this.getCoord2D(e));for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s),o=vN.getComponentCount(r);for(let l=0;l<o;l++){const c=this.getAttributeAsDbl(e,r,l);i.setAttributeBasic(r,l,c)}}}isCloserThanDistance(e,i,s){const n=xe.constructEmpty();if(this.queryLooseEnvelopeOnInterval(i,n),n.distance(e)>s)return!1;const r=this.getClosestCoordinateOnInterval(e,i,s);return!Number.isNaN(r)&&Y.distance(e,this.getCoord2D(r))<=s}isMonotoneQuickAndDirty(){return!1}isTrue3D(){return!1}getReversed(){const e=this.clone();return e.reverse(),e}reverse(){this.m_XEnd=St(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=St(this.m_YStart,this.m_YStart=this.m_YEnd),this.reverseImpl();for(let e=1,i=this.m_description.getAttributeCount();e<i;e++){const s=this.m_description.getSemantics(e);for(let n=0,r=vN.getComponentCount(s);n<r;n++){const o=$h(this,0,s,n);Dp(this,0,s,n,$h(this,1,s,n)),Dp(this,1,s,n,o)}}return this.afterCompletedModification(),this}isEmptyImpl(){return!1}isCircular(){return!1}distance(e,i,s,n){if(!i&&this.isIntersecting(e,0,!1)){if(s!==null||n!==null){const f=new Array(9),y=new Array(9),_=this.intersect(e,null,f,y,0);K(_<=9),_===0&&bt(""),s!==null&&(s[0]=f[0]),n!==null&&(n[0]=y[0])}return 0}let r,o=Number.MAX_VALUE,l=-1,c=o;return r=this.getStartXY(),l=e.getClosestCoordinate(r,!1),r.subThis(e.getCoord2D(l)),c=r.length(),c<o&&(o=c,n!==null&&(n[0]=l),s!==null&&(s[0]=0)),r=this.getEndXY(),l=e.getClosestCoordinate(r,!1),r.subThis(e.getCoord2D(l)),c=r.length(),c<o&&(o=c,n!==null&&(n[0]=l),s!==null&&(s[0]=1)),r=e.getStartXY(),l=this.getClosestCoordinate(r,!1),r.subThis(this.getCoord2D(l)),c=r.length(),c<o&&(o=c,s!==null&&(s[0]=l),n!==null&&(n[0]=0)),r=e.getEndXY(),l=this.getClosestCoordinate(r,!1),r.subThis(this.getCoord2D(l)),c=r.length(),c<o&&(o=c,s!==null&&(s[0]=l),n!==null&&(n[0]=1)),o}calculateSubLengthFromStart(e){return this.tToLength(e)}calculateSubLength(e,i){return i===e?0:this.tToLength(i)-this.tToLength(e)}static recalculateParentT(e,i,s){return ji(e,i,s)}moveTo(e){const i=this.isClosed(),s=new _i;s.setShift(e.sub(this.getStartXY())),this.applyTransformation(s),i?this.changeEndPoints2D(e,e):this.changeEndPoints2D(e,this.getEndXY())}moveTo3D(e){K(0)}getDescription(){return this.m_description}assignVertexDescription(e){CJe(this,e)}mergeVertexDescription(e){this.m_description!==e&&(this.m_description.hasAttributesFrom(e)||this.mergeVertexDescriptionImpl(e))}hasAttribute(e){return this.m_description.hasAttribute(e)}addAttribute(e){if(this.m_description.hasAttribute(e))return;const i=s5(this.m_description,e);this.assignVertexDescription(i)}dropAttribute(e){if(!this.m_description.hasAttribute(e))return;const i=pj(this.m_description,e);this.assignVertexDescription(i)}dropAllAttributes(){const e=jo();e!==this.m_description&&this.assignVertexDescription(e)}swap(e){K(0)}equals(e,i){if(this.getGeometryType()!==e.getGeometryType())return!1;const s=i===void 0;s&&(i=0);const n=e;if(this===n)return!0;if(this.m_description!==n.m_description||Math.abs(this.m_XStart-n.m_XStart)>i||Math.abs(this.m_XEnd-n.m_XEnd)>i||Math.abs(this.m_YStart-n.m_YStart)>i||Math.abs(this.m_YEnd-n.m_YEnd)>i)return!1;for(let r=0,o=2*(this.m_description.getTotalComponentCount()-2);r<o;r++)if(!t5(this.m_attributes[r],n.m_attributes[r],i))return!1;return s?this.equalsImpl(n):this.equalsImplTol(n,i)}getImpl(){return this}setAttributeBasic(e,i,s){if(this.addAttribute(e),e===0&&this.isCurve()){(i<0||i>1)&&Je("");const n=new _i,r=i===0?s:0,o=i===1?s:0;n.setShiftCoords(r,o),i===0?n.xx=0:n.yy=0,this.applyTransformation(n)}else this.setStartAttribute(e,i,s),this.setEndAttribute(e,i,s)}replaceNaNs(e,i){K(0)}}r5.s_maxMonotonicPartParams=8;class o5 extends r5{constructor(e){super(e)}}class PJe extends o5{isTrue3D(){return!0}constructor(e){super(e)}}function ml(t,e,i){bj(e,t.getStartXY(),t.getEndXY(),i)}function bj(t,e,i,s){ar(e,i,t,s)}function _N(t,e){return ji(t.m_XStart,t.m_XEnd,e)}function vte(t,e){return ji(t.m_YStart,t.m_YEnd,e)}function TJe(t,e,i){const s=Bt.constructPoint2D(t.getStartXY()),n=Bt.constructPoint2D(t.getEndXY());i.setCoordsE(n.x.subE(s.x),n.y.subE(s.y))}function Dge(t,e,i){e.value()<=.5?Zd(2,Bt.constructPoint2D(t.getStartXY()),Bt.constructPoint2D(t.getEndXY()),e,i):Kd(2,Bt.constructPoint2D(t.getStartXY()),Bt.constructPoint2D(t.getEndXY()),e,i)}function IJe(t,e,i){t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,t.m_YEnd=i.y,t.afterCompletedModification()}function kge(t){if(t.m_YEnd<t.m_YStart||t.m_YEnd===t.m_YStart&&t.m_XEnd<t.m_XStart){t.m_XEnd=St(t.m_XStart,t.m_XStart=t.m_XEnd),t.m_YEnd=St(t.m_YStart,t.m_YStart=t.m_YEnd);for(let e=0,i=t.m_description.getTotalComponentCount()-2;e<i;e++)t.m_attributes[e+i]=St(t.m_attributes[e],t.m_attributes[e]=t.m_attributes[e+i])}}function MJe(t,e,i,s){let n=0;if((t.m_XStart===e.m_XStart&&t.m_YStart===e.m_YStart||t.m_XStart===e.m_XEnd&&t.m_YStart===e.m_YEnd)&&(n++,!s))return 1;if(t.m_XEnd===e.m_XStart&&t.m_YEnd===e.m_YStart||t.m_XEnd===e.m_XEnd&&t.m_YEnd===e.m_YEnd){if(n++,n===2)return 2;if(!s)return 1}return e.isIntersectingPoint(t.getStartXY(),i,!0)||e.isIntersectingPoint(t.getEndXY(),i,!0)||t.isIntersectingPoint(e.getStartXY(),i,!0)||t.isIntersectingPoint(e.getEndXY(),i,!0)?4:s&&n?0:DJe(t,e)?4:0}function i7(t,e,i,s,n,r,o,l){s!==null&&(s.length=2),n!==null&&(n.length=2),i!==null&&(i.length=2);const c=AJe(t,e,2,i,s,n,r,o,l);return s&&(s.length=c),n&&(n.length=c),i&&(i.length=c),c}function AJe(t,e,i,s,n,r,o,l,c){const f=Ob(t,e.getStartXY(),o,!1),y=Ob(t,e.getEndXY(),o,!1),_=Ob(e,t.getStartXY(),o,!1),x=Ob(e,t.getEndXY(),o,!1);let S=0,P=0;if(!Number.isNaN(f)){let k=!1;l&&Is(f,0,1)&&t.getCoord2D(f).isEqualPoint2D(e.getStartXY())&&(S++,k=!0),k||(n&&(n[P]=f),r&&(r[P]=0),s&&(s[P]=Y.construct(e.m_XStart,e.m_YStart)),P++)}if(!Number.isNaN(y)){let k=!1;l&&Is(y,0,1)&&t.getCoord2D(y).isEqualPoint2D(e.getEndXY())&&(S++,k=!0),k||(i>P&&(n&&(n[P]=y),r&&(r[P]=1),s&&(s[P]=Y.construct(e.m_XEnd,e.m_YEnd))),P++)}if(P!==2&&!Number.isNaN(_)&&!(f===0&&_===0||y===0&&_===1)){let k=!1;l&&Is(_,0,1)&&e.getCoord2D(_).isEqualPoint2D(t.getStartXY())&&(S++,k=!0),k||(i>P&&(n&&(n[P]=0),r&&(r[P]=_),s&&(s[P]=Y.construct(t.m_XStart,t.m_YStart))),P++)}if(P!==2&&!Number.isNaN(x)&&!(f===1&&x===0||y===1&&x===1)){let k=!1;l&&Is(x,0,1)&&e.getCoord2D(x).isEqualPoint2D(t.getEndXY())&&(S++,k=!0),k||(i>P&&(n&&(n[P]=1),r&&(r[P]=x),s&&(s[P]=Y.construct(e.m_XEnd,e.m_YEnd))),P++)}if(P>0)return c&&(r=St(n,n=r)),P===2&&i>=2&&n&&n[0]>n[1]&&(n[1]=St(n[0],n[0]=n[1]),r&&(r[1]=St(r[0],r[0]=r[1])),s&&(s[1]=St(s[0],s[0]=s[1]))),P;if(S>0)return 0;const A=kJe(t,e,o);return Number.isNaN(A.x)?0:(s&&(s[0]=t.getCoord2D(A.x)),n&&(n[0]=A.x),r&&(r[0]=A.y),1)}function DJe(t,e){const i=j4(t,e.m_XStart,e.m_YStart),s=j4(t,e.m_XEnd,e.m_YEnd);if(i<0&&s<0||i>0&&s>0)return!1;const n=j4(e,t.m_XStart,t.m_YStart),r=j4(e,t.m_XEnd,t.m_YEnd);return n<0&&r<0||n>0&&r>0?!1:oz(t)>oz(e)?bte(t,e):bte(e,t)}function Ob(t,e,i,s){const n=Y.getNAN(),r=Y.getNAN();let o=!1;t.m_YEnd<t.m_YStart||t.m_YEnd===t.m_YStart&&t.m_XEnd<t.m_XStart?(n.setCoords(t.m_XEnd,t.m_YEnd),r.setCoords(t.m_XStart,t.m_YStart),o=!0):(n.setCoords(t.m_XStart,t.m_YStart),r.setCoords(t.m_XEnd,t.m_YEnd));const l=o?1:0,c=o?0:1,f=Y.getNAN();f.setSub(e,n);let y=f.length(),_=3*y*en();if(y<=Math.max(i,_))return s&&y===0?Number.NaN:l;if(f.setSub(e,r),y=f.length(),_=3*y*en(),y<=Math.max(i,_))return s&&y===0?Number.NaN:c;f.setCoords(r.x-n.x,r.y-n.y);const x=f.length();if(x>0){const S=1/x;f.scale(S);const P=Y.getNAN();P.setSub(e,n);const A=P.dotProduct(f),k=8*P.dotProductAbs(f)*en();f.leftPerpendicularThis();const $=P.dotProduct(f),F=8*P.dotProductAbs(f)*en(),G=Math.max(i,k);if(A<-G||A>x+G)return Number.NaN;const V=Math.max(i,F);if(Math.abs($)<=V){let B=A*S;B=cn(B,0,1);const W=Y.getNAN();if(bj(B,n,r,W),Y.distance(W,e)<=i){if(B<.5){if(Y.distance(W,n)<=i&&Y.distance(e,n)<=i)return l}else if(Y.distance(W,r)<=i&&Y.distance(e,r)<=i)return c;return o?1-B:B}}}return Number.NaN}function j4(t,e,i){const s=Y.getNAN();s.setCoords(e,i),s.subThis(t.getStartXY());const n=Y.getNAN();n.setSub(t.getEndXY(),t.getStartXY());const r=n.crossProduct(s),o=4*en()*(Math.abs(n.x*s.y)+Math.abs(n.y*s.x));return r>o?-1:r<-o?1:0}function _te(t,e,i,s){const n=s?t.m_XStart:t.m_XEnd,r=s?t.m_YStart:t.m_YEnd,o=Y.getNAN();return o.x=e.getEndX()-n,o.y=e.getEndY()-r,i.dotProduct(o)>3*en()*i.dotProductAbs(o)?(o.x=e.getStartX()-n,o.y=e.getStartY()-r,i.dotProduct(o)<=3*en()*i.dotProductAbs(o)):!0}function bte(t,e){const i=Y.getNAN();return i.x=t.m_XEnd-t.m_XStart,i.y=t.m_YEnd-t.m_YStart,!!_te(t,e,i,!1)&&(i.negateThis(),!!_te(t,e,i,!0))}function oz(t){const e=t.m_XStart-t.m_XEnd,i=t.m_YStart-t.m_YEnd;return e*e+i*i}function kJe(t,e,i){const s=t.m_XEnd-t.m_XStart,n=t.m_YEnd-t.m_YStart,r=e.m_XEnd-e.m_XStart,o=e.m_YEnd-e.m_YStart,l=r*n-s*o;if(l===0)return Y.getNAN();const c=4*en()*(Math.abs(r*n)+Math.abs(s*o)),f=e.m_XStart-t.m_XStart,y=e.m_YStart-t.m_YStart,_=r*y-f*o,x=4*en()*(Math.abs(r*y)+Math.abs(f*o)),S=_/l,P=Math.abs(l),A=(x*P+c*Math.abs(_))/(l*l)+en()*Math.abs(S);if(S<-A||S>1+A)return Y.getNAN();const k=s*y-f*n,$=k/l,F=(4*en()*(Math.abs(s*y)+Math.abs(f*n))*P+c*Math.abs(k))/(l*l)+en()*Math.abs($);if($<-F||$>1+F)return Y.getNAN();let G=cn(S,0,1),V=cn($,0,1);const B=Y.getNAN();ml(t,G,B);const W=Y.getNAN();if(ml(e,V,W),!i||Y.distance(B,W)>i){const J=Y.getNAN();ar(B,W,.5,J),G=t.getClosestCoordinate(J,!1),V=e.getClosestCoordinate(J,!1);const re=Y.getNAN();ml(t,G,re);const se=Y.getNAN();ml(e,V,se),re.subThis(se);const oe=re.length(),pe=(t.absNorm()+e.absNorm())*pv();if(oe>Math.max(i,pe))return Y.getNAN()}return new Y(G,V)}class bN{constructor(e){if(this.m_segFlagStream=null,this.m_xyStream=null,this.m_bCirculator=!1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_nextPathIndex=0,this.m_currentPathIndex=-1,this.m_parent=e.parent,this.m_buffer=new this.m_parent.m_segmentBufferCTor,this.m_description=e.parent.getDescription(),this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex),e.pointIndex!==void 0){(e.pointIndex<0||e.pointIndex>=e.parent.getPointCount())&&Mi("");const i=e.parent.getPathIndexFromPointIndex(e.pointIndex);this.m_currentPathIndex=i,this.m_nextPathIndex=i+1,this.m_nextSegmentIndex=e.pointIndex-e.parent.getPathStart(i),this.m_segmentCount=this.getSegmentCount(this.m_currentPathIndex)}else if(e.pathIndex!==void 0){(e.pathIndex<0||e.pathIndex>=e.parent.getPathCount()||e.segmentIndex<0)&&Mi("");const i=e.parent.isClosedPath(e.pathIndex)?0:1;e.segmentIndex>=e.parent.getPathSize(e.pathIndex)-i&&Mi(""),this.m_nextSegmentIndex=e.segmentIndex,this.m_currentPathIndex=e.pathIndex,this.m_nextPathIndex=this.m_nextSegmentIndex+1,this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex)}this.prepare(),this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1,this.m_bStripAttributes=!1,this.m_prevPathIndex=-1,this.m_prevSegmentIndex=-1,this.m_bNeedsUpdate=!1,this.m_currentPathIndex>-1&&(this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex))}stripAttributes(){this.m_bStripAttributes=!0}clone(){return K(0),this}prepare(){this.m_bCirculator=!1,this.m_parent.isEmptyImpl()?(this.m_segFlagStream=null,this.m_xyStream=null):(this.m_segFlagStream=this.m_parent.getSegmentFlagsStreamRef(),this.m_xyStream=this.m_parent.getAttributeStreamRef(0))}nextPath(){return this.m_currentPathIndex=this.m_nextPathIndex,!(this.m_currentPathIndex>=this.m_parent.getPathCount())&&(this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_segmentCount=this.getSegmentCount(this.m_currentPathIndex),this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex),this.m_nextPathIndex++,!0)}previousPath(){return this.m_nextPathIndex!==0&&(this.m_nextPathIndex--,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex),this.m_currentPathIndex=this.m_nextPathIndex,this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex),this.resetToLastSegment(),!0)}getSegmentCount(e){return this.m_parent.isEmptyImpl()?0:this.m_parent.getSegmentCountPath(e)}resetToFirstPath(){this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_nextPathIndex=0,this.m_currentPathIndex=-1,this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1}resetToLastPath(){this.m_nextPathIndex=this.m_parent.getPathCount(),this.m_currentPathIndex=-1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_pathBegin=-1}resetToPath(e){(e<0||e>this.m_parent.getPathCount())&&Mi(""),this.m_nextPathIndex=e,this.m_currentPathIndex=-1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1}isLastPath(){return this.m_currentPathIndex===this.m_parent.getPathCount()-1}isFirstSegmentInPath(){return this.m_currentSegmentIndex===0}isLastSegmentInPath(){return this.m_currentSegmentIndex===this.m_segmentCount-1}resetToFirstSegment(){this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0}resetToLastSegment(){this.m_nextSegmentIndex=this.m_segmentCount,this.m_currentSegmentIndex=-1}resetTo(e){this.m_parent!==e.m_parent&&bn(""),this.m_currentSegmentIndex=e.m_currentSegmentIndex,this.m_nextSegmentIndex=e.m_nextSegmentIndex,this.m_currentPathIndex=e.m_currentPathIndex,this.m_nextPathIndex=e.m_nextPathIndex,this.m_segmentCount=e.m_segmentCount,this.m_bCirculator=e.m_bCirculator,this.m_pathBegin=e.m_pathBegin,this.m_bCurrentPathClosed=e.m_bCurrentPathClosed,this.m_bStripAttributes=e.m_bStripAttributes,this.m_description=e.m_description}resetToVertex(e,i){if(this.m_currentPathIndex>=0&&this.m_currentPathIndex<this.m_parent.getPathCount()){const n=this.getPathBegin();if(e>=n&&e<this.m_parent.getPathEnd(this.m_currentPathIndex))return this.m_currentSegmentIndex=-1,void(this.m_nextSegmentIndex=e-n)}let s;s=i>=0&&i<this.m_parent.getPathCount()&&e>=this.m_parent.getPathStart(i)&&e<this.m_parent.getPathEnd(i)?i:this.m_parent.getPathIndexFromPointIndex(e),this.m_nextPathIndex=s+1,this.m_currentPathIndex=s,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=e-this.m_parent.getPathStart(s),this.m_segmentCount=this.getSegmentCount(s),this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex)}hasNextSegment(){return this.m_nextSegmentIndex<this.m_segmentCount}hasPreviousSegment(){return this.m_nextSegmentIndex>0}nextSegment(){return this.m_currentSegmentIndex!==this.m_nextSegmentIndex&&this.updateSegment(),this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:(this.m_nextSegmentIndex===this.m_segmentCount&&Mi("Segment_iterator_impl::next_segment"),this.m_nextSegmentIndex++),this.m_buffer.get()}previousSegment(){return this.m_bCirculator?this.m_nextSegmentIndex=(this.m_segmentCount+this.m_nextSegmentIndex-1)%this.m_segmentCount:(this.m_nextSegmentIndex===0&&Mi(""),this.m_nextSegmentIndex--),this.m_nextSegmentIndex!==this.m_currentSegmentIndex&&this.updateSegment(),this.m_buffer.get()}nextCurve(){if(!this.m_parent.hasNonLinearSegments())return this.resetToLastSegment(),null;let e=0;for(;;){if(this.m_nextSegmentIndex===this.m_segmentCount||e===this.m_segmentCount)return null;const i=this.getPathBegin()+this.m_nextSegmentIndex;if((31&this.m_segFlagStream.read(i))!==1){this.updateSegment();break}this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:this.m_nextSegmentIndex++,e++}return this.m_currentSegmentIndex!==this.m_nextSegmentIndex&&this.updateSegment(),this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:(this.m_nextSegmentIndex===this.m_segmentCount&&Mi(""),this.m_nextSegmentIndex++),this.m_buffer.get()}getPathBegin(){return this.m_pathBegin}getPathIndex(){return this.m_currentPathIndex}getStartPointIndex(){return this.getPathBegin()+this.m_currentSegmentIndex}getEndPointIndex(){return this.isClosingSegment()?this.getPathBegin():this.getStartPointIndex()+1}updateSegment(){(this.m_nextSegmentIndex<0||this.m_nextSegmentIndex>=this.m_segmentCount||this.m_currentPathIndex<0)&&Mi(""),this.m_currentSegmentIndex=this.m_nextSegmentIndex,this.m_parent.getSegmentFromPath(this.m_currentPathIndex,this.m_currentSegmentIndex,this.m_buffer,this.m_bStripAttributes)}isClosingSegment(){return this.m_bCurrentPathClosed&&this.m_currentSegmentIndex===this.m_segmentCount-1}isCurve(){return this.m_segFlagStream!==null?(31&this.m_segFlagStream.read(this.m_currentSegmentIndex))!==1:!1}isPathClosed(){return this.m_bCurrentPathClosed}setCirculator(e){this.m_bCirculator=e}getImpl(){return this}}class A6{constructor(e){this.m_rasterizedGeometry=null,this.m_quadTree=null,this.m_quadTreeForPaths=null,this.m_refCount=1,e&&e.copyTo(this)}assignCopy(e){return K(0),this}getRasterizedGeometry(){return this.m_rasterizedGeometry}copyTo(e){e!==this&&(K(e.uniqueUse()),e.m_quadTree=this.m_quadTree,e.m_quadTreeForPaths=this.m_quadTreeForPaths,e.m_rasterizedGeometry=this.m_rasterizedGeometry)}clone(){const e=new A6;return this.copyTo(e),e}uniqueUse(){return this.m_refCount===1}addRef(){++this.m_refCount}release(){--this.m_refCount==0&&(this.m_rasterizedGeometry=null,this.m_quadTree=null,this.m_quadTreeForPaths=null)}setRasterizedGeometry(e){K(this.uniqueUse())}setQuadTree(e){K(this.uniqueUse()),this.m_quadTree=e}setQuadTreeForPaths(e){K(this.uniqueUse()),this.m_quadTreeForPaths=e}getQuadTree(){return this.m_quadTree}getQuadTreeForPaths(){return this.m_quadTreeForPaths}}function D6(t){return!(t.isEmpty()||t.getGeometryType()!==me.enumPolyline&&t.getGeometryType()!==me.enumPolygon)&&!(t.getPointCount()<20)}function Nge(t){return!(t.isEmpty()||t.getGeometryType()!==me.enumPolyline&&t.getGeometryType()!==me.enumPolygon)&&!(t.getPointCount()<20)}function NJe(t,e){return t.readPoint2D(e+4)}function xN(t){const e=t.getGeometryType();return e===me.enumEllipticArc?10:e===me.enumBezier?4:e===me.enumRationalBezier2?5:e===me.enumBezier2?2:void bt("")}function lc(t){const e=31&t;return e===4?10:e===2?4:e===8?5:e===16?2:0}function Xg(t,e,i,s){const n=4*en()*(Math.abs(e.vmin)+Math.abs(e.vmax)),r=en();if(t.getMaxDerivative()===1){K(i>0);const y=wte(t,0,e,en(),n);return s[0]=y.root,y.cRoots}let o,l=[];const c=new Ze(e.vmin-n,e.vmax+n);l.push(new Y(c.vmin,c.vmax));let f=0;for(let y=t.getMaxDerivative()-1;y>=0;y--){o=l,l=[];for(let _=0,x=o.length;_<x;_++){if(o[_][0]<o[_][1]){let S,P,A;if(y===t.getMaxDerivative()-1?{root:S,funcAtRoot:P,cRoots:A}=wte(t,y,Ze.construct(o[_][0],o[_][1]),r,.5*n):{root:S,funcAtRoot:P,cRoots:A}=LJe(t,y,Ze.construct(o[_][0],o[_][1]),r,.5*n),A===1){if(y===0)f<i&&(o[_][0]<=e.vmin&&o[_][1]>=e.vmin&&S!==e.vmin&&t.getValue(0,e.vmin)===0&&(S=e.vmin),o[_][0]<=e.vmax&&o[_][1]>=e.vmax&&S!==e.vmax&&t.getValue(0,e.vmax)===0&&(S=e.vmax),s[f]=e.snapClip(S),f>0?s[f]-s[f-1]>n&&f++:f++);else{const k=Y.getNAN();k[0]=o[_][0],k[1]=S,l.push(k);const $=Y.getNAN();$[0]=S,$[1]=o[_][1],l.push($)}continue}}l.push(o[_])}}return f}function $Je(t,e,i,s){const n=new Be,r=kE(new Be(t),new Be(e),i,n);return s[0]=n.value(),r}function vv(t,e,i,s,n,r){const o=Ge(Be,2),l=Sl(new Be(t),new Be(e),new Be(i),s,n,o);return r[0]=o[0].value(),r[1]=o[1].value(),l}function $ge(t,e,i,s,n,r,o){const l=Ge(Be,3),c=k6(new Be(t),new Be(e),new Be(i),new Be(s),n,r,l);return o[0]=l[0].value(),o[1]=l[1].value(),o[2]=l[2].value(),c}function xte(t,e,i,s,n,r,o,l){return RJe(t,e,i,s,n,r,o,l)}function OJe(t,e,i,s,n,r){return FJe(t,e,i,s,n,r)}function RJe(t,e,i,s,n,r,o,l){const c=new Array(i*i);c.fill(0),dn(l,s,0,0,i);const f=new Array(i),y=new Array(i),_=new Array(i);let x=t(l,i,e);const S=100;let P=0;for(P=0;P<S;P++){const A=x;for(let G=0;G<i;++G)y[G]=l[G];if(P%i==0){c.fill(0);for(let G=0;G<i;G++)c[G*i+G]=1}let k=0,$=0;for(let G=0;G<i;++G){for(let W=0;W<i;++W)f[W]=c[G*i+W];const V=x;x=Ste(t,e,l,f,n,r,i);const B=V-x;B>k&&($=G,k=B)}for(let G=0;G<i;G++)f[G]=l[G]-y[G],_[G]=l[G]+(l[G]-y[G]);const F=t(_,i,e);if(F<A&&2*(A-2*x+F)*Ui(A-x-k)<Ui(A-F)*k){x=Ste(t,e,l,f,n,r,i);for(let G=0;G<i;++G)c[$*i+G]=c[(i-1)*i+G],c[(i-1)*i+G]=f[G]}if(A<=x)return t(l,i,e)}return x}function wte(t,e,i,s,n){const r={root:0,funcAtRoot:0,cRoots:0};let o=i.vmin,l=i.vmax,c=0,f=Number.MAX_VALUE,y=t.getValue(e,o),_=t.getValue(e,l),x=0,S=0,P=0;if(y>=0&&_>=0||y<=0&&_<=0)return Math.abs(y)<Math.abs(_)?(r.funcAtRoot=y,r.root=o,r.cRoots=y===0?1:0,r):(r.funcAtRoot=_,r.root=l,r.cRoots=_===0?1:0,r);Math.abs(y)<Math.abs(_)&&(l=St(o,o=l),_=St(y,y=_)),c=o,x=y;let A=!0,k=0;for(;_!==0&&Math.abs(o-l)>s*Math.abs(l)+n;k++){let $=k>64;if(!$){S=y!==x&&_!==x?o*_*x/((y-_)*(y-x))+l*y*x/((_-y)*(_-x))+c*y*_/((x-y)*(x-_)):l-_*(l-o)/(_-y);const F=(3*o+l)/4;if($=!(S>F&&S<l||S>l&&S<F),!$){const G=s*Math.abs(l)+n;if(A){const V=Math.abs(l-c);$=Math.abs(S-l)>=.5*V||V<G}else{const V=Math.abs(c-f);$=Math.abs(S-l)>=.5*V||V<G}}}if($?(S=(o+l)/2,A=!0):A=!1,P=t.getValue(e,S),P===0)return r.root=S,r.funcAtRoot=P,r.cRoots=1,r;if(!$){const F=o-S,G=S-l;if(Math.abs(F)>10*Math.abs(G)){let V=l+3*G;for(let B=0;B<2;B++){const W=t.getValue(e,V);xn(y)*xn(W)>0?(o=V,y=W):V=ji(o,l,.75)}}else if(Math.abs(G)>10*Math.abs(F)){let V=o-3*F;for(let B=0;B<2;++B){const W=t.getValue(e,V);xn(_)*xn(W)>0?(l=V,_=W):V=ji(o,l,.25)}}}f=c,c=l,x=_,xn(y)*xn(P)<0?(l=S,_=P):(o=S,y=P),Math.abs(y)<Math.abs(_)&&(l=St(o,o=l),_=St(y,y=_)),k===128&&bt("Root_finder iterations exceeded")}return r.root=l,r.funcAtRoot=_,r.cRoots=1,r}function LJe(t,e,i,s,n){const r={root:0,funcAtRoot:0,cRoots:0};let o=i.vmin,l=t.getValue(e,o),c=i.vmax,f=t.getValue(e,c);if(l>=0&&f>=0||l<=0&&f<=0)return Math.abs(l)<Math.abs(f)?(r.funcAtRoot=l,r.root=o,r.cRoots=l===0?1:0,r):(r.funcAtRoot=f,r.root=c,r.cRoots=f===0?1:0,r);f<0&&(f=St(l,l=f),c=St(o,o=c));let y=.5*(o+c),_=Math.abs(c-o),x=_,S=t.getValue(e,y),P=t.getValue(e+1,y);const A=1,k=4;let $=k;const F=2;let G=1,V=0,B=0,W=A;const J=32;let re=0;for(;++re<100;){let se;re>J||P===0||W===F&&V>1||W===A&&$<k?(W=A,G>1&&G--):(W=F,B>1&&Math.abs(2*S)>Math.abs(_*P)&&G++),_=x;let oe=!1;if(W===A)do{if(B>2){const ce=16*Math.abs(_);if(.5*Math.abs(o-c)>ce){const ne=Math.min(o,c),de=Math.max(o,c);if(y===ne){se=y,y=ne+ce,x=y-se;break}if(y===de){se=y,y=de-ce,x=y-se;break}}}x=.5*(c-o),se=y,y=o+x,oe=o===y||c===y}while(!1);else for(;;){x=G*S/P,se=y,y-=x,oe=y===se;const ce=Math.min(o,c),ne=Math.max(o,c);if(y<ce){if(G>1){y=se,G--;continue}x=se-ce,y=ce}else if(y>ne){if(G>1){y=se,G--;continue}x=se-ne,y=ne}break}if(oe||Math.abs(x)<n){se!==y&&(S=t.getValue(e,y));break}S=t.getValue(e,y),P=t.getValue(e+1,y);const pe=o,ue=c;S<0?(l=S,o=y):(f=S,c=y),W===F&&(o===pe&&c===ue||B>1&&Math.abs(x)>=.5001*Math.abs(_))?V++:V=0,W===A?($++,B=0):($=0,B++)}return re===100&&bt("Root_finder iterations exceeded"),r.root=y,r.funcAtRoot=S,r.cRoots=1,r}function Ste(t,e,i,s,n,r,o){const l=s.slice(0,o);let c=0;for(let $=0;$<o;$++)c+=s[$]*s[$];if(c=Math.sqrt(c),c>0)for(let $=0;$<o;$++)l[$]/=c;let f=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY;{const $=new Array(o);for(let F=0;F<o;F++)$[F]=F;$.sort((F,G)=>{const V=Math.abs(l[F]),B=Math.abs(l[G]);return V<B?-1:V>B?1:0});for(let F=0;F<o;F++){const G=$[F];if(l[G]===0)continue;let V=(n[G]-i[G])/l[G],B=(r[G]-i[G])/l[G];B<V&&(B=St(V,V=B)),V>f&&(f=V),B<y&&(y=B)}}let _=0;const x=(Math.abs(f)+Math.abs(y))*en()*100,S=new Array(o),P=l.slice();function A($,F){for(let G=0,V=o;G<V;G++)S[G]=i[G]+$*P[G];return t(S,o,e)}x>0&&(_=OJe(A,null,f,0,y,x));const k=A(_);for(let $=0,F=o;$<F;$++)i[$]=cn(S[$],n[$],r[$]);return k}function FJe(t,e,i,s,n,r){const o=iz();let l=s,c=t(l,e),f=i,y=n,_=t(f,e),x=t(y,e);c>_&&(c=_,l=f),c>x&&(c=x,l=y);let S=f,P=y,A=_,k=x;A>k&&(A=St(k,k=A),P=St(S,S=P));let $=l-S,F=S-P;const G=.5*Math.min(r,y-f),V=2*G,B=100;let W,J=0;for(W=0;W<B&&!(y-f<=V);++W){const re=f+.5*(y-f);let se=J>0;if(!se&&Math.abs(F)<=G&&(se=!0,J=3),!se){const ue=l-S,ce=l-P,ne=ue*(c-k);let de=ce*(c-A),Se=ce*de-ue*ne;de=2*(de-ne),de>0&&(Se=-Se),de=Math.abs(de),de===0||Math.abs(Se)>=Math.abs(de*F/2)||Se<=de*(f-l)||Se>=de*(y-l)?(se=!0,J=3):(F=$,$=Se/de)}se&&(F=l>=re?f-l:y-l,$=o*F,J--);let oe=l+$;oe<f+G?oe=f+G:oe>y-G&&(oe=y-G);const pe=t(oe,e);pe<c?(oe>=l?(f=l,_=c):(y=l,x=c),P=S,S=l,l=oe,k=A,A=c,c=pe):(oe<l?(f=oe,_=pe):(y=oe,x=pe),pe<=A||S===l?(P=S,S=oe,k=A,A=pe):(pe<=k||P===l||P===S)&&(P=oe,k=pe))}return l}function kE(t,e,i,s){return t.isZero()?e.isZero()?-1:0:(s.setE(e.clone().negateThis().divThisE(t)),i.containsCoordinate(s.value())?1:0)}function Sl(t,e,i,s,n,r){if(t.value()===0)return n?(r[0].set(1),s.containsCoordinate(r[0].value())?1:0):kE(e,i,s,r[0]);if(n){let S=2;return r[0].set(1),r[1].setE(i).divThisE(t),r[1].eq(r[0])&&(r[1].set(1),S=1),s.containsCoordinate(r[1].value())||(S=1),s.containsCoordinate(r[0].value())||(S--,r[0].setE(r[1])),S===2&&r[0].value()>r[1].value()&&(r[1]=St(r[0],r[0]=r[1])),S}const o=e.clone().sqrThis().subThisE(t.clone().mulThisE(i).mulThisE(pKe));if(o.lt(Tx))return 0;const l=new Be(e.value()>=0?1:-1),c=o.clone().sqrtThis(),f=new Be(-.5).mulThisE(e.clone().addThisE(l.clone().mulThisE(c)));let y=0;r[0].setE(f.divE(t));const _=new Be(r[0].value()),x=new Be(t.value()).mulE(_).addE(new Be(e.value()).mulE(_).addE(new Be(i.value())));return x.isZero()||Ete(r[0],t,e,i,r[0]),s.containsCoordinate(r[0].value())&&y++,c.value()!==0&&f.value()!==0&&(r[y].assign(i.divE(f)),_.set(r[y].value()),x.assign(new Be(t.value()).mulE(_).addE(new Be(e.value()).mulE(_).addE(new Be(i.value())))),x.isZero()||Ete(r[y],t,e,i,r[y]),s.containsCoordinate(r[y].value())&&y++,y===2&&r[0].value()>r[1].value()&&(r[1]=St(r[0],r[0]=r[1]))),y}function k6(t,e,i,s,n,r,o){if(t.value()===0)return Sl(e,i,s,n,r,o);if(r){let l=1;o[0].set(1);const c=o.slice(l),f=Sl(t,e.addE(t),s.negate(),n,!1,c);if(f>0){l+=f;for(let _=1;_<l;_++)o[_].eq(Kp)&&(o[l-1]=St(o[_],o[_]=o[l-1]),l--)}const y=o.slice(0,l);y.sort((_,x)=>_.value()<x.value()?-1:_.value()>x.value()?1:0);for(let _=0;_<l;++_)o[_]=y[_];return l}return GJe(t,e,i,s,n,o)}function Oge(t,e,i,s,n,r){return(r<e||e<0)&&Je("nth_degree_real_roots"),jJe(t,e,i,s,n)}function az(t,e,i,s){return{coef0:t.clone(),coef1:e.clone(),coef2:i.clone(),coef3:s.clone(),calcF(n){return this.coef0.clone().mulThis(n).addThisE(this.coef1).mulThis(n).addThisE(this.coef2).mulThis(n).addThisE(this.coef3)},calcDF(n){return this.coef0.clone().mulThis(3).mulThis(n).addThisE(this.coef1.clone().mulThisByPower2(2)).mulThis(n).addThisE(this.coef2)},estimateError(n){const r=Math.abs(n),o=((this.coef0.eps()*r+this.coef1.eps())*r+this.coef2.eps())*r+this.coef3.eps()+this.calcF(n).eps(),l=this.coef0.clone().mulThis(n).mulThis(3).addThisE(this.coef1.clone().mulThis(2)).mulThis(n).addThisE(this.coef2);if(l.isZero()){const c=this.coef0.clone().mulThis(n).mulThis(6).addThisE(this.coef1.clone().mulThis(2));if(c.isZero()){const f=this.coef0.clone().mulThis(6);return Math.pow(6*o/Math.abs(f.value()),1/3)}return Math.sqrt(2*o/Math.abs(c.value()))}return o/Math.abs(l.value())}}}class zJe{updateCoefs(e){if(this.lastDeriv1===e)return this.curCoefs=this.derivCoefs1,void(this.lastUsed=1);if(this.lastDeriv2===e)return this.curCoefs=this.derivCoefs2,void(this.lastUsed=2);let i;this.lastUsed===1?(i=this.derivCoefs2,this.lastDeriv2=e,this.lastUsed=2):(i=this.derivCoefs1,this.lastDeriv1=e,this.lastUsed=1),i.length=this.truePower-e+1;for(let s=0,n=this.truePower-e;s<=n;++s){i[s]=this.coefs[s+e].clone();let r=s+e,o=r--;for(let l=1;l<e;l++)o*=r--;i[s].mulThis(o)}this.curCoefs=i}constructor(e,i,s,n){this.derivCoefs1=[],this.derivCoefs2=[],this.lastDeriv1=-1,this.lastDeriv2=-1,this.lastUsed=-1,this.curCoefs=null,this.coefs=e,this.power=i,this.truePower=0;for(let r=i;r>=1;r--)if(this.coefs[r].value()!==0){this.truePower=r;break}}getMaxDerivative(){return this.truePower+1}getValue(e,i){let s=this.coefs;e===0?s=this.coefs:(this.updateCoefs(e),s=this.curCoefs);const n=new Fr(0);let r=1;for(let o=0,l=this.truePower-e;o<=l;++o)n.pe(r*s[o].value()),r*=i;return n.getResult()}getError(e){const i=Math.abs(e),s=new Fr(0),n=new Be(1),r=new Be(0);for(let l=0,c=this.power;l<=c;++l)r.addThisE(this.coefs[l].mulE(n)),s.pe(n.value()*this.coefs[l].eps()),n.mulThis(i);s.pe(r.eps());let o=1;for(let l=1;l<=this.truePower;++l){o*=l,this.updateCoefs(l);const c=new Be(1),f=new Be(0);for(let y=0,_=this.truePower-l;y<=_;++y)f.addThisE(this.curCoefs[y].mulE(c)),c.mulThis(e);if(!f.isZero())return Math.pow(o*s.getResult()/Math.abs(f.value()),1/l)}return 0}}function Rge(t,e,i,s,n,r){let o=t,l=e,c=l-o;if(!r){let S=s.calcF(t).value(),P=s.calcF(e).value();if((S>0||S>P)&&(l=St(o,o=l),P=St(S,S=P)),S>=0||P<=0)return!1}let f,y=!1,_=i,x=0;for(;x<100;x++){const S=s.calcF(_);if(f=s.calcDF(_),f.isZero())return!1;if(!S.value()||x>3&&S.isZero()){y=!0;break}r||(S.value()<0?o=_:l=_);const P=S.value()/f.value(),A=_-P;r||(A>=o&&A<=l||A>=l&&A<=o)&&Math.abs(P)<=.5*c?(_=A,c=Math.abs(P)):(c=Math.abs(.5*(l-o)),_=.5*(o+l))}return!!y&&(n.set(_,s.estimateError(_)),!0)}function qJe(t,e,i,s,n,r,o,l){return Rge(t,e,i.value(),az(s,n,r,o),l,!1)}class VJe{constructor(e,i,s){this.coefs=Ge(Be,3),this.coefs[0].setE(e),this.coefs[1].setE(i),this.coefs[2].setE(s)}calcF(e){const i=new Be(e);return this.coefs[0].mulE(i).addE(this.coefs[1]).mulE(i).addE(this.coefs[2])}calcDF(e){const i=new Be(e);return Be.st_mulByPower2(this.coefs[0],2).mulE(i).addE(this.coefs[1])}estimateError(e){const i=Math.abs(e),s=(this.coefs[0].eps()*i+this.coefs[1].eps())*i+this.coefs[2].eps()+this.calcF(e).eps(),n=new Be(2).mulE(this.coefs[0]).mul(e).addE(this.coefs[1]);if(n.isZero()){const r=this.coefs[0].value();return Math.sqrt(s/Math.abs(r))}return s/Math.abs(n.value())}}function Ete(t,e,i,s,n){return Rge(0,0,t.value(),new VJe(e,i,s),n,!0)}function GJe(t,e,i,s,n,r){const o=Ge(Be,3);let l=0;const c=e.negate().divThisE(t.clone().mulThis(3));n.containsCoordinate(c.value())&&(o[0].setE(c),l=1);const f=Ge(Be,2),y=Sl(t.mul(3),e.mul(2),i,n,!1,f);if(y<0)return s.isZero()?-1:0;for(let A=0;A<y;A++)n.containsCoordinate(f[A].value())&&o[l++].setE(f[A]);sd(o,0,l,(A,k)=>A.value()<k.value()?-1:A.value()>k.value()?1:0);const _=Ge(Be,5);_[0].set(n.vmin);for(let A=0;A<l;A++)_[1+A].setE(o[A]);_[1+l].set(n.vmax);const x=l+2;let S=1,P=0;{const A=_[0].clone();if(t.clone().mulThisE(A).addThisE(e).mulThisE(A).addThisE(i).mulThisE(A).addThisE(s).isZero()){const k=az(t,e,i,s);A.setError(k.estimateError(A.value())),r[P]=A,P++,S++}}for(let A=S;A<x;A++){const k=_[A].clone(),$=t.clone().mulThisE(k).addThisE(e).mulThisE(k).addThisE(i).mulThisE(k).addThisE(s).isZero();if($||!_[A].eq(_[A-1])){if($||qJe(_[A-1].value(),_[A].value(),_[A-1].clone().addThisE(_[A]).divThisByPower2(2),t,e,i,s,k)){if(P>0&&k.eq(r[P-1]))continue;if(P>=3&&bt("cubic_polynomial_solver_too_many_roots"),$){const F=az(t,e,i,s);k.setError(F.estimateError(k.value()))}r[P]=k,P++}if(_[A].value()===n.vmax)break;$&&A++}}return P}function jJe(t,e,i,s,n,r){const o=new zJe(t,e,i,en());let l=0;if(o.truePower===2)l=Sl(t[2],t[1],t[0],i,s,n);else if(o.truePower===1)l=kE(t[1],t[0],i,n[0]);else{if(o.truePower===0)return t[0].value()?0:-1;{const c=[];c.length=e,l=Xg(o,i,e,c);for(let f=0;f<l;f++)n[f].set(c[f])}}for(let c=0;c<l;c++)n[c].setError(o.getError(n[c].value()));return l}var Cte=vr;class em extends o5{constructor(e){e===void 0||WA(e,"vd")?(super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=new Y(0,0)):e.from?(super({XStart:e.from.x,YStart:e.from.y,XEnd:e.to.x,YEnd:e.to.y,...e.vd}),this.m_cp=e.cp.clone()):e.points?(super({XStart:e.points[0].x,YStart:e.points[0].y,XEnd:e.points[2].x,YEnd:e.points[2].y,...e.vd}),this.m_cp=e.points[1].clone()):e.copy?(super(e),this.m_cp=e.copy.m_cp.clone()):(K(0),super({XStart:0,YStart:0,XEnd:0,YEnd:0,...e.vd}),this.m_cp=new Y(0,0))}getBoundary(){return Xh(this)}assignMove(e){return K(0),this}assignCopy(e){return this!==e&&e.copyTo(this),this}construct(e,i,s){this.setStartXY(e),this.m_cp.assign(i),this.setEndXY(s),B4(this)}constructPoints(e){this.setStartXY(e[0]),this.m_cp.assign(e[1]),this.setEndXY(e[2]),B4(this)}getGeometryType(){return me.enumBezier2}queryEnvelope(e){if(e instanceof xe){if(e.setCoords(this.getStartXY()),e.mergeNe(this.getEndXY()),e.contains(this.m_cp))return;const i=Ate(this);if(i!==null){const s=new Y;for(const n of i.specialPoints)this.queryCoord2D(n,s),e.mergeNe(s)}else{const s=[];Hge(this,s);const n=new Y;for(const r of s)this.queryCoord2D(r,n),e.mergeNe(n)}}else K(0)}applyTransformation(e){if(e instanceof _i){const i=Ge(Y,3);return this.queryControlPoints(i),e.transformPoints2D(i,3,i),this.setStartXY(i[0]),this.m_cp.assign(i[1]),this.setEndXY(i[2]),void this.afterCompletedModification()}K(0)}createInstance(){return new em({vd:this.m_description})}calculateLength2D(){return N6(this,1,!1)}calculateLowerLength2D(){return Y.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return this.calculateUpperLength2D_()}calculateUpperLength2D_(){return Y.distance(this.getStartXY(),this.m_cp)+Y.distance(this.getEndXY(),this.m_cp)}queryCoord2D(e,i){this.queryCoord2DExtended(e,i,!1)}queryCoord2DExtended(e,i,s){const n=Ge(Y,3);this.queryControlPoints(n),Gc(n,e,i,s)}queryCoord2DE(e,i){fQe()}getCoordX(e){if(e<0||e>1){const i=new Y;return this.queryCoord2DExtended(e,i,!0),i.x}if(e<=.5){const i=yo(this.getStartX(),this.m_cp.x,e),s=yo(this.m_cp.x,this.getEndX(),e);return yo(i,s,e)}{const i=Lr(this.getStartX(),this.m_cp.x,e),s=Lr(this.m_cp.x,this.getEndX(),e);return Lr(i,s,e)}}getCoordY(e){if(e<0||e>1){const i=new Y;return this.queryCoord2DExtended(e,i,!0),i.y}if(e<=.5){const i=yo(this.getStartX(),this.m_cp.x,e),s=yo(this.m_cp.x,this.getEndX(),e);return yo(i,s,e)}{const i=Lr(this.getStartY(),this.m_cp.y,e),s=Lr(this.m_cp.y,this.getEndY(),e);return Lr(i,s,e)}}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createQuadraticBezier();if(this.cutBezierIgnoreAttributes(e,i,r),n)return;r.assignVertexDescription(this.m_description);const o=this.m_description.getAttributeCount();if(o>1){for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=Cte.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(e,c,y);r.setStartAttribute(c,y,_)}}for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=Cte.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(i,c,y);r.setEndAttribute(c,y,_)}}}}queryDerivative(e,i){pQe()}cutBezierIgnoreAttributes(e,i,s){if((e<0||i>1||e>i)&&Je("Quadratic_bezier.cut_bezier_ignore_attributes"),e===0&&i===1)return s.setStartXY(this.getStartXY()),s.m_cp.assign(this.m_cp),void s.setEndXY(this.getEndXY());const n=Ge(Y,3);this.queryControlPoints(n),$E(n,e,i,n),s.constructPoints(n)}splitBezierIgnoreAttributes(e,i,s){K(0)}getAttributeAsDbl(e,i,s){return K(0),0}getClosestCoordinate(e,i){return $6(this,e,Ze.unit(),i)}getClosestCoordinateOnInterval(e,i,s=-1){return $6(this,e,i,!1)}getYMonotonicParts(e,i){return K(0),0}getMonotonicParts(e,i){e.length<2&&Je("");const s=Bge(this);let n=0;if(s.specialPointsCount()===2)return 0;K(e.length>=s.specialPointsCount()-1);for(let r=1,o=s.specialPointsCount();r<o;++r)this.queryCut(s.specialPoints[r-1],s.specialPoints[r],e[n],i),n++;for(let r=0;r<n;++r)Wge(e[r].get());return n}intersectionWithAxis2D(e,i,s,n){const r=Ge(Be,3),o=Ge(Be,2),l=new Ze(0,1);let c=0;if(e){if(r[0]=new Be(this.getStartY()).sub(i),r[1]=new Be(this.m_cp.y).subE(new Be(this.getStartY())).mulThisByPower2(2),r[2]=new Be(this.getStartY()).add(this.getEndY()).subE(new Be(this.m_cp.y).mulThisByPower2(2)),c=Sl(r[2],r[1],r[0],l,!1,o),s)for(let f=0;f<c;f++)s[f]=this.getCoordX(o[f].value())}else if(r[0]=new Be(this.getStartX()).sub(i),r[1]=new Be(this.m_cp.x).subE(new Be(this.getStartX())).mulThisByPower2(2),r[2]=new Be(this.getStartX()).add(this.getEndX()).subE(new Be(this.m_cp.x).mulThisByPower2(2)),c=Sl(r[2],r[1],r[0],l,!1,o),s)for(let f=0;f<c;f++)s[f]=this.getCoordY(o[f].value());if(n)for(let f=0;f<c;f++)n[f]=o[f].value();else s&&tz(s,c);return c}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const s=[0,0],n=this.intersectionWithAxis2D(!0,e,s,null);return K(n!==2),n===-1?i:s[0]}isCurve(){return!0}isLine(){return!1}isDegenerate(e){return t7(this,e)}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){K(0)}clone(e){const i=this.createInstance();return this.copyTo(i),i}queryInterval(e,i){if(e===0){const s=new xe;this.queryEnvelope(s);const n=new Ze;return i===0?s.queryIntervalX(n):s.queryIntervalY(n),n}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const s=Ge(Y,4);this.queryControlPoints(s),$E(s,e.vmin,e.vmax,s),i.setFromPoints(s,4)}changeEndPoints2D(e,i){if(e.isEqual(this.m_XStart,this.m_YStart)&&i.isEqual(this.m_XEnd,this.m_YEnd))return;const s=this.m_cp.isEqual(this.m_XStart,this.m_YStart),n=this.m_cp.isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(e),this.setEndXY(i),s?this.m_cp.setCoordsPoint2D(e):n&&this.m_cp.setCoordsPoint2D(i),this.normalizeAfterEndpointChange()}tToLength(e){return N6(this,e,!0)}lengthToT(e){return iQe(this,e)}calculateWeightedAreaCentroid2D(e){const i=Ge(Y,3);cQe(this,i);const s=i[2],n=i[1],r=new Y,o=s.y*n.x-s.x*n.y;r.x=-(4*s.x+5*n.x)*o/60,r.y=-(4*s.y+5*n.y)*o/60;const l=Mte(this);return r.x+=(i[0].x-e.x)*l,r.y+=(i[0].y-e.y)*l,r}calculateWeightedCentroid2D(){const e=new Y;return this.isDegenerate(0)?(e.setCoords(0,0),e):sQe(this)?(e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e):(e.assign(oQe(this,1)),e)}getControlPoint1(){return this.m_cp.clone()}setControlPoint1(e){this.m_cp.setCoordsPoint2D(e),this.afterCompletedModification()}queryControlPoints(e){e[0].assign(this.getStartXY()),e[1].assign(this.m_cp),e[2].assign(this.getEndXY())}setControlPoints(e){K(0)}getTangent(e){return K(0),Y.getNAN()}getDerivative(e){return K(0),Y.getNAN()}getCurvature(e){return K(0),0}isIntersecting(e,i,s){return K(0),!1}isIntersectingPoint(e,i,s){return K(0),!1}isIntersectingPoint3D(e,i,s,n,r=1){return K(0),!1}queryAttributeAsDbl(e,i,s,n){K(0)}isMonotoneQuickAndDirty(){return!1}getMonotonicPartParams(e,i){return K(0),0}normalizeAfterEndpointChange(){return!1}orientBottomUp(){K(0)}isDegenerateToLineHelper(e){const i=[e];if(!gj(this,i))return!1;const s=this.getEndXY().sub(this.getStartXY()),n=s.length(),r=this.getControlPoint1();return r.sub(this.getStartXY()),!(Math.abs(r.crossProduct(s))/n>i[0])}copyIgnoreAttributes(e){K(0)}calculateArea2DHelper(){return Mte(this)}absNorm(){return lQe(this)}queryEnvelopeW(e,i){const s=Ge(Y,3);this.queryControlPoints(s),NE(s,e,i)}setSegmentFromCoords(e,i){K(0)}snapControlPoints(e){return K(0),!1}writeInBufferStream(e,i){const s=new Float64Array(2);return s[0]=this.m_cp.x,s[1]=this.m_cp.y,e.writeRangeFromArray(i,s.length,s,!0,1),i+s.length}readFromBufferStream(e,i){const s=new Float64Array(2);e.queryRange(i,s.length,s,!0,1),this.m_cp.x=s[0],this.m_cp.y=s[1],this.m_cachedValues=null}needsSnapControlPoints(e){return K(0),!1}calculateSpecialPointsForCracking(e,i){return K(0),0}ensureXYMonotone(){return K(0),!1}setCoordsForIntersector(e,i,s){aQe(this,e,i,s)}copyToImpl(e){const i=e;i.m_cp.setCoordsPoint2D(this.m_cp),Xge(i,Ate(this))}reverseImpl(){}equalsImplTol(e,i){return K(0),!1}equalsImpl(e){const i=e;return!!this.m_cp.equals(i.m_cp)}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){B4(this)}intersect(e,i,s,n,r){return qv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){return nQe(this,e,i.length,i,s)}intersect_(e,i,s,n){return K(0),0}endPointModified(){B4(this)}clearEndPointModified(){K(0)}}em.type=me.enumBezier2;class Lge{constructor(e){return e.coefsT?(this.m_zeroCtor=e.zeroCtor,this.m_elements=e.coefsT.map(i=>i.clone()),K(this.m_elements.length===e.power+1),void this.updatePower()):e.coef0?(this.m_zeroCtor=e.zeroCtor,void(this.m_elements=[e.coef0.clone()])):e.copy?(this.m_zeroCtor=e.copy.m_zeroCtor,void(this.m_elements=e.copy.m_elements.map(i=>i.clone()))):(this.m_zeroCtor=e.zeroCtor,void(this.m_elements=[new this.m_zeroCtor]))}construct(e,i){return this.m_elements=e.map(s=>s.clone()),this.updatePower(),this}construct0(e){return this.m_elements.length=0,this.m_elements.push(e.clone()),this.updatePower(),this}assignCopy(e){return this.m_elements=e.m_elements.map(i=>i.clone()),this.updatePower(),this}assignMove(e){return this.m_elements=e.m_elements,e.m_elements=[],this.updatePower(),this}power(){return this.m_elements.length-1}addElement(e){this.m_elements.push(e.clone())}fmSubThis(e,i){return K(0),this}addThis(e){const i=Math.min(this.power(),e.power());for(let n=0;n<=i;++n)this.m_elements[n].addThis(e.m_elements[n]);const s=e.power();this.m_elements.length=Math.max(this.power(),e.power())+1;for(let n=i+1;n<=s;++n)this.m_elements[n]=e.m_elements[n];return this.updatePower(),this}add0(e){return this.m_elements[0].addThis(e),this.updatePower(),this}addNumber0(e){return K(0),this}sub(e){const i=Math.min(this.power(),e.power());for(let n=0;n<=i;++n)this.m_elements[n].subThis(e.m_elements[n]);const s=e.power();this.m_elements.length=Math.max(this.power(),e.power())+1;for(let n=i+1;n<=s;++n)this.m_elements[n]=e.m_elements[n].clone(),this.m_elements[n].negateThis();return this.updatePower(),this}sub0(e){return K(0),this}subNumber0(e){return K(0),this}subShifted(e,i){const s=this.power(),n=e.power()+i,r=Math.min(this.power(),n);let o=0;for(let l=i;l<=r;++l)this.m_elements[l].subThis(e.m_elements[o]),o++;if(n<=s)return this.updatePower(),this;this.m_elements.length=n+1;for(let l=s+1;l<this.m_elements.length;++l)this.m_elements[l]=new this.m_zeroCtor;for(let l=r+1;l<=n;++l)this.m_elements[l].subThis(e.m_elements[o++]);return this.updatePower(),this}subShiftedWithCoef(e,i,s){const n=this.power(),r=e.power()+s,o=Math.min(this.power(),r);let l=0;for(let c=s;c<=o;++c)this.m_elements[c].fmSubThis(e.m_elements[l],i),l++;if(r<=n)return this.updatePower(),this;this.m_elements.length=r+1;for(let c=n+1;c<this.m_elements.length;++c)this.m_elements[c]=new this.m_zeroCtor;for(let c=o+1;c<=r;++c)this.m_elements[c].fmSubThis(e.m_elements[l++],i);return this.updatePower(),this}mulThis(e){if(this.constructor===e.constructor){const i=e,s=[];for(let n=0,r=this.power();n<=r;n++)for(let o=0,l=i.power();o<=l;o++){const c=this.m_elements[n].clone();c.mulThis(i.m_elements[o]),n+o<s.length?s[n+o].addThis(c):s.push(c)}this.m_elements=s}else for(let i=0,s=this.power();i<=s;i++)this.m_elements[i].mulThis(e);return this.updatePower(),this}mulElementThis(e){for(let i=0,s=this.power();i<=s;i++)this.m_elements[i].mulThis(e);return this.updatePower(),this}mulNumber0(e){return K(0),this}mulBigint0(e){return K(0),this}mulBigIntThis(e){return K(0),this}mulInt320(e){return K(0),this}div0(e){return K(0),this}absThis(){return K(0),this}div(e,i,s){if(this.power()<e.power())return s.assignCopy(this),void i.setZero();s.setZero(),i.setZero();const n=e.getElement(e.power()),r=this.clone();let o=r.power();const l=r.power()-e.power();let c=l;for(i.m_elements=Ge(i.m_zeroCtor,l+1);;){if(o<e.power()){s.assignMove(r);break}if(o===r.power()){const f=r.getElement(r.power());f.divThis(n),r.subShiftedWithCoef(e,f,r.power()-e.power()),i.m_elements[c]=f.clone()}c--,o--}s.updatePower(),i.updatePower()}divThis(e){return K(0),this}subThis(e){const i=Math.min(this.power(),e.power());for(let n=0;n<=i;++n)this.m_elements[n].subThis(e.m_elements[n]);const s=e.power();this.m_elements.length=Math.max(this.power(),e.power())+1;for(let n=i+1;n<=s;++n)this.m_elements[n]=e.m_elements[n].clone(),this.m_elements[n].negateThis();return this.updatePower(),this}sub0This(e){return this.m_elements[0].subThis(e),this.updatePower(),this}subFrom(e,i){K(0)}isZero(){return this.power()===0&&this.m_elements[0].isZero()}negateThis(){for(let e=this.m_elements.length-1;e>=0;e--)this.m_elements[e].negateThis();return this}getElement(e){return this.m_elements[e].clone()}setElement(e,i){return this.m_elements[e]=i.clone(),this}evaluate(e){const i=this.power(),s=this.m_elements[i].clone();for(let n=i-1;n>=0;--n)s.mulThis(e),s.addThis(this.m_elements[n]);return s}equals(e){if(this===e)return!0;if(this.power()!==e.power())return!1;for(let i=this.m_elements.length-1;i>=0;i--)if(!this.m_elements[i].equals(e.m_elements[i]))return!1;return!0}updatePower(){for(let e=this.m_elements.length-1;e>0&&this.m_elements[e].isZero();e--)this.m_elements.pop();return this}setZero(){return this.m_elements.length=1,this.m_elements[0]=new this.m_zeroCtor,this.updatePower(),this}derivative(e){if(this.power()<e)return this.clone().setZero();if(e===0)return this.clone();const i=new this.constructor({coefsT:this.m_elements.slice(e),power:this.power()-e});for(let s=e,n=this.power();s<=n;s++){let r=BigInt(s);for(let o=s-1,l=s-e;o>l;--o)r*=BigInt(o);i.m_elements[s-e].mulBigIntThis(r)}return i.updatePower(),i}derivative1This(){if(this.m_elements.length>1){this.m_elements=this.m_elements.slice(1);for(let e=1,i=this.power();e<=i;e++)this.m_elements[e].mulThis(_t.constructInt32(e+1))}else this.m_elements.length=0,this.m_elements.push(new this.m_zeroCtor);return this}limitPrecisionThis(e){for(let i=this.power();i>=0;--i)this.m_elements[i].limitPrecisionThis(e);return this.updatePower(),this}hiBitIndex(){return this.m_elements.reduce((e,i)=>{const s=i.hiBitIndex();return e<s?s:e},0)}shiftRight(e){return this.m_elements.splice(0,e),this.updatePower(),this}static evaluateCoefs(e,i,s){const n=e.power();s.construct0(e.getElement(0).evaluate(i));for(let r=1;r<=n;++r)s.addElement(e.getElement(r).evaluate(i));s.updatePower()}}class Ti extends Lge{constructor(e){super(e===void 0?{zeroCtor:_t}:{...e,zeroCtor:_t})}clone(){return new Ti({copy:this})}absEvaluate(e){const i=this.power(),s=this.m_elements[i].clone();s.absThis();const n=e.clone();n.absThis();for(let r=i-1;r>=0;--r)s.mulThis(n),s.addThis(this.m_elements[r].abs());return s}}class Ro extends Lge{constructor(e){super(e===void 0?{zeroCtor:Ti}:{...e,zeroCtor:Ti})}clone(){return new Ro({copy:this})}constructFromMPValues(e,i){this.m_elements.length=0;for(let s=0;s<=i;++s)this.m_elements.push(new Ti({coef0:e[s]}));return this.updatePower(),this}}function BJe(){return{polypoly1:new Ro,polypoly2:new Ro,polyX2:new Ti,polyY2:new Ti,polyX2Deriv:new Ti,polyY2Deriv:new Ti,polypolyX1:new Ro,polypolyY1:new Ro,polypolyX1Deriv:new Ro,polypolyY1Deriv:new Ro,lazyPolypolyD1:new Ro,lazyPolypolyD1Deriv:new Ro,lazyPolyD2:new Ti,lazyPolyD2Deriv:null,polypoly11:new Ro,polypoly12:new Ro,tempPp:new Ro,tempPp1:new Ro,tempPp2:new Ro,tempP:new Ti,tempP1:new Ti,tempP2:new Ti}}function Mx(t,e,i,s,n,r,o,l,c,f,y,_,x,S,P,A,k,$=!1){const F=BJe();F.polyX2.construct(o,l),F.polyY2.construct(c,f),F.polypolyX1.constructFromMPValues(t,e),F.polypolyY1.constructFromMPValues(i,s),F.polypoly11.assignCopy(F.polypolyX1),F.polypoly12.assignCopy(F.polypolyY1),y&&(F.lazyPolyD2.construct(y,_),F.polypoly11.mulElementThis(F.lazyPolyD2),F.polypoly12.mulElementThis(F.lazyPolyD2)),n?(F.lazyPolypolyD1.constructFromMPValues(n,r),F.lazyPolypolyD1Deriv=new Ro({copy:F.lazyPolypolyD1}),F.lazyPolypolyD1Deriv.derivative1This(),F.tempPp.assignCopy(F.lazyPolypolyD1),F.tempPp.mulElementThis(F.polyX2),F.polypoly11.subThis(F.tempPp),F.tempPp.assignCopy(F.lazyPolypolyD1),F.tempPp.mulElementThis(F.polyY2),F.polypoly12.subThis(F.tempPp)):(F.polypoly11.sub0This(F.polyX2),F.polypoly12.sub0This(F.polyY2)),F.polypolyX1Deriv.assignCopy(F.polypolyX1),F.polypolyX1Deriv.derivative1This(),F.polypolyY1Deriv.assignCopy(F.polypolyY1),F.polypolyY1Deriv.derivative1This(),n&&(F.polypolyX1Deriv.mulThis(F.lazyPolypolyD1),F.tempPp2.assignCopy(F.lazyPolypolyD1Deriv),F.tempPp2.mulThis(F.polypolyX1),F.polypolyX1Deriv.subThis(F.tempPp2),F.polypolyY1Deriv.mulThis(F.lazyPolypolyD1),F.tempPp2.assignCopy(F.lazyPolypolyD1Deriv),F.tempPp2.mulThis(F.polypolyY1),F.polypolyY1Deriv.subThis(F.tempPp2)),F.polyX2Deriv.assignCopy(F.polyX2),F.polyX2Deriv.derivative1This(),F.polyY2Deriv.assignCopy(F.polyY2),F.polyY2Deriv.derivative1This(),y&&(K(F.lazyPolyD2Deriv===null),F.lazyPolyD2Deriv=new Ti({copy:F.lazyPolyD2}),F.lazyPolyD2Deriv.derivative1This(),F.polyX2Deriv.mulThis(F.lazyPolyD2),F.tempP1.assignCopy(F.lazyPolyD2Deriv),F.tempP1.mulThis(F.polyX2),F.polyX2Deriv.subThis(F.tempP1),F.polyY2Deriv.mulThis(F.lazyPolyD2),F.tempP1.assignCopy(F.lazyPolyD2Deriv),F.tempP1.mulThis(F.polyY2),F.polyY2Deriv.subThis(F.tempP1)),F.polypoly1.assignCopy(F.polypoly11),F.polypoly1.mulElementThis(F.polyX2Deriv),F.tempPp.assignCopy(F.polypoly12),F.tempPp.mulElementThis(F.polyY2Deriv),F.polypoly1.addThis(F.tempPp),F.polypoly2.assignCopy(F.polypolyX1Deriv),F.polypoly2.mulElementThis(F.polyY2Deriv),F.tempPp.assignCopy(F.polypolyY1Deriv),F.tempPp.mulElementThis(F.polyX2Deriv),F.polypoly2.subThis(F.tempPp);let G=[];const V=[];k||(k=[]),A||(A=[]),uz(F.polypoly11,F.polypoly12,F.tempP);let B=57,W=.25*Number.EPSILON;const J=[];let re=L0(F.tempP,x,P,W,B,J);if(re<0)return-1;for(let ue=0;ue<re;ue++){Ti.evaluateCoefs(F.polypoly11,_t.constructDouble(J[ue]),F.tempP1);const ce=[];let ne=L0(F.tempP1,x,S,W,B,ce);if(ne!==0)if(Ti.evaluateCoefs(F.polypoly12,_t.constructDouble(J[ue]),F.tempP2),ne<0){ne=L0(F.tempP2,x,S,W,B,ce),ne<0&&bt("mp_curve_proximity");for(let de=0;de<ne;de++)V.push(rr(ce[de],J[ue]))}else{const de=F.tempP2.absEvaluate(Lh);de.mulThis(_t.constructDouble(1e-12));for(let Se=0;Se<ne;Se++){const Pe=F.tempP2.evaluate(_t.constructDouble(ce[Se]));Pe.absThis(),Pe.lt(de)&&V.push(rr(ce[Se],J[ue]))}}}re=V.length,uz(F.polypoly1,F.polypoly2,F.tempP),B=57,W=.25*Number.EPSILON;const se=[];let oe=L0(F.tempP,x,P,W,B,se);oe<0&&(oe=0);for(let ue=0;ue<oe;ue++){Ti.evaluateCoefs(F.polypoly1,_t.constructDouble(se[ue]),F.tempP1);const ce=[];let ne=L0(F.tempP1,x,S,W,B,ce);if(ne!==0)if(Ti.evaluateCoefs(F.polypoly2,_t.constructDouble(se[ue]),F.tempP2),ne<0){if(ne=L0(F.tempP2,x,S,W,B,ce),ne<0)continue;for(let de=0;de<ne;de++)G.push(rr(ce[de],se[ue]))}else{const de=F.tempP2.absEvaluate(Lh);de.mulThis(_t.constructDouble(1e-12));for(let Se=0;Se<ne;Se++){const Pe=F.tempP2.evaluate(_t.constructDouble(ce[Se]));Pe.absThis(),Pe.lt(de)&&G.push(rr(ce[Se],se[ue]))}}}if(oe=G.length,re===0&&oe===0)return 0;G=G.concat(V),G.sort((ue,ce)=>$?_f(ue.second,ce.second):_f(ue.first,ce.first));const pe=gge(G,(ue,ce)=>ue.first===ce.first&&ue.second===ce.second);G=G.slice(0,pe),A.length=0,k.length=0;for(const ue of G)A.push(ue.first),k.push(ue.second);return K(A.length===k.length),k.length}function HJe(t,e,i,s,n,r,o){if(t.power()===0)return t.isZero()?-1:0;const l=t.evaluate(_t.constructInt32(1)).isZero();if(t.power()===1){const c=zge(t.getElement(1),t.getElement(0),e,r.at(0));return r[0].limitPrecisionThis(s),c!==1?0:(r[0].limitPrecisionThis(s),1)}return t.power()===2?lS(t.getElement(2),t.getElement(1),t.getElement(0),s,e,l,r):t.power()===3?uS(t.getElement(3),t.getElement(2),t.getElement(1),t.getElement(0),s,e,l,r):t.power()===4?qge(t.getElement(4),t.getElement(3),t.getElement(2),t.getElement(1),t.getElement(0),s,e,l,r):Gge(t,e,i,s,l,n,r,o)}function UJe(){return{polyIntersect:new Ti,polyX1:new Ti,polyY1:new Ti,polyX1Deriv:new Ti,polyY1Deriv:new Ti,lazyPolyD1:new Ti,lazyPolyD1Deriv:new Ti,tempP:new Ti,tempP1:new Ti,tempP2:new Ti,polypoly1Proximity:new Ro,polypoly2Proximity:new Ro}}function Fge(t,e,i,s,n,r,o,l,c,f,y){const _=UJe();_.polyX1.construct(t,e),_.polyY1.construct(i,s),_.polyX1Deriv.assignCopy(_.polyX1),_.polyX1Deriv.derivative1This(),_.polyY1Deriv.assignCopy(_.polyY1),_.polyY1Deriv.derivative1This(),_.polyIntersect.assignCopy(_.polyX1),_.polyIntersect.mulThis(_.polyX1),_.polyIntersect.mulElementThis(o[0]),_.tempP.assignCopy(_.polyY1),_.tempP.mulThis(_.polyY1),_.tempP.mulElementThis(o[1]),_.polyIntersect.addThis(_.tempP),_.polyIntersect.add0(o[2]);{const V=o[0].clone(),B=V.clone();B.sqrThis();const W=o[1].clone(),J=W.clone();J.sqrThis();const re=o[2].clone(),se=V.clone();se.subThis(W),_.polyX1.construct(t,e),_.polyX1Deriv.assignCopy(_.polyX1),_.polyX1Deriv.derivative1This(),_.polyY1.construct(i,s),_.polyY1Deriv.assignCopy(_.polyY1),_.polyY1Deriv.derivative1This(),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(_.polyX1),_.tempP.mulElementThis(J),_.tempP.mulElementThis(re),_.polypoly1Proximity.construct0(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(W.mul(se).mul(re).ldexpThis(1)),_.polypoly1Proximity.addElement(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(_.polyX1),_.tempP.mulElementThis(V.mul(J)),_.tempP1.assignCopy(_.polyY1),_.tempP1.mulThis(_.polyY1),_.tempP1.mulElementThis(B.mul(W)),_.tempP.addThis(_.tempP1),_.tempP.add0(se.mul(se).mul(re)),_.polypoly1Proximity.addElement(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulElementThis(se.mul(V).mul(W).ldexpThis(1)),_.polypoly1Proximity.addElement(_.tempP),_.tempP.construct0(V.mul(se).mul(se)),_.polypoly1Proximity.addElement(_.tempP),_.polypoly1Proximity.updatePower(),_.tempP.construct0(Go),_.polypoly2Proximity.construct0(_.tempP),_.tempP.assignCopy(_.polyX1),_.tempP.mulThis(_.polyX1Deriv),_.tempP1.assignCopy(_.polyY1),_.tempP1.mulThis(_.polyY1Deriv),_.tempP.addThis(_.tempP1),_.tempP.mulElementThis(V.mul(W)),_.polypoly2Proximity.addElement(_.tempP),_.tempP.assignCopy(_.polyX1Deriv),_.tempP.mulElementThis(se.mul(V)),_.polypoly2Proximity.addElement(_.tempP),_.polypoly2Proximity.updatePower()}const x=[],S=[];y||(y=[]);let P=2*_.polyIntersect.power()+58;const A=.5*Number.EPSILON,k=L0(_.polyIntersect,l,c,A,P,S);if(k<0)return-1;uz(_.polypoly1Proximity,_.polypoly2Proximity,_.tempP),P=2*_.tempP.power()+58;let $=L0(_.tempP,l,c,A,P,x);if($<0&&($=0),k===0&&$===0)return 0;const F=x.concat(S);y.length=F.length,dn(y,F,0,0,F.length),Ix(y);const G=gge(y,(V,B)=>_f(V,B)===0);return y.length=G,y.length}function zge(t,e,i,s){return t.isZero()?e.isZero()?-1:0:(s.setThis(e),s.negateThis(),s.divThis(t),i.isEmpty()||i.containsCoordinate(s.value())?1:0)}function lS(t,e,i,s,n,r,o){if(t.isZero())return r?(o[0].setInt32(1),n.containsCoordinate(1)?1:0):zge(e,i,n,o[0]);if(r){let S=2;return o[0].setInt32(1),i.equals(t)?(o[1].setInt32(1),S=1):o[1].setThis(i.div(t)),n.containsCoordinate(o[1].value())||(S=1),n.containsCoordinate(o[0].value())||(S--,o[0].setThis(o[1])),S===2&&o[0].value()>o[1].value()&&(o[1]=St(o[0],o[0]=o[1])),S}const l=e.clone();l.sqrThis();const c=t.clone();if(c.mulThis(i).ldexpThis(2).negateThis().addThis(l),c.LZ())return 0;const f=s+2,y=_t.sqrt(c,f),_=y.clone();e.LZ()&&_.negateThis(),_.addThis(e).limitPrecisionThis(f).ldexpThis(-1).negateThis();let x=0;return o[0].setThis(_).divThis(_t.constructAssign(t,f)).limitPrecisionThis(s),(n.isEmpty()||n.containsCoordinate(o[0].value()))&&x++,y.isZero()||_.isZero()||(o[x].setThis(i).divThis(_).limitPrecisionThis(s),(n.isEmpty()||n.containsCoordinate(o[x].value()))&&x++,x===2&&o[0].gt(o[1])&&(o[1]=St(o[0],o[0]=o[1]))),x}function uS(t,e,i,s,n,r,o,l){if(t.isZero())return lS(e,i,s,n,r,o,l);const c=(pe,ue)=>{if(pe>0){let ce=ue+pe;for(let ne=1;ne<ce;ne++)l[ne].equals(l[0])&&(l[ce-1]=St(l[ne],l[ne]=l[ce-1]),ce--);ue=ce}return sd(l,0,ue,(ce,ne)=>ce.compare(ne)),ue};if(s.isZero()){let pe=0;return r.containsCoordinate(0)&&(l[0].setInt32(0),pe=1),c(lS(t,e,i,n,r,o,l.slice(1)),pe)}if(o){let pe=0;r.containsCoordinate(1)&&(l[0].setInt32(1),pe=1);const ue=e.add(t),ce=s.negate(),ne=t.add(ue).add(ce).isZero();return c(lS(t,ue,ce,n,r,ne,l.slice(pe)),pe)}const f=new _t,y=new _t,_=new _t,x=e.clone();if(x.isZero())y.setThis(i),y.divThis(t),_.setThis(s),y.divThis(t);else{x.divThis(t).divDoubleThis(3).negateThis();const pe=e.clone();pe.sqrThis();const ue=t.clone();ue.sqrThis(),y.setThis(t),y.mulThis(i).mulDoubleThis(3).subThis(pe).divThis(ue).divDoubleThis(3),_.setThis(pe),_.mulThis(e),_.ldexpThis(1),f.setThis(t),f.mulThis(e).mulThis(i).mulDoubleThis(9),_.subThis(f),f.setThis(ue),f.mulThis(s).mulDoubleThis(27),_.addThis(f),_.divThis(ue).divThis(t).divDoubleThis(27)}if(y.isZero()){const pe=_.clone();return pe.negateThis(),pe.isZero()?(l[0].setThis(x),i3(r,n,l,1)):(l[0].setThis(_t.cubicRoot(_,n).add(x)),i3(r,n,l,1))}const S=_.clone();if(S.sqrThis().ldexpThis(-2),f.setThis(y.clone()),f.sqrThis().mulThis(y).divDoubleThis(27),S.addThis(f),S.isZero())return l[0].setThis(_),l[0].mulDoubleThis(3).divThis(y),l[1].setThis(l[0]),l[1].negateThis(),l[1].ldexpThis(-1),l[0].addThis(x),l[1].addThis(x),i3(r,n,l,2);if(S.GZ())return S.setThis(_t.sqrt(S,n+8)),f.setThis(_),f.ldexpThis(-1).negateThis(),f.addThis(S),l[0].setThis(_t.cubicRoot(f,n+8)),f.setThis(_),f.ldexpThis(-1).negateThis(),f.subThis(S),l[0].addThis(_t.cubicRoot(f,n+8)),l[0].addThis(x),i3(r,n,l,1);f.setThis(y),f.divDoubleThis(3).negateThis(),K(f.GEZ());const P=_t.sqrt(f,n+8),A=P.clone();A.negateThis(),A.addThis(x),P.addThis(x);const k=_t.constructDouble(r.isEmpty()?-Number.MAX_VALUE:r.vmin),$=_t.constructDouble(r.isEmpty()?Number.MAX_VALUE:r.vmax),F=new Ti({zeroCtor:_t});F.construct0(s),F.addElement(i),F.addElement(e),F.addElement(t);const G=new Ti({copy:F});G.derivative1This();let V=0;const B=Ge(_t,4);B[V++].setThis(k),A.gt(k)&&A.lt($)&&B[V++].setThis(A),P.gt(k)&&P.lt($)&&B[V++].setThis(P),B[V++].setThis($);const W=3*n;let J=52,re=Number.EPSILON;for(;J<W;)2*J<=W?(re*=re,J*=2):(re*=Number.EPSILON,J+=52);J+=2;let se=0,oe=!1;for(let pe=1;pe<V;pe++)if(cz(F,G,B[pe-1],B[pe],re,J,l[0])){se=1,oe=pe+1<V;break}if(!se)return 0;if(oe){const pe=new Ti({zeroCtor:_t,coef0:l[0]});pe.negateThis(),pe.addElement(Lh);const ue=new Ti({zeroCtor:_t}),ce=new Ti({zeroCtor:_t});F.div(pe,ue,ce),K(ue.power()===2),K(ce.power()===0);const ne=lS(ue.getElement(2),ue.getElement(1),ue.getElement(0),n,r,!1,l.slice(1));K(ne>=0&&ne<=2),se+=ne}return i3(r,n,l,se)}function qge(t,e,i,s,n,r,o,l,c){if(t.isZero())return uS(e,i,s,n,r,o,l,c);const f=(A,k)=>{if(A>0){let $=k+A;for(let F=1;F<$;F++)c[F].equals(c[0])&&(c[$-1]=St(c[F],c[F]=c[$-1]),$--);k=$}return sd(c,0,k,($,F)=>$.compare(F)),k};if(n.isZero()){let A=0;return o.containsCoordinate(0)&&(c[0].setInt32(0),A=1),f(uS(t,e,i,s,r,o,l,c.slice(A)),A)}const y=new Ti({zeroCtor:_t,coef0:n});if(y.addElement(s),y.addElement(i),y.addElement(e),y.addElement(t),l){let A=0;o.containsCoordinate(1)&&(c[0].setInt32(1),A=1);const k=new Ti({zeroCtor:_t,coef0:_t.constructInt32(-1)});k.addElement(_t.constructInt32(1));const $=new Ti({zeroCtor:_t}),F=new Ti({zeroCtor:_t});return y.div(k,$,F),f(uS($.power()===3?$.getElement(3):Go.clone(),$.power()>=2?$.getElement(2):Go.clone(),$.power()>=1?$.getElement(1):Go.clone(),$.getElement(0),r,o,$.evaluate(Lh).isZero(),c.slice(A)),A)}if(y.getElement(0).isZero()){let A=0;for(o.containsCoordinate(0)&&(A=1,c[0].setDouble(0));y.getElement(0).isZero()&&y.power()>0;)y.shiftRight(1);const k=uS(y.power()===3?y.getElement(3):Go.clone(),y.power()>=2?y.getElement(2):Go.clone(),y.power()>=1?y.getElement(1):Go.clone(),y.getElement(0),r,o,!1,c.slice(A));return k>0&&(A+=k),sd(c,0,A,($,F)=>$.compare(F)),A}let _=52,x=Number.EPSILON;for(;_<r;)2*_<=r?(x*=x,_*=2):(x*=Number.EPSILON,_+=52);_+=2;const S=jge(y),P=_t.constructDouble(Math.max(Math.abs(o.vmax),Math.abs(o.vmin)));return x=(S.lt(P)?S:P).mul(_t.constructDouble(x)).toDouble(),Gge(y,o,x,_,l,!1,c,4)}function YJe(t,e){let i=t,s=e;s.power()>i.power()&&(s=St(i,i=s));const n=i.power()-s.power(),r=new Ti({copy:i.getElement(i.power())});i.mulThis(s.getElement(s.power()));for(let o=0,l=i.power();o<l;o++)if(o>=n){const c=new Ti({copy:s.getElement(o-n)});c.mulThis(r);const f=i.getElement(o).sub(c);i.setElement(o,f)}i.setElement(i.power(),i.getElement(i.power()).setZero()),i.updatePower(),lz(i)}function lz(t){let e=0;for(;e<t.power()&&t.getElement(e).isZero();)e++;return e>0&&(t.shiftRight(e),!0)}function uz(t,e,i){const s=t.clone(),n=e.clone();for(lz(s),lz(n);s.power()!==0||n.power()!==0;)YJe(s,n);i.assignMove(s.getElement(0))}function L0(t,e,i,s,n,r){r.length=0;const o=t.power(),l=Ge(_t,2*o+4),c=HJe(t,i||Ze.unit(),s,n,!1,l,l.length);if(c>0){r.length=0;for(let f=0;f<c;f++){const y=l[f].value();f>0&&y<=r.at(-1)||r.push(y)}return r.length}return c}function Vge(t,e,i){if(K(i>=1),t.power()===0)return t.isZero()?-1:0;const s=t.getElement(0);return s.negateThis(),s.divThis(t.getElement(1)),e[0].setThis(s),1}function XJe(t,e,i,s){if(t.power()<2)return Vge(t,i,s);K(s>=1);let n=t.getElement(1);n.mulThis(t.getElement(1));const r=t.getElement(0);if(r.mulThis(t.getElement(2)),r.ldexpThis(2),n.subThis(r),n.LZ())return 0;if(n.isZero()){const f=t.getElement(1);return f.negateThis(),f.divThis(t.getElement(2)),f.ldexpThis(-1),f.limitPrecisionThis(e),i[0].setThis(f),1}K(s>=2),n=_t.sqrt(n,e+8);const o=t.getElement(1);o.negateThis();const l=o.clone();l.subThis(n),l.divThis(t.getElement(2)),l.ldexpThis(-1),l.limitPrecisionThis(e);const c=o.clone();return c.addThis(n),c.divThis(t.getElement(2)),c.ldexpThis(-1),c.limitPrecisionThis(e),l.lt(c)?(i[0].setThis(l),i[1].setThis(c)):(i[1].setThis(l),i[0].setThis(c)),2}function cz(t,e,i,s,n,r,o){let l=i.clone(),c=s.clone();l.limitPrecisionThis(r),c.limitPrecisionThis(r);let f=t.evaluate(l);f.limitPrecisionThis(r+2);let y=t.evaluate(c);if(y.limitPrecisionThis(r+2),f.GEZ()&&y.GEZ()||f.LEZ()&&y.LEZ())return f.absLessAbs(y)?(o=l,f.isZero()):(o=c,y.isZero());const _=y.LZ();_&&(y=St(f,f=y),c=St(l,l=c));const x=_?c:l,S=_?l:c,P=l.add(c).ldexpThis(-1);P.limitPrecisionThis(r);const A=c.sub(l);A.limitPrecisionThis(r),A.absThis();const k=A.clone();let $=t.evaluate(P),F=e.evaluate(P);const G=new Ti({copy:t}),V=new Ti({copy:e});{const Re=Math.max(t.hiBitIndex(),e.hiBitIndex()),Oe=Lh.clone();Oe.ldexpThis(-(r+2));for(let we=64;we<Re;){G.limitPrecisionThis(we),V.limitPrecisionThis(we);const Fe=G.evaluate(P),it=V.evaluate(P),vt=Fe.sub($),ot=it.sub(F);if(vt.divThis($).absThis().lt(Oe)&&(F.isZero()||ot.divThis(F).absThis().lt(Oe)))break;G.assignCopy(t),V.assignCopy(e),we=Math.min(we+64,Re)}$.limitPrecisionThis(r+2),F.limitPrecisionThis(r+2)}const B=1,W=4;let J=W;const re=2;let se=1,oe=0,pe=0,ue=B;const ce=32,ne=_t.constructDouble(.25*n),de=_t.constructDouble(.5001);let Se=0;const Pe=300;for(;++Se<Pe;){if(Se>ce&&oe>0||F.isZero()||ue===re&&oe>1||ue===B&&J<W)ue=B,se>1&&se--;else if(ue=re,pe>1){const it=A.mul(F);it.absThis(),it.ldexpThis(-3),it.absLessAbs($)&&se++}A.setThis(k);const Re=new _t;let Oe=!1;if(ue===B)do{if(pe>2){const it=A.clone();if(it.absThis(),it.ldexpThis(4),S.sub(x).ldexpThis(-1).gt(it)){if(P.equals(x)){Re.setThis(P),P.setThis(x.add(it)),P.limitPrecisionThis(r),k.setThis(P.sub(Re));break}if(P.equals(S)){Re.setThis(P),P.setThis(S.sub(it)),P.limitPrecisionThis(r),k.setThis(P.sub(Re));break}}}k.setThis(c.sub(l)),k.ldexpThis(-1),k.limitPrecisionThis(r),Re.setThis(P),P.setThis(l.add(k)),P.limitPrecisionThis(r),P.lt(x)?P.setThis(x):P.gt(S)&&P.setThis(S),Oe=l.equals(P)||c.equals(P)}while(!1);else for(;;){if(k.setThis($.div(F)),k.limitPrecisionThis(r),se!==1&&k.mulDoubleThis(se),Re.setThis(P),P.subThis(k),P.limitPrecisionThis(r),Oe=P.equals(Re),P.lt(x)){if(se>1){P.setThis(Re),se--;continue}k.setThis(Re.sub(x)),P.setThis(x)}else if(P.gt(S)){if(se>1){P.setThis(Re),se--;continue}k.setThis(Re.sub(S)),P.setThis(S)}break}if(Oe||k.absLessAbs(ne)){Re.equals(P)||($=G.evaluate(P),$.limitPrecisionThis(r+2));break}$=G.evaluate(P),$.limitPrecisionThis(r+2),F=V.evaluate(P),F.limitPrecisionThis(r+2);const we=l.clone(),Fe=c.clone();$.LZ()?(f.setThis($),l.setThis(P)):(y.setThis($),c.setThis(P)),ue===re&&(l.equals(we)&&c.equals(Fe)||pe>1&&!k.absLessAbs(de.mul(A)))?oe++:oe=0,ue===B?(J++,pe=0):(J=0,pe++)}return Se>=Pe&&bt("Root_finder iterations exceeded"),o.setThis(P),!0}function WJe(t,e,i,s,n){const r=t.evaluate(i);if(r.isZero())return!0;const o=_t.constructDouble(.5*s),l=i.clone();l.subThis(o);const c=t.evaluate(l),f=i.clone();f.addThis(o);const y=t.evaluate(f);if(c.LZ()&&y.GZ()||c.GZ()&&y.LZ()||(r.GZ()?c.LEZ()||y.LEZ():c.GEZ()||y.GEZ()))return!0;const _=c.LEZ()&&y.LEZ(),x=c.GEZ()&&y.GEZ();let S=!1;return _?r.gt(c)&&r.gt(y)&&(S=!0):x&&r.lt(c)&&r.lt(y)&&(S=!0),!!S&&r.absThis().lt(_t.constructDouble(1e-17))}function Gge(t,e,i,s,n,r,o,l){K(i>0),K(l>=t.power());const c=o,f=[];let y=[];const _=new Ti({zeroCtor:t.m_zeroCtor}),x=new Ti({zeroCtor:t.m_zeroCtor}),S=new Ti({zeroCtor:t.m_zeroCtor}),P=_t.constructDouble(i),A=_t.constructDouble(e.vmin),k=_t.constructDouble(e.vmax),$=A.sub(P),F=k.add(P),G=jge(t),V=G.clone();if(V.negateThis(),$.lt(V))$.setThis(V.sub(P));else if($.gt(G))return 0;if(F.gt(G))F.setThis(G.add(P));else if(F.lt(V))return 0;let B=t,W=null;if(n){const de=new Ti({coef0:_t.constructInt32(-1)});de.addElement(Lh),W=new Ti,B=W;const Se=new Ti,Pe=new Ti;for(t.div(de,Se,Pe),W.assignCopy(Se);B.evaluate(Lh).isZero();)B.div(de,Se,Pe),W.assignCopy(Se)}let J=!1;if(B.power()>0&&B.getElement(0).isZero())for(J=!0,W||(W=new Ti({copy:B}),B=W);B.getElement(0).isZero();)W.shiftRight(1);let re=s+2*B.power()+2,se=i/Math.pow(2,B.power()+2),oe=re;if(Go.gt($)&&Go.lt(F)){for(let de=0,Se=B.power();de<Se;de++)if(B.getElement(de).isZero()){f.push(Go.clone());break}}for(let de=B.power()-1;de>0;de--)if(se*=2,re-=2,oe-=2,B.power()-de!=1)if(B.power()-de!=2){x.assignMove(S),S.assignMove(B.derivative(de-1));let Se=[];for(let Pe=0,Re=y.length;Pe<Re;++Pe)if(y[Pe].first.lte(y[Pe].second)){const Oe=new _t;if(cz(x,_,y[Pe].first,y[Pe].second,se,re,Oe)){f.push(Oe);let we=Oe.sub(P);we.limitPrecisionThis(oe),Se.push(rr(y[Pe].first,we)),we=Oe.add(P),we.limitPrecisionThis(oe),Se.push(rr(we,y[Pe].second))}else Se.push(y[Pe])}y=Se,Se=[],_.assignMove(x)}else{x.assignMove(B.derivative(de));const Se=XJe(x,re,c,l);K(Se>=0&&Se<=2);for(let Pe=0;Pe<Se;Pe++)c[Pe].gt($)&&c[Pe].lt(F)&&!c[Pe].isZero()&&f.push(c[Pe].clone());if(f.length>1&&f.sort((Pe,Re)=>Pe.compare(Re)),f.length>0){let Pe=f[0].sub(P);Pe.limitPrecisionThis(oe),y.push(rr($.clone(),Pe));let Re=f.length===1?F.clone():f[1].sub(P);Pe=f[0].add(P),Pe.limitPrecisionThis(oe),Re.limitPrecisionThis(oe),y.push(rr(Pe,Re)),f.length>1&&(Re=f.length===2?F.clone():f[2].sub(P),Re.limitPrecisionThis(oe),Pe=f[1].add(P),Pe.limitPrecisionThis(oe),y.push(rr(Pe,Re)),f.length>2&&(Pe=f[2].add(P),Pe.limitPrecisionThis(oe),y.push(rr(Pe,F.clone()))))}else y.push(rr($.clone(),F.clone()));_.assignCopy(x),S.assignMove(B.derivative(de-1))}else x.assignMove(B.derivative(de)),Vge(x,c,l)===1&&(c[0].gt($)&&c[0].lt(F)&&!c[0].isZero()&&f.push(c[0].clone()),_.assignMove(x),S.assignMove(B.derivative(de-1)));f.sort((de,Se)=>de.compare(Se)),y.length===0&&(_.assignMove(B.derivative(B.power())),_.isZero()||y.push(rr($.clone(),F.clone())));let pe=0,ue=0,ce=0;const ne=new _t;for(;;){if(ue<y.length){if(y[ue].first.gt(y[ue].second)){ue++;continue}let de=!1;if(ce<f.length&&f[ce].lt(y[ue].first)&&(de=!0),!de){cz(B,_,y[ue].first,y[ue].second,i,s,ne)&&(ne.lt(A)?c[pe++].setThis(A):ne.gt(k)?c[pe++].setThis(k):c[pe++].setThis(ne)),ue++;continue}}if(!(ce<f.length))break;ce!==0&&f[ce-1].equals(f[ce])||WJe(B,_,f[ce],i)&&(ne.setThis(f[ce]),ne.lt(A)?ne.setThis(A):ne.gt(k)&&ne.setThis(k),pe!==0&&c[pe].equals(ne)||c[pe++].setThis(ne)),ce++}return J&&Go.gt($)&&Go.lt(F)&&(c[pe++].setThis(Go),sd(c,0,pe,(de,Se)=>de.compare(Se))),n&&Lh.gt($)&&Lh.lt(F)&&(c[pe++].setThis(Lh),sd(c,0,pe,(de,Se)=>de.compare(Se))),pe}function jge(t){const e=t.getElement(t.power());e.limitPrecisionThis(53);const i=Go.clone();for(let s=0,n=t.power();s<n;s++){const r=t.getElement(s);r.limitPrecisionThis(53),r.divThis(e).absThis(),r.gt(i)&&i.setThis(r)}return i.addThis(Lh),i.mulThis(_t.constructDouble(1+100*Number.EPSILON)),i}function i3(t,e,i,s){let n=s;if(!t.isEmpty()){n=0;for(let r=0;r<s;++r)t.containsCoordinate(i[r].value())&&(n!==r&&i[n].setThis(i[r]),n++)}n>1&&(i[0].gt(i[1])&&(i[1]=St(i[0],i[0]=i[1])),n>2&&(i[0].gt(i[2])&&(i[2]=St(i[0],i[0]=i[2])),i[1].gt(i[2])&&(i[2]=St(i[1],i[1]=i[2]))));for(let r=0;r<n;++r)i[r].limitPrecisionThis(e);return n}function q2(t,e,i,s,n,r){return JJe(t,e,i,r,s,n)}function ZJe(t,e,i,s,n,r){let o=n;if(s)return r[0]=1,o=.5*(e-t)*(i(t)+i(e)),o;const l=r[0],c=(e-t)/l,f=t,y=new Fr(0);for(let _=1;_<=r[0];++_){const x=(_-.5)*c;y.add(i(f+x))}return o=.5*(o+(e-t)*y.getResult()/l),r[0]*=2,o}function KJe(t,e,i,s,n,r,o){let l=0,c=Math.abs(n-i[t]);const f=Vi(e,Number.NaN),y=Vi(e,Number.NaN);for(let P=0;P<e;++P){const A=Math.abs(n-i[t+P]);A<c&&(l=P,c=A),f[P]=s[t+P],y[P]=s[t+P]}let _=0,x=0,S=0;r[0]=s[t+l],l--;for(let P=1;P<e;P++){for(let A=0;A<e-P;A++){if(x=i[t+A]-n,S=i[t+A+P]-n,_=x-S,_===0)return!1;const k=(f[A+1]-y[A])/_;f[A]=x*k,y[A]=S*k}if(2*(l+1)<e-P){const A=l+1;o[0]=f[A]}else{const A=l;o[0]=y[A],l--}r[0]+=o[0]}return!0}function JJe(t,e,i,s,n,r){if(i<e&&Je("xTo < xFrom"),i===e)return 0;const o=[0];let l=Number.MAX_VALUE;const c=[Number.MAX_VALUE];let f=0;const y=32,_=Vi(y+1,Number.NaN),x=Vi(y+1,Number.NaN),S=[0];_[0]=1;let P=0,A=0;for(let k=0;k<y;k++){if(f=ZJe(e,i,s,k===0,f,S),x[k]=f,k+1>=t){KJe(k+1-t,t,_,x,0,o,c)||bt("polynomial_interpolation");const $=n*Math.abs(o[0])+r,F=Math.abs(l-o[0]);if(F<=$&&Math.abs(c[0])<=$){if(P++,P>1&&(F<=.1*A||A===0||P>2))return o[0]}else P=0;A=F,l=o[0]}x[k+1]=x[k],_[k+1]=.25*_[k]}return o[0]}class ys{static constructPoint2D(e){return new ys(_t.constructDouble(e.x),_t.constructDouble(e.y))}constructor(e,i){if(e===void 0)return this.x=new _t().setNAN(),void(this.y=new _t().setNAN());this.x=e.clone(),this.y=i.clone()}assignPoint2D(e){return this.x.setDouble(e.x),this.y.setDouble(e.y),this}setCoords(e,i){return this.x.setThis(e),this.y.setThis(i),this}asPoint2D(){return new Y(this.x.value(),this.y.value())}crossProduct(e){return this.x.mul(e.y).sub(this.y.mul(e.x))}leftPerpendicularThis(){const e=this.x.clone();this.x=this.y.clone().negate(),this.y=e}clone(){return new ys(this.x,this.y)}dotProduct(e){return this.x.mul(e.x).add(this.y.mul(e.y))}add(e){return new ys(this.x.add(e.x),this.y.add(e.y))}sub(e){return new ys(this.x.sub(e.x),this.y.sub(e.y))}sqrLength(){return this.x.sqr().addThis(this.y.sqr())}mulThis(e){return this.x.mulThis(e),this.y.mulThis(e),this}mul(e){return this.clone().mulThis(e)}}class QJe{constructor(){this.area=Number.NaN,this.centroid_x=Number.NaN,this.centroid_y=0,this.specialPoints=[],this.specialPointsLength=[]}specialPointsCount(){return this.specialPoints.length}}let eQe=class{constructor(t,e){this.b=t,this.len=e}getMaxDerivative(){return 1}getValue(t,e){return t===0?this.len-N6(this.b,e,!1):0}getError(t){return K(0),0}};function tQe(t,e,i,s,n){let r=!0;const o=Ge(Y,3);t.queryControlPoints(o);let l=r?0:1,c=o[1][l]-o[0][l],f=o[2][l]-o[0][l];const y=q2(5,e,i,s,n,x=>{let S;if(x<=.5){const P=yo(0,c,x),A=yo(c,f,x);S=yo(P,A,x)}else{const P=Lr(0,c,x),A=Lr(c,f,x);S=Lr(P,A,x)}return S*Ite(o,1,x).length()});r=!1,l=r?0:1,c=o[1][l]-o[0][l],f=o[2][l]-o[0][l];const _=q2(5,e,i,s,n,x=>{let S;if(x<=.5){const P=yo(0,c,x),A=yo(c,f,x);S=yo(P,A,x)}else{const P=Lr(0,c,x),A=Lr(c,f,x);S=Lr(P,A,x)}return S*Ite(o,1,x).length()});return new Y(y,_)}function B4(t){t.m_cachedValues=null}function Bge(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new QJe;return Hge(t,e.specialPoints),Xge(t,e),e}function Hge(t,e){const i=Ge(Y,3);t.queryControlPoints(i);const s=Ge(Be,8);s[0].set(0);let n=1;{const r=Ge(Be,3);hQe(i,r,!1);const o=Ge(Be,2),l=new Ze(0,1);let c=kE(r[2].mul(2),r[1],l,o[0]);c<0&&(c=0);for(let f=0;f<c;f++)Is(o[f].value(),0,1)||(s[n]=o[f],n++)}{const r=Ge(Be,3);dQe(i,r,!1);const o=Ge(Be,2),l=new Ze(0,1);let c=kE(r[2].mul(2),r[1],l,o[0]);c<0&&(c=0);for(let f=0;f<c;f++)Is(o[f].value(),0,1)||(s[n]=o[f],n++)}if(s[n].set(1),n++,n>2){sd(s,0,n,(c,f)=>c.value()-f.value());let r=0,o=s[0].value(),l=1;for(let c=1;c<n;c++)s[c].eq(s[c-1])?(o+=s[c].value(),l++):(l>1&&(o/=l,s[r].set(o)),r++,s[r]=s[c],o=s[c].value(),l=1);r++,n=r}s[0].set(0),s[n-1].set(1),e.length=n;for(let r=0;r<n;r++)e[r]=s[r].value()}function N6(t,e,i){const s=Ge(Y,3);return t.queryControlPoints(s),Uge(s,e,i)}function Uge(t,e,i){if(i){if(e<0)return e;if(e>1)return e-1+Uge(t,1,!1)}if(e===1)return Pte(t);const s=Ge(Y,3);return hz(t,e,s,null),Pte(s)}function Pte(t){if(t[0].equals(t[1]))return Y.distance(t[2],t[0]);if(t[1].equals(t[2]))return Y.distance(t[0],t[2]);const e=Y.distance(t[0],t[1])+Y.distance(t[2],t[1]),i=Y.distance(t[0],t[2]);if(e-i<=e*Number.EPSILON)return i;const s=1,n=Ge(Y,3);xj(t,n,!0);const r=4*(Ui(n[2].x)+Ui(n[2].y)),o=2*(n[2].x*n[1].x+n[2].y*n[1].y),l=Ui(n[1].x)+Ui(n[1].y);if(1e-14*(Math.abs(o)+Math.abs(l))>=Math.abs(r))return 1e-14*Math.abs(l)>=Math.abs(o)?Math.sqrt(l)*s:(K(0),2/(3*o)*(Math.pow(o*s+l,1.5)-Math.pow(l,1.5)));const c=o/r,f=l/r,y=f-c*c,_=s+c;if(y===0)return c>=0&&_>=0||c<=0&&_<=0?Math.abs(.5*Math.sqrt(r)*(_*_-c*c)):.5*Math.sqrt(r)*(_*_+c*c);const x=Math.sqrt(y+_*_),S=Math.sqrt(f);return .5*Math.sqrt(r)*(_*x-c*S+y*Math.log(Math.abs((_+x)/(c+S))))}function Tte(t,e){return K(0),Y.getNAN()}function Ite(t,e,i){{const s=t[1].sub(t[0]).mul(1-i).add(t[2].sub(t[1]).mul(i));return s.mulThis(2),s}}function iQe(t,e,i){const s=N6(t,1,!1);if(e<=0)return e;if(e>=s)return e-s+1;const n=[0];return Xg(new eQe(t,e),Ze.unit(),1,n)!==1&&bt(""),n[0]}function Mte(t){const e=Ge(Y,3);return t.queryControlPoints(e),Yge(e)}function Yge(t){return-t[1].sub(t[0]).crossProduct(t[2].sub(t[0]))/3}function sQe(t){const e=Y.distance(t.getStartXY(),t.getEndXY()),i=t.calculateUpperLength2D();return i-e<=8*Number.EPSILON*i}function Ate(t){return t.m_cachedValues}function Xge(t,e){t.m_cachedValues=e}function $6(t,e,i,s,n){PE(Ze.unit().contains(i),"QuadraticBezierHelper::getClosestCoordinateSegment");const r=Ge(Y,3);t.queryControlPoints(r);let o=Number.MAX_VALUE;const l=[0],c=s7(r,e,l);if(i.containsCoordinate(l[0]))o=Y.distance(e,c);else{l[0]=i.vmin,Gc(r,l[0],c),o=Y.distance(c,e);const f=new Y;Gc(r,i.vmax,f);const y=Y.distance(f,e);o>y&&(c.setCoordsPoint2D(f),l[0]=i.vmax,o=y)}if(!s)return l[0];if(i.vmin<=0){const f=new Y;t.queryCoord2DExtended(-1,f,!0);const y=new Y;t.queryCoord2D(i.vmin,y);const _=new si({start:f,end:y}),x=_.getClosestCoordinate(e,!0);if(x<1){const S=_.getCoord2D(x),P=Y.distance(S,e);P<o&&(o=P,l[0]=x-1,c.assign(S))}}if(i.vmin>=1){const f=new Y;t.queryCoord2DExtended(2,f,!0);const y=new Y;t.queryCoord2D(i.vmax,y);const _=new si({start:y,end:f}),x=_.getClosestCoordinate(e,!0);if(x>0){const S=_.getCoord2D(x),P=Y.distance(S,e);P<o&&(o=P,l[0]=1+x,c.assign(S))}}return l[0]}function s7(t,e,i){const s=t[2].sub(t[1]).sub(t[1].sub(t[0])),n=t[1].sub(t[0]),r=t[0].sub(e),o=r.dotProduct(n),l=r.dotProduct(s)+2*n.dotProduct(n),c=3*n.dotProduct(s),f=s.dotProduct(s),y=new Array(3),_=$ge(f,c,l,o,Ze.unit(),!1,y),x=t[0].clone();let S=0,P=Y.sqrDistance(t[0],e),A=Y.sqrDistance(t[2],e);A<P&&(S=1,x.assign(t[2]),P=A);for(let k=0;k<_;k++){const $=new Y;Gc(t,y[k],$),A=Y.sqrDistance($,e),A<P&&(P=A,x.assign($),S=y[k])}return i&&(i[0]=S),x}function nQe(t,e,i,s,n,r){const o=new Gr;if(rQe(t,Ze.unit(),o),o.inflate(n),!o.isIntersectingPoint2D(e))return 0;const l=new Y,c=$6(t,e,Ze.unit(),!1);return t.queryCoord2D(c,l),Y.distance(l,e)<=n?(s&&(s[0]=c),1):0}function rQe(t,e,i){const s=Ge(Y,3);t.queryControlPoints(s),NE(s,e,i)}function NE(t,e,i){if(e.equalsRange(0,1))return void i.setFromPoints(t,3);const s=Ge(Y,3);$E(t,e.vmin,e.vmax,s),i.setFromPoints(s,3)}function Dte(t,e,i){i.setEmpty();const s=[];s.push(new Ze(0,1));const n=.5*Math.max(e.width(),e.height());for(;s.length;){const r=s.at(-1);s.pop();const o=new Gr;if(NE(t,r,o),o.isIntersectingW(e)){const l=Math.max(o.width(),o.height());if(e.containsW(o)||l<=n||r.width()<1e-12)i.merge(r);else{const c=r.getCenter();s.push(Ze.construct(r.vmin,c)),s.push(Ze.construct(c,r.vmax))}}}}function Wge(t){const e=Ge(Y,3);t.queryControlPoints(e);const i=Zge(e);return i&&(t.m_cp.setCoordsPoint2D(e[1]),t.afterCompletedModification()),i}function Zge(t){let e=!1;for(let i=0;i<2;i++){const s=Js(t[0][i],t[2][i]);s>0?(Js(t[0][i],t[1][i])<0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[2][i])<0&&(t[1][i]=t[2][i],e=!0)):s<0?(Js(t[0][i],t[1][i])>0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[2][i])>0&&(t[1][i]=t[2][i],e=!0)):t[1][i]!==t[0][i]&&(t[1][i]=t[0][i],e=!0)}return e}function oQe(t,e,i){i===void 0&&(i=e,e=0);const s=new Y;if(e<0||i>1)return s.setNAN(),s;if(e>i&&Je("calculate_sub_weighted_centroid"),e===i||t.isDegenerate(0))return s.setCoords(0,0),s;const n=Bge(t),r=nf(t),o=Math.min(r/t.calculateUpperLength2D(),1e-7);let l=e,c=0;for(let f=1,y=n.specialPointsCount();f<y;f++)if(e<n.specialPoints[f]){c=f-1;break}s.setCoords(0,0);for(let f=c+1,y=n.specialPointsCount();f<y;f++){const _=Math.min(n.specialPoints[f],i),x=tQe(t,l,_,o,r);if(s.addThis(x),l=_,i<=n.specialPoints[f])break}return s.add(t.getStartXY().mul(t.calculateLength2D()))}function hz(t,e,i,s){new Y().setCoordsPoint2D(t[0]),new Y().setCoordsPoint2D(t[1]),new Y().setCoordsPoint2D(t[2]);const n=new Y,r=new Y,o=new Y;if(ar(t[0],t[1],e,n),ar(t[1],t[2],e,r),ar(n,r,e,o),i&&(i[0].assign(t[0]),i[1].assign(n),i[2].assign(o)),s){const l=t[2];s[0].assign(o),s[1].assign(r),s[2].assign(l)}}function $E(t,e,i,s){if(e===i){const r=new Y;return Gc(t,e,r),s[0]=r,s[1]=r,void(s[2]=r)}const n=Ge(Y,3);hz(t,i,n,null),hz(n,e/i,null,n),Gc(t,e,n[0]),Gc(t,i,n[2]),s[0].setCoordsPoint2D(n[0]),s[1].setCoordsPoint2D(n[1]),s[2].setCoordsPoint2D(n[2])}function aQe(t,e,i,s){if(e.isEqual(t.m_XStart,t.m_YStart)&&i.isEqual(t.m_XEnd,t.m_YEnd))return;const n=!!s&&t.isMonotoneQuickAndDirty(),r=new _i,o=Ge(Y,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const l=new Y;l.setSub(o[2],o[0]),l.leftPerpendicularThis(),o[1].setAdd(o[0],l);const c=Ge(Y,3);c[0].setCoordsPoint2D(e),c[2].setCoordsPoint2D(i),l.setSub(c[2],c[0]),l.leftPerpendicularThis(),c[1].setAdd(c[0],l),r.setFromTwoTriangles(o,c)?r.transformInPlace(t.m_cp):ar(e,i,.5,t.m_cp),t.changeEndPoints2D(e,i),n&&Wge(t)}function lQe(t){return t.getStartXY().norm(1)+t.getEndXY().norm(1)+t.m_cp.norm(1)}function kte(t,e,i,s,n){return K(0),0}function Nte(t,e,i,s,n){return K(0),0}function uQe(t,e,i,s,n){return K(0),0}function O6(t,e,i,s,n,r,o,l,c,f){if(n!=null&&(n.length=0),r!==null&&(r.length=0),s!==null&&(s.length=0),i.isDegenerate(0)){const oe=[0,0],pe=e.intersectPoint(i.getStartXY(),oe,o);if(pe>0){if(n!==null)for(let ue=0;ue<pe;ue++)n.push(oe[ue]);if(r!==null)for(let ue=0;ue<pe;ue++)r.push(0);if(s!==null)for(let ue=0;ue<pe;ue++){const ce=new Y;e.queryCoord2D(oe[ue],ce),s.push(ce)}}return pe}const y=Al(e,i);if(o=Math.max(o,y),e.isDegenerateToLineHelper(y)){const oe=new si({start:e.getStartXY(),end:e.getEndXY()}),pe=i7(oe,i,s,n,r,o,l,f);if(n)for(let ue=0;ue<pe;++ue){const ce=oe.getCoord2D(n[ue]);n[ue]=e.getClosestCoordinate(ce,!1)}return pe}if(Hu(e,i,o))return 0;const _=ys.constructPoint2D(i.getStartXY()),x=ys.constructPoint2D(i.getEndXY()).sub(_),S=x.clone();S.leftPerpendicularThis();const P=ys.constructPoint2D(e.m_cp).sub(ys.constructPoint2D(e.getStartXY())),A=ys.constructPoint2D(e.getEndXY()).sub(ys.constructPoint2D(e.m_cp));let k=P.dotProduct(S).toDouble(),$=A.sub(P).dotProduct(S).toDouble();const F=Vi(12,Number.NaN),G=Vi(12,Number.NaN);let V=$Je($,k,Ze.unit(),F);V<0&&(F[0]=0,F[1]=1,V=2);let B,W=0;for(let oe=0,pe=W;oe<V;++oe){const ue=e.getCoord2D(F[oe+pe]);G[W]=i.getClosestCoordinate(ue,!1),Y.distance(ue,i.getCoord2D(G[W]))<=o&&(F[W]=F[oe+pe],W++)}const J=Ge(Y,3);e.queryControlPoints(J);{const oe=Ge(ys,3);if(V2(J,oe,!1),oe[0]=oe[0].sub(_),x.x.abs().gte(x.y.abs())){const pe=x.y.div(x.x);$=oe[2].y.sub(oe[2].x.mul(pe)).toDouble(),k=oe[1].y.sub(oe[1].x.mul(pe)).toDouble(),B=oe[0].y.sub(oe[0].x.mul(pe)).toDouble()}else{const pe=x.x.div(x.y);$=oe[2].x.sub(oe[2].y.mul(pe)).toDouble(),k=oe[1].x.sub(oe[1].y.mul(pe)).toDouble(),B=oe[0].x.sub(oe[0].y.mul(pe)).toDouble()}}const re=e.getEndXY().equals(i.getStartXY())||e.getEndXY().equals(i.getEndXY()),se=[0,0];V=vv($,k,B,Ze.unit(),re,se);for(let oe=0,pe=W;oe<V;++oe){F[oe+pe]=se[oe];const ue=e.getCoord2D(F[oe+pe]);G[W]=i.getClosestCoordinate(ue,!1),Y.distance(ue,i.getCoord2D(G[W]))<=o&&(F[W]=F[oe+pe],W++)}K(W<F.length+4),V=e.intersectPoint(i.getStartXY(),se,o);for(let oe=0;oe<V;oe++)F[W]=se[oe],G[W++]=0;V=e.intersectPoint(i.getEndXY(),se,o);for(let oe=0;oe<V;oe++)F[W]=se[oe],G[W++]=1;V=i.intersectPoint(e.getStartXY(),se,o);for(let oe=0;oe<V;oe++)G[W]=se[oe],F[W++]=0;V=i.intersectPoint(e.getEndXY(),se,o);for(let oe=0;oe<V;oe++)G[W]=se[oe],F[W++]=0;return W===0?0:Uu(t,e,i,F,G,W,s,n,r,o,l,c,f)}function $te(t,e,i,s,n,r,o,l,c,f){if(rn(i))return O6(t,e,new si({start:i.getStartXY(),end:i.getEndXY()}),s,n,r,o,l,c,f);const y=Al(e,i);if(Hu(e,i,o=Math.max(o,y)))return 0;const _=[],x=[],S=Ge(Y,3);{e.queryControlPoints(S);const A=Ge(Y,3),k=new _i;i.canonicToWorldTransformation(k);const $=new _i;$.setInvert(k),$.transformPoints2D(S,3,A);const F=Ge(ys,3);V2(A,F);const G=[F[0].x,F[1].x,F[2].x],V=[F[0].y,F[1].y,F[2].y],B=Ge(_t,3);B[0].setDouble(i.getSemiMinorAxis()),B[0].sqrThis(),B[1].setDouble(i.getSemiMajorAxis()),B[1].sqrThis(),B[2]=B[0],B[2].mul(B[1]),B[2].negate();const W=Fge(G,2,V,2,null,0,B,!0,Ze.unit(),Ze.unit(),_);if(W>0){let J=0;for(let re=0;re<W;re++){const se=new Y;e.queryCoord2D(_[re],se);const oe=i.getClosestCoordinate(se,!1),pe=new Y;i.queryCoord2D(oe,pe),Y.distance(se,pe)<=o&&(_[J]=_[re],x.push(oe),J++)}_.length=J}}const P=[0,1];for(let A=0;A<2;A++){const k=A===0?i.getStartXY():i.getEndXY(),$=[0];s7(S,k,$);const F=new Y;Gc(S,$[0],F),Y.distance(k,F)<=o&&(_.push($[0]),x.push(P[A]))}for(let A=0;A<2;A++){const k=[0,2];{const $=i.getClosestCoordinate(S[k[A]],!1),F=new Y;i.queryCoord2D($,F),Y.distance(S[k[A]],F)<=o&&(_.push(P[A]),x.push($))}}return Uu(t,e,i,_,x,_.length,s,n,r,o,l,c,f)}function Kge(t,e,i,s,n,r,o,l,c,f){const y=Ge(Y,3);e.queryControlPoints(y);const _=Ge(Y,3);if(i.queryControlPoints(_),_j(y,_,3)<0)return Kge(t,i,e,s,r,n,o,l,c,!f);const x=Al(e,i);if(Hu(e,i,o=Math.max(o,x)))return 0;if(gQe(e,i,s,n,r,o,l,c,f))return 2;const S=new Ze(0,1),P=new Ze(0,1);{const F=new Gr;NE(y,Ze.unit(),F);const G=new Gr;NE(_,Ze.unit(),G);const V=Math.max(F.maxDim(),G.maxDim());if(F.inflate(3*o),G.inflate(3*o),!F.intersectW(G))return 0;if(F.maxDim()<.1*V){if(Dte(y,F,S),Dte(_,F,P),S.isEmpty()||P.isEmpty())return 0;$E(y,S.vmin,S.vmax,y),$E(_,P.vmin,P.vmax,_)}}const A=Dx(y,2,_,2,o);if(A===0)return 0;const k=[],$=[];if(A===-1){const F=Ge(ys,3);V2(y,F);const G=[F[0].x,F[1].x,F[2].x],V=[F[0].y,F[1].y,F[2].y],B=Ge(ys,3);V2(_,B);const W=Mx(G,2,V,2,null,0,[B[0].x,B[1].x,B[2].x],2,[B[0].y,B[1].y,B[2].y],2,null,0,!0,Ze.unit(),Ze.unit(),k,$,f);if(W>0){let J=0;for(let re=0;re<W;re++){const se=new Y,oe=new Y;Gc(_,$[re],oe),Gc(y,k[re],se),Y.distance(se,oe)<=o&&(k[J]=k[re],$[J]=$[re],J++)}k.length=J,$.length=J}}for(let F=0;F<2;F++){const G=F===0?y:_,V=F===0?_:y;for(let B=0;B<2;B++){const W=B===0?0:2,J=[0];s7(V,G[W],J);const re=new Y;Gc(V,J[0],re),Y.distance(G[W],re)<=o&&(F===0?(k.push(W===0?0:1),$.push(J[0])):($.push(W===0?0:1),k.push(J[0])))}}if(k.length===0)return 0;if(!S.equalsRange(0,1))for(let F=0;F<k.length;++F)k[F]=em.recalculateParentT(S.vmin,S.vmax,k[F]);if(!P.equalsRange(0,1))for(let F=0;F<$.length;++F)$[F]=em.recalculateParentT(P.vmin,P.vmax,$[F]);return Uu(t,e,i,k,$,k.length,s,n,r,o,l,c,f)}function xj(t,e,i=!1){const s=t[1].sub(t[0]);e[1].assign(s.mul(2)),e[2].assign(t[2].sub(t[1]).sub(s)),i?e[0].setCoords(0,0):e[0].assign(t[0])}function cQe(t,e,i=!1){const s=Ge(Y,3);t.queryControlPoints(s),xj(s,e,i)}function hQe(t,e,i=!1){const n=new Be(t[1][0]).subE(new Be(t[0][0]));e[1]=n.mul(2),e[2]=new Be(t[2][0]).subE(new Be(t[1][0])).subE(n),i?e[0].set(0):e[0].set(t[0][0])}function dQe(t,e,i=!1){const n=new Be(t[1][1]).subE(new Be(t[0][1]));e[1]=n.mul(2),e[2]=new Be(t[2][1]).subE(new Be(t[1][1])).subE(n),i?e[0].set(0):e[0].set(t[0][1])}function V2(t,e,i=!1){const s=ys.constructPoint2D(t[1]),n=s.sub(ys.constructPoint2D(t[0]));e[1]=n.mul(_t.constructInt32(2)),e[2]=ys.constructPoint2D(t[2]).sub(s).sub(n),e[0]=i?new ys(Go,Go):ys.constructPoint2D(t[0])}function Gc(t,e,i,s){if(s){if(e<0)return void ml(new si({start:t[0],end:t[0].add(Tte().getUnitVector())}),e,i);if(e>1)return void ml(new si({start:t[2],end:t[2].add(Tte().getUnitVector())}),e-1,i)}if(e<=.5){const n=t[1].clone(),r=new Y;Wn(2,t[0],n,e,r);const o=new Y;Wn(2,n,t[2],e,o);const l=new Y;Wn(2,r,o,e,l),i.assign(l)}else{const n=t[1].clone(),r=new Y;Zn(2,t[0],n,e,r);const o=new Y;Zn(2,n,t[2],e,o);const l=new Y;Zn(2,r,o,e,l),i.assign(l)}}function fQe(t,e,i){K(0)}function pQe(t,e,i){K(0)}function mQe(t,e){e[0].assign(t[0]),e[3].assign(t[2]),ar(t[0],t[1],2/3,e[1]),ar(t[1],t[2],1/3,e[2])}function gQe(t,e,i,s,n,r,o,l,c){const f=Ge(Y,3);t.queryControlPoints(f);const y=Ge(Y,3);if(e.queryControlPoints(y),f[0].equals(y[0])){if(f[1].equals(y[1])&&f[2].equals(y[2]))return i&&(i.length=0,i.push(f[0]),i.push(f[2])),s&&(s.length=0,s.push(0),s.push(1)),n&&(n.length=0,n.push(0),n.push(1)),!0;if(!f[0].equals(y[2]))return!1}return!!(f[0].equals(y[2])&&f[1].equals(y[1])&&f[2].equals(y[0]))&&(s&&(s.length=0,s.push(0),s.push(1),c&&(s[1]=St(s[0],s[0]=s[1]))),n&&(n.length=0,n.push(1),n.push(0),c&&(n[1]=St(n[0],n[0]=n[1]))),i&&(i.length=0,i.push(f[0]),i.push(f[2]),c&&(i[1]=St(i[0],i[0]=i[1]))),!0)}var H4=vr;class Nu extends o5{constructor(e){e&&e.cp?(super({start:e.cp[0],end:e.cp[3],vd:e.vd}),this.m_cp=Ge(Y,2),this.m_cp[0].assign(e.cp[1]),this.m_cp[1].assign(e.cp[2])):e===void 0||WA(e,"vd")?(super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=Ge(Y,2),this.m_cp[0].setCoords(0,0),this.m_cp[1].setCoords(0,0)):e.from?(super({start:e.from,end:e.to,vd:e.vd}),this.m_cp=Ge(Y,2),this.m_cp[0].assign(e.cp1),this.m_cp[1].assign(e.cp2)):(super({XStart:0,YStart:0,XEnd:0,YEnd:0,vd:e.vd}),K(0),this.m_cp=Ge(Y,2),this.m_cp[0].setCoords(0,0),this.m_cp[1].setCoords(0,0)),this.m_cachedValues=0}getBoundary(){return Xh(this)}assignMove(e){return K(0),this}assignCopy(e){return K(0),this}construct(e,i,s,n){this.m_XStart=e.x,this.m_YStart=e.y,this.m_XEnd=n.x,this.m_YEnd=n.y,this.m_cp[0].assign(i),this.m_cp[1].assign(s),this.afterCompletedModification()}constructPoints(e){this.m_XStart=e[0].x,this.m_YStart=e[0].y,this.m_XEnd=e[3].x,this.m_YEnd=e[3].y,this.m_cp[0].assign(e[1]),this.m_cp[1].assign(e[2]),this.afterCompletedModification()}constructFromQuadratic(e){const i=Ge(Y,4);mQe(e,i),this.constructPoints(i)}constructFromQuadraticSegment(e){this.dropAllAttributes(),this.assignVertexDescription(e.getDescription()),this.m_XStart=e.getStartX(),this.m_YStart=e.getStartY(),this.m_XEnd=e.getEndX(),this.m_YEnd=e.getEndY(),BS(2,e.getStartXY(),e.getControlPoint1(),2/3,this.m_cp[0]),BS(2,e.getControlPoint1(),e.getEndXY(),1/3,this.m_cp[1]),this.afterCompletedModification(),EJe(this,e)}getGeometryType(){return me.enumBezier}queryEnvelope(e){if(!(e instanceof xe))return void K(0);if(e.setCoords(this.getStartXY()),e.mergeNe(this.getEndXY()),e.contains(this.m_cp[0])&&e.contains(this.m_cp[1]))return;const i=Kte(this);if(i!==null){const l=new Y;for(const c of i.specialPoints)this.queryCoord2D(c,l),e.mergeNe(l);return}const s=Ge(Be,8),n=Ge(Y,4);this.queryControlPoints(n);const r=f1e(n,s),o=new Y;for(let l=1;l<r-1;l++)this.queryCoord2D(s[l].value(),o),e.mergeNe(o)}applyTransformation(e){if(e instanceof _i){const i=Ge(Y,4);return this.queryControlPoints(i),e.transformPoints2D(i,4,i),this.setStartXY(i[0]),this.m_cp[0].assign(i[1]),this.m_cp[1].assign(i[2]),this.setEndXY(i[3]),void SN(this)}K(0)}createInstance(){return new Nu({vd:this.m_description})}calculateLength2D(){return qE(this,1,!1)}calculateLowerLength2D(){return Y.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return Y.distance(this.getStartXY(),this.m_cp[0])+Y.distance(this.m_cp[0],this.m_cp[1])+Y.distance(this.getEndXY(),this.m_cp[1])}calculateUpperLength2D_(){return K(0),0}queryCoord2D(e,i){return this.queryCoord2DExtends(e,i,!0)}queryCoord2DExtends(e,i,s){const n=Ge(Y,4);this.queryControlPoints(n),Mn(n,e,i,s)}queryCoord2DE(e,i){net(this,e,i)}getCoordX(e){if(e<0||e>1){const l=new Y;return this.queryCoord2DExtends(e,l,!0),l.x}const i=ji(this.getStartX(),this.m_cp[0].x,e),s=ji(this.m_cp[0].x,this.m_cp[1].x,e),n=ji(this.m_cp[1].x,this.getEndX(),e),r=ji(i,s,e),o=ji(s,n,e);return ji(r,o,e)}getCoordY(e){if(e<0||e>1){const l=new Y;return this.queryCoord2DExtends(e,l,!0),l.y}const i=ji(this.getStartY(),this.m_cp[0].y,e),s=ji(this.m_cp[0].y,this.m_cp[1].y,e),n=ji(this.m_cp[1].y,this.getEndY(),e),r=ji(i,s,e),o=ji(s,n,e);return ji(r,o,e)}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createCubicBezier();if(this.cutBezierIgnoreAttributes(e,i,r),n)return;r.assignVertexDescription(this.m_description);const o=this.m_description.getAttributeCount();if(o>1){for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=H4.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(e,c,y);r.setStartAttribute(c,y,_)}}for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=H4.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(i,c,y);r.setEndAttribute(c,y,_)}}}}queryDerivative(e,i){c1e(this,e,i)}cutBezierIgnoreAttributes(e,i,s){(e<0||i>1||e>i)&&Je("Cubic_bezier.cut_bezier_ignore_attributes");const n=Ge(Y,4);this.queryControlPoints(n);const r=Ge(Y,4);bv(n,e,i,r),s.setControlPoints(r)}splitBezierIgnoreAttributes(e,i,s){this===i&&this===s&&Je("Cubic_bezier.split_bezier_ignore_attributes");const n=Ge(Y,4);this.queryControlPoints(n);const r=Ge(Y,4),o=Ge(Y,4);GE(n,e,r,o),i&&i.setControlPoints(r),s&&s.setControlPoints(o)}getAttributeAsDbl(e,i,s){if(i===0)return s===0?this.getCoordX(e):this.getCoordY(e);if(e===0)return this.getStartAttributeAsDbl(i,s);if(e===1)return this.getEndAttributeAsDbl(i,s);const n=this.getStartAttributeAsDbl(i,s),r=this.getEndAttributeAsDbl(i,s),o=this.calculateLength2D(),l=o>0?this.tToLength(e)/o:0,c=H4.getInterpolation(i);return YA(c,n,r,l,H4.getDefaultValue(i))}getClosestCoordinate(e,i){const s=[Number.NaN];return F6(this,e,Ze.unit(),i,-1,1,s),s[0]}getClosestCoordinateOnInterval(e,i,s=-1){const n=[Number.NaN];return F6(this,e,i,!1,s,1,n)===0?Number.NaN:n[0]}getYMonotonicParts(e,i=!1){return K(0),0}getMonotonicParts(e,i){e.length<2&&Je("");const s=VE(this);if(s.specialPointsCount()===2&&this.isMonotoneQuickAndDirty())return 0;let n=0;K(e.length>=s.specialPointsCount()-1);for(let r=1,o=s.specialPointsCount();r<o;++r)this.queryCut(s.specialPoints[r-1],s.specialPoints[r],e[n],i),n++;for(let r=0;r<n;++r)L6(e[r].get());return n}intersectionWithAxis2D(e,i,s,n){const r=Ge(Y,4);return this.queryControlPoints(r),pet(r,e,i,s,n)}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const s=[0,0],n=this.intersectionWithAxis2D(!0,e,s,null);return K(n!==2),n===-1?i:s[0]}isCurve(){return!0}isDegenerate(e){return t7(this,e)}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){if(e instanceof xe)return e.setCoords({pt:this.getStartXY()}),e.mergeNe(this.m_cp[0]),e.mergeNe(this.m_cp[1]),void e.mergeNe(this.getEndXY());K(0)}clone(e){const i=this.createInstance();return this.copyTo(i),i}queryInterval(e,i){if(e===0){const s=xe.constructEmpty();this.queryEnvelope(s);const n=Ze.constructEmpty();return i===0?s.queryIntervalX(n):s.queryIntervalY(n),n}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const s=Ge(Y,4);this.queryControlPoints(s),bv(s,e.vmin,e.vmax,s),i.setFromPoints(s,4)}changeEndPoints2D(e,i){if(e.isEqual(this.m_XStart,this.m_YStart)&&i.isEqual(this.m_XEnd,this.m_YEnd))return;const s=this.m_cp[0].isEqual(this.m_XStart,this.m_YStart),n=this.m_cp[0].isEqual(this.m_XEnd,this.m_YEnd),r=this.m_cp[1].isEqual(this.m_XStart,this.m_YStart),o=this.m_cp[1].isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(e),this.setEndXY(i),s?this.m_cp[0].setCoordsPoint2D(e):n&&this.m_cp[0].setCoordsPoint2D(i),o?this.m_cp[1].setCoordsPoint2D(i):r&&this.m_cp[1].setCoordsPoint2D(e),this.normalizeAfterEndpointChange()}tToLength(e){return qE(this,e,!0)}lengthToT(e){return XQe(this,e)}calculateWeightedAreaCentroid2D(e){const i=Ge(Y,4);r1e(this,i);const s=i[3],n=i[2],r=i[1],o=new Y;o.x=(5*s.x*s.x*(7*n.y+16*r.y)+s.x*(-35*s.y*n.x+40*n.x*n.y-80*s.y*r.x+140*n.x*r.y+112*r.x*r.y)-2*(s.y*(20*n.x*n.x+70*n.x*r.x+56*r.x*r.x)-7*(4*n.x+5*r.x)*(-n.y*r.x+n.x*r.y)))/840,o.y=(-5*s.y*s.y*(7*n.x+16*r.x)+s.y*(5*s.x*(7*n.y+16*r.y)-4*(10*n.x*n.y+35*n.y*r.x+28*r.x*r.y))+2*(-7*(4*n.y+5*r.y)*(n.y*r.x-n.x*r.y)+s.x*(20*n.y*n.y+70*n.y*r.y+56*r.y*r.y)))/840;const l=Jte(this);return o.x+=(i[0].x-e.x)*l,o.y+=(i[0].y-e.y)*l,o}calculateWeightedCentroid2D(){const e=new Y;return this.isDegenerate(0)?(e.setCoords(0,0),e):YQe(this)?(e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e):(e.assign(WQe(this,1)),e)}getControlPoint1(){return this.m_cp[0].clone()}setControlPoint1(e){this.m_cp[0].setCoordsPoint2D(e),this.afterCompletedModification()}getControlPoint2(){return this.m_cp[1].clone()}setControlPoint2(e){this.m_cp[1].setCoordsPoint2D(e),this.afterCompletedModification()}queryControlPoints(e){e[0].assign(this.getStartXY()),e[1].assign(this.m_cp[0]),e[2].assign(this.m_cp[1]),e[3].assign(this.getEndXY())}setControlPoints(e){for(let i=0;i<4;i++)e[i].isNAN()&&Je("NAN control points in bezier are not supported");this.m_XStart=e[0].x,this.m_YStart=e[0].y,this.m_cp[0].setCoordsPoint2D(e[1]),this.m_cp[1].setCoordsPoint2D(e[2]),this.m_XEnd=e[3].x,this.m_YEnd=e[3].y,this.afterCompletedModification()}getTangent(e){const i=Ge(Y,4);return this.queryControlPoints(i),xz(i,e)}getDerivative(e){return K(0),Y.getNAN()}getCurvature(e){const i=Vy(this,1,e),s=Vy(this,2,e),n=i.sqrLength();return n===0?Number.NaN:(i.divThis(Math.sqrt(n)),i.crossProduct(s)/n)}isIntersectingPoint(e,i,s){if(s&&(e.equals(this.getStartXY())||e.equals(this.getEndXY())))return!1;const n=new xe;if(this.queryLooseEnvelope(n),n.inflateCoords(i,i),!n.contains(e))return!1;const r=this.getClosestCoordinate(e,!1),o=new Y;return this.queryCoord2D(r,o),Y.distance(o,e)<=i}isIntersectingPoint3D(e,i,s,n,r=1){return K(0),!1}queryAttributeAsDbl(e,i,s,n){K(0)}isMonotoneQuickAndDirty(){const e=Ge(Y,4);return this.queryControlPoints(e),iet(e)}getMonotonicPartParams(e,i){const s=VE(this),n=s.specialPointsCount();if(K(r5.s_maxMonotonicPartParams>=n),!i)return s.specialPointsCount();e<n&&Je("");for(let r=0;r<n;r++)i[r]=s.specialPoints[r];return n}normalizeAfterEndpointChange(){return!1}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){this.m_XEnd=St(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=St(this.m_YStart,this.m_YStart=this.m_YEnd);for(let e=0,i=this.m_description.getTotalComponentCount()-2;e<i;e++)this.m_attributes[e+i]=St(this.m_attributes[e],this.m_attributes[e]=this.m_attributes[e+i]);this.m_cp[1]=St(this.m_cp[0],this.m_cp[0]=this.m_cp[1]),this.m_cachedValues=null}}findMinDeriv(){const e=new Be;return u1e(this,e),e.value()}queryConvexHull2D(e){return K(0),0}isLine(){return!1}isDegenerateToLineHelper(e){return K(0),!1}copyIgnoreAttributes(e){const i=Ge(Y,4);this.queryControlPoints(i),e.setControlPoints(i)}calculateArea2DHelper(){return Jte(this)}absNorm(){return uet(this)}queryEnvelopeW(e,i){h1e(this,e,i)}setSegmentFromCoords(e,i){het(this,e,i)}writeInBufferStream(e,i){const s=new Float64Array(4);return this.writeInBuffer_(s),e.writeRangeFromArray(i,s.length,s,!0,1),i+s.length}writeInBuffer_(e){return e[0]=this.m_cp[0].x,e[1]=this.m_cp[0].y,e[2]=this.m_cp[1].x,e[3]=this.m_cp[1].y,4}readFromBufferStream(e,i){const s=new Float64Array(4);e.queryRange(i,s.length,s,!0,1),this.readFromBuffer_(s)}readFromBuffer_(e){this.m_cp=Ge(Y,2),this.m_cp[0].x=e[0],this.m_cp[0].y=e[1],this.m_cp[1].x=e[2],this.m_cp[1].y=e[3],this.m_cachedValues=null}snapControlPoints(e){const i=Ge(Y,4);this.queryControlPoints(i);const s=(o,l,c)=>{let f=!1;return Y.sqrDistance(o,c)<=e&&(f=!o.equals(c),o.setCoordsPoint2D(c),Y.sqrDistance(l,c)<=e&&(f||(f=!l.equals(c)),l.setCoordsPoint2D(c))),f},n=s(i[1],i[2],i[0]),r=s(i[2],i[1],i[3]);return(n||r)&&this.setControlPoints(i),n||r}needsSnapControlPoints(e){if(!e)return!1;const i=Ge(Y,4);this.queryControlPoints(i);const s=(o,l,c)=>{let f=!1;return Y.sqrDistance(o,c)<=e&&(f=!o.equals(c),o.setCoordsPoint2D(c),Y.sqrDistance(l,c)<=e&&(f||(f=!l.equals(c)),l.setCoordsPoint2D(c))),f},n=s(i[1],i[2],i[0]),r=s(i[2],i[1],i[3]);return n||r}calculateSpecialPointsForCracking(e,i){return met(this,e,i)}ensureXYMonotone(){return L6(this)}setCoordsForIntersector(e,i,s){ZQe(this,e,i,s)}copyToImpl(e){const i=e;i.m_cp[0].assign(this.m_cp[0]),i.m_cp[1].assign(this.m_cp[1]),l1e(i,Kte(this))}reverseImpl(){this.m_cp[1]=St(this.m_cp[0],this.m_cp[0]=this.m_cp[1])}equalsImpl(e){const i=e;return!!this.m_cp[0].equals(i.m_cp[0])&&!!this.m_cp[1].equals(i.m_cp[1])}equalsImplTol(e,i){const s=e;return!!this.m_cp[0].isEqualPoint2D(s.m_cp[0],i)&&!!this.m_cp[1].isEqualPoint2D(s.m_cp[1],i)}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){SN(this)}isIntersecting(e,i,s){return u5(!1,this,e,i,s)!==0}intersect(e,i,s,n,r){return qv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){return aet(this,e,i,s)}intersect_(e,i,s,n){return K(0),0}endPointModified(){SN(this)}clearEndPointModified(){K(0)}}Nu.type=me.enumBezier;const Ote=[[.33998104358485626,.6521451548625461],[.8611363115940526,.34785484513745385]],Rte=[[.1834346424956498,.362683783378362],[.525532409916329,.31370664587788727],[.7966664774136267,.22238103445337448],[.9602898564975363,.10122853629037626]],Lte=[[.09501250983763744,.1894506104550685],[.2816035507792589,.18260341504492358],[.45801677765722737,.16915651939500254],[.6178762444026438,.14959598881657674],[.755404408355003,.12462897125553388],[.8656312023878318,.09515851168249279],[.9445750230732326,.062253523938647894],[.9894009349916499,.027152459411754096]],Fte=[[.04830766568773832,.0965400885147278],[.1444719615827965,.09563872007927486],[.23928736225213706,.09384439908080457],[.33186860228212767,.09117387869576389],[.42135127613063533,.08765209300440381],[.5068999089322294,.08331192422694675],[.5877157572407623,.07819389578707031],[.6630442669302152,.0723457941088485],[.7321821187402897,.06582222277636185],[.7944837959679424,.058684093478535544],[.84936761373257,.050998059262376175],[.8963211557660521,.04283589802222668],[.9349060759377397,.03427386291302143],[.9647622555875064,.02539206530926206],[.9856115115452684,.01627439473090567],[.9972638618494816,.007018610009470096]],zte=[[.024350292663424433,.048690957009139724],[.07299312178779904,.04857546744150343],[.12146281929612056,.048344762234802954],[.16964442042399283,.04799938859645831],[.21742364374000708,.04754016571483031],[.2646871622087674,.04696818281621002],[.31132287199021097,.046284796581314416],[.3572201583376681,.04549162792741814],[.4022701579639916,.044590558163756566],[.4463660172534641,.04358372452932345],[.48940314570705296,.04247351512365359],[.5312794640198946,.04126256324262353],[.571895646202634,.03995374113272034],[.6111553551723933,.038550153178615626],[.6489654712546573,.03705512854024005],[.6852363130542333,.035472213256882386],[.7198818501716109,.033805161837141606],[.7528199072605319,.03205792835485155],[.7839723589433414,.030234657072402478],[.8132653151227975,.028339672614259483],[.8406292962525803,.02637746971505466],[.8659993981540928,.024352702568710874],[.8893154459951141,.022270173808383253],[.9105221370785028,.02013482315353021],[.9295691721319396,.017951715775697343],[.9464113748584028,.015726030476024718],[.9610087996520538,.013463047896718643],[.973326827789911,.011168139460131128],[.983336253884626,.008846759826363947],[.9910133714767443,.006504457968978363],[.9963401167719553,.004147033260562468],[.9993050417357722,.001783280721696433]],qte=[[.012223698960615764,.024446180196262518],[.03666379096873349,.024431569097850044],[.06108196960413957,.02440235563384958],[.08546364050451549,.024358557264690626],[.10979423112764375,.024300200167971867],[.13405919946118777,.02422731922281525],[.15824404271422493,.024139957989019287],[.18233430598533718,.024038168681024052],[.2063155909020792,.023922012136703457],[.23017356422666,.023791557781003402],[.2538939664226943,.023646883584447616],[.2774626201779044,.02348807601653591],[.3008654388776772,.02331522999406276],[.32408843502441337,.023128448824387027],[.3471177285976355,.022927844143686846],[.369939555349859,.02271353585023646],[.39254027503326744,.022485652032744968],[.414906379552275,.022244328893799764],[.43702450103710416,.02198971066846049],[.4588814198335522,.021721949538052076],[.48046407240417205,.02144120553920846],[.5017595591361445,.02114764646822135],[.5227551520511755,.02084144778075115],[.5434383024128103,.02052279248696007],[.5637966482266181,.020191871042130043],[.5838180216287631,.01984888123283086],[.6034904561585486,.019494028058706602],[.6228021939105849,.019127523609950944],[.6417416925623075,.01874958694054471],[.660297632272646,.01836044393733134],[.6784589224477192,.017960327185008687],[.6962147083695144,.017549475827117706],[.7135543776835874,.01712813542311138],[.7304675667419088,.016696557801589205],[.746944166797062,.016255000909785187],[.7629743300440948,.015803728659399347],[.7785484755064119,.015343010768865144],[.7936572947621933,.014873122602147314],[.8082917575079137,.014394345004166847],[.8224431169556439,.013906964132951985],[.8361029150609068,.013411271288616333],[.8492629875779689,.012907562739267348],[.8619154689395485,.012396139543950923],[.8740527969580318,.01187730737274028],[.8856677173453972,.011351376324080417],[.8967532880491582,.010818660739503076],[.9073028834017568,.010279479015832158],[.9173101980809605,.009734153415006806],[.9267692508789478,.009183009871660874],[.9356743882779164,.00862637779861675],[.9440202878302202,.008064589890486059],[.9518019613412644,.0074979819256347285],[.9590147578536999,.006926892566898814],[.9656543664319652,.006351663161707189],[.9717168187471366,.005772637542865698],[.9771984914639074,.00519016183267633],[.9820961084357185,.004604584256702955],[.9864067427245862,.004016254983738642],[.9901278184917344,.0034255260409102157],[.9932571129002129,.0028327514714579912],[.9957927585349812,.0022382884309626186],[.997733248625514,.0016425030186690294],[.9990774599773758,.0010458126793403489],[.9998248879471319,.00044938096029209035]];function tf(t,e,i,s){const n=.5*(s-i),r=i+n,o=new Fr(0);for(let l=0,c=Math.trunc(t/2);l<c;++l){let f,y;switch(t){case 4:f=Ote[l][0],y=Ote[l][1];break;case 8:f=Rte[l][0],y=Rte[l][1];break;case 16:f=Lte[l][0],y=Lte[l][1];break;case 32:f=Fte[l][0],y=Fte[l][1];break;case 64:f=zte[l][0],y=zte[l][1];break;case 128:f=qte[l][0],y=qte[l][1];break;default:throw new Error("Quadrature_integral: invalid n")}const _=Xee(-.5,f,r),x=Xee(n,f,r);o.pe(e(_)*y),o.pe(e(x)*y)}return o.getResult()*n}class yQe{constructor(){this.length=Number.NaN,this.area=Number.NaN,this.centroidX=Number.NaN,this.centroidY=0,this.specialPoints=[],this.specialPointsLength=[]}specialPointsCount(){return this.specialPoints.length}}function dz(t,e,i,s,n,r,o,l){for(;;){const c=Y.distance(e[0],e[2]),f=Y.distance(e[0],e[1])+Y.distance(e[1],e[2]);if(f-c<=n+s*f)return t+ji(c,f,.5);const y=Ge(Y,4),_=J=>(o2(e,i,1,J,y),y[1].length());if(o===0&&l<8){K(l<8);let J=_(0),re=_(1);r[0]+=2,J>re&&(re=St(J,J=re),e[2]=St(e[0],e[0]=e[2]),i[2]=St(i[0],i[0]=i[2]));let se=J/(J+re),oe=1,pe=f;for(;se<1/32&&pe>=n+s*pe;){oe/=4;const ue=_(oe);r[0]++,se=J/(ue+J);const ce=new Y;if(Xn(e,i,.5*oe,ce),pe=Y.distance(ce,e[0]),pe<=n){const ne=new Y;Xn(e,i,oe,ne),pe+=Y.distance(ne,ce)}}if(oe!==1){const ue=Ge(Y,3),ce=[0,0,0];Hte(e,i,oe,e,i,ue,ce),t=dz(t,ue,ce,s,n,r,0,l+1),o++,l++;continue}}let x=!1;const S=8;r[0]+=S;const P=tf(S,_,0,1),A=16;r[0]+=A;const k=tf(A,_,0,1);if(x=Math.abs(P-k)>n+s*f,!x)return t+k;if(o<8&&l<9){const J=Ge(Y,3),re=[0,0,0];Hte(e,i,.5,e,i,J,re),t=dz(t,J,re,s,n,r,o+1,l+1),o++,l++;continue}const $=32;r[0]+=$;const F=tf($,_,0,1);if(x=Math.abs(k-F)>n+s*f,!x)return t+F;const G=64;r[0]+=G;const V=tf(G,_,0,1);if(x=Math.abs(F-V)>n+s*f,!x)return t+V;const B=128;r[0]+=B;const W=tf(B,_,0,1);return x=Math.abs(V-W)>n+s*f,t+W}}function vQe(t,e,i,s,n){if(i===e)return 0;const r=Ge(Y,3),o=[0,0,0];t.queryControlPoints(r),t.queryWeights(o);const l=[0,0,0],c=Ge(Y,3);return _v(r,o,e,i,c,l),dz(0,c,l,s,n,[0],0,0)}let _Qe=class{constructor(t,e,i){this.controlPoints=C6(t,3),this.weights=[0,0,0],dn(this.weights,e,0,0,3),this.point=i.clone()}getMaxDerivative(){return 3}getValue(t,e){if(t===0){const i=new Y;Xn(this.controlPoints,this.weights,e,i);const s=Ge(Y,4);return o2(this.controlPoints,this.weights,1,e,s),2*i.sub(this.point).dotProduct(s[1])}if(t===1){const i=new Y;Xn(this.controlPoints,this.weights,e,i);const s=Ge(Y,4);return o2(this.controlPoints,this.weights,2,e,s),2*(i.sub(this.point).dotProduct(s[2])+s[1].dotProduct(s[1]))}if(t===2){const i=new Y;Xn(this.controlPoints,this.weights,e,i);const s=Ge(Y,4);return o2(this.controlPoints,this.weights,3,e,s),2*(i.sub(this.point).dotProduct(s[3])+3*s[1].dotProduct(s[2]))}return 0}getError(t){return K(0),0}};function bQe(t,e,i,s){const n=OQe(0,0,0,0,Y.getNAN()),r=new Array(18),o=Ge(Y,3);t.queryControlPoints(o),o[2].subThis(e),o[1].subThis(e),o[0].subThis(e);const l=[0,0,0];t.queryWeights(l);const c=[1,od(l),1],f=zE(l,i),y=zE(l,s),_=Xg(new _Qe(o,c,new Y(0,0)),Ze.construct(f,y),18,r);Xn(o,c,f,n.pt),n.t=f,n.d=Y.distance(n.pt,new Y(0,0));const x=new Y;Xn(o,c,y,x);const S=Y.distance(x,new Y(0,0));S<n.d&&(n.d=S,n.t=y,n.pt.assign(x));for(let P=0;P<_;P++){Xn(o,c,r[P],x);const A=Y.distance(x,new Y(0,0));A<n.d&&(n.d=A,n.t=B2(l,r[P]),n.pt.assign(x))}return n}function xQe(t,e,i,s,n){let r=!0;const o=Ge(Y,4),l=q2(5,e,i,s,n,f=>(Vte(t,1,f,o),(r?t.getCoordX(f)-t.getStartX():t.getCoordY(f)-t.getStartY())*o[1].length()));r=!1;const c=q2(5,e,i,s,n,f=>(Vte(t,1,f,o),(r?t.getCoordX(f)-t.getStartX():t.getCoordY(f)-t.getStartY())*o[1].length()));return new Y(l,c)}function U4(t){t.m_cachedValues=null}function OE(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new yQe,i=Ge(Y,3);t.queryControlPoints(i);const s=[0,0,0];return t.queryWeights(s),Jge(i,s,e.specialPoints),e1e(t,e),e}function Jge(t,e,i){if(e[1]===0)return i.length=2,i[0]=0,void(i[1]=1);const s=Ge(Be,8);s[0].set(0);let n=1;{const r=new Be(t[1].x).subThis(t[0].x).mulThis(e[1]).mulThis(e[0]),o=new Be(t[2].x).subThis(t[0].x).mulThis(e[2]).mulThis(e[0]),l=r.subE(o).addThisE(new Be(t[2].x).subThis(t[1].x).mulThis(e[2]).mulThis(e[1]));o.subThisE(r.mul(2));const c=Ge(Be,2);let f=Sl(l,o,r,new Ze(0,1),!1,c);f<0&&(f=0);for(let y=0;y<f;y++)Is(c[y].value(),0,1)||(s[n]=c[y],n++)}{const r=new Be(t[1].y).subThis(t[0].y).mulThis(e[1]).mulThis(e[0]),o=new Be(t[2].y).subThis(t[0].y).mulThis(e[2]).mulThis(e[0]),l=r.subE(o).addThisE(new Be(t[2].y).subThis(t[1].y).mulThis(e[2]).mulThis(e[1]));o.subThisE(r.mul(2));const c=Ge(Be,2);let f=Sl(l,o,r,new Ze(0,1),!1,c);f<0&&(f=0);for(let y=0;y<f;y++)Is(c[y].value(),0,1)||(s[n]=c[y],n++)}if(s[n].set(1),n++,n>2){sd(s,0,n,(c,f)=>_f(c.value(),f.value()));let r=0,o=s[0].value(),l=1;for(let c=1;c<n;c++)s[c].eq(s[c-1])?(o+=s[c].value(),l++):(l>1&&(o/=l,s[r].set(o)),r++,s[r]=s[c],o=s[c].value(),l=1);r++,n=r}s[0].set(0),s[n-1].set(1),i.length=n;for(let r=0;r<n;r++)i[r]=s[r].value()}function RE(t,e,i){if(i){if(e<0)return e;if(e>1)return e-1+RE(t,1,!1)}if(t.isDegenerate(0))return 0;const s=e===1,n=OE(t);if(s&&!Number.isNaN(n.length))return n.length;const r=Qge(t),o=r/t.calculateUpperLength2D();let l=0,c=0;for(let f=1,y=n.specialPointsCount();f<y;f++){const _=n.specialPoints[f];if(l+=vQe(t,c,Math.min(e,_),o,r),e<=_)break;c=_}return s&&(n.length=l),l}function Vte(t,e,i,s){const n=Ge(Y,3);t.queryControlPoints(n);const r=[0,0,0];t.queryWeights(r),o2(n,r,e,i,s)}function o2(t,e,i,s,n){const r=[t[0],t[1],t[2]],o=[e[0],e[1],e[2]],l=Ge(Y,4);wQe(r,o,i,s,l);for(let c=0;c<=i;c++)n[c].setCoords(l[c].x,l[c].y)}function wQe(t,e,i,s,n){K(i>0);const r=[t[0].clone(),t[1].clone(),t[2].clone()];if(!r[0].isZero()){for(let G=1;G<3;++G)r[G].subThis(r[0]);r[0].setCoords(0,0)}const o=Y4(r,e,0,s),l=wN(e,0,s),c=o.divide(l);if(n[0].assign(c),i===0)return;const f=[e[1]*e[0],e[2]*e[0]*.5,e[1]*e[2]],y=[t[1].sub(t[0]),t[2].sub(t[0]),t[2].sub(t[1])],_=l*l,x=Y4(y,f,0,s).mul(2).divide(_);if(n[1].assign(x),i===1)return;const S=wN(e,1,s),P=2*l*S,A=Y4(y,f,1,s).mul(2).sub(x.mul(P)).divide(_);if(n[2].assign(A),i===2)return;const k=Y4(y,f,2,s).mul(2),$=2*(S*S+l*wN(e,2,s)),F=k.sub(A.mul(P).mul(2)).sub(x.mul($)).divide(_);n[3].assign(F),i!==3&&bt("")}function Y4(t,e,i,s){if(i===0){if(s<=.5){const n=new Y;Wn(2,t[0].mul(e[0]),t[1].mul(e[1]),s,n);const r=new Y;Wn(2,t[1].mul(e[1]),t[2].mul(e[2]),s,r);const o=new Y;return Wn(2,n,r,s,o),o}{const n=new Y;Zn(2,t[0].mul(e[0]),t[1].mul(e[1]),s,n);const r=new Y;Zn(2,t[1].mul(e[1]),t[2].mul(e[2]),s,r);const o=new Y;return Zn(2,n,r,s,o),o}}if(i===1){const n=t[1].mul(e[1]),r=n.sub(t[0].mul(e[0])).mul(1-s).add(t[2].mul(e[2]).sub(n).mul(s));return r.mulThis(2),r}if(i===2){const n=t[1].mul(e[1]),r=t[2].mul(e[2]).sub(n).sub(n.sub(t[0].mul(e[0])));return r.mulThis(2),r}bt("")}function Gte(t,e,i,s){if(s.toDouble()<=.5){const n=new Bt;Zd(2,t[0].mulE(e[0]),t[1].mulE(e[1]),s,n);const r=new Bt;Zd(2,t[1].mulE(e[1]),t[2].mulE(e[2]),s,r);const o=new Bt;return Zd(2,n,r,s,o),o}{const n=new Bt;Kd(2,t[0].mulE(e[0]),t[1].mulE(e[1]),s,n);const r=new Bt;Kd(2,t[1].mulE(e[1]),t[2].mulE(e[2]),s,r);const o=new Bt;return Kd(2,n,r,s,o),o}}function wN(t,e,i){if(e===0){const s=ji(t[0],t[1],i),n=ji(t[1],t[2],i);return ji(s,n,i)}if(e===1)return 2*((1-i)*(t[1]-t[0])+(t[2]-t[1])*i);if(e===2)return 2*(t[2]-t[1]-(t[1]-t[0]));bt("")}function SQe(t,e,i){if(i.toDouble()<=.5){const s=wc(t[0],t[1],i),n=wc(t[1],t[2],i);return wc(s,n,i)}{const s=Sc(t[0],t[1],i),n=Sc(t[1],t[2],i);return Sc(s,n,i)}}function EQe(t,e,i,s,n){const r=[Bt.constructPoint2D(t[0]),Bt.constructPoint2D(t[1]),Bt.constructPoint2D(t[2])];r[2].subThisE(r[0]),r[1].subThisE(r[0]),r[0].setCoords(0,0),CQe(r,[new Be(e[0]),new Be(e[1]),new Be(e[2])],i,s,n)}function CQe(t,e,i,s,n){K(i>0);const r=[t[0].clone(),t[1].clone(),t[2].clone()];if(!r[0].isZero()){for(let S=1;S<3;++S)r[S].subThisE(r[0]);r[0]=Bt.constructCoords(0,0)}const o=Gte(r,e,0,s),l=SQe(e,0,s),c=o.divE(l);n[0].setE(c);const f=[e[1].mulE(e[0]),e[2].mulE(e[0]).mul(.5),e[1].mulE(e[2])],y=Gte([t[1].subE(t[0]),t[2].subE(t[0]),t[2].subE(t[1])],f,0,s).mul(2),_=l.sqr(),x=y.divE(_);n[1].setE(x)}function PQe(t,e,i){const s=Ge(Y,3);t.queryControlPoints(s);const n=new Array(3);t.queryWeights(n),TQe(s,n,e,i)}function TQe(t,e,i,s){i.value()<0&&i.set(0,i.eps()),i.value()>1&&i.set(1,i.eps());const n=Ge(Bt,4);EQe(t,e,1,i,n),s.setE(n[1])}function fz(t,e,i){const s=cn(i,0,1),n=Ge(Y,4);if(o2(t,e,3,s,n),n[1].isZero()){if(n[2].isZero())return n[3];{const r=n[2].clone();return s===1&&r.negateThis(),r}}return n[1]}class IQe{constructor(e,i){this.len=0,this.b=e,this.len=i}getMaxDerivative(){return 1}getValue(e,i){return e===0?this.len-RE(this.b,i,!1):0}getError(e){return K(0),0}}function MQe(t,e,i){const s=RE(t,1,!1);if(e<=0)return e;if(e>=s)return e-s+1;const n=[0];return Xg(new IQe(t,e),Ze.unit(),1,n)!==1&&bt(""),n[0]}function jte(t){const e=Ge(Y,3),i=[0,0,0];return t.queryControlPoints(e),t.queryWeights(i),AQe(e,i)}function AQe(t,e){const i=od(e);if(i===1)return Yge(t);if(i===0)return 0;const s=[new Y(0,0),t[1].sub(t[0]),t[2].sub(t[0])],n=s[1].crossProduct(s[2]);if(i<1){K(i>0);const r=1-i;let o;if(r<.01)o=-1/3+r*(2/15+r*(3/35+r*(16/315+r*(20/693+r*(16/1001+r*(56/6435))))));else{const l=r*(1+i),c=Math.atan2(Math.sqrt(r),Math.sqrt(1+i));o=i*(.5*i-yKe(l)*c)/l}return n*o}{const r=(i-1)*(i+1);return .25*i/Math.pow(r,1.5)*(-2*i*Math.sqrt(r)*n-4*s[1].y*s[2].x*Math.atanh(Math.sqrt((i-1)/(i+1)))-s[1].x*s[2].y*Math.log(2*i*(i-Math.sqrt(r))-1))}}function DQe(t,e){const i=od(e);if(i===1){const r=Ge(Y,3);xj(t,r);const o=r[2].clone(),l=r[1].clone(),c=new Y,f=o.y*l.x-o.x*l.y;return c.x=-(4*o.x+5*l.x)*f/60,c.y=-(4*o.y+5*l.y)*f/60,c}if(i===0)return new Y(0,0);K(i>0);const s=t[1].sub(t[0]),n=t[2].sub(t[0]);if(i<1){const r=Math.sqrt(1-i),o=Math.sqrt(1+i),l=(s.y*n.x-s.x*n.y)*i/Math.pow(r*o,5)/12,c=Math.atan2(r,o),f=i*r*o,y=i*i,_=s.mul(2*(2+y)),x=n.mul(2*y-5),S=_.add(x).mul(f),P=n.sub(s.mul(2*y)).mul(6*c);return S.add(P).mul(l)}{const r=Math.sqrt(i-1),o=Math.sqrt(i+1),l=(s.y*n.x-s.x*n.y)*i/Math.pow(r*o,5)/12,c=Math.atanh(r/o),f=i*r*o,y=i*i,_=s.mul(4).sub(n.mul(5)),x=s.add(n).mul(2*y),S=_.add(x).mul(f),P=n.sub(s.mul(2*y)).mul(6*c);return S.add(P).mul(l)}}function kQe(t){const e=Ge(Y,3),i=[0,0,0];return t.queryControlPoints(e),t.queryWeights(i),DQe(e,i)}function Qge(t){return NQe(t.calculateUpperLength2D())}function NQe(t){return 256*en()*t}function $Qe(t){if(t.m_weights[1]===0)return!0;const e=Y.distance(t.getStartXY(),t.getEndXY()),i=t.calculateUpperLength2D();return i-e<=8*Number.EPSILON*i}function Bte(t){return t.m_cachedValues}function e1e(t,e){t.m_cachedValues=e}function pz(t,e,i,s,n){const r=Ge(Y,3);t.queryControlPoints(r);const o=[0,0,0];t.queryWeights(o);const l=[0];return wj(r,o,e,Ze.unit(),s,n,1,l)===1?l[0]:Number.NaN}function wj(t,e,i,s,n,r,o,l){PE(Ze.unit().contains(s)&&o>0,""),(r<0||Number.isNaN(r))&&(r=Number.MAX_VALUE);const c=new Array(3);for(let Oe=0;Oe<3;++Oe)c[Oe]=t[Oe].sub(i);const f=od(e),y=ys.constructPoint2D(c[0]),_=ys.constructPoint2D(c[1]),x=ys.constructPoint2D(c[2]),S=_t.constructDouble(f),P=S.clone();P.ldexpThis(1);const A=y.dotProduct(_.sub(y)).mul(S),k=S.mul(S.addDouble(2)),$=x.sub(_.mul(k.ldexp(1))),F=_.sqrLength().mul(S.mul(S).ldexp(1)).add(y.sqrLength().mul(S.ldexp(2).subDouble(1))).add(y.dotProduct($)),G=x.sub(_.mul(P)).add(y.mul(P.subDouble(1))),V=_.mul(S).sub(y).dotProduct(G).mulDouble(3),B=_.dotProduct(x).mul(S.subDouble(3).mul(S)).ldexp(1),W=_.sqrLength().mul(S.mul(S).ldexp(2)),J=y.sqrLength().mul(S.ldexp(2).subDouble(3)),re=y.dotProduct(x.sub(_.mul(S.mulDouble(3).subDouble(1)).mul(S))).ldexp(1),se=x.sqrLength().addThis(B).addThis(W).addThis(J).addThis(re),oe=y.add(x).sub(_.mul(P)),pe=S.subDouble(1),ue=x.sub(y).dotProduct(oe).mul(pe),ce=new Y(0,0),ne=[];let de=new Y;Xn(c,e,s.vmin,de);let Se=Y.distance(de,ce);if(Se<=r&&ne.push(new Y(s.vmin,Se)),s.vmin!==s.vmax&&(Xn(c,e,s.vmax,de),Se=Y.distance(de,ce),Se<=r&&ne.push(new Y(s.vmax,Se))),s.width()>0){const Oe=c[2].isZero(),we=Ge(_t,4),Fe=qge(ue,se,V,F,A,58,s,Oe,we);for(let it=0;it<Fe;it++){if(!s.containsExclusiveCoordinate(we[it].toDouble()))continue;let vt=we[it].toDouble();vt=B2(e,vt);const ot=new Y;Xn(c,e,vt,ot),Se=Y.distance(ot,ce),Se<=r&&ne.push(new Y(vt,Se))}}if(n){K(s.equals(Ze.unit()));{Xn(c,e,-1,de,!0);const Oe=new Y;Xn(c,e,0,Oe);const we=new si({start:de,end:Oe}),Fe=we.getClosestCoordinate(ce,!0);Fe<1&&(de=we.getCoord2D(Fe),Se=Y.distance(de,ce),Se<=r&&ne.push(new Y(Fe-1,Se)))}{Xn(c,e,2,de,!0);const Oe=new Y;Xn(c,e,s.vmax,Oe);const we=new si({start:Oe,end:de}),Fe=we.getClosestCoordinate(ce,!0);Fe>0&&(de=we.getCoord2D(Fe),Se=Y.distance(de,ce),Se<=r&&ne.push(new Y(1+Fe,Se)))}}if(!ne.length)return 0;ne.sort((Oe,we)=>Oe.compare(we));let Pe=0;const Re=ne[0].x;if(l[Pe++]=Re,Pe<o){const Oe=Ege(c,4,!1).total(),we=ne[0].y;for(let Fe=1,it=ne.length;Fe<it;Fe++)if(ne[Fe].y>we+Oe){ne.length=Fe;break}ne.sort((Fe,it)=>_f(Fe.x,it.x)),Pe=0,l[Pe++]=ne[0].x;for(let Fe=1,it=ne.length;Fe<it;Fe++)ne[Fe].x!==l[Pe-1]&&Pe<o&&(l[Pe++]=ne[Fe].x)}return Pe}function OQe(t,e,i,s,n){return{tmin:t,tmax:e,t:i,d:s,pt:n.clone()}}function RQe(t,e,i,s,n){const r=new Gr;if(t1e(t,Ze.unit(),r),r.inflate(s),!r.isIntersectingPoint2D(e))return 0;const o=OE(t);let l=0;const c=[];let f=o.specialPoints[0];for(let y=1,_=o.specialPoints.length;y<_;++y){const x=o.specialPoints[y],S=bQe(t,e,f,x);if(c.length===0)c.push(S);else if(S.t===S.tmin)K(c.at(-1).d<=S.d),c.at(-1).tmax=S.tmax;else if(c.at(-1).t===c.at(-1).tmax){K(c.at(-1).d>=S.d);const P=c.at(-1).tmin;c[c.length-1]=S,c.at(-1).tmin=P}else c.push(S);f=x}for(const y of c)if(y.d<=s){const _=y.t;i&&(i[l]=_),l++}return l}function t1e(t,e,i){const s=Ge(Y,3);t.queryControlPoints(s);const n=[0,0,0];t.queryWeights(n),LE(s,n,e,i)}function LE(t,e,i,s){if(i.equalsRange(0,1))return void s.setFromPoints(t,3);const n=Ge(Y,3),r=[0,0,0];_v(t,e,i.vmin,i.vmax,n,r),s.setFromPoints(n,3)}function n7(t){const e=Js(t[0].y,t[1].y),i=Js(t[1].y,t[2].y);if(e>=0&&i>=0||e<=0&&i<=0){const s=Js(t[0].x,t[1].x),n=Js(t[1].x,t[2].x);if(s>=0&&n>=0||s<=0&&n<=0)return!0}return!1}function mz(t){const e=Ge(Y,3);t.queryControlPoints(e);const i=G2(e);return i&&(t.m_cp.setCoordsPoint2D(e[1]),t.afterCompletedModification()),i}function G2(t){let e=!1;for(let i=0;i<2;i++){const s=Js(t[0][i],t[2][i]);s>0?(Js(t[0][i],t[1][i])<0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[2][i])<0&&(t[1][i]=t[2][i],e=!0)):s<0?(Js(t[0][i],t[1][i])>0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[2][i])>0&&(t[1][i]=t[2][i],e=!0)):t[1][i]!==t[0][i]&&(t[1][i]=t[0][i],e=!0)}return e}function LQe(t,e,i){i===void 0&&(i=e,e=0);const s=new Y;if(e<0||i>1)return s.setNAN(),s;if(e>i&&Je("calculate_sub_weighted_centroid"),e===i||t.isDegenerate(0))return s.setCoords(0,0),s;const n=OE(t),r=Qge(t),o=r/t.calculateUpperLength2D();let l=e,c=0;for(let f=1,y=n.specialPointsCount();f<y;f++)if(e<n.specialPoints[f]){c=f-1;break}s.setCoords(0,0);for(let f=c+1,y=n.specialPointsCount();f<y;f++){const _=Math.min(n.specialPoints[f],i),x=xQe(t,l,_,o,r);if(s.addThis(x),l=_,i<=n.specialPoints[f])break}return s.add(t.getStartXY().mul(t.calculateLength2D()))}function Hte(t,e,i,s,n,r,o){K(i>=0&&i<=1&&s!==r&&n!==o),K(e[0]>0&&e[2]>0&&e[1]>=0);const l=[1,od(e),1],c=zE(e,i),f=C6(t,3),y=Ge(ii,3);i1e(f,l,y);const _=Ge(ii,3),x=Ge(ii,3);vz(y,c,s?_:null,r?x:null),_z(e,i,n,o);const S=n7(f);if(s){for(let P=0;P<3;++P)gz(_[P],s[P]);bz(f,s),S&&G2(s)}if(r){for(let P=0;P<3;++P)gz(x[P],r[P]);bz(f,r),S&&G2(r)}}function _v(t,e,i,s,n,r){if(K(i>=0&&s<=1&&i<=s),i===s){const y=new Y,_=s1e(t,e,i,y);return Sj(t,y),n[0].assign(y),n[1].assign(y),n[2].assign(y),r[0]=_,r[1]=_,void(r[2]=_)}if(i===0&&s===1)return n[0].assign(t[0]),n[1].assign(t[1]),n[2].assign(t[2]),r[0]=e[0],r[1]=e[1],void(r[2]=e[2]);const o=Ge(ii,3);{const y=[1,od(e),1],_=zE(e,i),x=zE(e,s);i1e(t,y,o),vz(o,x,o,null),vz(o,_>=x?1:_/x,null,o)}const l=[0,0,0];_z(e,s,l,null),_z(l,i/s,null,l);const c=n7(t),f=Ge(Y,3);gz(o[1],f[1]),Xn(t,e,i,f[0]),Xn(t,e,s,f[2]),bz(t,f);for(let y=0;y<3;++y)n[y].assign(f[y]),r[y]=l[y];c&&G2(n)}function FQe(t,e,i,s){if(e.isEqual(t.m_XStart,t.m_YStart)&&i.isEqual(t.m_XEnd,t.m_YEnd))return;const n=!!s&&t.isMonotoneQuickAndDirty(),r=new _i,o=Ge(Y,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const l=new Y;l.setSub(o[2],o[0]),l.leftPerpendicularThis(),o[1].setAdd(o[0],l);const c=Ge(Y,3);c[0].setCoordsPoint2D(e),c[2].setCoordsPoint2D(i),l.setSub(c[2],c[0]),l.leftPerpendicularThis(),c[1].setAdd(c[0],l),r.setFromTwoTriangles(o,c)?r.transformInPlace(t.m_cp):ar(e,i,.5,t.m_cp),t.changeEndPoints2D(e,i),n&&mz(t)}function Ute(t,e,i,s,n){if(n){if(pm(e,i)!==0)return t?4:2}else if(Yg(e,i))return 1;return j2(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function Yte(t,e,i,s,n){return K(0),0}function zQe(t,e){const i=t.getEndXY().sub(t.getStartXY()),s=i.length(),n=t.getControlPoint1();return n.subThis(t.getStartXY()),!(Math.abs(n.crossProduct(i))/s>e)}function qQe(t,e,i,s,n){if(n){const r=pm(e,i);if(r!==0){if(t){if(r===1){if(e.m_weights[0]===i.m_weights[0]&&e.m_weights[1]===i.m_weights[1]&&e.m_weights[2]===i.m_weights[2])return 2}else if(e.m_weights[0]===i.m_weights[2]&&e.m_weights[1]===i.m_weights[1]&&e.m_weights[2]===i.m_weights[0])return 2;return 4}return 2}}else if(Yg(e,i))return 1;return FE(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function Xte(t,e,i,s,n){return K(0),0}function j2(t,e,i,s,n,r,o,l,c,f){if(n!==null&&(n.length=0),r!==null&&(r.length=0),s!==null&&(s.length=0),i.isDegenerate(0)){const ct=[0,0],Ct=e.intersectPoint(i.getStartXY(),ct,o);if(Ct>0){if(n!==null)for(let qt=0;qt<Ct;qt++)n.push(ct[qt]);if(r!=null)for(let qt=0;qt<Ct;qt++)r.push(0);if(s!=null)for(let qt=0;qt<Ct;qt++){const Lt=new Y;e.queryCoord2D(ct[qt],Lt),s.push(Lt)}}return Ct}const y=Al(e,i);if(o=Math.max(o,y),e.isDegenerateToLineHelper(y)){const ct=new si({start:e.getStartXY(),end:e.getEndXY()}),Ct=i7(ct,i,s,n,r,o,l,f);if(n)for(let qt=0;qt<Ct;++qt){const Lt=ct.getCoord2D(n[qt]);n[qt]=e.getClosestCoordinate(Lt,!1)}return Ct}if(Hu(e,i,o))return 0;const _=Ge(Y,3);e.queryControlPoints(_);const x=[0,0,0];e.queryWeights(x);const S=[1,od(x),1],P=i.getEndXY().sub(i.getStartXY()),A=P.clone();A.leftPerpendicularThis();const k=_[0].clone(),$=_[1].clone(),F=_[2].clone(),G=$.sub(k),V=F.sub(k),B=F.sub($),W=S[0],J=S[1],re=S[2],se=W*J,oe=W*re,pe=J*re,ue=G.dotProduct(A)*se,ce=V.dotProduct(A)*oe;let ne=ue,de=ce-2*ue,Se=B.dotProduct(A)*pe+ce-ce;const Pe=new Array(13),Re=new Array(13);let Oe=vv(Se,de,ne,Ze.unit(),!1,Pe);Oe<0&&(Pe[0]=0,Pe[1]=1,Oe=2);let we=0;for(let ct=0,Ct=we;ct<Oe;++ct){const qt=new Y;Xn(_,S,Pe[ct+Ct],qt),Re[we]=i.getClosestCoordinate(qt,!1),Y.distance(qt,i.getCoord2D(Re[we]))<=o&&(Pe[we]=Pe[ct+Ct],we++)}const Fe=Ge(Y,3),it=Ge(Y,3);if(e.queryControlPoints(it),it[0].subThis(i.getStartXY()),it[1].subThis(i.getStartXY()),it[2].subThis(i.getStartXY()),VQe(it,S,Fe,!1),Math.abs(P.x)>=Math.abs(P.y)){const ct=P.y/P.x;Se=Fe[2].y-Fe[2].x*ct,de=Fe[1].y-Fe[1].x*ct,ne=Fe[0].y-Fe[0].x*ct}else{const ct=P.x/P.y;Se=Fe[2].x-Fe[2].y*ct,de=Fe[1].x-Fe[1].y*ct,ne=Fe[0].x-Fe[0].y*ct}const vt=e.getEndXY().equals(i.getStartXY())||e.getEndXY().equals(i.getEndXY()),ot=[0,0];Oe=vv(Se,de,ne,Ze.unit(),vt,ot);for(let ct=0,Ct=we;ct<Oe;++ct){Pe[ct+Ct]=ot[ct];const qt=new Y;Xn(_,S,Pe[ct+Ct],qt),Re[we]=i.getClosestCoordinate(qt,!1),Y.distance(qt,i.getCoord2D(Re[we]))<=o&&(Pe[we]=Pe[ct+Ct],we++)}K(we<Pe.length+4);for(let ct=0;ct<we;ct++)Pe[ct]=B2(x,Pe[ct]);Oe=e.intersectPoint(i.getStartXY(),ot,o);for(let ct=0;ct<Oe;ct++)Pe[we]=ot[ct],Re[we++]=0;Oe=e.intersectPoint(i.getEndXY(),ot,o);for(let ct=0;ct<Oe;ct++)Pe[we]=ot[ct],Re[we++]=1;Oe=i.intersectPoint(e.getStartXY(),ot,o);for(let ct=0;ct<Oe;ct++)Re[we]=ot[ct],Pe[we++]=0;Oe=i.intersectPoint(e.getEndXY(),ot,o);for(let ct=0;ct<Oe;ct++)Re[we]=ot[ct],Pe[we++]=1;return we===0?0:Uu(t,e,i,Pe,Re,we,s,n,r,o,l,c,f)}function Wte(t,e,i,s,n,r,o,l,c,f){return K(0),0}function FE(t,e,i,s,n,r,o,l,c,f){const y=Ge(Y,3);e.queryControlPoints(y);const _=Ge(Y,3);if(i.queryControlPoints(_),_j(y,_,3)<0)return FE(t,i,e,s,r,n,o,l,c,!f);const x=Al(e,i);if(e.isDegenerateToLineHelper(x)){const W=new si({start:e.getStartXY(),end:e.getEndXY()}),J=j2(t,i,W,s,r,n,o,l,c,!f);if(n)for(let re=0;re<J;++re){const se=W.getCoord2D(n[re]);n[re]=e.getClosestCoordinate(se,!1)}return J}if(i.isDegenerateToLineHelper(x)){const W=new si({start:i.getStartXY(),end:i.getEndXY()}),J=j2(t,e,W,s,n,r,o,l,c,f);if(r)for(let re=0;re<J;++re){const se=W.getCoord2D(r[re]);r[re]=i.getClosestCoordinate(se,!1)}return J}if(Hu(e,i,o=Math.max(o,x)))return 0;const S=new Array(3);e.queryWeights(S);const P=new Array(3);i.queryWeights(P);const A=[1,od(S),1],k=[1,od(P),1],$=new Ze(0,1),F=new Ze(0,1);{const W=Gr.constructEmpty();LE(y,A,new Ze(0,1),W);const J=Gr.constructEmpty();LE(_,k,new Ze(0,1),J);const re=Math.max(W.maxDim(),J.maxDim());if(W.inflate(3*o),J.inflate(3*o),!W.intersectW(J))return 0;if(W.maxDim()<.1*re){if(yz(y,A,W,$),yz(_,k,W,F),$.isEmpty()||F.isEmpty())return 0;_v(y,A,$.vmin,$.vmax,y,A),_v(_,k,F.vmin,F.vmax,_,k)}}const G=Dx(y,2,_,2,o);if(G===0)return 0;const V=[],B=[];if(G===-1){const W=Ge(_t,3),J=Ge(_t,3),re=Ge(_t,3);R6(y,A,W,J,re);const se=Ge(_t,3),oe=Ge(_t,3),pe=Ge(_t,3);R6(_,k,se,oe,pe);const ue=[],ce=[],ne=Mx(W,2,J,2,re,2,se,2,oe,2,pe,2,!0,Ze.unit(),Ze.unit(),ue,ce);if(ne>0)for(let de=0;de<ne;de++){const Se=new Y;Xn(_,k,ce[de],Se);const Pe=new Y;Xn(y,A,ue[de],Pe),Y.distance(Pe,Se)<=o&&(V.push(ue[de]),B.push(ce[de]))}}for(let W=0;W<2;W++){let J,re,se;W===0?(J=y,re=_,se=k):(J=_,re=y,se=A);for(let oe=0;oe<2;oe++){const pe=oe===0?0:J.length-1,ue=new Y,ce=[0],ne=wj(re,se,J[pe],Ze.unit(),!1,-1,1,ce);K(ne===1),Xn(re,se,ce[0],ue),Y.distance(J[pe],ue)<=o&&(W===0?(V.push(pe===0?0:1),B.push(ce[0])):(B.push(pe===0?0:1),V.push(ce[0])))}}if(V.length===0)return 0;if(!$.equalsRange(0,1))for(let W=0;W<V.length;++W)V[W]=ba.recalculateParentT($.vmin,$.vmax,V[W]);if(!F.equalsRange(0,1))for(let W=0;W<B.length;++W)B[W]=ba.recalculateParentT(F.vmin,F.vmax,B[W]);for(let W=0;W<V.length;++W)V[W]=B2(S,V[W]);for(let W=0;W<B.length;++W)B[W]=B2(P,B[W]);return Uu(t,e,i,V,B,V.length,s,n,r,o,l,c,f)}function Zte(t,e,i,s,n,r,o,l,c,f){if(e.isLine())return O6(t,i,new si({start:e.getStartXY(),end:e.getEndXY()}),s,r,n,o,l,c,!f);if(i.isLine())return j2(t,e,new si({start:i.getStartXY(),end:i.getEndXY()}),s,n,r,o,l,c,f);const y=Al(e,i);if(Hu(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,3);e.queryControlPoints(_);const x=Ge(Y,3);i.queryControlPoints(x);const S=Dx(_,2,x,2,o);if(S===0)return 0;const P=[],A=[];if(S===-1){const k=Ge(_t,3),$=Ge(_t,3),F=Ge(_t,3),G=[0,0,0];e.queryWeights(G),R6(_,G,k,$,F);const V=Ge(ys,3);V2(x,V);const B=Mx(k,2,$,2,F,2,[V[0].x,V[1].x,V[2].x],2,[V[0].y,V[1].y,V[2].y],2,null,0,!0,Ze.unit(),Ze.unit(),P,A);if(B>0){let W=0;for(let J=0;J<B;J++){const re=new Y;i.queryCoord2D(A[J],re);const se=new Y;e.queryCoord2D(P[J],se),Y.distance(se,re)<=o&&(P[W]=P[J],A[W]=A[J],W++)}P.length=W,A.length=W}}for(let k=0;k<2;k++){let $;$=k===0?_:x;for(let F=0;F<2;F++){const G=F===0?0:$.length-1;let V;const B=new Y;k===0?(V=$6(i,$[G],Ze.unit(),!1),i.queryCoord2D(V,B)):(V=pz(e,$[G],Ze.unit(),!1,-1),e.queryCoord2D(V,B)),Y.distance($[G],B)<=o&&(k===0?(P.push(G===0?0:1),A.push(V)):(A.push(G===0?0:1),P.push(V)))}}return Uu(t,e,i,P,A,P.length,s,n,r,o,l,c,f)}function VQe(t,e,i,s=!1){const n=Ge(Y,3);s?(n[0].setCoordsPoint2D(t[0]),n[1].setCoordsPoint2D(t[1]),n[1].subThis(n[0]),n[2].setCoordsPoint2D(t[2]),n[2].subThis(n[0]),n[0].setCoords(0,0)):(n[0].setCoordsPoint2D(t[0]),n[1].setCoordsPoint2D(t[1]),n[2].setCoordsPoint2D(t[2])),n[0].mulThis(e[0]),n[1].mulThis(e[1]),n[2].mulThis(e[2]),i[1].setCoords(n[1].x-n[0].x,n[1].y-n[0].y),i[2].setCoordsPoint2D(n[2].sub(n[1])),i[2].subThis(i[1]),i[1].x*=2,i[1].y*=2,i[0].setCoordsPoint2D(n[0])}function R6(t,e,i,s,n){const r=_t.constructDouble(e[0]),o=_t.constructDouble(e[1]),l=_t.constructDouble(e[2]);i[0].setDouble(t[0].x),i[0].mulThis(r),i[1].setDouble(t[1].x),i[1].mulThis(o),i[2].setDouble(t[2].x),i[2].mulThis(l),i[2].subThis(i[1]),i[1].subThis(i[0]),i[2].subThis(i[1]),i[1].ldexpThis(1),s[0].setDouble(t[0].y),s[0].mulThis(r),s[1].setDouble(t[1].y),s[1].mulThis(o),s[2].setDouble(t[2].y),s[2].mulThis(l),s[2].subThis(s[1]),s[1].subThis(s[0]),s[2].subThis(s[1]),s[1].ldexpThis(1),n[0].setDouble(e[0]),n[1].setDouble(e[1]),n[2].setThis(n[1]),n[2].ldexpThis(1),n[2].negateThis(),n[2].addThis(n[0]),n[2].addDoubleThis(e[2]),n[1].subThis(n[0]),n[1].ldexpThis(1)}function i1e(t,e,i){for(let s=0;s<3;++s)i[s].setCoordsPoint2DZ(t[s].mul(e[s]),e[s])}function s1e(t,e,i,s){if(i===0)return s.assign(t[0]),e[0];if(i===1)return s.assign(t[2]),e[2];const n=[t[0].x*e[0],t[1].x*e[1],t[2].x*e[2]],r=[t[0].y*e[0],t[1].y*e[1],t[2].y*e[2]],o=[e[0],e[1],e[2]],l=i;let c,f,y;if(i<=.5){const _=yo(n[0],n[1],l),x=yo(n[1],n[2],l);c=ji(_,x,l);const S=yo(r[0],r[1],l),P=yo(r[1],r[2],l);f=ji(S,P,l);const A=yo(o[0],o[1],l),k=yo(o[1],o[2],l);y=yo(A,k,l)}else{const _=Lr(n[0],n[1],l),x=Lr(n[1],n[2],l);c=Lr(_,x,l);const S=Lr(r[0],r[1],l),P=Lr(r[1],r[2],l);f=Lr(S,P,l);const A=Lr(o[0],o[1],l),k=Lr(o[1],o[2],l);y=Lr(A,k,l)}return c/=y,f/=y,s.setCoords(c,f),Sj(t,s),y}function GQe(t,e,i){const s=Ge(Y,3);t.queryControlPoints(s);const n=[0,0,0];t.queryWeights(n),jQe([Bt.constructPoint2D(s[0]),Bt.constructPoint2D(s[1]),Bt.constructPoint2D(s[2])],[new Be(n[0]),new Be(n[1]),new Be(n[2])],e,i)}function jQe(t,e,i,s){if(i.value()===0)return void s.setE(t[0]);if(i.value()===1)return void s.setE(t[2]);const n=[t[0].x.mulE(e[0]),t[1].x.mulE(e[1]),t[2].x.mulE(e[2])],r=[t[0].y.mulE(e[0]),t[1].y.mulE(e[1]),t[2].y.mulE(e[2])],o=[e[0].clone(),e[1].clone(),e[2].clone()],l=new Be,c=new Be,f=new Be;if(i.value()<=.5){const _=wc(n[0],n[1],i),x=wc(n[1],n[2],i);l.setE(wc(_,x,i));const S=wc(r[0],r[1],i),P=wc(r[1],r[2],i);c.setE(wc(S,P,i));const A=wc(o[0],o[1],i),k=wc(o[1],o[2],i);f.setE(wc(A,k,i))}else{const _=Sc(n[0],n[1],i),x=Sc(n[1],n[2],i);l.setE(Sc(_,x,i));const S=Sc(r[0],r[1],i),P=Sc(r[1],r[2],i);c.setE(Sc(S,P,i));const A=Sc(o[0],o[1],i),k=Sc(o[1],o[2],i);f.setE(Sc(A,k,i))}l.divThisE(f),c.divThisE(f);const y=new Y(l.value(),c.value());Sj([t[0].value(),t[1].value(),t[2].value()],y),s.x.set(y.x,l.eps()),s.y.set(y.y,c.eps())}function gz(t,e){return e.setCoords(t.x/t.z,t.y/t.z),t.z}function Xn(t,e,i,s,n){if(n){if(i<0)return void ml(new si({start:t[0],end:t[0].add(fz(t,e,0).getUnitVector())}),i,s);if(i>1)return void ml(new si({start:t[2],end:t[2].add(fz(t,e,1).getUnitVector())}),i-1,s)}s1e(t,e,i,s)}function yz(t,e,i,s){s.setEmpty();const n=[];n.push(new Ze(0,1));const r=.5*Math.max(i.width(),i.height());for(;n.length;){const o=n.at(-1);n.pop();const l=new Gr;if(LE(t,e,o,l),l.isIntersectingW(i)){const c=Math.max(l.width(),l.height());if(i.containsW(l)||c<=r||o.width()<1e-12)s.merge(o);else{const f=o.getCenter();n.push(Ze.construct(o.vmin,f)),n.push(Ze.construct(f,o.vmax))}}}}function od(t){return t[1]/Math.sqrt(t[0]*t[2])}function B2(t,e){const i=Math.sqrt(t[2]/t[0]);return e/ji(i,1,e)}function zE(t,e){const i=Math.sqrt(t[0]/t[2]);return e/ji(i,1,e)}function BQe(t,e){const i=Ge(Y,3);t.queryControlPoints(i);const s=[0,0,0];t.queryWeights(s),e.setControlPointsAndWeights(i,s)}function vz(t,e,i,s){K(e>=0&&e<=1),new ii().setCoordsPoint3D(t[0]),new ii().setCoordsPoint3D(t[1]),new ii().setCoordsPoint3D(t[2]);const n=new ii,r=new ii,o=new ii;BS(3,t[0],t[1],e,n),BS(3,t[1],t[2],e,r),BS(3,n,r,e,o);const l=t[2].clone();i&&(i[0].assign(t[0]),i[1].assign(n),i[2].assign(o)),s&&(s[0].assign(o),s[1].assign(r),s[2].assign(l))}function _z(t,e,i,s){const n=[t[0],t[1],t[2]];K(e>=0&&e<=1&&i!==s);const r=ji(n[0],n[1],e),o=ji(n[1],n[2],e),l=ji(r,o,e);i&&(i[0]=n[0],i[1]=r,i[2]=l),s&&(s[0]=l,s[1]=o,s[2]=n[2])}function Sj(t,e){const i=Ze.constructEmpty();i.vmin=i.vmax=t[0].x,i.mergeNeCoordinate(t[1].x),i.mergeNeCoordinate(t[2].x),e.x=cn(e.x,i.vmin,i.vmax),i.vmin=i.vmax=t[0].y,i.mergeNeCoordinate(t[1].y),i.mergeNeCoordinate(t[2].y),e.y=cn(e.y,i.vmin,i.vmax)}function bz(t,e){const i=new Ze;i.vmin=i.vmax=t[0].x,i.mergeNeCoordinate(t[1].x),i.mergeNeCoordinate(t[2].x),e[0].x=cn(e[0].x,i.vmin,i.vmax),e[1].x=cn(e[1].x,i.vmin,i.vmax),e[2].x=cn(e[2].x,i.vmin,i.vmax),i.vmin=i.vmax=t[0].y,i.mergeNeCoordinate(t[1].y),i.mergeNeCoordinate(t[2].y),e[0].y=cn(e[0].y,i.vmin,i.vmax),e[1].y=cn(e[1].y,i.vmin,i.vmax),e[2].y=cn(e[2].y,i.vmin,i.vmax)}var X4=vr;class ba extends o5{constructor(e){return e===void 0||WA(e,"vd")?(super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=new Y(0,0),void(this.m_weights=[1,0,1])):(e.fromPoint&&e.weight?e={fromPoint:e.fromPoint,controlPoint1:e.controlPoint1,toPoint:e.toPoint,weight0:1,weight1:e.weight,weight2:1}:e.points&&e.weight?e={fromPoint:e.points[0],controlPoint1:e.points[1],toPoint:e.points[2],weight0:1,weight1:e.weight,weight2:1}:e.points&&e.weights&&(e={fromPoint:e.points[0],controlPoint1:e.points[1],toPoint:e.points[2],weight0:e.weights[0],weight1:e.weights[1],weight2:e.weights[2]}),e.fromPoint&&e.weight0?(super({start:e.fromPoint,end:e.toPoint}),(e.weight0<=0||e.weight1<0||e.weight2<=0)&&Je("weights"),this.m_cp=e.controlPoint1.clone(),void(this.m_weights=[e.weight0,e.weight1,e.weight2])):e.copy?(super(e),this.m_cp=e.copy.m_cp.clone(),void(this.m_weights=e.copy.m_weights.slice())):e.move?(super(e),this.m_cp=e.move.m_cp.clone(),void(this.m_weights=e.move.m_weights.slice())):void K(0))}getBoundary(){return Xh(this)}assignMove(e){return this}assignCopy(e){return e.copyTo(this),this}construct(e,i,s,n){this.dropAllAttributes(),this.setCpsAndWeights(e,i,s,1,n,1),U4(this)}constructWeights(e,i,s,n,r,o){}constructArray(e,i){this.construct(e[0],e[1],e[2],i)}constructArrayWeights(e,i){this.dropAllAttributes(),this.setCpsAndWeightsArray(e,i),U4(this)}convertToStandardForm(){}getStandardFormWeight(){return this.m_weights[1]/Math.sqrt(this.m_weights[0]*this.m_weights[2])}getGeometryType(){return me.enumRationalBezier2}queryEnvelope(e){if(e instanceof xe){if(e.setCoords(this.getStartXY()),e.mergeNe(this.getEndXY()),e.contains(this.m_cp))return;const i=Bte(this);if(i!==null){const s=new Y;for(const n of i.specialPoints)this.queryCoord2D(n,s),e.mergeNe(s)}else{const s=[],n=Ge(Y,3);this.queryControlPoints(n),Jge(n,this.m_weights,s);const r=new Y;for(const o of s)this.queryCoord2D(o,r),e.mergeNe(r)}}}applyTransformation(e){if(e instanceof _i){const i=Ge(Y,3);return this.queryControlPoints(i),e.transformPoints2D(i,3,i),this.setStartXY(i[0]),this.m_cp.assign(i[1]),this.setEndXY(i[2]),void this.afterCompletedModification()}}createInstance(){return new ba({vd:this.m_description})}calculateLength2D(){return RE(this,1,!1)}calculateLowerLength2D(){return Y.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return this.calculateUpperLength2D_()}calculateUpperLength2D_(){return this.m_weights[1]>0?Y.distance(this.getStartXY(),this.m_cp)+Y.distance(this.getEndXY(),this.m_cp):Y.distance(this.getStartXY(),this.getEndXY())}queryCoord2D(e,i){return this.queryCoord2DExtension(e,i,!0)}queryCoord2DE(e,i){GQe(this,e,i)}queryCoord2DExtension(e,i,s){if(s){if(e<0)return void ml(new si({start:this.getStartXY(),end:this.getStartXY().add(this.getTangent(0).getUnitVector())}),e,i);if(e>1)return void ml(new si({start:this.getEndXY(),end:this.getEndXY().add(this.getTangent(1).getUnitVector())}),e-1,i)}const n=Ge(Y,3);this.queryControlPoints(n),Xn(n,this.m_weights,e,i)}getCoordX(e){const i=new Y;return this.queryCoord2DExtension(e,i,!0),i.x}getCoordY(e){const i=new Y;return this.queryCoord2DExtension(e,i,!0),i.y}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createQuadraticRationalBezier();if(this.cutBezierIgnoreAttributes(e,i,r),n)return;r.assignVertexDescription(this.m_description);const o=this.m_description.getAttributeCount();if(o>1){for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=X4.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(e,c,y);r.setStartAttribute(c,y,_)}}for(let l=1;l<o;l++){const c=this.m_description.getSemantics(l),f=X4.getComponentCount(c);for(let y=0;y<f;y++){const _=this.getAttributeAsDbl(i,c,y);r.setEndAttribute(c,y,_)}}}}queryDerivative(e,i){PQe(this,e,i)}cutBezierIgnoreAttributes(e,i,s){(e<0||i>1||e>i)&&Je("Quadratic_rational_bezier.cut_bezier_ignore_attributes");const n=Ge(Y,3);this.queryControlPoints(n);const r=[0,0,0];_v(n,this.m_weights,e,i,n,r),s.setControlPointsAndWeights(n,r)}splitBezierIgnoreAttributes(e,i,s){}getAttributeAsDbl(e,i,s){if(i===0)return s===0?this.getCoordX(e):this.getCoordY(e);const n=this.calculateLength2D(),r=n>0?this.tToLength(e)/n:0,o=X4.getInterpolation(i),l=this.getStartAttributeAsDbl(i,s),c=this.getEndAttributeAsDbl(i,s);return YA(o,l,c,r,X4.getDefaultValue(i))}getClosestCoordinate(e,i){return pz(this,e,Ze.unit(),i,-1)}getClosestCoordinateOnInterval(e,i,s=-1){return pz(this,e,i,!1,s)}getYMonotonicParts(e,i){return 0}getMonotonicParts(e,i){e.length<2&&Je("");const s=OE(this);let n=0;if(s.specialPointsCount()===2)return 0;K(e.length>=s.specialPointsCount()-1);for(let r=1,o=s.specialPointsCount();r<o;++r)this.queryCut(s.specialPoints[r-1],s.specialPoints[r],e[n],i),n++;for(let r=0;r<n;++r)mz(e[r].get());return n}intersectionWithAxis2D(e,i,s,n){s&&(s.length=9),n&&(n.length=9);const r=new Array(3),o=Ge(Be,2),l=new Ze(0,1);let c=0;const f=Ge(Y,3);if(this.queryControlPoints(f),e){if(r[0]=new Be(f[0].y).sub(i).mul(this.m_weights[0]),r[1]=new Be(f[1].y).sub(i).mul(this.m_weights[1]),r[2]=r[0].subE(r[1].mul(2)).addE(new Be(f[2].y).sub(i).mul(this.m_weights[2])),r[1]=r[1].subE(r[0]).mulThisByPower2(2),c=Sl(r[2],r[1],r[0],l,!1,o),s)for(let y=0;y<c;y++)s[y]=this.getCoordX(o[y].value())}else if(r[0]=new Be(f[0].x).sub(i).mul(this.m_weights[0]),r[1]=new Be(f[1].x).sub(i).mul(this.m_weights[1]),r[2]=r[0].subE(r[1].mul(2)).addE(new Be(f[2].x).sub(i).mul(this.m_weights[2])),r[1]=r[1].subE(r[0]).mulThisByPower2(2),c=Sl(r[2],r[1],r[0],l,!1,o),s)for(let y=0;y<c;y++)s[y]=this.getCoordY(o[y].value());if(n)for(let y=0;y<c;y++)n[y]=o[y].value();else s&&sd(s,0,c,_f);return c}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const s=[Number.NaN,Number.NaN],n=this.intersectionWithAxis2D(!0,e,s,null);return K(n!==2),n===-1?i:s[0]}isCurve(){return!0}isDegenerate(e){return t7(this,e)}isDegenerate3D(e,i){return!1}queryLooseEnvelope(e){if(e instanceof xe)return e.setCoords({pt:this.getStartXY()}),e.mergeNe(this.m_cp),void e.mergeNe(this.getEndXY())}clone(e){const i=this.createInstance();return this.copyTo(i),i}queryInterval(e,i){if(e===0){const s=xe.constructEmpty();this.queryEnvelope(s);const n=Ze.constructEmpty();return i===0?s.queryIntervalX(n):s.queryIntervalY(n),n}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const s=Ge(Y,3);this.queryControlPoints(s);const n=[0,0,0];_v(s,this.m_weights,e.vmin,e.vmax,s,n),i.setFromPoints(s,3)}changeEndPoints2D(e,i){if(e.isEqual(this.m_XStart,this.m_YStart)&&i.isEqual(this.m_XEnd,this.m_YEnd))return;const s=this.m_cp.isEqual(this.m_XStart,this.m_YStart),n=this.m_cp.isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(e),this.setEndXY(i),s?this.m_cp.setCoordsPoint2D(e):n&&this.m_cp.setCoordsPoint2D(i),this.normalizeAfterEndpointChange()}tToLength(e){return RE(this,e,!0)}lengthToT(e){return MQe(this,e)}calculateWeightedAreaCentroid2D(e){const i=kQe(this),s=jte(this);return i.x+=(this.getStartX()-e.x)*s,i.y+=(this.getStartY()-e.y)*s,i}calculateWeightedCentroid2D(){const e=new Y;return this.isDegenerate(0)?(e.setCoords(0,0),e):$Qe(this)?(e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e):(e.assign(LQe(this,1)),e)}getControlPoint1(){return this.m_cp.clone()}setControlPoint1(e){this.m_cp.setCoordsPoint2D(e),this.afterCompletedModification()}queryWeights(e){for(let i=0;i<3;++i)e[i]=this.m_weights[i]}setWeights(e){}queryControlPoints(e){e[0].assign(this.getStartXY()),e[1].assign(this.m_cp),e[2].assign(this.getEndXY())}setControlPointsAndWeights(e,i){this.setCpsAndWeightsArray(e,i),this.afterCompletedModification()}getTangent(e){const i=Ge(Y,3);return this.queryControlPoints(i),fz(i,this.m_weights,e)}getDerivative(e){return Y.getNAN()}getCurvature(e){return 0}isIntersecting(e,i,s){return!1}isIntersectingPoint(e,i,s){return!1}isIntersectingPoint3D(e,i,s,n,r=1){return!1}queryAttributeAsDbl(e,i,s,n){}isMonotoneQuickAndDirty(){const e=Ge(Y,3);return this.queryControlPoints(e),n7(e)}getMonotonicPartParams(e,i){const s=OE(this),n=s.specialPointsCount();if(!i)return s.specialPointsCount();e<n&&Je("");for(let r=0;r<n;r++)i[r]=s.specialPoints[r];return n}normalizeAfterEndpointChange(){return!1}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){this.m_XEnd=St(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=St(this.m_YStart,this.m_YStart=this.m_YEnd),this.m_weights[2]=St(this.m_weights[0],this.m_weights[0]=this.m_weights[2]);for(let e=0,i=this.m_description.getTotalComponentCount()-2;e<i;e++)this.m_attributes[e+i]=St(this.m_attributes[e],this.m_attributes[e]=this.m_attributes[e+i]);this.m_cachedValues=null}}isLine(){return!1}isDegenerateToLineHelper(e){const i=[e];return!!gj(this,i)&&zQe(this,i[0])}copyIgnoreAttributes(e){BQe(this,e)}calculateArea2DHelper(){return jte(this)}absNorm(){return this.getStartXY().norm(1)+this.getEndXY().norm(1)+this.m_cp.norm(1)}absNormXYZ(e){return K(0),0}queryEnvelopeW(e,i){t1e(this,e,i)}setSegmentFromCoords(e,i){}writeInBufferStream(e,i){const s=new Float64Array(5);return s[0]=this.m_cp.x,s[1]=this.m_cp.y,s[2]=this.m_weights[0],s[3]=this.m_weights[1],s[4]=this.m_weights[2],e.writeRangeFromArray(i,s.length,s,!0,1),i+s.length}readFromBufferStream(e,i){const s=new Float64Array(5);e.queryRange(i,s.length,s,!0,1),this.m_cp.x=s[0],this.m_cp.y=s[1],this.m_weights[0]=s[2],this.m_weights[1]=s[3],this.m_weights[2]=s[4],this.m_cachedValues=null}snapControlPoints(e){const i=Ge(Y,3);this.queryControlPoints(i);const s=Y.sqrDistance(i[1],i[0]),n=Y.sqrDistance(i[1],i[2]);let r=i[0].clone(),o=s;s>n&&(r=i[2].clone(),o=n);let l=!1;return o<=e&&o!==0&&(l=!0,this.setControlPoint1(r)),l}needsSnapControlPoints(e){if(!e)return!1;const i=Ge(Y,3);this.queryControlPoints(i);const s=Y.sqrDistance(i[1],i[0]),n=Y.sqrDistance(i[1],i[2]);i[0].clone();let r=s;return s>n&&(i[2].clone(),r=n),r<=e&&r!==0}calculateSpecialPointsForCracking(e,i){return 0}ensureXYMonotone(){return mz(this)}setCoordsForIntersector(e,i,s){FQe(this,e,i,s)}copyToImpl(e){const i=e;i.m_cp.setCoordsPoint2D(this.m_cp),i.m_weights[0]=this.m_weights[0],i.m_weights[1]=this.m_weights[1],i.m_weights[2]=this.m_weights[2],e1e(i,Bte(this))}reverseImpl(){this.m_weights[2]=St(this.m_weights[0],this.m_weights[0]=this.m_weights[2])}equalsImpl(e){const i=e;if(!this.m_cp.equals(i.m_cp))return!1;for(let s=0;s<3;s++)if(this.m_weights[s]!==i.m_weights[s])return!1;return!0}equalsImplTol(e,i){const s=e;if(!this.m_cp.isEqualPoint2D(s.m_cp,i))return!1;const n=Ge(Y,3);this.queryControlPoints(n);const r=Ge(Y,3);s.queryControlPoints(r);const o=[s.m_weights[0],s.m_weights[1],s.m_weights[2]];for(let l=0;l<3;l++){const c=new ii;c.setCoordsPoint2DZ(n[l].mul(this.m_weights[l]),this.m_weights[l]);const f=new ii;if(f.setCoordsPoint2DZ(r[l].mul(o[l]),o[l]),!c.isEqual(f,i))return!1}return!0}getHashCodeImpl(){return 0}swapImpl(e){}afterCompletedModification(){U4(this)}intersect(e,i,s,n,r){return qv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){return RQe(this,e,i,s)}intersect_(e,i,s,n){return 0}endPointModified(){U4(this)}clearEndPointModified(){}setCpsAndWeights(e,i,s,n,r,o){(n<=0||o<=0||r<0)&&Je("weights"),(e.isNAN()||i.isNAN()||s.isNAN())&&Je("NAN control points in bezier are not supported"),this.setStartXY(e),this.m_cp.assign(i),this.m_weights[0]=n,this.m_weights[1]=r,this.m_weights[2]=o,this.setEndXY(s)}setCpsAndWeightsArray(e,i){this.setCpsAndWeights(e[0],e[1],e[2],i[0],i[1],i[2])}}ba.type=me.enumRationalBezier2;class HQe{constructor(){this.length=Number.NaN,this.specialPoints=[]}specialPointsCount(){return this.specialPoints.length}}function n1e(t){return UQe(t.calculateUpperLength2D())}function UQe(t){return 256*en()*t}function YQe(t){const e=Y.distance(t.getStartXY(),t.getEndXY()),i=t.calculateUpperLength2D();return i-e<=8*Number.EPSILON*i}function r1e(t,e,i=!1){e[1].setCoords(t.m_cp[0].x-t.getStartX(),t.m_cp[0].y-t.getStartY()),e[1].mulThis(3),e[2].setCoords(t.m_cp[1].x-t.m_cp[0].x,t.m_cp[1].y-t.m_cp[0].y),e[2].mulThis(3),e[3]=t.getEndXY().sub(t.getStartXY()),e[3].subThis(e[2]),e[2].subThis(e[1]),i?e[0].setCoords(0,0):e[0]=t.getStartXY()}function o1e(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),Ej(s,e,i)}function a1e(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),Cj(s,e,i)}function Ej(t,e,i){let s=t[1].x;s-=t[0].x,s*=3;let n=t[2].x;n-=t[1].x,n*=3;let r=t[3].x;r-=t[0].x,r-=n,n-=s,e[3].setWithEps(r),e[2].setWithEps(n),e[1].setWithEps(s),i?e[0].set(0):e[0].set(t[0].x)}function Cj(t,e,i){let s=t[1].y;s-=t[0].y,s*=3;let n=t[2].y;n-=t[1].y,n*=3;let r=t[3].y;r-=t[0].y,r-=n,n-=s,e[3].setWithEps(r),e[2].setWithEps(n),e[1].setWithEps(s),i?e[0].set(0):e[0].set(t[0].y)}function H2(t,e,i=!1){const s=Ge(ys,4);s[0].assignPoint2D(t[0]),s[1].assignPoint2D(t[1]),s[2].assignPoint2D(t[2]),s[3].assignPoint2D(t[3]),e[1].setCoords(s[1].x.sub(s[0].x),s[1].y.sub(s[0].y)),e[1].mulThis(_t.constructInt32(3)),e[2].setCoords(s[2].x.sub(s[1].x),s[2].y.sub(s[1].y)),e[2].mulThis(_t.constructInt32(3)),e[3]=s[3].sub(s[0]),e[3]=e[3].sub(e[2]),e[2]=e[2].sub(e[1]),i?e[0].setCoords(Go,Go):e[0]=s[0].clone()}function qE(t,e,i){if(i){if(e<0)return e;if(e>1)return e-1+qE(t,1,!1)}if(t.isDegenerate(0))return 0;const s=e===1,n=VE(t);if(s&&!Number.isNaN(n.length)&&!Number.isNaN(n.length))return n.length;const r=n1e(t),o=r/t.calculateUpperLength2D();let l=0,c=0;for(let f=1,y=n.specialPointsCount();f<y;f++){const _=n.specialPoints[f];if(l+=yet(t,c,Math.min(e,_),o,r),e<=_)break;c=_}return s&&(n.length=l),l}function XQe(t,e,i){const s=qE(t,1,!1);if(e<=0)return e;if(e>=s)return e-s+1;const n=[0];return Xg(new get(t,e),Ze.unit(),1,n)!==1&&bt(""),n[0]}function WQe(t,e,i){i===void 0&&(i=e,e=0);const s=new Y;if(e<0||i>1)return s.setNAN(),s;if(e>i&&Je("calculate_sub_weightedCentroid"),e===i||t.isDegenerate(0))return s.setCoords(0,0),s;const n=VE(t),r=n1e(t),o=r/t.calculateUpperLength2D();let l=e,c=0;for(let f=1,y=n.specialPointsCount();f<y;f++)if(e<n.specialPoints[f]){c=f-1;break}s.setCoords(0,0);for(let f=c+1,y=n.specialPointsCount();f<y;f++){const _=Math.min(n.specialPoints[f],i),x=vet(t,l,_,o,r);if(s.addThis(x),l=_,i<=n.specialPoints[f])break}return s.add(t.getStartXY().mul(t.calculateLength2D()))}function VE(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new HQe,i=Ge(Be,8),s=Ge(Y,4);t.queryControlPoints(s);const n=f1e(s,i);e.specialPoints=[];for(let r=0;r<n;r++)e.specialPoints.push(i[r].value());return l1e(t,e),e}function Kte(t){let e=null;return e=t.m_cachedValues,e}function l1e(t,e){t.m_cachedValues=e}function SN(t){t.m_cachedValues=null}function ZQe(t,e,i,s){if(e.isEqual(t.m_XStart,t.m_YStart)&&i.isEqual(t.m_XEnd,t.m_YEnd))return;const n=!!s&&t.isMonotoneQuickAndDirty(),r=new _i,o=Ge(Y,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const l=new Y;l.setSub(o[2],o[0]),l.leftPerpendicularThis(),o[1].setAdd(o[0],l);const c=Ge(Y,3);c[0].setCoordsPoint2D(e),c[2].setCoordsPoint2D(i),l.setSub(c[2],c[0]),l.leftPerpendicularThis(),c[1].setAdd(c[0],l),r.setFromTwoTriangles(o,c)?r.transformPoints2D(t.m_cp,2,t.m_cp):(ar(e,i,1/3,t.m_cp[0]),ar(e,i,2/3,t.m_cp[1])),t.changeEndPoints2D(e,i),n&&L6(t)}function KQe(t,e,i,s,n){return{tmin:t,tmax:e,t:i,d:s,pt:n.clone()}}function JQe(t,e,i,s){const n=new Array(18),r=Ge(Y,4);t.queryControlPoints(r);const o=Xg(new d1e(r,e),Ze.construct(i,s),18,n),l=new Y;t.queryCoord2D(i,l);let c=i,f=Y.distance(l,e);const y=new Y;t.queryCoord2D(s,y);const _=Y.distance(y,e);_<f&&(f=_,c=s,l.assign(y));for(let x=0;x<o;x++){t.queryCoord2D(n[x],y);const S=Y.distance(y,e);S<f&&(f=S,c=n[x],l.assign(y))}return KQe(i,s,c,f,l)}function u1e(t,e){const i=Ge(Be,4);o1e(t,i,!0);const s=Ge(Be,4);a1e(t,s,!0);const n=i[3].clone(),r=i[2].clone(),o=i[1].clone(),l=s[3].clone(),c=s[2].clone(),f=s[1].clone(),y=r.mulE(o).addE(c.mulE(f)).mul(4),_=r.mulE(r).mul(8).addE(n.mulE(o).mul(12)).addE(c.mulE(c).mul(8).addE(l.mulE(f).mul(12))),x=n.mulE(r).addE(l.mulE(c)).mul(36),S=n.mulE(n).addE(l.mulE(l)).mul(36),P=Ge(Be,3),A=k6(S,x,_,y,new Ze(0,1),!1,P);if(K(A<=3),A>0){const k=Vy(t,1,0).sqrLength(),$=Vy(t,1,1).sqrLength();let F=k;e.set(0),F<$&&(F=$,e.set(1));for(let G=0;G<A;G++){const V=Vy(t,1,P[G].value()).sqrLength();V<F&&(F=V,e=P[G])}}}function QQe(t,e,i,s){if(e===1){const n=1-i,r=n*n,o=i*i,l=t[1].sub(t[0]),c=t[2].sub(t[1]),f=t[3].sub(t[2]),y=l.mul(r).add(c.mul(2*n*i)).add(f.mul(o));s.assign(y.mul(3))}else if(e===2){const n=1-i,r=t[2].sub(t[1]).sub(t[1].sub(t[0])),o=t[3].sub(t[2]).sub(t[2].sub(t[1])),l=r.mul(n).add(o.mul(i));s.assign(l.mul(6))}else if(e===3){const n=t[2].sub(t[1]),r=t[3].sub(n.mul(3)).sub(t[0]);s.assign(r.mul(6))}else s.setCoords(0,0)}function eet(t,e,i,s){{const n=Kp.subE(i),r=n.sqr(),o=i.sqr(),l=t[1].subE(t[0]).mulE(r).addE(t[2].subE(t[1]).mulE(new Be(2).mulE(n).mulE(i))).addE(t[3].subE(t[2]).mulE(o));s.setE(l.mulE(new Be(3)))}}function ma(t,e,i){const s=new Y;return QQe(t,e,i,s),s}function tet(t,e,i){const s=[Bt.constructPoint2D(t[0]),Bt.constructPoint2D(t[1]),Bt.constructPoint2D(t[2]),Bt.constructPoint2D(t[3])],n=new Bt;return eet(s,e,i,n),n}function Vy(t,e,i){const s=Ge(Y,4);return t.queryControlPoints(s),ma(s,e,i)}function Jte(t){const e=t.m_cp[0].sub(t.getStartXY()),i=t.m_cp[1].sub(t.m_cp[0]),s=t.getEndXY().sub(t.getStartXY());return e.mulThis(3),i.mulThis(3),s.subThis(i),i.subThis(e),(3*s.x*(2*i.y+5*e.y)-3*s.y*(2*i.x+5*e.x)+10*(i.x*e.y-i.y*e.x))/60}function L6(t){const e=Ge(Y,4);t.queryControlPoints(e);const i=r7(e);return i&&(t.m_cp[0].setCoordsPoint2D(e[1]),t.m_cp[1].setCoordsPoint2D(e[2]),t.afterCompletedModification()),i}function r7(t){let e=!1;for(let i=0;i<2;i++){const s=Js(t[0][i],t[3][i]);s>0?(Js(t[0][i],t[1][i])<0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[3][i])<0&&(t[1][i]=t[3][i],e=!0),Js(t[0][i],t[2][i])<0&&(t[2][i]=t[0][i],e=!0),Js(t[2][i],t[3][i])<0&&(t[2][i]=t[3][i],e=!0),Js(t[1][i],t[2][i])<0&&(t[2][i]=t[1][i],e=!0)):s<0?(Js(t[0][i],t[1][i])>0&&(t[1][i]=t[0][i],e=!0),Js(t[1][i],t[3][i])>0&&(t[1][i]=t[3][i],e=!0),Js(t[0][i],t[2][i])>0&&(t[2][i]=t[0][i],e=!0),Js(t[2][i],t[3][i])>0&&(t[2][i]=t[3][i],e=!0),Js(t[1][i],t[2][i])>0&&(t[2][i]=t[1][i],e=!0)):t[1][i]===t[0][i]&&t[2][i]===t[0][i]||(t[1][i]=t[0][i],t[2][i]=t[0][i],e=!0)}return e}function iet(t){const e=Js(t[0].y,t[1].y),i=Js(t[1].y,t[2].y),s=Js(t[2].y,t[3].y);if(e>=0&&i>=0&&s>=0||e<=0&&i<=0&&s<=0){const n=Js(t[0].x,t[1].x),r=Js(t[1].x,t[2].x),o=Js(t[2].x,t[3].x);if(n>=0&&r>=0&&o>=0||n<=0&&r<=0&&o<=0)return!0}return!1}function W4(t,e,i){const s=new Y,n=new Y,r=new Y,o=new Y,l=new Y;e<=.5?(Wn(2,t[0],t[1],e,s),Wn(2,t[1],t[2],e,n),Wn(2,t[2],t[3],e,r),Wn(2,s,n,e,o),Wn(2,n,r,e,l),Wn(2,o,l,e,i)):(Zn(2,t[0],t[1],e,s),Zn(2,t[1],t[2],e,n),Zn(2,t[2],t[3],e,r),Zn(2,s,n,e,o),Zn(2,n,r,e,l),Zn(2,o,l,e,i))}function GE(t,e,i,s){K(e>=0&&e<=1);const n=new Y,r=new Y,o=new Y,l=new Y,c=new Y,f=new Y;e<=.5?(Wn(2,t[0],t[1],e,n),Wn(2,t[1],t[2],e,r),Wn(2,t[2],t[3],e,o),Wn(2,n,r,e,l),Wn(2,r,o,e,c),Wn(2,l,c,e,f)):(Zn(2,t[0],t[1],e,n),Zn(2,t[1],t[2],e,r),Zn(2,t[2],t[3],e,o),Zn(2,n,r,e,l),Zn(2,r,o,e,c),Zn(2,l,c,e,f));const y=t[3].clone();i&&(i[0].assign(t[0]),i[1].assign(n),i[2].assign(l),i[3].assign(f)),s&&(s[0].assign(f),s[1].assign(c),s[2].assign(o),s[3].assign(y))}function bv(t,e,i,s){if(K(e>=0&&i<=1&&e<=i),e===i){const r=new Y;return Mn(t,e,r),s[0].assign(r),s[1].assign(r),s[2].assign(r),void s[3].assign(r)}if(e===0&&i===1){for(let r=0;r<4;++r)s[r].assign(t[r]);return}const n=Ge(Y,4);GE(t,i,n,null),GE(n,i>0?e/i:0,null,n),Mn(t,e,n[0]),Mn(t,i,n[3]),s[0].setCoordsPoint2D(n[0]),s[1].setCoordsPoint2D(n[1]),s[2].setCoordsPoint2D(n[2]),s[3].setCoordsPoint2D(n[3])}function Mn(t,e,i,s){if(s){if(e<0)return void ml(new si({start:t[0],end:t[0].add(xz(t,0).getUnitVector())}),e,i);if(e>1)return void ml(new si({start:t[3],end:t[3].add(xz(t,1).getUnitVector())}),e-1,i)}if(e<=.5){const n=new Y;Wn(2,t[0],t[1],e,n);const r=new Y;Wn(2,t[1],t[2],e,r);const o=new Y;Wn(2,t[2],t[3],e,o);const l=new Y;Wn(2,n,r,e,l);const c=new Y;Wn(2,r,o,e,c),Wn(2,l,c,e,i)}else{const n=new Y;Zn(2,t[0],t[1],e,n);const r=new Y;Zn(2,t[1],t[2],e,r);const o=new Y;Zn(2,t[2],t[3],e,o);const l=new Y;Zn(2,n,r,e,l);const c=new Y;Zn(2,r,o,e,c),Zn(2,l,c,e,i)}}function set(t,e,i){if(e.value()<=.5){const s=new Bt;Zd(2,Bt.constructPoint2D(t[0]),Bt.constructPoint2D(t[1]),e,s);const n=new Bt;Zd(2,Bt.constructPoint2D(t[1]),Bt.constructPoint2D(t[2]),e,n);const r=new Bt;Zd(2,Bt.constructPoint2D(t[2]),Bt.constructPoint2D(t[3]),e,r);const o=new Bt;Zd(2,s,n,e,o);const l=new Bt;Zd(2,n,r,e,l),Zd(2,o,l,e,i)}else{const s=new Bt;Kd(2,Bt.constructPoint2D(t[0]),Bt.constructPoint2D(t[1]),e,s);const n=new Bt;Kd(2,Bt.constructPoint2D(t[1]),Bt.constructPoint2D(t[2]),e,n);const r=new Bt;Kd(2,Bt.constructPoint2D(t[2]),Bt.constructPoint2D(t[3]),e,r);const o=new Bt;Kd(2,s,n,e,o);const l=new Bt;Kd(2,n,r,e,l),Kd(2,o,l,e,i)}}function net(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),set(s,e,i)}function xz(t,e){const i=cn(e,0,1);let s=ma(t,1,i);return s.isZero()&&(s=ma(t,2,i),s.isZero()?s=ma(t,3,i):i===1&&s.negateThis()),s}function c1e(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),ret(s,e,i)}function ret(t,e,i){e.value()<0&&e.set(0,e.eps()),e.value()>1&&e.set(1,e.eps()),i.setE(tet(t,1,e))}function Qte(t,e,i,s,n){if(n){if(pm(e,i)!==0)return t?4:2}else if(Yg(e,i))return 1;return jE(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function eie(t,e,i,s,n){if(n){if(pm(e,i)!==0)return t?4:2}else if(Yg(e,i))return 1;return wz(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function oet(t,e,i,s,n){if(n){if(pm(e,i)!==0)return 2}else if(Yg(e,i))return 1;return Pj(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function tie(t,e,i,s,n){if(n){if(pm(e,i)!==0)return t?4:2}else if(Yg(e,i))return 1;return Sz(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function iie(t,e,i,s,n){return K(0),0}function jE(t,e,i,s,n,r,o,l,c,f){if(n!==null&&(n.length=0),r!=null&&(r.length=0),s!==null&&(s.length=0),i.isDegenerate(0)){const re=[0,0,0],se=e.intersectPoint(i.getStartXY(),re,o);if(se>0){if(n!==null)for(let oe=0;oe<se;oe++)n.push(re[oe]);if(r!==null)for(let oe=0;oe<se;oe++)r.push(0);if(s!=null)for(let oe=0;oe<se;oe++){const pe=new Y;e.queryCoord2D(re[oe],pe),s.push(pe)}}return se}const y=Al(e,i);if(Hu(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,4);r1e(e,_);const x=i.getEndXY();x.subThis(i.getStartXY());const S=x.clone();S.leftPerpendicularThis();let P=3*_[3].dotProduct(S),A=2*_[2].dotProduct(S),k=_[1].dotProduct(S);const $=new Array(15),F=new Array(15);let G=vv(P,A,k,Ze.unit(),!1,$);G<0&&($[0]=0,$[1]=1,G=2);let V,B=0;for(let re=0,se=B;re<G;++re){const oe=e.getCoord2D($[re+se]);F[B]=i.getClosestCoordinate(oe,!1),Y.distance(oe,i.getCoord2D(F[B]))<=o&&($[B]=$[re+se],B++)}if(_[0].subThis(i.getStartXY()),Math.abs(x.x)>=Math.abs(x.y)){const re=x.y/x.x;P=_[3].y-_[3].x*re,A=_[2].y-_[2].x*re,k=_[1].y-_[1].x*re,V=_[0].y-_[0].x*re}else{const re=x.x/x.y;P=_[3].x-_[3].y*re,A=_[2].x-_[2].y*re,k=_[1].x-_[1].y*re,V=_[0].x-_[0].y*re}const W=e.getEndXY().equals(i.getStartXY())||e.getEndXY().equals(i.getEndXY()),J=[0,0,0];G=$ge(P,A,k,V,Ze.unit(),W,J);for(let re=0,se=B;re<G;++re){$[re+se]=J[re];const oe=e.getCoord2D($[re+se]);F[B]=i.getClosestCoordinate(oe,!1),Y.distance(oe,i.getCoord2D(F[B]))<=o&&($[B]=$[re+se],B++)}G=e.intersectPoint(i.getStartXY(),J,o);for(let re=0;re<G;re++)$[B]=J[re],F[B++]=0;G=e.intersectPoint(i.getEndXY(),J,o);for(let re=0;re<G;re++)$[B]=J[re],F[B++]=1;return i.intersectPoint(e.getStartXY(),J,o)!==0&&(F[B]=J[0],$[B++]=0),i.intersectPoint(e.getEndXY(),J,o)!==0&&(F[B]=J[0],$[B++]=1),B===0?0:Uu(t,e,i,$,F,B,s,n,r,o,l,c,f)}function wz(t,e,i,s,n,r,o,l,c,f){if(rn(i))return jE(t,e,new si({start:i.getStartXY(),end:i.getEndXY()}),s,n,r,o,l,c,f);const y=Al(e,i);if(Hu(e,i,o=Math.max(o,y)))return 0;const _=[],x=[],S=[],P=Ge(Y,4);{e.queryControlPoints(P);const k=Ge(Y,4),$=new _i;i.canonicToWorldTransformation($);const F=new _i;F.setInvert($),F.transformPoints2D(P,4,k);const G=Ge(ys,4);H2(k,G);const V=[G[0].x,G[1].x,G[2].x,G[3].x],B=[G[0].y,G[1].y,G[2].y,G[3].y],W=Ge(_t,3);W[0].setDouble(i.getSemiMinorAxis()),W[0].sqrThis(),W[1].setDouble(i.getSemiMajorAxis()),W[1].sqrThis(),W[2].setThis(W[0]),W[2].mulThis(W[1]),W[2].negateThis();const J=Fge(V,3,B,3,null,0,W,!0,Ze.unit(),Ze.unit(),x);if(J>0){let re=0;for(let se=0;se<J;se++){const oe=new Y;e.queryCoord2D(x[se],oe);const pe=i.getClosestCoordinate(oe,!1),ue=new Y;i.queryCoord2D(pe,ue),Y.distance(oe,ue)<=o&&(_.push(oe.clone()),x[re]=x[se],S.push(pe),re++)}x.length=re,_.length=re}}const A=[0,1];for(let k=0;k<2;k++){const $=k===0?i.getStartXY():i.getEndXY(),F=[0];U2(P,$,Ze.unit(),!1,-1,1,F);const G=new Y;Mn(P,F[0],G),Y.distance($,G)<=o&&(x.push(F[0]),S.push(A[k]),_.push(G.clone()))}for(let k=0;k<2;k++){const $=[0,3];{const F=i.getClosestCoordinate(P[$[k]],!1),G=new Y;i.queryCoord2D(F,G),Y.distance(P[$[k]],G)<=o&&(x.push(A[k]),S.push(F),_.push(G.clone()))}}return Uu(t,e,i,x,S,x.length,s,n,r,o,l,c,f)}function Pj(t,e,i,s,n,r,o,l,c,f){const y=Ge(Y,4);e.queryControlPoints(y);const _=Ge(Y,4);if(i.queryControlPoints(_),_j(y,_,4)<0)return Pj(t,i,e,s,r,n,o,l,c,!f);const x=Al(e,i);if(Hu(e,i,o=Math.max(o,x)))return 0;if(_et(e,i,s,n,r,o,l,c,f))return 2;const S=new Ze(0,1),P=new Ze(0,1);{const V=new Gr;BE(y,new Ze(0,1),V);const B=new Gr;BE(_,new Ze(0,1),B);const W=Math.max(V.maxDim(),B.maxDim());if(V.inflate(3*o),B.inflate(3*o),!V.intersectW(B))return 0;if(V.maxDim()<.1*W){if(Ez(y,V,S),Ez(_,V,P),S.isEmpty()||P.isEmpty())return 0;bv(y,S.vmin,S.vmax,y),bv(_,P.vmin,P.vmax,_)}}const A=Dx(y,3,_,3,o);if(A===0)return 0;const k=[],$=[],F=[];let G=!1;if(A===-1){const V=Ge(ys,4);H2(y,V);const B=[V[0].x,V[1].x,V[2].x,V[3].x],W=[V[0].y,V[1].y,V[2].y,V[3].y],J=Ge(ys,4);H2(_,J);const re=[],se=[],oe=Mx(B,3,W,3,null,0,[J[0].x,J[1].x,J[2].x,J[3].x],3,[J[0].y,J[1].y,J[2].y,J[3].y],3,null,0,!0,Ze.unit(),Ze.unit(),re,se);if(oe>0)for(let pe=0;pe<oe;pe++){const ue=new Y;Mn(_,se[pe],ue);const ce=new Y;Mn(y,re[pe],ce),Y.distance(ce,ue)<=o&&(k.push(ce.clone()),F.push(se[pe]),$.push(re[pe]))}else oe===-1&&(G=!0)}for(let V=0;V<2;V++){const B=V===0?y:_,W=V===0?_:y;for(let J=0;J<2;J++){const re=J===0?0:3,se=[0];U2(W,B[re],Ze.unit(),!1,-1,1,se);const oe=new Y;Mn(W,se[0],oe),Y.distance(B[re],oe)<=o&&(V===0?($.push(re===0?0:1),F.push(se[0])):(F.push(re===0?0:1),$.push(se[0])),k.push(oe.clone()))}}if($.length===0&&G){const V=e.calculateUpperLength2D()>i.calculateUpperLength2D();{const B=[0,0];if(det(V?e:i,B,!0)===2&&(K(Ze.unit().containsCoordinate(B[0])),!Ze.unit().containsCoordinate(B[1]))){const W=new Y;Mn(V?y:_,B[0],W);const J=[0,0];U2(V?_:y,W,Ze.unit(),!1,-1,2,J)===1&&(k.push(W.clone()),$.push(V?B[0]:J[0]),F.push(V?J[0]:B[0]))}}}if($.length===0)return 0;if(!S.equalsRange(0,1))for(let V=0;V<$.length;++V)$[V]=Nu.recalculateParentT(S.vmin,S.vmax,$[V]);if(!P.equalsRange(0,1))for(let V=0;V<F.length;++V)F[V]=Nu.recalculateParentT(P.vmin,P.vmax,F[V]);return Uu(t,e,i,$,F,$.length,s,n,r,o,l,c,f)}function Sz(t,e,i,s,n,r,o,l,c,f){const y=Al(e,i);if(i.isDegenerateToLineHelper(y)){const B=new si({start:i.getStartXY(),end:i.getEndXY()}),W=jE(t,e,B,s,n,r,o,l,c,f);if(r)for(let J=0;J<W;++J){const re=B.getCoord2D(r[J]);r[J]=i.getClosestCoordinate(re,!1)}return W}if(Hu(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,4);e.queryControlPoints(_);const x=Ge(Y,3);i.queryControlPoints(x);const S=new Ze(0,1),P=new Ze(0,1),A=[0,0,0];i.queryWeights(A);const k=[1,od(A),1];{const B=new Gr;BE(_,new Ze(0,1),B);const W=new Gr;LE(x,k,new Ze(0,1),W);const J=Math.max(B.maxDim(),W.maxDim());if(B.inflate(3*o),W.inflate(3*o),!B.intersectW(W))return 0;if(B.maxDim()<.1*J){if(Ez(_,B,S),yz(x,k,B,P),S.isEmpty()||P.isEmpty())return 0;bv(_,S.vmin,S.vmax,_),_v(x,k,P.vmin,P.vmax,x,k)}}const $=Dx(_,3,x,2,o);if($===0)return 0;const F=[],G=[],V=[];if($===-1){const B=Ge(ys,4);H2(_,B);const W=[B[0].x,B[1].x,B[2].x,B[3].x],J=[B[0].y,B[1].y,B[2].y,B[3].y],re=Ge(_t,3),se=Ge(_t,3),oe=Ge(_t,3);R6(x,k,re,se,oe);const pe=[],ue=[],ce=Mx(re,2,se,2,oe,2,W,3,J,3,null,0,!0,Ze.unit(),Ze.unit(),ue,pe);if(ce>0)for(let ne=0;ne<ce;ne++){const de=new Y;Mn(_,pe[ne],de);const Se=new Y;Xn(x,k,ue[ne],Se),Y.distance(de,Se)<=o&&(F.push(de.clone()),G.push(pe[ne]),V.push(ue[ne]))}}for(let B=0;B<2;B++){let W,J;B===0?(W=_,J=x):(J=_,W=x);for(let re=0;re<2;re++){const se=re===0?0:W.length-1,oe=[0],pe=new Y;if(B===0){const ue=wj(J,k,W[se],Ze.unit(),!1,-1,1,oe);K(ue===1),Xn(J,k,oe[0],pe)}else{const ue=U2(J,W[se],Ze.unit(),!1,-1,1,oe);K(ue===1),Mn(J,oe[0],pe)}Y.distance(W[se],pe)<=o&&(B===0?(G.push(se===0?0:1),V.push(oe[0])):(V.push(se===0?0:1),G.push(oe[0])),F.push(pe.clone()))}}if(G.length===0)return 0;if(!S.equalsRange(0,1))for(let B=0;B<G.length;++B)G[B]=Nu.recalculateParentT(S.vmin,S.vmax,G[B]);if(!P.equalsRange(0,1))for(let B=0;B<V.length;++B)V[B]=ba.recalculateParentT(P.vmin,P.vmax,V[B]);for(let B=0;B<V.length;++B)V[B]=B2(A,V[B]);return Uu(t,e,i,G,V,G.length,s,n,r,o,l,c,f)}function sie(t,e,i,s,n,r,o,l,c,f){const y=Al(e,i);if(Hu(e,i,o=Math.max(o,y)))return 0;const _=Ge(Y,4);e.queryControlPoints(_);const x=Ge(Y,3);i.queryControlPoints(x);const S=Dx(_,3,x,2,o);if(S===0)return 0;const P=[],A=[],k=[];if(S===-1){const $=Ge(ys,4);H2(_,$);const F=[$[0].x,$[1].x,$[2].x,$[3].x],G=[$[0].y,$[1].y,$[2].y,$[3].y],V=Ge(ys,3);V2(x,V);const B=Mx([V[0].x,V[1].x,V[2].x],2,[V[0].y,V[1].y,V[2].y],2,null,0,F,3,G,3,null,0,!0,Ze.unit(),Ze.unit(),k,A);if(B>0){let W=0;for(let J=0;J<B;J++){const re=new Y;e.queryCoord2D(A[J],re);const se=new Y;i.queryCoord2D(k[J],se),Y.distance(re,se)<=o&&(P.push(re.clone()),A[W]=A[J],k[W]=k[J],W++)}A.length=W,P.length=W}}for(let $=0;$<2;$++){let F,G;$===0?(F=_,G=x):(G=_,F=x);for(let V=0;V<2;V++){const B=V===0?0:F.length-1,W=[0],J=new Y;if($===0)s7(G,F[B],W),Gc(G,W[0],J);else{const re=U2(G,F[B],Ze.unit(),!1,-1,1,W);K(re===1),Mn(G,W[0],J)}Y.distance(F[B],J)<=o&&($===0?(A.push(B===0?0:1),k.push(W[0])):(k.push(B===0?0:1),A.push(W[0])),P.push(J.clone()))}}return Uu(t,e,i,A,k,A.length,s,n,r,o,l,c,f)}function aet(t,e,i,s,n){const r=new Gr;if(h1e(t,Ze.unit(),r),r.inflate(s),!r.isIntersectingPoint2D(e))return 0;const o=VE(t);let l=0,c=o.specialPoints[0];const f=[];for(let y=1,_=o.specialPoints.length;y<_;++y){const x=o.specialPoints[y],S=JQe(t,e,c,x);if(f.length===0)f.push(S);else if(S.t===S.tmin)K(f.at(-1).d<=S.d),f.at(-1).tmax=S.tmax;else if(f.at(-1).t===f.at(-1).tmax){K(f.at(-1).d>=S.d);const P=f.at(-1).tmin;f[f.length-1]=S,f.at(-1).tmin=P}else f.push(S);c=x}for(const y of f)if(y.d<=s){const _=y.t;i&&(l>=i.length&&Mi(""),i[l]=_),l++}return l}function h1e(t,e,i){const s=Ge(Y,4);t.queryControlPoints(s),BE(s,e,i)}function BE(t,e,i){if(e.equalsRange(0,1))return void i.setFromPoints(t,4);const s=Ge(Y,4);bv(t,e.vmin,e.vmax,s),i.setFromPoints(s,4)}class d1e{constructor(e,i){this.controlPoints=e,this.point=i.clone()}getMaxDerivative(){return 6}getValue(e,i){switch(e){case 0:{const s=new Y;Mn(this.controlPoints,i,s);const n=ma(this.controlPoints,1,i);return 2*s.sub(this.point).dotProduct(n)}case 1:{const s=new Y;Mn(this.controlPoints,i,s);const n=ma(this.controlPoints,1,i),r=ma(this.controlPoints,2,i);return 2*(s.sub(this.point).dotProduct(r)+n.dotProduct(n))}case 2:{const s=new Y;Mn(this.controlPoints,i,s);const n=ma(this.controlPoints,1,i),r=ma(this.controlPoints,2,i),o=ma(this.controlPoints,3,i);return 2*(s.sub(this.point).dotProduct(o)+3*n.dotProduct(r))}case 3:{const s=ma(this.controlPoints,1,i),n=ma(this.controlPoints,2,i),r=ma(this.controlPoints,3,i);return 2*(4*s.dotProduct(r)+3*n.sqrLength())}case 4:{const s=ma(this.controlPoints,2,i),n=ma(this.controlPoints,3,i);return 2*(10*s.dotProduct(n))}case 5:{const s=ma(this.controlPoints,3,i);return 2*(10*s.dotProduct(s))}default:return 0}}getError(e){return K(0),0}}function U2(t,e,i,s,n,r,o){PE(Ze.unit().contains(i)&&r>0,"getClosestCoordinate"),(n<0||Number.isNaN(n))&&(n=Number.MAX_VALUE);const l=[],c=new Y;Mn(t,i.vmin,c);let f=Y.distance(c,e);if(f<=n&&l.push(new Y(i.vmin,f)),i.vmin!==i.vmax&&(Mn(t,i.vmax,c),f=Y.distance(c,e),f<=n&&l.push(new Y(i.vmax,f))),i.width()>0){const x=new Array(18),S=Xg(new d1e(t,e),i,18,x);for(let P=0;P<S;P++)Mn(t,x[P],c),f=Y.distance(c,e),f>n||l.push(new Y(x[P],f))}if(s){K(i.equals(Ze.unit()));{Mn(t,-1,c,!0);const x=new Y;Mn(t,0,x);const S=new si({start:c,end:x}),P=S.getClosestCoordinate(e,!0);P<1&&(c.assign(S.getCoord2D(P)),f=Y.distance(c,e),f<=n&&l.push(new Y(P-1,f)))}{Mn(t,2,c,!0);const x=new Y;Mn(t,i.vmax,x);const S=new si({start:x,end:c}),P=S.getClosestCoordinate(e,!0);P>0&&(c.assign(S.getCoord2D(P)),f=Y.distance(c,e),f<=n&&l.push(new Y(1+P,f)))}}if(!l.length)return 0;l.sort((x,S)=>x.compare(S));let y=0;const _=l[0].x;if(o[y++]=_,y<r){const x=Ege(t,4,!1).total(),S=l[0].y;for(let P=1,A=l.length;P<A;P++)if(l[P].y>S+x){l.length=P;break}l.sort((P,A)=>_f(P.x,A.x)),y=0,o[y++]=l[0].x;for(let P=1,A=l.length;P<A;P++)l[P].x!==o[y-1]&&y<r&&(o[y++]=l[P].x)}return y}function F6(t,e,i,s,n,r,o){const l=Ge(Y,4);return t.queryControlPoints(l),U2(l,e,i,s,n,r,o)}function uet(t){return t.getStartXY().norm(1)+t.getEndXY().norm(1)+t.m_cp[0].norm(1)+t.m_cp[1].norm(1)}function cet(t){return t[0].norm(1)+t[1].norm(1)+t[2].norm(1)+t[3].norm(1)}function het(t,e,i){if(K(i>=2),i===2){const P=new Y;ar(e[0],e[i-1],1/3,P);const A=new Y;return ar(e[0],e[i-1],2/3,A),void t.construct(e[0],P,A,e[i-1])}const s=e[0],n=e[i-1],r=[0,0],o=F6(t,s,Ze.unit(),!1,Number.NaN,2,r),l=[0,0],c=F6(t,n,Ze.unit(),!1,Number.NaN,2,l),f=[];for(let P=0;P<o;P++)for(let A=0;A<c;A++){const k=r[P],$=l[A],F=(W,J)=>{const re=[];re.length=i-2;const se=()=>{let Oe=0;for(let we=1,Fe=i-1;we<Fe;we++){Oe+=Y.distance(e[we-1],e[we]);const it=Oe;re[we-1]=it}Oe+=Y.distance(e[i-2],e[i-1]);for(let we=1,Fe=i-1;we<Fe;we++)re[we-1]/=Oe};let oe=!1,pe=!1;{const Oe=new Qt;k<=$?(t.queryCut(k,$,Oe,!0),W.assign(Oe.get().getControlPoint1()),J.assign(Oe.get().getControlPoint2())):(t.queryCut($,k,Oe,!0),W.assign(Oe.get().getControlPoint2()),J.assign(Oe.get().getControlPoint1())),s.equals(W)&&(oe=!0),n.equals(J)&&(pe=!0)}se();let ue=Number.MAX_VALUE;const ce=W.clone(),ne=J.clone();for(let Oe=0;Oe<5;Oe++)ue=EN(!0,!1,s,ce,ne,n,oe,pe,re,i-2,e,i);for(let Oe=0;Oe<30;Oe++){const we=ce.clone();ne.clone();const Fe=EN(!0,!0,s,ce,ne,n,oe,pe,re,i-2,e,i);if(ue<=Fe&&we.equals(ce)&&we.equals(ne))break;ue=Fe}se();let de=!1,Se=Number.EPSILON;const Pe=W.clone(),Re=J.clone();for(let Oe=0;Oe<30;Oe++){const we=Pe.clone();Re.clone();const Fe=EN(de,!0,s,Pe,Re,n,oe,pe,re,i-2,e,i);if(Se<=Fe&&we.equals(Pe)&&we.equals(Re))break;de=!0,Se=Fe}return Se<ue?(W.assign(Pe),J.assign(Re)):(W.assign(ce),J.assign(ne),Se=ue),Se},G=new Y,V=new Y,B=[F(G,V),Y.distance(s,G)+Y.distance(G,V)+Y.distance(V,n),G.x,G.y,V.x,V.y];f.splice(f.length,0,...B)}let y=f[0],_=f[1],x=0;for(let P=6;P<f.length;P+=6)f[P]<y&&(y=f[P],_=f[P+1],x=P);let S=x;for(let P=0;P<f.length;P+=6)P!==x&&f[P+1]<_&&Math.abs(y-f[P])<10*y&&(_=f[P+1],S=P);t.construct(s,new Y(f[S+2],f[S+3]),new Y(f[S+4],f[S+5]),n)}function det(t,e,i=!1){const s=Ge(Y,4);t.queryControlPoints(s);const n=Ge(ys,4);let r,o,l;H2(s,n,!0);const c=n[3].x.isZero(),f=n[3].y.isZero();if(c||f)if(c&&!f){if(n[2].x.isZero())return 0;r=n[1].x.div(n[2].x).negate(),o=n[2].y.div(n[3].y),l=n[1].y.div(n[3].y)}else{if(c||!f||n[2].y.isZero())return 0;r=n[1].y.div(n[2].y).negate(),o=n[2].x.div(n[3].x),l=n[1].x.div(n[3].x)}else{n[2].x.divThis(n[3].x),n[1].x.divThis(n[3].x),n[2].y.divThis(n[3].y),n[1].y.divThis(n[3].y);const S=n[2].x.sub(n[2].y);if(S.isZero())return 0;r=n[1].x.sub(n[1].y).div(S).negate(),o=n[2].x.clone(),l=n[1].x.clone()}if(!i&&r.abs().value()>2)return 0;const y=[0,0],_=t.getStartXY().equals(t.getEndXY()),x=vv(1,-r.toDouble(),r.add(o).mul(r).add(l).toDouble(),Ze.unit(),_,y);if(x===0)return 0;if(y[0]>=0&&y[0]<=1){const S=r.toDouble()-y[0];if(i||S>=0&&S<=1)return e[0]=y[0],e[1]=S,e[0]>e[1]&&(e[1]=St(e[0],e[0]=e[1])),2}if(x===2&&y[1]>=0&&y[1]<=1){const S=r.toDouble()-y[1];if(i||S>=0&&S<=1)return e[0]=y[1],e[1]=S,e[0]>e[1]&&(e[1]=St(e[0],e[0]=e[1])),2}return 0}function fet(t,e,i){const s=t[1].mulE(e[2]).subThisE(t[2].mulE(e[1])),n=t[1].mulE(e[3]).subThisE(t[3].mulE(e[1])).mulThis(3),r=t[2].mulE(e[3]).subThisE(t[3].mulE(e[2])).mulThis(3),o=Ge(Be,2);let l=Sl(r,n,s,new Ze(0,1),!1,o);l<0&&(l=0);let c=0;for(let f=0;f<l;f++)Is(o[f].value(),0,1)||(i[c].setE(o[f]),c++);return c}function f1e(t,e){e[0].set(0);let i=1;const s=Ge(Be,4);Ej(t,s,!0);const n=Ge(Be,4);Cj(t,n,!0);{const r=s[3].mul(3),o=s[2].mul(2),l=s[1].clone(),c=Ge(Be,2);let f=Sl(r,o,l,new Ze(0,1),!1,c);f<0&&(f=0);for(let y=0;y<f;y++)Is(c[y].value(),0,1)||(e[i]=c[y],i++)}{const r=n[3].mul(3),o=n[2].mul(2),l=n[1].clone(),c=Ge(Be,2);let f=Sl(r,o,l,new Ze(0,1),!1,c);f<0&&(f=0);for(let y=0;y<f;y++)Is(c[y].value(),0,1)||(e[i]=c[y],i++)}if(i+=fet(s,n,e.slice(i)),e[i].set(1),i++,i>2){sd(e,0,i,(y,_)=>{const x=y.value(),S=_.value();return x<S?-1:x>S?1:0});let r=0;const o=e[0].clone();let l=0;const c=cet(t)*en(),f=new Y;W4(t,e[0].value(),f);for(let y=1;y<i;y++){const _=new Y;if(W4(t,e[y].value(),_),e[y].eq(o)||_.isEqualPoint2D(f,c)){if(r!==0){if(e[y].eps()===0)o.setE(e[y]),l=0;else if(l!==0){const x=Ui(1/e[y].eps()),S=1/l,P=x+S;o.set((e[y].value()*x+o.value()*S)/P),l=1/P,o.setError(Math.sqrt(l))}e[r].setE(o),W4(t,o.value(),f)}}else r++,e[r].setE(e[y]),o.setE(e[y]),W4(t,o.value(),f),l=Ui(e[y].eps())}r++,i=r}return i===1&&(i=2,e[1].set(1)),K(e[0].value()===0),K(e[i-1].value()===1),i}function pet(t,e,i,s,n){const r=Ge(Be,4),o=Ge(Be,3),l=new Ze(0,1);let c=0;if(e){if(Cj(t,r,!1),c=k6(r[3],r[2],r[1],r[0].sub(i),l,!1,o),s)for(let f=0;f<c;f++){const y=new Y;Mn(t,o[f].value(),y),s[f]=y.x}}else if(Ej(t,r,!1),c=k6(r[3],r[2],r[1],r[0].sub(i),l,!1,o),s)for(let f=0;f<c;f++){const y=new Y;Mn(t,o[f].value(),y),s[f]=y.y}if(n)for(let f=0;f<c;f++)n[f]=o[f].value();else s&&sd(s,0,c,_f);return c}function Ez(t,e,i){i.setEmpty();const s=[];s.push(new Ze(0,1));const n=.5*Math.max(e.width(),e.height());for(;s.length;){const r=s.at(-1);s.pop();const o=new Gr;if(BE(t,r,o),o.isIntersectingW(e)){const l=Math.max(o.width(),o.height());if(e.containsW(o)||l<=n||r.width()<1e-12)i.merge(r);else{const c=r.getCenter();s.push(Ze.construct(r.vmin,c)),s.push(Ze.construct(c,r.vmax))}}}}function met(t,e,i){i.length=0;{const re=new Be;u1e(t,re);const se=new Bt;if(c1e(t,re,se),se.isZero())return re.isZero()||re.eq(new Be(1))?0:(i.push(re.value()),1)}const s=Ge(Be,4);o1e(t,s,!0);const n=Ge(Be,4);a1e(t,n,!0);const r=Ge(Be,6),o=s[3].negate().mulE(n[1]).addE(s[2].mulE(n[2]).mul(2)).addE(s[1].mulE(n[3])),l=s[3].negate().mulE(n[1]).subE(s[2].mulE(n[2]).mul(2)).addE(s[1].mulE(n[3])),c=s[2].mulE(s[2]).subE(n[2].mulE(n[2]));r[0]=n[1].mulE(n[1]).mulE(o).addE(s[1].mulE(s[1]).mulE(l)).addE(s[1].mulE(n[1]).mulE(c).mul(2)).mul(6),r[1]=s[2].mulE(n[1]).subE(s[1].mulE(n[2])).mulE(s[2].mulE(s[2]).addE(s[1].mulE(s[3]).mul(2)).addE(n[2].mulE(n[2])).addE(n[1].mulE(n[3]).mul(2))).mul(24);const f=s[1].mulE(n[2]).mulE(n[2]).mulE(n[3]),y=s[2].mulE(s[2]).mulE(s[3]).mulE(n[1]).subE(f).mul(156),_=s[3].mulE(n[1]).subE(s[1].mulE(n[3])),x=s[3].mulE(n[1]).subE(s[1].mulE(n[3])),S=s[1].mulE(s[3]).mulE(x).addE(n[1].mulE(n[3]).mulE(_)).mul(72),P=n[1].mulE(n[3]).subE(s[1].mulE(s[3])),A=s[2].mulE(n[2]).mulE(P).mul(120),k=s[1].mulE(s[2]).mulE(s[2]).mulE(n[3]),$=s[3].mulE(n[1]).mulE(n[2]).mulE(n[2]).subE(k).mul(36);r[2]=y.addE(S).addE(A).addE($);const F=s[2].mulE(s[3]).mulE(s[3]).mulE(n[1]).subE(s[1].mulE(n[2]).mulE(n[3]).mulE(n[3])).mul(360),G=s[2].mulE(n[2]).mulE(s[2].mulE(s[3]).subE(n[2].mulE(n[3]))).addE(s[3].mulE(n[2]).mulE(n[2]).mulE(n[2])).subE(s[2].mulE(s[2]).mulE(s[2]).mulE(n[3])).mul(24),V=s[2].mulE(n[1]).mulE(n[3]).mulE(n[3]).subE(s[1].mulE(s[3]).mulE(s[3]).mulE(n[2])).mul(72),B=s[3].mulE(n[3]).mulE(n[1].mulE(n[2]).subE(s[1].mulE(s[2]))).mul(288);r[3]=F.addE(G).addE(V).addE(B),r[4]=n[3].mulE(n[3]).addE(s[3].mulE(s[3])).mulE(s[3].mulE(n[1]).subE(s[1].mulE(n[3]))).mul(270).addE(s[3].mulE(n[2]).subE(s[2].mulE(n[3]))).mulE(s[2].mulE(s[3]).addE(n[2].mulE(n[3]))).mul(180),r[5]=s[3].mulE(n[2]).subE(s[2].mulE(n[3])).mulE(s[3].mulE(s[3]).addE(n[3].mulE(n[3]))).mul(216);const W=Ge(Be,5),J=Oge(r,5,new Ze(0,1),!1,W,5);if(J>0){let re=Math.abs(t.getCurvature(0)),se=0;const oe=Math.abs(t.getCurvature(1));(oe>re||!Number.isFinite(oe))&&(se=1);for(let pe=0;pe<J;pe++){const ue=Math.abs(t.getCurvature(W[pe].value()));t.getCoord2D(W[pe].value()),(ue>re||!Number.isFinite(ue))&&(re=ue,se=W[pe].value())}if((!Number.isFinite(re)||1/re<e)&&!Is(se,0,1)){const pe=t.getCoord2D(se);if(!pe.equals(t.getStartXY())&&!pe.equals(t.getEndXY()))return i.push(se),1}}return 0}class get{constructor(e,i){this.b=e,this.len=i}getMaxDerivative(){return 1}getValue(e,i){return e===0?this.len-qE(this.b,i,!1):0}getError(e){return K(0),0}}function Cz(t,e,i,s,n,r,o){for(;;){const l=Y.distance(e[0],e[3]),c=Y.distance(e[0],e[1])+Y.distance(e[1],e[2])+Y.distance(e[2],e[3]);if(c-l<=s+i*c)return t+ji(l,c,.5);const f=B=>ma(e,1,B).length();if(r===0){K(o<8);let B=f(0),W=f(1);n[0]+=2,B>W&&(W=St(B,B=W),e[3]=St(e[0],e[0]=e[3]),e[2]=St(e[1],e[1]=e[2]));let J=B/(B+W),re=1,se=c;for(;J<1/32&&se>=32*(s+i*se);){re/=4;const oe=f(re);n[0]++,J=B/(oe+B);const pe=new Y;if(Mn(e,.5*re,pe),se=Y.distance(pe,e[0]),se<=s){const ue=new Y;Mn(e,re,ue),se+=Y.distance(ue,pe)}}if(re!==1){const oe=Ge(Y,4);GE(e,re,e,oe),t=Cz(t,oe,i,s,n,0,o+1),r++,o++;continue}}const y=8;n[0]+=y;const _=tf(y,f,0,1),x=16;n[0]+=x;const S=tf(x,f,0,1);let P=Math.abs(_-S)>s+i*c;if(!P)return t+S;if(r<3){const B=Ge(Y,4);GE(e,.5,e,B),t=Cz(t,B,i,s,n,r+1,o+1),r++,o++;continue}const A=32;n[0]+=A;const k=tf(A,f,0,1);if(P=Math.abs(S-k)>s+i*c,!P)return t+k;const $=64;n[0]+=$;const F=tf($,f,0,1);if(P=Math.abs(k-F)>s+i*c,!P)return t+F;const G=128;n[0]+=G;const V=tf(G,f,0,1);return P=Math.abs(F-V)>s+i*c,t+V}}function yet(t,e,i,s,n){if(i===e)return 0;const r=Ge(Y,4);t.queryControlPoints(r);const o=Ge(Y,4);return bv(r,e,i,o),Cz(0,o,s,n,[0],0,0)}function vet(t,e,i,s,n){let r=!0;const o=q2(5,e,i,s,n,c=>{const f=Vy(t,1,c);return(r?t.getCoordX(c)-t.getStartX():t.getCoordY(c)-t.getStartY())*f.length()});r=!1;const l=q2(5,e,i,s,n,c=>{const f=Vy(t,1,c);return(r?t.getCoordX(c)-t.getStartX():t.getCoordY(c)-t.getStartY())*f.length()});return new Y(o,l)}function _et(t,e,i,s,n,r,o,l,c){const f=Ge(Y,4);t.queryControlPoints(f);const y=Ge(Y,4);if(e.queryControlPoints(y),f[0].equals(y[0])){if(f[1].equals(y[1])&&f[2].equals(y[2])&&f[3].equals(y[3]))return i&&(i.length=0,i.push(f[0]),i.push(f[3])),s&&(s.length=0,s.push(0),s.push(1)),n&&(n.length=0,n.push(0),n.push(1)),!0;if(!f[0].equals(y[3]))return!1}return!!(f[0].equals(y[3])&&f[1].equals(y[2])&&f[2].equals(y[1])&&f[3].equals(y[0]))&&(s&&(s.length=0,s.push(0),s.push(1),c&&(s[1]=St(s[0],s[0]=s[1]))),n&&(n.length=0,n.push(1),n.push(0),c&&(n[1]=St(n[0],n[0]=n[1]))),i&&(i.length=0,i.push(f[0]),i.push(f[3]),c&&(i[1]=St(i[0],i[0]=i[1]))),!0)}function EN(t,e,i,s,n,r,o,l,c,f,y,_){let x=0,S=0,P=0,A=0,k=0,$=0,F=0;for(let V=1,B=_-1;V<B;V++){let W,J,re,se,oe,pe,ue=-1,ce=c[V-1];t&&(V>2?(ce=cn(2*c[V-2]-c[V-3],0,1),c[V-1]=ce):V===2&&ce<=c[0]&&(ce=c[0]));for(let Se=0;Se<11&&(W=c[V-1],J=W*W,re=J*W,se=1-W,oe=se*se,pe=oe*se,t)&&!(Math.abs(W-ue)<1e-12)&&Se!==10;Se++){const Pe=i.x-2*s.x+n.x,Re=i.x-3*s.x+3*n.x-r.x,Oe=i.y-2*s.y+n.y,we=i.y-3*s.y+3*n.y-r.y,Fe=i.x-s.x-2*Pe*W+Re*J,it=-y[V].x+i.x*pe+W*(3*s.x*oe+W*(3*n.x-3*n.x*W+r.x*W)),vt=i.y-s.y-2*Oe*W+we*J,ot=-y[V].y+i.y*pe+W*(3*s.y*oe+W*(3*n.y-3*n.y*W+r.y*W));ue=W;const ct=W- -6*(Fe*it+vt*ot)/(6*(3*Ui(Fe)-(-2*Pe+2*Re*W)*it)+6*(3*Ui(vt)-(-2*Oe+2*we*W)*ot));c[V-1]=cn(ct,V>1?c[V-2]:0,1)}x+=3*J*oe*oe,S+=3*re*pe,P+=3*J*J*oe;const ne=-(pe*i.x+re*r.x-y[V].x);A+=ne*W*oe,k+=ne*J*se;const de=-(pe*i.y+re*r.y-y[V].y);$+=de*W*oe,F+=de*J*se}if(e){const V=x*P-S*S;Math.abs(V)>=1e-12*(Math.abs(x*P)+Math.abs(S*S))+1e-10?(o||(s.x=(A*P-k*S)/V,s.y=($*P-F*S)/V),l||(n.x=(x*k-S*A)/V,n.y=(x*F-S*$)/V)):(ar(i,r,.3,s),ar(i,r,.6,n))}let G=0;for(let V=1,B=_-1;V<B;V++){const W=c[V-1],J=1-W,re=i.mul(Uee(J)),se=s.mul(3*W*J*J),oe=n.mul(3*W*W*J),pe=r.mul(Uee(W));G+=re.add(se).add(oe).add(pe).sub(y[V]).sqrLength()}return G}function nie(t,e,i,s){const n=t.getPathStart(e),r=t.getPathEnd(e);if(r-n<3)return;const o=2*n,l=Y.getNAN();i.queryPoint2D(o,l);const c=l.x,f=l.y,y=Y.getNAN();i.queryPoint2D(o+2,y);const _=Y.getNAN();for(let x=o+4,S=2*r;x<S;x+=2)i.queryPoint2D(x,_),s.pe((_.x-l.x)*(y.y-f)),l.setCoordsPoint2D(y),y.setCoordsPoint2D(_);s.pe((c-l.x)*(y.y-f))}function bet(t,e,i){for(;e.hasNextSegment();){const s=e.nextCurve();if(s===null)break;i.pe(2*s.calculateArea2DHelper())}}var Qi=vr;class Kf{static toSegType(e){let i=0;switch(e){case me.enumLine:i=1;break;case me.enumBezier:i=2;break;case me.enumEllipticArc:i=4;break;case me.enumRationalBezier2:i=8;break;case me.enumBezier2:i=16;break;default:bt("")}return i}constructor(){this.m_segmentFlags=null,this.m_segmentParamIndex=null,this.m_segmentParams=null,this.m_curveCount=0,this.m_bezierCount=0,this.m_arcCount=0,this.m_rbezier2Count=0,this.m_bezier2Count=0,this.m_curveParamWritePoint=0}assignCopy(e){return this.m_segmentFlags=e.m_segmentFlags,this.m_segmentParamIndex=e.m_segmentParamIndex,this.m_segmentParams=e.m_segmentParams,this.m_curveCount=e.m_curveCount,this.m_bezierCount=e.m_bezierCount,this.m_arcCount=e.m_arcCount,this.m_rbezier2Count=e.m_rbezier2Count,this.m_bezier2Count=e.m_bezier2Count,this.m_curveParamWritePoint=e.m_curveParamWritePoint,this}}class pa extends Ige{constructor(e){super(e),this.m_cachedRingAreas2D=null,this.m_paths=null,this.m_pathFlags=null,this.m_curveData=null,e.move?(this.m_bPolygon=e.move.m_bPolygon,this.m_cachedLength2D=e.move.m_cachedLength2D,this.m_cachedArea2D=e.move.m_cachedArea2D,this.m_currentPathIndex=e.move.m_currentPathIndex,this.m_cachedRingAreas2D=e.move.m_cachedRingAreas2D,this.m_paths=e.move.m_paths,this.m_pathFlags=e.move.m_pathFlags,this.m_curveData=e.move.m_curveData,e.move.m_curveData=null,e.move.setEmpty()):(this.m_bPolygon=e.bPolygon,this.m_cachedLength2D=0,this.m_cachedArea2D=0,this.m_currentPathIndex=0)}getGeometryType(){return this.m_bPolygon?me.enumPolygon:me.enumPolyline}getDimension(){return this.m_bPolygon?2:1}changeRingStartPoint(e){K(this.m_bPolygon);const i=this.getPathIndexFromPointIndex(e),s=this.getPathStart(i);if(s===e)return;const n=this.getPathEnd(i);(e>=n||e<s)&&Je("change_ring_start_point");for(let r=0,o=this.m_description.getAttributeCount();r<o;r++){const l=this.m_description.getSemantics(r),c=Qi.getComponentCount(l);this.m_vertexAttributes.get(r).rotate(s*c,e*c,n*c)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.rotate(s,e,n),this.m_curveData.m_segmentParamIndex.rotate(s,e,n))}setFillRule(e){this.m_bFillRule=e===1}getFillRule(){return this.m_bFillRule?1:0}isExteriorRingOGC(e){return!!this.m_bPolygon&&(this.updateOGCFlagsProtected(),!!(8&this.m_pathFlags.read(e)))}isExteriorRing(e){return this.calculateRingArea2D(e)>0}calculateRingArea2D(e){return this.m_bPolygon?(this.updateRingAreas2DProtected(),this.m_cachedRingAreas2D.read(e)):0}updateRingAreas2DProtected(){if(!this.hasDirtyFlag(1024))return;const e=this.getPathCount();if(e===0)return this.hasDirtyFlag(1024)&&(this.m_cachedArea2D=0),void this.setDirtyFlagProtected(1024,!1);const i=new nd(e),s=new Fr(0),n=new Fr(0);if(this.m_pointCount!==0){const r=this.getAttributeStreamRef(0);if(this.hasNonLinearSegments()){const o=new bN({parent:this});for(o.stripAttributes();o.nextPath();){n.reset();const l=o.getPathIndex();nie(this,l,r,n),bet(this,o,n);const c=.5*n.getResult();s.add(c),i.write(l,c)}}else for(let o=0;o<e;o++){n.reset(),nie(this,o,r,n);const l=.5*n.getResult();s.add(l),i.write(o,l)}}this.hasDirtyFlag(1024)&&(this.m_cachedArea2D=s.getResult(),this.m_cachedRingAreas2D=i,this.setDirtyFlagProtected(1024,!1))}getOGCPolygonCount(){if(!this.m_bPolygon)return 0;this.updateOGCFlagsProtected();let e=0;const i=this.getPathCount();for(let s=0;s<i;s++)8&this.m_pathFlags.read(s)&&e++;return e}getHashCodeImpl(){return K(0),0}equalsImpl(e){const i=e,s=this.getPathCount();if(s!==i.getPathCount())return!1;const n=this.hasNonLinearSegments();if(n!==i.hasNonLinearSegments()||n&&(this.m_curveData.m_curveCount!==i.m_curveData.m_curveCount||this.m_curveData.m_bezierCount!==i.m_curveData.m_bezierCount)||this.m_paths&&!this.m_paths.equals(i.m_paths,0,s+1)||this.m_bFillRule!==i.m_bFillRule||!this.m_bPolygon&&this.m_pathFlags&&!this.m_pathFlags.equals(i.m_pathFlags,0,s))return!1;if(this.hasNonLinearSegments()){if(!this.m_curveData.m_segmentFlags.equals(i.m_curveData.m_segmentFlags,0,this.getPointCount()))return!1;for(let r=0,o=this.getPointCount();r<o;r++){const l=this.m_curveData.m_segmentFlags.read(r);if(!pa.isNonLinearSegmentFlag(l))continue;const c=this.m_curveData.m_segmentParamIndex.read(r),f=i.m_curveData.m_segmentParamIndex.read(r),y=lc(l);for(let _=0;_<y;_++){const x=this.m_curveData.m_segmentParams.read(c+_),S=i.m_curveData.m_segmentParams.read(f+_);if(!ga(x,S))return!1}}}return!0}equalsImplTol(e,i){const s=e,n=this.getPathCount();if(n!==s.getPathCount())return!1;const r=this.hasNonLinearSegments();if(r!==s.hasNonLinearSegments()||r&&(this.m_curveData.m_curveCount!==s.m_curveData.m_curveCount||this.m_curveData.m_bezierCount!==s.m_curveData.m_bezierCount)||this.m_paths&&!this.m_paths.equals(s.m_paths,0,n+1)||this.m_bFillRule!==s.m_bFillRule||!this.m_bPolygon&&this.m_pathFlags&&!this.m_pathFlags.equals(s.m_pathFlags,0,n))return!1;if(!r)return!0;if(!this.m_curveData.m_segmentFlags.equals(s.m_curveData.m_segmentFlags,0,this.getPointCount()))return!1;const o=this.querySegmentIterator(),l=s.querySegmentIterator();for(;o.nextPath();){if(!l.nextPath())return!1;for(;o.hasNextSegment();){const c=o.nextCurve(),f=l.nextCurve();if(!(c&&f&&c.equals(f,i))){if(!c&&!f)break;return!1}}}return!0}reserveImplImpl(e,i){this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.resize(e,1),this.m_curveData.m_segmentParamIndex.resize(e,-1),this.checkCompactSegmentParams())}verifyStreamsAfterSizeChangeExtraImpl(){this.m_paths||(this.m_paths=Ga(1,0),this.m_pathFlags=M0(1,0)),this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.resize(this.m_reservedPointCount,1),this.m_curveData.m_segmentParamIndex.resize(this.m_reservedPointCount,-1),this.checkCompactSegmentParams())}copyToImpl(e,i){const s=e;s.m_bPathStarted=!1,s.m_bFillRule=this.m_bFillRule,this.m_paths?s.m_paths=i?this.m_paths:this.m_paths.clone():s.m_paths=null,this.m_pathFlags?s.m_pathFlags=i?this.m_pathFlags:this.m_pathFlags.clone():s.m_pathFlags=null,this.m_curveData&&(s.m_curveData||(s.m_curveData=new Kf),s.m_curveData.assignCopy(this.m_curveData),s.m_curveData.m_curveCount=0,s.updateCurveCounter(this.m_curveData.m_curveCount),i||(this.m_curveData.m_segmentParamIndex?s.m_curveData.m_segmentParamIndex=this.m_curveData.m_segmentParamIndex.clone():s.m_curveData.m_segmentParamIndex=null,this.m_curveData.m_segmentFlags?s.m_curveData.m_segmentFlags=this.m_curveData.m_segmentFlags.clone():s.m_curveData.m_segmentFlags=null,this.m_curveData.m_segmentParams?s.m_curveData.m_segmentParams=this.m_curveData.m_segmentParams.clone():s.m_curveData.m_segmentParams=null)),s.hasDirtyFlag(512)||(s.m_cachedLength2D=this.m_cachedLength2D),s.m_cachedRingAreas2D=null,s.hasDirtyFlag(1024)||(s.m_cachedArea2D=this.m_cachedArea2D,this.m_cachedRingAreas2D!==null&&(s.m_cachedRingAreas2D=i?this.m_cachedRingAreas2D:this.m_cachedRingAreas2D.clone()))}calculateArea2D(){return this.m_bPolygon?(this.updateRingAreas2DProtected(),this.m_cachedArea2D):0}calculateLength2D(){if(!this.hasDirtyFlag(512))return this.m_cachedLength2D;const e=this.querySegmentIterator(),i=new Fr(0);for(;e.nextPath();)for(;e.hasNextSegment();)i.add(e.nextSegment().calculateLength2D());return this.hasDirtyFlag(512)&&(this.m_cachedLength2D=i.getResult()),this.setDirtyFlagProtected(512,!1),i.getResult()}calculatePathLength2D(e){const i=this.querySegmentIteratorAtVertex(this.getPathStart(e)),s=new Fr(0);for(;i.hasNextSegment();)s.add(i.nextSegment().calculateLength2D());return s.getResult()}calculateLength3D(e){return K(0),0}calculatePathLength3D(e,i){return K(0),0}copyTo(e){bi(e.getGeometryType())||Je(""),this!==e&&super.copyTo(e)}swap(e){K(0)}hasNonLinearSegments(){return this.getCurveCount()!==0}getSegmentCount(){let e=this.getPointCount();if(!this.m_bPolygon){e-=this.getPathCount();for(let i=0,s=this.getPathCount();i<s;i++)this.isClosedPath(i)&&e++}return e}getSegmentCountPath(e){let i=this.getPathSize(e);return!this.isClosedPath(e)&&i>0&&i--,i}add(e,i){this===e&&Je("Multi_path_impl::add");for(let s=0,n=e.getPathCount();s<n;s++)this.addPath(e,s,!i)}addPath(e,i,s){this.insertPath(-1,e,i,s)}addPathPoint2D(e,i,s){this.insertPath2D(-1,e,0,i,s)}addSegmentsFromPath(e,i,s,n,r){if(this===e&&Je("Multi_path_impl.add_segments_from_path"),r||this.getPathCount()!==0||(r=!0),i<0&&(i=e.getPathCount()-1),(i>=e.getPathCount()||s<0||n<0||s+n>e.getSegmentCountPath(i))&&Mi("add_segments_from_path"),n===0)return;const o=e.getPathStart(i),l=e.isClosedPath(i)&&s+n===e.getSegmentCountPath(i);this.m_bPathStarted=!1,this.mergeVertexDescription(e.getDescription());let c=n;const f=o+s;let y=f+1;r&&(c++,y--),!r&&e.hasNonLinearSegments()&&e.m_curveData.m_segmentFlags.read(f)!==1&&(e.getXY(f).equals(this.getXY(this.m_pointCount-1))||Je("add_segments_from_path: start point mismatch"));const _=this.m_pointCount;if(this.resizeImpl(this.m_pointCount+c),this.verifyAllStreamsAfterSizeChange(),r){if(c===0)return;this.m_paths.add(this.m_pointCount);let S=e.m_pathFlags.read(i);this.m_bPolygon&&(S|=1),this.m_pathFlags.write(this.m_pathFlags.size()-1,S),this.m_pathFlags.add(0)}else this.m_paths.write(this.m_pathFlags.size()-1,this.m_pointCount);const x=l?c-1:c;for(let S=0,P=this.m_description.getAttributeCount();S<P;S++){const A=this.m_description.getSemantics(S),k=Qi.getComponentCount(A),$=e.m_description.getAttributeIndex(A);if(x>0){if($<0||!e.m_vertexAttributes.get($)){const F=Qi.getDefaultValue(A);this.m_vertexAttributes.get(S).insertRange(k*_,F,x*k,k*_),l&&this.m_vertexAttributes.get(S).insertRange(k*_+x*k,F,k,k*_);continue}this.m_vertexAttributes.get(S).insertRangeFromStream(k*_,e.m_vertexAttributes.get($),k*y,x*k,!0,k,k*_)}l&&this.m_vertexAttributes.get(S).insertRangeFromStream(k*(_+x),e.m_vertexAttributes.get($),k*o,k,!0,k,k*(_+x))}if(this.hasNonLinearSegments()&&this.initSegmentData(0),e.hasNonLinearSegments()){let S=0;for(let P=0,A=f;P<n;P++)S+=lc(e.m_curveData.m_segmentFlags.read(A)),A++;if(S>0){this.initSegmentData(S);let P=f,A=_-(r?0:1),k=0;for(let $=0;$<n;$++){const F=e.m_curveData.m_segmentFlags.read(P);if(this.m_curveData.m_segmentFlags.write(A,F),pa.isNonLinearSegmentFlag(F)){k++;let G=e.m_curveData.m_segmentParamIndex.read(P);const V=lc(F);this.m_curveData.m_segmentParamIndex.write(A,this.m_curveData.m_curveParamWritePoint);for(let B=0;B<V;B++){const W=e.m_curveData.m_segmentParams.read(G);this.m_curveData.m_segmentParams.write(this.m_curveData.m_curveParamWritePoint,W),this.m_curveData.m_curveParamWritePoint++,G++}this.incCurveType(F,1)}else this.m_curveData.m_segmentParamIndex.write(A,-1);A++,P++}this.modifyCurveCounter(k)}}if(l){const S=this.getPathCount()-1,P=this.getPathStart(S),A=this.getPathEnd(S)-1,k=this.getXY(P),$=this.getXY(A);k.isEqualPoint2D($)&&(--this.m_pointCount,this.m_paths.write(S+1,this.m_pointCount))}this.notifyModifiedFlags(2001)}reverseAllPaths(){for(let e=0,i=this.getPathCount();e<i;e++)this.reversePath(e)}reversePath(e){e>=this.getPathCount()&&Je("");const i=this.getPathSize(e);if(i===0)return;const s=this.getPathStart(e),n=this.isClosedPath(e);if(this.hasNonLinearSegments()){let l=s;const c=new this.m_segmentBufferCTor;let f=!1;for(let y=0;y<i;y++,l++){const _=this.m_curveData.m_segmentFlags.read(l);if(!pa.isNonLinearSegmentFlag(_))continue;f=!0,this.querySegment(l,c,!0),c.get().reverse();const x=this.m_curveData.m_segmentParamIndex.read(l);c.get().writeInBufferStream(this.m_curveData.m_segmentParams,x)}if(f){const y=n?0:1;this.m_curveData.m_segmentFlags.reverseRange(s,i-y,1),this.m_curveData.m_segmentParamIndex.reverseRange(s,i-y,1)}}const r=n?1:0;for(let l=0,c=this.m_description.getAttributeCount();l<c;l++)if(this.m_vertexAttributes.get(l)){const f=this.m_description.getSemantics(l),y=Qi.getComponentCount(f);this.m_vertexAttributes.get(l).reverseRange(y*(s+r),y*(i-r),y)}const o=6&this.m_pathFlags.read(e);if(o){let l=0;4&o&&(l|=2),2&o&&(l|=4),this.m_pathFlags.clearBits(e,6),this.m_pathFlags.setBits(e,l)}this.notifyModifiedFlags(1233)}removePath(e){const i=this.getPathCount();e<0&&(e=i-1),e>=i&&Je("");const s=this.getPathStart(e),n=this.getPathSize(e);for(let r=0,o=this.m_description.getAttributeCount();r<o;r++)if(this.m_vertexAttributes.get(r)){const l=this.m_description.getSemantics(r),c=Qi.getComponentCount(l);this.m_vertexAttributes.get(r).eraseRange(c*s,c*n,c*this.m_pointCount)}if(this.hasNonLinearSegments()){let r=0;for(let o=s,l=s+n;o<l;o++){const c=this.m_curveData.m_segmentFlags.read(o);pa.isNonLinearSegmentFlag(c)&&(this.incCurveType(c,-1),r++)}this.modifyCurveCounter(-r),this.m_curveData.m_segmentFlags.eraseRange(s,n,this.m_pointCount),this.m_curveData.m_segmentParamIndex.eraseRange(s,n,this.m_pointCount)}for(let r=e+1;r<=i;r++){const o=this.m_paths.read(r);this.m_paths.write(r-1,o-n)}if(this.m_pathFlags)for(let r=e+1;r<=i;r++){const o=this.m_pathFlags.read(r);this.m_pathFlags.write(r-1,o)}this.m_paths.resize(i),this.m_pathFlags.resize(i),this.m_pointCount-=n,this.m_reservedPointCount-=n,e===i-1&&(this.m_bPathStarted=!1),this.notifyModifiedFlags(2001),this.checkCompactSegmentParams(),this.dbgVerifyCurves()}dbgVerifyCurves(){}insertPath(e,i,s,n){this===i&&Je("Multi_path_impl::insert_path");const r=this.getPathCount();if(!n&&i.hasNonLinearSegmentsPath(s))return e=this.insertPath(e,i,s,!0),this.reversePath(e),e;s>=i.getPathCount()&&Je(""),e>r&&Je(""),e<0&&(e=r),s<0&&(s=i.getPathCount()-1),this.m_bPathStarted=!1,this.mergeVertexDescription(i.getDescription());const o=i.getPathStart(s),l=i.getPathSize(s);if(l===0)return this.insertPath2D(e,null,0,0,!0);const c=this.m_pointCount,f=i.isClosedPath(s)&&!n?1:0;this.resizeImpl(this.m_pointCount+l),this.verifyAllStreamsAfterSizeChange();const y=e<r?this.getPathStart(e):c;for(let S=0,P=this.m_description.getAttributeCount();S<P;S++){const A=this.m_description.getSemantics(S),k=i.getDescription().getAttributeIndex(A),$=Qi.getComponentCount(A);if(k>=0&&i.m_vertexAttributes.get(k))f!==0&&this.m_vertexAttributes.get(S).insertRangeFromStream(y*$,i.m_vertexAttributes.get(k),$*o,$,!0,$,$*c),this.m_vertexAttributes.get(S).insertRangeFromStream((y+f)*$,i.m_vertexAttributes.get(k),$*(o+f),$*(l-f),n,$,$*(c+f));else{const F=Qi.getDefaultValue(A);this.m_vertexAttributes.get(S).insertRange(y*$,F,$*l,$*c)}}const _=c+l;this.m_paths.add(_);for(let S=r;S>=e+1;S--){const P=this.m_paths.read(S-1);this.m_paths.write(S,P+l)}this.m_pathFlags.add(0);for(let S=r-1;S>=e+1;S--){let P=this.m_pathFlags.read(S);P&=-9,this.m_pathFlags.write(S+1,P)}let x=i.getPathFlagsStreamRef().read(s);if(x&=-9,this.m_bPolygon&&(x|=1),this.m_pathFlags.write(e,x),i.hasNonLinearSegments()){this.initSegmentData(0);let S=o,P=0;for(let A=0;A<l;A++)P+=lc(i.m_curveData.m_segmentFlags.read(S)),S++;if(P>0){this.m_curveData.m_segmentFlags===null?(this.m_curveData.m_segmentFlags=M0(this.m_pointCount,1),this.m_curveData.m_segmentParamIndex=Ga(this.m_pointCount,-1)):(this.m_curveData.m_segmentFlags.insertRange(y,1,l,c),this.m_curveData.m_segmentParamIndex.insertRange(y,-1,l,c)),this.m_curveData.m_segmentParams?this.m_curveData.m_segmentParams.resize(this.m_curveData.m_curveParamWritePoint+P):this.m_curveData.m_segmentParams=My(P),S=o;let A=y,k=0;for(let $=0;$<l;$++){const F=i.m_curveData.m_segmentFlags.read(S);if(pa.isNonLinearSegmentFlag(F)){this.m_curveData.m_segmentFlags.write(A,F),this.m_curveData.m_segmentParamIndex.write(A,this.m_curveData.m_curveParamWritePoint);const G=lc(F);let V=i.m_curveData.m_segmentParamIndex.read(S);for(let B=0;B<G;B++){const W=i.m_curveData.m_segmentParams.read(V);this.m_curveData.m_segmentParams.write(this.m_curveData.m_curveParamWritePoint,W),this.m_curveData.m_curveParamWritePoint++,V++}k++,this.incCurveType(F,1)}S++,A++}this.modifyCurveCounter(k)}}return this.notifyModifiedFlags(2001),e}insertPath2D(e,i,s,n,r){const o=this.getPathCount();(e>o||s<0)&&Je(""),e<0&&(e=o),this.m_bPathStarted=!1;const l=this.m_pointCount;this.resizeImpl(this.m_pointCount+n),n===0&&this.notifyModifiedFlags(32),this.verifyAllStreamsAfterSizeChange();const c=e<o?this.getPathStart(e):l;if(i)this.m_vertexAttributes.get(0).insertRangeFromPoints(2*c,i,s,n,r,2*l);else{const f=Qi.getDefaultValue(0);this.m_vertexAttributes.get(0).insertRange(2*c,f,2*n,2*l)}for(let f=1,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=Qi.getComponentCount(_),S=Qi.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange(c*x,S,x*n,x*l)}this.m_paths.add(this.m_pointCount);for(let f=o;f>=e+1;f--){const y=this.m_paths.read(f-1);this.m_paths.write(f,y+n)}this.m_pathFlags.add(0);for(let f=o-1;f>=e+1;f--){let y=this.m_pathFlags.read(f);y&=-9,this.m_pathFlags.write(f+1,y)}return this.m_bPolygon&&this.m_pathFlags.write(e,1),this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(c,1,n,l),this.m_curveData.m_segmentParamIndex.insertRange(c,-1,n,l)),this.notifyModifiedFlags(2001),e}insertPathFromMultipoint(e,i,s,n,r){const o=i.getImpl(),l=this.getPathCount();(e>l||s<0)&&Je("");const c=n<0?o.getPointCount()-s:n;if(c>o.getPointCount()&&Je(""),s>=o.getPointCount()&&Je("pointsOffset"),e<0&&(e=l),this.m_bPathStarted=!1,this.mergeVertexDescription(o.getDescription()),c===0)return void this.insertPath2D(e,null,0,0,!0);const f=this.m_pointCount,y=s;this.resizeImpl(this.m_pointCount+c),this.verifyAllStreamsAfterSizeChange();const _=e<l?this.getPathStart(e):f;for(let P=0,A=this.m_description.getAttributeCount();P<A;P++){const k=this.m_description.getSemantics(P),$=o.getDescription().getAttributeIndex(k),F=Qi.getComponentCount(k);if($>=0){const G=o.getAttributeStreamRef(k);this.m_vertexAttributes.get(P).insertRangeFromStream(_*F,G,F*y,F*c,r,F,F*f)}else{const G=Qi.getDefaultValue(k);this.m_vertexAttributes.get(P).insertRange(_*F,G,F*c,F*f)}}const x=f+c;this.m_paths.add(x);for(let P=l;P>=e+1;P--){const A=this.m_paths.read(P-1);this.m_paths.write(P,A+c)}this.m_pathFlags.add(0);for(let P=l-1;P>=e+1;P--){let A=this.m_pathFlags.read(P);A&=-9,this.m_pathFlags.write(P+1,A)}let S=0;this.m_bPolygon&&(S|=1),this.m_pathFlags.write(e,S),this.notifyModifiedFlags(2001)}insertPoints(e,i,s,n,r,o,l){var S;if(this===s&&Je("Multi_path_impl.insert_points"),e<0&&(e=this.getPathCount()),n<0&&(n=s.getPathCount()-1),(e>this.getPathCount()||i>=0&&i>this.getPathSize(e)||n>=s.getPathCount()||o>s.getPathSize(n))&&Mi(""),!o)return;if(this.mergeVertexDescription(s.m_description),e===this.getPathCount()){this.m_paths.add(this.m_pointCount);let P=s.m_pathFlags.read(n);P&=-9,this.m_bPolygon?this.m_pathFlags.add(1|P):this.m_pathFlags.add(P)}i<0&&(i=this.getPathSize(e));const c=this.m_pointCount;this.resizeImpl(this.m_pointCount+o),this.verifyAllStreamsAfterSizeChange();const f=this.getPathStart(e),y=f+i;o<0&&(o=s.getPathSize(n));const _=s.getPathStart(n),x=_+o;for(let P=0,A=this.m_description.getAttributeCount();P<A;P++){const k=this.m_description.getSemantics(P),$=Qi.getComponentCount(k),F=s.m_description.getAttributeIndex(k);if(F<0||!s.m_vertexAttributes.get(F)){const G=Qi.getDefaultValue(k);this.m_vertexAttributes.get(P).insertRange($*y,G,x*$,$*c)}else(S=this.m_vertexAttributes.get(P))==null||S.insertRangeFromStream($*(f+i),s.m_vertexAttributes.get(F),$*(_+r),o*$,l,$,$*c)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(f+i,1,o,c),this.m_curveData.m_segmentParamIndex.insertRange(f+i,-1,o,c),i>0&&this.isNonLinearSegment(f+i-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(f+i-1),-1),this.m_curveData.m_segmentFlags.write(f+i-1,1),this.m_curveData.m_segmentParamIndex.write(f+i-1,-1),this.modifyCurveCounter(-1)));for(let P=e+1,A=this.getPathCount();P<=A;P++){const k=this.m_paths.read(P);this.m_paths.write(P,k+o)}this.notifyModifiedFlags(2001)}insertPointsFromPoints(e,i,s,n,r,o){if(e<0&&(e=this.getPathCount()),(e>this.getPathCount()||i>this.getPathSize(e)||n<0)&&Mi(""),!r)return;e===this.getPathCount()&&(this.m_paths.add(this.m_pointCount),this.m_bPolygon?this.m_pathFlags.add(1):this.m_pathFlags.add(0)),i<0&&(i=this.getPathSize(e));const l=this.m_pointCount;this.resizeImpl(this.m_pointCount+r),this.verifyAllStreamsAfterSizeChange();const c=this.getPathStart(e);this.m_vertexAttributes.get(0).insertRangeFromPoints(2*(c+i),s,n,r,o,2*l);for(let f=1,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=Qi.getComponentCount(_),S=Qi.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange((c+i)*x,S,x*r,x*l)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(c+i,1,r,l),this.m_curveData.m_segmentParamIndex.insertRange(c+i,-1,r,l),i>0&&this.isNonLinearSegment(c+i-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(c+i-1),-1),this.m_curveData.m_segmentFlags.write(c+i-1,1),this.m_curveData.m_segmentParamIndex.write(c+i-1,-1),this.modifyCurveCounter(-1)));for(let f=e+1,y=this.getPathCount();f<=y;f++)this.m_paths.write(f,this.m_paths.read(f)+r);this.notifyModifiedFlags(2001)}insertPointsFromMultipoint(e,i,s,n,r,o){const l=s.getImpl();if(e<0&&(e=this.getPathCount()),r<0&&(r=s.getPointCount()),(e>this.getPathCount()||i>=0&&i>this.getPathSize(e)||r>s.getPointCount())&&Mi(""),!r)return;if(this.mergeVertexDescription(l.getDescription()),e===this.getPathCount()){this.m_paths.add(this.m_pointCount);const S=0;this.m_bPolygon?this.m_pathFlags.add(1|S):this.m_pathFlags.add(S)}i<0&&(i=this.getPathSize(e));const c=this.m_pointCount;this.resizeImpl(this.m_pointCount+r),this.verifyAllStreamsAfterSizeChange();const f=this.getPathStart(e),y=f+i,_=0,x=_+r;for(let S=0,P=this.m_description.getAttributeCount();S<P;S++){const A=this.m_description.getSemantics(S),k=Qi.getComponentCount(A);if(l.getDescription().getAttributeIndex(A)<0){const F=Qi.getDefaultValue(A);this.m_vertexAttributes.get(S).insertRange(k*y,F,x*k,k*c);continue}const $=l.getAttributeStreamRef(A);this.m_vertexAttributes.get(S).insertRangeFromStream(k*(f+i),$,k*(_+n),r*k,o,k,k*c)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(f+i,1,r,c),this.m_curveData.m_segmentParamIndex.insertRange(f+i,-1,r,c),i>0&&this.isNonLinearSegment(f+i-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(f+i-1),-1),this.m_curveData.m_segmentFlags.write(f+i-1,1),this.m_curveData.m_segmentParamIndex.write(f+i-1,-1),this.modifyCurveCounter(-1)));for(let S=e+1,P=this.getPathCount();S<=P;S++){const A=this.m_paths.read(S);this.m_paths.write(S,A+r)}this.notifyModifiedFlags(2001)}insertPoint2D(e,i,s){const n=this.getPathCount();e<0&&(e=n),(e>n||e<n&&i>this.getPathSize(e))&&Mi(""),e===n&&this.addPathPoint2D(null,0,!0);const r=this.m_pointCount;this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();const o=this.getPathStart(e),l=i<0?this.getPathSize(e)+o:i+o,c=this.m_vertexAttributes.get(0);if(l===r)this.m_paths.write(e+1,r+1),c.writePoint2D(2*l,s);else{c.insert(2*l,s,2*r);for(let f=1,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=Qi.getComponentCount(_),S=Qi.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange(x*l,S,x,x*r)}this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.insertRange(l,1,1,r),this.m_curveData.m_segmentParamIndex.insertRange(l,-1,1,r));for(let f=e+1,y=n;f<=y;f++)this.m_paths.write(f,this.m_paths.read(f)+1)}this.m_curveData&&this.m_curveData.m_segmentFlags&&l>o&&this.isNonLinearSegment(l-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(l-1),-1),this.modifyCurveCounter(-1),this.m_curveData.m_segmentFlags.write(l-1,1),this.m_curveData.m_segmentParamIndex.write(l-1,-1)),this.notifyModifiedFlags(2001)}insertPoint(e,i,s){const n=this.getPathCount();e<0&&(e=n),(e>n||e<n&&i>this.getPathSize(e))&&Mi(""),e===n&&this.addPathPoint2D(null,0,!0);const r=this.m_pointCount;this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();const o=this.getPathStart(e),l=i<0?this.getPathSize(e)+o:i+o;if(l===r)this.m_paths.write(e+1,r+1),this.setPointByVal(l,s);else{const c=s.getDescription();this.m_description!==c&&this.mergeVertexDescription(c);for(let f=0,y=this.m_description.getAttributeCount();f<y;f++){const _=this.m_description.getSemantics(f),x=Qi.getComponentCount(_);if(c.hasAttribute(_))this.m_vertexAttributes.get(f).insertAttributes(x*l,s,_,x*r);else{const S=Qi.getDefaultValue(_);this.m_vertexAttributes.get(f).insertRange(x*l,S,x,x*r)}}this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.insertRange(l,1,1,r),this.m_curveData.m_segmentParamIndex.insertRange(l,-1,1,r));for(let f=e+1,y=n;f<=y;f++)this.m_paths.write(f,this.m_paths.read(f)+1)}this.m_curveData&&this.m_curveData.m_segmentFlags&&l>o&&this.isNonLinearSegment(l-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(l-1),-1),this.modifyCurveCounter(-1),this.m_curveData.m_segmentFlags.write(l-1,1),this.m_curveData.m_segmentParamIndex.write(l-1,-1)),this.notifyModifiedFlags(2001)}removePointFromPath(e,i){const s=this.getPathCount();e<0&&(e=s-1),(e>=s||i>=this.getPathSize(e))&&Mi("Multi_path.remove_point");const n=this.getPathStart(e),r=this.isClosedPath(e);i<0&&(i=this.getPathSize(e)-1),i<0&&Mi("Multi_path.remove_point");const o=n+i;for(let l=0,c=this.m_description.getAttributeCount();l<c;l++)if(this.m_vertexAttributes.get(l)){const f=this.m_description.getSemantics(l),y=Qi.getComponentCount(f);this.m_vertexAttributes.get(l).eraseRange(y*o,y,y*this.m_pointCount)}if(this.m_curveData&&this.m_curveData.m_segmentFlags){this.checkCompactSegmentParams();let l=0;if(o>n&&this.isNonLinearSegment(o-1))l+=1,this.incCurveType(this.m_curveData.m_segmentFlags.read(o-1),-1),this.m_curveData.m_segmentFlags.write(o-1,1),this.m_curveData.m_segmentParamIndex.write(o-1,-1);else{const c=this.getPathEnd(e);r&&n+1<c&&this.isNonLinearSegment(c-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(c-1),-1),this.m_curveData.m_segmentFlags.write(c-1,1),this.m_curveData.m_segmentParamIndex.write(c-1,-1),l+=1)}this.isNonLinearSegment(o)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(o),-1),l+=1),l>0&&this.modifyCurveCounter(-l),this.m_curveData.m_segmentFlags.eraseRange(o,1,this.m_pointCount),this.m_curveData.m_segmentParamIndex.eraseRange(o,1,this.m_pointCount)}for(let l=s;l>=e+1;l--){const c=this.m_paths.read(l);this.m_paths.write(l,c-1)}this.m_pointCount--,this.m_reservedPointCount--,this.notifyModifiedFlags(2001)}removePoint(e){let i;i=e<0?this.getPathCount()-1:this.getPathIndexFromPointIndex(e),this.removePointFromPath(i,e-this.getPathStart(i))}getNumberOfCurves(e){if(!this.hasNonLinearSegments())return 0;let i=0;for(let s=this.getPathStart(e),n=this.getPathEnd(e);s<n;s++)pa.isNonLinearSegmentFlag(this.m_curveData.m_segmentFlags.read(s))&&++i;return i}getPathCount(){return this.m_paths?this.m_paths.size()-1:0}getPathSize(e){return this.m_paths.read(e+1)-this.m_paths.read(e)}getPathStart(e){return this.m_paths.read(e)}getPathEnd(e){return this.m_paths.read(e+1)}getPathIndexFromPointIndex(e,i=-1){i===-1&&(i=this.m_currentPathIndex);const s=this.getPathCount(),n=pa.getPathIndexFromPointIndexImpl(this.m_paths,s,e,i);return this.m_currentPathIndex=n,n}startPathCoords(e,i){this.startPathPoint(new Ht({x:e,y:i}))}startPath(e){this.startPathPoint(new Ht({pt:e}))}startPath3D(e){this.startPathPoint(new Ht({x:e.x,y:e.y,z:e.z}))}startPath3DCoords(e,i,s){this.startPathPoint(new Ht({x:e,y:i,z:s}))}startPathPoint(e){e.isEmpty()&&Je("");const i=e.getDescription();let s;if(this.m_description!==i){this.mergeVertexDescription(i);const n=new Ht({vd:this.m_description});e.copyCommonAttributesTo(n),s=n}else s=e;this.m_bPathStarted?this.setPointByVal(this.m_pointCount-1,s):(this.insertPoint(-1,-1,s),this.m_bPathStarted=!0)}beforeNewSegmentHelper2(){this.m_paths=Ga(2),this.m_paths.write(0,0),this.m_pathFlags=M0(2,0),this.m_bPolygon&&this.m_pathFlags.write(0,1)}beforeNewSegmentHelper1(){this.m_paths!==null?(this.m_paths.add(0),this.m_pathFlags.add(0),this.m_bPolygon&&this.m_pathFlags.write(this.m_pathFlags.size()-2,1)):this.beforeNewSegmentHelper2()}beforeNewSegment(e){this.m_pointCount!==0||this.m_bPathStarted||this.startPathCoords(0,0);const i=this.m_pointCount,s=this.m_paths.size()-1,n=i+e;this.m_paths.write(s,n),this.resizeImpl(n),this.m_bPathStarted&&(this.m_bPathStarted=!1)}finishLineTo(){if(this.hasNonLinearSegments()){const e=this.m_curveData.m_segmentFlags.read(this.m_pointCount-1);e!==1&&(this.m_curveData.m_segmentFlags.write(this.m_pointCount-1,1),this.m_curveData.m_segmentParamIndex.write(this.m_pointCount-1,-1),this.modifyCurveCounter(-1),this.incCurveType(e,-1))}}lineToCoords(e,i){if(this.beforeNewSegment(1),this.m_description.getAttributeCount()===1)this.setXYCoords(this.m_pointCount-1,e,i);else{const s=fy(),n=new Ht({vd:this.m_description,attribBuffer:s,initDefaultValues:!0});n.setXYCoords(e,i),this.setPointByVal(this.m_pointCount-1,n)}this.finishLineTo()}lineTo(e){this.lineToCoords(e.x,e.y)}lineTo3D(e){this.beforeNewSegment(1);const i=i5(this.m_description,TE()),s=fy(),n=new Ht({vd:i,attribBuffer:s,initDefaultValues:!0});n.setXYZ(e),this.setPointByVal(this.m_pointCount-1,n),this.finishLineTo()}lineTo3DCoords(e,i,s){this.lineTo3D(new ii(e,i,s))}lineToPoint(e){if(this.beforeNewSegment(1),this.m_description===e.getDescription())this.setPointByVal(this.m_pointCount-1,e);else{this.mergeVertexDescription(e.getDescription());const i=fy(),s=new Ht({vd:this.m_description,attribBuffer:i,initDefaultValues:!1});e.copyCommonAttributesTo(s),this.setPointByVal(this.m_pointCount-1,s)}this.finishLineTo()}openPathAndDuplicateStartVertex(e){this.m_bPolygon&&bt("");const i=this.getPathCount();if(e>i&&Je(""),!this.isClosedPath(e))return;this.m_pathFlags||bt("");const s=this.m_pointCount,n=this.getPathStart(e),r=this.getPathEnd(e);if(r-n!=0){this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();for(let o=0,l=this.m_description.getAttributeCount();o<l;o++)if(this.m_vertexAttributes.get(o)){const c=this.m_description.getSemantics(o),f=Qi.getComponentCount(c);this.m_vertexAttributes.get(o).insertRangeFromStream(f*r,this.m_vertexAttributes.get(o),f*n,f,!0,1,f*s)}for(let o=i;o>e;o--){const l=this.m_paths.read(o);this.m_paths.write(o,l+1)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(r,1,1,s),this.m_curveData.m_segmentParamIndex.insertRange(r,-1,1,s)),this.m_pathFlags.clearBits(e,1)}}openPath(e){K(0)}isStrongPathStart(e){return!!(2&this.m_pathFlags.read(e))}setStrongPathStart(e,i){i?this.m_pathFlags.setBits(e,2):this.m_pathFlags.clearBits(e,2)}isStrongPathEnd(e){return!!(4&this.m_pathFlags.read(e))}setStrongPathEnd(e,i){i?this.m_pathFlags.setBits(e,4):this.m_pathFlags.clearBits(e,4)}clearStrongPathEnds(){for(let e=0,i=this.getPathCount();e<i;++e)this.m_pathFlags.clearBits(e,6)}openAllPathsAndDuplicateStartVertex(){if(this.m_bPolygon&&bt(""),this.isEmpty())return;this.m_pathFlags||bt("");let e=0;const i=this.getPathCount();for(let y=0;y<i;y++)this.isClosedPath(y)&&(this.getPathSize(y)>0?e++:this.m_pathFlags.clearBits(y,1));if(e===0)return;const s=this.hasNonLinearSegments();let n=0;const r=this.getPathCount(),o=this.m_description.getAttributeCount(),l=new Array(o);let c=null,f=null;for(let y=0;y<r;++y){const _=this.getPathStart(y),x=this.getPathSize(y),S=this.isClosedPath(y);if(x>0){const P=_+n;for(let A=0;A<o;A++)if(this.m_vertexAttributes.get(A)){const k=this.m_description.getSemantics(A),$=Qi.getComponentCount(k);if(!l[A]){const F=$9(k,$*(this.m_pointCount+e));l[A]=F}l[A].writeRange(P*$,x*$,this.m_vertexAttributes.get(A),_*$,!0,1),S&&l[A].writeRange((P+x)*$,$,this.m_vertexAttributes.get(A),_*$,!0,1)}if(s){if(c===null){const A=this.m_pointCount+e;c=M0(A),f=Ga(A)}c.writeRange(P,x,this.m_curveData.m_segmentFlags,_,!0,1),f.writeRange(P,x,this.m_curveData.m_segmentParamIndex,_,!0,1),S&&(c.write(P+x,1),f.write(P+x,-1))}}this.m_paths.write(y,_+n),S&&(this.m_pathFlags.clearBits(y,1),++n)}this.m_paths.write(r,this.m_pointCount+e),this.m_pathFlags.clearBits(r,1);for(let y=0;y<o;y++)this.m_vertexAttributes.get(y)&&this.m_vertexAttributes.set(y,l[y]);s&&(this.m_curveData.m_segmentFlags=c,this.m_curveData.m_segmentParamIndex=f),this.m_pointCount+=e,this.m_reservedPointCount>0&&(this.m_reservedPointCount=this.m_pointCount)}closePathWithLine(e){e===void 0&&(e=this.getPathCount()-1),this.throwIfEmpty(),(e<0||e>=this.getPathCount())&&Je("close_path_with_line"),e===this.getPathCount()-1&&(this.m_bPathStarted=!1);const i=this.m_pathFlags.read(e);if(this.m_pathFlags.write(e,1|i),this.m_curveData&&this.m_curveData.m_segmentFlags){const s=this.getPathEnd(e)-1,n=this.m_curveData.m_segmentFlags.read(s);this.m_curveData.m_segmentFlags.write(s,1),this.m_curveData.m_segmentParamIndex.write(s,-1),n!==1&&(this.incCurveType(n,-1),this.modifyCurveCounter(-1))}this.notifyModifiedFlags(2001)}closeLastPathWithSegment(e){this.closePathWithSegment(this.getPathCount()-1,e)}closePathWithSegment(e,i){if(this.throwIfEmpty(),(e<0||e>=this.getPathCount())&&Je("close_path_with_line"),i.getEndXY().equals(this.getXY(this.getPathStart(e)))||Je("close_path_with_segment: end point mismatch"),e===this.getPathCount()-1)this.m_bPathStarted=!1,this.addSegment(i,!1),--this.m_pointCount,this.m_paths.write(e+1,this.m_pointCount);else{this.mergeVertexDescription(i.getDescription());const n=i.getStartXY(),r=this.getPathEnd(e)-1;n.equals(this.getXY(r))||Je("close_path_with_segment: start point mismatch");const o=i.getGeometryType();if(o===me.enumLine)return void this.closePathWithLine(e);{const l=xN(i);this.initSegmentData(l);const c=Kf.toSegType(o),f=this.m_curveData.m_segmentFlags.read(r);if(f!==c)this.m_curveData.m_segmentParamIndex.write(r,this.m_curveData.m_curveParamWritePoint),i.writeInBufferStream(this.m_curveData.m_segmentParams,this.m_curveData.m_curveParamWritePoint),this.m_curveData.m_curveParamWritePoint+=l,this.incCurveType(c,1),f!==1?this.incCurveType(f,-1):this.modifyCurveCounter(1);else{const y=this.m_curveData.m_segmentParamIndex.read(r);i.writeInBufferStream(this.m_curveData.m_segmentParams,y)}this.m_curveData.m_segmentFlags.write(r,c)}}const s=this.m_pathFlags.read(e);this.m_pathFlags.write(e,1|s),this.notifyModifiedFlags(2001)}closeAllPaths(){if(this.m_bPolygon||this.isEmptyImpl())return;this.m_bPathStarted=!1;let e=!1;for(let i=0,s=this.m_paths.size()-1;i<s;i++){if(this.isClosedPath(i))continue;const n=this.m_pathFlags.read(i);this.m_pathFlags.write(i,1|n),e=!0}e&&this.notifyModifiedFlags(512)}isClosedPath(e){return!!(1&this.m_pathFlags.read(e))}isClosedPathInXYPlane(e){if(this.isClosedPath(e))return!0;const i=this.getPathStart(e),s=this.getPathEnd(e)-1;if(i>s)return!1;const n=this.getXY(i),r=this.getXY(s);return n.isEqualPoint2D(r)}isClosedPathIn3D(e){return K(0),!1}hasNonLinearSegmentsPath(e){if(!this.hasNonLinearSegments())return!1;for(let i=this.getPathStart(e),s=this.getPathEnd(e);i<s;i++)if(pa.isNonLinearSegmentFlag(this.m_curveData.m_segmentFlags.read(i)))return!0;return!1}isNonLinearSegment(e){return!(1&this.getSegmentFlags(e))}addEnvelope(e,i){if(e.isEmpty())return;const s=this.m_pointCount===0;if(e instanceof xe)this.startPathCoords(e.xmin,e.ymin),i?(this.lineToCoords(e.xmax,e.ymin),this.lineToCoords(e.xmax,e.ymax),this.lineToCoords(e.xmin,e.ymax)):(this.lineToCoords(e.xmin,e.ymax),this.lineToCoords(e.xmax,e.ymax),this.lineToCoords(e.xmax,e.ymin));else{const n=e.getDescription(),r=fy(),o=new Ht({vd:n,attribBuffer:r,initDefaultValues:!1});for(let l=0,c=4;l<c;l++){const f=i?c-l-1:l;e.queryCornerByVal(f,o),l===0?this.startPathPoint(o):this.lineToPoint(o)}}this.closePathWithLine(),this.m_bPathStarted=!1,s&&!i&&(this.setDirtyFlagProtected(256,!1),this.m_bPolygon&&Math.min(e.width(),e.height())>0&&this.setIsSimple(3,0))}addPathFromClosedSegment(e,i){if(e.isClosed()||Je("add_path_from_closedSegment: segment must be closed"),i){const s=e.getReversed(),n=new Ht;s.queryStart(n),this.startPathPoint(n),this.closeLastPathWithSegment(s)}else{const s=new Ht;e.queryStart(s),this.startPathPoint(s),this.closeLastPathWithSegment(e)}}addSegment_(e,i){const s=e.getDescription();this.mergeVertexDescription(s);const n=fy(),r=new Ht({vd:s,attribBuffer:n,initDefaultValues:!1}),o=e.getGeometryType();if(o===me.enumLine)(i||this.isEmptyImpl())&&(e.queryStart(r),this.startPathPoint(r)),e.queryEnd(r),this.lineToPoint(r);else{let l=!1;if((i||this.isEmptyImpl())&&(l=!0),!l&&(e.getStartXY().equals(this.getXY(this.m_pointCount-1))||Je("add_segment: start point mismatch")),l&&(e.queryStart(r),this.startPathPoint(r)),this.beforeNewSegment(1),e.queryEnd(r),r.getDescription()===this.m_description)this.setPointByVal(this.m_pointCount-1,r);else{const y=fy(),_=new Ht({vd:this.m_description,attribBuffer:y,initDefaultValues:!1});r.copyCommonAttributesTo(_),this.setPointByVal(this.m_pointCount-1,_)}const c=xN(e);this.initSegmentData(c),this.m_curveData.m_segmentParamIndex.write(this.m_pointCount-2,this.m_curveData.m_curveParamWritePoint),e.writeInBufferStream(this.m_curveData.m_segmentParams,this.m_curveData.m_curveParamWritePoint),this.m_curveData.m_curveParamWritePoint+=c;const f=Kf.toSegType(o);this.incCurveType(f,1),this.modifyCurveCounter(1),this.m_curveData.m_segmentFlags.write(this.m_pointCount-2,f)}}addSegment(e,i,s){s?i?this.addPathFromClosedSegment(e,!1):this.closeLastPathWithSegment(e):this.addSegment_(e,i)}interpolateAttributesRange(e,i,s,n){for(let l=e;l<s-1;l++)this.isClosedPath(l)&&Je("cannot interpolate across closed paths");const r=this.m_description.getAttributeCount();if(r===1)return;const o=this.calculateSubLength2D(e,i,s,n);if(o!==0)for(let l=1;l<r;l++){const c=this.m_description.getSemantics(l);this.interpolateAttributesSemanticsImpl(c,e,i,s,n,o)}}interpolateAttributesSemantics(e,i,s,n,r){if(e===0)return;this.hasAttribute(e)||Je("does not have the given attribute"),Qi.getInterpolation(e)===2&&Je("angular interpolation");for(let l=i;l<n-1;l++)this.isClosedPath(l)&&Je("cannot interpolate across closed paths");const o=this.calculateSubLength2D(i,s,n,r);o!==0&&this.interpolateAttributesSemanticsImpl(e,i,s,n,r,o)}interpolateAttributesPath(e,i,s){const n=this.m_description.getAttributeCount();if(n===1||i===s)return;const r=this.calculatePathSubLength2D(e,i,s);for(let o=1;o<n;o++){const l=this.m_description.getSemantics(o);this.interpolateAttributesSemanticsPathImpl(l,e,i,s,r)}}interpolateAttributesSemanticsPath(e,i,s,n){if(e===0)return;this.hasAttribute(e)||Je("does not have the given attribute"),Qi.getInterpolation(e)===2&&Je("angular interpolation");const r=this.calculatePathSubLength2D(i,s,n);r!==0&&this.interpolateAttributesSemanticsPathImpl(e,i,s,n,r)}interpolateAttributesSemanticsImpl(e,i,s,n,r,o){const l=this.querySegmentIterator(),c=this.getPathStart(i)+s,f=this.getPathStart(n)+r,y=Qi.getComponentCount(e),_=new Array(Qi.maxComponentCount());this.queryAttributeAsDbl(e,c,_,y);const x=new Array(Qi.maxComponentCount());this.queryAttributeAsDbl(e,f,x,y);const S=new Array(Qi.maxComponentCount());dn(S,_,0,0,y);let P=0;const A=Qi.getDefaultValue(e),k=Qi.getInterpolation(e);l.resetToVertex(c,i);do if(l.hasNextSegment()){if(l.nextSegment(),l.getStartPointIndex()===f)return;this.setAttributeFromArray(e,l.getStartPointIndex(),S,y),l.previousSegment();do{const $=l.nextSegment();if(l.getEndPointIndex()===f)return;P+=$.calculateLength2D(),ez(k,_,x,S,0,y,P/o,A),l.isClosingSegment()||this.setAttributeFromArray(e,l.getEndPointIndex(),S,y)}while(l.hasNextSegment())}while(l.nextPath())}interpolateAttributesSemanticsPathImpl(e,i,s,n,r){const o=this.querySegmentIterator(),l=Qi.getInterpolation(e),c=this.getPathStart(i)+s,f=this.getPathStart(i)+n;if(f===c)return;const y=Qi.getComponentCount(e),_=new Array(Qi.maxComponentCount());this.queryAttributeAsDbl(e,c,_,y);const x=new Array(Qi.maxComponentCount());this.queryAttributeAsDbl(e,f,x,y);const S=new Fr(0);o.resetToVertex(c,i),o.setCirculator(this.isClosedPath(i));const P=Qi.getDefaultValue(e),A=new Array(Qi.maxComponentCount());dn(A,_,0,0,y);const k=r===0;let $=.5;do{const F=o.nextSegment();if(this.setAttributeFromArray(e,o.getStartPointIndex(),A,y),!k){const G=F.calculateLength2D();S.pe(G),$=S.getResult()/r}ez(l,_,x,A,0,y,$,P)}while(o.getEndPointIndex()!==f)}querySegment(e,i,s){const n=this.getPathIndexFromPointIndex(e),r=e-this.getPathStart(n);r>=this.getSegmentCountPath(n)&&Je("get_segment"),this.getSegmentFromPath(n,r,i,s)}getSegment(e,i){const s=new this.m_segmentBufferCTor;return this.getSegmentBuffer(e,s,i),s.releaseSegment()}getSegmentType(e){const i=this.getPathIndexFromPointIndex(e),s=e-this.getPathStart(i);return s>=this.getSegmentCountPath(i)&&Je("get_segment"),this.getSegmentTypeFromPath(i,s)}getSegmentFromPath(e,i,s,n){const r=this.getPathStart(e)+i,o=this.getSegmentFlagsStreamRef();let l=1;switch(o&&(l=31&o.read(r)),l){case 1:s.createLine();break;case 2:s.createCubicBezier();break;case 4:s.createEllipticArc();break;case 8:s.createQuadraticRationalBezier();break;case 16:s.createQuadraticBezier();break;default:bt("")}const c=s.get();let f,y=null;if(n?(y=jo(),c.assignVertexDescription(y)):c.assignVertexDescription(this.m_description),f=r===this.getPathEnd(e)-1&&this.isClosedPath(e)?this.getPathStart(e):r+1,yj(c,this.getXY(r)),vj(c,this.getXY(f)),!n)for(let _=1,x=this.m_description.getAttributeCount();_<x;_++){const S=this.m_description.getSemantics(_),P=Qi.getComponentCount(S);for(let A=0;A<P;A++){const k=this.getAttributeAsDbl(S,r,A);c.setStartAttribute(S,A,k);const $=this.getAttributeAsDbl(S,f,A);c.setEndAttribute(S,A,$)}}if(pa.isNonLinearSegmentFlag(l)){const _=this.m_curveData.m_segmentParamIndex.read(r);c.readFromBufferStream(this.m_curveData.m_segmentParams,_)}}replaceLinearEllipticalArcsWithTrueLines(){if(!this.hasNonLinearSegments()||this.m_curveData.m_arcCount===0)return!1;let e=!1;for(let i=0,s=this.getPointCount();i<s;i++)if(this.m_curveData.m_segmentFlags.read(i)===4){const n=this.m_curveData.m_segmentParamIndex.read(i);NJe(this.m_curveData.m_segmentParams,n).isNAN()&&(this.m_curveData.m_segmentFlags.write(i,1),this.m_curveData.m_segmentParamIndex.write(i,-1),this.incCurveType(4,-1),this.modifyCurveCounter(-1),e=!0)}return e&&this.checkCompactSegmentParams(),e}queryPointAlongPath(e,i,s,n=!1){const r={iSegment:-1},o=n?r:{tSegment:0};if(s.setEmpty(),this.isEmpty()||((e<0||e>=this.getPathCount())&&Je("query_point_along_path"),i<0))return r;const l=this.getPathSize(e);if(l===0)return r;if(l===1)return this.getPointByVal(this.getPathStart(e),s),o.tSegment=0,r.iSegment=this.getPathStart(e),r;const c=this.querySegmentIteratorAtVertex(this.getPathStart(e)),f=new Fr(0);for(;c.hasNextSegment();){const y=c.nextSegment(),_=y.calculateLength2D(),x=f.getResult();if(f.add(_),f.getResult()>=i){let S=i-x;S>_&&(S=_);const P=y.lengthToT(S);return y.queryCoord(P,s),o.tSegment=P,r.iSegment=c.getStartPointIndex(),r}}if(this.isClosedPath(e)){const y=this.getPathStart(e);return this.getPointByVal(y,s),o.tSegment=1,r.iSegment=this.getPathEnd(e)-1,r}{const y=this.getPathEnd(e)-1;return this.getPointByVal(y,s),this.getPathSize(e)>1?(o.tSegment=1,r.iSegment=this.getPathEnd(e)-2,r):(o.tSegment=0,r.iSegment=this.getPathStart(e),r)}}queryPointsAlongPath(e,i,s,n,r,o){{let P=0;for(let A=0;A<i;++A)n&&n[A].setEmpty(),r&&(r[A]=-1),o&&(o[A]=0),P>s[A]&&Je("query_points_along"),P=s[A]}const l=this.getPathSize(e);if(i===0||l===0)return 0;if(l===1){const P=this.getPathStart(e);return n&&this.getPointByVal(P,n[0]),o&&(o[0]=0),r&&(r[0]=P),1}const c=this.getPathStart(e),f=new Fr(0),y=this.querySegmentIteratorAtVertex(c);let _=0,x=0,S=s[_];for(;y.hasNextSegment();){const P=y.nextSegment(),A=P.calculateLength2D(),k=f.getResult();for(f.add(A);f.getResult()>=S;){let $=S-k;$>A&&($=A);const F=P.lengthToT($);if(n&&P.queryCoord(F,n[x]),o&&(o[x]=F),r&&(r[x]=y.getStartPointIndex()),x++,_++,S=s[_],_===i)return x}}if(this.isClosedPath(e)){const P=this.getPathStart(e),A=0;n&&this.getPointByVal(P,n[x]),o&&(o[x]=A),r&&(r[x]=P),x++}else if(this.getPathSize(e)>1){const P=this.getPathEnd(e)-2,A=1;n&&this.getPointByVal(P+1,n[x]),o&&(o[x]=A),r&&(r[x]=P),x++}return x}queryPointsAlong(e,i,s,n,r){{let x=0;for(let S=0;S<e;++S)s&&s[S].setEmpty(),n&&(n[S]=-1),r&&(r[S]=0),x>i[S]&&Je("query_points_along"),x=i[S]}if(e===0)return 0;const o=new Fr(0),l=this.querySegmentIterator();let c=-1,f=0,y=0,_=i[f];for(;l.nextPath();)for(;l.hasNextSegment();){c=l.getPathIndex();const x=l.nextSegment(),S=x.calculateLength2D(),P=o.getResult();for(o.add(S);o.getResult()>=_;){let A=_-P;A>S&&(A=S);const k=x.lengthToT(A);if(s&&x.queryCoord(k,s[y]),r&&(r[y]=k),n&&(n[y]=l.getStartPointIndex()),y++,f++,_=i[f],f===e)return y}}if(c<0)return 0;if(this.isClosedPath(c)){const x=this.getPathStart(c),S=0;s&&this.getPointByVal(x,s[y]),r&&(r[y]=S),n&&(n[y]=x),y++}else if(this.getPathSize(c)>1){const x=this.getPathEnd(c)-2,S=1;s&&this.getPointByVal(x+1,s[y]),r&&(r[y]=S),n&&(n[y]=x),y++}return y}querySegmentIterator(){return new bN({parent:this})}querySegmentIteratorAtVertex(e){return new bN({parent:this,pointIndex:e})}queryPathEnvelope(e,i){this.queryPathEnvelopeImpl(e,i,!0)}queryLoosePathEnvelope(e,i){this.queryPathEnvelopeImpl(e,i,!1)}queryPathEnvelopeImpl(e,i,s){if(i instanceof lr&&K(0,"not implemented for Envelope"),i instanceof tl&&K(0,"not implemented for Envelope3D"),(e>=this.getPathCount()||e<0)&&Je(""),this.isEmpty())return void i.setEmpty();const n=this.getAttributeStreamRef(0),r=xe.constructEmpty();r.setEmpty();for(let o=2*this.getPathStart(e),l=2*this.getPathEnd(e);o<l;){const c=l-o;K(!(1&c)),r.mergePointsInterleaved(n,o/2,c/2),o+=c}if(i.setCoords({env2D:r}),this.hasNonLinearSegmentsPath(e)){const o=this.querySegmentIterator();if(o.resetToPath(e),o.nextPath())for(;o.hasNextSegment();){const l=o.nextCurve();if(!l)break;{const c=xe.constructEmpty();s?l.queryEnvelope(c):l.queryLooseEnvelope(c),i.mergeEnvelope2D(c)}}else K(0)}}checkCompactSegmentParams(){if(!this.m_curveData||this.m_curveData.m_segmentParams===null||this.m_curveData.m_segmentParams.size()<=this.m_vertexAttributes.get(0).size())return!1;const e=10,i=lc(4)*this.m_curveData.m_arcCount+lc(2)*this.m_curveData.m_bezierCount+lc(8)*this.m_curveData.m_rbezier2Count+lc(16)*this.m_curveData.m_bezier2Count;return this.m_curveData.m_segmentParams.size()>Math.max(3*i>>1,e)?(this.forceCompactSegmentParams(),!0):(this.m_pointCount===0&&(this.m_curveData.m_curveParamWritePoint=0),!1)}forceCompactSegmentParams(){let e=0;for(let n=0,r=this.getPointCount();n<r;n++){const o=this.m_curveData.m_segmentFlags.read(n);pa.isNonLinearSegmentFlag(o)&&(e+=lc(o))}const i=My(e);let s=0;for(let n=0,r=this.getPointCount();n<r;n++){const o=this.m_curveData.m_segmentFlags.read(n);if(pa.isNonLinearSegmentFlag(o)){let l=this.m_curveData.m_segmentParamIndex.read(n);this.m_curveData.m_segmentParamIndex.write(n,s);const c=lc(o);for(let f=0;f<c;f++)i.write(s,this.m_curveData.m_segmentParams.read(l)),s++,l++}}this.m_curveData.m_segmentParams=i,this.m_curveData.m_curveParamWritePoint=s}setPathsFromJsonArrays(e,i,s){K(i===!1),K(e===!1),this.setEmpty();const n=s.length;if(n===0)return;let r=0;for(const x of s)r+=x.length;const o=this.getGeometryType()===me.enumPolygon,l=new nd(2*r),c=new Ns(n+1);let f=0,y=0;for(let x=0;x<n;++x){c.write(x,f);const S=s[x],P=S.length;for(let A=0;A<P;++A)l.write(y++,S[A][0]),l.write(y++,S[A][1]);o&&P>2&&l.read(2*f)===l.read(y-2)&&l.read(2*f+1)===l.read(y-1)&&(y-=2,r--,f--),f+=s[x].length}c.write(n,r);const _=new gv(c.size());_.setRange(this.getGeometryType()===me.enumPolygon?1:0,0,n),_.write(n,0),this.setAttributeStreamRef(0,l),this.setPathFlagsStreamRef(_),this.setPathStreamRef(c),this.notifyModifiedFlags(65535)}setEmpty(){this.m_curveData&&(this.removeAllCurvesFromGlobalCounter(),this.m_curveData=null),this.m_bPathStarted=!1,this.m_paths=null,this.m_pathFlags=null,this.setEmptyImpl()}applyTransformation(e){this.applyTransformationToPath(e,-1)}applyTransformation3D(e){K(0)}getImpl(){return this}reserve(e){this.reserveImpl(e),e>0&&!this.m_paths&&(this.m_paths=Ga(0),this.m_pathFlags=M0(0),this.m_paths.reserve(2),this.m_pathFlags.reserve(2),this.m_paths.resize(1,0),this.m_pathFlags.resize(1,0))}reserveParts(e,i){this.reserveImpl(e),i>0&&(this.m_paths?(this.m_paths.reserve(i+1),this.m_pathFlags.reserve(i+1)):(this.m_paths=Ga(0),this.m_pathFlags=M0(0),this.m_paths.reserve(i+1),this.m_pathFlags.reserve(i+1),this.m_paths.resize(1,0),this.m_pathFlags.resize(1,0)))}clone(){const e=this.createInstance();return this.copyTo(e),e}createShallowClone(){return K(0),this}queryLimitedSegmentIterator(e){return new xet(this,e)}getPathStreamRef(){return this.throwIfEmpty(),this.m_paths}setPathStreamRef(e){this.m_paths=e}getSegmentFlagsStreamRef(){return this.throwIfEmpty(),this.m_curveData!=null?this.m_curveData.m_segmentFlags:null}getPathFlagsStreamRef(){return this.throwIfEmpty(),this.m_pathFlags}setPathFlagsStreamRef(e){this.m_pathFlags=e}getSegmentIndexStreamRef(){return this.throwIfEmpty(),this.m_curveData!==null?this.m_curveData.m_segmentParamIndex:null}getSegmentDataStreamRef(){return this.throwIfEmpty(),this.m_curveData!==null?this.m_curveData.m_segmentParams:null}setSegmentData(e,i,s,n){this.m_curveData||(this.m_curveData=new Kf),this.m_curveData.m_segmentFlags=s,this.m_curveData.m_segmentParams=i,this.m_curveData.m_segmentParamIndex=e,this.m_curveData.m_curveParamWritePoint=n}static getPathIndexFromPointIndexImpl(e,i,s,n){if(n>=0&&n<i){if(s>=e.read(n)){if(s<e.read(n+1))return n;n++}else n--;if(n>=0&&n<i&&s>=e.read(n)&&s<e.read(n+1))return n}if(i<5){for(let l=0;l<i;l++)if(s<e.read(l+1))return l;hge("")}let r=0,o=i-1;for(;o>r;){const l=r+(o-r>>1);if(s<e.read(l))o=l-1;else{if(!(s>=e.read(l+1)))return l;r=l+1}}return r}getHighestPointIndex(e){K(e>=0&&e<this.getPathCount());const i=this.getAttributeStreamRef(0),s=this.getPathEnd(e),n=this.getPathStart(e);let r=-1;const o=new Y;o.y=Number.NEGATIVE_INFINITY,o.x=Number.NEGATIVE_INFINITY;for(let l=n+0;l<s;l++){const c=i.readPoint2D(2*l);o.compare(c)===-1&&(r=l,o.setCoordsPoint2D(c))}return r}applyTransformationToPath(e,i){if(i>=this.getPathCount()&&Je("apply_transformation"),this.isEmpty()||e.isIdentity())return;const s=this.m_vertexAttributes.get(0);if(!(i<0?this.hasNonLinearSegments():this.hasNonLinearSegmentsPath(i))){let l,c;return i<0?(l=0,c=this.m_pointCount):(l=this.getPathStart(i),c=this.getPathEnd(i)),s.applyTransformation(e,2*l,c-l),void this.notifyModifiedFlags(2001)}const n=new this.m_segmentBufferCTor,r=this.getPathCount();let o=i<0?0:i;do{const l=this.getPathStart(o),c=this.getPathEnd(o),f=this.isClosedPath(o),y=s.readPoint2D(2*l);if(!this.hasNonLinearSegmentsPath(o)){s.applyTransformation(e,2*l,c-l);continue}const _=Y.getNAN();for(let x=l;x<c;++x){if((31&this.m_curveData.m_segmentFlags.read(x))!==1){const P=f&&x+1===c;P&&s.writePoint2D(2*l,y),this.getSegmentBuffer(x,n,!0),n.get().applyTransformation(e);const A=this.m_curveData.m_segmentParamIndex.read(x);n.get().writeInBufferStream(this.m_curveData.m_segmentParams,A),s.writePoint2D(2*x,n.get().getStartXY()),P&&s.writePoint2D(2*l,n.get().getEndXY());continue}const S=2*x;s.queryPoint2D(S,_),e.transformInPlace(_),s.writePoint2D(S,_)}if(o===i)break}while(++o<r);this.notifyModifiedFlags(2001)}calculateSubLength2D(e,i,s,n){const r=this.getPathStart(e)+i,o=this.getPathStart(s)+n;(o<r||r<0||o>this.getPointCount()-1)&&bn("");const l=this.querySegmentIterator();let c=0;l.resetToVertex(r,e);do{for(;l.hasNextSegment();){const f=l.nextSegment();if(l.getStartPointIndex()===o)break;c+=f.calculateLength2D()}if(l.getStartPointIndex()===o)break}while(l.nextPath());return c}calculatePathSubLength2D(e,i,s){const n=this.getPathStart(e)+i,r=this.getPathStart(e)+s;(n<0||r>this.getPointCount()-1)&&bn("");const o=this.querySegmentIterator();if(n>r&&(this.isClosedPath(e)||Je("cannot iterate across an open path"),o.setCirculator(!0)),n===r)return 0;let l=0,c=0;o.resetToVertex(n,e);do c+=l,l=o.nextSegment().calculateLength2D();while(o.getStartPointIndex()!==r);return c}calculateEnvelope2D(e){return K(0),new xe(0,0,0,0)}updateXYImpl(e){const i=super.updateXYImpl(e);if(this.hasNonLinearSegments()){const s=xe.constructEmpty(),n=this.querySegmentIterator();for(;n.nextPath();)for(;n.hasNextSegment();){const r=n.nextCurve();if(!r)break;e?r.queryEnvelope(s):r.queryLooseEnvelope(s),i.mergeEnvelope2D(s)}}return i}notifyModifiedAllImpl(){this.m_paths!==null&&this.m_paths.size()?this.m_pointCount=this.m_paths.read(this.m_paths.size()-1):this.m_pointCount=0}setDirtyOGCFlags(e){this.setDirtyFlagProtected(16,e)}hasDirtyOGCStartFlags(){return this.hasDirtyFlag(16)}setDirtyRingAreas2D(e){this.setDirtyFlagProtected(1024,e)}hasDirtyRingAreas2D(){return this.hasDirtyFlag(1024)}static isNonLinearSegmentFlag(e){return!(1&e)}addAndExplicitlyOpenAllPaths(e,i){this===e&&Je("Multi_path_impl::add");let s=this.getPathCount();for(let n=0,r=e.getPathCount();n<r;n++)this.addPath(e,n,!i),this.openPathAndDuplicateStartVertex(s),s++}getSegmentFlags(e){return this.m_curveData!==null&&this.m_curveData.m_segmentFlags!==null?this.m_curveData.m_segmentFlags.read(e):1}getSegmentBuffer(e,i,s){const n=this.getPathIndexFromPointIndex(e),r=e-this.getPathStart(n);r>=this.getSegmentCountPath(n)&&Je("getSegmentBuffer"),this.getSegmentFromPath(n,r,i,s)}getSegmentTypeFromPath(e,i){const s=this.getPathStart(e)+i,n=this.getSegmentFlagsStreamRef();let r=1;switch(n&&(r=31&n.read(s)),r){case 1:return me.enumLine;case 2:return me.enumBezier;case 4:return me.enumEllipticArc;case 8:return me.enumRationalBezier2;case 16:return me.enumBezier2;default:bt("")}}ensureXYMonotoneSegments(){if(!this.m_curveData)return!1;let e=!1;for(let i=0,s=this.getPathCount();i<s;i++){const n=this.getPathStart(i),r=this.getPathEnd(i),o=r-n;for(let l=n;l<r;l++){const c=31&this.m_curveData.m_segmentFlags.read(l);if(c===1)continue;c!==2&&js("ensure_xy_monotone_segments");const f=(l-n+1)%o+n,y=this.m_curveData.m_segmentParamIndex.read(l),_=Ge(Y,4);_[0]=this.getXY(l),_[3]=this.getXY(f),_[1].x=this.m_curveData.m_segmentParams.read(y),_[1].y=this.m_curveData.m_segmentParams.read(y+1),_[2].x=this.m_curveData.m_segmentParams.read(y+2),_[2].y=this.m_curveData.m_segmentParams.read(y+3),r7(_)&&(e=!0,this.m_curveData.m_segmentParams.write(y,_[1].x),this.m_curveData.m_segmentParams.write(y+1,_[1].y),this.m_curveData.m_segmentParams.write(y+2,_[2].x),this.m_curveData.m_segmentParams.write(y+3,_[2].y))}}return e&&this.notifyModifiedFlags(2001),e}buildRasterizedGeometryAccelerator(e,i){return!1}buildQuadTreeAccelerator(e){if(this.m_accelerators||(this.m_accelerators=new A6),this.m_accelerators.getQuadTree()!==null)return!0;this.ensureUniqueAccelerators(),this.m_accelerators.setQuadTree(null);const i=z2(this);return this.m_accelerators.setQuadTree(i),!0}buildQuadTreeForPathsAccelerator(e){if(this.m_accelerators||(this.m_accelerators=new A6),this.m_accelerators.getQuadTreeForPaths()!==null)return!0;this.ensureUniqueAccelerators(),this.m_accelerators.setQuadTreeForPaths(null);const i=fJe(this);return this.m_accelerators.setQuadTreeForPaths(i),!0}updateCurveCounter(e){this.modifyCurveCounter(e-this.getCurveCount())}removeAllCurvesFromGlobalCounter(){this.m_curveData&&(pa.st_totalCurveCount-=this.m_curveData.m_curveCount,this.m_curveData.m_curveCount=0,this.m_curveData.m_bezierCount=0,this.m_curveData.m_arcCount=0,this.m_curveData.m_bezier2Count=0,this.m_curveData.m_rbezier2Count=0,this.m_curveData.m_curveParamWritePoint=0)}modifyCurveCounter(e){e&&(this.m_curveData||(this.m_curveData=new Kf),pa.st_totalCurveCount+=e,this.m_curveData.m_curveCount+=e)}getCurveCount(){return this.m_curveData?this.m_curveData.m_curveCount:0}incCurveType(e,i){this.m_curveData||(this.m_curveData=new Kf),2&e?this.m_curveData.m_bezierCount+=i:4&e?this.m_curveData.m_arcCount+=i:8&e?this.m_curveData.m_rbezier2Count+=i:16&e&&(this.m_curveData.m_bezier2Count+=i)}getCurveWritePoint(){return K(0),0}initSegmentData(e){this.m_curveData===null&&(this.m_curveData=new Kf);const i=this.m_reservedPointCount>0?this.m_reservedPointCount:this.m_pointCount;this.m_curveData.m_segmentParamIndex===null&&(this.m_curveData.m_segmentFlags=M0(i,1),this.m_curveData.m_segmentParamIndex=Ga(i,-1));const s=this.m_curveData.m_curveParamWritePoint+e;this.m_curveData.m_segmentParams===null?this.m_curveData.m_segmentParams=My(s):s!==this.m_curveData.m_segmentParams.size()&&this.m_curveData.m_segmentParams.resize(s,0),this.m_curveData.m_segmentFlags.size()<i&&(this.m_curveData.m_segmentFlags.resize(i,1),this.m_curveData.m_segmentParamIndex.resize(i,-1))}updateCurveWritePoint(e){this.m_curveData===null&&(this.m_curveData=new Kf),this.m_curveData.m_curveParamWritePoint=e}updateOGCFlagsHelper(){const e=this.getPathCount();if(e===0)return;const i=this.m_pathFlags;let s=0;for(let n=0;n<e;n++){const r=this.m_cachedRingAreas2D.read(n);s===0&&(s=xn(r)),r*s>0||s===0?i.setBits(n,8):i.clearBits(n,8)}}updateOGCFlagsProtected(){this.hasDirtyFlag(16)&&(this.updateRingAreas2DProtected(),this.updateOGCFlagsHelper(),this.setDirtyFlagProtected(16,!1))}replaceSegment(e,i,s){(e<0||e>=this.getPointCount())&&Je("Multi_path_impl.replace_segment"),K(i.isCurve());const n=this.getPathIndexFromPointIndex(e),r=this.getPathStart(n),o=(e-r+1)%this.getPathSize(n)+r;{const $=this.getXY(e),F=this.getXY(o),G=!$.isEqualPoint2D(i.getStartXY())||!F.isEqualPoint2D(i.getEndXY());K(!G)}const l=i.getDescription();this.mergeVertexDescription(l);const c=new Array(32),f=new Ht({vd:l,attribBuffer:c,initDefaultValues:!1}),y=this.m_curveData===null?1:31&this.m_curveData.m_segmentFlags.read(e),_=lc(y),x=xN(i);let S,P=!1;_>=x?(K(this.m_curveData!==null),P=!0,S=this.m_curveData.m_segmentParamIndex.read(e)):(this.initSegmentData(x),P=!1,S=this.m_curveData.m_curveParamWritePoint);const A=i.getGeometryType(),k=Kf.toSegType(A);s||(i.queryStart(f),this.setPointByVal(e,f),i.queryEnd(f),this.setPointByVal(o,f)),this.m_curveData.m_segmentParamIndex.write(e,k!==1?S:-1),this.m_curveData.m_segmentFlags.write(e,k),k!==1&&i.writeInBufferStream(this.m_curveData.m_segmentParams,S),P||(this.m_curveData.m_curveParamWritePoint+=x),y!==k&&(this.incCurveType(y,-1),this.incCurveType(k,1),this.modifyCurveCounter(y===1?1:-1))}verifyPathIndex(e){K(0)}setAttributeImpl(e,i,s){if(this.addAttribute(e),!this.isEmpty())if(this.hasNonLinearSegments()&&e===0){(i<0||i>1)&&Je("");const n=new _i,r=i===0?s:0,o=i===0?0:1;n.setShiftCoords(r,o),i===0?n.xx=0:n.yy=0,this.applyTransformation(n)}else super.setAttributeImpl(e,i,s)}}pa.st_totalCurveCount=0;class xet{constructor(e,i){this.m_segIter=null,this.m_quadTree=null,this.m_qtIter=null,this.m_extentOfInterest=new xe(i),this.m_bfirst=!0,this.m_prevIndex=-100,this.m_parent=e}nextSegment(){return this.m_bfirst&&this.prepare_(),this.m_quadTree?this.nextSegmentQt():this.nextSegmentNoQt()}getPathIndex(){return this.m_segIter.getPathIndex()}getStartPointIndex(){return this.m_segIter.getStartPointIndex()}getEndPointIndex(){return this.m_segIter.getEndPointIndex()}isClosingSegment(){return this.m_segIter.isClosingSegment()}isPathClosed(){return this.m_segIter.isPathClosed()}prepare_(){const e=this.m_parent.getAccelerators();e&&(this.m_quadTree=e.getQuadTree(),this.m_quadTree&&(this.m_qtIter=this.m_quadTree.getSortedIterator(this.m_extentOfInterest,0))),this.m_segIter=this.m_parent.querySegmentIterator()}nextSegmentQt(){this.m_bfirst=!1;const e=this.m_qtIter.next();if(e===-1)return null;const i=this.m_quadTree.getElement(e);return(i!==this.m_prevIndex+1||this.m_segIter.isLastSegmentInPath())&&(this.m_segIter.resetToVertex(i,this.m_segIter.getPathIndex()),this.m_prevIndex=i),this.m_segIter.nextSegment()}nextSegmentNoQt(){for(;;){if(!this.m_bfirst&&this.m_segIter.hasNextSegment()){const e=this.m_segIter.nextSegment(),i=xe.constructEmpty();if(e.queryLooseEnvelope(i),!i.isIntersecting(this.m_extentOfInterest))continue;return e}if(this.m_bfirst=!1,!this.m_segIter.nextPath())return null}}}class vi extends pa{constructor(e){e?e.vd?(super({vd:e.vd,bPolygon:!1}),this.m_segmentBufferCTor=Qt):e.copy?(super({vd:e.copy.getDescription(),bPolygon:!1}),this.m_segmentBufferCTor=Qt,e.copy.copyTo(this)):e.move?(super({move:e.move}),this.m_segmentBufferCTor=Qt):e.start?(super({vd:e.start.getDescription(),bPolygon:!1}),this.m_segmentBufferCTor=Qt,this.startPathPoint(e.start),this.lineToPoint(e.end)):e.path?(super({bPolygon:!1}),this.m_segmentBufferCTor=Qt,this.addPathPoint2D(e.path,e.pointCount,e.bForward)):K(0):(super({bPolygon:!1}),this.m_segmentBufferCTor=Qt)}getBoundary(){return Xh(this)}assignCopy(e){return this!==e&&e.copyTo(this),this}assignMove(e){return e.copyTo(this),this}getGeometryType(){return vi.type}getDimension(){return 1}createInstance(){return new vi({vd:this.getDescription()})}equals(e,i){return this.equalsBase(e,i)}}vi.type=me.enumPolyline;var eg=me;function Rb(t,e){if(t.isEmpty())return!1;const i=t.getGeometryType();if(i===eg.enumPolygon)return t.calculateArea2D()!==0;if(i===eg.enumPolyline)return p1e(t.getImpl(),e,!0).bNotEmpty;if(i===eg.enumEnvelope)return!0;if(Dn(i))return!!t.isClosed();if(Ig(i))return!1;if(i===eg.enumGeometryCollection){const s=t;for(let n=0,r=s.getGeometryCount();n<r;n++)if(Rb(s.getGeometry(n),e))return!0;return!1}js("")}function Xh(t,e){const i=t.getGeometryType();if(i===eg.enumPolygon){const s=new vi({vd:t.getDescription()});return t.isEmpty()||t.copyToUnchecked(s),s}if(i===eg.enumPolyline)return p1e(t.getImpl(),e,!1).boundary;if(i===eg.enumEnvelope){const s=new vi({vd:t.getDescription()});return t.isEmpty()||s.addEnvelope(t,!1),s}if(Dn(i)){const s=new Jn({vd:t.getDescription()});if(!t.isEmpty()&&!t.isClosed()){const n=new Ht;s.reserve(2),t.queryStart(n),s.add(n),t.queryEnd(n),s.add(n)}return s}if(i===eg.enumGeometryCollection){const s=t;let n=null;for(let r=0,o=s.getGeometryCount();r<o;r++){const l=Xh(s.getGeometry(r),e);if(l!==null){n===null&&(n=t.createInstance());const c=l;n.addGeometry(c)}}return n}if(Ig(i))return new Ht({vd:t.getDescription()});js("")}function p1e(t,e,i){const n=t;let r=null;if(i||(r=new Jn({vd:n.getDescription()})),!n.isEmpty()){const o=new Ns(0);for(let l=0,c=n.getPathCount();l<c;l++)if(n.getPathSize(l)>0&&!n.isClosedPathInXYPlane(l)){const f=n.getPathStart(l);o.add(f);const y=n.getPathEnd(l)-1;o.add(y)}if(o.size()>0){const l=new rd,c=n.getAttributeStreamRef(0),f={userSort(P,A,k){const $=Y.getNAN(),F=Y.getNAN();k.sort(P,A,(G,V)=>(c.queryPoint2D(2*G,$),c.queryPoint2D(2*V,F),$.compare(F)))},getValue:P=>c.read(2*P+1)};l.sort(o,0,o.size(),f);let y=c.readPoint2D(2*o.read(0)),_=0,x=1;const S=new Ht;for(let P=1,A=o.size();P<A;P++){const k=c.readPoint2D(2*o.read(P));if(k.isEqualPoint2D(y))o.read(_)>o.read(P)?(o.write(_,ya()),_=P):o.write(P,ya()),x++;else{if(1&x){if(i)return{bNotEmpty:!0,boundary:new Jn({})}}else o.write(_,ya());y=k,_=P,x=1}}if(1&x){if(i)return{bNotEmpty:!0,boundary:new Jn({})}}else o.write(_,ya());if(!i){o.sort(0,o.size());for(let P=0,A=o.size();P<A&&o.read(P)!==ya();P++)n.getPointByVal(o.read(P),S),r.add(S)}}}return i?{bNotEmpty:!1,boundary:new Jn({})}:{bNotEmpty:!1,boundary:r}}const wet=hj/180,Eet=180/hj;function Cet(t){let e=t;return e>=-360&&e<720?(e<0?e+=360:e>=360&&(e-=360),e):(e=Mg(e,360),e<0&&(e+=360),e)}function m1e(t){let e=t;return e=Cet(e),e>180&&(e-=360),e}function g1e(t){return t*wet}function O9(t){return t*Eet}function y1e(t){const e=Vo();let i=t;return i>=-e&&i<2*e?(i<0&&(i+=e),i>=e&&(i-=e),i):(i=Mg(i,e),i<0&&(i+=e),i)}function rie(t){const e=ki();let i=t;return i>-e&&i<=e||(i=y1e(i),i>e&&(i-=Vo())),i}function oie(t,e){return m1e(e-t)}var s3=vr;class zu extends o5{constructor(e){if(e===void 0||WA(e,"vd"))return super({vd:e==null?void 0:e.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_semiMajorAxis=0,this.m_minorMajorRatio=1,this.m_rotation=0,this.m_cosr=1,this.m_sinr=0,this.m_center=new Y(0,0),this.m_sweepAngle=0,this.m_startAngle=0,this.m_interior=new Y(0,0),void(this.m_bits=0);if(e.copy)return super(e),void(this!==e.copy&&(this.m_center=new Y(0,0),this.m_interior=new Y(0,0),e.copy.copyToImpl(this)));if(e.move)super(e),this.m_semiMajorAxis=e.move.m_semiMajorAxis,this.m_minorMajorRatio=e.move.m_minorMajorRatio,this.m_rotation=e.move.m_rotation,this.m_cosr=e.move.m_cosr,this.m_sinr=e.move.m_sinr,this.m_center=e.move.m_center.clone(),this.m_sweepAngle=e.move.m_sweepAngle,this.m_startAngle=e.move.m_startAngle,this.m_interior=e.move.m_interior.clone(),this.m_bits=e.move.m_bits,this.m_cachedValues=e.move.m_cachedValues,e.move.m_cachedValues=null;else{if(e.fromPoint)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_center=new Y(0,0),this.m_interior=new Y(0,0),void this.constructCircularArcThreePoint(e.fromPoint,e.toPoint,e.interiorPoint);if(e.center)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_center=new Y(0,0),this.m_interior=new Y(0,0),void this.constructCircleRadius(e.radius,e.center,e.bIsCounterClockwise);if(e.semiMajorAxis)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),void this.constructEllipticArcEndPoints(e.fromPoint,e.toPoint,e.semiMajorAxis,e.minorMajorRatio,e.axisXRotationRad,e.bBigArc,e.bIsCounterClockwise)}}getBoundary(){return Xh(this)}assignMove(e){return K(0),this}assignCopy(e){return this!==e&&e.copyTo(this),this}constructCircleRadius(e,i,s=!1){return this.constructEllipse(e,1,i,0,s),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructCircleCenterAndPoint(e,i,s=!1){const n=Y.distance(e,i);return this.constructEllipticArcEndPointsCenter(i,i,n,1,0,!0,s,e),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructTwoPointCircle(e,i,s=!1){const n=Y.lerp(e,i,.5);return this.constructCircleCenterAndPoint(n,e,s),this}constructLineEllipticArc(e,i){return jc(this,e,i,1),this}constructLineCircularArc(e,i){return jc(this,e,i,0),this}constructEllipse(e,i,s,n,r=!1){this.m_semiMajorAxis=Math.abs(e),this.m_minorMajorRatio=Math.abs(i),this.m_minorMajorRatio>1&&(this.m_semiMajorAxis*=this.m_minorMajorRatio,this.m_minorMajorRatio=1/this.m_minorMajorRatio);const o=new Y(0,this.m_minorMajorRatio*this.m_semiMajorAxis),l=Math.cos(n),c=Math.sin(n);return o.rotateDirect(l,c),o.addThis(s),this.constructEllipticArcEndPointsCenter(o,o,this.m_semiMajorAxis,this.m_minorMajorRatio,n,!0,r,s),this}inflate(e){if(this.isDegenerateToLine())return;let i=this.getSemiMinorAxis()+e;if(i=i<=0?0:(this.getSemiMajorAxis()+e)/this.getSemiMajorAxis(),this.isCircular()){const s=new _i;s.setShiftCoords(-this.m_center.x,-this.m_center.y),s.scale(i,i),s.shiftCoords(this.m_center.x,this.m_center.y),this.applyTransformation(s)}else{const s=new _i;this.canonicToWorldTransformation(s);const n=s.clone();n.invertPreciseThis(),n.scale(i,i),n.multiply(s),this.applyTransformation(n)}}constructEnclosingCircle(e,i,s=!1){return Xrt(this,e,i,s),this}constructThreePointCircle(e,i,s,n=!1){if(e.equals(i)||i.equals(s)||e.equals(s)){const r=e.clone(),o=i.clone(),l=s.clone();return r.equals(o)&&o.assign(l),this.constructTwoPointCircle(r,o,n)}{const r=Y.calculateCircleCenterFromThreePoints(e,i,s);if(!r.isFinite()||!Number.isFinite(Y.distance(e,r))){const o=Y.distance(e,i),l=Y.distance(e,s);this.constructLineCircularArc(e,o>=l?i:s)}return this.constructCircleCenterAndPoint(r,e,n)}}constructCircularArcThreePoint(e,i,s){const n=new Be(e.x),r=new Be(i.x),o=new Be(s.x),l=new Be(e.y),c=new Be(i.y),f=new Be(s.y),y=new Be(.5),_=r.subE(n),x=c.subE(l),S=o.subE(n),P=f.subE(l),A=_.mulE(P).subThisE(x.mulE(S));if(A.scaleError(10),A.isZero()){if(!_.isZero()||!x.isZero())return jc(this,e,i,0),this;{const Re=e.clone().addThis(i).mulThis(.5).addThis(s).mulThis(.5),Oe=s.sub(Re).length();this.constructEllipticArcEndPointsCenter(e,i,Oe,1,0,!0,!1,Re),this.m_interior.assign(s)}return this.setProjectionBehavior(0),this}const k=_.sqr().addThisE(x.sqr()).mulThisE(y),$=S.sqr().addThisE(P.sqr()).mulThisE(y),F=k.mulE(P).subThisE($.mulE(x)),G=_.mulE($).subThisE(S.mulE(k));F.divThisE(A),G.divThisE(A);const V=F.sqr().addThisE(G.sqr());V.sqrtThis();const B=F.addE(n),W=G.addE(l);let J=e.x-B.value(),re=e.y-W.value();const se=Math.atan2(re,J);J=i.x-B.value(),re=i.y-W.value();const oe=Math.atan2(re,J);J=s.x-B.value(),re=s.y-W.value();const pe=Math.atan2(re,J);let ue=pe-2*ki();for(;ue<se;)ue+=2*ki();let ce=oe-2*ki();for(;ce<ue;)ce+=2*ki();let ne=pe+2*ki();for(;ne>se;)ne-=2*ki();let de,Se=oe+2*ki();for(;Se>ne;)Se-=2*ki();de=ce-se<se-Se?ce-se:Se-se;const Pe=new Y(B.value(),W.value());return this.constructEllipticArcEndPointsCenter(e,i,V.value(),1,0,Math.abs(de)>ki(),de>0,Pe),this.m_interior.assign(s),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructCircularArc(e,i,s,n){return this.constructEllipticArcGeneral(e,1,i,s,n,0),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructEllipticArcEndPoints(e,i,s,n,r,o,l){return vse(this,e,i,s,n,r,o,l)}constructEllipticArcEndPointsCenter(e,i,s,n,r,o,l,c){return vse(this,e,i,s,n,r,o,l,c)}constructEllipticArcGeneral(e,i,s,n,r,o){this.m_semiMajorAxis=Math.abs(e),this.m_minorMajorRatio=Math.abs(i),this.m_minorMajorRatio>1&&(this.m_semiMajorAxis*=this.m_minorMajorRatio,this.m_minorMajorRatio=1/this.m_minorMajorRatio);const l=rie(o),c=Math.cos(l),f=Math.sin(l),y=new Y(this.m_semiMajorAxis,this.m_minorMajorRatio*this.m_semiMajorAxis),_=Y.getNAN(),x=rie(n);_.x=y.x*Math.cos(x),_.y=y.y*Math.sin(x),_.rotateDirect(c,f),_.addThis(s);const S=VKe(r,Vo());let P=S;Math.abs(P)===Vo()&&(P=0);const A=Y.getNAN();return A.x=y.x*Math.cos(x+P),A.y=y.y*Math.sin(x+P),A.rotateDirect(c,f),A.addThis(s),this.constructEllipticArcEndPointsCenter(_,A,this.m_semiMajorAxis,this.m_minorMajorRatio,l,Math.abs(S)>ki(),S>0,s)}constructEllipticArcAsNURB(e,i,s,n){return(n>=1||n<0)&&Je("construct_elliptic_arc_as_NURB: weight"),i.isFinite()||Je("construct_elliptic_arc_as_NURB: control_point"),f7([e,i,s],n*n,null,!1,this),this}constructCanonic(e){return K(0),this}isCircular(){return this.m_minorMajorRatio===1&&this.m_rotation===0&&!this.isDegenerateToLine()}isDegenerateToLineHelper(e){return!!gj(this,[e])&&rn(this)}isDegenerateToLine(){return rn(this)}getCenter(){return this.m_center.clone()}setCenter(e){K(0)}getAxisXRotation(){return this.m_rotation}getSemiAxes(){return Y.construct(this.m_semiMajorAxis,this.m_semiMajorAxis*this.m_minorMajorRatio)}getSemiMajorAxis(){return this.m_semiMajorAxis}getSemiMinorAxis(){return this.m_semiMajorAxis*this.m_minorMajorRatio}getMinorMajorRatio(){return this.m_minorMajorRatio}isClockwise(){return!K2(this)}isMajor(){return Gj(this)}getSweepAngle(){return this.m_sweepAngle}getStartAngle(){return this.m_startAngle}getEndAngle(){return this.m_startAngle+this.m_sweepAngle}getGeometryType(){return me.enumEllipticArc}queryEnvelope(e){if(e instanceof lr){e.setEmpty(),e.assignVertexDescription(this.m_description);const i=xe.constructEmpty();this.queryEnvelope(i),e.setEnvelope(i);for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s);for(let o=0,l=s3.getComponentCount(r);s<l;s++){const c=this.queryInterval(r,o);e.setIntervalEnvelope(r,o,c)}}}else e instanceof xe?wse(this,Ze.unit(),e):K(0)}applyTransformation(e){Vj(this,e,!1)}createInstance(){return new zu}calculateLength2D(){return Grt(this,0,1)}queryCoord2D(e,i){if(rn(this))bj(e,this.getStartXY(),this.getEndXY(),i);else if(e===0)i.assign(Y.construct(this.m_XStart,this.m_YStart));else if(e===1)i.assign(Y.construct(this.m_XEnd,this.m_YEnd));else{const s=Ud(this,e),n=new Y(this.m_semiMajorAxis*Math.cos(s),this.getSemiMinorAxis()*Math.sin(s));n.rotateDirect(this.m_cosr,this.m_sinr),n.addThis(this.m_center),i.assign(n)}}queryCoord2DE(e,i){Lrt(this,e,i)}getCoordX(e){const i=new Y;return this.queryCoord2D(e,i),i.x}getCoordY(e){const i=new Y;return this.queryCoord2D(e,i),i.y}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createEllipticArc();let o=e===0&&i===1;if(o&&!n)return void this.copyTo(r);const l=Y.getNAN();this.queryCoord2D(e,l);const c=Y.getNAN();if(this.queryCoord2D(i,c),!o){if(l.equals(c))i-e>.5&&this.isMajor()&&this.isClosed()?(o=!0,e=0,i=1):i===1?e=i:i=e;else if(e>0&&l.isEqual(this.m_XStart,this.m_YStart)&&(e=0),i<1&&c.isEqual(this.m_XEnd,this.m_YEnd)&&(i=1),o=e===0&&i===1,o&&!n)return void this.copyTo(r)}if(r.m_center.assign(this.m_center),r.m_semiMajorAxis=this.m_semiMajorAxis,r.m_minorMajorRatio=this.m_minorMajorRatio,r.m_interior.assign(this.m_interior),r.m_rotation=this.m_rotation,r.m_cosr=this.m_cosr,r.m_sinr=this.m_sinr,r.m_sweepAngle=this.m_sweepAngle,r.m_startAngle=this.m_startAngle,r.m_bits=this.m_bits,fte(r,l.x,l.y),pte(r,c.x,c.y),o)return void jN(r,GN(this));r.m_startAngle=Ud(this,e),r.m_sweepAngle=Ud(this,i)-r.m_startAngle,r.m_startAngle=By(r.m_startAngle),J2(r,Math.abs(r.m_sweepAngle)>ki()),r.assignVertexDescription(this.m_description),US(r),Oz(r);const f=this.m_description.getAttributeCount();if(f>1){for(let y=1;y<f;y++){const _=this.m_description.getSemantics(y),x=s3.getComponentCount(_);for(let S=0;S<x;S++){const P=this.getAttributeAsDbl(e,_,S);r.setStartAttribute(_,S,P)}}for(let y=1;y<f;y++){const _=this.m_description.getSemantics(y),x=s3.getComponentCount(_);for(let S=0;S<x;S++){const P=this.getAttributeAsDbl(i,_,S);r.setEndAttribute(_,S,P)}}}r.afterCompletedModification()}queryDerivative(e,i){Krt()}cutArcIgnoreAttributes(e,i,s){let n=e===0&&i===1;const r=new Y;this.queryCoord2D(e,r);const o=new Y;this.queryCoord2D(i,o),n||(r.equals(o)?i-e>.5&&this.isMajor()&&this.isClosed()?(n=!0,e=0,i=1):i===1?e=i:i=e:(e>0&&r.isEqual(this.m_XStart,this.m_YStart)&&(e=0),i<1&&o.isEqual(this.m_XEnd,this.m_YEnd)&&(i=1),n=e===0&&i===1)),s.m_center.assign(this.m_center),s.m_semiMajorAxis=this.m_semiMajorAxis,s.m_minorMajorRatio=this.m_minorMajorRatio,s.m_interior.assign(this.m_interior),s.m_rotation=this.m_rotation,s.m_cosr=this.m_cosr,s.m_sinr=this.m_sinr,s.m_sweepAngle=this.m_sweepAngle,s.m_startAngle=this.m_startAngle,s.m_bits=this.m_bits,fte(s,r.x,r.y),pte(s,o.x,o.y),n?jN(s,GN(this)):(s.m_startAngle=Ud(this,e),s.m_sweepAngle=Ud(this,i)-s.m_startAngle,s.m_startAngle=By(s.m_startAngle),J2(s,Math.abs(s.m_sweepAngle)>Math.PI),US(s),s.afterCompletedModification())}changeEndPoints2D(e,i){yse(this,e,i,!1)}getAttributeAsDbl(e,i,s){if(i===0)return s===0?this.getCoordX(e):this.getCoordY(e);if(e===0)return this.getStartAttributeAsDbl(i,s);if(e===1)return this.getEndAttributeAsDbl(i,s);const n=this.calculateLength2D(),r=n>0?this.tToLength(e)/n:0,o=s3.getInterpolation(i),l=this.getStartAttributeAsDbl(i,s),c=this.getEndAttributeAsDbl(i,s);return YA(o,l,c,r,s3.getDefaultValue(i))}getClosestCoordinate(e,i){return Sse(this,e,Ze.unit(),i)}getClosestCoordinateOnInterval(e,i,s=-1){return Sse(this,e,i,!1)}getYMonotonicParts(e,i=!1){e.length<2&&Je("");const s=this.getSemiAxes(),n=Math.atan2(s.y*this.m_cosr,s.x*this.m_sinr),r=n+ki(),o=new Array(3);let l=0;if(o[0]=Tn(this,n),o[0]>0&&o[0]<1&&l++,o[1]=Tn(this,r),o[1]>0&&o[1]<1&&(o[l]=o[1],l++),l===0)return 0;o[l]=1,l++,K(e.length>=l);let c=0;for(let f=0;f<l;f++){const y=o[f];this.queryCut(c,y,e[f],i),c=y}return l}getMonotonicParts(e,i){if(e.length<4&&Je(""),this.isDegenerateToLine())return e[0].createEllipticArc().assignCopy(this),i&&e[0].get().dropAllAttributes(),1;const s=this.getSemiAxes(),n=new Array(4);n[0]=Math.atan2(s.y*this.m_cosr,s.x*this.m_sinr),n[1]=n[0]+ki(),n[2]=Math.atan2(-s.y*this.m_sinr,s.x*this.m_cosr),n[3]=n[2]+ki();const r=new Array(5);let o=0;for(let c=0;c<4;c++)r[o]=Tn(this,n[c]),r[o]>0&&r[o]<1&&o++;if(o===0)return 0;tz(r,o),r[o-1]<1&&(r[o]=1,o++),K(e.length>=o);let l=0;for(let c=0;c<o;c++){const f=r[c];this.queryCut(l,f,e[c],i),l=f}return o}intersectionWithAxis2D(e,i,s,n){if(rn(this))return new si({start:this.getStartXY(),end:this.getEndXY()}).intersectionWithAxis2D(e,i,s,n);let r,o;const l=new Be(i),c=this.getSemiAxes();if(e){if(i>this.m_center.y+c.x||i<this.m_center.y-c.x)return 0;r=new Be(c.x).mulThis(this.m_sinr),o=new Be(c.y).mulThis(this.m_cosr),l.subThis(this.m_center.y)}else{if(i>this.m_center.x+c.x||i<this.m_center.x-c.x)return 0;r=new Be(c.x).mulThis(this.m_cosr),o=new Be(c.y).mulThis(-this.m_sinr),l.subThis(this.m_center.x)}const f=r.sqr(),y=o.sqr(),_=f.addE(y),x=o.mulE(l).mulThis(-2),S=l.sqr().subThisE(f),P=x.sqr().subThisE(_.mulE(S).mulThis(4)),A=r.mulE(l).mulThis(-2),k=l.sqr().subThisE(y),$=A.sqr().subThisE(_.mulE(k).mulThis(4));let F=P.eps()*Math.abs($.value())<=$.eps()*Math.abs(P.value());F?r.isZero()&&(F=!1):o.isZero()&&(F=!0),F||(x.setE(A),S.setE(k));const G=Ge(Be,2);let V=Sl(_,x,S,Ze.construct(-1,1),!1,G);if(V===0)return 0;const B=[0,0];let W=0;for(let J=0;J<V;J++){const re=new Be,se=new Be;F?(re.setE(G[J]),se.setE(l.subE(o.mulE(G[J])).divThisE(r))):(se.setE(G[J]),re.setE(l.subE(r.mulE(G[J])).divThisE(o)));const oe=Tn(this,Math.atan2(re.value(),se.value()));oe>=0&&oe<=1&&(B[W]=oe,W++)}return V=W,V===0?0:(V===2&&B[0]>B[1]&&(B[1]=St(B[0],B[0]=B[1])),n&&dn(n,B,0,0,V),s&&(s[0]=e?this.getCoordX(B[0]):this.getCoordY(B[0]),V>1&&(s[1]=e?this.getCoordX(B[1]):this.getCoordY(B[1]),!n&&s[0]>s[1]&&(s[1]=St(s[0],s[0]=s[1])))),V)}intersectionOfYMonotonicWithAxisX(e,i){if(this.m_YStart===this.m_YEnd)return e===this.m_YStart?i:Number.NaN;if(e===this.m_YStart)return this.m_XStart;if(e===this.m_YEnd)return this.m_XEnd;const s=[0,0];return this.intersectionWithAxis2D(!0,e,s,null)===-1?i:s[0]}isCurve(){return!0}isDegenerate(e){return t7(this,e)}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){e instanceof tl?K(0):this.queryLooseEnvelopeOnInterval(new Ze(0,1),e)}clone(e){const i=new zu;return this.copyTo(i),i}queryInterval(e,i){if(e===0){if(rn(this))return i===0?Ze.construct(this.getStartX(),this.getEndX()):Ze.construct(this.getStartY(),this.getEndY());let s;const n=this.getSemiAxes();s=i===0?Math.atan2(-n.y*this.m_sinr,n.x*this.m_cosr):Math.atan2(n.y*this.m_cosr,n.x*this.m_sinr);const r=s+Math.PI,o=[0,0];o[0]=Tn(this,s),o[1]=Tn(this,r);const l=i===0?Ze.construct(this.getStartX(),this.getEndX()):Ze.construct(this.getStartY(),this.getEndY()),c=new Y;for(let f=0;f<2;f++){const y=o[f];y>0&&y<1&&(this.queryCoord2D(y,c),l.mergeNeCoordinate(i===0?c.x:c.y))}return l}return super.queryInterval(e,i)}queryLooseEnvelopeOnInterval(e,i){const s=new Ze(0,1);if(s.intersect(e),s.isEmpty())return void i.setEmpty();if(rn(this))return i.setCoords(this.getCoord2D(s.vmin)),void i.mergeNe(this.getCoord2D(s.vmax));const n=this.getCoord2D(s.vmin),r=this.getCoord2D(s.vmax);if(this.m_minorMajorRatio===1&&Math.abs(this.m_sweepAngle)*s.width()<=Ss){let o=Y.lerp(n,r,.5);const l=o.sub(this.m_center);return l.normalize(),o=o.add(l.mul(.5*Y.distance(n,r))),i.setCoords(n),i.mergeNe(r),void i.mergeNe(o)}wse(this,s,i)}tToLength(e){return rn(this)?e*Y.distance(this.getStartXY(),this.getEndXY()):this.m_minorMajorRatio===1?Math.abs(this.getSweepAngle()*e)*this.m_semiMajorAxis:Rz(this,e)}parametricAngleToT(e){return Tn(this,e)}tToParametricAngle(e){return Ud(this,e)}lengthToT(e){if(rn(this)){const i=Y.distance(this.getStartXY(),this.getEndXY());return i===0?0:e/i}if(this.m_minorMajorRatio===1){const i=Math.abs(this.getSweepAngle())*this.m_semiMajorAxis;return i===0?0:e/i}return Hrt(this,e)}calculateWeightedAreaCentroid2D(e){if(rn(this)){const y=new Y;return y.setCoords(0,0),y}const i=bse(this),s=this.getStartXY().sub(this.m_center),n=this.getEndXY().sub(this.m_center),r=this.m_semiMajorAxis,o=this.getSemiMinorAxis(),l=this.m_startAngle+this.m_sweepAngle,c=new Y;c.x=r*o*(r*this.m_cosr*(-Math.sin(l)+Math.sin(this.m_startAngle))+o*(-Math.cos(l)+Math.cos(this.m_startAngle))*this.m_sinr)/3,c.y=r*o*(o*(Math.cos(l)-Math.cos(this.m_startAngle))*this.m_cosr+r*(-Math.sin(l)+Math.sin(this.m_startAngle))*this.m_sinr)/3;const f=n.add(s).mul(n.crossProduct(s)/6);return c.x-=f.x,c.y-=f.y,c.add(this.m_center.sub(e).mul(i))}calculateWeightedCentroid2D(){const e=new Y;if(this.isDegenerate(0))return e.setCoords(0,0),e;if(rn(this))return e.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),e;let i=this.m_startAngle,s=this.m_startAngle+this.m_sweepAngle;if(s<i){const c=i;i=s,s=c}const n=Math.sin(i),r=Math.sin(s),o=Math.cos(i),l=Math.cos(s);if(this.m_minorMajorRatio===1){const c=this.getSemiMajorAxis(),f=c*c,y=f*(r-n),_=f*(o-l);e.setCoords(y,_)}else{const c=this.getSemiMajorAxis(),f=this.getSemiMinorAxis(),y=c*c,_=f*f,x=c*f,S=y-_,P=S/_,A=S/y,k=Math.sqrt(P),$=Math.sqrt(A),F=.5*x*(Math.asinh(k*r)/k+r*Math.sqrt(1+P*r*r))-.5*x*(Math.asinh(k*n)/k+n*Math.sqrt(1+P*n*n)),G=-.5*x*(Math.asin($*l)/$+l*Math.sqrt(1-A*l*l))- -.5*x*(Math.asin($*o)/$+o*Math.sqrt(1-A*o*o));e.setCoords(F,G)}return e.rotateDirect(this.m_cosr,this.m_sinr),e.assign(e.add(this.m_center.mul(this.calculateLength2D()))),e}isIntersectingPoint(e,i,s){if(s&&(e.isEqualPoint2D(this.getStartXY())||e.isEqualPoint2D(this.getEndXY())))return!1;if(!rn(this)){const o=Y.distance(e,this.m_center),l=this.getSemiAxes();if(o<l.x-i||o>l.y+i)return!1}const n=this.getClosestCoordinate(e,!1),r=new Y;return this.queryCoord2D(n,r),Y.distance(r,e)<=i}isIntersectingPoint3D(e,i,s,n,r=1){return K(0),!1}getTangent(e){if(rn(this))return this.getEndXY().sub(this.getStartXY());{const i=Ud(this,e),s=new Y;return s.setCoords(-this.m_semiMajorAxis*Math.sin(i),this.getSemiMinorAxis()*Math.cos(i)),this.m_rotation&&s.rotateDirect(this.m_cosr,this.m_sinr),s.scale(this.getSweepAngle()),s}}getDerivative(e){return K(0),Y.getNAN()}normalizeAfterEndpointChange(){return!!bye(this)&&(rn(this)?(z9(this),!1):xye(this,!1))}projectionBehavior(){return(4&this.m_bits)>>2}setProjectionBehavior(e){this.m_bits=-5&this.m_bits|e<<2}convertToCanonic(e){const i=new Y(e.x,e.y);return i.subThis(this.m_center),i.rotateReverse(this.m_cosr,this.m_sinr),i}convertFromCanonic(e){const i=new Y(e.x,e.y);return i.rotateDirect(this.m_cosr,this.m_sinr),i.addThis(this.m_center),i}canonicToWorldTransformation(e){e.setRotate(this.m_cosr,this.m_sinr),e.shiftCoords(this.m_center.x,this.m_center.y)}queryAttributeAsDbl(e,i,s,n){K(0)}getCurvature(e){return K(0),0}getMonotonicPartParams(e,i){const s=new Array(6);s[0]=0;let n=1;if(this.isDegenerateToLine())s[1]=1,n=2;else{const r=this.getSemiAxes(),o=new Array(4);this.m_rotation?(o[0]=Math.atan2(r.y*this.m_cosr,r.x*this.m_sinr),o[1]=o[0]+Math.PI,o[2]=Math.atan2(-r.y*this.m_sinr,r.x*this.m_cosr),o[3]=o[2]+Math.PI):(o[0]=0,o[1]=Math.PI,o[2]=.5*Math.PI,o[3]=jKe());for(let l=0;l<4;l++){const c=Tn(this,o[l]);c>0&&c<1&&(s[n]=c,n++)}n>2&&tz(s,n),s[n]=1,n++}if(i){e<n&&Je("");for(let r=0;r<n;r++)i[r]=s[r]}return n}calculateLowerLength2D(){const e=Y.distance(this.getStartXY(),this.getEndXY());if(this.isDegenerateToLine())return e;const i=Math.abs(this.m_sweepAngle)*this.getSemiMinorAxis();return Math.max(i,e)}calculateUpperLength2D(){const e=Y.distance(this.getStartXY(),this.getEndXY());if(this.isDegenerateToLine())return e;const i=Math.abs(this.m_sweepAngle)*this.getSemiMajorAxis();return Math.max(i,e)}orientBottomUp(){K(0)}isLine(){return rn(this)}copyIgnoreAttributes(e){e.m_XStart=this.m_XStart,e.m_YStart=this.m_YStart,e.m_XEnd=this.m_XEnd,e.m_YEnd=this.m_YEnd,e.m_center.assign(this.m_center),e.m_semiMajorAxis=this.m_semiMajorAxis,e.m_minorMajorRatio=this.m_minorMajorRatio,e.m_interior.assign(this.m_interior),e.m_rotation=this.m_rotation,e.m_cosr=this.m_cosr,e.m_sinr=this.m_sinr,e.m_sweepAngle=this.m_sweepAngle,e.m_startAngle=this.m_startAngle,e.m_bits=this.m_bits,F9(e)}calculateArea2DHelper(){return bse(this)}absNorm(){let e=this.getStartXY().norm(1)+this.getEndXY().norm(1);return this.isDegenerateToLine()||(e+=this.m_center.norm(1),e+=this.m_semiMajorAxis),e}queryEnvelopeW(e,i){if(i.setCoords(this.getCoord2D(e.vmin)),i.mergeNe(this.getCoord2D(e.vmax)),rn(this))return;const s=this.getSemiAxes(),n=new Array(8);{const o=Math.atan2(-s.y*this.m_sinr,s.x*this.m_cosr),l=o+Math.PI,c=Math.atan2(s.y*this.m_cosr,s.x*this.m_sinr),f=c+Math.PI;n[0]=Tn(this,o),n[1]=Tn(this,l),n[2]=Tn(this,c),n[3]=Tn(this,f)}{const o=this.m_cosr+this.m_sinr,l=this.m_cosr-this.m_sinr,c=Math.atan2(-s.y*o,s.x*l),f=c+Math.PI,y=Math.atan2(s.y*l,s.x*o),_=y+Math.PI;n[4]=Tn(this,c),n[5]=Tn(this,f),n[6]=Tn(this,y),n[7]=Tn(this,_)}const r=Y.getNAN();for(let o=0;o<8;o++){const l=n[o];e.containsExclusiveCoordinate(l)&&(this.queryCoord2D(l,r),i.mergeNe(r))}}setSegmentFromCoords(e,i){jrt(this,e,i)}writeInBufferStream(e,i){const s=new Float64Array(10);return s[0]=this.m_bits,s[1]=this.m_semiMajorAxis,s[2]=this.m_minorMajorRatio,s[3]=this.m_rotation,s[4]=this.m_center.x,s[5]=this.m_center.y,s[6]=this.m_sweepAngle,s[7]=this.m_startAngle,s[8]=this.m_interior.x,s[9]=this.m_interior.y,e.writeRangeFromArray(i,s.length,s,!0,1),i+s.length}readFromBufferStream(e,i){const s=new Float64Array(10);e.queryRange(i,s.length,s,!0,1),this.m_bits=s[0],this.m_semiMajorAxis=s[1],this.m_minorMajorRatio=s[2],this.m_rotation=s[3],this.m_center.x=s[4],this.m_center.y=s[5],this.m_sweepAngle=s[6],this.m_startAngle=s[7],this.m_interior.x=s[8],this.m_interior.y=s[9],this.m_cosr=Math.cos(this.m_rotation),this.m_sinr=Math.sin(this.m_rotation),this.m_cachedValues=null}snapControlPoints(e){return!1}needsSnapControlPoints(e){return K(0),!1}calculateSpecialPointsForCracking(e,i){return K(0),0}ensureXYMonotone(){return K(0),!1}setCoordsForIntersector(e,i,s){yse(this,e,i,s)}getInteriorPoint(){return this.m_interior.clone()}copyToImpl(e){const i=e;i.m_center.assign(this.m_center),i.m_semiMajorAxis=this.m_semiMajorAxis,i.m_minorMajorRatio=this.m_minorMajorRatio,i.m_interior.assign(this.m_interior),i.m_rotation=this.m_rotation,i.m_cosr=this.m_cosr,i.m_sinr=this.m_sinr,i.m_sweepAngle=this.m_sweepAngle,i.m_startAngle=this.m_startAngle,i.m_bits=this.m_bits,jN(i,GN(this))}reverseImpl(){d7(this,!K2(this)),Oz(this),(this.projectionBehavior()!==0||this.getStartXY().equals(this.getEndXY()))&&US(this)}equalsImpl(e){const i=e;if(this.m_bits!==i.m_bits||this.m_semiMajorAxis!==i.m_semiMajorAxis||this.m_minorMajorRatio!==i.m_minorMajorRatio||!(this.m_center.isEqualPoint2D(i.m_center)||this.m_center.isNAN()&&i.m_center.isNAN())||this.m_rotation!==i.m_rotation||!this.m_interior.equals(i.m_interior))return!1;const s=i.m_sweepAngle;if(this.m_sweepAngle!==s)return!1;const n=i.m_startAngle;return this.m_startAngle===n}equalsImplTol(e,i){const s=e;if(this.m_bits!==s.m_bits)return!1;if(this.m_center.isNAN()&&s.m_center.isNAN())return!0;if(this.m_center.isNAN()!==s.m_center.isNAN()||!this.getSemiAxes().isEqualPoint2D(s.getSemiAxes(),i)||!this.m_center.isEqualPoint2D(s.m_center,i))return!1;const n=Math.abs(g1e(m1e(O9(this.m_rotation-s.m_rotation)))),r=Math.abs(ki()-n),o=Math.min(n,r);if(this.m_semiMajorAxis*Math.abs(o)>i)return!1;const l=this.getCoord2D(.5),c=s.getCoord2D(.5);return!!l.isEqualPoint2D(c,i)}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){z9(this),F9(this)}intersect(e,i,s,n,r){return qv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){if(i.length<2&&Mi(""),rn(this))return new si({start:this.getStartXY(),end:this.getEndXY()}).intersectPoint(e,i,s);{const o=Y.distance(e,this.m_center);if(o>this.m_semiMajorAxis+s||o<this.getSemiMinorAxis()-s)return 0}const n=this.getClosestCoordinate(e,!1),r=Y.getNAN();return this.queryCoord2D(n,r),Y.distance(r,e)<=s?Is(n,0,1)&&(this.queryCoord2D(n===0?1:0,r),Y.distance(r,e)<=s)?(i&&(i[0]=0,i[1]=1),2):(i&&(i[0]=n),1):0}isIntersecting(e,i,s){return u5(!1,this,e,i,s)!==0}intersect_(e,i,s,n){return K(0),0}endPointModified(){this.m_bits|=8,F9(this)}clearEndPointModified(){z9(this)}}zu.type=me.enumEllipticArc;class Wt extends pa{constructor(e){e?e.vd?(super({vd:e.vd,bPolygon:!0}),this.m_segmentBufferCTor=Qt):e.copy?(super({vd:e.copy.getDescription(),bPolygon:!0}),this.m_segmentBufferCTor=Qt,e.copy.copyTo(this)):e.move?(super({move:e.move}),this.m_segmentBufferCTor=Qt):(e.envelope,K(0)):(super({bPolygon:!0}),this.m_segmentBufferCTor=Qt)}assignMove(e){return e.copyTo(this),this}assignCopy(e){return e.copyTo(this),this}getBoundary(){return Xh(this)}getExteriorRingCount(){return this.getOGCPolygonCount()}getGeometryType(){return Wt.type}getDimension(){return 2}createInstance(){return new Wt({vd:this.getDescription()})}equals(e,i){return this.equalsBase(e,i)}}Wt.type=me.enumPolygon;class HE extends Mge{constructor(e){if(typeof e=="number")return super(),this.m_factor=e,void(this.m_wkid=0);super(e)}getUnitType(){return 1}convertFromRadians(e){return e/this.getUnitToBaseFactor()}convertToRadians(e){return e*this.getUnitToBaseFactor()}}function Pet(t){return t.getType()===zi.PE_TYPE_LINUNIT?new JE(t):t.getType()===zi.PE_TYPE_ANGUNIT?new HE(t):void Je("peUnit")}function Tet(t){const e=$ye(null);return t.getType()===zi.PE_TYPE_PROJCS||t.getType()===zi.PE_TYPE_GEOGCS?e.reset(t.getUnit()):Je("PE_coord_sys"),e.get()||bt("cannot create units from coord sys"),Pet(e.get())}function Iet(t,e){let i=e,s=null;i||(s=BA(t)?TE():jo(),i=s);let n=null;switch(t){case me.enumPoint:n=new Ht({vd:i});break;case me.enumLine:n=new si({vd:i});break;case me.enumBezier:n=new Nu({vd:i});break;case me.enumEllipticArc:n=new zu({vd:i});break;case me.enumRationalBezier2:n=new ba({vd:i});break;case me.enumBezier2:n=new em({vd:i});break;case me.enumEnvelope:n=new lr({vd:i});break;case me.enumMultiPoint:n=new Jn({vd:i});break;case me.enumPolyline:n=new vi({vd:i});break;case me.enumPolygon:n=new Wt({vd:i});break;case me.enumMultipatch:K(0);break;case me.enumGeometryCollection:n=new AE({vd:i});break;default:Je("Geometry.create")}return n}var aie=vr;const ae=-1,Or=1;class Met{constructor(e){this.m_shape=e}userSort(e,i,s){this.m_shape.sortVerticesSimpleByYHelper(s,e,i)}getValue(e){return this.m_shape.getY(e)}}function Aet(t){return t.parent!==void 0}class UE{constructor(e){Aet(e)?(this.m_parent=e.parent,this.m_geometry=e.geometry,this.m_path=e.path,this.m_vertex=e.vertex,this.m_firstVertex=e.firstVertex,this.m_index=e.selection?0:e.index,this.m_bSkipMultiPoints=e.bSkipMultiPoints,this.m_selection=e.selection,this.m_bOneGeom=e.bOneGeom,this.m_bFirst=!0):(this.m_parent=e.copy.m_parent,this.m_geometry=e.copy.m_geometry,this.m_path=e.copy.m_path,this.m_vertex=e.copy.m_vertex,this.m_index=e.copy.m_index,this.m_bSkipMultiPoints=e.copy.m_bSkipMultiPoints,this.m_firstVertex=e.copy.m_firstVertex,this.m_bFirst=!0,this.m_selection=e.copy.m_selection,this.m_bOneGeom=e.copy.m_bOneGeom)}moveToNextHelper(){for(this.m_path=this.m_parent.getNextPath(this.m_path),this.m_index=0;this.m_geometry!==ae;){for(;this.m_path!==ae;this.m_path=this.m_parent.getNextPath(this.m_path))if(this.m_vertex=this.m_parent.getFirstVertex(this.m_path),this.m_firstVertex=this.m_vertex,this.m_vertex!==ae)return this.m_vertex;if(this.m_bOneGeom)return ae;if(this.m_geometry=this.m_parent.getNextGeometry(this.m_geometry),this.m_geometry===ae)break;this.m_bSkipMultiPoints&&!bi(this.m_parent.getGeometryType(this.m_geometry))||(this.m_path=this.m_parent.getFirstPath(this.m_geometry))}return ae}nextSelection(){for(;this.m_index<this.m_parent.m_selectedVertices.length;){const e=this.m_parent.m_selectedVertices[this.m_index++];if(e!==ae&&(this.m_path=this.m_parent.getPathFromVertex(e),!this.m_bOneGeom||this.m_geometry===this.m_parent.getGeometryFromPath(this.m_path)))return this.m_geometry=this.m_parent.getGeometryFromPath(this.m_path),e}return ae}next(){return this.m_selection?this.nextSelection():this.m_bFirst?(this.m_bFirst=!1,this.m_vertex):this.m_vertex!==ae?(this.m_vertex=this.m_parent.getNextVertex(this.m_vertex),this.m_index++,this.m_vertex!==ae&&this.m_vertex!==this.m_firstVertex?this.m_vertex:this.moveToNextHelper()):ae}currentGeometry(){return this.m_geometry}currentPath(){return K(0),0}static create_(e,i,s,n,r,o,l,c,f){return new UE({parent:e,geometry:i,path:s,vertex:n,firstVertex:r,index:o,bSkipMultiPoints:l,selection:c,bOneGeom:f})}}class Pz{constructor(e){this.parentage=e}equals(e){return this.parentage===e.parentage}}class Bs{setPrevPath(e,i){this.m_pathIndexList.setField(e,1,i)}setNextPath(e,i){this.m_pathIndexList.setField(e,2,i)}setPathFlags(e,i){this.m_pathIndexList.setField(e,6,i)}getPathFlags(e){return this.m_pathIndexList.getField(e,6)}setPathGeometry(e,i){this.m_pathIndexList.setField(e,7,i)}getPathIndex(e){return this.m_pathIndexList.getField(e,0)}setNextGeometry(e,i){this.m_geometryIndexList.setField(e,1,i)}setPrevGeometry(e,i){this.m_geometryIndexList.setField(e,0,i)}getGeometryIndex(e){return this.m_geometryIndexList.getField(e,7)}setFirstPath(e,i){this.m_geometryIndexList.setField(e,3,i)}setLastPath(e,i){this.m_geometryIndexList.setField(e,4,i)}newGeometry(e){const i=this.m_geometryIndexList.newElement();return this.m_geometryIndexList.setField(i,2,e),this.m_geometryIndexList.setField(i,5,0),this.m_geometryIndexList.setField(i,6,0),this.m_geometryIndexList.setField(i,7,this.m_geometryIndexList.elementToIndex(i)),i}freeGeometry(e){this.m_geometryIndexList.deleteElement(e)}newPath(e){const i=this.m_pathIndexList.newElement(),s=this.m_pathIndexList.elementToIndex(i);if(this.m_pathIndexList.setField(i,0,s),this.m_pathIndexList.setField(i,3,0),this.m_pathIndexList.setField(i,6,0),this.setPathGeometry(i,e),s>=this.m_pathAreas.length){const n=Math.trunc(s<16?16:3*s/2);this.m_pathAreas.length=n,this.m_pathLengths.length=n}return this.m_pathAreas[s]=0,this.m_pathLengths[s]=0,this.m_pathCount++,i}freePath(e){this.m_pathIndexList.deleteElement(e),this.m_pathCount--}newVertex(e){const i=this.m_vertexIndexList.newElement(),s=e>=0?e:this.m_vertexIndexList.elementToIndex(i);if(this.m_vertexIndexList.setField(i,0,s),e<0){if(s>=this.m_vertices.getPointCount()){const n=Math.trunc(s<16?16:3*s/2);this.m_vertices.reserveRounded(n),this.m_vertices.resizeNoInit(n),this.m_segments!==null&&(this.m_segments.length=n),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0)}this.m_segments&&(this.m_segments[s]=null)}return this.m_pointCount++,i}freeVertex(e){this.unselect(e);const i=this.getVertexIndex(e);this.m_vertexIndexList.deleteElement(e),this.m_pointCount--;for(let s=0,n=this.m_indices.length;s<n;s++){if(s===this.m_selectionIndex)continue;const r=this.m_indices[s];r!==null&&r.size()>i&&r.write(i,-1)}this.m_weights&&this.m_weights.size()>i&&this.m_weights.write(i,1),this.m_ranks&&this.m_ranks.size()>i&&this.m_ranks.write(i,Or),this.m_segmentWeights&&this.m_segmentWeights.size()>i&&this.m_segmentWeights.write(i,1),this.m_segmentRanks&&this.m_segmentRanks.size()>i&&this.m_segmentRanks.write(i,Or),this.m_segments&&this.setSegmentToIndex(i,null)}insertVertex_(e,i,s,n){this.m_bHasForceSetEnvelope=!1;const r=i!==ae?this.getPrevVertex(i):this.getLastVertex(e),o=r!==ae?this.getNextVertex(r):ae,l=this.newVertex(s===null?this.m_pointCount:-1),c=this.getVertexIndex(l);s!==null&&this.m_vertices.setPointByVal(c,s),this.setPathToVertex(l,e),this.setNextVertex(l,o),this.setPrevVertex(l,r),o!==ae&&this.setPrevVertex(o,l),r!==ae&&this.setNextVertex(r,l);const f=this.isClosedPath(e),y=this.getFirstVertex(e);i===ae&&this.setLastVertex(e,l),i===y&&(f&&n&&y!==ae||this.setFirstVertex(e,l)),f&&o===ae&&(this.setNextVertex(l,l),this.setPrevVertex(l,l)),this.setPathSize(e,this.getPathSize(e)+1);const _=this.getGeometryFromPath(e);return this.setGeometryVertexCount(_,this.getPointCount(_)+1),l}getHelperPoint(){return this.m_helperPoint||(this.m_helperPoint=new Ht({vd:this.m_vertices.getDescription()}),this.m_helperPoint.setXYCoords(0,0)),this.m_helperPoint}addMultiPath_(e){return K(0),0}addMultiPoint(e,i){const s=this.createGeometry(e.getGeometryType(),e.getDescription());return this.appendMultiPoint(s,e,i),s}addPoint_(e,i){const s=this.createGeometry(me.enumMultiPoint,e.getDescription());return this.appendPoint(s,e,i),s}appendMultiPath_(e,i){if(i.isEmpty())return;const s=i.getImpl();this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+s.getPointCount()),this.m_verticesMp.addPoints(i,0,s.getPointCount()),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0);const n=this.m_segments!==null||s.getSegmentFlagsStreamRef()!==null;this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+s.getPointCount()),this.m_pathIndexList.setCapacity(this.m_pathIndexList.size()+s.getPathCount());for(let r=0,o=s.getPathCount();r<o;r++){if(s.getPathSize(r)===0)continue;const l=this.insertPath(e,ae);this.setClosedPath(l,s.isClosedPath(r));for(let c=s.getPathStart(r),f=s.getPathEnd(r);c<f;c++){const y=this.insertVertex_(l,ae,null,!1);if(n){const _=this.getVertexIndex(y);if(1&s.getSegmentFlags(c))this.setSegmentToIndex(_,null);else{const x=new Qt;s.querySegment(c,x,!0),this.setSegmentToIndex(_,x.releaseSegment())}}}s.isStrongPathStart(r)&&this.setStrongPathStart(l,!0),s.isStrongPathEnd(r)&&this.setStrongPathEnd(l,!0)}}addMultiPath(e,i){const s=this.createGeometry(e.getGeometryType(),e.getDescription());return e.getGeometryType()===me.enumPolygon&&this.setFillRule(s,e.getFillRule()),this.appendMultiPath(s,e,i),s}appendMultiPathPolyline(e,i,s){K(0)}appendMultiPathPolygon(e,i,s){var B;const n=i.getImpl(),r=this.m_segments!==null||n.getSegmentFlagsStreamRef()!==null,o=xe.constructEmpty();i.queryEnvelope(o),K(s.isIntersecting(o)&&!s.containsEnvelope(o));let l=xe.construct(Number.NEGATIVE_INFINITY,s.ymin,Number.POSITIVE_INFINITY,s.ymax),c=xe.construct(s.xmin,Number.NEGATIVE_INFINITY,s.xmax,Number.POSITIVE_INFINITY);const f=n.getAccelerators();if(f&&f.getQuadTree()){const W=f.getQuadTree(),J=W.getIntersectionCount(l,0,0);J>W.getIntersectionCount(c,0,J+1)&&(c=St(l,l=c))}else l.height()>c.width()&&(c=St(l,l=c));const y=[],_=n.queryLimitedSegmentIterator(l);let x=-1,S=-100,P=-1,A=0,k=-1,$=-1,F=ae,G=!0,V=_.nextSegment();if(V!==null)for(;;V=_.nextSegment()){let W=V===null;const J=V!==null?_.getPathIndex():x,re=V!==null?_.getStartPointIndex():S;if(W||(J===x?S+1===re?A++:W=!0:(W=x>=0,x<0&&(x=J,P=n.getSegmentCountPath(x),k=re,F=ae,A=1))),W){if(!(y.length===0&&P===A)){y.length!==0&&y[0].first===k||(this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.addPoints(i,k,k+1),$===-1&&($=k),F===ae&&(F=this.insertPath(e,ae),this.setClosedPath(F,!0)),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.insertVertex_(F,ae,null,!1));for(const{first:se,second:oe}of y){$===-1&&($=se);let pe=-1,ue=-1;const ce=se+oe-1;if(oe===P){const ne=ce+1;ue=ne-se,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+ue),this.m_verticesMp.addPoints(i,se,ne),pe=ce,K(y.length===1)}else if(ce+1<n.getPathEnd(x)){const ne=ce+2;ue=ne-se,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+ue),this.m_verticesMp.addPoints(i,se,ne),pe=ce}else{const ne=n.getPathStart(x),de=ne!==$?1:0,Se=ce+1;ue=Se-se+de,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+(Se-se)+de),this.m_verticesMp.addPoints(i,se,Se),pe=ce,de>0&&((B=this.m_verticesMp)==null||B.addPoints(i,ne,ne+1))}this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),F===ae&&(F=this.insertPath(e,ae),this.setClosedPath(F,!0));for(let ne=0,de=se;ne<ue;ne++,de++){const Se=this.insertVertex_(F,ae,null,!1);if(r){const Pe=this.getVertexIndex(Se);if(1&n.getSegmentFlags(de)||de>pe)this.setSegmentToIndex(Pe,null);else{const Re=new Qt;n.getSegmentBuffer(de,Re,!0),this.setSegmentToIndex(Pe,Re.releaseSegment())}}}}if(y.length===0||y.at(-1).first+y.at(-1).second!==k+A){let se=k+A;se===i.getPathEnd(x)&&(se=i.getPathStart(x)),$!==se&&(this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.addPoints(i,se,se+1),this.insertVertex_(F,ae,null,!1))}}y.length=0,G=!0,J!==x&&(x=J,P=n.getSegmentCountPath(x),F=ae,$=-1),k=re,A=1}if(!V)break;{const se=xe.constructEmpty();V.queryLooseEnvelope(se),c.isIntersecting(se)?(G?y.push(rr(re,1)):y.at(-1).second++,G=!1):G=!0}S=re}}appendMultiPath(e,i,s){if(s===void 0)return void this.appendMultiPath_(e,i);if(i.isEmpty())return;const n=i.getGeometryType()===me.enumPolygon,r=xe.constructEmpty();i.queryEnvelope(r),s.isIntersecting(r)&&(!s.containsEnvelope(r)&&i.getPointCount()>10?n?this.appendMultiPathPolygon(e,i,s):this.appendMultiPathPolyline(e,i,s):this.appendMultiPath_(e,i))}appendPoint(e,i,s){if(i.isEmpty()||s!==void 0&&!s.contains(i.getXY()))return;this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.add(i),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+1);const n=this.insertPath(e,ae);this.insertVertex_(n,ae,null,!1)}appendMultiPoint_(e,i){this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+i.getPointCount()),this.m_verticesMp.addPoints(i,0,i.getPointCount()),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+i.getPointCount());const s=this.insertPath(e,ae);for(let n=0,r=i.getPointCount();n<r;n++)this.insertVertex_(s,ae,null,!1)}appendMultiPoint(e,i,s){if(s===void 0)return void this.appendMultiPoint_(e,i);const n=i.getAttributeStreamRef(0);let r=0;for(let y=0,_=i.getPointCount();y<_;y++){const x=n.readPoint2D(2*y);s.contains(x)&&r++}this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+r);let o=-1,l=-1,c=0;for(let y=0,_=i.getPointCount();y<_;y++){const x=n.readPoint2D(2*y);s.contains(x)?(o===-1&&(o=y,l=y),l++):o>=0&&(this.m_verticesMp.addPoints(i,o,l-o),o=-1,c++)}if(o>0&&(this.m_verticesMp.addPoints(i,o,l-o),c++),!c)return;this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+r);const f=this.insertPath(e,ae);for(let y=0,_=i.getPointCount();y<_;y++){const x=n.readPoint2D(2*y);s.contains(x)&&this.insertVertex_(f,ae,null,!1)}}splitSegmentForward(e,i,s,n,r){const o=this.getNextVertex(e);o===ae&&Je("Edit_shape.split_segment_forward_");const l=this.getHelperPoint(),c=this.getPathFromVertex(e);let f=e;const y=this.hasSegmentParentage();for(let _=0,x=i.getResultSegmentCount(s);_<x;_++){const S=this.getVertexIndex(f),P=this.getNextVertex(f),A=i.getResultSegment(s,_);let k=null;if(A.getGeometryType()!==me.enumLine&&(k=A.clone(),k.dropAllAttributes()),_===0&&(A.queryStart(l),this.setSegmentToIndex(S,null),this.setPointEx(f,l,i.getResultSegmentStartPointRank(s,_),i.getResultSegmentStartPointWeight(s,_),r)),this.setSegmentRank(f,i.getResultSegmentInteriorRank(s,_)),this.setSegmentWeight(f,i.getResultSegmentInteriorWeight(s,_)),y){const $=i.getResultSegmentSegmentParentage(s,_),F=i.getResultSegmentStartPointIsBreak(s,_);this.setSegmentParentageAndBreak(f,$,F)}if(A.queryEnd(l),_<x-1){this.setSegmentToIndex(S,k);const $=this.insertVertex(c,P,l);this.setWeight($,i.getResultSegmentEndPointWeight(s,_)),this.setRank($,i.getResultSegmentEndPointRank(s,_)),this.select($),f=$}else{this.setPointEx(o,l,i.getResultSegmentEndPointRank(s,_),i.getResultSegmentEndPointWeight(s,_),r);const $=i.getResultSegmentEndPointIsBreak(s,_);this.setSegmentParentageBreakVertex(o,$),this.setSegmentToIndex(S,k)}}}splitSegmentBackward(e,i,s,n,r){const o=this.getNextVertex(e);o===ae&&Je("Edit_shape.split_segment_backward_");const l=this.getHelperPoint(),c=this.getPathFromVertex(e);let f=e;const y=this.hasSegmentParentage();for(let _=0,x=i.getResultSegmentCount(s);_<x;_++){const S=x-_-1,P=this.getVertexIndex(f),A=this.getNextVertex(f),k=i.getResultSegment(s,S);let $=null;if(k.getGeometryType()!==me.enumLine&&($=k.clone(),$.reverse(),$.dropAllAttributes()),_===0&&(k.queryEnd(l),this.setSegmentToIndex(P,null),this.setPointEx(f,l,i.getResultSegmentEndPointRank(s,S),i.getResultSegmentEndPointWeight(s,S),r),this.setSegmentParentageAndBreak(f,i.getResultSegmentSegmentParentage(s,S),i.getResultSegmentEndPointIsBreak(s,S))),k.getGeometryType()===me.enumLine?this.setSegmentToIndex(P,null):this.setSegmentToIndex(P,$),this.setSegmentRank(f,i.getResultSegmentInteriorRank(s,S)),this.setSegmentWeight(f,i.getResultSegmentInteriorWeight(s,S)),k.queryStart(l),_<x-1){const F=this.insertVertex(c,A,l);this.setWeight(F,i.getResultSegmentStartPointWeight(s,S)),this.setRank(F,i.getResultSegmentStartPointRank(s,S)),this.select(F),f=F,y&&this.setSegmentParentageAndBreak(F,i.getResultSegmentSegmentParentage(s,S),i.getResultSegmentEndPointIsBreak(s,S))}else this.setPointEx(o,l,i.getResultSegmentStartPointRank(s,S),i.getResultSegmentStartPointWeight(s,S),r)}}selected_(e){return K(0),!1}allocateIndex(e=!0){if(this.m_deletedIndices.length){const i=this.m_deletedIndices.pop();return e&&i.setRange(-1,0,i.size()),i}return e?Ga(0,-1):Ga(0)}recycleUserIndex(e){this.m_deletedIndices.push(e)}allocatePathIndex(){if(this.m_deletedPathIndices.length){const e=this.m_deletedPathIndices.at(-1);return this.m_deletedPathIndices.pop(),e}return Ga(0)}recyclePathUserIndex(e){this.m_deletedPathIndices.push(e)}peelALoop_(e,i,s){const n=this.getNextVertex(e),r=this.getNextVertex(i),o=this.getVertexIndex(e),l=this.getVertexIndex(i);if(this.setNextVertex(e,r),this.setPrevVertex(r,e),this.setNextVertex(i,n),this.setPrevVertex(n,i),this.m_segments){const c=this.getSegmentFromIndex(o),f=this.getSegmentFromIndex(l);this.setSegmentToIndex(l,null),this.setSegmentToIndex(o,f),this.setSegmentToIndex(l,c)}if(this.hasSegmentParentage()){let c=this.getSegmentParentage(i),f=this.getSegmentParentage(e);c===-1&&f===-1||(f=St(c,c=f),this.setSegmentParentageAndBreak(e,f),this.setSegmentParentageAndBreak(i,c))}if(s){const c=this.getPathFromVertex(e),f=this.getGeometryFromPath(c),y=[!1],_=this.insertClosedPath(f,ae,n,this.getFirstVertex(c),y);y[0]&&this.setFirstVertex(c,r);let x=this.getPathSize(c);return x-=this.getPathSize(_),this.setPathSize(c,x),_}return ae}sortVerticesSimpleByYHelper(e,i,s){e.sort(i,s,(n,r)=>{let o=this.compareVerticesSimpleY(n,r);if(o===0){const l=this.getPathInternalIndexFromVertex(n),c=this.getPathInternalIndexFromVertex(r);o=l<c?-1:l>c?1:0}return o})}sortVerticesSimpleByYHelper3D(e,i,s){K(0)}constructor(){this.m_verticesMp=null,this.m_vertices=null,this.m_xyStream=null,this.m_vertexDescription=null,this.m_segments=null,this.m_weights=null,this.m_ranks=null,this.m_segmentWeights=null,this.m_segmentRanks=null,this.m_indices=[],this.m_deletedIndices=[],this.m_pathAreas=[],this.m_pathLengths=[],this.m_pathindices=[],this.m_deletedPathIndices=[],this.m_geometryIndices=[],this.m_selectedVertices=[],this.m_helperPoint=null,this.m_forceSetEnvelope=tl.constructEmpty(),this.m_bHasForceSetEnvelope=!1,this.m_workPoint2D=Y.getNAN(),this.m_workPoint2_2D=Y.getNAN(),this.m_curveStitcher=null,this.m_pathCount=0,this.m_pointCount=0,this.m_firstGeometry=ae,this.m_lastGeometry=ae,this.m_vertexIndexList=new Ut(5),this.m_pathIndexList=new Ut(8),this.m_geometryIndexList=new Ut(8),this.m_bHasAttributes=!1,this.m_selectedCount=0,this.m_selectionIndex=-1,this.m_selection=!1,this.m_bucketSort=new rd,this.m_bHasForceSetEnvelope=!1,this.m_segmentParentageIndex=-1}getTotalPointCount(){return this.m_pointCount}getEnvelope2D(e){if(this.m_bHasForceSetEnvelope)return new xe(this.m_forceSetEnvelope.xmin,this.m_forceSetEnvelope.ymin,this.m_forceSetEnvelope.xmax,this.m_forceSetEnvelope.ymax);const i=this.hasCurves(),s=xe.constructEmpty(),n=this.queryVertexIterator();let r=!0;for(let o=n.next();o!==ae;o=n.next()){if(r?s.merge(this.getXY(o)):s.mergeNe(this.getXY(o)),i){const l=this.getSegment(o);if(l!==null){const c=xe.constructEmpty();l.queryLooseEnvelope(c),s.mergeEnvelope2D(c)}}r=!1}return s}getEnvelope3D(e){return K(0),tl.constructEmpty()}forceSetEnvelope2D(e){this.m_bHasForceSetEnvelope=!0,this.m_forceSetEnvelope.setCoords(e.xmin,e.ymin,0,e.xmax,e.ymax,0)}forceSetEnvelope3D(e){K(0)}forgetForceSetEnvelope2D(){K(0)}getGeometryCount(){return this.m_geometryIndexList.size()}addGeometry(e,i){const s=e.getGeometryType();if(bi(s))return this.addMultiPath(e,i);if(s===me.enumMultiPoint)return this.addMultiPoint(e,i);if(s===me.enumPoint)return this.addPoint_(e,i);if(s===me.enumEnvelope){const n=new Wt;return n.addEnvelope(e,!1),this.addMultiPath(n,i)}Je("")}appendGeometry(e,i){this.mergeVertexDescription(i.getDescription());const s=i.getGeometryType();bi(s)?this.appendMultiPath(e,i):s!==me.enumMultiPoint?Je(""):this.appendMultiPoint(e,i)}assignRankToGeometryVertices(e,i){K(0)}collapseAllGeometriesToFirst(){this.collapseGeometriesToFirst(me.enumUnknown)}collapseGeometriesToFirst(e){this.dbgVerifyVertexCounts();let i=ae,s=-1,n=-1;for(let r=this.getFirstGeometry();r!==ae;)if(e!==me.enumUnknown&&this.getGeometryType(r)!==e)r=this.getNextGeometry(r);else{if(i===ae){i=r,s=this.getPathCount(i),n=this.getPointCount(i),r=this.getNextGeometry(r);continue}for(let f=this.getFirstPath(r);f!==ae;f=this.getNextPath(f))this.setPathGeometry(f,i);s+=this.getPathCount(r),n+=this.getPointCount(r);const o=this.getLastPath(i),l=this.getFirstPath(r);o!==ae?this.setNextPath(o,l):this.setFirstPath(i,l),l!==ae&&(this.setPrevPath(l,o),this.setLastPath(i,this.getLastPath(r))),this.setFirstPath(r,ae),this.setLastPath(r,ae);const c=r;r=this.getNextGeometry(r),this.setGeometryVertexCount(c,0),this.removeGeometry(c)}return i!==ae&&(this.setGeometryVertexCount(i,n),this.setGeometryPathCount(i,s),this.dbgVerifyVertexCounts()),i}setFillRule(e,i){let s=this.m_geometryIndexList.getField(e,2);s&=-134217729,s|=i===1?134217728:0,this.m_geometryIndexList.setField(e,2,s)}getFillRule(e){return 134217728&this.m_geometryIndexList.getField(e,2)?1:0}setGeometryModified(e,i){let s=this.m_geometryIndexList.getField(e,2);!!(67108864&s)!==i&&(s&=-67108865,s|=i?67108864:0,this.m_geometryIndexList.setField(e,2,s))}getGeometryModified(e){return!!(67108864&this.m_geometryIndexList.getField(e,2))}setGeometryModifiedWithVertex(e,i){const s=this.getPathFromVertex(e),n=this.getGeometryFromPath(s);this.setGeometryModified(n,i)}getGeometryModifiedWithVertex(e){return K(0),!0}swapGeometry(e,i){K(0)}addPathFromMultiPath(e,i,s){const n=this.createGeometry(s?me.enumPolygon:me.enumPolyline,e.getDescription()),r=e.getImpl();if(e.getPathSize(i)<2)return n;this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+e.getPathSize(i)),this.m_verticesMp.addPoints(e,e.getPathStart(i),r.getPathEnd(i)),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0);const o=this.insertPath(n,ae);this.setClosedPath(o,r.isClosedPath(i)||s);const l=this.m_segments!==null||r.getSegmentFlagsStreamRef()!==null;for(let c=r.getPathStart(i),f=r.getPathEnd(i);c<f;c++){const y=this.insertVertex_(o,ae,null,!1);if(l){const _=this.getVertexIndex(y);if(1&r.getSegmentFlags(c))this.setSegmentToIndex(_,null);else{const x=new Qt;r.querySegment(c,x,!0),this.setSegmentToIndex(_,x.releaseSegment())}}}return r.isStrongPathStart(i)&&this.setStrongPathStart(o,!0),r.isStrongPathEnd(i)&&this.setStrongPathEnd(o,!0),n}getGeometry(e){const i=this.getGeometryType(e),s=Iet(i,this.m_verticesMp.getDescription()),n=this.getPointCount(e);if(n===0)return s;if(bi(i)){const r=s.getImpl(),o=this.getPathCount(e),l=Ga(o+1),c=M0(o+1,0),f=s.getDescription(),y=this.hasCurves();for(let _=0,x=f.getAttributeCount();_<x;_++){const S=f.getSemantics(_),P=aie.getComponentCount(S),A=Sge(S,n),k=this.m_vertices.getAttributeStreamRef(S);let $=0,F=0,G=0;for(let V=this.getFirstPath(e);V!==ae;V=this.getNextPath(V)){let B=0;this.isClosedPath(V)&&(B|=1),this.isExterior(V)&&(B|=8),this.isStrongPathStart(V)&&(B|=2),this.isStrongPathEnd(V)&&(B|=4),B&&c.setBits(F,B);const W=this.getPathSize(V);if(l.write(F++,G),G+=W,S===0){const J=k,re=A;let se;for(let oe=this.getFirstVertex(V);$<G;oe=this.getNextVertex(oe),$++){const pe=this.getVertexIndex(oe);se=J.readPoint2D(2*pe),re.writePoint2D(2*$,se)}}else for(let J=this.getFirstVertex(V);$<G;J=this.getNextVertex(J),$++){const re=this.getVertexIndex(J);for(let se=0;se<P;se++){const oe=k.readAsDbl(re*P+se);A.writeAsDbl($*P+se,oe)}}}r.setAttributeStreamRef(S,A),l.write(o,n)}if(r.setPathFlagsStreamRef(c),r.setPathStreamRef(l),r.notifyModifiedFlags(65535),y){let _=0,x=0;for(let S=this.getFirstPath(e);S!==ae;S=this.getNextPath(S)){_+=this.getPathSize(S);for(let P=this.getFirstVertex(S);x<_;P=this.getNextVertex(P)){const A=this.getSegment(P);A!==null&&A.isCurve()&&r.replaceSegment(x,A,!0),x++}}}}else if(i===me.enumMultiPoint){const r=s.getImpl(),o=s.getDescription();r.reserve(n),r.resizeNoInit(n);for(let l=0,c=o.getAttributeCount();l<c;l++){const f=o.getSemantics(l),y=aie.getComponentCount(f),_=r.getAttributeStreamRef(f),x=this.m_vertices.getAttributeStreamRef(f);let S=0;const P=this.getFirstPath(e),A=this.getPathSize(P);for(let k=this.getFirstVertex(P);S<A;k=this.getNextVertex(k),S++){const $=this.getVertexIndex(k);for(let F=0;F<y;F++){const G=x.readAsDbl($*y+F);_.writeAsDbl(S*y+F,G)}}r.setAttributeStreamRef(f,_)}r.notifyModifiedFlags(65535)}else K(0);return s}queryPointGeometryOnly(e,i){this.getGeometryType(e)!==me.enumMultiPoint&&Je("get_point_geometry_only");const s=this.getPointCount(e);if(s>1&&Je("get_point_geometry_only"),s===0)return i.assignVertexDescription(this.m_vertexDescription),void i.setEmpty();const n=this.getFirstPath(e),r=this.getFirstVertex(n);this.queryPoint(r,i)}removeGeometry(e){for(let n=this.getFirstPath(e);n!==ae;n=this.removePath(n));const i=this.getPrevGeometry(e),s=this.getNextGeometry(e);return i!==ae?this.setNextGeometry(i,s):this.m_firstGeometry=s,s!==ae?this.setPrevGeometry(s,i):this.m_lastGeometry=i,this.freeGeometry(e),s}createGeometry(e,i){i===void 0&&(i=jo());const s=this.newGeometry(e);return this.m_vertices||(this.m_verticesMp=new Jn({vd:i}),this.m_vertices=this.m_verticesMp.getImpl()),this.mergeVertexDescription(i),this.m_firstGeometry===ae?(this.m_firstGeometry=s,this.m_lastGeometry=s):(this.setPrevGeometry(s,this.m_lastGeometry),this.setNextGeometry(this.m_lastGeometry,s),this.m_lastGeometry=s),s}getFirstGeometry(){return this.m_firstGeometry}getLastGeometry(){return this.m_lastGeometry}getNextGeometry(e){return this.m_geometryIndexList.getField(e,1)}getPrevGeometry(e){return this.m_geometryIndexList.getField(e,0)}getGeometryType(e){return 16777215&this.m_geometryIndexList.getField(e,2)}setGeometryUserIndex(e,i,s){const n=this.m_geometryIndices[i],r=this.getGeometryIndex(e);r>=n.size()&&n.resize(Math.max(1.25*r,16),-1),n.write(r,s)}getGeometryUserIndex(e,i){const s=this.getGeometryIndex(e),n=this.m_geometryIndices[i];return s<n.size()?n.read(s):-1}createGeometryUserIndex(){for(let i=0;i<this.m_geometryIndices.length;i++)if(this.m_geometryIndices[i]===null)return this.m_geometryIndices[i]=Ga(0),i;this.m_geometryIndices.push(Ga(0));const e=this.m_geometryIndices.length-1;return K(e>=0&&e<=Number.MAX_SAFE_INTEGER),e}removeGeometryUserIndex(e){for(this.m_geometryIndices[e]=null;this.m_geometryIndices.length>0&&this.m_geometryIndices.at(-1)===null;)this.m_geometryIndices.pop()}getFirstPath(e){return this.m_geometryIndexList.getField(e,3)}getLastPath(e){return this.m_geometryIndexList.getField(e,4)}hasPointFeatures(){for(let e=this.getFirstGeometry();e!==ae;e=this.getNextGeometry(e))if(!bi(this.getGeometryType(e)))return!0;return!1}getPointCount(e){return this.m_geometryIndexList.getField(e,5)}getPathCount(e){return this.m_geometryIndexList.getField(e,6)}filterClosePoints(e,i,s,n,r){const o=e*e;let l=0;const c=this.hasCurves(),f=this.hasSegmentParentage();for(let y=r===ae?this.getFirstGeometry():r;y!==ae;y=r===ae?this.getNextGeometry(y):ae){const _=this.getGeometryType(y);if(!bi(_)||s&&_!==me.enumPolygon)continue;const x=this.getGeometryType(y)===me.enumPolygon;let S=this.getGeometryModified(y);for(let P=this.getFirstPath(y);P!==ae;){let A=0;for(let G=this.getFirstVertex(P);A<Math.trunc(this.getPathSize(P)/2);){const V=this.getNextVertex(G);if(V===ae)break;const B=this.getXY(G),W=this.getXY(V);let J=Y.sqrDistance(B,W),re=!0;do if(J<=o){if(c){const se=this.getSegment(G);if(se!==null){const oe=se.calculateLength2D();if(J=oe*oe,J>o)break}}if(J===0?l===0&&(l=-1):l=1,V!==this.getLastVertex(P)){const se=f&&(this.getSegmentParentageBreakVertex(G)||this.getSegmentParentageBreakVertex(V));if(this.transferAllDataToTheVertex(V,G),this.removeVertex(V,!1),n&&!S&&(this.setGeometryModified(y,!0),S=!0),f&&G!==V){this.setSegmentParentageBreakVertex(G,se);const oe=this.getNextVertex(G);K(oe!==ae),this.isDiscontinuousSegmentParentage(oe)&&this.setSegmentParentageBreakVertex(oe,!0)}}re=!1}while(!1);re&&(G=this.getNextVertex(G)),A++}let k=this.getFirstVertex(P);for(let G=this.isClosedPath(P)?k:this.getLastVertex(P);this.getPathSize(P)>0;){const V=this.getPrevVertex(G);if(V===ae)break;{const B=this.getXY(V),W=this.getXY(G);let J=Y.sqrDistance(B,W),re=!0;do if(J<=o){if(c){const oe=this.getSegment(V);if(oe!==null){const pe=oe.calculateLength2D();if(J=pe*pe,J>o)break}}J===0?l===0&&(l=-1):l=1;const se=f&&(this.getSegmentParentageBreakVertex(G)||this.getSegmentParentageBreakVertex(V));this.removeVertex(V,!0),n&&!S&&(this.setGeometryModified(y,!0),S=!0),f&&V!==G&&(se||this.isDiscontinuousSegmentParentage(G))&&this.setSegmentParentageBreakVertex(G,!0),k===V&&(k=this.getFirstVertex(P)),re=!1}while(!1);if(re&&(G=this.getPrevVertex(G),G===k))break}}const $=this.getPathSize(P);let F=i&&$<(x?3:2);F&&x&&$===2&&c&&(F=!this.pathHasCurves(P)),F?(P=this.removePath(P),l===0&&(l=-1),n&&!S&&(this.setGeometryModified(y,!0),S=!0)):P=this.getNextPath(P)}}return l}filterClosePoints3D(e,i,s,n,r,o){return K(0),0}hasDegenerateSegments(e){for(let i=this.getFirstGeometry();i!==ae;i=this.getNextGeometry(i))if(bi(this.getGeometryType(i)))for(let s=this.getFirstPath(i);s!==ae;){const n=this.getPathSize(s);if(n===0)return!0;let r=this.getFirstVertex(s);for(let o=0;o<n;o++){const l=this.getNextVertex(r);if(l===ae)break;const c=this.getVertexIndex(r),f=this.getSegmentFromIndex(c);let y=0;if(f!==null){if(y=f.calculateLowerLength2D(),y<=e&&(y=f.calculateUpperLength2D(),y<=e||(y=f.calculateLength2D(),y<=e)))return!0}else{const _=this.getVertexIndex(l);if(y=this.m_vertices.getShortestDistance(c,_),y<=e)return!0}r=l}s=this.getNextPath(s)}return!1}hasDegenerateSegments3D(e,i){return K(0),!1}transferAllDataToTheVertex(e,i){const s=this.getVertexIndex(e),n=this.getVertexIndex(i);if(this.m_weights){const o=this.getWeightWithIndex(s);this.setWeightWithIndex(n,o)}if(this.m_ranks){const o=this.getRankWithIndex(s);this.setRankWithIndex(n,o)}if(this.m_segmentWeights){const o=this.getSegmentWeightWithIndex(s);this.setSegmentWeightWithIndex(n,o)}if(this.m_segmentRanks){const o=this.getSegmentRankWithIndex(s);this.setSegmentRankWithIndex(n,o)}for(let o=0,l=this.m_indices.length;o<l;o++)if(o!==this.m_selectionIndex&&this.m_indices[o]!==null){const c=this.getUserIndex(e,o);c!==-1&&this.setUserIndex(i,o,c)}const r=this.selected(e);r!==this.selected(i)&&(r?this.select(i):this.unselect(i))}splitSegmentAxisAware(e,i,s,n,r){let o=0;const l=this.getNextVertex(e);l===ae&&Je("");const c=this.getVertexIndex(e),f=this.getVertexIndex(l),y=this.getSegmentFromIndex(c);let _=this.m_vertices.getShortestDistance(c,f);const x=this.getPathFromVertex(e),S=this.m_bHasAttributes;S&&y&&(_=y.calculateLength2D());const P=this.getSegmentParentage(e),A=this.getHelperPoint();if(y){let k=0,$=0,F=ae;for(let G=0;G<s;G++){const V=i[G];if(k<V&&V<1){const B=y.cut(k,V);if(n!==null&&(G>0&&B.setStartXY(n[G-1]),B.setEndXY(n[G]),B.normalizeAfterEndpointChange(),$=G),S){const re=_>0?y.calculateSubLengthFromStart(V)/_:0;this.m_vertices.interpolateTwoVertices(c,f,re,A)}A.setXY(B.getEndXY()),F=this.insertVertex(x,l,A),o++;const W=this.getPrevVertex(F),J=this.getVertexIndex(W);this.setSegmentToIndex(J,B),P!==-1&&this.setSegmentParentageAndBreak(F,P,!1),k=V}}if(F!==ae){const G=y.cut(k,1);n!==null&&(G.setStartXY(n[$]),G.normalizeAfterEndpointChange());const V=this.getVertexIndex(F);this.setSegmentToIndex(V,G)}}else{let k=0;for(let $=0;$<s;$++){const F=i[$];if(k<F&&F<1){this.m_vertices.interpolateTwoVertices(c,f,F,A);const G=this.insertVertex(x,l,A);o++,P!==-1&&this.setSegmentParentageAndBreak(G,P,!1)}k=F}}return o}splitSegment(e,i,s,n=null){return this.splitSegmentAxisAware(e,i,s,n,-1)}snapControlPoints(e,i,s){return K(0),!1}snapControlPointsOnSelection(e){if(!this.hasCurves())return!1;let i=0;const s=this.queryVertexIteratorOnSelection();for(let n=s.next();n!==ae;n=s.next()){const r=this.getVertexIndex(n),o=this.getSegmentFromIndex(r);o&&(i|=o.snapControlPoints(e)?1:0)}return i!==0}calculateSubLength2D(e,i,s){return K(0),0}setPoint(e,i,s){if(this.setPointOnly(e,i),this.m_segments!==null){const n=this.getVertexIndex(e),r=this.getSegmentFromIndex(n);r!==null&&(r.setStartXY(i.getXY()),r.normalizeAfterEndpointChange(),s&&r.ensureXYMonotone());const o=this.getPrevVertex(e);if(o!==ae){const l=this.getVertexIndex(o),c=this.getSegmentFromIndex(l);c!==null&&(c.setEndXY(i.getXY()),c.normalizeAfterEndpointChange(),s&&c.ensureXYMonotone())}}}setPointEx(e,i,s,n,r){this.setPoint(e,i,r);const o=this.getVertexIndex(e);this.setWeightWithIndex(o,n),this.setRankWithIndex(o,s)}setPointOnly(e,i){const s=this.getVertexIndex(e);this.m_vertices.setPointByVal(s,i)}setPointOnlyEx(e,i,s,n){K(0)}queryPoint(e,i){const s=this.getVertexIndex(e);this.m_vertices.getPointByVal(s,i)}setXY(e,i){this.setXYCoords(e,i.x,i.y)}setXYCoords(e,i,s){var r;const n=this.getVertexIndex(e);if((r=this.m_vertices)==null||r.setXYCoords(n,i,s),this.m_segments!==null){const o=this.getSegmentFromIndex(n);o!==null&&(o.setStartXYCoords(i,s),o.normalizeAfterEndpointChange());const l=this.getPrevVertex(e);if(l!==ae){const c=this.getVertexIndex(l),f=this.getSegmentFromIndex(c);f!=null&&(f.setEndXYCoords(i,s),f.normalizeAfterEndpointChange())}}}setXYMonotonic(e,i,s){const n=this.getVertexIndex(e);if(this.m_vertices.setXYCoords(n,i,s),this.m_segments!==null){const r=this.getSegmentFromIndex(n);if(r!==null){const l=r.getEndXY();r.setCoordsForIntersector(new Y(i,s),l,!1),r.ensureXYMonotone()}const o=this.getPrevVertex(e);if(o!==ae){const l=this.getVertexIndex(o),c=this.getSegmentFromIndex(l);if(c!==null){const f=c.getStartXY();c.setCoordsForIntersector(f,new Y(i,s),!1),c.ensureXYMonotone()}}}}setXYMonotonicPoint2D(e,i){this.setXYMonotonic(e,i.x,i.y)}queryXY(e,i){const s=this.getVertexIndex(e);return this.m_vertices.queryXY(s,i)}getXY(e){const i=this.getVertexIndex(e);return this.m_vertices.getXY(i)}getXYWithIndex(e){return this.m_xyStream.readPoint2D(2*e)}static setSegDefault(e,i,s){K(0)}setXYZ(e,i,s){K(0)}setXYZCoords(e,i,s,n){K(0)}queryXYZ(e,i){K(0)}getXYZ(e){return K(0),ii.getNAN()}getXYZWithIndex(e){return K(0),ii.getNAN()}mergeVertexDescription(e){this.m_verticesMp.mergeVertexDescription(e),this.m_vertexDescription=this.m_verticesMp.getDescription(),this.m_bHasAttributes=this.m_vertexDescription.getAttributeCount()>1}addAttribute(e){K(0)}getAttributeAsDbl(e,i,s){return this.m_vertices.getAttributeAsDbl(e,this.getVertexIndex(i),s)}queryAttributeAsDbl(e,i,s,n){K(0)}setAttribute(e,i,s,n){K(0)}setAttributeInt(e,i,s,n){K(0)}getVertexDescription(){return this.m_vertexDescription}getMinPathVertexY(e){return K(0),0}getVertexIndex(e){return this.m_vertexIndexList.getField(e,0)}getY(e){const i=this.getVertexIndex(e);return this.m_vertices.queryXY(i,this.m_workPoint2D),this.m_workPoint2D.y}getX(e){return this.getXY(e).x}isEqualXY(e,i){return this.queryXY(e,this.m_workPoint2D),this.queryXY(i,this.m_workPoint2_2D),this.m_workPoint2D.isEqualPoint2D(this.m_workPoint2_2D)}isEqualXYPoint2D(e,i){return this.queryXY(e,this.m_workPoint2D),this.m_workPoint2D.isEqualPoint2D(i)}isEqualXYZPoint3D(e,i){return K(0),!1}setWeight(e,i){i<1&&(i=1);const s=i===1;if(this.m_weights==null){if(s)return;this.m_weights=My(this.m_vertices.getPointCount(),1)}const n=this.getVertexIndex(e);if(n>=this.m_weights.size()){if(s)return;this.m_weights.resize(n+1,1)}this.m_weights.write(n,i)}setWeightWithIndex(e,i){i<1&&(i=1);const s=i===1;if(this.m_weights===null){if(s)return;this.m_weights=My(this.m_vertices.getPointCount(),1)}if(e>=this.m_weights.size()){if(s)return;this.m_weights.resize(e+1,1)}this.m_weights.write(e,i)}getWeight(e){if(this.m_weights===null)return 1;const i=this.getVertexIndex(e);return i>=this.m_weights.size()?1:this.m_weights.read(i)}getWeightWithIndex(e){return this.m_weights===null||e>=this.m_weights.size()?1:this.m_weights.read(e)}getRank(e){if(this.m_ranks===null)return Or;const i=this.getVertexIndex(e);return i>=this.m_ranks.size()?Or:this.m_ranks.read(i)}getRankWithIndex(e){return this.m_ranks===null||e>=this.m_ranks.size()?Or:this.m_ranks.read(e)}setRank(e,i){i<Or&&(i=Or);const s=i===Or;if(this.m_ranks===null){if(s)return;this.m_ranks=Ga(this.m_vertices.getPointCount(),Or)}const n=this.getVertexIndex(e);if(n>=this.m_ranks.size()){if(s)return;this.m_ranks.resize(n+1,Or)}this.m_ranks.write(n,i)}setRankWithIndex(e,i){i<Or&&(i=Or);const s=i===Or;if(this.m_ranks===null){if(s)return;this.m_ranks=Ga(this.m_vertices.getPointCount(),Or)}if(e>=this.m_ranks.size()){if(s)return;this.m_ranks.resize(e+1,Or)}this.m_ranks.write(e,i)}setSegmentWeight(e,i){i<1&&(i=1);const s=i===1;if(this.m_segmentWeights===null){if(s)return;this.m_segmentWeights=My(this.m_vertices.getPointCount(),1)}const n=this.getVertexIndex(e);if(n>=this.m_segmentWeights.size()){if(s)return;this.m_segmentWeights.resize(n+1,1)}this.m_segmentWeights.write(n,i)}setSegmentWeightWithIndex(e,i){i<1&&(i=1);const s=i===1;if(this.m_segmentWeights==null){if(s)return;this.m_segmentWeights=My(this.m_vertices.getPointCount(),1)}if(e>=this.m_segmentWeights.size()){if(s)return;this.m_segmentWeights.resize(e+1,1)}this.m_segmentWeights.write(e,i)}getSegmentWeight(e){if(this.m_segmentWeights===null)return 1;const i=this.getVertexIndex(e);return i>=this.m_segmentWeights.size()?1:this.m_segmentWeights.read(i)}getSegmentWeightWithIndex(e){return this.m_segmentWeights==null||e>=this.m_segmentWeights.size()?1:this.m_segmentWeights.read(e)}getSegmentRank(e){if(this.m_segmentRanks===null)return Bs.st_defaultRank;const i=this.getVertexIndex(e);return i>=this.m_segmentRanks.size()?Bs.st_defaultRank:this.m_segmentRanks.read(i)}getSegmentRankWithIndex(e){return this.m_segmentRanks===null||e>=this.m_segmentRanks.size()?Or:this.m_segmentRanks.read(e)}setSegmentRank(e,i){i<Or&&(i=Or);const s=i===Or;if(this.m_segmentRanks===null){if(s)return;this.m_segmentRanks=Ga(this.m_vertices.getPointCount(),Or)}const n=this.getVertexIndex(e);if(n>=this.m_segmentRanks.size()){if(s)return;this.m_segmentRanks.resize(n+1,Or)}this.m_segmentRanks.write(n,i)}setSegmentRankWithIndex(e,i){K(0)}removeWeights(){K(0),this.m_weights=new nd(0),this.m_segmentWeights=new nd(0)}removeRanks(){K(0),this.m_ranks=new Ns(0),this.m_segmentRanks=new Ns(0)}setUserIndex(e,i,s){const n=this.m_indices[i],r=this.getVertexIndex(e);if(n.size()<=r){if(s===-1)return;n.resize(this.m_vertices.getPointCount(),-1)}n.write(r,s)}getUserIndex(e,i){const s=this.getVertexIndex(e),n=this.m_indices[i];return s<n.size()?n.read(s):-1}addToUserIndex(e,i,s){const n=this.m_indices[i],r=this.getVertexIndex(e);n.size()<=r&&n.resize(this.m_vertices.getPointCount(),-1);const o=n.read(r);n.write(r,o+s)}createUserIndex(){for(let i=0;i<this.m_indices.length;i++)if(this.m_indices[i]===null)return this.m_indices[i]=this.allocateIndex(),i;this.m_indices.push(this.allocateIndex());const e=this.m_indices.length-1;return K(e>=0&&e<=vo()),e}createUserIndexUninitialized(){for(let i=0;i<this.m_indices.length;i++)if(this.m_indices[i]===null)return this.m_indices[i]=this.allocateIndex(!1),i;this.m_indices.push(this.allocateIndex(!1));const e=this.m_indices.length-1;return K(e>=0&&e<=Number.MAX_SAFE_INTEGER),e}fillUserIndexForGeometry(e,i,s){const n=this.m_indices[i],r=n.size();for(let o=this.getFirstPath(e);o!==ae;o=this.getNextPath(o)){let l=this.getFirstVertex(o);for(let c=0,f=this.getPathSize(o);c<f;c++,l=this.getNextVertex(l)){const y=this.getVertexIndex(l);y<r&&n.write(y,s)}}}fillUserIndexForSelection(e,i){K(0)}removeUserIndex(e){for(this.recycleUserIndex(this.m_indices[e]),this.m_indices[e]=null;this.m_indices.length>0&&this.m_indices[this.m_indices.length-1]===null;)this.m_indices.pop()}replaceCurveWithLine(e){if(this.m_segments!==null){const i=this.getVertexIndex(e);this.setSegmentToIndex(i,null)}}queryLineConnector(e,i,s=!1){const n=this.getNextVertex(e);if(n===ae)return!1;if(!this.m_bHasAttributes||s){const r=this.getXY(e);i.setStartXY(r);const o=this.getXY(n);i.setEndXY(o)}else{const r=new Ht({vd:this.getVertexDescription()});this.queryPoint(e,r),i.setStart(r),this.queryPoint(n,r),i.setEnd(r)}return!0}queryLineConnector3D(e,i,s=!1){return K(0),!1}hasCurves(){return this.m_segments!==null}geometryHasCurves(e){return K(0),!1}pathHasCurves(e){if(!this.hasCurves())return!1;const i=this.getFirstVertex(e);if(i===ae)return!1;const s=this.getPathSize(e);let n=i;for(let r=0;r<s;r++,n=this.getNextVertex(n)){const o=this.getSegment(n);if(o!==null&&o.getGeometryType()!==me.enumLine)return!0}return!1}insertPath(e,i){let s=ae;i!==ae?(e!==this.getGeometryFromPath(i)&&Je(""),s=this.getPrevPath(i)):s=this.getLastPath(e);const n=this.newPath(e);return i!==ae&&this.setPrevPath(i,n),this.setNextPath(n,i),this.setPrevPath(n,s),s!==ae?this.setNextPath(s,n):this.setFirstPath(e,n),i===ae&&this.setLastPath(e,n),this.setGeometryPathCount(e,this.getPathCount(e)+1),n}removePath(e){const i=this.getPrevPath(e),s=this.getNextPath(e),n=this.getGeometryFromPath(e);return i!==ae?this.setNextPath(i,s):this.setFirstPath(n,s),s!==ae?this.setPrevPath(s,i):this.setLastPath(n,i),this.clearPath(e),this.setGeometryPathCount(n,this.getPathCount(n)-1),this.freePath(e),s}clearPath(e){const i=this.getFirstVertex(e);if(i!==ae){let s=i;for(let r=0,o=this.getPathSize(e);r<o;r++){const l=s;s=this.getNextVertex(s),this.freeVertex(l)}const n=this.getGeometryFromPath(e);this.setGeometryVertexCount(n,this.getPointCount(n)-this.getPathSize(e))}this.setPathSize(e,0)}getNextPath(e){return this.m_pathIndexList.getField(e,2)}getPrevPath(e){return this.m_pathIndexList.getField(e,1)}getPathSize(e){return this.m_pathIndexList.getField(e,3)}isClosedPath(e){return!!(1&this.getPathFlags(e))}setClosedPath(e,i){if(this.isClosedPath(e)===i)return;if(this.getPathSize(e)>0){const n=this.getFirstVertex(e),r=this.getLastVertex(e);if(i){this.setNextVertex(r,n),this.setPrevVertex(n,r);const o=this.getVertexIndex(r);this.setSegmentToIndex(o,null)}else{this.setNextVertex(r,ae),this.setPrevVertex(n,ae);const o=this.getVertexIndex(r);this.setSegmentToIndex(o,null)}}const s=(1|this.getPathFlags(e))-1;this.setPathFlags(e,s|(i?1:0))}closeAllPaths(e){K(0)}isStrongPathStart(e){return!!(8&this.getPathFlags(e))}isStrongPathEnd(e){return!!(16&this.getPathFlags(e))}setStrongPathStart(e,i){const s=(8|this.getPathFlags(e))-8;this.setPathFlags(e,s|(i?8:0))}setStrongPathEnd(e,i){const s=(16|this.getPathFlags(e))-16;this.setPathFlags(e,s|(i?16:0))}getGeometryFromPath(e){return this.m_pathIndexList.getField(e,7)}isExterior(e){return!!(2&this.getPathFlags(e))}setExterior(e,i){const s=(2|this.getPathFlags(e))-2;this.setPathFlags(e,s|(i?2:0))}getRingArea(e){if(this.isRingAreaValid(e))return this.m_pathAreas[this.getPathIndex(e)];const i=this.getFirstVertex(e);if(i===ae)return 0;const s=this.getXY(i),n=new Fr(0),r=this.getPathSize(e);if(r>2){const l=s.clone(),c=l.x,f=l.y;let y=this.getNextVertex(i);const _=this.getXY(y);y=this.getNextVertex(y);const x=Y.getNAN();for(let S=2;S<r;S++,y=this.getNextVertex(y))this.queryXY(y,x),n.pe((x.x-l.x)*(_.y-f)),l.setCoordsPoint2D(_),_.setCoordsPoint2D(x);n.pe((c-l.x)*(_.y-f))}if(this.hasCurves()){let l=i;for(let c=0;c<r;c++,l=this.getNextVertex(l)){const f=this.getSegment(l);if(f===null||f.getGeometryType()===me.enumLine)continue;const y=2*f.calculateArea2DHelper();n.pe(y)}}this.setRingAreaValid(e,!0);const o=.5*n.getResult();return this.m_pathAreas[this.getPathIndex(e)]=o,o}getPathIndexInternal(e){return this.getPathIndex(e)}getPathInternalIndexFromVertex(e){return this.getPathIndex(this.getPathFromVertex(e))}setPathUserIndex(e,i,s){const n=this.m_pathindices[i],r=this.getPathIndex(e);n.size()<this.m_pathAreas.length&&n.resize(this.m_pathAreas.length,-1),n.write(r,s)}getPathUserIndex(e,i){const s=this.getPathIndex(e),n=this.m_pathindices[i];return s<n.size()?n.read(s):-1}createPathUserIndex(){for(let i=0;i<this.m_pathindices.length;i++)if(this.m_pathindices[i]===null)return this.m_pathindices[i]=this.allocatePathIndex(),i;this.m_pathindices.push(this.allocatePathIndex());const e=this.m_pathindices.length-1;return K(e>=0&&e<=Number.MAX_SAFE_INTEGER),e}fillPathUserIndexForGeometry(e,i,s){const n=this.m_pathindices[i],r=n.size();for(let o=this.getFirstPath(e);o!==ae;o=this.getNextPath(o)){const l=this.getPathIndex(o);l<r&&n.write(l,s)}}removePathUserIndex(e){for(this.recyclePathUserIndex(this.m_pathindices[e]),this.m_pathindices[e]=null;this.m_pathindices.length>0&&this.m_pathindices.at(-1)===null;)this.m_pathindices.pop()}movePath(e,i,s){if(s===ae&&Je(""),i===s)return;const n=this.getNextPath(s);let r=this.getPrevPath(s);const o=this.getGeometryFromPath(s);r===ae?this.setFirstPath(o,n):this.setNextPath(r,n),n===ae?this.setLastPath(o,r):this.setPrevPath(n,r),this.setGeometryVertexCount(o,this.getPointCount(o)-this.getPathSize(s)),this.setGeometryPathCount(o,this.getPathCount(o)-1),r=i===ae?this.getLastPath(e):this.getPrevPath(i),this.setPrevPath(s,r),this.setNextPath(s,i),i===ae?this.setLastPath(e,s):this.setPrevPath(i,s),r===ae?this.setFirstPath(e,s):this.setNextPath(r,s),this.setGeometryVertexCount(e,this.getPointCount(e)+this.getPathSize(s)),this.setGeometryPathCount(e,this.getPathCount(e)+1),this.setPathGeometry(s,e)}addVertex(e,i){return this.m_vertices.getPointByVal(this.getVertexIndex(i),this.getHelperPoint()),this.insertVertex_(e,ae,this.getHelperPoint(),!1)}insertVertex(e,i,s){return this.insertVertex_(e,i,s,!0)}removeVertex(e,i){const s=this.getPathFromVertex(e),n=this.getPrevVertex(e),r=this.getNextVertex(e);n!==ae&&this.setNextVertex(n,r);const o=this.getPathSize(s);if(e===this.getFirstVertex(s)&&this.setFirstVertex(s,o>1?r:ae),r!==ae&&this.setPrevVertex(r,n),e===this.getLastVertex(s)&&this.setLastVertex(s,o>1?n:ae),this.hasCurves()&&n!==ae&&r!==ae){const c=this.getVertexIndex(e),f=this.getVertexIndex(n),y=this.getVertexIndex(r);if(i){const _=this.getSegmentFromIndex(f);if(_!==null){const x=this.m_vertices.getXY(y);_.setEndXY(x),_.normalizeAfterEndpointChange()}this.setSegmentToIndex(c,null)}else{const _=this.getSegmentFromIndex(c);if(this.setSegmentToIndex(c,null),_!==null){const x=this.m_vertices.getXY(f);_.setStartXY(x),_.normalizeAfterEndpointChange()}this.setSegmentToIndex(f,_)}}this.setPathSize(s,o-1);const l=this.getGeometryFromPath(s);return this.setGeometryVertexCount(l,this.getPointCount(l)-1),this.freeVertex(e),r}removeVertices(e,i){K(e!==i);const s=this.getPathFromVertex(e),n=this.getPrevVertex(e),r=this.getPrevVertex(i);n!==ae&&this.setNextVertex(n,i);let o=this.getPathSize(s);const l=this.getVertexIndex(e);this.setSegmentToIndex(l,null),this.setPrevVertex(i,n),this.setPrevVertex(e,ae),this.setNextVertex(r,ae);let c=0,f=e;const y=this.getFirstVertex(s);let _=!1;for(;;){const S=this.getNextVertex(f);if(_||(_=y===f),this.freeVertex(f),c++,f===r)break;f=S}o-=c,_&&this.setFirstVertex(s,o>0?i:ae),this.setPathSize(s,o);const x=this.getGeometryFromPath(s);this.setGeometryVertexCount(x,this.getPointCount(x)-c)}getFirstVertex(e){return this.m_pathIndexList.getField(e,4)}getLastVertex(e){return this.m_pathIndexList.getField(e,5)}getNextVertex(e){return this.m_vertexIndexList.getField(e,2)}getPrevVertex(e){return this.m_vertexIndexList.getField(e,1)}getNextVertexEx(e,i){return i>0?this.m_vertexIndexList.getField(e,2):this.m_vertexIndexList.getField(e,1)}getPrevVertexEx(e,i){return i>0?this.m_vertexIndexList.getField(e,1):this.m_vertexIndexList.getField(e,2)}getPathFromVertex(e){return this.m_vertexIndexList.getField(e,3)}addPoint(e,i){return this.insertVertex_(e,ae,i,!1)}getGeometryFromVertex(e){return this.getGeometryFromPath(this.getPathFromVertex(e))}replaceNaNs(e,i){this.m_vertexDescription.hasAttribute(e)||bt(""),this.m_vertices.replaceNaNs(e,i)}removeNaNVertices(){for(let e=this.getFirstGeometry();e!==ae;e=this.getNextGeometry(e))for(let i=this.getFirstPath(e);i!==ae;i=this.getNextPath(i)){let s=this.getFirstVertex(i);for(let n=0,r=this.getPathSize(i);n<r;n++)s=this.getXY(s).isFinite()?this.getNextVertex(s):this.removeVertex(s,!0)}}queryVertexIterator(e=ae){return this.queryVertexIteratorEx(!1,e)}queryVertexIteratorEx(e,i=ae){let s=ae,n=ae,r=ae,o=ae,l=0,c=!1;for(s=i!==ae?i:this.getFirstGeometry();s!==ae;s=this.getNextGeometry(s))if(!e||bi(this.getGeometryType(s))){for(n=this.getFirstPath(s);n!==ae;n=this.getNextPath(n))if(r=this.getFirstVertex(n),o=r,l=0,r!==ae){c=!0;break}if(c||i!==ae)break}return c||(s=ae),UE.create_(this,s,n,r,o,l,e,!1,i!==ae)}queryVertexIteratorOnSelection(e=ae){return this.m_selection?UE.create_(this,e,ae,ae,ae,-1,!1,!0,e!==ae):this.queryVertexIteratorEx(!1,e)}hasSelection(){return this.m_selection}createEmptySelection(){K(0)}removeSelection(){this.m_selection&&(this.m_selectedVertices.length=0,this.removeUserIndex(this.m_selectionIndex),this.m_selectionIndex=-1,this.m_selection=!1,this.m_selectedCount=0)}select(e){return!!this.selected(e)||(this.setUserIndex(e,this.m_selectionIndex,this.m_selectedVertices.length),this.m_selectedVertices.push(e),this.m_selectedCount++,!1)}unselect(e){if(!this.m_selection)return;const i=this.getUserIndex(e,this.m_selectionIndex);i>=0&&(this.m_selectedVertices[i]=ae,this.setUserIndex(e,this.m_selectionIndex,-1),this.m_selectedCount--)}selected(e){return!this.m_selection||this.selected_(e)}getSelectedCount(){return this.m_selection?this.m_selectedCount:this.getTotalPointCount()}createSelectionForCrackingAndClustering(e,i){return K(0),!1}peelALoop(e,i){this.peelALoop_(e,i,!1)}peelALoopIntoAPath(e,i){return this.peelALoop_(e,i,!0)}applyTransformation(e){if(this.m_verticesMp.applyTransformation(e),this.m_segments!==null)for(let i=0,s=this.m_segments.length;i<s;i++)this.m_segments[i]&&this.m_segments[i].applyTransformation(e)}setGeometryType(e,i){this.m_geometryIndexList.setField(e,2,i)}splitSegmentWithIntersector(e,i,s,n,r){n?this.splitSegmentForward(e,i,s,!0,r):this.splitSegmentBackward(e,i,s,!0,r)}setPrevVertex(e,i){this.m_vertexIndexList.setField(e,1,i)}setNextVertex(e,i){this.m_vertexIndexList.setField(e,2,i)}setPathToVertex(e,i){this.m_vertexIndexList.setField(e,3,i)}setPathSize(e,i){this.m_pathIndexList.setField(e,3,i)}setFirstVertex(e,i){this.m_pathIndexList.setField(e,4,i)}setLastVertex(e,i){this.m_pathIndexList.setField(e,5,i)}getSegment(e){if(this.m_segments!=null){const i=this.getVertexIndex(e);return this.getSegmentFromIndex(i)}return null}isCurve(e){return K(0),!1}querySegment(e,i,s=!0,n=!1){const r=this.getNextVertex(e);if(r===ae)return!1;const o=this.getSegment(e);if(!o)return!s&&(this.queryLineConnector(e,i.createLine(),n),!0);if(i.copyFrom(o,!0),n)return!0;if(this.m_vertexDescription.getAttributeCount()>1){const l=this.getHelperPoint();this.queryPoint(e,l),i.get().setStart(l),this.queryPoint(r,l),i.get().setEnd(l)}return!0}getSegmentFromIndex(e){return(this.m_segments!==null&&this.m_segments.length>e?this.m_segments[e]:null)||null}getAndClearSegmentFromIndex(e){return(this.m_segments!==null&&this.m_segments.length>e?this.m_segments[e]:null)||null}setSegmentToIndex(e,i){if(this.m_bHasForceSetEnvelope=!1,this.m_segments===null){if(!i)return;this.m_segments=[],this.m_segments.length=this.m_vertices.getPointCount()}e>=this.m_segments.length&&(this.m_segments.length=e+1),this.m_segments[e]=i}setGeometryPathCount(e,i){this.m_geometryIndexList.setField(e,6,i)}setGeometryVertexCount(e,i){this.m_geometryIndexList.setField(e,5,i)}ringParentageCheckInternal(e,i){return K(0),!1}reverseRingInternal(e){const i=this.hasCurves(),s=this.hasSegmentParentage();let n=null,r=-1,o=e;if(i){const l=this.getVertexIndex(o);n=this.getAndClearSegmentFromIndex(l)}s&&(r=this.getSegmentParentage(o));do{const l=this.getPrevVertex(o),c=this.getNextVertex(o);if(this.setNextVertex(o,l),this.setPrevVertex(o,c),i){const f=this.getVertexIndex(c),y=this.getSegmentFromIndex(f);n&&n.reverse(),this.setSegmentToIndex(f,n),n=y}if(s){const f=this.getSegmentParentage(c);this.setSegmentParentagePreserveBreak(c,r),r=f}o=c}while(o!==e);this.dbgVerifyIntegrity(e)}setTotalPointCount(e){this.m_pointCount=e}removePathOnly(e){const i=this.getPrevPath(e),s=this.getNextPath(e),n=this.getGeometryFromPath(e);i!==ae?this.setNextPath(i,s):this.setFirstPath(n,s),s!==ae?this.setPrevPath(s,i):this.setLastPath(n,i),this.setFirstVertex(e,ae),this.setLastVertex(e,ae),this.freePath(e)}insertClosedPath(e,i,s,n,r){const o=this.insertPath(e,ae);let l=0,c=s;for(r[0]=!1;;){c===n&&(r[0]=!0),this.setPathToVertex(c,o),l++;const f=this.getNextVertex(c);if(f===s)break;c=f}return this.setClosedPath(o,!0),this.setPathSize(o,l),r[0]&&(s=n),this.setFirstVertex(o,s),this.setLastVertex(o,this.getPrevVertex(s)),this.setRingAreaValid(o,!1),o}findVertex2D(e,i){return K(0),0}findVertex3D(e,i,s){return K(0),0}dbgVerifyMonotone(){}dbgCheckSelection(){}dbgVerifySegment(e){}dbgVerifyIntegrity(e,i=!0){}dbgVerifyVertexCounts(){}dbgVerifyCurves(){}dbgDumpGeometry(e,i){K(0)}removeVertexInternal(e,i){const s=this.getPrevVertex(e),n=this.getNextVertex(e);if(s!==ae&&this.setNextVertex(s,n),n!==ae&&this.setPrevVertex(n,s),this.hasCurves()&&s!==ae&&n!==ae){const r=this.getVertexIndex(e),o=this.getVertexIndex(s),l=this.getVertexIndex(n);if(i){const c=this.getSegmentFromIndex(o);if(c!==null){const f=this.m_vertices.getXY(l);c.setEndXY(f),c.normalizeAfterEndpointChange()}this.setSegmentToIndex(r,null)}else{const c=this.getSegmentFromIndex(r);if(this.setSegmentToIndex(r,null),c!==null){const f=this.m_vertices.getXY(o);c.setStartXY(f),c.normalizeAfterEndpointChange()}this.setSegmentToIndex(o,c)}}return this.freeVertex(e),n}isRingAreaValid(e){return!!(4&this.getPathFlags(e))}setRingAreaValid(e,i){const s=(4|this.getPathFlags(e))-4;this.setPathFlags(e,s|(i?4:0))}compareVerticesSimpleY(e,i){return this.queryXY(e,this.m_workPoint2D),this.queryXY(i,this.m_workPoint2_2D),this.m_workPoint2D.compare(this.m_workPoint2_2D)}compareVerticesSimpleY3D(e,i){return this.getXYZ(e).compare(this.getXYZ(i))}compareVerticesSimpleX(e,i){return this.getXY(e).compareX(this.getXY(i))}sortVerticesSimpleByYHeapMerge(e,i){K(0)}sortVerticesSimpleByY(e,i,s){this.m_bucketSort.sort(e,i,s,new Met(this))}sortVerticesSimpleByX(e,i,s){K(0)}sortVerticesSimpleByY3D(e,i,s){K(0)}snapVertexForPoleClipping(e,i){const s=this.getPrevVertex(e);s!==ae&&this.replaceCurveWithLine(s),this.getNextVertex(e)!==ae&&this.replaceCurveWithLine(e);const n=new Y;this.queryXY(e,n),n.y=i,this.setXY(e,n)}setSegmentParentageAndBreak(e,i,s=!0){if(this.m_segmentParentageIndex===-1){if(i===-1)return;this.m_segmentParentageIndex=this.createUserIndex()}i>=0&&(K(i<=ya()>>1),i<<=1,i|=s?1:0),this.setUserIndex(e,this.m_segmentParentageIndex,i)}setSegmentParentagePreserveBreak(e,i){if(K(i>=-1),this.m_segmentParentageIndex===-1){if(i===-1)return;this.m_segmentParentageIndex=this.createUserIndex()}i>=0&&(K(i<=ya()>>1),i<<=1,i|=this.getSegmentParentageBreakVertex(e)?1:0),this.setUserIndex(e,this.m_segmentParentageIndex,i)}getSegmentParentage(e){if(this.m_segmentParentageIndex===-1)return-1;const i=this.getUserIndex(e,this.m_segmentParentageIndex);return i<0?i:i>>1}getOriginalSegmentInfo(e){if(this.m_segmentParentageIndex!==-1){const i=this.getSegmentParentage(e);return new Pz(i)}return new Pz(-1)}setSegmentParentageBreakVertex(e,i){if(this.m_segmentParentageIndex===-1)return;let s=this.getUserIndex(e,this.m_segmentParentageIndex);s<0||!!(1&s)!==i&&(i?s|=1:s&=ya()>>1<<1,this.setUserIndex(e,this.m_segmentParentageIndex,s))}getSegmentParentageBreakVertex(e){if(this.m_segmentParentageIndex===-1)return!0;const i=this.getUserIndex(e,this.m_segmentParentageIndex);return i<0||!!(1&i)}isDiscontinuousSegmentParentage(e){const i=this.getPrevVertex(e);return i===ae?!1:this.getSegmentParentage(i)!==this.getSegmentParentage(e)}setCurveStitcherPointer(e){this.m_curveStitcher=e}hasSegmentParentage(){return this.m_segmentParentageIndex!==-1}deleteSegmentParentage(){this.m_segmentParentageIndex!==-1&&(this.removeUserIndex(this.m_segmentParentageIndex),this.m_segmentParentageIndex=-1),this.m_curveStitcher=null}clearSegments(){this.m_segments=null}}Bs.st_defaultRank=1;class Pp{constructor(e,i,s){e===void 0?(this.x=new Be,this.y=new Be,this.z=new Be):e instanceof ii?(this.x=new Be(e.x),this.y=new Be(e.y),this.z=new Be(e.z)):e instanceof Be?(this.x=e.clone(),this.y=i.clone(),this.z=s.clone()):Je("EPoint3D constructor")}dotProduct(e){return this.x.mulE(e.x).addE(this.y.mulE(e.y)).addE(this.z.mulE(e.z))}crossProduct(e){return new Pp(this.y.mulE(e.z).subE(this.z.mulE(e.y)),this.z.mulE(e.x).subE(this.x.mulE(e.z)),this.x.mulE(e.y).subE(this.y.mulE(e.x)))}crossProductVector(e){const i=this.y.mulE(e.z).subE(e.y.mulE(this.z)),s=e.x.mulE(this.z).subE(this.x.mulE(e.z)),n=this.x.mulE(e.y).subE(e.x.mulE(this.y));return new Pp(i,s,n)}sqrLength(){return this.x.mulE(this.x).addE(this.y.mulE(this.y)).addE(this.z.mulE(this.z))}length(){return this.sqrLength().sqrt()}static distance(e,i){return e.sub(i).length()}negate(){return new Pp(this.x.negate(),this.y.negate(),this.z.negate())}add(e){return new Pp(this.x.addE(e.x),this.y.addE(e.y),this.z.addE(e.z))}sub(e){return new Pp(this.x.subE(e.x),this.y.subE(e.y),this.z.subE(e.z))}subThis(e){return this.x.subThisE(e.x),this.y.subThisE(e.y),this.z.subThisE(e.z),this}addThis(e){return this.x.addThisE(e.x),this.y.addThisE(e.y),this.z.addThisE(e.z),this}mul(e){return new Pp(this.x.mulE(e),this.y.mulE(e),this.z.mulE(e))}div(e){return new Pp(this.x.divE(e),this.y.divE(e),this.z.divE(e))}eq(e){return this.x.eq(e.x)&&this.y.eq(e.y)&&this.z.eq(e.z)}isZero(){return this.x.isZero()&&this.y.isZero()&&this.z.isZero()}value(){return ii.construct(this.x.value(),this.y.value(),this.z.value())}}class Det{constructor(e){this.m_origin=new ii,this.m_normal=new ii,this.m_axisX=new ii,this.m_axisY=new ii,K(0)}assign(e){return K(0),this}set(e,i,s,n){K(0)}setFromPoints(e,i,s){return K(0),!1}getCoord(e,i){return K(0),{}}getCoord2D(e){return K(0),{}}getCoordX(e,i){return K(0),0}getCoordY(e,i){return K(0),0}getCoordZ(e,i){return K(0),0}setPreferredAxisX(e){K(0)}getOrigin(){return K(0),{}}getNormal(){return K(0),{}}getAxisX(){return this.m_axisX.clone()}getAxisY(){return this.m_axisY.clone()}setAxisX(e,i=!1){K(0)}setAxisY(e,i=!1){K(0)}recalculateAxisY(){K(0)}setOrigin(e){K(0)}setNormal(e,i){K(0)}intersect(e,i){return K(0),!1}intersectLine(e){return K(0),0}intersectLineEx(e,i){return K(0),0}closestCoordinate(e){return K(0),{}}projectVector(e){return K(0),{}}signedDistance(e){return K(0),0}distance(e){return K(0),0}}function ket(t,e){return!1}function v1e(t,e,i,s,n=100,r=ket){let o,l,c,f,y,_,x,S,P;K(s>0);let A,k,$,F=0,G=0;const V=iz();e>i&&(i=St(e,e=i));const B=t(e),W=t(i);B<W?(o=l=c=e,f=y=_=B):(o=l=c=i,f=y=_=W);let J=0;for(;J<n&&($=.5*(i-e),P=e+$,A=s*(Math.abs(o)+.25),k=2*A,!(r(o,f)||Math.abs(o-P)<=k-$));++J){if(Math.abs(G)>A){const re=(o-l)*(f-_);let se=(o-c)*(f-y),oe=(o-c)*se-(o-l)*re;se=2*(se-re),se>0&&(oe=-oe),se=Math.abs(se);const pe=G;G=F,Math.abs(oe)>=Math.abs(se*pe*.5)||oe<=se*(e-o)||oe>=se*(i-o)?(G=o>=P?e-o:i-o,F=iz()*G):(F=oe/se,S=o+F,(S-e<k||i-S<k)&&(F=P-o<0?-Math.abs(A):Math.abs(A)))}else G=o>=P?e-o:i-o,F=G*V;S=o+F,x=t(S),x<f?(S>=o?e=o:i=o,c=l,l=o,o=S,_=y,y=f,f=x):(S<o?e=S:i=S,x<=y||l===o?(c=l,l=S,_=y,y=x):(x<=_||c===o||c===l)&&(c=S,_=x))}return rr(o,f)}function Net(t,e,i){return t>i?t-=Math.ceil((t-i)/rS)*rS:t<e&&(t+=Math.ceil((e-t)/rS)*rS),t}function fl(t,e,i){return $et(t,e,i,0)}function $et(t,e,i,s){const n=i.x,r=i.y;return _1e(t,e,Math.cos(n),Math.sin(n),Math.cos(r),Math.sin(r),s)}function Oet(t,e,i,s,n,r){return _1e(t,e,i,s,n,r,0)}function _1e(t,e,i,s,n,r,o){const l=t/Math.sqrt(1-e*r*r),c=l+o,f=c*n*i,y=c*n*s,_=(l*(1-e)+o)*r;return ii.construct(f,y,_)}function lie(t,e,i){const s=new Be,n=new Be,r=new Be,o=new Be;s.setCos(i.x),n.setSin(i.x),r.setCos(i.y),o.setSin(i.y);const l=o.negate().mulE(o.mul(e)).add(1).sqrt(),c=new Be(t).divE(l),f=c.mulE(r).mulE(s),y=c.mulE(r).mulE(n),_=c.mul(1-e).mulE(o);return new Pp(f,y,_)}function YE(t,e,i){const s=i.x,n=i.y,r=i.z,o=Math.atan2(n,s),l=Math.sqrt(s*s+n*n),c=Math.atan2(r,(1-e)*l);return Y.construct(o,c)}function CN(t,e,i){const s=1-e,n=t/Math.sqrt(Ui(i.x)+Ui(i.y)+Ui(i.z)/s);return i.mul(n)}function Ret(t,e,i,s,n){const r=fl(t,e,i),o=fl(t,e,s);return YE(t,e,ii.lerp(r,o,n))}function Let(t,e,i,s){const n={stack:[],error:void 0,hasError:!1};try{const r=Wl(n,new qh,!1);return Dg.geodeticDistance(t,e,i.x,i.y,s.x,s.y,r,null,null,zi.PE_LINETYPE_GEODESIC),r.val}catch(r){n.error=r,n.hasError=!0}finally{om(n)}}function Fet(t,e,i,s,n){switch(K(i.isFinite()&&s.isFinite()),n){case 0:return Let(t,e,i,s);case 1:return qet(t,e,i);case 2:case 3:{const r=fl(t,e,i),o=fl(t,e,s);return ii.distance(r,o)}default:js("")}}function uie(t,e,i,s,n,r=0,o){if(r===2||r===3)return zet(t,e,i,s,n,r===3);const l=YE(t,e,i),c=y=>{const _=YE(t,e,ii.lerp(s,n,y));return Fet(t,e,l,_,r)},f=ii.distance(s,n);if(f>0){const y=b1e(t,f),{first:_,second:x}=v1e(c,0,1,y);return rr(_,x)}{const y=c(0);return rr(.5,y)}}function zet(t,e,i,s,n,r=!1,o){const l=CN(t,e,i);if(r){const y=new Det({pt0:new ii(0,0,0),pt1:s,pt2:n}),_=y.closestCoordinate(i),x=y.closestCoordinate(s),S=y.closestCoordinate(n),P=Y.getClosestCoordinate(x,S,_),A=CN(t,e,ii.lerp(s,n,P)),k=ii.distance(A,l);return rr(P,k)}const c=y=>{const _=CN(t,e,ii.lerp(s,n,y));return ii.distance(_,l)},f=ii.distance(s,n);if(f>0){const y=b1e(t,f),{first:_,second:x}=v1e(c,0,1,y);return rr(_,x)}{const y=ii.distance(i,s);return rr(.5,y)}}function qet(t,e,i,s){const n={stack:[],error:void 0,hasError:!1};try{const r=Wl(n,new qh,!1);return Dg.greatEllipticDistance(t,e,i.x,i.y,i.x,i.y,r,null,null),r.val}catch(r){n.error=r,n.hasError=!0}finally{om(n)}}function Vet(t,e,i,s,n){if(Math.abs(i.x-s.x)>Math.PI||Math.abs(i.y)>Ss||Math.abs(s.y)>Ss||(Math.abs(i.y)===Ss||Math.abs(s.y)===Ss)&&i.x!==s.x)return Number.NaN;const{first:r,second:o}=mKe(i.x,s.x);let l=n;if(l=Net(l,r,o),!Ze.construct(i.x,s.x).containsCoordinate(l))return Number.NaN;const c=Bt.constructPoint2D(i),f=Bt.constructPoint2D(s),y=lie(1,e,c),_=lie(1,e,f),x=y.crossProductVector(_);if(x.z.isZero())return i.y;const S=x.x.divE(x.z.negate()),P=x.y.divE(x.z.negate()),A=S.mulE(S).addE(P.mulE(P)).sqrt();if(A.isZero()||S.isZero()&&P.isZero())return i.y;const k=Math.atan2(P.value(),S.value());let $=Math.atan2(A.value()*Math.cos(k-l),1-e);const F=fl(1,e,Y.construct(l,$)),G=ii.construct(F.x,F.y,-F.z),V=x.value().dotProduct(F),B=x.value().dotProduct(G);return Math.abs(B)<Math.abs(V)&&($=-$),$}function Get(t,e){return t*Math.sqrt(1-e)}function jet(t,e){return(1-e)*t}function cie(t,e,i){const s=i/(2*jet(t,e)),n=s*s;return i*(1-n*(.16666666666666666-.008333333333333333*n))}function b1e(t,e){if(e!==0){const i=t*PKe()/e;return Math.min(i,1e-10)}return 0}function vs(t,e,i,s,n){return x1e(t,e,null,i,s,n)}function x1e(t,e,i,s,n,r){const o=t.getGeometryType();if(o===me.enumPoint){const y=t.getXY();return e.contains(y)?t:t.createInstance()}if(o===me.enumEnvelope){const y=xe.constructEmpty();if(t.queryEnvelope(y),y.intersect(e)){const _=t.clone();return _.setEnvelope(y),_}return t.createInstance()}if(t.isEmpty())return t;if(e.isEmpty())return t.createInstance();const l=e.clone();{const y=new xe;if(t.queryLooseEnvelope(y),l.containsEnvelope(y))return t;if(!l.isIntersecting(y))return t.createInstance();n===0&&(y.intersect(l),y.inflate(Math.max(.1*y.maxDimension(),1)),y.intersect(l),l.assign(y))}let c=s;if((i!==null||Number.isNaN(c))&&(c=Kn(i,l,!1).total()),o===me.enumGeometryCollection){const y=t,_=t.createInstance();for(let x=0,S=y.getGeometryCount();x<S;x++){const P=y.getGeometry(x);if(P.isEmpty())continue;const A=vs(P,l,c,n,r);A.isEmpty()||(A===P?_.addGeometry(A.clone()):_.addGeometry(A))}return _}el(o)||Je("Clip: geometry not supported");const f=t.getImpl().getAccelerators();if(f!==null){const y=f.getRasterizedGeometry();K(y===null)}switch(o){case me.enumMultiPoint:{const y=t;let _;const x=y.getPointCount(),S=y.getImpl().getAttributeStreamRef(0);let P=0;for(let A=0;A<x;A++){const k=S.readPoint2D(2*A);l.contains(k)||(P===0&&(_=y.createInstance()),P<A&&_.addPoints(y,P,A),P=A+1)}return P>0&&_.addPoints(y,P,x),P===0?y:(K(_!==null),_)}case me.enumPolygon:case me.enumPolyline:return Het(t,l,c,n,r);default:bt("")}}function Bet(t,e,i,s,n,r){const o=new xu(e,r),l=new xe;return t.queryLooseEnvelope(l),e.containsEnvelope(l)?t:e.isIntersecting(l)?o.clipPolesOut(t,n):t.createInstance()}function Het(t,e,i,s,n){return new xu(e,n).clipMultiPath2(t,i,s)}class xu{constructor(e,i){this.m_shape=new Bs,this.m_geometry=ae,this.m_verticesOnExtentIndex=-1,this.m_verticesOnExtent=[],this.m_progressCounter=0,this.m_extent=new xe(e),this.m_progressTracker=i}progress_(){}clipMultiPath2(e,i,s){return e.getGeometryType()===me.enumPolygon?this.clipPolygonOrProjectedPolyline2(e,s):this.clipPolyline(e,i)}clipPolygonOrProjectedPolyline2(e,i){const s=e.getGeometryType()===me.enumPolyline;if(this.m_extent.width()===0||this.m_extent.height()===0)return e.createInstance();const n=xe.constructEmpty();e.queryLooseEnvelope(n),this.m_geometry=s?this.m_shape.addGeometry(e):this.m_shape.addGeometry(e,this.m_extent);const r=xe.constructEmpty(),o=xe.constructEmpty(),l=new Y,c=new Y,f=new Array(9),y=new Array(9),_=Ge(Y,9);let x=null;const S=new si,P=[];let A=!1;for(let $=0;!A&&$<4;$++){let F=!1;const G=!!(1&$);let V=0;switch($){case 0:V=this.m_extent.xmin,F=n.xmin<=V&&n.xmax>=V;break;case 1:V=this.m_extent.ymin,F=n.ymin<=V&&n.ymax>=V;break;case 2:V=this.m_extent.xmax,F=n.xmin<=V&&n.xmax>=V;break;case 3:V=this.m_extent.ymax,F=n.ymin<=V&&n.ymax>=V}if(F){A=!0;for(let B=this.m_shape.getFirstPath(this.m_geometry);B!==ae;){let W=!0,J=-1,re=-1;const se=this.m_shape.getFirstVertex(B);let oe=se;do{this.progress_(),x=this.m_shape.getSegment(oe);let pe=x;if(pe===null){const de=this.m_shape.getNextVertex(oe);if(de===ae){K(s),J===0&&P.push(oe);break}this.m_shape.queryXY(oe,l),S.setStartXY(l),this.m_shape.queryXY(de,c),S.setEndXY(c),pe=S}pe.queryLooseEnvelope(r);let ue=xu.checkSegmentIntersection(r,$,V);pe.isCurve()&&ue===0&&pe.isCurve()&&(S.setStartXY(pe.getStartXY()),S.setEndXY(pe.getEndXY()),this.m_shape.replaceCurveWithLine(oe),pe=S,S.queryEnvelope(r),ue=xu.checkSegmentIntersection(r,$,V));let ce=0,ne=ae;if(ue===-1){const de=pe.intersectionWithAxis2D(G,V,f,y);if(de>0){let Re=null;if(pe.isCurve()){Re=_,K(de<=9);for(let Oe=0;Oe<de;Oe++)G?_[Oe].setCoords(f[Oe],V):_[Oe].setCoords(V,f[Oe]);ce=this.m_shape.splitSegmentAxisAware(oe,y,de,Re,G?1:0)}else ce=this.m_shape.splitSegmentAxisAware(oe,y,de,null,-1)}else ce=0;ce+=1;let Se=oe,Pe=this.m_shape.getNextVertex(Se);pe=null;for(let Re=0;Re<ce;Re++){this.m_shape.queryXY(Se,l),this.m_shape.queryXY(Pe,c),x=this.m_shape.getSegment(Se);let Oe=x;Oe===null&&(S.setStartXY(l),S.setEndXY(c),Oe=S),Oe.queryEnvelope(o);let we=xu.checkSegmentIntersection(o,$,V);Oe.isCurve()&&we===0&&(this.m_shape.replaceCurveWithLine(Se),S.setStartXY(l),S.setEndXY(c),Oe=S,Oe.queryEnvelope(o),we=xu.checkSegmentIntersection(o,$,V)),we===-1&&(G?Math.abs(l.y-V)<Math.abs(c.y-V)?(l.y=V,this.m_shape.setXY(Se,l)):(c.y=V,this.m_shape.setXY(Pe,c)):Math.abs(l.x-V)<Math.abs(c.x-V)?(l.x=V,this.m_shape.setXY(Se,l)):(c.x=V,this.m_shape.setXY(Pe,c)),x=this.m_shape.getSegment(Se),Oe=x,Oe===null&&(S.setStartXY(l),S.setEndXY(c),Oe=S),Oe.queryEnvelope(o),we=xu.checkSegmentIntersection(o,$,V),we===-1&&(we=xu.checkSegmentIntersectionLoose(o,$,V)));const Fe=J;J=we,re===-1&&(re=J),Fe===0&&J===1||Fe===1&&J===0||Fe===0&&J===0&&P.push(Se),J===1&&(A=!1,W=!1),Se=Pe,ne=Se,Pe=this.m_shape.getNextVertex(Pe)}}if(ce===0){const de=J;J=ue,re===-1&&(re=J),de===0&&J>=1||de>=1&&J===0||de===0&&J===0&&P.push(oe),J===1&&(A=!1,W=!1),ne=this.m_shape.getNextVertex(oe)}if(oe=ne,P.length>=256){for(let de=1,Se=P.length-1;de<Se;de++){const Pe=P[de];s?this.m_shape.snapVertexForPoleClipping(Pe,V):this.m_shape.removeVertex(Pe,!1)}P[1]=P.at(-1),P.length=2}}while(oe!==se);if(!W){re!==0||!s&&J!==0&&J!==2||P.push(se);for(let pe=0,ue=P.length;pe<ue;pe++){const ce=P[pe];s?this.m_shape.snapVertexForPoleClipping(ce,V):this.m_shape.removeVertex(ce,!1)}}P.length=0,B=W||this.m_shape.getPathSize(B)===0?this.m_shape.removePath(B):this.m_shape.getNextPath(B)}}}if(A)return e.createInstance();x=null,s?this.removeSpikesAlongPoles():this.resolveBoundaryOverlaps(),i>0&&this.densifyAlongClipExtent(i);const k=this.m_shape.getGeometry(this.m_geometry);return k.getGeometryType()===me.enumPolygon&&k.setFillRule(e.getFillRule()),k}clipPolyline(e,i){const s=xe.constructEmpty(),n=xe.constructEmpty(),r=new Array(9),o=new Array(9),l=new Qt;let c=e;const f=xe.constructEmpty();e.queryLooseEnvelope(f);for(let y=0;y<4;y++){let _=!1;const x=!!(1&y);let S=0;switch(y){case 0:S=this.m_extent.xmin,_=f.xmin<=S&&f.xmax>=S;break;case 1:S=this.m_extent.ymin,_=f.ymin<=S&&f.ymax>=S;break;case 2:S=this.m_extent.xmax,_=f.xmin<=S&&f.xmax>=S;break;case 3:S=this.m_extent.ymax,_=f.ymin<=S&&f.ymax>=S}if(!_)continue;const P=c;c=e.createInstance();const A=P.getImpl().querySegmentIterator();A.resetToFirstPath();const k=new Y,$=new Y;for(;A.nextPath();){let F=-1,G=!0;for(;A.hasNextSegment();){this.progress_();const V=A.nextSegment(),B=V.isDegenerate(0);V.queryLooseEnvelope(s);const W=xu.checkSegmentIntersection(s,y,S);if(W===-1){const J=V.intersectionWithAxis2D(x,S,r,o);let re=0;k.assign(V.getStartXY());for(let se=0;se<=J;se++){const oe=se<J?o[se]:1;if(re===oe)continue;V.queryCut(re,oe,l,!1);const pe=l.get();let ue=!1;if(pe.getStartXY().equals(k)||(pe.setStartXY(k),ue=!0),se<J&&(x?($.x=r[se],$.y=S):($.x=S,$.y=r[se]),pe.getEndXY().equals($)||(pe.setEndXY($),ue=!0)),ue&&pe.normalizeAfterEndpointChange(),!B&&pe.isDegenerate(0))continue;pe.queryEnvelope(n);let ce=xu.checkSegmentIntersection(n,y,S);if(ce===-1){const ne=pe.getStartXY(),de=pe.getEndXY();ue=!1,x?Math.abs(ne.y-S)<Math.abs(de.y-S)?(ne.y=S,pe.setStartXY(ne),ne.equals(pe.getStartXY())||(pe.setStartXY(ne),ue=!0)):(de.y=S,de.equals(pe.getEndXY())||(pe.setEndXY(de),ue=!0)):Math.abs(ne.x-S)<Math.abs(de.x-S)?(ne.x=S,ne.equals(pe.getStartXY())||(pe.setStartXY(ne),ue=!0)):(de.x=S,de.equals(pe.getEndXY())||(pe.setEndXY(de),ue=!0)),ue&&pe.normalizeAfterEndpointChange(),pe.queryEnvelope(n),ce=xu.checkSegmentIntersection(n,y,S),ce===-1&&(ce=xu.checkSegmentIntersectionLoose(n,y,S))}k.assign(pe.getEndXY()),re=oe,F=ce,F>=1?(c.addSegment(pe,G),G=!1):G=!0}}else F=W,F>=1?(c.addSegment(V,G),G=!1):G=!0}}}return c}static checkSegmentIntersection(e,i,s){switch(i){case 0:return e.xmin<s&&e.xmax<=s?0:e.xmin>=s?e.xmax===s?2:1:-1;case 1:return e.ymin<s&&e.ymax<=s?0:e.ymin>=s?e.ymax===s?2:1:-1;case 2:return e.xmin>=s&&e.xmax>s?0:e.xmax<=s?e.xmin===s?2:1:-1;case 3:return e.ymin>=s&&e.ymax>s?0:e.ymax<=s?e.ymin===s?2:1:-1}return K(0),0}static checkSegmentIntersectionLoose(e,i,s){return K(0),0}resolveBoundaryOverlaps(){this.m_verticesOnExtentIndex=-1,this.splitSegments(!1,this.m_extent.xmin),this.splitSegments(!1,this.m_extent.xmax),this.splitSegments(!0,this.m_extent.ymin),this.splitSegments(!0,this.m_extent.ymax),this.m_verticesOnExtent.length=0,this.m_verticesOnExtentIndex=this.m_shape.createUserIndex();const e=new Y;for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;i=this.m_shape.getNextPath(i)){let s=this.m_shape.getFirstVertex(i);for(let n=0,r=this.m_shape.getPathSize(i);n<r;n++,s=this.m_shape.getNextVertex(s))this.progress_(),this.m_shape.queryXY(s,e),this.m_extent.xmin!==e.x&&this.m_extent.xmax!==e.x&&this.m_extent.ymin!==e.y&&this.m_extent.ymax!==e.y||(this.m_shape.setUserIndex(s,this.m_verticesOnExtentIndex,this.m_verticesOnExtent.length),this.m_verticesOnExtent.push(s))}this.dbgCheckPathFirst(),this.resolveOverlaps(!1,this.m_extent.xmin),this.dbgCheckPathFirst(),this.resolveOverlaps(!1,this.m_extent.xmax),this.dbgCheckPathFirst(),this.resolveOverlaps(!0,this.m_extent.ymin),this.dbgCheckPathFirst(),this.resolveOverlaps(!0,this.m_extent.ymax),this.fixPaths()}densifyAlongClipExtent(e){const i=new Y(0,0),s=new Y(0,0),n=new Array(2048);for(let r=this.m_shape.getFirstPath(this.m_geometry);r!==ae;r=this.m_shape.getNextPath(r)){const o=this.m_shape.getFirstVertex(r);let l=o;do{const c=this.m_shape.getNextVertex(l);this.m_shape.queryXY(l,i);let f=-1;if(i.x===this.m_extent.xmin?(this.m_shape.queryXY(c,s),s.x===this.m_extent.xmin&&(f=1)):i.x===this.m_extent.xmax&&(this.m_shape.queryXY(c,s),s.x===this.m_extent.xmax&&(f=1)),i.y===this.m_extent.ymin?(this.m_shape.queryXY(c,s),s.y===this.m_extent.ymin&&(f=0)):i.y===this.m_extent.ymax&&(this.m_shape.queryXY(c,s),s.y===this.m_extent.ymax&&(f=0)),f===-1){l=c;continue}if(this.isCurve(l)){l=c;continue}const y=i.clone(),_=new Y(0,0);if(f){const P=i.y-this.m_extent.ymin;_.y=xn(s.y-i.y),y.y=e*Jp(Math.floor(Math.abs(P)/e),P)+this.m_extent.ymin,_.y<0&&(y.y+=e)}else{const P=i.x-this.m_extent.xmin;_.x=xn(s.x-i.x),y.x=e*Jp(Math.floor(Math.abs(P)/e),P)+this.m_extent.xmin,_.x<0&&(y.x+=e)}const x=f?s.y-i.y:s.x-i.x,S=Math.abs(x);if(S/e>65536&&bt(""),S>0){const P=Math.trunc(S/e)+2;n.length<P&&(n.length=P);let A=0;for(let k=0;;k++){const $=y.add(_.mul(k*e)),F=(f?$.y-i.y:$.x-i.x)/x;if(F>=1)break;F<=0||(K(A<=n.length),n[A]=F,A++)}A!==0&&this.m_shape.splitSegment(l,n,A)}l=c}while(l!==o)}}splitSegments(e,i){let s=-1;const n=new Y,r=[];for(let P=this.m_shape.getFirstPath(this.m_geometry);P!==ae;P=this.m_shape.getNextPath(P)){let A=this.m_shape.getFirstVertex(P),k=ae;for(let $=0,F=this.m_shape.getPathSize(P);$<F;$++,A=k)if(this.progress_(),k=this.m_shape.getNextVertex(A),this.m_shape.queryXY(A,n),(e?n.y===i:n.x===i)&&(this.m_shape.queryXY(k,n),e?n.y===i:n.x===i)){if(this.isCurve(A))continue;s===-1&&(s=this.m_shape.createUserIndex()),this.m_shape.getUserIndex(A,s)!==1&&(r.push(A),this.m_shape.setUserIndex(A,s,1)),this.m_shape.getUserIndex(k,s)!==1&&(r.push(k),this.m_shape.setUserIndex(k,s,1))}}if(s!==-1&&this.m_shape.removeUserIndex(s),r.length<3)return;r.sort((P,A)=>this.compareVertices(P,A));const o=new Y,l=new Y,c=new Y;l.setNAN();let f=-1,y=[],_=[];const x=this.m_shape.createUserIndex(),S=this.m_shape.createUserIndex();for(let P=0,A=r.length;P<A;P++){const k=r[P];if(this.m_shape.queryXY(k,n),!n.isEqualPoint2D(l)){if(f===-1){f=P,l.setCoordsPoint2D(n);continue}for(let F=f;F<P;F++){const G=r[F],V=this.m_shape.getNextVertex(G),B=this.m_shape.getPrevVertex(G);let W=!1;this.m_shape.queryXY(V,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(G)||(y.push(G),W=!0,this.m_shape.setUserIndex(G,S,1))),this.m_shape.queryXY(B,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(B)||(W||y.push(G),this.m_shape.setUserIndex(G,x,1)))}for(let F=0,G=y.length;F<G;F++){const V=y[F],B=this.m_shape.getUserIndex(V,x),W=this.m_shape.getUserIndex(V,S);if(B===1){const J=this.m_shape.getPrevVertex(V);this.m_shape.queryXY(J,c);let re=0;if(!c.isEqualPoint2D(n)){const se=Y.distance(l,c);re=Y.distance(c,n)/se,re===0?re=Number.EPSILON:re===1&&(re=1-Number.EPSILON),this.m_shape.splitSegment(J,[re],1);const oe=this.m_shape.getPrevVertex(V);this.m_shape.setXY(oe,n),_.push(oe),this.m_shape.setUserIndex(oe,x,1),this.m_shape.setUserIndex(oe,S,-1)}}if(W===1){const J=this.m_shape.getNextVertex(V);this.m_shape.queryXY(J,c);let re=0;if(!c.isEqualPoint2D(n)){const se=Y.distance(l,c);re=Y.distance(l,n)/se,re===0?re=Number.EPSILON:re===1&&(re=1-Number.EPSILON),this.m_shape.splitSegment(V,[re],1);const oe=this.m_shape.getNextVertex(V);this.m_shape.setXY(oe,n),_.push(oe),this.m_shape.setUserIndex(oe,x,-1),this.m_shape.setUserIndex(oe,S,1)}}}const $=y;y=_,_=$,_.length=0,f=P,l.setCoordsPoint2D(n)}}this.m_shape.removeUserIndex(x),this.m_shape.removeUserIndex(S)}resolveOverlaps(e,i){const s=new Y,n=[];let r=-1;for(let f=0,y=this.m_verticesOnExtent.length;f<y;f++){this.progress_();const _=this.m_verticesOnExtent[f];if(_===ae)continue;const x=this.m_shape.getNextVertex(_);if(this.m_shape.queryXY(_,s),(e?s.y===i:s.x===i)&&(this.m_shape.queryXY(x,s),e?s.y===i:s.x===i)){if(this.isCurve(_))continue;r===-1&&(r=this.m_shape.createUserIndex()),this.m_shape.getUserIndex(_,r)!==-2&&(n.push(_),this.m_shape.setUserIndex(_,r,-2)),this.m_shape.getUserIndex(x,r)!==-2&&(n.push(x),this.m_shape.setUserIndex(x,r,-2))}}if(n.length===0)return void(r!==-1&&this.m_shape.removeUserIndex(r));K(r!==-1),n.sort((f,y)=>this.compareVertices(f,y));for(let f=0,y=n.length;f<y;f++){const _=n[f];this.m_shape.setUserIndex(_,r,f)}const o=new Y,l=new Y;l.setNAN();let c=-1;for(let f=0,y=n.length;f<y;f++){this.progress_();const _=n[f];if(_!==ae&&(this.m_shape.queryXY(_,s),!s.isEqualPoint2D(l))){if(c!==-1)for(;;){let x=!1;const S=f;for(let P=c;P<S;P++){const A=n[P];if(A===ae)continue;let k=ae;const $=this.m_shape.getNextVertex(A);this.m_shape.queryXY($,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(A)||(k=$));let F=ae;const G=this.m_shape.getPrevVertex(A);if(this.m_shape.queryXY(G,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(G)||(F=G)),k===ae||F===ae){if(k!==ae||F!==ae){for(let V=P+1;V<f;V++){const B=n[V];if(B===ae)continue;const W=this.m_shape.getNextVertex(B);let J=ae;this.m_shape.queryXY(W,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(B)||(J=W));const re=this.m_shape.getPrevVertex(B);let se=ae;if(this.m_shape.queryXY(re,o),l.compare(o)<0&&(e?o.y===i:o.x===i)&&(this.isCurve(re)||(se=re)),J!==ae&&se!==ae){this.beforeRemoveVertex(B,n,r),this.m_shape.removeVertex(B,!1),this.beforeRemoveVertex(J,n,r),this.m_shape.removeVertex(J,!1),x=!0;break}if(k!==ae&&se!==ae){this.removeOverlap(n,A,k,B,se,r),x=!0;break}if(F!==ae&&J!==ae){this.removeOverlap(n,B,J,A,F,r),x=!0;break}}if(x)break}}else this.beforeRemoveVertex(A,n,r),this.m_shape.removeVertex(A,!1),this.beforeRemoveVertex(k,n,r),this.m_shape.removeVertex(k,!1),x=!0}if(!x)break}c=f,l.setCoordsPoint2D(s)}}this.m_shape.removeUserIndex(r)}beforeRemoveVertex(e,i,s){let n=this.m_shape.getUserIndex(e,s);K(n>=0),i[n]=ae,n=this.m_shape.getUserIndex(e,this.m_verticesOnExtentIndex),K(n>=0),this.m_verticesOnExtent[n]=ae;const r=this.m_shape.getPathFromVertex(e);r!==ae&&this.m_shape.getFirstVertex(r)===e&&(this.m_shape.setFirstVertex(r,ae),this.m_shape.setLastVertex(r,ae))}removeOverlap(e,i,s,n,r,o){this.m_shape.setNextVertex(i,n),this.m_shape.setPrevVertex(n,i),this.m_shape.setPrevVertex(s,r),this.m_shape.setNextVertex(r,s),this.beforeRemoveVertex(n,e,o),this.m_shape.removeVertexInternal(n,!1),this.beforeRemoveVertex(r,e,o),this.m_shape.removeVertexInternal(r,!0)}removeSpikesAlongPoles(){this.removeSpikesOnPole(this.m_extent.ymin),this.removeSpikesOnPole(this.m_extent.ymax)}removeSpikesOnPole(e){for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;i=this.m_shape.getNextPath(i)){const s=this.m_shape.getPathSize(i);if(s<3)continue;let n=this.m_shape.getFirstVertex(i);const r=new Y;this.m_shape.queryXY(n,r);let o=r.y===e&&!this.isCurve(n);n=this.m_shape.getNextVertex(n);const l=new Y;this.m_shape.queryXY(n,l);let c=l.y===e&&!this.isCurve(n);n=this.m_shape.getNextVertex(n);const f=new Y;for(let y=0,_=s-2;y<_;y++,n=this.m_shape.getNextVertex(n)){this.progress_(),this.m_shape.queryXY(n,f);const x=f.y===e;if(c&&o&&x&&(l.x-r.x)*(f.x-l.x)<=0){this.m_shape.removeVertex(this.m_shape.getPrevVertex(n),!1),l.setCoordsPoint2D(f),c=x&&!this.isCurve(n);continue}r.setCoordsPoint2D(l),o=c,l.setCoordsPoint2D(f),c=x&&!this.isCurve(n)}}}fixPaths(){for(let r=0,o=this.m_verticesOnExtent.length;r<o;r++){const l=this.m_verticesOnExtent[r];l!==ae&&this.m_shape.setPathToVertex(l,ae)}const e=this.m_shape.hasCurves();let i=0,s=0;for(let r=this.m_shape.getFirstPath(this.m_geometry);r!==ae;){const o=this.m_shape.getFirstVertex(r);if(o===ae||r!==this.m_shape.getPathFromVertex(o)){const f=r;r=this.m_shape.getNextPath(r),this.m_shape.setFirstVertex(f,ae),this.m_shape.removePathOnly(f);continue}let l=o,c=0;do this.m_shape.setPathToVertex(l,r),c++,l=this.m_shape.getNextVertex(l);while(l!==o);this.m_shape.setRingAreaValid(r,!1),this.m_shape.setLastVertex(r,this.m_shape.getPrevVertex(o)),this.m_shape.setPathSize(r,c),s+=c,i++,r=this.m_shape.getNextPath(r)}for(let r=0,o=this.m_verticesOnExtent.length;r<o;r++){let l=this.m_verticesOnExtent[r];if(l===ae)continue;let c=this.m_shape.getPathFromVertex(l);if(c!==ae)continue;c=this.m_shape.insertPath(this.m_geometry,ae);let f=!1,y=0;const _=l;do this.m_shape.setPathToVertex(l,c),y++,e&&y<=2&&(f||(f=this.isCurve(l))),l=this.m_shape.getNextVertex(l);while(l!==_);if(f?y===0:y<=2){let x=this.m_shape.getUserIndex(_,this.m_verticesOnExtentIndex);K(x>=0),this.m_verticesOnExtent[x]=ae;const S=this.m_shape.removeVertex(_,!1);y===2&&(x=this.m_shape.getUserIndex(S,this.m_verticesOnExtentIndex),x>=0&&(this.m_verticesOnExtent[x]=ae),this.m_shape.removeVertex(S,!1));const P=c;c=this.m_shape.getNextPath(c),this.m_shape.setFirstVertex(P,ae),this.m_shape.removePathOnly(P)}else this.m_shape.setClosedPath(c,!0),this.m_shape.setPathSize(c,y),this.m_shape.setFirstVertex(c,_),this.m_shape.setLastVertex(c,this.m_shape.getPrevVertex(_)),this.m_shape.setRingAreaValid(c,!1),s+=y,i++}this.m_shape.setGeometryPathCount(this.m_geometry,i),this.m_shape.setGeometryVertexCount(this.m_geometry,s);let n=0;for(let r=this.m_shape.getFirstGeometry();r!==ae;r=this.m_shape.getNextGeometry(r))n+=this.m_shape.getPointCount(r);this.m_shape.setTotalPointCount(n)}dbgCheckPathFirst(){}isCurve(e){return this.m_shape.getSegment(e)!==null}compareVertices(e,i){const s=new Y;this.m_shape.queryXY(e,s);const n=new Y;return this.m_shape.queryXY(i,n),s.compare(n)}clipPolesOut(e,i){return this.clipPolygonOrProjectedPolyline2(e,i)}}function Uet(t,e,i,s,n,r){return new Tj(0,0,0,null,!1,vo()).densifyEx(t,e,i,s,!1,r)}function w1e(t,e,i,s,n,r,o,l){r&&(r.length=0),o&&(o.length=0);const c=t.getGeometryType();if(c===me.enumLine)return r&&(r.push(t.getStartXY()),r.push(Y.getNAN()),r.push(Y.getNAN()),r.push(t.getEndXY())),o&&(o.push(0),o.push(1)),1;if(c===me.enumBezier){if(!s)return r&&(r.push(t.getStartXY()),r.push(t.getControlPoint1()),r.push(t.getControlPoint2()),r.push(t.getEndXY())),o&&(o.push(0),o.push(1)),1;const f=[];f.length=9;let y=t.getMonotonicPartParams(f.length,f);if(f.length=y,y=R9(t,i,f),o&&o.splice(0,0,...f.slice(0,y)),r){const _=new Qt;for(let x=1;x<y;x++){const S=f[x-1],P=f[x];t.queryCut(S,P,_,!0);const A=_.get();L6(A),x===1&&r.push(A.getStartXY()),r.push(A.getControlPoint1()),r.push(A.getControlPoint2()),r.push(A.getEndXY())}}return y-1}if(c===me.enumEllipticArc){const f=t;if(f.isDegenerateToLine()||f.isDegenerate(0))return r&&(r.push(t.getStartXY()),r.push(Y.getNAN()),r.push(Y.getNAN()),r.push(t.getEndXY())),o&&(o.push(0),o.push(1)),1;if(s&&!f.isMonotoneQuickAndDirty()){const y=[];y.length=6;let _=f.getMonotonicPartParams(y.length,y);y.length=_,_=R9(t,i,y);let x=0;if(_>2){const S=new Qt,P=o||[];let A=0;for(let k=1;k<_;k++){const $=y[A],F=y[k];if(f.queryCut($,F,S,!0),S.get().isDegenerate(0))continue;const G=P.length,V=hie(k===1,S.get(),e,i,s,r,o);K(V>0),x+=V;const B=k===_-1,W=y[A],J=S.get().getSweepAngle()/f.getSweepAngle();for(let re=G,se=P.length;re<se;re++)if(P[re]=!B||re+1<se?W+P[re]*J:1,r){const oe=3*re,pe=f.getCoord2D(P[re]);r[oe].setCoordsPoint2D(pe),oe>0&&r7(r.slice(oe-3))}A=k}return x}}return hie(!0,f,e,i,s,r,o)}if(c===me.enumRationalBezier2){const f=t;if(s&&!f.isMonotoneQuickAndDirty()){const y=[];y.length=6;let _=f.getMonotonicPartParams(y.length,y);y.length=_,_=R9(t,i,y);let x=0;if(_>2){const S=new Qt,P=o||[];for(let A=1;A<_;A++){const k=y[A-1],$=y[A];f.queryCut(k,$,S,!0);const F=P.length;x+=die(A===1,S.get());const G=A===_-1,V=y[A-1];for(let B=F,W=P.length;B<W;B++)if(P[B]=!G||B+1<W?V+P[B]:1,r){const J=3*B,re=f.getCoord2D(P[B]);r[J].setCoordsPoint2D(re),J>0&&Zge(r.slice(J-3))}}return x}}return die()}if(c===me.enumBezier2){const f=t,y=Ge(Y,3);f.queryControlPoints(y);const _=new Nu;return _.constructFromQuadratic(y),w1e(_,e,i,s,n,r,o)}js("")}function Tz(t,e,i,s,n,r,o,l,c){const f=t.getGeometryType();if(r&&(r.length=0,o.length=0),l&&(l.length=0),f===me.enumEllipticArc){const x=t;if(x.isDegenerateToLine()||x.isDegenerate(0))return r&&(r.push(t.getStartXY()),r.push(Y.getNAN()),r.push(t.getEndXY()),o.push(Number.NaN),o.push(Number.NaN),o.push(Number.NaN)),l&&(l.push(0),l.push(1)),1}const y=Vi(9,Number.NaN);let _;if(n)_=t.getMonotonicPartParams(y.length,y),y.length=_,_=R9(t,i,y);else{if(_=2,y[0]=0,y[1]=1,f===zu.type){const x=t.getSweepAngle();if(x>.9*Math.PI){const S=2*Math.PI/3;Math.min(3,Math.trunc(x/S+.5))>2?(y[0]=0,y[1]=1/3,y[2]=2/3,y[3]=1,_=4):(y[0]=0,y[1]=.5,y[2]=1,_=3)}}else K(f===ba.type);y.length=_}if(r){const x=new Qt;let S=1;for(;S<_;){const P=y[S-1],A=y[S];t.queryCut(P,A,x,!0);const k=Ge(Y,3),$=[1,1,1];if(f===me.enumEllipticArc){const F=x.get();if(Math.abs(F.getSweepAngle())>.9*Math.PI){const G=(A-P)/3;y.splice(S,0,P+G),y.splice(S+1,0,P+2*G),_+=2;continue}$[1]=wye(F,k)}else{const F=x.get();F.queryControlPoints(k),F.queryWeights($)}n&&G2(k),S===1&&(r.push(k[0].clone()),o.push($[0])),r.push(k[1].clone()),r.push(k[2].clone()),o.push($[1]),o.push($[2]),S++}}return l&&(l.length=_,dn(l,y,0,0,_)),_-1}let Tj=class Ld{static constructDefault(e){return new Ld(0,0,0,e,!1,vo())}constructor(e,i,s,n,r,o){this.m_segmentBuffer=null,this.m_dummyPoint=new Ht,this.m_progressCounter=0,this.m_progressTracker=n,this.m_bSetDensifyFlag=r,this.m_maxLength=e,this.m_maxDeviation=i,this.m_maxAngle=s>_a()?_a():s,this.m_cosMaxAngle=Math.cos(this.m_maxAngle),this.m_bOnlyCurveDensify=this.m_maxAngle>0||this.m_maxDeviation>0,this.m_maxSegmentsPerCurve=o,PE(this.m_maxSegmentsPerCurve>0,"this.m_maxSegmentsPerCurve > 0"),this.m_minStep=1/this.m_maxSegmentsPerCurve}densify(e){return this.densifyGeom(e)}densifySegment(e,i){K(0)}densifyEx(e,i,s,n,r,o){return this.m_maxLength=i,this.m_maxDeviation=s,this.m_maxAngle=n>_a()?_a():n,this.m_cosMaxAngle=Math.cos(this.m_maxAngle),this.m_bOnlyCurveDensify=this.m_maxAngle>0||this.m_maxDeviation>0,this.m_bSetDensifyFlag=r,this.m_maxSegmentsPerCurve=o,PE(this.m_maxSegmentsPerCurve>0,"this.m_maxSegmentsPerCurve > 0"),this.m_minStep=1/this.m_maxSegmentsPerCurve,this.densifyGeom(e)}densifyGeom(e){if(e.isEmpty()||e.getDimension()<1)return e;const i=e.getGeometryType();return BA(i)?e:bi(i)?this.densifyMultiPath(e):Dn(i)?this.densifySegmentImpl(e):i===me.enumEnvelope?this.densifyEnvelope(e):void bt("")}densifySegmentEx(e,i,s,n,r){const o=e.getGeometryType();if(!(this.m_maxLength>0||this.m_bOnlyCurveDensify&&o!==me.enumLine)&&(!n||s))return void(i?o===me.enumLine?i.addSegment(e,s):(s&&(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)),e.queryEnd(this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint)):(s&&r.push(0),r.push(1)));if(o===me.enumBezier)return void this.densifyCubicBezier(e,i,s,n,r);if(o===me.enumRationalBezier2)return void this.densifyRationalBezier2(e,i,s,n,r);if(o===me.enumBezier2)return void this.densifyBezier2(e,i,s,n,r);if(o===me.enumEllipticArc&&!e.isLine()&&e.getMinorMajorRatio()<.25)return void this.densifyEllipticArc(e,i,s,n,r);let l=1;this.m_maxLength>0&&(l=this.calculateLengthSubdivisionStep(e,this.m_maxLength)),this.m_maxDeviation>0&&(l=Math.min(l,this.calculateDeviationSubdivisionStep(e,this.m_maxDeviation))),this.m_maxAngle>0&&(l=Math.min(l,this.calculateAngularSubdivisionStep(e,this.m_maxAngle))),this.densifySegmentByLength(e,l,i,s,n,r)}densifyMultiPath(e){if(!e.hasNonLinearSegments()){if(e.getDescription().getAttributeCount()===1)return this.densifyMultiPathLinear(e);if(!(this.m_maxLength>0))return e}const i=e.createInstance();i.getGeometryType()===me.enumPolygon&&i.setFillRule(e.getFillRule()),i.reserve(e.getPointCount());const s=e.getImpl().querySegmentIterator();for(;s.nextPath();){let n=!0;for(;s.hasNextSegment();){const r=s.nextSegment(),o=s.isClosingSegment();this.densifySegmentEx(r,i,n,o,null),o&&i.closePathWithLine(),n=!1}}return i}densifySegmentImpl(e){const i=new vi({vd:e.getDescription()}),s=[0];return this.densifySegmentEx(e,i,!0,!1,s),i}densifyEnvelope(e){const i=new Wt({vd:e.getDescription()});i.addEnvelope(e,!1);const s=xe.constructEmpty();e.queryEnvelope(s);const n=s.width(),r=s.height();return!(this.m_maxLength>0)||n<=this.m_maxLength&&r<=this.m_maxLength?i:this.densifyMultiPath(i)}densifyMultiPathLinear(e){if(!(this.m_maxLength>0))return e;const i=e.createInstance();i.getGeometryType()===me.enumPolygon&&i.setFillRule(e.getFillRule()),i.reserve(e.getPointCount());const s=i.getImpl(),n=e.getImpl(),r=n.getAttributeStreamRef(0),o=new si;for(let l=0,c=n.getPathCount();l<c;l++){const f=n.isClosedPath(l);if(n.getPathSize(l)===0)continue;const y=n.getPathStart(l),_=r.readPoint2D(2*y),x=_.clone();s.startPath(_);for(let S=y+1,P=n.getPathEnd(l);S<P;S++){const A=r.readPoint2D(2*S),k=Y.distance(x,A);if(k>this.m_maxLength){let $=Math.ceil(k/this.m_maxLength);$>vo()&&($=vo());const F=1/$;let G,V,B;x.compare(A)<0?(o.setStartXY(x),o.setEndXY(A),G=0,V=1):(o.setStartXY(A),o.setEndXY(x),G=$-2,V=-1);for(let W=0,J=$-1;W<J;W++,G+=V){this.progress_(),B=F*(G+1);const re=new Y;o.queryCoord2D(B,re),s.lineTo(re),this.m_bSetDensifyFlag&&s.setAttribute(10,s.getPointCount()-1,0,1)}}else this.progress_();i.lineTo(A),x.assign(A)}if(f){const S=Y.distance(x,_);if(S>this.m_maxLength){const P=_;let A=Math.ceil(S/this.m_maxLength);A>vo()&&(A=vo());const k=1/A;let $,F;x.compare(P)<0?(o.setStartXY(x),o.setEndXY(P),$=0,F=1):(o.setStartXY(P),o.setEndXY(x),$=A-2,F=-1);const G=new Y(0,0);let V;for(let B=0,W=A-1;B<W;B++,$+=F)this.progress_(),V=k*($+1),o.queryCoord2D(V,G),s.lineTo(G),this.m_bSetDensifyFlag&&s.setAttribute(10,s.getPointCount()-1,0,1)}s.closePathWithLine()}}return i}densifySegmentByLength(e,i,s,n,r,o){K(e.getGeometryType()!==me.enumBezier);let l=e.getStartXY().compare(e.getEndXY());l===0&&i<1&&(e.getGeometryType()===me.enumEllipticArc?l=e.getSweepAngle()<0?1:-1:K(0));let c=0;if(n&&(s?(e.queryStart(this.m_dummyPoint),s.startPathPoint(this.m_dummyPoint)):o.push(0),++c),i*this.m_maxSegmentsPerCurve<1&&(i=1/this.m_maxSegmentsPerCurve),i<1){this.m_segmentBuffer||(this.m_segmentBuffer=new Qt);let f=Math.ceil(1/i);f>vo()&&(f=vo()),i=1/f,this.m_segmentBuffer.create(e.getGeometryType());let y,_,x,S=e;l<0?(y=0,_=1):(e.copyTo(this.m_segmentBuffer.get()),this.m_segmentBuffer.get().reverse(),y=f-2,_=-1,S=this.m_segmentBuffer.get());const P=f-1;for(let A=0;A<P;A++,y+=_)x=i*(y+1),s?(S.queryCoord(x,this.m_dummyPoint),s.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&x!==1&&x!==0&&s.setAttribute(10,s.getPointCount()-1,0,1)):o.push(l>0?1-x:x),this.progress_();x=1,c+=P}(!r||r&&n&&c<2)&&(s?(e.queryEnd(this.m_dummyPoint),s.lineToPoint(this.m_dummyPoint)):o.push(1))}densifyCubicBezier(e,i,s,n,r){const o=new Nu;let l=e;const c=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());if(f===0&&c>0){const k=Ge(Y,4);e.queryControlPoints(k),f=k[1].compare(k[2]),f===0&&(f=k[1].compare(k[0]))}f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;s&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=[],x=[],S=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve));let P=!0,A=0;if(f>0)for(_.push([l.getStartXY(),l.getControlPoint1(),l.getControlPoint2(),l.getEndXY(),new Y(0,1)]),x.push(0);_.length;){this.progress_();const k=_.at(-1),$=x.at(-1),F=k[4].x,G=k[4].y;if($<S&&this.bezierNeedsSplit(k)){P&&(A=l.findMinDeriv(),P=!1);let V=.5*(F+G);Math.abs(A-V)<.4*(G-F)&&(V=A);const B=(V-F)/(G-F),W=k[0].mul(1-B).add(k[1].mul(B)),J=k[1].mul(1-B).add(k[2].mul(B)),re=k[2].mul(1-B).add(k[3].mul(B)),se=W.mul(1-B).add(J.mul(B)),oe=J.mul(1-B).add(re.mul(B)),pe=se.mul(1-B).add(oe.mul(B)),ue=k[3];k[1]=W,k[2]=se,k[3]=pe,k[4].setCoords(F,V);const ce=[pe,oe,re,ue,new Y(V,G)];_.push(ce),x[x.length-1]=$+1,x.push($+1)}else _.pop(),x.pop(),(_.length>0||!n||n&&s&&y<2)&&(i?(l.queryCoord(F,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&F!==1&&F!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(1-F),++y)}else for(_.push([l.getStartXY(),l.getControlPoint1(),l.getControlPoint2(),l.getEndXY(),new Y(0,1)]),x.push(0);_.length;){this.progress_();const k=_.at(-1),$=x.at(-1),F=k[4].x,G=k[4].y;if($<S&&this.bezierNeedsSplit(k)){P&&(A=l.findMinDeriv(),P=!1);let V=.5*(F+G);Math.abs(A-V)<.4*(G-F)&&(V=A);const B=(V-F)/(G-F),W=k[0].mul(1-B).add(k[1].mul(B)),J=k[1].mul(1-B).add(k[2].mul(B)),re=k[2].mul(1-B).add(k[3].mul(B)),se=W.mul(1-B).add(J.mul(B)),oe=J.mul(1-B).add(re.mul(B)),pe=se.mul(1-B).add(oe.mul(B)),ue=k[0];k[0]=pe,k[1]=oe,k[2]=re,k[4].setCoords(V,G);const ce=[ue,W,se,pe,new Y(F,V)];_.push(ce),x[x.length-1]=$+1,x.push($+1)}else _.pop(),x.pop(),(_.length>0||!n||n&&s&&y<2)&&(i?(l.queryCoord(G,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&G!==1&&G!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(G),++y)}}densifyRationalBezier2(e,i,s,n,r){const o=new ba;let l=e;const c=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());f===0&&c>0&&(f=0),f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;s&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve)),x=new ba,S=[],P=[];for(S.push(new Ze(0,1)),P.push(0);S.length;){this.progress_();const A=S.at(-1).clone(),k=P.at(-1);if(k<_&&this.rationalBezier2NeedsSplit(l,x,A.vmin,A.vmax)){const $=A.getCenter();f>0?(S.at(-1).vmax=$,S.push(new Ze($,A.vmax))):(S.at(-1).vmin=$,S.push(new Ze(A.vmin,$))),P[P.length-1]=k+1,P.push(k+1)}else if(S.pop(),P.pop(),S.length>0||!n||n&&s&&y<2){const $=f>0?A.vmin:A.vmax;i?(l.queryCoord($,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&$!==1&&$!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(f>0?1-$:$),++y}}}densifyBezier2(e,i,s,n,r){const o=new em;let l=e;const c=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());f===0&&c>0&&(f=0),f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;s&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=Math.ceil(Math.log2(this.m_maxSegmentsPerCurve)),x=new em,S=[],P=[];for(S.push(new Ze(0,1)),P.push(0);S.length;){this.progress_();const A=S.at(-1).clone(),k=P.at(-1);if(k<_&&this.bezier2NeedsSplit(l,x,A.vmin,A.vmax)){const $=A.getCenter();f>0?(S.at(-1).vmax=$,S.push(new Ze($,A.vmax))):(S.at(-1).vmin=$,S.push(new Ze(A.vmin,$))),P[P.length-1]=k+1,P.push(k+1)}else if(S.pop(),P.pop(),S.length>0||!n||n&&s&&y<2){const $=f>0?A.vmin:A.vmax;i?(l.queryCoord($,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&$!==1&&$!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(f>0?1-$:$),++y}}}densifyEllipticArc(e,i,s,n,r){const o=new zu;let l=e;const c=e.calculateUpperLength2D();let f=e.getStartXY().compare(e.getEndXY());f===0&&c>0&&(f=e.isClockwise()?0:1),f>0&&(e.copyTo(o),o.reverse(),l=o);let y=0;s&&(i?(e.queryStart(this.m_dummyPoint),i.startPathPoint(this.m_dummyPoint)):r.push(0),++y);const _=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve)),x=new zu,S=[],P=[];for(S.push(new Ze(0,1)),P.push(0);S.length;){this.progress_();const A=S.at(-1).clone(),k=P.at(-1);if(k<_&&this.ellipticArcNeedsSplit(l,x,A.vmin,A.vmax)){const $=A.getCenter();f>0?(S.at(-1).vmax=$,S.push(new Ze($,A.vmax))):(S.at(-1).vmin=$,S.push(new Ze(A.vmin,$))),P[P.length-1]=k+1,P.push(k+1)}else if(S.pop(),P.pop(),S.length>0||!n||n&&s&&y<2){const $=f>0?A.vmin:A.vmax;i?(l.queryCoord($,this.m_dummyPoint),i.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&$!==1&&$!==0&&i.setAttribute(10,i.getPointCount()-1,0,1)):r.push(f>0?1-$:$),++y}}}calculateLengthSubdivisionStep(e,i){const s=e.calculateUpperLength2D();if(!e.isCurve())return s?i/s:1;if(e.getGeometryType()===me.enumEllipticArc){const n=e;if(n.isCircular()||n.isDegenerate(0)||n.isDegenerateToLine()){let r=i/s;return r<this.m_minStep&&(r=this.m_minStep),r}return i/s*n.getSemiAxes().y/n.getSemiAxes().x}e.getGeometryType()===me.enumBezier&&js(""),js("")}calculateDeviationSubdivisionStep(e,i){if(!e.isCurve())return 1;if(e.getGeometryType()===me.enumEllipticArc){const s=e;if(s.isDegenerate(0)||s.isDegenerateToLine())return 1;{const n=s.getSemiMajorAxis(),r=1-i/n;let o=Math.PI/2;if(r>0){const c=4*Math.sqrt(i/n*.5);o=Math.min(Math.PI/2,Math.abs(c))}o=Math.max(o,2*Math.PI/this.m_maxSegmentsPerCurve);const l=o*n;return this.calculateLengthSubdivisionStep(e,l)}}js("")}calculateAngularSubdivisionStep(e,i){if(!e.isCurve())return 1;if(e.getGeometryType()===me.enumEllipticArc){const s=e;return s.isDegenerate(0)||s.isDegenerateToLine()?1:this.calculateLengthSubdivisionStep(e,i*s.getSemiMinorAxis())}js("")}rationalBezier2NeedsSplit(e,i,s,n){e.cutBezierIgnoreAttributes(s,n,i);let r=!1;if(this.m_maxLength>0&&i.calculateUpperLength2D()>this.m_maxLength)return r=!0,!0;const o=Ge(Y,3);i.queryControlPoints(o);const l=[0,0,0];return i.queryWeights(l),!r&&this.m_maxDeviation>0&&(r=!Ld.checkRationalBezier2MaxDeviation(o,l,this.m_maxDeviation)),!r&&this.m_maxAngle>0&&(r=!Ld.checkRationalBezier2MaxAngle(o,l,this.m_cosMaxAngle)),r}bezier2NeedsSplit(e,i,s,n){e.cutBezierIgnoreAttributes(s,n,i);let r=!1;if(this.m_maxLength>0&&i.calculateUpperLength2D()>this.m_maxLength)return r=!0,!0;const o=Ge(Y,3);return i.queryControlPoints(o),!r&&this.m_maxDeviation>0&&(r=!Ld.checkBezier2MaxDeviation(o,this.m_maxDeviation)),!r&&this.m_maxAngle>0&&(r=!Ld.checkBezier2MaxAngle(o,this.m_cosMaxAngle)),r}ellipticArcNeedsSplit(e,i,s,n){e.cutArcIgnoreAttributes(s,n,i);let r=!1;return this.m_maxLength>0&&i.calculateUpperLength2D()>this.m_maxLength?(r=!0,!0):(!r&&this.m_maxDeviation>0&&(r=!Ld.checkEllipticArcMaxDeviation(i,this.m_maxDeviation)),!r&&this.m_maxAngle>0&&(r=!Ld.checkEllipticArcMaxAngle(i,this.m_cosMaxAngle)),r)}bezierNeedsSplit(e){let i=!1;return this.m_maxLength>0&&Y.distance(e[0],e[1])+Y.distance(e[1],e[2])+Y.distance(e[2],e[3])>this.m_maxLength?(i=!0,!0):(!i&&this.m_maxDeviation>0&&(i=!Ld.checkBezierMaxDeviation(e,this.m_maxDeviation)),!i&&this.m_maxAngle>0&&(i=!Ld.checkBezierMaxAngle(e,this.m_cosMaxAngle)),i)}progress_(){}static checkBezierMaxDeviation(e,i){const s=e[3].sub(e[0]);if(s.sqrLength()>0){const n=s.clone();n.leftPerpendicularThis(),n.normalize();const r=n.dotProduct(e[0].sub(e[1])),o=n.dotProduct(e[0].sub(e[2]));if(Math.max(Math.abs(r),Math.abs(o))<=i){const l=new Y;Mn(e,.5,l,!1);const c=l.sub(e[0]).dotProduct(s);return c>=0&&c<=s.sqrLength()}return!1}return Math.max(e[0].sub(e[1]).sqrLength(),e[0].sub(e[2]).sqrLength())<=i*i}static checkBezierMaxAngle(e,i){if(e[0].equals(e[3]))return!(!e[0].equals(e[1])||!e[1].equals(e[2]));const s=e[3].sub(e[0]);s.normalize();{const n=e[1].sub(e[0]),r=n.dotProduct(s);if(r<0||n.length()*i>r)return!1}{const n=e[2].sub(e[0]),r=n.dotProduct(s);if(r<0||n.length()*i>r)return!1}{const n=e[2].sub(e[1]),r=n.dotProduct(s);if(r<0||n.length()*i>r)return!1}return!0}static checkRationalBezier2MaxDeviation(e,i,s){if(i[1]===0)return!1;const n=e[2].sub(e[0]);if(n.sqrLength()>0){const r=n.clone();r.leftPerpendicularThis(),r.normalize();const o=r.dotProduct(e[0].sub(e[1]));if(Math.abs(o)<=s){const l=e[1].sub(e[0]).dotProduct(n);return l>=0&&l<=n.sqrLength()}return!1}return e[0].sub(e[1]).sqrLength()<=s*s}static checkRationalBezier2MaxAngle(e,i,s){return K(0),!1}static checkBezier2MaxDeviation(e,i){const s=e[2].sub(e[0]);if(s.sqrLength()>0){const n=s.clone();n.leftPerpendicularThis(),n.normalize();const r=n.dotProduct(e[0].sub(e[1]));if(Math.abs(r)<=i){const o=e[1].sub(e[0]).dotProduct(s);return o>=0&&o<=s.sqrLength()}return!1}return e[0].sub(e[1]).sqrLength()<=i*i}static checkBezier2MaxAngle(e,i){return K(0),!1}static checkEllipticArcMaxDeviation(e,i){if(Math.abs(e.getSweepAngle())<Math.PI){const r=e.getEndXY().sub(e.getStartXY()),o=[0,0];if(Zrt(e,r,o)===1){const l=e.getCoord2D(o[0]),c=Y.getClosestCoordinate(e.getStartXY(),e.getEndXY(),l),f=new Y;return ar(e.getStartXY(),e.getEndXY(),c,f),Y.distance(l,f)<=i}}const s=e.getCoord2D(.5),n=new Y;return ar(e.getEndXY(),e.getStartXY(),.5,n),Y.distance(s,n)<=i}static checkEllipticArcMaxAngle(e,i){return K(0),!1}static checkTypeForReplace(e,i){return K(0),!1}};function R9(t,e,i){const s=i.length;if(e<=0||s<=2)return s;let n=0;const r=[];r.length=s-1;for(let o=1,l=s;o<l;o++){const c=t.tToLength(i[o]);r[o-1]=c-n,n=c}for(;r.length>1;){const o=r.findIndex(f=>f<=2*e);if(o===-1)break;let l=o+1,c=o+1;if(o>0){const f=o-1;(c===r.length||r[f]>r[c])&&(c=f,l--)}r[c]+=r[o],r.splice(o,1),i.splice(l,1)}return i.length}function hie(t,e,i,s,n,r,o,l){const c=e.clone();c.dropAllAttributes();const f=(Pe,Re,Oe,we)=>(Re&&(Pe&&Re.push(we.getStartXY()),Re.push(Y.getNAN()),Re.push(Y.getNAN()),Re.push(we.getEndXY())),Oe&&(Pe&&Oe.push(0),Oe.push(1)),1);if(c.isDegenerateToLine()||c.isDegenerate(0))return f(t,r,o,e);const y=c.getStartXY(),_=c.getEndXY(),x=c.getSemiAxes(),S=new _i;if(c.isCircular())S.setIdentity();else{const Pe=c.getAxisXRotation();S.setScaleCoords(1,c.getMinorMajorRatio()),S.rotateAngle(Pe)}const P=c.getCenter();S.shift(P);const A=S.clone();A.invertThis(),c.applyTransformation(A);const k=c.getSweepAngle();if(k===0)return f(t,r,o,e);const $=xe.constructEmpty();$.setCoords({center:P,width:2*x.x,height:2*x.x});const F=.05*$.calculateToleranceFromEnvelope(),G=Math.max(i/x.x,F/x.x);let V=4*Math.pow(G/.0741,1/6);V=Math.min(V,Math.PI/2);const B=y1e(c.getStartAngle());let W=k>0?Math.floor(B/V):Math.ceil(B/V);W*=V;const J=k>0?V:-V;W+J===B&&(W+=J);let re=4/3*Math.tan(Math.abs(V)/4);k>0&&(re=-re),o&&t&&o.push(0);const se=V/Math.abs(k);let oe=(W-B)/k;const pe=y.clone(),ue=new Y;c.queryCoord2D(0,ue);const ce=ue.clone(),ne=1-.01*se;let de=0,Se=0;for(;oe<1;){let Pe;if(oe+=se,Se>0&&oe<ne)Pe=re;else{oe>=ne&&(oe=1);const it=(oe-Se)*k;Pe=4/3*Math.tan(Math.abs(it)/4),k>0&&(Pe=-Pe)}c.queryCoord2D(oe,ue);const Re=new Y;S.queryTransform(ue,Re);const Oe=e.getClosestCoordinate(Re,!1);if(e.queryCoord2D(Oe,Re),oe!==1&&(Y.distance(pe,Re)<=2*s||Y.distance(Re,_)<=2*s))continue;pe.setCoordsPoint2D(Re);const we=Ge(Y,4);we[0].assign(ce),we[3].assign(ue),we[1].rightPerpendicularOther(ce),we[1].scaleAddThis(Pe,ce),we[2].leftPerpendicularOther(ue),we[2].scaleAddThis(Pe,ue),S.transformPoints2D(we,3,we),we[3].assign(Re),Se===0&&we[0].setCoordsPoint2D(y),oe===1&&we[3].setCoordsPoint2D(_),n&&r7(we);let Fe=!0;for(let it=1;it<4;it++)if(!we[it].isEqualPoint2D(we[0])){Fe=!1;break}Fe||(o&&o.push(Oe),r&&(Se===0&&t&&r.push(we[0].clone()),r.push(we[1].clone()),r.push(we[2].clone()),r.push(we[3].clone())),de++),Se=oe,ce.setCoordsPoint2D(ue)}return de}function die(t,e,i,s,n,r,o,l){return K(0),0}var fa,F0,Yet=Tj;class Xet extends Ca{constructor(e,i,s,n,r,o){super(),this.m_densificator=new Yet(i,s,n,o,!1,r),this.m_index=-1,this.m_inputGeoms=e}tock(){return!0}getRank(){return 1}next(){let e=null;for(;e=this.m_inputGeoms.next();)return Xc(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.densify(e);return null}getGeometryID(){return this.m_index}densify(e){return this.m_densificator.densify(e)}}class V0{getOperatorType(){return 10202}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}executeMany(e,i,s,n,r,o=12e3){return new Xet(e,i,s,n,o,r)}execute(e,i,s,n,r,o=12e3){return Uet(e,i,s,n,r,o)}}class o7{constructor(e){this.m_currentShift=63n,this.m_currentElt=0n,this.m_iCurrentElt=-1,this.m_parent=e,this.m_aiSetElts=e.m_bits.flatMap((i,s)=>s)}next(){if(this.m_currentShift++,this.m_currentShift===64n){if(this.m_iCurrentElt++,this.m_iCurrentElt===this.m_aiSetElts.length)return o7.npos();this.m_currentShift=0n,this.m_currentElt=this.m_parent.m_bits[this.m_aiSetElts[this.m_iCurrentElt]]}for(;this.m_currentShift<63n&&!(this.m_currentElt&1n<<this.m_currentShift);)this.m_currentShift++;return this.m_currentElt&1n<<this.m_currentShift?64*this.m_aiSetElts[this.m_iCurrentElt]+Number(this.m_currentShift):this.next()}static npos(){return Number.MAX_SAFE_INTEGER}}function PN(t){return 1n<<(0x3fn&BigInt(t))}function TN(t){return t>>6}class ph{constructor(e){this.m_bits=[],e!==void 0&&e.copy&&(this.m_bits=e.copy.m_bits.slice())}assignMove(){return this}assignCopy(){return this}hasBit(e){const i=PN(e),s=TN(e);return this.m_bits[s]!==void 0&&!!(this.m_bits[s]&i)}setBit(e){const i=PN(e),s=TN(e);this.m_bits[s]===void 0&&(this.m_bits[s]=0n),this.m_bits[s]|=i}clearBit(e){}flipBit(e){const i=PN(e),s=TN(e);return this.m_bits[s]===void 0&&(this.m_bits[s]=0n),this.m_bits[s]^=i,(this.m_bits[s]&i)!==0n}clear(){this.m_bits.length=0}isZero(){let e=0;return this.m_bits.forEach(i=>{e|=i?2:1}),!(2&e)}equals(e){if(this===e)return!0;if(this.m_bits.length!==e.m_bits.length)return!1;let i=0;return this.m_bits.forEach((s,n)=>{i|=s===e.m_bits[n]?2:1}),!(1&i)&&(e.m_bits.forEach((s,n)=>{i|=s===this.m_bits[n]?2:1}),!(1&i))}notEquals(e){return!this.equals(e)}assignOr(e){return e.m_bits.forEach((i,s)=>{this.m_bits[s]===void 0?this.m_bits[s]=i:this.m_bits[s]|=i}),this}assignSubtract(e){return e.m_bits.forEach((i,s)=>{this.m_bits[s]!==void 0&&(this.m_bits[s]&=~i)}),this}assignAnd(e){return e.m_bits.forEach((i,s)=>{this.m_bits[s]!==void 0&&(this.m_bits[s]&=i)}),this}assignXor(e){return e.m_bits.forEach((i,s)=>{this.m_bits[s]===void 0?this.m_bits[s]=i:this.m_bits[s]^=i}),this}getHashCode(){return this.m_bits.reduce((e,i)=>OKe(e,i),ef(0))}getUnorderedBitIterator(){return new o7(this)}}class Wet{constructor(e,i){this.m_map=new Map,this.m_hf=e,this.m_ef=i}add(e){const i=this.m_hf(e);if(!this.m_map.has(i))return this.m_map.set(i,e),this;const s=this.m_map.get(i);return s instanceof Array?s.find(n=>this.m_ef(n,e))||s.push(e):this.m_ef(s,e)||this.m_map.set(i,[s,e]),this}clear(){this.m_map.clear()}delete(e){return!1}has(e){const i=this.m_hf(e);if(!this.m_map.has(i))return!1;const s=this.m_map.get(i);return s instanceof Array?s.find(n=>this.m_ef(n,e))!==void 0:this.m_ef(s,e)}get(e){const i=this.m_hf(e),s=this.m_map.get(i);if(s!==void 0)return s instanceof Array?s.find(n=>this.m_ef(n,e)):s}get size(){let e=0;for(const i of this.m_map.values())e+=i instanceof Array?i.length:1;return e}forEach(e,i){}[Symbol.iterator](){return new Set()[Symbol.iterator]()}entries(){return new Set().entries()}keys(){return new Set().keys()}values(){return new Set().values()}get[Symbol.toStringTag](){return"ValueSet"}}class Zet extends zv{constructor(e){super(),this.m_bufferLeft=new Qt,this.m_bufferRight=new Qt,this.m_intervalLeft=Ze.constructEmpty(),this.m_intervalRight=Ze.constructEmpty(),this.m_yScanline=Number.NaN,this.m_helper=e}compare(e,i,s){const n=i,r=e.getElement(s);this.m_helper.querySegmentXY(n,this.m_bufferLeft),this.m_helper.querySegmentXY(r,this.m_bufferRight);const o=this.m_bufferLeft.get(),l=this.m_bufferRight.get();if(this.m_intervalLeft.setCoords(o.getStartX(),o.getEndX()),this.m_intervalRight.setCoords(l.getStartX(),l.getEndX()),this.m_intervalLeft.vmax<this.m_intervalRight.vmin)return-1;if(this.m_intervalLeft.vmin>this.m_intervalRight.vmax)return 1;const c=o.getStartY()===o.getEndY(),f=l.getStartY()===l.getEndY();if(c||f){if(c&&f)return 0;if(o.getStartY()===l.getStartY()&&o.getStartX()===l.getStartX())return c?1:-1;if(o.getEndY()===l.getEndY()&&o.getEndX()===l.getEndX())return c?-1:1}let y=o.intersectionOfYMonotonicWithAxisX(this.m_yScanline,this.m_intervalLeft.vmin),_=l.intersectionOfYMonotonicWithAxisX(this.m_yScanline,this.m_intervalRight.vmin);if(y===_){const x=o.getEndY(),S=l.getEndY(),P=Math.min(x,S);let A=.5*(P+this.m_yScanline);A===this.m_yScanline&&(A=P),y=o.intersectionOfYMonotonicWithAxisX(A,this.m_intervalLeft.vmin),_=l.intersectionOfYMonotonicWithAxisX(A,this.m_intervalRight.vmin)}return y<_?-1:y>_?1:0}setY(e){this.m_yScanline=e}}class Ket{constructor(e){this.m_segmentBuffer=new Qt,this.m_point=Y.getNAN(),this.m_parent=e}setPointXY(e){this.m_point.assign(e)}compare(e,i){const s=e.getElement(i);this.m_parent.querySegmentXY(s,this.m_segmentBuffer);const n=this.m_segmentBuffer.get(),r=new Ze;if(r.setCoords(n.getStartX(),n.getEndX()),this.m_point.x<r.vmin)return-1;if(this.m_point.x>r.vmax)return 1;const o=n.intersectionOfYMonotonicWithAxisX(this.m_point.y,this.m_point.x);return this.m_point.x<o?-1:this.m_point.x>o?1:0}}function fie(t,e){return{parentage:t,rank:e}}function Jet(t,e){const i=t.length;if(i!==e.length)return!1;const s=t[0].parentage;if(s!==e[0].parentage)return!1;if(s===-1)return!0;for(let n=1;n<i;++n)if(t[n].parentage!==e[n].parentage)return!1;return!0}function pie(t,e,i){i.length=0;let s=!1;{let n=t.getHalfEdgeVertexIterator(e);for(;n!==ae;){const r=t.getVertexFromVertexIterator(n),o=t.getShape().getSegmentRank(r),l=t.getShape().getSegmentParentage(r);s||(s=l>=0),i.push(fie(l,o)),n=t.incrementVertexIterator(n)}}{let n=t.getHalfEdgeVertexIterator(t.getHalfEdgeTwin(e));for(;n!==ae;){const r=t.getVertexFromVertexIterator(n),o=t.getShape().getSegmentRank(r),l=t.getShape().getSegmentParentage(r);s||(s=l>=0),i.push(fie(l,o)),n=t.incrementVertexIterator(n)}}s&&i.sort((n,r)=>n.rank>r.rank?-1:n.rank<r.rank?1:n.parentage<r.parentage?-1:n.parentage>r.parentage?1:0),i[0].parentage===-1&&(i.length=1)}function Qet(){return new Wet(t=>t.getHashCode(),(t,e)=>t.equals(e))}(function(t){t[t.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",t[t.enumInputModeSimplifyAlternate=1]="enumInputModeSimplifyAlternate",t[t.enumInputModeSimplifyWinding=2]="enumInputModeSimplifyWinding"})(fa||(fa={})),function(t){t[t.enumSegmentParentageBreakNode=1]="enumSegmentParentageBreakNode",t[t.enumPathBreakNode=2]="enumPathBreakNode"}(F0||(F0={}));class Fh{constructor(){this.m_shape=null,this.m_clusterData=new Ut(8),this.m_clusterVertices=new Ut(2),this.m_firstCluster=ae,this.m_lastCluster=ae,this.m_halfEdgeData=new Ut(8),this.m_chainData=new Ut(8),this.m_chainAreas=null,this.m_chainPerimeters=null,this.m_universeChain=-1,this.m_simplifiedGeometry=-1,this.m_edgeIndices=[],this.m_clusterIndices=[],this.m_chainIndices=[],this.m_bBuildGeometryParentageSets=!1,this.m_chainBitSetIndex=-1,this.m_edgeBitSetIndex=-1,this.m_edgeBitSetIndexLeft=-1,this.m_emptyBitSet=null,this.m_geometryMapID=null,this.m_uniqueBitSets=null,this.m_chainBitSets=[],this.m_edgeBitSets=[],this.m_checkDirtyPlanesweepTolerance=Number.NaN,this.m_geometryIDIndex=-1,this.m_clusterIndex=-1,this.m_halfEdgeIndex=-1,this.m_tmpHalfEdgeParentageIndex=-1,this.m_tmpHalfEdgeParentageIndexLeft=-1,this.m_tmpHalfEdgeWindingNumberIndex=-1,this.m_tmpHalfEdgeOddEvenNumberIndex=-1,this.m_segmentParentageIndex=-1,this.m_segmentIndexHe=-1,this.m_clusterBreakNodeIndex=-1,this.m_universeGeomID=-1,this.m_pointCount=0,this.m_progressCounter=0,this.m_bBuildChains=!0,this.m_bDirtyCheckFailed=!1}setCheckDirtyPlanesweepTolerance(e){this.m_checkDirtyPlanesweepTolerance=e}dirtyCheckFailed(){return this.m_bDirtyCheckFailed}getShape(){return this.m_shape}setEditShape(e,i,s=!0,n=!1){n?this.setEditShapeImpl3D_(e,fa.enumInputModeBuildGraph,null,i,!1):this.setEditShapeImpl_(e,fa.enumInputModeBuildGraph,null,i,s)}setAndSimplifyEditShapeAlternate(e,i,s=null,n=!1){const r=[];r.push(i),this.m_simplifiedGeometry=i,n?this.setEditShapeImpl3D_(e,fa.enumInputModeSimplifyAlternate,r,s,!1):this.setEditShapeImpl_(e,fa.enumInputModeSimplifyAlternate,r,s,e.getGeometryType(i)===me.enumPolygon)}setAndSimplifyEditShapeWinding(e,i,s=null){const n=[];n.push(i),this.m_simplifiedGeometry=i,this.setEditShapeImpl_(e,fa.enumInputModeSimplifyWinding,n,s,!0)}removeShape(){this.m_shape!==null&&(this.m_geometryIDIndex!==-1&&(this.m_shape.removeGeometryUserIndex(this.m_geometryIDIndex),this.m_geometryIDIndex=-1),this.m_clusterIndex!==-1&&(this.m_shape.removeUserIndex(this.m_clusterIndex),this.m_clusterIndex=-1),this.m_halfEdgeIndex!==-1&&(this.m_shape.removeUserIndex(this.m_halfEdgeIndex),this.m_halfEdgeIndex=-1),this.m_tmpHalfEdgeParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_tmpHalfEdgeParentageIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.m_tmpHalfEdgeWindingNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeWindingNumberIndex),this.m_tmpHalfEdgeWindingNumberIndex=-1),this.m_tmpHalfEdgeOddEvenNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeOddEvenNumberIndex),this.m_tmpHalfEdgeOddEvenNumberIndex=-1),this.m_segmentParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_segmentParentageIndex),this.m_segmentParentageIndex=-1),this.m_segmentIndexHe!==-1&&(this.deleteUserIndexForHalfEdges(this.m_segmentIndexHe),this.m_segmentIndexHe=-1),this.m_clusterBreakNodeIndex!==-1&&(this.deleteUserIndexForClusters(this.m_clusterBreakNodeIndex),this.m_clusterBreakNodeIndex=-1),this.deleteEdgeBitSets_(),this.deleteChainBitSets_(),this.m_emptyBitSet=null,this.m_geometryMapID=null,this.m_shape=null,this.m_clusterData.deleteAll(!0),this.m_clusterVertices.deleteAll(!0),this.m_firstCluster=ae,this.m_lastCluster=ae,this.m_halfEdgeData.deleteAll(!0),this.m_edgeIndices.length=0,this.m_clusterIndices.length=0,this.m_chainIndices.length=0,this.m_chainData.deleteAll(!0),this.m_universeChain=ae,this.m_chainAreas=null)}getClusterHalfEdge(e){return this.m_clusterData.getField(e,2)}queryXY(e,i){const s=this.getClusterVertexIndex_(e);i.assign(this.m_shape.getXYWithIndex(s))}queryXYZ(e,i){K(0)}getClusterParentage(e){return this.m_clusterData.getField(e,1)}getFirstCluster(){return this.m_firstCluster}getPrevCluster(e){return this.m_clusterData.getField(e,3)}getNextCluster(e){return this.m_clusterData.getField(e,4)}getClusterChain(e){return this.m_clusterData.getField(e,6)}getClusterVertexIterator(e){return this.m_clusterData.getField(e,7)}incrementVertexIterator(e){return this.m_clusterVertices.getField(e,1)}getVertexFromVertexIterator(e){return this.m_clusterVertices.getField(e,0)}getClusterUserIndex(e,i){const s=this.getClusterIndex_(e),n=this.m_clusterIndices[i];return n.size()<=s?-1:n.read(s)}setClusterUserIndex(e,i,s){const n=this.getClusterIndex_(e),r=this.m_clusterIndices[i];r.size()<=n&&r.resize(this.m_clusterData.size(),-1),r.write(n,s)}hasClusterUserIndexFlags(e,i,s){if(i===-1)return!1;const n=this.getClusterUserIndex(e,i);return n!==-1&&!!(s&n)}setClusterUserIndexFlags(e,i,s){const n=this.getClusterIndex_(e),r=this.m_clusterIndices[i];r.size()<=n&&r.resize(this.m_clusterData.size(),-1);let o=r.read(n);o===-1&&(o=0),r.write(n,s|o)}clearClusterUserIndexFlags(e,i,s){K(0)}createUserIndexForClusters(e=-1){const i=new Ns(this.m_clusterData.capacity(),e);for(let s=0,n=this.m_clusterIndices.length;s<n;s++)if(this.m_clusterIndices[s]===null)return this.m_clusterIndices[s]=i,s;return this.m_clusterIndices.push(i),this.m_clusterIndices.length-1}deleteUserIndexForClusters(e){this.m_clusterIndices[e]=null}getHalfEdgeOrigin(e){return this.m_halfEdgeData.getField(e,1)}getHalfEdgeTo(e){return this.getHalfEdgeOrigin(this.getHalfEdgeTwin(e))}getHalfEdgeTwin(e){return this.m_halfEdgeData.getField(e,4)}getHalfEdgePrev(e){return this.m_halfEdgeData.getField(e,5)}getHalfEdgeNext(e){return this.m_halfEdgeData.getField(e,6)}getHalfEdgeChain(e){return this.m_halfEdgeData.getField(e,2)}getHalfEdgeFaceParentage(e){return this.getChainParentage(this.getHalfEdgeChain(e))}getHalfEdgeVertexIterator(e){return this.m_halfEdgeData.getField(e,7)}getHalfEdgeFromXY(e,i){this.queryXY(this.getHalfEdgeOrigin(e),i)}getHalfEdgeToXY(e,i){this.queryXY(this.getHalfEdgeTo(e),i)}isHalfEdgeCurve(e){return this.m_segmentIndexHe!==-1?this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe)!==-1:!1}getHalfEdgeFromXYZ(e,i){K(0)}getHalfEdgeToXYZ(e,i){K(0)}getHalfEdgeParentage(e){return this.m_halfEdgeData.getField(e,3)&Fh.c_EdgeParentageMask}getHalfEdgeUserIndex(e,i){const s=this.getHalfEdgeIndex_(e),n=this.m_edgeIndices[i];return n.size()<=s?-1:n.read(s)}setHalfEdgeUserIndex(e,i,s){const n=this.getHalfEdgeIndex_(e),r=this.m_edgeIndices[i];r.size()<=n&&r.resize(this.m_halfEdgeData.size(),-1),r.write(n,s)}createUserIndexForHalfEdges(e){e===void 0&&(e=-1);const i=new Ns(this.m_halfEdgeData.capacity(),e);for(let n=0,r=this.m_edgeIndices.length;n<r;n++)if(this.m_edgeIndices[n]===null)return this.m_edgeIndices[n]=i,n;this.m_edgeIndices.push(i);const s=this.m_edgeIndices.length-1;return K(s>=0&&s<=Number.MAX_SAFE_INTEGER),s}deleteUserIndexForHalfEdges(e){this.m_edgeIndices[e]=null}deleteEdgesBreakFaces_(e){for(let i=0,s=e.length;i<s;i++){const n=e[i],r=this.getHalfEdgeChain(n),o=this.getHalfEdgeTwin(n),l=this.getHalfEdgeChain(o);this.setChainHalfEdge_(r,ae),this.setChainHalfEdge_(l,ae),this.updateVertexToHalfEdgeConnection_(n,!0),this.deleteEdgeImpl_(n)}}doesHalfEdgeBelongToAPolygonInterior(e,i){return K(0),!1}doesHalfEdgeBelongToAPolygonExterior(e,i){return K(0),!1}doesHalfEdgeBelongToAPolygonBoundary(e,i){return K(0),!1}doesHalfEdgeBelongToAPolylineInterior(e,i){return K(0),!1}doesHalfEdgeBelongToAPolylineExterior(e,i){return K(0),!1}doesClusterBelongToAPolygonInterior(e,i){return K(0),!1}doesClusterBelongToAPolygonExterior(e,i){return K(0),!1}doesClusterBelongToAPolygonBoundary(e,i){return K(0),!1}getFirstChain(){return this.m_universeChain}getChainHalfEdge(e){return this.m_chainData.getField(e,1)}getChainParentage(e){return this.m_chainData.getField(e,2)}getChainParent(e){return this.m_chainData.getField(e,3)}getChainFirstIsland(e){return this.m_chainData.getField(e,4)}getChainNextInParent(e){return this.m_chainData.getField(e,5)}getChainNext(e){return this.m_chainData.getField(e,7)}getChainArea(e){const i=this.getChainIndex_(e);let s=this.m_chainAreas.read(i);return Number.isNaN(s)&&(this.updateChainAreaAndPerimeter_(e),s=this.m_chainAreas.read(i)),s}getChainPerimeter(e){return K(0),0}getChainUserIndex(e,i){const s=this.getChainIndex_(e),n=this.m_chainIndices[i];return n.size()<=s?-1:n.read(s)}setChainUserIndex(e,i,s){const n=this.getChainIndex_(e),r=this.m_chainIndices[i];r.size()<=n&&r.resize(this.m_chainData.size(),-1),r.write(n,s)}createUserIndexForChains(){const e=new Ns(this.m_chainData.capacity(),-1);for(let i=0,s=this.m_chainIndices.length;i<s;i++)if(this.m_chainIndices[i]===null)return this.m_chainIndices[i]=e,i;return this.m_chainIndices.push(e),this.m_chainIndices.length-1}deleteUserIndexForChains(e){K(0)}extractPolygonFromChainAndIslands(e,i,s,n){const r=i===ae?e.createGeometry(me.enumPolygon):i,o=new Qt;this.extractPolygonPathFromChain_(e,r,s,n,o);for(let l=this.getChainFirstIsland(s);l!==ae;l=this.getChainNextInParent(l))this.extractPolygonPathFromChain_(e,r,l,n,o);return r}getGeometryID(e){const i=this.m_shape.getGeometryUserIndex(e,this.m_geometryIDIndex);return K(i>=0),1<<Math.min(i,31)}getClusterFromVertex(e){return this.m_shape.getUserIndex(e,this.m_clusterIndex)}getHalfEdgeFromVertex(e){return this.m_shape.getUserIndex(e,this.m_halfEdgeIndex)}buildGeometryParentageSets(){this.m_bBuildGeometryParentageSets=!0}getChainBitSet(e){if(K(this.m_bBuildGeometryParentageSets),this.m_chainBitSetIndex===-1)return this.getEmptySet();const i=this.getChainUserIndex(e,this.m_chainBitSetIndex);K(i>=0);let s=this.m_chainBitSets.at(i);return s||(s=this.getEmptySet()),s}getChainBoundaryBitSet(e){K(this.m_bBuildGeometryParentageSets);const i=new ph,s=n=>{const r=this.getChainHalfEdge(n);let o=r;do{const l=this.getEdgeBitSet_(o);l!==null&&i.assignOr(l);const c=this.getEdgeBitSet_(this.getHalfEdgeTwin(o));c!==null&&i.assignOr(c),o=this.getHalfEdgeNext(o)}while(o!==r)};s(e);for(let n=this.getChainFirstIsland(e);n!==ae;n=this.getChainNextInParent(n))s(e);return i}getChainPolygons(e){return K(0),[]}getGeometriesFromBits(e){if(!this.m_bBuildGeometryParentageSets||e===null)return[];if(this.m_geometryMapID===null){this.m_geometryMapID=new Map;for(let n=this.m_shape.getFirstGeometry();n!==ae;n=this.m_shape.getNextGeometry(n))this.m_geometryMapID.set(this.m_shape.getGeometryUserIndex(n,this.m_geometryIDIndex),n)}const i=[],s=e.getUnorderedBitIterator();for(let n=s.next();n!==o7.npos();n=s.next())K(this.m_geometryMapID.has(n)),i.push(this.m_geometryMapID.get(n));return i}getVertexDominant(e,i){if(i===ae)return e;const s=this.getClusterFromVertex(e);return this.getVertexDominantFromCluster(s,i)}getVertexDominantFromCluster(e,i){if(i!==ae){let s=ae;for(let n=this.getClusterVertexIterator(e);n!==ae;n=this.incrementVertexIterator(n)){const r=this.getVertexFromVertexIterator(n);s===ae&&(s=r);const o=this.m_shape.getPathFromVertex(r);if(this.m_shape.getGeometryFromPath(o)===i){s=r;break}}return s}{const s=this.getClusterVertexIterator(e);return s!==ae?this.getVertexFromVertexIterator(s):ae}}isBreakNode(e){return this.hasClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,F0.enumSegmentParentageBreakNode)}setBreakNode(e,i){K(this.m_clusterBreakNodeIndex!==-1),i?this.setClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,F0.enumSegmentParentageBreakNode):this.clearClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,F0.enumSegmentParentageBreakNode)}isStrongPathNode(e){return this.hasClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,F0.enumPathBreakNode)}setStrongPathNode(e,i){if(this.m_clusterBreakNodeIndex===-1){if(!i)return;this.m_clusterBreakNodeIndex=this.createUserIndexForClusters()}i?this.setClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,F0.enumPathBreakNode):this.clearClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,F0.enumPathBreakNode)}getSegmentParentage(e){if(this.m_segmentParentageIndex===-1)return-1;const i=this.getHalfEdgeUserIndex(e,this.m_segmentParentageIndex);return i>=0?i:-1}isCrossroadAhead(e){const i=this.getHalfEdgeNext(e);if(this.isStrongPathNode(this.getHalfEdgeOrigin(i)))return!0;const s=this.getHalfEdgeTwin(i),n=this.getHalfEdgeNext(s);return e!==this.getHalfEdgeTwin(n)}isCrossroadBehind(e){return K(0),!1}getHalfEdgeConnector(e,i){const s=this.getClusterHalfEdge(e);if(s===ae)return ae;let n=s,r=ae,o=ae;do{if(this.getHalfEdgeTo(n)===i)return n;if(r===ae){if(r=this.getClusterHalfEdge(i),r===ae)return ae;o=r}if(this.getHalfEdgeTo(o)===e)return n=this.getHalfEdgeTwin(o),n;n=this.getHalfEdgeNext(this.getHalfEdgeTwin(n)),o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o))}while(n!==s&&o!==r);return ae}querySegmentXY(e,i){if(this.m_segmentIndexHe!==-1){let r=this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe);if(r!==-1){if(r!==-2){const o=this.m_shape.getSegmentFromIndex(r);i.copyFrom(o,!0)}else{r=this.getHalfEdgeUserIndex(this.getHalfEdgeTwin(e),this.m_segmentIndexHe);const o=this.m_shape.getSegmentFromIndex(r);i.copyFrom(o,!0),i.get().reverse()}return}}i.createLine();const s=i.get(),n=Y.getNAN();this.getHalfEdgeFromXY(e,n),s.setStartXY(n),this.getHalfEdgeToXY(e,n),s.setEndXY(n)}isCurveEdge(e){return this.m_segmentIndexHe!==-1?this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe)!==-1:!1}compareEdgeAnglesCurveHelper_(e,i,s){const n=new Qt,r=new Qt;this.querySegmentXY(e,n),this.querySegmentXY(i,r);const o=n.get(),l=r.get();if(o.equals(l))return 0;const c=new Y;this.getHalfEdgeFromXY(e,c);const f=new Y;this.getHalfEdgeToXY(e,f);const y=new Y;this.getHalfEdgeToXY(i,y),K(!f.isEqualPoint2D(y));const _=o.getTangent(0),x=l.getTangent(0);return Y.compareVectors(_,x)}compareEdgeAnglesHelper_(e,i,s){if(e===i)return 0;if(this.isHalfEdgeCurve(e)||this.isHalfEdgeCurve(i))return this.compareEdgeAnglesCurveHelper_(e,i,s);const n=Y.getNAN();this.getHalfEdgeToXY(e,n);const r=Y.getNAN();if(this.getHalfEdgeToXY(i,r),n.isEqualPoint2D(r))return 0;const o=Y.getNAN();this.getHalfEdgeFromXY(e,o);const l=Y.getNAN();l.setSub(n,o);const c=Y.getNAN();return c.setSub(r,o),!s||c.y>=0&&l.y>0?Y.compareVectors(l,c):0}compareEdgeAngles_(e,i){return this.compareEdgeAnglesHelper_(e,i,!1)}compareEdgeAnglesForPair_(e,i){return this.compareEdgeAnglesHelper_(e,i,!0)}compareEdgeAngles3D_(e,i){return K(0),0}compareEdgeAnglesForPair3D_(e,i){return K(0),0}dbgDumpChains_(){}dbgDumpChainToPolygon_(e,i){K(0)}deleteEdgeInternal_(e){const i=this.getHalfEdgeChain(e),s=this.getHalfEdgeTwin(e),n=this.getHalfEdgeChain(s);K(n===i),K(e===this.getHalfEdgeNext(s)||s===this.getHalfEdgeNext(e));let r=this.getHalfEdgeNext(e);r===s&&(r=this.getHalfEdgeNext(r),r===e&&(r=ae));const o=this.getChainIndex_(i),l=this.m_chainAreas.read(o);Number.isNaN(l)||(this.setChainArea_(i,Number.NaN),this.setChainPerimeter_(i,Number.NaN));const c=this.getChainHalfEdge(i);c!==e&&c!==s||this.setChainHalfEdge_(i,r),this.updateVertexToHalfEdgeConnection_(e,!0),this.deleteEdgeImpl_(e)}getFirstUnvisitedHalfEdgeOnCluster_(e,i,s){let n=i!==ae?i:this.getClusterHalfEdge(e);if(n===ae)return ae;const r=n;for(;;){if(this.getHalfEdgeUserIndex(n,s)!==1)return n;const o=this.getHalfEdgeNext(this.getHalfEdgeTwin(n));if(o===r)return ae;n=o}}removeSpikes_(){let e=!1;const i=this.createUserIndexForHalfEdges();for(let s=this.getFirstCluster();s!==ae;s=this.getNextCluster(s)){let n=ae;for(;;){let r=this.getFirstUnvisitedHalfEdgeOnCluster_(s,n,i);if(r===ae)break;n=this.getHalfEdgeNext(this.getHalfEdgeTwin(r));let o=r;for(;;){const l=this.getHalfEdgeNext(o),c=this.getHalfEdgePrev(o),f=this.getHalfEdgeTwin(o);if(c===f){if(this.deleteEdgeInternal_(o),e=!0,n!==o&&n!==f||(n=ae),o===r||c===r){if(r=l,o===r||c===r)break;o=l;continue}}else this.setHalfEdgeUserIndex(o,i,1);if(o=l,o===r)break}}}return this.deleteUserIndexForHalfEdges(i),e}progress_(e,i=!1){}newCluster_(){const e=this.m_clusterData.newElement();return this.m_clusterData.setField(e,1,0),e}newHalfEdgePair_(){const e=this.m_halfEdgeData.newElement();this.m_halfEdgeData.setField(e,2,0),this.m_halfEdgeData.setField(e,3,0);const i=this.m_halfEdgeData.newElement();return this.m_halfEdgeData.setField(i,2,0),this.m_halfEdgeData.setField(i,3,0),this.setHalfEdgeTwin_(e,i),this.setHalfEdgeTwin_(i,e),e}newChain_(){const e=this.m_chainData.newElement();return this.m_chainData.setField(e,2,0),e}deleteChain_(e){return K(0),0}getClusterIndex_(e){return this.m_clusterData.elementToIndex(e)}setClusterVertexIterator_(e,i){this.m_clusterData.setField(e,7,i)}setClusterHalfEdge_(e,i){this.m_clusterData.setField(e,2,i)}setClusterParentage_(e,i){this.m_clusterData.setField(e,1,i)}setPrevCluster_(e,i){this.m_clusterData.setField(e,3,i)}setNextCluster_(e,i){this.m_clusterData.setField(e,4,i)}setClusterVertexIndex_(e,i){this.m_clusterData.setField(e,5,i)}getClusterVertexIndex_(e){return this.m_clusterData.getField(e,5)}setClusterChain_(e,i){this.m_clusterData.setField(e,6,i)}addClusterToExteriorChain_(e,i){this.setClusterChain_(i,e)}getHalfEdgeIndex_(e){return this.m_halfEdgeData.elementToIndex(e)}setHalfEdgeOrigin_(e,i){this.m_halfEdgeData.setField(e,1,i)}setHalfEdgeTwin_(e,i){this.m_halfEdgeData.setField(e,4,i)}setHalfEdgePrev_(e,i){this.m_halfEdgeData.setField(e,5,i)}setHalfEdgeNext_(e,i){this.m_halfEdgeData.setField(e,6,i)}setHalfEdgeChain_(e,i){this.m_halfEdgeData.setField(e,2,i)}setHalfEdgeParentage_(e,i){this.m_halfEdgeData.setField(e,3,i)}getHalfEdgeParentageMask_(e){return this.m_halfEdgeData.getField(e,3)}setHalfEdgeVertexIterator_(e,i){this.m_halfEdgeData.setField(e,7,i)}updateVertexToHalfEdgeConnectionHelper_(e,i){const s=i?ae:e;for(let n=this.getHalfEdgeVertexIterator(e);n!==ae;n=this.incrementVertexIterator(n)){const r=this.getVertexFromVertexIterator(n);this.m_shape.setUserIndex(r,this.m_halfEdgeIndex,s)}}updateVertexToHalfEdgeConnection_(e,i){e!==ae&&(this.updateVertexToHalfEdgeConnectionHelper_(e,i),this.updateVertexToHalfEdgeConnectionHelper_(this.getHalfEdgeTwin(e),i))}getChainIndex_(e){return this.m_chainData.elementToIndex(e)}setChainHalfEdge_(e,i){this.m_chainData.setField(e,1,i)}setChainParentage_(e,i){this.m_chainData.setField(e,2,i)}setChainParent_(e,i){this.m_chainData.setField(e,3,i);const s=this.getChainFirstIsland(i);this.setChainNextInParent_(e,s),this.setChainFirstIsland_(i,e)}setChainFirstIsland_(e,i){this.m_chainData.setField(e,4,i)}setChainNextInParent_(e,i){this.m_chainData.setField(e,5,i)}setChainPrev_(e,i){this.m_chainData.setField(e,6,i)}setChainNext_(e,i){this.m_chainData.setField(e,7,i)}setChainArea_(e,i){const s=this.getChainIndex_(e);this.m_chainAreas.write(s,i)}setChainPerimeter_(e,i){const s=this.getChainIndex_(e);this.m_chainPerimeters.write(s,i)}updateChainAreaAndPerimeter_(e){const i=this.m_shape.hasCurves(),s=new Fr(0),n=new Fr(0),r=this.getChainHalfEdge(e),o=Y.getNAN(),l=Y.getNAN(),c=Y.getNAN();this.getHalfEdgeFromXY(r,o),l.setCoordsPoint2D(o);let f=r;do this.getHalfEdgeToXY(f,c),i&&this.isCurveEdge(f)||n.pe(Y.distance(l,c)),this.getHalfEdgeChain(this.getHalfEdgeTwin(f))!==e&&s.pe((c.x-o.x-(l.x-o.x))*(c.y-o.y+(l.y-o.y))*.5),l.setCoordsPoint2D(c),f=this.getHalfEdgeNext(f);while(f!==r);if(i){const _=new Qt;f=r;do{this.getHalfEdgeToXY(f,c);const x=this.isCurveEdge(f);if(x&&(this.querySegmentXY(f,_),n.pe(_.get().calculateLength2D())),this.getHalfEdgeChain(this.getHalfEdgeTwin(f))!==e&&x){const S=_.get().calculateArea2DHelper();s.pe(S)}f=this.getHalfEdgeNext(f)}while(f!==r)}const y=this.getChainIndex_(e);this.m_chainAreas.write(y,s.getResult()),this.m_chainPerimeters.write(y,n.getResult())}getChainTopmostEdge_(e){return K(0),0}planeSweepParentage_(e,i){const s=new Zet(this),n=new Gt;n.setCapacity(Math.trunc(this.m_pointCount/2)),n.setComparator(s);const r=[],o=this.createUserIndexForHalfEdges();let l=null;const c=Y.getNAN();for(let f=this.getFirstCluster();f!==ae;f=this.getNextCluster(f)){this.progress_(i);const y=this.getClusterHalfEdge(f);if(y!==ae){if(r.length=0,!this.tryOptimizedInsertion_(n,o,r,f,y)){this.queryXY(f,c),s.setY(c.y);let _=y;do{const x=this.getHalfEdgeUserIndex(_,o);x!==-1&&(n.deleteNode(x),this.setHalfEdgeUserIndex(_,o,Ut.impossibleIndex2())),_=this.getHalfEdgeNext(this.getHalfEdgeTwin(_))}while(y!==_);_=y;do{if(this.getHalfEdgeUserIndex(_,o)===-1){const x=n.addElement(_);r.push(x)}_=this.getHalfEdgeNext(this.getHalfEdgeTwin(_))}while(y!==_)}for(let _=r.length-1;_>=0;_--){const x=r[_],S=n.getElement(x),P=this.getHalfEdgeTwin(S);this.setHalfEdgeUserIndex(P,o,x),this.planeSweepParentagePropagateParentage_(n,x,e)}}else if(this.getClusterChain(f)===ae){l===null&&(l=new Ket(this)),this.queryXY(f,c),l.setPointXY(c);const _=n.searchLowerBound(l);let x=this.m_universeChain;if(_!==-1){let S=n.getElement(_);this.getHalfEdgeChain(S)===this.getHalfEdgeChain(this.getHalfEdgeTwin(S))&&(S=this.getLeftSkipPolylines_(n,_)),S!==ae&&(x=this.getHalfEdgeChain(S))}this.addClusterToExteriorChain_(x,f)}}this.deleteUserIndexForHalfEdges(o)}planeSweepParentagePropagateParentage_(e,i,s){const n=e.getElement(i),r=this.getHalfEdgeChain(n);if(this.getChainParent(r)!==ae)return;const o=this.getLeftSkipPolylines_(e,i),l=this.getHalfEdgeTwin(n),c=this.getHalfEdgeChain(l);let f=this.getChainParent(r),y=this.getChainParent(c);if(o===ae)f===ae&&(c===r?(this.setChainParent_(c,this.m_universeChain),y=this.m_universeChain,f=y):(y===ae&&(this.setChainParent_(c,this.m_universeChain),y=this.m_universeChain),this.setChainParent_(r,c),f=c));else{const _=this.getHalfEdgeChain(o);if(y===ae){if(this.getChainArea(_)<=0){const x=this.getChainParent(_);this.setChainParent_(c,x),y=x}else this.setChainParent_(c,_),y=_;c===r&&(f=y)}}f===ae&&(this.trySetChainParentFromTwin_(r,c),f=this.getChainParent(r)),K(f!==ae),s===fa.enumInputModeBuildGraph?this.propagateParentageBuildGraph_(e,i,n,o):s===fa.enumInputModeSimplifyWinding?this.propagateParentageWinding_(e,i,n,o,l,r,c):s===fa.enumInputModeSimplifyAlternate&&this.propagateParentageAlternate_(e,i,n,o,l,r,c)}propagateParentageBuildGraph_(e,i,s,n){let r,o=i;n===ae?(o=e.getNext(o),r=this.getHalfEdgeChain(s)):r=this.getHalfEdgeChain(n);let l=null,c=this.getChainParentage(r);for(this.m_bBuildGeometryParentageSets&&(l=this.getChainBitSet(r));o!==-1;o=e.getNext(o)){const f=e.getElement(o),y=this.getHalfEdgeTwin(f);r=this.getHalfEdgeChain(f);const _=this.getHalfEdgeChain(y);if(this.m_bBuildGeometryParentageSets){let k=this.getChainBitSet(_);k=new ph({copy:k}),k.assignOr(l),this.setChainBitSet_(_,k);let $=this.getChainBitSet(r);const F=this.getLeftEdgeBitSet_(f),G=new ph({copy:l});if(G.assignSubtract(F),G.isZero())break;$=new ph({copy:$}),$.assignOr(G),this.setChainBitSet_(r,$),l=$}const x=this.getChainParentage(_),S=x|c;S!==x&&this.setChainParentage_(_,S);let P=this.getChainParentage(r);const A=c&~this.getHalfEdgeUserIndex(f,this.m_tmpHalfEdgeParentageIndexLeft);if(A&&(P|=A,this.setChainParentage_(r,P)),A===0)break;c=P}}propagateParentageWinding_(e,i,s,n,r,o,l){if(o===l)return;let c=this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeWindingNumberIndex);c+=this.getHalfEdgeUserIndex(r,this.m_tmpHalfEdgeWindingNumberIndex);let f=0;const y=[],_=[];_.push(0);for(let x=e.getFirst();x!==i;x=e.getNext(x)){const S=e.getElement(x),P=this.getHalfEdgeTwin(S),A=this.getHalfEdgeChain(S),k=this.getHalfEdgeChain(P);if(A!==k){let $=this.getHalfEdgeUserIndex(S,this.m_tmpHalfEdgeWindingNumberIndex);$+=this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeWindingNumberIndex),f+=$;let F=!1;y.length!==0&&y.at(-1)===k&&(_.pop(),y.pop(),F=!0),K(this.getChainParent(k)!==ae),F&&this.getChainParent(k)===A||(_.push(f),y.push(A))}}if(f+=c,y.length!==0&&y.at(-1)===l&&(_.pop(),y.pop()),f!==0){if(_.at(-1)===0){const x=this.m_simplifiedGeometry,S=this.getGeometryID(x);this.setChainParentage_(o,S)}}else if(_.at(-1)!==0){const x=this.m_simplifiedGeometry,S=this.getGeometryID(x);this.setChainParentage_(o,S)}}propagateParentageAlternate_(e,i,s,n,r,o,l){const c=this.m_simplifiedGeometry,f=this.getGeometryID(c);if(n===ae)this.setChainParentage_(l,this.m_universeGeomID),1&this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(o,f):this.setChainParentage_(o,this.m_universeGeomID);else{const y=this.getChainParentage(l);if(y===0){const _=this.getHalfEdgeChain(n),x=this.getChainParentage(_);this.setChainParentage_(l,x),1&this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(o,x===f?this.m_universeGeomID:f):this.setChainParentage_(o,x)}else 1&this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(o,y===f?this.m_universeGeomID:f):this.setChainParentage_(o,y)}}tryOptimizedInsertion_(e,i,s,n,r){let o=r,l=-1,c=ae,f=0;do{if(f===2)return!1;const y=this.getHalfEdgeUserIndex(o,i);if(y!==-1){if(l!==-1)return!1;l=y}else{if(c!==ae)return!1;c=o}f++,o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o))}while(r!==o);return c!==ae&&l!==-1&&(this.setHalfEdgeUserIndex(e.getElement(l),i,Ut.impossibleIndex2()),e.setElement(l,c),s.push(l),!0)}trySetChainParentFromTwin_(e,i){const s=this.getChainArea(e);if(s===0)return!1;const n=this.getChainArea(i);if(s>0&&n<0||s<0&&n>0)return this.setChainParent_(e,i),!0;{const r=this.getChainParent(i);if(r!==ae)return this.setChainParent_(e,r),!0}return!1}createHalfEdges_(e,i){this.m_halfEdgeIndex=this.m_shape.createUserIndex();for(let s=0,n=i.size();s<n;s++){const r=i.read(s),o=this.m_shape.getUserIndex(r,this.m_clusterIndex),l=this.m_shape.getPathFromVertex(r),c=this.m_shape.getGeometryFromPath(l),f=this.m_shape.getGeometryType(c);if(bi(f)){const y=this.m_shape.getNextVertex(r);if(y===ae)continue;const _=this.m_shape.getUserIndex(y,this.m_clusterIndex);if(o===_)continue;const x=this.newHalfEdgePair_(),S=this.getHalfEdgeTwin(x),P=this.m_clusterVertices.newElement();this.m_clusterVertices.setField(P,0,r),this.m_clusterVertices.setField(P,1,-1),this.setHalfEdgeVertexIterator_(x,P),this.m_shape.setUserIndex(r,this.m_halfEdgeIndex,x),this.setHalfEdgeOrigin_(x,o);const A=this.getClusterHalfEdge(o);if(A===ae)this.setClusterHalfEdge_(o,x),this.setHalfEdgePrev_(x,S),this.setHalfEdgeNext_(S,x);else{const G=this.getHalfEdgePrev(A);this.setHalfEdgePrev_(A,S),this.setHalfEdgeNext_(S,A),this.setHalfEdgeNext_(G,x),this.setHalfEdgePrev_(x,G)}this.setHalfEdgeOrigin_(S,_);const k=this.getClusterHalfEdge(_);if(k===ae)this.setClusterHalfEdge_(_,S),this.setHalfEdgeNext_(x,S),this.setHalfEdgePrev_(S,x);else{const G=this.getHalfEdgePrev(k);this.setHalfEdgePrev_(k,x),this.setHalfEdgeNext_(x,k),this.setHalfEdgeNext_(G,S),this.setHalfEdgePrev_(S,G)}const $=this.getGeometryID(c);if(e===fa.enumInputModeBuildGraph){const G=f===me.enumPolygon?$:0;if(this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeParentageIndex,0),this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeParentageIndex,G),this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeParentageIndexLeft,G),this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeParentageIndexLeft,0),this.m_bBuildGeometryParentageSets){const V=new ph,B=this.m_shape.getGeometryUserIndex(c,this.m_geometryIDIndex);V.setBit(B),this.setEdgeBitSet_(x,V),this.setEdgeBitSet_(S,null),this.setLeftEdgeBitSet_(S,V),this.setLeftEdgeBitSet_(x,null)}}else if(e===fa.enumInputModeSimplifyWinding){const G=this.m_shape.getXY(r),V=this.m_shape.getXY(y);let B=0,W=0;G.compare(V)<0?B=1:W=-1,this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeWindingNumberIndex,B),this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeWindingNumberIndex,W)}else e===fa.enumInputModeSimplifyAlternate&&(this.setHalfEdgeUserIndex(x,this.m_tmpHalfEdgeOddEvenNumberIndex,1),this.setHalfEdgeUserIndex(S,this.m_tmpHalfEdgeOddEvenNumberIndex,1));const F=f===me.enumPolygon?Fh.c_EdgeBitMask:0;this.setHalfEdgeParentage_(x,$|F),this.setHalfEdgeParentage_(S,$|F)}}if(this.m_shape.hasCurves()){this.m_segmentIndexHe=this.createUserIndexForHalfEdges();for(let s=0,n=i.size();s<n;s++){const r=i.read(s);if(this.m_shape.getSegment(r)){const o=this.m_shape.getUserIndex(r,this.m_halfEdgeIndex);o!==ae&&(this.setHalfEdgeUserIndex(o,this.m_segmentIndexHe,this.m_shape.getVertexIndex(r)),this.setHalfEdgeUserIndex(this.getHalfEdgeTwin(o),this.m_segmentIndexHe,-2))}}}}mergeVertexListsOfEdges_(e,i){{const r=this.getHalfEdgeVertexIterator(i);if(r!==ae){const o=this.getHalfEdgeVertexIterator(e);this.m_clusterVertices.setField(r,1,o),this.setHalfEdgeVertexIterator_(e,r),this.setHalfEdgeVertexIterator_(i,ae)}}const s=this.getHalfEdgeTwin(e),n=this.getHalfEdgeTwin(i);{const r=this.getHalfEdgeVertexIterator(n);if(r!==ae){const o=this.getHalfEdgeVertexIterator(s);this.m_clusterVertices.setField(r,1,o),this.setHalfEdgeVertexIterator_(s,r),this.setHalfEdgeVertexIterator_(n,ae)}}if(this.m_segmentIndexHe!==-1){let r=this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe);if(r!==-1){if(r===-2){const o=this.getHalfEdgeUserIndex(i,this.m_segmentIndexHe);this.setHalfEdgeUserIndex(e,this.m_segmentIndexHe,o)}if(r=this.getHalfEdgeUserIndex(s,this.m_segmentIndexHe),r===-2){const o=this.getHalfEdgeUserIndex(n,this.m_segmentIndexHe);this.setHalfEdgeUserIndex(s,this.m_segmentIndexHe,o)}}}}sortHalfEdgesByAngle_(e){const i=[];for(let s=this.getFirstCluster();s!==ae;s=this.getNextCluster(s)){i.length=0;const n=this.getClusterHalfEdge(s);if(n!==ae){let r=n;do i.push(r),r=this.getHalfEdgeNext(this.getHalfEdgeTwin(r));while(r!==n);if(i.length>1){let o=!0;i.length>2?(i.sort((x,S)=>this.compareEdgeAngles_(x,S)),i.push(i[0])):this.compareEdgeAnglesForPair_(i[0],i[1])>0?i[1]=St(i[0],i[0]=i[1]):o=!1;let l=i[0],c=l,f=this.getHalfEdgeTo(c),y=this.getHalfEdgeTwin(c),_=ae;for(let x=1,S=i.length;x<S;x++){const P=i[x],A=this.getHalfEdgeTwin(P),k=this.getHalfEdgeOrigin(A);if(k!==f||P===c)this.updateVertexToHalfEdgeConnection_(_,!1),_=ae,c=P,f=k,y=A;else{if(e===fa.enumInputModeBuildGraph){const $=this.getHalfEdgeParentageMask_(c)|this.getHalfEdgeParentageMask_(P);if(this.setHalfEdgeParentage_(c,$),this.setHalfEdgeParentage_(y,$),this.setHalfEdgeUserIndex(c,this.m_tmpHalfEdgeParentageIndex,this.getHalfEdgeUserIndex(c,this.m_tmpHalfEdgeParentageIndex)|this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeParentageIndex)),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndex,this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndex)|this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeParentageIndex)),this.setHalfEdgeUserIndex(c,this.m_tmpHalfEdgeParentageIndexLeft,this.getHalfEdgeUserIndex(c,this.m_tmpHalfEdgeParentageIndexLeft)|this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeParentageIndexLeft)),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndexLeft,this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndexLeft)|this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeParentageIndexLeft)),this.m_bBuildGeometryParentageSets){let F,G,V;F=this.getEdgeBitSet_(c),G=this.getEdgeBitSet_(P),V=new ph({copy:F}),V.assignOr(G),this.setEdgeBitSet_(c,V),F=this.getEdgeBitSet_(y),G=this.getEdgeBitSet_(A),V=new ph({copy:F}),V.assignOr(G),this.setEdgeBitSet_(y,V),F=this.getLeftEdgeBitSet_(c),G=this.getLeftEdgeBitSet_(P),V=new ph({copy:F}),V.assignOr(G),this.setLeftEdgeBitSet_(c,V),F=this.getLeftEdgeBitSet_(y),G=this.getLeftEdgeBitSet_(A),V=new ph({copy:F}),V.assignOr(G),this.setLeftEdgeBitSet_(y,V)}}else if(this.m_tmpHalfEdgeWindingNumberIndex!==-1){const $=this.getHalfEdgeUserIndex(c,this.m_tmpHalfEdgeWindingNumberIndex)+this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeWindingNumberIndex),F=this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeWindingNumberIndex)+this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeWindingNumberIndex);this.setHalfEdgeUserIndex(c,this.m_tmpHalfEdgeWindingNumberIndex,$),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeWindingNumberIndex,F)}else if(this.m_tmpHalfEdgeOddEvenNumberIndex!==-1){const $=this.getHalfEdgeUserIndex(c,this.m_tmpHalfEdgeOddEvenNumberIndex)+this.getHalfEdgeUserIndex(P,this.m_tmpHalfEdgeOddEvenNumberIndex),F=this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeOddEvenNumberIndex)+this.getHalfEdgeUserIndex(A,this.m_tmpHalfEdgeOddEvenNumberIndex);this.setHalfEdgeUserIndex(c,this.m_tmpHalfEdgeOddEvenNumberIndex,$),this.setHalfEdgeUserIndex(y,this.m_tmpHalfEdgeOddEvenNumberIndex,F)}this.mergeVertexListsOfEdges_(c,P),this.deleteEdgeImpl_(P),_=c,i[x]=ae,P===l&&(i[0]=ae,l=ae)}}if(this.updateVertexToHalfEdgeConnection_(_,!1),_=ae,!o){l=ae;for(let x=0,S=i.length;x<S;x++){const P=i[x];if(P!==ae){l=P;break}}n!==l&&this.setClusterHalfEdge_(s,l);continue}l=ae;for(let x=0,S=i.length;x<S;x++){const P=i[x];if(P===ae)continue;if(l===ae){l=P,c=l,f=this.getHalfEdgeTo(c),y=this.getHalfEdgeTwin(c);continue}if(P===c)continue;const A=this.getHalfEdgeTwin(P),k=this.getHalfEdgeOrigin(A);this.setHalfEdgeNext_(y,P),this.setHalfEdgePrev_(P,y),c=P,f=k,y=A}this.setClusterHalfEdge_(s,l)}}}}sortHalfEdgesByAngleHelper_(e){K(0)}sortHalfEdgesByAngle3D_(e){K(0)}buildChains_(e){this.m_universeChain=this.newChain_(),this.setChainHalfEdge_(this.m_universeChain,ae);let i=this.m_universeChain;const s=this.createUserIndexForHalfEdges();for(let n=this.getFirstCluster();n!==ae;n=this.getNextCluster(n)){const r=this.getClusterHalfEdge(n);if(r!==ae){let o=r;do{if(this.getHalfEdgeUserIndex(o,s)!==1){const l=this.newChain_();this.setChainHalfEdge_(l,o),this.setChainPrev_(l,i),this.setChainNext_(i,l);let c=null;this.m_bBuildGeometryParentageSets&&(c=new ph),i=l;let f=0,y=o;do this.m_tmpHalfEdgeParentageIndex!==-1&&(f|=this.getHalfEdgeUserIndex(y,this.m_tmpHalfEdgeParentageIndex)),this.m_bBuildGeometryParentageSets&&c.assignOr(this.getEdgeBitSet_(y)),this.setHalfEdgeChain_(y,l),this.setHalfEdgeUserIndex(y,s,1),y=this.getHalfEdgeNext(y);while(y!==o);this.m_bBuildGeometryParentageSets&&this.setChainBitSet_(l,c),this.setChainParentage_(l,f)}o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o))}while(o!==r)}}this.m_chainAreas=new nd(this.m_chainData.size(),Number.NaN),this.m_chainPerimeters=new nd(this.m_chainData.size(),Number.NaN),this.setChainArea_(this.m_universeChain,Number.POSITIVE_INFINITY),this.setChainPerimeter_(this.m_universeChain,Number.POSITIVE_INFINITY),this.deleteUserIndexForHalfEdges(s)}simplify_(e){K(0)}simplifyAlternate_(){K(0)}simplifyWinding_(){K(0)}setEditShapeImpl_(e,i,s,n,r){this.removeShape(),this.m_bBuildChains=r,this.m_shape=e,this.m_geometryIDIndex=this.m_shape.createGeometryUserIndex();let o=this.m_shape.getTotalPointCount();if(s){o=0;for(let S=0,P=s.length;S<P;S++)o+=this.m_shape.getPointCount(s[S])}const l=new Ns(0);let c=0,f=0;{let S=s!=null?s[0]:this.m_shape.getFirstGeometry(),P=1;for(;S!==ae;){this.m_shape.setGeometryUserIndex(S,this.m_geometryIDIndex,f++);for(let A=this.m_shape.getFirstPath(S);A!==ae;A=this.m_shape.getNextPath(A)){let k=this.m_shape.getFirstVertex(A);for(let $=0,F=this.m_shape.getPathSize(A);$<F;$++)l.add(k),k=this.m_shape.getNextVertex(k)}Ig(this.m_shape.getGeometryType(S))||(c+=this.m_shape.getPathCount(S)),s!=null?(S=P<s.length?s[P]:ae,P++):S=this.m_shape.getNextGeometry(S)}}this.m_universeGeomID=1<<Math.min(f,31),this.m_pointCount=l.size(),this.m_shape.sortVerticesSimpleByY(l,0,this.m_pointCount),this.m_clusterVertices.setCapacity(this.m_pointCount),this.progress_(n,!0),this.m_clusterData.setCapacity(this.m_pointCount+10),this.m_halfEdgeData.setCapacity(2*this.m_pointCount+32),this.m_chainData.setCapacity(Math.max(32,c)),this.m_clusterIndex=this.m_shape.createUserIndex();const y=Y.getNAN();let _=0;const x=Y.getNAN();for(let S=0;S<=this.m_pointCount;S++){if(S<this.m_pointCount){const P=l.read(S);this.m_shape.queryXY(P,x)}else x.setNAN();if(!y.isEqualPoint2D(x)){if(_<S){const P=this.newCluster_();let A=ae,k=-1;for(let $=_;$<S;$++){k=l.read($),this.m_shape.setUserIndex(k,this.m_clusterIndex,P);const F=this.m_clusterVertices.newElement();this.m_clusterVertices.setField(F,0,k),this.m_clusterVertices.setField(F,1,A),A=F;const G=this.m_shape.getPathFromVertex(k),V=this.m_shape.getGeometryFromPath(G),B=this.getGeometryID(V);this.setClusterParentage_(P,this.getClusterParentage(P)|B)}this.setClusterVertexIterator_(P,A),this.setClusterVertexIndex_(P,this.m_shape.getVertexIndex(k)),this.m_lastCluster!==ae&&this.setNextCluster_(this.m_lastCluster,P),this.setPrevCluster_(P,this.m_lastCluster),this.m_lastCluster=P,this.m_firstCluster===ae&&(this.m_firstCluster=P)}_=S,y.setCoordsPoint2D(x)}}if(this.m_shape.hasSegmentParentage()){this.m_clusterBreakNodeIndex===-1&&(this.m_clusterBreakNodeIndex=this.createUserIndexForClusters());for(let S=0;S<this.m_pointCount;S++){const P=l.read(S);if(this.m_shape.getSegmentParentageBreakVertex(P)){const A=this.getClusterFromVertex(P);this.setBreakNode(A,!0)}}}this.progress_(n,!0);{let S=s!=null?s[0]:this.m_shape.getFirstGeometry(),P=1;for(;S!==ae;){for(let A=this.m_shape.getFirstPath(S);A!==ae;A=this.m_shape.getNextPath(A)){if(this.m_shape.isStrongPathStart(A)){const k=this.m_shape.getFirstVertex(A),$=this.getClusterFromVertex(k);this.setStrongPathNode($,!0)}if(this.m_shape.isStrongPathEnd(A)){const k=this.m_shape.isClosedPath(A)?this.m_shape.getFirstVertex(A):this.m_shape.getLastVertex(A),$=this.getClusterFromVertex(k);this.setStrongPathNode($,!0)}}s!=null?(S=P<s.length?s[P]:ae,P++):S=this.m_shape.getNextGeometry(S)}}if(i===fa.enumInputModeBuildGraph&&(this.m_tmpHalfEdgeParentageIndex=this.createUserIndexForHalfEdges(),this.m_tmpHalfEdgeParentageIndexLeft=this.createUserIndexForHalfEdges()),i===fa.enumInputModeSimplifyWinding&&(this.m_tmpHalfEdgeWindingNumberIndex=this.createUserIndexForHalfEdges()),i===fa.enumInputModeSimplifyAlternate&&(this.m_tmpHalfEdgeOddEvenNumberIndex=this.createUserIndexForHalfEdges()),this.createHalfEdges_(i,l),this.dbgNavigate_(),this.sortHalfEdgesByAngle_(i),!Number.isNaN(this.m_checkDirtyPlanesweepTolerance)&&!this.checkStructureAfterDirtySweep_())return this.m_bDirtyCheckFailed=!0,void this.cleanSetEditShapeImpl_();this.buildChains_(i),this.m_tmpHalfEdgeParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_bBuildChains&&this.planeSweepParentage_(i,n),this.m_tmpHalfEdgeParentageIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.dbgChkChainParents_(),this.dbgDumpChains_(),this.mergeSegmentParentage_(),this.dbgNavigate_(),this.dbgDumpChains_(),this.cleanSetEditShapeImpl_()}setEditShapeImpl3D_(e,i,s,n,r){K(0)}cleanSetEditShapeImpl_(){this.m_tmpHalfEdgeParentageIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_tmpHalfEdgeParentageIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.m_tmpHalfEdgeWindingNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeWindingNumberIndex),this.m_tmpHalfEdgeWindingNumberIndex=-1),this.m_tmpHalfEdgeOddEvenNumberIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeOddEvenNumberIndex),this.m_tmpHalfEdgeOddEvenNumberIndex=-1)}cleanSetEditShapeImpl3D_(){K(0)}dbgNavigate_(){}dbgChkChainParents_(){}deleteEdgeImpl_(e){const i=this.getHalfEdgeNext(e),s=this.getHalfEdgePrev(e),n=this.getHalfEdgeTwin(e),r=this.getHalfEdgeNext(n),o=this.getHalfEdgePrev(n);i!==n&&(this.setHalfEdgeNext_(o,i),this.setHalfEdgePrev_(i,o)),s!==n&&(this.setHalfEdgeNext_(s,r),this.setHalfEdgePrev_(r,s));const l=this.getHalfEdgeOrigin(e);this.getClusterHalfEdge(l)===e&&(r!==e?this.setClusterHalfEdge_(l,r):this.setClusterHalfEdge_(l,ae));const c=this.getHalfEdgeOrigin(n);this.getClusterHalfEdge(c)===n&&(i!==n?this.setClusterHalfEdge_(c,i):this.setClusterHalfEdge_(c,ae)),this.m_halfEdgeData.deleteElement(e),this.m_halfEdgeData.deleteElement(n)}getLeftSkipPolylines_(e,i){let s=i;for(;;){if(s=e.getPrev(s),s===-1)return ae;{const n=e.getElement(s);if(this.getHalfEdgeChain(n)!==this.getHalfEdgeChain(this.getHalfEdgeTwin(n)))return n}}}checkStructureAfterDirtySweep_(){const e=Ui(this.m_checkDirtyPlanesweepTolerance),i=new Y,s=new Y,n=new Y,r=new Y,o=new Y;for(let l=this.getFirstCluster();l!==ae;l=this.getNextCluster(l)){const c=this.getClusterHalfEdge(l);if(c!==ae){let f=c;this.getHalfEdgeFromXY(f,i),this.getHalfEdgeToXY(f,s),n.setSub(s,i);let y=n.sqrLength();do{const _=f;if(f=this.getHalfEdgeNext(this.getHalfEdgeTwin(f)),f!==_){this.getHalfEdgeToXY(f,r),o.setSub(r,i);const x=o.sqrLength(),S=o.crossProduct(n),P=S*S/(x*y);if(Math.min(x,y)*P<=e&&o.dotProduct(n)>=0)return!1;n.assign(o),y=x,s.assign(r)}}while(f!==c)}}return!0}extractPolygonPathFromChain_(e,i,s,n,r){const o=this.m_shape.hasSegmentParentage(),l=this.getChainHalfEdge(s);let c=l,f=ae;const y=new Ht;do{const _=this.getHalfEdgeTwin(c);if(this.getHalfEdgeChain(_)!==s){let x=ae;const S=this.getHalfEdgeOrigin(c);if(n===ae){const A=this.getClusterVertexIterator(S);x=this.getVertexFromVertexIterator(A)}else for(let A=this.getClusterVertexIterator(S);A!==ae;A=this.incrementVertexIterator(A)){const k=this.getVertexFromVertexIterator(A);x===ae&&(x=k);const $=this.m_shape.getPathFromVertex(k);if(this.m_shape.getGeometryFromPath($)===n){x=k;break}}let P;if(f===ae&&(f=e.insertPath(i,ae),e.setClosedPath(f,!0)),this.m_shape===e?P=e.addVertex(f,x):(this.m_shape.queryPoint(x,y),P=e.addPoint(f,y)),this.isHalfEdgeCurve(c)&&(this.querySegmentXY(c,r),e.setSegmentToIndex(e.getVertexIndex(P),r.get().clone())),o){const A=this.getSegmentParentage(c);e.setSegmentParentageAndBreak(P,A,this.isBreakNode(S))}}c=this.getHalfEdgeNext(c)}while(c!==l)}mergeSegmentParentage_(){if(!this.m_shape.hasSegmentParentage())return;K(this.m_clusterBreakNodeIndex!==-1),K(this.m_segmentParentageIndex===-1);for(let n=this.getFirstCluster();n!==ae;n=this.getNextCluster(n)){let r=0;const o=this.getClusterHalfEdge(n);if(o!==ae){let l=o;do r++,l=this.getHalfEdgeNext(this.getHalfEdgeTwin(l));while(l!==o&&r<3)}r!==2&&this.setBreakNode(n,!0)}let e=[],i=[];this.m_segmentParentageIndex=this.createUserIndexForHalfEdges();const s=this.createUserIndexForHalfEdges();for(let n=this.getFirstCluster();n!==ae;n=this.getNextCluster(n)){const r=this.getClusterHalfEdge(n);if(r!==ae){let o=!1,l=r;do{let c=l;for(;this.getHalfEdgeUserIndex(c,s)===-1;){const f=this.getHalfEdgeNext(c),y=this.getHalfEdgeTwin(c);pie(this,c,i);const _=i.at(-1).parentage;if(!o){const S=this.getHalfEdgeOrigin(c);if(!this.isBreakNode(S)){const P=this.getHalfEdgePrev(c);c!==P&&(pie(this,P,e),o=!0)}}if(o&&!Jet(i,e)){const S=this.getHalfEdgeOrigin(c);this.setBreakNode(S,!0)}e=St(i,i=e),o=!0;const x=this.getHalfEdgeOrigin(f);this.isBreakNode(x)&&(o=!1),this.setHalfEdgeUserIndex(c,this.m_segmentParentageIndex,_),this.setHalfEdgeUserIndex(y,this.m_segmentParentageIndex,_),this.setHalfEdgeUserIndex(c,s,1),this.setHalfEdgeUserIndex(y,s,1),c=f}l=this.getHalfEdgeNext(this.getHalfEdgeTwin(l))}while(l!==r)}}this.deleteUserIndexForHalfEdges(s)}registerNewBitSet(e){return this.m_uniqueBitSets===null&&(this.m_uniqueBitSets=Qet(),this.m_uniqueBitSets.add(this.getEmptySet())),e===null?this.getEmptySet():this.m_uniqueBitSets.has(e)?this.m_uniqueBitSets.get(e):(this.m_uniqueBitSets.add(e),e)}getLeftEdgeBitSet_(e){const i=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft);return K(i>=0),K(this.m_edgeBitSets.at(i)),this.m_edgeBitSets.at(i)}getEdgeBitSet_(e){const i=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndex);return K(i>=0),this.m_edgeBitSets.at(i)}setEdgeBitSet_(e,i){K(this.m_bBuildGeometryParentageSets),i=this.registerNewBitSet(i),this.m_edgeBitSetIndex===-1&&(this.m_edgeBitSetIndex=this.createUserIndexForHalfEdges());const s=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndex);s!==-1?this.m_edgeBitSets[s]=i:(this.setHalfEdgeUserIndex(e,this.m_edgeBitSetIndex,this.m_edgeBitSets.length),this.m_edgeBitSets.push(i))}setLeftEdgeBitSet_(e,i){K(this.m_bBuildGeometryParentageSets),i=this.registerNewBitSet(i),this.m_edgeBitSetIndexLeft===-1&&(this.m_edgeBitSetIndexLeft=this.createUserIndexForHalfEdges());const s=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft);s!==-1?this.m_edgeBitSets[s]=i:(this.setHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft,this.m_edgeBitSets.length),this.m_edgeBitSets.push(i))}setChainBitSet_(e,i){K(this.m_bBuildGeometryParentageSets),i=this.registerNewBitSet(i),this.m_chainBitSetIndex===-1&&(this.m_chainBitSetIndex=this.createUserIndexForChains());const s=this.getChainUserIndex(e,this.m_chainBitSetIndex);s!==-1?this.m_chainBitSets[s]=i:(this.setChainUserIndex(e,this.m_chainBitSetIndex,this.m_chainBitSets.length),this.m_chainBitSets.push(i))}getEmptySet(){return this.m_emptyBitSet||(this.m_emptyBitSet=new ph),this.m_emptyBitSet}deleteEdgeBitSets_(){this.m_edgeBitSetIndex!==-1&&(this.deleteUserIndexForHalfEdges(this.m_edgeBitSetIndex),this.m_edgeBitSetIndex=-1),this.m_edgeBitSetIndexLeft!==-1&&(this.deleteUserIndexForHalfEdges(this.m_edgeBitSetIndexLeft),this.m_edgeBitSetIndexLeft=-1),this.m_edgeBitSets.length=0,this.m_uniqueBitSets=null}deleteChainBitSets_(){this.m_chainBitSetIndex!==-1&&(this.deleteUserIndexForChains(this.m_chainBitSetIndex),this.m_chainBitSetIndex=-1,this.m_chainBitSets.length=0)}dbgPrintEdge_(e){K(0)}dbgVerifyEdgeSegment(e){K(0)}}Fh.c_EdgeParentageMask=2147483647,Fh.c_EdgeBitMask=1<<31;class ws{freeNode_(e){this.m_listNodes.deleteElement(e)}newNode_(){return this.m_listNodes.newElement()}freeList_(e){this.m_lists.deleteElement(e)}newList_(){return this.m_lists.newElement()}Init_(e){K(0)}constructor(e){this.m_listNodes=new Ut(2),this.m_listOfLists=ws.st_nullNode(),this.m_bAllowNavigationBetweenLists=!0,e===void 0&&(e=!0),this.m_bAllowNavigationBetweenLists=e,this.m_lists=new Ut(this.m_bAllowNavigationBetweenLists?4:2)}createList(){const e=this.newList_();return this.m_bAllowNavigationBetweenLists&&(this.m_lists.setField(e,3,this.m_listOfLists),this.m_listOfLists!==ws.st_nullNode()&&this.m_lists.setField(this.m_listOfLists,2,e),this.m_listOfLists=e),e}deleteList(e){let i=this.getFirst(e);for(;i!==ws.st_nullNode();){const s=i;i=this.getNext(i),this.freeNode_(s)}if(this.m_bAllowNavigationBetweenLists){const s=this.m_lists.getField(e,2),n=this.m_lists.getField(e,3);s!==ws.st_nullNode()?this.m_lists.setField(s,3,n):this.m_listOfLists=n,n!==ws.st_nullNode()&&this.m_lists.setField(n,2,s)}this.freeList_(e)}reserveLists(e){this.m_lists.setCapacity(e)}addElement(e,i){this.m_lists.getField(e,0);const s=this.m_lists.getField(e,1),n=this.newNode_();return s!==ws.st_nullNode()?(this.m_listNodes.setField(s,1,n),this.m_lists.setField(e,1,n)):(this.m_lists.setField(e,0,n),this.m_lists.setField(e,1,n)),this.m_listNodes.setField(n,0,i),n}reserveNodes(e){this.m_listNodes.setCapacity(e)}deleteElementDirect(e,i,s){i!==ws.st_nullNode()?(this.m_listNodes.setField(i,1,this.m_listNodes.getField(s,1)),this.m_lists.getField(e,1)===s&&this.m_lists.setField(e,1,i)):(this.m_lists.setField(e,0,this.m_listNodes.getField(s,1)),this.m_lists.getField(e,1)===s&&this.m_lists.setField(e,1,ws.st_nullNode())),this.freeNode_(s)}deleteElementSearch(e,i){let s=-1,n=this.getFirst(e);for(;n!==i;)s=n,n=this.getNext(n);this.deleteElementDirect(e,s,i)}concatenateLists(e,i){const s=this.m_lists.getField(e,1),n=this.m_lists.getField(i,0);if(n!==ws.st_nullNode()&&(s!==ws.st_nullNode()?(this.m_listNodes.setField(s,1,n),this.m_lists.setField(e,1,this.m_lists.getField(i,1))):(this.m_lists.setField(e,0,n),this.m_lists.setField(e,1,this.m_lists.getField(i,1)))),this.m_bAllowNavigationBetweenLists){const r=this.m_lists.getField(i,2),o=this.m_lists.getField(i,3);r!==ws.st_nullNode()?this.m_lists.setField(r,3,o):this.m_listOfLists=o,o!==ws.st_nullNode()&&this.m_lists.setField(o,2,r)}return this.freeList_(i),e}getElement(e){return this.m_listNodes.getField(e,0)}getData(e){return this.getElement(e)}setElement(e,i){K(0)}getNext(e){return this.m_listNodes.getField(e,1)}getFirst(e){return this.m_lists.getField(e,0)}getFirstElement(e){const i=this.getFirst(e);return this.getElement(i)}static st_nullNode(){return-1}clear(){this.m_listNodes.deleteAll(!0),this.m_lists.deleteAll(!0),this.m_listOfLists=ws.st_nullNode()}isEmpty(e){return K(0),!1}getNodeCount(){return this.m_listNodes.size()}getListCount(){return this.m_lists.size()}getFirstList(){return this.m_listOfLists}getNextList(e){return this.m_lists.getField(e,3)}}function IN(t=-1){return{m_value:t,m_line:new si,m_segment:null,m_segmentInfo:new Pz(-1),m_env:new Ze(0,0),m_dxdy:55555555,m_bHorizontal:!1,m_bCurve:!1}}const ett=67;class S1e extends zv{constructor(e,i,s){super(!0),this.m_bIntersectionDetected=!1,this.m_nonSimpleResult=new xs,this.m_tempSimpleEdge1=IN(),this.m_tempSimpleEdge2=IN(),this.m_prev1=ae,this.m_prev2=ae,this.m_vertex1=ae,this.m_vertex2=ae,this.m_currentNode=-1,this.m_prevX1=Number.NaN,this.m_prevX2=Number.NaN,this.m_prevY=Number.NaN,this.m_prevX=0,this.m_sweepY=Number.NaN,this.m_sweepX=0,this.m_ptSweep=new Y,this.m_simpleEdgesCache=[],this.m_simpleEdgesRecycle=[],this.m_cOutstandingConstructedEdges=0,this.m_shape=e,this.m_bShapeHasSegments=this.m_shape.hasCurves(),this.m_tolerance=i,this.m_tolerance10=10*i,this.m_bIsSimple=s;const n=Math.trunc(Math.min(3*e.getTotalPointCount()/2,ett)),r=Math.min(7,n);this.m_simpleEdgesCache.length=r}tryGetCachedEdge_(e){const i=this.m_simpleEdgesCache[(e&ya())%this.m_simpleEdgesCache.length];return i&&i.m_value===e?i:null}tryDeleteCachedEdge_(e){const i=(e&ya())%this.m_simpleEdgesCache.length,s=this.m_simpleEdgesCache[i];s&&s.m_value===e&&(this.m_simpleEdgesRecycle.push(s),this.m_simpleEdgesCache[i]=null)}tryCreateCachedEdge_(e){const i=(e&ya())%this.m_simpleEdgesCache.length;let s=this.m_simpleEdgesCache[i];return s?null:(this.m_simpleEdgesRecycle.length===0?(s=IN(),this.m_cOutstandingConstructedEdges++):s=this.m_simpleEdgesRecycle.pop(),s.m_value=e,this.m_simpleEdgesCache[i]=s,s)}initSimpleEdge_(e,i){this.m_bShapeHasSegments&&this.initSimpleEdgeHelper_(e,i)||e.m_bCurve||(this.m_shape.queryLineConnector(i,e.m_line,!0),e.m_segment=e.m_line,e.m_env.setCoordsNoNAN(e.m_line.getStartX(),e.m_line.getEndX()),e.m_env.vmax+=this.m_tolerance,e.m_line.orientBottomUp(),e.m_bHorizontal=e.m_line.getEndY()===e.m_line.getStartY(),e.m_bHorizontal||(e.m_dxdy=(e.m_line.getEndX()-e.m_line.getStartX())/(e.m_line.getEndY()-e.m_line.getStartY())))}initSimpleEdgeHelper_(e,i){if(e.m_segment=this.m_shape.getSegment(i),e.m_segmentInfo=this.m_shape.getOriginalSegmentInfo(i),e.m_bCurve=e.m_segment!==null,e.m_bCurve){const s=e.m_segment.clone();return s.orientBottomUp(),e.m_segment=s,e.m_env=e.m_segment.queryInterval(0,0),e.m_env.vmax+=this.m_tolerance,!0}return!1}compareTwoSegments_(e,i){const s=e.getStartXY(),n=e.getEndXY(),r=i.getStartXY(),o=i.getEndXY();if(this.m_ptSweep.setCoords(this.m_sweepX,this.m_sweepY),s.isEqualPoint2D(r)&&this.m_sweepY===s.y){this.m_ptSweep.assign(n.compare(o)<0?n:o);const _=e.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),x=i.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x);if(Math.abs(_-x)>this.m_tolerance)return _<x?-1:1}const l=s.compare(r)<0?r:s,c=n.compare(o)<0?n:o;let f=0,y=0;for(let _=1;_<5;_++){ar(l,c,_/5,this.m_ptSweep);const x=e.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),S=i.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),P=Math.abs(x-S);P>f&&(f=P,y=x<S?-1:1)}return y===0?this.errorCracking():y}compareNonHorizontal_(e,i){if(e.m_line.getStartY()===i.m_line.getStartY()&&e.m_line.getStartX()===i.m_line.getStartX())return e.m_line.getEndY()===i.m_line.getEndY()&&e.m_line.getEndX()===i.m_line.getEndX()?this.m_bIsSimple?this.errorCoincident():0:this.compareNonHorizontalUpperEnd_(e,i);if(e.m_line.getEndY()===i.m_line.getEndY()&&e.m_line.getEndX()===i.m_line.getEndX())return this.compareNonHorizontalLowerEnd_(e,i);const s=this.compareNonHorizontalLowerEnd_(e,i),n=this.compareNonHorizontalUpperEnd_(e,i);return s<0&&n<0?-1:s>0&&n>0?1:this.errorCracking()}compareHorizontal1Case1_(e,i){if(e.getEndX()>i.getEndX()){if(i.getEndX()>i.getStartX()&&i.getEndY()-i.getStartY()<2*this.m_tolerance&&e.isIntersectingPoint(i.getEndXY(),this.m_tolerance,!0))return this.errorCracking()}else if((i.getEndY()-i.getStartY())/(i.getEndX()-i.getStartX())*(e.getEndX()-e.getStartX())<this.m_tolerance10&&i.isIntersectingPoint(e.getEndXY(),this.m_tolerance,!0))return this.errorCracking();return 1}compareHorizontal1Case2_(e,i){if(e.getStartX()<i.getStartX()){if(i.getEndX()>i.getStartX()&&i.getEndY()-i.getStartY()<2*this.m_tolerance&&e.isIntersectingPoint(i.getEndXY(),this.m_tolerance,!0))return this.errorCracking()}else if((i.getEndY()-i.getStartY())/(i.getEndX()-i.getStartX())*(e.getStartX()-e.getEndX())<this.m_tolerance10&&i.isIntersectingPoint(e.getStartXY(),this.m_tolerance,!0))return this.errorCracking();return-1}compareHorizontal1Case3_(e,i){const s=Y.getNAN();s.setSub(i.getEndXY(),i.getStartXY()),s.rightPerpendicularThis(),s.normalize();const n=Y.getNAN();n.setSub(e.getStartXY(),i.getStartXY());const r=Y.getNAN();r.setSub(e.getEndXY(),i.getStartXY());const o=n.dotProduct(s),l=r.dotProduct(s),c=Math.abs(o),f=Math.abs(l);if(c<f){if(c<this.m_tolerance10&&i.isIntersectingPoint(e.getStartXY(),this.m_tolerance,!0))return this.errorCracking()}else if(f<this.m_tolerance10&&i.isIntersectingPoint(e.getEndXY(),this.m_tolerance,!0))return this.errorCracking();return o<0&&l<0?-1:o>0&&l>0?1:this.errorCracking()}compareHorizontal1_(e,i){return e.getStartY()===i.getStartY()&&e.getStartX()===i.getStartX()?this.compareHorizontal1Case1_(e,i):e.getEndY()===i.getEndY()&&e.getEndX()===i.getEndX()?this.compareHorizontal1Case2_(e,i):this.compareHorizontal1Case3_(e,i)}compareHorizontal2_(e,i){return e.getEndY()===i.getEndY()&&e.getEndX()===i.getEndX()&&e.getStartY()===i.getStartY()&&e.getStartX()===i.getStartX()?this.m_bIsSimple?this.errorCoincident():0:this.errorCracking()}compareNonHorizontalLowerEnd_(e,i){let s=1;if(e.m_line.getStartY()<i.m_line.getStartY()){s=-1;const f=e;e=i,i=f}const n=e.m_line,r=i.m_line,o=n.getStartX()-r.getStartX(),l=i.m_dxdy*(n.getStartY()-r.getStartY()),c=this.m_tolerance10;return o<l-c?-s:o>l+c?s:r.isIntersectingPoint(n.getStartXY(),this.m_tolerance,!0)?this.errorCracking():o<l?-s:s}compareNonHorizontalUpperEnd_(e,i){let s=1;if(i.m_line.getEndY()<e.m_line.getEndY()){s=-1;const f=e;e=i,i=f}const n=e.m_line,r=i.m_line,o=n.getEndX()-r.getStartX(),l=i.m_dxdy*(n.getEndY()-r.getStartY()),c=this.m_tolerance10;return o<l-c?-s:o>l+c?s:r.isIntersectingPoint(n.getEndXY(),this.m_tolerance,!0)?this.errorCracking():o<l?-s:s}errorCoincident(){this.m_bIntersectionDetected=!0;const e=7;return this.m_nonSimpleResult=new xs(e,this.m_vertex1,this.m_vertex2),-1}errorCracking(){return this.m_bIntersectionDetected=!0,this.m_bIsSimple?this.m_nonSimpleResult=new xs(6,this.m_vertex1,this.m_vertex2):(this.m_prev1=ae,this.m_prev2=ae,this.m_vertex1=ae,this.m_vertex2=ae),-1}compareSegments_(e,i,s,n){if(s.m_env.vmax<n.m_env.vmin)return-1;if(n.m_env.vmax<s.m_env.vmin)return 1;if(!s.m_bCurve&&!n.m_bCurve){let f=s.m_bHorizontal?1:0;return f|=n.m_bHorizontal?2:0,f===0?this.compareNonHorizontal_(s,n):f===1?this.compareHorizontal1_(s.m_line,n.m_line):f===2?-1*this.compareHorizontal1_(n.m_line,s.m_line):this.compareHorizontal2_(s.m_line,n.m_line)}if(this.m_bIntersectionDetected)return-1;const r=this.m_prevY===this.m_sweepY&&this.m_prevX===this.m_sweepX;let o,l;if(r&&e===this.m_prev1?o=this.m_prevX1:(o=Number.NaN,this.m_prev1=ae),r&&i===this.m_prev2?l=this.m_prevX2:(l=Number.NaN,this.m_prev2=ae),this.m_prevY=this.m_sweepY,this.m_prevX=this.m_sweepX,Number.isNaN(o)){this.m_prev1=e;const f=s.m_segment.intersectionOfYMonotonicWithAxisX(this.m_sweepY,this.m_sweepX);o=f,this.m_prevX1=f}if(Number.isNaN(l)){this.m_prev2=i;const f=n.m_segment.intersectionOfYMonotonicWithAxisX(this.m_sweepY,this.m_sweepX);l=f,this.m_prevX2=f}const c=p7(!0,!0,s.m_segment,n.m_segment,this.m_tolerance,!0);return c!==0?c===2?this.m_bIsSimple?this.errorCoincident():s.m_segmentInfo.equals(n.m_segmentInfo)?0:this.errorCracking():this.errorCracking():Math.abs(o-l)<=this.m_tolerance?this.compareTwoSegments_(s.m_segment,n.m_segment):o<l?-1:o>l?1:0}clearIntersectionDetectedFlag(){this.m_bIntersectionDetected=!1}intersectionDetected(){return this.m_bIntersectionDetected}getLastComparedNode(){return this.m_currentNode}getResult(){return this.m_nonSimpleResult}setSweepY(e,i){this.m_sweepY=e,this.m_sweepX=i,this.m_prev1=ae,this.m_prev2=ae,this.m_vertex1=ae,this.m_vertex2=ae}compare(e,i,s){if(this.m_bIntersectionDetected)return-1;const n=e.getElement(s),r=i;return this.m_currentNode=s,this.compareSegments(r,r,n,n)}compareSegments(e,i,s,n){let r=this.tryGetCachedEdge_(e);r===null?this.m_vertex1===i?r=this.m_tempSimpleEdge1:(this.m_vertex1=i,r=this.tryCreateCachedEdge_(e),r===null&&(r=this.m_tempSimpleEdge1,this.m_tempSimpleEdge1.m_value=e),this.initSimpleEdge_(r,i)):this.m_vertex1=i;let o=this.tryGetCachedEdge_(s);return o===null?this.m_vertex2===n?o=this.m_tempSimpleEdge2:(this.m_vertex2=n,o=this.tryCreateCachedEdge_(s),o===null&&(o=this.m_tempSimpleEdge2,this.m_tempSimpleEdge2.m_value=s),this.initSimpleEdge_(o,n)):this.m_vertex2=n,this.compareSegments_(i,n,r,o)}onDelete(e){this.tryDeleteCachedEdge_(e)}onSet(e){this.tryDeleteCachedEdge_(e)}onEndSearch(e){this.tryDeleteCachedEdge_(e)}onAddUniqueElementFailed(e){this.tryDeleteCachedEdge_(e)}}class E1e{constructor(e,i){this.m_bIntersectionDetected=!1,this.m_pointOfInterest=Y.getNAN(),this.m_line1=new si,this.m_seg1=null,this.m_env=Ze.constructEmpty(),this.m_vertex1=-1,this.m_currentNode=-1,this.m_minDist=Number.MAX_VALUE,this.m_shape=e,this.m_tolerance=i}getCurrentNode(){return this.m_currentNode}clearIntersectionDetectedFlag(){this.m_bIntersectionDetected=!1,this.m_minDist=Number.MAX_VALUE}intersectionDetected(){return this.m_bIntersectionDetected}setPoint(e){this.m_pointOfInterest.assign(e)}compare(e,i){const s=e.getElement(i);return this.compareVertex(e,i,s)}compareVertex(e,i,s){let n,r=this.m_shape.getSegment(s),o=!0;if(r==null)this.m_shape.queryLineConnector(s,this.m_line1,!0),this.m_env.setCoordsNoNAN(this.m_line1.getStartX(),this.m_line1.getEndX()),r=this.m_line1,n=this.m_line1.getStartY()===this.m_line1.getEndY();else{const c=xe.constructEmpty();r.queryLooseEnvelope(c),c.queryIntervalX(this.m_env),n=c.height()===0,o=!1}if(this.m_pointOfInterest.x+this.m_tolerance<this.m_env.vmin)return-1;if(this.m_pointOfInterest.x-this.m_tolerance>this.m_env.vmax)return 1;if(n)return this.m_currentNode=i,this.m_bIntersectionDetected=!0,0;let l=0;if(o){kge(this.m_line1);const c=this.m_line1.getStartXY(),f=new Y;f.setSub(this.m_line1.getEndXY(),c),f.rightPerpendicularThis();const y=new Y;y.setSub(this.m_pointOfInterest,c),l=f.dotProduct(y),l/=f.length()}else l=r.intersectionOfYMonotonicWithAxisX(this.m_pointOfInterest.y,this.m_pointOfInterest.x)-this.m_pointOfInterest.x;return l<10*-this.m_tolerance?-1:l>10*this.m_tolerance?1:(r.isIntersectingPoint(this.m_pointOfInterest,this.m_tolerance)&&(Math.abs(l)<this.m_minDist&&(this.m_currentNode=i,this.m_minDist=l),this.m_bIntersectionDetected=!0),l<0?-1:l>0?1:0)}}class Lb{constructor(e,i){this.m_lists=new ws(!1),this.m_hash=i,this.m_hashBuckets=new Int32Array(e),this.m_hashBuckets.fill(Lb.st_nullNode()),this.m_bitFilter=new Int32Array(10*e+31>>5)}reserveElements(e){this.m_lists.reserveLists(Math.min(this.m_hashBuckets.length,e)),this.m_lists.reserveNodes(e)}addElement(e,i){i===void 0&&(i=this.m_hash.getHash(e));const s=i%(this.m_bitFilter.length<<5);this.m_bitFilter[s>>5]|=1<<(31&s);const n=i%this.m_hashBuckets.length;let r=this.m_hashBuckets[n];return r===ws.st_nullNode()&&(r=this.m_lists.createList(),this.m_hashBuckets[n]=r),this.m_lists.addElement(r,e)}deleteElement(e,i){i===void 0&&(i=this.m_hash.getHash(e));const s=i%this.m_hashBuckets.length,n=this.m_hashBuckets[s];n===ws.st_nullNode()&&Je("");let r=this.m_lists.getFirst(n),o=ws.st_nullNode();for(;r!==ws.st_nullNode();){const l=this.m_lists.getData(r),c=this.m_lists.getNext(r);l===e?(this.m_lists.deleteElementDirect(n,o,r),this.m_lists.getFirst(n)===ws.st_nullNode()&&(this.m_lists.deleteList(n),this.m_hashBuckets[s]=ws.st_nullNode())):o=r,r=c}}getFirstInBucket(e){const i=e%(this.m_bitFilter.length<<5);if(!(this.m_bitFilter[i>>5]&1<<(31&i)))return ws.st_nullNode();const s=e%this.m_hashBuckets.length,n=this.m_hashBuckets[s];return n===ws.st_nullNode()?ws.st_nullNode():this.m_lists.getFirst(n)}getNextInBucket(e){return this.m_lists.getNext(e)}findNode(e){const i=this.m_hash.getHash(e);let s=this.getFirstInBucket(i);for(;s!==ws.st_nullNode();){const n=this.m_lists.getData(s);if(this.m_hash.equal(n,e))return s;s=this.m_lists.getNext(s)}return ws.st_nullNode()}getNextNode(e){return K(0),0}deleteNode(e){const i=this.getElement(e),s=this.m_hash.getHash(i)%this.m_hashBuckets.length,n=this.m_hashBuckets[s];n===ws.st_nullNode()&&Je(""),this.m_lists.deleteElementSearch(n,e),this.m_lists.getFirst(n)===ws.st_nullNode()&&(this.m_lists.deleteList(n),this.m_hashBuckets[s]=ws.st_nullNode())}getElement(e){return this.m_lists.getData(e)}static st_nullNode(){return ws.st_nullNode()}clear(){K(0)}size(){return this.m_lists.getNodeCount()}dbgPrintBucketHistogram(){K(0)}}function C1e(t,e,i,s,n){const r=new stt(n);return r.m_shape=t,r.m_sqrTolerance=e*e,r.m_cellSize=2*e,r.m_invCellSize=1/r.m_cellSize,r.m_geometry=i,r.m_bTrackChanges=s,r.m_bHasSegmentParentage=t.hasSegmentParentage(),r.clusterNonReciprocal()}function Ij(t,e,i,s,n){const r=t-i,o=e-s;return r*r+o*o<=n}function ttt(){return{pt:new Y,weight:0,rank:0,bMerged:!1}}function P1e(t,e,i,s,n,r){const o=ttt(),l=i+n;let c=!1,f=t.x;t.x!==e.x&&(s===r&&(f=(t.x*i+e.x*n)/l),c=!0);let y=t.y;return t.y!==e.y&&(s===r&&(y=(t.y*i+e.y*n)/l),c=!0),s!==r?s>r?(o.rank=s,o.weight=i,o.pt=t):(o.rank=r,o.weight=n,o.pt=e):(o.pt.setCoords(f,y),o.weight=l,o.rank=s),o.bMerged=c,o}function itt(t,e,i,s,n,r,o,l,c){const f=t.equals(e);if(s>r)return o.assignCopy(t),c[0]=s,l[0]=i,f;if(r>s)return o=e,c[0]=r,l[0]=n,f;o.assignCopy(t);const y=P1e(t.getXY(),e.getXY(),i,s,n,r);return o.setXY(y.pt),l[0]=y.weight,c[0]=y.rank,f}function T1e(t,e){const i=xge(t);return RKe(i,e)}class mie{constructor(e,i,s,n,r){this.m_workPt=new Y,this.m_shape=e,this.m_sqrTolerance=s,this.m_invCellSize=n,this.m_origin=i.clone(),this.m_hashValues=r}getHash(e){return this.m_shape.getUserIndex(e,this.m_hashValues)}calculateHash(e){return K(0),0}calculateHashFromVertex(e){this.m_shape.queryXY(e,this.m_workPt);const i=this.m_workPt.x-this.m_origin.x,s=Math.trunc(i*this.m_invCellSize+.5),n=this.m_workPt.y-this.m_origin.y;return T1e(s,Math.trunc(n*this.m_invCellSize+.5))}dbgCalculateHashFromXy(e,i){return K(0),0}equal(e,i){return K(0),!1}}class stt{constructor(e){this.m_origin=Y.getNAN(),this.m_sqrTolerance=0,this.m_cellSize=0,this.m_invCellSize=0,this.m_geometry=ae,this.m_bucketArray=new Array(4),this.m_bucketHash=new Array(4),this.m_dbgCandidateCheckCount=0,this.m_nsr=new xs,this.m_hashValues=-1,this.m_newClusters=-1,this.m_bTrackChanges=!1,this.m_bHasSegmentParentage=!1,this.m_shape=null,this.m_clusters=new ws,this.m_hashFunction=null,this.m_hashTable=null,this.m_progressCounter=0,this.m_progressTracker=e}progress_(){}getNearestNeighbourCandidate(e,i,s,n,r){K(0)}findClusterCandidate(e,i){K(0)}collectClusterCandidates(e,i){const s=Y.getNAN();this.m_shape.queryXY(e,s);const n=(s.x-this.m_origin.x)*this.m_invCellSize,r=(s.y-this.m_origin.y)*this.m_invCellSize,o=Math.trunc(n),l=Math.trunc(r);let c=0;for(let f=0;f<=1;f+=1)for(let y=0;y<=1;y+=1){const _=T1e(o+f,l+y),x=this.m_hashTable.getFirstInBucket(_);x!==Lb.st_nullNode()&&(this.m_bucketArray[c]=x,this.m_bucketHash[c]=_,c++)}for(let f=c-1;f>=1;f--){const y=this.m_bucketArray[f];for(let _=f-1;_>=0;_--)if(y===this.m_bucketArray[_]){this.m_bucketHash[_]=-1,c--,f!==c&&(this.m_bucketHash[f]=this.m_bucketHash[c],this.m_bucketArray[f]=this.m_bucketArray[c]);break}}for(let f=0;f<c;f++)this.collectNearestNeighbourCandidates(e,this.m_bucketHash[f],s,this.m_bucketArray[f],i)}collectNearestNeighbourCandidates(e,i,s,n,r){const o=Y.getNAN();for(let l=n;l!==Lb.st_nullNode();l=this.m_hashTable.getNextInBucket(l)){const c=this.m_hashTable.getElement(l);e===c||i!==-1&&this.m_shape.getUserIndex(c,this.m_hashValues)!==i||(this.m_shape.queryXY(c,o),Ij(s.x,s.y,o.x,o.y,this.m_sqrTolerance)&&r.push(l))}}mergeClusters(e,i,s){let n=this.m_shape.getUserIndex(e,this.m_newClusters);const r=this.m_shape.getUserIndex(i,this.m_newClusters);n===-1&&(n=this.m_clusters.createList(),this.m_clusters.addElement(n,e),this.m_shape.setUserIndex(e,this.m_newClusters,n)),r===-1?this.m_clusters.addElement(n,i):this.m_clusters.concatenateLists(n,r),this.m_shape.setUserIndex(i,this.m_newClusters,Ut.impossibleIndex2());const o=this.mergeVertices(e,i);if(s){const l=this.m_hashFunction.calculateHashFromVertex(e);this.m_shape.setUserIndex(e,this.m_hashValues,l)}return o}mergeVertices(e,i){const s=Y.getNAN();this.m_shape.queryXY(e,s);const n=Y.getNAN();this.m_shape.queryXY(i,n);const r=this.m_shape.getRank(e),o=this.m_shape.getRank(i),l=this.m_shape.getWeight(e),c=this.m_shape.getWeight(i);let f,y,_,x,S=!1;if(r===o?(f=r,y=l+c,_=s.x,s.x!==n.x&&(_=(s.x*l+n.x*c)/y,S=!0),x=s.y,s.y!==n.y&&(x=(s.y*l+n.y*c)/y,S=!0)):(r>o?(_=s.x,x=s.y,y=l,f=r):(_=n.x,x=n.y,y=c,f=o),S=!s.equals(n)),S&&(this.m_shape.setXYMonotonic(e,_,x),this.m_bTrackChanges&&this.m_shape.setGeometryModifiedWithVertex(e,!0),this.m_bHasSegmentParentage)){const P=this.m_shape.getSegmentParentageBreakVertex(e)||this.m_shape.getSegmentParentageBreakVertex(i);this.m_shape.setSegmentParentageBreakVertex(e,P),this.m_shape.setSegmentParentageBreakVertex(i,P)}return this.m_shape.setWeight(e,y),this.m_shape.setRank(e,f),S}clusterReciprocal(){return K(0),!1}needsClustering(){const e={stack:[],error:void 0,hasError:!1};try{Wl(e,XA(()=>{this.m_hashTable=null,this.m_hashFunction=null,this.m_shape.removeUserIndex(this.m_hashValues),this.m_shape.removeUserIndex(this.m_newClusters)}),!1);const i=this.m_shape.getSelectedCount(),s=this.m_shape.getEnvelope2D(this.m_progressTracker);this.m_origin.assign(s.getLowerLeft());const n=Math.max(s.height(),s.width())/(vo()-1);this.m_cellSize<n&&(this.m_cellSize=n,this.m_invCellSize=1/this.m_cellSize),this.m_clusters.clear(),this.m_clusters.reserveLists(this.m_shape.getSelectedCount()/3+1),this.m_clusters.reserveNodes(this.m_shape.getSelectedCount()/3+1),this.m_hashValues=this.m_shape.createUserIndex(),this.m_newClusters=this.m_shape.createUserIndex(),this.m_hashFunction=new mie(this.m_shape,this.m_origin,this.m_sqrTolerance,this.m_invCellSize,this.m_hashValues),this.m_hashTable=new Lb(4*i/3,this.m_hashFunction),this.m_hashTable.reserveElements(this.m_shape.getSelectedCount());let r=!1;for(let o=0;o<2;o++){const l=[],c=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let f=c.next();f!==ae;f=c.next()){if(this.progress_(),o>0&&this.m_shape.getUserIndex(f,this.m_newClusters)===Ut.impossibleIndex2())continue;let y;if(o===0?(y=this.m_hashFunction.calculateHashFromVertex(f),this.m_shape.setUserIndex(f,this.m_hashValues,y)):y=this.m_shape.getUserIndex(f,this.m_hashValues),this.collectClusterCandidates(f,l),l.length!==0){for(let _=0,x=l.length;_<x;_++){this.progress_();const S=l[_],P=this.m_hashTable.getElement(S);if(this.m_hashTable.deleteNode(S),!this.m_shape.isEqualXY(f,P))return this.m_nsr=new xs(5,this.m_shape.getVertexIndex(f),this.m_shape.getVertexIndex(P)),r=!0,r;this.mergeClusters(f,P,!1)}l.length=0}o===0&&this.m_hashTable.addElement(f,y)}}return r}catch(i){e.error=i,e.hasError=!0}finally{om(e)}}clusterNonReciprocal(){const e=this.m_shape.getSelectedCount(),i=this.m_shape.getEnvelope2D(this.m_progressTracker);this.m_origin=i.getLowerLeft();const s=Math.max(i.height(),i.width())/(vo()-1);this.m_cellSize<s&&(this.m_cellSize=s,this.m_invCellSize=1/this.m_cellSize),this.m_clusters.clear(),this.m_clusters.reserveLists(Math.trunc(this.m_shape.getSelectedCount()/3+1)),this.m_clusters.reserveNodes(Math.trunc(this.m_shape.getSelectedCount()/3+1)),this.m_hashValues=this.m_shape.createUserIndex(),this.m_newClusters=this.m_shape.createUserIndex(),this.m_hashFunction=new mie(this.m_shape,this.m_origin,this.m_sqrTolerance,this.m_invCellSize,this.m_hashValues),this.m_hashTable=new Lb(Math.trunc(4*e/3),this.m_hashFunction),this.m_hashTable.reserveElements(this.m_shape.getSelectedCount());let n=!1;{const r=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let o=r.next();o!==ae;o=r.next()){this.progress_();const l=this.m_hashFunction.calculateHashFromVertex(o);this.m_shape.setUserIndex(o,this.m_hashValues,l),this.m_hashTable.addElement(o,l)}}{const r=[],o=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let l=o.next();l!==ae;l=o.next()){if(this.m_shape.getUserIndex(l,this.m_newClusters)===Ut.impossibleIndex2())continue;let c=this.m_shape.getUserIndex(l,this.m_hashValues);this.m_hashTable.deleteElement(l,c);let f=!1;for(;this.collectClusterCandidates(l,r),r.length!==0;){let y=0;for(let _=0,x=r.length;_<x;_++){this.progress_();const S=r[_],P=this.m_hashTable.getElement(S);this.m_hashTable.deleteNode(S);const A=_+1===x;y|=this.mergeClusters(l,P,A)?1:0}if(f||(f=y!==0),n||(n=y!==0),r.length=0,!y)break}f&&(c=this.m_shape.getUserIndex(l,this.m_hashValues)),this.m_hashTable.addElement(l,c)}r.length=0}return n&&this.applyClusterPositions_(),this.m_hashTable=null,this.m_hashFunction=null,this.m_shape.removeUserIndex(this.m_hashValues),this.m_shape.removeUserIndex(this.m_newClusters),n}applyClusterPositions_(){const e=Y.getNAN();for(let i=this.m_clusters.getFirstList();i!==ws.st_nullNode();i=this.m_clusters.getNextList(i)){let s=this.m_clusters.getFirst(i);const n=this.m_clusters.getElement(s);this.m_shape.queryXY(n,e);const r=this.m_shape.getRank(n),o=this.m_shape.getWeight(n);for(s=this.m_clusters.getNext(s);s!==ws.st_nullNode();s=this.m_clusters.getNext(s)){const l=this.m_clusters.getElement(s);if(this.m_bTrackChanges?this.m_shape.isEqualXYPoint2D(l,e)||(this.m_shape.setXYMonotonicPoint2D(l,e),this.m_shape.setGeometryModifiedWithVertex(l,!0)):this.m_shape.setXYMonotonicPoint2D(l,e),this.m_bHasSegmentParentage){const c=this.m_shape.getSegmentParentageBreakVertex(n)||this.m_shape.getSegmentParentageBreakVertex(l);this.m_shape.setSegmentParentageBreakVertex(n,c),this.m_shape.setSegmentParentageBreakVertex(l,c)}this.m_shape.setWeight(l,o),this.m_shape.setRank(l,r)}}}}class dl{constructor(){this.m_inputParts=[],this.m_resultParts1=[],this.m_resultParts2=[],this.m_resultSegments=[],this.m_freeSegments=[],this.m_inputSegments=[],this.m_param1=[],this.m_param2=[],this.m_tolerance=0,this.m_toleranceZ=0,this.m_point=new Ht,this.m_pointWeight=1,this.m_maxDensifyLimit=0,this.m_pointRank=0,this.m_changed1=!1,this.m_changed2=!1,this.m_adaptiveDensify=!1}clear(){this.freeAllResultSegments(),this.m_inputSegments.length=0,this.m_inputParts.length=0,this.m_resultParts1.length=0,this.m_resultParts2.length=0,this.m_param1.length=0,this.m_param2.length=0,this.m_adaptiveDensify=!1,this.m_changed1=!1,this.m_changed2=!1}newIntersectionPart_(e,i,s,n,r,o,l,c,f,y){return rtt(e,i,s,n,r,o,l,c,f,y)}pushSegment(e,i,s,n,r,o,l,c,f,y){return this.m_inputParts.push(this.newIntersectionPart_(this.m_inputSegments.length,i,s,n,r,o,l,c,f,y)),this.m_inputSegments.push(e),this.m_inputParts.length-1}getResultSegmentCount(e){return this.m_adaptiveDensify?e===0?this.m_param1.length-1:this.m_param2.length-1:e===0?this.m_resultParts1.length:this.m_resultParts2.length}getResultPart_(e,i){return e===0?this.m_resultParts1[i]:this.m_resultParts2[i]}getResultSegment(e,i){return this.m_resultSegments[this.getResultPart_(e,i).segmentIndex].get()}getSegmentChanged(e){return e===0?this.m_changed1:this.m_changed2}getResultSegmentStartPointWeight(e,i){return this.getResultPart_(e,i).weightStart}getResultSegmentStartPointRank(e,i){return this.getResultPart_(e,i).rankStart}getResultSegmentSegmentParentage(e,i){return this.getResultPart_(e,i).segmentParentage}getResultSegmentStartPointIsBreak(e,i){return this.getResultPart_(e,i).u.bBreakStart}getResultSegmentEndPointWeight(e,i){return this.getResultPart_(e,i).weightEnd}getResultSegmentEndPointRank(e,i){return this.getResultPart_(e,i).rankEnd}getResultSegmentEndPointIsBreak(e,i){return this.getResultPart_(e,i).u.bBreakEnd}getResultSegmentInteriorRank(e,i){return this.getResultPart_(e,i).rankInterior}getResultSegmentInteriorWeight(e,i){return this.getResultPart_(e,i).weightInterior}getResultPoint(){return this.m_point}getResultPointWeight(){return this.m_pointWeight}getResultPointRank(){return this.m_pointRank}getResultPointChanged(){return this.m_changed2}intersectLines(e,i){this.m_inputSegments.length!==2&&bt(""),this.m_changed1=!1,this.m_changed2=!1,this.m_tolerance=e;const s=Ui(e*dl.c_smallToleranceFactor);let n=!1;const r=this.m_inputParts[0],o=this.m_inputParts[1],l=this.m_inputSegments[r.segmentIndex],c=this.m_inputSegments[o.segmentIndex];if(i||5&u5(!0,l,c,e,!0)){const f=qv(!0,l,c,null,this.m_param1,this.m_param2,e);f===0&&bt("");const y=new Array(f);for(let W=0;W<f;++W)y[W]=Y.getNAN();const _=new Float64Array(f),x=new Int32Array(f),S=new Array(f),P=new Array(f);for(let W=0;W<f;++W)S[W]=z6(),P[W]=z6();for(let W=0;W<f;W++){const J=this.m_param1[W],re=this.m_param2[W];let se,oe=r.rankInterior,pe=r.weightInterior;J===0?(oe=r.rankStart,pe=r.weightStart,se=r.u.bBreakStart):J===1?(oe=r.rankEnd,pe=r.weightEnd,se=r.u.bBreakEnd):(this.m_changed1=!0,se=!1);let ue,ce=o.rankInterior,ne=o.weightInterior;re===0?(ce=o.rankStart,ne=o.weightStart,ue=o.u.bBreakStart):re===1?(ce=o.rankEnd,ne=o.weightEnd,ue=o.u.bBreakEnd):(this.m_changed2=!0,ue=!1);const de=oe,Se=ce;let Pe=1,Re=0,Oe=Y.getNAN();if(de===Se){const we=l.getCoord2D(J),Fe=c.getCoord2D(re);Pe=pe+ne,Re=oe,ar(we,Fe,ne/Pe,Oe);const it=Y.sqrDistance(Oe,we),vt=Y.sqrDistance(Oe,Fe);S[W].bBigMove=it>s,P[W].bBigMove=vt>s,this.m_changed1||we.equals(Oe)||(this.m_changed1=!0),this.m_changed2||Fe.equals(Oe)||(this.m_changed2=!0)}else if(de>Se){Oe=l.getCoord2D(J);const we=c.getCoord2D(re);Pe=pe,Re=oe;const Fe=Y.sqrDistance(Oe,we);S[W].bBigMove=!1,P[W].bBigMove=Fe>s,this.m_changed2||we.equals(Oe)||(this.m_changed2=!0)}else{Oe=c.getCoord2D(re),Pe=ne,Re=ce;const we=l.getCoord2D(J),Fe=Y.sqrDistance(Oe,we);S[W].bBigMove=Fe>s,P[W].bBigMove=!1,this.m_changed1||we.equals(Oe)||(this.m_changed1=!0)}y[W].assign(Oe),_[W]=Pe,x[W]=Re,S[W].bIsBreak=se||ue,P[W].bIsBreak=se||ue,n||(n=S[W].bBigMove||P[W].bBigMove)}const A=r.rankInterior,k=r.weightInterior;let $=0,F=-1;for(let W=0;W<=f;W++){const J=W<f?this.m_param1[W]:1;if(J!==$){const re=this.allocResultSegment(),se=this.m_resultSegments[re];let oe,pe,ue,ce;l.queryCut($,J,se,!1),se.get().snapControlPoints(e*e);let ne=!1,de=!1,Se=!1,Pe=!1,Re=!1,Oe=Y.getNAN(),we=Y.getNAN();F!==-1?(pe=x[F],oe=_[F],ne=S[F].bBigMove,Oe.assign(y[F]),Se=S[F].bIsBreak,Re=!0):(oe=r.weightStart,pe=r.rankStart,Oe=se.get().getStartXY(),Se=r.u.bBreakStart),W<f?(ce=x[W],ue=_[W],de=S[W].bBigMove,we.assign(y[W]),Pe=S[W].bIsBreak,Re=!0):(ue=r.weightEnd,ce=r.rankEnd,we=se.get().getEndXY(),Pe=r.u.bBreakEnd),Re&&se.get().setCoordsForIntersector(Oe,we,!0),this.m_resultParts1.push(this.newIntersectionPart_(re,oe,pe,ue,ce,k,A,Se,Pe,r.segmentParentage));const Fe=this.m_resultParts1.at(-1);Fe.u.bBigMoveStart=ne,Fe.u.bBigMoveEnd=de,$=J,F=W}else F===-1&&(F=W)}const G=new Array(f);for(let W=0;W<f;W++)G[W]=W;f>2?(G.sort((W,J)=>this.m_param2[W]<this.m_param2[J]?-1:this.m_param2[W]>this.m_param2[J]?1:0),Ix(this.m_param2)):f===2&&this.m_param2[0]>this.m_param2[1]&&(this.m_param2[1]=St(this.m_param2[0],this.m_param2[0]=this.m_param2[1]),G[1]=St(G[0],G[0]=G[1]));const V=o.rankInterior,B=o.weightInterior;$=0,F=-1;for(let W=0;W<=f;W++){const J=W<f?this.m_param2[W]:1;if(J!==$){const re=this.allocResultSegment(),se=this.m_resultSegments[re];let oe,pe,ue,ce;c.queryCut($,J,se,!1),se.get().snapControlPoints(e*e);let ne=Y.getNAN(),de=Y.getNAN(),Se=!1,Pe=!1,Re=!1,Oe=!1,we=!1;if(F!==-1){const it=G[F];oe=_[it],pe=x[it],ne.assign(y[it]),Re=P[it].bBigMove,Se=P[it].bIsBreak,we=!0}else oe=o.weightStart,pe=o.rankStart,ne=se.get().getStartXY(),Se=o.u.bBreakStart;if(W!==f){const it=G[W];ue=_[it],ce=x[it],de.assign(y[it]),Oe=P[it].bBigMove,Pe=P[it].bIsBreak,we=!0}else ue=o.weightEnd,ce=o.rankEnd,de=se.get().getEndXY(),Pe=o.u.bBreakEnd;we&&se.get().setCoordsForIntersector(ne,de,!0),this.m_resultParts2.push(this.newIntersectionPart_(re,oe,pe,ue,ce,B,V,Se,Pe,o.segmentParentage));const Fe=this.m_resultParts2.at(-1);Fe.u.bBigMoveStart=Re,Fe.u.bBigMoveEnd=Oe,$=J,F=W}else F===-1&&(F=W)}return n?3:2}return 0}intersectLines3D(e,i,s,n){return K(0),1}intersect2D(e,i){const s=this.m_inputParts[0],n=this.m_inputParts[1],r=this.m_inputSegments[s.segmentIndex].getGeometryType(),o=this.m_inputSegments[n.segmentIndex].getGeometryType();return r!==me.enumLine||o!==me.enumLine?new ott(this).intersectCurves(e,i):this.intersectLines(e,i)}intersect2DEx(e,i,s,n,r){this.m_point.assignCopy(i),this.m_inputSegments.length!==1&&bt(""),this.m_tolerance=e,this.m_changed1=!1,this.m_changed2=!1;const o=Ui(e*dl.c_smallToleranceFactor);let l=!1;const c=this.m_inputParts[0],f=this.m_inputSegments[c.segmentIndex];if(r||f.isIntersectingPoint(i.getXY(),e,!0)){this.m_param1=Vi(16,Number.NaN);const y=f.getClosestCoordinate(i.getXY(),!1);this.m_param1[0]=y;let _=c.rankInterior,x=c.weightInterior;y===0?(_=c.rankStart,x=c.weightStart):y===1?(_=c.rankEnd,x=c.weightEnd):this.m_changed1=!0;let S=_;const P=s,A=n;S===P&&f.isCurve()&&(S=P+1);let k=1,$=0;const F=new Y;if(S===P){const W=f.getCoord2D(y),J=i.getXY();k=x+A,$=_,ar(W,J,A/k,F),this.m_changed1||W.equals(F)||(this.m_changed1=!0),this.m_changed2||J.equals(F)||(this.m_changed2=!0),l=Y.sqrDistance(F,W)>o}else S>P?(F.assign(f.getCoord2D(y)),k=x,$=_,this.m_changed2||F.equals(i.getXY())||(this.m_changed2=!0)):(F.assign(f.getCoord2D(y)),k=A,$=P,this.m_changed1||F.equals(i.getXY())||(this.m_changed1=!0),l=Y.sqrDistance(F,i.getXY())>o);let G=0,V=-1;const B=1;for(let W=0;W<=B;W++){const J=W<B?this.m_param1[0]:1;if(J!==G){const re=this.allocResultSegment(),se=this.m_resultSegments[re];f.queryCut(G,J,se),se.get().snapControlPoints(e*e);let oe=c.weightStart,pe=c.weightEnd,ue=c.rankStart,ce=c.rankEnd;const ne=c.rankInterior,de=c.weightInterior;let Se=c.u.bBreakStart,Pe=c.u.bBreakEnd;V!==-1&&(oe=k,ue=$,Se=!0,se.get().setCoordsForIntersector(F,se.get().getEndXY(),!0)),W!==B&&(pe=k,ce=$,Pe=!0,se.get().setCoordsForIntersector(se.get().getStartXY(),F,!0)),G=J,this.m_resultParts1.push(this.newIntersectionPart_(re,oe,ue,pe,ce,de,ne,Se,Pe,c.segmentParentage))}V=W}return this.m_point.setXY(F),this.m_pointWeight=k,this.m_pointRank=$,l?3:2}return 0}intersect_3D(e,i,s,n){return K(0),1}intersect3DEx(e,i,s,n,r,o,l){return K(0),1}getTolerance(){return this.m_tolerance}getToleranceZ(){return K(0),0}freeAllResultSegments(){this.m_resultSegments.length=0,this.m_freeSegments.length=0}freeResultSegment(e){this.m_freeSegments.push(e)}allocResultSegment(){if(this.m_freeSegments.length)return this.m_freeSegments.pop();const e=new Qt,i=this.m_resultSegments.length;return this.m_resultSegments.push(e),i}allocResultSegmentFromBuffer(e){if(this.m_freeSegments.length)return this.m_freeSegments.pop();const i=new Qt({copy:e}),s=this.m_resultSegments.length;return this.m_resultSegments.push(i),s}allocResultSegmentFromSegment(e){if(this.m_freeSegments.length)return this.m_freeSegments.pop();const i=new Qt({segment:e}),s=this.m_resultSegments.length;return this.m_resultSegments.push(i),s}}function ntt(t,e){return{bBigMoveStart:!1,bBigMoveEnd:!1,bBreakStart:t,bBreakEnd:e}}function rtt(t,e,i,s,n,r,o,l,c,f){return{segmentIndex:t,weightStart:e,rankStart:i,weightEnd:s,rankEnd:n,weightInterior:r,rankInterior:o,segmentParentage:f,u:ntt(l,c)}}function z6(){return{bBigMove:!1,bIsBreak:!1}}dl.maxWeight=.1*Number.MAX_VALUE,dl.c_smallToleranceFactor=.01,dl.c_maxGeometryTypeToRankDelta=8;let gie=class{constructor(){this.start=null,this.end=null,this.equalEdge=null,this.segmentIndex=-1,this.segmentParentage=-1,this.weight=0,this.rank=0}hasSegment(){return this.segmentIndex>=0}transferAttributes(t,e,i){if(e.getDescription().getAttributeCount()===1)return;const s=t.parent.m_resultSegments[this.segmentIndex].get().getStartXY(),n=t.parent.m_resultSegments[this.segmentIndex].get().getEndXY(),r=new Ht;e.queryStart(r),i?(r.setXY(s),t.parent.m_resultSegments[this.segmentIndex].get().setStart(r)):(r.setXY(n),t.parent.m_resultSegments[this.segmentIndex].get().setEnd(r)),e.queryEnd(r),i?(r.setXY(n),t.parent.m_resultSegments[this.segmentIndex].get().setEnd(r)):(r.setXY(s),t.parent.m_resultSegments[this.segmentIndex].get().setStart(r))}copyFromWhenOverlap(t,e,i){this.equalEdge=e,e.equalEdge=this,this.segmentIndex=t.parent.allocResultSegmentFromBuffer(t.parent.m_resultSegments[e.segmentIndex]),this.segmentParentage=e.segmentParentage,this.weight=e.weight,this.rank=e.rank,i?(this.start.copyFrom(e.start),this.end.copyFrom(e.end)):(this.start.copyFrom(e.end),this.end.copyFrom(e.start),t.parent.m_resultSegments[this.segmentIndex].get().reverse())}getEnd(){return K(0),{}}getNextInChain(){return this.end.nextInChain}getPrevInChain(){return this.start.prevInChain}};class yie{constructor(){this.hash=0,this.pt=new Y,this.prevInChain=null,this.nextInChain=null,this.prevInHash=null,this.nextInHash=null,this.prevEqual=null,this.nextEqual=null,this.weight=0,this.rank=0,this.bBigMove=!1,this.bIsBreak=!1}copyFrom(e){this.pt.assign(e.pt),this.weight=e.weight,this.rank=e.rank,this.bBigMove=e.bBigMove,this.bIsBreak=e.bIsBreak}nextNode(){return K(0),{}}prevNode(){return K(0),{}}equalListHead(){let e=this;for(;e.prevEqual!==null;e=e.prevEqual);return e}}function r0(t,e,i,s){return{edge1:t,edge2:e,recursion:i,bIsIntersecting:s}}class ott{constructor(e){this.m_pairs=[],this.m_chainOrigin1=null,this.m_chainOrigin2=null,this.m_newNodes=[],this.m_hashTableOfEquals=[],this.m_hashTableOfEqualsSize=0,this.m_origin=new Y,this.m_cell=new Y,this.parent=e}addSegment(e,i,s,n,r,o,l,c,f,y,_){const x=this.newNode(this.parent.m_resultSegments[e].get().getStartXY(),s,n,f),S=this.newNode(this.parent.m_resultSegments[e].get().getEndXY(),r,o,y);this.newEdge(x,S,e,l,c,_),this.m_chainOrigin1===null?this.m_chainOrigin1=x:this.m_chainOrigin2===null?this.m_chainOrigin2=x:K(0)}intersectCurvesHelper(e,i,s,n,r){var Oe,we,Fe,it,vt,ot,ct,Ct,qt,Lt,Dt,Yi,cs,fn,Us,hr,oo,ss;const o=this.getSegment(e).get(),l=this.getSegment(i).get();if(o.isDegenerate(0)||l.isDegenerate(0))return 0;const c=this.tryOverlapIntersectCurves(e,i,s,n);if(c!==0)return c;const f=Ui(.01*s);let y=!1,_=this.processSharpCorners(o,l,s,r>4);const x=_>0;if(!x){if(!(n||5&p7(!0,!1,o,l,s,!0)))return 0;_=qv(!0,o,l,null,this.parent.m_param1,this.parent.m_param2,s)}_===0&&bt("");const S=o.getGeometryType(),P=l.getGeometryType(),A=Ge(Y,_),k=Ge(Y,_),$=new Array(_),F=new Array(_),G=new Array(_),V=new Array(_),B=Qee(z6,_),W=Qee(z6,_);let J=!1,re=!1;for(let ye=0;ye<_;ye++){const Fi=this.parent.m_param1[ye],xr=this.parent.m_param2[ye];let ri=e.rank,Ai=e.weight,pn=!0,ms=!1;Fi===0?(ri=e.start.rank,Ai=e.start.weight,ms=e.start.bIsBreak):Fi===1?(ri=e.end.rank,Ai=e.end.weight,ms=e.end.bIsBreak):(J=!0,pn=!1);let Zi=i.rank,tn=i.weight,mn=!1,jr=!0;xr===0?(Zi=i.start.rank,tn=i.start.weight,mn=i.start.bIsBreak):xr===1?(Zi=i.end.rank,tn=i.end.weight,mn=i.end.bIsBreak):(re=!0,jr=!1);let Cs=ri,xt=Zi;if(Cs===xt&&(Cs*=dl.c_maxGeometryTypeToRankDelta,xt*=dl.c_maxGeometryTypeToRankDelta,Cs+=O_(S,o,!1),xt+=O_(P,l,!1)),pn&&jr&&xt===Cs){const d=o.getCoord2D(Fi),g=l.getCoord2D(xr);d.equals(g)&&(xt=Cs-1)}let Ys=1,m=0,j=1,T=0;const p=new Y,h=new Y,a=o.getCoord2D(Fi),u=l.getCoord2D(xr);if(x&&Y.distance(a,u)>s)p.setCoordsPoint2D(a),h.setCoordsPoint2D(u),Ys=Ai,j=tn,m=ri,T=Zi,B[ye].bBigMove=!1,W[ye].bBigMove=!1,ms=!0,mn=!0;else if(Cs===xt){j=Ys=Ai+tn,T=m=ri,ar(a,u,tn/Ys,p),h.setCoordsPoint2D(p);const d=Y.sqrDistance(p,a),g=Y.sqrDistance(p,u);B[ye].bBigMove=d>f,W[ye].bBigMove=g>f,J||a.equals(p)||(J=!0),re||u.equals(h)||(re=!0)}else if(Cs>xt){p.setCoordsPoint2D(a),h.setCoordsPoint2D(p),j=Ys=Ai,T=m=ri;const d=Y.sqrDistance(p,u);B[ye].bBigMove=!1,W[ye].bBigMove=d>f,re||u.equals(h)||(re=!0)}else{h.setCoordsPoint2D(u),p.setCoordsPoint2D(h),j=Ys=tn,T=m=Zi;const d=Y.sqrDistance(p,a);B[ye].bBigMove=d>f,W[ye].bBigMove=!1,J||a.equals(p)||(J=!0)}A[ye].assign(p),k[ye].assign(h),$[ye]=Ys,F[ye]=j,G[ye]=m,V[ye]=T,B[ye].bIsBreak=ms||mn,W[ye].bIsBreak=ms||mn,y||(y=B[ye].bBigMove||W[ye].bBigMove),ye>0&&(Fi!==this.parent.m_param1[ye-1]&&xr!==this.parent.m_param2[ye-1]||(G[ye]<=G[ye-1]?(A[ye].assign(k[ye-1]),$[ye]=F[ye-1],G[ye]=V[ye-1],k[ye].assign(k[ye-1]),F[ye]=F[ye-1],V[ye]=V[ye-1],(Oe=B[ye]).bBigMove||(Oe.bBigMove=B[ye-1].bBigMove),(we=W[ye]).bBigMove||(we.bBigMove=W[ye-1].bBigMove),(Fe=B[ye]).bIsBreak||(Fe.bIsBreak=B[ye-1].bIsBreak),(it=W[ye]).bIsBreak||(it.bIsBreak=W[ye-1].bIsBreak)):(A[ye-1].assign(A[ye]),$[ye-1]=$[ye],G[ye-1]=G[ye],k[ye-1].assign(k[ye]),F[ye-1]=F[ye],V[ye-1]=V[ye],(vt=B[ye-1]).bBigMove||(vt.bBigMove=B[ye].bBigMove),(ot=W[ye-1]).bBigMove||(ot.bBigMove=W[ye].bBigMove),(ct=B[ye-1]).bIsBreak||(ct.bIsBreak=B[ye].bIsBreak),(Ct=W[ye-1]).bIsBreak||(Ct.bIsBreak=W[ye].bIsBreak))))}if(!J&&!re&&_===2){if(S!==me.enumLine||P!==me.enumLine){if(this.processDoublyConnectedEdges(e,i,r+1,s))return this.parent.m_changed1=!0,this.parent.m_changed2=!0,2;K(0)}K(0)}(qt=this.parent).m_changed1||(qt.m_changed1=J),(Lt=this.parent).m_changed2||(Lt.m_changed2=re);let se=e,oe=e.end.weight,pe=e.end.rank,ue=e.end.bBigMove,ce=e.end.bIsBreak,ne=0,de=-1;for(let ye=0;ye<=_;ye++){const Fi=ye<_?this.parent.m_param1[ye]:1;if(Fi!==ne){const xr=this.parent.allocResultSegment(),ri=this.parent.m_resultSegments[xr];let Ai,pn,ms,Zi;o.queryCut(ne,Fi,ri,!1),ri.get().snapControlPoints(s*s);let tn=!1,mn=!1,jr=!1,Cs=!1;const xt=new Y,Ys=new Y;de!==-1?(pn=G[de],Ai=$[de],jr=B[de].bBigMove,tn=B[de].bIsBreak,xt.assign(A[de])):(Ai=e.start.weight,pn=e.start.rank,jr=e.start.bBigMove,tn=e.start.bIsBreak,xt.assign(ri.get().getStartXY())),ye<_?(Zi=G[ye],ms=$[ye],Cs=B[ye].bBigMove,mn=B[ye].bIsBreak,Ys.assign(A[ye])):(ms=oe,Zi=pe,Cs=ue,mn=ce,Ys.assign(ri.get().getEndXY()));let m=se;Fi<1&&(this.splitEdgeInPlace(se),m=se.getNextInChain()),this.updateSegmentOnly(se,xr),se.start.hash===0||se.start.pt.equals(xt)||(this.m_newNodes.push(se.start),this.removeNodeFromHash(se.start),se.start.hash=0),se.end.hash===0||se.end.pt.equals(Ys)||(this.m_newNodes.push(se.end),this.removeNodeFromHash(se.end),se.end.hash=0),se.start.pt.assign(xt),se.end.pt.assign(Ys),(Dt=se.start).bBigMove||(Dt.bBigMove=jr),(Yi=se.end).bBigMove||(Yi.bBigMove=Cs),(cs=se.start).bIsBreak||(cs.bIsBreak=tn),(fn=se.end).bIsBreak||(fn.bIsBreak=mn),se.start.weight=Ai,se.start.rank=pn,se.end.weight=ms,se.end.rank=Zi,se=m,ne=Fi,de=ye}else de===-1&&(de=ye)}const Se=se.getNextInChain(),Pe=[];Pe.length=_;for(let ye=0;ye<_;ye++)Pe[ye]=ye;_>2?(Pe.sort((ye,Fi)=>_f(this.parent.m_param2[ye],this.parent.m_param2[Fi])),this.parent.m_param2.sort(_f)):_===2&&this.parent.m_param2[0]>this.parent.m_param2[1]&&(this.parent.m_param2[1]=St(this.parent.m_param2[0],this.parent.m_param2[0]=this.parent.m_param2[1]),Pe[1]=St(Pe[0],Pe[0]=Pe[1])),se=i,oe=i.end.weight,pe=i.end.rank,ue=i.end.bBigMove,ce=i.end.bIsBreak,ne=0,de=-1;for(let ye=0;ye<=_;ye++){const Fi=ye<_?this.parent.m_param2[ye]:1;if(Fi!==ne){const xr=this.parent.allocResultSegment(),ri=this.parent.m_resultSegments[xr];let Ai,pn,ms,Zi;l.queryCut(ne,Fi,ri,!1),ri.get().snapControlPoints(s*s);const tn=new Y,mn=new Y;let jr=!1,Cs=!1,xt=!1,Ys=!1;if(de!==-1){const j=Pe[de];Ai=F[j],pn=V[j],tn.assign(k[j]),xt=W[j].bBigMove,jr=W[j].bIsBreak}else Ai=i.start.weight,pn=i.start.rank,xt=i.start.bBigMove,jr=i.start.bIsBreak,tn.assign(ri.get().getStartXY());if(ye!==_){const j=Pe[ye];ms=F[j],Zi=V[j],mn.assign(k[j]),Ys=W[j].bBigMove,Cs=W[j].bIsBreak}else ms=oe,Zi=pe,Ys=ue,Cs=ce,mn.assign(ri.get().getEndXY());let m=se;Fi<1&&(this.splitEdgeInPlace(se),m=se.getNextInChain()),this.updateSegmentOnly(se,xr),se.start.hash===0||se.start.pt.equals(tn)||(this.m_newNodes.push(se.start),this.removeNodeFromHash(se.start),se.start.hash=0),se.end.hash===0||se.end.pt.equals(mn)||(this.m_newNodes.push(se.end),this.removeNodeFromHash(se.end),se.end.hash=0),se.start.pt.assign(tn),se.end.pt.assign(mn),(Us=se.start).bBigMove||(Us.bBigMove=xt),(hr=se.end).bBigMove||(hr.bBigMove=Ys),(oo=se.start).bIsBreak||(oo.bIsBreak=jr),(ss=se.end).bIsBreak||(ss.bIsBreak=Cs),se.start.weight=Ai,se.start.rank=pn,se.end.weight=ms,se.end.rank=Zi,se=m,ne=Fi,de=ye}else de===-1&&(de=ye)}const Re=se.getNextInChain();return this.postProcessResultPartsForCurves(e,Se,i,Re,r+1),y?3:2}intersectCurves(e,i){this.parent.m_inputSegments.length!==2&&bt(""),this.parent.m_changed1=!1,this.parent.m_changed2=!1,this.parent.m_tolerance=e,this.m_hashTableOfEqualsSize=0,this.m_hashTableOfEquals=HS(16);const s=xe.constructEmpty();for(let o=0;o<2;o++){const l=this.parent.allocResultSegmentFromSegment(this.parent.m_inputSegments[this.parent.m_inputParts[o].segmentIndex]),c=xe.constructEmpty();this.parent.m_inputSegments[this.parent.m_inputParts[o].segmentIndex].queryLooseEnvelope(c),s.mergeEnvelope2D(c);const f=this.parent.m_inputParts[o];this.addSegment(l,0,f.weightStart,f.rankStart,f.weightEnd,f.rankEnd,f.weightInterior,f.rankInterior,f.u.bBreakStart,f.u.bBreakEnd,f.segmentParentage)}s.inflateCoords(100*e,100*e),this.m_origin.assign(s.getLowerLeft()),this.m_cell.setCoords(2*e,2*e),this.m_pairs.push(r0(this.m_chainOrigin1.nextInChain,this.m_chainOrigin2.nextInChain,0,i));let n=0,r=!0;for(;this.m_pairs.length;){const o=this.m_pairs.at(-1);this.m_pairs.pop(),K(o.recursion>=0),K(o.recursion<=256),this.clusterNodes(e);const l=this.intersectCurvesHelper(o.edge1,o.edge2,e,o.bIsIntersecting,o.recursion);r&&(r=!1,n=l)}for(let o=0;o<2;o++){const l=o===0?this.parent.m_resultParts1:this.parent.m_resultParts2;for(let c=(o===0?this.m_chainOrigin1:this.m_chainOrigin2).nextInChain;c!=null;c=c.getNextInChain())l.push(this.parent.newIntersectionPart_(c.segmentIndex,c.start.weight,c.start.rank,c.end.weight,c.end.rank,c.weight,c.rank,c.start.bIsBreak,c.end.bIsBreak,c.segmentParentage)),l.at(-1).u.bBigMoveStart=c.start.bBigMove,l.at(-1).u.bBigMoveEnd=c.end.bBigMove}return n}tryOverlapIntersectCurves(e,i,s,n){const r=this.parent.m_resultSegments[e.segmentIndex].get(),o=this.parent.m_resultSegments[i.segmentIndex].get(),l=r.getStartXY().equals(o.getStartXY())&&r.getEndXY().equals(o.getEndXY()),c=r.getStartXY().equals(o.getEndXY())&&r.getEndXY().equals(o.getStartXY());if(!l&&!c)return 0;const f=pm(r,o,!0);if(f!==0&&Cye(r,o)&&e.segmentParentage===i.segmentParentage){let P=!1;if(f>0)P=r.equals(o);else{K(f===-1);const A=new Qt({segment:o});A.get().reverse(),P=r.equals(A.get())}if(P)return 1}const y=s*dl.c_smallToleranceFactor;let _=!1;if(f===0){const P=[.5,.25,.75,.125,.375,.625,.875,.5625,.3125];for(let A=0,k=P.length;A<k;++A){const $=P[A],F=new Y;r.queryCoord2D($,F);const G=o.getClosestCoordinate(F,!1),V=new Y;o.queryCoord2D(G,V);const B=Y.distance(F,V);if(B>s)return 0;_||(_=B>y)}for(let A=0,k=P.length;A<k;++A){const $=P[A],F=new Y;o.queryCoord2D($,F);const G=r.getClosestCoordinate(F,!1),V=new Y;r.queryCoord2D(G,V);const B=Y.distance(F,V);if(B>s)return 0;_||(_=B>y)}}let x=e.rank,S=i.rank;return x===S&&(x*=dl.c_maxGeometryTypeToRankDelta,S*=dl.c_maxGeometryTypeToRankDelta,x+=O_(r.getGeometryType(),r,!0),S+=O_(o.getGeometryType(),o,!0)),x>S?(i.copyFromWhenOverlap(this,e,l),i.transferAttributes(this,r,l)):S>x?(e.copyFromWhenOverlap(this,i,l),e.transferAttributes(this,o,l)):e.segmentParentage<=i.segmentParentage?(e.weight=e.weight+i.weight,i.copyFromWhenOverlap(this,e,l),i.transferAttributes(this,r,l)):(i.weight=e.weight+i.weight,e.copyFromWhenOverlap(this,i,l),e.transferAttributes(this,o,l)),_?3:2}postProcessResultPartsForCurves(e,i,s,n,r){r===tte()&&bt("curve_helper");for(let o=e;o!==i;o=o.getNextInChain())this.updateSegmentToNodes(o);for(let o=s;o!==n;o=o.getNextInChain())this.updateSegmentToNodes(o);for(let o=e;o!==i;o=o.getNextInChain()){const l=o.end.pt.sub(o.start.pt);for(let c=s;c!==n;c=c.getNextInChain()){let f=0;if(o.start.pt.equals(c.start.pt)&&o.end.pt.equals(c.end.pt)?f=1:o.start.pt.equals(c.end.pt)&&o.end.pt.equals(c.start.pt)&&(f=-1),!f){let A=o.start.pt.equals(c.start.pt)?1:0;if(A||(A=o.end.pt.equals(c.end.pt)?2:0,A||(A=o.end.pt.equals(c.start.pt)?3:0,A||(A=o.start.pt.equals(c.end.pt)?4:0))),A){const k=c.end.pt.sub(c.start.pt),$=l.dotProduct(k);let F;switch(A){case 1:case 2:F=$>0;break;case 3:case 4:F=$<0;break;default:bt("post_process_result_parts_for_curves_")}F&&this.m_pairs.push(r0(o,c,r,!1))}continue}const y=this.parent.m_resultSegments[o.segmentIndex],_=this.parent.m_resultSegments[c.segmentIndex],x=[.5,.25,.75];for(let A=0,k=x.length;A<k;++A){const $=x[A],F=new Y;y.get().queryCoord2D($,F);const G=_.get().getClosestCoordinate(F,!1),V=new Y;if(_.get().queryCoord2D(G,V),Y.distance(F,V)>this.parent.m_tolerance){f=0;break}}if(!f){this.m_pairs.push(r0(o,c,r,!1));continue}for(let A=0,k=x.length;A<k;++A){const $=x[A],F=new Y;_.get().queryCoord2D($,F);const G=y.get().getClosestCoordinate(F,!1),V=new Y;if(y.get().queryCoord2D(G,V),Y.distance(F,V)>this.parent.m_tolerance){f=0;break}}if(!f){this.m_pairs.push(r0(o,c,r,!1));continue}o.equalEdge=c,c.equalEdge=o;let S=o.rank,P=c.rank;S===P&&(S*=dl.c_maxGeometryTypeToRankDelta,P*=dl.c_maxGeometryTypeToRankDelta,S+=O_(y.get().getGeometryType(),y.get(),!0),P+=O_(_.get().getGeometryType(),_.get(),!0)),S>P||S===P&&o.segmentParentage<=c.segmentParentage?(y.copyTo(_,!1),c.segmentParentage=o.segmentParentage,f===-1&&_.get().reverse()):(_.copyTo(y,!1),o.segmentParentage=c.segmentParentage,f===-1&&y.get().reverse());break}}this.updateAttachedEdgesAfterNodeChange(e.start),i&&this.updateAttachedEdgesAfterNodeChange(i.start),this.updateAttachedEdgesAfterNodeChange(s.start),n&&this.updateAttachedEdgesAfterNodeChange(n.start)}processDoublyConnectedEdges(e,i,s,n){s===tte()&&bt("curve_helper");const r=this.getSegment(e).get(),o=this.getSegment(i).get(),l=r.getStartXY().equals(o.getStartXY())&&r.getEndXY().equals(o.getEndXY())?1:r.getEndXY().equals(o.getStartXY())&&r.getStartXY().equals(o.getEndXY())?-1:0;if(l!==0){const c=new Qt;r.queryCut(0,.5,c),c.get().snapControlPoints(n*n);const f=new Qt;r.queryCut(.5,1,f),f.get().snapControlPoints(n*n),this.splitEdgeInPlace(e),e.end.pt=c.get().getEndXY(),e.segmentIndex=this.parent.allocResultSegmentFromBuffer(c),e.getNextInChain().segmentIndex=this.parent.allocResultSegmentFromBuffer(f);let y=o.getClosestCoordinate(e.end.pt,!1);return Math.abs(y-.5)>.2&&(y=.5),o.queryCut(0,y,c),c.get().snapControlPoints(n*n),o.queryCut(y,1,f),f.get().snapControlPoints(n*n),this.splitEdgeInPlace(i),i.end.pt=c.get().getEndXY(),i.segmentIndex=this.parent.allocResultSegmentFromBuffer(c),i.getNextInChain().segmentIndex=this.parent.allocResultSegmentFromBuffer(f),l>0?(this.m_pairs.push(r0(e,i,s,!1)),this.m_pairs.push(r0(e.getNextInChain(),i.getNextInChain(),s,!1))):(this.m_pairs.push(r0(e,i.getNextInChain(),s,!1)),this.m_pairs.push(r0(e.getNextInChain(),i,s,!1))),!0}return!1}getNext(e){return K(0),{}}newNode(e,i,s,n){const r=new yie;return this.m_newNodes.push(r),r.pt=e,r.rank=s,r.weight=i,r.bIsBreak=n,r}newEdge(e,i,s,n,r,o){const l=new gie;return l.start=e,l.end=i,e.nextInChain=l,i.prevInChain=l,l.segmentIndex=s,l.segmentParentage=o,l.rank=r,l.weight=n,l}splitEdgeInPlace(e){e.segmentIndex=-1;const i=new gie,s=new yie;this.m_newNodes.push(s),s.pt.setNAN(),s.nextInChain=i,s.prevInChain=e,s.prevInHash=null,s.nextInHash=null,s.prevEqual=null,s.nextEqual=null,s.weight=e.weight,s.rank=e.rank,s.bIsBreak=!1,s.bBigMove=!1,i.start=s,i.segmentIndex=-1,i.end=e.end,i.end.prevInChain=i,i.rank=e.rank,i.weight=e.weight,i.segmentParentage=e.segmentParentage,e.end=s,e.equalEdge&&(e.equalEdge.equalEdge=null),e.equalEdge=null}updateSegmentOnly(e,i){e.segmentIndex=i}updateAttachedEdgesAfterNodeChange(e){for(let i=e.equalListHead();i!==null;i=i.nextEqual)this.updateAttachedEdgesAfterNodeChangeImpl(i)}updateAttachedEdgesAfterNodeChangeImpl(e){const i=e.prevInChain;if(i&&i.hasSegment()){const n=this.getSegment(i).get();e.pt.equals(n.getEndXY())||(n.setCoordsForIntersector(i.start.pt,i.end.pt,!1),n.ensureXYMonotone())}const s=e.nextInChain;if(s&&s.hasSegment()){const n=this.getSegment(s).get();e.pt.equals(n.getStartXY())||(n.setCoordsForIntersector(s.start.pt,s.end.pt,!1),n.ensureXYMonotone())}}updateSegmentToNodes(e){const i=this.getSegment(e).get();e.start.pt.equals(i.getStartXY())&&e.end.pt.equals(i.getEndXY())||(i.setCoordsForIntersector(e.start.pt,e.end.pt,!1),i.ensureXYMonotone()),this.updateAttachedEdgesAfterNodeChange(e.start),this.updateAttachedEdgesAfterNodeChange(e.end)}getSegment(e){return this.parent.m_resultSegments[e.segmentIndex]}clusterNodes(e){let i=!1;const s=[],n=[],r=[];for(let o=0,l=this.m_newNodes.length;o<l;o++){const c=this.m_newNodes[o];if(c===null)continue;let f=c;for(let y=o+1;y<l;y++){const _=this.m_newNodes[y];_!==null&&c.pt.equals(_.pt)&&(f.nextInHash=_,_.prevInHash=f,f=_,this.m_newNodes[y]=null)}}for(let o=0,l=this.m_newNodes.length;o<l;o++){const c=this.m_newNodes[o];if(c==null)continue;for(c.hash=this.calculateHash(c.pt);;){const S=HS(4),P=this.hashTableBinsToCheck(c,S);for(let k=0;k<P;k++)if(S[k]!==null)for(let $=S[k];$!==null;){const F=$.nextInHash;Y.distance(c.pt,$.pt)<=e&&(s.push($),this.removeNodeFromHash($),$.hash=0,r.push($),n.push($)),$=F}let A=!1;for(const k of s)if(!c.pt.equals(k.pt)){const $=P1e(c.pt,k.pt,c.weight,c.rank,k.weight,k.rank);c.pt.assign($.pt),c.weight=$.weight,c.rank=$.rank,A=!0,i=!0}if(s.length=0,!A)break;c.hash=this.calculateHash(c.pt)}r.push(c),n.push(c);for(let S=c.nextInHash;S!==null;){S.prevInHash=null;const P=S.nextInHash;S.nextInHash=null,r.push(S),n.push(S),S=P}const f=c.hash;let y=null,_=null;for(const S of n)c!==S&&(S.hash=f,S.pt.assign(c.pt),S.rank=c.rank,S.weight=c.weight),S.prevInHash=y,y&&(y.nextInHash=S),S.prevEqual=_,S.nextEqual=null,_&&(_.nextEqual=S),_=S,y=S;const x=f%this.m_hashTableOfEquals.length;y.nextInHash=this.m_hashTableOfEquals[x],this.m_hashTableOfEquals[x]!==null&&(this.m_hashTableOfEquals[x].prevInHash=y),this.m_hashTableOfEquals[x]=n[0],this.m_hashTableOfEqualsSize+=n.length,n.length=0,this.rehashIfNeeded()}if(this.m_newNodes.length=0,i)for(const o of r)this.updateAttachedEdgesAfterNodeChange(o)}addNodeToHash(e){K(0)}rehashIfNeeded(){if(2*this.m_hashTableOfEqualsSize>this.m_hashTableOfEquals.length){const e=this.m_hashTableOfEquals;this.m_hashTableOfEquals=HS(2*e.length),this.m_hashTableOfEqualsSize=0;for(const i of e){let s=i;for(;s;){const n=s.nextInHash;s.nextInHash=null,s.prevInHash=null,this.addNodeToHashImpl(s),s=n}}}}addNodeToHashImpl(e){const i=e.hash%this.m_hashTableOfEquals.length,s=this.m_hashTableOfEquals[i];e.nextInHash=s,s!==null&&(s.prevInHash=e),this.m_hashTableOfEquals[i]=e,this.m_hashTableOfEqualsSize++}removeNodeFromHash(e){const i=e.hash%this.m_hashTableOfEquals.length,s=e.prevInHash,n=e.nextInHash;s?s.nextInHash=n:this.m_hashTableOfEquals[i]=n,n&&(n.prevInHash=s),this.m_hashTableOfEqualsSize--,e.prevInHash=null,e.nextInHash=null}hashTableBinsToCheck(e,i){const s=(e.pt.x-this.m_origin.x)/this.m_cell.x,n=(e.pt.y-this.m_origin.y)/this.m_cell.y,r=vo()-1,o=Math.round(cn(s,-2147483646,r)),l=Math.round(cn(n,-2147483646,r));let c=o|l<<32;c=ef(c),i[0]=this.m_hashTableOfEquals[c%this.m_hashTableOfEquals.length];let f=o+1|l<<32;f=ef(f);let y=1;i[1]=this.m_hashTableOfEquals[f%this.m_hashTableOfEquals.length],i[1]!==i[0]&&(y=2);let _=o+1|l+1<<32;_=ef(_),i[y]=this.m_hashTableOfEquals[_%this.m_hashTableOfEquals.length];for(let S=0;S<y;S++)if(i[y]===i[S]){y--;break}y++;let x=o|l+1<<32;x=ef(x),i[y]=this.m_hashTableOfEquals[x%this.m_hashTableOfEquals.length];for(let S=0;S<y;S++)if(i[y]===i[S]){y--;break}return y++,y}calculateHash(e){const i=(e.x-this.m_origin.x)/this.m_cell.x,s=(e.y-this.m_origin.y)/this.m_cell.y,n=vo()-1;let r=Math.round(cn(i,-2147483646,n))|Math.round(cn(s,-2147483646,n))<<32;return r=ef(r),r===0&&(r=1),r}processSharpCorners(e,i,s,n){if(this.parent.m_param1.length=0,this.parent.m_param2.length=0,e.getStartXY().equals(i.getStartXY())){const r=[0,0],o=[0,0],l=iT(e,i,0,0,s,2,r,o,n);if(l){this.parent.m_param1.push(0),this.parent.m_param2.push(0);for(let c=0;c<l;c++)this.parent.m_param1.push(r[c]),this.parent.m_param2.push(o[c]);return l+1}}if(e.getEndXY().equals(i.getEndXY())){const r=[0,0],o=[0,0],l=iT(e,i,1,1,s,2,r,o,n);if(l){for(let c=0;c<l;c++)this.parent.m_param1.push(r[c]),this.parent.m_param2.push(o[c]);return this.parent.m_param1.push(1),this.parent.m_param2.push(1),l+1}}if(e.getStartXY().equals(i.getEndXY())){const r=[0,0],o=[0,0],l=iT(e,i,0,1,s,2,r,o,n);if(l){this.parent.m_param1.push(0),this.parent.m_param2.push(1);for(let c=0;c<l;c++)this.parent.m_param1.push(r[c]),this.parent.m_param2.push(o[c]);return l+1}}if(e.getEndXY().equals(i.getStartXY())){const r=[0,0],o=[0,0],l=iT(e,i,1,0,s,2,r,o,n);if(l){for(let c=0;c<l;c++)this.parent.m_param1.push(r[c]),this.parent.m_param2.push(o[c]);return this.parent.m_param1.push(1),this.parent.m_param2.push(0),l+1}}return 0}}function O_(t,e,i){let s=0;switch(t){case me.enumLine:s=0;break;case me.enumBezier:s=2;break;case me.enumRationalBezier2:s=3;break;case me.enumBezier2:s=1;break;case me.enumEllipticArc:s=e.projectionBehavior()===0?5:4;break;default:bt("")}return i?5-s:s}class att extends S1e{constructor(e){super(e.m_shape,e.m_tolerance,!1),this.m_parent=e}compare(e,i,s){if(this.m_bIntersectionDetected)return-1;const n=e.getElement(s),r=this.m_parent.getEdgeOriginVertices(i),o=this.m_parent.m_edgeVertices.getFirstElement(r),l=this.m_parent.getEdgeOriginVertices(n),c=this.m_parent.m_edgeVertices.getFirstElement(l);return this.m_currentNode=s,this.compareSegments(i,o,n,c)}}class ltt extends E1e{constructor(e){super(e.m_shape,e.m_tolerance),this.m_parent=e}compare(e,i){if(this.m_bIntersectionDetected)return-1;const s=e.getElement(i),n=this.m_parent.getEdgeOriginVertices(s),r=this.m_parent.m_edgeVertices.getFirstElement(n);return this.m_currentNode=i,this.compareVertex(e,i,r)}}class utt extends zv{constructor(e){super(),this.pt1=Y.getNAN(),this.pt2=Y.getNAN(),this.m_shape=e}compare(e,i,s){this.m_shape.queryXY(i,this.pt1);const n=e.getElement(s);return this.m_shape.queryXY(n,this.pt2),this.pt1.compare(this.pt2)}}class ctt{constructor(e){this.m_point=Y.getNAN(),this.m_pt=Y.getNAN(),this.m_shape=e}setPoint(e){this.m_point.setCoordsPoint2D(e)}compare(e,i){const s=e.getElement(i);return this.m_shape.queryXY(s,this.m_pt),this.m_point.compare(this.m_pt)}}class Iz{constructor(e,i){this.m_shape=null,this.m_progressTracker=null,this.m_edges=new Ut(8),this.m_clusters=new Ut(5),this.m_clusterVertices=new ws(!1),this.m_edgeVertices=new ws(!1),this.m_helperPoint=new Ht,this.m_eventQ=new Gt,this.m_sweepStructure=new Gt,this.m_bComplications=!1,this.m_sweepComparator=null,this.m_tempEdgeBuffer=[],this.m_modifiedClusters=[],this.m_edgesToInsertInSweepStructure=[],this.m_prevNeighbour=-1,this.m_nextNeighbour=-1,this.m_bContinuingSegmentChainOptimization=!1,this.m_progressCounter=0,this.m_segmentIntersector=new dl,this.m_segBuf1=new Qt,this.m_segBuf2=new Qt,this.m_sweepPoint=new Y(0,0),this.m_tolerance=0,this.m_toleranceSqr=0,this.m_sweepPointCluster=-1,this.m_vertexClusterIndex=-1,this.m_bCracked=!1,this.m_bSweepPointClusterWasModified=!1,this.m_progressTracker=e,this.m_bTrackChanges=i}hadComplications(){return this.m_bComplications}sweep(e,i){const s=new _i;s.setSwapCoordinates(),e.applyTransformation(s),this.setEditShape_(e),this.m_bCracked=!1,this.m_tolerance=i,this.m_toleranceSqr=i*i;let n=this.sweepImpl_();return e.applyTransformation(s),n||(this.fillEventQueuePass2(),n=this.sweepImpl_()||n),this.m_shape.removeUserIndex(this.m_vertexClusterIndex),this.m_shape=null,this.m_bCracked}sweepVertical(e,i){this.setEditShape_(e),this.m_bCracked=!1,this.m_tolerance=i,this.m_toleranceSqr=i*i,this.m_bComplications=!1;let s=this.sweepImpl_();if(!this.m_bComplications){const n=e.filterClosePoints(i,!0,!1,this.m_bTrackChanges,ae);this.m_bComplications=n===1,s||(s=n===1)}return this.m_vertexClusterIndex!==-1&&(this.m_shape.removeUserIndex(this.m_vertexClusterIndex),this.m_vertexClusterIndex=-1),this.m_shape=null,s}getEdgeCluster(e,i){return this.m_edges.getField(e,0+i)}setEdgeCluster_(e,i,s){this.m_edges.setField(e,0+i,s)}getEdgeOriginVertices(e){return this.m_edges.getField(e,2)}setEdgeOriginVertices_(e,i){this.m_edges.setField(e,2,i)}getNextEdgeEx(e,i){return this.m_edges.getField(e,3+i)}setNextEdgeEx_(e,i,s){this.m_edges.setField(e,3+i,s)}getEdgeSweepNode(e){return this.m_edges.getField(e,7)}setEdgeSweepNode_(e,i){this.m_edges.setField(e,7,i)}getNextEdge(e,i){const s=this.getEdgeEnd(e,i);return this.m_edges.getField(e,3+s)}setNextEdge_(e,i,s){const n=this.getEdgeEnd(e,i);this.m_edges.setField(e,3+n,s)}getPrevEdge(e,i){const s=this.getEdgeEnd(e,i);return this.m_edges.getField(e,5+s)}setPrevEdge_(e,i,s){const n=this.getEdgeEnd(e,i);this.m_edges.setField(e,5+n,s)}getClusterVertices(e){return this.m_clusters.getField(e,0)}setClusterVertices_(e,i){this.m_clusters.setField(e,0,i)}getClusterSweepEdgeList(e){return this.m_clusters.getField(e,2)}setClusterSweepEdgeList_(e,i){this.m_clusters.setField(e,2,i)}getClusterFirstEdge(e){return this.m_clusters.getField(e,1)}setClusterFirstEdge_(e,i){this.m_clusters.setField(e,1,i)}getClusterEventQNode(e){return this.m_clusters.getField(e,3)}setClusterEventQNode_(e,i){this.m_clusters.setField(e,3,i)}newCluster_(e){const i=this.m_clusters.newElement(),s=this.m_clusterVertices.createList();return this.setClusterVertices_(i,s),e!==ae&&(this.m_clusterVertices.addElement(s,e),this.m_shape.setUserIndex(e,this.m_vertexClusterIndex,i)),i}deleteCluster_(e){this.m_clusters.deleteElement(e)}addVertexToCluster_(e,i){const s=this.getClusterVertices(e);this.m_clusterVertices.addElement(s,i),this.m_shape.setUserIndex(i,this.m_vertexClusterIndex,e)}newEdge_(e){const i=this.m_edges.newElement(),s=this.m_edgeVertices.createList();return this.setEdgeOriginVertices_(i,s),e!==-1&&this.m_edgeVertices.addElement(s,e),i}addVertexToEdge_(e,i){const s=this.getEdgeOriginVertices(e);this.m_edgeVertices.addElement(s,i)}deleteEdge_(e){this.m_edges.deleteElement(e);const i=this.m_edgesToInsertInSweepStructure.findIndex(s=>s===e);i>=0&&wKe(this.m_edgesToInsertInSweepStructure,i)}addEdgeToCluster(e,i){this.getEdgeCluster(e,0)===-1?this.setEdgeCluster_(e,0,i):this.getEdgeCluster(e,1)===-1?this.setEdgeCluster_(e,1,i):bt(""),this.addEdgeToClusterImpl_(e,i)}addEdgeToClusterImpl_(e,i){const s=this.getClusterFirstEdge(i);if(s!==-1){const n=this.getNextEdge(s,i);this.setPrevEdge_(n,i,e),this.setNextEdge_(e,i,n),this.setNextEdge_(s,i,e),this.setPrevEdge_(e,i,s)}else this.setPrevEdge_(e,i,e),this.setNextEdge_(e,i,e),this.setClusterFirstEdge_(i,e)}getEdgeEnd(e,i){return this.getEdgeCluster(e,0)===i?0:1}mergeClusters_(e,i){this.dbgCheckCluster_(e),this.dbgCheckCluster_(i);const s=this.getClusterEventQNode(i);s!==-1&&(this.m_eventQ.deleteNode(s),this.setClusterEventQNode_(i,-1));let n=this.getClusterFirstEdge(e),r=this.getClusterFirstEdge(i);if(r!==-1){let c=r,f=r,y=!1;do{this.dbgCheckEdge_(c),y=!1;const _=this.getEdgeEnd(c,i),x=this.getNextEdgeEx(c,_);if(this.getEdgeCluster(c,_+1&1)===e){this.disconnectEdge_(c);const S=this.getEdgeOriginVertices(c);if(this.m_edgeVertices.deleteList(S),this.deleteEdge_(c),c===x){r=-1;break}r===c&&(r=this.getClusterFirstEdge(i),f=x,y=!0)}c=x}while(c!==f||y);if(r!==-1){do{const _=this.getEdgeEnd(c,i),x=this.getNextEdgeEx(c,_);this.setEdgeCluster_(c,_,e),c=x}while(c!==f);if(n=this.getClusterFirstEdge(e),n!==-1){const _=this.getNextEdge(n,e),x=this.getNextEdge(r,e);_===n?(this.setClusterFirstEdge_(e,r),this.addEdgeToClusterImpl_(n,e),this.setClusterFirstEdge_(e,n)):x===r&&this.addEdgeToClusterImpl_(r,e),this.setNextEdge_(r,e,_),this.setPrevEdge_(_,e,r),this.setNextEdge_(n,e,x),this.setPrevEdge_(x,e,n)}else this.setClusterFirstEdge_(e,r)}}const o=this.getClusterVertices(e),l=this.getClusterVertices(i);for(let c=this.m_clusterVertices.getFirst(l);c!==-1;c=this.m_clusterVertices.getNext(c)){const f=this.m_clusterVertices.getElement(c);this.m_shape.setUserIndex(f,this.m_vertexClusterIndex,e)}this.m_clusterVertices.concatenateLists(o,l),this.deleteCluster_(i),this.dbgCheckCluster_(e)}mergeEdges_(e,i){this.dbgCheckEdge_(e),this.dbgCheckEdge_(i);const s=this.getEdgeCluster(e,0),n=this.getEdgeCluster(e,1),r=this.getEdgeCluster(i,0),o=this.getEdgeCluster(i,1),l=this.getEdgeOriginVertices(e),c=this.getEdgeOriginVertices(i);if(this.m_edgeVertices.concatenateLists(l,c),i===this.getClusterFirstEdge(s)&&this.setClusterFirstEdge_(s,e),i===this.getClusterFirstEdge(n)&&this.setClusterFirstEdge_(n,e),this.disconnectEdge_(i),this.deleteEdge_(i),!(s===r&&n===o||n===r&&s===o)){const f=this.getClusterXY(s),y=this.getClusterXY(r);f.isEqualPoint2D(y)?(s!==r&&this.mergeClusters_(s,r),n!==o&&this.mergeClusters_(n,o)):(n!==r&&this.mergeClusters_(n,r),s!==o&&this.mergeClusters_(s,o))}this.dbgCheckEdge_(e)}disconnectEdge_(e){const i=this.getEdgeCluster(e,0),s=this.getEdgeCluster(e,1);this.disconnectEdgeFromCluster_(e,i),this.disconnectEdgeFromCluster_(e,s)}disconnectEdgeFromCluster_(e,i){const s=this.getNextEdge(e,i),n=this.getPrevEdge(e,i),r=this.getClusterFirstEdge(i);s!==e?(this.setNextEdge_(n,i,s),this.setPrevEdge_(s,i,n),r===e&&this.setClusterFirstEdge_(i,s)):this.setClusterFirstEdge_(i,-1)}applyIntersectorToEditShape_(e,i,s){let n=this.m_edgeVertices.getFirst(e);const r=this.m_edgeVertices.getElement(n),o=this.getClusterFromVertex(r),l=this.m_shape.getNextVertex(r),c=this.getClusterFromVertex(l),f=this.m_shape.getXY(r),y=this.m_shape.getXY(l);let _=!1,x=!1;const S=i.getResultSegment(s,0).getStartXY(),P=i.getResultSegment(s,i.getResultSegmentCount(s)-1).getEndXY();f.equals(S)||(_=!0),y.equals(P)||(x=!0),this.m_shape.splitSegmentWithIntersector(r,i,s,!0,!0);const A=this.m_bTrackChanges&&i.getSegmentChanged(s);for(A&&this.m_shape.setGeometryModifiedWithVertex(r,!0),n=this.m_edgeVertices.getNext(n);n!==-1;n=this.m_edgeVertices.getNext(n)){const k=this.m_edgeVertices.getElement(n),$=this.getClusterFromVertex(k)===o;this.m_shape.splitSegmentWithIntersector(k,i,s,$,!0),A&&this.m_shape.setGeometryModifiedWithVertex(k,!0)}if(_&&this.updateClusterXY(!0,o,S,i.getResultSegmentStartPointWeight(s,0),i.getResultSegmentStartPointRank(s,0)),x){const k=i.getResultSegmentCount(s)-1;this.updateClusterXY(!0,c,P,i.getResultSegmentEndPointWeight(s,k),i.getResultSegmentEndPointRank(s,k))}}createEdgesAndClustersFromSplitEdge_(e,i,s){this.dbgCheckNewEdgesArray_();const n=this.getEdgeOriginVertices(e),r=this.getEdgeCluster(e,0),o=this.getEdgeCluster(e,1);let l=this.newEdge_(-1);this.m_edgesToInsertInSweepStructure.push(l);const c=Ut.impossibleIndex3();this.setEdgeSweepNode_(l,c),this.m_tempEdgeBuffer.push(l),this.addEdgeToCluster(l,r);const f=i.getResultSegmentCount(s);for(let y=1;y<f;y++){const _=this.newCluster_(-1);this.m_modifiedClusters.push(_),this.m_tempEdgeBuffer.push(_),this.addEdgeToCluster(l,_);const x=this.newEdge_(-1);this.m_edgesToInsertInSweepStructure.push(x),this.setEdgeSweepNode_(x,c),this.m_tempEdgeBuffer.push(x),this.addEdgeToCluster(x,_),l=x}this.addEdgeToCluster(l,o);for(let y=this.m_edgeVertices.getFirst(n);y!==-1;y=this.m_edgeVertices.getNext(y)){let _=this.m_edgeVertices.getElement(y);if(this.getClusterFromVertex(_)===r){let x=0;const S=this.m_tempEdgeBuffer.length;do{if(x>0){const A=this.m_tempEdgeBuffer[x-1];this.addVertexToCluster_(A,_)}const P=this.m_tempEdgeBuffer[x];x+=2,this.addVertexToEdge_(P,_),_=this.m_shape.getNextVertex(_)}while(x<S)}else{let x=this.m_tempEdgeBuffer.length-1;do{if(x<this.m_tempEdgeBuffer.length-2){const P=this.m_tempEdgeBuffer[x+1];this.addVertexToCluster_(P,_)}const S=this.m_tempEdgeBuffer[x];x-=2,this.addVertexToEdge_(S,_),_=this.m_shape.getNextVertex(_)}while(x>=0)}}this.m_tempEdgeBuffer.length=0,this.dbgCheckNewEdgesArray_()}getVertexFromClusterIndex(e){const i=this.getClusterVertices(e);return this.m_clusterVertices.getFirstElement(i)}getClusterFromVertex(e){return this.m_shape.getUserIndex(e,this.m_vertexClusterIndex)}processSplitHelper1_(e,i,s){const n=this.getEdgeCluster(i,0),r=this.getClusterXY(n),o=this.getEdgeCluster(i,1),l=this.getClusterXY(o),c=s.getResultSegmentCount(e);let f=s.getResultSegment(e,0);const y=f.getStartXY();if(r.isEqualPoint2D(y)||(this.m_bComplications||r.compare(this.m_sweepPoint)*y.compare(this.m_sweepPoint)<0&&(this.m_bComplications=!0),this.getAffectedEdges(n,this.m_tempEdgeBuffer),this.m_modifiedClusters.push(n)),!this.m_bComplications&&c>1){const x=r.compare(l),S=f.getEndXY();(r.compare(S)!==x||S.compare(l)!==x||S.compare(this.m_sweepPoint)<0)&&(this.m_bComplications=!0)}f=s.getResultSegment(e,c-1);const _=f.getEndXY();l.isEqualPoint2D(_)||(this.m_bComplications||l.compare(this.m_sweepPoint)*_.compare(this.m_sweepPoint)<0&&(this.m_bComplications=!0),this.getAffectedEdges(o,this.m_tempEdgeBuffer),this.m_modifiedClusters.push(o)),this.m_tempEdgeBuffer.push(i);for(let x=0,S=this.m_tempEdgeBuffer.length;x<S;x++){const P=this.m_tempEdgeBuffer[x],A=this.getEdgeSweepNode(P);Ut.isValidElement(A)&&(this.m_sweepStructure.deleteNode(A),this.setEdgeSweepNode_(P,-1));const k=Ut.impossibleIndex3();P!==i&&this.getEdgeSweepNode(P)!==k&&(this.m_edgesToInsertInSweepStructure.push(P),this.setEdgeSweepNode_(P,k))}this.m_tempEdgeBuffer.length=0}checkAndFixIntersection_(e,i){const s=this.m_sweepStructure.getElement(e);return this.m_sweepComparator.compare(this.m_sweepStructure,s,i),!!this.m_sweepComparator.intersectionDetected()&&(this.m_sweepComparator.clearIntersectionDetectedFlag(),this.fixIntersection_(e,i),!0)}fixIntersection_(e,i){this.m_bCracked=!0;const s=this.m_sweepStructure.getElement(e),n=this.m_sweepStructure.getElement(i);let r=null,o=null;const l=this.getEdgeOriginVertices(s),c=this.m_edgeVertices.getFirstElement(l),f=this.getEdgeOriginVertices(n),y=this.m_edgeVertices.getFirstElement(f),_=this.m_shape.querySegment(c,this.m_segBuf1,!1,!1);K(_),r=this.m_segBuf1.get();const x=this.m_shape.getNextVertex(c),S=this.m_shape.getWeight(c),P=this.m_shape.getSegmentParentageBreakVertex(c),A=this.m_shape.getWeight(x),k=this.m_shape.getSegmentParentageBreakVertex(x),$=this.m_shape.getSegmentWeight(c),F=this.m_shape.getRank(c),G=this.m_shape.getRank(x),V=this.m_shape.getSegmentRank(c),B=this.m_shape.getSegmentParentage(c),W=this.m_shape.querySegment(y,this.m_segBuf2,!1,!1);K(W),o=this.m_segBuf2.get();const J=this.m_shape.getNextVertex(y),re=this.m_shape.getWeight(y),se=this.m_shape.getSegmentParentageBreakVertex(y),oe=this.m_shape.getWeight(J),pe=this.m_shape.getSegmentParentageBreakVertex(J),ue=this.m_shape.getSegmentWeight(y),ce=this.m_shape.getRank(y),ne=this.m_shape.getRank(J),de=this.m_shape.getSegmentRank(y),Se=this.m_shape.getSegmentParentage(y);this.m_segmentIntersector.pushSegment(r,S,F,A,G,$,V,P,k,B),this.m_segmentIntersector.pushSegment(o,re,ce,oe,ne,ue,de,se,pe,Se),this.m_segmentIntersector.intersect2D(this.m_tolerance,!0)===3&&(this.m_bComplications=!0),this.splitEdge_(s,n,-1,this.m_segmentIntersector),this.m_segmentIntersector.clear()}fixIntersectionPointSegment_(e,i){this.m_bCracked=!0;const s=this.m_sweepStructure.getElement(i);let n=null;const r=this.getEdgeOriginVertices(s),o=this.m_edgeVertices.getFirstElement(r),l=this.m_shape.querySegment(o,this.m_segBuf1,!1,!1);K(l),n=this.m_segBuf1.get();const c=this.m_shape.getNextVertex(o),f=this.m_shape.getWeight(o),y=this.m_shape.getSegmentParentageBreakVertex(o),_=this.m_shape.getWeight(c),x=this.m_shape.getSegmentParentageBreakVertex(c),S=this.m_shape.getSegmentWeight(o),P=this.m_shape.getRank(o),A=this.m_shape.getRank(c),k=this.m_shape.getSegmentRank(o),$=this.m_shape.getSegmentParentage(o),F=this.getClusterFirstVertex(e);this.m_segmentIntersector.pushSegment(n,f,P,_,A,S,k,y,x,$),this.m_shape.queryPoint(F,this.m_helperPoint);const G=this.m_shape.getWeight(F),V=this.m_shape.getRank(F);this.m_segmentIntersector.intersect2DEx(this.m_tolerance,this.m_helperPoint,V,G,!0),this.splitEdge_(s,-1,e,this.m_segmentIntersector),this.m_segmentIntersector.clear()}insertNewEdges_(){if(this.m_edgesToInsertInSweepStructure.length===0)return!0;this.dbgCheckNewEdgesArray_();let e=!0,i=0;const s=this.m_edgesToInsertInSweepStructure.length,n=Math.max(2*s+200,this.m_sweepStructure.size()+200);for(;this.m_edgesToInsertInSweepStructure.length;){if(this.m_edgesToInsertInSweepStructure.length>Math.max(100,this.m_shape.getTotalPointCount())||i>n){this.m_edgesToInsertInSweepStructure.length=0,this.m_bComplications=!0,e=!1;break}const r=this.m_edgesToInsertInSweepStructure.at(-1);this.m_edgesToInsertInSweepStructure.pop(),this.setEdgeSweepNode_(r,-1);const o=this.isEdgeOnSweepLine_(r);Ut.isValidElement(o)?(this.insertNewEdgeToSweepStructure_(r,o),i++):o!==Ut.impossibleIndex2()&&(e=!1),this.m_bContinuingSegmentChainOptimization=!1}return e}insertNewEdgeToSweepStructure_(e,i){let s;if(this.m_bContinuingSegmentChainOptimization?(s=this.m_sweepStructure.addElementAtPosition(this.m_prevNeighbour,this.m_nextNeighbour,e,!0,!0),this.m_bContinuingSegmentChainOptimization=!1):s=this.m_sweepStructure.addUniqueElement(e),s===-1){const n=this.m_sweepStructure.getDuplicateElement(),r=this.m_sweepStructure.getElement(n);return this.mergeEdges_(r,e),!1}if(this.setEdgeSweepNode_(e,s),this.m_sweepComparator.intersectionDetected()){this.m_sweepComparator.clearIntersectionDetectedFlag();const n=this.m_sweepComparator.getLastComparedNode();return this.m_prevNeighbour===n&&(this.m_prevNeighbour=-1),this.m_nextNeighbour===n&&(this.m_nextNeighbour=-1),this.fixIntersection_(n,s),!0}return!1}isEdgeOnSweepLine_(e){const i=this.getEdgeCluster(e,0),s=this.getEdgeCluster(e,1),n=this.getClusterXY(i),r=this.getClusterXY(s);if(Y.sqrDistance(n,r)<=this.m_toleranceSqr)return this.m_bComplications=!0,-1;const o=n.compare(this.m_sweepPoint),l=r.compare(this.m_sweepPoint);return o<=0&&l>0?s:l<=0&&o>0?i:o>0&&l>0?Ut.impossibleIndex2():-1}fillEventQueue(){const e=new Ns(0),i=this.m_shape.queryVertexIteratorOnSelection();for(let r=i.next();r!==ae;r=i.next())this.m_shape.getUserIndex(r,this.m_vertexClusterIndex)!==-1&&e.add(r);this.m_shape.sortVerticesSimpleByY(e,0,e.size()),this.progress_(!0),this.m_eventQ.clear(),this.m_eventQ.setCapacity(e.size()),this.m_eventQ.setComparator(new utt(this.m_shape));const s=Y.getNAN();s.setNAN();let n=-1;for(let r=0,o=e.size();r<o;r++){const l=e.read(r);if(this.m_shape.getXY(l).isEqualPoint2D(s)){const f=this.m_shape.getUserIndex(l,this.m_vertexClusterIndex);this.mergeClusters_(n,f);continue}n=this.getClusterFromVertex(l),this.m_shape.queryXY(l,s);const c=this.m_eventQ.addBiggestElement(l);this.setClusterEventQNode_(n,c)}}fillEventQueuePass2(){const e=new Ns(0);for(let i=this.m_eventQ.getFirst();i!==-1;i=this.m_eventQ.getNext(i)){const s=this.m_eventQ.getElement(i);e.add(s)}this.m_eventQ.clear(),this.m_shape.sortVerticesSimpleByY(e,0,e.size()),this.progress_(!0);for(let i=0,s=e.size();i<s;i++){const n=e.read(i),r=this.getClusterFromVertex(n),o=this.m_eventQ.addBiggestElement(n);this.setClusterEventQNode_(r,o)}}getAffectedEdges(e,i){const s=this.getClusterFirstEdge(e);if(s===-1)return;let n=s;do{const r=this.getEdgeSweepNode(n);Ut.isValidElement(r)&&i.push(n),n=this.getNextEdge(n,e)}while(n!==s)}updateClusterXY(e,i,s,n,r){const o=this.getClusterVertices(i);for(let l=this.m_clusterVertices.getFirst(o);l!==-1;l=this.m_clusterVertices.getNext(l)){const c=this.m_clusterVertices.getElement(l);this.m_shape.setXYMonotonicPoint2D(c,s),this.m_shape.setWeight(c,n),this.m_shape.setRank(c,r),e&&this.m_bTrackChanges&&this.m_shape.setGeometryModifiedWithVertex(c,!0),this.m_shape.setSegmentParentageBreakVertex(c,!0)}}splitEdge_(e,i,s,n){this.dbgCheckEdge_(e),i!==-1&&this.dbgCheckEdge_(i),this.disconnectEdge_(e),i!==-1&&this.disconnectEdge_(i),this.processSplitHelper1_(0,e,n),i!==-1&&this.processSplitHelper1_(1,i,n),s!==-1&&n.getResultPointChanged()&&this.m_modifiedClusters.push(s);for(let l=0,c=this.m_modifiedClusters.length;l<c;l++){const f=this.m_modifiedClusters[l],y=this.getClusterEventQNode(f);y!==-1&&(this.m_eventQ.deleteNode(y),this.setClusterEventQNode_(f,-1))}const r=this.getEdgeOriginVertices(e),o=i!==-1?this.getEdgeOriginVertices(i):-1;if(this.applyIntersectorToEditShape_(r,n,0),o!==-1)this.applyIntersectorToEditShape_(o,n,1);else{const l=n.getResultPoint().getXY();this.updateClusterXY(n.getResultPointChanged(),s,l,n.getResultPointWeight(),n.getResultPointRank())}this.createEdgesAndClustersFromSplitEdge_(e,n,0),i!==-1&&this.createEdgesAndClustersFromSplitEdge_(i,n,1),this.m_edgeVertices.deleteList(r),this.deleteEdge_(e),i!==-1&&(this.m_edgeVertices.deleteList(o),this.deleteEdge_(i));for(let l=0,c=this.m_modifiedClusters.length;l<c;l++){const f=this.m_modifiedClusters[l];f===this.m_sweepPointCluster&&(this.m_bSweepPointClusterWasModified=!0);let y=this.getClusterEventQNode(f);if(y===-1){const _=this.getClusterFirstVertex(f);if(y=this.m_eventQ.addUniqueElement(_),y===-1){const x=this.m_eventQ.getDuplicateElement(),S=this.m_eventQ.getElement(x),P=this.getClusterFromVertex(S);this.mergeClusters_(P,f)}else this.setClusterEventQNode_(f,y)}}this.m_modifiedClusters.length=0}getClusterXY(e){const i=this.getClusterFirstVertex(e);return this.m_shape.getXY(i)}getClusterFirstVertex(e){const i=this.getClusterVertices(e);return this.m_clusterVertices.getFirstElement(i)}dbgCheckEdge_(e){}dbgCheckCluster_(e){}dbgCheckNewEdgesArray_(){}dbgSaveSweepStructure_(e){K(0)}sweepImpl_(){this.progress_(!0),this.m_bSweepPointClusterWasModified=!1,this.m_sweepPointCluster=-1,this.m_sweepComparator===null&&(this.m_sweepStructure.disableBalancing(),this.m_sweepComparator=new att(this),this.m_sweepStructure.setComparator(this.m_sweepComparator));const e=[];let i=null,s=null;this.m_prevNeighbour=-1,this.m_nextNeighbour=-1,this.m_bContinuingSegmentChainOptimization=!1;const n=Ut.impossibleIndex2(),r=Ut.impossibleIndex3();for(let o=this.m_eventQ.getFirst();o!==-1;){this.progress_(),this.dbgCheckSweepStructure_(),this.m_bContinuingSegmentChainOptimization=!1,this.m_prevNeighbour=-1,this.m_nextNeighbour=-1;const l=this.m_eventQ.getElement(o);this.m_sweepPointCluster=this.getClusterFromVertex(l),this.m_shape.queryXY(l,this.m_sweepPoint),this.m_sweepComparator.setSweepY(this.m_sweepPoint.y,this.m_sweepPoint.x);let c=!1;{const y=this.getClusterFirstEdge(this.m_sweepPointCluster);if(c=y===-1,!c){let _=y;do{const x=this.getEdgeSweepNode(_);x===-1?(this.m_edgesToInsertInSweepStructure.push(_),this.setEdgeSweepNode_(_,r)):x!==r&&e.push(x),_=this.getNextEdge(_,this.m_sweepPointCluster)}while(_!==y)}}if(!this.m_sweepStructure.isAutoBalancing()&&(this.m_sweepStructure.getMaxDepthEver()>4||this.m_edgesToInsertInSweepStructure.length>10)&&this.m_sweepStructure.enableBalancing(),e.length>0){this.m_bContinuingSegmentChainOptimization=e.length===1&&this.m_edgesToInsertInSweepStructure.length===1;for(let x=0,S=e.length;x<S;x++){const P=this.m_sweepStructure.getElement(e[x]);this.setEdgeSweepNode_(P,n)}let y=n,_=n;for(let x=0,S=e.length;x<S;x++){const P=e[x];if(y===n){const A=this.m_sweepStructure.getPrev(P);if(A!==-1){const k=this.m_sweepStructure.getElement(A);this.getEdgeSweepNode(k)!==n&&(y=A)}else y=-1}if(_===n){const A=this.m_sweepStructure.getNext(P);if(A!==-1){const k=this.m_sweepStructure.getElement(A);this.getEdgeSweepNode(k)!==n&&(_=A)}else _=-1}if(y!==n&&_!==n)break}for(let x=0,S=e.length;x<S;x++){const P=e[x],A=this.m_sweepStructure.getElement(P);this.m_sweepStructure.deleteNode(P),this.setEdgeSweepNode_(A,-1)}e.length=0,this.m_prevNeighbour=y,this.m_nextNeighbour=_,y!==-1&&_!==-1?this.m_bContinuingSegmentChainOptimization||this.checkAndFixIntersection_(y,_):y===-1&&_===-1&&(this.m_bContinuingSegmentChainOptimization=!1)}else c&&(i===null&&(i=new ltt(this)),i.setPoint(this.m_sweepPoint),this.m_sweepStructure.searchUpperBound(i),i.intersectionDetected()&&(i.clearIntersectionDetectedFlag(),this.fixIntersectionPointSegment_(this.m_sweepPointCluster,i.getCurrentNode())));const f=this.m_bContinuingSegmentChainOptimization;!this.insertNewEdges_()&&f&&this.m_prevNeighbour!==-1&&this.m_nextNeighbour!==-1&&this.checkAndFixIntersection_(this.m_prevNeighbour,this.m_nextNeighbour),this.m_bSweepPointClusterWasModified?(this.m_bSweepPointClusterWasModified=!1,s===null&&(s=new ctt(this.m_shape)),s.setPoint(this.m_sweepPoint),o=this.m_eventQ.searchUpperBound(s)):o=this.m_eventQ.getNext(o)}return this.m_bCracked}setEditShape_(e){this.m_shape=e,this.m_vertexClusterIndex=this.m_shape.createUserIndex(),this.m_edges.setCapacity(e.getSelectedCount()+32),this.m_clusters.setCapacity(e.getSelectedCount()),this.m_clusterVertices.reserveLists(e.getSelectedCount()),this.m_clusterVertices.reserveNodes(e.getSelectedCount()),this.m_edgeVertices.reserveLists(e.getSelectedCount()+32),this.m_edgeVertices.reserveNodes(e.getSelectedCount()+32);for(let i=this.m_shape.getFirstGeometry();i!==ae;i=this.m_shape.getNextGeometry(i))if(bi(this.m_shape.getGeometryType(i)))for(let s=this.m_shape.getFirstPath(i);s!==ae;s=this.m_shape.getNextPath(s)){const n=this.m_shape.getPathSize(s),r=this.m_shape.getFirstVertex(s);if(r===ae)continue;let o=this.m_shape.getNextVertex(r);if(o===ae||o===r)continue;let l=-1;e.selected(r)&&(l=this.newCluster_(r));let c=-1;l!==-1&&e.selected(o)&&(c=this.newEdge_(r),this.addEdgeToCluster(c,l));let f=c;for(let y=0,_=n-2;y<_;y++){const x=this.m_shape.getNextVertex(o);let S=-1;if(this.m_shape.selected(o)){const P=this.newCluster_(o);f!==-1&&this.addEdgeToCluster(f,P),this.m_shape.selected(x)&&(S=this.newEdge_(o),this.addEdgeToCluster(S,P))}f=S,o=x}if(this.m_shape.isClosedPath(s)){const y=this.m_shape.getNextVertex(o);if(this.m_shape.selected(o)){const _=this.newCluster_(o);if(f!==-1&&this.addEdgeToCluster(f,_),this.m_shape.selected(y)){const x=this.newEdge_(o);this.addEdgeToCluster(x,_),this.addEdgeToCluster(x,l)}}}else{let y=-1;this.m_shape.selected(o)&&(y=this.newCluster_(o),f!==-1&&this.addEdgeToCluster(f,y))}}else for(let s=this.m_shape.getFirstPath(i);s!==ae;s=this.m_shape.getNextPath(s)){let n=this.m_shape.getFirstVertex(s);for(let r=0,o=this.m_shape.getPathSize(s);r<o;r++)this.m_shape.selected(n)&&this.newCluster_(n),n=this.m_shape.getNextVertex(n)}this.fillEventQueue()}progress_(e=!1){}dbgCheckSweepStructure_(){}}function htt(t,e,i,s){i>0&&C1e(t,i,e,!1,s),new dtt(s).executeImpl_(t,e)}function vie(t,e,i){return{vertex0:t,vertex1:e,dir:i}}class dtt{constructor(e){this.m_shape=null,this.m_spikes=[],this.m_points=new Ns(0),this.m_pointsIndex=-1,this.m_dissolvedEdges=0,this.m_progressTracker=e}executeImpl_(e,i){if(this.m_shape=e,e.getPathCount(i)<2&&e.getPointCount(i)<6)return;this.m_points.resize(0);for(let _=e.getFirstPath(i);_!==ae;_=e.getNextPath(_)){let x=e.getFirstVertex(_);for(let S=0,P=e.getPathSize(_);S<P;S++,x=e.getNextVertex(x))this.m_points.add(x)}this.m_pointsIndex=e.createUserIndex();for(let _=0,x=this.m_points.size();_<x;++_)e.setUserIndex(this.m_points.read(_),this.m_pointsIndex,_);e.sortVerticesSimpleByY(this.m_points,0,this.m_points.size());let s=this.m_points.read(0);const n=e.getXY(s);let r=1,o=0;const l=[];for(let _=1;_<this.m_points.size();_++){const x=this.m_points.read(_);if(x===ae||e.getUserIndex(x,this.m_pointsIndex)===-1)continue;const S=e.getXY(x);if(S.isEqualPoint2D(n))r++;else{if(r>1){for(let P=o;P<_;P++){const A=this.m_points.read(P);if(e.getUserIndex(A,this.m_pointsIndex)===-1)continue;const k=e.getNextVertex(A),$=e.getPrevVertex(A);if(A!==k&&!e.isEqualXYPoint2D(k,n)){const F=vie(A,k,1);l.push(F)}if(A!==$&&$!==k&&!e.isEqualXYPoint2D($,n)){const F=vie(A,$,-1);l.push(F)}}l.length>0&&this.processBunch_(l,n)}s=x,n.assign(S),r=1,o=_}}if(this.m_dissolvedEdges===0)return e.removeUserIndex(this.m_pointsIndex),void(this.m_pointsIndex=-1);let c=e.getPointCount(i);for(let _=0;_<this.m_points.size();_++){const x=this.m_points.read(_);if(x===ae)continue;if(e.getUserIndex(x,this.m_pointsIndex)!==-1){e.setUserIndex(x,this.m_pointsIndex,-1);continue}const S=e.getPathFromVertex(x);e.getFirstVertex(S)===x&&e.setFirstVertex(S,ae),e.freeVertex(x),this.m_points.write(_,ae),c--}const f=e.createPathUserIndex();let y=e.getPathCount(i);for(let _=0,x=this.m_points.size();_<x;++_){if(this.m_points.read(_)===ae)continue;let S=this.m_points.read(_);if(e.getUserIndex(S,this.m_pointsIndex)!==-1)continue;let P=e.getPathFromVertex(S),A=-1;if(e.getPathUserIndex(P,f)===2){P=ae;for(let G=e.getNextVertex(S);G!==S;G=e.getNextVertex(G)){const V=e.getPathFromVertex(G);if(e.getPathUserIndex(V,f)!==2){P=V,S=G;break}}P===ae&&(P=e.insertPath(i,ae),e.setClosedPath(P,!0),y++),K(P!==ae)}e.setPathUserIndex(P,f,2),A=e.getFirstVertex(P);let k=0,$=!1,F=S;do{A===F&&($=!0),e.setUserIndex(F,this.m_pointsIndex,1);const G=e.getPathFromVertex(F);G!==P&&(e.getPathUserIndex(G,f)!==2&&(e.setPathUserIndex(G,f,1),e.setFirstVertex(G,ae)),e.setPathToVertex(F,P)),k++,F=e.getNextVertex(F)}while(F!==S);$||e.setFirstVertex(P,S),e.setPathSize(P,k)}for(let _=e.getFirstPath(i);_!==ae;){const x=e.getNextPath(_);e.getPathUserIndex(_,f)!==1&&e.getFirstVertex(_)!==ae||(e.removePathOnly(_),y--),_=x}e.setGeometryVertexCount(i,c),e.setGeometryPathCount(i,y),e.removePathUserIndex(f),e.removeUserIndex(this.m_pointsIndex),this.m_pointsIndex=-1,e.dbgVerifyVertexCounts(),e.filterClosePoints(0,!0,!1,!1,i)}processBunch_(e,i){e.sort((l,c)=>{const f=this.m_shape.getXY(l.vertex1).sub(i),y=this.m_shape.getXY(c.vertex1).sub(i),_=Y.compareVectors(f,y);return _===0?l.dir<c.dir?-1:1:_});let s=0;const n=this.m_shape.getXY(e[0].vertex1);let r=1;const o=this.m_shape.hasCurves();for(let l=1,c=e.length;l<c;l++){const f=this.m_shape.getXY(e[l].vertex1);if(!(f.isEqualPoint2D(n)&&(r++,l+1<c))){if(r===2){const y=e[s],_=e[s+1],x=y.dir;if(x!==_.dir){let S=!0;if(o&&(S=!this.m_shape.isCurve(y.dir===1?y.vertex0:y.vertex1)&&!this.m_shape.isCurve(_.dir===1?_.vertex0:_.vertex1)),S){if(x===1){const P=y.vertex0,A=_.vertex0;this.m_shape.setNextVertex(P,A),this.m_shape.setPrevVertex(A,P),this.m_shape.getPrevVertex(P)===A&&(this.m_shape.setUserIndex(P,this.m_pointsIndex,-1),this.m_shape.setUserIndex(A,this.m_pointsIndex,-1));const k=y.vertex1,$=_.vertex1;this.m_shape.setPrevVertex(k,$),this.m_shape.setNextVertex($,k),this.m_shape.getNextVertex(k)===$&&(this.m_shape.setUserIndex(k,this.m_pointsIndex,-1),this.m_shape.setUserIndex($,this.m_pointsIndex,-1))}else{const P=y.vertex0,A=_.vertex0;this.m_shape.setPrevVertex(P,A),this.m_shape.setNextVertex(A,P),this.m_shape.getNextVertex(P)===A&&(this.m_shape.setUserIndex(P,this.m_pointsIndex,-1),this.m_shape.setUserIndex(A,this.m_pointsIndex,-1));const k=y.vertex1,$=_.vertex1;this.m_shape.setNextVertex(k,$),this.m_shape.setPrevVertex($,k),this.m_shape.getPrevVertex(k)===$&&(this.m_shape.setUserIndex(k,this.m_pointsIndex,-1),this.m_shape.setUserIndex($,this.m_pointsIndex,-1))}this.m_dissolvedEdges+=2}}}n.assign(f),s=l,r=1}}e.length=0}}function I1e(t){for(let e=t.getFirstGeometry();e!==ae;e=t.getNextGeometry(e))if(bi(t.getGeometryType(e)))return!0;return!1}function ftt(t,e,i,s){if(!I1e(t))return!1;const n=new xv(s);n.m_shape=t,n.m_tolerance=e,n.m_bTrackChanges=i;let r=!1;const o=t.hasCurves()?5:15;return r=t.getTotalPointCount()<o?n.crackBruteForce_():n.crackerPlaneSweep_(),r}function M1e(t,e,i,s,n){if(!I1e(e))return!1;let r=new xv(n);if(r.m_shape=e,r.m_tolerance=i,r.m_bAllowCoincident=t,r.m_bNeedsNonSimpleResult=s!==null,r.needsCrackingImpl_())return s&&s.assign(r.m_nonSimpleResult),!0;const o=new _i;o.setSwapCoordinates(),e.applyTransformation(o),r=new xv(n),r.m_shape=e,r.m_tolerance=i,r.m_bAllowCoincident=t,r.m_bNeedsNonSimpleResult=s!==null;const l=r.needsCrackingImpl_();return e.applyTransformation(o),!!l&&(s&&s.assign(r.m_nonSimpleResult),!0)}function ptt(t,e,i,s){const n=e.getGeometryType();if(bi(n))return new xv(s).crackAWithBMultiPath_(t,e,i);js("crack_A_with_B")}function _ie(t,e){return{t,index:e}}class xv{crackBruteForce_(){let e=this.crackBruteForceImpl_();if(!e&&this.m_shape.hasCurves()){const i=new _i;i.setSwapCoordinates(),this.m_shape.applyTransformation(i),e=this.crackBruteForceImpl_(),this.m_shape.applyTransformation(i)}return e}crackBruteForceImpl_(){let e=!1;const i=new Qt,s=new Qt,n=xe.constructEmpty(),r=xe.constructEmpty(),o=!1,l=new Ht,c=new dl,f=this.m_shape.getTotalPointCount(),y=f*f*2,_=this.m_shape.queryVertexIteratorOnSelection();for(let x=_.next();x!==ae;x=_.next()){const S=this.m_shape.getGeometryType(_.currentGeometry());let P=1,A=1,k=1,$=0,F=0,G=0;const V=this.m_shape.getSegmentParentage(x);let B=!1,W=!1,J=null,re=!1;if(Ig(S))P=this.m_shape.getWeight(x),$=this.m_shape.getRank(x);else{if(J=this.getSegment_(x,i),J===null)continue;const ue=this.m_shape.getVertexIndex(x);P=this.m_shape.getWeightWithIndex(ue),$=this.m_shape.getRankWithIndex(ue),k=this.m_shape.getSegmentWeightWithIndex(ue),G=this.m_shape.getSegmentRankWithIndex(ue),B=this.m_shape.getSegmentParentageBreakVertex(x);{const ce=this.m_shape.getNextVertex(x);A=this.m_shape.getWeight(ce),F=this.m_shape.getRank(ce),W=this.m_shape.getSegmentParentageBreakVertex(ce)}if(J.queryLooseEnvelope(n),n.inflateCoords(this.m_tolerance,this.m_tolerance),J.isDegenerate(this.m_tolerance)){if(!J.isDegenerate(0))continue;re=!0,J=null}}const se=new UE({copy:_});let oe=se.next();oe!==ae&&(oe=se.next());let pe=0;for(;oe!==ae;oe=se.next()){if(pe!==0){pe--;continue}if(this.m_shape.getTotalPointCount()>y)return e;this.progress_();const ue=this.m_shape.getGeometryType(se.currentGeometry());let ce=null,ne=!1,de=0,Se=0,Pe=0,Re=0,Oe=0,we=0,Fe=!1,it=!1;const vt=this.m_shape.getSegmentParentage(oe);if(Ig(ue))de=this.m_shape.getWeight(oe),Re=this.m_shape.getRank(oe);else{if(ce=this.getSegment_(oe,s),ce===null)continue;const Ct=this.m_shape.getVertexIndex(oe);de=this.m_shape.getWeightWithIndex(Ct),Re=this.m_shape.getRankWithIndex(Ct),Pe=this.m_shape.getSegmentWeightWithIndex(Ct),we=this.m_shape.getSegmentRankWithIndex(Ct),Fe=this.m_shape.getSegmentParentageBreakVertex(oe);{const qt=this.m_shape.getNextVertex(oe);Se=this.m_shape.getWeight(qt),Oe=this.m_shape.getRank(qt),it=this.m_shape.getSegmentParentageBreakVertex(qt)}if(ce.queryLooseEnvelope(r),ce.isDegenerate(this.m_tolerance)){if(!ce.isDegenerate(0))continue;ne=!0,ce=null}}let ot=0,ct=0;if(J!==null&&ce!==null)n.isIntersectingNe(r)&&p7(!0,!0,J,ce,this.m_tolerance,!0)!==0&&(c.pushSegment(J,P,$,A,F,k,G,B,W,V),c.pushSegment(ce,de,Re,Se,Oe,Pe,we,Fe,it,vt),c.intersect2D(this.m_tolerance,!0),e||(e=c.getSegmentChanged(0)||c.getSegmentChanged(1)),ot=c.getResultSegmentCount(0),ct=c.getResultSegmentCount(1),ot+ct>0&&(this.m_shape.splitSegmentWithIntersector(x,c,0,!0,!0),this.m_shape.splitSegmentWithIntersector(oe,c,1,!0,!0),this.m_bTrackChanges&&(c.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(x,!0),c.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(oe,!0))),ct>1&&(pe+=ct-1),c.clear());else if(J!==null){const Ct=this.m_shape.getXY(oe);if(n.contains(Ct)){if(c.pushSegment(J,P,$,A,F,k,G,B,W,V),this.m_shape.queryPoint(oe,l),c.intersect2DEx(this.m_tolerance,l,Re,de,o),e||(e=c.getSegmentChanged(0)||c.getResultPointChanged()),ot=c.getResultSegmentCount(0),ot>0)if(this.m_bTrackChanges&&(c.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(x,!0),c.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(oe,!0)),this.m_shape.splitSegmentWithIntersector(x,c,0,!0,!0),ne){let qt=ae;for(let Lt=this.m_shape.getNextVertex(oe);Lt!==ae&&Lt!==oe&&(ce=this.getSegment_(Lt,s),qt=Lt,ce!=null&&ce.isDegenerate(0));Lt=this.m_shape.getNextVertex(Lt));for(let Lt=oe;Lt!==ae&&(this.m_shape.setPoint(Lt,c.getResultPoint(),!0),Lt!==qt);Lt=this.m_shape.getNextVertex(Lt));}else this.m_shape.setPoint(oe,c.getResultPoint(),!0);c.clear()}}else{if(ce===null)continue;{const Ct=this.m_shape.getXY(x);if(r.inflateCoords(this.m_tolerance,this.m_tolerance),r.contains(Ct)){if(c.pushSegment(ce,de,Re,Se,Oe,Pe,we,Fe,it,vt),this.m_shape.queryPoint(x,l),c.intersect2DEx(this.m_tolerance,l,$,P,o),e||(e=c.getSegmentChanged(0)||c.getResultPointChanged()),ct=c.getResultSegmentCount(0),ct>0)if(this.m_bTrackChanges&&(c.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(oe,!0),c.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(x,!0)),this.m_shape.splitSegmentWithIntersector(oe,c,0,!0,!0),pe+=ct-1,re){let qt=ae;for(let Lt=this.m_shape.getNextVertex(x);Lt!==ae&&Lt!==x&&(ce=this.getSegment_(Lt,s),qt=Lt,ce!=null&&ce.isDegenerate(0));Lt=this.m_shape.getNextVertex(Lt));for(let Lt=x;Lt!==ae&&(this.m_shape.setPoint(Lt,c.getResultPoint(),!0),Lt!==qt);Lt=this.m_shape.getNextVertex(Lt));}else this.m_shape.setPoint(x,c.getResultPoint(),!0);c.clear()}}}if(ot+ct!==0&&ot!==0){let Ct=!1;for(;J=this.getSegment_(x,i),J!=null&&(J.queryEnvelope(n),J.isDegenerate(this.m_tolerance));){if(!(ot>1)){Ct=!0;break}x=_.next(),ot--,K(x!==ae)}if(Ct)break}}}return e}crackerPlaneSweep_(){return this.planesweep_()}planesweep_(){return new Iz(this.m_progressTracker,this.m_bTrackChanges).sweep(this.m_shape,this.m_tolerance)}needsCrackingImpl_(){let e=!1;const i=new Ns(0);i.resize(this.m_shape.getSelectedCount());const s=this.m_shape.queryVertexIteratorOnSelection();for(let _=0,x=s.next();x!==ae;++_,x=s.next())i.write(_,x);this.m_shape.sortVerticesSimpleByY(i,0,i.size()),i.add(ae);const n=this.m_shape.createUserIndex(),r=this.m_shape.createUserIndex();this.m_sweepComparator=new S1e(this.m_shape,this.m_tolerance,!this.m_bAllowCoincident),this.m_sweepStructure.setComparator(this.m_sweepComparator);let o=null;const l=[],c=[];let f=0;const y=new Y;for(let _=i.read(f++);_!==ae;){this.m_shape.queryXY(_,y);let x=!1;do{let $=this.m_shape.getNextVertex(_),F=this.m_shape.getPrevVertex(_);x||(x=$!==ae||F!==ae),$===ae||this.m_shape.selected($)||($=ae),F===ae||this.m_shape.selected(F)||(F=ae),$!==ae&&this.m_shape.compareVerticesSimpleY(_,$)<0&&(c.push(_),c.push($)),F!==ae&&this.m_shape.compareVerticesSimpleY(_,F)<0&&(c.push(F),c.push(F));const G=this.m_shape.getUserIndex(_,n);G!==-1&&(l.push(G),this.m_shape.setUserIndex(_,n,-1));const V=this.m_shape.getUserIndex(_,r);V!==-1&&(l.push(V),this.m_shape.setUserIndex(_,r,-1)),_=i.read(f++)}while(_!==ae&&this.m_shape.isEqualXYPoint2D(_,y));if(!x&&(o===null&&(o=new E1e(this.m_shape,this.m_tolerance)),o.setPoint(y),this.m_sweepStructure.searchUpperBound(o),o.intersectionDetected())){e=!0,this.m_bNeedsNonSimpleResult&&(K(0),this.m_nonSimpleResult=new xs(6,-1,-1));break}let S=l.length===1&&c.length===2;l.length>32&&Ix(l);let A=-1,k=-1;if(!S)for(let $=0,F=l.length;$<F;$++){const G=l[$],V=this.m_sweepStructure.getPrev(G);if(V!==-1&&l.indexOf(V)===-1)if(A===-1)A=V;else{if(e=!0,!this.m_bNeedsNonSimpleResult)break;this.m_nonSimpleResult=new xs(6,-1,-1)}const B=this.m_sweepStructure.getNext(G);if(B!==-1&&l.indexOf(B)===-1)if(k===-1)k=B;else{if(e=!0,!this.m_bNeedsNonSimpleResult)break;this.m_nonSimpleResult=new xs(6,-1,-1)}if(A!==-1&&k!==-1)break}if(e&&!this.m_bNeedsNonSimpleResult)break;if(this.m_sweepComparator.setSweepY(y.y,y.x),!S){for(let $=0,F=l.length;$<F;$++){const G=l[$];this.m_sweepStructure.deleteNode(G)}l.length=0}if(!S&&A!==-1&&k!==-1&&this.checkForIntersections_(A,k)){e=!0,this.m_bNeedsNonSimpleResult&&(this.m_nonSimpleResult=this.m_sweepComparator.getResult());break}for(let $=0,F=c.length;$<F;$+=2){const G=c[$],V=c[$+1];let B;if(S?(B=this.m_sweepStructure.replaceElementAtPosition(l[0],G,!0,!0),l.length=0,S=!1):B=this.m_sweepStructure.addElement(G),this.m_sweepComparator.intersectionDetected()){this.m_bNeedsNonSimpleResult&&(this.m_nonSimpleResult=this.m_sweepComparator.getResult()),e=!0;break}this.m_shape.getUserIndex(V,n)===-1?this.m_shape.setUserIndex(V,n,B):this.m_shape.setUserIndex(V,r,B)}if(e)break;c.length=0}return this.m_shape.removeUserIndex(n),this.m_shape.removeUserIndex(r),e}checkForIntersections_(e,i){const s=this.m_sweepStructure.getElement(e);this.m_sweepComparator.compare(this.m_sweepStructure,s,i);const n=this.m_sweepComparator.intersectionDetected();return this.m_sweepComparator.clearIntersectionDetectedFlag(),n}getSegment_(e,i){return xv.st_getSegment(this.m_shape,e,i)}static st_getSegment(e,i,s){return e.querySegment(i,s,!1,!1)?s.get():null}dbgPrintSweepEdge(e){}dbgPrintSweepStructure(){}dbgSaveSweepStructure(e=null){}dbgCheckSweepStructure(){}progress_(e=!1){this.m_progressCounter++}crackAWithBMultiPath_(e,i,s){const n=xe.constructEmpty();e.queryLooseEnvelope(n);const r=xe.constructEmpty();if(i.queryLooseEnvelope(r),r.inflateCoords(s,s),!r.isIntersecting(n))return e;const o=e.getImpl(),l=o.getAccelerators();let c=null,f=null;l&&(f=l.getQuadTree()),mtt(e,CE(i))&&(c=z2(o,r),f=c);const y=f?f.getIteratorForQT():null,_=i.querySegmentIterator(),x=e.querySegmentIterator(),S=new Array(15),P=[];for(;_.nextPath();)for(;_.hasNextSegment();){const V=_.nextSegment();if(f){y.resetIterator(V,s);for(let B=y.next();B!==-1;B=y.next()){this.progress_();const W=f.getElement(B);if(x.resetToVertex(W,-1),x.hasNextSegment()){const J=x.nextSegment().intersect(V,null,S,null,s);for(let re=0;re<J;re++){const se=S[re];if(se===0||se===1)continue;const oe=_ie(se,x.getStartPointIndex());P.push(oe)}}}}else{const B=xe.constructEmpty();if(V.queryLooseEnvelope(B),B.inflateCoords(s,s),!n.isIntersecting(B))continue;for(x.resetToFirstPath();x.nextPath();)for(;x.hasNextSegment();){const W=x.nextSegment(),J=xe.constructEmpty();if(W.queryLooseEnvelope(J),!J.isIntersecting(B))continue;const re=W.intersect(V,null,S,null,s);for(let se=0;se<re;se++){const oe=S[se];if(oe===0||oe===1)continue;const pe=_ie(oe,x.getStartPointIndex());P.push(pe)}}}}if(P.length===0)return e;P.sort((V,B)=>V.index<B.index?-1:V.index>B.index?1:V.t<B.t?-1:V.t>B.t?1:0);const A=e.createInstance();for(A.getGeometryType()===me.enumPolygon&&A.setFillRule(e.getFillRule()),x.resetToFirstPath();x.nextPath()&&!x.hasNextSegment(););K(x.hasNextSegment());let k=x.nextSegment();const $=new Qt;let F=-1;for(let V=0,B=P.length;V<B;){const W=P[V].index;let J=V+1;for(;J<B&&P[J].index===W;)++J;for(;x.getStartPointIndex()<W;){this.progress_();const oe=x.hasNextSegment(),pe=x.getPathIndex();if((oe||!x.isClosingSegment()||x.isCurve())&&(K(k!==null),A.addSegment(k,F!==pe)),F=pe,!oe){for(x.isPathClosed();x.nextPath()&&!x.hasNextSegment(););K(x.hasNextSegment())}k=x.nextSegment()}let re=0;for(let oe=V;oe<J;oe++){const pe=P[oe].t;if(pe===re)continue;K(k!==null),k.queryCut(re,pe,$),re=pe;const ue=x.getPathIndex();A.addSegment($.get(),F!==ue),F=ue}const se=x.hasNextSegment();if((se||!x.isClosingSegment()||x.isCurve())&&(K(k!=null),k.queryCut(re,1,$),A.addSegment($.get(),!1)),se)k=x.nextSegment();else{for(;x.nextPath()&&!x.hasNextSegment(););k=x.hasNextSegment()?x.nextSegment():null}V=J}if(k!==null){const V=x.getPathIndex();(x.hasNextSegment()||!x.isClosingSegment()||x.isCurve())&&A.addSegment(k,F!==V),F=V}let G=x.hasNextSegment();for(;;){if(!G){for(;x.nextPath()&&(G=x.hasNextSegment(),!G););if(!G)break}k=x.nextSegment();const V=x.getPathIndex();G=x.hasNextSegment(),(G||!x.isClosingSegment()||x.isCurve())&&A.addSegment(k,F!==V),F=V}return A}constructor(e){this.m_shape=null,this.m_progressTracker=null,this.m_nonSimpleResult=new xs,this.m_tolerance=0,this.m_sweepComparator=null,this.m_progressCounter=0,this.m_bTrackChanges=!1,this.m_bNeedsNonSimpleResult=!1,this.m_bAllowCoincident=!0,this.m_sweepStructure=new Gt,this.m_progressTracker=e}}function mtt(t,e){const i=t.getPointCount();return i<16?!1:2*i+1*(Math.log(i)/Math.log(2))*e<1*i*e}xv.s_bForceBruteForce=!0;class A1e{constructor(e,i){this.m_monotoneParts=Ge(Qt,16),this.m_xOrds=Vi(16,Number.NaN),this.m_inputPoint=Y.getNAN(),this.m_miny=0,this.m_maxy=0,this.m_windnum=0,this.m_bAlternate=e,this.m_tolerance=i,this.m_toleranceSqr=i*i,this.m_bTestBorder=!!i,this.m_bBreak=!1}_DoOne(e){if(!this.m_bTestBorder&&(this.m_bAlternate&&this.m_inputPoint.equals(e.getStartXY())||this.m_inputPoint.equals(e.getEndXY())))return void(this.m_bBreak=!0);if(e.getStartY()===this.m_inputPoint.y&&e.getStartY()===e.getEndY()){if(this.m_bAlternate&&!this.m_bTestBorder){const n=Math.min(e.getStartX(),e.getEndX()),r=Math.max(e.getStartX(),e.getEndX());this.m_inputPoint.x>n&&this.m_inputPoint.x<r&&(this.m_bBreak=!0)}return}let i=!1;const s=Math.max(e.getStartX(),e.getEndX());if(this.m_inputPoint.x>s)i=!0;else if(this.m_inputPoint.x>=Math.min(e.getStartX(),e.getEndX())){const n=e.intersectionOfYMonotonicWithAxisX(this.m_inputPoint.y,s);i=!Number.isNaN(n)&&n<=this.m_inputPoint.x}if(i){if(this.m_inputPoint.y===e.getStartY()){if(this.m_inputPoint.y<e.getEndY())return}else if(this.m_inputPoint.y===e.getEndY()&&this.m_inputPoint.y<e.getStartY())return;this.m_bAlternate?this.m_windnum^=1:this.m_windnum+=e.getStartY()>e.getEndY()?1:-1}}_Result(){return!!this.m_windnum}testBorder(e){const i=e.getClosestCoordinate(this.m_inputPoint,!1),s=e.getCoord2D(i);return Y.sqrDistance(s,this.m_inputPoint)<=this.m_toleranceSqr}setInputPoint(e){this.m_inputPoint.setCoordsPoint2D(e),this.m_miny=e.y-this.m_tolerance,this.m_maxy=e.y+this.m_tolerance}processSegment(e){const i=e.queryInterval(0,1);if(i.vmin>this.m_maxy||i.vmax<this.m_miny)return!1;if(this.m_bTestBorder&&this.testBorder(e))return!0;if(i.vmin>this.m_inputPoint.y||i.vmax<this.m_inputPoint.y)return!1;let s=0;if(e.isCurve()&&(this.m_monotoneParts.length===0&&(this.m_monotoneParts.length=128),s=e.getMonotonicParts(this.m_monotoneParts,!0),K(this.m_monotoneParts.length>=s)),s>0)for(let n=0;n<s;n++){const r=this.m_monotoneParts[n].get(),o=Ze.construct(r.getStartY(),r.getEndY());if(!(o.vmin>this.m_inputPoint.y||o.vmax<this.m_inputPoint.y)&&(this._DoOne(r),this.m_bBreak))return!0}else if(this._DoOne(e),this.m_bBreak)return!0;return!1}result(){return K(0),2}}function gtt(t,e,i,s){const n=new xe;t.queryLooseEnvelope(n),n.inflateCoords(s,s);const r=t.getFillRule()===0,o=new A1e(r,s);o.setInputPoint(i);const l=n.clone();l.xmax=i.x+s,l.ymin=i.y-s,l.ymax=i.y+s;const c=t.getImpl().querySegmentIterator(),f=e.getIterator(l,s);for(let y=f.next();y!==-1;y=f.next())if(c.resetToVertex(e.getElement(y),-1),c.hasNextSegment()){const _=c.nextSegment();if(o.processSegment(_))return-1}return o._Result()?1:0}function ytt(t,e,i){const s=t.getFillRule()===0,n=new A1e(s,i);n.setInputPoint(e);const r=t.getImpl().querySegmentIterator();for(;r.nextPath();)for(;r.hasNextSegment();){const o=r.nextSegment();if(n.processSegment(o))return-1}return n._Result()?1:0}function vtt(t,e,i){return e.isEmpty()?0:q6(t,e.getXY(),i)}function q6(t,e,i){if(t.isEmpty())return 0;const s=xe.constructEmpty();if(t.queryLooseEnvelope(s),s.inflateCoords(i,i),!s.contains(e))return 0;const n=t.getImpl().getAccelerators();if(n){n.getRasterizedGeometry()&&K(0);const r=n.getQuadTree();if(r)return gtt(t,r,e,i)}return ytt(t,e,i)}function Ag(t,e){const i=t.getPointCount();return i<16?!1:2*i+1*(Math.log(i)/Math.log(2))*e<1*i*e}function _tt(t,e,i,s,n){const r=new wtt(n);return r.m_shape=t,r.m_geometry=e,r.m_sortedVertices=i,r.m_bFixSelfTangency=s,r.fixRingOrientation_()}class btt{getDirection_(e){return this.m_shape.getNextVertex(this.getEnd1(e))===this.getEnd2(e)}getEnd_(e){const i=this.getEnd1(e),s=this.getEnd2(e);return this.m_shape.getNextVertex(i)===s?s:i}constructor(e){this.m_end1Nodes=[],this.m_end2Nodes=[],this.m_directions=[],this.m_shape=e,this.m_firstFree=-1}getSegment(e){return this.m_shape.getSegment(this.getStart(e))}isBottomUp(e){let i=this.getEnd1(e),s=this.getEnd2(e);this.m_shape.getPrevVertex(i)===s&&(s=St(i,i=s));const n=Y.getNAN(),r=Y.getNAN();return this.m_shape.queryXY(i,n),this.m_shape.queryXY(s,r),K(!n.equals(r)),n.y<r.y}getStart(e){const i=this.getEnd1(e),s=this.getEnd2(e);return this.m_shape.getNextVertex(i)===s?i:s}getEnd1(e){return this.m_end1Nodes[e]}getEnd2(e){return this.m_end2Nodes[e]}freeEdge(e){this.m_end1Nodes[e]=this.m_firstFree,this.m_firstFree=e}newEdge(e){if(this.m_firstFree!==-1){const s=this.m_firstFree;return this.m_firstFree=this.m_end1Nodes[s],this.m_end1Nodes[s]=e,this.m_end2Nodes[s]=this.m_shape.getNextVertex(e),s}const i=this.m_end1Nodes.length;return this.m_end1Nodes.push(e),this.m_end2Nodes.push(this.m_shape.getNextVertex(e)),i}getShape(){return this.m_shape}getPath(e){return this.m_shape.getPathFromVertex(this.getEnd1(e))}}let xtt=class extends zv{constructor(t){super(),this.m_line1=new si,this.m_line2=new si,this.m_leftElm=-1,this.m_leftx=0,this.m_seg1=null,this.m_helper=t}compare(t,e,i){const s=t.getElement(i),n=this.m_helper.m_edges;let r;this.m_leftElm===e?r=this.m_leftx:(this.m_seg1=n.getSegment(e),this.m_seg1?r=this.m_seg1.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0):(n.getShape().queryLineConnector(n.getStart(e),this.m_line1,!0),this.m_seg1=this.m_line1,r=this.m_line1.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0)),this.m_leftx=r,this.m_leftElm=e);let o,l=n.getSegment(s);if(l?o=l.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0):(n.getShape().queryLineConnector(n.getStart(s),this.m_line2,!0),l=this.m_line2,o=this.m_line2.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0)),r===o){const c=n.isBottomUp(e),f=n.isBottomUp(s),y=c?this.m_seg1.getEndY():this.m_seg1.getStartY(),_=f?l.getEndY():l.getStartY(),x=Math.min(y,_);let S=.5*(x+this.m_helper.m_yScanline);S===this.m_helper.m_yScanline&&(S=x),r=this.m_seg1.intersectionOfYMonotonicWithAxisX(S,0),o=l.intersectionOfYMonotonicWithAxisX(S,0),r===o&&JF("")}return r<o?-1:r>o?1:0}reset(){this.m_leftElm=-1}};class bie{constructor(e){this.m_node=-1,this.m_index=0,this.m_sortedVertices=e.m_sortedVertices,this.m_sortedVerticesArray=e.m_sortedVerticesArray,this.m_sortedVertices&&(this.m_node=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList()))}next(){if(this.m_sortedVertices){const e=this.m_node;if(e===-1)return ae;const i=this.m_sortedVertices.getData(e);return this.m_node=this.m_sortedVertices.getNext(e),i}if(this.m_index<this.m_sortedVerticesArray.size()){const e=this.m_sortedVerticesArray.read(this.m_index);return this.m_index++,e}return ae}}class wtt{constructor(e){this.m_edges=null,this.m_shape=null,this.m_AET=new Gt,this.m_yScanline=0,this.m_geometry=ae,this.m_unknownRingOrientationCount=-1,this.m_sortedVertices=null,this.m_sortedVerticesArray=null,this.m_unknownNodes=[],this.m_node1UserIndex=-1,this.m_node2UserIndex=-1,this.m_pathOrientationIndex=-1,this.m_pathParentageIndex=-1,this.m_pathParentsIndex=-1,this.m_progressCounter=0,this.m_bFixSelfTangency=!1,this.m_progressTracker=e,this.m_AET.disableBalancing(),this.m_sweepComparator=new xtt(this),this.m_AET.setComparator(this.m_sweepComparator)}fixRingOrientation_(){const e=this.fixRingOrientationImplMain_();return this.m_pathOrientationIndex===-1||this.fixRingOrientationImplSimplify_(),e}fixRingOrientationForMp2sp_(){return this.fixRingOrientationImplMain_(),this.m_pathOrientationIndex===-1?-1:this.fixRingOrientationImplMp2sp_()}processBunchForRingOrientationTest_(e){return this.processBunchForRingOrientationTestOddEven_(e)}processBunchForRingOrientationTestOddEven_(e){let i=!1;if(this.m_edges||(this.m_edges=new btt(this.m_shape)),this.m_unknownNodes.length=0,this.processBunchForRingOrientationRemoveEdges_(e),!this.m_AET.isAutoBalancing()){let s=0;for(let n=0,r=e.length;n<r;n++)e[n]!==-1&&s++;(s>10||this.m_AET.getMaxDepthEver()>4)&&this.m_AET.enableBalancing()}for(let s=0,n=e.length;s<n;s++){const r=e[s];r!==ae&&this.insertEdge_(r,-1)}for(let s=0;s<this.m_unknownNodes.length&&this.m_unknownRingOrientationCount>0;s++){const n=this.m_unknownNodes[s],r=this.m_AET.getElement(n),o=this.m_edges.getPath(r),l=this.m_shape.getPathUserIndex(o,this.m_pathOrientationIndex);let c=ae;if(l===0){let f=this.m_AET.getPrev(n),y=n,_=!1;for(;f!==Gt.st_nullNode();){const x=this.m_AET.getElement(f),S=this.m_edges.getPath(x);if(this.m_shape.getPathUserIndex(S,this.m_pathOrientationIndex)!==0){c=S;break}y=f,f=this.m_AET.getPrev(f)}if(f===Gt.st_nullNode())_=!0,f=y;else{const x=this.m_AET.getElement(f);_=this.m_edges.isBottomUp(x),f=this.m_AET.getNext(f),_=!_}do{const x=this.m_AET.getElement(f),S=this.m_edges.getPath(x);if(this.m_shape.getPathUserIndex(S,this.m_pathOrientationIndex)===0){if(_!==this.m_edges.isBottomUp(x)){const P=this.m_shape.getFirstVertex(S);this.m_shape.reverseRingInternal(P),this.m_shape.setLastVertex(S,this.m_shape.getPrevVertex(P)),i=!0}if(this.m_shape.setPathUserIndex(S,this.m_pathOrientationIndex,_?3:2),!_){let P=this.m_shape.getPathUserIndex(c,this.m_pathOrientationIndex);P===2&&(c=this.m_shape.getPathUserIndex(c,this.m_pathParentsIndex),P=this.m_shape.getPathUserIndex(c,this.m_pathOrientationIndex)),K(P===3);const A=this.m_shape.getPathUserIndex(c,this.m_pathParentageIndex);this.m_shape.setPathUserIndex(c,this.m_pathParentageIndex,S),this.m_shape.setPathUserIndex(S,this.m_pathParentageIndex,A),this.m_shape.setPathUserIndex(S,this.m_pathParentsIndex,c)}if(this.m_unknownRingOrientationCount--,!this.m_unknownRingOrientationCount)return i}c=S,y=f,f=this.m_AET.getNext(f),_=!_}while(y!==n)}}return i}processBunchForRingOrientationRemoveEdges_(e){for(let i=0,s=e.length;i<s;i++){const n=e[i],r=this.m_shape.getUserIndex(n,this.m_node1UserIndex),o=this.m_shape.getUserIndex(n,this.m_node2UserIndex);if(r!==-1){const c=this.m_AET.getElement(r);this.m_edges.freeEdge(c),this.m_shape.setUserIndex(n,this.m_node1UserIndex,-1)}if(o!==-1){const c=this.m_AET.getElement(o);this.m_edges.freeEdge(c),this.m_shape.setUserIndex(n,this.m_node2UserIndex,-1)}let l=-1;r!==-1&&o!==-1?(this.m_AET.deleteNode(r),this.m_AET.deleteNode(o),e[i]=ae):l=r!==-1?r:o,l!==-1&&(this.insertEdge_(n,l)||this.m_AET.deleteNode(l),e[i]=ae)}}dbgVerifyRingOrientation_(){}insertEdge_(e,i){const s=Y.getNAN(),n=Y.getNAN();this.m_shape.queryXY(e,s);const r=this.m_shape.getNextVertex(e);this.m_shape.queryXY(r,n);let o=!1;if(s.y<n.y){o=!0;const c=this.m_edges.newEdge(e);let f;i===-1?f=this.m_AET.addElement(c):(f=i,this.m_AET.setElement(f,c)),this.m_shape.getUserIndex(r,this.m_node1UserIndex)===-1?this.m_shape.setUserIndex(r,this.m_node1UserIndex,f):this.m_shape.setUserIndex(r,this.m_node2UserIndex,f);const y=this.m_shape.getPathFromVertex(e);this.m_shape.getPathUserIndex(y,this.m_pathOrientationIndex)===0&&this.m_unknownNodes.push(f)}const l=this.m_shape.getPrevVertex(e);if(this.m_shape.queryXY(l,n),s.y<n.y){o=!0;const c=this.m_edges.newEdge(l);let f;i===-1?f=this.m_AET.addElement(c):(f=i,this.m_AET.setElement(f,c)),this.m_shape.getUserIndex(l,this.m_node1UserIndex)===-1?this.m_shape.setUserIndex(l,this.m_node1UserIndex,f):this.m_shape.setUserIndex(l,this.m_node2UserIndex,f);const y=this.m_shape.getPathFromVertex(e);this.m_shape.getPathUserIndex(y,this.m_pathOrientationIndex)===0&&this.m_unknownNodes.push(f)}return o}fixRingSelfTangency_(){const e=[],i=[];let s=-1,n=-1;const r=new Y;let o=ae,l=ae,c=-1;const f=new bie(this);for(let y=f.next();y!==ae;y=f.next()){const _=new Y;this.m_shape.queryXY(y,_);const x=this.m_shape.getPathFromVertex(y);r.equals(_)&&l===x?(n===-1&&(s=this.m_shape.createPathUserIndex(),this.m_shape.fillPathUserIndexForGeometry(this.m_geometry,s,-1),n=this.m_shape.createUserIndex(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,n,-1)),c===-1&&(c=i.length,this.m_shape.setUserIndex(o,n,c),i.push(1),this.m_shape.getPathUserIndex(x,s)===-1&&(this.m_shape.setPathUserIndex(x,s,o),e.push(x))),this.m_shape.setUserIndex(y,n,c),i[i.length-1]++):(c=-1,r.assign(_)),o=y,l=x}if(e.length===0)return!1;K(s!==-1);for(let y=0,_=e.length;y<_;y++){const x=e[y];let S=this.m_shape.getPathUserIndex(x,s);const P=this.m_shape.getUserIndex(S,n),A=[],k=[];A.push(S),k.push(P);for(let $=this.m_shape.getNextVertex(S);$!==S;$=this.m_shape.getNextVertex($)){const F=$,G=this.m_shape.getUserIndex(F,n);if(G!==-1){if(k.length===0){k.push(G),A.push(F);continue}if(k.at(-1)===G){const V=A.at(-1);this.m_shape.peelALoopIntoAPath(V,F),this.m_shape.setUserIndex($,n,-1),i[G]--,i[G]===1&&(i[G]=0,k.pop(),A.pop()),S=V,$=V}else A.push($),k.push(G)}}}return this.m_shape.removePathUserIndex(s),this.m_shape.removeUserIndex(n),this.m_shape.dbgVerifyVertexCounts(),!0}progress_(e=!1){}fixRingOrientationImplMain_(){const e={stack:[],error:void 0,hasError:!1};try{let i,s=!1;const n=Wl(e,XA(()=>{this.m_sortedVerticesArray=null}),!1);if(this.m_sortedVertices===null){const c=this.m_shape.getPointCount(this.m_geometry);i=new Ns(0);for(let f=this.m_shape.getFirstPath(this.m_geometry);f!==ae;f=this.m_shape.getNextPath(f)){let y=this.m_shape.getFirstVertex(f);for(let _=0,x=this.m_shape.getPathSize(f);_<x;_++)i.add(y),y=this.m_shape.getNextVertex(y)}this.m_shape.sortVerticesSimpleByY(i,0,c),this.progress_(!0),this.m_sortedVerticesArray=i}else n.bForget=!0;if(this.m_bFixSelfTangency&&(s=this.fixRingSelfTangency_()),this.m_shape.getPathCount(this.m_geometry)===1){const c=this.m_shape.getFirstPath(this.m_geometry),f=this.m_shape.getRingArea(c);if(this.m_shape.setExterior(c,!0),f<0){const y=this.m_shape.getFirstVertex(c);return this.m_shape.reverseRingInternal(y),this.m_shape.setLastVertex(c,this.m_shape.getPrevVertex(y)),!0}return!1}this.m_shape.dbgVerifyCurves(),this.m_pathOrientationIndex=this.m_shape.createPathUserIndex(),this.m_pathParentageIndex=this.m_shape.createPathUserIndex(),this.m_pathParentsIndex=this.m_shape.createPathUserIndex();for(let c=this.m_shape.getFirstPath(this.m_geometry);c!==ae;c=this.m_shape.getNextPath(c))this.m_shape.setPathUserIndex(c,this.m_pathOrientationIndex,0),this.m_shape.setPathUserIndex(c,this.m_pathParentageIndex,-1),this.m_shape.setPathUserIndex(c,this.m_pathParentsIndex,-1);const r=[];this.m_yScanline=Number.NaN;const o=Y.getNAN();this.m_unknownRingOrientationCount=this.m_shape.getPathCount(this.m_geometry),this.m_node1UserIndex=this.m_shape.createUserIndexUninitialized(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,this.m_node1UserIndex,-1),this.m_node2UserIndex=this.m_shape.createUserIndexUninitialized(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,this.m_node2UserIndex,-1);const l=new bie(this);for(let c=l.next();c!==ae&&(this.progress_(),this.m_shape.queryXY(c,o),o.y!==this.m_yScanline&&r.length&&(s=this.processBunchForRingOrientationTest_(r)||s,this.m_sweepComparator.reset(),r.length=0),r.push(c),this.m_yScanline=o.y,this.m_unknownRingOrientationCount!==0);c=l.next());return this.m_unknownRingOrientationCount>0&&(s=this.processBunchForRingOrientationTest_(r)||s,r.length=0),this.m_shape.removeUserIndex(this.m_node1UserIndex),this.m_shape.removeUserIndex(this.m_node2UserIndex),this.dbgVerifyRingOrientation_(),s}catch(i){e.error=i,e.hasError=!0}finally{om(e)}}fixRingOrientationImplSimplify_(){const e=[];for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;)if(this.progress_(),this.m_shape.getPathUserIndex(i,this.m_pathOrientationIndex)===3){this.m_shape.setExterior(i,!0);for(let r=this.m_shape.getPathUserIndex(i,this.m_pathParentageIndex);r!==ae;){const o=this.m_shape.getPathUserIndex(r,this.m_pathParentageIndex);e.push(r),this.m_shape.setExterior(r,!1),this.m_shape.setPathUserIndex(r,this.m_pathParentageIndex,i),r=o}let s=i,n=e.length;for(let r=this.m_shape.getNextPath(i);n>0&&r!==ae;r=this.m_shape.getNextPath(r),--n){if(this.m_shape.getPathUserIndex(r,this.m_pathParentageIndex)!==i){s=ae;break}s=r}if(n!==0){s=i;for(let r=0,o=e.length;r<o;r++){const l=e[r];this.m_shape.setPathUserIndex(l,this.m_pathParentageIndex,$b),this.m_shape.movePath(this.m_geometry,this.m_shape.getNextPath(s),l),s=l}}e.length=0,i=this.m_shape.getNextPath(s)}else i=this.m_shape.getNextPath(i);this.m_shape.removePathUserIndex(this.m_pathOrientationIndex),this.m_shape.removePathUserIndex(this.m_pathParentageIndex),this.m_shape.removePathUserIndex(this.m_pathParentsIndex)}fixRingOrientationImplMp2sp_(){const e=this.m_shape.createPathUserIndex();let i=0;const s=[];for(let n=this.m_shape.getFirstPath(this.m_geometry);n!==ae;)if(this.progress_(),this.m_shape.getPathUserIndex(n,this.m_pathOrientationIndex)===3){this.m_shape.setExterior(n,!0),this.m_shape.setPathUserIndex(n,e,i),i++;for(let c=this.m_shape.getPathUserIndex(n,this.m_pathParentageIndex);c!==ae;){const f=this.m_shape.getPathUserIndex(c,this.m_pathParentageIndex);s.push(c),this.m_shape.setExterior(c,!1),this.m_shape.setPathUserIndex(c,this.m_pathParentageIndex,n),c=f}let r=n,o=s.length,l=i;for(let c=this.m_shape.getNextPath(n);o>0&&c!==ae;c=this.m_shape.getNextPath(c),--o){if(this.m_shape.getPathUserIndex(c,this.m_pathParentageIndex)!==n){r=ae;break}r=c,this.m_shape.setPathUserIndex(c,e,-l),l++}if(o!==0){r=n,l=i;for(let c=0,f=s.length;c<f;c++){const y=s[c];this.m_shape.setPathUserIndex(y,e,-l),l++,this.m_shape.setPathUserIndex(y,this.m_pathParentageIndex,$b)}r=n}i=l,s.length=0,n=this.m_shape.getNextPath(r)}else n=this.m_shape.getNextPath(n);return this.m_shape.removePathUserIndex(this.m_pathOrientationIndex),this.m_shape.removePathUserIndex(this.m_pathParentageIndex),this.m_shape.removePathUserIndex(this.m_pathParentsIndex),e}}function tg(t,e,i,s,n,r){const o=new Stt(r);return o.m_shape=t,o.m_geometry=e,o.m_knownSimpleResult=i,o.m_bFixSelfTangency=s,o.m_polylineDegeneracies=n,o.m_bHasSegmentParentage=t.hasSegmentParentage(),o.m_bHasSegments=t.hasCurves(),o.simplify_()}class Stt{constructor(e){this.m_shape=null,this.m_geometry=ae,this.m_sortedVertices=new eo,this.m_bunchEdgeEndPoints=[],this.m_bunchEdgeCenterPoints=[],this.m_bunchEdgeIndices=[],this.m_knownSimpleResult=-1,this.m_sortedVerticesListIndex=-1,this.m_polylineDegeneracies=ae,this.m_userIndexSortedIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=-1,this.m_nextVertexToProcess=-1,this.m_firstCoincidentVertex=-1,this.m_progressCounter=0,this.m_bFixSelfTangency=!1,this.m_bHasSegmentParentage=!1,this.m_bHasSegments=!1,this.m_progressTracker=e}compareAngles_(e,i){if(this.m_bHasSegments)return this.compareAnglesCurves_(e,i);const s=this.m_bunchEdgeEndPoints[e],n=new Y;this.m_shape.queryXY(s,n);const r=new Y,o=this.m_bunchEdgeEndPoints[i];if(this.m_shape.queryXY(o,r),n.equals(r))return 0;const l=this.m_bunchEdgeCenterPoints[e],c=new Y;this.m_shape.queryXY(l,c);const f=this.m_bunchEdgeCenterPoints[i],y=new Y;this.m_shape.queryXY(f,y);const _=new Y;_.setSub(n,c);const x=new Y;return x.setSub(r,y),(_.isZero()||x.isZero())&&JF(""),Y.compareVectors(_,x)}compareAnglesCurves_(e,i){const s=this.m_bunchEdgeEndPoints[e],n=this.m_bunchEdgeEndPoints[i],r=this.m_bunchEdgeCenterPoints[e],o=this.m_bunchEdgeCenterPoints[i],l=this.m_shape.getNextVertex(r)===s,c=this.m_shape.getNextVertex(o)===n,f=new Qt,y=new Y;l?(this.m_shape.querySegment(r,f,!1,!0),y.assign(f.get().getTangent(0))):(this.m_shape.querySegment(s,f,!1,!0),y.assign(f.get().getTangent(1)),y.negateThis());const _=new Y;return c?(this.m_shape.querySegment(o,f,!1,!0),_.assign(f.get().getTangent(0))):(this.m_shape.querySegment(n,f,!1,!0),_.assign(f.get().getTangent(1)),_.negateThis()),(y.isZero()||_.isZero())&&JF(""),Y.compareVectors(y,_)}beforeRemoveVertex_(e,i){const s=this.m_shape.getUserIndex(e,this.m_userIndexSortedIndexToVertex);if(this.m_nextVertexToProcess===s&&(this.m_nextVertexToProcess=this.m_sortedVertices.getNext(this.m_nextVertexToProcess)),this.m_firstCoincidentVertex===s&&(this.m_firstCoincidentVertex=this.m_sortedVertices.getNext(this.m_firstCoincidentVertex)),this.m_sortedVertices.deleteElement(this.m_sortedVerticesListIndex,s),this.removeAngleSortInfo_(e),i){const n=this.m_shape.getPathFromVertex(e);if(n!==ae&&this.m_shape.getFirstVertex(n)===e){const r=this.m_shape.getNextVertex(e);if(r!==e){if(this.m_shape.getPathFromVertex(r)===n)return void this.m_shape.setFirstVertex(n,r);{const o=this.m_shape.getPrevVertex(e);if(o!==e&&this.m_shape.getPathFromVertex(o)===n)return void this.m_shape.setFirstVertex(n,o)}}this.m_shape.setFirstVertex(n,ae),this.m_shape.setLastVertex(n,ae)}}}processBunch_(){let e=!1;const i=new Y(0,0);for(;;){this.m_bunchEdgeEndPoints.length=0,this.m_bunchEdgeCenterPoints.length=0,this.m_bunchEdgeIndices.length=0;let s=this.m_firstCoincidentVertex,n=0,r=!0;for(;s!==this.m_nextVertexToProcess;){const l=this.m_sortedVertices.getData(s);r&&(this.m_shape.queryXY(l,i),r=!1);const c=this.m_shape.getPrevVertex(l),f=this.m_shape.getNextVertex(l);this.m_shape.getUserIndex(c,this.m_userIndexSortedAngleIndexToVertex)!==$b&&(this.m_bunchEdgeEndPoints.push(c),this.m_shape.setUserIndex(c,this.m_userIndexSortedAngleIndexToVertex,$b),this.m_bunchEdgeCenterPoints.push(l),this.m_bunchEdgeIndices.push(n++)),this.m_shape.getUserIndex(f,this.m_userIndexSortedAngleIndexToVertex)!==$b&&(this.m_bunchEdgeEndPoints.push(f),this.m_shape.setUserIndex(f,this.m_userIndexSortedAngleIndexToVertex,$b),this.m_bunchEdgeCenterPoints.push(l),this.m_bunchEdgeIndices.push(n++)),s=this.m_sortedVertices.getNext(s)}if(this.m_bunchEdgeEndPoints.length<2){this.m_bunchEdgeEndPoints.length===1&&this.m_shape.setUserIndex(this.m_bunchEdgeEndPoints[0],this.m_userIndexSortedAngleIndexToVertex,-1);break}this.m_bunchEdgeIndices.sort((l,c)=>this.compareAngles_(l,c));for(let l=0,c=this.m_bunchEdgeIndices.length;l<c;l++){const f=this.m_bunchEdgeIndices[l],y=this.m_bunchEdgeEndPoints[f];this.m_shape.setUserIndex(y,this.m_userIndexSortedAngleIndexToVertex,l)}const o=this.processCrossOvers_(i);for(let l=0,c=this.m_bunchEdgeIndices.length;l<c;l++){const f=this.m_bunchEdgeIndices[l];if(f===-1)continue;const y=this.m_bunchEdgeEndPoints[f];this.m_shape.setUserIndex(y,this.m_userIndexSortedAngleIndexToVertex,-1)}if(!o)break;e=!0}return e}processCrossOvers_(e){let i=!1,s=!0;for(;s;){s=!1;let n=0;this.m_bunchEdgeIndices[n]===-1&&(n=this.getNextEdgeIndex_(n));let r=this.getNextEdgeIndex_(n);for(let o=0,l=this.m_bunchEdgeIndices.length;o<l&&n!==-1&&r!==-1&&n!==r;o++){const c=this.m_bunchEdgeIndices[n],f=this.m_bunchEdgeIndices[r],y=this.m_bunchEdgeEndPoints[c],_=this.m_bunchEdgeEndPoints[f];let x=this.m_shape.getNextVertex(y),S=!1;this.m_shape.isEqualXYPoint2D(x,e)||(x=this.m_shape.getPrevVertex(y),S=!0);let P=this.m_shape.getNextVertex(_),A=!1;this.m_shape.isEqualXYPoint2D(P,e)||(P=this.m_shape.getPrevVertex(_),A=!0);const k=S?this.m_shape.getPrevVertex(x):this.m_shape.getNextVertex(x),$=A?this.m_shape.getPrevVertex(P):this.m_shape.getNextVertex(P);let F=!1;(this.removeSpike_(x)||this.removeSpike_(P)||this.removeSpike_(y)||this.removeSpike_(_)||this.removeSpike_(k)||this.removeSpike_($))&&(F=!0),x!==P&&(!F&&this.m_shape.isEqualXY(y,_)&&(F=this.resolveOverlap_(S,A,x,y,P,_)),!F&&this.m_shape.isEqualXY(k,$)&&(F=this.resolveOverlap_(!S,!A,x,k,P,$)),!F&&this.m_shape.isEqualXY(y,$)&&(F=this.resolveOverlap_(S,!A,x,y,P,$)),!F&&this.m_shape.isEqualXY(k,_)&&(F=this.resolveOverlap_(!S,A,x,k,P,_))),F&&(i=!0),s||(s=F),n=F?this.getNextEdgeIndex_(n):r,r=this.getNextEdgeIndex_(n)}}if(!i){let n=0;this.m_bunchEdgeIndices[n]===-1&&(n=this.getNextEdgeIndex_(n));let r=this.getNextEdgeIndex_(n);for(let o=0,l=this.m_bunchEdgeIndices.length;o<l&&n!==-1&&r!==-1&&n!==r;o++){const c=this.m_bunchEdgeIndices[n],f=this.m_bunchEdgeIndices[r],y=this.m_bunchEdgeEndPoints[c],_=this.m_bunchEdgeEndPoints[f];let x=this.m_shape.getNextVertex(y);this.m_shape.isEqualXYPoint2D(x,e)||(x=this.m_shape.getPrevVertex(y));let S=this.m_shape.getNextVertex(_);this.m_shape.isEqualXYPoint2D(S,e)||(S=this.m_shape.getPrevVertex(_));const P=this.getDirection_(x,y),A=this.getDirection_(S,_),k=P?this.m_shape.getPrevVertex(x):this.m_shape.getNextVertex(x),$=A?this.m_shape.getPrevVertex(S):this.m_shape.getNextVertex(S),F=this.detectAndResolveCrossOver_(P,A,y,x,k,_,S,$);F!==1?F===0?(n=this.getNextEdgeIndex_(n),r=this.getNextEdgeIndex_(n)):(n=this.getPrevEdgeIndex_(n),r=this.getNextEdgeIndex_(n)):i=!0}}return i}simplify_(){this.m_shape.getGeometryType(this.m_geometry)===me.enumPolygon&&this.m_shape.getFillRule(this.m_geometry)===1&&new xf(this.m_progressTracker).planarSimplifyNoCrackingAndCluster(this.m_bFixSelfTangency,this.m_shape,this.m_geometry,0);let e=!1;this.m_userIndexSortedIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=this.m_shape.createUserIndexUninitialized();const i=this.m_shape.getPointCount(this.m_geometry),s=new Ns(0);this.m_shape.dbgVerifyMonotone();for(let o=this.m_shape.getFirstPath(this.m_geometry);o!==ae;o=this.m_shape.getNextPath(o)){let l=this.m_shape.getFirstVertex(o);for(let c=0,f=this.m_shape.getPathSize(o);c<f;c++)this.m_shape.setUserIndex(l,this.m_userIndexSortedAngleIndexToVertex,-1),s.add(l),l=this.m_shape.getNextVertex(l)}this.m_shape.sortVerticesSimpleByY(s,0,i),this.progress_(!0),this.m_userIndexSortedIndexToVertex=this.m_shape.createUserIndexUninitialized(),this.m_sortedVertices.reserveNodes(i),this.m_sortedVerticesListIndex=this.m_sortedVertices.createList(0);for(let o=0;o<i;o++){const l=s.read(o),c=this.m_sortedVertices.addElement(this.m_sortedVerticesListIndex,l);this.m_shape.setUserIndex(l,this.m_userIndexSortedIndexToVertex,c)}this.m_nextVertexToProcess=-1,this.cleanupSpikes_()&&(e=!0);let n=0,r=!1;do{r=!1,this.m_nextVertexToProcess=-1,this.m_firstCoincidentVertex=this.m_sortedVertices.getFirst(this.m_sortedVerticesListIndex);const o=new Y(0,0);this.m_firstCoincidentVertex!==eo.st_nullNode()&&this.m_shape.queryXY(this.m_sortedVertices.getData(this.m_firstCoincidentVertex),o);let l=0,c=this.m_firstCoincidentVertex;for(;c!==eo.st_nullNode()&&(c=this.m_sortedVertices.getNext(c),c!==eo.st_nullNode());){this.progress_();const f=this.m_sortedVertices.getData(c),y=Y.getNAN();if(this.m_shape.queryXY(f,y),o.equals(y))l++;else{if(l>0){this.m_nextVertexToProcess=c;const _=this.processBunch_();c=this.m_nextVertexToProcess,c!==eo.st_nullNode()&&this.m_shape.queryXY(this.m_sortedVertices.getData(c),y),_&&(r=!0)}o.setCoordsPoint2D(y),this.m_firstCoincidentVertex=c,l=0}}this.m_nextVertexToProcess=-1,l>0&&this.processBunch_()&&(r=!0),n++>10&&bt(""),r&&this.fixOrphanVertices_(),this.cleanupSpikes_()&&(r=!0),e||(e=r)}while(r);return this.m_shape.dbgVerifyMonotone(),this.m_shape.dbgVerifyCurves(),this.m_shape.removeUserIndex(this.m_userIndexSortedIndexToVertex),this.m_shape.removeUserIndex(this.m_userIndexSortedAngleIndexToVertex),e=_tt(this.m_shape,this.m_geometry,this.m_sortedVertices,this.m_bFixSelfTangency,this.m_progressTracker)||e,this.m_shape.dbgVerifyCurves(),e}getDirection_(e,i){return this.m_shape.getNextVertex(i)!==e}detectAndResolveCrossOver_(e,i,s,n,r,o,l,c){if(n===l)return this.removeAngleSortInfo_(s),this.removeAngleSortInfo_(o),-1;const f=this.m_shape.getUserIndex(s,this.m_userIndexSortedAngleIndexToVertex),y=this.m_shape.getUserIndex(r,this.m_userIndexSortedAngleIndexToVertex),_=this.m_shape.getUserIndex(o,this.m_userIndexSortedAngleIndexToVertex),x=this.m_shape.getUserIndex(c,this.m_userIndexSortedAngleIndexToVertex),S=new Array(8),P=new Array(4);S[0]=0,P[0]=f,S[1]=0,P[1]=y,S[2]=1,P[2]=_,S[3]=1,P[3]=x;for(let k=1;k<4;k++){const $=P[k],F=S[k];let G=k-1;for(;G>=0&&P[G]>$;)P[G+1]=P[G],S[G+1]=S[G],G--;P[G+1]=$,S[G+1]=F}let A=0;if(S[0]&&(A|=1),S[1]&&(A|=2),S[2]&&(A|=4),S[3]&&(A|=8),A!==5&&A!==10)return 0;if(e!==i&&(c=St(o,o=c)),e)this.m_shape.setNextVertex(c,n),this.m_shape.setPrevVertex(n,c),this.m_shape.setNextVertex(r,l),this.m_shape.setPrevVertex(l,r),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageBreakVertex(n,!0),this.m_shape.setSegmentParentageBreakVertex(l,!0));else{if(this.m_shape.setPrevVertex(c,n),this.m_shape.setNextVertex(n,c),this.m_shape.setPrevVertex(r,l),this.m_shape.setNextVertex(l,r),this.m_bHasSegmentParentage){const k=this.m_shape.getSegmentParentage(n),$=this.m_shape.getSegmentParentage(l);this.m_shape.setSegmentParentageAndBreak(n,$,!0),this.m_shape.setSegmentParentageAndBreak(l,k,!0)}if(this.m_bHasSegments){const k=this.m_shape.getVertexIndex(n),$=this.m_shape.getVertexIndex(l),F=this.m_shape.getSegmentFromIndex(k);this.m_shape.setSegmentToIndex(k,null);const G=this.m_shape.getSegmentFromIndex($);this.m_shape.setSegmentToIndex($,null),this.m_shape.setSegmentToIndex(k,G),this.m_shape.setSegmentToIndex($,F)}}return 1}resolveOverlap_(e,i,s,n,r,o){return this.resolveOverlapOddEven_(e,i,s,n,r,o)}resolveOverlapOddEven_(e,i,s,n,r,o){if(e!==i){e||(r=St(s,s=r),o=St(n,n=o));const l=this.m_shape.getNextVertex(r),c=this.m_shape.getNextVertex(s);if(this.m_shape.setNextVertex(s,l),this.m_shape.setPrevVertex(l,s),this.m_shape.setNextVertex(r,c),this.m_shape.setPrevVertex(c,r),this.m_bHasSegments){const f=this.m_shape.getVertexIndex(s),y=this.m_shape.getVertexIndex(r),_=this.m_shape.getSegmentFromIndex(f);this.m_shape.setSegmentToIndex(f,null);const x=this.m_shape.getSegmentFromIndex(y);this.m_shape.setSegmentToIndex(y,null),this.m_shape.setSegmentToIndex(f,x),this.m_shape.setSegmentToIndex(y,_)}if(this.m_bHasSegmentParentage){const f=this.m_shape.getSegmentParentage(s),y=this.m_shape.getSegmentParentage(r);this.m_shape.setSegmentParentageAndBreak(s,y,!0),this.m_shape.setSegmentParentageAndBreak(r,f,!0),this.m_shape.setSegmentParentageBreakVertex(n,!0),this.m_shape.setSegmentParentageBreakVertex(o,!0)}this.removeSpike_(r)}else{const l=e?s:n,c=i?r:o,f=e?n:s,y=i?o:r;let _=null;if(this.m_bHasSegments){const F=this.m_shape.getVertexIndex(y);_=this.m_shape.getSegmentFromIndex(F),this.m_shape.setSegmentToIndex(F,null);const G=this.m_shape.getVertexIndex(c);this.m_shape.setSegmentToIndex(G,null);const V=this.m_shape.getVertexIndex(l);this.m_shape.setSegmentToIndex(V,null)}let x=-1;this.m_bHasSegmentParentage&&(x=this.m_shape.getSegmentParentage(y));let S=!1;this.m_shape.setNextVertex(l,c),this.m_shape.setNextVertex(c,l),this.m_shape.setPrevVertex(f,y),this.m_shape.setPrevVertex(y,f);let P=y;for(;P!==c;){const F=this.m_shape.getPrevVertex(P),G=this.m_shape.getNextVertex(P);if(this.m_shape.setPrevVertex(P,G),this.m_shape.setNextVertex(P,F),S||(S=P===l),this.m_bHasSegments&&P!==l){const V=this.m_shape.getVertexIndex(G),B=_;_=this.m_shape.getSegmentFromIndex(V),B!==null&&B.reverse(),this.m_shape.setSegmentToIndex(V,B)}if(this.m_bHasSegmentParentage){const V=this.m_shape.getSegmentParentage(G);this.m_shape.setSegmentParentagePreserveBreak(G,x),x=V}P=G}let A=null;if(!S){const F=this.m_shape.getPrevVertex(c),G=this.m_shape.getNextVertex(c);if(this.m_shape.setPrevVertex(c,G),this.m_shape.setNextVertex(c,F),this.m_bHasSegments){const V=this.m_shape.getVertexIndex(c);A=this.m_shape.getSegmentFromIndex(V),this.m_shape.setSegmentToIndex(V,null)}}let k=-1,$=-1;if(this.m_bHasSegmentParentage&&(k=S?this.m_shape.getSegmentParentage(l):this.m_shape.getSegmentParentage(c),$=this.m_shape.getSegmentParentage(f)),this.transferVertexData_(c,l),this.beforeRemoveVertex_(c,!0),this.m_shape.removeVertexInternal(c,!0),this.removeAngleSortInfo_(l),this.transferVertexData_(y,f),this.beforeRemoveVertex_(y,!0),this.m_shape.removeVertexInternal(y,!0),this.removeAngleSortInfo_(f),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageAndBreak(l,k,!0),this.m_shape.setSegmentParentageAndBreak(f,$,!0)),A){const F=this.m_shape.getVertexIndex(l);this.m_shape.setSegmentToIndex(F,A)}}return!0}cleanupSpikes_(){let e=!1;for(let i=this.m_shape.getFirstPath(this.m_geometry);i!==ae;){const s=this.m_shape.getNextPath(i);let n=this.m_shape.getFirstVertex(i);for(let r=0,o=this.m_shape.getPathSize(i);r<o&&o>1;){this.progress_();const{v:l,bModified:c}=this.checkAndCleanupSpike_(i,n);if(l===ae)break;c?(e=!0,n=l,r=0,o=this.m_shape.getPathSize(i)):(n=l,r++)}i=s}return e}checkAndCleanupSpike_(e,i){const s={v:ae,bModified:!1};let n=this.m_shape.getPrevVertex(i),r=this.m_shape.getNextVertex(i),o=ae,l=ae;for(;this.m_shape.isEqualXY(n,r)&&(o=n,l=r,r!==i);)n=this.m_shape.getPrevVertex(n),r=this.m_shape.getNextVertex(r);if(o===ae)return s.v=r,s;s.bModified=!0;for(let c=this.m_shape.getNextVertex(o);this.beforeRemoveVertex_(c,!1),c!==l;c=this.m_shape.getNextVertex(c));if(o===i)return this.m_polylineDegeneracies!==ae?this.m_shape.movePath(this.m_polylineDegeneracies,ae,e):this.m_shape.removePath(e),s.v=ae,s;{const c=this.m_shape.peelALoopIntoAPath(o,l);this.m_polylineDegeneracies!==ae?this.m_shape.movePath(this.m_polylineDegeneracies,ae,c):this.m_shape.removePath(c)}return s.v=o,s}removeSpike_(e){let i=this.m_shape.getPrevVertex(e),s=this.m_shape.getNextVertex(e),n=ae,r=ae;for(;this.m_shape.isEqualXY(i,s)&&(n=i,r=s,s!==e);)i=this.m_shape.getPrevVertex(i),s=this.m_shape.getNextVertex(s);if(n===ae)return!1;if(this.m_shape.peelALoop(n,r),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageBreakVertex(n,!0),this.m_shape.setSegmentParentageBreakVertex(r,!0)),this.removeAngleSortInfo_(n),this.m_polylineDegeneracies===ae)for(let o=this.m_shape.getNextVertex(r);;){const l=this.m_shape.getNextVertex(o);if(this.removeAngleSortInfo_(o),this.beforeRemoveVertex_(o,!0),this.m_shape.setSegmentToIndex(this.m_shape.getVertexIndex(o),null),this.m_shape.removeVertexInternal(o,!1),o===r)break;o=l}else{for(let l=r;;){const c=this.m_shape.getNextVertex(l);if(this.removeAngleSortInfo_(l),this.beforeRemoveVertex_(l,!1),l=c,l===r)break}const o=[!1];this.m_shape.insertClosedPath(this.m_polylineDegeneracies,ae,r,r,o)}return!0}fixOrphanVertices_(){let e=0;for(let n=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList());n!==-1;n=this.m_sortedVertices.getNext(n)){const r=this.m_sortedVertices.getData(n);this.m_shape.setPathToVertex(r,ae)}let i=0;for(let n=this.m_shape.getFirstPath(this.m_geometry);n!==ae;){const r=this.m_shape.getFirstVertex(n);if(r===ae||this.m_shape.getPathFromVertex(r)!==ae){const l=n;n=this.m_shape.getNextPath(n),this.m_shape.removePathOnly(l);continue}this.m_shape.setPathToVertex(r,n);let o=1;for(let l=this.m_shape.getNextVertex(r);l!==r;l=this.m_shape.getNextVertex(l))this.m_shape.setPathToVertex(l,n),o++;this.m_shape.setRingAreaValid(n,!1),this.m_shape.setPathSize(n,o),this.m_shape.setLastVertex(n,this.m_shape.getPrevVertex(r)),i+=o,e++,n=this.m_shape.getNextPath(n)}for(let n=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList());n!==-1;n=this.m_sortedVertices.getNext(n)){const r=this.m_sortedVertices.getData(n);if(this.m_shape.getPathFromVertex(r)!==ae)continue;const o=[!1],l=this.m_shape.insertClosedPath(this.m_geometry,ae,r,r,o);i+=this.m_shape.getPathSize(l),e++}this.m_shape.setGeometryPathCount(this.m_geometry,e),this.m_shape.setGeometryVertexCount(this.m_geometry,i);let s=0;for(let n=this.m_shape.getFirstGeometry();n!==ae;n=this.m_shape.getNextGeometry(n))s+=this.m_shape.getPointCount(n);this.m_shape.setTotalPointCount(s)}getNextEdgeIndex_(e){if(e===-1)return-1;for(let i=0,s=this.m_bunchEdgeIndices.length-1;i<s;i++)if(e=(e+1)%this.m_bunchEdgeIndices.length,this.m_bunchEdgeIndices[e]!==-1)return e;return-1}getPrevEdgeIndex_(e){if(e===-1)return-1;for(let i=0,s=this.m_bunchEdgeIndices.length-1;i<s;i++)if(e=(this.m_bunchEdgeIndices.length+e-1)%this.m_bunchEdgeIndices.length,this.m_bunchEdgeIndices[e]!==-1)return e;return-1}transferVertexData_(e,i){const s=this.m_shape.getUserIndex(i,this.m_userIndexSortedIndexToVertex),n=this.m_shape.getUserIndex(i,this.m_userIndexSortedAngleIndexToVertex);this.m_shape.transferAllDataToTheVertex(e,i),this.m_shape.setUserIndex(i,this.m_userIndexSortedIndexToVertex,s),this.m_shape.setUserIndex(i,this.m_userIndexSortedAngleIndexToVertex,n)}removeAngleSortInfo_(e){const i=this.m_shape.getUserIndex(e,this.m_userIndexSortedAngleIndexToVertex);i!==-1&&(this.m_bunchEdgeIndices[i]=-1,this.m_shape.setUserIndex(e,this.m_userIndexSortedAngleIndexToVertex,-1))}progress_(e=!1){}}function Wc(t,e,i,s,n,r=!0){switch(Ptt(s)){case 0:break;case 1:Je("relation string length has to be 9 characters");break;default:Je("relation string")}if(r){const x=ktt(s,t.getDimension(),e.getDimension());if(x!==0)return G0(t,e,i,x,n)}let o=0;if(typeof i=="number")o=i;else{const x=xe.constructEmpty();t.queryEnvelope(x);const S=xe.constructEmpty();e.queryEnvelope(S);const P=xe.constructEmpty();P.setCoords({env2D:x}),P.mergeEnvelope2D(S),o=Ug(i,P,!1)}const l=Tie(t,o),c=Tie(e,o);if(l.isEmpty()||c.isEmpty())return Dtt(l,c,s);const f=l.getGeometryType(),y=c.getGeometryType();let _=!1;switch(f){case me.enumPolygon:switch(y){case me.enumPolygon:_=Ttt(l,c,o,s,n);break;case me.enumPolyline:_=xie(l,c,o,s,n);break;case me.enumPoint:_=Eie(l,c,o,s);break;case me.enumMultiPoint:_=wie(l,c,o,s,n)}break;case me.enumPolyline:switch(y){case me.enumPolygon:_=xie(c,l,o,R_(s),n);break;case me.enumPolyline:_=Itt(l,c,o,s,n);break;case me.enumPoint:_=Cie(l,c,o,s,n);break;case me.enumMultiPoint:_=Sie(l,c,o,s,n)}break;case me.enumPoint:switch(y){case me.enumPolygon:_=Eie(c,l,o,R_(s));break;case me.enumPolyline:_=Cie(c,l,o,R_(s),n);break;case me.enumPoint:_=Att(l,c,o,s);break;case me.enumMultiPoint:_=Pie(c,l,o,R_(s))}break;case me.enumMultiPoint:switch(y){case me.enumPolygon:_=wie(c,l,o,R_(s),n);break;case me.enumPolyline:_=Sie(c,l,o,R_(s),n);break;case me.enumMultiPoint:_=Mtt(l,c,o,s,n);break;case me.enumPoint:_=Pie(l,c,o,s)}break;default:_=!1}return _}function Ett(t,e,i,s){const n=new ld;n.resetMatrix_(),n.setPredicates_("T*****F**"),n.setAreaAreaPredicates_();const r=xe.constructEmpty(),o=xe.constructEmpty();t.queryEnvelope(r),e.queryEnvelope(o);let l=!1;if(Tf(r,o,i)&&(n.areaAreaDisjointPredicates_(t,e),l=!0),l||is(t,e),l)return xa(n.m_matrix,n.m_scl);let c=new Bs,f=c.addGeometry(t),y=c.addGeometry(e),_=null,x=0;if(t.hasNonLinearSegments()||e.hasNonLinearSegments()){_=new Ic;const k=Tc(i,c.getEnvelope2D(s));x=rf(k,0),zh(c,k,i,12e3,_,null,s)}Hd(c,new Jo(i,0).add(x),s,!1,!1);const S=c.getGeometry(y).getBoundary();if(c.filterClosePoints(0,!0,!0,!1,ae),tg(c,f,-1,!1,ae,s),c.getPointCount(f)===0)return!1;tg(c,y,-1,!1,ae,s),n.setEditShape_(c,s);const P=c.getPointCount(y)===0;if(!P){n.computeMatrixTopoGraphHalfEdges_(f,y),n.m_topoGraph.removeShape();const k=xa(n.m_matrix,n.m_scl);if(!k)return k}const A=c.getGeometry(f);return c=new Bs,f=c.addGeometry(A),y=c.addGeometry(S),n.setEditShape_(c,s),n.m_predicateCount=0,n.resetMatrix_(),n.setPredicates_(P?"T*****F**":"******F**"),n.setAreaLinePredicates_(),n.computeMatrixTopoGraphHalfEdges_(f,y),n.m_topoGraph.removeShape(),xa(n.m_matrix,n.m_scl)}function Ctt(t,e,i,s){const n=new ld;n.resetMatrix_(),n.setPredicates_("T*****F**"),n.setAreaLinePredicates_();const r=xe.constructEmpty(),o=xe.constructEmpty();t.queryEnvelope(r),e.queryEnvelope(o);let l=!1;if(Tf(r,o,i)&&(n.areaLineDisjointPredicates_(t,e),l=!0),l||is(t,e),l)return xa(n.m_matrix,n.m_scl);const c=new Bs,f=c.addGeometry(t),y=c.addGeometry(e);return n.setEditShapeCrackAndCluster_(c,new Jo(i,0),s),c.getPointCount(f)===0?!1:(n.computeMatrixTopoGraphHalfEdges_(f,y),n.m_topoGraph.removeShape(),xa(n.m_matrix,n.m_scl))}function Ptt(t){if(t.length!==9)return 1;for(let e=0;e<9;e++){const i=t[e];if(i!=="*"&&i!=="T"&&i!=="F"&&i!=="0"&&i!=="1"&&i!=="2")return 2}return 0}function Ttt(t,e,i,s,n){const r=new ld;r.resetMatrix_(),r.setPredicates_(s),r.setAreaAreaPredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(Tf(o,l,i)&&(r.areaAreaDisjointPredicates_(t,e),c=!0),c||is(t,e),!c){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Jo(i,0),n),r.computeMatrixTopoGraphHalfEdges_(y,_),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function xie(t,e,i,s,n){const r=new ld;r.resetMatrix_(),r.setPredicates_(s),r.setAreaLinePredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(Tf(o,l,i)&&(r.areaLineDisjointPredicates_(t,e),c=!0),c||is(t,e),!c){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Jo(i,0),n),r.m_clusterIndexB=r.m_topoGraph.createUserIndexForClusters(),V6(_,r.m_topoGraph,r.m_clusterIndexB),r.computeMatrixTopoGraphHalfEdges_(y,_),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexB),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function wie(t,e,i,s,n){const r=new ld;r.resetMatrix_(),r.setPredicates_(s),r.setAreaPointPredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(Tf(o,l,i)&&(r.areaPointDisjointPredicates_(t),c=!0),c||is(t,e),!c){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Jo(i,0),n),r.computeMatrixTopoGraphClusters_(y,_),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Itt(t,e,i,s,n){const r=new ld;r.resetMatrix_(),r.setPredicates_(s),r.setLineLinePredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(Tf(o,l,i)&&(r.lineLineDisjointPredicates_(t,e),c=!0),c||is(t,e),!c){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Jo(i,0),n),r.m_clusterIndexA=r.m_topoGraph.createUserIndexForClusters(),r.m_clusterIndexB=r.m_topoGraph.createUserIndexForClusters(),V6(y,r.m_topoGraph,r.m_clusterIndexA),V6(_,r.m_topoGraph,r.m_clusterIndexB),r.computeMatrixTopoGraphHalfEdges_(y,_),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexA),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexB),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Sie(t,e,i,s,n){const r=new ld;r.resetMatrix_(),r.setPredicates_(s),r.setLinePointPredicates_();const o=xe.constructEmpty(),l=xe.constructEmpty();t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(Tf(o,l,i)&&(r.linePointDisjointPredicates_(t),c=!0),c||is(t,e),!c){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Jo(i,0),n),r.m_clusterIndexA=r.m_topoGraph.createUserIndexForClusters(),V6(y,r.m_topoGraph,r.m_clusterIndexA),r.computeMatrixTopoGraphClusters_(y,_),r.m_topoGraph.deleteUserIndexForClusters(r.m_clusterIndexA),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Mtt(t,e,i,s,n){const r=new ld;r.resetMatrix_(),r.setPredicates_(s),r.setPointPointPredicates_();const o=new xe,l=new xe;t.queryEnvelope(o),e.queryEnvelope(l);let c=!1;if(Tf(o,l,i)&&(r.pointPointDisjointPredicates_(),c=!0),!c){const f=new Bs,y=f.addGeometry(t),_=f.addGeometry(e);r.setEditShapeCrackAndCluster_(f,new Jo(i,0),n),r.computeMatrixTopoGraphClusters_(y,_),r.m_topoGraph.removeShape()}return xa(r.m_matrix,r.m_scl)}function Eie(t,e,i,s,n){const r=new ld;r.resetMatrix_(),r.setPredicates_(s),r.setAreaPointPredicates_();const o=xe.constructEmpty();t.queryEnvelope(o);const l=e.getXY();let c=!1;if(a7(l,o,i)&&(r.areaPointDisjointPredicates_(t),c=!0),!c){const f=El(t,l,i);if(f===1)r.m_matrix[0]=0,r.m_matrix[2]=2,r.m_matrix[3]=-1,r.m_matrix[5]=1,r.m_matrix[6]=-1;else if(f===2)if(r.m_matrix[6]=-1,t.calculateArea2D()!==0)r.m_matrix[0]=-1,r.m_matrix[3]=0,r.m_matrix[2]=2,r.m_matrix[5]=1;else{r.m_matrix[0]=0,r.m_matrix[3]=-1,r.m_matrix[5]=-1;const y=xe.constructEmpty();t.queryEnvelope(y),r.m_matrix[2]=y.height()||y.width()?1:-1}else r.areaPointDisjointPredicates_(t)}return xa(r.m_matrix,s)}function Cie(t,e,i,s,n){const r=new ld;r.resetMatrix_(),r.setPredicates_(s),r.setLinePointPredicates_();const o=xe.constructEmpty();t.queryEnvelope(o);let l=!1;if(a7(e.getXY(),o,i)&&(r.linePointDisjointPredicates_(t),l=!0),!l){let c=null,f=!1,y=!1;if((r.m_performPredicates[0]||r.m_performPredicates[6])&&(G0(t,e,i,4,n)?(r.m_matrix[0]=-1,r.m_matrix[6]=0):(r.m_performPredicates[0]&&(c=Xh(t),y=!G0(c,e,i,4,n),f=!0,r.m_matrix[0]=y?-1:0),r.m_matrix[6]=-1)),r.m_performPredicates[3]&&(c!==null&&c.isEmpty()?r.m_matrix[3]=-1:(f||(c==null&&(c=Xh(t)),y=!G0(c,e,i,4,n),f=!0),r.m_matrix[3]=y?0:-1)),r.m_performPredicates[5])if(c!==null&&c.isEmpty())r.m_matrix[5]=-1;else if(f&&!y)r.m_matrix[5]=0;else{c===null&&(c=Xh(t));const _=G0(c,e,i,3,n);r.m_matrix[5]=_?-1:0}if(r.m_performPredicates[2])if(t.calculateLength2D()!==0)r.m_matrix[2]=1;else{const _=new Jn({vd:t.getDescription()});_.addPoints(t,0,t.getPointCount());const x=G0(_,e,i,3,n);r.m_matrix[2]=x?-1:0}}return xa(r.m_matrix,r.m_scl)}function Pie(t,e,i,s,n){const r=new ld;r.resetMatrix_(),r.setPredicates_(s),r.setPointPointPredicates_();const o=xe.constructEmpty();t.queryEnvelope(o);const l=e.getXY(),c=new Y;let f=!1;if(a7(l,o,i)&&(r.pointPointDisjointPredicates_(),f=!0),!f){let y=!1,_=!0;const x=i*i;for(let S=0;S<t.getPointCount()&&(t.queryXY(S,c),Y.sqrDistance(c,l)<=x?y=!0:_=!1,!y||_);S++);y?(r.m_matrix[0]=0,r.m_matrix[2]=_?-1:0,r.m_matrix[6]=-1):(r.m_matrix[0]=-1,r.m_matrix[2]=0,r.m_matrix[6]=0)}return xa(r.m_matrix,s)}function Att(t,e,i,s,n){const r=t.getXY(),o=e.getXY(),l=Vi(9,-1);return Y.sqrDistance(r,o)<=i*i?l[0]=0:(l[2]=0,l[6]=0),l[8]=2,xa(l,s)}function xa(t,e){for(let i=0;i<9;i++)switch(e[i]){case"T":if(t[i]===-1)return!1;break;case"F":if(t[i]!==-1)return!1;break;case"0":if(t[i]!==0)return!1;break;case"1":if(t[i]!==1)return!1;break;case"2":if(t[i]!==2)return!1}return!0}function Dtt(t,e,i){const s=Vi(9,-1);if(t.isEmpty()&&e.isEmpty())return xa(s,i);let n,r=!1;t.isEmpty()?(n=e,r=!0):n=t,s[0]=-1,s[1]=-1,s[3]=-1,s[4]=-1,s[6]=-1,s[7]=-1,s[8]=2;const o=n.getGeometryType();if(bi(o))if(o===me.enumPolygon)if(n.calculateArea2D()!==0)s[2]=2,s[5]=1;else{s[5]=-1;const l=xe.constructEmpty();n.queryEnvelope(l),s[2]=l.height()||l.width()?1:0}else{const l=n.calculateLength2D()!==0;s[2]=l?1:0,s[5]=Rb(n)?0:-1}else s[2]=0,s[5]=-1;return r&&qtt(s),xa(s,i)}function ktt(t,e,i){return Ntt(t)?3:$tt(t)?4:Ott(t,e,i)?8:Rtt(t,e,i)?16:Ftt(t)?64:Ltt(t)?1:ztt(t,e,i)?32:0}function Ntt(t){return t==="T*F**FFF*"}function $tt(t){return t==="FF*FF****"}function Ott(t,e,i){return(e!==0||i!==0)&&(e===2&&i===2?t==="F***T****":(e===2||e===1)&&i===0&&t==="F**T*****")}function Rtt(t,e,i){return e>i?t==="T*****T**":e===1&&i===1&&t==="0********"}function Ltt(t){return t==="T*****FF*"}function Ftt(t){return t==="T**FF*FF*"}function ztt(t,e,i){return e===i&&(e!==1?t==="T*T***T**":t==="1*T***T**")}function V6(t,e,i){const s=e.getGeometryID(t);for(let n=e.getFirstCluster();n!==ae;n=e.getNextCluster(n)){if(!(e.getClusterParentage(n)&s))continue;const r=e.getClusterHalfEdge(n);if(r===ae){e.setClusterUserIndex(n,i,0);continue}let o=r,l=0;do{const c=o;e.getHalfEdgeParentage(c)&s&&l++,o=e.getHalfEdgeNext(e.getHalfEdgeTwin(c))}while(o!==r);e.setClusterUserIndex(n,i,l)}}class ld{nullFunc(){return K(0),!1}constructor(){this.m_clusterIndexA=-1,this.m_clusterIndexB=-1,this.m_visitedIndex=-1,this.m_topoGraph=new Fh,this.m_matrix=Vi(9,0),this.m_maxDim=Vi(9,0),this.m_performPredicates=Vi(9,!1),this.m_scl="",this.m_predicateCount=0,this.m_predicatesHalfEdge=this.nullFunc,this.m_predicatesCluster=this.nullFunc}resetMatrix_(){this.m_matrix.fill(-2),this.m_maxDim.fill(-2)}setPredicates_(e){this.m_scl=e;for(let i=0;i<9;i++)this.m_scl[i]!=="*"?(this.m_performPredicates[i]=!0,this.m_predicateCount++):this.m_performPredicates[i]=!1}setRemainingPredicatesToFalse_(){for(let e=0;e<9;e++)this.m_performPredicates[e]&&this.m_matrix[e]===-2&&(this.m_matrix[e]=-1,this.m_performPredicates[e]=!1)}isPredicateKnown_(e){return this.m_matrix[e]!==-2&&(this.m_matrix[e]===-1?(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0):this.m_scl[e]!=="T"&&this.m_scl[e]!=="F"?!(this.m_matrix[e]<this.m_maxDim[e])&&(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0):(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0))}setAreaAreaPredicates_(){this.m_predicatesHalfEdge=this.areaAreaPredicates_,this.m_maxDim[0]=2,this.m_maxDim[1]=1,this.m_maxDim[2]=2,this.m_maxDim[3]=1,this.m_maxDim[4]=1,this.m_maxDim[5]=1,this.m_maxDim[6]=2,this.m_maxDim[7]=1,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setAreaLinePredicates_(){this.m_predicatesHalfEdge=this.areaLinePredicates_,this.m_predicatesCluster=this.areaPointPredicates_,this.m_maxDim[0]=1,this.m_maxDim[1]=0,this.m_maxDim[2]=2,this.m_maxDim[3]=1,this.m_maxDim[4]=0,this.m_maxDim[5]=1,this.m_maxDim[6]=1,this.m_maxDim[7]=0,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setLineLinePredicates_(){this.m_predicatesHalfEdge=this.lineLinePredicates_,this.m_predicatesCluster=this.linePointPredicates_,this.m_maxDim[0]=1,this.m_maxDim[1]=0,this.m_maxDim[2]=1,this.m_maxDim[3]=0,this.m_maxDim[4]=0,this.m_maxDim[5]=0,this.m_maxDim[6]=1,this.m_maxDim[7]=0,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setAreaPointPredicates_(){this.m_predicatesCluster=this.areaPointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=2,this.m_maxDim[3]=0,this.m_maxDim[4]=-1,this.m_maxDim[5]=1,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setLinePointPredicates_(){this.m_predicatesCluster=this.linePointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=1,this.m_maxDim[3]=0,this.m_maxDim[4]=-1,this.m_maxDim[5]=0,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setPointPointPredicates_(){this.m_predicatesCluster=this.pointPointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=0,this.m_maxDim[3]=-1,this.m_maxDim[4]=-1,this.m_maxDim[5]=-1,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[3]&&(this.m_matrix[3]=-1,this.m_performPredicates[3]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[5]&&(this.m_matrix[5]=-1,this.m_performPredicates[5]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}areaAreaDisjointPredicates_(e,i){this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5]),this.areaGeomContainsOrDisjointPredicates_(i,this.m_performPredicates[6]?6:-1,this.m_scl[6],this.m_performPredicates[7]?7:-1,this.m_scl[7])}areaGeomContainsOrDisjointPredicates_(e,i,s,n,r){const o=i!==-1,l=n!==-1;if(o||l){if(!(s!=="T"&&s!=="F"&&o||r!=="T"&&r!=="F"&&l)||e.calculateArea2D()!==0)o&&(this.m_matrix[i]=2),l&&(this.m_matrix[n]=1);else if(l&&(this.m_matrix[n]=-1),o){const c=xe.constructEmpty();e.queryEnvelope(c),this.m_matrix[i]=c.height()||c.width()?1:0}}}areaAreaContainsPredicates_(e){K(0)}areaAreaWithinPredicates_(e){K(0)}areaLineDisjointPredicates_(e,i){if(this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_performPredicates[6]){const s=this.m_scl[6],n=s==="T"||s==="F"||i.calculateLength2D()!==0;this.m_matrix[6]=n?1:0}if(this.m_performPredicates[7]){const s=Rb(i);this.m_matrix[7]=s?0:-1}this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5])}areaLineContainsPredicates_(e,i){K(0)}areaPointDisjointPredicates_(e){this.m_matrix[0]=-1,this.m_matrix[3]=-1,this.m_matrix[6]=0,this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5])}areaPointContainsPredicates_(e){K(0)}lineLineDisjointPredicates_(e,i){if(this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_performPredicates[2]){const s=this.m_scl[2],n=s==="T"||s==="F"||e.calculateLength2D()!==0;this.m_matrix[2]=n?1:0}if(this.m_performPredicates[5]){const s=Rb(e);this.m_matrix[5]=s?0:-1}if(this.m_performPredicates[6]){const s=this.m_scl[6],n=s==="T"||s==="F"||i.calculateLength2D()!==0;this.m_matrix[6]=n?1:0}if(this.m_performPredicates[7]){const s=Rb(i);this.m_matrix[7]=s?0:-1}}linePointDisjointPredicates_(e){if(this.m_matrix[0]=-1,this.m_matrix[3]=-1,this.m_performPredicates[2]){const i=this.m_scl[2],s=i==="T"||i==="F"||e.calculateLength2D()!==0;this.m_matrix[2]=s?1:0}if(this.m_performPredicates[5]){const i=Rb(e);this.m_matrix[5]=i?0:-1}this.m_matrix[6]=0}pointPointDisjointPredicates_(){this.m_matrix[0]=-1,this.m_matrix[2]=0,this.m_matrix[6]=0}areaAreaPredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorArea_(e,i,s);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[1]){this.interiorAreaBoundaryArea_(e,i,1);const r=this.isPredicateKnown_(1);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorAreaExteriorArea_(e,i,s,2);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.interiorAreaBoundaryArea_(e,s,3);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[4]){this.boundaryAreaBoundaryArea_(e,i,s);const r=this.isPredicateKnown_(4);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryAreaExteriorArea_(e,i,s,5);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.interiorAreaExteriorArea_(e,s,i,6);const r=this.isPredicateKnown_(6);n&&(n=r)}if(this.m_performPredicates[7]){this.boundaryAreaExteriorArea_(e,s,i,7);const r=this.isPredicateKnown_(7);n&&(n=r)}return n}areaLinePredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorLine_(e,i,s);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[1]){this.interiorAreaBoundaryLine_(e,i,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(1);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorAreaExteriorLine_(e,i,s);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.boundaryAreaInteriorLine_(e,i,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[4]){this.boundaryAreaBoundaryLine_(e,i,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(4);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryAreaExteriorLine_(e,i,s);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.exteriorAreaInteriorLine_(e,i);const r=this.isPredicateKnown_(6);n&&(n=r)}if(this.m_performPredicates[7]){this.exteriorAreaBoundaryLine_(e,i,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(7);n&&(n=r)}return n}lineLinePredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorLineInteriorLine_(e,i,s,this.m_clusterIndexA,this.m_clusterIndexB);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[1]){this.interiorLineBoundaryLine_(e,i,s,this.m_clusterIndexA,this.m_clusterIndexB,1);const r=this.isPredicateKnown_(1);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorLineExteriorLine_(e,i,s,2);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.interiorLineBoundaryLine_(e,s,i,this.m_clusterIndexB,this.m_clusterIndexA,3);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[4]){this.boundaryLineBoundaryLine_(e,i,s,this.m_clusterIndexA,this.m_clusterIndexB);const r=this.isPredicateKnown_(4);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryLineExteriorLine_(e,i,s,this.m_clusterIndexA,5);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.interiorLineExteriorLine_(e,s,i,6);const r=this.isPredicateKnown_(6);n&&(n=r)}if(this.m_performPredicates[7]){this.boundaryLineExteriorLine_(e,s,i,this.m_clusterIndexB,7);const r=this.isPredicateKnown_(7);n&&(n=r)}return n}areaPointPredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorPoint_(e,i);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorAreaExteriorPoint_(e,i);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.boundaryAreaInteriorPoint_(e,i,s);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryAreaExteriorPoint_(e,i);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.exteriorAreaInteriorPoint_(e,i);const r=this.isPredicateKnown_(6);n&&(n=r)}return n}linePointPredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorLineInteriorPoint_(e,i,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorLineExteriorPoint_(e,i,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[3]){this.boundaryLineInteriorPoint_(e,i,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(3);n&&(n=r)}if(this.m_performPredicates[5]){this.boundaryLineExteriorPoint_(e,i,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(5);n&&(n=r)}if(this.m_performPredicates[6]){this.exteriorLineInteriorPoint_(e,i,s);const r=this.isPredicateKnown_(6);n&&(n=r)}return n}pointPointPredicates_(e,i,s){let n=!0;if(this.m_performPredicates[0]){this.interiorPointInteriorPoint_(e,i,s);const r=this.isPredicateKnown_(0);n&&(n=r)}if(this.m_performPredicates[2]){this.interiorPointExteriorPoint_(e,i,s,2);const r=this.isPredicateKnown_(2);n&&(n=r)}if(this.m_performPredicates[6]){this.interiorPointExteriorPoint_(e,s,i,6);const r=this.isPredicateKnown_(6);n&&(n=r)}return n}interiorAreaInteriorArea_(e,i,s){if(this.m_matrix[0]===2)return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e);n&i&&n&s&&(this.m_matrix[0]=2)}interiorAreaBoundaryArea_(e,i,s){if(this.m_matrix[s]===1)return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e),r=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));n&i&&r&i&&(this.m_matrix[s]=1)}interiorAreaExteriorArea_(e,i,s,n){if(this.m_matrix[n]===2)return;const r=this.m_topoGraph.getHalfEdgeFaceParentage(e);r&i&&!(r&s)&&(this.m_matrix[n]=2)}boundaryAreaBoundaryArea_(e,i,s){if(this.m_matrix[4]===1)return;const n=this.m_topoGraph.getHalfEdgeParentage(e);if(n&i&&n&s)this.m_matrix[4]=1;else if(this.m_matrix[4]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(o&i&&o&s)return void(this.m_matrix[4]=0)}}boundaryAreaExteriorArea_(e,i,s,n){if(this.m_matrix[n]===1)return;const r=this.m_topoGraph.getHalfEdgeFaceParentage(e),o=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));r&s||o&s||(this.m_matrix[n]=1)}interiorAreaInteriorLine_(e,i,s){if(this.m_matrix[0]===1)return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e),r=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));n&i&&r&i&&(this.m_matrix[0]=1)}interiorAreaBoundaryLine_(e,i,s,n){if(this.m_matrix[1]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(!(o&i)&&this.m_topoGraph.getHalfEdgeFaceParentage(e)&i){const l=this.m_topoGraph.getClusterUserIndex(r,n);if(o&s&&l%2!=0)return void(this.m_matrix[1]=0)}}}interiorAreaExteriorLine_(e,i,s){this.m_matrix[2]!==2&&this.m_topoGraph.getHalfEdgeParentage(e)&i&&(this.m_matrix[2]=2)}boundaryAreaInteriorLine_(e,i,s,n){if(this.m_matrix[3]===1)return;const r=this.m_topoGraph.getHalfEdgeParentage(e);if(r&i&&r&s)this.m_matrix[3]=1;else if(this.m_matrix[3]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const o=this.m_topoGraph.getHalfEdgeTo(e),l=this.m_topoGraph.getClusterParentage(o);if(l&i){const c=this.m_topoGraph.getClusterUserIndex(o,n);if(l&s&&c%2==0)return void(this.m_matrix[3]=0)}}}boundaryAreaBoundaryLine_(e,i,s,n){if(this.m_matrix[4]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(o&i){const l=this.m_topoGraph.getClusterUserIndex(r,n);if(o&s&&l%2!=0)return void(this.m_matrix[4]=0)}}}boundaryAreaExteriorLine_(e,i,s){if(this.m_matrix[5]===1)return;const n=this.m_topoGraph.getHalfEdgeParentage(e);n&i&&!(n&s)&&(this.m_matrix[5]=1)}exteriorAreaInteriorLine_(e,i){if(this.m_matrix[6]===1)return;const s=this.m_topoGraph.getHalfEdgeFaceParentage(e),n=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));s&i||n&i||(this.m_matrix[6]=1)}exteriorAreaBoundaryLine_(e,i,s,n){if(this.m_matrix[7]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const r=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(r);if(!(o&i)&&!(this.m_topoGraph.getHalfEdgeFaceParentage(e)&i)){const l=this.m_topoGraph.getClusterUserIndex(r,n);if(o&s&&l%2!=0)return void(this.m_matrix[7]=0)}}}interiorLineInteriorLine_(e,i,s,n,r){if(this.m_matrix[0]===1)return;const o=this.m_topoGraph.getHalfEdgeParentage(e);if(o&i&&o&s)this.m_matrix[0]=1;else if(this.m_matrix[0]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const l=this.m_topoGraph.getHalfEdgeTo(e),c=this.m_topoGraph.getClusterParentage(l);if(c&i&&c&s){const f=this.m_topoGraph.getClusterUserIndex(l,n),y=this.m_topoGraph.getClusterUserIndex(l,r);if(f%2==0&&y%2==0)return void(this.m_matrix[0]=0)}}}interiorLineBoundaryLine_(e,i,s,n,r,o){if(this.m_matrix[o]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const l=this.m_topoGraph.getHalfEdgeTo(e),c=this.m_topoGraph.getClusterParentage(l);if(c&i&&c&s){const f=this.m_topoGraph.getClusterUserIndex(l,n),y=this.m_topoGraph.getClusterUserIndex(l,r);if(f%2==0&&y%2!=0)return void(this.m_matrix[o]=0)}}}interiorLineExteriorLine_(e,i,s,n){if(this.m_matrix[n]===1)return;const r=this.m_topoGraph.getHalfEdgeParentage(e);r&i&&!(r&s)&&(this.m_matrix[n]=1)}boundaryLineBoundaryLine_(e,i,s,n,r){if(this.m_matrix[4]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const o=this.m_topoGraph.getHalfEdgeTo(e),l=this.m_topoGraph.getClusterParentage(o);if(l&i&&l&s){const c=this.m_topoGraph.getClusterUserIndex(o,n),f=this.m_topoGraph.getClusterUserIndex(o,r);if(c%2!=0&&f%2!=0)return void(this.m_matrix[4]=0)}}}boundaryLineExteriorLine_(e,i,s,n,r){if(this.m_matrix[r]!==0&&this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)!==1){const o=this.m_topoGraph.getHalfEdgeTo(e);if(!(this.m_topoGraph.getClusterParentage(o)&s)&&this.m_topoGraph.getClusterUserIndex(o,n)%2!=0)return void(this.m_matrix[r]=0)}}interiorAreaInteriorPoint_(e,i){if(this.m_matrix[0]!==0&&!(this.m_topoGraph.getClusterParentage(e)&i)){const s=this.m_topoGraph.getClusterChain(e);if(this.m_topoGraph.getChainParentage(s)&i)return void(this.m_matrix[0]=0)}}interiorAreaExteriorPoint_(e,i){this.m_matrix[2]!==2&&this.m_topoGraph.getClusterParentage(e)&i&&(this.m_matrix[2]=2)}boundaryAreaInteriorPoint_(e,i,s){if(this.m_matrix[3]===0)return;const n=this.m_topoGraph.getClusterParentage(e);n&i&&n&s&&(this.m_matrix[3]=0)}boundaryAreaExteriorPoint_(e,i){this.m_matrix[5]!==1&&this.m_topoGraph.getClusterParentage(e)&i&&(this.m_matrix[5]=1)}exteriorAreaInteriorPoint_(e,i){if(this.m_matrix[6]!==0&&!(this.m_topoGraph.getClusterParentage(e)&i)){const s=this.m_topoGraph.getClusterChain(e);if(!(this.m_topoGraph.getChainParentage(s)&i))return void(this.m_matrix[6]=0)}}interiorLineInteriorPoint_(e,i,s,n){if(this.m_matrix[0]===0)return;const r=this.m_topoGraph.getClusterParentage(e);if(r&i&&r&s&&this.m_topoGraph.getClusterUserIndex(e,n)%2==0)return void(this.m_matrix[0]=0)}interiorLineExteriorPoint_(e,i,s,n){if(this.m_matrix[2]!==1)if(this.m_topoGraph.getClusterHalfEdge(e)===-1){if(this.m_matrix[2]!==0&&!(this.m_topoGraph.getClusterParentage(e)&s))return void(this.m_matrix[2]=0)}else this.m_matrix[2]=1}boundaryLineInteriorPoint_(e,i,s,n){if(this.m_matrix[3]===0)return;const r=this.m_topoGraph.getClusterParentage(e);if(r&i&&r&s&&this.m_topoGraph.getClusterUserIndex(e,n)%2!=0)return void(this.m_matrix[3]=0)}boundaryLineExteriorPoint_(e,i,s,n){if(this.m_matrix[5]===0)return;const r=this.m_topoGraph.getClusterParentage(e);if(r&i&&!(r&s)&&this.m_topoGraph.getClusterUserIndex(e,n)%2!=0)return void(this.m_matrix[5]=0)}exteriorLineInteriorPoint_(e,i,s){if(this.m_matrix[6]===0)return;const n=this.m_topoGraph.getClusterParentage(e);n&i||!(n&s)||(this.m_matrix[6]=0)}interiorPointInteriorPoint_(e,i,s){if(this.m_matrix[0]===0)return;const n=this.m_topoGraph.getClusterParentage(e);n&i&&n&s&&(this.m_matrix[0]=0)}interiorPointExteriorPoint_(e,i,s,n){if(this.m_matrix[n]===0)return;const r=this.m_topoGraph.getClusterParentage(e);!(r&i)||r&s||(this.m_matrix[n]=0)}computeMatrixTopoGraphHalfEdges_(e,i){let s=!1;const n=this.m_topoGraph.getGeometryID(e),r=this.m_topoGraph.getGeometryID(i);this.m_visitedIndex=this.m_topoGraph.createUserIndexForHalfEdges();for(let o=this.m_topoGraph.getFirstCluster();o!==ae;o=this.m_topoGraph.getNextCluster(o)){const l=this.m_topoGraph.getClusterHalfEdge(o);if(l===ae){if(this.m_predicatesCluster!==null&&(s=this.m_predicatesCluster(o,n,r),s))break;continue}let c=l;do{let f=c;if(this.m_topoGraph.getHalfEdgeUserIndex(f,this.m_visitedIndex)!==1)do{if(s=this.m_predicatesHalfEdge(f,n,r),s)break;this.m_topoGraph.setHalfEdgeUserIndex(f,this.m_visitedIndex,1),f=this.m_topoGraph.getHalfEdgeNext(f)}while(f!==c&&!s);if(s)break;c=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(f))}while(c!==l);if(s)break}s||this.setRemainingPredicatesToFalse_(),this.m_topoGraph.deleteUserIndexForHalfEdges(this.m_visitedIndex)}computeMatrixTopoGraphClusters_(e,i){let s=!1;const n=this.m_topoGraph.getGeometryID(e),r=this.m_topoGraph.getGeometryID(i);for(let o=this.m_topoGraph.getFirstCluster();o!==ae&&(s=this.m_predicatesCluster(o,n,r),!s);o=this.m_topoGraph.getNextCluster(o));s||this.setRemainingPredicatesToFalse_()}setEditShape_(e,i){this.m_topoGraph.setEditShape(e,i)}setEditShapeCrackAndCluster_(e,i,s){let n=0;if(e.hasCurves()){const r=new Ic,o=e.getEnvelope2D(s),l=Tc(i.total(),o);n=rf(l,0),zh(e,l,i.total(),12e3,r,null,s),r.clearStitcher(e)}Hd(e,i.add(n),s,!1,!1),e.filterClosePoints(0,!0,!0,!1,ae);for(let r=e.getFirstGeometry();r!==ae;r=e.getNextGeometry(r))e.getGeometryType(r)===me.enumPolygon&&tg(e,r,-1,!1,ae,s);this.setEditShape_(e,s)}}function qtt(t){const e=t[1],i=t[2],s=t[5];t[1]=t[3],t[2]=t[6],t[5]=t[7],t[3]=e,t[6]=i,t[7]=s}function Tie(t,e,i){const s=t.getGeometryType();if(Dn(s)){const n=new vi({vd:t.getDescription()});return n.addSegment(t,!0),n}if(s===me.enumEnvelope){const n=t,r=xe.constructEmpty();if(t.queryEnvelope(r),r.height()<=e&&r.width()<=e){const l=new Ht({vd:t.getDescription()});return n.getCenter(l),l}if(r.height()<=e||r.width()<=e){const l=new vi({vd:t.getDescription()}),c=new Ht;return n.queryCornerByVal(0,c),l.startPathPoint(c),n.queryCornerByVal(2,c),l.lineToPoint(c),l}const o=new Wt({vd:t.getDescription()});return o.addEnvelope(n,!1),o}return t}function R_(t){return`${t[0]}${t[3]}${t[6]}${t[1]}${t[4]}${t[7]}${t[2]}${t[5]}${t[8]}`}class tu{nullFunc(){return K(0),!1}constructor(e,i,s,n=!1){this.m_bDone=!1,this.m_tolerance=0,this.m_elementHandle=-1,this.m_query=xe.constructEmpty(),this.m_envInter=xe.constructEmpty(),this.m_quadTree=null,this.m_intersector=null,this.m_function=this.nullFunc;const r=e.getAccelerators();let o=null;r!=null&&(o=n?r.getQuadTreeForPaths():r.getQuadTree());const l=i.getAccelerators();let c=null;if(l!=null&&(c=n?l.getQuadTreeForPaths():l.getQuadTree()),o===null&&c===null&&!n){const f=e.getPointCount(),y=i.getPointCount();if(f>10&&y>10){const _=xe.constructEmpty(),x=xe.constructEmpty(),S=xe.constructEmpty();e.queryLooseEnvelope(_),i.queryLooseEnvelope(x),_.inflateCoords(s,s),x.inflateCoords(s,s),S.setCoords({env2D:_}),S.intersect(x),f>=y?o=bi(e.getGeometryType())?z2(e,S):cte(e,S):c=bi(i.getGeometryType())?z2(i,S):cte(i,S)}}this.construct_(e,o,i,c,s,n)}next(){if(this.m_bQuadTree){if(this.m_bDone)return!1;for(;this.m_function(););return!this.m_bDone}return!!this.m_intersector&&this.m_intersector.next()}getRedElement(){return this.m_bQuadTree?this.m_bSwapElements?this.m_quadTree.getElement(this.m_elementHandle):bi(this.m_queryType)?this.m_bPaths?this.m_pathIndex:this.m_segIter.getStartPointIndex():this.m_pointIndex:this.m_bSwapElements?this.m_intersector.getBlueElement(this.m_intersector.getHandleB()):this.m_intersector.getRedElement(this.m_intersector.getHandleA())}getBlueElement(){return this.m_bQuadTree?this.m_bSwapElements?bi(this.m_queryType)?this.m_bPaths?this.m_pathIndex:this.m_segIter.getStartPointIndex():this.m_pointIndex:this.m_quadTree.getElement(this.m_elementHandle):this.m_bSwapElements?this.m_intersector.getRedElement(this.m_intersector.getHandleA()):this.m_intersector.getBlueElement(this.m_intersector.getHandleB())}getRedEnvelope(){return this.m_bPaths||bn(""),this.m_bQuadTree?this.m_bSwapElements?this.m_quadTree.getElementExtent(this.m_elementHandle):this.m_query:this.m_bSwapElements?this.m_intersector.getBlueEnvelope(this.m_intersector.getHandleB()):this.m_intersector.getRedEnvelope(this.m_intersector.getHandleA())}getBlueEnvelope(){return this.m_bPaths||bn(""),this.m_bQuadTree?this.m_bSwapElements?this.m_query:this.m_quadTree.getElementExtent(this.m_elementHandle):this.m_bSwapElements?this.m_intersector.getRedEnvelope(this.m_intersector.getHandleA()):this.m_intersector.getBlueEnvelope(this.m_intersector.getHandleB())}construct_(e,i,s,n,r,o){const l=xe.constructEmpty(),c=xe.constructEmpty();e.queryLooseEnvelope(l),s.queryLooseEnvelope(c),l.inflateCoords(r,r),c.inflateCoords(r,r),this.m_envInter.setCoords({env2D:l}),this.m_envInter.intersect(c),this.m_multiVertexImplA=e,this.m_multiVertexImplB=s;const f=e.getGeometryType(),y=s.getGeometryType();this.m_bPaths=o,this.m_pathIndex=-1,this.m_pointIndex=-1,this.m_bSwapElements=!1,this.m_queryType=me.enumUnknown,this.m_bQuadTree=!1,i!==null&&(this.m_bDone=!1,this.m_tolerance=r,this.m_quadTree=i,this.m_qtIter=this.m_quadTree.getIteratorForQT(),this.m_bQuadTree=!0,this.m_bSwapElements=!0,bi(y)?(this.m_queryType=y,this.m_function=this.nextPath_,o?this.m_pathIndex=s.getPathCount():this.m_segIter=s.querySegmentIterator()):(this.m_queryType=y,this.m_function=this.nextPoint_,this.m_pointIndex=s.getPointCount())),this.m_bQuadTree||n!==null&&(this.m_bDone=!1,this.m_tolerance=r,this.m_quadTree=n,this.m_qtIter=this.m_quadTree.getIteratorForQT(),this.m_bQuadTree=!0,this.m_bSwapElements=!1,bi(f)?(this.m_queryType=f,this.m_function=this.nextPath_,o?this.m_pathIndex=e.getPathCount():this.m_segIter=e.querySegmentIterator()):(this.m_queryType=f,this.m_function=this.nextPoint_,this.m_pointIndex=e.getPointCount())),this.m_bQuadTree||(o&&bi(f)&&bi(y)?this.m_intersector=hJe(e,s,r):bi(f)&&bi(y)?(this.m_intersector=cJe(e,s,r),this.m_bSwapElements=!1):bi(f)&&!bi(y)?(this.m_intersector=ute(e,s,r),this.m_bSwapElements=!1):!bi(f)&&bi(y)?(this.m_intersector=ute(s,e,r),this.m_bSwapElements=!0):(this.m_intersector=dJe(e,s,r),this.m_bSwapElements=!1))}nextPath_(){return this.m_bPaths?--this.m_pathIndex==-1?(this.m_bDone=!0,!1):(this.m_bSwapElements?this.m_multiVertexImplB.queryPathEnvelope(this.m_pathIndex,this.m_query):this.m_multiVertexImplA.queryPathEnvelope(this.m_pathIndex,this.m_query),this.m_qtIter.resetIterator(this.m_query,this.m_tolerance),this.m_function=this.iterate_,!0):this.m_segIter.nextPath()?(this.m_function=this.nextSegment_,!0):(this.m_bDone=!0,!1)}nextSegment_(){if(!this.m_segIter.hasNextSegment())return this.m_function=this.nextPath_,!0;const e=this.m_segIter.nextSegment(),i=new xe;return e.queryLooseEnvelope(i),!i.isIntersecting(this.m_envInter)||(this.m_qtIter.resetIterator(e,this.m_tolerance),this.m_function=this.iterate_,!0)}nextPoint_(){if(--this.m_pointIndex==-1)return this.m_bDone=!0,!1;const e=new Y;if(this.m_bSwapElements){const i=this.m_multiVertexImplB.getXY(this.m_pointIndex);e.setCoordsPoint2D(i)}else{const i=this.m_multiVertexImplA.getXY(this.m_pointIndex);e.setCoordsPoint2D(i)}return!this.m_envInter.contains(e)||(this.m_qtIter.resetIterator(xe.construct(e.x,e.y,e.x,e.y),this.m_tolerance),this.m_function=this.iterate_,!0)}iterate_(){return this.m_elementHandle=this.m_qtIter.next(),this.m_elementHandle===-1&&(bi(this.m_queryType)?(this.m_function=this.m_bPaths?this.nextPath_:this.nextSegment_,!0):(this.m_function=this.nextPoint_,!0))}}function MN(t){return t===2?1:t===1?2:t===128?64:t===64?128:t}function Vtt(t,e,i){let s;if(t instanceof Rc||t===null){const n=xe.constructEmpty();n.setCoords({pt:e}),n.mergeEnvelope2D(i),s=Ug(t,n,!1)}else s=t;return s}function D1e(t,e,i){let s;if(t instanceof Rc||t===null){const n=xe.constructEmpty();n.setCoords({env2D:e}),n.mergeEnvelope2D(i),s=Ug(t,n,!1)}else s=t;return s}function G0(t,e,i,s,n){if(t.isEmpty()||e.isEmpty())return s===4;Xc(t),Xc(e);let r=t.getGeometryType(),o=e.getGeometryType();if(r===me.enumEnvelope){if(o===me.enumEnvelope)return Gtt(t,e,i,s);if(o===me.enumPoint)return Iie(e,t,i,MN(s))}else if(r===me.enumPoint){if(o===me.enumEnvelope)return Iie(t,e,i,s);if(o===me.enumPoint)return jtt(t,e,i,s)}const l=xe.constructEmpty();t.queryEnvelope(l);const c=xe.constructEmpty();e.queryEnvelope(c);const f=D1e(i,l,c);if(Tf(l,c,f))return s===4;let y=!1,_=null,x=null,S=null,P=null;switch(Dn(r)?(_=new vi({vd:t.getDescription()}),_.addSegment(t,!0),S=_,r=me.enumPolyline):S=t,Dn(o)?(x=new vi({vd:e.getDescription()}),x.addSegment(e,!0),P=x,o=me.enumPolyline):P=e,r!==me.enumEnvelope&&o!==me.enumEnvelope?(S.getDimension()<P.getDimension()||r===me.enumPoint&&o===me.enumMultiPoint)&&(s=MN(s)):r!==me.enumPolygon&&o!==me.enumEnvelope&&(s=MN(s)),r){case me.enumPolygon:switch(o){case me.enumPolygon:y=Btt(S,P,f,s,n);break;case me.enumPolyline:y=Mie(S,P,f,s,n);break;case me.enumPoint:y=Aie(S,P,f,s);break;case me.enumMultiPoint:y=Die(S,P,f,s);break;case me.enumEnvelope:y=kie(S,P,f,s,n)}break;case me.enumPolyline:switch(o){case me.enumPolygon:y=Mie(P,S,f,s,n);break;case me.enumPolyline:y=Htt(S,P,f,s,n);break;case me.enumPoint:y=Nie(S,P,f,s);break;case me.enumMultiPoint:y=$ie(S,P,f,s);break;case me.enumEnvelope:y=Oie(S,P,f,s,n)}break;case me.enumPoint:switch(o){case me.enumPolygon:y=Aie(P,S,f,s);break;case me.enumPolyline:y=Nie(P,S,f,s);break;case me.enumMultiPoint:y=Rie(P,S,f,s)}break;case me.enumMultiPoint:switch(o){case me.enumPolygon:y=Die(P,S,f,s);break;case me.enumPolyline:y=$ie(P,S,f,s);break;case me.enumMultiPoint:y=Utt(S,P,f,s);break;case me.enumPoint:y=Rie(S,P,f,s);break;case me.enumEnvelope:y=Lie(S,P,f,s)}break;case me.enumEnvelope:switch(o){case me.enumPolygon:y=kie(P,S,f,s,n);break;case me.enumPolyline:y=Oie(P,S,f,s,n);break;case me.enumMultiPoint:y=Lie(P,S,f,s)}}return y}function Gtt(t,e,i,s,n){if(t.isEmpty()||e.isEmpty())return s===4;const r=xe.constructEmpty();t.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o);const l=D1e(i,r,o);switch(s){case 4:return Tf(r,o,l);case 2:return Z4(o,r,l,!1);case 128:return Z4(o,r,l,!0);case 1:return Z4(r,o,l,!1);case 64:return Z4(r,o,l,!0);case 3:return fm(r,o,l);case 8:return zit(r,o,l);case 32:return qit(r,o,l);case 16:return!1}return!1}function Iie(t,e,i,s,n){if(t.isEmpty()||e.isEmpty())return s===4;const r=t.getXY(),o=xe.constructEmpty();e.queryEnvelope(o);const l=Vtt(i,r,o);switch(s){case 4:return a7(r,o,l);case 2:case 128:return Fit(r,o,l);case 1:case 64:return!1;case 3:return Rit(r,o,l);case 8:return Lit(r,o,l)}return!1}function jtt(t,e,i,s,n){if(t.isEmpty()||e.isEmpty())return s===4;const r=t.getXY(),o=e.getXY();let l;if(i instanceof Rc||i===null){const c=xe.constructEmpty();c.setCoords({pt:r}),c.merge(o),l=Ug(i,c,!1)}else l=i;switch(s){case 4:return Oit(r,o,l);case 2:case 128:return Yie(o,r,l);case 1:case 64:return Yie(r,o,l);case 3:return R1e(r,o,l)}return!1}function Tf(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:e}),s.inflateCoords(i,i),!t.isIntersecting(s)}function is(t,e,i,s=!1){const n=t.getGeometryType(),r=e.getGeometryType();if(el(n)){const o=t.getImpl().getAccelerators();if(o!==null){const l=o.getRasterizedGeometry();K(l===null)}}if(el(r)){const o=e.getImpl().getAccelerators();if(o!==null){const l=o.getRasterizedGeometry();K(l===null)}}return 0}function a7(t,e,i,s){const n=xe.constructEmpty();return n.setCoords({env2D:e}),n.inflateCoords(i,i),!n.contains(t)}function Btt(t,e,i,s,n){switch(s){case 4:return Ytt(t,e,i);case 2:return Fie(e,t,i,n);case 128:return zie(e,t,i);case 1:return Fie(t,e,i,n);case 64:return zie(t,e,i);case 3:return k1e(t,e,i,n);case 8:return Xtt(t,e,i);case 32:return Wtt(t,e,i,n)}return!1}function Mie(t,e,i,s,n){switch(s){case 4:return Ztt(t,e,i);case 1:return Jtt(t,e,i,n);case 64:return Qtt(t,e,i);case 8:return N1e(t,e,i,n);case 16:return Ktt(t,e,i)}return!1}function Aie(t,e,i,s,n){switch(s){case 4:return eit(t,e,i);case 1:case 64:return iit(t,e,i);case 8:return tit(t,e,i)}return!1}function Die(t,e,i,s,n){switch(s){case 4:return sit(t,e,i);case 1:return qie(t,e,i,!1);case 64:return qie(t,e,i,!0);case 8:return nit(t,e,i);case 16:return rit(t,e,i)}return!1}function kie(t,e,i,s,n){if(ait(t,e,i))return s===4;if(s===4)return!1;switch(s){case 2:return Vie(t,e,i,!1);case 128:return Vie(t,e,i,!0);case 1:return Gie(t,e,i,!1,n);case 64:return Gie(t,e,i,!0,n);case 3:return oit(t,e,i,n);case 8:return lit(t,e,i,n);case 32:return uit(t,e,i,n);case 16:return!1}return!1}function Htt(t,e,i,s,n){switch(s){case 4:return hit(t,e,i);case 2:return jie(e,t,i,n);case 128:return Bie(e,t,i,n);case 1:return jie(t,e,i,n);case 64:return Bie(t,e,i,n);case 3:return cit(t,e,i,n);case 8:return dit(t,e,i,n);case 32:return pit(t,e,i,n);case 16:return fit(t,e,i,n)}return!1}function Nie(t,e,i,s,n){switch(s){case 4:return mit(t,e,i);case 1:case 64:return yit(t,e,i);case 8:return git(t,e,i)}return!1}function $ie(t,e,i,s,n){switch(s){case 4:return vit(t,e,i);case 1:case 64:return xit(t,e,i);case 8:return _it(t,e,i);case 16:return bit(t,e,i)}return!1}function Oie(t,e,i,s,n){if(Sit(t,e,i))return s===4;if(s===4)return!1;switch(s){case 2:return Hie(t,e,i,!1);case 128:return Hie(t,e,i,!0);case 1:case 64:case 32:return!1;case 3:return wit(t,e,i);case 8:return Eit(t,e,i,n);case 16:return Cit(t,e,i)}return!1}function Utt(t,e,i,s,n){switch(s){case 4:return Tit(t,e,i);case 2:case 128:return wv(e,t,i);case 1:case 64:return wv(t,e,i);case 3:return Pit(t,e,i);case 32:return Iit(t,e,i)}return!1}function Rie(t,e,i,s,n){switch(s){case 4:return O1e(t,e,i);case 2:case 128:return Mit(t,e,i);case 1:case 64:return Ait(t,e,i);case 3:return $1e(t,e,i)}return!1}function Lie(t,e,i,s,n){switch(s){case 4:return kit(t,e,i);case 2:return Uie(t,e,i,!1);case 128:return Uie(t,e,i,!0);case 1:case 64:return!1;case 3:return Dit(t,e,i);case 8:return Nit(t,e,i);case 16:return $it(t,e,i)}return!1}function k1e(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();if(t.queryEnvelope(n),e.queryEnvelope(r),!fm(n,r,i))return!1;if(is(t,e),F1e(t,e,i))return!0;const o=t.calculateLength2D(),l=e.calculateLength2D(),c=Math.max(t.getPointCount(),e.getPointCount());return Math.abs(o-l)>4*c*i?!1:t.hasNonLinearSegments()||e.hasNonLinearSegments()?Wc(t,e,i,"**F**FFF*",s,!1):z1e(t,e,i,!0)}function Ytt(t,e,i,s){return is(t,e,i,!0),a5(t,e,i,!0)===1}function Xtt(t,e,i,s){return is(t,e),B1e(t,e,i,null)}function Wtt(t,e,i,s){return is(t,e),H1e(t,e,i,s)}function Fie(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!_r(n,r,i)&&(is(t,e),U1e(t,e,i,s))}function zie(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!_r(n,r,i)&&(is(t,e),a5(t,e,i,!1)===2)}function Ztt(t,e,i,s){return is(t,e,i,!0),a5(t,e,i,!0)===1}function N1e(t,e,i,s){return is(t,e),Bit(t,e,i,s)}function Ktt(t,e,i,s){return is(t,e),Hit(t,e,i,null)}function Jtt(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!_r(n,r,i)&&(is(t,e),Uit(t,e,i,s))}function Qtt(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!_r(n,r,i)&&(is(t,e),a5(t,e,i,!1)===2)}function eit(t,e,i,s){return W1e(t,e,i)===0}function tit(t,e,i,s){return Xit(t,e.getXY(),i)}function iit(t,e,i,s){return Yit(t,e.getXY(),i)}function sit(t,e,i,s,n){return is(t,e),Vit(t,e,i)===1}function nit(t,e,i,s){is(t,e);const n=xe.constructEmpty();t.queryEnvelope(n),n.inflateCoords(i,i);const r=new Y;let o=!1;const l=t.getImpl(),c=new Wt;let f=t,y=!1;for(let _=0;_<e.getPointCount();_++){if(e.queryXY(_,r),n.contains(r)){const x=El(f,r,i);if(x===2)o=!0;else if(x===1)return!1}y||(!Ag(t,e.getPointCount()-1)||l.getAccelerators()!==null&&l.getAccelerators().getQuadTree()!==null?f=t:(t.copyTo(c),c.getImpl().buildQuadTreeAccelerator(1),f=c),y=!0)}return!!o}function rit(t,e,i,s){is(t,e);const n=new xe,r=new xe,o=new xe;t.queryEnvelope(n),e.queryEnvelope(o),r.setCoords({env2D:n}),r.inflateCoords(i,i);let l=!1,c=!1;const f=new Y,y=t.getImpl(),_=new Wt;let x=t,S=!1;for(let P=0;P<e.getPointCount();P++){if(e.queryXY(P,f),r.contains(f)){const A=El(x,f,i);A===0?c=!0:A===1&&(l=!0)}else c=!0;if(l&&c)return!0;S||(!Ag(t,e.getPointCount()-1)||y.getAccelerators()!==null&&y.getAccelerators().getQuadTree()!==null?x=t:(t.copyTo(_),_.getImpl().buildQuadTreeAccelerator(1),x=_),S=!0)}return!1}function qie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),!_r(r,o,i))return!1;is(t,e);let l=!1;const c=new Y,f=t.getImpl(),y=new Wt;let _=t,x=!1;for(let S=0;S<e.getPointCount();S++){if(e.queryXY(S,c),!r.contains(c))return!1;const P=El(_,c,i);if(P===1)l=!0;else if(P===0)return!1;if(s&&P===2)return!1;x||(!Ag(t,e.getPointCount()-1)||f.getAccelerators()!==null&&f.getAccelerators().getQuadTree()!==null?_=t:(t.copyTo(y),y.getImpl().buildQuadTreeAccelerator(1),_=y),x=!0)}return l}function oit(t,e,i,s){const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),!fm(n,r,i))return!1;const o=new Wt;return o.addEnvelope(e,!1),k1e(t,o,i,s)}function ait(t,e,i,s){is(t,e);const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),_r(r,n,i)?!1:El(t,r.getLowerLeft(),0)===0&&!r.contains(t.getXY(0))&&!j1e(t,r,i)}function lit(t,e,i,s){is(t,e);const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),_r(r,n,i)||r.height()<=i||r.width()<=i)return!1;const o=new Wt;return o.addEnvelope(e,!1),B1e(t,o,i,s)}function uit(t,e,i,s){is(t,e);const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),_r(r,n,i)||r.height()<=i||r.width()<=i)return!1;const o=new Wt;return o.addEnvelope(e,!1),H1e(t,o,i,s)}function Vie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();return t.queryEnvelope(r),e.queryEnvelope(o),s?l7(o,r,i):_r(o,r,i)}function Gie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),!_r(r,o,i))return!1;is(t,e);const l=new Wt;return l.addEnvelope(e,!1),s?a5(t,l,i,!1)===2:U1e(t,l,i,n)}function cit(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),fm(n,r,i)?(is(t,e),F1e(t,e,i)?!0:t.hasNonLinearSegments()||e.hasNonLinearSegments()?Wc(t,e,i,"**F**FFF*",s,!1):z1e(t,e,i,!1)):!1}function hit(t,e,i,s){is(t,e);const n=t.getImpl(),r=e.getImpl();return!new tu(n,r,i,!0).next()||!q1e(t,e,i)}function dit(t,e,i,s){is(t,e);const n=[],r=Aj(t,e,i,n);if(r===-2){const f=xe.constructEmpty(),y=xe.constructEmpty(),_=xe.constructEmpty();let x,S;if(t.queryEnvelope(f),e.queryEnvelope(y),f.inflateCoords(1e3*i,1e3*i),y.inflateCoords(1e3*i,1e3*i),_.setCoords({env2D:f}),_.intersect(y),t.getPointCount()>10){if(x=vs(t,_,i,0,s),x.isEmpty())return!1}else x=t;if(e.getPointCount()>10){if(S=vs(e,_,i,0,s),S.isEmpty())return!1}else S=e;return Wc(x,S,i,"F********",s,!1)}if(r!==0)return!1;const o=new Jn;for(let f=0;f<n.length;f+=2){const y=n[f],_=n[f+1];o.addXY(y,_)}const l=t.getBoundary(),c=e.getBoundary();return l.addPoints(c,0,c.getPointCount()),!l.isEmpty()&&wv(l,o,i)}function fit(t,e,i,s){is(t,e);const n=[],r=Aj(t,e,i,n);if(r===-2){const f=xe.constructEmpty(),y=xe.constructEmpty(),_=xe.constructEmpty();let x,S;if(t.queryEnvelope(f),e.queryEnvelope(y),f.inflateCoords(1e3*i,1e3*i),y.inflateCoords(1e3*i,1e3*i),_.setCoords({env2D:f}),_.intersect(y),t.getPointCount()>10){if(x=vs(t,_,i,0,s),x.isEmpty())return!1}else x=t;if(e.getPointCount()>10){if(S=vs(e,_,i,0,s),S.isEmpty())return!1}else S=e;return Wc(x,S,i,"0********",s,!1)}if(r!==0)return!1;const o=new Jn;for(let f=0;f<n.length;f+=2){const y=n[f],_=n[f+1];o.addXY(y,_)}const l=t.getBoundary(),c=e.getBoundary();return l.addPoints(c,0,c.getPointCount()),!!l.isEmpty()||!wv(l,o,i)}function pit(t,e,i,s){is(t,e);const n=xe.constructEmpty(),r=xe.constructEmpty();t.queryEnvelope(n),e.queryEnvelope(r);const o=XE(n,r,i),l=XE(r,n,i),c=t.hasNonLinearSegments(),f=e.hasNonLinearSegments(),y=Aj(t,e,i,null);if(y===-1)return!1;if(y===1){if(o&&l)return!0;if(!c&&!f)return o&&!l?!Ay(e,t,i,!1):l&&!o?!Ay(t,e,i,!1):!Ay(t,e,i,!1)&&!Ay(e,t,i,!1)}const _=xe.constructEmpty(),x=xe.constructEmpty(),S=xe.constructEmpty();let P,A;_.setCoords({env2D:n}),_.inflateCoords(1e3*i,1e3*i),x.setCoords({env2D:r}),x.inflateCoords(1e3*i,1e3*i),S.setCoords({env2D:_}),S.intersect(x);let k="";if(k+="1*",o){if(e.getPointCount()>10){if(A=vs(e,S,i,0,s),A.isEmpty())return!1}else A=e;k+="****"}else A=e,k+="T***";if(l){if(t.getPointCount()>10){if(P=vs(t,S,i,0,s),P.isEmpty())return!1}else P=t;k+="***"}else P=t,k+="T**";return Wc(P,A,i,k,s,!1)}function jie(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),_r(n,r,i)?(is(t,e),t.hasNonLinearSegments()||e.hasNonLinearSegments()?Wc(t,e,i,"******FF*",s,!1):Ay(e,t,i,!1)):!1}function Bie(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),_r(n,r,i)?(is(t,e),Wc(t,e,i,"T**FF*FF*",s,!1)):!1}function mit(t,e,i,s){return is(t,e),!G1e(t,e.getXY(),i)}function git(t,e,i,s){return is(t,e),X1e(t,e.getXY(),i)}function yit(t,e,i,s){return is(t,e),jit(t,e.getXY(),i)}function vit(t,e,i,s){return is(t,e),!V1e(t,e,i,!1)}function _it(t,e,i,s){is(t,e);const n=t.getImpl(),r=e.getImpl(),o=new Jn,l=new tu(n,r,i,!1),c=n.querySegmentIterator();let f=!1;for(;l.next();){const _=l.getRedElement(),x=l.getBlueElement();c.resetToVertex(_,-1);const S=c.nextSegment(),P=r.getXY(x);S.isIntersectingPoint(P,i)&&(f=!0,o.addPoint2D(P))}if(!f)return!1;const y=t.getBoundary();return!y.isEmpty()&&wv(y,o,i)}function bit(t,e,i,s){is(t,e);const n=t.getImpl(),r=e.getImpl(),o=r.getPointCount(),l=Vi(o,!1),c=new tu(n,r,i,!1),f=n.querySegmentIterator();let y=!1;for(;c.next();){const P=c.getRedElement(),A=c.getBlueElement();f.resetToVertex(P,-1);const k=f.nextSegment(),$=r.getXY(A);k.isIntersectingPoint($,i)&&(y=!0,l[A]=!0)}if(!y)return!1;let _=!1;for(let P=0;P<o;P++)if(!l[P]){_=!0;break}if(!_)return!1;const x=t.getBoundary();if(x.isEmpty())return!0;const S=new Jn;for(let P=0;P<o;P++)l[P]&&S.addPoint2D(r.getXY(P));return!wv(x,S,i)}function xit(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),!_r(r,o,i))return!1;is(t,e);const l=V1e(t,e,i,!0);if(!l)return l;const c=t.getBoundary();return c.isEmpty()?l:!wv(c,e,i)}function wit(t,e,i,s){const n=new xe,r=new xe;return t.queryEnvelope(n),e.queryEnvelope(r),!(r.height()>i&&r.width()>i)&&fm(n,r,i)}function Sit(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();t.queryEnvelope(n),e.queryEnvelope(r);const o=Wit(r,n,i);return o===0?!j1e(t,r,i):o===4}function Eit(t,e,i,s){const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),r.height()<=i||r.width()<=i)return!1;const o=new xe,l=new xe;if(o.setCoords({env2D:r}),l.setCoords({env2D:r}),o.inflateCoords(i,i),l.inflateCoords(-i,-i),l.containsEnvelope(n)||!n.isIntersecting(o))return!1;const c=t.getImpl().querySegmentIterator();c.stripAttributes();const f=t.getImpl().getAccelerators();let y=null,_=null;f!==null&&(y=f.getQuadTree(),y!==null&&(_=y.getIterator(r,i))),_||c.nextPath()||bt("relational_operations");let x=!1,S=null;const P=new Y,A=new Y,k=t.hasNonLinearSegments();let $=!1;for(;;){if(_!==null){const G=_.next();if(G===-1)break;c.resetToVertex(y.getElement(G),-1),S=c.nextSegment()}else{for(;!c.hasNextSegment()&&c.nextPath(););if(!c.hasNextSegment())break;S=c.nextSegment()}if(k&&S.getGeometryType()!==me.enumLine){const G=new xe;if(S.queryEnvelope(G),l.containsEnvelope(G))return!1;if(o.isIntersecting(G)){$=!0;break}}else{P.assign(S.getStartXY()),A.assign(S.getEndXY());let G=l.clipLine(P,A);if(G!==0)return!1;x||(G=o.clipLine(P,A),G!==0&&(x=!0))}}if(!$)return x;const F=new Wt;return F.addEnvelope(r,!1),N1e(F,t,i,s)}function Hie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),o.height()<=i||o.width()<=i)return!1;if(s)return l7(o,r,i);if(!_r(o,r,i))return!1;const l=xe.constructEmpty();l.setCoords({env2D:o}),l.inflateCoords(-i,-i);const c=xe.constructEmpty();if(c.setCoords({env2D:o}),c.inflateCoords(i,i),l.containsEnvelope(r))return!0;const f=t.getImpl().querySegmentIterator();f.stripAttributes(),f.nextPath()||bt("relational_operations");let y,_,x,S,P,A,k=!1;const $=t.hasNonLinearSegments();for($&&(x=new si,S=new si,P=new si,A=new si,l.querySide(0,x),l.querySide(1,S),l.querySide(2,P),l.querySide(3,A));;){for(;!f.hasNextSegment()&&f.nextPath(););if(!f.hasNextSegment())break;const F=f.nextSegment();if($&&F.getGeometryType()!==me.enumLine){if(F.isIntersecting(x,i)){k=!0;break}if(F.isIntersecting(S,i)){k=!0;break}if(F.isIntersecting(P,i)){k=!0;break}if(F.isIntersecting(A,i)){k=!0;break}}else if(y=F.getStartXY(),_=F.getEndXY(),l.clipLine(y,_)!==0){k=!0;break}}return k}function Cit(t,e,i,s){const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),r.height()<=i||r.width()<=i)return!1;const o=new xe;if(o.setCoords({env2D:r}),o.inflateCoords(i,i),o.containsEnvelope(n))return!1;const l=!0,c=new xe;if(c.setCoords({env2D:r}),c.inflateCoords(-i,-i),!c.isIntersecting(n))return!1;const f=t.getImpl().querySegmentIterator();f.stripAttributes();const y=t.getImpl().getAccelerators();let _=null,x=null;if(y!==null&&(_=y.getQuadTree(),_!==null&&(x=_.getIterator(r,i))),!x){const B=f.nextPath();K(B)}let S=!1,P=null;const A=new Y,k=new Y;let $=null,F=null,G=null,V=null;for(t.hasNonLinearSegments()&&($=new si,F=new si,G=new si,V=new si,c.querySide(0,$),c.querySide(1,F),c.querySide(2,G),c.querySide(3,V));;){if(x!==null){const B=x.next();if(B===-1)break;f.resetToVertex(_.getElement(B),-1),P=f.nextSegment()}else{for(;!f.hasNextSegment()&&f.nextPath(););if(!f.hasNextSegment())break;P=f.nextSegment()}if(P.getGeometryType()===me.enumLine){if(A.assign(P.getStartXY()),k.assign(P.getEndXY()),c.clipLine(A,k)!==0){S=!0;break}}else{if($.isIntersecting(P,i)){S=!0;break}if(F.isIntersecting(P,i)){S=!0;break}if(G.isIntersecting(P,i)){S=!0;break}if(V.isIntersecting(P,i)){S=!0;break}}}return S&&l}function Pit(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!fm(n,r,i)&&(!!Git(t,e,i)||Mj(t,e,i,!1,!0,!1))}function Tit(t,e,i,s){const n=t,r=e,o=new tu(n,r,i,!1),l=i*i,c=new Y,f=new Y;for(;o.next();){const y=o.getRedElement(),_=o.getBlueElement();if(n.queryXY(y,c),r.queryXY(_,f),Y.sqrDistance(c,f)<=l)return!1}return!0}function Iit(t,e,i,s){return Mj(t,e,i,!1,!1,!0)}function wv(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),!!_r(n,r,i)&&Mj(e,t,i,!0,!1,!1)}function $1e(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();return t.queryEnvelope(n),e.queryEnvelope(r),fm(n,r,i)}function O1e(t,e,i,s){return Y1e(t,e.getXY(),i)}function Mit(t,e,i,s){return $1e(t,e,i)}function Ait(t,e,i,s){return!O1e(t,e,i)}function Dit(t,e,i,s){const n=new xe,r=new xe;return t.queryEnvelope(n),e.queryEnvelope(r),!(r.height()>i||r.width()>i)&&fm(n,r,i)}function kit(t,e,i,s){const n=xe.constructEmpty(),r=xe.constructEmpty();if(t.queryEnvelope(n),e.queryEnvelope(r),_r(r,n,i))return!1;const o=xe.constructEmpty();o.setCoords({env2D:r}),o.inflateCoords(i,i);const l=new Y;for(let c=0;c<t.getPointCount();c++)if(t.queryXY(c,l),o.contains(l))return!1;return!0}function Nit(t,e,i,s){const n=new xe,r=new xe,o=new xe;if(e.queryEnvelope(n),n.height()<=i||n.width()<=i)return!1;r.setCoords({env2D:n}),o.setCoords({env2D:n}),r.inflateCoords(i,i),o.inflateCoords(-i,-i);const l=new Y;let c=!1;for(let f=0;f<t.getPointCount();f++)if(t.queryXY(f,l),r.contains(l)){if(o.containsExclusive(l))return!1;c=!0}return c}function Uie(t,e,i,s,n){const r=xe.constructEmpty(),o=xe.constructEmpty();if(t.queryEnvelope(r),e.queryEnvelope(o),o.height()<=i||o.width()<=i)return!1;if(s)return l7(o,r,i);if(!_r(o,r,i))return!1;let l=!1;const c=xe.constructEmpty(),f=xe.constructEmpty();c.setCoords({env2D:o}),f.setCoords({env2D:o}),c.inflateCoords(-i,-i),f.inflateCoords(i,i);const y=new Y;for(let _=0;_<t.getPointCount();_++){if(t.queryXY(_,y),!f.contains(y))return!1;c.containsExclusive(y)&&(l=!0)}return l}function $it(t,e,i,s){const n=new xe,r=new xe;if(t.queryEnvelope(n),e.queryEnvelope(r),_r(r,n,i)||r.height()<=i||r.width()<=i)return!1;const o=new xe,l=new xe;o.setCoords({env2D:r}),o.inflateCoords(-i,-i),l.setCoords({env2D:r}),l.inflateCoords(i,i);const c=new Y;let f=!1,y=!1;for(let _=0;_<t.getPointCount();_++)if(t.queryXY(_,c),!f&&o.containsExclusive(c)&&(f=!0),y||l.contains(c)||(y=!0),f&&y)return!0;return!1}function R1e(t,e,i,s){return Y.sqrDistance(t,e)<=i*i}function Oit(t,e,i,s){return Y.sqrDistance(t,e)>i*i}function Yie(t,e,i,s){return R1e(t,e,i)}function Rit(t,e,i,s){const n=new xe;return n.setCoords({pt:t}),fm(n,e,i)}function Lit(t,e,i,s){if(e.height()<=i||e.width()<=i)return!1;const n=new xe,r=new xe;return n.setCoords({env2D:e}),n.inflateCoords(i,i),!!n.contains(t)&&(r.setCoords({env2D:e}),r.inflateCoords(-i,-i),!r.containsExclusive(t))}function Fit(t,e,i,s){if(e.height()<=i||e.width()<=i)return!1;const n=xe.constructEmpty();return n.setCoords({env2D:e}),n.inflateCoords(-i,-i),n.containsExclusive(t)}function fm(t,e,i,s){return _r(t,e,i)&&_r(e,t,i)}function zit(t,e,i,s){if(t.height()<=i||t.width()<=i||e.height()<=i||e.width()<=i)return!1;const n=new xe;return n.setCoords({env2D:t}),n.inflateCoords(-i,-i),n.intersect(e),!(!n.isEmpty()&&n.height()>i&&n.width()>i)&&(n.setCoords({env2D:t}),n.inflateCoords(i,i),n.intersect(e),!n.isEmpty())}function qit(t,e,i,s){if(t.height()<=i||t.width()<=i||e.height()<=i||e.width()<=i||_r(t,e,i)||_r(e,t,i))return!1;const n=new xe;return n.setCoords({env2D:t}),n.inflateCoords(-i,-i),n.intersect(e),!n.isEmpty()&&(n.height()>i||n.width()>i)}function Z4(t,e,i,s,n){if(t.height()<=i||t.width()<=i)return!1;if(s)return l7(t,e,i);if(!_r(t,e,i))return!1;const r=xe.constructEmpty();return r.setCoords({env2D:t}),r.inflateCoords(-i,-i),r.intersect(e),!r.isEmpty()}function a5(t,e,i,s,n){const r=new Y,o=new Y,l=xe.constructEmpty(),c=xe.constructEmpty(),f=t.getImpl(),y=e.getImpl(),_=y.getGeometryType(),x=new tu(f,y,i,!0);if(!x.next())return 1;if(q1e(t,e,i))return s?4:0;const S=new Wt;let P=t;const A=new Wt;let k=null;_===me.enumPolygon&&(k=e);const $=_===me.enumPolygon?Vi(f.getPathCount(),!1):[],F=Vi(y.getPathCount(),!1);let G=!1,V=!1,B=!1,W=!1,J=!1,re=!1;do{if(B&&J||W&&re||B&&W)break;const se=x.getRedElement(),oe=x.getBlueElement();if(!F[oe]&&(o.assign(e.getXY(e.getPathStart(oe))),l.setCoords({env2D:x.getRedEnvelope()}),l.inflateCoords(i,i),l.contains(o))){if(El(P,o,0)!==0){if(W=!0,s)return 4}else re=!0;F[oe]=!0}if(_===me.enumPolygon&&!$[se]&&(r.assign(t.getXY(t.getPathStart(se))),c.setCoords({env2D:x.getBlueEnvelope()}),c.inflateCoords(i,i),c.contains(r))){if(El(k,r,0)!==0){if(B=!0,s)return 4}else J=!0;$[se]=!0}if(G||(!Ag(t,e.getPathCount()-1)||f.getAccelerators()!==null&&f.getAccelerators().getQuadTree()!==null?P=t:(t.copyTo(S),S.getImpl().buildQuadTreeAccelerator(1),P=S),G=!0),_===me.enumPolygon&&!V){const pe=e;!Ag(pe,t.getPathCount()-1)||y.getAccelerators()!==null&&y.getAccelerators().getQuadTree()!==null?k=e:(pe.copyTo(A),A.getImpl().buildQuadTreeAccelerator(1),k=A),V=!0}}while(x.next());if(!B&&!W)return 1;if(!J||!re){if(_===me.enumPolygon){for(let se=0,oe=f.getPathCount();se<oe;se++)if(!$[se]){J=!0;break}}for(let se=0,oe=y.getPathCount();se<oe;se++)if(!F[se]){re=!0;break}}return B&&J||W&&re||B&&W?4:W?2:3}function Vit(t,e,i,s,n){const r=xe.constructEmpty();t.queryEnvelope(r),r.inflateCoords(i,i);const o=new Y,l=t.getImpl(),c=new Wt;let f=t,y=!1,_=!1,x=!1;for(let S=0;S<e.getPointCount();S++){if(e.queryXY(S,o),r.contains(o)){const P=El(f,o,i);if(P===1)return _=!0,4;if(P===2)return 4;x=!0}else x=!0;y||(!Ag(t,e.getPointCount()-1)||l.getAccelerators()!==null&&l.getAccelerators().getQuadTree()!=null?f=t:(t.copyTo(c),c.getImpl().buildQuadTreeAccelerator(1),f=c),y=!0)}return _?x?4:2:1}function L1e(t,e,i,s,n){s[0]=!1;const r=t.getImpl(),o=e.getImpl(),l=r.querySegmentIterator(),c=o.querySegmentIterator(),f=[0,0],y=[0,0],_=new tu(r,o,i);let x=!1;for(;_.next();){const S=_.getRedElement(),P=_.getBlueElement();l.resetToVertex(S,-1),c.resetToVertex(P,-1);const A=l.nextSegment(),k=c.nextSegment();let $=0;if(Ax(A,k)?!x&&k.isIntersecting(A,i)&&(x=!0):$=k.intersect(A,null,y,f,i),$!==0&&(x=!0,$===1)){const F=f[0],G=y[0];if(F>0&&F<1&&G>0&&G<1)return s[0]=!0,!1}}if(!x){s[0]=!0;const S=xe.constructEmpty();t.queryEnvelope(S),S.inflateCoords(i,i);const P=new Wt;let A=t,k=!1;for(let W=0,J=e.getPathCount();W<J;W++)if(e.getPathSize(W)>0){const re=xe.constructEmpty();if(e.queryPathEnvelope(W,re),!S.isIntersecting(re))return!1;{const se=q6(A,e.getXY(e.getPathStart(W)),0);if(K(se!==-1),se===0)return!1}k||(!Ag(t,e.getPathCount()-1)||r.getAccelerators()!==null&&r.getAccelerators().getQuadTree()!==null?A=t:(t.copyTo(P),P.getImpl().buildQuadTreeAccelerator(1),A=P),k=!0)}if(t.getPathCount()===1||e.getGeometryType()===me.enumPolyline)return!0;const $=e,F=xe.constructEmpty();$.queryEnvelope(F),F.inflateCoords(i,i);const G=new Wt;let V=$,B=!1;for(let W=0,J=t.getPathCount();W<J;W++)if(t.getPathSize(W)>0){const re=xe.constructEmpty();if(t.queryPathEnvelope(W,re),F.isIntersecting(re)){const se=q6(V,t.getXY(t.getPathStart(W)),0);if(K(se!==-1),se===1)return!1}B||(!Ag($,t.getPathCount()-1)||o.getAccelerators()!==null&&o.getAccelerators().getQuadTree()!==null?V=$:($.copyTo(G),G.getImpl().buildQuadTreeAccelerator(1),V=G),B=!0)}return!0}return!1}function _r(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:t}),s.inflateCoords(i,i),s.containsEnvelope(e)}function l7(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:e}),s.inflateCoords(i,i),t.containsExclusiveEnvelope(s)}function XE(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:e}),s.inflateCoords(i,i),!s.contains(t.getLowerLeft())||!s.contains(t.getLowerRight())||!s.contains(t.getUpperLeft())||!s.contains(t.getUpperRight())}function F1e(t,e,i,s){if(t.getPathCount()!==e.getPathCount()||t.getPointCount()!==e.getPointCount())return!1;if(t.hasNonLinearSegments()||e.hasNonLinearSegments())return t.equals(e);const n=new Y,r=new Y;let o=!0;const l=i*i;for(let c=0;c<t.getPathCount();c++){if(t.getPathEnd(c)!==e.getPathEnd(c)){o=!1;break}for(let f=t.getPathStart(c);f<e.getPathEnd(c);f++)if(t.queryXY(f,n),e.queryXY(f,r),Y.sqrDistance(n,r)>l){o=!1;break}if(!o)break}return!!o}function Git(t,e,i,s){if(t.getPointCount()!==e.getPointCount())return!1;const n=new Y,r=new Y;let o=!0;const l=i*i;for(let c=0;c<t.getPointCount();c++)if(t.queryXY(c,n),e.queryXY(c,r),Y.sqrDistance(n,r)>l){o=!1;break}return!!o}function Mj(t,e,i,s,n,r,o){const l=t.getImpl(),c=e.getImpl(),f=l.getPointCount(),y=c.getPointCount(),_=Vi(f,!1),x=n||r?Vi(y,!1):[],S=i*i,P=new tu(l,c,i);for(;P.next();){const G=P.getRedElement(),V=P.getBlueElement(),B=l.getXY(G),W=c.getXY(V);Y.sqrDistance(B,W)<=S&&(_[G]=!0,(n||r)&&(x[V]=!0))}let A=!1,k=!1;for(let G=0;G<f;G++){const V=_[G];if(A||(A=!V),k||(k=V),(n||s)&&A)return!1}if(s)return!0;let $=!1,F=!1;for(let G=0;G<y;G++){const V=x[G];if($||($=!V),F||(F=V),n&&$)return!1}return!!n||A&&k&&$&&F}function z1e(t,e,i,s){return Ay(t,e,i,s)&&Ay(e,t,i,s)}function Ay(t,e,i,s){if(F2(t),F2(e),e.isEmpty())return!1;let n=!0;const r=Vi(2,Number.NaN),o=Vi(2,Number.NaN),l=[],c=new Kit;let f;const y=xe.constructEmpty(),_=xe.constructEmpty(),x=xe.constructEmpty();t.queryEnvelope(y),e.queryEnvelope(_),y.inflateCoords(i,i),_.inflateCoords(i,i),x.setCoords({env2D:y}),x.intersect(_);const S=t.getImpl().querySegmentIterator(),P=e.getImpl().querySegmentIterator(),A=e.getImpl().getAccelerators();let k=null,$=null,F=null,G=null;if(A!==null&&(k=A.getQuadTree(),$=A.getQuadTreeForPaths(),$!==null&&(G=$.getIteratorForQT())),k===null){const V=t.getPointCount(),B=e.getPointCount();V>10&&B>10&&(k=z2(e.getImpl(),x))}for(k!==null&&(F=k.getIteratorForQT());S.nextPath();)for(;S.hasNextSegment();){let V=S.nextSegment();if(V.queryEnvelope(y),!y.isIntersecting(x))return n=!1,!1;if(G!==null&&(G.resetIterator(y,i),G.next()===-1))continue;let B=0,W=null;if(F!=null)F.resetIterator(V,i);else if(P.resetToFirstPath(),!P.nextPath())return n=!1,!1;do if(B=0,F!==null){const ne=F.next();if(ne===-1)return n=!1,!1;P.resetToVertex(k.getElement(ne),-1),W=P.nextSegment(),B=V.intersect(W,null,r,o,i)}else{for(;!P.hasNextSegment();)if(!P.nextPath())return n=!1,!1;W=P.nextSegment(),W.queryEnvelope(_),_.inflateCoords(i,i),y.isIntersecting(_)&&(B=V.intersect(W,null,r,o,i))}while(B!==2||r[0]!==0||s&&!(o[0]<=o[1]));let J=Number.NaN,re=!1;do{let ne=!1;if(r[1]===1){if(!S.hasNextSegment()){re=!0;break}V=S.nextSegment(),ne=!0}if(o[1]===1&&o[0]<=o[1]){if(J===-1||(J=1,!P.hasNextSegment()))break;W=P.nextSegment(),ne=!0}if(o[1]===0&&o[0]>o[1]){if(J===1)break;if(Number.isNaN(J)){if(!P.hasPreviousSegment())break;P.previousSegment(),J=-1}if(!P.hasPreviousSegment())break;W=P.previousSegment(),ne=!0}if(!ne)break;B=V.intersect(W,null,r,o,i)}while(B===2&&(!s||o[0]<=o[1]));if(re)continue;const se=V.calculateLength2D();V.queryEnvelope(y),l.length=0,c.m_overlapEvents.length=0;let oe=!1,pe=!1,ue=0;const ce=Ug(null,y,!0);for(F!==null?F.resetIterator(V,i):(P.resetToFirstPath(),P.nextPath()||bt("relational_operations"));;){if(B=0,F!==null){const ne=F.next();if(ne===-1)break;P.resetToVertex(k.getElement(ne),-1),W=P.nextSegment(),B=V.intersect(W,null,r,o,i)}else{for(;!P.hasNextSegment()&&P.nextPath(););if(!P.hasNextSegment())break;W=P.nextSegment(),W.queryEnvelope(_),_.inflateCoords(i,i),y.isIntersecting(_)&&(B=V.intersect(W,null,r,o,i))}if(B===2&&(!s||o[0]<=o[1])){const ne=S.getStartPointIndex(),de=S.getPathIndex(),Se=P.getStartPointIndex(),Pe=P.getPathIndex();if(f=Zit(ne,de,r[0],r[1],Se,Pe,o[0],o[1]),c.m_overlapEvents.push(f),l.push(l.length),!(oe||f.m_scalarA0<ue&&f.m_scalarA1<ue)){if(ue===0&&se*(f.m_scalarA0-ue)>i)oe=!0;else if(ue!==0&&se*(f.m_scalarA0-ue)>ce)oe=!0;else if(ue=f.m_scalarA1,se*(1-ue)<=i||ue===1){pe=!0;break}}}}if(!pe){if(!oe)return n=!1,!1;l.length>1&&l.sort((ne,de)=>c.compareOverlapEvents(ne,de)),ue=0;for(let ne=0;ne<c.m_overlapEvents.length;ne++)if(f=c.m_overlapEvents[l[ne]],!(f.m_scalarA0<ue&&f.m_scalarA1<ue)){if(ue===0&&se*(f.m_scalarA0-ue)>i||ue!==0&&se*(f.m_scalarA0-ue)>ce)return n=!1,!1;if(ue=f.m_scalarA1,se*(1-ue)<=i||ue===1)break}if(se*(1-ue)>i)return n=!1,!1;l.length=0,c.m_overlapEvents.length=0}}return n}function q1e(t,e,i){const s=t.getImpl(),n=e.getImpl(),r=s.querySegmentIterator(),o=n.querySegmentIterator(),l=new tu(s,n,i);for(;l.next();){const c=l.getRedElement(),f=l.getBlueElement();r.resetToVertex(c,-1),o.resetToVertex(f,-1);const y=r.nextSegment();if(o.nextSegment().isIntersecting(y,i))return!0}return!1}function Aj(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=n.querySegmentIterator(),l=r.querySegmentIterator(),c=Vi(2,Number.NaN),f=new tu(n,r,i);let y=!1,_=-1;for(;f.next();){const x=f.getRedElement(),S=f.getBlueElement();o.resetToVertex(x,-1),l.resetToVertex(S,-1);const P=o.nextSegment(),A=l.nextSegment();let k=0;if(Ax(P,A)){if(A.isIntersecting(P,i))return-2}else k=P.intersect(A,null,c,null,i);if(k){if(k===2){const $=P.calculateLength2D(),F=c[0];if($*(c[1]-F)>i)return _=1,_;y=!0}else if(_=0,s){const $=c[0],F=new Y;P.queryCoord2D($,F),s.push(F.x),s.push(F.y)}}}return y?-2:_}function V1e(t,e,i,s){const n=t.getImpl(),r=e,o=r.getPointCount(),l=s?Vi(o,!1):[],c=new tu(n,r,i,!1),f=n.querySegmentIterator();for(;c.next();){const y=c.getRedElement(),_=c.getBlueElement();f.resetToVertex(y,-1);const x=f.nextSegment(),S=r.getXY(_);if(x.isIntersectingPoint(S,i)){if(!s)return!0;l[_]=!0}}if(!s)return!1;for(let y=0;y<o;y++)if(!l[y])return!1;return!0}function G1e(t,e,i){const s=new Y,n=i*i,r=t.querySegmentIterator(),o=t.getImpl().getAccelerators();if(o!==null){const c=o.getQuadTree();if(c!==null){const f=xe.constructEmpty();f.setCoords({pt:e});const y=c.getIterator(f,i);for(let _=y.next();_!==-1;_=y.next())if(r.resetToVertex(c.getElement(_),-1),r.hasNextSegment()){const x=r.nextSegment(),S=x.getClosestCoordinate(e,!1);if(x.queryCoord2D(S,s),Y.sqrDistance(e,s)<=n)return!0}return!1}}const l=xe.constructEmpty();for(;r.nextPath();)for(;r.hasNextSegment();){const c=r.nextSegment();if(c.queryEnvelope(l),l.inflateCoords(i,i),!l.contains(e))continue;const f=c.getClosestCoordinate(e,!1);if(c.queryCoord2D(f,s),Y.sqrDistance(e,s)<=n)return!0}return!1}function jit(t,e,i){return G1e(t,e,i)&&!X1e(t,e,i)}function j1e(t,e,i,s){const n=t.querySegmentIterator(),r=t.getImpl().getAccelerators(),o=t.hasNonLinearSegments();let l=null,c=null,f=null,y=null;if(r!==null){const _=r.getQuadTree();if(_!==null){const x=_.getIterator(e,i);o&&(l=new si,c=new si,f=new si,y=new si,e.querySide(0,l),e.querySide(1,c),e.querySide(2,f),e.querySide(3,y));const S=xe.constructEmpty();S.setCoords({env2D:e}),S.inflateCoords(i,i);for(let P=x.next();P!==-1;P=x.next())if(n.resetToVertex(_.getElement(P),-1),n.hasNextSegment()){const A=n.nextSegment();if(A.getGeometryType()===me.enumLine){const k=A.getStartXY(),$=A.getEndXY();if(S.clipLine(k,$))return!0;continue}if(e.contains(A.getStartXY())||e.contains(A.getEndXY())||A.isIntersecting(l,i)||A.isIntersecting(c,i)||A.isIntersecting(f,i)||A.isIntersecting(y,i))return!0}return!1}}if(o){l=new si,c=new si,f=new si,y=new si,e.querySide(0,l),e.querySide(1,c),e.querySide(2,f),e.querySide(3,y);const _=t.querySegmentIterator();for(;_.nextPath();)for(;_.hasNextSegment();){const x=_.nextSegment();if(e.contains(x.getStartXY())||e.contains(x.getEndXY())||x.isIntersecting(l,i)||x.isIntersecting(c,i)||x.isIntersecting(f,i)||x.isIntersecting(y,i))return!0}}else{const _=xe.constructEmpty();_.setCoords({env2D:e}),_.inflateCoords(i,i);const x=t.getImpl(),S=x.getAttributeStreamRef(0),P=new Y;for(let A=0,k=x.getPathCount();A<k;A++){let $=!0;const F=new Y,G=new Y,V=new Y,B=x.getPathStart(A),W=new Y;for(let J=B,re=x.getPathEnd(A);J<re;J++)if($)S.queryPoint2D(2*J,F),W.assign(F),$=!1;else{if(S.queryPoint2D(2*J,P),G.setCoordsPoint2D(F),V.setCoordsPoint2D(P),_.clipLine(G,V))return!0;F.assign(P)}if(x.isClosedPath(A)&&!$&&(G.setCoordsPoint2D(F),V.setCoordsPoint2D(W),_.clipLine(G,V)))return!0}}return!1}function B1e(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=[0],l=bf(n.getIsSimple(0,o))&&bf(r.getIsSimple(0,o)),c=n.querySegmentIterator(),f=r.querySegmentIterator(),y=Vi(2,0),_=Vi(2,0),x=new tu(n,r,i);let S=!1;for(;x.next();){const G=x.getRedElement(),V=x.getBlueElement();c.resetToVertex(G,-1),f.resetToVertex(V,-1);const B=c.nextSegment(),W=f.nextSegment();let J=0;if(Ax(B,W)){if(W.isIntersecting(B,i)){S=!0;break}}else J=W.intersect(B,null,_,y,i);if(J===2){const re=y[0],se=y[1],oe=B.calculateLength2D();if(l&&(se-re)*oe>i)return!1;S=!0}else if(J){const re=y[0],se=_[0];if(re>0&&re<1&&se>0&&se<1)return!1;S=!0}}if(!S)return!1;const P=xe.constructEmpty(),A=xe.constructEmpty(),k=xe.constructEmpty();let $,F;if(t.queryEnvelope(P),e.queryEnvelope(A),P.inflateCoords(1e3*i,1e3*i),A.inflateCoords(1e3*i,1e3*i),k.setCoords({env2D:P}),k.intersect(A),t.getPointCount()>10){if($=vs(t,k,i,0,s),$.isEmpty())return!1}else $=t;if(e.getPointCount()>10){if(F=vs(e,k,i,0,s),F.isEmpty())return!1}else F=e;return Wc($,F,i,"F********",s,!1)}function H1e(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=[0],l=bf(n.getIsSimple(0,o))&&bf(r.getIsSimple(0,o)),c=xe.constructEmpty(),f=xe.constructEmpty(),y=xe.constructEmpty();t.queryEnvelope(c),e.queryEnvelope(f);let _=!1;const x=XE(c,f,i),S=XE(f,c,i),P=n.querySegmentIterator(),A=r.querySegmentIterator(),k=Vi(2,Number.NaN),$=Vi(2,Number.NaN),F=new tu(n,r,i);for(;F.next();){const re=F.getRedElement(),se=F.getBlueElement();P.resetToVertex(re,-1),A.resetToVertex(se,-1);const oe=P.nextSegment(),pe=A.nextSegment();let ue=0;if(Ax(oe,pe)){if(pe.isIntersecting(oe,i))break}else ue=pe.intersect(oe,null,$,k,i);if(ue===2){const ce=k[0],ne=k[1],de=oe.calculateLength2D();if(l&&(ne-ce)*de>i&&(_=!0,x&&S))return!0}else if(ue){const ce=k[0],ne=$[0];if(ce>0&&ce<1&&ne>0&&ne<1)return!0}}const G=xe.constructEmpty(),V=xe.constructEmpty();let B,W;G.setCoords({env2D:c}),G.inflateCoords(1e3*i,1e3*i),V.setCoords({env2D:f}),V.inflateCoords(1e3*i,1e3*i),y.setCoords({env2D:G}),y.intersect(V);let J="";if(J+=_?"**":"T*",x){if(e.getPointCount()>10){if(W=vs(e,y,i,0,s),W.isEmpty())return!1}else W=e;J+="****"}else W=e,J+="T***";if(S){if(t.getPointCount()>10){if(B=vs(t,y,i,0,s),B.isEmpty())return!1}else B=t;J+="***"}else B=t,J+="T**";return Wc(B,W,i,J,s,!1)}function U1e(t,e,i,s){const n=[!1],r=L1e(t,e,i,n);if(n[0])return r;const o=xe.constructEmpty();let l;if(e.queryEnvelope(o),o.inflateCoords(1e3*i,1e3*i),t.getPointCount()>10){if(l=vs(t,o,i,0,s),l.isEmpty())return!1}else l=t;return Ett(l,e,i,s)}function Bit(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=n.querySegmentIterator(),l=r.querySegmentIterator(),c=Vi(2,Number.NaN),f=Vi(2,Number.NaN),y=new tu(n,r,i);let _=!1;for(;y.next();){const $=y.getRedElement(),F=y.getBlueElement();o.resetToVertex($,-1),l.resetToVertex(F,-1);const G=o.nextSegment(),V=l.nextSegment();let B=0;if(Ax(G,V)?!_&&V.isIntersecting(G,i)&&(_=!0):B=V.intersect(G,null,f,c,i),B===2)_=!0;else if(B){const W=c[0],J=f[0];if(W>0&&W<1&&J>0&&J<1)return!1;_=!0}}if(!_)return!1;const x=xe.constructEmpty(),S=xe.constructEmpty(),P=xe.constructEmpty();let A,k;if(t.queryEnvelope(x),e.queryEnvelope(S),x.inflateCoords(1e3*i,1e3*i),S.inflateCoords(1e3*i,1e3*i),P.setCoords({env2D:x}),P.intersect(S),t.getPointCount()>10){if(A=vs(t,P,i,0,s),A.isEmpty())return!1}else A=t;if(e.getPointCount()>10){if(k=vs(e,P,i,0,s),k.isEmpty())return!1}else k=e;return Wc(A,k,i,"F********",s,!1)}function Hit(t,e,i,s){const n=t.getImpl(),r=e.getImpl(),o=n.querySegmentIterator(),l=r.querySegmentIterator(),c=Vi(2,Number.NaN),f=Vi(2,Number.NaN),y=new tu(n,r,i);let _=!1;for(;y.next();){const $=y.getRedElement(),F=y.getBlueElement();o.resetToVertex($,-1),l.resetToVertex(F,-1);const G=o.nextSegment(),V=l.nextSegment();let B=0;if(Ax(G,V)?!_&&V.isIntersecting(G,i)&&(_=!0):B=V.intersect(G,null,f,c,i),B===2)_=!0;else if(B){const W=c[0],J=f[0];if(W>0&&W<1&&J>0&&J<1)return!0;_=!0}}if(!_)return!1;const x=xe.constructEmpty(),S=xe.constructEmpty(),P=xe.constructEmpty(),A=xe.constructEmpty(),k=xe.constructEmpty();if(t.queryEnvelope(x),e.queryEnvelope(S),XE(S,x,i)){let $,F;if(P.setCoords({env2D:x}),P.inflateCoords(1e3*i,1e3*i),A.setCoords({env2D:S}),A.inflateCoords(1e3*i,1e3*i),k.setCoords({env2D:P}),k.intersect(A),t.getPointCount()>10){if($=vs(t,k,i,0,s),$.isEmpty())return!1}else $=t;if(e.getPointCount()>10){if(F=vs(e,k,i,0,s),F.isEmpty())return!1}else F=e;return Wc($,F,i,"T********",s,!1)}return Wc(t,e,i,"T*****T**",s,!1)}function Uit(t,e,i,s){const n=[!1],r=L1e(t,e,i,n);if(n[0])return r;const o=xe.constructEmpty();let l;if(e.queryEnvelope(o),o.inflateCoords(1e3*i,1e3*i),t.getPointCount()>10){if(l=vs(t,o,i,0,s),l.isEmpty())return!1}else l=t;return Ctt(l,e,i,s)}function Yit(t,e,i,s){return El(t,e,i)===1}function Xit(t,e,i,s){return El(t,e,i)===2}function Y1e(t,e,i,s){const n=new Y,r=i*i;for(let o=0;o<t.getPointCount();o++)if(t.queryXY(o,n),Y.sqrDistance(n,e)<=r)return!1;return!0}function X1e(t,e,i){const s=t.getBoundary();return!s.isEmpty()&&!Y1e(s,e,i)}function Wit(t,e,i){const s=xe.constructEmpty();return s.setCoords({env2D:t}),s.inflateCoords(i,i),s.containsEnvelope(e)?1073741824:s.isIntersecting(e)?t.isIntersecting(e)?t.xmin<e.xmin&&e.xmax<t.xmax?e.ymin<t.ymin&&e.ymax>t.ymax?0:1073741824:t.ymin<e.ymin&&e.ymax<t.ymax?e.xmin<t.xmin&&e.xmax>t.xmax?0:1073741824:0:0:4}function Ax(t,e){return t.getGeometryType()!==me.enumLine||e.getGeometryType()!==me.enumLine}function Zit(t,e,i,s,n,r,o,l){return{m_ivertexA:t,m_ipathA:e,m_scalarA0:i,m_scalarA1:s,m_ivertexB:n,m_ipathB:r,m_scalarB0:o,m_scalarB1:l}}class Kit{constructor(){this.m_overlapEvents=[]}compareOverlapEvents(e,i){const s=this.m_overlapEvents[e],n=this.m_overlapEvents[i];return s.m_ipathA<n.m_ipathA||s.m_ipathA===n.m_ipathA&&(s.m_ivertexA<n.m_ivertexA||s.m_ivertexA===n.m_ivertexA&&(s.m_scalarA0<n.m_scalarA0||s.m_scalarA0===n.m_scalarA0&&(s.m_scalarA1<n.m_scalarA1||s.m_scalarA1===n.m_scalarA1&&s.m_ivertexB<n.m_ivertexB)))?-1:1}}function W1e(t,e,i){const s=vtt(t,e,i);return s?s===1?1:2:0}function El(t,e,i){const s=q6(t,e,i);return s?s===1?1:2:0}function Jit(t,e,i,s,n){for(let r=0;r<i;r++)n[r]=El(t,e[r],s)}function Z1e(t,e,i,s,n){if(t.getGeometryType()===me.enumPolygon)Jit(t,e,i,s,n);else if(t.getGeometryType()===me.enumEnvelope){const r=xe.constructEmpty();t.queryEnvelope(r),Qit(r,e,i,s,n)}else bn("")}function K1e(t,e,i,s,n){const r=t.getGeometryType();r===me.enumPolyline?ist(t,e,i,s,n):Dn(r)?tst():bn("")}function Qit(t,e,i,s,n){if(t.isEmpty()){for(let l=0;l<i;l++)n[l]=0;return}const r=t.clone();r.inflateCoords(.5*-s,.5*-s);const o=t.clone();o.inflateCoords(.5*s,.5*s);for(let l=0;l<i;l++)r.contains(e[l])?n[l]=1:o.contains(e[l])?n[l]=2:n[l]=0}function est(t,e,i){if(i.reset(),e<3)return;const s=t[0].clone(),n=s.x,r=s.y,o=t[1].clone(),l=new Y;for(let c=2;c<e;c++)l.assign(t[c]),i.pe((l.x-s.x)*(o.y-r)),s.assign(o),o.assign(l);i.pe((n-s.x)*(o.y-r))}function tst(t,e,i,s,n){K(0)}function ist(t,e,i,s,n){const r=t.getImpl(),o=r.getAccelerators();let l=null;o&&(l=o.getRasterizedGeometry());let c=i;for(let f=0;f<i;f++)n[f]=1,l&&K(0);if(c){if(o){let y=null;o!==null&&o.getQuadTree()!==null&&(y=o.getQuadTree());const _=r.getPointCount();if(y===null&&_>20&&_*i>4*_+Math.log(_)*i&&(y=z2(r)),y){let x=null;const S=r.querySegmentIterator(),P=new xe;for(let A=0;A<i&&c;A++)if(n[A]===1){P.setCoords(e[A]),x===null?x=y.getIterator(P,s):x.resetIterator(P,s);let k=-1;for(let $=x.next();$!==-1;$=x.next()){if(S.resetToVertex(y.getElement($),k),k=S.getPathIndex(),S.nextSegment().isIntersectingPoint(e[A],s)){n[A]=2,c--;break}n[A]=0}}return}}const f=r.querySegmentIterator();for(;f.nextPath()&&c;)for(;f.hasNextSegment()&&c;){const y=f.nextSegment();for(let _=0;_<i&&c;_++)n[_]===1&&y.isIntersectingPoint(e[_],s)&&(n[_]=2,c--)}}for(let f=0;f<i;f++)n[f]===1&&(n[f]=0)}function sst(t,e,i,s,n){const r=nf(e),o=Math.max(4*r,i);return new G6(e,null,o,Number.NaN,n).approximateWithCirclesImpl(t,s)}function nst(){return Number.isNaN(this.radius.value())}function rst(){return{ptStart:new Y,ptEnd:new Y,center:new Bt,radius:new Be,fcenter:new ys,fradius2:new _t,maxError:Number.NaN,isLine:nst}}const ost=5,ast=1/8;function n3(t,e,i,s){return{pt:t.clone(),t:e,err:i,checkCount:s}}class G6{constructor(e,i,s,n,r){this.m_left=e,this.m_tracker=r,this.m_eps=s,this.m_trackerCounter=0,this.m_tolerance=n,this.m_circleCheckCounter=0,this.m_bReversedLeft=!1,this.m_leftArc=rst()}closeToCircularArc(e,i,s,n,r,o){if(this.m_circleCheckCounter++,o.maxError=0,!G6.checkSweepAngle(e,i))return!1;if(o.ptStart.setCoordsPoint2D(s),o.ptEnd.setCoordsPoint2D(r),e.isCircular()){const B=e;return o.fradius2=_t.constructDouble(B.getSemiMajorAxis()).mulDouble(B.getSemiMajorAxis()),o.radius.set(B.getSemiMajorAxis()),o.fcenter.assignPoint2D(B.getCenter()),o.center.set(B.getCenter()),!0}const l=o.ptEnd.sub(o.ptStart).clone();if(l.leftPerpendicularThis(),l.normalize(),Math.abs(l.dotProduct(n.sub(o.ptStart)))<=this.m_eps)return!!this.confirmIsLine(o,l)&&(o.radius.set(Number.NaN),o.center.setCoords(0,0),!0);{const B=o.ptEnd.sub(o.ptStart),W=n.sub(o.ptStart),J=B.crossProduct(W);if(J===0)return!1;const re=.5*B.sqrLength(),se=.5*W.sqrLength();let oe=re*W.y-se*B.y;oe/=J;let pe=B.x*se-W.x*re;pe/=J;const ue=Math.sqrt(oe*oe+pe*pe);if(4*Number.EPSILON*ue>this.m_eps)return!1;const ce=oe+o.ptStart.x,ne=pe+o.ptStart.y;o.radius.set(ue),o.center.setCoords(ce,ne);const de=this.maxCircleApproximationError(e,i,o);if(de>this.m_eps)return o.maxError=de,!1}const c=new ys().assignPoint2D(o.ptStart),f=new ys().assignPoint2D(o.ptEnd).sub(c),y=new ys().assignPoint2D(n).sub(c),_=f.crossProduct(y);if(_.isZero())return!1;const x=f.sqrLength().mulDouble(.5),S=y.sqrLength().mulDouble(.5),P=x.mul(y.y).sub(S.mul(f.y)),A=f.x.mul(S).sub(y.x.mul(x)),k=P.mul(P).add(A.mul(A)),$=_.clone();$.invertThis(),o.fradius2=k.mul($).mul($),o.fcenter.setCoords(P.mul($).add(c.x),A.mul($).add(c.y)),o.center.setWithEps(o.fcenter.asPoint2D()),o.radius.setWithEps(Math.sqrt(o.fradius2.toDouble()));const F=Bt.constructPoint2D(o.ptStart).subE(o.center),G=Bt.constructPoint2D(o.ptEnd).subE(o.center);if(!F.dotProduct(G).gt(Tx))return!1;const V=this.maxCircleApproximationError(e,i,o);return o.maxError=V,V<=this.m_eps}static checkSweepAngle(e,i){if(e.getGeometryType()===me.enumEllipticArc){const s=e,n=Ud(s,i.vmin),r=Ud(s,i.vmax);return!(Math.abs(r-n)>.5*Ss)}return!0}confirmIsLine(e,i){return K(0),!1}maxCircleApproximationError(e,i,s){const n=[.25,.75],r=[.1,.25,.75,.9];let o,l;e.getGeometryType()===me.enumEllipticArc?(o=n,l=n.length):(o=r,l=r.length);let c=0;for(let f=0;f<l;++f){const y=new Y;e.queryCoord2D(ji(i.vmin,i.vmax,o[f]),y);const _=y.sub(s.center.value()).length(),x=Math.abs(_-s.radius.value());x>c&&(c=x)}return c}approximateWithCirclesImpl(e,i){let s=1;i&&i.push(0);const n=Vi(9,Number.NaN);let r;e?r=this.m_left.getMonotonicPartParams(n.length,n):(n[0]=0,n[1]=1,r=2);const o=[],l=[],c=new Y(0,0);for(let f=1;f<r;f++){const y=new Ze(n[f-1],n[f]);for(this.m_bReversedLeft=!G6.goodOrientation(this.m_left,y),this.m_bReversedLeft?(o.push(n3(c,y.vmin,0,0)),o.push(n3(c,y.vmax,0,0))):(o.push(n3(c,y.vmax,0,0)),o.push(n3(c,y.vmin,0,0))),o[0].pt=this.m_left.getCoord2D(o[0].t),o[1].pt=this.m_left.getCoord2D(o[1].t);o.length>1;){this.progress_();const _=o.at(-1);let x=_.checkCount,S=_.err;const P=_.pt.clone(),A=_.t,k=o[o.length-2].t,$=.5*(A+k),F=this.m_left.getCoord2D($);if(S<=this.m_eps||x>=ost){const G=new Ze;if(G.setCoords(A,k),this.closeToCircularArc(this.m_left,G,P,F,o[o.length-2].pt,this.m_leftArc)){i&&(this.m_bReversedLeft?l.push(A):i.push(k)),s++,o.pop();continue}x=0,S=this.m_leftArc.maxError}_.t=$,_.pt.setCoordsPoint2D(F),S*=ast,x++,_.err=S,_.checkCount=x,o.push(n3(P,A,S,x))}this.m_bReversedLeft&&i&&(i.length=i.length+l.length,dn(i,l.reverse(),i.length-l.length,0,l.length),l.length=0),o.length=0}return s}approximateWithCirclesImplPolyline(e){return K(0),{}}static goodOrientation(e,i){const s=e.getCoord2D(i.vmin),n=e.getCoord2D(i.vmax);return s.compare(n)<0}progress_(e=!1){}}function zh(t,e,i,s,n,r,o){lst(t,e,i,n,r,o)}function lst(t,e,i,s,n,r){t.hasCurves()?(t.setCurveStitcherPointer(s),s.m_impl=new j0(r,!1,null),s.m_impl.buildMonotonicCurveParentage(t,e,i,n)):s.m_impl=null}function ust(t,e,i,s,n,r,o,l){t.hasCurves()?(t.setCurveStitcherPointer(r),r.m_impl=new j0(l,!0,n),r.m_impl.buildMonotonicCurveParentage(t,e,i,o),pst(t,i,l)):r.m_impl=null}function cst(t){if(!t.hasSegmentParentage())return;const e=new Ns(0),i=t.queryVertexIteratorOnSelection();for(let o=i.next();o!==ae;o=i.next())e.add(o);if(e.size()===0)return;t.sortVerticesSimpleByY(e,0,e.size()),e.add(ae);const s=Y.getNAN();t.queryXY(e.read(0),s);let n=0;const r=Y.getNAN();for(let o=1,l=e.size();o<l;o++){{const c=e.read(o);c!==ae?t.queryXY(c,r):r.setNAN()}if(!r.isEqualPoint2D(s)){let c=!1,f=-2;for(let y=n;y<o;++y){const _=e.read(y);if(t.getSegmentParentageBreakVertex(_)){c=!0;break}let x=t.getSegmentParentage(_);const S=t.getPrevVertex(_);if(S!==ae){let P=t.getSegmentParentage(S);if(x===-1&&(x=P),P===-1&&(P=x),x!==P){c=!0;break}}if(f!==-2&&x!==f){c=!0;break}f=x}if(c)for(let y=n;y<o;++y)t.setSegmentParentageBreakVertex(e.read(y),!0);s.setCoordsPoint2D(r),n=o}}}function hst(t,e){let i=e.isEmpty()?t:Kn(null,e,!0).total();return i>t&&(i=t),.125*i}function Tc(t,e){return e||(e=xe.constructEmpty()),hst(t,e)}function Np(t,e){return .125*t}function rf(t,e){return 3*t+3*e}class Ic{constructor(){this.m_impl=null}stitchCurves(e,i,s,n){this.m_impl&&(this.m_impl.stitchCurves(e,i,s),n&&this.clearStitcher(e))}clearStitcher(e){this.m_impl&&(this.m_impl.clearStitcher(e),this.m_impl=null)}getOriginalVertexIndex(e,i){return this.m_impl.getOriginalVertexIndex(e,i)}getOriginalSegmentTypeInfo(e){return this.m_impl.getOriginalSegmentTypeInfo(e)}}class j0{constructor(e,i,s){this.m_originalPlanarSegments=[],this.m_progressTracker=null,this.m_nsr=null,this.m_progressTracker=e,this.m_nsr=s,this.m_tolerance=0,this.m_originalVertexIndex=-1,this.m_type=0,this.m_progressCounter=0,this.m_bIsSimple=i}buildSegmentParentage(e,i,s,n,r){K(0)}static processCurves(e,i,s,n){return K(0),e}buildMonotonicCurveParentage(e,i,s,n){if(!e.hasCurves())return;K(!e.hasSegmentParentage()),this.m_type=1,this.m_originalPlanarSegments.length=0,this.m_bIsSimple&&(this.m_originalVertexIndex=e.createUserIndex()),this.m_tolerance=s;const l=new Ht,c=new Qt,f=[],y=[],_=[];for(let x=e.getFirstGeometry();x!==ae;x=e.getNextGeometry(x))for(let S=e.getFirstPath(x);S!==ae;S=e.getNextPath(S)){let P=e.getPathSize(S),A=e.getFirstVertex(S),k=0,$=-1;for(let F=0;F<P;F++){let G=e.getNextVertex(A);if(!e.querySegment(A,c,!0,!1)){A=G;continue}if(k===0){$=e.getVertexIndex(A);const se=j0.regularizeCurve(e,c.get(),A,s);if(se>=0){this.m_nsr&&this.m_nsr.m_reason===0&&this.m_nsr.assign(new xs(13,$,-1)),k=se,P=e.getPathSize(S),G=e.getNextVertex(A);const oe=e.querySegment(A,c,!0,!1);K(oe)}}else k--;const V=e.getVertexIndex(A);let B;this.m_originalVertexIndex!==-1&&e.setUserIndex(A,this.m_originalVertexIndex,$),e.setSegmentToIndex(V,null);let W=!1;switch(c.get().getGeometryType()){case me.enumEllipticArc:case me.enumRationalBezier2:B=Tz(c.get(),i,s,!1,!0,y,_,f),W=!0;break;default:{const se=!this.m_bIsSimple||!c.get().isMonotoneQuickAndDirty();B=w1e(c.get(),i,s,se,!1,y,f)}}const J=this.m_originalPlanarSegments.length;if(e.setSegmentParentageAndBreak(A,J,!0),!y[1].isNAN()){let se=null;se=W?new ba({points:y,weights:_}):new Nu({cp:y}),se.snapControlPoints(s*s),e.setSegmentToIndex(V,se)}const re=W?2:3;for(let se=1,oe=B,pe=re;se<oe;++se,pe+=re){c.get().queryCoord(f[se],l);const ue=e.insertVertex(S,G,l);if(this.m_originalVertexIndex!==-1&&e.setUserIndex(ue,this.m_originalVertexIndex,$),!y[pe+1].isNAN())if(W){const ce=new ba({points:y.slice(pe),weights:_.slice(pe)});ce.snapControlPoints(s*s),e.setSegmentToIndex(e.getVertexIndex(ue),ce)}else{const ce=new Nu({cp:y.slice(pe)});ce.snapControlPoints(s*s),e.setSegmentToIndex(e.getVertexIndex(ue),ce)}e.setSegmentParentageAndBreak(ue,J,!1)}B>1&&(F+=B-1,P=e.getPathSize(S)),this.m_originalPlanarSegments.push(c.releaseSegment()),A=G}}}stitchCurves(e,i,s){j0.st_stitchCurvesImpl(this,e,i,s,!1)}clearStitcher(e){this.m_originalPlanarSegments.length=0,this.m_originalVertexIndex!==-1&&(e.removeUserIndex(this.m_originalVertexIndex),this.m_originalVertexIndex=-1),e.deleteSegmentParentage()}static st_verifyParentage(e){j0.st_stitchCurvesImpl(null,e,ae,0,!0)}getOriginalVertexIndex(e,i){return this.m_originalVertexIndex!==-1&&i!==ae?e.getUserIndex(i,this.m_originalVertexIndex):-1}getOriginalSegmentTypeInfo(e){if(e!==-1){const i=this.m_originalPlanarSegments[e];switch(i.getGeometryType()){case me.enumEllipticArc:return i.projectionBehavior()===0?0:1;case me.enumBezier:return 2;case me.enumBezier2:return 3;case me.enumLine:return-1;case me.enumRationalBezier2:return 4;default:js("")}}return-1}static st_curveRequiresRegularization(e,i){return K(0),!1}progress_(e=!1){this.m_progressCounter++}processSpan_(e,i,s,n,r,o,l){if(i===s&&n===0)return K(e.getNextVertex(i)===ae),e.setSegmentToIndex(e.getVertexIndex(i),null),void e.setSegmentParentageAndBreak(i,-1);const c=e.getNextVertex(i);{let _=2;for(let x=c;x!==s;x=e.getNextVertex(x))_++;K(_===n)}if(r===null){e.setSegmentToIndex(e.getVertexIndex(i),null);for(let _=c;_!==s;)_=e.removeVertex(_,!0);return}const f=e.getXY(i),y=e.getXY(s);if(r.isClosed()){if(f.isEqualPoint2D(y)&&f.isEqualPoint2D(r.getStartXY())){let _;if(_=this.verifySegmentFitness(e,i,s,n,r,o,l)){const x=r.clone();return x.dropAllAttributes(),_<0&&x.reverse(),this.removeSpan(e,i,s),void e.setSegmentToIndex(e.getVertexIndex(i),x)}}}else if(f.isEqualPoint2D(r.getStartXY())){if(y.isEqualPoint2D(r.getEndXY())){const _=r.clone();if(_.dropAllAttributes(),this.verifySegmentFitness(e,i,s,n,_,o,l))return this.removeSpan(e,i,s),void e.setSegmentToIndex(e.getVertexIndex(i),_)}}else if(y.isEqualPoint2D(r.getStartXY())&&f.isEqualPoint2D(r.getEndXY())){const _=r.getReversed();if(_.dropAllAttributes(),this.verifySegmentFitness(e,i,s,n,_,o,l))return this.removeSpan(e,i,s),void e.setSegmentToIndex(e.getVertexIndex(i),_)}this.processSpanSplitSegment(e,i,s,n,r,o,l)}processSpanSplitSegment(e,i,s,n,r,o,l){if(r.isLine()||this.fitSegmentToSpan(e,i,s,n,r,o,l))return;const c=l*l;let f=n,y=i;const _=e.getXY(i);let x=r.getClosestCoordinate(_,!1);const S=r.getCoord2D(x);let P=!1;const A=Y.sqrDistance(_,S);if(A>c){const J=e.getNextVertex(i);if(this.approximateSpanSection(e,i,r,o,l),J===s)return;y=J,P=!0,f-=1}let k=s;const $=e.getXY(s);x=r.getClosestCoordinate($,!1);const F=r.getCoord2D(x);let G=!1;const V=Y.sqrDistance($,F);if(V>c){const J=e.getPrevVertex(s);if(this.approximateSpanSection(e,J,r,o,l),J===y)return;k=J,G=!0,f-=1}if((P||G)&&this.fitSegmentToSpan(e,y,k,f,r,o,l))return;let B=!1;if(!P&&A>0){const J=e.getNextVertex(i);if(this.approximateSpanSection(e,i,r,o,l),J===k)return;y=J,P=!0,B=!0,f-=1}if(!G&&V>0){const J=e.getPrevVertex(s);if(this.approximateSpanSection(e,J,r,o,l),J===y)return;k=J,G=!0,B=!0,f-=1}if(B&&this.fitSegmentToSpan(e,y,k,f,r,o,l))return;let W=y;for(;;){const J=e.getNextVertex(W);if(this.approximateSpanSection(e,W,r,o,l),W=J,W===k)return}}fitSegmentToSpan(e,i,s,n,r,o,l){const c=this.m_type===0,f=[];if(f.push(e.getXY(i)),c){let x=i;const S=32;if(n>S){const P=BigInt(n-1),A=BigInt(S-1);let k=A,$=0n;for(let F=1;F<n;F++,k+=A)if(x=e.getNextVertex(x),k>=$+P){$+=P;const G=e.getXY(x);f.push(G)}K(x===s)}else{for(let P=1;P<n;P++){x=e.getNextVertex(x);const A=e.getXY(x);f.push(A)}K(x===s)}}else{let x=i;const S=new Qt;for(;;){e.querySegment(x,S,!1,!0);const P=[.1,.25,.4,.5,.6,.75,.9,1];let A=0;for(const k of P)(n===2||1&A)&&f.push(S.get().getCoord2D(k)),A++;if(x=e.getNextVertex(x),x===s)break}}const y=(()=>{let x=f[0].compare(f.at(-1));if(x===0){const S=new Fr(0);est(f,f.length,S),x=S.getResult()>=0?-1:1}return x>0})();y&&f.reverse();const _=r.clone();if(_.dropAllAttributes(),_.setSegmentFromCoords(f,f.length),y&&_.reverse(),_.snapControlPoints(this.m_tolerance*this.m_tolerance),this.verifySegmentFitness(e,i,s,n,_,o,l)){this.removeSpan(e,i,s);const x=e.getVertexIndex(i);return e.setSegmentToIndex(x,_),!0}return!1}approximateSpanSection(e,i,s,n,r){const o=new Qt;if(!e.querySegment(i,o,!0,!1))return;const l=s.getGeometryType();if(l!==o.get().getGeometryType()){if(l===me.enumEllipticArc){if(o.get().getGeometryType()!==me.enumRationalBezier2)return;if(s.projectionBehavior()===0){const c=[];sst(!1,o.get(),r,c,this.m_progressTracker);const f=e.getNextVertex(i),y=e.getPathFromVertex(i),_=new Ht;let x=i;for(let S=1,P=c.length;S<P;S++){const A=c[S],k=o.get().getCoord2D(c[S-1]),$=o.get().getCoord2D(ji(c[S-1],A,.5));o.get().queryCoord(A,_);const F=_.getXY(),G=new zu;G.constructCircularArcThreePoint(k,F,$);let V=ae;A<1&&(V=e.insertVertex(y,f,_)),e.setSegmentToIndex(e.getVertexIndex(x),G),x=V}return}{const c=Ge(Y,3);o.get().queryControlPoints(c);const f=[0,0,0];o.get().queryWeights(f);const y=od(f),_=new zu;return Yrt(c,y*y,null,!1,_),void e.setSegmentToIndex(e.getVertexIndex(i),_)}}bt("approximate_span_section_")}}verifySegmentFitness(e,i,s,n,r,o,l){return this.m_type===0?this.verifySegmentFitnessLines(e,i,s,n,r,o,l):this.verifySegmentFitnessCurves(e,i,s,n,r,o,l)}verifySegmentFitnessCurves(e,i,s,n,r,o,l){const c=e.getXY(i),f=e.getXY(s);if(!c.isEqualPoint2D(r.getStartXY())||!f.isEqualPoint2D(r.getEndXY()))return 0;let y=0;if(r.isClosed()){const F=r.getCoord2D(.1).sub(c);y=r.getCoord2D(.7).sub(c).crossProduct(F)>=0?1:-1}const _=new Array(r5.s_maxMonotonicPartParams);let x=r.getMonotonicPartParams(_.length,_);x--;const S=new si,P=[1,.5,.75,.25];let A=0,k=i;const $=c.clone();for(;;){const F=e.getNextVertex(k);let G=e.getSegment(k);G===null&&(e.queryLineConnector(k,S,!0),G=S);for(let V=F===s?1:0;V<P.length;V++){const B=G.getCoord2D(P[V]);if(!r.isCloserThanDistance(B,Ze.unit(),l))return 0}if(x>1)for(let V=1;V<x;){const B=r.getCoord2D(_[V]);G.isCloserThanDistance(B,Ze.unit(),l)?(_[x-1]=St(_[V],_[V]=_[x-1]),x--):V++}if(y){const V=G.getCoord2D(.25);A+=V.sub(c).crossProduct($.sub(c)),$.assign(V),V.assign(G.getCoord2D(.75)),A+=V.sub(c).crossProduct($.sub(c)),$.assign(V)}if(k=F,k===s)return x>1?0:y?A<0?-y:y:1}}verifySegmentFitnessLines(e,i,s,n,r,o,l){return K(0),0}removeSpan(e,i,s){e.setSegmentToIndex(e.getVertexIndex(i),null);const n=e.getNextVertex(i);n!==s&&e.removeVertices(n,s)}static st_stitchCurvesImpl(e,i,s,n,r){if(i.hasSegmentParentage())return i.hasCurves()?j0.st_stitchCurvesFromCurvesImpl(e,i,s,n,r):j0.st_stitchCurvesFromLinesImpl(e,i,s,n,r)}static st_stitchCurvesFromLinesImpl(e,i,s,n,r){let o=s===ae?i.getFirstGeometry():s;for(;o!==ae;){for(let l=i.getFirstPath(o);l!==ae;l=i.getNextPath(l)){let c=i.getPathSize(l);i.isClosedPath(l)&&(c+=1);let f=!0,y=!1;const _=i.getFirstVertex(l);let x=_;for(let S=0;S<c&&x!==ae;){let P=i.getSegmentParentage(x);if(P===-1||f){f=!1,S++,x=i.getNextVertex(x),y=!0;continue}let A,k,$=0;if(y?(A=i.getPrevVertex(x),k=x,K(A!==ae),K(k!==A),K(i.getSegmentParentage(A)===-1||_===A)):(A=x,k=i.getNextVertex(A),S++,K(k!==ae),K(k!==A),P=i.getSegmentParentage(k)),$=2,y=!1,P===-1||i.getSegmentParentageBreakVertex(k)){x=k;continue}let F=i.getNextVertex(k);for(S++;S<c&&F!==ae;){k=F,$++;const G=i.getSegmentParentage(F);if(G===-1||i.getSegmentParentageBreakVertex(F))break;K(G===P),S++,F=i.getNextVertex(F)}if(!r){const G=e.m_originalPlanarSegments[P];e.processSpan_(i,A,k,$,G,P,n)}x=k}}if(s!==ae)break;o=i.getNextGeometry(o)}}static st_stitchCurvesFromCurvesImpl(e,i,s,n,r){let o=s===ae?i.getFirstGeometry():s;for(;o!==ae;)if(cge(i.getGeometryType(o))){for(let l=i.getFirstPath(o);l!==ae;l=i.getNextPath(l)){let c=i.getPathSize(l);const f=i.isClosedPath(l);f&&(c+=1);let y=i.getFirstVertex(l);if(f){if(i.getSegmentParentage(y)!==-1){let x=y;for(let S=0;!i.getSegmentParentageBreakVertex(x);S++){if(S===c){y=i.getFirstVertex(l),i.setSegmentParentageBreakVertex(x,!0);break}x=i.getPrevVertex(x)}}}else K(i.getSegmentParentage(y)===-1||i.getSegmentParentageBreakVertex(y));let _=y;for(let x=0;x<c&&_!==ae;){const S=i.getSegmentParentage(_);if(S===-1){x++,_=i.getNextVertex(_);continue}let P=0,A=ae;const k=_;P=1;let $=i.getNextVertex(k);for(;x<c&&$!==ae;){x++,A=$,P++;const F=i.getSegmentParentage($);if(F===-1||i.getSegmentParentageBreakVertex($))break;K(F===S),$=i.getNextVertex($)}if(A===ae)break;if(!r){const F=e.m_originalPlanarSegments[S];e.processSpan_(i,k,A,P,F,S,n)}_=A}}if(s!==ae)break;o=i.getNextGeometry(o)}else o=s===ae?i.getNextGeometry(o):ae}static regularizeCurve(e,i,s,n){let r=i.snapControlPoints(n*n);if(r){const o=e.getVertexIndex(s),l=i.clone();e.setSegmentToIndex(o,l)}if(i.getGeometryType()===Nu.type){const o=[],l=i.calculateSpecialPointsForCracking(n,o);if(l>0){e.splitSegment(s,o,l),r=e.snapControlPoints(s,l+1,n*n)||r;for(let c=0;c<l;c++)s=e.getNextVertex(s),e.setSegmentParentageBreakVertex(s,!0);return l}}return r?0:-1}}function Hd(t,e,i,s,n){return new u7(t,i,e,s,n).do_()}function dst(t,e,i){const s=Bu(t);return Ij(e.getX(),e.getY(),i.getX(),i.getY(),Ui(s))}function fst(t,e,i=1,s=1,n=1,r=1){if(s>r)return t;if(r>s)return e;const o=[0],l=[0],c=new Ht;return itt(t,e,i,s,n,r,c,l,o),c}function pst(t,e,i){return u7.fixCurveTwoPointLoops(t,e,i)}function J1e(t){return Bu(t)}class u7{constructor(e,i,s,n,r){this.m_shape=e,this.m_progressTracker=i,this.m_tolerance=s,this.m_bFilterDegenerateSegments=n,this.m_bTrackChanges=r,this.m_progressCounter=0}do_(){const e=new Jo(this.m_tolerance.tolerance,this.m_tolerance.resolution),i=1e-5,s=1e-6,n=J1e(e);let r=Cge(e);const o=r*(1+i);r*=1+s;let l=!1;const c=this.m_shape.getTotalPointCount()+10>30?1e3:(this.m_shape.getTotalPointCount()+10)*(this.m_shape.getTotalPointCount()+10),f=this.m_shape.hasPointFeatures();for(let y=0;;y++){this.m_shape.dbgCheckSelection(),y>c&&bt("crack_and_cluster_iteration_exceeded"),this.m_shape.dbgVerifyMonotone();let _=-1;y===0&&(_=this.firstCrack_(),l||(l=_>0));const x=this.cluster_(n);if(this.m_shape.dbgVerifyMonotone(),l||(l=x),this.m_bFilterDegenerateSegments){const A=this.m_shape.filterClosePoints(n,!0,!1,this.m_bTrackChanges,ae)!==0;l||(l=A),this.m_shape.dbgVerifyMonotone()}const S=this.m_shape.snapControlPointsOnSelection(o*o);l||(l=S),this.m_shape.dbgCheckSelection();let P=!1;if((y===0&&_===-1||f||M1e(!0,this.m_shape,r,null,this.m_progressTracker))&&(P=this.crack_(o),l||(l=P),this.m_shape.dbgVerifyMonotone()),!P&&!u7.fixCurveTwoPointLoops(this.m_shape,n,this.m_progressTracker)){this.m_shape.dbgVerifyMonotone();break}}return l&&cst(this.m_shape),l}cluster_(e){return C1e(this.m_shape,e,ae,this.m_bTrackChanges,this.m_progressTracker)}crack_(e){return ftt(this.m_shape,e,this.m_bTrackChanges,this.m_progressTracker)}static fixCurveTwoPointLoops(e,i,s){if(!e.hasCurves())return!1;e.dbgVerifyCurves();const n=e.createUserIndexUninitialized(),r=new Ns(0),o=e.queryVertexIteratorOnSelection();for(let _=o.next();_!==ae;_=o.next())r.add(_),e.setUserIndex(_,n,-1);if(r.size()===0)return!1;r.add(ae),e.sortVerticesSimpleByY(r,0,r.size()-1);let l=0;const c=e.getXY(r.read(l)),f=new Y(Number.NaN,Number.NaN),y=[];for(let _=1,x=r.size();_<x;++_){const S=r.read(_),P=S!==ae?e.getXY(S):f;if(P.equals(c))continue;const A=[];for(let k=l;k<_;k++){const $=r.read(k),F=e.getPrevVertex($);if(F!==ae&&e.getUserIndex(F,n)===-1){const V=AN(e.getXY(F),e.getSegment(F));Y.sqrDistance(c,V.otherPt)!==0&&(V.vert=F,V.dir=-1,A.push(V)),e.setUserIndex(F,n,1)}const G=e.getNextVertex($);if(G!==ae&&e.getUserIndex($,n)===-1){const V=AN(e.getXY(G),e.getSegment($));Y.sqrDistance(c,V.otherPt)!==0&&(V.vert=$,V.dir=1,A.push(V)),e.setUserIndex($,n,1)}}if(A.length>1){A.sort((F,G)=>yst(F,G));const k=AN(f.clone(),null);A.push(k);let $=0;for(let F=1,G=A.length;F<G;F++)if(!A[F].otherPt.equals(A[F-1].otherPt)){if(F-$>1&&A[$].seg!==null){let V=!1;const B=$;for(let W=$+1;W<F;W++)if(!mst(A[B],A[W])){V=!0;break}if(V)for(let W=$;W<F&&A[W].seg!==null;W++)y.push(A[W].vert)}$=F}}l=_,c.setCoordsPoint2D(P)}for(const _ of y){const x=e.getSegment(_);K(x!==null);const S=e.getXY(_),P=e.getXY(e.getNextVertex(_));if(Y.distance(S,P)<3*i)e.setSegmentToIndex(e.getVertexIndex(_),null);else{const A=x.lengthToT(.5*x.calculateLength2D());e.splitSegment(_,[A],1)}}return e.removeUserIndex(n),y.length>0}firstCrack_(){const e=Kn(null,this.m_shape.getEnvelope2D(this.m_progressTracker),!0).total();if(4*e<this.m_tolerance.total()){let i=!1;const s=1.1*e,n=e,r=this.cluster_(s);i||(i=r);let o=0;this.m_bFilterDegenerateSegments&&(o=this.m_shape.filterClosePoints(0,!0,!1,this.m_bTrackChanges,ae));const l=this.crack_(n);return i||(i=l),i?1:o?2:0}return-1}progress_(e=!1){this.m_progressCounter++,!e&&4095&this.m_progressCounter||(this.m_progressCounter=0)}}function AN(t,e){return{otherPt:t,seg:e,vert:-1,dir:0}}function mst(t,e){if(K(t.otherPt.equals(e.otherPt)),t.seg===null)return e.seg===null;if(e.seg===null)return!1;const i=t.seg.getGeometryType();if(i!==e.seg.getGeometryType())return!1;if(i===me.enumBezier){const s=t.seg,n=e.seg;let r=s.getControlPoint1(),o=s.getControlPoint2();t.dir===-1&&(o=St(r,r=o));let l=n.getControlPoint1(),c=n.getControlPoint2();return e.dir===-1&&(c=St(l,l=c)),r.equals(l)&&o.equals(c)}if(i===me.enumRationalBezier2){const s=t.seg,n=e.seg,r=s.getControlPoint1(),o=n.getControlPoint1();if(!r.equals(o))return!1;const l=[0,0,0];s.queryWeights(l),t.dir===-1&&(l[2]=St(l[0],l[0]=l[2]));const c=[0,0,0];return n.queryWeights(c),e.dir===-1&&(c[2]=St(c[0],c[0]=c[2])),l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}bt("")}function gst(t,e){if(t.seg===null||e.seg===null)return t.seg!==null?-1:e.seg!==null?1:0;const i=t.seg.getGeometryType(),s=e.seg.getGeometryType();return i<s?-1:i>s?1:0}function yst(t,e){const i=t.otherPt.compare(e.otherPt);return i!==0?i:gst(t,e)}var Dj=bi,vst=Dn,K4=cl;function L_(){return{unsplitBehavior:0,allCrossRoadsImpassable:!1,ogcRule:!1}}function Mz(t,e,i,s,n,r,o){const l=new xf(n);l.m_bOGCOutput=!0;const c=t.getGeometryType()===me.enumPolygon&&t.getFillRule()===1&&!bf(s);return l.planarSimplifyImpl_(t,e,c,i,s,n,r,o)}function j6(t,e,i,s,n,r,o,l){return new xf(r).planarSimplifyImpl_(t,e,i,s,n,r,o,l)}function _st(t,e,i,s){return K(0),{}}function bst(t,e,i,s,n,r,o){return K(0),{}}function xst(t,e,i,s){return K(0),{}}function Xie(t,e,i){return Ist(t,e,i)}function wst(t,e,i,s){if(t.isEmpty()||e.isEmpty()||t.getDimension()>e.getDimension())return qp(Ho(t),t,e,"-");const n=new xe;t.queryEnvelope(n);const r=new xe;e.queryEnvelope(r);const o=new xe;o.setCoords({env2D:n}),o.mergeEnvelope2D(r);const l=Kn(i,o,!0),c=r.clone(),f=Bu(l);if(c.inflateCoords(f,f),!n.isIntersecting(c))return qp(Ho(t),t,e,"-");const y=new xf(s),_=new Bs,x=_.addGeometry(Ho(t)),S=_.addGeometry(Ho(e));let P=0,A=0,k=null;if(_.hasCurves()){k=new Ic;const G=_.getEnvelope2D(s);A=Np(l.total());const V=Tc(l.total(),G);P=rf(V,A),zh(_,V,l.total(),12e3,k,null,s)}y.setEditShapeCrackAndCluster(_,l.add(P));const $=y.difference(x,S);k!==null&&k.stitchCurves(_,$,A,!0);const F=qp(_.getGeometry($),t,e,"-");return Dj(F.getGeometryType())&&(F.getImpl().setIsSimple(4,l.total()),F.getGeometryType()===me.enumPolygon&&F.getImpl().updateOGCFlagsProtected()),F}function Wie(t,e,i){return Tst(t,e,i,!0)}function Sst(t,e,i){return t.isEmpty()||e.isEmpty()?t.createInstance():dst(i,t,e)?new Ht({copy:fst(t,e)}):t.createInstance()}function Est(t,e,i,s){const n=xe.constructEmpty();t.queryEnvelope(n);const r=xe.constructEmpty();e.queryEnvelope(r);const o=xe.constructEmpty();o.setCoords({env2D:n}),o.mergeEnvelope2D(r);const l=Kn(i,o,!0),c=new xe(r),f=Bu(l);if(c.inflateCoords(f,f),!n.isIntersecting(c)){if(t.getDimension()<=e.getDimension())return qp(Ho(t.createInstance()),t,e,"&");if(t.getDimension()>e.getDimension())return qp(Ho(e.createInstance()),t,e,"&")}const y=new xf(s),_=new Bs,x=_.addGeometry(Ho(t)),S=_.addGeometry(Ho(e));let P=0,A=0,k=null;if(_.hasCurves()){k=new Ic;const G=_.getEnvelope2D(s);A=Np(l.total());const V=Tc(l.total(),G);P=rf(V,A),zh(_,V,l.total(),12e3,k,null,s)}y.setEditShapeCrackAndCluster(_,l.add(P));const $=y.intersection(x,S);k!==null&&k.stitchCurves(_,$,A,!0);const F=qp(_.getGeometry($),t,e,"&");return Dj(F.getGeometryType())&&(F.getImpl().setIsSimple(4,l.total()),F.getGeometryType()===me.enumPolygon&&F.getImpl().updateOGCFlagsProtected()),F}function Cst(t,e,i,s){const n=new Array(3),r=xe.constructEmpty();t.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o);const l=xe.constructEmpty();l.setCoords({env2D:r}),l.mergeEnvelope2D(o);const c=Kn(i,l,!0),f=new xe(o),y=Bu(c);if(f.inflateCoords(y,y),!r.isIntersecting(f)){if(t.getDimension()<=e.getDimension()){const G=qp(Ho(t.createInstance()),t,e,"&");return n[G.getDimension()]=G,n}if(t.getDimension()>e.getDimension()){const G=qp(Ho(e.createInstance()),t,e,"&");return n[G.getDimension()]=G,n}}const _=new xf(s),x=new Bs,S=x.addGeometry(Ho(t)),P=x.addGeometry(Ho(e));let A=0,k=0,$=null;if(x.hasCurves()){$=new Ic;const G=x.getEnvelope2D(s);k=Np(c.total());const V=Tc(c.total(),G);A=rf(V,k),zh(x,V,c.total(),12e3,$,null,s)}_.setEditShapeCrackAndCluster(x,c.add(A)),x.dbgVerifyCurves();const F=_.intersectionEx(S,P);for(const G of F){$!==null&&$.stitchCurves(x,G,k,!1);const V=qp(x.getGeometry(G),t,e,"&");Dj(V.getGeometryType())&&(V.getImpl().setIsSimple(4,c.total()),V.getGeometryType()===me.enumPolygon&&V.getImpl().updateOGCFlagsProtected()),n[V.getDimension()]=V}return $!==null&&$.clearStitcher(x),n}function DN(t,e,i,s,n,r=!1){e===0&&Je("not enough geometries to dissolve");let o=0;for(let P=0,A=e;P<A;P++)o=Math.max(t[P].getDimension(),o);if(o===2||o===1)return new xf(s).dissolveMultiPaths_(o,!1,t,e,i,n,r);let l=0,c=-1;for(let P=0,A=e;P<A;P++)t[P].getDimension()===o&&(c===-1&&(c=P),t[P].isEmpty()||(c=P,l++));if(l<2)return Ho(t[c]);const f=tl.constructEmpty(),y=new Bs;let _=ae;for(let P=0,A=e;P<A;P++)if(t[P].getDimension()===o&&!t[P].isEmpty()){_===ae?_=y.addGeometry(Ho(t[P])):y.appendGeometry(_,Ho(t[P]));const k=tl.constructEmpty();t[P].queryLooseEnvelope(k),f.mergeEnv3D(k)}const x=Kn(i,f.getEnvelope2D(),!0),S=new xf(s);if(r){const P=IE(i,f.getEnvelopeZs(),!0);return S.planarSimplify3DImpl_(y,x,P,0,!0)}return S.m_bOGCOutput=!0,S.planarSimplifyMultiPoints(y,x,!1,-1)}function Pst(t,e,i,s,n,r=!1){e<2&&Je("not enough geometries to dissolve");let o=0;for(let A=0,k=e;A<k;A++)o=Math.max(t[A].getDimension(),o);if(o===2||o===1)return new xf(s).dissolveMultiPaths_(o,!0,t,e,i,n,r);const l=tl.constructEmpty(),c=new Bs;let f=ae,y=0,_=-1;for(let A=0,k=e;A<k;A++)if(t[A].getDimension()===o&&(_===-1&&(_=A),!t[A].isEmpty())){_=A,f===ae?f=c.addGeometry(Ho(t[A])):c.appendGeometry(f,Ho(t[A]));const $=tl.constructEmpty();t[A].queryLooseEnvelope($),l.mergeEnv3D($),y++}if(y<2)return Ho(t[_]);const x=o===0?i:null,S=Kn(x,l.getEnvelope2D(),!0),P=new xf(s);if(r){const A=IE(x,l.getEnvelopeZs(),!0);return P.m_bOGCOutput=!0,P.planarSimplify3DImpl_(c,S,A,0,!0)}return P.planarSimplifyMultiPoints(c,S,!0,-1)}class xf{constructor(e){this.m_topoGraph=null,this.m_maskLookup=[],this.m_dummyPt1=Y.getNAN(),this.m_dummyPt2=Y.getNAN(),this.m_fromEdgeForPolylines=ae,this.m_progressCounter=0,this.m_bOGCOutput=!1,this.m_progressTracker=e}linesToPolygonsImpl(e,i){let s=0,n=0,r=null;if(e.hasCurves()){r=new Ic;const f=e.getEnvelope2D(this.m_progressTracker);n=Np(i.total());const y=Tc(i.total(),f);s=rf(y,n),zh(e,y,i.total(),12e3,r,null,this.m_progressTracker)}this.setEditShapeCrackAndCluster(e,i.add(s));const o=this.m_topoGraph.createUserIndexForChains(),l=this.m_topoGraph.getFirstChain();this.m_topoGraph.setChainUserIndex(l,o,1);for(let f=this.m_topoGraph.getChainFirstIsland(l);f!==ae;f=this.m_topoGraph.getChainNextInParent(f))this.m_topoGraph.setChainUserIndex(f,o,1);const c=[];for(let f=this.m_topoGraph.getFirstChain();f!==ae;f=this.m_topoGraph.getChainNext(f)){if(this.m_topoGraph.getChainUserIndex(f,o)===1)continue;this.m_topoGraph.setChainUserIndex(f,o,1);for(let x=this.m_topoGraph.getChainFirstIsland(f);x!==ae;x=this.m_topoGraph.getChainNextInParent(x))this.m_topoGraph.setChainUserIndex(x,o,1);if(this.m_topoGraph.getChainArea(f)===0)continue;const y=this.m_topoGraph.extractPolygonFromChainAndIslands(e,ae,f,ae);r!=null&&r.stitchCurves(e,y,n,!1);const _=e.getGeometry(y);c.push(_)}return new id(c)}autoCompleteImpl(e,i,s){let n=0,r=0,o=null;if(e.hasCurves()){o=new Ic;const _=e.getEnvelope2D(this.m_progressTracker);r=Np(s.total());const x=Tc(s.total(),_);n=rf(x,r),zh(e,x,s.total(),12e3,o,null,this.m_progressTracker)}this.setEditShapeCrackAndCluster(e,s.add(n));const l=this.m_topoGraph.getGeometryID(i),c=this.m_topoGraph.createUserIndexForChains(),f=this.m_topoGraph.getFirstChain();this.m_topoGraph.setChainUserIndex(f,c,1);for(let _=this.m_topoGraph.getChainFirstIsland(f);_!==ae;_=this.m_topoGraph.getChainNextInParent(_))this.m_topoGraph.setChainUserIndex(_,c,1);const y=[];for(let _=this.m_topoGraph.getFirstChain();_!==ae;_=this.m_topoGraph.getChainNext(_)){if(this.m_topoGraph.getChainUserIndex(_,c)===1)continue;this.m_topoGraph.setChainUserIndex(_,c,1);for(let $=this.m_topoGraph.getChainFirstIsland(_);$!==ae;$=this.m_topoGraph.getChainNextInParent($))this.m_topoGraph.setChainUserIndex($,c,1);if(this.m_topoGraph.getChainParentage(_)!==0)continue;const x=this.m_topoGraph.getChainHalfEdge(_);let S=x,P=!1;do{const $=this.m_topoGraph.getHalfEdgeTwin(S);if(this.m_topoGraph.getHalfEdgeChain($)!==_&&this.m_topoGraph.getHalfEdgeParentage(S)&l){P=!0;break}S=this.m_topoGraph.getHalfEdgeNext(S)}while(S!==x);if(!P||this.m_topoGraph.getChainArea(_)===0)continue;const A=this.m_topoGraph.extractPolygonFromChainAndIslands(e,ae,_,ae);o!==null&&o.stitchCurves(e,A,r,!1);const k=e.getGeometry(A);y.push(k)}return new id(y)}setEditShape(e,i=!1){this.m_topoGraph===null&&(this.m_topoGraph=new Fh),this.m_topoGraph.setEditShape(e,this.m_progressTracker,!0,i)}setEditShapeCrackAndCluster(e,i){Hd(e,i,this.m_progressTracker,!0,!1);for(let s=e.getFirstGeometry();s!==ae;s=e.getNextGeometry(s))e.getGeometryType(s)===me.enumPolygon&&tg(e,s,-1,this.m_bOGCOutput,ae,this.m_progressTracker);this.setEditShape(e)}setHalfEdgeOrientations_(e,i){const s=this.m_topoGraph.getShape();for(let n=s.getFirstGeometry();n!==ae;n=s.getNextGeometry(n))if(n===i)for(let r=s.getFirstPath(n);r!==ae;r=s.getNextPath(r)){let o=s.getFirstVertex(r);if(o===ae)continue;let l=s.getNextVertex(o);for(;l!==ae;){const c=this.m_topoGraph.getClusterFromVertex(o),f=this.m_topoGraph.getClusterFromVertex(l),y=this.m_topoGraph.getHalfEdgeConnector(c,f);if(y!==ae){const _=this.m_topoGraph.getHalfEdgeTwin(y);this.m_topoGraph.setHalfEdgeUserIndex(y,e,1),this.m_topoGraph.setHalfEdgeUserIndex(_,e,2)}o=l,l=s.getNextVertex(o)}}}flushVertices_(e,i){const s=this.m_topoGraph.getShape(),n=s.hasSegmentParentage(),r=new Qt,o=s.insertPath(e,ae);i.push(i[0]);const l=i.length;let c=ae;for(let f=0;f<l;f++){const y=i[f];if(c=s.addVertex(o,y),!n)continue;const _=this.m_topoGraph.getClusterFromVertex(y);if(f>0&&this.m_topoGraph.isBreakNode(_)&&s.setSegmentParentageBreakVertex(c,!0),f<l-1){const x=this.m_topoGraph.getHalfEdgeConnector(_,this.m_topoGraph.getClusterFromVertex(i[f+1])),S=this.m_topoGraph.getSegmentParentage(x);s.setSegmentParentageAndBreak(c,S,f>0||this.m_topoGraph.isBreakNode(_)),this.m_topoGraph.isHalfEdgeCurve(x)&&(this.m_topoGraph.querySegmentXY(x,r),s.setSegmentToIndex(s.getVertexIndex(c),r.get().clone()))}}if(n){const f=this.m_topoGraph.getClusterFromVertex(i[l-1]);this.m_topoGraph.isBreakNode(f)&&s.setSegmentParentageBreakVertex(c,!0)}s.setClosedPath(o,!0)}processPolygonCuts_(e,i,s,n){const r=this.m_topoGraph.getGeometryID(s),o=this.m_topoGraph.getGeometryID(n),l=[],c=this.m_topoGraph.getShape(),f=this.m_topoGraph.createUserIndexForHalfEdges();for(let y=this.m_topoGraph.getFirstCluster();y!==ae;y=this.m_topoGraph.getNextCluster(y)){const _=this.m_topoGraph.getClusterHalfEdge(y);if(_===ae)continue;let x=_;do{if(this.m_topoGraph.getHalfEdgeUserIndex(x,f)!==1){let S=x,P=x,A=!1,k=0;do{if(this.m_topoGraph.setHalfEdgeUserIndex(S,f,1),!A&&this.m_topoGraph.getHalfEdgeParentage(S)&o&&this.m_topoGraph.getHalfEdgeFaceParentage(S)&r&&(P=S,A=!0),A){const $=this.m_topoGraph.getHalfEdgeOrigin(S),F=this.m_topoGraph.getClusterVertexIterator($),G=this.m_topoGraph.getVertexFromVertexIterator(F);l.push(G),e!==-1&&this.m_topoGraph.getHalfEdgeParentage(S)&o&&(k|=this.m_topoGraph.getHalfEdgeUserIndex(S,e))}S=this.m_topoGraph.getHalfEdgeNext(S)}while(S!==P);if(A&&this.m_topoGraph.getChainArea(this.m_topoGraph.getHalfEdgeChain(P))>0){const $=c.createGeometry(me.enumPolygon);this.flushVertices_($,l),i!==-1&&c.setGeometryUserIndex($,i,k)}l.length=0}x=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(x))}while(x!==_)}this.m_topoGraph.deleteUserIndexForHalfEdges(f)}cutPolygonPolyline_(e,i,s,n){this.m_topoGraph.removeSpikes_();let r=-1;e!==-1&&(r=this.m_topoGraph.createUserIndexForHalfEdges(),this.setHalfEdgeOrientations_(r,s)),this.processPolygonCuts_(r,e,i,s),r!==-1&&(this.m_topoGraph.deleteUserIndexForHalfEdges(r),r=-1);const o=this.m_topoGraph.getShape();for(let l=o.getFirstGeometry();l!==ae;l=o.getNextGeometry(l))l!==i&&l!==s&&n.push(l);n.sort((l,c)=>{const f=o.getFirstPath(l),y=o.getRingArea(f),_=o.getFirstPath(c),x=o.getRingArea(_);return y<x?-1:y>x?1:0})}cut(e,i,s,n,r){const o=this.m_topoGraph.getShape().getGeometryType(s),l=this.m_topoGraph.getShape().getGeometryType(n),c=cl(o),f=cl(l);c!==2||f!==1?c!==1||f!==1?bt(""):new Mst(this,e,i,s,n,r).Do():this.cutPolygonPolyline_(i,s,n,r)}progress_(e=!1){}isGoodParentage(e){return e>=0&&e<this.m_maskLookup.length&&this.m_maskLookup[e]}normalizeInputGeometry(e){const i=e.getGeometryType();if(i===me.enumEnvelope){const s=new Wt({vd:e.getDescription()});return e.isEmpty()||s.addEnvelope(e,!1),s}if(i===me.enumPoint){const s=new Jn({vd:e.getDescription()});return e.isEmpty()||s.add(e),s}if(Dn(i)){const s=new vi({vd:e.getDescription()});return e.isEmpty()||s.addSegment(e,!0),s}return i!==me.enumMultiPoint&&i!==me.enumPolyline&&i!==me.enumPolygon&&Je("Unexpected geometry type"),e}dissolveNonSimplePolygons(e,i,s,n){K(i>0);const r=new Bs;let o=0,l=-1;for(let c=0,f=i;c<f;c++)e[c].getDimension()===2&&(l===-1&&(l=c),e[c].isEmpty()||(o++,r.addGeometry(e[c])));return o===0?(K(l>=0),this.normalizeInputGeometry(e[l])):this.planarSimplifyPolygons(r,s,!0,!1,-1,!0)}dissolveMultiPaths_(e,i,s,n,r,o,l){K(e>=1&&e<=2),K(n>0);const c=8&o?1:2,f=tl.constructEmpty();let y=0,_=-1,x=!0;for(let ne=0,de=n;ne<de;ne++)if(s[ne].getDimension()===e&&(_===-1&&(_=ne),!s[ne].isEmpty())){_=ne,y++;const Se=tl.constructEmpty();if(s[ne].queryLooseEnvelope(Se),f.mergeEnv3D(Se),e===2&&x&&s[ne].getGeometryType()===me.enumPolygon)if(16&o){const Pe=[0],Re=s[ne].getImpl().getIsSimple(0,Pe),Oe=this.m_bOGCOutput?Re===5:hg(Re);x&&(x=Oe)}else{const Pe=aJe(s[ne],0);x&&(x=Pe)}}if(y<2&&(K(_>=0),y===0||!(16&o)))return this.normalizeInputGeometry(s[_]);if(!x){const ne=Kn(i?null:r,f.getEnvelope2D(),!0);return this.dissolveNonSimplePolygons(s,n,ne,o)}const S=s.slice(0,n),P=Kn(r,f.getEnvelope2D(),!0),A=10*Bu(P);let k=new Jo(0,0);if(l&&(k=IE(r,f.getEnvelopeZs(),!0)),y===1&&e===1&&c===2&&!i)return l?bst():this.m_bOGCOutput?Mz(S[_],P,!1,-1,this.m_progressTracker,c,!1):j6(S[_],P,!1,!1,-1,this.m_progressTracker,c,!1);const $=new n5;$.startConstruction();let F=e===2?3:4,G=0;for(let ne=0,de=n;ne<de;ne++){if(S[ne].getDimension()!==e||S[ne].isEmpty())continue;let Se=S[ne].getGeometryType();if(Se!==me.enumEnvelope){if(Dn(Se)?(S[ne]=this.normalizeInputGeometry(S[ne]),Se=me.enumPolyline):K(bi(Se)),e===1){K(Se===me.enumPolyline);let Re=-1;if(l)K(0,"3d not implemented yet");else{const Oe=[0];Re=S[ne].getImpl().getIsSimple(P.total(),Oe)}if(this.m_bOGCOutput?Re!==5:!hg(Re))if(i)F=-1;else{l?K(0,"3d not implemented yet"):this.m_bOGCOutput?S[ne]=Mz(S[ne],P,!1,-1,this.m_progressTracker,c,!1):S[ne]=j6(S[ne],P,!1,!1,-1,this.m_progressTracker,c,!1);const Oe=[0];K(hg(S[ne].getImpl().getIsSimple(P.total(),Oe)))}}else{K(Se===me.enumPolygon);const Re=[0],Oe=S[ne].getImpl().getIsSimple(0,Re);K(bf(Oe))}const Pe=S[ne].getImpl();for(let Re=0,Oe=Pe.getPathCount();Re<Oe;Re++){const we=xe.constructEmpty();Pe.queryLoosePathEnvelope(Re,we),we.inflateCoords(A,A),$.addEnvelope(G,we),G++}}else{K(Se===me.enumEnvelope);const Pe=xe.constructEmpty();S[ne].queryLooseEnvelope(Pe),Pe.inflateCoords(A,A),$.addEnvelope(G,Pe),G++,F=-1}}$.endConstruction();const V=G,B=Vi(V,-2147483647),W=Vi(V,-1);let J=0;_=-1,G=0;for(let ne=0,de=n;ne<de;ne++){if(S[ne].getDimension()!==e||(_===-1&&(_=ne),S[ne].isEmpty()))continue;_=ne,J++;const Se=S[ne].getGeometryType();if(bi(Se))for(let Pe=0,Re=S[ne].getPathCount();Pe<Re;Pe++)W[G]=ne,B[G]=-Pe-1,G++;else K(Se===me.enumEnvelope),W[G]=ne,B[G]=-1,G++}if(J<2&&e===2)return K(_>=0),this.normalizeInputGeometry(S[_]);let re=V;for(;$.next()&&re>0;){this.progress_();const ne=$.getHandleA(),de=$.getHandleB(),Se=$.getElement(ne),Pe=$.getElement(de);W[Se]!==W[Pe]&&(B[Se]<0&&(re--,B[Se]=-(B[Se]+1)),B[Pe]<0&&(re--,B[Pe]=-(B[Pe]+1)))}const se=new Bs;let oe=!1,pe=0;for(let ne=0,de=n;ne<de;ne++){if(S[ne].getDimension()!==e||S[ne].isEmpty())continue;const Se=S[ne].getGeometryType(),Pe=pe;let Re=0,Oe=0;const we=bi(Se)?S[ne]:null;for(let Fe=Pe,it=B.length;Fe<it&&W[Fe]===ne;Fe++)B[Fe]>=0&&(Re++,Oe+=we?we.getPathSize(B[Fe]):CE(S[ne])),pe++;if(Oe>.95*CE(S[ne])){se.addGeometry(this.normalizeInputGeometry(S[ne]));for(let Fe=Pe;Fe<pe;Fe++)B[Fe]<0&&(B[Fe]=-(B[Fe]+1))}else{if(Re===0){oe=!0;continue}{oe=!0,K(bi(Se)),K(we!=null);const Fe=new Wt({vd:S[ne].getDescription()}),it=new vi({vd:S[ne].getDescription()}),vt=Se===me.enumPolygon?Fe:it;for(let ot=Pe;ot<pe;ot++)B[ot]>=0&&vt.addPath(we,B[ot],!0);se.addGeometry(vt)}}}let ue;if(se.getFirstGeometry()!==ae){const ne=e===2,de=i?Kn(null,f.getEnvelope2D(),!0):P;let Se=new Jo(0,0);if(l&&(Se=i?IE(null,f.getEnvelopeZs(),!0):k),e===2&&!(2&o)){se.collapseAllGeometriesToFirst();let Pe=0,Re=null;if(se.hasCurves()&&!se.hasSegmentParentage()){Re=new Ic;const Oe=se.getEnvelope2D(this.m_progressTracker);Pe=Np(de.total()),zh(se,Tc(de.total(),Oe),de.total(),12e3,Re,null,this.m_progressTracker)}htt(se,se.getFirstGeometry(),de.total(),this.m_progressTracker),Re!==null&&Re.stitchCurves(se,ae,Pe,!0)}if(l)ue=this.planarSimplify3DImpl_(se,de,Se,c,!0);else if(e===2)ue=this.planarSimplifyPolygons(se,de,ne,i,-1,!1);else{const Pe=L_();Pe.ogcRule=this.m_bOGCOutput,Pe.allCrossRoadsImpassable=!0,Pe.unsplitBehavior=c,ue=this.planarSimplifyPolylines(se,de,i,Pe,-1)}if(!oe){const Pe=[0];F=ue.getImpl().getIsSimple(de.total(),Pe)}}else K(oe),K(_>=0),ue=e===2?new Wt({vd:S[_].getDescription()}):new vi({vd:S[_].getDescription()});if(oe){let ne=0;for(let de=0,Se=B.length;de<Se;de++){const Pe=W[de];if(!(Pe<0)&&B[de]<0){const Re=S[Pe].getGeometryType(),Oe=bi(Re)?S[Pe]:null;if(Oe){const we=-(B[de]+1);ne+=Oe.getPathSize(we)}else ne+=4}}ue.reserve(ue.getPointCount()+ne);for(let de=0,Se=B.length;de<Se;de++){const Pe=W[de];if(!(Pe<0)&&B[de]<0){const Re=S[Pe].getGeometryType(),Oe=bi(Re)?S[Pe]:null;if(Oe){const we=-(B[de]+1);ue.addPath(Oe,we,!0)}else Re===me.enumEnvelope?ue.addEnvelope(S[Pe],!1):(K(Dn(Re)),ue.addSegment(S[Pe],!0))}}}let ce=0;if(e===2?F!==-1&&(F=3,ce=i?0:P.total()):(K(e===1),i||F===-1||(ce=P.total())),l||ue.getImpl().setIsSimple(F,ce),!i&&oe)if(e===2){if(!l)return new Tu().execute(ue,r,!1,this.m_progressTracker);K(0,"3d not yet implemented")}else e===1&&c!==1&&(ue=l?xst():_st(),ue.getImpl().setIsSimple(F,ce));return ue}dissolveTopoGraphCommonEdges_(){const e=this.m_topoGraph.createUserIndexForHalfEdges(),i=[];for(let s=this.m_topoGraph.getFirstCluster();s!==ae;s=this.m_topoGraph.getNextCluster(s)){const n=this.m_topoGraph.getClusterHalfEdge(s);let r=n;if(n!==ae)do{if(this.progress_(),this.m_topoGraph.getHalfEdgeUserIndex(r,e)!==1){const o=this.m_topoGraph.getHalfEdgeTwin(r);this.m_topoGraph.setHalfEdgeUserIndex(o,e,1),this.m_topoGraph.setHalfEdgeUserIndex(r,e,1);const l=this.m_topoGraph.getHalfEdgeFaceParentage(r);if(this.isGoodParentage(l)){const c=this.m_topoGraph.getHalfEdgeFaceParentage(o);this.isGoodParentage(c)&&i.push(r)}}r=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(r))}while(r!==n)}this.m_topoGraph.deleteUserIndexForHalfEdges(e),this.m_topoGraph.deleteEdgesBreakFaces_(i)}chooseVertexByOrder(e,i,s,n){let r=ya(),o=ae;for(let c=this.m_topoGraph.getClusterVertexIterator(e);c!==ae;c=this.m_topoGraph.incrementVertexIterator(c)){const f=this.m_topoGraph.getVertexFromVertexIterator(c),y=i.getUserIndex(f,s);y>=0&&y<r&&(r=y,o=f)}K(o!==ae);let l=i.getUserIndex(o,n);return l>0&&(i.setUserIndex(o,n,--l),l===0&&i.setUserIndex(o,s,-1)),o}chooseVertexFromCluster_(e,i){return this.m_topoGraph.getVertexDominantFromCluster(e,i)}chooseVertexFromVertexCluster_(e,i){return this.m_topoGraph.getVertexDominant(e,i)}collectPolygonPathsPreservingFrom_(e,i,s,n,r){const o=this.m_topoGraph.getShape();if(o.getGeometryType(e)!==me.enumPolygon)return;const l=o.hasSegmentParentage(),c=new Qt;for(let f=o.getFirstPath(e);f!==ae;f=o.getNextPath(f)){const y=o.getFirstVertex(f);this.m_topoGraph.getClusterFromVertex(y);const _=this.m_topoGraph.getHalfEdgeFromVertex(y);if(_===ae)continue;const x=this.m_topoGraph.getHalfEdgeUserIndex(_,s);if(x===1||x===2)continue;const S=this.m_topoGraph.getHalfEdgeFaceParentage(_);if(!this.isGoodParentage(S)){this.m_topoGraph.setHalfEdgeUserIndex(_,s,2);continue}this.m_topoGraph.setHalfEdgeUserIndex(_,s,1);const P=o.insertPath(i,ae);o.setClosedPath(P,!0);let A=_,k=y,$=this.m_topoGraph.getClusterFromVertex(k),F=1;do{this.progress_();const G=this.chooseVertexFromVertexCluster_(k,r),V=o.addVertex(P,G);if(this.m_topoGraph.isHalfEdgeCurve(A)&&(this.m_topoGraph.querySegmentXY(A,c),o.setSegmentToIndex(o.getVertexIndex(V),c.get().clone())),l){const re=this.m_topoGraph.getSegmentParentage(A);o.setSegmentParentageAndBreak(V,re,this.m_topoGraph.isBreakNode($))}let B,W;n!==-1&&this.m_topoGraph.setClusterUserIndex($,n,1),this.m_topoGraph.setHalfEdgeUserIndex(A,s,1),A=this.m_topoGraph.getHalfEdgeNext(A);do B=F===1?o.getNextVertex(k):o.getPrevVertex(k),W=B!==ae?this.m_topoGraph.getClusterFromVertex(B):ae;while(W===$);const J=this.m_topoGraph.getHalfEdgeOrigin(A);if(J!==W){do B=F===1?o.getPrevVertex(k):o.getNextVertex(k),W=B!==ae?this.m_topoGraph.getClusterFromVertex(B):ae;while(W===$);if(J!==W){W=J;const re=this.m_topoGraph.getClusterVertexIterator(W);B=this.m_topoGraph.getVertexFromVertexIterator(re)}else F=-F}$=W,k=B}while(A!==_)}}topoOperationPolygonPolygonHelper_(e,i,s,n,r,o){this.progress_(!0),e!==ae&&this.collectPolygonPathsPreservingFrom_(e,s,r,o,n),i!==ae&&this.collectPolygonPathsPreservingFrom_(i,s,r,o,n);const l=new Qt,c=this.m_topoGraph.getShape();c.dbgVerifyCurves();const f=c.hasSegmentParentage();for(let y=this.m_topoGraph.getFirstCluster();y!==ae;y=this.m_topoGraph.getNextCluster(y)){const _=this.m_topoGraph.getClusterHalfEdge(y);if(_===ae)continue;let x=_;do{this.progress_();const S=this.m_topoGraph.getHalfEdgeUserIndex(x,r);if(S!==1&&S!==2){const P=this.m_topoGraph.getHalfEdgeFaceParentage(x);if(this.isGoodParentage(P)){const A=c.insertPath(s,ae);c.setClosedPath(A,!0);let k=x;do{const $=this.m_topoGraph.getHalfEdgeVertexIterator(k);let F=ae;if($!==ae)F=this.m_topoGraph.getVertexFromVertexIterator($);else{const B=this.m_topoGraph.getHalfEdgeVertexIterator(this.m_topoGraph.getHalfEdgeTwin(k));F=this.m_topoGraph.getVertexFromVertexIterator(B),F=c.getNextVertex(F)}const G=this.chooseVertexFromVertexCluster_(F,n),V=c.addVertex(A,G);if(f){const B=this.m_topoGraph.getSegmentParentage(k),W=this.m_topoGraph.getHalfEdgeOrigin(k);c.setSegmentParentageAndBreak(V,B,this.m_topoGraph.isBreakNode(W))}if(this.m_topoGraph.isHalfEdgeCurve(k)&&(this.m_topoGraph.querySegmentXY(k,l),c.setSegmentToIndex(c.getVertexIndex(V),l.get().clone())),this.m_topoGraph.setHalfEdgeUserIndex(k,r,1),o!==-1){const B=this.m_topoGraph.getClusterFromVertex(G);this.m_topoGraph.setClusterUserIndex(B,o,1)}k=this.m_topoGraph.getHalfEdgeNext(k)}while(k!==x)}else this.m_topoGraph.setHalfEdgeUserIndex(x,r,2)}x=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(x))}while(x!==_)}}topoOperationPolygonPolygon_(e,i,s,n=!1){this.dissolveTopoGraphCommonEdges_();const r=this.m_topoGraph.getShape(),o=r.createGeometry(me.enumPolygon),l=this.m_topoGraph.createUserIndexForHalfEdges();return this.topoOperationPolygonPolygonHelper_(e,i,o,s,l,-1),this.m_topoGraph.deleteUserIndexForHalfEdges(l),n||tg(r,o,3,this.m_bOGCOutput,ae,this.m_progressTracker),o}topoOperationPolyline_(e,i){const s=L_();return s.allCrossRoadsImpassable=!1,s.ogcRule=i,s.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(ae,e,!1,s).first}topoOperationMultiPoint_(){const e=this.m_topoGraph.getShape(),i=e.createGeometry(me.enumMultiPoint),s=e.insertPath(i,ae);for(let n=this.m_topoGraph.getFirstCluster();n!==ae;n=this.m_topoGraph.getNextCluster(n)){const r=this.m_topoGraph.getClusterParentage(n);if(this.isGoodParentage(r)){let o=ae;for(let l=this.m_topoGraph.getClusterVertexIterator(n);l!==ae;l=this.m_topoGraph.incrementVertexIterator(l)){const c=this.m_topoGraph.getVertexFromVertexIterator(l);o===ae&&(o=c);const f=e.getGeometryFromPath(e.getPathFromVertex(c)),y=this.m_topoGraph.getGeometryID(f);if(this.isGoodParentage(y)){o=c;break}}e.addVertex(s,o)}}return i}intersection(e,i){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(i),r=cl(s),o=cl(n),l=this.m_topoGraph.getGeometryID(e),c=this.m_topoGraph.getGeometryID(i);K(l>=0),K(c>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|c),this.m_maskLookup[l|c]=!0;let f=ae;return this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(f=e),r===2&&o===2?this.topoOperationPolygonPolygon_(e,i,f):r===1&&o>0||o===1&&r>0?this.topoOperationPolyline_(f,this.m_bOGCOutput):r===0||o===0?this.topoOperationMultiPoint_():void bt("")}topoOperationPolygonPolygonEx(e,i,s){const n=this.m_topoGraph.getShape(),r=n.createGeometry(me.enumPolygon),o=n.createGeometry(me.enumPolyline),l=n.createGeometry(me.enumMultiPoint);this.dissolveTopoGraphCommonEdges_();let c=ae;const f=this.m_topoGraph.createUserIndexForHalfEdges(),y=this.m_topoGraph.createUserIndexForClusters();n.dbgVerifyCurves(),this.topoOperationPolygonPolygonHelper_(e,i,r,s,f,y),n.dbgVerifyCurves();const _=n.hasSegmentParentage(),x=new Qt;for(let P=this.m_topoGraph.getFirstCluster();P!==ae;P=this.m_topoGraph.getNextCluster(P)){const A=this.m_topoGraph.getClusterHalfEdge(P);if(A===ae)continue;let k=A;do{let $=this.m_topoGraph.getHalfEdgeUserIndex(k,f),F=this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(k),f),G=$|F;if(G===2){let V=this.m_topoGraph.getHalfEdgeParentage(k);if(this.isGoodParentage(V)){const B=n.insertPath(o,ae);let W=k;const J=this.chooseVertexFromCluster_(P,s);let re=n.addVertex(B,J);if(_){const se=this.m_topoGraph.getSegmentParentage(k),oe=this.m_topoGraph.getHalfEdgeOrigin(k);n.setSegmentParentageAndBreak(re,se,this.m_topoGraph.isBreakNode(oe))}this.m_topoGraph.isHalfEdgeCurve(k)&&(this.m_topoGraph.querySegmentXY(k,x),n.setSegmentToIndex(n.getVertexIndex(re),x.get().clone())),this.m_topoGraph.setClusterUserIndex(P,y,1);do{this.progress_();const se=this.m_topoGraph.getHalfEdgeTo(W),oe=this.chooseVertexFromCluster_(se,s);if(re=n.addVertex(B,oe),_){const pe=this.m_topoGraph.getSegmentParentage(k),ue=this.m_topoGraph.getHalfEdgeOrigin(k);n.setSegmentParentageAndBreak(re,pe,this.m_topoGraph.isBreakNode(ue))}if(this.m_topoGraph.setHalfEdgeUserIndex(W,f,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(W),f,1),this.m_topoGraph.setClusterUserIndex(se,y,1),W=this.m_topoGraph.getHalfEdgeNext(W),$=this.m_topoGraph.getHalfEdgeUserIndex(W,f),F=this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(W),f),G=$|F,G!==2)break;if(V=this.m_topoGraph.getHalfEdgeParentage(W),!this.isGoodParentage(V)){this.m_topoGraph.setHalfEdgeUserIndex(W,f,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(W),f,1);break}this.m_topoGraph.isHalfEdgeCurve(k)&&W!==k&&(this.m_topoGraph.querySegmentXY(k,x),n.setSegmentToIndex(n.getVertexIndex(re),x.get().clone()))}while(W!==k)}else this.m_topoGraph.setHalfEdgeUserIndex(k,f,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(k),f,1)}k=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(k))}while(k!==A)}for(let P=this.m_topoGraph.getFirstCluster();P!==ae;P=this.m_topoGraph.getNextCluster(P)){if(this.progress_(),this.m_topoGraph.getClusterUserIndex(P,y)===1)continue;const A=this.m_topoGraph.getClusterParentage(P);if(this.isGoodParentage(A)){c===ae&&(c=n.insertPath(l,ae));const k=this.m_topoGraph.getClusterVertexIterator(P);let $=ae;if(k!==ae){$=this.m_topoGraph.getVertexFromVertexIterator(k);const F=this.chooseVertexFromVertexCluster_($,s);n.addVertex(c,F)}}}this.m_topoGraph.deleteUserIndexForClusters(y),this.m_topoGraph.deleteUserIndexForHalfEdges(f),n.dbgVerifyCurves(),tg(n,r,3,this.m_bOGCOutput,ae,this.m_progressTracker);const S=[ae,ae,ae];return S[0]=l,S[1]=o,S[2]=r,S}topoOperationPolylinePolylineOrPolygonEx(e,i){const s=L_();return s.allCrossRoadsImpassable=!1,s.ogcRule=i,s.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(ae,e,!0,s)}topoOperationMultiPoint(){const e=this.m_topoGraph.getShape(),i=e.createGeometry(me.enumMultiPoint),s=e.insertPath(i,ae);for(let n=this.m_topoGraph.getFirstCluster();n!==ae;n=this.m_topoGraph.getNextCluster(n)){const r=this.m_topoGraph.getClusterParentage(n);if(this.isGoodParentage(r)){let o=ae;for(let l=this.m_topoGraph.getClusterVertexIterator(n);l!==ae;l=this.m_topoGraph.incrementVertexIterator(l)){const c=this.m_topoGraph.getVertexFromVertexIterator(l);o===ae&&(o=c);const f=e.getGeometryFromPath(e.getPathFromVertex(c)),y=this.m_topoGraph.getGeometryID(f);if(this.isGoodParentage(y)){o=c;break}}e.addVertex(s,o)}}return i}intersectionEx(e,i){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(i),r=K4(s),o=K4(n),l=this.m_topoGraph.getGeometryID(e),c=this.m_topoGraph.getGeometryID(i);K(l>=0),K(c>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|c),this.m_maskLookup[l|c]=!0;let f=ae;if(this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(f=e),r===2&&o===2)return this.topoOperationPolygonPolygonEx(e,i,f);if(r===1&&o>0||o===1&&r>0){const{first:y,second:_}=this.topoOperationPolylinePolylineOrPolygonEx(f,this.m_bOGCOutput);return[_,y]}if(r===0||o===0){const y=[];return y.push(this.topoOperationMultiPoint()),y}bt("")}getCombinedHalfEdgeParentage(e){return this.m_topoGraph.getHalfEdgeParentage(e)|this.m_topoGraph.getHalfEdgeFaceParentage(e)|this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e))}prevailingDirection(e,i){const s=this.getCombinedHalfEdgeParentage(i),n=this.m_topoGraph.getHalfEdgeOrigin(i),r=this.m_topoGraph.getHalfEdgeTo(i);let o=0,l=0;for(let c=this.m_topoGraph.getClusterVertexIterator(n);c!==ae;c=this.m_topoGraph.incrementVertexIterator(c)){const f=this.m_topoGraph.getVertexFromVertexIterator(c),y=e.getPathFromVertex(f),_=e.getGeometryFromPath(y),x=this.m_topoGraph.getGeometryID(_),S=e.getFirstVertex(y),P=!!(x&s);P&&S===f&&(this.m_fromEdgeForPolylines=i);const A=e.getNextVertex(f);if(A!==ae&&this.m_topoGraph.getClusterFromVertex(A)===r){if(o++,P){if(this.m_fromEdgeForPolylines===ae&&S===A){const k=this.m_topoGraph.getHalfEdgeNext(i);this.isGoodParentage(this.getCombinedHalfEdgeParentage(k))&&(this.m_fromEdgeForPolylines=k)}l++}}else{const k=e.getPrevVertex(f);if(k!==ae&&this.m_topoGraph.getClusterFromVertex(k)===r&&(o--,P)){if(this.m_fromEdgeForPolylines===ae&&S===k){const $=this.m_topoGraph.getHalfEdgeNext(i);this.isGoodParentage(this.getCombinedHalfEdgeParentage($))&&(this.m_fromEdgeForPolylines=$)}l--}}}return this.m_topoGraph.queryXY(n,this.m_dummyPt1),this.m_topoGraph.queryXY(r,this.m_dummyPt2),(l!==0?l:o)*Y.distance(this.m_dummyPt1,this.m_dummyPt2)}tryMoveThroughCrossroadBackwards(e,i){const s=this.m_topoGraph.getHalfEdgePrev(e),n=this.m_topoGraph.getHalfEdgeTwin(s);if(!i){if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(e)))return ae;const l=this.m_topoGraph.getHalfEdgeTwin(e);if(n===this.m_topoGraph.getHalfEdgeNext(l))return s}let r=n,o=ae;for(;r!==e;){const l=this.getCombinedHalfEdgeParentage(r);if(this.isGoodParentage(l)){if(o!==ae)return ae;o=this.m_topoGraph.getHalfEdgeTwin(r)}r=this.m_topoGraph.getHalfEdgeTwin(this.m_topoGraph.getHalfEdgePrev(r))}return o}tryMoveThroughCrossroadForward(e,i){const s=this.m_topoGraph.getHalfEdgeNext(e),n=this.m_topoGraph.getHalfEdgeTwin(s);if(!i){const l=this.m_topoGraph.getHalfEdgeTwin(e);if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(l)))return ae;if(n===this.m_topoGraph.getHalfEdgePrev(l))return s}let r=n,o=ae;for(;r!==e;){const l=this.getCombinedHalfEdgeParentage(r);if(this.isGoodParentage(l)){if(o!==ae)return ae;o=this.m_topoGraph.getHalfEdgeTwin(r)}r=this.m_topoGraph.getHalfEdgeTwin(this.m_topoGraph.getHalfEdgeNext(r))}return o}isOnALoop(e,i){let s=e;const n=2*this.m_topoGraph.getShape().getTotalPointCount()+10;for(let r=0;r<n;r++){if(this.m_topoGraph.getHalfEdgeUserIndex(s,i)===1)return!1;const o=this.m_topoGraph.getHalfEdgeNext(s);if(o===this.m_topoGraph.getHalfEdgeTwin(s))return!1;if(s=o,s===e)return!0}bt("is_on_a_loop_")}restorePolylineParts(e,i,s,n,r,o,l,c,f,y){K(r===ae&&o>=0&&l>=0||o===-1&&l===-1),K(c===-1&&y.unsplitBehavior!==1||c!==-1&&y.unsplitBehavior===1);const _=y.ogcRule,x=y.allCrossRoadsImpassable,S=y.unsplitBehavior===1,P=y.unsplitBehavior===0,A=this.m_topoGraph.getShape(),k=A.hasSegmentParentage();let $=e,F=this.m_topoGraph.getHalfEdgeTwin($);const G=new Qt;this.m_fromEdgeForPolylines=ae;let V=this.prevailingDirection(A,$),B=$,W=ae,J=!1,re=!1,se=!1;if(!S)for(;;){const ot=this.m_topoGraph.getHalfEdgePrev($);if(ot===F){se=!0;break}const ct=this.m_topoGraph.getHalfEdgeNext(F);if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(ct))){J=!0;break}if(this.m_topoGraph.getHalfEdgeTwin(ot)!==ct){if(x){J=!0;break}if($=this.tryMoveThroughCrossroadBackwards($,!0),$===ae){J=!0;break}F=this.m_topoGraph.getHalfEdgeTwin($)}else $=ot,F=ct;if(this.m_topoGraph.getHalfEdgeUserIndex($,s)===1){se=!0;break}if($===e){W=e,re=!0;break}const Ct=this.getCombinedHalfEdgeParentage($);if(!this.isGoodParentage(Ct))break;B=$,V+=this.prevailingDirection(A,$)}if(W===ae){for($=e,F=this.m_topoGraph.getHalfEdgeTwin($),W=$;;){const ct=this.m_topoGraph.getHalfEdgeNext($),Ct=this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(ct));if(Ct){J=!0;break}if(ct===F){se=!0;break}if(c!==-1){const Dt=this.m_topoGraph.getHalfEdgeOrigin(F);if(this.m_topoGraph.getClusterUserIndex(Dt,c)===1){J=!0;break}}const qt=this.m_topoGraph.getHalfEdgePrev(F);if(this.m_topoGraph.getHalfEdgeTwin(ct)!==qt){if(Ct||x){J=!0;break}if($=this.tryMoveThroughCrossroadForward($,!0),$===ae){J=!0;break}F=this.m_topoGraph.getHalfEdgeTwin($)}else $=ct,F=qt;if(this.m_topoGraph.getHalfEdgeUserIndex($,s)===1){se=!0;break}const Lt=this.getCombinedHalfEdgeParentage($);if(!this.isGoodParentage(Lt))break;W=$,V+=this.prevailingDirection(A,$)}const ot=this.m_topoGraph.getHalfEdgeOrigin(B);re=this.m_topoGraph.getHalfEdgeTo(W)===ot}else if(this.m_fromEdgeForPolylines!==ae){B=e,W=this.tryMoveThroughCrossroadBackwards(B,!1),K(W!==ae);const ot=this.m_topoGraph.getHalfEdgeTwin(B);this.m_topoGraph.getHalfEdgeNext(ot)}let oe=re;re||se||f&&(oe=this.isOnALoop(e,s),oe||(oe=this.isOnALoop(F,s)));const pe=V>=0;let ue=!1;oe&&J&&(re?(ue=_,pe&&(ue||S||P)&&B!==e&&(K(!S),B=e,ue=!1)):(S||pe&&P)&&(B=e));let ce=0;for($=B;F=this.m_topoGraph.getHalfEdgeTwin($),this.m_topoGraph.setHalfEdgeUserIndex($,s,1),this.m_topoGraph.setHalfEdgeUserIndex(F,s,1),ce++,$!==W;)$=x?this.m_topoGraph.getHalfEdgeNext($):this.tryMoveThroughCrossroadForward($,!1);pe||(W=St(B,B=W),W=this.m_topoGraph.getHalfEdgeTwin(W),B=this.m_topoGraph.getHalfEdgeTwin(B));let ne=A.insertPath(i,ae);$=B;const de=this.m_topoGraph.getHalfEdgeOrigin(B);let Se;Se=o!==-1?this.chooseVertexByOrder(de,A,o,l):this.chooseVertexFromCluster_(de,r),this.m_topoGraph.isStrongPathNode(de)&&A.setStrongPathStart(ne,!0);let Pe=A.addVertex(ne,Se),Re=Pe;n!==-1&&this.m_topoGraph.setClusterUserIndex(de,n,1);let Oe=0;const we=ue?Math.trunc((ce+1)/2):-1;let Fe=ae,it=!0,vt=ae;for(;;){if(k){const qt=this.m_topoGraph.getSegmentParentage($),Lt=this.m_topoGraph.getHalfEdgeOrigin($);A.setSegmentParentageAndBreak(Re,qt,it||this.m_topoGraph.isBreakNode(Lt))}it=!1,this.m_topoGraph.isHalfEdgeCurve($)&&(this.m_topoGraph.querySegmentXY($,G),A.setSegmentToIndex(A.getVertexIndex(Re),G.get().clone())),Fe!==ae&&l!==-1&&A.addToUserIndex(Fe,l,-1);const ot=x?this.m_topoGraph.getHalfEdgeNext($):this.tryMoveThroughCrossroadForward($,!1),ct=this.m_topoGraph.getHalfEdgeTo($);let Ct;if(Ct=o!==-1?this.chooseVertexByOrder(ct,A,o,l):this.chooseVertexFromCluster_(ct,r),Pe=A.addVertex(ne,Ct),vt=ct,n!==-1&&this.m_topoGraph.setClusterUserIndex(ct,n,1),k&&this.m_topoGraph.isBreakNode(ct)&&A.setSegmentParentageBreakVertex(Pe,!0),Fe=Ct,Oe++,ue&&Oe===we&&(ne=A.insertPath(i,ae),Pe=A.addVertex(ne,Ct),it=!0,l!==-1&&A.addToUserIndex(Ct,l,-1),Fe=ae),$===W)break;$=ot,Re=Pe}vt!==ae&&this.m_topoGraph.isStrongPathNode(vt)&&A.setStrongPathEnd(ne,!0)}topoOperationPolylineSimplify_(e,i){return this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,ae,!1,i).first}topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,i,s,n){K(i===ae||e===ae);const r=this.m_topoGraph.getShape(),o=P=>P=e===ae?P===ae?r.getFirstGeometry():r.getNextGeometry(P):P===ae?e:ae,l=r.createGeometry(me.enumPolyline);let c=-1;s&&(c=this.m_topoGraph.createUserIndexForClusters());const f=this.m_topoGraph.createUserIndexForHalfEdges(),y=i===ae?r.createUserIndex():-1,_=i===ae?r.createUserIndex():-1;let x=-1;if(n.unsplitBehavior===1){x=this.m_topoGraph.createUserIndexForClusters();for(let P=o(ae);P!==ae;P=o(P))for(let A=r.getFirstPath(P);A!==ae;A=r.getNextPath(A)){{const k=r.getFirstVertex(A),$=this.m_topoGraph.getClusterFromVertex(k);this.m_topoGraph.setClusterUserIndex($,x,1)}if(!r.isClosedPath(A)){const k=r.getLastVertex(A),$=this.m_topoGraph.getClusterFromVertex(k);this.m_topoGraph.setClusterUserIndex($,x,1)}}}if(i===ae){let P=0;for(let A=o(ae);A!==ae;A=o(A))for(let k=r.getFirstPath(A);k!==ae;k=r.getNextPath(k))if(r.isClosedPath(k)){let $=r.getFirstVertex(k);for(let F=0,G=r.getPathSize(k);F<G;F++,$=r.getNextVertex($))r.setUserIndex($,y,P++),r.setUserIndex($,_,2)}else{const $=r.getFirstVertex(k);r.setUserIndex($,y,P++),r.setUserIndex($,_,1);let F=r.getNextVertex($);for(let G=1,V=r.getPathSize(k)-1;G<V;++G)r.setUserIndex(F,y,P++),r.setUserIndex(F,_,2),F=r.getNextVertex(F);r.setUserIndex(F,y,P++),r.setUserIndex(F,_,1)}}for(let P=o(ae);P!==ae;P=o(P))for(let A=r.getFirstPath(P);A!==ae;A=r.getNextPath(A)){let k=r.getFirstVertex(A);for(let $=0,F=r.getPathSize(A);$<F;$++,k=r.getNextVertex(k)){const G=this.m_topoGraph.getHalfEdgeFromVertex(k);if(G===ae||this.m_topoGraph.getHalfEdgeUserIndex(G,f)===1)continue;const V=this.getCombinedHalfEdgeParentage(G);if(this.isGoodParentage(V)){const B=$===0;this.restorePolylineParts(G,l,f,c,i,y,_,x,B,n)}}}let S=ae;if(s){S=r.createGeometry(me.enumMultiPoint);let P=ae;for(let A=this.m_topoGraph.getFirstCluster();A!==ae;A=this.m_topoGraph.getNextCluster(A))if(this.progress_(),this.m_topoGraph.getClusterUserIndex(A,c)!==1){const k=this.m_topoGraph.getClusterParentage(A);if(this.isGoodParentage(k)){P===ae&&(P=r.insertPath(S,ae));const $=this.m_topoGraph.getClusterVertexIterator(A);if($!==ae){let F;this.m_topoGraph.getVertexFromVertexIterator($),F=y!==-1?this.chooseVertexByOrder(A,r,y,_):this.chooseVertexFromCluster_(A,i),r.addVertex(P,F)}}}}return _!==-1&&r.removeUserIndex(_),y!==-1&&r.removeUserIndex(y),c!==-1&&r.removeUserIndex(c),this.m_topoGraph.deleteUserIndexForHalfEdges(f),rr(l,S)}difference(e,i){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(i),r=cl(s),o=cl(n);if(r>o)return e;const l=this.m_topoGraph.getGeometryID(e),c=this.m_topoGraph.getGeometryID(i);if(this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|c),this.m_maskLookup[l]=!0,r===2&&o===2){let f=ae;return this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(f=e),this.topoOperationPolygonPolygon_(e,i,f)}if(r===1&&o===2){const f=L_();return f.allCrossRoadsImpassable=!1,f.ogcRule=this.m_bOGCOutput,f.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,ae,!1,f).first}if(r===1&&o===1){const f=L_();return f.allCrossRoadsImpassable=!0,f.ogcRule=this.m_bOGCOutput,f.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,ae,!1,f).first}if(r===0)return this.topoOperationMultiPoint_();bt("")}symmetricDifference(e,i){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(i),r=K4(s),o=K4(n),l=this.m_topoGraph.getGeometryID(e),c=this.m_topoGraph.getGeometryID(i);return K(l>=0),K(c>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(l|c),this.m_maskLookup[l]=!0,this.m_maskLookup[l]=!0,this.m_maskLookup[c]=!0,r===2&&o===2?this.topoOperationPolygonPolygon_(e,i,ae):r===1&&o===1?this.topoOperationPolyline_(ae,this.m_bOGCOutput):r===0&&o===0?this.topoOperationMultiPoint():void bt("")}planarSimplifyNoCrackingAndCluster(e,i,s,n){return K(0),!1}unsplitPolylineExact(e){return K(0),new vi}planarSimplifyPolylines(e,i,s,n,r){for(let S=e.getFirstGeometry();S!==ae;S=e.getNextGeometry(S)){const P=e.getGeometryType(S);K(P===me.enumPolyline)}let o=0,l=0,c=null;if(e.hasCurves()&&!e.hasSegmentParentage()){c=new Ic;const S=e.getEnvelope2D(this.m_progressTracker);l=Np(i.total());const P=Tc(i.total(),S);o=rf(P,l),zh(e,P,i.total(),12e3,c,null,this.m_progressTracker)}{const S=J1e(i.add(o));e.filterClosePoints(S,!1,!1,!1,ae)}if(this.m_topoGraph=new Fh,r!==4&&r!==5)if(c===null&&s){const S=new Iz(this.m_progressTracker,!1);S.sweepVertical(e,i.total()),S.hadComplications()?(Hd(e,i,this.m_progressTracker,!0,!1),s=!1):this.m_topoGraph.setCheckDirtyPlanesweepTolerance(i.total())}else Hd(e,i.add(o),this.m_progressTracker,!0,!1),s=!1;else s=!1;e.removeSelection(),e.collapseAllGeometriesToFirst();const f=e.getFirstGeometry();if(this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,f,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return K(s&&c===null),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyPolylines(e,i,!1,n,-1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const y=this.m_topoGraph.getGeometryID(f);K(y>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=y+1,this.m_maskLookup[y]=!0;const _=this.topoOperationPolylineSimplify_(e.getFirstGeometry(),n);c!==null&&c.stitchCurves(e,_,l,!0);const x=e.getGeometry(_);return s||x.getImpl().setIsSimple(4,i.total()),x}planarSimplifyMultiPoints(e,i,s,n){for(let f=e.getFirstGeometry();f!==ae;f=e.getNextGeometry(f)){const y=e.getGeometryType(f);K(y===me.enumMultiPoint)}this.m_topoGraph=new Fh,n!==4&&n!==5&&Hd(e,i,this.m_progressTracker,!0,!1),s=!1,e.removeSelection(),e.collapseAllGeometriesToFirst();const r=e.getFirstGeometry();if(this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,r,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return K(s),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyMultiPoints(e,i,!1,-1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const o=this.m_topoGraph.getGeometryID(r);K(o>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=o+1,this.m_maskLookup[o]=!0;const l=this.topoOperationMultiPoint(),c=e.getGeometry(l);return s||c.getImpl().setIsSimple(4,i.total()),c}planarSimplifyPolygons(e,i,s,n,r,o){for(let k=e.getFirstGeometry();k!==ae;k=e.getNextGeometry(k)){const $=e.getGeometryType(k);K($===me.enumPolygon||$===me.enumPolyline&&s)}let l=0,c=0,f=null;if(e.hasCurves()&&!e.hasSegmentParentage()){f=new Ic;const k=e.getEnvelope2D(this.m_progressTracker);c=Np(i.total());const $=Tc(i.total(),k);l=rf($,c),zh(e,$,i.total(),12e3,f,null,this.m_progressTracker)}if(o){Hd(e,i.add(l),this.m_progressTracker,!0,!1);for(let k=e.getFirstGeometry();k!==ae;k=e.getNextGeometry(k))e.getGeometryType(k)===me.enumPolygon&&tg(e,k,-1,!1,ae,this.m_progressTracker)}if(this.m_topoGraph=new Fh,o||r===4||r===5)n=!1;else if(f===null&&n){const k=new Iz(this.m_progressTracker,!1);k.sweepVertical(e,i.total()),k.hadComplications()?(Hd(e,i,this.m_progressTracker,!0,!1),n=!1):this.m_topoGraph.setCheckDirtyPlanesweepTolerance(i.total())}else Hd(e,i.add(l),this.m_progressTracker,!0,!1),n=!1;e.removeSelection(),e.collapseAllGeometriesToFirst();const y=e.getFirstGeometry();if(s?this.m_topoGraph.setAndSimplifyEditShapeWinding(e,y,this.m_progressTracker):this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,y,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return K(n&&f===null),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyPolygons(e,i,s,!1,-1,!1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const _=this.m_topoGraph.getGeometryID(y);K(_>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=_+1,this.m_maskLookup[_]=!0,e.setFillRule(y,0);const x=this.m_bOGCOutput&&s,S=x;let P=this.topoOperationPolygonPolygon_(y,ae,ae,S);x&&(this.m_topoGraph.removeShape(),this.m_topoGraph=null,e.removeGeometry(y),this.m_topoGraph=new Fh,this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,P,this.m_progressTracker),P=this.topoOperationPolygonPolygon_(P,ae,ae,!1)),f!==null&&f.stitchCurves(e,P,c,!0);const A=e.getGeometry(P);return A.setFillRule(0),n?A.getImpl().setIsSimple(3,0):(A.getImpl().setIsSimple(4,i.total()),A.getImpl().updateOGCFlagsProtected()),A}planarSimplify3DImpl_(e,i,s,n,r){return K(0),{}}planarSimplifyImpl_(e,i,s,n,r,o,l,c){if(e.isEmpty())return e.clone();const f=e.getGeometryType(),y=new Bs,_=y.addGeometry(e);if(bf(r)&&f===me.enumPolygon&&(s=!1,y.setFillRule(_,0)),c&&(e.hasAttribute(1)&&y.replaceNaNs(1,0),y.removeNaNVertices()),f===me.enumPolygon||f===me.enumPolyline&&s)return this.planarSimplifyPolygons(y,i,s,n,r,!1);if(f===vi.type){const x=L_();return x.allCrossRoadsImpassable=!0,x.ogcRule=this.m_bOGCOutput,x.unsplitBehavior=l,this.planarSimplifyPolylines(y,i,n,x,r)}if(f===me.enumMultiPoint)return this.planarSimplifyMultiPoints(y,i,n,r);bt("what else?")}}function Tst(t,e,i,s){if(t.isEmpty())return t.createInstance();if(e.isEmpty())return s?t.createInstance():new Ht({copy:t});const n=[new Y],r=[0],o=e.getDimension()===2;return e.getDimension()!==1&&e.getDimension()!==2&&bt(""),n[0]=t.getXY(),o?Z1e(e,n,1,i.total(),r):K1e(e,n,1,i.total(),r),r[0]===0?t.createInstance():t}function Ist(t,e,i,s){const n=t.createInstance(),r=Ge(Y,100),o=new Array(100),l=t.getPointCount();let c=!0;const f=e.getDimension()===2;e.getDimension()!==1&&e.getDimension()!==2&&bt("");for(let y=0;y<l;){const _=t.queryCoordinates(r,r.length,y,-1)-y;f?Z1e(e,r,_,i.total(),o):K1e(e,r,_,i.total(),o);let x=0;for(let S=0;S<_;S++)o[S]===0&&(c&&(c=!1,n.addPoints(t,0,y)),x!==S&&n.addPoints(t,y+x,y+S),x=S+1);c||x===_||n.addPoints(t,y+x,y+_),y+=_}return c?t:n}function qp(t,e,i,s){const n=t.getGeometryType();if(n===me.enumEnvelope){const r=new Wt({vd:t.getDescription()});return t.isEmpty()||r.addEnvelope(t,!1),r}if(n===me.enumPoint&&(s==="|"||s==="^")){const r=new Jn({vd:t.getDescription()});return t.isEmpty()||r.add(t),r}if(n===me.enumLine){const r=new vi({vd:t.getDescription()});return t.isEmpty()||r.addSegment(t,!0),r}if(n===me.enumMultiPoint&&s==="-"&&e.getGeometryType()===me.enumPoint){const r=new Ht({vd:t.getDescription()});return t.isEmpty()||t.getPointByVal(0,r),r}if(n===me.enumMultiPoint&&s==="&"&&e.getGeometryType()===me.enumPoint){const r=new Ht({vd:t.getDescription()});return t.isEmpty()||t.getPointByVal(0,r),r}return t}function Ho(t){const e=t.getGeometryType();if(e===me.enumEnvelope){const i=new Wt({vd:t.getDescription()});return t.isEmpty()||i.addEnvelope(t,!1),i}if(e===me.enumPoint){const i=new Jn({vd:t.getDescription()});return t.isEmpty()||i.add(t),i}if(vst(e)){const i=new vi({vd:t.getDescription()});return t.isEmpty()||i.addSegment(t,!0),i}return e!==me.enumMultiPoint&&e!==me.enumPolyline&&e!==me.enumPolygon&&Je("Unexpected geometry type"),t}function kN(t,e,i,s){const n=i===ae?t.getClusterHalfEdge(e):i;let r=n;K(t.getHalfEdgeOrigin(n)===e);do s(r),r=t.getHalfEdgeNext(t.getHalfEdgeTwin(r));while(r!==n)}class Mst{constructor(e,i,s,n,r,o){this.m_rParent=e,this.m_rTopoGraph=e.m_topoGraph,this.m_rShape=this.m_rTopoGraph.getShape(),this.m_IDCuttee=this.m_rTopoGraph.getGeometryID(n),this.m_IDCutter=this.m_rTopoGraph.getGeometryID(r),this.m_IDBoth=this.m_IDCuttee|this.m_IDCutter,this.m_bConsiderTouch=i,this.m_sideIndex=s,this.m_cuttee=n,this.m_cutter=r,this.m_rCutHandles=o,this.m_cutteeBreadcrumbsIndex=this.m_rShape.createUserIndexUninitialized(),this.m_clusterParentageIndex=this.m_rShape.createUserIndexUninitialized();for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){let c=0;const f=this.m_rShape.getPathSize(l);for(let y=this.m_rShape.getFirstVertex(l);c<f;c++,y=this.m_rShape.getNextVertex(y))this.m_rShape.setUserIndex(y,this.m_clusterParentageIndex,this.m_rTopoGraph.getClusterParentage(this.m_rTopoGraph.getClusterFromVertex(y)))}}Do(){this.cutPolylinePolyline_(),this.m_rShape.removeUserIndex(this.m_cutteeBreadcrumbsIndex),this.m_rShape.removeUserIndex(this.m_clusterParentageIndex)}setTbd(e){return 8|e}classifyStandardCut(e,i,s,n){const r=this.m_rShape.getPrevVertex(e),o=this.m_rShape.getNextVertex(e),l=r===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(r)),c=o===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(o)),f=this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(s)),y=this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(n));let _=1,x=32,S=32;if(kN(this.m_rTopoGraph,i,y,P=>{P===f&&(_=2),P===l&&(x=_),P===c&&(S=_)}),this.m_bConsiderTouch)x!==32&&this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|x),S!==32&&this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|S);else{if(x===32||S===32||x===S&&!(l===f||l===y||c===f||c===y))return 1;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|x),this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|S)}return 0}classifyTouchCut(e,i,s,n){const r=this.m_rShape.getPrevVertex(e),o=this.m_rShape.getNextVertex(e),l=r===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(r)),c=o===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(o)),f=s===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(s)),y=n===ae?ae:this.m_rTopoGraph.getHalfEdgeConnector(i,this.m_rTopoGraph.getClusterFromVertex(n));if(!this.m_bConsiderTouch){let _;return(_=f===l||y===l)?this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))):(_=f===c||y===c)&&this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),_?0:1}if(l===ae)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(c===ae)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;if(l===c)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(y!==ae){if(l===y)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(c===y)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;let _=1;kN(this.m_rTopoGraph,i,y,x=>{if(x===l){const S=this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,S),_=2}else if(x===c){const S=this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,S),_=2}})}else{if(l===f)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(c===f)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;let _=2;kN(this.m_rTopoGraph,i,f,x=>{if(x===l){const S=this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,S),_=1}else if(x===c){const S=this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|_;this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,S),_=1}})}return 0}classifyCutVertex(e,i){let s=0,n=0;for(let r=this.m_rTopoGraph.getClusterVertexIterator(i);r!==ae;r=this.m_rTopoGraph.incrementVertexIterator(r)){const o=this.m_rTopoGraph.getVertexFromVertexIterator(r);if(this.m_rShape.getGeometryFromVertex(o)===this.m_cutter){n++;const l=this.m_rShape.getPrevVertex(o),c=this.m_rShape.getNextVertex(o);s+=l===ae||c===ae?this.classifyTouchCut(e,i,l,c):this.classifyStandardCut(e,i,l,c)}}n&&s===n&&!this.m_bConsiderTouch&&this.m_rShape.setUserIndex(e,this.m_clusterParentageIndex,this.m_IDCuttee)}cutPolylinePolyline_(){this.m_rShape.getGeometryType(this.m_cuttee),this.m_rShape.getGeometryType(this.m_cutter),this.m_rParent.m_maskLookup.length=0,this.m_rParent.m_maskLookup.length=this.m_IDBoth+1,this.m_rParent.m_maskLookup[this.m_IDBoth]=!0;for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){const c=this.m_rShape.getPathSize(l);let f=this.m_rShape.getFirstVertex(l);for(let y=0;y<c;++y,f=this.m_rShape.getNextVertex(f))this.m_rShape.setUserIndex(f,this.m_cutteeBreadcrumbsIndex,0);f=this.m_rShape.getFirstVertex(l);for(let y=0;y<c;++y,f=this.m_rShape.getNextVertex(f)){const _=this.m_rTopoGraph.getClusterFromVertex(f);this.m_rTopoGraph.getClusterParentage(_)===this.m_IDBoth&&this.classifyCutVertex(f,_)}}const e=(l,c)=>{let f=this.m_rShape.getUserIndex(l,this.m_cutteeBreadcrumbsIndex);const y=this.m_rTopoGraph.getHalfEdgeConnector(this.m_rTopoGraph.getClusterFromVertex(l),this.m_rTopoGraph.getClusterFromVertex(c));return(this.m_rTopoGraph.getHalfEdgeParentage(y)&this.m_IDBoth)===this.m_IDBoth&&(f|=4),f};for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){let c=this.m_rShape.getFirstVertex(l);const f=this.m_rShape.isClosedPath(l),y=this.m_rShape.getPathSize(l)+(f?1:0);let _=1,x=32;for(let P=this.m_rShape.getNextVertex(c);_<y;++_,c=P,P=this.m_rShape.getNextVertex(P)){const A=e(c,P);this.m_rShape.getUserIndex(c,this.m_clusterParentageIndex)===this.m_IDBoth&&(x=A),x!==32&&this.m_rShape.setUserIndex(c,this.m_cutteeBreadcrumbsIndex,x|A)}c=this.m_rShape.getLastVertex(l);let S=32;_=1;for(let P=this.m_rShape.getPrevVertex(c);_<y;++_,c=P,P=this.m_rShape.getPrevVertex(P)){const A=e(P,c);this.m_rShape.getUserIndex(c,this.m_clusterParentageIndex)===this.m_IDBoth&&(S=A),S!==32&&this.m_rShape.setUserIndex(P,this.m_cutteeBreadcrumbsIndex,S|A)}}let i=ae,s=ae,n=32;const r=this.m_rShape.hasSegmentParentage(),o=new Qt;for(let l=this.m_rShape.getFirstPath(this.m_cuttee);l!==ae;l=this.m_rShape.getNextPath(l)){const c=this.m_rShape.isClosedPath(l),f=this.m_rShape.getPathSize(l)+(c?1:0);let y=1,_=this.m_rShape.getFirstVertex(l),x=ae,S=!0;for(let P=this.m_rShape.getNextVertex(_);y<f;++y,P=this.m_rShape.getNextVertex(P)){let A=this.m_rShape.getUserIndex(_,this.m_cutteeBreadcrumbsIndex);A===8?A=3:(A&=-9,4&A?A=4:3&~A||(A=3)),A!==n?(i!==ae&&(x=this.m_rShape.addVertex(s,_),r&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(_))&&this.m_rShape.setSegmentParentageBreakVertex(x,!0),this.m_rCutHandles.push(i),this.m_rShape.setGeometryUserIndex(i,this.m_sideIndex,n)),i=this.m_rShape.createGeometry(me.enumPolyline),s=this.m_rShape.insertPath(i,ae),n=A,S=!0):this.m_rShape.getUserIndex(_,this.m_clusterParentageIndex)===this.m_IDBoth&&A!==4&&(x=this.m_rShape.addVertex(s,_),r&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(_))&&this.m_rShape.setSegmentParentageBreakVertex(x,!0),s=this.m_rShape.insertPath(i,ae),S=!0),x=this.m_rShape.addVertex(s,_);const k=this.m_rTopoGraph.getClusterFromVertex(_);!S&&r&&this.m_rTopoGraph.isBreakNode(k)&&this.m_rShape.setSegmentParentageBreakVertex(x,!0);const $=this.m_rTopoGraph.getHalfEdgeFromVertex(_);if(r){const F=this.m_rTopoGraph.getSegmentParentage($);this.m_rShape.setSegmentParentageAndBreak(x,F,S||this.m_rTopoGraph.isBreakNode(k))}this.m_rTopoGraph.isHalfEdgeCurve($)&&(this.m_rTopoGraph.querySegmentXY($,o),this.m_rShape.setSegmentToIndex(this.m_rShape.getVertexIndex(x),o.get().clone())),_=P,S=!1}x=this.m_rShape.addVertex(s,_),r&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(_))&&this.m_rShape.setSegmentParentageBreakVertex(x,!0),this.m_rCutHandles.push(i),this.m_rShape.setGeometryUserIndex(i,this.m_sideIndex,n),i=ae,s=ae,n=32}}}function Ast(t,e,i,s,n){if(s&&(s.m_reason=0,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),t.isEmpty())return 5;const r=t.getGeometryType();if(r===me.enumPoint)return l5(t,s);const o=bl(e,t,!1).total();if(r===me.enumEnvelope){const _=t,x=new xe;return _.queryEnvelope(x),x.isDegenerate(o)?(s&&(s.m_reason=4,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),0):5}if(Dn(r)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),kj(x,e,i,s,n)}const l=[0],c=t.getImpl().getIsSimple(o,l);let f=i?-1:c;if(hg(f)||f===0)return f;const y=new Pc(t,e,f,n,!1);return r===me.enumMultiPoint||r===me.enumPolyline||r===me.enumPolygon?f=y.isSimplePlanarImpl():bt(""),t.getImpl().setIsSimple(f,o),s&&s.assign(y.m_nonSimpleResult),f}function Q1e(t,e,i,s,n){if(s&&(s.m_reason=0,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),t.isEmpty())return 5;const r=t.getGeometryType();if(r===me.enumPoint)return l5(t,s);const o=bl(e,t,!1).total();if(r===me.enumEnvelope){const _=t,x=new xe;return _.queryEnvelope(x),x.isDegenerate(o)?(s&&(s.m_reason=4,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),0):5}if(Dn(r)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),Q1e(x,e,i,s,n)}UA(r),el(r)||js("OGC simplify is not implemented for this geometry type");const l=[0],c=t.getImpl().getIsSimple(o,l);let f=i?-1:c;if(f===5||f===0)return f;const y=new Pc(t,e,f,n,!0);return r===me.enumMultiPoint||r===me.enumPolyline||r===me.enumPolygon?(f=y.isSimplePlanarImpl(),hg(f)&&(f=5)):bt(""),t.getImpl().setIsSimple(f,o),s&&s.assign(y.m_nonSimpleResult),f}function kj(t,e,i,s,n){if(s&&(s.m_reason=0,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),t.isEmpty())return 5;const r=t.getGeometryType();if(r===me.enumPoint)return l5(t,s);const o=bl(e,t,!1).total();if(r===me.enumEnvelope){const _=t,x=xe.constructEmpty();return _.queryEnvelope(x),x.isDegenerate(o)?(s&&(s.m_reason=4,s.m_vertexIndex1=-1,s.m_vertexIndex2=-1),0):5}if(Dn(r)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),kj(x,e,i,s,n)}const l=[0],c=t.getImpl().getIsSimple(o,l);let f=i?-1:c;if(f!==-1)return f;const y=new Pc(t,e,f,n,!1);return r===me.enumMultiPoint?f=y.multipointIsSimpleAsFeature():r===me.enumPolyline?f=y.polylineIsSimpleAsFeature():r===me.enumPolygon?f=y.polygonIsSimpleAsFeature():bt(""),t.getImpl().setIsSimple(f,o),s&&s.assign(y.m_nonSimpleResult),f}function eye(t,e,i,s){if(t.isEmpty())return t;const n=t.getGeometryType();if(n===me.enumPoint){const _=new xs;if(l5(t,_),_.m_reason===3){const x=t.clone();return x.replaceNaNs(1,0),x}return _.m_reason===2?t.createInstance():t}if(n===me.enumEnvelope){const _=bl(e,t,!0).total(),x=t,S=xe.constructEmpty();return x.queryEnvelope(S),S.isDegenerate(_)?x.createInstance():t}if(Dn(n)){const _=t,x=new vi({vd:_.getDescription()});return x.addSegment(_,!0),eye(x,e,i,s)}UA(n);const r=bl(e,t,!1).total(),o=[0],l=t.getImpl().getIsSimple(r,o),c=i?-1:l;if(hg(c)){if(n===me.enumPolygon&&t.getFillRule()!==0){const _=t.clone();return _.setFillRule(0),_}return t}if((n===me.enumMultiPoint||n===me.enumPolyline)&&c>=1)return t;const f=new Pc(t,e,c,s,!1);let y;return n===me.enumMultiPoint?y=f.multipointSimplifyAsFeature():n===me.enumPolyline?y=f.polylineSimplifyAsFeature():n===me.enumPolygon?y=f.polygonSimplifyAsFeature():bt(""),y}function tye(t,e,i,s){if(t.isEmpty())return t;const n=t.getGeometryType();if(n===me.enumPoint){const f=new xs;if(l5(t,f),f.m_reason===3){const y=t.clone();return y.replaceNaNs(1,0),y}return f.m_reason===2?t.createInstance():t}if(n===me.enumEnvelope){const f=t,y=new xe;f.queryEnvelope(y);const _=bl(e,t,!0).total();return y.isDegenerate(_)?f.createInstance():t}if(Dn(n)){const f=t,y=new vi({vd:f.getDescription()});return y.addSegment(f,!0),tye(y,e,i,s)}UA(n),el(n)||js("OGC simplify is not implemented for this geometry type");const r=bl(e,t,!1).total(),o=[0],l=t.getImpl().getIsSimple(r,o),c=i?-1:l;if(c===5){if(n===me.enumPolygon&&t.getFillRule()!==0){const f=t.clone();return f.setFillRule(0),f}return t}return Mz(t,bl(e,t,!0),!1,c,s,0,!0)}function l5(t,e){const i=t.getX(),s=t.getY();if(!Number.isFinite(i)||!Number.isFinite(s))return e&&(e.m_reason=2,e.m_vertexIndex1=-1,e.m_vertexIndex2=-1),0;if(t.hasAttribute(1)){const n=t.getZ();if(!Number.isFinite(n))return e&&(e.m_reason=Number.isNaN(n)?3:2,e.m_vertexIndex1=-1,e.m_vertexIndex2=-1),0}return 5}class Zie{constructor(){this.m_segment=null,this.m_vertexIndex=-1,this.m_pathIndex=-1,this.m_flags=0}setReversed(e){this.m_flags&=-2,this.m_flags=this.m_flags|(e?1:0)}getReversed(){return!!(1&this.m_flags)}getRightSide(){return this.getReversed()?0:1}}function Dst(){return{x:-1,y:-1,ipath:-1,ivertex:-1,ipolygon:-1}}function kst(t,e,i,s,n){return{x:t,y:e,ipath:i,ivertex:s,ipolygon:n}}function Nst(t,e){return t.x===e.x&&t.y===e.y&&t.ipath===e.ipath&&t.ivertex===e.ivertex&&t.ipolygon===e.ipolygon}function $st(t,e){t.x=e.x,t.y=e.y,t.ipath=e.ipath,t.ivertex=e.ivertex,t.ipolygon=e.ipolygon}function Ost(){return{x:-1,y:-1,ipath:-1,ivertex:-1,bBoundary:!1,bEndPoint:!1}}function Rst(t,e,i,s,n,r){return{x:t,y:e,ipath:i,ivertex:s,bBoundary:n,bEndPoint:r}}function Lst(t,e){t.x=e.x,t.y=e.y,t.ipath=e.ipath,t.ivertex=e.ivertex,t.bBoundary=e.bBoundary,t.bEndPoint=e.bEndPoint}class Fst extends zv{constructor(e){super(),this.m_helper=e}compare(e,i,s){const n=e.getElement(s),r=this.m_helper.m_xy.read(2*i)-this.m_helper.m_xy.read(2*n);return r<0?-1:r>0?1:0}}class zst extends zv{constructor(e){super(),this.m_helper=e}compare(e,i,s){const n=e.getElement(s),r=this.m_helper.m_edges[i],o=this.m_helper.m_edges[n],l=r.getReversed(),c=o.getReversed();let f=r.m_segment.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0),y=o.m_segment.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0);if(f===y){const _=l?r.m_segment.getStartY():r.m_segment.getEndY(),x=c?o.m_segment.getStartY():o.m_segment.getEndY(),S=Math.min(_,x);let P=.5*(S-this.m_helper.m_yScanline)+this.m_helper.m_yScanline;P===this.m_helper.m_yScanline&&(P=S),f=r.m_segment.intersectionOfYMonotonicWithAxisX(P,0),y=o.m_segment.intersectionOfYMonotonicWithAxisX(P,0)}return f<y?-1:f>y?1:0}}class Pc{constructor(e,i,s,n,r){this.m_multiVertexGeom=null,this.m_edges=[],this.m_freeEdges=[],this.m_lineEdgesRecycle=[],this.m_newEdges=[],this.m_recycledSegIter=null,this.m_crossOverHelperList=new eo,this.m_progressTracker=null,this.m_progressCounter=0,this.m_AET=new Gt,this.m_xyToNode1=null,this.m_xyToNode2=null,this.m_pathOrientations=null,this.m_pathParentage=null,this.m_xy=null,this.m_pairs=[],this.m_pairIndices=null,this.m_pathsForOGCTests=[],this.m_curveStitcher=null,this.m_editShape=null,this.m_multiPathStitcher=null,this.m_nonSimpleResult=new xs,this.m_progressCounter=0,this.m_progressTracker=n,this.m_geometry=e,this.m_knownSimpleResult=s,this.m_sr=i;const o=bl(i,e,!1);this.m_toleranceIsSimple=o,this.m_toleranceIsSimpleClustering=Bu(o),this.m_toleranceIsSimpleCracking=Cge(o),this.m_toleranceSimplify=bl(i,e,!0),this.m_description=this.m_geometry.getDescription(),this.m_attributeCount=this.m_description.getAttributeCount(),this.m_bOGCRestrictions=r,this.m_bPlanarSimplify=this.m_bOGCRestrictions,this.m_unknownOrientationPathCount=-1,this.m_yScanline=0,this.m_progressCounter=0}isSimplePlanarImpl(){if(this.m_bPlanarSimplify=!0,!this.checkStructure())return 0;const e=this.m_geometry.getGeometryType();return bi(e)&&!this.checkDegenerateSegments(!1)?0:this._CheckClustering()?bi(e)?this._CheckCracking()?this.m_geometry.getGeometryType()===me.enumPolyline?this.checkSelfIntersectionsPolylinePlanar()?4:0:this._CheckSelfIntersections()?this._CheckValidRingOrientation():0:0:5:0}isSimplePlanarImpl3D(){return K(0),7}generateSortedPairs(e){let i=null;bi(e.getGeometryType())&&(i=e);const s=(this.m_bPlanarSimplify||this.m_bOGCRestrictions)&&i!==null,n=e.getPointCount();this.m_xy=e.getAttributeStreamRef(0),this.m_pairs.length=0,this.m_pairIndices=new Ns(0),s&&(this.m_pathsForOGCTests.length=0);let r=0;for(let c=0;c<n;c++)if(this.m_pairs.push(2*c),this.m_pairs.push(2*c+1),this.m_pairIndices.add(2*c),this.m_pairIndices.add(2*c+1),s){for(;c>=i.getPathEnd(r);)r++;this.m_pathsForOGCTests.push(r)}const o=new rd,l={parent:this,workPt:new Y,userSort(c,f,y){y.sort(c,f,(_,x)=>this.parent.compareVerticesForPlanarClustering(_,x,s))},getValue(c){const f=this.parent.m_pairs[c],y=f>>1;return this.parent.m_xy.queryPoint2D(2*y,this.workPt),this.workPt.y+(1&f?this.parent.m_toleranceIsSimpleClustering:-this.parent.m_toleranceIsSimpleClustering)}};o.sort(this.m_pairIndices,0,2*n,l)}_TestToleranceDistancePlanar(e,i){const s=this.m_xy.read(2*e),n=this.m_xy.read(2*e+1),r=this.m_xy.read(2*i),o=this.m_xy.read(2*i+1);return Ij(s,n,r,o,this.m_toleranceIsSimpleClustering*this.m_toleranceIsSimpleClustering)?this.m_geometry.getDimension()===0?!1:s===r&&n===o:!0}checkStructure(){const e=this.m_geometry.getGeometryType();if(bi(e)){const i=this.m_geometry.getImpl(),s=this.m_geometry.getGeometryType()===me.enumPolygon?3:2;for(let n=0,r=i.getPathCount();n<r;n++)if(i.getPathSize(n)<s){if(i.hasNonLinearSegments()&&i.hasNonLinearSegmentsPath(n)&&i.getPathSize(n)>0)continue;return this.m_nonSimpleResult=new xs(1,n,0),!1}}if(el(e)){const i=this.m_geometry.getImpl(),s=i.getAttributeStreamRef(0);for(let n=0,r=i.getPointCount();n<r;n++)if(!s.readPoint2D(2*n).isFinite())return this.m_nonSimpleResult=new xs(2,n,0),!1;if(this.m_geometry.hasAttribute(1)){const n=i.getAttributeStreamRef(1);for(let r=0,o=i.getPointCount();r<o;r++){const l=n.read(r);if(!Number.isFinite(l))return Number.isNaN(l)?this.m_nonSimpleResult=new xs(3,r,0):this.m_nonSimpleResult=new xs(2,r,0),!1}}}return!0}checkDegenerateSegments(e){const i=this.m_geometry.getImpl(),s=i.querySegmentIterator(),n=i.hasAttribute(1),r=n?lte(this.m_sr,i,!1).total():0,o=i.hasNonLinearSegments(),l=this.m_toleranceIsSimple.total();for(;s.nextPath();)for(;s.hasNextSegment();){const c=s.nextSegment();let f=c.calculateLowerLength2D();if(!(f>l)&&!(o&&c.isCurve()&&(f=c.calculateLength2D(),f>l))){if(e&&n){const y=c.getStartAttributeAsDbl(1,0),_=c.getEndAttributeAsDbl(1,0);if(Math.abs(_-y)>r)continue}return this.m_nonSimpleResult=new xs(4,s.getStartPointIndex(),-1),!1}}return!0}checkDegenerateSegments3D(){return K(0),!1}_CheckClustering(){const e=this.m_geometry.getImpl();this.generateSortedPairs(e);const i=e.getPointCount();this.m_AET.clear(),this.m_AET.setComparator(new Fst(this)),this.m_AET.setCapacity(i);for(let s=0,n=2*i;s<n;s++){this.progress_();const r=this.m_pairIndices.read(s),o=this.m_pairs[r],l=o>>1;if(1&o){const c=this.m_AET.search(l),f=this.m_AET.getPrev(c),y=this.m_AET.getNext(c);if(this.m_AET.deleteNode(c),f!==Gt.st_nullNode()&&y!==Gt.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(f),this.m_AET.getElement(y)))return this.m_nonSimpleResult=new xs(5,this.m_AET.getElement(f),this.m_AET.getElement(y)),!1}else{const c=this.m_AET.addElement(l),f=this.m_AET.getPrev(c);if(f!==Gt.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(f),l))return this.m_nonSimpleResult=new xs(5,l,this.m_AET.getElement(f)),!1;const y=this.m_AET.getNext(c);if(y!==Gt.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(y),l))return this.m_nonSimpleResult=new xs(5,l,this.m_AET.getElement(y)),!1}}return!0}_CheckCracking(){const e=this.m_geometry.getImpl(),i=e.getPointCount();return!e.hasNonLinearSegments()&&i<10?this._CheckCrackingBrute():this._CheckCrackingPlanesweep()}_CheckCrackingPlanesweep(){if(this.m_editShape=new Bs,this.m_editShape.addGeometry(this.m_geometry),this.m_editShape.hasCurves()){this.m_curveStitcher=new Ic;const i=xe.constructEmpty();this.m_geometry.queryEnvelope(i);const s=Tc(this.m_toleranceSimplify.total(),i),n=new xs;if(ust(this.m_editShape,s,this.m_toleranceSimplify.total(),12e3,n,this.m_curveStitcher,null,this.m_progressTracker),n.m_reason!==0)return this.m_editShape=null,this.m_nonSimpleResult.assign(n),!1}const e=new xs;return M1e(!1,this.m_editShape,this.m_toleranceIsSimpleCracking,e,this.m_progressTracker)?(this.m_curveStitcher!=null?(e.m_vertexIndex1=this.m_curveStitcher.getOriginalVertexIndex(this.m_editShape,e.m_vertexIndex1),e.m_vertexIndex2=this.m_curveStitcher.getOriginalVertexIndex(this.m_editShape,e.m_vertexIndex2),this.m_curveStitcher=null):(e.m_vertexIndex1=this.m_editShape.getVertexIndex(e.m_vertexIndex1),e.m_vertexIndex2=this.m_editShape.getVertexIndex(e.m_vertexIndex2)),this.m_editShape=null,this.m_nonSimpleResult.assign(e),!1):(this.m_curveStitcher==null&&(this.m_editShape=null),!0)}_CheckCrackingBrute(){const e=this.m_geometry.getImpl(),i=e.querySegmentIterator(),s=e.querySegmentIterator();for(;i.nextPath();)for(;i.hasNextSegment();){const n=i.nextSegment();if(!i.isLastSegmentInPath()||!i.isLastPath()){s.resetTo(i);do for(;s.hasNextSegment();){const r=u5(!0,n,s.nextSegment(),this.m_toleranceIsSimpleCracking,!0);if(r){const o=r===2?7:6;return this.m_nonSimpleResult=new xs(o,i.getStartPointIndex(),s.getStartPointIndex()),!1}}while(s.nextPath())}}return!0}_CheckSelfIntersections(){let e=this.m_geometry.getImpl();this.m_curveStitcher!==null&&(this.m_multiPathStitcher=this.m_editShape.getGeometry(this.m_editShape.getFirstGeometry()),e=this.m_multiPathStitcher.getImpl(),this.generateSortedPairs(e)),this.m_edges.length=0,this.m_lineEdgesRecycle.length=0,this.m_recycledSegIter=e.querySegmentIterator(),this.m_recycledSegIter.setCirculator(!0);const i=new Array(0),s=e.getPointCount();let n=Number.NaN,r=0;for(let o=0,l=2*s;o<l;o++){this.progress_();const c=this.m_pairIndices.read(o),f=this.m_pairs[c];if(1&f)continue;const y=f>>1,_=this.m_xy.read(2*y),x=this.m_xy.read(2*y+1);if(i.length&&(_!==n||x!==r)){if(!this.processBunchForSelfIntersectionTest(i))return!1;i.length=0}i.push(y),n=_,r=x}return!!this.processBunchForSelfIntersectionTest(i)}checkSelfIntersectionsPolylinePlanar(){const e=this.m_geometry.getImpl(),i=[];for(let l=0,c=e.getPathCount();l<c;l++)i.push(e.isClosedPathInXYPlane(l));const s=Ost();let n,r,o;{const l=this.m_pairIndices.read(0),c=this.m_pairs[l]>>1,f=this.m_xy.readPoint2D(2*c),y=this.m_pathsForOGCTests[c];n=i[y],r=e.getPathStart(y),o=e.getPathEnd(y)-1,s.bEndPoint=c===r||c===o,this.m_bOGCRestrictions?s.bBoundary=!n&&s.bEndPoint:s.bBoundary=s.bEndPoint,s.ipath=y,s.x=f.x,s.y=f.y,s.ivertex=c}for(let l=1,c=this.m_pairIndices.size();l<c;l++){const f=this.m_pairIndices.read(l),y=this.m_pairs[f];if(1&y)continue;const _=y>>1,x=this.m_xy.readPoint2D(2*_),S=this.m_pathsForOGCTests[_];let P;S!==s.ipath&&(n=i[S],r=e.getPathStart(S),o=e.getPathEnd(S)-1);const A=_===r||_===o;P=this.m_bOGCRestrictions?!n&&A:A;const k=Rst(x.x,x.y,S,_,P,A);if(k.x===s.x&&k.y===s.y){if(this.m_bOGCRestrictions){if(!(k.bBoundary&&s.bBoundary||k.ipath===s.ipath&&k.bEndPoint&&s.bEndPoint))return this.m_nonSimpleResult=new xs(10,k.ivertex,s.ivertex),!1}else if(!k.bEndPoint||!s.bEndPoint)return this.m_nonSimpleResult=new xs(7,k.ivertex,s.ivertex),!1}Lst(s,k)}return!0}checkSelfIntersectionsPolylinePlanar3D(e){return K(0),!1}checkSelfIntersectionsPolygonsOGC(){const e=this.m_geometry.getImpl(),i=[];let s=-1,n=!1;for(let _=0,x=e.getPathCount();_<x;_++)e.isExteriorRingOGC(_)&&(n=!1,s++,_<x-1&&(e.isExteriorRingOGC(_+1)||(n=!0))),i.push(n?s:-1);const r=Dst();{const _=this.m_pairIndices.read(0),x=this.m_pairs[_]>>1,S=this.m_xy.readPoint2D(2*x),P=this.m_pathsForOGCTests[x];r.ipath=P,r.x=S.x,r.y=S.y,r.ivertex=x,r.ipolygon=i[P]}const o=[];for(let _=1,x=this.m_pairIndices.size();_<x;_++){const S=this.m_pairIndices.read(_),P=this.m_pairs[S];if(1&P)continue;const A=P>>1,k=this.m_xy.readPoint2D(2*A),$=this.m_pathsForOGCTests[A],F=kst(k.x,k.y,$,A,i[$]);if(F.x===r.x&&F.y===r.y){if(F.ipath===r.ipath)return this.m_nonSimpleResult=new xs(11,F.ivertex,r.ivertex),!1;i[F.ipath]>=0&&i[F.ipath]===i[r.ipath]&&(o.length!==0&&Nst(o.at(-1),r)||o.push({...r}),o.push(F))}$st(r,F)}if(o.length===0)return!0;const l=new eo(!0);i.fill(-1);let c=-1;const f=new Y;for(let _=0,x=o.length;_<x;_++){const S=o[_];S.x===f.x&&S.y===f.y||(c=l.createList(0),f.x=S.x,f.y=S.y);let P=i[S.ipath];P===-1&&(P=l.createList(2),i[S.ipath]=P),l.addElement(P,c),l.addElement(c,P)}const y=[];for(let _=l.getFirstList();_!==-1;_=l.getNextList(_)){const x=l.getListData(_);if(1&x||!(2&x))continue;let S=-1;for(y.push(_),y.push(-1);y.length;){const P=y.at(-1);y.pop();const A=y.at(-1);y.pop();const k=l.getListData(A);if(1&k){S=2&k?A:P;break}l.setListData(A,1|k);for(let $=l.getFirst(A);$!==-1;$=l.getNext($)){const F=l.getData($);F!==P&&(y.push(F),y.push(A))}}if(S!==-1){const P=i.indexOf(S);return this.m_nonSimpleResult=new xs(12,P,-1),!1}}return!0}_CheckValidRingOrientation(){const e=this.m_multiPathStitcher!==null?this.m_multiPathStitcher.getImpl():this.m_geometry.getImpl();if(e.calculateArea2D()<=0)return this.m_nonSimpleResult=new xs(8,e.getPathCount()===1?1:-1,-1),0;if(e.getPathCount()===1)return this.m_bOGCRestrictions&&!this.checkSelfIntersectionsPolygonsOGC()?0:4;this.m_pathOrientations=new gv(e.getPathCount(),0),this.m_pathParentage=new Ns(e.getPathCount(),-1);let i=-1,s=0;for(let o=0,l=e.getPathCount();o<l;o++){const c=e.calculateRingArea2D(o);if(this.m_pathOrientations.write(o,c<0?0:8),c>0)i=o,s=c;else{if(c===0)return this.m_nonSimpleResult=new xs(8,o,-1),0;if((i<0||s<Math.abs(c))&&(this.m_nonSimpleResult=new xs(9,o,-1),this.m_bOGCRestrictions))return 0;this.m_pathParentage.write(o,i)}}this.m_unknownOrientationPathCount=e.getPathCount(),this.m_newEdges.length=0;const n=e.getPointCount();this.m_yScanline=Number.NaN;const r=[];this.m_xyToNode1=new Ns(n,Gt.st_nullNode()),this.m_xyToNode2=new Ns(n,Gt.st_nullNode()),this.m_freeEdges.length=0,this.m_AET.clear(),this.m_AET.setComparator(new zst(this));for(let o=0,l=2*n;this.m_unknownOrientationPathCount>0&&o<l;o++){const c=this.m_pairIndices.read(o),f=this.m_pairs[c];if(1&f)continue;const y=f>>1,_=this.m_xy.read(2*y+1);if(_!==this.m_yScanline&&r.length){if(!this.processBunchForRingOrientationTest(r))return 0;r.length=0}r.push(y),this.m_yScanline=_}return this.m_unknownOrientationPathCount>0&&!this.processBunchForRingOrientationTest(r)?0:this.m_bOGCRestrictions?this.m_nonSimpleResult.m_reason!==0?0:this.checkSelfIntersectionsPolygonsOGC()?5:0:this.m_nonSimpleResult.m_reason===0?4:3}processBunchForSelfIntersectionTest(e){if(e.length===1)return!0;for(let l=0,c=e.length;l<c;l++){const f=e[l];this.m_recycledSegIter.resetToVertex(f,-1);const y=this.m_recycledSegIter.previousSegment();this.m_edges.push(this.createEdge(y,f,this.m_recycledSegIter.getPathIndex(),!0)),this.m_recycledSegIter.nextSegment();const _=this.m_recycledSegIter.nextSegment();this.m_edges.push(this.createEdge(_,f,this.m_recycledSegIter.getPathIndex(),!1))}this.m_edges.sort((l,c)=>this.edgeAngleCompare(l,c));let i=this.m_crossOverHelperList.getFirstList();i===-1&&(i=this.m_crossOverHelperList.createList(0)),this.m_crossOverHelperList.reserveNodes(this.m_edges.length);for(let l=0,c=this.m_edges.length;l<c;l++)this.m_crossOverHelperList.addElement(i,l);let s=!0,n=-1,r=-1;for(;s;){s=!1;let l=this.m_crossOverHelperList.getFirst(i);if(l===-1)break;let c=this.m_crossOverHelperList.getNext(l);for(;c!==-1;){const f=this.m_crossOverHelperList.getData(l),y=this.m_crossOverHelperList.getData(c);if(n=this.m_edges[f].m_vertexIndex,r=this.m_edges[y].m_vertexIndex,n!==r)l=c,c=this.m_crossOverHelperList.getNext(l);else if(s=!0,this.m_crossOverHelperList.deleteElement(i,l),l=this.m_crossOverHelperList.getPrev(c),c=this.m_crossOverHelperList.deleteElement(i,c),c===-1||l===-1)break}}const o=this.m_crossOverHelperList.getListSize(i);if(this.m_crossOverHelperList.clear(i),o>0)return this.m_nonSimpleResult=new xs(7,n,r),!1;for(let l=0,c=e.length;l<c;l++)this.recycleEdge(this.m_edges[l]);return this.m_edges.length=0,!0}processBunchForRingOrientationTest(e){for(let i=0,s=e.length;i<s;i++){const n=e[i];let r=this.m_xyToNode1.read(n);if(r!==Gt.st_nullNode()){const o=this.m_AET.getElement(r);this.m_freeEdges.push(o),this.m_AET.deleteNode(r),this.recycleEdge(this.m_edges[o]),this.m_edges[o]=null,this.m_xyToNode1.write(n,Gt.st_nullNode())}if(r=this.m_xyToNode2.read(n),r!==Gt.st_nullNode()){const o=this.m_AET.getElement(r);this.m_freeEdges.push(o),this.m_AET.deleteNode(r),this.recycleEdge(this.m_edges[o]),this.m_edges[o]=null,this.m_xyToNode2.write(n,Gt.st_nullNode())}}for(let i=0,s=e.length;i<s;i++){const n=e[i];this.m_recycledSegIter.resetToVertex(n,-1);const r=this.m_recycledSegIter.previousSegment();if(r.getStartY()>r.getEndY()){const l=this.m_recycledSegIter.getStartPointIndex(),c=this.createEdge(r,n,this.m_recycledSegIter.getPathIndex(),!0);let f;this.m_freeEdges.length>0?(f=this.m_freeEdges.at(-1),this.m_freeEdges.pop(),this.m_edges[f]=c):(f=this.m_edges.length,this.m_edges.push(c));const y=this.m_AET.addElement(f);this.m_xyToNode1.read(l)===Gt.st_nullNode()?this.m_xyToNode1.write(l,y):this.m_xyToNode2.write(l,y),3&this.m_pathOrientations.read(this.m_recycledSegIter.getPathIndex())||this.m_newEdges.push(y)}this.m_recycledSegIter.nextSegment();const o=this.m_recycledSegIter.nextSegment();if(o.getStartY()<o.getEndY()){const l=this.m_recycledSegIter.getEndPointIndex(),c=this.createEdge(o,n,this.m_recycledSegIter.getPathIndex(),!1);let f;this.m_freeEdges.length>0?(f=this.m_freeEdges.at(-1),this.m_freeEdges.pop(),this.m_edges[f]=c):(f=this.m_edges.length,this.m_edges.push(c));const y=this.m_AET.addElement(f);this.m_xyToNode1.read(l)===Gt.st_nullNode()?this.m_xyToNode1.write(l,y):this.m_xyToNode2.write(l,y),3&this.m_pathOrientations.read(this.m_recycledSegIter.getPathIndex())||this.m_newEdges.push(y)}}for(let i=0,s=this.m_newEdges.length;i<s&&this.m_unknownOrientationPathCount>0;i++){const n=this.m_newEdges[i],r=this.m_AET.getElement(n),o=this.m_edges[r].m_pathIndex;if(!(3&this.m_pathOrientations.read(o))){let l=-1,c=this.m_AET.getPrev(n),f=n,y=0;{let _=-1,x=null,S=-1,P=0;for(;c!==Gt.st_nullNode()&&(_=this.m_AET.getElement(c),x=this.m_edges[_],S=x.m_pathIndex,P=this.m_pathOrientations.read(S),!(3&P));)f=c,c=this.m_AET.getPrev(c);c===Gt.st_nullNode()?(y=1,c=f):(l=(3&P)==1?S:this.m_pathParentage.read(S),y=x.getRightSide()?0:1,c=this.m_AET.getNext(c))}do{const _=this.m_AET.getElement(c),x=this.m_edges[_],S=x.m_pathIndex;let P=this.m_pathOrientations.read(S);if(!(3&P)){if(y!==x.getRightSide())return this.m_nonSimpleResult=new xs(8,S,-1),!1;const A=y&&!x.getReversed()?1:2;if(P=-4&P|A,this.m_pathOrientations.write(S,P),A===2&&this.m_nonSimpleResult.m_reason===0){const k=this.m_pathParentage.read(S);if(k!==l&&(this.m_nonSimpleResult=new xs(9,S,k),this.m_bOGCRestrictions))return!1}if(this.m_unknownOrientationPathCount--,!this.m_unknownOrientationPathCount)return!0}l=(3&P)==1?S:this.m_pathParentage.read(S),f=c,c=this.m_AET.getNext(c),y=y?0:1}while(f!==n)}}return this.m_newEdges.length=0,!0}createEdge(e,i,s,n){let r;return e.getGeometryType()===me.enumLine?r=this.createEdgeLine(e):(r=new Zie,r.m_segment=e.clone()),r.m_vertexIndex=i,r.m_pathIndex=s,r.m_flags=0,r.setReversed(n),r}createEdgeLine(e){let i;return this.m_lineEdgesRecycle.length>0?(i=this.m_lineEdgesRecycle.at(-1),this.m_lineEdgesRecycle.pop(),e.copyTo(i.m_segment)):(i=new Zie,i.m_segment=e.clone()),i}recycleEdge(e){e.m_segment.getGeometryType()===me.enumLine&&this.m_lineEdgesRecycle.push(e)}static isShortSegment(e,i,s,n){let r=e.calculateLowerLength2D();if(r<=s){let o=!0;if(e.isCurve()&&(r=e.calculateLength2D(),o=r<=s),o){if(i){let l=e.getEndAttributeAsDbl(1,0);Number.isNaN(l)&&(l=0);let c=e.getStartAttributeAsDbl(1,0);return Number.isNaN(c)&&(c=0),Math.abs(c-l)<=n}return!0}return!1}return!1}static isShortSegmentPoints(e,i,s,n,r){if(s)return lJe(e.getXYZ(),i.getXYZ(),n,r);{const o=e.getXY(),l=i.getXY();return Y.sqrDistance(o,l)<=n*n}}removeDegenerateSegmentsFromCurvedPath(e,i,s,n){const r=e.hasAttribute(1),o=e.querySegmentIterator();o.resetToPath(i),K(o.nextPath());const l=this.m_toleranceSimplify.total();let c=!1,f=!0;const y=new Ht,_=new Ht,x=new Y;for(;o.hasNextSegment();){this.progress_();const A=o.nextSegment();if(Pc.isShortSegment(A,r,l,s))if(c){if(A.queryEnd(_),Pc.isShortSegmentPoints(y,_,r,l,s))continue;f&&(n.startPathPoint(y),f=!1),A.queryEnd(y),n.lineToPoint(y),c=!1}else x.assign(A.getStartXY()),A.queryStart(y),c=!0;else if(c)if(A.isCurve()){const k=A.clone();if(k.setCoordsForIntersector(x,A.getEndXY(),!1),k.setStart(y),Pc.isShortSegment(k,r,l,s))continue;n.addSegment(k,f),f=!1,c=!1}else{if(A.queryEnd(_),Pc.isShortSegmentPoints(y,_,r,l,s))continue;f&&(n.startPathPoint(y),f=!1),n.lineToPoint(_),c=!1}else n.addSegment(A,f),f=!1}if(f||!c)return;e.isClosedPath(i)?e.getPointByVal(e.getPathStart(i),y):e.getPointByVal(e.getPathEnd(i)-1,y);const S=n.querySegmentIterator();S.resetToLastPath(),S.resetToLastSegment();const P=n.getDescription().getAttributeCount()>1;for(K(S.previousPath());S.hasPreviousSegment();){const A=S.previousSegment();if(A.isCurve()){const k=A.clone();if(k.setCoordsForIntersector(A.getStartXY(),y.getXY(),!1),!Pc.isShortSegment(k,r,l,s)){P&&k.setEnd(y);const $=S.getEndPointIndex();for(let F=n.getPointCount()-1;F>=$;F--)n.removePoint(F);return void n.addSegment(k,!1)}}else if(A.queryStart(_),!Pc.isShortSegmentPoints(_,y,r,l,s)){const k=S.getEndPointIndex();for(let $=n.getPointCount()-1;$>=k;$--)n.removePoint($);return void n.lineToPoint(y)}}n.removePath(n.getPathCount()-1)}multipointIsSimpleAsFeature(){if(!this.checkStructure())return 0;const e=this.m_geometry.getImpl();this.m_multiVertexGeom=e;const i=e.getPointCount(),s=new Array(i);for(let n=0;n<i;n++)s[n]=n;s.sort((n,r)=>this.compareVerticesMultiPoint(n,r));for(let n=1;n<i;n++)if(this.compareVerticesMultiPoint(s[n-1],s[n])===0)return this.m_nonSimpleResult=new xs(5,s[n-1],s[n]),0;return 1}polylineIsSimpleAsFeature(){return this.checkStructure()&&this.checkDegenerateSegments(!0)?1:0}polygonIsSimpleAsFeature(){return this.isSimplePlanarImpl()}multipointSimplifyAsFeature(){let e=this.m_geometry.getImpl();const i=Pc.hasNanZs(e);let s,n=this.m_geometry;i&&(s=this.m_geometry.clone(),e=s.getImpl(),s.replaceNaNs(1,vr.getDefaultValue(1)),n=s),this.m_multiVertexGeom=e;const r=e.getPointCount(),o=new Array(r);for(let x=0;x<r;x++)o[x]=x;o.sort((x,S)=>this.compareVerticesMultiPoint(x,S));const l=new Array(r);l.fill(!1);let c=-1;for(let x=0;x<r;x++){const S=o[x];e.getXY(S).isFinite()&&((c<0||this.compareVerticesMultiPoint(c,S)!==0)&&(l[S]=!0),c=S)}const f=this.m_geometry.createInstance();let y=0,_=0;for(let x=0;x<r;x++)l[x]?_=x+1:(y<_&&f.addPoints(n,y,_),y=x+1);return y<_&&f.addPoints(n,y,_),f.getImpl().setIsSimple(1,this.m_toleranceSimplify.total()),f}polylineSimplifyAsFeature(){const e=this.m_geometry.getImpl(),i=e.querySegmentIterator(),s=e.querySegmentIterator(),n=this.m_geometry.createInstance(),r=this.m_geometry,o=e.hasAttribute(1),l=o?lte(this.m_sr,e,!0).total():0,c=[],f=[];let y=null;o&&(y=e.getAttributeStreamRef(1));const _=new Ht,x=e.hasNonLinearSegments(),S=this.m_toleranceSimplify.total();for(;i.nextPath();){if(s.nextPath(),e.getPathSize(i.getPathIndex())<2)continue;if(x&&e.hasNonLinearSegmentsPath(i.getPathIndex())){this.removeDegenerateSegmentsFromCurvedPath(e,i.getPathIndex(),l,n);continue}s.resetToLastSegment();let P=0,A=0,k=!0,$=!0;for(;i.hasNextSegment();){this.progress_();const F=i.nextSegment(),G=s.previousSegment();if(i.getStartPointIndex()>s.getStartPointIndex())break;if(k){const V=i.getStartPointIndex();e.getXY(V).isNAN()||(k=!1,c.push(V))}if($){const V=s.getEndPointIndex();e.getXY(V).isNAN()||(f.push(V),$=!1)}if(!k){const V=c.at(-1),B=i.getEndPointIndex();if(B-V>1){const W=new Y;W.setSub(e.getXY(V),e.getXY(B)),P=W.length()}else P=F.calculateLength2D();if(P>S)c.push(B),P=0;else if(o){let W=y.read(V);Number.isNaN(W)&&(W=0);let J=y.read(B);Number.isNaN(J)&&(J=0),Math.abs(J-W)>l&&(c.push(B),P=0)}}if(!$){const V=f.at(-1),B=s.getStartPointIndex();if(B-V>1){const W=new Y;W.setSub(e.getXY(V),e.getXY(B)),A=W.length()}else A=G.calculateLength2D();if(A>S)f.push(B),A=0;else if(o){let W=y.read(V);Number.isNaN(W)&&(W=0);let J=y.read(B);Number.isNaN(J)&&(J=0),Math.abs(J-W)>l&&(f.push(B),A=0)}}}if(c.length>0&&f.length>0&&(c.at(-1)<f.at(-1)?c.length>f.length?c.pop():f.pop():(c.at(-1)===f.at(-1)||f.pop(),f.pop())),f.length+c.length>=2){let F=!1;for(let G=0,V=c.length;G<V;G++)r.getPointByVal(c[G],_),F?n.lineToPoint(_):(n.startPathPoint(_),F=!0);for(let G=f.length-1;G>0;G--)r.getPointByVal(f[G],_),F?n.lineToPoint(_):(n.startPathPoint(_),F=!0);r.isClosedPath(i.getPathIndex())?n.closePathWithLine():f.length>0&&(r.getPointByVal(f[0],_),n.lineToPoint(_))}c.length=0,f.length=0}return o&&n.replaceNaNs(1,0),n.getImpl().setIsSimple(1,S),n}polygonSimplifyAsFeature(){return this.simplifyPlanar()}simplifyPlanar(){if(this.m_geometry.getFillRule()===1&&!bf(this.m_knownSimpleResult))return j6(this.m_geometry,this.m_toleranceSimplify,!0,!1,this.m_knownSimpleResult,this.m_progressTracker,0,!0);const e=new Bs;if(e.addGeometry(this.m_geometry),this.m_geometry.hasAttribute(1)&&e.replaceNaNs(1,0),e.removeNaNVertices(),e.getTotalPointCount()!==0){let s=null,n=0,r=0;if(e.hasCurves()){s=new Ic;const o=xe.constructEmpty();this.m_geometry.queryEnvelope(o);const l=Tc(this.m_toleranceSimplify.total(),o);n=Np(this.m_toleranceSimplify.total()),r=rf(l,n),zh(e,l,this.m_toleranceSimplify.total(),12e3,s,null,this.m_progressTracker)}bf(this.m_knownSimpleResult)||Hd(e,this.m_toleranceSimplify.add(r),this.m_progressTracker,!0,!1),this.m_geometry.getGeometryType()===me.enumPolygon&&tg(e,e.getFirstGeometry(),this.m_knownSimpleResult,!1,-1,this.m_progressTracker),s!==null&&s.stitchCurves(e,e.getFirstGeometry(),n,!0)}const i=e.getGeometry(e.getFirstGeometry());return i.getGeometryType()===me.enumPolygon&&(i.getImpl().updateOGCFlagsProtected(),i.setFillRule(0)),i.getImpl().setIsSimple(4,this.m_toleranceSimplify.total()),i}progress_(){}static hasNanZs(e){if(e.hasAttribute(1)){const i=e.getAttributeStreamRef(1);for(let s=0,n=e.getPointCount();s<n;s++){const r=i.read(s);if(Number.isNaN(r))return!0}}return!1}compareVerticesForPlanarClustering(e,i,s){if(e===i)return 0;const n=this.m_pairs[e],r=this.m_pairs[i],o=n>>1,l=r>>1,c=this.m_xy.readPoint2D(2*o);c.y+=1&n?this.m_toleranceIsSimpleClustering:-this.m_toleranceIsSimpleClustering;const f=this.m_xy.readPoint2D(2*l);f.y+=1&r?this.m_toleranceIsSimpleClustering:-this.m_toleranceIsSimpleClustering;const y=c.compare(f);if(y===0&&s){const _=this.m_pathsForOGCTests[o]-this.m_pathsForOGCTests[l];return xn(_)}return y}compareVerticesMultiPoint(e,i){if(e===i)return 0;const s=this.m_multiVertexGeom.getXY(e),n=this.m_multiVertexGeom.getXY(i),r=!s.isFinite(),o=!n.isFinite();if(r||o)return r<o?-1:r>o?1:0;if(s.y<n.y)return-1;if(s.y>n.y)return 1;if(s.x<n.x)return-1;if(s.x>n.x)return 1;for(let l=1;l<this.m_attributeCount;l++){const c=this.m_description.getSemantics(l),f=vr.getComponentCount(c);for(let y=0;y<f;y++){const _=this.m_multiVertexGeom.getAttributeAsDbl(c,e,y),x=this.m_multiVertexGeom.getAttributeAsDbl(c,i,y),S=IKe(_,x);if(S!==0)return S}}return 0}edgeAngleCompare(e,i){if(e===i)return 0;const s=e.m_segment.getTangent(e.getReversed()?1:0);e.getReversed()&&s.negateThis();const n=i.m_segment.getTangent(i.getReversed()?1:0);i.getReversed()&&n.negateThis();const r=s.getQuarter(),o=n.getQuarter();if(o===r){const l=s.crossProduct(n);return l<0?1:l>0?-1:0}return r<o?-1:1}}class Tu{getOperatorType(){return 10103}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}isSimpleAsFeature(e,i,s,n,r){const o=kj(e,i,s,n,r);return uJe(e.getGeometryType(),o)}isSimplePlanarDONOTUSE(e,i,s,n,r){return hg(Ast(e,i,s,n,r))}executeMany(e,i,s,n){return new qst(e,i,s,n)}execute(e,i,s,n){const r=new id([e]),o=this.executeMany(r,i,s,n).next();return o||bt("null geometry"),o}}class qst extends Ca{constructor(e,i,s,n){super(),this.m_progressTracker=n,this.m_bForceSimplify=s,this.m_index=-1,this.m_inputGeometryCursor=e,this.m_spatialReference=i}next(){const e=this.m_inputGeometryCursor.next();return e?(this.m_index=this.m_inputGeometryCursor.getGeometryID(),this.simplify(e)):null}getGeometryID(){return this.m_index}tock(){return!1}getRank(){return 1}simplify(e){if(e||Je(""),e.getGeometryType()===me.enumGeometryCollection){const i=bJe(e,-1),s=new Tu().executeMany(i,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker),n=e.createInstance();for(let r=s.next();r!=null;r=s.next())n.addGeometry(r);return n}return eye(e,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker)}}class Y2{getOperatorType(){return 10004}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n){return new Vst(e,i,s,n)}execute(e,i,s,n){return Gst(e,i,s,n)}}class Vst extends Ca{constructor(e,i,s,n){super(),this.m_progressTracker=n,this.m_index=-1,e||Je(""),this.m_envelope=i,this.m_inputGeometryCursor=e,this.m_spatialRefImpl=s,this.m_tolerance=Kn(s,i,!1).total()}next(){let e;return(e=this.m_inputGeometryCursor.next())?(Xc(e),this.m_index=this.m_inputGeometryCursor.getGeometryID(),vs(e,this.m_envelope,this.m_tolerance,0,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}function Gst(t,e,i,s){return x1e(t,e,i,Number.NaN,0,s)}function jst(t,e,i){const s=new xe;t.queryEnvelope(s);const n=new xe;e.queryEnvelope(n);const r=new xe(n);if(r.inflate(2*i),!r.isIntersecting(s))return 4;const o=t.getGeometryType(),l=e.getGeometryType();if(o===me.enumEnvelope&&s.containsEnvelope(r))return 1;if(l===me.enumEnvelope){const c=new xe(s);if(c.inflate(2*i),n.containsEnvelope(c))return 2}return 0}class Gy{constructor(e,i,s,n){this.m_intersectorGeom=null,this.m_sr=null,this.m_dimensionMask=-1,this.m_progressTracker=null,this.m_intersectorGeomType=me.enumUnknown,this.m_geomIntersectorEmptyGeom=null,this.m_intersectorGeom=e,this.m_sr=i,this.m_dimensionMask=s,this.m_progressTracker=n,this.m_intersectorGeomType=e.getGeometryType()}intersect(e){const i=this.tryFastImplementation(e);if(i!==null)return i;const s=G4(this.m_intersectorGeom,e),n=Kn(this.m_sr,s,!0).total(),r=xe.constructEmpty();this.m_intersectorGeom.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o),r.inflateCoords(2*n,2*n),r.intersect(o),r.inflateCoords(100*n,100*n);const l=0;let c=vs(this.m_intersectorGeom,r,l,0,this.m_progressTracker),f=vs(e,r,l,0,this.m_progressTracker);return e.getDimension()>this.m_intersectorGeom.getDimension()&&(c=St(f,f=c)),Est(f,c,this.m_sr,this.m_progressTracker)}intersectEx(e){const i=this.tryFastImplementation(e);if(i!==null){const _=[];return _.length=3,_[i.getDimension()]=i,this.prepareVector(e.getDescription(),this.m_dimensionMask,_)}const s=G4(this.m_intersectorGeom,e),n=Kn(this.m_sr,s,!0).total(),r=xe.constructEmpty();this.m_intersectorGeom.queryEnvelope(r);const o=xe.constructEmpty();e.queryEnvelope(o),r.inflateCoords(2*n,2*n),r.intersect(o),r.inflateCoords(100*n,100*n);const l=0;let c=vs(this.m_intersectorGeom,r,l,0,this.m_progressTracker),f=vs(e,r,l,0,this.m_progressTracker);e.getDimension()>this.m_intersectorGeom.getDimension()&&(c=St(f,f=c));const y=Cst(f,c,this.m_sr,this.m_progressTracker);return this.prepareVector(e.getDescription(),this.m_dimensionMask,y)}init(e,i,s,n=null){K(0)}static intersectPoints(e,i,s){return Sst(e,i,Kn(s,G4(e,i),!0))}tryFastImplementation(e){const i=e.getGeometryType();if(this.m_intersectorGeomType===me.enumPoint&&i===me.enumPoint){const c=Gy.intersectPoints(e,this.m_intersectorGeom,this.m_sr);if(this.m_dimensionMask!==-1){const f=new Jn({vd:c.getDescription()});return c.isEmpty()||f.add(c),f}return c}if(i===me.enumEnvelope&&this.m_intersectorGeomType===me.enumEnvelope&&(this.m_dimensionMask===-1||this.m_dimensionMask===4)){const c=e,f=this.m_intersectorGeom,y=new lr({copy:c});return y.intersect(f),y}const s=G4(e,this.m_intersectorGeom),n=Kn(this.m_sr,s,!0),r=e.isEmpty(),o=this.m_intersectorGeom.isEmpty();let l=r||o;if(!l){const c=jst(this.m_intersectorGeom,e,n.total());if(c===4)l=!0;else{if(2&c)return this.m_intersectorGeom;if(1&c)return e}}if(l){const c=cl(i),f=cl(this.m_intersectorGeomType);return c<f?Gy.ReturnEmpty(e,r):c>f||c===0&&i===me.enumMultiPoint&&this.m_intersectorGeomType===me.enumPoint?this.ReturnEmptyIntersector():Gy.ReturnEmpty(e,r)}if(i===me.enumEnvelope&&cl(this.m_intersectorGeomType)===0||this.m_intersectorGeomType===me.enumEnvelope&&cl(i)===0){const c=i===me.enumEnvelope?e:this.m_intersectorGeom,f=i===me.enumEnvelope?this.m_intersectorGeom:e,y=xe.constructEmpty();return c.queryEnvelope(y),vs(f,y,n.total(),0,this.m_progressTracker)}if(cl(i)===0&&cl(this.m_intersectorGeomType)>0||cl(i)>0&&cl(this.m_intersectorGeomType)===0){if(i===me.enumMultiPoint)return Xie(e,this.m_intersectorGeom,n);if(i===me.enumPoint)return Wie(e,this.m_intersectorGeom,n);if(this.m_intersectorGeomType===me.enumMultiPoint)return Xie(this.m_intersectorGeom,e,n);if(this.m_intersectorGeomType===me.enumPoint)return Wie(this.m_intersectorGeom,e,n);bt("")}return null}tryFastIntersectPolylinePolygon(e,i){return K(0),{}}AnalyseClipSegment(e,i,s){return K(0),0}AnalyseClipSegmenPt(e,i,s){return K(0),0}ReturnEmptyIntersector(){return this.m_geomIntersectorEmptyGeom===null&&(this.m_geomIntersectorEmptyGeom=this.m_intersectorGeom.createInstance()),this.m_geomIntersectorEmptyGeom}static ReturnEmpty(e,i){return i?e:e.createInstance()}prepareVector(e,i,s){let n=0;return 1&i?(s[0]||(s[0]=new Jn({vd:e})),n++):s.shift(),2&i?(s[n]||(s[n]=new vi({vd:e})),n++):s.splice(n,1),4&i?s[n]||(s[n]=new Wt({vd:e})):s.splice(n,1),new id(s)}}class Bst extends Ca{constructor(e,i,s,n,r){super(),this.m_smallCursor=null,this.m_progressTracker=n,this.m_geomIntersector=i.next(),this.m_intersector=new Gy(this.m_geomIntersector,s,r,n),this.m_index=-1,this.m_inputGeoms=e,this.m_dimensionMask=r,this.m_dimensionMask!==-1&&(this.m_dimensionMask<=0||this.m_dimensionMask>7)&&Je("bad dimension mask")}next(){if(!this.m_geomIntersector)return null;let e;if(this.m_smallCursor!==null){if(e=this.m_smallCursor.next(),e)return e;this.m_smallCursor=null}for(;e=this.m_inputGeoms.next();)return Xc(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.m_dimensionMask===-1?this.m_intersector.intersect(e):(this.m_smallCursor=this.m_intersector.intersectEx(e),this.m_smallCursor.next());return null}getGeometryID(){return K(0),0}tock(){return K(0),!1}getRank(){return K(0),0}}class X2{getOperatorType(){return 1e4}accelerateGeometry(e,i,s){if(!this.canAccelerateGeometry(e))return!1;bl(i,e,!0);let n=0;return e.getGeometryType()!==me.enumPolygon&&e.getGeometryType()!==me.enumPolyline||!D6(e)||s===0||(n|=e.getImpl().buildQuadTreeAccelerator(s)?1:0),!!n}canAccelerateGeometry(e){return D6(e)}supportsCurves(){return!0}executeMany(e,i,s,n,r=-1){return new Bst(e,i,s,n,r)}execute(e,i,s,n){if(e.getGeometryType()===me.enumPoint&&i.getGeometryType()===me.enumPoint)return Gy.intersectPoints(e,i,s);const r=new id([e]),o=new id([i]),l=this.executeMany(r,o,s,n,-1).next();return l||bt("null output"),l}}function iye(t,e,i){return e.m_projector.project(t,i)}function Hst(t,e,i,s,n){t.m_projector.transformInPlaceZ(e,null,i,s,null,n);const r=s.slice(0,i).filter(o=>!o.isNAN());for(let o=0,l=r.length;o<l;++o)s[o].assign(r[o]);return r.length}function sye(t,e,i,s,n){return t.m_projector.transformInPlaceZ(e,null,i,s,null,n)}function Az(t,e,i,s){if(t&&e&&e.isPannable()||Je("fold_into_360_range_geodetic"),t.isEmpty())return t;if(i===4)return B6(t,e,s);let n=t;const r=n.getGeometryType();if(bi(r)){n=ZE(t,e);const o=new xe;n.queryEnvelope(o);const l=Kn(e,o,!1).total(),c=e.getPannableExtent();let f=Math.floor((o.xmin-c.xmin)/c.width())*c.width()+c.xmin,y=n;for(;f<o.xmax;)f>o.xmin+l&&f<o.xmax-l&&(y=cye(y,e,i,!0,f)),f+=c.width();n=y}else{if(r===me.enumEnvelope){const o=new Wt({vd:n.getDescription()});return o.addEnvelope(n,!1),Az(o,e,i,s)}if(Dn(r)){const o=new vi({vd:n.getDescription()});return o.addSegment(n,!0),Az(o,e,i,s)}}return B6(n,e,s)}function B6(t,e,i){if(t&&e&&e.isPannable()||Je(""),t.isEmpty())return t;let s;const n=t.getGeometryType();if(n===me.enumEnvelope){const o=new Wt({vd:t.getDescription()});o.addEnvelope(t,!1),s=o}else if(Dn(n)){const o=new vi({vd:t.getDescription()});o.addSegment(t,!0),s=o}else s=t;const r=ZE(s,e);return r.isEmpty()?r:W2(r,e,0,r!==t,0,i)}function Ust(t,e,i){if(!e.isPannable()||t.isEmpty())return t;const s=e.getPannableExtent().width(),n=.5*s,r=t.queryInterval(0,0);if(r.width()<n||!el(t.getGeometryType())){if(Number.isNaN(i))return t;const $=r.getCenter();if(Math.abs($-i)<=n)return t;{const F=new _i,G=fv((i-$)/s)*s;F.setShiftCoords(G,0);const V=t.clone();return V.applyTransformation(F),V}}const o=t.getGeometryType(),l=t,c=l.getAttributeStreamRef(0),f=t.clone(),y=f.getAttributeStreamRef(0);let _=0,x=0,S=0,P=bi(o)?0:-1;const A=Ze.constructEmpty();let k=!1;for(let $=0,F=l.getPointCount();$<F;$++){const G=c.read(2*$);$===x&&(bi(o)?(P===0&&Number.isNaN(i)&&(k=!0),P>0&&Number.isNaN(i)&&(i=A.getCenter(),k=!1),x=l.getPathEnd(P),P++):x=l.getPointCount(),Number.isNaN(i)?S=G:(S=i,_=0));let V=G-S;Math.abs(V)>n&&(V=fv(V/s)*s,_-=V,Math.abs(_)<.1*s&&(_=0));const B=G+_;y.write(2*$,B),k&&A.mergeCoordinate(B),S=G}return f.notifyModified(),f}const Yst="missing implementation";function Xst(t,e,i,s){const n=e.getCoordinateSystemType();if(n===0){const l=new Gl;return e.queryPrecisionDescriptor(l),Kie(t,l,e,i)}let r=t;s!==2&&s!==3||!e.isPannable()||(r=B6(r,e,i));const o=new Gl;if(e.queryPrecisionDescriptor(o),r=Kie(r,o,e,i),s===0||r.isEmpty())return r;if(n===1){if(s===1){const l=new xe;r.queryLooseEnvelope(l);const c=e.getPannableExtent(),f=.01*c.width();return c.xmin=l.xmin-f,c.xmax=l.xmax+f,new Y2().execute(r,c,e,i)}return r}if(n===2){const l=e.getPCSHorizon();if(s===1||s===2){const c=new X2().execute(r,l,e,i);return c===l?c.clone():c}return r}if(n===3)return r;bt(Yst)}function Kie(t,e,i,s){const n=e.getXYGridRange(),r=t.hasAttribute(1),o=t.hasAttribute(2);let l=new Ze,c=new Ze;r&&(l=e.getZGridRange()),o&&(c=e.getMGridRange());let f=new Y2().execute(t,n,i,s);if(r){const y=f.queryInterval(1,0);l.contains(y)||(t===f&&(f=f.clone()),rz(f,l,1,0))}if(o){const y=f.queryInterval(2,0);c.contains(y)||(t===f&&(f=f.clone()),rz(f,c,2,0))}return f}class Wst{constructor(e){this.m_inputPCSHorizonClipOption=0,this.m_outputPCSHorizonClipOption=0,this.m_bDontGeonormalizePolygon=!1,this.m_bClipOutCurvedPoles=!1,this.m_bNormalizeOutputGeometry=!1,this.m_bDontHackPolesInGeogToGeog=!1,this.m_centralMeridianOfOutputGCS=0,this.m_densificationStepInput=0,e||Je(""),this.m_projTransform=e,this.m_bClipOutCurvedPoles=!1;const i=this.m_projTransform.getExtendedParamsImpl();this.m_bNormalizeOutputGeometry=i.normalizeResultGeometry,this.m_bNormalizeOutputGeometry&&(i.legacyHorizonClipping?this.m_bNormalizeOutputGeometry=!1:this.m_projTransform.getOutputSR().isPannable()||(this.m_bNormalizeOutputGeometry=!1)),i.clipWithInputHorizon?(this.m_inputPCSHorizonClipOption=0,!i.legacyHorizonClipping&&this.m_projTransform.getInputSR().isPannable()&&(this.m_inputPCSHorizonClipOption=this.m_bNormalizeOutputGeometry?4:2)):this.m_inputPCSHorizonClipOption=1,i.clipWithOutputHorizon?(this.m_outputPCSHorizonClipOption=0,!i.legacyHorizonClipping&&this.m_projTransform.getOutputSR().isPannable()&&(this.m_outputPCSHorizonClipOption=this.m_bNormalizeOutputGeometry?4:2)):this.m_outputPCSHorizonClipOption=1,this.m_centralMeridianOfOutputGCS=i.centralMeridianOfOutputGCS,this.m_densificationStepInput=i.densificationStep;const s=this.m_projTransform.getExtendedParamsInternal();this.m_bDontGeonormalizePolygon=s.hasFlag(2147483648),this.m_bDontHackPolesInGeogToGeog=s.hasFlag(1073741824),this.m_bClipOutCurvedPoles=s.hasFlag(536870912)}project(e,i){if(this.m_projTransform.isIdentity()||e.isEmpty())return e;const s=e.getGeometryType();if(s===me.enumPoint)return this.projectPoint(e,i);const n=this.m_projTransform.getInputSR().getCoordinateSystemType(),r=this.m_projTransform.getOutputSR().getCoordinateSystemType();if(this.m_projTransform.getInputSR(),this.m_projTransform.getOutputSR(),n===0&&n===r){const o=Zst(),l=e.clone();return l.applyTransformation(o),l}switch(s){case me.enumPolyline:case me.enumPolygon:return this.projectMultiPath(e,i);case me.enumMultiPoint:return this.projectMultiPoint(e,i);case me.enumEnvelope:return this.projectEnvelope(e,i);case me.enumGeometryCollection:return this.projectGeometryCollection(e,i);default:bt("")}}projectPoint(e,i){const s=[e.getXY()];let n,r=null;(n=e.hasAttribute(1))&&(r=[e.getZ()]),this.transformInPlaceZ(s,r,1,s,r,null);const o=e.clone();return o.setXY(s[0]),n&&o.setZ(r[0]),o}projectMultiPoint(e,i){let s=new Jn({copy:e});const n=this.m_projTransform.getInputSR(),r=this.m_projTransform.getOutputSR(),o=n.getCoordinateSystemType(),l=r.getCoordinateSystemType();if(o===3&&K(0),s=RN(s,n,this.m_inputPCSHorizonClipOption,i),s.isEmpty())return s;o===2&&fye(n,0,s),mye(this.m_projTransform,s,!1);let c=0;l===3&&K(0);const f=l===2;return f?c=r.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(c=this.m_centralMeridianOfOutputGCS),f&&this.m_outputPCSHorizonClipOption!==0||(s=W2(s,HN(r),c,!1,0,i)),f&&(s=$N(s,r,this.m_outputPCSHorizonClipOption,i),dye(r,s,this.m_bNormalizeOutputGeometry),s.isEmpty()),s}projectMultiPath(e,i){const s=e.getGeometryType();return s===me.enumPolygon?this.projectPolygon(e,i):s===me.enumPolyline?this.projectPolyline(e,i):void bt("project_multi_path_")}projectEnvelope(e,i){this.m_projTransform.getInputSR(),this.m_projTransform.getOutputSR();const s=this.m_projTransform.isVertical()&&e.hasAttribute(1);let n=Ze.constructEmpty();if(s&&(n=e.queryInterval(1,0)),n.width()>0){const r=e.clone();r.setInterval(1,0,n.vmin,n.vmin);const o=this.projectEnvelopeHelper(r,i);r.setInterval(1,0,n.vmax,n.vmax);const l=this.projectEnvelopeHelper(r,i);return o.merge(l),o}return this.projectEnvelopeHelper(e,i)}projectPolygon(e,i){K(e.getGeometryType()===me.enumPolygon),K(!this.m_projTransform.isIdentity()),K(!e.isEmpty());const s=this.m_projTransform.getInputSR(),n=this.m_projTransform.getOutputSR(),r=s.getCoordinateSystemType(),o=n.getCoordinateSystemType(),l=new Wt({copy:e});r===3&&K(0),o===3&&K(0);const c=r===2,f=o===2,y=c?s.getGCS():s,_=f?n.getGCS():n,x=!f&&!this.m_bDontHackPolesInGeogToGeog;let S=!1,P=RN(l,s,this.m_inputPCSHorizonClipOption,i);if(P.isEmpty())return P;let A=this.m_densificationStepInput;const k=!Number.isNaN(A);let $;k&&(P=new V0().execute(P,A,0,0,i));let F=f?n.getPCSInfo():null,G=Number.NaN;c&&(G=s.getCentralMeridian());const V=n.getGCSSplitLines()!==null;if(this.m_bDontGeonormalizePolygon){const B=P;if(c&&(Q4(s,G,B),k)){const W=s.getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/W}if(eT(this.m_projTransform,B,x),k){const W=s.getGCS().getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/W}$=B}else{let B=new vi({vd:P.getDescription()});if(B.addAndExplicitlyOpenAllPaths(P,!1),c){if(Q4(s,G,B),k){const se=s.getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/se}if(this.m_bClipOutCurvedPoles){const se=s.getPCSInfo(),oe=se.getSouthPoleGeometry()===Ha.PE_POLE_LINE_CURVED,pe=se.getNorthPoleGeometry()===Ha.PE_POLE_LINE_CURVED;if(oe||pe){const ue=xe.constructEmpty();B.queryLooseEnvelope(ue),ue.inflateCoords(1,1);const ce=89.9999*y.getOneDegreeGCSUnit();oe&&(ue.ymin=-ce),pe&&(ue.ymax=ce),B=Bet(B,ue,y,0,0,i)}}}if(eT(this.m_projTransform,B,x),k){const se=HN(s).getUnitsPerMillimeter();A*=HN(n).getUnitsPerMillimeter()/se}let W=Number.NaN;f?(F=n.getPCSInfo(),W=n.getCentralMeridian()):Number.isNaN(this.m_centralMeridianOfOutputGCS)||(W=this.m_centralMeridianOfOutputGCS);let J=J4(s)|J4(n),re=10*_.getTolerance(0);this.m_bDontHackPolesInGeogToGeog&&(J=3,re=10*_.getTolerance(0)),$=Ynt(P,s,B,_,W,i,J,re,this.m_bNormalizeOutputGeometry),J=0}if(V&&(K(!n.isPannable()),$=use($,n,i)),f){if(!S){const B=_.getPannableExtent().width();if($.queryInterval(0,0).width()>=B-10*_.getTolerance(0)){const W=F.getNorthPoleLocation(),J=F.getSouthPoleLocation(),re=F.getNorthPoleGeometry(),se=F.getSouthPoleGeometry();let oe=0;re===Ha.PE_POLE_POINT&&W!==Ha.PE_POLE_OUTSIDE_BOUNDARY&&(oe=1),se===Ha.PE_POLE_POINT&&J!==Ha.PE_POLE_OUTSIDE_BOUNDARY&&(oe|=2),S||(S=oe!==0)}}$=$N($,n,this.m_outputPCSHorizonClipOption,i),k&&($=new V0().execute($,A,0,0,i)),hse(n,$,this.m_bNormalizeOutputGeometry)}return $.isEmpty()||S&&($=new Tu().execute($,n,!1,i)),$}projectPolyline(e,i){K(e.getGeometryType()===me.enumPolyline),K(!this.m_projTransform.isIdentity()),K(!e.isEmpty());const s=this.m_projTransform.getInputSR(),n=this.m_projTransform.getOutputSR(),r=s.getCoordinateSystemType(),o=n.getCoordinateSystemType(),l=new vi({copy:e});r===3&&K(0),o===3&&K(0);const c=r===2,f=o===2;c&&s.getGCS();const y=f?n.getGCS():n,_=!f&&!this.m_bDontHackPolesInGeogToGeog;let x=RN(l,s,this.m_inputPCSHorizonClipOption,i);if(x.isEmpty())return x;let S=Number.NaN;c&&(S=s.getCentralMeridian());const P=n.getGCSSplitLines()!==null;let A=this.m_densificationStepInput;const k=!Number.isNaN(A);let $;if(k&&(x=new V0().execute(x,A,0,0,i)),this.m_bDontGeonormalizePolygon){if(c&&(Q4(s,S,x),k)){const F=s.getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/F}if(eT(this.m_projTransform,x,_),k){const F=s.getGCS().getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/F}$=x}else{const F=new vi({vd:x.getDescription()});if(F.addAndExplicitlyOpenAllPaths(x,!1),c&&(Q4(s,S,F),k)){const W=s.getUnitsPerMillimeter();A*=s.getGCS().getUnitsPerMillimeter()/W}if(eT(this.m_projTransform,F,_),k){const W=s.getGCS().getUnitsPerMillimeter();A*=n.getGCS().getUnitsPerMillimeter()/W}let G=Number.NaN;f?G=n.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(G=this.m_centralMeridianOfOutputGCS);let V=J4(s)|J4(n),B=10*y.getTolerance(0);this.m_bDontHackPolesInGeogToGeog&&(V=3,B=0),$=Xnt(x,s,F,y,G,i,V,B,this.m_bNormalizeOutputGeometry),V=0}return P&&(K(!n.isPannable()),$=use($,n,i)),f&&($=$N($,n,this.m_outputPCSHorizonClipOption,i),k&&($=new V0().execute($,A,0,0,i)),hse(n,$,this.m_bNormalizeOutputGeometry)),$.isEmpty(),$}projectGeometryCollection(e,i){return K(0),{}}tryProjectMultiVertexSimple(e,i){return K(0),{}}projectEnvelopeHelper(e,i){const s=(e.height()+e.width())/400;if(s!==0){const n=new V0().execute(e,s,0,0,i),r=this.projectMultiPath(n,i),o=new lr({vd:e.getDescription()});if(r.isEmpty()){const l=Math.min(e.height(),e.width()),c=bl(this.m_projTransform.getInputSR(),e,!0).total();if(l>100*c){const P=xe.constructEmpty(),A=Kn(this.m_projTransform.getOutputSR(),P,!0).total(),k=this.m_projTransform.getInputSR().getOneMeter()/this.m_projTransform.getOutputSR().getOneMeter();if(l>100*Math.max(c,A*k))return o}const f=new vi;f.addAndExplicitlyOpenAllPaths(n,!1),this.projectMultiPath(f,i).queryEnvelope(o);const y=new Jn({vd:e.getDescription()});y.reserve(4);const _=new Ht;for(let P=0;P<4;P++)e.queryCornerByVal(P,_),y.add(_);const x=this.projectMultiPoint(y,i),S=new lr;return x.queryEnvelope(S),o.merge(S),o}return r.queryEnvelope(o),o}{const n=e.getCenterXY(),r=new Ht(n),o=this.projectPoint(r,i),l=new lr({vd:e.getDescription()});if(o.isEmpty())l.setEmpty();else{e.copyTo(l);const c=o.getXY();l.setCoords(c.x,c.y,c.x,c.y)}return l}}transformInPlace(e,i,s,n){return K(0),0}transformInPlaceZ(e,i,s,n,r,o){if(this.m_projTransform.isIdentity())return e!==n&&E6(n,e,s),i!==r&&dn(r,i,0,0,s),s;const l=this.m_projTransform,c=l.getInputSR(),f=l.getOutputSR(),y=c.getCoordinateSystemType(),_=f.getCoordinateSystemType();if(y===0&&y===_){const A=c.getHorzUnitFactor()/f.getHorzUnitFactor(),k=new _i;return k.setScaleCoords(A,A),k.transformPoints2D(e,s,n),l.isVertical()&&K(0),s}y===3&&js("image: transform_in_place_"),_===3&&js("image: transform_in_place_"),Jnt(e,s,n,c,this.m_inputPCSHorizonClipOption),r!==i&&dn(r,i,0,0,s),y===2&&Oj(c,0,n,s),Z2(this.m_projTransform,n,r,s,!1);let x=0;const S=_===2;if(S?x=f.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(x=this.m_centralMeridianOfOutputGCS),S&&this.m_outputPCSHorizonClipOption!==0||uye(n,s,f.getGCS(),x),S){if(!kz(n,s,f,this.m_outputPCSHorizonClipOption))for(let A=0;A<s;++A)n[A].setNAN();$j(f,n,s,!1)}let P=s;for(let A=0;A<s;++A)n[A].isNAN()&&(r&&(r[A]=Number.NaN),P--);return P}}function J4(t){if(t.getCoordinateSystemType()!==2)return 0;let e=0;const i=t.getPCSInfo(),s=i.getNorthPoleLocation(),n=i.getSouthPoleLocation(),r=i.getNorthPoleGeometry(),o=i.getSouthPoleGeometry();return r===Ha.PE_POLE_POINT&&s!==Ha.PE_POLE_OUTSIDE_BOUNDARY&&(e=1),o===Ha.PE_POLE_POINT&&n!==Ha.PE_POLE_OUTSIDE_BOUNDARY&&(e|=2),e}function Zst(t,e){return K(0),{}}class a2{getOperatorType(){return 10300}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s){return!i||i.isIdentity()?e:new Kst(e,i,s)}execute(e,i,s){return i.isIdentity()?e:iye(e,i,s)}transform(e,i,s,n,r=!0){return r?Hst(e,i,s,n,null):sye(e,i,s,n,null)}transform3D(e,i,s,n,r=!0){return K(0),0}foldInto360Range(e,i){return B6(e,i,null)}foldInto360RangeGeodetic(e,i,s){return Az(e,i,s,null)}normalizeGeometryEx(e,i,s,n,r=0){return Snt(e,i,s,n,r)}normalizeGeometry(e,i,s){return Ust(e,i,s)}clipToSpatialReference(e,i,s,n=0){return Xst(e,i,s,n)}}class Kst extends Ca{constructor(e,i,s){super(),this.m_projTrans=i,this.m_progressTracker=s,this.m_index=-1,e||Je(""),this.m_inputGeoms=e}next(){const e=this.m_inputGeoms.next();return e!=null?(F2(e),Xc(e),this.m_index=this.m_inputGeoms.getGeometryID(),iye(e,this.m_projTrans,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return K(0),!1}getRank(){return K(0),0}}function Jie(t,e,i,s,n,r,o=!1){t||Je("Geometry.Geodetic_densify.densify");let l=t.getGeometryType();if(Xc(t),F2(t),t.isEmpty()||Ig(l))return t;const c=new tnt;c.m_sr=e,c.m_gcs=e.getGCS(),c.m_transform=c.m_gcs!==e?e.getSRToGCSTransform():null,c.m_progressTracker=r;const f=c5();let y,_,x;if(c.m_gcs.querySpheroidData(f),c.m_a=f.majorSemiAxis,c.m_eSquared=f.e2,c.m_rpu=c.m_gcs.getUnit().getUnitToBaseFactor(),c.m_gcsTolerance=c.m_gcs.getTolerance(0),c.m_radTolerance=c.m_gcsTolerance*c.m_rpu,c.m_maxLength=s,c.m_maxDeviation=n,c.m_curveType=i,l===me.enumEnvelope){const S=new Wt({vd:t.getDescription()});S.addEnvelope(t,!1),y=S,l=me.enumPolygon}else if(Dn(l)){const S=new vi({vd:t.getDescription()});S.addSegment(t,!0),y=S,l=me.enumPolyline}else y=t;if(c.m_curveType!==4){if(_=c.m_transform&&!c.m_transform.isIdentity()?new a2().execute(y,c.m_transform,r):ZE(y,c.m_gcs),_.isEmpty())return _;_=Jst(c.m_rpu,_);let S=c.geodeticDensify(_);o||(S=new a2().foldInto360RangeGeodetic(S,c.m_gcs,c.m_curveType)),x=c.m_transform&&!c.m_transform.isIdentity()?new a2().execute(S,c.m_transform.getInverse(),r):S}else{let S;if(e.isPannable())S=ZE(y,e);else{const P=e.getPCSHorizon();S=new X2().execute(y,P,e,r),S===P&&(S=P.clone())}if(_=S,_.isEmpty())return _;x=c.shapePreservingDensify(_)}return x}function Jst(t,e){const i=new xe;if(e.queryLooseEnvelope(i),i.width()*t<Math.PI)return e;let s=!1;const n=e.querySegmentIterator(),r=new Y,o=new Y;for(;n.nextPath();)for(;n.hasNextSegment();){const P=n.nextSegment();if(r.setCoordsPoint2D(P.getStartXY()),o.setCoordsPoint2D(P.getEndXY()),r.scale(t),o.scale(t),Math.abs(r.x-o.x)>Math.PI){if(!Qie(r,o)){s=!0;break}if(Math.abs(r.x-o.x)>2*Math.PI){s=!0;break}}}if(!s)return e;const l=e.createInstance();l.reserve(e.getPointCount());const c=e.getDescription().getAttributeCount()>1,f=new Y,y=new Y,_=new Y(0,0),x=new Y(0,0),S=new Ht;for(n.resetToFirstPath();n.nextPath();){let P=Number.NaN,A=0;for(;n.hasNextSegment();){const k=n.nextSegment();if(r.setCoordsPoint2D(k.getStartXY()),o.setCoordsPoint2D(k.getEndXY()),r.scale(t),o.scale(t),Number.isNaN(P)?(A=Dy(r.x,Number.NaN,A),_.setCoordsPoint2D(r)):_.setCoordsPoint2D(x),P=_.x,Qie(r,o)){if(o.x-r.x>2*Math.PI)for(;o.x-r.x>2*Math.PI;)o.x-=2*Math.PI;else if(o.x-r.x<2*-Math.PI)for(;o.x-r.x<2*-Math.PI;)o.x+=2*Math.PI;A=Dy(o.x,Number.NaN,A),x.setCoordsPoint2D(o)}else f.setCoordsPoint2D(o),ant(f),A=Dy(f.x,P,A),x.setCoords(A+f.x,f.y);if(Math.abs(x.x-o.x)<.5&&x.setCoordsPoint2D(o),c)k.queryCoord(0,S),y.setCoordsPoint2D(_),y.scale(1/t),S.setXY(y),n.isFirstSegmentInPath()?l.startPathPoint(S):l.lineToPoint(S),n.isLastSegmentInPath()&&!n.isPathClosed()&&(k.queryCoord(1,S),y.setCoordsPoint2D(x),y.scale(1/t),S.setXY(y),l.lineToPoint(S));else{n.isFirstSegmentInPath()&&l.insertPath2D(-1,null,0,0,!0);const $=l.getPathCount()-1;y.setCoordsPoint2D(_),y.scale(1/t),l.insertPoint2D($,-1,y),n.isLastSegmentInPath()&&!n.isPathClosed()&&(y.setCoordsPoint2D(x),y.scale(1/t),l.insertPoint2D($,-1,y))}}}return l}function Qie(t,e){return!(!gs(t.y,Ss)||!gs(e.y,Ss))||!(!gs(t.y,-Ss)||!gs(e.y,-Ss))}function Qst(t,e){return!(!gs(t.y,Ss)||gs(e.y,Ss))||!(!gs(t.y,-Ss)||gs(e.y,-Ss))}function ent(t,e){return!(!gs(e.y,Ss)||gs(t.y,Ss))||!(!gs(e.y,-Ss)||gs(t.y,-Ss))}class tnt{constructor(){this.m_sr=null,this.m_gcs=null,this.m_transform=null,this.m_progressTracker=null,this.m_a=0,this.m_eSquared=0,this.m_rpu=0,this.m_gcsTolerance=0,this.m_radTolerance=0,this.m_maxLength=0,this.m_maxDeviation=0,this.m_curveType=0}geodeticDensify(e){const i=e.createInstance(),s=e.querySegmentIterator(),n=[],r=[],o=new Qt,l=e.getDescription().getAttributeCount()>1;for(;s.nextPath();){const c=[0];for(;s.hasNextSegment();){const f=s.nextSegment(),y=f.getStartXY(),_=f.getEndXY();y.scale(this.m_rpu),_.scale(this.m_rpu);const x=new Y,S=new Y,P=y.compare(_)>0;rnt(P,y,_,x,S),n.length=0,r.length=0,this.m_maxLength>0?int(this.m_a,this.m_eSquared,this.m_curveType,x,S,this.m_maxLength,this.m_maxDeviation,this.m_radTolerance,null,null,l?r:null,n,c):snt(),P&&sse(null,null,l?r:null,n),n[0].setCoordsPoint2D(f.getStartXY()),n.at(-1).setCoordsPoint2D(f.getEndXY());const A=1/this.m_rpu;for(let k=1,$=n.length-1;k<$;k++)n[k].scale(A);if(l){const k=nse(P,f,o);tse(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),f,k,r,n,i)}else ese(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),n,i)}}return i}shapePreservingDensify(e){const i=e.createInstance(),s=e.querySegmentIterator(),n=[],r=[],o=new Qt,l=e.getDescription().getAttributeCount()>1;for(;s.nextPath();)for(;s.hasNextSegment();){const c=s.nextSegment(),f=c.getStartXY(),y=c.getEndXY(),_=f.compare(y)>0,x=nse(_,c,o);n.length=0,r.length=0,nnt(this.m_a,this.m_eSquared,this.m_rpu,x,this.m_sr,this.m_maxLength,this.m_maxDeviation,l?r:null,n),_&&sse(null,null,l?r:null,n),l?tse(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),c,x,r,n,i):ese(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),n,i)}return i}}function ese(t,e,i,s){t&&s.insertPath2D(-1,null,0,0,!0);const n=s.getPathCount()-1;s.insertPointsFromPoints(n,-1,i,0,i.length-1,!0),e&&s.insertPoint2D(n,-1,i.at(-1))}function tse(t,e,i,s,n,r,o){o.reserve(o.getPointCount()+r.length-1);const l=new Ht;if(i.queryStart(l),t?o.startPathPoint(l):o.lineToPoint(l),r.length>2){const c=s.calculateLength2D();for(let f=1;f<r.length-1;f++){const y=s.lengthToT(n[f]*c);s.queryCoord(y,l),l.setXY(r[f]),o.lineToPoint(l)}}e&&(i.queryEnd(l),o.lineToPoint(l))}function int(t,e,i,s,n,r,o,l,c,f,y,_,x){const S={stack:[],error:void 0,hasError:!1};try{const P=Wl(S,new qh,!1),A=Wl(S,new qh,!1),k=Wl(S,new qh,!1);Dg.geodeticDistance(t,e,s.x,s.y,n.x,n.y,k,P,A,i);const $=k.val,F=P.val,G=A.val;let V=F,B=G;V<0&&(V+=2*Math.PI),B<0&&(B+=2*Math.PI),c&&(c[0]=V),f&&(f[0]=B);let W=Number.NaN,J=Number.NaN;if(y!==null){const we=Ase.q90(t,e),Fe=Ase.q(t,e,s.y);W=(we-Fe)/$,J=(we+Fe)/$}const re=Qst(s,n),se=ent(s,n),oe=re||se,pe=ont(s,n,l),ue=Wl(S,new SKe(new qh,new qh),!1),ce=new Y,ne=new Y,de=new Y;x[0]=Dy(s.x,Number.NaN,x[0]);let Se=x[0];if($<=r)return _.push(s.clone()),x[0]=Dy(n.x,Number.NaN,x[0]),y!=null&&y.push(0),oe?(re&&rse(s,n,y,_),se&&ose(s,n,y,_)):pe?ase(s,n,F,W,J,y,_):o>0&&(ne.setCoords(s.x-Se,s.y),ce.setCoords(n.x-x[0],n.y),Se=ise()),_.push(n.clone()),$;const Pe=1+Math.ceil($/r),Re=$/(Pe-1),Oe=new Y;_.push(s.clone()),Oe.setCoordsPoint2D(s),ne.setCoords(s.x-x[0],s.y),y!==null&&y.push(0);for(let we=1;we<Pe;we++){let Fe;if(we<Pe-1){const it=we*Re;Dg.geodeticCoordinate(t,e,s.x,s.y,it,F,ue.at(0),ue.at(1),i),ce.setCoords(ue.at(0).val,ue.at(1).val),x[0]=Dy(ce.x,Oe.x,x[0]),de.setCoords(x[0]+ce.x,ce.y),Fe=we/(Pe-1)}else x[0]=Dy(n.x,Number.NaN,x[0]),ce.setCoords(n.x-x[0],n.y),de.setCoordsPoint2D(n),Fe=1;oe?(we===1&&re&&rse(s,de,y,_),we===Pe-1&&se&&ose(Oe,n,y,_)):pe?nye(Oe,de,l)&&(s.x<n.x?Oe.x>de.x&&(x[0]+=2*Math.PI,de.setCoords(x[0]+ce.x,ce.y)):Oe.x<de.x&&(x[0]-=2*Math.PI,de.setCoords(x[0]+ce.x,ce.y)),ase(Oe,de,F,W,J,y,_)):o>0&&ise(),_.push(de.clone()),y!=null&&y.push(Fe),Oe.setCoordsPoint2D(de),ne.setCoordsPoint2D(ce),Se=x[0]}return $}catch(P){S.error=P,S.hasError=!0}finally{om(S)}}function snt(t,e,i,s,n,r,o,l,c,f){K(0)}function ise(t,e,i,s,n,r,o,l,c,f,y,_,x,S,P){return K(0),0}function NN(t,e,i,s){const n=fl(t,e,i),r=fl(t,e,s);return ii.distance(n,r)}function nnt(t,e,i,s,n,r,o,l,c){const f=s.isCurve(),y=Get(t,e)*Math.PI*179/180;let _=r;r>0&&!(r>y)||(_=y),_=cie(t,e,_);let x=o;!f||x>0||(x=.001);const S=x>0;let P=Number.NaN;S&&(P=cie(t,e,x));const A=n.getPECoordSys(),k=n.getCoordinateSystemType()===1,$=n.getTolerance(0),F=s.getStartXY(),G=s.getEndXY(),V=new Y,B=new Y;if(k)V.setCoordsPoint2D(F),V.scale(i),B.setCoordsPoint2D(G),B.scale(i);else{const de=[F.x,F.y,G.x,G.y];Za.projToGeog(A,2,de),V.setCoords(de[0],de[1]),V.scale(i),B.setCoords(de[2],de[3]),B.scale(i)}let W=0,J=0;const re=[],se=[],oe=[];re.push(G.clone()),se.push(B.clone()),oe.push(1),c.push(F.clone()),l!==null&&l.push(J);const pe=n.isPannable(),ue=F.clone(),ce=[.5,.33333333333333337,.6666666666666666,.16666666666666669,.8333333333333333];let ne=5;for(f||(S?(ce[0]=.5,ce[1]=.25,ce[2]=.75,ne=3):ne=1);se.length>0;){const de=re.at(-1).clone();B.assign(se.at(-1));const Se=oe.at(-1);let Pe=!1,Re=Number.NaN;const Oe=NN(t,e,V,B);let we=_>=Oe&&Math.abs(V.y-B.y)<.9*Math.PI;k&&we&&(we=Math.abs(V.x-B.x)<.9*Math.PI);const Fe=new Y,it=new Y;let vt=!1;if(f||S||!we||we&&(vt=!0),s.calculateSubLength(J,Se)<=$&&(vt=!0),!vt)for(let ot=0;ot<ne;ot++){const ct=ji(J,Se,ce[ot]),Ct=new Y;s.queryCoord2D(ct,Ct);const qt=new Y;if(k)qt.setCoords(Ct.x*i,Ct.y*i);else{const Lt=[Ct.x,Ct.y];Za.projToGeog(A,1,Lt),qt.setCoords(Lt[0]*i,Lt[1]*i)}if(ot===0&&(Re=ct,Fe.setCoordsPoint2D(Ct),it.setCoordsPoint2D(qt),!we)){Pe=!0;break}if(k&&Math.abs(V.x-qt.x)>=Math.PI){Pe=!0;break}if(_<NN(t,e,V,qt)){Pe=!0;break}if(S){const Lt=Ret(t,e,V,B,ce[ot]),Dt=Lt.clone();if(k?(Dt.x/=i,Dt.y/=i):(Dt.x/=i,Dt.y/=i,sye(n.getGCSToSRTransform(),[Dt],1,[Dt],null)),Dt.isNAN()){const Yi=fl(t,e,qt),cs=fl(t,e,V),fn=fl(t,e,B),{first:Us,second:hr}=uie(t,e,Yi,cs,fn,2);if(hr>P){Pe=!0;break}}else{if(pe){const Us=n.getPannableExtent().width(),hr=ji(s.getStartX(),s.getEndX(),.5);for(;Dt.x<hr-.5*Us;)Dt.x+=Us;for(;Dt.x>=hr+.5*Us;)Dt.x-=Us}const Yi=s.getClosestCoordinateOnInterval(Dt,new Ze(J,Se),-1),cs=s.getCoord2D(Yi);if(!k){const Us=[cs.x,cs.y];Za.projToGeog(A,1,Us),cs.x=Us[0],cs.y=Us[1]}cs.x*=i,cs.y*=i;let fn=NN(t,e,cs,Lt);if(fn>P){if(fn<4*P){const Us=fl(t,e,cs),hr=fl(t,e,V),oo=fl(t,e,B),{first:ss,second:ye}=uie(t,e,Us,hr,oo,2);fn=ye}if(fn>P){Pe=!0;break}}}}}Pe?(re.push(Fe.clone()),se.push(it.clone()),oe.push(Re)):(re.pop(),se.pop(),oe.pop(),c.push(de.clone()),W+=Oe,l!==null&&l.push(W),ue.setCoordsPoint2D(de),V.setCoordsPoint2D(B),J=Se)}if(l!==null){const de=1/W;for(let Se=0;Se<l.length;Se++)l[Se]*=de}}function sse(t,e,i,s){s.reverse(),i!==null&&i.reverse()}function rnt(t,e,i,s,n){t?(s.setCoordsPoint2D(i),n.setCoordsPoint2D(e)):(s.setCoordsPoint2D(e),n.setCoordsPoint2D(i))}function nse(t,e,i){return t?(i.create(e.getGeometryType()),e.copyTo(i.get()),i.get().reverse(),i.get()):e}function Dy(t,e,i){if(Number.isNaN(e)){for(;i-t>Math.PI;)i-=2*Math.PI;for(;t-i>Math.PI;)i+=2*Math.PI;return i}return i+t-e>Math.PI?i-=2*Math.PI:e-(i+t)>Math.PI&&(i+=2*Math.PI),i}function rse(t,e,i,s){if(t.y>0){const n=new Y;n.setCoords(e.x,Ss),gs(t.x,n.x)||gs(e.y,n.y)||(s.push(n),i!==null&&i.push(0))}else{const n=new Y;n.setCoords(e.x,-Ss),gs(t.x,n.x)||gs(e.y,n.y)||(s.push(n),i!==null&&i.push(0))}}function ose(t,e,i,s){if(e.y>0){const n=new Y;n.setCoords(t.x,Ss),gs(e.x,n.x)||gs(t.y,n.y)||(s.push(n),i!==null&&i.push(1))}else{const n=new Y;n.setCoords(t.x,-Ss),gs(e.x,n.x)||gs(t.y,n.y)||(s.push(n),i!==null&&i.push(1))}}function ase(t,e,i,s,n,r,o){if(_ot(i)){if(Ss-t.y>0){const l=new Y;l.setCoords(t.x,Ss),o.push(l),r!==null&&r.push(s)}if(Ss-e.y>0){const l=new Y;l.setCoords(e.x,Ss),o.push(l),r!==null&&r.push(s)}}else{if(Ss+t.y>0){const l=new Y;l.setCoords(t.x,-Ss),o.push(l),r!==null&&r.push(n)}if(Ss+e.y>0){const l=new Y;l.setCoords(e.x,-Ss),o.push(l),r!==null&&r.push(n)}}}function ont(t,e,i){return!(!nye(t,e,i)||gs(t.y,Ss)||gs(t.y,-Ss)||gs(e.y,Ss)||gs(e.y,-Ss))}function nye(t,e,i){return Math.abs(Math.abs(t.x-e.x)-Math.PI)<=i}function ant(t){if(t.x<-Math.PI)for(;t.x<-Math.PI;)t.x+=2*Math.PI;else if(t.x>Math.PI)for(;t.x>Math.PI;)t.x-=2*Math.PI}function lnt(t,e,i,s,n){const r=new xe;i.queryEnvelope(r);const o=bl(null,i,!0).total();if(e.xmin-r.xmin<=o&&r.xmax-e.xmax<=o)return i;const l=e.width();let c=0;for(;e.xmin+c*l<r.xmin;)c++;for(;e.xmin+c*l>r.xmin;)c--;const f=c*l,y=new _i;y.setShiftCoords(-f,0);const _=i;_.applyTransformation(y);const x=new xe;_.queryEnvelope(x);let S=null;if(x.xmax>e.xmax){let P=0;const A=new xe;A.setCoords({env2D:e}),A.ymin-=1,A.ymax+=1;let k=_;for(;A.xmin<x.xmax;){x.xmax>A.xmax&&(k=cye(k,t,2,!0,A.xmax));const $=vs(k,A,Kn(null,mj(k,A),!0).total(),Number.NaN,n);S===null?S=$===k?$.clone():$:(y.setShiftCoords(-P*l,0),$.applyTransformation(y),S.add($,!1)),P++,A.xmin=A.xmax,A.xmax=e.xmax+P*l}}else S=_;return S}class unt{constructor(e,i){this.m_basisX=new ii,this.m_basisY=new ii,this.m_normal=new ii,K(e.getCoordinateSystemType()===1),this.m_gcs=e;const s=c5();e.querySpheroidData(s),this.m_a=s.majorSemiAxis,this.m_e2=s.e2,this.m_rpu=e.getUnit().getUnitToBaseFactor(),this.m_curvCenterRad=i.mul(this.m_rpu);const n=this.m_curvCenterRad.x,r=this.m_curvCenterRad.y,o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),f=Math.sin(r);this.m_cartCenter3D=Oet(this.m_a,this.m_e2,o,l,c,f),this.m_normal.setCoordsPoint3D(this.m_cartCenter3D),this.m_d=this.m_cartCenter3D.length(),this.m_normal.divThis(this.m_d),ii.selectRightHandedBasisFromNormal(this.m_normal,this.m_basisX,this.m_basisY),this.m_northPolePcs=this.projectPoint(Y.construct(0,.5*Math.PI/this.m_rpu)),this.m_southPolePcs=this.projectPoint(Y.construct(0,.5*-Math.PI/this.m_rpu))}project(e){const i=e.getGeometryType();if(el(i)){F2(e);const s=e;return this.projectMultiVertex(s)}Je("Gnomonic.project")}unproject(e,i,s){const n=e.getGeometryType();if(el(n)){F2(e);let r=e;const o=[];if(n===me.enumPolygon){const l=r.getPathCount();for(let c=0;c<l;c++){const f=r.calculateRingArea2D(c);o.push(f)}}return this.unprojectMultiVertex(i,r),bi(n)?(vnt(this.m_gcs,0,r),cnt(o,this.m_gcs,0,r,s)):r=W2(r,this.m_gcs,0,!0,0,s),r}Je("Gnomonic.unproject")}projectPoint(e){const i=e.mul(this.m_rpu),s=fl(this.m_a,this.m_e2,i),n=this.m_normal.dotProduct(s);if(n<=0)return Y.construct(Number.NaN,Number.NaN);const r=this.m_d/n,o=s.mul(r).sub(this.m_cartCenter3D),l=new Y;return l.x=this.m_basisX.dotProduct(o),l.y=this.m_basisY.dotProduct(o),l}unprojectPoint(e){const i=this.m_cartCenter3D.add(this.m_basisX.mul(e.x).add(this.m_basisY.mul(e.y)));return YE(this.m_a,this.m_e2,i).divide(this.m_rpu)}projectMultiVertex(e){const i=e.getImpl();let s=!0;const n=new Y,r=new Y;for(let o=0,l=i.getPointCount();o<l;o++)i.queryXY(o,n),n.y*this.m_rpu>.5*Math.PI?r.assign(this.m_northPolePcs):n.y*this.m_rpu<.5*-Math.PI?r.assign(this.m_southPolePcs):r.assign(this.projectPoint(n)),i.setXY(o,r),r.isNAN()&&(s=!1);return i.notifyModifiedFlags(2001),s}unprojectMultiVertex(e,i){const s=i.getImpl(),n=e*e,r=!this.m_northPolePcs.isNAN(),o=!this.m_southPolePcs.isNAN();for(let l=0,c=s.getPointCount();l<c;l++){const f=s.getXY(l);let y=new Y;r&&Y.sqrDistance(f,this.m_northPolePcs)<=n?(y.setCoords(this.m_curvCenterRad.x,.5*Math.PI),y.scale(1/this.m_rpu)):o&&Y.sqrDistance(f,this.m_southPolePcs)<=n?(y.setCoords(this.m_curvCenterRad.x,.5*-Math.PI),y.scale(1/this.m_rpu)):y=this.unprojectPoint(f),s.setXY(l,y)}s.notifyModifiedFlags(2001)}}function cnt(t,e,i,s,n){const r=s.getGeometryType(),o=e.getPannableExtent();let l=s,c=!1,f=!1;if(r===me.enumPolygon){const y=new xe,_=Y.construct(i,0);y.setCoords({env2D:o}),y.centerAt(_),c=hnt(t,e,y,l,n);const x=ynt(e,y,l,n);x!==l&&(f=!0),l=x}else l=new a2().foldInto360RangeGeodetic(l,e,2);r===me.enumPolygon&&(c||f)&&(l=new Tu().execute(l,e,!1,n)),l!==s&&(s.setEmpty(),s.add(l,!1))}function hnt(t,e,i,s,n){const r=dnt(i,s),o=fnt(t,e,i,s,n);return r||o}function dnt(t,e){const i=new xe;e.queryEnvelope(i);const s=gs(t.ymax,i.ymax),n=gs(t.ymin,i.ymin),r=s||n;return!!r&&(pnt(t,e),r)}function fnt(t,e,i,s,n){const r=[],o=[],l=.5*i.width();for(let _=0;_<s.getPathCount();_++){const x=s.getXY(s.getPathStart(_)),S=s.getXY(s.getPathEnd(_)-1),P=t[_]<0;if(Math.abs(x.x-S.x)>l){const A=mnt(P,e,i,_,s,n);r.push(A),o.push(_)}else if(!P&&s.calculateRingArea2D(_)<0){const A=gnt(e,i,_,s,n);r.push(A),o.push(_)}}if(r.length===0)return!1;const c=new Wt({vd:s.getDescription()});let f=0,y=o[f];for(let _=0;_<s.getPathCount();_++)_===y?(c.add(r[f],!1),f++,f<o.length&&(y=o[f])):c.addPath(s,_,!0);return s.setEmpty(),s.add(c,!1),!0}function pnt(t,e){const i=new Wt,s=new xe;for(let n=0;n<e.getPathCount();n++){e.queryPathEnvelope(n,s);let r=gs(t.ymax,s.ymax),o=gs(t.ymin,s.ymin);if(!(r||o)){i.addPath(e,n,!0);continue}i.insertPath2D(-1,null,0,0,!0);const l=e.getPathStart(n),c=e.getPathEnd(n),f=c-l;let y=-1;for(y=l;y<c;y++){const P=e.getXY(y);if(r=gs(t.ymax,P.y),o=gs(t.ymin,P.y),!r&&!o)break}let _=y,x=!1,S=Number.NaN;do{const P=e.getXY(_);r=gs(t.ymax,P.y),o=gs(t.ymin,P.y);const A=l+(_+1-l)%f;if(r||o){let k=Y.construct(S,P.y);i.insertPoint2D(n,-1,k);const $=e.getXY(A),F=gs(t.ymax,$.y),G=gs(t.ymin,$.y);F||G||(k=Y.construct($.x,P.y),x?i.setXY(i.getPointCount()-1,k):i.insertPoint2D(n,-1,k)),x=!0}else i.insertPoint2D(n,-1,P),S=P.x,x=!1;_=A}while(_!==y)}e.setEmpty(),e.add(i,!1)}function mnt(t,e,i,s,n,r){const o=new Wt,l=new Wt,c=new _i,f=n.getXY(n.getPathStart(s)),y=n.getXY(n.getPathEnd(s)-1),_=i.width(),x=.5*_,S=new xe;n.queryEnvelope(S);const P=Math.ceil(S.width()/_)+1;let A,k;f.x>y.x?(A=-_,k=t?i.ymin:i.ymax):(A=_,k=t?i.ymax:i.ymin),c.setShiftCoords(A,0),o.addPath(n,s,!0),l.add(o,!1);const $=new Ht;for(let ce=0;ce<P;ce++)l.applyTransformation(c),l.getPointByVal(0,$),o.lineToPoint($),o.addSegmentsFromPath(l,0,0,l.getSegmentCount()-1,!1);const F=o.getXY(0),G=o.getXY(o.getPointCount()-1);F.y=k,G.y=k,o.lineTo(G);const V=new Y;for(V.setCoordsPoint2D(G),V.x-=.5*A;Math.abs(V.x-F.x)>x;)o.lineTo(V),V.x-=.5*A;o.lineTo(F);const B=i.getCenter().x,W=new xe;o.queryEnvelope(W);let J=0;const re=W.getCenter().x;re-B>x?J=-Math.ceil((re-B-x)/_):B-re>x&&(J=Math.ceil((B-re-x)/_)),J!==0&&(c.setShiftCoords(J*_,0),o.applyTransformation(c));const se=new Bs,oe=se.addGeometry(o);WE(se,oe,e,0,2,!0,i.xmin),WE(se,oe,e,0,2,!0,i.xmax);const pe=se.getGeometry(oe),ue=mj(pe,i);return ue.inflateCoords(0,1),vs(pe,i,Kn(null,ue,!0).total(),Number.NaN,r)}function gnt(t,e,i,s,n){const r=e.width(),o=.5*r,l=e.getCenter().x,c=new xe;s.queryPathEnvelope(i,c);let f,y=0,_=c.getCenter().x;if(_-l>o?y=-Math.ceil((_-l-o)/r):l-_>o&&(y=Math.ceil((l-_-o)/r)),y!==0){const A=new _i;A.setShiftCoords(y*r,0),s.getImpl().applyTransformationToPath(A,i),s.queryPathEnvelope(i,c),_=c.getCenter().x}const x=new xe;e.containsExclusiveEnvelope(c)?(f=!1,x.setCoords({env2D:e})):(f=!0,x.setCoords({env2D:e}),x.xmin-=r,x.xmax+=r);let S=s.createInstance();S.addPathPoint2D(null,0,!0);const P=new Y;if(P.setCoords(x.xmin,x.ymin),S.insertPoint2D(0,-1,P),P.setCoords(x.xmin,x.ymax),S.insertPoint2D(0,-1,P),P.setCoords(.5*(x.xmin+x.xmax),x.ymax),S.insertPoint2D(0,-1,P),P.setCoords(x.xmax,x.ymax),S.insertPoint2D(0,-1,P),P.setCoords(x.xmax,x.ymin),S.insertPoint2D(0,-1,P),P.setCoords(.5*(x.xmin+x.xmax),x.ymin),S.insertPoint2D(0,-1,P),f){S.addPath(s,i,!0);const A=new _i;_<l?A.setShiftCoords(r,0):A.setShiftCoords(-r,0),s.getImpl().applyTransformationToPath(A,i),S.addPath(s,i,!0);const k=new Bs,$=k.addGeometry(S);WE(k,$,t,0,2,!0,e.xmin),WE(k,$,t,0,2,!0,e.xmax),S=k.getGeometry($);const F=mj(S,e);F.inflateCoords(0,1),S=vs(S,e,Kn(null,F,!0).total(),Number.NaN,n)}else S.addPath(s,i,!0);return S}function ynt(t,e,i,s){const n=new xe;i.queryEnvelope(n);const r=bl(null,i,!0).total();if(e.xmin-n.xmin<=r&&n.xmax-e.xmax<=r)return i;const o=i.createInstance();let l=i.createInstance();const c=new xe,f=i.getPathCount();for(let y=0;y<f;y++)i.queryPathEnvelope(y,c),e.xmin-c.xmin<=r&&c.xmax-e.xmax<=r?o.addPath(i,y,!0):(l.setEmpty(),l.addPath(i,y,!0),l=lnt(t,e,l,!0,s),o.add(l,!0));return o}function vnt(t,e,i){const s=t.getPannableExtent(),n=Y.construct(e,0);s.centerAt(n);const r=s.width(),o=.5*r,l=new Y;l.setNAN();let c=Number.NaN;for(let f=0;f<i.getPathCount();f++)for(let y=i.getPathStart(f);y<i.getPathEnd(f);y++){const _=i.getXY(y),x=gs(_.y,s.ymax)||gs(s.ymin,_.y);y===i.getPathStart(f)?(l.setNAN(),c=0):l.isNAN()||x||(c=_nt(_.x,l.x,o,r,c)),_.x+=c,i.setXY(y,_),x||l.setCoordsPoint2D(_)}i.getImpl().notifyModifiedFlags(2001)}function _nt(t,e,i,s,n){return n+t-e>i?n-=s:e-(n+t)>i&&(n+=s),n}function lse(t,e,i,s,n,r){const o=e.getAttributeStreamRef(0),l=e.getPointCount();let c=!1;const f=new Y;for(let V=0;V<l;++V){if(o.queryPoint2D(2*V,f),1&r&&f.y>=i){c=!0;break}if(2&r&&f.y<=-i){c=!0;break}}if(!c)return!1;let y=!1;t&&(y=e.getImpl().isClosedPathInXYPlane(0));const _=new Bs,x=_.addGeometry(e),S=_.getFirstPath(x);let P=-1,A=!0;const k=new Y,$=new Ht;let F=ae;const G=rye*n/360;for(let V=_.getFirstVertex(S);V!==ae;V=_.getNextVertex(V)){_.queryXY(V,f);let B=1&r&&f.y>=i?1:0;if(B|=2&r&&f.y<=-i?2:0,P>0&&P!==B){if(k.x!==f.x){const W=_.getPrevVertex(V);_.queryPoint(W,$);const J=_.insertVertex(S,V,$);k.x=f.x,_.setXY(J,k)}if(y){let W=F!==ae?_.getNextVertex(F):_.getFirstVertex(S);const J=_.getPrevVertex(V);for(;W!==J;)W=_.removeVertex(W,!1);if(F!==ae){const re=_.getXY(F),se=_.getXY(J);if(Math.abs(re.x-se.x)>G){_.queryPoint(F,$);const oe=_.insertVertex(S,J,$);re.x=ji(re.x,se.x,.5),_.setXY(oe,re)}}}F=ae}if(B&&(f.y=Jp(s,f.y),_.setXY(V,f),!A&&P!==B))if(f.x!==k.x){_.queryPoint(V,$);const W=_.insertVertex(S,V,$);_.setXYCoords(W,k.x,f.y),F=W}else F=V;P=B,k.assign(f),A=!1}if(y){if(F!==ae){let re=_.getNextVertex(F);for(;re!==ae;)re=_.removeVertex(re,!1)}const V=_.getFirstVertex(S);let B=_.getLastVertex(S);const W=_.getXY(V),J=_.getXY(B);if(!W.equals(J)&&(_.queryPoint(V,$),B=_.insertVertex(S,ae,$),Math.abs(W.x-J.x)>G)){const re=_.insertVertex(S,B,$);W.x=ji(W.x,J.x,.5),_.setXY(re,W)}}return e.assignCopy(_.getGeometry(x)),!0}function bnt(t,e){let i=new Wt({vd:t});i.addEnvelope(e,!1);const s=e.width()/180;return i=new V0().execute(i,s,0,0,null),i}function xnt(t,e){const i=t.getPannableExtent();return Number.isNaN(e)||i.centerAtCoords(e,0),i}function wnt(t,e,i){const s=c5();e.querySpheroidData(s);const n=e.getGCS()!==e?e.getSRToGCSTransform():null,r=Ge(Y,100),o=new ii(0,0,0),l=t.getPointCount(),c=e.getGCS().getUnit().getUnitToBaseFactor();for(let x=0,S=l;x<S;){const P=Math.min(100,S-x);t.queryCoordinates(r,P,x,x+P),n&&new a2().transform(n,r,P,r,!1);for(let A=0;A<P;A++){if(r[A].isNAN())continue;r[A].scale(c);const k=fl(s.majorSemiAxis,s.e2,r[A]);o.addThis(k)}x+=P}const f=YE(s.majorSemiAxis,s.e2,o);f.scale(1/c);const y=t;if(!new unt(e.getGCS(),f).project(y))return 0;i.length=t.getPathCount();const _=y.calculateArea2D()<0;for(let x=0,S=t.getPathCount();x<S;x++){const P=y.calculateRingArea2D(x),A=_?P<0:P>0;i[x]=A}return _?-1:1}function Snt(t,e,i,s,n){if(!e.isPannable()||t.isEmpty())return t;const r=t.getGeometryType();r===me.enumGeometryCollection&&K(0);const o=e.getPannableExtent();Number.isNaN(i)&&(i=o.getCenterX());const l=o.width(),c=.5*l,f=n>0,y=t.queryInterval(0,0);if(!f&&y.width()<c||!el(t.getGeometryType())){const _=y.getCenter();if(Math.abs(_-i)<=c)return t;{const x=new _i,S=fv((i-_)/l)*l;x.setShiftCoords(S,0);const P=t.clone();return P.applyTransformation(x),P}}if(r===me.enumPolygon){let _=new vi({vd:t.getDescription()});_.addAndExplicitlyOpenAllPaths(t,!1),f&&(_=Jie(_,e,2,n,Number.NaN,null,!0));const x=[];if(!s){{let S=t;f&&(S=new Wt,S.add(_,!1));const P=wnt(t,e,x);if(P)P<0&&_.reverseAllPaths();else{const A=S.getPathCount();for(let k=0;k<A;k++)x.push(S.calculateRingArea2D(k)>0)}}s=x}return new H6(null,s,_,null,e,i,3,0,null).geoNormalizePolygonGeometry(!0)}if(r===me.enumPolyline){let _=new vi({vd:t.getDescription()});return _.addAndExplicitlyOpenAllPaths(t,!1),f&&(_=Jie(_,e,2,n,Number.NaN,null,!0)),new H6(null,null,_,null,e,i,3,0,null).geoNormalizePolylineGeometry(!0)}if(r===me.enumMultiPoint){const _=t,x=_.getAttributeStreamRef(0);let S,P=null,A=i,k=0;const $=.1*l;for(let F=0,G=_.getPointCount();F<G;F++){const V=x.read(2*F);let B=V-A;if(Math.abs(B)>c&&(B=fv(B/l)*l,k-=B,Math.abs(k)<$&&(k=0)),k!==0){P||(S=t.clone(),P=S.getAttributeStreamRef(0));const W=V+k;P.write(2*F,W)}A=V}return P?(S.notifyModified(),S):t}bt("")}const rye=210;class H6{constructor(e,i,s,n,r,o,l,c,f){this.m_bAdjustedAtPoles=0,this.m_inputPoly=s,this.m_progressTracker=f,this.m_originalGeometry=e,this.m_originalSR=n,this.m_polygonRingFlags=i,this.m_pannableSR=r,this.m_poleSnappingTolerance=c,this.m_poleFlags=l,this.m_bAdjustedAtPoles=0,this.m_pannableExtent=xnt(this.m_pannableSR,o),this.m_centralLongitude=Number.isNaN(o)?this.m_pannableExtent.getCenterX():o,this.m_width360=this.m_pannableExtent.width(),this.m_degree=this.m_width360/360,this.m_GCSLargeDelta=rye*this.m_degree,K(this.m_originalGeometry===null&&this.m_originalSR===null||this.m_originalGeometry!==null&&this.m_originalSR!==null)}geonormalizeRing(e,i,s,n,r,o,l){let c=s;const f=new vi({vd:this.m_inputPoly.getDescription()});f.addPath(this.m_inputPoly,e,!0),this.m_poleFlags!==0&&(this.m_bAdjustedAtPoles|=lse(!0,f,this.m_pannableExtent.ymax-this.m_poleSnappingTolerance,this.m_pannableExtent.ymax,this.m_pannableExtent.width(),this.m_poleFlags)?1:0,this.m_bAdjustedAtPoles&&(c=!1));let y=-1;c&&(y=this.m_originalGeometry.getPathStart(e));const _=f.getAttributeStreamRef(0),x=f.getPointCount();let S=0,P=_.read(0),A=0;const k=3*this.m_pannableSR.getTolerance(0);let $=!1;const F=new Y,G=new Y;let V=!1;const B=f.hasNonLinearSegments(),W=new Y;for(let se=1;se<x;++se){_.queryPoint2D(2*se,W);const oe=W.x;let pe=oe+S;const ue=pe-P;if(W.x=pe,Math.abs(ue)>this.m_GCSLargeDelta){if(c){const ce=y+se-1,ne=y+(se+1<x?se:0),de=o.read(2*ce),Se=(o.read(2*ne)-de)*n;Math.abs(ue-Se)>1*this.m_degree&&(c=!1)}c||(S-=Jp(this.m_width360,pe-P),pe=oe+S,++A,V=S!==0,W.x=pe)}else $||rJe(F,G,W,k)&&($=!0);V&&(B&&bt("error in geonormalize_ring_ for curves"),_.write(2*se,pe)),P=pe,F.setCoordsPoint2D(G),G.setCoordsPoint2D(W)}A&&f.notifyModified();const J=f.getXY(0),re=f.getXY(x-1);if(Y.distance(J,re)<k){const se=this.finalizeGeoNormalizeClosedRing(f,$,r);l.add(se,!1)}else{i<0&&(this.m_originalGeometry!==null?(K(this.m_originalGeometry!==null),i=this.m_originalGeometry.calculateRingArea2D(e)>0?1:0):i=1);const se=this.finalizeGeoNormalizeOpenedRing(i>0,f);l.add(se,!1)}}geoNormalizePolygonGeometry(e){K(this.m_originalSR&&this.m_originalGeometry||!this.m_originalGeometry&&!this.m_originalSR),K(this.m_pannableSR.isPannable());let i=null,s=Number.NaN;const n=!!this.m_originalSR&&this.m_originalSR.isPannable();n&&(i=this.m_originalGeometry.getAttributeStreamRef(0),s=this.m_width360/this.m_originalSR.getPannableExtent().width()),this.m_bAdjustedAtPoles=0;const r=new Wt({vd:this.m_inputPoly.getDescription()});for(let P=0,A=this.m_inputPoly.getPathCount();P<A;++P){const k=this.m_polygonRingFlags?this.m_polygonRingFlags[P]?1:0:-1;this.geonormalizeRing(P,k,n,s,e,i,r)}const o=this.m_pannableSR.getTolerance(0),l=this.m_pannableExtent.width()/180;W6(r,this.m_pannableExtent,.1*o,!1);const c=xe.constructEmpty();if(c.setCoords({env2D:this.m_pannableExtent}),e){let P=!0;for(let A=0;A<2;A++){P=!0;const k=xe.constructEmpty();for(let $=0,F=r.getPathCount();$<F;$++)if(r.queryPathEnvelope($,k),!(c.xmin<=k.xmin&&c.xmax>=k.xmax||k.xmin>=c.xmax||k.xmax<=c.xmin)){P=!1;break}if(P)break;c.move(.5*this.m_width360,0)}P||c.setCoords({env2D:this.m_pannableExtent})}let f=vs(r,c,o,l,this.m_progressTracker),y=r!==f;const _=this.m_originalGeometry?this.m_originalGeometry.calculateArea2D():1,x=f.calculateArea2D();let S=0;if(x>0&&_<0)S=1;else if(x<=0&&_>0)if(x===0){if(this.m_originalSR){let P=Number.NaN;this.m_originalSR.getCoordinateSystemType()===2?P=this.m_originalSR.getPCSHorizon().calculateArea2D():this.m_originalSR.getCoordinateSystemType()===1&&(P=this.m_originalSR.getPannableExtent().getArea()),_>.99*P&&(S=-1)}}else S=-1;if(S!==0){const P=bnt(f.getDescription(),c);P.add(f,!1),y=!0,f=P}return y&&(f=new Tu().execute(f,this.m_pannableSR,!1,this.m_progressTracker)),f}geoNormalizePolylineGeometry(e){K(this.m_pannableSR.isPannable());let i=null;const s=this.m_originalSR&&this.m_originalSR.isPannable();let n=1;s&&(K(this.m_originalGeometry),n=this.m_width360/this.m_originalSR.getPannableExtent().width(),i=this.m_originalGeometry.getAttributeStreamRef(0));const r=this.m_pannableExtent.width(),o=r*en()*4;let l=e,c=Number.NaN;const f=Ze.constructEmpty();this.m_bAdjustedAtPoles=0;let y=new vi({vd:this.m_inputPoly.getDescription()});for(let S=0,P=this.m_inputPoly.getPathCount();S<P;++S){let A=s;const k=new vi({vd:this.m_inputPoly.getDescription()});k.addPath(this.m_inputPoly,S,!0);const $=this.m_inputPoly.isClosedPath(S);this.m_poleFlags!==0&&(this.m_bAdjustedAtPoles|=lse($,k,this.m_pannableExtent.ymax-this.m_poleSnappingTolerance,this.m_pannableExtent.ymax,r,this.m_poleFlags)?1:0,this.m_bAdjustedAtPoles&&(A=!1));let F=-1;const G=k.getPointCount();let V=!1;A&&(F=this.m_originalGeometry.getPathStart(S),V=this.m_originalGeometry.isClosedPath(S));const B=k.getAttributeStreamRef(0);let W=0,J=B.read(0),re=0;const se=new Y,oe=new Y;let pe=!1;const ue=k.hasNonLinearSegments(),ce=new Y;for(let ne=1;ne<G;++ne){B.queryPoint2D(2*ne,ce);const de=ce.x;let Se=de+W;const Pe=Se-J;if(ce.x=Se,Math.abs(Pe)>this.m_GCSLargeDelta){if(A){const Re=F+ne-1;let Oe=F;(!V||ne+1<G)&&(Oe+=ne);const we=i.read(2*Re),Fe=(i.read(2*Oe)-we)*n;Math.abs(Pe-Fe)>1*this.m_degree&&(A=!1)}A||(W-=Jp(this.m_width360,Se-J),Se=de+W,++re,pe=W!==0,ce.x=Se)}pe&&(ue&&bt("error in geonormalize_ring_ for curves"),B.write(2*ne,Se)),J=Se,se.setCoordsPoint2D(oe),oe.setCoordsPoint2D(ce)}if(re&&k.notifyModified(),l){let ne=!1;if(!k.isEmpty()){const de=xe.constructEmpty();if(k.queryEnvelope(de),de.width()>=r||de.ymin<=this.m_pannableExtent.ymin||de.ymax>=this.m_pannableExtent.ymax)ne=!0;else{if(Number.isNaN(c)){const Pe=this.m_centralLongitude-.5*r;c=de.xmin,c+=Math.round((Pe-de.xmin)/r)*r,c>Pe&&(c-=r),K(c<=Pe),c<Pe&&(c+=r),K(c>=Pe)}let Se=Math.round((c-de.xmin)/r)*r;if(de.xmin+Se>c+o&&(Se-=r),de.xmin+Se<c-o&&(Se+=r),f.mergeCoordinate(de.xmin+Se),f.mergeCoordinate(de.xmax+Se),ne=f.width()>=r,!ne){const Pe=new _i;Pe.setShiftCoords(Se,0),k.applyTransformation(Pe)}}}y.add(k,!1),ne&&(y=(()=>{const de=new vi({vd:y.getDescription()});for(let Se=0,Pe=y.getPathCount();Se<Pe;++Se){const Re=new vi({vd:y.getDescription()});Re.addPath(y,Se,!0);const Oe=W2(Re,this.m_pannableSR,this.m_centralLongitude,!0,0,this.m_progressTracker);de.add(Oe,!1)}return de})(),l=!1)}else{const ne=W2(k,this.m_pannableSR,this.m_centralLongitude,!0,0,this.m_progressTracker);y.add(ne,!1)}}if(l)return y;const _=this.m_pannableSR.getTolerance(0),x=this.m_pannableExtent.width()/180;return W6(y,this.m_pannableExtent,.1*_,!1),vs(y,this.m_pannableExtent,_,x,this.m_progressTracker)}finalizeGeoNormalizeOpenedRing(e,i){const s=i.getPointCount(),n=i.getXY(0),r=i.getXY(s-1);{const se=Math.abs(r.x-n.x),oe=Math.round(se/this.m_width360)*this.m_width360;K(Math.abs(se-oe)<this.m_pannableSR.getTolerance(0))}const o=xn(r.x-n.x),l=xe.constructEmpty();i.queryLooseEnvelope(l);const c=this.m_pannableExtent.getCenterX();let f=0,y=c-this.m_width360,_=c+this.m_width360;if(o>=0){let se=Math.ceil((y-l.xmin)/this.m_width360);for(se*=this.m_width360;y>l.xmin+se;)se+=this.m_width360;for(;y<l.xmax+se;)se-=this.m_width360;for(f=se,l.width()>720&&(_=y+360*Math.ceil(l.width()/360));_<l.xmax;)_+=this.m_width360}else{let se=Math.ceil((_-l.xmax)/this.m_width360);for(se*=this.m_width360;_<l.xmax+se;)se-=this.m_width360;for(;_>l.xmin+se;)se+=this.m_width360;for(f=se,l.width()>720&&(y=_-360*Math.ceil(l.width()/360));y>l.xmin;)y-=this.m_width360}const x=Math.round(Math.abs(r.x-n.x)/this.m_width360)*this.m_width360,S=o*x,P=l.clone();P.move(f,0);const A=new Y(0,0),k=new _i;k.setShiftCoords(f,0),i.applyTransformation(k);const $=new vi({vd:i.getDescription()});$.add(i,!1),A.assign(i.getXY(s-1));let F=0,G=$.getXY(0).x;for(;o>0?P.xmax<_:P.xmin>y;)P.move(S,0),k.xd=S,i.applyTransformation(k),G+=S,this.m_pannableExtent.xmin<=G&&this.m_pannableExtent.xmax>=G&&(F=$.getPointCount()-1),i.setXY(0,A),A.assign(i.getXY(s-1)),$.addSegmentsFromPath(i,0,0,s-1,!1);const V=new Wt({vd:$.getDescription()});V.add($,!1);const B=$.getXY(0),W=$.getXY($.getPointCount()-1),J=o<0?e:!e,re=V.getPointCount()-1;if(J){const se=new Y(W.x,this.m_pannableExtent.ymax);V.lineTo(se);const oe=new Y(this.m_pannableExtent.getCenterX(),this.m_pannableExtent.ymax);V.lineTo(oe);const pe=new Y(B.x,this.m_pannableExtent.ymax);V.lineTo(pe)}else{const se=new Y(W.x,this.m_pannableExtent.ymin);V.lineTo(se);const oe=new Y(this.m_pannableExtent.getCenterX(),this.m_pannableExtent.ymin);V.lineTo(oe);const pe=new Y(B.x,this.m_pannableExtent.ymin);V.lineTo(pe)}if(V.interpolateAttributesPath(0,re,0),V.getImpl().changeRingStartPoint(F),x>this.m_width360){const se=new Wt({copy:V});k.setShiftCoords(this.m_width360,0),se.applyTransformation(k),V.add(se,!1)}return V}finalizeGeoNormalizeClosedRing(e,i,s){const n=new Wt({vd:e.getDescription()});n.add(e,!1);const r=()=>{const y=n.getPointCount()-2;return n.getSegmentType(y)!==me.enumLine};if(n.hasNonLinearSegments()&&r()){const y=new Qt,_=n.getPointCount()-2;n.getSegmentBuffer(_,y,!1),n.removePointFromPath(0,_+1),n.closeLastPathWithSegment(y.get())}else n.removePointFromPath(0,n.getPointCount()-1);const o=xe.constructEmpty();n.queryLooseEnvelope(o);let l=Math.ceil((this.m_pannableExtent.xmin-o.xmin)/this.m_width360);for(l*=this.m_width360;this.m_pannableExtent.xmin>o.xmin+l;)l+=this.m_width360;for(;this.m_pannableExtent.xmin<o.xmax+l;)l-=this.m_width360;if(l+=this.m_width360,l!==0){o.move(l,0);const y=new _i;y.setShiftCoords(l,0),n.applyTransformation(y)}if(this.m_pannableExtent.xmin<=o.xmin&&this.m_pannableExtent.xmax>=o.xmax){if(i){const _=n.calculateArea2D(),x=new Tu().execute(n,this.m_pannableSR,!0,this.m_progressTracker);if(x!==n){const S=x.calculateArea2D();xn(_)!==xn(S)&&x.reverseAllPaths(),n.assignMove(x)}}let y;if(y=new Wt(s?{copy:n}:{move:n}),s)for(;o.xmin<this.m_pannableExtent.xmax;){o.move(this.m_width360,0);const _=new _i;_.setShiftCoords(this.m_width360,0),n.applyTransformation(_),y.add(n,!1)}return y}let c=new Wt({vd:e.getDescription()});c.add(n,!1);const f=i||o.width()>this.m_width360-10*this.m_pannableSR.getTolerance(0);for(;o.xmin<this.m_pannableExtent.xmax;){o.move(this.m_width360,0);const y=new _i;y.setShiftCoords(this.m_width360,0),n.applyTransformation(y),c.add(n,!1)}if(f){const y=c.calculateArea2D();c.setFillRule(1),c=new Tu().execute(c,this.m_pannableSR,!0,this.m_progressTracker);const _=c.calculateArea2D();xn(y)!==xn(_)&&c.reverseAllPaths()}return c}geonormalize_ring_(e,i,s,n,r,o,l){K(0)}}class oye{supportsCurves(){return!0}accelerateGeometry(e,i,s){return Ent(e,i,s)}canAccelerateGeometry(e){return aye(e)}}function Ent(t,e,i){if(!aye(t))return!1;ME(e,t,!1);let s=0;const n=t.getGeometryType();return bi(n)&&D6(t)&&i!==0&&(s|=t.getImpl().buildQuadTreeAccelerator(i)?1:0),bi(n)&&Nge(t)&&i!==0&&(s|=t.getImpl().buildQuadTreeForPathsAccelerator(i)?1:0),s>0}function aye(t){return D6(t)||Nge(t)}class Cnt extends oye{getOperatorType(){return 8}execute(e,i,s,n){return G0(e,i,s,1,n)}}function Pnt(t,e,i,s){if(t.isEmpty()||e.isEmpty())return t;const n=t.getDimension(),r=e.getDimension();if(n>r)return t;const o=t.getGeometryType(),l=e.getGeometryType(),c=new xe,f=new xe,y=new xe;t.queryEnvelope(c),e.queryEnvelope(f),y.setCoords({env2D:c}),y.mergeEnvelope2D(f);const _=Kn(i,y,!0),x=Bu(_),S=new xe;if(S.setCoords({env2D:c}),S.inflateCoords(x,x),!S.isIntersecting(f))return t;if(n===1&&r===2){const A=Rnt(t,e,l,i,s);if(A)return A}if(o===me.enumPoint){let A;switch(Dn(l)?(A=new vi({vd:e.getDescription()}),A.addSegment(e,!0)):A=e,l){case me.enumPolygon:return Int(t,A,_);case me.enumPolyline:return Mnt(t,A,_);case me.enumMultiPoint:return Ant(t,A,_);case me.enumEnvelope:return Dnt(t,A,_);case me.enumPoint:return knt(t,A,_);default:Je("invalid shape type")}}else if(o===me.enumMultiPoint)switch(l){case me.enumPolygon:return Nnt(t,e,_);case me.enumEnvelope:return $nt(t,e,_);case me.enumPoint:return Ont(t,e,_)}const P=new xe(c);return P.inflate(100*_.total()),wst(t,vs(e,P,0,0,s),i,s)}class c7{getOperatorType(){return 10002}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n){return new Tnt(e,i,s,n)}execute(e,i,s,n){return this.executeMany(new id([e]),new id([i]),s,n).next()}}class Tnt extends Ca{constructor(e,i,s,n){super(),this.m_progressTracker=n,this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=s;const r=i.next();this.m_geomSubtractor=r||new Wt}next(){const e=this.m_inputGeoms.next();return e?(Xc(e),eKe(e),this.m_index=this.m_inputGeoms.getGeometryID(),Pnt(e,this.m_geomSubtractor,this.m_spatialReference,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return K(0),!1}getRank(){return K(0),0}}function Int(t,e,i,s){return W1e(e,t,i.total())===0?t:t.createInstance()}function Mnt(t,e,i,s){const n=t.getXY(),r=e.querySegmentIterator(),o=Bu(i),l=o*o;for(;r.nextPath();)for(;r.hasNextSegment();){const c=r.nextSegment(),f=new xe;if(c.queryEnvelope(f),f.inflateCoords(o,o),!f.contains(n))continue;if(c.isIntersectingPoint(n,i.total()))return t.createInstance();let y=c.getStartXY();if(Y.sqrDistance(n,y)<=l||(y=c.getEndXY(),Y.sqrDistance(n,y)<=l))return t.createInstance()}return t}function Ant(t,e,i,s){const n=e.getImpl().getAttributeStreamRef(0),r=e.getPointCount(),o=t.getXY(),l=Bu(i),c=l*l,f=new Y;for(let y=0;y<r;y++)if(n.queryPoint2D(2*y,f),Y.sqrDistance(f,o)<=c)return t.createInstance();return t}function Dnt(t,e,i,s){const n=new xe;e.queryEnvelope(n),n.inflate(i.total());const r=t.getXY();return n.contains(r)?t.createInstance():t}function knt(t,e,i,s){const n=Bu(i),r=n*n,o=t.getXY(),l=e.getXY();return Y.sqrDistance(o,l)<=r?t.createInstance():t}function Nnt(t,e,i,s){const n=new xe;e.queryEnvelope(n),n.inflate(i.total());const r=t.getPointCount();let o=!1;const l=Vi(r,!1),c=new Y;for(let y=0;y<r;y++)t.queryXY(y,c),n.contains(c)&&El(e,c,i.total())!==0&&(o=!0,l[y]=!0);if(!o)return t;const f=t.createInstance();for(let y=0;y<r;y++)l[y]||f.addPoints(t,y,y+1);return f}function $nt(t,e,i,s){const n=new xe;e.queryEnvelope(n),n.inflate(i.total());const r=t.getPointCount();let o=!1;const l=Vi(r,!1),c=new Y;for(let y=0;y<r;y++)t.queryXY(y,c),n.contains(c)&&(o=!0,l[y]=!0);if(!o)return t;const f=t.createInstance();for(let y=0;y<r;y++)l[y]||f.addPoints(t,y,y+1);return f}function Ont(t,e,i,s){const n=t.getImpl().getAttributeStreamRef(0),r=t.getPointCount(),o=e.getXY();let l=!1;const c=Vi(r,!1),f=Bu(i),y=f*f,_=new Y;for(let S=0;S<r;S++)n.queryPoint2D(2*S,_),Y.sqrDistance(_,o)<=y&&(l=!0,c[S]=!0);if(!l)return t;const x=t.createInstance();for(let S=0;S<r;S++)c[S]||x.addPoints(t,S,S+1);return x}function Rnt(t,e,i,s,n){const r=new lr;t.queryEnvelope(r);const o=new xe;e.queryEnvelope(o),r.merge(o);const l=.1*r.width(),c=.1*r.height();r.inflateCoords(l,c);const f=new Wt;f.addEnvelope(r,!1);const y=f.getImpl();if(i===me.enumPolygon){const _=e.getImpl();y.add(_,!0)}else y.addEnvelope(e,!0);return new Gy(f,s,-1,n).tryFastImplementation(t)}class jy{getOperatorType(){return 10001}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n=0){return new U6(e,i,s,n)}execute(e,i,s,n){const r=new id([e,i]),o=new U6(r,s,n,0).next();return o||bt("null output"),o}}function Lnt(){return{geom:null,vertexCount:-1,bUnioned:!1,location:new Y}}function Fnt(t,e){return Y.compareZorder(t.location,e.location)?-1:t.location.equals(e.location)?0:1}class znt{constructor(){this.binVertexCount=0,this.geometries=[]}addPair(e){this.binVertexCount+=e.vertexCount,this.geometries.push(e)}sort(){this.geometries.sort((e,i)=>Fnt(e,i))}geomCount(){return this.geometries.length}geomPairs(){return this.geometries}clear(){this.binVertexCount=0,this.geometries.length=0}getBinVertexCount(){return this.binVertexCount}}class U6 extends Ca{constructor(e,i,s,n,r=!1){super(),this.m_index=-1,this.m_currentDim=-1,this.m_bDone=!1,this.m_unionBins=[],this.m_readyGeoms=HS(4),this.m_dimGeomCounts=Vi(4,0),this.m_addedGeoms=0,this.m_maxDimension=-1,this.m_bHadGeometry=Vi(4,!1),this.m_complexUnionGeoms=HS(4),this.m_totalNonEmptyGeomCounters=Vi(4,0),this.m_progressTracker=s,this.m_bUnionAllDimensions=!!(4&n),this.m_bPreserveAllPathEnds=!!(8&n),this.m_inputGeoms=e,this.m_spatialReference=i,this.m_options=n,this.m_bIs3D=r}next(){if(this.m_bDone&&this.m_currentDim===this.m_maxDimension)return null;for(;!this.step_(););if(this.m_maxDimension===-1)return null;if(this.m_bUnionAllDimensions){if(this.m_currentDim===-1){for(let e=0;e<=this.m_maxDimension;e++)if(this.m_bHadGeometry[e]){this.m_complexUnionGeoms[e]=this.getResultGeometry(e);for(let i=e+1;i<=this.m_maxDimension;i++)this.m_complexUnionGeoms[i]=this.getResultGeometry(i),this.m_bHadGeometry[i]&&!this.m_complexUnionGeoms[i].isEmpty()&&(this.m_bIs3D?K(0):this.m_complexUnionGeoms[e]=new c7().execute(this.m_complexUnionGeoms[e],this.m_complexUnionGeoms[i],this.m_spatialReference,this.m_progressTracker))}}for(;this.m_currentDim++,(this.m_currentDim>this.m_maxDimension||this.m_currentDim<0)&&bt(""),!this.m_bHadGeometry[this.m_currentDim];);if(this.m_index++,this.m_currentDim===0&&this.m_complexUnionGeoms[this.m_currentDim].getGeometryType()===me.enumPoint){const e=new Jn({vd:this.m_complexUnionGeoms[this.m_currentDim].getDescription()});return this.m_complexUnionGeoms[this.m_currentDim].isEmpty()||e.add(this.m_complexUnionGeoms[this.m_currentDim]),e}return this.m_complexUnionGeoms[this.m_currentDim]}return this.m_index=0,this.m_currentDim=this.m_maxDimension,this.getResultGeometry(this.m_maxDimension)}getGeometryID(){return this.m_index}getRank(){return K(0),-1}tock(){return this.step_()}getResultGeometry(e){return this.m_readyGeoms[e]}finishDim(e,i,s){let n=i;if(!s)return 16&this.m_options&&(n=DN([n],1,this.m_spatialReference,this.m_progressTracker,this.m_options,this.m_bIs3D)),n;if(1&this.m_options)return n;if(e===1)if(!(8&this.m_options)&&(16&this.m_options||this.m_totalNonEmptyGeomCounters[e]>1)){n=DN([n],1,this.m_spatialReference,this.m_progressTracker,16|this.m_options,this.m_bIs3D);const r=[0],o=n.getImpl().getIsSimple(0,r);K(this.m_bIs3D||hg(o))}else this.m_totalNonEmptyGeomCounters[e]===1&&(this.m_bIs3D?K(0):n=new Tu().execute(n,this.m_spatialReference,!1,this.m_progressTracker));else this.m_bIs3D?K(0):n=new Tu().execute(n,this.m_spatialReference,!1,this.m_progressTracker);if(e===0&&n.getGeometryType()===me.enumPoint){const r=new Jn({vd:n.getDescription()});n.isEmpty()||r.add(n),n=r}return n}static getLevel(e){const s=CE(e);let n=s>0?(Math.log(s)-Math.log(32))/Math.log(4):0;return n<0&&(n=0),Math.floor(n)}step_(){if(this.m_bDone)return!0;let e;if(this.m_inputGeoms?(e=this.m_inputGeoms.next(),e===null?(this.m_bDone=!0,this.m_inputGeoms=null):(this.checkAndThrow(e),e.isEmpty()||this.m_totalNonEmptyGeomCounters[e.getDimension()]++)):e=null,e!==null){const i=e.getDimension();this.m_bHadGeometry[i]=!0,(i>=this.m_maxDimension||this.m_bUnionAllDimensions)&&(this.addGeom(i,!1,e),i>this.m_maxDimension&&!this.m_bUnionAllDimensions&&this.removeAllBinsWithLowerDimension(i))}if(this.m_addedGeoms>0)for(let i=0;i<=this.m_maxDimension;i++){for(;this.m_dimGeomCounts[i]>1;){const s=this.collectGeometriesToUnion(i);if(s===null)break;{let n;n=1&this.m_options?DN(s,s.length,this.m_spatialReference,this.m_progressTracker,this.m_options,this.m_bIs3D):Pst(s,s.length,this.m_spatialReference,this.m_progressTracker,8|this.m_options,this.m_bIs3D),this.addGeom(i,!0,n)}}if(this.m_bDone&&(K(this.m_dimGeomCounts[i]<=1),this.m_dimGeomCounts[i]!==0)){const s=this.m_unionBins[i].entries().next().value,n=s[1].geomPairs()[0].geom,r=s[1].geomPairs()[0].bUnioned;this.m_unionBins[i].clear(),this.m_readyGeoms[i]=this.finishDim(i,n,r)}}return this.m_bDone}addGeom(e,i,s){const n=Lnt();n.geom=s;const r=CE(s);n.vertexCount=r;const o=xe.constructEmpty();s.queryEnvelope(o),n.location=r>0?o.getCenter():new Y(0,0);const l=U6.getLevel(s);if(e+1>this.m_unionBins.length)for(;this.m_unionBins.length<Math.max(2,e+1);)this.m_unionBins.push(new Map);let c=null;const f=this.m_unionBins[e].get(l);f&&(c=f),c===null&&(c=new znt,this.m_unionBins[e].set(l,c)),n.bUnioned=i,c.addPair(n),this.m_dimGeomCounts[e]++,this.m_addedGeoms++,this.m_maxDimension=Math.max(this.m_maxDimension,e)}removeAllBinsWithLowerDimension(e){K(0)}collectGeometriesToUnion(e){if(1&this.m_options&&!this.m_bDone)return null;let i=null;const s=[];for(const n of this.m_unionBins[e].keys())s.push(n);Ix(s);for(let n=0;n<s.length;n++){if(s[n]===-1)continue;const r=this.m_unionBins[e].get(s[n]);{const c=r.getBinVertexCount()>5e3&&r.geomCount()>=4;if(this.m_bDone||c){for(let f=0;f<n;f++){if(s[f]===-1)continue;const y=this.m_unionBins[e].get(s[f]);y.sort(),this.m_dimGeomCounts[e]-=y.geomCount(),this.m_addedGeoms-=y.geomCount();for(const _ of y.geomPairs())i||(i=new Array),i.push(_.geom);y.clear(),this.m_unionBins[e].delete(s[f]),s[f]=-1}r.sort(),this.m_dimGeomCounts[e]-=r.geomCount(),this.m_addedGeoms-=r.geomCount();for(const f of r.geomPairs())i||(i=new Array),i.push(f.geom);if(r.clear(),this.m_unionBins[e].delete(s[n]),s[n]=-1,!this.m_bDone)break}}}return i}checkAndThrow(e){this.m_bIs3D&&(e.getDimension()>1&&KZe(),e.hasAttribute(1)||Je("Geometry must have Zs")),Xc(e)}}class lye extends oye{getOperatorType(){return 3}execute(e,i,s,n=null){return G0(e,i,s,4,n)}}function use(t,e,i){const s=e.getGCSSplitLines();if(s===null)return t;const n=e.getGCS(),r=n.getPannableExtent().width(),o=xe.constructEmpty();t.queryLooseEnvelope(o);const l=Ze.constructEmpty();o.queryIntervalX(l);const c=s.querySegmentIterator();let f=null;const y=new _i;for(;c.nextPath();)for(;c.hasNextSegment();){const _=c.nextSegment(),x=_.queryInterval(0,0),S=Ze.constructEmpty();S.setCoordsFromEnvelope(x);let P=0;for(;S.vmax>l.vmin;)S.move(-r),P--;for(;S.vmin<=l.vmax;){if(S.isIntersecting(l)){f===null&&(f=new vi);const A=new si({start:_.getStartXY(),end:_.getEndXY()});P!==0&&(y.setShiftCoords(P*r,0),A.applyTransformation(y)),f.addSegment(A,!0)}S.move(r),++P}}return f!==null?ptt(t,f,Bu(bl(n,f,!0)),i):t}function Nj(t,e,i){let s=t.getName();return mot(s)||(i||e>0?(s=t.toString(zi.PE_STR_NAME_CANON|zi.PE_STR_AUTH_NONE),s=Gnt(s)):s=t.toString(zi.PE_STR_AUTH_TOP)),s}function qnt(t,e,i,s){return K(0),""}function cse(t,e=-1){if((e>1||e<-1)&&Je("verbosity"),e===-1)return t.toString();{const i=e===0?zi.PE_STR_AUTH_TOP:zi.PE_STR_AUTH_ALL;return t.toString(i)}}function Vnt(t,e){(e>1||e<-1)&&Je("verbosity");let i=zi.PE_STR_FMT_WKT2;return e!==-1&&(i|=e===0?zi.PE_STR_AUTH_TOP:zi.PE_STR_AUTH_ALL),t.toString(i)}function Gnt(t){return t.toLocaleUpperCase("en-US")}function jnt(t,e,i){const s=t.getPCSHorizon();if(s.getGeometryType()!==me.enumPolygon)if(s.getGeometryType()!==me.enumEnvelope)Je("");else{const n=s;for(let r=0;r<i;r++)n.contains(e[r])||e[r].setNAN()}else{const n=t.getDefaultPrecisionSR().getTolerance(0),r=s;for(let o=0;o<i;o++)El(r,e[o],n)!==1&&e[o].setNAN()}}function Bnt(t,e,i,s){for(let n=0;n<e;n++){if(t[n].y<i.ymin||t[n].y>i.ymax){t[n].setNAN();continue}const r=t[n].x;t[n].x=wy(r,i,s)}}function $N(t,e,i,s){if(t.isEmpty()||i===1)return t;const n=t.getGeometryType();if(n===me.enumPoint){const V=t,B=V.getXY();return kz([B],1,e,i)===0||B.isNAN()?V.setEmpty():V.setXY(B),t}if(n===me.enumMultiPoint){const V=t,B=t.createInstance(),W=V.getPointCount();B.reserve(W);const J=V.getAttributeStreamRef(0),re=V.getDescription().getAttributeCount()>1,se=new Ht,oe=Float64Array.from(J.getArray());if(kz(oe,W,e,i)>0)for(let pe=0,ue=2*W;pe<ue;pe+=2)Number.isNaN(oe[pe])||(re?(V.getPointByVal(pe>>1,se),se.setXYCoords(oe[pe],oe[pe+1]),B.add(se)):B.addXY(oe[pe],oe[pe+1]));return B}let r=t;const o=e.getOneDegreeGCSUnit(),l=90*o,c=180*o,f=360*o,y=e.getCentralMeridian(),_=.5*o,x=xe.constructEmpty();r.queryEnvelope(x);const S=e.getGCSHorizon(),P=e.getGCSHorisonIsInclusive(),A=S.getGeometryType()===me.enumEnvelope,k=xe.constructEmpty();S.queryEnvelope(k);const $=e.getGCS();if(i!==2&&i!==4||(k.xmin=y-c,k.xmax=k.xmin+f),i===4){if(!(x.width()>f-o)){const V=xe.constructEmpty();V.setCoords({xmin:x.xmin-o,ymin:k.ymin,xmax:x.xmax+o,ymax:k.ymax}),r=new Y2().execute(r,V,$,s);let B=Math.floor((y-x.getCenterX())/f);for(x.move(B*f,0);x.xmin>k.xmax;)B-=1,x.move(-f,0);for(;x.xmin<k.xmin;)B+=1,x.move(f,0);if(B!==0){const W=new _i;W.setShiftCoords(B*f,0),r.applyTransformation(W)}return r}i=2}if(i===2&&(k.xmin=y-c,k.xmax=k.xmin+f),x.ymin<-l||x.ymax>l){const V=xe.constructEmpty();if(V.setCoords({xmin:x.xmin-o,ymin:-l,xmax:x.xmax+o,ymax:l}),r=new Y2().execute(r,V,$,s),r.isEmpty())return r;r.queryEnvelope(x)}if(P&&(k.ymax<x.ymin||k.ymin>x.ymax))return r.createInstance();x.width()>f&&(r=X6(r,y-c,f,$,!0,0,!0,s),r.queryEnvelope(x));let F=Wnt(x.xmin,x.xmax,k.xmin,k.xmax,f);if(F!==0&&x.move(F,0),x.xmax>k.xmax||x.xmin<k.xmin){if(x.xmax>k.xmax)for(;x.xmin>=k.xmax;)x.move(-f,0),F-=f;for(;x.xmin<k.xmax-f;)x.move(f,0),F+=f}const G=ME($,S,!1);if(F!==0){const V=new _i;V.setShiftCoords(F,0),r.applyTransformation(V),F=0}if(P){if(A&&k.containsEnvelope(x))return r;const V=new Array(2);for(let B=0;B<2;B++){let W;if(A?W=bi(n)?vs(r,k,G,_,s):vs(r,k,G,0,s):(W=new X2().execute(r,S,$,s),W===S&&(W=W.clone())),k.xmin<=x.xmin&&k.xmax>=x.xmax||k.xmin>=x.xmin&&k.xmax<=x.xmax)return W;if(V[B]=W,B===0){x.move(-f,0);const J=new _i;J.setShiftCoords(-f,0),r.applyTransformation(J)}}return bi(n)?V[0].add(V[1],!1):bt("intersect_with_GCS_horizon: unexpected geometry type"),V[0]}{if(k.ymax<x.ymin||k.ymin>x.ymax)return r;let V=0;for(;!r.isEmpty()&&x.xmax>k.xmin;){if(V!==0){const B=new _i;B.setShiftCoords(V,0),r.applyTransformation(B)}if(new lye().execute(r,S,$,s)||(r=new c7().execute(r,S,$,s),S===r&&(r=r.clone())),V!==0){const B=new _i;B.setShiftCoords(-V,0),r.applyTransformation(B)}V-=f,x.move(-f,0)}return r}}function Hnt(t,e,i,s,n,r){const o={stack:[],error:void 0,hasError:!1};try{if(r===2)return Vet(t,e,i,s,n);if(Math.abs(i.x-s.x)>=Math.PI||!LN(i.x,s.x,n))return Number.NaN;i.x>s.x&&(s=St(i,i=s));const l=Wl(o,new qh,!1),c=Wl(o,new qh,!1),f=Wl(o,new qh,!1),y=i.clone();Dg.geodeticDistance(t,e,i.x,i.y,s.x,s.y,c,l,null,r);const _=c.val;let x=0,S=1;for(;_*(S-x)>1e-12*t;){const P=.5*(x+S);if(Dg.geodeticCoordinate(t,e,i.x,i.y,_*P,l.val,c,f,r),y.x=c.val,y.y=f.val,y.x===n)return y.y;if(LN(i.x,y.x,n))S=P;else{if(!LN(s.x,y.x,n))return Number.NaN;x=P}}return y.y}catch(l){o.error=l,o.hasError=!0}finally{om(o)}}function Unt(t,e){let i;if(Array.isArray(t)){const s=t;i=new Float64Array(2*e);for(let n=0,r=0;n<e;n++,r+=2)i[r]=s[n].x,i[r+1]=s[n].y}else i=t;return i}function Dz(t,e,i,s){for(let n=0,r=0;n<s;n++,r+=2)e[i+n].x=t[r],e[i+n].y=t[r+1]}function kz(t,e,i,s){if(e===0||s===1)return e;const n=Unt(t,e);if(s===2){const A=i.getPannableExtentInGCS();let k=e;for(let $=0,F=2*e;$<F;$+=2)(n[$+1]>A.ymax||n[$+1]<A.ymin)&&(n[$]=Number.NaN,k--);return k?(L9(n,e,A.xmin,A.width(),!0),t!==n&&Dz(n,t,0,e),k):0}const r=i.getOneDegreeGCSUnit(),o=90*r,l=180*r,c=360*r;let f=e;for(let A=0,k=2*e;A<k;A+=2)(n[A+1]>o||n[A+1]<-o)&&(n[A]=Number.NaN,f--);if(!f)return 0;const y=xe.constructEmpty();y.setFromPoints(n,e);const _=i.getGCSHorizon(),x=i.getGCSHorisonIsInclusive(),S=_.getGeometryType()===me.enumEnvelope,P=xe.constructEmpty();if(_.queryEnvelope(P),x&&(P.ymax<y.ymin||P.ymin>y.ymax))return 0;if(x)if(L9(n,e,P.getCenterX()-l,c,!0),f=e,S)for(let A=0,k=2*e;A<k;A+=2)P.containsCoords(n[A],n[A+1])||(n[A]=Number.NaN,f--);else{const A=ME(i.getGCS(),_,!1),k=new Y;for(let $=0,F=2*e;$<F;$+=2)k.setCoords(n[$],n[$+1]),El(_,k,A)!==0||(n[$]=Number.NaN,f--)}else{L9(n,e,-l,c,!0),f=e;const A=ME(i.getGCS(),_,!1),k=new Y;for(let $=0,F=2*e;$<F;$+=2){k.setCoords(n[$],n[$+1]),k.isNAN()&&f--;const G=hye(k.x,P.xmin,P.xmax,c);k.x+=G,El(_,k,A)!==0&&(n[$]=Number.NaN,f--)}}return f>0&&Array.isArray(t)&&Dz(n,t,0,e),f}function W2(t,e,i,s,n,r){if(e.isPannable()||Je("fold_into_360_degree_range"),t.isEmpty())return t;let o,l;if(e.getCoordinateSystemType()===2){const c=e.getPannableExtent();l=c.xmin,o=c.width()}else{const c=e.getOneDegreeGCSUnit();o=360*c,l=i-180*c}return X6(t,l,o,e,s,n,!0,r)}function uye(t,e,i,s){let n,r;if(i.getCoordinateSystemType()===2){const o=i.getPannableExtent();n=o.xmin,r=o.width()}else{const o=i.getOneDegreeGCSUnit();r=360*o,n=s-180*o}L9(t,e,n,r)}function ON(t,e){const i=e.width();let s=Mg(t-e.vmin,i);return s<0&&(s+=i),e.snapClip(s+e.vmin)}function wy(t,e,i){return t>e.xmax&&t-e.xmax<i?e.xmax:t<e.xmin&&e.xmin-t<i?e.xmin:t}function Y6(t,e,i){if(t[0]<e.vmin||t[0]>e.vmax||i&&t[0]===e.vmax){const s=e.width();return t[0]+=Math.ceil((e.vmin-t[0])/s)*s,t[0]=e.snapClip(t[0]),!0}return!1}function Ynt(t,e,i,s,n,r,o,l,c){return new H6(t,null,i,e,s,n,o,l,r).geoNormalizePolygonGeometry(c)}function Xnt(t,e,i,s,n,r,o,l,c){return new H6(t,null,i,e,s,n,o,l,r).geoNormalizePolylineGeometry(c)}function cye(t,e,i,s,n){const r=new Bs,o=r.addGeometry(t);return WE(r,o,e,ME(e,t,!1),i,s,n),r.getGeometry(o)}function WE(t,e,i,s,n,r,o){const l={stack:[],error:void 0,hasError:!1};try{K(hot()),i.isPannable()||bn("insert_geodetic_points");const c=i.getPannableExtent(),f=i.getGCS(),y=c5();f.querySpheroidData(y);const _=f.getUnit().getUnitToBaseFactor(),x=y.majorSemiAxis,S=y.e2;let P=0;const A=new Ze;c.queryIntervalX(A);let k=null;const $=new Array(4);i.getCoordinateSystemType()===2?(k=i.getPECoordSys(),r?($[0]=ON(o,A),$[1]=c.getCenterY(),Za.projToGeog(k,1,$),P=$[0]*_):($[0]=c.getCenterX(),$[1]=o,Za.projToGeog(k,1,$),P=$[1]*_)):P=o*_,r||P===0||n===2||bn("insert_geodetic_points: 1");const F=Wl(l,new qh,!1),G=new Y,V=new Y,B=new Y,W=new Y,J=new Y,re=new Y;for(let se=t.getFirstPath(e);se!==ae;se=t.getNextPath(se)){const oe=t.getFirstVertex(se);t.queryXY(oe,B);let pe=!1;const ue=t.getNextVertex(oe);for(let ce=ue;ce!==ae;ce=t.getNextVertex(ce)){if(ce===ue){if(pe)break;pe=!0}if(t.queryXY(ce,W),r&&(s<o-B.x&&W.x-o>s||s<o-W.x&&B.x-o>s)||!r&&(o!==0||s<-B.y&&W.y>s||s<-W.y&&B.y>s))do{if(Math.abs(B.x-W.x)>=.5*A.width())break;i.getCoordinateSystemType()===2?($[0]=ON(B.x,A),$[1]=B.y,$[2]=ON(W.x,A),$[3]=W.y,h7(k,2,$,0),J.x=$[0]*_,J.y=$[1]*_,re.y=$[3]*_):(J.x=B.x*_,J.y=B.y*_,re.y=W.y*_),re.x=(W.x-B.x)*Math.PI*2/A.width()+J.x;let ne=0;const de=Ge(Y,2);if(r){if(V.x=P,V.y=Hnt(x,S,J,re,P,n),Number.isNaN(V.y))break;de[0]=V,ne=1}let Se=-1;for(let Pe=0;Pe<ne;Pe++){Dg.geodeticDistance(x,S,J.x,J.y,re.x,re.y,F,null,null,n);const Re=F.val;Dg.geodeticDistance(x,S,J.x,J.y,de[Pe].x,de[Pe].y,F,null,null,n);const Oe=F.val;i.getCoordinateSystemType()===2?($[0]=de[Pe].x/_,$[1]=de[Pe].y/_,Za.geogToProj(k,1,$),r?(G.y=$[1],G.x=o):(G.x=fse($[0],B.x,W.x,A),G.y=o)):r?(G.x=o,G.y=de[Pe].y/_):(G.x=fse(de[Pe].x/_,B.x,W.x,A),G.y=o);const we=Re>0?cn(Oe/Re,0,1):.5;if(we===0||we===1||Se>we)continue;const Fe=t.getPrevVertex(ce);t.splitSegment(Fe,[we],1);const it=t.getNextVertex(Fe);t.setXYCoords(it,G.x,G.y),Se=we}}while(!1);B.setCoordsPoint2D(W)}}}catch(c){l.error=c,l.hasError=!0}finally{om(l)}}function ZE(t,e){K(e.isPannable());const i=e.getPannableExtent();if(t.getGeometryType()===me.enumPoint){const l=t.getY();return i.ymin<=l&&l<=i.ymax?t:t.createInstance()}const s=xe.constructEmpty();t.queryEnvelope(s);const n=xe.constructEmpty();n.setCoords({env2D:i}),n.xmin=s.xmin,n.xmax=s.xmax,n.inflateCoords(.01*n.height(),0);const r=Ug(e,s,!1);let o;return o=n.containsEnvelope(s)?t:vs(t,n,r,0,null),o}function hye(t,e,i,s){return fv((.5*(i+e)-t)/s)*s}function Wnt(t,e,i,s,n){return t>=i&&e<=s?0:hye(.5*(e+t),i,s,n)}function X6(t,e,i,s,n,r,o,l){const c=t.getGeometryType(),f=Ze.constructEmpty();f.setCoords(e,e+i);const y=[0];if(c===me.enumPoint){const J=t;if(y[0]=J.getX(),Y6(y,f,o)){const re=n?t:t.clone();return re.setX(y[0]),re}return t}const _=xe.constructEmpty();if(t.queryEnvelope(_),_.isEmpty())return t;if(c===me.enumMultiPoint){const J=n?t:t.clone(),re=J.getImpl(),se=re.getAttributeStreamRef(0),oe=2*re.getPointCount();let pe=!1;for(let ue=0;ue<oe;ue+=2)y[0]=se.read(ue),Y6(y,f,o)&&(se.write(ue,y[0]),pe=!0);return pe&&re.notifyModifiedFlags(2001),J}const x=Ze.constructEmpty();if(_.queryIntervalX(x),f.contains(x))return f.vmax,x.vmax,t;const S=xe.constructEmpty();if(S.setCoords({env2D:_}),x.width()===0){let J=x.vmin;J+=Math.ceil((f.vmin-J)/i)*i,J=f.snapClip(J);const re=n?t:t.clone();return re.setAttributeBasic(0,0,J),re}if(c===me.enumEnvelope){const J=n?t:t.clone();return _.intersect(S),J.setEnvelope(_),J}const P=.1*Math.max(_.height(),_.width())*1;S.inflateCoords(0,P);let A=t;const k=s.getTolerance(0),$=new _i;for(;;){const J=Math.floor((x.vmin-e)/i),re=Math.ceil((x.vmax-e)/i);if(!(re-J>3))break;{const se=Math.floor(.5*(re+J));S.xmin=_.xmin-P,S.xmax=e+i*se;const oe=vs(A,S,k,r,l);S.xmin=S.xmax,S.xmax=_.xmax+P;const pe=vs(A,S,k,r,l);$.setShiftCoords((se-re)*i,0),pe.applyTransformation($),c===me.enumPolygon?A=new jy().execute(oe,pe,s,l):(A=oe,A.add(pe,!1)),A.queryEnvelope(_),_.queryIntervalX(x)}}S.xmin=e,S.xmax=e+i;const F=xe.constructEmpty();F.setCoords({env2D:S}),F.inflateCoords(k,0);const G=Math.floor((_.xmin-S.xmin)/i)*i;let V;G?(S.move(G,0),$.setShiftCoords(-G,0)):$.setIdentity(),V=c===me.enumPolyline?new vi({vd:A.getDescription()}):new Wt({vd:A.getDescription()});const B=xe.constructEmpty(),W=xe.constructEmpty();for(;_.xmax>S.xmin;){const J=vs(A,S,k,0,l);J.queryEnvelope(W);let re=!1;re=c===me.enumPolyline?!J.isEmpty()&&(W.width()>k||W.height()>k):!J.isEmpty()&&(c!==me.enumPolygon||W.width()>k),re&&(J.applyTransformation($),J.queryEnvelope(W),V.queryEnvelope(B),B.inflateCoords(k,k),B.isIntersecting(W)&&c===me.enumPolygon?V=new jy().execute(V,J,s,l):V.add(J,!1)),S.move(i,0),$.shiftCoords(-i,0)}return V}function L9(t,e,i,s,n=!0){const r=new Ze;r.setCoords(i,i+s);const o=[0];if(Array.isArray(t)){const l=t;for(let c=0;c<e;c++)r.containsRightExclusive(l[c].x)||(o[0]=l[c].x,Y6(o,r,n),l[c].x=o[0])}else{const l=t;for(let c=0;c<e;c++){const f=c<<1;r.containsRightExclusive(l[f])||(o[0]=l[f],Y6(o,r,n),l[f]=o[0])}}}function W6(t,e,i,s=!0){if(t.isEmpty())return;const n=t.getGeometryType();if(!s||n!==me.enumPolygon)if(el(n)){let r=!1;if(bi(n)&&t.hasNonLinearSegments()){const o=t.getImpl(),l=o.getAttributeStreamRef(0),c=o.getSegmentFlagsStreamRef();K(c!==null);for(let f=0,y=o.getPathCount();f<y;f++){let _=!0;const x=o.isClosedPath(f),S=o.getPathEnd(f);x&&o.getPathSize(f)>0&&(_=(31&c.read(S-1))===1);for(let P=o.getPathStart(f);P<S;P++)if((31&c.read(P))===1){if(_){const A=l.read(2*P),k=wy(A,e,i);k!==A&&(r=!0,l.write(2*P,k))}_=!0}else _=!1}}else{const o=t.getImpl(),l=o.getAttributeStreamRef(0);for(let c=0,f=o.getPointCount();c<f;c++){const y=l.read(2*c),_=wy(y,e,i);_!==y&&(r=!0,l.write(2*c,_))}}r&&t.getImpl().notifyModifiedFlags(2001)}else if(n===me.enumEnvelope){const r=t,o=xe.constructEmpty();r.queryEnvelope(o),o.xmin=wy(o.xmin,e,i),o.xmax=wy(o.xmax,e,i),r.setEnvelope(o)}else if(n===me.enumPoint){const r=t;r.setX(wy(r.getX(),e,i))}else bt("")}function Znt(t,e,i){const s=new Y;return s.x=wy(t.x,e,i),s.y=t.y,s}function Knt(t,e){if(e.isEmpty())return 0;const i=t.getPECoordSys();if(i.getProjection().getCode()===zi.PE_PRJ_AZIMUTHAL_EQUIDISTANT){const s=c5();t.querySpheroidData(s);const n=i.getParameters();if(n[zi.PE_PARM_LAM0]===null||n[zi.PE_PARM_PHI0]===null)return 0;const r=[n[zi.PE_PARM_LAM0].getValue(),n[zi.PE_PARM_PHI0].getValue()];Za.geogToProj(i,1,r);const o=new Y(r[0],r[1]),l=xe.constructEmpty();e.queryEnvelope(l);const c=Ge(Y,4);l.queryCorners(c);let f=0;const y=t.getOneMeter();let _=Math.max(s.majorSemiAxis,s.minorSemiAxis)*Math.PI,x=Math.min(s.majorSemiAxis,s.minorSemiAxis)*Math.PI;x-=_/180,_*=y,x*=y;for(let S=0;S<4;S++){const P=Y.distance(c[S],o);if(P>_)f++;else if(P>x)return-1}if(f===0)return 1;if(f===4){const S=xe.constructEmpty();return S.setCoords({center:o,width:_,height:_}),l.isIntersectingNe(S)?-1:0}return-1}return-1}function RN(t,e,i,s){const n=t.getGeometryType();K(n===me.enumPolygon||n===me.enumPolyline||n===me.enumMultiPoint);const r=e.getCoordinateSystemType();if(r===2){let o=t;if(i===0){const l=Knt(e,t);if(l===0)return t.createInstance();if(l===1)return t;const c=e.getPCSHorizon(),f=c.getGeometryType(),y=e.getDefaultPrecisionSR();if(f===me.enumEnvelope){const _=xe.constructEmpty();c.queryEnvelope(_),o=vs(t,_,Ug(y,_,!1),5e4*e.getOneMeterPCSUnit(),s)}else new Cnt().execute(c,t,y,s)||(o=new X2().execute(o,c,y,s),o===c&&(o=o.clone()))}else if(e.isPannable()){const l=xe.constructEmpty();o.queryEnvelope(l);const c=e.getPannableExtent();c.containsEnvelope(l)||(W6(o,c,e.getTolerance(0)),i!==2&&i!==4||(o=ZE(o,e)),i!==4?o=W2(o,e,0,!0,1e5*e.getOneMeterPCSUnit(),s):n===me.enumPolygon&&l.width()>2*c.width()&&(o=X6(o,-2*c.width(),2*c.width(),e,!0,0,!0,s)))}return o}if(K(r===1),n===me.enumMultiPoint)return W6(t,e.getPannableExtent(),e.getTolerance(0)),t;{const o=xe.constructEmpty();t.queryEnvelope(o);let l=t;const c=e.getPannableExtent();if(o.ymin<c.ymin||o.ymax>c.ymax){const f=Math.max(1,o.calculateToleranceFromEnvelope()),y=new xe(o.xmin-f,c.ymin,o.xmax+f,c.ymax);if(l=new Y2().execute(l,y,e,s),l.isEmpty())return l}return n===me.enumPolygon&&o.width()>2*c.width()&&(l=X6(l,-2*c.width(),2*c.width(),e,!0,0,!0,s)),l}}function Jnt(t,e,i,s,n,r){const o=s.getCoordinateSystemType();if(o===2){if(n===0)i!==t&&E6(i,t,e),jnt(s,i,e);else if(i!==t&&E6(i,t,e),s.isPannable()){const l=s.getTolerance(0);Bnt(i,e,s.getPannableExtent(),l),uye(i,e,s,0)}}else{K(o===1);const l=s.getTolerance(0),c=s.getPannableExtent();for(let f=0;f<e;f++)i[f].assign(Znt(t[f],c,l))}}function $j(t,e,i,s){if(!i)return;const n=t.getPECoordSys();if(i===1){const _=[e[0].x,e[0].y];if(Za.geogToProj(n,1,_),s){const{first:x,second:S}=t.m_peCoordSysVal.getGeogToProjFactors();_[0]=x*(e[0].x-t.getCentralMeridian())+S}return void e[0].setCoords(_[0],_[1])}const r=t.isPannable(),o=r?t.getPannableExtent().width():0,l=179*o/360;let c=0;r&&(c=t.getCentralMeridian());const f=256,y=new Float64Array(2*f);for(let _=0;_<i;){for(let S=_;S<i&&e[S].isNAN();++S)_++;let x=Math.min(f,i-_);if(x>0){for(let S=1,P=_+1;S<x;++S,++P)if(e[P].isNAN()){x=S;break}for(let S=0;S<x;++S){const P=S<<1;y[P]=e[_+S].x,y[P+1]=e[_+S].y}if(Za.geogToProj(n,x,y),s){const{first:S,second:P}=t.m_peCoordSysVal.getGeogToProjFactors();for(let A=0;A<x;++A)y[A<<1]=S*(e[_+A].x-c)+P}if(r)for(let S=0,P=_;S<x;S++,P++){const A=S<<1,k=y[A],$=xn(k),F=e[P].x-c;$*xn(F)<0&&Math.abs(k)>l&&(y[A]-=$*o)}Dz(y,e,_,x),_+=x}}}function dye(t,e,i){K(!i||t.isPannable());const s=e.getPointCount();if(!s)return;const n=e.getImpl(),r=n.getAttributeStreamRef(0),o=t.getPECoordSys();let l=0;const c=r.readRange(0,2*s);let f=()=>{Za.geogToProj(o,s,c)};const y=t.isPannable()&&!i,_=y?t.getPannableExtent().width():0,x=179*_/360;if(t.isPannable()&&(l=t.getCentralMeridian(),i)){const S=t.m_peCoordSysVal.getGeogToProjFactors(),P=S.first,A=S.second;f=()=>{Za.geogToProj(o,s,c);for(let k=0;k<s;k++){const $=k<<1,F=r.read($),G=P*(F-l)+A;c[$]=G}}}if(f(),y)for(let S=0;S<s;S++){const P=S<<1,A=c[P],k=xn(A),$=r.read(P)-l;k*xn($)<0&&Math.abs(A)>x&&(c[P]+=-k*_)}r.writeRangeFromArray(0,2*s,c,!0,1),n.notifyModifiedFlags(2001)}function Qnt(t,e,i){switch(e.getGeometryType()){case me.enumLine:return void prt(t,e,i);case me.enumBezier:return void yrt(t,e,i);case me.enumEllipticArc:return void mrt(t,e,i);case me.enumBezier2:return void vrt();case me.enumRationalBezier2:return void _rt();default:bt("")}}function hse(t,e,i){if(!e.hasNonLinearSegments())return void dye(t,e,i);if(K(!i||t.isPannable()),e.isEmpty())return;const s=0,n=t.getPECoordSys(),r=t.isPannable(),o=r?t.getPannableExtent().width():0,l=179*o/360;let c=0;r&&(c=t.getCentralMeridian());const f=e.createInstance();f.reserveParts(e.getPointCount(),e.getPathCount());const y=e.getImpl(),_=new Qt;for(let x=0,S=e.getPathCount();x<S;++x)if(y.hasNonLinearSegmentsPath(x)){let P=!0,A=-1;const k=y.getPathStart(x),$=k+y.getSegmentCountPath(x);y.isClosedPath(x)&&(A=$-1);const F=new Y;for(let G=k;G<$;++G){if(y.getSegmentBuffer(G,_,!1),Qnt(t,_.get(),i),!P&&(_.get().getStartXY().equals(F)||_.get().moveTo(F)),G!==A)f.addSegment(_.get(),P);else{if(P){const V=new Ht;_.get().queryStart(V),f.startPathPoint(V)}f.closeLastPathWithSegment(_.get())}F.assign(_.get().getEndXY()),P=!1}}else{let A,k=y.getPathSize(x),$=Math.min(k,1024);f.insertPath(-1,e,x,!0);const F=y.getAttributeStreamRef(0),G=f.getAttributeStreamRef(0);for(let V=y.getPathStart(x),B=y.getPathEnd(x);V<B;){if(A=F.readRange(V,$),Za.geogToProj(n,$,A),r)for(let W=0;W<$;W++){const J=W<<1,re=A[J],se=xn(re),oe=F.read(2*(s+W))-c;se*xn(oe)<0&&Math.abs(re)>l&&(A[J]+=-se*o)}G.writeRangeFromArray(V,$,A,!0,1),V+=$,k-=$,$=Math.min(k,1024)}}e.assignMove(f)}function fye(t,e,i){let n=i.getPointCount();if(!n)return;const r=i.getImpl(),o=r.getAttributeStreamRef(0);let l=Math.min(n,1e3),c=0;const f=t.getPECoordSys();Number.isNaN(e)&&(e=0);const y=t.isPannable(),_=t.getOneDegreeGCSUnit(),x=360*_,S=179*_;let P;for(;n;){if(P=o.readRange(2*c,2*l),h7(f,l,P,e),y)for(let A=0;A<l;A++){const k=A<<1,$=P[k]-e,F=xn($),G=o.read(2*(c+A));F*xn(G)<0&&Math.abs($)>S&&(P[k]+=-F*x)}o.writeRangeFromArray(2*c,2*l,P,!0,1),c+=l,n-=l,l=Math.min(n,1e3)}r.notifyModifiedFlags(2001)}function ert(t,e,i){switch(i.getGeometryType()){case me.enumLine:return void trt(t,e,i);case me.enumBezier:return void nrt(t,e,i);case me.enumEllipticArc:return void irt(t,e,i);case me.enumBezier2:return void rrt();case me.enumRationalBezier2:return void ort();default:bt("")}}function trt(t,e,i){const s=[i.getStartXY(),i.getEndXY()];Oj(t,e,s,2),i.setStartXY(s[0]),i.setEndXY(s[1]),i.normalizeAfterEndpointChange()}function irt(t,e,i){if(i.projectionBehavior()===0)srt(t,e,i);else{const s=i.isClosed()&&i.isMajor(),n=[i.getStartXY(),s?i.getCenter():i.getEndXY()],r=[n[0].clone(),n[1].clone()];Lj(t,e,r,2);const o=new _i;o.initializeFromTwoPointsArray(n,r),i.applyTransformation(o);const l=s?0:1;i.setCoordsForIntersector(r[0],r[l],!1)}}function srt(t,e,i){gye(!1,t,e,i,!1)}function nrt(t,e,i){const s=Ge(Y,4);i.queryControlPoints(s),Lj(t,e,s,4),i.setControlPoints(s)}function rrt(t,e,i){K(0)}function ort(t,e,i){K(0)}function h7(t,e,i,s){const n=Za.projToGeogCenter(t,e,i,s);for(let r=0;r<e;++r){const o=r<<1;K(Number.isFinite(i[o]+i[o+1]))}return n}function Q4(t,e,i){if(!i.hasNonLinearSegments())return void fye(t,e,i);if(i.isEmpty())return;const s=t.getPECoordSys();Number.isNaN(e)&&(e=0);const n=t.isPannable(),r=t.getOneDegreeGCSUnit(),o=360*r,l=179*r,c=i.createInstance();c.reserveParts(i.getPointCount(),i.getPathCount());const f=i.getImpl(),y=new Qt;for(let _=0,x=i.getPathCount();_<x;++_)if(f.hasNonLinearSegmentsPath(_)){let S=!0,P=-1;const A=f.getPathStart(_),k=A+f.getSegmentCountPath(_);f.isClosedPath(_)&&(P=k-1);const $=new Y;for(let F=A;F<k;++F){if(f.getSegmentBuffer(F,y,!1),ert(t,e,y.get()),!S&&(y.get().getStartXY().equals($)||y.get().moveTo($)),F!==P)c.addSegment(y.get(),S);else{if(S){const G=new Ht;y.get().queryStart(G),c.startPathPoint(G)}c.closeLastPathWithSegment(y.get())}$.assign(y.get().getEndXY()),S=!1}}else{let P,A=f.getPathSize(_),k=Math.min(A,1e3);c.insertPath(-1,i,_,!0);const $=f.getAttributeStreamRef(0),F=c.getAttributeStreamRef(0);for(let G=f.getPathStart(_),V=f.getPathEnd(_);G<V;){if(P=$.readRange(2*G,2*k),h7(s,k,P,e),n)for(let B=0;B<k;B++){const W=B<<1,J=P[W]-e,re=xn(J),se=$.read(2*G);re*xn(se)<0&&Math.abs(J)>l&&(P[W]+=-re*o)}F.writeRangeFromArray(2*G,2*k,P,!0,1),G+=k,A-=k,k=Math.min(A,1e3)}}i.assignMove(c)}function Oj(t,e,i,s){const n=t.getPECoordSys();Number.isNaN(e)&&(e=0);const r=t.isPannable(),o=t.getOneDegreeGCSUnit(),l=360*o,c=179*o,f=256,y=new Float64Array(2*f);for(let _=0;_<s;){for(let S=_;S<s&&i[S].isNAN();++S)_++;let x=Math.min(f,s-_);if(x>0){for(let S=1,P=_+1;S<x;++S,++P)if(i[P].isNAN()){x=S;break}for(let S=0;S<x;S++){const P=S<<1;y[P]=i[_+S].x,y[P+1]=i[_+S].y}if(h7(n,x,y,e),r)for(let S=0,P=_;S<x;++S,++P){const A=S<<1,k=i[P].x,$=y[A]-e,F=xn($);F*xn(k)<0&&Math.abs($)>c&&(y[A]-=F*l)}for(let S=0;S<x;S++){const P=S<<1;i[_+S].x=y[P],i[_+S].y=y[P+1]}_+=x}}}function pye(t,e,i,s){K(0)}function mye(t,e,i){let s=e.getPointCount();if(!s)return!1;const n=e.getImpl(),r=n.getAttributeStreamRef(0);let o=null;const l=t.getInputSR(),c=t.getOutputSR();l.getVCS(),c.getVCS();const f=l.getOneDegreeGCSUnit(),y=c.getOneDegreeGCSUnit(),_=t.isVertical();_&&e.hasAttribute(1)&&(o=n.getAttributeStreamRef(1));const x=t.getDatumTransformation(),S=!!x&&x.getType()===1;if(S||o===null||(pye(o.getArray()),o=null),!x||x.count()===0){const oe=l.getGcsUnitFactor()/c.getGcsUnitFactor(),pe=(l.getPrimeMeridian()-c.getPrimeMeridian())*y,ue=-90*f,ce=90*f;let ne=0;const de=r.getArray(),Se=[0];for(let Pe=1,Re=2*s;Pe<Re;)Se[0]=de[Pe],ne|=sz(Se,ue,ce)?1:0,de[Pe]=Se[0],Pe+=2;if(pe!==0||oe!==1){ne=1;const Pe=r.getArray();for(let Re=0,Oe=2*s;Re<Oe;){let we=Pe[Re];we*=oe,we+=pe,Pe[Re]=we,Pe[Re+1]*=oe,Re+=2}}return ne!==0&&n.notifyModifiedFlags(2001),!!ne}const P=1e3;let A=Math.min(s,P);const k=new Array(A),$=new Array(A);let F=null;o!==null&&(F=new Float64Array(A));let G=0,V=Number.NaN,B=Number.NaN;const W=360*y,J=y/f;i&&(B=90*y,V=89.9*f,$.fill(0));let re=!0,se=0;for(;s;){let oe=!1;const pe=r.readRange(2*G,2*A);for(let ce=0;ce<A;ce++)k[ce]=pe[ce<<1];if(i)for(let ce=0;ce<A;ce++){const ne=1+(ce<<1),de=Math.abs(pe[ne])-V;if(de>0){const Se=pe[ne];pe[ne]=Jp(V,Se),$[ce]=Jp(de,Se),oe=!0}}const ue=pe[0];if(S){const ce=x;F&&o.queryRange(G,A,F,!0,1),ce.transform(!1,pe,F,A),F&&o.writeRangeFromArray(G,A,F,!0,1)}else x.transform(!1,pe,A);re&&(se=pe[0]-J*ue,re=!1);for(let ce=0;ce<A;ce++){const ne=ce<<1,de=pe[ne]-k[ce]*J-se;Math.abs(de)>200&&(pe[ne]+=de>0?-W:W)}if(oe){for(let ce=0;ce<A;ce++)if($[ce]){const ne=1+(ce<<1);pe[ne]+=J*$[ce],pe[ne]>B?pe[ne]=B:pe[ne]<-B&&(pe[ne]=-B)}$.fill(0)}r.writeRangeFromArray(2*G,2*A,pe,!0,1),_&&o&&o.writeRangeFromArray(G,A,F,!0,1),G+=A,s-=A,A=Math.min(s,P)}return n.notifyModifiedFlags(2001),!0}function art(t,e,i){switch(e.getGeometryType()){case me.enumLine:return lrt(t,e,i);case me.enumBezier:return hrt(t,e,i);case me.enumEllipticArc:return urt(t,e,i);case me.enumBezier2:return drt();case me.enumRationalBezier2:return frt();default:bt("")}}function eT(t,e,i){if(!e.hasNonLinearSegments())return mye(t,e,i);if(e.isEmpty())return!1;const s=e.createInstance();s.reserveParts(e.getPointCount(),e.getPathCount());const n=e.getImpl(),r=new Qt;for(let o=0,l=e.getPathCount();o<l;++o){let c=!0,f=-1;const y=n.getPathStart(o),_=y+n.getSegmentCountPath(o);n.isClosedPath(o)&&(f=_-1);const x=new Y;for(let S=y;S<_;++S){if(n.getSegmentBuffer(S,r,!1),art(t,r.get(),i),!c&&(r.get().getStartXY().equals(x)||r.get().moveTo(x)),S!==f)s.addSegment(r.get(),c);else{if(c){const P=new Ht;r.get().queryStart(P),s.startPathPoint(P)}s.closeLastPathWithSegment(r.get())}x.assign(r.get().getEndXY()),c=!1}}return e.assignMove(s),!0}function dse(t,e,i,s,n,r){if(t.isIdentityGeogToGeog()){const ue=90*t.getInputSR().getOneDegreeGCSUnit();let ce=0;const ne=[0];for(let de=0;de<s;de++)ne[0]=e[de].y,ce|=sz(ne,-ue,ue)?1:0,e[de].y=ne[0];return ce}const o=t.getInputSR(),l=t.getOutputSR(),c=o.getVCS(),f=l.getVCS(),y=o.getOneDegreeGCSUnit(),_=90*y,x=l.getOneDegreeGCSUnit(),S=t.isVertical(),P=t.getDatumTransformation(),A=!!P&&P.getType()===1;if(S||(i=null),!P||P.count()===0){let ue=0;const ce=[0];for(let ne=0;ne<s;ne++)ce[0]=e[ne].y,ue|=sz(ce,-_,_)?1:0,e[ne].y=ce[0];return ue|=Pot(o.getGCS(),c,l.getGCS(),f,e,i,s)?1:0,ue}A||i===null||pye();const k=1024;let $=Math.min(s,k);const F=new Array($),G=Vi($,0);let V=0,B=Number.NaN,W=Number.NaN;const J=360*x,re=x/y;n&&(W=90*x,B=89.9*y);let se=!0,oe=0,pe=s;for(;pe;){let ue=!1;for(let ne=0;ne<$;ne++)F[ne]=e[ne+V].x;if(n)for(let ne=0;ne<$;ne++){const de=Math.abs(e[ne+V].y)-B;if(de>0){const Se=e[ne+V].y;e[ne+V].y=Jp(B,Se),G[ne]=Jp(de,Se),ue=!0}}const ce=e[0].x;A?P.transform(!1,e,i,$):P.transform(!1,e,$),se&&(oe=e[0].x-re*ce,se=!1);for(let ne=0;ne<$;ne++){const de=e[V+ne].x-F[ne]*re-oe;Math.abs(de)>200&&(de>0?e[V+ne].x-=J:e[V+ne].x+=J)}if(ue){for(let ne=0;ne<$;ne++)G[ne]&&(e[V+ne].y+=re*G[ne],e[V+ne].y>W?e[V+ne].y=W:e[V+ne].y<-W&&(e[V+ne].y=-W));G.fill(0,0,$)}V+=$,pe-=$,$=Math.min(pe,k)}return 1}function Z2(t,e,i,s,n,r){let o=0,l=!0,c=0;for(let f=0;f<s;++f)e[f].isNAN()?l||(o|=dse(t,e.slice(c,f-c),i?i.slice(c,f-c):null,f-c,n),c=f,l=!0):l&&(c=f,l=!1);return l||(o|=dse(t,c===0?e:e.slice(c),i?c===0?i:i.slice(c):null,s-c,n)),o!==0}function lrt(t,e,i){const s=[e.getStartXY(),e.getEndXY()],n=[0,0];let r=null;e.hasAttribute(1)&&(r=n,r[0]=e.getAttributeAsDbl(0,1,0),r[1]=e.getAttributeAsDbl(1,1,0));const o=Z2(t,s,r,2,i);return e.setStartXY(s[0]),e.setEndXY(s[1]),r&&(e.setStartAttribute(1,0,r[0]),e.setEndAttribute(1,0,r[1])),e.normalizeAfterEndpointChange(),o}function urt(t,e,i){if(e.projectionBehavior()===0)return crt(t,e,i);const s=e.getStartXY().equals(e.getEndXY()),n=Ge(Y,3),r=Ge(Y,3),o=[0,0,0];let l=null;n[0].assign(e.getStartXY()),n[1].assign(s?e.getCenter():e.getEndXY());let c=!1;e.hasAttribute(1)&&(l=o,l[0]=e.getAttributeAsDbl(0,1,0),l[1]=e.getAttributeAsDbl(1,1,0),l[2]=ji(l[0],l[1],.5),s&&(l[1]=l[2])),r[0].setCoordsPoint2D(n[0]),r[1].setCoordsPoint2D(n[1]);const f=new _i;if(s||e.isDegenerateToLine())c=Z2(t,r,l,2,i),f.initializeFromTwoPoints(n[0],n[1],r[0],r[1]);else{const y=new Y;e.queryCoord2D(.5,y),n[2].setCoordsPoint2D(y),r[2].setCoordsPoint2D(y),c=Z2(t,r,l,3,i),f.setFromTwoTriangles(n,r)}return f.isIdentity()||(e.applyTransformation(f),e.setStartXY(r[0]),e.setEndXY(s?r[0]:r[1]),e.normalizeAfterEndpointChange()),l&&(e.setStartAttribute(1,0,l[0]),e.setEndAttribute(1,0,s?l[0]:l[1])),c}function crt(t,e,i){const s=[e.getStartXY(),e.getEndXY(),e.getInteriorPoint(),e.getCenter()];let n=4;e.isDegenerateToLine()&&(n=2);const r=[0,0,0,0];let o=null;if(e.hasAttribute(1)){o=r,o[0]=e.getAttributeAsDbl(0,1,0),o[1]=e.getAttributeAsDbl(1,1,0);const f=ji(o[0],o[1],.5);o[2]=f,o[3]=f}const l=e.getStartXY().equals(e.getEndXY())&&!e.isDegenerateToLine(),c=Z2(t,s,o,n,i);return l?e.constructCircleCenterAndPoint(s[3],s[0],!e.isClockwise()):e.isDegenerateToLine()?e.constructLineCircularArc(s[0],s[1]):e.constructCircularArcThreePoint(s[0],s[1],s[2]),o&&(e.setStartAttribute(1,0,o[0]),e.setEndAttribute(1,0,o[1])),c}function hrt(t,e,i){const s=Ge(Y,4);e.queryControlPoints(s);const n=[0,0,0,0];let r=null;e.hasAttribute(1)&&(r=n,r[0]=e.getAttributeAsDbl(0,1,0),r[3]=e.getAttributeAsDbl(1,1,0),r[1]=ji(r[0],r[3],.5),r[2]=r[1]);const o=Z2(t,s,r||null,s.length,i);return e.setControlPoints(s),r&&(e.setStartAttribute(1,0,r[0]),e.setEndAttribute(1,0,r[3])),e.normalizeAfterEndpointChange(),o}function drt(t,e,i){return K(0),!1}function frt(t,e,i){return K(0),!1}function prt(t,e,i){const s=[e.getStartXY(),e.getEndXY()];$j(t,s,2,i),e.setStartXY(s[0]),e.setEndXY(s[1]),e.normalizeAfterEndpointChange()}function Rj(t,e,i,s){$j(t,e,i,s)}function mrt(t,e,i){if(e.projectionBehavior()===0)grt(t,e,i);else{const s=e.isClosed()&&e.isMajor(),n=[e.getStartXY(),s?e.getCenter():e.getEndXY()],r=[n[0].clone(),n[1].clone()];Rj(t,r,2,i);const o=new _i;o.initializeFromTwoPointsArray(n,r),e.applyTransformation(o);const l=s?0:1;e.setCoordsForIntersector(r[0],r[l],!1)}}function Lj(t,e,i,s){Oj(t,e,i,s);const n=new xe;n.setFromPoints(i,s);const r=t.getOneDegreeGCSUnit(),o=360*r,l=180*r;if(n.width()>l){for(let c=0;c<s;c++)for(;i[c].x<e;)i[c].x+=o;if(n.setFromPoints(i,s),n.xmax>l+e)for(let c=0;c<s;c++)i[c].x-=o}}function gye(t,e,i,s,n){const r=Ge(Y,3);let o=0,l=!1,c=!1;const f=s.isDegenerateToLine();f?(r[0].assign(s.getStartXY()),r[1].assign(s.getEndXY()),r[2].setCoords(0,0),o=2):s.isClosed()&&s.isMajor()?(l=!0,c=!s.isClockwise(),r[0].assign(s.getStartXY()),r[1].assign(s.getCenter()),r[2].setCoords(0,0),o=2):(r[0].assign(s.getStartXY()),r[1].assign(s.getEndXY()),r[2].assign(s.getInteriorPoint()),o=3),t?Rj(e,r,o,n):Lj(e,i,r,o),f?s.constructLineCircularArc(r[0],r[1]):l?s.constructCircleCenterAndPoint(r[1],r[0],c):s.constructCircularArcThreePoint(r[0],r[1],r[2])}function grt(t,e,i){gye(!0,t,0,e,i)}function yrt(t,e,i){const s=Ge(Y,4);e.queryControlPoints(s),Rj(t,s,4,i),e.setControlPoints(s)}function vrt(t,e,i){K(0)}function _rt(t,e,i){K(0)}function LN(t,e,i){const s=O9(t),n=oie(s,O9(e)),r=oie(s,O9(i));return r===0||n>0&&r>0&&r<=n||n<0&&r<0&&r>=n}function fse(t,e,i,s){const n=new Ze;n.setCoords(e,i);const r=s.width();let o=Math.floor((t-e)/r)*r+t;const l=n.getCenter();for(;Math.abs(o-l)>Math.abs(o+r-l);)o+=r;return o}class brt extends Ca{constructor(){super(),this.m_geometryDeque=[],this.m_index=-1}next(){if(this.m_geometryDeque.length>0){this.m_index++;const e=this.m_geometryDeque[0];return this.m_geometryDeque.shift(),e}return null}getGeometryID(){return this.m_index}tick(e){this.m_geometryDeque.push(e)}tock(){return!0}getRank(){return 1}}function xrt(t,e){return t===e||t!==null&&e!==null&&t.m_csType===e.m_csType&&(t.m_WKID===0&&e.m_WKID===0?t.m_hashCode===e.m_hashCode&&t.m_canonicalWkt===e.m_canonicalWkt:t.m_WKID===e.m_WKID)}function wrt(t,e){return t===e||t!==null&&e!==null&&t.m_csType===e.m_csType&&(t.m_WKID===0&&e.m_WKID===0?t.m_csType===1?t.m_peCoordSys.isEqual(e.m_peCoordSys):t.m_peCoordSys===e.m_peCoordSys:t.m_WKID===e.m_WKID)}class Fj{constructor(e,i=!0){this.m_PCSHorizon=null,this.m_GCSHorizon=null,this.m_GCSSplitLines=null,this.m_bGCSHorisonIsInclusive=!1,this.m_oneMeterPCS=0,this.m_oneDegreeGCS=0,this.m_gcsUnitFactor=0,this.m_northPole=Y.getNAN(),this.m_southPole=Y.getNAN(),this.m_polesUpdated=0,this.m_domain=xe.constructEmpty(),this.m_primeMeridian=Number.NaN,this.m_geogToProjFactor=1,this.m_geogToProjOffset=0,this.m_geogToProjFactorsUpdated=0,this.m_oneMillimeter=0,this.m_centralMeridian=0,this.m_pPCSInfoNoDomain=null,this.m_oldWKID=-1973,this.m_vcsWKID=-1,this.m_bIsPannable=!1,this.m_bCached=!1,this.m_pannableExtent=xe.constructEmpty(),this.m_pannableExtentGCS=xe.constructEmpty(),this.m_areaOfUse=null,this.m_canonicalWkt="",this.m_peCoordSys=e,this.m_WKID=u2.getCode(e),this.m_WKID<=0?(this.m_WKID=0,this.m_canonicalWkt=Nj(e,0,!0),this.m_hashCode=$Ke(this.m_canonicalWkt)):this.m_hashCode=n2(this.m_WKID);const s=this.m_peCoordSys.getType();this.m_csType=s===zi.PE_TYPE_PROJCS?2:1,K(s===zi.PE_TYPE_PROJCS||s===zi.PE_TYPE_GEOGCS),s===zi.PE_TYPE_PROJCS&&(e.loadConstants()||Je("PeProjcs.loadConstants failed"));const n=s===zi.PE_TYPE_GEOGCS?this.m_peCoordSys:this.m_peCoordSys.getGeogcs();s!==zi.PE_TYPE_GEOGCS&&u2.getCode(n),this.m_unit=Tet(e),this.m_primeMeridian=n.getPrimem().getLongitude();{const r=n.getUnit().getUnitFactor();this.m_gcsUnitFactor=r;let o=Math.PI/(180*r);Math.abs(o-1)<1e-10&&(o=1),this.m_oneDegreeGCS=o}if(s===zi.PE_TYPE_PROJCS){const r=this.m_peCoordSys,o=r.getUnit().getUnitFactor();this.m_oneMeterPCS=1/o,this.m_oneMillimeter=.001/o,this.m_pPCSInfoNoDomain=Ha.generate(r,Ha.PE_PCSINFO_OPTION_NONE),this.m_pPCSInfoNoDomain||bt("cannot create pcs info"),this.m_bIsPannable=this.m_pPCSInfoNoDomain.isPannableRectangle(),this.m_centralMeridian=this.m_pPCSInfoNoDomain.getCentralMeridian()}else{this.m_bIsPannable=!0,this.m_polesUpdated=1,this.m_oneMeterPCS=0;const r=1/n.getUnit().getUnitFactor(),o=n.getDatum().getSpheroid().getAxis();this.m_oneMillimeter=.001/o*r,this.m_centralMeridian=0}this.m_bIsPannable&&(this.updateGCSHorizon(),this.updatePCSHorizon(),this.updatePoles(),this.updateDomain(),this.updatePannableExtent(),this.updatePannableExtentGCS())}[Symbol.dispose](){}getHashCode(){return this.m_hashCode}getPCSHorizonPannable(){return this.m_PCSHorizon}getGCSHorizonPannable(){return this.m_GCSHorizon}getPCSInfo(){return K(this.m_pPCSInfoNoDomain),this.m_pPCSInfoNoDomain}getCentralMeridian(){return this.m_centralMeridian}updateGCSHorizon(){if(this.m_peCoordSys.getType()!==zi.PE_TYPE_PROJCS)return;let e=!0;const i=this.m_peCoordSys,s=i.getGeogcs(),n=i.horizonGcsGenerate();if(!n)return;K(n.length>0);const r=n[0].getNump(),o=n[0].getKind();let l,c;e=n[0].getInclusive()>0;const f=this.getOneDegreeGCSUnit(),y=90*f,_=360*f,x=370*f,S=180*f*zi.PE_HORIZON_DELTA/Math.PI,P=xe.constructEmpty();let A=null;if(r>1){for(let k=1;k<r;k++)if(n[k].getKind()===zi.PE_HORIZON_LINE){A||(A=new vi);const $=n[k].getCoord();A.startPathCoords($[0][0],$[0][1]),A.lineToCoords($[1][0],$[1][1])}}if(o===zi.PE_HORIZON_RECT){const k=n[0].getCoord();if(P.setFromPoints([new Y(k[0][0],k[0][1]),new Y(k[1][0],k[1][1])],2),Math.abs(P.ymax-y)<1e-7*S&&(P.ymax=y),Math.abs(P.ymin+y)<1e-7*S&&(P.ymin=-y),P.width()>x){const F=-400*f,G=F+5*_;P.setCoords({xmin:F,ymin:P.ymin,xmax:G,ymax:P.ymax})}const $=new lr({env2D:P});this.m_GCSHorizon||(this.m_GCSHorizon=$,this.m_bGCSHorisonIsInclusive=e)}else{let k=this.getPCSInfo().isGcsHorizonMultiOverlap();const $=Iye(s,null,null,1),F=[],G=new Ze;for(let re=0;re<r;re++){if(n[re].getKind()!==zi.PE_HORIZON_POLY)continue;l=n[re].getSize();const se=n[re].getCoord(),oe=xe.constructEmpty();oe.setFromPoints($_(se),l),F.push(new Ze(oe.xmin,oe.xmax)),oe.width(),G.merge(F.at(-1))}let V=!1;const B=new Ze;G.width()>_&&F.length>1?(B.vmin=this.getCentralMeridian()-_,B.vmax=B.vmin+2*_,V=!0,k=!0):(B.vmin=G.vmin,B.vmax=B.vmin+_);const W=re=>{let se=0;for(;F[re].vmin+se<B.vmin;)se+=_;for(;F[re].vmax+se-_>B.vmin;)se-=_;return se};let J=new Wt;if(k){const re=new brt,se=new jy().executeMany(re,$,null);for(let oe=0;oe<r;oe++){if(n[oe].getKind()!==zi.PE_HORIZON_POLY)continue;l=n[oe].getSize();const pe=n[oe].getCoord();c=n[oe].getInclusive()>0;const ue=new Wt;if(ue.addPathPoint2D($_(pe),l-1,!0),V){const ce=W(oe),ne=F[oe].clone();ne.move(ce);let de=ce;const Se=new _i;do{Se.setShiftCoords(de,0);const Pe=ue.clone();Pe.applyTransformation(Se),re.tick(Pe),re.tock(),de+=_,ne.move(_)}while(ne.vmin<B.vmax)}else re.tick(ue),se.tock()}J=se.next()}else{J=new Wt;for(let re=0;re<r;re++){if(n[re].getKind()!==zi.PE_HORIZON_POLY)continue;l=n[re].getSize();const se=n[re].getCoord();if(c=n[re].getInclusive()>0,K(c===e),V){const oe=new Wt;oe.addPathPoint2D($_(se),l-1,!0);const pe=W(re),ue=F[re].clone();ue.move(pe);let ce=pe;const ne=new _i;do{if(ce!==0){ne.setShiftCoords(ce,0);const de=new Wt({copy:oe});de.applyTransformation(ne),J.addPath(de,0,!0)}else J.addPath(oe,0,!0);ce+=_,ue.move(_)}while(ue.vmin<B.vmax)}else J.addPathPoint2D($_(se),l-1,!0)}}V&&(J=new Y2().execute(J,new xe(B.vmin,-y-f,B.vmax,y+f),$,null)),e?new X2().accelerateGeometry(J,$,1):new c7().accelerateGeometry(J,$,1),new lye().accelerateGeometry(J,$,1),this.m_GCSHorizon===null&&(this.m_GCSHorizon=J,this.m_bGCSHorisonIsInclusive=e,this.m_GCSSplitLines=A)}}updateAreaOfUse(){return null}updatePCSHorizon(){if(this.m_peCoordSys.getType()!==zi.PE_TYPE_PROJCS)return;const e=this.m_peCoordSys.horizonPcsGenerate();if(!e)return;let i;this.getPCSInfo();const s=e[0].getKind();e[0].getInclusive();const n=xe.constructEmpty(),r=e[0].getNump();let o=!1;if(s===zi.PE_HORIZON_RECT){const l=e[0].getCoord();n.setFromPoints($_(l),2),i=new lr({env2D:n})}else{let l=-1;for(let _=0;_<r;_++)e[_].getKind()===zi.PE_HORIZON_POLY&&(l=_);K(l>=0);const c=e[l].getSize()-1,f=e[l].getCoord(),y=new Wt;i=y,y.addPathPoint2D($_(f),c,!0),o=!0}if(this.getPCSInfo().isDensificationNeeded()){K(s!==zi.PE_HORIZON_RECT);const l=1e5*this.getOneMeterPCSUnit();i=new V0().execute(i,l,0,0,null)}if(o){{const l=new lr;i.queryEnvelope(l),i.calculateArea2D(),i.calculateLength2D(),i.getExteriorRingCount()}new X2().accelerateGeometry(i,null,1)}this.m_PCSHorizon===null&&(this.m_PCSHorizon=i)}updatePannableExtent(){const e=this.m_peCoordSys.getType();if(e===zi.PE_TYPE_PROJCS){const i=this.m_peCoordSys,s=this.getPCSInfo().getCentralMeridian(),n=i.getGeogcs();n||bt("");const r=[s+1/n.getUnit().getUnitFactor()*Math.PI,0];Za.geogToProj(i,1,r);const o=r[0],l=i.getParameters()[zi.PE_PARM_X0].getValue(),c=this.getPCSHorizon(),f=xe.constructEmpty();c.queryEnvelope(f);const y=Math.abs(o-l),_=y+l,x=-1*y+l,S=f.ymax,P=f.ymin;this.m_pannableExtent.setCoords({xmin:x,ymin:P,xmax:_,ymax:S})}else if(e===zi.PE_TYPE_GEOGCS){const i=1/this.m_peCoordSys.getUnit().getUnitFactor()*Math.PI;this.m_pannableExtent.setCoords({xmin:-i,ymin:-i/2,xmax:i,ymax:i/2})}else bt("")}updatePannableExtentGCS(){const e=this.m_peCoordSys.getType();if(e===zi.PE_TYPE_PROJCS){const i=this.m_peCoordSys,s=this.m_centralMeridian,n=i.getGeogcs();n||bt("");const r=1/n.getUnit().getUnitFactor()*Math.PI,o=this.getGCSHorizon(),l=xe.constructEmpty();o.queryEnvelope(l),this.m_pannableExtentGCS.setCoords({xmin:s-r,ymin:l.ymin,xmax:s+r,ymax:l.ymax})}else if(e===zi.PE_TYPE_GEOGCS){const i=1/this.m_peCoordSys.getUnit().getUnitFactor()*Math.PI;this.m_pannableExtentGCS.setCoords({xmin:-i,ymin:-i/2,xmax:i,ymax:i/2})}else bt("")}updateDomain(){if(this.m_csType===1){const e=400*this.getOneDegreeGCSUnit();this.m_domain=xe.construct(-e,-e,e,e)}else{K(this.m_csType===2);const e=Ha.generate(this.m_peCoordSys,Ha.PE_PCSINFO_OPTION_DOMAIN);e||bt("generate pcs info failed");const i=new xe(e.getDomainMinx(),e.getDomainMiny(),e.getDomainMaxx(),e.getDomainMaxy());this.m_domain.isEmpty()&&this.m_domain.setCoords({env2D:i})}}updatePoles(){if(this.m_peCoordSys.getType()===zi.PE_TYPE_PROJCS){const e=90*this.getOneDegreeGCSUnit(),i=[[0,e],[0,-e]];Za.geogToProj(this.m_peCoordSys,2,i);const s=this.getPCSInfo().getNorthPoleLocation()!==Ha.PE_POLE_OUTSIDE_BOUNDARY,n=this.getPCSInfo().getSouthPoleLocation()!==Ha.PE_POLE_OUTSIDE_BOUNDARY;this.m_polesUpdated||(s&&this.m_northPole.setCoords(i[0][0],i[0][1]),n&&this.m_southPole.setCoords(i[1][0],i[1][1]),this.m_polesUpdated=1)}else this.m_polesUpdated=1}updateGeogToProjFactors(){if(this.m_peCoordSys.getType()===zi.PE_TYPE_PROJCS){const e=this.getOneDegreeGCSUnit(),i=this.m_pPCSInfoNoDomain.getCentralMeridian(),s=[0,0,0,0];s[0]=i,s[1]=0,s[2]=i+e,s[3]=0;const n=Za.geogToProj(this.m_peCoordSys,2,s);K(n===2);const r=(s[2]-s[0])/e,o=s[0];this.m_geogToProjFactorsUpdated===0&&(this.m_geogToProjFactor=r,this.m_geogToProjOffset=o,this.m_geogToProjFactorsUpdated=1)}else this.m_geogToProjFactorsUpdated=1}getOneMeterPCSUnit(){return this.m_oneMeterPCS}getOneDegreeGCSUnit(){return this.m_oneDegreeGCS}getGcsUnitFactor(){return this.m_gcsUnitFactor}getUnitsPerMillimeter(){return this.m_oneMillimeter}getGCSSplitLines(){return this.m_bIsPannable?null:(this.m_GCSHorizon||this.updateGCSHorizon(),this.m_GCSSplitLines)}getGCSHorizon(){return this.m_bIsPannable?this.getGCSHorizonPannable():(this.m_GCSHorizon!==null||this.updateGCSHorizon(),this.m_GCSHorizon)}getGCSHorisonIsInclusive(){return this.m_bIsPannable||this.getGCSHorizon(),this.m_bGCSHorisonIsInclusive}getPCSHorizon(){return this.m_bIsPannable?this.getPCSHorizonPannable():(this.m_PCSHorizon!==null||this.updatePCSHorizon(),this.m_PCSHorizon)}getPole(e){return this.m_bIsPannable||this.m_polesUpdated!==0||this.updatePoles(),e?this.m_southPole:this.m_northPole}getGeogToProjFactors(){return this.m_geogToProjFactorsUpdated===0&&this.updateGeogToProjFactors(),rr(this.m_geogToProjFactor,this.m_geogToProjOffset)}getDomainXY(){if(this.m_bIsPannable)return this.m_domain.clone();let e=!1;return e=this.m_domain.isEmpty(),e&&this.updateDomain(),this.m_domain.clone()}getPrimeMeridian(){return this.m_primeMeridian}getLatestID(){return this.m_WKID}getOldID(){let e=this.m_oldWKID;if(e<0){if(e=0,this.m_WKID>0){const i=[0],s=[0];xot(this.m_peCoordSys.getType(),this.m_WKID,i,s)||bt("query_code_change"),e=i[0]}this.m_oldWKID=e}return e}isCustomWkid(){return!1}isPannable(){return this.m_bIsPannable}getPannableExtent(){return this.m_pannableExtent.clone()}getPannableExtentGCS(){return this.m_pannableExtentGCS.clone()}getAreaOfUse(){return this.m_areaOfUse!==null?this.m_areaOfUse:this.updateAreaOfUse()}getVcsCode(){return 0}saveMemory(){}getCSType(){return this.m_csType}getUnit(){return this.m_unit}setCached(){this.m_bCached=!0}getCached(){return this.m_bCached}static equal(e,i){return!1}static equal_for_projection(e,i){return!1}}function FN(t,e,i,s){return Srt(!0,t,e,i,s)}function Srt(t,e,i,s,n,r){return new zj(2,e,i,s,n,r)}function Ert(){return{centralMeridianOfOutputGCS:Number.NaN,densificationStep:Number.NaN,clipWithInputHorizon:!0,clipWithOutputHorizon:!0,legacyHorizonClipping:!1,normalizeResultGeometry:!1,equals(t){return ga(this.centralMeridianOfOutputGCS,t.centralMeridianOfOutputGCS)&&ga(this.densificationStep,t.densificationStep)&&this.clipWithInputHorizon===t.clipWithInputHorizon&&this.clipWithOutputHorizon===t.clipWithOutputHorizon&&this.legacyHorizonClipping===t.legacyHorizonClipping&&this.normalizeResultGeometry===t.normalizeResultGeometry}}}function Crt(){return{flagsMask:0,setFlag(t,e){e?this.flagsMask|=t:this.flagsMask&=~t},hasFlag(t){return!!(this.flagsMask&t)}}}function Nz(){return{m_extendedParams:Ert(),m_extendedParamsInternal:Crt()}}function zN(){return Nz()}class zj{constructor(e,i,s,n,r,o){let l,c;this.m_datumTran=null,this.m_bIdentity=!0,this.m_bIdentityGeogToGeog=!0,this.m_bVertical=!1,this.m_bNormalize=!1,i&&s||Je("!inputSR || !outputSR"),n&&n.getType()===0&&(n.m_bReadOnly=!0),this.m_bNormalize=!1,e!==1&&(l=i.getVCS(),c=s.getVCS(),this.m_bVertical=l!=null&&c!=null),this.m_inputSR=i,this.m_outputSR=s,this.m_bIdentity=!1,this.m_bIdentityGeogToGeog=!1,K(!this.m_params),r&&(this.m_params=Nz(),this.m_params.m_extendedParams=r),o&&(this.m_params||(this.m_params=Nz()),this.m_params.m_extendedParamsInternal=o);let f=!1;const y=n!=null,_=i.getCoordinateSystemType(),x=s.getCoordinateSystemType();if(s.isPannable()&&_!==0&&r){const A=r.centralMeridianOfOutputGCS;if(!Number.isNaN(A)&&s.isPannable()){const k=s.getPannableExtent(),$=k.getCenterX();if($!==A){const F=Math.ceil(k.width());A+F!==$+F&&(f=!0)}}}const S=r&&r.normalizeResultGeometry;if(i.equals(s))return this.m_bIdentity=!f,this.m_bIdentityGeogToGeog=!0,void this.updateProjector();const P=!y&&i.equalForProjection(s,this.m_bVertical);this.m_bIdentity=P&&!f,this.m_bIdentity?this.m_bIdentityGeogToGeog=!0:_!==0&&x!==0&&(S&&this.m_outputSR.isPannable()&&(this.m_bNormalize=S),this.m_datumTran=n||null,this.m_bIdentityGeogToGeog=(!this.m_datumTran||this.m_datumTran.count()===0)&&this.m_inputSR.getGCS().equalForProjection(this.m_outputSR.getGCS(),this.m_bVertical)),this.updateProjector()}getInputSR(){return this.m_inputSR}getOutputSR(){return this.m_outputSR}getDatumTransformation(){return this.m_datumTran}getInverse(){var i;const e=new zj(1,this.m_outputSR,this.m_inputSR,(i=this.m_datumTran)==null?void 0:i.createInverse());return e.m_bIdentity=this.m_bIdentity,e.m_bVertical=this.m_bVertical,e.m_bIdentityGeogToGeog=this.m_bIdentityGeogToGeog,e.updateProjector(),e}isIdentity(){return this.m_bIdentity}getExtendedParams(){return this.m_params?this.m_params.m_extendedParams:zN().m_extendedParams}equals(e){return K(0),!1}isVertical(){return this.m_bVertical}isMatchingTransformation(e,i){return K(0),!1}getGeographicTransformations(){return this.m_datumTran}getExtendedParamsImpl(){return this.m_params?this.m_params.m_extendedParams:zN().m_extendedParams}getExtendedParamsInternal(){return this.m_params?this.m_params.m_extendedParamsInternal:zN().m_extendedParamsInternal}isIdentityGeogToGeog(){return this.m_bIdentityGeogToGeog}normalizeOutput(){return this.m_bNormalize}updateProjector(){this.m_projector=new Wst(this)}}const yye=new Map,KE=new Map,$z=new Map;function Prt(t){let e=t.getCode();if(e>0)return vye(e)||pse(u2.coordsys(e));const i=t.getName();if(KE.has(i)){const s=KE.get(i);if(s&&s.deref()){const n=s.deref();if(n.m_peCoordSys.isEqual(t))return n}}return e=u2.getCode(t),pse(e>0?u2.coordsys(e):t)}function Trt(t){KE.delete(t.m_peCoordSys.getName()),$z.delete(Nj(t.m_peCoordSys,0,!1))}let qN;function Irt(){return qN||(qN=u2.unit(9001)),qN}function pse(t){const e=$ye(t),i=t.getCode();if(i>0){const l=vye(i);if(l)return l}const s=t.getName();let n=KE.get(s);if(n){const l=n.deref();if(l&&l.m_peCoordSys.isEqual(t))return l}const r=new Fj(e.release());if(i>0)return r.setCached(),yye.set(i,new WeakRef(r)),KE.set(s,new WeakRef(r)),r;const o=Nj(t,0,!1);if(n=$z.get(o),n){const l=n.deref();if(l)return l}return r.setCached(),$z.set(o,new WeakRef(r)),r}function vye(t){const e=yye.get(t);if(e)return e.deref()}class JE extends Mge{constructor(e){return e===void 0?(super(),this.m_wkid=9001,void(this.m_peUnit=null)):typeof e=="number"?(super(),this.m_factor=e,void(this.m_wkid=0)):(super(e),void(e||(this.m_factor=1,this.m_wkid=9001,this.m_peUnit=Irt())))}getUnitType(){return 0}convertFromMeters(e){return e/this.getUnitToBaseFactor()}convertToMeters(e){return e*this.getUnitToBaseFactor()}}function Mrt(t,e=!0){return K(0),{}}function Art(t,e,i,s,n,r){const o=.5*(s.sub(e).length()+s.sub(i).length());t.m_center.assign(s),t.m_startAngle=Math.atan2(e.y-t.m_center.y,e.x-t.m_center.x),Drt(t,Math.atan2(i.y-t.m_center.y,i.x-t.m_center.x),n,r);const l=t.constructEllipticArcEndPointsCenter(e,i,o,1,0,Math.abs(t.m_sweepAngle)>Math.PI,t.m_sweepAngle>0,s);return t.setProjectionBehavior(0),l}function Drt(t,e,i,s){let n=t.m_startAngle,r=t.m_sweepAngle;const o=1e-12;for(;n>ki();)n-=2*ki();for(;n<=-ki();)n+=2*ki();if(!Number.isNaN(e)){for(;e>ki();)e-=2*ki();for(;e<=-ki();)e+=2*ki();!i&&e>n&&(e-=2*ki()),i&&e<n&&(e+=2*ki()),r=e-n,Math.abs(r)<o&&!s&&(r=i?2*ki():-2*ki()),Math.abs(r)>2*ki()-o&&s&&(r=0)}Math.abs(r)>2*ki()-o&&(r=r>=0?2*ki():-2*ki(),t.setEndXY(t.getStartXY())),Math.abs(r)<o&&(r=0,t.setEndXY(t.getStartXY())),s=Math.abs(r)<=ki(),r&&(i=r>0),t.m_startAngle=By(n),t.m_sweepAngle=r,J2(t,!s),d7(t,i)}function krt(t,e,i,s){const n=[];return Nrt(e,n),$rt(t,n,e,i)}function Nrt(t,e){e.length=t;for(let i=0;i<e.length;++i)e[i]=i;t>3&&gJe(t,e)}function $rt(t,e,i,s,n){let r=0;const o=[0,0,0];let l=0;const c=3;let f=0;for(let y=0;y<c;++y){let _=!1;for(;f<i;){const x=t.at(e[f]);let S=1;if(r===3?S=Y.inCircleRobust(t.at(s[0]),t.at(s[1]),t.at(s[2]),x):r===2?S=Y.inCircleRobust3Point(t.at(s[0]),t.at(s[1]),x):r===1&&x.equals(t.at(s[0]))&&(S=0),S<=0){if(S<0&&y+1<c){e[l]=St(e[f],e[f]=e[l]);for(let A=0;A<r;A++)if(s[A]===e[f]){o[A]=f;break}l++}f++;continue}_=!0;let P=0;for(let A=0;A<r;A++)o[A]>f&&(s[P]=s[A],o[P]=o[A],P++);r=P,s[r]=e[f],o[r]=f,r++,r<3?f=l:(Y.orientationRobust(t.at(s[0]),t.at(s[1]),t.at(s[2]))===1&&(s[2]=St(s[0],s[0]=s[2]),o[2]=St(o[0],o[0]=o[2])),f++)}if(!_)break;if(y+1<c){l=0;let x=!1;for(let S=0;S<r;S++)for(let P=S+1;P<r;P++)o[S]>o[P]&&(o[P]=St(o[S],o[S]=o[P]),s[P]=St(s[S],s[S]=s[P]),x=!0);for(let S=0;S<r;S++)e[o[S]]=St(e[S],e[S]=e[o[S]]),o[S]=S;x&&r===3&&Y.orientationRobust(t.at(s[0]),t.at(s[1]),t.at(s[2]))===1&&(s[2]=St(s[0],s[0]=s[2]),o[2]=St(o[0],o[0]=o[2]))}f=r}return r}function Ort(){return{e2:0,completeE:0}}class Rrt{constructor(e,i){this.m_arc=e,this.m_sqrChordLength=i}getMaxDerivative(){return 1}getValue(e,i){return e===0?Y.sqrDistance(this.m_arc.getCoord2D(i),this.m_arc.getCoord2D(1-i))-this.m_sqrChordLength:0}getError(e){return K(0),0}}function Lrt(t,e,i){if(rn(t))Dge(new si({start:t.getStartXY(),end:t.getEndXY()}),e,i);else if(e.value()===0)i.set(t.getStartXY());else if(e.value()===1)i.set(t.getEndXY());else{const s=new Be;zrt(t,e,s);const n=new Be,r=new Be;Be.st_cosAndSin(s,n,r);const o=Bt.constructCoordsE(new Be(t.m_semiMajorAxis).mulThisE(n),new Be(t.m_semiMajorAxis).mulThis(t.m_minorMajorRatio).mulThisE(r)),l=new Be(t.m_rotation);Be.st_cosAndSin(l,n,r),o.rotateDirect(n,r),o.addThisE(Bt.constructPoint2D(t.m_center)),i.setE(o)}}function VN(t,e){return t.convertToCanonic(e)}function Frt(t,e){const i=new Ze(t.getStartAngle(),t.getEndAngle());i.normalize();const s=Vo(),n=Mg(e,s);if(n<i.vmin){let r=n+s;for(;r<i.vmin;)r+=s;return i.containsCoordinate(r)?r:i.vmin-n<r-i.vmax?n:r}if(n>i.vmax){let r=n-s;for(;r>i.vmax;)r-=s;return i.containsCoordinate(r)||i.vmin-r<n-i.vmax?r:n}return n}function By(t){let e=t,i=!1;return e<=-ki()?(e+=Vo(),i=!0):e>ki()&&(e-=Vo(),i=!0),e<=-ki()?(e=Mg(e,Vo()),e<=-ki()&&(e+=Vo()),i=!0):e>ki()&&(e=Mg(e,Vo()),e>ki()&&(e-=Vo()),i=!0),i&&(e>ki()||e<=-ki())&&(e=ki()),e}function mse(t,e,i){const s=i,n=s.getSemiAxes();let r=new Y(n.x*Math.cos(t[0]),n.y*Math.sin(t[0]));return r=s.convertFromCanonic(r),Y.sqrDistance(r,s.getStartXY())}function gse(t,e,i){const s=i,n=s.getSemiAxes(),r=t[0]+s.getStartAngle();let o=new Y(n.x*Math.cos(r),n.y*Math.sin(r));return o=s.convertFromCanonic(o),Y.sqrDistance(o,s.getEndXY())}function Oz(t){if(t.m_center.isNAN())return t.m_startAngle=0,void(t.m_sweepAngle=0);const e=t.getStartXY(),i=t.getEndXY(),s=e.equals(i),n=Gj(t),r=K2(t),o=t.projectionBehavior();if(s){const l=t.convertToCanonic(e),c=new Y(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);l.x/=c.x,l.y/=c.y,t.m_startAngle=By(Math.atan2(l.y,l.x)),t.m_sweepAngle=n?r?Vo():-Vo():0}else{const l=t.convertToCanonic(e),c=new Y(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);l.x/=c.x,l.y/=c.y;const f=t.convertToCanonic(i);f.x/=c.x,f.y/=c.y,t.m_startAngle=Math.atan2(l.y,l.x),t.m_sweepAngle=Y.calculateAngle(l,f),r?t.m_sweepAngle<0&&(t.m_sweepAngle+=Vo()):t.m_sweepAngle>0&&(t.m_sweepAngle-=Vo()),t.m_startAngle=By(t.m_startAngle);let y=mse([t.m_startAngle],1,t);if(y=Math.sqrt(y),y>.25*nf(t)){const x=t.m_startAngle-1e-4,S=t.m_startAngle+1e-4,P=[0];xte(mse,t,1,[t.m_startAngle],[x],[S],1e-14,P),t.m_startAngle=By(P[0])}if(y=gse([t.m_sweepAngle],1,t),y=Math.sqrt(y),y>.25*nf(t)){const x=t.m_sweepAngle-1e-4,S=t.m_sweepAngle+1e-4,P=[0];xte(gse,t,1,[t.m_sweepAngle],[x],[S],1e-14,P),t.m_sweepAngle=P[0]}const _=Math.abs(t.m_sweepAngle)>ki();if(J2(t,_),n!==_&&!n&&Math.abs(t.m_sweepAngle)>1.5*ki()||t.m_sweepAngle===0||r!==t.m_sweepAngle>0)return void jc(t,e,i,o)}}function Tn(t,e){return(Frt(t,e)-t.getStartAngle())/t.getSweepAngle()}function Ud(t,e){return t.m_startAngle+e*t.m_sweepAngle}function zrt(t,e,i){i.assign(new Be(t.m_startAngle).addE(e.mulE(new Be(t.m_sweepAngle))))}function qrt(t,e){const i=new Be(t.m_cosr).sqrThis(),s=new Be(t.m_sinr).sqrThis(),n=new Be(t.m_minorMajorRatio),r=new Be(1/t.m_minorMajorRatio),o=n.mulE(i).addThisE(r.mulE(s)),l=n.subE(r).mulThis(2*t.m_cosr*t.m_sinr),c=n.mulE(s).addThisE(r.mulE(i));e[0]=o,e[1]=l,e[2]=c,e[3]=new Be(-t.m_semiMajorAxis).mulThis(t.m_semiMajorAxis).mulThis(t.m_minorMajorRatio)}function Vrt(t,e){const i=new DE;i.a11.setE(t[0]),i.a12=Be.st_mulByPower2(t[1],.5),i.a21.setE(i.a12),i.a22.setE(t[2]);const s=[Y.getNAN(),Y.getNAN()],n=[new Be,new Be];i.eigenSymmetric(n,s);const r=t[3].clone();return r.negateThis(),r.invThis(),n[0].mulThisE(r),n[1].mulThisE(r),n[0].sqrtThis().invThis(),n[1].sqrtThis().invThis(),e.x=n[0].toDouble(),e.y=n[1].toDouble(),Math.atan2(s[0].y,s[0].x)}function Grt(t,e,i){if(rn(t))return(i-e)*Y.distance(t.getStartXY(),t.getEndXY());if(t.m_minorMajorRatio===1)return Math.abs(t.getSweepAngle()*(e-i))*t.m_semiMajorAxis;const s=Rz(t,e);return Rz(t,i)-s}function GN(t){return t.m_cachedValues}function qj(t){if(t.m_cachedValues)return t.m_cachedValues;const e=Ort();return e.e2=Brt(t),e.completeE=uj(e.e2),t.m_cachedValues=e,e}function yse(t,e,i,s){if(!e.isEqual(t.m_XStart,t.m_YStart)||!i.isEqual(t.m_XEnd,t.m_YEnd)){if(rn(t))return t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,t.m_YEnd=i.y,US(t),void t.afterCompletedModification();if(s&&Math.abs(t.getSweepAngle())<=1.01*_a()){const n=Ge(Y,3),r=wye(t,n);if(n7(n)){if(n[0].assign(e),n[2].assign(i),G2(n),t.projectionBehavior()===0){let o=0,l=2;Y.sqrDistance(n[1],n[0])<Y.sqrDistance(n[1],n[2])&&(l=St(o,o=l));const c=n[l].sub(n[o]),f=c.length();c.divThis(f);const y=n[1].sub(n[o]),_=y.length(),x=y.dotProduct(c)/_,S=y.crossProduct(c)/_,P=new Y;ar(n[o],n[l],.5,P);const A=.5*f/S*cn(1-x,0,1),k=n[1].side(n[o],n[l]),$=c.clone();k?$.leftPerpendicularThis():$.rightPerpendicularThis();const F=P.sub($.mul(A));t.constructCircularArcThreePoint(n[0],n[2],F)}else f7(n,r*r,null,!1,t);return}}t.projectionBehavior()===0?Jrt(t,e,i):Eye(t,e,i)}}function jrt(t,e,i){const s=t.projectionBehavior()===0;if(i<=2)return void jc(t,e[0],e[i-1],s?0:1);if(s){t.constructCircularArcThreePoint(e[0],e[i-1],e[Math.trunc(i/2)]);const P=new Y;return t.queryCoord2D(.5,P),void t.m_interior.setCoordsPoint2D(P)}const n=t.getSemiMajorAxis(),r=t.getMinorMajorRatio(),o=t.getAxisXRotation(),l=t.getCenter(),c=new Array(4);c[0]=t.isMajor(),c[1]=!c[0],c[2]=c[0],c[3]=!c[0];const f=new Array(4);f[0]=t.isClockwise(),f[1]=f[0],f[2]=!f[0],f[3]=!f[0];const y=Math.trunc(i<5?1:(i+4)/5),_=Ge(zu,4),x=new Array(4);let S=0;for(let P=0;P<4;P++){_[P].constructEllipticArcEndPointsCenter(e[0],e[i-1],n,r,o,c[P],f[P],l),x[P]=0;let A=0;for(let k=y;k<i-1;k+=y){const $=_[P].getClosestCoordinate(e[k],!1);x[P]+=Y.sqrDistance(_[P].getCoord2D($),e[k]),A++}x[P]/=A,x[P]<x[S]&&(S=P)}t.assignCopy(_[S])}function Brt(t){return 1-Ui(t.m_minorMajorRatio)}function vse(t,e,i,s,n,r,o,l,c){return t.m_bits=0,t.m_rotation=r,yj(t,e),vj(t,i),t.m_cosr=Math.cos(r),t.m_sinr=Math.sin(r),J2(t,o),d7(t,l),c!==void 0?t.m_center.assign(c):t.m_center.setNAN(),t.setProjectionBehavior(1),t.m_semiMajorAxis=s,t.m_minorMajorRatio=n,xye(t,c===void 0)}function jc(t,e,i,s){t.m_bits=0,t.m_rotation=0,yj(t,e),vj(t,i),t.m_interior.assign(e.add(i).mul(.5)),t.m_startAngle=0,t.m_sweepAngle=0,t.m_cosr=1,t.m_sinr=0,J2(t,!1),d7(t,!1),t.m_center.setNAN(),t.m_semiMajorAxis=1,t.m_minorMajorRatio=0,t.setProjectionBehavior(s),t.afterCompletedModification()}function rn(t){return t.m_center.isNAN()}function Rz(t,e){if(e===0)return 0;const i=qj(t),s=Ud(t,e),n=_a(),r=_ye(t),o=cj(s+n,i.e2,i.completeE),l=t.m_semiMajorAxis*(o-r);return Math.abs(l)}function Hrt(t,e){if(rn(t)){const c=Y.distance(t.getStartXY(),t.getEndXY());return c===0?0:e/c}if(t.m_minorMajorRatio===1){const c=Math.abs(t.getSweepAngle()*t.m_semiMajorAxis);return c===0?0:e/c}if(e===0)return 0;const i=t.getSweepAngle();if(i===0)return .5;const s=qj(t),n=_a(),r=_ye(t);i<0&&(e=-e);const o=e/t.m_semiMajorAxis+r;let l=bKe(o,s.e2,s.completeE);return l-=n,l-=t.getStartAngle(),l/i}function _ye(t){const e=qj(t);return cj(t.getStartAngle()+_a(),e.e2,e.completeE)}function Vj(t,e,i){if(e instanceof vJe)return void K(0);if(K(!bye(t)),e.isIdentity())return;F9(t);const s=Y.getNAN();s.x=t.m_XStart,s.y=t.m_YStart,e.transformInPlace(s);const n=Y.getNAN();if(n.x=t.m_XEnd,n.y=t.m_YEnd,e.transformInPlace(n),rn(t))return t.m_XStart=s.x,t.m_YStart=s.y,t.m_XEnd=n.x,void(t.m_YEnd=n.y);const r=t.m_center.clone();if(e.transformInPlace(r),i||e.isUniformNoRotation()){let o=K2(t);if(e.isReflective()&&(o=!o),t.projectionBehavior()===0){if(!s.equals(n)){const _=t.m_interior.clone();return e.transformInPlace(_),void t.constructCircularArcThreePoint(s,n,_)}return void Art(t,s,n,r,o,!1)}const l=new Y(t.m_cosr,t.m_sinr);e.transformWithoutTranslateInPlace(l);const c=Math.atan2(l.y,l.x),f=t.getSemiAxes();e.transformWithoutTranslateInPlace(f);const y=t.m_center.clone();return e.transformInPlace(y),void t.constructEllipticArcEndPointsCenter(s,n,f.x,f.y/f.x,c,t.isMajor(),o,y)}{{const _=new Array(4);qrt(t,_);const x=new DE;if(x.a11.setE(_[0]),x.a12.setE(_[1]),x.a12.mulThisByPower2(.5),x.a21.setE(x.a12),x.a22.setE(_[2]),!x.det().isZero()){const S=new DE;if(S.a11.set(e.xx),S.a12.set(e.xy),S.a21.set(e.yx),S.a22.set(e.yy),S.invertThis()){const P=S.clone();P.transposeThis();const A=x.clone();if(A.mulThis(S),A.mulLeftThis(P),!A.det().isZero()){const k=Ge(Be,4);k[0].setE(A.a11),k[1].setE(A.a12),k[1].mulThisByPower2(2),k[2].setE(A.a22),k[3].setE(_[3]);const $=Y.getNAN(),F=Vrt(k,$);let G=K2(t);return e.isReflective()&&(G=!G),void t.constructEllipticArcEndPointsCenter(s,n,$.x,$.y/$.x,F,t.isMajor(),G,r)}}}}const o=[Y.getNAN(),Y.getNAN(),Y.getNAN()];o[0].setCoords(t.getSemiMajorAxis(),0),o[0].rotateDirect(t.m_cosr,t.m_sinr),o[1].setCoords(t.getSemiMajorAxis(),t.getSemiMinorAxis()),o[1].rotateDirect(t.m_cosr,t.m_sinr),o[2].setCoords(0,t.getSemiMinorAxis()),o[2].rotateDirect(t.m_cosr,t.m_sinr);let l=t.isClockwise();l&&(o[2]=St(o[0],o[0]=o[2]));const c=.5;e.transformWithoutTranslateArray(o,3,o),e.isReflective()&&(l=!l);const f=new Y(0,0),y=t.createInstance();f7(o,c,f,!1,y),t.constructEllipticArcEndPointsCenter(s,n,y.getSemiMajorAxis(),y.getMinorMajorRatio(),y.getAxisXRotation(),t.isMajor(),!l,r)}}function jN(t,e){t.m_cachedValues=e}function F9(t){t.m_cachedValues=null}function d7(t,e){const i=e?1:0;t.m_bits=-2&t.m_bits|i}function K2(t){return!!(1&t.m_bits)}function J2(t,e){const i=e?1:0;t.m_bits=-3&t.m_bits|i<<1}function Gj(t){return!!(2&t.m_bits)}function Urt(t){if(t.m_center.isNAN())return!1;const e=8,i=new Bt;i.setWithEps(t.getStartXY(),e),i.subThisE(new Bt().setWithEps(t.m_center,e));const s=new Be;s.setWithEps(t.m_rotation,e);const n=new Be,r=new Be;Be.st_cosAndSin(s,n,r),i.rotateReverse(n,r);const o=new Bt;o.setWithEps(t.getEndXY()),o.subThisE(Bt.constructPoint2D(t.m_center)),o.rotateReverse(n,r);const l=new Be;l.setWithEps(t.m_semiMajorAxis,e);const c=l.clone(),f=new Be;f.setWithEps(t.m_minorMajorRatio),c.mulThisE(f),i.x.divThisE(l),i.y.divThisE(c),o.x.divThisE(l),o.y.divThisE(c);const y=i.x.sqr().addThisE(i.y.sqr()).subThisE(Kp),_=o.x.sqr().addThisE(o.y.sqr()).subThisE(Kp);return!y.isZero()||!_.isZero()}function bye(t){return!!(8&t.m_bits)}function z9(t){t.m_bits&=-9}function xye(t,e){z9(t);const i=t.getStartXY(),s=t.getEndXY();let n=!1;const r=Gj(t),o=K2(t),l=t.projectionBehavior(),c=i.equals(s);let f=t.m_minorMajorRatio===0||t.m_semiMajorAxis===0;if(Number.isNaN(t.m_minorMajorRatio)&&(t.m_semiMajorAxis===0?t.m_minorMajorRatio=1:hge("NAN minor major ratio and non-zero major axis")),f||(f=e?c:t.m_center.isNAN()),f)return jc(t,i,s,l),!0;t.m_semiMajorAxis=Math.abs(t.m_semiMajorAxis),t.m_minorMajorRatio=Math.abs(t.m_minorMajorRatio),t.m_minorMajorRatio>1&&(t.m_semiMajorAxis*=t.m_minorMajorRatio,t.m_minorMajorRatio=1/t.m_minorMajorRatio);const y=new Y(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);if(c){const _=t.convertToCanonic(i);_.x/=y.x,_.y/=y.y;const x=Math.sqrt(Ui(_.x)+Ui(_.y));if(n=x!==1,t.m_semiMajorAxis*=x,y.mulThis(x),t.m_startAngle=By(Math.atan2(_.y,_.x)),!r)return t.m_interior.assign(i),t.m_sweepAngle=0,t.afterCompletedModification(),n;t.m_sweepAngle=o?Vo():-Vo()}else{let _=t.m_center.isNAN()||Urt(t);if(!_){const x=t.convertToCanonic(i);x.x/=y.x,x.y/=y.y;const S=new Y(1,0);t.m_startAngle=Y.calculateAngle(S,x);const P=t.convertToCanonic(s);P.x/=y.x,P.y/=y.y,t.m_sweepAngle=Y.calculateAngle(x,P),_=!_se(t)}if(_){n=!0;const x=i.sub(s).mulThis(.5);x.rotateReverse(t.m_cosr,t.m_sinr);let S=Ui(x.x/y.x)+Ui(x.y/y.y);S>1&&(S=Math.sqrt(S),t.m_semiMajorAxis*=S,y.mulThis(S));const P=new Y(0,0);{const A=y.x*y.x,k=y.y*y.y,$=A*x.y*x.y+k*x.x*x.x,F=A*k-$;if(F>0){const G=Math.sqrt(F/$);P.setCoords(y.x*x.y/y.y,-y.y*x.x/y.x),P.mulThis(G),r===o&&P.negateThis()}}{const A=new Y(P.x,P.y);A.rotateDirect(t.m_cosr,t.m_sinr),A.addThis(i.add(s).mulThis(.5)),t.m_center.assign(A)}}if(Oz(t),!_se(t))return jc(t,i,s,l),!0}return US(t),t.afterCompletedModification(),n}function wye(t,e){K(Math.abs(t.getSweepAngle())<15*Math.PI/16);const i=t.getSemiMajorAxis(),s=t.getSemiMinorAxis();let n;if(i===0)return e[0].setCoordsPoint2D(t.getStartXY()),e[1].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getStartXY()),n=1,n;if(s===0)return e[0].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getEndXY()),e[1]=Y.lerp(e[0],e[2],.5),n=1,n;const r=t.getSweepAngle(),o=t.getStartAngle(),l=o+r,c=new Y(-i*Math.sin(o),s*Math.cos(o)),f=new Y(-i*Math.sin(l),s*Math.cos(l));c.normalize(),f.normalize(),c.rotateDirect(t.m_cosr,t.m_sinr),f.rotateDirect(t.m_cosr,t.m_sinr),e[0].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getEndXY()),e[1].setSub(e[2],e[0]);const y=c.crossProduct(f);return e[1].assign(c.mul(e[1].crossProduct(f)/y)),e[1].addThis(e[0]),n=Math.cos(.5*r),n}function f7(t,e,i,s,n){const r=t[0].sub(t[1]),o=t[2].sub(t[1]),l=r.crossProduct(o),c=r.dotProduct(o),f=e;K(f<=1),K(f>0);const y=.5/(1-f),_=r.sqrLength(),x=c,S=o.sqrLength(),P=Ui(l),A=r.sub(o).sqrLength();if(P===0||c<=-Math.sqrt(_)*Math.sqrt(S))return jc(n,t[0],t[2],1),!1;const k=[0,0],$=new Ze;$.setInfinite();const F=vv(2*P,-(A/f+4*x),2*(1-f)/f,$,!1,k);if(F===0)return jc(n,t[0],t[2],1),!1;F===1&&(k[1]=k[0]);const G=Math.sqrt(y/k[0]),V=Math.sqrt(y/k[1]),B=.5/f;let W=B-S*k[0],J=B-_*k[0];Math.abs(W)>Math.abs(J)?J=x*k[0]-B+1:W=x*k[0]-B+1;const re=r.mul(W).add(o.mul(J)),se=re.norm(1)<1e-15*G?0:Math.atan2(re.y,re.x)+Math.PI,oe=r.add(o),pe=i?i.clone():t[1].add(oe.mul(y)),ue=t[0].sub(pe),ce=t[2].sub(pe),ne=ue.crossProduct(ce)<0,de=!1;return new zu,n.constructEllipticArcEndPointsCenter(t[0],t[2],G,V/G,se,de,!ne,pe)}function Yrt(t,e,i,s,n){return f7(t,e,i,s,n)}function _se(t){let e=!1;{const s=new Y(t.m_semiMajorAxis*Math.cos(t.m_startAngle),t.getSemiMinorAxis()*Math.sin(t.m_startAngle));s.rotateDirect(t.m_cosr,t.m_sinr),s.addThis(t.m_center),e=Y.distance(t.getStartXY(),s)>nf(t)}let i=!1;if(!e){const s=new Y(t.m_semiMajorAxis*Math.cos(t.m_startAngle+t.m_sweepAngle),t.getSemiMinorAxis()*Math.sin(t.m_startAngle+t.m_sweepAngle));s.rotateDirect(t.m_cosr,t.m_sinr),s.addThis(t.m_center),i=Y.distance(t.getEndXY(),s)>nf(t)}return!e&&!i}function Xrt(t,e,i,s){i===0&&Je("construct_enclosing_circle");const n=[0,0,0],r=krt(e,i,n);if(r===1)t.constructCircleRadius(0,e[n[0]],s);else if(r===2){const o=Y.lerp(e[n[0]],e[n[1]],.5),l=Y.distance(e[n[0]],o),c=Y.distance(e[n[1]],o);t.constructCircleRadius(Math.max(l,c),o,s)}else if(r===3){const o=Y.calculateCircleCenterFromThreePoints(e[n[0]],e[n[1]],e[n[2]]),l=Y.distance(e[n[0]],o),c=Y.distance(e[n[1]],o),f=Y.distance(e[n[2]],o);t.constructCircleRadius(Math.max(l,c,f),o,s)}else bt("unexpected")}function bse(t){if(rn(t)||t.isDegenerate(0))return 0;const e=t.m_semiMajorAxis,i=t.getSemiMinorAxis(),s=e*e+i*i,n=t.getStartAngle(),r=t.getEndAngle(),o=t.m_center.y-t.m_YStart,l=t.m_cosr,c=t.m_sinr;let f=1,y=0;t.m_rotation&&(f=(l-c)*(l+c),y=2*l*c);const _=((-.5*(r-n)+.25*f*(2*Math.cos(r+n)*Math.sin(r-n)))*i+-2*Math.sin(.5*(r+n))*Math.sin(.5*(r-n))*l*o)*e/s;let x=0;return t.m_rotation&&(x=.125*(-2*Math.sin(r+n)*Math.sin(r-n))*y-i*o/s*(2*Math.cos(.5*(r+n))*Math.sin(.5*(r-n)))*c),s*(_+x)+-.5*(t.m_XEnd-t.m_XStart)*(t.m_YEnd-t.m_YStart)}function US(t){t.queryCoord2D(.5,t.m_interior)}function xse(t,e,i,s,n){if(n){if(pm(e,i)!==0)return 2}else if(Yg(e,i))return 1;return QE(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function Wrt(t,e,i,s,n){if(n){if(pm(e,i)!==0)return 2}else if(Yg(e,i))return 1;return Sye(t,e,i,null,null,null,s,n!==void 0&&n,!0,!1)!==0?4:0}function QE(t,e,i,s,n,r,o,l,c,f){if(rn(e))return i7(new si({start:e.getStartXY(),end:e.getEndXY()}),i,s,n,r,o,l,f);n!==null&&(n.length=0),r!==null&&(r.length=0),s!==null&&(s.length=0);const y=Al(e,i);if(Hu(e,i,o=Math.max(y,o)))return 0;const _=i.getStartXY();_.subThis(e.m_center);const x=i.getEndXY();x.subThis(e.m_center),_.rotateReverse(e.m_cosr,e.m_sinr),x.rotateReverse(e.m_cosr,e.m_sinr);const S=x.clone();S.subThis(_);const P=e.m_semiMajorAxis,A=1/P,k=e.getSemiMinorAxis(),$=1/k,F=S.clone();F.leftPerpendicularThis();const G=Math.atan2(k*F.y,P*F.x),V=new Array(16),B=new Array(16);let W=0;const J=[G,G+Math.PI];for(let ne=0;ne<2;++ne){const de=Tn(e,J[ne]);if(de>=0&&de<=1){V[W]=de;const Se=e.getCoord2D(V[W]);B[W]=i.getClosestCoordinate(Se,!1),Y.distance(Se,i.getCoord2D(B[W]))<=o&&W++}}const re=_.x*A,se=_.y*$,oe=S.x*A,pe=S.y*$;let ue=vv(oe*oe+pe*pe,2*(re*oe+se*pe),re*re+se*se-1,Ze.unit(),!1,B);K(ue>=0);for(let ne=0;ne<ue;ne++){const de=S.mul(B[ne]).add(_);de.x*=A,de.y*=$;const Se=Tn(e,Math.atan2(de.y,de.x));if(Se>=0&&Se<=1){V[W]=Se;const Pe=e.getCoord2D(Se);B[W]=i.getClosestCoordinate(Pe,!1),Y.distance(Pe,i.getCoord2D(B[W]))<=o&&W++}}K(W<V.length+4);const ce=new Array(16);ue=e.intersectPoint(i.getStartXY(),ce,o);for(let ne=0;ne<ue;ne++,W++)V[W]=ce[ne],B[W]=0;ue=e.intersectPoint(i.getEndXY(),ce,o);for(let ne=0;ne<ue;ne++,W++)V[W]=ce[ne],B[W]=1;ue=i.intersectPoint(e.getStartXY(),ce,o);for(let ne=0;ne<ue;ne++,W++)V[W]=0,B[W]=ce[ne];ue=i.intersectPoint(e.getEndXY(),ce,o);for(let ne=0;ne<ue;ne++,W++)V[W]=1,B[W]=ce[ne];return W===0?0:Uu(t,e,i,V,B,W,s,n,r,o,l,c,f)}function Sye(t,e,i,s,n,r,o,l,c,f){if(rn(e)){const oe=new si({start:e.getStartXY(),end:e.getEndXY()});return QE(t,i,oe,s,r,n,o,l,c,!0)}if(rn(i)){const oe=new si({start:i.getStartXY(),end:i.getEndXY()});return QE(t,e,oe,s,n,r,o,l,c,f)}const y=Al(e,i);o=Math.max(o,y);let _=!1;{const oe=e.getSemiAxes(),pe=e.getCenter(),ue=i.getSemiAxes(),ce=i.getCenter(),ne=Y.distance(ce,pe),de=oe.x+ue.x;if(ne>de+o)return 0;if(oe.y>ue.x){if(ne+ue.x+o<oe.y)return 0}else if(ue.y>oe.x&&ne+oe.x+o<ue.y)return 0;if(c&&!l){const Se=e.m_minorMajorRatio===1&&e.isClosed()&&e.isMajor(),Pe=i.m_minorMajorRatio===1&&i.isClosed()&&i.isMajor();if(Se&&Pe&&(_=!0,ne<=de)&&Math.max(oe.x,ue.x)<=Math.min(oe.x,ue.x)+ne)return K(!n&&!r),1}}if(!_&&Hu(e,i,o))return 0;const x=[],S=[],P=!1,A=!1,k=Tz(e,0,0,P,A,x,S,null),$=[],F=[],G=Tz(i,0,0,P,A,$,F,null);if(k===1&&G===1){const oe=new ba({points:x,weights:S}),pe=new ba({points:$,weights:F}),ue=[],ce=[],ne=FE(!1,oe,pe,s,n===null?null:ue,r===null?null:ce,o,l,c,f);if(ne>0&&n!==null||r!==null){n&&(n.length=0),r&&(r.length=0);for(let de=0;de<ne;++de){if(n)if(Is(ue[de],0,1))n.push(ue[de]);else{const Se=oe.tToLength(ue[de]),Pe=e.lengthToT(Se);n.push(Pe)}if(r)if(Is(ce[de],0,1))r.push(ce[de]);else{const Se=pe.tToLength(ce[de]),Pe=i.lengthToT(Se);r.push(Pe)}}}return ne}let V=[];const B=[];let W=0;const J=c&&!l;for(let oe=0;oe<k;oe++){const pe=new ba({points:x.slice(2*oe,2*oe+3),weights:S.slice(2*oe,2*oe+3)});let ue=0;for(let ce=0;ce<G;ce++){B.length<=ce&&B.push(new ba({points:$.slice(2*ce,2*ce+3),weights:F.slice(2*ce,2*ce+3)}));const ne=[],de=[],Se=J?null:ne,Pe=J?null:de,Re=FE(!1,pe,B[ce],null,Se,Pe,o,!1,J,!1);if(Re>0&&J)return 1;for(let Oe=0;Oe<Re;++Oe){if(ne[Oe]===0&&oe===0)ne[Oe]=0;else if(ne[Oe]===1&&oe===k-1)ne[Oe]=1;else{const we=pe.tToLength(ne[Oe])+W,Fe=e.lengthToT(we);ne[Oe]=Fe}if(de[Oe]===0&&ce===0)de[Oe]=0;else if(de[Oe]===1&&ce===G-1)de[Oe]=1;else{const we=B[ce].tToLength(de[Oe])+ue,Fe=i.lengthToT(we);de[Oe]=Fe}V.push(rr(ne[Oe],de[Oe]))}ue+=B[ce].calculateLength2D()}W+=pe.calculateLength2D()}if(V.length===0)return 0;if(l&&(V=V.filter(oe=>!Is(oe.first,0,1)||!Is(oe.second,0,1)||!e.getCoord2D(oe.first).equals(i.getCoord2D(oe.second)))),c)return V.length;const re=[],se=[];for(const oe of V)re.push(oe.first),se.push(oe.second);return Uu(t,e,i,re,se,re.length,s,n,r,o,l,c,f)}function wse(t,e,i){if(i.setCoords(t.getCoord2D(e.vmin)),i.mergeNe(t.getCoord2D(e.vmax)),rn(t))return;const s=t.getSemiAxes(),n=[0,0,0,0];{const o=Math.atan2(-s.y*t.m_sinr,s.x*t.m_cosr),l=o+Math.PI,c=Math.atan2(s.y*t.m_cosr,s.x*t.m_sinr),f=c+Math.PI;n[0]=Tn(t,o),n[1]=Tn(t,l),n[2]=Tn(t,c),n[3]=Tn(t,f)}const r=new Y;for(let o=0;o<4;o++){const l=n[o];e.containsExclusiveCoordinate(l)&&(t.queryCoord2D(l,r),i.mergeNe(r))}}function Sse(t,e,i,s,n){if(t.m_semiMajorAxis===0)return i.vmin;let r=Y.getNAN();t.queryCoord2D(i.vmin,r);let o=Y.getNAN();if(t.queryCoord2D(i.vmax,o),rn(t))return new si({start:r,end:o}).getClosestCoordinate(e,s);const l=VN(t,e);if(r=VN(t,r),o=VN(t,o),t.m_minorMajorRatio===1){if(l.isEqual(0,0))return i.vmin;const W=Tn(t,Math.atan2(l.y,l.x));return s||i.containsCoordinate(W)?W:Y.distance(l,r)<=Y.distance(l,o)?i.vmin:i.vmax}const c=t.getSemiMajorAxis(),f=t.getSemiMinorAxis(),y=(c-f)*(c+f),_=Ui(y),x=l.x,S=l.y,P=Ui(f*S),A=f*y*S*2,k=[new Be(P),new Be(A),new Be(_-Ui(c*x)-P),new Be(-A),new Be(-_)],$=Ge(Be,4),F=Oge(k,4,new Ze(-1,1),!1,$,4);let G=i.vmin,V=Y.sqrDistance(l,r);{const W=Y.sqrDistance(l,o);W<V&&(G=i.vmax,V=W)}K(!s);let B=new Array(8);for(let W=0;W<F;++W){const J=$[W].value(),re=Math.sqrt(1-J*J),se=Math.atan2(J,re),oe=Math.atan2(J,-re);B[2*W]=Tn(t,se),B[2*W+1]=Tn(t,oe)}B=B.slice(0,2*F),Ix(B);for(let W=0,J=2*F;W<J;++W)if(B[W]>i.vmin&&B[W]<i.vmax){const re=Y.sqrDistance(e,t.getCoord2D(B[W]));V>re&&(V=re,G=B[W])}return G}function Ese(t,e,i){return K(0),!1}function Zrt(t,e,i){K(!rn(t));const s=new _i;s.setRotateAngle(-t.getAxisXRotation());const n=new Y;s.queryTransform(e,n);const r=Math.atan2(-n.x*t.getMinorMajorRatio(),n.y),o=r+ki();let l=Tn(t,r),c=Tn(t,o);c<l&&(c=St(l,l=c));let f=0;return l>=0&&l<=1&&(i[f++]=l),c>=0&&c<=1&&(i[f++]=c),f}function Krt(t,e,i){K(0)}function Jrt(t,e,i,s){const n=t.getStartXY(),r=t.getEndXY(),o=n.equals(r),l=e.equals(i);if(!o&&!l){const A=new _i;A.setShiftCoords(-t.m_XStart,-t.m_YStart);const k=Y.distance(e,i),$=Y.distance(n,r),F=k/$;A.scale(F,F);const G=r.sub(n);G.divThis($);const V=i.sub(e);V.divThis(k);const B=G.crossProduct(V),W=V.dotProduct(G);return A.rotate(W,B),A.shiftCoords(e.x,e.y),Vj(t,A,!0),t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,void(t.m_YEnd=i.y)}const c=new Y;if(t.queryCoord2D(.5,c),l){if(o){const A=t.m_center.add(e.sub(n));t.constructEllipticArcEndPointsCenter(e,i,t.getSemiMajorAxis(),1,0,!0,!t.isClockwise(),A),t.setProjectionBehavior(0)}else if(t.isMajor()){const A=c.sub(e).getUnitVector().mul(2*t.getSemiMajorAxis()).add(e);t.constructCircularArcThreePoint(e,i,A)}else t.constructCircularArcThreePoint(e,i,e);return}const f=e.add(i).mul(.5),y=i.sub(e);y.rightPerpendicularThis();const _=f.add(y),x=Y.getClosestCoordinate(f,_,t.getCenter(),!0),S=new Y;ar(f,_,x,S);const P=Y.distance(e,S);t.constructEllipticArcEndPointsCenter(e,i,P,1,0,!0,!t.isClockwise(),S),t.setProjectionBehavior(0)}function Eye(t,e,i,s){const n=t.getStartXY(),r=t.getEndXY(),o=n.equals(r),l=e.equals(i);if(!o&&!l){const S=new _i;return S.initializeFromTwoPoints(n,r,e,i),Vj(t,S,!0),t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=i.x,t.m_YEnd=i.y,t.endPointModified(),void t.normalizeAfterEndpointChange()}if(!t.isMajor())return void jc(t,e,i,1);if(o&&l){const S=t.m_center.add(e.sub(n));return void t.constructEllipticArcEndPointsCenter(e,i,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),S)}if(!o){const S=.5*(Vo()-Math.abs(t.getSweepAngle())),P=(t.getSweepAngle()+S*xn(t.getSweepAngle()))/t.getSweepAngle(),A=new Y;t.queryCoord2D(P,A),t.constructEllipticArcEndPointsCenter(A,A,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),t.getCenter());const k=t.getCenter().add(e.sub(A));return void t.constructEllipticArcEndPointsCenter(e,i,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),k)}const c=Y.sqrDistance(e,i);let f=.25,y=.75;if(c<Y.sqrDistance(t.getCoord2D(.25),t.getCoord2D(.75))){const S=[0],P=Xg(new Rrt(t,c),Ze.construct(0,.25),1,S);P>0&&(K(P===1),f=S[0],y=1-S[0])}const _=t.getCoord2D(f),x=t.getCoord2D(y);K(!_.equals(x)),t.constructEllipticArcEndPointsCenter(_,x,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),t.m_center),Eye(t,e,i)}function Cse(t,e,i){if(e<=262144)return not(t,e,i);K(0);const s=new tot({points:t,n:e}),n=0;let r=1;const o=t[n].clone();for(;r<e&&t[r].equals(o);)r++;if(s.m_treeHull.addElement(n),r<e){s.m_treeHull.addBiggestElement(r);for(let c=r+1;c<e;c++){const f=t[c],y=s.treeHull(f);y!==-1&&s.m_treeHull.setElement(y,c)}}let l=0;for(let c=s.m_treeHull.getFirst();c!==-1;c=s.m_treeHull.getNext(c))i[l++]=s.m_treeHull.getElement(c);return l}function Qrt(t,e,i){const s=t.getImpl(),n=s.getPathStart(e),r=s.getPathEnd(e),o=!s.isClosedPath(e)&&s.isClosedPathInXYPlane(e),l=s.getAttributeStreamRef(0),c=2*n;let f=2*r;if(o&&(f-=2),f-c<6)return!0;const y=l.readPoint2D(c),_=l.readPoint2D(c+2),x=l.readPoint2D(c+4);if(!ig(Y.orientationRobust(_,x,y)))return!1;const S=_.clone(),P=new Y;for(let A=c+6;A<f;A+=2)if(P.assign(_),_.assign(x),l.queryPoint2D(A,x),!ig(Y.orientationRobust(_,x,y))||!ig(Y.orientationRobust(S,x,y))||!ig(Y.orientationRobust(_,x,P)))return!1;return!0}class eot{constructor(e){this.m_handleP=-1,this.m_handleQ=-1,this.m_currentSupport=-1,this.m_area=0,this.m_bDone=!0,K(0),this.m_convexHull=e,this.m_function=this.done_}next(){return K(0),!1}get_vertex_handle_p(){return K(0),0}get_vertex_handle_q(){return K(0),0}get_current_support(){return K(0),0}getNext(e){return K(0),0}getPrev(e){return K(0),0}intialize_(){return K(0),!1}increment_(){return K(0),!1}increment_q_(){return K(0),!1}increment_p_(){return K(0),!1}parallel_edge_with_q_support_(){return K(0),!1}parallel_edge_with_p_support_(){return K(0),!1}done_(){return K(0),!1}}class tot{nullGetXY(e){return bt("m_getXY is null"),{}}nullDeleteNode(e){bt("m_deleteNode is null")}constructor(e){return this.m_treeHull=new Gt,this.m_shape=null,this.m_stream=null,this.m_points=null,this.m_geometryHandle=-1,this.m_pathHandle=-1,this.m_getXY=this.nullGetXY,this.m_deleteNode=this.nullDeleteNode,e?e.stream?(this.m_treeHull.setCapacity(Math.min(20,e.n)),this.m_stream=e.stream,this.m_getXY=this.getXYStream,this.m_deleteNode=this.deleteNodeStream,this.m_points=null,this.m_geometryHandle=ae,void(this.m_pathHandle=ae)):e.points?(this.m_treeHull.setCapacity(Math.min(20,e.n)),this.m_points=e.points,this.m_getXY=this.getXYPoints,this.m_deleteNode=this.deleteNodePoints,this.m_stream=null,this.m_geometryHandle=ae,void(this.m_pathHandle=ae)):void K(0):(this.m_treeHull.setCapacity(20),this.m_shape=new Bs,this.m_geometryHandle=this.m_shape.createGeometry(me.enumMultiPoint),this.m_pathHandle=this.m_shape.insertPath(this.m_geometryHandle,ae),this.m_getXY=this.getXYShape,this.m_deleteNode=this.deleteNodeShape,this.m_stream=null,void(this.m_points=null))}getXYShape(e){return this.m_shape.getXY(e)}getXYStream(e){return this.m_stream.readPoint2D(e<<1)}getXYPoints(e){return K(0),new Y}deleteNodeShape(e){const i=this.m_treeHull.getElement(e);this.m_treeHull.deleteNode(e),this.m_shape.removeVertex(i,!1)}deleteNodeStream(e){this.m_treeHull.deleteNode(e)}deleteNodePoints(e){K(0)}addGeometry(e){if(e.isEmpty())return;const i=e.getGeometryType();if(i===me.enumGeometryCollection){const s=e;for(let n=0,r=s.getGeometryCount();n<r;n++)this.addGeometry(s.getGeometry(n))}else el(i)?this.addMultiVertexGeometry(e):Dn(i)?this.addSegment(e):i===me.enumEnvelope?this.addEnvelope(e):i===me.enumPoint?this.addPoint(e):Je("Convex_hull: geometry not supported")}getBoundingGeometry(){const e=new Ht,i=this.m_treeHull.getFirst(),s=new Wt({vd:this.m_shape.getVertexDescription()});if(this.m_treeHull.size()===0)return s;s.reserve(this.m_treeHull.size()),this.m_shape.queryPoint(this.m_treeHull.getElement(i),e),s.startPathPoint(e);for(let n=this.m_treeHull.getNext(i);n!==-1;n=this.m_treeHull.getNext(n))this.m_shape.queryPoint(this.m_treeHull.getElement(n),e),s.lineToPoint(e);return s}getAntipodalPairsIterator(){return K(0),new eot(this)}getXY(e){return K(0),new Y}getXYWithIndex(e){return K(0),new Y}getFirst(){return K(0),0}getLast(){return K(0),0}getNext(e){return K(0),0}getPrev(e){return K(0),0}getVertexIndex(e){return K(0),0}getPointCount(){return K(0),0}static constructOrientedMinimumBoundingBox(e,i,s,n,r){K(0)}addMultiVertexGeometry(e){const i=new Ht,s=e.getImpl(),n=new Y;for(let r=0;r<e.getPointCount();r++){s.queryXY(r,n);const o=this.addPoint2D(n);if(o!==-1){e.getPointByVal(r,i);const l=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(o,l)}}}addEnvelope(e){const i=new Ht;for(let s=0;s<4;s++){const n=new Y;e.queryCorner(s,n);const r=this.addPoint2D(n);if(r!==-1){e.queryCornerByVal(s,i);const o=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(r,o)}}}addSegment(e){const i=new Ht,s=e.getStartXY(),n=this.addPoint2D(s);if(n!==-1){e.queryStart(i);const l=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(n,l)}const r=e.getEndXY(),o=this.addPoint2D(r);if(o!==-1){e.queryEnd(i);const l=this.m_shape.addPoint(this.m_pathHandle,i);this.m_treeHull.setElement(o,l)}}addPoint(e){const i=e.getXY(),s=this.addPoint2D(i);if(s!==-1){const n=this.m_shape.addPoint(this.m_pathHandle,e);this.m_treeHull.setElement(s,n)}}addPoint2D(e){let i=-1;if(this.m_treeHull.size()===0)return i=this.m_treeHull.addElement(-4),i;if(this.m_treeHull.size()===1){const s=this.m_treeHull.getElement(this.m_treeHull.getFirst()),n=this.m_shape.getXY(s);return e.equals(n)||(i=this.m_treeHull.addBiggestElement(-5)),i}return i=this.treeHull(e),i}treeHull(e){let i=-1;do{const s=this.m_treeHull.getFirst(),n=this.m_treeHull.getLast(),r=this.m_treeHull.getElement(s),o=this.m_treeHull.getElement(n),l=this.m_getXY(r),c=this.m_getXY(o),f=Y.orientationRobust(c,e,l);if(ig(f)){i=this.m_treeHull.addBiggestElement(-1);const y=this.treeHullWalkBackward(e,n,s);y!==s&&this.treeHullWalkForward(e,s,this.m_treeHull.getPrev(y));break}if(Pse(f)){let y=this.m_treeHull.getRoot(),_=this.m_treeHull.getFirst(),x=this.m_treeHull.getLast(),S=-1,P=-1,A=-1;for(;_!==this.m_treeHull.getPrev(x);){P=this.m_treeHull.getElement(y);const F=this.m_getXY(P);Pse(Y.orientationRobust(F,e,l))?(x=y,y=this.m_treeHull.getLeft(y)):(_=y,y=this.m_treeHull.getRight(y))}y=x,S=_,P=this.m_treeHull.getElement(y),A=this.m_treeHull.getElement(S);const k=this.m_getXY(P),$=this.m_getXY(A);if(S!==s&&!ig(Y.orientationRobust($,e,k)))break;i=this.m_treeHull.addElementAtPosition(S,y,-2,!0,!1),this.treeHullWalkForward(e,y,n),this.treeHullWalkBackward(e,S,s);break}{const y=rot(e,c,l);if(y===-1){const _=this.m_treeHull.getPrev(n);this.m_treeHull.deleteNode(n),i=this.m_treeHull.addBiggestElement(-3),this.treeHullWalkBackward(e,_,s)}else if(y===1){const _=this.m_treeHull.getNext(s);this.m_treeHull.deleteNode(s),i=this.m_treeHull.addElementAtPosition(-1,_,-3,!0,!1),this.treeHullWalkForward(e,_,n)}break}}while(!1);return i}treeHullWalkForward(e,i,s){if(i===s)return s;let n=i,r=this.m_treeHull.getElement(n),o=this.m_treeHull.getNext(n);const l=this.m_getXY(r);for(;n!==s&&this.m_treeHull.size()>2;){const c=this.m_treeHull.getElement(o),f=this.m_getXY(c);if(ig(Y.orientationRobust(f,e,l)))break;const y=n;n=o,r=c,l.assign(f),o=this.m_treeHull.getNext(n),this.m_deleteNode(y)}return n}treeHullWalkBackward(e,i,s){if(i===s)return s;let n=i,r=this.m_treeHull.getElement(n),o=this.m_treeHull.getPrev(n);const l=this.m_getXY(r);for(;n!==s&&this.m_treeHull.size()>2;){const c=this.m_treeHull.getElement(o),f=this.m_getXY(c);if(ig(Y.orientationRobust(l,e,f)))break;const y=n;n=o,r=c,l.assign(f),o=this.m_treeHull.getPrev(n),this.m_deleteNode(y)}return n}}function iot(t,e,i){const s=e.sub(t),n=i.sub(e);if(s.x===0)return n.x>0?-1:0;if(s.y===0)return n.y>0?1:n.y<0?-1:0;const r=s.crossProduct(n),o=4*Number.EPSILON*(Math.abs(n.x*s.y)+Math.abs(n.y*s.x));return r>o?1:r<-o?-1:Y.orientationRobust(t,e,i)}function sot(t,e,i){const s=e.sub(t),n=i.sub(e);if(s.x===0)return n.x<0?-1:0;if(s.y===0)return n.y>0?-1:n.y<0?1:0;const r=s.crossProduct(n),o=4*Number.EPSILON*(Math.abs(n.x*s.y)+Math.abs(n.y*s.x));return r>o?1:r<-o?-1:Y.orientationRobust(t,e,i)}function not(t,e,i){const s=new Ns(0);for(let l=0;l<e;l++)s.add(l);const n={userSort(l,c,f){f.sort(l,c,(y,_)=>t[y].compareX(t[_]))},getValue:l=>t[l].x};rd.sortEx(s,0,e,n);let r=0;e:for(let l=0;l<e;++l){const c=s.read(l);for(;r>=2;){const f=i[r-2],y=i[r-1];if(t[y].equals(t[c])){s.write(l,-1);continue e}if(!(iot(t[f],t[y],t[c])>=0)){y===s.read(l-1)&&s.write(l-1,-1);break}r--}i[r++]=c,r===2&&t[c].equals(t[i[0]])&&(s.write(1,-1),r--)}const o=r+1;e:for(let l=e-2;l>=0;--l){const c=s.read(l);if(!(c<0)){for(;r>=o;){const f=i[r-2],y=i[r-1];if(t[y].equals(t[c]))continue e;if(!(sot(t[f],t[y],t[c])>=0))break;r--}if(l!==0){const f=i[r-1];i[r++]=c,t[c].equals(t[f])&&r--}}}return r>1&&t[i[0]].equals(t[i[r-1]])&&r--,r}function ig(t){return t<0}function Pse(t){return t>0}function rot(t,e,i){let s=-1;e.y===i.y?s=0:e.x===i.x?s=1:s=Math.abs(e.x-i.x)>=Math.abs(e.y-i.y)?0:1;let n=-1;return n=e[s]<i[s]?t[s]<e[s]?-1:i[s]<t[s]?1:0:e[s]<t[s]?-1:t[s]<i[s]?1:0,n}function u5(t,e,i,s,n){return p7(t,!1,e,i,s,n)}function p7(t,e,i,s,n,r){const o=i.getGeometryType(),l=s.getGeometryType(),c=Math.max(n,Al(i,s));if(o===me.enumLine&&l===me.enumLine)return MJe(i,s,c,r);let f=i,y=s,_=i.getStartXY(),x=i.getEndXY();if(_.compare(x)>0&&(f=i.clone().reverse()),_=s.getStartXY(),x=s.getEndXY(),_.compare(x)>0&&(y=s.clone().reverse()),e){if(i.equals(s))return 2;if(wJe(i,s,c))return 4}switch(o){case me.enumLine:switch(l){case me.enumEllipticArc:return xse(t,y,f,c,r);case me.enumBezier:return Qte(t,y,f,c,r);case me.enumRationalBezier2:return Ute(t,y,f,c,r);case me.enumBezier2:return kte();default:bt("")}break;case me.enumEllipticArc:switch(l){case me.enumLine:return xse(t,f,y,c,r);case me.enumEllipticArc:return Wrt(t,f,y,c,r);case me.enumBezier:return eie(t,y,f,c,r);case me.enumRationalBezier2:return Yte();case me.enumBezier2:return Nte();default:bt("")}break;case me.enumBezier:switch(l){case me.enumLine:return Qte(t,f,y,c,r);case me.enumEllipticArc:return eie(t,f,y,c,r);case me.enumBezier:return oet(t,f,y,c,r);case me.enumRationalBezier2:return tie(t,f,y,c,r);case me.enumBezier2:return iie();default:bt("")}break;case me.enumRationalBezier2:switch(l){case me.enumLine:return Ute(t,f,y,c,r);case me.enumEllipticArc:return Yte();case me.enumBezier:return tie(t,y,f,c,r);case me.enumRationalBezier2:return qQe(t,f,y,c,r);case me.enumBezier2:return Xte();default:bt("")}break;case me.enumBezier2:switch(l){case me.enumLine:return kte();case me.enumEllipticArc:return Nte();case me.enumBezier:return iie();case me.enumRationalBezier2:return Xte();case me.enumBezier2:return uQe();default:bt("")}break;default:bt("")}}function pm(t,e,i=!0){if(!i&&!Cye(t,e))return 0;const s=t.isLine()&&e.isLine();if(t.getStartXY().equals(e.getStartXY())&&t.getEndXY().equals(e.getEndXY())){if(s)return 1;const r=t.getGeometryType();if(r!==e.getGeometryType())return 0;if(r===me.enumBezier){const o=t,l=e;return o.getControlPoint1().equals(l.getControlPoint1())&&o.getControlPoint2().equals(l.getControlPoint2())?1:0}if(r===me.enumEllipticArc)return Ese()?1:0;if(r===me.enumRationalBezier2){const o=t,l=e;if(o.getControlPoint1().equals(l.getControlPoint1())&&o.getStandardFormWeight()===l.getStandardFormWeight())return 1}else if(r===me.enumBezier2){const o=e;if(t.getControlPoint1().equals(o.getControlPoint1()))return 1}return 0}if(t.getStartXY().equals(e.getEndXY())&&t.getEndXY().equals(e.getStartXY())){if(s)return-1;const r=t.getGeometryType();if(r!==e.getGeometryType())return 0;if(r===me.enumBezier){const o=t,l=e;return o.getControlPoint1().equals(l.getControlPoint2())&&o.getControlPoint2().equals(l.getControlPoint1())?-1:0}if(r===me.enumEllipticArc)return Ese(),-1;if(r===me.enumRationalBezier2){const o=t,l=e;if(o.getControlPoint1().equals(l.getControlPoint1())&&o.getStandardFormWeight()===l.getStandardFormWeight())return-1}else if(r===me.enumBezier2){const o=e;if(t.getControlPoint1().equals(o.getControlPoint1()))return-1}return 0}return 0}function Cye(t,e){const i=t.getGeometryType();return i===e.getGeometryType()&&(i!==me.enumEllipticArc||t.projectionBehavior()===e.projectionBehavior())}function qv(t,e,i,s,n,r,o){!n&&r&&Je("");const l=e.getGeometryType(),c=i.getGeometryType(),f=Math.max(o,Al(e,i));if(s&&(s.length=0),n&&(n.length=0),r&&(r.length=0),l===me.enumLine&&c===me.enumLine)return i7(e,i,s,n,r,f,!1,!1);let y=e,_=i,x=e.getStartXY(),S=e.getEndXY(),P=!1,A=!1;x.compare(S)>0&&(y=e.clone(!0).reverse(),P=!0),x=i.getStartXY(),S=i.getEndXY(),x.compare(S)>0&&(_=i.clone(!0).reverse(),A=!0);let k=0;switch(l){case me.enumLine:switch(c){case me.enumEllipticArc:k=QE(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumBezier:k=jE(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumRationalBezier2:k=j2(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumBezier2:k=O6(t,_,y,s,r,n,f,!1,!1,!0);break;default:bt("")}break;case me.enumEllipticArc:switch(c){case me.enumLine:k=QE(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumEllipticArc:k=Sye(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier:k=wz(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumRationalBezier2:k=Wte();break;case me.enumBezier2:k=$te(t,_,y,s,r,n,f,!1,!1,!0);break;default:bt("")}break;case me.enumRationalBezier2:switch(c){case me.enumLine:k=j2(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumEllipticArc:k=Wte();break;case me.enumBezier:k=Sz(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumRationalBezier2:k=FE(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier2:k=Zte(t,y,_,s,n,r,f,!1,!1,!1);break;default:bt("")}break;case me.enumBezier2:switch(c){case me.enumLine:k=O6(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumEllipticArc:k=$te(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier:k=sie(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumRationalBezier2:k=Zte(t,_,y,s,r,n,f,!1,!1,!0);break;case me.enumBezier2:k=Kge(t,y,_,s,n,r,f,!1,!1,!1);break;default:bt("")}break;case me.enumBezier:switch(c){case me.enumLine:k=jE(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumEllipticArc:k=wz(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier:k=Pj(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumRationalBezier2:k=Sz(t,y,_,s,n,r,f,!1,!1,!1);break;case me.enumBezier2:k=sie(t,y,_,s,n,r,f,!1,!1,!1);break;default:bt("")}break;default:bt("")}if(P){if(n){for(let $=0;$<k;$++)n[$]=1-n[$];n.reverse()}s&&s.reverse(),r&&r.reverse()}if(A&&r)for(let $=0;$<k;$++)r[$]=1-r[$];return k}function tT(t,e,i){return e===i?0:(e>i&&(i=St(e,e=i)),t.cut(e,i,!0).calculateUpperLength2D())}function oot(t,e,i,s,n){const r=[],o=[],l=[];for(let f=0,y=n;f<y;f++)r.push(t.calculateSubLengthFromStart(i[f])),o.push(e.calculateSubLengthFromStart(s[f])),Is(i[f],0,1)&&Is(s[f],0,1)&&t.getCoord2D(i[f]).equals(e.getCoord2D(s[f]))&&l.push(f);if(l.length===0||l.length===n)return;l.sort((f,y)=>i[f]<i[y]?-1:i[f]>i[y]?1:s[f]<s[y]?-1:s[f]>s[y]?1:0);let c=-1;for(const f of l){if(c>=0&&i[f]===i[c]&&i[f]===i[c]){c=f;continue}c=f;const y=[];y.length=n;for(let _=0;_<y.length;++_)y[_]=_;y.sort((_,x)=>{const S=r[f],P=o[f],A=r[_]-S,k=o[_]-P,$=A*A+k*k,F=r[x]-S,G=o[x]-P,V=F*F+G*G;return $<V?-1:$>V?1:0});for(let _=0;_<n;_++){const x=y[_];if(x===f||i[x]===i[f]&&s[x]===s[f]||Is(i[x],0,1)&&Is(s[x],0,1))continue;const S=(W,J,re,se)=>{const oe=new Bt,pe=new Be;pe.setWithEps(1);const ue=new Be;ue.set(J,pe.eps()),t.queryCoord2DE(ue,oe);const ce=new Bt;t.queryCoord2DE(new Be(W),ce);let ne=!1;return oe.eq(ce)&&(ue.set(se,pe.eps()),e.queryCoord2DE(ue,oe),e.queryCoord2DE(new Be(re),ce),ne=oe.eq(ce)),!ne},P=Y.getNAN();t.queryCoord2D(i[x],P);const A=Y.getNAN();if(e.queryCoord2D(s[x],A),Y.distance(P,A)===0&&S(i[f],i[x],s[f],s[x]))break;const k=new Ze(s[x],s[f]);k.normalizeNoNAN();const $=new Ze(i[x],i[f]);$.normalizeNoNAN();let F=-1,G=Number.POSITIVE_INFINITY,V=Number.POSITIVE_INFINITY,B=i[x];P.assign(t.getCoord2D(B));for(let W=0;W<5;W++){const J=e.getClosestCoordinateOnInterval(P,k,-1);A.assign(e.getCoord2D(J));const re=Y.distance(P,A);if(B=t.getClosestCoordinateOnInterval(A,$,-1),B===i[f]&&J===s[f]){F=1;break}P.assign(t.getCoord2D(B));const se=Y.distance(A,P);if(!(se<V&&re<G)){F=0;break}if(se===0&&re===0){S(i[f],i[x],s[f],s[x])?(i[x]=B,s[x]=J,F=0):F=1;break}V=se,G=re}if(F===-1&&(F=Is(i[x],0,1)||Is(s[x],0,1)?0:1),F!==1)break;i[x]=i[f],s[x]=s[f]}}}function Uu(t,e,i,s,n,r,o,l,c,f,y,_,x){if(!r)return 0;const S=($,F)=>{for(let G=0;G<r;++G){let V=F[G];if(Is(V,0,1)){V=BKe(V);continue}const B=$.getCoord2D(V);V<.5?B.equals($.getStartXY())&&tT($,0,V)<=nf($)&&(F[G]=0):B.equals($.getEndXY())&&tT($,V,1)<=nf($)&&(F[G]=1)}};S(e,s),S(i,n),oot(e,i,s,n,r);const P=[];for(let $=0,F=r;$<F;$++)P.push($);const A=($,F)=>x?Jee(n[$],s[$],n[F],s[F]):Jee(s[$],n[$],s[F],n[F]);if(P.length>1){P.sort(A);const $=Math.max(nf(e),nf(i));let F=0;for(let G=1,V=P.length;G<V;G++){const B=s[P[F]],W=s[P[G]],J=n[P[F]],re=n[P[G]];if(B!==W||J!==re)if(!(tT(e,B,W)<=$&&tT(i,J,re)<=$)||Is(B,0,1)&&Is(J,0,1)||Is(W,0,1)&&Is(re,0,1))F++,P[F]=P[G];else{const se=Y.distance(e.getCoord2D(B),i.getCoord2D(J)),oe=Y.distance(e.getCoord2D(W),i.getCoord2D(re));if(se<=oe)continue;if(oe<se){P[F]=P[G];continue}}}if(P.length=F+1,P.length===1&&P[0]!==0&&(s[0]=s[P[0]],n[0]=n[P[0]],P[0]=0),P.length>2){const G=Ze.constructEmpty(),V=Ze.constructEmpty();G.setCoords(s[P[0]],s[P.at(-1)]),V.setCoords(n[P[0]],n[P.at(-1)]);let B=!0;for(let W=1,J=P.length-1;W<J;W++)if(!G.containsCoordinate(s[P[W]])||!V.containsCoordinate(n[P[W]])){B=!1;break}if(B){const W=[.5,.2,.7,.1,.3,.4,.6,.8,.9];for(let J=0;J<W.length;J++){let re=ji(G.vmin,G.vmax,W[J]);const se=e.getCoord2D(re);if(!i.isCloserThanDistance(se,V,f)){B=!1;break}re=ji(V.vmin,V.vmax,W[J]);const oe=i.getCoord2D(re);if(!e.isCloserThanDistance(oe,G,f)){B=!1;break}}}B&&(P[1]=P.at(-1),P.length=2)}}if(P.length===1&&t&&aS(e,i,s[0],n[0],f,1,[0],[0])&&(P.push(1),s[1]=0,n[1]=0,P.sort(A)),y&&P.length===1){let $=!0;for(let F=0,G=P.length;F<G;F++)if(!(Is(s[P[F]],0,1)&&Is(n[P[F]],0,1)&&Y.distance(e.getCoord2D(s[P[F]]),i.getCoord2D(n[P[F]]))===0)){$=!1;break}if($)return 0}let k=0;for(let $=0,F=P.length;$<F;$++){if(l&&l.push(s[P[$]]),c&&c.push(n[P[$]]),o){const G=Y.getNAN();e.queryCoord2D(s[P[$]],G),o.push(G)}k++}return k}function iT(t,e,i,s,n,r,o,l,c){if(Is(i,0,1)&&Is(s,0,1)&&Y.distance(t.getCoord2D(i),e.getCoord2D(s))===0){const y=new Bt,_=Number.EPSILON;if(t.queryDerivative(new Be(i,_),y),y.isTrueZero()){const k=i===1?-1e-12:1e-12;t.queryDerivative(new Be(i,_).add(k),y)}i===1&&y.negateThis();const x=new Bt;if(e.queryDerivative(new Be(s,_),x),x.isTrueZero()){const k=i===1?-1e-12:1e-12;e.queryDerivative(new Be(s,_).add(k),x)}s===1&&x.negateThis(),y.isZero()||y.normalize(),x.isZero()||x.normalize();const S=y.dotProduct(x),P=y.crossProduct(x);P.scaleError(3);const A=()=>{if(c)return .001;{const k=t.calculateUpperLength2D(),$=e.calculateUpperLength2D();return Math.min(.01*n/Math.min(k,$),1e-10)}};if(S.ge(Tx)&&(P.isZero()||Math.abs(P.value())<A()))return Age(t,e,i,s,n,r,o,l)}return 0}function Dx(t,e,i,s,n){let r=-1,o=-1,l=-1,c=-1;{const f=[0,e],y=[e,0],_=[0,s],x=[s,0];for(let S=0;S<2&&r===-1;++S)for(let P=0;P<2;++P)if(t[f[S]].equals(i[_[P]])){r=f[S],o=y[S],l=_[P],c=x[P];break}}if(r===-1){const f=new Gr;f.setFromPoints(t,e+1);const y=new Gr;return y.setFromPoints(i,s+1),y.inflate(n),f.isIntersectingW(y)?-1:0}{const f=new Array(e+1),y=Cse(t,e+1,f);K(y>1);let _=0,x=0;for(let re=0;re<y;++re)r===f[re]&&(x=re,_++),o===f[re]&&_++;if(_!==2)return-1;const S=new Array(s+1),P=Cse(i,s+1,S);K(P>1),_=0;let A=0;for(let re=0;re<P;++re)l===S[re]&&(A=re,_++),c===S[re]&&_++;if(_!==2)return-1;const k=t[f[(x+y-1)%y]],$=t[f[(x+1)%y]],F=i[S[(A+P-1)%P]],G=i[S[(A+1)%P]],V=t[r],B=[k,$,F,G],W=[0,1,2,3];W.sort((re,se)=>Y.compareVectorsOrigin(V,B[re],B[se]));let J=W[0];for(let re=1;re<4;re++){if(W[re]!==(J+1)%4)return-1;J=W[re]}{const re=k.sub(V),se=G.sub(V),oe=se.dotProduct(re);if(oe>0){const pe=se.crossProduct(re),ue=Math.abs(Math.atan2(pe,oe)),ce=ue*re.length(),ne=ue*se.length();if(ce<=n||ne<=n)return-1}}{const re=$.sub(V),se=F.sub(V),oe=se.dotProduct(re);if(oe>0){const pe=se.crossProduct(re),ue=Math.abs(Math.atan2(pe,oe)),ce=ue*re.length(),ne=ue*se.length();if(ce<=n||ne<=n)return-1}}return 1}}var sT=vr;class si extends PJe{constructor(e){super(e||{XStart:0,YStart:0,XEnd:0,YEnd:0})}assignMove(e){return this!==e&&(this.m_description=e.m_description,e.m_description=null,this.m_attributes=e.m_attributes,e.m_attributes=null,this.m_XStart=e.m_XStart,e.m_XStart=Number.NaN,this.m_YStart=e.m_YStart,this.m_XEnd=e.m_XEnd,e.m_XEnd=Number.NaN,this.m_YEnd=e.m_YEnd),this}assignCopy(e){return this!==e&&e.copyTo(this),this}calculateLowerLength3D(){return K(0),0}calculateUpperLength3D(){return K(0),0}changeEndPoints3D(e,i){K(0)}getClosestCoordinate3D(e,i,s){return K(0),0}getBoundary(){return Xh(this)}transformAttribute(e,i,s,n,r){K(0)}getAttributeAsDbl(e,i,s){if(i===0)return s===0?_N(this,e):vte(this,e);const n=sT.getInterpolation(i),r=this.getStartAttributeAsDbl(i,s),o=this.getEndAttributeAsDbl(i,s);return YA(n,r,o,e,sT.getDefaultValue(i))}constructFromCoords(e,i,s,n){this.dropAllAttributes(),this.setStartXYCoords(e,i),this.setEndXYCoords(s,n)}construct(e,i){this.dropAllAttributes(),this.setStartXY(e),this.setEndXY(i)}construct3D(e,i){K(0)}constructFromPoints(e,i){K(0)}getGeometryType(){return si.type}queryEnvelope(e){if(e instanceof lr){e.setEmpty(),e.assignVertexDescription(this.m_description);const i=xe.constructEmpty();this.queryEnvelope(i),e.setEnvelope(i);for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const r=this.m_description.getSemantics(s);for(let o=0,l=sT.getComponentCount(r);s<l;s++){const c=this.queryInterval(r,o);e.setIntervalEnvelope(r,o,c)}}}else e instanceof xe?e.setCoords({xmin:this.m_XStart,ymin:this.m_YStart,xmax:this.m_XEnd,ymax:this.m_YEnd}):e instanceof tl?(e.setEmpty(),e.mergeCoords(this.m_XStart,this.m_YStart,$h(this,0,1,0)),e.mergeCoords(this.m_XEnd,this.m_YEnd,$h(this,1,1,0))):K(0)}applyTransformation(e){K(e instanceof _i);const i=new Y;i.x=this.m_XStart,i.y=this.m_YStart,e.transformInPlace(i),this.m_XStart=i.x,this.m_YStart=i.y,i.x=this.m_XEnd,i.y=this.m_YEnd,e.transformInPlace(i),this.m_XEnd=i.x,this.m_YEnd=i.y}createInstance(){return K(0),this}calculateLength2D(){return Math.sqrt(oz(this))}calculateLength3D(e){return K(0),0}changeEndPoints2D(e,i){this.setStartXY(e),this.setEndXY(i),this.normalizeAfterEndpointChange()}queryCoord2D(e,i){return ml(this,e,i)}queryCoord3D(e,i){K(0)}getCoordZ(e){return K(0),0}queryCoord2DE(e,i){Dge(this,e,i)}getCoordX(e){return K(0),0}getCoordY(e){return K(0),0}cut(e,i,s){const n=new Qt;return this.queryCut(e,i,n,s),n.releaseSegment()}queryCut(e,i,s,n){const r=s.createLine();n&&r.assignVertexDescription(this.m_description);const o=Y.getNAN();if(ml(this,e,o),r.setStartXYCoords(o.x,o.y),ml(this,i,o),r.setEndXYCoords(o.x,o.y),!n)for(let l=1,c=this.m_description.getAttributeCount();l<c;l++){const f=this.m_description.getSemantics(l),y=sT.getComponentCount(f);for(let _=0;_<y;_++){const x=this.getAttributeAsDbl(e,f,_);r.setStartAttribute(f,_,x);const S=this.getAttributeAsDbl(i,f,_);r.setEndAttribute(f,_,S)}}}queryDerivative(e,i){TJe(this,e,i)}getClosestCoordinate(e,i){return Y.getClosestCoordinate(this.getStartXY(),this.getEndXY(),e,i)}getClosestCoordinateOnInterval(e,i,s=-1){const n=new Y;this.queryCoord2D(i.vmin,n);const r=new Y;this.queryCoord2D(i.vmax,r);const o=Y.getClosestCoordinate(n,r,e,!1);return r5.recalculateParentT(i.vmin,i.vmax,o)}intersectionOfYMonotonicWithAxisX(e,i){const s=this.m_YEnd-this.m_YStart;if(!s)return e===this.m_YEnd?i:Number.NaN;const n=(e-this.m_YStart)/s;let r=_N(this,n);return n===1&&(r=this.m_XEnd),r}isCurve(){return!1}isMonotoneQuickAndDirty(){return!0}isDegenerate(e){const i=this.m_XStart-this.m_XEnd,s=this.m_YStart-this.m_YEnd;return Math.sqrt(i*i+s*s)<=e}isDegenerate3D(e,i){return K(0),!1}queryLooseEnvelope(e){this.queryEnvelope(e)}clone(e){const i=new si;return this.copyTo(i),i}tToLength(e){return e*this.calculateLength2D()}lengthToT(e){const i=this.calculateLength2D();return i!==0?e/i:0}calculateWeightedAreaCentroid2D(e){return K(0),new Y(0,0)}calculateWeightedCentroid2D(){return this.getCoord2D(.5).mul(this.calculateLength2D())}queryAttributeAsDbl(e,i,s,n){K(0)}getTangent(e){const i=Y.getNAN();return i.setSub(this.getEndXY(),this.getStartXY()),i}getDerivative(e){return K(0),new Y(0,0)}getCurvature(e){return 0}isIntersectingPoint(e,i,s){return Ob(this,e,i,s)>=0}isIntersectingPoint3D(e,i,s,n,r=1){return K(0),!1}getYMonotonicParts(e,i){return K(0),0}getMonotonicParts(e,i){return 0}getMonotonicPartParams(e,i){return K(0),0}intersectionWithAxis2D(e,i,s,n){if(e){const r=this.m_YEnd-this.m_YStart;if(!r)return i===this.m_YEnd?-1:0;const o=(i-this.m_YStart)/r;return o<0||o>1?0:(s&&(s[0]=_N(this,o)),n&&(n[0]=o),1)}{const r=this.m_XEnd-this.m_XStart;if(!r)return i===this.m_XEnd?-1:0;const o=(i-this.m_XStart)/r;return o<0||o>1?0:(s&&(s[0]=vte(this,o)),n&&(n[0]=o),1)}}calculateUpperLength2D(){return this.calculateLength2D()}calculateLowerLength2D(){return this.calculateLength2D()}normalizeAfterEndpointChange(){return!1}queryLooseEnvelopeOnInterval(e,i){if(i instanceof xe){let s=cn(e.vmin,0,1);const n=new Y;return this.queryCoord2D(s,n),i.setCoords({pt:n}),s=cn(e.vmax,0,1),this.queryCoord2D(s,n),void i.mergeNe(n)}K(0)}orientBottomUp(){kge(this)}isLine(){return!0}isDegenerateToLineHelper(e){return K(0),!1}copyIgnoreAttributes(e){K(0)}calculateArea2DHelper(){return K(0),0}absNorm(){return this.getStartXY().norm(1)+this.getEndXY().norm(1)}queryEnvelopeW(e,i){i.setCoords(this.getCoord2D(e.vmin)),i.mergeNe(this.getCoord2D(e.vmax))}setSegmentFromCoords(e,i){K(0)}writeInBufferStream(e,i){return K(0),0}readFromBufferStream(e,i){K(0)}snapControlPoints(e){return!1}needsSnapControlPoints(e){return!1}calculateSpecialPointsForCracking(e,i){return K(0),0}ensureXYMonotone(){return!1}setCoordsForIntersector(e,i,s){IJe(this,e,i)}static isIntersectingLineLine(e,i,s,n){return K(0),0}static isIntersectingLineLine_(e,i,s,n){return K(0),0}copyToImpl(e){}reverseImpl(){}equalsImpl(e){return!0}equalsImplTol(e,i){return!0}getHashCodeImpl(){return K(0),0}swapImpl(e){K(0)}afterCompletedModification(){}endPointModified(){}clearEndPointModified(){}intersect(e,i,s,n,r){return qv(!1,this,e,i,s,n,r)}intersectPoint(e,i,s){i.length<1&&Mi("");const n=Ob(this,e,s,!1);return n>=0?(i&&(i[0]=n),1):0}isIntersecting(e,i,s){return u5(!1,this,e,i,s)!==0}intersect_(e,i,s,n){return K(0),0}}si.type=me.enumLine;class Qt{constructor(e){this.m_seg=null,this.m_curves=null,this.m_lineBuffer=new si,this.m_mask=0,this.m_active=0,e!==void 0&&(e.copy?e.copy.copyTo(this,!1):e.move?this.assignMove(e.move):e.segment?this.copyFrom(e.segment,!!e.bIgnoreAttributes):K(0))}assignCopy(e){return e instanceof Qt?this!==e&&e.copyTo(this,!1):this.copyFrom(e,!1),this}assignMove(e){if(e instanceof Qt){if(this===e)return this;this.reset(),1&e.m_mask&&(this.m_lineBuffer=e.m_lineBuffer,e.m_lineBuffer=null,this.m_mask=1),this.m_curves=e.m_curves,this.m_mask=e.m_mask,this.m_active=e.m_active,e.reset(),this.m_seg=this.activeSegment(),e.m_seg=null}else{if(this.m_seg===e)return this;this.create(e.getGeometryType()),this.m_seg.swap(e)}return this}activeSegment(){switch(this.m_active){case 0:return null;case 1:return this.line();case 2:return this.arc();case 4:return this.bezier3();case 8:return this.bezier2();case 16:return this.rbezier2();default:bt("")}}get(){return this.m_seg}reset(){1&this.m_mask&&(this.m_lineBuffer=null),this.m_mask>1&&(this.m_curves=null),this.m_mask=0,this.m_active=0}empty(){return this.m_seg===null}copyTo(e,i){this!==e&&(this.empty()?e.m_seg=null:e.copyFrom(this.m_seg,i))}copyToWithZ(e,i){K(0)}createImpl(e){switch(e){case me.enumLine:1&this.m_mask||(this.m_lineBuffer=new si,this.m_mask|=1,this.m_active=1);break;case me.enumEllipticArc:2&this.m_mask||(this.m_curves=new zu,this.m_mask=1&this.m_mask|2,this.m_active=2);break;case me.enumBezier:4&this.m_mask||(this.m_curves=new Nu,this.m_mask=1&this.m_mask|4,this.m_active=4);break;case me.enumBezier2:8&this.m_mask||(this.m_curves=new em,this.m_mask=1&this.m_mask|8,this.m_active=8);break;case me.enumRationalBezier2:16&this.m_mask||(this.m_curves=new ba,this.m_mask=1&this.m_mask|16,this.m_active=16);break;default:Je("")}}create(e){e===me.enumLine?this.createLine():e===me.enumEllipticArc?this.createEllipticArc():e===me.enumBezier?this.createCubicBezier():e===me.enumRationalBezier2?this.createQuadraticRationalBezier():e===me.enumBezier2?this.createQuadraticBezier():Je("Segment_buffer.create")}copyFrom(e,i){this.m_seg!==e&&(this.create(e.getGeometryType()),i?e.copyIgnoreAttributes(this.m_seg):e.copyTo(this.m_seg))}copyFromWithZ(e,i){K(0)}line(){return this.m_lineBuffer}arc(){return this.m_curves}bezier3(){return this.m_curves}bezier2(){return this.m_curves}rbezier2(){return this.m_curves}createLine(){return this.createImpl(me.enumLine),this.m_seg=this.line(),this.line()}createEllipticArc(){return this.createImpl(me.enumEllipticArc),this.m_seg=this.arc(),this.arc()}createCubicBezier(){return this.createImpl(me.enumBezier),this.m_seg=this.bezier3(),this.bezier3()}createQuadraticRationalBezier(){return this.createImpl(me.enumRationalBezier2),this.m_seg=this.rbezier2(),this.rbezier2()}createQuadraticBezier(){return this.createImpl(me.enumBezier2),this.m_seg=this.bezier2(),this.bezier2()}releaseSegment(){if(this.m_seg=null,this.m_active===0&&bt("releaseSegment"),1&this.m_active){const i=this.line();return this.m_mask-=1,this.m_active=0,this.m_lineBuffer=null,i}let e;return 2&this.m_active?e=this.arc():4&this.m_active?e=this.bezier3():8&this.m_active?e=this.bezier2():16&this.m_active?e=this.rbezier2():bt("releaseSegment"),this.m_mask-=this.m_active,this.m_active=0,this.m_curves=null,e}equals(e){return e instanceof Qt?this===e||(this.empty()?e.empty():!e.empty()&&this.get().equals(e.get())):(K(0),!1)}}const aot=["0","1","2","3","4","5","6","7","8","9","b","c","d","e","f","g","h","j","k","m","n","p","q","r","s","t","u","v","w","x","y","z"];function lot(t,e,i){const s=Vi(e,"R");let n=0,r=0;for(let o=0;o<e;o++){let l=t[n]>>r&31;if(r+=5,r>31){const f=37-r;l&=(1<<f)-1,r-=32,n++,l|=(t[n]&(1<<r)-1)<<f}const c=aot[l];s[e-1-o]=c}return i>e?s.push(..."0".repeat(i-e)):i<e&&(s.length=i),s.join("")}function Tse(t,e,i,s,n){K(s>>5<n.length);let r=e,o=i;for(let l=s;l>=0;l-=2){const c=31&l,f=.5*(o+r);t>=f?(n[l>>5]|=1<<c,r=f):o=f}}let Ise=new Set;const Lz=2147483645n,q9=9007199254740990n,BN="operation is not supported for unknown coordinate systems";var Mse;function c5(){return{majorSemiAxis:0,e2:0,minorSemiAxis:0,flattening:0,isSphere(){return this.e2===0}}}function uot(t,e,i){t.majorSemiAxis=e,t.minorSemiAxis=e*(1-i),t.e2=i*(2-i),t.flattening=i}function cot(t){bot(t)}function hot(){return!1}function Pye(){return!!eC}function Fz(t,e,i){return K(Pye()),g7(t,0,null,!1)}function Tye(t,e){K(Pye());const i=new Rc;let s;return s=Bj(t),i.m_unit=s.isPCS?new JE(s.metersOrRadiansPerUnit):new HE(s.metersOrRadiansPerUnit),m7(i.m_precisionDescriptor,s,null,1),i.m_bDefaultDescriptor=!0,i.m_userWKT=t,i.calculateHashCode(),i.initDbgName(),i}function Iye(t,e,i,s,n=!0){let r=null;return e&&(r=Mrt(e,n)),dot(t,r,i,s,n)}function dot(t,e,i,s,n){t||Je("!PE_coord_sys");const r=new Rc;let o;return o=n?Prt(t):new Fj(t,!1),m7(r.m_precisionDescriptor,o,e,s),r.m_bDefaultDescriptor=!0,r.setHorzProj_(o),r.m_vertcs=e,r.m_userWKID=o.getLatestID(),r.calculateHashCode(),r.initDbgName(),r}function fot(t,e,i=!1){t.getCoordinateSystemType()===3&&Je("image spatial reference cannot be altered");const s=new Rc,n=t;return s.m_peCoordSysVal=n.m_peCoordSysVal,s.m_vertcs=n.m_vertcs,s.m_unit=n.m_unit,s.m_precisionDescriptor.assign(e),s.m_localZToXYFactor=n.m_localZToXYFactor,(Number.isNaN(s.m_precisionDescriptor.m_falseX)||Number.isNaN(s.m_precisionDescriptor.m_falseY))&&(s.m_precisionDescriptor.m_falseX=n.m_precisionDescriptor.m_falseX,s.m_precisionDescriptor.m_falseY=n.m_precisionDescriptor.m_falseY),s.m_precisionDescriptor.snapPrecision(),s.m_precisionDescriptor.fixTolerance(),s.m_userWKID=n.m_userWKID,s.m_precisionDescriptor.equals(n.m_precisionDescriptor)?s.m_bDefaultDescriptor=n.m_bDefaultDescriptor:s.m_bDefaultDescriptor=!1,i&&(s.m_bDefaultDescriptor=!0),s.calculateHashCode(),s.initDbgName(),s}function HN(t){const e=t.getCoordinateSystemType();return e===1?t:(e===3&&K(0),t.getGCS())}let UN;function pot(){return UN||(UN=(()=>{const t=Math.trunc(Math.random()*vo()),e=Date.now();return`|abba_000|${t.toString(16)}|${e.toString(16)}|`})()),UN}(function(t){t[t.utmDefault=0]="utmDefault",t[t.utmNorthSouth=1]="utmNorthSouth"})(Mse||(Mse={}));let YN,XN,WN;function mot(t){return t.startsWith(pot())}class Rc{destroy(){Trt(this.m_peCoordSysVal),this.getCoordinateSystemType()===1||this.getCoordinateSystemType()===2?this.getPECoordSys().destroy():bt("SpatialReference.destroy")}constructor(){this.m_vertcs=null,this.m_peCoordSysVal=null,this.m_userWKID=0,this.m_userWKT=null,this.m_geogSpatialReference=null,this.m_srToGcs=null,this.m_gcsToSr=null,this.m_defaultPrecisionSR=null,this.m_localZToXYFactor=-1,this.m_precisionDescriptor=new Gl,this.m_hashCode=0,this.m_bDefaultDescriptor=!1,jj(this.m_precisionDescriptor),Ise&&Ise.add(new WeakRef(this))}attachToPe(){(this.m_userWKID>0?Fz(this.m_userWKID):Tye(this.m_userWKT)).copyTo(this,!1)}copyTo(e,i=!0){(i||e.m_bDefaultDescriptor)&&(e.m_bDefaultDescriptor=this.m_bDefaultDescriptor,e.m_precisionDescriptor.assign(this.m_precisionDescriptor)),e.m_defaultPrecisionSR=null,e.m_gcsToSr=this.m_gcsToSr,e.m_geogSpatialReference=this.m_geogSpatialReference,e.m_hashCode=this.m_hashCode,e.m_localZToXYFactor=this.m_localZToXYFactor,e.m_peCoordSysVal=this.m_peCoordSysVal,e.m_srToGcs=this.m_srToGcs,e.m_userWKID=this.m_userWKID,e.m_userWKT=this.m_userWKT,e.m_vertcs=this.m_vertcs,e.m_unit=this.m_unit}getHashCode(){return this.m_hashCode}getHashCodeHorizontal(){let e=0;return e=this.m_peCoordSysVal?this.m_peCoordSysVal.getHashCode():this.m_unit?this.m_unit.getHashCode():305419891,e}updateTransform(e){if(this.getCoordinateSystemType()===1)return FN(this,this,null);let i=e?this.m_srToGcs:this.m_gcsToSr;if(i)return i;const s=this.getGCS(),n=this;i=e?FN(n,s,null):FN(s,n,null);const r=i;return(e?this.m_srToGcs:this.m_gcsToSr)||(e?this.m_srToGcs=r:this.m_gcsToSr=r,i)}getHashCodeVertical(){return this.m_vertcs?this.m_vertcs.getHashCode():0}calculateHashCode(){let e=this.getHashCodeHorizontal();const i=this.getHashCodeVertical(),s=this.m_precisionDescriptor.getHashCode();e=Va(e,i),this.m_hashCode=Va(e,s)}initDbgName(){}setHorzProj_(e){this.m_peCoordSysVal=e,this.m_unit=this.m_peCoordSysVal.getUnit()}getTolerance(e=0){return this.m_precisionDescriptor.getTolerance(e)}getResolution(e=0){return this.m_precisionDescriptor.getResolution(e)}getPECoordSys(){return this.m_peCoordSysVal?this.m_peCoordSysVal.m_peCoordSys:null}getPCSInfo(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPCSInfo()}getCentralMeridian(){return this.throwIfNotGCSOrPCS(),this.getCoordinateSystemType()===1?0:this.getPCSInfo().getCentralMeridian()}getCoordinateSystemType(){const e=this.getPECoordSys();if(e)switch(e.getType()){case zi.PE_TYPE_GEOGCS:return 1;case zi.PE_TYPE_PROJCS:return 2;default:return 0}else{if((this.m_userWKID>0||this.m_userWKT)&&this.m_unit instanceof JE)return 2;if(this.m_unit instanceof HE)return 1}return 0}getID(){return this.m_userWKID}getLatestID(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getLatestID():this.m_userWKID}getOldID(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getOldID():this.m_userWKID}getVerticalID(){return js("vcs not implemented"),0}getLatestVerticalID(){return this.m_vertcs?this.m_vertcs.getLatestID():0}getOldVerticalID(){return js("vcs not implemented"),0}getPEVerticalCoordSys(){return null}getPole(e){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPole(e)}getText(){const e=this.getPECoordSys();return e?cse(e):this.m_userWKT??""}getTextExtended(e){const i=this.getPECoordSys();return i?this.getPEVerticalCoordSys()?qnt(null,i,this.getPEVerticalCoordSys()):cse(i,e):this.m_userWKT??""}getText2(e=-1){const i=this.getPECoordSys();return i?Vnt(i,e):this.m_userWKT??""}getUnit(){return this.m_unit}getUnitsPerMillimeter(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getUnitsPerMillimeter():this.m_unit instanceof JE?.001/this.m_unit.getUnitToBaseFactor():this.m_unit instanceof HE?.001/(Bj(this.m_userWKT??this.m_userWKID).semiMajor*this.m_unit.getUnitToBaseFactor()):(bn("sr object not in valid state"),0)}getAuthorityName(){return""}getVerticalUnit(){return js("vcs not implemented"),{}}getVCS(){return this.m_vertcs}hasVCS(){return!1}getGCSHorisonIsInclusive(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSHorisonIsInclusive()}getGCSHorizon(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSHorizon()}getGCS(){const e=this.getCoordinateSystemType();if(e===0)bn(BN);else{if(e===1)return this;e===3&&bn("image cs not supported")}if(this.m_geogSpatialReference)return this.m_geogSpatialReference;let i;if(this===Mye()||this===Aye())i=Dye();else{K(this.m_peCoordSysVal);const s=this.m_peCoordSysVal.m_peCoordSys.getGeogcs();s||bt(""),i=Iye(s,this.m_vertcs,null,this.m_precisionDescriptor.getPrecision(),this.m_peCoordSysVal.getCached())}return this.m_geogSpatialReference?i=this.m_geogSpatialReference:this.m_geogSpatialReference=i,i}getGCSSplitLines(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSSplitLines()}toGCS(e,i){if(e.length===0)return 0;e.length>i.length&&Je("coordsSrc.size() > coordsDst.size()");const s=this.getCoordinateSystemType();if(s===0&&bn(BN),s===1)return E6(i,e,e.length),e.length;K(this.m_peCoordSysVal);const n=this.getSRToGCSTransform();return new a2().transform(n,e,e.length,i)}toMilitaryGrid(e,i,s,n,r){return K(0),[]}fromMilitaryGrid(e,i){return[]}toUnitedStatesNationalGrid(e,i,s,n){return[]}fromUnitedStatesNationalGrid(e){return[]}toUniversalTransverseMercator(e,i,s){return[]}fromUniversalTransverseMercator(e,i){return[]}toWorldGeographicReference(e,i,s){return[]}fromWorldGeographicReference(e){return[]}toGlobalArea(e){return[]}fromGlobalArea(e,i){return[]}toDegreeMinuteSecond(e,i){return[]}fromDegreeMinuteSecond(e){return[]}toDegreeDecimalMinute(e,i){return[]}fromDegreeDecimalMinute(e){return[]}toDecimalDegree(e,i){return[]}fromDecimalDegree(e){return[]}fromGeohashToGCSEnvelope(e){return{}}toGeohash(e,i=8){const s=e.clone();s.scale(this.getGCS().getUnit().getID()===9102?1:this.getGCS().getUnit().getUnitToBaseFactor()/Math.PI*180),s.x<-180?(s.x=Mg(s.x,360),s.x<-180&&(s.x+=360)):s.x>180&&(s.x=Mg(s.x,360),s.x>180&&(s.x-=360)),s.y>90&&(s.y=90),s.y<-90&&(s.y=-90);const n=5*i,r=new Uint32Array(4);return Tse(s.x,-180,180,n-1,r),Tse(s.y,-90,90,n-2,r),lot(r,i,i)}calculateContainingGeohash(e){return"1;"}calculateCoveringGeohashes(e,i){return[]}calculateGeohashNeighbours(e){return[]}calculateGeohashNeighbour(e,i,s){return""}isPannable(){const e=this.getCoordinateSystemType();return e!==0&&e!==3&&(K(this.m_peCoordSysVal),this.m_peCoordSysVal.isPannable())}getPannableExtent(){return this.isPannable()||Je("!is_pannable"),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPannableExtent()}getPannableExtentInGCS(){return this.isPannable()||Je("!is_pannable"),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPannableExtentGCS()}throwIfNotGCSOrPCS(){const e=this.getCoordinateSystemType();e!==1&&e!==2&&Je("Not a GCS or PCS")}getDomainXY(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getDomainXY()}getFullWorldExtent(){return this.throwIfNotGCSOrPCS(),this.isPannable()?this.getPannableExtent():this.getDomainXY()}queryPrecisionDescriptor(e){if(e.assign(this.m_precisionDescriptor),Number.isNaN(e.m_falseX))if(bn("projection engine is not loaded"),K(this.m_peCoordSysVal!==null),this.m_precisionDescriptor.m_precision!==2){const i=this.m_peCoordSysVal.getDomainXY();e.m_falseX=i.xmin,e.m_falseY=i.ymin}else e.m_falseX=-Number.MAX_VALUE,e.m_falseY=-Number.MAX_VALUE}queryPrecisionDescriptorWithoutFalseXY(e){e.assign(this.m_precisionDescriptor),e.m_falseX=Number.NaN,e.m_falseY=Number.NaN}queryDefaultPrecisionDescriptorWithoutFalseXY(e){if(this.m_bDefaultDescriptor)e.assign(this.m_precisionDescriptor);else{const i=this.getCoordinateSystemType();i===0?got(e,this.m_unit,this.m_vertcs,this.m_precisionDescriptor.getPrecision()):i===3?js("image cs"):m7(e,this.m_peCoordSysVal,this.m_vertcs,this.m_precisionDescriptor.getPrecision())}e.m_falseX=Number.NaN,e.m_falseY=Number.NaN}horizontalEqual(e){return xrt(this.m_peCoordSysVal,e.m_peCoordSysVal)}verticalEqual(e){return this.m_vertcs!==null==(e.m_vertcs!==null)&&(!this.m_vertcs||this.m_vertcs.equals(e.m_vertcs))}equals(e){const i=e;if(this===i)return!0;if(!this.horizontalEqual(i)||!this.verticalEqual(i)||!i.m_peCoordSysVal&&(K(!this.m_peCoordSysVal),this.m_unit!==null!=(i.m_unit!==null)||this.m_unit&&!this.m_unit.equals(i.m_unit)||this.m_localZToXYFactor!==i.m_localZToXYFactor))return!1;if(!this.m_bDefaultDescriptor||!i.m_bDefaultDescriptor){if(this.m_peCoordSysVal){if(!this.m_precisionDescriptor.equalsWithoutFalseXY(i.m_precisionDescriptor))return!1;K(i.m_peCoordSysVal);let s=this.m_precisionDescriptor.m_falseX,n=this.m_precisionDescriptor.m_falseY;if(Number.isNaN(s)){const l=this.m_peCoordSysVal.getDomainXY();s=l.xmin,n=l.ymin}let r=i.m_precisionDescriptor.m_falseX,o=i.m_precisionDescriptor.m_falseY;if(Number.isNaN(r)){const l=i.m_peCoordSysVal.getDomainXY();r=l.xmin,o=l.ymin}return s===r&&n===o}return this.m_precisionDescriptor.equals(i.m_precisionDescriptor)}return!0}equalForProjection(e,i){if(this===e)return!0;const s=this.getCoordinateSystemType(),n=e.getCoordinateSystemType();if(s===0||n===0)return s===0&&n===0?(!i||this.getZToXYFactor()===e.getZToXYFactor())&&(!this.getUnit()||!e.getUnit()||this.getUnit().equals(e.getUnit())):s!==3&&n!==3&&(this.getUnit()===null||e.getUnit()===null||(!i||this.getZToXYFactor()===e.getZToXYFactor())&&this.getUnit().equals(e.getUnit()));if(s!==n)return!1;if(s===3)return this.equals(e);if(wrt(this.m_peCoordSysVal,e.m_peCoordSysVal)){if(!i)return!0;if(this.m_vertcs!==null==(e.m_vertcs!==null))return!this.m_vertcs||this.m_vertcs.equalForProjection(e.m_vertcs)}return!1}equalHorizontal(e){return this.horizontalEqual(e)}equalVertical(e){return!1}equalVerticalVCS(e){return!1}convergenceAngle(e){return 0}getPeCoordsysCopy(){if(this.m_peCoordSysVal){const e=this.m_peCoordSysVal.m_peCoordSys;return e||bt("cannot clone coord sys"),e}return null}getPeVertcsCopy(){return 0}throwIfLocal(){this.getCoordinateSystemType()===0&&Je(BN)}getPrimeMeridian(){return this.throwIfLocal(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPrimeMeridian()}getSRToGCSTransform(){return this.updateTransform(!0)}getGCSToSRTransform(){return this.updateTransform(!1)}getOneMeter(){return 1e3*this.getUnitsPerMillimeter()}getOneMeterPCSUnit(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getOneMeterPCSUnit()}getDefaultPrecisionSR(){if(this.m_bDefaultDescriptor)return this;if(this.m_defaultPrecisionSR===null){const e=new Gl;this.queryDefaultPrecisionDescriptorWithoutFalseXY(e),this.m_defaultPrecisionSR=fot(this,e,!0)}return this.m_defaultPrecisionSR}getPCSHorizon(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getPCSHorizon()}getHorzUnitFactor(){return this.m_unit?this.m_unit.getUnitToBaseFactor():1}querySpheroidData(e){this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal);const i=this.getGCS().getPECoordSys().getDatum().getSpheroid(),s=i.getFlattening();uot(e,i.getAxis(),s)}getAreaOfUse(){this.getCoordinateSystemType()===0&&bn(""),K(this.m_peCoordSysVal);const e=this.m_peCoordSysVal.getAreaOfUse();return e===null?new dte:new dte({geom:e.clone(),sr:Fz(4326)})}getZToXYFactor(){return 1}isCustomWkid(){return!1}getOneDegreeGCSUnit(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getOneDegreeGCSUnit()}getGcsUnitFactor(){return this.throwIfNotGCSOrPCS(),K(this.m_peCoordSysVal),this.m_peCoordSysVal.getGcsUnitFactor()}snapGeometry(e){if(e.isEmpty()||this.m_precisionDescriptor.getPrecision()===2)return!1;const i=e.getGeometryType();if(el(i))return this.snapMultiVertex_(e);if(i===me.enumPoint)return this.snapPoint_(e);if(i===me.enumEnvelope)return this.snapEnvelope_(e);if(Dn(i))return this.snapSegment_(e);if(i===me.enumGeometryCollection){const s=e;let n=!1;for(let r=0,o=s.getGeometryCount();r<o;++r)n=this.snapGeometry(s.getGeometry(r))||n;return n}bt("what else?")}snapMultiVertex_(e){if(K(!e.isEmpty()),K(this.m_precisionDescriptor.getPrecision()!==2),bi(e.getGeometryType())){const r=e;if(r.hasNonLinearSegments())return this.snapGeometryWithCurves_(r)}const i=e.getImpl(),s=i.getDescription();let n=!1;for(let r=0,o=s.getAttributeCount();r<o;r++){const l=s.getSemantics(r),c=i.getAttributeStreamRef(l);n=this.snapAttributes(l,c,0,i.getPointCount())||n}return n&&i.notifyModifiedFlags(2001),n}snapPoint_(e){return!1}snapEnvelope_(e){return!1}snapSegment_(e){K(!e.isEmpty()),K(this.m_precisionDescriptor.getPrecision()!==2);const i=new Gl;this.queryPrecisionDescriptor(i);const s=e.getStartXY(),n=new Y;n.x=F_(s.x,i.getFalseX(),i.getGridUnitsXY()),n.y=F_(s.y,i.getFalseY(),i.getGridUnitsXY());let r=!n.equals(s);const o=e.getEndXY(),l=new Y;l.x=F_(o.x,i.getFalseX(),i.getGridUnitsXY()),l.y=F_(o.y,i.getFalseY(),i.getGridUnitsXY()),r||(r=!l.equals(o)),r&&e.changeEndPoints2D(n,l);const c=(y,_,x)=>{let S=!1;{const P=e.getStartAttributeAsDbl(y,0),A=F_(P,_,x),k=!ga(A,P);S||(S=k),k&&e.setStartAttribute(y,0,A)}{const P=e.getEndAttributeAsDbl(y,0),A=F_(P,_,x),k=!ga(A,P);S||(S=k),k&&e.setEndAttribute(y,0,A)}return S};let f=r?1:0;return e.hasAttribute(1)&&(f|=c(1,i.getFalseZ(),i.getGridUnitsZ())?1:0),e.hasAttribute(2)&&(f|=c(2,i.getFalseM(),i.getGridUnitsM())?1:0),!!f}snapGeometryWithCurves_(e){K(!e.isEmpty()),K(this.m_precisionDescriptor.getPrecision()!==2);const i=e.createInstance(),s=new Qt;let n=0;for(let r=0,o=e.getPathCount();r<o;++r){const l=e.getSegmentCountPath(r);if(l===0){if(i.addPath(e,r,!0),i.getPathSize(r)===1){const f=new Ht;i.getPointByVal(i.getPointCount()-1,f),n|=this.snapGeometry(f)?1:0,i.setPointByVal(i.getPointCount()-1,f)}continue}const c=e.isClosedPath(r);for(let f=0,y=c?l-1:l;f<y;++f)e.getSegmentFromPath(r,f,s,!1),n|=this.snapGeometry(s.get())?1:0,i.addSegment(s.get(),f===0);c&&(e.getSegmentFromPath(r,l-1,s,!1),n|=this.snapGeometry(s.get())?1:0,l===1?i.addPathFromClosedSegment(s.get(),!1):i.closeLastPathWithSegment(s.get()))}return n&&i.copyTo(e),!!n}snapAttributes(e,i,s,n){let r=!1;const o=new Gl;if(this.queryPrecisionDescriptor(o),e===0){const l=i;for(let c=s;c<n;c++){const f=l.read(2*c),y=Rc.s_SnapValue(f,o.getFalseX(),o.getGridUnitsXY()),_=l.read(2*c+1),x=Rc.s_SnapValue(_,o.getFalseY(),o.getGridUnitsXY());r=r||y!==f||x!==_,r&&(l.write(2*c,y),l.write(2*c+1,x))}}else if(e===1){const l=i;for(let c=s;c<n;c++){const f=l.read(c),y=Rc.s_SnapValue(f,o.getFalseZ(),o.getGridUnitsZ());r=r||!ga(y,f),r&&l.write(c,y)}}else if(e===2){const l=i;for(let c=s;c<n;c++){const f=l.read(c),y=Rc.s_SnapValue(f,o.getFalseM(),o.getGridUnitsM());r=r||!ga(y,f),r&&l.write(c,y)}}return r}static s_SnapValue(e,i,s){return fv((e-i)*s)/s+i}}class Gl{constructor(){const e=q9,i=1e-4,s=.001,n=i*Number(e)*.5;this.m_precision=1,this.m_falseX=-n,this.m_falseY=-n,this.m_unitsXY=Number(e)/(2*n),this.m_falseM=-1e5,this.m_unitsM=1/i,this.m_falseZ=-1e5,this.m_unitsZ=1/i,this.m_toleranceXY=s,this.m_toleranceM=s,this.m_toleranceZ=s}getHashCode(){let e=7777,i=7777;return i=Va(i,this.m_falseM),i=Va(i,this.m_unitsM),e=Va(e,this.m_unitsXY),i=Va(i,this.m_toleranceXY),e=Va(e,this.m_falseZ),i=Va(i,this.m_toleranceZ),e=Va(e,this.m_unitsZ),i=Va(i,this.m_toleranceM),e=Va(e,this.m_precision),Va(e,i)}clone(){const e=new Gl;return e.m_falseX=this.m_falseX,e.m_falseY=this.m_falseY,e.m_unitsXY=this.m_unitsXY,e.m_falseZ=this.m_falseZ,e.m_unitsZ=this.m_unitsZ,e.m_falseM=this.m_falseM,e.m_unitsM=this.m_unitsM,e.m_toleranceXY=this.m_toleranceXY,e.m_toleranceZ=this.m_toleranceZ,e.m_toleranceM=this.m_toleranceM,e.m_precision=this.m_precision,e}assign(e){return this.m_falseX=e.m_falseX,this.m_falseY=e.m_falseY,this.m_unitsXY=e.m_unitsXY,this.m_falseZ=e.m_falseZ,this.m_unitsZ=e.m_unitsZ,this.m_falseM=e.m_falseM,this.m_unitsM=e.m_unitsM,this.m_toleranceXY=e.m_toleranceXY,this.m_toleranceZ=e.m_toleranceZ,this.m_toleranceM=e.m_toleranceM,this.m_precision=e.m_precision,this}initialize2D(e,i){}getTolerance(e){switch(e){case 0:return this.m_toleranceXY;case 1:return this.m_toleranceZ;case 2:return this.m_toleranceM;default:return 0}}getResolution(e){if(this.m_precision===2)return 0;switch(e){case 0:return 1/this.m_unitsXY;case 1:return 1/this.m_unitsZ;case 2:return 1/this.m_unitsM;default:return 0}}getFalseX(){return this.m_falseX}getFalseY(){return this.m_falseY}getFalseZ(){return this.m_falseZ}getFalseM(){return this.m_falseM}getGridUnitsXY(){return this.m_unitsXY}getGridUnitsZ(){return this.m_unitsZ}getGridUnitsM(){return this.m_unitsM}getPrecision(){return this.m_precision}static getLimit32(){return 2147483645}static getLimit64(){return 9007199254740990n}static getLimitFloat(){return 0}getXYGridRange(){const e=new xe;switch(this.m_precision){case 0:{const i=Gl.getLimit32()/this.getGridUnitsXY();e.setCoords({xmin:this.getFalseX(),ymin:this.getFalseY(),xmax:this.getFalseX()+i,ymax:this.getFalseY()+i})}break;case 1:{const i=Number(Gl.getLimit64())/this.getGridUnitsXY();e.setCoords({xmin:this.getFalseX(),ymin:this.getFalseY(),xmax:this.getFalseX()+i,ymax:this.getFalseY()+i})}break;case 2:e.setCoords({xmin:-Number.MAX_VALUE,ymin:-Number.MAX_VALUE,xmax:Number.MAX_VALUE,ymax:Number.MAX_VALUE});break;default:e.setEmpty(),bt("")}return e}getZGridRange(){const e=new Ze;switch(this.m_precision){case 0:{const i=Gl.getLimit32()/this.getGridUnitsZ();e.setCoords(this.getFalseZ(),this.getFalseZ()+i)}break;case 1:{const i=Number(Gl.getLimit64())/this.getGridUnitsZ();e.setCoords(this.getFalseZ(),this.getFalseZ()+i)}break;case 2:e.setCoords(-Number.MAX_VALUE,Number.MAX_VALUE);break;default:e.setEmpty(),bt("")}return e}getMGridRange(){const e=new Ze;switch(this.m_precision){case 0:{const i=Gl.getLimit32()/this.getGridUnitsM();e.setCoords(this.getFalseM(),this.getFalseM()+i)}break;case 1:{const i=Number(Gl.getLimit64())/this.getGridUnitsM();e.setCoords(this.getFalseM(),this.getFalseM()+i)}break;case 2:e.setCoords(-Number.MAX_VALUE,Number.MAX_VALUE);break;default:e.setEmpty(),bt("")}return e}setTolerance(e,i){switch(i<0&&Je("tol < 0"),Number.isFinite(i)||Je("tol is not finite"),e){case 0:this.m_toleranceXY=i;break;case 1:this.m_toleranceZ=i;break;case 2:this.m_toleranceM=i;break;default:Je("cannot set tolerance for this attribute")}}setGridParams(e,i,s){Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(s)||Je("grid params are not finite"),s<1&&Je("grid units cannot be smaller than 1.0"),this.m_falseX=e,this.m_falseY=i,this.m_unitsXY=s}setZParams(e,i){Number.isFinite(e)&&Number.isFinite(i)||Je("grid params are not finite"),i<1&&Je("grid units cannot be smaller than 1.0"),this.m_falseZ=e,this.m_unitsZ=i}setMParams(e,i){Number.isFinite(e)&&Number.isFinite(i)||Je("grid params are not finite"),i<1&&Je("grid units cannot be smaller than 1.0"),this.m_falseM=e,this.m_unitsM=i}setPrecision(e){}equals(e){return this===e||ga(this.m_falseX,e.m_falseX)&&ga(this.m_falseY,e.m_falseY)&&this.equalsWithoutFalseXY(e)}snapPrecision(){if(this.m_precision===2)return;const e=(s,n,r,o)=>{if(!Number.isFinite(n)||!Number.isFinite(r))return r;if(r<1)return 1;if(!o)return r;const l=Number(s)/r;return Math.trunc((n+l-n)*r)>s&&(r=s/(n+l-n)),Math.max(1,r)},i=Number(this.m_precision===0?Lz:q9);this.m_unitsXY=e(i,this.m_falseX,this.m_unitsXY,!0),this.m_unitsXY=e(i,this.m_falseY,this.m_unitsXY,!0),this.m_unitsZ=e(i,this.m_falseZ,this.m_unitsZ,!1),this.m_unitsM=e(i,this.m_falseM,this.m_unitsM,!1)}verifyPrecision(){if(this.m_precision===2)return!0;const e=(s,n,r,o)=>{if(r<1||!Number.isFinite(n)||!Number.isFinite(r))return!1;if(!o)return!0;const l=Number(s)/r;return!(BigInt((n+l-n)*r)>s)},i=this.m_precision===0?Lz:q9;return!!e(i,this.m_falseX,this.m_unitsXY,!0)&&!!e(i,this.m_falseY,this.m_unitsXY,!0)&&!!e(i,this.m_falseZ,this.m_unitsZ,!1)&&!!e(i,this.m_falseM,this.m_unitsM,!1)}fixTolerance(){this.m_precision!==2&&(this.m_toleranceXY=Math.max(2/this.m_unitsXY,this.m_toleranceXY),this.m_toleranceZ=Math.max(2/this.m_unitsZ,this.m_toleranceZ),this.m_toleranceM=Math.max(2/this.m_unitsM,this.m_toleranceM),(Number.isNaN(this.m_falseX)||Number.isNaN(this.m_falseY))&&(this.m_falseX=this.m_falseY=Number.NaN))}equalsWithoutFalseXY(e){return this===e||this.m_unitsXY===e.m_unitsXY&&this.m_falseZ===e.m_falseZ&&this.m_unitsZ===e.m_unitsZ&&this.m_falseM===e.m_falseM&&this.m_unitsM===e.m_unitsM&&this.m_toleranceXY===e.m_toleranceXY&&this.m_toleranceZ===e.m_toleranceZ&&this.m_toleranceM===e.m_toleranceM&&this.m_precision===e.m_precision}setBestXyDomainFromEnvelope(e,i){}setBestZDomainFromZRange(e,i,s){}setBestMDomainFromMRange(e,i,s){}}function Mye(){return YN||(YN=g7(3857,0,null,!0)),YN}function Aye(){return XN||(XN=g7(102100,0,null,!0)),XN}function Dye(){return WN||(WN=g7(4326,0,null,!0)),WN}function jj(t){t.m_falseX=0,t.m_falseY=0,t.m_unitsXY=1,t.m_falseZ=0,t.m_unitsZ=1,t.m_falseM=0,t.m_unitsM=1,t.m_toleranceXY=100*en(),t.m_toleranceZ=100*en(),t.m_toleranceM=100*en(),t.m_precision=2}function m7(t,e,i,s){const n=e instanceof Fj;jj(t),t.m_precision=s,t.m_falseX=Number.NaN,t.m_falseY=Number.NaN;const r=1e-4,o=.001,l=n?e.m_csType:e.isPCS?2:1;if(l===1){const y=(s===0?5555555555555555e-22:1e-9)*(n?e.getOneDegreeGCSUnit():Math.PI/e.metersOrRadiansPerUnit/180);t.m_unitsXY=1/y}else if(l===2){const y=(s===0?o:r)*(n?e.getOneMeterPCSUnit():1/e.metersOrRadiansPerUnit);t.m_unitsXY=1/y}else Je("unrecognized cs type");t.m_falseM=-1e5,t.m_unitsM=1/(s===0?o:r),t.m_unitsM=Math.max(1,t.m_unitsM),t.m_unitsXY=Math.max(1,t.m_unitsXY);let c=0,f=0;s!==0&&s!==1||(c=2/t.m_unitsXY,f=2/t.m_unitsM),t.m_toleranceXY=Math.max(c,n?e.getUnitsPerMillimeter():l===2?.001/e.metersOrRadiansPerUnit:.001/(e.semiMajor*e.metersOrRadiansPerUnit)),t.m_toleranceM=Math.max(o,f),kye(t,i)}function kye(t,e){if(t.m_falseZ=-1e5,e){const r=(t.m_precision===0?.001:1e-4)*e.getOneMeter();t.m_unitsZ=1/r}else t.m_unitsZ=1/(t.m_precision===0?.001:1e-4);t.m_unitsZ=Math.max(1,t.m_unitsZ);let n=0;t.m_precision!==0&&t.m_precision!==1||(n=2/t.m_unitsZ),t.m_toleranceZ=Math.max(e?e.getOneMeter()*.001:.001,n)}function got(t,e,i,s){jj(t),t.m_precision=s;const n=s===0?Lz:q9,r=1e-4,o=.001;let l=1,c=1,f=.001;e&&(c=e.getUnitToBaseFactor()),e&&e.getUnitType()===1?(l=400*Math.PI/180,f=8983152841195215e-24*Math.PI/180/c):(l=(s===0?o:r)*Number(n)*.5,f=o/c),l/=c,t.m_falseX=-l,t.m_falseY=-l,t.m_unitsXY=Number(n)/(2*l),t.m_falseM=-1e5,t.m_unitsM=1/(s===0?o:r),t.m_unitsM=Math.max(1,t.m_unitsM),t.snapPrecision();let y=0,_=0;t.m_precision!==0&&t.m_precision!==1||(_=2/t.m_unitsM,y=2/t.m_unitsXY),t.m_toleranceXY=Math.max(y,f),t.m_toleranceM=Math.max(o,_),kye(t,i)}function g7(t,e,i,s){if(!s&&e===0){if(t===3857)return Mye();if(t===102100)return Aye();if(t===4326)return Dye()}const n=new Rc;let r,o=null;return r=Bj(t),n.m_unit=r.isPCS?new JE(r.metersOrRadiansPerUnit):new HE(r.metersOrRadiansPerUnit),m7(n.m_precisionDescriptor,r,o,1),n.m_bDefaultDescriptor=!0,n.m_userWKID=t,n.calculateHashCode(),n.initDbgName(),n}function F_(t,e,i){return fv((t-e)*i)/i+e}let l2=null;const Nye=3552713678800501e-30;function yot(t,e,i){return t===e||Math.abs(t-e)<=i*(1+(Math.abs(t)+Math.abs(e))/2)}function gs(t,e){return yot(t,e,Nye)}function vot(t,e){return t===0||Math.abs(t)<=e}function _ot(t){return vot(t,Nye)}let qh,u2,zi,Za,Ha,Dg,Ase;function $ye(t){return{_this:t,get(){return this._this},reset(e){this._this=e},release(){const e=this._this;return this._this=null,e}}}let eC=null;function Bj(t){K(eC);const e=eC(t);return e.semiMajor=e.isPCS?Number.NaN:Sot(t),e}function bot(t){eC=t,K(eC)}function xot(t,e,i,s){return e<=0?(i[0]=0,s[0]=0,!1):(i[0]=e,s[0]=e,!0)}const wot=/(?:ELLIPSOID|SPHEROID)\["(?:\w|[-()])+",(\d+\.\d+)/;function Sot(t){if(typeof t=="string"){const e=t.match(wot);e&&e.length===2||Je("bad gcs wkt");const i=Number.parseFloat(e[1]);return Number.isFinite(i)||Je("bad gcs wkt"),i}return l2||Eot(),l2.has(t)||bn("gcs wkid not found"),l2.get(t)}function Eot(){l2=new Map;for(const t in M6){const e=Number.parseFloat(t),i=M6[t];if(Array.isArray(i))for(const s of i)l2.set(s,e);else l2.set(i,e)}xJe()}function Cot(t,e,i,s,n){if(t.equals(e))return!1;if(s){let l=1,c=0,f=1,y=1,_=0,x=1;Number.isNaN(t.m_heightMetersPerUnit)||(l=t.m_heightMetersPerUnit,c=t.m_heightZ0,f=t.m_heightSign,y=e.m_heightMetersPerUnit,_=e.m_heightZ0,x=e.m_heightSign);const S=f*x*l/y;for(let P=0;P<n;P++)s[P]=(s[P]-c)*S+_}let r=1,o=0;if(Number.isNaN(t.m_XYToRadians)||(r=t.m_XYToRadians/e.m_XYToRadians,o=t.m_PrimeMeridianDegrees-e.m_PrimeMeridianDegrees,o!==0&&(o=g1e(o),o/=e.m_XYToRadians)),Array.isArray(i)){const l=i;for(let c=0;c<n;c++)l[c][0]=l[c][0]*r+o,l[c][1]=l[c][1]*r}else{const l=i;for(let c=0;c<n;c++){const f=c<<1;l[f]=l[f]*r+o,l[f+1]=l[f+1]*r}}return!0}function Dse(){return{m_heightMetersPerUnit:0,m_heightSign:0,m_heightZ0:0,m_XYToRadians:0,m_PrimeMeridianDegrees:0,assign(t){this.m_heightMetersPerUnit=t.m_heightMetersPerUnit,this.m_heightSign=t.m_heightSign,this.m_heightZ0=t.m_heightZ0,this.m_XYToRadians=t.m_XYToRadians,this.m_PrimeMeridianDegrees=t.m_PrimeMeridianDegrees},equals(t){return ga(this.m_heightSign,t.m_heightSign)&&ga(this.m_heightMetersPerUnit,t.m_heightMetersPerUnit)&&ga(this.m_heightZ0,t.m_heightZ0)&&ga(this.m_XYToRadians,t.m_XYToRadians)&&ga(this.m_PrimeMeridianDegrees,t.m_PrimeMeridianDegrees)},initFromGcsAndVcsPe(t,e){this.m_heightSign=1,this.m_heightMetersPerUnit=Number.NaN,this.m_heightZ0=0,this.m_XYToRadians=Number.NaN,this.m_PrimeMeridianDegrees=Number.NaN,e&&K(0),t&&(this.m_XYToRadians=t.getUnit().getUnitFactor(),this.m_PrimeMeridianDegrees=t.getPrimem().getLongitude())},initFromGcsAndVcs(t,e){const i=t?t.getPECoordSys():null,s=e?e.getPEVerticalCoordSys():null;this.initFromGcsAndVcsPe(i,s)},processUnitParams(t){Number.isNaN(this.m_heightMetersPerUnit)&&(this.m_heightMetersPerUnit=t.m_heightMetersPerUnit,this.m_heightSign=t.m_heightSign,this.m_heightZ0=t.m_heightZ0),Number.isNaN(this.m_XYToRadians)&&(this.m_XYToRadians=t.m_XYToRadians,this.m_PrimeMeridianDegrees=t.m_PrimeMeridianDegrees)}}}function Pot(t,e,i,s,n,r,o){let l=null;e&&(l=e.getPEVerticalCoordSys());let c=null;t&&(c=t.getPECoordSys());let f=null;s&&(f=s.getPEVerticalCoordSys());let y=null;if(i&&(y=i.getPECoordSys()),!(c||l||y||f))return!1;const _=Dse();_.initFromGcsAndVcsPe(c,l);const x=Dse();return x.initFromGcsAndVcsPe(y,f),Cot(_,x,n,r,o)}ef(0),ef(1);const no="_gxVersion",Oye=2,Rye=1;function Lye(t){return Array.isArray(t)?t[0].spatialReference:t.spatialReference}function zz(t){switch(t.type){case"point":return Mot(t);case"multipoint":return Iot(t);case"polyline":return Dot(t);case"polygon":return Aot(t);case"extent":return Tot(t);default:throw new Error(`Unsupported geometry type: ${t.type}`)}}function Tot(t){if(!t.getCacheValue(no)){const e=new lr;e.setCoords(t.xmin,t.ymin,t.xmax,t.ymax),t.hasM&&e.setInterval(Oye,0,t.mmin,t.mmax),t.hasZ&&e.setInterval(Rye,0,t.zmin,t.zmax),t.setCacheValue(no,e)}return t.getCacheValue(no)}function Iot(t){if(!t.getCacheValue(no)){const e=new Jn,i=new Ht,s=t.points,n=t.hasM,r=t.hasZ,o=r?3:2;for(let l=0,c=s.length;l<c;l++){const f=s[l];i.setXYCoords(f[0],f[1]),r&&i.setZ(f[2]??0),n&&i.setM(f[o]??NaN),e.add(i)}t.setCacheValue(no,e)}return t.getCacheValue(no)}function Mot(t){if(!t.getCacheValue(no)){const e=new Ht;e.setXYCoords(t.x,t.y),t.hasM&&e.setM(t.m),t.hasZ&&e.setZ(t.z),t.setCacheValue(no,e)}return t.getCacheValue(no)}function Aot(t){if(!t.getCacheValue(no)){const e=new Wt;Fye(e,t),t.setCacheValue(no,e)}return t.getCacheValue(no)}function Dot(t){if(!t.getCacheValue(no)){const e=new vi;Fye(e,t),t.setCacheValue(no,e)}return t.getCacheValue(no)}function Fye(t,e){const i=e.type==="polygon",s=new Ht,n=i?e.rings:e.paths,r=e.hasM,o=e.hasZ,l=o?3:2;for(let c=0,f=n.length;c<f;c++){const y=n[c],_=i?y.length-1:y.length;for(let x=0;x<_;x++){const S=y[x];s.setXYCoords(S[0],S[1]),o&&s.setZ(S[2]??0),r&&s.setM(S[l]??NaN),x===0?t.startPathPoint(s):t.lineToPoint(s)}}}function zye(t){if(t.wkid)return Fz(t.wkid);const e=t.wkt2||t.wkt;return e?Tye(e):null}function qye(t,e){if(t)switch(t.getGeometryType()){case me.enumPoint:return $ot(t,e);case me.enumEnvelope:return kot(t,e);case me.enumMultiPoint:return Not(t,e);case me.enumPolyline:return Rot(t,e);case me.enumPolygon:return Oot(t,e)}return null}function kot(t,e){if(t.isEmpty())return null;const i=new cr({xmin:t.getXMin(),ymin:t.getYMin(),xmax:t.getXMax(),ymax:t.getYMax(),spatialReference:e}),s=t.getDescription();if(s.hasM()){const n=t.queryInterval(Oye,0);i.mmin=n.vmin,i.mmax=n.vmax}if(s.hasZ()){const n=t.queryInterval(Rye,0);i.zmin=n.vmin,i.zmax=n.vmax}return i.setCacheValue(no,t),i}function Not(t,e){if(t.isEmpty())return null;const i=t.getDescription(),s=i.hasM(),n=i.hasZ(),r=[],o=new Ht;for(let c=0,f=t.getPointCount();c<f;c++){t.getPointByVal(c,o);const y=[o.getX(),o.getY()];n&&y.push(o.getZ()),s&&y.push(o.getM()),r.push(y)}const l=new Dv({hasM:s,hasZ:n,points:r,spatialReference:e});return l.setCacheValue(no,t),l}function $ot(t,e){if(t instanceof Y)return new Hi({x:t.x,y:t.y,spatialReference:e});if(t.isEmpty())return null;const i=new Hi({x:t.getX(),y:t.getY(),spatialReference:e}),s=t.getDescription();return s.hasM()&&(i.m=t.getM()),s.hasZ()&&(i.z=t.getZ()),i.setCacheValue(no,t),i}function Oot(t,e){if(t.isEmpty())return null;const i=new Wa({spatialReference:e});return Vye(i,t),i.setCacheValue(no,t),i}function Rot(t,e){if(t.isEmpty())return null;const i=new Ef({spatialReference:e});return Vye(i,t),i.setCacheValue(no,t),i}function Vye(t,e){const i=t.type==="polygon",s=e.getDescription(),n=s.hasM(),r=s.hasZ(),o=[],l=new Ht;for(let c=0,f=e.getPathCount();c<f;c++){o.push([]);for(let y=e.getPathStart(c),_=e.getPathEnd(c);y<_;y++){e.getPointByVal(y,l);const x=[l.getX(),l.getY()];r&&x.push(l.getZ()),n&&x.push(l.getM()),o[c].push(x)}i&&o[c].push(o[c][0].slice())}t.hasM=n,t.hasZ=r,i?t.rings=o:t.paths=o}cot(t=>{let e,i;typeof t=="number"?e=t:i=t;const s={wkid:e,wkt:i};let n,r;if(i){n=SM(i);const o=b2(s);if(!n&&!o)throw new Error(`Unsupported WKT type: ${i}`)}else n=!b2(s);return r=e&&qae.has(e)?Math.PI/200:n?Hq(s):Math.PI/180,{isPCS:n,metersOrRadiansPerUnit:r,semiMajor:0,wkidOrWkt:t}});function Lot(t,e){const i=t.getGeometryType();return i===me.enumPoint?t:bi(i)?Fot(t):i===me.enumMultiPoint?t:(i===me.enumEnvelope||i===me.enumMultipatch&&K(0),t)}function Fot(t){if(zot(t))return t;const e=t.createInstance();for(let i=0,s=t.getPathCount();i<s;i++){const n=t.getPathSize(i);if(n!==0){if(n===1&&(t.getSegmentCountPath(i)===0||t.getSegmentType(t.getPathStart(i))===me.enumLine||!t.isClosedPath(i)))continue;e.addPath(t,i,!0)}}return e}function zot(t){for(let e=0,i=t.getPathCount();e<i;e++){const s=t.getPathSize(e);if(s===0||s===1&&(t.getSegmentCountPath(e)===0||t.getSegmentType(t.getPathStart(e))===me.enumLine||!t.isClosedPath(e)))return!1}return!0}class qot{getOperatorType(){return 10204}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n){return new kse(e,i,s,n)}execute(e,i,s,n){return e||Je("null param is not allowed."),new kse(null,i,s,n).generalize(e)}}class kse extends Ca{constructor(e,i,s,n){super(),this.m_pline=null,this.m_point=new Ht,this.m_stack=[],this.m_resultstack=[],this.m_callCount=0,this.m_progressTracker=n,this.m_geoms=e,this.m_maxDeviation=i,this.m_bRemoveDegenerateParts=s}tock(){return!0}getRank(){return 1}next(){const e=this.m_geoms.next();return e===null?null:(Xc(e),this.generalize(e))}getGeometryID(){return this.m_geoms.getGeometryID()}generalize(e){const i=e.getGeometryType();if(Ig(i))return e;if(i===me.enumEnvelope){const o=new Wt({vd:e.getDescription()});return o.addEnvelope(e,!1),this.generalize(o)}if(Dn(i)){const o=new vi({vd:e.getDescription()});return o.addSegment(e,!0),this.generalize(o)}if(bi(i)||js(""),e.isEmpty()||this.m_maxDeviation<=0)return e;const s=new V0().execute(e,0,.05*this.m_maxDeviation,0,this.m_progressTracker);e.hasNonLinearSegments()&&(this.m_maxDeviation*=.95);const n=s,r=e.createInstance();r.getGeometryType()===me.enumPolygon&&r.setFillRule(e.getFillRule()),this.m_xy=n.getAttributeStreamRef(0);{const o={stack:[],error:void 0,hasError:!1};try{const l=new si;this.m_pline=l,Wl(o,XA(()=>{this.m_pline=null},!1),!1);for(let c=0,f=n.getPathCount();c<f;c++)this.generalizePath(n.getImpl(),c,r.getImpl())}catch(l){o.error=l,o.hasError=!0}finally{om(o)}}return this.m_resultstack.length=0,this.m_stack.length=0,r}generalizePath(e,i,s){if(e.getPathSize(i)<2)return;this.m_resultstack.length=0,this.m_stack.length=0;const n=e.getPathStart(i),r=e.getPathEnd(i)-1,o=e.isClosedPath(i),l=e.isClosedPathInXYPlane(i);let c=0,f=-1;this.m_stack.push(o?n:r),this.m_stack.push(n);let y=!1,_=!1;for(!this.m_bRemoveDegenerateParts&&l&&(y=!0,_=!0);this.m_stack.length>1;){const S=this.m_stack.at(-1);this.m_stack.pop();const P=this.m_stack.at(-1);let A=e.getXY(S);this.m_pline.setStartXY(A),A=e.getXY(P),this.m_pline.setEndXY(A);const k=[0];let $=this.findGreatestDistance(S,P,r,k);$>=0&&(y?y=!1:(_&&k[0]>c&&(c=k[0],f=$),k[0]<=this.m_maxDeviation&&($=-1))),$>=0?(this.m_stack.push($),this.m_stack.push(S)):this.m_resultstack.push(S)}o||this.m_resultstack.push(this.m_stack[0]);const x=this.m_resultstack.length;if(x===e.getPathSize(i)&&x===this.m_stack.length)s.addPath(e,i,!0);else if(this.m_resultstack.length>0){if(this.m_bRemoveDegenerateParts&&this.m_resultstack.length<=2&&(o||this.m_resultstack.length===1||Y.distance(e.getXY(this.m_resultstack[0]),e.getXY(this.m_resultstack[1]))<=this.m_maxDeviation))return;if(_&&f>=0&&c<=this.m_maxDeviation){const S=this.m_resultstack.at(-1)>f;this.m_resultstack.push(f),S&&(this.m_resultstack[this.m_resultstack.length-2]=St(this.m_resultstack[this.m_resultstack.length-1],this.m_resultstack[this.m_resultstack.length-1]=this.m_resultstack[this.m_resultstack.length-2]))}for(let S=0,P=this.m_resultstack.length;S<P;S++)e.getPointByVal(this.m_resultstack[S],this.m_point),S===0?s.startPathPoint(this.m_point):s.lineToPoint(this.m_point);if(o){for(let S=this.m_resultstack.length;S<3;S++)s.lineToPoint(this.m_point);s.closePathWithLine()}}}findGreatestDistance(e,i,s,n){let r=i-1;i<=e&&(r=s);let o=-1,l=0;const c=new Y;for(let f=e+1;f<=r;f++){this.m_xy.queryPoint2D(2*f,c);const y=c.x,_=c.y,x=this.m_pline.getClosestCoordinate(c,!1);c.assign(this.m_pline.getCoord2D(x)),c.x-=y,c.y-=_;const S=c.length();S>l&&(o=f,l=S),this.m_callCount++}return n[0]=l,o}}class Vot{getOperatorType(){return 10104}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}isSimple(e,i,s,n,r){return Q1e(e,i,s,n,r)===5}executeMany(e,i,s,n){return new Got(e,i,s,n)}execute(e,i,s,n){const r=new id([e]),o=this.executeMany(r,i,s,n).next();return o||bt("null output"),o}}class Got extends Ca{constructor(e,i,s,n){super(),e||Je(""),this.m_progressTracker=n,this.m_bForceSimplify=s,this.m_index=-1,this.m_inputGeometryCursor=e,this.m_spatialReference=i}next(){const e=this.m_inputGeometryCursor.next();return e?(Xc(e),this.m_index=this.m_inputGeometryCursor.getGeometryID(),this.simplify(e)):null}getGeometryID(){return this.m_index}tock(){return!1}getRank(){return 1}simplify(e){return e||Je(""),tye(e,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker)}}var Pn;function mh(t,e,i,s,n,r){return{m_from:t.clone(),m_to:e.clone(),m_center:i.clone(),m_next:n,m_type:s}}function nT(t,e,i,s,n){return{m_from:t.clone(),m_to:e.clone(),m_next:i,m_type:4,m_center:new Y}}(function(t){t[t.enumDummy=256]="enumDummy",t[t.enumLine=1]="enumLine",t[t.enumArc=2]="enumArc",t[t.enumMiter=8]="enumMiter",t[t.enumBevel=16]="enumBevel",t[t.enumJoinMask=26]="enumJoinMask",t[t.enumConnectionMask=27]="enumConnectionMask"})(Pn||(Pn={}));class jot extends Ca{constructor(e,i,s,n,r,o,l,c,f,y){super(),this.m_index=0,this.m_bufferedPolygon=null,this.m_x=0,this.m_y=0,this.m_progressTracker=y,this.m_parent=e,this.m_mp=i,this.m_distance=s,this.m_spatialReference=n,this.m_densifyDist=c,this.m_maxVertexInCompleteCircle=f,this.m_joins=r,this.m_caps=o,this.m_miterLimit=l}next(){const e=new Ht;for(;;){if(this.m_index===this.m_mp.getPointCount())return null;if(this.m_caps===1)return this.m_index=this.m_mp.getPointCount(),new Wt({vd:this.m_mp.getDescription()});if(this.m_mp.getPointByVal(this.m_index,e),this.m_index++,!e.isEmpty())break}let i,s=!1;if(this.m_bufferedPolygon===null&&(this.m_x=e.getX(),this.m_y=e.getY(),this.m_bufferedPolygon=this.m_parent.buffer(e,this.m_distance,this.m_spatialReference,this.m_joins,this.m_caps,this.m_miterLimit,this.m_densifyDist,this.m_maxVertexInCompleteCircle),s=!0),i=this.m_index<this.m_mp.getPointCount()?this.m_bufferedPolygon.clone():this.m_bufferedPolygon,!s){const n=new _i,r=e.getX()-this.m_x,o=e.getY()-this.m_y;n.setShiftCoords(r,o),i.applyTransformation(n)}return Pge(i,0),i}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class Bot extends Ca{constructor(e){super(),this.m_currentPathIndex=0,this.m_polyline=e}next(){if(!this.m_polyline)return null;const e=this.m_polyline.getImpl(),i=e.getPathCount();if(this.m_currentPathIndex<i){const s=this.m_currentPathIndex;if(this.m_currentPathIndex++,!e.isClosedPathInXYPlane(s)){let r=e.getXY(e.getPathEnd(s)-1);for(;this.m_currentPathIndex<e.getPathCount();){const o=e.getXY(e.getPathStart(this.m_currentPathIndex));if(e.isClosedPathInXYPlane(this.m_currentPathIndex)||!o.equals(r))break;r=e.getXY(e.getPathEnd(this.m_currentPathIndex)-1),this.m_currentPathIndex++}}if(s===0&&this.m_currentPathIndex===this.m_polyline.getPathCount()){const r=this.m_polyline;return this.m_polyline=null,r}const n=new vi({vd:this.m_polyline.getDescription()});n.addPath(this.m_polyline,s,!0);for(let r=s+1;r<this.m_currentPathIndex;r++)n.addSegmentsFromPath(this.m_polyline,r,0,e.getSegmentCountPath(r),!1);return this.m_currentPathIndex===this.m_polyline.getPathCount()&&(this.m_polyline=null),n}return null}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class Hot extends Ca{constructor(e,i,s){super(),this.m_geometry=null,this.m_index=0,this.m_bufferer=e,this.m_geoms=i,this.m_index=0,this.m_bFilter=s}next(){if(this.m_geometry===null&&(this.m_index=0,this.m_geometry=this.m_geoms.next(),!this.m_geometry))return null;const e=this.m_geometry.getImpl();if(this.m_index<e.getPathCount()){const i=this.m_index;return this.m_index++,this.m_bufferer.bufferPolylinePath(this.m_geometry,i,this.m_bFilter)}return this.m_geometry=null,this.next()}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class Uot extends Ca{constructor(e){super(),this.m_index=0,this.m_bufferer=e}next(){const e=this.m_bufferer.m_geometry;if(this.m_index<e.getPathCount()){const i=this.m_index,s=e.calculateRingArea2D(this.m_index);for(K(s>0),this.m_index++;this.m_index<e.getPathCount()&&!(e.calculateRingArea2D(this.m_index)>0);)this.m_index++;let n;return n=i===0&&this.m_index===e.getPathCount()?this.m_bufferer.bufferPolygonImpl(e,0,e.getPathCount()):this.m_bufferer.bufferPolygonImpl(e,i,this.m_index),n}return null}getGeometryID(){return 0}getRank(){return K(0),-1}tock(){return!0}}class Yot{constructor(e){this.m_geometry=null,this.m_bufferCommands=[],this.m_originalGeomType=me.enumUnknown,this.m_maxVertexInCompleteCircle=-1,this.m_circleTemplateSize=-1,this.m_oldCircleTemplateSize=0,this.m_spatialReference=null,this.m_tolerance=new Jo(0,0),this.m_smallTolerance=new Jo(0,0),this.m_filterTolerance=0,this.m_densifyDist=-1,this.m_distance=Number.NaN,this.m_absDistance=0,this.m_absDistanceReversed=0,this.m_dA=-1,this.m_miterLimit=4,this.m_joins=0,this.m_caps=0,this.m_bRoundBuffer=!0,this.m_bOutputLoops=!0,this.m_bFilter=!0,this.m_circleTemplate=[],this.m_leftStack=[],this.m_middleStack=[],this.m_helperLine1=new si,this.m_helperLine2=new si,this.m_helperArray=[],this.m_progressCounter=0,this.m_densificator=Tj.constructDefault(e),this.m_progressTracker=e}buffer(e,i,s,n,r,o,l,c){if(e||Je("Geometry.Bufferer.Impl.Buffer"),l<0&&Je("Geometry.Bufferer.Impl.Buffer"),BA(e.getGeometryType())&&js("Unsupported geometry type."),e.isEmpty())return new Wt({vd:e.getDescription()});if(this.m_joins=n,this.m_caps=r,this.m_bRoundBuffer=!1,this.m_miterLimit=o,this.m_originalGeomType=e.getGeometryType(),Bee(this.m_originalGeomType)?this.m_bRoundBuffer=this.m_joins===0:Ig(this.m_originalGeomType)?this.m_bRoundBuffer=this.m_caps===0:cge(this.m_originalGeomType)&&(this.m_bRoundBuffer=this.m_joins===0&&this.m_caps===0),this.m_bFilter=this.m_bRoundBuffer,this.m_geometry=Lot(e),this.m_geometry.isEmpty())return new Wt({vd:e.getDescription()});const f=new xe;this.m_geometry.queryLooseEnvelope(f),i>0&&f.inflateCoords(i,i),this.m_tolerance=Kn(s,f,!0),this.m_smallTolerance=Kn(null,f,!0),c<=0&&(c=96),this.m_spatialReference=s,this.m_distance=i,this.m_absDistance=Math.abs(this.m_distance),this.m_absDistanceReversed=this.m_absDistance!==0?1/this.m_absDistance:0,Number.isNaN(l)||l===0?l=1e-5*this.m_absDistance:l>.5*this.m_absDistance&&(l=.5*this.m_absDistance),c<12&&(c=12);const y=Math.abs(i)*(1-Math.cos(Math.PI/c));if(y>l)l=y;else if(i!==0){const x=Math.PI/Math.acos(1-l/Math.abs(i));x<c-1&&(c=Math.trunc(x))<12&&(c=12,l=Math.abs(i)*(1-Math.cos(Math.PI/c)))}this.m_densifyDist=l,this.m_maxVertexInCompleteCircle=c,this.m_filterTolerance=this.m_bRoundBuffer?Math.min(this.m_smallTolerance.total(),.25*this.m_densifyDist):0,this.m_circleTemplateSize=this.calcN(),this.m_circleTemplateSize!==this.m_oldCircleTemplateSize&&(this.m_circleTemplate.length=0,this.m_oldCircleTemplateSize=this.m_circleTemplateSize),this.m_densifyDist>0&&aj(this.m_geometry)&&(this.m_geometry=this.m_densificator.densifyEx(this.m_geometry,0,this.m_densifyDist,0,this.m_joins!==0,vo()));const _=this.bufferImpl();return this.m_geometry=null,_}generateCircleTemplate(){if(this.m_circleTemplate.length)return;const e=this.m_circleTemplateSize,i=Math.trunc((e+3)/4),s=.5*Math.PI/i;this.m_dA=s,this.m_circleTemplate.length=4*i;const n=Math.cos(s),r=Math.sin(s),o=Y.construct(0,1);for(let l=0;l<i;l++)this.m_circleTemplate[l+0*i]=Y.construct(o.y,-o.x),this.m_circleTemplate[l+1*i]=Y.construct(-o.x,-o.y),this.m_circleTemplate[l+2*i]=Y.construct(-o.y,o.x),this.m_circleTemplate[l+3*i]=o.clone(),o.rotateReverse(n,r)}bufferImpl(){const e=this.m_geometry.getGeometryType();if(Dn(e)){const i=new vi({vd:this.m_geometry.getDescription()});return i.addSegment(this.m_geometry,!0),this.m_geometry=i,this.bufferImpl()}if(this.m_distance<=this.m_tolerance.total()){if(!Bee(e))return new Wt({vd:this.m_geometry.getDescription()});if(this.m_distance<0){const i=new xe;if(this.m_geometry.queryEnvelope(i),i.width()<=2*this.m_absDistance||i.height()<=2*this.m_absDistance)return new Wt({vd:this.m_geometry.getDescription()})}}switch(this.m_geometry.getGeometryType()){case me.enumPoint:return this.bufferPoint();case me.enumMultiPoint:return this.bufferMultiPoint();case me.enumPolyline:return this.bufferPolyline();case me.enumPolygon:return this.bufferPolygon();case me.enumEnvelope:return this.bufferEnvelope();default:bt("")}}bufferPolyline(){if(this.isDegenerateGeometry(this.m_geometry)){const f=new Ht;this.m_geometry.getPointByVal(0,f);const y=new xe;return this.m_geometry.queryEnvelope(y),f.setXY(y.getCenter()),this.bufferDegeneratePath(f,!0)}const e=this.m_geometry,i=this.m_geometry.getDescription();this.m_geometry=null;const s=new Bot(e);let n,r;n=this.m_joins===0?new qot().executeMany(s,.25*this.m_densifyDist,!1,this.m_progressTracker):s,r=this.m_bRoundBuffer?new Vot().executeMany(n,null,!0,this.m_progressTracker):n;const o=new Hot(this,r,this.m_bFilter),l=new jy().executeMany(o,this.m_spatialReference,this.m_progressTracker,2),c=new Tu().executeMany(l,this.m_spatialReference,!1,this.m_progressTracker).next();return c!==null?c:new Wt({vd:i})}bufferPolygon(){if(this.m_distance===0)return this.m_geometry;this.generateCircleTemplate();const e=new Tu().execute(this.m_geometry,null,!1,this.m_progressTracker);if(this.m_distance<0){if(this.m_geometry=e,this.m_geometry.isEmpty())return this.m_geometry;const i=this.m_geometry,s=this.bufferPolygonImpl(i,0,i.getPathCount());return new Tu().execute(s,this.m_spatialReference,!1,this.m_progressTracker)}{if(this.m_geometry=e,this.isDegenerateGeometry(this.m_geometry)){const r=new Ht;this.m_geometry.getPointByVal(0,r);const o=new xe;return this.m_geometry.queryEnvelope(o),r.setXY(o.getCenter()),this.bufferDegeneratePath(r,!0)}const i=new Uot(this),s=new jy().executeMany(i,this.m_spatialReference,this.m_progressTracker,2),n=new Tu().executeMany(s,this.m_spatialReference,!1,this.m_progressTracker).next();return n!==null?n:new Wt({vd:this.m_geometry.getDescription()})}}bufferPolygonImpl(e,i,s){const n=e,r=n.getImpl();let o=new Wt({vd:e.getDescription()});for(let l=i;l<s;l++){if(r.getPathSize(l)<1)continue;const c=r.calculateRingArea2D(l),f=new xe;if(r.queryPathEnvelope(l,f),this.m_distance>0)if(c>0)if(this.isDegeneratePath(r,l)){const y=new Ht;r.getPointByVal(r.getPathStart(l),y),y.setXY(f.getCenter()),o.add(this.bufferDegeneratePath(y,!0),!1)}else{const y=new vi({vd:e.getDescription()}),_=y.getImpl();if(Qrt(this.m_geometry,l)){const x=this.bufferConvexPath(n,l);o.add(x,!1)}else{this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,1);const x=this.bufferCleanup(y);o.add(x,!1)}}else{if(f.width()+this.m_tolerance.total()<=2*this.m_absDistance||f.height()+this.m_tolerance.total()<=2*this.m_absDistance)continue;const y=new vi({vd:e.getDescription()}),_=y.getImpl();if(this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,1),!y.isEmpty()){const x=f,S=Math.max(1,this.m_absDistance),P=x.clone();P.inflateCoords(S,S),_.addEnvelope(P,!1);const A=this.bufferCleanup(y);o.reserve(o.getPointCount()+A.getPointCount()-4),ZN(A,o,P,!0)}}else if(c>0){if(f.width()+this.m_tolerance.total()<=2*this.m_absDistance||f.height()+this.m_tolerance.total()<=2*this.m_absDistance)continue;const y=new vi({vd:e.getDescription()}),_=y.getImpl();if(this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,-1),!y.isEmpty()){const x=new xe;_.queryLooseEnvelope(x);const S=Math.max(1,this.m_absDistance),P=x.clone();P.inflateCoords(S,S),_.addEnvelope(P,!1),ZN(this.bufferCleanup(y),o,P,!0)}}else{const y=new vi({vd:e.getDescription()}),_=y.getImpl();this.bufferClosedPath(this.m_geometry,l,_,this.m_bRoundBuffer,-1);const x=this.bufferCleanup(y);for(let S=0,P=x.getPathCount();S<P;S++)o.addPath(x,S,!0)}}if(this.m_distance>0)return o.getPathCount()>1?this.bufferCleanup(o):rT(o);{const l=new xe;if(o.queryLooseEnvelope(l),o.isEmpty())return rT(o);{const c=Math.max(1,this.m_absDistance),f=l.clone();f.inflateCoords(c,c),o.addEnvelope(f,!1);const y=this.bufferCleanup(o);o=new Wt;const _=new Wt({vd:y.getDescription()});return ZN(y,_,f,!1),rT(_)}}}bufferPoint(){return this.bufferPointImpl(this.m_geometry)}bufferPointImpl(e){const i=new Wt({vd:e.getDescription()});return this.m_caps===0?(this.addCircle(i.getImpl(),e),this.setStrongSimple(i)):this.m_caps===2?(this.addSquare(i.getImpl(),e),this.setStrongSimple(i)):i}bufferDegeneratePath(e,i){const s=new Wt({vd:e.getDescription()});return i&&this.m_joins===0||!i&&this.m_caps===0?(this.addCircle(s.getImpl(),e),this.setStrongSimple(s)):i||this.m_caps!==2?s:(this.addSquare(s.getImpl(),e),this.setStrongSimple(s))}bufferMultiPoint(){const e=new jot(this,this.m_geometry,this.m_distance,this.m_spatialReference,this.m_joins,this.m_caps,this.m_miterLimit,this.m_densifyDist,this.m_maxVertexInCompleteCircle,this.m_progressTracker);return new jy().executeMany(e,this.m_spatialReference,this.m_progressTracker,2).next()}bufferEnvelope(){let e=new Wt({vd:this.m_geometry.getDescription()});if(this.m_distance<=0){if(this.m_distance===0)e.addEnvelope(this.m_geometry,!1),Nse(this.m_geometry,this.m_tolerance.total())&&(e=this.setStrongSimple(e));else{const s=new lr;this.m_geometry.queryEnvelope(s),s.inflateCoords(this.m_distance,this.m_distance),e.addEnvelope(s,!1),Nse(s,this.m_tolerance.total())&&(e=this.setStrongSimple(e))}return e}if(this.m_joins===1){const s=new lr({copy:this.m_geometry});return s.inflateCoords(this.m_absDistance,this.m_absDistance),e.addEnvelope(s,!1),e}const i=this.m_geometry.clone();if(i.width()===0||i.height()===0){if(i.width()===0&&i.height()===0){const r=new Ht({vd:this.m_geometry.getDescription()});return i.queryCornerByVal(0,r),this.m_geometry=r,this.bufferImpl()}const s=new vi({vd:this.m_geometry.getDescription()}),n=new Ht;return i.queryCornerByVal(0,n),s.startPathPoint(n),i.queryCornerByVal(2,n),s.lineToPoint(n),this.m_geometry=s,this.bufferImpl()}return e.addEnvelope(this.m_geometry,!1),this.m_geometry=e,this.bufferConvexPath(e,0)}bufferConvexPath(e,i){this.generateCircleTemplate();const s=e.hasAttribute(10),n=new Wt({vd:e.getDescription()}),r=n.getImpl();n.reserve((this.m_circleTemplate.length/10+4)*e.getPathSize(i));const o=new Y,l=new Y,c=new Y,f=new Y(0,0),y=new Y,_=new Y,x=e.getImpl(),S=e.getPathSize(i),P=e.getPathStart(i);for(let A=0,k=e.getPathSize(i);A<k;A++){const $=x.getXY(P+A),F=x.getXY(P+(A+1)%S),G=x.getXY(P+(A+2)%S);y.setSub(F,$),y.length()===0&&bt("");const V=s&&!!(1&x.getAttributeAsInt(10,(A+1)%S,0));y.normalize();const B=y.clone();y.leftPerpendicularThis(),y.scale(this.m_absDistance),o.setAdd(y,$),l.setAdd(y,F),A===0?r.startPath(o):r.lineTo(o),r.lineTo(l),_.setSub(G,F),_.length()===0&&bt(""),_.normalize();const W=_.clone();_.leftPerpendicularThis(),_.scale(this.m_absDistance),c.setAdd(_,F);let J=Pn.enumArc;const re=V?0:this.m_joins;if(re===2)J=Pn.enumBevel;else if(re===1){const se=-B.crossProduct(W);f.setSub(B,W),f.scale(this.m_absDistance/se),f.length()<this.m_miterLimit*this.m_absDistance?(f.addThis(F),J=Pn.enumMiter):J=Pn.enumBevel}else f.assign(F);this.addJoin(J,r,f,l,c,!1,!1)}return rT(n)}bufferPolylinePath(e,i,s){this.generateCircleTemplate();const n=e,r=n.getImpl();if(r.getPathSize(i)<1)return null;let o;if(o=this.m_bRoundBuffer?r.isClosedPathInXYPlane(i):r.isClosedPath(i),this.isDegeneratePath(r,i)&&this.m_distance>0){const f=new Ht;r.getPointByVal(r.getPathStart(i),f);const y=new xe;return r.queryPathEnvelope(i,y),f.setXY(y.getCenter()),this.bufferDegeneratePath(f,o)}const l=new vi({vd:e.getDescription()});l.reserve((Math.trunc(this.m_circleTemplate.length/10)+4)*r.getPathSize(i));const c=l.getImpl();return o?this.bufferClosedPath(n,i,c,s,1)!==2&&this.bufferClosedPath(n,i,c,s,-1):this.bufferOpenPath(n,i,c,s),this.bufferCleanup(l)}progress_(){}bufferCleanup(e,i=!1){const s=i?this.m_tolerance:this.m_smallTolerance;return j6(e,s,!0,!i,-1,this.m_progressTracker,0,!1)}calcN(){if(this.m_densifyDist===0)return this.m_maxVertexInCompleteCircle;const i=1-this.m_densifyDist*Math.abs(this.m_absDistanceReversed);let s=4;return s=i<-1?4:2*Math.PI/Math.acos(i)+.5,s<4?s=4:s>this.m_maxVertexInCompleteCircle&&(s=this.m_maxVertexInCompleteCircle),Math.trunc(s)}addJoin(e,i,s,n,r,o,l){if(this.generateCircleTemplate(),o&&(i.startPath(n),o=!1),e===Pn.enumBevel)return void(l&&i.lineTo(r));if(e===Pn.enumMiter){const $=s.clone();return i.lineTo($),void(l&&i.lineTo(r))}const c=new Y;c.setSub(n,s),c.scale(this.m_absDistanceReversed);const f=new Y;f.setSub(r,s),f.scale(this.m_absDistanceReversed);let y=Math.atan2(c.y,c.x)/this.m_dA;y<0&&(y=this.m_circleTemplate.length+y),y=this.m_circleTemplate.length-y;let _=Math.atan2(f.y,f.x)/this.m_dA;_<0&&(_=this.m_circleTemplate.length+_),_=this.m_circleTemplate.length-_,_<y&&(_+=this.m_circleTemplate.length);let x=Math.trunc(_),S=Math.ceil(y),P=this.m_circleTemplate[S%this.m_circleTemplate.length].clone();P.scaleAddThis(this.m_absDistance,s);const A=10*this.m_tolerance.total();P.sub(n).length()<A&&(S+=1),P=this.m_circleTemplate[x%this.m_circleTemplate.length].clone(),P.scaleAddThis(this.m_absDistance,s),P.sub(r).length()<A&&(x-=1);let k=x-S;k++;for(let $=0,F=S%this.m_circleTemplate.length;$<k;$++,F=(F+1)%this.m_circleTemplate.length)P=this.m_circleTemplate[F].clone(),P.scaleAddThis(this.m_absDistance,s),i.lineTo(P),this.progress_();l&&i.lineTo(r)}bufferClosedPath(e,i,s,n,r){const o=new Bs,l=o.addPathFromMultiPath(e,i,!0);return this.bufferClosedPathImpl(o,l,s,n,r)}bufferClosedPathImpl(e,i,s,n,r){const o=e.getFirstVertex(e.getFirstPath(i)),l=new Ht;if(e.queryPoint(o,l),e.filterClosePoints(this.m_filterTolerance,!1,!1,!1,-1),e.getPointCount(i)<2)return r<0?0:(this.m_bRoundBuffer&&this.addCircle(s,l),2);K(e.getFirstPath(i)!==ae),K(e.getFirstVertex(e.getFirstPath(i))!==ae);const c=e.getXY(e.getFirstVertex(e.getFirstPath(i))),f=new _i;if(f.setShift(c.negate()),e.applyTransformation(f),n){const pe=Kot(e,i,r,!0,this.m_absDistance,this.m_filterTolerance,this.m_densifyDist);if(K(pe===1),e.getPointCount(i)<2)return r<0?0:(this.addCircle(s,l),2)}const y=this.m_joins!==0&&e.getVertexDescription().hasAttribute(10);this.m_bufferCommands.length=0;const _=e.getFirstPath(i);let x=e.getFirstVertex(_),S=r===1?e.getPrevVertex(x):e.getNextVertex(x),P=r===1?e.getNextVertex(x):e.getPrevVertex(x),A=!0;const k=new Y,$=new Y,F=new Y,G=new Y,V=new Y,B=new Y,W=new Y,J=new Y,re=this.m_absDistance,se=e.getPathSize(_),oe=new Y(0,0);for(let pe=0;pe<se;pe++){$.assign(e.getXY(P)),A&&(k.assign(e.getXY(x)),F.assign(e.getXY(S)),B.setSub(k,F),B.normalize(),J.leftPerpendicularOther(B),J.scale(re),G.setAdd(J,k));const ue=y&&!!(1&e.getAttributeAsDbl(10,x,0));V.setSub($,k),V.normalize(),W.leftPerpendicularOther(V),W.scale(re);const ce=new Y;ce.setAdd(k,W);const ne=B.crossProduct(V),de=B.dotProduct(V);if(ne<0||de<0&&ne<Math.abs(de)*Number.EPSILON*8){let Pe=!1;const Re=ue?0:this.m_joins;if(Re===1){const Oe=-ne;oe.setSub(B,V),oe.scale(this.m_absDistance/Oe),oe.length()<this.m_miterLimit*this.m_absDistance&&(oe.addThis(k),Pe=!0),this.m_bufferCommands.push(mh(G,ce,oe,Pe?Pn.enumMiter:Pn.enumBevel,this.m_bufferCommands.length+1))}else this.m_bufferCommands.push(mh(G,ce,k,Re===0?Pn.enumArc:Pn.enumBevel,this.m_bufferCommands.length+1))}else G.equals(ce)||(this.m_bufferCommands.push(nT(G,k,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(nT(k,ce,this.m_bufferCommands.length+1)));const Se=new Y;Se.setAdd($,W),this.m_bufferCommands.push(mh(ce,Se,k,Pn.enumLine,this.m_bufferCommands.length+1)),G.setCoordsPoint2D(Se),J.setCoordsPoint2D(W),F.setCoordsPoint2D(k),k.setCoordsPoint2D($),B.setCoordsPoint2D(V),S=x,x=P,A=!1,P=r===1?e.getNextVertex(x):e.getPrevVertex(x)}return this.m_bufferCommands.at(-1).m_next=0,this.processBufferCommands(s),f.setShift(c),s.applyTransformationToPath(f,s.getPathCount()-1),1}bufferOpenPath(e,i,s,n){if(this.m_bRoundBuffer){const ue=new vi({vd:e.getDescription()});return ue.addPath(e,i,!1),ue.addSegmentsFromPath(e,i,0,e.getSegmentCountPath(i),!1),this.bufferClosedPath(ue,0,s,n,1)}let r=0;const o=new vi({vd:e.getDescription()}),l=new Y(0,0);{const ue=new Bs,ce=ue.addPathFromMultiPath(e,i,!1),ne=ue.getFirstVertex(ue.getFirstPath(ce)),de=new Ht;if(ue.queryPoint(ne,de),l.assign(de.getXY()),ue.filterClosePoints(0,!1,!1,!1,-1),ue.getPointCount(ce)<2)return this.m_bRoundBuffer&&this.addCircle(s,de),2;const Se=ue.getGeometry(ue.getFirstGeometry());o.addPath(Se,0,!1),r=o.getPointCount()-1,o.addSegmentsFromPath(Se,0,0,Se.getSegmentCountPath(0)-1,!1)}const c=new Bs,f=c.addPathFromMultiPath(o,0,!0);K(c.getFirstPath(f)!==ae),K(c.getFirstVertex(c.getFirstPath(f))!==ae);const y=new _i;y.setShift(l.negate()),c.applyTransformation(y),this.m_bufferCommands.length=0;const _=c.getFirstPath(f),x=this.m_joins!==0&&c.getVertexDescription().hasAttribute(10);let S=c.getFirstVertex(_),P=c.getPrevVertex(S),A=c.getNextVertex(S),k=!0;const $=new Y,F=new Y,G=new Y,V=new Y,B=new Y,W=new Y,J=new Y,re=new Y,se=this.m_absDistance,oe=c.getPathSize(_),pe=new Y(0,0);for(let ue=0;ue<oe;ue++){let ce=!1;ue!==0&&ue!==r||(ce=!0),F.assign(c.getXY(A)),k&&($.assign(c.getXY(S)),G.assign(c.getXY(P)),W.setSub($,G),W.normalize(),re.leftPerpendicularOther(W),re.scale(se),V.setAdd(re,$));const ne=x&&!!(1&c.getAttributeAsDbl(10,S,0));B.setSub(F,$),B.normalize(),J.leftPerpendicularOther(B),J.scale(se);const de=new Y;de.setAdd($,J);const Se=W.crossProduct(B),Pe=W.dotProduct(B);if(Se<0||Pe<0&&Se<Math.abs(Pe)*Number.EPSILON*8)if(ce)if(this.m_caps===0)this.m_bufferCommands.push(mh(V,de,$,Pn.enumArc,this.m_bufferCommands.length+1));else if(this.m_caps===1)this.m_bufferCommands.push(mh(V,de,$,Pn.enumLine,this.m_bufferCommands.length+1));else{const Oe=B.mul(this.m_absDistance).negate(),we=Oe.clone();Oe.addThis(V),we.addThis(de),this.m_bufferCommands.push(mh(V,Oe,$,Pn.enumLine,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(mh(Oe,we,$,Pn.enumLine,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(mh(we,de,$,Pn.enumLine,this.m_bufferCommands.length+1))}else{let Oe=!1;const we=ne?0:this.m_joins;if(we===1){const Fe=-Se;pe.setSub(W,B),pe.scale(this.m_absDistance/Fe),pe.length()<this.m_miterLimit*this.m_absDistance&&(pe.addThis($),Oe=!0),this.m_bufferCommands.push(mh(V,de,pe,Oe?Pn.enumMiter:Pn.enumBevel,this.m_bufferCommands.length+1))}else this.m_bufferCommands.push(mh(V,de,$,we===0?Pn.enumArc:Pn.enumBevel,this.m_bufferCommands.length+1))}else V.equals(de)||(this.m_bufferCommands.push(nT(V,$,this.m_bufferCommands.length+1)),this.m_bufferCommands.push(nT($,de,this.m_bufferCommands.length+1)));const Re=new Y;Re.setAdd(F,J),this.m_bufferCommands.push(mh(de,Re,$,Pn.enumLine,this.m_bufferCommands.length+1)),V.setCoordsPoint2D(Re),re.setCoordsPoint2D(J),G.setCoordsPoint2D($),$.setCoordsPoint2D(F),W.setCoordsPoint2D(B),P=S,S=A,k=!1,A=c.getNextVertex(S)}return this.m_bufferCommands.at(-1).m_next=0,this.processBufferCommands(s),y.setShift(l),s.applyTransformationToPath(y,s.getPathCount()-1),1}processBufferCommands(e){const i=this.cleanupBufferCommands();let s=!0,n=i+1;for(let r=i;n!==i;r=n){const o=this.m_bufferCommands[r];n=o.m_next!==-1?o.m_next:(r+1)%this.m_bufferCommands.length,o.m_type&&(s&&(e.startPath(o.m_from),s=!1),o.m_type&Pn.enumJoinMask?this.addJoin(o.m_type,e,o.m_center,o.m_from,o.m_to,!1,!0):e.lineTo(o.m_to))}}cleanupBufferCommands(){this.m_helperArray=Ge(Y,9);let e=0;for(let s=0,n=this.m_bufferCommands.length;s<n;){const r=this.m_bufferCommands[s];if(r.m_type&Pn.enumConnectionMask){e=s;break}s=r.m_next}let i=e+1;for(let s=e;i!==e;s=i){const n=this.m_bufferCommands[s];i=n.m_next;let r=1,o=null;for(;i!==s&&(o=this.m_bufferCommands[i],!(o.m_type&Pn.enumConnectionMask));)i=o.m_next,r++;r!==1&&(n.m_type&o.m_type)===Pn.enumLine&&(this.m_helperLine1.setStartXY(n.m_from),this.m_helperLine1.setEndXY(n.m_to),this.m_helperLine2.setStartXY(o.m_from),this.m_helperLine2.setEndXY(o.m_to),this.m_helperLine1.intersect(this.m_helperLine2,this.m_helperArray,null,null,this.m_smallTolerance.total())===1&&(n.m_to.assign(this.m_helperArray[0]),o.m_from.assign(this.m_helperArray[0]),n.m_next=i))}return e}isDegeneratePath(e,i){if(e.getPathSize(i)===1)return!0;if(this.m_joins===0&&this.m_caps===0){const s=new xe;if(e.queryPathEnvelope(i,s),Math.max(s.width(),s.height())<.5*this.m_densifyDist)return!0}return!1}isDegenerateGeometry(e){if(this.m_joins===0&&this.m_caps===0){const i=new xe;if(e.queryEnvelope(i),Math.max(i.width(),i.height())<.5*this.m_densifyDist)return!0}return!1}addCircle(e,i){const s=i.getXY();if(this.m_circleTemplate.length!==0){let f=this.m_circleTemplate[0].clone();f.scaleAddThis(this.m_absDistance,s),e.startPath(f);for(let y=1,_=this.m_circleTemplate.length;y<_;y++)f=this.m_circleTemplate[y].clone(),f.scaleAddThis(this.m_absDistance,s),e.lineTo(f);return}const n=this.m_circleTemplateSize,r=Math.trunc((n+3)/4),o=.5*Math.PI/r;e.reserve(4*r);const l=Math.cos(o),c=Math.sin(o);for(let f=3;f>=0;f--){const y=Y.construct(0,this.m_absDistance);switch(f){case 0:for(let _=0;_<r;_++)e.lineToCoords(y.x+s.x,y.y+s.y),y.rotateReverse(l,c);break;case 1:for(let _=0;_<r;_++)e.lineToCoords(-y.y+s.x,y.x+s.y),y.rotateReverse(l,c);break;case 2:for(let _=0;_<r;_++)e.lineToCoords(-y.x+s.x,-y.y+s.y),y.rotateReverse(l,c);break;default:e.startPathCoords(y.y+s.x,-y.x+s.y);for(let _=1;_<r;_++)y.rotateReverse(l,c),e.lineToCoords(y.y+s.x,-y.x+s.y)}this.progress_()}}addSquare(e,i){const s=new lr({vd:i.getDescription()});s.setCoords(i.getX(),i.getY(),i.getX(),i.getY()),s.inflateCoords(this.m_absDistance,this.m_absDistance),e.addEnvelope(s,!1)}setStrongSimple(e){return e.getImpl().setIsSimple(4,this.m_tolerance.total()),e.getImpl().updateOGCFlagsProtected(),e}}function rT(t){return Pge(t,0),t}function Nse(t,e){return!!t.isEmpty()||Math.min(t.width(),t.height())>e}function Xot(t,e,i,s,n,r,o,l){const c=t.getXY(i),f=t.getXY(s);if(c.equals(f))return-1;const y=.25*o,_=.25*o,x=new Y;x.setSub(f,c);const S=x.length(),P=S*S*.25,A=r*r-P;if(A<=P)return-1;const k=Math.sqrt(A);x.normalize();const $=x.clone();$.rightPerpendicularThis();const F=P/k,G=F<=_,V=Y.lerp(f,c,.5),B=$.clone(),W=F-y;B.scaleAddThis(Math.max(0,W),V),$.negate().scaleAddThis(k,V);const J=3.61*Ui(r-_),re=B.sub(c),se=B.sub(f);let oe=!1,pe=0;const ue=Vi(64,0);K(l===ue.length);{for(let vt=t.getPrevVertexEx(s,n);vt!==i;){if(t.getUserIndex(vt,e)===1)return-1;if(!t.getXY(vt).equals(f))break;{const ot=t.getPrevVertexEx(vt,n);t.removeVertex(vt,!1),vt=ot}}const Fe=new Y,it=c.clone();ue[pe++]=1;for(let vt=t.getNextVertexEx(i,n);vt!==s;){if(t.getUserIndex(vt,e)===1)return-1;const ot=t.getXY(vt);if(ot.equals(it)){const qt=t.getNextVertexEx(vt,n);t.removeVertex(vt,!1),vt=qt;continue}ue[pe++]=0;const ct=new Y;if(ct.setSub(ot,c),ct.dotProduct($)<0)return 0;(Y.sqrDistance(ot,c)>J||Y.sqrDistance(ot,f)>J)&&(oe=!0);let Ct=0;if(ot.sub(c).crossProduct(re)>=0&&(Ct=1),ot.sub(f).crossProduct(se)<=0&&(Ct|=2),Ct===0)return 0;ue[pe-1]=Ct,Fe.assign(it),it.assign(ot),vt=t.getNextVertexEx(vt,n)}if(pe===1)return 0;K(pe<ue.length),ue[pe++]=2}let ce=!0;for(let Fe=1,it=0;Fe<pe;Fe++)if(ue[Fe]!==ue[Fe-1]&&(it++,ce=it<3&&(it===1&&ue[Fe]===3||it===2&&ue[Fe]===2),!ce))return 0;if(pe>2&&ce&&(pe===3||!oe)){let Fe=0,it=t.getNextVertexEx(i,n);for(G||(t.setXY(it,B),it=t.getNextVertexEx(it,n));it!==s;){const vt=t.getNextVertexEx(it,n);t.removeVertex(it,!1),it=vt,++Fe}return Fe}if(K(pe!==3),oe&&pe>3)return 0;const ne=c.clone();let de=i;const Se=c.clone();let Pe=1,Re=-1,Oe=de,we=0;for(pe=1;Oe!==s;){Oe=t.getNextVertexEx(Oe,n);const Fe=ue[pe++];if(Fe===0){if(Oe===s)break;continue}const it=t.getXY(Oe);if(Re!==-1){if(3&(Re&Pe&Fe)){t.removeVertex(de,!0),we++,de=Oe,Se.setCoordsPoint2D(it),Pe=Fe;continue}if(Pe===3&&Re!==0&&Fe!==0){if(Se.setCoordsPoint2D(B),G||Se.equals(ne)){t.removeVertex(de,!0),we++,de=Oe,Se.setCoordsPoint2D(it),Pe=Fe;continue}t.setXY(de,Se)}}Re=Pe,ne.setCoordsPoint2D(Se),de=Oe,Pe=Fe,Se.setCoordsPoint2D(it)}return we}function Wot(t,e,i,s){let n=-1;const r=new Y,o=new Y,l=new Y;for(let c=0,f=t.getPathSize(s),y=t.getFirstVertex(s);c<f;++c){n===-1&&(t.queryXY(y,o),n=t.getPrevVertex(y),n!==-1&&(t.queryXY(n,r),l.setSub(o,r),l.normalize()));const _=t.getNextVertex(y);if(_===-1)break;const x=t.getXY(_),S=x.sub(o);S.normalize(),n!==-1&&S.dotProduct(l)<-.99&&Math.abs(S.crossProduct(l))<1e-7&&t.setUserIndex(y,e,1),n=y,y=_,r.assign(o),o.assign(x),l.assign(S)}}function Zot(t,e,i,s,n,r,o){const l={stack:[],error:void 0,hasError:!1};try{const c=t.getFirstPath(e),f=t.createUserIndex();Wl(l,XA(()=>{t.removeUserIndex(f)},!1),!1),Wot(t,f,e,c);for(let y=0;y<100;++y){if(t.getPathSize(c)===0)return 1;let _=t.getFirstVertex(c),x=t.getPathSize(c);if(x<3)return 1;t.isClosedPath(c)||(x-=1);const S=64;let P=0,A=!1;for(let k=0;k<x&&_!==ae;k++){let $=0,F=_;for(let G=1,V=Math.min(S,x-k);G<V;G++)if(F=t.getNextVertexEx(F,i),G>1){const B=Xot(t,f,_,F,i,n,o,S);if(B===-1)break;$+=B,x-=B}if(P+=$,A=$>0,A){const G=t.getPrevVertexEx(_,i);if(G!==-1){_=G,x++;continue}}_=t.getNextVertexEx(_,i)}if(P===0)break}return t.filterClosePoints(r,!1,!1,!1,-1),1}catch(c){l.error=c,l.hasError=!0}finally{om(l)}}function Kot(t,e,i,s,n,r,o){return Zot(t,e,i,s,n,r,o)}function ZN(t,e,i,s){for(let n=0,r=t.getPathCount();n<r;n++){const o=t.getXY(t.getPathStart(n));o.x!==i.xmin&&o.x!==i.xmax&&e.addPath(t,n,s)}}let Jot=class{getOperatorType(){return 10004}supportsCurves(){return!0}accelerateGeometry(e,i,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,i,s,n,r){return this.executeManyEx(e,i,s,Number.NaN,96,n,r)}execute(e,i,s,n){Number.isFinite(s)||Je("Invalid distance for buffer operation");const r=new id([e]),o=[s],l=this.executeMany(r,i,o,!1,n).next();return l||bt("null buffer output"),l}executeManyEx(e,i,s,n,r,o,l){if(s.find(c=>!Number.isFinite(c))!==void 0&&Je("Invalid distance for buffer operation"),o){const c=new $se(e,i,s,n,r,!1,l);return new jy().executeMany(c,i,l,2)}return new $se(e,i,s,n,r,!1,l)}};class $se extends Ca{constructor(e,i,s,n,r,o,l){super(),this.m_currentUnionEnvelope2D=new xe,this.m_index=-1,this.m_dindex=-1,this.m_progressTracker=l,this.m_bufferer=new Yot(l),this.m_inputGeoms=e,this.m_spatialReference=i,this.m_distances=s,this.m_maxDeviation=n,this.m_maxVerticesInFullCircle=r}tock(){return!0}getRank(){return 1}next(){{let e;for(;e=this.m_inputGeoms.next();)return Xc(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.m_dindex+1<this.m_distances.length&&this.m_dindex++,this.buffer(e,this.m_distances[this.m_dindex]);return null}}getGeometryID(){return this.m_index}buffer(e,i){return this.m_bufferer.buffer(e,i,this.m_spatialReference,0,0,4,this.m_maxDeviation,this.m_maxVerticesInFullCircle)}}const Qot=new Jot;function eat(t,e,i){return Qot.execute(t,e,i,null)}function tat(t,e,i={}){const{unit:s}=i,n=Lye(t);return s&&(e=$9e(e,s,n)),qye(eat(zz(t),zye(n),e),n)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const iat={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Oa={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},sat={image:"image"},oT={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},nat=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{--calcite-internal-chip-close-icon-color:var(--calcite-color-text-3);color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]):host([kind=brand]) .container,:host([appearance=outline-fill]):host([kind=brand]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-brand))}:host([appearance=outline]):host([kind=inverse]) .container,:host([appearance=outline-fill]):host([kind=inverse]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]) .container,:host([appearance=outline-fill]):host([kind=neutral]) .container{border-color:var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]) .container{background-color:transparent}:host([appearance=outline-fill]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]) .container{border-color:transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=neutral]) .container{background-color:var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{--calcite-internal-chip-close-icon-color:var(--calcite-color-text-3);color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([selected]) .select-icon{opacity:1}:host([scale=s]) .container{--calcite-internal-chip-block-size:1.5rem ;--calcite-internal-chip-container-space-x-end:0.25rem ;--calcite-internal-chip-container-space-x-start:0.25rem ;--calcite-internal-chip-font-size:var(--calcite-font-size--2);--calcite-internal-chip-icon-size:1rem ;--calcite-internal-chip-icon-space:0.25rem ;--calcite-internal-chip-image-size:1.25rem ;--calcite-internal-chip-title-space:0.25rem ;--calcite-internal-close-size:1rem }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end:var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.25rem }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:0.375rem ;--calcite-internal-chip-select-space-x-start:0}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.25rem ;--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.375rem ;--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start:0.375rem }:host([scale=m]) .container{--calcite-internal-chip-block-size:2rem ;--calcite-internal-chip-container-space-x-end:0.375rem ;--calcite-internal-chip-container-space-x-start:0.375rem ;--calcite-internal-chip-font-size:var(--calcite-font-size--1);--calcite-internal-chip-icon-size:1.5rem ;--calcite-internal-chip-icon-space:0.375rem ;--calcite-internal-chip-image-size:1.5rem ;--calcite-internal-chip-title-space:0.375rem ;--calcite-internal-close-size:1.5rem }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end:var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start:var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.375rem }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start:0}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.375rem }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end:0.125rem ;--calcite-internal-chip-select-space-x-start:0.125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.5rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end:0.25rem }:host([scale=l]) .container{--calcite-internal-chip-block-size:2.75rem ;--calcite-internal-chip-container-space-x-end:0.5rem ;--calcite-internal-chip-container-space-x-start:0.5rem ;--calcite-internal-chip-font-size:var(--calcite-font-size-0);--calcite-internal-chip-icon-size:2rem ;--calcite-internal-chip-icon-space:0.5rem ;--calcite-internal-chip-image-size:2rem ;--calcite-internal-chip-title-space:0.5rem ;--calcite-internal-close-size:2rem }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end:0.25rem ;--calcite-internal-chip-container-space-x-start:0.25rem }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.375rem }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end:0.5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start:0.375rem }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end:0.375rem ;--calcite-internal-chip-select-space-x-start:0.5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start:0.5rem ;--calcite-internal-chip-select-space-x-end:0.25rem ;--calcite-internal-chip-select-space-x-start:0.25rem }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end:0.75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end:0.375rem }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:1}.container.selectable{cursor:pointer}.container:not(.non-interactive):focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:0}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, 1.5rem);inline-size:var(--calcite-internal-chip-image-size, 1.5rem);padding-inline-start:0;padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, 0.375rem)}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity 0.15s ease-in-out, inline-size 0.15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:0.5;color:var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, 1.5rem);inline-size:var(--calcite-internal-chip-icon-size, 1.5rem)}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0px;cursor:pointer;align-items:center;border-radius:50%;border-style:none;outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-internal-chip-close-icon-color, var(--calcite-color-text-1))));block-size:var(--calcite-internal-close-size, 1.5rem);inline-size:var(--calcite-internal-close-size, 1.5rem);padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,rat=nat,oat=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteChipClose=Ot(this,"calciteChipClose",6),this.calciteChipSelect=Ot(this,"calciteChipSelect",6),this.calciteInternalChipKeyEvent=Ot(this,"calciteInternalChipKeyEvent",6),this.calciteInternalChipSelect=Ot(this,"calciteInternalChipSelect",6),this.calciteInternalSyncSelectedChips=Ot(this,"calciteInternalSyncSelectedChips",6),this.handleDefaultSlotChange=()=>{this.updateHasText()},this.close=()=>{this.calciteChipClose.emit(),this.selected=!1,this.closed=!0},this.closeButtonKeyDownHandler=e=>{nC(e.key)&&(e.preventDefault(),this.close())},this.handleSlotImageChange=e=>{this.hasImage=ks(e)},this.handleEmittingEvent=()=>{this.interactive&&this.calciteChipSelect.emit()},this.disabled=!1,this.appearance="solid",this.kind="neutral",this.closable=!1,this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.label=void 0,this.value=void 0,this.closed=!1,this.selectionMode="none",this.selected=!1,this.messageOverrides=void 0,this.messages=void 0,this.interactive=!1,this.parentChipGroup=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasText=!1,this.hasImage=!1}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}onMessagesChange(){}effectiveLocaleChange(){Vu(this,this.effectiveLocale)}connectedCallback(){Cl(this),Gu(this)}componentDidLoad(){Co(this),this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}componentDidRender(){kg(this)}disconnectedCallback(){Pl(this),ju(this)}async componentWillLoad(){Eo(this),wf()&&(await qu(this),this.updateHasText())}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&this.closeButtonEl.focus()}async setFocus(){var e,i;await Po(this),!this.disabled&&this.interactive?(e=this.containerEl)==null||e.focus():!this.disabled&&this.closable&&((i=this.closeButtonEl)==null||i.focus())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return ke("div",{class:Oa.imageContainer},ke("slot",{name:sat.image,onSlotchange:this.handleSlotImageChange}))}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?oT.checkedMultiple:oT.uncheckedMultiple:this.selected?oT.checkedSingle:void 0;return ke("div",{class:{[Oa.selectIcon]:!0,[Oa.selectIconActive]:this.selectionMode==="multiple"||this.selected}},e?ke("calcite-icon",{icon:e,scale:Lc(this.scale)}):null)}renderCloseButton(){return ke("button",{"aria-label":this.messages.dismissLabel,class:Oa.close,onClick:this.close,onKeyDown:this.closeButtonKeyDownHandler,ref:e=>this.closeButtonEl=e,tabIndex:this.disabled?-1:0},ke("calcite-icon",{icon:oT.close,scale:Lc(this.scale)}))}renderIcon(){return ke("calcite-icon",{class:Oa.chipIcon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:Lc(this.scale)})}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,s=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":void 0;return ke(Nr,{key:"7feca8bad37627baabfc4abd25cf135e1e9f196b"},ke(Ng,{key:"af2360b4b768ae8c643d52f4bdb9f5d282504114",disabled:e},ke("div",{key:"8d905c4ab20d271a211282b95ebcb2d305d76cb7","aria-checked":this.selectionMode!=="none"&&this.interactive?Wo(this.selected):void 0,"aria-label":this.label,class:{[Oa.container]:!0,[Oa.textSlotted]:this.hasText,[Oa.imageSlotted]:this.hasImage,[Oa.selectable]:this.selectionMode!=="none",[Oa.multiple]:this.selectionMode==="multiple",[Oa.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[Oa.selected]:this.selected,[Oa.closable]:this.closable,[Oa.nonInteractive]:!this.interactive,[Oa.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)},onClick:this.handleEmittingEvent,ref:n=>this.containerEl=n,role:s,tabIndex:i?-1:0},this.selectionMode!=="none"&&this.renderSelectionIcon(),this.renderChipImage(),this.icon&&this.renderIcon(),ke("span",{key:"dab6eae3f8330b85ffac4c7fe1b2fcbb53327196",class:Oa.title},ke("slot",{key:"72ba5bd0c7a97c30f766da119f419261aab24acb",onSlotchange:this.handleDefaultSlotChange})),this.closable&&this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return rat}},[1,"calcite-chip",{disabled:[516],appearance:[513],kind:[513],closable:[516],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],label:[1],value:[8],closed:[1540],selectionMode:[1,"selection-mode"],selected:[1540],messageOverrides:[1040],messages:[1040],interactive:[4],parentChipGroup:[16],defaultMessages:[32],effectiveLocale:[32],hasText:[32],hasImage:[32],setFocus:[64]},[[0,"keydown","keyDownHandler"],[0,"click","clickHandler"]],{selected:["watchSelected"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Gye(){if(typeof customElements>"u")return;["calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-chip":customElements.get(e)||customElements.define(e,oat);break;case"calcite-icon":customElements.get(e)||Qo();break}})}Gye();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const KN={slow:14e3,medium:1e4,fast:6e3},aT={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},uc={actionsEnd:"actions-end",close:"close",container:"container",containerActive:"container--active",dismissProgress:"dismiss-progress",icon:"icon",containerEmbedded:"container--embedded",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},aat=300;class lat{constructor(){this.registeredElements=[],this.queueTimeoutId=null}registerElement(e){const{registeredElements:i}=this;if(!i.includes(e)){switch(e.queue){case"immediate":i.unshift(e);break;case"next":i.splice(1,0,e);break;case"last":i.push(e);break}this.updateAlerts()}}unregisterElement(e){const{registeredElements:i}=this,s=i.indexOf(e);s!==-1&&i.splice(s,1),e.active=!1,this.updateAlerts()}updateAlerts(){window.clearTimeout(this.queueTimeoutId),this.queueTimeoutId=null,this.registeredElements.forEach((e,i)=>{e.openAlertCount=this.registeredElements.length,i===0?this.queueTimeoutId=window.setTimeout(()=>e.active=!0,aat):e.active=!1})}}const uat=`:host{--calcite-internal-alert-edge-distance:2rem;display:block;inline-size:var(--calcite-alert-width)}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;text-align:start;opacity:0;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-alert-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));background-color:var(--calcite-alert-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);max-inline-size:calc(100% - var(--calcite-internal-alert-edge-distance) * 2);transition:opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0, var(--calcite-internal-alert-edge-distance), 0);inset-block-end:var(--calcite-internal-alert-edge-distance)}.container[class*=top]{transform:translate3d(0, calc(-1 * var(--calcite-internal-alert-edge-distance)), 0);inset-block-start:var(--calcite-internal-alert-edge-distance)}.container[class*=start]{inset-inline-start:var(--calcite-internal-alert-edge-distance);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-internal-alert-edge-distance);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0px;margin-block:auto;margin-inline-end:auto}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;border-start-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-end-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));outline-color:transparent}.close:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.close:hover,.close:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress::after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-color-transparent-tint);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:0.5rem}:host([scale=s]) .container{--calcite-internal-alert-min-height:3.5rem;inline-size:var(--calcite-alert-width, 40em)}:host([scale=s]) .close{padding:0.75rem}:host([scale=s]) .icon{padding-inline-start:0.75rem}:host([scale=s]) .text-container{padding-block:0.5rem;padding-inline:0.75rem 0.5rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:0.75rem}:host([scale=m]) .container{--calcite-internal-alert-min-height:4.1875rem;inline-size:var(--calcite-alert-width, 50em)}:host([scale=m]) .close{padding:1rem}:host([scale=m]) .icon{padding-inline-start:1rem}:host([scale=m]) .text-container{padding-block:0.75rem;padding-inline:1rem 0.75rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:0.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-internal-alert-min-height:5.625rem;inline-size:var(--calcite-alert-width, 60em)}:host([scale=l]) .close{padding:1.25rem}:host([scale=l]) .icon{padding-inline-start:1.25rem}:host([scale=l]) .text-container{padding-block:1rem;padding-inline:1.25rem 1rem}:host([open]) .container--active{border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container--active[class*=bottom]{transform:translate3d(0, calc(-1 * var(--calcite-internal-alert-edge-distance)), inherit)}:host([open]) .container--active[class*=top]{transform:translate3d(0, var(--calcite-internal-alert-edge-distance), inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0px;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);margin-inline-end:0.5rem;color:var(--calcite-color-text-2)}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6000ms ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10000ms ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14000ms ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress::after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:0.75}100%{inline-size:100%;opacity:1}}.container--embedded{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}`,cat=uat,z_=new lat,hat=ts(class extends es{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteAlertBeforeClose=Ot(this,"calciteAlertBeforeClose",6),this.calciteAlertClose=Ot(this,"calciteAlertClose",6),this.calciteAlertBeforeOpen=Ot(this,"calciteAlertBeforeOpen",6),this.calciteAlertOpen=Ot(this,"calciteAlertOpen",6),this.handleKeyBoardFocus=()=>{this.isFocused=!0,this.handleFocus()},this.handleKeyBoardBlur=()=>{this.isFocused=!1,this.isHovered||this.handleBlur()},this.autoCloseTimeoutId=null,this.totalOpenTime=0,this.totalHoverTime=0,this.openTransitionProp="opacity",this.setTransitionEl=e=>{this.transitionEl=e},this.closeAlert=()=>{this.open=!1,this.clearAutoCloseTimeout()},this.actionsEndSlotChangeHandler=e=>{this.hasEndActions=ks(e)},this.handleMouseOver=()=>{this.isHovered=!0,this.handleFocus()},this.handleMouseLeave=()=>{this.isHovered=!1,this.isFocused||this.handleBlur()},this.handleFocus=()=>{this.clearAutoCloseTimeout(),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()},this.handleBlur=()=>{const e=Date.now()-this.lastMouseOverBegin,i=KN[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)},this.active=!1,this.openAlertCount=0,this.open=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.embedded=!1,this.kind="brand",this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.numberingSystem=void 0,this.placement="bottom",this.scale="m",this.messages=void 0,this.messageOverrides=void 0,this.queue="last",this.defaultMessages=void 0,this.effectiveLocale="",this.numberStringFormatter=new wne,this.hasEndActions=!1,this.isFocused=!1}handleActiveChange(){this.clearAutoCloseTimeout(),this.active&&this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),KN[this.autoCloseDuration]))}openHandler(){of(this),this.open?z_.registerElement(this.el):z_.unregisterElement(this.el)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(this.clearAutoCloseTimeout(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),KN[this.autoCloseDuration]))}onMessagesChange(){}handleQueueChange(){this.open&&(z_.unregisterElement(this.el),z_.registerElement(this.el))}connectedCallback(){Cl(this),Gu(this),this.open&&z_.registerElement(this.el),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}async componentWillLoad(){Eo(this),await qu(this),this.open&&of(this)}componentDidLoad(){Co(this)}disconnectedCallback(){z_.unregisterElement(this.el),this.clearAutoCloseTimeout(),Pl(this),ju(this),this.embedded=!1}render(){const{open:e,autoClose:i,label:s,placement:n,active:r,openAlertCount:o}=this,l=i?"alert":"alertdialog",c=!e,f=Jbe(iat,this.icon,this.kind),y=o>1;return ke(Nr,{key:"cecedeaa678e4f6e22fd2aabc4d29bc8589430f6","aria-hidden":Wo(c),"aria-label":s,"calcite-hydrated-hidden":c,role:l},ke("div",{key:"ca85d5f5ec313f3a305e01dcc8cbbad9647dd516",class:{[uc.container]:!0,[uc.containerActive]:r,[`${uc.container}--${n}`]:!0,[uc.containerEmbedded]:this.embedded,[uc.focused]:this.isFocused},onPointerEnter:this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null,onPointerLeave:this.autoClose?this.handleMouseLeave:null,ref:this.setTransitionEl},f&&this.renderIcon(f),ke("div",{key:"1f72f255c3e0630eed63bb62d3d50f4a2ba6a528",class:uc.textContainer,onFocusin:this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null},ke("slot",{key:"aade607960adea0a10f5eac85b119444085c9cf9",name:aT.title}),ke("slot",{key:"1f47158cfbf8c0626cd49246142fb750311b1d4a",name:aT.message}),ke("slot",{key:"5ba06e024b517f23168311828cc8ce41c21926a6",name:aT.link})),this.renderActionsEnd(),y?this.renderQueueCount():null,this.renderCloseButton(),e&&r&&i?ke("div",{class:uc.dismissProgress}):null))}renderCloseButton(){return ke("button",{"aria-label":this.messages.close,class:uc.close,key:"close",onClick:this.closeAlert,onFocusin:this.autoClose?this.handleKeyBoardFocus:null,onFocusout:this.autoClose?this.handleKeyBoardBlur:null,ref:e=>this.closeButton=e,type:"button"},ke("calcite-icon",{icon:"x",scale:Lc(this.scale)}))}renderQueueCount(){const{openAlertCount:e}=this,i=e>2?e-1:1,s=this.numberStringFormatter.numberFormatter.format(i);return ke("div",{class:{[uc.queueCount]:!0,[uc.queueCountActive]:e>1},key:"queue-count"},ke("calcite-chip",{scale:this.scale,value:s},s))}renderActionsEnd(){return ke("div",{class:uc.actionsEnd},ke("slot",{name:aT.actionsEnd,onSlotchange:this.actionsEndSlotChangeHandler}))}renderIcon(e){return ke("div",{class:uc.icon},ke("calcite-icon",{flipRtl:this.iconFlipRtl,icon:e,scale:Lc(this.scale)}))}async setFocus(){await Po(this);const e=Xbe(this.el,{selector:"calcite-link"});if(!(!this.closeButton&&!e)){if(e)return e.setFocus();this.closeButton&&this.closeButton.focus()}}effectiveLocaleChange(){Vu(this,this.effectiveLocale),this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"}}clearAutoCloseTimeout(){window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{active:["handleActiveChange"],open:["openHandler"],autoCloseDuration:["updateDuration"],messageOverrides:["onMessagesChange"],queue:["handleQueueChange"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}}static get style(){return cat}},[1,"calcite-alert",{active:[4],openAlertCount:[2,"open-alert-count"],open:[1540],autoClose:[516,"auto-close"],autoCloseDuration:[513,"auto-close-duration"],embedded:[1028],kind:[513],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],numberingSystem:[513,"numbering-system"],placement:[513],scale:[513],messages:[1040],messageOverrides:[1040],queue:[513],defaultMessages:[32],effectiveLocale:[32],numberStringFormatter:[32],hasEndActions:[32],isFocused:[32],setFocus:[64]},void 0,{active:["handleActiveChange"],open:["openHandler"],autoCloseDuration:["updateDuration"],messageOverrides:["onMessagesChange"],queue:["handleQueueChange"],effectiveLocale:["effectiveLocaleChange"],numberingSystem:["numberingSystemChange"]}]);function dat(){if(typeof customElements>"u")return;["calcite-alert","calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-alert":customElements.get(e)||customElements.define(e,hat);break;case"calcite-chip":customElements.get(e)||Gye();break;case"calcite-icon":customElements.get(e)||Qo();break}})}dat();const fat=new c7;function pat(t,e,i){return fat.execute(t,e,i,null)}function mat(t,e){const i=Lye(t);return qye(pat(zz(t),zz(e),zye(i)),i)}Xse("https://js.arcgis.com/calcite-components/2.13.2/assets");const gat=g_e.createRoot(document.getElementById("root"));gat.render(Yt.jsxs(u_e.StrictMode,{children:[Yt.jsxs("calcite-shell",{children:[Yt.jsxs("calcite-navigation",{slot:"header",id:"header",children:[Yt.jsx("calcite-navigation-logo",{id:"header-title",slot:"logo",heading:"R-STEP Solar Panel Planning",href:"#",description:"A web toolkit for solar panel planning"}),Yt.jsxs("calcite-menu",{slot:"content-end",children:[Yt.jsx("calcite-menu-item",{text:"Map","icon-start":"globe"}),Yt.jsx("calcite-menu-item",{text:"About","icon-start":"information",id:"about-btn"}),Yt.jsx("calcite-menu-item",{text:"GitHub","icon-start":"code",href:"https://github.com/HumblePasty/rstep-siting-tool",target:"_blank",id:"about-btn"})]}),Yt.jsxs("calcite-dropdown",{id:"header-dropdown",slot:"content-end",children:[Yt.jsx("calcite-navigation-user",{id:"header-user","full-name":"Jane Doe",username:"jane.doe",slot:"trigger"}),Yt.jsx("calcite-dropdown-group",{"group-title":"User Settings","selection-mode":"none",children:Yt.jsx("calcite-dropdown-item",{onClick:vat,children:"Log out"})})]})]}),Yt.jsxs("div",{slot:"footer",id:"footer","justify-content":"center","align-items":"center",children:["Created by  ",Yt.jsx("a",{href:"https://5lakesenergy.com/",target:"_blank",children:"5 Lakes Energy LLC"}),"  |   Learn more about the  ",Yt.jsx("a",{href:"https://www.energy.gov/eere/renewable-energy-siting-through-technical-engagement-and-planning-r-steptm",target:"_blank",children:"R-STEP Program"})]}),Yt.jsxs("arcgis-map",{itemId:"1d9aec5e950f46f9a35a0d399e7e0cf1",center:"-83.74, 42.27",zoom:"15",onarcgisViewReadyChange:yat,children:[Yt.jsx("arcgis-placement",{position:"top-left",children:Yt.jsxs("calcite-action-pad",{expanded:"true",overlayPositioning:"fixed",children:[Yt.jsx("calcite-action",{text:"Define Solar Array",icon:"polygon",id:"AddAction"}),Yt.jsx("calcite-popover",{"reference-element":"AddAction",label:"Add",overlayPositioning:"fixed",autoClose:!0,children:Yt.jsx("arcgis-sketch",{id:"my-sketch",onarcgisCreate:Eat})}),Yt.jsx("calcite-action",{text:"Upload Base Data",icon:"upload",onClick:_at}),Yt.jsx("calcite-action",{text:"Edit Base Data",icon:"pencil",id:"EditAction"}),Yt.jsx("calcite-popover",{"reference-element":"EditAction",label:"Edit",overlayPositioning:"fixed",autoClose:!0,children:Yt.jsx("arcgis-editor",{})}),Yt.jsx("calcite-action",{text:"Add Clipping Features",icon:"crop",id:"CropAction"}),Yt.jsx("calcite-popover",{"reference-element":"CropAction",label:"Crop",overlayPositioning:"fixed",autoClose:!0,children:Yt.jsxs("calcite-action-pad",{expandDisabled:!0,expanded:!0,children:[Yt.jsx("calcite-action",{text:"Add Building Footprints",icon:"footprint",onClick:Cat}),Yt.jsx("calcite-action",{text:"Add Roads",icon:"curve",onClick:Pat}),Yt.jsx("calcite-action",{text:"Self-defined Polygon",icon:"polygon",onClick:Tat})]})}),Yt.jsx("calcite-action",{id:"EditBufferAction",text:"Edit Buffer Distance",icon:"rings",onClick:Iat,children:Yt.jsx("calcite-popover",{id:"EditBufferPopover","reference-element":"EditBufferAction",label:"Buffer",overlayPositioning:"fixed",triggerDisabled:!0,autoClose:!0,children:Yt.jsxs("calcite-label",{alignment:"center",children:["Buffer Distance",Yt.jsx("calcite-slider",{id:"BufferSlider",min:"0",max:"100",step:"1",value:"50","label-handles":!0,"label-ticks":!0,"min-label":"1","max-label":"100"})]})})}),Yt.jsx("calcite-action",{text:"View Clipped Results",icon:"view-visible",onClick:Aat}),Yt.jsx("calcite-action",{text:"Import from File",icon:"upload",onClick:xat}),Yt.jsx("calcite-action",{id:"ExportAction",text:"Export Results",icon:"download",onClick:wat,disabled:!0}),Yt.jsx("calcite-action",{id:"ClearAction",text:"Clear",icon:"trash",onClick:Sat,disabled:!0}),Yt.jsx("calcite-tooltip",{slot:"expand-tooltip",children:"Toggle Action Bar"})]})}),Yt.jsx("arcgis-placement",{position:"top-right",children:Yt.jsxs("calcite-action-pad",{expanded:"false",overlayPositioning:"fixed",id:"map-views-pad",children:[Yt.jsx("calcite-action",{text:"Basemap",icon:"basemap",id:"BasemapAction"}),Yt.jsx("calcite-popover",{"reference-element":"BasemapAction",label:"Basemap",overlayPositioning:"fixed",autoClose:!0,children:Yt.jsx("arcgis-basemap-gallery",{})}),Yt.jsx("calcite-action",{text:"Layer List",icon:"layers",id:"LayerListAction"}),Yt.jsx("calcite-popover",{"reference-element":"LayerListAction",label:"Layer List",overlayPositioning:"fixed",autoClose:!0,children:Yt.jsx("arcgis-layer-list",{})}),Yt.jsx("calcite-action",{text:"Legend",icon:"legend",id:"LegendAction"}),Yt.jsx("calcite-popover",{"reference-element":"LegendAction",label:"Legend",overlayPositioning:"fixed",autoClose:!0,children:Yt.jsx("arcgis-legend",{})}),Yt.jsx("calcite-action",{text:"Measure Distance",icon:"measure-line",id:"MeasureDistanceAction"}),Yt.jsx("calcite-popover",{"reference-element":"MeasureDistanceAction",label:"Measure Distance",overlayPositioning:"fixed",autoClose:!0,children:Yt.jsx("arcgis-distance-measurement-2d",{})}),Yt.jsx("calcite-action",{text:"Measure Area",icon:"measure-area",id:"MeasureAreaAction"}),Yt.jsx("calcite-popover",{"reference-element":"MeasureAreaAction",label:"Measure Area",overlayPositioning:"fixed",autoClose:!0,children:Yt.jsx("arcgis-area-measurement-2d",{})})]})})]})]}),Yt.jsxs("calcite-dialog",{modal:!0,heading:"About",id:"about-dialog",children:[Yt.jsx("calcite-label",{children:"This is a web toolkit for solar panel planning."}),Yt.jsxs("ul",{children:[Yt.jsx("li",{children:"Start by adding a polygon to the map to represent a solar panel array."}),Yt.jsx("li",{children:'Use the "Edit Layers" button to edit the polygon or other layers on the map.'}),Yt.jsx("li",{children:"You can also import and export GeoJSON files to save and share your work."}),Yt.jsx("li",{children:'Use the "Clear" button to remove all the graphics from the map.'}),Yt.jsx("li",{children:"TBD..."})]})]}),Yt.jsxs("calcite-alert",{icon:"smile",id:"buffer-alert",scale:"m",autoCloseDuration:"fast",autoClose:!0,children:[Yt.jsx("div",{slot:"title",children:"Buffer Editing"}),Yt.jsxs("div",{slot:"message",children:["Please select a feature from the ",Yt.jsx("b",{children:'"Selected Features"'})," Layer to continue"]}),Yt.jsx("calcite-button",{slot:"controls",appearance:"clear",children:"Close"})]})]}));function yat(t){const e=new Ou;e.authMode="immediate",e.load().then(()=>{document.querySelector("#header-user").fullName=e.user.fullName,document.querySelector("#header-user").username=e.user.username,document.querySelector("#header-user").avatarUrl=e.user.thumbnailUrl});const i=document.getElementById("about-btn"),s=document.getElementById("about-dialog");i.addEventListener("click",()=>{s.open=!0});const n=t.target.map;n.allLayers.forEach(c=>{c.title==="Regrid_Nationwide_Parcel_Boundaries_May24"&&(c.visible=!1),c.title==="Michigan"&&(c.visible=!1),c.title==="Michigan Counties"&&(c.visible=!1)});const r=n.allLayers.find(c=>c.title==="Substations");n.remove(r);const o=new ode({title:"Selected Features",visible:!0,visibilityMode:"independent",layers:[]});n.add(o),document.querySelector("#BufferSlider").addEventListener("calciteSliderChange",Mat)}function vat(){pV.destroyCredentials(),window.location.reload()}function _at(){const t="https://www.arcgis.com",e=document.querySelector("arcgis-map").view,i=document.createElement("input");i.type="file",i.accept=".zip",i.onchange=s=>{const n=s.target.files[0],r=new FileReader;r.onload=o=>{const l={name:n.name,targetSR:e.spatialReference,maxRecordCount:1e3,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0},c=e.resolution;l.generalize=!0,l.maxAllowableOffset=c,l.reducePrecision=!0,l.numberOfDigitsAfterDecimal=0;const f=new FormData;f.append("filetype","shapefile"),f.append("publishParameters",JSON.stringify(l)),f.append("f","json"),f.append("file",n),Qs(t+"/sharing/rest/content/features/generate",{method:"POST",body:f}).then(function(y){if(console.log(y),!y&&y.error){console.error(y.error);return}bat(y.data.featureCollection)})},r.readAsArrayBuffer(n)},i.click()}function bat(t){var e=[];t.layers.forEach(function(s){var n=new mA({objectIdField:"ObjectID"});switch(s.featureSet.geometryType){case"esriGeometryPoint":s.featureSet.features.forEach(function(r){r.geometry=new Hi({x:r.geometry.x,y:r.geometry.y,spatialReference:r.geometry.spatialReference})}),n.renderer={type:"simple",symbol:{type:"simple-marker",size:6,color:"black"}};break;case"esriGeometryPolygon":s.featureSet.features.forEach(function(r){r.geometry=new Wa({rings:r.geometry.rings,spatialReference:r.geometry.spatialReference})}),n.renderer={type:"simple",symbol:{type:"simple-fill",size:6,color:"black"}};break;case"esriGeometryPolyline":s.featureSet.features.forEach(function(r){r.geometry=new Ef({paths:r.geometry.paths,spatialReference:r.geometry.spatialReference})}),n.renderer={type:"simple",symbol:{type:"simple-line",size:6,color:"white"}};break;default:console.log("Not a valid shapefile")}n.source=s.featureSet.features,e.push(n)}),document.querySelector("arcgis-map").map.addMany(e)}function xat(){const t=document.createElement("input");t.type="file",t.accept=".geojson",t.onchange=e=>{const i=e.target.files[0],s=new FileReader;s.onload=n=>{const r=JSON.parse(n.target.result);console.log(r),document.querySelector("#my-sketch").layer.addMany(r.features)},s.readAsText(i)},t.click()}function wat(){const i={type:"FeatureCollection",features:document.querySelector("#my-sketch").layer.graphics.map(o=>o.toJSON())},s=new Blob([JSON.stringify(i)],{type:"application/json"}),n=URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download="sketch.geojson",r.click()}function Sat(){document.querySelector("#my-sketch").layer.removeAll(),document.querySelector("#ExportAction").disabled=!0,document.querySelector("#ClearAction").disabled=!0}function Eat(t){document.querySelector("#my-sketch").layer.graphics.on("after-changes",i=>{document.querySelector("#ExportAction").disabled=i.length===0,document.querySelector("#ClearAction").disabled=i.length===0})}function Cat(){const t=document.querySelector("arcgis-map").view,e=new jA({layer:new Rv({title:"Building Footprints"}),view:t,creationMode:"single",updateOnGraphicClick:!0});e.create("polygon"),e.layer.graphics.on("after-add",i=>{i.item})}function Pat(){const t=document.querySelector("arcgis-map").view,e=document.querySelector("arcgis-map").map,i=new jA({layer:new Rv({title:"Roads"}),view:t,creationMode:"single",updateOnGraphicClick:!0});i.create("rectangle"),i.layer.graphics.on("after-add",s=>{const n=s.item,r=e.allLayers.find(l=>l.title==="All Roads"),o=r.createQuery();o.geometry=n.geometry,o.spatialRelationship="intersects",r.queryFeatures(o).then(l=>{const c=e.allLayers.find(f=>f.title==="Selected Features");if(c.allLayers.find(f=>f.title==="Selected Roads")){const f=c.allLayers.find(_=>_.title==="Selected Roads"),y={addFeatures:l.features};f.applyEdits(y)}else{const f=new mA({source:l.features,fields:l.fields,objectIdField:"OBJECTID",title:"Selected Roads",geometryType:l.geometryType,renderer:r.renderer,popupTemplate:r.popupTemplate});c.add(f)}})})}function Tat(){const t=document.querySelector("arcgis-map").view,e=new jA({layer:new Rv,view:t,creationMode:"single",updateOnGraphicClick:!0});e.create("polygon");const i=document.querySelector("arcgis-map").map.allLayers.find(s=>s.title==="Selected Features");e.layer.graphics.on("after-add",s=>{let n=s.item;if(i.allLayers.find(r=>r.title==="Selected Polygon")){const r=i.allLayers.find(o=>o.title==="Selected Polygon");r.queryFeatureCount().then(o=>{n.attributes={id:o+1,name:`Self Defined Polygon ${o+1}`};const l={addFeatures:[n]};r.applyEdits(l)})}else{n.attributes={id:1,name:"Self Defined Polygon 1"};const r=new mA({source:[n],fields:[{name:"OBJECTID",alias:"ID",type:"oid"},{name:"name",alias:"Name",type:"string"}],objectIdField:"OBJECTID",title:"Selected Polygon",geometryType:n.geometry.type,popupTemplate:{title:"{name}",content:"This is a self-defined polygon"}});i.add(r)}})}function Iat(){const t=document.querySelector("#EditBufferPopover");if(t.open){t.open=!1;return}const e=document.querySelector("arcgis-map").view;if(!e.map.allLayers.find(i=>i.title==="Buffers")){const i=new Rv({title:"Buffers"});e.map.add(i)}Object.keys(e.popup).length===0||e.popup.visible===!1?(console.log("No popup"),document.querySelector("#buffer-alert").open=!0):t.open=!0}function Mat(t){const e=document.querySelector("arcgis-map").view,i=e.popup.features;e.map.allLayers.find(o=>o.title==="Selected Features");const s=e.map.allLayers.find(o=>o.title==="Buffers");var n=t.target.value;const r=i.map(o=>{const l=o.geometry.clone(),c=tat(l,n);return new Xp({geometry:c,symbol:{type:"simple-fill",color:[0,0,0,.5],outline:{color:[0,0,0,1],width:1}}})});s.addMany(r)}function Aat(){const t=document.querySelector("#my-sketch").layer,e=document.querySelector("arcgis-map").map.allLayers.find(o=>o.title==="Buffers"),i=t.graphics,s=e.graphics,n=mat(i.items[0].geometry,s.items[0].geometry);console.log("Clipped Graphics",n);const r=new Rv({title:"Clipped Result"});r.addMany(n),document.querySelector("arcgis-map").map.add(r)}export{ht as $,zxe as A,uft as B,aV as C,tTe as D,Ft as E,gl as F,qi as G,jX as H,gxe as I,ad as J,sqe as K,rft as L,zt as M,hM as N,lft as O,Kl as P,wft as Q,Ou as R,TS as S,yl as T,uV as U,Fut as V,_q as W,v2 as X,Qs as Y,yct as Z,nt as _,z$e as a,Sdt as a$,Ue as a0,qRe as a1,VRe as a2,GRe as a3,cpe as a4,Gg as a5,wt as a6,Nt as a7,Lce as a8,vl as a9,EWe as aA,b8e as aB,Vr as aC,_o as aD,Ije as aE,Yb as aF,Ef as aG,Mce as aH,xV as aI,Ice as aJ,aK,cpt as aL,Hht as aM,hdt as aN,ddt as aO,dC as aP,Gs as aQ,h6 as aR,KL as aS,bo as aT,Bl as aU,Ooe as aV,or as aW,bq as aX,Cv as aY,fi as aZ,xPe as a_,eu as aa,RG as ab,j0e as ac,dv as ad,x8e as ae,Hce as af,O8e as ag,x0t as ah,b0t as ai,Cu as aj,ui as ak,Xp as al,uht as am,rE as an,Hdt as ao,b2 as ap,Ko as aq,Jy as ar,Qh as as,Zl as at,ace as au,XDe as av,WDe as aw,jce as ax,B0e as ay,cDe as az,rt as b,lyt as b$,Fc as b0,so as b1,Zo as b2,Hl as b3,pl as b4,SC as b5,mi as b6,Lqe as b7,yTe as b8,jct as b9,vf as bA,DUe as bB,o0e as bC,am as bD,RA as bE,hn as bF,kt as bG,o7e as bH,SE as bI,uue as bJ,Jct as bK,ZP as bL,yg as bM,Wdt as bN,av as bO,vNe as bP,TNe as bQ,eht as bR,RMe as bS,OMe as bT,$Me as bU,yNe as bV,jdt as bW,Bdt as bX,ff as bY,Ei as bZ,ZQ as b_,jI as ba,dM as bb,FGe as bc,IG as bd,un as be,Rct as bf,Fct as bg,Oct as bh,Lct as bi,zct as bj,qct as bk,Hc as bl,Hi as bm,gC as bn,xo as bo,Rgt as bp,yr as bq,XGe as br,Fg as bs,Uc as bt,d6 as bu,cJ as bv,oJ as bw,Lu as bx,Ml as by,MUe as bz,df as c,um as c$,Sa as c0,mA as c1,cmt as c2,dmt as c3,hmt as c4,dFe as c5,hFe as c6,fx as c7,zTe as c8,eze as c9,PGe as cA,fq as cB,pq as cC,kv as cD,qdt as cE,jM as cF,xM as cG,wM as cH,Gq as cI,jq as cJ,E9e as cK,C9e as cL,ps as cM,Iq as cN,Hs as cO,PC as cP,TV as cQ,vGe as cR,Fhe as cS,nde as cT,FV as cU,mV as cV,LM as cW,FNe as cX,ONe as cY,Ea as cZ,FC as c_,Hmt as ca,Hpt as cb,cK as cc,$S as cd,FR as ce,QFe as cf,Umt as cg,Ymt as ch,yG as ci,hi as cj,cr as ck,ahe as cl,W8e as cm,Z8e as cn,dhe as co,I_ as cp,eLe as cq,jp as cr,Act as cs,X0 as ct,Bi as cu,fqe as cv,mct as cw,nft as cx,Nh as cy,Li as cz,BC as d,Qa as d$,$Ne as d0,pf as d1,mx as d2,Zhe as d3,Yp as d4,oE as d5,zn as d6,Wa as d7,$I as d8,j$ as d9,IV as dA,Pke as dB,kpe as dC,fct as dD,Xmt as dE,NC as dF,gT as dG,$C as dH,udt as dI,Uft as dJ,dpt as dK,SR as dL,Hp as dM,fI as dN,Sq as dO,upt as dP,rdt as dQ,$y as dR,_$ as dS,Xre as dT,w9e as dU,kmt as dV,Lmt as dW,PZ as dX,Rmt as dY,zDe as dZ,AA as d_,H$ as da,M2 as db,jb as dc,vqe as dd,_qe as de,cqe as df,kr as dg,Yl as dh,nme as di,px as dj,mje as dk,gje as dl,Xl as dm,pgt as dn,hgt as dp,fgt as dq,RNe as dr,Edt as ds,pM as dt,MC as du,dE as dv,U0 as dw,Mu as dx,Cke as dy,bM as dz,G$e as e,m0t as e$,u1t as e0,Es as e1,td as e2,r1t as e3,jBe as e4,n1t as e5,Lg as e6,a1t as e7,Fu as e8,Yce as e9,P$e as eA,Yht as eB,odt as eC,Ka as eD,Jh as eE,Rv as eF,ZI as eG,CI as eH,Tce as eI,adt as eJ,K7e as eK,oqe as eL,dfe as eM,Xae as eN,Rae as eO,Bke as eP,AV as eQ,_Ne as eR,Xdt as eS,Dc as eT,Udt as eU,Mhe as eV,aoe as eW,ooe as eX,Oht as eY,Zy as eZ,ppe as e_,Yo as ea,GS as eb,Vn as ec,zG as ed,Hg as ee,c1t as ef,wme as eg,Cme as eh,P9 as ei,h1t as ej,AF as ek,gV as el,d1t as em,v1t as en,bA as eo,Hh as ep,$2 as eq,bGe as er,Tct as es,xg as et,j7e as eu,CGe as ev,GI as ew,wn as ex,_x as ey,Wht as ez,q$e as f,wxe as f$,TK as f0,PK as f1,xut as f2,but as f3,$Te as f4,ql as f5,Oq as f6,DC as f7,MDe as f8,Gdt as f9,Po as fA,Q6 as fB,Vu as fC,K6 as fD,Cl as fE,Gu as fF,Pl as fG,ju as fH,J6 as fI,qu as fJ,Eo as fK,Co as fL,kg as fM,ke as fN,Xbe as fO,Qz as fP,Wo as fQ,Ng as fR,Nr as fS,rq as fT,ex as fU,Zc as fV,aC as fW,USe as fX,YSe as fY,xl as fZ,Jbe as f_,bZ as fa,E2 as fb,RI as fc,Yje as fd,Zje as fe,X0t as ff,ioe as fg,noe as fh,roe as fi,rut as fj,cPe as fk,Sut as fl,Lq as fm,A9 as fn,cyt as fo,apt as fp,Wft as fq,fDe as fr,Au as fs,mut as ft,ts as fu,es as fv,Ot as fw,ks as fx,mSe as fy,of as fz,sm as g,X$e as g$,Sxe as g0,G2e as g1,lY as g2,Xz as g3,Lat as g4,vne as g5,cS as g6,Fat as g7,zat as g8,So as g9,AUe as gA,T9 as gB,wo as gC,Tje as gD,sYe as gE,rNe as gF,DM as gG,Vht as gH,moe as gI,dct as gJ,_ct as gK,bQ as gL,Rht as gM,gL as gN,qut as gO,qS as gP,Oi as gQ,ege as gR,_g as gS,Ul as gT,wx as gU,eme as gV,XM as gW,rde as gX,Jue as gY,ATe as gZ,dO as g_,tM as ga,B2e as gb,X2e as gc,kne as gd,U2e as ge,Vs as gf,ng as gg,Lc as gh,$ne as gi,Yd as gj,Z2e as gk,wf as gl,d3e as gm,sI as gn,ire as go,p$ as gp,c3e as gq,u3e as gr,Kwe as gs,Ybe as gt,_xe as gu,iat as gv,uXe as gw,E$e as gx,vme as gy,Ugt as gz,nPe as h,Tg as h$,vZ as h0,Ib as h1,HM as h2,y0t as h3,Y2e as h4,Yy as h5,NSe as h6,oat as h7,Gye as h8,Yn as h9,mpt as hA,Tmt as hB,qfe as hC,RSe as hD,ESe as hE,Dat as hF,pS as hG,f$ as hH,ere as hI,tre as hJ,eut as hK,ivt as hL,KSe as hM,JSe as hN,sX as hO,Mre as hP,Rlt as hQ,Flt as hR,Mc as hS,gEe as hT,Llt as hU,Iv as hV,EC as hW,vT as hX,Wk as hY,TUe as hZ,IUe as h_,bre as ha,hEe as hb,Ire as hc,ASe as hd,pSe as he,tm as hf,gre as hg,uxe as hh,Nat as hi,$at as hj,Eb as hk,C3e as hl,GU as hm,Ane as hn,nq as ho,aM as hp,f2 as hq,kat as hr,Vat as hs,Pct as ht,Oy as hu,Qft as hv,ppt as hw,aLe as hx,im as hy,iFe as hz,F$e as i,pft as i$,i0e as i0,Lv as i1,pC as i2,cgt as i3,dee as i4,Zgt as i5,Xgt as i6,Lut as i7,EBe as i8,rPe as i9,CC as iA,yT as iB,qO as iC,Tb as iD,EM as iE,cdt as iF,nx as iG,Uje as iH,Dhe as iI,qpt as iJ,wdt as iK,vA as iL,mvt as iM,ome as iN,Rce as iO,_C as iP,Tpt as iQ,Pu as iR,nht as iS,AZ as iT,YDe as iU,pqe as iV,vG as iW,gqe as iX,yqe as iY,YZ as iZ,fft as i_,Pv as ia,SPe as ib,sr as ic,Put as id,vg as ie,oAe as ig,hx as ih,cx as ii,jee as ij,kvt as ik,bg as il,D$e as im,RT as io,Vct as ip,vct as iq,vC as ir,lVe as is,nqe as it,_0t as iu,xqe as iv,v0t as iw,bqe as ix,KPe as iy,QG as iz,Qo as j,Iht as j$,Qe as j0,h8e as j1,s$e as j2,zM as j3,Rpt as j4,rv as j5,cGe as j6,oGe as j7,Oqe as j8,LZ as j9,Og as jA,Eme as jB,Gft as jC,Vft as jD,AOe as jE,RM as jF,lHe as jG,Ght as jH,BBe as jI,Yct as jJ,hW as jK,$ae as jL,Oae as jM,ur as jN,Syt as jO,zht as jP,o8e as jQ,Bce as jR,NBe as jS,IF as jT,Uce as jU,b9e as jV,sf as jW,_E as jX,wG as jY,qNe as jZ,zNe as j_,bhe as ja,TGe as jb,VNe as jc,xGe as jd,$V as je,Uk as jf,fA as jg,LO as jh,NV as ji,nze as jj,lA as jk,NNe as jl,TG as jm,oct as jn,gut as jo,Pme as jp,TA as jq,ZBe as jr,UBe as js,Eje as jt,XBe as ju,MG as jv,Uht as jw,EZ as jx,Lpe as jy,qTe as jz,xi as k,jF as k$,LNe as k0,wA as k1,Fpe as k2,eWe as k3,XC as k4,YC as k5,egt as k6,WQ as k7,FF as k8,Dv as k9,VHe as kA,Vut as kB,Gut as kC,bG as kD,YBe as kE,JBe as kF,QBe as kG,tHe as kH,GX as kI,pk as kJ,Kh as kK,og as kL,Sy as kM,UTe as kN,fM as kO,Up as kP,hI as kQ,r$ as kR,Gat as kS,C2e as kT,Wz as kU,Eut as kV,ca as kW,jMe as kX,mIe as kY,bme as kZ,HF as k_,PA as ka,TY as kb,nC as kc,UNe as kd,XUe as ke,kqe as kf,Kgt as kg,GNe as kh,Xa as ki,aAe as kj,JQ as kk,NUe as kl,rUe as km,y6 as kn,LUe as ko,Pg as kp,Ygt as kq,ro as kr,Yhe as ks,vS as kt,cut as ku,AWe as kv,MF as kw,qG as kx,qo as ky,MHe as kz,bft as l,gVe as l$,qF as l0,m0e as l1,EE as l2,oN as l3,tmt as l4,JM as l5,Qpt as l6,mL as l7,Rje as l8,ZXe as l9,eHe as lA,hm as lB,SLe as lC,jhe as lD,x9e as lE,Bq as lF,pje as lG,ime as lH,Npe as lI,tct as lJ,Nze as lK,kVe as lL,Eqe as lM,Hqe as lN,dVe as lO,tVe as lP,PI as lQ,yae as lR,O$e as lS,hfe as lT,vft as lU,Epe as lV,Eq as lW,fb as lX,wl as lY,Gqe as lZ,L0t as l_,JXe as la,z0e as lb,Q0t as lc,QXe as ld,KXe as le,QYe as lf,$yt as lg,kYe as lh,Dct as li,Vae as lj,Wct as lk,iOe as ll,loe as lm,hut as ln,n4e as lo,$u as lp,RBe as lq,TBe as lr,UDe as ls,BDe as lt,$We as lu,t1t as lv,fje as lw,Nje as lx,l6 as ly,oHe as lz,ds as m,Xft as m$,yVe as m0,kh as m1,ix as m2,cfe as m3,pG as m4,cm as m5,omt as m6,iVe as m7,rVe as m8,afe as m9,qc as mA,LBe as mB,Sme as mC,Mme as mD,g1t as mE,KC as mF,OHe as mG,Sx as mH,U0t as mI,Dht as mJ,ice as mK,Fn as mL,INe as mM,t6 as mN,Qlt as mO,QDe as mP,rj as mQ,S6 as mR,xvt as mS,Ivt as mT,kue as mU,$Ze as mV,rA as mW,rx as mX,Ru as mY,d9 as mZ,HV as m_,ofe as ma,rfe as mb,kNe as mc,uVe as md,jqe as me,Bqe as mf,Yqe as mg,Xqe as mh,nVe as mi,Wqe as mj,Zqe as mk,Kqe as ml,Jqe as mm,Qqe as mn,eVe as mo,Rpe as mp,sK as mq,_oe as mr,tx as ms,Whe as mt,Bo as mu,g0t as mv,fTe as mw,y1t as mx,f1t as my,FBe as mz,Jl as n,Lje as n$,Hft as n0,dme as n1,nYe as n2,fce as n3,oV as n4,sdt as n5,Jae as n6,lIe as n7,wyt as n8,aPe as n9,idt as nA,Foe as nB,Wut as nC,Xut as nD,hAe as nE,c4e as nF,zoe as nG,Kht as nH,uut as nI,uPe as nJ,uyt as nK,Gee as nL,Q0e as nM,lv as nN,V0e as nO,uWe as nP,rWe as nQ,cWe as nR,lWe as nS,pht as nT,QLe as nU,qC as nV,vpt as nW,gpt as nX,_me as nY,UC as nZ,Wgt as n_,sme as na,uje as nb,AHe as nc,Ogt as nd,Evt as ne,Svt as nf,Avt as ng,Cvt as nh,Pvt as ni,Dvt as nj,wvt as nk,zZe as nl,Mvt as nm,AZe as nn,Tvt as no,Sfe as np,fs as nq,cT as nr,rIe as ns,dIe as nt,Kae as nu,Xct as nv,Ee as nw,Mct as nx,$p as ny,eAe as nz,N as o,ilt as o$,j0t as o0,G0t as o1,zje as o2,yA as o3,gf as o4,Gme as o5,qn as o6,b1t as o7,kUe as o8,v6 as o9,kht as oA,fC as oB,Ede as oC,N0e as oD,aG as oE,xwe as oF,h$ as oG,iI as oH,bY as oI,clt as oJ,ult as oK,hlt as oL,pwe as oM,rlt as oN,llt as oO,alt as oP,Gbe as oQ,A_e as oR,B0 as oS,Oat as oT,s2e as oU,zr as oV,glt as oW,slt as oX,mwe as oY,n$ as oZ,elt as o_,Bg as oa,Wp as ob,Yh as oc,AG as od,x1t as oe,$Ue as of,iDe as og,tDe as oh,Gpt as oi,jpt as oj,Vpt as ok,Z6 as ol,Vz as om,qat as on,kTe as oo,Tv as op,fut as oq,put as or,dut as os,Ac as ot,NZe as ou,fde as ov,dde as ow,kC as ox,Dmt as oy,Cce as oz,De as p,Eg as p$,tlt as p0,gwe as p1,_lt as p2,plt as p3,flt as p4,mlt as p5,ylt as p6,vlt as p7,nlt as p8,dlt as p9,$Q as pA,lg as pB,_Ge as pC,jht as pD,Pf as pE,c0e as pF,sge as pG,Nb as pH,f8e as pI,ABe as pJ,r8e as pK,a8e as pL,uDe as pM,Op as pN,Nde as pO,ZV as pP,yx as pQ,ZOe as pR,YYe as pS,wa as pT,Qct as pU,Aqe as pV,Iqe as pW,Mqe as pX,u4e as pY,Xd as pZ,hhe as p_,jat as pa,olt as pb,Bat as pc,Lpt as pd,e6 as pe,kV as pf,U$e as pg,H$e as ph,j$e as pi,hht as pj,dht as pk,lZ as pl,yut as pm,C2 as pn,JI as po,Tdt as pp,QI as pq,cft as pr,doe as ps,Mze as pt,Idt as pu,dOe as pv,o6 as pw,$dt as px,hVe as py,dgt as pz,bPe as q,FA as q$,xke as q0,wke as q1,$qe as q2,XVe as q3,uGe as q4,soe as q5,_ae as q6,hct as q7,Lae as q8,tW as q9,Hpe as qA,Lht as qB,fdt as qC,pct as qD,yC as qE,$oe as qF,g2 as qG,Bft as qH,jft as qI,Nq as qJ,rYe as qK,w8e as qL,_8e as qM,_je as qN,v8e as qO,$Oe as qP,xyt as qQ,voe as qR,$c as qS,oG as qT,yRe as qU,GWe as qV,$Be as qW,DWe as qX,A_ as qY,bHe as qZ,lYe as q_,uhe as qa,bct as qb,I0t as qc,qGe as qd,H0t as qe,Fje as qf,Z0t as qg,io as qh,UQ as qi,W0t as qj,B0t as qk,Wae as ql,Gct as qm,Cg as qn,p1t as qo,sct as qp,hWe as qq,Xpe as qr,Bpe as qs,qpe as qt,jpe as qu,Kpt as qv,lLe as qw,Bht as qx,WBe as qy,Vc as qz,I as r,Qht as r$,k$e as r0,Aht as r1,Mht as r2,OC as r3,RC as r4,LC as r5,NLe as r6,LLe as r7,c8e as r8,l8e as r9,KWe as rA,GA as rB,cvt as rC,D9 as rD,uvt as rE,e1t as rF,jGe as rG,BGe as rH,_Ye as rI,EYe as rJ,PYe as rK,TYe as rL,TF as rM,zpe as rN,iut as rO,sPe as rP,tut as rQ,s1t as rR,PHe as rS,i1t as rT,Jft as rU,Kft as rV,iHe as rW,Ky as rX,Uct as rY,qht as rZ,wZ as r_,u8e as ra,Cx as rb,zA as rc,uy as rd,hme as re,os as rf,Zyt as rg,Jyt as rh,p0e as ri,pyt as rj,lvt as rk,ZC as rl,OG as rm,Ih as rn,y2 as ro,kct as rp,Jpt as rq,eFe as rr,CA as rs,igt as rt,K0t as ru,Vyt as rv,wq as rw,JWe as rx,QWe as ry,ZWe as rz,sde as s,_l as s$,tdt as s0,oft as s1,sft as s2,tft as s3,YNe as s4,fyt as s5,cht as s6,sA as s7,z7e as s8,Zdt as s9,yhe as sA,Bp as sB,nv as sC,qke as sD,LVe as sE,_1t as sF,Rg as sG,Qgt as sH,VC as sI,Jht as sJ,fpt as sK,Pht as sL,Imt as sM,IK as sN,KGe as sO,Q$ as sP,oWe as sQ,go as sR,BM as sS,Omt as sT,AK as sU,Nqe as sV,Vdt as sW,Rdt as sX,Fdt as sY,Ldt as sZ,zdt as s_,bRe as sa,Qdt as sb,B7e as sc,gde as sd,eft as se,mqe as sf,Ict as sg,Hfe as sh,WFe as si,Ipt as sj,Mpt as sk,Apt as sl,Tqe as sm,o4e as sn,xx as so,eG as sp,hRe as sq,cRe as sr,Zde as ss,kRe as st,ife as su,s6 as sv,Yde as sw,RS as sx,e8e as sy,mdt as sz,Sn as t,$J as t$,PX as t0,Odt as t1,qq as t2,zq as t3,X$ as t4,tht as t5,W$ as t6,NI as t7,kI as t8,yf as t9,WK as tA,BK as tB,W7e as tC,HK as tD,vFe as tE,aJ as tF,UK as tG,ldt as tH,JK as tI,mJ as tJ,gJ as tK,yJ as tL,gDe as tM,Nht as tN,Z7e as tO,vJ as tP,$ht as tQ,fmt as tR,Mmt as tS,pmt as tT,vL as tU,Pmt as tV,Smt as tW,wmt as tX,Emt as tY,Cmt as tZ,NJ as t_,gA as ta,Pgt as tb,$ct as tc,Nct as td,O9e as te,L7e as tf,r4e as tg,EZe as th,ght as ti,ydt as tj,wE as tk,sgt as tl,Uae as tm,OI as tn,R9e as to,RGe as tp,MBe as tq,zV as tr,nut as ts,oOe as tt,fE as tu,mE as tv,k2 as tw,rOe as tx,F0t as ty,QUe as tz,_ft as u,Cdt as u$,OJ as u0,xmt as u1,bmt as u2,TJ as u3,VK as u4,MJ as u5,PJ as u6,QK as u7,$K as u8,NK as u9,_M as uA,Ope as uB,wBe as uC,cTe as uD,BTe as uE,Fk as uF,wqe as uG,Sqe as uH,zqe as uI,Hgt as uJ,ndt as uK,cce as uL,RLe as uM,I8e as uN,UGe as uO,zce as uP,T8e as uQ,EHe as uR,o$e as uS,nje as uT,DVe as uU,Fke as uV,Tke as uW,sNe as uX,Ehe as uY,Lke as uZ,Ydt as u_,kK as ua,qK as ub,Xht as uc,vmt as ud,_mt as ue,j9e as uf,G9e as ug,Bct as uh,I4e as ui,Amt as uj,yL as uk,mmt as ul,Afe as um,lmt as un,ymt as uo,_Fe as up,mFe as uq,gmt as ur,pFe as us,aA as ut,_6 as uu,yFe as uv,umt as uw,Yut as ux,gct as uy,sHe as uz,fht as v,Tht as v$,kdt as v0,Ddt as v1,Ndt as v2,Due as v3,Ahe as v4,Aze as v5,o0t as v6,Dze as v7,gNe as v8,Dke as v9,aHe as vA,Fce as vB,F8e as vC,L8e as vD,kje as vE,rpt as vF,opt as vG,ZTe as vH,ZMe as vI,sht as vJ,zut as vK,E9 as vL,xft as vM,ift as vN,Zut as vO,gme as vP,Cp as vQ,XPe as vR,jje as vS,G$ as vT,_A as vU,fWe as vV,dWe as vW,q0e as vX,Z9e as vY,Uyt as vZ,_u as v_,GM as va,Nke as vb,Pdt as vc,$ke as vd,Mdt as ve,Adt as vf,aft as vg,yI as vh,xRe as vi,iA as vj,Z1t as vk,W1t as vl,sut as vm,whe as vn,YUe as vo,EA as vp,Kut as vq,Vhe as vr,LA as vs,CZe as vt,jZe as vu,SA as vv,l0t as vw,Bze as vx,Vmt as vy,qmt as vz,ni as w,Yft as w$,tIe as w0,BUe as w1,hh as w2,hce as w3,dce as w4,J1t as w5,K1t as w6,DX as w7,f0t as w8,SBe as w9,ept as wA,vut as wB,Spt as wC,wpt as wD,lut as wE,Zft as wF,Zht as wG,lpt as wH,lgt as wI,J0t as wJ,DRe as wK,dBe as wL,x6 as wM,UYe as wN,k0e as wO,ict as wP,p4 as wQ,eK as wR,QM as wS,Eyt as wT,Bpt as wU,Ov as wV,fL as wW,l1t as wX,yje as wY,tpt as wZ,i8e as w_,evt as wa,zl as wb,mme as wc,BF as wd,Oc as we,jUe as wf,Igt as wg,Tgt as wh,cje as wi,Wi as wj,cYe as wk,Kdt as wl,vdt as wm,Qd as wn,vfe as wo,zC as wp,wfe as wq,N2 as wr,E8e as ws,R8e as wt,PF as wu,bfe as wv,$Le as ww,aut as wx,hpt as wy,ipt as wz,L4e as x,S8e as x$,amt as x0,Ab as x1,NFe as x2,kOe as x3,byt as x4,aje as x5,Fht as x6,ZGe as x7,Wpe as x8,DOe as x9,ugt as xA,xoe as xB,Cut as xC,Wje as xD,npt as xE,$Ye as xF,m8e as xG,d8e as xH,zyt as xI,Nyt as xJ,Fyt as xK,emt as xL,Lyt as xM,eBe as xN,_n as xO,Oyt as xP,Ryt as xQ,NG as xR,Y0t as xS,GF as xT,CYe as xU,DBe as xV,u6 as xW,ug as xX,RYe as xY,rmt as xZ,qyt as x_,o1t as xa,jut as xb,bdt as xc,xdt as xd,Qje as xe,Fgt as xf,zgt as xg,Lgt as xh,Yc as xi,OUe as xj,c6 as xk,Jgt as xl,Lee as xm,fYe as xn,_dt as xo,edt as xp,kG as xq,Ree as xr,RV as xs,spt as xt,nmt as xu,Hq as xv,pme as xw,imt as xx,smt as xy,Hje as xz,Woe as y,W0e as y0,klt as y1,$lt as y2,AEe as y3,mft as y4,yft as y5,sOe as y6,Lft as y7,Cpt as y8,Ppt as y9,Fpt as ya,C0t as yb,LGe as yc,nvt as yd,At as z};
